!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).accumulableElements={})}(this,(function(t){"use strict";
/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const e=globalThis,r=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),i=new WeakMap;let a=class{constructor(t,e,r){if(this._$cssResult$=!0,r!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(r&&void 0===t){const r=void 0!==e&&1===e.length;r&&(t=i.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&i.set(e,t))}return t}toString(){return this.cssText}};const n=t=>new a("string"==typeof t?t:t+"",void 0,s),o=(t,...e)=>{const r=1===t.length?t[0]:e.reduce(((e,r,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[s+1]),t[0]);return new a(r,t,s)},l=r?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return n(e)})(t):t
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */,{is:c,defineProperty:d,getOwnPropertyDescriptor:h,getOwnPropertyNames:u,getOwnPropertySymbols:g,getPrototypeOf:p}=Object,m=globalThis,b=m.trustedTypes,y=b?b.emptyScript:"",Q=m.reactiveElementPolyfillSupport,B=(t,e)=>t,U={toAttribute(t,e){switch(e){case Boolean:t=t?y:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},f=(t,e)=>!c(t,e),F={attribute:!0,type:String,converter:U,reflect:!1,hasChanged:f};Symbol.metadata??=Symbol("metadata"),m.litPropertyMetadata??=new WeakMap;let I=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=F){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(t,r,e);void 0!==s&&d(this.prototype,t,s)}}static getPropertyDescriptor(t,e,r){const{get:s,set:i}=h(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return s?.call(this)},set(e){const a=s?.call(this);i.call(this,e),this.requestUpdate(t,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??F}static _$Ei(){if(this.hasOwnProperty(B("elementProperties")))return;const t=p(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(B("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(B("properties"))){const t=this.properties,e=[...u(t),...g(t)];for(const r of e)this.createProperty(r,t[r])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,r]of e)this.elementProperties.set(t,r)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const r=this._$Eu(t,e);void 0!==r&&this._$Eh.set(r,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift(l(t))}else void 0!==t&&e.push(l(t));return e}static _$Eu(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const r of e.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,s)=>{if(r)t.adoptedStyleSheets=s.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const r of s){const s=document.createElement("style"),i=e.litNonce;void 0!==i&&s.setAttribute("nonce",i),s.textContent=r.cssText,t.appendChild(s)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$EC(t,e){const r=this.constructor.elementProperties.get(t),s=this.constructor._$Eu(t,r);if(void 0!==s&&!0===r.reflect){const i=(void 0!==r.converter?.toAttribute?r.converter:U).toAttribute(e,r.type);this._$Em=t,null==i?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(t,e){const r=this.constructor,s=r._$Eh.get(t);if(void 0!==s&&this._$Em!==s){const t=r.getPropertyOptions(s),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:U;this._$Em=s,this[s]=i.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,r){if(void 0!==t){if(r??=this.constructor.getPropertyOptions(t),!(r.hasChanged??f)(this[t],e))return;this.P(t,e,r)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,r){this._$AL.has(t)||this._$AL.set(t,e),!0===r.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,r]of t)!0!==r.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],r)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}};I.elementStyles=[],I.shadowRootOptions={mode:"open"},I[B("elementProperties")]=new Map,I[B("finalized")]=new Map,Q?.({ReactiveElement:I}),(m.reactiveElementVersions??=[]).push("2.0.4");
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const C=globalThis,x=C.trustedTypes,v=x?x.createPolicy("lit-html",{createHTML:t=>t}):void 0,A="$lit$",E=`lit$${Math.random().toFixed(9).slice(2)}$`,R="?"+E,N=`<${R}>`,L=document,w=()=>L.createComment(""),S=t=>null===t||"object"!=typeof t&&"function"!=typeof t,D=Array.isArray,M="[ \t\n\f\r]",k=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T=/-->/g,H=/>/g,$=RegExp(`>|${M}(?:([^\\s"'>=/]+)(${M}*=${M}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),G=/'/g,z=/"/g,Y=/^(?:script|style|textarea|title)$/i,V=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),_=V(1),W=V(2),X=Symbol.for("lit-noChange"),J=Symbol.for("lit-nothing"),K=new WeakMap,Z=L.createTreeWalker(L,129);function P(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==v?v.createHTML(e):e}const O=(t,e)=>{const r=t.length-1,s=[];let i,a=2===e?"<svg>":"",n=k;for(let e=0;e<r;e++){const r=t[e];let o,l,c=-1,d=0;for(;d<r.length&&(n.lastIndex=d,l=n.exec(r),null!==l);)d=n.lastIndex,n===k?"!--"===l[1]?n=T:void 0!==l[1]?n=H:void 0!==l[2]?(Y.test(l[2])&&(i=RegExp("</"+l[2],"g")),n=$):void 0!==l[3]&&(n=$):n===$?">"===l[0]?(n=i??k,c=-1):void 0===l[1]?c=-2:(c=n.lastIndex-l[2].length,o=l[1],n=void 0===l[3]?$:'"'===l[3]?z:G):n===z||n===G?n=$:n===T||n===H?n=k:(n=$,i=void 0);const h=n===$&&t[e+1].startsWith("/>")?" ":"";a+=n===k?r+N:c>=0?(s.push(o),r.slice(0,c)+A+r.slice(c)+E+h):r+E+(-2===c?e:h)}return[P(t,a+(t[r]||"<?>")+(2===e?"</svg>":"")),s]};class j{constructor({strings:t,_$litType$:e},r){let s;this.parts=[];let i=0,a=0;const n=t.length-1,o=this.parts,[l,c]=O(t,e);if(this.el=j.createElement(l,r),Z.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(s=Z.nextNode())&&o.length<n;){if(1===s.nodeType){if(s.hasAttributes())for(const t of s.getAttributeNames())if(t.endsWith(A)){const e=c[a++],r=s.getAttribute(t).split(E),n=/([.?@])?(.*)/.exec(e);o.push({type:1,index:i,name:n[2],strings:r,ctor:"."===n[1]?st:"?"===n[1]?it:"@"===n[1]?at:rt}),s.removeAttribute(t)}else t.startsWith(E)&&(o.push({type:6,index:i}),s.removeAttribute(t));if(Y.test(s.tagName)){const t=s.textContent.split(E),e=t.length-1;if(e>0){s.textContent=x?x.emptyScript:"";for(let r=0;r<e;r++)s.append(t[r],w()),Z.nextNode(),o.push({type:2,index:++i});s.append(t[e],w())}}}else if(8===s.nodeType)if(s.data===R)o.push({type:2,index:i});else{let t=-1;for(;-1!==(t=s.data.indexOf(E,t+1));)o.push({type:7,index:i}),t+=E.length-1}i++}}static createElement(t,e){const r=L.createElement("template");return r.innerHTML=t,r}}function q(t,e,r=t,s){if(e===X)return e;let i=void 0!==s?r._$Co?.[s]:r._$Cl;const a=S(e)?void 0:e._$litDirective$;return i?.constructor!==a&&(i?._$AO?.(!1),void 0===a?i=void 0:(i=new a(t),i._$AT(t,r,s)),void 0!==s?(r._$Co??=[])[s]=i:r._$Cl=i),void 0!==i&&(e=q(t,i._$AS(t,e.values),i,s)),e}class tt{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:r}=this._$AD,s=(t?.creationScope??L).importNode(e,!0);Z.currentNode=s;let i=Z.nextNode(),a=0,n=0,o=r[0];for(;void 0!==o;){if(a===o.index){let e;2===o.type?e=new et(i,i.nextSibling,this,t):1===o.type?e=new o.ctor(i,o.name,o.strings,this,t):6===o.type&&(e=new nt(i,this,t)),this._$AV.push(e),o=r[++n]}a!==o?.index&&(i=Z.nextNode(),a++)}return Z.currentNode=L,s}p(t){let e=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class et{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,r,s){this.type=2,this._$AH=J,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=q(this,t,e),S(t)?t===J||null==t||""===t?(this._$AH!==J&&this._$AR(),this._$AH=J):t!==this._$AH&&t!==X&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>D(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==J&&S(this._$AH)?this._$AA.nextSibling.data=t:this.T(L.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:r}=t,s="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=j.createElement(P(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(e);else{const t=new tt(s,this),r=t.u(this.options);t.p(e),this.T(r),this._$AH=t}}_$AC(t){let e=K.get(t.strings);return void 0===e&&K.set(t.strings,e=new j(t)),e}k(t){D(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,s=0;for(const i of t)s===e.length?e.push(r=new et(this.S(w()),this.S(w()),this,this.options)):r=e[s],r._$AI(i),s++;s<e.length&&(this._$AR(r&&r._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class rt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,r,s,i){this.type=1,this._$AH=J,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=J}_$AI(t,e=this,r,s){const i=this.strings;let a=!1;if(void 0===i)t=q(this,t,e,0),a=!S(t)||t!==this._$AH&&t!==X,a&&(this._$AH=t);else{const s=t;let n,o;for(t=i[0],n=0;n<i.length-1;n++)o=q(this,s[r+n],e,n),o===X&&(o=this._$AH[n]),a||=!S(o)||o!==this._$AH[n],o===J?t=J:t!==J&&(t+=(o??"")+i[n+1]),this._$AH[n]=o}a&&!s&&this.j(t)}j(t){t===J?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class st extends rt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===J?void 0:t}}class it extends rt{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==J)}}class at extends rt{constructor(t,e,r,s,i){super(t,e,r,s,i),this.type=5}_$AI(t,e=this){if((t=q(this,t,e,0)??J)===X)return;const r=this._$AH,s=t===J&&r!==J||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,i=t!==J&&(r===J||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class nt{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){q(this,t)}}const ot=C.litHtmlPolyfillSupport;ot?.(j,et),(C.litHtmlVersions??=[]).push("3.1.3");
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
class lt extends I{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,r)=>{const s=r?.renderBefore??e;let i=s._$litPart$;if(void 0===i){const t=r?.renderBefore??null;s._$litPart$=i=new et(e.insertBefore(w(),t),t,void 0,r??{})}return i._$AI(t),i})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return X}}lt._$litElement$=!0,lt.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:lt});const ct=globalThis.litElementPolyfillSupport;function dt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ht(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ut(t){let e,r,s;function i(t,s,i=0,a=t.length){if(i<a){if(0!==e(s,s))return a;do{const e=i+a>>>1;r(t[e],s)<0?i=e+1:a=e}while(i<a)}return i}return 2!==t.length?(e=dt,r=(e,r)=>dt(t(e),r),s=(e,r)=>t(e)-r):(e=t===dt||t===ht?t:gt,r=t,s=t),{left:i,center:function(t,e,r=0,a=t.length){const n=i(t,e,r,a-1);return n>r&&s(t[n-1],e)>-s(t[n],e)?n-1:n},right:function(t,s,i=0,a=t.length){if(i<a){if(0!==e(s,s))return a;do{const e=i+a>>>1;r(t[e],s)<=0?i=e+1:a=e}while(i<a)}return i}}}function gt(){return 0}ct?.({LitElement:lt}),(globalThis.litElementVersions??=[]).push("4.0.5");const pt=ut(dt).right;ut((function(t){return null===t?NaN:+t})).center;const mt=Math.sqrt(50),bt=Math.sqrt(10),yt=Math.sqrt(2);function Qt(t,e,r){const s=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(s)),a=s/Math.pow(10,i),n=a>=mt?10:a>=bt?5:a>=yt?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/n,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*n,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=r&&r<2?Qt(t,e,2*r):[o,l,c]}function Bt(t,e,r){return Qt(t=+t,e=+e,r=+r)[2]}function Ut(t){return t}var ft=1,Ft=2,It=3,Ct=4,xt=1e-6;function vt(t){return"translate("+t+",0)"}function At(t){return"translate(0,"+t+")"}function Et(t){return e=>+t(e)}function Rt(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function Nt(){return!this.__axis}function Lt(t,e){var r=[],s=null,i=null,a=6,n=6,o=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===ft||t===Ct?-1:1,d=t===Ct||t===Ft?"x":"y",h=t===ft||t===It?vt:At;function u(u){var g=null==s?e.ticks?e.ticks.apply(e,r):e.domain():s,p=null==i?e.tickFormat?e.tickFormat.apply(e,r):Ut:i,m=Math.max(a,0)+o,b=e.range(),y=+b[0]+l,Q=+b[b.length-1]+l,B=(e.bandwidth?Rt:Et)(e.copy(),l),U=u.selection?u.selection():u,f=U.selectAll(".domain").data([null]),F=U.selectAll(".tick").data(g,e).order(),I=F.exit(),C=F.enter().append("g").attr("class","tick"),x=F.select("line"),v=F.select("text");f=f.merge(f.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(C),x=x.merge(C.append("line").attr("stroke","currentColor").attr(d+"2",c*a)),v=v.merge(C.append("text").attr("fill","currentColor").attr(d,c*m).attr("dy",t===ft?"0em":t===It?"0.71em":"0.32em")),u!==U&&(f=f.transition(u),F=F.transition(u),x=x.transition(u),v=v.transition(u),I=I.transition(u).attr("opacity",xt).attr("transform",(function(t){return isFinite(t=B(t))?h(t+l):this.getAttribute("transform")})),C.attr("opacity",xt).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:B(t))+l)}))),I.remove(),f.attr("d",t===Ct||t===Ft?n?"M"+c*n+","+y+"H"+l+"V"+Q+"H"+c*n:"M"+l+","+y+"V"+Q:n?"M"+y+","+c*n+"V"+l+"H"+Q+"V"+c*n:"M"+y+","+l+"H"+Q),F.attr("opacity",1).attr("transform",(function(t){return h(B(t)+l)})),x.attr(d+"2",c*a),v.attr(d,c*m).text(p),U.filter(Nt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ft?"start":t===Ct?"end":"middle"),U.each((function(){this.__axis=B}))}return u.scale=function(t){return arguments.length?(e=t,u):e},u.ticks=function(){return r=Array.from(arguments),u},u.tickArguments=function(t){return arguments.length?(r=null==t?[]:Array.from(t),u):r.slice()},u.tickValues=function(t){return arguments.length?(s=null==t?null:Array.from(t),u):s&&s.slice()},u.tickFormat=function(t){return arguments.length?(i=t,u):i},u.tickSize=function(t){return arguments.length?(a=n=+t,u):a},u.tickSizeInner=function(t){return arguments.length?(a=+t,u):a},u.tickSizeOuter=function(t){return arguments.length?(n=+t,u):n},u.tickPadding=function(t){return arguments.length?(o=+t,u):o},u.offset=function(t){return arguments.length?(l=+t,u):l},u}function wt(t){return Lt(Ct,t)}var St={value:()=>{}};function Dt(){for(var t,e=0,r=arguments.length,s={};e<r;++e){if(!(t=arguments[e]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new Mt(s)}function Mt(t){this._=t}function kt(t,e){for(var r,s=0,i=t.length;s<i;++s)if((r=t[s]).name===e)return r.value}function Tt(t,e,r){for(var s=0,i=t.length;s<i;++s)if(t[s].name===e){t[s]=St,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=r&&t.push({name:e,value:r}),t}Mt.prototype=Dt.prototype={constructor:Mt,on:function(t,e){var r,s,i=this._,a=(s=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!s.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),n=-1,o=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++n<o;)if(r=(t=a[n]).type)i[r]=Tt(i[r],t.name,e);else if(null==e)for(r in i)i[r]=Tt(i[r],t.name,null);return this}for(;++n<o;)if((r=(t=a[n]).type)&&(r=kt(i[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Mt(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,s,i=new Array(r),a=0;a<r;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,r=(s=this._[t]).length;a<r;++a)s[a].value.apply(e,i)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],i=0,a=s.length;i<a;++i)s[i].value.apply(e,r)}};var Ht="http://www.w3.org/1999/xhtml",$t={svg:"http://www.w3.org/2000/svg",xhtml:Ht,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gt(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),$t.hasOwnProperty(e)?{space:$t[e],local:t}:t}function zt(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Ht&&e.documentElement.namespaceURI===Ht?e.createElement(t):e.createElementNS(r,t)}}function Yt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vt(t){var e=Gt(t);return(e.local?Yt:zt)(e)}function _t(){}function Wt(t){return null==t?_t:function(){return this.querySelector(t)}}function Xt(){return[]}function Jt(t){return null==t?Xt:function(){return this.querySelectorAll(t)}}function Kt(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function Zt(t){return function(){return this.matches(t)}}function Pt(t){return function(e){return e.matches(t)}}var Ot=Array.prototype.find;function jt(){return this.firstElementChild}var qt=Array.prototype.filter;function te(){return Array.from(this.children)}function ee(t){return new Array(t.length)}function re(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function se(t,e,r,s,i,a){for(var n,o=0,l=e.length,c=a.length;o<c;++o)(n=e[o])?(n.__data__=a[o],s[o]=n):r[o]=new re(t,a[o]);for(;o<l;++o)(n=e[o])&&(i[o]=n)}function ie(t,e,r,s,i,a,n){var o,l,c,d=new Map,h=e.length,u=a.length,g=new Array(h);for(o=0;o<h;++o)(l=e[o])&&(g[o]=c=n.call(l,l.__data__,o,e)+"",d.has(c)?i[o]=l:d.set(c,l));for(o=0;o<u;++o)c=n.call(t,a[o],o,a)+"",(l=d.get(c))?(s[o]=l,l.__data__=a[o],d.delete(c)):r[o]=new re(t,a[o]);for(o=0;o<h;++o)(l=e[o])&&d.get(g[o])===l&&(i[o]=l)}function ae(t){return t.__data__}function ne(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function oe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function le(t){return function(){this.removeAttribute(t)}}function ce(t){return function(){this.removeAttributeNS(t.space,t.local)}}function de(t,e){return function(){this.setAttribute(t,e)}}function he(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ue(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}}function ge(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function pe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function me(t){return function(){this.style.removeProperty(t)}}function be(t,e,r){return function(){this.style.setProperty(t,e,r)}}function ye(t,e,r){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,r)}}function Qe(t,e){return t.style.getPropertyValue(e)||pe(t).getComputedStyle(t,null).getPropertyValue(e)}function Be(t){return function(){delete this[t]}}function Ue(t,e){return function(){this[t]=e}}function fe(t,e){return function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}}function Fe(t){return t.trim().split(/^|\s+/)}function Ie(t){return t.classList||new Ce(t)}function Ce(t){this._node=t,this._names=Fe(t.getAttribute("class")||"")}function xe(t,e){for(var r=Ie(t),s=-1,i=e.length;++s<i;)r.add(e[s])}function ve(t,e){for(var r=Ie(t),s=-1,i=e.length;++s<i;)r.remove(e[s])}function Ae(t){return function(){xe(this,t)}}function Ee(t){return function(){ve(this,t)}}function Re(t,e){return function(){(e.apply(this,arguments)?xe:ve)(this,t)}}function Ne(){this.textContent=""}function Le(t){return function(){this.textContent=t}}function we(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Se(){this.innerHTML=""}function De(t){return function(){this.innerHTML=t}}function Me(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ke(){this.nextSibling&&this.parentNode.appendChild(this)}function Te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function He(){return null}function $e(){var t=this.parentNode;t&&t.removeChild(this)}function Ge(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ze(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ye(t){return function(){var e=this.__on;if(e){for(var r,s=0,i=-1,a=e.length;s<a;++s)r=e[s],t.type&&r.type!==t.type||r.name!==t.name?e[++i]=r:this.removeEventListener(r.type,r.listener,r.options);++i?e.length=i:delete this.__on}}}function Ve(t,e,r){return function(){var s,i=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var n=0,o=i.length;n<o;++n)if((s=i[n]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=r),void(s.value=e);this.addEventListener(t.type,a,r),s={type:t.type,name:t.name,value:e,listener:a,options:r},i?i.push(s):this.__on=[s]}}function _e(t,e,r){var s=pe(t),i=s.CustomEvent;"function"==typeof i?i=new i(e,r):(i=s.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function We(t,e){return function(){return _e(this,t,e)}}function Xe(t,e){return function(){return _e(this,t,e.apply(this,arguments))}}re.prototype={constructor:re,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ce.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Je=[null];function Ke(t,e){this._groups=t,this._parents=e}function Ze(){return new Ke([[document.documentElement]],Je)}function Pe(t){return"string"==typeof t?new Ke([[document.querySelector(t)]],[document.documentElement]):new Ke([[t]],Je)}Ke.prototype=Ze.prototype={constructor:Ke,select:function(t){"function"!=typeof t&&(t=Wt(t));for(var e=this._groups,r=e.length,s=new Array(r),i=0;i<r;++i)for(var a,n,o=e[i],l=o.length,c=s[i]=new Array(l),d=0;d<l;++d)(a=o[d])&&(n=t.call(a,a.__data__,d,o))&&("__data__"in a&&(n.__data__=a.__data__),c[d]=n);return new Ke(s,this._parents)},selectAll:function(t){t="function"==typeof t?Kt(t):Jt(t);for(var e=this._groups,r=e.length,s=[],i=[],a=0;a<r;++a)for(var n,o=e[a],l=o.length,c=0;c<l;++c)(n=o[c])&&(s.push(t.call(n,n.__data__,c,o)),i.push(n));return new Ke(s,i)},selectChild:function(t){return this.select(null==t?jt:function(t){return function(){return Ot.call(this.children,t)}}("function"==typeof t?t:Pt(t)))},selectChildren:function(t){return this.selectAll(null==t?te:function(t){return function(){return qt.call(this.children,t)}}("function"==typeof t?t:Pt(t)))},filter:function(t){"function"!=typeof t&&(t=Zt(t));for(var e=this._groups,r=e.length,s=new Array(r),i=0;i<r;++i)for(var a,n=e[i],o=n.length,l=s[i]=[],c=0;c<o;++c)(a=n[c])&&t.call(a,a.__data__,c,n)&&l.push(a);return new Ke(s,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ae);var r=e?ie:se,s=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,n=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var d=s[c],h=i[c],u=h.length,g=ne(t.call(d,d&&d.__data__,c,s)),p=g.length,m=o[c]=new Array(p),b=n[c]=new Array(p);r(d,h,m,b,l[c]=new Array(u),g,e);for(var y,Q,B=0,U=0;B<p;++B)if(y=m[B]){for(B>=U&&(U=B+1);!(Q=b[U])&&++U<p;);y._next=Q||null}}return(n=new Ke(n,s))._enter=o,n._exit=l,n},enter:function(){return new Ke(this._enter||this._groups.map(ee),this._parents)},exit:function(){return new Ke(this._exit||this._groups.map(ee),this._parents)},join:function(t,e,r){var s=this.enter(),i=this,a=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==r?a.remove():r(a),s&&i?s.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,r=this._groups,s=e._groups,i=r.length,a=s.length,n=Math.min(i,a),o=new Array(i),l=0;l<n;++l)for(var c,d=r[l],h=s[l],u=d.length,g=o[l]=new Array(u),p=0;p<u;++p)(c=d[p]||h[p])&&(g[p]=c);for(;l<i;++l)o[l]=r[l];return new Ke(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var s,i=t[e],a=i.length-1,n=i[a];--a>=0;)(s=i[a])&&(n&&4^s.compareDocumentPosition(n)&&n.parentNode.insertBefore(s,n),n=s);return this},sort:function(t){function e(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}t||(t=oe);for(var r=this._groups,s=r.length,i=new Array(s),a=0;a<s;++a){for(var n,o=r[a],l=o.length,c=i[a]=new Array(l),d=0;d<l;++d)(n=o[d])&&(c[d]=n);c.sort(e)}return new Ke(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var s=t[e],i=0,a=s.length;i<a;++i){var n=s[i];if(n)return n}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,r=0,s=e.length;r<s;++r)for(var i,a=e[r],n=0,o=a.length;n<o;++n)(i=a[n])&&t.call(i,i.__data__,n,a);return this},attr:function(t,e){var r=Gt(t);if(arguments.length<2){var s=this.node();return r.local?s.getAttributeNS(r.space,r.local):s.getAttribute(r)}return this.each((null==e?r.local?ce:le:"function"==typeof e?r.local?ge:ue:r.local?he:de)(r,e))},style:function(t,e,r){return arguments.length>1?this.each((null==e?me:"function"==typeof e?ye:be)(t,e,null==r?"":r)):Qe(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Be:"function"==typeof e?fe:Ue)(t,e)):this.node()[t]},classed:function(t,e){var r=Fe(t+"");if(arguments.length<2){for(var s=Ie(this.node()),i=-1,a=r.length;++i<a;)if(!s.contains(r[i]))return!1;return!0}return this.each(("function"==typeof e?Re:e?Ae:Ee)(r,e))},text:function(t){return arguments.length?this.each(null==t?Ne:("function"==typeof t?we:Le)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Se:("function"==typeof t?Me:De)(t)):this.node().innerHTML},raise:function(){return this.each(ke)},lower:function(){return this.each(Te)},append:function(t){var e="function"==typeof t?t:Vt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var r="function"==typeof t?t:Vt(t),s=null==e?He:"function"==typeof e?e:Wt(e);return this.select((function(){return this.insertBefore(r.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each($e)},clone:function(t){return this.select(t?ze:Ge)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,r){var s,i,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");return r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}}))}(t+""),n=a.length;if(!(arguments.length<2)){for(o=e?Ve:Ye,s=0;s<n;++s)this.each(o(a[s],e,r));return this}var o=this.node().__on;if(o)for(var l,c=0,d=o.length;c<d;++c)for(s=0,l=o[c];s<n;++s)if((i=a[s]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Xe:We)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var s,i=t[e],a=0,n=i.length;a<n;++a)(s=i[a])&&(yield s)}};var Oe=0;function je(){return new qe}function qe(){this._="@"+(++Oe).toString(36)}function tr(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var s=r.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,[(s=s.matrixTransform(e.getScreenCTM().inverse())).x,s.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}qe.prototype=je.prototype={constructor:qe,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const er={passive:!1},rr={capture:!0,passive:!1};function sr(t){t.stopImmediatePropagation()}function ir(t){t.preventDefault(),t.stopImmediatePropagation()}var ar=t=>()=>t;function nr(t,{sourceEvent:e,subject:r,target:s,identifier:i,active:a,x:n,y:o,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:n,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function or(t){return!t.ctrlKey&&!t.button}function lr(){return this.parentNode}function cr(t,e){return null==e?{x:t.x,y:t.y}:e}function dr(){return navigator.maxTouchPoints||"ontouchstart"in this}function hr(){var t,e,r,s,i=or,a=lr,n=cr,o=dr,l={},c=Dt("start","drag","end"),d=0,h=0;function u(t){t.on("mousedown.drag",g).filter(o).on("touchstart.drag",b).on("touchmove.drag",y,er).on("touchend.drag touchcancel.drag",Q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(n,o){if(!s&&i.call(this,n,o)){var l=B(this,a.call(this,n,o),n,o,"mouse");l&&(Pe(n.view).on("mousemove.drag",p,rr).on("mouseup.drag",m,rr),function(t){var e=t.document.documentElement,r=Pe(t).on("dragstart.drag",ir,rr);"onselectstart"in e?r.on("selectstart.drag",ir,rr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(n.view),sr(n),r=!1,t=n.clientX,e=n.clientY,l("start",n))}}function p(s){if(ir(s),!r){var i=s.clientX-t,a=s.clientY-e;r=i*i+a*a>h}l.mouse("drag",s)}function m(t){Pe(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var r=t.document.documentElement,s=Pe(t).on("dragstart.drag",null);e&&(s.on("click.drag",ir,rr),setTimeout((function(){s.on("click.drag",null)}),0)),"onselectstart"in r?s.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}(t.view,r),ir(t),l.mouse("end",t)}function b(t,e){if(i.call(this,t,e)){var r,s,n=t.changedTouches,o=a.call(this,t,e),l=n.length;for(r=0;r<l;++r)(s=B(this,o,t,e,n[r].identifier,n[r]))&&(sr(t),s("start",t,n[r]))}}function y(t){var e,r,s=t.changedTouches,i=s.length;for(e=0;e<i;++e)(r=l[s[e].identifier])&&(ir(t),r("drag",t,s[e]))}function Q(t){var e,r,i=t.changedTouches,a=i.length;for(s&&clearTimeout(s),s=setTimeout((function(){s=null}),500),e=0;e<a;++e)(r=l[i[e].identifier])&&(sr(t),r("end",t,i[e]))}function B(t,e,r,s,i,a){var o,h,g,p=c.copy(),m=tr(a||r,e);if(null!=(g=n.call(t,new nr("beforestart",{sourceEvent:r,target:u,identifier:i,active:d,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),s)))return o=g.x-m[0]||0,h=g.y-m[1]||0,function r(a,n,c){var b,y=m;switch(a){case"start":l[i]=r,b=d++;break;case"end":delete l[i],--d;case"drag":m=tr(c||n,e),b=d}p.call(a,t,new nr(a,{sourceEvent:n,subject:g,target:u,identifier:i,active:b,x:m[0]+o,y:m[1]+h,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:p}),s)}}return u.filter=function(t){return arguments.length?(i="function"==typeof t?t:ar(!!t),u):i},u.container=function(t){return arguments.length?(a="function"==typeof t?t:ar(t),u):a},u.subject=function(t){return arguments.length?(n="function"==typeof t?t:ar(t),u):n},u.touchable=function(t){return arguments.length?(o="function"==typeof t?t:ar(!!t),u):o},u.on=function(){var t=c.on.apply(c,arguments);return t===c?u:t},u.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,u):Math.sqrt(h)},u}function ur(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function gr(t,e){var r=Object.create(t.prototype);for(var s in e)r[s]=e[s];return r}function pr(){}nr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var mr=.7,br=1/mr,yr="\\s*([+-]?\\d+)\\s*",Qr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Br="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ur=/^#([0-9a-f]{3,8})$/,fr=new RegExp(`^rgb\\(${yr},${yr},${yr}\\)$`),Fr=new RegExp(`^rgb\\(${Br},${Br},${Br}\\)$`),Ir=new RegExp(`^rgba\\(${yr},${yr},${yr},${Qr}\\)$`),Cr=new RegExp(`^rgba\\(${Br},${Br},${Br},${Qr}\\)$`),xr=new RegExp(`^hsl\\(${Qr},${Br},${Br}\\)$`),vr=new RegExp(`^hsla\\(${Qr},${Br},${Br},${Qr}\\)$`),Ar={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Er(){return this.rgb().formatHex()}function Rr(){return this.rgb().formatRgb()}function Nr(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Ur.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?Lr(e):3===r?new Dr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?wr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?wr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=fr.exec(t))?new Dr(e[1],e[2],e[3],1):(e=Fr.exec(t))?new Dr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ir.exec(t))?wr(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?wr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=xr.exec(t))?Gr(e[1],e[2]/100,e[3]/100,1):(e=vr.exec(t))?Gr(e[1],e[2]/100,e[3]/100,e[4]):Ar.hasOwnProperty(t)?Lr(Ar[t]):"transparent"===t?new Dr(NaN,NaN,NaN,0):null}function Lr(t){return new Dr(t>>16&255,t>>8&255,255&t,1)}function wr(t,e,r,s){return s<=0&&(t=e=r=NaN),new Dr(t,e,r,s)}function Sr(t,e,r,s){return 1===arguments.length?function(t){return t instanceof pr||(t=Nr(t)),t?new Dr((t=t.rgb()).r,t.g,t.b,t.opacity):new Dr}(t):new Dr(t,e,r,null==s?1:s)}function Dr(t,e,r,s){this.r=+t,this.g=+e,this.b=+r,this.opacity=+s}function Mr(){return`#${$r(this.r)}${$r(this.g)}${$r(this.b)}`}function kr(){const t=Tr(this.opacity);return`${1===t?"rgb(":"rgba("}${Hr(this.r)}, ${Hr(this.g)}, ${Hr(this.b)}${1===t?")":`, ${t})`}`}function Tr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $r(t){return((t=Hr(t))<16?"0":"")+t.toString(16)}function Gr(t,e,r,s){return s<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Yr(t,e,r,s)}function zr(t){if(t instanceof Yr)return new Yr(t.h,t.s,t.l,t.opacity);if(t instanceof pr||(t=Nr(t)),!t)return new Yr;if(t instanceof Yr)return t;var e=(t=t.rgb()).r/255,r=t.g/255,s=t.b/255,i=Math.min(e,r,s),a=Math.max(e,r,s),n=NaN,o=a-i,l=(a+i)/2;return o?(n=e===a?(r-s)/o+6*(r<s):r===a?(s-e)/o+2:(e-r)/o+4,o/=l<.5?a+i:2-a-i,n*=60):o=l>0&&l<1?0:n,new Yr(n,o,l,t.opacity)}function Yr(t,e,r,s){this.h=+t,this.s=+e,this.l=+r,this.opacity=+s}function Vr(t){return(t=(t||0)%360)<0?t+360:t}function _r(t){return Math.max(0,Math.min(1,t||0))}function Wr(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}ur(pr,Nr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Er,formatHex:Er,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return zr(this).formatHsl()},formatRgb:Rr,toString:Rr}),ur(Dr,Sr,gr(pr,{brighter(t){return t=null==t?br:Math.pow(br,t),new Dr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?mr:Math.pow(mr,t),new Dr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Dr(Hr(this.r),Hr(this.g),Hr(this.b),Tr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mr,formatHex:Mr,formatHex8:function(){return`#${$r(this.r)}${$r(this.g)}${$r(this.b)}${$r(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:kr,toString:kr})),ur(Yr,(function(t,e,r,s){return 1===arguments.length?zr(t):new Yr(t,e,r,null==s?1:s)}),gr(pr,{brighter(t){return t=null==t?br:Math.pow(br,t),new Yr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?mr:Math.pow(mr,t),new Yr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*e,i=2*r-s;return new Dr(Wr(t>=240?t-240:t+120,i,s),Wr(t,i,s),Wr(t<120?t+240:t-120,i,s),this.opacity)},clamp(){return new Yr(Vr(this.h),_r(this.s),_r(this.l),Tr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Tr(this.opacity);return`${1===t?"hsl(":"hsla("}${Vr(this.h)}, ${100*_r(this.s)}%, ${100*_r(this.l)}%${1===t?")":`, ${t})`}`}}));var Xr=t=>()=>t;function Jr(t){return 1==(t=+t)?Kr:function(e,r){return r-e?function(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(s){return Math.pow(t+s*e,r)}}(e,r,t):Xr(isNaN(e)?r:e)}}function Kr(t,e){var r=e-t;return r?function(t,e){return function(r){return t+r*e}}(t,r):Xr(isNaN(t)?e:t)}var Zr=function t(e){var r=Jr(e);function s(t,e){var s=r((t=Sr(t)).r,(e=Sr(e)).r),i=r(t.g,e.g),a=r(t.b,e.b),n=Kr(t.opacity,e.opacity);return function(e){return t.r=s(e),t.g=i(e),t.b=a(e),t.opacity=n(e),t+""}}return s.gamma=t,s}(1);function Pr(t,e){e||(e=[]);var r,s=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(r=0;r<s;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function Or(t,e){var r,s=e?e.length:0,i=t?Math.min(s,t.length):0,a=new Array(i),n=new Array(s);for(r=0;r<i;++r)a[r]=is(t[r],e[r]);for(;r<s;++r)n[r]=e[r];return function(t){for(r=0;r<i;++r)n[r]=a[r](t);return n}}function jr(t,e){var r=new Date;return t=+t,e=+e,function(s){return r.setTime(t*(1-s)+e*s),r}}function qr(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function ts(t,e){var r,s={},i={};for(r in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)r in t?s[r]=is(t[r],e[r]):i[r]=e[r];return function(t){for(r in s)i[r]=s[r](t);return i}}var es=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rs=new RegExp(es.source,"g");function ss(t,e){var r,s,i,a=es.lastIndex=rs.lastIndex=0,n=-1,o=[],l=[];for(t+="",e+="";(r=es.exec(t))&&(s=rs.exec(e));)(i=s.index)>a&&(i=e.slice(a,i),o[n]?o[n]+=i:o[++n]=i),(r=r[0])===(s=s[0])?o[n]?o[n]+=s:o[++n]=s:(o[++n]=null,l.push({i:n,x:qr(r,s)})),a=rs.lastIndex;return a<e.length&&(i=e.slice(a),o[n]?o[n]+=i:o[++n]=i),o.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var r,s=0;s<e;++s)o[(r=l[s]).i]=r.x(t);return o.join("")})}function is(t,e){var r,s=typeof e;return null==e||"boolean"===s?Xr(e):("number"===s?qr:"string"===s?(r=Nr(e))?(e=r,Zr):ss:e instanceof Nr?Zr:e instanceof Date?jr:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Pr:Array.isArray(e)?Or:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ts:qr)(t,e)}function as(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var ns,os=180/Math.PI,ls={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cs(t,e,r,s,i,a){var n,o,l;return(n=Math.sqrt(t*t+e*e))&&(t/=n,e/=n),(l=t*r+e*s)&&(r-=t*l,s-=e*l),(o=Math.sqrt(r*r+s*s))&&(r/=o,s/=o,l/=o),t*s<e*r&&(t=-t,e=-e,l=-l,n=-n),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*os,skewX:Math.atan(l)*os,scaleX:n,scaleY:o}}function ds(t,e,r,s){function i(t){return t.length?t.pop()+" ":""}return function(a,n){var o=[],l=[];return a=t(a),n=t(n),function(t,s,i,a,n,o){if(t!==i||s!==a){var l=n.push("translate(",null,e,null,r);o.push({i:l-4,x:qr(t,i)},{i:l-2,x:qr(s,a)})}else(i||a)&&n.push("translate("+i+e+a+r)}(a.translateX,a.translateY,n.translateX,n.translateY,o,l),function(t,e,r,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:r.push(i(r)+"rotate(",null,s)-2,x:qr(t,e)})):e&&r.push(i(r)+"rotate("+e+s)}(a.rotate,n.rotate,o,l),function(t,e,r,a){t!==e?a.push({i:r.push(i(r)+"skewX(",null,s)-2,x:qr(t,e)}):e&&r.push(i(r)+"skewX("+e+s)}(a.skewX,n.skewX,o,l),function(t,e,r,s,a,n){if(t!==r||e!==s){var o=a.push(i(a)+"scale(",null,",",null,")");n.push({i:o-4,x:qr(t,r)},{i:o-2,x:qr(e,s)})}else 1===r&&1===s||a.push(i(a)+"scale("+r+","+s+")")}(a.scaleX,a.scaleY,n.scaleX,n.scaleY,o,l),a=n=null,function(t){for(var e,r=-1,s=l.length;++r<s;)o[(e=l[r]).i]=e.x(t);return o.join("")}}}var hs,us,gs=ds((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ls:cs(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),ps=ds((function(t){return null==t?ls:(ns||(ns=document.createElementNS("http://www.w3.org/2000/svg","g")),ns.setAttribute("transform",t),(t=ns.transform.baseVal.consolidate())?cs((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ls)}),", ",")",")"),ms=0,bs=0,ys=0,Qs=1e3,Bs=0,Us=0,fs=0,Fs="object"==typeof performance&&performance.now?performance:Date,Is="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Cs(){return Us||(Is(xs),Us=Fs.now()+fs)}function xs(){Us=0}function vs(){this._call=this._time=this._next=null}function As(t,e,r){var s=new vs;return s.restart(t,e,r),s}function Es(){Us=(Bs=Fs.now())+fs,ms=bs=0;try{!function(){Cs(),++ms;for(var t,e=hs;e;)(t=Us-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ms}()}finally{ms=0,function(){var t,e,r=hs,s=1/0;for(;r;)r._call?(s>r._time&&(s=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:hs=e);us=t,Ns(s)}(),Us=0}}function Rs(){var t=Fs.now(),e=t-Bs;e>Qs&&(fs-=e,Bs=t)}function Ns(t){ms||(bs&&(bs=clearTimeout(bs)),t-Us>24?(t<1/0&&(bs=setTimeout(Es,t-Fs.now()-fs)),ys&&(ys=clearInterval(ys))):(ys||(Bs=Fs.now(),ys=setInterval(Rs,Qs)),ms=1,Is(Es)))}function Ls(t,e,r){var s=new vs;return e=null==e?0:+e,s.restart((r=>{s.stop(),t(r+e)}),e,r),s}vs.prototype=As.prototype={constructor:vs,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?Cs():+r)+(null==e?0:+e),this._next||us===this||(us?us._next=this:hs=this,us=this),this._call=t,this._time=r,Ns()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ns())}};var ws=Dt("start","end","cancel","interrupt"),Ss=[],Ds=0,Ms=1,ks=2,Ts=3,Hs=4,$s=5,Gs=6;function zs(t,e,r,s,i,a){var n=t.__transition;if(n){if(r in n)return}else t.__transition={};!function(t,e,r){var s,i=t.__transition;function a(t){r.state=Ms,r.timer.restart(n,r.delay,r.time),r.delay<=t&&n(t-r.delay)}function n(a){var c,d,h,u;if(r.state!==Ms)return l();for(c in i)if((u=i[c]).name===r.name){if(u.state===Ts)return Ls(n);u.state===Hs?(u.state=Gs,u.timer.stop(),u.on.call("interrupt",t,t.__data__,u.index,u.group),delete i[c]):+c<e&&(u.state=Gs,u.timer.stop(),u.on.call("cancel",t,t.__data__,u.index,u.group),delete i[c])}if(Ls((function(){r.state===Ts&&(r.state=Hs,r.timer.restart(o,r.delay,r.time),o(a))})),r.state=ks,r.on.call("start",t,t.__data__,r.index,r.group),r.state===ks){for(r.state=Ts,s=new Array(h=r.tween.length),c=0,d=-1;c<h;++c)(u=r.tween[c].value.call(t,t.__data__,r.index,r.group))&&(s[++d]=u);s.length=d+1}}function o(e){for(var i=e<r.duration?r.ease.call(null,e/r.duration):(r.timer.restart(l),r.state=$s,1),a=-1,n=s.length;++a<n;)s[a].call(t,i);r.state===$s&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){for(var s in r.state=Gs,r.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=r,r.timer=As(a,0,r.time)}(t,r,{name:e,index:s,group:i,on:ws,tween:Ss,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ds})}function Ys(t,e){var r=_s(t,e);if(r.state>Ds)throw new Error("too late; already scheduled");return r}function Vs(t,e){var r=_s(t,e);if(r.state>Ts)throw new Error("too late; already running");return r}function _s(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Ws(t,e){var r,s;return function(){var i=Vs(this,t),a=i.tween;if(a!==r)for(var n=0,o=(s=r=a).length;n<o;++n)if(s[n].name===e){(s=s.slice()).splice(n,1);break}i.tween=s}}function Xs(t,e,r){var s,i;if("function"!=typeof r)throw new Error;return function(){var a=Vs(this,t),n=a.tween;if(n!==s){i=(s=n).slice();for(var o={name:e,value:r},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}a.tween=i}}function Js(t,e,r){var s=t._id;return t.each((function(){var t=Vs(this,s);(t.value||(t.value={}))[e]=r.apply(this,arguments)})),function(t){return _s(t,s).value[e]}}function Ks(t,e){var r;return("number"==typeof e?qr:e instanceof Nr?Zr:(r=Nr(e))?(e=r,Zr):ss)(t,e)}function Zs(t){return function(){this.removeAttribute(t)}}function Ps(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Os(t,e,r){var s,i,a=r+"";return function(){var n=this.getAttribute(t);return n===a?null:n===s?i:i=e(s=n,r)}}function js(t,e,r){var s,i,a=r+"";return function(){var n=this.getAttributeNS(t.space,t.local);return n===a?null:n===s?i:i=e(s=n,r)}}function qs(t,e,r){var s,i,a;return function(){var n,o,l=r(this);if(null!=l)return(n=this.getAttribute(t))===(o=l+"")?null:n===s&&o===i?a:(i=o,a=e(s=n,l));this.removeAttribute(t)}}function ti(t,e,r){var s,i,a;return function(){var n,o,l=r(this);if(null!=l)return(n=this.getAttributeNS(t.space,t.local))===(o=l+"")?null:n===s&&o===i?a:(i=o,a=e(s=n,l));this.removeAttributeNS(t.space,t.local)}}function ei(t,e){var r,s;function i(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&function(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}(t,i)),r}return i._value=e,i}function ri(t,e){var r,s;function i(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&function(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}(t,i)),r}return i._value=e,i}function si(t,e){return function(){Ys(this,t).delay=+e.apply(this,arguments)}}function ii(t,e){return e=+e,function(){Ys(this,t).delay=e}}function ai(t,e){return function(){Vs(this,t).duration=+e.apply(this,arguments)}}function ni(t,e){return e=+e,function(){Vs(this,t).duration=e}}var oi=Ze.prototype.constructor;function li(t){return function(){this.style.removeProperty(t)}}var ci=0;function di(t,e,r,s){this._groups=t,this._parents=e,this._name=r,this._id=s}function hi(){return++ci}var ui=Ze.prototype;di.prototype={constructor:di,select:function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=Wt(t));for(var s=this._groups,i=s.length,a=new Array(i),n=0;n<i;++n)for(var o,l,c=s[n],d=c.length,h=a[n]=new Array(d),u=0;u<d;++u)(o=c[u])&&(l=t.call(o,o.__data__,u,c))&&("__data__"in o&&(l.__data__=o.__data__),h[u]=l,zs(h[u],e,r,u,h,_s(o,r)));return new di(a,this._parents,e,r)},selectAll:function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=Jt(t));for(var s=this._groups,i=s.length,a=[],n=[],o=0;o<i;++o)for(var l,c=s[o],d=c.length,h=0;h<d;++h)if(l=c[h]){for(var u,g=t.call(l,l.__data__,h,c),p=_s(l,r),m=0,b=g.length;m<b;++m)(u=g[m])&&zs(u,e,r,m,g,p);a.push(g),n.push(l)}return new di(a,n,e,r)},selectChild:ui.selectChild,selectChildren:ui.selectChildren,filter:function(t){"function"!=typeof t&&(t=Zt(t));for(var e=this._groups,r=e.length,s=new Array(r),i=0;i<r;++i)for(var a,n=e[i],o=n.length,l=s[i]=[],c=0;c<o;++c)(a=n[c])&&t.call(a,a.__data__,c,n)&&l.push(a);return new di(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,s=e.length,i=r.length,a=Math.min(s,i),n=new Array(s),o=0;o<a;++o)for(var l,c=e[o],d=r[o],h=c.length,u=n[o]=new Array(h),g=0;g<h;++g)(l=c[g]||d[g])&&(u[g]=l);for(;o<s;++o)n[o]=e[o];return new di(n,this._parents,this._name,this._id)},selection:function(){return new oi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,r=hi(),s=this._groups,i=s.length,a=0;a<i;++a)for(var n,o=s[a],l=o.length,c=0;c<l;++c)if(n=o[c]){var d=_s(n,e);zs(n,t,r,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new di(s,this._parents,t,r)},call:ui.call,nodes:ui.nodes,node:ui.node,size:ui.size,empty:ui.empty,each:ui.each,on:function(t,e){var r=this._id;return arguments.length<2?_s(this.node(),r).on.on(t):this.each(function(t,e,r){var s,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ys:Vs;return function(){var n=a(this,t),o=n.on;o!==s&&(i=(s=o).copy()).on(e,r),n.on=i}}(r,t,e))},attr:function(t,e){var r=Gt(t),s="transform"===r?ps:Ks;return this.attrTween(t,"function"==typeof e?(r.local?ti:qs)(r,s,Js(this,"attr."+t,e)):null==e?(r.local?Ps:Zs)(r):(r.local?js:Os)(r,s,e))},attrTween:function(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;var s=Gt(t);return this.tween(r,(s.local?ei:ri)(s,e))},style:function(t,e,r){var s="transform"==(t+="")?gs:Ks;return null==e?this.styleTween(t,function(t,e){var r,s,i;return function(){var a=Qe(this,t),n=(this.style.removeProperty(t),Qe(this,t));return a===n?null:a===r&&n===s?i:i=e(r=a,s=n)}}(t,s)).on("end.style."+t,li(t)):"function"==typeof e?this.styleTween(t,function(t,e,r){var s,i,a;return function(){var n=Qe(this,t),o=r(this),l=o+"";return null==o&&(this.style.removeProperty(t),l=o=Qe(this,t)),n===l?null:n===s&&l===i?a:(i=l,a=e(s=n,o))}}(t,s,Js(this,"style."+t,e))).each(function(t,e){var r,s,i,a,n="style."+e,o="end."+n;return function(){var l=Vs(this,t),c=l.on,d=null==l.value[n]?a||(a=li(e)):void 0;c===r&&i===d||(s=(r=c).copy()).on(o,i=d),l.on=s}}(this._id,t)):this.styleTween(t,function(t,e,r){var s,i,a=r+"";return function(){var n=Qe(this,t);return n===a?null:n===s?i:i=e(s=n,r)}}(t,s,e),r).on("end.style."+t,null)},styleTween:function(t,e,r){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function(t,e,r){var s,i;function a(){var a=e.apply(this,arguments);return a!==i&&(s=(i=a)&&function(t,e,r){return function(s){this.style.setProperty(t,e.call(this,s),r)}}(t,a,r)),s}return a._value=e,a}(t,e,null==r?"":r))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Js(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,r;function s(){var s=t.apply(this,arguments);return s!==r&&(e=(r=s)&&function(t){return function(e){this.textContent=t.call(this,e)}}(s)),e}return s._value=t,s}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var r=this._id;if(t+="",arguments.length<2){for(var s,i=_s(this.node(),r).tween,a=0,n=i.length;a<n;++a)if((s=i[a]).name===t)return s.value;return null}return this.each((null==e?Ws:Xs)(r,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?si:ii)(e,t)):_s(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ai:ni)(e,t)):_s(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Vs(this,t).ease=e}}(e,t)):_s(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var r=e.apply(this,arguments);if("function"!=typeof r)throw new Error;Vs(this,t).ease=r}}(this._id,t))},end:function(){var t,e,r=this,s=r._id,i=r.size();return new Promise((function(a,n){var o={value:n},l={value:function(){0==--i&&a()}};r.each((function(){var r=Vs(this,s),i=r.on;i!==t&&((e=(t=i).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),r.on=e})),0===i&&a()}))},[Symbol.iterator]:ui[Symbol.iterator]};const gi=t=>+t;function pi(t){return--t*t*t+1}var mi={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function bi(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}Ze.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var r,s,i,a=t.__transition,n=!0;if(a){for(i in e=null==e?null:e+"",a)(r=a[i]).name===e?(s=r.state>ks&&r.state<$s,r.state=Gs,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete a[i]):n=!1;n&&delete t.__transition}}(this,t)}))},Ze.prototype.transition=function(t){var e,r;t instanceof di?(e=t._id,t=t._name):(e=hi(),(r=mi).time=Cs(),t=null==t?null:t+"");for(var s=this._groups,i=s.length,a=0;a<i;++a)for(var n,o=s[a],l=o.length,c=0;c<l;++c)(n=o[c])&&zs(n,t,e,c,o,r||bi(n,e));return new di(s,this._parents,t,e)};const yi=Math.PI,Qi=2*yi,Bi=1e-6,Ui=Qi-Bi;function fi(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}class Fi{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?fi:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return fi;const r=10**e;return function(t){this._+=t[0];for(let e=1,s=t.length;e<s;++e)this._+=Math.round(arguments[e]*r)/r+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,r,s){this._append`Q${+t},${+e},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(t,e,r,s,i,a){this._append`C${+t},${+e},${+r},${+s},${this._x1=+i},${this._y1=+a}`}arcTo(t,e,r,s,i){if(t=+t,e=+e,r=+r,s=+s,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,n=this._y1,o=r-t,l=s-e,c=a-t,d=n-e,h=c*c+d*d;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>Bi)if(Math.abs(d*o-l*c)>Bi&&i){let u=r-a,g=s-n,p=o*o+l*l,m=u*u+g*g,b=Math.sqrt(p),y=Math.sqrt(h),Q=i*Math.tan((yi-Math.acos((p+h-m)/(2*b*y)))/2),B=Q/y,U=Q/b;Math.abs(B-1)>Bi&&this._append`L${t+B*c},${e+B*d}`,this._append`A${i},${i},0,0,${+(d*u>c*g)},${this._x1=t+U*o},${this._y1=e+U*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,r,s,i,a){if(t=+t,e=+e,a=!!a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let n=r*Math.cos(s),o=r*Math.sin(s),l=t+n,c=e+o,d=1^a,h=a?s-i:i-s;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Bi||Math.abs(this._y1-c)>Bi)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%Qi+Qi),h>Ui?this._append`A${r},${r},0,1,${d},${t-n},${e-o}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:h>Bi&&this._append`A${r},${r},0,${+(h>=yi)},${d},${this._x1=t+r*Math.cos(i)},${this._y1=e+r*Math.sin(i)}`)}rect(t,e,r,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function Ii(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,s=t.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+t.slice(r+1)]}function Ci(t){return(t=Ii(Math.abs(t)))?t[1]:NaN}var xi,vi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ai(t){if(!(e=vi.exec(t)))throw new Error("invalid format: "+t);var e;return new Ei({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ei(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ri(t,e){var r=Ii(t,e);if(!r)return t+"";var s=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+s:s.length>i+1?s.slice(0,i+1)+"."+s.slice(i+1):s+new Array(i-s.length+2).join("0")}Ai.prototype=Ei.prototype,Ei.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ni={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ri(100*t,e),r:Ri,s:function(t,e){var r=Ii(t,e);if(!r)return t+"";var s=r[0],i=r[1],a=i-(xi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,n=s.length;return a===n?s:a>n?s+new Array(a-n+1).join("0"):a>0?s.slice(0,a)+"."+s.slice(a):"0."+new Array(1-a).join("0")+Ii(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Li(t){return t}var wi,Si,Di,Mi=Array.prototype.map,ki=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ti(t){var e,r,s=void 0===t.grouping||void 0===t.thousands?Li:(e=Mi.call(t.grouping,Number),r=t.thousands+"",function(t,s){for(var i=t.length,a=[],n=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>s&&(o=Math.max(1,s-l)),a.push(t.substring(i-=o,i+o)),!((l+=o+1)>s));)o=e[n=(n+1)%e.length];return a.reverse().join(r)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",n=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Li:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Mi.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",d=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ai(t)).fill,r=t.align,h=t.sign,u=t.symbol,g=t.zero,p=t.width,m=t.comma,b=t.precision,y=t.trim,Q=t.type;"n"===Q?(m=!0,Q="g"):Ni[Q]||(void 0===b&&(b=12),y=!0,Q="g"),(g||"0"===e&&"="===r)&&(g=!0,e="0",r="=");var B="$"===u?i:"#"===u&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",U="$"===u?a:/[%p]/.test(Q)?l:"",f=Ni[Q],F=/[defgprs%]/.test(Q);function I(t){var i,a,l,u=B,I=U;if("c"===Q)I=f(t)+I,t="";else{var C=(t=+t)<0||1/t<0;if(t=isNaN(t)?d:f(Math.abs(t),b),y&&(t=function(t){t:for(var e,r=t.length,s=1,i=-1;s<r;++s)switch(t[s]){case".":i=e=s;break;case"0":0===i&&(i=s),e=s;break;default:if(!+t[s])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),C&&0==+t&&"+"!==h&&(C=!1),u=(C?"("===h?h:c:"-"===h||"("===h?"":h)+u,I=("s"===Q?ki[8+xi/3]:"")+I+(C&&"("===h?")":""),F)for(i=-1,a=t.length;++i<a;)if(48>(l=t.charCodeAt(i))||l>57){I=(46===l?n+t.slice(i+1):t.slice(i))+I,t=t.slice(0,i);break}}m&&!g&&(t=s(t,1/0));var x=u.length+t.length+I.length,v=x<p?new Array(p-x+1).join(e):"";switch(m&&g&&(t=s(v+t,v.length?p-I.length:1/0),v=""),r){case"<":t=u+t+I+v;break;case"=":t=u+v+t+I;break;case"^":t=v.slice(0,x=v.length>>1)+u+t+I+v.slice(x);break;default:t=v+u+t+I}return o(t)}return b=void 0===b?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),I.toString=function(){return t+""},I}return{format:h,formatPrefix:function(t,e){var r=h(((t=Ai(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(Ci(e)/3))),i=Math.pow(10,-s),a=ki[8+s/3];return function(t){return r(i*t)+a}}}}wi=Ti({thousands:",",grouping:[3],currency:["$",""]}),Si=wi.format,Di=wi.formatPrefix;var Hi=Math.random,$i=function t(e){function r(t,r){return t=null==t?0:+t,r=null==r?1:+r,1===arguments.length?(r=t,t=0):r-=t,function(){return e()*r+t}}return r.source=t,r}(Hi),Gi=function t(e){function r(t,r){var s,i;return t=null==t?0:+t,r=null==r?1:+r,function(){var a;if(null!=s)a=s,s=null;else do{s=2*e()-1,a=2*e()-1,i=s*s+a*a}while(!i||i>1);return t+r*a*Math.sqrt(-2*Math.log(i)/i)}}return r.source=t,r}(Hi);const zi=1/4294967296;function Yi(t=Math.random()){let e=0|(0<=t&&t<1?t/zi:Math.abs(t));return()=>(e=1664525*e+1013904223|0,zi*(e>>>0))}function Vi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function _i(t){return+t}var Wi=[0,1];function Xi(t){return t}function Ji(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Ki(t,e,r){var s=t[0],i=t[1],a=e[0],n=e[1];return i<s?(s=Ji(i,s),a=r(n,a)):(s=Ji(s,i),a=r(a,n)),function(t){return a(s(t))}}function Zi(t,e,r){var s=Math.min(t.length,e.length)-1,i=new Array(s),a=new Array(s),n=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++n<s;)i[n]=Ji(t[n],t[n+1]),a[n]=r(e[n],e[n+1]);return function(e){var r=pt(t,e,1,s)-1;return a[r](i[r](e))}}function Pi(){var t,e,r,s,i,a,n=Wi,o=Wi,l=is,c=Xi;function d(){var t=Math.min(n.length,o.length);return c!==Xi&&(c=function(t,e){var r;return t>e&&(r=t,t=e,e=r),function(r){return Math.max(t,Math.min(e,r))}}(n[0],n[t-1])),s=t>2?Zi:Ki,i=a=null,h}function h(e){return null==e||isNaN(e=+e)?r:(i||(i=s(n.map(t),o,l)))(t(c(e)))}return h.invert=function(r){return c(e((a||(a=s(o,n.map(t),qr)))(r)))},h.domain=function(t){return arguments.length?(n=Array.from(t,_i),d()):n.slice()},h.range=function(t){return arguments.length?(o=Array.from(t),d()):o.slice()},h.rangeRound=function(t){return o=Array.from(t),l=as,d()},h.clamp=function(t){return arguments.length?(c=!!t||Xi,d()):c!==Xi},h.interpolate=function(t){return arguments.length?(l=t,d()):l},h.unknown=function(t){return arguments.length?(r=t,h):r},function(r,s){return t=r,e=s,d()}}function Oi(t,e,r,s){var i,a=function(t,e,r){r=+r;const s=(e=+e)<(t=+t),i=s?Bt(e,t,r):Bt(t,e,r);return(s?-1:1)*(i<0?1/-i:i)}(t,e,r);switch((s=Ai(null==s?",f":s)).type){case"s":var n=Math.max(Math.abs(t),Math.abs(e));return null!=s.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ci(e)/3)))-Ci(Math.abs(t)))}(a,n))||(s.precision=i),Di(s,n);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ci(e)-Ci(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(s.precision=i-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(i=function(t){return Math.max(0,-Ci(Math.abs(t)))}(a))||(s.precision=i-2*("%"===s.type))}return Si(s)}function ji(t){var e=t.domain;return t.ticks=function(t){var r=e();return function(t,e,r){if(!((r=+r)>0))return[];if((t=+t)==(e=+e))return[t];const s=e<t,[i,a,n]=s?Qt(e,t,r):Qt(t,e,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(s)if(n<0)for(let t=0;t<o;++t)l[t]=(a-t)/-n;else for(let t=0;t<o;++t)l[t]=(a-t)*n;else if(n<0)for(let t=0;t<o;++t)l[t]=(i+t)/-n;else for(let t=0;t<o;++t)l[t]=(i+t)*n;return l}(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,r){var s=e();return Oi(s[0],s[s.length-1],null==t?10:t,r)},t.nice=function(r){null==r&&(r=10);var s,i,a=e(),n=0,o=a.length-1,l=a[n],c=a[o],d=10;for(c<l&&(i=l,l=c,c=i,i=n,n=o,o=i);d-- >0;){if((i=Bt(l,c,r))===s)return a[n]=l,a[o]=c,e(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}s=i}return t},t}function qi(){var t=Pi()(Xi,Xi);return t.copy=function(){return e=t,qi().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},Vi.apply(t,arguments),ji(t)}var ta=function(t){for(var e=t.length/6|0,r=new Array(e),s=0;s<e;)r[s]="#"+t.slice(6*s,6*++s);return r}("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");function ea(t){return function(){return t}}function ra(t){this._context=t}function sa(t){return new ra(t)}function ia(t){return t[0]}function aa(t){return t[1]}function na(t,e){var r=ea(!0),s=null,i=sa,a=null,n=function(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(null==r)e=null;else{const t=Math.floor(r);if(!(t>=0))throw new RangeError(`invalid digits: ${r}`);e=t}return t},()=>new Fi(e)}(o);function o(o){var l,c,d,h=(o=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(o)).length,u=!1;for(null==s&&(a=i(d=n())),l=0;l<=h;++l)!(l<h&&r(c=o[l],l,o))===u&&((u=!u)?a.lineStart():a.lineEnd()),u&&a.point(+t(c,l,o),+e(c,l,o));if(d)return a=null,d+""||null}return t="function"==typeof t?t:void 0===t?ia:ea(t),e="function"==typeof e?e:void 0===e?aa:ea(e),o.x=function(e){return arguments.length?(t="function"==typeof e?e:ea(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:ea(+t),o):e},o.defined=function(t){return arguments.length?(r="function"==typeof t?t:ea(!!t),o):r},o.curve=function(t){return arguments.length?(i=t,null!=s&&(a=i(s)),o):i},o.context=function(t){return arguments.length?(null==t?s=a=null:a=i(s=t),o):s},o}function oa(t,e,r){this.k=t,this.x=e,this.y=r}ra.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},oa.prototype={constructor:oa,scale:function(t){return 1===t?this:new oa(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new oa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},oa.prototype;class la extends lt{getComputedStyleValue(t){return getComputedStyle(this).getPropertyValue(t).trim()}firstUpdated(t){super.firstUpdated(t),Pe(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",(t=>{Pe(t.currentTarget.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)})).on("keydown.keyboard",(t=>{Pe(t.currentTarget.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)}))}static get greys(){const t="#999999",e={white:"#ffffff"};return e.light75=Zr(t,"#ffffff")(.75),e.light50=Zr(t,"#ffffff")(.5),e.light25=Zr(t,"#ffffff")(.25),e.grey=t,e.dark25=Zr(t,"#000000")(.25),e.dark50=Zr(t,"#000000")(.5),e.dark75=Zr(t,"#000000")(.75),e.black="#000000",e}static get shadows(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}static cssBoxShadow(t,e=!1,r=!1){const s=this.shadows.opacityUmbra+this.shadows.opacityBoost,i=this.shadows.opacityPenumbra+this.shadows.opacityBoost,a=this.shadows.opacityAmbient+this.shadows.opacityBoost,n=r?`rgba(${this.shadows.inverseBaselineColorString}, ${s})`:`rgba(${this.shadows.baselineColorString}, ${s})`,o=r?`rgba(${this.shadows.inverseBaselineColorString}, ${i})`:`rgba(${this.shadows.baselineColorString}, ${i})`,l=r?`rgba(${this.shadows.inverseBaselineColorString}, ${a})`:`rgba(${this.shadows.baselineColorString}, ${a})`,c=this.shadows.mapUmbra[t],d=this.shadows.mapPenumbra[t],h=this.shadows.mapAmbient[t];return`${e?`${-c.y}px ${c.y/2}px ${c.b}px ${c.s}px`:`${c.y/2}px ${c.y}px ${c.b}px ${c.s}px`} ${n}, ${e?`${-d.y}px ${d.y/2}px ${d.b}px ${d.s}px`:`${d.y/2}px ${d.y}px ${d.b}px ${d.s}px`} ${o}, ${e?`${-h.y}px ${h.y/2}px ${h.b}px ${h.s}px`:`${h.y/2}px ${h.y}px ${h.b}px ${h.s}px`} ${l}`}static get svgDefs(){const t=la.shadows;return`\n      <defs>\n        ${t.elevations.map((e=>`\n        <filter id=shadow-${e} filterUnits="userSpaceOnUse" x="-100%" y="-100%" width="200%" height="200%">\n          <feComponentTransfer in="SourceAlpha" result="solid">\n            <feFuncA type="table" tableValues="0 1 1"/>\n          </feComponentTransfer>\n          <feOffset in="solid" result="offU" dx=${t.mapUmbra[e].y/2} dy=${t.mapUmbra[e].y} />\n          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[e].y/2} dy=${t.mapPenumbra[e].y} />\n          <feOffset in="solid" result="offA" dx=${t.mapAmbient[e].y/2} dy=${t.mapAmbient[e].y} />\n          ${0===t.mapUmbra[e].s?"":`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[e].s)} />`}\n          ${0===t.mapPenumbra[e].s?"":`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[e].s)} />`}\n          ${0===t.mapAmbient[e].s?"":`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[e].s)} />`}\n          <feGaussianBlur in=${0===t.mapUmbra[e].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[e].b/2} />\n          <feGaussianBlur in=${0===t.mapPenumbra[e].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[e].b/2} />\n          <feGaussianBlur in=${0===t.mapAmbient[e].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[e].b/2} />\n          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />\n          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />\n          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />\n          <feComposite in="opU" in2="blurU" result="shU" operator="in" />\n          <feComposite in="opP" in2="blurP" result="shP" operator="in" />\n          <feComposite in="opA" in2="blurA" result="shA" operator="in" />\n          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />\n          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />\n          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />\n          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />\n          <feMerge>\n            <feMergeNode in="finalU" />\n            <feMergeNode in="finalP" />\n            <feMergeNode in="finalA" />\n            <feMergeNode in="SourceGraphic" />\n          </feMerge>\n        </filter>`))}\n      </defs>\n    `}static get svgFilters(){const t=la.shadows,e=t.elevations.map((e=>W`
        <filter id=${`shadow-${e}`} x="-250%" y="-250%" width="600%" height="600%">
          <feComponentTransfer in="SourceAlpha" result="solid">
            <feFuncA type="table" tableValues="0 1 1"/>
          </feComponentTransfer>
          <feOffset in="solid" result="offU" dx=${t.mapUmbra[e].y/2} dy=${t.mapUmbra[e].y} />
          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[e].y/2} dy=${t.mapPenumbra[e].y} />
          <feOffset in="solid" result="offA" dx=${t.mapAmbient[e].y/2} dy=${t.mapAmbient[e].y} />
          ${0===t.mapUmbra[e].s?W``:W`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[e].s)} />`}
          ${0===t.mapPenumbra[e].s?W``:W`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[e].s)} />`}
          ${0===t.mapAmbient[e].s?W``:W`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[e].s)} />`}
          <feGaussianBlur in=${0===t.mapUmbra[e].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[e].b/2} />
          <feGaussianBlur in=${0===t.mapPenumbra[e].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[e].b/2} />
          <feGaussianBlur in=${0===t.mapAmbient[e].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[e].b/2} />
          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />
          <feComposite in="opU" in2="blurU" result="shU" operator="in" />
          <feComposite in="opP" in2="blurP" result="shP" operator="in" />
          <feComposite in="opA" in2="blurA" result="shA" operator="in" />
          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />
          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />
          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />
          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />
          <feMerge>
            <feMergeNode in="finalU" />
            <feMergeNode in="finalP" />
            <feMergeNode in="finalA" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>`));return W`
      <svg class="defs">
        <defs>
          ${e}
        </defs>
      </svg>
    `}static get styles(){return o`
      :host {
        ---shadow-0: var(--shadow-0, ${n(this.cssBoxShadow(0))});
        ---shadow-2: var(--shadow-2, ${n(this.cssBoxShadow(2))});
        ---shadow-4: var(--shadow-4, ${n(this.cssBoxShadow(4))});
        ---shadow-8: var(--shadow-8, ${n(this.cssBoxShadow(8))});

        ---color-background: var(--color-background, ${n(this.greys.white)});
        ---color-border: var(--color-border, ${n(this.greys.light75)});
        ---color-text: var(--color-text, ${n(this.greys.dark75)});
        ---color-text-inverse: var(--color-text-inverse, ${n(this.greys.white)});
        ---color-link: var(--color-link, ${n(this.greys.dark25)});
        ---color-element-background: var(--color-element-background, ${n(this.greys.light75)});
        ---color-element-disabled: var(--color-element-disabled, ${n(this.greys.light50)});
        ---color-element-enabled: var(--color-element-enabled, ${n(this.greys.dark25)});
        ---color-element-selected: var(--color-element-selected, ${n(this.greys.grey)});
        ---color-element-border: var(--color-element-border, ${n(this.greys.dark50)});
        ---color-element-emphasis: var(--color-element-emphasis, ${n(this.greys.dark75)});

        ---font-family-base: var(--font-family-base, "Source Sans", sans-serif);
        ---font-family-math: var(--font-family-math, "Source Serif", serif);

        ---border: var(--border, 1px solid var(---color-border));
        ---border-radius: var(--border-radius, 0.25rem);
        ---transition-duration: var(--transition-duration, 500ms);

        font-family: var(---font-family-base);
      }

      :host,
      :host *,
      :host *::before,
      :host *::after {
        box-sizing: border-box;
      }

      .math-greek {
        font-family: var(---font-family-math);
        font-style: normal;
      }

      .math-num {
        font-family: var(---font-family-base);
        font-style: normal;
      }

      .math-var {
        font-family: var(---font-family-math);
        font-style: italic;
      }

      .defs {
        display: block;

        width: 0;
        height: 0;
      }
    `}}customElements.define("decidables-button",class extends la{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,o`
        :host {
          margin: 0.25rem;
        }

        button {
          width: 100%;
          height: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);

          border: 0;
          border-radius: var(---border-radius);
          outline: none;
        }

        button:disabled {
          background-color: var(--decidables-button-background-color, var(---color-element-disabled));
          outline: none;
          box-shadow: none;
        }

        button:enabled {
          cursor: pointer;

          background-color: var(--decidables-button-background-color, var(---color-element-enabled));
          outline: none;
          box-shadow: var(---shadow-2);
        }

        button:enabled:hover {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        button:enabled:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(.keyboard) button:enabled:focus {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) button:enabled:focus:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return _`
      <button ?disabled=${this.disabled}>
        <slot></slot>
      </button>
    `}});
/**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const ca=t=>t??J;customElements.define("decidables-slider",class extends la{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}changed(t){this.value=t.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,o`
        :host {
          ---shadow-2-rotate: var(--shadow-2-rotate, ${n(this.cssBoxShadow(2,!0,!1))});
          ---shadow-4-rotate: var(--shadow-4-rotate, ${n(this.cssBoxShadow(4,!0,!1))});
          ---shadow-8-rotate: var(--shadow-8-rotate, ${n(this.cssBoxShadow(8,!0,!1))});

          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        label {
          margin: 0.25rem 0.25rem 0;
        }

        .range {
          display: inline-block;

          width: 3.5rem;
          height: 4.75rem;
          margin: 0 0.25rem 0.25rem;
        }

        decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;

          margin: 0 0.25rem 0.25rem;
        }

        /* Adapted from http://danielstern.ca/range.css/#/ */
        /* Overall */
        input[type=range] {
          width: 4.75rem;
          height: 3.5rem;
          padding: 0;
          margin: 0;

          background-color: unset;

          transform: rotate(-90deg);
          transform-origin: 2.375rem 2.375rem;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:enabled {
          cursor: ns-resize;
        }

        input[type=range]:focus {
          outline: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-tooltip {
          display: none;
        }

        /* Track */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-runnable-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-track {
          width: 100%;
          height: 4px;

          color: transparent;

          background: transparent;
          border-color: transparent;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-lower {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-upper {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-lower {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-upper {
          background: var(---color-element-disabled);
        }

        /* Thumb */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-thumb {
          width: 10px;
          height: 20px;
          margin-top: -8px;

          border: 0;
          border-radius: 4px;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:disabled::-webkit-slider-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=range]:enabled::-webkit-slider-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        input[type=range]:enabled:hover::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        input[type=range]:enabled:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-thumb {
          width: 10px;
          height: 20px;

          border: 0;
          border-radius: 4px;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-moz-range-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-moz-range-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-thumb {
          width: 10px;
          height: 20px;
          margin-top: 0;

          background: #999999;
          /* background: var(---color-element-enabled); */
          border: 0;
          border-radius: 4px;
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-ms-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-ms-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }
      `]}render(){return _`
      <label for="slider">
        <slot></slot>
      </label>
      <div class="range">
        <input ?disabled=${this.disabled} type="range" id="slider" min=${ca(this.min)} max=${ca(this.max)} step=${ca(this.step)} .value=${this.value} @change=${this.changed.bind(this)} @input=${this.inputted.bind(this)}>
      </div>
      <decidables-spinner ?disabled=${this.disabled} min=${ca(this.min)} max=${ca(this.max)} step=${ca(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}></decidables-spinner>
    `}});customElements.define("decidables-spinner",class extends la{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,o`
        :host {
          ---decidables-spinner-font-size: var(--decidables-spinner-font-size, 1.125rem);
          ---decidables-spinner-input-width: var(--decidables-spinner-input-width, 4rem);
          ---decidables-spinner-prefix: var(--decidables-spinner-prefix, "");

          ---decidables-spinner-postfix: var(--decidables-spinner-postfix, "");
          ---decidables-spinner-postfix-padding: var(--decidables-spinner-postfix-padding, 0);

          display: block;
        }

        label {
          position: relative;
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0;

          font-size: 0.75rem;
        }

        label::before {
          position: absolute;
          bottom: 1px;
          left: calc(50% - var(---decidables-spinner-input-width) / 2 + 0.25rem);

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-prefix);
        }

        label::after {
          position: absolute;
          right: 0.25rem;
          bottom: 1px;

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-postfix);
        }

        input[type=number] {
          width: var(---decidables-spinner-input-width);
          padding-right: var(---decidables-spinner-postfix-padding);

          font-family: var(---font-family-base);
          font-size: var(---decidables-spinner-font-size);
          color: inherit;
          text-align: right;

          background: none;
          border: 0;
          border-radius: 0;
          outline: none;
          box-shadow: var(---shadow-2);

          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }

        input[type=number]:hover {
          box-shadow: var(---shadow-4);
        }

        input[type=number]:focus,
        input[type=number]:active {
          box-shadow: var(---shadow-8);
        }

        input[type=number]:disabled {
          color: var(---color-text);

          border: 0;
          box-shadow: none;

          /* HACK: Use correct text color in Safari */
          -webkit-opacity: 1;
          /* HACK: Hide spinners in disabled input for Firefox and Safari */
          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */
          /* HACK: Use correct text color in Safari */
          -webkit-text-fill-color: var(---color-text);
        }

        /* HACK: Hide spinners in disabled input for Firefox and Safari */
        input[type=number]:disabled::-webkit-outer-spin-button,
        input[type=number]:disabled::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }
      `]}render(){return _`
      <label>
        <slot></slot>
        <input ?disabled=${this.disabled} type="number" min=${ca(this.min)} max=${ca(this.max)} step=${ca(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}>
      </label>
    `}});customElements.define("decidables-switch",class extends la{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}static get styles(){return[super.styles,o`
        :host {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */
        input[type=checkbox] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=checkbox] + label {
          order: 1;

          margin: 0 0.25rem 0.25rem;

          font-weight: 400;
        }

        input[type=checkbox] + label + label {
          position: relative;

          min-width: 24px;
          padding: 0 0 36px;
          margin: 0.25rem 0.25rem 0;

          font-weight: 400;

          outline: none;
        }

        input[type=checkbox] + label + label::before,
        input[type=checkbox] + label + label::after {
          position: absolute;

          left: 50%;

          margin: 0;

          content: "";

          outline: 0;

          transition: all var(---transition-duration) ease;
          transform: translate(-50%, 0);
        }

        input[type=checkbox] + label + label::before {
          bottom: 1px;

          width: 8px;
          height: 34px;

          background-color: var(---color-element-disabled);
          border-radius: 4px;
        }

        input[type=checkbox] + label + label::after {
          bottom: 0;

          width: 18px;
          height: 18px;

          background-color: var(---color-element-enabled);
          border-radius: 50%;
          box-shadow: var(---shadow-2);
        }

        input[type=checkbox]:checked + label + label::after {
          transform: translate(-50%, -100%);
        }

        input[type=checkbox]:disabled + label + label::after {
          background-color: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=checkbox]:enabled + label,
        input[type=checkbox]:enabled + label + label {
          cursor: pointer;
        }

        input[type=checkbox]:enabled + label:hover + label::after,
        input[type=checkbox]:enabled + label + label:hover::after {
          box-shadow: var(---shadow-4);
        }

        input[type=checkbox]:enabled + label:active + label::after,
        input[type=checkbox]:enabled + label + label:active::after {
          box-shadow: var(---shadow-8);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {
          box-shadow: var(---shadow-4);
        }

        /* stylelint-disable selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,
        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {
          box-shadow: var(---shadow-8);
        }
        /* stylelint-enable selector-max-compound-selectors */
        `]}render(){return _`
      <input type="checkbox" id="switch" ?checked=${this.checked} ?disabled=${this.disabled} @change=${this.changed.bind(this)}>
      <label for="switch">
        <slot name="off-label"></slot>
      </label>
      <label for="switch">
        <slot></slot>
      </label>
    `}});customElements.define("decidables-toggle",class extends la{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,o`
        fieldset {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;

          margin: 0.25rem;

          border: 0;
        }

        legend {
          text-align: center;
        }
      `]}render(){return _`
      <fieldset ?disabled=${this.disabled}>
        <legend><slot name="label"></slot></legend>
        <slot></slot>
      </fieldset>
    `}});customElements.define("decidables-toggle-option",class extends la{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1,this.name=void 0,this.value=void 0}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}static get styles(){return[super.styles,o`
        :host {
          display: flex;
        }

        input[type=radio] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=radio] + label {
          width: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);
          text-align: center;

          cursor: pointer;

          background-color: var(---color-element-enabled);
          border: 0;
          border-radius: 0;
          outline: none;

          box-shadow: var(---shadow-2);
        }

        input[type=radio]:checked + label {
          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-2);
        }

        input[type=radio] + label:hover {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        input[type=radio] + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(:first-of-type) input[type=radio] + label {
          border-top-left-radius: 0.25rem;
          border-top-right-radius: 0.25rem;
        }

        :host(:last-of-type) input[type=radio] + label {
          border-bottom-right-radius: 0.25rem;
          border-bottom-left-radius: 0.25rem;
        }

        :host(.keyboard) input[type=radio]:focus + label {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus:checked + label {
          z-index: 1;

          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return _`
      <input type="radio" id="toggle-option" name=${this.name} value=${this.value} .checked=${this.checked} @change=${this.changed.bind(this)}>
      <label for="toggle-option">
        <slot></slot>
      </label>
    `}});const da={fromAttribute:t=>new Set(t.split(/\s+/)),toAttribute:t=>t.size?[...t].join(" "):null};function ha(t){return class extends t{static get properties(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.width=NaN,this.height=NaN,this.rem=NaN}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(this.getDimensions.bind(this)),this.resizeObserver.observe(this)}disconnectedCallback(){this.resizeObserver.unobserve(this),super.disconnectedCallback()}}}class ua extends la{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return{a:ta[0],z:ta[1],v:ta[4],t0:ta[7],left:"#f032e6",right:"#10dbc9",correct:ta[2],error:ta[3],nr:"#cccccc"}}static get lights(){return Object.keys(ua.colors).reduce(((t,e)=>(t[e]=Zr(ua.colors[e],"#ffffff")(.5),t)),{})}static get darks(){return Object.keys(ua.colors).reduce(((t,e)=>(t[e]=Zr(ua.colors[e],"#000000")(.5),t)),{})}static get styles(){return[super.styles,o`
        :host {
          /* Declare base colors */
          ${n(Object.keys(ua.colors).map((t=>`---color-${t}: var(--color-${t}, ${this.colors[t]});`)).join("\n"))}

          /* Declare light colors */
          ${n(Object.keys(ua.colors).map((t=>`---color-${t}-light: var(--color-${t}-light, ${this.lights[t]});`)).join("\n"))}

          /* Declare dark colors */
          ${n(Object.keys(ua.colors).map((t=>`---color-${t}-dark: var(--color-${t}-dark, ${this.darks[t]});`)).join("\n"))}
        }
      `]}}class ga extends ua{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},resample:{attribute:"resample",type:Boolean,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},coherence:{attribute:"coherence",type:Number,reflect:!0},color:{attribute:"color",type:String,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.resample=!1,this.duration=void 0,this.coherence=void 0,this.colors=["none","measure","outcome","all"],this.color=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("accumulable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}doResample(){this.dispatchEvent(new CustomEvent("accumulable-control-resample",{detail:{},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("accumulable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}setCoherence(t){this.coherence=t.target.value,this.dispatchEvent(new CustomEvent("accumulable-control-coherence",{detail:{coherence:this.coherence},bubbles:!0}))}chooseColor(t){this.color=t.target.value,this.dispatchEvent(new CustomEvent("accumulable-control-color",{detail:{color:this.color},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("accumulable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("accumulable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("accumulable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `]}render(){return _`
      <div class="holder">
        ${this.trials?_`<decidables-slider min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:_``}
        ${this.resample?_`
            <div class="buttons">
              ${this.resample?_`<decidables-button name="resample" @click=${this.doResample.bind(this)}>Resample</decidables-button>`:_``}
            </div>
          `:_``}
        ${this.duration?_`<decidables-slider min="10" max="2000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:_``}
        ${this.coherence?_`<decidables-slider min="0" max="1" step=".01" .value=${this.coherence} @change=${this.setCoherence.bind(this)} @input=${this.setCoherence.bind(this)}>Coherence</decidables-slider>`:_``}
        ${void 0!==this.color?_`
            <decidables-toggle @change=${this.chooseColor.bind(this)}>
              <span slot="label">Emphasis</span>
              <decidables-toggle-option name="toggle" value="none" ?checked=${"none"===this.color}>None</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="measure" ?checked=${"measure"===this.color}>Measure</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="outcome" ?checked=${"outcome"===this.color}>Outcome</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="all" ?checked=${"all"===this.color}>All</decidables-toggle-option>
            </decidables-toggle>
          `:_``}
        ${this.run||this.pause||this.reset?_`
            <div class="buttons">
              ${this.run?_`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:_``}
              ${this.pause?_`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:_``}
              ${this.reset?_`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:_``}
            </div>
          `:_``}
      </div>`}}customElements.define("accumulable-control",ga);class pa extends ua{static get properties(){return{feedback:{attribute:"feedback",type:Boolean,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},correctPayoff:{attribute:"correct-payoff",type:Number,reflect:!0},errorPayoff:{attribute:"error-payoff",type:Number,reflect:!0},nrPayoff:{attribute:"no-response-payoff",type:Number,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.feedback=!1,this.trial=!1,this.payoffs=["none","trial","total"],this.payoff="none",this.correctPayoff=0,this.errorPayoff=0,this.nrPayoff=0,this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.signals=["left","right"],this.signal=void 0,this.responses=["left","right"],this.response=void 0,this.outcomes=["correct","error","nr"],this.outcome=void 0,this.startTime=void 0,this.rt=void 0,this.correctCount=0,this.errorCount=0,this.nrCount=0,this.trials=[]}get trialPayoff(){switch(this.outcome){case"correct":return this.correctPayoff;case"error":return this.errorPayoff;case"nr":return this.nrPayoff;default:return}}get totalPayoff(){return this.correctCount*this.correctPayoff+this.errorCount*this.errorPayoff+this.nrCount*this.nrPayoff}get meanRT(){return this.trials.filter((t=>"nr"!==t.outcome)).reduce(((t,e)=>t+e.rt),0)/(this.correctCount+this.errorCount)}get correctMeanRT(){return this.trials.filter((t=>"correct"===t.outcome)).reduce(((t,e)=>t+e.rt),0)/this.correctCount}get errorMeanRT(){return this.trials.filter((t=>"error"===t.outcome)).reduce(((t,e)=>t+e.rt),0)/this.errorCount}get sdRT(){const t=this.trials.filter((t=>"nr"!==t.outcome)).reduce(((t,e)=>t+(e.rt-this.meanRT)**2),0);return Math.sqrt(t/(this.correctCount+this.errorCount-1))}get correctSDRT(){const t=this.trials.filter((t=>"correct"===t.outcome)).reduce(((t,e)=>t+(e.rt-this.correctMeanRT)**2),0);return Math.sqrt(t/(this.correctCount-1))}get errorSDRT(){const t=this.trials.filter((t=>"error"===t.outcome)).reduce(((t,e)=>t+(e.rt-this.errorMeanRT)**2),0);return Math.sqrt(t/(this.errorCount-1))}start(t,e){this.startTime=Date.now(),this.trialCount=e,this.state="waiting",this.signal=t,this.response=void 0,this.outcome=void 0,this.rt=void 0}stop(){this.state="feedback",void 0===this.response&&(this.outcome="nr",this.nrCount+=1,this.rt=void 0,this.trials.push({trial:this.trialCount,rt:this.rt,signal:this.signal,response:this.response,outcome:this.outcome,payoff:this.trialPayoff}))}left(){this.responded("left")}right(){this.responded("right")}responded(t){this.rt=Date.now()-this.startTime,this.state="feedback",this.response=t,this.signal===this.response?(this.outcome="correct",this.correctCount+=1):this.signal!==this.response&&(this.outcome="error",this.errorCount+=1),this.trials.push({trial:this.trialCount,rt:this.rt,signal:this.signal,response:this.response,outcome:this.outcome,payoff:this.trialPayoff}),this.dispatchEvent(new CustomEvent("accumulable-response",{detail:{trial:this.trialCount,rt:this.rt,signal:this.signal,response:this.response,outcome:this.outcome,payoff:this.trialPayoff,correctCount:this.correctCount,errorCount:this.errorCount,nrCount:this.nrCount,meanRT:this.meanRT,correctMeanRT:this.correctMeanRT,errorMeanRT:this.errorMeanRT,sdRT:this.sdRT,correctSDRT:this.correctSDRT,errorSDRT:this.errorSDRT,totalPayoff:this.totalPayoff},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.rt=void 0,this.signal=void 0,this.response=void 0,this.outcome=void 0,this.correctCount=0,this.errorCount=0,this.nrCount=0,this.trials=[]}keydown(t){"waiting"===this.state&&("ArrowLeft"===t.key?(this.responded("left"),t.preventDefault()):"ArrowRight"===t.key&&(this.responded("right"),t.preventDefault()))}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.keydown.bind(this))}disconnectedCallback(){window.removeEventListener("keydown",this.keydown.bind(this)),super.disconnectedCallback()}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          flex: 1 0 50%;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="left"] {
          --decidables-button-background-color: var(---color-left);
        }

        .selected[disabled][name="right"] {
          --decidables-button-background-color: var(---color-right);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0.25rem;
        }

        /* Trial feedback */
        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 6rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        :host([payoff="trial"]) .feedback,
        :host([payoff="total"]) .feedback {
          height: 5rem;
        }

        .feedback.correct {
          background-color: var(---color-correct-light);
        }

        .feedback.error {
          background-color: var(---color-error-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }

        .feedback .outcome {
          font-weight: 600;
          line-height: 1.15;
        }

        /* Payoff feedback */
        .total {
          text-align: center;
        }

        .total .label {
          font-weight: 600;
        }
      `]}render(){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),e=e=>t.formatToParts(e).map((({type:t,value:e})=>"minusSign"===t?"":e)).reduce(((t,e)=>t+e));return _`
      <div class="holder">
        <div class="responses">
          <decidables-button name="left" class=${"response "+("feedback"===this.state&&"left"===this.response?"selected":"waiting"===this.state?"waiting":"")} ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.left.bind(this)}>Left</decidables-button>
          <decidables-button name="right" class=${"response "+("feedback"===this.state&&"right"===this.response?"selected":"waiting"===this.state?"waiting":"")} ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.right.bind(this)}>Right</decidables-button>
        </div>
        ${this.trial||this.feedback||"total"===this.payoff?_`
            <div class="feedbacks">
              ${this.trial?_`
                  <div class="trial">
                    <span class="label">Trial: </span><span class="count">${this.trialCount}</span><span class="of"> of </span><span class="total">${this.trialTotal}</span>
                  </div>`:_``}
              ${this.feedback?_`
                  <div class=${`feedback ${"feedback"===this.state&&this.feedback?this.outcome:""}`}>
                    ${"feedback"===this.state&&this.feedback?"correct"===this.outcome?_`<span class="outcome">Correct</span>`:"error"===this.outcome?_`<span class="outcome">Error</span>`:_`<span class="outcome">No<br>Response</span>`:""}
                    ${"feedback"!==this.state||"trial"!==this.payoff&&"total"!==this.payoff?_``:_`<span class="payoff">${e(this.trialPayoff)}</span>`}
                  </div>`:_``}
              ${"total"===this.payoff?_`
                  <div class="total">
                    <span class="label">Total: </span><span class="value">${e(this.totalPayoff)}</span>
                  </div>`:_``}
            </div>`:_``}
      </div>`}}customElements.define("accumulable-response",pa);class ma extends ua{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},summary:{attribute:"summary",converter:da,reflect:!0},color:{attribute:"color",type:String,reflect:!0},correctCount:{attribute:"correct-count",type:Number,reflect:!0},errorCount:{attribute:"error-count",type:Number,reflect:!0},nrCount:{attribute:"nr-count",type:Number,reflect:!0},correctMeanRT:{attribute:"correct-mean-rt",type:Number,reflect:!0},errorMeanRT:{attribute:"error-mean-rt",type:Number,reflect:!0},meanRT:{attribute:"mean-rt",type:Number,reflect:!0},correctSDRT:{attribute:"correct-sd-rt",type:Number,reflect:!0},errorSDRT:{attribute:"error-sd-rt",type:Number,reflect:!0},sdRT:{attribute:"sd-rt",type:Number,reflect:!0},payoff:{attribute:"payoff",type:Boolean,reflect:!0},correctPayoff:{attribute:"correct-payoff",type:Number,reflect:!0},errorPayoff:{attribute:"error-payoff",type:Number,reflect:!0},nrPayoff:{attribute:"no-response-payoff",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.summaries=["overall"],this.summary=new Set,this.colors=["none","measure","outcome","all"],this.color="all",this.payoff=!1,this.correctPayoff=void 0,this.errorPayoff=void 0,this.nrPayoff=void 0,this.correctCount=NaN,this.errorCount=NaN,this.nrCount=NaN,this.correctMeanRT=NaN,this.errorMeanRT=NaN,this.meanRT=NaN,this.correctSDRT=NaN,this.errorSDRT=NaN,this.sdRT=NaN,this.accuracy=NaN,this.alignState()}alignState(){this.accuracy=this.correctCount/(this.correctCount+this.errorCount+this.nrCount)}sendEvent(){this.dispatchEvent(new CustomEvent("accumulable-table-change",{detail:{correctCount:this.correctCount,errorCount:this.errorCount,nrCount:this.nrCount,correctMeanRT:this.correctMeanRT,errorMeanRT:this.errorMeanRT,meanRT:this.meanRT,correctSDRT:this.correctSDRT,errorSDRT:this.errorSDRT,sdRT:this.sdRT},bubbles:!0}))}correctCountInput(t){this.correctCount=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}errorCountInput(t){this.errorCount=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}accuracyInput(t){this.accuracy=parseFloat(t.target.value),this.alignState(),this.sendEvent()}correctMeanRTInput(t){this.correctMeanRT=parseFloat(t.target.value),this.alignState(),this.sendEvent()}errorMeanRTInput(t){this.errorMeanRT=parseFloat(t.target.value),this.alignState(),this.sendEvent()}meanRTInput(t){this.meanRT=parseFloat(t.target.value),this.alignState(),this.sendEvent()}correctSDRTInput(t){this.correctSDRT=parseFloat(t.target.value),this.alignState(),this.sendEvent()}errorSDRTInput(t){this.errorSDRT=parseFloat(t.target.value),this.alignState(),this.sendEvent()}sdRTInput(t){this.sdRT=parseFloat(t.target.value),this.alignState(),this.sendEvent()}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }

        /* Overall element */
        table {
          text-align: center;

          border-collapse: collapse;

          border: 0;
        }

        /* Headers */
        .th-main {
          padding: 0;

          font-weight: bold;
        }

        .th-sub {
          padding: 0 0.25rem;

          font-weight: 600;
        }

        .th-left {
          padding-left: 0;

          text-align: right;
        }

        /* Cells */
        .td {
          width: 10rem;

          padding: 0.25rem 0.25rem 0.375rem;

          transition: all var(---transition-duration) ease;
        }

        .numeric .td {
          width: 7rem;
        }

        /* Labels */
        .payoff {
          font-weight: 600;
          line-height: 0.75rem;
        }

        /* User interaction <input> */
        .td-data decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;
        }

        .td-summary decidables-spinner {
          --decidables-spinner-input-width: 4.5rem;
        }

        /* Table emphasis */
        .td-data.correct {
          border-left: 2px solid var(---color-element-emphasis);
        }

        .td-data.error {
          border-right: 2px solid var(---color-element-emphasis);
        }

        .td-data.count {
          border-top: 2px solid var(---color-element-emphasis);
        }

        .td-data.sd-rt {
          border-bottom: 2px solid var(---color-element-emphasis);
        }

        /* Color schemes */

        /* (Default) All color scheme */
        .correct.count {
          background: var(---color-element-background); /* ###### */
        }

        .error.count {
          background: var(---color-element-background); /* ###### */
        }

        .overall.proportion-correct {
          background: var(---color-element-background); /* ###### */
        }

        .correct.mean-rt {
          background: var(---color-element-background); /* ###### */
        }

        .error.mean-rt {
          background: var(---color-element-background); /* ###### */
        }

        .overall.mean-rt {
          background: var(---color-element-background); /* ###### */
        }

        .correct.sd-rt {
          background: var(---color-element-background); /* ###### */
        }

        .error.sd-rt {
          background: var(---color-element-background); /* ###### */
        }

        .overall.sd-rt {
          background: var(---color-element-background); /* ###### */
        }

        /* Outcome color scheme */
        :host([color="outcome"]) .correct {
          background: var(---color-correct-light);
        }

        :host([color="outcome"]) .error {
          background: var(---color-error-light);
        }

        :host([color="outcome"]) .overall {
          background: var(---color-element-background);
        }

        /* Measure color scheme */
        :host([color="measure"]) .count,
        :host([color="measure"]) .proportion-correct {
          background: var(---color-element-background); /* ###### */
        }

        :host([color="measure"]) .mean-rt {
          background: var(---color-element-background); /* ###### */
        }

        :host([color="measure"]) .sd-rt {
          background: var(---color-element-background); /* ###### */
        }

        /* No color scheme */
        :host([color="none"]) .td-data,
        :host([color="none"]) .td-summary {
          background: var(---color-element-background);
        }
      `]}willUpdate(){this.alignState()}render(){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),e=e=>t.formatToParts(e).map((({type:t,value:e})=>"minusSign"===t?"":e)).reduce(((t,e)=>t+e));let r,s,i,a,n,o,l,c,d;return this.numeric?(r=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.correctCount}" @input=${this.correctCountInput.bind(this)}>
          <span>Correct Count</span>
          ${this.payoff?_`<span class="payoff">${e(this.correctPayoff)}</span>`:_``}
        </decidables-spinner>
      `,s=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.errorCount}" @input=${this.errorCountInput.bind(this)}>
          <span>Error Count</span>
          ${this.payoff?_`<span class="payoff">${e(this.errorPayoff)}</span>`:_``}
        </decidables-spinner>
      `,i=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" max="1" step=".01" .value="${+this.accuracy.toFixed(2)}" @input=${this.accuracyInput.bind(this)}>
          <span>Accuracy</span>
        </decidables-spinner>
        `,a=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.correctMeanRT.toFixed(0)}" @input=${this.correctMeanRTInput.bind(this)}>
          <span>Correct Mean RT</span>
        </decidables-spinner>
      `,n=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.errorMeanRT.toFixed(0)}" @input=${this.errorMeanRTInput.bind(this)}>
          <span>Error Mean RT</span>
        </decidables-spinner>
      `,o=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.meanRT.toFixed(0)}" @input=${this.meanRTInput.bind(this)}>
          <span>Mean RT</span>
        </decidables-spinner>
      `,l=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.correctSDRT.toFixed(0)}" @input=${this.correctSDRTInput.bind(this)}>
          <span>Correct SD RT</span>
        </decidables-spinner>
      `,c=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.errorSDRT.toFixed(0)}" @input=${this.errorSDRTInput.bind(this)}>
          <span>Error SD RT</span>
        </decidables-spinner>
      `,d=_`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.sdRT.toFixed(0)}" @input=${this.sdRTInput.bind(this)}>
          <span>SD RT</span>
        </decidables-spinner>
      `):(r=_`<span>Correct Count</span>
        ${this.payoff?_`<span class="payoff">${e(this.correctPayoff)}</span>`:_``}`,s=_`<span>Error Count</span>
        ${this.payoff?_`<span class="payoff">${e(this.errorPayoff)}</span>`:_``}`,i=_`<span>Accuracy</span>`,a=_`<span>Correct Mean RT</span>`,n=_`<span>Error Mean RT</span>`,o=_`<span>Mean RT</span>`,l=_`<span>Correct SD RT</span>`,c=_`<span>Error SD RT</span>`,d=_`<span>SD RT</span>`),_`
      <table class=${this.numeric?"numeric":""}>
        <thead>
          <tr>
            <th rowspan="2"></th>
            <th class="th th-main" colspan="2" scope="col">
              Outcome
            </th>
          </tr>
          <tr>
            <th class="th th-sub" scope="col">
              Correct
            </th>
            <th class="th th-sub" scope="col">
              Error
            </th>
            ${this.summary.has("overall")?_`
                <th class="th th-main" scope="col">
                  Overall
                </th>`:_``}
          </tr>
        </thead>
        <tbody>
          <tr>
            <th class="th th-sub th-left" scope="row">
              Count
            </th>
            <td class="td td-data correct count">
              ${r}
            </td>
            <td class="td td-data error count">
              ${s}
            </td>
            ${this.summary.has("overall")?_`
                <td class="td td-summary overall proportion-correct">
                  ${i}
                </td>`:_``}
          </tr>
          <tr>
            <th class="th th-sub th-left" scope="row">
              Mean RT
            </th>
            <td class="td td-data correct mean-rt">
              ${a}
            </td>
            <td class="td td-data error mean-rt">
              ${n}
            </td>
            ${this.summary.has("overall")?_`
                <td class="td td-summary overall mean-rt">
                  ${o}
                </td>`:_``}
          </tr>
          <tr>
            <th class="th th-sub th-left" scope="row">
              SD RT
            </th>
            <td class="td td-data correct sd-rt">
              ${l}
            </td>
            <td class="td td-data error sd-rt">
              ${c}
            </td>
            ${this.summary.has("overall")?_`
                <td class="td td-summary overall sd-rt">
                  ${d}
                </td>`:_``}
          </tr>
        </tbody>
      </table>`}}function ba(t,e,r){var s=e,i=function(t,e){return atob(t)}(t),a=i.indexOf("\n",10)+1,n=i.substring(a)+"//# sourceMappingURL="+s,o=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(o)}customElements.define("accumulable-table",ma);var ya,Qa,Ba,Ua=(ya="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoKICAgIERETU1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIQoKICAgIE1vZGVsIHBhcmFtZXRlcnM6CiAgICAgIGEgPSBib3VuZGFyeSBzZXBhcmF0aW9uCiAgICAgIHogPSBzdGFydGluZyBwb2ludCBhcyBhIHByb3BvcnRpb24gb2YgYQogICAgICB2ID0gZHJpZnQgcmF0ZSAocGVyIHNlY29uZCkKICAgICAgdDAgPSBub24tZGVjaXNpb24gdGltZSAoaW4gbWlsbGlzZWNvbmRzKQogICAgICBzID0gd2l0aGluLXRyaWFsIHZhcmlhYmlsaXR5IGluIGRyaWZ0IHJhdGUgKHNeMiA9IGluZmluaXRlc2ltYWwgdmFyaWFuY2UpCgogICAgICB6UHJpbWUgPSBzdGFydGluZyBwb2ludCBvbiBhIDAtdG8tYSBzY2FsZSAodHlwaWNhbGx5IHVzZWQgaW4gcHVibGlzaGVkIGVxdWF0aW9ucykKCiAgICBCZWhhdmlvcmFsIHZhcmlhYmxlczoKICAgICAgcEUgPSBwcm9wb3J0aW9uIG9mIGVycm9yIHRyaWFscwogICAgICBwQyA9IHByb3BvcnRpb24gb2YgY29ycmVjdCB0cmlhbHMKICAgICAgbSA9IG1lYW4gb2Ygb3ZlcmFsbCBSVHMgKGluIG1pbGxpc2Vjb25kcykKICAgICAgbUUgPSBtZWFuIG9mIGVycm9yIFJUcyAoaW4gbWlsbGlzZWNvbmRzKQogICAgICBtQyA9IG1lYW4gY29ycmVjdCBSVHMgKGluIG1pbGxpc2Vjb25kcykKICAgICAgc2QgPSBzdGFuZGFyZCBkZXZpYXRpb24gb2Ygb3ZlcmFsbCBSVHMgKGluIG1pbGxpc2Vjb25kcykKICAgICAgc2RFID0gc3RhbmRhcmQgZGV2aWF0aW9uIG9mIGVycm9yIFJUcyAoaW4gbWlsbGlzZWNvbmRzKQogICAgICBzZEMgPSBzdGFuZGFyZCBkZXZpYXRpb24gb2YgY29ycmVjdCBSVHMgKGluIG1pbGxpc2Vjb25kcykKCiAgICBFcXVhdGlvbnM6CiAgICAgIFByb2JhYmlsaXR5IG9mIGNvcnJlY3QgYW5kIGVycm9yIHJlc3BvbnNlcyAoQWxleGFuZHJvd2ljeiwgMjAyMCkKICAgICAgTWVhbiBvZiBvdmVyYWxsLCBlcnJvciwgYW5kIGNvcnJlY3QgUlRzIChHcmFzbWFuIGV0IGFsLiwgMjAwOSkKICAgICAgU3RhbmRhcmQgZGV2aWF0aW9uIG9mIG92ZXJhbGwsIGVycm9yLCBhbmQgY29ycmVjdCBSVHMgKEdyYXNtYW4gZXQgYWwuLCAyMDA5KQogICAgICBEZW5zaXR5IG9mIGVycm9yIGFuZCBjb3JyZWN0IFJUIGRpc3RyaWJ1dGlvbnMgKEFsZXhhbmRyb3dpY3osIDIwMjApCiAgKi8KICBjbGFzcyBERE1NYXRoIHsKICAgIHN0YXRpYyBzID0gMTsKCiAgICAvLyBDYWxjdWxhdGUgYSBidW5jaCBvZiBzdGF0aXN0aWNzIGZvciBhbiBhcnJheSBvZiB0cmlhbHMKICAgIHN0YXRpYyB0cmlhbHMyc3RhdHModHJpYWxzKSB7CiAgICAgIGNvbnN0IHN0YXRzID0gdHJpYWxzLnJlZHVjZSgoYWNjdW11bGF0b3IsIHRyaWFsKSA9PiB7CiAgICAgICAgc3dpdGNoICh0cmlhbC5vdXRjb21lKSB7CiAgICAgICAgICBjYXNlICdjb3JyZWN0JzoKICAgICAgICAgICAgYWNjdW11bGF0b3IudHJpYWxzLmNvcnJlY3QgKz0gMTsKICAgICAgICAgICAgYWNjdW11bGF0b3IucnRzLmNvcnJlY3QgKz0gdHJpYWwucnQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnZXJyb3InOgogICAgICAgICAgICBhY2N1bXVsYXRvci50cmlhbHMuZXJyb3IgKz0gMTsKICAgICAgICAgICAgYWNjdW11bGF0b3IucnRzLmVycm9yICs9IHRyaWFsLnJ0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ25yJzoKICAgICAgICAgICAgYWNjdW11bGF0b3IudHJpYWxzLm5yICs9IDE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgLy8gTm8tb3AKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yOwogICAgICB9LCB7CiAgICAgICAgdHJpYWxzOiB7CiAgICAgICAgICB0b3RhbDogMCwKICAgICAgICAgIGNvcnJlY3Q6IDAsCiAgICAgICAgICBlcnJvcjogMCwKICAgICAgICAgIG5yOiAwCiAgICAgICAgfSwKICAgICAgICBydHM6IHsKICAgICAgICAgIG92ZXJhbGw6IDAsCiAgICAgICAgICBjb3JyZWN0OiAwLAogICAgICAgICAgZXJyb3I6IDAKICAgICAgICB9LAogICAgICAgIHNzczogewogICAgICAgICAgb3ZlcmFsbDogMCwKICAgICAgICAgIGNvcnJlY3Q6IDAsCiAgICAgICAgICBlcnJvcjogMAogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHN0YXRzLnRyaWFscy50b3RhbCA9IHN0YXRzLnRyaWFscy5jb3JyZWN0ICsgc3RhdHMudHJpYWxzLmVycm9yICsgc3RhdHMudHJpYWxzLm5yOwogICAgICBzdGF0cy5ydHMub3ZlcmFsbCA9IHN0YXRzLnJ0cy5jb3JyZWN0ICsgc3RhdHMucnRzLmVycm9yOwogICAgICBzdGF0cy5wcm9wb3J0aW9uID0gewogICAgICAgIGNvcnJlY3Q6IHN0YXRzLnRyaWFscy5jb3JyZWN0IC8gc3RhdHMudHJpYWxzLnRvdGFsLAogICAgICAgIGVycm9yOiBzdGF0cy50cmlhbHMuZXJyb3IgLyBzdGF0cy50cmlhbHMudG90YWwsCiAgICAgICAgbnI6IHN0YXRzLnRyaWFscy5uciAvIHN0YXRzLnRyaWFscy50b3RhbAogICAgICB9OwogICAgICBzdGF0cy5tZWFuUlQgPSB7CiAgICAgICAgb3ZlcmFsbDogc3RhdHMucnRzLm92ZXJhbGwgLyAoc3RhdHMudHJpYWxzLmNvcnJlY3QgKyBzdGF0cy50cmlhbHMuZXJyb3IpLAogICAgICAgIGNvcnJlY3Q6IHN0YXRzLnJ0cy5jb3JyZWN0IC8gc3RhdHMudHJpYWxzLmNvcnJlY3QsCiAgICAgICAgZXJyb3I6IHN0YXRzLnJ0cy5lcnJvciAvIHN0YXRzLnRyaWFscy5lcnJvcgogICAgICB9OwogICAgICB0cmlhbHMucmVkdWNlKChhY2N1bXVsYXRvciwgdHJpYWwpID0+IHsKICAgICAgICBhY2N1bXVsYXRvci5zc3Mub3ZlcmFsbCArPSAodHJpYWwucnQgLSBhY2N1bXVsYXRvci5tZWFuUlQub3ZlcmFsbCkgKiogMjsKICAgICAgICBzd2l0Y2ggKHRyaWFsLm91dGNvbWUpIHsKICAgICAgICAgIGNhc2UgJ2NvcnJlY3QnOgogICAgICAgICAgICBhY2N1bXVsYXRvci5zc3MuY29ycmVjdCArPSAodHJpYWwucnQgLSBhY2N1bXVsYXRvci5tZWFuUlQuY29ycmVjdCkgKiogMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdlcnJvcic6CiAgICAgICAgICAgIGFjY3VtdWxhdG9yLnNzcy5lcnJvciArPSAodHJpYWwucnQgLSBhY2N1bXVsYXRvci5tZWFuUlQuZXJyb3IpICoqIDI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgLy8gTm8tb3AKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yOwogICAgICB9LCBzdGF0cyk7CiAgICAgIHN0YXRzLnNkUlQgPSB7CiAgICAgICAgb3ZlcmFsbDogTWF0aC5zcXJ0KHN0YXRzLnNzcy5vdmVyYWxsIC8gKHN0YXRzLnRyaWFscy5jb3JyZWN0ICsgc3RhdHMudHJpYWxzLmVycm9yIC0gMSkpLAogICAgICAgIGNvcnJlY3Q6IE1hdGguc3FydChzdGF0cy5zc3MuY29ycmVjdCAvIChzdGF0cy50cmlhbHMuY29ycmVjdCAtIDEpKSwKICAgICAgICBlcnJvcjogTWF0aC5zcXJ0KHN0YXRzLnNzcy5lcnJvciAvIChzdGF0cy50cmlhbHMuZXJyb3IgLSAxKSkKICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXRzOwogICAgfQoKICAgIC8vIFByb2JhYmlsaXR5IG9mIGFuIEVycm9yIFJlc3BvbnNlCiAgICBzdGF0aWMgYXp2czJwRShhLCB6LCB2LCBzID0gRERNTWF0aC5zKSB7CiAgICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6OwogICAgICBjb25zdCBBID0gTWF0aC5leHAoLTIgKiB2ICogYSAvIHMgKiogMik7CiAgICAgIGNvbnN0IFogPSBNYXRoLmV4cCgtMiAqIHYgKiB6UHJpbWUgLyBzICoqIDIpOwogICAgICByZXR1cm4gKEEgLSBaKSAvIChBIC0gMSk7CiAgICB9CgogICAgLy8gUHJvYmFiaWxpdHkgb2YgYSBDb3JyZWN0IFJlc3BvbnNlCiAgICBzdGF0aWMgYXp2czJwQyhhLCB6LCB2LCBzID0gRERNTWF0aC5zKSB7CiAgICAgIHJldHVybiBERE1NYXRoLmF6dnMycEUoYSwgMSAtIHosIC12LCBzKTsKICAgIH0KCiAgICAvLyBNZWFuIE92ZXJhbGwgUlQKICAgIC8vIEVxdWF0aW9uIDUgKEdyYXNtYW4gZXQgYWwuLCAyMDA5KQogICAgc3RhdGljIGF6dnQwczJtKGEsIHosIHYsIHQwLCBzID0gRERNTWF0aC5zKSB7CiAgICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6OwogICAgICBjb25zdCBBID0gTWF0aC5leHAoLTIgKiB2ICogYSAvIHMgKiogMikgLSAxOwogICAgICBjb25zdCBaID0gTWF0aC5leHAoLTIgKiB2ICogelByaW1lIC8gcyAqKiAyKSAtIDE7CiAgICAgIGNvbnN0IG1lYW4gPSAtKHpQcmltZSAvIHYpICsgYSAvIHYgKiAoWiAvIEEpOwogICAgICByZXR1cm4gdDAgKyBtZWFuICogMTAwMDsKICAgIH0KCiAgICAvLyBTRCBPdmVyYWxsIFJUCiAgICAvLyBFcXVhdGlvbiA2IChHcmFzbWFuIGV0IGFsLiwgMjAwOSkKICAgIHN0YXRpYyBhenZzMnNkKGEsIHosIHYsIHMgPSBERE1NYXRoLnMpIHsKICAgICAgY29uc3QgelByaW1lID0gYSAqIHo7CiAgICAgIGNvbnN0IEEgPSBNYXRoLmV4cCgtMiAqIHYgKiBhIC8gcyAqKiAyKSAtIDE7CiAgICAgIGNvbnN0IFogPSBNYXRoLmV4cCgtMiAqIHYgKiB6UHJpbWUgLyBzICoqIDIpIC0gMTsKICAgICAgY29uc3QgdmFyaWFuY2UgPSAoLXYgKiBhICoqIDIgKiAoWiArIDQpICogWiAvIEEgKiogMiArICgoLTMgKiB2ICogYSAqKiAyICsgNCAqIHYgKiB6UHJpbWUgKiBhICsgcyAqKiAyICogYSkgKiBaICsgNCAqIHYgKiB6UHJpbWUgKiBhKSAvIEEgLSBzICoqIDIgKiB6UHJpbWUpIC8gdiAqKiAzOwogICAgICByZXR1cm4gTWF0aC5zcXJ0KHZhcmlhbmNlKSAqIDEwMDA7CiAgICB9CgogICAgLy8gTWVhbiBFcnJvciBSVAogICAgLy8gRXF1YXRpb24gMTMgKEdyYXNtYW4gZXQgYWwuLCAyMDA5KQogICAgc3RhdGljIGF6dnQwczJtRShhLCB6LCB2LCB0MCwgcyA9IERETU1hdGgucykgewogICAgICBmdW5jdGlvbiBwaGkoeCwgeSkgewogICAgICAgIHJldHVybiBNYXRoLmV4cCgyICogdiAqIHkgLyBzICoqIDIpIC0gTWF0aC5leHAoMiAqIHYgKiB4IC8gcyAqKiAyKTsKICAgICAgfQogICAgICBjb25zdCB6UHJpbWUgPSBhICogejsKICAgICAgY29uc3QgbWVhbiA9ICh6UHJpbWUgKiAocGhpKHpQcmltZSAtIGEsIGEpICsgcGhpKDAsIHpQcmltZSkpICsgMiAqIGEgKiBwaGkoelByaW1lLCAwKSkgLyAodiAqIHBoaSh6UHJpbWUsIGEpICogcGhpKC1hLCAwKSk7CiAgICAgIHJldHVybiB0MCArIG1lYW4gKiAxMDAwOwogICAgfQoKICAgIC8vIFNEIEVycm9yIFJUCiAgICAvLyBFcXVhdGlvbiAxNCAoR3Jhc21hbiBldCBhbC4sIDIwMDkpCiAgICBzdGF0aWMgYXp2czJzZEUoYSwgeiwgdiwgcyA9IERETU1hdGgucykgewogICAgICBmdW5jdGlvbiBwaGkoeCwgeSkgewogICAgICAgIHJldHVybiBNYXRoLmV4cCgyICogdiAqIHkgLyBzICoqIDIpIC0gTWF0aC5leHAoMiAqIHYgKiB4IC8gcyAqKiAyKTsKICAgICAgfQogICAgICBjb25zdCB6UHJpbWUgPSBhICogejsKICAgICAgY29uc3QgdmFyaWFuY2UgPSAtMiAqIGEgKiBwaGkoMCwgelByaW1lKSAqICgyICogdiAqIGEgKiBwaGkoelByaW1lLCAyICogYSkgKyBzICoqIDIgKiBwaGkoMCwgYSkgKiBwaGkoelByaW1lLCBhKSkgKiBNYXRoLmV4cCgyICogdiAqIGEgLyBzICoqIDIpIC8gKHYgKiogMyAqIHBoaSgwLCBhKSAqKiAyICogcGhpKHpQcmltZSwgYSkgKiogMikgKyAoNCAqIHYgKiB6UHJpbWUgKiAoMiAqIGEgLSB6UHJpbWUpICogTWF0aC5leHAoMiAqIHYgKiAoelByaW1lICsgYSkgLyBzICoqIDIpICsgelByaW1lICogcyAqKiAyICogcGhpKDIgKiB6UHJpbWUsIDIgKiBhKSkgLyAodiAqKiAzICogcGhpKHpQcmltZSwgYSkgKiogMik7CiAgICAgIHJldHVybiBNYXRoLnNxcnQodmFyaWFuY2UpICogMTAwMDsKICAgIH0KCiAgICAvLyBNZWFuIENvcnJlY3QgUlQKICAgIHN0YXRpYyBhenZ0MHMybUMoYSwgeiwgdiwgdDAsIHMgPSBERE1NYXRoLnMpIHsKICAgICAgcmV0dXJuIERETU1hdGguYXp2dDBzMm1FKGEsIDEgLSB6LCAtdiwgdDAsIHMpOwogICAgfQoKICAgIC8vIFNEIENvcnJlY3QgUlQKICAgIHN0YXRpYyBhenZzMnNkQyhhLCB6LCB2LCBzID0gRERNTWF0aC5zKSB7CiAgICAgIHJldHVybiBERE1NYXRoLmF6dnMyc2RFKGEsIDEgLSB6LCAtdiwgcyk7CiAgICB9CgogICAgLy8gRGVuc2l0eSBvZiBFcnJvciBSVAogICAgc3RhdGljIHRhenZzMmdFKHQsIGEsIHosIHYsIHMgPSBERE1NYXRoLnMpIHsKICAgICAgaWYgKCF0KSByZXR1cm4gMDsKICAgICAgY29uc3QgelByaW1lID0gYSAqIHo7CiAgICAgIGNvbnN0IGJhc2UgPSBNYXRoLlBJICogcyAqKiAyIC8gYSAqKiAyICogTWF0aC5leHAoLXpQcmltZSAqIHYgLyBzICoqIDIpOwogICAgICBsZXQgayA9IDA7CiAgICAgIGxldCB0ZXJtID0gMDsKICAgICAgbGV0IHN1bSA9IDA7CiAgICAgIGRvIHsKICAgICAgICBrICs9IDE7CiAgICAgICAgdGVybSA9IGsgKiBNYXRoLnNpbihNYXRoLlBJICogelByaW1lICogayAvIGEpICogTWF0aC5leHAoLTAuNSAqICh2ICoqIDIgLyBzICoqIDIgKyBNYXRoLlBJICoqIDIgKiBrICoqIDIgKiBzICoqIDIgLyBhICoqIDIpICogdCk7CiAgICAgICAgc3VtICs9IHRlcm07CiAgICAgIH0gd2hpbGUgKGsgPCAyMDApOyAvLyA/PyBIQUNLCgogICAgICByZXR1cm4gYmFzZSAqIHN1bTsKICAgIH0KCiAgICAvLyBEZW5zaXR5IG9mIENvcnJlY3QgUlQKICAgIHN0YXRpYyB0YXp2czJnQyh0LCBhLCB6LCB2LCBzID0gRERNTWF0aC5zKSB7CiAgICAgIHJldHVybiBERE1NYXRoLnRhenZzMmdFKHQsIGEsIDEgLSB6LCAtdiwgcyk7CiAgICB9CiAgfQoKICAvLyBJbnRlcm5hbCBkZXBlbmRlbmNpZXMKCiAgLy8gQWRhcHRlZCBmcm9tICBodHRwczovL3Jhb3VsLnNvY3NjaS51dmEubmwvRVoyL0VaMl9uZXcuaHRtbAoKICBmdW5jdGlvbiBzaWduKHIpIHsKICAgIHJldHVybiByID4gMCA/IDEgOiByID09PSAwID8gMCA6IC0xOwogIH0KICBmdW5jdGlvbiBsb2dpdChwKSB7CiAgICByZXR1cm4gTWF0aC5sb2cocCAvICgxIC0gcCkpOwogIH0KCiAgLy8gRVotZnVuY3Rpb24gZm9yIHN0YXJ0aW5nIHZhbHVlcwogIC8vIGlucHV0OiBvYmogLSBPYmplY3Qgd2l0aCBwcm9wZXJ0aWVzCiAgLy8gICAgcEMgLSBQcm9wb3J0aW9uIGNvcnJlY3QKICAvLyAgICBzZCAtIHNhbXBsZSBzdGFuZGFyZCBkZXZpYXRpb24gb2YgdGhlIFJUJ3MgaW4gbXMKICAvLyAgICBtIC0gc2FtcGxlIG1lYW4gb2YgdGhlIFJUJ3MgaW4gbXMKICAvLyAgICBzIC0gZGlmZnVzaW9uIHN0YW5kYXJkIGRldmlhdGlvbgogIC8vIHJldHVybnM6IE9iamVjdCB3aXRoIHByb3BlcnRpZXMgdiwgYSwgYW5kIHQwLCBjb250YWluaW5nIEVaLWVzdGltYXRlcyBvZiB0aGVzZSBwYXJhbWV0ZXJzCiAgZnVuY3Rpb24gZGF0YTJleih7CiAgICBhY2N1cmFjeTogcEMsCiAgICBzZFJUOiBzZCwKICAgIG1lYW5SVDogbSwKICAgIHMKICB9KSB7CiAgICBjb25zdCB2cnQgPSAoc2QgLyAxMDAwKSAqKiAyOwogICAgY29uc3QgbXJ0ID0gbSAvIDEwMDA7CiAgICBjb25zdCBzMiA9IHMgKiogMjsKICAgIGNvbnN0IGwgPSBsb2dpdChwQyk7CiAgICBjb25zdCB4ID0gbCAqIChsICogcEMgKiogMiAtIGwgKiBwQyArIHBDIC0gMC41KSAvIHZydDsKICAgIGNvbnN0IHYgPSBzaWduKHBDIC0gMC41KSAqIHMgKiB4ICoqICgxIC8gNCk7CiAgICBjb25zdCBhID0gczIgKiBsb2dpdChwQykgLyB2OwogICAgY29uc3QgeSA9IC12ICogYSAvIHMyOwogICAgY29uc3QgbWR0ID0gYSAvICgyICogdikgKiAoMSAtIE1hdGguZXhwKHkpKSAvICgxICsgTWF0aC5leHAoeSkpOwogICAgY29uc3QgdDAgPSBtcnQgPyBtcnQgLSBtZHQgOiBudWxsOyAvLyBjb21wdXRlIFRlciBvbmx5IGlmIE1SVCB3YXMgcHJvdmlkZWQKCiAgICBjb25zdCB0MFByaW1lID0gdDAgKiAxMDAwOwogICAgcmV0dXJuIHsKICAgICAgdiwKICAgICAgYSwKICAgICAgdDA6IHQwUHJpbWUsCiAgICAgIHMKICAgIH07CiAgfQoKICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbIm9mZiIsICJzZWxmIl0gKi8KCiAgc2VsZi5vbm1lc3NhZ2UgPSBldmVudCA9PiB7CiAgICBjb25zdCBwYXJhbXMgPSBkYXRhMmV6KHsKICAgICAgLi4uZXZlbnQuZGF0YSwKICAgICAgczogRERNTWF0aC5zCiAgICB9KTsKCiAgICAvLyAjIyMjIyBBcmJpdHJhcnkgZGVmYXVsdCB2YWx1ZXMhISEKICAgIGNvbnN0IGEgPSAhaXNOYU4ocGFyYW1zLmEpID8gcGFyYW1zLmEgOiAxLjU7CiAgICBjb25zdCB6ID0gIWlzTmFOKHBhcmFtcy56KSA/IHBhcmFtcy56IDogMC41OwogICAgY29uc3QgdiA9ICFpc05hTihwYXJhbXMudikgPyBwYXJhbXMudiA6IDA7CiAgICBjb25zdCB0MCA9ICFpc05hTihwYXJhbXMudDApID8gcGFyYW1zLnQwIDogMTAwOwogICAgY29uc3QgcyA9ICFpc05hTihwYXJhbXMucykgPyBwYXJhbXMucyA6IERETU1hdGguczsKICAgIGNvbnN0IHByZWRpY3RlZCA9IHsKICAgICAgYWNjdXJhY3k6IERETU1hdGguYXp2czJwQyhhLCB6LCB2KSwKICAgICAgbWVhblJUOiBERE1NYXRoLmF6dnQwczJtKGEsIHosIHYsIHQwKSwKICAgICAgc2RSVDogRERNTWF0aC5henZzMnNkKGEsIHosIHYpCiAgICB9OwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIHBhcmFtczogewogICAgICAgIGEsCiAgICAgICAgeiwKICAgICAgICB2LAogICAgICAgIHQwLAogICAgICAgIHMKICAgICAgfSwKICAgICAgcHJlZGljdGVkCiAgICB9KTsKICB9OwoKfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGRtLWZpdC13b3JrZXIuanMubWFwCgo=",Qa="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGRtLWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uL2FjY3VtdWxhYmxlLW1hdGgvc3JjL2RkbS1tYXRoLmpzIiwiLi4vYWNjdW11bGFibGUtbWF0aC9zcmMvaW5kZXguanMiLCJzcmMvY29tcG9uZW50cy9lejIuanMiLCJzcmMvY29tcG9uZW50cy9kZG0tZml0LXdvcmtlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qXG4gIERETU1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIVxuXG4gIE1vZGVsIHBhcmFtZXRlcnM6XG4gICAgYSA9IGJvdW5kYXJ5IHNlcGFyYXRpb25cbiAgICB6ID0gc3RhcnRpbmcgcG9pbnQgYXMgYSBwcm9wb3J0aW9uIG9mIGFcbiAgICB2ID0gZHJpZnQgcmF0ZSAocGVyIHNlY29uZClcbiAgICB0MCA9IG5vbi1kZWNpc2lvbiB0aW1lIChpbiBtaWxsaXNlY29uZHMpXG4gICAgcyA9IHdpdGhpbi10cmlhbCB2YXJpYWJpbGl0eSBpbiBkcmlmdCByYXRlIChzXjIgPSBpbmZpbml0ZXNpbWFsIHZhcmlhbmNlKVxuXG4gICAgelByaW1lID0gc3RhcnRpbmcgcG9pbnQgb24gYSAwLXRvLWEgc2NhbGUgKHR5cGljYWxseSB1c2VkIGluIHB1Ymxpc2hlZCBlcXVhdGlvbnMpXG5cbiAgQmVoYXZpb3JhbCB2YXJpYWJsZXM6XG4gICAgcEUgPSBwcm9wb3J0aW9uIG9mIGVycm9yIHRyaWFsc1xuICAgIHBDID0gcHJvcG9ydGlvbiBvZiBjb3JyZWN0IHRyaWFsc1xuICAgIG0gPSBtZWFuIG9mIG92ZXJhbGwgUlRzIChpbiBtaWxsaXNlY29uZHMpXG4gICAgbUUgPSBtZWFuIG9mIGVycm9yIFJUcyAoaW4gbWlsbGlzZWNvbmRzKVxuICAgIG1DID0gbWVhbiBjb3JyZWN0IFJUcyAoaW4gbWlsbGlzZWNvbmRzKVxuICAgIHNkID0gc3RhbmRhcmQgZGV2aWF0aW9uIG9mIG92ZXJhbGwgUlRzIChpbiBtaWxsaXNlY29uZHMpXG4gICAgc2RFID0gc3RhbmRhcmQgZGV2aWF0aW9uIG9mIGVycm9yIFJUcyAoaW4gbWlsbGlzZWNvbmRzKVxuICAgIHNkQyA9IHN0YW5kYXJkIGRldmlhdGlvbiBvZiBjb3JyZWN0IFJUcyAoaW4gbWlsbGlzZWNvbmRzKVxuXG4gIEVxdWF0aW9uczpcbiAgICBQcm9iYWJpbGl0eSBvZiBjb3JyZWN0IGFuZCBlcnJvciByZXNwb25zZXMgKEFsZXhhbmRyb3dpY3osIDIwMjApXG4gICAgTWVhbiBvZiBvdmVyYWxsLCBlcnJvciwgYW5kIGNvcnJlY3QgUlRzIChHcmFzbWFuIGV0IGFsLiwgMjAwOSlcbiAgICBTdGFuZGFyZCBkZXZpYXRpb24gb2Ygb3ZlcmFsbCwgZXJyb3IsIGFuZCBjb3JyZWN0IFJUcyAoR3Jhc21hbiBldCBhbC4sIDIwMDkpXG4gICAgRGVuc2l0eSBvZiBlcnJvciBhbmQgY29ycmVjdCBSVCBkaXN0cmlidXRpb25zIChBbGV4YW5kcm93aWN6LCAyMDIwKVxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERETU1hdGgge1xuICBzdGF0aWMgcyA9IDE7XG5cbiAgLy8gQ2FsY3VsYXRlIGEgYnVuY2ggb2Ygc3RhdGlzdGljcyBmb3IgYW4gYXJyYXkgb2YgdHJpYWxzXG4gIHN0YXRpYyB0cmlhbHMyc3RhdHModHJpYWxzKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0cmlhbHMucmVkdWNlKFxuICAgICAgKGFjY3VtdWxhdG9yLCB0cmlhbCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKHRyaWFsLm91dGNvbWUpIHtcbiAgICAgICAgICBjYXNlICdjb3JyZWN0JzpcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLnRyaWFscy5jb3JyZWN0ICs9IDE7XG4gICAgICAgICAgICBhY2N1bXVsYXRvci5ydHMuY29ycmVjdCArPSB0cmlhbC5ydDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLnRyaWFscy5lcnJvciArPSAxO1xuICAgICAgICAgICAgYWNjdW11bGF0b3IucnRzLmVycm9yICs9IHRyaWFsLnJ0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnbnInOlxuICAgICAgICAgICAgYWNjdW11bGF0b3IudHJpYWxzLm5yICs9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgLy8gTm8tb3BcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0cmlhbHM6IHtcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICBjb3JyZWN0OiAwLFxuICAgICAgICAgIGVycm9yOiAwLFxuICAgICAgICAgIG5yOiAwLFxuICAgICAgICB9LFxuICAgICAgICBydHM6IHtcbiAgICAgICAgICBvdmVyYWxsOiAwLFxuICAgICAgICAgIGNvcnJlY3Q6IDAsXG4gICAgICAgICAgZXJyb3I6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIHNzczoge1xuICAgICAgICAgIG92ZXJhbGw6IDAsXG4gICAgICAgICAgY29ycmVjdDogMCxcbiAgICAgICAgICBlcnJvcjogMCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIHN0YXRzLnRyaWFscy50b3RhbCA9IHN0YXRzLnRyaWFscy5jb3JyZWN0ICsgc3RhdHMudHJpYWxzLmVycm9yICsgc3RhdHMudHJpYWxzLm5yO1xuICAgIHN0YXRzLnJ0cy5vdmVyYWxsID0gc3RhdHMucnRzLmNvcnJlY3QgKyBzdGF0cy5ydHMuZXJyb3I7XG5cbiAgICBzdGF0cy5wcm9wb3J0aW9uID0ge1xuICAgICAgY29ycmVjdDogc3RhdHMudHJpYWxzLmNvcnJlY3QgLyBzdGF0cy50cmlhbHMudG90YWwsXG4gICAgICBlcnJvcjogc3RhdHMudHJpYWxzLmVycm9yIC8gc3RhdHMudHJpYWxzLnRvdGFsLFxuICAgICAgbnI6IHN0YXRzLnRyaWFscy5uciAvIHN0YXRzLnRyaWFscy50b3RhbCxcbiAgICB9O1xuXG4gICAgc3RhdHMubWVhblJUID0ge1xuICAgICAgb3ZlcmFsbDogc3RhdHMucnRzLm92ZXJhbGwgLyAoc3RhdHMudHJpYWxzLmNvcnJlY3QgKyBzdGF0cy50cmlhbHMuZXJyb3IpLFxuICAgICAgY29ycmVjdDogc3RhdHMucnRzLmNvcnJlY3QgLyBzdGF0cy50cmlhbHMuY29ycmVjdCxcbiAgICAgIGVycm9yOiBzdGF0cy5ydHMuZXJyb3IgLyBzdGF0cy50cmlhbHMuZXJyb3IsXG4gICAgfTtcblxuICAgIHRyaWFscy5yZWR1Y2UoXG4gICAgICAoYWNjdW11bGF0b3IsIHRyaWFsKSA9PiB7XG4gICAgICAgIGFjY3VtdWxhdG9yLnNzcy5vdmVyYWxsICs9ICh0cmlhbC5ydCAtIGFjY3VtdWxhdG9yLm1lYW5SVC5vdmVyYWxsKSAqKiAyO1xuICAgICAgICBzd2l0Y2ggKHRyaWFsLm91dGNvbWUpIHtcbiAgICAgICAgICBjYXNlICdjb3JyZWN0JzpcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLnNzcy5jb3JyZWN0ICs9ICh0cmlhbC5ydCAtIGFjY3VtdWxhdG9yLm1lYW5SVC5jb3JyZWN0KSAqKiAyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgYWNjdW11bGF0b3Iuc3NzLmVycm9yICs9ICh0cmlhbC5ydCAtIGFjY3VtdWxhdG9yLm1lYW5SVC5lcnJvcikgKiogMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBOby1vcFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICAgIH0sXG4gICAgICBzdGF0cyxcbiAgICApO1xuXG4gICAgc3RhdHMuc2RSVCA9IHtcbiAgICAgIG92ZXJhbGw6IE1hdGguc3FydChzdGF0cy5zc3Mub3ZlcmFsbCAvIChzdGF0cy50cmlhbHMuY29ycmVjdCArIHN0YXRzLnRyaWFscy5lcnJvciAtIDEpKSxcbiAgICAgIGNvcnJlY3Q6IE1hdGguc3FydChzdGF0cy5zc3MuY29ycmVjdCAvIChzdGF0cy50cmlhbHMuY29ycmVjdCAtIDEpKSxcbiAgICAgIGVycm9yOiBNYXRoLnNxcnQoc3RhdHMuc3NzLmVycm9yIC8gKHN0YXRzLnRyaWFscy5lcnJvciAtIDEpKSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG5cbiAgLy8gUHJvYmFiaWxpdHkgb2YgYW4gRXJyb3IgUmVzcG9uc2VcbiAgc3RhdGljIGF6dnMycEUoYSwgeiwgdiwgcyA9IERETU1hdGgucykge1xuICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6O1xuXG4gICAgY29uc3QgQSA9IE1hdGguZXhwKCgtMiAqIHYgKiBhKSAvIHMgKiogMik7XG4gICAgY29uc3QgWiA9IE1hdGguZXhwKCgtMiAqIHYgKiB6UHJpbWUpIC8gcyAqKiAyKTtcblxuICAgIHJldHVybiAoQSAtIFopIC8gKEEgLSAxKTtcbiAgfVxuXG4gIC8vIFByb2JhYmlsaXR5IG9mIGEgQ29ycmVjdCBSZXNwb25zZVxuICBzdGF0aWMgYXp2czJwQyhhLCB6LCB2LCBzID0gRERNTWF0aC5zKSB7XG4gICAgcmV0dXJuIERETU1hdGguYXp2czJwRShhLCAxIC0geiwgLXYsIHMpO1xuICB9XG5cbiAgLy8gTWVhbiBPdmVyYWxsIFJUXG4gIC8vIEVxdWF0aW9uIDUgKEdyYXNtYW4gZXQgYWwuLCAyMDA5KVxuICBzdGF0aWMgYXp2dDBzMm0oYSwgeiwgdiwgdDAsIHMgPSBERE1NYXRoLnMpIHtcbiAgICBjb25zdCB6UHJpbWUgPSBhICogejtcbiAgICBjb25zdCBBID0gTWF0aC5leHAoKC0yICogdiAqIGEpIC8gcyAqKiAyKSAtIDE7XG4gICAgY29uc3QgWiA9IE1hdGguZXhwKCgtMiAqIHYgKiB6UHJpbWUpIC8gcyAqKiAyKSAtIDE7XG5cbiAgICBjb25zdCBtZWFuID0gLSh6UHJpbWUgLyB2KSArIChhIC8gdikgKiAoWiAvIEEpO1xuICAgIHJldHVybiB0MCArIG1lYW4gKiAxMDAwO1xuICB9XG5cbiAgLy8gU0QgT3ZlcmFsbCBSVFxuICAvLyBFcXVhdGlvbiA2IChHcmFzbWFuIGV0IGFsLiwgMjAwOSlcbiAgc3RhdGljIGF6dnMyc2QoYSwgeiwgdiwgcyA9IERETU1hdGgucykge1xuICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6O1xuICAgIGNvbnN0IEEgPSBNYXRoLmV4cCgoLTIgKiB2ICogYSkgLyBzICoqIDIpIC0gMTtcbiAgICBjb25zdCBaID0gTWF0aC5leHAoKC0yICogdiAqIHpQcmltZSkgLyBzICoqIDIpIC0gMTtcblxuICAgIGNvbnN0IHZhcmlhbmNlID0gKFxuICAgICAgKFxuICAgICAgICAoLXYgKiBhICoqIDIgKiAoWiArIDQpICogWikgLyBBICoqIDJcbiAgICAgICkgKyAoXG4gICAgICAgICgoLTMgKiB2ICogYSAqKiAyICsgNCAqIHYgKiB6UHJpbWUgKiBhICsgcyAqKiAyICogYSkgKiBaICsgNCAqIHYgKiB6UHJpbWUgKiBhKSAvIEFcbiAgICAgICkgLSAoXG4gICAgICAgIHMgKiogMiAqIHpQcmltZVxuICAgICAgKVxuICAgICkgLyB2ICoqIDM7XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KHZhcmlhbmNlKSAqIDEwMDA7XG4gIH1cblxuICAvLyBNZWFuIEVycm9yIFJUXG4gIC8vIEVxdWF0aW9uIDEzIChHcmFzbWFuIGV0IGFsLiwgMjAwOSlcbiAgc3RhdGljIGF6dnQwczJtRShhLCB6LCB2LCB0MCwgcyA9IERETU1hdGgucykge1xuICAgIGZ1bmN0aW9uIHBoaSh4LCB5KSB7XG4gICAgICByZXR1cm4gTWF0aC5leHAoKDIgKiB2ICogeSkgLyAocyAqKiAyKSkgLSBNYXRoLmV4cCgoMiAqIHYgKiB4KSAvIChzICoqIDIpKTtcbiAgICB9XG4gICAgY29uc3QgelByaW1lID0gYSAqIHo7XG5cbiAgICBjb25zdCBtZWFuID0gKHpQcmltZSAqIChwaGkoelByaW1lIC0gYSwgYSkgKyBwaGkoMCwgelByaW1lKSkgKyAyICogYSAqIHBoaSh6UHJpbWUsIDApKVxuICAgICAgLyAodiAqIHBoaSh6UHJpbWUsIGEpICogcGhpKC1hLCAwKSk7XG4gICAgcmV0dXJuIHQwICsgbWVhbiAqIDEwMDA7XG4gIH1cblxuICAvLyBTRCBFcnJvciBSVFxuICAvLyBFcXVhdGlvbiAxNCAoR3Jhc21hbiBldCBhbC4sIDIwMDkpXG4gIHN0YXRpYyBhenZzMnNkRShhLCB6LCB2LCBzID0gRERNTWF0aC5zKSB7XG4gICAgZnVuY3Rpb24gcGhpKHgsIHkpIHtcbiAgICAgIHJldHVybiBNYXRoLmV4cCgoMiAqIHYgKiB5KSAvIChzICoqIDIpKSAtIE1hdGguZXhwKCgyICogdiAqIHgpIC8gKHMgKiogMikpO1xuICAgIH1cbiAgICBjb25zdCB6UHJpbWUgPSBhICogejtcblxuICAgIGNvbnN0IHZhcmlhbmNlID0gKFxuICAgICAgKFxuICAgICAgICAtMiAqIGEgKiBwaGkoMCwgelByaW1lKVxuICAgICAgICAqICgoMiAqIHYgKiBhICogcGhpKHpQcmltZSwgMiAqIGEpKSArIChzICoqIDIgKiBwaGkoMCwgYSkgKiBwaGkoelByaW1lLCBhKSkpXG4gICAgICAgICogTWF0aC5leHAoKDIgKiB2ICogYSkgLyBzICoqIDIpXG4gICAgICApIC8gKFxuICAgICAgICB2ICoqIDMgKiBwaGkoMCwgYSkgKiogMiAqIHBoaSh6UHJpbWUsIGEpICoqIDJcbiAgICAgIClcbiAgICApICsgKFxuICAgICAgKFxuICAgICAgICA0ICogdiAqIHpQcmltZSAqICgyICogYSAtIHpQcmltZSkgKiBNYXRoLmV4cCgoMiAqIHYgKiAoelByaW1lICsgYSkpIC8gcyAqKiAyKVxuICAgICAgICArIHpQcmltZSAqIHMgKiogMiAqIHBoaSgyICogelByaW1lLCAyICogYSlcbiAgICAgICkgLyAoXG4gICAgICAgIHYgKiogMyAqIHBoaSh6UHJpbWUsIGEpICoqIDJcbiAgICAgIClcbiAgICApO1xuXG4gICAgcmV0dXJuIE1hdGguc3FydCh2YXJpYW5jZSkgKiAxMDAwO1xuICB9XG5cbiAgLy8gTWVhbiBDb3JyZWN0IFJUXG4gIHN0YXRpYyBhenZ0MHMybUMoYSwgeiwgdiwgdDAsIHMgPSBERE1NYXRoLnMpIHtcbiAgICByZXR1cm4gRERNTWF0aC5henZ0MHMybUUoYSwgMSAtIHosIC12LCB0MCwgcyk7XG4gIH1cblxuICAvLyBTRCBDb3JyZWN0IFJUXG4gIHN0YXRpYyBhenZzMnNkQyhhLCB6LCB2LCBzID0gRERNTWF0aC5zKSB7XG4gICAgcmV0dXJuIERETU1hdGguYXp2czJzZEUoYSwgMSAtIHosIC12LCBzKTtcbiAgfVxuXG4gIC8vIERlbnNpdHkgb2YgRXJyb3IgUlRcbiAgc3RhdGljIHRhenZzMmdFKHQsIGEsIHosIHYsIHMgPSBERE1NYXRoLnMpIHtcbiAgICBpZiAoIXQpIHJldHVybiAwO1xuXG4gICAgY29uc3QgelByaW1lID0gYSAqIHo7XG4gICAgY29uc3QgYmFzZSA9ICgoTWF0aC5QSSAqIHMgKiogMikgLyBhICoqIDIpICogTWF0aC5leHAoKC16UHJpbWUgKiB2KSAvIHMgKiogMik7XG5cbiAgICBsZXQgayA9IDA7XG4gICAgbGV0IHRlcm0gPSAwO1xuICAgIGxldCBzdW0gPSAwO1xuICAgIGRvIHtcbiAgICAgIGsgKz0gMTtcblxuICAgICAgdGVybSA9IGtcbiAgICAgICAgKiBNYXRoLnNpbigoTWF0aC5QSSAqIHpQcmltZSAqIGspIC8gYSlcbiAgICAgICAgKiBNYXRoLmV4cCgtMC41ICogKCh2ICoqIDIgLyBzICoqIDIpICsgKChNYXRoLlBJICoqIDIgKiBrICoqIDIgKiBzICoqIDIpIC8gYSAqKiAyKSkgKiB0KTtcblxuICAgICAgc3VtICs9IHRlcm07XG4gICAgfSB3aGlsZSAoayA8IDIwMCk7IC8vID8/IEhBQ0tcblxuICAgIHJldHVybiBiYXNlICogc3VtO1xuICB9XG5cbiAgLy8gRGVuc2l0eSBvZiBDb3JyZWN0IFJUXG4gIHN0YXRpYyB0YXp2czJnQyh0LCBhLCB6LCB2LCBzID0gRERNTWF0aC5zKSB7XG4gICAgcmV0dXJuIERETU1hdGgudGF6dnMyZ0UodCwgYSwgMSAtIHosIC12LCBzKTtcbiAgfVxufVxuIiwiXG4vLyBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbmltcG9ydCBERE1NYXRoIGZyb20gJy4vZGRtLW1hdGgnO1xuXG5leHBvcnQgZGVmYXVsdCBERE1NYXRoO1xuIiwiXG4vLyBBZGFwdGVkIGZyb20gIGh0dHBzOi8vcmFvdWwuc29jc2NpLnV2YS5ubC9FWjIvRVoyX25ldy5odG1sXG5cbmZ1bmN0aW9uIHNpZ24ocikge1xuICByZXR1cm4gKChyID4gMCkgPyAxIDogKChyID09PSAwKSA/IDAgOiAtMSkpO1xufVxuXG5mdW5jdGlvbiBsb2dpdChwKSB7XG4gIHJldHVybiBNYXRoLmxvZyhwIC8gKDEgLSBwKSk7XG59XG5cbi8vIEVaLWZ1bmN0aW9uIGZvciBzdGFydGluZyB2YWx1ZXNcbi8vIGlucHV0OiBvYmogLSBPYmplY3Qgd2l0aCBwcm9wZXJ0aWVzXG4vLyAgICBwQyAtIFByb3BvcnRpb24gY29ycmVjdFxuLy8gICAgc2QgLSBzYW1wbGUgc3RhbmRhcmQgZGV2aWF0aW9uIG9mIHRoZSBSVCdzIGluIG1zXG4vLyAgICBtIC0gc2FtcGxlIG1lYW4gb2YgdGhlIFJUJ3MgaW4gbXNcbi8vICAgIHMgLSBkaWZmdXNpb24gc3RhbmRhcmQgZGV2aWF0aW9uXG4vLyByZXR1cm5zOiBPYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHYsIGEsIGFuZCB0MCwgY29udGFpbmluZyBFWi1lc3RpbWF0ZXMgb2YgdGhlc2UgcGFyYW1ldGVyc1xuZXhwb3J0IGZ1bmN0aW9uIGRhdGEyZXooe1xuICBhY2N1cmFjeTogcEMsXG4gIHNkUlQ6IHNkLFxuICBtZWFuUlQ6IG0sXG4gIHMsXG59KSB7XG4gIGNvbnN0IHZydCA9IChzZCAvIDEwMDApICoqIDI7XG4gIGNvbnN0IG1ydCA9IG0gLyAxMDAwO1xuXG4gIGNvbnN0IHMyID0gcyAqKiAyO1xuICBjb25zdCBsID0gbG9naXQocEMpO1xuICBjb25zdCB4ID0gKGwgKiAobCAqIHBDICoqIDIgLSBsICogcEMgKyBwQyAtIDAuNSkpIC8gdnJ0O1xuICBjb25zdCB2ID0gc2lnbihwQyAtIDAuNSkgKiBzICogeCAqKiAoMSAvIDQpO1xuICBjb25zdCBhID0gKHMyICogbG9naXQocEMpKSAvIHY7XG4gIGNvbnN0IHkgPSAoLXYgKiBhKSAvIHMyO1xuICBjb25zdCBtZHQgPSAoKGEgLyAoMiAqIHYpKSAqICgxIC0gTWF0aC5leHAoeSkpKSAvICgxICsgTWF0aC5leHAoeSkpO1xuICBjb25zdCB0MCA9IChtcnQgPyBtcnQgLSBtZHQgOiBudWxsKTsgLy8gY29tcHV0ZSBUZXIgb25seSBpZiBNUlQgd2FzIHByb3ZpZGVkXG5cbiAgY29uc3QgdDBQcmltZSA9IHQwICogMTAwMDtcbiAgcmV0dXJuIHtcbiAgICB2LFxuICAgIGEsXG4gICAgdDA6IHQwUHJpbWUsXG4gICAgcyxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGEyZXoyKCkge1xuXG59XG4iLCIvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbXCJvZmZcIiwgXCJzZWxmXCJdICovXG5cbmltcG9ydCBERE1NYXRoIGZyb20gJ0BkZWNpZGFibGVzL2FjY3VtdWxhYmxlLW1hdGgnO1xuXG5pbXBvcnQgKiBhcyBFWiBmcm9tICcuL2V6Mic7XG5cbnNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHBhcmFtcyA9IEVaLmRhdGEyZXooey4uLmV2ZW50LmRhdGEsIHM6IERETU1hdGguc30pO1xuXG4gIC8vICMjIyMjIEFyYml0cmFyeSBkZWZhdWx0IHZhbHVlcyEhIVxuICBjb25zdCBhID0gIWlzTmFOKHBhcmFtcy5hKSA/IHBhcmFtcy5hIDogMS41O1xuICBjb25zdCB6ID0gIWlzTmFOKHBhcmFtcy56KSA/IHBhcmFtcy56IDogMC41O1xuICBjb25zdCB2ID0gIWlzTmFOKHBhcmFtcy52KSA/IHBhcmFtcy52IDogMDtcbiAgY29uc3QgdDAgPSAhaXNOYU4ocGFyYW1zLnQwKSA/IHBhcmFtcy50MCA6IDEwMDtcbiAgY29uc3QgcyA9ICFpc05hTihwYXJhbXMucykgPyBwYXJhbXMucyA6IERETU1hdGgucztcblxuICBjb25zdCBwcmVkaWN0ZWQgPSB7XG4gICAgYWNjdXJhY3k6IERETU1hdGguYXp2czJwQyhhLCB6LCB2KSxcbiAgICBtZWFuUlQ6IERETU1hdGguYXp2dDBzMm0oYSwgeiwgdiwgdDApLFxuICAgIHNkUlQ6IERETU1hdGguYXp2czJzZChhLCB6LCB2KSxcbiAgfTtcblxuICBzZWxmLnBvc3RNZXNzYWdlKHtcbiAgICBwYXJhbXM6IHtcbiAgICAgIGEsIHosIHYsIHQwLCBzLFxuICAgIH0sXG4gICAgcHJlZGljdGVkLFxuICB9KTtcbn07XG4iXSwibmFtZXMiOlsiRERNTWF0aCIsInMiLCJ0cmlhbHMyc3RhdHMiLCJ0cmlhbHMiLCJzdGF0cyIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwidHJpYWwiLCJvdXRjb21lIiwiY29ycmVjdCIsInJ0cyIsInJ0IiwiZXJyb3IiLCJuciIsInRvdGFsIiwib3ZlcmFsbCIsInNzcyIsInByb3BvcnRpb24iLCJtZWFuUlQiLCJzZFJUIiwiTWF0aCIsInNxcnQiLCJhenZzMnBFIiwiYSIsInoiLCJ2IiwielByaW1lIiwiQSIsImV4cCIsIloiLCJhenZzMnBDIiwiYXp2dDBzMm0iLCJ0MCIsIm1lYW4iLCJhenZzMnNkIiwidmFyaWFuY2UiLCJhenZ0MHMybUUiLCJwaGkiLCJ4IiwieSIsImF6dnMyc2RFIiwiYXp2dDBzMm1DIiwiYXp2czJzZEMiLCJ0YXp2czJnRSIsInQiLCJiYXNlIiwiUEkiLCJrIiwidGVybSIsInN1bSIsInNpbiIsInRhenZzMmdDIiwic2lnbiIsInIiLCJsb2dpdCIsInAiLCJsb2ciLCJkYXRhMmV6IiwiYWNjdXJhY3kiLCJwQyIsInNkIiwibSIsInZydCIsIm1ydCIsInMyIiwibCIsIm1kdCIsInQwUHJpbWUiLCJzZWxmIiwib25tZXNzYWdlIiwiZXZlbnQiLCJwYXJhbXMiLCJFWiIsImRhdGEiLCJpc05hTiIsInByZWRpY3RlZCIsInBvc3RNZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7RUFD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",function(t){return Ba=Ba||ba(ya,Qa),new Worker(Ba,t)});class fa extends ua{static get properties(){return{}}constructor(){super(),this.a=1.2,this.z=.35,this.v=1.5,this.t0=150,this.observed={},this.predicted={},this.working=!1,this.queued=!1,this.worker=new Ua,this.worker.onmessage=t=>{this.working=!1,this.predicted=t.data.predicted,this.a=t.data.params.a,this.z=t.data.params.z,this.v=t.data.params.v,this.t0=t.data.params.t0,this.requestUpdate(),this.dispatchEvent(new CustomEvent("ddm-fit-update",{detail:{a:this.a,z:this.z,v:this.v,t0:this.t0},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.observed),this.working=!0,this.queued=!1)}clear(){this.observed={},this.fit()}set(t){this.observed=structuredClone(t),this.fit()}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }
      `]}render(){return _`
      <div>
        <div>Observed:
          sd = ${this.observed.sdRT?.toFixed(0)},
          sdC = ${this.observed.correctSDRT?.toFixed(0)},
          pC = ${this.observed.accuracy?.toFixed(2)},
          m = ${this.observed.meanRT?.toFixed(0)},
          mC = ${this.observed.correctMeanRT?.toFixed(0)}
        </div>
        <div>Current:
          <var class="math-var a">a</var> = ${this.a.toFixed(2)},
          <var class="math-var z">z</var> = ${this.z.toFixed(2)},
          <var class="math-var v">v</var> = ${this.v.toFixed(2)},
          <var class="math-var t0">t0</var> = ${this.t0.toFixed(0)}
        </div>
        <div>Predicted:
          sd = ${this.predicted.sdRT?.toFixed(0)},
          sdC = ${this.predicted.correctSDRT?.toFixed(0)},
          pC = ${this.predicted.accuracy?.toFixed(2)},
          m = ${this.predicted.meanRT?.toFixed(0)},
          mC = ${this.predicted.correctMeanRT?.toFixed(0)}
        </div>
      </div>
    `}}customElements.define("ddm-fit",fa);class Fa extends ua{static get properties(){return{a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0}}}constructor(){super(),this.a=void 0,this.z=void 0,this.v=void 0,this.t0=void 0}setBoundarySeparation(t){this.a=t.target.value,this.dispatchEvent(new CustomEvent("ddm-parameters-a",{detail:{a:this.a},bubbles:!0}))}setStartingPoint(t){this.z=t.target.value,this.dispatchEvent(new CustomEvent("ddm-parameters-z",{detail:{z:this.z},bubbles:!0}))}setDriftRate(t){this.v=t.target.value,this.dispatchEvent(new CustomEvent("ddm-parameters-v",{detail:{v:this.v},bubbles:!0}))}setNondecisionTime(t){this.t0=t.target.value,this.dispatchEvent(new CustomEvent("ddm-parameters-t0",{detail:{t0:this.t0},bubbles:!0}))}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }

        decidables-slider {
          line-height: 1;
          text-align: center;
        }

        decidables-slider  div {
          margin-bottom: 0.25rem;
        }
      `]}render(){return _`
      <div class="holder">
        ${null!=this.a?_`<decidables-slider ?disabled=${!this.interactive} min="0.01" max="2" step=".01" .value=${this.a.toFixed(2)} @change=${this.setBoundarySeparation.bind(this)} @input=${this.setBoundarySeparation.bind(this)}><div>Boundary Separation<br><span class="math-var">a</span></div></decidables-slider>`:_``}
        ${null!=this.z?_`<decidables-slider ?disabled=${!this.interactive} min="0.01" max="0.99" step=".01" .value=${this.z.toFixed(2)} @change=${this.setStartingPoint.bind(this)} @input=${this.setStartingPoint.bind(this)}><div>Starting Point<br><span class="math-var">z</span></div></decidables-slider>`:_``}
        ${null!=this.v?_`<decidables-slider ?disabled=${!this.interactive} min="0.01" max="5" step=".01" .value=${this.v.toFixed(2)} @change=${this.setDriftRate.bind(this)} @input=${this.setDriftRate.bind(this)}><div>Drift Rate<br><span class="math-var">v</span></div></decidables-slider>`:_``}
        ${null!=this.t0?_`<decidables-slider ?disabled=${!this.interactive} min="0" max="500" step="1" .value=${this.t0.toFixed(0)} @change=${this.setNondecisionTime.bind(this)} @input=${this.setNondecisionTime.bind(this)}><div>Nondecision Time<br><span class="math-var">t</span></div></decidables-slider>`:_``}
      </div>`}}customElements.define("ddm-parameters",Fa);class Ia{static s=1;static trials2stats(t){const e=t.reduce(((t,e)=>{switch(e.outcome){case"correct":t.trials.correct+=1,t.rts.correct+=e.rt;break;case"error":t.trials.error+=1,t.rts.error+=e.rt;break;case"nr":t.trials.nr+=1}return t}),{trials:{total:0,correct:0,error:0,nr:0},rts:{overall:0,correct:0,error:0},sss:{overall:0,correct:0,error:0}});return e.trials.total=e.trials.correct+e.trials.error+e.trials.nr,e.rts.overall=e.rts.correct+e.rts.error,e.proportion={correct:e.trials.correct/e.trials.total,error:e.trials.error/e.trials.total,nr:e.trials.nr/e.trials.total},e.meanRT={overall:e.rts.overall/(e.trials.correct+e.trials.error),correct:e.rts.correct/e.trials.correct,error:e.rts.error/e.trials.error},t.reduce(((t,e)=>{switch(t.sss.overall+=(e.rt-t.meanRT.overall)**2,e.outcome){case"correct":t.sss.correct+=(e.rt-t.meanRT.correct)**2;break;case"error":t.sss.error+=(e.rt-t.meanRT.error)**2}return t}),e),e.sdRT={overall:Math.sqrt(e.sss.overall/(e.trials.correct+e.trials.error-1)),correct:Math.sqrt(e.sss.correct/(e.trials.correct-1)),error:Math.sqrt(e.sss.error/(e.trials.error-1))},e}static azvs2pE(t,e,r,s=Ia.s){const i=t*e,a=Math.exp(-2*r*t/s**2);return(a-Math.exp(-2*r*i/s**2))/(a-1)}static azvs2pC(t,e,r,s=Ia.s){return Ia.azvs2pE(t,1-e,-r,s)}static azvt0s2m(t,e,r,s,i=Ia.s){const a=t*e,n=Math.exp(-2*r*t/i**2)-1;return s+1e3*(-a/r+t/r*((Math.exp(-2*r*a/i**2)-1)/n))}static azvs2sd(t,e,r,s=Ia.s){const i=t*e,a=Math.exp(-2*r*t/s**2)-1,n=Math.exp(-2*r*i/s**2)-1,o=(-r*t**2*(n+4)*n/a**2+((-3*r*t**2+4*r*i*t+s**2*t)*n+4*r*i*t)/a-s**2*i)/r**3;return 1e3*Math.sqrt(o)}static azvt0s2mE(t,e,r,s,i=Ia.s){function a(t,e){return Math.exp(2*r*e/i**2)-Math.exp(2*r*t/i**2)}const n=t*e;return s+1e3*((n*(a(n-t,t)+a(0,n))+2*t*a(n,0))/(r*a(n,t)*a(-t,0)))}static azvs2sdE(t,e,r,s=Ia.s){function i(t,e){return Math.exp(2*r*e/s**2)-Math.exp(2*r*t/s**2)}const a=t*e,n=-2*t*i(0,a)*(2*r*t*i(a,2*t)+s**2*i(0,t)*i(a,t))*Math.exp(2*r*t/s**2)/(r**3*i(0,t)**2*i(a,t)**2)+(4*r*a*(2*t-a)*Math.exp(2*r*(a+t)/s**2)+a*s**2*i(2*a,2*t))/(r**3*i(a,t)**2);return 1e3*Math.sqrt(n)}static azvt0s2mC(t,e,r,s,i=Ia.s){return Ia.azvt0s2mE(t,1-e,-r,s,i)}static azvs2sdC(t,e,r,s=Ia.s){return Ia.azvs2sdE(t,1-e,-r,s)}static tazvs2gE(t,e,r,s,i=Ia.s){if(!t)return 0;const a=e*r,n=Math.PI*i**2/e**2*Math.exp(-a*s/i**2);let o=0,l=0,c=0;do{o+=1,l=o*Math.sin(Math.PI*a*o/e)*Math.exp(-.5*(s**2/i**2+Math.PI**2*o**2*i**2/e**2)*t),c+=l}while(o<200);return n*c}static tazvs2gC(t,e,r,s,i=Ia.s){return Ia.tazvs2gE(t,e,1-r,-s,i)}}class Ca extends(ha(ua)){static get properties(){return{measures:{attribute:"measures",type:Boolean,reflect:!0},means:{attribute:"means",type:Boolean,reflect:!0},sds:{attribute:"sds",type:Boolean,reflect:!0},human:{attribute:"human",type:Boolean,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},seed:{attribute:"seed",type:Number,reflect:!0},a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.scale={time:{min:0,max:1e3,step:1,round:Math.round},evidence:{min:-1,max:1,step:.01,round:Math.round},density:{min:0,max:10,step:.01,round:Math.round}},this.measures=!1,this.means=!1,this.sds=!1,this.resample(),this.human=!1,this.trials=10,this.a=1.2,this.z=.35,this.v=1.5,this.t0=150,this.precision=.005,this.random=null,this.bounds=null,this.startingPoint=null,this.data={},this.model={},this.animate=!1,this.paused=!1,this.alignState()}clear(){this.trials=0,this.data.trials=[]}trial(t={}){this.trials+=1,this.human?this.data.trials.push(t):this.animate=!0}pauseTrial(){Pe(this.renderRoot).select(".path[data-new-trial-ease-time]").interrupt("new").select(".curve").interrupt("new"),this.paused=!0}resumeTrial(){this.paused=!1,this.requestUpdate()}resample(){this.seed=$i(0,1)()}alignPath(t,e,r,s,i){const a=Gi.source(Yi(t))(0,this.precision**.5),n=-e/2,o=e/2,l=e*r-e/2,c=s*this.precision,d=[];for(d.push({t:i,e:l});d.at(-1).e>n&&d.at(-1).e<o;)d.push({t:d.at(-1).t+1e3*this.precision,e:d.at(-1).e+c+Ia.s*a()});return d}alignCorrectDistribution(t,e,r,s){const i=Ia.azvs2pC(t,e,r),a=[{t:0,d:0},{t:this.t0,d:0}];for(let n=this.scale.time.min;n<=this.scale.time.max-s;n+=this.scale.time.step)n>0&&a.push({t:s+n,d:Ia.tazvs2gC(n/1e3,t,e,r)/i});return a}alignErrorDistribution(t,e,r,s){const i=Ia.azvs2pE(t,e,r),a=[{t:0,d:0},{t:this.t0,d:0}];for(let n=this.scale.time.min;n<=this.scale.time.max-s;n+=this.scale.time.step)n>0&&a.push({t:s+n,d:Ia.tazvs2gE(n/1e3,t,e,r)/i});return a}alignState(){this.random=$i.source(Yi(this.seed))(0,1),this.bounds={lower:-this.a/2,upper:this.a/2},this.startingPoint=this.a*this.z-this.a/2,this.human?this.trials=this.data.trials.length:this.data.trials=Array.from({length:this.trials},((t,e)=>{const r=this.random()/1e3*997,s=this.animate&&e===this.trials-1,i=this.alignPath(r,this.a,this.z,this.v,this.t0),a=i.at(-1).e<=this.bounds.lower?"error":i.at(-1).e>=this.bounds.upper?"correct":"nr",n="error"===a?i.at(-2).t+(this.bounds.lower-i.at(-2).e)/(i.at(-1).e-i.at(-2).e)*(1e3*this.precision):"correct"===a?i.at(-2).t+(this.bounds.upper-i.at(-2).e)/(i.at(-1).e-i.at(-2).e)*(1e3*this.precision):null;return{index:e,seed:r,path:i,rt:n,outcome:a,animate:s}}));const t=this.data.trials.filter((t=>!t.animate)).reduce(((t,e)=>(t.correct+="correct"===e.outcome?1:0,t.error+="error"===e.outcome?1:0,t)),{correct:0,error:0});this.data.correctCount=t.correct,this.data.errorCount=t.error,this.data.accuracy=this.trials>0?t.correct/this.trials:NaN;const e=this.data.trials.filter((t=>!t.animate)).reduce(((t,e)=>(t.correct+="correct"===e.outcome?e.rt:0,t.error+="error"===e.outcome?e.rt:0,t)),{correct:0,error:0});this.data.correctMeanRT=t.correct>0?e.correct/t.correct:NaN,this.data.errorMeanRT=t.error>0?e.error/t.error:NaN,this.data.meanRT=this.trials>0?(e.correct+e.error)/(t.correct+t.error):NaN;const r=this.data.trials.filter((t=>!t.animate)).reduce(((t,e)=>(t.correct+="correct"===e.outcome?(e.rt-this.data.correctMeanRT)**2:0,t.error+="error"===e.outcome?(e.rt-this.data.errorMeanRT)**2:0,t.overall+=(e.rt-this.data.meanRT)**2,t)),{correct:0,error:0,overall:0});this.data.correctSDRT=t.correct>1?Math.sqrt(r.correct/(t.correct-1)):NaN,this.data.errorSDRT=t.error>1?Math.sqrt(r.error/(t.error-1)):NaN,this.data.sdRT=this.trials>1?Math.sqrt(r.overall/(this.trials-1)):NaN,this.model.accuracy=Ia.azvs2pC(this.a,this.z,this.v),this.model.correctMeanRT=Ia.azvt0s2mC(this.a,this.z,this.v,this.t0),this.model.errorMeanRT=Ia.azvt0s2mE(this.a,this.z,this.v,this.t0),this.model.correctSDRT=Ia.azvs2sdC(this.a,this.z,this.v),this.model.errorSDRT=Ia.azvs2sdE(this.a,this.z,this.v),this.model.correctDist=this.alignCorrectDistribution(this.a,this.z,this.v,this.t0),this.model.errorDist=this.alignErrorDistribution(this.a,this.z,this.v,this.t0),this.dispatchEvent(new CustomEvent("ddm-model-output",{detail:{data:this.data,model:this.model},bubbles:!0}))}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;

          width: 27rem;
          height: 18rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        /*  
          UNDERLAYER
        */
        .background {
          fill: var(---color-element-background);
          stroke: none;
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title {
          font-weight: 600;

          fill: currentColor;
        }

        .axis path,
        .axis line {
          stroke: var(---color-element-border);
          /* shape-rendering: crispEdges; */
        }

        .tick {
          font-size: 0.75rem;
        }

        /*  
          CONTENT
        */
        .line {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .curve {
          stroke-width: 2;
        }

        .path .curve {
          opacity: 0.5;

          fill: none;

          transition: opacity 0.5s;
        }

        .path.highlight .curve {
          filter: url("#shadow-2");
          opacity: 1;
        }

        .path.correct .curve {
          stroke: var(---color-correct);
        }

        .path.error .curve {
          stroke: var(---color-error);
        }

        .stop-0 {
          stop-color: var(---color-correct);
        }

        .stop-100 {
          stop-color: var(---color-error);
        }

        .path.animate .curve {
          opacity: 1;

          stroke: url("#path-animate");
        }

        .dist.correct .curve {
          fill: var(---color-correct-light);
          stroke: var(---color-correct);
        }

        .dist.error .curve {
          fill: var(---color-error-light);
          stroke: var(---color-error);
        }

        .rt.correct .mark {
          stroke: var(---color-correct);
          stroke-width: 1;
        }

        .rt.error .mark {
          stroke: var(---color-error);
          stroke-width: 1;
        }

        .accuracy.model .bar {
          stroke: none;
        }

        .accuracy.model.correct .bar {
          fill: var(---color-correct);
        }

        .accuracy.model.error .bar {
          fill: var(---color-error);
        }

        .accuracy.data .mark {
          stroke-width: 2;
        }

        .accuracy.data.correct .mark {
          stroke: var(---color-correct-light);
        }

        .accuracy.data.error .mark {
          stroke: var(---color-error-light);
        }

        /*
          OVERLAYER
        */
        .interactive {
          filter: url("#shadow-2");
          outline: none;
        }

        .interactive:hover {
          filter: url("#shadow-4");
        }

        .interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .interactive:focus {
          filter: url("#shadow-8");
        }

        .boundary {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .boundary.interactive {
          cursor: ns-resize;
        }

        .drift {
          pointer-events: visible;

          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-dasharray: 8 4;
          stroke-width: 2;
        }

        .drift.interactive {
          cursor: ns-resize;
        }

        .drift .arrow {
          stroke-dasharray: none;
        }

        .t0z.interactive {
          cursor: move;
        }

        .t0z .point {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .measure {
          stroke-width: 2;
        }

        .measure .label {
          font-size: 0.75rem;

          fill: currentColor;
        }

        .measure.a .line {
          stroke: var(---color-a);
        }

        .measure.a .label {
          dominant-baseline: auto;
          text-anchor: end;
        }

        .measure.z .line {
          stroke: var(---color-z);
        }

        .measure.z .label {
          dominant-baseline: hanging;
          text-anchor: start;
        }

        .measure.v .line {
          stroke: var(---color-v);
        }

        .measure.v .label {
          dominant-baseline: auto;
          text-anchor: start;
        }

        .measure.t0 .line {
          stroke: var(---color-t0);
        }

        .measure.t0 .label {
          dominant-baseline: auto;
          text-anchor: middle;
        }

        .sd .indicator,
        .mean .indicator {
          stroke-width: 2;
        }

        .sd.model .indicator,
        .mean.model .indicator {
          stroke-dasharray: 2 2;
        }

        .sd.data .indicator,
        .mean.data .indicator {
          stroke-dasharray: 1 1;
        }

        .sd.correct .indicator,
        .mean.correct .indicator {
          stroke: var(---color-correct-dark);
        }

        .sd.error .indicator,
        .mean.error .indicator {
          stroke: var(---color-error-dark);
        }

        .rt-label rect {
          filter: url("#shadow-2");

          fill: var(--color-background);
          rx: 4;
        }

        .rt-label text {
          font-size: 0.75rem;
          
          text-anchor: middle;
        }

        .rt-label.correct text {
          dominant-baseline: auto;
        }

        .rt-label.error text {
          dominant-baseline: hanging;
        }
      `]}render(){return _``}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,r=this.height;let s,i;e/r>1.5?(i=r,s=1.5*i):(s=e,i=s/1.5);const a=1*this.rem,n=3*this.rem,o=3.75*this.rem,l=i-(a+n),c=s-(o+3.25*this.rem),d=.75*this.rem,h=.5*l,u=.25*l-d,g=.75*this.rem,p=.9*c,m=.1*c-g,b=parseInt(this.getComputedStyleValue("---transition-duration"),10),y=qi().domain([this.scale.time.min,this.scale.time.max]).range([0,p]),Q=qi().domain([this.scale.evidence.min,this.scale.evidence.max]).range([h,0]),B=qi().domain([this.scale.density.min,this.scale.density.max]).range([u,0]),U=qi().domain([this.scale.density.min,this.scale.density.max]).range([0,u]),f=qi().domain([0,1]).range([0,l]),F=hr().subject(((t,e)=>({x:y(e.t0),y:Q(e.startingPoint)}))).on("start",(t=>{Pe(t.currentTarget).classed("dragging",!0)})).on("drag",(t=>{this.drag=!0;const e=!!t.sourceEvent.shiftKey&&(Math.abs(t.x-t.subject.x)>Math.abs(t.y-t.subject.y)?"t0":"z");let r=y.invert(t.x),s=(Q.invert(t.y)+this.a/2)/this.a;r="z"===e?y.invert(t.subject.x):r<0?0:r>500?500:r,s="t0"===e?(Q.invert(t.subject.y)+this.a/2)/this.a:s<.01?.01:s>.99?.99:s,this.t0=r,this.z=s,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-t0",{detail:{t0:this.t0},bubbles:!0})),this.dispatchEvent(new CustomEvent("ddm-model-z",{detail:{z:this.z},bubbles:!0}))})).on("end",(t=>{Pe(t.currentTarget).classed("dragging",!1),this.drag=!1})),I=hr().on("start",(t=>{Pe(t.currentTarget).classed("dragging",!0)})).on("drag",(t=>{this.drag=!0;let e=(Q.invert(t.y)-this.startingPoint)/(y.invert(t.x)-this.t0)*1e3;e=e<.01?.01:e>5?5:e,this.v=e,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-v",{detail:{v:this.v},bubbles:!0}))})).on("end",(t=>{Pe(t.currentTarget).classed("dragging",!1),this.drag=!1})),C=hr().subject(((t,e)=>({x:0,y:Q(e.value)}))).on("start",(t=>{Pe(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;let r=Q.invert(t.y);r=r<this.scale.evidence.min?this.scale.evidence.min:r>this.scale.evidence.max?this.scale.evidence.max:"upper"===e.bound&&r<.005?.005:"lower"===e.bound&&r>-.005?-.005:r,this.a=Math.abs(2*r),this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-a",{detail:{a:this.a},bubbles:!0}))})).on("end",(t=>{Pe(t.currentTarget).classed("dragging",!1),this.drag=!1})),x=na().x((t=>y(t.t))).y((t=>Q(t.e))),v=na().x((t=>y(t.t))).y((t=>B(t.d))),A=na().x((t=>y(t.t))).y((t=>U(t.d))),E=Pe(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),R=E.enter().append("svg").classed("main",!0).html(ua.svgDefs),N=R.append("defs");N.append("marker").attr("id","measure-arrow").attr("orient","auto-start-reverse").attr("markerUnits","userSpaceOnUse").attr("viewBox","-5 -5 10 10").attr("refX","2").attr("refY","0").attr("markerWidth","10").attr("markerHeight","10").append("path").attr("stroke","context-stroke").attr("fill","context-stroke").attr("d","M -3 -3 l 6 3 l -6 3 z"),N.append("marker").attr("id","model-sd-cap").attr("orient","auto-start-reverse").attr("markerUnits","userSpaceOnUse").attr("viewBox","-5 -5 10 10").attr("refX","0").attr("refY","0").attr("markerWidth","10").attr("markerHeight","10").append("path").attr("stroke","context-stroke").attr("fill","context-stroke").attr("stroke-width","2").attr("d","M 0 -4 l 0 8"),N.append("marker").attr("id","data-sd-cap").attr("orient","auto-start-reverse").attr("markerUnits","userSpaceOnUse").attr("viewBox","-5 -5 10 10").attr("refX","0").attr("refY","0").attr("markerWidth","10").attr("markerHeight","10").append("path").attr("stroke","context-stroke").attr("fill","context-stroke").attr("stroke-width","2").attr("d","M 0 -3 l 0 6");const L=N.append("linearGradient").attr("id","path-animate").attr("gradientUnits","userSpaceOnUse").attr("color-interpolation","linearRGB").attr("x1","0").attr("x2","0").attr("y1",Q(this.bounds.upper)).attr("y2",Q(this.bounds.lower));L.append("stop").classed("stop-0",!0).attr("offset","0%"),L.append("stop").classed("stop-100",!0).attr("offset","100%");const w=R.merge(E).attr("viewBox",`0 0 ${s} ${i}`),S=R.append("g").classed("plot evidence",!0),D=R.append("g").classed("plot density correct",!0),M=R.append("g").classed("plot density error",!0),k=R.append("g").classed("plot accuracy",!0),T=w.select(".plot.evidence").attr("transform",`translate(${o}, ${a+u+d})`),H=w.select(".plot.density.correct").attr("transform",`translate(${o}, ${a})`),$=w.select(".plot.density.error").attr("transform",`translate(${o}, ${a+u+h+2*d})`),G=w.select(".plot.accuracy").attr("transform",`translate(${o+p+g}, ${a})`);S.append("clipPath").attr("id","clip-evidence").append("rect"),T.select("clipPath rect").attr("y",Q(this.bounds.upper)).attr("height",Q(this.bounds.lower)-Q(this.bounds.upper)+1).attr("width",p+1);const z=S.append("g").classed("underlayer",!0),Y=D.append("g").classed("underlayer",!0),V=M.append("g").classed("underlayer",!0),_=k.append("g").classed("underlayer",!0),W=T.select(".underlayer"),X=H.select(".underlayer"),J=$.select(".underlayer"),K=G.select(".underlayer");S.append("g").classed("content",!0).append("g").classed("paths",!0),D.append("g").classed("content",!0),M.append("g").classed("content",!0),k.append("g").classed("content",!0);const Z=T.select(".content"),P=H.select(".content"),O=$.select(".content"),j=G.select(".content");S.append("g").classed("overlayer",!0),D.append("g").classed("overlayer",!0),M.append("g").classed("overlayer",!0),k.append("g").classed("overlayer",!0);const q=T.select(".overlayer"),tt=H.select(".overlayer"),et=$.select(".overlayer");z.append("rect").classed("background",!0),Y.append("rect").classed("background",!0),V.append("rect").classed("background",!0),W.select(".background").transition().duration(this.drag?0:b).ease(pi).attr("y",Q(this.bounds.upper)).attr("height",Q(this.bounds.lower)-Q(this.bounds.upper)).attr("width",p),X.select(".background").transition().duration(b).ease(pi).attr("height",u).attr("width",p),J.select(".background").transition().duration(b).ease(pi).attr("height",u).attr("width",p),V.append("g").classed("axis time",!0);var rt;J.select(".axis.time").attr("transform",`translate(0, ${u+.25*this.rem})`).transition().duration(b).ease(pi).call((rt=y,Lt(It,rt))).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);V.append("text").classed("title time",!0).attr("text-anchor","middle").append("tspan").classed("name",!0).text("Time (ms)"),J.select(".title.time").transition().duration(b).ease(pi).attr("transform",`translate(${p/2}, ${u+2.5*this.rem})`),z.append("g").classed("axis evidence",!0),Y.append("g").classed("axis density correct",!0),V.append("g").classed("axis density error",!0),_.append("g").classed("axis accuracy",!0);const st=W.select(".axis.evidence").attr("transform",`translate(${-.25*this.rem}, 0)`),it=X.select(".axis.density.correct").attr("transform",`translate(${-.25*this.rem}, 0)`),at=J.select(".axis.density.error").attr("transform",`translate(${-.25*this.rem}, 0)`),nt=K.select(".axis.accuracy").attr("transform",`translate(${m+.25*this.rem}, 0)`),ot=st.transition().duration(b).ease(pi).call(wt(Q)).attr("font-size",null).attr("font-family",null),lt=it.transition().duration(b).ease(pi).call(wt(B).ticks(2)).attr("font-size",null).attr("font-family",null),ct=at.transition().duration(b).ease(pi).call(wt(U).ticks(2)).attr("font-size",null).attr("font-family",null),dt=nt.transition().duration(b).ease(pi).call(function(t){return Lt(Ft,t)}(f)).attr("font-size",null).attr("font-family",null);ot.selectAll("line, path").attr("stroke",null),lt.selectAll("line, path").attr("stroke",null),ct.selectAll("line, path").attr("stroke",null),dt.selectAll("line, path").attr("stroke",null);const ht=z.append("text").classed("title evidence",!0).attr("text-anchor","middle"),ut=Y.append("text").classed("title density correct",!0).attr("text-anchor","middle"),gt=V.append("text").classed("title density error",!0).attr("text-anchor","middle"),pt=_.append("text").classed("title accuracy",!0).attr("text-anchor","middle");ht.append("tspan").classed("name",!0).text("Evidence"),ut.append("tspan").classed("name",!0).text("Density"),gt.append("tspan").classed("name",!0).text("Density"),pt.append("tspan").classed("name",!0).text("Accuracy"),W.select(".title.evidence").transition().duration(b).ease(pi).attr("transform",`translate(${-2.5*this.rem}, ${h/2})rotate(-90)`),X.select(".title.density.correct").transition().duration(b).ease(pi).attr("transform",`translate(${-2.5*this.rem}, ${u/2})rotate(-90)`),J.select(".title.density.error").transition().duration(b).ease(pi).attr("transform",`translate(${-2.5*this.rem}, ${u/2})rotate(-90)`),K.select(".title.accuracy").transition().duration(b).ease(pi).attr("transform",`translate(${m+2.25*this.rem}, ${l/2})rotate(90)`);const mt=Z.select(".paths").selectAll(".path").data(this.data.trials.filter((t=>void 0!==t.path))),bt=je(),yt=mt.enter().append("g").classed("path",!0).attr("data-new-trial-ease-time",0).on("pointerenter",((t,e)=>{if(!this.drag){Pe(t.currentTarget).classed("highlight",!0).raise();const r=q.append("g").classed(`rt-label ${e.outcome}`,!0),s=r.append("rect"),i=r.append("text").text(`RT = ${e.rt.toFixed()}`).attr("x",y(e.rt)).attr("y","correct"===e.outcome?Q(this.bounds.upper)-.25*this.rem:Q(this.bounds.lower)+.125*this.rem).node().getBBox();s.attr("x",i.x-.125*this.rem).attr("y",i.y+.125*this.rem).attr("width",i.width+.25*this.rem).attr("height",i.height-.25*this.rem),bt.set(t.currentTarget,r)}})).on("pointerout",((t,e)=>{this.drag||(Pe(t.currentTarget).classed("highlight",!1).lower(),t.currentTarget.parentNode.insertBefore(t.currentTarget,t.currentTarget.parentNode.children[e.index]),bt.get(t.currentTarget).remove())}));yt.append("path").classed("curve",!0).attr("clip-path","url(#clip-evidence)").attr("pathLength",1).attr("stroke-dashoffset",1);const Qt=yt.merge(mt).attr("class",(t=>`path ${t.outcome}`));Qt.select(".curve").transition().duration(this.drag?0:b).ease(pi).attrTween("d",((t,e,r)=>{const s=r[e],i=is(void 0!==s.a?s.a:this.a,this.a),a=is(void 0!==s.z?s.z:this.z,this.z),n=is(void 0!==s.v?s.v:this.v,this.v),o=is(void 0!==s.t0?s.t0:this.t0,this.t0);return e=>{s.a=i(e),s.z=a(e),s.v=n(e),s.t0=o(e);const r=this.alignPath(t.seed,s.a,s.z,s.v,s.t0);return x(r)}}));const Bt=Qt.filter((t=>t.animate&&!this.paused));if(!Bt.empty()){const t=Bt.attr("data-new-trial-ease-time"),e=e=>qi().domain([0,1]).range([t,1])(e),r=e=>r=>qi().domain([e(t),1]).range([0,1])(e(r));Bt.classed("animate",!0).select(".curve").attr("stroke-dasharray",1),Bt.transition("new").duration((e=>Math.floor(1.5*e.rt*(1-t)))).ease(e).attr("data-new-trial-ease-time",1).select(".curve").attrTween("stroke-dashoffset",((t,e,s)=>{const i=is(s[e].getAttribute("stroke-dashoffset"),0);return t=>i(r(gi)(t))})).on("end",((t,e,r)=>{Pe(r[e].parentElement).classed("animate",!1).attr("data-new-trial-ease-time",null),t.animate=!1,this.animate=!1,this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("accumulable-response",{detail:{outcome:t.outcome,data:this.data,model:this.model},bubbles:!0}))}))}const Ut=Qt.filter((t=>t.animate&&this.paused));if(!Ut.empty()){const t=Ut.attr("data-new-trial-ease-time");Ut.classed("animate",!0).select(".curve").attr("stroke-dasharray",1).attr("stroke-dashoffset",(()=>is(1,0)(gi(t))))}Qt.filter((t=>!t.animate)).attr("data-new-trial-ease-time",null),mt.exit().remove();const ft=P.selectAll(".dist.correct").data([this.model.correctDist]),Ct=O.selectAll(".dist.error").data([this.model.errorDist]),xt=ft.enter().append("g").classed("dist correct",!0),vt=Ct.enter().append("g").classed("dist error",!0);xt.append("path").classed("curve",!0),vt.append("path").classed("curve",!0),xt.merge(ft).select(".curve").transition().duration(this.drag?0:b).ease(pi).attrTween("d",((t,e,r)=>{const s=r[e],i=is(void 0!==s.a?s.a:this.a,this.a),a=is(void 0!==s.z?s.z:this.z,this.z),n=is(void 0!==s.v?s.v:this.v,this.v),o=is(void 0!==s.t0?s.t0:this.t0,this.t0);return t=>{s.a=i(t),s.z=a(t),s.v=n(t),s.t0=o(t);const e=this.alignCorrectDistribution(s.a,s.z,s.v,s.t0);return v(e)}})),vt.merge(Ct).select(".curve").transition().duration(this.drag?0:b).ease(pi).attrTween("d",((t,e,r)=>{const s=r[e],i=is(void 0!==s.a?s.a:this.a,this.a),a=is(void 0!==s.z?s.z:this.z,this.z),n=is(void 0!==s.v?s.v:this.v,this.v),o=is(void 0!==s.t0?s.t0:this.t0,this.t0);return t=>{s.a=i(t),s.z=a(t),s.v=n(t),s.t0=o(t);const e=this.alignErrorDistribution(s.a,s.z,s.v,s.t0);return A(e)}})),ft.exit().remove(),Ct.exit().remove();const At=P.selectAll(".rt.correct").data(this.data.trials.filter((t=>"correct"===t.outcome&&t.rt<this.scale.time.max))),Et=O.selectAll(".rt.error").data(this.data.trials.filter((t=>"error"===t.outcome&&t.rt<this.scale.time.max))),Rt=At.enter().append("g").classed("rt correct",!0),Nt=Et.enter().append("g").classed("rt error",!0);Rt.append("line").classed("mark",!0),Nt.append("line").classed("mark",!0),Rt.merge(At).filter((t=>!t.animate)).select(".mark").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t.rt))).attr("x2",(t=>y(t.rt))).attr("y1",B(0)+.125*this.rem).attr("y2",B(0)+.675*this.rem),Nt.merge(Et).filter((t=>!t.animate)).select(".mark").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t.rt))).attr("x2",(t=>y(t.rt))).attr("y1",U(0)-.125*this.rem).attr("y2",U(0)-.675*this.rem),At.exit().remove(),Et.exit().remove();const St=j.selectAll(".accuracy.model").data([this.model.accuracy,1-this.model.accuracy]),Dt=St.enter().append("g").attr("class",((t,e)=>"accuracy model "+(0===e?"correct":"error")));Dt.append("rect").classed("bar",!0).attr("x",0),Dt.merge(St).select("rect").transition().duration(this.drag?0:b).ease(pi).attr("y",((t,e)=>f(0===e?0:1-t))).attr("width",m).attr("height",(t=>f(t))),St.exit().remove();const Mt=j.selectAll(".accuracy.data").data(Number.isNaN(this.data.accuracy)?[]:[this.data.accuracy]),kt=Mt.enter().append("g").classed("accuracy data",!0);kt.append("line").classed("mark",!0);const Tt=kt.merge(Mt).attr("class",(t=>"accuracy data "+(t<this.model.accuracy.correct?"correct":"error")));Tt.select(".mark").transition().duration(this.drag?0:b).ease(pi).attr("x1",0+.25*this.rem).attr("x2",m-.25*this.rem).attr("y1",(t=>f(t)-1)).attr("y2",(t=>f(t)-1)),Mt.exit().remove();const Ht=q.selectAll(".boundary").data([{bound:"upper",value:this.bounds.upper},{bound:"lower",value:this.bounds.lower}]),$t=Ht.enter().append("g").attr("class",((t,e)=>"boundary "+(0===e?"correct":"error")));$t.append("line").classed("line",!0);const Gt=$t.merge(Ht).attr("tabindex",this.interactive?0:null).classed("interactive",this.interactive).on("keydown",this.interactive?(t,e)=>{if(["ArrowUp","ArrowDown"].includes(t.key)){let r=this.a;switch(t.key){case"ArrowUp":r+="upper"===e.bound?t.shiftKey?.01:.1:t.shiftKey?-.01:-.1;break;case"ArrowDown":r+="upper"===e.bound?t.shiftKey?-.01:-.1:t.shiftKey?.01:.1}r=r<.01?.01:r>2*this.scale.evidence.max?2*this.scale.evidence.max:r,this.a=r,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-a",{detail:{a:this.a},bubbles:!0})),t.preventDefault()}}:null);(this.firstUpdate||t.has("interactive"))&&(this.interactive?Gt.call(C):Gt.on(".drag",null)),Gt.select(".line").transition().duration(this.drag?0:b).ease(pi).attr("x1",y(this.scale.time.min)).attr("x2",y(this.scale.time.max)).attr("y1",(t=>Q(t.value))).attr("y2",(t=>Q(t.value))),Ht.exit().remove();const zt=q.selectAll(".drift").data([{v:this.v,t0:this.t0,startingPoint:this.startingPoint}]),Yt=zt.enter().append("g").classed("drift",!0);Yt.append("line").classed("line",!0),Yt.append("path").classed("arrow",!0);const Vt=Yt.merge(zt).attr("tabindex",this.interactive?0:null).classed("interactive",this.interactive).on("keydown",this.interactive?t=>{if(["ArrowUp","ArrowDown"].includes(t.key)){let e=this.v;switch(t.key){case"ArrowUp":e+=t.shiftKey?.01:.1;break;case"ArrowDown":e-=t.shiftKey?.01:.1}e=e<.01?.01:e>5?5:e,this.v=e,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-v",{detail:{v:this.v},bubbles:!0})),t.preventDefault()}}:null);(this.firstUpdate||t.has("interactive"))&&(this.interactive?Vt.call(I):Vt.on(".drag",null));const _t=(Q(0)-Q(1))/(y(1)-y(0));Vt.transition().duration(this.drag?0:b).ease(pi).attr("transform",(t=>`translate(${y(t.t0)}, ${Q(t.startingPoint)})\n          rotate(${-Math.atan(t.v/1e3*_t)*(180/Math.PI)})`)),Vt.select(".line").attr("x2",y(200)),Vt.select(".arrow").attr("d",`\n        M ${y(200)-.5*this.rem},${.5*-this.rem}\n        l ${.5*this.rem},${.5*this.rem}\n        l ${.5*-this.rem},${.5*this.rem}\n      `),zt.exit().remove();const Wt=q.selectAll(".t0z").data([{t0:this.t0,startingPoint:this.startingPoint}]),Xt=Wt.enter().append("g").classed("t0z",!0);Xt.append("line").classed("line",!0),Xt.append("circle").classed("point",!0);const Jt=Xt.merge(Wt).attr("tabindex",this.interactive?0:null).classed("interactive",this.interactive).on("keydown",this.interactive?t=>{if(["ArrowUp","ArrowDown"].includes(t.key)){let e=this.z;switch(t.key){case"ArrowUp":e+=t.shiftKey?.01:.1;break;case"ArrowDown":e-=t.shiftKey?.01:.1}e=e<.01?.01:e>.99?.99:e,this.z=e,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-z",{detail:{z:this.z},bubbles:!0})),t.preventDefault()}if(["ArrowLeft","ArrowRight"].includes(t.key)){let e=this.t0;switch(t.key){case"ArrowRight":e+=t.shiftKey?1:10;break;case"ArrowLeft":e-=t.shiftKey?1:10}e=e<0?0:e>500?500:e,this.t0=e,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-t0",{detail:{t0:this.t0},bubbles:!0})),t.preventDefault()}}:null);(this.firstUpdate||t.has("interactive"))&&(this.interactive?Jt.call(F):Jt.on(".drag",null)),Jt.select(".line").transition().duration(this.drag?0:b).ease(pi).attr("x1",y(0)).attr("x2",(t=>y(t.t0))).attr("y1",(t=>Q(t.startingPoint))).attr("y2",(t=>Q(t.startingPoint))),Jt.select(".point").transition().duration(this.drag?0:b).ease(pi).attr("cx",(t=>y(t.t0))).attr("cy",(t=>Q(t.startingPoint))),Wt.exit().remove();const Kt=q.selectAll(".measure.a").data(this.measures?[this.a]:[]),Zt=Kt.enter().append("g").classed("measure a",!0);Zt.append("line").classed("line",!0).attr("marker-start","url(#measure-arrow)").attr("marker-end","url(#measure-arrow)");const Pt=Zt.append("text").classed("label",!0);Pt.append("tspan").classed("a math-var",!0).text("a"),Pt.append("tspan").classed("equals",!0).text(" = "),Pt.append("tspan").classed("value",!0);const Ot=Zt.merge(Kt);Ot.select(".line").transition().duration(this.drag?0:b).ease(pi).attr("x1",y(this.scale.time.max)-.75*this.rem).attr("y1",Q(this.bounds.upper)+2).attr("x2",y(this.scale.time.max)-.75*this.rem).attr("y2",Q(this.bounds.lower)-2);Ot.select(".label").transition().duration(this.drag?0:b).ease(pi).attr("x",y(this.scale.time.max)).attr("y",Q(this.bounds.upper)-.25*this.rem).select(".value").text(Si(".2f")(this.a)),Kt.exit().remove();const jt=q.selectAll(".measure.z").data(this.measures?[this.z]:[]),qt=jt.enter().append("g").classed("measure z",!0);qt.append("line").classed("line",!0).attr("marker-start","url(#measure-arrow)").attr("marker-end","url(#measure-arrow)");const te=qt.append("text").classed("label",!0);te.append("tspan").classed("z math-var",!0).text("z"),te.append("tspan").classed("equals",!0).text(" = "),te.append("tspan").classed("value",!0);const ee=qt.merge(jt);ee.select(".line").transition().duration(this.drag?0:b).ease(pi).attr("x1",y(this.scale.time.min)+.75*this.rem).attr("y1",Q(this.startingPoint)+2).attr("x2",y(this.scale.time.min)+.75*this.rem).attr("y2",Q(this.bounds.lower)-2);ee.select(".label").transition().duration(this.drag?0:b).ease(pi).attr("x",y(this.scale.time.min)).attr("y",Q(this.bounds.lower)+.125*this.rem).select(".value").text(Si(".0%")(this.z)),jt.exit().remove();const re=q.selectAll(".measure.v").data(this.measures?[this.v]:[]),se=re.enter().append("g").classed("measure v",!0);se.append("path").classed("line",!0).attr("marker-start","url(#measure-arrow)").attr("marker-end","url(#measure-arrow)");const ie=se.append("text").classed("label",!0);ie.append("tspan").classed("v math-var",!0).text("v"),ie.append("tspan").classed("equals",!0).text(" = "),ie.append("tspan").classed("value",!0);const ae=Math.atan(this.v/1e3*_t),ne=y(200)-y(0)+.75*this.rem,oe=Math.cos(ae)*ne,le=Math.sin(ae)*ne,ce=se.merge(re);ce.select(".line").transition().duration(this.drag?0:b).ease(pi).attr("d",`\n        M ${y(this.t0+200)+.75*this.rem}, ${Q(this.startingPoint)}\n        A ${y(200)-y(0)} ${y(200)-y(0)} 0 0 0 ${y(this.t0)+oe} ${Q(this.startingPoint)-le}\n      `);ce.select(".label").transition().duration(this.drag?0:b).ease(pi).attr("x",y(this.t0+200)+.5*this.rem).attr("y",Q(this.bounds.upper)-.25*this.rem).select(".value").text(Si(".2f")(this.v)),re.exit().remove();const de=q.selectAll(".measure.t0").data(this.measures?[this.t0]:[]),he=de.enter().append("g").classed("measure t0",!0);he.append("line").classed("line",!0).attr("marker-start","url(#measure-arrow)").attr("marker-end","url(#measure-arrow)");const ue=he.append("text").classed("label",!0);ue.append("tspan").classed("t0 math-var",!0).text("t"),ue.append("tspan").classed("equals",!0).text(" = "),ue.append("tspan").classed("value",!0);const ge=he.merge(de);ge.select(".line").transition().duration(this.drag?0:b).ease(pi).attr("x1",y(0)+2).attr("y1",Q(this.startingPoint)-.75*this.rem).attr("x2",y(this.t0)-2).attr("y2",Q(this.startingPoint)-.75*this.rem);ge.select(".label").transition().duration(this.drag?0:b).ease(pi).attr("x",y(this.t0)+.25*this.rem).attr("y",Q(this.bounds.upper)-.25*this.rem).select(".value").text(Si("d")(this.t0)),de.exit().remove();const pe=tt.selectAll(".model.mean.correct").data(this.means?[this.model.correctMeanRT]:[]),me=et.selectAll(".model.mean.error").data(this.means?[this.model.errorMeanRT]:[]),be=pe.enter().append("g").classed("model mean correct",!0),ye=me.enter().append("g").classed("model mean error",!0);be.append("line").classed("indicator",!0),ye.append("line").classed("indicator",!0);be.merge(pe).select(".indicator").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t))).attr("x2",(t=>y(t))).attr("y1",B(this.scale.density.min)).attr("y2",B(this.scale.density.max));ye.merge(me).select(".indicator").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t))).attr("x2",(t=>y(t))).attr("y1",U(this.scale.density.min)).attr("y2",U(this.scale.density.max)),pe.exit().remove(),me.exit().remove();const Qe=tt.selectAll(".data.mean.correct").data(this.means&&!Number.isNaN(this.data.correctMeanRT)?[this.data.correctMeanRT]:[]),Be=et.selectAll(".data.mean.error").data(this.means&&!Number.isNaN(this.data.errorMeanRT)?[this.data.errorMeanRT]:[]),Ue=Qe.enter().append("g").classed("data mean correct",!0),fe=Be.enter().append("g").classed("data mean error",!0);Ue.append("line").classed("indicator",!0),fe.append("line").classed("indicator",!0);Ue.merge(Qe).select(".indicator").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t))).attr("x2",(t=>y(t))).attr("y1",B(0)+.125*this.rem).attr("y2",B(0)+.675*this.rem);fe.merge(Be).select(".indicator").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t))).attr("x2",(t=>y(t))).attr("y1",U(0)-.125*this.rem).attr("y2",U(0)-.675*this.rem),Qe.exit().remove(),Be.exit().remove();const Fe=tt.selectAll(".model.sd.correct").data(this.sds?[{mean:this.model.correctMeanRT,sd:this.model.correctSDRT}]:[]),Ie=et.selectAll(".model.sd.error").data(this.sds?[{mean:this.model.errorMeanRT,sd:this.model.errorSDRT}]:[]),Ce=Fe.enter().append("g").classed("model sd correct",!0),xe=Ie.enter().append("g").classed("model sd error",!0);Ce.append("line").classed("indicator",!0).attr("marker-start","url(#model-sd-cap)").attr("marker-end","url(#model-sd-cap)"),xe.append("line").classed("indicator",!0).attr("marker-start","url(#model-sd-cap)").attr("marker-end","url(#model-sd-cap)");Ce.merge(Fe).select(".indicator").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t.mean-t.sd/2))).attr("x2",(t=>y(t.mean+t.sd/2))).attr("y1",B(5)).attr("y2",B(5));xe.merge(Ie).select(".indicator").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t.mean-t.sd/2))).attr("x2",(t=>y(t.mean+t.sd/2))).attr("y1",U(5)).attr("y2",U(5)),Fe.exit().remove(),Ie.exit().remove();const ve=tt.selectAll(".data.sd.correct").data(!this.sds||Number.isNaN(this.data.correctMeanRT)||Number.isNaN(this.data.correctSDRT)?[]:[{mean:this.data.correctMeanRT,sd:this.data.correctSDRT}]),Ae=et.selectAll(".data.sd.error").data(!this.sds||Number.isNaN(this.data.erroMeanRT)||Number.isNaN(this.data.errorSDRT)?[]:[{mean:this.data.errorMeanRT,sd:this.data.errorSDRT}]),Ee=ve.enter().append("g").classed("data sd correct",!0),Re=Ae.enter().append("g").classed("data sd error",!0);Ee.append("line").classed("indicator",!0).attr("marker-start","url(#data-sd-cap)").attr("marker-end","url(#data-sd-cap)"),Re.append("line").classed("indicator",!0).attr("marker-start","url(#data-sd-cap)").attr("marker-end","url(#data-sd-cap)");Ee.merge(ve).select(".indicator").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t.mean-t.sd/2))).attr("x2",(t=>y(t.mean+t.sd/2))).attr("y1",B(0)+.375*this.rem).attr("y2",B(0)+.375*this.rem);Re.merge(Ae).select(".indicator").transition().duration(this.drag?0:b).ease(pi).attr("x1",(t=>y(t.mean-t.sd/2))).attr("x2",(t=>y(t.mean+t.sd/2))).attr("y1",U(0)-.375*this.rem).attr("y2",U(0)-.375*this.rem),ve.exit().remove(),Ae.exit().remove(),this.firstUpdate=!1}}customElements.define("ddm-model",Ca);class xa extends(ha(ua)){static get properties(){return{coherence:{attribute:"coherence",type:Number,reflect:!0},count:{attribute:"count",type:Number,reflect:!0},probability:{attribute:"probability",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},wait:{attribute:"wait",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},lifetime:{attribute:!1,type:Number,reflect:!1},speed:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.coherence=.5,this.count=100,this.probability=.5,this.duration=2e3,this.wait=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.lifetime=400,this.speed=50,this.firstUpdate=!0,this.COHERENT=0,this.RANDOM=1,this.dots=[[],[]],this.trial=0,this.states=["resetted","iti","stimulus","wait","ended"],this.state="resetted",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.LEFT=180,this.RIGHT=0,this.currentDirection=void 0,this.signals=["left","right"],this.signal=void 0,this.runner=void 0,this.xScale=void 0,this.yScale=void 0}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;

          width: 10rem;
          height: 10rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        .background {
          fill: var(---color-element-disabled);
          stroke: none;
        }

        .outline {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2px;
        }

        .dot {
          r: 2px;
        }

        .dots.coherent {
          fill: var(---color-background);
        }

        .dots.random {
          fill: var(---color-background);
        }

        .fixation {
          stroke: var(---color-text);
          stroke-width: 2px;
        }

        .query {
          font-size: 1.75rem;
          font-weight: 600;
        }
      `]}render(){return _``}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,r=this.height,s=Math.min(e,r),i=.25*this.rem,a=.25*this.rem,n=.25*this.rem,o=s-(i+a),l=s-(n+.25*this.rem);this.xScale=qi().domain([-1,1]).range([0,l]),this.yScale=qi().domain([1,-1]).range([0,o]);const c=Pe(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),d=c.enter().append("svg").classed("main",!0),h=d.merge(c).attr("viewBox",`0 0 ${s} ${s}`);d.append("clipPath").attr("id","clip-rdk-task").append("circle"),h.select("clipPath circle").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.xScale(0));const u=d.append("g").classed("plot",!0),g=h.select(".plot").attr("transform",`translate(${n}, ${i})`),p=u.append("g").classed("underlayer",!0),m=g.select(".underlayer");p.append("circle").classed("background",!0),m.select(".background").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.xScale(0)),u.append("g").classed("content",!0).attr("clip-path","url(#clip-rdk-task)");g.select(".content").selectAll(".dots").data([[],[]]).enter().append("g").classed("dots",!0).classed("coherent",((t,e)=>e===this.COHERENT)).classed("random",((t,e)=>e===this.RANDOM));const b=u.append("g").classed("overlayer",!0),y=g.select(".overlayer");b.append("circle").classed("outline",!0),y.select(".outline").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.yScale(0)),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=Cs()-this.pauseTime,this.pauseTime=0),this.runner=function(t,e,r){var s=new vs,i=e;return s._restart=s.restart,s.restart=function(t,e,r){e=+e,r=null==r?Cs():+r,s._restart((function a(n){n+=i,s._restart(a,i+=e,r),t(n)}),e,r)},s.restart(t,e,r),s}(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=Cs())),this.firstUpdate=!1}reset(){void 0!==this.runner&&this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.signal=void 0,this.currentDirection=void 0;const t=Pe(this.renderRoot).select(".content").selectAll(".dots").data([[],[]]).selectAll(".dot").data((t=>t));t.exit().remove();Pe(this.renderRoot).select(".content").selectAll(".fixation").data([]).exit().remove();Pe(this.renderRoot).select(".content").selectAll(".query").data([]).exit().remove()}run(){const t=Cs(),e=this.baseTime?t-this.baseTime:0,r=this.baseTime?e-this.startTime:0,s=this.baseTime?e-this.lastTime:0;this.lastTime=e;let i=!1;if("resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("rdk-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&r>=this.iti?(i=!0,this.trial+=1,this.state="stimulus",this.startTime=e,this.signal=Math.random()<this.probability?"left":"right",this.currentDirection="left"===this.signal?this.LEFT:this.RIGHT,this.dispatchEvent(new CustomEvent("rdk-trial-start",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0}))):"stimulus"===this.state&&r>=this.duration?(this.state="wait",this.startTime=e,this.dispatchEvent(new CustomEvent("rdk-trial-middle",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0}))):"wait"===this.state&&r>=this.wait&&(this.dispatchEvent(new CustomEvent("rdk-trial-end",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.signal=void 0,this.currentDirection=void 0,this.dispatchEvent(new CustomEvent("rdk-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=e)),"stimulus"===this.state){this.dots[this.COHERENT].length=Math.round(this.count*this.coherence),this.dots[this.RANDOM].length=this.count-this.dots[this.COHERENT].length;for(let t=0;t<this.dots.length;t+=1)for(let r=0;r<this.dots[t].length;r+=1){const a=void 0===this.dots[t][r];a&&(this.dots[t][r]={});const n=this.dots[t][r];if(i||a){n.direction=t===this.RANDOM?360*Math.random():this.currentDirection,n.birth=e-Math.floor(Math.random()*this.lifetime);const r=2*Math.random()*Math.PI,s=Math.sqrt(Math.random());n.x=this.xScale(s*Math.cos(r)),n.y=this.yScale(s*Math.sin(r))}else if(e>n.birth+this.lifetime){n.birth+=this.lifetime,n.direction=t===this.RANDOM?360*Math.random():this.currentDirection;const e=2*Math.random()*Math.PI,r=Math.sqrt(Math.random());n.x=this.xScale(r*Math.cos(e)),n.y=this.yScale(r*Math.sin(e))}else{t===this.COHERENT&&(n.direction=this.currentDirection);const e=n.direction*(Math.PI/180);n.dx=this.speed*(s/1e3)*Math.cos(e),n.dy=this.speed*(s/1e3)*Math.sin(e),n.x+=n.dx,n.y+=n.dy;(n.x-this.xScale(0))**2+(n.y-this.yScale(0))**2>(this.xScale(1)-this.xScale(0))**2&&(n.x=-(n.x-this.xScale(0))+this.xScale(0),n.y=-(n.y-this.yScale(0))+this.yScale(0))}}}const a=Pe(this.renderRoot).select(".content").selectAll(".fixation").data("iti"===this.state?[!0]:[]),n=a.enter().append("g").classed("fixation",!0);n.append("line").attr("x1",this.xScale(-.1)).attr("y1",this.xScale(0)).attr("x2",this.xScale(.1)).attr("y2",this.xScale(0)),n.append("line").attr("x1",this.xScale(0)).attr("y1",this.xScale(-.1)).attr("x2",this.xScale(0)).attr("y2",this.xScale(.1)),a.exit().remove();const o=Pe(this.renderRoot).select(".content").selectAll(".dots").data("stimulus"===this.state?this.dots:[[],[]]).selectAll(".dot").data((t=>t));o.enter().append("circle").classed("dot",!0).merge(o).attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),o.exit().remove();const l=Pe(this.renderRoot).select(".content").selectAll(".query").data("wait"===this.state?[!0]:[]);l.enter().append("g").classed("query",!0).append("text").attr("x",this.xScale(0)).attr("y",this.xScale(0)).attr("text-anchor","middle").attr("alignment-baseline","middle").text("?"),l.exit().remove()}}customElements.define("rdk-2afc-task",xa);class va extends ua{static get styles(){return[super.styles,o`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `]}render(){return _`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("ddm-example",va);class Aa extends va{constructor(){super(),this.trialCount=0}connectedCallback(){super.connectedCallback(),this.accumulableControl=this.querySelector("accumulable-control"),this.rdkTask=this.querySelector("rdk-2afc-task"),this.accumulableResponse=this.querySelector("accumulable-response"),this.accumulableTable=this.querySelector("accumulable-table"),this.ddmParameters=this.querySelector("ddm-parameters"),this.ddmModel=this.querySelector("ddm-model"),this.ddmFit=this.querySelector("ddm-fit"),this.ddmModel.clear(),this.accumulableControl&&this.accumulableControl.hasAttribute("trials")&&this.accumulableControl.addEventListener("accumulable-control-trials",(t=>{this.rdkTask&&(this.rdkTask.trials=t.detail.trials),this.accumulableResponse&&(this.accumulableResponse.trialTotal=t.detail.trials)})),this.accumulableControl&&this.accumulableControl.hasAttribute("duration")&&this.accumulableControl.addEventListener("accumulable-control-duration",(t=>{this.rdkTask&&(this.rdkTask.duration=t.detail.duration,this.rdkTask.wait=t.detail.duration,this.rdkTask.iti=t.detail.duration)})),this.accumulableControl&&this.accumulableControl.hasAttribute("coherence")&&this.accumulableControl.addEventListener("accumulable-control-coherence",(t=>{this.rdkTask&&(this.rdkTask.coherence=t.detail.coherence)})),this.accumulableControl&&this.accumulableControl.hasAttribute("color")&&this.accumulableControl.addEventListener("accumulable-control-color",(t=>{this.accumulableTable&&(this.accumulableTable.color=t.detail.color)})),this.accumulableControl&&this.accumulableControl.hasAttribute("run")&&this.accumulableControl.addEventListener("accumulable-control-run",(()=>{this.rdkTask&&(this.rdkTask.running=!0)})),this.accumulableControl&&this.accumulableControl.hasAttribute("pause")&&this.accumulableControl.addEventListener("accumulable-control-pause",(()=>{this.rdkTask&&(this.rdkTask.running=!1)})),this.accumulableControl&&this.accumulableControl.hasAttribute("reset")&&this.accumulableControl.addEventListener("accumulable-control-reset",(()=>{this.rdkTask&&this.rdkTask.reset(),this.accumulableResponse&&this.accumulableResponse.reset(),this.accumulableTable&&(this.accumulableTable.correctCount=NaN,this.accumulableTable.errorCount=NaN,this.accumulableTable.nrCount=NaN,this.accumulableTable.correctMeanRT=NaN,this.accumulableTable.errorMeanRT=NaN,this.accumulableTable.meanRT=NaN,this.accumulableTable.correctSDRT=NaN,this.accumulableTable.errorSDRT=NaN,this.accumulableTable.sdRT=NaN),this.ddmModel&&this.ddmModel.clear(),this.ddmFit&&this.ddmFit.clear()})),this.rdkTask&&this.accumulableResponse&&(this.accumulableResponse.trialTotal=this.rdkTask.trials),this.rdkTask&&this.rdkTask.addEventListener("rdk-trial-start",(t=>{this.accumulableResponse&&this.accumulableResponse.start(t.detail.signal,t.detail.trial)})),this.rdkTask&&this.rdkTask.addEventListener("rdk-trial-end",(()=>{this.accumulableResponse&&this.accumulableResponse.stop()})),this.rdkTask&&this.rdkTask.addEventListener("rdk-block-end",(()=>{this.accumulableControl&&this.accumulableControl.complete()})),this.accumulableResponse&&this.accumulableResponse.addEventListener("accumulable-response",(t=>{this.accumulableTable&&(this.accumulableTable.correctCount=t.detail.correctCount,this.accumulableTable.errorCount=t.detail.errorCount,this.accumulableTable.nrCount=t.detail.nrCount,this.accumulableTable.correctMeanRT=t.detail.correctMeanRT,this.accumulableTable.errorMeanRT=t.detail.errorMeanRT,this.accumulableTable.meanRT=t.detail.meanRT,this.accumulableTable.correctSDRT=t.detail.correctSDRT,this.accumulableTable.errorSDRT=t.detail.errorSDRT,this.accumulableTable.sdRT=t.detail.sdRT),this.ddmModel&&this.ddmModel.trial({index:t.detail.trial,rt:t.detail.rt,outcome:t.detail.outcome}),this.ddmFit&&this.ddmFit.set({meanRT:t.detail.meanRT,sdRT:t.detail.sdRT,accuracy:t.detail.correctCount/(t.detail.correctCount+t.detail.errorCount+t.detail.nrCount)})})),this.ddmFit&&this.ddmFit.addEventListener("ddm-fit-update",(t=>{this.ddmParameters&&(this.ddmParameters.a=t.detail.a,this.ddmParameters.z=.5,this.ddmParameters.v=t.detail.v,this.ddmParameters.t0=t.detail.t0),this.ddmModel&&(this.ddmModel.a=t.detail.a,this.ddmModel.z=.5,this.ddmModel.v=t.detail.v,this.ddmModel.t0=t.detail.t0)}))}}customElements.define("ddm-example-human",Aa);class Ea extends va{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0}}}constructor(){super(),this.trials=10,this.a=1.2,this.z=.35,this.v=1.5,this.t0=150,this.accumulableControl=null,this.accumulableTable=null,this.ddmParameters=null,this.ddmModel=null,this.data=void 0,this.model=void 0}connectedCallback(){super.connectedCallback(),this.accumulableControl=this.querySelector("accumulable-control"),this.accumulableTable=this.querySelector("accumulable-table"),this.ddmParameters=this.querySelector("ddm-parameters"),this.ddmModel=this.querySelector("ddm-model"),this.accumulableControl&&(this.accumulableControl.addEventListener("accumulable-control-resample",(()=>{this.ddmModel?.resample(),this.requestUpdate()})),this.accumulableControl.addEventListener("accumulable-control-trials",(t=>{this.trials=t.detail.trials}))),this.ddmParameters&&(this.ddmParameters.addEventListener("ddm-parameters-a",(t=>{this.a=t.detail.a})),this.ddmParameters.addEventListener("ddm-parameters-z",(t=>{this.z=t.detail.z})),this.ddmParameters.addEventListener("ddm-parameters-v",(t=>{this.v=t.detail.v})),this.ddmParameters.addEventListener("ddm-parameters-t0",(t=>{this.t0=t.detail.t0}))),this.ddmModel&&(this.ddmModel.addEventListener("ddm-model-a",(t=>{this.a=t.detail.a})),this.ddmModel.addEventListener("ddm-model-z",(t=>{this.z=t.detail.z})),this.ddmModel.addEventListener("ddm-model-v",(t=>{this.v=t.detail.v})),this.ddmModel.addEventListener("ddm-model-t0",(t=>{this.t0=t.detail.t0})),this.ddmModel.addEventListener("ddm-model-output",(t=>{this.data=t.detail.data,this.model=t.detail.model,this.requestUpdate()}))),this.requestUpdate()}update(t){super.update(t),this.accumulableControl&&(this.accumulableControl.trials=this.trials),this.accumulableTable&&(this.accumulableTable.correctCount=this.data.correctCount,this.accumulableTable.errorCount=this.data.errorCount,this.accumulableTable.nrCount=0,this.accumulableTable.correctMeanRT=this.data.correctMeanRT,this.accumulableTable.errorMeanRT=this.data.errorMeanRT,this.accumulableTable.meanRT=this.data.meanRT,this.accumulableTable.correctSDRT=this.data.correctSDRT,this.accumulableTable.errorSDRT=this.data.errorSDRT,this.accumulableTable.sdRT=this.data.sdRT),this.ddmParameters&&(this.ddmParameters.a=this.a,this.ddmParameters.z=this.z,this.ddmParameters.v=this.v,this.ddmParameters.t0=this.t0),this.ddmModel&&(this.ddmModel.trials=this.trials,this.ddmModel.a=+this.a,this.ddmModel.z=+this.z,this.ddmModel.v=+this.v,this.ddmModel.t0=+this.t0)}}customElements.define("ddm-example-interactive",Ea);class Ra extends va{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},coherence:{attribute:"coherence",type:Number,reflect:!0},color:{attribute:"color",type:String,reflect:!0},a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0}}}constructor(){super(),this.trials=10,this.duration=2e3,this.coherence=.5,this.colors=["none","measure","outcome","all"],this.color="outcome",this.a=1.2,this.z=.35,this.v=1.5,this.t0=150,this.accumulableControl=null,this.rdkTask=null,this.ddmParameters=null,this.ddmModel=null,this.accumulableResponse=null,this.accumulableTable=null,this.trialCount=0,this.signals=["left","right"],this.signal=void 0,this.data=void 0,this.model=void 0}connectedCallback(){super.connectedCallback(),this.accumulableControl=this.querySelector("accumulable-control"),this.rdkTask=this.querySelector("rdk-2afc-task"),this.ddmParameters=this.querySelector("ddm-parameters"),this.ddmModel=this.querySelector("ddm-model"),this.accumulableResponse=this.querySelector("accumulable-response"),this.accumulableTable=this.querySelector("accumulable-table"),this.accumulableControl&&(this.accumulableControl.hasAttribute("trials")&&this.accumulableControl.addEventListener("accumulable-control-trials",(t=>{this.trials=t.detail.trials})),this.accumulableControl.hasAttribute("duration")&&this.accumulableControl.addEventListener("accumulable-control-duration",(t=>{this.duration=t.detail.duration})),this.accumulableControl.hasAttribute("run")&&this.accumulableControl.addEventListener("accumulable-control-run",(()=>{this.rdkTask&&(this.rdkTask.running=!0),this.ddmModel&&this.ddmModel.resumeTrial()})),this.accumulableControl.hasAttribute("pause")&&this.accumulableControl.addEventListener("accumulable-control-pause",(()=>{this.rdkTask&&(this.rdkTask.running=!1),this.ddmModel&&this.ddmModel.pauseTrial()})),this.accumulableControl.hasAttribute("reset")&&this.accumulableControl.addEventListener("accumulable-control-reset",(()=>{this.trialCount=0,this.signal=void 0,this.rdkTask&&this.rdkTask.reset(),this.ddmModel&&(this.ddmModel.trials=this.trialCount),this.accumulableResponse&&this.accumulableResponse.reset(),this.accumulableTable}))),this.rdkTask&&(this.rdkTask.addEventListener("rdk-trial-start",(t=>{this.signal=t.detail.signal,this.accumulableResponse&&this.accumulableResponse.start(t.detail.signal,t.detail.trial),this.ddmModel&&(this.trialCount+=1,this.ddmModel.trial())})),this.rdkTask.addEventListener("rdk-trial-end",(()=>{this.signal=void 0,this.accumulableResponse&&this.accumulableResponse.stop()})),this.rdkTask.addEventListener("rdk-block-end",(()=>{this.accumulableControl&&this.accumulableControl.complete()}))),this.ddmParameters&&(this.ddmParameters.addEventListener("ddm-parameters-a",(t=>{this.a=t.detail.a})),this.ddmParameters.addEventListener("ddm-parameters-z",(t=>{this.z=t.detail.z})),this.ddmParameters.addEventListener("ddm-parameters-v",(t=>{this.v=t.detail.v})),this.ddmParameters.addEventListener("ddm-parameters-t0",(t=>{this.t0=t.detail.t0}))),this.ddmModel&&(this.ddmModel.addEventListener("ddm-model-a",(t=>{this.a=t.detail.a})),this.ddmModel.addEventListener("ddm-model-z",(t=>{this.z=t.detail.z})),this.ddmModel.addEventListener("ddm-model-v",(t=>{this.v=t.detail.v})),this.ddmModel.addEventListener("ddm-model-t0",(t=>{this.t0=t.detail.t0})),this.ddmModel.addEventListener("ddm-model-output",(t=>{this.data=t.detail.data,this.model=t.detail.model,this.requestUpdate()})),this.ddmModel&&this.ddmModel.addEventListener("accumulable-response",(t=>{if(this.accumulableResponse){const e="correct"===t.detail.outcome?this.signal:"left"===this.signal?"right":"left";this.accumulableResponse.responded(e)}this.data=t.detail.data,this.model=t.detail.model,this.requestUpdate()}))),this.requestUpdate()}update(t){super.update(t),this.trialCount>this.trials&&(this.trialCount=this.trials),this.accumulableControl&&(this.accumulableControl.trials=this.trials,this.accumulableControl.duration=this.duration,this.accumulableControl.coherence=this.coherence,this.accumulableControl.color=this.color),this.rdkTask&&(this.rdkTask.trials=this.trials,this.rdkTask.duration=this.duration,this.rdkTask.coherence=this.coherence,this.rdkTask.color=this.color),this.ddmParameters&&(this.ddmParameters.a=this.a,this.ddmParameters.z=this.z,this.ddmParameters.v=this.v,this.ddmParameters.t0=this.t0),this.ddmModel&&(this.ddmModel.trials=this.trialCount,this.ddmModel.a=+this.a,this.ddmModel.z=+this.z,this.ddmModel.v=+this.v,this.ddmModel.t0=+this.t0),this.accumulableResponse&&(this.accumulableResponse.trialTotal=this.trials),this.accumulableTable&&(this.accumulableTable.correctCount=this.data.correctCount,this.accumulableTable.errorCount=this.data.errorCount,this.accumulableTable.nrCount=0,this.accumulableTable.correctMeanRT=this.data.correctMeanRT,this.accumulableTable.errorMeanRT=this.data.errorMeanRT,this.accumulableTable.meanRT=this.data.meanRT,this.accumulableTable.correctSDRT=this.data.correctSDRT,this.accumulableTable.errorSDRT=this.data.errorSDRT,this.accumulableTable.sdRT=this.data.sdRT)}}customElements.define("ddm-example-model",Ra),t.AccumulableControl=ga,t.AccumulableElement=ua,t.AccumulableResponse=pa,t.AccumulableTable=ma,t.DDMExampleHuman=Aa,t.DDMExampleInteractive=Ea,t.DDMExampleModel=Ra,t.DDMFit=fa,t.DDMModel=Ca,t.DDMParameters=Fa,t.RDK2AFCTask=xa}));
//# sourceMappingURL=accumulableElements.umd.min.js.map
