function t(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(n){if("default"!==n&&!(n in t)){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}))})),Object.freeze(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e=globalThis,n=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),i=new WeakMap;let a=class{constructor(t,e,n){if(this._$cssResult$=!0,n!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(n&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=i.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&i.set(e,t))}return t}toString(){return this.cssText}};const o=t=>new a("string"==typeof t?t:t+"",void 0,r),s=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[r+1]),t[0]);return new a(n,t,r)},l=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return o(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:c,defineProperty:u,getOwnPropertyDescriptor:h,getOwnPropertyNames:d,getOwnPropertySymbols:g,getPrototypeOf:f}=Object,p=globalThis,v=p.trustedTypes,m=v?v.emptyScript:"",y=p.reactiveElementPolyfillSupport,b=(t,e)=>t,x={toAttribute(t,e){switch(e){case Boolean:t=t?m:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},B=(t,e)=>!c(t,e),I={attribute:!0,type:String,converter:x,reflect:!1,hasChanged:B};Symbol.metadata??=Symbol("metadata"),p.litPropertyMetadata??=new WeakMap;let F=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=I){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(t,n,e);void 0!==r&&u(this.prototype,t,r)}}static getPropertyDescriptor(t,e,n){const{get:r,set:i}=h(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return r?.call(this)},set(e){const a=r?.call(this);i.call(this,e),this.requestUpdate(t,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??I}static _$Ei(){if(this.hasOwnProperty(b("elementProperties")))return;const t=f(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(b("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b("properties"))){const t=this.properties,e=[...d(t),...g(t)];for(const n of e)this.createProperty(n,t[n])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(l(t))}else void 0!==t&&e.push(l(t));return e}static _$Eu(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,r)=>{if(n)t.adoptedStyleSheets=r.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of r){const r=document.createElement("style"),i=e.litNonce;void 0!==i&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EC(t,e){const n=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,n);if(void 0!==r&&!0===n.reflect){const i=(void 0!==n.converter?.toAttribute?n.converter:x).toAttribute(e,n.type);this._$Em=t,null==i?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null}}_$AK(t,e){const n=this.constructor,r=n._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=n.getPropertyOptions(r),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:x;this._$Em=r,this[r]=i.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,n){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??B)(this[t],e))return;this.P(t,e,n)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],n)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}};F.elementStyles=[],F.shadowRootOptions={mode:"open"},F[b("elementProperties")]=new Map,F[b("finalized")]=new Map,y?.({ReactiveElement:F}),(p.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Q=globalThis,C=Q.trustedTypes,w=C?C.createPolicy("lit-html",{createHTML:t=>t}):void 0,U="$lit$",A=`lit$${Math.random().toFixed(9).slice(2)}$`,S="?"+A,L=`<${S}>`,k=document,G=()=>k.createComment(""),_=t=>null===t||"object"!=typeof t&&"function"!=typeof t,R=Array.isArray,E="[ \t\n\f\r]",T=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,M=/-->/g,N=/>/g,D=RegExp(`>|${E}(?:([^\\s"'>=/]+)(${E}*=${E}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),X=/'/g,Z=/"/g,V=/^(?:script|style|textarea|title)$/i,H=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),W=H(1),Y=H(2),z=Symbol.for("lit-noChange"),O=Symbol.for("lit-nothing"),J=new WeakMap,P=k.createTreeWalker(k,129);function j(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==w?w.createHTML(e):e}class K{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let i=0,a=0;const o=t.length-1,s=this.parts,[l,c]=((t,e)=>{const n=t.length-1,r=[];let i,a=2===e?"<svg>":"",o=T;for(let e=0;e<n;e++){const n=t[e];let s,l,c=-1,u=0;for(;u<n.length&&(o.lastIndex=u,l=o.exec(n),null!==l);)u=o.lastIndex,o===T?"!--"===l[1]?o=M:void 0!==l[1]?o=N:void 0!==l[2]?(V.test(l[2])&&(i=RegExp("</"+l[2],"g")),o=D):void 0!==l[3]&&(o=D):o===D?">"===l[0]?(o=i??T,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,s=l[1],o=void 0===l[3]?D:'"'===l[3]?Z:X):o===Z||o===X?o=D:o===M||o===N?o=T:(o=D,i=void 0);const h=o===D&&t[e+1].startsWith("/>")?" ":"";a+=o===T?n+L:c>=0?(r.push(s),n.slice(0,c)+U+n.slice(c)+A+h):n+A+(-2===c?e:h)}return[j(t,a+(t[n]||"<?>")+(2===e?"</svg>":"")),r]})(t,e);if(this.el=K.createElement(l,n),P.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=P.nextNode())&&s.length<o;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(U)){const e=c[a++],n=r.getAttribute(t).split(A),o=/([.?@])?(.*)/.exec(e);s.push({type:1,index:i,name:o[2],strings:n,ctor:"."===o[1]?nt:"?"===o[1]?rt:"@"===o[1]?it:et}),r.removeAttribute(t)}else t.startsWith(A)&&(s.push({type:6,index:i}),r.removeAttribute(t));if(V.test(r.tagName)){const t=r.textContent.split(A),e=t.length-1;if(e>0){r.textContent=C?C.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],G()),P.nextNode(),s.push({type:2,index:++i});r.append(t[e],G())}}}else if(8===r.nodeType)if(r.data===S)s.push({type:2,index:i});else{let t=-1;for(;-1!==(t=r.data.indexOf(A,t+1));)s.push({type:7,index:i}),t+=A.length-1}i++}}static createElement(t,e){const n=k.createElement("template");return n.innerHTML=t,n}}function q(t,e,n=t,r){if(e===z)return e;let i=void 0!==r?n._$Co?.[r]:n._$Cl;const a=_(e)?void 0:e._$litDirective$;return i?.constructor!==a&&(i?._$AO?.(!1),void 0===a?i=void 0:(i=new a(t),i._$AT(t,n,r)),void 0!==r?(n._$Co??=[])[r]=i:n._$Cl=i),void 0!==i&&(e=q(t,i._$AS(t,e.values),i,r)),e}class ${constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,r=(t?.creationScope??k).importNode(e,!0);P.currentNode=r;let i=P.nextNode(),a=0,o=0,s=n[0];for(;void 0!==s;){if(a===s.index){let e;2===s.type?e=new tt(i,i.nextSibling,this,t):1===s.type?e=new s.ctor(i,s.name,s.strings,this,t):6===s.type&&(e=new at(i,this,t)),this._$AV.push(e),s=n[++o]}a!==s?.index&&(i=P.nextNode(),a++)}return P.currentNode=k,r}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class tt{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,r){this.type=2,this._$AH=O,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=q(this,t,e),_(t)?t===O||null==t||""===t?(this._$AH!==O&&this._$AR(),this._$AH=O):t!==this._$AH&&t!==z&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>R(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==O&&_(this._$AH)?this._$AA.nextSibling.data=t:this.T(k.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=K.createElement(j(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(e);else{const t=new $(r,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t}}_$AC(t){let e=J.get(t.strings);return void 0===e&&J.set(t.strings,e=new K(t)),e}k(t){R(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const i of t)r===e.length?e.push(n=new tt(this.S(G()),this.S(G()),this,this.options)):n=e[r],n._$AI(i),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}let et=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,r,i){this.type=1,this._$AH=O,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=O}_$AI(t,e=this,n,r){const i=this.strings;let a=!1;if(void 0===i)t=q(this,t,e,0),a=!_(t)||t!==this._$AH&&t!==z,a&&(this._$AH=t);else{const r=t;let o,s;for(t=i[0],o=0;o<i.length-1;o++)s=q(this,r[n+o],e,o),s===z&&(s=this._$AH[o]),a||=!_(s)||s!==this._$AH[o],s===O?t=O:t!==O&&(t+=(s??"")+i[o+1]),this._$AH[o]=s}a&&!r&&this.j(t)}j(t){t===O?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}};class nt extends et{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===O?void 0:t}}class rt extends et{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==O)}}class it extends et{constructor(t,e,n,r,i){super(t,e,n,r,i),this.type=5}_$AI(t,e=this){if((t=q(this,t,e,0)??O)===z)return;const n=this._$AH,r=t===O&&n!==O||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,i=t!==O&&(n===O||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class at{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){q(this,t)}}const ot=Q.litHtmlPolyfillSupport;ot?.(K,tt),(Q.litHtmlVersions??=[]).push("3.1.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let st=class extends F{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(void 0===i){const t=n?.renderBefore??null;r._$litPart$=i=new tt(e.insertBefore(G(),t),t,void 0,n??{})}return i._$AI(t),i})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return z}};st._$litElement$=!0,st.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:st});const lt=globalThis.litElementPolyfillSupport;function ct(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ut(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ht(t){let e,n,r;function i(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<0?i=e+1:a=e}while(i<a)}return i}return 2!==t.length?(e=ct,n=(e,n)=>ct(t(e),n),r=(e,n)=>t(e)-n):(e=t===ct||t===ut?t:dt,n=t,r=t),{left:i,center:function(t,e,n=0,a=t.length){const o=i(t,e,n,a-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<=0?i=e+1:a=e}while(i<a)}return i}}}function dt(){return 0}lt?.({LitElement:st}),(globalThis.litElementVersions??=[]).push("4.0.5");const gt=ht(ct).right;ht((function(t){return null===t?NaN:+t})).center;const ft=Math.sqrt(50),pt=Math.sqrt(10),vt=Math.sqrt(2);function mt(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=ft?10:a>=pt?5:a>=vt?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?mt(t,e,2*n):[s,l,c]}function yt(t,e,n){return mt(t=+t,e=+e,n=+n)[2]}function bt(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}function xt(t){return t}var Bt=1,It=2,Ft=3,Qt=4,Ct=1e-6;function wt(t){return"translate("+t+",0)"}function Ut(t){return"translate(0,"+t+")"}function At(t){return e=>+t(e)}function St(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Lt(){return!this.__axis}function kt(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===Bt||t===Qt?-1:1,u=t===Qt||t===It?"x":"y",h=t===Bt||t===Ft?wt:Ut;function d(d){var g=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,f=null==i?e.tickFormat?e.tickFormat.apply(e,n):xt:i,p=Math.max(a,0)+s,v=e.range(),m=+v[0]+l,y=+v[v.length-1]+l,b=(e.bandwidth?St:At)(e.copy(),l),x=d.selection?d.selection():d,B=x.selectAll(".domain").data([null]),I=x.selectAll(".tick").data(g,e).order(),F=I.exit(),Q=I.enter().append("g").attr("class","tick"),C=I.select("line"),w=I.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(Q),C=C.merge(Q.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),w=w.merge(Q.append("text").attr("fill","currentColor").attr(u,c*p).attr("dy",t===Bt?"0em":t===Ft?"0.71em":"0.32em")),d!==x&&(B=B.transition(d),I=I.transition(d),C=C.transition(d),w=w.transition(d),F=F.transition(d).attr("opacity",Ct).attr("transform",(function(t){return isFinite(t=b(t))?h(t+l):this.getAttribute("transform")})),Q.attr("opacity",Ct).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:b(t))+l)}))),F.remove(),B.attr("d",t===Qt||t===It?o?"M"+c*o+","+m+"H"+l+"V"+y+"H"+c*o:"M"+l+","+m+"V"+y:o?"M"+m+","+c*o+"V"+l+"H"+y+"V"+c*o:"M"+m+","+l+"H"+y),I.attr("opacity",1).attr("transform",(function(t){return h(b(t)+l)})),C.attr(u+"2",c*a),w.attr(u,c*p).text(f),x.filter(Lt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===It?"start":t===Qt?"end":"middle"),x.each((function(){this.__axis=b}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),d):r&&r.slice()},d.tickFormat=function(t){return arguments.length?(i=t,d):i},d.tickSize=function(t){return arguments.length?(a=o=+t,d):a},d.tickSizeInner=function(t){return arguments.length?(a=+t,d):a},d.tickSizeOuter=function(t){return arguments.length?(o=+t,d):o},d.tickPadding=function(t){return arguments.length?(s=+t,d):s},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function Gt(t){return kt(Ft,t)}function _t(t){return kt(Qt,t)}var Rt={value:()=>{}};function Et(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Tt(r)}function Tt(t){this._=t}function Mt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Nt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Rt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Tt.prototype=Et.prototype={constructor:Tt,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=Nt(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Nt(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=Mt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Tt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var Dt="http://www.w3.org/1999/xhtml",Xt={svg:"http://www.w3.org/2000/svg",xhtml:Dt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zt(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Xt.hasOwnProperty(e)?{space:Xt[e],local:t}:t}function Vt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Dt&&e.documentElement.namespaceURI===Dt?e.createElement(t):e.createElementNS(n,t)}}function Ht(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Wt(t){var e=Zt(t);return(e.local?Ht:Vt)(e)}function Yt(){}function zt(t){return null==t?Yt:function(){return this.querySelector(t)}}function Ot(){return[]}function Jt(t){return null==t?Ot:function(){return this.querySelectorAll(t)}}function Pt(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function jt(t){return function(){return this.matches(t)}}function Kt(t){return function(e){return e.matches(t)}}var qt=Array.prototype.find;function $t(){return this.firstElementChild}var te=Array.prototype.filter;function ee(){return Array.from(this.children)}function ne(t){return new Array(t.length)}function re(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ie(t,e,n,r,i,a){for(var o,s=0,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new re(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function ae(t,e,n,r,i,a,o){var s,l,c,u=new Map,h=e.length,d=a.length,g=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(g[s]=c=o.call(l,l.__data__,s,e)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<d;++s)c=o.call(t,a[s],s,a)+"",(l=u.get(c))?(r[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new re(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&u.get(g[s])===l&&(i[s]=l)}function oe(t){return t.__data__}function se(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function le(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ce(t){return function(){this.removeAttribute(t)}}function ue(t){return function(){this.removeAttributeNS(t.space,t.local)}}function he(t,e){return function(){this.setAttribute(t,e)}}function de(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ge(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function fe(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ve(t){return function(){this.style.removeProperty(t)}}function me(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ye(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function be(t,e){return t.style.getPropertyValue(e)||pe(t).getComputedStyle(t,null).getPropertyValue(e)}function xe(t){return function(){delete this[t]}}function Be(t,e){return function(){this[t]=e}}function Ie(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Fe(t){return t.trim().split(/^|\s+/)}function Qe(t){return t.classList||new Ce(t)}function Ce(t){this._node=t,this._names=Fe(t.getAttribute("class")||"")}function we(t,e){for(var n=Qe(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ue(t,e){for(var n=Qe(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ae(t){return function(){we(this,t)}}function Se(t){return function(){Ue(this,t)}}function Le(t,e){return function(){(e.apply(this,arguments)?we:Ue)(this,t)}}function ke(){this.textContent=""}function Ge(t){return function(){this.textContent=t}}function _e(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Re(){this.innerHTML=""}function Ee(t){return function(){this.innerHTML=t}}function Te(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Me(){this.nextSibling&&this.parentNode.appendChild(this)}function Ne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function De(){return null}function Xe(){var t=this.parentNode;t&&t.removeChild(this)}function Ze(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ve(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function He(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function We(t,e,n){return function(){var r,i=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=e);this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function Ye(t,e,n){var r=pe(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ze(t,e){return function(){return Ye(this,t,e)}}function Oe(t,e){return function(){return Ye(this,t,e.apply(this,arguments))}}re.prototype={constructor:re,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ce.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Je=[null];function Pe(t,e){this._groups=t,this._parents=e}function je(){return new Pe([[document.documentElement]],Je)}function Ke(t){return"string"==typeof t?new Pe([[document.querySelector(t)]],[document.documentElement]):new Pe([[t]],Je)}function qe(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}Pe.prototype=je.prototype={constructor:Pe,select:function(t){"function"!=typeof t&&(t=zt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=t.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new Pe(r,this._parents)},selectAll:function(t){t="function"==typeof t?Pt(t):Jt(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(r.push(t.call(o,o.__data__,c,s)),i.push(o));return new Pe(r,i)},selectChild:function(t){return this.select(null==t?$t:function(t){return function(){return qt.call(this.children,t)}}("function"==typeof t?t:Kt(t)))},selectChildren:function(t){return this.selectAll(null==t?ee:function(t){return function(){return te.call(this.children,t)}}("function"==typeof t?t:Kt(t)))},filter:function(t){"function"!=typeof t&&(t=jt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new Pe(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,oe);var n=e?ae:ie,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],h=i[c],d=h.length,g=se(t.call(u,u&&u.__data__,c,r)),f=g.length,p=s[c]=new Array(f),v=o[c]=new Array(f);n(u,h,p,v,l[c]=new Array(d),g,e);for(var m,y,b=0,x=0;b<f;++b)if(m=p[b]){for(b>=x&&(x=b+1);!(y=v[x])&&++x<f;);m._next=y||null}}return(o=new Pe(o,r))._enter=s,o._exit=l,o},enter:function(){return new Pe(this._enter||this._groups.map(ne),this._parents)},exit:function(){return new Pe(this._exit||this._groups.map(ne),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c,u=n[l],h=r[l],d=u.length,g=s[l]=new Array(d),f=0;f<d;++f)(c=u[f]||h[f])&&(g[f]=c);for(;l<i;++l)s[l]=n[l];return new Pe(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=le);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(e)}return new Pe(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=Zt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ue:ce:"function"==typeof e?n.local?fe:ge:n.local?de:he)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?ve:"function"==typeof e?ye:me)(t,e,null==n?"":n)):be(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?xe:"function"==typeof e?Ie:Be)(t,e)):this.node()[t]},classed:function(t,e){var n=Fe(t+"");if(arguments.length<2){for(var r=Qe(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Le:e?Ae:Se)(n,e))},text:function(t){return arguments.length?this.each(null==t?ke:("function"==typeof t?_e:Ge)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Re:("function"==typeof t?Te:Ee)(t)):this.node().innerHTML},raise:function(){return this.each(Me)},lower:function(){return this.each(Ne)},append:function(t){var e="function"==typeof t?t:Wt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Wt(t),r=null==e?De:"function"==typeof e?e:zt(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Xe)},clone:function(t){return this.select(t?Ve:Ze)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?We:He,r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Oe:ze)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const $e={passive:!1},tn={capture:!0,passive:!1};function en(t){t.stopImmediatePropagation()}function nn(t){t.preventDefault(),t.stopImmediatePropagation()}var rn=t=>()=>t;function an(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function on(t){return!t.ctrlKey&&!t.button}function sn(){return this.parentNode}function ln(t,e){return null==e?{x:t.x,y:t.y}:e}function cn(){return navigator.maxTouchPoints||"ontouchstart"in this}function un(){var t,e,n,r,i=on,a=sn,o=ln,s=cn,l={},c=Et("start","drag","end"),u=0,h=0;function d(t){t.on("mousedown.drag",g).filter(s).on("touchstart.drag",v).on("touchmove.drag",m,$e).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(o,s){if(!r&&i.call(this,o,s)){var l=b(this,a.call(this,o,s),o,s,"mouse");l&&(Ke(o.view).on("mousemove.drag",f,tn).on("mouseup.drag",p,tn),function(t){var e=t.document.documentElement,n=Ke(t).on("dragstart.drag",nn,tn);"onselectstart"in e?n.on("selectstart.drag",nn,tn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(o.view),en(o),n=!1,t=o.clientX,e=o.clientY,l("start",o))}}function f(r){if(nn(r),!n){var i=r.clientX-t,a=r.clientY-e;n=i*i+a*a>h}l.mouse("drag",r)}function p(t){Ke(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,r=Ke(t).on("dragstart.drag",null);e&&(r.on("click.drag",nn,tn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),nn(t),l.mouse("end",t)}function v(t,e){if(i.call(this,t,e)){var n,r,o=t.changedTouches,s=a.call(this,t,e),l=o.length;for(n=0;n<l;++n)(r=b(this,s,t,e,o[n].identifier,o[n]))&&(en(t),r("start",t,o[n]))}}function m(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=l[r[e].identifier])&&(nn(t),n("drag",t,r[e]))}function y(t){var e,n,i=t.changedTouches,a=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<a;++e)(n=l[i[e].identifier])&&(en(t),n("end",t,i[e]))}function b(t,e,n,r,i,a){var s,h,g,f=c.copy(),p=qe(a||n,e);if(null!=(g=o.call(t,new an("beforestart",{sourceEvent:n,target:d,identifier:i,active:u,x:p[0],y:p[1],dx:0,dy:0,dispatch:f}),r)))return s=g.x-p[0]||0,h=g.y-p[1]||0,function n(a,o,c){var v,m=p;switch(a){case"start":l[i]=n,v=u++;break;case"end":delete l[i],--u;case"drag":p=qe(c||o,e),v=u}f.call(a,t,new an(a,{sourceEvent:o,subject:g,target:d,identifier:i,active:v,x:p[0]+s,y:p[1]+h,dx:p[0]-m[0],dy:p[1]-m[1],dispatch:f}),r)}}return d.filter=function(t){return arguments.length?(i="function"==typeof t?t:rn(!!t),d):i},d.container=function(t){return arguments.length?(a="function"==typeof t?t:rn(t),d):a},d.subject=function(t){return arguments.length?(o="function"==typeof t?t:rn(t),d):o},d.touchable=function(t){return arguments.length?(s="function"==typeof t?t:rn(!!t),d):s},d.on=function(){var t=c.on.apply(c,arguments);return t===c?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d}function hn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function dn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gn(){}an.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var fn=.7,pn=1/fn,vn="\\s*([+-]?\\d+)\\s*",mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bn=/^#([0-9a-f]{3,8})$/,xn=new RegExp(`^rgb\\(${vn},${vn},${vn}\\)$`),Bn=new RegExp(`^rgb\\(${yn},${yn},${yn}\\)$`),In=new RegExp(`^rgba\\(${vn},${vn},${vn},${mn}\\)$`),Fn=new RegExp(`^rgba\\(${yn},${yn},${yn},${mn}\\)$`),Qn=new RegExp(`^hsl\\(${mn},${yn},${yn}\\)$`),Cn=new RegExp(`^hsla\\(${mn},${yn},${yn},${mn}\\)$`),wn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Un(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Sn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ln(e):3===n?new _n(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?kn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?kn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=xn.exec(t))?new _n(e[1],e[2],e[3],1):(e=Bn.exec(t))?new _n(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=In.exec(t))?kn(e[1],e[2],e[3],e[4]):(e=Fn.exec(t))?kn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Qn.exec(t))?Dn(e[1],e[2]/100,e[3]/100,1):(e=Cn.exec(t))?Dn(e[1],e[2]/100,e[3]/100,e[4]):wn.hasOwnProperty(t)?Ln(wn[t]):"transparent"===t?new _n(NaN,NaN,NaN,0):null}function Ln(t){return new _n(t>>16&255,t>>8&255,255&t,1)}function kn(t,e,n,r){return r<=0&&(t=e=n=NaN),new _n(t,e,n,r)}function Gn(t,e,n,r){return 1===arguments.length?function(t){return t instanceof gn||(t=Sn(t)),t?new _n((t=t.rgb()).r,t.g,t.b,t.opacity):new _n}(t):new _n(t,e,n,null==r?1:r)}function _n(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Rn(){return`#${Nn(this.r)}${Nn(this.g)}${Nn(this.b)}`}function En(){const t=Tn(this.opacity);return`${1===t?"rgb(":"rgba("}${Mn(this.r)}, ${Mn(this.g)}, ${Mn(this.b)}${1===t?")":`, ${t})`}`}function Tn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nn(t){return((t=Mn(t))<16?"0":"")+t.toString(16)}function Dn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zn(t,e,n,r)}function Xn(t){if(t instanceof Zn)return new Zn(t.h,t.s,t.l,t.opacity);if(t instanceof gn||(t=Sn(t)),!t)return new Zn;if(t instanceof Zn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Zn(o,s,l,t.opacity)}function Zn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Vn(t){return(t=(t||0)%360)<0?t+360:t}function Hn(t){return Math.max(0,Math.min(1,t||0))}function Wn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}hn(gn,Sn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Un,formatHex:Un,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Xn(this).formatHsl()},formatRgb:An,toString:An}),hn(_n,Gn,dn(gn,{brighter(t){return t=null==t?pn:Math.pow(pn,t),new _n(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?fn:Math.pow(fn,t),new _n(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _n(Mn(this.r),Mn(this.g),Mn(this.b),Tn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rn,formatHex:Rn,formatHex8:function(){return`#${Nn(this.r)}${Nn(this.g)}${Nn(this.b)}${Nn(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:En,toString:En})),hn(Zn,(function(t,e,n,r){return 1===arguments.length?Xn(t):new Zn(t,e,n,null==r?1:r)}),dn(gn,{brighter(t){return t=null==t?pn:Math.pow(pn,t),new Zn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?fn:Math.pow(fn,t),new Zn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _n(Wn(t>=240?t-240:t+120,i,r),Wn(t,i,r),Wn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zn(Vn(this.h),Hn(this.s),Hn(this.l),Tn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Tn(this.opacity);return`${1===t?"hsl(":"hsla("}${Vn(this.h)}, ${100*Hn(this.s)}%, ${100*Hn(this.l)}%${1===t?")":`, ${t})`}`}}));var Yn=t=>()=>t;function zn(t){return 1==(t=+t)?On:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Yn(isNaN(e)?n:e)}}function On(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Yn(isNaN(t)?e:t)}var Jn=function t(e){var n=zn(e);function r(t,e){var r=n((t=Gn(t)).r,(e=Gn(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=On(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Pn(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function jn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=rr(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function Kn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function qn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function $n(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=rr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var tr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,er=new RegExp(tr.source,"g");function nr(t,e){var n,r,i,a=tr.lastIndex=er.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=tr.exec(t))&&(r=er.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:qn(n,r)})),a=er.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function rr(t,e){var n,r=typeof e;return null==e||"boolean"===r?Yn(e):("number"===r?qn:"string"===r?(n=Sn(e))?(e=n,Jn):nr:e instanceof Sn?Jn:e instanceof Date?Kn:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Pn:Array.isArray(e)?jn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?$n:qn)(t,e)}function ir(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ar,or=180/Math.PI,sr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lr(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*or,skewX:Math.atan(l)*or,scaleX:o,scaleY:s}}function cr(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:qn(t,i)},{i:l-2,x:qn(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:qn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:qn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,l),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:qn(t,n)},{i:s-2,x:qn(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var ur,hr,dr=cr((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?sr:lr(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),gr=cr((function(t){return null==t?sr:(ar||(ar=document.createElementNS("http://www.w3.org/2000/svg","g")),ar.setAttribute("transform",t),(t=ar.transform.baseVal.consolidate())?lr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):sr)}),", ",")",")"),fr=0,pr=0,vr=0,mr=1e3,yr=0,br=0,xr=0,Br="object"==typeof performance&&performance.now?performance:Date,Ir="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fr(){return br||(Ir(Qr),br=Br.now()+xr)}function Qr(){br=0}function Cr(){this._call=this._time=this._next=null}function wr(t,e,n){var r=new Cr;return r.restart(t,e,n),r}function Ur(){br=(yr=Br.now())+xr,fr=pr=0;try{!function(){Fr(),++fr;for(var t,e=ur;e;)(t=br-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fr}()}finally{fr=0,function(){var t,e,n=ur,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ur=e);hr=t,Sr(r)}(),br=0}}function Ar(){var t=Br.now(),e=t-yr;e>mr&&(xr-=e,yr=t)}function Sr(t){fr||(pr&&(pr=clearTimeout(pr)),t-br>24?(t<1/0&&(pr=setTimeout(Ur,t-Br.now()-xr)),vr&&(vr=clearInterval(vr))):(vr||(yr=Br.now(),vr=setInterval(Ar,mr)),fr=1,Ir(Ur)))}function Lr(t,e,n){var r=new Cr;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Cr.prototype=wr.prototype={constructor:Cr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Fr():+n)+(null==e?0:+e),this._next||hr===this||(hr?hr._next=this:ur=this,hr=this),this._call=t,this._time=n,Sr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sr())}};var kr=Et("start","end","cancel","interrupt"),Gr=[],_r=0,Rr=1,Er=2,Tr=3,Mr=4,Nr=5,Dr=6;function Xr(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(t){n.state=Rr,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var c,u,h,d;if(n.state!==Rr)return l();for(c in i)if((d=i[c]).name===n.name){if(d.state===Tr)return Lr(o);d.state===Mr?(d.state=Dr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=Dr,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(Lr((function(){n.state===Tr&&(n.state=Mr,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=Er,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Er){for(n.state=Tr,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=Nr,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);n.state===Nr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=Dr,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=wr(a,0,n.time)}(t,n,{name:e,index:r,group:i,on:kr,tween:Gr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:_r})}function Zr(t,e){var n=Hr(t,e);if(n.state>_r)throw new Error("too late; already scheduled");return n}function Vr(t,e){var n=Hr(t,e);if(n.state>Tr)throw new Error("too late; already running");return n}function Hr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Wr(t,e){var n,r;return function(){var i=Vr(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function Yr(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Vr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function zr(t,e,n){var r=t._id;return t.each((function(){var t=Vr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Hr(t,r).value[e]}}function Or(t,e){var n;return("number"==typeof e?qn:e instanceof Sn?Jn:(n=Sn(e))?(e=n,Jn):nr)(t,e)}function Jr(t){return function(){this.removeAttribute(t)}}function Pr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jr(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Kr(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function qr(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttribute(t)}}function $r(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttributeNS(t.space,t.local)}}function ti(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function ei(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function ni(t,e){return function(){Zr(this,t).delay=+e.apply(this,arguments)}}function ri(t,e){return e=+e,function(){Zr(this,t).delay=e}}function ii(t,e){return function(){Vr(this,t).duration=+e.apply(this,arguments)}}function ai(t,e){return e=+e,function(){Vr(this,t).duration=e}}var oi=je.prototype.constructor;function si(t){return function(){this.style.removeProperty(t)}}var li=0;function ci(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ui(){return++li}var hi=je.prototype;function di(t){return t*t*t}function gi(t){return--t*t*t+1}ci.prototype={constructor:ci,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=zt(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=r[o],u=c.length,h=a[o]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,Xr(h[d],e,n,d,h,Hr(s,n)));return new ci(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Jt(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,g=t.call(l,l.__data__,h,c),f=Hr(l,n),p=0,v=g.length;p<v;++p)(d=g[p])&&Xr(d,e,n,p,g,f);a.push(g),o.push(l)}return new ci(a,o,e,n)},selectChild:hi.selectChild,selectChildren:hi.selectChildren,filter:function(t){"function"!=typeof t&&(t=jt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new ci(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=e[s],u=n[s],h=c.length,d=o[s]=new Array(h),g=0;g<h;++g)(l=c[g]||u[g])&&(d[g]=l);for(;s<r;++s)o[s]=e[s];return new ci(o,this._parents,this._name,this._id)},selection:function(){return new oi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ui(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=Hr(o,e);Xr(o,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ci(r,this._parents,t,n)},call:hi.call,nodes:hi.nodes,node:hi.node,size:hi.size,empty:hi.empty,each:hi.each,on:function(t,e){var n=this._id;return arguments.length<2?Hr(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Zr:Vr;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=Zt(t),r="transform"===n?gr:Or;return this.attrTween(t,"function"==typeof e?(n.local?$r:qr)(n,r,zr(this,"attr."+t,e)):null==e?(n.local?Pr:Jr)(n):(n.local?Kr:jr)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Zt(t);return this.tween(n,(r.local?ti:ei)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?dr:Or;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=be(this,t),o=(this.style.removeProperty(t),be(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,si(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=be(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=be(this,t)),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}(t,r,zr(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var l=Vr(this,t),c=l.on,u=null==l.value[o]?a||(a=si(e)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=be(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(zr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Hr(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?Wr:Yr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ni:ri)(e,t)):Hr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ii:ai)(e,t)):Hr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Vr(this,t).ease=e}}(e,t)):Hr(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Vr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each((function(){var n=Vr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===i&&a()}))},[Symbol.iterator]:hi[Symbol.iterator]};var fi={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function pi(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}je.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>Er&&n.state<Nr,n.state=Dr,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}(this,t)}))},je.prototype.transition=function(t){var e,n;t instanceof ci?(e=t._id,t=t._name):(e=ui(),(n=fi).time=Fr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)(o=s[c])&&Xr(o,t,e,c,s,n||pi(o,e));return new ci(r,this._parents,t,e)};const vi=Math.PI,mi=2*vi,yi=1e-6,bi=mi-yi;function xi(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Bi{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?xi:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xi;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,a){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=n-t,l=r-e,c=a-t,u=o-e,h=c*c+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>yi)if(Math.abs(u*s-l*c)>yi&&i){let d=n-a,g=r-o,f=s*s+l*l,p=d*d+g*g,v=Math.sqrt(f),m=Math.sqrt(h),y=i*Math.tan((vi-Math.acos((f+h-p)/(2*v*m)))/2),b=y/m,x=y/v;Math.abs(b-1)>yi&&this._append`L${t+b*c},${e+b*u}`,this._append`A${i},${i},0,0,${+(u*d>c*g)},${this._x1=t+x*s},${this._y1=e+x*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,c=e+s,u=1^a,h=a?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>yi||Math.abs(this._y1-c)>yi)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%mi+mi),h>bi?this._append`A${n},${n},0,1,${u},${t-o},${e-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>yi&&this._append`A${n},${n},0,${+(h>=vi)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function Ii(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Fi(t){return(t=Ii(Math.abs(t)))?t[1]:NaN}var Qi,Ci=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wi(t){if(!(e=Ci.exec(t)))throw new Error("invalid format: "+t);var e;return new Ui({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ui(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ai(t,e){var n=Ii(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}wi.prototype=Ui.prototype,Ui.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Si={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ai(100*t,e),r:Ai,s:function(t,e){var n=Ii(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Qi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ii(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Li(t){return t}var ki,Gi,_i,Ri=Array.prototype.map,Ei=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ti(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Li:(e=Ri.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Li:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ri.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=wi(t)).fill,n=t.align,h=t.sign,d=t.symbol,g=t.zero,f=t.width,p=t.comma,v=t.precision,m=t.trim,y=t.type;"n"===y?(p=!0,y="g"):Si[y]||(void 0===v&&(v=12),m=!0,y="g"),(g||"0"===e&&"="===n)&&(g=!0,e="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?a:/[%p]/.test(y)?l:"",B=Si[y],I=/[defgprs%]/.test(y);function F(t){var i,a,l,d=b,F=x;if("c"===y)F=B(t)+F,t="";else{var Q=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:B(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),Q&&0==+t&&"+"!==h&&(Q=!1),d=(Q?"("===h?h:c:"-"===h||"("===h?"":h)+d,F=("s"===y?Ei[8+Qi/3]:"")+F+(Q&&"("===h?")":""),I)for(i=-1,a=t.length;++i<a;)if(48>(l=t.charCodeAt(i))||l>57){F=(46===l?o+t.slice(i+1):t.slice(i))+F,t=t.slice(0,i);break}}p&&!g&&(t=r(t,1/0));var C=d.length+t.length+F.length,w=C<f?new Array(f-C+1).join(e):"";switch(p&&g&&(t=r(w+t,w.length?f-F.length:1/0),w=""),n){case"<":t=d+t+F+w;break;case"=":t=d+w+t+F;break;case"^":t=w.slice(0,C=w.length>>1)+d+t+F+w.slice(C);break;default:t=w+d+t+F}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),F.toString=function(){return t+""},F}return{format:h,formatPrefix:function(t,e){var n=h(((t=wi(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Fi(e)/3))),i=Math.pow(10,-r),a=Ei[8+r/3];return function(t){return n(i*t)+a}}}}function Mi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ni(t){return+t}ki=Ti({thousands:",",grouping:[3],currency:["$",""]}),Gi=ki.format,_i=ki.formatPrefix;var Di=[0,1];function Xi(t){return t}function Zi(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Vi(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Zi(i,r),a=n(o,a)):(r=Zi(r,i),a=n(a,o)),function(t){return a(r(t))}}function Hi(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Zi(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=gt(t,e,1,r)-1;return a[n](i[n](e))}}function Wi(){var t,e,n,r,i,a,o=Di,s=Di,l=rr,c=Xi;function u(){var t=Math.min(o.length,s.length);return c!==Xi&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?Hi:Vi,i=a=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),s,l)))(t(c(e)))}return h.invert=function(n){return c(e((a||(a=r(s,o.map(t),qn)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,Ni),u()):o.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=ir,u()},h.clamp=function(t){return arguments.length?(c=!!t||Xi,u()):c!==Xi},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function Yi(t,e,n,r){var i,a=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?yt(e,t,n):yt(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=wi(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Fi(e)/3)))-Fi(Math.abs(t)))}(a,o))||(r.precision=i),_i(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Fi(e)-Fi(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Fi(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return Gi(r)}function zi(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,a,o]=r?mt(e,t,n):mt(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let t=0;t<s;++t)l[t]=(a-t)/-o;else for(let t=0;t<s;++t)l[t]=(a-t)*o;else if(o<0)for(let t=0;t<s;++t)l[t]=(i+t)/-o;else for(let t=0;t<s;++t)l[t]=(i+t)*o;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Yi(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=yt(l,c,n))===r)return a[o]=l,a[s]=c,e(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Oi(){var t=Wi()(Xi,Xi);return t.copy=function(){return e=t,Oi().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},Mi.apply(t,arguments),zi(t)}var Ji=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");function Pi(t){return function(){return t}}const ji=Math.abs,Ki=Math.atan2,qi=Math.cos,$i=Math.max,ta=Math.min,ea=Math.sin,na=Math.sqrt,ra=1e-12,ia=Math.PI,aa=ia/2,oa=2*ia;function sa(t){return t>=1?aa:t<=-1?-aa:Math.asin(t)}function la(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Bi(e)}function ca(t){return t.innerRadius}function ua(t){return t.outerRadius}function ha(t){return t.startAngle}function da(t){return t.endAngle}function ga(t){return t&&t.padAngle}function fa(t,e,n,r,i,a,o){var s=t-n,l=e-r,c=(o?a:-a)/na(s*s+l*l),u=c*l,h=-c*s,d=t+u,g=e+h,f=n+u,p=r+h,v=(d+f)/2,m=(g+p)/2,y=f-d,b=p-g,x=y*y+b*b,B=i-a,I=d*p-f*g,F=(b<0?-1:1)*na($i(0,B*B*x-I*I)),Q=(I*b-y*F)/x,C=(-I*y-b*F)/x,w=(I*b+y*F)/x,U=(-I*y+b*F)/x,A=Q-v,S=C-m,L=w-v,k=U-m;return A*A+S*S>L*L+k*k&&(Q=w,C=U),{cx:Q,cy:C,x01:-u,y01:-h,x11:Q*(i/B-1),y11:C*(i/B-1)}}function pa(){var t=ca,e=ua,n=Pi(0),r=null,i=ha,a=da,o=ga,s=null,l=la(c);function c(){var c,u,h=+t.apply(this,arguments),d=+e.apply(this,arguments),g=i.apply(this,arguments)-aa,f=a.apply(this,arguments)-aa,p=ji(f-g),v=f>g;if(s||(s=c=l()),d<h&&(u=d,d=h,h=u),d>ra)if(p>oa-ra)s.moveTo(d*qi(g),d*ea(g)),s.arc(0,0,d,g,f,!v),h>ra&&(s.moveTo(h*qi(f),h*ea(f)),s.arc(0,0,h,f,g,v));else{var m,y,b=g,x=f,B=g,I=f,F=p,Q=p,C=o.apply(this,arguments)/2,w=C>ra&&(r?+r.apply(this,arguments):na(h*h+d*d)),U=ta(ji(d-h)/2,+n.apply(this,arguments)),A=U,S=U;if(w>ra){var L=sa(w/h*ea(C)),k=sa(w/d*ea(C));(F-=2*L)>ra?(B+=L*=v?1:-1,I-=L):(F=0,B=I=(g+f)/2),(Q-=2*k)>ra?(b+=k*=v?1:-1,x-=k):(Q=0,b=x=(g+f)/2)}var G=d*qi(b),_=d*ea(b),R=h*qi(I),E=h*ea(I);if(U>ra){var T,M=d*qi(x),N=d*ea(x),D=h*qi(B),X=h*ea(B);if(p<ia)if(T=function(t,e,n,r,i,a,o,s){var l=n-t,c=r-e,u=o-i,h=s-a,d=h*l-u*c;if(!(d*d<ra))return[t+(d=(u*(e-a)-h*(t-i))/d)*l,e+d*c]}(G,_,D,X,M,N,R,E)){var Z=G-T[0],V=_-T[1],H=M-T[0],W=N-T[1],Y=1/ea(function(t){return t>1?0:t<-1?ia:Math.acos(t)}((Z*H+V*W)/(na(Z*Z+V*V)*na(H*H+W*W)))/2),z=na(T[0]*T[0]+T[1]*T[1]);A=ta(U,(h-z)/(Y-1)),S=ta(U,(d-z)/(Y+1))}else A=S=0}Q>ra?S>ra?(m=fa(D,X,G,_,d,S,v),y=fa(M,N,R,E,d,S,v),s.moveTo(m.cx+m.x01,m.cy+m.y01),S<U?s.arc(m.cx,m.cy,S,Ki(m.y01,m.x01),Ki(y.y01,y.x01),!v):(s.arc(m.cx,m.cy,S,Ki(m.y01,m.x01),Ki(m.y11,m.x11),!v),s.arc(0,0,d,Ki(m.cy+m.y11,m.cx+m.x11),Ki(y.cy+y.y11,y.cx+y.x11),!v),s.arc(y.cx,y.cy,S,Ki(y.y11,y.x11),Ki(y.y01,y.x01),!v))):(s.moveTo(G,_),s.arc(0,0,d,b,x,!v)):s.moveTo(G,_),h>ra&&F>ra?A>ra?(m=fa(R,E,M,N,h,-A,v),y=fa(G,_,D,X,h,-A,v),s.lineTo(m.cx+m.x01,m.cy+m.y01),A<U?s.arc(m.cx,m.cy,A,Ki(m.y01,m.x01),Ki(y.y01,y.x01),!v):(s.arc(m.cx,m.cy,A,Ki(m.y01,m.x01),Ki(m.y11,m.x11),!v),s.arc(0,0,h,Ki(m.cy+m.y11,m.cx+m.x11),Ki(y.cy+y.y11,y.cx+y.x11),v),s.arc(y.cx,y.cy,A,Ki(y.y11,y.x11),Ki(y.y01,y.x01),!v))):s.arc(0,0,h,I,B,v):s.lineTo(R,E)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-ia/2;return[qi(r)*n,ea(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Pi(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Pi(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Pi(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Pi(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Pi(+t),c):i},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Pi(+t),c):a},c.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Pi(+t),c):o},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}function va(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ma(t){this._context=t}function ya(t){return new ma(t)}function ba(t){return t[0]}function xa(t){return t[1]}function Ba(t,e){var n=Pi(!0),r=null,i=ya,a=null,o=la(s);function s(s){var l,c,u,h=(s=va(s)).length,d=!1;for(null==r&&(a=i(u=o())),l=0;l<=h;++l)!(l<h&&n(c=s[l],l,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(c,l,s),+e(c,l,s));if(u)return a=null,u+""||null}return t="function"==typeof t?t:void 0===t?ba:Pi(t),e="function"==typeof e?e:void 0===e?xa:Pi(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:Pi(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:Pi(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:Pi(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),s):r},s}function Ia(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Fa(t){return t}function Qa(t,e,n){this.k=t,this.x=e,this.y=n}ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Qa.prototype={constructor:Qa,scale:function(t){return 1===t?this:new Qa(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Qa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Qa.prototype;class Ca extends st{getComputedStyleValue(t){return getComputedStyle(this).getPropertyValue(t).trim()}firstUpdated(t){super.firstUpdated(t),Ke(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",(t=>{Ke(t.currentTarget.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)})).on("keydown.keyboard",(t=>{Ke(t.currentTarget.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)}))}static get greys(){const t="#999999",e={white:"#ffffff"};return e.light75=Jn(t,"#ffffff")(.75),e.light50=Jn(t,"#ffffff")(.5),e.light25=Jn(t,"#ffffff")(.25),e.grey=t,e.dark25=Jn(t,"#000000")(.25),e.dark50=Jn(t,"#000000")(.5),e.dark75=Jn(t,"#000000")(.75),e.black="#000000",e}static get shadows(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}static cssBoxShadow(t,e=!1,n=!1){const r=this.shadows.opacityUmbra+this.shadows.opacityBoost,i=this.shadows.opacityPenumbra+this.shadows.opacityBoost,a=this.shadows.opacityAmbient+this.shadows.opacityBoost,o=n?`rgba(${this.shadows.inverseBaselineColorString}, ${r})`:`rgba(${this.shadows.baselineColorString}, ${r})`,s=n?`rgba(${this.shadows.inverseBaselineColorString}, ${i})`:`rgba(${this.shadows.baselineColorString}, ${i})`,l=n?`rgba(${this.shadows.inverseBaselineColorString}, ${a})`:`rgba(${this.shadows.baselineColorString}, ${a})`,c=this.shadows.mapUmbra[t],u=this.shadows.mapPenumbra[t],h=this.shadows.mapAmbient[t];return`${e?`${-c.y}px ${c.y/2}px ${c.b}px ${c.s}px`:`${c.y/2}px ${c.y}px ${c.b}px ${c.s}px`} ${o}, ${e?`${-u.y}px ${u.y/2}px ${u.b}px ${u.s}px`:`${u.y/2}px ${u.y}px ${u.b}px ${u.s}px`} ${s}, ${e?`${-h.y}px ${h.y/2}px ${h.b}px ${h.s}px`:`${h.y/2}px ${h.y}px ${h.b}px ${h.s}px`} ${l}`}static get svgDefs(){const t=Ca.shadows;return`\n      <defs>\n        ${t.elevations.map((e=>`\n        <filter id=shadow-${e} filterUnits="userSpaceOnUse" x="-100%" y="-100%" width="200%" height="200%">\n          <feComponentTransfer in="SourceAlpha" result="solid">\n            <feFuncA type="table" tableValues="0 1 1"/>\n          </feComponentTransfer>\n          <feOffset in="solid" result="offU" dx=${t.mapUmbra[e].y/2} dy=${t.mapUmbra[e].y} />\n          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[e].y/2} dy=${t.mapPenumbra[e].y} />\n          <feOffset in="solid" result="offA" dx=${t.mapAmbient[e].y/2} dy=${t.mapAmbient[e].y} />\n          ${0===t.mapUmbra[e].s?"":`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[e].s)} />`}\n          ${0===t.mapPenumbra[e].s?"":`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[e].s)} />`}\n          ${0===t.mapAmbient[e].s?"":`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[e].s)} />`}\n          <feGaussianBlur in=${0===t.mapUmbra[e].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[e].b/2} />\n          <feGaussianBlur in=${0===t.mapPenumbra[e].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[e].b/2} />\n          <feGaussianBlur in=${0===t.mapAmbient[e].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[e].b/2} />\n          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />\n          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />\n          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />\n          <feComposite in="opU" in2="blurU" result="shU" operator="in" />\n          <feComposite in="opP" in2="blurP" result="shP" operator="in" />\n          <feComposite in="opA" in2="blurA" result="shA" operator="in" />\n          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />\n          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />\n          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />\n          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />\n          <feMerge>\n            <feMergeNode in="finalU" />\n            <feMergeNode in="finalP" />\n            <feMergeNode in="finalA" />\n            <feMergeNode in="SourceGraphic" />\n          </feMerge>\n        </filter>`))}\n      </defs>\n    `}static get svgFilters(){const t=Ca.shadows,e=t.elevations.map((e=>Y`
        <filter id=${`shadow-${e}`} x="-250%" y="-250%" width="600%" height="600%">
          <feComponentTransfer in="SourceAlpha" result="solid">
            <feFuncA type="table" tableValues="0 1 1"/>
          </feComponentTransfer>
          <feOffset in="solid" result="offU" dx=${t.mapUmbra[e].y/2} dy=${t.mapUmbra[e].y} />
          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[e].y/2} dy=${t.mapPenumbra[e].y} />
          <feOffset in="solid" result="offA" dx=${t.mapAmbient[e].y/2} dy=${t.mapAmbient[e].y} />
          ${0===t.mapUmbra[e].s?Y``:Y`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[e].s)} />`}
          ${0===t.mapPenumbra[e].s?Y``:Y`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[e].s)} />`}
          ${0===t.mapAmbient[e].s?Y``:Y`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[e].s)} />`}
          <feGaussianBlur in=${0===t.mapUmbra[e].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[e].b/2} />
          <feGaussianBlur in=${0===t.mapPenumbra[e].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[e].b/2} />
          <feGaussianBlur in=${0===t.mapAmbient[e].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[e].b/2} />
          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />
          <feComposite in="opU" in2="blurU" result="shU" operator="in" />
          <feComposite in="opP" in2="blurP" result="shP" operator="in" />
          <feComposite in="opA" in2="blurA" result="shA" operator="in" />
          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />
          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />
          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />
          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />
          <feMerge>
            <feMergeNode in="finalU" />
            <feMergeNode in="finalP" />
            <feMergeNode in="finalA" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>`));return Y`
      <svg class="defs">
        <defs>
          ${e}
        </defs>
      </svg>
    `}static get styles(){return s`
      :host {
        ---shadow-0: var(--shadow-0, ${o(this.cssBoxShadow(0))});
        ---shadow-2: var(--shadow-2, ${o(this.cssBoxShadow(2))});
        ---shadow-4: var(--shadow-4, ${o(this.cssBoxShadow(4))});
        ---shadow-8: var(--shadow-8, ${o(this.cssBoxShadow(8))});

        ---color-background: var(--color-background, ${o(this.greys.white)});
        ---color-border: var(--color-border, ${o(this.greys.light75)});
        ---color-text: var(--color-text, ${o(this.greys.dark75)});
        ---color-text-inverse: var(--color-text-inverse, ${o(this.greys.white)});
        ---color-link: var(--color-link, ${o(this.greys.dark25)});
        ---color-element-background: var(--color-element-background, ${o(this.greys.light75)});
        ---color-element-disabled: var(--color-element-disabled, ${o(this.greys.light50)});
        ---color-element-enabled: var(--color-element-enabled, ${o(this.greys.dark25)});
        ---color-element-selected: var(--color-element-selected, ${o(this.greys.grey)});
        ---color-element-border: var(--color-element-border, ${o(this.greys.dark50)});
        ---color-element-emphasis: var(--color-element-emphasis, ${o(this.greys.dark75)});

        ---font-family-base: var(--font-family-base, "Source Sans", sans-serif);
        ---font-family-math: var(--font-family-math, "Source Serif", serif);

        ---border: var(--border, 1px solid var(---color-border));
        ---border-radius: var(--border-radius, 0.25rem);
        ---transition-duration: var(--transition-duration, 500ms);

        font-family: var(---font-family-base);
      }

      :host,
      :host *,
      :host *::before,
      :host *::after {
        box-sizing: border-box;
      }

      .math-greek {
        font-family: var(---font-family-math);
        font-style: normal;
      }

      .math-num {
        font-family: var(---font-family-base);
        font-style: normal;
      }

      .math-var {
        font-family: var(---font-family-math);
        font-style: italic;
      }

      .defs {
        display: block;

        width: 0;
        height: 0;
      }
    `}}customElements.define("decidables-button",class extends Ca{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,s`
        :host {
          margin: 0.25rem;
        }

        button {
          width: 100%;
          height: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);

          border: 0;
          border-radius: var(---border-radius);
          outline: none;
        }

        button:disabled {
          background-color: var(--decidables-button-background-color, var(---color-element-disabled));
          outline: none;
          box-shadow: none;
        }

        button:enabled {
          cursor: pointer;

          background-color: var(--decidables-button-background-color, var(---color-element-enabled));
          outline: none;
          box-shadow: var(---shadow-2);
        }

        button:enabled:hover {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        button:enabled:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(.keyboard) button:enabled:focus {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) button:enabled:focus:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return W`
      <button ?disabled=${this.disabled}>
        <slot></slot>
      </button>
    `}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const wa=t=>t??O;customElements.define("decidables-slider",class extends Ca{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}changed(t){this.value=t.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,s`
        :host {
          ---shadow-2-rotate: var(--shadow-2-rotate, ${o(this.cssBoxShadow(2,!0,!1))});
          ---shadow-4-rotate: var(--shadow-4-rotate, ${o(this.cssBoxShadow(4,!0,!1))});
          ---shadow-8-rotate: var(--shadow-8-rotate, ${o(this.cssBoxShadow(8,!0,!1))});

          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        label {
          margin: 0.25rem 0.25rem 0;
        }

        .range {
          display: inline-block;

          width: 3.5rem;
          height: 4.75rem;
          margin: 0 0.25rem 0.25rem;
        }

        decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;

          margin: 0 0.25rem 0.25rem;
        }

        /* Adapted from http://danielstern.ca/range.css/#/ */
        /* Overall */
        input[type=range] {
          width: 4.75rem;
          height: 3.5rem;
          padding: 0;
          margin: 0;

          background-color: unset;

          transform: rotate(-90deg);
          transform-origin: 2.375rem 2.375rem;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:enabled {
          cursor: ns-resize;
        }

        input[type=range]:focus {
          outline: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-tooltip {
          display: none;
        }

        /* Track */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-runnable-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-track {
          width: 100%;
          height: 4px;

          color: transparent;

          background: transparent;
          border-color: transparent;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-lower {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-upper {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-lower {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-upper {
          background: var(---color-element-disabled);
        }

        /* Thumb */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-thumb {
          width: 10px;
          height: 20px;
          margin-top: -8px;

          border: 0;
          border-radius: 4px;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:disabled::-webkit-slider-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=range]:enabled::-webkit-slider-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        input[type=range]:enabled:hover::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        input[type=range]:enabled:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-thumb {
          width: 10px;
          height: 20px;

          border: 0;
          border-radius: 4px;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-moz-range-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-moz-range-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-thumb {
          width: 10px;
          height: 20px;
          margin-top: 0;

          background: #999999;
          /* background: var(---color-element-enabled); */
          border: 0;
          border-radius: 4px;
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-ms-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-ms-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }
      `]}render(){return W`
      <label for="slider">
        <slot></slot>
      </label>
      <div class="range">
        <input type="range" id="slider" min=${wa(this.min)} max=${wa(this.max)} step=${wa(this.step)} .value=${this.value} @change=${this.changed.bind(this)} @input=${this.inputted.bind(this)}>
      </div>
      <decidables-spinner min=${wa(this.min)} max=${wa(this.max)} step=${wa(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}></decidables-spinner>
    `}});customElements.define("decidables-spinner",class extends Ca{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,s`
        :host {
          ---decidables-spinner-font-size: var(--decidables-spinner-font-size, 1.125rem);
          ---decidables-spinner-input-width: var(--decidables-spinner-input-width, 4rem);
          ---decidables-spinner-prefix: var(--decidables-spinner-prefix, "");

          ---decidables-spinner-postfix: var(--decidables-spinner-postfix, "");
          ---decidables-spinner-postfix-padding: var(--decidables-spinner-postfix-padding, 0);

          display: block;
        }

        label {
          position: relative;
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0;

          font-size: 0.75rem;
        }

        label::before {
          position: absolute;
          bottom: 1px;
          left: calc(50% - var(---decidables-spinner-input-width) / 2 + 0.25rem);

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-prefix);
        }

        label::after {
          position: absolute;
          right: 0.25rem;
          bottom: 1px;

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-postfix);
        }

        input[type=number] {
          width: var(---decidables-spinner-input-width);
          padding-right: var(---decidables-spinner-postfix-padding);

          font-family: var(---font-family-base);
          font-size: var(---decidables-spinner-font-size);
          color: inherit;
          text-align: right;

          background: none;
          border: 0;
          border-radius: 0;
          outline: none;
          box-shadow: var(---shadow-2);

          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }

        input[type=number]:hover {
          box-shadow: var(---shadow-4);
        }

        input[type=number]:focus,
        input[type=number]:active {
          box-shadow: var(---shadow-8);
        }

        input[type=number]:disabled {
          color: var(---color-text);

          border: 0;
          box-shadow: none;

          /* HACK: Use correct text color in Safari */
          -webkit-opacity: 1;
          /* HACK: Hide spinners in disabled input for Firefox and Safari */
          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */
          /* HACK: Use correct text color in Safari */
          -webkit-text-fill-color: var(---color-text);
        }

        /* HACK: Hide spinners in disabled input for Firefox and Safari */
        input[type=number]:disabled::-webkit-outer-spin-button,
        input[type=number]:disabled::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }
      `]}render(){return W`
      <label>
        <slot></slot>
        <input ?disabled=${this.disabled} type="number" min=${wa(this.min)} max=${wa(this.max)} step=${wa(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}>
      </label>
    `}});customElements.define("decidables-switch",class extends Ca{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}static get styles(){return[super.styles,s`
        :host {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */
        input[type=checkbox] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=checkbox] + label {
          order: 1;

          margin: 0 0.25rem 0.25rem;

          font-weight: 400;
        }

        input[type=checkbox] + label + label {
          position: relative;

          min-width: 24px;
          padding: 0 0 36px;
          margin: 0.25rem 0.25rem 0;

          font-weight: 400;

          outline: none;
        }

        input[type=checkbox] + label + label::before,
        input[type=checkbox] + label + label::after {
          position: absolute;

          left: 50%;

          margin: 0;

          content: "";

          outline: 0;

          transition: all var(---transition-duration) ease;
          transform: translate(-50%, 0);
        }

        input[type=checkbox] + label + label::before {
          bottom: 1px;

          width: 8px;
          height: 34px;

          background-color: var(---color-element-disabled);
          border-radius: 4px;
        }

        input[type=checkbox] + label + label::after {
          bottom: 0;

          width: 18px;
          height: 18px;

          background-color: var(---color-element-enabled);
          border-radius: 50%;
          box-shadow: var(---shadow-2);
        }

        input[type=checkbox]:checked + label + label::after {
          transform: translate(-50%, -100%);
        }

        input[type=checkbox]:disabled + label + label::after {
          background-color: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=checkbox]:enabled + label,
        input[type=checkbox]:enabled + label + label {
          cursor: pointer;
        }

        input[type=checkbox]:enabled + label:hover + label::after,
        input[type=checkbox]:enabled + label + label:hover::after {
          box-shadow: var(---shadow-4);
        }

        input[type=checkbox]:enabled + label:active + label::after,
        input[type=checkbox]:enabled + label + label:active::after {
          box-shadow: var(---shadow-8);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {
          box-shadow: var(---shadow-4);
        }

        /* stylelint-disable selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,
        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {
          box-shadow: var(---shadow-8);
        }
        /* stylelint-enable selector-max-compound-selectors */
        `]}render(){return W`
      <input type="checkbox" id="switch" ?checked=${this.checked} ?disabled=${this.disabled} @change=${this.changed.bind(this)}>
      <label for="switch">
        <slot name="off-label"></slot>
      </label>
      <label for="switch">
        <slot></slot>
      </label>
    `}});customElements.define("decidables-toggle",class extends Ca{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,s`
        fieldset {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;

          margin: 0.25rem;

          border: 0;
        }

        legend {
          text-align: center;
        }
      `]}render(){return W`
      <fieldset ?disabled=${this.disabled}>
        <legend><slot name="label"></slot></legend>
        <slot></slot>
      </fieldset>
    `}});customElements.define("decidables-toggle-option",class extends Ca{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1,this.name=void 0,this.value=void 0}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}static get styles(){return[super.styles,s`
        :host {
          display: flex;
        }

        input[type=radio] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=radio] + label {
          width: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);
          text-align: center;

          cursor: pointer;

          background-color: var(---color-element-enabled);
          border: 0;
          border-radius: 0;
          outline: none;

          box-shadow: var(---shadow-2);
        }

        input[type=radio]:checked + label {
          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-2);
        }

        input[type=radio] + label:hover {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        input[type=radio] + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(:first-of-type) input[type=radio] + label {
          border-top-left-radius: 0.25rem;
          border-top-right-radius: 0.25rem;
        }

        :host(:last-of-type) input[type=radio] + label {
          border-bottom-right-radius: 0.25rem;
          border-bottom-left-radius: 0.25rem;
        }

        :host(.keyboard) input[type=radio]:focus + label {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus:checked + label {
          z-index: 1;

          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return W`
      <input type="radio" id="toggle-option" name=${this.name} value=${this.value} .checked=${this.checked} @change=${this.changed.bind(this)}>
      <label for="toggle-option">
        <slot></slot>
      </label>
    `}});const Ua={fromAttribute:t=>t.split(/\s+/).map((t=>Number.parseFloat(t))),toAttribute:t=>t.length?t.map((t=>t.toFixed(3))).join(" "):null};function Aa(t){return class extends t{static get properties(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.width=NaN,this.height=NaN,this.rem=NaN}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(this.getDimensions.bind(this)),this.resizeObserver.observe(this)}disconnectedCallback(){this.resizeObserver.unobserve(this),super.disconnectedCallback()}}}class Sa extends Ca{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return{x:Ji[0],a:Ji[4],l:Ji[5],v:Ji[7],p:Ji[1],g:Ji[2],w:Ji[3],u:Ji[6],chosen:Ji[8],better:"#4545d0",worse:"#f032e6",even:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}}static get lights(){return Object.keys(Sa.colors).reduce(((t,e)=>(t[e]=Jn(Sa.colors[e],"#ffffff")(.5),t)),{})}static get darks(){return Object.keys(Sa.colors).reduce(((t,e)=>(t[e]=Jn(Sa.colors[e],"#000000")(.5),t)),{})}static get styles(){return[super.styles,s`
        :host {
          ---color-x: var(--color-x, ${o(this.colors.x)});
          ---color-a: var(--color-a, ${o(this.colors.a)});
          ---color-l: var(--color-l, ${o(this.colors.l)});
          ---color-v: var(--color-v, ${o(this.colors.v)});
          ---color-p: var(--color-p, ${o(this.colors.p)});
          ---color-g: var(--color-g, ${o(this.colors.g)});
          ---color-w: var(--color-w, ${o(this.colors.w)});
          ---color-u: var(--color-u, ${o(this.colors.u)});
          ---color-chosen: var(--color-chosen, ${o(this.colors.chosen)});
          ---color-better: var(--color-better, ${o(this.colors.better)});
          ---color-worse: var(--color-worse, ${o(this.colors.worse)});
          ---color-even: var(--color-even, ${o(this.colors.even)});
          ---color-correct: var(--color-correct, ${o(this.colors.correct)});
          ---color-error: var(--color-error, ${o(this.colors.error)});
          ---color-nr: var(--color-nr, ${o(this.colors.nr)});

          ---color-x-light: var(--color-x-light, ${o(this.lights.x)});
          ---color-a-light: var(--color-a-light, ${o(this.lights.a)});
          ---color-l-light: var(--color-l-light, ${o(this.lights.l)});
          ---color-v-light: var(--color-v-light, ${o(this.lights.v)});
          ---color-p-light: var(--color-p-light, ${o(this.lights.p)});
          ---color-g-light: var(--color-g-light, ${o(this.lights.g)});
          ---color-w-light: var(--color-w-light, ${o(this.lights.w)});
          ---color-u-light: var(--color-u-light, ${o(this.lights.u)});
          ---color-chosen-light: var(--color-chosen-light, ${o(this.lights.chosen)});
          ---color-better-light: var(--color-better-light, ${o(this.lights.better)});
          ---color-worse-light: var(--color-worse-light, ${o(this.lights.worse)});
          ---color-even-light: var(--color-even-light, ${o(this.lights.even)});
          ---color-correct-light: var(--color-correct-light, ${o(this.lights.correct)});
          ---color-error-light: var(--color-error-light, ${o(this.lights.error)});
          ---color-nr-light: var(--color-nr-light, ${o(this.lights.nr)});

          ---color-x-dark: var(--color-x-dark, ${o(this.darks.x)});
          ---color-a-dark: var(--color-a-dark, ${o(this.darks.a)});
          ---color-l-dark: var(--color-l-dark, ${o(this.darks.l)});
          ---color-v-dark: var(--color-v-dark, ${o(this.darks.v)});
          ---color-p-dark: var(--color-p-dark, ${o(this.darks.p)});
          ---color-g-dark: var(--color-g-dark, ${o(this.darks.g)});
          ---color-w-dark: var(--color-w-dark, ${o(this.darks.w)});
          ---color-u-dark: var(--color-u-dark, ${o(this.darks.u)});
          ---color-chosen-dark: var(--color-chosen-dark, ${o(this.darks.chosen)});
          ---color-better-dark: var(--color-better-dark, ${o(this.darks.better)});
          ---color-worse-dark: var(--color-worse-dark, ${o(this.darks.worse)});
          ---color-even-dark: var(--color-even-dark, ${o(this.darks.even)});
          ---color-correct-dark: var(--color-correct-dark, ${o(this.darks.correct)});
          ---color-error-dark: var(--color-error-dark, ${o(this.darks.error)});
          ---color-nr-dark: var(--color-nr-dark, ${o(this.darks.nr)});
        }
      `]}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const La=2;let ka=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ga=(t,e)=>{const n=t._$AN;if(void 0===n)return!1;for(const t of n)t._$AO?.(e,!1),Ga(t,e);return!0},_a=t=>{let e,n;do{if(void 0===(e=t._$AM))break;n=e._$AN,n.delete(t),t=e}while(0===n?.size)},Ra=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(void 0===n)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),Ma(e)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ea(t){void 0!==this._$AN?(_a(this),this._$AM=t,Ra(this)):this._$AM=t}function Ta(t,e=!1,n=0){const r=this._$AH,i=this._$AN;if(void 0!==i&&0!==i.size)if(e)if(Array.isArray(r))for(let t=n;t<r.length;t++)Ga(r[t],!1),_a(r[t]);else null!=r&&(Ga(r,!1),_a(r));else Ga(this,t)}const Ma=t=>{t.type==La&&(t._$AP??=Ta,t._$AQ??=Ea)};class Na extends ka{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,n){super._$AT(t,e,n),Ra(this),this.isConnected=t._$AU}_$AO(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(Ga(this,t),_a(this))}setValue(t){if((t=>void 0===t.strings)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}const Da=new WeakMap;let Xa=0;const Za=new Map,Va=new WeakSet,Ha=()=>new Promise((t=>requestAnimationFrame(t))),Wa=[{transform:"translateX(-100%) scale(0)",opacity:0}],Ya=[{opacity:0},{opacity:1}],za=(t,e)=>{const n=t-e;return 0===n?void 0:n},Oa=(t,e)=>{const n=t/e;return 1===n?void 0:n},Ja={left:(t,e)=>{const n=za(t,e);return{value:n,transform:null==n||isNaN(n)?void 0:`translateX(${n}px)`}},top:(t,e)=>{const n=za(t,e);return{value:n,transform:null==n||isNaN(n)?void 0:`translateY(${n}px)`}},width:(t,e)=>{let n;0===e&&(e=1,n={width:"1px"});const r=Oa(t,e);return{value:r,overrideFrom:n,transform:null==r||isNaN(r)?void 0:`scaleX(${r})`}},height:(t,e)=>{let n;0===e&&(e=1,n={height:"1px"});const r=Oa(t,e);return{value:r,overrideFrom:n,transform:null==r||isNaN(r)?void 0:`scaleY(${r})`}}},Pa={duration:333,easing:"ease-in-out"},ja=["left","top","width","height","opacity","color","background"],Ka=new WeakMap;const qa=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends Na{constructor(t){if(super(t),this.t=!1,this.i=null,this.o=null,this.h=!0,this.shouldLog=!1,t.type===La)throw Error("The `animate` directive must be used in attribute position.");this.createFinished()}createFinished(){this.resolveFinished?.(),this.finished=new Promise((t=>{this.l=t}))}async resolveFinished(){this.l?.(),this.l=void 0}render(t){return O}getController(){return Da.get(this.u)}isDisabled(){return this.options.disabled||this.getController()?.disabled}update(t,[e]){const n=void 0===this.u;return n&&(this.u=t.options?.host,this.u.addController(this),this.u.updateComplete.then((t=>this.t=!0)),this.element=t.element,Ka.set(this.element,this)),this.optionsOrCallback=e,(n||"function"!=typeof e)&&this.p(e),this.render(e)}p(t){t=t??{};const e=this.getController();void 0!==e&&((t={...e.defaultOptions,...t}).keyframeOptions={...e.defaultOptions.keyframeOptions,...t.keyframeOptions}),t.properties??=ja,this.options=t}m(){const t={},e=this.element.getBoundingClientRect(),n=getComputedStyle(this.element);return this.options.properties.forEach((r=>{const i=e[r]??(Ja[r]?void 0:n[r]),a=Number(i);t[r]=isNaN(a)?i+"":a})),t}v(){let t,e=!0;return this.options.guard&&(t=this.options.guard(),e=((t,e)=>{if(Array.isArray(t)){if(Array.isArray(e)&&e.length===t.length&&t.every(((t,n)=>t===e[n])))return!1}else if(e===t)return!1;return!0})(t,this._)),this.h=this.t&&!this.isDisabled()&&!this.isAnimating()&&e&&this.element.isConnected,this.h&&(this._=Array.isArray(t)?Array.from(t):t),this.h}hostUpdate(){"function"==typeof this.optionsOrCallback&&this.p(this.optionsOrCallback()),this.v()&&(this.A=this.m(),this.i=this.i??this.element.parentNode,this.o=this.element.nextSibling)}async hostUpdated(){if(!this.h||!this.element.isConnected||this.options.skipInitial&&!this.isHostRendered)return;let t;this.prepare(),await Ha;const e=this.O(),n=this.j(this.options.keyframeOptions,e),r=this.m();if(void 0!==this.A){const{from:n,to:i}=this.N(this.A,r,e);this.log("measured",[this.A,r,n,i]),t=this.calculateKeyframes(n,i)}else{const n=Za.get(this.options.inId);if(n){Za.delete(this.options.inId);const{from:i,to:a}=this.N(n,r,e);t=this.calculateKeyframes(i,a),t=this.options.in?[{...this.options.in[0],...t[0]},...this.options.in.slice(1),t[1]]:t,Xa++,t.forEach((t=>t.zIndex=Xa))}else this.options.in&&(t=[...this.options.in,{}])}this.animate(t,n)}resetStyles(){void 0!==this.P&&(this.element.setAttribute("style",this.P??""),this.P=void 0)}commitStyles(){this.P=this.element.getAttribute("style"),this.webAnimation?.commitStyles(),this.webAnimation?.cancel()}reconnected(){}async disconnected(){if(!this.h)return;if(void 0!==this.options.id&&Za.set(this.options.id,this.A),void 0===this.options.out)return;if(this.prepare(),await Ha(),this.i?.isConnected){const t=this.o&&this.o.parentNode===this.i?this.o:null;if(this.i.insertBefore(this.element,t),this.options.stabilizeOut){const t=this.m();this.log("stabilizing out");const e=this.A.left-t.left,n=this.A.top-t.top;!("static"===getComputedStyle(this.element).position)||0===e&&0===n||(this.element.style.position="relative"),0!==e&&(this.element.style.left=e+"px"),0!==n&&(this.element.style.top=n+"px")}}const t=this.j(this.options.keyframeOptions);await this.animate(this.options.out,t),this.element.remove()}prepare(){this.createFinished()}start(){this.options.onStart?.(this)}didFinish(t){t&&this.options.onComplete?.(this),this.A=void 0,this.animatingProperties=void 0,this.frames=void 0,this.resolveFinished()}O(){const t=[];for(let e=this.element.parentNode;e;e=e?.parentNode){const n=Ka.get(e);n&&!n.isDisabled()&&n&&t.push(n)}return t}get isHostRendered(){const t=Va.has(this.u);return t||this.u.updateComplete.then((()=>{Va.add(this.u)})),t}j(t,e=this.O()){const n={...Pa};return e.forEach((t=>Object.assign(n,t.options.keyframeOptions))),Object.assign(n,t),n}N(t,e,n){t={...t},e={...e};const r=n.map((t=>t.animatingProperties)).filter((t=>void 0!==t));let i=1,a=1;return r.length>0&&(r.forEach((t=>{t.width&&(i/=t.width),t.height&&(a/=t.height)})),void 0!==t.left&&void 0!==e.left&&(t.left=i*t.left,e.left=i*e.left),void 0!==t.top&&void 0!==e.top&&(t.top=a*t.top,e.top=a*e.top)),{from:t,to:e}}calculateKeyframes(t,e,n=!1){const r={},i={};let a=!1;const o={};for(const n in e){const s=t[n],l=e[n];if(n in Ja){const t=Ja[n];if(void 0===s||void 0===l)continue;const e=t(s,l);void 0!==e.transform&&(o[n]=e.value,a=!0,r.transform=`${r.transform??""} ${e.transform}`,void 0!==e.overrideFrom&&Object.assign(r,e.overrideFrom))}else s!==l&&void 0!==s&&void 0!==l&&(a=!0,r[n]=s,i[n]=l)}return r.transformOrigin=i.transformOrigin=n?"center center":"top left",this.animatingProperties=o,a?[r,i]:void 0}async animate(t,e=this.options.keyframeOptions){this.start(),this.frames=t;let n=!1;if(!this.isAnimating()&&!this.isDisabled()&&(this.options.onFrames&&(this.frames=t=this.options.onFrames(this),this.log("modified frames",t)),void 0!==t)){this.log("animate",[t,e]),n=!0,this.webAnimation=this.element.animate(t,e);const r=this.getController();r?.add(this);try{await this.webAnimation.finished}catch(t){}r?.remove(this)}return this.didFinish(n),n}isAnimating(){return"running"===this.webAnimation?.playState||this.webAnimation?.pending}log(t,e){this.shouldLog&&!this.isDisabled()&&console.log(t,this.options.id,e)}});class $a{static xal2v(t,e,n){return t>=0?t**e:-n*(-t)**e}static xlv2a(t,e,n){return t>=0?Math.log(n)/Math.log(t):(Math.log(-n)-Math.log(e))/Math.log(-t)}static xav2l(t,e,n){return t>=0?NaN:-n/(-t)**e}static pg2w(t,e){return t**e/(t**e+(1-t)**e)**(1/e)}static vw2u(t,e){if("number"==typeof t&&"number"==typeof e)return t*e;if(t instanceof Array&&e instanceof Array&&t.length>0&&t.length===e.length){let n=0;for(let r=0;r<t.length;r+=1)n+=t[r]*e[r];return n}return NaN}}class to extends Sa{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,s`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;
          white-space: nowrap;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        var {
          border-radius: var(---border-radius);
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .brace {
          font-size: 200%;
        }

        .addend {
          position: relative;
          display: inline-block;
        }

        .comparison {
          position: relative;
          display: inline-block;

          font-size: 125%;
          font-weight: 600;
        }

        .function {
          display: inline-block;

          border-radius: var(---border-radius);
        }

        :host([numeric]) .function {
          padding: 0.25rem;
        }

        .exp {
          display: inline-block;

          font-size: 0.75rem;
        }

        .subscript {
          display: inline-block;

          font-size: 66.667%;
        }

        .summation {
          display: flex;

          flex-direction: column;

          line-height: 0.8;
        }

        .sigma {
          display: inline-block;

          font-size: 200%;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          line-height: 1.5;
          vertical-align: middle;

          border-radius: var(---border-radius);
        }

        .n {
          --decidables-spinner-input-width: 2rem;
        }

        .left {
          text-align: left;
        }

        .right {
          text-align: right;
        }

        .bottom {
          vertical-align: bottom;
        }

        .top {
          vertical-align: top;
        }

        /* Color scheme */
        /* .win {
          background: var(---color-better);
        }

        .loss {
          background: var(---color-worse);
        }

        .sure {
          background: var(---color-even);
        } */

        .x {
          background: var(---color-x-light);
        }

        .a {
          background: var(---color-a-light);
        }

        .l {
          background: var(---color-l-light);
        }

        .v {
          background: var(---color-v-light);
        }

        .p {
          background: var(---color-p-light);
        }

        .g {
          background: var(---color-g-light);
        }

        .w {
          background: var(---color-w-light);
        }

        .u {
          background: var(---color-u-light);
        }
      `]}}class eo extends to{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.xl=0,this.xw=100,this.pw=.75,this.xs=50,this.a=.8,this.l=1.2,this.g=.8,this.alignState()}alignState(){this.vw=$a.xal2v(this.xw,this.a,this.l),this.vl=$a.xal2v(this.xl,this.a,this.l),this.ww=$a.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=$a.xal2v(this.xs,this.a,this.l),this.ug=$a.vw2u([this.vw,this.vl],[this.ww,this.wl]),this.us=this.vs,this.uDiff=this.ug-this.us}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-calculation-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,a:this.a,l:this.l,g:this.g},bubbles:!0}))}xwInput(t){this.xw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}pwInput(t){this.pw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}xsInput(t){this.xs=parseFloat(t.target.value),this.alignState(),this.sendEvent()}static get styles(){return[super.styles,s`
        /* :host {
          display: inline-block;
        } */

        var {
          border-radius: var(---border-radius);
        }

        decidables-spinner {
          border-radius: var(---border-radius);
        }
      `]}willUpdate(){this.alignState()}render(){let t,e,n,r,i,a,o,s,l,c,u,h;this.numeric?(t=W`<decidables-spinner class="x xw" ?disabled=${!this.interactive} .value="${this.xw}" @input=${this.xwInput.bind(this)}>
          <var class="math-var">x<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,e=W`<decidables-spinner class="x xl" disabled .value="${this.xl}">
          <var class="math-var">x<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,n=W`<decidables-spinner class="p pw" ?disabled=${!this.interactive} min="0" max="1" step=".01" .value="${+this.pw.toFixed(2)}" @input=${this.pwInput.bind(this)}>
          <var class="math-var">p<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,r=W`<decidables-spinner class="x xs" ?disabled=${!this.interactive} .value="${this.xs}" @input=${this.xsInput.bind(this)}>
          <var class="math-var">x<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,i=W`<decidables-spinner class="v vw" disabled .value="${+this.vw.toFixed(1)}">
          <var class="math-var">v<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,a=W`<decidables-spinner class="v vl" disabled .value="${+this.vl.toFixed(1)}">
          <var class="math-var">v<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,o=W`<decidables-spinner class="w ww" disabled .value="${+this.ww.toFixed(2)}">
          <var class="math-var">w<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,s=W`<decidables-spinner class="w wl" disabled .value="${+this.wl.toFixed(2)}">
          <var class="math-var">w<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,l=W`<decidables-spinner class="v vs" disabled .value="${+this.vs.toFixed(1)}">
          <var class="math-var">v<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,c=W`<decidables-spinner class="u ug" disabled .value="${+this.ug.toFixed(1)}">
          <var class="math-var">U<sub class="subscript gamble">gamble</sub></var>
        </decidables-spinner>`,u=W`<decidables-spinner class="u us" disabled .value="${+this.us.toFixed(1)}">
          <var class="math-var">U<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,h=W`${this.uDiff>0?W`<span class="comparison" ${qa({in:Ya})}>&gt;</span>`:this.uDiff<0?W`<span class="comparison" ${qa({in:Ya})}>&lt;</span>`:W`<span class="comparison" ${qa({in:Ya})}>=</span>`}`):(t=W`<var class="math-var x xw">x<sub class="subscript win">win</sub></var>`,e=W`<var class="math-var x xl">x<sub class="subscript loss">loss</sub></var>`,n=W`<var class="math-var p pw">p<sub class="subscript win">win</sub></var>`,r=W`<var class="math-var x xs">x<sub class="subscript sure">sure</sub></var>`,i=W`<var class="math-var v vw">v<sub class="subscript win">win</sub></var>`,a=W`<var class="math-var v vl">v<sub class="subscript loss">loss</sub></var>`,o=W`<var class="math-var w ww">w<sub class="subscript win">win</sub></var>`,s=W`<var class="math-var w wl">w<sub class="subscript loss">loss</sub></var>`,l=W`<var class="math-var v vs">v<sub class="subscript sure">sure</sub></var>`,c=W`<var class="math-var u ug">U<sub class="subscript gamble">gamble</sub></var>`,u=W`<var class="math-var u us">U<sub class="subscript sure">sure</sub></var>`,h=W`<span class="comparison">≟</span>`);const d=W`
      <tr>
        <td class="right">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${t}<span class="paren tight">)</span></span>&nbsp;<span class="function w"><var class="math-var w tight">w</var><span class="paren tight">(</span>${n}<span class="paren tight">)</span></span><span class="plus">+</span><span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${e}<span class="paren tight">)</span></span>&nbsp;<span class="bracket tight">[</span><span class="tight">1</span><span class="minus">−</span><span class="function w"><var class="math-var w">w</var><span class="paren tight">(</span>${n}<span class="paren tight">)</span></span><span class="bracket tight">]</span>
        </td>
        <td>
          ${h}
        </td>
        <td class="left">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${r}<span class="paren tight">)</span></span>
        </td>
      </tr>
      <tr>
        <td class="right">
          ${i}&nbsp;${o}<span class="plus">+</span>${a}&nbsp;${s}
        </td>
        <td>
          ${h}
        </td>
        <td class="left">
          ${l}
        </td>
      </tr>
      <tr>
        <td class="right">
          ${c}
        </td>
        <td>
          ${h}
        </td>
        <td class="left">
          ${u}
        </td>
      </tr>`;return W`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${d}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-calculation",eo);var no="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ro(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function io(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}var ao,oo={},so={version:"2.32.0"};
/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
ao={exports:{}},function(t,e,n){e[t]=e[t]||n(),ao.exports&&(ao.exports=e[t])}("Promise",no,(function(){var t,e,n,r=Object.prototype.toString,i="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(t,e,n,r){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(t,e,n){return t[e]=n,t}}function a(t,r){n.add(t,r),e||(e=i(n.drain))}function o(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function s(){for(var t=0;t<this.chain.length;t++)l(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function l(t,e,n){var r,i;try{!1===e?n.reject(t.msg):(r=!0===e?t.msg:e.call(void 0,t.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=o(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(t){n.reject(t)}}function c(t){var e,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(e=o(t))?a((function(){var r=new d(n);try{e.call(t,(function(){c.apply(r,arguments)}),(function(){u.apply(r,arguments)}))}catch(t){u.call(r,t)}})):(n.msg=t,n.state=1,n.chain.length>0&&a(s,n))}catch(t){u.call(new d(n),t)}}}function u(t){var e=this;e.triggered||(e.triggered=!0,e.def&&(e=e.def),e.msg=t,e.state=2,e.chain.length>0&&a(s,e))}function h(t,e,n,r){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then((function(t){n(i,t)}),r)}(i)}function d(t){this.def=t,this.triggered=!1}function g(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function f(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var e=new g(this);this.then=function(t,n){var r={success:"function"!=typeof t||t,failure:"function"==typeof n&&n};return r.promise=new this.constructor((function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");r.resolve=t,r.reject=e})),e.chain.push(r),0!==e.state&&a(s,e),r.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,(function(t){c.call(e,t)}),(function(t){u.call(e,t)}))}catch(t){u.call(e,t)}}n=function(){var t,n,r;function i(t,e){this.fn=t,this.self=e,this.next=void 0}return{add:function(e,a){r=new i(e,a),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var r=t;for(t=n=e=void 0;r;)r.fn.call(r.self),r=r.next}}}();var p=t({},"constructor",f,!1);return f.prototype=p,t(p,"__NPO__",0,!1),t(f,"resolve",(function(t){return t&&"object"==typeof t&&1===t.__NPO__?t:new this((function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)}))})),t(f,"reject",(function(t){return new this((function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)}))})),t(f,"all",(function(t){var e=this;return"[object Array]"!=r.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=t.length,a=Array(i),o=0;h(e,t,(function(t,e){a[t]=e,++o===i&&n(a)}),r)}))})),t(f,"race",(function(t){var e=this;return"[object Array]"!=r.call(t)?e.reject(TypeError("Not an array")):new e((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");h(e,t,(function(t,e){n(e)}),r)}))})),f}));var lo={exports:{}},co={exports:{}};!function(t){(function(){var e={version:"3.8.0"},n=[].slice,r=function(t){return n.call(t)},i=self.document;function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(t){r=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var s=this.Element.prototype,l=s.setAttribute,c=s.setAttributeNS,u=this.CSSStyleDeclaration.prototype,h=u.setProperty;s.setAttribute=function(t,e){l.call(this,t,e+"")},s.setAttributeNS=function(t,e,n){c.call(this,t,e,n+"")},u.setProperty=function(t,e,n){h.call(this,t,e+"",n)}}function d(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function g(t){return null===t?NaN:+t}function f(t){return!isNaN(t)}function p(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}e.ascending=d,e.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},e.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},e.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},e.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},e.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)f(n=+t[a])&&(r+=n);else for(;++a<i;)f(n=+e.call(t,t[a],a))&&(r+=n);return r},e.mean=function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)f(n=g(t[a]))?r+=n:--o;else for(;++a<i;)f(n=g(e.call(t,t[a],a)))?r+=n:--o;if(o)return r/o},e.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},e.median=function(t,n){var r,i=[],a=t.length,o=-1;if(1===arguments.length)for(;++o<a;)f(r=g(t[o]))&&i.push(r);else for(;++o<a;)f(r=g(n.call(t,t[o],o)))&&i.push(r);if(i.length)return e.quantile(i.sort(d),.5)},e.variance=function(t,e){var n,r,i=t.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)f(n=g(t[s]))&&(o+=(r=n-a)*(n-(a+=r/++l)));else for(;++s<i;)f(n=g(e.call(t,t[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++l)));if(l>1)return o/(l-1)},e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};var v=p(d);function m(t){return t.length}e.bisectLeft=v.left,e.bisect=e.bisectRight=v.right,e.bisector=function(t){return p(1===t.length?function(e,n){return d(t(e),n)}:t)},e.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},e.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},e.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},e.transpose=function(t){if(!(a=t.length))return[];for(var n=-1,r=e.min(t,m),i=new Array(r);++n<r;)for(var a,o=-1,s=i[n]=new Array(a);++o<a;)s[o]=t[o][n];return i},e.zip=function(){return e.transpose(arguments)},e.keys=function(t){var e=[];for(var n in t)e.push(n);return e},e.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},e.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},e.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n};var y=Math.abs;function b(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function x(){this._=Object.create(null)}e.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(t){var e=1;for(;t*e%1;)e*=10;return e}(y(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},e.map=function(t,e){var n=new x;if(t instanceof x)t.forEach((function(t,e){n.set(t,e)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var B="__proto__",I="\0";function F(t){return(t+="")===B||t[0]===I?I+t:t}function Q(t){return(t+="")[0]===I?t.slice(1):t}function C(t){return F(t)in this._}function w(t){return(t=F(t))in this._&&delete this._[t]}function U(){var t=[];for(var e in this._)t.push(Q(e));return t}function A(){var t=0;for(var e in this._)++t;return t}function S(){for(var t in this._)return!1;return!0}function L(){this._=Object.create(null)}function k(t){return t}function G(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function _(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=R.length;n<r;++n){var i=R[n]+e;if(i in t)return i}}b(x,{has:C,get:function(t){return this._[F(t)]},set:function(t,e){return this._[F(t)]=e},remove:w,keys:U,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:Q(e),value:this._[e]});return t},size:A,empty:S,forEach:function(t){for(var e in this._)t.call(this,Q(e),this._[e])}}),e.nest=function(){var t,n,r={},i=[],a=[];function o(e,a,s){if(s>=i.length)return n?n.call(r,a):t?a.sort(t):a;for(var l,c,u,h,d=-1,g=a.length,f=i[s++],p=new x;++d<g;)(h=p.get(l=f(c=a[d])))?h.push(c):p.set(l,[c]);return e?(c=e(),u=function(t,n){c.set(t,o(e,n,s))}):(c={},u=function(t,n){c[t]=o(e,n,s)}),p.forEach(u),c}function s(t,e){if(e>=i.length)return t;var n=[],r=a[e++];return t.forEach((function(t,r){n.push({key:t,values:s(r,e)})})),r?n.sort((function(t,e){return r(t.key,e.key)})):n}return r.map=function(t,e){return o(e,t,0)},r.entries=function(t){return s(o(e.map,t,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return a[i.length-1]=t,r},r.sortValues=function(e){return t=e,r},r.rollup=function(t){return n=t,r},r},e.set=function(t){var e=new L;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},b(L,{has:C,add:function(t){return this._[F(t+="")]=!0,t},remove:w,values:U,size:A,empty:S,forEach:function(t){for(var e in this._)t.call(this,Q(e))}}),e.behavior={},e.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=G(t,e,e[n]);return t};var R=["webkit","ms","moz","Moz","o","O"];function E(){}function T(){}function M(t){var e=[],n=new x;function r(){for(var n,r=e,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,a=e.indexOf(o)).concat(e.slice(a+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function N(){e.event.preventDefault()}function D(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function X(t){for(var n=new T,r=0,i=arguments.length;++r<i;)n[arguments[r]]=M(n);return n.of=function(r,i){return function(a){try{var o=a.sourceEvent=e.event;a.target=t,e.event=a,n[a.type].apply(r,i)}finally{e.event=o}}},n}e.dispatch=function(){for(var t=new T,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=M(t);return t},T.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},e.event=null,e.requote=function(t){return t.replace(Z,"\\$&")};var Z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function H(t){return V(t,O),t}var W=function(t,e){return e.querySelector(t)},Y=function(t,e){return e.querySelectorAll(t)},z=function(t,e){var n=t.matches||t[_(t,"matchesSelector")];return z=function(t,e){return n.call(t,e)},z(t,e)};"function"==typeof Sizzle&&(W=function(t,e){return Sizzle(t,e)[0]||null},Y=Sizzle,z=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var O=e.selection.prototype=[];function J(t){return"function"==typeof t?t:function(){return W(t,this)}}function P(t){return"function"==typeof t?t:function(){return Y(t,this)}}O.select=function(t){var e,n,r,i,a=[];t=J(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return H(a)},O.selectAll=function(t){var e,n,i=[];t=P(t);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],l=-1,c=s.length;++l<c;)(n=s[l])&&(i.push(e=r(t.call(n,n.__data__,l,a))),e.parentNode=n);return H(i)};var j="http://www.w3.org/1999/xhtml",K={svg:"http://www.w3.org/2000/svg",xhtml:j,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q(t,n){return t=e.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function $(t){return t.trim().replace(/\s+/g," ")}function tt(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function nt(t,e){var n=(t=et(t).map(rt)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function rt(t){var e=tt(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",$(i+" "+t))):n.setAttribute("class",$(i.replace(e," ")))}}function it(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function at(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ot(t){return"function"==typeof t?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===j&&e.documentElement.namespaceURI===j?e.createElement(t):e.createElementNS(n,t)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function lt(t){return{__data__:t}}function ct(t){return function(){return z(this,t)}}function ut(t){return arguments.length||(t=d),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function ht(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,a=t[n],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,n);return t}function dt(t){return V(t,gt),t}e.ns={prefix:K,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),K.hasOwnProperty(n)?{space:K[n],local:t}:t}},O.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var r=this.node();return(t=e.ns.qualify(t)).local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(q(n,t[n]));return this}return this.each(q(t,n))},O.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=et(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!tt(t[i]).test(e))return!1;return!0}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},O.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(it(n,t[n],e));return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(it(t,e,n))},O.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},O.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},O.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},O.append=function(t){return t=ot(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},O.insert=function(t,e){return t=ot(t),e=J(e),this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},O.remove=function(){return this.each(st)},O.data=function(t,e){var n,r,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(t[i]=r.__data__);return t}function o(t,n){var r,i,a,o=t.length,u=n.length,h=Math.min(o,u),d=new Array(u),g=new Array(u),f=new Array(o);if(e){var p,v=new x,m=new Array(o);for(r=-1;++r<o;)(i=t[r])&&(v.has(p=e.call(i,i.__data__,r))?f[r]=i:v.set(p,i),m[r]=p);for(r=-1;++r<u;)(i=v.get(p=e.call(n,a=n[r],r)))?!0!==i&&(d[r]=i,i.__data__=a):g[r]=lt(a),v.set(p,!0);for(r=-1;++r<o;)r in m&&!0!==v.get(m[r])&&(f[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],a=n[r],i?(i.__data__=a,d[r]=i):g[r]=lt(a);for(;r<u;++r)g[r]=lt(n[r]);for(;r<o;++r)f[r]=t[r]}g.update=d,g.parentNode=d.parentNode=f.parentNode=t.parentNode,s.push(g),l.push(d),c.push(f)}var s=dt([]),l=H([]),c=H([]);if("function"==typeof t)for(;++i<a;)o(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<a;)o(n=this[i],t);return l.enter=function(){return s},l.exit=function(){return c},l},O.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},O.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=ct(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return H(i)},O.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},O.sort=function(t){t=ut.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},O.each=function(t){return ht(this,(function(e,n,r){t.call(e,e.__data__,n,r)}))},O.call=function(t){var e=r(arguments);return t.apply(e[0]=this,e),this},O.empty=function(){return!this.node()},O.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},O.size=function(){var t=0;return ht(this,(function(){++t})),t};var gt=[];function ft(t,n,i){var a="__on"+t,o=t.indexOf("."),s=vt;o>0&&(t=t.slice(0,o));var l=pt.get(t);function c(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}return l&&(t=l,s=mt),o?n?function(){var e=s(n,r(arguments));c.call(this),this.addEventListener(t,this[a]=e,e.$=i),e._=n}:c:n?E:function(){var n,r=new RegExp("^__on([^.]+)"+e.requote(t)+"$");for(var i in this)if(n=i.match(r)){var a=this[i];this.removeEventListener(n[1],a,a.$),delete this[i]}}}e.selection.enter=dt,e.selection.enter.prototype=gt,gt.append=O.append,gt.empty=O.empty,gt.node=O.node,gt.call=O.call,gt.size=O.size,gt.select=function(t){for(var e,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(a=i[c])?(e.push(r[c]=n=t.call(i.parentNode,a.__data__,c,s)),n.__data__=a.__data__):e.push(null)}return H(o)},gt.insert=function(t,e){var n,r,i;return arguments.length<2&&(n=this,e=function(t,e,a){var o,s=n[a].update,l=s.length;for(a!=i&&(i=a,r=0),e>=r&&(r=e+1);!(o=s[r])&&++r<l;);return o}),O.insert.call(this,t,e)},e.select=function(t){var e;return"string"==typeof t?(e=[W(t,i)]).parentNode=i.documentElement:(e=[t]).parentNode=a(t),H([e])},e.selectAll=function(t){var e;return"string"==typeof t?(e=r(Y(t,i))).parentNode=i.documentElement:(e=r(t)).parentNode=null,H([e])},O.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(ft(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(ft(t,e,n))};var pt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});function vt(t,n){return function(r){var i=e.event;e.event=r,n[0]=this.__data__;try{t.apply(this,n)}finally{e.event=i}}}function mt(t,e){var n=vt(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}i&&pt.forEach((function(t){"on"+t in i&&pt.remove(t)}));var yt,bt=0;function xt(t){var n=".dragsuppress-"+ ++bt,r="click"+n,i=e.select(o(t)).on("touchmove"+n,N).on("dragstart"+n,N).on("selectstart"+n,N);if(null==yt&&(yt=!("onselectstart"in t)&&_(t.style,"userSelect")),yt){var s=a(t).style,l=s[yt];s[yt]="none"}return function(t){if(i.on(n,null),yt&&(s[yt]=l),t){var e=function(){i.on(r,null)};i.on(r,(function(){N(),e()}),!0),setTimeout(e,0)}}}e.mouse=function(t){return It(t,D())};var Bt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function It(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(Bt<0){var a=o(t);if(a.scrollX||a.scrollY){var s=(r=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Bt=!(s.f||s.e),r.remove()}}return Bt?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var l=t.getBoundingClientRect();return[n.clientX-l.left-t.clientLeft,n.clientY-l.top-t.clientTop]}function Ft(){return e.event.changedTouches[0].identifier}e.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=D().changedTouches),e)for(var r,i=0,a=e.length;i<a;++i)if((r=e[i]).identifier===n)return It(t,r)},e.behavior.drag=function(){var t=X(a,"drag","dragstart","dragend"),n=null,r=s(E,e.mouse,o,"mousemove","mouseup"),i=s(Ft,e.touch,k,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,a,o,s){return function(){var l,c=this,u=e.event.target.correspondingElement||e.event.target,h=c.parentNode,d=t.of(c,arguments),g=0,f=r(),p=".drag"+(null==f?"":"-"+f),v=e.select(a(u)).on(o+p,(function(){var t,e,n=i(h,f);if(!n)return;t=n[0]-y[0],e=n[1]-y[1],g|=t|e,y=n,d({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e})})).on(s+p,(function(){if(!i(h,f))return;v.on(o+p,null).on(s+p,null),m(g),d({type:"dragend"})})),m=xt(u),y=i(h,f);l=n?[(l=n.apply(c,arguments)).x-y[0],l.y-y[1]]:[0,0],d({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(n=t,a):n},e.rebind(a,t,"on")},e.touches=function(t,e){return arguments.length<2&&(e=D().touches),e?r(e).map((function(e){var n=It(t,e);return n.identifier=e.identifier,n})):[]};var Qt=1e-6,Ct=Qt*Qt,wt=Math.PI,Ut=2*wt,At=Ut-Qt,St=wt/2,Lt=wt/180,kt=180/wt;function Gt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function _t(t){return t>1?St:t<-1?-St:Math.asin(t)}function Rt(t){return((t=Math.exp(t))+1/t)/2}var Et=Math.SQRT2;e.interpolateZoom=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],l=e[1],c=e[2],u=s-i,h=l-a,d=u*u+h*h;if(d<Ct)r=Math.log(c/o)/Et,n=function(t){return[i+t*u,a+t*h,o*Math.exp(Et*t*r)]};else{var g=Math.sqrt(d),f=(c*c-o*o+4*d)/(2*o*2*g),p=(c*c-o*o-4*d)/(2*c*2*g),v=Math.log(Math.sqrt(f*f+1)-f),m=Math.log(Math.sqrt(p*p+1)-p);r=(m-v)/Et,n=function(t){var e=t*r,n=Rt(v),s=o/(2*g)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Et*e+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[i+s*u,a+s*h,o*n/Rt(Et*e+v)]}}return n.duration=1e3*r,n},e.behavior.zoom=function(){var t,n,r,a,s,l,c,u,h,d={x:0,y:0,k:1},g=[960,500],f=Nt,p=250,v=0,m="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",B=X(I,"zoomstart","zoom","zoomend");function I(t){t.on(m,k).on(Mt+".zoom",_).on("dblclick.zoom",R).on(x,G)}function F(t){return[(t[0]-d.x)/d.k,(t[1]-d.y)/d.k]}function Q(t){d.k=Math.max(f[0],Math.min(f[1],t))}function C(t,e){e=function(t){return[t[0]*d.k+d.x,t[1]*d.k+d.y]}(e),d.x+=t[0]-e[0],d.y+=t[1]-e[1]}function w(t,r,i,a){t.__chart__={x:d.x,y:d.y,k:d.k},Q(Math.pow(2,a)),C(n=r,i),t=e.select(t),p>0&&(t=t.transition().duration(p)),t.call(I.event)}function U(){c&&c.domain(l.range().map((function(t){return(t-d.x)/d.k})).map(l.invert)),h&&h.domain(u.range().map((function(t){return(t-d.y)/d.k})).map(u.invert))}function A(t){v++||t({type:"zoomstart"})}function S(t){U(),t({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function L(t){--v||(t({type:"zoomend"}),n=null)}function k(){var t=this,n=B.of(t,arguments),r=0,i=e.select(o(t)).on(y,(function(){r=1,C(e.mouse(t),a),S(n)})).on(b,(function(){i.on(y,null).on(b,null),s(r),L(n)})),a=F(e.mouse(t)),s=xt(t);ji.call(t),A(n)}function G(){var t,n=this,r=B.of(n,arguments),i={},a=0,o=".zoom-"+e.event.changedTouches[0].identifier,l="touchmove"+o,c="touchend"+o,u=[],h=e.select(n),g=xt(n);function f(){var r=e.touches(n);return t=d.k,r.forEach((function(t){t.identifier in i&&(i[t.identifier]=F(t))})),r}function p(){var t=e.event.target;e.select(t).on(l,v).on(c,y),u.push(t);for(var r=e.event.changedTouches,o=0,h=r.length;o<h;++o)i[r[o].identifier]=null;var g=f(),p=Date.now();if(1===g.length){if(p-s<500){var m=g[0];w(n,m,i[m.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),N()}s=p}else if(g.length>1){m=g[0];var b=g[1],x=m[0]-b[0],B=m[1]-b[1];a=x*x+B*B}}function v(){var o,l,c,u,h=e.touches(n);ji.call(n);for(var d=0,g=h.length;d<g;++d,u=null)if(c=h[d],u=i[c.identifier]){if(l)break;o=c,l=u}if(u){var f=(f=c[0]-o[0])*f+(f=c[1]-o[1])*f,p=a&&Math.sqrt(f/a);o=[(o[0]+c[0])/2,(o[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],Q(p*t)}s=null,C(o,l),S(r)}function y(){if(e.event.touches.length){for(var t=e.event.changedTouches,n=0,a=t.length;n<a;++n)delete i[t[n].identifier];for(var s in i)return void f()}e.selectAll(u).on(o,null),h.on(m,k).on(x,G),g(),L(r)}p(),A(r),h.on(m,null).on(x,p)}function _(){var i=B.of(this,arguments);a?clearTimeout(a):(ji.call(this),t=F(n=r||e.mouse(this)),A(i)),a=setTimeout((function(){a=null,L(i)}),50),N(),Q(Math.pow(2,.002*Tt())*d.k),C(n,t),S(i)}function R(){var t=e.mouse(this),n=Math.log(d.k)/Math.LN2;w(this,t,F(t),e.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Mt||(Mt="onwheel"in i?(Tt=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Tt=function(){return e.event.wheelDelta},"mousewheel"):(Tt=function(){return-e.event.detail},"MozMousePixelScroll")),I.event=function(t){t.each((function(){var t=B.of(this,arguments),r=d;$i?e.select(this).transition().each("start.zoom",(function(){d=this.__chart__||{x:0,y:0,k:1},A(t)})).tween("zoom:zoom",(function(){var i=g[0],a=g[1],o=n?n[0]:i/2,s=n?n[1]:a/2,l=e.interpolateZoom([(o-d.x)/d.k,(s-d.y)/d.k,i/d.k],[(o-r.x)/r.k,(s-r.y)/r.k,i/r.k]);return function(e){var n=l(e),r=i/n[2];this.__chart__=d={x:o-n[0]*r,y:s-n[1]*r,k:r},S(t)}})).each("interrupt.zoom",(function(){L(t)})).each("end.zoom",(function(){L(t)})):(this.__chart__=d,A(t),S(t),L(t))}))},I.translate=function(t){return arguments.length?(d={x:+t[0],y:+t[1],k:d.k},U(),I):[d.x,d.y]},I.scale=function(t){return arguments.length?(d={x:d.x,y:d.y,k:null},Q(+t),U(),I):d.k},I.scaleExtent=function(t){return arguments.length?(f=null==t?Nt:[+t[0],+t[1]],I):f},I.center=function(t){return arguments.length?(r=t&&[+t[0],+t[1]],I):r},I.size=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],I):g},I.duration=function(t){return arguments.length?(p=+t,I):p},I.x=function(t){return arguments.length?(c=t,l=t.copy(),d={x:0,y:0,k:1},I):c},I.y=function(t){return arguments.length?(h=t,u=t.copy(),d={x:0,y:0,k:1},I):h},e.rebind(I,B,"on")};var Tt,Mt,Nt=[0,1/0];function Dt(){}function Xt(t,e,n){return this instanceof Xt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Xt?new Xt(t.h,t.s,t.l):le(""+t,ce,Xt):new Xt(t,e,n)}e.color=Dt,Dt.prototype.toString=function(){return this.rgb()+""},e.hsl=Xt;var Zt=Xt.prototype=new Dt;function Vt(t,e,n){var r,i;function a(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new re(a(t+120),a(t),a(t-120))}function Ht(t,n,r){return this instanceof Ht?(this.h=+t,this.c=+n,void(this.l=+r)):arguments.length<2?t instanceof Ht?new Ht(t.h,t.c,t.l):$t(t instanceof zt?t.l:(t=ue((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Ht(t,n,r)}Zt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Xt(this.h,this.s,this.l/t)},Zt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Xt(this.h,this.s,t*this.l)},Zt.rgb=function(){return Vt(this.h,this.s,this.l)},e.hcl=Ht;var Wt=Ht.prototype=new Dt;function Yt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new zt(n,Math.cos(t*=Lt)*e,Math.sin(t)*e)}function zt(t,e,n){return this instanceof zt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof zt?new zt(t.l,t.a,t.b):t instanceof Ht?Yt(t.h,t.c,t.l):ue((t=re(t)).r,t.g,t.b):new zt(t,e,n)}Wt.brighter=function(t){return new Ht(this.h,this.c,Math.min(100,this.l+Ot*(arguments.length?t:1)))},Wt.darker=function(t){return new Ht(this.h,this.c,Math.max(0,this.l-Ot*(arguments.length?t:1)))},Wt.rgb=function(){return Yt(this.h,this.c,this.l).rgb()},e.lab=zt;var Ot=18,Jt=.95047,Pt=1,jt=1.08883,Kt=zt.prototype=new Dt;function qt(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return new re(ne(3.2404542*(i=te(i)*Jt)-1.5371385*(r=te(r)*Pt)-.4985314*(a=te(a)*jt)),ne(-.969266*i+1.8760108*r+.041556*a),ne(.0556434*i-.2040259*r+1.0572252*a))}function $t(t,e,n){return t>0?new Ht(Math.atan2(n,e)*kt,Math.sqrt(e*e+n*n),t):new Ht(NaN,NaN,t)}function te(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ee(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ne(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function re(t,e,n){return this instanceof re?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof re?new re(t.r,t.g,t.b):le(""+t,re,Vt):new re(t,e,n)}function ie(t){return new re(t>>16,t>>8&255,255&t)}function ae(t){return ie(t)+""}Kt.brighter=function(t){return new zt(Math.min(100,this.l+Ot*(arguments.length?t:1)),this.a,this.b)},Kt.darker=function(t){return new zt(Math.max(0,this.l-Ot*(arguments.length?t:1)),this.a,this.b)},Kt.rgb=function(){return qt(this.l,this.a,this.b)},e.rgb=re;var oe=re.prototype=new Dt;function se(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function le(t,e,n){var r,i,a,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(de(i[0]),de(i[1]),de(i[2]))}return(a=ge.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function ce(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new Xt(r,i,l)}function ue(t,e,n){var r=ee((.4124564*(t=he(t))+.3575761*(e=he(e))+.1804375*(n=he(n)))/Jt),i=ee((.2126729*t+.7151522*e+.072175*n)/Pt);return zt(116*i-16,500*(r-i),200*(i-ee((.0193339*t+.119192*e+.9503041*n)/jt)))}function he(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function de(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}oe.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new re(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new re(i,i,i)},oe.darker=function(t){return new re((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},oe.hsl=function(){return ce(this.r,this.g,this.b)},oe.toString=function(){return"#"+se(this.r)+se(this.g)+se(this.b)};var ge=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function fe(t){return"function"==typeof t?t:function(){return t}}function pe(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),ve(e,n,t,r)}}function ve(t,n,i,a){var o={},s=e.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function h(){var t,e=c.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||e>=200&&e<300||304===e){try{t=i.call(o,c)}catch(t){return void s.error.call(o,t)}s.load.call(o,t)}else s.error.call(o,c)}return self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(t)&&(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=h:c.onreadystatechange=function(){c.readyState>3&&h()},c.onprogress=function(t){var n=e.event;e.event=t;try{s.progress.call(o,c)}finally{e.event=n}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return i=t,o},["get","post"].forEach((function(t){o[t]=function(){return o.send.apply(o,[t].concat(r(arguments)))}})),o.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(e,t,!0),null==n||"accept"in l||(l.accept=n+",*/*"),c.setRequestHeader)for(var a in l)c.setRequestHeader(a,l[a]);return null!=n&&c.overrideMimeType&&c.overrideMimeType(n),null!=u&&(c.responseType=u),null!=i&&o.on("error",i).on("load",(function(t){i(null,t)})),s.beforesend.call(o,c),c.send(null==r?null:r),o},o.abort=function(){return c.abort(),o},e.rebind(o,s,"on"),null==a?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(a))}ge.forEach((function(t,e){ge.set(t,ie(e))})),e.functor=fe,e.xhr=pe(k),e.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=ve(t,e,null==n?a:o(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?a:o(t)):n},i}function a(t){return i.parse(t.responseText)}function o(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,(function(t,r){if(n)return n(t,r-1);var i=function(e){for(var n={},r=t.length,i=0;i<r;++i)n[t[i]]=e[i];return n};n=e?function(t,n){return e(i(t),n)}:i}))},i.parseRows=function(t,e){var n,i,a={},o={},s=[],l=t.length,c=0,u=0;function h(){if(c>=l)return o;if(i)return i=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return c=n+2,13===(s=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++c):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=t.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(s!==r)continue;return t.slice(e,c-u)}return t.slice(e)}for(;(n=h())!==o;){for(var d=[];n!==a&&n!==o;)d.push(n),n=h();e&&null==(d=e(d,u++))||s.push(d)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new L,r=[];return e.forEach((function(t){for(var e in t)n.has(e)||r.push(n.add(e))})),[r.map(l).join(t)].concat(e.map((function(e){return r.map((function(t){return l(e[t])})).join(t)}))).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("\t","text/tab-separated-values");var me,ye,be,xe,Be=this[_(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Ie(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return ye?ye.n=i:me=i,ye=i,be||(xe=clearTimeout(xe),be=1,Be(Fe)),i}function Fe(){var t=Qe(),e=Ce()-t;e>24?(isFinite(e)&&(clearTimeout(xe),xe=setTimeout(Fe,e)),be=0):(be=1,Be(Fe))}function Qe(){for(var t=Date.now(),e=me;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ce(){for(var t,e=me,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:me=e.n;return ye=t,n}function we(t){return t[0]}function Ue(t){return t[1]}function Ae(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Gt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Se(t,e){return t[0]-e[0]||t[1]-e[1]}e.timer=function(){Ie.apply(this,arguments)},e.timer.flush=function(){Qe(),Ce()},e.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},e.geom={},e.geom.hull=function(t){var e=we,n=Ue;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=fe(e),a=fe(n),o=t.length,s=[],l=[];for(r=0;r<o;r++)s.push([+i.call(this,t[r],r),+a.call(this,t[r],r),r]);for(s.sort(Se),r=0;r<o;r++)l.push([s[r][0],-s[r][1]]);var c=Ae(s),u=Ae(l),h=u[0]===c[0],d=u[u.length-1]===c[c.length-1],g=[];for(r=c.length-1;r>=0;--r)g.push(t[s[c[r]][2]]);for(r=+h;r<u.length-d;++r)g.push(t[s[u[r]][2]]);return g}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},e.geom.polygon=function(t){return V(t,Le),t};var Le=e.geom.polygon.prototype=[];function ke(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Ge(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,l=t[1],c=n[1],u=e[1]-l,h=r[1]-c,d=(s*(l-c)-h*(i-a))/(h*o-s*u);return[i+d*o,l+d*u]}function _e(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}Le.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Le.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},Le.clip=function(t){for(var e,n,r,i,a,o,s=_e(t),l=-1,c=this.length-_e(this),u=this[c-1];++l<c;){for(e=t.slice(),t.length=0,i=this[l],a=e[(r=e.length-s)-1],n=-1;++n<r;)ke(o=e[n],u,i)?(ke(a,u,i)||t.push(Ge(a,o,u,i)),t.push(o)):ke(a,u,i)&&t.push(Ge(a,o,u,i)),a=o;s&&t.push(t[0]),u=i}return t};var Re,Ee,Te,Me,Ne,De=[],Xe=[];function Ze(){sn(this),this.edge=this.site=this.circle=null}function Ve(t){var e=De.pop()||new Ze;return e.site=t,e}function He(t){qe(t),Te.remove(t),De.push(t),sn(t)}function We(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];He(t);for(var l=a;l.circle&&y(n-l.circle.x)<Qt&&y(r-l.circle.cy)<Qt;)a=l.P,s.unshift(l),He(l),l=a;s.unshift(l),qe(l);for(var c=o;c.circle&&y(n-c.circle.x)<Qt&&y(r-c.circle.cy)<Qt;)o=c.N,s.push(c),He(c),c=o;s.push(c),qe(c);var u,h=s.length;for(u=1;u<h;++u)c=s[u],l=s[u-1],rn(c.edge,l.site,c.site,i);l=s[0],(c=s[h-1]).edge=en(l.site,c.site,null,i),Ke(l),Ke(c)}function Ye(t){for(var e,n,r,i,a=t.x,o=t.y,s=Te._;s;)if((r=ze(s,o)-a)>Qt)s=s.L;else{if(!((i=a-Oe(s,o))>Qt)){r>-Qt?(e=s.P,n=s):i>-Qt?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=Ve(t);if(Te.insert(e,l),e||n){if(e===n)return qe(e),n=Ve(e.site),Te.insert(l,n),l.edge=n.edge=en(e.site,l.site),Ke(e),void Ke(n);if(n){qe(e),qe(n);var c=e.site,u=c.x,h=c.y,d=t.x-u,g=t.y-h,f=n.site,p=f.x-u,v=f.y-h,m=2*(d*v-g*p),y=d*d+g*g,b=p*p+v*v,x={x:(v*y-g*b)/m+u,y:(d*b-p*y)/m+h};rn(n.edge,c,f,x),l.edge=en(c,t,null,x),n.edge=en(t,f,null,x),Ke(e),Ke(n)}else l.edge=en(e.site,l.site)}}function ze(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,c=l-e;if(!c)return s;var u=s-r,h=1/a-1/c,d=u/c;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*c)-l+c/2+i-a/2)))/h+r:(r+s)/2}function Oe(t,e){var n=t.N;if(n)return ze(n,e);var r=t.site;return r.y===e?r.x:1/0}function Je(t){this.site=t,this.edges=[]}function Pe(t,e){return e.angle-t.angle}function je(){sn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ke(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,c=r.y-s,u=a.x-o,h=2*(l*(v=a.y-s)-c*u);if(!(h>=-Ct)){var d=l*l+c*c,g=u*u+v*v,f=(v*d-c*g)/h,p=(l*g-u*d)/h,v=p+s,m=Xe.pop()||new je;m.arc=t,m.site=i,m.x=f+o,m.y=v+Math.sqrt(f*f+p*p),m.cy=v,t.circle=m;for(var y=null,b=Ne._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Ne.insert(y,m),y||(Me=m)}}}}function qe(t){var e=t.circle;e&&(e.P||(Me=e.N),Ne.remove(e),Xe.push(e),sn(e),t.circle=null)}function $e(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],c=e[1][1],u=t.l,h=t.r,d=u.x,g=u.y,f=h.x,p=h.y,v=(d+f)/2,m=(g+p)/2;if(p===g){if(v<o||v>=s)return;if(d>f){if(a){if(a.y>=c)return}else a={x:v,y:l};n={x:v,y:c}}else{if(a){if(a.y<l)return}else a={x:v,y:c};n={x:v,y:l}}}else if(i=m-(r=(d-f)/(p-g))*v,r<-1||r>1)if(d>f){if(a){if(a.y>=c)return}else a={x:(l-i)/r,y:l};n={x:(c-i)/r,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-i)/r,y:c};n={x:(l-i)/r,y:l}}else if(g<p){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}function tn(t,e){this.l=t,this.r=e,this.a=this.b=null}function en(t,e,n,r){var i=new tn(t,e);return Re.push(i),n&&rn(i,t,e,n),r&&rn(i,e,t,r),Ee[t.i].edges.push(new an(i,t,e)),Ee[e.i].edges.push(new an(i,e,t)),i}function nn(t,e,n){var r=new tn(t,null);return r.a=e,r.b=n,Re.push(r),r}function rn(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function an(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function on(){this._=null}function sn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ln(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function cn(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function un(t){for(;t.L;)t=t.L;return t}function hn(t,e){var n,r,i,a=t.sort(dn).pop();for(Re=[],Ee=new Array(t.length),Te=new on,Ne=new on;;)if(i=Me,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(Ee[a.i]=new Je(a),Ye(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;We(i.arc)}e&&(function(t){for(var e,n,r,i,a,o=Re,s=(n=t[0][0],r=t[0][1],i=t[1][0],a=t[1][1],function(t){var e,o=t.a,s=t.b,l=o.x,c=o.y,u=0,h=1,d=s.x-l,g=s.y-c;if(e=n-l,d||!(e>0)){if(e/=d,d<0){if(e<u)return;e<h&&(h=e)}else if(d>0){if(e>h)return;e>u&&(u=e)}if(e=i-l,d||!(e<0)){if(e/=d,d<0){if(e>h)return;e>u&&(u=e)}else if(d>0){if(e<u)return;e<h&&(h=e)}if(e=r-c,g||!(e>0)){if(e/=g,g<0){if(e<u)return;e<h&&(h=e)}else if(g>0){if(e>h)return;e>u&&(u=e)}if(e=a-c,g||!(e<0)){if(e/=g,g<0){if(e>h)return;e>u&&(u=e)}else if(g>0){if(e<u)return;e<h&&(h=e)}return u>0&&(t.a={x:l+u*d,y:c+u*g}),h<1&&(t.b={x:l+h*d,y:c+h*g}),t}}}}}),l=o.length;l--;)(!$e(e=o[l],t)||!s(e)||y(e.a.x-e.b.x)<Qt&&y(e.a.y-e.b.y)<Qt)&&(e.a=e.b=null,o.splice(l,1))}(e),function(t){for(var e,n,r,i,a,o,s,l,c,u,h=t[0][0],d=t[1][0],g=t[0][1],f=t[1][1],p=Ee,v=p.length;v--;)if((a=p[v])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)r=(u=s[o].end()).x,i=u.y,e=(c=s[++o%l].start()).x,n=c.y,(y(r-e)>Qt||y(i-n)>Qt)&&(s.splice(o,0,new an(nn(a.site,u,y(r-h)<Qt&&f-i>Qt?{x:h,y:y(e-h)<Qt?n:f}:y(i-f)<Qt&&d-r>Qt?{x:y(n-f)<Qt?e:d,y:f}:y(r-d)<Qt&&i-g>Qt?{x:d,y:y(e-d)<Qt?n:g}:y(i-g)<Qt&&r-h>Qt?{x:y(n-g)<Qt?e:h,y:g}:null),a.site,null)),++l)}(e));var o={cells:Ee,edges:Re};return Te=Ne=Re=Ee=null,o}function dn(t,e){return e.y-t.y||e.x-t.x}Je.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Pe),e.length},an.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},on.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=un(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ln(this,n),n=(t=n).U),n.C=!1,r.C=!0,cn(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(cn(this,n),n=(t=n).U),n.C=!1,r.C=!0,ln(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?un(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ln(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,cn(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ln(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,cn(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ln(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,cn(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},e.geom.voronoi=function(t){var e=we,n=Ue,r=e,i=n,a=gn;if(t)return o(t);function o(t){var e=new Array(t.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];return hn(s(t),a).cells.forEach((function(a,s){var l=a.edges,c=a.site,u=e[s]=l.length?l.map((function(t){var e=t.start();return[e.x,e.y]})):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];u.point=t[s]})),e}function s(t){return t.map((function(t,e){return{x:Math.round(r(t,e)/Qt)*Qt,y:Math.round(i(t,e)/Qt)*Qt,i:e}}))}return o.links=function(t){return hn(s(t)).edges.filter((function(t){return t.l&&t.r})).map((function(e){return{source:t[e.l.i],target:t[e.r.i]}}))},o.triangles=function(t){var e=[];return hn(s(t)).cells.forEach((function(n,r){for(var i,a=n.site,o=n.edges.sort(Pe),s=-1,l=o.length,c=o[l-1].edge,u=c.l===a?c.r:c.l;++s<l;)i=u,u=(c=o[s].edge).l===a?c.r:c.l,r<i.i&&r<u.i&&fn(a,i,u)<0&&e.push([t[r],t[i.i],t[u.i]])})),e},o.x=function(t){return arguments.length?(r=fe(e=t),o):e},o.y=function(t){return arguments.length?(i=fe(n=t),o):n},o.clipExtent=function(t){return arguments.length?(a=null==t?gn:t,o):a===gn?null:a},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):a===gn?null:a&&a[1]},o};var gn=[[-1e6,-1e6],[1e6,1e6]];function fn(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function pn(t){return t.x}function vn(t){return t.y}function mn(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),l=e.nodes;l[0]&&mn(t,l[0],n,r,o,s),l[1]&&mn(t,l[1],o,r,i,s),l[2]&&mn(t,l[2],n,s,o,a),l[3]&&mn(t,l[3],o,s,i,a)}}function yn(t,n){t=e.rgb(t),n=e.rgb(n);var r=t.r,i=t.g,a=t.b,o=n.r-r,s=n.g-i,l=n.b-a;return function(t){return"#"+se(Math.round(r+o*t))+se(Math.round(i+s*t))+se(Math.round(a+l*t))}}function bn(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Qn(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function xn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Bn(t,e){var n,r,i,a=In.lastIndex=Fn.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=In.exec(t))&&(r=Fn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:xn(n,r)})),a=Fn.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(t,e,n,r,i){var a,o=we,s=Ue;if(a=arguments.length)return o=pn,s=vn,3===a&&(i=n,r=e,n=e=0),l(t);function l(t){var l,c,u,h,d,g,f,p,v,m=fe(o),b=fe(s);if(null!=e)g=e,f=n,p=r,v=i;else if(p=v=-(g=f=1/0),c=[],u=[],d=t.length,a)for(h=0;h<d;++h)(l=t[h]).x<g&&(g=l.x),l.y<f&&(f=l.y),l.x>p&&(p=l.x),l.y>v&&(v=l.y),c.push(l.x),u.push(l.y);else for(h=0;h<d;++h){var x=+m(l=t[h],h),B=+b(l,h);x<g&&(g=x),B<f&&(f=B),x>p&&(p=x),B>v&&(v=B),c.push(x),u.push(B)}var I=p-g,F=v-f;function Q(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(y(l-n)+y(c-r)<.01)C(t,e,n,r,i,a,o,s);else{var u=t.point;t.x=t.y=t.point=null,C(t,u,l,c,i,a,o,s),C(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else C(t,e,n,r,i,a,o,s)}function C(t,e,n,r,i,a,o,s){var l=.5*(i+o),c=.5*(a+s),u=n>=l,h=r>=c,d=h<<1|u;t.leaf=!1,u?i=l:o=l,h?a=c:s=c,Q(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,a,o,s)}I>F?v=f+I:p=g+F;var w={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){Q(w,t,+m(t,++h),+b(t,h),g,f,p,v)}};if(w.visit=function(t){mn(t,w,g,f,p,v)},w.find=function(t){return function(t,e,n,r,i,a,o){var s,l=1/0;return function t(c,u,h,d,g){if(!(u>a||h>o||d<r||g<i)){if(f=c.point){var f,p=e-c.x,v=n-c.y,m=p*p+v*v;if(m<l){var y=Math.sqrt(l=m);r=e-y,i=n-y,a=e+y,o=n+y,s=f}}for(var b=c.nodes,x=.5*(u+d),B=.5*(h+g),I=(n>=B)<<1|e>=x,F=I+4;I<F;++I)if(c=b[3&I])switch(3&I){case 0:t(c,u,h,x,B);break;case 1:t(c,x,h,d,B);break;case 2:t(c,u,B,x,g);break;case 3:t(c,x,B,d,g)}}}(t,r,i,a,o),s}(w,t[0],t[1],g,f,p,v)},h=-1,null==e){for(;++h<d;)Q(w,t[h],c[h],u[h],g,f,p,v);--h}else t.forEach(w.add);return c=u=t=l=null,w}return l.x=function(t){return arguments.length?(o=t,l):o},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,n],[r,i]]},l.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),l):null==e?null:[r-e,i-n]},l},e.interpolateRgb=yn,e.interpolateObject=bn,e.interpolateNumber=xn,e.interpolateString=Bn;var In=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fn=new RegExp(In.source,"g");function Qn(t,n){for(var r,i=e.interpolators.length;--i>=0&&!(r=e.interpolators[i](t,n)););return r}function Cn(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Qn(t[n],e[n]));for(;n<a;++n)i[n]=t[n];for(;n<o;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}e.interpolate=Qn,e.interpolators=[function(t,e){var n=typeof e;return("string"===n?ge.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?yn:Bn:e instanceof Dt?yn:Array.isArray(e)?Cn:"object"===n&&isNaN(e)?bn:xn)(t,e)}],e.interpolateArray=Cn;var wn=function(){return k},Un=e.map({linear:wn,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return kn},cubic:function(){return Gn},sin:function(){return Rn},exp:function(){return En},circle:function(){return Tn},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/Ut*Math.asin(1/t):(t=1,n=e/4);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Ut/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return Mn}}),An=e.map({in:k,out:Sn,"in-out":Ln,"out-in":function(t){return Ln(Sn(t))}});function Sn(t){return function(e){return 1-t(1-e)}}function Ln(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function kn(t){return t*t}function Gn(t){return t*t*t}function _n(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Rn(t){return 1-Math.cos(t*St)}function En(t){return Math.pow(2,10*(t-1))}function Tn(t){return 1-Math.sqrt(1-t*t)}function Mn(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Nn(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Dn(t){var e=[t.a,t.b],n=[t.c,t.d],r=Zn(e),i=Xn(e,n),a=Zn(function(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*kt,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*kt:0}function Xn(t,e){return t[0]*e[0]+t[1]*e[1]}function Zn(t){var e=Math.sqrt(Xn(t,t));return e&&(t[0]/=e,t[1]/=e),e}e.ease=function(t){var e=t.indexOf("-"),r=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return r=Un.get(r)||wn,function(t){return function(e){return e<=0?0:e>=1?1:t(e)}}((i=An.get(i)||k)(r.apply(null,n.call(arguments,1))))},e.interpolateHcl=function(t,n){t=e.hcl(t),n=e.hcl(n);var r=t.h,i=t.c,a=t.l,o=n.h-r,s=n.c-i,l=n.l-a;isNaN(s)&&(s=0,i=isNaN(i)?n.c:i);isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360);return function(t){return Yt(r+o*t,i+s*t,a+l*t)+""}},e.interpolateHsl=function(t,n){t=e.hsl(t),n=e.hsl(n);var r=t.h,i=t.s,a=t.l,o=n.h-r,s=n.s-i,l=n.l-a;isNaN(s)&&(s=0,i=isNaN(i)?n.s:i);isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360);return function(t){return Vt(r+o*t,i+s*t,a+l*t)+""}},e.interpolateLab=function(t,n){t=e.lab(t),n=e.lab(n);var r=t.l,i=t.a,a=t.b,o=n.l-r,s=n.a-i,l=n.b-a;return function(t){return qt(r+o*t,i+s*t,a+l*t)+""}},e.interpolateRound=Nn,e.transform=function(t){var n=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Dn(e?e.matrix:Vn)})(t)},Dn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Vn={a:1,b:0,c:0,d:1,e:0,f:0};function Hn(t){return t.length?t.pop()+",":""}function Wn(t,n){var r=[],i=[];return t=e.transform(t),n=e.transform(n),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:xn(t[0],e[0])},{i:i-2,x:xn(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,n.translate,r,i),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Hn(n)+"rotate(",null,")")-2,x:xn(t,e)})):e&&n.push(Hn(n)+"rotate("+e+")")}(t.rotate,n.rotate,r,i),function(t,e,n,r){t!==e?r.push({i:n.push(Hn(n)+"skewX(",null,")")-2,x:xn(t,e)}):e&&n.push(Hn(n)+"skewX("+e+")")}(t.skew,n.skew,r,i),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(Hn(n)+"scale(",null,",",null,")");r.push({i:i-4,x:xn(t[0],e[0])},{i:i-2,x:xn(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Hn(n)+"scale("+e+")")}(t.scale,n.scale,r,i),t=n=null,function(t){for(var e,n=-1,a=i.length;++n<a;)r[(e=i[n]).i]=e.x(t);return r.join("")}}function Yn(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function zn(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function On(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=Jn(t),r=Jn(e),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Jn(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Pn(t){t.fixed|=2}function jn(t){t.fixed&=-7}function Kn(t){t.fixed|=4,t.px=t.x,t.py=t.y}function qn(t){t.fixed&=-5}function $n(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,l=-1;++l<s;)null!=(a=o[l])&&($n(a,e,n),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*n[t.point.index];t.charge+=t.pointCharge=c,r+=c*t.point.x,i+=c*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}e.interpolateTransform=Wn,e.layout={},e.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(On(t[n]));return e}},e.layout.chord=function(){var t,n,r,i,a,o,s,l={},c=0;function u(){var l,u,d,g,f,p={},v=[],m=e.range(i),y=[];for(t=[],n=[],l=0,g=-1;++g<i;){for(u=0,f=-1;++f<i;)u+=r[g][f];v.push(u),y.push(e.range(i)),l+=u}for(a&&m.sort((function(t,e){return a(v[t],v[e])})),o&&y.forEach((function(t,e){t.sort((function(t,n){return o(r[e][t],r[e][n])}))})),l=(Ut-c*i)/l,u=0,g=-1;++g<i;){for(d=u,f=-1;++f<i;){var b=m[g],x=y[b][f],B=r[b][x],I=u,F=u+=B*l;p[b+"-"+x]={index:b,subindex:x,startAngle:I,endAngle:F,value:B}}n[b]={index:b,startAngle:d,endAngle:u,value:v[b]},u+=c}for(g=-1;++g<i;)for(f=g-1;++f<i;){var Q=p[g+"-"+f],C=p[f+"-"+g];(Q.value||C.value)&&t.push(Q.value<C.value?{source:C,target:Q}:{source:Q,target:C})}s&&h()}function h(){t.sort((function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)}))}return l.matrix=function(e){return arguments.length?(i=(r=e)&&r.length,t=n=null,l):r},l.padding=function(e){return arguments.length?(c=e,t=n=null,l):c},l.sortGroups=function(e){return arguments.length?(a=e,t=n=null,l):a},l.sortSubgroups=function(e){return arguments.length?(o=e,t=null,l):o},l.sortChords=function(e){return arguments.length?(s=e,t&&h(),l):s},l.chords=function(){return t||u(),t},l.groups=function(){return n||u(),n},l},e.layout.force=function(){var t,n,r,i,a,o,s={},l=e.dispatch("start","tick","end"),c=[1,1],u=.9,h=tr,d=er,g=-30,f=nr,p=.1,v=.64,m=[],y=[];function b(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-n,l=a*a+o*o;if(s*s/v<l){if(l<f){var c=e.charge/l;t.px-=a*c,t.py-=o*c}return!0}if(e.point&&l&&l<f){c=e.pointCharge/l;t.px-=a*c,t.py-=o*c}}return!e.charge}}function x(t){t.px=e.event.x,t.py=e.event.y,s.resume()}return s.tick=function(){if((r*=.99)<.005)return t=null,l.end({type:"end",alpha:r=0}),!0;var n,s,h,d,f,v,x,B,I,F=m.length,Q=y.length;for(s=0;s<Q;++s)d=(h=y[s]).source,(v=(B=(f=h.target).x-d.x)*B+(I=f.y-d.y)*I)&&(B*=v=r*a[s]*((v=Math.sqrt(v))-i[s])/v,I*=v,f.x-=B*(x=d.weight+f.weight?d.weight/(d.weight+f.weight):.5),f.y-=I*x,d.x+=B*(x=1-x),d.y+=I*x);if((x=r*p)&&(B=c[0]/2,I=c[1]/2,s=-1,x))for(;++s<F;)(h=m[s]).x+=(B-h.x)*x,h.y+=(I-h.y)*x;if(g)for($n(n=e.geom.quadtree(m),r,o),s=-1;++s<F;)(h=m[s]).fixed||n.visit(b(h));for(s=-1;++s<F;)(h=m[s]).fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*u,h.y-=(h.py-(h.py=h.y))*u);l.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,s):g},s.chargeDistance=function(t){return arguments.length?(f=t*t,s):Math.sqrt(f)},s.gravity=function(t){return arguments.length?(p=+t,s):p},s.theta=function(t){return arguments.length?(v=t*t,s):Math.sqrt(v)},s.alpha=function(e){return arguments.length?(e=+e,r?e>0?r=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:r=0})):e>0&&(l.start({type:"start",alpha:r=e}),t=Ie(s.tick)),s):r},s.start=function(){var t,e,n,r=m.length,l=y.length,u=c[0],f=c[1];for(t=0;t<r;++t)(n=m[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=y[t]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<r;++t)n=m[t],isNaN(n.x)&&(n.x=p("x",u)),isNaN(n.y)&&(n.y=p("y",f)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof h)for(t=0;t<l;++t)i[t]=+h.call(this,y[t],t);else for(t=0;t<l;++t)i[t]=h;if(a=[],"function"==typeof d)for(t=0;t<l;++t)a[t]=+d.call(this,y[t],t);else for(t=0;t<l;++t)a[t]=d;if(o=[],"function"==typeof g)for(t=0;t<r;++t)o[t]=+g.call(this,m[t],t);else for(t=0;t<r;++t)o[t]=g;function p(n,i){if(!e){for(e=new Array(r),c=0;c<r;++c)e[c]=[];for(c=0;c<l;++c){var a=y[c];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var o,s=e[t],c=-1,u=s.length;++c<u;)if(!isNaN(o=s[c][n]))return o;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=e.behavior.drag().origin(k).on("dragstart.force",Pn).on("drag.force",x).on("dragend.force",jn)),!arguments.length)return n;this.on("mouseover.force",Kn).on("mouseout.force",qn).call(n)},e.rebind(s,l,"on")};var tr=20,er=1,nr=1/0;function rr(t,n){return e.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=cr,t}function ir(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ar(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function or(t){return t.children}function sr(t){return t.value}function lr(t,e){return e.value-t.value}function cr(t){return e.merge(t.map((function(t){return(t.children||[]).map((function(e){return{source:t,target:e}}))})))}e.layout.hierarchy=function(){var t=lr,e=or,n=sr;function r(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(c=e.call(r,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;n&&(a.value=0),a.children=c}else n&&(a.value=+n.call(r,a,a.depth)||0),delete a.children;return ar(i,(function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)})),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(ir(t,(function(t){t.children&&(t.value=0)})),ar(t,(function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)}))),t},r},e.layout.partition=function(){var t=e.layout.hierarchy(),n=[1,1];function r(t,e,n,i){var a=t.children;if(t.x=e,t.y=t.depth*i,t.dx=n,t.dy=i,a&&(o=a.length)){var o,s,l,c=-1;for(n=t.value?n/t.value:0;++c<o;)r(s=a[c],e,l=s.value*n,i),e+=l}}function i(t){var e=t.children,n=0;if(e&&(r=e.length))for(var r,a=-1;++a<r;)n=Math.max(n,i(e[a]));return 1+n}function a(e,a){var o=t.call(this,e,a);return r(o[0],0,n[0],n[1]/i(o[0])),o}return a.size=function(t){return arguments.length?(n=t,a):n},rr(a,t)},e.layout.pie=function(){var t=Number,n=ur,r=0,i=Ut,a=0;function o(s){var l,c=s.length,u=s.map((function(e,n){return+t.call(o,e,n)})),h=+("function"==typeof r?r.apply(this,arguments):r),d=("function"==typeof i?i.apply(this,arguments):i)-h,g=Math.min(Math.abs(d)/c,+("function"==typeof a?a.apply(this,arguments):a)),f=g*(d<0?-1:1),p=e.sum(u),v=p?(d-c*f)/p:0,m=e.range(c),y=[];return null!=n&&m.sort(n===ur?function(t,e){return u[e]-u[t]}:function(t,e){return n(s[t],s[e])}),m.forEach((function(t){y[t]={data:s[t],value:l=u[t],startAngle:h,endAngle:h+=l*v+f,padAngle:g}})),y}return o.value=function(e){return arguments.length?(t=e,o):t},o.sort=function(t){return arguments.length?(n=t,o):n},o.startAngle=function(t){return arguments.length?(r=t,o):r},o.endAngle=function(t){return arguments.length?(i=t,o):i},o.padAngle=function(t){return arguments.length?(a=t,o):a},o};var ur={};function hr(t){return t.x}function dr(t){return t.y}function gr(t,e,n){t.y0=e,t.y=n}e.layout.stack=function(){var t=k,n=vr,r=mr,i=gr,a=hr,o=dr;function s(l,c){if(!(g=l.length))return l;var u=l.map((function(e,n){return t.call(s,e,n)})),h=u.map((function(t){return t.map((function(t,e){return[a.call(s,t,e),o.call(s,t,e)]}))})),d=n.call(s,h,c);u=e.permute(u,d),h=e.permute(h,d);var g,f,p,v,m=r.call(s,h,c),y=u[0].length;for(p=0;p<y;++p)for(i.call(s,u[0][p],v=m[p],h[0][p][1]),f=1;f<g;++f)i.call(s,u[f][p],v+=h[f-1][p][1],h[f][p][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(n="function"==typeof t?t:fr.get(t)||vr,s):n},s.offset=function(t){return arguments.length?(r="function"==typeof t?t:pr.get(t)||mr,s):r},s.x=function(t){return arguments.length?(a=t,s):a},s.y=function(t){return arguments.length?(o=t,s):o},s.out=function(t){return arguments.length?(i=t,s):i},s};var fr=e.map({"inside-out":function(t){var n,r,i=t.length,a=t.map(yr),o=t.map(br),s=e.range(i).sort((function(t,e){return a[t]-a[e]})),l=0,c=0,u=[],h=[];for(n=0;n<i;++n)r=s[n],l<c?(l+=o[r],u.push(r)):(c+=o[r],h.push(r));return h.reverse().concat(u)},reverse:function(t){return e.range(t.length).reverse()},default:vr}),pr=e.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,r,i,a,o,s,l,c,u=t.length,h=t[0],d=h.length,g=[];for(g[0]=l=c=0,n=1;n<d;++n){for(e=0,i=0;e<u;++e)i+=t[e][n][1];for(e=0,a=0,s=h[n][0]-h[n-1][0];e<u;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}g[n]=l-=i?a/i*s:0,l<c&&(c=l)}for(n=0;n<d;++n)g[n]-=c;return g},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:mr});function vr(t){return e.range(t.length)}function mr(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function yr(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function br(t){return t.reduce(xr,0)}function xr(t,e){return t+e[1]}function Br(t,e){return Ir(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ir(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function Fr(t){return[e.min(t),e.max(t)]}function Qr(t,e){return t.value-e.value}function Cr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function wr(t,e){t._pack_next=e,e._pack_prev=t}function Ur(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Ar(t){if((e=t.children)&&(l=e.length)){var e,n,r,i,a,o,s,l,c=1/0,u=-1/0,h=1/0,d=-1/0;if(e.forEach(Sr),(n=e[0]).x=-n.r,n.y=0,b(n),l>1&&((r=e[1]).x=r.r,r.y=0,b(r),l>2))for(Gr(n,r,i=e[2]),b(i),Cr(n,i),n._pack_prev=i,Cr(i,r),r=n._pack_next,a=3;a<l;a++){Gr(n,r,i=e[a]);var g=0,f=1,p=1;for(o=r._pack_next;o!==r;o=o._pack_next,f++)if(Ur(o,i)){g=1;break}if(1==g)for(s=n._pack_prev;s!==o._pack_prev&&!Ur(s,i);s=s._pack_prev,p++);g?(f<p||f==p&&r.r<n.r?wr(n,r=o):wr(n=s,r),a--):(Cr(n,i),r=i,b(i))}var v=(c+u)/2,m=(h+d)/2,y=0;for(a=0;a<l;a++)(i=e[a]).x-=v,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(Lr)}function b(t){c=Math.min(t.x-t.r,c),u=Math.max(t.x+t.r,u),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}}function Sr(t){t._pack_next=t._pack_prev=t}function Lr(t){delete t._pack_next,delete t._pack_prev}function kr(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)kr(i[a],e,n,r)}function Gr(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a,l=.5+((r*=r)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+l*i+c*a,n.y=t.y+l*a-c*i}else n.x=t.x+r,n.y=t.y}function _r(t,e){return t.parent==e.parent?1:2}function Rr(t){var e=t.children;return e.length?e[0]:t.t}function Er(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Tr(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Mr(t,e,n){return t.a.parent===e.parent?t.a:n}function Nr(t){var e=t.children;return e&&e.length?Nr(e[0]):t}function Dr(t){var e,n=t.children;return n&&(e=n.length)?Dr(n[e-1]):t}function Xr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Zr(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Vr(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Hr(t){return t.rangeExtent?t.rangeExtent():Vr(t.range())}function Wr(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function Yr(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function zr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Or}e.layout.histogram=function(){var t=!0,n=Number,r=Fr,i=Br;function a(a,o){for(var s,l,c=[],u=a.map(n,this),h=r.call(this,u,o),d=i.call(this,h,u,o),g=(o=-1,u.length),f=d.length-1,p=t?1:1/g;++o<f;)(s=c[o]=[]).dx=d[o+1]-(s.x=d[o]),s.y=0;if(f>0)for(o=-1;++o<g;)(l=u[o])>=h[0]&&l<=h[1]&&((s=c[e.bisect(d,l,1,f)-1]).y+=p,s.push(a[o]));return c}return a.value=function(t){return arguments.length?(n=t,a):n},a.range=function(t){return arguments.length?(r=fe(t),a):r},a.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Ir(e,t)}:fe(t),a):i},a.frequency=function(e){return arguments.length?(t=!!e,a):t},a},e.layout.pack=function(){var t,n=e.layout.hierarchy().sort(Qr),r=0,i=[1,1];function a(e,a){var o=n.call(this,e,a),s=o[0],l=i[0],c=i[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,ar(s,(function(t){t.r=+u(t.value)})),ar(s,Ar),r){var h=r*(t?1:Math.max(2*s.r/l,2*s.r/c))/2;ar(s,(function(t){t.r+=h})),ar(s,Ar),ar(s,(function(t){t.r-=h}))}return kr(s,l/2,c/2,t?1:1/Math.max(2*s.r/l,2*s.r/c)),o}return a.size=function(t){return arguments.length?(i=t,a):i},a.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,a):t},a.padding=function(t){return arguments.length?(r=+t,a):r},rr(a,n)},e.layout.tree=function(){var t=e.layout.hierarchy().sort(null).value(null),n=_r,r=[1,1],i=null;function a(e,a){var c=t.call(this,e,a),u=c[0],h=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(u);if(ar(h,o),h.parent.m=-h.z,ir(h,s),i)ir(u,l);else{var d=u,g=u,f=u;ir(u,(function(t){t.x<d.x&&(d=t),t.x>g.x&&(g=t),t.depth>f.depth&&(f=t)}));var p=n(d,g)/2-d.x,v=r[0]/(g.x+n(g,d)/2+p),m=r[1]/(f.depth||1);ir(u,(function(t){t.x=(t.x+p)*v,t.y=t.depth*m}))}return c}function o(t){var e=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(e.length){!function(t){var e,n=0,r=0,i=t.children,a=i.length;for(;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+n(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+n(t._,i._));t.parent.A=function(t,e,r){if(e){for(var i,a=t,o=t,s=e,l=a.parent.children[0],c=a.m,u=o.m,h=s.m,d=l.m;s=Er(s),a=Rr(a),s&&a;)l=Rr(l),(o=Er(o)).a=t,(i=s.z+h-a.z-c+n(s._,a._))>0&&(Tr(Mr(s,t,r),t,i),c+=i,u+=i),h+=s.m,c+=a.m,d+=l.m,u+=o.m;s&&!Er(o)&&(o.t=s,o.m+=h-u),a&&!Rr(l)&&(l.t=a,l.m+=c-d,r=t)}return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=r[0],t.y=t.depth*r[1]}return a.separation=function(t){return arguments.length?(n=t,a):n},a.size=function(t){return arguments.length?(i=null==(r=t)?l:null,a):i?null:r},a.nodeSize=function(t){return arguments.length?(i=null==(r=t)?null:l,a):i?r:null},rr(a,t)},e.layout.cluster=function(){var t=e.layout.hierarchy().sort(null).value(null),n=_r,r=[1,1],i=!1;function a(a,o){var s,l=t.call(this,a,o),c=l[0],u=0;ar(c,(function(t){var r=t.children;r&&r.length?(t.x=function(t){return t.reduce((function(t,e){return t+e.x}),0)/t.length}(r),t.y=function(t){return 1+e.max(t,(function(t){return t.y}))}(r)):(t.x=s?u+=n(t,s):0,t.y=0,s=t)}));var h=Nr(c),d=Dr(c),g=h.x-n(h,d)/2,f=d.x+n(d,h)/2;return ar(c,i?function(t){t.x=(t.x-c.x)*r[0],t.y=(c.y-t.y)*r[1]}:function(t){t.x=(t.x-g)/(f-g)*r[0],t.y=(1-(c.y?t.y/c.y:1))*r[1]}),l}return a.separation=function(t){return arguments.length?(n=t,a):n},a.size=function(t){return arguments.length?(i=null==(r=t),a):i?null:r},a.nodeSize=function(t){return arguments.length?(i=null!=(r=t),a):i?r:null},rr(a,t)},e.layout.treemap=function(){var t,n=e.layout.hierarchy(),r=Math.round,i=[1,1],a=null,o=Xr,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function h(t){var e=t.children;if(e&&e.length){var n,r,i,a=o(t),s=[],c=e.slice(),d=1/0,p="slice"===l?a.dx:"dice"===l?a.dy:"slice-dice"===l?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(u(c,a.dx*a.dy/t.value),s.area=0;(i=c.length)>0;)s.push(n=c[i-1]),s.area+=n.area,"squarify"!==l||(r=g(s,p))<=d?(c.pop(),d=r):(s.area-=s.pop().area,f(s,p,a,!1),p=Math.min(a.dx,a.dy),s.length=s.area=0,d=1/0);s.length&&(f(s,p,a,!0),s.length=s.area=0),e.forEach(h)}}function d(t){var e=t.children;if(e&&e.length){var n,r=o(t),i=e.slice(),a=[];for(u(i,r.dx*r.dy/t.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(f(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);e.forEach(d)}}function g(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*c/r,r/(e*a*c)):1/0}function f(t,e,n,i){var a,o=-1,s=t.length,l=n.x,c=n.y,u=e?r(t.area/e):0;if(e==n.dx){for((i||u>n.dy)&&(u=n.dy);++o<s;)(a=t[o]).x=l,a.y=c,a.dy=u,l+=a.dx=Math.min(n.x+n.dx-l,u?r(a.area/u):0);a.z=!0,a.dx+=n.x+n.dx-l,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++o<s;)(a=t[o]).x=l,a.y=c,a.dx=u,c+=a.dy=Math.min(n.y+n.dy-c,u?r(a.area/u):0);a.z=!1,a.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function p(e){var r=t||n(e),a=r[0];return a.x=a.y=0,a.value?(a.dx=i[0],a.dy=i[1]):a.dx=a.dy=0,t&&n.revalue(a),u([a],a.dx*a.dy/a.value),(t?d:h)(a),s&&(t=r),r}return p.size=function(t){return arguments.length?(i=t,p):i},p.padding=function(t){if(!arguments.length)return a;function e(e){return Zr(e,t)}var n;return o=null==(a=t)?Xr:"function"==(n=typeof t)?function(e){var n=t.call(p,e,e.depth);return null==n?Xr(e):Zr(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,p},p.round=function(t){return arguments.length?(r=t?Math.round:Number,p):r!=Number},p.sticky=function(e){return arguments.length?(s=e,t=null,p):s},p.ratio=function(t){return arguments.length?(c=t,p):c},p.mode=function(t){return arguments.length?(l=t+"",p):l},rr(p,n)},e.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=e.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},e.scale={};var Or={floor:k,ceil:k};function Jr(t,n,r,i){var a=[],o=[],s=0,l=Math.min(t.length,n.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<=l;)a.push(r(t[s-1],t[s])),o.push(i(n[s-1],n[s]));return function(n){var r=e.bisect(t,n,1,l)-1;return o[r](a[r](n))}}function Pr(t,e,n,r){var i,a;function o(){var o=Math.min(t.length,e.length)>2?Jr:Wr,l=r?zn:Yn;return i=o(t,e,l,n),a=o(e,t,l,Qn),s}function s(t){return i(t)}return s.invert=function(t){return a(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),o()):t},s.range=function(t){return arguments.length?(e=t,o()):e},s.rangeRound=function(t){return s.range(t).interpolate(Nn)},s.clamp=function(t){return arguments.length?(r=t,o()):r},s.interpolate=function(t){return arguments.length?(n=t,o()):n},s.ticks=function(e){return $r(t,e)},s.tickFormat=function(e,n){return d3_scale_linearTickFormat(t,e,n)},s.nice=function(e){return Kr(t,e),o()},s.copy=function(){return Pr(t,e,n,r)},o()}function jr(t,n){return e.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Kr(t,e){return Yr(t,zr(qr(t,e)[2])),Yr(t,zr(qr(t,e)[2])),t}function qr(t,e){null==e&&(e=10);var n=Vr(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function $r(t,n){return e.range.apply(e,qr(t,n))}function ti(t,e,n,r){function i(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(i(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),o):e},o.nice=function(){var e=Yr(r.map(i),n?Math:ei);return t.domain(e),r=e.map(a),o},o.ticks=function(){var t=Vr(r),o=[],s=t[0],l=t[1],c=Math.floor(i(s)),u=Math.ceil(i(l)),h=e%1?2:e;if(isFinite(u-c)){if(n){for(;c<u;c++)for(var d=1;d<h;d++)o.push(a(c)*d);o.push(a(c))}else for(o.push(a(c));c++<u;)for(d=h-1;d>0;d--)o.push(a(c)*d);for(c=0;o[c]<s;c++);for(u=o.length;o[u-1]>l;u--);o=o.slice(c,u)}return o},o.copy=function(){return ti(t.copy(),e,n,r)},jr(o,t)}e.scale.linear=function(){return Pr([0,1],[0,1],Qn,!1)},e.scale.log=function(){return ti(e.scale.linear().domain([0,1]),10,!0,[1,10])};var ei={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function ni(t,e,n){var r=ri(e),i=ri(1/e);function a(e){return t(r(e))}return a.invert=function(e){return i(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),a):n},a.ticks=function(t){return $r(n,t)},a.tickFormat=function(t,e){return d3_scale_linearTickFormat(n,t,e)},a.nice=function(t){return a.domain(Kr(n,t))},a.exponent=function(o){return arguments.length?(r=ri(e=o),i=ri(1/e),t.domain(n.map(r)),a):e},a.copy=function(){return ni(t.copy(),e,n)},jr(a,t)}function ri(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ii(t,n){var r,i,a;function o(e){return i[((r.get(e)||("range"===n.t?r.set(e,t.push(e)):NaN))-1)%i.length]}function s(n,r){return e.range(t.length).map((function(t){return n+r*t}))}return o.domain=function(e){if(!arguments.length)return t;t=[],r=new x;for(var i,a=-1,s=e.length;++a<s;)r.has(i=e[a])||r.set(i,t.push(i));return o[n.t].apply(o,n.a)},o.range=function(t){return arguments.length?(i=t,a=0,n={t:"range",a:arguments},o):i},o.rangePoints=function(e,r){arguments.length<2&&(r=0);var l=e[0],c=e[1],u=t.length<2?(l=(l+c)/2,0):(c-l)/(t.length-1+r);return i=s(l+u*r/2,u),a=0,n={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(e,r){arguments.length<2&&(r=0);var l=e[0],c=e[1],u=t.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(t.length-1+r)|0;return i=s(l+Math.round(u*r/2+(c-l-(t.length-1+r)*u)/2),u),a=0,n={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(e,r,l){arguments.length<2&&(r=0),arguments.length<3&&(l=r);var c=e[1]<e[0],u=e[c-0],h=(e[1-c]-u)/(t.length-r+2*l);return i=s(u+h*l,h),c&&i.reverse(),a=h*(1-r),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(e,r,l){arguments.length<2&&(r=0),arguments.length<3&&(l=r);var c=e[1]<e[0],u=e[c-0],h=e[1-c],d=Math.floor((h-u)/(t.length-r+2*l));return i=s(u+Math.round((h-u-(t.length-r)*d)/2),d),c&&i.reverse(),a=Math.round(d*(1-r)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return a},o.rangeExtent=function(){return Vr(n.a[0])},o.copy=function(){return ii(t,n)},o.domain(t)}e.scale.pow=function(){return ni(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return ii([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(ai)},e.scale.category20=function(){return e.scale.ordinal().range(oi)},e.scale.category20b=function(){return e.scale.ordinal().range(si)},e.scale.category20c=function(){return e.scale.ordinal().range(li)};var ai=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ae),oi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ae),si=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ae),li=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ae);function ci(t,n){var r;function i(){var i=0,o=n.length;for(r=[];++i<o;)r[i-1]=e.quantile(t,i/o);return a}function a(t){if(!isNaN(t=+t))return n[e.bisect(r,t)]}return a.domain=function(e){return arguments.length?(t=e.map(g).filter(f).sort(d),i()):t},a.range=function(t){return arguments.length?(n=t,i()):n},a.quantiles=function(){return r},a.invertExtent=function(e){return(e=n.indexOf(e))<0?[NaN,NaN]:[e>0?r[e-1]:t[0],e<r.length?r[e]:t[t.length-1]]},a.copy=function(){return ci(t,n)},i()}function ui(t,e,n){var r,i;function a(e){return n[Math.max(0,Math.min(i,Math.floor(r*(e-t))))]}function o(){return r=n.length/(e-t),i=n.length-1,a}return a.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],o()):[t,e]},a.range=function(t){return arguments.length?(n=t,o()):n},a.invertExtent=function(e){return[e=(e=n.indexOf(e))<0?NaN:e/r+t,e+1/r]},a.copy=function(){return ui(t,e,n)},o()}function hi(t,n){function r(r){if(r<=r)return n[e.bisect(t,r)]}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(t){return arguments.length?(n=t,r):n},r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},r.copy=function(){return hi(t,n)},r}function di(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return $r(t,e)},e.tickFormat=function(e,n){return d3_scale_linearTickFormat(t,e,n)},e.copy=function(){return di(t)},e}function gi(){return 0}e.scale.quantile=function(){return ci([],[])},e.scale.quantize=function(){return ui(0,1,[0,1])},e.scale.threshold=function(){return hi([.5],[0,1])},e.scale.identity=function(){return di([0,1])},e.svg={},e.svg.arc=function(){var t=pi,e=vi,n=gi,r=fi,i=mi,a=yi,o=bi;function s(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),u=i.apply(this,arguments)-St,h=a.apply(this,arguments)-St,d=Math.abs(h-u),g=u>h?0:1;if(c<s&&(f=c,c=s,s=f),d>=At)return l(c,g)+(s?l(s,1-g):"")+"Z";var f,p,v,m,y,b,x,B,I,F,Q,C,w=0,U=0,A=[];if((m=(+o.apply(this,arguments)||0)/2)&&(v=r===fi?Math.sqrt(s*s+c*c):+r.apply(this,arguments),g||(U*=-1),c&&(U=_t(v/c*Math.sin(m))),s&&(w=_t(v/s*Math.sin(m)))),c){y=c*Math.cos(u+U),b=c*Math.sin(u+U),x=c*Math.cos(h-U),B=c*Math.sin(h-U);var S=Math.abs(h-u-2*U)<=wt?0:1;if(U&&xi(y,b,x,B)===g^S){var L=(u+h)/2;y=c*Math.cos(L),b=c*Math.sin(L),x=B=null}}else y=b=0;if(s){I=s*Math.cos(h-w),F=s*Math.sin(h-w),Q=s*Math.cos(u+w),C=s*Math.sin(u+w);var k=Math.abs(u-h+2*w)<=wt?0:1;if(w&&xi(I,F,Q,C)===1-g^k){var G=(u+h)/2;I=s*Math.cos(G),F=s*Math.sin(G),Q=C=null}}else I=F=0;if(d>Qt&&(f=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){p=s<c^g?0:1;var _=f,R=f;if(d<wt){var E=null==Q?[I,F]:null==x?[y,b]:Ge([y,b],[Q,C],[x,B],[I,F]),T=y-E[0],M=b-E[1],N=x-E[0],D=B-E[1],X=1/Math.sin(Math.acos((T*N+M*D)/(Math.sqrt(T*T+M*M)*Math.sqrt(N*N+D*D)))/2),Z=Math.sqrt(E[0]*E[0]+E[1]*E[1]);R=Math.min(f,(s-Z)/(X-1)),_=Math.min(f,(c-Z)/(X+1))}if(null!=x){var V=Bi(null==Q?[I,F]:[Q,C],[y,b],c,_,g),H=Bi([x,B],[I,F],c,_,g);f===_?A.push("M",V[0],"A",_,",",_," 0 0,",p," ",V[1],"A",c,",",c," 0 ",1-g^xi(V[1][0],V[1][1],H[1][0],H[1][1]),",",g," ",H[1],"A",_,",",_," 0 0,",p," ",H[0]):A.push("M",V[0],"A",_,",",_," 0 1,",p," ",H[0])}else A.push("M",y,",",b);if(null!=Q){var W=Bi([y,b],[Q,C],s,-R,g),Y=Bi([I,F],null==x?[y,b]:[x,B],s,-R,g);f===R?A.push("L",Y[0],"A",R,",",R," 0 0,",p," ",Y[1],"A",s,",",s," 0 ",g^xi(Y[1][0],Y[1][1],W[1][0],W[1][1]),",",1-g," ",W[1],"A",R,",",R," 0 0,",p," ",W[0]):A.push("L",Y[0],"A",R,",",R," 0 0,",p," ",W[0])}else A.push("L",I,",",F)}else A.push("M",y,",",b),null!=x&&A.push("A",c,",",c," 0 ",S,",",g," ",x,",",B),A.push("L",I,",",F),null!=Q&&A.push("A",s,",",s," 0 ",k,",",1-g," ",Q,",",C);return A.push("Z"),A.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=fe(e),s):t},s.outerRadius=function(t){return arguments.length?(e=fe(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=fe(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==fi?fi:fe(t),s):r},s.startAngle=function(t){return arguments.length?(i=fe(t),s):i},s.endAngle=function(t){return arguments.length?(a=fe(t),s):a},s.padAngle=function(t){return arguments.length?(o=fe(t),s):o},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-St;return[Math.cos(r)*n,Math.sin(r)*n]},s};var fi="auto";function pi(t){return t.innerRadius}function vi(t){return t.outerRadius}function mi(t){return t.startAngle}function yi(t){return t.endAngle}function bi(t){return t&&t.padAngle}function xi(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Bi(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=t[0]+l,h=t[1]+c,d=e[0]+l,g=e[1]+c,f=(u+d)/2,p=(h+g)/2,v=d-u,m=g-h,y=v*v+m*m,b=n-r,x=u*g-d*h,B=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),I=(x*m-v*B)/y,F=(-x*v-m*B)/y,Q=(x*m+v*B)/y,C=(-x*v+m*B)/y,w=I-f,U=F-p,A=Q-f,S=C-p;return w*w+U*U>A*A+S*S&&(I=Q,F=C),[[I-l,F-c],[I*n/b,F*n/b]]}function Ii(){return!0}function Fi(t){var e=we,n=Ue,r=Ii,i=Ci,a=i.key,o=.7;function s(a){var s,l=[],c=[],u=-1,h=a.length,d=fe(e),g=fe(n);function f(){l.push("M",i(t(c),o))}for(;++u<h;)r.call(this,s=a[u],u)?c.push([+d.call(this,s,u),+g.call(this,s,u)]):c.length&&(f(),c=[]);return c.length&&f(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(a="function"==typeof t?i=t:(i=Qi.get(t)||Ci).key,s):a},s.tension=function(t){return arguments.length?(o=t,s):o},s}e.svg.line=function(){return Fi(k)};var Qi=e.map({linear:Ci,"linear-closed":wi,step:function(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":Ui,"step-after":Ai,basis:ki,"basis-open":function(t){if(t.length<4)return Ci(t);var e,n=[],r=-1,i=t.length,a=[0],o=[0];for(;++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);n.push(Gi(Ei,a)+","+Gi(Ei,o)),--r;for(;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Ti(n,a,o);return n.join("")},"basis-closed":function(t){var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];for(;++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);e=[Gi(Ei,o),",",Gi(Ei,s)],--r;for(;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ti(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,c=-1;++c<=n;)i=c/n,(r=t[c])[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*l);return ki(t)},cardinal:function(t,e){return t.length<3?Ci(t):t[0]+Si(t,Li(t,e))},"cardinal-open":function(t,e){return t.length<4?Ci(t):t[1]+Si(t.slice(1,-1),Li(t,e))},"cardinal-closed":function(t,e){return t.length<3?wi(t):t[0]+Si((t.push(t[0]),t),Li([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ci(t):t[0]+Si(t,function(t){var e,n,r,i,a=[],o=function(t){var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=Mi(i,a);for(;++e<n;)r[e]=(o+(o=Mi(i=a,a=t[e+1])))/2;return r[e]=o,r}(t),s=-1,l=t.length-1;for(;++s<l;)e=Mi(t[s],t[s+1]),y(e)<Qt?o[s]=o[s+1]=0:(i=(n=o[s]/e)*n+(r=o[s+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r);s=-1;for(;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(t))}});function Ci(t){return t.length>1?t.join("L"):t+"Z"}function wi(t){return t.join("L")+"Z"}function Ui(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Ai(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Si(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ci(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],l=2),e.length>1){s=e[1],a=t[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,l++)a=t[l],s=e[c],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=t[l];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function Li(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function ki(t){if(t.length<3)return Ci(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",Gi(Ei,o),",",Gi(Ei,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ti(l,o,s);return t.pop(),l.push("L",r),l.join("")}function Gi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Qi.forEach((function(t,e){e.key=t,e.closed=/-closed$/.test(t)}));var _i=[0,2/3,1/3,0],Ri=[0,1/3,2/3,0],Ei=[0,1/6,2/3,1/6];function Ti(t,e,n){t.push("C",Gi(_i,e),",",Gi(_i,n),",",Gi(Ri,e),",",Gi(Ri,n),",",Gi(Ei,e),",",Gi(Ei,n))}function Mi(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ni(t){for(var e,n,r,i=-1,a=t.length;++i<a;)n=(e=t[i])[0],r=e[1]-St,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Di(t){var e=we,n=we,r=0,i=Ue,a=Ii,o=Ci,s=o.key,l=o,c="L",u=.7;function h(s){var h,d,g,f=[],p=[],v=[],m=-1,y=s.length,b=fe(e),x=fe(r),B=e===n?function(){return d}:fe(n),I=r===i?function(){return g}:fe(i);function F(){f.push("M",o(t(v),u),c,l(t(p.reverse()),u),"Z")}for(;++m<y;)a.call(this,h=s[m],m)?(p.push([d=+b.call(this,h,m),g=+x.call(this,h,m)]),v.push([+B.call(this,h,m),+I.call(this,h,m)])):p.length&&(F(),p=[],v=[]);return p.length&&F(),f.length?f.join(""):null}return h.x=function(t){return arguments.length?(e=n=t,h):n},h.x0=function(t){return arguments.length?(e=t,h):e},h.x1=function(t){return arguments.length?(n=t,h):n},h.y=function(t){return arguments.length?(r=i=t,h):i},h.y0=function(t){return arguments.length?(r=t,h):r},h.y1=function(t){return arguments.length?(i=t,h):i},h.defined=function(t){return arguments.length?(a=t,h):a},h.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=Qi.get(t)||Ci).key,l=o.reverse||o,c=o.closed?"M":"L",h):s},h.tension=function(t){return arguments.length?(u=t,h):u},h}function Xi(t){return t.source}function Zi(t){return t.target}function Vi(t){return t.radius}function Hi(t){return[t.x,t.y]}function Wi(){return 64}function Yi(){return"circle"}function zi(t){var e=Math.sqrt(t/wt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}e.svg.line.radial=function(){var t=Fi(Ni);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ui.reverse=Ai,Ai.reverse=Ui,e.svg.area=function(){return Di(k)},e.svg.area.radial=function(){var t=Di(Ni);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},e.svg.chord=function(){var t=Xi,e=Zi,n=Vi,r=mi,i=yi;function a(n,r){var i=o(this,t,n,r),a=o(this,e,n,r);return"M"+i.p0+s(i.r,i.p1,i.a1-i.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(i,a)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,a.r,a.p0)+s(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,i.r,i.p0))+"Z"}function o(t,e,a,o){var s=e.call(t,a,o),l=n.call(t,s,o),c=r.call(t,s,o)-St,u=i.call(t,s,o)-St;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>wt)+",1 "+e}function l(t,e,n,r){return"Q 0,0 "+r}return a.radius=function(t){return arguments.length?(n=fe(t),a):n},a.source=function(e){return arguments.length?(t=fe(e),a):t},a.target=function(t){return arguments.length?(e=fe(t),a):e},a.startAngle=function(t){return arguments.length?(r=fe(t),a):r},a.endAngle=function(t){return arguments.length?(i=fe(t),a):i},a},e.svg.diagonal=function(){var t=Xi,e=Zi,n=Hi;function r(r,i){var a=t.call(this,r,i),o=e.call(this,r,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(e){return arguments.length?(t=fe(e),r):t},r.target=function(t){return arguments.length?(e=fe(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),n=Hi,r=t.projection;return t.projection=function(t){return arguments.length?r(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-St;return[n*Math.cos(r),n*Math.sin(r)]}}(n=t)):n},t},e.svg.symbol=function(){var t=Yi,e=Wi;function n(n,r){return(Oi.get(t.call(this,n,r))||zi)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=fe(e),n):t},n.size=function(t){return arguments.length?(e=fe(t),n):e},n};var Oi=e.map({circle:zi,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Pi)),n=e*Pi;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ji),n=e*Ji/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ji),n=e*Ji/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});e.svg.symbolTypes=Oi.keys();var Ji=Math.sqrt(3),Pi=Math.tan(30*Lt);O.transition=function(t){for(var e,n,r=$i||++na,i=aa(t),a=[],o=ta||{time:Date.now(),ease:_n,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var c=this[s],u=-1,h=c.length;++u<h;)(n=c[u])&&oa(n,u,i,r,o),e.push(n)}return qi(a,i,r)},O.interrupt=function(t){return this.each(null==t?ji:Ki(aa(t)))};var ji=Ki(aa());function Ki(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function qi(t,e,n){return V(t,ea),t.namespace=e,t.id=n,t}var $i,ta,ea=[],na=0;function ra(t,e,n,r){var i=t.id,a=t.namespace;return ht(t,"function"==typeof n?function(t,o,s){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}function ia(t){return null==t&&(t=""),function(){this.textContent=t}}function aa(t){return null==t?"__transition__":"__transition_"+t+"__"}function oa(t,e,n,r,i){var a,o,s,l,c,u=t[n]||(t[n]={active:0,count:0}),h=u[r];function d(n){var i=u.active,d=u[i];for(var f in d&&(d.timer.c=null,d.timer.t=NaN,--u.count,delete u[i],d.event&&d.event.interrupt.call(t,t.__data__,d.index)),u)if(+f<r){var p=u[f];p.timer.c=null,p.timer.t=NaN,--u.count,delete u[f]}o.c=g,Ie((function(){return o.c&&g(n||1)&&(o.c=null,o.t=NaN),1}),0,a),u.active=r,h.event&&h.event.start.call(t,t.__data__,e),c=[],h.tween.forEach((function(n,r){(r=r.call(t,t.__data__,e))&&c.push(r)})),l=h.ease,s=h.duration}function g(i){for(var a=i/s,o=l(a),d=c.length;d>0;)c[--d].call(t,o);if(a>=1)return h.event&&h.event.end.call(t,t.__data__,e),--u.count?delete u[r]:delete t[n],1}h||(a=i.time,o=Ie((function(t){var e=h.delay;if(o.t=e+a,e<=t)return d(t-e);o.c=d}),0,a),h=u[r]={tween:new x,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++u.count)}ea.call=O.call,ea.empty=O.empty,ea.node=O.node,ea.size=O.size,e.transition=function(t,n){return t&&t.transition?$i?t.transition(n):t:e.selection().transition(t)},e.transition.prototype=ea,ea.select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=J(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var c=this[s],u=-1,h=c.length;++u<h;)(r=c[u])&&(n=t.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),oa(n,u,a,i,r[a][i]),e.push(n)):e.push(null)}return qi(o,a,i)},ea.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,l=[];t=P(t);for(var c=-1,u=this.length;++c<u;)for(var h=this[c],d=-1,g=h.length;++d<g;)if(r=h[d]){a=r[s][o],n=t.call(r,r.__data__,d,c),l.push(e=[]);for(var f=-1,p=n.length;++f<p;)(i=n[f])&&oa(i,f,s,o,a),e.push(i)}return qi(l,s,o)},ea.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=ct(t));for(var i=0,a=this.length;i<a;i++){r.push(e=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(n=o[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return qi(r,this.namespace,this.id)},ea.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):ht(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},ea.attr=function(t,n){if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r="transform"==t?Wn:Qn,i=e.ns.qualify(t);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}return ra(this,"attr."+t,n,i.local?function(t){return null==t?o:(t+="",function(){var e,n=this.getAttributeNS(i.space,i.local);return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(t){return null==t?a:(t+="",function(){var e,n=this.getAttribute(i);return n!==t&&(e=r(n,t),function(t){this.setAttribute(i,e(t))})})})},ea.attrTween=function(t,n){var r=e.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,e){var i=n.call(this,t,e,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,e){var i=n.call(this,t,e,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}})},ea.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}return ra(this,"style."+t,e,(function(e){return null==e?i:(e+="",function(){var r,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Qn(i,e),function(e){this.style.setProperty(t,r(e),n)})})}))},ea.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,(function(r,i){var a=e.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}))},ea.text=function(t){return ra(this,"text",t,ia)},ea.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)}))},ea.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=e.ease.apply(e,arguments)),ht(this,(function(e){e[r][n].ease=t})))},ea.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:ht(this,"function"==typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},ea.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:ht(this,"function"==typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},ea.each=function(t,n){var r=this.id,i=this.namespace;if(arguments.length<2){var a=ta,o=$i;try{$i=r,ht(this,(function(e,n,a){ta=e[i][r],t.call(e,e.__data__,n,a)}))}finally{ta=a,$i=o}}else ht(this,(function(a){var o=a[i][r];(o.event||(o.event=e.dispatch("start","end","interrupt"))).on(t,n)}));return this},ea.transition=function(){for(var t,e,n,r=this.id,i=++na,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(t=[]);for(var c,u=0,h=(c=this[s]).length;u<h;u++)(e=c[u])&&oa(e,u,a,i,{time:(n=e[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return qi(o,a,i)},e.svg.axis=function(){var t,n=e.scale.linear(),i=sa,a=6,o=6,s=3,l=[10],c=null;function u(r){r.each((function(){var r,u=e.select(this),h=this.__chart__||n,d=this.__chart__=n.copy(),g=null==c?d.ticks?d.ticks.apply(d,l):d.domain():c,f=null==t?d.tickFormat?d.tickFormat.apply(d,l):k:t,p=u.selectAll(".tick").data(g,d),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Qt),m=e.transition(p.exit()).style("opacity",Qt).remove(),y=e.transition(p.order()).style("opacity",1),b=Math.max(a,0)+s,x=Hr(d),B=u.selectAll(".domain").data([0]),I=(B.enter().append("path").attr("class","domain"),e.transition(B));v.append("line"),v.append("text");var F,Q,C,w,U=v.select("line"),A=y.select("line"),S=p.select("text").text(f),L=v.select("text"),G=y.select("text"),_="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(r=ca,F="x",C="y",Q="x2",w="y2",S.attr("dy",_<0?"0em":".71em").style("text-anchor","middle"),I.attr("d","M"+x[0]+","+_*o+"V0H"+x[1]+"V"+_*o)):(r=ua,F="y",C="x",Q="y2",w="x2",S.attr("dy",".32em").style("text-anchor",_<0?"end":"start"),I.attr("d","M"+_*o+","+x[0]+"H0V"+x[1]+"H"+_*o)),U.attr(w,_*a),L.attr(C,_*b),A.attr(Q,0).attr(w,_*a),G.attr(F,0).attr(C,_*b),d.rangeBand){var R=d,E=R.rangeBand()/2;h=d=function(t){return R(t)+E}}else h.rangeBand?h=d:m.call(r,d,h);v.call(r,h,d),y.call(r,d,d)}))}return u.scale=function(t){return arguments.length?(n=t,u):n},u.orient=function(t){return arguments.length?(i=t in la?t+"":sa,u):i},u.ticks=function(){return arguments.length?(l=r(arguments),u):l},u.tickValues=function(t){return arguments.length?(c=t,u):c},u.tickFormat=function(e){return arguments.length?(t=e,u):t},u.tickSize=function(t){var e=arguments.length;return e?(a=+t,o=+arguments[e-1],u):a},u.innerTickSize=function(t){return arguments.length?(a=+t,u):a},u.outerTickSize=function(t){return arguments.length?(o=+t,u):o},u.tickPadding=function(t){return arguments.length?(s=+t,u):s},u.tickSubdivide=function(){return arguments.length&&u},u};var sa="bottom",la={top:1,right:1,bottom:1,left:1};function ca(t,e,n){t.attr("transform",(function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"}))}function ua(t,e,n){t.attr("transform",(function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"}))}e.svg.brush=function(){var t,n,r=X(d,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],l=[0,0],c=!0,u=!0,h=da[0];function d(t){t.each((function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),n=t.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=t.selectAll(".resize").data(h,k);r.exit().remove(),r.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return ha[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",d.empty()?"none":null);var o,s=e.transition(t),l=e.transition(n);i&&(o=Hr(i),l.attr("x",o[0]).attr("width",o[1]-o[0]),f(s)),a&&(o=Hr(a),l.attr("y",o[0]).attr("height",o[1]-o[0]),p(s)),g(s)}))}function g(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+s[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"}))}function f(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function p(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function v(){var h,v,m=this,y=e.select(e.event.target),b=r.of(m,arguments),x=e.select(m),B=y.datum(),I=!/^(n|s)$/.test(B)&&i,F=!/^(e|w)$/.test(B)&&a,Q=y.classed("extent"),C=xt(m),w=e.mouse(m),U=e.select(o(m)).on("keydown.brush",(function(){32==e.event.keyCode&&(Q||(h=null,w[0]-=s[1],w[1]-=l[1],Q=2),N())})).on("keyup.brush",(function(){32==e.event.keyCode&&2==Q&&(w[0]+=s[1],w[1]+=l[1],Q=0,N())}));if(e.event.changedTouches?U.on("touchmove.brush",L).on("touchend.brush",G):U.on("mousemove.brush",L).on("mouseup.brush",G),x.interrupt().selectAll("*").interrupt(),Q)w[0]=s[0]-w[0],w[1]=l[0]-w[1];else if(B){var A=+/w$/.test(B),S=+/^n/.test(B);v=[s[1-A]-w[0],l[1-S]-w[1]],w[0]=s[A],w[1]=l[S]}else e.event.altKey&&(h=w.slice());function L(){var t=e.mouse(m),n=!1;v&&(t[0]+=v[0],t[1]+=v[1]),Q||(e.event.altKey?(h||(h=[(s[0]+s[1])/2,(l[0]+l[1])/2]),w[0]=s[+(t[0]<h[0])],w[1]=l[+(t[1]<h[1])]):h=null),I&&k(t,i,0)&&(f(x),n=!0),F&&k(t,a,1)&&(p(x),n=!0),n&&(g(x),b({type:"brush",mode:Q?"move":"resize"}))}function k(e,r,i){var a,o,d=Hr(r),g=d[0],f=d[1],p=w[i],v=i?l:s,m=v[1]-v[0];if(Q&&(g-=p,f-=m+p),a=(i?u:c)?Math.max(g,Math.min(f,e[i])):e[i],Q?o=(a+=p)+m:(h&&(p=Math.max(g,Math.min(f,2*h[i]-a))),p<a?(o=a,a=p):o=p),v[0]!=a||v[1]!=o)return i?n=null:t=null,v[0]=a,v[1]=o,!0}function G(){L(),x.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),e.select("body").style("cursor",null),U.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),L()}return d.event=function(i){i.each((function(){var i=r.of(this,arguments),a={x:s,y:l,i:t,j:n},o=this.__chart__||a;this.__chart__=a,$i?e.select(this).transition().each("start.brush",(function(){t=o.i,n=o.j,s=o.x,l=o.y,i({type:"brushstart"})})).tween("brush:brush",(function(){var e=Cn(s,a.x),r=Cn(l,a.y);return t=n=null,function(t){s=a.x=e(t),l=a.y=r(t),i({type:"brush",mode:"resize"})}})).each("end.brush",(function(){t=a.i,n=a.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})})):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))}))},d.x=function(t){return arguments.length?(h=da[!(i=t)<<1|!a],d):i},d.y=function(t){return arguments.length?(h=da[!i<<1|!(a=t)],d):a},d.clamp=function(t){return arguments.length?(i&&a?(c=!!t[0],u=!!t[1]):i?c=!!t:a&&(u=!!t),d):i&&a?[c,u]:i?c:a?u:null},d.extent=function(e){var r,o,c,u,h;return arguments.length?(i&&(r=e[0],o=e[1],a&&(r=r[0],o=o[0]),t=[r,o],i.invert&&(r=i(r),o=i(o)),o<r&&(h=r,r=o,o=h),r==s[0]&&o==s[1]||(s=[r,o])),a&&(c=e[0],u=e[1],i&&(c=c[1],u=u[1]),n=[c,u],a.invert&&(c=a(c),u=a(u)),u<c&&(h=c,c=u,u=h),c==l[0]&&u==l[1]||(l=[c,u])),d):(i&&(t?(r=t[0],o=t[1]):(r=s[0],o=s[1],i.invert&&(r=i.invert(r),o=i.invert(o)),o<r&&(h=r,r=o,o=h))),a&&(n?(c=n[0],u=n[1]):(c=l[0],u=l[1],a.invert&&(c=a.invert(c),u=a.invert(u)),u<c&&(h=c,c=u,u=h))),i&&a?[[r,c],[o,u]]:i?[r,o]:a&&[c,u])},d.clear=function(){return d.empty()||(s=[0,0],l=[0,0],t=n=null),d},d.empty=function(){return!!i&&s[0]==s[1]||!!a&&l[0]==l[1]},e.rebind(d,r,"on")};var ha={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},da=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function ga(t){return JSON.parse(t.responseText)}function fa(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}e.text=pe((function(t){return t.responseText})),e.json=function(t,e){return ve(t,"application/json",ga,e)},e.html=function(t,e){return ve(t,"text/html",fa,e)},e.xml=pe((function(t){return t.responseXML})),t.exports?t.exports=e:this.d3=e}).apply(self)}(co);var uo=co.exports,ho=new Date,go=new Date;function fo(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return fo((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return ho.setTime(+e),go.setTime(+r),t(ho),t(go),Math.floor(n(ho,go))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var po=fo((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));po.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?fo((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):po:null};var vo=po,mo=po.range,yo=1e3,bo=6e4,xo=36e5,Bo=864e5,Io=6048e5,Fo=fo((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*yo)}),(function(t,e){return(e-t)/yo}),(function(t){return t.getUTCSeconds()})),Qo=Fo,Co=Fo.range,wo=fo((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*yo)}),(function(t,e){t.setTime(+t+e*bo)}),(function(t,e){return(e-t)/bo}),(function(t){return t.getMinutes()})),Uo=wo,Ao=wo.range,So=fo((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*yo-t.getMinutes()*bo)}),(function(t,e){t.setTime(+t+e*xo)}),(function(t,e){return(e-t)/xo}),(function(t){return t.getHours()})),Lo=So,ko=So.range,Go=fo((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bo)/Bo}),(function(t){return t.getDate()-1})),_o=Go.range;function Ro(t){return fo((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bo)/Io}))}var Eo=Ro(0),To=Ro(1),Mo=Ro(2),No=Ro(3),Do=Ro(4),Xo=Ro(5),Zo=Ro(6),Vo=Eo.range,Ho=To.range,Wo=Mo.range,Yo=No.range,zo=Do.range,Oo=Xo.range,Jo=Zo.range,Po=fo((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),jo=Po,Ko=Po.range,qo=fo((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));qo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?fo((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var $o=qo.range,ts=fo((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*bo)}),(function(t,e){return(e-t)/bo}),(function(t){return t.getUTCMinutes()})),es=ts,ns=ts.range,rs=fo((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*xo)}),(function(t,e){return(e-t)/xo}),(function(t){return t.getUTCHours()})),is=rs,as=rs.range,os=fo((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Bo}),(function(t){return t.getUTCDate()-1})),ss=os.range;function ls(t){return fo((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Io}))}var cs=ls(0),us=ls(1),hs=ls(2),ds=ls(3),gs=ls(4),fs=ls(5),ps=ls(6),vs=cs.range,ms=us.range,ys=hs.range,bs=ds.range,xs=gs.range,Bs=fs.range,Is=ps.range,Fs=fo((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Qs=Fs,Cs=Fs.range,ws=fo((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));ws.every=function(t){return isFinite(t=Math.floor(t))&&t>0?fo((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Us=ws.range,As=Object.freeze({__proto__:null,timeDay:Go,timeDays:_o,timeFriday:Xo,timeFridays:Oo,timeHour:Lo,timeHours:ko,timeInterval:fo,timeMillisecond:vo,timeMilliseconds:mo,timeMinute:Uo,timeMinutes:Ao,timeMonday:To,timeMondays:Ho,timeMonth:jo,timeMonths:Ko,timeSaturday:Zo,timeSaturdays:Jo,timeSecond:Qo,timeSeconds:Co,timeSunday:Eo,timeSundays:Vo,timeThursday:Do,timeThursdays:zo,timeTuesday:Mo,timeTuesdays:Wo,timeWednesday:No,timeWednesdays:Yo,timeWeek:Eo,timeWeeks:Vo,timeYear:qo,timeYears:$o,utcDay:os,utcDays:ss,utcFriday:fs,utcFridays:Bs,utcHour:is,utcHours:as,utcMillisecond:vo,utcMilliseconds:mo,utcMinute:es,utcMinutes:ns,utcMonday:us,utcMondays:ms,utcMonth:Qs,utcMonths:Cs,utcSaturday:ps,utcSaturdays:Is,utcSecond:Qo,utcSeconds:Co,utcSunday:cs,utcSundays:vs,utcThursday:gs,utcThursdays:xs,utcTuesday:hs,utcTuesdays:ys,utcWednesday:ds,utcWednesdays:bs,utcWeek:cs,utcWeeks:vs,utcYear:ws,utcYears:Us});function Ss(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ls(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ks(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Gs(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=Ws(i),u=Ys(i),h=Ws(a),d=Ys(a),g=Ws(o),f=Ys(o),p=Ws(s),v=Ys(s),m=Ws(l),y=Ys(l),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:dl,e:dl,f:yl,g:Sl,G:kl,H:fl,I:pl,j:vl,L:ml,m:bl,M:xl,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:tc,s:ec,S:Bl,u:Il,U:Fl,V:Cl,w:wl,W:Ul,x:null,X:null,y:Al,Y:Ll,Z:Gl,"%":$l},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:_l,e:_l,f:Nl,g:Pl,G:Kl,H:Rl,I:El,j:Tl,L:Ml,m:Dl,M:Xl,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:tc,s:ec,S:Zl,u:Vl,U:Hl,V:Yl,w:zl,W:Ol,x:null,X:null,y:Jl,Y:jl,Z:ql,"%":$l},B={a:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return Q(t,e,n,r)},d:nl,e:nl,f:ll,g:qs,G:Ks,H:il,I:il,j:rl,L:sl,m:el,M:al,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u[r[0].toLowerCase()],n+r[0].length):-1},q:tl,Q:ul,s:hl,S:ol,u:Os,U:Js,V:Ps,w:zs,W:js,x:function(t,e,r){return Q(t,n,e,r)},X:function(t,e,n){return Q(t,r,e,n)},y:qs,Y:Ks,Z:$s,"%":cl};function I(t,e){return function(n){var r,i,a,o=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=Ns[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function F(t,e){return function(n){var r,i,a=ks(1900,void 0,1);if(Q(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Ls(ks(a.y,0,1))).getUTCDay(),r=i>4||0===i?us.ceil(r):us(r),r=os.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Ss(ks(a.y,0,1))).getDay(),r=i>4||0===i?To.ceil(r):To(r),r=Go.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Ls(ks(a.y,0,1)).getUTCDay():Ss(ks(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Ls(a)):Ss(a)}}function Q(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=B[i in Ns?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=I(n,b),b.X=I(r,b),b.c=I(e,b),x.x=I(n,x),x.X=I(r,x),x.c=I(e,x),{format:function(t){var e=I(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=F(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=I(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=F(t+="",!0);return e.toString=function(){return t},e}}}var _s,Rs,Es,Ts,Ms,Ns={"-":"",_:" ",0:"0"},Ds=/^\s*\d+/,Xs=/^%/,Zs=/[\\^$*+?|[\]().{}]/g;function Vs(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Hs(t){return t.replace(Zs,"\\$&")}function Ws(t){return new RegExp("^(?:"+t.map(Hs).join("|")+")","i")}function Ys(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function zs(t,e,n){var r=Ds.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Os(t,e,n){var r=Ds.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Js(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ps(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function js(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ks(t,e,n){var r=Ds.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qs(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function $s(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function tl(t,e,n){var r=Ds.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function el(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nl(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function rl(t,e,n){var r=Ds.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function il(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function al(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ol(t,e,n){var r=Ds.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function sl(t,e,n){var r=Ds.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ll(t,e,n){var r=Ds.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cl(t,e,n){var r=Xs.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ul(t,e,n){var r=Ds.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function hl(t,e,n){var r=Ds.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function dl(t,e){return Vs(t.getDate(),e,2)}function fl(t,e){return Vs(t.getHours(),e,2)}function pl(t,e){return Vs(t.getHours()%12||12,e,2)}function vl(t,e){return Vs(1+Go.count(qo(t),t),e,3)}function ml(t,e){return Vs(t.getMilliseconds(),e,3)}function yl(t,e){return ml(t,e)+"000"}function bl(t,e){return Vs(t.getMonth()+1,e,2)}function xl(t,e){return Vs(t.getMinutes(),e,2)}function Bl(t,e){return Vs(t.getSeconds(),e,2)}function Il(t){var e=t.getDay();return 0===e?7:e}function Fl(t,e){return Vs(Eo.count(qo(t)-1,t),e,2)}function Ql(t){var e=t.getDay();return e>=4||0===e?Do(t):Do.ceil(t)}function Cl(t,e){return t=Ql(t),Vs(Do.count(qo(t),t)+(4===qo(t).getDay()),e,2)}function wl(t){return t.getDay()}function Ul(t,e){return Vs(To.count(qo(t)-1,t),e,2)}function Al(t,e){return Vs(t.getFullYear()%100,e,2)}function Sl(t,e){return Vs((t=Ql(t)).getFullYear()%100,e,2)}function Ll(t,e){return Vs(t.getFullYear()%1e4,e,4)}function kl(t,e){var n=t.getDay();return Vs((t=n>=4||0===n?Do(t):Do.ceil(t)).getFullYear()%1e4,e,4)}function Gl(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Vs(e/60|0,"0",2)+Vs(e%60,"0",2)}function _l(t,e){return Vs(t.getUTCDate(),e,2)}function Rl(t,e){return Vs(t.getUTCHours(),e,2)}function El(t,e){return Vs(t.getUTCHours()%12||12,e,2)}function Tl(t,e){return Vs(1+os.count(ws(t),t),e,3)}function Ml(t,e){return Vs(t.getUTCMilliseconds(),e,3)}function Nl(t,e){return Ml(t,e)+"000"}function Dl(t,e){return Vs(t.getUTCMonth()+1,e,2)}function Xl(t,e){return Vs(t.getUTCMinutes(),e,2)}function Zl(t,e){return Vs(t.getUTCSeconds(),e,2)}function Vl(t){var e=t.getUTCDay();return 0===e?7:e}function Hl(t,e){return Vs(cs.count(ws(t)-1,t),e,2)}function Wl(t){var e=t.getUTCDay();return e>=4||0===e?gs(t):gs.ceil(t)}function Yl(t,e){return t=Wl(t),Vs(gs.count(ws(t),t)+(4===ws(t).getUTCDay()),e,2)}function zl(t){return t.getUTCDay()}function Ol(t,e){return Vs(us.count(ws(t)-1,t),e,2)}function Jl(t,e){return Vs(t.getUTCFullYear()%100,e,2)}function Pl(t,e){return Vs((t=Wl(t)).getUTCFullYear()%100,e,2)}function jl(t,e){return Vs(t.getUTCFullYear()%1e4,e,4)}function Kl(t,e){var n=t.getUTCDay();return Vs((t=n>=4||0===n?gs(t):gs.ceil(t)).getUTCFullYear()%1e4,e,4)}function ql(){return"+0000"}function $l(){return"%"}function tc(t){return+t}function ec(t){return Math.floor(+t/1e3)}function nc(t){return _s=Gs(t),Rs=_s.format,Es=_s.parse,Ts=_s.utcFormat,Ms=_s.utcParse,_s}nc({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var rc="%Y-%m-%dT%H:%M:%S.%LZ";var ic=Date.prototype.toISOString?function(t){return t.toISOString()}:Ts(rc),ac=ic;var oc=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Ms(rc),sc=oc,lc=io(Object.freeze({__proto__:null,isoFormat:ac,isoParse:sc,get timeFormat(){return Rs},timeFormatDefaultLocale:nc,timeFormatLocale:Gs,get timeParse(){return Es},get utcFormat(){return Ts},get utcParse(){return Ms}}));function cc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function uc(t){return(t=cc(Math.abs(t)))?t[1]:NaN}var hc,dc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gc(t){if(!(e=dc.exec(t)))throw new Error("invalid format: "+t);var e;return new fc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function fc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function pc(t,e){var n=cc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}gc.prototype=fc.prototype,fc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var vc={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return pc(100*t,e)},r:pc,s:function(t,e){var n=cc(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(hc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+cc(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function mc(t){return t}var yc,bc,xc,Bc=Array.prototype.map,Ic=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fc(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?mc:(e=Bc.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?mc:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Bc.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=gc(t)).fill,n=t.align,h=t.sign,d=t.symbol,g=t.zero,f=t.width,p=t.comma,v=t.precision,m=t.trim,y=t.type;"n"===y?(p=!0,y="g"):vc[y]||(void 0===v&&(v=12),m=!0,y="g"),(g||"0"===e&&"="===n)&&(g=!0,e="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?a:/[%p]/.test(y)?l:"",B=vc[y],I=/[defgprs%]/.test(y);function F(t){var i,a,l,d=b,F=x;if("c"===y)F=B(t)+F,t="";else{var Q=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:B(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),Q&&0==+t&&"+"!==h&&(Q=!1),d=(Q?"("===h?h:c:"-"===h||"("===h?"":h)+d,F=("s"===y?Ic[8+hc/3]:"")+F+(Q&&"("===h?")":""),I)for(i=-1,a=t.length;++i<a;)if(48>(l=t.charCodeAt(i))||l>57){F=(46===l?o+t.slice(i+1):t.slice(i))+F,t=t.slice(0,i);break}}p&&!g&&(t=r(t,1/0));var C=d.length+t.length+F.length,w=C<f?new Array(f-C+1).join(e):"";switch(p&&g&&(t=r(w+t,w.length?f-F.length:1/0),w=""),n){case"<":t=d+t+F+w;break;case"=":t=d+w+t+F;break;case"^":t=w.slice(0,C=w.length>>1)+d+t+F+w.slice(C);break;default:t=w+d+t+F}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),F.toString=function(){return t+""},F}return{format:h,formatPrefix:function(t,e){var n=h(((t=gc(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(uc(e)/3))),i=Math.pow(10,-r),a=Ic[8+r/3];return function(t){return n(i*t)+a}}}}function Qc(t){return yc=Fc(t),bc=yc.format,xc=yc.formatPrefix,yc}Qc({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});for(var Cc=Object.freeze({__proto__:null,FormatSpecifier:fc,get format(){return bc},formatDefaultLocale:Qc,formatLocale:Fc,get formatPrefix(){return xc},formatSpecifier:gc,precisionFixed:function(t){return Math.max(0,-uc(Math.abs(t)))},precisionPrefix:function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uc(e)/3)))-uc(Math.abs(t)))},precisionRound:function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,uc(e)-uc(t))+1}}),wc=io(Cc),Uc=function(t){for(var e,n=t.length,r=0;r<n;r++)if(((e=t.charCodeAt(r))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0},Ac=function(t){var e=typeof t;if("string"===e){var n=t;if(0===(t=+t)&&Uc(n))return!1}else if("number"!==e)return!1;return t-t<1},Sc={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"},Lc={},kc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),_c=0;_c<64;_c++)Gc[kc.charCodeAt(_c)]=_c;var Rc=Object.freeze({__proto__:null,decode:function(t){var e,n,r,i,a,o=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var c=new ArrayBuffer(o),u=new Uint8Array(c);for(e=0;e<s;e+=4)n=Gc[t.charCodeAt(e)],r=Gc[t.charCodeAt(e+1)],i=Gc[t.charCodeAt(e+2)],a=Gc[t.charCodeAt(e+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&a;return c},encode:function(t){var e,n=new Uint8Array(t),r=n.length,i="";for(e=0;e<r;e+=3)i+=kc[n[e]>>2],i+=kc[(3&n[e])<<4|n[e+1]>>4],i+=kc[(15&n[e+1])<<2|n[e+2]>>6],i+=kc[63&n[e+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i}}),Ec=io(Rc),Tc=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")},Mc=Ec.decode,Nc=Tc,Dc=Array.isArray,Xc=ArrayBuffer,Zc=DataView;function Vc(t){return Xc.isView(t)&&!(t instanceof Zc)}function Hc(t){return Dc(t)||Vc(t)}Lc.isTypedArray=Vc,Lc.isArrayOrTypedArray=Hc,Lc.isArray1D=function(t){return!Hc(t[0])},Lc.ensureArray=function(t,e){return Dc(t)||(t=[]),t.length=e,t};var Wc={u1c:"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,i1:"undefined"==typeof Int8Array?void 0:Int8Array,u1:"undefined"==typeof Uint8Array?void 0:Uint8Array,i2:"undefined"==typeof Int16Array?void 0:Int16Array,u2:"undefined"==typeof Uint16Array?void 0:Uint16Array,i4:"undefined"==typeof Int32Array?void 0:Int32Array,u4:"undefined"==typeof Uint32Array?void 0:Uint32Array,f4:"undefined"==typeof Float32Array?void 0:Float32Array,f8:"undefined"==typeof Float64Array?void 0:Float64Array};function Yc(t){return t.constructor===ArrayBuffer}function zc(t,e,n){if(Hc(t)){if(Hc(t[0])){for(var r=n,i=0;i<t.length;i++)r=e(r,t[i].length);return r}return t.length}return 0}Wc.uint8c=Wc.u1c,Wc.uint8=Wc.u1,Wc.int8=Wc.i1,Wc.uint16=Wc.u2,Wc.int16=Wc.i2,Wc.uint32=Wc.u4,Wc.int32=Wc.i4,Wc.float32=Wc.f4,Wc.float64=Wc.f8,Lc.isArrayBuffer=Yc,Lc.decodeTypedArraySpec=function(t){var e=[],n=function(t){return{bdata:t.bdata,dtype:t.dtype,shape:t.shape}}(t),r=n.dtype,i=Wc[r];if(!i)throw new Error('Error in dtype: "'+r+'"');var a=i.BYTES_PER_ELEMENT,o=n.bdata;Yc(o)||(o=Mc(o));var s=void 0===n.shape?[o.byteLength/a]:(""+n.shape).split(",");s.reverse();var l,c,u=s.length,h=+s[0],d=a*h,g=0;if(1===u)e=new i(o);else if(2===u)for(l=+s[1],c=0;c<l;c++)e[c]=new i(o,g,h),g+=d;else{if(3!==u)throw new Error("ndim: "+u+'is not supported with the shape:"'+n.shape+'"');l=+s[1];for(var f=+s[2],p=0;p<f;p++)for(e[p]=[],c=0;c<l;c++)e[p][c]=new i(o,g,h),g+=d}return e.bdata=n.bdata,e.dtype=n.dtype,e.shape=s.reverse().join(","),t._inputArray=e,e},Lc.isTypedArraySpec=function(t){return Nc(t)&&t.hasOwnProperty("dtype")&&"string"==typeof t.dtype&&t.hasOwnProperty("bdata")&&("string"==typeof t.bdata||Yc(t.bdata))&&(void 0===t.shape||t.hasOwnProperty("shape")&&("string"==typeof t.shape||"number"==typeof t.shape))},Lc.concat=function(){var t,e,n,r,i,a,o,s,l=[],c=!0,u=0;for(n=0;n<arguments.length;n++)(a=(r=arguments[n]).length)&&(e?l.push(r):(e=r,i=a),Dc(r)?t=!1:(c=!1,u?t!==r.constructor&&(t=!1):t=r.constructor),u+=a);if(!u)return[];if(!l.length)return e;if(c)return e.concat.apply(e,l);if(t){for((o=new t(u)).set(e),n=0;n<l.length;n++)r=l[n],o.set(r,i),i+=r.length;return o}for(o=new Array(u),s=0;s<e.length;s++)o[s]=e[s];for(n=0;n<l.length;n++){for(r=l[n],s=0;s<r.length;s++)o[i+s]=r[s];i+=s}return o},Lc.maxRowLength=function(t){return zc(t,Math.max,0)},Lc.minRowLength=function(t){return zc(t,Math.min,1/0)};var Oc=Ac,Jc=Lc.isArrayOrTypedArray,Pc=function(t,e){if(Oc(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";var n,r,i,a,o=e.split(".");for(a=0;a<o.length;a++)if("__"===String(o[a]).slice(0,2))throw"bad property string";for(a=0;a<o.length;){if(n=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])o[a]=n[1];else{if(0!==a)throw"bad property string";o.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),i=0;i<r.length;i++)a++,o.splice(a,0,Number(r[i]))}a++}return"object"!=typeof t?function(t,e,n){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:n,obj:t}}(t,e,o):{set:$c(t,o,e),get:jc(t,o),astr:e,parts:o,obj:t}};function jc(t,e){return function(){var n,r,i,a,o,s=t;for(a=0;a<e.length-1;a++){if(-1===(n=e[a])){for(r=!0,i=[],o=0;o<s.length;o++)i[o]=jc(s[o],e.slice(a+1))(),i[o]!==i[0]&&(r=!1);return r?i[0]:i}if("number"==typeof n&&!Jc(s))return;if("object"!=typeof(s=s[n])||null===s)return}if("object"==typeof s&&null!==s&&null!==(i=s[e[a]]))return i}}var Kc=/(^|\.)args\[/;function qc(t,e){return void 0===t||null===t&&!e.match(Kc)}function $c(t,e,n){return function(r){var i,a,o=t,s="",l=qc(r,n);for(a=0;a<e.length-1;a++){if("number"==typeof(i=e[a])&&!Jc(o))throw"array index but container is not an array";if(-1===i){if(l=!eu(o,e.slice(a+1),r,n))break;return}if(!nu(o,i,e[a+1],l))break;if("object"!=typeof(o=o[i])||null===o)throw"container is not an object";s=tu(s,i)}if(l){if(a===e.length-1&&(delete o[e[a]],Array.isArray(o)&&+e[a]==o.length-1))for(;o.length&&void 0===o[o.length-1];)o.pop()}else o[e[a]]=r}}function tu(t,e){var n=e;return Oc(e)?n="["+e+"]":t&&(n="."+e),t+n}function eu(t,e,n,r){var i,a=Jc(n),o=!0,s=n,l=r.replace("-1",0),c=!a&&qc(n,l),u=e[0];for(i=0;i<t.length;i++)l=r.replace("-1",i),a&&(c=qc(s=n[i%n.length],l)),c&&(o=!1),nu(t,i,u,c)&&$c(t[i],e,r.replace("-1",i))(s);return o}function nu(t,e,n,r){if(void 0===t[e]){if(r)return!1;t[e]="number"==typeof n?[]:{}}return!0}var ru=Pc,iu=/^\w*$/,au=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,ou=/^[^\.\[\]]+$/,su=Ac,lu=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(e[0],e[1]))/Math.LN10;return su(n)||(n=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),n},cu=Lc.isArrayOrTypedArray,uu=Tc;var hu={mod:function(t,e){var n=t%e;return n<0?n+e:n},modHalf:function(t,e){return Math.abs(t)>e/2?t-Math.round(t/e)*e:t}},du={},gu={exports:{}};gu.exports=function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=/^\s+/,n=/\s+$/;function r(t,e){if(e=e||{},(t=t||"")instanceof r)return t;if(!(this instanceof r))return new r(t,e);var n=i(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function i(e){var n={r:0,g:0,b:0},r=1,i=null,o=null,l=null,u=!1,h=!1;return"string"==typeof e&&(e=H(e)),"object"==t(e)&&(V(e.r)&&V(e.g)&&V(e.b)?(n=a(e.r,e.g,e.b),u=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):V(e.h)&&V(e.s)&&V(e.v)?(i=E(e.s),o=E(e.v),n=c(e.h,i,o),u=!0,h="hsv"):V(e.h)&&V(e.s)&&V(e.l)&&(i=E(e.s),l=E(e.l),n=s(e.h,i,l),u=!0,h="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=A(r),{ok:u,format:e.format||h,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function a(t,e,n){return{r:255*S(t,255),g:255*S(e,255),b:255*S(n,255)}}function o(t,e,n){t=S(t,255),e=S(e,255),n=S(n,255);var r,i,a=Math.max(t,e,n),o=Math.min(t,e,n),s=(a+o)/2;if(a==o)r=i=0;else{var l=a-o;switch(i=s>.5?l/(2-a-o):l/(a+o),a){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return{h:r,s:i,l:s}}function s(t,e,n){var r,i,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=S(t,360),e=S(e,100),n=S(n,100),0===e)r=i=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;r=o(l,s,t+1/3),i=o(l,s,t),a=o(l,s,t-1/3)}return{r:255*r,g:255*i,b:255*a}}function l(t,e,n){t=S(t,255),e=S(e,255),n=S(n,255);var r,i,a=Math.max(t,e,n),o=Math.min(t,e,n),s=a,l=a-o;if(i=0===a?0:l/a,a==o)r=0;else{switch(a){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return{h:r,s:i,v:s}}function c(t,e,n){t=6*S(t,360),e=S(e,100),n=S(n,100);var r=Math.floor(t),i=t-r,a=n*(1-e),o=n*(1-i*e),s=n*(1-(1-i)*e),l=r%6;return{r:255*[n,o,a,a,s,n][l],g:255*[s,n,n,o,a,a][l],b:255*[a,a,s,n,n,o][l]}}function u(t,e,n,r){var i=[R(Math.round(t).toString(16)),R(Math.round(e).toString(16)),R(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function h(t,e,n,r,i){var a=[R(Math.round(t).toString(16)),R(Math.round(e).toString(16)),R(Math.round(n).toString(16)),R(T(r))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function d(t,e,n,r){return[R(T(r)),R(Math.round(t).toString(16)),R(Math.round(e).toString(16)),R(Math.round(n).toString(16))].join("")}function g(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.s-=e/100,n.s=L(n.s),r(n)}function f(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.s+=e/100,n.s=L(n.s),r(n)}function p(t){return r(t).desaturate(100)}function v(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.l+=e/100,n.l=L(n.l),r(n)}function m(t,e){e=0===e?0:e||10;var n=r(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),r(n)}function y(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.l-=e/100,n.l=L(n.l),r(n)}function b(t,e){var n=r(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,r(n)}function x(t){var e=r(t).toHsl();return e.h=(e.h+180)%360,r(e)}function B(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(t).toHsl(),i=[r(t)],a=360/e,o=1;o<e;o++)i.push(r({h:(n.h+o*a)%360,s:n.s,l:n.l}));return i}function I(t){var e=r(t).toHsl(),n=e.h;return[r(t),r({h:(n+72)%360,s:e.s,l:e.l}),r({h:(n+216)%360,s:e.s,l:e.l})]}function F(t,e,n){e=e||6,n=n||30;var i=r(t).toHsl(),a=360/n,o=[r(t)];for(i.h=(i.h-(a*e>>1)+720)%360;--e;)i.h=(i.h+a)%360,o.push(r(i));return o}function Q(t,e){e=e||6;for(var n=r(t).toHsv(),i=n.h,a=n.s,o=n.v,s=[],l=1/e;e--;)s.push(r({h:i,s:a,v:o})),o=(o+l)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=A(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=l(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=l(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=o(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return u(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return h(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*S(this._r,255))+"%",g:Math.round(100*S(this._g,255))+"%",b:Math.round(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*S(this._r,255))+"%, "+Math.round(100*S(this._g,255))+"%, "+Math.round(100*S(this._b,255))+"%)":"rgba("+Math.round(100*S(this._r,255))+"%, "+Math.round(100*S(this._g,255))+"%, "+Math.round(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(w[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var a=r(t);n="#"+d(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(Q,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(B,[3])},tetrad:function(){return this._applyCombination(B,[4])}},r.fromRatio=function(e,n){if("object"==t(e)){var i={};for(var a in e)e.hasOwnProperty(a)&&(i[a]="a"===a?e[a]:E(e[a]));e=i}return r(e,n)},r.equals=function(t,e){return!(!t||!e)&&r(t).toRgbString()==r(e).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(t,e,n){n=0===n?0:n||50;var i=r(t).toRgb(),a=r(e).toRgb(),o=n/100;return r({r:(a.r-i.r)*o+i.r,g:(a.g-i.g)*o+i.g,b:(a.b-i.b)*o+i.b,a:(a.a-i.a)*o+i.a})},r.readability=function(t,e){var n=r(t),i=r(e);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)},r.isReadable=function(t,e,n){var i,a,o=r.readability(t,e);switch(a=!1,(i=W(n)).level+i.size){case"AAsmall":case"AAAlarge":a=o>=4.5;break;case"AAlarge":a=o>=3;break;case"AAAsmall":a=o>=7}return a},r.mostReadable=function(t,e,n){var i,a,o,s,l=null,c=0;a=(n=n||{}).includeFallbackColors,o=n.level,s=n.size;for(var u=0;u<e.length;u++)(i=r.readability(t,e[u]))>c&&(c=i,l=r(e[u]));return r.isReadable(t,l,{level:o,size:s})||!a?l:(n.includeFallbackColors=!1,r.mostReadable(t,["#fff","#000"],n))};var C=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},w=r.hexNames=U(C);function U(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function A(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function S(t,e){G(t)&&(t="100%");var n=_(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function L(t){return Math.min(1,Math.max(0,t))}function k(t){return parseInt(t,16)}function G(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function _(t){return"string"==typeof t&&-1!=t.indexOf("%")}function R(t){return 1==t.length?"0"+t:""+t}function E(t){return t<=1&&(t=100*t+"%"),t}function T(t){return Math.round(255*parseFloat(t)).toString(16)}function M(t){return k(t)/255}var N,D,X,Z=(D="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",X="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+D),rgba:new RegExp("rgba"+X),hsl:new RegExp("hsl"+D),hsla:new RegExp("hsla"+X),hsv:new RegExp("hsv"+D),hsva:new RegExp("hsva"+X),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(t){return!!Z.CSS_UNIT.exec(t)}function H(t){t=t.replace(e,"").replace(n,"").toLowerCase();var r,i=!1;if(C[t])t=C[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(r=Z.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=Z.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Z.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=Z.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Z.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=Z.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Z.hex8.exec(t))?{r:k(r[1]),g:k(r[2]),b:k(r[3]),a:M(r[4]),format:i?"name":"hex8"}:(r=Z.hex6.exec(t))?{r:k(r[1]),g:k(r[2]),b:k(r[3]),format:i?"name":"hex"}:(r=Z.hex4.exec(t))?{r:k(r[1]+""+r[1]),g:k(r[2]+""+r[2]),b:k(r[3]+""+r[3]),a:M(r[4]+""+r[4]),format:i?"name":"hex8"}:!!(r=Z.hex3.exec(t))&&{r:k(r[1]+""+r[1]),g:k(r[2]+""+r[2]),b:k(r[3]+""+r[3]),format:i?"name":"hex"}}function W(t){var e,n;return"AA"!==(e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(n=(t.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:e,size:n}}return r}();var fu,pu,vu=gu.exports;function mu(){return pu||(pu=1,fu=function(t){var e=t.variantValues,n=t.editType,r=t.colorEditType;void 0===r&&(r=n);var i={family:{valType:"string",noBlank:!0,strict:!0,editType:n,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:r},weight:{editType:n,valType:"enumerated",values:["normal","bold"],dflt:"normal",description:["Sets the weight (or boldness) of the font."].join(" ")},style:{editType:n,valType:"enumerated",values:["normal","italic"],dflt:"normal",description:["Sets whether a font should be styled with a normal or italic face from its family."].join(" ")},variant:t.noFontVariant?void 0:{editType:n,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal",description:["Sets the variant of the font."].join(" ")},editType:n,description:""+(t.description||"")};return t.autoSize&&(i.size.dflt="auto"),t.autoColor&&(i.color.dflt="auto"),t.arrayOk&&(i.family.arrayOk=!0,i.weight.arrayOk=!0,i.style.arrayOk=!0,i.variant.arrayOk=!0,i.size.arrayOk=!0,i.color.arrayOk=!0),i}),fu}var yu={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},bu=yu,xu=mu(),Bu=xu({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});Bu.family.dflt=bu.HOVERFONT,Bu.size.dflt=bu.HOVERFONTSIZE;var Iu={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none",description:["Determines expansion of hover effects to other subplots","If *single* just the axis pair of the primary point is included without overlaying subplots.","If *overlaying* all subplots using the main axis and occupying the same space are included.","If *axis*, also include stacked subplots using the same axis","when `hovermode` is set to *x*, *x unified*, *y* or *y unified*."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:Bu,grouptitlefont:xu({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}},Fu={},Qu=Tc,Cu=Array.isArray;function wu(t,e,n,r){var i,a,o,s,l,c,u,h=t[0],d=t.length;if(2===d&&Cu(h)&&Cu(t[1])&&0===h.length){if(u=function(t,e){var n,r;for(n=0;n<t.length;n++){if(null!==(r=t[n])&&"object"==typeof r)return!1;void 0!==r&&(e[n]=r)}return!0}(t[1],h),u)return h;h.splice(0,h.length)}for(var g=1;g<d;g++)for(a in i=t[g])o=h[a],s=i[a],r&&Cu(s)?h[a]=s:e&&s&&(Qu(s)||(l=Cu(s)))?(l?(l=!1,c=o&&Cu(o)?o:[]):c=o&&Qu(o)?o:{},h[a]=wu([c,s],e,n,r)):(void 0!==s||n)&&(h[a]=s);return h}Fu.extendFlat=function(){return wu(arguments,!1,!1,!1)},Fu.extendDeep=function(){return wu(arguments,!0,!1,!1)},Fu.extendDeepAll=function(){return wu(arguments,!0,!0,!1)},Fu.extendDeepNoArrays=function(){return wu(arguments,!0,!1,!0)};var Uu=mu(),Au=Iu.hoverlabel,Su=Fu.extendFlat,Lu={hoverlabel:{bgcolor:Su({},Au.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:Su({},Au.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:Uu({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:Su({},Au.align,{arrayOk:!0}),namelength:Su({},Au.namelength,{arrayOk:!0}),editType:"none"}},ku=mu(),Gu=Lu,_u={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legend:{valType:"subplotid",dflt:"legend",editType:"style",description:["Sets the reference to a legend to show this trace in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:ku({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items.","When having unranked or equal rank items shapes would be displayed after traces","i.e. according to their order in data and layout."].join(" ")},legendwidth:{valType:"number",min:0,editType:"style",description:"Sets the width (in px or fraction) of the legend for this trace."},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appears as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:Gu.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc",description:["WARNING: All transforms are deprecated and may be removed from the API in next major version.","An array of operations that manipulate the trace data,","for example filtering or sorting the data arrays."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}},Ru=vu,Eu={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},Tu=Eu.RdBu;function Mu(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var n=0;n<t.length;n++){var r=t[n];if(2!==r.length||+r[0]<e||!Ru(r[1]).isValid())return!1;e=+r[0]}return!0}var Nu={scales:Eu,defaultScale:Tu,get:function(t,e){if(e||(e=Tu),!t)return e;function n(){try{t=Eu[t]||JSON.parse(t)}catch(n){t=e}}return"string"==typeof t&&(n(),"string"==typeof t&&n()),Mu(t)?t:e},isValid:function(t){return void 0!==Eu[t]||Mu(t)}},Du={exports:{}},Xu={defaults:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],defaultLine:"#444",lightLine:"#eee",background:"#fff",borderLine:"#BEC8D9",lightFraction:1e3/11},Zu=vu,Vu=Ac,Hu=Lc.isTypedArray,Wu=Du.exports={},Yu=Xu;Wu.defaults=Yu.defaults;var zu=Wu.defaultLine=Yu.defaultLine;Wu.lightLine=Yu.lightLine;var Ou=Wu.background=Yu.background;function Ju(t){if(Vu(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var n=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return t;var r=n[1].trim().split(/\s*[\s,]\s*/),i="a"===e.charAt(3)&&4===r.length;if(!i&&3!==r.length)return t;for(var a=0;a<r.length;a++){if(!r[a].length)return t;if(r[a]=Number(r[a]),!(r[a]>=0))return t;if(3===a)r[a]>1&&(r[a]=1);else if(r[a]>=1)return t}var o=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return i?"rgba("+o+", "+r[3]+")":"rgb("+o+")"}Wu.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},Wu.rgb=function(t){return Wu.tinyRGB(Zu(t))},Wu.opacity=function(t){return t?Zu(t).getAlpha():0},Wu.addOpacity=function(t,e){var n=Zu(t).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+e+")"},Wu.combine=function(t,e){var n=Zu(t).toRgb();if(1===n.a)return Zu(t).toRgbString();var r=Zu(e||Ou).toRgb(),i=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a},a={r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a};return Zu(a).toRgbString()},Wu.interpolate=function(t,e,n){var r=Zu(t).toRgb(),i=Zu(e).toRgb(),a={r:n*r.r+(1-n)*i.r,g:n*r.g+(1-n)*i.g,b:n*r.b+(1-n)*i.b};return Zu(a).toRgbString()},Wu.contrast=function(t,e,n){var r=Zu(t);return 1!==r.getAlpha()&&(r=Zu(Wu.combine(t,Ou))),(r.isDark()?e?r.lighten(e):Ou:n?r.darken(n):zu).toString()},Wu.stroke=function(t,e){var n=Zu(e);t.style({stroke:Wu.tinyRGB(n),"stroke-opacity":n.getAlpha()})},Wu.fill=function(t,e){var n=Zu(e);t.style({fill:Wu.tinyRGB(n),"fill-opacity":n.getAlpha()})},Wu.clean=function(t){if(t&&"object"==typeof t){var e,n,r,i,a=Object.keys(t);for(e=0;e<a.length;e++)if(i=t[r=a[e]],"color"===r.substr(r.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=Ju(i[n]);else t[r]=Ju(i);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=Ju(i[n][1]));else if(Array.isArray(i)){var o=i[0];if(!Array.isArray(o)&&o&&"object"==typeof o)for(n=0;n<i.length;n++)Wu.clean(i[n])}else i&&"object"==typeof i&&!Hu(i)&&Wu.clean(i)}};var Pu=Du.exports,ju={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2},Ku={counter:function(t,e,n,r){var i=(e||"")+(n?"":"$"),a=!1===r?"":"^";return"xy"===t?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+i):new RegExp(a+t+"([2-9]|[1-9][0-9]+)?"+i)}};!function(t){var e=Ac,n=vu,r=_u,i=Nu,a=Pu,o=ju.DESELECTDIM,s=Pc,l=Ku.counter,c=hu.modHalf,u=Lc.isArrayOrTypedArray,h=Lc.isTypedArraySpec,d=Lc.decodeTypedArraySpec;function g(e,n){var r=t.valObjectMeta[n.valType];if(n.arrayOk&&u(e))return!0;if(r.validateFunction)return r.validateFunction(e,n);var i={},a=i,o={set:function(t){a=t}};return r.coerceFunction(e,o,i,n),a!==i}t.valObjectMeta={data_array:{description:["An {array} of data.","The value must represent an {array} or it will be ignored,","but this array can be provided in several forms:","(1) a regular {array} object","(2) a typed array (e.g. Float32Array)","(3) an object with keys dtype, bdata, and optionally shape.","In this 3rd form, dtype is one of","*f8*, *f4*.","*i4*, *u4*,","*i2*, *u2*,","*i1*, *u1* or *u1c* for Uint8ClampedArray.","In addition to shorthand `dtype` above one could also use the following forms:","*float64*, *float32*,","*int32*, *uint32*,","*int16*, *uint16*,","*int8*, *uint8* or *uint8c* for Uint8ClampedArray.","`bdata` is either a base64-encoded string or the ArrayBuffer of","an integer or float typed array.","For either multi-dimensional arrays you must also","provide its dimensions separated by comma via `shape`.","For example using `dtype`: *f4* and `shape`: *5,100* you can","declare a 2-D array that has 5 rows and 100 columns","containing float32 values i.e. 4 bits per value.","`shape` is optional for one dimensional arrays."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){e.set(u(t)?t:h(t)?d(t):n)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(t,e,n,r){r.coerceNumber&&(t=+t),-1===r.values.indexOf(t)?e.set(n):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var n=e.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(t))return!0}else if(t===n[r])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){!0===t||!1===t?e.set(t):e.set(n)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(t,n,r,i){!e(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?n.set(r):n.set(+t)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(t,n,r,i){t%1||!e(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?n.set(r):n.set(+t)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(t,e,n,r){if("string"!=typeof t){var i="number"==typeof t;!0!==r.strict&&i?e.set(String(t)):e.set(n)}else r.noBlank&&!t?e.set(n):e.set(t)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(t,e,r){n(t).isValid()?e.set(t):e.set(r)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,r){Array.isArray(t)&&t.length&&t.every((function(t){return n(t).isValid()}))?e.set(t):e.set(r)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(i.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){e.set(i.get(t,n))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(t,n,r){"auto"===t?n.set("auto"):e(t)?n.set(c(+t,360)):n.set(r)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(t,e,n,r){var i=r.regex||l(n);"string"==typeof t&&i.test(t)?e.set(t):e.set(n)},validateFunction:function(t,e){var n=e.dflt;return t===n||"string"==typeof t&&!!l(n).test(t)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(t,e,n,r){if(-1===(r.extras||[]).indexOf(t))if("string"==typeof t){for(var i=t.split("+"),a=0;a<i.length;){var o=i[a];-1===r.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?e.set(i.join("+")):e.set(n)}else e.set(n);else e.set(t)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(t,e,n){void 0===t?e.set(n):e.set(h(t)?d(t):t)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(e,n,r,i){function a(e,n,r){var i,a={set:function(t){i=t}};return void 0===r&&(r=n.dflt),t.valObjectMeta[n.valType].coerceFunction(e,a,r,n),i}if(h(e)&&(e=d(e)),u(e)){var o,s,l,c,g,f,p=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(e)&&u(e[0]),v=i.items,m=[],y=Array.isArray(v),b=y&&p&&u(v[0]),x=p&&y&&!b,B=y&&!x?v.length:e.length;if(r=Array.isArray(r)?r:[],p)for(o=0;o<B;o++)for(m[o]=[],l=u(e[o])?e[o]:[],g=x?v.length:y?v[o].length:l.length,s=0;s<g;s++)c=x?v[s]:y?v[o][s]:v,void 0!==(f=a(l[s],c,(r[o]||[])[s]))&&(m[o][s]=f);else for(o=0;o<B;o++)void 0!==(f=a(e[o],y?v[o]:v,r[o]))&&(m[o]=f);n.set(m)}else n.set(r)},validateFunction:function(t,e){if(!u(t))return!1;var n=e.items,r=Array.isArray(n),i=2===e.dimensions;if(!e.freeLength&&t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(i){if(!u(t[a])||!e.freeLength&&t[a].length!==n[a].length)return!1;for(var o=0;o<t[a].length;o++)if(!g(t[a][o],r?n[a][o]:n))return!1}else if(!g(t[a],r?n[a]:n))return!1;return!0}}},t.coerce=function(e,n,r,i,a){var o=s(r,i).get(),l=s(e,i),c=s(n,i),f=l.get(),p=n._template;if(void 0===f&&p&&(f=s(p,i).get(),p=0),void 0===a&&(a=o.dflt),o.arrayOk){if(u(f))return c.set(f),f;if(h(f))return f=d(f),c.set(f),f}var v=t.valObjectMeta[o.valType].coerceFunction;v(f,c,a,o);var m=c.get();return p&&m===a&&!g(f,o)&&(v(f=s(p,i).get(),c,a,o),m=c.get()),m},t.coerce2=function(e,n,r,i,a){var o=s(e,i),l=t.coerce(e,n,r,i,a),c=o.get();return null!=c&&l},t.coerceFont=function(t,e,n,r){r||(r={});var i={};return n=n||{},i.family=t(e+".family",n.family),i.size=t(e+".size",n.size),i.color=t(e+".color",n.color),i.weight=t(e+".weight",n.weight),i.style=t(e+".style",n.style),r.noFontVariant||(i.variant=t(e+".variant",n.variant)),i},t.coercePattern=function(t,e,n,r){if(t(e+".shape")){t(e+".solidity"),t(e+".size");var i="overlay"===t(e+".fillmode");if(!r){var o=t(e+".bgcolor",i?n:void 0);t(e+".fgcolor",i?a.contrast(o):n)}t(e+".fgopacity",i?.5:1)}},t.coerceHoverinfo=function(e,n,i){var a,o=n._module.attributes,s=o.hoverinfo?o:r,l=s.hoverinfo;if(1===i._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),a=c.join("+")}return t.coerce(e,n,s,"hoverinfo",a)},t.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var n,r,i=t.marker.opacity;if(void 0!==i)u(i)||t.selected||t.unselected||(n=i,r=o*i),e("selected.marker.opacity",n),e("unselected.marker.opacity",r)}},t.validate=g}(du);var qu={},$u={exports:{}},th={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},typesetMath:{valType:"boolean",dflt:!0,description:["Determines whether math should be typeset or not,","when MathJax (either v2 or v3) is present on the page."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},editSelection:{valType:"boolean",dflt:!0,description:"Enables moving selections."},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo and mapbox subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo and mapbox) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export.","This config option was formerly named `plot3dPixelRatio`","which is now deprecated."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},globalTransforms:{valType:"any",dflt:[],description:["Set global transform to be applied to all traces with no","specification needed"].join(" ")},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},eh={};!function t(e,n){for(var r in e){var i=e[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),t(i,n[r]))}}(th,eh);var nh={configAttributes:th,dfltConfig:eh},rh=uo,ih=Ac,ah=[],oh=function(t,e){if(-1===ah.indexOf(t)){ah.push(t);var n=1e3;ih(e)?n=e:"long"===e&&(n=3e3);var r=rh.select("body").selectAll(".plotly-notifier").data([0]);r.enter().append("div").classed("plotly-notifier",!0),r.selectAll(".notifier-note").data(ah).enter().append("div").classed("notifier-note",!0).style("opacity",0).each((function(t){var r=rh.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",(function(){r.transition().call(i)}));for(var a=r.append("p"),o=t.split(/<br\s*\/?>/g),s=0;s<o.length;s++)s&&a.append("br"),a.append("span").text(o[s]);"stick"===e?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(n).call(i)}))}function i(t){t.duration(700).style("opacity",0).each("end",(function(t){var e=ah.indexOf(t);-1!==e&&ah.splice(e,1),rh.select(this).remove()}))}},sh=nh.dfltConfig,lh=oh,ch=$u.exports={};ch.log=function(){var t;if(sh.logging>1){var e=["LOG:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(sh.notifyOnLogging>1){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);lh(n.join("<br>"),"long")}},ch.warn=function(){var t;if(sh.logging>0){var e=["WARN:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(sh.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);lh(n.join("<br>"),"stick")}},ch.error=function(){var t;if(sh.logging>0){var e=["ERROR:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(sh.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);lh(n.join("<br>"),"stick")}};var uh=$u.exports,hh={},dh=function(){},gh=function(t,e){if(e instanceof RegExp){for(var n=e.toString(),r=0;r<t.length;r++)if(t[r]instanceof RegExp&&t[r].toString()===n)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t},fh={};var ph=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};var vh=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};var mh=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var yh=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t};var bh=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],g=e[11],f=e[12],p=e[13],v=e[14],m=e[15],y=n*s-r*o,b=n*l-i*o,x=n*c-a*o,B=r*l-i*s,I=r*c-a*s,F=i*c-a*l,Q=u*p-h*f,C=u*v-d*f,w=u*m-g*f,U=h*v-d*p,A=h*m-g*p,S=d*m-g*v,L=y*S-b*A+x*U+B*w-I*C+F*Q;if(!L)return null;return L=1/L,t[0]=(s*S-l*A+c*U)*L,t[1]=(i*A-r*S-a*U)*L,t[2]=(p*F-v*I+m*B)*L,t[3]=(d*I-h*F-g*B)*L,t[4]=(l*w-o*S-c*C)*L,t[5]=(n*S-i*w+a*C)*L,t[6]=(v*x-f*F-m*b)*L,t[7]=(u*F-d*x+g*b)*L,t[8]=(o*A-s*w+c*Q)*L,t[9]=(r*w-n*A-a*Q)*L,t[10]=(f*I-p*x+m*y)*L,t[11]=(h*x-u*I-g*y)*L,t[12]=(s*C-o*U-l*Q)*L,t[13]=(n*U-r*C+i*Q)*L,t[14]=(p*b-f*B-v*y)*L,t[15]=(u*B-h*b+d*y)*L,t};var xh=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],g=e[11],f=e[12],p=e[13],v=e[14],m=e[15];return t[0]=s*(d*m-g*v)-h*(l*m-c*v)+p*(l*g-c*d),t[1]=-(r*(d*m-g*v)-h*(i*m-a*v)+p*(i*g-a*d)),t[2]=r*(l*m-c*v)-s*(i*m-a*v)+p*(i*c-a*l),t[3]=-(r*(l*g-c*d)-s*(i*g-a*d)+h*(i*c-a*l)),t[4]=-(o*(d*m-g*v)-u*(l*m-c*v)+f*(l*g-c*d)),t[5]=n*(d*m-g*v)-u*(i*m-a*v)+f*(i*g-a*d),t[6]=-(n*(l*m-c*v)-o*(i*m-a*v)+f*(i*c-a*l)),t[7]=n*(l*g-c*d)-o*(i*g-a*d)+u*(i*c-a*l),t[8]=o*(h*m-g*p)-u*(s*m-c*p)+f*(s*g-c*h),t[9]=-(n*(h*m-g*p)-u*(r*m-a*p)+f*(r*g-a*h)),t[10]=n*(s*m-c*p)-o*(r*m-a*p)+f*(r*c-a*s),t[11]=-(n*(s*g-c*h)-o*(r*g-a*h)+u*(r*c-a*s)),t[12]=-(o*(h*v-d*p)-u*(s*v-l*p)+f*(s*d-l*h)),t[13]=n*(h*v-d*p)-u*(r*v-i*p)+f*(r*d-i*h),t[14]=-(n*(s*v-l*p)-o*(r*v-i*p)+f*(r*l-i*s)),t[15]=n*(s*d-l*h)-o*(r*d-i*h)+u*(r*l-i*s),t};var Bh=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],g=t[12],f=t[13],p=t[14],v=t[15];return(e*o-n*a)*(h*v-d*p)-(e*s-r*a)*(u*v-d*f)+(e*l-i*a)*(u*p-h*f)+(n*s-r*o)*(c*v-d*g)-(n*l-i*o)*(c*p-h*g)+(r*l-i*s)*(c*f-u*g)};var Ih=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],g=e[10],f=e[11],p=e[12],v=e[13],m=e[14],y=e[15],b=n[0],x=n[1],B=n[2],I=n[3];return t[0]=b*r+x*s+B*h+I*p,t[1]=b*i+x*l+B*d+I*v,t[2]=b*a+x*c+B*g+I*m,t[3]=b*o+x*u+B*f+I*y,b=n[4],x=n[5],B=n[6],I=n[7],t[4]=b*r+x*s+B*h+I*p,t[5]=b*i+x*l+B*d+I*v,t[6]=b*a+x*c+B*g+I*m,t[7]=b*o+x*u+B*f+I*y,b=n[8],x=n[9],B=n[10],I=n[11],t[8]=b*r+x*s+B*h+I*p,t[9]=b*i+x*l+B*d+I*v,t[10]=b*a+x*c+B*g+I*m,t[11]=b*o+x*u+B*f+I*y,b=n[12],x=n[13],B=n[14],I=n[15],t[12]=b*r+x*s+B*h+I*p,t[13]=b*i+x*l+B*d+I*v,t[14]=b*a+x*c+B*g+I*m,t[15]=b*o+x*u+B*f+I*y,t};var Fh=function(t,e,n){var r,i,a,o,s,l,c,u,h,d,g,f,p=n[0],v=n[1],m=n[2];e===t?(t[12]=e[0]*p+e[4]*v+e[8]*m+e[12],t[13]=e[1]*p+e[5]*v+e[9]*m+e[13],t[14]=e[2]*p+e[6]*v+e[10]*m+e[14],t[15]=e[3]*p+e[7]*v+e[11]*m+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],g=e[10],f=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=g,t[11]=f,t[12]=r*p+s*v+h*m+e[12],t[13]=i*p+l*v+d*m+e[13],t[14]=a*p+c*v+g*m+e[14],t[15]=o*p+u*v+f*m+e[15]);return t};var Qh=function(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};var Ch=function(t,e,n,r){var i,a,o,s,l,c,u,h,d,g,f,p,v,m,y,b,x,B,I,F,Q,C,w,U,A=r[0],S=r[1],L=r[2],k=Math.sqrt(A*A+S*S+L*L);if(Math.abs(k)<1e-6)return null;A*=k=1/k,S*=k,L*=k,i=Math.sin(n),a=Math.cos(n),o=1-a,s=e[0],l=e[1],c=e[2],u=e[3],h=e[4],d=e[5],g=e[6],f=e[7],p=e[8],v=e[9],m=e[10],y=e[11],b=A*A*o+a,x=S*A*o+L*i,B=L*A*o-S*i,I=A*S*o-L*i,F=S*S*o+a,Q=L*S*o+A*i,C=A*L*o+S*i,w=S*L*o-A*i,U=L*L*o+a,t[0]=s*b+h*x+p*B,t[1]=l*b+d*x+v*B,t[2]=c*b+g*x+m*B,t[3]=u*b+f*x+y*B,t[4]=s*I+h*F+p*Q,t[5]=l*I+d*F+v*Q,t[6]=c*I+g*F+m*Q,t[7]=u*I+f*F+y*Q,t[8]=s*C+h*w+p*U,t[9]=l*C+d*w+v*U,t[10]=c*C+g*w+m*U,t[11]=u*C+f*w+y*U,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t};var wh=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*i+c*r,t[5]=o*i+u*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=c*i-a*r,t[9]=u*i-o*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t};var Uh=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i-c*r,t[1]=o*i-u*r,t[2]=s*i-h*r,t[3]=l*i-d*r,t[8]=a*r+c*i,t[9]=o*r+u*i,t[10]=s*r+h*i,t[11]=l*r+d*i,t};var Ah=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i+c*r,t[1]=o*i+u*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=c*i-a*r,t[5]=u*i-o*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t};var Sh=function(t,e,n){var r,i,a,o=n[0],s=n[1],l=n[2],c=Math.sqrt(o*o+s*s+l*l);if(Math.abs(c)<1e-6)return null;return o*=c=1/c,s*=c,l*=c,r=Math.sin(e),i=Math.cos(e),a=1-i,t[0]=o*o*a+i,t[1]=s*o*a+l*r,t[2]=l*o*a-s*r,t[3]=0,t[4]=o*s*a-l*r,t[5]=s*s*a+i,t[6]=l*s*a+o*r,t[7]=0,t[8]=o*l*a+s*r,t[9]=s*l*a-o*r,t[10]=l*l*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Lh=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,c=a+a,u=r*s,h=r*l,d=r*c,g=i*l,f=i*c,p=a*c,v=o*s,m=o*l,y=o*c;return t[0]=1-(g+p),t[1]=h+y,t[2]=d-m,t[3]=0,t[4]=h-y,t[5]=1-(u+p),t[6]=f+v,t[7]=0,t[8]=d+m,t[9]=f-v,t[10]=1-(u+g),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t};var kh=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Gh=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t};var _h=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Rh=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Eh=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Th=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,h=r*s,d=i*o,g=i*s,f=i*l,p=a*o,v=a*s,m=a*l;return t[0]=1-h-f,t[1]=u+m,t[2]=d-v,t[3]=0,t[4]=u-m,t[5]=1-c-f,t[6]=g+p,t[7]=0,t[8]=d+v,t[9]=g-p,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Mh=function(t,e,n,r,i,a,o){var s=1/(n-e),l=1/(i-r),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t};var Nh=function(t,e,n,r,i){var a=1/Math.tan(e/2),o=1/(r-i);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*o,t[15]=0,t};var Dh=function(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(o+a)*c,t[15]=1,t};var Xh=mh,Zh=function(t,e,n,r){var i,a,o,s,l,c,u,h,d,g,f=e[0],p=e[1],v=e[2],m=r[0],y=r[1],b=r[2],x=n[0],B=n[1],I=n[2];if(Math.abs(f-x)<1e-6&&Math.abs(p-B)<1e-6&&Math.abs(v-I)<1e-6)return Xh(t);u=f-x,h=p-B,d=v-I,g=1/Math.sqrt(u*u+h*h+d*d),i=y*(d*=g)-b*(h*=g),a=b*(u*=g)-m*d,o=m*h-y*u,(g=Math.sqrt(i*i+a*a+o*o))?(i*=g=1/g,a*=g,o*=g):(i=0,a=0,o=0);s=h*o-d*a,l=d*i-u*o,c=u*a-h*i,(g=Math.sqrt(s*s+l*l+c*c))?(s*=g=1/g,l*=g,c*=g):(s=0,l=0,c=0);return t[0]=i,t[1]=s,t[2]=u,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*f+a*p+o*v),t[13]=-(s*f+l*p+c*v),t[14]=-(u*f+h*p+d*v),t[15]=1,t};var Vh=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"};var Hh={create:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:ph,copy:vh,identity:mh,transpose:yh,invert:bh,adjoint:xh,determinant:Bh,multiply:Ih,translate:Fh,scale:Qh,rotate:Ch,rotateX:wh,rotateY:Uh,rotateZ:Ah,fromRotation:Sh,fromRotationTranslation:Lh,fromScaling:kh,fromTranslation:Gh,fromXRotation:_h,fromYRotation:Rh,fromZRotation:Eh,fromQuat:Th,frustum:Mh,perspective:Nh,perspectiveFromFieldOfView:function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*l*.5,t[9]=(i-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},ortho:Dh,lookAt:Zh,str:Vh};!function(t){var e=Hh;t.init2dArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=new Array(e);return n},t.transposeRagged=function(t){var e,n,r=0,i=t.length;for(e=0;e<i;e++)r=Math.max(r,t[e].length);var a=new Array(r);for(e=0;e<r;e++)for(a[e]=new Array(i),n=0;n<i;n++)a[e][n]=t[n][e];return a},t.dot=function(e,n){if(!e.length||!n.length||e.length!==n.length)return null;var r,i,a=e.length;if(e[0].length)for(r=new Array(a),i=0;i<a;i++)r[i]=t.dot(e[i],n);else if(n[0].length){var o=t.transposeRagged(n);for(r=new Array(o.length),i=0;i<o.length;i++)r[i]=t.dot(e,o[i])}else for(r=0,i=0;i<a;i++)r+=e[i]*n[i];return r},t.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},t.rotationMatrix=function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},t.rotationXYMatrix=function(e,n,r){return t.dot(t.dot(t.translationMatrix(n,r),t.rotationMatrix(e)),t.translationMatrix(-n,-r))},t.apply3DTransform=function(e){return function(){var n=arguments,r=1===arguments.length?n[0]:[n[0],n[1],n[2]||0];return t.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}},t.apply2DTransform=function(e){return function(){var n=arguments;3===n.length&&(n=n[0]);var r=1===arguments.length?n[0]:[n[0],n[1]];return t.dot(e,[r[0],r[1],1]).slice(0,2)}},t.apply2DTransform2=function(e){var n=t.apply2DTransform(e);return function(t){return n(t.slice(0,2)).concat(n(t.slice(2,4)))}},t.convertCssMatrix=function(t){if(t){var e=t.length;if(16===e)return t;if(6===e)return[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.inverseTransformMatrix=function(t){var n=[];return e.invert(n,t),[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}}(fh);var Wh=uo,Yh=uh,zh=fh,Oh=Hh;function Jh(t){var e=t&&t.parentNode;e&&e.removeChild(t)}function Ph(t,e,n){var r="plotly.js-style-"+t,i=document.getElementById(r);i||((i=document.createElement("style")).setAttribute("id",r),i.appendChild(document.createTextNode("")),document.head.appendChild(i));var a=i.sheet;a.insertRule?a.insertRule(e+"{"+n+"}",0):a.addRule?a.addRule(e,n,0):Yh.warn("addStyleRule failed")}function jh(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===n?null:n.replace("matrix","").replace("3d","").slice(1,-1).split(",").map((function(t){return+t}))}function Kh(t){for(var e=[];qh(t);)e.push(t),t=t.parentNode;return e}function qh(t){return t&&(t instanceof Element||t instanceof HTMLElement)}var $h={getGraphDiv:function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null==t)throw new Error("DOM element provided is null or undefined");return t},isPlotDiv:function(t){var e=Wh.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:Jh,addStyleRule:function(t,e){Ph("global",t,e)},addRelatedStyleRule:Ph,deleteRelatedStyleRule:function(t){var e="plotly.js-style-"+t,n=document.getElementById(e);n&&Jh(n)},getFullTransformMatrix:function(t){var e=Kh(t),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach((function(t){var e=jh(t);if(e){var r=zh.convertCssMatrix(e);n=Oh.multiply(n,n,r)}})),n},getElementTransformMatrix:jh,getElementAndAncestors:Kh,equalDomRects:function(t,e){return t&&e&&t.top===e.top&&t.left===e.left&&t.right===e.right&&t.bottom===e.bottom}},td={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}},ed=Fu.extendFlat,nd=Tc,rd={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},id={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},ad=rd.flags.slice().concat(["fullReplot"]),od=id.flags.slice().concat("layoutReplot"),sd={traces:rd,layout:id,traceFlags:function(){return ld(ad)},layoutFlags:function(){return ld(od)},update:function(t,e){var n=e.editType;if(n&&"none"!==n)for(var r=n.split("+"),i=0;i<r.length;i++)t[r[i]]=!0},overrideAll:cd};function ld(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!1;return e}function cd(t,e,n){var r=ed({},t);for(var i in r){var a=r[i];nd(a)&&(r[i]=ud(a,e,n,i))}return"from-root"===n&&(r.editType=e),r}function ud(t,e,n,r){if(t.valType){var i=ed({},t);if(i.editType=e,Array.isArray(t.items)){i.items=new Array(t.items.length);for(var a=0;a<t.items.length;a++)i.items[a]=ud(t.items[a],e)}return i}return cd(t,e,"_"===r.charAt(0)?"nested":"from-root")}var hd={};hd.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")},hd.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")};var dd={},gd={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"},fd=gd.FORMAT_LINK,pd=gd.DATE_FORMAT_LINK;function vd(t){return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t&&t.supportOther?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',fd,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',pd,"for details on the date formatting syntax."].join(" ")}function md(t){var e=t.description?" "+t.description:"",n=t.keys||[];if(n.length>0){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";e+="Finally, the template string has access to ",e=1===n.length?e+"variable "+r[0]:e+"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return e}function yd(t,e){return e?e.d2l(t):t}function bd(t,e){return e?e.l2d(t):t}function xd(t,e){return yd(t.x1,e)-yd(t.x0,e)}function Bd(t,e,n){return yd(t.y1,n)-yd(t.y0,n)}dd.hovertemplateAttrs=function(t,e){t=t||{};var n=md(e=e||{}),r={valType:"string",dflt:"",editType:t.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",vd({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",n,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return!1!==t.arrayOk&&(r.arrayOk=!0),r},dd.texttemplateAttrs=function(t,e){t=t||{};var n=md(e=e||{}),r={valType:"string",dflt:"",editType:t.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",vd(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",n].join(" ")};return!1!==t.arrayOk&&(r.arrayOk=!0),r},dd.shapeTexttemplateAttrs=function(t,e){e=e||{};var n=(t=t||{}).newshape?"new ":"",r=md(e);return{valType:"string",dflt:"",editType:t.editType||"arraydraw",description:["Template string used for rendering the "+n+"shape's label.","Note that this will override `text`.",["Variables are inserted using %{variable},",'for example "x0: %{x0}".','Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{x0:$.2f}". See',fd,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{x0|%m %b %Y}". See',pd,"for details on the date formatting syntax.","A single multiplication or division operation may be applied to numeric variables, and combined with",'d3 number formatting, for example "Length in cm: %{x0*2.54}", "%{slope*60:.1f} meters per second."',"For log axes, variable values are given in log units.","For date axes, x/y coordinate variables and center variables use datetimes, while all other variable values use values in ms."].join(" "),r].join(" ")}};var Id={x0:function(t){return t.x0},x1:function(t){return t.x1},y0:function(t){return t.y0},y1:function(t){return t.y1},slope:function(t,e,n){return"line"!==t.type?void 0:Bd(t,0,n)/xd(t,e)},dx:xd,dy:Bd,width:function(t,e){return Math.abs(xd(t,e))},height:function(t,e,n){return Math.abs(Bd(t,0,n))},length:function(t,e,n){return"line"!==t.type?void 0:Math.sqrt(Math.pow(xd(t,e),2)+Math.pow(Bd(t,0,n),2))},xcenter:function(t,e){return bd((yd(t.x1,e)+yd(t.x0,e))/2,e)},ycenter:function(t,e,n){return bd((yd(t.y1,n)+yd(t.y0,n))/2,n)}},Fd=sd.overrideAll,Qd=_u,Cd=mu(),wd=hd.dash,Ud=Fu.extendFlat,Ad=dd.shapeTexttemplateAttrs,Sd=Id,Ld=Fd({newshape:{visible:Ud({},Qd.visible,{description:["Determines whether or not new shape is visible.","If *legendonly*, the shape is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")}),showlegend:{valType:"boolean",dflt:!1,description:["Determines whether or not new","shape is shown in the legend."].join(" ")},legend:Ud({},Qd.legend,{description:["Sets the reference to a legend to show new shape in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")}),legendgroup:Ud({},Qd.legendgroup,{description:["Sets the legend group for new shape.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")}),legendgrouptitle:{text:Ud({},Qd.legendgrouptitle.text,{}),font:Cd({description:["Sets this legend group's title font."].join(" ")})},legendrank:Ud({},Qd.legendrank,{description:["Sets the legend rank for new shape.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")}),legendwidth:Ud({},Qd.legendwidth,{description:"Sets the width (in px or fraction) of the legend for new shape."}),line:{color:{valType:"color",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,description:"Sets the line width (in px)."},dash:Ud({},wd,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",description:["Specifies whether new shapes are drawn below gridlines (*below*),","between gridlines and traces (*between*) or above traces (*above*)."].join(" ")},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},name:Ud({},Qd.name,{description:["Sets new shape name.","The name appears as the legend item."].join(" ")}),label:{text:{valType:"string",dflt:"",description:["Sets the text to display with the new shape.","It is also used for legend item if `name` is not provided."].join(" ")},texttemplate:Ad({newshape:!0},{keys:Object.keys(Sd)}),font:Cd({description:"Sets the new shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],description:["Sets the position of the label text relative to the new shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","new shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","new shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,description:"Sets padding (in px) between edge of label and edge of new shape."}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,description:"Sets the opacity of the active shape."}}},"none","from-root"),kd=hd.dash,Gd=Fu.extendFlat,_d={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none",description:["Describes how a new selection is created.","If `immediate`, a new selection is created after first mouse up.","If `gradual`, a new selection is not created after first mouse.","By adding to and subtracting from the initial selection,","this option allows declaring extra outlines of the selection."].join(" ")},line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:1,dflt:1,editType:"none",description:"Sets the line width (in px)."},dash:Gd({},kd,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:"Sets the color filling the active selection' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active selection."},editType:"none"}},Rd=function(t){var e=t.editType;return{t:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) on the left side of the component."},editType:e}},Ed=mu(),Td=td,Md=Xu,Nd=Ld,Dd=_d,Xd=Rd,Zd=Fu.extendFlat,Vd=Ed({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});Vd.family.dflt='"Open Sans", verdana, arial, sans-serif',Vd.size.dflt=12,Vd.color.dflt=Md.defaultLine;var Hd={font:Vd,title:{text:{valType:"string",editType:"layoutstyle",description:["Sets the plot's title.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:Ed({editType:"layoutstyle",description:["Sets the title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:Zd(Xd({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether the title can automatically push the figure margins.","If `yref='paper'` then the margin will expand to ensure that the title doesn’t","overlap with the edges of the container. If `yref='container'` then the margins","will ensure that the title doesn’t overlap with the plot area, tick labels,","and axis titles. If `automargin=true` and the margins need to be expanded,","then y will be set to a default 1 and yanchor will be set to an appropriate","default to ensure that minimal margin space is needed. Note that when `yref='paper'`,","only 1 or 0 are allowed y values. Invalid values will be reset to the default 1."].join(" ")},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum width of the plot with margin.automargin applied (in px)"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum height of the plot with margin.automargin applied (in px)"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:Md.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:Md.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:Md.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:Nd.newshape,activeshape:Nd.activeshape,newselection:Dd.newselection,activeselection:Dd.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:Zd({},Td.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the contents of the title, please use `title.text` now."].join(" ")},titlefont:Ed({editType:"layoutstyle",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}};!function(t){var e=uh,n=dh,r=gh,i=Tc,a=$h.addStyleRule,o=Fu,s=_u,l=Hd,c=o.extendFlat,u=o.extendDeepAll;function h(n){var r=n.name,i=n.categories,o=n.meta;if(t.modules[r])e.log("Type "+r+" already registered");else{t.subplotsRegistry[n.basePlotModule.name]||function(n){var r=n.name;if(t.subplotsRegistry[r])return void e.log("Plot type "+r+" already registered.");for(var i in p(n),t.subplotsRegistry[r]=n,t.componentsRegistry)y(i,n.name)}(n.basePlotModule);for(var s={},l=0;l<i.length;l++)s[i[l]]=!0,t.allCategories[i[l]]=!0;for(var u in t.modules[r]={_module:n,categories:s},o&&Object.keys(o).length&&(t.modules[r].meta=o),t.allTypes.push(r),t.componentsRegistry)v(u,r);n.layoutAttributes&&c(t.traceLayoutAttributes,n.layoutAttributes);var h=n.basePlotModule,d=h.name;if("mapbox"===d){var g=h.constants.styleRules;for(var f in g)a(".js-plotly-plot .plotly .mapboxgl-"+f,g[f])}"geo"!==d&&"mapbox"!==d||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function d(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var n=e.name;for(var i in t.componentsRegistry[n]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&r(t.layoutArrayContainers,n),p(e)),t.modules)v(n,i);for(var a in t.subplotsRegistry)y(n,a);for(var o in t.transformsRegistry)m(n,o);e.schema&&e.schema.layout&&u(l,e.schema.layout)}function g(n){if("string"!=typeof n.name)throw new Error("Transform module *name* must be a string.");var r="Transform module "+n.name,a="function"==typeof n.transform,o="function"==typeof n.calcTransform;if(!a&&!o)throw new Error(r+" is missing a *transform* or *calcTransform* method.");for(var s in a&&o&&e.log([r+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),i(n.attributes)||e.log(r+" registered without an *attributes* object."),"function"!=typeof n.supplyDefaults&&e.log(r+" registered without a *supplyDefaults* method."),t.transformsRegistry[n.name]=n,t.componentsRegistry)m(s,n.name)}function f(e){var n=e.name,r=n.split("-")[0],i=e.dictionary,a=e.format,o=i&&Object.keys(i).length,s=a&&Object.keys(a).length,l=t.localeRegistry,c=l[n];if(c||(l[n]=c={}),r!==n){var u=l[r];u||(l[r]=u={}),o&&u.dictionary===c.dictionary&&(u.dictionary=i),s&&u.format===c.format&&(u.format=a)}o&&(c.dictionary=i),s&&(c.format=a)}function p(e){if(e.layoutAttributes){var n=e.layoutAttributes._arrayAttrRegexps;if(n)for(var i=0;i<n.length;i++)r(t.layoutArrayRegexes,n[i])}}function v(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.traces){var i=r.traces[n];i&&u(t.modules[n]._module.attributes,i)}}function m(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.transforms){var i=r.transforms[n];i&&u(t.transformsRegistry[n].attributes,i)}}function y(e,n){var r=t.componentsRegistry[e].schema;if(r&&r.subplots){var i=t.subplotsRegistry[n],a=i.layoutAttributes,o="subplot"===i.attr?i.name:i.attr;Array.isArray(o)&&(o=o[0]);var s=r.subplots[o];a&&s&&u(a,s)}}function b(t){return"object"==typeof t&&(t=t.type),t}t.modules={},t.allCategories={},t.allTypes=[],t.subplotsRegistry={},t.transformsRegistry={},t.componentsRegistry={},t.layoutArrayContainers=[],t.layoutArrayRegexes=[],t.traceLayoutAttributes={},t.localeRegistry={},t.apiMethodRegistry={},t.collectableSubplotTypes=null,t.register=function(e){if(t.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":h(r);break;case"transform":g(r);break;case"component":d(r);break;case"locale":f(r);break;case"apiMethod":var i=r.name;t.apiMethodRegistry[i]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},t.getModule=function(e){var n=t.modules[b(e)];return!!n&&n._module},t.traceIs=function(n,r){if("various"===(n=b(n)))return!1;var i=t.modules[n];return i||(n&&e.log("Unrecognized trace type "+n+"."),i=t.modules[s.type.dflt]),!!i.categories[r]},t.getTransformIndices=function(t,e){for(var n=[],r=t.transforms||[],i=0;i<r.length;i++)r[i].type===e&&n.push(i);return n},t.hasTransform=function(t,e){for(var n=t.transforms||[],r=0;r<n.length;r++)if(n[r].type===e)return!0;return!1},t.getComponentMethod=function(e,r){var i=t.componentsRegistry[e];return i&&i[r]||n},t.call=function(){var e=arguments[0],n=[].slice.call(arguments,1);return t.apiMethodRegistry[e].apply(null,n)}}(hh),function(t){var e,n,r=lc.timeFormat,i=Ac,a=uh,o=hu.mod,s=Sc,l=s.BADNUM,c=s.ONEDAY,u=s.ONEHOUR,h=s.ONEMIN,d=s.ONESEC,g=s.EPOCHJD,f=hh,p=lc.utcFormat,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=(new Date).getFullYear()-70;function b(t){return t&&f.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function x(t,e){return String(t+Math.pow(10,e)).substr(1)}t.dateTick0=function(e,n){var r=function(t,e){return b(t)?e?f.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:f.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"}(e,!!n);if(n<2)return r;var i=t.dateTime2ms(r,e);return i+=c*(n-1),t.ms2DateTime(i,0,e)},t.dfltRange=function(t){return b(t)?f.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},t.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},t.dateTime2ms=function(r,i){if(t.isJSDate(r)){var a=r.getTimezoneOffset()*h,s=(r.getUTCMinutes()-r.getMinutes())*h+(r.getUTCSeconds()-r.getSeconds())*d+(r.getUTCMilliseconds()-r.getMilliseconds());if(s){var p=3*h;a=a-p/2+o(s-a+p/2,p)}return(r=Number(r)-a)>=e&&r<=n?r:l}if("string"!=typeof r&&"number"!=typeof r)return l;r=String(r);var x=b(i),B=r.charAt(0);!x||"G"!==B&&"g"!==B||(r=r.substr(1),i="");var I=x&&"chinese"===i.substr(0,7),F=r.match(I?m:v);if(!F)return l;var Q=F[1],C=F[3]||"1",w=Number(F[5]||1),U=Number(F[7]||0),A=Number(F[9]||0),S=Number(F[11]||0);if(x){if(2===Q.length)return l;var L;Q=Number(Q);try{var k=f.getComponentMethod("calendars","getCal")(i);if(I){var G="i"===C.charAt(C.length-1);C=parseInt(C,10),L=k.newDate(Q,k.toMonthIndex(Q,C,G),w)}else L=k.newDate(Q,Number(C),w)}catch(t){return l}return L?(L.toJD()-g)*c+U*u+A*h+S*d:l}Q=2===Q.length?(Number(Q)+2e3-y)%100+y:Number(Q),C-=1;var _=new Date(Date.UTC(2e3,C,w,U,A));return _.setUTCFullYear(Q),_.getUTCMonth()!==C||_.getUTCDate()!==w?l:_.getTime()+S*d},e=t.MIN_MS=t.dateTime2ms("-9999"),n=t.MAX_MS=t.dateTime2ms("9999-12-31 23:59:59.9999"),t.isDateTime=function(e,n){return t.dateTime2ms(e,n)!==l};var B=90*c,I=3*u,F=5*h;function Q(t,e,n,r,i){if((e||n||r||i)&&(t+=" "+x(e,2)+":"+x(n,2),(r||i)&&(t+=":"+x(r,2),i))){for(var a=4;i%10==0;)a-=1,i/=10;t+="."+x(i,a)}return t}t.ms2DateTime=function(t,r,i){if("number"!=typeof t||!(t>=e&&t<=n))return l;r||(r=0);var a,s,v,m,y,x,C=Math.floor(10*o(t+.05,1)),w=Math.round(t-C/10);if(b(i)){var U=Math.floor(w/c)+g,A=Math.floor(o(t,c));try{a=f.getComponentMethod("calendars","getCal")(i).fromJD(U).formatDate("yyyy-mm-dd")}catch(t){a=p("G%Y-%m-%d")(new Date(w))}if("-"===a.charAt(0))for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;s=r<B?Math.floor(A/u):0,v=r<B?Math.floor(A%u/h):0,m=r<I?Math.floor(A%h/d):0,y=r<F?A%d*10+C:0}else x=new Date(w),a=p("%Y-%m-%d")(x),s=r<B?x.getUTCHours():0,v=r<B?x.getUTCMinutes():0,m=r<I?x.getUTCSeconds():0,y=r<F?10*x.getUTCMilliseconds()+C:0;return Q(a,s,v,m,y)},t.ms2DateTimeLocal=function(t){if(!(t>=e+c&&t<=n-c))return l;var i=Math.floor(10*o(t+.05,1)),a=new Date(Math.round(t-i/10));return Q(r("%Y-%m-%d")(a),a.getHours(),a.getMinutes(),a.getSeconds(),10*a.getUTCMilliseconds()+i)},t.cleanDate=function(e,n,r){if(e===l)return n;if(t.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(b(r))return a.error("JS Dates and milliseconds are incompatible with world calendars",e),n;if(!(e=t.ms2DateTimeLocal(+e))&&void 0!==n)return n}else if(!t.isDateTime(e,r))return a.error("unrecognized date",e),n;return e};var C=/%\d?f/g,w=/%h/g,U={1:"1",2:"1",3:"2",4:"2"};function A(t,e,n,r){t=t.replace(C,(function(t){var n=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"}));var i=new Date(Math.floor(e+.05));if(t=t.replace(w,(function(){return U[n("%q")(i)]})),b(r))try{t=f.getComponentMethod("calendars","worldCalFmt")(t,e,r)}catch(t){return"Invalid"}return n(t)(i)}var S=[59,59.9,59.99,59.999,59.9999];t.formatDate=function(t,e,n,r,a,s){if(a=b(a)&&a,!e)if("y"===n)e=s.year;else if("m"===n)e=s.month;else{if("d"!==n)return function(t,e){var n=o(t+.05,c),r=x(Math.floor(n/u),2)+":"+x(o(Math.floor(n/h),60),2);if("M"!==e){i(e)||(e=0);var a=(100+Math.min(o(t/d,60),S[e])).toFixed(e).substr(1);e>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+a}return r}(t,n)+"\n"+A(s.dayMonthYear,t,r,a);e=s.dayMonth+"\n"+s.year}return A(e,t,r,a)};var L=3*c;t.incrementMonth=function(t,e,n){n=b(n)&&n;var r=o(t,c);if(t=Math.round(t-r),n)try{var i=Math.round(t/c)+g,s=f.getComponentMethod("calendars","getCal")(n),l=s.fromJD(i);return e%12?s.add(l,e,"m"):s.add(l,e/12,"y"),(l.toJD()-g)*c+r}catch(e){a.error("invalid ms "+t+" in calendar "+n)}var u=new Date(t+L);return u.setUTCMonth(u.getUTCMonth()+e)+r-L},t.findExactDates=function(t,e){for(var n,r,a=0,o=0,s=0,l=0,u=b(e)&&f.getComponentMethod("calendars","getCal")(e),h=0;h<t.length;h++)if(r=t[h],i(r)){if(!(r%c))if(u)try{1===(n=u.fromJD(r/c+g)).day()?1===n.month()?a++:o++:s++}catch(t){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?a++:o++:s++}else l++;s+=o+=a;var d=t.length-l;return{exactYears:a/d,exactMonths:o/d,exactDays:s/d}}}(qu);var Wd,Yd,zd={};function Od(){return Yd||(Yd=1,Wd=function(t){return t}),Wd}!function(t){var e=Ac,n=uh,r=Od(),i=Sc.BADNUM,a=1e-9;function o(t,e){return t<e}function s(t,e){return t<=e}function l(t,e){return t>e}function c(t,e){return t>=e}t.findBin=function(t,r,i){if(e(r.start))return i?Math.ceil((t-r.start)/r.size-a)-1:Math.floor((t-r.start)/r.size+a);var u,h,d=0,g=r.length,f=0,p=g>1?(r[g-1]-r[0])/(g-1):1;for(h=p>=0?i?o:s:i?c:l,t+=p*a*(i?-1:1)*(p>=0?1:-1);d<g&&f++<100;)h(r[u=Math.floor((d+g)/2)],t)?d=u+1:g=u;return f>90&&n.log("Long binary search..."),d-1},t.sorterAsc=function(t,e){return t-e},t.sorterDes=function(t,e){return e-t},t.distinctVals=function(e){var n,r=e.slice();for(r.sort(t.sorterAsc),n=r.length-1;n>-1&&r[n]===i;n--);for(var a,o=r[n]-r[0]||1,s=o/(n||1)/1e4,l=[],c=0;c<=n;c++){var u=r[c],h=u-a;void 0===a?(l.push(u),a=u):h>s&&(o=Math.min(o,h),l.push(u),a=u)}return{vals:l,minDiff:o}},t.roundUp=function(t,e,n){for(var r,i=0,a=e.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;i<a&&o++<100;)e[r=c((i+a)/2)]<=t?i=r+s:a=r-l;return e[i]},t.sort=function(t,e){for(var n=0,r=0,i=1;i<t.length;i++){var a=e(t[i],t[i-1]);if(a<0?n=1:a>0&&(r=1),n&&r)return t.sort(e)}return r?t:t.reverse()},t.findIndexOfMin=function(t,e){e=e||r;for(var n,i=1/0,a=0;a<t.length;a++){var o=e(t[a]);o<i&&(i=o,n=a)}return n}}(zd);var Jd=function(t){return Object.keys(t).sort()},Pd={};!function(t){var e=Ac,n=Lc.isArrayOrTypedArray;t.aggNums=function(r,i,a,o){var s,l;if((!o||o>a.length)&&(o=a.length),e(i)||(i=!1),n(a[0])){for(l=new Array(o),s=0;s<o;s++)l[s]=t.aggNums(r,i,a[s]);a=l}for(s=0;s<o;s++)e(i)?e(a[s])&&(i=r(+i,+a[s])):i=a[s];return i},t.len=function(e){return t.aggNums((function(t){return t+1}),0,e)},t.mean=function(e,n){return n||(n=t.len(e)),t.aggNums((function(t,e){return t+e}),0,e)/n},t.midRange=function(e){if(void 0!==e&&0!==e.length)return(t.aggNums(Math.max,null,e)+t.aggNums(Math.min,null,e))/2},t.variance=function(n,r,i){return r||(r=t.len(n)),e(i)||(i=t.mean(n,r)),t.aggNums((function(t,e){return t+Math.pow(e-i,2)}),0,n)/r},t.stdev=function(e,n,r){return Math.sqrt(t.variance(e,n,r))},t.median=function(e){var n=e.slice().sort();return t.interp(n,.5)},t.interp=function(t,n){if(!e(n))throw"n should be a finite number";if((n=n*t.length-.5)<0)return t[0];if(n>t.length-1)return t[t.length-1];var r=n%1;return r*t[Math.ceil(n)]+(1-r)*t[Math.floor(n)]}}(Pd);var jd=hu.mod,Kd=hu.modHalf,qd=Math.PI,$d=2*qd;function tg(t){return Math.abs(t[1]-t[0])>$d-1e-14}function eg(t,e){return Kd(e-t,$d)}function ng(t,e){if(tg(e))return!0;var n,r;e[0]<e[1]?(n=e[0],r=e[1]):(n=e[1],r=e[0]),(n=jd(n,$d))>(r=jd(r,$d))&&(r+=$d);var i=jd(t,$d),a=i+$d;return i>=n&&i<=r||a>=n&&a<=r}function rg(t,e,n,r,i,a,o){i=i||0,a=a||0;var s,l,c,u,h,d=tg([n,r]);function g(t,e){return[t*Math.cos(e)+i,a-t*Math.sin(e)]}d?(s=0,l=qd,c=$d):n<r?(s=n,c=r):(s=r,c=n),t<e?(u=t,h=e):(u=e,h=t);var f,p=Math.abs(c-s)<=qd?0:1;function v(t,e,n){return"A"+[t,t]+" "+[0,p,n]+" "+g(t,e)}return d?f=null===u?"M"+g(h,s)+v(h,l,0)+v(h,c,0)+"Z":"M"+g(u,s)+v(u,l,0)+v(u,c,0)+"ZM"+g(h,s)+v(h,l,1)+v(h,c,1)+"Z":null===u?(f="M"+g(h,s)+v(h,c,0),o&&(f+="L0,0Z")):f="M"+g(u,s)+"L"+g(h,s)+v(h,c,0)+"L"+g(u,c)+v(u,s,1)+"Z",f}var ig,ag,og,sg={deg2rad:function(t){return t/180*qd},rad2deg:function(t){return t/qd*180},angleDelta:eg,angleDist:function(t,e){return Math.abs(eg(t,e))},isFullCircle:tg,isAngleInsideSector:ng,isPtInsideSector:function(t,e,n,r){return!!ng(e,r)&&(n[0]<n[1]?(i=n[0],a=n[1]):(i=n[1],a=n[0]),t>=i&&t<=a);var i,a},pathArc:function(t,e,n,r,i){return rg(null,t,e,n,r,i,0)},pathSector:function(t,e,n,r,i){return rg(null,t,e,n,r,i,1)},pathAnnulus:function(t,e,n,r,i,a){return rg(t,e,n,r,i,a,1)}},lg={isLeftAnchor:function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=1/3},isCenterAnchor:function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},isRightAnchor:function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},isTopAnchor:function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=2/3},isMiddleAnchor:function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3},isBottomAnchor:function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3}},cg={},ug=hu.mod;function hg(t,e,n,r,i,a,o,s){var l=n-t,c=i-t,u=o-i,h=r-e,d=a-e,g=s-a,f=l*g-u*h;if(0===f)return null;var p=(c*g-u*d)/f,v=(c*h-l*d)/f;return v<0||v>1||p<0||p>1?null:{x:t+l*p,y:e+h*p}}function dg(t,e,n,r,i){var a=r*t+i*e;if(a<0)return r*r+i*i;if(a>n){var o=r-t,s=i-e;return o*o+s*s}var l=r*e-i*t;return l*l/n}cg.segmentsIntersect=hg,cg.segmentDistance=function(t,e,n,r,i,a,o,s){if(hg(t,e,n,r,i,a,o,s))return 0;var l=n-t,c=r-e,u=o-i,h=s-a,d=l*l+c*c,g=u*u+h*h,f=Math.min(dg(l,c,d,i-t,a-e),dg(l,c,d,o-t,s-e),dg(u,h,g,t-i,e-a),dg(u,h,g,n-i,r-a));return Math.sqrt(f)},cg.getTextLocation=function(t,e,n,r){if(t===ag&&r===og||(ig={},ag=t,og=r),ig[n])return ig[n];var i=t.getPointAtLength(ug(n-r/2,e)),a=t.getPointAtLength(ug(n+r/2,e)),o=Math.atan((a.y-i.y)/(a.x-i.x)),s=t.getPointAtLength(ug(n,e)),l={x:(4*s.x+i.x+a.x)/6,y:(4*s.y+i.y+a.y)/6,theta:o};return ig[n]=l,l},cg.clearLocationCache=function(){ag=null},cg.getVisibleSegment=function(t,e,n){var r,i,a=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=t.getTotalLength(),h=u;function d(e){var n=t.getPointAtLength(e);0===e?r=n:e===u&&(i=n);var c=n.x<a?a-n.x:n.x>o?n.x-o:0,h=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(c*c+h*h)}for(var g=d(c);g;){if((c+=g+n)>h)return;g=d(c)}for(g=d(h);g;){if(c>(h-=g+n))return;g=d(h)}return{min:c,max:h,len:h-c,total:u,isClosed:0===c&&h===u&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},cg.findPointOnPath=function(t,e,n,r){for(var i,a,o,s=(r=r||{}).pathLength||t.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=t.getPointAtLength(0)[n]>t.getPointAtLength(s)[n]?-1:1,h=0,d=0,g=s;h<c;){if(i=(d+g)/2,o=(a=t.getPointAtLength(i))[n]-e,Math.abs(o)<l)return a;u*o>0?g=i:d=i,h++}return a};var gg={};!function(t){var e={};function n(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}t.throttle=function(t,r,i){var a=e[t],o=Date.now();if(!a){for(var s in e)e[s].ts<o-6e4&&delete e[s];a=e[t]={ts:0,timer:null}}function l(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}n(a),o>a.ts+r?l():a.timer=setTimeout((function(){l(),a.timer=null}),r)},t.done=function(t){var n=e[t];return n&&n.timer?new Promise((function(t){var e=n.onDone;n.onDone=function(){e&&e(),t(),n.onDone=null}})):Promise.resolve()},t.clear=function(r){if(r)n(e[r]),delete e[r];else for(var i in e)t.clear(i)}}(gg);var fg={exports:{}};fg.exports=yg,fg.exports.isMobile=yg,fg.exports.default=yg;const pg=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,vg=/CrOS/,mg=/android|ipad|playbook|silk/i;function yg(t){t||(t={});let e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;let n=pg.test(e)&&!vg.test(e)||!!t.tablet&&mg.test(e);return!n&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(n=!0),n}var bg=fg.exports,xg=Ac,Bg=bg;var Ig=uo,Fg=hh;function Qg(t){return!0===t.visible}function Cg(t){var e=t[0].trace;return!0===e.visible&&0!==e._length}var wg=Ac,Ug=Sc.BADNUM,Ag=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,Sg=uo,Lg=lc.utcFormat,kg=wc.format,Gg=Ac,_g=Sc,Rg=_g.FP_SAFE,Eg=-Rg,Tg=_g.BADNUM,Mg=lo.exports={};Mg.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:"0.f"===t?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var Ng={};Mg.warnBadFormat=function(t){var e=String(t);Ng[e]||(Ng[e]=1,Mg.warn('encountered bad format: "'+e+'"'))},Mg.noFormat=function(t){return String(t)},Mg.numberFormat=function(t){var e;try{e=kg(Mg.adjustFormat(t))}catch(e){return Mg.warnBadFormat(t),Mg.noFormat}return e},Mg.nestedProperty=Pc,Mg.keyedContainer=function(t,e,n,r){var i,a,o;n=n||"name",r=r||"value";var s={};e&&e.length?(o=ru(t,e),a=o.get()):a=t,e=e||"";var l={};if(a)for(i=0;i<a.length;i++)l[a[i][n]]=i;var c=iu.test(r),u={set:function(t,e){var i=null===e?4:0;if(!a){if(!o||4===i)return;a=[],o.set(a)}var h=l[t];if(void 0===h){if(4===i)return;i|=3,h=a.length,l[t]=h}else e!==(c?a[h][r]:ru(a[h],r).get())&&(i|=2);var d=a[h]=a[h]||{};return d[n]=t,c?d[r]=e:ru(d,r).set(e),null!==e&&(i&=-5),s[h]=s[h]|i,u},get:function(t){if(a){var e=l[t];return void 0===e?void 0:c?a[e][r]:ru(a[e],r).get()}},rename:function(t,e){var r=l[t];return void 0===r||(s[r]=1|s[r],l[e]=r,delete l[t],a[r][n]=e),u},remove:function(t){var e=l[t];if(void 0===e)return u;var o=a[e];if(Object.keys(o).length>2)return s[e]=2|s[e],u.set(t,null);if(c){for(i=e;i<a.length;i++)s[i]=3|s[i];for(i=e;i<a.length;i++)l[a[i][n]]--;a.splice(e,1),delete l[t]}else ru(o,r).set(null),s[e]=6|s[e];return u},constructUpdate:function(){for(var t,i,o={},l=Object.keys(s),u=0;u<l.length;u++)i=l[u],t=e+"["+i+"]",a[i]?(1&s[i]&&(o[t+"."+n]=a[i][n]),2&s[i]&&(o[t+"."+r]=c?4&s[i]?null:a[i][r]:4&s[i]?null:ru(a[i],r).get())):o[t]=null;return o}};return u},Mg.relativeAttr=function(t,e){for(;e;){var n=t.match(au);if(n)t=n[1];else{if(!t.match(ou))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e},Mg.isPlainObject=Tc,Mg.toLogRange=lu,Mg.relinkPrivateKeys=function t(e,n){for(var r in n){var i=n[r],a=e[r];if(a!==i)if("_"===r.charAt(0)||"function"==typeof i){if(r in e)continue;e[r]=i}else if(cu(i)&&cu(a)&&uu(i[0])){if("customdata"===r||"ids"===r)continue;for(var o=Math.min(i.length,a.length),s=0;s<o;s++)a[s]!==i[s]&&uu(i[s])&&uu(a[s])&&t(a[s],i[s])}else uu(i)&&uu(a)&&(t(a,i),Object.keys(a).length||delete e[r])}};var Dg=Lc;Mg.isArrayBuffer=Dg.isArrayBuffer,Mg.isTypedArray=Dg.isTypedArray,Mg.isArrayOrTypedArray=Dg.isArrayOrTypedArray,Mg.isArray1D=Dg.isArray1D,Mg.ensureArray=Dg.ensureArray,Mg.concat=Dg.concat,Mg.maxRowLength=Dg.maxRowLength,Mg.minRowLength=Dg.minRowLength;var Xg=hu;Mg.mod=Xg.mod,Mg.modHalf=Xg.modHalf;var Zg=du;Mg.valObjectMeta=Zg.valObjectMeta,Mg.coerce=Zg.coerce,Mg.coerce2=Zg.coerce2,Mg.coerceFont=Zg.coerceFont,Mg.coercePattern=Zg.coercePattern,Mg.coerceHoverinfo=Zg.coerceHoverinfo,Mg.coerceSelectionMarkerOpacity=Zg.coerceSelectionMarkerOpacity,Mg.validate=Zg.validate;var Vg=qu;Mg.dateTime2ms=Vg.dateTime2ms,Mg.isDateTime=Vg.isDateTime,Mg.ms2DateTime=Vg.ms2DateTime,Mg.ms2DateTimeLocal=Vg.ms2DateTimeLocal,Mg.cleanDate=Vg.cleanDate,Mg.isJSDate=Vg.isJSDate,Mg.formatDate=Vg.formatDate,Mg.incrementMonth=Vg.incrementMonth,Mg.dateTick0=Vg.dateTick0,Mg.dfltRange=Vg.dfltRange,Mg.findExactDates=Vg.findExactDates,Mg.MIN_MS=Vg.MIN_MS,Mg.MAX_MS=Vg.MAX_MS;var Hg=zd;Mg.findBin=Hg.findBin,Mg.sorterAsc=Hg.sorterAsc,Mg.sorterDes=Hg.sorterDes,Mg.distinctVals=Hg.distinctVals,Mg.roundUp=Hg.roundUp,Mg.sort=Hg.sort,Mg.findIndexOfMin=Hg.findIndexOfMin,Mg.sortObjectKeys=Jd;var Wg=Pd;Mg.aggNums=Wg.aggNums,Mg.len=Wg.len,Mg.mean=Wg.mean,Mg.median=Wg.median,Mg.midRange=Wg.midRange,Mg.variance=Wg.variance,Mg.stdev=Wg.stdev,Mg.interp=Wg.interp;var Yg=fh;Mg.init2dArray=Yg.init2dArray,Mg.transposeRagged=Yg.transposeRagged,Mg.dot=Yg.dot,Mg.translationMatrix=Yg.translationMatrix,Mg.rotationMatrix=Yg.rotationMatrix,Mg.rotationXYMatrix=Yg.rotationXYMatrix,Mg.apply3DTransform=Yg.apply3DTransform,Mg.apply2DTransform=Yg.apply2DTransform,Mg.apply2DTransform2=Yg.apply2DTransform2,Mg.convertCssMatrix=Yg.convertCssMatrix,Mg.inverseTransformMatrix=Yg.inverseTransformMatrix;var zg=sg;Mg.deg2rad=zg.deg2rad,Mg.rad2deg=zg.rad2deg,Mg.angleDelta=zg.angleDelta,Mg.angleDist=zg.angleDist,Mg.isFullCircle=zg.isFullCircle,Mg.isAngleInsideSector=zg.isAngleInsideSector,Mg.isPtInsideSector=zg.isPtInsideSector,Mg.pathArc=zg.pathArc,Mg.pathSector=zg.pathSector,Mg.pathAnnulus=zg.pathAnnulus;var Og=lg;Mg.isLeftAnchor=Og.isLeftAnchor,Mg.isCenterAnchor=Og.isCenterAnchor,Mg.isRightAnchor=Og.isRightAnchor,Mg.isTopAnchor=Og.isTopAnchor,Mg.isMiddleAnchor=Og.isMiddleAnchor,Mg.isBottomAnchor=Og.isBottomAnchor;var Jg=cg;Mg.segmentsIntersect=Jg.segmentsIntersect,Mg.segmentDistance=Jg.segmentDistance,Mg.getTextLocation=Jg.getTextLocation,Mg.clearLocationCache=Jg.clearLocationCache,Mg.getVisibleSegment=Jg.getVisibleSegment,Mg.findPointOnPath=Jg.findPointOnPath;var Pg=Fu;Mg.extendFlat=Pg.extendFlat,Mg.extendDeep=Pg.extendDeep,Mg.extendDeepAll=Pg.extendDeepAll,Mg.extendDeepNoArrays=Pg.extendDeepNoArrays;var jg=uh;Mg.log=jg.log,Mg.warn=jg.warn,Mg.error=jg.error;var Kg=Ku;Mg.counterRegex=Kg.counter;var qg=gg;Mg.throttle=qg.throttle,Mg.throttleDone=qg.done,Mg.clearThrottle=qg.clear;var $g=$h;function tf(t){var e={};for(var n in t)for(var r=t[n],i=0;i<r.length;i++)e[r[i]]=+n;return e}Mg.getGraphDiv=$g.getGraphDiv,Mg.isPlotDiv=$g.isPlotDiv,Mg.removeElement=$g.removeElement,Mg.addStyleRule=$g.addStyleRule,Mg.addRelatedStyleRule=$g.addRelatedStyleRule,Mg.deleteRelatedStyleRule=$g.deleteRelatedStyleRule,Mg.getFullTransformMatrix=$g.getFullTransformMatrix,Mg.getElementTransformMatrix=$g.getElementTransformMatrix,Mg.getElementAndAncestors=$g.getElementAndAncestors,Mg.equalDomRects=$g.equalDomRects,Mg.clearResponsive=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)},Mg.preserveDrawingBuffer=function(t){var e;if("string"!=typeof(e=t&&t.hasOwnProperty("userAgent")?t.userAgent:function(){var t;"undefined"!=typeof navigator&&(t=navigator.userAgent);t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]);return t}()))return!0;var n=Bg({ua:{headers:{"user-agent":e}},tablet:!0,featureDetect:!1});if(!n)for(var r=e.split(" "),i=1;i<r.length;i++){if(-1!==r[i].indexOf("Safari"))for(var a=i-1;a>-1;a--){var o=r[a];if("Version/"===o.substr(0,8)){var s=o.substr(8).split(".")[0];if(xg(s)&&(s=+s),s>=13)return!0}}}return n},Mg.makeTraceGroups=function(t,e,n){var r=t.selectAll("g."+n.replace(/\s/g,".")).data(e,(function(t){return t[0].trace.uid}));r.exit().remove(),r.enter().append("g").attr("class",n),r.order();var i=t.classed("rangeplot")?"nodeRangePlot3":"node3";return r.each((function(t){t[0][i]=Ig.select(this)})),r},Mg._=function(t,e){for(var n=t._context.locale,r=0;r<2;r++){for(var i=t._context.locales,a=0;a<2;a++){var o=(i[n]||{}).dictionary;if(o){var s=o[e];if(s)return s}i=Fg.localeRegistry}var l=n.split("-")[0];if(l===n)break;n=l}return e},Mg.notifier=oh,Mg.filterUnique=function(t){for(var e={},n=[],r=0,i=0;i<t.length;i++){var a=t[i];1!==e[a]&&(e[a]=1,n[r++]=a)}return n},Mg.filterVisible=function(t){for(var e,n=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?Cg:Qg),r=[],i=0;i<t.length;i++){var a=t[i];n(a)&&r.push(a)}return r},Mg.pushUnique=gh,Mg.increment=function(t,e){if(!e)return t;var n=1/Math.abs(e),r=n>1?(n*t+n*e)/n:t+e,i=String(r).length;if(i>16){var a=String(e).length;if(i>=String(t).length+a){var o=parseFloat(r).toPrecision(12);-1===o.indexOf("e+")&&(r=+o)}}return r},Mg.cleanNumber=function(t){return"string"==typeof t&&(t=t.replace(Ag,"")),wg(t)?Number(t):Ug},Mg.ensureNumber=function(t){return Gg(t)?(t=Number(t))>Rg||t<Eg?Tg:t:Tg},Mg.isIndex=function(t,e){return!(void 0!==e&&t>=e)&&(Gg(t)&&t>=0&&t%1==0)},Mg.noop=dh,Mg.identity=Od(),Mg.repeat=function(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n},Mg.swapAttrs=function(t,e,n,r){n||(n="x"),r||(r="y");for(var i=0;i<e.length;i++){var a=e[i],o=Mg.nestedProperty(t,a.replace("?",n)),s=Mg.nestedProperty(t,a.replace("?",r)),l=o.get();o.set(s.get()),s.set(l)}},Mg.raiseToTop=function(t){t.parentNode.appendChild(t)},Mg.cancelTransition=function(t){return t.transition().duration(0)},Mg.constrain=function(t,e,n){return e>n?Math.max(n,Math.min(e,t)):Math.max(e,Math.min(n,t))},Mg.bBoxIntersect=function(t,e,n){return n=n||0,t.left<=e.right+n&&e.left<=t.right+n&&t.top<=e.bottom+n&&e.top<=t.bottom+n},Mg.simpleMap=function(t,e,n,r,i){for(var a=t.length,o=new Array(a),s=0;s<a;s++)o[s]=e(t[s],n,r,i);return o},Mg.randstr=function t(e,n,r,i){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var a,o,s=Math.log(Math.pow(2,n))/Math.log(r),l="";for(a=2;s===1/0;a*=2)s=Math.log(Math.pow(2,n/a))/Math.log(r)*a;var c=s-Math.floor(s);for(a=0;a<Math.floor(s);a++)l=Math.floor(Math.random()*r).toString(r)+l;c&&(o=Math.pow(r,c),l=Math.floor(Math.random()*o).toString(r)+l);var u=parseInt(l,r);return e&&e[l]||u!==1/0&&u>=Math.pow(2,n)?i>10?(Mg.warn("randstr failed uniqueness"),l):t(e,n,r,(i||0)+1):l},Mg.OptionControl=function(t,e){t||(t={}),e||(e="opt");var n={optionList:[],_newoption:function(r){r[e]=t,n[r.name]=r,n.optionList.push(r)}};return n["_"+e]=t,n},Mg.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var n,r,i,a,o=t.length,s=2*o,l=2*e-1,c=new Array(l),u=new Array(o);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/e))/(2*e);for(n=0;n<o;n++){for(a=0,r=0;r<l;r++)(i=n+r+1-e)<-o?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=o&&(i=s-1-i),a+=t[i]*c[r];u[n]=a}return u},Mg.syncOrAsync=function(t,e,n){var r;function i(){return Mg.syncOrAsync(t,e,n)}for(;t.length;)if((r=(0,t.splice(0,1)[0])(e))&&r.then)return r.then(i);return n&&n(e)},Mg.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},Mg.noneOrAll=function(t,e,n){if(t){var r,i=!1,a=!0;for(r=0;r<n.length;r++)null!=t[n[r]]?i=!0:a=!1;if(i&&!a)for(r=0;r<n.length;r++)t[n[r]]=e[n[r]]}},Mg.mergeArray=function(t,e,n,r){var i="function"==typeof r;if(Mg.isArrayOrTypedArray(t))for(var a=Math.min(t.length,e.length),o=0;o<a;o++){var s=t[o];e[o][n]=i?r(s):s}},Mg.mergeArrayCastPositive=function(t,e,n){return Mg.mergeArray(t,e,n,(function(t){var e=+t;return isFinite(e)&&e>0?e:0}))},Mg.fillArray=function(t,e,n,r){if(r=r||Mg.identity,Mg.isArrayOrTypedArray(t))for(var i=0;i<e.length;i++)e[i][n]=r(t[i])},Mg.castOption=function(t,e,n,r){r=r||Mg.identity;var i=Mg.nestedProperty(t,n).get();return Mg.isArrayOrTypedArray(i)?Array.isArray(e)&&Mg.isArrayOrTypedArray(i[e[0]])?r(i[e[0]][e[1]]):r(i[e]):i},Mg.extractOption=function(t,e,n,r){if(n in t)return t[n];var i=Mg.nestedProperty(e,r).get();return Array.isArray(i)?void 0:i},Mg.tagSelected=function(t,e,n){var r,i=e.selectedpoints,a=e._indexToPoints;function o(e){return void 0!==e&&e<t.length}a&&(r=tf(a));for(var s=0;s<i.length;s++){var l=i[s];if(Mg.isIndex(l)||Mg.isArrayOrTypedArray(l)&&Mg.isIndex(l[0])&&Mg.isIndex(l[1])){var c=r?r[l]:l,u=n?n[c]:c;o(u)&&(t[u].selected=1)}}},Mg.selIndices2selPoints=function(t){var e=t.selectedpoints,n=t._indexToPoints;if(n){for(var r=tf(n),i=[],a=0;a<e.length;a++){var o=e[a];if(Mg.isIndex(o)){var s=r[o];Mg.isIndex(s)&&i.push(s)}}return i}return e},Mg.getTargetArray=function(t,e){var n=e.target;if("string"==typeof n&&n){var r=Mg.nestedProperty(t,n).get();return!!Mg.isArrayOrTypedArray(r)&&r}return!!Mg.isArrayOrTypedArray(n)&&n},Mg.minExtend=function t(e,n,r){var i={};"object"!=typeof n&&(n={});var a,o,s,l="pieLike"===r?-1:3,c=Object.keys(e);for(a=0;a<c.length;a++)s=e[o=c[a]],"_"!==o.charAt(0)&&"function"!=typeof s&&("module"===o?i[o]=s:Array.isArray(s)?i[o]="colorscale"===o||-1===l?s.slice():s.slice(0,l):Mg.isTypedArray(s)?i[o]=-1===l?s.subarray():s.subarray(0,l):i[o]=s&&"object"==typeof s?t(e[o],n[o],r):s);for(c=Object.keys(n),a=0;a<c.length;a++)"object"==typeof(s=n[o=c[a]])&&o in i&&"object"==typeof i[o]||(i[o]=s);return i},Mg.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},Mg.containsAny=function(t,e){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1},Mg.isIE=function(){return void 0!==window.navigator.msSaveBlob};var ef=/Version\/[\d\.]+.*Safari/;Mg.isSafari=function(){return ef.test(window.navigator.userAgent)};var nf=/iPad|iPhone|iPod/;Mg.isIOS=function(){return nf.test(window.navigator.userAgent)};var rf=/Firefox\/(\d+)\.\d+/;Mg.getFirefoxVersion=function(){var t=rf.exec(window.navigator.userAgent);if(t&&2===t.length){var e=parseInt(t[1]);if(!isNaN(e))return e}return null},Mg.isD3Selection=function(t){return t instanceof Sg.selection},Mg.ensureSingle=function(t,e,n,r){var i=t.select(e+(n?"."+n:""));if(i.size())return i;var a=t.append(e);return n&&a.classed(n,!0),r&&a.call(r),a},Mg.ensureSingleById=function(t,e,n,r){var i=t.select(e+"#"+n);if(i.size())return i;var a=t.append(e).attr("id",n);return r&&a.call(r),a},Mg.objectFromPath=function(t,e){for(var n,r=t.split("."),i=n={},a=0;a<r.length;a++){var o=r[a],s=null,l=r[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],n=n[o]=[],a===r.length-1?n[s]=e:n[s]={},n=n[s]):(a===r.length-1?n[o]=e:n[o]={},n=n[o])}return i};var af=/^([^\[\.]+)\.(.+)?/,of=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function sf(t){return"__"===t.slice(0,2)}Mg.expandObjectPaths=function(t){var e,n,r,i,a,o,s;if("object"==typeof t&&!Array.isArray(t))for(n in t)if(t.hasOwnProperty(n))if(e=n.match(af)){if(i=t[n],sf(r=e[1]))continue;delete t[n],t[r]=Mg.extendDeepNoArrays(t[r]||{},Mg.objectFromPath(n,Mg.expandObjectPaths(i))[r])}else if(e=n.match(of)){if(i=t[n],sf(r=e[1]))continue;if(a=parseInt(e[2]),delete t[n],t[r]=t[r]||[],"."===e[3])s=e[4],o=t[r][a]=t[r][a]||{},Mg.extendDeepNoArrays(o,Mg.objectFromPath(s,Mg.expandObjectPaths(i)));else{if(sf(r))continue;t[r][a]=Mg.expandObjectPaths(i)}}else{if(sf(n))continue;t[n]=Mg.expandObjectPaths(t[n])}return t},Mg.numSeparate=function(t,e,n){if(n||(n=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var r=/(\d+)(\d{3})/,i=e.charAt(0),a=e.charAt(1),o=t.split("."),s=o[0],l=o.length>1?i+o[1]:"";if(a&&(o.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+a+"$2");return s+l},Mg.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var lf=/^\w*$/;Mg.templateString=function(t,e){var n={};return t.replace(Mg.TEMPLATE_STRING_REGEX,(function(t,r){var i;return lf.test(r)?i=e[r]:(n[r]=n[r]||Mg.nestedProperty(e,r).get,i=n[r]()),Mg.isValidTextValue(i)?i:""}))};var cf={max:10,count:0,name:"hovertemplate"};Mg.hovertemplateString=function(){return ff.apply(cf,arguments)};var uf={max:10,count:0,name:"texttemplate"};Mg.texttemplateString=function(){return ff.apply(uf,arguments)};var hf=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;var df={max:10,count:0,name:"texttemplate",parseMultDiv:!0};Mg.texttemplateStringForShapes=function(){return ff.apply(df,arguments)};var gf=/^[:|\|]/;function ff(t,e,n){var r=this,i=arguments;e||(e={});var a={};return t.replace(Mg.TEMPLATE_STRING_REGEX,(function(t,o,s){var l="_xother"===o||"_yother"===o,c="_xother_"===o||"_yother_"===o,u="xother_"===o||"yother_"===o,h="xother"===o||"yother"===o||l||u||c,d=o;(l||c)&&(d=d.substring(1)),(u||c)&&(d=d.substring(0,d.length-1));var g,f,p,v=null,m=null;if(r.parseMultDiv){var y=function(t){var e=t.match(hf);return e?{key:e[1],op:e[2],number:Number(e[3])}:{key:t,op:null,number:null}}(d);d=y.key,v=y.op,m=y.number}if(h){if(void 0===(g=e[d]))return""}else for(p=3;p<i.length;p++)if(f=i[p]){if(f.hasOwnProperty(d)){g=f[d];break}if(lf.test(d)||(g=Mg.nestedProperty(f,d).get(),(g=a[d]||Mg.nestedProperty(f,d).get())&&(a[d]=g)),void 0!==g)break}if(void 0!==g&&("*"===v&&(g*=m),"/"===v&&(g/=m)),void 0===g&&r)return r.count<r.max&&(Mg.warn("Variable '"+d+"' in "+r.name+" could not be found!"),g=t),r.count===r.max&&Mg.warn("Too many "+r.name+" warnings - additional warnings will be suppressed"),r.count++,t;if(s){var b;if(":"===s[0]&&(b=n?n.numberFormat:Mg.numberFormat,""!==g&&(g=b(s.replace(gf,""))(g))),"|"===s[0]){b=n?n.timeFormat:Lg;var x=Mg.dateTime2ms(g);g=Mg.formatDate(x,s.replace(gf,""),!1,b)}}else{var B=d+"Label";e.hasOwnProperty(B)&&(g=e[B])}return h&&(g="("+g+")",(l||c)&&(g=" "+g),(u||c)&&(g+=" ")),g}))}Mg.subplotSort=function(t,e){for(var n=Math.min(t.length,e.length)+1,r=0,i=0,a=0;a<n;a++){var o=t.charCodeAt(a)||0,s=e.charCodeAt(a)||0,l=o>=48&&o<=57,c=s>=48&&s<=57;if(l&&(r=10*r+o-48),c&&(i=10*i+s-48),!l||!c){if(r!==i)return r-i;if(o!==s)return o-s}}return i-r};var pf=2e9;Mg.seedPseudoRandom=function(){pf=2e9},Mg.pseudoRandom=function(){var t=pf;return pf=(69069*pf+1)%4294967296,Math.abs(pf-t)<429496729?Mg.pseudoRandom():pf/4294967296},Mg.fillText=function(t,e,n){var r=Array.isArray(n)?function(t){n.push(t)}:function(t){n.text=t},i=Mg.extractOption(t,e,"htx","hovertext");if(Mg.isValidTextValue(i))return r(i);var a=Mg.extractOption(t,e,"tx","text");return Mg.isValidTextValue(a)?r(a):void 0},Mg.isValidTextValue=function(t){return t||0===t},Mg.formatPercent=function(t,e){e=e||0;for(var n=(Math.round(100*t*Math.pow(10,e))*Math.pow(.1,e)).toFixed(e)+"%",r=0;r<e;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},Mg.isHidden=function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e},Mg.strTranslate=function(t,e){return t||e?"translate("+t+","+e+")":""},Mg.strRotate=function(t){return t?"rotate("+t+")":""},Mg.strScale=function(t){return 1!==t?"scale("+t+")":""},Mg.getTextTransform=function(t){var e=t.noCenter,n=t.textX,r=t.textY,i=t.targetX,a=t.targetY,o=t.anchorX||0,s=t.anchorY||0,l=t.rotate,c=t.scale;return c?c>1&&(c=1):c=0,Mg.strTranslate(i-c*(n+o),a-c*(r+s))+Mg.strScale(c)+(l?"rotate("+l+(e?"":" "+n+" "+r)+")":"")},Mg.setTransormAndDisplay=function(t,e){t.attr("transform",Mg.getTextTransform(e)),t.style("display",e.scale?null:"none")},Mg.ensureUniformFontSize=function(t,e){var n=Mg.extendFlat({},e);return n.size=Math.max(e.size,t._fullLayout.uniformtext.minsize||0),n},Mg.join2=function(t,e,n){var r=t.length;return r>1?t.slice(0,-1).join(e)+n+t[r-1]:t.join(e)},Mg.bigFont=function(t){return Math.round(1.2*t)};var vf=Mg.getFirefoxVersion(),mf=null!==vf&&vf<86;Mg.getPositionFromD3Event=function(){return mf?[Sg.event.layerX,Sg.event.layerY]:[Sg.event.offsetX,Sg.event.offsetY]};var yf=lo.exports,bf=yf,xf={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var Bf in xf){var If=Bf.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");bf.addStyleRule(If,xf[Bf])}var Ff,Qf={},Cf={},wf="function"==typeof no.matchMedia&&!no.matchMedia("(hover: none)").matches,Uf={exports:{}},Af="object"==typeof Reflect?Reflect:null,Sf=Af&&"function"==typeof Af.apply?Af.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};Ff=Af&&"function"==typeof Af.ownKeys?Af.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var Lf=Number.isNaN||function(t){return t!=t};function kf(){kf.init.call(this)}Uf.exports=kf,Uf.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,a),r(n)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}Zf(t,e,a,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&Zf(t,"error",e,n)}(t,i,{once:!0})}))},kf.EventEmitter=kf,kf.prototype._events=void 0,kf.prototype._eventsCount=0,kf.prototype._maxListeners=void 0;var Gf=10;function _f(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function Rf(t){return void 0===t._maxListeners?kf.defaultMaxListeners:t._maxListeners}function Ef(t,e,n,r){var i,a,o,s;if(_f(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if("function"==typeof o?o=a[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=Rf(t))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return t}function Tf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Mf(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=Tf.bind(r);return i.listener=n,r.wrapFn=i,i}function Nf(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):Xf(i,i.length)}function Df(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function Xf(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Zf(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){r.once&&t.removeEventListener(e,i),n(a)}))}}Object.defineProperty(kf,"defaultMaxListeners",{enumerable:!0,get:function(){return Gf},set:function(t){if("number"!=typeof t||t<0||Lf(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Gf=t}}),kf.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},kf.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||Lf(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},kf.prototype.getMaxListeners=function(){return Rf(this)},kf.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=i[t];if(void 0===s)return!1;if("function"==typeof s)Sf(s,this,e);else{var l=s.length,c=Xf(s,l);for(n=0;n<l;++n)Sf(c[n],this,e)}return!0},kf.prototype.addListener=function(t,e){return Ef(this,t,e,!1)},kf.prototype.on=kf.prototype.addListener,kf.prototype.prependListener=function(t,e){return Ef(this,t,e,!0)},kf.prototype.once=function(t,e){return _f(e),this.on(t,Mf(this,t,e)),this},kf.prototype.prependOnceListener=function(t,e){return _f(e),this.prependListener(t,Mf(this,t,e)),this},kf.prototype.removeListener=function(t,e){var n,r,i,a,o;if(_f(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},kf.prototype.off=kf.prototype.removeListener,kf.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},kf.prototype.listeners=function(t){return Nf(this,t,!0)},kf.prototype.rawListeners=function(t){return Nf(this,t,!1)},kf.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Df.call(t,e)},kf.prototype.listenerCount=Df,kf.prototype.eventNames=function(){return this._eventsCount>0?Ff(this._events):[]};var Vf=Uf.exports,Hf=Vf.EventEmitter,Wf={init:function(t){if(t._ev instanceof Hf)return t;var e=new Hf,n=new Hf;return t._ev=e,t._internalEv=n,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=n.on.bind(n),t._internalOnce=n.once.bind(n),t._removeInternalListener=n.removeListener.bind(n),t._removeAllInternalListeners=n.removeAllListeners.bind(n),t.emit=function(r,i){"undefined"!=typeof jQuery&&jQuery(t).trigger(r,i),e.emit(r,i),n.emit(r,i)},t},triggerHandler:function(t,e,n){var r,i;"undefined"!=typeof jQuery&&(r=jQuery(t).triggerHandler(e,n));var a=t._ev;if(!a)return r;var o,s=a._events[e];if(!s)return r;function l(t){return t.listener?(a.removeListener(e,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(a,[n]))):t.apply(a,[n])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)l(s[o]);return i=l(s[o]),void 0!==r?r:i},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}},Yf=Wf,zf=yf,Of=nh.dfltConfig;var Jf={add:function(t,e,n,r,i){var a,o;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},o=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(o,t.undoQueue.queue.length-o,a),t.undoQueue.index+=1):a=t.undoQueue.queue[o-1],t.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(e),a.undo.args.unshift(n),a.redo.calls.push(r),a.redo.args.push(i)),t.undoQueue.queue.length>Of.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,n;if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)Jf.plotDo(t,e.undo.calls[n],e.undo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,n;if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)Jf.plotDo(t,e.redo.calls[n],e.redo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};Jf.plotDo=function(t,e,n){t.autoplay=!0,n=function(t,e){for(var n,r=[],i=0;i<e.length;i++)n=e[i],r[i]=n===t?n:"object"==typeof n?Array.isArray(n)?zf.extendDeep([],n):zf.extendDeepAll({},n):n;return r}(t,n),e.apply(null,n)};var Pf=Jf,jf={},Kf={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}};!function(t){var e=hh,n=yf,r=_u,i=Hd,a=Kf,o=td,s=nh.configAttributes,l=sd,c=n.extendDeepAll,u=n.isPlainObject,h=n.isArrayOrTypedArray,d=n.nestedProperty,g=n.valObjectMeta,f="_isSubplotObj",p="_isLinkedToArray",v="_deprecated",m=[f,p,"_arrayAttrRegexps",v];function y(t,e,n){if(!t)return!1;if(t._isLinkedToArray)if(b(e[n]))n++;else if(n<e.length)return!1;for(;n<e.length;n++){var r=t[e[n]];if(!u(r))break;if(t=r,n===e.length-1)break;if(t._isLinkedToArray){if(!b(e[++n]))return!1}else if("info_array"===t.valType){var i=e[++n];if(!b(i))return!1;var a=t.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===t.dimensions){if(n++,e.length===n)return t;var o=e[n];if(!b(o))return!1;t=a[i][o]}else t=a[i]}else t=a}}return t}function b(t){return t===Math.round(t)&&t>=0}function x(){var t,n,r={};for(t in c(r,i),e.subplotsRegistry){if((n=e.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(n.attr))for(var a=0;a<n.attr.length;a++)F(r,n,n.attr[a]);else F(r,n,"subplot"===n.attr?n.name:n.attr)}for(t in e.componentsRegistry){var o=(n=e.componentsRegistry[t]).schema;if(o&&(o.subplots||o.layout)){var s=o.subplots;if(s&&s.xaxis&&!s.yaxis)for(var l in s.xaxis)delete r.yaxis[l];delete r.xaxis.shift,delete r.xaxis.autoshift}else"colorscale"===n.name?c(r,n.layoutAttributes):n.layoutAttributes&&Q(r,n.layoutAttributes,n.name)}return{layoutAttributes:I(r)}}function B(){var t={frames:c({},a)};return I(t),t.frames}function I(e){return function(e){function n(t){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+t+"`.",editType:"none"}}function r(e,r,i){t.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(i[r+"src"]=n(r)):u(e)&&(e.role="object")}t.crawl(e,r)}(e),function(e){function n(t,e,n){if(t){var r=t[p];r&&(delete t[p],n[e]={items:{}},n[e].items[r]=t,n[e].role="object")}}t.crawl(e,n)}(e),function(t){function e(t){for(var n in t)if(u(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}e(t)}(e),e}function F(t,e,n){var r=d(t,n),i=c({},e.layoutAttributes);i[f]=!0,r.set(i)}function Q(t,e,n){var r=d(t,n);r.set(c(r.get()||{},e))}t.IS_SUBPLOT_OBJ=f,t.IS_LINKED_TO_ARRAY=p,t.DEPRECATED=v,t.UNDERSCORE_ATTRS=m,t.get=function(){var n={};e.allTypes.forEach((function(i){n[i]=function(n){var i,a;i=e.modules[n]._module,a=i.basePlotModule;var o={type:null},s=c({},r),l=c({},i.attributes);t.crawl(l,(function(t,e,n,r,i){d(s,i).set(void 0),void 0===t&&d(l,i).set(void 0)})),c(o,s),e.traceIs(n,"noOpacity")&&delete o.opacity;e.traceIs(n,"showLegend")||(delete o.showlegend,delete o.legendgroup);e.traceIs(n,"noHover")&&(delete o.hoverinfo,delete o.hoverlabel);i.selectPoints||delete o.selectedpoints;c(o,l),a.attributes&&c(o,a.attributes);o.type=n;var u={meta:i.meta||{},categories:i.categories||{},animatable:Boolean(i.animatable),type:n,attributes:I(o)};if(i.layoutAttributes){var h={};c(h,i.layoutAttributes),u.layoutAttributes=I(h)}i.animatable||t.crawl(u,(function(e){t.isValObject(e)&&"anim"in e&&delete e.anim}));return u}(i)}));var i={};return Object.keys(e.transformsRegistry).forEach((function(t){i[t]=function(t){var n=e.transformsRegistry[t],r=c({},n.attributes);return Object.keys(e.componentsRegistry).forEach((function(n){var i=e.componentsRegistry[n];i.schema&&i.schema.transforms&&i.schema.transforms[t]&&Object.keys(i.schema.transforms[t]).forEach((function(e){Q(r,i.schema.transforms[t][e],e)}))})),{attributes:I(r)}}(t)})),{defs:{valObjects:g,metaKeys:m.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:n,layout:x(),transforms:i,frames:B(),animation:I(o),config:I(s)}},t.crawl=function(e,n,r,i){var a=r||0;i=i||"",Object.keys(e).forEach((function(r){var o=e[r];if(-1===m.indexOf(r)){var s=(i?i+".":"")+r;n(o,r,e,a,s),t.isValObject(o)||u(o)&&"impliedEdits"!==r&&t.crawl(o,n,a+1,s)}}))},t.isValObject=function(t){return t&&void 0!==t.valType},t.findArrayAttributes=function(e){var n,i,a=[],o=[],s=[];function l(t,e,r,i){o=o.slice(0,i).concat([e]),s=s.slice(0,i).concat([t&&t._isLinkedToArray]),t&&("data_array"===t.valType||!0===t.arrayOk)&&!("colorbar"===o[i-1]&&("ticktext"===e||"tickvals"===e))&&c(n,0,"")}function c(t,e,n){var r=t[o[e]],l=n+o[e];if(e===o.length-1)h(r)&&a.push(i+l);else if(s[e]){if(Array.isArray(r))for(var d=0;d<r.length;d++)u(r[d])&&c(r[d],e+1,l+"["+d+"].")}else u(r)&&c(r,e+1,l+".")}n=e,i="",t.crawl(r,l),e._module&&e._module.attributes&&t.crawl(e._module.attributes,l);var d=e.transforms;if(d)for(var g=0;g<d.length;g++){var f=d[g],p=f._module;p&&(i="transforms["+g+"].",n=f,t.crawl(p.attributes,l))}return a},t.getTraceValObject=function(t,n){var i,a,o=n[0],s=1;if("transforms"===o){if(1===n.length)return r.transforms;var l=t.transforms;if(!Array.isArray(l)||!l.length)return!1;var c=n[1];if(!b(c)||c>=l.length)return!1;a=(i=(e.transformsRegistry[l[c].type]||{}).attributes)&&i[n[2]],s=3}else{var u=t._module;if(u||(u=(e.modules[t.type||r.type.dflt]||{})._module),!u)return!1;if(!(a=(i=u.attributes)&&i[o])){var h=u.basePlotModule;h&&h.attributes&&(a=h.attributes[o])}a||(a=r[o])}return y(a,n,s)},t.getLayoutValObject=function(t,n){var r=function(t,n){var r,a,o,s,l=t._basePlotModules;if(l){var c;for(r=0;r<l.length;r++){if((o=l[r]).attrRegex&&o.attrRegex.test(n)){if(o.layoutAttrOverrides)return o.layoutAttrOverrides;!c&&o.layoutAttributes&&(c=o.layoutAttributes)}var u=o.baseLayoutAttrOverrides;if(u&&n in u)return u[n]}if(c)return c}var h=t._modules;if(h)for(r=0;r<h.length;r++)if((s=h[r].layoutAttributes)&&n in s)return s[n];for(a in e.componentsRegistry){if("colorscale"===(o=e.componentsRegistry[a]).name&&0===n.indexOf("coloraxis"))return o.layoutAttributes[n];if(!o.schema&&n===o.name)return o.layoutAttributes}return n in i&&i[n]}(t,n[0]);return y(r,n,1)}}(jf);var qf={exports:{}},$f={},tp=yf,ep=_u,np="templateitemname",rp={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};function ip(t){return t&&"string"==typeof t}function ap(t){var e=t.length-1;return"s"!==t.charAt(e)&&tp.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}rp[np]={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")},$f.templatedArray=function(t,e){return e._isLinkedToArray=t,e.name=rp.name,e[np]=rp[np],e},$f.traceTemplater=function(t){var e,n,r={};for(e in t)n=t[e],Array.isArray(n)&&n.length&&(r[e]=0);return{newTrace:function(i){var a={type:e=tp.coerce(i,{},ep,"type"),_template:null};if(e in r){n=t[e];var o=r[e]%n.length;r[e]++,a._template=n[o]}return a}}},$f.newContainer=function(t,e,n){var r=t._template,i=r&&(r[e]||n&&r[n]);return tp.isPlainObject(i)||(i=null),t[e]={_template:i}},$f.arrayTemplater=function(t,e,n){var r=t._template,i=r&&r[ap(e)],a=r&&r[e];Array.isArray(a)&&a.length||(a=[]);var o={};return{newItem:function(t){var e={name:t.name,_input:t},r=e[np]=t[np];if(!ip(r))return e._template=i,e;for(var s=0;s<a.length;s++){var l=a[s];if(l.name===r)return o[r]=1,e._template=l,e}return e[n]=t[n]||!1,e._template=!1,e},defaultItems:function(){for(var t=[],e=0;e<a.length;e++){var n=a[e],r=n.name;if(ip(r)&&!o[r]){var i={_template:n,name:r,_input:{_templateitemname:r}};i[np]=n[np],t.push(i),o[r]=1}}return t}}},$f.arrayDefaultKey=ap,$f.arrayEditor=function(t,e,n){var r=(tp.nestedProperty(t,e).get()||[]).length,i=n._index,a=i>=r&&(n._input||{})._templateitemname;a&&(i=r);var o,s=e+"["+i+"]";function l(){o={},a&&(o[s]={},o[s][np]=a)}function c(t,e){a?tp.nestedProperty(o[s],t).set(e):o[s+"."+t]=e}function u(){var t=o;return l(),t}return l(),{modifyBase:function(t,e){o[t]=e},modifyItem:c,getUpdateObj:u,applyUpdate:function(e,n){e&&c(e,n);var r=u();for(var i in r)tp.nestedProperty(t,i).set(r[i])}}};var op={},sp=Ku.counter,lp={idRegex:{x:sp("x","( domain)?"),y:sp("y","( domain)?")},attrRegex:sp("[xy]axis"),xAxisMatch:sp("xaxis"),yAxisMatch:sp("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}};!function(t){var e=hh,n=lp;function r(t,e){if(e&&e.length)for(var n=0;n<e.length;n++)if(e[n][t])return!0;return!1}t.id2name=function(t){if("string"==typeof t&&t.match(n.AX_ID_PATTERN)){var e=t.split(" ")[0].substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},t.name2id=function(t){if(t.match(n.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},t.cleanId=function(t,e,r){var i=/( domain)$/.test(t);if("string"==typeof t&&t.match(n.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)&&(!i||r)){var a=t.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),t.charAt(0)+a+(i&&r?" domain":"")}},t.list=function(e,n,r){var i=e._fullLayout;if(!i)return[];var a,o=t.listIds(e,n),s=new Array(o.length);for(a=0;a<o.length;a++){var l=o[a];s[a]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var c=i._subplots.gl3d||[];for(a=0;a<c.length;a++){var u=i[c[a]];n?s.push(u[n+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},t.listIds=function(t,e){var n=t._fullLayout;if(!n)return[];var r=n._subplots;return e?r[e+"axis"]:r.xaxis.concat(r.yaxis)},t.getFromId=function(e,n,r){var i=e._fullLayout;return n=void 0===n||"string"!=typeof n?n:n.replace(" domain",""),"x"===r?n=n.replace(/y[0-9]*/,""):"y"===r&&(n=n.replace(/x[0-9]*/,"")),i[t.id2name(n)]},t.getFromTrace=function(n,r,i){var a=n._fullLayout,o=null;if(e.traceIs(r,"gl3d")){var s=r.scene;"scene"===s.substr(0,5)&&(o=a[s][i+"axis"])}else o=t.getFromId(n,r[i+"axis"]||i);return o},t.idSort=function(t,e){var n=t.charAt(0),r=e.charAt(0);return n!==r?n>r?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},t.ref2id=function(t){return!!/^[xyz]/.test(t)&&t.split(" ")[0]},t.isLinked=function(t,e){return r(e,t._axisMatchGroups)||r(e,t._axisConstraintGroups)}}(op);var cp={clearOutlineControllers:function(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),t._fullLayout._outlining=!1}},up={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how scatter points at the same location coordinate","are displayed on the graph.","With *group*, the scatter points are plotted next to one another","centered around the shared location.","With *overlay*, the scatter points are plotted over one another,","you might need to reduce *opacity* to see multiple scatter points."].join(" ")},scattergap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between scatter points of","adjacent location coordinates.","Defaults to `bargap`."].join(" ")}},hp={},dp=hh,gp=lp.SUBPLOT_PATTERN;hp.getSubplotCalcData=function(t,e,n){var r=dp.subplotsRegistry[e];if(!r)return[];for(var i=r.attr,a=[],o=0;o<t.length;o++){var s=t[o];s[0].trace[i]===n&&a.push(s)}return a},hp.getModuleCalcData=function(t,e,n){var r,i=[],a=[];if(!(r="string"==typeof e?dp.getModule(e).plot:"function"==typeof e?e:e.plot))return[i,t];for(var o=n,s=0;s<t.length;s++){var l=t[s],c=l[0].trace,u=void 0!==c.zorder;!0===c.visible&&0!==c._length&&(!c._module||c._module.plot!==r||u&&c.zorder!==o?a.push(l):i.push(l))}return[i,a]},hp.getSubplotData=function(t,e,n){if(!dp.subplotsRegistry[e])return[];var r,i,a,o=dp.subplotsRegistry[e].attr,s=[];if("gl2d"===e){var l=n.match(gp);i="x"+l[1],a="y"+l[2]}for(var c=0;c<t.length;c++)r=t[c],"gl2d"===e&&dp.traceIs(r,"gl2d")?r[o[0]]===i&&r[o[1]]===a&&s.push(r):r[o]===n&&s.push(r);return s};var fp,pp={};var vp=uo,mp=lc.timeFormatLocale,yp=wc.formatLocale,bp=Ac,xp=Ec,Bp=hh,Ip=jf,Fp=$f,Qp=yf,Cp=Pu,wp=Sc.BADNUM,Up=op,Ap=cp.clearOutline,Sp=up,Lp=td,kp=Kf,Gp=hp.getModuleCalcData,_p=Qp.relinkPrivateKeys,Rp=Qp._,Ep=qf.exports={};Qp.extendFlat(Ep,Bp),Ep.attributes=_u,Ep.attributes.type.values=Ep.allTypes,Ep.fontAttrs=mu(),Ep.layoutAttributes=Hd;var Tp=Ep.transformsRegistry,Mp=(fp||(fp=1,function(t){var e=hh,n=yf;function r(t,e,r){var i,a,o,s=!1;if("data"===e.type)i=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;i=t._fullLayout}return a=n.nestedProperty(i,e.prop).get(),(o=r[e.type]=r[e.type]||{}).hasOwnProperty(e.prop)&&o[e.prop]!==a&&(s=!0),o[e.prop]=a,{changed:s,value:a}}function i(t,e){var r=[],i=e[0],a={};if("string"==typeof i)a[i]=e[1];else{if(!n.isPlainObject(i))return r;a=i}return o(a,(function(t,e,n){r.push({type:"layout",prop:t,value:n})}),"",0),r}function a(t,e){var r,i,a,s,l=[];if(i=e[0],a=e[1],r=e[2],s={},"string"==typeof i)s[i]=a;else{if(!n.isPlainObject(i))return l;s=i,void 0===r&&(r=a)}return void 0===r&&(r=null),o(s,(function(e,n,i){var a,o;if(Array.isArray(i)){o=i.slice();var s=Math.min(o.length,t.data.length);r&&(s=Math.min(s,r.length)),a=[];for(var c=0;c<s;c++)a[c]=r?r[c]:c}else o=i,a=r?r.slice():null;if(null===a)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(a)){if(!Array.isArray(o)){var u=o;o=[];for(var h=0;h<a.length;h++)o[h]=u}o.length=Math.min(a.length,o.length)}l.push({type:"data",prop:e,traces:a,value:o})}),"",0),l}function o(t,e,r,i){Object.keys(t).forEach((function(a){var s=t[a];if("_"!==a[0]){var l=r+(i>0?".":"")+a;n.isPlainObject(s)?o(s,e,l,i+1):e(l,a,s)}}))}t.manageCommandObserver=function(e,i,a,o){var s={},l=!0;i&&i._commandObserver&&(s=i._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=t.hasSimpleAPICommandBindings(e,a,s.lookupTable);if(i&&i._commandObserver){if(c)return s;if(i._commandObserver.remove)return i._commandObserver.remove(),i._commandObserver=null,s}if(c){r(e,c,s.cache),s.check=function(){if(l){var t=r(e,c,s.cache);return t.changed&&o&&void 0!==s.lookupTable[t.value]&&(s.disable(),Promise.resolve(o({value:t.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[t.value]})).then(s.enable,s.enable)),t.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<u.length;h++)e._internalOn(u[h],s.check);s.remove=function(){for(var t=0;t<u.length;t++)e._removeInternalListener(u[t],s.check)}}else n.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},i&&(i._commandObserver=s),s},t.hasSimpleAPICommandBindings=function(e,n,r){var i,a,o=n.length;for(i=0;i<o;i++){var s,l=n[i],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var h=t.computeAPICommandBindings(e,c,u);if(1!==h.length)return!1;if(a){if((s=h[0]).type!==a.type)return!1;if(s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var d=0;d<a.traces.length;d++)if(a.traces[d]!==s.traces[d])return!1}else if(s.prop!==a.prop)return!1}else a=h[0],Array.isArray(a.traces)&&a.traces.sort();var g=(s=h[0]).value;if(Array.isArray(g)){if(1!==g.length)return!1;g=g[0]}r&&(r[g]=i)}return a},t.executeAPICommand=function(t,r,i){if("skip"===r)return Promise.resolve();var a=e.apiMethodRegistry[r],o=[t];Array.isArray(i)||(i=[]);for(var s=0;s<i.length;s++)o.push(i[s]);return a.apply(null,o).catch((function(t){return n.warn("API call to Plotly."+r+" rejected.",t),Promise.reject(t)}))},t.computeAPICommandBindings=function(t,e,n){var r;switch(Array.isArray(n)||(n=[]),e){case"restyle":r=a(t,n);break;case"relayout":r=i(0,n);break;case"update":r=a(t,[n[0],n[2]]).concat(i(0,[n[1]]));break;case"animate":r=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,n);break;default:r=[]}return r}}(pp)),pp);Ep.executeAPICommand=Mp.executeAPICommand,Ep.computeAPICommandBindings=Mp.computeAPICommandBindings,Ep.manageCommandObserver=Mp.manageCommandObserver,Ep.hasSimpleAPICommandBindings=Mp.hasSimpleAPICommandBindings,Ep.redrawText=function(t){return t=Qp.getGraphDiv(t),new Promise((function(e){setTimeout((function(){t._fullLayout&&(Bp.getComponentMethod("annotations","draw")(t),Bp.getComponentMethod("legend","draw")(t),Bp.getComponentMethod("colorbar","draw")(t),e(Ep.previousPromises(t)))}),300)}))},Ep.resize=function(t){var e;t=Qp.getGraphDiv(t);var n=new Promise((function(n,r){t&&!Qp.isHidden(t)||r(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._resolveResize&&(e=t._resolveResize),t._resolveResize=n,t._redrawTimer=setTimeout((function(){if(!t.layout||t.layout.width&&t.layout.height||Qp.isHidden(t))n(t);else{delete t.layout.width,delete t.layout.height;var e=t.changed;t.autoplay=!0,Bp.call("relayout",t,{autosize:!0}).then((function(){t.changed=e,t._resolveResize===n&&(delete t._resolveResize,n(t))}))}}),100)}));return e&&e(n),n},Ep.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then((function(){t._promises=[]}))},Ep.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,n=Qp.ensureSingle(e._paper,"text","js-plot-link-container",(function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:Cp.defaultLine,"pointer-events":"all"}).each((function(){var t=vp.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)}))})),r=n.node(),i={y:e._paper.attr("height")-9};document.body.contains(r)&&r.getComputedTextLength()>=e.width-20?(i["text-anchor"]="start",i.x=5):(i["text-anchor"]="end",i.x=e._paper.attr("width")-7),n.attr(i);var a=n.select(".js-link-to-tool"),o=n.select(".js-link-spacer"),s=n.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var n=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)n.on("click",(function(){Ep.sendDataToCloud(t)}));else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}(t,a),o.text(a.text()&&s.text()?" - ":"")}},Ep.sendDataToCloud=function(t){var e=(window.PLOTLYENV||{}).BASE_URL||t._context.plotlyServerURL;if(e){t.emit("plotly_beforeexport");var n=vp.select(t).append("div").attr("id","hiddenform").style("display","none"),r=n.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return r.append("input").attr({type:"text",name:"data"}).node().value=Ep.graphJson(t,!1,"keepdata"),r.node().submit(),n.remove(),t.emit("plotly_afterexport"),!1}};var Np=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],Dp=["year","month","dayMonth","dayMonthYear"];function Xp(t,e){var n=t._context.locale;n||(n="en-US");var r=!1,i={};function a(t){for(var n=!0,a=0;a<e.length;a++){var o=e[a];i[o]||(t[o]?i[o]=t[o]:n=!1)}n&&(r=!0)}for(var o=0;o<2;o++){for(var s=t._context.locales,l=0;l<2;l++){var c=(s[n]||{}).format;if(c&&(a(c),r))break;s=Bp.localeRegistry}var u=n.split("-")[0];if(r||u===n)break;n=u}return r||a(Bp.localeRegistry.en.format),i}function Zp(t,e){var n={_fullLayout:e},r="x"===t._id.charAt(0),i=t._mainAxis._anchorAxis,a="",o="",s="";if(i&&(s=i._mainAxis._id,a=r?t._id+s:s+t._id),!a||!e._plots[a]){a="";for(var l=t._counterAxes,c=0;c<l.length;c++){var u=l[c],h=r?t._id+u:u+t._id;o||(o=h);var d=Up.getFromId(n,u);if(s&&d.overlaying===s){a=h;break}}}return a||o}function Vp(t){var e=t.transforms;if(Array.isArray(e)&&e.length)for(var n=0;n<e.length;n++){var r=e[n],i=r._module||Tp[r.type];if(i&&i.makesData)return!0}return!1}function Hp(t,e,n,r){for(var i=t.transforms,a=[t],o=0;o<i.length;o++){var s=i[o],l=Tp[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:t,fullData:e,layout:n,fullLayout:r,transformIndex:o}))}return a}function Wp(t){return"string"==typeof t&&"px"===t.substr(t.length-2)&&parseFloat(t)}function Yp(t){var e=t.margin;if(!t._size){var n=t._size={l:Math.round(e.l),r:Math.round(e.r),t:Math.round(e.t),b:Math.round(e.b),p:Math.round(e.pad)};n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b}t._pushmargin||(t._pushmargin={}),t._pushmarginIds||(t._pushmarginIds={}),t._reservedMargin||(t._reservedMargin={})}Ep.supplyDefaults=function(t,e){var n=e&&e.skipUpdateCalc,r=t._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var i,a=t._fullLayout={},o=t.layout||{},s=t._fullData||[],l=t._fullData=[],c=t.data||[],u=t.calcdata||[],h=t._context||{};t._transitionData||Ep.createTransitionData(t),a._dfltTitle={plot:Rp(t,"Click to enter Plot title"),x:Rp(t,"Click to enter X axis title"),y:Rp(t,"Click to enter Y axis title"),colorbar:Rp(t,"Click to enter Colorscale title"),annotation:Rp(t,"new text")},a._traceWord=Rp(t,"trace");var d=Xp(t,Np);if(a._mapboxAccessToken=h.mapboxAccessToken,r._initialAutoSizeIsDone){var g=r.width,f=r.height;Ep.supplyLayoutGlobalDefaults(o,a,d),o.width||(a.width=g),o.height||(a.height=f),Ep.sanitizeMargins(a)}else{Ep.supplyLayoutGlobalDefaults(o,a,d);var p=!o.width||!o.height,v=a.autosize,m=h.autosizable;p&&(v||m)?Ep.plotAutoSize(t,o,a):p&&Ep.sanitizeMargins(a),!v&&p&&(o.width=a.width,o.height=a.height)}a._d3locale=function(t,e){return t.decimal=e.charAt(0),t.thousands=e.charAt(1),{numberFormat:function(e){try{e=yp(t).format(Qp.adjustFormat(e))}catch(t){return Qp.warnBadFormat(e),Qp.noFormat}return e},timeFormat:mp(t).utcFormat}}(d,a.separators),a._extraFormat=Xp(t,Dp),a._initialAutoSizeIsDone=!0,a._dataLength=c.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var y=a._subplots=function(){var t,e,n=Bp.collectableSubplotTypes,r={};if(!n){n=[];var i=Bp.subplotsRegistry;for(var a in i){var o=i[a].attr;if(o&&(n.push(a),Array.isArray(o)))for(e=0;e<o.length;e++)Qp.pushUnique(n,o[e])}}for(t=0;t<n.length;t++)r[n[t]]=[];return r}(),b=a._splomAxes={x:{},y:{}},x=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=function(t,e){var n,r,i=e.length,a=[];for(n=0;n<t.length;n++){var o=t[n]._fullInput;o!==r&&a.push(o),r=o}var s=a.length,l=new Array(i),c={};function u(t,e){l[e]=t,c[t]=1}function h(t,e){if(t&&"string"==typeof t&&!c[t])return u(t,e),!0}for(n=0;n<i;n++){var d=e[n].uid;"number"==typeof d&&(d=String(d)),h(d,n)||(n<s&&h(a[n].uid,n)||u(Qp.randstr(c),n))}return l}(s,c),a._globalTransforms=(t._context||{}).globalTransforms,Ep.supplyDataDefaults(c,l,o,a);var B=Object.keys(b.x),I=Object.keys(b.y);if(B.length>1&&I.length>1){for(Bp.getComponentMethod("grid","sizeDefaults")(o,a),i=0;i<B.length;i++)Qp.pushUnique(y.xaxis,B[i]);for(i=0;i<I.length;i++)Qp.pushUnique(y.yaxis,I[i]);for(var F in x)Qp.pushUnique(y.cartesian,F)}if(a._has=Ep._hasPlotType.bind(a),s.length===l.length)for(i=0;i<l.length;i++)_p(l[i],s[i]);Ep.supplyLayoutModuleDefaults(o,a,l,t._transitionData);var Q=a._visibleModules,C=[];for(i=0;i<Q.length;i++){var w=Q[i].crossTraceDefaults;w&&Qp.pushUnique(C,w)}for(i=0;i<C.length;i++)C[i](l,a);a._hasOnlyLargeSploms=1===a._basePlotModules.length&&"splom"===a._basePlotModules[0].name&&B.length>15&&I.length>15&&0===a.shapes.length&&0===a.images.length,Ep.linkSubplots(l,a,s,r),Ep.cleanPlot(l,a,s,r);var U=!(!r._has||!r._has("gl2d")),A=!(!a._has||!a._has("gl2d")),S=!(!r._has||!r._has("cartesian"))||U,L=!(!a._has||!a._has("cartesian"))||A;S&&!L?r._bgLayer.remove():L&&!S&&(a._shouldCreateBgLayer=!0),r._zoomlayer&&!t._dragging&&Ap({_fullLayout:r}),function(t,e){var n,r=[];e.meta&&(n=e._meta={meta:e.meta,layout:{meta:e.meta}});for(var i=0;i<t.length;i++){var a=t[i];a.meta?r[a.index]=a._meta={meta:a.meta}:e.meta&&(a._meta={meta:e.meta}),e.meta&&(a._meta.layout={meta:e.meta})}r.length&&(n||(n=e._meta={}),n.data=r)}(l,a),_p(a,r),Bp.getComponentMethod("colorscale","crossTraceDefaults")(l,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var k,G=a._tracePreGUI,_={};for(k in G)_[k]="old";for(i=0;i<l.length;i++)_[k=l[i]._fullInput.uid]||(G[k]={}),_[k]="new";for(k in _)"old"===_[k]&&delete G[k];Yp(a),Bp.getComponentMethod("rangeslider","makeData")(a),n||u.length!==l.length||Ep.supplyDefaultsUpdateCalc(u,l)}},Ep.supplyDefaultsUpdateCalc=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=(t[n]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform){var o,s,l,c=a._arrayAttrs;for(o=0;o<c.length;o++)s=c[o],l=Qp.nestedProperty(a,s).get().slice(),Qp.nestedProperty(r,s).set(l)}i.trace=r}}},Ep.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},Ep._hasPlotType=function(t){var e,n=this._basePlotModules||[];for(e=0;e<n.length;e++)if(n[e].name===t)return!0;var r=this._modules||[];for(e=0;e<r.length;e++){var i=r[e].name;if(i===t)return!0;var a=Bp.modules[i];if(a&&a.categories[t])return!0}return!1},Ep.cleanPlot=function(t,e,n,r){var i,a,o=r._basePlotModules||[];for(i=0;i<o.length;i++){var s=o[i];s.clean&&s.clean(t,e,n,r)}var l=r._has&&r._has("gl"),c=e._has&&e._has("gl");l&&!c&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var u=!!r._infolayer;t:for(i=0;i<n.length;i++){var h=n[i].uid;for(a=0;a<t.length;a++){if(h===t[a].uid)continue t}u&&r._infolayer.select(".cb"+h).remove()}},Ep.linkSubplots=function(t,e,n,r){var i,a,o=r._plots||{},s=e._plots={},l=e._subplots,c={_fullData:t,_fullLayout:e},u=l.cartesian.concat(l.gl2d||[]);for(i=0;i<u.length;i++){var h,d=u[i],g=o[d],f=Up.getFromId(c,d,"x"),p=Up.getFromId(c,d,"y");for(g?h=s[d]=g:(h=s[d]={}).id=d,f._counterAxes.push(p._id),p._counterAxes.push(f._id),f._subplotsWith.push(d),p._subplotsWith.push(d),h.xaxis=f,h.yaxis=p,h._hasClipOnAxisFalse=!1,a=0;a<t.length;a++){var v=t[a];if(v.xaxis===h.xaxis._id&&v.yaxis===h.yaxis._id&&!1===v.cliponaxis){h._hasClipOnAxisFalse=!0;break}}}var m,y=Up.list(c,null,!0);for(i=0;i<y.length;i++){var b=null;(m=y[i]).overlaying&&(b=Up.getFromId(c,m.overlaying))&&b.overlaying&&(m.overlaying=!1,b=null),m._mainAxis=b||m,b&&(m.domain=b.domain.slice()),m._anchorAxis="free"===m.anchor?null:Up.getFromId(c,m.anchor)}for(i=0;i<y.length;i++)if((m=y[i])._counterAxes.sort(Up.idSort),m._subplotsWith.sort(Qp.subplotSort),m._mainSubplot=Zp(m,e),m._counterAxes.length&&(m.spikemode&&-1!==m.spikemode.indexOf("across")||m.automargin&&m.mirror&&"free"!==m.anchor||Bp.getComponentMethod("rangeslider","isVisible")(m))){var x=1,B=0;for(a=0;a<m._counterAxes.length;a++){var I=Up.getFromId(c,m._counterAxes[a]);x=Math.min(x,I.domain[0]),B=Math.max(B,I.domain[1])}x<B&&(m._counterDomainMin=x,m._counterDomainMax=B)}},Ep.clearExpandedTraceDefaultColors=function(t){var e,n,r;for(n=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],Ip.crawl(t._module.attributes,(function(t,r,i,a){n[a]=r,n.length=a+1,"color"===t.valType&&void 0===t.dflt&&e.push(n.join("."))}))),r=0;r<e.length;r++){Qp.nestedProperty(t,"_input."+e[r]).get()||Qp.nestedProperty(t,e[r]).set(null)}},Ep.supplyDataDefaults=function(t,e,n,r){var i,a,o,s=r._modules,l=r._visibleModules,c=r._basePlotModules,u=0,h=0;function d(t){e.push(t);var n=t._module;n&&(Qp.pushUnique(s,n),!0===t.visible&&Qp.pushUnique(l,n),Qp.pushUnique(c,t._module.basePlotModule),u++,!1!==t._input.visible&&h++)}r._transformModules=[];var g={},f=[],p=(n.template||{}).data||{},v=Fp.traceTemplater(p);for(i=0;i<t.length;i++){if(o=t[i],(a=v.newTrace(o)).uid=r._traceUids[i],Ep.supplyTraceDefaults(o,a,h,r,i),a.index=i,a._input=o,a._expandedIndex=u,a.transforms&&a.transforms.length)for(var m=!1!==o.visible&&!1===a.visible,y=Hp(a,e,n,r),b=0;b<y.length;b++){var x=y[b],B={_template:a._template,type:a.type,uid:a.uid+b};m&&!1===x.visible&&delete x.visible,Ep.supplyTraceDefaults(x,B,u,r,i),_p(B,x),B.index=i,B._input=o,B._fullInput=a,B._expandedIndex=u,B._expandedInput=x,d(B)}else a._fullInput=a,a._expandedInput=a,d(a);Bp.traceIs(a,"carpetAxis")&&(g[a.carpet]=a),Bp.traceIs(a,"carpetDependent")&&f.push(i)}for(i=0;i<f.length;i++)if((a=e[f[i]]).visible){var I=g[a.carpet];a._carpet=I,I&&I.visible?(a.xaxis=I.xaxis,a.yaxis=I.yaxis):a.visible=!1}},Ep.supplyAnimationDefaults=function(t){var e;t=t||{};var n={};function r(e,r){return Qp.coerce(t||{},n,Lp,e,r)}if(r("mode"),r("direction"),r("fromcurrent"),Array.isArray(t.frame))for(n.frame=[],e=0;e<t.frame.length;e++)n.frame[e]=Ep.supplyAnimationFrameDefaults(t.frame[e]||{});else n.frame=Ep.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(n.transition=[],e=0;e<t.transition.length;e++)n.transition[e]=Ep.supplyAnimationTransitionDefaults(t.transition[e]||{});else n.transition=Ep.supplyAnimationTransitionDefaults(t.transition||{});return n},Ep.supplyAnimationFrameDefaults=function(t){var e={};function n(n,r){return Qp.coerce(t||{},e,Lp.frame,n,r)}return n("duration"),n("redraw"),e},Ep.supplyAnimationTransitionDefaults=function(t){var e={};function n(n,r){return Qp.coerce(t||{},e,Lp.transition,n,r)}return n("duration"),n("easing"),e},Ep.supplyFrameDefaults=function(t){var e={};function n(n,r){return Qp.coerce(t,e,kp,n,r)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),e},Ep.supplyTraceDefaults=function(t,e,n,r,i){var a,o=r.colorway||Cp.defaults,s=o[n%o.length];function l(n,r){return Qp.coerce(t,e,Ep.attributes,n,r)}var c=l("visible");l("type"),l("name",r._traceWord+" "+i),l("uirevision",r.uirevision);var u=Ep.getModule(e);if(e._module=u,u){var h=u.basePlotModule,d=h.attr,g=h.attributes;if(d&&g){var f=r._subplots,p="";if(c||"gl2d"!==h.name){if(Array.isArray(d))for(a=0;a<d.length;a++){var v=d[a],m=Qp.coerce(t,e,g,v);f[v]&&Qp.pushUnique(f[v],m),p+=m}else p=Qp.coerce(t,e,g,d);f[h.name]&&Qp.pushUnique(f[h.name],p)}}}if(c){if(l("customdata"),l("ids"),l("meta"),Bp.traceIs(e,"showLegend")?(Qp.coerce(t,e,u.attributes.showlegend?u.attributes:Ep.attributes,"showlegend"),l("legend"),l("legendwidth"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),e._dfltShowLegend=!0):e._dfltShowLegend=!1,u&&u.supplyDefaults(t,e,s,r),Bp.traceIs(e,"noOpacity")||l("opacity"),Bp.traceIs(e,"notLegendIsolatable")&&(e.visible=!!e.visible),Bp.traceIs(e,"noHover")||(e.hovertemplate||Qp.coerceHoverinfo(t,e,r),"parcats"!==e.type&&Bp.getComponentMethod("fx","supplyDefaults")(t,e,s,r)),u&&u.selectPoints){var y=l("selectedpoints");Qp.isTypedArray(y)&&(e.selectedpoints=Array.from(y))}Ep.supplyTransformDefaults(t,e,r)}return e},Ep.hasMakesDataTransform=Vp,Ep.supplyTransformDefaults=function(t,e,n){if(e._length||Vp(t)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(t.transforms)||0!==r.length)for(var a=t.transforms||[],o=r.concat(a),s=e.transforms=[],l=0;l<o.length;l++){var c,u=o[l],h=u.type,d=Tp[h],g=!(u._module&&u._module===d),f=d&&"function"==typeof d.transform;d||Qp.warn("Unrecognized transform type "+h+"."),d&&d.supplyDefaults&&(g||f)?((c=d.supplyDefaults(u,e,n,t)).type=h,c._module=d,Qp.pushUnique(i,d)):c=Qp.extendFlat({},u),s.push(c)}}},Ep.supplyLayoutGlobalDefaults=function(t,e,n){function r(n,r){return Qp.coerce(t,e,Ep.layoutAttributes,n,r)}var i=t.template;Qp.isPlainObject(i)&&(e.template=i,e._template=i.layout,e._dataTemplate=i.data),r("autotypenumbers");var a=Qp.coerceFont(r,"font"),o=a.size;Qp.coerceFont(r,"title.font",Qp.extendFlat({},a,{size:Math.round(1.4*o)})),r("title.text",e._dfltTitle.plot),r("title.xref");var s=r("title.yref");r("title.pad.t"),r("title.pad.r"),r("title.pad.b"),r("title.pad.l");var l=r("title.automargin");r("title.x"),r("title.xanchor"),r("title.y"),r("title.yanchor"),l&&("paper"===s&&(0!==e.title.y&&(e.title.y=1),"auto"===e.title.yanchor&&(e.title.yanchor=0===e.title.y?"top":"bottom")),"container"===s&&("auto"===e.title.y&&(e.title.y=1),"auto"===e.title.yanchor&&(e.title.yanchor=e.title.y<.5?"bottom":"top"))),r("uniformtext.mode")&&r("uniformtext.minsize"),r("autosize",!(t.width&&t.height)),r("width"),r("height"),r("minreducedwidth"),r("minreducedheight"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),t.width&&t.height&&Ep.sanitizeMargins(e),Bp.getComponentMethod("grid","sizeDefaults")(t,e),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision");var c=r("uirevision");r("editrevision",c),r("selectionrevision",c),Bp.getComponentMethod("modebar","supplyLayoutDefaults")(t,e),Bp.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(t,e,r),Bp.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(t,e,r),r("meta"),Qp.isPlainObject(t.transition)&&(r("transition.duration"),r("transition.easing"),r("transition.ordering")),Bp.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),Bp.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,r),Qp.coerce(t,e,Sp,"scattermode")},Ep.plotAutoSize=function(t,e,n){var r,i,a=t._context||{},o=a.frameMargins,s=Qp.isPlotDiv(t);if(s&&t.emit("plotly_autosize"),a.fillFrame)r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else{var l=s?window.getComputedStyle(t):{};if(r=Wp(l.width)||Wp(l.maxWidth)||n.width,i=Wp(l.height)||Wp(l.maxHeight)||n.height,bp(o)&&o>0){var c=1-2*o;r=Math.round(c*r),i=Math.round(c*i)}}var u=Ep.layoutAttributes.width.min,h=Ep.layoutAttributes.height.min;r<u&&(r=u),i<h&&(i=h);var d=!e.width&&Math.abs(n.width-r)>1,g=!e.height&&Math.abs(n.height-i)>1;(g||d)&&(d&&(n.width=r),g&&(n.height=i)),t._initialAutoSize||(t._initialAutoSize={width:r,height:i}),Ep.sanitizeMargins(n)},Ep.supplyLayoutModuleDefaults=function(t,e,n,r){var i,a,o,s=Bp.componentsRegistry,l=e._basePlotModules,c=Bp.subplotsRegistry.cartesian;for(i in s)(o=s[i]).includeBasePlot&&o.includeBasePlot(t,e);for(var u in l.length||l.push(c),e._has("cartesian")&&(Bp.getComponentMethod("grid","contentDefaults")(t,e),c.finalizeSubplots(t,e)),e._subplots)e._subplots[u].sort(Qp.subplotSort);for(a=0;a<l.length;a++)(o=l[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,n);var h=e._modules;for(a=0;a<h.length;a++)(o=h[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,n);var d=e._transformModules;for(a=0;a<d.length;a++)(o=d[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,n,r);for(i in s)(o=s[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,n)},Ep.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),Qp.clearThrottle(),Qp.clearResponsive(t),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._dragdata,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},Ep.style=function(t){var e,n=t._fullLayout._visibleModules,r=[];for(e=0;e<n.length;e++){var i=n[e];i.style&&Qp.pushUnique(r,i.style)}for(e=0;e<r.length;e++)r[e](t)},Ep.sanitizeMargins=function(t){if(t&&t.margin){var e,n=t.width,r=t.height,i=t.margin,a=n-(i.l+i.r),o=r-(i.t+i.b);a<0&&(e=(n-1)/(i.l+i.r),i.l=Math.floor(e*i.l),i.r=Math.floor(e*i.r)),o<0&&(e=(r-1)/(i.t+i.b),i.t=Math.floor(e*i.t),i.b=Math.floor(e*i.b))}},Ep.clearAutoMarginIds=function(t){t._fullLayout._pushmarginIds={}},Ep.allowAutoMargin=function(t,e){t._fullLayout._pushmarginIds[e]=1};Ep.autoMargin=function(t,e,n){var r=t._fullLayout,i=r.width,a=r.height,o=r.margin,s=r.minreducedwidth,l=r.minreducedheight,c=Qp.constrain(i-o.l-o.r,2,s),u=Qp.constrain(a-o.t-o.b,2,l),h=Math.max(0,i-c),d=Math.max(0,a-u),g=r._pushmargin,f=r._pushmarginIds;if(!1!==o.autoexpand){if(n){var p=n.pad;if(void 0===p&&(p=Math.min(12,o.l,o.r,o.t,o.b)),h){var v=(n.l+n.r)/h;v>1&&(n.l/=v,n.r/=v)}if(d){var m=(n.t+n.b)/d;m>1&&(n.t/=m,n.b/=m)}var y=void 0!==n.xl?n.xl:n.x,b=void 0!==n.xr?n.xr:n.x,x=void 0!==n.yt?n.yt:n.y,B=void 0!==n.yb?n.yb:n.y;g[e]={l:{val:y,size:n.l+p},r:{val:b,size:n.r+p},b:{val:B,size:n.b+p},t:{val:x,size:n.t+p}},f[e]=1}else delete g[e],delete f[e];if(!r._replotting)return Ep.doAutoMargin(t)}},Ep.doAutoMargin=function(t){var e=t._fullLayout,n=e.width,r=e.height;e._size||(e._size={}),Yp(e);var i=e._size,a=e.margin,o={t:0,b:0,l:0,r:0},s=Qp.extendFlat({},i),l=a.l,c=a.r,u=a.t,h=a.b,d=e._pushmargin,g=e._pushmarginIds,f=e.minreducedwidth,p=e.minreducedheight;if(!1!==a.autoexpand){for(var v in d)g[v]||delete d[v];var m=t._fullLayout._reservedMargin;for(var y in m)for(var b in m[y]){var x=m[y][b];o[b]=Math.max(o[b],x)}for(var B in d.base={l:{val:0,size:l},r:{val:1,size:c},t:{val:1,size:u},b:{val:0,size:h}},o){var I=0;for(var F in d)"base"!==F&&bp(d[F][B].size)&&(I=d[F][B].size>I?d[F][B].size:I);var Q=Math.max(0,a[B]-I);o[B]=Math.max(0,o[B]-Q)}for(var C in d){var w=d[C].l||{},U=d[C].b||{},A=w.val,S=w.size,L=U.val,k=U.size,G=n-o.r-o.l,_=r-o.t-o.b;for(var R in d){if(bp(S)&&d[R].r){var E=d[R].r.val,T=d[R].r.size;if(E>A){var M=(S*E+(T-G)*A)/(E-A),N=(T*(1-A)+(S-G)*(1-E))/(E-A);M+N>l+c&&(l=M,c=N)}}if(bp(k)&&d[R].t){var D=d[R].t.val,X=d[R].t.size;if(D>L){var Z=(k*D+(X-_)*L)/(D-L),V=(X*(1-L)+(k-_)*(1-D))/(D-L);Z+V>h+u&&(h=Z,u=V)}}}}}var H=Qp.constrain(n-a.l-a.r,2,f),W=Qp.constrain(r-a.t-a.b,2,p),Y=Math.max(0,n-H),z=Math.max(0,r-W);if(Y){var O=(l+c)/Y;O>1&&(l/=O,c/=O)}if(z){var J=(h+u)/z;J>1&&(h/=J,u/=J)}if(i.l=Math.round(l)+o.l,i.r=Math.round(c)+o.r,i.t=Math.round(u)+o.t,i.b=Math.round(h)+o.b,i.p=Math.round(a.pad),i.w=Math.round(n)-i.l-i.r,i.h=Math.round(r)-i.t-i.b,!e._replotting&&(Ep.didMarginChange(s,i)||function(t){if("_redrawFromAutoMarginCount"in t._fullLayout)return!1;var e=Up.list(t,"",!0);for(var n in e)if(e[n].autoshift||e[n].shift)return!0;return!1}(t))){"_redrawFromAutoMarginCount"in e?e._redrawFromAutoMarginCount++:e._redrawFromAutoMarginCount=1;var P=3*(1+Object.keys(g).length);if(e._redrawFromAutoMarginCount<P)return Bp.call("_doPlot",t);e._size=s,Qp.warn("Too many auto-margin redraws.")}!function(t){var e=Up.list(t,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach((function(t){for(var n=0;n<e.length;n++){var r=e[n][t];r&&r()}}))}(t)};var zp=["l","r","t","b","p","w","h"];function Op(t,e,n){var r=!1;var i=[Ep.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},n.prepareFn,Ep.rehover,Ep.reselect,function(){return t.emit("plotly_transitioning",[]),new Promise((function(i){t._transitioning=!0,e.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push((function(){r=!0})),n.redraw&&t._transitionData._interruptCallbacks.push((function(){return Bp.call("redraw",t)})),t._transitionData._interruptCallbacks.push((function(){t.emit("plotly_transitioninterrupted",[])}));var a=0,o=0;function s(){return a++,function(){o++,r||o!==a||function(e){if(!t._transitionData)return;(function(t){if(t)for(;t.length;)t.shift()})(t._transitionData._interruptCallbacks),Promise.resolve().then((function(){if(n.redraw)return Bp.call("redraw",t)})).then((function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])})).then(e)}(i)}}n.runFn(s),setTimeout(s())}))}],a=Qp.syncOrAsync(i,t);return a&&a.then||(a=Promise.resolve()),a.then((function(){return t}))}Ep.didMarginChange=function(t,e){for(var n=0;n<zp.length;n++){var r=zp[n],i=t[r],a=e[r];if(!bp(i)||Math.abs(a-i)>1)return!0}return!1},Ep.graphJson=function(t,e,n,r,i,a){(i&&e&&!t._fullData||i&&!e&&!t._fullLayout)&&Ep.supplyDefaults(t);var o=i?t._fullData:t.data,s=i?t._fullLayout:t.layout,l=(t._transitionData||{})._frames;function c(t,e){if("function"==typeof t)return e?"_function_":null;if(Qp.isPlainObject(t)){var r,i={};return Object.keys(t).sort().forEach((function(a){if(-1===["_","["].indexOf(a.charAt(0)))if("function"!=typeof t[a]){if("keepdata"===n){if("src"===a.substr(a.length-3))return}else if("keepstream"===n){if("string"==typeof(r=t[a+"src"])&&r.indexOf(":")>0&&!Qp.isPlainObject(t.stream))return}else if("keepall"!==n&&"string"==typeof(r=t[a+"src"])&&r.indexOf(":")>0)return;i[a]=c(t[a],e)}else e&&(i[a]="_function")})),i}var a=Array.isArray(t),o=Qp.isTypedArray(t);if((a||o)&&t.dtype&&t.shape){var s=t.bdata;return c({dtype:t.dtype,shape:t.shape,bdata:Qp.isArrayBuffer(s)?xp.encode(s):s},e)}return a?t.map((function(t){return c(t,e)})):o?Qp.simpleMap(t,Qp.identity):Qp.isJSDate(t)?Qp.ms2DateTimeLocal(+t):t}var u={data:(o||[]).map((function(t){var n=c(t);return e&&delete n.fit,n}))};if(!e&&(u.layout=c(s),i)){var h=s._size;u.layout.computed={margin:{b:h.b,l:h.l,r:h.r,t:h.t}}}return l&&(u.frames=c(l)),a&&(u.config=c(t._context,!0)),"object"===r?u:JSON.stringify(u)},Ep.modifyFrames=function(t,e){var n,r,i,a=t._transitionData._frames,o=t._transitionData._frameHash;for(n=0;n<e.length;n++)switch((r=e[n]).type){case"replace":i=r.value;var s=(a[r.index]||{}).name,l=i.name;a[r.index]=o[l]=i,l!==s&&(delete o[s],o[l]=i);break;case"insert":o[(i=r.value).name]=i,a.splice(r.index,0,i);break;case"delete":delete o[(i=a[r.index]).name],a.splice(r.index,1)}return Promise.resolve()},Ep.computeFrame=function(t,e){var n,r,i,a,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=o[e.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=Ep.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(a=u.traces.indexOf(i))&&(a=u.data.length,u.traces[a]=i),u.data[a]=Ep.extendTrace(u.data[a],s.data[n]))}return u},Ep.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},n=t._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(e[i.name]=i)}},Ep.extendObjectWithContainers=function(t,e,n){var r,i,a,o,s,l,c,u=Qp.extendDeepNoArrays({},e||{}),h=Qp.expandObjectPaths(u),d={};if(n&&n.length)for(a=0;a<n.length;a++)void 0===(i=(r=Qp.nestedProperty(h,n[a])).get())?Qp.nestedProperty(d,n[a]).set(null):(r.set(null),Qp.nestedProperty(d,n[a]).set(i));if(t=Qp.extendDeepNoArrays(t||{},h),n&&n.length)for(a=0;a<n.length;a++)if(l=Qp.nestedProperty(d,n[a]).get()){for(c=(s=Qp.nestedProperty(t,n[a])).get(),Array.isArray(c)||(c=[],s.set(c)),o=0;o<l.length;o++){var g=l[o];c[o]=null===g?null:Ep.extendObjectWithContainers(c[o],g)}s.set(c)}return t},Ep.dataArrayContainers=["transforms","dimensions"],Ep.layoutArrayContainers=Bp.layoutArrayContainers,Ep.extendTrace=function(t,e){return Ep.extendObjectWithContainers(t,e,Ep.dataArrayContainers)},Ep.extendLayout=function(t,e){return Ep.extendObjectWithContainers(t,e,Ep.layoutArrayContainers)},Ep.transition=function(t,e,n,r,i,a){var o={redraw:i.redraw},s={},l=[];return o.prepareFn=function(){for(var i=Array.isArray(e)?e.length:0,a=r.slice(0,i),o=0;o<a.length;o++){var c=a[o],u=t._fullData[c]._module;if(u){if(u.animatable){var h=u.basePlotModule.name;s[h]||(s[h]=[]),s[h].push(c)}t.data[a[o]]=Ep.extendTrace(t.data[a[o]],e[o])}}var d=Qp.expandObjectPaths(Qp.extendDeepNoArrays({},n)),g=/^[xy]axis[0-9]*$/;for(var f in d)g.test(f)&&delete d[f].range;Ep.extendLayout(t.layout,d),delete t.calcdata,Ep.supplyDefaults(t),Ep.doCalcdata(t);var p=Qp.expandObjectPaths(n);if(p){var v=t._fullLayout._plots;for(var m in v){var y=v[m],b=y.xaxis,x=y.yaxis,B=b.range.slice(),I=x.range.slice(),F=null,Q=null,C=null,w=null;Array.isArray(p[b._name+".range"])?F=p[b._name+".range"].slice():Array.isArray((p[b._name]||{}).range)&&(F=p[b._name].range.slice()),Array.isArray(p[x._name+".range"])?Q=p[x._name+".range"].slice():Array.isArray((p[x._name]||{}).range)&&(Q=p[x._name].range.slice()),B&&F&&(b.r2l(B[0])!==b.r2l(F[0])||b.r2l(B[1])!==b.r2l(F[1]))&&(C={xr0:B,xr1:F}),I&&Q&&(x.r2l(I[0])!==x.r2l(Q[0])||x.r2l(I[1])!==x.r2l(Q[1]))&&(w={yr0:I,yr1:Q}),(C||w)&&l.push(Qp.extendFlat({plotinfo:y},C,w))}}return Promise.resolve()},o.runFn=function(e){var r,i,o=t._fullLayout._basePlotModules,c=l.length;if(n)for(i=0;i<o.length;i++)o[i].transitionAxes&&o[i].transitionAxes(t,l,a,e);for(var u in c?((r=Qp.extendFlat({},a)).duration=0,delete s.cartesian):r=a,s){var h=s[u];t._fullData[h[0]]._module.basePlotModule.plot(t,h,r,e)}},Op(t,a,o)},Ep.transitionFromReact=function(t,e,n,r){var i=t._fullLayout,a=i.transition,o={},s=[];return o.prepareFn=function(){var t=i._plots;for(var a in o.redraw=!1,"some"===e.anim&&(o.redraw=!0),"some"===n.anim&&(o.redraw=!0),t){var l=t[a],c=l.xaxis,u=l.yaxis,h=r[c._name].range.slice(),d=r[u._name].range.slice(),g=c.range.slice(),f=u.range.slice();c.setScale(),u.setScale();var p=null,v=null;c.r2l(h[0])===c.r2l(g[0])&&c.r2l(h[1])===c.r2l(g[1])||(p={xr0:h,xr1:g}),u.r2l(d[0])===u.r2l(f[0])&&u.r2l(d[1])===u.r2l(f[1])||(v={yr0:d,yr1:f}),(p||v)&&s.push(Qp.extendFlat({plotinfo:l},p,v))}return Promise.resolve()},o.runFn=function(n){for(var r,i,o,l=t._fullData,c=t._fullLayout._basePlotModules,u=[],h=0;h<l.length;h++)u.push(h);function d(){if(t._fullLayout)for(var e=0;e<c.length;e++)c[e].transitionAxes&&c[e].transitionAxes(t,s,r,n)}function g(){if(t._fullLayout)for(var e=0;e<c.length;e++)c[e].plot(t,o,i,n)}s.length&&e.anim?"traces first"===a.ordering?(r=Qp.extendFlat({},a,{duration:0}),o=u,i=a,setTimeout(d,a.duration),g()):(r=a,o=null,i=Qp.extendFlat({},a,{duration:0}),setTimeout(g,r.duration),d()):s.length?(r=a,d()):e.anim&&(o=u,i=a,g())},Op(t,a,o)},Ep.doCalcdata=function(t,e){var n,r,i,a,o=Up.list(t),s=t._fullData,l=t._fullLayout,c=new Array(s.length),u=(t.calcdata||[]).slice();for(t.calcdata=c,l._numBoxes=0,l._numViolins=0,l._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,l._piecolormap={},l._sunburstcolormap={},l._treemapcolormap={},l._iciclecolormap={},l._funnelareacolormap={},i=0;i<s.length;i++)Array.isArray(e)&&-1===e.indexOf(i)&&(c[i]=u[i]);for(i=0;i<s.length;i++)(n=s[i])._arrayAttrs=Ip.findArrayAttributes(n),n._extremes={};var h=l._subplots.polar||[];for(i=0;i<h.length;i++)o.push(l[h[i]].radialaxis,l[h[i]].angularaxis);for(var d in l._colorAxes){var g=l[d];!1!==g.cauto&&(delete g.cmin,delete g.cmax)}var f=!1;function p(e){if(n=s[e],r=n._module,!0===n.visible&&n.transforms){if(r&&r.calc){var i=r.calc(t,n);i[0]&&i[0].t&&i[0].t._scene&&delete i[0].t._scene.dirty}for(a=0;a<n.transforms.length;a++){var o=n.transforms[a];(r=Tp[o.type])&&r.calcTransform&&(n._hasCalcTransform=!0,f=!0,r.calcTransform(t,n,o))}}}function v(e,i){if(n=s[e],!!(r=n._module).isContainer===i){var o=[];if(!0===n.visible&&0!==n._length){delete n._indexToPoints;var l=n.transforms||[];for(a=l.length-1;a>=0;a--)if(l[a].enabled){n._indexToPoints=l[a]._indexToPoints;break}r&&r.calc&&(o=r.calc(t,n))}Array.isArray(o)&&o[0]||(o=[{x:wp,y:wp}]),o[0].t||(o[0].t={}),o[0].trace=n,c[e]=o}}for(Pp(o,s,l),i=0;i<s.length;i++)v(i,!0);for(i=0;i<s.length;i++)p(i);for(f&&Pp(o,s,l),i=0;i<s.length;i++)v(i,!0);for(i=0;i<s.length;i++)v(i,!1);jp(t);var m=function(t,e){var n,r,i,a,o,s=[];function l(t,n,r){var i=n._id.charAt(0);if("histogram2dcontour"===t){var a=n._counterAxes[0],o=Up.getFromId(e,a),s="x"===i||"x"===a&&"category"===o.type,l="y"===i||"y"===a&&"category"===o.type;return function(t,e){return 0===t||0===e||s&&t===r[e].length-1||l&&e===r.length-1?-1:("y"===i?e:t)-1}}return function(t,e){return"y"===i?e:t}}var c={min:function(t){return Qp.aggNums(Math.min,null,t)},max:function(t){return Qp.aggNums(Math.max,null,t)},sum:function(t){return Qp.aggNums((function(t,e){return t+e}),null,t)},total:function(t){return Qp.aggNums((function(t,e){return t+e}),null,t)},mean:function(t){return Qp.mean(t)},median:function(t){return Qp.median(t)}};function u(t,e){return t[1]-e[1]}function h(t,e){return e[1]-t[1]}for(n=0;n<t.length;n++){var d=t[n];if("category"===d.type){var g=d.categoryorder.match(Jp);if(g){var f=g[1],p=g[2],v=d._id.charAt(0),m="x"===v,y=[];for(r=0;r<d._categories.length;r++)y.push([d._categories[r],[]]);for(r=0;r<d._traceIndices.length;r++){var b=d._traceIndices[r],x=e._fullData[b];if(!0===x.visible){var B=x.type;Bp.traceIs(x,"histogram")&&(delete x._xautoBinFinished,delete x._yautoBinFinished);var I="splom"===B,F="scattergl"===B,Q=e.calcdata[b];for(i=0;i<Q.length;i++){var C,w,U=Q[i];if(I){var A=x._axesDim[d._id];if(!m){var S=x._diag[A][0];S&&(d=e._fullLayout[Up.id2name(S)])}var L=U.trace.dimensions[A].values;for(a=0;a<L.length;a++)for(C=d._categoriesMap[L[a]],o=0;o<U.trace.dimensions.length;o++)if(o!==A){var k=U.trace.dimensions[o];y[C][1].push(k.values[a])}}else if(F){for(a=0;a<U.t.x.length;a++)m?(C=U.t.x[a],w=U.t.y[a]):(C=U.t.y[a],w=U.t.x[a]),y[C][1].push(w);U.t&&U.t._scene&&delete U.t._scene.dirty}else if(U.hasOwnProperty("z")){w=U.z;var G=l(x.type,d,w);for(a=0;a<w.length;a++)for(o=0;o<w[a].length;o++)(C=G(o,a))+1&&y[C][1].push(w[a][o])}else for(void 0===(C=U.p)&&(C=U[v]),void 0===(w=U.s)&&(w=U.v),void 0===w&&(w=m?U.y:U.x),Array.isArray(w)||(w=void 0===w?[]:[w]),a=0;a<w.length;a++)y[C][1].push(w[a])}}}d._categoriesValue=y;var _=[];for(r=0;r<y.length;r++)_.push([y[r][0],c[f](y[r][1])]);_.sort("descending"===p?h:u),d._categoriesAggregatedValue=_,d._initialCategories=_.map((function(t){return t[0]})),s=s.concat(d.sortByInitialCategories())}}}return s}(o,t);if(m.length){for(l._numBoxes=0,l._numViolins=0,i=0;i<m.length;i++)v(m[i],!0);for(i=0;i<m.length;i++)v(m[i],!1);jp(t)}Bp.getComponentMethod("fx","calc")(t),Bp.getComponentMethod("errorbars","calc")(t)};var Jp=/(total|sum|min|max|mean|median) (ascending|descending)/;function Pp(t,e,n){var r={};function i(t){t.clearCalc(),"multicategory"===t.type&&t.setupMultiCategory(e),r[t._id]=1}Qp.simpleMap(t,i);for(var a=n._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])r[s]||i(n[Up.id2name(s)])}function jp(t){var e,n,r,i=t._fullLayout,a=i._visibleModules,o={};for(n=0;n<a.length;n++){var s=a[n],l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;o[c]?Qp.pushUnique(o[c],l):o[c]=[l]}}for(r in o){var u=o[r],h=i._subplots[r];if(Array.isArray(h))for(e=0;e<h.length;e++){var d=h[e],g="cartesian"===r?i._plots[d]:i[d];for(n=0;n<u.length;n++)u[n](t,g,d)}else for(n=0;n<u.length;n++)u[n](t)}}Ep.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},Ep.redrag=function(t){t._fullLayout._redrag&&t._fullLayout._redrag()},Ep.reselect=function(t){var e=t._fullLayout,n=(t.layout||{}).selections,r=e._previousSelections;e._previousSelections=n;var i=e._reselect||JSON.stringify(n)!==JSON.stringify(r);Bp.getComponentMethod("selections","reselect")(t,i)},Ep.generalUpdatePerTraceModule=function(t,e,n,r){var i,a=e.traceHash,o={};for(i=0;i<n.length;i++){var s=n[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var c in a)if(!o[c]){var u=a[c][0];u[0].trace.visible=!1,o[c]=[u]}for(var h in o){var d=o[h];d[0][0].trace._module.plot(t,e,Qp.filterVisible(d),r)}e.traceHash=o},Ep.plotBasePlot=function(t,e,n,r,i){var a=Bp.getModule(t),o=Gp(e.calcdata,a)[0];a.plot(e,o,r,i)},Ep.cleanBasePlot=function(t,e,n,r,i){var a=i._has&&i._has(t),o=n._has&&n._has(t);a&&!o&&i["_"+t+"layer"].selectAll("g.trace").remove()};var Kp,qp=qf.exports,$p={exports:{}},tv={},ev={};(Kp=ev).xmlns="http://www.w3.org/2000/xmlns/",Kp.svg="http://www.w3.org/2000/svg",Kp.xlink="http://www.w3.org/1999/xlink",Kp.svgAttrs={xmlns:Kp.svg,"xmlns:xlink":Kp.xlink};var nv={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}};!function(t){var e=uo,n=yf,r=n.strTranslate,i=ev,a=nv.LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;t.convertToTspans=function(f,C,w){var S=f.text(),L=!f.attr("data-notex")&&C&&C._context.typesetMath&&"undefined"!=typeof MathJax&&S.match(o),k=e.select(f.node().parentNode);if(!k.empty()){var G=f.attr("class")?f.attr("class").split(" ")[0]:"text";return G+="-math",k.selectAll("svg."+G).remove(),k.selectAll("g."+G+"-group").remove(),f.style("display",null).attr({"data-unformatted":S,"data-math":"N"}),L?(C&&C._promises||[]).push(new Promise((function(t){f.style("display","none");var i=parseInt(f.node().style.fontSize,10),a={fontSize:i};!function(t,r,i){var a,o,u,h,d=parseInt((MathJax.version||"").split(".")[0]);if(2!==d&&3!==d)return void n.warn("No MathJax version:",MathJax.version);var g=function(){return o=n.extendDeepAll({},MathJax.Hub.config),u=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:c},displayAlign:"left"})},f=function(){o=n.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=c},p=function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},v=function(){"svg"!==(a=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg")},m=function(){var i="math-output-"+n.randstr({},64);h=e.select("body").append("div").attr({id:i}).style({visibility:"hidden",position:"absolute","font-size":r.fontSize+"px"}).text(function(t){return t.replace(s,"\\lt ").replace(l,"\\gt ")}(t));var a=h.node();return 2===d?MathJax.Hub.Typeset(a):MathJax.typeset([a])},y=function(){var r=h.select(2===d?".MathJax_SVG":".MathJax"),a=!r.empty()&&h.select("svg").node();if(a){var o,s=a.getBoundingClientRect();o=2===d?e.select("body").select("#MathJax_SVG_glyphs"):r.select("defs"),i(r,o,s)}else n.log("There was an error in the tex syntax.",t),i();h.remove()},b=function(){if("SVG"!==a)return MathJax.Hub.setRenderer(a)},x=function(){"svg"!==a&&(MathJax.config.startup.output=a)},B=function(){return void 0!==u&&(MathJax.Hub.processSectionDelay=u),MathJax.Hub.Config(o)},I=function(){MathJax.config=o};2===d?MathJax.Hub.Queue(g,p,m,y,b,B):3===d&&(f(),v(),MathJax.startup.defaultReady(),MathJax.startup.promise.then((function(){m(),y(),x(),I()})))}(L[2],a,(function(e,n,a){k.selectAll("svg."+G).remove(),k.selectAll("g."+G+"-group").remove();var o=e&&e.select("svg");if(!o||!o.node())return _(),void t();var s=k.append("g").classed(G+"-group",!0).attr({"pointer-events":"none","data-unformatted":S,"data-math":"Y"});s.node().appendChild(o.node()),n&&n.node()&&o.node().insertBefore(n.node().cloneNode(!0),o.node().firstChild);var l=a.width,c=a.height;o.attr({class:G,height:c,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var u=f.node().style.fill||"black",h=o.select("g");h.attr({fill:u,stroke:u});var d=h.node().getBoundingClientRect(),g=d.width,p=d.height;(g>l||p>c)&&(o.style("overflow","hidden"),g=(d=o.node().getBoundingClientRect()).width,p=d.height);var v=+f.attr("x"),m=+f.attr("y"),y=-(i||f.node().getBoundingClientRect().height)/4;if("y"===G[0])s.attr({transform:"rotate("+[-90,v,m]+")"+r(-g/2,y-p/2)});else if("l"===G[0])m=y-p/2;else if("a"===G[0]&&0!==G.indexOf("atitle"))v=0,m=y;else{var b=f.attr("text-anchor");v-=g*("middle"===b?.5:"end"===b?1:0),m=m+y-p/2}o.attr({x:v,y:m}),w&&w.call(f,s),t(s)}))}))):_(),f}function _(){k.empty()||(G=f.attr("class")+"-math",k.select("svg."+G).remove()),f.text("").style("white-space","pre");var r=function(t,r){r=r.replace(p," ");var o,s=!1,l=[],c=-1;function f(){c++;var n=document.createElementNS(i.svg,"tspan");e.select(n).attr({class:"line",dy:c*a+"em"}),t.appendChild(n),o=n;var r=l;if(l=[{node:n}],r.length>1)for(var s=1;s<r.length;s++)C(r[s])}function C(t){var n,r=t.type,a={};if("a"===r){n="a";var s=t.target,c=t.href,u=t.popup;c&&(a={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":c},u&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else n="tspan";t.style&&(a.style=t.style);var f=document.createElementNS(i.svg,n);if("sup"===r||"sub"===r){w(o,g),o.appendChild(f);var p=document.createElementNS(i.svg,"tspan");w(p,g),e.select(p).attr("dy",d[r]),a.dy=h[r],o.appendChild(f),o.appendChild(p)}else o.appendChild(f);e.select(f).attr(a),o=t.node=f,l.push(t)}function w(t,e){t.appendChild(document.createTextNode(e))}function S(t){if(1!==l.length){var e=l.pop();t!==e.type&&n.log("Start tag <"+e.type+"> doesnt match end tag <"+t+">. Pretending it did match.",r),o=l[l.length-1].node}else n.log("Ignoring unexpected end tag </"+t+">.",r)}var L=y.test(r);L?f():(o=t,l=[{node:t}]);for(var k=r.split(v),G=0;G<k.length;G++){var _=k[G],R=_.match(m),E=R&&R[2].toLowerCase(),T=u[E];if("br"===E)f();else if(void 0===T)w(o,U(_));else if(R[1])S(E);else{var M=R[4],N={type:E},D=F(M,b);if(D?(D=D.replace(Q,"$1 fill:"),T&&(D+=";"+T)):T&&(D=T),D&&(N.style=D),"a"===E){s=!0;var X=F(M,x);if(X){var Z=A(X);Z&&(N.href=Z,N.target=F(M,B)||"_blank",N.popup=F(M,I))}}C(N)}}return s}(f.node(),S);r&&f.style("pointer-events","all"),t.positionText(f),w&&w.call(f)}};var s=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g;var c=[["$","$"],["\\(","\\)"]];var u={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},h={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},g="​",f=["http:","https:","mailto:","",void 0,":"],p=t.NEWLINES=/(\r\n?|\n)/g,v=/(<[^<>]*>)/,m=/<(\/?)([^ >]*)(\s+(.*))?>/i,y=/<br(\s+.*)?>/i;t.BR_TAG_ALL=/<br(\s+.*)?>/gi;var b=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,x=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,B=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,I=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function F(t,e){if(!t)return null;var n=t.match(e),r=n&&(n[3]||n[4]);return r&&U(r)}var Q=/(^|;)\s*color:/;t.plainText=function(t,e){for(var n=void 0!==(e=e||{}).len&&-1!==e.len?e.len:1/0,r=void 0!==e.allowedTags?e.allowedTags:["br"],i=t.split(v),a=[],o="",s=0,l=0;l<i.length;l++){var c=i[l],u=c.match(m),h=u&&u[2].toLowerCase();if(h)-1!==r.indexOf(h)&&(a.push(c),o=h);else{var d=c.length;if(s+d<n)a.push(c),s+=d;else if(s<n){var g=n-s;o&&("br"!==o||g<=3||d<=3)&&a.pop(),n>3?a.push(c.substr(0,g-3)+"..."):a.push(c.substr(0,g));break}o=""}}return a.join("")};var C={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function U(t){return t.replace(w,(function(t,e){var n;return n="#"===e.charAt(0)?function(t){if(t>1114111)return;var e=String.fromCodePoint;if(e)return e(t);var n=String.fromCharCode;return t<=65535?n(t):n(55232+(t>>10),t%1024+56320)}("x"===e.charAt(1)?parseInt(e.substr(2),16):parseInt(e.substr(1),10)):C[e],n||t}))}function A(t){var e=encodeURI(decodeURI(t)),n=document.createElement("a"),r=document.createElement("a");n.href=t,r.href=e;var i=n.protocol,a=r.protocol;return-1!==f.indexOf(i)&&-1!==f.indexOf(a)?e:""}function S(t,e,r){var i,a,o,s=r.horizontalAlign,l=r.verticalAlign||"top",c=t.node().getBoundingClientRect(),u=e.node().getBoundingClientRect();return a="bottom"===l?function(){return c.bottom-i.height}:"middle"===l?function(){return c.top+(c.height-i.height)/2}:function(){return c.top},o="right"===s?function(){return c.right-i.width}:"center"===s?function(){return c.left+(c.width-i.width)/2}:function(){return c.left},function(){i=this.node().getBoundingClientRect();var t=o()-u.left,e=a()-u.top,s=r.gd||{};if(r.gd){s._fullLayout._calcInverseTransform(s);var l=n.apply3DTransform(s._fullLayout._invTransform)(t,e);t=l[0],e=l[1]}return this.style({top:e+"px",left:t+"px","z-index":1e3}),this}}t.convertEntities=U,t.sanitizeHTML=function(t){t=t.replace(p," ");for(var n=document.createElement("p"),r=n,i=[],a=t.split(v),o=0;o<a.length;o++){var s=a[o],l=s.match(m),c=l&&l[2].toLowerCase();if(c in u)if(l[1])i.length&&(r=i.pop());else{var h=l[4],d=F(h,b),g=d?{style:d}:{};if("a"===c){var f=F(h,x);if(f){var y=A(f);if(y){g.href=y;var I=F(h,B);I&&(g.target=I)}}}var Q=document.createElement(c);r.appendChild(Q),e.select(Q).attr(g),r=Q,i.push(Q)}else r.appendChild(document.createTextNode(U(s)))}return n.innerHTML},t.lineCount=function(t){return t.selectAll("tspan.line").size()||1},t.positionText=function(t,n,r){return t.each((function(){var t=e.select(this);function i(e,n){return void 0===n?null===(n=t.attr(e))&&(t.attr(e,0),n=0):t.attr(e,n),n}var a=i("x",n),o=i("y",r);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:a,y:o})}))};var L="1px ";t.makeTextShadow=function(t){return L+L+L+t+", -"+L+"-"+L+L+t+", "+L+"-"+L+L+t+", -"+L+L+L+t},t.makeEditable=function(t,n){var r=n.gd,i=n.delegate,a=e.dispatch("edit","input","cancel"),o=i||t;if(t.style({"pointer-events":i?"none":"all"}),1!==t.size())throw new Error("boo");function s(){!function(){var i=e.select(r).select(".svg-container"),o=i.append("div"),s=t.node().style,c=parseFloat(s.fontSize||12),u=n.text;void 0===u&&(u=t.attr("data-unformatted"));o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":c,color:n.fill||s.fill||"black",opacity:1,"background-color":n.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(u).call(S(t,i,n)).on("blur",(function(){r._editing=!1,t.text(this.textContent).style({opacity:1});var n,i=e.select(this).attr("class");(n=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&e.select(t.node().parentNode).select(n).style({opacity:0});var o=this.textContent;e.select(this).transition().duration(0).remove(),e.select(document).on("mouseup",null),a.edit.call(t,o)})).on("focus",(function(){var t=this;r._editing=!0,e.select(document).on("mouseup",(function(){if(e.event.target===t)return!1;document.activeElement===o.node()&&o.node().blur()}))})).on("keyup",(function(){27===e.event.which?(r._editing=!1,t.style({opacity:1}),e.select(this).style({opacity:0}).on("blur",(function(){return!1})).transition().remove(),a.cancel.call(t,this.textContent)):(a.input.call(t,this.textContent),e.select(this).call(S(t,i,n)))})).on("keydown",(function(){13===e.event.which&&this.blur()})).call(l)}(),t.style({opacity:0});var i,s=o.attr("class");(i=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&e.select(t.node().parentNode).select(i).style({opacity:0})}function l(t){var e=t.node(),n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),e.focus()}return n.immediate?s():o.on("click",s),e.rebind(t,a,"on")}}(tv);var rv={exports:{}},iv=uo,av=vu,ov=Ac,sv=yf,lv=Pu,cv=Nu.isValid;var uv=["showscale","autocolorscale","colorscale","reversescale","colorbar"],hv=["min","max","mid","auto"];function dv(t){var e,n,r,i=t._colorAx,a=i||t,o={};for(n=0;n<uv.length;n++)o[r=uv[n]]=a[r];if(i)for(e="c",n=0;n<hv.length;n++)o[r=hv[n]]=a["c"+r];else{var s;for(n=0;n<hv.length;n++)((s="c"+(r=hv[n]))in a||(s="z"+r)in a)&&(o[r]=a[s]);e=s.charAt(0)}return o._sync=function(t,n){var r=-1!==hv.indexOf(t)?e+t:t;a[r]=a["_"+r]=n},o}function gv(t){for(var e=dv(t),n=e.min,r=e.max,i=e.reversescale?fv(e.colorscale):e.colorscale,a=i.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var c=i[l];o[l]=n+c[0]*(r-n),s[l]=c[1]}return{domain:o,range:s}}function fv(t){for(var e=t.length,n=new Array(e),r=e-1,i=0;r>=0;r--,i++){var a=t[r];n[i]=[1-a[0],a[1]]}return n}function pv(t,e){e=e||{};for(var n=t.domain,r=t.range,i=r.length,a=new Array(i),o=0;o<i;o++){var s=av(r[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l,c=iv.scale.linear().domain(n).range(a).clamp(!0),u=e.noNumericCheck,h=e.returnArray;return l=u&&h?c:u?function(t){return vv(c(t))}:h?function(t){return ov(t)?c(t):av(t).isValid()?t:lv.defaultLine}:function(t){return ov(t)?vv(c(t)):av(t).isValid()?t:lv.defaultLine},l.domain=c.domain,l.range=function(){return r},l}function vv(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return av(e).toRgbString()}var mv={hasColorscale:function(t,e,n){var r=e?sv.nestedProperty(t,e).get()||{}:t,i=r[n||"color"];i&&i._inputArray&&(i=i._inputArray);var a=!1;if(sv.isArrayOrTypedArray(i))for(var o=0;o<i.length;o++)if(ov(i[o])){a=!0;break}return sv.isPlainObject(r)&&(a||!0===r.showscale||ov(r.cmin)&&ov(r.cmax)||cv(r.colorscale)||sv.isPlainObject(r.colorbar))},extractOpts:dv,extractScale:gv,flipScale:fv,makeColorScaleFunc:pv,makeColorScaleFuncFromTrace:function(t,e){return pv(gv(t),e)}},yv=gd.FORMAT_LINK,bv=gd.DATE_FORMAT_LINK;function xv(t,e){return["Sets the "+t+" formatting rule"+(e?"for `"+e+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+yv+"."].join(" ")}function Bv(t,e){return xv(t,e)+[" And for dates see: "+bv+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}var Iv=function(t,e){return{valType:"string",dflt:"",editType:"none",description:(e?xv:Bv)("hover text",t)+["By default the values are formatted using "+(e?"generic number format":"`"+t+"axis.hoverformat`")+"."].join(" ")}},Fv=Bv,Qv=mu(),Cv=Xu,wv=hd.dash,Uv=Fu.extendFlat,Av=$f.templatedArray,Sv=Fv,Lv=Sc.ONEDAY,kv=lp,Gv=kv.HOUR_PATTERN,_v=kv.WEEKDAY_PATTERN,Rv={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},Ev=Uv({},Rv,{values:Rv.values.slice().concat(["sync"]),description:[Rv.description,"If *sync*, the number of ticks will sync with the overlayed axis","set by `overlaying` property."].join(" ")});function Tv(t){return{valType:"integer",min:0,dflt:t?5:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")}}var Mv={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},Nv={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},Dv={valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},Xv={valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")};function Zv(t){var e={valType:"number",min:0,editType:"ticks",description:"Sets the tick length (in px)."};return t||(e.dflt=5),e}function Vv(t){var e={valType:"number",min:0,editType:"ticks",description:"Sets the tick width (in px)."};return t||(e.dflt=1),e}var Hv={valType:"color",dflt:Cv.defaultLine,editType:"ticks",description:"Sets the tick color."},Wv={valType:"color",dflt:Cv.lightLine,editType:"ticks",description:"Sets the color of the grid lines."};function Yv(t){var e={valType:"number",min:0,editType:"ticks",description:"Sets the width (in px) of the grid lines."};return t||(e.dflt=1),e}var zv=Uv({},wv,{editType:"ticks"}),Ov={valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},Jv={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:Cv.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:Qv({editType:"ticks",description:["Sets this axis' title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided and it has a value for both the","lower and upper bound, `autorange` is set to *false*.","Using *min* applies autorange only to set the minimum.","Using *max* applies autorange only to set the maximum.","Using *min reversed* applies autorange only to set the minimum on a reversed axis.","Using *max reversed* applies autorange only to set the maximum on a reversed axis.","Using *reversed* applies autorange on both ends and reverses the axis direction."].join(" ")},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Use this value exactly as autorange minimum."].join(" ")},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Use this value exactly as autorange maximum."].join(" ")},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Clip autorange minimum if it goes beyond this value.","Has no effect when `autorangeoptions.minallowed` is provided."].join(" ")},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Clip autorange maximum if it goes beyond this value.","Has no effect when `autorangeoptions.maxallowed` is provided."].join(" ")},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Ensure this value is included in autorange."].join(" ")},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears.","Leaving either or both elements `null` impacts the default `autorange`."].join(" ")},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1},description:["Determines the minimum range of this axis."].join(" ")},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1},description:["Determines the maximum range of this axis."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Could be used to set the desired inside range of this axis","(excluding the labels) when `ticklabelposition` of","the anchored axis has *inside*.","Not implemented for axes with `type` *log*.","This would be ignored when `range` is provided."].join(" ")},scaleanchor:{valType:"enumerated",values:[kv.idRegex.x.toString(),kv.idRegex.y.toString(),!1],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Setting `false` allows to remove a default constraint (occasionally,","you may need to prevent a default `scaleanchor` constraint from",'being applied, eg. when having an image trace `yaxis: {scaleanchor: "x"}`',"is set automatically in order for pixels to be rendered as squares,","setting `yaxis: {scaleanchor: false}` allows to remove the constraint)."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[kv.idRegex.x.toString(),kv.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:Av("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[_v,Gv,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+_v+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+Gv+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+_v+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+Gv+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:Lv,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:Ev,nticks:Tv(),tick0:Mv,dtick:Nv,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks",description:["Sets the spacing between tick labels as compared to the spacing between ticks.","A value of 1 (default) means each tick gets a label.","A value of 2 means shows every 2nd label.","A larger value n means only every nth tick is labeled.","`tick0` determines which labels are shown.","Not implemented for axes with `type` *log* or *multicategory*, or when `tickmode` is *array*."].join(" ")},tickvals:Dv,ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:Xv,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:Zv(),tickwidth:Vv(),tickcolor:Hv,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},labelalias:{valType:"any",dflt:!1,editType:"ticks",description:["Replacement text for specific tick or hover labels.","For example using {US: 'USA', CA: 'Canada'} changes US to USA","and CA to Canada. The labels we would have shown must match","the keys exactly, after adding any tickprefix or ticksuffix.","For negative numbers the minus sign symbol used (U+2212) is wider than the regular ascii dash.","That means you need to use −1 instead of -1.","labelalias can be used with any axis type, and both keys (if needed)","and values (if desired) can include html-like tags or MathJax."].join(" ")},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:Uv({},wv,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:Qv({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks",description:["When `tickangle` is set to *auto*, it will be set to the first","angle in this array that is large enough to prevent label","overlap."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:Sv("tick label")},tickformatstops:Av("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:Sv("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:Cv.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:Ov,gridcolor:Wv,gridwidth:Yv(),griddash:zv,zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:Cv.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:Cv.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",kv.idRegex.x.toString(),kv.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",kv.idRegex.x.toString(),kv.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},minor:{tickmode:Rv,nticks:Tv("minor"),tick0:Mv,dtick:Nv,tickvals:Dv,ticks:Xv,ticklen:Zv("minor"),tickwidth:Vv("minor"),tickcolor:Hv,gridcolor:Wv,gridwidth:Yv("minor"),griddash:zv,showgrid:Ov,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},autoshift:{valType:"boolean",dflt:!1,editType:"plot",description:["Automatically reposition the axis to avoid","overlap with other axes with the same `overlaying` value.","This repositioning will account for any `shift` amount applied to other","axes on the same side with `autoshift` is set to true.","Only has an effect if `anchor` is set to *free*."].join(" ")},shift:{valType:"number",editType:"plot",description:["Moves the axis a given number of pixels from where it would have been otherwise.","Accepts both positive and negative values, which will shift the axis either right","or left, respectively.","If `autoshift` is set to true, then this defaults to a padding of -3 if `side` is set to *left*.","and defaults to +3 if `side` is set to *right*. Defaults to 0 if `autoshift` is set to false.","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")},title:{valType:"string",editType:"ticks",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the axis' title, please use `title.text` now."].join(" ")},titlefont:Qv({editType:"ticks",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}},Pv=Jv,jv=mu(),Kv=Fu.extendFlat,qv=(0,sd.overrideAll)({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",description:["Sets the x position with respect to `xref` of the color bar (in plot fraction).","When `xref` is *paper*, defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*.","When `xref` is *container*, defaults to *1* when `orientation` is *v* and","0.5 when `orientation` is *h*.","Must be between *0* and *1* if `xref` is *container*","and between *-2* and *3* if `xref` is *paper*."].join(" ")},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",description:["Sets the y position with respect to `yref` of the color bar (in plot fraction).","When `yref` is *paper*, defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*.","When `yref` is *container*, defaults to 0.5 when `orientation` is *v* and","1 when `orientation` is *h*.","Must be between *0* and *1* if `yref` is *container*","and between *-2* and *3* if `yref` is *paper*."].join(" ")},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:Pv.linecolor,outlinewidth:Pv.linewidth,bordercolor:Pv.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:Pv.minor.tickmode,nticks:Pv.nticks,tick0:Pv.tick0,dtick:Pv.dtick,tickvals:Pv.tickvals,ticktext:Pv.ticktext,ticks:Kv({},Pv.ticks,{dflt:""}),ticklabeloverflow:Kv({},Pv.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:Pv.ticklen,tickwidth:Pv.tickwidth,tickcolor:Pv.tickcolor,ticklabelstep:Pv.ticklabelstep,showticklabels:Pv.showticklabels,labelalias:Pv.labelalias,tickfont:jv({description:"Sets the color bar's tick label font"}),tickangle:Pv.tickangle,tickformat:Pv.tickformat,tickformatstops:Pv.tickformatstops,tickprefix:Pv.tickprefix,showtickprefix:Pv.showtickprefix,ticksuffix:Pv.ticksuffix,showticksuffix:Pv.showticksuffix,separatethousands:Pv.separatethousands,exponentformat:Pv.exponentformat,minexponent:Pv.minexponent,showexponent:Pv.showexponent,title:{text:{valType:"string",description:["Sets the title of the color bar.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:jv({description:["Sets this color bar's title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*.","Note that the title's location used to be set","by the now deprecated `titleside` attribute."].join(" ")}},_deprecated:{title:{valType:"string",description:["Deprecated in favor of color bar's `title.text`.","Note that value of color bar's `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:jv({description:"Deprecated in favor of color bar's `title.font`."}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top",description:"Deprecated in favor of color bar's `title.side`."}}},"colorbars","from-root"),$v=qv,tm=Ku.counter,em=Nu.scales,nm=Jd(em);function rm(t){return"`"+t+"`"}var im=function(t,e){t=t||"";var n,r,i=(e=e||{}).cLetter||"c",a="onlyIfNumerical"in e?e.onlyIfNumerical:Boolean(t),o="noScale"in e?e.noScale:"marker.line"===t,s="showScaleDflt"in e?e.showScaleDflt:"z"===i,l="string"==typeof e.colorscaleDflt?em[e.colorscaleDflt]:null,c=e.editTypeOverride||"",u=t?t+".":"";"colorAttr"in e?(n=e.colorAttr,r=e.colorAttr):r="in "+rm(u+(n={z:"z",c:"color"}[i]));var h=a?" Has an effect only if "+r+" is set to a numerical array.":"",d=i+"auto",g=i+"min",f=i+"max",p=i+"mid",v=rm(u+d),m=rm(u+g),y=rm(u+f),b=m+" and "+y,x={};x[g]=x[f]=void 0;var B={};B[d]=!1;var I={};return"color"===n&&(I.color={valType:"color",arrayOk:!0,editType:c||"style",description:["Sets the",t,"color.","It accepts either a specific color","or an array of numbers that are mapped to the colorscale","relative to the max and min values of the array or relative to",b,"if set."].join(" ")},e.anim&&(I.color.anim=!0)),I[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x,description:["Determines whether or not the color domain is computed","with respect to the input data (here "+r+") or the bounds set in",b+h,"Defaults to `false` when",b,"are set by the user."].join(" ")},I[g]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:B,description:["Sets the lower bound of the color domain."+h,"Value should have the same units as",r,"and if set,",y,"must be set as well."].join(" ")},I[f]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:B,description:["Sets the upper bound of the color domain."+h,"Value should have the same units as",r,"and if set,",m,"must be set as well."].join(" ")},I[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:x,description:["Sets the mid-point of the color domain by scaling",m,"and/or",y,"to be equidistant to this point."+h,"Value should have the same units as",r+".","Has no effect when",v,"is `false`."].join(" ")},I.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale."+h,"The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in color space,","use",b+".","Alternatively, `colorscale` may be a palette name string","of the following list: "+nm+"."].join(" ")},I.autocolorscale={valType:"boolean",dflt:!1!==e.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)","or the palette determined by",rm(u+"colorscale")+"."+h,"In case `colorscale` is unspecified or `autocolorscale` is true, the default","palette will be chosen according to whether numbers in the `color` array are","all positive, all negative or mixed."].join(" ")},I.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true."+h,"If true,",m,"will correspond to the last color","in the array and",y,"will correspond to the first color."].join(" ")},o||(I.showscale={valType:"boolean",dflt:s,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace."+h].join(" ")},I.colorbar=$v),e.noColorAxis||(I.coloraxis={valType:"subplotid",regex:tm("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),I},am=Fu.extendFlat,om=im,sm=Nu.scales,lm="Note that `autocolorscale` must be true for this attribute to work.",cm={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:sm.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",lm].join(" ")},sequentialminus:{valType:"colorscale",dflt:sm.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",lm].join(" ")},diverging:{valType:"colorscale",dflt:sm.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",lm].join(" ")}},coloraxis:am({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},om("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))},um=yf,hm=function(t){return um.isPlainObject(t.colorbar)},dm={},gm=Ac,fm=yf,pm=Sc,vm=pm.ONEDAY,mm=pm.ONEWEEK;dm.dtick=function(t,e){var n="log"===e,r="date"===e,i="category"===e,a=r?vm:1;if(!t)return a;if(gm(t))return(t=Number(t))<=0?a:i?Math.max(1,Math.round(t)):r?Math.max(.1,t):t;if("string"!=typeof t||!r&&!n)return a;var o=t.charAt(0),s=t.substr(1);return(s=gm(s)?Number(s):0)<=0||!(r&&"M"===o&&s===Math.round(s)||n&&"L"===o||n&&"D"===o&&(1===s||2===s))?a:t},dm.tick0=function(t,e,n,r){return"date"===e?fm.cleanDate(t,fm.dateTick0(n,r%mm==0?1:0)):"D1"!==r&&"D2"!==r?gm(t)?Number(t):0:void 0};var ym=dm,bm=yf.isArrayOrTypedArray,xm=Lc.isTypedArraySpec,Bm=Lc.decodeTypedArraySpec,Im=function(t,e,n,r,i){i||(i={});var a=i.isMinor,o=a?t.minor||{}:t,s=a?e.minor:e,l=a?"minor.":"";function c(t){var e=o[t];return xm(e)&&(e=Bm(e)),void 0!==e?e:(s._template||{})[t]}var u=c("tick0"),h=c("dtick"),d=c("tickvals"),g=n(l+"tickmode",bm(d)?"array":h?"linear":"auto");if("auto"===g||"sync"===g)n(l+"nticks");else if("linear"===g){var f=s.dtick=ym.dtick(h,r);s.tick0=ym.tick0(u,r,e.calendar,f)}else if("multicategory"!==r){void 0===n(l+"tickvals")?s.tickmode="auto":a||n("ticktext")}},Fm=yf,Qm=Jv,Cm=function(t,e,n,r){var i=r.isMinor,a=i?t.minor||{}:t,o=i?e.minor:e,s=i?Qm.minor:Qm,l=i?"minor.":"",c=Fm.coerce2(a,o,s,"ticklen",i?.6*(e.ticklen||5):void 0),u=Fm.coerce2(a,o,s,"tickwidth",i?e.tickwidth||1:void 0),h=Fm.coerce2(a,o,s,"tickcolor",(i?e.tickcolor:void 0)||o.color);n(l+"ticks",!i&&r.outerTicks||c||u||h?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)},wm=function(t){var e=["showexponent","showtickprefix","showticksuffix"].filter((function(e){return void 0!==t[e]}));if(e.every((function(n){return t[n]===t[e[0]]}))||1===e.length)return t[e[0]]},Um=yf,Am=$f,Sm=function(t,e,n){var r,i,a=n.name,o=n.inclusionAttr||"visible",s=e[a],l=Um.isArrayOrTypedArray(t[a])?t[a]:[],c=e[a]=[],u=Am.arrayTemplater(e,a,o);for(r=0;r<l.length;r++){var h=l[r];Um.isPlainObject(h)?i=u.newItem(h):(i=u.newItem({}))[o]=!1,i._index=r,!1!==i[o]&&n.handleItemDefaults(h,i,e,n),c.push(i)}var d=u.defaultItems();for(r=0;r<d.length;r++)(i=d[r])._index=c.length,n.handleItemDefaults({},i,e,n,{}),c.push(i);if(Um.isArrayOrTypedArray(s)){var g=Math.min(s.length,c.length);for(r=0;r<g;r++)Um.relinkPrivateKeys(c[r],s[r])}return c},Lm=yf,km=Pu.contrast,Gm=Jv,_m=wm,Rm=Sm,Em=function(t,e,n,r,i){i||(i={});var a=n("labelalias");Lm.isPlainObject(a)||delete e.labelalias;var o=_m(t);if(n("showticklabels")){var s=i.font||{},l=e.color,c=-1!==(e.ticklabelposition||"").indexOf("inside")?km(i.bgColor):l&&l!==Gm.color.dflt?l:s.color;if(Lm.coerceFont(n,"tickfont",{family:s.family,weight:s.weight,style:s.style,variant:s.variant,size:s.size,color:c}),i.noTicklabelstep||"multicategory"===r||"log"===r||n("ticklabelstep"),!i.noAng){var u=n("tickangle");i.noAutotickangles||"auto"!==u||n("autotickangles")}if("category"!==r){var h=n("tickformat");Rm(t,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:Tm}),e.tickformatstops.length||delete e.tickformatstops,i.noExp||h||"date"===r||(n("showexponent",o),n("exponentformat"),n("minexponent"),n("separatethousands"))}}};function Tm(t,e){function n(n,r){return Lm.coerce(t,e,Gm.tickformatstops,n,r)}n("enabled")&&(n("dtickrange"),n("value"))}var Mm=wm,Nm=function(t,e,n,r,i){i||(i={});var a=i.tickSuffixDflt,o=Mm(t);n("tickprefix")&&n("showtickprefix",o),n("ticksuffix",a)&&n("showticksuffix",o)},Dm=yf,Xm=$f,Zm=Im,Vm=Cm,Hm=Em,Wm=Nm,Ym=qv,zm=function(t,e,n){var r=Xm.newContainer(e,"colorbar"),i=t.colorbar||{};function a(t,e){return Dm.coerce(i,r,Ym,t,e)}var o=n.margin||{t:0,b:0,l:0,r:0},s=n.width-o.l-o.r,l=n.height-o.t-o.b,c="v"===a("orientation"),u=a("thicknessmode");a("thickness","fraction"===u?30/(c?s:l):30);var h=a("lenmode");a("len","fraction"===h?1:c?l:s);var d,g,f,p="paper"===a("yref"),v="paper"===a("xref"),m="left";c?(f="middle",m=v?"left":"right",d=v?1.02:1,g=.5):(f=p?"bottom":"top",m="center",d=.5,g=p?1.02:1),Dm.coerce(i,r,{x:{valType:"number",min:v?-2:0,max:v?3:1,dflt:d}},"x"),Dm.coerce(i,r,{y:{valType:"number",min:p?-2:0,max:p?3:1,dflt:g}},"y"),a("xanchor",m),a("xpad"),a("yanchor",f),a("ypad"),Dm.noneOrAll(i,r,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");var y=Dm.coerce(i,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");a("ticklabeloverflow",-1!==y.indexOf("inside")?"hide past domain":"hide past div"),Zm(i,r,a,"linear");var b=n.font,x={noAutotickangles:!0,outerTicks:!1,font:b};-1!==y.indexOf("inside")&&(x.bgColor="black"),Wm(i,r,a,"linear",x),Hm(i,r,a,"linear",x),Vm(i,r,a,"linear"),a("title.text",n._dfltTitle.colorbar);var B=r.showticklabels?r.tickfont:b,I=Dm.extendFlat({},B,{weight:b.weight,style:b.style,variant:b.variant,color:b.color,size:Dm.bigFont(B.size)});Dm.coerceFont(a,"title.font",I),a("title.side",c?"top":"right")},Om=Ac,Jm=yf,Pm=hm,jm=zm,Km=Nu.isValid,qm=hh.traceIs;function $m(t,e){var n=e.slice(0,e.length-1);return e?Jm.nestedProperty(t,n).get()||{}:t}var ty=function t(e,n,r,i,a){var o=a.prefix,s=a.cLetter,l="_module"in n,c=$m(e,o),u=$m(n,o),h=$m(n._template||{},o)||{},d=function(){return delete e.coloraxis,delete n.coloraxis,t(e,n,r,i,a)};if(l){var g=r._colorAxes||{},f=i(o+"coloraxis");if(f){var p=qm(n,"contour")&&Jm.nestedProperty(n,"contours.coloring").get()||"heatmap",v=g[f];return void(v?(v[2].push(d),v[0]!==p&&(v[0]=!1,Jm.warn(["Ignoring coloraxis:",f,"setting","as it is linked to incompatible colorscales."].join(" ")))):g[f]=[p,n,[d]])}}var m=c[s+"min"],y=c[s+"max"],b=Om(m)&&Om(y)&&m<y;i(o+s+"auto",!b)?i(o+s+"mid"):(i(o+s+"min"),i(o+s+"max"));var x,B,I=c.colorscale,F=h.colorscale;(void 0!==I&&(x=!Km(I)),void 0!==F&&(x=!Km(F)),i(o+"autocolorscale",x),i(o+"colorscale"),i(o+"reversescale"),"marker.line."!==o)&&(o&&l&&(B=Pm(c)),i(o+"showscale",B)&&(o&&h&&(u._template=h),jm(c,u,r)))},ey=yf,ny=$f,ry=cm,iy=ty,ay=yf,oy=mv.hasColorscale,sy=mv.extractOpts,ly=Ac,cy=yf,uy=mv.extractOpts,hy=function(t,e,n){var r,i=t._fullLayout,a=n.vals,o=n.containerStr,s=o?cy.nestedProperty(e,o).get():e,l=uy(s),c=!1!==l.auto,u=l.min,h=l.max,d=l.mid,g=function(){return cy.aggNums(Math.min,null,a)},f=function(){return cy.aggNums(Math.max,null,a)};(void 0===u?u=g():c&&(u=s._colorAx&&ly(u)?Math.min(u,g()):g()),void 0===h?h=f():c&&(h=s._colorAx&&ly(h)?Math.max(h,f()):f()),c&&void 0!==d&&(h-d>d-u?u=d-(h-d):h-d<d-u&&(h=d+(d-u))),u===h&&(u-=.5,h+=.5),l._sync("min",u),l._sync("max",h),l.autocolorscale)&&(r=u*h<0?i.colorscale.diverging:u>=0?i.colorscale.sequential:i.colorscale.sequentialminus,l._sync("colorscale",r))},dy={moduleType:"component",name:"colorscale",attributes:im,layoutAttributes:cm,supplyLayoutDefaults:function(t,e){function n(n,r){return ey.coerce(t,e,ry,n,r)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var r,i,a=e._colorAxes;function o(t,e){return ey.coerce(r,i,ry.coloraxis,t,e)}for(var s in a){var l=a[s];if(l[0])r=t[s]||{},(i=ny.newContainer(e,s,"coloraxis"))._name=s,iy(r,i,e,o,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete e._colorAxes[s]}}},handleDefaults:ty,crossTraceDefaults:function(t,e){function n(t,e){var n=t["_"+e];void 0!==n&&(t[e]=n)}function r(t,r){var i=r.container?ay.nestedProperty(t,r.container).get():t;if(i)if(i.coloraxis)i._colorAx=e[i.coloraxis];else{var a=sy(i),o=a.auto;(o||void 0===a.min)&&n(i,r.min),(o||void 0===a.max)&&n(i,r.max),a.autocolorscale&&n(i,"colorscale")}}for(var i=0;i<t.length;i++){var a=t[i],o=a._module.colorbar;if(o)if(Array.isArray(o))for(var s=0;s<o.length;s++)r(a,o[s]);else r(a,o);oy(a,"marker.line")&&r(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var l in e._colorAxes)r(e[l],{min:"cmin",max:"cmax"})},calc:hy,scales:Nu.scales,defaultScale:Nu.defaultScale,getScale:Nu.get,isValidScale:Nu.isValid,hasColorscale:mv.hasColorscale,extractOpts:mv.extractOpts,extractScale:mv.extractScale,flipScale:mv.flipScale,makeColorScaleFunc:mv.makeColorScaleFunc,makeColorScaleFuncFromTrace:mv.makeColorScaleFuncFromTrace},gy=yf,fy=Lc.isTypedArraySpec,py={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){var e=t.marker;return gy.isPlainObject(e)&&(gy.isArrayOrTypedArray(e.size)||fy(e.size))}},vy=Ac,my=function(t,e){e||(e=2);var n=t.marker,r=n.sizeref||1,i=n.sizemin||0,a="area"===n.sizemode?function(t){return Math.sqrt(t/r)}:function(t){return t/r};return function(t){var n=a(t/e);return vy(n)&&n>0?Math.max(n,i):0}},yy={};!function(t){var e=yf;t.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},t.isTraceInSubplots=function(e,n){if("splom"===e.type){for(var r=e.xaxes||[],i=e.yaxes||[],a=0;a<r.length;a++)for(var o=0;o<i.length;o++)if(-1!==n.indexOf(r[a]+i[o]))return!0;return!1}return-1!==n.indexOf(t.getSubplot(e))},t.flat=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=e;return n},t.p2c=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].p2c(e);return n},t.getDistanceFunction=function(e,n,r,i){return"closest"===e?i||t.quadrature(n,r):"x"===e.charAt(0)?n:r},t.getClosest=function(t,e,n){if(!1!==n.index)n.index>=0&&n.index<t.length?n.distance=0:n.index=!1;else for(var r=0;r<t.length;r++){var i=e(t[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},t.inbox=function(t,e,n){return t*e<0||0===t?n:1/0},t.quadrature=function(t,e){return function(n){var r=t(n),i=e(n);return Math.sqrt(r*r+i*i)}},t.makeEventData=function(e,n,r){var i="index"in e?e.index:e.pointNumber,a={data:n._input,fullData:n,curveNumber:n.index,pointNumber:i};if(n._indexToPoints){var o=n._indexToPoints[i];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=i;return n._module.eventData?a=n._module.eventData(a,e,n,r,i):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),void 0!==e.zLabelVal&&(a.z=e.zLabelVal)),t.appendArrayPointValue(a,n,i),a},t.appendArrayPointValue=function(t,n,a){var o=n._arrayAttrs;if(o)for(var s=0;s<o.length;s++){var l=o[s],c=r(l);if(void 0===t[c]){var u=i(e.nestedProperty(n,l).get(),a);void 0!==u&&(t[c]=u)}}},t.appendArrayMultiPointValues=function(t,n,a){var o=n._arrayAttrs;if(o)for(var s=0;s<o.length;s++){var l=o[s],c=r(l);if(void 0===t[c]){for(var u=e.nestedProperty(n,l).get(),h=new Array(a.length),d=0;d<a.length;d++)h[d]=i(u,a[d]);t[c]=h}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function r(t){return n[t]||t}function i(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var a={x:!0,y:!0},o={"x unified":!0,"y unified":!0};t.isUnifiedHover=function(t){return"string"==typeof t&&!!o[t]},t.isXYhover=function(t){return"string"==typeof t&&!!a[t]}}(yy);var by=function(t){var e=[];return t.replace(By,(function(t,n,r){var i=n.toLowerCase();for(r=function(t){var e=t.match(Qy);return e?e.map(Number):[]}(r),"m"==i&&r.length>2&&(e.push([n].concat(r.splice(0,2))),i="l",n="m"==n?"l":"L");;){if(r.length==xy[i])return r.unshift(n),e.push(r);if(r.length<xy[i])throw new Error("malformed path data");e.push([n].concat(r.splice(0,xy[i])))}})),e},xy={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},By=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var Iy,Fy,Qy=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;var Cy=uo,wy=yf,Uy=wy.numberFormat,Ay=Ac,Sy=vu,Ly=hh,ky=Pu,Gy=dy,_y=wy.strTranslate,Ry=tv,Ey=ev,Ty=nv.LINE_SPACING,My=ju.DESELECTDIM,Ny=py,Dy=my,Xy=yy.appendArrayPointValue,Zy=rv.exports={};function Vy(t,e,n,r){var i=e.fillpattern,a=e.fillgradient,o=i&&Zy.getPatternAttr(i.shape,0,"");if(o){var s=Zy.getPatternAttr(i.bgcolor,0,null),l=Zy.getPatternAttr(i.fgcolor,0,null),c=i.fgopacity,u=Zy.getPatternAttr(i.size,0,8),h=Zy.getPatternAttr(i.solidity,0,.3),d=e.uid;Zy.pattern(t,"point",n,d,o,u,h,void 0,i.fillmode,s,l,c)}else if(a&&"none"!==a.type){var g,f,p=a.type,v="scatterfill-"+e.uid;if(r&&(v="legendfill-"+e.uid),r||void 0===a.start&&void 0===a.stop)"horizontal"===p&&(p+="reversed"),t.call(Zy.gradient,n,v,p,a.colorscale,"fill");else"horizontal"===p?(g={x:a.start,y:0},f={x:a.stop,y:0}):"vertical"===p&&(g={x:0,y:a.start},f={x:0,y:a.stop}),g.x=e._xA.c2p(void 0===g.x?e._extremes.x.min[0].val:g.x,!0),g.y=e._yA.c2p(void 0===g.y?e._extremes.y.min[0].val:g.y,!0),f.x=e._xA.c2p(void 0===f.x?e._extremes.x.max[0].val:f.x,!0),f.y=e._yA.c2p(void 0===f.y?e._extremes.y.max[0].val:f.y,!0),t.call(Jy,n,v,"linear",a.colorscale,"fill",g,f,!0,!1)}else e.fillcolor&&t.call(ky.fill,e.fillcolor)}Zy.font=function(t,e,n,r,i,a,o){wy.isPlainObject(e)&&(o=e.variant,a=e.style,i=e.weight,r=e.color,n=e.size,e=e.family),e&&t.style("font-family",e),n+1&&t.style("font-size",n+"px"),r&&t.call(ky.fill,r),i&&t.style("font-weight",i),a&&t.style("font-style",a),o&&t.style("font-variant",o)},Zy.setPosition=function(t,e,n){t.attr("x",e).attr("y",n)},Zy.setSize=function(t,e,n){t.attr("width",e).attr("height",n)},Zy.setRect=function(t,e,n,r,i){t.call(Zy.setPosition,e,n).call(Zy.setSize,r,i)},Zy.translatePoint=function(t,e,n,r){var i=n.c2p(t.x),a=r.c2p(t.y);return!!(Ay(i)&&Ay(a)&&e.node())&&("text"===e.node().nodeName?e.attr("x",i).attr("y",a):e.attr("transform",_y(i,a)),!0)},Zy.translatePoints=function(t,e,n){t.each((function(t){var r=Cy.select(this);Zy.translatePoint(t,r,e,n)}))},Zy.hideOutsideRangePoint=function(t,e,n,r,i,a){e.attr("display",n.isPtWithinRange(t,i)&&r.isPtWithinRange(t,a)?null:"none")},Zy.hideOutsideRangePoints=function(t,e){if(e._hasClipOnAxisFalse){var n=e.xaxis,r=e.yaxis;t.each((function(e){var i=e[0].trace,a=i.xcalendar,o=i.ycalendar,s=Ly.traceIs(i,"bar-like")?".bartext":".point,.textpoint";t.selectAll(s).each((function(t){Zy.hideOutsideRangePoint(t,Cy.select(this),n,r,a,o)}))}))}},Zy.crispRound=function(t,e,n){return e&&Ay(e)?t._context.staticPlot?e:e<1?1:Math.round(e):n||0},Zy.singleLineStyle=function(t,e,n,r,i){e.style("fill","none");var a=(((t||[])[0]||{}).trace||{}).line||{},o=n||a.width||0,s=i||a.dash||"";ky.stroke(e,r||a.color),Zy.dashLine(e,s,o)},Zy.lineGroupStyle=function(t,e,n,r){t.style("fill","none").each((function(t){var i=(((t||[])[0]||{}).trace||{}).line||{},a=e||i.width||0,o=r||i.dash||"";Cy.select(this).call(ky.stroke,n||i.color).call(Zy.dashLine,o,a)}))},Zy.dashLine=function(t,e,n){n=+n||0,e=Zy.dashStyle(e,n),t.style({"stroke-dasharray":e,"stroke-width":n+"px"})},Zy.dashStyle=function(t,e){e=+e||1;var n=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=n+"px,"+n+"px":"dash"===t?t=3*n+"px,"+3*n+"px":"longdash"===t?t=5*n+"px,"+5*n+"px":"dashdot"===t?t=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===t&&(t=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),t},Zy.singleFillStyle=function(t,e){var n=Cy.select(t.node());Vy(t,((n.data()[0]||[])[0]||{}).trace||{},e,!1)},Zy.fillGroupStyle=function(t,e,n){t.style("stroke-width",0).each((function(t){var r=Cy.select(this);t[0].trace&&Vy(r,t[0].trace,e,n)}))};var Hy=function(){if(Fy)return Iy;Fy=1;var t,e,n,r,i=by,a=uo.round,o="M0,0Z",s=Math.sqrt(2),l=Math.sqrt(3),c=Math.PI,u=Math.cos,h=Math.sin;function d(t){return null===t}function g(a,o,s){if(!(a&&a%360!=0||o))return s;if(n===a&&r===o&&t===s)return e;function l(t,e){var n=u(t),r=h(t),i=e[0],a=e[1]+(o||0);return[i*n-a*r,i*r+a*n]}n=a,r=o,t=s;for(var d=a/180*c,g=0,f=0,p=i(s),v="",m=0;m<p.length;m++){var y=p[m],b=y[0],x=g,B=f;if("M"===b||"L"===b)g=+y[1],f=+y[2];else if("m"===b||"l"===b)g+=+y[1],f+=+y[2];else if("H"===b)g=+y[1];else if("h"===b)g+=+y[1];else if("V"===b)f=+y[1];else if("v"===b)f+=+y[1];else if("A"===b){g=+y[1],f=+y[2];var I=l(d,[+y[6],+y[7]]);y[6]=I[0],y[7]=I[1],y[3]=+y[3]+a}"H"!==b&&"V"!==b||(b="L"),"h"!==b&&"v"!==b||(b="l"),"m"!==b&&"l"!==b||(g-=x,f-=B);var F=l(d,[g,f]);"H"!==b&&"V"!==b||(b="L"),"M"!==b&&"L"!==b&&"m"!==b&&"l"!==b||(y[1]=F[0],y[2]=F[1]),y[0]=b,v+=y[0]+y.slice(1).join(",")}return e=v,v}return Iy={circle:{n:0,f:function(t,e,n){if(d(e))return o;var r=a(t,2),i="M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z";return n?g(e,n,i):i}},square:{n:1,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")}},diamond:{n:2,f:function(t,e,n){if(d(e))return o;var r=a(1.3*t,2);return g(e,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"Z")}},cross:{n:3,f:function(t,e,n){if(d(e))return o;var r=a(.4*t,2),i=a(1.2*t,2);return g(e,n,"M"+i+","+r+"H"+r+"V"+i+"H-"+r+"V"+r+"H-"+i+"V-"+r+"H-"+r+"V-"+i+"H"+r+"V-"+r+"H"+i+"Z")}},x:{n:4,f:function(t,e,n){if(d(e))return o;var r=a(.8*t/s,2),i="l"+r+","+r,l="l"+r+",-"+r,c="l-"+r+",-"+r,u="l-"+r+","+r;return g(e,n,"M0,"+r+i+l+c+l+c+u+c+u+i+u+i+"Z")}},"triangle-up":{n:5,f:function(t,e,n){if(d(e))return o;var r=a(2*t/l,2);return g(e,n,"M-"+r+","+a(t/2,2)+"H"+r+"L0,-"+a(t,2)+"Z")}},"triangle-down":{n:6,f:function(t,e,n){if(d(e))return o;var r=a(2*t/l,2);return g(e,n,"M-"+r+",-"+a(t/2,2)+"H"+r+"L0,"+a(t,2)+"Z")}},"triangle-left":{n:7,f:function(t,e,n){if(d(e))return o;var r=a(2*t/l,2);return g(e,n,"M"+a(t/2,2)+",-"+r+"V"+r+"L-"+a(t,2)+",0Z")}},"triangle-right":{n:8,f:function(t,e,n){if(d(e))return o;var r=a(2*t/l,2);return g(e,n,"M-"+a(t/2,2)+",-"+r+"V"+r+"L"+a(t,2)+",0Z")}},"triangle-ne":{n:9,f:function(t,e,n){if(d(e))return o;var r=a(.6*t,2),i=a(1.2*t,2);return g(e,n,"M-"+i+",-"+r+"H"+r+"V"+i+"Z")}},"triangle-se":{n:10,f:function(t,e,n){if(d(e))return o;var r=a(.6*t,2),i=a(1.2*t,2);return g(e,n,"M"+r+",-"+i+"V"+r+"H-"+i+"Z")}},"triangle-sw":{n:11,f:function(t,e,n){if(d(e))return o;var r=a(.6*t,2),i=a(1.2*t,2);return g(e,n,"M"+i+","+r+"H-"+r+"V-"+i+"Z")}},"triangle-nw":{n:12,f:function(t,e,n){if(d(e))return o;var r=a(.6*t,2),i=a(1.2*t,2);return g(e,n,"M-"+r+","+i+"V-"+r+"H"+i+"Z")}},pentagon:{n:13,f:function(t,e,n){if(d(e))return o;var r=a(.951*t,2),i=a(.588*t,2),s=a(-t,2),l=a(-.309*t,2);return g(e,n,"M"+r+","+l+"L"+i+","+a(.809*t,2)+"H-"+i+"L-"+r+","+l+"L0,"+s+"Z")}},hexagon:{n:14,f:function(t,e,n){if(d(e))return o;var r=a(t,2),i=a(t/2,2),s=a(t*l/2,2);return g(e,n,"M"+s+",-"+i+"V"+i+"L0,"+r+"L-"+s+","+i+"V-"+i+"L0,-"+r+"Z")}},hexagon2:{n:15,f:function(t,e,n){if(d(e))return o;var r=a(t,2),i=a(t/2,2),s=a(t*l/2,2);return g(e,n,"M-"+i+","+s+"H"+i+"L"+r+",0L"+i+",-"+s+"H-"+i+"L-"+r+",0Z")}},octagon:{n:16,f:function(t,e,n){if(d(e))return o;var r=a(.924*t,2),i=a(.383*t,2);return g(e,n,"M-"+i+",-"+r+"H"+i+"L"+r+",-"+i+"V"+i+"L"+i+","+r+"H-"+i+"L-"+r+","+i+"V-"+i+"Z")}},star:{n:17,f:function(t,e,n){if(d(e))return o;var r=1.4*t,i=a(.225*r,2),s=a(.951*r,2),l=a(.363*r,2),c=a(.588*r,2),u=a(-r,2),h=a(-.309*r,2),f=a(.118*r,2),p=a(.809*r,2);return g(e,n,"M"+i+","+h+"H"+s+"L"+l+","+f+"L"+c+","+p+"L0,"+a(.382*r,2)+"L-"+c+","+p+"L-"+l+","+f+"L-"+s+","+h+"H-"+i+"L0,"+u+"Z")}},hexagram:{n:18,f:function(t,e,n){if(d(e))return o;var r=a(.66*t,2),i=a(.38*t,2),s=a(.76*t,2);return g(e,n,"M-"+s+",0l-"+i+",-"+r+"h"+s+"l"+i+",-"+r+"l"+i+","+r+"h"+s+"l-"+i+","+r+"l"+i+","+r+"h-"+s+"l-"+i+","+r+"l-"+i+",-"+r+"h-"+s+"Z")}},"star-triangle-up":{n:19,f:function(t,e,n){if(d(e))return o;var r=a(t*l*.8,2),i=a(.8*t,2),s=a(1.6*t,2),c=a(4*t,2),u="A "+c+","+c+" 0 0 1 ";return g(e,n,"M-"+r+","+i+u+r+","+i+u+"0,-"+s+u+"-"+r+","+i+"Z")}},"star-triangle-down":{n:20,f:function(t,e,n){if(d(e))return o;var r=a(t*l*.8,2),i=a(.8*t,2),s=a(1.6*t,2),c=a(4*t,2),u="A "+c+","+c+" 0 0 1 ";return g(e,n,"M"+r+",-"+i+u+"-"+r+",-"+i+u+"0,"+s+u+r+",-"+i+"Z")}},"star-square":{n:21,f:function(t,e,n){if(d(e))return o;var r=a(1.1*t,2),i=a(2*t,2),s="A "+i+","+i+" 0 0 1 ";return g(e,n,"M-"+r+",-"+r+s+"-"+r+","+r+s+r+","+r+s+r+",-"+r+s+"-"+r+",-"+r+"Z")}},"star-diamond":{n:22,f:function(t,e,n){if(d(e))return o;var r=a(1.4*t,2),i=a(1.9*t,2),s="A "+i+","+i+" 0 0 1 ";return g(e,n,"M-"+r+",0"+s+"0,"+r+s+r+",0"+s+"0,-"+r+s+"-"+r+",0Z")}},"diamond-tall":{n:23,f:function(t,e,n){if(d(e))return o;var r=a(.7*t,2),i=a(1.4*t,2);return g(e,n,"M0,"+i+"L"+r+",0L0,-"+i+"L-"+r+",0Z")}},"diamond-wide":{n:24,f:function(t,e,n){if(d(e))return o;var r=a(1.4*t,2),i=a(.7*t,2);return g(e,n,"M0,"+i+"L"+r+",0L0,-"+i+"L-"+r+",0Z")}},hourglass:{n:25,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M"+r+","+r+"H-"+r+"L"+r+",-"+r+"H-"+r+"Z")},noDot:!0},bowtie:{n:26,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M"+r+","+r+"V-"+r+"L-"+r+","+r+"V-"+r+"Z")},noDot:!0},"circle-cross":{n:27,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t,e,n){if(d(e))return o;var r=a(t,2),i=a(t/s,2);return g(e,n,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t,e,n){if(d(e))return o;var r=a(1.3*t,2);return g(e,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM0,-"+r+"V"+r+"M-"+r+",0H"+r)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t,e,n){if(d(e))return o;var r=a(1.3*t,2),i=a(.65*t,2);return g(e,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM-"+i+",-"+i+"L"+i+","+i+"M-"+i+","+i+"L"+i+",-"+i)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t,e,n){if(d(e))return o;var r=a(1.4*t,2);return g(e,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t,e,n){if(d(e))return o;var r=a(1.2*t,2),i=a(.85*t,2);return g(e,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t,e,n){if(d(e))return o;var r=a(t/2,2),i=a(t,2);return g(e,n,"M"+r+","+i+"V-"+i+"M"+(r-i)+",-"+i+"V"+i+"M"+i+","+r+"H-"+i+"M-"+i+","+(r-i)+"H"+i)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t,e,n){if(d(e))return o;var r=a(1.2*t,2),i=a(1.6*t,2),s=a(.8*t,2);return g(e,n,"M-"+r+","+s+"L0,0M"+r+","+s+"L0,0M0,-"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t,e,n){if(d(e))return o;var r=a(1.2*t,2),i=a(1.6*t,2),s=a(.8*t,2);return g(e,n,"M-"+r+",-"+s+"L0,0M"+r+",-"+s+"L0,0M0,"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t,e,n){if(d(e))return o;var r=a(1.2*t,2),i=a(1.6*t,2),s=a(.8*t,2);return g(e,n,"M"+s+","+r+"L0,0M"+s+",-"+r+"L0,0M-"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t,e,n){if(d(e))return o;var r=a(1.2*t,2),i=a(1.6*t,2),s=a(.8*t,2);return g(e,n,"M-"+s+","+r+"L0,0M-"+s+",-"+r+"L0,0M"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t,e,n){if(d(e))return o;var r=a(1.4*t,2);return g(e,n,"M"+r+",0H-"+r)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t,e,n){if(d(e))return o;var r=a(1.4*t,2);return g(e,n,"M0,"+r+"V-"+r)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M"+r+","+r+"L-"+r+",-"+r)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M0,0L-"+r+","+a(2*t,2)+"H"+r+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M0,0L-"+r+",-"+a(2*t,2)+"H"+r+"Z")},noDot:!0},"arrow-left":{n:47,f:function(t,e,n){if(d(e))return o;var r=a(2*t,2),i=a(t,2);return g(e,n,"M0,0L"+r+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-right":{n:48,f:function(t,e,n){if(d(e))return o;var r=a(2*t,2),i=a(t,2);return g(e,n,"M0,0L-"+r+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M-"+r+",0H"+r+"M0,0L-"+r+","+a(2*t,2)+"H"+r+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(t,e,n){if(d(e))return o;var r=a(t,2);return g(e,n,"M-"+r+",0H"+r+"M0,0L-"+r+",-"+a(2*t,2)+"H"+r+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(t,e,n){if(d(e))return o;var r=a(2*t,2),i=a(t,2);return g(e,n,"M0,-"+i+"V"+i+"M0,0L"+r+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(t,e,n){if(d(e))return o;var r=a(2*t,2),i=a(t,2);return g(e,n,"M0,-"+i+"V"+i+"M0,0L-"+r+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(t,e,n){if(d(e))return o;var r=c/2.5,i=2*t*u(r),a=2*t*h(r);return g(e,n,"M0,0L"+-i+","+a+"L"+i+","+a+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(t,e,n){if(d(e))return o;var r=c/4,i=2*t*u(r),a=2*t*h(r);return g(e,n,"M0,0L"+-i+","+a+"A "+2*t+","+2*t+" 0 0 1 "+i+","+a+"Z")},backoff:.4,noDot:!0}},Iy}();Zy.symbolNames=[],Zy.symbolFuncs=[],Zy.symbolBackOffs=[],Zy.symbolNeedLines={},Zy.symbolNoDot={},Zy.symbolNoFill={},Zy.symbolList=[],Object.keys(Hy).forEach((function(t){var e=Hy[t],n=e.n;Zy.symbolList.push(n,String(n),t,n+100,String(n+100),t+"-open"),Zy.symbolNames[n]=t,Zy.symbolFuncs[n]=e.f,Zy.symbolBackOffs[n]=e.backoff||0,e.needLine&&(Zy.symbolNeedLines[n]=!0),e.noDot?Zy.symbolNoDot[n]=!0:Zy.symbolList.push(n+200,String(n+200),t+"-dot",n+300,String(n+300),t+"-open-dot"),e.noFill&&(Zy.symbolNoFill[n]=!0)}));var Wy=Zy.symbolNames.length;function Yy(t,e,n,r){var i=t%100;return Zy.symbolFuncs[i](e,n,r)+(t>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}Zy.symbolNumber=function(t){if(Ay(t))t=+t;else if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=Zy.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=Wy||t>=400?0:Math.floor(Math.max(t,0))};var zy=Uy("~f"),Oy={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function Jy(t,e,n,r,i,a,o,s,l,c){var u,h=i.length;"linear"===r?u={node:"linearGradient",attrs:{x1:o.x,y1:o.y,x2:s.x,y2:s.y,gradientUnits:l?"userSpaceOnUse":"objectBoundingBox"},reversed:c}:"radial"===r&&(u={node:"radialGradient",reversed:c});for(var d=new Array(h),g=0;g<h;g++)u.reversed?d[h-1-g]=[zy(100*(1-i[g][0])),i[g][1]]:d[g]=[zy(100*i[g][0]),i[g][1]];var f=e._fullLayout,p="g"+f._uid+"-"+n,v=f._defs.select(".gradients").selectAll("#"+p).data([r+d.join(";")],wy.identity);v.exit().remove(),v.enter().append(u.node).each((function(){var t=Cy.select(this);u.attrs&&t.attr(u.attrs),t.attr("id",p);var e=t.selectAll("stop").data(d);e.exit().remove(),e.enter().append("stop"),e.each((function(t){var e=Sy(t[1]);Cy.select(this).attr({offset:t[0]+"%","stop-color":ky.tinyRGB(e),"stop-opacity":e.getAlpha()})}))})),t.style(a,cb(p,e)).style(a+"-opacity",null),t.classed("gradient_filled",!0)}Zy.gradient=function(t,e,n,r,i,a){var o=Oy[r];return Jy(t,e,n,o.type,i,a,o.start,o.stop,!1,o.reversed)},Zy.pattern=function(t,e,n,r,i,a,o,s,l,c,u,h){var d="legend"===e;s&&("overlay"===l?(c=s,u=ky.contrast(c)):(c=void 0,u=s));var g,f,p,v,m,y,b=n._fullLayout,x="p"+b._uid+"-"+r,B={},I=Sy(u),F=ky.tinyRGB(I),Q=h*I.getAlpha();switch(i){case"/":g=a*Math.sqrt(2),f=a*Math.sqrt(2),y="path",B={d:p="M-"+g/4+","+f/4+"l"+g/2+",-"+f/2+"M0,"+f+"L"+g+",0M"+g/4*3+","+f/4*5+"l"+g/2+",-"+f/2,opacity:Q,stroke:F,"stroke-width":(v=o*a)+"px"};break;case"\\":g=a*Math.sqrt(2),f=a*Math.sqrt(2),y="path",B={d:p="M"+g/4*3+",-"+f/4+"l"+g/2+","+f/2+"M0,0L"+g+","+f+"M-"+g/4+","+f/4*3+"l"+g/2+","+f/2,opacity:Q,stroke:F,"stroke-width":(v=o*a)+"px"};break;case"x":g=a*Math.sqrt(2),f=a*Math.sqrt(2),p="M-"+g/4+","+f/4+"l"+g/2+",-"+f/2+"M0,"+f+"L"+g+",0M"+g/4*3+","+f/4*5+"l"+g/2+",-"+f/2+"M"+g/4*3+",-"+f/4+"l"+g/2+","+f/2+"M0,0L"+g+","+f+"M-"+g/4+","+f/4*3+"l"+g/2+","+f/2,v=a-a*Math.sqrt(1-o),y="path",B={d:p,opacity:Q,stroke:F,"stroke-width":v+"px"};break;case"|":y="path",y="path",B={d:p="M"+(g=a)/2+",0L"+g/2+","+(f=a),opacity:Q,stroke:F,"stroke-width":(v=o*a)+"px"};break;case"-":y="path",y="path",B={d:p="M0,"+(f=a)/2+"L"+(g=a)+","+f/2,opacity:Q,stroke:F,"stroke-width":(v=o*a)+"px"};break;case"+":y="path",p="M"+(g=a)/2+",0L"+g/2+","+(f=a)+"M0,"+f/2+"L"+g+","+f/2,v=a-a*Math.sqrt(1-o),y="path",B={d:p,opacity:Q,stroke:F,"stroke-width":v+"px"};break;case".":g=a,f=a,m=o<Math.PI/4?Math.sqrt(o*a*a/Math.PI):function(t,e,n,r,i){return r+(i-r)*(t-e)/(n-e)}(o,Math.PI/4,1,a/2,a/Math.sqrt(2)),y="circle",B={cx:g/2,cy:f/2,r:m,opacity:Q,fill:F}}var C=[i||"noSh",c||"noBg",u||"noFg",a,o].join(";"),w=b._defs.select(".patterns").selectAll("#"+x).data([C],wy.identity);w.exit().remove(),w.enter().append("pattern").each((function(){var t=Cy.select(this);if(t.attr({id:x,width:g+"px",height:f+"px",patternUnits:"userSpaceOnUse",patternTransform:d?"scale(0.8)":""}),c){var e=Sy(c),n=ky.tinyRGB(e),r=e.getAlpha(),i=t.selectAll("rect").data([0]);i.exit().remove(),i.enter().append("rect").attr({width:g+"px",height:f+"px",fill:n,"fill-opacity":r})}var a=t.selectAll(y).data([0]);a.exit().remove(),a.enter().append(y).attr(B)})),t.style("fill",cb(x,n)).style("fill-opacity",null),t.classed("pattern_filled",!0)},Zy.initGradients=function(t){var e=t._fullLayout;wy.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),Cy.select(t).selectAll(".gradient_filled").classed("gradient_filled",!1)},Zy.initPatterns=function(t){var e=t._fullLayout;wy.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),Cy.select(t).selectAll(".pattern_filled").classed("pattern_filled",!1)},Zy.getPatternAttr=function(t,e,n){return t&&wy.isArrayOrTypedArray(t)?e<t.length?t[e]:n:t},Zy.pointStyle=function(t,e,n,r){if(t.size()){var i=Zy.makePointStyleFns(e);t.each((function(t){Zy.singlePointStyle(t,Cy.select(this),e,i,n,r)}))}},Zy.singlePointStyle=function(t,e,n,r,i,a){var o=n.marker,s=o.line;if(a&&a.i>=0&&void 0===t.i&&(t.i=a.i),e.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(t):void 0===t.mo?o.opacity:t.mo),r.ms2mrc){var l;l="various"===t.ms||"various"===o.size?3:r.ms2mrc(t.ms),t.mrc=l,r.selectedSizeFn&&(l=t.mrc=r.selectedSizeFn(t));var c=Zy.symbolNumber(t.mx||o.symbol)||0;t.om=c%200>=100;var u=Fb(t,n),h=db(t,n);e.attr("d",Yy(c,l,u,h))}var d,g,f,p=!1;if(t.so)f=s.outlierwidth,g=s.outliercolor,d=o.outliercolor;else{var v=(s||{}).width;f=(t.mlw+1||v+1||(t.trace?(t.trace.marker.line||{}).width:0)+1)-1||0,g="mlc"in t?t.mlcc=r.lineScale(t.mlc):wy.isArrayOrTypedArray(s.color)?ky.defaultLine:s.color,wy.isArrayOrTypedArray(o.color)&&(d=ky.defaultLine,p=!0),d="mc"in t?t.mcc=r.markerScale(t.mc):o.color||o.colors||"rgba(0,0,0,0)",r.selectedColorFn&&(d=r.selectedColorFn(t))}if(t.om)e.call(ky.stroke,d).style({"stroke-width":(f||1)+"px",fill:"none"});else{e.style("stroke-width",(t.isBlank?0:f)+"px");var m=o.gradient,y=t.mgt;y?p=!0:y=m&&m.type,wy.isArrayOrTypedArray(y)&&(y=y[0],Oy[y]||(y=0));var b=o.pattern,x=b&&Zy.getPatternAttr(b.shape,t.i,"");if(y&&"none"!==y){var B=t.mgc;B?p=!0:B=m.color;var I=n.uid;p&&(I+="-"+t.i),Zy.gradient(e,i,I,y,[[0,B],[1,d]],"fill")}else if(x){var F=!1,Q=b.fgcolor;!Q&&a&&a.color&&(Q=a.color,F=!0);var C=Zy.getPatternAttr(Q,t.i,a&&a.color||null),w=Zy.getPatternAttr(b.bgcolor,t.i,null),U=b.fgopacity,A=Zy.getPatternAttr(b.size,t.i,8),S=Zy.getPatternAttr(b.solidity,t.i,.3);F=F||t.mcc||wy.isArrayOrTypedArray(b.shape)||wy.isArrayOrTypedArray(b.bgcolor)||wy.isArrayOrTypedArray(b.fgcolor)||wy.isArrayOrTypedArray(b.size)||wy.isArrayOrTypedArray(b.solidity);var L=n.uid;F&&(L+="-"+t.i),Zy.pattern(e,"point",i,L,x,A,S,t.mcc,b.fillmode,w,C,U)}else wy.isArrayOrTypedArray(d)?ky.fill(e,d[t.i]):ky.fill(e,d);f&&ky.stroke(e,g)}},Zy.makePointStyleFns=function(t){var e={},n=t.marker;return e.markerScale=Zy.tryColorscale(n,""),e.lineScale=Zy.tryColorscale(n,"line"),Ly.traceIs(t,"symbols")&&(e.ms2mrc=Ny.isBubble(t)?Dy(t):function(){return(n.size||6)/2}),t.selectedpoints&&wy.extendFlat(e,Zy.makeSelectedPointStyleFns(t)),e},Zy.makeSelectedPointStyleFns=function(t){var e={},n=t.selected||{},r=t.unselected||{},i=t.marker||{},a=n.marker||{},o=r.marker||{},s=i.opacity,l=a.opacity,c=o.opacity,u=void 0!==l,h=void 0!==c;(wy.isArrayOrTypedArray(s)||u||h)&&(e.selectedOpacityFn=function(t){var e=void 0===t.mo?i.opacity:t.mo;return t.selected?u?l:e:h?c:My*e});var d=i.color,g=a.color,f=o.color;(g||f)&&(e.selectedColorFn=function(t){var e=t.mcc||d;return t.selected?g||e:f||e});var p=i.size,v=a.size,m=o.size,y=void 0!==v,b=void 0!==m;return Ly.traceIs(t,"symbols")&&(y||b)&&(e.selectedSizeFn=function(t){var e=t.mrc||p/2;return t.selected?y?v/2:e:b?m/2:e}),e},Zy.makeSelectedTextStyleFns=function(t){var e={},n=t.selected||{},r=t.unselected||{},i=t.textfont||{},a=n.textfont||{},o=r.textfont||{},s=i.color,l=a.color,c=o.color;return e.selectedTextColorFn=function(t){var e=t.tc||s;return t.selected?l||e:c||(l?e:ky.addOpacity(e,My))},e},Zy.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=Zy.makeSelectedPointStyleFns(e),r=e.marker||{},i=[];n.selectedOpacityFn&&i.push((function(t,e){t.style("opacity",n.selectedOpacityFn(e))})),n.selectedColorFn&&i.push((function(t,e){ky.fill(t,n.selectedColorFn(e))})),n.selectedSizeFn&&i.push((function(t,i){var a=i.mx||r.symbol||0,o=n.selectedSizeFn(i);t.attr("d",Yy(Zy.symbolNumber(a),o,Fb(i,e),db(i,e))),i.mrc2=o})),i.length&&t.each((function(t){for(var e=Cy.select(this),n=0;n<i.length;n++)i[n](e,t)}))}},Zy.tryColorscale=function(t,e){var n=e?wy.nestedProperty(t,e).get():t;if(n){var r=n.color;if((n.colorscale||n._colorAx)&&wy.isArrayOrTypedArray(r))return Gy.makeColorScaleFuncFromTrace(n)}return wy.identity};var Py={start:1,end:-1,middle:0,bottom:1,top:-1};function jy(t,e,n,r,i){var a=Cy.select(t.node().parentNode),o=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",s=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",l=r?r/.8+1:0,c=(Ry.lineCount(t)-1)*Ty+1,u=Py[s]*l,h=.75*n+Py[o]*l+(Py[o]-1)*c*n/2;t.attr("text-anchor",s),i||a.attr("transform",_y(u,h))}function Ky(t,e){var n=t.ts||e.textfont.size;return Ay(n)&&n>0?n:0}Zy.textPointStyle=function(t,e,n){if(t.size()){var r;if(e.selectedpoints){var i=Zy.makeSelectedTextStyleFns(e);r=i.selectedTextColorFn}var a=e.texttemplate,o=n._fullLayout;t.each((function(t){var i=Cy.select(this),s=a?wy.extractOption(t,e,"txt","texttemplate"):wy.extractOption(t,e,"tx","text");if(s||0===s){if(a){var l=e._module.formatLabels,c=l?l(t,e,o):{},u={};Xy(u,e,t.i);var h=e._meta||{};s=wy.texttemplateString(s,c,o._d3locale,u,t,h)}var d=t.tp||e.textposition,g=Ky(t,e),f=r?r(t):t.tc||e.textfont.color;i.call(Zy.font,{family:t.tf||e.textfont.family,weight:t.tw||e.textfont.weight,style:t.ty||e.textfont.style,variant:t.tv||e.textfont.variant,size:g,color:f}).text(s).call(Ry.convertToTspans,n).call(jy,d,g,t.mrc)}else i.remove()}))}},Zy.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=Zy.makeSelectedTextStyleFns(e);t.each((function(t){var r=Cy.select(this),i=n.selectedTextColorFn(t),a=t.tp||e.textposition,o=Ky(t,e);ky.fill(r,i);var s=Ly.traceIs(e,"bar-like");jy(r,a,o,t.mrc2||t.mrc,s)}))}};var qy,$y;function tb(t,e,n){return n&&(t=ob(t)),e?nb(t[1]):eb(t[0])}function eb(t){var e=Cy.round(t,2);return qy=e,e}function nb(t){var e=Cy.round(t,2);return $y=e,e}function rb(t,e,n,r){var i=t[0]-e[0],a=t[1]-e[1],o=n[0]-e[0],s=n[1]-e[1],l=Math.pow(i*i+a*a,.25),c=Math.pow(o*o+s*s,.25),u=(c*c*i-l*l*o)*r,h=(c*c*a-l*l*s)*r,d=3*c*(l+c),g=3*l*(l+c);return[[eb(e[0]+(d&&u/d)),nb(e[1]+(d&&h/d))],[eb(e[0]-(g&&u/g)),nb(e[1]-(g&&h/g))]]}Zy.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var n,r="M"+t[0],i=[];for(n=1;n<t.length-1;n++)i.push(rb(t[n-1],t[n],t[n+1],e));for(r+="Q"+i[0][0]+" "+t[1],n=2;n<t.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+t[n];return r+="Q"+i[t.length-3][1]+" "+t[t.length-1]},Zy.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var n,r="M"+t[0],i=t.length-1,a=[rb(t[i],t[0],t[1],e)];for(n=1;n<i;n++)a.push(rb(t[n-1],t[n],t[n+1],e));for(a.push(rb(t[i-1],t[i],t[0],e)),n=1;n<=i;n++)r+="C"+a[n-1][1]+" "+a[n][0]+" "+t[n];return r+="C"+a[i][1]+" "+a[0][0]+" "+t[0]+"Z"};var ib={hv:function(t,e,n){return"H"+eb(e[0])+"V"+tb(e,1,n)},vh:function(t,e,n){return"V"+nb(e[1])+"H"+tb(e,0,n)},hvh:function(t,e,n){return"H"+eb((t[0]+e[0])/2)+"V"+nb(e[1])+"H"+tb(e,0,n)},vhv:function(t,e,n){return"V"+nb((t[1]+e[1])/2)+"H"+eb(e[0])+"V"+tb(e,1,n)}},ab=function(t,e,n){return"L"+tb(e,0,n)+","+tb(e,1,n)};function ob(t,e){var n=t.backoff,r=t.trace,i=t.d,a=t.i;if(n&&r&&r.marker&&r.marker.angle%360==0&&r.line&&"spline"!==r.line.shape){var o=wy.isArrayOrTypedArray(n),s=t,l=e?e[0]:qy||0,c=e?e[1]:$y||0,u=s[0],h=s[1],d=u-l,g=h-c,f=Math.atan2(g,d),p=o?n[a]:n;if("auto"===p){var v=s.i;"scatter"===r.type&&v--;var m=s.marker,y=m.symbol;wy.isArrayOrTypedArray(y)&&(y=y[v]);var b=m.size;wy.isArrayOrTypedArray(b)&&(b=b[v]),p=m?Zy.symbolBackOffs[Zy.symbolNumber(y)]*b:0,p+=Zy.getMarkerStandoff(i[v],r)||0}var x=u-p*Math.cos(f),B=h-p*Math.sin(f);(x<=u&&x>=l||x>=u&&x<=l)&&(B<=h&&B>=c||B>=h&&B<=c)&&(t=[x,B])}return t}Zy.steps=function(t){var e=ib[t]||ab;return function(t){for(var n="M"+eb(t[0][0])+","+nb(t[0][1]),r=t.length,i=1;i<r;i++)n+=e(t[i-1],t[i],i===r-1);return n}},Zy.applyBackoff=ob,Zy.makeTester=function(){var t=wy.ensureSingleById(Cy.select("body"),"svg","js-plotly-tester",(function(t){t.attr(Ey.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})})),e=wy.ensureSingle(t,"path","js-reference-point",(function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})}));Zy.tester=t,Zy.testref=e},Zy.savedBBoxes={};var sb=0;function lb(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}function cb(t,e){if(!t)return null;var n=e._context,r=n._exportedPlot?"":n._baseUrl||"";return r?"url('"+r+"#"+t+"')":"url(#"+t+")"}Zy.bBox=function(t,e,n){var r,i,a;if(n||(n=lb(t)),n){if(r=Zy.savedBBoxes[n])return wy.extendFlat({},r)}else if(1===t.childNodes.length){var o=t.childNodes[0];if(n=lb(o)){var s=+o.getAttribute("x")||0,l=+o.getAttribute("y")||0,c=o.getAttribute("transform");if(!c){var u=Zy.bBox(o,!1,n);return s&&(u.left+=s,u.right+=s),l&&(u.top+=l,u.bottom+=l),u}if(n+="~"+s+"~"+l+"~"+c,r=Zy.savedBBoxes[n])return wy.extendFlat({},r)}}e?i=t:(a=Zy.tester.node(),i=t.cloneNode(!0),a.appendChild(i)),Cy.select(i).attr("transform",null).call(Ry.positionText,0,0);var h=i.getBoundingClientRect(),d=Zy.testref.node().getBoundingClientRect();e||a.removeChild(i);var g={height:h.height,width:h.width,left:h.left-d.left,top:h.top-d.top,right:h.right-d.left,bottom:h.bottom-d.top};return sb>=1e4&&(Zy.savedBBoxes={},sb=0),n&&(Zy.savedBBoxes[n]=g),sb++,wy.extendFlat({},g)},Zy.setClipUrl=function(t,e,n){t.attr("clip-path",cb(e,n))},Zy.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,(function(t,e,n){return[e,n].join(" ")})).split(" ");return{x:+e[0]||0,y:+e[1]||0}},Zy.setTranslate=function(t,e,n){var r=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",a=t[r]("transform")||"";return e=e||0,n=n||0,a=a.replace(/(\btranslate\(.*?\);?)/,"").trim(),a=(a+=_y(e,n)).trim(),t[i]("transform",a),a},Zy.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,(function(t,e,n){return[e,n].join(" ")})).split(" ");return{x:+e[0]||1,y:+e[1]||1}},Zy.setScale=function(t,e,n){var r=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",a=t[r]("transform")||"";return e=e||1,n=n||1,a=a.replace(/(\bscale\(.*?\);?)/,"").trim(),a=(a+="scale("+e+","+n+")").trim(),t[i]("transform",a),a};var ub=/\s*sc.*/;Zy.setPointGroupScale=function(t,e,n){if(e=e||1,n=n||1,t){var r=1===e&&1===n?"":"scale("+e+","+n+")";t.each((function(){var t=(this.getAttribute("transform")||"").replace(ub,"");t=(t+=r).trim(),this.setAttribute("transform",t)}))}};var hb=/translate\([^)]*\)\s*$/;function db(t,e){var n;return t&&(n=t.mf),void 0===n&&(n=e.marker&&e.marker.standoff||0),e._geo||e._xA?n:-n}Zy.setTextPointsScale=function(t,e,n){t&&t.each((function(){var t,r=Cy.select(this),i=r.select("text");if(i.node()){var a=parseFloat(i.attr("x")||0),o=parseFloat(i.attr("y")||0),s=(r.attr("transform")||"").match(hb);t=1===e&&1===n?[]:[_y(a,o),"scale("+e+","+n+")",_y(-a,-o)],s&&t.push(s),r.attr("transform",t.join(""))}}))},Zy.getMarkerStandoff=db;var gb,fb,pb,vb,mb,yb,bb=Math.atan2,xb=Math.cos,Bb=Math.sin;function Ib(t,e){var n=e[0],r=e[1];return[n*xb(t)-r*Bb(t),n*Bb(t)+r*xb(t)]}function Fb(t,e){var n,r,i=t.ma;void 0===i&&((i=e.marker.angle)&&!wy.isArrayOrTypedArray(i)||(i=0));var a=e.marker.angleref;if("previous"===a||"north"===a){if(e._geo){var o=e._geo.project(t.lonlat);n=o[0],r=o[1]}else{var s=e._xA,l=e._yA;if(!s||!l)return 90;n=s.c2p(t.x),r=l.c2p(t.y)}if(e._geo){var c,u=t.lonlat[0],h=t.lonlat[1],d=e._geo.project([u,h+1e-5]),g=e._geo.project([u+1e-5,h]),f=bb(g[1]-r,g[0]-n),p=bb(d[1]-r,d[0]-n);if("north"===a)c=i/180*Math.PI;else if("previous"===a){var v=u/180*Math.PI,m=h/180*Math.PI,y=gb/180*Math.PI,b=fb/180*Math.PI,x=y-v,B=xb(b)*Bb(x),I=Bb(b)*xb(m)-xb(b)*Bb(m)*xb(x);c=-bb(B,I)-Math.PI,gb=u,fb=h}var F=Ib(f,[xb(c),0]),Q=Ib(p,[Bb(c),0]);i=bb(F[1]+Q[1],F[0]+Q[0])/Math.PI*180,"previous"!==a||yb===e.uid&&t.i===mb+1||(i=null)}if("previous"===a&&!e._geo)if(yb===e.uid&&t.i===mb+1&&Ay(n)&&Ay(r)){var C=n-pb,w=r-vb,U=e.line&&e.line.shape||"",A=U.slice(U.length-1);"h"===A&&(w=0),"v"===A&&(C=0),i+=bb(w,C)/Math.PI*180+90}else i=null}return pb=n,vb=r,mb=t.i,yb=e.uid,i}Zy.getMarkerAngle=Fb;var Qb=rv.exports,Cb=uo,wb=Ac,Ub=qp,Ab=hh,Sb=yf,Lb=Sb.strTranslate,kb=Qb,Gb=Pu,_b=tv,Rb=ju,Eb=nv.OPPOSITE_SIDE,Tb=/ [XY][0-9]* /;var Mb={draw:function(t,e,n){var r,i=n.propContainer,a=n.propName,o=n.placeholder,s=n.traceIndex,l=n.avoid||{},c=n.attributes,u=n.transform,h=n.containerGroup,d=t._fullLayout,g=1,f=!1,p=i.title,v=(p&&p.text?p.text:"").trim(),m=p&&p.font?p.font:{},y=m.family,b=m.size,x=m.color,B=m.weight,I=m.style,F=m.variant;"title.text"===a?r="titleText":-1!==a.indexOf("axis")?r="axisTitleText":a.indexOf(!0)&&(r="colorbarTitleText");var Q=t._context.edits[r];""===v?g=0:v.replace(Tb," % ")===o.replace(Tb," % ")&&(g=.2,f=!0,Q||(v="")),n._meta?v=Sb.templateString(v,n._meta):d._meta&&(v=Sb.templateString(v,d._meta));var C,w=v||Q;h||(h=Sb.ensureSingle(d._infolayer,"g","g-"+e),C=d._hColorbarMoveTitle);var U=h.selectAll("text").data(w?[0]:[]);if(U.enter().append("text"),U.text(v).attr("class",e),U.exit().remove(),!w)return h;function A(t){Sb.syncOrAsync([S,L],t)}function S(e){var n;return!u&&C&&(u={}),u?(n="",u.rotate&&(n+="rotate("+[u.rotate,c.x,c.y]+")"),(u.offset||C)&&(n+=Lb(0,(u.offset||0)-(C||0)))):n=null,e.attr("transform",n),e.style({"font-family":y,"font-size":Cb.round(b,2)+"px",fill:Gb.rgb(x),opacity:g*Gb.opacity(x),"font-weight":B,"font-style":I,"font-variant":F}).attr(c).call(_b.convertToTspans,t),Ub.previousPromises(t)}function L(e){var n=Cb.select(e.node().parentNode);if(l&&l.selection&&l.side&&v){n.attr("transform",null);var r=Eb[l.side],a="left"===l.side||"top"===l.side?-1:1,o=wb(l.pad)?l.pad:2,s=kb.bBox(n.node()),c={t:0,b:0,l:0,r:0},u=t._fullLayout._reservedMargin;for(var h in u)for(var g in u[h]){var f=u[h][g];c[g]=Math.max(c[g],f)}var p={left:c.l,top:c.t,right:d.width-c.r,bottom:d.height-c.b},m=l.maxShift||a*(p[l.side]-s[l.side]),y=0;if(m<0)y=m;else{var b=l.offsetLeft||0,x=l.offsetTop||0;s.left-=b,s.right-=b,s.top-=x,s.bottom-=x,l.selection.each((function(){var t=kb.bBox(this);Sb.bBoxIntersect(s,t,o)&&(y=Math.max(y,a*(t[l.side]-s[r])+o))})),y=Math.min(m,y),i._titleScoot=Math.abs(y)}if(y>0||m<0){var B={left:[-y,0],right:[y,0],top:[0,-y],bottom:[0,y]}[l.side];n.attr("transform",Lb(B[0],B[1]))}}}return U.call(A),Q&&(v?U.on(".opacity",null):(g=0,f=!0,U.text(o).on("mouseover.opacity",(function(){Cb.select(this).transition().duration(Rb.SHOW_PLACEHOLDER).style("opacity",1)})).on("mouseout.opacity",(function(){Cb.select(this).transition().duration(Rb.HIDE_PLACEHOLDER).style("opacity",0)}))),U.call(_b.makeEditable,{gd:t}).on("edit",(function(e){void 0!==s?Ab.call("_guiRestyle",t,a,e,s):Ab.call("_guiRelayout",t,a,e)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(A)})).on("input",(function(t){this.text(t||" ").call(_b.positionText,c.x,c.y)}))),U.classed("js-placeholder",f),h}},Nb=uo,Db=lc.utcFormat,Xb=yf,Zb=Xb.numberFormat,Vb=Ac,Hb=Xb.cleanNumber,Wb=Xb.ms2DateTime,Yb=Xb.dateTime2ms,zb=Xb.ensureNumber,Ob=Xb.isArrayOrTypedArray,Jb=Sc,Pb=Jb.FP_SAFE,jb=Jb.BADNUM,Kb=Jb.LOG_CLIP,qb=Jb.ONEWEEK,$b=Jb.ONEDAY,tx=Jb.ONEHOUR,ex=Jb.ONEMIN,nx=Jb.ONESEC,rx=op,ix=lp,ax=ix.HOUR_PATTERN,ox=ix.WEEKDAY_PATTERN;function sx(t){return Math.pow(10,t)}function lx(t){return null!=t}var cx,ux,hx=function(t,e){e=e||{};var n=t._id||"x",r=n.charAt(0);function i(e,n){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&n&&t.range&&2===t.range.length){var r=t.range[0],i=t.range[1];return.5*(r+i-2*Kb*Math.abs(r-i))}return jb}function a(e,n,r,i){if((i||{}).msUTC&&Vb(e))return+e;var a=Yb(e,r||t.calendar);if(a===jb){if(!Vb(e))return jb;e=+e;var o=Math.floor(10*Xb.mod(e+.05,1)),s=Math.round(e-o/10);a=Yb(new Date(s))+o/10}return a}function o(e,n,r){return Wb(e,n,r||t.calendar)}function s(e){return t._categories[Math.round(e)]}function l(e){if(lx(e)){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push("number"==typeof e?String(e):e);var n=t._categories.length-1;return t._categoriesMap[e]=n,n}return jb}function c(e){if(t._categoriesMap)return t._categoriesMap[e]}function u(t){var e=c(t);return void 0!==e?e:Vb(t)?+t:void 0}function h(t){return Vb(t)?+t:c(t)}function d(t,e,n){return Nb.round(n+e*t,2)}function g(t,e,n){return(t-n)/e}var f=function(e){return Vb(e)?d(e,t._m,t._b):jb},p=function(e){return g(e,t._m,t._b)};if(t.rangebreaks){var v="y"===r;f=function(e){if(!Vb(e))return jb;var n=t._rangebreaks.length;if(!n)return d(e,t._m,t._b);var r=v;t.range[0]>t.range[1]&&(r=!r);for(var i=r?-1:1,a=i*e,o=0,s=0;s<n;s++){var l=i*t._rangebreaks[s].min,c=i*t._rangebreaks[s].max;if(a<l)break;if(!(a>c)){o=a<(l+c)/2?s:s+1;break}o=s+1}var u=t._B[o]||0;return isFinite(u)?d(e,t._m2,u):0},p=function(e){var n=t._rangebreaks.length;if(!n)return g(e,t._m,t._b);for(var r=0,i=0;i<n&&!(e<t._rangebreaks[i].pmin);i++)e>t._rangebreaks[i].pmax&&(r=i+1);return g(e,t._m2,t._B[r])}}t.c2l="log"===t.type?i:zb,t.l2c="log"===t.type?sx:zb,t.l2p=f,t.p2l=p,t.c2p="log"===t.type?function(t,e){return f(i(t,e))}:f,t.p2c="log"===t.type?function(t){return sx(p(t))}:p,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=Hb,t.c2d=t.c2r=t.l2d=t.l2r=zb,t.d2p=t.r2p=function(e){return t.l2p(Hb(e))},t.p2d=t.p2r=p,t.cleanPos=zb):"log"===t.type?(t.d2r=t.d2l=function(t,e){return i(Hb(t),e)},t.r2d=t.r2c=function(t){return sx(Hb(t))},t.d2c=t.r2l=Hb,t.c2d=t.l2r=zb,t.c2r=i,t.l2d=sx,t.d2p=function(e,n){return t.l2p(t.d2r(e,n))},t.p2d=function(t){return sx(p(t))},t.r2p=function(e){return t.l2p(Hb(e))},t.p2r=p,t.cleanPos=zb):"date"===t.type?(t.d2r=t.r2d=Xb.identity,t.d2c=t.r2c=t.d2l=t.r2l=a,t.c2d=t.c2r=t.l2d=t.l2r=o,t.d2p=t.r2p=function(e,n,r){return t.l2p(a(e,0,r))},t.p2d=t.p2r=function(t,e,n){return o(p(t),e,n)},t.cleanPos=function(e){return Xb.cleanDate(e,jb,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=l,t.r2d=t.c2d=t.l2d=s,t.d2r=t.d2l_noadd=u,t.r2c=function(e){var n=h(e);return void 0!==n?n:t.fraction2r(.5)},t.l2r=t.c2r=zb,t.r2l=h,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return s(p(t))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(t){return"string"==typeof t&&""!==t?t:zb(t)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=s,t.d2r=t.d2l_noadd=u,t.r2c=function(e){var n=u(e);return void 0!==n?n:t.fraction2r(.5)},t.r2c_just_indices=c,t.l2r=t.c2r=zb,t.r2l=u,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return s(p(t))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(t){return Array.isArray(t)||"string"==typeof t&&""!==t?t:zb(t)},t.setupMultiCategory=function(i){var a,o,s=t._traceIndices,c=t._matchGroup;if(c&&0===t._categories.length)for(var u in c)if(u!==n){var h=e[rx.id2name(u)];s=s.concat(h._traceIndices)}var d=[[0,{}],[0,{}]],g=[];for(a=0;a<s.length;a++){var f=i[s[a]];if(r in f){var p=f[r],v=f._length||Xb.minRowLength(p);if(Ob(p[0])&&Ob(p[1]))for(o=0;o<v;o++){var m=p[0][o],y=p[1][o];lx(m)&&lx(y)&&(g.push([m,y]),m in d[0][1]||(d[0][1][m]=d[0][0]++),y in d[1][1]||(d[1][1][y]=d[1][0]++))}}}for(g.sort((function(t,e){var n=d[0][1],r=n[t[0]]-n[e[0]];if(r)return r;var i=d[1][1];return i[t[1]]-i[e[1]]})),a=0;a<g.length;a++)l(g[a])}),t.fraction2r=function(e){var n=t.r2l(t.range[0]),r=t.r2l(t.range[1]);return t.l2r(n+e*(r-n))},t.r2fraction=function(e){var n=t.r2l(t.range[0]),r=t.r2l(t.range[1]);return(t.r2l(e)-n)/(r-n)},t.limitRange=function(e){var n=t.minallowed,r=t.maxallowed;if(void 0!==n||void 0!==r){e||(e="range");var i=Xb.nestedProperty(t,e).get(),a=Xb.simpleMap(i,t.r2l),o=a[1]<a[0];o&&a.reverse();var s=Xb.simpleMap([n,r],t.r2l);if(void 0!==n&&a[0]<s[0]&&(i[o?1:0]=n),void 0!==r&&a[1]>s[1]&&(i[o?0:1]=r),i[0]===i[1]){var l=t.l2r(n),c=t.l2r(r);if(void 0!==n){var u=l+1;void 0!==r&&(u=Math.min(u,c)),i[o?1:0]=u}if(void 0!==r){var h=c+1;void 0!==n&&(h=Math.max(h,l)),i[o?0:1]=h}}}},t.cleanRange=function(e,n){t._cleanRange(e,n),t.limitRange(e)},t._cleanRange=function(e,n){n||(n={}),e||(e="range");var i,a,o=Xb.nestedProperty(t,e).get();if(a=(a="date"===t.type?Xb.dfltRange(t.calendar):"y"===r?ix.DFLTRANGEY:"realaxis"===t._name?[0,1]:n.dfltRange||ix.DFLTRANGEX).slice(),"tozero"!==t.rangemode&&"nonnegative"!==t.rangemode||(a[0]=0),o&&2===o.length){var s=null===o[0],l=null===o[1];for("date"!==t.type||t.autorange||(o[0]=Xb.cleanDate(o[0],jb,t.calendar),o[1]=Xb.cleanDate(o[1],jb,t.calendar)),i=0;i<2;i++)if("date"===t.type){if(!Xb.isDateTime(o[i],t.calendar)){t[e]=a;break}if(t.r2l(o[0])===t.r2l(o[1])){var c=Xb.constrain(t.r2l(o[0]),Xb.MIN_MS+1e3,Xb.MAX_MS-1e3);o[0]=t.l2r(c-1e3),o[1]=t.l2r(c+1e3);break}}else{if(!Vb(o[i])){if(s||l||!Vb(o[1-i])){t[e]=a;break}o[i]=o[1-i]*(i?10:.1)}if(o[i]<-Pb?o[i]=-Pb:o[i]>Pb&&(o[i]=Pb),o[0]===o[1]){var u=Math.max(1,Math.abs(1e-6*o[0]));o[0]-=u,o[1]+=u}}}else Xb.nestedProperty(t,e).set(a)},t.setScale=function(n){var i=e._size;if(t.overlaying){var a=rx.getFromId({_fullLayout:e},t.overlaying);t.domain=a.domain}var o=n&&t._r?"_r":"range",s=t.calendar;t.cleanRange(o);var l,c,u=t.r2l(t[o][0],s),h=t.r2l(t[o][1],s),d="y"===r;if((d?(t._offset=i.t+(1-t.domain[1])*i.h,t._length=i.h*(t.domain[1]-t.domain[0]),t._m=t._length/(u-h),t._b=-t._m*h):(t._offset=i.l+t.domain[0]*i.w,t._length=i.w*(t.domain[1]-t.domain[0]),t._m=t._length/(h-u),t._b=-t._m*u),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks)&&(t._rangebreaks=t.locateBreaks(Math.min(u,h),Math.max(u,h)),t._rangebreaks.length)){for(l=0;l<t._rangebreaks.length;l++)c=t._rangebreaks[l],t._lBreaks+=Math.abs(c.max-c.min);var g=d;u>h&&(g=!g),g&&t._rangebreaks.reverse();var p=g?-1:1;for(t._m2=p*t._length/(Math.abs(h-u)-t._lBreaks),t._B.push(-t._m2*(d?h:u)),l=0;l<t._rangebreaks.length;l++)c=t._rangebreaks[l],t._B.push(t._B[t._B.length-1]-p*t._m2*(c.max-c.min));for(l=0;l<t._rangebreaks.length;l++)(c=t._rangebreaks[l]).pmin=f(c.min),c.pmax=f(c.max)}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(e){var n,r,i,a,o,s=t.rangebreaks||[];s._cachedPatterns||(s._cachedPatterns=s.map((function(e){return e.enabled&&e.bounds?Xb.simpleMap(e.bounds,e.pattern?Hb:t.d2c):null}))),s._cachedValues||(s._cachedValues=s.map((function(e){return e.enabled&&e.values?Xb.simpleMap(e.values,t.d2c).sort(Xb.sorterAsc):null})));for(var l=0;l<s.length;l++){var c=s[l];if(c.enabled)if(c.bounds){var u=c.pattern;switch(r=(n=s._cachedPatterns[l])[0],i=n[1],u){case ox:a=(o=new Date(e)).getUTCDay(),r>i&&(i+=7,a<r&&(a+=7));break;case ax:a=(o=new Date(e)).getUTCHours()+(o.getUTCMinutes()/60+o.getUTCSeconds()/3600+o.getUTCMilliseconds()/36e5),r>i&&(i+=24,a<r&&(a+=24));break;case"":a=e}if(a>=r&&a<i)return jb}else for(var h=s._cachedValues[l],d=0;d<h.length;d++)if(i=(r=h[d])+c.dvalue,e>=r&&e<i)return jb}return e},t.locateBreaks=function(e,n){var r,i,a,o,s=[];if(!t.rangebreaks)return s;var l=t.rangebreaks.slice().sort((function(t,e){return t.pattern===ox&&e.pattern===ax?-1:e.pattern===ox&&t.pattern===ax?1:0})),c=function(t,r){if((t=Xb.constrain(t,e,n))!==(r=Xb.constrain(r,e,n))){for(var i=!0,a=0;a<s.length;a++){var o=s[a];t<o.max&&r>=o.min&&(t<o.min&&(o.min=t),r>o.max&&(o.max=r),i=!1)}i&&s.push({min:t,max:r})}};for(r=0;r<l.length;r++){var u=l[r];if(u.enabled)if(u.bounds){var h=e,d=n;u.pattern&&(h=Math.floor(h)),a=(i=Xb.simpleMap(u.bounds,u.pattern?Hb:t.r2l))[0],o=i[1];var g,f,p=new Date(h);switch(u.pattern){case ox:f=qb,g=(o-a+(o<a?7:0))*$b,h+=a*$b-(p.getUTCDay()*$b+p.getUTCHours()*tx+p.getUTCMinutes()*ex+p.getUTCSeconds()*nx+p.getUTCMilliseconds());break;case ax:f=$b,g=(o-a+(o<a?24:0))*tx,h+=a*tx-(p.getUTCHours()*tx+p.getUTCMinutes()*ex+p.getUTCSeconds()*nx+p.getUTCMilliseconds());break;default:h=Math.min(i[0],i[1]),g=f=(d=Math.max(i[0],i[1]))-h}for(var v=h;v<d;v+=f)c(v,v+g)}else for(var m=Xb.simpleMap(u.values,t.d2c),y=0;y<m.length;y++)c(a=m[y],o=a+u.dvalue)}return s.sort((function(t,e){return t.min-e.min})),s},t.makeCalcdata=function(e,n,r){var i,a,o,s,l=t.type,u="date"===l&&e[n+"calendar"];if(n in e){if(i=e[n],s=e._length||Xb.minRowLength(i),Xb.isTypedArray(i)&&("linear"===l||"log"===l)){if(s===i.length)return i;if(i.subarray)return i.subarray(0,s)}if("multicategory"===l)return function(t,e){for(var n=new Array(e),r=0;r<e;r++){var i=(t[0]||[])[r],a=(t[1]||[])[r];n[r]=c([i,a])}return n}(i,s);for(a=new Array(s),o=0;o<s;o++)a[o]=t.d2c(i[o],0,u,r)}else{var h=n+"0"in e?t.d2c(e[n+"0"],0,u):0,d=e["d"+n]?Number(e["d"+n]):1;for(i=e[{x:"y",y:"x"}[n]],s=e._length||i.length,a=new Array(s),o=0;o<s;o++)a[o]=h+o*d}if(t.rangebreaks)for(o=0;o<s;o++)a[o]=t.maskBreaks(a[o]);return a},t.isValidRange=function(e,n){return Array.isArray(e)&&2===e.length&&(n&&null===e[0]||Vb(t.r2l(e[0])))&&(n&&null===e[1]||Vb(t.r2l(e[1])))},t.getAutorangeDflt=function(e,n){var r=!t.isValidRange(e,"nullOk");return r&&n&&n.reverseDflt?r="reversed":e&&(null===e[0]&&null===e[1]?r=!0:null===e[0]&&null!==e[1]?r="min":null!==e[0]&&null===e[1]&&(r="max")),r},t.isReversed=function(){var e=t.autorange;return"reversed"===e||"min reversed"===e||"max reversed"===e},t.isPtWithinRange=function(e,n){var i=t.c2l(e[r],null,n),a=t.r2l(t.range[0]),o=t.r2l(t.range[1]);return a<o?a<=i&&i<=o:o<=i&&i<=a},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var n=t._matchGroup;if(n){var r=null,i=null;for(var a in n){var o=e[rx.id2name(a)];if(o._categories){r=o._categories,i=o._categoriesMap;break}}r&&i?(t._categories=r,t._categoriesMap=i):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var s=0;s<t._initialCategories.length;s++)l(t._initialCategories[s])},t.sortByInitialCategories=function(){var r=[];if(t._emptyCategories(),t._initialCategories)for(var i=0;i<t._initialCategories.length;i++)l(t._initialCategories[i]);r=r.concat(t._traceIndices);var a=t._matchGroup;for(var o in a)if(n!==o){var s=e[rx.id2name(o)];s._categories=t._categories,s._categoriesMap=t._categoriesMap,r=r.concat(s._traceIndices)}return r};var m=e._d3locale;"date"===t.type&&(t._dateFormat=m?m.timeFormat:Db,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=m?m.numberFormat:Zb,delete t._minDtick,delete t._forceTick0},dx=Ac,gx=yf,fx=Sc.BADNUM,px=gx.isArrayOrTypedArray,vx=gx.isDateTime,mx=gx.cleanNumber,yx=Math.round,bx=function(t,e,n){var r=t,i=n.noMultiCategory;if(px(r)&&!r.length)return"-";if(!i&&function(t){return px(t[0])&&px(t[1])}(r))return"multicategory";if(i&&Array.isArray(r[0])){for(var a=[],o=0;o<r.length;o++)if(px(r[o]))for(var s=0;s<r[o].length;s++)a.push(r[o][s]);r=a}if(function(t,e){for(var n=t.length,r=Bx(n),i=0,a=0,o={},s=0;s<n;s+=r){var l=t[yx(s)],c=String(l);o[c]||(o[c]=1,vx(l,e)&&i++,dx(l)&&a++)}return i>2*a}(r,e))return"date";var l="strict"!==n.autotypenumbers;return function(t,e){for(var n=t.length,r=Bx(n),i=0,a=0,o={},s=0;s<n;s+=r){var l=t[yx(s)],c=String(l);if(!o[c]){o[c]=1;var u=typeof l;"boolean"===u?a++:(e?mx(l)!==fx:"number"===u)?i++:"string"===u&&a++}}return a>2*i}(r,l)?"category":function(t,e){for(var n=t.length,r=0;r<n;r++)if(xx(t[r],e))return!0;return!1}(r,l)?"linear":"-"};function xx(t,e){return e?dx(t):"number"==typeof t}function Bx(t){return Math.max(1,(t-1)/1e3)}function Ix(){if(ux)return cx;ux=1;var t=uo,e=Ac,n=yf,r=Sc.FP_SAFE,i=hh,a=Qb,o=op,s=o.getFromId,l=o.isLinked;function c(t,e){var r,i,a=[],o=t._fullLayout,s=h(o,e,0),l=h(o,e,1),c=g(t,e),d=c.min,f=c.max;if(0===d.length||0===f.length)return n.simpleMap(e.range,e.r2l);var p=d[0].val,v=f[0].val;for(r=1;r<d.length&&p===v;r++)p=Math.min(p,d[r].val);for(r=1;r<f.length&&p===v;r++)v=Math.max(v,f[r].val);var m=e.autorange,y="reversed"===m||"min reversed"===m||"max reversed"===m;if(!y&&e.range){var b=n.simpleMap(e.range,e.r2l);y=b[1]<b[0]}"reversed"===e.autorange&&(e.autorange=!0);var x,I,F,Q,C,w,U=e.rangemode,A="tozero"===U,S="nonnegative"===U,L=e._length,k=L/10,G=0;for(r=0;r<d.length;r++)for(x=d[r],i=0;i<f.length;i++)(w=(I=f[i]).val-x.val-u(e,x.val,I.val))>0&&((C=L-s(x)-l(I))>k?w/C>G&&(F=x,Q=I,G=w/C):w/L>G&&(F={val:x.val,nopad:1},Q={val:I.val,nopad:1},G=w/L));if(p===v){var _=p-1,R=p+1;if(A)if(0===p)a=[0,1];else{var E=(p>0?f:d).reduce((function(t,e){return Math.max(t,l(e))}),0),T=p/(1-Math.min(.5,E/L));a=p>0?[0,T]:[T,0]}else a=S?[Math.max(0,_),Math.max(1,R)]:[_,R]}else A?(F.val>=0&&(F={val:0,nopad:1}),Q.val<=0&&(Q={val:0,nopad:1})):S&&(F.val-G*s(F)<0&&(F={val:0,nopad:1}),Q.val<=0&&(Q={val:1,nopad:1})),G=(Q.val-F.val-u(e,x.val,I.val))/(L-s(F)-l(Q)),a=[F.val-G*s(F),Q.val+G*l(Q)];return a=B(a,e),e.limitRange&&e.limitRange(),y&&a.reverse(),n.simpleMap(a,e.l2r||Number)}function u(t,e,n){var r=0;if(t.rangebreaks)for(var i=t.locateBreaks(e,n),a=0;a<i.length;a++){var o=i[a];r+=o.max-o.min}return r}function h(e,r,i){var o=.05*r._length,s=r._anchorAxis||{};if(-1!==(r.ticklabelposition||"").indexOf("inside")||-1!==(s.ticklabelposition||"").indexOf("inside")){var c=r.isReversed();if(!c){var u=n.simpleMap(r.range,r.r2l);c=u[1]<u[0]}c&&(i=!i)}var h=0;return l(e,r._id)||(h=function(e,r,i){var o=0,s="x"===r._id.charAt(0);for(var l in e._plots){var c=e._plots[l];if(r._id===c.xaxis._id||r._id===c.yaxis._id){var u=(s?c.yaxis:c.xaxis)||{};if(-1!==(u.ticklabelposition||"").indexOf("inside")&&(!i&&("left"===u.side||"bottom"===u.side)||i&&("top"===u.side||"right"===u.side))){if(u._vals){var h=n.deg2rad(u._tickAngles[u._id+"tick"]||0),g=Math.abs(Math.cos(h)),f=Math.abs(Math.sin(h));if(!u._vals[0].bb){var p=u._id+"tick";u._selections[p].each((function(e){var n=t.select(this);n.select(".text-math-group").empty()&&(e.bb=a.bBox(n.node()))}))}for(var v=0;v<u._vals.length;v++){var m=u._vals[v].bb;if(m){var y=2*d+m.width,b=2*d+m.height;o=Math.max(o,s?Math.max(y*g,b*f):Math.max(b*g,y*f))}}}"inside"===u.ticks&&"inside"===u.ticklabelposition&&(o+=u.ticklen||0)}}}return o}(e,r,i)),o=Math.max(h,o),"domain"===r.constrain&&r._inputDomain&&(o*=(r._inputDomain[1]-r._inputDomain[0])/(r.domain[1]-r.domain[0])),function(t){return t.nopad?0:t.pad+(t.extrapad?o:h)}}cx={applyAutorangeOptions:B,getAutoRange:c,makePadFn:h,doAutoRange:function(t,e,r){if(e.setScale(),e.autorange){e.range=r?r.slice():c(t,e),e._r=e.range.slice(),e._rl=n.simpleMap(e._r,e.r2l);var a=e._input,o={};o[e._attr+".range"]=e.range,o[e._attr+".autorange"]=e.autorange,i.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,o),a.range=e.range.slice(),a.autorange=e.autorange}var s=e._anchorAxis;if(s&&s.rangeslider){var l=s.rangeslider[e._name];l&&"auto"===l.rangemode&&(l.range=c(t,e)),s._input.rangeslider[e._name]=n.extendFlat({},l)}},findExtremes:function(t,n,i){i||(i={});t._m||t.setScale();var a,o,s,l,c,u,h,d,g,v=[],y=[],b=n.length,x=i.padded||!1,B=i.tozero&&("linear"===t.type||"-"===t.type),I="log"===t.type,F=!1,Q=i.vpadLinearized||!1;function C(t){if(Array.isArray(t))return F=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var w=C((t._m>0?i.ppadplus:i.ppadminus)||i.ppad||0),U=C((t._m>0?i.ppadminus:i.ppadplus)||i.ppad||0),A=C(i.vpadplus||i.vpad),S=C(i.vpadminus||i.vpad);if(!F){if(d=1/0,g=-1/0,I)for(a=0;a<b;a++)(o=n[a])<d&&o>0&&(d=o),o>g&&o<r&&(g=o);else for(a=0;a<b;a++)(o=n[a])<d&&o>-r&&(d=o),o>g&&o<r&&(g=o);n=[d,g],b=2}var L={tozero:B,extrapad:x};function k(r){s=n[r],e(s)&&(u=w(r),h=U(r),Q?(l=t.c2l(s)-S(r),c=t.c2l(s)+A(r)):(d=s-S(r),g=s+A(r),I&&d<g/10&&(d=g/10),l=t.c2l(d),c=t.c2l(g)),B&&(l=Math.min(0,l),c=Math.max(0,c)),m(l)&&f(v,l,h,L),m(c)&&p(y,c,u,L))}var G=Math.min(6,b);for(a=0;a<G;a++)k(a);for(a=b-1;a>=G;a--)k(a);return{min:v,max:y,opts:i}},concatExtremes:g};var d=3;function g(t,e,n){var r,i,a,o=e._id,l=t._fullData,c=t._fullLayout,u=[],h=[];function d(t,e){for(r=0;r<e.length;r++){var n=t[e[r]],s=(n._extremes||{})[o];if(!0===n.visible&&s){for(i=0;i<s.min.length;i++)a=s.min[i],f(u,a.val,a.pad,{extrapad:a.extrapad});for(i=0;i<s.max.length;i++)a=s.max[i],p(h,a.val,a.pad,{extrapad:a.extrapad})}}}if(d(l,e._traceIndices),d(c.annotations||[],e._annIndices||[]),d(c.shapes||[],e._shapeIndices||[]),e._matchGroup&&!n)for(var v in e._matchGroup)if(v!==e._id){var m=s(t,v),y=g(t,m,!0),b=e._length/m._length;for(i=0;i<y.min.length;i++)a=y.min[i],f(u,a.val,a.pad*b,{extrapad:a.extrapad});for(i=0;i<y.max.length;i++)a=y.max[i],p(h,a.val,a.pad*b,{extrapad:a.extrapad})}return{min:u,max:h}}function f(t,e,n,r){v(t,e,n,r,y)}function p(t,e,n,r){v(t,e,n,r,b)}function v(t,e,n,r,i){for(var a=r.tozero,o=r.extrapad,s=!0,l=0;l<t.length&&s;l++){var c=t[l];if(i(c.val,e)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}i(e,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(t.splice(l,1),l--)}if(s){var u=a&&0===e;t.push({val:e,pad:u?0:n,extrapad:!u&&o})}}function m(t){return e(t)&&Math.abs(t)<r}function y(t,e){return t<=e}function b(t,e){return t>=e}function x(t,e,n){return void 0===e||void 0===n||(e=t.d2l(e))<(n=t.d2l(n))}function B(t,e){if(!e||!e.autorangeoptions)return t;var r=t[0],i=t[1],a=e.autorangeoptions.include;if(void 0!==a){var o=e.d2l(r),s=e.d2l(i);n.isArrayOrTypedArray(a)||(a=[a]);for(var l=0;l<a.length;l++){var c=e.d2l(a[l]);o>=c&&(o=c,r=c),s<=c&&(s=c,i=c)}}return r=function(t,e){var n=e.autorangeoptions;return n&&void 0!==n.minallowed&&x(e,n.minallowed,n.maxallowed)?n.minallowed:n&&void 0!==n.clipmin&&x(e,n.clipmin,n.clipmax)?Math.max(t,e.d2l(n.clipmin)):t}(r,e),i=function(t,e){var n=e.autorangeoptions;return n&&void 0!==n.maxallowed&&x(e,n.minallowed,n.maxallowed)?n.maxallowed:n&&void 0!==n.clipmax&&x(e,n.clipmin,n.clipmax)?Math.min(t,e.d2l(n.clipmax)):t}(i,e),[r,i]}return cx}var Fx=uo,Qx=Ac,Cx=qp,wx=hh,Ux=yf,Ax=Ux.strTranslate,Sx=tv,Lx=Mb,kx=Pu,Gx=Qb,_x=Jv,Rx=dm,Ex=Sc,Tx=Ex.ONEMAXYEAR,Mx=Ex.ONEAVGYEAR,Nx=Ex.ONEMINYEAR,Dx=Ex.ONEMAXQUARTER,Xx=Ex.ONEAVGQUARTER,Zx=Ex.ONEMINQUARTER,Vx=Ex.ONEMAXMONTH,Hx=Ex.ONEAVGMONTH,Wx=Ex.ONEMINMONTH,Yx=Ex.ONEWEEK,zx=Ex.ONEDAY,Ox=zx/2,Jx=Ex.ONEHOUR,Px=Ex.ONEMIN,jx=Ex.ONESEC,Kx=Ex.MINUS_SIGN,qx=Ex.BADNUM,$x={K:"zeroline"},tB={K:"gridline",L:"path"},eB={K:"minor-gridline",L:"path"},nB={K:"tick",L:"path"},rB={K:"tick",L:"text"},iB={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},aB=nv.MID_SHIFT,oB=nv.CAP_SHIFT,sB=nv.LINE_SPACING,lB=nv.OPPOSITE_SIDE,cB=$p.exports={};cB.setConvert=hx;var uB=bx,hB=op,dB=hB.idSort,gB=hB.isLinked;cB.id2name=hB.id2name,cB.name2id=hB.name2id,cB.cleanId=hB.cleanId,cB.list=hB.list,cB.listIds=hB.listIds,cB.getFromId=hB.getFromId,cB.getFromTrace=hB.getFromTrace;var fB=Ix();cB.getAutoRange=fB.getAutoRange,cB.findExtremes=fB.findExtremes;var pB=1e-4;function vB(t){var e=(t[1]-t[0])*pB;return[t[0]-e,t[1]+e]}cB.coerceRef=function(t,e,n,r,i,a){var o=r.charAt(r.length-1),s=n._fullLayout._subplots[o+"axis"],l=r+"ref",c={};return i||(i=s[0]||("string"==typeof a?a:a[0])),a||(a=i),s=s.concat(s.map((function(t){return t+" domain"}))),c[l]={valType:"enumerated",values:s.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},Ux.coerce(t,e,c,l)},cB.getRefType=function(t){return void 0===t?t:"paper"===t?"paper":"pixel"===t?"pixel":/( domain)$/.test(t)?"domain":"range"},cB.coercePosition=function(t,e,n,r,i,a){var o,s;if("range"!==cB.getRefType(r))o=Ux.ensureNumber,s=n(i,a);else{var l=cB.getFromId(e,r);s=n(i,a=l.fraction2r(a)),o=l.cleanPos}t[i]=o(s)},cB.cleanPosition=function(t,e,n){return("paper"===n||"pixel"===n?Ux.ensureNumber:cB.getFromId(e,n).cleanPos)(t)},cB.redrawComponents=function(t,e){e=e||cB.listIds(t);var n=t._fullLayout;function r(r,i,a,o){for(var s=wx.getComponentMethod(r,i),l={},c=0;c<e.length;c++)for(var u=n[cB.id2name(e[c])][a],h=0;h<u.length;h++){var d=u[h];if(!l[d]&&(s(t,d),l[d]=1,o))return}}r("annotations","drawOne","_annIndices"),r("shapes","drawOne","_shapeIndices"),r("images","draw","_imgIndices",!0),r("selections","drawOne","_selectionIndices")};var mB=cB.getDataConversions=function(t,e,n,r){var i,a="x"===n||"y"===n||"z"===n?n:r;if(Ux.isArrayOrTypedArray(a)){if(i={type:uB(r,void 0,{autotypenumbers:t._fullLayout.autotypenumbers}),_categories:[]},cB.setConvert(i),"category"===i.type)for(var o=0;o<r.length;o++)i.d2c(r[o])}else i=cB.getFromTrace(t,e,a);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===a?{d2c:bB,c2d:bB}:{d2c:yB,c2d:yB}};function yB(t){return+t}function bB(t){return String(t)}function xB(t,e){return Math.abs((t/e+.5)%1-.5)<.001}function BB(t,e){return Math.abs(t/e-1)<.001}function IB(t){return+t.substring(1)}function FB(t,e){return t.rangebreaks&&(e=e.filter((function(e){return t.maskBreaks(e.x)!==qx}))),e}function QB(t){var e=t._mainAxis,n=[];if(e._vals)for(var r=0;r<e._vals.length;r++)if(!e._vals[r].noTick){var i=e.l2p(e._vals[r].x),a=t.p2l(i),o=cB.tickText(t,a);e._vals[r].minor&&(o.minor=!0,o.text=""),n.push(o)}return n=FB(t,n)}function CB(t,e){var n=vB(Ux.simpleMap(t.range,t.r2l)),r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var o=[],s=0;s<=1;s++)if((void 0===e||!(e&&s||!1===e&&!s))&&(!s||t.minor)){var l=s?t.minor.tickvals:t.tickvals,c=s?[]:t.ticktext;if(l){Ux.isArrayOrTypedArray(c)||(c=[]);for(var u=0;u<l.length;u++){var h=a(l[u]);if(h>r&&h<i){var d=cB.tickText(t,h,!1,String(c[u]));s&&(d.minor=!0,d.text=""),o.push(d)}}}}return o=FB(t,o)}cB.getDataToCoordFunc=function(t,e,n,r){return mB(t,e,n,r).d2c},cB.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},cB.minDtick=function(t,e,n,r){-1===["log","category","multicategory"].indexOf(t.type)&&r?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=n):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((n-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=n):((e/t._minDtick+1e-6)%1>2e-6||((n-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},cB.saveRangeInitial=function(t,e){for(var n=cB.list(t,"",!0),r=!1,i=0;i<n.length;i++){var a=n[i],o=void 0===a._rangeInitial0&&void 0===a._rangeInitial1,s=o||a.range[0]!==a._rangeInitial0||a.range[1]!==a._rangeInitial1,l=a.autorange;(o&&!0!==l||e&&s)&&(a._rangeInitial0="min"===l||"max reversed"===l?void 0:a.range[0],a._rangeInitial1="max"===l||"min reversed"===l?void 0:a.range[1],a._autorangeInitial=l,r=!0)}return r},cB.saveShowSpikeInitial=function(t,e){for(var n=cB.list(t,"",!0),r=!1,i="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||e&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==i||o.showspikes||(i="off")}return t._fullLayout._cartesianSpikesEnabled=i,r},cB.autoBin=function(t,e,n,r,i,a){var o,s=Ux.aggNums(Math.min,null,t),l=Ux.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:l-s};if(i||(i=e.calendar),o="log"===e.type?{type:"linear",range:[s,l]}:{type:e.type,range:Ux.simpleMap([s,l],e.c2r,0,i),calendar:i},cB.setConvert(o),a=a&&Rx.dtick(a,o.type))o.dtick=a,o.tick0=Rx.tick0(void 0,o.type,i);else{var c;if(n)c=(l-s)/n;else{var u=Ux.distinctVals(t),h=Math.pow(10,Math.floor(Math.log(u.minDiff)/Math.LN10)),d=h*Ux.roundUp(u.minDiff/h,[.9,1.9,4.9,9.9],!0);c=Math.max(d,2*Ux.stdev(t)/Math.pow(t.length,r?.25:.4)),Qx(c)||(c=1)}cB.autoTicks(o,c)}var g,f=o.dtick,p=cB.tickIncrement(cB.tickFirst(o),f,"reverse",i);if("number"==typeof f)p=function(t,e,n,r,i){var a=0,o=0,s=0,l=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?s++:Qx(e[u])||l++,c(e[u])&&a++,c(e[u]+n.dtick/2)&&o++;var h=e.length-l;if(s===h&&"date"!==n.type)n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick);else if(o<.1*h&&(a>.3*h||c(r)||c(i))){var d=n.dtick/2;t+=t+d<r?d:-d}return t}(p,t,o,s,l),g=p+(1+Math.floor((l-p)/f))*f;else for("M"===o.dtick.charAt(0)&&(p=function(t,e,n,r,i){var a=Ux.findExactDates(e,i),o=.8;if(a.exactDays>o){var s=Number(n.substr(1));a.exactYears>o&&s%12==0?t=cB.tickIncrement(t,"M6","reverse")+1.5*zx:a.exactMonths>o?t=cB.tickIncrement(t,"M1","reverse")+15.5*zx:t-=Ox;var l=cB.tickIncrement(t,n);if(l<=r)return l}return t}(p,t,f,s,i)),g=p,0;g<=l;)g=cB.tickIncrement(g,f,!1,i);return{start:e.c2r(p,0,i),end:e.c2r(g,0,i),size:f,_dataSpan:l-s}},cB.prepMinorTicks=function(t,e,n){if(!e.minor.dtick){delete t.dtick;var r,i=e.dtick&&Qx(e._tmin);if(i){var a=cB.tickIncrement(e._tmin,e.dtick,!0);r=[e._tmin,.99*a+.01*e._tmin]}else{var o=Ux.simpleMap(e.range,e.r2l);r=[o[0],.8*o[0]+.2*o[1]]}if(t.range=Ux.simpleMap(r,e.l2r),t._isMinor=!0,cB.prepTicks(t,n),i){var s=Qx(e.dtick),l=Qx(t.dtick),c=s?e.dtick:+e.dtick.substring(1),u=l?t.dtick:+t.dtick.substring(1);s&&l?xB(c,u)?c===2*Yx&&u===2*zx&&(t.dtick=Yx):c===2*Yx&&u===3*zx?t.dtick=Yx:c!==Yx||(e._input.minor||{}).nticks?BB(c/u,2.5)?t.dtick=c/2:t.dtick=c:t.dtick=zx:"M"===String(e.dtick).charAt(0)?l?t.dtick="M1":xB(c,u)?c>=12&&2===u&&(t.dtick="M3"):t.dtick=e.dtick:"L"===String(t.dtick).charAt(0)?"L"===String(e.dtick).charAt(0)?xB(c,u)||(t.dtick=BB(c/u,2.5)?e.dtick/2:e.dtick):t.dtick="D1":"D2"===t.dtick&&+e.dtick>1&&(t.dtick=1)}t.range=e.range}void 0===e.minor._tick0Init&&(t.tick0=e.tick0)},cB.prepTicks=function(t,e){var n=Ux.simpleMap(t.range,t.r2l,void 0,void 0,e);if("auto"===t.tickmode||!t.dtick){var r,i=t.nticks;i||("category"===t.type||"multicategory"===t.type?(r=t.tickfont?Ux.bigFont(t.tickfont.size||12):15,i=t._length/r):(r="y"===t._id.charAt(0)?40:80,i=Ux.constrain(t._length/r,4,9)+1),"radialaxis"===t._name&&(i*=2)),t.minor&&"array"!==t.minor.tickmode||"array"===t.tickmode&&(i*=100),t._roughDTick=Math.abs(n[1]-n[0])/i,cB.autoTicks(t,t._roughDTick),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}"period"===t.ticklabelmode&&function(t){var e;function n(){return!(Qx(t.dtick)||"M"!==t.dtick.charAt(0))}var r=n(),i=cB.getTickFormat(t);if(i){var a=t._dtickInit!==t.dtick;/%[fLQsSMX]/.test(i)||(/%[HI]/.test(i)?(e=Jx,a&&!r&&t.dtick<Jx&&(t.dtick=Jx)):/%p/.test(i)?(e=Ox,a&&!r&&t.dtick<Ox&&(t.dtick=Ox)):/%[Aadejuwx]/.test(i)?(e=zx,a&&!r&&t.dtick<zx&&(t.dtick=zx)):/%[UVW]/.test(i)?(e=Yx,a&&!r&&t.dtick<Yx&&(t.dtick=Yx)):/%[Bbm]/.test(i)?(e=Hx,a&&(r?IB(t.dtick)<1:t.dtick<Wx)&&(t.dtick="M1")):/%[q]/.test(i)?(e=Xx,a&&(r?IB(t.dtick)<3:t.dtick<Zx)&&(t.dtick="M3")):/%[Yy]/.test(i)&&(e=Mx,a&&(r?IB(t.dtick)<12:t.dtick<Nx)&&(t.dtick="M12")))}(r=n())&&t.tick0===t._dowTick0&&(t.tick0=t._rawTick0);t._definedDelta=e}(t),t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),RB(t)},cB.calcTicks=function(t,e){for(var n,r,i=t.type,a=t.calendar,o=t.ticklabelstep,s="period"===t.ticklabelmode,l=Ux.simpleMap(t.range,t.r2l,void 0,void 0,e),c=l[1]<l[0],u=Math.min(l[0],l[1]),h=Math.max(l[0],l[1]),d=Math.max(1e3,t._length||0),g=[],f=[],p=[],v=[],m=t.minor&&(t.minor.ticks||t.minor.showgrid),y=1;y>=(m?0:1);y--){var b=!y;y?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var x=y?t:Ux.extendFlat({},t,t.minor);if(b?cB.prepMinorTicks(x,t,e):cB.prepTicks(x,e),"array"!==x.tickmode)if("sync"!==x.tickmode){var B=vB(l),I=B[0],F=B[1],Q=Qx(x.dtick),C="log"===i&&!(Q||"L"===x.dtick.charAt(0)),w=cB.tickFirst(x,e);if(y){if(t._tmin=w,w<I!==c)break;"category"!==i&&"multicategory"!==i||(F=c?Math.max(-.5,F):Math.min(t._categories.length-.5,F))}var U,A,S=null,L=w;if(y)Q?A=t.dtick:"date"===i?"string"==typeof t.dtick&&"M"===t.dtick.charAt(0)&&(A=Hx*t.dtick.substring(1)):A=t._roughDTick,U=Math.round((t.r2l(L)-t.r2l(t.tick0))/A)-1;var k=x.dtick;for(x.rangebreaks&&x._tick0Init!==x.tick0&&(L=tI(L,t),c||(L=cB.tickIncrement(L,k,!c,a))),y&&s&&(L=cB.tickIncrement(L,k,!c,a),U--);c?L>=F:L<=F;L=cB.tickIncrement(L,k,c,a)){if(y&&U++,x.rangebreaks&&!c){if(L<I)continue;if(x.maskBreaks(L)===qx&&tI(L,x)>=h)break}if(p.length>d||L===S)break;S=L;var G={value:L};y?(C&&L!==(0|L)&&(G.simpleLabel=!0),o>1&&U%o&&(G.skipLabel=!0),p.push(G)):(G.minor=!0,v.push(G))}}else p=[],g=QB(t);else y?(p=[],g=CB(t,!b)):(v=[],f=CB(t,!b))}if(m&&!("inside"===t.minor.ticks&&"outside"===t.ticks||"outside"===t.minor.ticks&&"inside"===t.ticks)){for(var _=p.map((function(t){return t.value})),R=[],E=0;E<v.length;E++){var T=v[E],M=T.value;if(-1===_.indexOf(M)){for(var N=!1,D=0;!N&&D<p.length;D++)1e7+p[D].value===1e7+M&&(N=!0);N||R.push(T)}}v=R}if(s&&function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r].value,a=r,o=r+1;r<t.length-1?(a=r,o=r+1):r>0?(a=r-1,o=r):(a=r,o=r);var s,l=t[a].value,c=t[o].value,u=Math.abs(c-l),h=n||u,d=0;h>=Nx?d=u>=Nx&&u<=Tx?u:Mx:n===Xx&&h>=Zx?d=u>=Zx&&u<=Dx?u:Xx:h>=Wx?d=u>=Wx&&u<=Vx?u:Hx:n===Yx&&h>=Yx?d=Yx:h>=zx?d=zx:n===Ox&&h>=Ox?d=Ox:n===Jx&&h>=Jx&&(d=Jx),d>=u&&(d=u,s=!0);var g=i+d;if(e.rangebreaks&&d>0){for(var f=0,p=0;p<84;p++){var v=(p+.5)/84;e.maskBreaks(i*(1-v)+v*g)!==qx&&f++}(d*=f/84)||(t[r].drop=!0),s&&u>Yx&&(d=u)}(d>0||0===r)&&(t[r].periodX=i+d/2)}}(p,t,t._definedDelta),t.rangebreaks){var X="y"===t._id.charAt(0),Z=1;"auto"===t.tickmode&&(Z=t.tickfont?t.tickfont.size:12);var V=NaN;for(n=p.length-1;n>-1;n--)if(p[n].drop)p.splice(n,1);else{p[n].value=tI(p[n].value,t);var H=t.c2p(p[n].value);(X?V>H-Z:V<H+Z)?p.splice(c?n+1:n,1):V=H}}$B(t)&&360===Math.abs(l[1]-l[0])&&p.pop(),t._tmax=(p[p.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var W,Y,z=function(e){e.text="",t._prevDateHead=r};for(p=p.concat(v),n=0;n<p.length;n++){var O=p[n].minor,J=p[n].value;O?f.push({x:J,minor:!0}):(r=t._prevDateHead,W=cB.tickText(t,J,!1,p[n].simpleLabel),void 0!==(Y=p[n].periodX)&&(W.periodX=Y,(Y>h||Y<u)&&(Y>h&&(W.periodX=h),Y<u&&(W.periodX=u),z(W))),p[n].skipLabel&&z(W),g.push(W))}return g=g.concat(f),t._inCalcTicks=!1,s&&g.length&&(g[0].noTick=!0),g};var wB=[2,5,10],UB=[1,2,3,6,12],AB=[1,2,5,10,15,30],SB=[1,2,3,7,14],LB=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],kB=[-.301,0,.301,.699,1],GB=[15,30,45,90,180];function _B(t,e,n){return e*Ux.roundUp(t/e,n)}function RB(t){var e=t.dtick;if(t._tickexponent=0,Qx(e)||"string"==typeof e||(e=1),"category"!==t.type&&"multicategory"!==t.type||(t._tickround=null),"date"===t.type){var n=t.r2l(t.tick0),r=t.l2r(n).replace(/(^-|i)/g,""),i=r.length;if("M"===String(e).charAt(0))i>10||"01-01"!==r.substr(5)?t._tickround="d":t._tickround=+e.substr(1)%12==0?"y":"m";else if(e>=zx&&i<=10||e>=15*zx)t._tickround="d";else if(e>=Px&&i<=16||e>=Jx)t._tickround="M";else if(e>=jx&&i<=19||e>=Px)t._tickround="S";else{var a=t.l2r(n+e).replace(/^-/,"").length;t._tickround=Math.max(i,a)-20,t._tickround<0&&(t._tickround=4)}}else if(Qx(e)||"L"===e.charAt(0)){var o=t.range.map(t.r2d||Number);Qx(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1])),l=Math.floor(Math.log(s)/Math.LN10+.01),c=void 0===t.minexponent?3:t.minexponent;Math.abs(l)>c&&(MB(t.exponentformat)&&!NB(l)?t._tickexponent=3*Math.round((l-1)/3):t._tickexponent=l)}else t._tickround=null}function EB(t,e,n){var r=t.tickfont||{};return{x:e,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontWeight:r.weight,fontStyle:r.style,fontVariant:r.variant,fontColor:r.color}}cB.autoTicks=function(t,e,n){var r;function i(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=Ux.dateTick0(t.calendar,0);var a=2*e;if(a>Mx)e/=Mx,r=i(10),t.dtick="M"+12*_B(e,r,wB);else if(a>Hx)e/=Hx,t.dtick="M"+_B(e,1,UB);else if(a>zx){if(t.dtick=_B(e,zx,t._hasDayOfWeekBreaks?[1,2,7,14]:SB),!n){var o=cB.getTickFormat(t),s="period"===t.ticklabelmode;s&&(t._rawTick0=t.tick0),/%[uVW]/.test(o)?t.tick0=Ux.dateTick0(t.calendar,2):t.tick0=Ux.dateTick0(t.calendar,1),s&&(t._dowTick0=t.tick0)}}else a>Jx?t.dtick=_B(e,Jx,UB):a>Px?t.dtick=_B(e,Px,AB):a>jx?t.dtick=_B(e,jx,AB):(r=i(10),t.dtick=_B(e,r,wB))}else if("log"===t.type){t.tick0=0;var l=Ux.simpleMap(t.range,t.r2l);if(t._isMinor&&(e*=1.5),e>.7)t.dtick=Math.ceil(e);else if(Math.abs(l[1]-l[0])<1){var c=1.5*Math.abs((l[1]-l[0])/e);e=Math.abs(Math.pow(10,l[1])-Math.pow(10,l[0]))/c,r=i(10),t.dtick="L"+_B(e,r,wB)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):$B(t)?(t.tick0=0,r=1,t.dtick=_B(e,r,GB)):(t.tick0=0,r=i(10),t.dtick=_B(e,r,wB));if(0===t.dtick&&(t.dtick=1),!Qx(t.dtick)&&"string"!=typeof t.dtick){var u=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(u)}},cB.tickIncrement=function(t,e,n,r){var i=n?-1:1;if(Qx(e))return Ux.increment(t,i*e);var a=e.charAt(0),o=i*Number(e.substr(1));if("M"===a)return Ux.incrementMonth(t,o,r);if("L"===a)return Math.log(Math.pow(10,t)+o)/Math.LN10;if("D"===a){var s="D2"===e?kB:LB,l=t+.01*i,c=Ux.roundUp(Ux.mod(l,1),s,n);return Math.floor(l)+Math.log(Fx.round(Math.pow(10,c),1))/Math.LN10}throw"unrecognized dtick "+String(e)},cB.tickFirst=function(t,e){var n=t.r2l||Number,r=Ux.simpleMap(t.range,n,void 0,void 0,e),i=r[1]<r[0],a=i?Math.floor:Math.ceil,o=vB(r)[0],s=t.dtick,l=n(t.tick0);if(Qx(s)){var c=a((o-l)/s)*s+l;return"category"!==t.type&&"multicategory"!==t.type||(c=Ux.constrain(c,0,t._categories.length-1)),c}var u=s.charAt(0),h=Number(s.substr(1));if("M"===u){for(var d,g,f,p=0,v=l;p<10;){if(((d=cB.tickIncrement(v,s,i,t.calendar))-o)*(v-o)<=0)return i?Math.min(v,d):Math.max(v,d);g=(o-(v+d)/2)/(d-v),f=u+(Math.abs(Math.round(g))||1)*h,v=cB.tickIncrement(v,f,g<0?!i:i,t.calendar),p++}return Ux.error("tickFirst did not converge",t),v}if("L"===u)return Math.log(a((Math.pow(10,o)-l)/h)*h+l)/Math.LN10;if("D"===u){var m="D2"===s?kB:LB,y=Ux.roundUp(Ux.mod(o,1),m,i);return Math.floor(o)+Math.log(Fx.round(Math.pow(10,y),1))/Math.LN10}throw"unrecognized dtick "+String(s)},cB.tickText=function(t,e,n,r){var i,a=EB(t,e),o="array"===t.tickmode,s=n||o,l=t.type,c="category"===l?t.d2l_noadd:t.d2l,u=function(e){var n=t.l2p(e);return n>=0&&n<=t._length?e:null};if(o&&Ux.isArrayOrTypedArray(t.ticktext)){var h=Ux.simpleMap(t.range,t.r2l),d=(Math.abs(h[1]-h[0])-(t._lBreaks||0))/1e4;for(i=0;i<t.ticktext.length&&!(Math.abs(e-c(t.tickvals[i]))<d);i++);if(i<t.ticktext.length)return a.text=String(t.ticktext[i]),a.xbnd=[u(a.x-.5),u(a.x+t.dtick-.5)],a}function g(r){if(void 0===r)return!0;if(n)return"none"===r;var i={first:t._tmin,last:t._tmax}[r];return"all"!==r&&e!==i}var f=n?"never":"none"!==t.exponentformat&&g(t.showexponent)?"hide":"";if("date"===l?function(t,e,n,r){var i=t._tickround,a=n&&t.hoverformat||cB.getTickFormat(t);r=!a&&r,r&&(i=Qx(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var o,s=Ux.formatDate(e.x,a,i,t._dateFormat,t.calendar,t._extraFormat),l=s.indexOf("\n");-1!==l&&(o=s.substr(l+1),s=s.substr(0,l));r&&(void 0===o||"00:00:00"!==s&&"00:00"!==s?8===s.length&&(s=s.replace(/:00$/,"")):(s=o,o=""));if(o)if(n)"d"===i?s+=", "+o:s=o+(s?", "+s:"");else if(t._inCalcTicks&&t._prevDateHead===o){var c=eI(t),u=t._trueSide||t.side;(!c&&"top"===u||c&&"bottom"===u)&&(s+="<br> ")}else t._prevDateHead=o,s+="<br>"+o;e.text=s}(t,a,n,s):"log"===l?function(t,e,n,r,i){var a=t.dtick,o=e.x,s=t.tickformat,l="string"==typeof a&&a.charAt(0);"never"===i&&(i="");r&&"L"!==l&&(a="L3",l="L");if(s||"L"===l)e.text=DB(Math.pow(10,o),t,i,r);else if(Qx(a)||"D"===l&&Ux.mod(o+.01,1)<.1){var c=Math.round(o),u=Math.abs(c),h=t.exponentformat;"power"===h||MB(h)&&NB(c)?(e.text=0===c?1:1===c?"10":"10<sup>"+(c>1?"":Kx)+u+"</sup>",e.fontSize*=1.25):("e"===h||"E"===h)&&u>2?e.text="1"+h+(c>0?"+":Kx)+u:(e.text=DB(Math.pow(10,o),t,"","fakehover"),"D1"===a&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==l)throw"unrecognized dtick "+String(a);e.text=String(Math.round(Math.pow(10,Ux.mod(o,1)))),e.fontSize*=.75}if("D1"===t.dtick){var d=String(e.text).charAt(0);"0"!==d&&"1"!==d||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(o<0?.5:.25)))}}(t,a,0,s,f):"category"===l?function(t,e){var n=t._categories[Math.round(e.x)];void 0===n&&(n="");e.text=String(n)}(t,a):"multicategory"===l?function(t,e,n){var r=Math.round(e.x),i=t._categories[r]||[],a=void 0===i[1]?"":String(i[1]),o=void 0===i[0]?"":String(i[0]);n?e.text=o+" - "+a:(e.text=a,e.text2=o)}(t,a,n):$B(t)?function(t,e,n,r,i){if("radians"!==t.thetaunit||n)e.text=DB(e.x,t,i,r);else{var a=e.x/180;if(0===a)e.text="0";else{var o=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}function n(t,r){return e(r,0)?t:n(r,t%r)}function r(t){for(var n=1;!e(Math.round(t*n)/n,t);)n*=10;return n}var i=r(t),a=t*i,o=Math.abs(n(a,i));return[Math.round(a/o),Math.round(i/o)]}(a);if(o[1]>=100)e.text=DB(Ux.deg2rad(e.x),t,i,r);else{var s=e.x<0;1===o[1]?1===o[0]?e.text="π":e.text=o[0]+"π":e.text=["<sup>",o[0],"</sup>","⁄","<sub>",o[1],"</sub>","π"].join(""),s&&(e.text=Kx+e.text)}}}}(t,a,n,s,f):function(t,e,n,r,i){"never"===i?i="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(i="hide");e.text=DB(e.x,t,i,r)}(t,a,0,s,f),r||(t.tickprefix&&!g(t.showtickprefix)&&(a.text=t.tickprefix+a.text),t.ticksuffix&&!g(t.showticksuffix)&&(a.text+=t.ticksuffix)),t.labelalias&&t.labelalias.hasOwnProperty(a.text)){var p=t.labelalias[a.text];"string"==typeof p&&(a.text=p)}return("boundaries"===t.tickson||t.showdividers)&&(a.xbnd=[u(a.x-.5),u(a.x+t.dtick-.5)]),a},cB.hoverLabelText=function(t,e,n){n&&(t=Ux.extendFlat({},t,{hoverformat:n}));var r=Ux.isArrayOrTypedArray(e)?e[0]:e,i=Ux.isArrayOrTypedArray(e)?e[1]:void 0;if(void 0!==i&&i!==r)return cB.hoverLabelText(t,r,n)+" - "+cB.hoverLabelText(t,i,n);var a="log"===t.type&&r<=0,o=cB.tickText(t,t.c2l(a?-r:r),"hover").text;return a?0===r?"0":Kx+o:o};var TB=["f","p","n","μ","m","","k","M","G","T"];function MB(t){return"SI"===t||"B"===t}function NB(t){return t>14||t<-15}function DB(t,e,n,r){var i=t<0,a=e._tickround,o=n||e.exponentformat||"B",s=e._tickexponent,l=cB.getTickFormat(e),c=e.separatethousands;if(r){var u={exponentformat:o,minexponent:e.minexponent,dtick:"none"===e.showexponent?e.dtick:Qx(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};RB(u),a=(Number(u._tickround)||0)+4,s=u._tickexponent,e.hoverformat&&(l=e.hoverformat)}if(l)return e._numFormat(l)(t).replace(/-/g,Kx);var h,d=Math.pow(10,-a)/2;if("none"===o&&(s=0),(t=Math.abs(t))<d)t="0",i=!1;else{if(t+=d,s&&(t*=Math.pow(10,-s),a+=s),0===a)t=String(Math.floor(t));else if(a<0){t=(t=String(Math.round(t))).substr(0,t.length+a);for(var g=a;g<0;g++)t+="0"}else{var f=(t=String(t)).indexOf(".")+1;f&&(t=t.substr(0,f+a).replace(/\.?0+$/,""))}t=Ux.numSeparate(t,e._separators,c)}s&&"hide"!==o&&(MB(o)&&NB(s)&&(o="power"),h=s<0?Kx+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?t+=o+h:"power"===o?t+="×10<sup>"+h+"</sup>":"B"===o&&9===s?t+="B":MB(o)&&(t+=TB[s/3+5]));return i?Kx+t:t}function XB(t,e){if(t){var n=Object.keys(iB).reduce((function(t,n){return-1!==e.indexOf(n)&&iB[n].forEach((function(e){t[e]=1})),t}),{});Object.keys(t).forEach((function(e){n[e]||(1===e.length?t[e]=0:delete t[e])}))}}function ZB(t,e){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i];r[a.text2]?r[a.text2].push(a.x):r[a.text2]=[a.x]}for(var o in r)n.push(EB(t,Ux.interp(r[o],.5),o));return n}function VB(t){return void 0!==t.periodX?t.periodX:t.x}function HB(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function WB(t){var e=t.title.font.size,n=(t.title.text.match(Sx.BR_TAG_ALL)||[]).length;return t.title.hasOwnProperty("standoff")?e*(oB+n*sB):n?e*(n+1)*sB:e}function YB(t,e){var n=t.l2p(e);return n>1&&n<t._length-1}function zB(t){var e=Fx.select(t),n=e.select(".text-math-group");return n.empty()?e.select("text"):n}function OB(t){return t._id+".automargin"}function JB(t){return OB(t)+".mirror"}function PB(t){return t._id+".rangeslider"}function jB(t,e){for(var n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n])}function KB(t,e,n){var r,i,a=[],o=[],s=t.layout;for(r=0;r<e.length;r++)a.push(cB.getFromId(t,e[r]));for(r=0;r<n.length;r++)o.push(cB.getFromId(t,n[r]));var l=Object.keys(_x),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(r=0;r<l.length;r++){var h=l[r],d=a[0][h],g=o[0][h],f=!0,p=!1,v=!1;if("_"!==h.charAt(0)&&"function"!=typeof d&&-1===c.indexOf(h)){for(i=1;i<a.length&&f;i++){var m=a[i][h];"type"===h&&-1!==u.indexOf(d)&&-1!==u.indexOf(m)&&d!==m?p=!0:m!==d&&(f=!1)}for(i=1;i<o.length&&f;i++){var y=o[i][h];"type"===h&&-1!==u.indexOf(g)&&-1!==u.indexOf(y)&&g!==y?v=!0:o[i][h]!==g&&(f=!1)}f&&(p&&(s[a[0]._name].type="linear"),v&&(s[o[0]._name].type="linear"),qB(s,h,a,o,t._fullLayout._dfltTitle))}}for(r=0;r<t._fullLayout.annotations.length;r++){var b=t._fullLayout.annotations[r];-1!==e.indexOf(b.xref)&&-1!==n.indexOf(b.yref)&&Ux.swapAttrs(s.annotations[r],["?"])}}function qB(t,e,n,r,i){var a,o=Ux.nestedProperty,s=o(t[n[0]._name],e).get(),l=o(t[r[0]._name],e).get();for("title"===e&&(s&&s.text===i.x&&(s.text=i.y),l&&l.text===i.y&&(l.text=i.x)),a=0;a<n.length;a++)o(t,n[a]._name+"."+e).set(l);for(a=0;a<r.length;a++)o(t,r[a]._name+"."+e).set(s)}function $B(t){return"angularaxis"===t._id}function tI(t,e){for(var n=e._rangebreaks.length,r=0;r<n;r++){var i=e._rangebreaks[r];if(t>=i.min&&t<i.max)return i.max}return t}function eI(t){return-1!==(t.ticklabelposition||"").indexOf("inside")}function nI(t,e){eI(t._anchorAxis||{})&&t._hideCounterAxisInsideTickLabels&&t._hideCounterAxisInsideTickLabels(e)}function rI(t,e,n,r){var i,a="free"===t.anchor||void 0!==t.overlaying&&!1!==t.overlaying?t.overlaying:t._id;i=r?"right"===t.side?e:-e:e,a in n||(n[a]={}),t.side in n[a]||(n[a][t.side]=0),n[a][t.side]+=i}cB.getTickFormat=function(t){var e,n,r;function i(t){return"string"!=typeof t?t:Number(t.replace("M",""))*Hx}function a(t,e){var n=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var r=n.indexOf(t.charAt(0)),i=n.indexOf(e.charAt(0));return r===i?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):r-i}return"number"==typeof t?1:-1}function o(t,e,n){var r=n||function(t){return t},i=e[0],a=e[1];return(!i&&"number"!=typeof i||r(i)<=r(t))&&(!a&&"number"!=typeof a||r(a)>=r(t))}function s(t,e){var n=null===e[0],r=null===e[1],i=a(t,e[0])>=0,o=a(t,e[1])<=0;return(n||i)&&(r||o)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&o(t.dtick,r.dtickrange,i)){n=r;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&s(t.dtick,r.dtickrange)){n=r;break}}return n?n.value:t.tickformat},cB.getSubplots=function(t,e){var n=t._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),i=e?cB.findSubplotsWithAxis(r,e):r;return i.sort((function(t,e){var n=t.substr(1).split("y"),r=e.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]})),i},cB.findSubplotsWithAxis=function(t,e){for(var n=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),r=[],i=0;i<t.length;i++){var a=t[i];n.test(a)&&r.push(a)}return r},cB.makeClipPaths=function(t){var e=t._fullLayout;if(!e._hasOnlyLargeSploms){var n,r,i={_offset:0,_length:e.width,_id:""},a={_offset:0,_length:e.height,_id:""},o=cB.list(t,"x",!0),s=cB.list(t,"y",!0),l=[];for(n=0;n<o.length;n++)for(l.push({x:o[n],y:a}),r=0;r<s.length;r++)0===n&&l.push({x:i,y:s[r]}),l.push({x:o[n],y:s[r]});var c=e._clips.selectAll(".axesclip").data(l,(function(t){return t.x._id+t.y._id}));c.enter().append("clipPath").classed("axesclip",!0).attr("id",(function(t){return"clip"+e._uid+t.x._id+t.y._id})).append("rect"),c.exit().remove(),c.each((function(t){Fx.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})}))}},cB.draw=function(t,e,n){var r=t._fullLayout;"redraw"===e&&r._paper.selectAll("g.subplot").each((function(t){var e=t[0],n=r._plots[e];if(n){var i=n.xaxis,a=n.yaxis;n.xaxislayer.selectAll("."+i._id+"tick").remove(),n.yaxislayer.selectAll("."+a._id+"tick").remove(),n.xaxislayer.selectAll("."+i._id+"tick2").remove(),n.yaxislayer.selectAll("."+a._id+"tick2").remove(),n.xaxislayer.selectAll("."+i._id+"divider").remove(),n.yaxislayer.selectAll("."+a._id+"divider").remove(),n.minorGridlayer&&n.minorGridlayer.selectAll("path").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),r._infolayer.select(".g-"+i._id+"title").remove(),r._infolayer.select(".g-"+a._id+"title").remove()}}));var i=e&&"redraw"!==e?e:cB.listIds(t),a=cB.list(t).filter((function(t){return t.autoshift})).map((function(t){return t.overlaying}));i.map((function(e){var n=cB.getFromId(t,e);if("sync"===n.tickmode&&n.overlaying){var r=i.findIndex((function(t){return t===n.overlaying}));r>=0&&i.unshift(i.splice(r,1).shift())}}));var o={false:{left:0,right:0}};return Ux.syncOrAsync(i.map((function(e){return function(){if(e){var r=cB.getFromId(t,e);n||(n={}),n.axShifts=o,n.overlayingShiftedAx=a;var i=cB.drawOne(t,r,n);return r._shiftPusher&&rI(r,r._fullDepth||0,o,!0),r._r=r.range.slice(),r._rl=Ux.simpleMap(r._r,r.r2l),i}}})))},cB.drawOne=function(t,e,n){var r,i,a,o=(n=n||{}).axShifts||{},s=n.overlayingShiftedAx||[];e.setScale();var l=t._fullLayout,c=e._id,u=c.charAt(0),h=cB.counterLetter(c),d=l._plots[e._mainSubplot];if(d){if(e._shiftPusher=e.autoshift||-1!==s.indexOf(e._id)||-1!==s.indexOf(e.overlaying),e._shiftPusher&"free"===e.anchor){var g=e.linewidth/2||0;"inside"===e.ticks&&(g+=e.ticklen),rI(e,g,o,!0),rI(e,e.shift||0,o,!1)}!0===n.skipTitle&&void 0!==e._shift||(e._shift=function(t,e){return t.autoshift?e[t.overlaying][t.side]:t.shift||0}(e,o));var f=d[u+"axislayer"],p=e._mainLinePosition,v=p+=e._shift,m=e._mainMirrorPosition,y=e._vals=cB.calcTicks(e),b=[e.mirror,v,m].join("_");for(r=0;r<y.length;r++)y[r].axInfo=b;e._selections={},e._tickAngles&&(e._prevTickAngles=e._tickAngles),e._tickAngles={},e._depth=null;var x={};if(e.visible){var B,I,F=cB.makeTransTickFn(e),Q=cB.makeTransTickLabelFn(e),C="inside"===e.ticks,w="outside"===e.ticks;if("boundaries"===e.tickson){var U=function(t,e){var n,r=[],i=function(t,e){var n=t.xbnd[e];null!==n&&r.push(Ux.extendFlat({},t,{x:n}))};if(e.length){for(n=0;n<e.length;n++)i(e[n],0);i(e[n-1],1)}return r}(0,y);I=cB.clipEnds(e,U),B=C?I:U}else I=cB.clipEnds(e,y),B=C&&"period"!==e.ticklabelmode?I:y;var A,S=e._gridVals=I,L=function(t,e){var n,r,i=[],a=e.length&&e[e.length-1].x<e[0].x,o=function(t,e){var n=t.xbnd[e];null!==n&&i.push(Ux.extendFlat({},t,{x:n}))};if(t.showdividers&&e.length){for(n=0;n<e.length;n++){var s=e[n];s.text2!==r&&o(s,a?1:0),r=s.text2}o(e[n-1],a?0:1)}return i}(e,y);if(!l._hasOnlyLargeSploms){var k=e._subplotsWith,G={};for(r=0;r<k.length;r++){i=k[r];var _=(a=l._plots[i])[h+"axis"],R=_._mainAxis._id;if(!G[R]){G[R]=1;var E="x"===u?"M0,"+_._offset+"v"+_._length:"M"+_._offset+",0h"+_._length;cB.drawGrid(t,e,{vals:S,counterAxis:_,layer:a.gridlayer.select("."+c),minorLayer:a.minorGridlayer.select("."+c),path:E,transFn:F}),cB.drawZeroLine(t,e,{counterAxis:_,layer:a.zerolinelayer,path:E,transFn:F})}}}var T=cB.getTickSigns(e),M=cB.getTickSigns(e,"minor");if(e.ticks||e.minor&&e.minor.ticks){var N,D,X,Z,V=cB.makeTickPath(e,v,T[2]),H=cB.makeTickPath(e,v,M[2],{minor:!0});if(e._anchorAxis&&e.mirror&&!0!==e.mirror?(N=cB.makeTickPath(e,m,T[3]),D=cB.makeTickPath(e,m,M[3],{minor:!0}),X=V+N,Z=H+D):(N="",D="",X=V,Z=H),e.showdividers&&w&&"boundaries"===e.tickson){var W={};for(r=0;r<L.length;r++)W[L[r].x]=1;A=function(t){return W[t.x]?N:X}}else A=function(t){return t.minor?Z:X}}if(cB.drawTicks(t,e,{vals:B,layer:f,path:A,transFn:F}),"allticks"===e.mirror){var Y=Object.keys(e._linepositions||{});for(r=0;r<Y.length;r++){i=Y[r],a=l._plots[i];var z=e._linepositions[i]||[],O=z[0],J=z[1],P=z[2],j=cB.makeTickPath(e,O,P?T[0]:M[0],{minor:P})+cB.makeTickPath(e,J,P?T[1]:M[1],{minor:P});cB.drawTicks(t,e,{vals:B,layer:a[u+"axislayer"],path:j,transFn:F})}}var K=[];if(K.push((function(){return cB.drawLabels(t,e,{vals:y,layer:f,plotinfo:a,transFn:Q,labelFns:cB.makeLabelFns(e,v)})})),"multicategory"===e.type){var q={x:2,y:10}[u];K.push((function(){var n={x:"height",y:"width"}[u],r=tt()[n]+q+(e._tickAngles[c+"tick"]?e.tickfont.size*sB:0);return cB.drawLabels(t,e,{vals:ZB(e,y),layer:f,cls:c+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:F,labelFns:cB.makeLabelFns(e,v+r*T[4])})})),K.push((function(){return e._depth=T[4]*(tt("tick2")[e.side]-v),function(t,e,n){var r=e._id+"divider",i=n.vals,a=n.layer.selectAll("path."+r).data(i,HB);a.exit().remove(),a.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(kx.stroke,e.dividercolor).style("stroke-width",Gx.crispRound(t,e.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)}(t,e,{vals:L,layer:f,path:cB.makeTickPath(e,v,T[4],{len:e._depth}),transFn:F})}))}else e.title.hasOwnProperty("standoff")&&K.push((function(){e._depth=T[4]*(tt()[e.side]-v)}));var $=wx.getComponentMethod("rangeslider","isVisible")(e);return n.skipTitle||$&&"bottom"===e.side||K.push((function(){return function(t,e){var n,r=t._fullLayout,i=e._id,a=i.charAt(0),o=e.title.font.size,s=(e.title.text.match(Sx.BR_TAG_ALL)||[]).length;if(e.title.hasOwnProperty("standoff"))"bottom"===e.side||"right"===e.side?n=e._depth+e.title.standoff+o*oB:"top"!==e.side&&"left"!==e.side||(n=e._depth+e.title.standoff+o*(aB+s*sB));else{var l=eI(e);if("multicategory"===e.type)n=e._depth;else{var c=1.5*o;l&&(c=.5*o,"outside"===e.ticks&&(c+=e.ticklen)),n=10+c+(e.linewidth?e.linewidth-1:0)}l||(n+="x"===a?"top"===e.side?o*(e.showticklabels?1:0):o*(e.showticklabels?1.5:.5):"right"===e.side?o*(e.showticklabels?1:.5):o*(e.showticklabels?.5:0))}var u,h,d,g,f=cB.getPxPosition(t,e);"x"===a?(h=e._offset+e._length/2,d="top"===e.side?f-n:f+n):(d=e._offset+e._length/2,h="right"===e.side?f+n:f-n,u={rotate:"-90",offset:0});if("multicategory"!==e.type){var p=e._selections[e._id+"tick"];if(g={selection:p,side:e.side},p&&p.node()&&p.node().parentNode){var v=Gx.getTranslate(p.node().parentNode);g.offsetLeft=v.x,g.offsetTop=v.y}e.title.hasOwnProperty("standoff")&&(g.pad=0)}return e._titleStandoff=n,Lx.draw(t,i+"title",{propContainer:e,propName:e._name+".title.text",placeholder:r._dfltTitle[a],avoid:g,transform:u,attributes:{x:h,y:d,"text-anchor":"middle"}})}(t,e)})),K.push((function(){var n,r,i,a,o=e.side.charAt(0),s=lB[e.side].charAt(0),c=cB.getPxPosition(t,e),d=w?e.ticklen:0;(e.automargin||$||e._shiftPusher)&&("multicategory"===e.type?n=tt("tick2"):(n=tt(),"x"===u&&"b"===o&&(e._depth=Math.max(n.width>0?n.bottom-c:0,d))));var g=0,f=0;if(e._shiftPusher&&(g=Math.max(d,n.height>0?"l"===o?c-n.left:n.right-c:0),e.title.text!==l._dfltTitle[u]&&(f=(e._titleStandoff||0)+(e._titleScoot||0),"l"===o&&(f+=WB(e))),e._fullDepth=Math.max(g,f)),e.automargin){r={x:0,y:0,r:0,l:0,t:0,b:0};var p=[0,1],v="number"==typeof e._shift?e._shift:0;if("x"===u){if("b"===o?r[o]=e._depth:(r[o]=e._depth=Math.max(n.width>0?c-n.top:0,d),p.reverse()),n.width>0){var m=n.right-(e._offset+e._length);m>0&&(r.xr=1,r.r=m);var y=e._offset-n.left;y>0&&(r.xl=0,r.l=y)}}else if("l"===o?(e._depth=Math.max(n.height>0?c-n.left:0,d),r[o]=e._depth-v):(e._depth=Math.max(n.height>0?n.right-c:0,d),r[o]=e._depth+v,p.reverse()),n.height>0){var b=n.bottom-(e._offset+e._length);b>0&&(r.yb=0,r.b=b);var x=e._offset-n.top;x>0&&(r.yt=1,r.t=x)}r[h]="free"===e.anchor?e.position:e._anchorAxis.domain[p[0]],e.title.text!==l._dfltTitle[u]&&(r[o]+=WB(e)+(e.title.standoff||0)),e.mirror&&"free"!==e.anchor&&((i={x:0,y:0,r:0,l:0,t:0,b:0})[s]=e.linewidth,e.mirror&&!0!==e.mirror&&(i[s]+=d),!0===e.mirror||"ticks"===e.mirror?i[h]=e._anchorAxis.domain[p[1]]:"all"!==e.mirror&&"allticks"!==e.mirror||(i[h]=[e._counterDomainMin,e._counterDomainMax][p[1]]))}$&&(a=wx.getComponentMethod("rangeslider","autoMarginOpts")(t,e)),"string"==typeof e.automargin&&(XB(r,e.automargin),XB(i,e.automargin)),Cx.autoMargin(t,OB(e),r),Cx.autoMargin(t,JB(e),i),Cx.autoMargin(t,PB(e),a)})),Ux.syncOrAsync(K)}}function tt(t){var n=c+(t||"tick");return x[n]||(x[n]=function(t,e,n){var r,i,a,o;if(t._selections[e].size())r=1/0,i=-1/0,a=1/0,o=-1/0,t._selections[e].each((function(){var t=zB(this),e=Gx.bBox(t.node().parentNode);r=Math.min(r,e.top),i=Math.max(i,e.bottom),a=Math.min(a,e.left),o=Math.max(o,e.right)}));else{var s=cB.makeLabelFns(t,n);r=i=s.yFn({dx:0,dy:0,fontSize:0}),a=o=s.xFn({dx:0,dy:0,fontSize:0})}return{top:r,bottom:i,left:a,right:o,height:i-r,width:o-a}}(e,n,v)),x[n]}},cB.getTickSigns=function(t,e){var n=t._id.charAt(0),r={x:"top",y:"right"}[n],i=t.side===r?1:-1,a=[-1,1,i,-i];return"inside"!==(e?(t.minor||{}).ticks:t.ticks)==("x"===n)&&(a=a.map((function(t){return-t}))),t.side&&a.push({l:-1,t:-1,r:1,b:1}[t.side.charAt(0)]),a},cB.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return Ax(t._offset+t.l2p(e.x),0)}:function(e){return Ax(0,t._offset+t.l2p(e.x))}},cB.makeTransTickLabelFn=function(t){var e=function(t){var e=t.ticklabelposition||"",n=function(t){return-1!==e.indexOf(t)},r=n("top"),i=n("left"),a=n("right"),o=n("bottom"),s=n("inside"),l=o||i||r||a;if(!l&&!s)return[0,0];var c=t.side,u=l?(t.tickwidth||0)/2:0,h=3,d=t.tickfont?t.tickfont.size:12;(o||r)&&(u+=d*oB,h+=(t.linewidth||0)/2);(i||a)&&(u+=(t.linewidth||0)/2,h+=3);s&&"top"===c&&(h-=d*(1-oB));(i||r)&&(u=-u);"bottom"!==c&&"right"!==c||(h=-h);return[l?u:0,s?h:0]}(t),n=e[0],r=e[1];return"x"===t._id.charAt(0)?function(e){return Ax(n+t._offset+t.l2p(VB(e)),r)}:function(e){return Ax(r,n+t._offset+t.l2p(VB(e)))}},cB.makeTickPath=function(t,e,n,r){r||(r={});var i=r.minor;if(i&&!t.minor)return"";var a=void 0!==r.len?r.len:i?t.minor.ticklen:t.ticklen,o=t._id.charAt(0),s=(t.linewidth||1)/2;return"x"===o?"M0,"+(e+s*n)+"v"+a*n:"M"+(e+s*n)+",0h"+a*n},cB.makeLabelFns=function(t,e,n){var r=t.ticklabelposition||"",i=function(t){return-1!==r.indexOf(t)},a=i("top"),o=i("left"),s=i("right"),l=i("bottom")||o||a||s,c=i("inside"),u="inside"===r&&"inside"===t.ticks||!c&&"outside"===t.ticks&&"boundaries"!==t.tickson,h=0,d=0,g=u?t.ticklen:0;if(c?g*=-1:l&&(g=0),u&&(h+=g,n)){var f=Ux.deg2rad(n);h=g*Math.cos(f)+1,d=g*Math.sin(f)}t.showticklabels&&(u||t.showline)&&(h+=.2*t.tickfont.size);var p,v,m,y,b,x={labelStandoff:h+=(t.linewidth||1)/2*(c?-1:1),labelShift:d},B=0,I=t.side,F=t._id.charAt(0),Q=t.tickangle;if("x"===F)y=(b=!c&&"bottom"===I||c&&"top"===I)?1:-1,c&&(y*=-1),p=d*y,v=e+h*y,m=b?1:-.2,90===Math.abs(Q)&&(c?m+=aB:m=-90===Q&&"bottom"===I?oB:90===Q&&"top"===I?aB:.5,B=aB/2*(Q/90)),x.xFn=function(t){return t.dx+p+B*t.fontSize},x.yFn=function(t){return t.dy+v+t.fontSize*m},x.anchorFn=function(t,e){if(l){if(o)return"end";if(s)return"start"}return Qx(e)&&0!==e&&180!==e?e*y<0!==c?"end":"start":"middle"},x.heightFn=function(e,n,r){return n<-60||n>60?-.5*r:"top"===t.side!==c?-r:0};else if("y"===F){if(y=(b=!c&&"left"===I||c&&"right"===I)?1:-1,c&&(y*=-1),p=h,v=d*y,m=0,c||90!==Math.abs(Q)||(m=-90===Q&&"left"===I||90===Q&&"right"===I?oB:.5),c){var C=Qx(Q)?+Q:0;if(0!==C){var w=Ux.deg2rad(C);B=Math.abs(Math.sin(w))*oB*y,m=0}}x.xFn=function(t){return t.dx+e-(p+t.fontSize*m)*y+B*t.fontSize},x.yFn=function(t){return t.dy+v+t.fontSize*aB},x.anchorFn=function(t,e){return Qx(e)&&90===Math.abs(e)?"middle":b?"end":"start"},x.heightFn=function(e,n,r){return"right"===t.side&&(n*=-1),n<-30?-r:n<30?-.5*r:0}}return x},cB.drawTicks=function(t,e,n){n=n||{};var r=e._id+"tick",i=[].concat(e.minor&&e.minor.ticks?n.vals.filter((function(t){return t.minor&&!t.noTick})):[]).concat(e.ticks?n.vals.filter((function(t){return!t.minor&&!t.noTick})):[]),a=n.layer.selectAll("path."+r).data(i,HB);a.exit().remove(),a.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).each((function(t){return kx.stroke(Fx.select(this),t.minor?e.minor.tickcolor:e.tickcolor)})).style("stroke-width",(function(n){return Gx.crispRound(t,n.minor?e.minor.tickwidth:e.tickwidth,1)+"px"})).attr("d",n.path).style("display",null),nI(e,[nB]),a.attr("transform",n.transFn)},cB.drawGrid=function(t,e,n){if(n=n||{},"sync"!==e.tickmode){var r=e._id+"grid",i=e.minor&&e.minor.showgrid,a=i?n.vals.filter((function(t){return t.minor})):[],o=e.showgrid?n.vals.filter((function(t){return!t.minor})):[],s=n.counterAxis;if(s&&cB.shouldShowZeroLine(t,e,s))for(var l="array"===e.tickmode,c=0;c<o.length;c++){var u=o[c].x;if(l?!u:Math.abs(u)<e.dtick/100){if(o=o.slice(0,c).concat(o.slice(c+1)),!l)break;c--}}e._gw=Gx.crispRound(t,e.gridwidth,1);for(var h=i?Gx.crispRound(t,e.minor.gridwidth,1):0,d=n.layer,g=n.minorLayer,f=1;f>=0;f--){var p=f?d:g;if(p){var v=p.selectAll("path."+r).data(f?o:a,HB);v.exit().remove(),v.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),v.attr("transform",n.transFn).attr("d",n.path).each((function(t){return kx.stroke(Fx.select(this),t.minor?e.minor.gridcolor:e.gridcolor||"#ddd")})).style("stroke-dasharray",(function(t){return Gx.dashStyle(t.minor?e.minor.griddash:e.griddash,t.minor?e.minor.gridwidth:e.gridwidth)})).style("stroke-width",(function(t){return(t.minor?h:e._gw)+"px"})).style("display",null),"function"==typeof n.path&&v.attr("d",n.path)}}nI(e,[tB,eB])}},cB.drawZeroLine=function(t,e,n){n=n||n;var r=e._id+"zl",i=cB.shouldShowZeroLine(t,e,n.counterAxis),a=n.layer.selectAll("path."+r).data(i?[{x:0,id:e._id}]:[]);a.exit().remove(),a.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each((function(){n.layer.selectAll("path").sort((function(t,e){return dB(t.id,e.id)}))})),a.attr("transform",n.transFn).attr("d",n.path).call(kx.stroke,e.zerolinecolor||kx.defaultLine).style("stroke-width",Gx.crispRound(t,e.zerolinewidth,e._gw||1)+"px").style("display",null),nI(e,[$x])},cB.drawLabels=function(t,e,n){n=n||{};var r=t._fullLayout,i=e._id,a=n.cls||i+"tick",o=n.vals.filter((function(t){return t.text})),s=n.labelFns,l=n.secondary?0:e.tickangle,c=(e._prevTickAngles||{})[a],u=n.layer.selectAll("g."+a).data(e.showticklabels?o:[],HB),h=[];function d(t,r){t.each((function(t){var i=Fx.select(this),a=i.select(".text-math-group"),o=s.anchorFn(t,r),l=n.transFn.call(i.node(),t)+(Qx(r)&&0!=+r?" rotate("+r+","+s.xFn(t)+","+(s.yFn(t)-t.fontSize/2)+")":""),c=Sx.lineCount(i),u=sB*t.fontSize,h=s.heightFn(t,Qx(r)?+r:0,(c-1)*u);if(h&&(l+=Ax(0,h)),a.empty()){var d=i.select("text");d.attr({transform:l,"text-anchor":o}),d.style("opacity",1),e._adjustTickLabelsOverflow&&e._adjustTickLabelsOverflow()}else{var g=Gx.bBox(a.node()).width*{end:-.5,start:.5}[o];a.attr("transform",l+Ax(g,0))}}))}u.enter().append("g").classed(a,1).append("text").attr("text-anchor","middle").each((function(e){var n=Fx.select(this),r=t._promises.length;n.call(Sx.positionText,s.xFn(e),s.yFn(e)).call(Gx.font,{family:e.font,size:e.fontSize,color:e.fontColor,weight:e.fontWeight,style:e.fontStyle,variant:e.fontVariant}).text(e.text).call(Sx.convertToTspans,t),t._promises[r]?h.push(t._promises.pop().then((function(){d(n,l)}))):d(n,l)})),nI(e,[rB]),u.exit().remove(),n.repositionOnUpdate&&u.each((function(t){Fx.select(this).select("text").call(Sx.positionText,s.xFn(t),s.yFn(t))})),e._adjustTickLabelsOverflow=function(){var n=e.ticklabeloverflow;if(n&&"allow"!==n){var i=-1!==n.indexOf("hide"),a="x"===e._id.charAt(0),o=0,s=a?t._fullLayout.width:t._fullLayout.height;if(-1!==n.indexOf("domain")){var l=Ux.simpleMap(e.range,e.r2l);o=e.l2p(l[0])+e._offset,s=e.l2p(l[1])+e._offset}var c=Math.min(o,s),h=Math.max(o,s),d=e.side,g=1/0,f=-1/0;for(var p in u.each((function(t){var n=Fx.select(this);if(n.select(".text-math-group").empty()){var r=Gx.bBox(n.node()),o=0;a?(r.right>h||r.left<c)&&(o=1):(r.bottom>h||r.top+(e.tickangle?0:t.fontSize/4)<c)&&(o=1);var s=n.select("text");o?i&&s.style("opacity",0):(s.style("opacity",1),g="bottom"===d||"right"===d?Math.min(g,a?r.top:r.left):-1/0,f="top"===d||"left"===d?Math.max(f,a?r.bottom:r.right):1/0)}})),r._plots){var v=r._plots[p];if(e._id===v.xaxis._id||e._id===v.yaxis._id){var m=a?v.yaxis:v.xaxis;m&&(m["_visibleLabelMin_"+e._id]=g,m["_visibleLabelMax_"+e._id]=f)}}}},e._hideCounterAxisInsideTickLabels=function(t){var n="x"===e._id.charAt(0),i=[];for(var a in r._plots){var o=r._plots[a];e._id!==o.xaxis._id&&e._id!==o.yaxis._id||i.push(n?o.yaxis:o.xaxis)}i.forEach((function(n,i){n&&eI(n)&&(t||[$x,eB,tB,nB,rB]).forEach((function(t){var a="tick"===t.K&&"text"===t.L&&"period"===e.ticklabelmode,o=r._plots[e._mainSubplot];(t.K===$x.K?o.zerolinelayer.selectAll("."+e._id+"zl"):t.K===eB.K?o.minorGridlayer.selectAll("."+e._id):t.K===tB.K?o.gridlayer.selectAll("."+e._id):o[e._id.charAt(0)+"axislayer"]).each((function(){var r=Fx.select(this);t.L&&(r=r.selectAll(t.L)),r.each((function(r){var o=e.l2p(a?VB(r):r.x)+e._offset,s=Fx.select(this);o<e["_visibleLabelMax_"+n._id]&&o>e["_visibleLabelMin_"+n._id]?s.style("display","none"):"tick"!==t.K||i||s.style("display",null)}))}))}))}))},d(u,c+1?c:l);var g=null;e._selections&&(e._selections[a]=u);var f=[function(){return h.length&&Promise.all(h)}];e.automargin&&r._redrawFromAutoMarginCount&&90===c?(g=c,f.push((function(){d(u,c)}))):f.push((function(){if(d(u,l),o.length&&e.autotickangles&&("log"!==e.type||"D"!==String(e.dtick).charAt(0))){g=e.autotickangles[0];var t,r=0,i=[],a=1;u.each((function(t){r=Math.max(r,t.fontSize);var n=e.l2p(t.x),o=zB(this),s=Gx.bBox(o.node());a=Math.max(a,Sx.lineCount(o)),i.push({top:0,bottom:10,height:10,left:n-s.width/2,right:n+s.width/2+2,width:s.width+2})}));var s=("boundaries"===e.tickson||e.showdividers)&&!n.secondary,c=o.length,h=Math.abs((o[c-1].x-o[0].x)*e._m)/(c-1),f=s?h/2:h,p=s?e.ticklen:1.25*r*a,v=f/Math.sqrt(Math.pow(f,2)+Math.pow(p,2)),m=e.autotickangles.map((function(t){return t*Math.PI/180})),y=m.find((function(t){return Math.abs(Math.cos(t))<=v}));void 0===y&&(y=m.reduce((function(t,e){return Math.abs(Math.cos(t))<Math.abs(Math.cos(e))?t:e}),m[0]));var b=y*(180/Math.PI);if(s){var x=2;for(e.ticks&&(x+=e.tickwidth/2),t=0;t<i.length;t++){var B=o[t].xbnd,I=i[t];if(null!==B[0]&&I.left-e.l2p(B[0])<x||null!==B[1]&&e.l2p(B[1])-I.right<x){g=b;break}}}else{var F=e.ticklabelposition||"",Q=function(t){return-1!==F.indexOf(t)},C=Q("top"),w=Q("left"),U=Q("right"),A=Q("bottom")||w||C||U?(e.tickwidth||0)+6:0;for(t=0;t<i.length-1;t++)if(Ux.bBoxIntersect(i[t],i[t+1],A)){g=b;break}}g&&d(u,g)}})),e._tickAngles&&f.push((function(){e._tickAngles[a]=null===g?Qx(l)?l:0:g}));var p=function(){var t=0,n=0;return u.each((function(r,i){var a,o=zB(this);o.select(".text-math-group").empty()&&(e._vals[i]&&(a=e._vals[i].bb||Gx.bBox(o.node()),e._vals[i].bb=a),t=Math.max(t,a.width),n=Math.max(n,a.height))})),{labelsMaxW:t,labelsMaxH:n}},v=e._anchorAxis;if(v&&(v.autorange||v.insiderange)&&eI(e)&&!gB(r,e._id)&&(r._insideTickLabelsUpdaterange||(r._insideTickLabelsUpdaterange={}),v.autorange&&(r._insideTickLabelsUpdaterange[v._name+".autorange"]=v.autorange,f.push(p)),v.insiderange)){var m=p(),y="y"===e._id.charAt(0)?m.labelsMaxW:m.labelsMaxH;y+=6,"inside"===e.ticklabelposition&&(y+=e.ticklen||0);var b="right"===e.side||"top"===e.side?1:-1,x=1===b?1:0,B=1===b?0:1,I=[];I[B]=v.range[B];var F=v.range,Q=v.r2p(F[x]),C=v.r2p(F[B]),w=r._insideTickLabelsUpdaterange[v._name+".range"];if(w){var U=v.r2p(w[x]),A=v.r2p(w[B]),S=b*("y"===e._id.charAt(0)?1:-1);S*Q<S*U&&(Q=U,I[x]=F[x]=w[x]),S*C>S*A&&(C=A,I[B]=F[B]=w[B])}var L=Math.abs(C-Q);L-y>0?y*=1+y/(L-=y):y=0,"y"!==e._id.charAt(0)&&(y=-y),I[x]=v.p2r(v.r2p(F[x])+b*y),"min"===v.autorange||"max reversed"===v.autorange?(I[0]=null,v._rangeInitial0=void 0,v._rangeInitial1=void 0):"max"!==v.autorange&&"min reversed"!==v.autorange||(I[1]=null,v._rangeInitial0=void 0,v._rangeInitial1=void 0),r._insideTickLabelsUpdaterange[v._name+".range"]=I}var k=Ux.syncOrAsync(f);return k&&k.then&&t._promises.push(k),k},cB.getPxPosition=function(t,e){var n,r=t._fullLayout._size,i=e._id.charAt(0),a=e.side;return"free"!==e.anchor?n=e._anchorAxis:"x"===i?n={_offset:r.t+(1-(e.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(e.position||0)*r.w+e._shift,_length:0}),"top"===a||"left"===a?n._offset:"bottom"===a||"right"===a?n._offset+n._length:void 0},cB.shouldShowZeroLine=function(t,e,n){var r=Ux.simpleMap(e.range,e.r2l);return r[0]*r[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&!(e.rangebreaks&&e.maskBreaks(0)===qx)&&(YB(e,0)||!function(t,e,n,r){var i=n._mainAxis;if(!i)return;var a=t._fullLayout,o=e._id.charAt(0),s=cB.counterLetter(e._id),l=e._offset+(Math.abs(r[0])<Math.abs(r[1])==("x"===o)?0:e._length);function c(t){if(!t.showline||!t.linewidth)return!1;var n=Math.max((t.linewidth+e.zerolinewidth)/2,1);function r(t){return"number"==typeof t&&Math.abs(t-l)<n}if(r(t._mainLinePosition)||r(t._mainMirrorPosition))return!0;var i=t._linepositions||{};for(var a in i)if(r(i[a][0])||r(i[a][1]))return!0}var u=a._plots[n._mainSubplot];if(!(u.mainplotinfo||u).overlays.length)return c(n);for(var h=cB.list(t,s),d=0;d<h.length;d++){var g=h[d];if(g._mainAxis===i&&c(g))return!0}}(t,e,n,r)||function(t,e){for(var n=t._fullData,r=e._mainSubplot,i=e._id.charAt(0),a=0;a<n.length;a++){var o=n[a];if(!0===o.visible&&o.xaxis+o.yaxis===r){if(wx.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[i])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===i)return!0}}return!1}(t,e))},cB.clipEnds=function(t,e){return e.filter((function(e){return YB(t,e.x)}))},cB.allowAutoMargin=function(t){for(var e=cB.list(t,"",!0),n=0;n<e.length;n++){var r=e[n];r.automargin&&(Cx.allowAutoMargin(t,OB(r)),r.mirror&&Cx.allowAutoMargin(t,JB(r))),wx.getComponentMethod("rangeslider","isVisible")(r)&&Cx.allowAutoMargin(t,PB(r))}},cB.swap=function(t,e){for(var n=function(t,e){var n,r,i=[];for(n=0;n<e.length;n++){var a=[],o=t._fullData[e[n]].xaxis,s=t._fullData[e[n]].yaxis;if(o&&s){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(o)&&-1===i[r].y.indexOf(s)||a.push(r);if(a.length){var l,c=i[a[0]];if(a.length>1)for(r=1;r<a.length;r++)l=i[a[r]],jB(c.x,l.x),jB(c.y,l.y);jB(c.x,[o]),jB(c.y,[s])}else i.push({x:[o],y:[s]})}}return i}(t,e),r=0;r<n.length;r++)KB(t,n[r].x,n[r].y)};var iI=$p.exports,aI=function(t,e,n){var r,i;if(n){var a="reversed"===e||"min reversed"===e||"max reversed"===e;r=n[a?1:0],i=n[a?0:1]}var o=t("autorangeoptions.minallowed",null===i?r:void 0),s=t("autorangeoptions.maxallowed",null===r?i:void 0);void 0===o&&t("autorangeoptions.clipmin"),void 0===s&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")},oI=function(t,e,n,r){var i=e._template||{},a=e.type||i.type||"-";n("minallowed"),n("maxallowed");var o,s=n("range");s||(r.noInsiderange||"log"===a||(!(o=n("insiderange"))||null!==o[0]&&null!==o[1]||(e.insiderange=!1,o=void 0),o&&(s=n("range",o))));var l,c=e.getAutorangeDflt(s,r),u=n("autorange",c);!s||(null!==s[0]||null!==s[1])&&(null!==s[0]&&null!==s[1]||"reversed"!==u&&!0!==u)&&(null===s[0]||"min"!==u&&"max reversed"!==u)&&(null===s[1]||"max"!==u&&"min reversed"!==u)||(s=void 0,delete e.range,e.autorange=!0,l=!0),l||(u=n("autorange",c=e.getAutorangeDflt(s,r))),u&&(aI(n,u,s),"linear"!==a&&"-"!==a||n("rangemode")),e.cleanRange()},sI={},lI={exports:{}},cI={left:0,top:0},uI=function(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r=t.clientX||0,i=t.clientY||0,a=(o=e,o===window||o===document||o===document.body?cI:o.getBoundingClientRect());var o;return n[0]=r-a.left,n[1]=i-a.top,n};var hI=yf,dI=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],gI={exports:{}},fI=Yf,pI=gg,vI=$h.getGraphDiv,mI=yu,yI=gI.exports={};yI.wrapped=function(t,e,n){(t=vI(t))._fullLayout&&pI.clear(t._fullLayout._uid+mI.HOVERID),yI.raw(t,e,n)},yI.raw=function(t,e){var n=t._fullLayout,r=t._hoverdata;e||(e={}),e.target&&!t._dragged&&!1===fI.triggerHandler(t,"plotly_beforehover",e)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&r&&t.emit("plotly_unhover",{event:e,points:r}))};var bI=gI.exports,xI=uI,BI=wf,II=yf.removeElement,FI=lp,QI=lI.exports={};QI.align=function(t,e,n,r,i){var a=(t-n)/(r-n),o=a+e/(r-n),s=(a+o)/2;return"left"===i||"bottom"===i?a:"center"===i||"middle"===i?s:"right"===i||"top"===i?o:a<2/3-s?a:o>4/3-s?o:s},QI.getCursor=function(t,e,n,r){return t="left"===n?0:"center"===n?1:"right"===n?2:hI.constrain(Math.floor(3*t),0,2),e="bottom"===r?0:"middle"===r?1:"top"===r?2:hI.constrain(Math.floor(3*e),0,2),dI[e][t]};var CI=bI;function wI(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function UI(t){return xI(t.changedTouches?t.changedTouches[0]:t,document.body)}QI.unhover=CI.wrapped,QI.unhoverRaw=CI.raw,QI.init=function(t){var e,n,r,i,a,o,s,l,c=t.gd,u=1,h=c._context.doubleClickDelay,d=t.element;c._mouseDownTime||(c._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=f,d.ontouchstart=f;var g=t.clampFn||function(t,e,n){return Math.abs(t)<n&&(t=0),Math.abs(e)<n&&(e=0),[t,e]};function f(g){c._dragged=!1,c._dragging=!0;var f=UI(g);e=f[0],n=f[1],s=g.target,o=g,l=2===g.buttons||g.ctrlKey,void 0===g.clientX&&void 0===g.clientY&&(g.clientX=e,g.clientY=n),(r=(new Date).getTime())-c._mouseDownTime<h?u+=1:(u=1,c._mouseDownTime=r),t.prepFn&&t.prepFn(g,e,n),BI&&!l?(a=wI()).style.cursor=window.getComputedStyle(d).cursor:BI||(a=document,i=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mouseup",v),document.addEventListener("touchend",v),!1!==t.dragmode&&(g.preventDefault(),document.addEventListener("mousemove",p),document.addEventListener("touchmove",p,{passive:!1}))}function p(r){r.preventDefault();var i=UI(r),a=t.minDrag||FI.MINDRAG,o=g(i[0]-e,i[1]-n,a),s=o[0],u=o[1];(s||u)&&(c._dragged=!0,QI.unhover(c,r)),c._dragged&&t.moveFn&&!l&&(c._dragdata={element:d,dx:s,dy:u},t.moveFn(s,u))}function v(e){if(delete c._dragdata,!1!==t.dragmode&&(e.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("touchmove",p)),document.removeEventListener("mouseup",v),document.removeEventListener("touchend",v),BI?II(a):i&&(a.documentElement.style.cursor=i,i=null),c._dragging){if(c._dragging=!1,(new Date).getTime()-c._mouseDownTime>h&&(u=Math.max(u-1,1)),c._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(u,o),!l){var n;try{n=new MouseEvent("click",e)}catch(t){var r=UI(e);(n=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,r[0],r[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}s.dispatchEvent(n)}c._dragging=!1,c._dragged=!1}else c._dragged=!1}},QI.coverSlip=wI;var AI=lI.exports,SI={},LI=function(t,e){(t.attr("class")||"").split(" ").forEach((function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)})),e&&t.classed("cursor-"+e,!0)},kI=LI,GI="data-savedcursor",_I=mu(),RI=Xu,EI={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend",description:["Determines whether or not this legend is visible."].join(" ")},bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:RI.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:_I({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:_I({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},entrywidth:{valType:"number",min:0,editType:"legend",description:["Sets the width (in px or fraction) of the legend.","Use 0 to size the entry based on the text width,","when `entrywidthmode` is set to *pixels*."].join(" ")},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend",description:"Determines what entrywidth means."},indentation:{valType:"number",min:-15,dflt:0,editType:"legend",description:"Sets the indentation (in px) of the legend entries."},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",editType:"legend",description:["Sets the x position with respect to `xref` (in normalized coordinates) of the legend.","When `xref` is *paper*, defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends.","When `xref` is *container*, defaults to *1* for vertical legends and","defaults to *0* for horizontal legends.","Must be between *0* and *1* if `xref` is *container*.","and between *-2* and *3* if `xref` is *paper*."].join(" ")},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",editType:"legend",description:["Sets the y position with respect to `yref` (in normalized coordinates) of the legend.","When `yref` is *paper*, defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders.","When `yref` is *container*, defaults to *1*.","Must be between *0* and *1* if `yref` is *container*","and between *-2* and *3* if `yref` is *paper*."].join(" ")},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:_I({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","top center and top right are for horizontal alignment","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"},TI={isGrouped:function(t){return-1!==(t.traceorder||"").indexOf("grouped")},isVertical:function(t){return"h"!==t.orientation},isReversed:function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},MI=hh,NI=yf,DI=$f,XI=_u,ZI=EI,VI=Hd,HI=TI;function WI(t,e,n,r){var i=e[t]||{},a=DI.newContainer(n,t);function o(t,e){return NI.coerce(i,a,ZI,t,e)}var s=NI.coerceFont(o,"font",n.font);if(o("bgcolor",n.paper_bgcolor),o("bordercolor"),o("visible")){for(var l,c=function(t,e){var n=l._input,r=l;return NI.coerce(n,r,XI,t,e)},u=n.font||{},h=NI.coerceFont(o,"grouptitlefont",NI.extendFlat({},u,{size:Math.round(1.1*u.size)})),d=0,g=!1,f="normal",p=(n.shapes||[]).filter((function(t){return t.showlegend})),v=r.concat(p).filter((function(e){return t===(e.legend||"legend")})),m=0;m<v.length;m++)if((l=v[m]).visible){var y=l._isShape;(l.showlegend||l._dfltShowLegend&&!(l._module&&l._module.attributes&&l._module.attributes.showlegend&&!1===l._module.attributes.showlegend.dflt))&&(d++,l.showlegend&&(g=!0,(!y&&MI.traceIs(l,"pie-like")||!0===l._input.showlegend)&&d++),NI.coerceFont(c,"legendgrouptitle.font",h)),(!y&&MI.traceIs(l,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(l.fill))&&(f=HI.isGrouped({traceorder:f})?"grouped+reversed":"reversed"),void 0!==l.legendgroup&&""!==l.legendgroup&&(f=HI.isReversed({traceorder:f})?"reversed+grouped":"grouped")}var b=NI.coerce(e,n,VI,"showlegend",g&&d>("legend"===t?1:0));if(!1===b&&(n[t]=void 0),(!1!==b||i.uirevision)&&(o("uirevision",n.uirevision),!1!==b)){o("borderwidth");var x,B,I,F="h"===o("orientation"),Q="paper"===o("yref"),C="paper"===o("xref"),w="left";if(F?(x=0,MI.getComponentMethod("rangeslider","isVisible")(e.xaxis)?Q?(B=1.1,I="bottom"):(B=1,I="top"):Q?(B=-.1,I="top"):(B=0,I="bottom")):(B=1,I="auto",C?x=1.02:(x=1,w="right")),NI.coerce(i,a,{x:{valType:"number",editType:"legend",min:C?-2:0,max:C?3:1,dflt:x}},"x"),NI.coerce(i,a,{y:{valType:"number",editType:"legend",min:Q?-2:0,max:Q?3:1,dflt:B}},"y"),o("traceorder",f),HI.isGrouped(n[t])&&o("tracegroupgap"),o("entrywidth"),o("entrywidthmode"),o("indentation"),o("itemsizing"),o("itemwidth"),o("itemclick"),o("itemdoubleclick"),o("groupclick"),o("xanchor",w),o("yanchor",I),o("valign"),NI.noneOrAll(i,a,["x","y"]),o("title.text")){o("title.side",F?"left":"top");var U=NI.extendFlat({},s,{size:NI.bigFont(s.size)});NI.coerceFont(o,"title.font",U)}}}}var YI=function(t,e,n){var r,i=n.slice(),a=e.shapes;if(a)for(r=0;r<a.length;r++){var o=a[r];if(o.showlegend){var s={_input:o._input,visible:o.visible,showlegend:o.showlegend,legend:o.legend};i.push(s)}}var l=["legend"];for(r=0;r<i.length;r++)NI.pushUnique(l,i[r].legend);for(e._legends=[],r=0;r<l.length;r++){var c=l[r];WI(c,t,e,i),e[c]&&e[c].visible&&(e[c]._id=c),e._legends.push(c)}},zI=hh,OI=yf,JI=OI.pushUnique,PI=!0,jI={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5},KI=hh,qI=TI,$I={};!function(t){var e=yf;function n(t){return-1!==t.indexOf("e")?t.replace(/[.]?0+e/,"e"):-1!==t.indexOf(".")?t.replace(/[.]?0+$/,""):t}t.formatPiePercent=function(t,r){var i=n((100*t).toPrecision(3));return e.numSeparate(i,r)+"%"},t.formatPieValue=function(t,r){var i=n(t.toPrecision(10));return e.numSeparate(i,r)},t.getFirstFilled=function(t,n){if(e.isArrayOrTypedArray(t))for(var r=0;r<n.length;r++){var i=t[n[r]];if(i||0===i||""===i)return i}},t.castOption=function(n,r){return e.isArrayOrTypedArray(n)?t.getFirstFilled(n,r):n||void 0},t.getRotationAngle=function(t){return("auto"===t?0:t)*Math.PI/180}}($I);var tF=Qb,eF=Pu,nF=Pu,rF=$I.castOption,iF=function(t,e,n,r){var i=n.marker.pattern;i&&i.shape?tF.pointStyle(t,n,r,e):eF.fill(t,e.color)},aF=uo,oF=hh,sF=yf,lF=sF.strTranslate,cF=Qb,uF=Pu,hF=mv.extractOpts,dF=py,gF=function(t,e,n,r){var i=n.marker.line,a=rF(i.color,e.pts)||nF.defaultLine,o=rF(i.width,e.pts)||0;t.call(iF,e,n,r).style("stroke-width",o).call(nF.stroke,a)},fF=$I.castOption,pF=jI,vF=function(t,e,n){var r=e._fullLayout;n||(n=r.legend);var i="constant"===n.itemsizing,a=n.itemwidth,o=lF((a+2*pF.itemGap)/2,0),s=function(t,e,n,r){var a;if(t+1)a=t;else{if(!(e&&e.width>0))return 0;a=e.width}return i?r:Math.min(a,n)};function l(t,r,i){var a=t[0].trace,l=a.marker||{},c=l.line||{},u=l.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",h=i?a.visible&&a.type===i:oF.traceIs(a,"bar"),d=aF.select(r).select("g.legendpoints").selectAll("path.legend"+i).data(h?[t]:[]);d.enter().append("path").classed("legend"+i,!0).attr("d",u).attr("transform",o),d.exit().remove(),d.each((function(t){var r=aF.select(this),i=t[0],o=s(i.mlw,l.line,5,2);r.style("stroke-width",o+"px");var u=i.mcc;if(!n._inHover&&"mc"in i){var h=hF(l),d=h.mid;void 0===d&&(d=(h.max+h.min)/2),u=cF.tryColorscale(l,"")(d)}var g=u||i.mc||l.color,f=l.pattern,p=f&&cF.getPatternAttr(f.shape,0,"");if(p){var v=cF.getPatternAttr(f.bgcolor,0,null),m=cF.getPatternAttr(f.fgcolor,0,null),y=f.fgopacity,b=bF(f.size,8,10),x=bF(f.solidity,.5,1),B="legend-"+a.uid;r.call(cF.pattern,"legend",e,B,p,b,x,u,f.fillmode,v,m,y)}else r.call(uF.fill,g);o&&uF.stroke(r,i.mlc||c.color)}))}function c(t,n,r){var i=t[0],a=i.trace,l=r?a.visible&&a.type===r:oF.traceIs(a,r),c=aF.select(n).select("g.legendpoints").selectAll("path.legend"+r).data(l?[t]:[]);if(c.enter().append("path").classed("legend"+r,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",o),c.exit().remove(),c.size()){var u=a.marker||{},h=s(fF(u.line.width,i.pts),u.line,5,2),d="pieLike",g=sF.minExtend(a,{marker:{line:{width:h}}},d),f=sF.minExtend(i,{trace:g},d);gF(c,f,g,e)}}t.each((function(t){var e=aF.select(this),r=sF.ensureSingle(e,"g","layers");r.style("opacity",t[0].trace.opacity);var i=n.indentation,a=n.valign,o=t[0].lineHeight,s=t[0].height;if("middle"===a&&0===i||!o||!s)r.attr("transform",null);else{var l={top:1,bottom:-1}[a]*(.5*(o-s+3))||0,c=n.indentation;r.attr("transform",lF(c,l))}r.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),r.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);var u=r.selectAll("g.legendsymbols").data([t]);u.enter().append("g").classed("legendsymbols",!0),u.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)})).each((function(t){var n,r=t[0].trace,i=[];if(r.visible)switch(r.type){case"histogram2d":case"heatmap":i=[["M-15,-2V4H15V-2Z"]],n=!0;break;case"choropleth":case"choroplethmapbox":i=[["M-6,-6V6H6V-6Z"]],n=!0;break;case"densitymapbox":i=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],n="radial";break;case"cone":i=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],n=!1;break;case"streamtube":i=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],n=!1;break;case"surface":i=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],n=!0;break;case"mesh3d":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!1;break;case"volume":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!0;break;case"isosurface":i=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],n=!1}var a=aF.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(i);a.enter().append("path").classed("legend3dandfriends",!0).attr("transform",o).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(t,i){var a,o=aF.select(this),s=hF(r),l=s.colorscale,c=s.reversescale;if(l){if(!n){var u=l.length;a=0===i?l[c?u-1:0][1]:1===i?l[c?0:u-1][1]:l[Math.floor((u-1)/2)][1]}}else{var h=r.vertexcolor||r.facecolor||r.color;a=sF.isArrayOrTypedArray(h)?h[i]||h[0]:h}o.attr("d",t[0]),a?o.call(uF.fill,a):o.call((function(t){if(t.size()){var i="legendfill-"+r.uid;cF.gradient(t,e,i,mF(c,"radial"===n),l,"fill")}}))}))})).each((function(t){var e=t[0].trace,n="waterfall"===e.type;if(t[0]._distinct&&n){var r=t[0].trace[t[0].dir].marker;return t[0].mc=r.color,t[0].mlw=r.line.width,t[0].mlc=r.line.color,l(t,this,"waterfall")}var i=[];e.visible&&n&&(i=t[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var a=aF.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(i);a.enter().append("path").classed("legendwaterfall",!0).attr("transform",o).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(t){var n=aF.select(this),r=e[t[0]].marker,i=s(void 0,r.line,5,2);n.attr("d",t[1]).style("stroke-width",i+"px").call(uF.fill,r.color),i&&n.call(uF.stroke,r.line.color)}))})).each((function(t){l(t,this,"funnel")})).each((function(t){l(t,this)})).each((function(t){var n=t[0].trace,r=aF.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&oF.traceIs(n,"box-violin")?[t]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",o),r.exit().remove(),r.each((function(){var t=aF.select(this);if("all"!==n.boxpoints&&"all"!==n.points||0!==uF.opacity(n.fillcolor)||0!==uF.opacity((n.line||{}).color)){var a=s(void 0,n.line,5,2);t.style("stroke-width",a+"px").call(uF.fill,n.fillcolor),a&&uF.stroke(t,n.line.color)}else{var o=sF.minExtend(n,{marker:{size:i?12:sF.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});r.call(cF.pointStyle,o,e)}}))})).each((function(t){c(t,this,"funnelarea")})).each((function(t){c(t,this,"pie")})).each((function(t){var n,r,i=yF(t),o=i.showFill,l=i.showLine,c=i.showGradientLine,u=i.showGradientFill,h=i.anyFill,d=i.anyLine,g=t[0],f=g.trace,p=hF(f),v=p.colorscale,m=p.reversescale,y=function(t){if(t.size())if(o)cF.fillGroupStyle(t,e,!0);else{var n="legendfill-"+f.uid;cF.gradient(t,e,n,mF(m),v,"fill")}},b=dF.hasMarkers(f)||!h?"M5,0":d?"M5,-2":"M5,-3",x=aF.select(this),B=x.select(".legendfill").selectAll("path").data(o||u?[t]:[]);if(B.enter().append("path").classed("js-fill",!0),B.exit().remove(),B.attr("d",b+"h"+a+"v6h-"+a+"z").call(y),l||c){var I=s(void 0,f.line,10,5);r=sF.minExtend(f,{line:{width:I}}),n=[sF.minExtend(g,{trace:r})]}var F=x.select(".legendlines").selectAll("path").data(l||c?[n]:[]);F.enter().append("path").classed("js-line",!0),F.exit().remove(),F.attr("d",b+(c?"l"+a+",0.0001":"h"+a)).call(l?cF.lineGroupStyle:function(t){if(t.size()){var n="legendline-"+f.uid;cF.lineGroupStyle(t),cF.gradient(t,e,n,mF(m),v,"stroke")}})})).each((function(t){var n,r,a=yF(t),s=a.anyFill,l=a.anyLine,c=a.showLine,u=a.showMarker,h=t[0],d=h.trace,g=!u&&!l&&!s&&dF.hasText(d);function f(t,e,n,r){var a=sF.nestedProperty(d,t).get(),o=sF.isArrayOrTypedArray(a)&&e?e(a):a;if(i&&o&&void 0!==r&&(o=r),n){if(o<n[0])return n[0];if(o>n[1])return n[1]}return o}function p(t){return h._distinct&&h.index&&t[h.index]?t[h.index]:t[0]}if(u||g||c){var v={},m={};if(u){v.mc=f("marker.color",p),v.mx=f("marker.symbol",p),v.mo=f("marker.opacity",sF.mean,[.2,1]),v.mlc=f("marker.line.color",p),v.mlw=f("marker.line.width",sF.mean,[0,5],2),m.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var y=f("marker.size",sF.mean,[2,16],12);v.ms=y,m.marker.size=y}c&&(m.line={width:f("line.width",p,[0,10],5)}),g&&(v.tx="Aa",v.tp=f("textposition",p),v.ts=10,v.tc=f("textfont.color",p),v.tf=f("textfont.family",p),v.tw=f("textfont.weight",p),v.ty=f("textfont.style",p),v.tv=f("textfont.variant",p)),n=[sF.minExtend(h,v)],(r=sF.minExtend(d,m)).selectedpoints=null,r.texttemplate=null}var b=aF.select(this).select("g.legendpoints"),x=b.selectAll("path.scatterpts").data(u?n:[]);x.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",o),x.exit().remove(),x.call(cF.pointStyle,r,e),u&&(n[0].mrc=3);var B=b.selectAll("g.pointtext").data(g?n:[]);B.enter().append("g").classed("pointtext",!0).append("text").attr("transform",o),B.exit().remove(),B.selectAll("text").call(cF.textPointStyle,r,e)})).each((function(t){var e=t[0].trace,n=aF.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(e.visible&&"candlestick"===e.type?[t,t]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",(function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"})).attr("transform",o).style("stroke-miterlimit",1),n.exit().remove(),n.each((function(t,n){var r=aF.select(this),i=e[n?"increasing":"decreasing"],a=s(void 0,i.line,5,2);r.style("stroke-width",a+"px").call(uF.fill,i.fillcolor),a&&uF.stroke(r,i.line.color)}))})).each((function(t){var e=t[0].trace,n=aF.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(e.visible&&"ohlc"===e.type?[t,t]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",(function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"})).attr("transform",o).style("stroke-miterlimit",1),n.exit().remove(),n.each((function(t,n){var r=aF.select(this),i=e[n?"increasing":"decreasing"],a=s(void 0,i.line,5,2);r.style("fill","none").call(cF.dashLine,i.line.dash,a),a&&uF.stroke(r,i.line.color)}))}))};function mF(t,e){return(e?"radial":"horizontal")+(t?"":"reversed")}function yF(t){var e=t[0].trace,n=e.contours,r=dF.hasLines(e),i=dF.hasMarkers(e),a=e.visible&&e.fill&&"none"!==e.fill,o=!1,s=!1;if(n){var l=n.coloring;"lines"===l?o=!0:r="none"===l||"heatmap"===l||n.showlines,"constraint"===n.type?a="="!==n._operation:"fill"!==l&&"heatmap"!==l||(s=!0)}return{showMarker:i,showLine:r,showFill:a,showGradientLine:o,showGradientFill:s,anyLine:r||o,anyFill:a||s}}function bF(t,e,n){return t&&sF.isArrayOrTypedArray(t)?e:t>n?n:t}var xF=uo,BF=yf,IF=qp,FF=hh,QF=Yf,CF=AI,wF=Qb,UF=Pu,AF=tv,SF=function(t,e,n){var r=e._fullLayout;if(!e._dragged&&!e._editing){var i,a=r.legend.itemclick,o=r.legend.itemdoubleclick,s=r.legend.groupclick;if(1===n&&"toggle"===a&&"toggleothers"===o&&PI&&e.data&&e._context.showTips?(OI.notifier(OI._(e,"Double-click on legend to isolate one trace"),"long"),PI=!1):PI=!1,1===n?i=a:2===n&&(i=o),i){var l="togglegroup"===s,c=r.hiddenlabels?r.hiddenlabels.slice():[],u=t.data()[0][0];if(!u.groupTitle||!u.noClick){var h=e._fullData,d=(r.shapes||[]).filter((function(t){return t.showlegend})),g=h.concat(d),f=u.trace;f._isShape&&(f=f._fullInput);var p,v,m,y,b,x=f.legendgroup,B={},I=[],F=[],Q=[],C=(r.shapes||[]).map((function(t){return t._input})),w=!1,U=f.legend,A=f._fullInput;if(!(A&&A._isShape)&&zI.traceIs(f,"pie-like")){var S=u.label,L=c.indexOf(S);if("toggle"===i)-1===L?c.push(S):c.splice(L,1);else if("toggleothers"===i){var k=-1!==L,G=[];for(p=0;p<e.calcdata.length;p++){var _=e.calcdata[p];for(v=0;v<_.length;v++){var R=_[v].label;U===_[0].trace.legend&&S!==R&&(-1===c.indexOf(R)&&(k=!0),JI(c,R),G.push(R))}}if(!k)for(var E=0;E<G.length;E++){var T=c.indexOf(G[E]);-1!==T&&c.splice(T,1)}}zI.call("_guiRelayout",e,"hiddenlabels",c)}else{var M,N=x&&x.length,D=[];if(N)for(p=0;p<g.length;p++)(M=g[p]).visible&&M.legendgroup===x&&D.push(p);if("toggle"===i){var X;switch(f.visible){case!0:X="legendonly";break;case!1:X=!1;break;case"legendonly":X=!0}if(N)if(l)for(p=0;p<g.length;p++){var Z=g[p];!1!==Z.visible&&Z.legendgroup===x&&j(Z,X)}else j(f,X);else j(f,X)}else if("toggleothers"===i){var V,H,W,Y,z=!0;for(p=0;p<g.length;p++)if(V=(Y=g[p])===f,H=!0!==Y.showlegend,!(V||H||N&&Y.legendgroup===x||Y.legend!==U||!0!==Y.visible||zI.traceIs(Y,"notLegendIsolatable"))){z=!1;break}for(p=0;p<g.length;p++)if(!1!==(Y=g[p]).visible&&Y.legend===U&&!zI.traceIs(Y,"notLegendIsolatable"))switch(f.visible){case"legendonly":j(Y,!0);break;case!0:W=!!z||"legendonly",V=Y===f,H=!0!==Y.showlegend&&!Y.legendgroup,j(Y,!(!(V||N&&Y.legendgroup===x)&&!H)||W)}}for(p=0;p<F.length;p++)if(m=F[p]){var O=m.constructUpdate(),J=Object.keys(O);for(v=0;v<J.length;v++)y=J[v],(B[y]=B[y]||[])[Q[p]]=O[y]}for(b=Object.keys(B),p=0;p<b.length;p++)for(y=b[p],v=0;v<I.length;v++)B[y].hasOwnProperty(v)||(B[y][v]=void 0);w?zI.call("_guiUpdate",e,B,{shapes:C},I):zI.call("_guiRestyle",e,B,I)}}}}function P(t,e){var n=I.indexOf(t),r=B.visible;return r||(r=B.visible=[]),-1===I.indexOf(t)&&(I.push(t),n=I.length-1),r[n]=e,n}function j(t,e){if(!u.groupTitle||l){var n,r=t._fullInput||t,i=r._isShape,a=r.index;if(void 0===a&&(a=r._index),zI.hasTransform(r,"groupby")){var o=F[a];if(!o){var s=zI.getTransformIndices(r,"groupby"),c=s[s.length-1];o=OI.keyedContainer(r,"transforms["+c+"].styles","target","value.visible"),F[a]=o}var h=o.get(t._group);void 0===h&&(h=!0),!1!==h&&o.set(t._group,e),Q[a]=P(a,!1!==r.visible)}else{var d=!1!==r.visible&&e;i?(n=d,C[a].visible=n,w=!0):P(a,d)}}}},LF=jI,kF=nv.LINE_SPACING,GF=nv.FROM_TL,_F=nv.FROM_BR,RF=function(t,e,n){var r,i,a=e._inHover,o=qI.isGrouped(e),s=qI.isReversed(e),l={},c=[],u=!1,h={},d=0,g=0;function f(t,r,i){if(!1!==e.visible&&(!n||t===e._id))if(""!==r&&qI.isGrouped(e))-1===c.indexOf(r)?(c.push(r),u=!0,l[r]=[i]):l[r].push(i);else{var a="~~i"+d;c.push(a),l[a]=[i],d++}}for(r=0;r<t.length;r++){var p=t[r],v=p[0],m=v.trace,y=m.legend,b=m.legendgroup;if(a||m.visible&&m.showlegend)if(KI.traceIs(m,"pie-like"))for(h[b]||(h[b]={}),i=0;i<p.length;i++){var x=p[i].label;h[b][x]||(f(y,b,{label:x,color:p[i].color,i:p[i].i,trace:m,pts:p[i].pts}),h[b][x]=!0,g=Math.max(g,(x||"").length))}else f(y,b,v),g=Math.max(g,(m.name||"").length)}if(!c.length)return[];var B=!u||!o,I=[];for(r=0;r<c.length;r++){var F=l[c[r]];B?I.push(F[0]):I.push(F)}for(B&&(I=[I]),r=0;r<I.length;r++){var Q=1/0;for(i=0;i<I[r].length;i++){var C=I[r][i].trace.legendrank;Q>C&&(Q=C)}I[r][0]._groupMinRank=Q,I[r][0]._preGroupSort=r}var w=function(t,e){return t.trace.legendrank-e.trace.legendrank||t._preSort-e._preSort};for(I.forEach((function(t,e){t[0]._preGroupSort=e})),I.sort((function(t,e){return t[0]._groupMinRank-e[0]._groupMinRank||t[0]._preGroupSort-e[0]._preGroupSort})),r=0;r<I.length;r++){I[r].forEach((function(t,e){t._preSort=e})),I[r].sort(w);var U=I[r][0].trace,A=null;for(i=0;i<I[r].length;i++){var S=I[r][i].trace.legendgrouptitle;if(S&&S.text){A=S,a&&(S.font=e._groupTitleFont);break}}if(s&&I[r].reverse(),A){var L=!1;for(i=0;i<I[r].length;i++)if(KI.traceIs(I[r][i].trace,"pie-like")){L=!0;break}I[r].unshift({i:-1,groupTitle:A,noClick:L,trace:{showlegend:U.showlegend,legendgroup:U.legendgroup,visible:"toggleitem"===e.groupclick||U.visible}})}for(i=0;i<I[r].length;i++)I[r][i]=[I[r][i]]}return e._lgroupsLength=I.length,e._maxNameLength=g,I},EF=vF,TF=TI,MF=1,NF=/^legend[0-9]*$/,DF=function(t,e){if(e)XF(t,e);else{var n=t._fullLayout,r=n._legends;n._infolayer.selectAll('[class^="legend"]').each((function(){var t=xF.select(this),e=t.attr("class").split(" ")[0];e.match(NF)&&-1===r.indexOf(e)&&t.remove()}));for(var i=0;i<r.length;i++){var a=r[i];XF(t,t._fullLayout[a])}}};function XF(t,e){var n,r,i=e||{},a=t._fullLayout,o=PF(i),s=i._inHover;if(s?(r=i.layer,n="hover"):(r=a._infolayer,n=o),r){var l;if(n+=a._uid,t._legendMouseDownTime||(t._legendMouseDownTime=0),s){if(!i.entries)return;l=RF(i.entries,i)}else{for(var c=(t.calcdata||[]).slice(),u=a.shapes,h=0;h<u.length;h++){var d=u[h];if(d.showlegend){var g={_isShape:!0,_fullInput:d,index:d._index,name:d.name||d.label.text||"shape "+d._index,legend:d.legend,legendgroup:d.legendgroup,legendgrouptitle:d.legendgrouptitle,legendrank:d.legendrank,legendwidth:d.legendwidth,showlegend:d.showlegend,visible:d.visible,opacity:d.opacity,mode:"line"===d.type?"lines":"markers",line:d.line,marker:{line:d.line,color:d.fillcolor,size:12,symbol:"rect"===d.type?"square":"circle"===d.type?"circle":"hexagon2"}};c.push([{trace:g}])}}l=a.showlegend&&RF(c,i,a._legends.length>1)}var f=a.hiddenlabels||[];if(!(s||a.showlegend&&l.length))return r.selectAll("."+o).remove(),a._topdefs.select("#"+n).remove(),IF.autoMargin(t,o);var p=BF.ensureSingle(r,"g",o,(function(t){s||t.attr("pointer-events","all")})),v=BF.ensureSingleById(a._topdefs,"clipPath",n,(function(t){t.append("rect")})),m=BF.ensureSingle(p,"rect","bg",(function(t){t.attr("shape-rendering","crispEdges")}));m.call(UF.stroke,i.bordercolor).call(UF.fill,i.bgcolor).style("stroke-width",i.borderwidth+"px");var y,b=BF.ensureSingle(p,"g","scrollbox"),x=i.title;i._titleWidth=0,i._titleHeight=0,x.text?((y=BF.ensureSingle(b,"text",o+"titletext")).attr("text-anchor","start").call(wF.font,x.font).text(x.text),zF(y,b,t,i,MF)):b.selectAll("."+o+"titletext").remove();var B=BF.ensureSingle(p,"rect","scrollbar",(function(t){t.attr(LF.scrollBarEnterAttrs).call(UF.fill,LF.scrollBarColor)})),I=b.selectAll("g.groups").data(l);I.enter().append("g").attr("class","groups"),I.exit().remove();var F=I.selectAll("g.traces").data(BF.identity);F.enter().append("g").attr("class","traces"),F.exit().remove(),F.style("opacity",(function(t){var e=t[0].trace;return FF.traceIs(e,"pie-like")?-1!==f.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1})).each((function(){xF.select(this).call(HF,t,i)})).call(EF,t,i).each((function(){s||xF.select(this).call(YF,t,o)})),BF.syncOrAsync([IF.previousPromises,function(){return function(t,e,n,r){var i=t._fullLayout,a=PF(r);r||(r=i[a]);var o=i._size,s=TF.isVertical(r),l=TF.isGrouped(r),c="fraction"===r.entrywidthmode,u=r.borderwidth,h=2*u,d=LF.itemGap,g=r.indentation+r.itemwidth+2*d,f=2*(u+d),p=JF(r),v=r.y<0||0===r.y&&"top"===p,m=r.y>1||1===r.y&&"bottom"===p,y=r.tracegroupgap,b={};r._maxHeight=Math.max(v||m?i.height/2:o.h,30);var x=0;r._width=0,r._height=0;var B=function(t){var e=0,n=0,r=t.title.side;r&&(-1!==r.indexOf("left")&&(e=t._titleWidth),-1!==r.indexOf("top")&&(n=t._titleHeight));return[e,n]}(r);if(s)n.each((function(t){var e=t[0].height;wF.setTranslate(this,u+B[0],u+B[1]+r._height+e/2+d),r._height+=e,r._width=Math.max(r._width,t[0].width)})),x=g+r._width,r._width+=d+g+h,r._height+=f,l&&(e.each((function(t,e){wF.setTranslate(this,0,e*r.tracegroupgap)})),r._height+=(r._lgroupsLength-1)*r.tracegroupgap);else{var I=OF(r),F=r.x<0||0===r.x&&"right"===I,Q=r.x>1||1===r.x&&"left"===I,C=m||v,w=i.width/2;r._maxWidth=Math.max(F?C&&"left"===I?o.l+o.w:w:Q?C&&"right"===I?o.r+o.w:w:o.w,2*g);var U=0,A=0;n.each((function(t){var e=ZF(t,r,g);U=Math.max(U,e),A+=e})),x=null;var S=0;if(l){var L=0,k=0,G=0;e.each((function(){var t=0,e=0;xF.select(this).selectAll("g.traces").each((function(n){var i=ZF(n,r,g),a=n[0].height;wF.setTranslate(this,B[0],B[1]+u+d+a/2+e),e+=a,t=Math.max(t,i),b[n[0].trace.legendgroup]=t}));var n=t+d;k>0&&n+u+k>r._maxWidth?(S=Math.max(S,k),k=0,G+=L+y,L=e):L=Math.max(L,e),wF.setTranslate(this,k,G),k+=n})),r._width=Math.max(S,k)+u,r._height=G+L+f}else{var _=n.size(),R=A+h+(_-1)*d<r._maxWidth,E=0,T=0,M=0,N=0;n.each((function(t){var e=t[0].height,n=ZF(t,r,g),i=R?n:U;c||(i+=d),i+u+T-d>=r._maxWidth&&(S=Math.max(S,N),T=0,M+=E,r._height+=E,E=0),wF.setTranslate(this,B[0]+u+T,B[1]+u+M+e/2+d),N=T+n+d,T+=i,E=Math.max(E,e)})),R?(r._width=T+h,r._height=E+f):(r._width=Math.max(S,N)+h,r._height+=E+f)}}r._width=Math.ceil(Math.max(r._width+B[0],r._titleWidth+2*(u+LF.titlePad))),r._height=Math.ceil(Math.max(r._height+B[1],r._titleHeight+2*(u+LF.itemGap))),r._effHeight=Math.min(r._height,r._maxHeight);var D=t._context.edits,X=D.legendText||D.legendPosition;n.each((function(t){var e=xF.select(this).select("."+a+"toggle"),n=t[0].height,i=t[0].trace.legendgroup,o=ZF(t,r,g);l&&""!==i&&(o=b[i]);var u=X?g:x||o;s||c||(u+=d/2),wF.setRect(e,0,-n/2,u,n)}))}(t,I,F,i)},function(){var e,l,c,u,h=a._size,d=i.borderwidth,g="paper"===i.xref,f="paper"===i.yref;if(x.text&&function(t,e,n){if("top center"===e.title.side||"top right"===e.title.side){var r=e.title.font.size*kF,i=0,a=t.node(),o=wF.bBox(a).width;"top center"===e.title.side?i=.5*(e._width-2*n-2*LF.titlePad-o):"top right"===e.title.side&&(i=e._width-2*n-2*LF.titlePad-o),AF.positionText(t,n+LF.titlePad+i,n+r)}}(y,i,d),!s){var I,F;I=g?h.l+h.w*i.x-GF[OF(i)]*i._width:a.width*i.x-GF[OF(i)]*i._width,F=f?h.t+h.h*(1-i.y)-GF[JF(i)]*i._effHeight:a.height*(1-i.y)-GF[JF(i)]*i._effHeight;var Q=function(t,e,n,r){var i=t._fullLayout,a=i[e],o=OF(a),s=JF(a),l="paper"===a.xref,c="paper"===a.yref;t._fullLayout._reservedMargin[e]={};var u=a.y<.5?"b":"t",h=a.x<.5?"l":"r",d={r:i.width-n,l:n+a._width,b:i.height-r,t:r+a._effHeight};if(l&&c)return IF.autoMargin(t,e,{x:a.x,y:a.y,l:a._width*GF[o],r:a._width*_F[o],b:a._effHeight*_F[s],t:a._effHeight*GF[s]});l?t._fullLayout._reservedMargin[e][u]=d[u]:c||"v"===a.orientation?t._fullLayout._reservedMargin[e][h]=d[h]:t._fullLayout._reservedMargin[e][u]=d[u]}(t,o,I,F);if(Q)return;if(a.margin.autoexpand){var C=I,w=F;I=g?BF.constrain(I,0,a.width-i._width):C,F=f?BF.constrain(F,0,a.height-i._effHeight):w,I!==C&&BF.log("Constrain "+o+".x to make legend fit inside graph"),F!==w&&BF.log("Constrain "+o+".y to make legend fit inside graph")}wF.setTranslate(p,I,F)}if(B.on(".drag",null),p.on("wheel",null),s||i._height<=i._maxHeight||t._context.staticPlot){var U=i._effHeight;s&&(U=i._height),m.attr({width:i._width-d,height:U-d,x:d/2,y:d/2}),wF.setTranslate(b,0,0),v.select("rect").attr({width:i._width-2*d,height:U-2*d,x:d,y:d}),wF.setClipUrl(b,n,t),wF.setRect(B,0,0,0,0),delete i._scrollY}else{var A,S,L,k=Math.max(LF.scrollBarMinHeight,i._effHeight*i._effHeight/i._height),G=i._effHeight-k-2*LF.scrollBarMargin,_=i._height-i._effHeight,R=G/_,E=Math.min(i._scrollY||0,_);m.attr({width:i._width-2*d+LF.scrollBarWidth+LF.scrollBarMargin,height:i._effHeight-d,x:d/2,y:d/2}),v.select("rect").attr({width:i._width-2*d+LF.scrollBarWidth+LF.scrollBarMargin,height:i._effHeight-2*d,x:d,y:d+E}),wF.setClipUrl(b,n,t),N(E,k,R),p.on("wheel",(function(){N(E=BF.constrain(i._scrollY+xF.event.deltaY/G*_,0,_),k,R),0!==E&&E!==_&&xF.event.preventDefault()}));var T=xF.behavior.drag().on("dragstart",(function(){var t=xF.event.sourceEvent;A="touchstart"===t.type?t.changedTouches[0].clientY:t.clientY,L=E})).on("drag",(function(){var t=xF.event.sourceEvent;2===t.buttons||t.ctrlKey||(S="touchmove"===t.type?t.changedTouches[0].clientY:t.clientY,E=function(t,e,n){var r=(n-e)/R+t;return BF.constrain(r,0,_)}(L,A,S),N(E,k,R))}));B.call(T);var M=xF.behavior.drag().on("dragstart",(function(){var t=xF.event.sourceEvent;"touchstart"===t.type&&(A=t.changedTouches[0].clientY,L=E)})).on("drag",(function(){var t=xF.event.sourceEvent;"touchmove"===t.type&&(S=t.changedTouches[0].clientY,E=function(t,e,n){var r=(e-n)/R+t;return BF.constrain(r,0,_)}(L,A,S),N(E,k,R))}));b.call(M)}function N(e,n,r){i._scrollY=t._fullLayout[o]._scrollY=e,wF.setTranslate(b,0,-e),wF.setRect(B,i._width,LF.scrollBarMargin+e*r,LF.scrollBarWidth,n),v.select("rect").attr("y",d+e)}t._context.edits.legendPosition&&(p.classed("cursor-move",!0),CF.init({element:p.node(),gd:t,prepFn:function(){var t=wF.getTranslate(p);c=t.x,u=t.y},moveFn:function(t,n){var r=c+t,a=u+n;wF.setTranslate(p,r,a),e=CF.align(r,i._width,h.l,h.l+h.w,i.xanchor),l=CF.align(a+i._height,-i._height,h.t+h.h,h.t,i.yanchor)},doneFn:function(){if(void 0!==e&&void 0!==l){var n={};n[o+".x"]=e,n[o+".y"]=l,FF.call("_guiRelayout",t,n)}},clickFn:function(e,n){var i=r.selectAll("g.traces").filter((function(){var t=this.getBoundingClientRect();return n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom}));i.size()>0&&VF(t,p,i,e,n)}}))}],t)}}function ZF(t,e,n){var r=t[0],i=r.width,a=e.entrywidthmode,o=r.trace.legendwidth||e.entrywidth;return"fraction"===a?e._maxWidth*o:n+(o||i)}function VF(t,e,n,r,i){var a=n.data()[0][0].trace,o={event:i,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:t.data,layout:t.layout,frames:t._transitionData._frames,config:t._context,fullData:t._fullData,fullLayout:t._fullLayout};a._group&&(o.group=a._group),FF.traceIs(a,"pie-like")&&(o.label=n.datum()[0].label);var s=QF.triggerHandler(t,"plotly_legendclick",o);if(1===r){if(!1===s)return;e._clickTimeout=setTimeout((function(){t._fullLayout&&SF(n,t,r)}),t._context.doubleClickDelay)}else if(2===r){e._clickTimeout&&clearTimeout(e._clickTimeout),t._legendMouseDownTime=0,!1!==QF.triggerHandler(t,"plotly_legenddoubleclick",o)&&!1!==s&&SF(n,t,r)}}function HF(t,e,n){var r,i,a=PF(n),o=t.data()[0][0],s=o.trace,l=FF.traceIs(s,"pie-like"),c=!n._inHover&&e._context.edits.legendText&&!l,u=n._maxNameLength;o.groupTitle?(r=o.groupTitle.text,i=o.groupTitle.font):(i=n.font,n.entries?r=o.text:(r=l?o.label:s.name,s._meta&&(r=BF.templateString(r,s._meta))));var h=BF.ensureSingle(t,"text",a+"text");h.attr("text-anchor","start").call(wF.font,i).text(c?WF(r,u):r);var d=n.indentation+n.itemwidth+2*LF.itemGap;AF.positionText(h,d,0),c?h.call(AF.makeEditable,{gd:e,text:r}).call(zF,t,e,n).on("edit",(function(r){this.text(WF(r,u)).call(zF,t,e,n);var i=o.trace._fullInput||{},a={};if(FF.hasTransform(i,"groupby")){var l=FF.getTransformIndices(i,"groupby"),c=l[l.length-1],h=BF.keyedContainer(i,"transforms["+c+"].styles","target","value.name");h.set(o.trace._group,r),a=h.constructUpdate()}else a.name=r;return i._isShape?FF.call("_guiRelayout",e,"shapes["+s.index+"].name",a.name):FF.call("_guiRestyle",e,a,s.index)})):zF(h,t,e,n)}function WF(t,e){var n=Math.max(4,e);if(t&&t.trim().length>=n/2)return t;for(var r=n-(t=t||"").length;r>0;r--)t+=" ";return t}function YF(t,e,n){var r,i=e._context.doubleClickDelay,a=1,o=BF.ensureSingle(t,"rect",n+"toggle",(function(t){e._context.staticPlot||t.style("cursor","pointer").attr("pointer-events","all"),t.call(UF.fill,"rgba(0,0,0,0)")}));e._context.staticPlot||(o.on("mousedown",(function(){(r=(new Date).getTime())-e._legendMouseDownTime<i?a+=1:(a=1,e._legendMouseDownTime=r)})),o.on("mouseup",(function(){if(!e._dragged&&!e._editing){var r=e._fullLayout[n];(new Date).getTime()-e._legendMouseDownTime>i&&(a=Math.max(a-1,1)),VF(e,r,t,a,xF.event)}})))}function zF(t,e,n,r,i){r._inHover&&t.attr("data-notex",!0),AF.convertToTspans(t,n,(function(){!function(t,e,n,r){var i=t.data()[0][0];if(!n._inHover&&i&&!i.trace.showlegend)return void t.remove();var a=t.select("g[class*=math-group]"),o=a.node(),s=PF(n);n||(n=e._fullLayout[s]);var l,c=n.borderwidth;l=r===MF?n.title.font:i.groupTitle?i.groupTitle.font:n.font;var u,h,d=l.size*kF;if(o){var g=wF.bBox(o);u=g.height,h=g.width,r===MF?wF.setTranslate(a,c,c+.75*u):wF.setTranslate(a,0,.25*u)}else{var f="."+s+(r===MF?"title":"")+"text",p=t.select(f),v=AF.lineCount(p),m=p.node();if(u=d*v,h=m?wF.bBox(m).width:0,r===MF)"left"===n.title.side&&(h+=2*LF.itemGap),AF.positionText(p,c+LF.titlePad,c+d);else{var y=2*LF.itemGap+n.indentation+n.itemwidth;i.groupTitle&&(y=LF.itemGap,h-=n.indentation+n.itemwidth),AF.positionText(p,y,-d*((v-1)/2-.3))}}r===MF?(n._titleWidth=h,n._titleHeight=u):(i.lineHeight=d,i.height=Math.max(u,16)+3,i.width=h)}(e,n,r,i)}))}function OF(t){return BF.isRightAnchor(t)?"right":BF.isCenterAnchor(t)?"center":"left"}function JF(t){return BF.isBottomAnchor(t)?"bottom":BF.isMiddleAnchor(t)?"middle":"top"}function PF(t){return t._id||"legend"}var jF=uo,KF=Ac,qF=vu,$F=yf,tQ=$F.pushUnique,eQ=$F.strTranslate,nQ=$F.strRotate,rQ=Yf,iQ=tv,aQ=function(t,e){var n=t.attr(GI);if(e){if(!n){for(var r=(t.attr("class")||"").split(" "),i=0;i<r.length;i++){var a=r[i];0===a.indexOf("cursor-")&&t.attr(GI,a.substr(7)).classed(a,!1)}t.attr(GI)||t.attr(GI,"!!")}kI(t,e)}else n&&(t.attr(GI,null),"!!"===n?kI(t):kI(t,n))},oQ=Qb,sQ=Pu,lQ=AI,cQ=iI,uQ=hh,hQ=yy,dQ=yu,gQ=YI,fQ=DF,pQ=dQ.YANGLE,vQ=Math.PI*pQ/180,mQ=1/Math.sin(vQ),yQ=Math.cos(vQ),bQ=Math.sin(vQ),xQ=dQ.HOVERARROWSIZE,BQ=dQ.HOVERTEXTPAD,IQ={box:!0,ohlc:!0,violin:!0,candlestick:!0},FQ={scatter:!0,scattergl:!0,splom:!0};function QQ(t,e){return t.distance-e.distance}function CQ(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa?t.xa._id:"",t.ya?t.ya._id:""].join(",")}SI.hover=function(t,e,n,r){t=$F.getGraphDiv(t);var i=e.target;$F.throttle(t._fullLayout._uid+dQ.HOVERID,dQ.HOVERMINTIME,(function(){!function(t,e,n,r,i){n||(n="xy");var a,o,s,l=Array.isArray(n)?n:[n],c=t._fullLayout,u=c.hoversubplots,h=c._plots||[],d=h[n],g=c._has("cartesian"),f=e.hovermode||c.hovermode,p="x"===(f||"").charAt(0),v="y"===(f||"").charAt(0);if(g&&(p||v)&&"axis"===u)for(var m=l.length,y=0;y<m;y++)if(h[a=l[y]]){o=cQ.getFromId(t,a,"x"),s=cQ.getFromId(t,a,"y");var b=(p?o:s)._subplotsWith;if(b&&b.length)for(var x=0;x<b.length;x++)tQ(l,b[x])}if(d&&"single"!==u){var B=d.overlays.map((function(t){return t.id}));l=l.concat(B)}for(var I=l.length,F=new Array(I),Q=new Array(I),C=!1,w=0;w<I;w++)if(h[a=l[w]])C=!0,F[w]=h[a].xaxis,Q[w]=h[a].yaxis;else{if(!c[a]||!c[a]._subplot)return void $F.warn("Unrecognized subplot: "+a);var U=c[a]._subplot;F[w]=U.xaxis,Q[w]=U.yaxis}f&&!C&&(f="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(f)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return lQ.unhoverRaw(t,e);var A=c.hoverdistance;-1===A&&(A=1/0);var S=c.spikedistance;-1===S&&(S=1/0);var L,k,G,_,R,E,T,M,N,D,X,Z,V,H=[],W=[],Y={hLinePoint:null,vLinePoint:null},z=!1;if(Array.isArray(e))for(f="array",G=0;G<e.length;G++)(R=t.calcdata[e[G].curveNumber||0])&&(E=R[0].trace,"skip"!==R[0].trace.hoverinfo&&(W.push(R),"h"===E.orientation&&(z=!0)));else{var O,J,P=t.calcdata.slice();for(P.sort((function(t,e){return(t[0].trace.zorder||0)-(e[0].trace.zorder||0)})),_=0;_<P.length;_++)R=P[_],"skip"!==(E=R[0].trace).hoverinfo&&hQ.isTraceInSubplots(E,l)&&(W.push(R),"h"===E.orientation&&(z=!0));if(!i)O="xpx"in e?e.xpx:F[0]._length/2,J="ypx"in e?e.ypx:Q[0]._length/2;else{if(!1===rQ.triggerHandler(t,"plotly_beforehover",e))return;var j=i.getBoundingClientRect();O=e.clientX-j.left,J=e.clientY-j.top,c._calcInverseTransform(t);var K=$F.apply3DTransform(c._invTransform)(O,J);if(O=K[0],J=K[1],O<0||O>F[0]._length||J<0||J>Q[0]._length)return lQ.unhoverRaw(t,e)}if(e.pointerX=O+F[0]._offset,e.pointerY=J+Q[0]._offset,L="xval"in e?hQ.flat(l,e.xval):hQ.p2c(F,O),k="yval"in e?hQ.flat(l,e.yval):hQ.p2c(Q,J),!KF(L[0])||!KF(k[0]))return $F.warn("Fx.hover failed",e,t),lQ.unhoverRaw(t,e)}var q=1/0;function $(n,r){for(_=0;_<W.length;_++)if((R=W[_])&&R[0]&&R[0].trace&&!0===(E=R[0].trace).visible&&0!==E._length&&-1===["carpet","contourcarpet"].indexOf(E._module.name)){if(N=f,hQ.isUnifiedHover(N)&&(N=N.charAt(0)),"splom"===E.type?T=l[M=0]:(T=hQ.getSubplot(E),M=l.indexOf(T)),Z={cd:R,trace:E,xa:F[M],ya:Q[M],maxHoverDistance:A,maxSpikeDistance:S,index:!1,distance:Math.min(q,A),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:sQ.defaultLine,name:E.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},c[T]&&(Z.subplot=c[T]._subplot),c._splomScenes&&c._splomScenes[E.uid]&&(Z.scene=c._splomScenes[E.uid]),"array"===N){var i=e[_];"pointNumber"in i?(Z.index=i.pointNumber,N="closest"):(N="","xval"in i&&(D=i.xval,N="x"),"yval"in i&&(X=i.yval,N=N?"closest":"y"))}else void 0!==n&&void 0!==r?(D=n,X=r):(D=L[M],X=k[M]);if(V=H.length,0!==A)if(E._module&&E._module.hoverPoints){var a=E._module.hoverPoints(Z,D,X,N,{finiteRange:!0,hoverLayer:c._hoverlayer,hoversubplots:u,gd:t});if(a)for(var o,s=0;s<a.length;s++)o=a[s],KF(o.x0)&&KF(o.y0)&&H.push(kQ(o,f))}else $F.log("Unrecognized trace type in hover:",E);if("closest"===f&&H.length>V&&(H.splice(0,V),q=H[0].distance),g&&0!==S&&0===H.length){Z.distance=S,Z.index=!1;var h=E._module.hoverPoints(Z,D,X,"closest",{hoverLayer:c._hoverlayer});if(h&&(h=h.filter((function(t){return t.spikeDistance<=S}))),h&&h.length){var d,p=h.filter((function(t){return t.xa.showspikes&&"hovered data"!==t.xa.spikesnap}));if(p.length){var v=p[0];KF(v.x0)&&KF(v.y0)&&(d=et(v),(!Y.vLinePoint||Y.vLinePoint.spikeDistance>d.spikeDistance)&&(Y.vLinePoint=d))}var m=h.filter((function(t){return t.ya.showspikes&&"hovered data"!==t.ya.spikesnap}));if(m.length){var y=m[0];KF(y.x0)&&KF(y.y0)&&(d=et(y),(!Y.hLinePoint||Y.hLinePoint.spikeDistance>d.spikeDistance)&&(Y.hLinePoint=d))}}}}}function tt(t,e,n){for(var r,i=null,a=1/0,l=0;l<t.length;l++)o&&o._id!==t[l].xa._id||s&&s._id!==t[l].ya._id||(r=t[l].spikeDistance,n&&0===l&&(r=-1/0),r<=a&&r<=e&&(i=t[l],a=r));return i}function et(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}$();var nt={fullLayout:c,container:c._hoverlayer,event:e};t._spikepoints;var rt={vLinePoint:Y.vLinePoint,hLinePoint:Y.hLinePoint};t._spikepoints=rt;var it=function(){var t=H.filter((function(t){return o&&o._id===t.xa._id&&s&&s._id===t.ya._id})),e=H.filter((function(t){return!(o&&o._id===t.xa._id&&s&&s._id===t.ya._id)}));t.sort(QQ),e.sort(QQ),H=function(t,e){for(var n=e.charAt(0),r=[],i=[],a=[],o=0;o<t.length;o++){var s=t[o];uQ.traceIs(s.trace,"bar-like")||uQ.traceIs(s.trace,"box-violin")?a.push(s):s.trace[n+"period"]?i.push(s):r.push(s)}return r.concat(i).concat(a)}(H=t.concat(e),f)};it();var at=f.charAt(0),ot=("x"===at||"y"===at)&&H[0]&&FQ[H[0].trace.type];if(g&&0!==S&&0!==H.length){var st=tt(H.filter((function(t){return t.ya.showspikes})),S,ot);Y.hLinePoint=et(st);var lt=tt(H.filter((function(t){return t.xa.showspikes})),S,ot);Y.vLinePoint=et(lt)}if(0===H.length){var ct=lQ.unhoverRaw(t,e);return!g||null===Y.hLinePoint&&null===Y.vLinePoint||GQ(t,Y,nt),ct}g&&GQ(t,Y,nt);if(hQ.isXYhover(N)&&0!==H[0].length&&"splom"!==H[0].trace.type){var ut=H[0];H=IQ[ut.trace.type]?H.filter((function(t){return t.trace.index===ut.trace.index})):[ut];var ht=H.length;$(RQ("x",ut,c),RQ("y",ut,c));var dt,gt=[],ft={},pt=0,vt=function(t){var e=IQ[t.trace.type]?CQ(t):t.trace.index;if(ft[e]){var n=ft[e]-1,r=gt[n];n>0&&Math.abs(t.distance)<Math.abs(r.distance)&&(gt[n]=t)}else pt++,ft[e]=pt,gt.push(t)};for(dt=0;dt<ht;dt++)vt(H[dt]);for(dt=H.length-1;dt>ht-1;dt--)vt(H[dt]);H=gt,it()}var mt=t._hoverdata,yt=[],bt=EQ(t),xt=TQ(t);for(G=0;G<H.length;G++){var Bt=H[G],It=hQ.makeEventData(Bt,Bt.trace,Bt.cd);if(!1!==Bt.hovertemplate){var Ft=!1;Bt.cd[Bt.index]&&Bt.cd[Bt.index].ht&&(Ft=Bt.cd[Bt.index].ht),Bt.hovertemplate=Ft||Bt.trace.hovertemplate||!1}if(Bt.xa&&Bt.ya){var Qt=Bt.x0+Bt.xa._offset,Ct=Bt.x1+Bt.xa._offset,wt=Bt.y0+Bt.ya._offset,Ut=Bt.y1+Bt.ya._offset,At=Math.min(Qt,Ct),St=Math.max(Qt,Ct),Lt=Math.min(wt,Ut),kt=Math.max(wt,Ut);It.bbox={x0:At+xt,x1:St+xt,y0:Lt+bt,y1:kt+bt}}Bt.eventData=[It],yt.push(It)}t._hoverdata=yt;var Gt="y"===f&&(W.length>1||H.length>1)||"closest"===f&&z&&H.length>1,_t=sQ.combine(c.plot_bgcolor||sQ.background,c.paper_bgcolor),Rt=UQ(H,{gd:t,hovermode:f,rotateLabels:Gt,bgColor:_t,container:c._hoverlayer,outerContainer:c._paper.node(),commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance}),Et=Rt.hoverLabels;hQ.isUnifiedHover(f)||(!function(t,e,n,r){var i,a,o,s,l,c,u,h=e?"xa":"ya",d=e?"ya":"xa",g=0,f=1,p=t.size(),v=new Array(p),m=0,y=r.minX,b=r.maxX,x=r.minY,B=r.maxY,I=function(t){return t*n._invScaleX},F=function(t){return t*n._invScaleY};function Q(t){var e=t[0],n=t[t.length-1];if(a=e.pmin-e.pos-e.dp+e.size,o=n.pos+n.dp+n.size-e.pmax,a>.01){for(l=t.length-1;l>=0;l--)t[l].dp+=a;i=!1}if(!(o<.01)){if(a<-.01){for(l=t.length-1;l>=0;l--)t[l].dp-=o;i=!1}if(i){var r=0;for(s=0;s<t.length;s++)(c=t[s]).pos+c.dp+c.size>e.pmax&&r++;for(s=t.length-1;s>=0&&!(r<=0);s--)(c=t[s]).pos>e.pmax-1&&(c.del=!0,r--);for(s=0;s<t.length&&!(r<=0);s++)if((c=t[s]).pos<e.pmin+1)for(c.del=!0,r--,o=2*c.size,l=t.length-1;l>=0;l--)t[l].dp-=o;for(s=t.length-1;s>=0&&!(r<=0);s--)(c=t[s]).pos+c.dp+c.size>e.pmax&&(c.del=!0,r--)}}}t.each((function(t){var r=t[h],i=t[d],a="x"===r._id.charAt(0),o=r.range;0===m&&o&&o[0]>o[1]!==a&&(f=-1);var s=0,l=a?n.width:n.height;if("x"===n.hovermode||"y"===n.hovermode){var c,u,g=SQ(t,e),p=t.anchor,Q="end"===p?-1:1;if("middle"===p)u=(c=t.crossPos+(a?F(g.y-t.by/2):I(t.bx/2+t.tx2width/2)))+(a?F(t.by):I(t.bx));else if(a)u=(c=t.crossPos+F(xQ+g.y)-F(t.by/2-xQ))+F(t.by);else{var C=I(Q*xQ+g.x),w=C+I(Q*t.bx);c=t.crossPos+Math.min(C,w),u=t.crossPos+Math.max(C,w)}a?void 0!==x&&void 0!==B&&Math.min(u,B)-Math.max(c,x)>1&&("left"===i.side?(s=i._mainLinePosition,l=n.width):l=i._mainLinePosition):void 0!==y&&void 0!==b&&Math.min(u,b)-Math.max(c,y)>1&&("top"===i.side?(s=i._mainLinePosition,l=n.height):l=i._mainLinePosition)}v[m++]=[{datum:t,traceIndex:t.trace.index,dp:0,pos:t.pos,posref:t.posref,size:t.by*(a?mQ:1)/2,pmin:s,pmax:l}]})),v.sort((function(t,e){return t[0].posref-e[0].posref||f*(e[0].traceIndex-t[0].traceIndex)}));for(;!i&&g<=p;){for(g++,i=!0,s=0;s<v.length-1;){var C=v[s],w=v[s+1],U=C[C.length-1],A=w[0];if((a=U.pos+U.dp+U.size-A.pos-A.dp+A.size)>.01&&U.pmin===A.pmin&&U.pmax===A.pmax){for(l=w.length-1;l>=0;l--)w[l].dp+=a;for(C.push.apply(C,w),v.splice(s+1,1),u=0,l=C.length-1;l>=0;l--)u+=C[l].dp;for(o=u/C.length,l=C.length-1;l>=0;l--)C[l].dp-=o;i=!1}else s++}v.forEach(Q)}for(s=v.length-1;s>=0;s--){var S=v[s];for(l=S.length-1;l>=0;l--){var L=S[l],k=L.datum;k.offset=L.dp,k.del=L.del}}}(Et,Gt,c,Rt.commonLabelBoundingBox),LQ(Et,Gt,c._invScaleX,c._invScaleY));if(i&&i.tagName){var Tt=uQ.getComponentMethod("annotations","hasClickToShow")(t,yt);aQ(jF.select(i),Tt?"pointer":"")}if(!i||r||!function(t,e,n){if(!n||n.length!==t._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],a=t._hoverdata[r];if(i.curveNumber!==a.curveNumber||String(i.pointNumber)!==String(a.pointNumber)||String(i.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(t,0,mt))return;mt&&t.emit("plotly_unhover",{event:e,points:mt});t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:F,yaxes:Q,xvals:L,yvals:k})}(t,e,n,r,i)}))},SI.loneHover=function(t,e){var n=!0;Array.isArray(t)||(n=!1,t=[t]);var r=e.gd,i=EQ(r),a=TQ(r),o=!1,s=UQ(t.map((function(t){var n=t._x0||t.x0||t.x||0,o=t._x1||t.x1||t.x||0,s=t._y0||t.y0||t.y||0,l=t._y1||t.y1||t.y||0,c=t.eventData;if(c){var u=Math.min(n,o),h=Math.max(n,o),d=Math.min(s,l),g=Math.max(s,l),f=t.trace;if(uQ.traceIs(f,"gl3d")){var p=r._fullLayout[f.scene]._scene.container,v=p.offsetLeft,m=p.offsetTop;u+=v,h+=v,d+=m,g+=m}c.bbox={x0:u+a,x1:h+a,y0:d+i,y1:g+i},e.inOut_bbox&&e.inOut_bbox.push(c.bbox)}else c=!1;return{color:t.color||sQ.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontVariant:t.fontVariant,nameLength:t.nameLength,textAlign:t.textAlign,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,hovertemplateLabels:t.hovertemplateLabels||!1,eventData:c}})),{gd:r,hovermode:"closest",rotateLabels:o,bgColor:e.bgColor||sQ.background,container:jF.select(e.container),outerContainer:e.outerContainer||e.container}).hoverLabels,l=0,c=0;return s.sort((function(t,e){return t.y0-e.y0})).each((function(t,n){var r=t.y0-t.by/2;t.offset=r-5<l?l-r+5:0,l=r+t.by+t.offset,n===e.anchorIndex&&(c=t.offset)})).each((function(t){t.offset-=c})),LQ(s,o,r._fullLayout._invScaleX,r._fullLayout._invScaleY),n?s:s.node()};var wQ=/<extra>([\s\S]*)<\/extra>/;function UQ(t,e){var n=e.gd,r=n._fullLayout,i=e.hovermode,a=e.rotateLabels,o=e.bgColor,s=e.container,l=e.outerContainer,c=e.commonLabelOpts||{};if(0===t.length)return[[]];var u=e.fontFamily||dQ.HOVERFONT,h=e.fontSize||dQ.HOVERFONTSIZE,d=e.fontWeight||r.font.weight,g=e.fontStyle||r.font.style,f=e.fontVariant||r.font.variant,p=t[0],v=p.xa,m=p.ya,y=i.charAt(0),b=y+"Label",x=p[b];if(void 0===x&&"multicategory"===v.type)for(var B=0;B<t.length&&void 0===(x=t[B][b]);B++);var I=MQ(n,l),F=I.top,Q=I.width,C=I.height,w=void 0!==x&&p.distance<=e.hoverdistance&&("x"===i||"y"===i);if(w){var U,A,S=!0;for(U=0;U<t.length;U++)if(S&&void 0===t[U].zLabel&&(S=!1),A=t[U].hoverinfo||t[U].trace.hoverinfo){var L=Array.isArray(A)?A:A.split("+");if(-1===L.indexOf("all")&&-1===L.indexOf(i)){w=!1;break}}S&&(w=!1)}var k=s.selectAll("g.axistext").data(w?[0]:[]);k.enter().append("g").classed("axistext",!0),k.exit().remove();var G={minX:0,maxX:0,minY:0,maxY:0};if(k.each((function(){var t=jF.select(this),e=$F.ensureSingle(t,"path","",(function(t){t.style({"stroke-width":"1px"})})),a=$F.ensureSingle(t,"text","",(function(t){t.attr("data-notex",1)})),o=c.bgcolor||sQ.defaultLine,s=c.bordercolor||sQ.contrast(o),l=sQ.contrast(o),y={weight:c.font.weight||d,style:c.font.style||g,variant:c.font.variant||f,family:c.font.family||u,size:c.font.size||h,color:c.font.color||l};e.style({fill:o,stroke:s}),a.text(x).call(oQ.font,y).call(iQ.positionText,0,0).call(iQ.convertToTspans,n),t.attr("transform","");var b,B,I=MQ(n,a.node());if("x"===i){var Q="top"===v.side?"-":"";a.attr("text-anchor","middle").call(iQ.positionText,0,"top"===v.side?F-I.bottom-xQ-BQ:F-I.top+xQ+BQ),b=v._offset+(p.x0+p.x1)/2,B=m._offset+("top"===v.side?0:m._length);var C=I.width/2+BQ,w=b;b<C?w=C:b>r.width-C&&(w=r.width-C),e.attr("d","M"+(b-w)+",0L"+(b-w+xQ)+","+Q+xQ+"H"+C+"v"+Q+(2*BQ+I.height)+"H"+-C+"V"+Q+xQ+"H"+(b-w-xQ)+"Z"),b=w,G.minX=b-C,G.maxX=b+C,"top"===v.side?(G.minY=B-(2*BQ+I.height),G.maxY=B-BQ):(G.minY=B+BQ,G.maxY=B+(2*BQ+I.height))}else{var U,A,S;"right"===m.side?(U="start",A=1,S="",b=v._offset+v._length):(U="end",A=-1,S="-",b=v._offset),B=m._offset+(p.y0+p.y1)/2,a.attr("text-anchor",U),e.attr("d","M0,0L"+S+xQ+","+xQ+"V"+(BQ+I.height/2)+"h"+S+(2*BQ+I.width)+"V-"+(BQ+I.height/2)+"H"+S+xQ+"V-"+xQ+"Z"),G.minY=B-(BQ+I.height/2),G.maxY=B+(BQ+I.height/2),"right"===m.side?(G.minX=b+xQ,G.maxX=b+xQ+(2*BQ+I.width)):(G.minX=b-xQ-(2*BQ+I.width),G.maxX=b-xQ);var L,k=I.height/2,_=F-I.top-k,R="clip"+r._uid+"commonlabel"+m._id;if(b<I.width+2*BQ+xQ){L="M-"+(xQ+BQ)+"-"+k+"h-"+(I.width-BQ)+"V"+k+"h"+(I.width-BQ)+"Z";var E=I.width-b+BQ;iQ.positionText(a,E,_),"end"===U&&a.selectAll("tspan").each((function(){var t=jF.select(this),e=oQ.tester.append("text").text(t.text()).call(oQ.font,y),r=MQ(n,e.node());Math.round(r.width)<Math.round(I.width)&&t.attr("x",E-r.width),e.remove()}))}else iQ.positionText(a,A*(BQ+xQ),_),L=null;var T=r._topclips.selectAll("#"+R).data(L?[0]:[]);T.enter().append("clipPath").attr("id",R).append("path"),T.exit().remove(),T.select("path").attr("d",L),oQ.setClipUrl(a,L?R:null,n)}t.attr("transform",eQ(b,B))})),hQ.isUnifiedHover(i)){s.selectAll("g.hovertext").remove();var _=t.filter((function(t){return"none"!==t.hoverinfo}));if(0===_.length)return[];var R=r.hoverlabel,E=R.font,T={showlegend:!0,legend:{title:{text:x,font:E},font:E,bgcolor:R.bgcolor,bordercolor:R.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:r.legend?r.legend.traceorder:void 0,orientation:"v"}},M={font:E};gQ(T,M,n._fullData);var N=M.legend;N.entries=[];for(var D=0;D<_.length;D++){var X=_[D];if("none"!==X.hoverinfo){var Z=AQ(X,!0,i,r,x),V=Z[0],H=Z[1];X.name=H,X.text=""!==H?H+" : "+V:V;var W=X.cd[X.index];W&&(W.mc&&(X.mc=W.mc),W.mcc&&(X.mc=W.mcc),W.mlc&&(X.mlc=W.mlc),W.mlcc&&(X.mlc=W.mlcc),W.mlw&&(X.mlw=W.mlw),W.mrc&&(X.mrc=W.mrc),W.dir&&(X.dir=W.dir)),X._distinct=!0,N.entries.push([X])}}N.entries.sort((function(t,e){return t[0].trace.index-e[0].trace.index})),N.layer=s,N._inHover=!0,N._groupTitleFont=R.grouptitlefont,fQ(n,N);var Y,z,O,J,P=s.select("g.legend"),j=MQ(n,P.node()),K=j.width+2*BQ,q=j.height+2*BQ,$=_[0],tt=($.x0+$.x1)/2,et=($.y0+$.y1)/2,nt=!(uQ.traceIs($.trace,"bar-like")||uQ.traceIs($.trace,"box-violin"));"y"===y?nt?(z=et-BQ,Y=et+BQ):(z=Math.min.apply(null,_.map((function(t){return Math.min(t.y0,t.y1)}))),Y=Math.max.apply(null,_.map((function(t){return Math.max(t.y0,t.y1)})))):z=Y=$F.mean(_.map((function(t){return(t.y0+t.y1)/2})))-q/2,"x"===y?nt?(O=tt+BQ,J=tt-BQ):(O=Math.max.apply(null,_.map((function(t){return Math.max(t.x0,t.x1)}))),J=Math.min.apply(null,_.map((function(t){return Math.min(t.x0,t.x1)})))):O=J=$F.mean(_.map((function(t){return(t.x0+t.x1)/2})))-K/2;var rt,it,at=v._offset,ot=m._offset;return J+=at-K,z+=ot-q,rt=(O+=at)+K<Q&&O>=0?O:J+K<Q&&J>=0?J:at+K<Q?at:O-tt<tt-J+K?Q-K:0,rt+=BQ,it=(Y+=ot)+q<C&&Y>=0?Y:z+q<C&&z>=0?z:ot+q<C?ot:Y-et<et-z+q?C-q:0,it+=BQ,P.attr("transform",eQ(rt-1,it-1)),P}var st=s.selectAll("g.hovertext").data(t,(function(t){return CQ(t)}));return st.enter().append("g").classed("hovertext",!0).each((function(){var t=jF.select(this);t.append("rect").call(sQ.fill,sQ.addOpacity(o,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(oQ.font,{weight:d,style:g,variant:f,family:u,size:h})})),st.exit().remove(),st.each((function(t){var e=jF.select(this).attr("transform",""),s=t.color;Array.isArray(s)&&(s=s[t.eventData[0].pointNumber]);var l=t.bgcolor||s,c=sQ.combine(sQ.opacity(l)?l:sQ.defaultLine,o),p=sQ.combine(sQ.opacity(s)?s:sQ.defaultLine,o),v=t.borderColor||sQ.contrast(c),m=AQ(t,w,i,r,x,e),y=m[0],b=m[1],B=e.select("text.nums").call(oQ.font,{family:t.fontFamily||u,size:t.fontSize||h,color:t.fontColor||v,weight:t.fontWeight||d,style:t.fontStyle||g,variant:t.fontVariant||f}).text(y).attr("data-notex",1).call(iQ.positionText,0,0).call(iQ.convertToTspans,n),I=e.select("text.name"),U=0,A=0;if(b&&b!==y){I.call(oQ.font,{family:t.fontFamily||u,size:t.fontSize||h,color:p,weight:t.fontWeight||d,style:t.fontStyle||g,variant:t.fontVariant||f}).text(b).attr("data-notex",1).call(iQ.positionText,0,0).call(iQ.convertToTspans,n);var S=MQ(n,I.node());U=S.width+2*BQ,A=S.height+2*BQ}else I.remove(),e.select("rect").remove();e.select("path").style({fill:c,stroke:v});var L=t.xa._offset+(t.x0+t.x1)/2,k=t.ya._offset+(t.y0+t.y1)/2,G=Math.abs(t.x1-t.x0),_=Math.abs(t.y1-t.y0),R=MQ(n,B.node()),E=R.width/r._invScaleX,T=R.height/r._invScaleY;t.ty0=(F-R.top)/r._invScaleY,t.bx=E+2*BQ,t.by=Math.max(T+2*BQ,A),t.anchor="start",t.txwidth=E,t.tx2width=U,t.offset=0;var M,N,D=(E+xQ+BQ+U)*r._invScaleX;if(a)t.pos=L,M=k+_/2+D<=C,N=k-_/2-D>=0,"top"!==t.idealAlign&&M||!N?M?(k+=_/2,t.anchor="start"):t.anchor="middle":(k-=_/2,t.anchor="end"),t.crossPos=k;else{if(t.pos=k,M=L+G/2+D<=Q,N=L-G/2-D>=0,"left"!==t.idealAlign&&M||!N)if(M)L+=G/2,t.anchor="start";else{t.anchor="middle";var X=D/2,Z=L+X-Q,V=L-X;Z>0&&(L-=Z),V<0&&(L+=-V)}else L-=G/2,t.anchor="end";t.crossPos=L}B.attr("text-anchor",t.anchor),U&&I.attr("text-anchor",t.anchor),e.attr("transform",eQ(L,k)+(a?nQ(pQ):""))})),{hoverLabels:st,commonLabelBoundingBox:G}}function AQ(t,e,n,r,i,a){var o="",s="";void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name&&(t.trace._meta&&(t.name=$F.templateString(t.name,t.trace._meta)),o=_Q(t.name,t.nameLength));var l=n.charAt(0),c="x"===l?"y":"x";void 0!==t.zLabel?(void 0!==t.xLabel&&(s+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(s+="y: "+t.yLabel+"<br>"),"choropleth"!==t.trace.type&&"choroplethmapbox"!==t.trace.type&&(s+=(s?"z: ":"")+t.zLabel)):e&&t[l+"Label"]===i?s=t[c+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&"scattercarpet"!==t.trace.type&&(s=t.yLabel):s=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",!t.text&&0!==t.text||Array.isArray(t.text)||(s+=(s?"<br>":"")+t.text),void 0!==t.extraText&&(s+=(s?"<br>":"")+t.extraText),a&&""===s&&!t.hovertemplate&&(""===o&&a.remove(),s=o);var u=t.hovertemplate||!1;if(u){var h=t.hovertemplateLabels||t;t[l+"Label"]!==i&&(h[l+"other"]=h[l+"Val"],h[l+"otherLabel"]=h[l+"Label"]),s=(s=$F.hovertemplateString(u,h,r._d3locale,t.eventData[0]||{},t.trace._meta)).replace(wQ,(function(e,n){return o=_Q(n,t.nameLength),""}))}return[s,o]}function SQ(t,e){var n=0,r=t.offset;return e&&(r*=-bQ,n=t.offset*yQ),{x:n,y:r}}function LQ(t,e,n,r){var i=function(t){return t*n},a=function(t){return t*r};t.each((function(t){var n=jF.select(this);if(t.del)return n.remove();var r,o,s,l,c=n.select("text.nums"),u=t.anchor,h="end"===u?-1:1,d=(o={start:1,end:-1,middle:0}[(r=t).anchor],l=(s=o*(xQ+BQ))+o*(r.txwidth+BQ),"middle"===r.anchor&&(s-=r.tx2width/2,l+=r.txwidth/2+BQ),{alignShift:o,textShiftX:s,text2ShiftX:l}),g=SQ(t,e),f=g.x,p=g.y,v="middle"===u;n.select("path").attr("d",v?"M-"+i(t.bx/2+t.tx2width/2)+","+a(p-t.by/2)+"h"+i(t.bx)+"v"+a(t.by)+"h-"+i(t.bx)+"Z":"M0,0L"+i(h*xQ+f)+","+a(xQ+p)+"v"+a(t.by/2-xQ)+"h"+i(h*t.bx)+"v-"+a(t.by)+"H"+i(h*xQ+f)+"V"+a(p-xQ)+"Z");var m=f+d.textShiftX,y=p+t.ty0-t.by/2+BQ,b=t.textAlign||"auto";"auto"!==b&&("left"===b&&"start"!==u?(c.attr("text-anchor","start"),m=v?-t.bx/2-t.tx2width/2+BQ:-t.bx-BQ):"right"===b&&"end"!==u&&(c.attr("text-anchor","end"),m=v?t.bx/2-t.tx2width/2-BQ:t.bx+BQ)),c.call(iQ.positionText,i(m),a(y)),t.tx2width&&(n.select("text.name").call(iQ.positionText,i(d.text2ShiftX+d.alignShift*BQ+f),a(p+t.ty0-t.by/2+BQ)),n.select("rect").call(oQ.setRect,i(d.text2ShiftX+(d.alignShift-1)*t.tx2width/2+f),a(p-t.by/2-1),i(t.tx2width),a(t.by+2)))}))}function kQ(t,e){var n=t.index,r=t.trace||{},i=t.cd[0],a=t.cd[n]||{};function o(t){return t||KF(t)&&0===t}var s=Array.isArray(n)?function(t,e){var a=$F.castOption(i,n,t);return o(a)?a:$F.extractOption({},r,"",e)}:function(t,e){return $F.extractOption(a,r,t,e)};function l(e,n,r){var i=s(n,r);o(i)&&(t[e]=i)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("fontWeight","htw","hoverlabel.font.weight"),l("fontStyle","hty","hoverlabel.font.style"),l("fontVariant","htv","hoverlabel.font.variant"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),t.posref="y"===e||"closest"===e&&"h"===r.orientation?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=$F.constrain(t.x0,0,t.xa._length),t.x1=$F.constrain(t.x1,0,t.xa._length),t.y0=$F.constrain(t.y0,0,t.ya._length),t.y1=$F.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:cQ.hoverLabelText(t.xa,t.xLabelVal,r.xhoverformat),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:cQ.hoverLabelText(t.ya,t.yLabelVal,r.yhoverformat),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var c=cQ.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+c+" / -"+cQ.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" ± "+c,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var u=cQ.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+u+" / -"+cQ.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" ± "+u,"y"===e&&(t.distance+=1)}var h=t.hoverinfo||t.trace.hoverinfo;return h&&"all"!==h&&(-1===(h=Array.isArray(h)?h:h.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===h.indexOf("y")&&(t.yLabel=void 0),-1===h.indexOf("z")&&(t.zLabel=void 0),-1===h.indexOf("text")&&(t.text=void 0),-1===h.indexOf("name")&&(t.name=void 0)),t}function GQ(t,e,n){var r,i,a=n.container,o=n.fullLayout,s=o._size,l=n.event,c=!!e.hLinePoint,u=!!e.vLinePoint;if(a.selectAll(".spikeline").remove(),u||c){var h=sQ.combine(o.plot_bgcolor,o.paper_bgcolor);if(c){var d,g,f=e.hLinePoint;r=f&&f.xa,"cursor"===(i=f&&f.ya).spikesnap?(d=l.pointerX,g=l.pointerY):(d=r._offset+f.x,g=i._offset+f.y);var p,v,m=qF.readability(f.color,h)<1.5?sQ.contrast(h):f.color,y=i.spikemode,b=i.spikethickness,x=i.spikecolor||m,B=cQ.getPxPosition(t,i);if(-1!==y.indexOf("toaxis")||-1!==y.indexOf("across")){if(-1!==y.indexOf("toaxis")&&(p=B,v=d),-1!==y.indexOf("across")){var I=i._counterDomainMin,F=i._counterDomainMax;"free"===i.anchor&&(I=Math.min(I,i.position),F=Math.max(F,i.position)),p=s.l+I*s.w,v=s.l+F*s.w}a.insert("line",":first-child").attr({x1:p,x2:v,y1:g,y2:g,"stroke-width":b,stroke:x,"stroke-dasharray":oQ.dashStyle(i.spikedash,b)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:p,x2:v,y1:g,y2:g,"stroke-width":b+2,stroke:h}).classed("spikeline",!0).classed("crisp",!0)}-1!==y.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:B+("right"!==i.side?b:-b),cy:g,r:b,fill:x}).classed("spikeline",!0)}if(u){var Q,C,w=e.vLinePoint;r=w&&w.xa,i=w&&w.ya,"cursor"===r.spikesnap?(Q=l.pointerX,C=l.pointerY):(Q=r._offset+w.x,C=i._offset+w.y);var U,A,S=qF.readability(w.color,h)<1.5?sQ.contrast(h):w.color,L=r.spikemode,k=r.spikethickness,G=r.spikecolor||S,_=cQ.getPxPosition(t,r);if(-1!==L.indexOf("toaxis")||-1!==L.indexOf("across")){if(-1!==L.indexOf("toaxis")&&(U=_,A=C),-1!==L.indexOf("across")){var R=r._counterDomainMin,E=r._counterDomainMax;"free"===r.anchor&&(R=Math.min(R,r.position),E=Math.max(E,r.position)),U=s.t+(1-E)*s.h,A=s.t+(1-R)*s.h}a.insert("line",":first-child").attr({x1:Q,x2:Q,y1:U,y2:A,"stroke-width":k,stroke:G,"stroke-dasharray":oQ.dashStyle(r.spikedash,k)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:Q,x2:Q,y1:U,y2:A,"stroke-width":k+2,stroke:h}).classed("spikeline",!0).classed("crisp",!0)}-1!==L.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:Q,cy:_-("top"!==r.side?k:-k),r:k,fill:G}).classed("spikeline",!0)}}}function _Q(t,e){return iQ.plainText(t||"",{len:e,allowedTags:["br","sub","sup","b","i","em"]})}function RQ(t,e,n){var r=e[t+"a"],i=e[t+"Val"],a=e.cd[0];if("category"===r.type||"multicategory"===r.type)i=r._categoriesMap[i];else if("date"===r.type){var o=e.trace[t+"periodalignment"];if(o){var s=e.cd[e.index],l=s[t+"Start"];void 0===l&&(l=s[t]);var c=s[t+"End"];void 0===c&&(c=s[t]);var u=c-l;"end"===o?i+=u:"middle"===o&&(i+=u/2)}i=r.d2c(i)}return a&&a.t&&a.t.posLetter===r._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(i+=a.t.dPos)),i}function EQ(t){return t.offsetTop+t.clientTop}function TQ(t){return t.offsetLeft+t.clientLeft}function MQ(t,e){var n=t._fullLayout,r=e.getBoundingClientRect(),i=r.left,a=r.top,o=i+r.width,s=a+r.height,l=$F.apply3DTransform(n._invTransform)(i,a),c=$F.apply3DTransform(n._invTransform)(o,s),u=l[0],h=l[1],d=c[0],g=c[1];return{x:u,y:h,width:d-u,height:g-h,top:Math.min(h,g),left:Math.min(u,d),right:Math.max(u,d),bottom:Math.max(h,g)}}var NQ=yf,DQ=Pu,XQ=yy.isUnifiedHover,ZQ=function(t,e,n,r){r=r||{};var i=e.legend;function a(t){r.font[t]||(r.font[t]=i?e.legend.font[t]:e.font[t])}e&&XQ(e.hovermode)&&(r.font||(r.font={}),a("size"),a("family"),a("color"),a("weight"),a("style"),a("variant"),i?(r.bgcolor||(r.bgcolor=DQ.combine(e.legend.bgcolor,e.paper_bgcolor)),r.bordercolor||(r.bordercolor=e.legend.bordercolor)):r.bgcolor||(r.bgcolor=e.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),NQ.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)},VQ=yf,HQ=ZQ,WQ=Iu,YQ=yf,zQ=Lu,OQ=ZQ,JQ=yf,PQ=Iu,jQ=function(t,e){function n(n,r){return void 0!==e[n]?e[n]:JQ.coerce(t,e,PQ,n,r)}return n("clickmode"),n("hoversubplots"),n("hovermode")},KQ=yf,qQ=Iu,$Q=jQ,tC=ZQ,eC=yf,nC=hh;function rC(t,e,n,r){r=r||eC.identity,Array.isArray(t)&&(e[0][n]=r(t))}var iC=hh,aC=SI.hover,oC=uo,sC=yf,lC=AI,cC=SI,uC={moduleType:"component",name:"fx",constants:yu,schema:{layout:Iu},attributes:Lu,layoutAttributes:Iu,supplyLayoutGlobalDefaults:function(t,e){HQ(t,e,(function(n,r){return VQ.coerce(t,e,WQ,n,r)}))},supplyDefaults:function(t,e,n,r){var i=YQ.extendFlat({},r.hoverlabel);e.hovertemplate&&(i.namelength=-1),OQ(t,e,(function(n,r){return YQ.coerce(t,e,zQ,n,r)}),i)},supplyLayoutDefaults:function(t,e){function n(n,r){return KQ.coerce(t,e,qQ,n,r)}$Q(t,e)&&(n("hoverdistance"),n("spikedistance")),"select"===n("dragmode")&&n("selectdirection");var r=e._has("mapbox"),i=e._has("geo"),a=e._basePlotModules.length;"zoom"===e.dragmode&&((r||i)&&1===a||r&&i&&2===a)&&(e.dragmode="pan"),tC(t,e,n),KQ.coerceFont(n,"hoverlabel.grouptitlefont",e.hoverlabel.font)},calc:function(t){var e=t.calcdata,n=t._fullLayout;function r(t){return function(e){return eC.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}for(var i=0;i<e.length;i++){var a=e[i],o=a[0].trace;if(!nC.traceIs(o,"pie-like")){var s=nC.traceIs(o,"2dMap")?rC:eC.fillArray;s(o.hoverinfo,a,"hi",r(o)),o.hovertemplate&&s(o.hovertemplate,a,"ht"),o.hoverlabel&&(s(o.hoverlabel.bgcolor,a,"hbg"),s(o.hoverlabel.bordercolor,a,"hbc"),s(o.hoverlabel.font.size,a,"hts"),s(o.hoverlabel.font.color,a,"htc"),s(o.hoverlabel.font.family,a,"htf"),s(o.hoverlabel.font.weight,a,"htw"),s(o.hoverlabel.font.style,a,"hty"),s(o.hoverlabel.font.variant,a,"htv"),s(o.hoverlabel.namelength,a,"hnl"),s(o.hoverlabel.align,a,"hta"))}}},getDistanceFunction:yy.getDistanceFunction,getClosest:yy.getClosest,inbox:yy.inbox,quadrature:yy.quadrature,appendArrayPointValue:yy.appendArrayPointValue,castHoverOption:function(t,e,n){return sC.castOption(t,e,"hoverlabel."+n)},castHoverinfo:function(t,e,n){return sC.castOption(t,n,"hoverinfo",(function(n){return sC.coerceHoverinfo({hoverinfo:n},{_module:t._module},e)}))},hover:cC.hover,unhover:lC.unhover,loneHover:cC.loneHover,loneUnhover:function(t){var e=sC.isD3Selection(t)?t:oC.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:function(t,e,n){var r=iC.getComponentMethod("annotations","onClick")(t,t._hoverdata);function i(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==n&&aC(t,e,n,!0),t._hoverdata&&e&&e.target&&(r&&r.then?r.then(i):i(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}};var hC={};!function(t){t.selectMode=function(t){return"lasso"===t||"select"===t},t.drawMode=function(t){return"drawclosedpath"===t||"drawopenpath"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},t.openMode=function(t){return"drawline"===t||"drawopenpath"===t},t.rectMode=function(t){return"select"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},t.freeMode=function(t){return"lasso"===t||"drawclosedpath"===t||"drawopenpath"===t},t.selectingOrDrawing=function(e){return t.freeMode(e)||t.rectMode(e)}}(hC);var dC=function(t){var e=t._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each((function(t){t.regl&&t.regl.clear({color:!0,depth:!0})}))},gC={},fC={exports:{}},pC={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}},vC={},mC={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)},yC=yf.strTranslate;function bC(t,e){switch(t.type){case"log":return t.p2d(e);case"date":return t.p2r(e,0,t.calendar);default:return t.p2r(e)}}var xC={p2r:bC,r2p:function(t,e){switch(t.type){case"log":return t.d2p(e);case"date":return t.r2p(e,0,t.calendar);default:return t.r2p(e)}},axValue:function(t){var e="y"===t._id.charAt(0)?1:0;return function(n){return bC(t,n[e])}},getTransform:function(t){return yC(t.xaxis._offset,t.yaxis._offset)}};!function(t){var e=by,n=mC.CIRCLE_SIDES,r=mC.SQRT2,i=xC.p2r,a=xC.r2p,o=[0,3,4,5,6,1,2],s=[0,3,4,1,2];function l(t,e){return Math.abs(t-e)<=1e-6}function c(t,e){var n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+r*r)}t.writePaths=function(t){var e=t.length;if(!e)return"M0,0Z";for(var n="",r=0;r<e;r++)for(var i=t[r].length,a=0;a<i;a++){var l=t[r][a][0];if("Z"===l)n+="Z";else for(var c=t[r][a].length,u=0;u<c;u++){var h=u;"Q"===l||"S"===l?h=s[u]:"C"===l&&(h=o[u]),n+=t[r][a][h],u>0&&u<c-1&&(n+=",")}}return n},t.readPaths=function(t,r,o,s){var l,c,u,h=e(t),d=[],g=-1,f=0,p=0,v=function(){c=f,u=p};v();for(var m=0;m<h.length;m++){var y,b,x,B,I=[],F=h[m][0],Q=F;switch(F){case"M":g++,d[g]=[],f=+h[m][1],p=+h[m][2],I.push([Q,f,p]),v();break;case"Q":case"S":y=+h[m][1],x=+h[m][2],f=+h[m][3],p=+h[m][4],I.push([Q,f,p,y,x]);break;case"C":y=+h[m][1],x=+h[m][2],b=+h[m][3],B=+h[m][4],f=+h[m][5],p=+h[m][6],I.push([Q,f,p,y,x,b,B]);break;case"T":case"L":f=+h[m][1],p=+h[m][2],I.push([Q,f,p]);break;case"H":Q="L",f=+h[m][1],I.push([Q,f,p]);break;case"V":Q="L",p=+h[m][1],I.push([Q,f,p]);break;case"A":Q="L";var C=+h[m][1],w=+h[m][2];+h[m][4]||(C=-C,w=-w);var U=f-C,A=p;for(l=1;l<=n/2;l++){var S=2*Math.PI*l/n;I.push([Q,U+C*Math.cos(S),A+w*Math.sin(S)])}break;case"Z":f===c&&p===u||(f=c,p=u,I.push([Q,f,p]))}for(var L=(o||{}).domain,k=r._fullLayout._size,G=o&&"pixel"===o.xsizemode,_=o&&"pixel"===o.ysizemode,R=!1===s,E=0;E<I.length;E++){for(l=0;l+2<7;l+=2){var T=I[E][l+1],M=I[E][l+2];void 0!==T&&void 0!==M&&(f=T,p=M,o&&(o.xaxis&&o.xaxis.p2r?(R&&(T-=o.xaxis._offset),T=G?a(o.xaxis,o.xanchor)+T:i(o.xaxis,T)):(R&&(T-=k.l),L?T=L.x[0]+T/k.w:T/=k.w),o.yaxis&&o.yaxis.p2r?(R&&(M-=o.yaxis._offset),M=_?a(o.yaxis,o.yanchor)-M:i(o.yaxis,M)):(R&&(M-=k.t),M=L?L.y[1]-M/k.h:1-M/k.h)),I[E][l+1]=T,I[E][l+2]=M)}d[g].push(I[E].slice())}}return d},t.pointsOnRectangle=function(t){if(5!==t.length)return!1;for(var e=1;e<3;e++){if(!l(t[0][e]-t[1][e],t[3][e]-t[2][e]))return!1;if(!l(t[0][e]-t[3][e],t[1][e]-t[2][e]))return!1}return!(!l(t[0][1],t[1][1])&&!l(t[0][1],t[3][1]))&&!!(c(t[0],t[1])*c(t[0],t[3]))},t.pointsOnEllipse=function(t){var e=t.length;if(e!==n+1)return!1;e=n;for(var r=0;r<e;r++){var i=(2*e-r)%e,a=(e/2+i)%e,o=(e/2+r)%e;if(!l(c(t[r],t[o]),c(t[i],t[a])))return!1}return!0},t.handleEllipse=function(e,i,a){if(!e)return[i,a];var o=t.ellipseOver({x0:i[0],y0:i[1],x1:a[0],y1:a[1]}),s=(o.x1+o.x0)/2,l=(o.y1+o.y0)/2,c=(o.x1-o.x0)/2,u=(o.y1-o.y0)/2;c||(c=u/=r),u||(u=c/=r);for(var h=[],d=0;d<n;d++){var g=2*d*Math.PI/n;h.push([s+c*Math.cos(g),l+u*Math.sin(g)])}return h},t.ellipseOver=function(t){var e=t.x0,n=t.y0,i=t.x1,a=t.y1,o=i-e,s=a-n,l=((e-=o)+i)/2,c=((n-=s)+a)/2;return{x0:l-(o*=r),y0:c-(s*=r),x1:l+o,y1:c+s}},t.fixDatesForPaths=function(t,e,n){var r="date"===e.type,i="date"===n.type;if(!r&&!i)return t;for(var a=0;a<t.length;a++)for(var o=0;o<t[a].length;o++)for(var s=0;s+2<t[a][o].length;s+=2)r&&(t[a][o][s+1]=t[a][o][s+1].replace(" ","_")),i&&(t[a][o][s+2]=t[a][o][s+2].replace(" ","_"));return t}}(vC);var BC=hC.drawMode,IC=hC.openMode,FC=mC.i000,QC=mC.i090,CC=mC.i180,wC=mC.i270,UC=mC.cos45,AC=mC.sin45,SC=xC.p2r,LC=xC.r2p,kC=cp.clearOutline,GC=vC.readPaths,_C=vC.writePaths,RC=vC.ellipseOver,EC=vC.fixDatesForPaths;function TC(t,e,n){var r,i=t[0][0],a=e.gd,o=i.getAttribute("d"),s=a._fullLayout.newshape,l=e.plotinfo,c=e.isActiveShape,u=l.xaxis,h=l.yaxis,d=!!l.domain||!l.xaxis,g=!!l.domain||!l.yaxis,f=IC(n),p=GC(o,a,l,c),v={editable:!0,visible:s.visible,name:s.name,showlegend:s.showlegend,legend:s.legend,legendwidth:s.legendwidth,legendgroup:s.legendgroup,legendgrouptitle:{text:s.legendgrouptitle.text,font:s.legendgrouptitle.font},legendrank:s.legendrank,label:s.label,xref:d?"paper":u._id,yref:g?"paper":h._id,layer:s.layer,opacity:s.opacity,line:{color:s.line.color,width:s.line.width,dash:s.line.dash}};if(f||(v.fillcolor=s.fillcolor,v.fillrule=s.fillrule),1===p.length&&(r=p[0]),r&&5===r.length&&"drawrect"===n)v.type="rect",v.x0=r[0][1],v.y0=r[0][2],v.x1=r[2][1],v.y1=r[2][2];else if(r&&"drawline"===n)v.type="line",v.x0=r[0][1],v.y0=r[0][2],v.x1=r[1][1],v.y1=r[1][2];else if(r&&"drawcircle"===n){v.type="circle";var m=r[FC][1],y=r[QC][1],b=r[CC][1],x=r[wC][1],B=r[FC][2],I=r[QC][2],F=r[CC][2],Q=r[wC][2],C=l.xaxis&&("date"===l.xaxis.type||"log"===l.xaxis.type),w=l.yaxis&&("date"===l.yaxis.type||"log"===l.yaxis.type);C&&(m=LC(l.xaxis,m),y=LC(l.xaxis,y),b=LC(l.xaxis,b),x=LC(l.xaxis,x)),w&&(B=LC(l.yaxis,B),I=LC(l.yaxis,I),F=LC(l.yaxis,F),Q=LC(l.yaxis,Q));var U=(y+x)/2,A=(B+F)/2,S=RC({x0:U,y0:A,x1:U+(x-y+b-m)/2*UC,y1:A+(Q-I+F-B)/2*AC});C&&(S.x0=SC(l.xaxis,S.x0),S.x1=SC(l.xaxis,S.x1)),w&&(S.y0=SC(l.yaxis,S.y0),S.y1=SC(l.yaxis,S.y1)),v.x0=S.x0,v.y0=S.y0,v.x1=S.x1,v.y1=S.y1}else v.type="path",u&&h&&EC(p,u,h),v.path=_C(p),r=null;return v}var MC=function(t,e){if(t.length&&t[0][0]){var n=e.gd,r=e.isActiveShape,i=e.dragmode,a=(n.layout||{}).shapes||[];if(!BC(i)&&void 0!==r){var o=n._fullLayout._activeShapeIndex;if(o<a.length)switch(n._fullLayout.shapes[o].type){case"rect":i="drawrect";break;case"circle":i="drawcircle";break;case"line":i="drawline";break;case"path":var s=a[o].path||"";i="Z"===s[s.length-1]?"drawclosedpath":"drawopenpath"}}var l=TC(t,e,i);kC(n);for(var c=e.editHelpers,u=(c||{}).modifyItem,h=[],d=0;d<a.length;d++){var g=n._fullLayout.shapes[d];if(h[d]=g._input,void 0!==r&&d===n._fullLayout._activeShapeIndex){var f=l;switch(g.type){case"line":case"rect":case"circle":u("x0",f.x0),u("x1",f.x1),u("y0",f.y0),u("y1",f.y1);break;case"path":u("path",f.path)}}}return void 0===r?(h.push(l),h):c?c.getUpdateObj():{}}},NC=TC,DC=hC.selectMode,XC=cp.clearOutline,ZC=vC.readPaths,VC=vC.writePaths,HC=vC.fixDatesForPaths,WC=function(t,e){if(t.length){var n=t[0][0];if(n){var r=n.getAttribute("d"),i=e.gd,a=i._fullLayout.newselection,o=e.plotinfo,s=o.xaxis,l=o.yaxis,c=e.isActiveSelection,u=e.dragmode,h=(i.layout||{}).selections||[];if(!DC(u)&&void 0!==c){var d=i._fullLayout._activeSelectionIndex;if(d<h.length)switch(i._fullLayout.selections[d].type){case"rect":u="select";break;case"path":u="lasso"}}var g,f=ZC(r,i,o,c),p={xref:s._id,yref:l._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};1===f.length&&(g=f[0]),g&&5===g.length&&"select"===u?(p.type="rect",p.x0=g[0][1],p.y0=g[0][2],p.x1=g[2][1],p.y1=g[2][2]):(p.type="path",s&&l&&HC(f,s,l),p.path=VC(f),g=null),XC(i);for(var v=e.editHelpers,m=(v||{}).modifyItem,y=[],b=0;b<h.length;b++){var x=i._fullLayout.selections[b];if(x){if(y[b]=x._input,void 0!==c&&b===i._fullLayout._activeSelectionIndex){var B=p;switch(x.type){case"rect":m("x0",B.x0),m("x1",B.x1),m("y0",B.y0),m("y1",B.y1);break;case"path":m("path",B.path)}}}else y[b]=x}return void 0===c?(y.push(p),y):v?v.getUpdateObj():{}}}},YC={},zC={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}};!function(t){var e=zC,n=yf,r=iI;t.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},t.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},t.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},t.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},t.extractPathCoords=function(t,r,i){var a=[];return t.match(e.segmentRE).forEach((function(t){var o=r[t.charAt(0)].drawn;if(void 0!==o){var s=t.substr(1).match(e.paramRE);if(s&&!(s.length<o)){var l=s[o],c=i?l:n.cleanNumber(l);a.push(c)}}})),a},t.getDataToPixel=function(e,n,r,i){var a,o=e._fullLayout._size;if(n)if("domain"===i)a=function(t){return n._length*(r?1-t:t)+n._offset};else{var s=t.shapePositionToRange(n);a=function(t){return n._offset+n.r2p(s(t,!0))},"date"===n.type&&(a=t.decodeDate(a))}else a=r?function(t){return o.t+o.h*(1-t)}:function(t){return o.l+o.w*t};return a},t.getPixelToData=function(e,n,r,i){var a,o=e._fullLayout._size;if(n)if("domain"===i)a=function(t){var e=(t-n._offset)/n._length;return r?1-e:e};else{var s=t.rangeToShapePosition(n);a=function(t){return s(n.p2r(t-n._offset))}}else a=r?function(t){return 1-(t-o.t)/o.h}:function(t){return(t-o.l)/o.w};return a},t.roundPositionForSharpStrokeRendering=function(t,e){var n=1===Math.round(e%2),r=Math.round(t);return n?r+.5:r},t.makeShapesOptionsAndPlotinfo=function(t,e){var n=t._fullLayout.shapes[e]||{},r=t._fullLayout._plots[n.xref+n.yref];return!!r?r._hadPlotinfo=!0:(r={},n.xref&&"paper"!==n.xref&&(r.xaxis=t._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(r.yaxis=t._fullLayout[n.yref+"axis"])),r.xsizemode=n.xsizemode,r.ysizemode=n.ysizemode,r.xanchor=n.xanchor,r.yanchor=n.yanchor,{options:n,plotinfo:r}},t.makeSelectionsOptionsAndPlotinfo=function(t,e){var n=t._fullLayout.selections[e]||{},r=t._fullLayout._plots[n.xref+n.yref];return!!r?r._hadPlotinfo=!0:(r={},n.xref&&(r.xaxis=t._fullLayout[n.xref+"axis"]),n.yref&&(r.yaxis=t._fullLayout[n.yref+"axis"])),{options:n,plotinfo:r}},t.getPathString=function(i,a){var o,s,l,c,u,h,d,g,f=a.type,p=r.getRefType(a.xref),v=r.getRefType(a.yref),m=r.getFromId(i,a.xref),y=r.getFromId(i,a.yref),b=i._fullLayout._size;if(m?"domain"===p?s=function(t){return m._offset+m._length*t}:(o=t.shapePositionToRange(m),s=function(t){return m._offset+m.r2p(o(t,!0))}):s=function(t){return b.l+b.w*t},y?"domain"===v?c=function(t){return y._offset+y._length*(1-t)}:(l=t.shapePositionToRange(y),c=function(t){return y._offset+y.r2p(l(t,!0))}):c=function(t){return b.t+b.h*(1-t)},"path"===f)return m&&"date"===m.type&&(s=t.decodeDate(s)),y&&"date"===y.type&&(c=t.decodeDate(c)),function(t,r,i){var a=t.path,o=t.xsizemode,s=t.ysizemode,l=t.xanchor,c=t.yanchor;return a.replace(e.segmentRE,(function(t){var a=0,u=t.charAt(0),h=e.paramIsX[u],d=e.paramIsY[u],g=e.numParams[u],f=t.substr(1).replace(e.paramRE,(function(t){return h[a]?t="pixel"===o?r(l)+Number(t):r(t):d[a]&&(t="pixel"===s?i(c)-Number(t):i(t)),++a>g&&(t="X"),t}));return a>g&&(f=f.replace(/[\s,]*X.*/,""),n.log("Ignoring extra params in segment "+t)),u+f}))}(a,s,c);if("pixel"===a.xsizemode){var x=s(a.xanchor);u=x+a.x0,h=x+a.x1}else u=s(a.x0),h=s(a.x1);if("pixel"===a.ysizemode){var B=c(a.yanchor);d=B-a.y0,g=B-a.y1}else d=c(a.y0),g=c(a.y1);if("line"===f)return"M"+u+","+d+"L"+h+","+g;if("rect"===f)return"M"+u+","+d+"H"+h+"V"+g+"H"+u+"Z";var I=(u+h)/2,F=(d+g)/2,Q=Math.abs(I-u),C=Math.abs(F-d),w="A"+Q+","+C,U=I+Q+","+F;return"M"+U+w+" 0 1,1 "+(I+","+(F-C))+w+" 0 0,1 "+U+"Z"}}(YC);var OC=yf,JC=iI,PC=tv,jC=Qb,KC=vC.readPaths,qC=YC,$C=qC.getPathString,tw=Id,ew=nv.FROM_TL,nw=function(t,e,n,r){if(r.selectAll(".shape-label").remove(),n.label.text||n.label.texttemplate){var i;if(n.label.texttemplate){var a={};if("path"!==n.type){var o=JC.getFromId(t,n.xref),s=JC.getFromId(t,n.yref);for(var l in tw){var c=tw[l](n,o,s);void 0!==c&&(a[l]=c)}}i=OC.texttemplateStringForShapes(n.label.texttemplate,{},t._fullLayout._d3locale,a)}else i=n.label.text;var u,h,d,g,f={"data-index":e},p=n.label.font,v=r.append("g").attr(f).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(i);if(n.path){var m=$C(t,n),y=KC(m,t);u=1/0,d=1/0,h=-1/0,g=-1/0;for(var b=0;b<y.length;b++)for(var x=0;x<y[b].length;x++)for(var B=y[b][x],I=1;I<B.length;I+=2){var F=B[I],Q=B[I+1];u=Math.min(u,F),h=Math.max(h,F),d=Math.min(d,Q),g=Math.max(g,Q)}}else{var C=JC.getFromId(t,n.xref),w=JC.getRefType(n.xref),U=JC.getFromId(t,n.yref),A=JC.getRefType(n.yref),S=qC.getDataToPixel(t,C,!1,w),L=qC.getDataToPixel(t,U,!0,A);u=S(n.x0),h=S(n.x1),d=L(n.y0),g=L(n.y1)}var k=n.label.textangle;"auto"===k&&(k="line"===n.type?function(t,e,n,r){var i,a;a=Math.abs(n-t),i=n>=t?e-r:r-e;return-180/Math.PI*Math.atan2(i,a)}(u,d,h,g):0),v.call((function(e){return e.call(jC.font,p).attr({}),PC.convertToTspans(e,t),e}));var G=function(t,e,n,r,i,a,o){var s,l,c,u,h=i.label.textposition,d=i.label.textangle,g=i.label.padding,f=i.type,p=Math.PI/180*a,v=Math.sin(p),m=Math.cos(p),y=i.label.xanchor,b=i.label.yanchor;if("line"===f){"start"===h?(s=t,l=e):"end"===h?(s=n,l=r):(s=(t+n)/2,l=(e+r)/2),"auto"===y&&(y="start"===h?"auto"===d?n>t?"left":n<t?"right":"center":n>t?"right":n<t?"left":"center":"end"===h?"auto"===d?n>t?"right":n<t?"left":"center":n>t?"left":n<t?"right":"center":"center");var x={left:1,center:0,right:-1},B={bottom:-1,middle:0,top:1};if("auto"===d){var I=B[b];c=-g*v*I,u=g*m*I}else{c=g*x[y],u=g*B[b]}s+=c,l+=u}else c=g+3,-1!==h.indexOf("right")?(s=Math.max(t,n)-c,"auto"===y&&(y="right")):-1!==h.indexOf("left")?(s=Math.min(t,n)+c,"auto"===y&&(y="left")):(s=(t+n)/2,"auto"===y&&(y="center")),l=-1!==h.indexOf("top")?Math.min(e,r):-1!==h.indexOf("bottom")?Math.max(e,r):(e+r)/2,u=g,"bottom"===b?l-=u:"top"===b&&(l+=u);var F=ew[b],Q=i.label.font.size,C=o.height;return{textx:s+(C*F-Q)*v,texty:l+-(C*F-Q)*m,xanchor:y}}(u,d,h,g,n,k,jC.bBox(v.node())),_=G.textx,R=G.texty,E=G.xanchor;v.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[E],y:R,x:_,transform:"rotate("+k+","+_+","+R+")"}).call(PC.positionText,_,R)}};var rw=yf.strTranslate,iw=AI,aw=hC.drawMode,ow=hC.selectMode,sw=hh,lw=Pu,cw=mC.i000,uw=mC.i090,hw=mC.i180,dw=mC.i270,gw=cp.clearOutlineControllers,fw=vC.pointsOnRectangle,pw=vC.pointsOnEllipse,vw=vC.writePaths,mw=MC,yw=NC,bw=WC,xw=nw,Bw=function t(e,n,r,i){i||(i=0);var a=r.gd;function o(){t(e,n,r,i++),(pw(e[0])||r.hasText)&&s({redrawing:!0})}function s(t){var e={};void 0!==r.isActiveShape&&(r.isActiveShape=!1,e=mw(n,r)),void 0!==r.isActiveSelection&&(r.isActiveSelection=!1,e=bw(n,r),a._fullLayout._reselect=!0),Object.keys(e).length&&sw.call((t||{}).redrawing?"relayout":"_guiRelayout",a,e)}var l,c,u,h,d,g=a._fullLayout._zoomlayer,f=r.dragmode,p=aw(f),v=ow(f);((p||v)&&(a._fullLayout._outlining=!0),gw(a),n.attr("d",vw(e)),i||!r.isActiveShape&&!r.isActiveSelection)||(d=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t[n]=[];for(var i=0;i<r.length;i++){t[n][i]=[];for(var a=0;a<r[i].length;a++)t[n][i][a]=r[i][a]}}return t}([],e),function(t){l=[];for(var n=0;n<e.length;n++){var i=e[n],o=fw(i),s=!o&&pw(i);l[n]=[];for(var c=i.length,u=0;u<c;u++)if("Z"!==i[u][0]&&(!s||u===cw||u===uw||u===hw||u===dw)){var h,d=o&&r.isActiveSelection;d&&(h=Iw(i,u));var g=i[u][1],f=i[u][2],p=t.append(d?"rect":"circle").attr("data-i",n).attr("data-j",u).style({fill:lw.background,stroke:lw.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(d){var v=h[1]-g,m=h[2]-f,y=m?5:Math.max(Math.min(25,Math.abs(v)-5),5),x=v?5:Math.max(Math.min(25,Math.abs(m)-5),5);p.classed(m?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",y).attr("height",x).attr("x",g-y/2).attr("y",f-x/2).attr("transform",rw(v/2,m/2))}else p.classed("cursor-grab",!0).attr("r",5).attr("cx",g).attr("cy",f);l[n][u]={element:p.node(),gd:a,prepFn:b,doneFn:B,clickFn:I},iw.init(l[n][u])}}}(g.append("g").attr("class","outline-controllers")),function(){if(c=[],!e.length)return;var t=0;c[t]={element:n[0][0],gd:a,prepFn:Q,doneFn:C,clickFn:w},iw.init(c[t])}());if(p&&r.hasText){var m=g.select(".label-temp"),y=yw(n,r,r.dragmode);xw(a,"label-temp",y,m)}function b(t){u=+t.srcElement.getAttribute("data-i"),h=+t.srcElement.getAttribute("data-j"),l[u][h].moveFn=x}function x(t,n){if(e.length){var i=d[u][h][1],a=d[u][h][2],s=e[u],l=s.length;if(fw(s)){var c=t,g=n;if(r.isActiveSelection)Iw(s,h)[1]===s[h][1]?g=0:c=0;for(var f=0;f<l;f++)if(f!==h){var p=s[f];p[1]===s[h][1]&&(p[1]=i+c),p[2]===s[h][2]&&(p[2]=a+g)}if(s[h][1]=i+c,s[h][2]=a+g,!fw(s))for(var v=0;v<l;v++)for(var m=0;m<s[v].length;m++)s[v][m]=d[u][v][m]}else s[h][1]=i+t,s[h][2]=a+n;o()}}function B(){s()}function I(t,n){if(2===t){u=+n.srcElement.getAttribute("data-i"),h=+n.srcElement.getAttribute("data-j");var r=e[u];fw(r)||pw(r)||function(){if(e.length&&e[u]&&e[u].length){for(var t=[],n=0;n<e[u].length;n++)n!==h&&t.push(e[u][n]);t.length>1&&(2!==t.length||"Z"!==t[1][0])&&(0===h&&(t[0][0]="M"),e[u]=t,o(),s())}}()}}function F(t,n){!function(t,n){if(e.length)for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)for(var a=0;a+2<e[r][i].length;a+=2)e[r][i][a+1]=d[r][i][a+1]+t,e[r][i][a+2]=d[r][i][a+2]+n}(t,n),o()}function Q(t){(u=+t.srcElement.getAttribute("data-i"))||(u=0),c[u].moveFn=F}function C(){s()}function w(t){2===t&&function(t){if(!ow(t._fullLayout.dragmode))return;gw(t);var e=t._fullLayout._activeSelectionIndex,n=(t.layout||{}).selections||[];if(e<n.length){for(var r=[],i=0;i<n.length;i++)i!==e&&r.push(n[i]);delete t._fullLayout._activeSelectionIndex;var a=t._fullLayout.selections[e];t._fullLayout._deselect={xref:a.xref,yref:a.yref},sw.call("_guiRelayout",t,{selections:r})}}(a)}};function Iw(t,e){var n,r,i,a=t[e][1],o=t[e][2],s=t.length;return r=t[n=(e+1)%s][1],i=t[n][2],r===a&&i===o&&(r=t[n=(e+2)%s][1],i=t[n][2]),[n,r,i]}var Fw=uo,Qw=hh,Cw=yf,ww=iI,Uw=vC.readPaths,Aw=Bw,Sw=nw,Lw=cp.clearOutlineControllers,kw=Pu,Gw=Qb,_w=$f.arrayEditor,Rw=AI,Ew=LI,Tw=zC,Mw=YC,Nw=Mw.getPathString,Dw={draw:Xw,drawOne:Hw,eraseActiveShape:function(t){if(!Vw(t))return;Lw(t);var e=t._fullLayout._activeShapeIndex,n=(t.layout||{}).shapes||[];if(e<n.length){for(var r=[],i=0;i<n.length;i++)i!==e&&r.push(n[i]);return delete t._fullLayout._activeShapeIndex,Qw.call("_guiRelayout",t,{shapes:r})}},drawLabel:Sw};function Xw(t){var e=t._fullLayout;for(var n in e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._shapeUpperLayer.selectAll("text").remove(),e._shapeLowerLayer.selectAll("text").remove(),e._plots){var r=e._plots[n].shapelayer;r&&(r.selectAll("path").remove(),r.selectAll("text").remove())}for(var i=0;i<e.shapes.length;i++)!0===e.shapes[i].visible&&Hw(t,i)}function Zw(t){return!!t._fullLayout._outlining}function Vw(t){return!t._context.edits.shapePosition}function Hw(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var n=Mw.makeShapesOptionsAndPlotinfo(t,e),r=n.options,i=n.plotinfo;if(r._input&&!0===r.visible)if("above"===r.layer)a(t._fullLayout._shapeUpperLayer);else if("paper"===r.xref||"paper"===r.yref)a(t._fullLayout._shapeLowerLayer);else if("between"===r.layer)a(i.shapelayerBetween);else{if(i._hadPlotinfo)a((i.mainplotinfo||i).shapelayer);else a(t._fullLayout._shapeLowerLayer)}function a(n){var a=Nw(t,r),o={"data-index":e,"fill-rule":r.fillrule,d:a},s=r.opacity,l=r.fillcolor,c=r.line.width?r.line.color:"rgba(0,0,0,0)",u=r.line.width,h=r.line.dash;u||!0!==r.editable||(u=5,h="solid");var d="Z"!==a[a.length-1],g=Vw(t)&&r.editable&&t._fullLayout._activeShapeIndex===e;g&&(l=d?"rgba(0,0,0,0)":t._fullLayout.activeshape.fillcolor,s=t._fullLayout.activeshape.opacity);var f,p=n.append("g").classed("shape-group",!0).attr({"data-index":e}),v=p.append("path").attr(o).style("opacity",s).call(kw.stroke,c).call(kw.fill,l).call(Gw.dashLine,h,u);if(Ww(p,t,r),Sw(t,e,r,p),(g||t._context.edits.shapePosition)&&(f=_w(t.layout,"shapes",r)),g){v.style({cursor:"move"});var m={element:v.node(),plotinfo:i,gd:t,editHelpers:f,hasText:r.label.text||r.label.texttemplate,isActiveShape:!0},y=Uw(a,t);Aw(y,v,m)}else t._context.edits.shapePosition?function(t,e,n,r,i,a){var o,s,l,c,u,h,d,g,f,p,v,m,y,b,x,B,I=10,F=10,Q="pixel"===n.xsizemode,C="pixel"===n.ysizemode,w="line"===n.type,U="path"===n.type,A=a.modifyItem,S=Fw.select(e.node().parentNode),L=ww.getFromId(t,n.xref),k=ww.getRefType(n.xref),G=ww.getFromId(t,n.yref),_=ww.getRefType(n.yref),R=Mw.getDataToPixel(t,L,!1,k),E=Mw.getDataToPixel(t,G,!0,_),T=Mw.getPixelToData(t,L,!1,k),M=Mw.getPixelToData(t,G,!0,_),N=X(),D={element:N.node(),gd:t,prepFn:H,doneFn:W,clickFn:Y};function X(){return w?Z():e}function Z(){var t=10,a=Math.max(n.line.width,t),o=i.append("g").attr("data-index",r).attr("drag-helper",!0);o.append("path").attr("d",e.attr("d")).style({cursor:"move","stroke-width":a,"stroke-opacity":"0"});var s={"fill-opacity":"0"},l=Math.max(a/2,t);return o.append("circle").attr({"data-line-point":"start-point",cx:Q?R(n.xanchor)+n.x0:R(n.x0),cy:C?E(n.yanchor)-n.y0:E(n.y0),r:l}).style(s).classed("cursor-grab",!0),o.append("circle").attr({"data-line-point":"end-point",cx:Q?R(n.xanchor)+n.x1:R(n.x1),cy:C?E(n.yanchor)-n.y1:E(n.y1),r:l}).style(s).classed("cursor-grab",!0),o}function V(n){if(Zw(t))B=null;else if(w)B="path"===n.target.tagName?"move":"start-point"===n.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var r=D.element.getBoundingClientRect(),i=r.right-r.left,a=r.bottom-r.top,o=n.clientX-r.left,s=n.clientY-r.top,l=!U&&i>I&&a>F&&!n.shiftKey?Rw.getCursor(o/i,1-s/a):"move";Ew(e,l),B=l.split("-")[0]}}function H(r){Zw(t)||(Q&&(u=R(n.xanchor)),C&&(h=E(n.yanchor)),"path"===n.type?x=n.path:(o=Q?n.x0:R(n.x0),s=C?n.y0:E(n.y0),l=Q?n.x1:R(n.x1),c=C?n.y1:E(n.y1)),o<l?(f=o,y="x0",p=l,b="x1"):(f=l,y="x1",p=o,b="x0"),!C&&s<c||C&&s>c?(d=s,v="y0",g=c,m="y1"):(d=c,v="y1",g=s,m="y0"),V(r),J(i,n),j(e,n,t),D.moveFn="move"===B?z:O,D.altKey=r.altKey)}function W(){Zw(t)||(Ew(e),P(i),Ww(e,t,n),Qw.call("_guiRelayout",t,a.getUpdateObj()))}function Y(){Zw(t)||P(i)}function z(a,d){if("path"===n.type){var g=function(t){return t},f=g,p=g;Q?A("xanchor",n.xanchor=T(u+a)):(f=function(t){return T(R(t)+a)},L&&"date"===L.type&&(f=Mw.encodeDate(f))),C?A("yanchor",n.yanchor=M(h+d)):(p=function(t){return M(E(t)+d)},G&&"date"===G.type&&(p=Mw.encodeDate(p))),A("path",n.path=Yw(x,f,p))}else Q?A("xanchor",n.xanchor=T(u+a)):(A("x0",n.x0=T(o+a)),A("x1",n.x1=T(l+a))),C?A("yanchor",n.yanchor=M(h+d)):(A("y0",n.y0=M(s+d)),A("y1",n.y1=M(c+d)));e.attr("d",Nw(t,n)),J(i,n),Sw(t,r,n,S)}function O(a,k){if(U){var _=function(t){return t},N=_,D=_;Q?A("xanchor",n.xanchor=T(u+a)):(N=function(t){return T(R(t)+a)},L&&"date"===L.type&&(N=Mw.encodeDate(N))),C?A("yanchor",n.yanchor=M(h+k)):(D=function(t){return M(E(t)+k)},G&&"date"===G.type&&(D=Mw.encodeDate(D))),A("path",n.path=Yw(x,N,D))}else if(w){if("resize-over-start-point"===B){var X=o+a,Z=C?s-k:s+k;A("x0",n.x0=Q?X:T(X)),A("y0",n.y0=C?Z:M(Z))}else if("resize-over-end-point"===B){var V=l+a,H=C?c-k:c+k;A("x1",n.x1=Q?V:T(V)),A("y1",n.y1=C?H:M(H))}}else{var W=function(t){return-1!==B.indexOf(t)},Y=W("n"),z=W("s"),O=W("w"),P=W("e"),j=Y?d+k:d,K=z?g+k:g,q=O?f+a:f,$=P?p+a:p;C&&(Y&&(j=d-k),z&&(K=g-k)),(!C&&K-j>F||C&&j-K>F)&&(A(v,n[v]=C?j:M(j)),A(m,n[m]=C?K:M(K))),$-q>I&&(A(y,n[y]=Q?q:T(q)),A(b,n[b]=Q?$:T($)))}e.attr("d",Nw(t,n)),J(i,n),Sw(t,r,n,S)}function J(t,e){function n(){var n="path"!==e.type,r=t.selectAll(".visual-cue").data([0]),i=1;r.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":i}).classed("visual-cue",!0);var a=R(Q?e.xanchor:Cw.midRange(n?[e.x0,e.x1]:Mw.extractPathCoords(e.path,Tw.paramIsX))),o=E(C?e.yanchor:Cw.midRange(n?[e.y0,e.y1]:Mw.extractPathCoords(e.path,Tw.paramIsY)));if(a=Mw.roundPositionForSharpStrokeRendering(a,i),o=Mw.roundPositionForSharpStrokeRendering(o,i),Q&&C){var s="M"+(a-1-i)+","+(o-1-i)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";r.attr("d",s)}else if(Q){var l="M"+(a-1-i)+","+(o-9-i)+"v18 h2 v-18 Z";r.attr("d",l)}else{var c="M"+(a-9-i)+","+(o-1-i)+"h18 v2 h-18 Z";r.attr("d",c)}}(Q||C)&&n()}function P(t){t.selectAll(".visual-cue").remove()}function j(t,e,n){var r=e.xref,i=e.yref,a=ww.getFromId(n,r),o=ww.getFromId(n,i),s="";"paper"===r||a.autorange||(s+=r),"paper"===i||o.autorange||(s+=i),Gw.setClipUrl(t,s?"clip"+n._fullLayout._uid+s:null,n)}Rw.init(D),N.node().onmousemove=V}(t,v,r,e,n,f):!0===r.editable&&v.style("pointer-events",d||kw.opacity(l)*s<=.5?"stroke":"all");v.node().addEventListener("click",(function(){return function(t,e){if(!Vw(t))return;var n=e.node(),r=+n.getAttribute("data-index");if(r>=0){if(r===t._fullLayout._activeShapeIndex)return void zw(t);t._fullLayout._activeShapeIndex=r,t._fullLayout._deactivateShape=zw,Xw(t)}}(t,v)}))}}function Ww(t,e,n){var r=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");Gw.setClipUrl(t,r?"clip"+e._fullLayout._uid+r:null,e)}function Yw(t,e,n){return t.replace(Tw.segmentRE,(function(t){var r=0,i=t.charAt(0),a=Tw.paramIsX[i],o=Tw.paramIsY[i],s=Tw.numParams[i];return i+t.substr(1).replace(Tw.paramRE,(function(t){return r>=s||(a[r]?t=e(t):o[r]&&(t=n(t)),r++),t}))}))}function zw(t){Vw(t)&&(t._fullLayout._activeShapeIndex>=0&&(Lw(t),delete t._fullLayout._activeShapeIndex,Xw(t)))}var Ow=hh,Jw=qp,Pw=op,jw=pC,Kw=Dw.eraseActiveShape,qw=yf,$w=qw._,tU=fC.exports={};function eU(t,e){var n,r,i=e.currentTarget,a=i.getAttribute("data-attr"),o=i.getAttribute("data-val")||!0,s=t._fullLayout,l={},c=Pw.list(t,null,!0),u=s._cartesianSpikesEnabled;if("zoom"===a){var h,d="in"===o?.5:2,g=(1+d)/2,f=(1-d)/2;for(r=0;r<c.length;r++)if(!(n=c[r]).fixedrange)if(h=n._name,"auto"===o)l[h+".autorange"]=!0;else if("reset"===o)void 0===n._rangeInitial0&&void 0===n._rangeInitial1?l[h+".autorange"]=!0:void 0===n._rangeInitial0?(l[h+".autorange"]=n._autorangeInitial,l[h+".range"]=[null,n._rangeInitial1]):void 0===n._rangeInitial1?(l[h+".range"]=[n._rangeInitial0,null],l[h+".autorange"]=n._autorangeInitial):l[h+".range"]=[n._rangeInitial0,n._rangeInitial1],void 0!==n._showSpikeInitial&&(l[h+".showspikes"]=n._showSpikeInitial,"on"!==u||n._showSpikeInitial||(u="off"));else{var p=[n.r2l(n.range[0]),n.r2l(n.range[1])],v=[g*p[0]+f*p[1],g*p[1]+f*p[0]];l[h+".range[0]"]=n.l2r(v[0]),l[h+".range[1]"]=n.l2r(v[1])}}else"hovermode"!==a||"x"!==o&&"y"!==o||(o=s._isHoriz?"y":"x",i.setAttribute("data-val",o)),l[a]=o;s._cartesianSpikesEnabled=u,Ow.call("_guiRelayout",t,l)}function nU(t,e){for(var n=e.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,a=t._fullLayout._subplots.gl3d||[],o={},s=r.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=i;var c="pan"===i?i:"zoom";o.dragmode=c,Ow.call("_guiRelayout",t,o)}function rU(t,e){for(var n=e.currentTarget.getAttribute("data-attr"),r="resetLastSave"===n,i="resetDefault"===n,a=t._fullLayout,o=a._subplots.gl3d||[],s={},l=0;l<o.length;l++){var c,u=o[l],h=u+".camera",d=u+".aspectratio",g=u+".aspectmode",f=a[u]._scene;r?(s[h+".up"]=f.viewInitial.up,s[h+".eye"]=f.viewInitial.eye,s[h+".center"]=f.viewInitial.center,c=!0):i&&(s[h+".up"]=null,s[h+".eye"]=null,s[h+".center"]=null,c=!0),c&&(s[d+".x"]=f.viewInitial.aspectratio.x,s[d+".y"]=f.viewInitial.aspectratio.y,s[d+".z"]=f.viewInitial.aspectratio.z,s[g]=f.viewInitial.aspectmode)}Ow.call("_guiRelayout",t,s)}function iU(t,e){var n=e.currentTarget,r=n._previousVal,i=t._fullLayout,a=i._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(r)l=r,n._previousVal=null;else{for(var c=0;c<a.length;c++){var u=a[c],h=i[u],d=u+".hovermode";s[d]=h.hovermode,l[d]=!1;for(var g=0;g<3;g++){var f=o[g],p=u+"."+f+".showspikes";l[p]=!1,s[p]=h[f].showspikes}}n._previousVal=s}return l}function aU(t,e){for(var n=e.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,a=t._fullLayout,o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],c=a[l];if("zoom"===r){var u=c.projection.scale,h="in"===i?2*u:.5*u;Ow.call("_guiRelayout",t,l+".projection.scale",h)}}"reset"===r&&cU(t,"geo")}function oU(t){var e=t._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function sU(t){var e=oU(t);Ow.call("_guiRelayout",t,"hovermode",e)}function lU(t,e){for(var n=e.currentTarget.getAttribute("data-val"),r=t._fullLayout,i=r._subplots.mapbox||[],a={},o=0;o<i.length;o++){var s=i[o],l=r[s].zoom,c="in"===n?1.05*l:l/1.05;a[s+".zoom"]=c}Ow.call("_guiRelayout",t,a)}function cU(t,e){for(var n=t._fullLayout,r=n._subplots[e]||[],i={},a=0;a<r.length;a++)for(var o=r[a],s=n[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];i[o+"."+u]=s[u]}Ow.call("_guiRelayout",t,i)}tU.toImage={name:"toImage",title:function(t){var e=(t._context.toImageButtonOptions||{}).format||"png";return $w(t,"png"===e?"Download plot as a png":"Download plot")},icon:jw.camera,click:function(t){var e=t._context.toImageButtonOptions,n={format:e.format||"png"};qw.notifier($w(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&qw.isIE()&&(qw.notifier($w(t,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach((function(t){t in e&&(n[t]=e[t])})),Ow.call("downloadImage",t,n).then((function(e){qw.notifier($w(t,"Snapshot succeeded")+" - "+e,"long")})).catch((function(){qw.notifier($w(t,"Sorry, there was a problem downloading your snapshot!"),"long")}))}},tU.sendDataToCloud={name:"sendDataToCloud",title:function(t){return $w(t,"Edit in Chart Studio")},icon:jw.disk,click:function(t){Jw.sendDataToCloud(t)}},tU.editInChartStudio={name:"editInChartStudio",title:function(t){return $w(t,"Edit in Chart Studio")},icon:jw.pencil,click:function(t){Jw.sendDataToCloud(t)}},tU.zoom2d={name:"zoom2d",_cat:"zoom",title:function(t){return $w(t,"Zoom")},attr:"dragmode",val:"zoom",icon:jw.zoombox,click:eU},tU.pan2d={name:"pan2d",_cat:"pan",title:function(t){return $w(t,"Pan")},attr:"dragmode",val:"pan",icon:jw.pan,click:eU},tU.select2d={name:"select2d",_cat:"select",title:function(t){return $w(t,"Box Select")},attr:"dragmode",val:"select",icon:jw.selectbox,click:eU},tU.lasso2d={name:"lasso2d",_cat:"lasso",title:function(t){return $w(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:jw.lasso,click:eU},tU.drawclosedpath={name:"drawclosedpath",title:function(t){return $w(t,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:jw.drawclosedpath,click:eU},tU.drawopenpath={name:"drawopenpath",title:function(t){return $w(t,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:jw.drawopenpath,click:eU},tU.drawline={name:"drawline",title:function(t){return $w(t,"Draw line")},attr:"dragmode",val:"drawline",icon:jw.drawline,click:eU},tU.drawrect={name:"drawrect",title:function(t){return $w(t,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:jw.drawrect,click:eU},tU.drawcircle={name:"drawcircle",title:function(t){return $w(t,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:jw.drawcircle,click:eU},tU.eraseshape={name:"eraseshape",title:function(t){return $w(t,"Erase active shape")},icon:jw.eraseshape,click:Kw},tU.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(t){return $w(t,"Zoom in")},attr:"zoom",val:"in",icon:jw.zoom_plus,click:eU},tU.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(t){return $w(t,"Zoom out")},attr:"zoom",val:"out",icon:jw.zoom_minus,click:eU},tU.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(t){return $w(t,"Autoscale")},attr:"zoom",val:"auto",icon:jw.autoscale,click:eU},tU.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(t){return $w(t,"Reset axes")},attr:"zoom",val:"reset",icon:jw.home,click:eU},tU.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(t){return $w(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:jw.tooltip_basic,gravity:"ne",click:eU},tU.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(t){return $w(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:jw.tooltip_compare,gravity:"ne",click:eU},tU.zoom3d={name:"zoom3d",_cat:"zoom",title:function(t){return $w(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:jw.zoombox,click:nU},tU.pan3d={name:"pan3d",_cat:"pan",title:function(t){return $w(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:jw.pan,click:nU},tU.orbitRotation={name:"orbitRotation",title:function(t){return $w(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:jw["3d_rotate"],click:nU},tU.tableRotation={name:"tableRotation",title:function(t){return $w(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:jw["z-axis"],click:nU},tU.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(t){return $w(t,"Reset camera to default")},attr:"resetDefault",icon:jw.home,click:rU},tU.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(t){return $w(t,"Reset camera to last save")},attr:"resetLastSave",icon:jw.movie,click:rU},tU.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(t){return $w(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:jw.tooltip_basic,gravity:"ne",click:function(t,e){var n=iU(t,e);Ow.call("_guiRelayout",t,n)}},tU.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(t){return $w(t,"Zoom in")},attr:"zoom",val:"in",icon:jw.zoom_plus,click:aU},tU.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(t){return $w(t,"Zoom out")},attr:"zoom",val:"out",icon:jw.zoom_minus,click:aU},tU.resetGeo={name:"resetGeo",_cat:"reset",title:function(t){return $w(t,"Reset")},attr:"reset",val:null,icon:jw.autoscale,click:aU},tU.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(t){return $w(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:jw.tooltip_basic,gravity:"ne",click:sU},tU.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(t){return $w(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:jw.tooltip_basic,gravity:"ne",click:sU},tU.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(t){return $w(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:jw.tooltip_basic,gravity:"ne",click:sU},tU.resetViewSankey={name:"resetSankeyGroup",title:function(t){return $w(t,"Reset view")},icon:jw.home,click:function(t){for(var e={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<t._fullData.length;n++){var r=t._fullData[n]._viewInitial;e["node.groups"].push(r.node.groups.slice()),e["node.x"].push(r.node.x.slice()),e["node.y"].push(r.node.y.slice())}Ow.call("restyle",t,e)}},tU.toggleHover={name:"toggleHover",title:function(t){return $w(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:jw.tooltip_basic,gravity:"ne",click:function(t,e){var n=iU(t,e);n.hovermode=oU(t),Ow.call("_guiRelayout",t,n)}},tU.resetViews={name:"resetViews",title:function(t){return $w(t,"Reset views")},icon:jw.home,click:function(t,e){var n=e.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),eU(t,e),n.setAttribute("data-attr","resetLastSave"),rU(t,e),cU(t,"geo"),cU(t,"mapbox")}},tU.toggleSpikelines={name:"toggleSpikelines",title:function(t){return $w(t,"Toggle Spike Lines")},icon:jw.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout,n=e._cartesianSpikesEnabled;e._cartesianSpikesEnabled="on"===n?"off":"on",Ow.call("_guiRelayout",t,function(t){for(var e="on"===t._fullLayout._cartesianSpikesEnabled,n=Pw.list(t,null,!0),r={},i=0;i<n.length;i++){var a=n[i];r[a._name+".showspikes"]=!!e||a._showSpikeInitial}return r}(t))}},tU.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(t){return $w(t,"Reset view")},attr:"reset",icon:jw.home,click:function(t){cU(t,"mapbox")}},tU.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(t){return $w(t,"Zoom in")},attr:"zoom",val:"in",icon:jw.zoom_plus,click:lU},tU.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(t){return $w(t,"Zoom out")},attr:"zoom",val:"out",icon:jw.zoom_minus,click:lU};var uU=fC.exports,hU=uU,dU=Object.keys(hU),gU=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],fU=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(gU),pU=[];dU.forEach((function(t){!function(t){if(-1===fU.indexOf(t._cat||t.name)){var e=t.name,n=(t._cat||t.name).toLowerCase();-1===pU.indexOf(e)&&pU.push(e),-1===pU.indexOf(n)&&pU.push(n)}}(hU[t])})),pU.sort();var vU={DRAW_MODES:gU,backButtons:fU,foreButtons:pU},mU=vU,yU={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+mU.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+mU.foreButtons.join("*, *")+"*."].join(" ")}},bU=yf,xU=Pu,BU=$f,IU=yU,FU=uo,QU=Ac,CU=yf,wU=pC,UU=so.version,AU=new DOMParser;function SU(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var LU=SU.prototype;LU.update=function(t,e){this.graphInfo=t;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",e=e.reverse());var a=r.modebar,o="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";CU.deleteRelatedStyleRule(i),CU.addRelatedStyleRule(i,o+"#"+i+" .modebar-group","background-color: "+a.bgcolor),CU.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+a.color),CU.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+a.activecolor),CU.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+a.activecolor);var s=!this.hasButtons(e),l=this.hasLogo!==n.displaylogo,c=this.locale!==n.locale;if(this.locale=n.locale,(s||l||c)&&(this.removeAllButtons(),this.updateButtons(e),n.watermark||n.displaylogo)){var u=this.getLogo();n.watermark&&(u.className=u.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(u,this.element.childNodes[0]):this.element.appendChild(u),this.hasLogo=!0}this.updateActiveButton()},LU.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach((function(t){var n=e.createGroup();t.forEach((function(t){var r=t.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");e.buttonsNames.push(r);var i=e.createButton(t);e.buttonElements.push(i),n.appendChild(i)})),e.element.appendChild(n)}))},LU.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},LU.createButton=function(t){var e=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var r=t.title;void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),(r||0===r)&&n.setAttribute("data-title",r),void 0!==t.attr&&n.setAttribute("data-attr",t.attr);var i=t.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),n.setAttribute("data-val",i)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",(function(n){t.click(e.graphInfo,n),e.updateActiveButton(n.currentTarget)})),n.setAttribute("data-toggle",t.toggle||!1),t.toggle&&FU.select(n).classed("active",!0);var a=t.icon;return"function"==typeof a?n.appendChild(a()):n.appendChild(this.createIcon(a||wU.question)),n.setAttribute("data-gravity",t.gravity||"n"),n},LU.createIcon=function(t){var e,n=QU(t.height)?Number(t.height):t.ascent-t.descent,r="http://www.w3.org/2000/svg";if(t.path){(e=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,t.width,n].join(" ")),e.setAttribute("class","icon");var i=document.createElementNS(r,"path");i.setAttribute("d",t.path),t.transform?i.setAttribute("transform",t.transform):void 0!==t.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),e.appendChild(i)}t.svg&&(e=AU.parseFromString(t.svg,"application/xml").childNodes[0]);return e.setAttribute("height","1em"),e.setAttribute("width","1em"),e},LU.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,n=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach((function(t){var r=t.getAttribute("data-val")||!0,i=t.getAttribute("data-attr"),a="true"===t.getAttribute("data-toggle"),o=FU.select(t);if(a)i===n&&o.classed("active",!o.classed("active"));else{var s=null===i?i:CU.nestedProperty(e,i).get();o.classed("active",s===r)}}))},LU.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n){if(t[n].length!==e[n].length)return!1;for(var r=0;r<t[n].length;r++)if(t[n][r].name!==e[n][r].name)return!1}return!0},LU.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plotly.com/",e.target="_blank",e.setAttribute("data-title",function(t){return t+" (v"+UU+")"}(CU._(this.graphInfo,"Produced with Plotly.js"))),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(wU.newplotlylogo)),t.appendChild(e),t},LU.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},LU.destroy=function(){CU.removeElement(this.container.querySelector(".modebar")),CU.deleteRelatedStyleRule(this._uid)};var kU=function(t,e){var n=t._fullLayout,r=new SU({graphInfo:t,container:n._modebardiv.node(),buttons:e});return n._privateplot&&FU.select(r.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),r},GU=op,_U=py,RU=hh,EU=yy.isUnifiedHover,TU=kU,MU=uU,NU=vU.DRAW_MODES,DU=yf.extendDeep;var XU={moduleType:"component",name:"modebar",layoutAttributes:yU,supplyLayoutDefaults:function(t,e){var n=t.modebar||{},r=BU.newContainer(e,"modebar");function i(t,e){return bU.coerce(n,r,IU,t,e)}i("orientation"),i("bgcolor",xU.addOpacity(e.paper_bgcolor,.5));var a=xU.contrast(xU.rgb(e.modebar.bgcolor));i("color",xU.addOpacity(a,.3)),i("activecolor",xU.addOpacity(a,.7)),i("uirevision",e.uirevision),i("add"),i("remove")},manage:function(t){var e=t._fullLayout,n=t._context,r=e._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,a=n.modeBarButtons;i=Array.isArray(a)&&a.length?function(t){for(var e=DU([],t),n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++){var a=r[i];if("string"==typeof a){if(void 0===MU[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[n][i]=MU[a]}}return e}(a):!n.displayModeBar&&n.watermark?[]:function(t){var e=t._fullLayout,n=t._fullData,r=t._context;function i(t,e){if("string"==typeof e){if(e.toLowerCase()===t.toLowerCase())return!0}else{var n=e.name,r=e._cat||e.name;if(n===t||r===t.toLowerCase())return!0}return!1}var a=e.modebar.add;"string"==typeof a&&(a=[a]);var o=e.modebar.remove;"string"==typeof o&&(o=[o]);var s=r.modeBarButtonsToAdd.concat(a.filter((function(t){for(var e=0;e<r.modeBarButtonsToRemove.length;e++)if(i(t,r.modeBarButtonsToRemove[e]))return!1;return!0}))),l=r.modeBarButtonsToRemove.concat(o.filter((function(t){for(var e=0;e<r.modeBarButtonsToAdd.length;e++)if(i(t,r.modeBarButtonsToAdd[e]))return!1;return!0}))),c=e._has("cartesian"),u=e._has("gl3d"),h=e._has("geo"),d=e._has("pie"),g=e._has("funnelarea"),f=e._has("gl2d"),p=e._has("ternary"),v=e._has("mapbox"),m=e._has("polar"),y=e._has("smith"),b=e._has("sankey"),x=function(t){for(var e=GU.list({_fullLayout:t},null,!0),n=0;n<e.length;n++)if(!e[n].fixedrange)return!1;return!0}(e),B=EU(e.hovermode),I=[];function F(t){if(t.length){for(var e=[],n=0;n<t.length;n++){for(var r=t[n],i=MU[r],a=i.name.toLowerCase(),o=(i._cat||i.name).toLowerCase(),s=!1,c=0;c<l.length;c++){var u=l[c].toLowerCase();if(u===a||u===o){s=!0;break}}s||e.push(MU[r])}I.push(e)}}var Q=["toImage"];r.showEditInChartStudio?Q.push("editInChartStudio"):r.showSendToCloud&&Q.push("sendDataToCloud");F(Q);var C=[],w=[],U=[],A=[];(c||f||d||g||p)+h+u+v+m+y>1?(w=["toggleHover"],U=["resetViews"]):h?(C=["zoomInGeo","zoomOutGeo"],w=["hoverClosestGeo"],U=["resetGeo"]):u?(w=["hoverClosest3d"],U=["resetCameraDefault3d","resetCameraLastSave3d"]):v?(C=["zoomInMapbox","zoomOutMapbox"],w=["toggleHover"],U=["resetViewMapbox"]):f?w=["hoverClosestGl2d"]:d?w=["hoverClosestPie"]:b?(w=["hoverClosestCartesian","hoverCompareCartesian"],U=["resetViewSankey"]):w=["toggleHover"];c&&(w=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(t){for(var e=0;e<t.length;e++)if(!RU.traceIs(t[e],"noHover"))return!1;return!0}(n)||B)&&(w=[]);!c&&!f||x||(C=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==U[0]&&(U=["resetScale2d"]));u?A=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||f)&&!x||p?A=["zoom2d","pan2d"]:v||h?A=["pan2d"]:m&&(A=["zoom2d"]);(function(t){for(var e=!1,n=0;n<t.length&&!e;n++){var r=t[n];r._module&&r._module.selectPoints&&(RU.traceIs(r,"scatter-like")?(_U.hasMarkers(r)||_U.hasText(r))&&(e=!0):RU.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(e=!0))}return e})(n)&&A.push("select2d","lasso2d");var S=[],L=function(t){-1===S.indexOf(t)&&-1!==w.indexOf(t)&&S.push(t)};if(Array.isArray(s)){for(var k=[],G=0;G<s.length;G++){var _=s[G];"string"==typeof _?(_=_.toLowerCase(),-1!==NU.indexOf(_)?(e._has("mapbox")||e._has("cartesian"))&&A.push(_):"togglespikelines"===_?L("toggleSpikelines"):"togglehover"===_?L("toggleHover"):"hovercompare"===_?L("hoverCompareCartesian"):"hoverclosest"===_?(L("hoverClosestCartesian"),L("hoverClosestGeo"),L("hoverClosest3d"),L("hoverClosestGl2d"),L("hoverClosestPie")):"v1hovermode"===_&&(L("toggleHover"),L("hoverClosestCartesian"),L("hoverCompareCartesian"),L("hoverClosestGeo"),L("hoverClosest3d"),L("hoverClosestGl2d"),L("hoverClosestPie"))):k.push(_)}s=k}return F(A),F(C.concat(U)),F(S),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}(I,s)}(t),r?r.update(t,i):e._modeBar=TU(t,i)}else r&&(r.destroy(),delete e._modeBar)}},ZU={},VU=nv.FROM_BL,HU=function(t,e,n){void 0===n&&(n=VU[t.constraintoward||"center"]);var r=[t.r2l(t.range[0]),t.r2l(t.range[1])],i=r[0]+(r[1]-r[0])*n;t.range=t._input.range=[t.l2r(i+(r[0]-i)*e),t.l2r(i+(r[1]-i)*e)],t.setScale()},WU=yf,YU=Ix(),zU=op.id2name,OU=Jv,JU=HU,PU=hx,jU=Sc.ALMOST_EQUAL,KU=nv.FROM_BL;function qU(t,e,n){var r=n.axIds,i=n.layoutOut,a=n.hasImage,o=i._axisConstraintGroups,s=i._axisMatchGroups,l=e._id,c=l.charAt(0),u=((i._splomAxes||{})[c]||{})[l]||{},h=e._id,d="x"===h.charAt(0);function g(n,r){return WU.coerce(t,e,OU,n,r)}e._matchGroup=null,e._constraintGroup=null,g("constrain",a?"domain":"range"),WU.coerce(t,e,{constraintoward:{valType:"enumerated",values:d?["left","center","right"]:["bottom","middle","top"],dflt:d?"center":"middle"}},"constraintoward");var f,p,v=e.type,m=[];for(f=0;f<r.length;f++){if((p=r[f])!==h)i[zU(p)].type===v&&m.push(p)}var y=tA(o,h);if(y){var b=[];for(f=0;f<m.length;f++)y[p=m[f]]||b.push(p);m=b}var x,B,I=m.length;I&&(t.matches||u.matches)&&(x=WU.coerce(t,e,{matches:{valType:"enumerated",values:m,dflt:-1!==m.indexOf(u.matches)?u.matches:void 0}},"matches"));var F=a&&!d?e.anchor:void 0;if(I&&!x&&(t.scaleanchor||F)&&(B=WU.coerce(t,e,{scaleanchor:{valType:"enumerated",values:m.concat([!1])}},"scaleanchor",F)),x){e._matchGroup=eA(s,h,x,1);var Q=i[zU(x)],C=$U(i,e)/$U(i,Q);d!==("x"===x.charAt(0))&&(C=(d?"x":"y")+C),eA(o,h,x,C)}else t.matches&&-1!==r.indexOf(t.matches)&&WU.warn("ignored "+e._name+'.matches: "'+t.matches+'" to avoid an infinite loop');if(B){var w=g("scaleratio");w||(w=e.scaleratio=1),eA(o,h,B,w)}else t.scaleanchor&&-1!==r.indexOf(t.scaleanchor)&&WU.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function $U(t,e){var n=e.domain;return n||(n=t[zU(e.overlaying)].domain),n[1]-n[0]}function tA(t,e){for(var n=0;n<t.length;n++)if(t[n][e])return t[n];return null}function eA(t,e,n,r){var i,a,o,s,l,c=tA(t,e);null===c?((c={})[e]=1,l=t.length,t.push(c)):l=t.indexOf(c);var u=Object.keys(c);for(i=0;i<t.length;i++)if(o=t[i],i!==l&&o[n]){var h=o[n];for(a=0;a<u.length;a++)o[s=u[a]]=nA(h,nA(r,c[s]));return void t.splice(l,1)}if(1!==r)for(a=0;a<u.length;a++){var d=u[a];c[d]=nA(r,c[d])}c[n]=1}function nA(t,e){var n,r,i="",a="";"string"==typeof t&&(n=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(n)),"string"==typeof e&&(r=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(r));var o=t*e;return n||r?n&&r&&i.charAt(0)!==a.charAt(0)?n===r?o:(n>r?i.substr(r):a.substr(n))+o:i+a+t*e:o}function rA(t,e){for(var n=e._size,r=n.h/n.w,i={},a=Object.keys(t),o=0;o<a.length;o++){var s=a[o],l=t[s];if("string"==typeof l){var c=l.match(/^[xy]*/)[0],u=c.length;l=+l.substr(u);for(var h="y"===c.charAt(0)?r:1/r,d=0;d<u;d++)l*=h}i[s]=l}return i}function iA(t,e){var n=t._inputDomain,r=KU[t.constraintoward],i=n[0]+(n[1]-n[0])*r;t.domain=t._input.domain=[i+(n[0]-i)/e,i+(n[1]-i)/e],t.setScale()}ZU.handleDefaults=function(t,e,n){var r,i,a,o,s,l,c,u,h=n.axIds,d=n.axHasImage,g=e._axisConstraintGroups=[],f=e._axisMatchGroups=[];for(r=0;r<h.length;r++)qU(s=t[o=zU(h[r])],l=e[o],{axIds:h,layoutOut:e,hasImage:d[o]});function p(t,n){for(r=0;r<t.length;r++)for(a in i=t[r])e[zU(a)][n]=i}for(p(f,"_matchGroup"),r=0;r<g.length;r++)for(a in i=g[r])if((l=e[zU(a)]).fixedrange){for(var v in i){var m=zU(v);!1===(t[m]||{}).fixedrange&&WU.warn("fixedrange was specified as false for axis "+m+" but was overridden because another axis in its constraint group has fixedrange true"),e[m].fixedrange=!0}break}for(r=0;r<g.length;){for(a in i=g[r]){(l=e[zU(a)])._matchGroup&&Object.keys(l._matchGroup).length===Object.keys(i).length&&(g.splice(r,1),r--);break}r++}p(g,"_constraintGroup");var y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],b=!1,x=!1;function B(){u=l[c],"rangebreaks"===c&&(x=l._hasDayOfWeekBreaks)}for(r=0;r<f.length;r++){i=f[r];for(var I=0;I<y.length;I++){var F;for(a in c=y[I],u=null,i)if(s=t[o=zU(a)],l=e[o],c in l){if(!l.matches&&(F=l,c in s)){B();break}null===u&&c in s&&B()}if("range"===c&&u&&s.range&&2===s.range.length&&null!==s.range[0]&&null!==s.range[1]&&(b=!0),"autorange"===c&&null===u&&b&&(u=!1),null===u&&c in F&&(u=F[c]),null!==u)for(a in i)(l=e[zU(a)])[c]="range"===c?u.slice():u,"rangebreaks"===c&&(l._hasDayOfWeekBreaks=x,PU(l,e))}}},ZU.enforce=function(t){var e,n,r,i,a,o,s,l,c=t._fullLayout,u=c._axisConstraintGroups||[];for(e=0;e<u.length;e++){r=rA(u[e],c);var h=Object.keys(r),d=1/0,g=0,f=1/0,p={},v={},m=!1;for(n=0;n<h.length;n++)v[i=h[n]]=a=c[zU(i)],a._inputDomain?a.domain=a._inputDomain.slice():a._inputDomain=a.domain.slice(),a._inputRange||(a._inputRange=a.range.slice()),a.setScale(),p[i]=o=Math.abs(a._m)/r[i],d=Math.min(d,o),"domain"!==a.constrain&&a._constraintShrinkable||(f=Math.min(f,o)),delete a._constraintShrinkable,g=Math.max(g,o),"domain"===a.constrain&&(m=!0);if(!(d>jU*g)||m)for(n=0;n<h.length;n++)if(o=p[i=h[n]],s=(a=v[i]).constrain,o!==f||"domain"===s)if(l=o/f,"range"===s)JU(a,l);else{var y=a._inputDomain,b=(a.domain[1]-a.domain[0])/(y[1]-y[0]),x=(a.r2l(a.range[1])-a.r2l(a.range[0]))/(a.r2l(a._inputRange[1])-a.r2l(a._inputRange[0]));if((l/=b)*x<1){a.domain=a._input.domain=y.slice(),JU(a,l);continue}if(x<1&&(a.range=a._input.range=a._inputRange.slice(),l*=x),a.autorange){var B=a.r2l(a.range[0]),I=a.r2l(a.range[1]),F=(B+I)/2,Q=F,C=F,w=Math.abs(I-F),U=F-w*l*1.0001,A=F+w*l*1.0001,S=YU.makePadFn(c,a,0),L=YU.makePadFn(c,a,1);iA(a,l);var k,G,_=Math.abs(a._m),R=YU.concatExtremes(t,a),E=R.min,T=R.max;for(G=0;G<E.length;G++)(k=E[G].val-S(E[G])/_)>U&&k<Q&&(Q=k);for(G=0;G<T.length;G++)(k=T[G].val+L(T[G])/_)<A&&k>C&&(C=k);l/=(C-Q)/(2*w),Q=a.l2r(Q),C=a.l2r(C),a.range=a._input.range=B<I?[Q,C]:[C,Q]}iA(a,l)}}},ZU.getAxisGroup=function(t,e){for(var n=t._axisMatchGroups,r=0;r<n.length;r++){if(n[r][e])return"g"+r}return e},ZU.clean=function(t,e){if(e._inputDomain){for(var n=!1,r=e._id,i=t._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][r]){n=!0;break}n&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}},function(t){var e=uo,n=hh,r=qp,i=yf,a=tv,o=dC,s=Pu,l=Qb,c=Mb,u=XU,h=iI,d=nv,g=ZU,f=g.enforce,p=g.clean,v=Ix().doAutoRange,m="start",y="middle",b="end";function x(t,e,n){for(var r=0;r<n.length;r++){var i=n[r][0],a=n[r][1];if(!(i[0]>=t[1]||i[1]<=t[0])&&(a[0]<e[1]&&a[1]>e[0]))return!0}return!1}function B(n){var a,o,c,g,f,p,v=n._fullLayout,m=v._size,y=m.p,b=h.list(n,"",!0);if(v._paperdiv.style({width:n._context.responsive&&v.autosize&&!n._context._hasZeroWidth&&!n.layout.width?"100%":v.width+"px",height:n._context.responsive&&v.autosize&&!n._context._hasZeroHeight&&!n.layout.height?"100%":v.height+"px"}).selectAll(".main-svg").call(l.setSize,v.width,v.height),n._context.setBackground(n,v.paper_bgcolor),t.drawMainTitle(n),u.manage(n),!v._has("cartesian"))return r.previousPromises(n);function B(t,e,n){var r=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===n?e._offset-y-r:e._offset+e._length+y+r:m.t+m.h*(1-(t.position||0))+r%1:e?"right"===n?e._offset+e._length+y+r:e._offset-y-r:m.l+m.w*(t.position||0)+r%1}for(a=0;a<b.length;a++){var F=(g=b[a])._anchorAxis;g._linepositions={},g._lw=l.crispRound(n,g.linewidth,1),g._mainLinePosition=B(g,F,g.side),g._mainMirrorPosition=g.mirror&&F?B(g,F,d.OPPOSITE_SIDE[g.side]):null}var C=[],w=[],U=[],A=1===s.opacity(v.paper_bgcolor)&&1===s.opacity(v.plot_bgcolor)&&v.paper_bgcolor===v.plot_bgcolor;for(o in v._plots)if((c=v._plots[o]).mainplot)c.bg&&c.bg.remove(),c.bg=void 0;else{var S=c.xaxis.domain,L=c.yaxis.domain,k=c.plotgroup;if(x(S,L,U)){var G=k.node(),_=c.bg=i.ensureSingle(k,"rect","bg");G.insertBefore(_.node(),G.childNodes[0]),w.push(o)}else k.select("rect.bg").remove(),U.push([S,L]),A||(C.push(o),w.push(o))}var R,E,T,M,N,D,X,Z,V,H,W,Y,z,O=v._bgLayer.selectAll(".bg").data(C);for(O.enter().append("rect").classed("bg",!0),O.exit().remove(),O.each((function(t){v._plots[t].bg=e.select(this)})),a=0;a<w.length;a++)c=v._plots[w[a]],f=c.xaxis,p=c.yaxis,c.bg&&void 0!==f._offset&&void 0!==p._offset&&c.bg.call(l.setRect,f._offset-y,p._offset-y,f._length+2*y,p._length+2*y).call(s.fill,v.plot_bgcolor).style("stroke-width",0);if(!v._hasOnlyLargeSploms)for(o in v._plots){c=v._plots[o],f=c.xaxis,p=c.yaxis;var J,P,j=c.clipId="clip"+v._uid+o+"plot",K=i.ensureSingleById(v._clips,"clipPath",j,(function(t){t.classed("plotclip",!0).append("rect")}));c.clipRect=K.select("rect").attr({width:f._length,height:p._length}),l.setTranslate(c.plot,f._offset,p._offset),c._hasClipOnAxisFalse?(J=null,P=j):(J=j,P=null),l.setClipUrl(c.plot,J,n),c.layerClipId=P}function q(t){return"M"+R+","+t+"H"+E}function $(t){return"M"+f._offset+","+t+"h"+f._length}function tt(t){return"M"+t+","+Z+"V"+X}function et(t){return void 0!==p._shift&&(t+=p._shift),"M"+t+","+p._offset+"v"+p._length}function nt(t,e,n){if(!t.showline||o!==t._mainSubplot)return"";if(!t._anchorAxis)return n(t._mainLinePosition);var r=e(t._mainLinePosition);return t.mirror&&(r+=e(t._mainMirrorPosition)),r}for(o in v._plots){c=v._plots[o],f=c.xaxis,p=c.yaxis;var rt="M0,0";I(f,o)&&(N=Q(f,"left",p,b),R=f._offset-(N?y+N:0),D=Q(f,"right",p,b),E=f._offset+f._length+(D?y+D:0),T=B(f,p,"bottom"),M=B(f,p,"top"),!(z=!f._anchorAxis||o!==f._mainSubplot)||"allticks"!==f.mirror&&"all"!==f.mirror||(f._linepositions[o]=[T,M]),rt=nt(f,q,$),z&&f.showline&&("all"===f.mirror||"allticks"===f.mirror)&&(rt+=q(T)+q(M)),c.xlines.style("stroke-width",f._lw+"px").call(s.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)")),c.xlines.attr("d",rt);var it="M0,0";I(p,o)&&(W=Q(p,"bottom",f,b),X=p._offset+p._length+(W?y:0),Y=Q(p,"top",f,b),Z=p._offset-(Y?y:0),V=B(p,f,"left"),H=B(p,f,"right"),!(z=!p._anchorAxis||o!==p._mainSubplot)||"allticks"!==p.mirror&&"all"!==p.mirror||(p._linepositions[o]=[V,H]),it=nt(p,tt,et),z&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(it+=tt(V)+tt(H)),c.ylines.style("stroke-width",p._lw+"px").call(s.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),c.ylines.attr("d",it)}return h.makeClipPaths(n),r.previousPromises(n)}function I(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function F(t,e,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var i=d.FROM_BL[e];return n.side===e?r.domain[i]===t.domain[i]:n.mirror&&r.domain[1-i]===t.domain[1-i]}function Q(t,e,n,r){if(F(t,e,n))return n._lw;for(var i=0;i<r.length;i++){var a=r[i];if(a._mainAxis===n._mainAxis&&F(t,e,a))return a._lw}return 0}function C(t){return"top"===t?d.CAP_SHIFT+.3+"em":"bottom"===t?"-0.3em":d.MID_SHIFT+"em"}t.layoutStyles=function(t){return i.syncOrAsync([r.doAutoMargin,B],t)},t.drawMainTitle=function(t){var n=t._fullLayout.title,o=t._fullLayout,s=function(t){var e=t.title,n=y;i.isRightAnchor(e)?n=b:i.isLeftAnchor(e)&&(n=m);return n}(o),u=function(t){var e=t.title,n="0em";i.isTopAnchor(e)?n=d.CAP_SHIFT+"em":i.isMiddleAnchor(e)&&(n=d.MID_SHIFT+"em");return n}(o),h=function(t,e){var n=t.title,r=t._size,i=0;"0em"!==e&&e?e===d.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b;return"auto"===n.y?r.t/2:"paper"===n.yref?r.t+r.h-r.h*n.y+i:t.height-t.height*n.y+i}(o,u),g=function(t,e){var n=t.title,r=t._size,i=0;e===m?i=n.pad.l:e===b&&(i=-n.pad.r);if("paper"===n.xref)return r.l+r.w*n.x+i;return t.width*n.x+i}(o,s);if(c.draw(t,"gtitle",{propContainer:o,propName:"title.text",placeholder:o._dfltTitle.plot,attributes:{x:g,y:h,"text-anchor":s,dy:u}}),n.text&&n.automargin){var f=e.selectAll(".gtitle"),p=l.bBox(f.node()).height,v=function(t,e,n){var r=e.y,i=e.yanchor,a=r>.5?"t":"b",o=t._fullLayout.margin[a],s=0;"paper"===e.yref?s=n+e.pad.t+e.pad.b:"container"===e.yref&&(s=function(t,e,n,r,i){var a=0;"middle"===n&&(a+=i/2);"t"===t?("top"===n&&(a+=i),a+=r-e*r):("bottom"===n&&(a+=i),a+=e*r);return a}(a,r,i,t._fullLayout.height,n)+e.pad.t+e.pad.b);if(s>o)return s;return 0}(t,n,p);if(v>0){!function(t,e,n,a){var o="title.automargin",s=t._fullLayout.title,l=s.y>.5?"t":"b",c={x:s.x,y:s.y,t:0,b:0},u={};"paper"===s.yref&&function(t,e,n,r,a){var o="paper"===e.yref?t._fullLayout._size.h:t._fullLayout.height,s=i.isTopAnchor(e)?r:r-a,l="b"===n?o-s:s;return!(i.isTopAnchor(e)&&"t"===n||i.isBottomAnchor(e)&&"b"===n)&&l<a}(t,s,l,e,a)?c[l]=n:"container"===s.yref&&(u[l]=n,t._fullLayout._reservedMargin[o]=u);r.allowAutoMargin(t,o),r.autoMargin(t,o,c)}(t,h,v,p),f.attr({x:g,y:h,"text-anchor":s,dy:C(n.yanchor)}).call(a.positionText,g,h);var x=(n.text.match(a.BR_TAG_ALL)||[]).length;if(x){var B=d.LINE_SPACING*x+d.MID_SHIFT;0===n.y&&(B=-B),f.selectAll(".line").each((function(){var t=+this.getAttribute("dy").slice(0,-2)-B+"em";this.setAttribute("dy",t)}))}}}},t.doTraceStyle=function(e){var i,a=e.calcdata,s=[];for(i=0;i<a.length;i++){var l=a[i],c=l[0]||{},u=c.trace||{},h=u._module||{},d=h.arraysToCalcdata;d&&d(l,u);var g=h.editStyle;g&&s.push({fn:g,cd0:c})}if(s.length){for(i=0;i<s.length;i++){var f=s[i];f.fn(e,f.cd0)}o(e),t.redrawReglTraces(e)}return r.style(e),n.getComponentMethod("legend","draw")(e),r.previousPromises(e)},t.doColorBars=function(t){return n.getComponentMethod("colorbar","draw")(t),r.previousPromises(t)},t.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,n.call("_doPlot",t,"",e)},t.doLegend=function(t){return n.getComponentMethod("legend","draw")(t),r.previousPromises(t)},t.doTicksRelayout=function(e){return h.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(n.subplotsRegistry.splom.updateGrid(e),o(e),t.redrawReglTraces(e)),t.drawMainTitle(e),r.previousPromises(e)},t.doModeBar=function(t){var e=t._fullLayout;u.manage(t);for(var n=0;n<e._basePlotModules.length;n++){var i=e._basePlotModules[n].updateFx;i&&i(t)}return r.previousPromises(t)},t.doCamera=function(t){for(var e=t._fullLayout,n=e._subplots.gl3d,r=0;r<n.length;r++){var i=e[n[r]];i._scene.setViewport(i)}},t.drawData=function(e){var i=e._fullLayout;o(e);for(var a=i._basePlotModules,s=0;s<a.length;s++)a[s].plot(e);return t.redrawReglTraces(e),r.style(e),n.getComponentMethod("selections","draw")(e),n.getComponentMethod("shapes","draw")(e),n.getComponentMethod("annotations","draw")(e),n.getComponentMethod("images","draw")(e),i._replotting=!1,r.previousPromises(e)},t.redrawReglTraces=function(t){var e=t._fullLayout;if(e._has("regl")){var n,r,a=t._fullData,o=[],s=[];for(e._hasOnlyLargeSploms&&e._splomGrid.draw(),n=0;n<a.length;n++){var l=a[n];!0===l.visible&&0!==l._length&&("splom"===l.type?e._splomScenes[l.uid].draw():"scattergl"===l.type?i.pushUnique(o,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&i.pushUnique(s,l.subplot))}for(n=0;n<o.length;n++)(r=e._plots[o[n]])._scene&&r._scene.draw();for(n=0;n<s.length;n++)(r=e[s[n]]._subplot)._scene&&r._scene.draw()}},t.doAutoRangeAndConstraints=function(t){for(var e,n=h.list(t,"",!0),r={},i=0;i<n.length;i++)if(!r[(e=n[i])._id]){r[e._id]=1,p(t,e),v(t,e);var a=e._matchGroup;if(a)for(var o in a){var s=h.getFromId(t,o);v(t,s,e.range),r[o]=1}}f(t)},t.finalDraw=function(t){n.getComponentMethod("rangeslider","draw")(t),n.getComponentMethod("rangeselector","draw")(t)},t.drawMarginPushers=function(t){n.getComponentMethod("legend","draw")(t),n.getComponentMethod("rangeselector","draw")(t),n.getComponentMethod("sliders","draw")(t),n.getComponentMethod("updatemenus","draw")(t),n.getComponentMethod("colorbar","draw")(t)}}(gC);var aA=vC.readPaths,oA=Bw,sA=cp.clearOutlineControllers,lA=Pu,cA=Qb,uA=$f.arrayEditor,hA=YC,dA=hA.getPathString,gA={draw:fA,drawOne:vA,activateLastSelection:function(t){if(!pA(t))return;var e=t._fullLayout.selections.length-1;t._fullLayout._activeSelectionIndex=e,t._fullLayout._deactivateSelection=yA,fA(t)}};function fA(t){var e=t._fullLayout;for(var n in sA(t),e._selectionLayer.selectAll("path").remove(),e._plots){var r=e._plots[n].selectionLayer;r&&r.selectAll("path").remove()}for(var i=0;i<e.selections.length;i++)vA(t,i)}function pA(t){return t._context.editSelection}function vA(t,e){t._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+e+'"]').remove();var n=hA.makeSelectionsOptionsAndPlotinfo(t,e),r=n.options,i=n.plotinfo;r._input&&function(n){var a=dA(t,r),o={"data-index":e,"fill-rule":"evenodd",d:a},s=r.opacity,l="rgba(0,0,0,0)",c=r.line.color||lA.contrast(t._fullLayout.plot_bgcolor),u=r.line.width,h=r.line.dash;u||(u=5,h="solid");var d=pA(t)&&t._fullLayout._activeSelectionIndex===e;d&&(l=t._fullLayout.activeselection.fillcolor,s=t._fullLayout.activeselection.opacity);for(var g=[],f=1;f>=0;f--){var p=n.append("path").attr(o).style("opacity",f?.1:s).call(lA.stroke,c).call(lA.fill,l).call(cA.dashLine,f?"solid":h,f?4+u:u);if(mA(p,t,r),d){var v=uA(t.layout,"selections",r);p.style({cursor:"move"});var m={element:p.node(),plotinfo:i,gd:t,editHelpers:v,isActiveSelection:!0},y=aA(a,t);oA(y,p,m)}else p.style("pointer-events",f?"all":"none");g[f]=p}var b=g[0];g[1].node().addEventListener("click",(function(){return function(t,e){if(!pA(t))return;var n=e.node(),r=+n.getAttribute("data-index");if(r>=0){if(r===t._fullLayout._activeSelectionIndex)return void yA(t);t._fullLayout._activeSelectionIndex=r,t._fullLayout._deactivateSelection=yA,fA(t)}}(t,b)}))}(t._fullLayout._selectionLayer)}function mA(t,e,n){var r=n.xref+n.yref;cA.setClipUrl(t,"clip"+e._fullLayout._uid+r,e)}function yA(t){pA(t)&&(t._fullLayout._activeSelectionIndex>=0&&(sA(t),delete t._fullLayout._activeSelectionIndex,fA(t)))}var bA=function(){var t,e=0,n=!1;function r(e,n){return t.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return r("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return r("div_seg",{seg:t,pt:e}),r("chop",{seg:t,pt:e})},statusRemove:function(t){return r("pop_seg",{seg:t})},segmentUpdate:function(t){return r("seg_update",{seg:t})},segmentNew:function(t,e){return r("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return r("rem_seg",{seg:t})},tempStatus:function(t,e,n){return r("temp_status",{seg:t,above:e,below:n})},rewind:function(t){return r("rewind",{seg:t})},status:function(t,e,n){return r("status",{seg:t,above:e,below:n})},vert:function(e){return e===n?t:(n=e,r("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),r("log",{txt:t})},reset:function(){return r("reset")},selected:function(t){return r("selected",{segs:t})},chainStart:function(t){return r("chain_start",{seg:t})},chainRemoveHead:function(t,e){return r("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return r("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return r("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return r("chain_match",{index:t})},chainClose:function(t){return r("chain_close",{index:t})},chainAddHead:function(t,e){return r("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return r("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return r("chain_con",{index1:t,index2:e})},chainReverse:function(t){return r("chain_rev",{index:t})},chainJoin:function(t,e){return r("chain_join",{index1:t,index2:e})},done:function(){return r("done")}},t};var xA=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,n,r){var i=n[0],a=n[1],o=r[0],s=r[1],l=e[0];return(o-i)*(e[1]-a)-(s-a)*(l-i)>=-t},pointBetween:function(e,n,r){var i=e[1]-n[1],a=r[0]-n[0],o=e[0]-n[0],s=r[1]-n[1],l=o*a+i*s;return!(l<t)&&!(l-(a*a+s*s)>-t)},pointsSameX:function(e,n){return Math.abs(e[0]-n[0])<t},pointsSameY:function(e,n){return Math.abs(e[1]-n[1])<t},pointsSame:function(t,n){return e.pointsSameX(t,n)&&e.pointsSameY(t,n)},pointsCompare:function(t,n){return e.pointsSameX(t,n)?e.pointsSameY(t,n)?0:t[1]<n[1]?-1:1:t[0]<n[0]?-1:1},pointsCollinear:function(e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=n[0]-r[0],s=n[1]-r[1];return Math.abs(i*s-o*a)<t},linesIntersect:function(e,n,r,i){var a=n[0]-e[0],o=n[1]-e[1],s=i[0]-r[0],l=i[1]-r[1],c=a*l-o*s;if(Math.abs(c)<t)return!1;var u=e[0]-r[0],h=e[1]-r[1],d=(s*h-l*u)/c,g=(a*h-o*u)/c,f={alongA:0,alongB:0,pt:[e[0]+d*a,e[1]+d*o]};return f.alongA=d<=-t?-2:d<t?-1:d-1<=-t?0:d-1<t?1:2,f.alongB=g<=-t?-2:g<t?-1:g-1<=-t?0:g-1<t?1:2,f},pointInsideRegion:function(e,n){for(var r=e[0],i=e[1],a=n[n.length-1][0],o=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-i>t!=o-i>t&&(a-c)*(i-u)/(o-u)+c-r>t&&(s=!s),a=c,o=u}return s}};return e},BA={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,n){for(var r=t.root,i=t.root.next;null!==i;){if(n(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);r=i,i=i.next}r.next=e,e.prev=r,e.next=null},findTransition:function(e){for(var n=t.root,r=t.root.next;null!==r&&!e(r);)n=r,r=r.next;return{before:n===t.root?null:n,after:r,insert:function(t){return t.prev=n,t.next=r,n.next=t,null!==r&&(r.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}};var IA=function(t,e,n){function r(t,e){return{id:n?n.segmentId():-1,start:t,end:e,myFill:{above:null,below:null},otherFill:null}}function i(t,e,r){return{id:n?n.segmentId():-1,start:t,end:e,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var a=BA.create();function o(t,n){a.insertBefore(t,(function(r){return function(t,n,r,i,a,o){var s=e.pointsCompare(n,a);return 0!==s?s:e.pointsSame(r,o)?0:t!==i?t?1:-1:e.pointAboveOrOnLine(r,i?a:o,i?o:a)?1:-1}(t.isStart,t.pt,n,r.isStart,r.pt,r.other.pt)<0}))}function s(t,e){var n=function(t,e){var n=BA.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return o(n,t.end),n}(t,e);return function(t,e,n){var r=BA.node({isStart:!1,pt:e.end,seg:e,primary:n,other:t,status:null});t.other=r,o(r,t.pt)}(n,t,e),n}function l(t,e){var r=i(e,t.seg.end,t.seg);return function(t,e){n&&n.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,o(t.other,t.pt)}(t,e),s(r,t.primary)}function c(r,i){var o=BA.create();function s(t){return o.findTransition((function(n){var r,i,a,o,s,l;return(r=t,i=n.ev,a=r.seg.start,o=r.seg.end,s=i.seg.start,l=i.seg.end,e.pointsCollinear(a,s,l)?e.pointsCollinear(o,s,l)||e.pointAboveOrOnLine(o,s,l)?1:-1:e.pointAboveOrOnLine(a,s,l)?1:-1)>0}))}function c(t,r){var i=t.seg,a=r.seg,o=i.start,s=i.end,c=a.start,u=a.end;n&&n.checkIntersection(i,a);var h=e.linesIntersect(o,s,c,u);if(!1===h){if(!e.pointsCollinear(o,s,c))return!1;if(e.pointsSame(o,u)||e.pointsSame(s,c))return!1;var d=e.pointsSame(o,c),g=e.pointsSame(s,u);if(d&&g)return r;var f=!d&&e.pointBetween(o,c,u),p=!g&&e.pointBetween(s,c,u);if(d)return p?l(r,s):l(t,u),r;f&&(g||(p?l(r,s):l(t,u)),l(r,o))}else 0===h.alongA&&(-1===h.alongB?l(t,c):0===h.alongB?l(t,h.pt):1===h.alongB&&l(t,u)),0===h.alongB&&(-1===h.alongA?l(r,o):0===h.alongA?l(r,h.pt):1===h.alongA&&l(r,s));return!1}for(var u=[];!a.isEmpty();){var h=a.getHead();if(n&&n.vert(h.pt[0]),h.isStart){n&&n.segmentNew(h.seg,h.primary);var d=s(h),g=d.before?d.before.ev:null,f=d.after?d.after.ev:null;function x(){if(g){var t=c(h,g);if(t)return t}return!!f&&c(h,f)}n&&n.tempStatus(h.seg,!!g&&g.seg,!!f&&f.seg);var p,v=x();if(v){var m;if(t)(m=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below)&&(v.seg.myFill.above=!v.seg.myFill.above);else v.seg.otherFill=h.seg.myFill;n&&n.segmentUpdate(v.seg),h.other.remove(),h.remove()}if(a.getHead()!==h){n&&n.rewind(h.seg);continue}if(t)m=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below,h.seg.myFill.below=f?f.seg.myFill.above:r,h.seg.myFill.above=m?!h.seg.myFill.below:h.seg.myFill.below;else if(null===h.seg.otherFill)p=f?h.primary===f.primary?f.seg.otherFill.above:f.seg.myFill.above:h.primary?i:r,h.seg.otherFill={above:p,below:p};n&&n.status(h.seg,!!g&&g.seg,!!f&&f.seg),h.other.status=d.insert(BA.node({ev:h}))}else{var y=h.status;if(null===y)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(y.prev)&&o.exists(y.next)&&c(y.prev.ev,y.next.ev),n&&n.statusRemove(y.ev.seg),y.remove(),!h.primary){var b=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=b}u.push(h.seg)}a.getHead().remove()}return n&&n.done(),u}return t?{addRegion:function(t){for(var n,i=t[t.length-1],a=0;a<t.length;a++){n=i,i=t[a];var o=e.pointsCompare(n,i);0!==o&&s(r(o<0?n:i,o<0?i:n),!0)}},calculate:function(t){return c(t,!1)}}:{calculate:function(t,e,n,r){return t.forEach((function(t){s(i(t.start,t.end,t),!0)})),n.forEach((function(t){s(i(t.start,t.end,t),!1)})),c(e,r)}}};var FA=function(t,e,n){var r=[],i=[];return t.forEach((function(t){var a=t.start,o=t.end;if(e.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<r.length;u++){var h=(v=r[u])[0];v[1];var d=v[v.length-1];if(v[v.length-2],e.pointsSame(h,a)){if(Q(u,!0,!0))break}else if(e.pointsSame(h,o)){if(Q(u,!0,!1))break}else if(e.pointsSame(d,a)){if(Q(u,!1,!0))break}else if(e.pointsSame(d,o)&&Q(u,!1,!1))break}if(c===s)return r.push([a,o]),void(n&&n.chainNew(a,o));if(c===l){n&&n.chainMatch(s.index);var g=s.index,f=s.matches_pt1?o:a,p=s.matches_head,v=r[g],m=p?v[0]:v[v.length-1],y=p?v[1]:v[v.length-2],b=p?v[v.length-1]:v[0],x=p?v[v.length-2]:v[1];return e.pointsCollinear(y,m,f)&&(p?(n&&n.chainRemoveHead(s.index,f),v.shift()):(n&&n.chainRemoveTail(s.index,f),v.pop()),m=y),e.pointsSame(b,f)?(r.splice(g,1),e.pointsCollinear(x,b,m)&&(p?(n&&n.chainRemoveTail(s.index,m),v.pop()):(n&&n.chainRemoveHead(s.index,m),v.shift())),n&&n.chainClose(s.index),void i.push(v)):void(p?(n&&n.chainAddHead(s.index,f),v.unshift(f)):(n&&n.chainAddTail(s.index,f),v.push(f)))}var B=s.index,I=l.index;n&&n.chainConnect(B,I);var F=r[B].length<r[I].length;s.matches_head?l.matches_head?F?(C(B),w(B,I)):(C(I),w(I,B)):w(I,B):l.matches_head?w(B,I):F?(C(B),w(I,B)):(C(I),w(B,I))}function Q(t,e,n){return c.index=t,c.matches_head=e,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function C(t){n&&n.chainReverse(t),r[t].reverse()}function w(t,i){var a=r[t],o=r[i],s=a[a.length-1],l=a[a.length-2],c=o[0],u=o[1];e.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(t,s),a.pop(),s=l),e.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(i,c),o.shift()),n&&n.chainJoin(t,i),r[t]=a.concat(o),r.splice(i,1)}})),i};function QA(t,e,n){var r=[];return t.forEach((function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[i]&&r.push({id:n?n.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[i],below:2===e[i]},otherFill:null})})),n&&n.selected(r),r}var CA,wA={union:function(t,e){return QA(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return QA(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return QA(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return QA(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return QA(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}},UA={toPolygon:function(t,e){function n(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function n(e){var n=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[n]})}for(var r=n(e[0]),i=1;i<e.length;i++)r=t.selectDifference(t.combine(r,n(e[i])));return r}if("Polygon"===e.type)return t.polygon(n(e.coordinates));if("MultiPolygon"===e.type){for(var r=t.segments({inverted:!1,regions:[]}),i=0;i<e.coordinates.length;i++)r=t.selectUnion(t.combine(r,n(e.coordinates[i])));return t.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,n){function r(t,n){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],n)}function i(t){return{region:t,children:[]}}n=t.polygon(t.segments(n));var a=i(null);function o(t,e){for(var n=0;n<t.children.length;n++){if(r(e,(s=t.children[n]).region))return void o(s,e)}var a=i(e);for(n=0;n<t.children.length;n++){var s;r((s=t.children[n]).region,e)&&(a.children.push(s),t.children.splice(n,1),n--)}t.children.push(a)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||o(a,l)}function c(t,e){for(var n=0,r=t[t.length-1][0],i=t[t.length-1][1],a=[],o=0;o<t.length;o++){var s=t[o][0],l=t[o][1];a.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==e&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var u=[];function h(t){var e=[c(t.region,!1)];u.push(e);for(var n=0;n<t.children.length;n++)e.push(d(t.children[n]))}function d(t){for(var e=0;e<t.children.length;e++)h(t.children[e]);return c(t.region,!0)}for(s=0;s<a.children.length;s++)h(a.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}},AA=bA,SA=IA,LA=FA,kA=wA,GA=UA,_A=!1,RA=xA();function EA(t,e,n){var r=CA.segments(t),i=CA.segments(e),a=n(CA.combine(r,i));return CA.polygon(a)}CA={buildLog:function(t){return!0===t?_A=AA():!1===t&&(_A=!1),!1!==_A&&_A.list},epsilon:function(t){return RA.epsilon(t)},segments:function(t){var e=SA(!0,RA,_A);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:SA(!1,RA,_A).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:kA.union(t.combined,_A),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:kA.intersect(t.combined,_A),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:kA.difference(t.combined,_A),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:kA.differenceRev(t.combined,_A),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:kA.xor(t.combined,_A),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:LA(t.segments,RA,_A),inverted:t.inverted}},polygonFromGeoJSON:function(t){return GA.toPolygon(CA,t)},polygonToGeoJSON:function(t){return GA.fromPolygon(CA,RA,t)},union:function(t,e){return EA(t,e,CA.selectUnion)},intersect:function(t,e){return EA(t,e,CA.selectIntersect)},difference:function(t,e){return EA(t,e,CA.selectDifference)},differenceRev:function(t,e){return EA(t,e,CA.selectDifferenceRev)},xor:function(t,e){return EA(t,e,CA.selectXor)}},"object"==typeof window&&(window.PolyBool=CA);var TA=CA,MA={exports:{}},NA=fh.dot,DA=Sc.BADNUM,XA=MA.exports={};XA.tester=function(t){var e,n=t.slice(),r=n[0][0],i=r,a=n[0][1],o=a;for(n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),e=1;e<n.length;e++)r=Math.min(r,n[e][0]),i=Math.max(i,n[e][0]),a=Math.min(a,n[e][1]),o=Math.max(o,n[e][1]);var s,l=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(l=!0,s=function(t){return t[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(l=!0,s=function(t){return t[1]===n[0][1]}));var c=!0,u=n[0];for(e=1;e<n.length;e++)if(u[0]!==n[e][0]||u[1]!==n[e][1]){c=!1;break}return{xmin:r,xmax:i,ymin:a,ymax:o,pts:n,contains:l?function(t,e){var n=t[0],l=t[1];return!(n===DA||n<r||n>i||l===DA||l<a||l>o)&&(!e||!s(t))}:function(t,e){var s=t[0],l=t[1];if(s===DA||s<r||s>i||l===DA||l<a||l>o)return!1;var c,u,h,d,g,f=n.length,p=n[0][0],v=n[0][1],m=0;for(c=1;c<f;c++)if(u=p,h=v,p=n[c][0],v=n[c][1],!(s<(d=Math.min(u,p))||s>Math.max(u,p)||l>Math.max(h,v)))if(l<Math.min(h,v))s!==d&&m++;else{if(l===(g=p===u?l:h+(s-u)*(v-h)/(p-u)))return 1!==c||!e;l<=g&&s!==d&&m++}return m%2==1},isRect:l,degenerate:c}},XA.isSegmentBent=function(t,e,n,r){var i,a,o,s=t[e],l=[t[n][0]-s[0],t[n][1]-s[1]],c=NA(l,l),u=Math.sqrt(c),h=[-l[1]/u,l[0]/u];for(i=e+1;i<n;i++)if(a=[t[i][0]-s[0],t[i][1]-s[1]],(o=NA(a,l))<0||o>c||Math.abs(NA(a,h))>r)return!0;return!1},XA.filter=function(t,e){var n=[t[0]],r=0,i=0;function a(a){t.push(a);var o=n.length,s=r;n.splice(i+1);for(var l=s+1;l<t.length;l++)(l===t.length-1||XA.isSegmentBent(t,s,l+1,e))&&(n.push(t[l]),n.length<o-2&&(r=l,i=n.length-1),s=l)}t.length>1&&a(t.pop());return{addPt:a,raw:t,filtered:n}};var ZA=MA.exports,VA=TA,HA=function(t,e,n,r){var i=t[0],a=t[1],o=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=r-n,l=0,c=s-1;l<s;c=l++){var u=e[l+n][0],h=e[l+n][1],d=e[c+n][0],g=e[c+n][1];h>a!=g>a&&i<(d-u)*(a-h)/(g-h)+u&&(o=!o)}return o},WA=hh,YA=Qb.dashStyle,zA=Pu,OA=uC,JA=yy.makeEventData,PA=hC.freeMode,jA=hC.rectMode,KA=hC.drawMode,qA=hC.openMode,$A=hC.selectMode,tS=YC,eS=zC,nS=Bw,rS=cp.clearOutline,iS=vC.handleEllipse,aS=vC.readPaths,oS=MC,sS=WC,lS=gA.activateLastSelection,cS=yf,uS=cS.sorterAsc,hS=ZA,dS=gg,gS=op.getFromId,fS=dC,pS=gC.redrawReglTraces,vS={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"},mS=vS.MINSELECT,yS=hS.filter,bS=hS.tester,xS=xC.p2r,BS=xC.axValue,IS=xC.getTransform;function FS(t){return void 0!==t.subplot}function QS(t,e,n,r,i,a,o){var s,l,c,u,h,d,g,f,p,v=e._hoverdata,m=e._fullLayout.clickmode.indexOf("event")>-1,y=[];if(function(t){return t&&Array.isArray(t)&&!0!==t[0].hoverOnBox}(v)){AS(t,e,a);var b=function(t,e){var n,r,i=t[0],a=-1,o=[];for(r=0;r<e.length;r++)if(n=e[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(v,s=kS(e,n,r,i));if(b.pointNumbers.length>0?function(t,e){var n,r,i,a=[];for(i=0;i<t.length;i++)(n=t[i]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&a.push(n);if(1===a.length&&a[0]===e.searchInfo&&(r=e.searchInfo.cd[0].trace).selectedpoints.length===e.pointNumbers.length){for(i=0;i<e.pointNumbers.length;i++)if(r.selectedpoints.indexOf(e.pointNumbers[i])<0)return!1;return!0}return!1}(s,b):function(t){var e,n,r=0;for(n=0;n<t.length;n++)if((e=t[n].cd[0].trace).selectedpoints){if(e.selectedpoints.length>1)return!1;if((r+=e.selectedpoints.length)>1)return!1}return 1===r}(s)&&(d=_S(b))){for(o&&o.remove(),p=0;p<s.length;p++)(l=s[p])._module.selectPoints(l,!1);RS(e,s),SS(a),m&&JS(e)}else{for(g=t.shiftKey&&(void 0!==d?d:_S(b)),c=function(t,e,n){return{pointNumber:t,searchInfo:e,subtract:!!n}}(b.pointNumber,b.searchInfo,g),u=US(a.selectionDefs.concat([c])),p=0;p<s.length;p++)if(h=TS(s[p]._module.selectPoints(s[p],u),s[p]),y.length)for(var x=0;x<h.length;x++)y.push(h[x]);else y=h;if(RS(e,s,f={points:y}),c&&a&&a.selectionDefs.push(c),o){var B=a.mergedPolygons,I=qA(a.dragmode);nS(MS(B,I),o,a)}m&&OS(e,f)}}}function CS(t){return"pointNumber"in t&&"searchInfo"in t}function wS(t){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,n,r,i){var a=t.searchInfo.cd[0].trace._expandedIndex;return i.cd[0].trace._expandedIndex===a&&r===t.pointNumber},isRect:!1,degenerate:!1,subtract:!!t.subtract}}function US(t){if(t.length){for(var e=[],n=CS(t[0])?0:t[0][0][0],r=n,i=CS(t[0])?0:t[0][0][1],a=i,o=0;o<t.length;o++)if(CS(t[o]))e.push(wS(t[o]));else{var s=bS(t[o]);s.subtract=!!t[o].subtract,e.push(s),n=Math.min(n,s.xmin),r=Math.max(r,s.xmax),i=Math.min(i,s.ymin),a=Math.max(a,s.ymax)}return{xmin:n,xmax:r,ymin:i,ymax:a,pts:[],contains:function(t,n,r,i){for(var a=!1,o=0;o<e.length;o++)e[o].contains(t,n,r,i)&&(a=!e[o].subtract);return a},isRect:!1,degenerate:!1}}}function AS(t,e,n){var r=e._fullLayout,i=n.plotinfo,a=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,s=(t.shiftKey||t.altKey)&&!(KA(a)&&qA(a));o&&s&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):s&&i.selection||SS(n),o||(rS(e),r._lastSelectedSubplot=i.id)}function SS(t,e){var n=t.dragmode,r=t.plotinfo,i=t.gd;(function(t){return t._fullLayout._activeShapeIndex>=0})(i)&&i._fullLayout._deactivateShape(i),function(t){return t._fullLayout._activeSelectionIndex>=0}(i)&&i._fullLayout._deactivateSelection(i);var a=i._fullLayout._zoomlayer,o=KA(n),s=$A(n);if(o||s){var l,c,u=a.selectAll(".select-outline-"+r.id);if(u&&i._fullLayout._outlining)o&&(l=oS(u,t)),l&&WA.call("_guiRelayout",i,{shapes:l}),s&&!FS(t)&&(c=sS(u,t)),c&&(i._fullLayout._noEmitSelectedAtStart=!0,WA.call("_guiRelayout",i,{selections:c}).then((function(){e&&lS(i)}))),i._fullLayout._outlining=!1}r.selection={},r.selection.selectionDefs=t.selectionDefs=[],r.selection.mergedPolygons=t.mergedPolygons=[]}function LS(t){return t._id}function kS(t,e,n,r){if(!t.calcdata)return[];var i,a,o,s=[],l=e.map(LS),c=n.map(LS);for(o=0;o<t.calcdata.length;o++)if(!0===(a=(i=t.calcdata[o])[0].trace).visible&&a._module&&a._module.selectPoints)if(!FS({subplot:r})||a.subplot!==r&&a.geo!==r)if("splom"===a.type){if(a._xaxes[l[0]]&&a._yaxes[c[0]]){var u=GS(a._module,i,e[0],n[0]);u.scene=t._fullLayout._splomScenes[a.uid],s.push(u)}}else if("sankey"===a.type){var h=GS(a._module,i,e[0],n[0]);s.push(h)}else{if(!(-1!==l.indexOf(a.xaxis)||a._xA&&a._xA.overlaying))continue;if(!(-1!==c.indexOf(a.yaxis)||a._yA&&a._yA.overlaying))continue;s.push(GS(a._module,i,gS(t,a.xaxis),gS(t,a.yaxis)))}else s.push(GS(a._module,i,e[0],n[0]));return s}function GS(t,e,n,r){return{_module:t,cd:e,xaxis:n,yaxis:r}}function _S(t){var e=t.searchInfo.cd[0].trace,n=t.pointNumber,r=t.pointNumbers,i=r.length>0?r[0]:n;return!!e.selectedpoints&&e.selectedpoints.indexOf(i)>-1}function RS(t,e,n){var r,i;for(r=0;r<e.length;r++){var a=e[r].cd[0].trace._fullInput,o=t._fullLayout._tracePreGUI[a.uid]||{};void 0===o.selectedpoints&&(o.selectedpoints=a._input.selectedpoints||null)}if(n){var s=n.points||[];for(r=0;r<e.length;r++)(i=e[r].cd[0].trace)._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(var l=0;l<s.length;l++){var c=s[l],u=c.data,h=c.fullData,d=c.pointIndex,g=c.pointIndices;g?([].push.apply(u.selectedpoints,g),i._fullInput!==i&&[].push.apply(h.selectedpoints,g)):(u.selectedpoints.push(d),i._fullInput!==i&&h.selectedpoints.push(d))}}else for(r=0;r<e.length;r++)delete(i=e[r].cd[0].trace).selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;!function(t,e){for(var n=!1,r=0;r<e.length;r++){var i=e[r],a=i.cd;WA.traceIs(a[0].trace,"regl")&&(n=!0);var o=i._module,s=o.styleOnSelect||o.style;s&&(s(t,a,a[0].node3),a[0].nodeRangePlot3&&s(t,a,a[0].nodeRangePlot3))}n&&(fS(t),pS(t))}(t,e)}function ES(t,e,n){for(var r=(n?VA.difference:VA.union)({regions:t},{regions:[e]}).regions.reverse(),i=0;i<r.length;i++){var a=r[i];a.subtract=HS(a,r.slice(0,i))}return r}function TS(t,e){if(Array.isArray(t))for(var n=e.cd,r=e.cd[0].trace,i=0;i<t.length;i++)t[i]=JA(t[i],r,n);return t}function MS(t,e){for(var n=[],r=0;r<t.length;r++){n[r]=[];for(var i=0;i<t[r].length;i++){n[r][i]=[],n[r][i][0]=i?"L":"M";for(var a=0;a<t[r][i].length;a++)n[r][i].push(t[r][i][a])}e||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}function NS(t,e){for(var n,r=[],i=0;i<e.length;i++){var a=e[i];n=TS(a._module.selectPoints(a,t),a),r=r.concat(n)}return r}function DS(t,e,n,r,i){var a,o,s,l=!!r;i&&(a=i.plotinfo,o=i.xaxes[0]._id,s=i.yaxes[0]._id);var c=[],u=[],h=VS(t),d=t._fullLayout;if(a){var g=d._zoomlayer,f=d.dragmode,p=KA(f),v=$A(f);if(p||v){var m=gS(t,o,"x"),y=gS(t,s,"y");if(m&&y){var b=g.selectAll(".select-outline-"+a.id);if(b&&t._fullLayout._outlining&&b.length){for(var x=b[0][0].getAttribute("d"),B=aS(x,t,a),I=[],F=0;F<B.length;F++){for(var Q=B[F],C=[],w=0;w<Q.length;w++)C.push([WS(m,Q[w][1]),WS(y,Q[w][2])]);C.xref=o,C.yref=s,C.subtract=HS(C,I),I.push(C)}h=h.concat(I)}}}}var U=o&&s?[o+s]:d._subplots.cartesian;!function(t){var e=t.calcdata;if(!e)return;for(var n=0;n<e.length;n++){var r=e[n][0].trace,i=t._fullLayout._splomScenes;if(i){var a=i[r.uid];a&&(a.selectBatch=[])}}}(t);for(var A={},S=0;S<U.length;S++){var L=U[S],k=L.indexOf("y"),G=L.slice(0,k),_=L.slice(k),R=o&&s?n:void 0;if(R=ZS(h,G,_,R)){var E=r;if(!l){var T=gS(t,G,"x"),M=gS(t,_,"y");E=kS(t,[T],[M],L);for(var N=0;N<E.length;N++){var D=E[N],X=D.cd[0],Z=X.trace;if("scattergl"===D._module.name&&!X.t.xpx){var V=Z.x,H=Z.y,W=Z._length;X.t.xpx=[],X.t.ypx=[];for(var Y=0;Y<W;Y++)X.t.xpx[Y]=T.c2p(V[Y]),X.t.ypx[Y]=M.c2p(H[Y])}"splom"===D._module.name&&(A[Z.uid]||(A[Z.uid]=!0))}}var z=NS(R,E);c=c.concat(z),u=u.concat(E)}}var O={points:c};RS(t,u,O);var J=d.clickmode.indexOf("event")>-1&&e;if(!a&&e){var P=VS(t,!0);if(P.length){var j=P[0].xref,K=P[0].yref;if(j&&K){var q=YS(P);zS([gS(t,j,"x"),gS(t,K,"y")])(O,q)}}t._fullLayout._noEmitSelectedAtStart?t._fullLayout._noEmitSelectedAtStart=!1:J&&OS(t,O),d._reselect=!1}if(!a&&d._deselect){var $=d._deselect;(function(t,e,n){for(var r=0;r<n.length;r++){var i=n[r];if(i.xaxis&&i.xaxis._id===t&&i.yaxis&&i.yaxis._id===e)return!0}return!1})(o=$.xref,s=$.yref,u)||XS(t,o,s,r),J&&(O.points.length?OS(t,O):JS(t)),d._deselect=!1}return{eventData:O,selectionTesters:n}}function XS(t,e,n,r){r=kS(t,[gS(t,e,"x")],[gS(t,n,"y")],e+n);for(var i=0;i<r.length;i++){var a=r[i];a._module.selectPoints(a,!1)}RS(t,r)}function ZS(t,e,n,r){for(var i,a=0;a<t.length;a++){var o=t[a];if(e===o.xref&&n===o.yref)if(i)r=US(i=ES(i,o,!!o.subtract));else i=[o],r=bS(o)}return r}function VS(t,e){for(var n=[],r=t._fullLayout,i=r.selections,a=i.length,o=0;o<a;o++)if(!e||o===r._activeSelectionIndex){var s=i[o];if(s){var l,c,u,h,d,g=s.xref,f=s.yref,p=gS(t,g,"x"),v=gS(t,f,"y");if("rect"===s.type){d=[];var m=WS(p,s.x0),y=WS(p,s.x1),b=WS(v,s.y0),x=WS(v,s.y1);d=[[m,b],[m,x],[y,x],[y,b]],l=Math.min(m,y),c=Math.max(m,y),u=Math.min(b,x),h=Math.max(b,x),d.xmin=l,d.xmax=c,d.ymin=u,d.ymax=h,d.xref=g,d.yref=f,d.subtract=!1,d.isRect=!0,n.push(d)}else if("path"===s.type)for(var B=s.path.split("Z"),I=[],F=0;F<B.length;F++){var Q=B[F];if(Q){Q+="Z";var C=tS.extractPathCoords(Q,eS.paramIsX,"raw"),w=tS.extractPathCoords(Q,eS.paramIsY,"raw");l=1/0,c=-1/0,u=1/0,h=-1/0,d=[];for(var U=0;U<C.length;U++){var A=WS(p,C[U]),S=WS(v,w[U]);d.push([A,S]),l=Math.min(A,l),c=Math.max(A,c),u=Math.min(S,u),h=Math.max(S,h)}d.xmin=l,d.xmax=c,d.ymin=u,d.ymax=h,d.xref=g,d.yref=f,d.subtract=HS(d,I),I.push(d),n.push(d)}}}}return n}function HS(t,e){for(var n=!1,r=0;r<e.length;r++)for(var i=e[r],a=0;a<t.length;a++)if(HA(t[a],i)){n=!n;break}return n}function WS(t,e){return"date"===t.type&&(e=e.replace("_"," ")),"log"===t.type?t.c2p(e):t.r2p(e,null,t.calendar)}function YS(t){for(var e=t.length,n=[],r=0;r<e;r++){var i=t[r];n=(n=n.concat(i)).concat([i[0]])}return function(t){t.isRect=5===t.length&&t[0][0]===t[4][0]&&t[0][1]===t[4][1]&&t[0][0]===t[1][0]&&t[2][0]===t[3][0]&&t[0][1]===t[3][1]&&t[1][1]===t[2][1]||t[0][1]===t[1][1]&&t[2][1]===t[3][1]&&t[0][0]===t[3][0]&&t[1][0]===t[2][0],t.isRect&&(t.xmin=Math.min(t[0][0],t[2][0]),t.xmax=Math.max(t[0][0],t[2][0]),t.ymin=Math.min(t[0][1],t[2][1]),t.ymax=Math.max(t[0][1],t[2][1]));return t}(n)}function zS(t){return function(e,n){for(var r,i,a=0;a<t.length;a++){var o=t[a],s=o._id,l=s.charAt(0);if(n.isRect){r||(r={});var c=n[l+"min"],u=n[l+"max"];void 0!==c&&void 0!==u&&(r[s]=[xS(o,c),xS(o,u)].sort(uS))}else i||(i={}),i[s]=n.map(BS(o))}r&&(e.range=r),i&&(e.lassoPoints=i)}}function OS(t,e){e&&(e.selections=(t.layout||{}).selections||[]),t.emit("plotly_selected",e)}function JS(t){t.emit("plotly_deselect",null)}var PS={reselect:DS,prepSelect:function(t,e,n,r,i){var a=!FS(r),o=PA(i),s=jA(i),l=qA(i),c=KA(i),u=$A(i),h="drawcircle"===i,d="drawline"===i||h,g=r.gd,f=g._fullLayout,p=u&&"immediate"===f.newselection.mode&&a,v=f._zoomlayer,m=r.element.getBoundingClientRect(),y=r.plotinfo,b=IS(y),x=e-m.left,B=n-m.top;f._calcInverseTransform(g);var I=cS.apply3DTransform(f._invTransform)(x,B);x=I[0],B=I[1];var F,Q,C,w,U,A,S,L=f._invScaleX,k=f._invScaleY,G=x,_=B,R="M"+x+","+B,E=r.xaxes[0],T=r.yaxes[0],M=E._length,N=T._length,D=t.altKey&&!(KA(i)&&l);AS(t,g,r),o&&(F=yS([[x,B]],vS.BENDPX));var X=v.selectAll("path.select-outline-"+y.id).data([1]),Z=c?f.newshape:f.newselection;c&&(r.hasText=Z.label.text||Z.label.texttemplate);var V=c&&!l?Z.fillcolor:"rgba(0,0,0,0)",H=Z.line.color||(a?zA.contrast(g._fullLayout.plot_bgcolor):"#7f7f7f");X.enter().append("path").attr("class","select-outline select-outline-"+y.id).style({opacity:c?Z.opacity/2:1,"stroke-dasharray":YA(Z.line.dash,Z.line.width),"stroke-width":Z.line.width+"px","shape-rendering":"crispEdges"}).call(zA.stroke,H).call(zA.fill,V).attr("fill-rule","evenodd").classed("cursor-move",!!c).attr("transform",b).attr("d",R+"Z");var W=v.append("path").attr("class","zoombox-corners").style({fill:zA.background,stroke:zA.defaultLine,"stroke-width":1}).attr("transform",b).attr("d","M0,0Z");if(c&&r.hasText){var Y=v.select(".label-temp");Y.empty()&&(Y=v.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var z=f._uid+vS.SELECTID,O=[],J=kS(g,r.xaxes,r.yaxes,r.subplot);p&&!t.shiftKey&&(r._clearSubplotSelections=function(){if(a){var t=E._id,e=T._id;XS(g,t,e,J);for(var n=(g.layout||{}).selections||[],r=[],i=!1,o=0;o<n.length;o++){var s=f.selections[o];s.xref!==t||s.yref!==e?r.push(n[o]):i=!0}i&&(g._fullLayout._noEmitSelectedAtStart=!0,WA.call("_guiRelayout",g,{selections:r}))}});var P=function(t){var e=t.plotinfo;return e.fillRangeItems||zS(t.xaxes.concat(t.yaxes))}(r);r.moveFn=function(t,e){r._clearSubplotSelections&&(r._clearSubplotSelections(),r._clearSubplotSelections=void 0),G=Math.max(0,Math.min(M,L*t+x)),_=Math.max(0,Math.min(N,k*e+B));var n=Math.abs(G-x),i=Math.abs(_-B);if(s){var a,p,v;if(u){var m=f.selectdirection;switch(a="any"===m?i<Math.min(.6*n,mS)?"h":n<Math.min(.6*i,mS)?"v":"d":m){case"h":p=h?N/2:0,v=N;break;case"v":p=h?M/2:0,v=M}}if(c)switch(f.newshape.drawdirection){case"vertical":a="h",p=h?N/2:0,v=N;break;case"horizontal":a="v",p=h?M/2:0,v=M;break;case"ortho":n<i?(a="h",p=B,v=_):(a="v",p=x,v=G);break;default:a="d"}"h"===a?((w=d?iS(h,[G,p],[G,v]):[[x,p],[x,v],[G,v],[G,p]]).xmin=d?G:Math.min(x,G),w.xmax=d?G:Math.max(x,G),w.ymin=Math.min(p,v),w.ymax=Math.max(p,v),W.attr("d","M"+w.xmin+","+(B-mS)+"h-4v"+2*mS+"h4ZM"+(w.xmax-1)+","+(B-mS)+"h4v"+2*mS+"h-4Z")):"v"===a?((w=d?iS(h,[p,_],[v,_]):[[p,B],[p,_],[v,_],[v,B]]).xmin=Math.min(p,v),w.xmax=Math.max(p,v),w.ymin=d?_:Math.min(B,_),w.ymax=d?_:Math.max(B,_),W.attr("d","M"+(x-mS)+","+w.ymin+"v-4h"+2*mS+"v4ZM"+(x-mS)+","+(w.ymax-1)+"v4h"+2*mS+"v-4Z")):"d"===a&&((w=d?iS(h,[x,B],[G,_]):[[x,B],[x,_],[G,_],[G,B]]).xmin=Math.min(x,G),w.xmax=Math.max(x,G),w.ymin=Math.min(B,_),w.ymax=Math.max(B,_),W.attr("d","M0,0Z"))}else o&&(F.addPt([G,_]),w=F.filtered);if(r.selectionDefs&&r.selectionDefs.length?(C=ES(r.mergedPolygons,w,D),w.subtract=D,Q=US(r.selectionDefs.concat([w]))):(C=[w],Q=bS(w)),nS(MS(C,l),X,r),u){var y,b=DS(g,!1),I=b.eventData?b.eventData.points.slice():[];b=DS(g,!1,Q,J,r),Q=b.selectionTesters,S=b.eventData,y=F?F.filtered:YS(C),dS.throttle(z,vS.SELECTDELAY,(function(){for(var t=(O=NS(Q,J)).slice(),e=0;e<I.length;e++){for(var n=I[e],r=!1,i=0;i<t.length;i++)if(t[i].curveNumber===n.curveNumber&&t[i].pointNumber===n.pointNumber){r=!0;break}r||t.push(n)}t.length&&(S||(S={}),S.points=t),P(S,y),function(t,e){t.emit("plotly_selecting",e)}(g,S)}))}},r.clickFn=function(t,e){if(W.remove(),g._fullLayout._activeShapeIndex>=0)g._fullLayout._deactivateShape(g);else if(!c){var n=f.clickmode;dS.done(z).then((function(){if(dS.clear(z),2===t){for(X.remove(),U=0;U<J.length;U++)(A=J[U])._module.selectPoints(A,!1);if(RS(g,J),SS(r),JS(g),J.length){var i=J[0].xaxis,a=J[0].yaxis;if(i&&a){for(var o=[],s=g._fullLayout.selections,l=0;l<s.length;l++){var c=s[l];c&&(c.xref===i._id&&c.yref===a._id||o.push(c))}o.length<s.length&&(g._fullLayout._noEmitSelectedAtStart=!0,WA.call("_guiRelayout",g,{selections:o}))}}}else n.indexOf("select")>-1&&QS(e,g,r.xaxes,r.yaxes,r.subplot,r,X),"event"===n&&OS(g,void 0);OA.click(g,e,y.id)})).catch(cS.error)}},r.doneFn=function(){W.remove(),dS.done(z).then((function(){dS.clear(z),!p&&w&&r.selectionDefs&&(w.subtract=D,r.selectionDefs.push(w),r.mergedPolygons.length=0,[].push.apply(r.mergedPolygons,C)),(p||c)&&SS(r,p),r.doneFnCompleted&&r.doneFnCompleted(O),u&&OS(g,S)})).catch(cS.error)}},clearOutline:rS,clearSelectionsCache:SS,selectOnClick:QS},jS=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],KS={axisRefDescription:function(t,e,n){return["If set to a",t,"axis id (e.g. *"+t+"* or","*"+t+"2*), the `"+t+"` position refers to a",t,"coordinate. If set to *paper*, the `"+t+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+n+"). If set to a",t,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+t+"2 domain* refers to the domain of the second",t," axis and a",t,"position of 0.5 refers to the","point between the",e,"and the",n,"of the domain of the","second",t,"axis."].join(" ")}},qS=jS,$S=mu(),tL=lp,eL=KS;function nL(t){return["In order for absolute positioning of the arrow to work, *a"+t+"ref* must be exactly the same as *"+t+"ref*, otherwise *a"+t+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+t+"ref* can be set to *pixel*,","in which case the *a"+t+"* value is specified in pixels","relative to *"+t+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function rL(t,e,n){return["Sets the",t,"component of the arrow tail about the arrow head.","If `a"+t+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",n,"to",e,"("+e,"to",n+").","If `a"+t+"ref` is not `pixel` and is exactly the same as `"+t+"ref`,","this is an absolute value on that axis,","like `"+t+"`, specified in the same coordinates as `"+t+"ref`."].join(" ")}var iL=(0,$f.templatedArray)("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:$S({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:qS.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:qS.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[rL("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[rL("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",tL.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",eL.axisRefDescription("x","left","right"),nL("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",tL.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",eL.axisRefDescription("y","bottom","top"),nL("y")].join(" ")},xref:{valType:"enumerated",values:["paper",tL.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",eL.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",tL.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",eL.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:$S({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}}),aL={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]},oL=Iv,sL=dd.texttemplateAttrs,lL=dd.hovertemplateAttrs,cL=im,uL=mu(),hL=hd.dash,dL=hd.pattern,gL=Qb,fL=aL,pL=Fu.extendFlat,vL=function(t){return{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."+(t?" If fillgradient is specified, fillcolor is ignored except for setting the background color of the hover label, if any.":"")].join(" ")}};function mL(t){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+t+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function yL(t){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+t+" axis.","When `"+t+"period` is round number of weeks,","the `"+t+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function bL(t){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+t+" axis."].join(" ")}}var xL={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:mL("x"),yperiod:mL("y"),xperiod0:yL("x0"),yperiod0:yL("y0"),xperiodalignment:bL("x"),yperiodalignment:bL("y"),xhoverformat:oL("x"),yhoverformat:oL("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant in the following cases:","1. when `scattermode` is set to *group*.","2. when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:sL({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+fL.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:lL({},{keys:fL.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:pL({},hL,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot",description:["Sets the line back off from the end point of the nth line segment (in px).","This option is useful e.g. to avoid overlap with arrowhead markers.","With *auto* the lines would trim before markers if `marker.angleref` is set to *previous*."].join(" ")},simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:vL(!0),fillgradient:pL({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc",description:["Sets the type/orientation of the color gradient for the fill.","Defaults to *none*."].join(" ")},start:{valType:"number",editType:"calc",description:["Sets the gradient start value.","It is given as the absolute position on the axis determined by","the orientiation. E.g., if orientation is *horizontal*, the","gradient will be horizontal and start from the x-position","given by start. If omitted, the gradient starts at the lowest","value of the trace along the respective axis.","Ignored if orientation is *radial*."].join(" ")},stop:{valType:"number",editType:"calc",description:["Sets the gradient end value.","It is given as the absolute position on the axis determined by","the orientiation. E.g., if orientation is *horizontal*, the","gradient will be horizontal and end at the x-position","given by end. If omitted, the gradient ends at the highest","value of the trace along the respective axis.","Ignored if orientation is *radial*."].join(" ")},colorscale:{valType:"colorscale",editType:"style",description:["Sets the fill gradient colors as a color scale.","The color scale is interpreted as a gradient","applied in the direction specified by *orientation*,","from the lowest to the highest value of the scatter","plot along that axis, or from the center to the most","distant point from it, if orientation is *radial*."].join(" ")},editType:"calc",description:["Sets a fill gradient.","If not specified, the fillcolor is used instead."].join(" ")}),fillpattern:dL,marker:pL({symbol:{valType:"enumerated",values:gL.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1,description:["Sets the marker angle in respect to `angleref`."].join(" ")},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1,description:["Sets the reference for marker angle.","With *previous*, angle 0 points along the line from the previous point to this one.","With *up*, angle 0 points toward the top of the screen."].join(" ")},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0,description:["Moves the marker away from the data point in the direction of `angle` (in px).","This can be useful for example if you have another marker at this","location and you want to point an arrowhead marker at it."].join(" ")},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:pL({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},cL("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},cL("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:uL({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."}),zorder:{valType:"integer",dflt:0,editType:"plot",description:["Sets the layer on which this trace is displayed, relative to","other SVG traces on the same subplot. SVG traces with higher `zorder`","appear in front of those with lower `zorder`."].join(" ")}},BL=iL,IL=xL.line,FL=hd.dash,QL=Fu.extendFlat,CL=KS,wL=(0,sd.overrideAll)((0,$f.templatedArray)("selection",{type:{valType:"enumerated",values:["rect","path"],description:["Specifies the selection type to be drawn.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`) and (`x0`,`y1`).","If *path*, draw a custom SVG path using `path`."].join(" ")},xref:QL({},BL.xref,{description:["Sets the selection's x coordinate axis.",CL.axisRefDescription("x","left","right")].join(" ")}),yref:QL({},BL.yref,{description:["Sets the selection's x coordinate axis.",CL.axisRefDescription("y","bottom","top")].join(" ")}),x0:{valType:"any",description:"Sets the selection's starting x position."},x1:{valType:"any",description:"Sets the selection's end x position."},y0:{valType:"any",description:"Sets the selection's starting y position."},y1:{valType:"any",description:"Sets the selection's end y position."},path:{valType:"string",editType:"arraydraw",description:["For `type` *path* - a valid SVG path similar to `shapes.path` in data coordinates.","Allowed segments are: M, L and Z."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw",description:"Sets the opacity of the selection."},line:{color:IL.color,width:QL({},IL.width,{min:1,dflt:1}),dash:QL({},FL,{dflt:"dot"})}}),"arraydraw","from-root"),UL=yf,AL=iI,SL=Sm,LL=wL,kL=YC;function GL(t,e,n){function r(n,r){return UL.coerce(t,e,LL,n,r)}var i=r("path"),a="path"!==r("type",i?"path":"rect");a&&delete e.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var o=["x","y"],s=0;s<2;s++){var l,c,u,h=o[s],d={_fullLayout:n},g=AL.coerceRef(t,e,d,h);if((l=AL.getFromId(d,g))._selectionIndices.push(e._index),u=kL.rangeToShapePosition(l),c=kL.shapePositionToRange(l),a){var f=h+"0",p=h+"1",v=t[f],m=t[p];t[f]=c(t[f],!0),t[p]=c(t[p],!0),AL.coercePosition(e,d,r,g,f),AL.coercePosition(e,d,r,g,p);var y=e[f],b=e[p];void 0!==y&&void 0!==b&&(e[f]=u(y),e[p]=u(b),t[f]=v,t[p]=m)}}a&&UL.noneOrAll(t,e,["x0","x1","y0","y1"])}var _L=hh,RL=yf,EL=op,TL=function(t){return function(e,n){var r=e[t];if(Array.isArray(r))for(var i=_L.subplotsRegistry.cartesian,a=i.idRegex,o=n._subplots,s=o.xaxis,l=o.yaxis,c=o.cartesian,u=n._has("cartesian")||n._has("gl2d"),h=0;h<r.length;h++){var d=r[h];if(RL.isPlainObject(d)){var g=EL.cleanId(d.xref,"x",!1),f=EL.cleanId(d.yref,"y",!1),p=a.x.test(g),v=a.y.test(f);if(p||v){u||RL.pushUnique(n._basePlotModules,i);var m=!1;p&&-1===s.indexOf(g)&&(s.push(g),m=!0),v&&-1===l.indexOf(f)&&(l.push(f),m=!0),m&&p&&v&&c.push(g+f)}}}}},ML=gA,NL=PS,DL={moduleType:"component",name:"selections",layoutAttributes:wL,supplyLayoutDefaults:function(t,e){SL(t,e,{name:"selections",handleItemDefaults:GL});for(var n=e.selections,r=0;r<n.length;r++){var i=n[r];i&&(void 0===i.path&&(void 0!==i.x0&&void 0!==i.x1&&void 0!==i.y0&&void 0!==i.y1||(e.selections[r]=null)))}},supplyDrawNewSelectionDefaults:function(t,e,n){n("newselection.mode"),n("newselection.line.width")&&(n("newselection.line.color"),n("newselection.line.dash")),n("activeselection.fillcolor"),n("activeselection.opacity")},includeBasePlot:TL("selections"),draw:ML.draw,drawOne:ML.drawOne,reselect:NL.reselect,prepSelect:NL.prepSelect,clearOutline:NL.clearOutline,clearSelectionsCache:NL.clearSelectionsCache,selectOnClick:NL.selectOnClick},XL=uo,ZL=yf,VL=ZL.numberFormat,HL=vu,WL=hh,YL=ZL.strTranslate,zL=tv,OL=Pu,JL=Qb,PL=uC,jL=iI,KL=LI,qL=AI,$L=hC.selectingOrDrawing,tk=hC.freeMode,ek=nv.FROM_TL,nk=dC,rk=gC.redrawReglTraces,ik=qp,ak=op.getFromId,ok=DL.prepSelect,sk=DL.clearOutline,lk=DL.selectOnClick,ck=HU,uk=lp,hk=uk.MINDRAG,dk=uk.MINZOOM,gk=!0;function fk(t,e,n,r){var i=ZL.ensureSingle(t.draglayer,e,n,(function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)}));return i.call(KL,r),i.node()}function pk(t,e,n,r,i,a,o){var s=fk(t,"rect",e,n);return XL.select(s).call(JL.setRect,r,i,a,o),s}function vk(t,e){for(var n=0;n<t.length;n++)if(!t[n].fixedrange)return e;return""}function mk(t,e,n,r,i){for(var a=0;a<t.length;a++){var o=t[a];if(!o.fixedrange)if(o.rangebreaks){var s="y"===o._id.charAt(0),l=s?1-e:e,c=s?1-n:n;r[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length)),r[o._name+".range[1]"]=o.l2r(o.p2l(c*o._length))}else{var u=o._rl[0],h=o._rl[1]-u;r[o._name+".range[0]"]=o.l2r(u+h*e),r[o._name+".range[1]"]=o.l2r(u+h*n)}}if(i&&i.length){var d=(e+(1-n))/2;mk(i,d,1-d,r,[])}}function yk(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(!r.fixedrange){if(r.rangebreaks){var i=r._length,a=(r.p2l(0+e)-r.p2l(0)+(r.p2l(i+e)-r.p2l(i)))/2;r.range=[r.l2r(r._rl[0]-a),r.l2r(r._rl[1]-a)]}else r.range=[r.l2r(r._rl[0]-e/r._m),r.l2r(r._rl[1]-e/r._m)];r.limitRange&&r.limitRange()}}}function bk(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function xk(t,e,n,r,i){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",YL(n,r)).attr("d",i+"Z")}function Bk(t,e,n){return t.append("path").attr("class","zoombox-corners").style({fill:OL.background,stroke:OL.defaultLine,"stroke-width":1,opacity:0}).attr("transform",YL(e,n)).attr("d","M0,0Z")}function Ik(t,e,n,r,i,a){t.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),Fk(t,e,i,a)}function Fk(t,e,n,r){n||(t.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function Qk(t){XL.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Ck(t){gk&&t.data&&t._context.showTips&&(ZL.notifier(ZL._(t,"Double-click to zoom back out"),"long"),gk=!1)}function wk(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,dk)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function Uk(t,e,n,r,i){for(var a,o,s,l,c=!1,u={},h={},d=(i||{}).xaHash,g=(i||{}).yaHash,f=0;f<e.length;f++){var p=e[f];for(a in n)if(p[a]){for(s in p)i&&(d[s]||g[s])||("x"===s.charAt(0)?n:r)[s]||(u[s]=a);for(o in r)i&&(d[o]||g[o])||!p[o]||(c=!0)}for(o in r)if(p[o])for(l in p)i&&(d[l]||g[l])||("x"===l.charAt(0)?n:r)[l]||(h[l]=o)}c&&(ZL.extendFlat(u,h),h={});var v={},m=[];for(s in u){var y=ak(t,s);m.push(y),v[y._id]=y}var b={},x=[];for(l in h){var B=ak(t,l);x.push(B),b[B._id]=B}return{xaHash:v,yaHash:b,xaxes:m,yaxes:x,xLinks:u,yLinks:h,isSubplotConstrained:c}}function Ak(t,e){void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel?t.onmousewheel=e:t.isAddedWheelEvent||(t.isAddedWheelEvent=!0,t.addEventListener("wheel",e,{passive:!1}))}function Sk(t){var e=[];for(var n in t)e.push(t[n]);return e}var Lk=function(t,e,n,r,i,a,o,s){var l,c,u,h,d,g,f,p,v,m,y,b,x,B,I,F,Q,C,w,U,A,S,L,k=t._fullLayout._zoomlayer,G=o+s==="nsew",_=1===(o+s).length;function R(){if(l=e.xaxis,c=e.yaxis,v=l._length,m=c._length,f=l._offset,p=c._offset,(u={})[l._id]=l,(h={})[c._id]=c,o&&s)for(var n=e.overlays,r=0;r<n.length;r++){var i=n[r].xaxis;u[i._id]=i;var a=n[r].yaxis;h[a._id]=a}d=Sk(u),g=Sk(h),x=vk(d,s),B=vk(g,o),I=!B&&!x,b=Uk(t,t._fullLayout._axisMatchGroups,u,h);var A=(y=Uk(t,t._fullLayout._axisConstraintGroups,u,h,b)).isSubplotConstrained||b.isSubplotConstrained;F=s||A,Q=o||A;var S=t._fullLayout;C=S._has("scattergl"),w=S._has("splom"),U=S._has("svg")}n+=e.yaxis._shift,R();var E=function(t,e,n){if(!t)return"pointer";if("nsew"===t)return n?"":"pan"===e?"move":"crosshair";return t.toLowerCase()+"-resize"}(B+x,t._fullLayout.dragmode,G),T=pk(e,o+s+"drag",E,n,r,i,a);if(I&&!G)return T.onmousedown=null,T.style.pointerEvents="none",T;var M,N,D,X,Z,V,H,W,Y,z,O={element:T,gd:t,plotinfo:e};function J(){O.plotinfo.selection=!1,sk(t)}function P(t,n){var r=O.gd;if(r._fullLayout._activeShapeIndex>=0)r._fullLayout._deactivateShape(r);else{var i=r._fullLayout.clickmode;if(Qk(r),2!==t||_||ot(),G)i.indexOf("select")>-1&&lk(n,r,d,g,e.id,O),i.indexOf("event")>-1&&PL.click(r,n,e.id);else if(1===t&&_){var a=o?c:l,u="s"===o||"w"===s?0:1,h=a._name+".range["+u+"]",f=function(t,e){var n,r=t.range[e],i=Math.abs(r-t.range[1-e]);return"date"===t.type?r:"log"===t.type?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,VL("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,VL("."+String(n)+"g")(r))}(a,u),p="left",v="middle";if(a.fixedrange)return;o?(v="n"===o?"top":"bottom","right"===a.side&&(p="right")):"e"===s&&(p="right"),r._context.showAxisRangeEntryBoxes&&XL.select(T).call(zL.makeEditable,{gd:r,immediate:!0,background:r._fullLayout.paper_bgcolor,text:String(f),fill:a.tickfont?a.tickfont.color:"#444",horizontalAlign:p,verticalAlign:v}).on("edit",(function(t){var e=a.d2r(t);void 0!==e&&WL.call("_guiRelayout",r,h,e)}))}}}function j(e,n){if(t._transitioningWithDuration)return!1;var r=Math.max(0,Math.min(v,S*e+M)),i=Math.max(0,Math.min(m,L*n+N)),a=Math.abs(r-M),o=Math.abs(i-N);function s(){H="",D.r=D.l,D.t=D.b,Y.attr("d","M0,0Z")}if(D.l=Math.min(M,r),D.r=Math.max(M,r),D.t=Math.min(N,i),D.b=Math.max(N,i),y.isSubplotConstrained)a>dk||o>dk?(H="xy",a/v>o/m?(o=a*m/v,N>i?D.t=N-o:D.b=N+o):(a=o*v/m,M>r?D.l=M-a:D.r=M+a),Y.attr("d",wk(D))):s();else if(b.isSubplotConstrained)if(a>dk||o>dk){H="xy";var l=Math.min(D.l/v,(m-D.b)/m),c=Math.max(D.r/v,(m-D.t)/m);D.l=l*v,D.r=c*v,D.b=(1-l)*m,D.t=(1-c)*m,Y.attr("d",wk(D))}else s();else!B||o<Math.min(Math.max(.6*a,hk),dk)?a<hk||!x?s():(D.t=0,D.b=m,H="x",Y.attr("d",function(t,e){return"M"+(t.l-.5)+","+(e-dk-.5)+"h-3v"+(2*dk+1)+"h3ZM"+(t.r+.5)+","+(e-dk-.5)+"h3v"+(2*dk+1)+"h-3Z"}(D,N))):!x||a<Math.min(.6*o,dk)?(D.l=0,D.r=v,H="y",Y.attr("d",function(t,e){return"M"+(e-dk-.5)+","+(t.t-.5)+"v-3h"+(2*dk+1)+"v3ZM"+(e-dk-.5)+","+(t.b+.5)+"v3h"+(2*dk+1)+"v-3Z"}(D,M))):(H="xy",Y.attr("d",wk(D)));D.w=D.r-D.l,D.h=D.b-D.t,H&&(z=!0),t._dragged=z,Ik(W,Y,D,Z,V,X),K(),t.emit("plotly_relayouting",A),V=!0}function K(){A={},"xy"!==H&&"x"!==H||(mk(d,D.l/v,D.r/v,A,y.xaxes),it("x",A)),"xy"!==H&&"y"!==H||(mk(g,(m-D.b)/m,(m-D.t)/m,A,y.yaxes),it("y",A))}function q(){K(),Qk(t),st(),Ck(t)}O.prepFn=function(e,n,r){var i=O.dragmode,a=t._fullLayout.dragmode;a!==i&&(O.dragmode=a),R(),S=t._fullLayout._invScaleX,L=t._fullLayout._invScaleY,I||(G?e.shiftKey?"pan"===a?a="zoom":$L(a)||(a="pan"):e.ctrlKey&&(a="pan"):a="pan"),tk(a)?O.minDrag=1:O.minDrag=void 0,$L(a)?(O.xaxes=d,O.yaxes=g,ok(e,n,r,O,a)):(O.clickFn=P,$L(i)&&J(),I||("zoom"===a?(O.moveFn=j,O.doneFn=q,O.minDrag=1,function(e,n,r){var i=T.getBoundingClientRect();M=n-i.left,N=r-i.top,t._fullLayout._calcInverseTransform(t);var a=ZL.apply3DTransform(t._fullLayout._invTransform)(M,N);M=a[0],N=a[1],D={l:M,r:M,w:0,t:N,b:N,h:0},X=t._hmpixcount?t._hmlumcount/t._hmpixcount:HL(t._fullLayout.plot_bgcolor).getLuminance(),V=!1,H="xy",z=!1,W=xk(k,X,f,p,Z="M0,0H"+v+"V"+m+"H0V0"),Y=Bk(k,f,p)}(0,n,r)):"pan"===a&&(O.moveFn=rt,O.doneFn=st))),t._fullLayout._redrag=function(){var e=t._dragdata;if(e&&e.element===T){var n=t._fullLayout.dragmode;$L(n)||(R(),lt([0,0,v,m]),O.moveFn(e.dx,e.dy))}}},qL.init(O);var $=[0,0,v,m],tt=null,et=uk.REDRAWDELAY,nt=e.mainplot?t._fullLayout._plots[e.mainplot]:e;function rt(e,n){if(e*=S,n*=L,!t._transitioningWithDuration){if(t._fullLayout._replotting=!0,"ew"===x||"ns"===B){var r=x?-e:0,i=B?-n:0;if(b.isSubplotConstrained){if(x&&B){var a=(e/v-n/m)/2;r=-(e=a*v),i=-(n=-a*m)}B?r=-i*v/m:i=-r*m/v}return x&&(yk(d,e),it("x")),B&&(yk(g,n),it("y")),lt([r,i,v,m]),at(),void t.emit("plotly_relayouting",A)}var o,s,l="w"===x==("n"===B)?1:-1;if(x&&B&&(y.isSubplotConstrained||b.isSubplotConstrained)){var c=(e/v+l*n/m)/2;e=c*v,n=l*c*m}if("w"===x?e=p(d,0,e):"e"===x?e=p(d,1,-e):x||(e=0),"n"===B?n=p(g,1,n):"s"===B?n=p(g,0,-n):B||(n=0),o="w"===x?e:0,s="n"===B?n:0,y.isSubplotConstrained&&!b.isSubplotConstrained||b.isSubplotConstrained&&x&&B&&l>0){var u;if(b.isSubplotConstrained||!x&&1===B.length){for(u=0;u<d.length;u++)d[u].range=d[u]._r.slice(),ck(d[u],1-n/m);o=(e=n*v/m)/2}if(b.isSubplotConstrained||!B&&1===x.length){for(u=0;u<g.length;u++)g[u].range=g[u]._r.slice(),ck(g[u],1-e/v);s=(n=e*m/v)/2}}b.isSubplotConstrained&&B||it("x"),b.isSubplotConstrained&&x||it("y");var h=v-e,f=m-n;!b.isSubplotConstrained||x&&B||(x?(s=o?0:e*m/v,f=h*m/v):(o=s?0:n*v/m,h=f*v/m)),lt([o,s,h,f]),at(),t.emit("plotly_relayouting",A)}function p(t,e,n){for(var r,i,a=1-e,o=0;o<t.length;o++){var s=t[o];if(!s.fixedrange){r=s,i=s._rl[a]+(s._rl[e]-s._rl[a])/bk(n/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[e]=l)}}return r._length*(r._rl[e]-i)/(r._rl[e]-r._rl[a])}}function it(t,e){for(var n=b.isSubplotConstrained?{x:g,y:d}[t]:b[t+"axes"],r=b.isSubplotConstrained?{x:d,y:g}[t]:[],i=0;i<n.length;i++){var a=n[i],o=a._id,s=b.xLinks[o]||b.yLinks[o],l=r[0]||u[s]||h[s];l&&(e?(e[a._name+".range[0]"]=e[l._name+".range[0]"],e[a._name+".range[1]"]=e[l._name+".range[1]"]):a.range=l.range.slice())}}function at(){var n,r=[];function i(t){for(n=0;n<t.length;n++)t[n].fixedrange||r.push(t[n]._id)}function a(t,e){for(n=0;n<t.length;n++){var i=t[n],a=i[e];i.fixedrange||"sync"!==a.tickmode||r.push(a._id)}}for(F&&(i(d),i(y.xaxes),i(b.xaxes),a(e.overlays,"xaxis")),Q&&(i(g),i(y.yaxes),i(b.yaxes),a(e.overlays,"yaxis")),A={},n=0;n<r.length;n++){var o=r[n],s=ak(t,o);jL.drawOne(t,s,{skipTitle:!0}),A[s._name+".range[0]"]=s.range[0],A[s._name+".range[1]"]=s.range[1]}jL.redrawComponents(t,r)}function ot(){if(!t._transitioningWithDuration){var e=t._context.doubleClick,n=[];x&&(n=n.concat(d)),B&&(n=n.concat(g)),b.xaxes&&(n=n.concat(b.xaxes)),b.yaxes&&(n=n.concat(b.yaxes));var r,i,a={};if("reset+autosize"===e)for(e="autosize",i=0;i<n.length;i++){var o=(r=n[i])._rangeInitial0,s=r._rangeInitial1,l=void 0!==o||void 0!==s;if(l&&(void 0!==o&&o!==r.range[0]||void 0!==s&&s!==r.range[1])||!l&&!0!==r.autorange){e="reset";break}}if("autosize"===e)for(i=0;i<n.length;i++)(r=n[i]).fixedrange||(a[r._name+".autorange"]=!0);else if("reset"===e)for((x||y.isSubplotConstrained)&&(n=n.concat(y.xaxes)),B&&!y.isSubplotConstrained&&(n=n.concat(y.yaxes)),y.isSubplotConstrained&&(x?B||(n=n.concat(g)):n=n.concat(d)),i=0;i<n.length;i++)if(!(r=n[i]).fixedrange){var c=r._name,u=r._autorangeInitial;void 0===r._rangeInitial0&&void 0===r._rangeInitial1?a[c+".autorange"]=!0:void 0===r._rangeInitial0?(a[c+".autorange"]=u,a[c+".range"]=[null,r._rangeInitial1]):void 0===r._rangeInitial1?(a[c+".range"]=[r._rangeInitial0,null],a[c+".autorange"]=u):a[c+".range"]=[r._rangeInitial0,r._rangeInitial1]}t.emit("plotly_doubleclick",null),WL.call("_guiRelayout",t,a)}}function st(){lt([0,0,v,m]),ZL.syncOrAsync([ik.previousPromises,function(){t._fullLayout._replotting=!1,WL.call("_guiRelayout",t,A)}],t)}function lt(e){var n,r,i,a,d=t._fullLayout,g=d._plots,f=d._subplots.cartesian;if(w&&WL.subplotsRegistry.splom.drag(t),C)for(n=0;n<f.length;n++)if(i=(r=g[f[n]]).xaxis,a=r.yaxis,r._scene){var p=ZL.simpleMap(i.range,i.r2l),v=ZL.simpleMap(a.range,a.r2l);i.limitRange&&i.limitRange(),a.limitRange&&a.limitRange(),p=i.range,v=a.range,r._scene.update({range:[p[0],v[0],p[1],v[1]]})}if((w||C)&&(nk(t),rk(t)),U){var m=e[2]/l._length,y=e[3]/c._length;for(n=0;n<f.length;n++){i=(r=g[f[n]]).xaxis,a=r.yaxis;var I,A,S,L,k=(F||b.isSubplotConstrained)&&!i.fixedrange&&u[i._id],G=(Q||b.isSubplotConstrained)&&!a.fixedrange&&h[a._id];if(k?(I=m,S=s||b.isSubplotConstrained?e[0]:ht(i,I)):b.xaHash[i._id]?(I=m,S=e[0]*i._length/l._length):b.yaHash[i._id]?(I=y,S="ns"===B?-e[1]*i._length/c._length:ht(i,I,{n:"top",s:"bottom"}[B])):S=ut(i,I=ct(i,m,y)),I>1&&(void 0!==i.maxallowed&&F===(i.range[0]<i.range[1]?"e":"w")||void 0!==i.minallowed&&F===(i.range[0]<i.range[1]?"w":"e"))&&(I=1,S=0),G?(A=y,L=o||b.isSubplotConstrained?e[1]:ht(a,A)):b.yaHash[a._id]?(A=y,L=e[1]*a._length/c._length):b.xaHash[a._id]?(A=m,L="ew"===x?-e[0]*a._length/l._length:ht(a,A,{e:"right",w:"left"}[x])):L=ut(a,A=ct(a,m,y)),A>1&&(void 0!==a.maxallowed&&Q===(a.range[0]<a.range[1]?"n":"s")||void 0!==a.minallowed&&Q===(a.range[0]<a.range[1]?"s":"n"))&&(A=1,L=0),I||A){I||(I=1),A||(A=1);var _=i._offset-S/I,R=a._offset-L/A;r.clipRect.call(JL.setTranslate,S,L).call(JL.setScale,I,A),r.plot.call(JL.setTranslate,_,R).call(JL.setScale,1/I,1/A),I===r.xScaleFactor&&A===r.yScaleFactor||(JL.setPointGroupScale(r.zoomScalePts,I,A),JL.setTextPointsScale(r.zoomScaleTxt,I,A)),JL.hideOutsideRangePoints(r.clipOnAxisFalseTraces,r),r.xScaleFactor=I,r.yScaleFactor=A}}}}function ct(t,e,n){return t.fixedrange?0:F&&y.xaHash[t._id]?e:Q&&(y.isSubplotConstrained?y.xaHash:y.yaHash)[t._id]?n:0}function ut(t,e){return e?(t.range=t._r.slice(),ck(t,e),ht(t,e)):0}function ht(t,e,n){return t._length*(1-e)*ek[n||t.constraintoward||"middle"]}return o.length*s.length!=1&&Ak(T,(function(e){if(t._context._scrollZoom.cartesian||t._fullLayout._enablescrollzoom){if(J(),t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();R(),clearTimeout(tt);var n=-e.deltaY;if(isFinite(n)||(n=e.wheelDelta/10),isFinite(n)){var r,i=Math.exp(-Math.min(Math.max(n,-20),20)/200),a=nt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(e.clientX-a.left)/a.width,c=(a.bottom-e.clientY)/a.height;if(F){for(s||(l=.5),r=0;r<d.length;r++)u(d[r],l,i);it("x"),$[2]*=i,$[0]+=$[2]*l*(1/i-1)}if(Q){for(o||(c=.5),r=0;r<g.length;r++)u(g[r],c,i);it("y"),$[3]*=i,$[1]+=$[3]*(1-c)*(1/i-1)}lt($),at(),t.emit("plotly_relayouting",A),tt=setTimeout((function(){t._fullLayout&&($=[0,0,v,m],st())}),et),e.preventDefault()}else ZL.log("Did not find wheel motion attributes: ",e)}function u(t,e,n){if(!t.fixedrange){var r=ZL.simpleMap(t.range,t.r2l),i=r[0]+(r[1]-r[0])*e;t.range=r.map((function(e){return t.l2r(i+(e-i)*n)}))}}})),T};!function(t){var e=uo,n=uC,r=AI,i=LI,a=Lk,o=lp.DRAGGERSIZE;t.initInteractions=function(i){var s=i._fullLayout;if(i._context.staticPlot)e.select(i).selectAll(".drag").remove();else if(s._has("cartesian")||s._has("splom")){var l=Object.keys(s._plots||{}).sort((function(t,e){if((s._plots[t].mainplot&&!0)===(s._plots[e].mainplot&&!0)){var n=t.split("y"),r=e.split("y");return n[0]===r[0]?Number(n[1]||1)-Number(r[1]||1):Number(n[0]||1)-Number(r[0]||1)}return s._plots[t].mainplot?1:-1}));l.forEach((function(t){var e=s._plots[t],l=e.xaxis,c=e.yaxis;if(!e.mainplot){var u=a(i,e,l._offset,c._offset,l._length,c._length,"ns","ew");u.onmousemove=function(e){i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===t&&i._fullLayout._plots[t]&&n.hover(i,e,t)},n.hover(i,e,t),i._fullLayout._lasthover=u,i._fullLayout._hoversubplot=t},u.onmouseout=function(t){i._dragging||(i._fullLayout._hoversubplot=null,r.unhover(i,t))},i._context.showAxisDragHandles&&(a(i,e,l._offset-o,c._offset-o,o,o,"n","w"),a(i,e,l._offset+l._length,c._offset-o,o,o,"n","e"),a(i,e,l._offset-o,c._offset+c._length,o,o,"s","w"),a(i,e,l._offset+l._length,c._offset+c._length,o,o,"s","e"))}if(i._context.showAxisDragHandles){if(t===l._mainSubplot){var h=l._mainLinePosition;"top"===l.side&&(h-=o),a(i,e,l._offset+.1*l._length,h,.8*l._length,o,"","ew"),a(i,e,l._offset,h,.1*l._length,o,"","w"),a(i,e,l._offset+.9*l._length,h,.1*l._length,o,"","e")}if(t===c._mainSubplot){var d=c._mainLinePosition;"right"!==c.side&&(d-=o),a(i,e,d,c._offset+.1*c._length,o,.8*c._length,"ns",""),a(i,e,d,c._offset+.9*c._length,o,.1*c._length,"s",""),a(i,e,d,c._offset,o,.1*c._length,"n","")}}}));var c=s._hoverlayer.node();c.onmousemove=function(t){t.target=i._fullLayout._lasthover,n.hover(i,t,s._hoversubplot)},c.onclick=function(t){t.target=i._fullLayout._lasthover,n.click(i,t)},c.onmousedown=function(t){i._fullLayout._lasthover.onmousedown(t)},t.updateFx(i)}},t.updateFx=function(t){var e=t._fullLayout,n="pan"===e.dragmode?"move":"crosshair";i(e._draggers,n)}}(sI);var kk={},Gk=hh,_k=Tc,Rk=dh,Ek=uh,Tk=zd.sorterAsc,Mk=hh;kk.containerArrayMatch=function(t){for(var e,n,r=Gk.layoutArrayContainers,i=Gk.layoutArrayRegexes,a=t.split("[")[0],o=0;o<i.length;o++)if((n=t.match(i[o]))&&0===n.index){e=n[0];break}if(e||(e=r[r.indexOf(a)]),!e)return!1;var s=t.substr(e.length);return s?!!(n=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(n[1]),property:n[3]||""}:{array:e,index:"",property:""}};var Nk=kk.isAddVal=function(t){return"add"===t||_k(t)},Dk=kk.isRemoveVal=function(t){return null===t||"remove"===t};kk.applyContainerArrayChanges=function(t,e,n,r,i){var a=e.astr,o=Mk.getComponentMethod(a,"supplyLayoutDefaults"),s=Mk.getComponentMethod(a,"draw"),l=Mk.getComponentMethod(a,"drawOne"),c=r.replot||r.recalc||o===Rk||s===Rk,u=t.layout,h=t._fullLayout;if(n[""]){Object.keys(n).length>1&&Ek.warn("Full array edits are incompatible with other edits",a);var d=n[""][""];if(Dk(d))e.set(null);else{if(!Array.isArray(d))return Ek.warn("Unrecognized full array edit value",a,d),!0;e.set(d)}return!c&&(o(u,h),s(t),!0)}var g,f,p,v,m,y,b,x,B=Object.keys(n).map(Number).sort(Tk),I=e.get(),F=I||[],Q=i(h,a).get(),C=[],w=-1,U=F.length;for(g=0;g<B.length;g++)if(v=n[p=B[g]],m=Object.keys(v),y=v[""],b=Nk(y),p<0||p>F.length-(b?0:1))Ek.warn("index out of range",a,p);else if(void 0!==y)m.length>1&&Ek.warn("Insertion & removal are incompatible with edits to the same index.",a,p),Dk(y)?C.push(p):b?("add"===y&&(y={}),F.splice(p,0,y),Q&&Q.splice(p,0,{})):Ek.warn("Unrecognized full object edit value",a,p,y),-1===w&&(w=p);else for(f=0;f<m.length;f++)x=a+"["+p+"].",i(F[p],m[f],x).set(v[m[f]]);for(g=C.length-1;g>=0;g--)F.splice(C[g],1),Q&&Q.splice(C[g],1);if(F.length?I||e.set(F):e.set(null),c)return!1;if(o(u,h),l!==Rk){var A;if(-1===w)A=B;else{for(U=Math.max(F.length,U),A=[],g=0;g<B.length&&!((p=B[g])>=w);g++)A.push(p);for(g=w;g<U;g++)A.push(g)}for(g=0;g<A.length;g++)l(t,A[g])}else s(t);return!0};var Xk={};!function(t){var e=Ac,n=Th,r=hh,i=yf,a=qp,o=op,s=Pu,l=o.cleanId,c=o.getFromTrace,u=r.traceIs;function h(t,e){var n=t[e],r=e.charAt(0);n&&"paper"!==n&&(t[e]=l(n,r,!0))}function d(t){function e(e,n){var r=t[e],i=t.title&&t.title[n];r&&!i&&(t.title||(t.title={}),t.title[n]=t[e],delete t[e])}t&&("string"!=typeof t.title&&"number"!=typeof t.title||(t.title={text:t.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function g(t){if(!i.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function f(t,e,n,r){if(n&&!r)return t;if(r&&!n)return e;if(!t.trim())return e;if(!e.trim())return t;var i,a=Math.min(t.length,e.length);for(i=0;i<a&&t.charAt(i)===e.charAt(i);i++);return t.substr(0,i).trim()}function p(t){var e="middle",n="center";return"string"==typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?n="left":-1!==t.indexOf("right")&&(n="right")),e+" "+n}function v(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}t.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&i.log("Clearing previous rejected promises from queue."),t._promises=[]},t.cleanLayout=function(e){var r,o;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var c=(a.subplotsRegistry.cartesian||{}).attrRegex,u=(a.subplotsRegistry.polar||{}).attrRegex,g=(a.subplotsRegistry.ternary||{}).attrRegex,f=(a.subplotsRegistry.gl3d||{}).attrRegex,p=Object.keys(e);for(r=0;r<p.length;r++){var m=p[r];if(c&&c.test(m)){var y=e[m];y.anchor&&"free"!==y.anchor&&(y.anchor=l(y.anchor)),y.overlaying&&(y.overlaying=l(y.overlaying)),y.type||(y.isdate?y.type="date":y.islog?y.type="log":!1===y.isdate&&!1===y.islog&&(y.type="linear")),"withzero"!==y.autorange&&"tozero"!==y.autorange||(y.autorange=!0,y.rangemode="tozero"),y.insiderange&&delete y.range,delete y.islog,delete y.isdate,delete y.categories,v(y,"domain")&&delete y.domain,void 0!==y.autotick&&(void 0===y.tickmode&&(y.tickmode=y.autotick?"auto":"linear"),delete y.autotick),d(y)}else if(u&&u.test(m)){d(e[m].radialaxis)}else if(g&&g.test(m)){var b=e[m];d(b.aaxis),d(b.baxis),d(b.caxis)}else if(f&&f.test(m)){var x=e[m],B=x.cameraposition;if(Array.isArray(B)&&4===B[0].length){var I=B[0],F=B[1],Q=B[2],C=n([],I),w=[];for(o=0;o<3;++o)w[o]=F[o]+Q*C[2+4*o];x.camera={eye:{x:w[0],y:w[1],z:w[2]},center:{x:F[0],y:F[1],z:F[2]},up:{x:0,y:0,z:1}},delete x.cameraposition}d(x.xaxis),d(x.yaxis),d(x.zaxis)}}var U=Array.isArray(e.annotations)?e.annotations.length:0;for(r=0;r<U;r++){var A=e.annotations[r];i.isPlainObject(A)&&(A.ref&&("paper"===A.ref?(A.xref="paper",A.yref="paper"):"data"===A.ref&&(A.xref="x",A.yref="y"),delete A.ref),h(A,"xref"),h(A,"yref"))}var S=Array.isArray(e.shapes)?e.shapes.length:0;for(r=0;r<S;r++){var L=e.shapes[r];i.isPlainObject(L)&&(h(L,"xref"),h(L,"yref"))}var k=Array.isArray(e.images)?e.images.length:0;for(r=0;r<k;r++){var G=e.images[r];i.isPlainObject(G)&&(h(G,"xref"),h(G,"yref"))}var _=e.legend;return _&&(_.x>3?(_.x=1.02,_.xanchor="left"):_.x<-2&&(_.x=-.02,_.xanchor="right"),_.y>3?(_.y=1.02,_.yanchor="bottom"):_.y<-2&&(_.y=-.02,_.yanchor="top")),d(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),s.clean(e),e.template&&e.template.layout&&t.cleanLayout(e.template.layout),e},t.cleanData=function(e){for(var n=0;n<e.length;n++){var o,c=e[n];if("histogramy"===c.type&&"xbins"in c&&!("ybins"in c)&&(c.ybins=c.xbins,delete c.xbins),c.error_y&&"opacity"in c.error_y){var h=s.defaults,m=c.error_y.color||(u(c,"bar")?s.defaultLine:h[n%h.length]);c.error_y.color=s.addOpacity(s.rgb(m),s.opacity(m)*c.error_y.opacity),delete c.error_y.opacity}if("bardir"in c&&("h"!==c.bardir||!u(c,"bar")&&"histogram"!==c.type.substr(0,9)||(c.orientation="h",t.swapXYData(c)),delete c.bardir),"histogramy"===c.type&&t.swapXYData(c),"histogramx"!==c.type&&"histogramy"!==c.type||(c.type="histogram"),"scl"in c&&!("colorscale"in c)&&(c.colorscale=c.scl,delete c.scl),"reversescl"in c&&!("reversescale"in c)&&(c.reversescale=c.reversescl,delete c.reversescl),c.xaxis&&(c.xaxis=l(c.xaxis,"x")),c.yaxis&&(c.yaxis=l(c.yaxis,"y")),u(c,"gl3d")&&c.scene&&(c.scene=a.subplotsRegistry.gl3d.cleanId(c.scene)),!u(c,"pie-like")&&!u(c,"bar-like"))if(Array.isArray(c.textposition))for(o=0;o<c.textposition.length;o++)c.textposition[o]=p(c.textposition[o]);else c.textposition&&(c.textposition=p(c.textposition));var y=r.getModule(c);if(y&&y.colorbar){var b=y.colorbar.container,x=b?c[b]:c;x&&x.colorscale&&("YIGnBu"===x.colorscale&&(x.colorscale="YlGnBu"),"YIOrRd"===x.colorscale&&(x.colorscale="YlOrRd"))}if("surface"===c.type&&i.isPlainObject(c.contours)){var B=["x","y","z"];for(o=0;o<B.length;o++){var I=c.contours[B[o]];i.isPlainObject(I)&&(I.highlightColor&&(I.highlightcolor=I.highlightColor,delete I.highlightColor),I.highlightWidth&&(I.highlightwidth=I.highlightWidth,delete I.highlightWidth))}}if("candlestick"===c.type||"ohlc"===c.type){var F=!1!==(c.increasing||{}).showlegend,Q=!1!==(c.decreasing||{}).showlegend,C=g(c.increasing),w=g(c.decreasing);if(!1!==C&&!1!==w){var U=f(C,w,F,Q);U&&(c.name=U)}else!C&&!w||c.name||(c.name=C||w)}if(Array.isArray(c.transforms)){var A=c.transforms;for(o=0;o<A.length;o++){var S=A[o];if(i.isPlainObject(S))switch(S.type){case"filter":S.filtersrc&&(S.target=S.filtersrc,delete S.filtersrc),S.calendar&&(S.valuecalendar||(S.valuecalendar=S.calendar),delete S.calendar);break;case"groupby":if(S.styles=S.styles||S.style,S.styles&&!Array.isArray(S.styles)){var L=S.styles,k=Object.keys(L);S.styles=[];for(var G=0;G<k.length;G++)S.styles.push({target:k[G],value:L[k[G]]})}}}}v(c,"line")&&delete c.line,"marker"in c&&(v(c.marker,"line")&&delete c.marker.line,v(c,"marker")&&delete c.marker),s.clean(c),c.autobinx&&(delete c.autobinx,delete c.xbins),c.autobiny&&(delete c.autobiny,delete c.ybins),d(c),c.colorbar&&d(c.colorbar),c.marker&&c.marker.colorbar&&d(c.marker.colorbar),c.line&&c.line.colorbar&&d(c.line.colorbar),c.aaxis&&d(c.aaxis),c.baxis&&d(c.baxis)}},t.swapXYData=function(t){var e;if(i.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var n=t.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);i.swapAttrs(t,["error_?.copy_ystyle"]),r&&i.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var a=t.hoverinfo.split("+");for(e=0;e<a.length;e++)"x"===a[e]?a[e]="y":"y"===a[e]&&(a[e]="x");t.hoverinfo=a.join("+")}},t.coerceTraceIndices=function(t,n){if(e(n))return[n];if(!Array.isArray(n)||!n.length)return t.data.map((function(t,e){return e}));if(Array.isArray(n)){for(var r=[],a=0;a<n.length;a++)i.isIndex(n[a],t.data.length)?r.push(n[a]):i.warn("trace index (",n[a],") is not a number or is out of bounds");return r}return n},t.manageArrayContainers=function(t,n,r){var a=t.obj,o=t.parts,s=o.length,l=o[s-1],c=e(l);if(c&&null===n){var u=o.slice(0,s-1).join(".");i.nestedProperty(a,u).get().splice(l,1)}else c&&void 0===t.get()?(void 0===t.get()&&(r[t.astr]=null),t.set(n)):t.set(n)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function y(t){var e=t.search(m);if(e>0)return t.substr(0,e)}t.hasParent=function(t,e){for(var n=y(e);n;){if(n in t)return!0;n=y(n)}return!1};var b=["x","y","z"];t.clearAxisTypes=function(t,e,n){for(var r=0;r<e.length;r++)for(var a=t._fullData[r],o=0;o<3;o++){var s=c(t,a,b[o]);if(s&&"log"!==s.type){var l=s._name,u=s._id.substr(1);if("scene"===u.substr(0,5)){if(void 0!==n[u])continue;l=u+"."+l}var h=l+".type";void 0===n[l]&&void 0===n[h]&&i.nestedProperty(t.layout,h).set(null)}}}}(Xk),function(t){var e=uo,n=Ac,r=wf,i=yf,a=i.nestedProperty,o=Yf,s=Pf,l=hh,c=jf,u=qp,h=iI,d=oI,g=Jv,f=Qb,p=Pu,v=sI.initInteractions,m=ev,y=DL.clearOutline,b=nh.dfltConfig,x=kk,B=Xk,I=gC,F=sd,Q=lp.AX_NAME_PATTERN,C=0;function w(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function U(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){i.error(t)}}function A(t,e){U(t,p.combine(e,"white"))}function S(t,n){if(!t._context){t._context=i.extendDeep({},b);var a=e.select("base");t._context._baseUrl=a.size()&&a.attr("href")?window.location.href.split("#")[0]:""}var o,s,l,c=t._context;if(n){for(s=Object.keys(n),o=0;o<s.length;o++)"editable"!==(l=s[o])&&"edits"!==l&&l in c&&("setBackground"===l&&"opaque"===n[l]?c[l]=A:c[l]=n[l]);n.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio);var u=n.editable;if(void 0!==u)for(c.editable=u,s=Object.keys(c.edits),o=0;o<s.length;o++)c.edits[s[o]]=u;if(n.edits)for(s=Object.keys(n.edits),o=0;o<s.length;o++)(l=s[o])in c.edits&&(c.edits[l]=n.edits[l]);c._exportedPlot=n._exportedPlot}c.staticPlot&&(c.editable=!1,c.edits={},c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1),"hover"!==c.displayModeBar||r||(c.displayModeBar=!0),"transparent"!==c.setBackground&&"function"==typeof c.setBackground||(c.setBackground=U),c._hasZeroHeight=c._hasZeroHeight||0===t.clientHeight,c._hasZeroWidth=c._hasZeroWidth||0===t.clientWidth;var h=c.scrollZoom,d=c._scrollZoom={};if(!0===h)d.cartesian=1,d.gl3d=1,d.geo=1,d.mapbox=1;else if("string"==typeof h){var g=h.split("+");for(o=0;o<g.length;o++)d[g[o]]=1}else!1!==h&&(d.gl3d=1,d.geo=1,d.mapbox=1)}function L(t,e){var n,r,i=e+1,a=[];for(n=0;n<t.length;n++)(r=t[n])<0?a.push(i+r):a.push(r);return a}function k(t,e,n){var r,i;for(r=0;r<e.length;r++){if((i=e[r])!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=t.data.length||i<-t.data.length)throw new Error(n+" must be valid indices for gd.data.");if(e.indexOf(i,r+1)>-1||i>=0&&e.indexOf(-t.data.length+i)>-1||i<0&&e.indexOf(t.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function G(t,e,n){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),k(t,e,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&k(t,n,"newIndices"),void 0!==n&&e.length!==n.length)throw new Error("current and new indices must be of equal length.")}function _(t,e,r,o,s){!function(t,e,n,r){var a=i.isPlainObject(r);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!i.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var o in k(t,n,"indices"),e){if(!Array.isArray(e[o])||e[o].length!==n.length)throw new Error("attribute "+o+" must be an array of length equal to indices array length");if(a&&(!(o in r)||!Array.isArray(r[o])||r[o].length!==e[o].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,r,o);for(var l=function(t,e,r,o){var s,l,c,u,h,d=i.isPlainObject(o),g=[];for(var f in Array.isArray(r)||(r=[r]),r=L(r,t.data.length-1),e)for(var p=0;p<r.length;p++){if(s=t.data[r[p]],l=(c=a(s,f)).get(),u=e[f][p],!i.isArrayOrTypedArray(u))throw new Error("attribute: "+f+" index: "+p+" must be an array");if(!i.isArrayOrTypedArray(l))throw new Error("cannot extend missing or non-array attribute: "+f);if(l.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+f);h=d?o[f][p]:o,n(h)||(h=-1),g.push({prop:c,target:l,insert:u,maxp:Math.floor(h)})}return g}(t,e,r,o),c={},u={},h=0;h<l.length;h++){var d=l[h].prop,g=l[h].maxp,f=s(l[h].target,l[h].insert,g);d.set(f[0]),Array.isArray(c[d.astr])||(c[d.astr]=[]),c[d.astr].push(f[1]),Array.isArray(u[d.astr])||(u[d.astr]=[]),u[d.astr].push(l[h].target.length)}return{update:c,maxPoints:u}}function R(t,e){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}function E(e,n,r,a){e=i.getGraphDiv(e),B.clearPromiseQueue(e);var o={};if("string"==typeof n)o[n]=r;else{if(!i.isPlainObject(n))return i.warn("Restyle fail.",n,r,a),Promise.reject();o=i.extendFlat({},n),void 0===a&&(a=r)}Object.keys(o).length&&(e.changed=!0);var l=B.coerceTraceIndices(e,a),c=D(e,o,l),h=c.flags;h.calc&&(e.calcdata=void 0),h.clearAxisTypes&&B.clearAxisTypes(e,l,{});var d=[];h.fullReplot?d.push(t._doPlot):(d.push(u.previousPromises),u.supplyDefaults(e),h.markerSize&&(u.doCalcdata(e),H(d)),h.style&&d.push(I.doTraceStyle),h.colorbars&&d.push(I.doColorBars),d.push(w)),d.push(u.rehover,u.redrag,u.reselect),s.add(e,E,[e,c.undoit,c.traces],E,[e,c.redoit,c.traces]);var g=i.syncOrAsync(d,e);return g&&g.then||(g=Promise.resolve()),g.then((function(){return e.emit("plotly_restyle",c.eventData),e}))}function T(t){return void 0===t?null:t}function M(t,e){return e?function(e,n,r){var i=a(e,n),o=i.set;return i.set=function(e){N((r||"")+n,i.get(),e,t),o(e)},i}:a}function N(t,e,n,r){if(Array.isArray(e)||Array.isArray(n))for(var a=Array.isArray(e)?e:[],o=Array.isArray(n)?n:[],s=Math.max(a.length,o.length),l=0;l<s;l++)N(t+"["+l+"]",a[l],o[l],r);else if(i.isPlainObject(e)||i.isPlainObject(n)){var c=i.isPlainObject(e)?e:{},u=i.isPlainObject(n)?n:{},h=i.extendFlat({},c,u);for(var d in h)N(t+"."+d,c[d],u[d],r)}else void 0===r[t]&&(r[t]=T(e))}function D(t,e,n){var r,o=t._fullLayout,s=t._fullData,d=t.data,g=o._guiEditing,f=M(o._preGUI,g),p=i.extendDeepAll({},e);X(e);var v,m=F.traceFlags(),y={},b={};function x(){return n.map((function(){}))}function I(t){var e=h.id2name(t);-1===v.indexOf(e)&&v.push(e)}function Q(t){return"LAYOUT"+t+".autorange"}function C(t){return"LAYOUT"+t+".range"}function w(t){for(var e=t;e<s.length;e++)if(s[e]._input===d[t])return s[e]}function U(r,i,a){if(Array.isArray(r))r.forEach((function(t){U(t,i,a)}));else if(!(r in e)&&!B.hasParent(e,r)){var s;if("LAYOUT"===r.substr(0,6))s=f(t.layout,r.replace("LAYOUT",""));else{var l=n[a];s=M(o._tracePreGUI[w(l)._fullInput.uid],g)(d[l],r)}r in b||(b[r]=x()),void 0===b[r][a]&&(b[r][a]=T(s.get())),void 0!==i&&s.set(i)}}function A(t){return function(e){return s[e][t]}}function S(t){return function(e,r){return!1===e?s[n[r]][t]:null}}for(var L in e){if(B.hasParent(e,L))throw new Error("cannot set "+L+" and a parent attribute simultaneously");var k,G,_,R,E,N,D=e[L];if("autobinx"!==L&&"autobiny"!==L||(L=L.charAt(L.length-1)+"bins",D=Array.isArray(D)?D.map(S(L)):!1===D?n.map(A(L)):null),y[L]=D,"LAYOUT"!==L.substr(0,6)){for(b[L]=x(),r=0;r<n.length;r++){if(k=d[n[r]],G=w(n[r]),R=(_=M(o._tracePreGUI[G._fullInput.uid],g)(k,L)).get(),void 0!==(E=Array.isArray(D)?D[r%D.length]:D)){var Z=_.parts[_.parts.length-1],V=L.substr(0,L.length-Z.length-1),H=V?V+".":"",W=V?a(G,V).get():G;if((N=c.getTraceValObject(G,_.parts))&&N.impliedEdits&&null!==E)for(var Y in N.impliedEdits)U(i.relativeAttr(L,Y),N.impliedEdits[Y],r);else if("thicknessmode"!==Z&&"lenmode"!==Z||R===E||"fraction"!==E&&"pixels"!==E||!W){if("type"===L&&("pie"===E!=("pie"===R)||"funnelarea"===E!=("funnelarea"===R))){var z="x",O="y";"bar"!==E&&"bar"!==R||"h"!==k.orientation||(z="y",O="x"),i.swapAttrs(k,["?","?src"],"labels",z),i.swapAttrs(k,["d?","?0"],"label",z),i.swapAttrs(k,["?","?src"],"values",O),"pie"===R||"funnelarea"===R?(a(k,"marker.color").set(a(k,"marker.colors").get()),o._pielayer.selectAll("g.trace").remove()):l.traceIs(k,"cartesian")&&a(k,"marker.colors").set(a(k,"marker.color").get())}}else{var J=o._size,P=W.orient,j="top"===P||"bottom"===P;if("thicknessmode"===Z){var K=j?J.h:J.w;U(H+"thickness",W.thickness*("fraction"===E?1/K:K),r)}else{var q=j?J.w:J.h;U(H+"len",W.len*("fraction"===E?1/q:q),r)}}b[L][r]=T(R);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(L)){if("orientation"===L){_.set(E);var $=k.x&&!k.y?"h":"v";if((_.get()||$)===G.orientation)continue}else"orientationaxes"===L&&(k.orientation={v:"h",h:"v"}[G.orientation]);B.swapXYData(k),m.calc=m.clearAxisTypes=!0}else-1!==u.dataArrayContainers.indexOf(_.parts[0])?(B.manageArrayContainers(_,E,b),m.calc=!0):(N?N.arrayOk&&!l.traceIs(G,"regl")&&(i.isArrayOrTypedArray(E)||i.isArrayOrTypedArray(R))?m.calc=!0:F.update(m,N):m.calc=!0,_.set(E))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(L)&&h.swap(t,n),"orientationaxes"===L){var tt=a(t.layout,"hovermode"),et=tt.get();"x"===et?tt.set("y"):"y"===et?tt.set("x"):"x unified"===et?tt.set("y unified"):"y unified"===et&&tt.set("x unified")}if(-1!==["orientation","type"].indexOf(L)){for(v=[],r=0;r<n.length;r++){var nt=d[n[r]];l.traceIs(nt,"cartesian")&&(I(nt.xaxis||"x"),I(nt.yaxis||"y"))}U(v.map(Q),!0,0),U(v.map(C),[0,1],0)}}else _=f(t.layout,L.replace("LAYOUT","")),b[L]=[T(_.get())],_.set(Array.isArray(D)?D[0]:D),m.calc=!0}return(m.calc||m.plot)&&(m.fullReplot=!0),{flags:m,undoit:b,redoit:y,traces:n,eventData:i.extendDeepNoArrays([],[p,n])}}function X(t){var e,n,r,a=i.counterRegex("axis",".title",!1,!1),o=/colorbar\.title$/,s=Object.keys(t);for(e=0;e<s.length;e++)n=s[e],r=t[n],"title"!==n&&!a.test(n)&&!o.test(n)||"string"!=typeof r&&"number"!=typeof r?n.indexOf("titlefont")>-1&&-1===n.indexOf("grouptitlefont")?l(n,n.replace("titlefont","title.font")):n.indexOf("titleposition")>-1?l(n,n.replace("titleposition","title.position")):n.indexOf("titleside")>-1?l(n,n.replace("titleside","title.side")):n.indexOf("titleoffset")>-1&&l(n,n.replace("titleoffset","title.offset")):l(n,n.replace("title","title.text"));function l(e,n){t[n]=t[e],delete t[e]}}function Z(t,e,n){t=i.getGraphDiv(t),B.clearPromiseQueue(t);var r={};if("string"==typeof e)r[e]=n;else{if(!i.isPlainObject(e))return i.warn("Relayout fail.",e,n),Promise.reject();r=i.extendFlat({},e)}Object.keys(r).length&&(t.changed=!0);var a=O(t,r),o=a.flags;o.calc&&(t.calcdata=void 0);var l=[u.previousPromises];o.layoutReplot?l.push(I.layoutReplot):Object.keys(r).length&&(V(t,o,a)||u.supplyDefaults(t),o.legend&&l.push(I.doLegend),o.layoutstyle&&l.push(I.layoutStyles),o.axrange&&H(l,a.rangesAltered),o.ticks&&l.push(I.doTicksRelayout),o.modebar&&l.push(I.doModeBar),o.camera&&l.push(I.doCamera),o.colorbars&&l.push(I.doColorBars),l.push(w)),l.push(u.rehover,u.redrag,u.reselect),s.add(t,Z,[t,a.undoit],Z,[t,a.redoit]);var c=i.syncOrAsync(l,t);return c&&c.then||(c=Promise.resolve(t)),c.then((function(){return t.emit("plotly_relayout",a.eventData),t}))}function V(t,e,n){var r,a,o=t._fullLayout;if(!e.axrange)return!1;for(var s in e)if("axrange"!==s&&e[s])return!1;var l=function(t,e){return i.coerce(r,a,g,t,e)},c={};for(var u in n.rangesAltered){var f=h.id2name(u);if(r=t.layout[f],a=o[f],d(r,a,l,c),a._matchGroup)for(var p in a._matchGroup)if(p!==u){var v=o[h.id2name(p)];v.autorange=a.autorange,v.range=a.range.slice(),v._input.range=a.range.slice()}}return!0}function H(t,e){var n=e?function(t){var n=[];for(var r in e){var i=h.getFromId(t,r);if(n.push(r),-1!==(i.ticklabelposition||"").indexOf("inside")&&i._anchorAxis&&n.push(i._anchorAxis._id),i._matchGroup)for(var a in i._matchGroup)e[a]||n.push(a)}return h.draw(t,n,{skipTitle:!0})}:function(t){return h.draw(t,"redraw")};t.push(y,I.doAutoRangeAndConstraints,n,I.drawData,I.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Y=/^[xyz]axis[0-9]*\.autorange$/,z=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function O(t,e){var n,r,o,s=t.layout,u=t._fullLayout,d=u._guiEditing,g=M(u._preGUI,d),f=Object.keys(e),p=h.list(t),v=i.extendDeepAll({},e),m={};for(X(e),f=Object.keys(e),r=0;r<f.length;r++)if(0===f[r].indexOf("allaxes")){for(o=0;o<p.length;o++){var y=p[o]._id.substr(1),b=-1!==y.indexOf("scene")?y+".":"",I=f[r].replace("allaxes",b+p[o]._name);e[I]||(e[I]=e[f[r]])}delete e[f[r]]}var C=F.layoutFlags(),w={},U={};function A(t,n){if(Array.isArray(t))t.forEach((function(t){A(t,n)}));else if(!(t in e)&&!B.hasParent(e,t)){var r=g(s,t);t in U||(U[t]=T(r.get())),void 0!==n&&r.set(n)}}var S,L={};function k(t){var e=h.name2id(t.split(".")[0]);return L[e]=1,e}for(var G in e){if(B.hasParent(e,G))throw new Error("cannot set "+G+" and a parent attribute simultaneously");for(var _=g(s,G),R=e[G],E=_.parts.length-1;E>0&&"string"!=typeof _.parts[E];)E--;var N=_.parts[E],D=_.parts[E-1]+"."+N,Z=_.parts.slice(0,E).join("."),V=a(t.layout,Z).get(),H=a(u,Z).get(),O=_.get();if(void 0!==R){w[G]=R,U[G]="reverse"===N?R:T(O);var P=c.getLayoutValObject(u,_.parts);if(P&&P.impliedEdits&&null!==R)for(var j in P.impliedEdits)A(i.relativeAttr(G,j),P.impliedEdits[j]);if(-1!==["width","height"].indexOf(G))if(R){A("autosize",null);var K="height"===G?"width":"height";A(K,u[K])}else u[G]=t._initialAutoSize[G];else if("autosize"===G)A("width",R?null:u.width),A("height",R?null:u.height);else if(D.match(W))k(D),a(u,Z+"._inputRange").set(null);else if(D.match(Y)){k(D),a(u,Z+"._inputRange").set(null);var q=a(u,Z).get();q._inputDomain&&(q._input.domain=q._inputDomain.slice())}else D.match(z)&&a(u,Z+"._inputDomain").set(null);if("type"===N){S=V;var $="linear"===H.type&&"log"===R,tt="log"===H.type&&"linear"===R;if($||tt){if(S&&S.range)if(H.autorange)$&&(S.range=S.range[1]>S.range[0]?[1,2]:[2,1]);else{var et=S.range[0],nt=S.range[1];$?(et<=0&&nt<=0&&A(Z+".autorange",!0),et<=0?et=nt/1e6:nt<=0&&(nt=et/1e6),A(Z+".range[0]",Math.log(et)/Math.LN10),A(Z+".range[1]",Math.log(nt)/Math.LN10)):(A(Z+".range[0]",Math.pow(10,et)),A(Z+".range[1]",Math.pow(10,nt)))}else A(Z+".autorange",!0);Array.isArray(u._subplots.polar)&&u._subplots.polar.length&&u[_.parts[0]]&&"radialaxis"===_.parts[1]&&delete u[_.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(t,H,R,A),l.getComponentMethod("images","convertCoords")(t,H,R,A)}else A(Z+".autorange",!0),A(Z+".range",null);a(u,Z+"._inputRange").set(null)}else if(N.match(Q)){var rt=a(u,G).get(),it=(R||{}).type;it&&"-"!==it||(it="linear"),l.getComponentMethod("annotations","convertCoords")(t,rt,it,A),l.getComponentMethod("images","convertCoords")(t,rt,it,A)}var at=x.containerArrayMatch(G);if(at){n=at.array,r=at.index;var ot=at.property,st=P||{editType:"calc"};""!==r&&""===ot&&(x.isAddVal(R)?U[G]=null:x.isRemoveVal(R)?U[G]=(a(s,n).get()||[])[r]:i.warn("unrecognized full object value",e)),F.update(C,st),m[n]||(m[n]={});var lt=m[n][r];lt||(lt=m[n][r]={}),lt[ot]=R,delete e[G]}else"reverse"===N?(V.range?V.range.reverse():(A(Z+".autorange",!0),V.range=[1,0]),H.autorange?C.calc=!0:C.plot=!0):("dragmode"===G&&(!1===R&&!1!==O||!1!==R&&!1===O)||u._has("scatter-like")&&u._has("regl")&&"dragmode"===G&&("lasso"===R||"select"===R)&&"lasso"!==O&&"select"!==O||u._has("gl2d")?C.plot=!0:P?F.update(C,P):C.calc=!0,_.set(R))}}for(n in m){x.applyContainerArrayChanges(t,g(s,n),m[n],C,g)||(C.plot=!0)}for(var ct in L){var ut=(S=h.getFromId(t,ct))&&S._constraintGroup;if(ut)for(var ht in C.calc=!0,ut)L[ht]||(h.getFromId(t,ht)._constraintShrinkable=!0)}(J(t)||e.height||e.width)&&(C.plot=!0);var dt=u.shapes;for(r=0;r<dt.length;r++)if(dt[r].showlegend){C.calc=!0;break}return(C.plot||C.calc)&&(C.layoutReplot=!0),{flags:C,rangesAltered:L,undoit:U,redoit:w,eventData:v}}function J(t){var e=t._fullLayout,n=e.width,r=e.height;return t.layout.autosize&&u.plotAutoSize(t,t.layout,e),e.width!==n||e.height!==r}function P(e,n,r,a){e=i.getGraphDiv(e),B.clearPromiseQueue(e),i.isPlainObject(n)||(n={}),i.isPlainObject(r)||(r={}),Object.keys(n).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var o=B.coerceTraceIndices(e,a),l=D(e,i.extendFlat({},n),o),c=l.flags,h=O(e,i.extendFlat({},r)),d=h.flags;(c.calc||d.calc)&&(e.calcdata=void 0),c.clearAxisTypes&&B.clearAxisTypes(e,o,r);var g=[];d.layoutReplot?g.push(I.layoutReplot):c.fullReplot?g.push(t._doPlot):(g.push(u.previousPromises),V(e,d,h)||u.supplyDefaults(e),c.style&&g.push(I.doTraceStyle),(c.colorbars||d.colorbars)&&g.push(I.doColorBars),d.legend&&g.push(I.doLegend),d.layoutstyle&&g.push(I.layoutStyles),d.axrange&&H(g,h.rangesAltered),d.ticks&&g.push(I.doTicksRelayout),d.modebar&&g.push(I.doModeBar),d.camera&&g.push(I.doCamera),g.push(w)),g.push(u.rehover,u.redrag,u.reselect),s.add(e,P,[e,l.undoit,h.undoit,l.traces],P,[e,l.redoit,h.redoit,l.traces]);var f=i.syncOrAsync(g,e);return f&&f.then||(f=Promise.resolve(e)),f.then((function(){return e.emit("plotly_update",{data:l.eventData,layout:h.eventData}),e}))}function j(t){return function(e){e._fullLayout._guiEditing=!0;var n=t.apply(null,arguments);return e._fullLayout._guiEditing=!1,n}}var K=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],q=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function $(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=t.match(r.pattern);if(i){var a=i[1]||"";return{head:a,tail:t.substr(a.length+1),attr:r.attr}}}}function tt(t,e){var n=a(e,t).get();if(void 0!==n)return n;var r=t.split(".");for(r.pop();r.length>1;)if(r.pop(),void 0!==(n=a(e,r.join(".")+".uirevision").get()))return n;return e.uirevision}function et(t,e){for(var n=0;n<e.length;n++)if(e[n]._fullInput.uid===t)return n;return-1}function nt(t,e,n){for(var r=0;r<e.length;r++)if(e[r].uid===t)return r;return!e[n]||e[n].uid?-1:n}function rt(t,e){var n=i.isPlainObject(t),r=Array.isArray(t);return n||r?(n&&i.isPlainObject(e)||r&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function it(t,e,n,r){var o,s,l,c=r.getValObject,u=r.flags,h=r.immutable,d=r.inArray,g=r.arrayIndex;function f(){var t=o.editType;d&&-1!==t.indexOf("arraydraw")?i.pushUnique(u.arrays[d],g):(F.update(u,o),"none"!==t&&u.nChanges++,r.transition&&o.anim&&u.nChangesAnim++,(W.test(l)||Y.test(l))&&(u.rangesAltered[n[0]]=1),z.test(l)&&a(e,"_inputDomain").set(null),"datarevision"===s&&(u.newDataRevision=1))}function p(t){return"data_array"===t.valType||t.arrayOk}for(s in t){if(u.calc&&!r.transition)return;var v=t[s],m=e[s],y=n.concat(s);if(l=y.join("."),"_"!==s.charAt(0)&&"function"!=typeof v&&v!==m){if(("tick0"===s||"dtick"===s)&&"geo"!==n[0]){var b=e.tickmode;if("auto"===b||"array"===b||!b)continue}if(("range"!==s||!e.autorange)&&("zmin"!==s&&"zmax"!==s||"contourcarpet"!==e.type)&&(o=c(y))&&(!o._compareAsJSON||JSON.stringify(v)!==JSON.stringify(m))){var x,B=o.valType,I=p(o),Q=Array.isArray(v),C=Array.isArray(m);if(Q&&C){var w="_input_"+s,U=t[w],A=e[w];if(Array.isArray(U)&&U===A)continue}if(void 0===m)I&&Q?u.calc=!0:f();else if(o._isLinkedToArray){var S=[],L=!1;d||(u.arrays[s]=S);var k=Math.min(v.length,m.length),G=Math.max(v.length,m.length);if(k!==G){if("arraydraw"!==o.editType){f();continue}L=!0}for(x=0;x<k;x++)it(v[x],m[x],y.concat(x),i.extendFlat({inArray:s,arrayIndex:x},r));if(L)for(x=k;x<G;x++)S.push(x)}else!B&&i.isPlainObject(v)?it(v,m,y,r):I?Q&&C?(h&&(u.calc=!0),(h||r.newDataRevision)&&f()):Q!==C?u.calc=!0:f():Q&&C&&v.length===m.length&&String(v)===String(m)||f()}}}for(s in e)if(!(s in t)&&"_"!==s.charAt(0)&&"function"!=typeof e[s]){if(p(o=c(n.concat(s)))&&Array.isArray(e[s]))return void(u.calc=!0);f()}}function at(t,e){var n;for(n in t)if("_"!==n.charAt(0)){var r=t[n],a=e[n];if(r!==a)if(i.isPlainObject(r)&&i.isPlainObject(a)){if(at(r,a))return!0}else{if(!Array.isArray(r)||!Array.isArray(a))return!0;if(r.length!==a.length)return!0;for(var o=0;o<r.length;o++)if(r[o]!==a[o]){if(!i.isPlainObject(r[o])||!i.isPlainObject(a[o]))return!0;if(at(r[o],a[o]))return!0}}}}function ot(t){var e=t._fullLayout,n=t.getBoundingClientRect();if(!i.equalDomRects(n,e._lastBBox)){var r=e._invTransform=i.inverseTransformMatrix(i.getFullTransformMatrix(t));e._invScaleX=Math.sqrt(r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[0][2]*r[0][2]),e._invScaleY=Math.sqrt(r[1][0]*r[1][0]+r[1][1]*r[1][1]+r[1][2]*r[1][2]),e._lastBBox=n}}t.animate=function(t,e,n){if(t=i.getGraphDiv(t),!i.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var r=t._transitionData;r._frameQueue||(r._frameQueue=[]);var a=(n=u.supplyAnimationDefaults(n)).transition,o=n.frame;function s(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function l(t){return Array.isArray(o)?t>=o.length?o[0]:o[t]:o}function c(t,e){var n=0;return function(){if(t&&++n===e)return t()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise((function(o,h){function d(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var e=r._currentFrame=r._frameQueue.shift();if(e){var n=e.name?e.name.toString():null;t._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=e.frameOpts.duration,u.transition(t,e.frame.data,e.frame.layout,B.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then((function(){e.onComplete&&e.onComplete()})),t.emit("plotly_animatingframe",{name:n,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}function g(){t.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null;var e=function(){r._animationRaf=window.requestAnimationFrame(e),Date.now()-r._lastFrameAt>r._timeToNext&&d()};e()}var f,p,v=0;function m(t){return Array.isArray(a)?v>=a.length?t.transitionOpts=a[v]:t.transitionOpts=a[0]:t.transitionOpts=a,v++,t}var y=[],b=null==e,x=Array.isArray(e);if(!b&&!x&&i.isPlainObject(e))y.push({type:"object",data:m(i.extendFlat({},e))});else if(b||-1!==["string","number"].indexOf(typeof e))for(f=0;f<r._frames.length;f++)(p=r._frames[f])&&(b||String(p.group)===String(e))&&y.push({type:"byname",name:String(p.name),data:m({name:p.name})});else if(x)for(f=0;f<e.length;f++){var I=e[f];-1!==["number","string"].indexOf(typeof I)?(I=String(I),y.push({type:"byname",name:I,data:m({name:I})})):i.isPlainObject(I)&&y.push({type:"object",data:m(i.extendFlat({},I))})}for(f=0;f<y.length;f++)if("byname"===(p=y[f]).type&&!r._frameHash[p.data.name])return i.warn('animate failure: frame not found: "'+p.data.name+'"'),void h();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var e=r._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&y.reverse();var F=t._fullLayout._currentFrame;if(F&&n.fromcurrent){var Q=-1;for(f=0;f<y.length;f++)if("byname"===(p=y[f]).type&&p.name===F){Q=f;break}if(Q>0&&Q<y.length-1){var C=[];for(f=0;f<y.length;f++)p=y[f],("byname"!==y[f].type||f>Q)&&C.push(p);y=C}}y.length>0?function(e){if(0!==e.length){for(var i=0;i<e.length;i++){var a;a="byname"===e[i].type?u.computeFrame(t,e[i].name):e[i].data;var d=l(i),f=s(i);f.duration=Math.min(f.duration,d.duration);var p={frame:a,name:e[i].name,frameOpts:d,transitionOpts:f};i===e.length-1&&(p.onComplete=c(o,2),p.onInterrupt=h),r._frameQueue.push(p)}"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||g()}}(y):(t.emit("plotly_animated"),o())}))},t.addFrames=function(t,e,n){if(t=i.getGraphDiv(t),null==e)return Promise.resolve();if(!i.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,a,o,l,c=t._transitionData._frames,h=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var d=c.length+2*e.length,g=[],f={};for(r=e.length-1;r>=0;r--)if(i.isPlainObject(e[r])){var p=e[r].name,v=(h[p]||f[p]||{}).name,m=e[r].name,y=h[v]||f[v];v&&m&&"number"==typeof m&&y&&C<5&&(C++,i.warn('addFrames: overwriting frame "'+(h[v]||f[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===C&&i.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),f[p]={name:p},g.push({frame:u.supplyFrameDefaults(e[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:d+r})}g.sort((function(t,e){return t.index>e.index?-1:t.index<e.index?1:0}));var b=[],x=[],B=c.length;for(r=g.length-1;r>=0;r--){if("number"==typeof(a=g[r].frame).name&&i.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;h[a.name="frame "+t._transitionData._counter++];);if(h[a.name]){for(o=0;o<c.length&&(c[o]||{}).name!==a.name;o++);b.push({type:"replace",index:o,value:a}),x.unshift({type:"replace",index:o,value:c[o]})}else l=Math.max(0,Math.min(g[r].index,B)),b.push({type:"insert",index:l,value:a}),x.unshift({type:"delete",index:l}),B++}var I=u.modifyFrames,F=u.modifyFrames,Q=[t,x],w=[t,b];return s&&s.add(t,I,Q,F,w),u.modifyFrames(t,b)},t.deleteFrames=function(t,e){if(t=i.getGraphDiv(t),!i.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var n,r,a=t._transitionData._frames,o=[],l=[];if(!e)for(e=[],n=0;n<a.length;n++)e.push(n);for((e=e.slice()).sort(),n=e.length-1;n>=0;n--)r=e[n],o.push({type:"delete",index:r}),l.unshift({type:"insert",index:r,value:a[r]});var c=u.modifyFrames,h=u.modifyFrames,d=[t,l],g=[t,o];return s&&s.add(t,c,d,h,g),u.modifyFrames(t,o)},t.addTraces=function e(n,r,a){n=i.getGraphDiv(n);var o,l,c=[],u=t.deleteTraces,h=e,d=[n,c],g=[n,r];for(function(t,e,n){var r,i;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),r=0;r<e.length;r++)if("object"!=typeof(i=e[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(n,r,a),Array.isArray(r)||(r=[r]),r=r.map((function(t){return i.extendFlat({},t)})),B.cleanData(r),o=0;o<r.length;o++)n.data.push(r[o]);for(o=0;o<r.length;o++)c.push(-r.length+o);if(void 0===a)return l=t.redraw(n),s.add(n,u,d,h,g),l;Array.isArray(a)||(a=[a]);try{G(n,c,a)}catch(t){throw n.data.splice(n.data.length-r.length,r.length),t}return s.startSequence(n),s.add(n,u,d,h,g),l=t.moveTraces(n,c,a),s.stopSequence(n),l},t.deleteTraces=function e(n,r){n=i.getGraphDiv(n);var a,o,l=[],c=t.addTraces,u=e,h=[n,l,r],d=[n,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),k(n,r,"indices"),(r=L(r,n.data.length-1)).sort(i.sorterDes),a=0;a<r.length;a+=1)o=n.data.splice(r[a],1)[0],l.push(o);var g=t.redraw(n);return s.add(n,c,h,u,d),g},t.extendTraces=function e(n,r,a,o){var l=_(n=i.getGraphDiv(n),r,a,o,(function(t,e,n){var r,a;if(i.isTypedArray(t))if(n<0){var o=new t.constructor(0),s=R(t,e);n<0?(r=s,a=o):(r=o,a=s)}else if(r=new t.constructor(n),a=new t.constructor(t.length+e.length-n),n===e.length)r.set(e),a.set(t);else if(n<e.length){var l=e.length-n;r.set(e.subarray(l)),a.set(t),a.set(e.subarray(0,l),t.length)}else{var c=n-e.length,u=t.length-c;r.set(t.subarray(u)),r.set(e,c),a.set(t.subarray(0,u))}else r=t.concat(e),a=n>=0&&n<r.length?r.splice(0,r.length-n):[];return[r,a]})),c=t.redraw(n),u=[n,l.update,a,l.maxPoints];return s.add(n,t.prependTraces,u,e,arguments),c},t.moveTraces=function e(n,r,a){var o,l=[],c=[],u=e,h=e,d=[n=i.getGraphDiv(n),a,r],g=[n,r,a];if(G(n,r,a),r=Array.isArray(r)?r:[r],void 0===a)for(a=[],o=0;o<r.length;o++)a.push(-r.length+o);for(a=Array.isArray(a)?a:[a],r=L(r,n.data.length-1),a=L(a,n.data.length-1),o=0;o<n.data.length;o++)-1===r.indexOf(o)&&l.push(n.data[o]);for(o=0;o<r.length;o++)c.push({newIndex:a[o],trace:n.data[r[o]]});for(c.sort((function(t,e){return t.newIndex-e.newIndex})),o=0;o<c.length;o+=1)l.splice(c[o].newIndex,0,c[o].trace);n.data=l;var f=t.redraw(n);return s.add(n,u,d,h,g),f},t.prependTraces=function e(n,r,a,o){var l=_(n=i.getGraphDiv(n),r,a,o,(function(t,e,n){var r,a;if(i.isTypedArray(t))if(n<=0){var o=new t.constructor(0),s=R(e,t);n<0?(r=s,a=o):(r=o,a=s)}else if(r=new t.constructor(n),a=new t.constructor(t.length+e.length-n),n===e.length)r.set(e),a.set(t);else if(n<e.length){var l=e.length-n;r.set(e.subarray(0,l)),a.set(e.subarray(l)),a.set(t,l)}else{var c=n-e.length;r.set(e),r.set(t.subarray(0,c),e.length),a.set(t.subarray(c))}else r=e.concat(t),a=n>=0&&n<r.length?r.splice(n,r.length):[];return[r,a]})),c=t.redraw(n),u=[n,l.update,a,l.maxPoints];return s.add(n,t.extendTraces,u,e,arguments),c},t.newPlot=function(e,n,r,a){return e=i.getGraphDiv(e),u.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),u.purge(e),t._doPlot(e,n,r,a)},t._doPlot=function(n,r,a,s){var c;if(n=i.getGraphDiv(n),o.init(n),i.isPlainObject(r)){var d=r;r=d.data,a=d.layout,s=d.config,c=d.frames}if(!1===o.triggerHandler(n,"plotly_beforeplot",[r,a,s]))return Promise.reject();r||a||i.isPlotDiv(n)||i.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",n),S(n,s),a||(a={}),e.select(n).classed("js-plotly-plot",!0),f.makeTester(),Array.isArray(n._promises)||(n._promises=[]);var g=0===(n.data||[]).length&&Array.isArray(r);Array.isArray(r)&&(B.cleanData(r),g?n.data=r:n.data.push.apply(n.data,r),n.empty=!1),n.layout&&!g||(n.layout=B.cleanLayout(a)),u.supplyDefaults(n);var p=n._fullLayout,y=p._has("cartesian");p._replotting=!0,(g||p._shouldCreateBgLayer)&&(!function(t){var n=e.select(t),r=t._fullLayout;if(r._calcInverseTransform=ot,r._calcInverseTransform(t),r._container=n.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var a={};e.selectAll("defs").each((function(){this.id&&(a[this.id.split("-")[1]]=1)})),r._uid=i.randstr(a)}r._paperdiv.selectAll(".main-svg").attr(m.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var o=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=o.append("g").classed("imagelayer",!0),r._shapeLowerLayer=o.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._smithlayer=r._paper.append("g").classed("smithlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._iciclelayer=r._paper.append("g").classed("iciclelayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var s=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=s.append("g").classed("imagelayer",!0),r._shapeUpperLayer=s.append("g").classed("shapelayer",!0),r._selectionLayer=r._toppaper.append("g").classed("selectionlayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}(n),p._shouldCreateBgLayer&&delete p._shouldCreateBgLayer),f.initGradients(n),f.initPatterns(n),g&&h.saveShowSpikeInitial(n);var b=!n.calcdata||n.calcdata.length!==(n._fullData||[]).length;b&&u.doCalcdata(n);for(var x=0;x<n.calcdata.length;x++)n.calcdata[x][0].trace=n._fullData[x];n._context.responsive?n._responsiveChartHandler||(n._responsiveChartHandler=function(){i.isHidden(n)||u.resize(n)},window.addEventListener("resize",n._responsiveChartHandler)):i.clearResponsive(n);var F=i.extendFlat({},p._size),Q=0;function C(){if(u.clearAutoMarginIds(n),I.drawMarginPushers(n),h.allowAutoMargin(n),n._fullLayout.title.text&&n._fullLayout.title.automargin&&u.allowAutoMargin(n,"title.automargin"),p._has("pie"))for(var t=n._fullData,e=0;e<t.length;e++){var r=t[e];"pie"===r.type&&r.automargin&&u.allowAutoMargin(n,"pie."+r.uid+".automargin")}return u.doAutoMargin(n),u.previousPromises(n)}function U(){n._transitioning||(I.doAutoRangeAndConstraints(n),g&&h.saveRangeInitial(n),l.getComponentMethod("rangeslider","calcAutorange")(n))}var A=[u.previousPromises,function(){if(c)return t.addFrames(n,c)},function t(){for(var e=p._basePlotModules,r=0;r<e.length;r++)e[r].drawFramework&&e[r].drawFramework(n);!p._glcanvas&&p._has("gl")&&(p._glcanvas=p._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],(function(t){return t.key})),p._glcanvas.enter().append("canvas").attr("class",(function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var a=n._context.plotGlPixelRatio;if(p._glcanvas){p._glcanvas.attr("width",p.width*a).attr("height",p.height*a).style("width",p.width+"px").style("height",p.height+"px");var o=p._glcanvas.data()[0].regl;if(o&&(Math.floor(p.width*a)!==o._gl.drawingBufferWidth||Math.floor(p.height*a)!==o._gl.drawingBufferHeight)){var s="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Q)return i.log(s+" Clearing graph and plotting again."),u.cleanPlot([],{},n._fullData,p),u.supplyDefaults(n),p=n._fullLayout,u.doCalcdata(n),Q++,t();i.error(s)}}return"h"===p.modebar.orientation?p._modebardiv.style("height",null).style("width","100%"):p._modebardiv.style("width",null).style("height",p.height+"px"),u.previousPromises(n)},C,function(){if(u.didMarginChange(F,p._size))return i.syncOrAsync([C,I.layoutStyles],n)}];y&&A.push((function(){if(b)return i.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),U],n);U()})),A.push(I.layoutStyles),y&&A.push((function(){return h.draw(n,g?"":"redraw")}),(function(t){var e=t._fullLayout._insideTickLabelsUpdaterange;if(e)return t._fullLayout._insideTickLabelsUpdaterange=void 0,Z(t,e).then((function(){h.saveRangeInitial(t,!0)}))})),A.push(I.drawData,I.finalDraw,v,u.addLinks,u.rehover,u.redrag,u.reselect,u.doAutoMargin,u.previousPromises);var L=i.syncOrAsync(A,n);return L&&L.then||(L=Promise.resolve()),L.then((function(){return w(n),n}))},t.purge=function(t){var e=(t=i.getGraphDiv(t))._fullLayout||{},n=t._fullData||[];return u.cleanPlot([],{},n,e),u.purge(t),o.purge(t),e._container&&e._container.remove(),delete t._context,t},t.react=function(e,n,r,o){var s,h;e=i.getGraphDiv(e),B.clearPromiseQueue(e);var d=e._fullData,g=e._fullLayout;if(i.isPlotDiv(e)&&d&&g){if(i.isPlainObject(n)){var f=n;n=f.data,r=f.layout,o=f.config,s=f.frames}var p=!1;if(o){var v=i.extendDeep({},e._context);e._context=void 0,S(e,o),p=at(v,e._context)}e.data=n||[],B.cleanData(e.data),e.layout=r||{},B.cleanLayout(e.layout),function(t,e,n,r){var o,s,l,c,u,h,d,g,f,p,v=r._preGUI,m=[],y={},b={};for(o in v){if(u=$(o,K)){if(f=u.head,p=u.tail,s=u.attr||f+".uirevision",(c=(l=a(r,s).get())&&tt(s,e))&&c===l){if(null===(h=v[o])&&(h=void 0),rt(g=(d=a(e,o)).get(),h)){void 0===g&&"autorange"===p&&m.push(f),d.set(T(a(r,o).get()));continue}if("autorange"===p||"range["===p.substr(0,6)){var x=v[f+".range[0]"],B=v[f+".range[1]"],I=v[f+".autorange"];if(I||null===I&&null===x&&null===B){if(!(f in y)){var F=a(e,f).get();y[f]=F&&(F.autorange||!1!==F.autorange&&(!F.range||2!==F.range.length))}if(y[f]){d.set(T(a(r,o).get()));continue}}}}}else i.warn("unrecognized GUI edit: "+o);delete v[o],u&&"range["===u.tail.substr(0,6)&&(b[u.head]=1)}for(var Q=0;Q<m.length;Q++){var C=m[Q];if(b[C]){var w=a(e,C).get();w&&delete w.autorange}}var U=r._tracePreGUI;for(var A in U){var S,L=U[A],k=null;for(o in L){if(!k){var G=et(A,n);if(G<0){delete U[A];break}var _=nt(A,t,(S=n[G]._fullInput).index);if(_<0){delete U[A];break}k=t[_]}if(u=$(o,q)){if(u.attr?c=(l=a(r,u.attr).get())&&tt(u.attr,e):(l=S.uirevision,void 0===(c=k.uirevision)&&(c=e.uirevision)),c&&c===l&&(null===(h=L[o])&&(h=void 0),rt(g=(d=a(k,o)).get(),h))){d.set(T(a(S,o).get()));continue}}else i.warn("unrecognized GUI edit: "+o+" in trace uid "+A);delete L[o]}}}(e.data,e.layout,d,g),u.supplyDefaults(e,{skipUpdateCalc:!0});var m=e._fullData,y=e._fullLayout,b=void 0===y.datarevision,x=y.transition,Q=function(t,e,n,r,i){var a=F.layoutFlags();function o(t){return c.getLayoutValObject(n,t)}a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0;var s={getValObject:o,flags:a,immutable:r,transition:i,gd:t};it(e,n,[],s),(a.plot||a.calc)&&(a.layoutReplot=!0);i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(e,g,y,b,x),C=Q.newDataRevision,U=function(t,e,n,r,i,a){var o=e.length===n.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,l,h=F.traceFlags();function d(t){var e=c.getTraceValObject(l,t);return!l._module.animatable&&e.anim&&(e.anim=!1),e}h.arrays={},h.nChanges=0,h.nChangesAnim=0;var g={getValObject:d,flags:h,immutable:r,transition:i,newDataRevision:a,gd:t},f={};for(s=0;s<e.length;s++)if(n[s]){if(l=n[s]._fullInput,u.hasMakesDataTransform(l)&&(l=n[s]),f[l.uid])continue;f[l.uid]=1,it(e[s]._fullInput,l,[],g)}(h.calc||h.plot)&&(h.fullReplot=!0);i&&h.nChanges&&h.nChangesAnim&&(h.anim=h.nChanges===h.nChangesAnim&&o?"all":"some");return h}(e,d,m,b,x,C);if(J(e)&&(Q.layoutReplot=!0),U.calc||Q.calc){e.calcdata=void 0;for(var A=Object.getOwnPropertyNames(y),L=0;L<A.length;L++){var k=A[L],G=k.substring(0,5);if("xaxis"===G||"yaxis"===G){var _=y[k]._emptyCategories;_&&_()}}}else u.supplyDefaultsUpdateCalc(e.calcdata,m);var R=[];if(s&&(e._transitionData={},u.createTransitionData(e),R.push((function(){return t.addFrames(e,s)}))),y.transition&&!p&&(U.anim||Q.anim))Q.ticks&&R.push(I.doTicksRelayout),u.doCalcdata(e),I.doAutoRangeAndConstraints(e),R.push((function(){return u.transitionFromReact(e,U,Q,g)}));else if(U.fullReplot||Q.layoutReplot||p)e._fullLayout._skipDefaults=!0,R.push(t._doPlot);else{for(var E in Q.arrays){var M=Q.arrays[E];if(M.length){var N=l.getComponentMethod(E,"drawOne");if(N!==i.noop)for(var D=0;D<M.length;D++)N(e,M[D]);else{var X=l.getComponentMethod(E,"draw");if(X===i.noop)throw new Error("cannot draw components: "+E);X(e)}}}R.push(u.previousPromises),U.style&&R.push(I.doTraceStyle),(U.colorbars||Q.colorbars)&&R.push(I.doColorBars),Q.legend&&R.push(I.doLegend),Q.layoutstyle&&R.push(I.layoutStyles),Q.axrange&&H(R),Q.ticks&&R.push(I.doTicksRelayout),Q.modebar&&R.push(I.doModeBar),Q.camera&&R.push(I.doCamera),R.push(w)}R.push(u.rehover,u.redrag,u.reselect),(h=i.syncOrAsync(R,e))&&h.then||(h=Promise.resolve(e))}else h=t.newPlot(e,n,r,o);return h.then((function(){return e.emit("plotly_react",{data:n,layout:r}),e}))},t.redraw=function(e){if(e=i.getGraphDiv(e),!i.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return B.cleanData(e.data),B.cleanLayout(e.layout),e.calcdata=void 0,t._doPlot(e).then((function(){return e.emit("plotly_redraw"),e}))},t.relayout=Z,t.restyle=E,t.setPlotConfig=function(t){return i.extendFlat(b,t)},t.update=P,t._guiRelayout=j(Z),t._guiRestyle=j(E),t._guiUpdate=j(P),t._storeDirectGUIEdit=function(t,e,n){for(var r in n){N(r,a(t,r).get(),n[r],e)}}}(Cf);var Zk={},Vk=hh;Zk.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},Zk.getRedrawFunc=function(t){return function(){Vk.getComponentMethod("colorbar","draw")(t)}},Zk.encodeSVG=function(t){return"data:image/svg+xml,"+encodeURIComponent(t)},Zk.encodeJSON=function(t){return"data:application/json,"+encodeURIComponent(t)};var Hk=window.URL||window.webkitURL;Zk.createObjectURL=function(t){return Hk.createObjectURL(t)},Zk.revokeObjectURL=function(t){return Hk.revokeObjectURL(t)},Zk.createBlob=function(t,e){if("svg"===e)return new window.Blob([t],{type:"image/svg+xml;charset=utf-8"});if("full-json"===e)return new window.Blob([t],{type:"application/json;charset=utf-8"});var n=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(window.atob(t));return new window.Blob([n],{type:"image/"+e})},Zk.octetStream=function(t){document.location.href="data:application/octet-stream"+t},Zk.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,Zk.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.";var Wk=uo,Yk=yf,zk=Qb,Ok=Pu,Jk=ev,Pk=/"/g,jk="TOBESTRIPPED",Kk=new RegExp('("'+jk+")|("+jk+'")',"g");var qk=function(t,e,n){var r,i=t._fullLayout,a=i._paper,o=i._toppaper,s=i.width,l=i.height;a.insert("rect",":first-child").call(zk.setRect,0,0,s,l).call(Ok.fill,i.paper_bgcolor);var c=i._basePlotModules||[];for(r=0;r<c.length;r++){var u=c[r];u.toSVG&&u.toSVG(t)}if(o){var h=o.node().childNodes,d=Array.prototype.slice.call(h);for(r=0;r<d.length;r++){var g=d[r];g.childNodes.length&&a.node().appendChild(g)}}i._draggers&&i._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var t=Wk.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(Pk,jk));var n=this.style.fontWeight;n&&"normal"===n&&t.style("font-weight",void 0);var r=this.style.fontStyle;r&&"normal"===r&&t.style("font-style",void 0);var i=this.style.fontVariant;i&&"normal"===i&&t.style("font-variant",void 0)}else t.remove()})),a.selectAll(".gradient_filled,.pattern_filled").each((function(){var t=Wk.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(Pk,jk));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&t.style("stroke",n.replace(Pk,jk))})),"pdf"!==e&&"eps"!==e||a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(Jk.xmlns,"xmlns",Jk.svg),a.node().setAttributeNS(Jk.xmlns,"xmlns:xlink",Jk.xlink),"svg"===e&&n&&(a.attr("width",n*s),a.attr("height",n*l),a.attr("viewBox","0 0 "+s+" "+l));var f=(new window.XMLSerializer).serializeToString(a.node());return f=function(t){var e=Wk.select("body").append("div").style({display:"none"}).html(""),n=t.replace(/(&[^;]*;)/gi,(function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()}));return e.remove(),n}(f),f=function(t){return t.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}(f),f=f.replace(Kk,"'"),Yk.isIE()&&(f=(f=(f=f.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),f},$k=yf,tG=Vf.EventEmitter,eG=Zk;var nG=function(t){var e=t.emitter||new tG,n=new Promise((function(r,i){var a=window.Image,o=t.svg,s=t.format||"png";if($k.isIE()&&"svg"!==s){var l=new Error(eG.MSG_IE_BAD_FORMAT);return i(l),t.promise?n:e.emit("error",l)}var c,u,h=t.canvas,d=t.scale||1,g=t.width||300,f=t.height||150,p=d*g,v=d*f,m=h.getContext("2d",{willReadFrequently:!0}),y=new a;"svg"===s||$k.isSafari()?u=eG.encodeSVG(o):(c=eG.createBlob(o,"svg"),u=eG.createObjectURL(c)),h.width=p,h.height=v,y.onload=function(){var n;switch(c=null,eG.revokeObjectURL(u),"svg"!==s&&m.drawImage(y,0,0,p,v),s){case"jpeg":n=h.toDataURL("image/jpeg");break;case"png":n=h.toDataURL("image/png");break;case"webp":n=h.toDataURL("image/webp");break;case"svg":n=u;break;default:var a="Image format is not jpeg, png, svg or webp.";if(i(new Error(a)),!t.promise)return e.emit("error",a)}r(n),t.promise||e.emit("success",n)},y.onerror=function(n){if(c=null,eG.revokeObjectURL(u),i(n),!t.promise)return e.emit("error",n)},y.src=u}));return t.promise?n:e},rG=Ac,iG=Cf,aG=qp,oG=yf,sG=Zk,lG=qk,cG=nG,uG=so.version,hG={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};var dG=function(t,e){var n,r,i,a;function o(t){return!(t in e)||oG.validate(e[t],hG[t])}if(e=e||{},oG.isPlainObject(t)?(n=t.data||[],r=t.layout||{},i=t.config||{},a={}):(t=oG.getGraphDiv(t),n=oG.extendDeep([],t.data),r=oG.extendDeep({},t.layout),i=t._context,a=t._fullLayout||{}),!o("width")&&null!==e.width||!o("height")&&null!==e.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+oG.join2(hG.format.values,", "," or ")+".");var s={};function l(t,n){return oG.coerce(e,s,hG,t,n)}var c=l("format"),u=l("width"),h=l("height"),d=l("scale"),g=l("setBackground"),f=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var v=oG.extendFlat({},r);u?v.width=u:null===e.width&&rG(a.width)&&(v.width=a.width),h?v.height=h:null===e.height&&rG(a.height)&&(v.height=a.height);var m=oG.extendFlat({},i,{_exportedPlot:!0,staticPlot:!0,setBackground:g}),y=sG.getRedrawFunc(p);function b(){return new Promise((function(t){setTimeout(t,sG.getDelay(p._fullLayout))}))}function x(){return new Promise((function(t,e){var n=lG(p,c,d),r=p._fullLayout.width,i=p._fullLayout.height;function a(){iG.purge(p),document.body.removeChild(p)}if("full-json"===c){var o=aG.graphJson(p,!1,"keepdata","object",!0,!0);return o.version=uG,o=JSON.stringify(o),a(),t(f?o:sG.encodeJSON(o))}if(a(),"svg"===c)return t(f?n:sG.encodeSVG(n));var s=document.createElement("canvas");s.id=oG.randstr(),cG({format:c,width:r,height:i,scale:d,canvas:s,svg:n,promise:!0}).then(t).catch(e)}))}return new Promise((function(t,e){iG.newPlot(p,n,v,m).then(y).then(b).then(x).then((function(e){t(function(t){return f?t.replace(sG.IMAGE_URL_PREFIX,""):t}(e))})).catch((function(t){e(t)}))}))},gG=yf,fG=qp,pG=jf,vG=nh.dfltConfig,mG=gG.isPlainObject,yG=Array.isArray,bG=gG.isArrayOrTypedArray;function xG(t,e,n,r,i,a){a=a||[];for(var o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=a.slice();c.push(l);var u=t[l],h=e[l],d=CG(n,l),g=(d||{}).valType,f="info_array"===g,p="colorscale"===g,v=(d||{}).items;if(QG(n,l))if(mG(u)&&mG(h)&&"any"!==g)xG(u,h,d,r,i,c);else if(f&&yG(u)){u.length>h.length&&r.push(FG("unused",i,c.concat(h.length)));var m,y,b,x,B,I=h.length,F=Array.isArray(v);if(F&&(I=Math.min(I,v.length)),2===d.dimensions)for(y=0;y<I;y++)if(yG(u[y])){u[y].length>h[y].length&&r.push(FG("unused",i,c.concat(y,h[y].length)));var Q=h[y].length;for(m=0;m<(F?Math.min(Q,v[y].length):Q);m++)b=F?v[y][m]:v,x=u[y][m],B=h[y][m],gG.validate(x,b)?B!==x&&B!==+x&&r.push(FG("dynamic",i,c.concat(y,m),x,B)):r.push(FG("value",i,c.concat(y,m),x))}else r.push(FG("array",i,c.concat(y),u[y]));else for(y=0;y<I;y++)b=F?v[y]:v,x=u[y],B=h[y],gG.validate(x,b)?B!==x&&B!==+x&&r.push(FG("dynamic",i,c.concat(y),x,B)):r.push(FG("value",i,c.concat(y),x))}else if(d.items&&!f&&yG(u)){var C,w,U=v[Object.keys(v)[0]],A=[];for(C=0;C<h.length;C++){var S=h[C]._index||C;if((w=c.slice()).push(S),mG(u[S])&&mG(h[C])){A.push(S);var L=u[S],k=h[C];mG(L)&&!1!==L.visible&&!1===k.visible?r.push(FG("invisible",i,w)):xG(L,k,U,r,i,w)}}for(C=0;C<u.length;C++)(w=c.slice()).push(C),mG(u[C])?-1===A.indexOf(C)&&r.push(FG("unused",i,w)):r.push(FG("object",i,w,u[C]))}else!mG(u)&&mG(h)?r.push(FG("object",i,c,u)):bG(u)||!bG(h)||f||p?l in e?gG.validate(u,d)?"enumerated"===d.valType&&(d.coerceNumber&&u!==+h||u!==h)&&r.push(FG("dynamic",i,c,u,h)):r.push(FG("value",i,c,u)):r.push(FG("unused",i,c,u)):r.push(FG("array",i,c,u));else r.push(FG("schema",i,c))}}return r}var BG={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":IG(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":IG(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return IG(t)+"key "+e+" is not part of the schema"},unused:function(t,e,n){var r=mG(n)?"container":"key";return IG(t)+r+" "+e+" did not get coerced"},dynamic:function(t,e,n,r){return[IG(t)+"key",e,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?IG(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,n){return[IG(t)+"key "+e,"is set to an invalid value ("+n+")"].join(" ")}};function IG(t){return yG(t)?"In data trace "+t[1]+", ":"In "+t+", "}function FG(t,e,n,r,i){var a,o;n=n||"",yG(e)?(a=e[0],o=e[1]):(a=e,o=null);var s=function(t){if(!yG(t))return String(t);for(var e="",n=0;n<t.length;n++){var r=t[n];"number"==typeof r?e=e.substr(0,e.length-1)+"["+r+"]":e+=r,n<t.length-1&&(e+=".")}return e}(n),l=BG[t](e,s,r,i);return gG.log(l),{code:t,container:a,trace:o,path:n,astr:s,msg:l}}function QG(t,e){var n=UG(e),r=n.keyMinusId,i=n.id;return!!(r in t&&t[r]._isSubplotObj&&i)||e in t}function CG(t,e){return e in t?t[e]:t[UG(e).keyMinusId]}var wG=gG.counterRegex("([a-z]+)");function UG(t){var e=t.match(wG);return{keyMinusId:e&&e[1],id:e&&e[2]}}var AG=yf,SG=Zk;var LG=function(t,e,n){var r=document.createElement("a"),i="download"in r;return new Promise((function(a,o){var s,l;if(AG.isIE())return s=SG.createBlob(t,"svg"),window.navigator.msSaveBlob(s,e),s=null,a(e);if(i)return s=SG.createBlob(t,n),l=SG.createObjectURL(s),r.href=l,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),SG.revokeObjectURL(l),s=null,a(e);if(AG.isSafari()){var c="svg"===n?",":";base64,";return SG.octetStream(c+encodeURIComponent(t)),a(e)}o(new Error("download error"))}))},kG=yf,GG=dG,_G=LG,RG=Zk;var EG=function(t,e){var n;return kG.isPlainObject(t)||(n=kG.getGraphDiv(t)),(e=e||{}).format=e.format||"png",e.width=e.width||null,e.height=e.height||null,e.imageDataOnly=!0,new Promise((function(r,i){n&&n._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),kG.isIE()&&"svg"!==e.format&&i(new Error(RG.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var a=GG(t,e),o=e.filename||t.fn||"newplot";o+="."+e.format.replace("-","."),a.then((function(t){return n&&(n._snapshotInProgress=!1),_G(t,o,e.format)})).then((function(t){r(t)})).catch((function(t){n&&(n._snapshotInProgress=!1),i(t)}))}))},TG={},MG=yf,NG=MG.isPlainObject,DG=jf,XG=qp,ZG=_u,VG=$f,HG=nh.dfltConfig;function WG(t,e){t=MG.extendDeep({},t);var n,r,i=Object.keys(t).sort();function a(e,n,i){if(NG(n)&&NG(e))WG(e,n);else if(Array.isArray(n)&&Array.isArray(e)){var a=VG.arrayTemplater({_template:t},i);for(r=0;r<n.length;r++){var o=n[r],s=a.newItem(o)._template;s&&WG(s,o)}var l=a.defaultItems();for(r=0;r<l.length;r++)n.push(l[r]._template);for(r=0;r<n.length;r++)delete n[r].templateitemname}}for(n=0;n<i.length;n++){var o=i[n],s=t[o];if(o in e?a(s,e[o],o):e[o]=s,YG(o)===o)for(var l in e){var c=YG(l);l===c||c!==o||l in t||a(s,e[l],o)}}}function YG(t){return t.replace(/[0-9]+$/,"")}function zG(t,e,n,r,i){var a=i&&n(i);for(var o in t){var s=t[o],l=PG(t,o,r),c=PG(t,o,i),u=n(c);if(!u){var h=YG(o);h!==o&&(u=n(c=PG(t,h,i)))}if((!a||a!==u)&&!(!u||u._noTemplating||"data_array"===u.valType||u.arrayOk&&Array.isArray(s)))if(!u.valType&&NG(s))zG(s,e,n,l,c);else if(u._isLinkedToArray&&Array.isArray(s))for(var d=!1,g=0,f={},p=0;p<s.length;p++){var v=s[p];if(NG(v)){var m=v.name;if(m)f[m]||(zG(v,e,n,PG(s,g,l),PG(s,g,c)),g++,f[m]=1);else if(!d){var y=PG(t,VG.arrayDefaultKey(o),r),b=PG(s,g,l);zG(v,e,n,b,PG(s,g,c));var x=MG.nestedProperty(e,b);MG.nestedProperty(e,y).set(x.get()),x.set(null),d=!0}}}else{MG.nestedProperty(e,l).set(s)}}}function OG(t,e){return DG.getLayoutValObject(t,MG.nestedProperty({},e).parts)}function JG(t,e){return DG.getTraceValObject(t,MG.nestedProperty({},e).parts)}function PG(t,e,n){return n?Array.isArray(t)?n+"["+e+"]":n+"."+e:e}function jG(t){for(var e=0;e<t.length;e++)if(NG(t[e]))return!0}function KG(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}TG.makeTemplate=function(t){t=MG.isPlainObject(t)?t:MG.getGraphDiv(t),t=MG.extendDeep({_context:HG},{data:t.data,layout:t.layout}),XG.supplyDefaults(t);var e=t.data||[],n=t.layout||{};n._basePlotModules=t._fullLayout._basePlotModules,n._modules=t._fullLayout._modules;var r={data:{},layout:{}};e.forEach((function(t){var e={};zG(t,e,JG.bind(null,t));var n=MG.coerce(t,{},ZG,"type"),i=r.data[n];i||(i=r.data[n]=[]),i.push(e)})),zG(n,r.layout,OG.bind(null,n)),delete r.layout.template;var i=n.template;if(NG(i)){var a,o,s,l,c,u,h=i.layout;NG(h)&&WG(h,r.layout);var d=i.data;if(NG(d)){for(o in r.data)if(s=d[o],Array.isArray(s)){for(u=(c=r.data[o]).length,l=s.length,a=0;a<u;a++)WG(s[a%l],c[a]);for(a=u;a<l;a++)c.push(MG.extendDeep({},s[a]))}for(o in d)o in r.data||(r.data[o]=MG.extendDeep([],d[o]))}}return r},TG.validateTemplate=function(t,e){var n=MG.extendDeep({},{_context:HG,data:t.data,layout:t.layout}),r=n.layout||{};NG(e)||(e=r.template||{});var i=e.layout,a=e.data,o=[];n.layout=r,n.layout.template=e,XG.supplyDefaults(n);var s=n._fullLayout,l=n._fullData,c={};if(NG(i)?(!function t(e,n){for(var r in e)if("_"!==r.charAt(0)&&NG(e[r])){var i,a=YG(r),o=[];for(i=0;i<n.length;i++)o.push(PG(e,r,n[i])),a!==r&&o.push(PG(e,a,n[i]));for(i=0;i<o.length;i++)c[o[i]]=1;t(e[r],o)}}(s,["layout"]),function t(e,n){for(var r in e)if(-1===r.indexOf("defaults")&&NG(e[r])){var i=PG(e,r,n);c[i]?t(e[r],i):o.push({code:"unused",path:i})}}(i,"layout")):o.push({code:"layout"}),NG(a)){for(var u,h={},d=0;d<l.length;d++){var g=l[d];h[u=g.type]=(h[u]||0)+1,g._fullInput._template||o.push({code:"missing",index:g._fullInput.index,traceType:u})}for(u in a){var f=a[u].length,p=h[u]||0;f>p?o.push({code:"unused",traceType:u,templateCount:f,dataCount:p}):p>f&&o.push({code:"reused",traceType:u,templateCount:f,dataCount:p})}}else o.push({code:"data"});if(function t(e,n){for(var r in e)if("_"!==r.charAt(0)){var i=e[r],a=PG(e,r,n);NG(i)?(Array.isArray(e)&&!1===i._template&&i.templateitemname&&o.push({code:"missing",path:a,templateitemname:i.templateitemname}),t(i,a)):Array.isArray(i)&&jG(i)&&t(i,a)}}({data:l,layout:s},""),o.length)return o.map(KG)};var qG=Cf;Qf._doPlot=qG._doPlot,Qf.newPlot=qG.newPlot,Qf.restyle=qG.restyle,Qf.relayout=qG.relayout,Qf.redraw=qG.redraw,Qf.update=qG.update,Qf._guiRestyle=qG._guiRestyle,Qf._guiRelayout=qG._guiRelayout,Qf._guiUpdate=qG._guiUpdate,Qf._storeDirectGUIEdit=qG._storeDirectGUIEdit,Qf.react=qG.react,Qf.extendTraces=qG.extendTraces,Qf.prependTraces=qG.prependTraces,Qf.addTraces=qG.addTraces,Qf.deleteTraces=qG.deleteTraces,Qf.moveTraces=qG.moveTraces,Qf.purge=qG.purge,Qf.addFrames=qG.addFrames,Qf.deleteFrames=qG.deleteFrames,Qf.animate=qG.animate,Qf.setPlotConfig=qG.setPlotConfig;var $G=$h.getGraphDiv,t_=Dw.eraseActiveShape;Qf.deleteActiveShape=function(t){return t_($G(t))},Qf.toImage=dG,Qf.validate=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var n,r,i=pG.get(),a=[],o={_context:gG.extendFlat({},vG)};yG(t)?(o.data=gG.extendDeep([],t),n=t):(o.data=[],n=[],a.push(FG("array","data"))),mG(e)?(o.layout=gG.extendDeep({},e),r=e):(o.layout={},r={},arguments.length>1&&a.push(FG("object","layout"))),fG.supplyDefaults(o);for(var s=o._fullData,l=n.length,c=0;c<l;c++){var u=n[c],h=["data",c];if(mG(u)){var d=s[c],g=d.type,f=i.traces[g].attributes;f.type={valType:"enumerated",values:[g]},!1===d.visible&&!1!==u.visible&&a.push(FG("invisible",h)),xG(u,d,f,a,h);var p=u.transforms,v=d.transforms;if(p){yG(p)||a.push(FG("array",h,["transforms"])),h.push("transforms");for(var m=0;m<p.length;m++){var y=["transforms",m],b=p[m].type;if(mG(p[m])){var x=i.transforms[b]?i.transforms[b].attributes:{};x.type={valType:"enumerated",values:Object.keys(i.transforms)},xG(p[m],v[m],x,a,h,y)}else a.push(FG("object",h,y))}}}else a.push(FG("object",h))}var B=o._fullLayout,I=function(t,e){for(var n=t.layout.layoutAttributes,r=0;r<e.length;r++){var i=e[r],a=t.traces[i.type],o=a.layoutAttributes;o&&(i.subplot?gG.extendFlat(n[a.attributes.subplot.dflt],o):gG.extendFlat(n,o))}return n}(i,s);return xG(r,B,I,a,"layout"),0===a.length?void 0:a},Qf.downloadImage=EG;var e_=TG;Qf.makeTemplate=e_.makeTemplate,Qf.validateTemplate=e_.validateTemplate;var n_=yf,r_=hh,i_=function(t,e,n,r){var i,a=r("x"),o=r("y");if(r_.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],n),a){var s=n_.minRowLength(a);o?i=Math.min(s,n_.minRowLength(o)):(i=s,r("y0"),r("dy"))}else{if(!o)return 0;i=n_.minRowLength(o),r("x0"),r("dx")}return e._length=i,i},a_=yf.dateTick0,o_=Sc.ONEWEEK;function s_(t,e){return a_(e,t%o_==0?1:0)}var l_=function(t,e,n,r,i){if(i||(i={x:!0,y:!0}),i.x){var a=r("xperiod");a&&(r("xperiod0",s_(a,e.xcalendar)),r("xperiodalignment"))}if(i.y){var o=r("yperiod");o&&(r("yperiod0",s_(o,e.ycalendar)),r("yperiodalignment"))}},c_=["orientation","groupnorm","stackgaps"],u_=Pu,h_=mv.hasColorscale,d_=ty,g_=py,f_=function(t,e,n,r,i,a){var o=g_.isBubble(t),s=(t.line||{}).color;(a=a||{},s&&(n=s),i("marker.symbol"),i("marker.opacity",o?.7:1),i("marker.size"),a.noAngle||(i("marker.angle"),a.noAngleRef||i("marker.angleref"),a.noStandOff||i("marker.standoff")),i("marker.color",n),h_(t,"marker")&&d_(t,e,r,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&e.marker.color!==s?s:o?u_.background:u_.defaultLine),h_(t,"marker.line")&&d_(t,e,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",o?1:0)),o&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient)&&("none"!==i("marker.gradient.type")&&i("marker.gradient.color"))},p_=yf.isArrayOrTypedArray,v_=mv.hasColorscale,m_=ty,y_=function(t,e,n,r,i,a){a||(a={});var o=(t.marker||{}).color;(o&&o._inputArray&&(o=o._inputArray),i("line.color",n),v_(t,"line"))?m_(t,e,r,i,{prefix:"line.",cLetter:"c"}):i("line.color",!p_(o)&&o||n);i("line.width"),a.noDash||i("line.dash"),a.backoff&&i("line.backoff")},b_=yf,x_=function(t,e,n,r,i){i=i||{},r("textposition"),b_.coerceFont(r,"textfont",i.font||n.font,i),i.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))},B_=Pu,I_=yf.isArrayOrTypedArray;var F_=yf,Q_=hh,C_=xL,w_=aL,U_=py,A_=i_,S_=l_,L_=function(t,e,n,r){var i=n._scatterStackOpts,a=r("stackgroup");if(a){var o=e.xaxis+e.yaxis,s=i[o];s||(s=i[o]={});var l=s[a],c=!1;l?l.traces.push(e):(l=s[a]={traceIndices:[],traces:[e]},c=!0);for(var u={orientation:e.x&&!e.y?"h":"v"},h=0;h<c_.length;h++){var d=c_[h],g=d+"Found";if(!l[g]){var f=void 0!==t[d],p="orientation"===d;if((f||c)&&(l[d]=r(d,u[d]),p&&(l.fillDflt="h"===l[d]?"tonextx":"tonexty"),f&&(l[g]=!0,!c&&(delete l.traces[0][d],p))))for(var v=0;v<l.traces.length-1;v++){var m=l.traces[v];m._input.fill!==m.fill&&(m.fill=l.fillDflt)}}}return l}},k_=f_,G_=y_,__=function(t,e,n){"spline"===n("line.shape")&&n("line.smoothing")},R_=x_,E_=function(t,e,n,r,i){i||(i={});var a,o=!1;if(e.marker){var s=e.marker.color,l=(e.marker.line||{}).color;s&&!I_(s)?o=s:l&&!I_(l)&&(o=l)}if(i.moduleHasFillgradient&&"none"!==r("fillgradient.type")){r("fillgradient.start"),r("fillgradient.stop");var c=r("fillgradient.colorscale");c&&(a=function(t){for(var e=B_.interpolate(t[0][1],t[1][1],.5),n=2;n<t.length;n++){var r=B_.interpolate(t[n-1][1],t[n][1],.5);e=B_.interpolate(e,r,t[n-1][0]/t[n][0])}return e}(c))}r("fillcolor",B_.addOpacity((e.line||{}).color||o||a||n,.5))},T_=yf.coercePattern,M_=ZU.getAxisGroup,N_=function(t,e,n,r){var i=e.orientation,a=e[{v:"x",h:"y"}[i]+"axis"],o=M_(n,a)+i,s=n._alignmentOpts||{},l=r("alignmentgroup"),c=s[o];c||(c=s[o]={});var u=c[l];u?u.traces.push(e):u=c[l]={traces:[e],alignmentIndex:Object.keys(c).length,offsetGroups:{}};var h=r("offsetgroup"),d=u.offsetGroups,g=d[h];h&&(g||(g=d[h]={offsetIndex:Object.keys(d).length}),e._offsetIndex=g.offsetIndex)},D_=yf,X_=N_,Z_=xL,V_=yf,H_=up,W_=Ac,Y_=yf,z_=Y_.dateTime2ms,O_=Y_.incrementMonth,J_=Sc.ONEAVGMONTH,P_=mv.hasColorscale,j_=hy,K_=py,q_=function(t,e){K_.hasLines(e)&&P_(e,"line")&&j_(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),K_.hasMarkers(e)&&(P_(e,"marker")&&j_(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),P_(e,"marker.line")&&j_(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))},$_=yf,tR=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;$_.mergeArray(e.text,t,"tx"),$_.mergeArray(e.texttemplate,t,"txt"),$_.mergeArray(e.hovertext,t,"htx"),$_.mergeArray(e.customdata,t,"data"),$_.mergeArray(e.textposition,t,"tp"),e.textfont&&($_.mergeArrayCastPositive(e.textfont.size,t,"ts"),$_.mergeArray(e.textfont.color,t,"tc"),$_.mergeArray(e.textfont.family,t,"tf"),$_.mergeArray(e.textfont.weight,t,"tw"),$_.mergeArray(e.textfont.style,t,"ty"),$_.mergeArray(e.textfont.variant,t,"tv"));var r=e.marker;if(r){$_.mergeArrayCastPositive(r.size,t,"ms"),$_.mergeArrayCastPositive(r.opacity,t,"mo"),$_.mergeArray(r.symbol,t,"mx"),$_.mergeArray(r.angle,t,"ma"),$_.mergeArray(r.standoff,t,"mf"),$_.mergeArray(r.color,t,"mc");var i=r.line;r.line&&($_.mergeArray(i.color,t,"mlc"),$_.mergeArrayCastPositive(i.width,t,"mlw"));var a=r.gradient;a&&"none"!==a.type&&($_.mergeArray(a.type,t,"mgt"),$_.mergeArray(a.color,t,"mgc"))}},eR=yf,nR=Ac,rR=yf,iR=iI,aR=function(t,e,n,r){if("date"!==e.type)return{vals:r};var i=t[n+"periodalignment"];if(!i)return{vals:r};var a,o=t[n+"period"];if(W_(o)){if((o=+o)<=0)return{vals:r}}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(s>0&&Math.round(s)===s))return{vals:r};a=s}for(var l=e.calendar,c="start"===i,u="end"===i,h=t[n+"period0"],d=z_(h,l)||0,g=[],f=[],p=[],v=r.length,m=0;m<v;m++){var y,b,x,B=r[m];if(a){for(y=Math.round((B-d)/(a*J_)),x=O_(d,a*y,l);x>B;)x=O_(x,-a,l);for(;x<=B;)x=O_(x,a,l);b=O_(x,-a,l)}else{for(x=d+(y=Math.round((B-d)/o))*o;x>B;)x-=o;for(;x<=B;)x+=o;b=x-o}g[m]=c?b:u?x:(b+x)/2,f[m]=b,p[m]=x}return{vals:g,starts:f,ends:p}},oR=Sc.BADNUM,sR=py,lR=q_,cR=tR,uR=function(t,e){eR.isArrayOrTypedArray(e.selectedpoints)&&eR.tagSelected(t,e)};function hR(t,e,n,r,i,a,o){var s=e._length,l=t._fullLayout,c=n._id,u=r._id,h=l._firstScatter[fR(e)]===e.uid,d=(pR(e,l,n,r)||{}).orientation,g=e.fill;n._minDtick=0,r._minDtick=0;var f={padded:!0},p={padded:!0};o&&(f.ppad=p.ppad=o);var v=s<2||i[0]!==i[s-1]||a[0]!==a[s-1];v&&("tozerox"===g||"tonextx"===g&&(h||"h"===d))?f.tozero=!0:(e.error_y||{}).visible||"tonexty"!==g&&"tozeroy"!==g&&(sR.hasMarkers(e)||sR.hasText(e))||(f.padded=!1,f.ppad=0),v&&("tozeroy"===g||"tonexty"===g&&(h||"v"===d))?p.tozero=!0:"tonextx"!==g&&"tozerox"!==g||(p.padded=!1),c&&(e._extremes[c]=iR.findExtremes(n,i,f)),u&&(e._extremes[u]=iR.findExtremes(r,a,p))}function dR(t,e){if(sR.hasMarkers(t)){var n,r=t.marker,i=1.6*(t.marker.sizeref||1);if(n="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/i),3)}:function(t){return Math.max((t||0)/i,3)},rR.isArrayOrTypedArray(r.size)){var a={type:"linear"};iR.setConvert(a);for(var o=a.makeCalcdata(t.marker,"size"),s=new Array(e),l=0;l<e;l++)s[l]=n(o[l]);return s}return n(r.size)}}function gR(t,e){var n=fR(e),r=t._firstScatter;r[n]||(r[n]=e.uid)}function fR(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function pR(t,e,n,r){var i=t.stackgroup;if(i){var a=e._scatterStackOpts[n._id+r._id][i],o="v"===a.orientation?r:n;return"linear"===o.type||"log"===o.type?a:void 0}}var vR={calc:function(t,e){var n,r,i,a,o,s,l=t._fullLayout,c=e._xA=iR.getFromId(t,e.xaxis||"x","x"),u=e._yA=iR.getFromId(t,e.yaxis||"y","y"),h=c.makeCalcdata(e,"x"),d=u.makeCalcdata(e,"y"),g=aR(e,c,"x",h),f=aR(e,u,"y",d),p=g.vals,v=f.vals,m=e._length,y=new Array(m),b=e.ids,x=pR(e,l,c,u),B=!1;gR(l,e);var I,F="x",Q="y";x?(rR.pushUnique(x.traceIndices,e._expandedIndex),(n="v"===x.orientation)?(Q="s",I="x"):(F="s",I="y"),o="interpolate"===x.stackgaps):hR(t,e,c,u,p,v,dR(e,m));var C=!!e.xperiodalignment,w=!!e.yperiodalignment;for(r=0;r<m;r++){var U=y[r]={},A=nR(p[r]),S=nR(v[r]);A&&S?(U[F]=p[r],U[Q]=v[r],C&&(U.orig_x=h[r],U.xEnd=g.ends[r],U.xStart=g.starts[r]),w&&(U.orig_y=d[r],U.yEnd=f.ends[r],U.yStart=f.starts[r])):x&&(n?A:S)?(U[I]=n?p[r]:v[r],U.gap=!0,o?(U.s=oR,B=!0):U.s=0):U[F]=U[Q]=oR,b&&(U.id=String(b[r]))}if(cR(y,e),lR(t,e),uR(y,e),x){for(r=0;r<y.length;)y[r][I]===oR?y.splice(r,1):r++;if(rR.sort(y,(function(t,e){return t[I]-e[I]||t.i-e.i})),B){for(r=0;r<y.length-1&&y[r].gap;)r++;for((s=y[r].s)||(s=y[r].s=0),i=0;i<r;i++)y[i].s=s;for(a=y.length-1;a>r&&y[a].gap;)a--;for(s=y[a].s,i=y.length-1;i>a;i--)y[i].s=s;for(;r<a;)if(y[++r].gap){for(i=r+1;y[i].gap;)i++;for(var L=y[r-1][I],k=y[r-1].s,G=(y[i].s-k)/(y[i][I]-L);r<i;)y[r].s=k+(y[r][I]-L)*G,r++}}}return y},calcMarkerSize:dR,calcAxisExpansion:hR,setFirstScatter:gR,getStackOpts:pR},mR=bR,yR=yf.distinctVals;function bR(t,e){this.traces=t,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var n=1/0,r=e.posAxis._id.charAt(0),i=[],a=0;a<t.length;a++){for(var o=t[a],s=0;s<o.length;s++){var l=o[s],c=l.p;void 0===c&&(c=l[r]),void 0!==c&&i.push(c)}o[0]&&o[0].width1&&(n=Math.min(o[0].width1,n))}this.positions=i;var u=yR(i);this.distinctPositions=u.vals,1===u.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(u.minDiff,n);var h=(e.posAxis||{}).type;"category"!==h&&"multicategory"!==h||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}bR.prototype.put=function(t,e){var n=this.getLabel(t,e),r=this.bins[n]||0;return this.bins[n]=r+e,r},bR.prototype.get=function(t,e){var n=this.getLabel(t,e);return this.bins[n]||0},bR.prototype.getLabel=function(t,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?t:Math.round(t/this.binWidth))};var xR=Ac,BR=yf.isArrayOrTypedArray,IR=Sc.BADNUM,FR=hh,QR=iI,CR=ZU.getAxisGroup,wR=mR;function UR(t,e,n,r,i){if(r.length){var a,o,s,l;switch(function(t,e){var n,r;for(n=0;n<e.length;n++){var i,a=e[n],o=a[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,c="category"===t.type||"multicategory"===t.type?function(){return null}:t.d2c;if(BR(s)){for(r=0;r<Math.min(s.length,a.length);r++)i=c(s[r],0,l),xR(i)?(a[r].b=+i,a[r].hasB=1):a[r].b=0;for(;r<a.length;r++)a[r].b=0}else{i=c(s,0,l);var u=xR(i);for(i=u?i:0,r=0;r<a.length;r++)a[r].b=i,u&&(a[r].hasB=1)}}}(n,r),i.mode){case"overlay":AR(e,n,r,i);break;case"group":for(a=[],o=[],s=0;s<r.length;s++)void 0===(l=r[s])[0].trace.offset?o.push(l):a.push(l);o.length&&function(t,e,n,r,i){var a=new wR(r,{posAxis:e,sepNegVal:!1,overlapNoMerge:!i.norm});(function(t,e,n,r){for(var i=t._fullLayout,a=n.positions,o=n.distinctPositions,s=n.minDiff,l=n.traces,c=l.length,u=a.length!==o.length,h=s*(1-r.gap),d=CR(i,e._id)+l[0][0].trace.orientation,g=i._alignmentOpts[d]||{},f=0;f<c;f++){var p,v,m=l[f],y=m[0].trace,b=g[y.alignmentgroup]||{},x=Object.keys(b.offsetGroups||{}).length,B=(p=x?h/x:u?h/c:h)*(1-(r.groupgap||0));v=x?((2*y._offsetIndex+1-x)*p-B)/2:u?((2*f+1-c)*p-B)/2:-B/2;var I=m[0].t;I.barwidth=B,I.poffset=v,I.bargroupwidth=h,I.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,LR(n),kR(e,n),GR(e,n,u)})(t,e,a,i),function(t,e){for(var n=t.traces,r=0;r<n.length;r++){var i=n[r];if(void 0===i[0].trace.base)for(var a=new wR([i],{posAxis:e,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<i.length;o++){var s=i[o];if(s.p!==IR){var l=a.put(s.p,s.b+s.s);l&&(s.b=l)}}}}(a,e),i.norm?(RR(a),ER(n,a,i)):_R(n,a)}(t,e,n,o,i),a.length&&AR(e,n,a,i);break;case"stack":case"relative":for(a=[],o=[],s=0;s<r.length;s++)void 0===(l=r[s])[0].trace.base?o.push(l):a.push(l);!function(t){if(t.length<2)return;var e,n,r,i,a,o;for(e=0;e<t.length&&void 0===(i=(n=t[e][0].trace).marker?n.marker.cornerradius:void 0);e++);if(void 0!==i)for(a=xR(i)?+i:+i.slice(0,-1),o=xR(i)?"px":"%",e=0;e<t.length;e++)(r=t[e][0].t).cornerradiusvalue=a,r.cornerradiusform=o}(o),o.length&&function(t,e,n,r,i){var a=new wR(r,{posAxis:e,sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});SR(e,a,i),function(t,e,n){var r,i,a,o,s,l,c=TR(t),u=e.traces;for(o=0;o<u.length;o++)if("funnel"===(i=(r=u[o])[0].trace).type)for(s=0;s<r.length;s++)(l=r[s]).s!==IR&&e.put(l.p,-.5*l.s);for(o=0;o<u.length;o++){a="funnel"===(i=(r=u[o])[0].trace).type;var h=[];for(s=0;s<r.length;s++)if((l=r[s]).s!==IR){var d;d=a?l.s:l.s+l.b;var g=e.put(l.p,d),f=g+d;l.b=g,l[c]=f,n.norm||(h.push(f),l.hasB&&h.push(g))}n.norm||(i._extremes[t._id]=QR.findExtremes(t,h,{tozero:!0,padded:!0}))}}(n,a,i);for(var o=0;o<r.length;o++)for(var s=r[o],l=0;l<s.length;l++){var c=s[l];if(c.s!==IR)c.b+c.s===a.get(c.p,c.s)&&(c._outmost=!0)}i.norm&&ER(n,a,i)}(0,e,n,o,i),a.length&&AR(e,n,a,i)}!function(t){var e,n,r,i,a,o,s;for(e=0;e<t.length;e++)r=(n=t[e])[0].trace,void 0===(i=n[0].t).cornerradiusvalue&&void 0!==(a=r.marker?r.marker.cornerradius:void 0)&&(o=xR(a)?+a:+a.slice(0,-1),s=xR(a)?"px":"%",i.cornerradiusvalue=o,i.cornerradiusform=s)}(r),function(t,e){var n,r,i,a=TR(e),o={},s=1/0,l=-1/0;for(n=0;n<t.length;n++)for(i=t[n],r=0;r<i.length;r++){var c=i[r].p;xR(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),h=o.round=function(t){return String(Math.round(u*(t-s)))},d={},g={},f=t.some((function(t){var e=t[0].trace;return"marker"in e&&e.marker.cornerradius}));for(n=0;n<t.length;n++){(i=t[n])[0].t.extents=o;var p=i[0].t.poffset,v=BR(p);for(r=0;r<i.length;r++){var m=i[r],y=m[a]-m.w/2;if(xR(y)){var b=m[a]+m.w/2,x=h(m.p);o[x]?o[x]=[Math.min(y,o[x][0]),Math.max(b,o[x][1])]:o[x]=[y,b]}if(m.p0=m.p+(v?p[r]:p),m.p1=m.p0+m.w,m.s0=m.b,m.s1=m.s0+m.s,f){var B=Math.min(m.s0,m.s1)||0,I=Math.max(m.s0,m.s1)||0,F=m[a];d[F]=F in d?Math.min(d[F],B):B,g[F]=F in g?Math.max(g[F],I):I}}}f&&function(t,e,n,r){for(var i=TR(r),a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.length;s++){var l=o[s],c=l[i];l._sMin=e[c],l._sMax=n[c]}}(t,d,g,e)}(r,e)}}function AR(t,e,n,r){for(var i=0;i<n.length;i++){var a=n[i],o=new wR([a],{posAxis:t,sepNegVal:!1,overlapNoMerge:!r.norm});SR(t,o,r),r.norm?(RR(o),ER(e,o,r)):_R(e,o)}}function SR(t,e,n){for(var r=e.minDiff,i=e.traces,a=r*(1-n.gap),o=a*(1-(n.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=a,c.bardelta=r}e.binWidth=i[0][0].t.barwidth/100,LR(e),kR(t,e),GR(t,e)}function LR(t){var e,n,r=t.traces;for(e=0;e<r.length;e++){var i,a=r[e],o=a[0],s=o.trace,l=o.t,c=s._offset||s.offset,u=l.poffset;if(BR(c)){for(i=Array.prototype.slice.call(c,0,a.length),n=0;n<i.length;n++)xR(i[n])||(i[n]=u);for(n=i.length;n<a.length;n++)i.push(u);l.poffset=i}else void 0!==c&&(l.poffset=c);var h=s._width||s.width,d=l.barwidth;if(BR(h)){var g=Array.prototype.slice.call(h,0,a.length);for(n=0;n<g.length;n++)xR(g[n])||(g[n]=d);for(n=g.length;n<a.length;n++)g.push(d);if(l.barwidth=g,void 0===c){for(i=[],n=0;n<a.length;n++)i.push(u+(d-g[n])/2);l.poffset=i}}else void 0!==h&&(l.barwidth=h,void 0===c&&(l.poffset=u+(d-h)/2))}}function kR(t,e){for(var n=e.traces,r=TR(t),i=0;i<n.length;i++)for(var a=n[i],o=a[0].t,s=o.poffset,l=BR(s),c=o.barwidth,u=BR(c),h=0;h<a.length;h++){var d=a[h],g=d.w=u?c[h]:c;void 0===d.p&&(d.p=d[r],d["orig_"+r]=d[r]);var f=(l?s[h]:s)+g/2;d[r]=d.p+f}}function GR(t,e,n){var r=e.traces,i=e.minDiff/2;QR.minDtick(t,e.minDiff,e.distinctPositions[0],n);for(var a=0;a<r.length;a++){var o,s,l,c,u=r[a],h=u[0],d=h.trace,g=[];for(c=0;c<u.length;c++)s=(o=u[c]).p-i,l=o.p+i,g.push(s,l);if(d.width||d.offset){var f=h.t,p=f.poffset,v=f.barwidth,m=BR(p),y=BR(v);for(c=0;c<u.length;c++){o=u[c];var b=m?p[c]:p,x=y?v[c]:v;l=(s=o.p+b)+x,g.push(s,l)}}d._extremes[t._id]=QR.findExtremes(t,g,{padded:!1})}}function _R(t,e){for(var n=e.traces,r=TR(t),i=0;i<n.length;i++){for(var a=n[i],o=a[0].trace,s="scatter"===o.type,l="v"===o.orientation,c=[],u=!1,h=0;h<a.length;h++){var d=a[h],g=s?0:d.b,f=s?l?d.y:d.x:g+d.s;d[r]=f,c.push(f),d.hasB&&c.push(g),d.hasB&&d.b||(u=!0)}o._extremes[t._id]=QR.findExtremes(t,c,{tozero:u,padded:!0})}}function RR(t){for(var e=t.traces,n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++){var a=r[i];a.s!==IR&&t.put(a.p,a.b+a.s)}}function ER(t,e,n){var r=e.traces,i=TR(t),a="fraction"===n.norm?1:100,o=a/1e9,s=t.l2c(t.c2l(0)),l="stack"===n.mode?a:s;function c(e){return xR(t.c2l(e))&&(e<s-o||e>l+o||!xR(s))}for(var u=0;u<r.length;u++){for(var h=r[u],d=h[0].trace,g=[],f=!1,p=!1,v=0;v<h.length;v++){var m=h[v];if(m.s!==IR){var y=Math.abs(a/e.get(m.p,m.s));m.b*=y,m.s*=y;var b=m.b,x=b+m.s;m[i]=x,g.push(x),p=p||c(x),m.hasB&&(g.push(b),p=p||c(b)),m.hasB&&m.b||(f=!0)}}d._extremes[t._id]=QR.findExtremes(t,g,{tozero:f,padded:p})}}function TR(t){return t._id.charAt(0)}var MR={crossTraceCalc:function(t,e){for(var n=e.xaxis,r=e.yaxis,i=t._fullLayout,a=t._fullData,o=t.calcdata,s=[],l=[],c=0;c<a.length;c++){var u=a[c];if(!0===u.visible&&FR.traceIs(u,"bar")&&u.xaxis===n._id&&u.yaxis===r._id&&("h"===u.orientation?s.push(o[c]):l.push(o[c]),u._computePh))for(var h=t.calcdata[c],d=0;d<h.length;d++)"function"==typeof h[d].ph0&&(h[d].ph0=h[d].ph0()),"function"==typeof h[d].ph1&&(h[d].ph1=h[d].ph1())}var g={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};UR(t,n,r,l,g),UR(t,r,n,s,g)},setGroupPositions:UR},NR=vR,DR=MR.setGroupPositions;function XR(t,e,n,r,i,a,o){i[r]=!0;var s={i:null,gap:!0,s:0};if(s[o]=n,t.splice(e,0,s),e&&n===t[e-1][o]){var l=t[e-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=function(t,e,n,r){var i=t[e-1],a=t[e+1];return a?i?i.s+(a.s-i.s)*(n-i[r])/(a[r]-i[r]):a.s:i.s}(t,e,n,o));e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}var ZR=Qb,VR=Sc,HR=VR.BADNUM,WR=VR.LOG_CLIP,YR=WR+.5,zR=WR-.5,OR=yf,JR=OR.segmentsIntersect,PR=OR.constrain,jR=aL,KR={tonextx:1,tonexty:1,tonext:1},qR=uo,$R=hh,tE=yf,eE=tE.ensureSingle,nE=tE.identity,rE=Qb,iE=py,aE=function(t,e){var n,r,i,a,o,s,l,c,u,h,d,g,f,p,v,m,y,b,x=e.trace||{},B=e.xaxis,I=e.yaxis,F="log"===B.type,Q="log"===I.type,C=B._length,w=I._length,U=e.backoff,A=x.marker,S=e.connectGaps,L=e.baseTolerance,k=e.shape,G="linear"===k,_=x.fill&&"none"!==x.fill,R=[],E=jR.minTolerance,T=t.length,M=new Array(T),N=0;function D(n){var r=t[n];if(!r)return!1;var i=e.linearized?B.l2p(r.x):B.c2p(r.x),a=e.linearized?I.l2p(r.y):I.c2p(r.y);if(i===HR){if(F&&(i=B.c2p(r.x,!0)),i===HR)return!1;Q&&a===HR&&(i*=Math.abs(B._m*w*(B._m>0?YR:zR)/(I._m*C*(I._m>0?YR:zR)))),i*=1e3}if(a===HR){if(Q&&(a=I.c2p(r.y,!0)),a===HR)return!1;a*=1e3}return[i,a]}function X(t,e,n,r){var i=n-t,a=r-e,o=.5-t,s=.5-e,l=i*i+a*a,c=i*o+a*s;if(c>0&&c<l){var u=o*a-s*i;if(u*u<l)return!0}}function Z(t,e){var n=t[0]/C,r=t[1]/w,i=Math.max(0,-n,n-1,-r,r-1);return i&&void 0!==y&&X(n,r,y,b)&&(i=0),i&&e&&X(n,r,e[0]/C,e[1]/w)&&(i=0),(1+jR.toleranceGrowth*i)*L}function V(t,e){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}var H,W,Y,z,O,J,P,j=jR.maxScreensAway,K=-C*j,q=C*(1+j),$=-w*j,tt=w*(1+j),et=[[K,$,q,$],[q,$,q,tt],[q,tt,K,tt],[K,tt,K,$]];function nt(t){if(t[0]<K||t[0]>q||t[1]<$||t[1]>tt)return[PR(t[0],K,q),PR(t[1],$,tt)]}function rt(t,e){return t[0]===e[0]&&(t[0]===K||t[0]===q)||(t[1]===e[1]&&(t[1]===$||t[1]===tt)||void 0)}function it(t,e,n){return function(r,i){var a=nt(r),o=nt(i),s=[];if(a&&o&&rt(a,o))return s;a&&s.push(a),o&&s.push(o);var l=2*OR.constrain((r[t]+i[t])/2,e,n)-((a||r)[t]+(o||i)[t]);l&&((a&&o?l>0==a[t]>o[t]?a:o:a||o)[t]+=l);return s}}function at(t){var e=t[0],n=t[1],r=e===M[N-1][0],i=n===M[N-1][1];if(!r||!i)if(N>1){var a=e===M[N-2][0],o=n===M[N-2][1];r&&(e===K||e===q)&&a?o?N--:M[N-1]=t:i&&(n===$||n===tt)&&o?a?N--:M[N-1]=t:M[N++]=t}else M[N++]=t}function ot(t){M[N-1][0]!==t[0]&&M[N-1][1]!==t[1]&&at([Y,z]),at(t),O=null,Y=z=0}"linear"===k||"spline"===k?P=function(t,e){for(var n=[],r=0,i=0;i<4;i++){var a=et[i],o=JR(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);o&&(!r||Math.abs(o.x-n[0][0])>1||Math.abs(o.y-n[0][1])>1)&&(o=[o.x,o.y],r&&V(o,t)<V(n[0],t)?n.unshift(o):n.push(o),r++)}return n}:"hv"===k||"vh"===k?P=function(t,e){var n=[],r=nt(t),i=nt(e);return r&&i&&rt(r,i)||(r&&n.push(r),i&&n.push(i)),n}:"hvh"===k?P=it(0,K,q):"vhv"===k&&(P=it(1,$,tt));var st=OR.isArrayOrTypedArray(A);function lt(e){if(e&&U&&(e.i=n,e.d=t,e.trace=x,e.marker=st?A[e.i]:A,e.backoff=U),y=e[0]/C,b=e[1]/w,H=e[0]<K?K:e[0]>q?q:0,W=e[1]<$?$:e[1]>tt?tt:0,H||W){if(N)if(O){var r=P(O,e);r.length>1&&(ot(r[0]),M[N++]=r[1])}else J=P(M[N-1],e)[0],M[N++]=J;else M[N++]=[H||e[0],W||e[1]];var i=M[N-1];H&&W&&(i[0]!==H||i[1]!==W)?(O&&(Y!==H&&z!==W?at(Y&&z?function(t,e){var n=e[0]-t[0],r=(e[1]-t[1])/n;return(t[1]*e[0]-e[1]*t[0])/n>0?[r>0?K:q,tt]:[r>0?q:K,$]}(O,e):[Y||H,z||W]):Y&&z&&at([Y,z])),at([H,W])):Y-H&&z-W&&at([H||Y,W||z]),O=e,Y=H,z=W}else O&&ot(P(O,e)[0]),M[N++]=e}for(n=0;n<T;n++)if(r=D(n)){for(N=0,O=null,lt(r),n++;n<T;n++){if(!(a=D(n))){if(S)continue;break}if(G&&e.simplify){var ct=D(n+1);if(h=V(a,r),_&&(0===N||N===T-1)||!(h<Z(a,ct)*E)){for(c=[(a[0]-r[0])/h,(a[1]-r[1])/h],o=r,d=h,g=p=v=0,l=!1,i=a,n++;n<t.length;n++){if(s=ct,ct=D(n+1),!s){if(S)continue;break}if(m=(u=[s[0]-r[0],s[1]-r[1]])[0]*c[1]-u[1]*c[0],p=Math.min(p,m),(v=Math.max(v,m))-p>Z(s,ct))break;i=s,(f=u[0]*c[0]+u[1]*c[1])>d?(d=f,a=s,l=!1):f<g&&(g=f,o=s,l=!0)}if(l?(lt(a),i!==o&&lt(o)):(o!==r&&lt(o),i!==a&&lt(a)),lt(i),n>=t.length||!s)break;lt(s),r=s}}else lt(a)}O&&at([Y||O[0],z||O[1]]),R.push(M.slice(0,N))}var ut=k.slice(k.length-1);if(U&&"h"!==ut&&"v"!==ut){for(var ht=!1,dt=-1,gt=[],ft=0;ft<R.length;ft++)for(var pt=0;pt<R[ft].length-1;pt++){var vt=R[ft][pt],mt=R[ft][pt+1],yt=ZR.applyBackoff(mt,vt);yt[0]===mt[0]&&yt[1]===mt[1]||(ht=!0),gt[dt+1]||(gt[++dt]=[vt,[yt[0],yt[1]]])}return ht?gt:R}return R},oE=function(t,e,n){var r,i,a,o,s,l={},c=!1,u=-1,h=0,d=-1;for(i=0;i<n.length;i++)(a=(r=n[i][0].trace).stackgroup||"")?a in l?s=l[a]:(s=l[a]=h,h++):r.fill in KR&&d>=0?s=d:(s=d=h,h++),s<u&&(c=!0),r._groupIndex=u=s;var g=n.slice();c&&g.sort((function(t,e){var n=t[0].trace,r=e[0].trace;return n._groupIndex-r._groupIndex||n.index-r.index}));var f={};for(i=0;i<g.length;i++)a=(r=g[i][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in KR&&(o=f[a],r._prevtrace=o||null,o&&(o._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),f[a]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return g},sE=ZA.tester;function lE(t,e,n,r,i,a,o){var s,l=t._context.staticPlot;!function(t,e,n,r,i){var a=n.xaxis,o=n.yaxis,s=qR.extent(tE.simpleMap(a.range,a.r2c)),l=qR.extent(tE.simpleMap(o.range,o.r2c)),c=r[0].trace;if(!iE.hasMarkers(c))return;var u=c.marker.maxdisplayed;if(0===u)return;var h=r.filter((function(t){return t.x>=s[0]&&t.x<=s[1]&&t.y>=l[0]&&t.y<=l[1]})),d=Math.ceil(h.length/u),g=0;i.forEach((function(t,n){var r=t[0].trace;iE.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<e&&g++}));var f=Math.round(g*d/3+Math.floor(g/3)*d/7.1);r.forEach((function(t){delete t.vis})),h.forEach((function(t,e){0===Math.round((e+f)%d)&&(t.vis=!0)}))}(0,e,n,r,i);var c=!!o&&o.duration>0;function u(t){return c?t.transition():t}var h=n.xaxis,d=n.yaxis,g=r[0].trace,f=g.line,p=qR.select(a),v=eE(p,"g","errorbars"),m=eE(p,"g","lines"),y=eE(p,"g","points"),b=eE(p,"g","text");if($R.getComponentMethod("errorbars","plot")(t,v,n,o),!0===g.visible){var x,B;u(p).style("opacity",g.opacity);var I,F,Q=g.fill.charAt(g.fill.length-1);"x"!==Q&&"y"!==Q&&(Q=""),"y"===Q?(I=1,F=d.c2p(0,!0)):"x"===Q&&(I=0,F=h.c2p(0,!0)),r[0][n.isRangePlot?"nodeRangePlot3":"node3"]=p;var C,w,U="",A=[],S=g._prevtrace,L=null,k=null;S&&(U=S._prevRevpath||"",B=S._nextFill,A=S._ownPolygons,L=S._fillsegments,k=S._fillElement);var G,_,R,E,T,M,N="",D="",X=[];g._polygons=[];var Z=[],V=[],H=tE.noop;if(x=g._ownFill,iE.hasLines(g)||"none"!==g.fill){B&&B.datum(r),-1!==["hv","vh","hvh","vhv"].indexOf(f.shape)?(G=rE.steps(f.shape),_=rE.steps(f.shape.split("").reverse().join(""))):G=_="spline"===f.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?rE.smoothclosed(t.slice(1),f.smoothing):rE.smoothopen(t,f.smoothing)}:function(t){return"M"+t.join("L")},R=function(t){return _(t.reverse())},V=aE(r,{xaxis:h,yaxis:d,trace:g,connectGaps:g.connectgaps,baseTolerance:Math.max(f.width||1,3)/4,shape:f.shape,backoff:f.backoff,simplify:f.simplify,fill:g.fill}),Z=new Array(V.length);var W=0;for(s=0;s<V.length;s++){var Y,z=V[s];Y&&Q?Y.push.apply(Y,z):(Y=z.slice(),Z[W]=Y,W++)}g._fillElement=null,g._fillExclusionElement=k,g._fillsegments=Z.slice(0,W),Z=g._fillsegments,V.length&&(E=V[0][0].slice(),M=(T=V[V.length-1])[T.length-1].slice()),H=function(t){return function(e){if(C=G(e),w=R(e),N?Q?(N+="L"+C.substr(1),D=w+"L"+D.substr(1)):(N+="Z"+C,D=w+"Z"+D):(N=C,D=w),iE.hasLines(g)){var n=qR.select(this);if(n.datum(r),t)u(n.style("opacity",0).attr("d",C).call(rE.lineGroupStyle)).style("opacity",1);else{var i=u(n);i.attr("d",C),rE.singleLineStyle(r,i)}}}}}var O=m.selectAll(".js-line").data(V);u(O.exit()).style("opacity",0).remove(),O.each(H(!1)),O.enter().append("path").classed("js-line",!0).style("vector-effect",l?"none":"non-scaling-stroke").call(rE.lineGroupStyle).each(H(!0)),rE.setClipUrl(O,n.layerClipId,t);var J=function(){var t=new Array(Z.length);for(s=0;s<Z.length;s++)t[s]=sE(Z[s]);return t},P=function(t){var e,n;if(t&&0!==t.length){for(e=new Array(t.length-1+Z.length),n=0;n<t.length-1;n++)e[n]=sE(t[n]);var r=t[t.length-1].slice();for(r.reverse(),n=0;n<Z.length;n++)e[t.length-1+n]=sE(Z[n].concat(r))}else for(e=new Array(Z.length),n=0;n<Z.length;n++){var i=Z[n][0].slice(),a=Z[n][Z[n].length-1].slice();i[I]=a[I]=F;var o=[a,i].concat(Z[n]);e[n]=sE(o)}return e};V.length?(x?(x.datum(r),E&&M&&(Q?(E[I]=M[I]=F,u(x).attr("d","M"+M+"L"+E+"L"+N.substr(1)).call(rE.singleFillStyle,t),X=P(null)):(u(x).attr("d",N+"Z").call(rE.singleFillStyle,t),X=J())),g._polygons=X,g._fillElement=x):B&&("tonext"===g.fill.substr(0,6)&&N&&U?("tonext"===g.fill?(u(B).attr("d",N+"Z"+U+"Z").call(rE.singleFillStyle,t),X=J(),g._polygons=X.concat(A)):(u(B).attr("d",N+"L"+U.substr(1)+"Z").call(rE.singleFillStyle,t),X=P(L),g._polygons=X),g._fillElement=B):K(B)),g._prevRevpath=D):(x?K(x):B&&K(B),g._prevRevpath=null),g._ownPolygons=X,y.datum(r),b.datum(r),function(e,r,i){var a,o=i[0].trace,s=iE.hasMarkers(o),l=iE.hasText(o),g=nt(o),f=rt,p=rt;if(s||l){var v=nE,m=o.stackgroup,y=m&&"infer zero"===t._fullLayout._scatterStackOpts[h._id+d._id][m].stackgaps;o.marker.maxdisplayed||o._needsCull?v=y?$:q:m&&!y&&(v=tt),s&&(f=v),l&&(p=v)}var b,x=(a=e.selectAll("path.point").data(f,g)).enter().append("path").classed("point",!0);c&&x.call(rE.pointStyle,o,t).call(rE.translatePoints,h,d).style("opacity",0).transition().style("opacity",1),a.order(),s&&(b=rE.makePointStyleFns(o)),a.each((function(e){var r=qR.select(this),i=u(r);rE.translatePoint(e,i,h,d)?(rE.singlePointStyle(e,i,o,b,t),n.layerClipId&&rE.hideOutsideRangePoint(e,i,h,d,o.xcalendar,o.ycalendar),o.customdata&&r.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):i.remove()})),c?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=r.selectAll("g").data(p,g)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each((function(t){var e=qR.select(this),r=u(e.select("text"));rE.translatePoint(t,r,h,d)?n.layerClipId&&rE.hideOutsideRangePoint(t,e,h,d,o.xcalendar,o.ycalendar):e.remove()})),a.selectAll("text").call(rE.textPointStyle,o,t).each((function(t){var e=h.c2p(t.x),n=d.c2p(t.y);qR.select(this).selectAll("tspan.line").each((function(){u(qR.select(this)).attr({x:e,y:n})}))})),a.exit().remove()}(y,b,r);var j=!1===g.cliponaxis?null:n.layerClipId;rE.setClipUrl(y,j,t),rE.setClipUrl(b,j,t)}function K(t){u(t).attr("d","M0,0Z")}function q(t){return t.filter((function(t){return!t.gap&&t.vis}))}function $(t){return t.filter((function(t){return t.vis}))}function tt(t){return t.filter((function(t){return!t.gap}))}function et(t){return t.id}function nt(t){if(t.ids)return et}function rt(){return!1}}var cE={container:"marker",min:"cmin",max:"cmax"},uE=iI,hE=uo,dE=Qb,gE=hh;function fE(t,e,n){dE.pointStyle(t.selectAll("path.point"),e,n)}function pE(t,e,n){dE.textPointStyle(t.selectAll("text"),e,n)}var vE,mE,yE,bE,xE={style:function(t){var e=hE.select(t).selectAll("g.trace.scatter");e.style("opacity",(function(t){return t[0].trace.opacity})),e.selectAll("g.points").each((function(e){fE(hE.select(this),e.trace||e[0].trace,t)})),e.selectAll("g.text").each((function(e){pE(hE.select(this),e.trace||e[0].trace,t)})),e.selectAll("g.trace path.js-line").call(dE.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(dE.fillGroupStyle,t,!1),gE.getComponentMethod("errorbars","style")(e)},stylePoints:fE,styleText:pE,styleOnSelect:function(t,e,n){var r=e[0].trace;r.selectedpoints?(dE.selectedPointStyle(n.selectAll("path.point"),r),dE.selectedTextStyle(n.selectAll("text"),r)):(fE(n,r,t),pE(n,r,t))}},BE=Pu,IE=py,FE=yf,QE=uC,CE=hh,wE=function(t,e){var n,r;if("lines"===t.mode)return(n=t.line.color)&&BE.opacity(n)?n:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var i=e.mcc||(t.marker||{}).color,a=e.mlcc||((t.marker||{}).line||{}).color;return(r=i&&BE.opacity(i)?i:a&&BE.opacity(a)&&(e.mlw||((t.marker||{}).line||{}).width)?a:"")?BE.opacity(r)<.3?BE.addOpacity(r,.3):r:(n=(t.line||{}).color)&&BE.opacity(n)&&IE.hasLines(t)&&t.line.width?n:t.fillcolor},UE=Pu,AE=FE.fillText,SE=py,LE={};function kE(){if(bE)return yE;bE=1;var t=hh.traceIs,e=bx;function n(t){return{v:"x",h:"y"}[t.orientation||"v"]}function r(e,r){var i=n(e),a=t(e,"box-violin"),o=t(e._fullInput||{},"candlestick");return a&&!o&&r===i&&void 0===e[i]&&void 0===e[i+"0"]}return yE=function(i,a,o,s){o("autotypenumbers",s.autotypenumbersDflt),"-"===o("type",(s.splomStash||{}).type)&&(!function(i,a){if("-"!==i.type)return;var o,s=i._id,l=s.charAt(0);-1!==s.indexOf("scene")&&(s=l);var c=function(t,e,n){for(var i=0;i<t.length;i++){var a=t[i];if("splom"===a.type&&a._length>0&&(a["_"+n+"axes"]||{})[e])return a;if((a[n+"axis"]||n)===e){if(r(a,n))return a;if((a[n]||[]).length||a[n+"0"])return a}}}(a,s,l);if(!c)return;if("histogram"===c.type&&l==={v:"y",h:"x"}[c.orientation||"v"])return void(i.type="linear");var u=l+"calendar",h=c[u],d={noMultiCategory:!t(c,"cartesian")||t(c,"noMultiCategory")};"box"===c.type&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(d.noMultiCategory=!0);if(d.autotypenumbers=i.autotypenumbers,r(c,l)){var g=n(c),f=[];for(o=0;o<a.length;o++){var p=a[o];t(p,"box-violin")&&(p[l+"axis"]||l)===s&&(void 0!==p[g]?f.push(p[g][0]):void 0!==p.name?f.push(p.name):f.push("text"),p[u]!==h&&(h=void 0))}i.type=e(f,h,d)}else if("splom"===c.type){var v=c.dimensions[c._axesDim[s]];v.visible&&(i.type=e(v.values,h,d))}else i.type=e(c[l]||[c[l+"0"]],h,d)}(a,s.data),"-"===a.type?a.type="linear":i.type=a.type)},yE}var GE=Lc.isTypedArraySpec;var _E=vu.mix,RE=Xu,EE=yf,TE=Ac,ME=hh,NE=yf,DE=$f,XE=Sm,ZE=Jv,VE=Im,HE=Cm,WE=Em,YE=Nm,zE=function(t,e,n,r){if("category"===e.type){var i,a=t.categoryarray,o=Array.isArray(a)&&a.length>0||GE(a);o&&(i="array");var s,l=n("categoryorder",i);"array"===l&&(s=n("categoryarray")),o||"array"!==l||(l=e.categoryorder="trace"),"trace"===l?e._initialCategories=[]:"array"===l?e._initialCategories=s.slice():(s=function(t,e){var n,r,i,a=e.dataAttr||t._id.charAt(0),o={};if(e.axData)n=e.axData;else for(n=[],r=0;r<e.data.length;r++){var s=e.data[r];s[a+"axis"]===t._id&&n.push(s)}for(r=0;r<n.length;r++){var l=n[r][a];for(i=0;i<l.length;i++){var c=l[i];null!=c&&(o[c]=1)}}return Object.keys(o)}(e,r).sort(),"category ascending"===l?e._initialCategories=s:"category descending"===l&&(e._initialCategories=s.reverse()))}},OE=function(t,e,n,r){var i=(r=r||{}).dfltColor;function a(n,i){return EE.coerce2(t,e,r.attributes,n,i)}var o=a("linecolor",i),s=a("linewidth");n("showline",r.showLine||!!o||!!s)||(delete e.linecolor,delete e.linewidth);var l=a("gridcolor",_E(i,r.bgColor,r.blend||RE.lightFraction).toRgbString()),c=a("gridwidth"),u=a("griddash");if(n("showgrid",r.showGrid||!!l||!!c||!!u)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),r.hasMinor){var h=a("minor.gridcolor",_E(e.gridcolor,r.bgColor,67).toRgbString()),d=a("minor.gridwidth",e.gridwidth||1),g=a("minor.griddash",e.griddash||"solid");n("minor.showgrid",!!h||!!d||!!g)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!r.noZeroLine){var f=a("zerolinecolor",i),p=a("zerolinewidth");n("zeroline",r.showGrid||!!f||!!p)||(delete e.zerolinecolor,delete e.zerolinewidth)}},JE=oI,PE=hx,jE=lp.WEEKDAY_PATTERN,KE=lp.HOUR_PATTERN,qE=function(t,e,n,r,i){var a,o=r.letter,s=r.font||{},l=r.splomStash||{},c=n("visible",!r.visibleDflt),u=e._template||{},h=e.type||u.type||"-";"date"===h&&(ME.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",r.calendar),r.noTicklabelmode||(a=n("ticklabelmode")));var d="";r.noTicklabelposition&&"multicategory"!==h||(d=NE.coerce(t,e,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===a?["outside","inside"]:"x"===o?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==d.indexOf("inside")?"hide past domain":"category"===h||"multicategory"===h?"allow":"hide past div"),PE(e,i),JE(t,e,n,r),zE(t,e,n,r),"category"===h||r.noHover||n("hoverformat");var g=n("color"),f=g!==ZE.color.dflt?g:s.color,p=l.label||i._dfltTitle[o];if(YE(t,e,n,h,r),!c)return e;n("title.text",p),NE.coerceFont(n,"title.font",{family:s.family,weight:s.weight,style:s.style,variant:s.variant,size:NE.bigFont(s.size),color:f}),VE(t,e,n,h);var v=r.hasMinor;if(v&&(DE.newContainer(e,"minor"),VE(t,e,n,h,{isMinor:!0})),WE(t,e,n,h,r),HE(t,e,n,r),v){var m=r.isMinor;r.isMinor=!0,HE(t,e,n,r),r.isMinor=m}OE(t,e,n,{dfltColor:g,bgColor:r.bgColor,showGrid:r.showGrid,hasMinor:v,attributes:ZE}),!v||e.minor.ticks||e.minor.showgrid||delete e.minor,(e.showline||e.ticks)&&n("mirror");var y,b="multicategory"===h;r.noTickson||"category"!==h&&!b||!e.ticks&&!e.showgrid||(b&&(y="boundaries"),"boundaries"===n("tickson",y)&&delete e.ticklabelposition);b&&(n("showdividers")&&(n("dividercolor"),n("dividerwidth")));if("date"===h)if(XE(t,e,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:$E}),e.rangebreaks.length){for(var x=0;x<e.rangebreaks.length;x++)if(e.rangebreaks[x].pattern===jE){e._hasDayOfWeekBreaks=!0;break}if(PE(e,i),i._has("scattergl")||i._has("splom"))for(var B=0;B<r.data.length;B++){var I=r.data[B];"scattergl"!==I.type&&"splom"!==I.type||(I.visible=!1,NE.warn(I.type+" traces do not work on axes with rangebreaks. Setting trace "+I.index+" to `visible: false`."))}}else delete e.rangebreaks;return e};function $E(t,e,n){function r(n,r){return NE.coerce(t,e,ZE.rangebreaks,n,r)}if(r("enabled")){var i=r("bounds");if(i&&i.length>=2){var a,o,s="";if(2===i.length)for(a=0;a<2;a++)if(o=eT(i[a])){s=jE;break}var l=r("pattern",s);if(l===jE)for(a=0;a<2;a++)(o=eT(i[a]))&&(e.bounds[a]=i[a]=o-1);if(l)for(a=0;a<2;a++)switch(o=i[a],l){case jE:if(!TE(o))return void(e.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||o>=7)return void(e.enabled=!1);e.bounds[a]=i[a]=o;break;case KE:if(!TE(o))return void(e.enabled=!1);if((o=+o)<0||o>24)return void(e.enabled=!1);e.bounds[a]=i[a]=o}if(!1===n.autorange){var c=n.range;if(c[0]<c[1]){if(i[0]<c[0]&&i[1]>c[1])return void(e.enabled=!1)}else if(i[0]>c[0]&&i[1]<c[1])return void(e.enabled=!1)}}else{var u=r("values");if(!u||!u.length)return void(e.enabled=!1);r("dvalue")}}}var tT={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function eT(t){if("string"==typeof t)return tT[t.substr(0,3).toLowerCase()]}var nT,rT,iT,aT,oT=Ac,sT=yf,lT=function(t,e,n,r){var i,a,o,s,l,c,u=r.counterAxes||[],h=r.overlayableAxes||[],d=r.letter,g=r.grid,f=r.overlayingDomain;g&&(a=g._domains[d][g._axisMap[e._id]],i=g._anchors[e._id],a&&(o=g[d+"side"].split(" ")[0],s=g.domain[d]["right"===o||"top"===o?1:0])),a=a||[0,1],i=i||(oT(t.position)?"free":u[0]||"free"),o=o||("x"===d?"bottom":"left"),s=s||0,l=0,c=!1;var p=sT.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:i}},"anchor"),v=sT.coerce(t,e,{side:{valType:"enumerated",values:"x"===d?["bottom","top"]:["left","right"],dflt:o}},"side");if("free"===p){if("y"===d)n("autoshift")&&(s="left"===v?f[0]:f[1],c=!e.automargin||e.automargin,l="left"===v?-3:3),n("shift",l);n("position",s)}n("automargin",c);var m=!1;if(h.length&&(m=sT.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(h),dflt:!1}},"overlaying")),!m){var y=n("domain",a);y[0]>y[1]-1/4096&&(e.domain=a),sT.noneOrAll(t.domain,e.domain,a),"sync"===e.tickmode&&(e.tickmode="auto")}return n("layer"),e};var cT=uo,uT=hh,hT=yf,dT=qp,gT=Qb,fT=hp.getModuleCalcData,pT=op,vT=lp,mT=ev,yT=hT.ensureSingle;function bT(t,e,n){return hT.ensureSingle(t,e,n,(function(t){t.datum(n)}))}function xT(t,e,n,r,i){for(var a,o,s,l=vT.traceLayerClasses,c=t._fullLayout,u=c._modules,h={},d=0;d<n.length;d++){var g=n[d][0].trace.zorder||0;h[g]||(h[g]=[]),h[g].push(n[d])}for(var f=[],p=[],v=Object.keys(h).map(Number).sort(hT.sorterAsc),m=0;m<v.length;m++)for(var y=v[m],b=0;b<u.length;b++){var x=(a=u[b]).name,B=uT.modules[x].categories;if(B.svg){var I=a.layerName||x+"layer",F=I+(m?Number(m)+1:""),Q=a.plot;s=(o=fT(n,Q,y))[0],n=o[1],s.length&&f.push({i:l.indexOf(I),zorder:m,className:F,plotMethod:Q,cdModule:s}),B.zoomScale&&p.push("."+F)}}f.sort((function(t,e){return(t.zorder||0)-(e.zorder||0)||t.i-e.i}));var C=e.plot.selectAll("g.mlayer").data(f,(function(t){return t.className}));if(C.enter().append("g").attr("class",(function(t){return t.className})).classed("mlayer",!0).classed("rangeplot",e.isRangePlot),C.exit().remove(),C.order(),C.each((function(n){var a=cT.select(this),o=n.className;n.plotMethod(t,e,n.cdModule,a,r,i),-1===vT.clipOnAxisFalseQuery.indexOf("."+o)&&gT.setClipUrl(a,e.layerClipId,t)})),c._has("scattergl")&&(a=uT.getModule("scattergl"),s=fT(n,a)[0],a.plot(t,e,s)),!t._context.staticPlot&&(e._hasClipOnAxisFalse&&(e.clipOnAxisFalseTraces=e.plot.selectAll(vT.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),p.length)){var w=e.plot.selectAll(p.join(",")).selectAll(".trace");e.zoomScalePts=w.selectAll("path.point"),e.zoomScaleTxt=w.selectAll(".textpoint")}}function BT(t,e){var n=e.plotgroup,r=e.id,i=vT.layerValue2layerClass[e.xaxis.layer],a=vT.layerValue2layerClass[e.yaxis.layer],o=t._fullLayout._hasOnlyLargeSploms;if(e.mainplot){var s=e.mainplotinfo,l=s.plotgroup,c=r+"-x",u=r+"-y";e.minorGridlayer=s.minorGridlayer,e.gridlayer=s.gridlayer,e.zerolinelayer=s.zerolinelayer,yT(s.overlinesBelow,"path",c),yT(s.overlinesBelow,"path",u),yT(s.overaxesBelow,"g",c),yT(s.overaxesBelow,"g",u),e.plot=yT(s.overplot,"g",r),yT(s.overlinesAbove,"path",c),yT(s.overlinesAbove,"path",u),yT(s.overaxesAbove,"g",c),yT(s.overaxesAbove,"g",u),e.xlines=l.select(".overlines-"+i).select("."+c),e.ylines=l.select(".overlines-"+a).select("."+u),e.xaxislayer=l.select(".overaxes-"+i).select("."+c),e.yaxislayer=l.select(".overaxes-"+a).select("."+u)}else if(o)e.xlines=yT(n,"path","xlines-above"),e.ylines=yT(n,"path","ylines-above"),e.xaxislayer=yT(n,"g","xaxislayer-above"),e.yaxislayer=yT(n,"g","yaxislayer-above");else{var h=yT(n,"g","layer-subplot");e.shapelayer=yT(h,"g","shapelayer"),e.imagelayer=yT(h,"g","imagelayer"),e.minorGridlayer=yT(n,"g","minor-gridlayer"),e.gridlayer=yT(n,"g","gridlayer"),e.zerolinelayer=yT(n,"g","zerolinelayer");var d=yT(n,"g","layer-between");e.shapelayerBetween=yT(d,"g","shapelayer"),e.imagelayerBetween=yT(d,"g","imagelayer"),yT(n,"path","xlines-below"),yT(n,"path","ylines-below"),e.overlinesBelow=yT(n,"g","overlines-below"),yT(n,"g","xaxislayer-below"),yT(n,"g","yaxislayer-below"),e.overaxesBelow=yT(n,"g","overaxes-below"),e.plot=yT(n,"g","plot"),e.overplot=yT(n,"g","overplot"),e.xlines=yT(n,"path","xlines-above"),e.ylines=yT(n,"path","ylines-above"),e.overlinesAbove=yT(n,"g","overlines-above"),yT(n,"g","xaxislayer-above"),yT(n,"g","yaxislayer-above"),e.overaxesAbove=yT(n,"g","overaxes-above"),e.xlines=n.select(".xlines-"+i),e.ylines=n.select(".ylines-"+a),e.xaxislayer=n.select(".xaxislayer-"+i),e.yaxislayer=n.select(".yaxislayer-"+a)}o||(bT(e.minorGridlayer,"g",e.xaxis._id),bT(e.minorGridlayer,"g",e.yaxis._id),e.minorGridlayer.selectAll("g").map((function(t){return t[0]})).sort(pT.idSort),bT(e.gridlayer,"g",e.xaxis._id),bT(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").map((function(t){return t[0]})).sort(pT.idSort)),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function IT(t,e){if(t){var n={};for(var r in t.each((function(t){var r=t[0];cT.select(this).remove(),FT(r,e),n[r]=!0})),e._plots)for(var i=e._plots[r].overlays||[],a=0;a<i.length;a++){var o=i[a];n[o.id]&&o.plot.selectAll(".trace").remove()}}}function FT(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}LE.name="cartesian",LE.attr=["xaxis","yaxis"],LE.idRoot=["x","y"],LE.idRegex=vT.idRegex,LE.attrRegex=vT.attrRegex,LE.attributes=mE?vE:(mE=1,vE={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}}),LE.layoutAttributes=Jv,LE.supplyLayoutDefaults=function(){if(rT)return nT;rT=1;var t=yf,e=Pu,n=yy.isUnifiedHover,r=jQ,i=$f,a=Hd,o=Jv,s=kE(),l=qE,c=ZU,u=lT,h=op,d=h.id2name,g=h.name2id,f=lp.AX_ID_PATTERN,p=hh,v=p.traceIs,m=p.getComponentMethod;function y(t,e,n){Array.isArray(t[e])?t[e].push(n):t[e]=[n]}return nT=function(p,b,x){var B,I,F=b.autotypenumbers,Q={},C={},w={},U={},A={},S={},L={},k={},G={},_={};for(B=0;B<x.length;B++){var R=x[B];if(v(R,"cartesian")||v(R,"gl2d")){var E,T;if(R.xaxis)E=d(R.xaxis),y(Q,E,R);else if(R.xaxes)for(I=0;I<R.xaxes.length;I++)y(Q,d(R.xaxes[I]),R);if(R.yaxis)T=d(R.yaxis),y(Q,T,R);else if(R.yaxes)for(I=0;I<R.yaxes.length;I++)y(Q,d(R.yaxes[I]),R);if("funnel"===R.type?"h"===R.orientation?(E&&(C[E]=!0),T&&(L[T]=!0)):T&&(w[T]=!0):"image"===R.type?(T&&(k[T]=!0),E&&(k[E]=!0)):(T&&(A[T]=!0,S[T]=!0),v(R,"carpet")&&("carpet"!==R.type||R._cheater)||E&&(U[E]=!0)),"carpet"===R.type&&R._cheater&&E&&(C[E]=!0),v(R,"2dMap")&&(G[E]=!0,G[T]=!0),v(R,"oriented"))_["h"===R.orientation?T:E]=!0}}var M=b._subplots,N=M.xaxis,D=M.yaxis,X=t.simpleMap(N,d),Z=t.simpleMap(D,d),V=X.concat(Z),H=e.background;N.length&&D.length&&(H=t.coerce(p,b,a,"plot_bgcolor"));var W,Y,z,O,J,P=e.combine(H,b.paper_bgcolor);function j(){var t=Q[W]||[];J._traceIndices=t.map((function(t){return t._expandedIndex})),J._annIndices=[],J._shapeIndices=[],J._selectionIndices=[],J._imgIndices=[],J._subplotsWith=[],J._counterAxes=[],J._name=J._attr=W,J._id=Y}function K(e,n){return t.coerce(O,J,o,e,n)}function q(e,n){return t.coerce2(O,J,o,e,n)}function $(t){return"x"===t?D:N}function tt(t,e){for(var n="x"===t?X:Z,r=[],i=0;i<n.length;i++){var a=n[i];a===e||(p[a]||{}).overlaying||r.push(g(a))}return r}var et={x:$("x"),y:$("y")},nt=et.x.concat(et.y),rt={},it=[];function at(){var t=O.matches;f.test(t)&&-1===nt.indexOf(t)&&(rt[t]=O.type,it=Object.keys(rt))}var ot=r(p,b),st=n(ot);for(B=0;B<V.length;B++){W=V[B],Y=g(W),z=W.charAt(0),t.isPlainObject(p[W])||(p[W]={}),O=p[W],J=i.newContainer(b,W,z+"axis"),j();var lt="x"===z&&!U[W]&&C[W]||"y"===z&&!A[W]&&w[W],ct="y"===z&&(!S[W]&&L[W]||k[W]),ut={hasMinor:!0,letter:z,font:b.font,outerTicks:G[W],showGrid:!_[W],data:Q[W]||[],bgColor:P,calendar:b.calendar,automargin:!0,visibleDflt:lt,reverseDflt:ct,autotypenumbersDflt:F,splomStash:((b._splomAxes||{})[z]||{})[Y],noAutotickangles:"y"===z};K("uirevision",b.uirevision),s(O,J,K,ut),l(O,J,K,ut,b);var ht=st&&z===ot.charAt(0),dt=q("spikecolor",st?J.color:void 0),gt=q("spikethickness",st?1.5:void 0),ft=q("spikedash",st?"dot":void 0),pt=q("spikemode",st?"across":void 0),vt=q("spikesnap");K("showspikes",!!(ht||dt||gt||ft||pt||vt))||(delete J.spikecolor,delete J.spikethickness,delete J.spikedash,delete J.spikemode,delete J.spikesnap);var mt=d(O.overlaying),yt=[0,1];if(void 0!==b[mt]){var bt=d(b[mt].anchor);void 0!==b[bt]&&(yt=b[bt].domain)}u(O,J,K,{letter:z,counterAxes:et[z],overlayableAxes:tt(z,W),grid:b.grid,overlayingDomain:yt}),K("title.standoff"),at(),J._input=O}for(B=0;B<it.length;){Y=it[B++],z=(W=d(Y)).charAt(0),t.isPlainObject(p[W])||(p[W]={}),O=p[W],J=i.newContainer(b,W,z+"axis"),j();var xt={letter:z,font:b.font,outerTicks:G[W],showGrid:!_[W],data:[],bgColor:P,calendar:b.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:F,splomStash:((b._splomAxes||{})[z]||{})[Y]};K("uirevision",b.uirevision),J.type=rt[Y]||"linear",l(O,J,K,xt,b),u(O,J,K,{letter:z,counterAxes:et[z],overlayableAxes:tt(z,W),grid:b.grid}),K("fixedrange"),at(),J._input=O}var Bt=m("rangeslider","handleDefaults"),It=m("rangeselector","handleDefaults");for(B=0;B<X.length;B++)W=X[B],O=p[W],J=b[W],Bt(p,b,W),"date"===J.type&&It(O,J,b,Z,J.calendar),K("fixedrange");for(B=0;B<Z.length;B++){W=Z[B],O=p[W],J=b[W];var Ft=b[d(J.anchor)];K("fixedrange",m("rangeslider","isVisible")(Ft))}c.handleDefaults(p,b,{axIds:nt.concat(it).sort(h.idSort),axHasImage:k})},nT}(),LE.transitionAxes=function(){if(aT)return iT;aT=1;var t=uo,e=hh,n=yf,r=Qb,i=iI;return iT=function(a,o,s,l){var c=a._fullLayout;if(0!==o.length){var u,h,d,g;l&&(u=l());var f=t.ease(s.easing);return a._transitionData._interruptCallbacks.push((function(){return window.cancelAnimationFrame(g),g=null,function(){for(var t={},n=0;n<o.length;n++){var r=o[n],i=r.plotinfo.xaxis,s=r.plotinfo.yaxis;r.xr0&&(t[i._name+".range"]=r.xr0.slice()),r.yr0&&(t[s._name+".range"]=r.yr0.slice())}return e.call("relayout",a,t).then((function(){for(var t=0;t<o.length;t++)p(o[t].plotinfo)}))}()})),h=Date.now(),g=window.requestAnimationFrame((function t(){d=Date.now();for(var n=Math.min(1,(d-h)/s.duration),r=f(n),i=0;i<o.length;i++)v(o[i],r);d-h>s.duration?(!function(){for(var t={},n=0;n<o.length;n++){var r=o[n],i=r.plotinfo.xaxis,s=r.plotinfo.yaxis;r.xr1&&(t[i._name+".range"]=r.xr1.slice()),r.yr1&&(t[s._name+".range"]=r.yr1.slice())}u&&u(),e.call("relayout",a,t).then((function(){for(var t=0;t<o.length;t++)p(o[t].plotinfo)}))}(),g=window.cancelAnimationFrame(t)):g=window.requestAnimationFrame(t)})),Promise.resolve()}function p(t){var e=t.xaxis,n=t.yaxis;c._defs.select("#"+t.clipId+"> rect").call(r.setTranslate,0,0).call(r.setScale,1,1),t.plot.call(r.setTranslate,e._offset,n._offset).call(r.setScale,1,1);var i=t.plot.selectAll(".scatterlayer .trace");i.selectAll(".point").call(r.setPointGroupScale,1,1),i.selectAll(".textpoint").call(r.setTextPointsScale,1,1),i.call(r.hideOutsideRangePoints,t)}function v(t,e){var o=t.plotinfo,s=o.xaxis,l=o.yaxis,c=s._length,u=l._length,h=!!t.xr1,d=!!t.yr1,g=[];if(h){var f=n.simpleMap(t.xr0,s.r2l),p=n.simpleMap(t.xr1,s.r2l),v=f[1]-f[0],m=p[1]-p[0];g[0]=(f[0]*(1-e)+e*p[0]-f[0])/(f[1]-f[0])*c,g[2]=c*(1-e+e*m/v),s.range[0]=s.l2r(f[0]*(1-e)+e*p[0]),s.range[1]=s.l2r(f[1]*(1-e)+e*p[1])}else g[0]=0,g[2]=c;if(d){var y=n.simpleMap(t.yr0,l.r2l),b=n.simpleMap(t.yr1,l.r2l),x=y[1]-y[0],B=b[1]-b[0];g[1]=(y[1]*(1-e)+e*b[1]-y[1])/(y[0]-y[1])*u,g[3]=u*(1-e+e*B/x),l.range[0]=s.l2r(y[0]*(1-e)+e*b[0]),l.range[1]=l.l2r(y[1]*(1-e)+e*b[1])}else g[1]=0,g[3]=u;i.drawOne(a,s,{skipTitle:!0}),i.drawOne(a,l,{skipTitle:!0}),i.redrawComponents(a,[s._id,l._id]);var I=h?c/g[2]:1,F=d?u/g[3]:1,Q=h?g[0]:0,C=d?g[1]:0,w=h?g[0]/g[2]*c:0,U=d?g[1]/g[3]*u:0,A=s._offset-w,S=l._offset-U;o.clipRect.call(r.setTranslate,Q,C).call(r.setScale,1/I,1/F),o.plot.call(r.setTranslate,A,S).call(r.setScale,I,F),r.setPointGroupScale(o.zoomScalePts,1/I,1/F),r.setTextPointsScale(o.zoomScaleTxt,1/I,1/F)}i.redrawComponents(a)},iT}(),LE.finalizeSubplots=function(t,e){var n,r,i,a=e._subplots,o=a.xaxis,s=a.yaxis,l=a.cartesian,c=l.concat(a.gl2d||[]),u={},h={};for(n=0;n<c.length;n++){var d=c[n].split("y");u[d[0]]=1,h["y"+d[1]]=1}for(n=0;n<o.length;n++)u[r=o[n]]||(i=(t[pT.id2name(r)]||{}).anchor,vT.idRegex.y.test(i)||(i="y"),l.push(r+i),c.push(r+i),h[i]||(h[i]=1,hT.pushUnique(s,i)));for(n=0;n<s.length;n++)h[i=s[n]]||(r=(t[pT.id2name(i)]||{}).anchor,vT.idRegex.x.test(r)||(r="x"),l.push(r+i),c.push(r+i),u[r]||(u[r]=1,hT.pushUnique(o,r)));if(!c.length){for(var g in r="",i="",t){if(vT.attrRegex.test(g))"x"===g.charAt(0)?(!r||+g.substr(5)<+r.substr(5))&&(r=g):(!i||+g.substr(5)<+i.substr(5))&&(i=g)}r=r?pT.name2id(r):"x",i=i?pT.name2id(i):"y",o.push(r),s.push(i),l.push(r+i)}},LE.plot=function(t,e,n,r){var i,a=t._fullLayout,o=a._subplots.cartesian,s=t.calcdata;if(!Array.isArray(e))for(e=[],i=0;i<s.length;i++)e.push(i);for(i=0;i<o.length;i++){for(var l,c=o[i],u=a._plots[c],h=[],d=0;d<s.length;d++){var g=s[d],f=g[0].trace;f.xaxis+f.yaxis===c&&((-1!==e.indexOf(f.index)||f.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(f.fill)&&-1===h.indexOf(l)&&h.push(l),h.push(g)),l=g)}xT(t,u,h,n,r)}},LE.clean=function(t,e,n,r){var i,a,o,s=r._plots||{},l=e._plots||{},c=r._subplots||{};if(r._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(o in s)(i=s[o]).plotgroup&&i.plotgroup.remove();var u=r._has&&r._has("gl"),h=e._has&&e._has("gl");if(u&&!h)for(o in s)(i=s[o])._scene&&i._scene.destroy();if(c.xaxis&&c.yaxis){var d=pT.listIds({_fullLayout:r});for(a=0;a<d.length;a++){var g=d[a];e[pT.id2name(g)]||r._infolayer.selectAll(".g-"+g+"title").remove()}}var f=r._has&&r._has("cartesian"),p=e._has&&e._has("cartesian");if(f&&!p)IT(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(c.cartesian)for(a=0;a<c.cartesian.length;a++){var v=c.cartesian[a];if(!l[v]){var m="."+v+",."+v+"-x,."+v+"-y";r._cartesianlayer.selectAll(m).remove(),FT(v,r)}}},LE.drawFramework=function(t){var e=t._fullLayout,n=function(t){var e,n,r,i,a,o,s=t._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],h=[];for(e=0;e<c;e++){r=l[e],a=(i=s._plots[r]).xaxis,o=i.yaxis;var d=a._mainAxis,g=o._mainAxis,f=d._id+g._id,p=s._plots[f];i.overlays=[],f!==r&&p?(i.mainplot=f,i.mainplotinfo=p,h.push(r)):(i.mainplot=void 0,i.mainplotinfo=void 0,u.push(r))}for(e=0;e<h.length;e++)r=h[e],(i=s._plots[r]).mainplotinfo.overlays.push(i);var v=u.concat(h),m=new Array(c);for(e=0;e<c;e++){r=v[e],a=(i=s._plots[r]).xaxis,o=i.yaxis;var y=[r,a.layer,o.layer,a.overlaying||"",o.overlaying||""];for(n=0;n<i.overlays.length;n++)y.push(i.overlays[n].id);m[e]=y}return m}(t),r=e._cartesianlayer.selectAll(".subplot").data(n,String);r.enter().append("g").attr("class",(function(t){return"subplot "+t[0]})),r.order(),r.exit().call(IT,e),r.each((function(n){var r=n[0],i=e._plots[r];i.plotgroup=cT.select(this),BT(t,i),i.draglayer=yT(e._draggers,"g",r)}))},LE.rangePlot=function(t,e,n){BT(t,e),xT(t,e,n),dT.style(t)},LE.toSVG=function(t){var e=t._fullLayout._glimages,n=cT.select(t).selectAll(".svg-container"),r=n.filter((function(t,e){return e===n.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus");r.each((function(){var t=this,n=t.toDataURL("image/png");e.append("svg:image").attr({xmlns:mT.svg,"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}))},LE.updateFx=sI.updateFx;var QT={hasLines:py.hasLines,hasMarkers:py.hasMarkers,hasText:py.hasText,isBubble:py.isBubble,attributes:xL,layoutAttributes:up,supplyDefaults:function(t,e,n,r){function i(n,r){return F_.coerce(t,e,C_,n,r)}var a=A_(t,e,r,i);if(a||(e.visible=!1),e.visible){S_(t,e,r,i),i("xhoverformat"),i("yhoverformat"),i("zorder");var o=L_(t,e,r,i);"group"===r.scattermode&&void 0===e.orientation&&i("orientation","v");var s=!o&&a<w_.PTS_LINESONLY?"lines+markers":"lines";i("text"),i("hovertext"),i("mode",s),U_.hasMarkers(e)&&k_(t,e,n,r,i,{gradient:!0}),U_.hasLines(e)&&(G_(t,e,n,r,i,{backoff:!0}),__(t,e,i),i("connectgaps"),i("line.simplify")),U_.hasText(e)&&(i("texttemplate"),R_(t,e,r,i));var l=[];(U_.hasMarkers(e)||U_.hasText(e))&&(i("cliponaxis"),i("marker.maxdisplayed"),l.push("points")),i("fill",o?o.fillDflt:"none"),"none"!==e.fill&&(E_(t,e,n,i,{moduleHasFillgradient:!0}),U_.hasLines(e)||__(t,e,i),T_(i,"fillpattern",e.fillcolor,!1));var c=(e.line||{}).color,u=(e.marker||{}).color;"tonext"!==e.fill&&"toself"!==e.fill||l.push("fills"),i("hoveron",l.join("+")||"points"),"fills"!==e.hoveron&&i("hovertemplate");var h=Q_.getComponentMethod("errorbars","supplyDefaults");h(t,e,c||u||n,{axis:"y"}),h(t,e,c||u||n,{axis:"x",inherit:"y"}),F_.coerceSelectionMarkerOpacity(e,i)}},crossTraceDefaults:function(t,e){var n,r,i;function a(t){return D_.coerce(r._input,r,Z_,t)}if("group"===e.scattermode)for(i=0;i<t.length;i++)"scatter"===(r=t[i]).type&&(n=r._input,X_(n,r,e,a));for(i=0;i<t.length;i++){var o=t[i];if("scatter"===o.type){var s=o.fill;if("none"!==s&&"toself"!==s&&(o.opacity=void 0,"tonexty"===s||"tonextx"===s))for(var l=i-1;l>=0;l--){var c=t[l];if("scatter"===c.type&&c.xaxis===o.xaxis&&c.yaxis===o.yaxis){c.opacity=void 0;break}}}}},supplyLayoutDefaults:function(t,e){var n,r,i="group"===e.barmode;"group"===e.scattermode&&(n="scattergap",r=i?e.bargap:.2,V_.coerce(t,e,H_,n,r))},calc:vR.calc,crossTraceCalc:function(t,e){"group"===t._fullLayout.scattermode&&function(t,e){for(var n=e.xaxis,r=e.yaxis,i=t._fullLayout,a=t._fullData,o=t.calcdata,s=[],l=[],c=0;c<a.length;c++){var u=a[c];!0===u.visible&&"scatter"===u.type&&u.xaxis===n._id&&u.yaxis===r._id&&("h"===u.orientation?s.push(o[c]):"v"===u.orientation&&l.push(o[c]))}var h={mode:i.scattermode,gap:i.scattergap};DR(t,n,r,l,h),DR(t,r,n,s,h)}(t,e);var n=e.xaxis,r=e.yaxis,i=n._id+r._id,a=t._fullLayout._scatterStackOpts[i];if(a){var o,s,l,c,u,h,d,g,f,p,v,m,y,b,x,B=t.calcdata;for(var I in a){var F=(p=a[I]).traceIndices;if(F.length){for(v="interpolate"===p.stackgaps,m=p.groupnorm,"v"===p.orientation?(y="x",b="y"):(y="y",b="x"),x=new Array(F.length),o=0;o<x.length;o++)x[o]=!1;h=B[F[0]];var Q=new Array(h.length);for(o=0;o<h.length;o++)Q[o]=h[o][y];for(o=1;o<F.length;o++){for(u=B[F[o]],s=l=0;s<u.length;s++){for(d=u[s][y];d>Q[l]&&l<Q.length;l++)XR(u,s,Q[l],o,x,v,y),s++;if(d!==Q[l]){for(c=0;c<o;c++)XR(B[F[c]],l,d,c,x,v,y);Q.splice(l,0,d)}l++}for(;l<Q.length;l++)XR(u,s,Q[l],o,x,v,y),s++}var C=Q.length;for(s=0;s<h.length;s++){for(g=h[s][b]=h[s].s,o=1;o<F.length;o++)(u=B[F[o]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=C,g+=u[s].s,u[s][b]=g;if(m)for(f=("fraction"===m?g:g/100)||1,o=0;o<F.length;o++){var w=B[F[o]][s];w[b]/=f,w.sNorm=w.s/f}}for(o=0;o<F.length;o++){var U=(u=B[F[o]])[0].trace,A=NR.calcMarkerSize(U,U._rawLength),S=Array.isArray(A);if(A&&x[o]||S){var L=A;for(A=new Array(C),s=0;s<C;s++)A[s]=u[s].gap?0:S?L[u[s].i]:L}var k=new Array(C),G=new Array(C);for(s=0;s<C;s++)k[s]=u[s].x,G[s]=u[s].y;NR.calcAxisExpansion(t,U,n,r,k,G,A),u[0].t.orientation=p.orientation}}}}},arraysToCalcdata:tR,plot:function(t,e,n,r,i,a){var o,s,l=!i,c=!!i&&i.duration>0,u=oE(t,e,n);(o=r.selectAll("g.trace").data(u,(function(t){return t[0].trace.uid})),o.enter().append("g").attr("class",(function(t){return"trace scatter trace"+t[0].trace.uid})).style("stroke-miterlimit",2),o.order(),function(t,e,n){e.each((function(e){var r=eE(qR.select(this),"g","fills");rE.setClipUrl(r,n.layerClipId,t);var i=e[0].trace,a=[];i._ownfill&&a.push("_ownFill"),i._nexttrace&&a.push("_nextFill");var o=r.selectAll("g").data(a,nE);o.enter().append("g"),o.exit().each((function(t){i[t]=null})).remove(),o.order().each((function(t){i[t]=eE(qR.select(this),"path","js-fill")}))}))}(t,o,e),c)?(a&&(s=a()),qR.transition().duration(i.duration).ease(i.easing).each("end",(function(){s&&s()})).each("interrupt",(function(){s&&s()})).each((function(){r.selectAll("g.trace").each((function(n,r){lE(t,r,e,n,u,this,i)}))}))):o.each((function(n,r){lE(t,r,e,n,u,this,i)}));l&&o.exit().remove(),r.selectAll("path:not([d])").remove()},colorbar:cE,formatLabels:function(t,e,n){var r={},i={_fullLayout:n},a=uE.getFromTrace(i,e,"x"),o=uE.getFromTrace(i,e,"y"),s=t.orig_x;void 0===s&&(s=t.x);var l=t.orig_y;return void 0===l&&(l=t.y),r.xLabel=uE.tickText(a,a.c2l(s),!0).text,r.yLabel=uE.tickText(o,o.c2l(l),!0).text,r},style:xE.style,styleOnSelect:xE.styleOnSelect,hoverPoints:function(t,e,n,r){var i=t.cd,a=i[0].trace,o=t.xa,s=t.ya,l=o.c2p(e),c=s.c2p(n),u=[l,c],h=a.hoveron||"",d=-1!==a.mode.indexOf("markers")?3:.5,g=!!a.xperiodalignment,f=!!a.yperiodalignment;if(-1!==h.indexOf("points")){var p=function(t){var e=Math.max(d,t.mrc||0),n=o.c2p(t.x)-l,r=s.c2p(t.y)-c;return Math.max(Math.sqrt(n*n+r*r)-e,1-d/e)},v=QE.getDistanceFunction(r,(function(t){if(g){var e=o.c2p(t.xStart),n=o.c2p(t.xEnd);return l>=Math.min(e,n)&&l<=Math.max(e,n)?0:1/0}var r=Math.max(3,t.mrc||0),i=1-1/r,a=Math.abs(o.c2p(t.x)-l);return a<r?i*a/r:a-r+i}),(function(t){if(f){var e=s.c2p(t.yStart),n=s.c2p(t.yEnd);return c>=Math.min(e,n)&&c<=Math.max(e,n)?0:1/0}var r=Math.max(3,t.mrc||0),i=1-1/r,a=Math.abs(s.c2p(t.y)-c);return a<r?i*a/r:a-r+i}),p);if(QE.getClosest(i,v,t),!1!==t.index){var m=i[t.index],y=o.c2p(m.x,!0),b=s.c2p(m.y,!0),x=m.mrc||1;t.index=m.i;var B=i[0].t.orientation,I=B&&(m.sNorm||m.s),F="h"===B?I:void 0!==m.orig_x?m.orig_x:m.x,Q="v"===B?I:void 0!==m.orig_y?m.orig_y:m.y;return FE.extendFlat(t,{color:wE(a,m),x0:y-x,x1:y+x,xLabelVal:F,y0:b-x,y1:b+x,yLabelVal:Q,spikeDistance:p(m),hovertemplate:a.hovertemplate}),AE(m,a,t),CE.getComponentMethod("errorbars","hoverInfo")(m,a,t),[t]}}function C(t){if(!t)return!1;var e=t.node();try{var n=new DOMPoint(u[0],u[1]);return e.isPointInFill(n)}catch(t){var r=e.ownerSVGElement.createSVGPoint();return r.x=u[0],r.y=u[1],e.isPointInFill(r)}}if(-1!==h.indexOf("fills")&&a._fillElement&&(C(a._fillElement)&&!C(a._fillExclusionElement))){var w=function(t){var e,n,r,i,a,l,c,h,d,g=[],f=1/0,p=-1/0,v=1/0,m=-1/0;for(e=0;e<t.length;e++){var y=t[e];y.contains(u)&&(g.push(y),v=Math.min(v,y.ymin),m=Math.max(m,y.ymax))}if(0===g.length)return null;for(n=((v=Math.max(v,0))+(m=Math.min(m,s._length)))/2,e=0;e<g.length;e++)for(i=g[e].pts,r=1;r<i.length;r++)(h=i[r-1][1])>n!=(d=i[r][1])>=n&&(l=i[r-1][0],c=i[r][0],d-h&&(a=l+(c-l)*(n-h)/(d-h),f=Math.min(f,a),p=Math.max(p,a)));return{x0:f=Math.max(f,0),x1:p=Math.min(p,o._length),y0:n,y1:n}}(a._polygons);null===w&&(w={x0:u[0],x1:u[0],y0:u[1],y1:u[1]});var U=UE.defaultLine;return UE.opacity(a.fillcolor)?U=a.fillcolor:UE.opacity((a.line||{}).color)&&(U=a.line.color),FE.extendFlat(t,{distance:t.maxHoverDistance,x0:w.x0,x1:w.x1,y0:w.y0,y1:w.y1,color:U,hovertemplate:!1}),delete t.index,a.text&&!FE.isArrayOrTypedArray(a.text)?t.text=String(a.text):t.text=a.name,[t]}},selectPoints:function(t,e){var n,r,i,a,o=t.cd,s=t.xaxis,l=t.yaxis,c=[],u=o[0].trace;if(!SE.hasMarkers(u)&&!SE.hasText(u))return[];if(!1===e)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)r=o[n],i=s.c2p(r.x),a=l.c2p(r.y),null!==r.i&&e.contains([i,a],!1,n,t)?(c.push({pointNumber:r.i,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return c},animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:LE,categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},CT=uo,wT=Pu,UT=jS,AT=yf,ST=AT.strScale,LT=AT.strRotate,kT=AT.strTranslate,GT=uo,_T=hh,RT=qp,ET=yf,TT=ET.strTranslate,MT=iI,NT=Pu,DT=Qb,XT=uC,ZT=tv,VT=LI,HT=AI,WT=$f.arrayEditor,YT=function(t,e,n){var r,i,a,o,s=t.node(),l=UT[n.arrowhead||0],c=UT[n.startarrowhead||0],u=(n.arrowwidth||1)*(n.arrowsize||1),h=(n.arrowwidth||1)*(n.startarrowsize||1),d=e.indexOf("start")>=0,g=e.indexOf("end")>=0,f=l.backoff*u+n.standoff,p=c.backoff*h+n.startstandoff;if("line"===s.nodeName){r={x:+t.attr("x1"),y:+t.attr("y1")},i={x:+t.attr("x2"),y:+t.attr("y2")};var v=r.x-i.x,m=r.y-i.y;if(o=(a=Math.atan2(m,v))+Math.PI,f&&p&&f+p>Math.sqrt(v*v+m*m))return void A();if(f){if(f*f>v*v+m*m)return void A();var y=f*Math.cos(a),b=f*Math.sin(a);i.x+=y,i.y+=b,t.attr({x2:i.x,y2:i.y})}if(p){if(p*p>v*v+m*m)return void A();var x=p*Math.cos(a),B=p*Math.sin(a);r.x-=x,r.y-=B,t.attr({x1:r.x,y1:r.y})}}else if("path"===s.nodeName){var I=s.getTotalLength(),F="";if(I<f+p)return void A();var Q=s.getPointAtLength(0),C=s.getPointAtLength(.1);a=Math.atan2(Q.y-C.y,Q.x-C.x),r=s.getPointAtLength(Math.min(p,I)),F="0px,"+p+"px,";var w=s.getPointAtLength(I),U=s.getPointAtLength(I-.1);o=Math.atan2(w.y-U.y,w.x-U.x),i=s.getPointAtLength(Math.max(0,I-f)),F+=I-(F?p+f:f)+"px,"+I+"px",t.style("stroke-dasharray",F)}function A(){t.style("stroke-dasharray","0px,100px")}function S(e,r,i,a){e.path&&(e.noRotate&&(i=0),CT.select(s.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:kT(r.x,r.y)+LT(180*i/Math.PI)+ST(a)}).style({fill:wT.rgb(n.arrowcolor),"stroke-width":0}))}d&&S(c,r,a,h),g&&S(l,i,o,u)},zT={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var n=0;n<e.annotations.length;n++)e.annotations[n].visible&&OT(t,n);return RT.previousPromises(t)},drawOne:OT,drawRaw:PT};function OT(t,e){var n=t._fullLayout.annotations[e]||{},r=MT.getFromId(t,n.xref),i=MT.getFromId(t,n.yref);r&&r.setScale(),i&&i.setScale(),PT(t,n,e,!1,r,i)}function JT(t,e,n,r,i){var a=i[n],o=i[n+"ref"],s=-1!==n.indexOf("y"),l="domain"===MT.getRefType(o),c=s?r.h:r.w;return t?l?a+(s?-e:e)/t._length:t.p2r(t.r2p(a)+e):a+(s?-e:e)/c}function PT(t,e,n,r,i,a){var o,s,l=t._fullLayout,c=t._fullLayout._size,u=t._context.edits;r?(o="annotation-"+r,s=r+".annotations"):(o="annotation",s="annotations");var h=WT(t.layout,s,e),d=h.modifyBase,g=h.modifyItem,f=h.getUpdateObj;l._infolayer.selectAll("."+o+'[data-index="'+n+'"]').remove();var p="clip"+l._uid+"_ann"+n;if(e._input&&!1!==e.visible){var v={x:{},y:{}},m=+e.textangle||0,y=l._infolayer.append("g").classed(o,!0).attr("data-index",String(n)).style("opacity",e.opacity),b=y.append("g").classed("annotation-text-g",!0),x=u[e.showarrow?"annotationTail":"annotationPosition"],B=e.captureevents||u.annotationText||x,I=b.append("g").style("pointer-events",B?"all":null).call(VT,"pointer").on("click",(function(){t._dragging=!1,t.emit("plotly_clickannotation",G(GT.event))}));e.hovertext&&I.on("mouseover",(function(){var n=e.hoverlabel,r=n.font,i=this.getBoundingClientRect(),a=t.getBoundingClientRect();XT.loneHover({x0:i.left-a.left,x1:i.right-a.left,y:(i.top+i.bottom)/2-a.top,text:e.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color,fontWeight:r.weight,fontStyle:r.style,fontVariant:r.variant},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:t})})).on("mouseout",(function(){XT.loneUnhover(l._hoverlayer.node())}));var F=e.borderwidth,Q=e.borderpad,C=F+Q,w=I.append("rect").attr("class","bg").style("stroke-width",F+"px").call(NT.stroke,e.bordercolor).call(NT.fill,e.bgcolor),U=e.width||e.height,A=l._topclips.selectAll("#"+p).data(U?[0]:[]);A.enter().append("clipPath").classed("annclip",!0).attr("id",p).append("rect"),A.exit().remove();var S=e.font,L=l._meta?ET.templateString(e.text,l._meta):e.text,k=I.append("text").classed("annotation-text",!0).text(L);u.annotationText?k.call(ZT.makeEditable,{delegate:I,gd:t}).call(_).on("edit",(function(n){e.text=n,this.call(_),g("text",n),i&&i.autorange&&d(i._name+".autorange",!0),a&&a.autorange&&d(a._name+".autorange",!0),_T.call("_guiRelayout",t,f())})):k.call(_)}else GT.selectAll("#"+p).remove();function G(t){var i={index:n,annotation:e._input,fullAnnotation:e,event:t};return r&&(i.subplotId=r),i}function _(n){return n.call(DT.font,S).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),ZT.convertToTspans(n,t,R),n}function R(){var n=k.selectAll("a");1===n.size()&&n.text()===k.text()&&I.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(w.node());var o=I.select(".annotation-text-math-group"),s=!o.empty(),h=DT.bBox((s?o:k).node()),B=h.width,Q=h.height,S=e.width||B,L=e.height||Q,_=Math.round(S+2*C),R=Math.round(L+2*C);function E(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var T=!1,M=["x","y"],N=0;N<M.length;N++){var D,X,Z,V,H,W=M[N],Y=e[W+"ref"]||W,z=e["a"+W+"ref"],O={x:i,y:a}[W],J=(m+("x"===W?0:-90))*Math.PI/180,P=_*Math.cos(J),j=R*Math.sin(J),K=Math.abs(P)+Math.abs(j),q=e[W+"anchor"],$=e[W+"shift"]*("x"===W?1:-1),tt=v[W],et=MT.getRefType(Y);if(O&&"domain"!==et){var nt=O.r2fraction(e[W]);(nt<0||nt>1)&&(z===Y?((nt=O.r2fraction(e["a"+W]))<0||nt>1)&&(T=!0):T=!0),D=O._offset+O.r2p(e[W]),V=.5}else{var rt="domain"===et;"x"===W?(Z=e[W],D=rt?O._offset+O._length*Z:D=c.l+c.w*Z):(Z=1-e[W],D=rt?O._offset+O._length*Z:D=c.t+c.h*Z),V=e.showarrow?.5:Z}if(e.showarrow){tt.head=D;var it=e["a"+W];if(H=P*E(.5,e.xanchor)-j*E(.5,e.yanchor),z===Y){var at=MT.getRefType(z);"domain"===at?("y"===W&&(it=1-it),tt.tail=O._offset+O._length*it):"paper"===at?"y"===W?(it=1-it,tt.tail=c.t+c.h*it):tt.tail=c.l+c.w*it:tt.tail=O._offset+O.r2p(it),X=H}else tt.tail=D+it,X=H+it;tt.text=tt.tail+H;var ot=l["x"===W?"width":"height"];if("paper"===Y&&(tt.head=ET.constrain(tt.head,1,ot-1)),"pixel"===z){var st=-Math.max(tt.tail-3,tt.text),lt=Math.min(tt.tail+3,tt.text)-ot;st>0?(tt.tail+=st,tt.text+=st):lt>0&&(tt.tail-=lt,tt.text-=lt)}tt.tail+=$,tt.head+=$}else X=H=K*E(V,q),tt.text=D+H;tt.text+=$,H+=$,X+=$,e["_"+W+"padplus"]=K/2+X,e["_"+W+"padminus"]=K/2-X,e["_"+W+"size"]=K,e["_"+W+"shift"]=H}if(T)I.remove();else{var ct=0,ut=0;if("left"!==e.align&&(ct=(S-B)*("center"===e.align?.5:1)),"top"!==e.valign&&(ut=(L-Q)*("middle"===e.valign?.5:1)),s)o.select("svg").attr({x:C+ct-1,y:C+ut}).call(DT.setClipUrl,U?p:null,t);else{var ht=C+ut-h.top,dt=C+ct-h.left;k.call(ZT.positionText,dt,ht).call(DT.setClipUrl,U?p:null,t)}A.select("rect").call(DT.setRect,C,C,S,L),w.call(DT.setRect,F/2,F/2,_-F,R-F),I.call(DT.setTranslate,Math.round(v.x.text-_/2),Math.round(v.y.text-R/2)),b.attr({transform:"rotate("+m+","+v.x.text+","+v.y.text+")"});var gt,ft=function(n,o){y.selectAll(".annotation-arrow-g").remove();var s=v.x.head,l=v.y.head,h=v.x.tail+n,p=v.y.tail+o,x=v.x.text+n,B=v.y.text+o,F=ET.rotationXYMatrix(m,x,B),Q=ET.apply2DTransform(F),C=ET.apply2DTransform2(F),U=+w.attr("width"),A=+w.attr("height"),S=x-.5*U,L=S+U,k=B-.5*A,G=k+A,_=[[S,k,S,G],[S,G,L,G],[L,G,L,k],[L,k,S,k]].map(C);if(!_.reduce((function(t,e){return t^!!ET.segmentsIntersect(s,l,s+1e6,l+1e6,e[0],e[1],e[2],e[3])}),!1)){_.forEach((function(t){var e=ET.segmentsIntersect(h,p,s,l,t[0],t[1],t[2],t[3]);e&&(h=e.x,p=e.y)}));var R=e.arrowwidth,E=e.arrowcolor,T=e.arrowside,M=y.append("g").style({opacity:NT.opacity(E)}).classed("annotation-arrow-g",!0),N=M.append("path").attr("d","M"+h+","+p+"L"+s+","+l).style("stroke-width",R+"px").call(NT.stroke,NT.rgb(E));if(YT(N,T,e),u.annotationPosition&&N.node().parentNode&&!r){var D=s,X=l;if(e.standoff){var Z=Math.sqrt(Math.pow(s-h,2)+Math.pow(l-p,2));D+=e.standoff*(h-s)/Z,X+=e.standoff*(p-l)/Z}var V,H,W=M.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(h-D)+","+(p-X),transform:TT(D,X)}).style("stroke-width",R+6+"px").call(NT.stroke,"rgba(0,0,0,0)").call(NT.fill,"rgba(0,0,0,0)");HT.init({element:W.node(),gd:t,prepFn:function(){var t=DT.getTranslate(I);V=t.x,H=t.y,i&&i.autorange&&d(i._name+".autorange",!0),a&&a.autorange&&d(a._name+".autorange",!0)},moveFn:function(t,n){var r=Q(V,H),o=r[0]+t,s=r[1]+n;I.call(DT.setTranslate,o,s),g("x",JT(i,t,"x",c,e)),g("y",JT(a,n,"y",c,e)),e.axref===e.xref&&g("ax",JT(i,t,"ax",c,e)),e.ayref===e.yref&&g("ay",JT(a,n,"ay",c,e)),M.attr("transform",TT(t,n)),b.attr({transform:"rotate("+m+","+o+","+s+")"})},doneFn:function(){_T.call("_guiRelayout",t,f());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};if(e.showarrow&&ft(0,0),x)HT.init({element:I.node(),gd:t,prepFn:function(){gt=b.attr("transform")},moveFn:function(t,n){var o="pointer";if(e.showarrow)e.axref===e.xref?g("ax",JT(i,t,"ax",c,e)):g("ax",e.ax+t),e.ayref===e.yref?g("ay",JT(a,n,"ay",c.w,e)):g("ay",e.ay+n),ft(t,n);else{if(r)return;var s,l;if(i)s=JT(i,t,"x",c,e);else{var u=e._xsize/c.w,h=e.x+(e._xshift-e.xshift)/c.w-u/2;s=HT.align(h+t/c.w,u,0,1,e.xanchor)}if(a)l=JT(a,n,"y",c,e);else{var d=e._ysize/c.h,f=e.y-(e._yshift+e.yshift)/c.h-d/2;l=HT.align(f-n/c.h,d,0,1,e.yanchor)}g("x",s),g("y",l),i&&a||(o=HT.getCursor(i?.5:s,a?.5:l,e.xanchor,e.yanchor))}b.attr({transform:TT(t,n)+gt}),VT(I,o)},clickFn:function(n,r){e.captureevents&&t.emit("plotly_clickannotation",G(r))},doneFn:function(){VT(I),_T.call("_guiRelayout",t,f());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}var jT=yf,KT=hh,qT=$f.arrayEditor,$T={hasClickToShow:function(t,e){var n=tM(t,e);return n.on.length>0||n.explicitOff.length>0},onClick:function(t,e){var n,r,i=tM(t,e),a=i.on,o=i.off.concat(i.explicitOff),s={},l=t._fullLayout.annotations;if(!a.length&&!o.length)return;for(n=0;n<a.length;n++)(r=qT(t.layout,"annotations",l[a[n]])).modifyItem("visible",!0),jT.extendFlat(s,r.getUpdateObj());for(n=0;n<o.length;n++)(r=qT(t.layout,"annotations",l[o[n]])).modifyItem("visible",!1),jT.extendFlat(s,r.getUpdateObj());return KT.call("update",t,{},s)}};function tM(t,e){var n,r,i,a,o,s,l,c=t._fullLayout.annotations,u=[],h=[],d=[],g=(e||[]).length;for(n=0;n<c.length;n++)if(a=(i=c[n]).clicktoshow){for(r=0;r<g;r++)if(s=(o=e[r]).xaxis,l=o.yaxis,s._id===i.xref&&l._id===i.yref&&s.d2r(o.x)===eM(i._xclick,s)&&l.d2r(o.y)===eM(i._yclick,l)){(i.visible?"onout"===a?h:d:u).push(n);break}r===g&&i.visible&&"onout"===a&&h.push(n)}return{on:u,off:h,explicitOff:d}}function eM(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}var nM=yf,rM=Pu,iM=function(t,e,n,r){r("opacity");var i=r("bgcolor"),a=r("bordercolor"),o=rM.opacity(a);r("borderpad");var s=r("borderwidth"),l=r("showarrow");if(r("text",l?" ":n._dfltTitle.annotation),r("textangle"),nM.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),l){var c,u,h=r("arrowside");-1!==h.indexOf("end")&&(c=r("arrowhead"),u=r("arrowsize")),-1!==h.indexOf("start")&&(r("startarrowhead",c),r("startarrowsize",u)),r("arrowcolor",o?e.bordercolor:rM.defaultLine),r("arrowwidth",2*(o&&s||1)),r("standoff"),r("startstandoff")}var d=r("hovertext"),g=n.hoverlabel||{};if(d){var f=r("hoverlabel.bgcolor",g.bgcolor||(rM.opacity(i)?rM.rgb(i):rM.defaultLine)),p=r("hoverlabel.bordercolor",g.bordercolor||rM.contrast(f)),v=nM.extendFlat({},g.font);v.color||(v.color=p),nM.coerceFont(r,"hoverlabel.font",v)}r("captureevents",!!d)},aM=yf,oM=iI,sM=Sm,lM=iM,cM=iL;function uM(t,e,n){function r(n,r){return aM.coerce(t,e,cM,n,r)}var i=r("visible"),a=r("clicktoshow");if(i||a){lM(t,e,n,r);for(var o=e.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:n},u=0;u<2;u++){var h=s[u],d=oM.coerceRef(t,e,c,h,"","paper");if("paper"!==d)oM.getFromId(c,d)._annIndices.push(e._index);if(oM.coercePosition(e,c,r,d,h,.5),o){var g="a"+h,f=oM.coerceRef(t,e,c,g,"pixel",["pixel","paper"]);"pixel"!==f&&f!==d&&(f=e[g]="pixel");var p="pixel"===f?l[u]:.4;oM.coercePosition(e,c,r,f,g,p)}r(h+"anchor"),r(h+"shift")}if(aM.noneOrAll(t,e,["x","y"]),o&&aM.noneOrAll(t,e,["ax","ay"]),a){var v=r("xclick"),m=r("yclick");e._xclick=void 0===v?e.x:oM.cleanPosition(v,c,e.xref),e._yclick=void 0===m?e.y:oM.cleanPosition(m,c,e.yref)}}}var hM=yf,dM=iI,gM=zT.draw;function fM(t){var e=t._fullLayout;hM.filterVisible(e.annotations).forEach((function(e){var n=dM.getFromId(t,e.xref),r=dM.getFromId(t,e.yref),i=dM.getRefType(e.xref),a=dM.getRefType(e.yref);e._extremes={},"range"===i&&pM(e,n),"range"===a&&pM(e,r)}))}function pM(t,e){var n,r=e._id,i=r.charAt(0),a=t[i],o=t["a"+i],s=t[i+"ref"],l=t["a"+i+"ref"],c=t["_"+i+"padplus"],u=t["_"+i+"padminus"],h={x:1,y:-1}[i]*t[i+"shift"],d=3*t.arrowsize*t.arrowwidth||0,g=d+h,f=d-h,p=3*t.startarrowsize*t.arrowwidth||0,v=p+h,m=p-h;if(l===s){var y=dM.findExtremes(e,[e.r2c(a)],{ppadplus:g,ppadminus:f}),b=dM.findExtremes(e,[e.r2c(o)],{ppadplus:Math.max(c,v),ppadminus:Math.max(u,m)});n={min:[y.min[0],b.min[0]],max:[y.max[0],b.max[0]]}}else v=o?v+o:v,m=o?m-o:m,n=dM.findExtremes(e,[e.r2c(a)],{ppadplus:Math.max(c,g,v),ppadminus:Math.max(u,f,m)});t._extremes[r]=n}var vM=Ac,mM=lu,yM=zT,bM=$T,xM={moduleType:"component",name:"annotations",layoutAttributes:iL,supplyLayoutDefaults:function(t,e){sM(t,e,{name:"annotations",handleItemDefaults:uM})},includeBasePlot:TL("annotations"),calcAutorange:function(t){var e=t._fullLayout;if(hM.filterVisible(e.annotations).length&&t._fullData.length)return hM.syncOrAsync([gM,fM],t)},draw:yM.draw,drawOne:yM.drawOne,drawRaw:yM.drawRaw,hasClickToShow:bM.hasClickToShow,onClick:bM.onClick,convertCoords:function(t,e,n,r){e=e||{};var i="log"===n&&"linear"===e.type,a="linear"===n&&"log"===e.type;if(i||a)for(var o,s,l=t._fullLayout.annotations,c=e._id.charAt(0),u=0;u<l.length;u++)o=l[u],s="annotations["+u+"].",o[c+"ref"]===e._id&&h(c),o["a"+c+"ref"]===e._id&&h("a"+c);function h(t){var n=o[t],a=null;a=i?mM(n,e.range):Math.pow(10,n),vM(a)||(a=null),r(s+t,a)}}},BM=iL,IM=(0,sd.overrideAll)((0,$f.templatedArray)("annotation",{visible:BM.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:BM.xanchor,xshift:BM.xshift,yanchor:BM.yanchor,yshift:BM.yshift,text:BM.text,textangle:BM.textangle,font:BM.font,width:BM.width,height:BM.height,opacity:BM.opacity,align:BM.align,valign:BM.valign,bgcolor:BM.bgcolor,bordercolor:BM.bordercolor,borderpad:BM.borderpad,borderwidth:BM.borderwidth,showarrow:BM.showarrow,arrowcolor:BM.arrowcolor,arrowhead:BM.arrowhead,startarrowhead:BM.startarrowhead,arrowside:BM.arrowside,arrowsize:BM.arrowsize,startarrowsize:BM.startarrowsize,arrowwidth:BM.arrowwidth,standoff:BM.standoff,startstandoff:BM.startstandoff,hovertext:BM.hovertext,hoverlabel:BM.hoverlabel,captureevents:BM.captureevents}),"calc","from-root"),FM=yf,QM=iI,CM=Sm,wM=iM,UM=IM;function AM(t,e,n,r){function i(n,r){return FM.coerce(t,e,UM,n,r)}function a(t){var r=t+"axis",a={_fullLayout:{}};return a._fullLayout[r]=n[r],QM.coercePosition(e,a,i,t,t,.5)}i("visible")&&(wM(t,e,r.fullLayout,i),a("x"),a("y"),a("z"),FM.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",i("ax",-10),i("ay",-30),FM.noneOrAll(t,e,["ax","ay"])))}var SM=yf,LM=iI;function kM(t,e){var n=e.fullSceneLayout.domain,r=e.fullLayout._size,i={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},SM.extendFlat(t._xa,i),LM.setConvert(t._xa),t._xa._offset=r.l+n.x[0]*r.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*r.w*(n.x[1]-n.x[0])},t._ya={},SM.extendFlat(t._ya,i),LM.setConvert(t._ya),t._ya._offset=r.t+(1-n.y[1])*r.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*r.h*(n.y[1]-n.y[0])}}function GM(t,e){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=t[4*n+r]*e[n];return i}var _M=function(t,e){return GM(t.projection,GM(t.view,GM(t.model,[e[0],e[1],e[2],1])))},RM=zT.drawRaw,EM=_M,TM=["x","y","z"],MM=hh,NM=yf,DM={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:IM}}},layoutAttributes:IM,handleDefaults:function(t,e,n){CM(t,e,{name:"annotations",handleItemDefaults:AM,fullLayout:n.fullLayout})},includeBasePlot:function(t,e){var n=MM.subplotsRegistry.gl3d;if(!n)return;for(var r=n.attrRegex,i=Object.keys(t),a=0;a<i.length;a++){var o=i[a];r.test(o)&&(t[o].annotations||[]).length&&(NM.pushUnique(e._basePlotModules,n),NM.pushUnique(e._subplots.gl3d,o))}},convert:function(t){for(var e=t.fullSceneLayout.annotations,n=0;n<e.length;n++)kM(e[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()},draw:function(t){for(var e=t.fullSceneLayout,n=t.dataScale,r=e.annotations,i=0;i<r.length;i++){for(var a=r[i],o=!1,s=0;s<3;s++){var l=TM[s],c=a[l],u=e[l+"axis"].r2fraction(c);if(u<0||u>1){o=!0;break}}o?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+i+'"]').remove():(a._pdata=EM(t.glplot.cameraParams,[e.xaxis.r2l(a.x)*n[0],e.yaxis.r2l(a.y)*n[1],e.zaxis.r2l(a.z)*n[2]]),RM(t.graphDiv,a,i,t.id,a._xa,a._ya))}}};var XM=iL,ZM=mu(),VM=xL.line,HM=hd.dash,WM=Fu.extendFlat,YM=$f.templatedArray,zM=KS,OM=_u,JM=dd.shapeTexttemplateAttrs,PM=Id,jM=YM("shape",{visible:WM({},OM.visible,{editType:"calc+arraydraw",description:["Determines whether or not this shape is visible.","If *legendonly*, the shape is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether or not this","shape is shown in the legend."].join(" ")},legend:WM({},OM.legend,{editType:"calc+arraydraw",description:["Sets the reference to a legend to show this shape in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")}),legendgroup:WM({},OM.legendgroup,{editType:"calc+arraydraw",description:["Sets the legend group for this shape.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")}),legendgrouptitle:{text:WM({},OM.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:ZM({editType:"calc+arraydraw",description:["Sets this legend group's title font."].join(" ")}),editType:"calc+arraydraw"},legendrank:WM({},OM.legendrank,{editType:"calc+arraydraw",description:["Sets the legend rank for this shape.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items.","When having unranked or equal rank items shapes would be displayed after traces","i.e. according to their order in data and layout."].join(" ")}),legendwidth:WM({},OM.legendwidth,{editType:"calc+arraydraw",description:"Sets the width (in px or fraction) of the legend for this shape."}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw",description:["Specifies whether shapes are drawn below gridlines (*below*),","between gridlines and traces (*between*) or above traces (*above*)."].join(" ")},xref:WM({},XM.xref,{description:["Sets the shape's x coordinate axis.",zM.axisRefDescription("x","left","right")].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},yref:WM({},XM.yref,{description:["Sets the shape's y coordinate axis.",zM.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:WM({},VM.color,{editType:"arraydraw"}),width:WM({},VM.width,{editType:"calc+arraydraw"}),dash:WM({},HM,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},label:{text:{valType:"string",dflt:"",editType:"arraydraw",description:["Sets the text to display with shape.","It is also used for legend item if `name` is not provided."].join(" ")},texttemplate:JM({},{keys:Object.keys(PM)}),font:ZM({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw",description:["Sets the position of the label text relative to the shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw",description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw",description:"Sets padding (in px) between edge of label and edge of shape."},editType:"arraydraw"},editType:"arraydraw"}),KM=yf,qM=iI,$M=Sm,tN=jM,eN=YC;function nN(t,e,n){function r(n,r){return KM.coerce(t,e,tN,n,r)}if(e._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),KM.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var i=r("path"),a=r("type",i?"path":"rect"),o="path"!==a;o&&delete e.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var s=r("xsizemode"),l=r("ysizemode"),c=["x","y"],u=0;u<2;u++){var h,d,g,f=c[u],p=f+"anchor",v="x"===f?s:l,m={_fullLayout:n},y=qM.coerceRef(t,e,m,f,void 0,"paper");if("range"===qM.getRefType(y)?((h=qM.getFromId(m,y))._shapeIndices.push(e._index),g=eN.rangeToShapePosition(h),d=eN.shapePositionToRange(h)):d=g=KM.identity,o){var b=f+"0",x=f+"1",B=t[b],I=t[x];t[b]=d(t[b],!0),t[x]=d(t[x],!0),"pixel"===v?(r(b,0),r(x,10)):(qM.coercePosition(e,m,r,y,b,.25),qM.coercePosition(e,m,r,y,x,.75)),e[b]=g(e[b]),e[x]=g(e[x]),t[b]=B,t[x]=I}if("pixel"===v){var F=t[p];t[p]=d(t[p],!0),qM.coercePosition(e,m,r,y,p,.25),e[p]=g(e[p]),t[p]=F}}o&&KM.noneOrAll(t,e,["x0","x1","y0","y1"]);var Q,C,w="line"===a;if(o&&(Q=r("label.texttemplate")),Q||(C=r("label.text")),C||Q){r("label.textangle");var U=r("label.textposition",w?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(t,e){return t?"bottom":-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle"}(w,U)),r("label.padding"),KM.coerceFont(r,"label.font",n.font)}}}var rN=Pu,iN=yf;var aN=yf,oN=iI,sN=zC,lN=YC;function cN(t){return hN(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function uN(t){return hN(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function hN(t,e,n,r,i,a){var o=t/2,s=a;if("pixel"===e){var l=i?lN.extractPathCoords(i,a?sN.paramIsY:sN.paramIsX):[n,r],c=aN.aggNums(Math.max,null,l),u=aN.aggNums(Math.min,null,l),h=u<0?Math.abs(u)+o:o,d=c>0?c+o:o;return{ppad:o,ppadplus:s?h:d,ppadminus:s?d:h}}return{ppad:o}}function dN(t,e,n,r,i){var a="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==e)return[a(e),a(n)];if(r){var o,s,l,c,u=1/0,h=-1/0,d=r.match(sN.segmentRE);for("date"===t.type&&(a=lN.decodeDate(a)),o=0;o<d.length;o++)void 0!==(s=i[d[o].charAt(0)].drawn)&&(!(l=d[o].substr(1).match(sN.paramRE))||l.length<s||((c=a(l[s]))<u&&(u=c),c>h&&(h=c)));return h>=u?[u,h]:void 0}}var gN=Dw,fN={moduleType:"component",name:"shapes",layoutAttributes:jM,supplyLayoutDefaults:function(t,e){$M(t,e,{name:"shapes",handleItemDefaults:nN})},supplyDrawNewShapeDefaults:function(t,e,n){if(n("newshape.visible"),n("newshape.name"),n("newshape.showlegend"),n("newshape.legend"),n("newshape.legendwidth"),n("newshape.legendgroup"),n("newshape.legendgrouptitle.text"),iN.coerceFont(n,"newshape.legendgrouptitle.font"),n("newshape.legendrank"),n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")){var r=(t||{}).plot_bgcolor||"#FFF";n("newshape.line.color",rN.contrast(r)),n("newshape.line.dash")}var i="drawline"===t.dragmode,a=n("newshape.label.text"),o=n("newshape.label.texttemplate");if(a||o){n("newshape.label.textangle");var s=n("newshape.label.textposition",i?"middle":"middle center");n("newshape.label.xanchor"),n("newshape.label.yanchor",function(t,e){return t?"bottom":-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle"}(i,s)),n("newshape.label.padding"),iN.coerceFont(n,"newshape.label.font",e.font)}n("activeshape.fillcolor"),n("activeshape.opacity")},includeBasePlot:TL("shapes"),calcAutorange:function(t){var e=t._fullLayout,n=aN.filterVisible(e.shapes);if(n.length&&t._fullData.length)for(var r=0;r<n.length;r++){var i,a,o=n[r];o._extremes={};var s=oN.getRefType(o.xref),l=oN.getRefType(o.yref);if("paper"!==o.xref&&"domain"!==s){var c="pixel"===o.xsizemode?o.xanchor:o.x0,u="pixel"===o.xsizemode?o.xanchor:o.x1;(a=dN(i=oN.getFromId(t,o.xref),c,u,o.path,sN.paramIsX))&&(o._extremes[i._id]=oN.findExtremes(i,a,cN(o)))}if("paper"!==o.yref&&"domain"!==l){var h="pixel"===o.ysizemode?o.yanchor:o.y0,d="pixel"===o.ysizemode?o.yanchor:o.y1;(a=dN(i=oN.getFromId(t,o.yref),h,d,o.path,sN.paramIsY))&&(o._extremes[i._id]=oN.findExtremes(i,a,uN(o)))}}},draw:gN.draw,drawOne:gN.drawOne},pN=lp,vN=KS,mN=(0,$f.templatedArray)("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",pN.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",vN.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",pN.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",vN.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"}),yN=yf,bN=iI,xN=Sm,BN=mN;function IN(t,e,n){function r(n,r){return yN.coerce(t,e,BN,n,r)}var i=r("source");if(!r("visible",!!i))return e;r("layer"),r("xanchor"),r("yanchor"),r("sizex"),r("sizey"),r("sizing"),r("opacity");for(var a={_fullLayout:n},o=["x","y"],s=0;s<2;s++){var l=o[s],c=bN.coerceRef(t,e,a,l,"paper",void 0);if("paper"!==c)bN.getFromId(a,c)._imgIndices.push(e._index);bN.coercePosition(e,a,r,c,l,0)}return e}var FN=uo,QN=Qb,CN=iI,wN=op,UN=ev,AN=Ac,SN=lu,LN={moduleType:"component",name:"images",layoutAttributes:mN,supplyLayoutDefaults:function(t,e){xN(t,e,{name:"images",handleItemDefaults:IN})},includeBasePlot:TL("images"),draw:function(t){var e,n,r=t._fullLayout,i=[],a={},o=[];for(n=0;n<r.images.length;n++){var s=r.images[n];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){e=wN.ref2id(s.xref)+wN.ref2id(s.yref);var l=r._plots[e];if(!l){o.push(s);continue}l.mainplot&&(e=l.mainplot.id),a[e]||(a[e]=[]),a[e].push(s)}else"above"===s.layer?i.push(s):o.push(s)}var c={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},u={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function h(e){var n=FN.select(this);if(this._imgSrc!==e.source)if(n.attr("xmlns",UN.svg),e.source&&"data:"===e.source.slice(0,5))n.attr("xlink:href",e.source),this._imgSrc=e.source;else{var r=new Promise(function(t){var r=new Image;function i(){n.remove(),t()}this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=i,r.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r),t()},n.on("error",i),r.src=e.source,this._imgSrc=e.source}.bind(this));t._promises.push(r)}}function d(e){var n,i,a=FN.select(this),o=CN.getFromId(t,e.xref),s=CN.getFromId(t,e.yref),l="domain"===CN.getRefType(e.xref),h="domain"===CN.getRefType(e.yref),d=r._size;n=void 0!==o?"string"==typeof e.xref&&l?o._length*e.sizex:Math.abs(o.l2p(e.sizex)-o.l2p(0)):e.sizex*d.w,i=void 0!==s?"string"==typeof e.yref&&h?s._length*e.sizey:Math.abs(s.l2p(e.sizey)-s.l2p(0)):e.sizey*d.h;var g,f,p=n*c[e.xanchor].offset,v=i*u[e.yanchor].offset,m=c[e.xanchor].sizing+u[e.yanchor].sizing;switch(g=void 0!==o?"string"==typeof e.xref&&l?o._length*e.x+o._offset:o.r2p(e.x)+o._offset:e.x*d.w+d.l,g+=p,f=void 0!==s?"string"==typeof e.yref&&h?s._length*(1-e.y)+s._offset:s.r2p(e.y)+s._offset:d.h-e.y*d.h+d.t,f+=v,e.sizing){case"fill":m+=" slice";break;case"stretch":m="none"}a.attr({x:g,y:f,width:n,height:i,preserveAspectRatio:m,opacity:e.opacity});var y=(o&&"domain"!==CN.getRefType(e.xref)?o._id:"")+(s&&"domain"!==CN.getRefType(e.yref)?s._id:"");QN.setClipUrl(a,y?"clip"+r._uid+y:null,t)}var g=r._imageLowerLayer.selectAll("image").data(o),f=r._imageUpperLayer.selectAll("image").data(i);g.enter().append("image"),f.enter().append("image"),g.exit().remove(),f.exit().remove(),g.each((function(t){h.bind(this)(t),d.bind(this)(t)})),f.each((function(t){h.bind(this)(t),d.bind(this)(t)}));var p=Object.keys(r._plots);for(n=0;n<p.length;n++){e=p[n];var v=r._plots[e];if(v.imagelayer){var m=v.imagelayer.selectAll("image").data(a[e]||[]);m.enter().append("image"),m.exit().remove(),m.each((function(t){h.bind(this)(t),d.bind(this)(t)}))}}},convertCoords:function(t,e,n,r){e=e||{};var i="log"===n&&"linear"===e.type,a="linear"===n&&"log"===e.type;if(i||a)for(var o,s,l=t._fullLayout.images,c=e._id.charAt(0),u=0;u<l.length;u++)if(s="images["+u+"].",(o=l[u])[c+"ref"]===e._id){var h=o[c],d=o["size"+c],g=null,f=null;if(i){g=SN(h,e.range);var p=d/Math.pow(10,g)/2;f=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10}else f=(g=Math.pow(10,h))*(Math.pow(10,d/2)-Math.pow(10,-d/2));AN(g)?AN(f)||(f=null):(g=null,f=null),r(s+c,g),r(s+"size"+c,f)}}},kN={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}},GN=mu(),_N=Xu,RN=Fu.extendFlat,EN=sd.overrideAll,TN=Rd,MN=$f.templatedArray,NN=MN("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),DN=EN(MN("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:NN,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:RN(TN({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:GN({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:_N.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root"),XN=yf,ZN=Sm,VN=DN,HN=kN.name,WN=VN.buttons;function YN(t,e,n){function r(n,r){return XN.coerce(t,e,VN,n,r)}r("visible",ZN(t,e,{name:"buttons",handleItemDefaults:zN}).length>0)&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),XN.noneOrAll(t,e,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),XN.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function zN(t,e){function n(n,r){return XN.coerce(t,e,WN,n,r)}n("visible","skip"===t.method||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}var ON=qN,JN=uo,PN=Pu,jN=Qb,KN=yf;function qN(t,e,n){this.gd=t,this.container=e,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}qN.barWidth=2,qN.barLength=20,qN.barRadius=2,qN.barPad=1,qN.barColor="#808BA4",qN.prototype.enable=function(t,e,n){var r=this.gd._fullLayout,i=r.width,a=r.height;this.position=t;var o,s,l,c,u=this.position.l,h=this.position.w,d=this.position.t,g=this.position.h,f=this.position.direction,p="down"===f,v="left"===f,m="up"===f,y=h,b=g;p||v||"right"===f||m||(this.position.direction="down",p=!0),p||m?(s=(o=u)+y,p?(l=d,b=(c=Math.min(l+b,a))-l):b=(c=d+b)-(l=Math.max(c-b,0))):(c=(l=d)+b,v?y=(s=u+y)-(o=Math.max(s-y,0)):(o=u,y=(s=Math.min(o+y,i))-o)),this._box={l:o,t:l,w:y,h:b};var x=h>y,B=qN.barLength+2*qN.barPad,I=qN.barWidth+2*qN.barPad,F=u,Q=d+g;Q+I>a&&(Q=a-I);var C=this.container.selectAll("rect.scrollbar-horizontal").data(x?[0]:[]);C.exit().on(".drag",null).remove(),C.enter().append("rect").classed("scrollbar-horizontal",!0).call(PN.fill,qN.barColor),x?(this.hbar=C.attr({rx:qN.barRadius,ry:qN.barRadius,x:F,y:Q,width:B,height:I}),this._hbarXMin=F+B/2,this._hbarTranslateMax=y-B):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var w=g>b,U=qN.barWidth+2*qN.barPad,A=qN.barLength+2*qN.barPad,S=u+h,L=d;S+U>i&&(S=i-U);var k=this.container.selectAll("rect.scrollbar-vertical").data(w?[0]:[]);k.exit().on(".drag",null).remove(),k.enter().append("rect").classed("scrollbar-vertical",!0).call(PN.fill,qN.barColor),w?(this.vbar=k.attr({rx:qN.barRadius,ry:qN.barRadius,x:S,y:L,width:U,height:A}),this._vbarYMin=L+A/2,this._vbarTranslateMax=b-A):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var G=this.id,_=o-.5,R=w?s+U+.5:s+.5,E=l-.5,T=x?c+I+.5:c+.5,M=r._topdefs.selectAll("#"+G).data(x||w?[0]:[]);if(M.exit().remove(),M.enter().append("clipPath").attr("id",G).append("rect"),x||w?(this._clipRect=M.select("rect").attr({x:Math.floor(_),y:Math.floor(E),width:Math.ceil(R)-Math.floor(_),height:Math.ceil(T)-Math.floor(E)}),this.container.call(jN.setClipUrl,G,this.gd),this.bg.attr({x:u,y:d,width:h,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(jN.setClipUrl,null),delete this._clipRect),x||w){var N=JN.behavior.drag().on("dragstart",(function(){JN.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(N);var D=JN.behavior.drag().on("dragstart",(function(){JN.event.sourceEvent.preventDefault(),JN.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));x&&this.hbar.on(".drag",null).call(D),w&&this.vbar.on(".drag",null).call(D)}this.setTranslate(e,n)},qN.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(jN.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},qN.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=JN.event.dx),this.vbar&&(e-=JN.event.dy),this.setTranslate(t,e)},qN.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=JN.event.deltaY),this.vbar&&(e+=JN.event.deltaY),this.setTranslate(t,e)},qN.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var n=t+this._hbarXMin,r=n+this._hbarTranslateMax;t=(KN.constrain(JN.event.x,n,r)-n)/(r-n)*(this.position.w-this._box.w)}if(this.vbar){var i=e+this._vbarYMin,a=i+this._vbarTranslateMax;e=(KN.constrain(JN.event.y,i,a)-i)/(a-i)*(this.position.h-this._box.h)}this.setTranslate(t,e)},qN.prototype.setTranslate=function(t,e){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(t=KN.constrain(t||0,0,n),e=KN.constrain(e||0,0,r),this.translateX=t,this.translateY=e,this.container.call(jN.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var i=t/n;this.hbar.call(jN.setTranslate,t+i*this._hbarTranslateMax,e)}if(this.vbar){var a=e/r;this.vbar.call(jN.setTranslate,t,e+a*this._vbarTranslateMax)}};var $N=uo,tD=qp,eD=Pu,nD=Qb,rD=yf,iD=tv,aD=$f.arrayEditor,oD=nv.LINE_SPACING,sD=kN,lD=ON;function cD(t){return t._index}function uD(t,e){return+t.attr(sD.menuIndexAttrName)===e._index}function hD(t,e,n,r,i,a,o,s){e.active=o,aD(t.layout,sD.name,e).applyUpdate("active",o),"buttons"===e.type?gD(t,r,null,null,e):"dropdown"===e.type&&(i.attr(sD.menuIndexAttrName,"-1"),dD(t,r,i,a,e),s||gD(t,r,i,a,e))}function dD(t,e,n,r,i){var a=rD.ensureSingle(e,"g",sD.headerClassName,(function(t){t.style("pointer-events","all")})),o=i._dims,s=i.active,l=i.buttons[s]||sD.blankHeaderOpts,c={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},u={width:o.headerWidth,height:o.headerHeight};a.call(fD,i,l,t).call(ID,i,c,u);var h=rD.ensureSingle(e,"text",sD.headerArrowClassName,(function(t){t.attr("text-anchor","end").call(nD.font,i.font).text(sD.arrowSymbol[i.direction])}));h.attr({x:o.headerWidth-sD.arrowOffsetX+i.pad.l,y:o.headerHeight/2+sD.textOffsetY+i.pad.t}),a.on("click",(function(){n.call(FD,String(uD(n,i)?-1:i._index)),gD(t,e,n,r,i)})),a.on("mouseover",(function(){a.call(yD)})),a.on("mouseout",(function(){a.call(bD,i)})),nD.setTranslate(e,o.lx,o.ly)}function gD(t,e,n,r,i){n||(n=e).attr("pointer-events","all");var a=function(t){return-1==+t.attr(sD.menuIndexAttrName)}(n)&&"buttons"!==i.type?[]:i.buttons,o="dropdown"===i.type?sD.dropdownButtonClassName:sD.buttonClassName,s=n.selectAll("g."+o).data(rD.filterVisible(a)),l=s.enter().append("g").classed(o,!0),c=s.exit();"dropdown"===i.type?(l.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var u=0,h=0,d=i._dims,g=-1!==["up","down"].indexOf(i.direction);"dropdown"===i.type&&(g?h=d.headerHeight+sD.gapButtonHeader:u=d.headerWidth+sD.gapButtonHeader),"dropdown"===i.type&&"up"===i.direction&&(h=-sD.gapButtonHeader+sD.gapButton-d.openHeight),"dropdown"===i.type&&"left"===i.direction&&(u=-sD.gapButtonHeader+sD.gapButton-d.openWidth);var f={x:d.lx+u+i.pad.l,y:d.ly+h+i.pad.t,yPad:sD.gapButton,xPad:sD.gapButton,index:0},p={l:f.x+i.borderwidth,t:f.y+i.borderwidth};s.each((function(a,o){var l=$N.select(this);l.call(fD,i,a,t).call(ID,i,f),l.on("click",(function(){$N.event.defaultPrevented||(a.execute&&(a.args2&&i.active===o?(hD(t,i,0,e,n,r,-1),tD.executeAPICommand(t,a.method,a.args2)):(hD(t,i,0,e,n,r,o),tD.executeAPICommand(t,a.method,a.args))),t.emit("plotly_buttonclicked",{menu:i,button:a,active:i.active}))})),l.on("mouseover",(function(){l.call(yD)})),l.on("mouseout",(function(){l.call(bD,i),s.call(mD,i)}))})),s.call(mD,i),g?(p.w=Math.max(d.openWidth,d.headerWidth),p.h=f.y-p.t):(p.w=f.x-p.l,p.h=Math.max(d.openHeight,d.headerHeight)),p.direction=i.direction,r&&(s.size()?function(t,e,n,r,i,a){var o,s,l,c=i.direction,u="up"===c||"down"===c,h=i._dims,d=i.active;if(u)for(s=0,l=0;l<d;l++)s+=h.heights[l]+sD.gapButton;else for(o=0,l=0;l<d;l++)o+=h.widths[l]+sD.gapButton;r.enable(a,o,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1");r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,r,i,p):function(t){var e=!!t.hbar,n=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",(function(){e=!1,n||t.disable()}));n&&t.vbar.transition().attr("opacity","0").each("end",(function(){n=!1,e||t.disable()}))}(r))}function fD(t,e,n,r){t.call(pD,e).call(vD,e,n,r)}function pD(t,e){var n=rD.ensureSingle(t,"rect",sD.itemRectClassName,(function(t){t.attr({rx:sD.rx,ry:sD.ry,"shape-rendering":"crispEdges"})}));n.call(eD.stroke,e.bordercolor).call(eD.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function vD(t,e,n,r){var i=rD.ensureSingle(t,"text",sD.itemTextClassName,(function(t){t.attr({"text-anchor":"start","data-notex":1})})),a=n.label,o=r._fullLayout._meta;o&&(a=rD.templateString(a,o)),i.call(nD.font,e.font).text(a).call(iD.convertToTspans,r)}function mD(t,e){var n=e.active;t.each((function(t,r){var i=$N.select(this);r===n&&e.showactive&&i.select("rect."+sD.itemRectClassName).call(eD.fill,sD.activeColor)}))}function yD(t){t.select("rect."+sD.itemRectClassName).call(eD.fill,sD.hoverColor)}function bD(t,e){t.select("rect."+sD.itemRectClassName).call(eD.fill,e.bgcolor)}function xD(t,e){var n=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},r=nD.tester.selectAll("g."+sD.dropdownButtonClassName).data(rD.filterVisible(e.buttons));r.enter().append("g").classed(sD.dropdownButtonClassName,!0);var i=-1!==["up","down"].indexOf(e.direction);r.each((function(r,a){var o=$N.select(this);o.call(fD,e,r,t);var s=o.select("."+sD.itemTextClassName),l=s.node()&&nD.bBox(s.node()).width,c=Math.max(l+sD.textPadX,sD.minWidth),u=e.font.size*oD,h=iD.lineCount(s),d=Math.max(u*h,sD.minHeight)+sD.textOffsetY;d=Math.ceil(d),c=Math.ceil(c),n.widths[a]=c,n.heights[a]=d,n.height1=Math.max(n.height1,d),n.width1=Math.max(n.width1,c),i?(n.totalWidth=Math.max(n.totalWidth,c),n.openWidth=n.totalWidth,n.totalHeight+=d+sD.gapButton,n.openHeight+=d+sD.gapButton):(n.totalWidth+=c+sD.gapButton,n.openWidth+=c+sD.gapButton,n.totalHeight=Math.max(n.totalHeight,d),n.openHeight=n.totalHeight)})),i?n.totalHeight-=sD.gapButton:n.totalWidth-=sD.gapButton,n.headerWidth=n.width1+sD.arrowPadX,n.headerHeight=n.height1,"dropdown"===e.type&&(i?(n.width1+=sD.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=sD.arrowPadX),r.remove();var a=n.totalWidth+e.pad.l+e.pad.r,o=n.totalHeight+e.pad.t+e.pad.b,s=t._fullLayout._size;n.lx=s.l+s.w*e.x,n.ly=s.t+s.h*(1-e.y);var l="left";rD.isRightAnchor(e)&&(n.lx-=a,l="right"),rD.isCenterAnchor(e)&&(n.lx-=a/2,l="center");var c="top";rD.isBottomAnchor(e)&&(n.ly-=o,c="bottom"),rD.isMiddleAnchor(e)&&(n.ly-=o/2,c="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),tD.autoMargin(t,BD(e),{x:e.x,y:e.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:o*({top:1,middle:.5}[c]||0),t:o*({bottom:1,middle:.5}[c]||0)})}function BD(t){return sD.autoMarginIdRoot+t._index}function ID(t,e,n,r){r=r||{};var i=t.select("."+sD.itemRectClassName),a=t.select("."+sD.itemTextClassName),o=e.borderwidth,s=n.index,l=e._dims;nD.setTranslate(t,o+n.x,o+n.y);var c=-1!==["up","down"].indexOf(e.direction),u=r.height||(c?l.heights[s]:l.height1);i.attr({x:0,y:0,width:r.width||(c?l.width1:l.widths[s]),height:u});var h=e.font.size*oD,d=(iD.lineCount(a)-1)*h/2;iD.positionText(a,sD.textOffsetX,u/2-d+sD.textOffsetY),c?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function FD(t,e){t.attr(sD.menuIndexAttrName,e||"-1").selectAll("g."+sD.dropdownButtonClassName).remove()}var QD={moduleType:"component",name:kN.name,layoutAttributes:DN,supplyLayoutDefaults:function(t,e){ZN(t,e,{name:HN,handleItemDefaults:YN})},draw:function(t){var e=t._fullLayout,n=rD.filterVisible(e[sD.name]);function r(e){tD.autoMargin(t,BD(e))}var i=e._menulayer.selectAll("g."+sD.containerClassName).data(n.length>0?[0]:[]);if(i.enter().append("g").classed(sD.containerClassName,!0).style("cursor","pointer"),i.exit().each((function(){$N.select(this).selectAll("g."+sD.headerGroupClassName).each(r)})).remove(),0!==n.length){var a=i.selectAll("g."+sD.headerGroupClassName).data(n,cD);a.enter().append("g").classed(sD.headerGroupClassName,!0);for(var o=rD.ensureSingle(i,"g",sD.dropdownButtonGroupClassName,(function(t){t.style("pointer-events","all")})),s=0;s<n.length;s++){var l=n[s];xD(t,l)}var c="updatemenus"+e._uid,u=new lD(t,o,c);a.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(FD)),a.exit().each((function(t){o.call(FD),r(t)})).remove(),a.each((function(e){var n=$N.select(this),r="dropdown"===e.type?o:null;tD.manageCommandObserver(t,e,e.buttons,(function(i){hD(t,e,e.buttons[i.index],n,r,u,i.index,!0)})),"dropdown"===e.type?(dD(t,n,o,u,e),uD(o,e)&&gD(t,n,o,u,e)):gD(t,n,null,null,e)}))}}},CD={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},wD=mu(),UD=Rd,AD=Fu.extendDeepAll,SD=sd.overrideAll,LD=td,kD=$f.templatedArray,GD=CD,_D=kD("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),RD=SD(kD("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:_D,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:AD(UD({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:LD.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:wD({description:"Sets the font of the current value label text."})},font:wD({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:GD.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:GD.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:GD.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:GD.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:GD.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:GD.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:GD.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root"),ED=yf,TD=Sm,MD=RD,ND=CD.name,DD=MD.steps;function XD(t,e,n){function r(n,r){return ED.coerce(t,e,MD,n,r)}for(var i=TD(t,e,{name:"steps",handleItemDefaults:ZD}),a=0,o=0;o<i.length;o++)i[o].visible&&a++;if(a<2?e.visible=!1:r("visible")){e._stepCount=a;var s=e._visibleSteps=ED.filterVisible(i);(i[r("active")]||{}).visible||(e.active=s[0]._index),r("x"),r("y"),ED.noneOrAll(t,e,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),ED.coerceFont(r,"font",n.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),ED.coerceFont(r,"currentvalue.font",e.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function ZD(t,e){function n(n,r){return ED.coerce(t,e,DD,n,r)}if("skip"===t.method||Array.isArray(t.args)?n("visible"):e.visible=!1){n("method"),n("args");var r=n("label","step-"+e._index);n("value",r),n("execute")}}var VD=uo,HD=qp,WD=Pu,YD=Qb,zD=yf,OD=zD.strTranslate,JD=tv,PD=$f.arrayEditor,jD=CD,KD=nv.LINE_SPACING,qD=nv.FROM_TL,$D=nv.FROM_BR;function tX(t){return jD.autoMarginIdRoot+t._index}function eX(t){return t._index}function nX(t,e){var n=YD.tester.selectAll("g."+jD.labelGroupClass).data(e._visibleSteps);n.enter().append("g").classed(jD.labelGroupClass,!0);var r=0,i=0;n.each((function(t){var n=aX(VD.select(this),{step:t},e).node();if(n){var a=YD.bBox(n);i=Math.max(i,a.height),r=Math.max(r,a.width)}})),n.remove();var a=e._dims={};a.inputAreaWidth=Math.max(jD.railWidth,jD.gripHeight);var o=t._fullLayout._size;a.lx=o.l+o.w*e.x,a.ly=o.t+o.h*(1-e.y),"fraction"===e.lenmode?a.outerLength=Math.round(o.w*e.len):a.outerLength=e.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-e.pad.l-e.pad.r);var s=(a.inputAreaLength-2*jD.stepInset)/(e._stepCount-1),l=r+jD.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(l/s)),a.labelHeight=i,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,e.currentvalue.visible){var c=YD.tester.append("g");n.each((function(t){var n=rX(c,e,t.label),r=n.node()&&YD.bBox(n.node())||{width:0,height:0},i=JD.lineCount(n);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(r.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(r.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,i)})),a.currentValueTotalHeight=a.currentValueHeight+e.currentvalue.offset,c.remove()}a.height=a.currentValueTotalHeight+jD.tickOffset+e.ticklen+jD.labelOffset+a.labelHeight+e.pad.t+e.pad.b;var u="left";zD.isRightAnchor(e)&&(a.lx-=a.outerLength,u="right"),zD.isCenterAnchor(e)&&(a.lx-=a.outerLength/2,u="center");var h="top";zD.isBottomAnchor(e)&&(a.ly-=a.height,h="bottom"),zD.isMiddleAnchor(e)&&(a.ly-=a.height/2,h="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);var d={y:e.y,b:a.height*$D[h],t:a.height*qD[h]};"fraction"===e.lenmode?(d.l=0,d.xl=e.x-e.len*qD[u],d.r=0,d.xr=e.x+e.len*$D[u]):(d.x=e.x,d.l=a.outerLength*qD[u],d.r=a.outerLength*$D[u]),HD.autoMargin(t,tX(e),d)}function rX(t,e,n){if(e.currentvalue.visible){var r,i,a=e._dims;switch(e.currentvalue.xanchor){case"right":r=a.inputAreaLength-jD.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":r=.5*a.inputAreaLength,i="middle";break;default:r=jD.currentValueInset,i="left"}var o=zD.ensureSingle(t,"text",jD.labelClass,(function(t){t.attr({"text-anchor":i,"data-notex":1})})),s=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof n)s+=n;else{var l=e.steps[e.active].label,c=e._gd._fullLayout._meta;c&&(l=zD.templateString(l,c)),s+=l}e.currentvalue.suffix&&(s+=e.currentvalue.suffix),o.call(YD.font,e.currentvalue.font).text(s).call(JD.convertToTspans,e._gd);var u=JD.lineCount(o),h=(a.currentValueMaxLines+1-u)*e.currentvalue.font.size*KD;return JD.positionText(o,r,h),o}}function iX(t,e,n){var r=zD.ensureSingle(t,"rect",jD.gripRectClass,(function(r){r.call(cX,e,t,n).style("pointer-events","all")}));r.attr({width:jD.gripWidth,height:jD.gripHeight,rx:jD.gripRadius,ry:jD.gripRadius}).call(WD.stroke,n.bordercolor).call(WD.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function aX(t,e,n){var r=zD.ensureSingle(t,"text",jD.labelClass,(function(t){t.attr({"text-anchor":"middle","data-notex":1})})),i=e.step.label,a=n._gd._fullLayout._meta;return a&&(i=zD.templateString(i,a)),r.call(YD.font,n.font).text(i).call(JD.convertToTspans,n._gd),r}function oX(t,e){var n=zD.ensureSingle(t,"g",jD.labelsClass),r=e._dims,i=n.selectAll("g."+jD.labelGroupClass).data(r.labelSteps);i.enter().append("g").classed(jD.labelGroupClass,!0),i.exit().remove(),i.each((function(t){var n=VD.select(this);n.call(aX,t,e),YD.setTranslate(n,dX(e,t.fraction),jD.tickOffset+e.ticklen+e.font.size*KD+jD.labelOffset+r.currentValueTotalHeight)}))}function sX(t,e,n,r,i){var a=Math.round(r*(n._stepCount-1)),o=n._visibleSteps[a]._index;o!==n.active&&lX(t,e,n,o,!0,i)}function lX(t,e,n,r,i,a){var o=n.active;n.active=r,PD(t.layout,jD.name,n).applyUpdate("active",r);var s=n.steps[n.active];e.call(hX,n,a),e.call(rX,n),t.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:i,previousActive:o}),s&&s.method&&i&&(e._nextMethod?(e._nextMethod.step=s,e._nextMethod.doCallback=i,e._nextMethod.doTransition=a):(e._nextMethod={step:s,doCallback:i,doTransition:a},e._nextMethodRaf=window.requestAnimationFrame((function(){var n=e._nextMethod.step;n.method&&(n.execute&&HD.executeAPICommand(t,n.method,n.args),e._nextMethod=null,e._nextMethodRaf=null)}))))}function cX(t,e,n){if(!e._context.staticPlot){var r=n.node(),i=VD.select(e);t.on("mousedown",o),t.on("touchstart",o)}function a(){return n.data()[0]}function o(){var t=a();e.emit("plotly_sliderstart",{slider:t});var o=n.select("."+jD.gripRectClass);VD.event.stopPropagation(),VD.event.preventDefault(),o.call(WD.fill,t.activebgcolor);var s=gX(t,VD.mouse(r)[0]);function l(){var t=a(),i=gX(t,VD.mouse(r)[0]);sX(e,n,t,i,!1)}function c(){var t=a();t._dragging=!1,o.call(WD.fill,t.bgcolor),i.on("mouseup",null),i.on("mousemove",null),i.on("touchend",null),i.on("touchmove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})}sX(e,n,t,s,!0),t._dragging=!0,i.on("mousemove",l),i.on("touchmove",l),i.on("mouseup",c),i.on("touchend",c)}}function uX(t,e){var n=t.selectAll("rect."+jD.tickRectClass).data(e._visibleSteps),r=e._dims;n.enter().append("rect").classed(jD.tickRectClass,!0),n.exit().remove(),n.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),n.each((function(t,n){var i=n%r.labelStride==0,a=VD.select(this);a.attr({height:i?e.ticklen:e.minorticklen}).call(WD.fill,e.tickcolor),YD.setTranslate(a,dX(e,n/(e._stepCount-1))-.5*e.tickwidth,(i?jD.tickOffset:jD.minorTickOffset)+r.currentValueTotalHeight)}))}function hX(t,e,n){for(var r=t.select("rect."+jD.gripRectClass),i=0,a=0;a<e._stepCount;a++)if(e._visibleSteps[a]._index===e.active){i=a;break}var o=dX(e,i/(e._stepCount-1));if(!e._invokingCommand){var s=r;n&&e.transition.duration>0&&(s=s.transition().duration(e.transition.duration).ease(e.transition.easing)),s.attr("transform",OD(o-.5*jD.gripWidth,e._dims.currentValueTotalHeight))}}function dX(t,e){var n=t._dims;return n.inputAreaStart+jD.stepInset+(n.inputAreaLength-2*jD.stepInset)*Math.min(1,Math.max(0,e))}function gX(t,e){var n=t._dims;return Math.min(1,Math.max(0,(e-jD.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*jD.stepInset-2*n.inputAreaStart)))}function fX(t,e,n){var r=n._dims,i=zD.ensureSingle(t,"rect",jD.railTouchRectClass,(function(r){r.call(cX,e,t,n).style("pointer-events","all")}));i.attr({width:r.inputAreaLength,height:Math.max(r.inputAreaWidth,jD.tickOffset+n.ticklen+r.labelHeight)}).call(WD.fill,n.bgcolor).attr("opacity",0),YD.setTranslate(i,0,r.currentValueTotalHeight)}function pX(t,e){var n=e._dims,r=n.inputAreaLength-2*jD.railInset,i=zD.ensureSingle(t,"rect",jD.railRectClass);i.attr({width:r,height:jD.railWidth,rx:jD.railRadius,ry:jD.railRadius,"shape-rendering":"crispEdges"}).call(WD.stroke,e.bordercolor).call(WD.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),YD.setTranslate(i,jD.railInset,.5*(n.inputAreaWidth-jD.railWidth)+n.currentValueTotalHeight)}var vX,mX,yX,bX,xX,BX,IX={moduleType:"component",name:CD.name,layoutAttributes:RD,supplyLayoutDefaults:function(t,e){TD(t,e,{name:ND,handleItemDefaults:XD})},draw:function(t){var e=t._context.staticPlot,n=t._fullLayout,r=function(t,e){for(var n=t[jD.name],r=[],i=0;i<n.length;i++){var a=n[i];a.visible&&(a._gd=e,r.push(a))}return r}(n,t),i=n._infolayer.selectAll("g."+jD.containerClassName).data(r.length>0?[0]:[]);function a(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),HD.autoMargin(t,tX(e))}if(i.enter().append("g").classed(jD.containerClassName,!0).style("cursor",e?null:"ew-resize"),i.exit().each((function(){VD.select(this).selectAll("g."+jD.groupClassName).each(a)})).remove(),0!==r.length){var o=i.selectAll("g."+jD.groupClassName).data(r,eX);o.enter().append("g").classed(jD.groupClassName,!0),o.exit().each(a).remove();for(var s=0;s<r.length;s++){var l=r[s];nX(t,l)}o.each((function(e){var n=VD.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var n=t._stepCount,r=0;r<n;r+=e.labelStride)e.labelSteps.push({fraction:r/(n-1),step:t._visibleSteps[r]})}(e),HD.manageCommandObserver(t,e,e._visibleSteps,(function(e){var r=n.data()[0];r.active!==e.index&&(r._dragging||lX(t,n,r,e.index,!1,!0))})),function(t,e,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);e.call(rX,n).call(pX,n).call(oX,n).call(uX,n).call(fX,t,n).call(iX,t,n);var r=n._dims;YD.setTranslate(e,r.lx+n.pad.l,r.ly+n.pad.t),e.call(hX,n,!1),e.call(rX,n)}(t,VD.select(this),e)}))}}},FX=Xu,QX={bgcolor:{valType:"color",dflt:FX.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:FX.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"},CX={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"},wX={},UX={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},AX=op,SX=tv,LX=UX,kX=nv.LINE_SPACING,GX=LX.name;function _X(t){var e=t&&t[GX];return e&&e.visible}wX.isVisible=_X,wX.makeData=function(t){var e=AX.list({_fullLayout:t},"x",!0),n=t.margin,r=[];if(!t._has("gl2d"))for(var i=0;i<e.length;i++){var a=e[i];if(_X(a)){r.push(a);var o=a[GX];o._id=GX+a._id,o._height=(t.height-n.b-n.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}t._rangeSliderData=r},wX.autoMarginOpts=function(t,e){var n=t._fullLayout,r=e[GX],i=e._id.charAt(0),a=0,o=0;"bottom"===e.side&&(a=e._depth,e.title.text!==n._dfltTitle[i]&&(o=1.5*e.title.font.size+10+r._offsetShift,o+=(e.title.text.match(SX.BR_TAG_ALL)||[]).length*e.title.font.size*kX));return{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(n.margin.b,o),pad:LX.extraPad+2*r._offsetShift}};var RX=QX,EX=CX,TX=wX,MX={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:yf.extendFlat({},RX,{yaxis:EX})}}},layoutAttributes:QX,handleDefaults:function(){if(mX)return vX;mX=1;var t=yf,e=$f,n=op,r=QX,i=CX;return vX=function(a,o,s){var l=a[s],c=o[s];if(l.rangeslider||o._requestRangeslider[c._id]){t.isPlainObject(l.rangeslider)||(l.rangeslider={});var u,h,d=l.rangeslider,g=e.newContainer(c,"rangeslider");if(B("visible")){B("bgcolor",o.plot_bgcolor),B("bordercolor"),B("borderwidth"),B("thickness"),B("autorange",!c.isValidRange(d.range)),B("range");var f=o._subplots;if(f)for(var p=f.cartesian.filter((function(t){return t.substr(0,t.indexOf("y"))===n.name2id(s)})).map((function(t){return t.substr(t.indexOf("y"),t.length)})),v=t.simpleMap(p,n.id2name),m=0;m<v.length;m++){var y=v[m];u=d[y]||{},h=e.newContainer(g,y,"yaxis");var b,x=o[y];u.range&&x.isValidRange(u.range)&&(b="fixed"),"match"!==I("rangemode",b)&&I("range",x.range.slice())}g._input=d}}function B(e,n){return t.coerce(d,g,r,e,n)}function I(e,n){return t.coerce(u,h,i,e,n)}},vX}(),calcAutorange:function(){if(bX)return yX;bX=1;var t=op.list,e=Ix().getAutoRange,n=UX;return yX=function(r){for(var i=t(r,"x",!0),a=0;a<i.length;a++){var o=i[a],s=o[n.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=e(r,o))}},yX}(),draw:function(){if(BX)return xX;BX=1;var t=uo,e=hh,n=qp,r=yf,i=r.strTranslate,a=Qb,o=Pu,s=Mb,l=LE,c=op,u=AI,h=LI,d=UX;function g(t){return"number"==typeof t.clientX?t.clientX:t.touches&&t.touches.length>0?t.touches[0].clientX:0}function f(t,e,n,s){var l=r.ensureSingle(t,"rect",d.bgClassName,(function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})})),c=s.borderwidth%2==0?s.borderwidth:s.borderwidth-1,u=-s._offsetShift,h=a.crispRound(e,s.borderwidth);l.attr({width:s._width+c,height:s._height+c,transform:i(u,u),"stroke-width":h}).call(o.stroke,s.bordercolor).call(o.fill,s.bgcolor)}function p(t,e,n,i){var a=e._fullLayout,o=r.ensureSingleById(a._topdefs,"clipPath",i._clipId,(function(t){t.append("rect").attr({x:0,y:0})}));o.select("rect").attr({width:i._width,height:i._height})}function v(e,i,o,s){var u,h=i.calcdata,g=e.selectAll("g."+d.rangePlotClassName).data(o._subplotsWith,r.identity);g.enter().append("g").attr("class",(function(t){return d.rangePlotClassName+" "+t})).call(a.setClipUrl,s._clipId,i),g.order(),g.exit().remove(),g.each((function(e,r){var a=t.select(this),d=0===r,g=c.getFromId(i,e,"y"),f=g._name,p=s[f],v={data:[],layout:{xaxis:{type:o.type,domain:[0,1],range:s.range.slice(),calendar:o.calendar},width:s._width,height:s._height,margin:{t:0,b:0,l:0,r:0}},_context:i._context};o.rangebreaks&&(v.layout.xaxis.rangebreaks=o.rangebreaks),v.layout[f]={type:g.type,domain:[0,1],range:"match"!==p.rangemode?p.range.slice():g.range.slice(),calendar:g.calendar},g.rangebreaks&&(v.layout[f].rangebreaks=g.rangebreaks),n.supplyDefaults(v);var m=v._fullLayout.xaxis,y=v._fullLayout[f];m.clearCalc(),m.setScale(),y.clearCalc(),y.setScale();var b={id:e,plotgroup:a,xaxis:m,yaxis:y,isRangePlot:!0};d?u=b:(b.mainplot="xy",b.mainplotinfo=u),l.rangePlot(i,b,function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],a=i[0].trace;a.xaxis+a.yaxis===e&&n.push(i)}return n}(h,e))}))}function m(t,e,n,i,a){var s=r.ensureSingle(t,"rect",d.maskMinClassName,(function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}));s.attr("height",i._height).call(o.fill,d.maskColor);var l=r.ensureSingle(t,"rect",d.maskMaxClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));if(l.attr("height",i._height).call(o.fill,d.maskColor),"match"!==a.rangemode){var c=r.ensureSingle(t,"rect",d.maskMinOppAxisClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));c.attr("width",i._width).call(o.fill,d.maskOppAxisColor);var u=r.ensureSingle(t,"rect",d.maskMaxOppAxisClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));u.attr("width",i._width).style("border-top",d.maskOppBorder).call(o.fill,d.maskOppAxisColor)}}function y(t,e,n,i){if(!e._context.staticPlot){var a=r.ensureSingle(t,"rect",d.slideBoxClassName,(function(t){t.attr({y:0,cursor:d.slideBoxCursor,"shape-rendering":"crispEdges"})}));a.attr({height:i._height,fill:d.slideBoxFill})}}function b(t,e,n,i){var a=r.ensureSingle(t,"g",d.grabberMinClassName),s=r.ensureSingle(t,"g",d.grabberMaxClassName),l={x:0,width:d.handleWidth,rx:d.handleRadius,fill:o.background,stroke:o.defaultLine,"stroke-width":d.handleStrokeWidth,"shape-rendering":"crispEdges"},c={y:Math.round(i._height/4),height:Math.round(i._height/2)},u=r.ensureSingle(a,"rect",d.handleMinClassName,(function(t){t.attr(l)}));u.attr(c);var h=r.ensureSingle(s,"rect",d.handleMaxClassName,(function(t){t.attr(l)}));h.attr(c);var g={width:d.grabAreaWidth,x:0,y:0,fill:d.grabAreaFill,cursor:e._context.staticPlot?void 0:d.grabAreaCursor},f=r.ensureSingle(a,"rect",d.grabAreaMinClassName,(function(t){t.attr(g)}));f.attr("height",i._height);var p=r.ensureSingle(s,"rect",d.grabAreaMaxClassName,(function(t){t.attr(g)}));p.attr("height",i._height)}return xX=function(n){for(var a=n._fullLayout,o=a._rangeSliderData,l=0;l<o.length;l++){var x=o[l][d.name];x._clipId=x._id+"-"+a._uid}var B=a._infolayer.selectAll("g."+d.containerClassName).data(o,(function(t){return t._name}));B.exit().each((function(t){var e=t[d.name];a._topdefs.select("#"+e._clipId).remove()})).remove(),0!==o.length&&(B.enter().append("g").classed(d.containerClassName,!0).attr("pointer-events","all"),B.each((function(o){var l=t.select(this),x=o[d.name],B=a[c.id2name(o.anchor)],I=x[c.id2name(o.anchor)];if(x.range){var F,Q=r.simpleMap(x.range,o.r2l),C=r.simpleMap(o.range,o.r2l);F=C[0]<C[1]?[Math.min(Q[0],C[0]),Math.max(Q[1],C[1])]:[Math.max(Q[0],C[0]),Math.min(Q[1],C[1])],x.range=x._input.range=r.simpleMap(F,o.l2r)}o.cleanRange("rangeslider.range");var w=a._size,U=o.domain;x._width=w.w*(U[1]-U[0]);var A=Math.round(w.l+w.w*U[0]),S=Math.round(w.t+w.h*(1-o._counterDomainMin)+("bottom"===o.side?o._depth:0)+x._offsetShift+d.extraPad);l.attr("transform",i(A,S)),x._rl=r.simpleMap(x.range,o.r2l);var L=x._rl[0],k=x._rl[1],G=k-L;if(x.p2d=function(t){return t/x._width*G+L},x.d2p=function(t){return(t-L)/G*x._width},o.rangebreaks){var _=o.locateBreaks(L,k);if(_.length){var R,E,T=0;for(R=0;R<_.length;R++)T+=(E=_[R]).max-E.min;var M=x._width/(k-L-T),N=[-M*L];for(R=0;R<_.length;R++)E=_[R],N.push(N[N.length-1]-M*(E.max-E.min));for(x.d2p=function(t){for(var e=N[0],n=0;n<_.length;n++){var r=_[n];if(t>=r.max)e=N[n+1];else if(t<r.min)break}return e+M*t},R=0;R<_.length;R++)(E=_[R]).pmin=x.d2p(E.min),E.pmax=x.d2p(E.max);x.p2d=function(t){for(var e=N[0],n=0;n<_.length;n++){var r=_[n];if(t>=r.pmax)e=N[n+1];else if(t<r.pmin)break}return(t-e)/M}}}if("match"!==I.rangemode){var D=B.r2l(I.range[0]),X=B.r2l(I.range[1])-D;x.d2pOppAxis=function(t){return(t-D)/X*x._height}}l.call(f,n,o,x).call(p,n,o,x).call(v,n,o,x).call(m,n,o,x,I).call(y,n,o,x).call(b,n,o,x),function(n,i,a,o){if(i._context.staticPlot)return;var s=n.select("rect."+d.slideBoxClassName).node(),l=n.select("rect."+d.grabAreaMinClassName).node(),c=n.select("rect."+d.grabAreaMaxClassName).node();function f(){var d=t.event,f=d.target,p=g(d),v=p-n.node().getBoundingClientRect().left,m=o.d2p(a._rl[0]),y=o.d2p(a._rl[1]),b=u.coverSlip();function x(n){var u,d,x,B=+g(n)-p;switch(f){case s:if(x="ew-resize",m+B>a._length||y+B<0)return;u=m+B,d=y+B;break;case l:if(x="col-resize",m+B>a._length)return;u=m+B,d=y;break;case c:if(x="col-resize",y+B<0)return;u=m,d=y+B;break;default:x="ew-resize",u=v,d=v+B}if(d<u){var I=d;d=u,u=I}o._pixelMin=u,o._pixelMax=d,h(t.select(b),x),function(t,n,i,a){function o(t){return i.l2r(r.constrain(t,a._rl[0],a._rl[1]))}var s=o(a.p2d(a._pixelMin)),l=o(a.p2d(a._pixelMax));window.requestAnimationFrame((function(){e.call("_guiRelayout",n,i._name+".range",[s,l])}))}(0,i,a,o)}function B(){b.removeEventListener("mousemove",x),b.removeEventListener("mouseup",B),this.removeEventListener("touchmove",x),this.removeEventListener("touchend",B),r.removeElement(b)}this.addEventListener("touchmove",x),this.addEventListener("touchend",B),b.addEventListener("mousemove",x),b.addEventListener("mouseup",B)}n.on("mousedown",f),n.on("touchstart",f)}(l,n,o,x),function(t,e,n,a,o,s){var l=d.handleWidth/2;function c(t){return r.constrain(t,0,a._width)}function u(t){return r.constrain(t,0,a._height)}function h(t){return r.constrain(t,-l,a._width+l)}var g=c(a.d2p(n._rl[0])),f=c(a.d2p(n._rl[1]));if(t.select("rect."+d.slideBoxClassName).attr("x",g).attr("width",f-g),t.select("rect."+d.maskMinClassName).attr("width",g),t.select("rect."+d.maskMaxClassName).attr("x",f).attr("width",a._width-f),"match"!==s.rangemode){var p=a._height-u(a.d2pOppAxis(o._rl[1])),v=a._height-u(a.d2pOppAxis(o._rl[0]));t.select("rect."+d.maskMinOppAxisClassName).attr("x",g).attr("height",p).attr("width",f-g),t.select("rect."+d.maskMaxOppAxisClassName).attr("x",g).attr("y",v).attr("height",a._height-v).attr("width",f-g),t.select("rect."+d.slideBoxClassName).attr("y",p).attr("height",v-p)}var m=.5,y=Math.round(h(g-l))-m,b=Math.round(h(f-l))+m;t.select("g."+d.grabberMinClassName).attr("transform",i(y,m)),t.select("g."+d.grabberMaxClassName).attr("transform",i(b,m))}(l,0,o,x,B,I),"bottom"===o.side&&s.draw(n,o._id+"title",{propContainer:o,propName:o._name+".title",placeholder:a._dfltTitle.x,attributes:{x:o._offset+o._length/2,y:S+x._height+x._offsetShift+10+1.5*o.title.font.size,"text-anchor":"middle"}})})))},xX}(),isVisible:TX.isVisible,makeData:TX.makeData,autoMarginOpts:TX.autoMarginOpts},NX=mu(),DX=Xu,XX=(0,$f.templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),ZX={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:XX,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:NX({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:DX.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:DX.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"},VX={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10},HX=yf,WX=Pu,YX=$f,zX=Sm,OX=ZX,JX=VX;function PX(t,e,n,r){var i=r.calendar;function a(n,r){return HX.coerce(t,e,OX.buttons,n,r)}if(a("visible")){var o=a("step");"all"!==o&&(!i||"gregorian"===i||"month"!==o&&"year"!==o?a("stepmode"):e.stepmode="backward",a("count")),a("label")}}var jX=io(As),KX=yf.titleCase;var qX=uo,$X=hh,tZ=qp,eZ=Pu,nZ=Qb,rZ=yf,iZ=rZ.strTranslate,aZ=tv,oZ=op,sZ=nv.LINE_SPACING,lZ=nv.FROM_TL,cZ=nv.FROM_BR,uZ=VX,hZ=function(t,e){var n=t._name,r={};if("all"===e.step)r[n+".autorange"]=!0;else{var i=function(t,e){var n,r=t.range,i=new Date(t.r2l(r[1])),a=e.step,o=jX["utc"+KX(a)],s=e.count;switch(e.stepmode){case"backward":n=t.l2r(+o.offset(i,-s));break;case"todate":var l=o.offset(i,-s);n=t.l2r(+o.ceil(l))}var c=r[1];return[n,c]}(t,e);r[n+".range[0]"]=i[0],r[n+".range[1]"]=i[1]}return r};function dZ(t){return t._id}function gZ(t,e,n){var r=rZ.ensureSingle(t,"rect","selector-rect",(function(t){t.attr("shape-rendering","crispEdges")}));r.attr({rx:uZ.rx,ry:uZ.ry}),r.call(eZ.stroke,e.bordercolor).call(eZ.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,n)).style("stroke-width",e.borderwidth+"px")}function fZ(t,e,n,r){var i=rZ.ensureSingle(t,"text","selector-text",(function(t){t.attr("text-anchor","middle")}));i.call(nZ.font,e.font).text(function(t,e){if(t.label)return e?rZ.templateString(t.label,e):t.label;return"all"===t.step?"all":t.count+t.step.charAt(0)}(n,r._fullLayout._meta)).call((function(t){aZ.convertToTspans(t,r)}))}var pZ={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:ZX}}},layoutAttributes:ZX,handleDefaults:function(t,e,n,r,i){var a=t.rangeselector||{},o=YX.newContainer(e,"rangeselector");function s(t,e){return HX.coerce(a,o,OX,t,e)}if(s("visible",zX(a,o,{name:"buttons",handleItemDefaults:PX,calendar:i}).length>0)){var l=function(t,e,n){for(var r=n.filter((function(n){return e[n].anchor===t._id})),i=0,a=0;a<r.length;a++){var o=e[r[a]].domain;o&&(i=Math.max(o[1],i))}return[t.domain[0],i+JX.yPad]}(e,n,r);s("x",l[0]),s("y",l[1]),HX.noneOrAll(t,e,["x","y"]),s("xanchor"),s("yanchor"),HX.coerceFont(s,"font",n.font);var c=s("bgcolor");s("activecolor",WX.contrast(c,JX.lightAmount,JX.darkAmount)),s("bordercolor"),s("borderwidth")}},draw:function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=oZ.list(t,"x",!0),n=[],r=0;r<e.length;r++){var i=e[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(t),dZ);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each((function(e){var n=qX.select(this),r=e,i=r.rangeselector,a=n.selectAll("g.button").data(rZ.filterVisible(i.buttons));a.enter().append("g").classed("button",!0),a.exit().remove(),a.each((function(e){var n=qX.select(this),a=hZ(r,e);e._isActive=function(t,e,n){if("all"===e.step)return!0===t.autorange;var r=Object.keys(n);return t.range[0]===n[r[0]]&&t.range[1]===n[r[1]]}(r,e,a),n.call(gZ,i,e),n.call(fZ,i,e,t),n.on("click",(function(){t._dragged||$X.call("_guiRelayout",t,a)})),n.on("mouseover",(function(){e._isHovered=!0,n.call(gZ,i,e)})),n.on("mouseout",(function(){e._isHovered=!1,n.call(gZ,i,e)}))})),function(t,e,n,r,i){var a=0,o=0,s=n.borderwidth;e.each((function(){var t=qX.select(this).select(".selector-text"),e=n.font.size*sZ,r=Math.max(e*aZ.lineCount(t),16)+3;o=Math.max(o,r)})),e.each((function(){var t=qX.select(this),e=t.select(".selector-rect"),r=t.select(".selector-text"),i=r.node()&&nZ.bBox(r.node()).width,l=n.font.size*sZ,c=aZ.lineCount(r),u=Math.max(i+10,uZ.minButtonWidth);t.attr("transform",iZ(s+a,s)),e.attr({x:0,y:0,width:u,height:o}),aZ.positionText(r,u/2,o/2-(c-1)*l/2+3),a+=u+5}));var l=t._fullLayout._size,c=l.l+l.w*n.x,u=l.t+l.h*(1-n.y),h="left";rZ.isRightAnchor(n)&&(c-=a,h="right");rZ.isCenterAnchor(n)&&(c-=a/2,h="center");var d="top";rZ.isBottomAnchor(n)&&(u-=o,d="bottom");rZ.isMiddleAnchor(n)&&(u-=o/2,d="middle");a=Math.ceil(a),o=Math.ceil(o),c=Math.round(c),u=Math.round(u),tZ.autoMargin(t,r+"-range-selector",{x:n.x,y:n.y,l:a*lZ[h],r:a*cZ[h],b:o*cZ[d],t:o*lZ[d]}),i.attr("transform",iZ(c,u))}(t,a,i,r._name,n)}))}},vZ={},mZ=Fu.extendFlat;vZ.attributes=function(t,e){e=e||{};var n={valType:"info_array",editType:(t=t||{}).editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},r=t.name?t.name+" ":"",i=t.trace?"trace ":"subplot ",a=e.description?" "+e.description:"",o={x:mZ({},n,{description:["Sets the horizontal domain of this ",r,i,"(in plot fraction).",a].join("")}),y:mZ({},n,{description:["Sets the vertical domain of this ",r,i,"(in plot fraction).",a].join("")}),editType:t.editType};return t.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:t.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",r,i,".",a].join("")},o.column={valType:"integer",min:0,dflt:0,editType:t.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",r,i,".",a].join("")}),o},vZ.defaults=function(t,e,n,r){var i=r&&r.x||[0,1],a=r&&r.y||[0,1],o=e.grid;if(o){var s=n("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete t.domain.column);var l=n("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete t.domain.row)}var c=n("domain.x",i),u=n("domain.y",a);c[0]<c[1]||(t.domain.x=i.slice()),u[0]<u[1]||(t.domain.y=a.slice())};var yZ=yf,bZ=Ku.counter,xZ=vZ.attributes,BZ=lp.idRegex,IZ=$f,FZ={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[bZ("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[BZ.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[BZ.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:xZ({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function QZ(t,e,n){var r=e[n+"axes"],i=Object.keys((t._splomAxes||{})[n]||{});return Array.isArray(r)?r:i.length?i:void 0}function CZ(t,e,n,r,i,a){var o=e(t+"gap",n),s=e("domain."+t);e(t+"side",r);for(var l=new Array(i),c=s[0],u=(s[1]-c)/(i-o),h=u*(1-o),d=0;d<i;d++){var g=c+u*d;l[a?i-1-d:d]=[g,g+h]}return l}function wZ(t,e,n,r,i){var a,o=new Array(n);function s(t,n){-1!==e.indexOf(n)&&void 0===r[n]?(o[t]=n,r[n]=t):o[t]=""}if(Array.isArray(t))for(a=0;a<n;a++)s(a,t[a]);else for(s(0,i),a=1;a<n;a++)s(a,i+(a+1));return o}var UZ,AZ,SZ,LZ,kZ,GZ,_Z,RZ,EZ,TZ,MZ={moduleType:"component",name:"grid",schema:{layout:{grid:FZ}},layoutAttributes:FZ,sizeDefaults:function(t,e){var n=t.grid||{},r=QZ(e,n,"x"),i=QZ(e,n,"y");if(t.grid||r||i){var a,o,s=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),l=Array.isArray(r),c=Array.isArray(i),u=l&&r!==n.xaxes&&c&&i!==n.yaxes;s?(a=n.subplots.length,o=n.subplots[0].length):(c&&(a=i.length),l&&(o=r.length));var h=IZ.newContainer(e,"grid"),d=b("rows",a),g=b("columns",o);if(d*g>1){if(!s&&!l&&!c)"independent"===b("pattern")&&(s=!0);h._hasSubplotGrid=s;var f,p,v="top to bottom"===b("roworder"),m=s?.2:.1,y=s?.3:.1;u&&e._splomGridDflt&&(f=e._splomGridDflt.xside,p=e._splomGridDflt.yside),h._domains={x:CZ("x",b,m,f,g),y:CZ("y",b,y,p,d,v)}}else delete e.grid}function b(t,e){return yZ.coerce(n,h,FZ,t,e)}},contentDefaults:function(t,e){var n=e.grid;if(n&&n._domains){var r,i,a,o,s,l,c,u=t.grid||{},h=e._subplots,d=n._hasSubplotGrid,g=n.rows,f=n.columns,p="independent"===n.pattern,v=n._axisMap={};if(d){var m=u.subplots||[];l=n.subplots=new Array(g);var y=1;for(r=0;r<g;r++){var b=l[r]=new Array(f),x=m[r]||[];for(i=0;i<f;i++)if(p?(s=1===y?"xy":"x"+y+"y"+y,y++):s=x[i],b[i]="",-1!==h.cartesian.indexOf(s)){if(c=s.indexOf("y"),a=s.slice(0,c),o=s.slice(c),void 0!==v[a]&&v[a]!==i||void 0!==v[o]&&v[o]!==r)continue;b[i]=s,v[a]=i,v[o]=r}}}else{var B=QZ(e,u,"x"),I=QZ(e,u,"y");n.xaxes=wZ(B,h.xaxis,f,v,"x"),n.yaxes=wZ(I,h.yaxis,g,v,"y")}var F=n._anchors={},Q="top to bottom"===n.roworder;for(var C in v){var w,U,A,S=C.charAt(0),L=n[S+"side"];if(L.length<8)F[C]="free";else if("x"===S){if("t"===L.charAt(0)===Q?(w=0,U=1,A=g):(w=g-1,U=-1,A=-1),d){var k=v[C];for(r=w;r!==A;r+=U)if((s=l[r][k])&&(c=s.indexOf("y"),s.slice(0,c)===C)){F[C]=s.slice(c);break}}else for(r=w;r!==A;r+=U)if(o=n.yaxes[r],-1!==h.cartesian.indexOf(C+o)){F[C]=o;break}}else if("l"===L.charAt(0)?(w=0,U=1,A=f):(w=f-1,U=-1,A=-1),d){var G=v[C];for(r=w;r!==A;r+=U)if((s=l[G][r])&&(c=s.indexOf("y"),s.slice(c)===C)){F[C]=s.slice(0,c);break}}else for(r=w;r!==A;r+=U)if(a=n.xaxes[r],-1!==h.cartesian.indexOf(a+C)){F[C]=a;break}}}}},NZ={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}};function DZ(){if(LZ)return SZ;function t(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}return LZ=1,SZ=function(e){var n=e.type,r=e.symmetric;if("data"===n){var i=e.array||[];if(r)return function(t,e){var n=+i[e];return[n,n]};var a=e.arrayminus||[];return function(t,e){var n=+i[e],r=+a[e];return isNaN(n)&&isNaN(r)?[NaN,NaN]:[r||0,n||0]}}var o=t(n,e.value),s=t(n,e.valueminus);return r||void 0===e.valueminus?function(t){var e=o(t);return[e,e]}:function(t){return[s(t),o(t)]}},SZ}var XZ=yf,ZZ=sd.overrideAll,VZ=NZ,HZ={error_x:XZ.extendFlat({},VZ),error_y:XZ.extendFlat({},VZ)};delete HZ.error_x.copy_zstyle,delete HZ.error_y.copy_zstyle,delete HZ.error_y.copy_ystyle;var WZ={error_x:XZ.extendFlat({},VZ),error_y:XZ.extendFlat({},VZ),error_z:XZ.extendFlat({},VZ)};delete WZ.error_x.copy_ystyle,delete WZ.error_y.copy_ystyle,delete WZ.error_z.copy_ystyle,delete WZ.error_z.copy_zstyle;var YZ={moduleType:"component",name:"errorbars",schema:{traces:{scatter:HZ,bar:HZ,histogram:HZ,scatter3d:ZZ(WZ,"calc","nested"),scattergl:ZZ(HZ,"calc","nested")}},supplyDefaults:function(){if(AZ)return UZ;AZ=1;var t=Ac,e=hh,n=yf,r=$f,i=NZ;return UZ=function(a,o,s,l){var c="error_"+l.axis,u=r.newContainer(o,c),h=a[c]||{};function d(t,e){return n.coerce(h,u,i,t,e)}if(!1!==d("visible",void 0!==h.array||void 0!==h.value||"sqrt"===h.type)){var g=d("type","array"in h?"data":"percent"),f=!0;"sqrt"!==g&&(f=d("symmetric",!(("data"===g?"arrayminus":"valueminus")in h))),"data"===g?(d("array"),d("traceref"),f||(d("arrayminus"),d("tracerefminus"))):"percent"!==g&&"constant"!==g||(d("value"),f||d("valueminus"));var p="copy_"+l.inherit+"style";if(l.inherit)(o["error_"+l.inherit]||{}).visible&&d(p,!(h.color||t(h.thickness)||t(h.width)));l.inherit&&u[p]||(d("color",s),d("thickness"),d("width",e.traceIs(o,"gl3d")?0:4))}},UZ}(),calc:function(){if(GZ)return kZ;GZ=1;var t=Ac,e=hh,n=iI,r=yf,i=DZ();function a(e,a,o,s){var l=a["error_"+s]||{},c=[];if(l.visible&&-1!==["linear","log"].indexOf(o.type)){for(var u=i(l),h=0;h<e.length;h++){var d=e[h],g=d.i;if(void 0===g)g=h;else if(null===g)continue;var f=d[s];if(t(o.c2l(f))){var p=u(f,g);if(t(p[0])&&t(p[1])){var v=d[s+"s"]=f-p[0],m=d[s+"h"]=f+p[1];c.push(v,m)}}}var y=o._id,b=a._extremes[y],x=n.findExtremes(o,c,r.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(x.min),b.max=b.max.concat(x.max)}}return kZ=function(t){for(var r=t.calcdata,i=0;i<r.length;i++){var o=r[i],s=o[0].trace;if(!0===s.visible&&e.traceIs(s,"errorBarsOK")){var l=n.getFromId(t,s.xaxis),c=n.getFromId(t,s.yaxis);a(o,s,l,"x"),a(o,s,c,"y")}}},kZ}(),makeComputeError:DZ(),plot:function(){if(RZ)return _Z;RZ=1;var t=uo,e=Ac,n=Qb,r=py;return _Z=function(i,a,o,s){var l=o.xaxis,c=o.yaxis,u=s&&s.duration>0,h=i._context.staticPlot;a.each((function(a){var d,g=a[0].trace,f=g.error_x||{},p=g.error_y||{};g.ids&&(d=function(t){return t.id});var v=r.hasMarkers(g)&&g.marker.maxdisplayed>0;p.visible||f.visible||(a=[]);var m=t.select(this).selectAll("g.errorbar").data(a,d);if(m.exit().remove(),a.length){f.visible||m.selectAll("path.xerror").remove(),p.visible||m.selectAll("path.yerror").remove(),m.style("opacity",1);var y=m.enter().append("g").classed("errorbar",!0);u&&y.style("opacity",0).transition().duration(s.duration).style("opacity",1),n.setClipUrl(m,o.layerClipId,i),m.each((function(n){var r=t.select(this),i=function(t,n,r){var i={x:n.c2p(t.x),y:r.c2p(t.y)};void 0!==t.yh&&(i.yh=r.c2p(t.yh),i.ys=r.c2p(t.ys),e(i.ys)||(i.noYS=!0,i.ys=r.c2p(t.ys,!0)));void 0!==t.xh&&(i.xh=n.c2p(t.xh),i.xs=n.c2p(t.xs),e(i.xs)||(i.noXS=!0,i.xs=n.c2p(t.xs,!0)));return i}(n,l,c);if(!v||n.vis){var a,o=r.select("path.yerror");if(p.visible&&e(i.x)&&e(i.yh)&&e(i.ys)){var d=p.width;a="M"+(i.x-d)+","+i.yh+"h"+2*d+"m-"+d+",0V"+i.ys,i.noYS||(a+="m-"+d+",0h"+2*d),!o.size()?o=r.append("path").style("vector-effect",h?"none":"non-scaling-stroke").classed("yerror",!0):u&&(o=o.transition().duration(s.duration).ease(s.easing)),o.attr("d",a)}else o.remove();var g=r.select("path.xerror");if(f.visible&&e(i.y)&&e(i.xh)&&e(i.xs)){var m=(f.copy_ystyle?p:f).width;a="M"+i.xh+","+(i.y-m)+"v"+2*m+"m0,-"+m+"H"+i.xs,i.noXS||(a+="m0,-"+m+"v"+2*m),!g.size()?g=r.append("path").style("vector-effect",h?"none":"non-scaling-stroke").classed("xerror",!0):u&&(g=g.transition().duration(s.duration).ease(s.easing)),g.attr("d",a)}else g.remove()}}))}}))},_Z}(),style:function(){if(TZ)return EZ;TZ=1;var t=uo,e=Pu;return EZ=function(n){n.each((function(n){var r=n[0].trace,i=r.error_y||{},a=r.error_x||{},o=t.select(this);o.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(e.stroke,i.color),a.copy_ystyle&&(a=i),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(e.stroke,a.color)}))},EZ}(),hoverInfo:function(t,e,n){(e.error_y||{}).visible&&(n.yerr=t.yh-t.y,e.error_y.symmetric||(n.yerrneg=t.y-t.ys));(e.error_x||{}).visible&&(n.xerr=t.xh-t.x,e.error_x.symmetric||(n.xerrneg=t.x-t.xs))}};var zZ=uo,OZ=vu,JZ=qp,PZ=hh,jZ=iI,KZ=AI,qZ=yf,$Z=qZ.strTranslate,tV=Fu.extendFlat,eV=LI,nV=Qb,rV=Pu,iV=Mb,aV=tv,oV=mv.flipScale,sV=qE,lV=lT,cV=Jv,uV=nv.LINE_SPACING,hV=nv.FROM_TL,dV=nv.FROM_BR,gV={colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"};var fV={draw:function(t){var e=t._fullLayout._infolayer.selectAll("g."+gV.colorbar).data(function(t){var e,n,r,i,a=t._fullLayout,o=t.calcdata,s=[];function l(t){return tV(t,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof i.calc?i.calc(t,r,e):(e._fillgradient=n.reversescale?oV(n.colorscale):n.colorscale,e._zrange=[n[i.min],n[i.max]])}for(var u=0;u<o.length;u++){var h=o[u];if((r=h[0].trace)._module){var d=r._module.colorbar;if(!0===r.visible&&d)for(var g=Array.isArray(d),f=g?d:[d],p=0;p<f.length;p++){var v=(i=f[p]).container;(n=v?r[v]:r)&&n.showscale&&((e=l(n.colorbar))._id="cb"+r.uid+(g&&v?"-"+v:""),e._traceIndex=r.index,e._propPrefix=(v?v+".":"")+"colorbar.",e._meta=r._meta,c(),s.push(e))}}}for(var m in a._colorAxes)if((n=a[m]).showscale){var y=a._colorAxes[m];(e=l(n.colorbar))._id="cb"+m,e._propPrefix=m+".colorbar.",e._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==y[0]&&(r=y[1],i.calc=r._module.colorbar.calc),c(),s.push(e)}return s}(t),(function(t){return t._id}));e.enter().append("g").attr("class",(function(t){return t._id})).classed(gV.colorbar,!0),e.each((function(e){var n=zZ.select(this);qZ.ensureSingle(n,"rect",gV.cbbg),qZ.ensureSingle(n,"g",gV.cbfills),qZ.ensureSingle(n,"g",gV.cblines),qZ.ensureSingle(n,"g",gV.cbaxis,(function(t){t.classed(gV.crisp,!0)})),qZ.ensureSingle(n,"g",gV.cbtitleunshift,(function(t){t.append("g").classed(gV.cbtitle,!0)})),qZ.ensureSingle(n,"rect",gV.cboutline);var r=function(t,e,n){var r="v"===e.orientation,i=e.len,a=e.lenmode,o=e.thickness,s=e.thicknessmode,l=e.outlinewidth,c=e.borderwidth,u=e.bgcolor,h=e.xanchor,d=e.yanchor,g=e.xpad,f=e.ypad,p=e.x,v=r?e.y:1-e.y,m="paper"===e.yref,y="paper"===e.xref,b=n._fullLayout,x=b._size,B=e._fillcolor,I=e._line,F=e.title,Q=F.side,C=e._zrange||zZ.extent(("function"==typeof B?B:I.color).domain()),w="function"==typeof I.color?I.color:function(){return I.color},U="function"==typeof B?B:function(){return B},A=e._levels,S=function(t,e,n){var r,i,a=e._levels,o=[],s=[],l=a.end+a.size/100,c=a.size,u=1.001*n[0]-.001*n[1],h=1.001*n[1]-.001*n[0];for(i=0;i<1e5&&(r=a.start+i*c,!(c>0?r>=l:r<=l));i++)r>u&&r<h&&o.push(r);if(e._fillgradient)s=[0];else if("function"==typeof e._fillcolor){var d=e._filllevels;if(d)for(l=d.end+d.size/100,c=d.size,i=0;i<1e5&&(r=d.start+i*c,!(c>0?r>=l:r<=l));i++)r>n[0]&&r<n[1]&&s.push(r);else s=o.map((function(t){return t-a.size/2})),s.push(s[s.length-1]+a.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(s=[0]);a.size<0&&(o.reverse(),s.reverse());return{line:o,fill:s}}(0,e,C),L=S.fill,k=S.line,G=Math.round(o*("fraction"===s?r?x.w:x.h:1)),_=G/(r?x.w:x.h),R=Math.round(i*("fraction"===a?r?x.h:x.w:1)),E=R/(r?x.h:x.w),T=y?x.w:n._fullLayout.width,M=m?x.h:n._fullLayout.height,N=Math.round(r?p*T+g:v*M+f),D={center:.5,right:1}[h]||0,X={top:1,middle:.5}[d]||0,Z=r?p-D*_:v-X*_,V=r?v-X*E:p-D*E,H=Math.round(r?M*(1-V):T*V);e._lenFrac=E,e._thickFrac=_,e._uFrac=Z,e._vFrac=V;var W=e._axis=function(t,e,n){var r=t._fullLayout,i="v"===e.orientation,a={type:"linear",range:n,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,labelalias:e.labelalias,ticklabelposition:e.ticklabelposition,ticklabeloverflow:e.ticklabeloverflow,ticklabelstep:e.ticklabelstep,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,exponentformat:e.exponentformat,minexponent:e.minexponent,separatethousands:e.separatethousands,showexponent:e.showexponent,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,title:e.title,showline:!0,anchor:"free",side:i?"right":"bottom",position:1},o=i?"y":"x",s={type:"linear",_id:o+e._id},l={letter:o,font:r.font,noAutotickangles:"y"===o,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:r.calendar};function c(t,e){return qZ.coerce(a,s,cV,t,e)}return sV(a,s,c,l,r),lV(a,s,c,l),s}(n,e,C);W.position=_+(r?p+g/x.w:v+f/x.h);var Y=-1!==["top","bottom"].indexOf(Q);r&&Y&&(W.title.side=Q,W.titlex=p+g/x.w,W.titley=V+("top"===F.side?E-f/x.h:f/x.h));r||Y||(W.title.side=Q,W.titley=v+f/x.h,W.titlex=V+g/x.w);if(I.color&&"auto"===e.tickmode){W.tickmode="linear",W.tick0=A.start;var z=A.size,O=qZ.constrain(R/50,4,15)+1,J=(C[1]-C[0])/((e.nticks||O)*z);if(J>1){var P=Math.pow(10,Math.floor(Math.log(J)/Math.LN10));z*=P*qZ.roundUp(J/P,[2,5,10]),(Math.abs(A.start)/A.size+1e-6)%1<2e-6&&(W.tick0=0)}W.dtick=z}W.domain=r?[V+f/x.h,V+E-f/x.h]:[V+g/x.w,V+E-g/x.w],W.setScale(),t.attr("transform",$Z(Math.round(x.l),Math.round(x.t)));var j,K=t.select("."+gV.cbtitleunshift).attr("transform",$Z(-Math.round(x.l),-Math.round(x.t))),q=W.ticklabelposition,$=W.title.font.size,tt=t.select("."+gV.cbaxis),et=0,nt=0;function rt(r,i){var a={propContainer:W,propName:e._propPrefix+"title",traceIndex:e._traceIndex,_meta:e._meta,placeholder:b._dfltTitle.colorbar,containerGroup:t.select("."+gV.cbtitle)},o="h"===r.charAt(0)?r.substr(1):"h"+r;t.selectAll("."+o+",."+o+"-math-group").remove(),iV.draw(n,r,tV(a,i||{}))}function it(){var t,e;(r&&Y||!r&&!Y)&&("top"===Q&&(t=g+x.l+T*p,e=f+x.t+M*(1-V-E)+3+.75*$),"bottom"===Q&&(t=g+x.l+T*p,e=f+x.t+M*(1-V)-3-.25*$),"right"===Q&&(e=f+x.t+M*v+3+.75*$,t=g+x.l+T*V),rt(W._id+"title",{attributes:{x:t,y:e,"text-anchor":r?"start":"middle"}}))}function at(){if(r&&!Y||!r&&Y){var t,i,a=W.position||0,o=W._offset+W._length/2;if("right"===Q)i=o,t=x.l+T*a+10+$*(W.showticklabels?1:.5);else if(t=o,"bottom"===Q&&(i=x.t+M*a+10+(-1===q.indexOf("inside")?W.tickfont.size:0)+("intside"!==W.ticks&&e.ticklen||0)),"top"===Q){var s=F.text.split("<br>").length;i=x.t+M*a+10-G-uV*$*s}rt((r?"h":"v")+W._id+"title",{avoid:{selection:zZ.select(n).selectAll("g."+W._id+"tick"),side:Q,offsetTop:r?0:x.t,offsetLeft:r?x.l:0,maxShift:r?b.width:b.height},attributes:{x:t,y:i,"text-anchor":"middle"},transform:{rotate:r?-90:0,offset:0}})}}function ot(){if(!r&&!Y||r&&Y){var i,a=t.select("."+gV.cbtitle),o=a.select("text"),s=[-l/2,l/2],c=a.select(".h"+W._id+"title-math-group").node(),u=15.6;if(o.node()&&(u=parseInt(o.node().style.fontSize,10)*uV),c?(i=nV.bBox(c),nt=i.width,(et=i.height)>u&&(s[1]-=(et-u)/2)):o.node()&&!o.classed(gV.jsPlaceholder)&&(i=nV.bBox(o.node()),nt=i.width,et=i.height),r){if(et){if(et+=5,"top"===Q)W.domain[1]-=et/x.h,s[1]*=-1;else{W.domain[0]+=et/x.h;var h=aV.lineCount(o);s[1]+=(1-h)*u}a.attr("transform",$Z(s[0],s[1])),W.setScale()}}else nt&&("right"===Q&&(W.domain[0]+=(nt+$/2)/x.w),a.attr("transform",$Z(s[0],s[1])),W.setScale())}t.selectAll("."+gV.cbfills+",."+gV.cblines).attr("transform",r?$Z(0,Math.round(x.h*(1-W.domain[1]))):$Z(Math.round(x.w*W.domain[0]),0)),tt.attr("transform",r?$Z(0,Math.round(-x.t)):$Z(Math.round(-x.l),0));var d=t.select("."+gV.cbfills).selectAll("rect."+gV.cbfill).attr("style","").data(L);d.enter().append("rect").classed(gV.cbfill,!0).attr("style",""),d.exit().remove();var g=C.map(W.c2p).map(Math.round).sort((function(t,e){return t-e}));d.each((function(t,i){var a=[0===i?C[0]:(L[i]+L[i-1])/2,i===L.length-1?C[1]:(L[i]+L[i+1])/2].map(W.c2p).map(Math.round);r&&(a[1]=qZ.constrain(a[1]+(a[1]>a[0])?1:-1,g[0],g[1]));var o=zZ.select(this).attr(r?"x":"y",N).attr(r?"y":"x",zZ.min(a)).attr(r?"width":"height",Math.max(G,2)).attr(r?"height":"width",Math.max(zZ.max(a)-zZ.min(a),2));if(e._fillgradient)nV.gradient(o,n,e._id,r?"vertical":"horizontalreversed",e._fillgradient,"fill");else{var s=U(t).replace("e-","");o.attr("fill",OZ(s).toHexString())}}));var f=t.select("."+gV.cblines).selectAll("path."+gV.cbline).data(I.color&&I.width?k:[]);f.enter().append("path").classed(gV.cbline,!0),f.exit().remove(),f.each((function(t){var e=N,n=Math.round(W.c2p(t))+I.width/2%1;zZ.select(this).attr("d","M"+(r?e+","+n:n+","+e)+(r?"h":"v")+G).call(nV.lineGroupStyle,I.width,w(t),I.dash)})),tt.selectAll("g."+W._id+"tick,path").remove();var p=N+G+(l||0)/2-("outside"===e.ticks?1:0),v=jZ.calcTicks(W),m=jZ.getTickSigns(W)[2];return jZ.drawTicks(n,W,{vals:"inside"===W.ticks?jZ.clipEnds(W,v):v,layer:tt,path:jZ.makeTickPath(W,p,m),transFn:jZ.makeTransTickFn(W)}),jZ.drawLabels(n,W,{vals:v,layer:tt,transFn:jZ.makeTransTickLabelFn(W),labelFns:jZ.makeLabelFns(W,p)})}function st(){var B,I=G+l/2;-1===q.indexOf("inside")&&(B=nV.bBox(tt.node()),I+=r?B.width:B.height),j=K.select("text");var C=0,w=r&&"top"===Q,U=!r&&"right"===Q,A=0;if(j.node()&&!j.classed(gV.jsPlaceholder)){var S,L=K.select(".h"+W._id+"title-math-group").node();L&&(r&&Y||!r&&!Y)?(C=(B=nV.bBox(L)).width,S=B.height):(C=(B=nV.bBox(K.node())).right-x.l-(r?N:H),S=B.bottom-x.t-(r?H:N),r||"top"!==Q||(I+=B.height,A=B.height)),U&&(j.attr("transform",$Z(C/2+$/2,0)),C*=2),I=Math.max(I,r?C:S)}var k=2*(r?g:f)+I+c+l/2,_=0;!r&&F.text&&"bottom"===d&&v<=0&&(k+=_=k/2,A+=_),b._hColorbarMoveTitle=_,b._hColorbarMoveCBTitle=A;var E=c+l,T=(r?N:H)-E/2-(r?g:0),M=(r?H:N)-(r?R:f+A-_);t.select("."+gV.cbbg).attr("x",T).attr("y",M).attr(r?"width":"height",Math.max(k-_,2)).attr(r?"height":"width",Math.max(R+E,2)).call(rV.fill,u).call(rV.stroke,e.bordercolor).style("stroke-width",c);var Z=U?Math.max(C-10,0):0;t.selectAll("."+gV.cboutline).attr("x",(r?N:H+g)+Z).attr("y",(r?H+f-R:N)+(w?et:0)).attr(r?"width":"height",Math.max(G,2)).attr(r?"height":"width",Math.max(R-(r?2*f+et:2*g+Z),2)).call(rV.stroke,e.outlinecolor).style({fill:"none","stroke-width":l});var V=r?D*k:0,z=r?0:(1-X)*k-A;if(V=y?x.l-V:-V,z=m?x.t-z:-z,t.attr("transform",$Z(V,z)),!r&&(c||OZ(u).getAlpha()&&!OZ.equals(b.paper_bgcolor,u))){var O=tt.selectAll("text"),J=O[0].length,P=t.select("."+gV.cbbg).node(),nt=nV.bBox(P),rt=nV.getTranslate(t),it=2;O.each((function(t,e){var n=0,r=J-1;if(e===n||e===r){var i,a=nV.bBox(this),o=nV.getTranslate(this);if(e===r){var s=a.right+o.x;(i=nt.right+rt.x+H-c-it+p-s)>0&&(i=0)}else if(e===n){var l=a.left+o.x;(i=nt.left+rt.x+H+c+it-l)<0&&(i=0)}i&&(J<3?this.setAttribute("transform","translate("+i+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}}))}var at={},ot=hV[h],st=dV[h],lt=hV[d],ct=dV[d],ut=k-G;r?("pixels"===a?(at.y=v,at.t=R*lt,at.b=R*ct):(at.t=at.b=0,at.yt=v+i*lt,at.yb=v-i*ct),"pixels"===s?(at.x=p,at.l=k*ot,at.r=k*st):(at.l=ut*ot,at.r=ut*st,at.xl=p-o*ot,at.xr=p+o*st)):("pixels"===a?(at.x=p,at.l=R*ot,at.r=R*st):(at.l=at.r=0,at.xl=p+i*ot,at.xr=p-i*st),"pixels"===s?(at.y=1-v,at.t=k*lt,at.b=k*ct):(at.t=ut*lt,at.b=ut*ct,at.yt=v-o*lt,at.yb=v+o*ct));var ht=e.y<.5?"b":"t",dt=e.x<.5?"l":"r";n._fullLayout._reservedMargin[e._id]={};var gt={r:b.width-T-V,l:T+at.r,b:b.height-M-z,t:M+at.b};y&&m?JZ.autoMargin(n,e._id,at):y?n._fullLayout._reservedMargin[e._id][ht]=gt[ht]:m||r?n._fullLayout._reservedMargin[e._id][dt]=gt[dt]:n._fullLayout._reservedMargin[e._id][ht]=gt[ht]}return qZ.syncOrAsync([JZ.previousPromises,it,ot,at,JZ.previousPromises,st],n)}(n,e,t);r&&r.then&&(t._promises||[]).push(r),t._context.edits.colorbarPosition&&function(t,e,n){var r,i,a,o="v"===e.orientation,s=n._fullLayout,l=s._size;KZ.init({element:t.node(),gd:n,prepFn:function(){r=t.attr("transform"),eV(t)},moveFn:function(n,s){t.attr("transform",r+$Z(n,s)),i=KZ.align((o?e._uFrac:e._vFrac)+n/l.w,o?e._thickFrac:e._lenFrac,0,1,e.xanchor),a=KZ.align((o?e._vFrac:1-e._uFrac)-s/l.h,o?e._lenFrac:e._thickFrac,0,1,e.yanchor);var c=KZ.getCursor(i,a,e.xanchor,e.yanchor);eV(t,c)},doneFn:function(){if(eV(t),void 0!==i&&void 0!==a){var r={};r[e._propPrefix+"x"]=i,r[e._propPrefix+"y"]=a,void 0!==e._traceIndex?PZ.call("_guiRestyle",n,r,e._traceIndex):PZ.call("_guiRelayout",n,r)}}})}(n,e,t)})),e.exit().each((function(e){JZ.autoMargin(t,e._id)})).remove(),e.order()}},pV={moduleType:"component",name:"colorbar",attributes:qv,supplyDefaults:zm,draw:fV.draw,hasColorbar:hm},vV={moduleType:"component",name:"legend",layoutAttributes:EI,supplyLayoutDefaults:YI,draw:DF,style:vF},mV={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},yV={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}},bV=hh,xV=yf,BV=xV.extendFlat,IV=xV.extendDeep;function FV(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}var QV=function(t,e){var n,r,i=t.data,a=t.layout,o=IV([],i),s=IV({},a,FV(e.tileClass)),l=t._context||{};if(e.width&&(s.width=e.width),e.height&&(s.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){s.annotations=[];var c=Object.keys(s);for(n=0;n<c.length;n++)r=c[n],["xaxis","yaxis","zaxis"].indexOf(r.slice(0,5))>-1&&(s[c[n]].title={text:""});for(n=0;n<o.length;n++){var u=o[n];u.showscale=!1,u.marker&&(u.marker.showscale=!1),bV.traceIs(u,"pie-like")&&(u.textposition="none")}}if(Array.isArray(e.annotations))for(n=0;n<e.annotations.length;n++)s.annotations.push(e.annotations[n]);var h=Object.keys(s).filter((function(t){return t.match(/^scene\d*$/)}));if(h.length){var d={};for("thumbnail"===e.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<h.length;n++){var g=s[h[n]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),BV(g.xaxis,d),BV(g.yaxis,d),BV(g.zaxis,d),g._scene=null}}var f=document.createElement("div");e.tileClass&&(f.className=e.tileClass);var p={gd:f,td:f,layout:s,data:o,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return"transparent"!==e.setBackground&&(p.config.setBackground=e.setBackground||"opaque"),p.gd.defaultLayout=FV(e.tileClass),p},CV=Vf.EventEmitter,wV=hh,UV=yf,AV=Zk,SV=QV,LV=qk,kV=nG;var GV=function(t,e){var n=new CV,r=SV(t,{format:"png"}),i=r.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var a=AV.getRedrawFunc(i);return wV.call("_doPlot",i,r.data,r.layout,r.config).then(a).then((function(){var t=AV.getDelay(i._fullLayout);setTimeout((function(){var t=LV(i),r=document.createElement("canvas");r.id=UV.randstr(),(n=kV({format:e.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:r,emitter:n,svg:t})).clean=function(){i&&document.body.removeChild(i)}}),t)})).catch((function(t){n.emit("error",t)})),n},_V=Zk,RV={getDelay:_V.getDelay,getRedrawFunc:_V.getRedrawFunc,clone:QV,toSVG:qk,svgToImg:nG,toImage:GV,downloadImage:EG};!function(t){t.version=so.version;for(var e=hh,n=t.register=e.register,r=Qf,i=Object.keys(r),a=0;a<i.length;a++){var o=i[a];"_"!==o.charAt(0)&&(t[o]=r[o]),n({moduleType:"apiMethod",name:o,fn:r[o]})}n(QT),n([xM,DM,DL,fN,LN,QD,IX,MX,pZ,MZ,YZ,dy,pV,vV,uC,XU]),n([mV,yV]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(n(window.PlotlyLocales),delete window.PlotlyLocales),t.Icons=pC;var s=uC,l=qp;t.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},t.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},t.Snapshot=RV,t.PlotSchema=jf}(oo);var EV=oo,TV={TEXTPAD:3,eventDataKeys:["value","label"]},MV=xL,NV=Iv,DV=dd.hovertemplateAttrs,XV=dd.texttemplateAttrs,ZV=im,VV=mu(),HV=TV,WV=hd.pattern,YV=Fu.extendFlat,zV=VV({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),OV=YV({},MV.marker.line.width,{dflt:0}),JV=YV({width:OV,editType:"calc"},ZV("marker.line")),PV=YV({line:JV,editType:"calc"},ZV("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:WV,cornerradius:{valType:"any",editType:"calc",description:["Sets the rounding of corners. May be an integer number of pixels,","or a percentage of bar width (as a string ending in %). Defaults to `layout.barcornerradius`.","In stack or relative barmode, the first trace to set cornerradius is used for the whole stack."].join(" ")}}),jV={x:MV.x,x0:MV.x0,dx:MV.dx,y:MV.y,y0:MV.y0,dy:MV.dy,xperiod:MV.xperiod,yperiod:MV.yperiod,xperiod0:MV.xperiod0,yperiod0:MV.yperiod0,xperiodalignment:MV.xperiodalignment,yperiodalignment:MV.yperiodalignment,xhoverformat:NV("x"),yhoverformat:NV("y"),text:MV.text,texttemplate:XV({editType:"plot"},{keys:HV.eventDataKeys}),hovertext:MV.hovertext,hovertemplate:DV({},{keys:HV.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:YV({},zV,{description:"Sets the font used for `text`."}),insidetextfont:YV({},zV,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:YV({},zV,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:YV({},MV.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:PV,offsetgroup:MV.offsetgroup,alignmentgroup:MV.alignmentgroup,selected:{marker:{opacity:MV.selected.marker.opacity,color:MV.selected.marker.color,editType:"style"},textfont:MV.selected.textfont,editType:"style"},unselected:{marker:{opacity:MV.unselected.marker.opacity,color:MV.unselected.marker.color,editType:"style"},textfont:MV.unselected.textfont,editType:"style"},zorder:MV.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}},KV=jV,qV=Iv,$V=dd.hovertemplateAttrs,tH=dd.texttemplateAttrs,eH=mu(),nH=function(t,e){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",t,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",e?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",t,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",t,"axis bin.","Default behavior: If `nbins"+t+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+t+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",e?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}},rH={eventDataKeys:["binNumber"]},iH=Fu.extendFlat,aH={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:qV("x"),yhoverformat:qV("y"),text:iH({},KV.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:iH({},KV.hovertext,{description:"Same as `text`."}),orientation:KV.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:nH("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:nH("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:$V({},{keys:rH.eventDataKeys}),texttemplate:tH({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:iH({},KV.textposition,{arrayOk:!1}),textfont:eH({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:eH({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:eH({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:KV.insidetextanchor,textangle:KV.textangle,cliponaxis:KV.cliponaxis,constraintext:KV.constraintext,marker:KV.marker,offsetgroup:KV.offsetgroup,alignmentgroup:KV.alignmentgroup,selected:KV.selected,unselected:KV.unselected,_deprecated:{bardir:KV._deprecated.bardir},zorder:KV.zorder},oH={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")},barcornerradius:{valType:"any",editType:"calc",description:["Sets the rounding of bar corners. May be an integer number of pixels,","or a percentage of bar width (as a string ending in %)."].join(" ")}},sH=Pu,lH=mv.hasColorscale,cH=ty,uH=yf.coercePattern,hH=function(t,e,n,r,i){var a=n("marker.color",r),o=lH(t,"marker");o&&cH(t,e,i,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",sH.defaultLine),lH(t,"marker.line")&&cH(t,e,i,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),uH(n,"marker.pattern",a,o),n("selected.marker.color"),n("unselected.marker.color")},dH=Ac,gH=yf,fH=gH.coerceFont;function pH(t){if(dH(t)){if((t=+t)>=0)return t}else if("string"==typeof t&&"%"===(t=t.trim()).slice(-1)&&dH(t.slice(0,-1))&&(t=+t.slice(0,-1))>=0)return t+"%"}function vH(t,e,n,r,i,a){var o=!(!1===(a=a||{}).moduleHasSelected),s=!(!1===a.moduleHasUnselected),l=!(!1===a.moduleHasConstrain),c=!(!1===a.moduleHasCliponaxis),u=!(!1===a.moduleHasTextangle),h=!(!1===a.moduleHasInsideanchor),d=!!a.hasPathbar,g=Array.isArray(i)||"auto"===i,f=g||"inside"===i,p=g||"outside"===i;if(f||p){var v=fH(r,"textfont",n.font),m=gH.extendFlat({},v),y=!(t.textfont&&t.textfont.color);if(y&&delete m.color,fH(r,"insidetextfont",m),d){var b=gH.extendFlat({},v);y&&delete b.color,fH(r,"pathbar.textfont",b)}p&&fH(r,"outsidetextfont",v),o&&r("selected.textfont.color"),s&&r("unselected.textfont.color"),l&&r("constraintext"),c&&r("cliponaxis"),u&&r("textangle"),r("texttemplate")}f&&h&&r("insidetextanchor")}var mH=pH,yH=hh,bH=yf,xH=Pu,BH=vH,IH=hH,FH=aH,QH=yf,CH=op,wH=hh.traceIs,UH=N_,AH=mH,SH=QH.nestedProperty,LH=ZU.getAxisGroup,kH=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],GH=["x","y"],_H=hh,RH=iI,EH=yf,TH=oH,MH=mH,NH=yf,DH=Ac,XH={count:function(t,e,n){return n[t]++,1},sum:function(t,e,n,r){var i=r[e];return DH(i)?(i=Number(i),n[t]+=i,i):0},avg:function(t,e,n,r,i){var a=r[e];return DH(a)&&(a=Number(a),n[t]+=a,i[t]++),0},min:function(t,e,n,r){var i=r[e];if(DH(i)){if(i=Number(i),!DH(n[t]))return n[t]=i,i;if(n[t]>i){var a=i-n[t];return n[t]=i,a}}return 0},max:function(t,e,n,r){var i=r[e];if(DH(i)){if(i=Number(i),!DH(n[t]))return n[t]=i,i;if(n[t]<i){var a=i-n[t];return n[t]=i,a}}return 0}},ZH=Sc,VH=ZH.ONEAVGYEAR,HH=ZH.ONEAVGMONTH,WH=ZH.ONEDAY,YH=ZH.ONEHOUR,zH=ZH.ONEMIN,OH=ZH.ONESEC,JH=iI.tickIncrement;function PH(t,e,n,r){if(t*e<=0)return 1/0;for(var i=Math.abs(e-t),a="date"===n.type,o=jH(i,a),s=0;s<10;s++){var l=jH(80*o,a);if(o===l)break;if(!KH(l,t,e,a,n,r))break;o=l}return o}function jH(t,e){return e&&t>OH?t>WH?t>1.1*VH?VH:t>1.1*HH?HH:WH:t>YH?YH:t>zH?zH:OH:Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function KH(t,e,n,r,i,a){if(r&&t>WH){var o=qH(e,i,a),s=qH(n,i,a),l=t===VH?0:1;return o[l]!==s[l]}return Math.floor(n/t)-Math.floor(e/t)>.1}function qH(t,e,n){var r=e.c2d(t,VH,n).split("-");return""===r[0]&&(r.unshift(),r[0]="-"+r[0]),r}var $H=Ac,tW=yf,eW=hh,nW=iI,rW=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;NH.mergeArray(e.text,t,"tx"),NH.mergeArray(e.hovertext,t,"htx");var r=e.marker;if(r){NH.mergeArray(r.opacity,t,"mo",!0),NH.mergeArray(r.color,t,"mc");var i=r.line;i&&(NH.mergeArray(i.color,t,"mlc"),NH.mergeArrayCastPositive(i.width,t,"mlw"))}},iW=XH,aW={percent:function(t,e){for(var n=t.length,r=100/e,i=0;i<n;i++)t[i]*=r},probability:function(t,e){for(var n=t.length,r=0;r<n;r++)t[r]/=e},density:function(t,e,n,r){var i=t.length;r=r||1;for(var a=0;a<i;a++)t[a]*=n[a]*r},"probability density":function(t,e,n,r){var i=t.length;r&&(e/=r);for(var a=0;a<i;a++)t[a]*=n[a]/e}},oW=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)e[i]?(t[i]/=e[i],r+=t[i]):t[i]=null;return r},sW=function(t,e,n,r,i){var a,o,s=-1.1*e,l=-.1*e,c=t-l,u=n[0],h=n[1],d=Math.min(PH(u+l,u+c,r,i),PH(h+l,h+c,r,i)),g=Math.min(PH(u+s,u+l,r,i),PH(h+s,h+l,r,i));if(d>g&&g<Math.abs(h-u)/4e3?(a=d,o=!1):(a=Math.min(d,g),o=!0),"date"===r.type&&a>WH){var f=a===VH?1:6,p=a===VH?"M12":"M1";return function(e,n){var a=r.c2d(e,VH,i),s=a.indexOf("-",f);s>0&&(a=a.substr(0,s));var l=r.d2c(a,0,i);if(l<e){var c=JH(l,p,!1,i);(l+c)/2<e+t&&(l=c)}return n&&o?JH(l,p,!0,i):l}}return function(e,n){var r=a*Math.round(e/a);return r+a/10<e&&r+.9*a<e+t&&(r+=a),n&&o&&(r-=a),r}};function lW(t,e,n,r,i){var a,o,s,l,c,u,h,d=r+"bins",g=t._fullLayout,f=e["_"+r+"bingroup"],p=g._histogramBinOpts[f],v="overlay"===g.barmode,m=function(t){return n.r2c(t,0,l)},y=function(t){return n.c2r(t,0,l)},b="date"===n.type?function(t){return t||0===t?tW.cleanDate(t,null,l):null}:function(t){return $H(t)?Number(t):null};function x(t,e,n){e[t+"Found"]?(e[t]=b(e[t]),null===e[t]&&(e[t]=n[t])):(u[t]=e[t]=n[t],tW.nestedProperty(o[0],d+"."+t).set(n[t]))}if(e["_"+r+"autoBinFinished"])delete e["_"+r+"autoBinFinished"];else{o=p.traces;var B=[],I=!0,F=!1,Q=!1;for(a=0;a<o.length;a++)if((s=o[a]).visible){var C=p.dirs[a];c=s["_"+C+"pos0"]=n.makeCalcdata(s,C),B=tW.concat(B,c),delete s["_"+r+"autoBinFinished"],!0===e.visible&&(I?I=!1:(delete s._autoBin,s["_"+r+"autoBinFinished"]=1),eW.traceIs(s,"2dMap")&&(F=!0),"histogram2dcontour"===s.type&&(Q=!0))}l=o[0][r+"calendar"];var w=nW.autoBin(B,n,p.nbins,F,l,p.sizeFound&&p.size),U=o[0]._autoBin={};if(u=U[p.dirs[0]]={},Q&&(p.size||(w.start=y(nW.tickIncrement(m(w.start),w.size,!0,l))),void 0===p.end&&(w.end=y(nW.tickIncrement(m(w.end),w.size,!1,l)))),v&&!eW.traceIs(e,"2dMap")&&0===w._dataSpan&&"category"!==n.type&&"multicategory"!==n.type&&""===e.bingroup&&void 0===e.xbins){if(i)return[w,c,!0];w=function(t,e,n,r,i){var a,o,s,l=t._fullLayout,c=function(t,e){for(var n=e.xaxis,r=e.yaxis,i=e.orientation,a=[],o=t._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===n&&l.yaxis===r&&a.push(l)}return a}(t,e),u=!1,h=1/0,d=[e];for(a=0;a<c.length;a++)if((o=c[a])===e)u=!0;else if(u){var g=lW(t,o,n,r,!0),f=g[0],p=g[2];o["_"+r+"autoBinFinished"]=1,o["_"+r+"pos0"]=g[1],p?d.push(o):h=Math.min(h,f.size)}else s=l._histogramBinOpts[o["_"+r+"bingroup"]],h=Math.min(h,s.size||o[i].size);var v=new Array(d.length);for(a=0;a<d.length;a++)for(var m=d[a]["_"+r+"pos0"],y=0;y<m.length;y++)if(void 0!==m[y]){v[a]=m[y];break}isFinite(h)||(h=tW.distinctVals(v).minDiff);for(a=0;a<d.length;a++){var b=(o=d[a])[r+"calendar"],x={start:n.c2r(v[a]-h/2,0,b),end:n.c2r(v[a]+h/2,0,b),size:h};o._input[i]=o[i]=x,(s=l._histogramBinOpts[o["_"+r+"bingroup"]])&&tW.extendFlat(s,x)}return e[i]}(t,e,n,r,d)}(h=s.cumulative||{}).enabled&&"include"!==h.currentbin&&("decreasing"===h.direction?w.start=y(nW.tickIncrement(m(w.start),w.size,!0,l)):w.end=y(nW.tickIncrement(m(w.end),w.size,!1,l))),p.size=w.size,p.sizeFound||(u.size=w.size,tW.nestedProperty(o[0],d+".size").set(w.size)),x("start",p,w),x("end",p,w)}c=e["_"+r+"pos0"],delete e["_"+r+"pos0"];var A=e._input[d]||{},S=tW.extendFlat({},p),L=p.start,k=n.r2l(A.start),G=void 0!==k;if((p.startFound||G)&&k!==n.r2l(L)){var _=G?k:tW.aggNums(Math.min,null,c),R={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:p.size,tick0:L,calendar:l,range:[_,nW.tickIncrement(_,p.size,!1,l)].map(n.l2r)},E=nW.tickFirst(R);E>n.r2l(_)&&(E=nW.tickIncrement(E,p.size,!0,l)),S.start=n.l2r(E),G||tW.nestedProperty(e,d+".start").set(S.start)}var T=p.end,M=n.r2l(A.end),N=void 0!==M;if((p.endFound||N)&&M!==n.r2l(T)){var D=N?M:tW.aggNums(Math.max,null,c);S.end=n.l2r(D),N||tW.nestedProperty(e,d+".start").set(S.end)}var X="autobin"+r;return!1===e._input[X]&&(e._input[d]=tW.extendFlat({},e[d]||{}),delete e._input[X],delete e[X]),[S,c]}var cW={calc:function(t,e){var n,r,i,a,o=[],s=[],l="h"===e.orientation,c=nW.getFromId(t,l?e.yaxis:e.xaxis),u=l?"y":"x",h={x:"y",y:"x"}[u],d=e[u+"calendar"],g=e.cumulative,f=lW(t,e,c,u),p=f[0],v=f[1],m="string"==typeof p.size,y=[],b=m?y:p,x=[],B=[],I=[],F=0,Q=e.histnorm,C=e.histfunc,w=-1!==Q.indexOf("density");g.enabled&&w&&(Q=Q.replace(/ ?density$/,""),w=!1);var U,A="max"===C||"min"===C?null:0,S=iW.count,L=aW[Q],k=!1,G=function(t){return c.r2c(t,0,d)};for(tW.isArrayOrTypedArray(e[h])&&"count"!==C&&(U=e[h],k="avg"===C,S=iW[C]),n=G(p.start),i=G(p.end)+(n-nW.tickIncrement(n,p.size,!1,d))/1e6;n<i&&o.length<1e6&&(r=nW.tickIncrement(n,p.size,!1,d),o.push((n+r)/2),s.push(A),I.push([]),y.push(n),w&&x.push(1/(r-n)),k&&B.push(0),!(r<=n));)n=r;y.push(n),m||"date"!==c.type||(b={start:G(b.start),end:G(b.end),size:b.size}),t._fullLayout._roundFnOpts||(t._fullLayout._roundFnOpts={});var _=e["_"+u+"bingroup"],R={leftGap:1/0,rightGap:1/0};_&&(t._fullLayout._roundFnOpts[_]||(t._fullLayout._roundFnOpts[_]=R),R=t._fullLayout._roundFnOpts[_]);var E,T=s.length,M=!0,N=R.leftGap,D=R.rightGap,X={};for(n=0;n<v.length;n++){var Z=v[n];(a=tW.findBin(Z,b))>=0&&a<T&&(F+=S(a,n,s,U,B),M&&I[a].length&&Z!==v[I[a][0]]&&(M=!1),I[a].push(n),X[n]=a,N=Math.min(N,Z-y[a]),D=Math.min(D,y[a+1]-Z))}R.leftGap=N,R.rightGap=D,M||(E=function(e,n){return function(){var r=t._fullLayout._roundFnOpts[_];return sW(r.leftGap,r.rightGap,y,c,d)(e,n)}}),k&&(F=oW(s,B)),L&&L(s,F,x),g.enabled&&function(t,e,n){var r,i,a;function o(e){a=t[e],t[e]/=2}function s(e){i=t[e],t[e]=a+i/2,a+=i}if("half"===n)if("increasing"===e)for(o(0),r=1;r<t.length;r++)s(r);else for(o(t.length-1),r=t.length-2;r>=0;r--)s(r);else if("increasing"===e){for(r=1;r<t.length;r++)t[r]+=t[r-1];"exclude"===n&&(t.unshift(0),t.pop())}else{for(r=t.length-2;r>=0;r--)t[r]+=t[r+1];"exclude"===n&&(t.push(0),t.shift())}}(s,g.direction,g.currentbin);var V=Math.min(o.length,s.length),H=[],W=0,Y=V-1;for(n=0;n<V;n++)if(s[n]){W=n;break}for(n=V-1;n>=W;n--)if(s[n]){Y=n;break}for(n=W;n<=Y;n++)if($H(o[n])&&$H(s[n])){var z={p:o[n],s:s[n],b:0};g.enabled||(z.pts=I[n],M?z.ph0=z.ph1=I[n].length?v[I[n][0]]:o[n]:(e._computePh=!0,z.ph0=E(y[n]),z.ph1=E(y[n+1],!0))),H.push(z)}return 1===H.length&&(H[0].width1=nW.tickIncrement(H[0].p,p.size,!1,d)-H[0].p),rW(H,e),tW.isArrayOrTypedArray(e.selectedpoints)&&tW.tagSelected(H,e,X),H},calcAllAutoBins:lW},uW=uo,hW=yf;function dW(t){return"_"+t+"Text_minsize"}var gW={recordMinTextSize:function(t,e,n){if(n.uniformtext.mode){var r=dW(t),i=n.uniformtext.minsize,a=e.scale*e.fontSize;e.hide=a<i,n[r]=n[r]||1/0,e.hide||(n[r]=Math.min(n[r],Math.max(a,i)))}},clearMinTextSize:function(t,e){e[dW(t)]=void 0},resizeText:function(t,e,n){var r=t._fullLayout,i=r["_"+n+"Text_minsize"];if(i){var a,o="hide"===r.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}e.selectAll(a).each((function(t){var e=t.transform;if(e){e.scale=o&&e.hide?0:i/e.fontSize;var n=uW.select(this).select("text");hW.setTransormAndDisplay(n,e)}}))}}},fW={},pW=Ac,vW=vu,mW=yf.isArrayOrTypedArray;fW.coerceString=function(t,e,n){if("string"==typeof e){if(e||!t.noBlank)return e}else if(("number"==typeof e||!0===e)&&!t.strict)return String(e);return void 0!==n?n:t.dflt},fW.coerceNumber=function(t,e,n){if(pW(e)){e=+e;var r=t.min,i=t.max;if(!(void 0!==r&&e<r||void 0!==i&&e>i))return e}return void 0!==n?n:t.dflt},fW.coerceColor=function(t,e,n){return vW(e).isValid()?e:void 0!==n?n:t.dflt},fW.coerceEnumerated=function(t,e,n){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==n?n:t.dflt},fW.getValue=function(t,e){var n;return mW(t)?e<t.length&&(n=t[e]):n=t,n},fW.getLineWidth=function(t,e){return 0<e.mlw?e.mlw:mW(t.marker.line.width)?0:t.marker.line.width};var yW=uo,bW=Pu,xW=Qb,BW=yf,IW=hh,FW=gW.resizeText,QW=jV.textfont,CW=jV.insidetextfont,wW=jV.outsidetextfont,UW=fW;function AW(t,e,n){xW.pointStyle(t.selectAll("path"),e,n),SW(t,e,n)}function SW(t,e,n){t.selectAll("text").each((function(t){var r=yW.select(this),i=BW.ensureUniformFontSize(n,LW(r,t,e,n));xW.font(r,i)}))}function LW(t,e,n,r){var i=r._fullLayout.font,a=n.textfont;if(t.classed("bartext-inside")){var o=EW(e,n);a=GW(n,e.i,i,o)}else t.classed("bartext-outside")&&(a=_W(n,e.i,i));return a}function kW(t,e,n){return RW(QW,t.textfont,e,n)}function GW(t,e,n,r){var i=kW(t,e,n);return(void 0===t._input.textfont||void 0===t._input.textfont.color||Array.isArray(t.textfont.color)&&void 0===t.textfont.color[e])&&(i={color:bW.contrast(r),family:i.family,size:i.size,weight:i.weight,style:i.style,variant:i.variant}),RW(CW,t.insidetextfont,e,i)}function _W(t,e,n){var r=kW(t,e,n);return RW(wW,t.outsidetextfont,e,r)}function RW(t,e,n,r){e=e||{};var i=UW.getValue(e.family,n),a=UW.getValue(e.size,n),o=UW.getValue(e.color,n),s=UW.getValue(e.weight,n),l=UW.getValue(e.style,n),c=UW.getValue(e.variant,n);return{family:UW.coerceString(t.family,i,r.family),size:UW.coerceNumber(t.size,a,r.size),color:UW.coerceColor(t.color,o,r.color),weight:UW.coerceString(t.weight,s,r.weight),style:UW.coerceString(t.style,l,r.style),variant:UW.coerceString(t.variant,c,r.variant)}}function EW(t,e){return"waterfall"===e.type?e[t.dir].marker.color:t.mcc||t.mc||e.marker.color}var TW={style:function(t){var e=yW.select(t).selectAll('g[class^="barlayer"]').selectAll("g.trace");FW(t,e,"bar");var n=e.size(),r=t._fullLayout;e.style("opacity",(function(t){return t[0].trace.opacity})).each((function(t){("stack"===r.barmode&&n>1||0===r.bargap&&0===r.bargroupgap&&!t[0].trace.marker.line.width)&&yW.select(this).attr("shape-rendering","crispEdges")})),e.selectAll("g.points").each((function(e){AW(yW.select(this),e[0].trace,t)})),IW.getComponentMethod("errorbars","style")(e)},styleTextPoints:SW,styleOnSelect:function(t,e,n){var r=e[0].trace;r.selectedpoints?function(t,e,n){xW.selectedPointStyle(t.selectAll("path"),e),function(t,e,n){t.each((function(t){var r,i=yW.select(this);if(t.selected){r=BW.ensureUniformFontSize(n,LW(i,t,e,n));var a=e.selected.textfont&&e.selected.textfont.color;a&&(r.color=a),xW.font(i,r)}else xW.selectedTextStyle(i,e)}))}(t.selectAll("text"),e,n)}(n,r,t):(AW(n,r,t),IW.getComponentMethod("errorbars","style")(n))},getInsideTextFont:GW,getOutsideTextFont:_W,getBarColor:EW,resizeText:FW},MW=uo,NW=Ac,DW=yf,XW=tv,ZW=Pu,VW=Qb,HW=hh,WW=iI.tickText,YW=gW.recordMinTextSize,zW=gW.clearMinTextSize,OW=TW,JW=fW,PW=jV.text,jW=jV.textposition,KW=yy.appendArrayPointValue,qW=TV.TEXTPAD;function $W(t){return t.id}function tY(t){if(t.ids)return $W}function eY(t){return(t>0)-(t<0)}function nY(t,e){return t<e?1:-1}function rY(t,e,n,r){var i;return!e.uniformtext.mode&&iY(n)?(r&&(i=r()),t.transition().duration(n.duration).ease(n.easing).each("end",(function(){i&&i()})).each("interrupt",(function(){i&&i()}))):t}function iY(t){return t&&t.duration>0}function aY(t,e,n,r,i){return!(t<0||e<0)&&(n<=t&&r<=e||n<=e&&r<=t||(i?t>=n*(e/r):e>=r*(t/n)))}function oY(t){return"auto"===t?0:t}function sY(t,e){var n=Math.PI/180*e,r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));return{x:t.width*i+t.height*r,y:t.width*r+t.height*i}}function lY(t,e,n,r,i,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,c=a.anchor,u="end"===c,h="start"===c,d=((a.leftToRight||0)+1)/2,g=1-d,f=a.hasB,p=a.r,v=a.overhead,m=i.width,y=i.height,b=Math.abs(e-t),x=Math.abs(r-n),B=b>2*qW&&x>2*qW?qW:0;b-=2*B,x-=2*B;var I=oY(l);"auto"!==l||m<=b&&y<=x||!(m>b||y>x)||(m>x||y>b)&&m<y==b<x||(I+=90);var F,Q,C=sY(i,I);if(p&&p-v>qW){var w=function(t,e,n,r,i,a,o,s,l){var c,u,h,d,g,f=Math.max(0,Math.abs(e-t)-2*qW),p=Math.max(0,Math.abs(r-n)-2*qW),v=a-qW,m=o?v-Math.sqrt(v*v-(v-o)*(v-o)):v,y=l?2*v:s?v-o:2*m,b=l?2*v:s?2*m:v-o;i.y/i.x>=p/(f-y)?d=p/i.y:i.y/i.x<=(p-b)/f?d=f/i.x:!l&&s?(c=i.x*i.x+i.y*i.y/4,h=(f-v)*(f-v)+(p/2-v)*(p/2-v)-v*v,d=(-(u=-2*i.x*(f-v)-i.y*(p/2-v))+Math.sqrt(u*u-4*c*h))/(2*c)):l?(c=(i.x*i.x+i.y*i.y)/4,h=(f/2-v)*(f/2-v)+(p/2-v)*(p/2-v)-v*v,d=(-(u=-i.x*(f/2-v)-i.y*(p/2-v))+Math.sqrt(u*u-4*c*h))/(2*c)):(c=i.x*i.x/4+i.y*i.y,h=(f/2-v)*(f/2-v)+(p-v)*(p-v)-v*v,d=(-(u=-i.x*(f/2-v)-2*i.y*(p-v))+Math.sqrt(u*u-4*c*h))/(2*c));d=Math.min(1,d),g=s?Math.max(0,v-Math.sqrt(Math.max(0,v*v-(v-(p-i.y*d)/2)*(v-(p-i.y*d)/2)))-o):Math.max(0,v-Math.sqrt(Math.max(0,v*v-(v-(f-i.x*d)/2)*(v-(f-i.x*d)/2)))-o);return{scale:d,pad:g}}(t,e,n,r,C,p,v,o,f);F=w.scale,Q=w.pad}else F=1,s&&(F=Math.min(1,b/C.x,x/C.y)),Q=0;var U=i.left*g+i.right*d,A=(i.top+i.bottom)/2,S=(t+qW)*g+(e-qW)*d,L=(n+r)/2,k=0,G=0;if(h||u){var _=(o?C.x:C.y)/2;p&&(u||f)&&(B+=Q);var R=o?nY(t,e):nY(n,r);o?h?(S=t+R*B,k=-R*_):(S=e-R*B,k=R*_):h?(L=n+R*B,G=-R*_):(L=r-R*B,G=R*_)}return{textX:U,textY:A,targetX:S,targetY:L,anchorX:k,anchorY:G,scale:F,rotate:I}}var cY={plot:function(t,e,n,r,i,a){var o=e.xaxis,s=e.yaxis,l=t._fullLayout,c=t._context.staticPlot;i||(i={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},zW("bar",l));var u=DW.makeTraceGroups(r,n,"trace bars").each((function(n){var r=MW.select(this),u=n[0].trace,h=n[0].t,d="waterfall"===u.type,g="funnel"===u.type,f="histogram"===u.type,p="bar"===u.type,v=p||g,m=0;d&&u.connector.visible&&"between"===u.connector.mode&&(m=u.connector.line.width/2);var y="h"===u.orientation,b=iY(i),x=DW.ensureSingle(r,"g","points"),B=tY(u),I=x.selectAll("g.point").data(DW.identity,B);I.enter().append("g").classed("point",!0),I.exit().remove(),I.each((function(r,d){var g,x,B=MW.select(this),I=function(t,e,n,r){var i=[],a=[],o=r?e:n,s=r?n:e;return i[0]=o.c2p(t.s0,!0),a[0]=s.c2p(t.p0,!0),i[1]=o.c2p(t.s1,!0),a[1]=s.c2p(t.p1,!0),r?[i,a]:[a,i]}(r,o,s,y),F=I[0][0],Q=I[0][1],C=I[1][0],w=I[1][1],U=0==(y?Q-F:w-C);if(U&&v&&JW.getLineWidth(u,r)&&(U=!1),U||(U=!(NW(F)&&NW(Q)&&NW(C)&&NW(w))),r.isBlank=U,U&&(y?Q=F:w=C),m&&!U&&(y?(F-=nY(F,Q)*m,Q+=nY(F,Q)*m):(C-=nY(C,w)*m,w+=nY(C,w)*m)),"waterfall"===u.type){if(!U){var A=u[r.dir].marker;g=A.line.width,x=A.color}}else g=JW.getLineWidth(u,r),x=r.mc||u.marker.color;function S(t){var e=MW.round(g/2%1,2);return 0===i.gap&&0===i.groupgap?MW.round(Math.round(t)-e,2):t}var L=ZW.opacity(x)<1||g>.01?S:function(t,e,n){return n&&t===e?t:Math.abs(t-e)>=2?S(t):t>e?Math.ceil(t):Math.floor(t)};t._context.staticPlot||(F=L(F,Q,y),Q=L(Q,F,y),C=L(C,w,!y),w=L(w,C,!y));var k,G=y?o.c2p:s.c2p;k=r.s0>0?r._sMax:r.s0<0?r._sMin:r.s1>0?r._sMax:r._sMin;var _,R,E=p||f?function(t,e){if(!t)return 0;var n,i=y?Math.abs(w-C):Math.abs(Q-F),a=y?Math.abs(Q-F):Math.abs(w-C),o=L(Math.abs(G(k,!0)-G(0,!0))),s=r.hasB?Math.min(i/2,a/2):Math.min(i/2,o);return n="%"===e?i*(Math.min(50,t)/100):t,L(Math.max(Math.min(n,s),0))}(h.cornerradiusvalue,h.cornerradiusform):0,T="M"+F+","+C+"V"+w+"H"+Q+"V"+C+"Z",M=0;if(E&&r.s){var N=0===eY(r.s0)||eY(r.s)===eY(r.s0)?r.s1:r.s0;if((M=L(r.hasB?0:Math.abs(G(k,!0)-G(N,!0))))<E){var D=nY(F,Q),X=nY(C,w),Z=D===-X?1:0;if(y)if(r.hasB)_="M"+(F+E*D)+","+C+"A "+E+","+E+" 0 0 "+Z+" "+F+","+(C+E*X)+"V"+(w-E*X)+"A "+E+","+E+" 0 0 "+Z+" "+(F+E*D)+","+w+"H"+(Q-E*D)+"A "+E+","+E+" 0 0 "+Z+" "+Q+","+(w-E*X)+"V"+(C+E*X)+"A "+E+","+E+" 0 0 "+Z+" "+(Q-E*D)+","+C+"Z";else{var V=(R=Math.abs(Q-F)+M)<E?E-Math.sqrt(R*(2*E-R)):0,H=M>0?Math.sqrt(M*(2*E-M)):0,W=D>0?Math.max:Math.min;_="M"+F+","+C+"V"+(w-V*X)+"H"+W(Q-(E-M)*D,F)+"A "+E+","+E+" 0 0 "+Z+" "+Q+","+(w-E*X-H)+"V"+(C+E*X+H)+"A "+E+","+E+" 0 0 "+Z+" "+W(Q-(E-M)*D,F)+","+(C+V*X)+"Z"}else if(r.hasB)_="M"+(F+E*D)+","+C+"A "+E+","+E+" 0 0 "+Z+" "+F+","+(C+E*X)+"V"+(w-E*X)+"A "+E+","+E+" 0 0 "+Z+" "+(F+E*D)+","+w+"H"+(Q-E*D)+"A "+E+","+E+" 0 0 "+Z+" "+Q+","+(w-E*X)+"V"+(C+E*X)+"A "+E+","+E+" 0 0 "+Z+" "+(Q-E*D)+","+C+"Z";else{var Y=(R=Math.abs(w-C)+M)<E?E-Math.sqrt(R*(2*E-R)):0,z=M>0?Math.sqrt(M*(2*E-M)):0,O=X>0?Math.max:Math.min;_="M"+(F+Y*D)+","+C+"V"+O(w-(E-M)*X,C)+"A "+E+","+E+" 0 0 "+Z+" "+(F+E*D-z)+","+w+"H"+(Q-E*D+z)+"A "+E+","+E+" 0 0 "+Z+" "+(Q-Y*D)+","+O(w-(E-M)*X,C)+"V"+C+"Z"}}else _=T}else _=T;var J=rY(DW.ensureSingle(B,"path"),l,i,a);if(J.style("vector-effect",c?"none":"non-scaling-stroke").attr("d",isNaN((Q-F)*(w-C))||U&&t._context.staticPlot?"M0,0Z":_).call(VW.setClipUrl,e.layerClipId,t),!l.uniformtext.mode&&b){var P=VW.makePointStyleFns(u);VW.singlePointStyle(r,J,u,P,t)}!function(t,e,n,r,i,a,o,s,l,c,u,h,d){var g,f=e.xaxis,p=e.yaxis,v=t._fullLayout;function m(e,n,r){return DW.ensureSingle(e,"text").text(n).attr({class:"bartext bartext-"+g,"text-anchor":"middle","data-notex":1}).call(VW.font,r).call(XW.convertToTspans,t)}var y=r[0].trace,b="h"===y.orientation,x=function(t,e,n,r,i){var a,o=e[0].trace,s=o.texttemplate;a=s?function(t,e,n,r,i){var a=e[0].trace,o=DW.castOption(a,n,"texttemplate");if(!o)return"";var s,l,c,u,h="histogram"===a.type,d="waterfall"===a.type,g="funnel"===a.type,f="h"===a.orientation;f?(s="y",l=i,c="x",u=r):(s="x",l=r,c="y",u=i);function p(t){return WW(l,l.c2l(t),!0).text}function v(t){return WW(u,u.c2l(t),!0).text}var m=e[n],y={};y.label=m.p,y.labelLabel=y[s+"Label"]=p(m.p);var b=DW.castOption(a,m.i,"text");(0===b||b)&&(y.text=b);y.value=m.s,y.valueLabel=y[c+"Label"]=v(m.s);var x={};KW(x,a,m.i),(h||void 0===x.x)&&(x.x=f?y.value:y.label);(h||void 0===x.y)&&(x.y=f?y.label:y.value);(h||void 0===x.xLabel)&&(x.xLabel=f?y.valueLabel:y.labelLabel);(h||void 0===x.yLabel)&&(x.yLabel=f?y.labelLabel:y.valueLabel);d&&(y.delta=+m.rawS||m.s,y.deltaLabel=v(y.delta),y.final=m.v,y.finalLabel=v(y.final),y.initial=y.final-y.delta,y.initialLabel=v(y.initial));g&&(y.value=m.s,y.valueLabel=v(y.value),y.percentInitial=m.begR,y.percentInitialLabel=DW.formatPercent(m.begR),y.percentPrevious=m.difR,y.percentPreviousLabel=DW.formatPercent(m.difR),y.percentTotal=m.sumR,y.percenTotalLabel=DW.formatPercent(m.sumR));var B=DW.castOption(a,m.i,"customdata");B&&(y.customdata=B);return DW.texttemplateString(o,y,t._d3locale,x,y,a._meta||{})}(t,e,n,r,i):o.textinfo?function(t,e,n,r){var i=t[0].trace,a="h"===i.orientation,o="waterfall"===i.type,s="funnel"===i.type;function l(t){return WW(a?r:n,t,!0).text}function c(t){return WW(a?n:r,+t,!0).text}var u,h=i.textinfo,d=t[e],g=h.split("+"),f=[],p=function(t){return-1!==g.indexOf(t)};p("label")&&f.push(l(t[e].p));p("text")&&(0===(u=DW.castOption(i,d.i,"text"))||u)&&f.push(u);if(o){var v=+d.rawS||d.s,m=d.v,y=m-v;p("initial")&&f.push(c(y)),p("delta")&&f.push(c(v)),p("final")&&f.push(c(m))}if(s){p("value")&&f.push(c(d.s));var b=0;p("percent initial")&&b++,p("percent previous")&&b++,p("percent total")&&b++;var x=b>1;p("percent initial")&&(u=DW.formatPercent(d.begR),x&&(u+=" of initial"),f.push(u)),p("percent previous")&&(u=DW.formatPercent(d.difR),x&&(u+=" of previous"),f.push(u)),p("percent total")&&(u=DW.formatPercent(d.sumR),x&&(u+=" of total"),f.push(u))}return f.join("<br>")}(e,n,r,i):JW.getValue(o.text,n);return JW.coerceString(PW,a)}(v,r,i,f,p);g=function(t,e){var n=JW.getValue(t.textposition,e);return JW.coerceEnumerated(jW,n)}(y,i);var B="stack"===h.mode||"relative"===h.mode,I=r[i],F=!B||I._outmost,Q=I.hasB,C=c&&c-u>qW;if(!x||"none"===g||(I.isBlank||a===o||s===l)&&("auto"===g||"inside"===g))return void n.select("text").remove();var w=v.font,U=OW.getBarColor(r[i],y),A=OW.getInsideTextFont(y,i,w,U),S=OW.getOutsideTextFont(y,i,w),L=y.insidetextanchor||"end",k=n.datum();b?"log"===f.type&&k.s0<=0&&(a=f.range[0]<f.range[1]?0:f._length):"log"===p.type&&k.s0<=0&&(s=p.range[0]<p.range[1]?p._length:0);var G,_,R,E,T,M=Math.abs(o-a),N=Math.abs(l-s),D=M-2*qW,X=N-2*qW;"outside"===g&&(F||I.hasB||(g="inside"));if("auto"===g)if(F){g="inside",G=m(n,x,T=DW.ensureUniformFontSize(t,A)),R=(_=VW.bBox(G.node())).width,E=_.height;var Z,V=R>0&&E>0;Z=C?Q?aY(D-2*c,X,R,E,b)||aY(D,X-2*c,R,E,b):b?aY(D-(c-u),X,R,E,b)||aY(D,X-2*(c-u),R,E,b):aY(D,X-(c-u),R,E,b)||aY(D-2*(c-u),X,R,E,b):aY(D,X,R,E,b),V&&Z?g="inside":(g="outside",G.remove(),G=null)}else g="inside";if(!G){var H=(G=m(n,x,T=DW.ensureUniformFontSize(t,"outside"===g?S:A))).attr("transform");if(G.attr("transform",""),R=(_=VW.bBox(G.node())).width,E=_.height,G.attr("transform",H),R<=0||E<=0)return void G.remove()}var W,Y=y.textangle;W="outside"===g?function(t,e,n,r,i,a){var o,s=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,u=i.width,h=i.height,d=Math.abs(e-t),g=Math.abs(r-n);o=s?g>2*qW?qW:0:d>2*qW?qW:0;var f=1;l&&(f=s?Math.min(1,g/h):Math.min(1,d/u));var p=oY(c),v=sY(i,p),m=(s?v.x:v.y)/2,y=(i.left+i.right)/2,b=(i.top+i.bottom)/2,x=(t+e)/2,B=(n+r)/2,I=0,F=0,Q=s?nY(e,t):nY(n,r);s?(x=e-Q*o,I=Q*m):(B=r+Q*o,F=-Q*m);return{textX:y,textY:b,targetX:x,targetY:B,anchorX:I,anchorY:F,scale:f,rotate:p}}(a,o,s,l,_,{isHorizontal:b,constrained:"both"===y.constraintext||"outside"===y.constraintext,angle:Y}):lY(a,o,s,l,_,{isHorizontal:b,constrained:"both"===y.constraintext||"inside"===y.constraintext,angle:Y,anchor:L,hasB:Q,r:c,overhead:u});W.fontSize=T.size,YW("histogram"===y.type?"bar":y.type,W,v),I.transform=W;var z=rY(G,v,h,d);DW.setTransormAndDisplay(z,W)}(t,e,B,n,d,F,Q,C,w,E,M,i,a),e.layerClipId&&VW.hideOutsideRangePoint(r,B.select("text"),o,s,u.xcalendar,u.ycalendar)}));var F=!1===u.cliponaxis;VW.setClipUrl(r,F?null:e.layerClipId,t)}));HW.getComponentMethod("errorbars","plot")(t,u,e,i)},toMoveInsideBar:lY},uY=uC,hY=hh,dY=Pu,gY=yf.fillText,fY=fW.getLineWidth,pY=iI.hoverLabelText,vY=Sc.BADNUM;function mY(t,e,n,r,i){var a,o,s,l,c,u,h,d=t.cd,g=d[0].trace,f=d[0].t,p="closest"===r,v="waterfall"===g.type,m=t.maxHoverDistance,y=t.maxSpikeDistance;"h"===g.orientation?(a=n,o=e,s="y",l="x",c=L,u=A):(a=e,o=n,s="x",l="y",u=L,c=A);var b=g[s+"period"],x=p||b;function B(t){return F(t,-1)}function I(t){return F(t,1)}function F(t,e){var n=t.w;return t[s]+e*n/2}function Q(t){return t[s+"End"]-t[s+"Start"]}var C=p?B:b?function(t){return t.p-Q(t)/2}:function(t){return Math.min(B(t),t.p-f.bardelta/2)},w=p?I:b?function(t){return t.p+Q(t)/2}:function(t){return Math.max(I(t),t.p+f.bardelta/2)};function U(t,e,n){return i.finiteRange&&(n=0),uY.inbox(t-a,e-a,n+Math.min(1,Math.abs(e-t)/h)-1)}function A(t){return U(C(t),w(t),m)}function S(t){var e=t[l];if(v){var n=Math.abs(t.rawS)||0;o>0?e+=n:o<0&&(e-=n)}return e}function L(t){var e=o,n=t.b,r=S(t);return uY.inbox(n-e,r-e,m+(r-e)/(r-n)-1)}var k=t[s+"a"],G=t[l+"a"];h=Math.abs(k.r2c(k.range[1])-k.r2c(k.range[0]));var _=uY.getDistanceFunction(r,c,u,(function(t){return(c(t)+u(t))/2}));if(uY.getClosest(d,_,t),!1!==t.index&&d[t.index].p!==vY){x||(C=function(t){return Math.min(B(t),t.p-f.bargroupwidth/2)},w=function(t){return Math.max(I(t),t.p+f.bargroupwidth/2)});var R=d[t.index],E=g.base?R.b+R.s:R.s;t[l+"0"]=t[l+"1"]=G.c2p(R[l],!0),t[l+"LabelVal"]=E;var T=f.extents[f.extents.round(R.p)];t[s+"0"]=k.c2p(p?C(R):T[0],!0),t[s+"1"]=k.c2p(p?w(R):T[1],!0);var M=void 0!==R.orig_p;return t[s+"LabelVal"]=M?R.orig_p:R.p,t.labelLabel=pY(k,t[s+"LabelVal"],g[s+"hoverformat"]),t.valueLabel=pY(G,t[l+"LabelVal"],g[l+"hoverformat"]),t.baseLabel=pY(G,R.b,g[l+"hoverformat"]),t.spikeDistance=(function(t){var e=o,n=t.b,r=S(t);return uY.inbox(n-e,r-e,y+(r-e)/(r-n)-1)}(R)+function(t){return U(B(t),I(t),y)}(R))/2,t[s+"Spike"]=k.c2p(R.p,!0),gY(R,g,t),t.hovertemplate=g.hovertemplate,t}}function yY(t,e){var n=e.mcc||t.marker.color,r=e.mlcc||t.marker.line.color,i=fY(t,e);return dY.opacity(n)?n:dY.opacity(r)&&i?r:void 0}var bY=function(t,e,n,r,i){var a=mY(t,e,n,r,i);if(a){var o=a.cd,s=o[0].trace,l=o[a.index];return a.color=yY(s,l),hY.getComponentMethod("errorbars","hoverInfo")(l,s,a),[a]}},xY=bY,BY=iI.hoverLabelText;function IY(t,e,n,r,i){var a=e.c2p(r?t.s0:t.p0,!0),o=e.c2p(r?t.s1:t.p1,!0),s=n.c2p(r?t.p0:t.s0,!0),l=n.c2p(r?t.p1:t.s1,!0);return i?[(a+o)/2,(s+l)/2]:r?[o,(s+l)/2]:[(a+o)/2,l]}var FY={attributes:aH,layoutAttributes:oH,supplyDefaults:function(t,e,n,r){function i(n,r){return bH.coerce(t,e,FH,n,r)}var a=i("x"),o=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var s=i("textposition");BH(t,e,r,i,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var l=i("orientation",o&&!a?"h":"v"),c="v"===l?"x":"y",u="v"===l?"y":"x",h=a&&o?Math.min(bH.minRowLength(a)&&bH.minRowLength(o)):bH.minRowLength(e[c]||[]);if(h){e._length=h,yH.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r),e[u]&&i("histfunc"),i("histnorm"),i("autobin"+c),IH(t,e,i,n,r),bH.coerceSelectionMarkerOpacity(e,i);var d=(e.marker.line||{}).color,g=yH.getComponentMethod("errorbars","supplyDefaults");g(t,e,d||xH.defaultLine,{axis:"y"}),g(t,e,d||xH.defaultLine,{axis:"x",inherit:"y"}),i("zorder")}else e.visible=!1},crossTraceDefaults:function(t,e){var n,r,i,a,o,s,l,c=e._histogramBinOpts={},u=[],h={},d=[];function g(t,e){return QH.coerce(n._input,n,n._module.attributes,t,e)}function f(t){return"v"===t.orientation?"x":"y"}function p(t,n,r){var i=t.uid+"__"+r;n||(n=i);var a=function(t,n){return CH.getFromTrace({_fullLayout:e},t,n).type}(t,r),o=t[r+"calendar"]||"",s=c[n],l=!0;s&&(a===s.axType&&o===s.calendar?(l=!1,s.traces.push(t),s.dirs.push(r)):(n=i,a!==s.axType&&QH.warn(["Attempted to group the bins of trace",t.index,"set on a","type:"+a,"axis","with bins on","type:"+s.axType,"axis."].join(" ")),o!==s.calendar&&QH.warn(["Attempted to group the bins of trace",t.index,"set with a",o,"calendar","with bins",s.calendar?"on a "+s.calendar+" calendar":"w/o a set calendar"].join(" ")))),l&&(c[n]={traces:[t],dirs:[r],axType:a,calendar:t[r+"calendar"]||""}),t["_"+r+"bingroup"]=n}for(o=0;o<t.length;o++)if(n=t[o],wH(n,"histogram")){if(u.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,"histogram"===n.type){var v=g("marker.cornerradius",e.barcornerradius);n.marker&&(n.marker.cornerradius=AH(v))}wH(n,"2dMap")||UH(n._input,n,e,g)}var m=e._alignmentOpts||{};for(o=0;o<u.length;o++){if(n=u[o],i="",!wH(n,"2dMap")){if(a=f(n),"group"===e.barmode&&n.alignmentgroup){var y=n[a+"axis"],b=LH(e,y)+n.orientation;(m[b]||{})[n.alignmentgroup]&&(i=b)}i||"overlay"===e.barmode||(i=LH(e,n.xaxis)+LH(e,n.yaxis)+f(n))}i?(h[i]||(h[i]=[]),h[i].push(n)):d.push(n)}for(i in h)if(1!==(r=h[i]).length){var x=!1;for(r.length&&(n=r[0],x=g("bingroup")),i=x||i,o=0;o<r.length;o++){var B=(n=r[o])._input.bingroup;B&&B!==i&&QH.warn(["Trace",n.index,"must match","within bingroup",i+".","Ignoring its bingroup:",B,"setting."].join(" ")),n.bingroup=i,p(n,i,f(n))}}else d.push(r[0]);for(o=0;o<d.length;o++){n=d[o];var I=g("bingroup");if(wH(n,"2dMap"))for(l=0;l<2;l++){var F=g((a=GH[l])+"bingroup",I?I+"__"+a:null);p(n,F,a)}else p(n,I,f(n))}for(i in c){var Q=c[i];for(r=Q.traces,s=0;s<kH.length;s++){var C,w,U=kH[s],A=U.name;if("nbins"!==A||!Q.sizeFound){for(o=0;o<r.length;o++){if(n=r[o],a=Q.dirs[o],C=U.aStr[a],void 0!==SH(n._input,C).get()){Q[A]=g(C),Q[A+"Found"]=!0;break}(w=(n._autoBin||{})[a]||{})[A]&&SH(n,C).set(w[A])}if("start"===A||"end"===A)for(;o<r.length;o++)(n=r[o])["_"+a+"bingroup"]&&g(C,(w=(n._autoBin||{})[a]||{})[A]);"nbins"!==A||Q.sizeFound||Q.nbinsFound||(n=r[0],Q[A]=g(C))}}}},supplyLayoutDefaults:function(t,e,n){function r(n,r){return EH.coerce(t,e,TH,n,r)}for(var i=!1,a=!1,o=!1,s={},l=r("barmode"),c=0;c<n.length;c++){var u=n[c];if(_H.traceIs(u,"bar")&&u.visible){if(i=!0,"group"===l){var h=u.xaxis+u.yaxis;s[h]&&(o=!0),s[h]=!0}if(u.visible&&"histogram"===u.type)"category"!==RH.getFromId({_fullLayout:e},u["v"===u.orientation?"xaxis":"yaxis"]).type&&(a=!0)}}if(i){"overlay"!==l&&r("barnorm"),r("bargap",a&&!o?0:.2),r("bargroupgap");var d=r("barcornerradius");e.barcornerradius=MH(d)}else delete e.barmode},calc:cW.calc,crossTraceCalc:MR.crossTraceCalc,plot:cY.plot,layerName:"barlayer",style:TW.style,styleOnSelect:TW.styleOnSelect,colorbar:cE,hoverPoints:function(t,e,n,r,i){var a=xY(t,e,n,r,i);if(a){var o=(t=a[0]).cd[t.index],s=t.cd[0].trace;if(!s.cumulative.enabled){var l="h"===s.orientation?"y":"x";t[l+"Label"]=BY(t[l+"a"],[o.ph0,o.ph1],s[l+"hoverformat"])}return a}},selectPoints:function(t,e){var n,r=t.cd,i=t.xaxis,a=t.yaxis,o=r[0].trace,s="funnel"===o.type,l="h"===o.orientation,c=[];if(!1===e)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var u=r[n],h="ct"in u?u.ct:IY(u,i,a,l,s);e.contains(h,!1,n,t)?(c.push({pointNumber:n,x:i.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0}return c},eventData:function(t,e,n,r,i){if(t.x="xVal"in e?e.xVal:e.x,t.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(t.z=e.zLabelVal),e.xa&&(t.xaxis=e.xa),e.ya&&(t.yaxis=e.ya),!(n.cumulative||{}).enabled){var a,o=Array.isArray(i)?r[0].pts[i[0]][i[1]]:r[i].pts;if(t.pointNumbers=o,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex,n._indexToPoints){a=[];for(var s=0;s<o.length;s++)a=a.concat(n._indexToPoints[o[s]])}else a=o;t.pointIndices=a}return t},moduleType:"trace",name:"histogram",basePlotModule:LE,categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}},QY=FY,CY=t({__proto__:null,default:ro(QY)},[QY]);function wY(t,e,n){var r=e,i=function(t,e){return atob(t)}(t),a=i.indexOf("\n",10)+1,o=i.substring(a)+"//# sourceMappingURL="+r,s=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(s)}var UY,AY,SY,LY=(UY="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCXZhciBkaXN0cmlidXRpb25zID0ge2V4cG9ydHM6IHt9fTsKCgkoZnVuY3Rpb24gKG1vZHVsZSkgewoKCSAgLy8gQSBudW1iZXIgb2YgbG9nIHByb2JhYmlsaXR5IGRlbnNpdHkgZnVuY3Rpb25zIChQREYpLiBOYW1pbmcgYW5kIHBhcmFtZXRlcml6YXRpb24KCSAgLy8gc2hvdWxkIG1hdGNoIFIncywgZXhjZXB0IGZvciB0aGF0IGFsbCBmdW5jdGlvbnMgcmVzaWRlIGluIGFuIGxkIG9iamVjdCAoCgkgIC8vIGFzIGluICJsb2cgZGVuc2l0eSIpLCBzbyB0byBnZXQgYSBub3JtYWwgbG9nIGRlbnNpdHkgeW91IHdvdWxkIHdyaXRlCgkgIC8vIGxkLm5vcm0oLi4uKS4KCSAgLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0CgkgIC8vIChodHRwczovL2dpdGh1Yi5jb20vanN0YXQvKSB3aGljaCBpbmNsdWRlcyBQREYgZm9yIG1hbnkgY29tbW9uIHByb2JhYmlsaXR5CgkgIC8vIGRpc3RyaWJ1dGlvbnMuIFdoYXQgSSBoYXZlIGRvbmUgaXMgb25seSB0byBjb252ZXJ0IHRoZXNlIHRvIGxvZyBQREZzLgoKCSAgLyoKCSAgT3JpZ2luYWwgd29yayBDb3B5cmlnaHQgKGMpIDIwMTMgalN0YXQKCSAgTW9kaWZpZWQgd29yayBDb3B5cmlnaHQgKGMpIDIwMTUgUmFzbXVzIELDpcOldGggCgkgIAlQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CgkgIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsCgkgIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKCSAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAoJICBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKCSAgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCSAgCVRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCgkgIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoJICAJVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKCSAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCgkgIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQoJICBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCgkgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCgkgIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KCSAgVEhFIFNPRlRXQVJFLgoJICAJKi8KCgkgIC8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOgoJICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzCgkgIC8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLAoJICAvLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC4KCSAgLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsCgkgIC8vIG9iamVjdCBsZCAuCgkgIChmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewoJICAgIGlmIChtb2R1bGUuZXhwb3J0cykgewoJICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CgkgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cywKCSAgICAgIC8vIGxpa2UgTm9kZS4KCSAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJICAgIH0gZWxzZSB7CgkgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQoJICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTsKCSAgICB9CgkgIH0pKGNvbW1vbmpzR2xvYmFsLCBmdW5jdGlvbiAoKSB7CgkgICAgLy8gT2JqZWN0IHRvIGhvbGQgdGhlIGZ1bmN0aW9ucyB0byBiZSBleHBvcnRlZC4KCSAgICB2YXIgbGQgPSB7fTsKCgkgICAgLy8vLy8vLy8vLyBIZWxwZXIgZnVuY3Rpb25zIC8vLy8vLy8vLy8KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCSAgICB2YXIgbGdhbW1hID0gZnVuY3Rpb24gKHgpIHsKCSAgICAgIHZhciBqID0gMDsKCSAgICAgIHZhciBjb2YgPSBbNzYuMTgwMDkxNzI5NDcxNDYsIC04Ni41MDUzMjAzMjk0MTY3NywgMjQuMDE0MDk4MjQwODMwOTEsIC0xLjIzMTczOTU3MjQ1MDE1NSwgMC4xMjA4NjUwOTczODY2MTc5ZS0yLCAtMC41Mzk1MjM5Mzg0OTUzZS01XTsKCSAgICAgIHZhciBzZXIgPSAxLjAwMDAwMDAwMDE5MDAxNTsKCSAgICAgIHZhciB4eCwgeSwgdG1wOwoJICAgICAgdG1wID0gKHkgPSB4eCA9IHgpICsgNS41OwoJICAgICAgdG1wIC09ICh4eCArIDAuNSkgKiBsb2codG1wKTsKCSAgICAgIGZvciAoOyBqIDwgNjsgaisrKSBzZXIgKz0gY29mW2pdIC8gKyt5OwoJICAgICAgcmV0dXJuIGxvZygyLjUwNjYyODI3NDYzMTAwMDUgKiBzZXIgLyB4eCkgLSB0bXA7CgkgICAgfTsKCSAgICBsZC5sZ2FtbWEgPSBsZ2FtbWE7CgkgICAgdmFyIGxmYWN0b3JpYWwgPSBmdW5jdGlvbiAobikgewoJICAgICAgcmV0dXJuIG4gPCAwID8gTmFOIDogbGdhbW1hKG4gKyAxKTsKCSAgICB9OwoJICAgIGxkLmxmYWN0b3JpYWwgPSBsZmFjdG9yaWFsOwoJICAgIHZhciBsY2hvb3NlID0gZnVuY3Rpb24gKG4sIGspIHsKCSAgICAgIHJldHVybiBsZmFjdG9yaWFsKG4pIC0gbGZhY3RvcmlhbChrKSAtIGxmYWN0b3JpYWwobiAtIGspOwoJICAgIH07CgkgICAgbGQubGNob29zZSA9IGxjaG9vc2U7CgkgICAgdmFyIGxiZXRhID0gZnVuY3Rpb24gKGEsIGIpIHsKCSAgICAgIHJldHVybiBsZ2FtbWEoYSkgKyBsZ2FtbWEoYikgLSBsZ2FtbWEoYSArIGIpOwoJICAgIH07CgkgICAgbGQubGJldGEgPSBsYmV0YTsKCSAgICB2YXIgbG9nID0gTWF0aC5sb2c7CgkgICAgdmFyIGV4cCA9IE1hdGguZXhwOwoJICAgIHZhciBhYnMgPSBNYXRoLmFiczsKCSAgICB2YXIgcG93ID0gTWF0aC5wb3c7CgkgICAgdmFyIHNxcnQgPSBNYXRoLnNxcnQ7CgkgICAgdmFyIHBpID0gTWF0aC5QSTsKCgkgICAgLy8vLy8vLy8vLyBDb250aW5vdXMgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIGxkLmJldGEgPSBmdW5jdGlvbiAoeCwgc2hhcGUxLCBzaGFwZTIpIHsKCSAgICAgIGlmICh4ID4gMSB8fCB4IDwgMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoJICAgICAgaWYgKHNoYXBlMSA9PT0gMSAmJiBzaGFwZTIgPT09IDEpIHsKCSAgICAgICAgcmV0dXJuIDA7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gKHNoYXBlMSAtIDEpICogbG9nKHgpICsgKHNoYXBlMiAtIDEpICogbG9nKDEgLSB4KSAtIGxiZXRhKHNoYXBlMSwgc2hhcGUyKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIGxkLmNhdWNoeSA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKCSAgICAgIHJldHVybiBsb2coc2NhbGUpIC0gbG9nKHBvdyh4IC0gbG9jYXRpb24sIDIpICsgcG93KHNjYWxlLCAyKSkgLSBsb2cocGkpOwoJICAgIH07CgkgICAgbGQubm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCkgewoJICAgICAgcmV0dXJuIC0wLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZCkgLSBwb3coeCAtIG1lYW4sIDIpIC8gKDIgKiBzZCAqIHNkKTsKCSAgICB9OwoKCSAgICAvLyBBIGJpdmFyaWF0ZSBOb3JtYWwgZGlzdHJpYnV0aW9uIHBhcmFtZXRlcml6ZWQgYnkgYXJyYXlzIG9mIHR3byBtZWFucyBhbmQgU0RzLCBhbmQgCgkgICAgLy8gdGhlIGNvcnJlbGF0aW9uLgoJICAgIGxkLmJpdmFybm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCwgY29ycikgewoJICAgICAgdmFyIHogPSBwb3coeFswXSAtIG1lYW5bMF0sIDIpIC8gcG93KHNkWzBdLCAyKSArIHBvdyh4WzFdIC0gbWVhblsxXSwgMikgLyBwb3coc2RbMV0sIDIpIC0gMiAqIGNvcnIgKiAoeFswXSAtIG1lYW5bMF0pICogKHhbMV0gLSBtZWFuWzFdKSAvIChzZFswXSAqIHNkWzFdKTsKCSAgICAgIHZhciBub3JtYWxpemluZ19mYWN0b3IgPSAtKGxvZygyKSArIGxvZyhwaSkgKyBsb2coc2RbMF0pICsgbG9nKHNkWzFdKSArIDAuNSAqIGxvZygxIC0gcG93KGNvcnIsIDIpKSk7CgkgICAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSkpOwoJICAgICAgcmV0dXJuIGJpdmFyX2xvZ19kZW5zOwoJICAgIH07CgkgICAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKCSAgICAgIHJldHVybiAtYWJzKHggLSBsb2NhdGlvbikgLyBzY2FsZSAtIGxvZygyICogc2NhbGUpOwoJICAgIH07CgkgICAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7CgkgICAgbGQuZ2FtbWEgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHJhdGUpIHsKCSAgICAgIHZhciBzY2FsZSA9IDEgLyByYXRlOwoJICAgICAgaWYgKHggPCAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICBpZiAoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgewoJICAgICAgICByZXR1cm4gLWxvZyhzY2FsZSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gKHNoYXBlIC0gMSkgKiBsb2coeCkgLSB4IC8gc2NhbGUgLSBsZ2FtbWEoc2hhcGUpIC0gc2hhcGUgKiBsb2coc2NhbGUpOwoJICAgICAgfQoJICAgIH07CgkgICAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHNjYWxlKSB7CgkgICAgICBpZiAoeCA8PSAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gLShzaGFwZSArIDEpICogbG9nKHgpIC0gc2NhbGUgLyB4IC0gbGdhbW1hKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKTsKCSAgICB9OwoJICAgIGxkLmxub3JtID0gZnVuY3Rpb24gKHgsIG1lYW5sb2csIHNkbG9nKSB7CgkgICAgICBpZiAoeCA8PSAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gLWxvZyh4KSAtIDAuNSAqIGxvZygyICogcGkpIC0gbG9nKHNkbG9nKSAtIHBvdyhsb2coeCkgLSBtZWFubG9nLCAyKSAvICgyICogc2Rsb2cgKiBzZGxvZyk7CgkgICAgfTsKCSAgICBsZC5wYXJldG8gPSBmdW5jdGlvbiAoeCwgc2NhbGUsIHNoYXBlKSB7CgkgICAgICBpZiAoeCA8IHNjYWxlKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gbG9nKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKSAtIChzaGFwZSArIDEpICogbG9nKHgpOwoJICAgIH07CgkgICAgbGQudCA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUsIGRmKSB7CgkgICAgICBkZiA9IGRmID4gMWUxMDAgPyAxZTEwMCA6IGRmOwoJICAgICAgcmV0dXJuIGxnYW1tYSgoZGYgKyAxKSAvIDIpIC0gbGdhbW1hKGRmIC8gMikgLSBsb2coc3FydChwaSAqIGRmKSAqIHNjYWxlKSArIGxvZyhwb3coMSArIDEgLyBkZiAqIHBvdygoeCAtIGxvY2F0aW9uKSAvIHNjYWxlLCAyKSwgLShkZiArIDEpIC8gMikpOwoJICAgIH07CgoJICAgIC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGUKCSAgICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSB3ZWlidWxsIGRpc3RyaWJ1dGlvbjogCgkgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmMKCSAgICBsZC53ZWlidWxsID0gZnVuY3Rpb24gKHgsIHNoYXBlLCBzY2FsZSkgewoJICAgICAgaWYgKHggPCAwKSByZXR1cm4gLUluZmluaXR5OwoJICAgICAgaWYgKHggPT09IDAgJiYgc2hhcGUgPCAxKSByZXR1cm4gSW5maW5pdHk7CgkgICAgICB2YXIgdG1wMSA9IHBvdyh4IC8gc2NhbGUsIHNoYXBlIC0gMSk7CgkgICAgICB2YXIgdG1wMiA9IHRtcDEgKiAoeCAvIHNjYWxlKTsKCSAgICAgIHJldHVybiAtdG1wMiArIGxvZyhzaGFwZSAqIHRtcDEgLyBzY2FsZSk7CgkgICAgfTsKCgkgICAgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZQoJICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIGxvZ2lzdGljIGRpc3RyaWJ1dGlvbjogCgkgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2Rsb2dpcy5jCgkgICAgbGQubG9naXMgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CgkgICAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpOwoJICAgICAgdmFyIGUgPSBleHAoLXgpOwoJICAgICAgdmFyIGYgPSAxLjAgKyBlOwoJICAgICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7CgkgICAgfTsKCSAgICBsZC5kaXJpY2hsZXQgPSBmdW5jdGlvbiAoeCwgYWxwaGEpIHsKCSAgICAgIHZhciBzdW1fYWxwaGEgPSAwOwoJICAgICAgdmFyIHN1bV9sZ2FtbWFfYWxwaGEgPSAwOwoJICAgICAgdmFyIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCA9IDA7CgkgICAgICB2YXIgbiA9IGFscGhhLmxlbmd0aDsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7CgkgICAgICAgIHN1bV9hbHBoYSArPSBhbHBoYVtpXTsKCSAgICAgICAgc3VtX2xnYW1tYV9hbHBoYSArPSBsZ2FtbWEoYWxwaGFbaV0pOwoJICAgICAgICBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggKz0gKGFscGhhW2ldIC0gMSkgKiBsb2coeFtpXSk7CgkgICAgICB9CgkgICAgICByZXR1cm4gbGdhbW1hKHN1bV9hbHBoYSkgLSBzdW1fbGdhbW1hX2FscGhhICsgc3VtX2FscGhhX3N1Yl8xX2xvZ194OwoJICAgIH07CgkgICAgbGQuZXhwID0gZnVuY3Rpb24gKHgsIHJhdGUpIHsKCSAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhyYXRlKSAtIHJhdGUgKiB4OwoJICAgIH07CgkgICAgbGQudW5pZiA9IGZ1bmN0aW9uICh4LCBtaW4sIG1heCkgewoJICAgICAgcmV0dXJuIHggPCBtaW4gfHwgeCA+IG1heCA/IC1JbmZpbml0eSA6IGxvZygxIC8gKG1heCAtIG1pbikpOwoJICAgIH07CgoJICAgIC8vLy8vLy8vLy8gRGlzY3JldGUgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgbGQuYmVybiA9IGZ1bmN0aW9uICh4LCBwcm9iKSB7CgkgICAgICByZXR1cm4gISh4ID09PSAwIHx8IHggPT09IDEpID8gLUluZmluaXR5IDogbG9nKHggKiBwcm9iICsgKDEgLSB4KSAqICgxIC0gcHJvYikpOwoJICAgIH07CgkgICAgbGQuY2F0ID0gZnVuY3Rpb24gKHgsIHByb2JzKSB7CgkgICAgICBpZiAoeCA8IDEgfHwgeCA+IHByb2JzLmxlbmd0aCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGxvZyhwcm9ic1t4IC0gMV0pOwoJICAgICAgfQoJICAgIH07CgkgICAgbGQuYmlub20gPSBmdW5jdGlvbiAoeCwgc2l6ZSwgcHJvYikgewoJICAgICAgaWYgKHggPiBzaXplIHx8IHggPCAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICBpZiAocHJvYiA9PT0gMCB8fCBwcm9iID09PSAxKSB7CgkgICAgICAgIHJldHVybiBzaXplICogcHJvYiA9PT0geCA/IDAgOiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTsKCSAgICB9OwoJICAgIGxkLm5iaW5vbSA9IGZ1bmN0aW9uICh4LCBzaXplLCBwcm9iKSB7CgkgICAgICBpZiAoeCA8IDApIHsKCSAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIH0KCSAgICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpOwoJICAgIH07CgkgICAgbGQuaHlwZXIgPSBmdW5jdGlvbiAoeCwgbSwgbiwgaykgewoJICAgICAgaWYgKHggPCAwIHx8IHggPiBrKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2UobiwgayAtIHgpIC0gbGNob29zZShtICsgbiwgayk7CgkgICAgICB9CgkgICAgfTsKCSAgICBsZC5wb2lzID0gZnVuY3Rpb24gKHgsIGxhbWJkYSkgewoJICAgICAgcmV0dXJuIHggPCAwID8gLUluZmluaXR5IDogbG9nKGxhbWJkYSkgKiB4IC0gbGFtYmRhIC0gbGZhY3RvcmlhbCh4KTsKCSAgICB9OwoJICAgIHJldHVybiBsZDsKCSAgfSk7Cgl9KShkaXN0cmlidXRpb25zKTsKCXZhciBkaXN0cmlidXRpb25zRXhwb3J0cyA9IGRpc3RyaWJ1dGlvbnMuZXhwb3J0czsKCgl2YXIgbWNtYyA9IHtleHBvcnRzOiB7fX07CgoJKGZ1bmN0aW9uIChtb2R1bGUpIHsKCgkgIC8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOgoJICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzCgkgIC8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLAoJICAvLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC4KCSAgLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsCgkgIC8vIG9iamVjdCBtY21jIC4KCSAgKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7CgkgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CgkgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXQKCSAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLAoJICAgICAgLy8gbGlrZSBOb2RlLgoJICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7CgkgICAgfSBlbHNlIHsKCSAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCgkgICAgICByb290Lm1jbWMgPSBmYWN0b3J5KCk7CgkgICAgfQoJICB9KShjb21tb25qc0dsb2JhbCwgZnVuY3Rpb24gKCkgewoJICAgIC8vLyBUaGUgYWN0dWFsIG1vZHVsZSBjb2RlIHN0YXJ0cyBoZXJlIC8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgCgoJICAgIC8vLy8vLy8vLy8gSGVscGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqLwoJICAgIHZhciBydW5pZiA9IGZ1bmN0aW9uIChtaW4sIG1heCkgewoJICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjsKCSAgICB9OwoKCSAgICAvKiogUmV0dXJucyBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKi8KCSAgICB2YXIgcnVuaWZfZGlzY3JldGUgPSBmdW5jdGlvbiAobWluLCBtYXgpIHsKCSAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluOwoJICAgIH07CgoJICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkCgkgICAgICogIGJ5IG1lYW4gYW5kIHNkLiAKCSAgICAgKiAgQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qc3RhdC9qc3RhdC9ibG9iL21hc3Rlci9zcmMvc3BlY2lhbC5qcyAqLwoJICAgIHZhciBybm9ybSA9IGZ1bmN0aW9uIChtZWFuLCBzZCkgewoJICAgICAgdmFyIHUsIHYsIHgsIHksIHE7CgkgICAgICBkbyB7CgkgICAgICAgIHUgPSBNYXRoLnJhbmRvbSgpOwoJICAgICAgICB2ID0gMS43MTU2ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpOwoJICAgICAgICB4ID0gdSAtIDAuNDQ5ODcxOwoJICAgICAgICB5ID0gTWF0aC5hYnModikgKyAwLjM4NjU5NTsKCSAgICAgICAgcSA9IHggKiB4ICsgeSAqICgwLjE5NjAwICogeSAtIDAuMjU0NzIgKiB4KTsKCSAgICAgIH0gd2hpbGUgKHEgPiAwLjI3NTk3ICYmIChxID4gMC4yNzg0NiB8fCB2ICogdiA+IC00ICogTWF0aC5sb2codSkgKiB1ICogdSkpOwoJICAgICAgcmV0dXJuIHYgLyB1ICogc2QgKyBtZWFuOwoJICAgIH07CgoJICAgIC8qKiBSZXR1cm5zIGEgZGVlcCBjbG9uZSBvZiBzcmMsIHNvcnQgb2YuLi4gSXQgb25seSBjb3BpZXMgYSBsaW1pdGVkCgkgICAgICogbnVtYmVyIG9mIHR5cGVzIGFuZCwgZm9yIGV4YW1wbGUsIGZ1bmN0aW9uIGFyZSBub3QgY29waWVkLiAKCSAgICAgKiBGcm9tIGh0dHA6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1jbG9uZQoJICAgICAqLwoJICAgIHZhciBkZWVwX2Nsb25lID0gZnVuY3Rpb24gKHNyYykgewoJICAgICAgZnVuY3Rpb24gbWl4aW4oZGVzdCwgc291cmNlLCBjb3B5RnVuYykgewoJICAgICAgICB2YXIgbmFtZSwKCSAgICAgICAgICBzLAoJICAgICAgICAgIGVtcHR5ID0ge307CgkgICAgICAgIGZvciAobmFtZSBpbiBzb3VyY2UpIHsKCSAgICAgICAgICAvLyB0aGUgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpIGNvbmRpdGlvbiBhdm9pZHMgY29weWluZyBwcm9wZXJ0aWVzIGluICJzb3VyY2UiCgkgICAgICAgICAgLy8gaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZS4JIEZvciBleGFtcGxlLCBpZiBkZXN0IGhhcyBhIGN1c3RvbSB0b1N0cmluZygpIG1ldGhvZCwKCSAgICAgICAgICAvLyBkb24ndCBvdmVyd3JpdGUgaXQgd2l0aCB0aGUgdG9TdHJpbmcoKSBtZXRob2QgdGhhdCBzb3VyY2UgaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZQoJICAgICAgICAgIHMgPSBzb3VyY2VbbmFtZV07CgkgICAgICAgICAgaWYgKCEobmFtZSBpbiBkZXN0KSB8fCBkZXN0W25hbWVdICE9PSBzICYmICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSkgewoJICAgICAgICAgICAgZGVzdFtuYW1lXSA9IGNvcHlGdW5jID8gY29weUZ1bmMocykgOiBzOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gZGVzdDsKCSAgICAgIH0KCSAgICAgIGlmICghc3JjIHx8IHR5cGVvZiBzcmMgIT0gIm9iamVjdCIgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNyYykgPT09ICJbb2JqZWN0IEZ1bmN0aW9uXSIpIHsKCSAgICAgICAgLy8gbnVsbCwgdW5kZWZpbmVkLCBhbnkgbm9uLW9iamVjdCwgb3IgZnVuY3Rpb24KCSAgICAgICAgcmV0dXJuIHNyYzsgLy8gYW55dGhpbmcKCSAgICAgIH0KCSAgICAgIGlmIChzcmMubm9kZVR5cGUgJiYgImNsb25lTm9kZSIgaW4gc3JjKSB7CgkgICAgICAgIC8vIERPTSBOb2RlCgkgICAgICAgIHJldHVybiBzcmMuY2xvbmVOb2RlKHRydWUpOyAvLyBOb2RlCgkgICAgICB9CgkgICAgICBpZiAoc3JjIGluc3RhbmNlb2YgRGF0ZSkgewoJICAgICAgICAvLyBEYXRlCgkgICAgICAgIHJldHVybiBuZXcgRGF0ZShzcmMuZ2V0VGltZSgpKTsgLy8gRGF0ZQoJICAgICAgfQoJICAgICAgaWYgKHNyYyBpbnN0YW5jZW9mIFJlZ0V4cCkgewoJICAgICAgICAvLyBSZWdFeHAKCSAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc3JjKTsgLy8gUmVnRXhwCgkgICAgICB9CgkgICAgICB2YXIgciwgaSwgbDsKCSAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBBcnJheSkgewoJICAgICAgICAvLyBhcnJheQoJICAgICAgICByID0gW107CgkgICAgICAgIGZvciAoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKSB7CgkgICAgICAgICAgaWYgKGkgaW4gc3JjKSB7CgkgICAgICAgICAgICByLnB1c2goZGVlcF9jbG9uZShzcmNbaV0pKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIC8vIGdlbmVyaWMgb2JqZWN0cwoJICAgICAgICByID0gc3JjLmNvbnN0cnVjdG9yID8gbmV3IHNyYy5jb25zdHJ1Y3RvcigpIDoge307CgkgICAgICB9CgkgICAgICByZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTsKCSAgICB9OwoKCSAgICAvKiogU3BlY2lhbGl6ZWQgY2xvbmUgZnVuY3Rpb24gdGhhdCBvbmx5IGNsb25lcyBzY2FsYXJzIGFuZCBuZXN0ZWQgYXJyYXlzIHdoZXJlCgkgICAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvbgoJICAgICAqIGlzIG1lYW50IGFzIGEgZmFzdCB3YXkgb2YgY2xvbmluZyBwYXJhbWV0ZXIgZHJhd3Mgd2l0aGluIHRoZSBtY21jIHNhbXBsaW5nCgkgICAgICogbG9vcC4KCSAgICAgKi8KCSAgICB2YXIgY2xvbmVfcGFyYW1fZHJhdyA9IGZ1bmN0aW9uICh4KSB7CgkgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSkgewoJICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4WzBdKSkgewoJICAgICAgICAgIC8vIHggaXMgYW4gYXJyYXkgb2YgYXJyYXlzIHNvIHdlIG5lZWQgdG8gY2xvbmUgaXQgcmVjdXJzaXZlbHkKCSAgICAgICAgICB2YXIgeF9jb3B5ID0gW107CgkgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHhfY29weS5wdXNoKGNsb25lX3BhcmFtX2RyYXcoeFtpXSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgICByZXR1cm4geF9jb3B5OwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgYXJyYXlzIG9mIHNjYWxhcnMKCSAgICAgICAgICByZXR1cm4geC5zbGljZSgwKTsKCSAgICAgICAgfQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXIKCSAgICAgICAgcmV0dXJuIHg7CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYSBudW1iZXIuCgkgICAgICovCgkgICAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uIChvYmplY3QpIHsKCSAgICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09ICJudW1iZXIiIHx8IHR5cGVvZiBvYmplY3QgPT0gIm9iamVjdCIgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBOdW1iZXI7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYSAocG9zc2libHkgbXVsdGlkaW1lbnNpb25hbC9uZXN0ZWQpIGFycmF5LgoJICAgICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLAoJICAgICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LgoJICAgICAqIEBwYXJhbSBpbml0IC0gQSB2YWx1ZSBvciBhIGZ1bmN0aW9uIHVzZWQgdG8gZmlsbCBpbiB0aGUgZWFjaCBlbGVtZW50IGluCgkgICAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIAoJICAgICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0bwoJICAgICAqICAgZmlsbCBpbiBlYWNoIGVsZW1lbnQuCgkgICAgICogQGV4YW1wbGUgCgkgICAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXQoJICAgICAqIGNyZWF0ZV9hcnJheShbMiwzXSwgMSkKCSAgICAgKi8KCSAgICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24gKGRpbSwgaW5pdCkgewoJICAgICAgdmFyIGFyciA9IG5ldyBBcnJheShkaW1bMF0pOwoJICAgICAgdmFyIGk7CgkgICAgICBpZiAoZGltLmxlbmd0aCA9PSAxKSB7CgkgICAgICAgIC8vIEZpbGwgaXQgdXAgd2l0aCBpbml0CgkgICAgICAgIGlmICh0eXBlb2YgaW5pdCA9PT0gImZ1bmN0aW9uIikgewoJICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgICAgYXJyW2ldID0gaW5pdCgpOwoJICAgICAgICAgIH0KCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIGFycltpXSA9IGluaXQ7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKGRpbS5sZW5ndGggPiAxKSB7CgkgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgIGFycltpXSA9IGNyZWF0ZV9hcnJheShkaW0uc2xpY2UoMSksIGluaXQpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgewoJICAgICAgICB0aHJvdyAiY3JlYXRlX2FycmF5IGNhbid0IGNyZWF0ZSBhIGRpbWVuc2lvbmxlc3MgYXJyYXkiOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGFycjsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciAKCSAgICAgKiBleGFtcGxlLCBhcnJheV9kaW0oIFtbMSwgMl0sIFsxLCAyXV0gKSBzaG91bGQgcmV0dXJuIFsyLCAyXQoJICAgICAqIEFzc3VtZXMgdGhhdCBhbGwgYXJyYXlzIGluc2lkZSBhbm90aGVyIGFycmF5IGFyZSBvZiB0aGUgc2FtZSBsZW5ndGguCgkgICAgICogQGV4YW1wbGUKCSAgICAgKiAvLyBTaG91bGQgcmV0dXJuIFs0LCAyLCAxXQoJICAgICAqIGFycmF5X2RpbShjcmVhdGVfYXJyYXkoWzQsIDIsIDFdLCAwKSkKCSAgICAgKi8KCSAgICB2YXIgYXJyYXlfZGltID0gZnVuY3Rpb24gKGEpIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGFbMF0pKSB7CgkgICAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIFthLmxlbmd0aF07CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsIGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50cwoJICAgICAqIGFzIGp1ZGdlZCBieSB0aGUgIj09IiBvcGVyYXRvci4gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgoJICAgICAqIEFkYXB0ZWQgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNDg1Mzk3NC8xMDAxODQ4CgkgICAgICovCgkgICAgdmFyIGFycmF5X2VxdWFsID0gZnVuY3Rpb24gKGExLCBhMikgewoJICAgICAgaWYgKGExLmxlbmd0aCAhPSBhMi5sZW5ndGgpIHJldHVybiBmYWxzZTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBuZXN0ZWQgYXJyYXlzCgkgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGExW2ldKSAmJiBBcnJheS5pc0FycmF5KGEyW2ldKSkgewoJICAgICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5cwoJICAgICAgICAgIGlmICghYXJyYXlfZXF1YWwoYTFbaV0sIGEyW2ldKSkgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9IGVsc2UgaWYgKGExW2ldICE9IGEyW2ldKSB7CgkgICAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9CgkgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgICByZXR1cm4gdHJ1ZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUcmF2ZXJzZXMgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsICJsZWFmIG5vZGVzIiwgCgkgICAgICogdGhhdCBpcywgdmFsdWVzIHRoYXQgYXJlIG5vdCBhcnJheXMuIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHNhbWUgc2l6ZSBhcwoJICAgICAqIGEuCgkgICAgICovCgkgICAgdmFyIG5lc3RlZF9hcnJheV9hcHBseSA9IGZ1bmN0aW9uIChhLCBmdW4pIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoYS5sZW5ndGgpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGZ1bihhKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKiogUmFuZG9taXppbmcgdGhlIGFycmF5IGVsZW1lbnQgb3JkZXIgaW4tcGxhY2UuIFVzaW5nIER1cnN0ZW5mZWxkCgkgICAgICogc2h1ZmZsZSBhbGdvcml0aG0uIEFkYXB0ZWQgZnJvbSBoZXJlOiAKCSAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4CgkgICAgICovCgkgICAgZnVuY3Rpb24gc2h1ZmZsZV9hcnJheShhcnJheSkgewoJICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKCSAgICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTsKCSAgICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTsKCSAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTsKCSAgICAgICAgYXJyYXlbal0gPSB0ZW1wOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGFycmF5OwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5CgkgICAgICogbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCAibGVhZiBub2RlcyIgYW5kIHJldHVybnMgYW4gYXJyYXkgCgkgICAgICogb2YgdGhlIHNhbWUgc2l6ZSBhcyBhLiBUaGUgZGlmZmVyZW5jZSBpcyB0aGF0IG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkKCSAgICAgKiBicmFuY2hlcyByYW5kb21seS4KCSAgICAgKi8KCSAgICB2YXIgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSA9IGZ1bmN0aW9uIChhLCBmdW4pIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CgkgICAgICAgIHZhciBsZW4gPSBhLmxlbmd0aDsKCSAgICAgICAgdmFyIGk7CgkgICAgICAgIHZhciBhcnJheV9pcyA9IFtdOwoJICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCSAgICAgICAgICBhcnJheV9pc1tpXSA9IGk7CgkgICAgICAgIH0KCSAgICAgICAgc2h1ZmZsZV9hcnJheShhcnJheV9pcyk7CgkgICAgICAgIHZhciByZXN1bHQgPSBbXTsKCSAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkgICAgICAgICAgdmFyIGFycmF5X2kgPSBhcnJheV9pc1tpXTsKCSAgICAgICAgICByZXN1bHRbYXJyYXlfaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVthcnJheV9pXSwgZnVuKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGZ1bihhKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgYSBwcmV0dHkgd2F5IG9mIHNldHRpbmcgZGVmYXVsdCBvcHRpb25zIHdoZXJlIHRoZSBkZWZ1bHRzIGNhbiBiZQoJICAgICAqIG92ZXJyaWRkZW4gYnkgYW4gb3B0aW9ucyBvYmplY3QuCgkgICAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmcKCSAgICAgKiAgQHBhcmFtIG15X29wdGlvbnMgLSBhbiBvcHRpb24gb2JqZWN0IHRoYXQgY291bGQgaGF2ZSBvcHRpb25fbmFtZSAKCSAgICAgKiAgICBhcyBhIG1lbWJlci4KCSAgICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgCgkgICAgICogICBpcyBub3QgZGVmaW5lZCBpbiBteV9vcHRpb25zLgoJICAgICAqIEBleGFtcGxlCgkgICAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9CgkgICAgICogdmFyIHBpID0gZ2V0X29wdGlvbigicGkiLCBteV9vcHRpb25zLCAzLjE0KQoJICAgICAqLwoJICAgIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuCgkgICAgLy8gYnkgYW4gb3B0aW9ucyBvYmplY3QuIEZvciBleGFtcGxlOgoJICAgIC8vIHZhciBwaSA9IGdldF9vcHRpb24oInBpIiwgbXlfb3B0aW9ucywgMy4xNCkKCSAgICB2YXIgZ2V0X29wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7CgkgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCSAgICAgIHJldHVybiBvcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbl9uYW1lKSAmJiBvcHRpb25zW29wdGlvbl9uYW1lXSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSBudWxsID8gb3B0aW9uc1tvcHRpb25fbmFtZV0gOiBkZWZhdWxfdmFsdWU7CgkgICAgfTsKCgkgICAgLyoqIFZlcnNpb24gb2YgZ2V0X29wdGlvbiB3aGVyZSB0aGUgb3B0aW9uIHNob3VsZCBiZSBhIG9uZSBvciBtdWx0aS1kaW1lbnNpb25hbAoJICAgICAqIGFycmF5IGFuZCB3aGVyZSB0aGUgZGVmYXVsdCBjYW4gYmUgb3ZlcnJpZGRlbiBlaXRoZXIgYnkgYSBzY2FsYXIgb3IgYnkgYW4gYXJyYXkuCgkgICAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggCgkgICAgICogZGltIGRpbWVuc2lvbnMuCgkgICAgICogCgkgICAgICovCgkgICAgdmFyIGdldF9tdWx0aWRpbV9vcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRpbSwgZGVmYXVsX3ZhbHVlKSB7CgkgICAgICB2YXIgdmFsdWUgPSBnZXRfb3B0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkZWZhdWxfdmFsdWUpOwoJICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgewoJICAgICAgICB2YWx1ZSA9IGNyZWF0ZV9hcnJheShkaW0sIHZhbHVlKTsKCSAgICAgIH0KCSAgICAgIGlmICghYXJyYXlfZXF1YWwoYXJyYXlfZGltKHZhbHVlKSwgZGltKSkgewoJICAgICAgICB0aHJvdyAiVGhlIG9wdGlvbiAiICsgb3B0aW9uX25hbWUgKyAiIGlzIG9mIGRpbWVuc2lvbiBbIiArIGFycmF5X2RpbSh2YWx1ZSkgKyAiXSBidXQgc2hvdWxkIGJlIFsiICsgZGltICsgIl0uIjsKCSAgICAgIH0KCSAgICAgIHJldHVybiB2YWx1ZTsKCSAgICB9OwoKCSAgICAvLy8vLy8vLy8vIEZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIG9iamVjdHMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBmaXhlZCAoc2FtZSBldmVyeSB0aW1lKSBudW1iZXIgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIGluaXRpYWxpemUKCSAgICAgKiBhIHBhcmFtZXRlciBvZiBhIGNlcnRhaW4gdHlwZSwgcG9zc2libHkgd2l0aCBsb3dlciBhbmQgdXBwZXIgYm91bmRzLgoJICAgICAqIFRoZSBwb3NzaWxlIHR5cGVzIGFyZSAicmVhbCIsICJpbnQiLCBhbmQgImJpbmFyeSIuCgkgICAgICovCgkgICAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbiAodHlwZSwgbG93ZXIsIHVwcGVyKSB7CgkgICAgICBpZiAobG93ZXIgPiB1cHBlcikgewoJICAgICAgICB0aHJvdyAiQ2FuIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciB3aGVyZSBsb3dlciBib3VuZCA+IHVwcGVyIGJvdW5kIjsKCSAgICAgIH0KCSAgICAgIGlmICh0eXBlID09PSAicmVhbCIpIHsKCSAgICAgICAgaWYgKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIDAuNTsKCSAgICAgICAgfSBlbHNlIGlmIChsb3dlciA9PT0gLUluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIHVwcGVyIC0gMC41OwoJICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiBsb3dlciArIDAuNTsKCSAgICAgICAgfSBlbHNlIGlmIChsb3dlciA8PSB1cHBlcikgewoJICAgICAgICAgIHJldHVybiAobG93ZXIgKyB1cHBlcikgLyAyOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJpbnQiKSB7CgkgICAgICAgIGlmIChsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiAxOwoJICAgICAgICB9IGVsc2UgaWYgKGxvd2VyID09PSAtSW5maW5pdHkpIHsKCSAgICAgICAgICByZXR1cm4gdXBwZXIgLSAxOwoJICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiBsb3dlciArIDE7CgkgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPD0gdXBwZXIpIHsKCSAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgobG93ZXIgKyB1cHBlcikgLyAyKTsKCSAgICAgICAgfQoJICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiYmluYXJ5IikgewoJICAgICAgICByZXR1cm4gMTsKCSAgICAgIH0KCSAgICAgIHRocm93ICJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSAiICsgdHlwZSArICJbIiArIGxvd2VyICsgIiwgIiArIHVwcGVyICsgIl0iOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIAoJICAgICAqIGFuZCBpbml0aWFsaXplcyBub24taW5pdGlhbGl6ZWQgcGFyYW1ldGVycy4gVGhpcyBtb2RpZmllZCB2ZXJzaW9uIG9mCgkgICAgICogcGFyYW1zX3RvX2NvbXBsZXRlIGlzIHJldHVybmVkIGFzIGEgZGVlcCBjb3B5IGFuZCBub3QgbW9kaWZpZWQgaW4gcGxhY2UuCgkgICAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlCgkgICAgICogZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB0aGF0IHNob3VsZCByZXR1cm4gYSBzaW5nbGUgbnVtYmVyIAoJICAgICAqIChsaWtlIHBhcmFtX2luaXRfZml4ZWQsIGZvciBleGFtcGxlKS4KCSAgICAgKiBAZXhhbXBsZQoJICAgICAqIHZhciBwYXJhbXMgPSB7ICJtdSI6IHsidHlwZSI6ICJyZWFsIn0gfQoJICAgICAqIHBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyhwYXJhbXMpOwoJICAgICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOgoJICAgICAqIC8vICB7Im11IjogeyAidHlwZSI6ICJyZWFsIiwgImRpbSI6IFsxXSwgInVwcGVyIjogSW5maW5pdHksCgkgICAgICogLy8gICAgICAgICAgICJsb3dlciI6IC1JbmZpbml0eSwgImluaXQiOiAwLjUgfX0KCSAgICAgKi8KCSAgICB2YXIgY29tcGxldGVfcGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtc190b19jb21wbGV0ZSwgcGFyYW1faW5pdCkgewoJICAgICAgdmFyIHBhcmFtcyA9IGRlZXBfY2xvbmUocGFyYW1zX3RvX2NvbXBsZXRlKTsKCSAgICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7CgkgICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtX25hbWUpKSBjb250aW51ZTsKCSAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3BhcmFtX25hbWVdOwoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ0eXBlIikpIHsKCSAgICAgICAgICBwYXJhbS50eXBlID0gInJlYWwiOwoJICAgICAgICB9CgkgICAgICAgIGlmICghcGFyYW0uaGFzT3duUHJvcGVydHkoImRpbSIpKSB7CgkgICAgICAgICAgcGFyYW0uZGltID0gWzFdOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpc19udW1iZXIocGFyYW0uZGltKSkgewoJICAgICAgICAgIHBhcmFtLmRpbSA9IFtwYXJhbS5kaW1dOwoJICAgICAgICB9CgkgICAgICAgIGlmIChwYXJhbS50eXBlID09ICJiaW5hcnkiKSB7CgkgICAgICAgICAgcGFyYW0udXBwZXIgPSAxOwoJICAgICAgICAgIHBhcmFtLmxvd2VyID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ1cHBlciIpKSB7CgkgICAgICAgICAgcGFyYW0udXBwZXIgPSBJbmZpbml0eTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJsb3dlciIpKSB7CgkgICAgICAgICAgcGFyYW0ubG93ZXIgPSAtSW5maW5pdHk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHBhcmFtLmhhc093blByb3BlcnR5KCJpbml0IikpIHsKCSAgICAgICAgICAvLyBJZiB0aGlzIGlzIGp1c3QgYSBudW1iZXIgb3IgYSBuZXN0ZWQgYXJyYXkgd2UgbGVhdmUgaXQgYWxvbmUsIGJ1dCBpZi4uLgoJICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09ICJmdW5jdGlvbiIpIHsKCSAgICAgICAgICAgIC8vIHBhcmFtLmluaXQgaXMgYSBmdW5jdGlvbiwgdXNlIHRoYXQgdG8gaW5pdGlhbGl6ZSB0aGUgcGFyYW1ldGVyLgoJICAgICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtLmluaXQoKTsKCSAgICAgICAgICB9IGVsc2UgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHsKCSAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciB3aGVyZSB0aGUgcGFyYW0uaW5pdCBleGlzdCBidXQKCSAgICAgICAgICAgIC8vIGlzIG5vdCBhbiBhcnJheS4gVGhlbiBhc3N1bWUgaXQgaXMgYSBudW1iZXIgb3IgYSBmdW5jdGlvbiBhbmQgdXNlCgkgICAgICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuCgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgcGFyYW0uaW5pdCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIFdlIHVzZSB0aGUgZGVmYXVsdCBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4KCSAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwoJICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9CgkgICAgICByZXR1cm4gcGFyYW1zOwoJICAgIH07CgoJICAgIC8vLy8vLy8vLy8gU3RlcHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vLy8KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIC8qKgoJICAgICAqIEBpbnRlcmZhY2UKCSAgICAgKiBBIFN0ZXBwZXIgaXMgYW4gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBwdXNoaW5nIGFyb3VuZCBvbmUKCSAgICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvbgoJICAgICAqIGRlZmluZWQgYnkgdGhlIGxvZyBwb3N0ZXJpb3IuIFRoaXMgZGVmaW5lcyB0aGUgU3RlcHBlciAiaW50ZXJmYWNlIiwKCSAgICAgKiB3aGVyZSAiaW50ZXJmYWNlIiBtZWFucyB0aGF0IFN0ZXBwZXIgZGVmaW5lcyBhIGNsYXNzIHRoYXQgaXMgbmV2ZXIKCSAgICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWQKCSAgICAgKiBzdGVwcGVyIGZ1bmN0aW9ucy4KCSAgICAgKiBAaW50ZXJmYWNlCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CgkgICAgICogICB7Im11IjogeyAidHlwZSI6ICJyZWFsIiwgImRpbSI6IFsxXSwgInVwcGVyIjogSW5maW5pdHksIAoJICAgICAqICAgImxvd2VyIjogLUluZmluaXR5LCAiaW5pdCI6IDAuNSB9fQoJICAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgImNvbXBsZXRlIiwgdGhhdCBpcywKCSAgICAgKiAgIHNwZWNpZnlpbmcgYWxsIHJlbGV2YW50IGF0dHJpYnV0ZXMgc3VjaCBhcyBkaW0sIGxvd2VyIGFuZCB1cHBlci4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMgaW4gcGFyYW1zCgkgICAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzCgkgICAgICogICBhcyBzY2FsYXJzIG9yLCBwb3NzaWJseSBuZXN0ZWQsIGFycmF5cy4gRm9yIGV4YW1wbGU6CgkgICAgICogICB7bXU6IDEwLCBzaWdtYTogNSwgYmV0YTogWzEsIDIuNV19CgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGUKCSAgICAgKiAgIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFRoYXQgaXMsIHRoZSB2YWx1ZSBvZiBsb2dfcG9zdAoJICAgICAqICAgc2hvdWxkIGNoYW5nZSBpZiB0aGUgdGhlIHZhbHVlcyBpbiBzdGF0ZSBhcmUgY2hhbmdlZC4KCSAgICAKCSAgICAgKi8KCSAgICB2YXIgU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCkgewoJICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CgkgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7CgkgICAgICB0aGlzLmxvZ19wb3N0ID0gbG9nX3Bvc3Q7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFNob3VsZCByZXR1cm4gdGhlIG5ldyBzdGF0ZSwKCSAgICAgKiBidXQgaXMgbWFpbmx5IGNhbGxlZCBmb3IgaXQncyBzaWRlIGVmZmVjdCBvZiBtYWtpbmcgYSBjaGFuZ2UgaW4gdGhlCgkgICAgICogc3RhdGUgb2JqZWN0LgoJICAgICAqLwoJICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICB0aHJvdyAiRXZlcnkgU3RlcHBlciBuZWVkIHRvIGltcGxlbWVudCBzdGVwKCkiOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBhZGFwdCB3aGlsZSBzdGVwcGluZy4KCSAgICAgKi8KCSAgICBTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyAKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgY2Vhc2UgYWRhcHRpbmcgd2hpbGUgc3RlcHBpbmcuCgkgICAgICovCgkgICAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyAKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluZyBpbmZvIHJlZ2FyZGluZyB0aGUgc3RlcHBlci4KCSAgICAgKi8KCSAgICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgc3RlcHBlci4KCSAgICAgIHJldHVybiB7fTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluCgkgICAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiAiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQyIKCSAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLgoJICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAgKiBAcGFyYW0gZ2VuZXJhdGVfcHJvcG9zYWwgLSBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHByb3Bvc2FsIChhcyBhIG51bWJlcikKCSAgICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhCgkgICAgICogbnVtYmVyIGFuZCBsb2dfc2NhbGUgZGVmaW5lcyB0aGUgc2NhbGUgb2YgdGhlIHByb3Bvc2FsIHNvbWVob3cuCgkgICAgKi8KCSAgICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGdlbmVyYXRlX3Byb3Bvc2FsKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CgkgICAgICAgIHRocm93ICJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwoJICAgICAgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKCSAgICAgICAgdGhyb3cgIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyOwoJICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwoJICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSA9IGdldF9vcHRpb24oInByb3BfbG9nX3NjYWxlIiwgb3B0aW9ucywgMCk7CgkgICAgICB0aGlzLmJhdGNoX3NpemUgPSBnZXRfb3B0aW9uKCJiYXRjaF9zaXplIiwgb3B0aW9ucywgNTApOwoJICAgICAgdGhpcy5tYXhfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oIm1heF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgMC4zMyk7CgkgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oImluaXRpYWxfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIDEuMCk7CgkgICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9vcHRpb24oInRhcmdldF9hY2NlcHRfcmF0ZSIsIG9wdGlvbnMsIDAuNDQpOwoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGdldF9vcHRpb24oImlzX2FkYXB0aW5nIiwgb3B0aW9ucywgdHJ1ZSk7CgkgICAgICB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsID0gZ2VuZXJhdGVfcHJvcG9zYWw7CgkgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwOwoJICAgICAgdGhpcy5iYXRjaF9jb3VudCA9IDA7CgkgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwOwoJICAgIH07CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT25lZGltTWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICB2YXIgcGFyYW1fc3RhdGUgPSB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CgkgICAgICB2YXIgcGFyYW1fcHJvcG9zYWwgPSB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsKHBhcmFtX3N0YXRlLCB0aGlzLnByb3BfbG9nX3NjYWxlKTsKCSAgICAgIGlmIChwYXJhbV9wcm9wb3NhbCA8IHRoaXMubG93ZXIgfHwgcGFyYW1fcHJvcG9zYWwgPiB0aGlzLnVwcGVyKSA7IGVsc2UgewoJICAgICAgICAvLyBtYWtlIGEgTWV0cm9wb2xpcyBzdGVwCgkgICAgICAgIHZhciBjdXJyX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwoJICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9wcm9wb3NhbDsKCSAgICAgICAgdmFyIHByb3BfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICAgIHZhciBhY2NlcHRfcHJvYiA9IE1hdGguZXhwKHByb3BfbG9nX2RlbnMgLSBjdXJyX2xvZ19kZW5zKTsKCSAgICAgICAgaWYgKGFjY2VwdF9wcm9iID4gTWF0aC5yYW5kb20oKSkgewoJICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWwKCSAgICAgICAgICBpZiAodGhpcy5pc19hZGFwdGluZykgdGhpcy5hY2NlcHRhbmNlX2NvdW50Kys7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbQoJICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3N0YXRlOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgICBpZiAodGhpcy5pc19hZGFwdGluZykgewoJICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24rKzsKCSAgICAgICAgaWYgKHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA+PSB0aGlzLmJhdGNoX3NpemUpIHsKCSAgICAgICAgICAvLyB0aGVuIGFkYXB0CgkgICAgICAgICAgdGhpcy5iYXRjaF9jb3VudCsrOwoJICAgICAgICAgIHZhciBsb2dfc2RfYWRqdXN0bWVudCA9IE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uIC8gTWF0aC5zcXJ0KHRoaXMuYmF0Y2hfY291bnQpKTsKCSAgICAgICAgICBpZiAodGhpcy5hY2NlcHRhbmNlX2NvdW50IC8gdGhpcy5iYXRjaF9zaXplID4gdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUpIHsKCSAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgKz0gbG9nX3NkX2FkanVzdG1lbnQ7CgkgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgLT0gbG9nX3NkX2FkanVzdG1lbnQ7CgkgICAgICAgICAgfQoJICAgICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CgkgICAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDsKCSAgICAgICAgfQoJICAgICAgfQoJICAgICAgcmV0dXJuIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXTsKCSAgICB9OwoJICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IHRydWU7CgkgICAgfTsKCSAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGZhbHNlOwoJICAgIH07CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICByZXR1cm4gewoJICAgICAgICBwcm9wX2xvZ19zY2FsZTogdGhpcy5wcm9wX2xvZ19zY2FsZSwKCSAgICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsCgkgICAgICAgIGFjY2VwdGFuY2VfY291bnQ6IHRoaXMuYWNjZXB0YW5jZV9jb3VudCwKCSAgICAgICAgaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbjogdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uLAoJICAgICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudAoJICAgICAgfTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBOb3JtYWwgcHJvcG9zYWwuCgkgICAgICovCgkgICAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKCSAgICAgIHJldHVybiBybm9ybShwYXJhbV9zdGF0ZSwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfQoJICAgICAqIEEgInN1YmNsYXNzIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgICovCgkgICAgdmFyIFJlYWxNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewoJICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgbm9ybWFsX3Byb3Bvc2FsKTsKCSAgICB9OwoJICAgIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjsKCgkgICAgLyoqCgkgICAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2FsLgoJICAgICAqLwoJICAgIHZhciBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbiAocGFyYW1fc3RhdGUsIHByb3BfbG9nX3NjYWxlKSB7CgkgICAgICByZXR1cm4gTWF0aC5yb3VuZChybm9ybShwYXJhbV9zdGF0ZSwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKSk7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgKiBAY2xhc3MKCSAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CgkgICAgKiBBICJzdWJjbGFzcyIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgKi8KCSAgICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7CgkgICAgfTsKCSAgICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgSW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW4KCSAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkgZm9yIHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwgYXJyYXlzLiBUaGF0CgkgICAgICogaXMsIGluc3RlYWQgb2YganVzdCB0YWtpbmcgYSBzdGVwIGZvciBhIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIgbGlrZSAKCSAgICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgCgkgICAgICogZm9yIGEgbXVsdGlkaW1lbnNpb25hbCBhcnJheS4gSXQncyBzdGlsbCBwcmV0dHkgZHVtYiBhbmQganVzdCB0YWtlcwoJICAgICAqIG9uZS1kaW1lbnNpb25hbCBzdGVwcyBmb3IgZWFjaCBwYXJhbWV0ZXIgY29tcG9uZW50LCB0aG91Z2guCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIAoJICAgICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuCgkgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgoJICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCgkgICAgICogQHBhcmFtIFN1YlN0ZXBwZXIgLSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSBvZiBvbmUgZGltZW5zaW9uYWwgU3RlcHBlciB0byBhcHBseSBvbgoJICAgICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KCSAgICAqLwoJICAgIHZhciBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBTdWJTdGVwcGVyKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CgkgICAgICAgIHRocm93ICJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwoJICAgICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyOwoJICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwoJICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CgkgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlID0gZ2V0X211bHRpZGltX29wdGlvbigicHJvcF9sb2dfc2NhbGUiLCBvcHRpb25zLCB0aGlzLmRpbSwgMCk7CgkgICAgICB0aGlzLmJhdGNoX3NpemUgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJiYXRjaF9zaXplIiwgb3B0aW9ucywgdGhpcy5kaW0sIDUwKTsKCSAgICAgIHRoaXMubWF4X2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJtYXhfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTsKCSAgICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X211bHRpZGltX29wdGlvbigiaW5pdGlhbF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgdGhpcy5kaW0sIDEuMCk7CgkgICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oInRhcmdldF9hY2NlcHRfcmF0ZSIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjQ0KTsKCSAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJpc19hZGFwdGluZyIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTsKCgkgICAgICAvLyBUaGlzIGhhY2sgYmVsb3cgaXMgYSByZWN1cnNpdmUgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGFuIGFycmF5IG9mIAoJICAgICAgLy8gb25lIGRpbWVuc2lvbmFsIHN0ZXBwZXJzIGFjY29yZGluZyB0byBkaW0uCgkgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZSwgYmF0Y2hfc2l6ZSwgbWF4X2FkYXB0YXRpb24sIGluaXRpYWxfYWRhcHRhdGlvbiwgdGFyZ2V0X2FjY2VwdF9yYXRlLCBpc19hZGFwdGluZykgewoJICAgICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTsKCSAgICAgICAgaWYgKGRpbS5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgc3Vib3B0aW9ucyA9IHsKCSAgICAgICAgICAgICAgcHJvcF9sb2dfc2NhbGU6IHByb3BfbG9nX3NjYWxlW2ldLAoJICAgICAgICAgICAgICBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLAoJICAgICAgICAgICAgICBtYXhfYWRhcHRhdGlvbjogbWF4X2FkYXB0YXRpb25baV0sCgkgICAgICAgICAgICAgIGluaXRpYWxfYWRhcHRhdGlvbjogaW5pdGlhbF9hZGFwdGF0aW9uW2ldLAoJICAgICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwKCSAgICAgICAgICAgICAgaXNfYWRhcHRpbmc6IGlzX2FkYXB0aW5nW2ldCgkgICAgICAgICAgICB9OwoJICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307CgkgICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pOwoJICAgICAgICAgICAgc3VicGFyYW1baV0uZGltID0gWzFdOyAvLyBBcyB0aGlzIHNob3VsZCBub3cgYmUgYSBvbmUtZGltIHBhcmFtZXRlcgoJICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWQKCSAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IFN1YlN0ZXBwZXIoc3VicGFyYW0sIHN1YnN0YXRlLCBsb2dfcG9zdCwgc3Vib3B0aW9ucyk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZVtpXSwgYmF0Y2hfc2l6ZVtpXSwgbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbltpXSwgdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZ1tpXSk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyczsKCSAgICAgIH07CgkgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QsIHRoaXMucHJvcF9sb2dfc2NhbGUsIHRoaXMuYmF0Y2hfc2l6ZSwgdGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24sIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlLCB0aGlzLmlzX2FkYXB0aW5nKTsKCSAgICB9OwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KCSAgICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKCSAgICAgIH0pOwoJICAgIH07CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewoJICAgICAgICBzdWJzdGVwcGVyLnN0YXJ0X2FkYXB0YXRpb24oKTsKCSAgICAgIH0pOwoJICAgIH07CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHN1YnN0ZXBwZXIuc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9KTsKCSAgICB9OwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLmluZm8oKTsKCSAgICAgIH0pOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn0KCSAgICAgKiBBICJzdWJjbGFzcyIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgICovCgkgICAgdmFyIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFJlYWxNZXRyb3BvbGlzU3RlcHBlcik7CgkgICAgfTsKCSAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKCSAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKCgkgICAgLyoqCgkgICAgICogQGNsYXNzCgkgICAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfQoJICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgoJICAgICAqLwoJICAgIHZhciBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIEludE1ldHJvcG9saXNTdGVwcGVyKTsKCSAgICB9OwoJICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBhIHN0ZXAgZm9yIGEgYmluYXJ5IHBhcmFtZXRlci4KCSAgICAgKiBUaGlzIGlzIGRvbmUgYnkgZXZhbHVhdGluZyB0aGUgbG9nIHBvc3RlcmlvciBmb3IgYm90aCBzdGF0ZXMgb2YgdGhlCgkgICAgICogcGFyYW1ldGVyIGFuZCB0aGVuIHNlbGVjdGluZyBhIHN0YXRlIHJhbmRvbWx5IHdpdGggcHJvYmFiaWxpdHkgcmVsYXRpdmUgCgkgICAgICogdG8gdGhlIHBvc3RlcmlvciBvZiBlYWNoIHN0YXRlLgoJICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBCaW5hcnlTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCA9PSAxKSB7CgkgICAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgdGhyb3cgIkJpbmFyeVN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLiI7CgkgICAgICB9CgkgICAgfTsKCSAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5U3RlcHBlcjsKCSAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDsKCSAgICAgIHZhciB6ZXJvX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwoJICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTsKCSAgICAgIHZhciBvbmVfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB2YXIgbWF4X2xvZ19kZW5zID0gTWF0aC5tYXgoemVyb19sb2dfZGVucywgb25lX2xvZ19kZW5zKTsKCSAgICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zOwoJICAgICAgb25lX2xvZ19kZW5zIC09IG1heF9sb2dfZGVuczsKCSAgICAgIHZhciB6ZXJvX3Byb2IgPSBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zIC0gTWF0aC5sb2coTWF0aC5leHAoemVyb19sb2dfZGVucykgKyBNYXRoLmV4cChvbmVfbG9nX2RlbnMpKSk7CgkgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikgewoJICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwOwoJICAgICAgICByZXR1cm4gMDsKCSAgICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC4KCSAgICAgIHJldHVybiAxOwoJICAgIH07CgoJICAgIC8qKgoJICAgICogQGNsYXNzCgkgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAqIEp1c3QgbGlrZSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIHRoaXMgU3RlcHBlciB0YWtlcyBhIHN0ZXBzIGZvcgoJICAgICogYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciBieSB1cGRhdGluZyBlYWNoIGNvbXBvbmVudCBpbiB0dXJuLiBUaGUgZGlmZmVyZW5jZQoJICAgICogaXMgdGhhdCB0aGlzIHN0ZXBwZXIgd29ya3Mgb24gYmluYXJ5IHBhcmFtZXRlcnMuCgkgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgCgkgICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLgoJICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgoJICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgoJICAgICovCgkgICAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CgkgICAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgkgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoID09IDEpIHsKCSAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07CgkgICAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgdGhyb3cgIkJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLiI7CgkgICAgICB9CgkgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0KSB7CgkgICAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdOwoJICAgICAgICB2YXIgaTsKCSAgICAgICAgaWYgKGRpbS5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTsKCSAgICAgICAgICAgIHN1YnBhcmFtc1tpXSA9IHBhcmFtOwoJICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgQmluYXJ5U3RlcHBlcihzdWJwYXJhbXMsIHN1YnN0YXRlLCBsb2dfcG9zdCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gc3Vic3RlcHBlcnM7CgkgICAgICB9OwoJICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0KTsKCSAgICB9OwoJICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyOwoJICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KCSAgICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKCSAgICAgIH0pOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIFRoaXMgc3RlcHBlciBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHRha2luZyBhIHN0ZXAgZm9yIG9uZSBvciBtb3JlIHBhcmFtZXRlcnMuCgkgICAgICogRm9yIHJlYWwgYW5kIGludCBwYXJhbWV0ZXJzIGl0IHRha2VzIE1ldHJvcG9saXMgd2l0aGluIEdpYmJzIHN0ZXBzLCBhbmQgZm9yIAoJICAgICAqIGJpbmFyeSBwYXJhbWV0ZXJzIGl0IGRvZXMgZXZhbHVhdGVzIHRoZSBwb3N0ZXJpb3IgZm9yIGJvdGggcGFyYW10ZXIgdmFsdWVzIGFuZAoJICAgICAqIHJhbmRvbWx5IGNoYW5nZXMgdG8gYSBjZXJ0YWluIHZhbHVlIHByb3BvcnRpb25hbGx5IHRvIHRoYXQgdmFsdWUncyBwb3N0ZXJpb3IKCSAgICAgKiAodGhpcyBpcyBhbHNvIGRvbmUgZm9yIGVhY2ggcGFyYW1ldGVyLCBzbyBhbHNvIGEgKiB3aXRoaW4gR2liYnMgYXBwcm9hY2gpLgoJICAgICAqIFRoaXMgc3RlcHBlciBpcyBhbHNvIGFkYXB0aXZlIGFuZCBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzCgkgICAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy4KCSAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMKCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewoJICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKCSAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgkgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dOwoJICAgICAgICB2YXIgU2VsZWN0U3RlcHBlcjsKCSAgICAgICAgc3dpdGNoIChwYXJhbS50eXBlKSB7CgkgICAgICAgICAgY2FzZSAicmVhbCI6CgkgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICBjYXNlICJpbnQiOgoJICAgICAgICAgICAgaWYgKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgIGNhc2UgImJpbmFyeSI6CgkgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyOwoJICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgdGhyb3cgIkFtd2dTdGVwcGVyIGNhbid0IGhhbmRsZSBwYXJhbWV0ZXIgIiArIHRoaXMucGFyYW1fbmFtZXNbaV0gKyAiIHdpdGggdHlwZSAiICsgcGFyYW0udHlwZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcGFyYW1fb2JqZWN0X3dyYXAgPSB7fTsKCSAgICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTsKCSAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgkgICAgICAgIHZhciBwYXJhbV9vcHRpb25zID0gb3B0aW9ucy5wYXJhbXMgJiYgb3B0aW9ucy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0gfHwge307CgkgICAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSA9IHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSB8fCBvcHRpb25zLmJhdGNoX3NpemU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gPSBwYXJhbV9vcHRpb25zLm1heF9hZGFwdGF0aW9uIHx8IG9wdGlvbnMubWF4X2FkYXB0YXRpb247CgkgICAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247CgkgICAgICAgIHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlID0gcGFyYW1fb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGUgfHwgb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgPSBwYXJhbV9vcHRpb25zLmlzX2FkYXB0aW5nIHx8IG9wdGlvbnMuaXNfYWRhcHRpbmc7CgkgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFtd2dTdGVwcGVyOwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykgewoJICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0ZXAoKTsKCSAgICAgIH0KCSAgICAgIHJldHVybiB0aGlzLnN0YXRlOwoJICAgIH07CgkgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHZhciBpbmZvID0ge307CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgaW5mb1t0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMuc3Vic3RlcHBlcnNbaV0uaW5mbygpOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGluZm87CgkgICAgfTsKCgkgICAgLy8vLy8vLy8vLy8gU2FtcGxlciBGdW5jdGlvbnMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgLyoqCgkgICAgKiBAaW50ZXJmYWNlCgkgICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYQoJICAgIC8vIFNhbXBsZXIgaXMgaGVyZSBpcyBhIGNvbnZlbmllbmNlIGNsYXNzIHdoZXJlIGFuIGluc3RhbmNlIG9mIFNhbXBsZXIKCSAgICAvLyBzZXRzIHVwIHRoZSBTdGVwcGVycywgY2hlY2tzIHRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiwKCSAgICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyICJpbnRlcmZhY2UiLgoJICAgICogQGludGVyZmFjZQoJICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CgkgICAgKiAgIHsibXUiOiB7InR5cGUiOiAicmVhbCJ9LCAic2lnbWEiOiB7InR5cGUiOiAicmVhbCIsICJsb3dlciIgPSAwfX0KCSAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgImNvbXBsZXRlIiBhbmQgcHJvcGVydGllcwoJICAgICogICBsZWZ0IG91dCAobGlrZSBsb3dlciBhbmQgdXBwZXIpIHdpbGwgYmUgZmlsbGVkIGluIGJ5IGRlZmF1bHRzLgoJICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmUKCSAgICAqICAgc3RhdGUgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSB3aXRoIGVhY2ggcGFyYW1ldGVyIGFzIGEgCgkgICAgKiAgIGtleSBhbmQgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXMgbnVtYmVycyBvciBhcnJheXMuIEZvciBleGFtcGxlOgoJICAgICogICB7Im11IjogMywgInNpZ21hIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgCgkgICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LgoJICAgICogQHBhcmFtIGRhdGEgLSBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24KCSAgICAqICAgd2hlbiBzYW1wbGluZy4KCSAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci4KCSAgICAqLwoJICAgIHZhciBTYW1wbGVyID0gZnVuY3Rpb24gKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHsKCSAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOwoJICAgICAgdGhpcy5kYXRhID0gZGF0YTsKCSAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgoJICAgICAgLy8gU2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgaWYgbm90IHBhc3NlZCB0aHJvdWdoIHRoZSBvcHRpb25zIG9iamVjdAoJICAgICAgdGhpcy5wYXJhbV9pbml0X2Z1biA9IGdldF9vcHRpb24oInBhcmFtX2luaXRfZnVuIiwgb3B0aW9ucywgcGFyYW1faW5pdF9maXhlZCk7CgkgICAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKCJ0aGluIiwgb3B0aW9ucywgMSk7CgkgICAgICB2YXIgcGFyYW1zX3RvX21vbml0b3IgPSBnZXRfb3B0aW9uKCJtb25pdG9yIiwgb3B0aW9ucywgbnVsbCk7CgkgICAgICB0aGlzLnRoaW4odGhpbm5pbmdfaW50ZXJ2YWwpOwoJICAgICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTsKCSAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgkgICAgICAvLyBDb21wbGV0aW5nIHRoZSBwYXJhbXMgYW5kIGluaXRpYWxpemluZyB0aGUgc3RhdGUuCgkgICAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7CgkgICAgICB2YXIgc3RhdGUgPSB7fTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbV9uYW1lcy5sZW5ndGg7IGkrKykgewoJICAgICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7CgkgICAgICB9CgkgICAgICB0aGlzLmxvZ19wb3N0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpOwoJICAgICAgfTsKCSAgICAgIC8vIFJ1bm5pbmcgdGhlIGxvZ19wb3N0IGZ1bmN0aW9uIG9uY2UgaW4gY2FzZSBpdCBmdXJ0aGVyIG1vZGlmaWVzIHRoZSBzdGF0ZQoJICAgICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy4KCSAgICAgIHRoaXMubG9nX3Bvc3QoKTsKCSAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKCSAgICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpOwoJICAgIH07CgoJICAgIC8qKiBTaG91bGQgcmV0dXJuIGEgdmVjdG9yIG9mIHN0ZXBwZXJzIHRoYXQgd2hlbiBjYWxsZWQgCgkgICAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbiAoc3RhdGUsIGxvZ19wb3N0KSB7CgkgICAgICB0aHJvdyAiRXZlcnkgU2FtcGxlciBuZWVkcyB0byBpbXBsZW1lbnQgY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUoKSI7CgkgICAgfTsKCgkgICAgLyoqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIFNhbXBsZXIuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHJldHVybiB7CgkgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLAoJICAgICAgICB0aGluOiB0aGlzLnRoaW4sCgkgICAgICAgIG1vbml0b3I6IHRoaXMubW9uaXRvciwKCSAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnMKCSAgICAgIH07CgkgICAgfTsKCgkgICAgLyoqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBSZXR1cm5zIHRoZSBuZXcgc3BhY2UKCSAgICAgKiBidXQgYWxzbyBtb2RpZmllcyB0aGUgc3RhdGUgaW4gcGxhY2UuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdGVwcGVycyk7CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGVwKCk7CgkgICAgICB9CgkgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5zdGF0ZSkubGVuZ3RoID4gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpLmxlbmd0aCkgewoJICAgICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2UKCSAgICAgICAgLy8gbmVlZCB0byBydW4gdGhlIGxvZ19wb3N0IG9uY2UgbW9yZSBpbiBvcmRlciB0byBzZXQgdGhlIGRlcml2ZWQgcXVhbnRpdGllcwoJICAgICAgICAvLyBmb3IgdGhlIGZpbmFsIHBhcmFtZXRlciBzdGF0ZQoJICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB9CgkgICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUYWtlcyBuX2l0ZXJhdGlvbnMgc3RlcHMgaW4gdGhlIHBhcmFtZXRlciBzcGFjZSBhbmQgcmV0dXJucyB0aGVtCgkgICAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZToKCSAgICAgKiB7bXU6IFsxLCAtMSwgMiwgMywgLi4uXSwgc2lnbWE6IFsxLCAyLCAyLCAxLCAuLi5dfS4KCSAgICAgKiBJZiB0aGluIGlzID4gMSB0aGVuIG5faXRlcmF0aW9ucyAvIHRoaW4gc2FtcGxlcyBhcmUgcmV0dXJuZWQuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc2FtcGxlID0gZnVuY3Rpb24gKG5faXRlcmF0aW9ucykgewoJICAgICAgLy8gSW5pdGlhbGl6aW5nIGN1cnJfc2FtcGxlIHdoZXJlIHRoZSBzYW1wbGUgaXMgZ29pbmcgdG8gYmUgc2F2ZWQKCSAgICAgIC8vIGFzIGFuIG9iamVjdCBjb250YWluaW5nIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyIHRvIGJlIG1vbml0b3JlZC4KCSAgICAgIHZhciBpLCBqLCBtb25pdG9yZWRfcGFyYW1zOwoJICAgICAgaWYgKHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9PT0gbnVsbCkgewoJICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gdGhpcy5tb25pdG9yZWRfcGFyYW1zOwoJICAgICAgfQoJICAgICAgdmFyIGN1cnJfc2FtcGxlID0ge307CgkgICAgICBmb3IgKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykgewoJICAgICAgICBjdXJyX3NhbXBsZVttb25pdG9yZWRfcGFyYW1zW2pdXSA9IFtdOwoJICAgICAgfQoJICAgICAgZm9yIChpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7CgkgICAgICAgIGlmIChpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkgewoJICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7CgkgICAgICAgICAgICB2YXIgcGFyYW0gPSBtb25pdG9yZWRfcGFyYW1zW2pdOwoJICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGlzLnN0ZXAoKTsKCSAgICAgIH0KCSAgICAgIHJldHVybiBjdXJyX3NhbXBsZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUYWtlcyBuX2l0ZXJhdGlvbiBzdGVwcyBpbiBwYXJhbWV0ZXIgc3BhY2UgYnV0IHJldHVybnMgbm90aGluZy4KCSAgICAgKi8KCSAgICBTYW1wbGVyLnByb3RvdHlwZS5idXJuID0gZnVuY3Rpb24gKG5faXRlcmF0aW9ucykgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2l0ZXJhdGlvbnM7IGkrKykgewoJICAgICAgICB0aGlzLnN0ZXAoKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBTZXRzIHdoYXQgcGFyYW1ldGVycyBzaG91bGQgYmUgbW9uaXRvcmVkIGFuZCByZXR1cm5lZCB3aGVuIGNhbGxpbmcKCSAgICAgKiBzYW1wbGUuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUubW9uaXRvciA9IGZ1bmN0aW9uIChwYXJhbXNfdG9fbW9uaXRvcikgewoJICAgICAgdGhpcy5tb25pdG9yZWRfcGFyYW1zID0gcGFyYW1zX3RvX21vbml0b3I7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogU2V0cyB0aGUgdGhpbm5pbmcuIEZvciBleGFtcGxlIHRoaW4gPT0gMTAgbWVhbnMgdGhhdCBldmVyeSAxMHRoIHBvc3RlcmlvcgoJICAgICAqIGRyYXcgd2lsbCBiZSBrZXB0LgoJICAgICAqLwoJICAgIFNhbXBsZXIucHJvdG90eXBlLnRoaW4gPSBmdW5jdGlvbiAodGhpbm5pbmdfaW50ZXJ2YWwpIHsKCSAgICAgIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPSB0aGlubmluZ19pbnRlcnZhbDsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBTZXRzIGFkYXB0YXRpb24gb24sIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy4KCSAgICAgKi8KCSAgICBTYW1wbGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpOwoJICAgICAgfQoJICAgIH07CgoJICAgIC8qKgoJICAgICogU2V0cyBhZGFwdGF0aW9uIG9mZiwgaWYgYXBwbGljYWJsZSwgaW4gYWxsIHN0ZXBwZXJzLgoJICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqCgkgICAgKiBAY2xhc3MKCSAgICAqIEBpbXBsZW1lbnRzIHtTYW1wbGVyfQoJICAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIAoJICAgICogQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KS4gQW4gYWRpdGlvbiBpcyB0aGF0IGl0IGhhbmRsZXMgaW50IHBhcmFtZXRlcnMKCSAgICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgCgkgICAgKiB2YWx1ZSBwcm9wb3J0aW9uYWwgdG8gdGhlIHBvc3RlcmlvciBvZiB0aGUgdHdvIHBvc3NpYmxlIHN0YXRlcyBvZiB0aGUKCSAgICAqIHBhcmFtZXRlci4gVGhpcyBzYW1wbGVyIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMKCSAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCgkgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMKCSAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KCSAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBBbXdnU2FtcGxlciA9IGZ1bmN0aW9uIChwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7CgkgICAgICBTYW1wbGVyLmNhbGwodGhpcywgcGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucyk7CgkgICAgfTsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIHJldHVybiBbbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKV07CgkgICAgfTsKCgkgICAgLy8gUmV0dXJuaW5nIHRoZSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgcHVibGljbHkgZXhwb3NlZCBieSB0aGlzIG1vZHVsZQoJICAgIHJldHVybiB7CgkgICAgICBydW5pZjogcnVuaWYsCgkgICAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsCgkgICAgICBybm9ybTogcm5vcm0sCgkgICAgICBwYXJhbV9pbml0X2ZpeGVkOiBwYXJhbV9pbml0X2ZpeGVkLAoJICAgICAgY29tcGxldGVfcGFyYW1zOiBjb21wbGV0ZV9wYXJhbXMsCgkgICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIEludE1ldHJvcG9saXNTdGVwcGVyOiBJbnRNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsCgkgICAgICBCaW5hcnlTdGVwcGVyOiBCaW5hcnlTdGVwcGVyLAoJICAgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlcjogQmluYXJ5Q29tcG9uZW50U3RlcHBlciwKCSAgICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwKCSAgICAgIEFtd2dTYW1wbGVyOiBBbXdnU2FtcGxlcgoJICAgIH07CgkgIH0pOwoJfSkobWNtYyk7Cgl2YXIgbWNtY0V4cG9ydHMgPSBtY21jLmV4cG9ydHM7CgoJZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHsKCSAgcmV0dXJuIGEgPT0gbnVsbCB8fCBiID09IG51bGwgPyBOYU4gOiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjsKCX0KCglmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHsKCSAgewoJICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykgewoJICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkgewoJICAgICAgICB5aWVsZCB2YWx1ZTsKCSAgICAgIH0KCSAgICB9CgkgIH0KCX0KCglmdW5jdGlvbiBjb21wYXJlRGVmaW5lZChjb21wYXJlID0gYXNjZW5kaW5nKSB7CgkgIGlmIChjb21wYXJlID09PSBhc2NlbmRpbmcpIHJldHVybiBhc2NlbmRpbmdEZWZpbmVkOwoJICBpZiAodHlwZW9mIGNvbXBhcmUgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJyb3IoImNvbXBhcmUgaXMgbm90IGEgZnVuY3Rpb24iKTsKCSAgcmV0dXJuIChhLCBiKSA9PiB7CgkgICAgY29uc3QgeCA9IGNvbXBhcmUoYSwgYik7CgkgICAgaWYgKHggfHwgeCA9PT0gMCkgcmV0dXJuIHg7CgkgICAgcmV0dXJuIChjb21wYXJlKGIsIGIpID09PSAwKSAtIChjb21wYXJlKGEsIGEpID09PSAwKTsKCSAgfTsKCX0KCWZ1bmN0aW9uIGFzY2VuZGluZ0RlZmluZWQoYSwgYikgewoJICByZXR1cm4gKGEgPT0gbnVsbCB8fCAhKGEgPj0gYSkpIC0gKGIgPT0gbnVsbCB8fCAhKGIgPj0gYikpIHx8IChhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMCk7Cgl9CgoJZnVuY3Rpb24gbWF4KHZhbHVlcywgdmFsdWVvZikgewoJICBsZXQgbWF4OwoJICB7CgkgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHsKCSAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIChtYXggPCB2YWx1ZSB8fCBtYXggPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpIHsKCSAgICAgICAgbWF4ID0gdmFsdWU7CgkgICAgICB9CgkgICAgfQoJICB9CgkgIHJldHVybiBtYXg7Cgl9CgoJZnVuY3Rpb24gbWluKHZhbHVlcywgdmFsdWVvZikgewoJICBsZXQgbWluOwoJICB7CgkgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHsKCSAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIChtaW4gPiB2YWx1ZSB8fCBtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpIHsKCSAgICAgICAgbWluID0gdmFsdWU7CgkgICAgICB9CgkgICAgfQoJICB9CgkgIHJldHVybiBtaW47Cgl9CgoJLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvcXVpY2tzZWxlY3QKCS8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uCglmdW5jdGlvbiBxdWlja3NlbGVjdChhcnJheSwgaywgbGVmdCA9IDAsIHJpZ2h0ID0gSW5maW5pdHksIGNvbXBhcmUpIHsKCSAgayA9IE1hdGguZmxvb3Ioayk7CgkgIGxlZnQgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIGxlZnQpKTsKCSAgcmlnaHQgPSBNYXRoLmZsb29yKE1hdGgubWluKGFycmF5Lmxlbmd0aCAtIDEsIHJpZ2h0KSk7CgkgIGlmICghKGxlZnQgPD0gayAmJiBrIDw9IHJpZ2h0KSkgcmV0dXJuIGFycmF5OwoJICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpOwoJICB3aGlsZSAocmlnaHQgPiBsZWZ0KSB7CgkgICAgaWYgKHJpZ2h0IC0gbGVmdCA+IDYwMCkgewoJICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7CgkgICAgICBjb25zdCBtID0gayAtIGxlZnQgKyAxOwoJICAgICAgY29uc3QgeiA9IE1hdGgubG9nKG4pOwoJICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7CgkgICAgICBjb25zdCBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTsKCSAgICAgIGNvbnN0IG5ld0xlZnQgPSBNYXRoLm1heChsZWZ0LCBNYXRoLmZsb29yKGsgLSBtICogcyAvIG4gKyBzZCkpOwoJICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTsKCSAgICAgIHF1aWNrc2VsZWN0KGFycmF5LCBrLCBuZXdMZWZ0LCBuZXdSaWdodCwgY29tcGFyZSk7CgkgICAgfQoJICAgIGNvbnN0IHQgPSBhcnJheVtrXTsKCSAgICBsZXQgaSA9IGxlZnQ7CgkgICAgbGV0IGogPSByaWdodDsKCSAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTsKCSAgICBpZiAoY29tcGFyZShhcnJheVtyaWdodF0sIHQpID4gMCkgc3dhcChhcnJheSwgbGVmdCwgcmlnaHQpOwoJICAgIHdoaWxlIChpIDwgaikgewoJICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qOwoJICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbaV0sIHQpIDwgMCkgKytpOwoJICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbal0sIHQpID4gMCkgLS1qOwoJICAgIH0KCSAgICBpZiAoY29tcGFyZShhcnJheVtsZWZ0XSwgdCkgPT09IDApIHN3YXAoYXJyYXksIGxlZnQsIGopO2Vsc2UgKytqLCBzd2FwKGFycmF5LCBqLCByaWdodCk7CgkgICAgaWYgKGogPD0gaykgbGVmdCA9IGogKyAxOwoJICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7CgkgIH0KCSAgcmV0dXJuIGFycmF5OwoJfQoJZnVuY3Rpb24gc3dhcChhcnJheSwgaSwgaikgewoJICBjb25zdCB0ID0gYXJyYXlbaV07CgkgIGFycmF5W2ldID0gYXJyYXlbal07CgkgIGFycmF5W2pdID0gdDsKCX0KCglmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHsKCSAgdmFsdWVzID0gRmxvYXQ2NEFycmF5LmZyb20obnVtYmVycyh2YWx1ZXMpKTsKCSAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpIHx8IGlzTmFOKHAgPSArcCkpIHJldHVybjsKCSAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpOwoJICBpZiAocCA+PSAxKSByZXR1cm4gbWF4KHZhbHVlcyk7CgkgIHZhciBuLAoJICAgIGkgPSAobiAtIDEpICogcCwKCSAgICBpMCA9IE1hdGguZmxvb3IoaSksCgkgICAgdmFsdWUwID0gbWF4KHF1aWNrc2VsZWN0KHZhbHVlcywgaTApLnN1YmFycmF5KDAsIGkwICsgMSkpLAoJICAgIHZhbHVlMSA9IG1pbih2YWx1ZXMuc3ViYXJyYXkoaTAgKyAxKSk7CgkgIHJldHVybiB2YWx1ZTAgKyAodmFsdWUxIC0gdmFsdWUwKSAqIChpIC0gaTApOwoJfQoKCWZ1bmN0aW9uIG1lZGlhbih2YWx1ZXMsIHZhbHVlb2YpIHsKCSAgcmV0dXJuIHF1YW50aWxlKHZhbHVlcywgMC41KTsKCX0KCglmdW5jdGlvbiBUcmFuc2Zvcm0oaywgeCwgeSkgewoJICB0aGlzLmsgPSBrOwoJICB0aGlzLnggPSB4OwoJICB0aGlzLnkgPSB5OwoJfQoJVHJhbnNmb3JtLnByb3RvdHlwZSA9IHsKCSAgY29uc3RydWN0b3I6IFRyYW5zZm9ybSwKCSAgc2NhbGU6IGZ1bmN0aW9uIChrKSB7CgkgICAgcmV0dXJuIGsgPT09IDEgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmsgKiBrLCB0aGlzLngsIHRoaXMueSk7CgkgIH0sCgkgIHRyYW5zbGF0ZTogZnVuY3Rpb24gKHgsIHkpIHsKCSAgICByZXR1cm4geCA9PT0gMCAmIHkgPT09IDAgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmssIHRoaXMueCArIHRoaXMuayAqIHgsIHRoaXMueSArIHRoaXMuayAqIHkpOwoJICB9LAoJICBhcHBseTogZnVuY3Rpb24gKHBvaW50KSB7CgkgICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldOwoJICB9LAoJICBhcHBseVg6IGZ1bmN0aW9uICh4KSB7CgkgICAgcmV0dXJuIHggKiB0aGlzLmsgKyB0aGlzLng7CgkgIH0sCgkgIGFwcGx5WTogZnVuY3Rpb24gKHkpIHsKCSAgICByZXR1cm4geSAqIHRoaXMuayArIHRoaXMueTsKCSAgfSwKCSAgaW52ZXJ0OiBmdW5jdGlvbiAobG9jYXRpb24pIHsKCSAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdOwoJICB9LAoJICBpbnZlcnRYOiBmdW5jdGlvbiAoeCkgewoJICAgIHJldHVybiAoeCAtIHRoaXMueCkgLyB0aGlzLms7CgkgIH0sCgkgIGludmVydFk6IGZ1bmN0aW9uICh5KSB7CgkgICAgcmV0dXJuICh5IC0gdGhpcy55KSAvIHRoaXMuazsKCSAgfSwKCSAgcmVzY2FsZVg6IGZ1bmN0aW9uICh4KSB7CgkgICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7CgkgIH0sCgkgIHJlc2NhbGVZOiBmdW5jdGlvbiAoeSkgewoJICAgIHJldHVybiB5LmNvcHkoKS5kb21haW4oeS5yYW5nZSgpLm1hcCh0aGlzLmludmVydFksIHRoaXMpLm1hcCh5LmludmVydCwgeSkpOwoJICB9LAoJICB0b1N0cmluZzogZnVuY3Rpb24gKCkgewoJICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyB0aGlzLnggKyAiLCIgKyB0aGlzLnkgKyAiKSBzY2FsZSgiICsgdGhpcy5rICsgIikiOwoJICB9Cgl9OwoJVHJhbnNmb3JtLnByb3RvdHlwZTsKCgkvKgoJICBDUFRNYXRoIFN0YXRpYyBDbGFzcyAtIE5vdCBpbnRlbmRlZCBmb3IgaW5zdGFudGlhdGlvbiEKCgkgIFZhcmlhYmxlczoKCSAgICB4ID0gb2JqZWN0aXZlIHZhbHVlCgkgICAgdiA9IHN1YmplY3RpdmUgdmFsdWUKCSAgICBwID0gb2JqZWN0aXZlIHByb2JhYmlsaXR5CgkgICAgdyA9IHN1YmplY3RpdmUgcHJvYmFiaWxpdHkvZGVjaXNpb24gd2VpZ2h0CgkgICAgdSA9IHN1YmplY3RpdmUgdXRpbGl0eQoKCSAgICBhID0gYWxwaGEgKGN1cnZhdHVyZSBmb3IgdmFsdWUgZnVuY3Rpb24pCgkgICAgbCA9IGxhbWJkYSAobG9zcyBhdmVyc2lvbiBmb3IgdmFsdWUgZnVuY3Rpb24pCgkgICAgZyA9IGdhbW1hIChzZW5zaXRpdml0eSBmb3IgZGVjaXNpb24gd2VpZ2h0aW5nIGZ1bmN0aW9uKQoKCSAgRXF1YXRpb25zOgoJICAgIHYgPSBpZiAoeCA+PSAwKSB4XmE7IGlmICh4IDwgMCkgLWwgKiAoLXgpXmEKCSAgICBhID0gaWYgKHggPj0gMCkgbG9nKHYpIC8gbG9nKHgpOyBpZiAoeCA8IDApIChsb2coLXYpIC0gbG9nKGwpKSAvIGxvZygteCkKCSAgICBsID0gaWYgKHggPj0gMCkgMTsgaWYgKHggPCAwKSAtdiAvICgteCleYQoKCSAgICB3ID0gcF5nIC8gKHBeZyArICgxIC0gcCleZyleKDEgLyBnKQoKCSAgICB1ID0gU3VtX24odl9uICogd19uKQoJKi8KCWNsYXNzIENQVE1hdGggewoJICBzdGF0aWMgeGFsMnYoeCwgYSwgbCkgewoJICAgIGlmICh4ID49IDApIHsKCSAgICAgIHJldHVybiB4ICoqIGE7CgkgICAgfQoJICAgIC8vIGVsc2UgKHggPCAwKQoJICAgIHJldHVybiAtbCAqICgteCkgKiogYTsKCSAgfQoJICBzdGF0aWMgeGx2MmEoeCwgbCwgdikgewoJICAgIGlmICh4ID49IDApIHsKCSAgICAgIHJldHVybiBNYXRoLmxvZyh2KSAvIE1hdGgubG9nKHgpOwoJICAgIH0KCSAgICAvLyBlbHNlICh4IDwgMCkKCSAgICByZXR1cm4gKE1hdGgubG9nKC12KSAtIE1hdGgubG9nKGwpKSAvIE1hdGgubG9nKC14KTsKCSAgfQoJICBzdGF0aWMgeGF2MmwoeCwgYSwgdikgewoJICAgIGlmICh4ID49IDApIHsKCSAgICAgIHJldHVybiBOYU47CgkgICAgfQoJICAgIC8vIGVsc2UgKHggPCAwKQoJICAgIHJldHVybiAtdiAvICgteCkgKiogYTsKCSAgfQoJICBzdGF0aWMgcGcydyhwLCBnKSB7CgkgICAgcmV0dXJuIHAgKiogZyAvIChwICoqIGcgKyAoMSAtIHApICoqIGcpICoqICgxIC8gZyk7CgkgIH0KCSAgc3RhdGljIHZ3MnUodiwgdykgewoJICAgIC8vIE51bWJlcnMKCSAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInICYmIHR5cGVvZiB3ID09PSAnbnVtYmVyJykgewoJICAgICAgcmV0dXJuIHYgKiB3OwoJICAgIH0KCSAgICAvLyBBcnJheXMKCSAgICBpZiAodiBpbnN0YW5jZW9mIEFycmF5ICYmIHcgaW5zdGFuY2VvZiBBcnJheSAmJiB2Lmxlbmd0aCA+IDAgJiYgdi5sZW5ndGggPT09IHcubGVuZ3RoKSB7CgkgICAgICBsZXQgdSA9IDA7CgkgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHYubGVuZ3RoOyBuICs9IDEpIHsKCSAgICAgICAgdSArPSB2W25dICogd1tuXTsKCSAgICAgIH0KCSAgICAgIHJldHVybiB1OwoJICAgIH0KCSAgICAvLyBPdGhlcndpc2UKCSAgICByZXR1cm4gTmFOOwoJICB9Cgl9CgoJLy8gSW50ZXJuYWwgZGVwZW5kZW5jaWVzCgoJLyogZXNsaW50IG5vLXJlc3RyaWN0ZWQtZ2xvYmFsczogWyJvZmYiLCAic2VsZiJdICovCgoJc2VsZi5vbm1lc3NhZ2UgPSBldmVudCA9PiB7CgkgIGNvbnN0IHBhcmFtcyA9IHsKCSAgICBhbHBoYTogewoJICAgICAgdHlwZTogJ3JlYWwnLAoJICAgICAgbG93ZXI6IDAsCgkgICAgICB1cHBlcjogMQoJICAgIH0sCgkgICAgbGFtYmRhOiB7CgkgICAgICB0eXBlOiAncmVhbCcsCgkgICAgICBsb3dlcjogMCwKCSAgICAgIHVwcGVyOiAxMAoJICAgIH0sCgkgICAgZ2FtbWE6IHsKCSAgICAgIHR5cGU6ICdyZWFsJywKCSAgICAgIGxvd2VyOiAwLAoJICAgICAgdXBwZXI6IDEKCSAgICB9LAoJICAgIGx1Y2U6IHsKCSAgICAgIHR5cGU6ICdyZWFsJywKCSAgICAgIGxvd2VyOiAwLAoJICAgICAgdXBwZXI6IDEwMAoJICAgIH0KCSAgfTsKCSAgY29uc3QgbG9nUG9zdCA9IChzdGF0ZSwgZGF0YSkgPT4gewoJICAgIGxldCBscCA9IDA7CgoJICAgIC8vIFByaW9ycwoJICAgIGNvbnN0IGFscGhhTWVhbiA9IDAuNTsKCSAgICBjb25zdCBhbHBoYVNhbXBsZVNpemUgPSAyLjU7CgkgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuYmV0YShzdGF0ZS5hbHBoYSwgYWxwaGFNZWFuICogYWxwaGFTYW1wbGVTaXplLCAoMSAtIGFscGhhTWVhbikgKiBhbHBoYVNhbXBsZVNpemUpOwoJICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmFscGhhLCAwLCAxKTsKCgkgICAgY29uc3QgbGFtYmRhTWVhbiA9IDI7CgkgICAgY29uc3QgbGFtYmRhU2hhcGUgPSAzOwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmdhbW1hKHN0YXRlLmxhbWJkYSwgbGFtYmRhU2hhcGUsIGxhbWJkYVNoYXBlIC8gbGFtYmRhTWVhbik7CgkgICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubGFtYmRhLCAwLCAxMCk7CgoJICAgIGNvbnN0IGdhbW1hTWVhbiA9IDAuNTsKCSAgICBjb25zdCBnYW1tYVNhbXBsZVNpemUgPSAyLjU7CgkgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuYmV0YShzdGF0ZS5nYW1tYSwgZ2FtbWFNZWFuICogZ2FtbWFTYW1wbGVTaXplLCAoMSAtIGdhbW1hTWVhbikgKiBnYW1tYVNhbXBsZVNpemUpOwoJICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmdhbW1hLCAwLCAxKTsKCgkgICAgY29uc3QgbHVjZU1lYW4gPSAyOwoJICAgIGNvbnN0IGx1Y2VTaGFwZSA9IDM7CgkgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuZ2FtbWEoc3RhdGUubHVjZSwgbHVjZVNoYXBlLCBsdWNlU2hhcGUgLyBsdWNlTWVhbik7CgkgICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubHVjZSwgMCwgMTAwKTsKCgkgICAgLy8gTGlrZWxpaG9vZAoJICAgIGRhdGEuZm9yRWFjaChjaG9pY2UgPT4gewoJICAgICAgLy8gVmFsdWVzCgkgICAgICBjb25zdCB2bCA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnhsLCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTsKCSAgICAgIGNvbnN0IHZ3ID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHcsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpOwoJICAgICAgY29uc3QgdnMgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54cywgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7CgoJICAgICAgLy8gUHJvYmFiaWxpdGllcwoJICAgICAgY29uc3Qgd3cgPSBDUFRNYXRoLnBnMncoY2hvaWNlLnB3LCBzdGF0ZS5nYW1tYSk7CgkgICAgICBjb25zdCB3bCA9IDEgLSB3dzsKCgkgICAgICAvLyBVdGlsaXRpZXMKCSAgICAgIGNvbnN0IHVnID0gd2wgKiB2bCArIHd3ICogdnc7CgkgICAgICBjb25zdCB1cyA9IHZzOwoKCSAgICAgIC8vIENob2ljZSBvZiBnYW1ibGUgb3Igc3VyZSBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uCgkgICAgICAvLyBMdWNlIGNob2ljZSBydWxlIGlzIHVzZWQgdG8gY29tcHV0ZSBwcm9iYWJpbGl0eSBvZiBnYW1ibGluZyEgKDAgPSBzdXJlLCAxID0gZ2FtYmxlKQoJICAgICAgY29uc3QgYmludmFsID0gMSAvICgxICsgTWF0aC5leHAoc3RhdGUubHVjZSAqICh1cyAtIHVnKSkpOwoKCSAgICAgIC8vIEFjdHVhbCByZXNwb25zZQoJICAgICAgY29uc3QgcmVzcG9uc2UgPSBjaG9pY2UucmVzcG9uc2UgPT09ICdzdXJlJyA/IDAgOiAxOwoJICAgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuYmVybihyZXNwb25zZSwgYmludmFsKTsKCSAgICB9KTsKCSAgICByZXR1cm4gbHA7CgkgIH07CgoJICAvLyBJbml0aWFsaXppbmcgdGhlIHNhbXBsZXIKCSAgY29uc3Qgc2FtcGxlciA9IG5ldyBtY21jRXhwb3J0cy5BbXdnU2FtcGxlcihwYXJhbXMsIGxvZ1Bvc3QsIGV2ZW50LmRhdGEpOwoJICAvLyBCdXJuaW5nIHNvbWUgc2FtcGxlcyB0byB0aGUgTUNNQyBnb2RzIGFuZCBzYW1wbGluZyA1MDAwIGRyYXdzCgkgIHNhbXBsZXIuYnVybigxMDAwKTsKCSAgY29uc3Qgc2FtcGxlcyA9IHNhbXBsZXIuc2FtcGxlKDUwMDApOwoKCSAgLy8gRXh0cmFjdCBzdW1tYXJ5IHN0YXRzCgkgIGNvbnN0IHJlc3VsdHMgPSB7CgkgICAgYWxwaGE6IG1lZGlhbihzYW1wbGVzLmFscGhhKSwKCSAgICBsYW1iZGE6IG1lZGlhbihzYW1wbGVzLmxhbWJkYSksCgkgICAgZ2FtbWE6IG1lZGlhbihzYW1wbGVzLmdhbW1hKSwKCSAgICBsdWNlOiBtZWRpYW4oc2FtcGxlcy5sdWNlKQoJICB9OwoJICBzZWxmLnBvc3RNZXNzYWdlKHsKCSAgICByZXN1bHRzOiByZXN1bHRzLAoJICAgIHNhbXBsZXM6IHNhbXBsZXMKCSAgfSk7Cgl9OwoKfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3B0LWZpdC13b3JrZXIuanMubWFwCgo=",AY="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3B0LWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9iYXllcy5qcy9kaXN0cmlidXRpb25zLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2JheWVzLmpzL21jbWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9zb3J0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tYXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL21pbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvcXVpY2tzZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3F1YW50aWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tZWRpYW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtem9vbS9zcmMvdHJhbnNmb3JtLmpzIiwiLi4vcHJvc3BlY3RhYmxlLW1hdGgvc3JjL2NwdC1tYXRoLmpzIiwiLi4vcHJvc3BlY3RhYmxlLW1hdGgvc3JjL2luZGV4LmpzIiwic3JjL2NvbXBvbmVudHMvY3B0LWZpdC13b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gQSBudW1iZXIgb2YgbG9nIHByb2JhYmlsaXR5IGRlbnNpdHkgZnVuY3Rpb25zIChQREYpLiBOYW1pbmcgYW5kIHBhcmFtZXRlcml6YXRpb25cbi8vIHNob3VsZCBtYXRjaCBSJ3MsIGV4Y2VwdCBmb3IgdGhhdCBhbGwgZnVuY3Rpb25zIHJlc2lkZSBpbiBhbiBsZCBvYmplY3QgKFxuLy8gYXMgaW4gXCJsb2cgZGVuc2l0eVwiKSwgc28gdG8gZ2V0IGEgbm9ybWFsIGxvZyBkZW5zaXR5IHlvdSB3b3VsZCB3cml0ZVxuLy8gbGQubm9ybSguLi4pLlxuLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0XG4vLyAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0Lykgd2hpY2ggaW5jbHVkZXMgUERGIGZvciBtYW55IGNvbW1vbiBwcm9iYWJpbGl0eVxuLy8gZGlzdHJpYnV0aW9ucy4gV2hhdCBJIGhhdmUgZG9uZSBpcyBvbmx5IHRvIGNvbnZlcnQgdGhlc2UgdG8gbG9nIFBERnMuXG5cbi8qXG5PcmlnaW5hbCB3b3JrIENvcHlyaWdodCAoYykgMjAxMyBqU3RhdFxuTW9kaWZpZWQgd29yayBDb3B5cmlnaHQgKGMpIDIwMTUgUmFzbXVzIELDpcOldGggXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cblxuXG4vLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanNcbi8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLFxuLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuXG4vLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWxcbi8vIG9iamVjdCBsZCAuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290LmxkID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuICAvLyBPYmplY3QgdG8gaG9sZCB0aGUgZnVuY3Rpb25zIHRvIGJlIGV4cG9ydGVkLlxuICB2YXIgbGQgID0ge307XG4gIFxuICAvLy8vLy8vLy8vIEhlbHBlciBmdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgdmFyIGxnYW1tYSA9IGZ1bmN0aW9uKHgpIHtcbiAgICB2YXIgaiA9IDA7XG4gICAgdmFyIGNvZiA9IFtcbiAgICAgIDc2LjE4MDA5MTcyOTQ3MTQ2LCAtODYuNTA1MzIwMzI5NDE2NzcsIDI0LjAxNDA5ODI0MDgzMDkxLFxuICAgICAgLTEuMjMxNzM5NTcyNDUwMTU1LCAwLjEyMDg2NTA5NzM4NjYxNzllLTIsIC0wLjUzOTUyMzkzODQ5NTNlLTVcbiAgICBdO1xuICAgIHZhciBzZXIgPSAxLjAwMDAwMDAwMDE5MDAxNTtcbiAgICB2YXIgeHgsIHksIHRtcDtcbiAgICB0bXAgPSAoeSA9IHh4ID0geCkgKyA1LjU7XG4gICAgdG1wIC09ICh4eCArIDAuNSkgKiBsb2codG1wKTtcbiAgICBmb3IgKDsgaiA8IDY7IGorKylcbiAgICAgIHNlciArPSBjb2Zbal0gLyArK3k7XG4gICAgcmV0dXJuIGxvZygyLjUwNjYyODI3NDYzMTAwMDUgKiBzZXIgLyB4eCkgLSB0bXA7XG4gIH07XG4gIGxkLmxnYW1tYSA9IGxnYW1tYTtcbiAgXG4gIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiBuIDwgMCA/IE5hTiA6IGxnYW1tYShuICsgMSk7XG4gIH07XG4gIGxkLmxmYWN0b3JpYWwgPSBsZmFjdG9yaWFsO1xuICBcbiAgdmFyIGxjaG9vc2UgPSBmdW5jdGlvbihuLCBrKXtcbiAgICByZXR1cm4gbGZhY3RvcmlhbChuKSAtIGxmYWN0b3JpYWwoaykgLSBsZmFjdG9yaWFsKG4gLSBrKTtcbiAgfTtcbiAgbGQubGNob29zZSA9IGxjaG9vc2U7XG4gIFxuICB2YXIgbGJldGEgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGxnYW1tYShhKSArIGxnYW1tYShiKSAtIGxnYW1tYShhICsgYik7XG4gIH07XG4gIGxkLmxiZXRhID0gbGJldGE7XG4gIFxuICB2YXIgbG9nICA9IE1hdGgubG9nO1xuICB2YXIgZXhwICA9IE1hdGguZXhwO1xuICB2YXIgYWJzICA9IE1hdGguYWJzO1xuICB2YXIgcG93ICA9IE1hdGgucG93O1xuICB2YXIgc3FydCA9IE1hdGguc3FydDtcbiAgdmFyIHBpICAgPSBNYXRoLlBJO1xuICBcbiAgLy8vLy8vLy8vLyBDb250aW5vdXMgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgbGQuYmV0YSA9IGZ1bmN0aW9uKHgsIHNoYXBlMSwgc2hhcGUyKSB7XG4gICAgaWYgKHggPiAxIHx8IHggPCAwKSB7XG4gICAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKHNoYXBlMSA9PT0gMSAmJiBzaGFwZTIgPT09IDEpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHNoYXBlMSAtIDEpICogbG9nKHgpICsgKHNoYXBlMiAtIDEpICogbG9nKDEgLSB4KSAtIGxiZXRhKHNoYXBlMSwgc2hhcGUyKTsgIFxuICAgIH1cbiAgfTtcbiAgXG4gIGxkLmNhdWNoeSA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHJldHVybiBsb2coc2NhbGUpIC0gbG9nKHBvdyh4IC0gbG9jYXRpb24sIDIpICsgcG93KHNjYWxlLCAyKSkgIC0gbG9nKHBpKTtcbiAgfTtcbiAgXG4gIGxkLm5vcm0gPSBmdW5jdGlvbih4LCBtZWFuLCBzZCkge1xuICAgICAgcmV0dXJuIC0wLjUgKiBsb2coMiAqIHBpKSAtbG9nKHNkKSAtIHBvdyh4IC0gbWVhbiwgMikgLyAoMiAqIHNkICogc2QpO1xuICB9O1xuXG4gIC8vIEEgYml2YXJpYXRlIE5vcm1hbCBkaXN0cmlidXRpb24gcGFyYW1ldGVyaXplZCBieSBhcnJheXMgb2YgdHdvIG1lYW5zIGFuZCBTRHMsIGFuZCBcbiAgLy8gdGhlIGNvcnJlbGF0aW9uLlxuICBsZC5iaXZhcm5vcm0gPSBmdW5jdGlvbih4LCBtZWFuLCBzZCwgY29ycikge1xuICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgK1xuICAgICAgICAgICAgcG93KHhbMV0gLSBtZWFuWzFdLCAyKSAvIHBvdyhzZFsxXSwgMikgLSBcbiAgICAgICAgICAgICgyICogY29yciAqICh4WzBdIC0gbWVhblswXSkgKiAoeFsxXSAtIG1lYW5bMV0pKSAvIChzZFswXSAqIHNkWzFdKTtcbiAgICB2YXIgbm9ybWFsaXppbmdfZmFjdG9yID0gLSggbG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuNSAqIGxvZygxIC0gcG93KGNvcnIsIDIpKSApOyBcbiAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSApICk7IFxuICAgIHJldHVybiBiaXZhcl9sb2dfZGVucztcbiAgfTtcbiAgXG5cbiAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHJldHVybiAoLWFicyh4IC0gbG9jYXRpb24pL3NjYWxlKSAtIGxvZygyICogc2NhbGUpO1xuICB9O1xuICBcbiAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7XG4gIFxuICBsZC5nYW1tYSA9IGZ1bmN0aW9uKHgsIHNoYXBlLCByYXRlKSB7XG4gICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7XG4gICAgaWYgKHggPCAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICBpZigoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgKSB7XG4gICAgICByZXR1cm4gLWxvZyhzY2FsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoc2hhcGUgLSAxKSAqIGxvZyh4KSAtIHggLyBzY2FsZSAtIGxnYW1tYShzaGFwZSkgLSBzaGFwZSAqIGxvZyhzY2FsZSk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbih4LCBzaGFwZSwgc2NhbGUpIHtcbiAgICAgIGlmICh4IDw9IDApIHtcbiAgICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtKHNoYXBlICsgMSkgKiBsb2coeCkgLSBzY2FsZSAvIHggLSBsZ2FtbWEoc2hhcGUpICsgc2hhcGUgKiBsb2coc2NhbGUpO1xuICAgIH07XG4gIFxuICBsZC5sbm9ybSA9ICBmdW5jdGlvbih4LCBtZWFubG9nLCBzZGxvZykge1xuICAgIGlmICh4IDw9IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiAtbG9nKHgpIC0gMC41ICogbG9nKDIgKiBwaSkgLSBsb2coc2Rsb2cpIC0gXG4gICAgICAgICAgICBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpO1xuICB9O1xuICBcbiAgbGQucGFyZXRvID0gZnVuY3Rpb24oeCwgc2NhbGUsIHNoYXBlKSB7XG4gICAgaWYgKHggPCBzY2FsZSkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTtcbiAgfTtcbiAgXG4gIGxkLnQgID0gIGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSwgZGYpIHtcbiAgICBkZiA9IGRmID4gMWUxMDAgPyAxZTEwMCA6IGRmO1xuICAgIHJldHVybiBsZ2FtbWEoKGRmICsgMSkvMikgLSBsZ2FtbWEoZGYvMikgLSBsb2coc3FydChwaSAqIGRmKSAqIHNjYWxlKSArXG4gICAgICAgICAgIGxvZyhwb3coMSArICgxL2RmKSAqIHBvdygoeCAtIGxvY2F0aW9uKS9zY2FsZSwgMiksIC0oZGYgKyAxKS8yKSk7XG4gIH07XG4gIFxuICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlXG4gIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIHdlaWJ1bGwgZGlzdHJpYnV0aW9uOiBcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmNcbiAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uKHgsIHNoYXBlLCBzY2FsZSkge1xuICAgIGlmICh4IDwgMCkgcmV0dXJuIC1JbmZpbml0eTtcbiAgICBpZih4ID09PSAwICYmIHNoYXBlIDwgMSkgcmV0dXJuIEluZmluaXR5O1xuICAgIHZhciB0bXAxID0gcG93KHggLyBzY2FsZSwgc2hhcGUgLSAxKTtcbiAgICB2YXIgdG1wMiA9IHRtcDEgKiAoeCAvIHNjYWxlKTtcblx0ICByZXR1cm4gLXRtcDIgKyBsb2coc2hhcGUgKiB0bXAxIC8gc2NhbGUpO1xuICB9O1xuICBcbiAgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZVxuICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSBsb2dpc3RpYyBkaXN0cmlidXRpb246IFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2NoL3Itc291cmNlL2Jsb2IvYjE1NmUzYTcxMTk2N2Y1ODEzMWUyM2MxYjFkYzFlYTkwZTJmMGM0My9zcmMvbm1hdGgvZGxvZ2lzLmNcbiAgbGQubG9naXMgPSBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUpIHtcbiAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpO1xuICAgIHZhciBlID0gZXhwKC14KTtcbiAgICB2YXIgZiA9IDEuMCArIGU7XG4gICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7ICAgIFxuICB9O1xuXG4gIGxkLmRpcmljaGxldCA9IGZ1bmN0aW9uKHgsIGFscGhhKSB7XG4gICAgdmFyIHN1bV9hbHBoYSA9IDA7XG4gICAgdmFyIHN1bV9sZ2FtbWFfYWxwaGEgPSAwO1xuICAgIHZhciBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggPSAwO1xuICAgIHZhciBuID0gYWxwaGEubGVuZ3RoO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIHN1bV9hbHBoYSArPSBhbHBoYVtpXTtcbiAgICAgIHN1bV9sZ2FtbWFfYWxwaGEgKz0gbGdhbW1hKGFscGhhW2ldKTtcbiAgICAgIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCArPSAoYWxwaGFbaV0gLSAxKSAqIGxvZyh4W2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGxnYW1tYShzdW1fYWxwaGEpIC0gc3VtX2xnYW1tYV9hbHBoYSArIHN1bV9hbHBoYV9zdWJfMV9sb2dfeDtcbiAgfTtcbiAgIFxuICAgIFxuICBsZC5leHAgPSBmdW5jdGlvbih4LCByYXRlKSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cocmF0ZSkgLXJhdGUgKiB4O1xuICB9O1xuICBcbiAgbGQudW5pZiA9IGZ1bmN0aW9uKHgsIG1pbiwgbWF4KSB7XG4gICAgICByZXR1cm4gKHggPCBtaW4gfHwgeCA+IG1heCkgPyAtSW5maW5pdHkgOiBsb2coMSAvIChtYXggLSBtaW4pKTtcbiAgfTtcbiAgXG4gIC8vLy8vLy8vLy8gRGlzY3JldGUgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBsZC5iZXJuID0gZnVuY3Rpb24oeCwgcHJvYikge1xuICAgICAgcmV0dXJuICEoeCA9PT0gMCB8fCB4ID09PSAxKSA/IC1JbmZpbml0eSA6IGxvZyh4ICogcHJvYiArICgxIC0geCkgKiAoMSAtIHByb2IpKTtcbiAgfTtcbiAgXG4gIGxkLmNhdCA9IGZ1bmN0aW9uKHgsIHByb2JzKSB7XG4gICAgaWYoeCA8IDEgfHwgeCA+IHByb2JzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxvZyggcHJvYnNbeCAtIDFdICk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQuYmlub20gPSBmdW5jdGlvbih4LCBzaXplLCBwcm9iKSB7XG4gICAgaWYoeCA+IHNpemUgfHwgeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKHByb2IgPT09IDAgfHwgcHJvYiA9PT0gMSkge1xuICAgICAgcmV0dXJuIChzaXplICogcHJvYikgPT09IHggPyAwIDogLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTtcbiAgfTtcbiAgXG4gIHZhciBtdWx0aW5vbSA9IGZ1bmN0aW9uKHgsIHByb2JzKSB7XG4gICAgdmFyIG4gPSB4Lmxlbmd0aDtcbiAgICB2YXIgc2l6ZSA9IDA7XG4gICAgdmFyIHRtcF90ZXJtID0gMDtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZihwcm9ic1tpXSA9PT0gMCkge1xuICAgICAgICBpZih4W2ldICE9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsgIFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaXplICs9IHhbaV07XG4gICAgICAgIHRtcF90ZXJtICs9IHhbaV0gKiBsb2cocHJvYnNbaV0pIC0gbGdhbW1hKHhbaV0gKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxnYW1tYShzaXplICsgMSkgKyB0bXBfdGVybSA7XG4gIH07XG4gIFxuICBsZC5uYmlub20gPSBmdW5jdGlvbih4LCBzaXplLCBwcm9iKSB7XG4gICAgaWYoeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpO1xuICB9O1xuICBcbiAgbGQuaHlwZXIgPSBmdW5jdGlvbih4LCBtLCBuLCBrKSB7XG4gICAgaWYoeCA8IDAgfHwgeCA+IGspIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2Uobiwgay14KSAtIGxjaG9vc2UobStuLCBrKTtcbiAgICB9XG4gIH07XG4gIFxuICBsZC5wb2lzID0gZnVuY3Rpb24oeCwgbGFtYmRhKSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cobGFtYmRhKSAqIHggLSBsYW1iZGEgLSBsZmFjdG9yaWFsKHgpO1xuICB9O1xuICBcbiAgcmV0dXJuIGxkO1xufSkpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanNcbi8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLFxuLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuXG4vLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWxcbi8vIG9iamVjdCBtY21jIC5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgIHJvb3QubWNtYyA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpe1xuXG4vLy8gVGhlIGFjdHVhbCBtb2R1bGUgY29kZSBzdGFydHMgaGVyZSAvLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgXG4gIFxuICAvLy8vLy8vLy8vIEhlbHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqL1xuICB2YXIgcnVuaWYgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKi9cbiAgdmFyIHJ1bmlmX2Rpc2NyZXRlID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkXG4gICAqICBieSBtZWFuIGFuZCBzZC4gXG4gICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovXG4gIHZhciBybm9ybSA9IGZ1bmN0aW9uKG1lYW4sIHNkKSB7XG4gICAgdmFyIHUsIHYsIHgsIHksIHE7XG4gICAgZG8ge1xuICAgICAgdSA9IE1hdGgucmFuZG9tKCk7XG4gICAgICB2ID0gMS43MTU2ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xuICAgICAgeCA9IHUgLSAwLjQ0OTg3MTtcbiAgICAgIHkgPSBNYXRoLmFicyh2KSArIDAuMzg2NTk1O1xuICAgICAgcSA9IHggKiB4ICsgeSAqICgwLjE5NjAwICogeSAtIDAuMjU0NzIgKiB4KTtcbiAgICB9IHdoaWxlIChxID4gMC4yNzU5NyAmJiAocSA+IDAuMjc4NDYgfHwgdiAqIHYgPiAtNCAqIE1hdGgubG9nKHUpICogdSAqIHUpKTtcbiAgICBcbiAgICByZXR1cm4gKHYgLyB1KSAqIHNkICsgbWVhbjtcbiAgfTtcbiAgXG4gIFxuICAvKiogUmV0dXJucyBhIGRlZXAgY2xvbmUgb2Ygc3JjLCBzb3J0IG9mLi4uIEl0IG9ubHkgY29waWVzIGEgbGltaXRlZFxuICAgKiBudW1iZXIgb2YgdHlwZXMgYW5kLCBmb3IgZXhhbXBsZSwgZnVuY3Rpb24gYXJlIG5vdCBjb3BpZWQuIFxuICAgKiBGcm9tIGh0dHA6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1jbG9uZVxuICAgKi9cbiAgdmFyIGRlZXBfY2xvbmUgPSBmdW5jdGlvbihzcmMpIHtcbiAgXHRmdW5jdGlvbiBtaXhpbihkZXN0LCBzb3VyY2UsIGNvcHlGdW5jKSB7XG4gIFx0XHR2YXIgbmFtZSwgcywgaSwgZW1wdHkgPSB7fTtcbiAgXHRcdGZvcihuYW1lIGluIHNvdXJjZSl7XG4gIFx0XHRcdC8vIHRoZSAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykgY29uZGl0aW9uIGF2b2lkcyBjb3B5aW5nIHByb3BlcnRpZXMgaW4gXCJzb3VyY2VcIlxuICBcdFx0XHQvLyBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlLlx0IEZvciBleGFtcGxlLCBpZiBkZXN0IGhhcyBhIGN1c3RvbSB0b1N0cmluZygpIG1ldGhvZCxcbiAgXHRcdFx0Ly8gZG9uJ3Qgb3ZlcndyaXRlIGl0IHdpdGggdGhlIHRvU3RyaW5nKCkgbWV0aG9kIHRoYXQgc291cmNlIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGVcbiAgXHRcdFx0cyA9IHNvdXJjZVtuYW1lXTtcbiAgXHRcdFx0aWYoIShuYW1lIGluIGRlc3QpIHx8IChkZXN0W25hbWVdICE9PSBzICYmICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSkpe1xuICBcdFx0XHRcdGRlc3RbbmFtZV0gPSBjb3B5RnVuYyA/IGNvcHlGdW5jKHMpIDogcztcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdFx0cmV0dXJuIGRlc3Q7XG4gIFx0fVxuICBcdGlmKCFzcmMgfHwgdHlwZW9mIHNyYyAhPSBcIm9iamVjdFwiIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpID09PSBcIltvYmplY3QgRnVuY3Rpb25dXCIpe1xuICBcdFx0Ly8gbnVsbCwgdW5kZWZpbmVkLCBhbnkgbm9uLW9iamVjdCwgb3IgZnVuY3Rpb25cbiAgXHRcdHJldHVybiBzcmM7XHQvLyBhbnl0aGluZ1xuICBcdH1cbiAgXHRpZihzcmMubm9kZVR5cGUgJiYgXCJjbG9uZU5vZGVcIiBpbiBzcmMpe1xuICBcdFx0Ly8gRE9NIE5vZGVcbiAgXHRcdHJldHVybiBzcmMuY2xvbmVOb2RlKHRydWUpOyAvLyBOb2RlXG4gIFx0fVxuICBcdGlmKHNyYyBpbnN0YW5jZW9mIERhdGUpe1xuICBcdFx0Ly8gRGF0ZVxuICBcdFx0cmV0dXJuIG5ldyBEYXRlKHNyYy5nZXRUaW1lKCkpO1x0Ly8gRGF0ZVxuICBcdH1cbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBSZWdFeHApe1xuICBcdFx0Ly8gUmVnRXhwXG4gIFx0XHRyZXR1cm4gbmV3IFJlZ0V4cChzcmMpOyAgIC8vIFJlZ0V4cFxuICBcdH1cbiAgXHR2YXIgciwgaSwgbDtcbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBBcnJheSl7XG4gIFx0XHQvLyBhcnJheVxuICBcdFx0ciA9IFtdO1xuICBcdFx0Zm9yKGkgPSAwLCBsID0gc3JjLmxlbmd0aDsgaSA8IGw7ICsraSl7XG4gIFx0XHRcdGlmKGkgaW4gc3JjKXtcbiAgXHRcdFx0XHRyLnB1c2goZGVlcF9jbG9uZShzcmNbaV0pKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHQvLyBnZW5lcmljIG9iamVjdHNcbiAgXHRcdHIgPSBzcmMuY29uc3RydWN0b3IgPyBuZXcgc3JjLmNvbnN0cnVjdG9yKCkgOiB7fTtcbiAgXHR9XG4gIFx0cmV0dXJuIG1peGluKHIsIHNyYywgZGVlcF9jbG9uZSk7XG4gIH07XG4gIFxuICAvKiogU3BlY2lhbGl6ZWQgY2xvbmUgZnVuY3Rpb24gdGhhdCBvbmx5IGNsb25lcyBzY2FsYXJzIGFuZCBuZXN0ZWQgYXJyYXlzIHdoZXJlXG4gICAqIGVhY2ggYXJyYXkgZWl0aGVyIGNvbnNpc3RzIG9mIGFsbCBhcnJheXMgb3IgYWxsIG51bWJlcnMuIFRoaXMgZnVuY3Rpb25cbiAgICogaXMgbWVhbnQgYXMgYSBmYXN0IHdheSBvZiBjbG9uaW5nIHBhcmFtZXRlciBkcmF3cyB3aXRoaW4gdGhlIG1jbWMgc2FtcGxpbmdcbiAgICogbG9vcC5cbiAgICovXG4gIHZhciBjbG9uZV9wYXJhbV9kcmF3ID0gZnVuY3Rpb24oeCkge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoeCkpIHtcbiAgICAgIGlmKEFycmF5LmlzQXJyYXkoeFswXSkpIHtcbiAgICAgICAgLy8geCBpcyBhbiBhcnJheSBvZiBhcnJheXMgc28gd2UgbmVlZCB0byBjbG9uZSBpdCByZWN1cnNpdmVseVxuICAgICAgICB2YXIgeF9jb3B5ID0gW107XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB4X2NvcHkucHVzaChjbG9uZV9wYXJhbV9kcmF3KHhbaV0pKTtcbiAgICAgICAgfSBcbiAgICAgICAgcmV0dXJuIHhfY29weTtcbiAgICAgIH0gZWxzZSB7IC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgYXJyYXlzIG9mIHNjYWxhcnNcbiAgICAgICAgcmV0dXJuIHguc2xpY2UoMCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHsgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXJcbiAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgbnVtYmVyLlxuICAgKi9cbiAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT0gXCJudW1iZXJcIiB8fCAodHlwZW9mIG9iamVjdCA9PSBcIm9iamVjdFwiICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIChwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsL25lc3RlZCkgYXJyYXkuXG4gICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLFxuICAgKiAgIFs1XSB3b3VsZCB5aWVsZCBhIDUgZWxlbWVudCBhcnJheSwgYW5kIFszLDNdIHdvdWxkIHlpZWxkIGEgMyBieSAzIG1hdHJpeC5cbiAgICogQHBhcmFtIGluaXQgLSBBIHZhbHVlIG9yIGEgZnVuY3Rpb24gdXNlZCB0byBmaWxsIGluIHRoZSBlYWNoIGVsZW1lbnQgaW5cbiAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIFxuICAgKiAgIGV2YWx1YXRlZCBvbmNlIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBpdCdzIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWQgdG9cbiAgICogICBmaWxsIGluIGVhY2ggZWxlbWVudC5cbiAgICogQGV4YW1wbGUgXG4gICAqIC8vIFRoZSBmb2xsb3dpbmcgd291bGQgcmV0dXJuIFtbMSwxXSxbMSwxXSxbMSwxXV1cbiAgICogY3JlYXRlX2FycmF5KFsyLDNdLCAxKVxuICAgKi9cbiAgdmFyIGNyZWF0ZV9hcnJheSA9IGZ1bmN0aW9uKGRpbSwgaW5pdCkge1xuICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoZGltWzBdKTtcbiAgICB2YXIgaTtcbiAgICBpZihkaW0ubGVuZ3RoID09IDEpIHsgLy8gRmlsbCBpdCB1cCB3aXRoIGluaXRcbiAgICAgIGlmKHR5cGVvZiBpbml0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBpbml0KCk7XG4gICAgICAgIH0gIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBpbml0O1xuICAgICAgICB9IFxuICAgICAgfVxuICAgIH0gZWxzZSBpZihkaW0ubGVuZ3RoID4gMSkge1xuICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gY3JlYXRlX2FycmF5KGRpbS5zbGljZSgxKSwgaW5pdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiY3JlYXRlX2FycmF5IGNhbid0IGNyZWF0ZSBhIGRpbWVuc2lvbmxlc3MgYXJyYXlcIjtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciBcbiAgICogZXhhbXBsZSwgYXJyYXlfZGltKCBbWzEsIDJdLCBbMSwgMl1dICkgc2hvdWxkIHJldHVybiBbMiwgMl1cbiAgICogQXNzdW1lcyB0aGF0IGFsbCBhcnJheXMgaW5zaWRlIGFub3RoZXIgYXJyYXkgYXJlIG9mIHRoZSBzYW1lIGxlbmd0aC5cbiAgICogQGV4YW1wbGVcbiAgICogLy8gU2hvdWxkIHJldHVybiBbNCwgMiwgMV1cbiAgICogYXJyYXlfZGltKGNyZWF0ZV9hcnJheShbNCwgMiwgMV0sIDApKVxuICAgKi9cbiAgdmFyIGFycmF5X2RpbSA9IGZ1bmN0aW9uKGEpIHtcbiAgICBpZihBcnJheS5pc0FycmF5KGFbMF0pKSB7XG4gICAgICByZXR1cm4gW2EubGVuZ3RoXS5jb25jYXQoYXJyYXlfZGltKGFbMF0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFthLmxlbmd0aF07XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0d28gYXJyYXlzIGFyZSBlcXVhbCBpbiB0aGUgc2Vuc2UgdGhhdCB0aGV5IGNvbnRhaW4gdGhlIHNhbWUgZWxlbWVudHNcbiAgICogYXMganVkZ2VkIGJ5IHRoZSBcIj09XCIgb3BlcmF0b3IuIFJldHVybnMgdHJ1ZSBvciBmYWxzZS5cbiAgICogQWRhcHRlZCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE0ODUzOTc0LzEwMDE4NDhcbiAgICovIFxuICB2YXIgYXJyYXlfZXF1YWwgPSBmdW5jdGlvbiAoYTEsIGEyKSB7XG4gICAgICBpZiAoYTEubGVuZ3RoICE9IGEyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhMS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5c1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGExW2ldKSAmJiBBcnJheS5pc0FycmF5KGEyW2ldKSkge1xuICAgICAgICAgICAgICAvLyByZWN1cnNlIGludG8gdGhlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgICAgICAgaWYgKCFhcnJheV9lcXVhbChhMVtpXSwgYTJbaV0pKSByZXR1cm4gZmFsc2U7ICAgICAgIFxuICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgIGVsc2UgaWYgKGExW2ldICE9IGEyW2ldKSB7IFxuICAgICAgICAgICAgICAvLyBXYXJuaW5nIC0gdHdvIGRpZmZlcmVudCBvYmplY3QgaW5zdGFuY2VzIHdpbGwgbmV2ZXIgYmUgZXF1YWw6IHt4OjIwfSAhPSB7eDoyMH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAgIFxuICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgfSAgICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRyYXZlcnNlcyBhIHBvc3NpYmx5IG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgXCJsZWFmIG5vZGVzXCIsIFxuICAgKiB0aGF0IGlzLCB2YWx1ZXMgdGhhdCBhcmUgbm90IGFycmF5cy4gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2FtZSBzaXplIGFzXG4gICAqIGEuXG4gICAqL1xuICB2YXIgbmVzdGVkX2FycmF5X2FwcGx5ID0gZnVuY3Rpb24oYSwgZnVuKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShhLmxlbmd0aCk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmdW4oYSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqIFJhbmRvbWl6aW5nIHRoZSBhcnJheSBlbGVtZW50IG9yZGVyIGluLXBsYWNlLiBVc2luZyBEdXJzdGVuZmVsZFxuICAgKiBzaHVmZmxlIGFsZ29yaXRobS4gQWRhcHRlZCBmcm9tIGhlcmU6IFxuICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4XG4gICAqL1xuICBmdW5jdGlvbiBzaHVmZmxlX2FycmF5KGFycmF5KSB7XG4gICAgICBmb3IgKHZhciBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTtcbiAgICAgICAgICBhcnJheVtpXSA9IGFycmF5W2pdO1xuICAgICAgICAgIGFycmF5W2pdID0gdGVtcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIERvZXMgdGhlIHNhbWUgdGhpbmcgYXMgbmVzdGVkX2FycmF5X2FwcGx5LCB0aGF0IGlzLCB0cmF2ZXJzZXMgYSBwb3NzaWJseVxuICAgKiBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsIFwibGVhZiBub2Rlc1wiIGFuZCByZXR1cm5zIGFuIGFycmF5IFxuICAgKiBvZiB0aGUgc2FtZSBzaXplIGFzIGEuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseVxuICAgKiBicmFuY2hlcyByYW5kb21seS5cbiAgICovXG4gIHZhciBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5ID0gZnVuY3Rpb24oYSwgZnVuKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgdmFyIGxlbiA9IGEubGVuZ3RoO1xuICAgICAgdmFyIGk7XG4gICAgICB2YXIgYXJyYXlfaXMgPSBbXTtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGFycmF5X2lzW2ldID0gaTtcbiAgICAgIH1cbiAgICAgIHNodWZmbGVfYXJyYXkoYXJyYXlfaXMpO1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgXG4gICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgYXJyYXlfaSA9IGFycmF5X2lzW2ldO1xuICAgICAgICByZXN1bHRbYXJyYXlfaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVthcnJheV9pXSwgZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmdW4oYSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIEFsbG93cyBhIHByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZnVsdHMgY2FuIGJlXG4gICAqIG92ZXJyaWRkZW4gYnkgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAqICBAcGFyYW0gb3B0aW9uX25hbWUgLSB0aGUgbmFtZSBvZiB0aGUgb3B0aW9uIGFzIGEgc3RyaW5nXG4gICAqICBAcGFyYW0gbXlfb3B0aW9ucyAtIGFuIG9wdGlvbiBvYmplY3QgdGhhdCBjb3VsZCBoYXZlIG9wdGlvbl9uYW1lIFxuICAgKiAgICBhcyBhIG1lbWJlci5cbiAgICogQHBhcmFtIGRlZmF1bF92YWx1ZSAtIGRlZnVsdCB2YWx1ZSB0aGF0IGlzIHJldHVybmVkIGlmIG9wdGlvbl9uYW1lIFxuICAgKiAgIGlzIG5vdCBkZWZpbmVkIGluIG15X29wdGlvbnMuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBteV9vcHRpb25zID0ge3BpOiAzLjE0MTU5fVxuICAgKiB2YXIgcGkgPSBnZXRfb3B0aW9uKFwicGlcIiwgbXlfb3B0aW9ucywgMy4xNClcbiAgICovXG4gIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuXG4gIC8vIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LiBGb3IgZXhhbXBsZTpcbiAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbihcInBpXCIsIG15X29wdGlvbnMsIDMuMTQpXG4gIHZhciBnZXRfb3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSkge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHJldHVybiBvcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbl9uYW1lKSAmJiBcbiAgICAgICAgICAgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IHVuZGVmaW5lZCAgJiYgXG4gICAgICAgICAgIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSBudWxsID8gb3B0aW9uc1tvcHRpb25fbmFtZV0gOiBkZWZhdWxfdmFsdWU7XG4gIH07XG4gIFxuICAvKiogVmVyc2lvbiBvZiBnZXRfb3B0aW9uIHdoZXJlIHRoZSBvcHRpb24gc2hvdWxkIGJlIGEgb25lIG9yIG11bHRpLWRpbWVuc2lvbmFsXG4gICAqIGFycmF5IGFuZCB3aGVyZSB0aGUgZGVmYXVsdCBjYW4gYmUgb3ZlcnJpZGRlbiBlaXRoZXIgYnkgYSBzY2FsYXIgb3IgYnkgYW4gYXJyYXkuXG4gICAqIElmIGl0J3MgYSBzY2FsYXIgdGhlIHRoYXQgc2NhbGFyIGlzIHVzZWQgdG8gaW5pdGlhbGl6ZSBhbiBhcnJheSB3aXRoIFxuICAgKiBkaW0gZGltZW5zaW9ucy5cbiAgICogXG4gICAqL1xuICB2YXIgZ2V0X211bHRpZGltX29wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkaW0sIGRlZmF1bF92YWx1ZSkge1xuICAgIHZhciB2YWx1ZSA9IGdldF9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSk7XG4gICAgIGlmKCEgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICB2YWx1ZSA9IGNyZWF0ZV9hcnJheShkaW0sIHZhbHVlKTtcbiAgICAgfSBcbiAgICAgaWYoISBhcnJheV9lcXVhbCggYXJyYXlfZGltKHZhbHVlKSwgZGltKSkge1xuICAgICAgIHRocm93IFwiVGhlIG9wdGlvbiBcIiArIG9wdGlvbl9uYW1lICsgXCIgaXMgb2YgZGltZW5zaW9uIFtcIiArIFxuICAgICAgICAgICAgIGFycmF5X2RpbSh2YWx1ZSkgKyBcIl0gYnV0IHNob3VsZCBiZSBbXCIgKyBkaW0gKyBcIl0uXCI7XG4gICAgfVxuICAgICByZXR1cm4gdmFsdWU7XG4gIH07XG4gIFxuICAvLy8vLy8vLy8vIEZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIG9iamVjdHMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgLyoqXG4gICAqIFJldHVybnMgYSBmaXhlZCAoc2FtZSBldmVyeSB0aW1lKSBudW1iZXIgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgICogYSBwYXJhbWV0ZXIgb2YgYSBjZXJ0YWluIHR5cGUsIHBvc3NpYmx5IHdpdGggbG93ZXIgYW5kIHVwcGVyIGJvdW5kcy5cbiAgICogVGhlIHBvc3NpbGUgdHlwZXMgYXJlIFwicmVhbFwiLCBcImludFwiLCBhbmQgXCJiaW5hcnlcIi5cbiAgICovXG4gIHZhciBwYXJhbV9pbml0X2ZpeGVkID0gZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB7XG4gICAgaWYobG93ZXIgPiB1cHBlcikge1xuICAgICAgdGhyb3cgXCJDYW4gbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIHdoZXJlIGxvd2VyIGJvdW5kID4gdXBwZXIgYm91bmRcIjtcbiAgICB9XG4gICAgaWYodHlwZSA9PT0gXCJyZWFsXCIpIHtcbiAgICAgIGlmKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiAwLjU7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gdXBwZXIgLSAwLjU7XG4gICAgICB9IGVsc2UgaWYodXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiBsb3dlciArIDAuNTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA8PSB1cHBlcikge1xuICAgICAgICByZXR1cm4gKGxvd2VyICsgdXBwZXIpIC8gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJpbnRcIikge1xuICAgICAgaWYobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gdXBwZXIgLSAxO1xuICAgICAgfSBlbHNlIGlmKHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gbG93ZXIgKyAxO1xuICAgICAgfSBlbHNlIGlmKGxvd2VyIDw9IHVwcGVyKXtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGxvd2VyICsgdXBwZXIpIC8gMik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiYmluYXJ5XCIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICB0aHJvdyBcIkNvdWxkIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciBvZiB0eXBlIFwiICsgdHlwZSArIFwiW1wiICsgbG93ZXIgKyBcIiwgXCIgKyB1cHBlciArIFwiXVwiO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIFxuICAgKiBhbmQgaW5pdGlhbGl6ZXMgbm9uLWluaXRpYWxpemVkIHBhcmFtZXRlcnMuIFRoaXMgbW9kaWZpZWQgdmVyc2lvbiBvZlxuICAgKiBwYXJhbXNfdG9fY29tcGxldGUgaXMgcmV0dXJuZWQgYXMgYSBkZWVwIGNvcHkgYW5kIG5vdCBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlXG4gICAqIGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikgdGhhdCBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIG51bWJlciBcbiAgICogKGxpa2UgcGFyYW1faW5pdF9maXhlZCwgZm9yIGV4YW1wbGUpLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcGFyYW1zID0geyBcIm11XCI6IHtcInR5cGVcIjogXCJyZWFsXCJ9IH1cbiAgICogcGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHBhcmFtcyk7XG4gICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOlxuICAgKiAvLyAge1wibXVcIjogeyBcInR5cGVcIjogXCJyZWFsXCIsIFwiZGltXCI6IFsxXSwgXCJ1cHBlclwiOiBJbmZpbml0eSxcbiAgICogLy8gICAgICAgICAgIFwibG93ZXJcIjogLUluZmluaXR5LCBcImluaXRcIjogMC41IH19XG4gICAqLyBcbiAgdmFyIGNvbXBsZXRlX3BhcmFtcyAgPSBmdW5jdGlvbihwYXJhbXNfdG9fY29tcGxldGUsIHBhcmFtX2luaXQpIHtcbiAgICB2YXIgcGFyYW1zID0gZGVlcF9jbG9uZShwYXJhbXNfdG9fY29tcGxldGUpO1xuICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7IGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtX25hbWUpKSBjb250aW51ZTtcbiAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1twYXJhbV9uYW1lXTtcbiAgICAgIGlmKCAhcGFyYW0uaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpKSB7XG4gICAgICAgIHBhcmFtLnR5cGUgPSBcInJlYWxcIjtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcImRpbVwiKSkge1xuICAgICAgICBwYXJhbS5kaW0gPSBbMV07XG4gICAgICB9XG4gICAgICBpZihpc19udW1iZXIocGFyYW0uZGltKSkge1xuICAgICAgICBwYXJhbS5kaW0gPSBbcGFyYW0uZGltXTtcbiAgICAgIH1cbiAgICAgIGlmKHBhcmFtLnR5cGUgPT0gXCJiaW5hcnlcIikge1xuICAgICAgICBwYXJhbS51cHBlciA9IDE7XG4gICAgICAgIHBhcmFtLmxvd2VyID0gMDtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcInVwcGVyXCIpKSB7XG4gICAgICAgIHBhcmFtLnVwcGVyID0gSW5maW5pdHk7XG4gICAgICB9XG4gICAgICBpZighcGFyYW0uaGFzT3duUHJvcGVydHkoXCJsb3dlclwiKSkge1xuICAgICAgICBwYXJhbS5sb3dlciA9IC1JbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYocGFyYW0uaGFzT3duUHJvcGVydHkoXCJpbml0XCIpKSB7XG4gICAgICAgIC8vIElmIHRoaXMgaXMganVzdCBhIG51bWJlciBvciBhIG5lc3RlZCBhcnJheSB3ZSBsZWF2ZSBpdCBhbG9uZSwgYnV0IGlmLi4uXG4gICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSAmJiB0eXBlb2YgcGFyYW0uaW5pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgLy8gcGFyYW0uaW5pdCBpcyBhIGZ1bmN0aW9uLCB1c2UgdGhhdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtLmluaXQoKTtcbiAgICAgICAgfSBlbHNlIGlmKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHtcbiAgICAgICAgLy8gV2UgaGF2ZSBhIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyIHdoZXJlIHRoZSBwYXJhbS5pbml0IGV4aXN0IGJ1dFxuICAgICAgICAvLyBpcyBub3QgYW4gYXJyYXkuIFRoZW4gYXNzdW1lIGl0IGlzIGEgbnVtYmVyIG9yIGEgZnVuY3Rpb24gYW5kIHVzZVxuICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBwYXJhbS5pbml0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gV2UgdXNlIHRoZSBkZWZhdWx0IGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLlxuICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbV9pbml0KHBhcmFtLnR5cGUsIHBhcmFtLmxvd2VyLCBwYXJhbS51cHBlcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfTtcbiAgXG4gIFxuICAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIFxuICAvKipcbiAgICogQGludGVyZmFjZVxuICAgKiBBIFN0ZXBwZXIgaXMgYW4gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBwdXNoaW5nIGFyb3VuZCBvbmVcbiAgICogb3IgbW9yZSBwYXJhbWV0ZXIgdmFsdWVzIGluIGEgc3RhdGUgYWNjb3JkaW5nIHRvIHRoZSBkaXN0cmlidXRpb25cbiAgICogZGVmaW5lZCBieSB0aGUgbG9nIHBvc3Rlcmlvci4gVGhpcyBkZWZpbmVzIHRoZSBTdGVwcGVyIFwiaW50ZXJmYWNlXCIsXG4gICAqIHdoZXJlIFwiaW50ZXJmYWNlXCIgbWVhbnMgdGhhdCBTdGVwcGVyIGRlZmluZXMgYSBjbGFzcyB0aGF0IGlzIG5ldmVyXG4gICAqIG1lYW50IHRvIGJlIGluc3RhbnRpYXRlZCwgYnV0IGp1c3QgdG8gYmUgc3ViY2xhc3NlZCBieSBzcGVjaWFsaXplZFxuICAgKiBzdGVwcGVyIGZ1bmN0aW9ucy5cbiAgICogQGludGVyZmFjZVxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiB7IFwidHlwZVwiOiBcInJlYWxcIiwgXCJkaW1cIjogWzFdLCBcInVwcGVyXCI6IEluZmluaXR5LCBcbiAgICogICBcImxvd2VyXCI6IC1JbmZpbml0eSwgXCJpbml0XCI6IDAuNSB9fVxuICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgYXJlIGV4cGVjdGVkIHRvIGJlIFwiY29tcGxldGVcIiwgdGhhdCBpcyxcbiAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycyBpbiBwYXJhbXNcbiAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzXG4gICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOlxuICAgKiAgIHttdTogMTAsIHNpZ21hOiA1LCBiZXRhOiBbMSwgMi41XX1cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGVcbiAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3RcbiAgICogICBzaG91bGQgY2hhbmdlIGlmIHRoZSB0aGUgdmFsdWVzIGluIHN0YXRlIGFyZSBjaGFuZ2VkLlxuICBcbiAgICovXG4gIHZhciBTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5sb2dfcG9zdCA9IGxvZ19wb3N0O1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBTaG91bGQgcmV0dXJuIHRoZSBuZXcgc3RhdGUsXG4gICAqIGJ1dCBpcyBtYWlubHkgY2FsbGVkIGZvciBpdCdzIHNpZGUgZWZmZWN0IG9mIG1ha2luZyBhIGNoYW5nZSBpbiB0aGVcbiAgICogc3RhdGUgb2JqZWN0LlxuICAgKi9cbiAgU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IFwiRXZlcnkgU3RlcHBlciBuZWVkIHRvIGltcGxlbWVudCBzdGVwKClcIjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgYWRhcHQgd2hpbGUgc3RlcHBpbmcuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gXG4gIH07XG4gIFxuICAvKipcbiAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGNlYXNlIGFkYXB0aW5nIHdoaWxlIHN0ZXBwaW5nLlxuICAgKi8gXG4gIFN0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gXG4gIH07XG4gIFxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmcgaW5mbyByZWdhcmRpbmcgdGhlIHN0ZXBwZXIuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIHN0ZXBwZXIuXG4gICAgcmV0dXJuIHt9O1xuICB9O1xuICBcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW5cbiAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiBcIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUNcIlxuICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKVxuICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhXG4gICAqIG51bWJlciBhbmQgbG9nX3NjYWxlIGRlZmluZXMgdGhlIHNjYWxlIG9mIHRoZSBwcm9wb3NhbCBzb21laG93LlxuICAqL1xuICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgZ2VuZXJhdGVfcHJvcG9zYWwpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggICE9IDEpIHtcbiAgICAgIHRocm93IFwiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgaWYoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgdGhyb3cgXCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjtcbiAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7XG4gICAgXG4gICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAgICAgPSBnZXRfb3B0aW9uKFwicHJvcF9sb2dfc2NhbGVcIiwgb3B0aW9ucywgMCk7XG4gICAgdGhpcy5iYXRjaF9zaXplICAgICAgICAgPSBnZXRfb3B0aW9uKFwiYmF0Y2hfc2l6ZVwiLCBvcHRpb25zLCA1MCk7XG4gICAgdGhpcy5tYXhfYWRhcHRhdGlvbiAgICAgPSBnZXRfb3B0aW9uKFwibWF4X2FkYXB0YXRpb25cIiwgb3B0aW9ucywgMC4zMyk7XG4gICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfb3B0aW9uKFwiaW5pdGlhbF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIDEuMCk7XG4gICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUgPSBnZXRfb3B0aW9uKFwidGFyZ2V0X2FjY2VwdF9yYXRlXCIsIG9wdGlvbnMsIDAuNDQpO1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgICAgICAgID0gZ2V0X29wdGlvbihcImlzX2FkYXB0aW5nXCIsIG9wdGlvbnMsIHRydWUpO1xuICAgIFxuICAgIHRoaXMuZ2VuZXJhdGVfcHJvcG9zYWwgPSBnZW5lcmF0ZV9wcm9wb3NhbDtcbiAgICBcbiAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwO1xuICAgIHRoaXMuYmF0Y2hfY291bnQgPSAwO1xuICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7ICBcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT25lZGltTWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtX3N0YXRlID0gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdO1xuICAgICAgdmFyIHBhcmFtX3Byb3Bvc2FsID0gdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgdGhpcy5wcm9wX2xvZ19zY2FsZSk7XG4gICAgICBpZihwYXJhbV9wcm9wb3NhbCA8IHRoaXMubG93ZXIgfHwgcGFyYW1fcHJvcG9zYWwgPiB0aGlzLnVwcGVyKSB7XG4gICAgICAgIC8vIE91dHNpZGUgb2YgbGltaXRzIG9mIHRoZSBwYXJhbWV0ZXIsIHJlamVjdCB0aGUgcHJvcG9zYWwgXG4gICAgICAgIC8vIGFuZCBzdGF5IGF0IHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAgfSBlbHNlIHsgLy8gbWFrZSBhIE1ldHJvcG9saXMgc3RlcFxuICAgICAgICB2YXIgY3Vycl9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gcGFyYW1fcHJvcG9zYWw7XG4gICAgICAgIHZhciBwcm9wX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgICAgICB2YXIgYWNjZXB0X3Byb2IgPSBNYXRoLmV4cChwcm9wX2xvZ19kZW5zIC0gY3Vycl9sb2dfZGVucyk7XG4gICAgICAgIGlmKGFjY2VwdF9wcm9iID4gTWF0aC5yYW5kb20oKSkge1xuICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWxcbiAgICAgICAgICBpZih0aGlzLmlzX2FkYXB0aW5nKSB0aGlzLmFjY2VwdGFuY2VfY291bnQrKyA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbVxuICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3N0YXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZih0aGlzLmlzX2FkYXB0aW5nKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiArKztcbiAgICAgICAgaWYodGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID49IHRoaXMuYmF0Y2hfc2l6ZSkgeyAvLyB0aGVuIGFkYXB0XG4gICAgICAgICAgdGhpcy5iYXRjaF9jb3VudCArKztcbiAgICAgICAgICB2YXIgbG9nX3NkX2FkanVzdG1lbnQgPSBcbiAgICAgICAgICAgIE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIFxuICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gLyBNYXRoLnNxcnQodGhpcy5iYXRjaF9jb3VudCkpO1xuICAgICAgICAgIGlmKHRoaXMuYWNjZXB0YW5jZV9jb3VudCAvIHRoaXMuYmF0Y2hfc2l6ZSA+IHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlICs9IGxvZ19zZF9hZGp1c3RtZW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlIC09IGxvZ19zZF9hZGp1c3RtZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwO1xuICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07XG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgPSB0cnVlO1xuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBmYWxzZTtcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BfbG9nX3NjYWxlOiB0aGlzLnByb3BfbG9nX3NjYWxlLFxuICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsXG4gICAgICBhY2NlcHRhbmNlX2NvdW50OiB0aGlzLmFjY2VwdGFuY2VfY291bnQsXG4gICAgICBpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uOiB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24sXG4gICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudFxuICAgIH07XG4gIH07XG4gIFxuICBcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHJldHVybmluZyBhIE5vcm1hbCBwcm9wb3NhbC5cbiAgICovXG4gIHZhciBub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHtcbiAgICByZXR1cm4gcm5vcm0ocGFyYW1fc3RhdGUgLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgUmVhbE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBub3JtYWxfcHJvcG9zYWwpO1xuICB9O1xuICBcbiAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICAvKipcbiAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2FsLlxuICAgKi9cbiAgdmFyIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHJub3JtKHBhcmFtX3N0YXRlICwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKSk7XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7XG4gIH07XG4gIFxuICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluXG4gICAqIHRoZSBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gXCJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DXCJcbiAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KSBmb3IgcG9zc2libHkgbXVsdGlkaW1lbnNpb25hbCBhcnJheXMuIFRoYXRcbiAgICogaXMsIGluc3RlYWQgb2YganVzdCB0YWtpbmcgYSBzdGVwIGZvciBhIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIgbGlrZSBcbiAgICogT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIsIHRoaXMgU3RlcHBlciBpcyByZXNwb25zaWJsZSBmb3IgdGFraW5nIHN0ZXBzIFxuICAgKiBmb3IgYSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5LiBJdCdzIHN0aWxsIHByZXR0eSBkdW1iIGFuZCBqdXN0IHRha2VzXG4gICAqIG9uZS1kaW1lbnNpb25hbCBzdGVwcyBmb3IgZWFjaCBwYXJhbWV0ZXIgY29tcG9uZW50LCB0aG91Z2guXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSBcbiAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgICogQHBhcmFtIFN1YlN0ZXBwZXIgLSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSBvZiBvbmUgZGltZW5zaW9uYWwgU3RlcHBlciB0byBhcHBseSBvblxuICAgKiAgIGFsbCB0aGUgY29tcG9uZW50cyBvZiB0aGUgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuXG4gICovXG4gIHZhciBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFN1YlN0ZXBwZXIpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggICE9IDEpIHtcbiAgICAgIHRocm93IFwiTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyO1xuICAgIHRoaXMudXBwZXIgPSBwYXJhbS51cHBlcjtcbiAgICB0aGlzLmRpbSA9IHBhcmFtLmRpbTtcbiAgXG4gICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwicHJvcF9sb2dfc2NhbGVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDApO1xuICAgIHRoaXMuYmF0Y2hfc2l6ZSAgICAgICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcImJhdGNoX3NpemVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDUwKTtcbiAgICB0aGlzLm1heF9hZGFwdGF0aW9uICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJtYXhfYWRhcHRhdGlvblwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMC4zMyk7XG4gICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiaW5pdGlhbF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAxLjApO1xuICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X211bHRpZGltX29wdGlvbihcInRhcmdldF9hY2NlcHRfcmF0ZVwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMC40NCk7XG4gICAgdGhpcy5pc19hZGFwdGluZyAgICAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiaXNfYWRhcHRpbmdcIiwgb3B0aW9ucywgdGhpcy5kaW0sIHRydWUpO1xuICAgIFxuICAgIC8vIFRoaXMgaGFjayBiZWxvdyBpcyBhIHJlY3Vyc2l2ZSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYW4gYXJyYXkgb2YgXG4gICAgLy8gb25lIGRpbWVuc2lvbmFsIHN0ZXBwZXJzIGFjY29yZGluZyB0byBkaW0uXG4gICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IFxuICAgICAgZnVuY3Rpb24oZGltLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlLCBiYXRjaF9zaXplLCBtYXhfYWRhcHRhdGlvbiwgaW5pdGlhbF9hZGFwdGF0aW9uLCB0YXJnZXRfYWNjZXB0X3JhdGUsIGlzX2FkYXB0aW5nKSB7XG4gICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTtcbiAgICAgIGlmKGRpbS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgdmFyIHN1Ym9wdGlvbnMgPSB7cHJvcF9sb2dfc2NhbGU6IHByb3BfbG9nX3NjYWxlW2ldLCBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLFxuICAgICAgICAgICAgbWF4X2FkYXB0YXRpb246IG1heF9hZGFwdGF0aW9uW2ldLCBpbml0aWFsX2FkYXB0YXRpb246IGluaXRpYWxfYWRhcHRhdGlvbltpXSxcbiAgICAgICAgICAgIHRhcmdldF9hY2NlcHRfcmF0ZTogdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZzogaXNfYWRhcHRpbmdbaV19O1xuICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307XG4gICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pO1xuICAgICAgICAgICAgc3VicGFyYW1baV0uZGltID0gWzFdOyAvLyBBcyB0aGlzIHNob3VsZCBub3cgYmUgYSBvbmUtZGltIHBhcmFtZXRlclxuICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWRcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBTdWJTdGVwcGVyKHN1YnBhcmFtLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHN1Ym9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCwgcHJvcF9sb2dfc2NhbGVbaV0sIFxuICAgICAgICAgICAgYmF0Y2hfc2l6ZVtpXSwgbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbltpXSwgdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZ1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdGVwcGVycztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBjcmVhdGVfc3Vic3RlcHBlcnModGhpcy5kaW0sIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSwgdGhpcy5sb2dfcG9zdCxcbiAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUsIHRoaXMuYmF0Y2hfc2l6ZSwgdGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24sXG4gICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7XG4gICAgXG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLlxuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtyZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7c3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtzdWJzdGVwcGVyLnN0b3BfYWRhcHRhdGlvbigpOyB9KTtcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtcbiAgICAgIHJldHVybiBzdWJzdGVwcGVyLmluZm8oKTsgXG4gICAgfSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgUmVhbE1ldHJvcG9saXNTdGVwcGVyKTtcbiAgfTtcbiAgXG4gIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqLyAgICBcbiAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgSW50TWV0cm9wb2xpc1N0ZXBwZXIpO1xuICB9O1xuICBcbiAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGEgc3RlcCBmb3IgYSBiaW5hcnkgcGFyYW1ldGVyLlxuICAgKiBUaGlzIGlzIGRvbmUgYnkgZXZhbHVhdGluZyB0aGUgbG9nIHBvc3RlcmlvciBmb3IgYm90aCBzdGF0ZXMgb2YgdGhlXG4gICAqIHBhcmFtZXRlciBhbmQgdGhlbiBzZWxlY3RpbmcgYSBzdGF0ZSByYW5kb21seSB3aXRoIHByb2JhYmlsaXR5IHJlbGF0aXZlIFxuICAgKiB0byB0aGUgcG9zdGVyaW9yIG9mIGVhY2ggc3RhdGUuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEJpbmFyeVN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgPT0gMSkge1xuICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiQmluYXJ5U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICB9O1xuICBcbiAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5U3RlcHBlcjtcbiAgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwO1xuICAgIHZhciB6ZXJvX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDE7XG4gICAgdmFyIG9uZV9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICB2YXIgbWF4X2xvZ19kZW5zID0gTWF0aC5tYXgoemVyb19sb2dfZGVucywgb25lX2xvZ19kZW5zKTtcbiAgICB6ZXJvX2xvZ19kZW5zIC09IG1heF9sb2dfZGVucztcbiAgICBvbmVfbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zO1xuICAgIHZhciB6ZXJvX3Byb2IgPSBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zIC0gTWF0aC5sb2coIE1hdGguZXhwKHplcm9fbG9nX2RlbnMpICsgTWF0aC5leHAob25lX2xvZ19kZW5zKSApICk7XG4gICAgaWYoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikge1xuICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC5cbiAgICByZXR1cm4gMTtcbiAgfTtcbiAgXG4gICAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogSnVzdCBsaWtlIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgdGhpcyBTdGVwcGVyIHRha2VzIGEgc3RlcHMgZm9yXG4gICAqIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgYnkgdXBkYXRpbmcgZWFjaCBjb21wb25lbnQgaW4gdHVybi4gVGhlIGRpZmZlcmVuY2VcbiAgICogaXMgdGhhdCB0aGlzIHN0ZXBwZXIgd29ya3Mgb24gYmluYXJ5IHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSBcbiAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgXG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgPT0gMSkge1xuICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdO1xuICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIFxuICAgIHZhciBjcmVhdGVfc3Vic3RlcHBlcnMgPSBcbiAgICAgIGZ1bmN0aW9uKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0KSB7XG4gICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTtcbiAgICAgIHZhciBpO1xuICAgICAgaWYoZGltLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTtcbiAgICAgICAgICBzdWJwYXJhbXNbaV0gPSBwYXJhbTtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBCaW5hcnlTdGVwcGVyKHN1YnBhcmFtcywgc3Vic3RhdGUsIGxvZ19wb3N0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdGVwcGVycztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBjcmVhdGVfc3Vic3RlcHBlcnModGhpcy5kaW0sIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSwgdGhpcy5sb2dfcG9zdCk7XG4gIH07XG4gIFxuICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyO1xuICBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLlxuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtyZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7IH0pO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogVGhpcyBzdGVwcGVyIGNhbiBiZSByZXNwb25zaWJsZSBmb3IgdGFraW5nIGEgc3RlcCBmb3Igb25lIG9yIG1vcmUgcGFyYW1ldGVycy5cbiAgICogRm9yIHJlYWwgYW5kIGludCBwYXJhbWV0ZXJzIGl0IHRha2VzIE1ldHJvcG9saXMgd2l0aGluIEdpYmJzIHN0ZXBzLCBhbmQgZm9yIFxuICAgKiBiaW5hcnkgcGFyYW1ldGVycyBpdCBkb2VzIGV2YWx1YXRlcyB0aGUgcG9zdGVyaW9yIGZvciBib3RoIHBhcmFtdGVyIHZhbHVlcyBhbmRcbiAgICogcmFuZG9tbHkgY2hhbmdlcyB0byBhIGNlcnRhaW4gdmFsdWUgcHJvcG9ydGlvbmFsbHkgdG8gdGhhdCB2YWx1ZSdzIHBvc3RlcmlvclxuICAgKiAodGhpcyBpcyBhbHNvIGRvbmUgZm9yIGVhY2ggcGFyYW1ldGVyLCBzbyBhbHNvIGEgKiB3aXRoaW4gR2liYnMgYXBwcm9hY2gpLlxuICAgKiBUaGlzIHN0ZXBwZXIgaXMgYWxzbyBhZGFwdGl2ZSBhbmQgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVyc1xuICAgKiBhcmUgbm90IHRvbyBoaWdoIGFuZCB0aGUgY29ycmVsYXRpb25zIGJldHdlZW4gcGFyYW1ldGVycyBhcmUgbG93LlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnNcbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEFtd2dTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgdGhpcy5zdWJzdGVwcGVycyA9IFtdO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV07XG4gICAgICB2YXIgU2VsZWN0U3RlcHBlcjtcbiAgICAgIHN3aXRjaCAocGFyYW0udHlwZSkge1xuICAgICAgICBjYXNlIFwicmVhbFwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImludFwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEludE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJiaW5hcnlcIjpcbiAgICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgXCJBbXdnU3RlcHBlciBjYW4ndCBoYW5kbGUgcGFyYW1ldGVyIFwiICsgdGhpcy5wYXJhbV9uYW1lc1tpXSAgK1wiIHdpdGggdHlwZSBcIiArIHBhcmFtLnR5cGU7IFxuICAgICAgfVxuICAgICAgdmFyIHBhcmFtX29iamVjdF93cmFwID0ge307XG4gICAgICBwYXJhbV9vYmplY3Rfd3JhcFt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHBhcmFtO1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB2YXIgcGFyYW1fb3B0aW9ucyA9IG9wdGlvbnMucGFyYW1zICYmIG9wdGlvbnMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dIHx8IHt9O1xuICAgICAgcGFyYW1fb3B0aW9ucy5wcm9wX2xvZ19zY2FsZSAgICAgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlICAgICB8fCBvcHRpb25zLnByb3BfbG9nX3NjYWxlOyBcbiAgICAgIHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSAgICAgICAgID0gcGFyYW1fb3B0aW9ucy5iYXRjaF9zaXplICAgICAgICAgfHwgb3B0aW9ucy5iYXRjaF9zaXplOyBcbiAgICAgIHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gICAgID0gcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiAgICAgfHwgb3B0aW9ucy5tYXhfYWRhcHRhdGlvbjtcbiAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247XG4gICAgICBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSA9IHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlIHx8IG9wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlOyBcbiAgICAgIHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgICAgICAgID0gcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyAgICAgICAgfHwgb3B0aW9ucy5pc19hZGFwdGluZzsgXG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldID0gbmV3IFNlbGVjdFN0ZXBwZXIocGFyYW1fb2JqZWN0X3dyYXAsIHN0YXRlLCBsb2dfcG9zdCwgcGFyYW1fb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU3RlcHBlcjtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGVwKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpO1xuICAgIH0gXG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmZvID0ge307XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGluZm9bdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnN1YnN0ZXBwZXJzW2ldLmluZm8oKTtcbiAgICB9XG4gICAgcmV0dXJuIGluZm87XG4gIH07XG4gIFxuICBcbiAgXG4gIC8vLy8vLy8vLy8vIFNhbXBsZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgXG4gICAvKipcbiAgICogQGludGVyZmFjZVxuICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYVxuICAvLyBTYW1wbGVyIGlzIGhlcmUgaXMgYSBjb252ZW5pZW5jZSBjbGFzcyB3aGVyZSBhbiBpbnN0YW5jZSBvZiBTYW1wbGVyXG4gIC8vIHNldHMgdXAgdGhlIFN0ZXBwZXJzLCBjaGVja3MgdGhlIHBhcmFtZXRlciBkZWZpbml0aW9uLFxuICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyIFwiaW50ZXJmYWNlXCIuXG4gICAqIEBpbnRlcmZhY2VcbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6XG4gICAqICAge1wibXVcIjoge1widHlwZVwiOiBcInJlYWxcIn0sIFwic2lnbWFcIjoge1widHlwZVwiOiBcInJlYWxcIiwgXCJsb3dlclwiID0gMH19XG4gICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgXCJjb21wbGV0ZVwiIGFuZCBwcm9wZXJ0aWVzXG4gICAqICAgbGVmdCBvdXQgKGxpa2UgbG93ZXIgYW5kIHVwcGVyKSB3aWxsIGJlIGZpbGxlZCBpbiBieSBkZWZhdWx0cy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmVcbiAgICogICBzdGF0ZSB3aWxsIGJlIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXRlIHdpdGggZWFjaCBwYXJhbWV0ZXIgYXMgYSBcbiAgICogICBrZXkgYW5kIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGFzIG51bWJlcnMgb3IgYXJyYXlzLiBGb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiAzLCBcInNpZ21hXCI6IDEuNX0uIFRoZSBkYXRhIGFyZ3VtZW50IHdpbGwgYmUgdGhlIHNhbWUgb2JqZWN0IGFzIFxuICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LlxuICAgKiBAcGFyYW0gZGF0YSAtIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBsb2dfcG9zdCBmdW5jdGlvblxuICAgKiAgIHdoZW4gc2FtcGxpbmcuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci5cbiAgICovXG4gIHZhciBTYW1wbGVyID0gZnVuY3Rpb24ocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykge1xuICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBcbiAgICAvLyBTZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyBpZiBub3QgcGFzc2VkIHRocm91Z2ggdGhlIG9wdGlvbnMgb2JqZWN0XG4gICAgdGhpcy5wYXJhbV9pbml0X2Z1biAgID0gZ2V0X29wdGlvbihcInBhcmFtX2luaXRfZnVuXCIsIG9wdGlvbnMsIHBhcmFtX2luaXRfZml4ZWQpO1xuICAgIHZhciB0aGlubmluZ19pbnRlcnZhbCA9IGdldF9vcHRpb24oXCJ0aGluXCIsIG9wdGlvbnMsIDEpO1xuICAgIHZhciBwYXJhbXNfdG9fbW9uaXRvciA9IGdldF9vcHRpb24oXCJtb25pdG9yXCIsIG9wdGlvbnMsIG51bGwpO1xuICAgIHRoaXMudGhpbih0aGlubmluZ19pbnRlcnZhbCk7XG4gICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIENvbXBsZXRpbmcgdGhlIHBhcmFtcyBhbmQgaW5pdGlhbGl6aW5nIHRoZSBzdGF0ZS5cbiAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7XG4gICAgdmFyIHN0YXRlID0ge307XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7XG4gICAgfVxuICAgIHRoaXMubG9nX3Bvc3QgPSBmdW5jdGlvbigpIHsgXG4gICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpO1xuICAgIH07XG4gICAgLy8gUnVubmluZyB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24gb25jZSBpbiBjYXNlIGl0IGZ1cnRoZXIgbW9kaWZpZXMgdGhlIHN0YXRlXG4gICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy5cbiAgICB0aGlzLmxvZ19wb3N0KCk7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpO1xuICB9O1xuICBcbiAgLyoqIFNob3VsZCByZXR1cm4gYSB2ZWN0b3Igb2Ygc3RlcHBlcnMgdGhhdCB3aGVuIGNhbGxlZCBcbiAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuXG4gICAqL1xuICBTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uKHN0YXRlLCBsb2dfcG9zdCl7XG4gICAgdGhyb3cgXCJFdmVyeSBTYW1wbGVyIG5lZWRzIHRvIGltcGxlbWVudCBjcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSgpXCI7XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgU2FtcGxlci5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtzdGF0ZTogdGhpcy5zdGF0ZSwgdGhpbjogdGhpcy50aGluLCBtb25pdG9yOiB0aGlzLm1vbml0b3IsXG4gICAgICAgICAgICBzdGVwcGVyczogdGhpcy5zdGVwcGVyc307XG4gIH07XG4gIFxuICAvKiogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFJldHVybnMgdGhlIG5ldyBzcGFjZVxuICAgKiBidXQgYWxzbyBtb2RpZmllcyB0aGUgc3RhdGUgaW4gcGxhY2UuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdGVwcGVycyk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RlcCgpO1xuICAgIH1cbiAgICBpZihPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5sZW5ndGggPiBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcykubGVuZ3RoKSB7XG4gICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2VcbiAgICAgIC8vIG5lZWQgdG8gcnVuIHRoZSBsb2dfcG9zdCBvbmNlIG1vcmUgaW4gb3JkZXIgdG8gc2V0IHRoZSBkZXJpdmVkIHF1YW50aXRpZXNcbiAgICAgIC8vIGZvciB0aGUgZmluYWwgcGFyYW1ldGVyIHN0YXRlXG4gICAgICB0aGlzLmxvZ19wb3N0KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIG5faXRlcmF0aW9ucyBzdGVwcyBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlIGFuZCByZXR1cm5zIHRoZW1cbiAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZTpcbiAgICoge211OiBbMSwgLTEsIDIsIDMsIC4uLl0sIHNpZ21hOiBbMSwgMiwgMiwgMSwgLi4uXX0uXG4gICAqIElmIHRoaW4gaXMgPiAxIHRoZW4gbl9pdGVyYXRpb25zIC8gdGhpbiBzYW1wbGVzIGFyZSByZXR1cm5lZC5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbihuX2l0ZXJhdGlvbnMpIHtcbiAgICAgIC8vIEluaXRpYWxpemluZyBjdXJyX3NhbXBsZSB3aGVyZSB0aGUgc2FtcGxlIGlzIGdvaW5nIHRvIGJlIHNhdmVkXG4gICAgICAvLyBhcyBhbiBvYmplY3QgY29udGFpbmluZyBvbmUgYXJyYXkgcGVyIHBhcmFtZXRlciB0byBiZSBtb25pdG9yZWQuXG4gICAgICB2YXIgaSwgaiwgbW9uaXRvcmVkX3BhcmFtcztcbiAgICAgIGlmKHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9PT0gbnVsbCkge1xuICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gdGhpcy5tb25pdG9yZWRfcGFyYW1zO1xuICAgICAgfVxuICAgICAgXG4gICAgICB2YXIgY3Vycl9zYW1wbGUgPSB7fTtcbiAgICAgIGZvcihqID0gMDsgaiA8IG1vbml0b3JlZF9wYXJhbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY3Vycl9zYW1wbGVbbW9uaXRvcmVkX3BhcmFtc1tqXV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZm9yKGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgaWYoaSAlIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPT09IDApIHtcbiAgICAgICAgICBmb3IoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBtb25pdG9yZWRfcGFyYW1zW2pdO1xuICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goIGNsb25lX3BhcmFtX2RyYXcodGhpcy5zdGF0ZVtwYXJhbV0pICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RlcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJfc2FtcGxlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIG5faXRlcmF0aW9uIHN0ZXBzIGluIHBhcmFtZXRlciBzcGFjZSBidXQgcmV0dXJucyBub3RoaW5nLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLmJ1cm4gPSBmdW5jdGlvbihuX2l0ZXJhdGlvbnMpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcCgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZXRzIHdoYXQgcGFyYW1ldGVycyBzaG91bGQgYmUgbW9uaXRvcmVkIGFuZCByZXR1cm5lZCB3aGVuIGNhbGxpbmdcbiAgICogc2FtcGxlLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbihwYXJhbXNfdG9fbW9uaXRvcikge1xuICAgICAgdGhpcy5tb25pdG9yZWRfcGFyYW1zID0gcGFyYW1zX3RvX21vbml0b3I7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyB0aGUgdGhpbm5pbmcuIEZvciBleGFtcGxlIHRoaW4gPT0gMTAgbWVhbnMgdGhhdCBldmVyeSAxMHRoIHBvc3RlcmlvclxuICAgKiBkcmF3IHdpbGwgYmUga2VwdC5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS50aGluID0gZnVuY3Rpb24odGhpbm5pbmdfaW50ZXJ2YWwpIHtcbiAgICB0aGlzLnRoaW5uaW5nX2ludGVydmFsID0gdGhpbm5pbmdfaW50ZXJ2YWw7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyBhZGFwdGF0aW9uIG9uLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBTZXRzIGFkYXB0YXRpb24gb2ZmLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1NhbXBsZXJ9XG4gICAqIFRoaXMgc2FtcGxlciB1c2VzIHRoZSBBbXdnU3RlcHBlciBhcyB0aGUgc3RlcHBlciBmdW5jdGlvbiB3aGljaCBpbXBsZW1lbnRzIHRoZSBcbiAgICogQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluIFwiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQ1wiXG4gICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkuIEFuIGFkaXRpb24gaXMgdGhhdCBpdCBoYW5kbGVzIGludCBwYXJhbWV0ZXJzXG4gICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgXG4gICAqIHZhbHVlIHByb3BvcnRpb25hbCB0byB0aGUgcG9zdGVyaW9yIG9mIHRoZSB0d28gcG9zc2libGUgc3RhdGVzIG9mIHRoZVxuICAgKiBwYXJhbWV0ZXIuIFRoaXMgc2FtcGxlciBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzXG4gICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIG9uZSBvciBtb3JlIHBhcmFtZXRlciBkZWZpbml0aW9uc1xuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQW13Z1NhbXBsZXIgPSBmdW5jdGlvbihwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7XG4gICAgU2FtcGxlci5jYWxsKHRoaXMsIHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpO1xuICB9O1xuICBcbiAgQW13Z1NhbXBsZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTYW1wbGVyLnByb3RvdHlwZSk7IFxuICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjtcbiAgXG4gIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKXtcbiAgICByZXR1cm4gWyBuZXcgQW13Z1N0ZXBwZXIocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIF07XG4gIH07XG4gIFxuICBcbiAgLy8gUmV0dXJuaW5nIHRoZSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgcHVibGljbHkgZXhwb3NlZCBieSB0aGlzIG1vZHVsZVxuICByZXR1cm4ge1xuICAgIHJ1bmlmOiBydW5pZixcbiAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsXG4gICAgcm5vcm06IHJub3JtLFxuICAgIHBhcmFtX2luaXRfZml4ZWQ6IHBhcmFtX2luaXRfZml4ZWQsIFxuICAgIGNvbXBsZXRlX3BhcmFtczogY29tcGxldGVfcGFyYW1zLCBcbiAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgSW50TWV0cm9wb2xpc1N0ZXBwZXI6IEludE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjogTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIEJpbmFyeVN0ZXBwZXI6IEJpbmFyeVN0ZXBwZXIsIFxuICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI6IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIsIFxuICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwgXG4gICAgQW13Z1NhbXBsZXI6IEFtd2dTYW1wbGVyXG4gIH07XG59KSk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA9PSBudWxsIHx8IGIgPT0gbnVsbCA/IE5hTiA6IGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbnVtYmVyKHgpIHtcbiAgcmV0dXJuIHggPT09IG51bGwgPyBOYU4gOiAreDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBudW1iZXJzKHZhbHVlcywgdmFsdWVvZikge1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmICh2YWx1ZSA9ICt2YWx1ZSkgPj0gdmFsdWUpIHtcbiAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgYXNjZW5kaW5nIGZyb20gXCIuL2FzY2VuZGluZy5qc1wiO1xuaW1wb3J0IHBlcm11dGUgZnJvbSBcIi4vcGVybXV0ZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzb3J0KHZhbHVlcywgLi4uRikge1xuICBpZiAodHlwZW9mIHZhbHVlc1tTeW1ib2wuaXRlcmF0b3JdICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWx1ZXMgaXMgbm90IGl0ZXJhYmxlXCIpO1xuICB2YWx1ZXMgPSBBcnJheS5mcm9tKHZhbHVlcyk7XG4gIGxldCBbZl0gPSBGO1xuICBpZiAoKGYgJiYgZi5sZW5ndGggIT09IDIpIHx8IEYubGVuZ3RoID4gMSkge1xuICAgIGNvbnN0IGluZGV4ID0gVWludDMyQXJyYXkuZnJvbSh2YWx1ZXMsIChkLCBpKSA9PiBpKTtcbiAgICBpZiAoRi5sZW5ndGggPiAxKSB7XG4gICAgICBGID0gRi5tYXAoZiA9PiB2YWx1ZXMubWFwKGYpKTtcbiAgICAgIGluZGV4LnNvcnQoKGksIGopID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIEYpIHtcbiAgICAgICAgICBjb25zdCBjID0gYXNjZW5kaW5nRGVmaW5lZChmW2ldLCBmW2pdKTtcbiAgICAgICAgICBpZiAoYykgcmV0dXJuIGM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmID0gdmFsdWVzLm1hcChmKTtcbiAgICAgIGluZGV4LnNvcnQoKGksIGopID0+IGFzY2VuZGluZ0RlZmluZWQoZltpXSwgZltqXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcGVybXV0ZSh2YWx1ZXMsIGluZGV4KTtcbiAgfVxuICByZXR1cm4gdmFsdWVzLnNvcnQoY29tcGFyZURlZmluZWQoZikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZURlZmluZWQoY29tcGFyZSA9IGFzY2VuZGluZykge1xuICBpZiAoY29tcGFyZSA9PT0gYXNjZW5kaW5nKSByZXR1cm4gYXNjZW5kaW5nRGVmaW5lZDtcbiAgaWYgKHR5cGVvZiBjb21wYXJlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjb21wYXJlIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICByZXR1cm4gKGEsIGIpID0+IHtcbiAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTtcbiAgICBpZiAoeCB8fCB4ID09PSAwKSByZXR1cm4geDtcbiAgICByZXR1cm4gKGNvbXBhcmUoYiwgYikgPT09IDApIC0gKGNvbXBhcmUoYSwgYSkgPT09IDApO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNjZW5kaW5nRGVmaW5lZChhLCBiKSB7XG4gIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1heCh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1heDtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbFxuICAgICAgICAgICYmIChtYXggPCB2YWx1ZSB8fCAobWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbFxuICAgICAgICAgICYmIChtYXggPCB2YWx1ZSB8fCAobWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pbih2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1pbjtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbFxuICAgICAgICAgICYmIChtaW4gPiB2YWx1ZSB8fCAobWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbFxuICAgICAgICAgICYmIChtaW4gPiB2YWx1ZSB8fCAobWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1pbjtcbn1cbiIsImltcG9ydCB7YXNjZW5kaW5nRGVmaW5lZCwgY29tcGFyZURlZmluZWR9IGZyb20gXCIuL3NvcnQuanNcIjtcblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvcXVpY2tzZWxlY3Rcbi8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBxdWlja3NlbGVjdChhcnJheSwgaywgbGVmdCA9IDAsIHJpZ2h0ID0gSW5maW5pdHksIGNvbXBhcmUpIHtcbiAgayA9IE1hdGguZmxvb3Ioayk7XG4gIGxlZnQgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIGxlZnQpKTtcbiAgcmlnaHQgPSBNYXRoLmZsb29yKE1hdGgubWluKGFycmF5Lmxlbmd0aCAtIDEsIHJpZ2h0KSk7XG5cbiAgaWYgKCEobGVmdCA8PSBrICYmIGsgPD0gcmlnaHQpKSByZXR1cm4gYXJyYXk7XG5cbiAgY29tcGFyZSA9IGNvbXBhcmUgPT09IHVuZGVmaW5lZCA/IGFzY2VuZGluZ0RlZmluZWQgOiBjb21wYXJlRGVmaW5lZChjb21wYXJlKTtcblxuICB3aGlsZSAocmlnaHQgPiBsZWZ0KSB7XG4gICAgaWYgKHJpZ2h0IC0gbGVmdCA+IDYwMCkge1xuICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7XG4gICAgICBjb25zdCBtID0gayAtIGxlZnQgKyAxO1xuICAgICAgY29uc3QgeiA9IE1hdGgubG9nKG4pO1xuICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7XG4gICAgICBjb25zdCBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTtcbiAgICAgIGNvbnN0IG5ld0xlZnQgPSBNYXRoLm1heChsZWZ0LCBNYXRoLmZsb29yKGsgLSBtICogcyAvIG4gKyBzZCkpO1xuICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTtcbiAgICAgIHF1aWNrc2VsZWN0KGFycmF5LCBrLCBuZXdMZWZ0LCBuZXdSaWdodCwgY29tcGFyZSk7XG4gICAgfVxuXG4gICAgY29uc3QgdCA9IGFycmF5W2tdO1xuICAgIGxldCBpID0gbGVmdDtcbiAgICBsZXQgaiA9IHJpZ2h0O1xuXG4gICAgc3dhcChhcnJheSwgbGVmdCwgayk7XG4gICAgaWYgKGNvbXBhcmUoYXJyYXlbcmlnaHRdLCB0KSA+IDApIHN3YXAoYXJyYXksIGxlZnQsIHJpZ2h0KTtcblxuICAgIHdoaWxlIChpIDwgaikge1xuICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qO1xuICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbaV0sIHQpIDwgMCkgKytpO1xuICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbal0sIHQpID4gMCkgLS1qO1xuICAgIH1cblxuICAgIGlmIChjb21wYXJlKGFycmF5W2xlZnRdLCB0KSA9PT0gMCkgc3dhcChhcnJheSwgbGVmdCwgaik7XG4gICAgZWxzZSArK2osIHN3YXAoYXJyYXksIGosIHJpZ2h0KTtcblxuICAgIGlmIChqIDw9IGspIGxlZnQgPSBqICsgMTtcbiAgICBpZiAoayA8PSBqKSByaWdodCA9IGogLSAxO1xuICB9XG5cbiAgcmV0dXJuIGFycmF5O1xufVxuXG5mdW5jdGlvbiBzd2FwKGFycmF5LCBpLCBqKSB7XG4gIGNvbnN0IHQgPSBhcnJheVtpXTtcbiAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgYXJyYXlbal0gPSB0O1xufVxuIiwiaW1wb3J0IG1heCBmcm9tIFwiLi9tYXguanNcIjtcbmltcG9ydCBtYXhJbmRleCBmcm9tIFwiLi9tYXhJbmRleC5qc1wiO1xuaW1wb3J0IG1pbiBmcm9tIFwiLi9taW4uanNcIjtcbmltcG9ydCBtaW5JbmRleCBmcm9tIFwiLi9taW5JbmRleC5qc1wiO1xuaW1wb3J0IHF1aWNrc2VsZWN0IGZyb20gXCIuL3F1aWNrc2VsZWN0LmpzXCI7XG5pbXBvcnQgbnVtYmVyLCB7bnVtYmVyc30gZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5pbXBvcnQge2FzY2VuZGluZ0RlZmluZWR9IGZyb20gXCIuL3NvcnQuanNcIjtcbmltcG9ydCBncmVhdGVzdCBmcm9tIFwiLi9ncmVhdGVzdC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHtcbiAgdmFsdWVzID0gRmxvYXQ2NEFycmF5LmZyb20obnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpKTtcbiAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpIHx8IGlzTmFOKHAgPSArcCkpIHJldHVybjtcbiAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gbWF4KHZhbHVlcyk7XG4gIHZhciBuLFxuICAgICAgaSA9IChuIC0gMSkgKiBwLFxuICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLFxuICAgICAgdmFsdWUwID0gbWF4KHF1aWNrc2VsZWN0KHZhbHVlcywgaTApLnN1YmFycmF5KDAsIGkwICsgMSkpLFxuICAgICAgdmFsdWUxID0gbWluKHZhbHVlcy5zdWJhcnJheShpMCArIDEpKTtcbiAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGlsZVNvcnRlZCh2YWx1ZXMsIHAsIHZhbHVlb2YgPSBudW1iZXIpIHtcbiAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpIHx8IGlzTmFOKHAgPSArcCkpIHJldHVybjtcbiAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuICt2YWx1ZW9mKHZhbHVlc1swXSwgMCwgdmFsdWVzKTtcbiAgaWYgKHAgPj0gMSkgcmV0dXJuICt2YWx1ZW9mKHZhbHVlc1tuIC0gMV0sIG4gLSAxLCB2YWx1ZXMpO1xuICB2YXIgbixcbiAgICAgIGkgPSAobiAtIDEpICogcCxcbiAgICAgIGkwID0gTWF0aC5mbG9vcihpKSxcbiAgICAgIHZhbHVlMCA9ICt2YWx1ZW9mKHZhbHVlc1tpMF0sIGkwLCB2YWx1ZXMpLFxuICAgICAgdmFsdWUxID0gK3ZhbHVlb2YodmFsdWVzW2kwICsgMV0sIGkwICsgMSwgdmFsdWVzKTtcbiAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGlsZUluZGV4KHZhbHVlcywgcCwgdmFsdWVvZiA9IG51bWJlcikge1xuICBpZiAoaXNOYU4ocCA9ICtwKSkgcmV0dXJuO1xuICBudW1iZXJzID0gRmxvYXQ2NEFycmF5LmZyb20odmFsdWVzLCAoXywgaSkgPT4gbnVtYmVyKHZhbHVlb2YodmFsdWVzW2ldLCBpLCB2YWx1ZXMpKSk7XG4gIGlmIChwIDw9IDApIHJldHVybiBtaW5JbmRleChudW1iZXJzKTtcbiAgaWYgKHAgPj0gMSkgcmV0dXJuIG1heEluZGV4KG51bWJlcnMpO1xuICB2YXIgbnVtYmVycyxcbiAgICAgIGluZGV4ID0gVWludDMyQXJyYXkuZnJvbSh2YWx1ZXMsIChfLCBpKSA9PiBpKSxcbiAgICAgIGogPSBudW1iZXJzLmxlbmd0aCAtIDEsXG4gICAgICBpID0gTWF0aC5mbG9vcihqICogcCk7XG4gIHF1aWNrc2VsZWN0KGluZGV4LCBpLCAwLCBqLCAoaSwgaikgPT4gYXNjZW5kaW5nRGVmaW5lZChudW1iZXJzW2ldLCBudW1iZXJzW2pdKSk7XG4gIGkgPSBncmVhdGVzdChpbmRleC5zdWJhcnJheSgwLCBpICsgMSksIChpKSA9PiBudW1iZXJzW2ldKTtcbiAgcmV0dXJuIGkgPj0gMCA/IGkgOiAtMTtcbn1cbiIsImltcG9ydCBxdWFudGlsZSwge3F1YW50aWxlSW5kZXh9IGZyb20gXCIuL3F1YW50aWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lZGlhbih2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgcmV0dXJuIHF1YW50aWxlKHZhbHVlcywgMC41LCB2YWx1ZW9mKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lZGlhbkluZGV4KHZhbHVlcywgdmFsdWVvZikge1xuICByZXR1cm4gcXVhbnRpbGVJbmRleCh2YWx1ZXMsIDAuNSwgdmFsdWVvZik7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gVHJhbnNmb3JtKGssIHgsIHkpIHtcbiAgdGhpcy5rID0gaztcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbn1cblxuVHJhbnNmb3JtLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRyYW5zZm9ybSxcbiAgc2NhbGU6IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gayA9PT0gMSA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuayAqIGssIHRoaXMueCwgdGhpcy55KTtcbiAgfSxcbiAgdHJhbnNsYXRlOiBmdW5jdGlvbih4LCB5KSB7XG4gICAgcmV0dXJuIHggPT09IDAgJiB5ID09PSAwID8gdGhpcyA6IG5ldyBUcmFuc2Zvcm0odGhpcy5rLCB0aGlzLnggKyB0aGlzLmsgKiB4LCB0aGlzLnkgKyB0aGlzLmsgKiB5KTtcbiAgfSxcbiAgYXBwbHk6IGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldO1xuICB9LFxuICBhcHBseVg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geCAqIHRoaXMuayArIHRoaXMueDtcbiAgfSxcbiAgYXBwbHlZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkgKiB0aGlzLmsgKyB0aGlzLnk7XG4gIH0sXG4gIGludmVydDogZnVuY3Rpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdO1xuICB9LFxuICBpbnZlcnRYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuICh4IC0gdGhpcy54KSAvIHRoaXMuaztcbiAgfSxcbiAgaW52ZXJ0WTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiAoeSAtIHRoaXMueSkgLyB0aGlzLms7XG4gIH0sXG4gIHJlc2NhbGVYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7XG4gIH0sXG4gIHJlc2NhbGVZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkuY29weSgpLmRvbWFpbih5LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WSwgdGhpcykubWFwKHkuaW52ZXJ0LCB5KSk7XG4gIH0sXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiKSBzY2FsZShcIiArIHRoaXMuayArIFwiKVwiO1xuICB9XG59O1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0gbmV3IFRyYW5zZm9ybSgxLCAwLCAwKTtcblxudHJhbnNmb3JtLnByb3RvdHlwZSA9IFRyYW5zZm9ybS5wcm90b3R5cGU7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybShub2RlKSB7XG4gIHdoaWxlICghbm9kZS5fX3pvb20pIGlmICghKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHJldHVybiBub2RlLl9fem9vbTtcbn1cbiIsIlxuLypcbiAgQ1BUTWF0aCBTdGF0aWMgQ2xhc3MgLSBOb3QgaW50ZW5kZWQgZm9yIGluc3RhbnRpYXRpb24hXG5cbiAgVmFyaWFibGVzOlxuICAgIHggPSBvYmplY3RpdmUgdmFsdWVcbiAgICB2ID0gc3ViamVjdGl2ZSB2YWx1ZVxuICAgIHAgPSBvYmplY3RpdmUgcHJvYmFiaWxpdHlcbiAgICB3ID0gc3ViamVjdGl2ZSBwcm9iYWJpbGl0eS9kZWNpc2lvbiB3ZWlnaHRcbiAgICB1ID0gc3ViamVjdGl2ZSB1dGlsaXR5XG5cbiAgICBhID0gYWxwaGEgKGN1cnZhdHVyZSBmb3IgdmFsdWUgZnVuY3Rpb24pXG4gICAgbCA9IGxhbWJkYSAobG9zcyBhdmVyc2lvbiBmb3IgdmFsdWUgZnVuY3Rpb24pXG4gICAgZyA9IGdhbW1hIChzZW5zaXRpdml0eSBmb3IgZGVjaXNpb24gd2VpZ2h0aW5nIGZ1bmN0aW9uKVxuXG4gIEVxdWF0aW9uczpcbiAgICB2ID0gaWYgKHggPj0gMCkgeF5hOyBpZiAoeCA8IDApIC1sICogKC14KV5hXG4gICAgYSA9IGlmICh4ID49IDApIGxvZyh2KSAvIGxvZyh4KTsgaWYgKHggPCAwKSAobG9nKC12KSAtIGxvZyhsKSkgLyBsb2coLXgpXG4gICAgbCA9IGlmICh4ID49IDApIDE7IGlmICh4IDwgMCkgLXYgLyAoLXgpXmFcblxuICAgIHcgPSBwXmcgLyAocF5nICsgKDEgLSBwKV5nKV4oMSAvIGcpXG5cbiAgICB1ID0gU3VtX24odl9uICogd19uKVxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENQVE1hdGgge1xuICBzdGF0aWMgeGFsMnYoeCwgYSwgbCkge1xuICAgIGlmICh4ID49IDApIHtcbiAgICAgIHJldHVybiB4ICoqIGE7XG4gICAgfVxuICAgIC8vIGVsc2UgKHggPCAwKVxuICAgIHJldHVybiAtbCAqICgoLXgpICoqIGEpO1xuICB9XG5cbiAgc3RhdGljIHhsdjJhKHgsIGwsIHYpIHtcbiAgICBpZiAoeCA+PSAwKSB7XG4gICAgICByZXR1cm4gTWF0aC5sb2codikgLyBNYXRoLmxvZyh4KTtcbiAgICB9XG4gICAgLy8gZWxzZSAoeCA8IDApXG4gICAgcmV0dXJuIChNYXRoLmxvZygtdikgLSBNYXRoLmxvZyhsKSkgLyBNYXRoLmxvZygteCk7XG4gIH1cblxuICBzdGF0aWMgeGF2MmwoeCwgYSwgdikge1xuICAgIGlmICh4ID49IDApIHtcbiAgICAgIHJldHVybiBOYU47XG4gICAgfVxuICAgIC8vIGVsc2UgKHggPCAwKVxuICAgIHJldHVybiAtdiAvICgoLXgpICoqIGEpO1xuICB9XG5cbiAgc3RhdGljIHBnMncocCwgZykge1xuICAgIHJldHVybiAocCAqKiBnKSAvICgoKHAgKiogZykgKyAoKDEgLSBwKSAqKiBnKSkgKiogKDEgLyBnKSk7XG4gIH1cblxuICBzdGF0aWMgdncydSh2LCB3KSB7XG4gICAgLy8gTnVtYmVyc1xuICAgIGlmICh0eXBlb2YgdiA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHcgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gdiAqIHc7XG4gICAgfVxuICAgIC8vIEFycmF5c1xuICAgIGlmICh2IGluc3RhbmNlb2YgQXJyYXkgJiYgdyBpbnN0YW5jZW9mIEFycmF5ICYmIHYubGVuZ3RoID4gMCAmJiB2Lmxlbmd0aCA9PT0gdy5sZW5ndGgpIHtcbiAgICAgIGxldCB1ID0gMDtcbiAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdi5sZW5ndGg7IG4gKz0gMSkge1xuICAgICAgICB1ICs9IHZbbl0gKiB3W25dO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHU7XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZVxuICAgIHJldHVybiBOYU47XG4gIH1cbn1cbiIsIlxuLy8gSW50ZXJuYWwgZGVwZW5kZW5jaWVzXG5pbXBvcnQgQ1BUTWF0aCBmcm9tICcuL2NwdC1tYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgQ1BUTWF0aDtcbiIsIi8qIGVzbGludCBuby1yZXN0cmljdGVkLWdsb2JhbHM6IFtcIm9mZlwiLCBcInNlbGZcIl0gKi9cblxuLy8gTmVlZGVkIGZvciBkMyBpbiBXZWJXb3JrZXIhXG5pbXBvcnQgJ3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSc7XG5cbmltcG9ydCAqIGFzIEJheWVzRGlzdHJpYnV0aW9ucyBmcm9tICdiYXllcy5qcy9kaXN0cmlidXRpb25zJztcbmltcG9ydCAqIGFzIEJheWVzTWNtYyBmcm9tICdiYXllcy5qcy9tY21jJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBDUFRNYXRoIGZyb20gJ0BkZWNpZGFibGVzL3Byb3NwZWN0YWJsZS1tYXRoJztcblxuc2VsZi5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIGFscGhhOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogMCwgdXBwZXI6IDF9LFxuICAgIGxhbWJkYToge3R5cGU6ICdyZWFsJywgbG93ZXI6IDAsIHVwcGVyOiAxMH0sXG4gICAgZ2FtbWE6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiAwLCB1cHBlcjogMX0sXG4gICAgbHVjZToge3R5cGU6ICdyZWFsJywgbG93ZXI6IDAsIHVwcGVyOiAxMDB9LFxuICB9O1xuXG4gIGNvbnN0IGxvZ1Bvc3QgPSAoc3RhdGUsIGRhdGEpID0+IHtcbiAgICBsZXQgbHAgPSAwO1xuXG4gICAgLy8gUHJpb3JzXG4gICAgY29uc3QgYWxwaGFNZWFuID0gMC41O1xuICAgIGNvbnN0IGFscGhhU2FtcGxlU2l6ZSA9IDIuNTtcbiAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuYmV0YShcbiAgICAgIHN0YXRlLmFscGhhLFxuICAgICAgYWxwaGFNZWFuICogYWxwaGFTYW1wbGVTaXplLFxuICAgICAgKDEgLSBhbHBoYU1lYW4pICogYWxwaGFTYW1wbGVTaXplLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuYWxwaGEsIDAsIDEpO1xuXG4gICAgY29uc3QgbGFtYmRhTWVhbiA9IDI7XG4gICAgY29uc3QgbGFtYmRhU2hhcGUgPSAzO1xuICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5nYW1tYShcbiAgICAgIHN0YXRlLmxhbWJkYSxcbiAgICAgIGxhbWJkYVNoYXBlLFxuICAgICAgbGFtYmRhU2hhcGUgLyBsYW1iZGFNZWFuLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubGFtYmRhLCAwLCAxMCk7XG5cbiAgICBjb25zdCBnYW1tYU1lYW4gPSAwLjU7XG4gICAgY29uc3QgZ2FtbWFTYW1wbGVTaXplID0gMi41O1xuICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5iZXRhKFxuICAgICAgc3RhdGUuZ2FtbWEsXG4gICAgICBnYW1tYU1lYW4gKiBnYW1tYVNhbXBsZVNpemUsXG4gICAgICAoMSAtIGdhbW1hTWVhbikgKiBnYW1tYVNhbXBsZVNpemUsXG4gICAgKTtcbiAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5nYW1tYSwgMCwgMSk7XG5cbiAgICBjb25zdCBsdWNlTWVhbiA9IDI7XG4gICAgY29uc3QgbHVjZVNoYXBlID0gMztcbiAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuZ2FtbWEoXG4gICAgICBzdGF0ZS5sdWNlLFxuICAgICAgbHVjZVNoYXBlLFxuICAgICAgbHVjZVNoYXBlIC8gbHVjZU1lYW4sXG4gICAgKTtcbiAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5sdWNlLCAwLCAxMDApO1xuXG4gICAgLy8gTGlrZWxpaG9vZFxuICAgIGRhdGEuZm9yRWFjaCgoY2hvaWNlKSA9PiB7XG4gICAgICAvLyBWYWx1ZXNcbiAgICAgIGNvbnN0IHZsID0gQ1BUTWF0aC54YWwydihjaG9pY2UueGwsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpO1xuICAgICAgY29uc3QgdncgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54dywgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7XG4gICAgICBjb25zdCB2cyA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnhzLCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTtcblxuICAgICAgLy8gUHJvYmFiaWxpdGllc1xuICAgICAgY29uc3Qgd3cgPSBDUFRNYXRoLnBnMncoY2hvaWNlLnB3LCBzdGF0ZS5nYW1tYSk7XG4gICAgICBjb25zdCB3bCA9IDEgLSB3dztcblxuICAgICAgLy8gVXRpbGl0aWVzXG4gICAgICBjb25zdCB1ZyA9IHdsICogdmwgKyB3dyAqIHZ3O1xuICAgICAgY29uc3QgdXMgPSB2cztcblxuICAgICAgLy8gQ2hvaWNlIG9mIGdhbWJsZSBvciBzdXJlIGlzIHNhbXBsZWQgZnJvbSBhIEJlcm5vdWxsaSBkaXN0cmlidXRpb25cbiAgICAgIC8vIEx1Y2UgY2hvaWNlIHJ1bGUgaXMgdXNlZCB0byBjb21wdXRlIHByb2JhYmlsaXR5IG9mIGdhbWJsaW5nISAoMCA9IHN1cmUsIDEgPSBnYW1ibGUpXG4gICAgICBjb25zdCBiaW52YWwgPSAxIC8gKDEgKyBNYXRoLmV4cChzdGF0ZS5sdWNlICogKHVzIC0gdWcpKSk7XG5cbiAgICAgIC8vIEFjdHVhbCByZXNwb25zZVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSAoY2hvaWNlLnJlc3BvbnNlID09PSAnc3VyZScpID8gMCA6IDE7XG5cbiAgICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5iZXJuKHJlc3BvbnNlLCBiaW52YWwpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxwO1xuICB9O1xuXG4gIC8vIEluaXRpYWxpemluZyB0aGUgc2FtcGxlclxuICBjb25zdCBzYW1wbGVyID0gbmV3IEJheWVzTWNtYy5BbXdnU2FtcGxlcihwYXJhbXMsIGxvZ1Bvc3QsIGV2ZW50LmRhdGEpO1xuICAvLyBCdXJuaW5nIHNvbWUgc2FtcGxlcyB0byB0aGUgTUNNQyBnb2RzIGFuZCBzYW1wbGluZyA1MDAwIGRyYXdzXG4gIHNhbXBsZXIuYnVybigxMDAwKTtcbiAgY29uc3Qgc2FtcGxlcyA9IHNhbXBsZXIuc2FtcGxlKDUwMDApO1xuXG4gIC8vIEV4dHJhY3Qgc3VtbWFyeSBzdGF0c1xuICBjb25zdCByZXN1bHRzID0ge1xuICAgIGFscGhhOiBkMy5tZWRpYW4oc2FtcGxlcy5hbHBoYSksXG4gICAgbGFtYmRhOiBkMy5tZWRpYW4oc2FtcGxlcy5sYW1iZGEpLFxuICAgIGdhbW1hOiBkMy5tZWRpYW4oc2FtcGxlcy5nYW1tYSksXG4gICAgbHVjZTogZDMubWVkaWFuKHNhbXBsZXMubHVjZSksXG4gIH07XG5cbiAgc2VsZi5wb3N0TWVzc2FnZSh7cmVzdWx0czogcmVzdWx0cywgc2FtcGxlczogc2FtcGxlc30pO1xufTtcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsIm1vZHVsZSIsImV4cG9ydHMiLCJsZCIsInRoaXMiLCJsZ2FtbWEiLCJ4IiwiaiIsImNvZiIsInNlciIsInh4IiwieSIsInRtcCIsImxvZyIsImxmYWN0b3JpYWwiLCJuIiwiTmFOIiwibGNob29zZSIsImsiLCJsYmV0YSIsImEiLCJiIiwiTWF0aCIsImV4cCIsImFicyIsInBvdyIsInNxcnQiLCJwaSIsIlBJIiwiYmV0YSIsInNoYXBlMSIsInNoYXBlMiIsIkluZmluaXR5IiwiY2F1Y2h5IiwibG9jYXRpb24iLCJzY2FsZSIsIm5vcm0iLCJtZWFuIiwic2QiLCJiaXZhcm5vcm0iLCJjb3JyIiwieiIsIm5vcm1hbGl6aW5nX2ZhY3RvciIsImJpdmFyX2xvZ19kZW5zIiwibGFwbGFjZSIsImRleHAiLCJnYW1tYSIsInNoYXBlIiwicmF0ZSIsImludmdhbW1hIiwibG5vcm0iLCJtZWFubG9nIiwic2Rsb2ciLCJwYXJldG8iLCJ0IiwiZGYiLCJ3ZWlidWxsIiwidG1wMSIsInRtcDIiLCJsb2dpcyIsImUiLCJmIiwiZGlyaWNobGV0IiwiYWxwaGEiLCJzdW1fYWxwaGEiLCJzdW1fbGdhbW1hX2FscGhhIiwic3VtX2FscGhhX3N1Yl8xX2xvZ194IiwibGVuZ3RoIiwiaSIsInVuaWYiLCJtaW4iLCJtYXgiLCJiZXJuIiwicHJvYiIsImNhdCIsInByb2JzIiwiYmlub20iLCJzaXplIiwibmJpbm9tIiwiaHlwZXIiLCJtIiwicG9pcyIsImxhbWJkYSIsIm1jbWMiLCJydW5pZiIsInJhbmRvbSIsInJ1bmlmX2Rpc2NyZXRlIiwiZmxvb3IiLCJybm9ybSIsInUiLCJ2IiwicSIsImRlZXBfY2xvbmUiLCJzcmMiLCJtaXhpbiIsImRlc3QiLCJzb3VyY2UiLCJjb3B5RnVuYyIsIm5hbWUiLCJzIiwiZW1wdHkiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJub2RlVHlwZSIsImNsb25lTm9kZSIsIkRhdGUiLCJnZXRUaW1lIiwiUmVnRXhwIiwiciIsImwiLCJBcnJheSIsInB1c2giLCJjb25zdHJ1Y3RvciIsImNsb25lX3BhcmFtX2RyYXciLCJpc0FycmF5IiwieF9jb3B5Iiwic2xpY2UiLCJpc19udW1iZXIiLCJvYmplY3QiLCJOdW1iZXIiLCJjcmVhdGVfYXJyYXkiLCJkaW0iLCJpbml0IiwiYXJyIiwiYXJyYXlfZGltIiwiY29uY2F0IiwiYXJyYXlfZXF1YWwiLCJhMSIsImEyIiwibmVzdGVkX2FycmF5X2FwcGx5IiwiZnVuIiwicmVzdWx0Iiwic2h1ZmZsZV9hcnJheSIsImFycmF5IiwidGVtcCIsIm5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkiLCJsZW4iLCJhcnJheV9pcyIsImFycmF5X2kiLCJnZXRfb3B0aW9uIiwib3B0aW9uX25hbWUiLCJvcHRpb25zIiwiZGVmYXVsX3ZhbHVlIiwiaGFzT3duUHJvcGVydHkiLCJ1bmRlZmluZWQiLCJnZXRfbXVsdGlkaW1fb3B0aW9uIiwidmFsdWUiLCJwYXJhbV9pbml0X2ZpeGVkIiwidHlwZSIsImxvd2VyIiwidXBwZXIiLCJyb3VuZCIsImNvbXBsZXRlX3BhcmFtcyIsInBhcmFtc190b19jb21wbGV0ZSIsInBhcmFtX2luaXQiLCJwYXJhbXMiLCJwYXJhbV9uYW1lIiwicGFyYW0iLCJTdGVwcGVyIiwic3RhdGUiLCJsb2dfcG9zdCIsInN0ZXAiLCJzdGFydF9hZGFwdGF0aW9uIiwic3RvcF9hZGFwdGF0aW9uIiwiaW5mbyIsIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIiwiZ2VuZXJhdGVfcHJvcG9zYWwiLCJwYXJhbV9uYW1lcyIsImtleXMiLCJwcm9wX2xvZ19zY2FsZSIsImJhdGNoX3NpemUiLCJtYXhfYWRhcHRhdGlvbiIsImluaXRpYWxfYWRhcHRhdGlvbiIsInRhcmdldF9hY2NlcHRfcmF0ZSIsImlzX2FkYXB0aW5nIiwiYWNjZXB0YW5jZV9jb3VudCIsImJhdGNoX2NvdW50IiwiaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiIsImNyZWF0ZSIsInBhcmFtX3N0YXRlIiwicGFyYW1fcHJvcG9zYWwiLCJjdXJyX2xvZ19kZW5zIiwicHJvcF9sb2dfZGVucyIsImFjY2VwdF9wcm9iIiwibG9nX3NkX2FkanVzdG1lbnQiLCJub3JtYWxfcHJvcG9zYWwiLCJSZWFsTWV0cm9wb2xpc1N0ZXBwZXIiLCJkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwiLCJJbnRNZXRyb3BvbGlzU3RlcHBlciIsIk11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJTdWJTdGVwcGVyIiwiY3JlYXRlX3N1YnN0ZXBwZXJzIiwic3Vic3RhdGUiLCJzdWJzdGVwcGVycyIsInN1Ym9wdGlvbnMiLCJzdWJwYXJhbSIsInN1YnN0ZXBwZXIiLCJNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciIsIk11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJCaW5hcnlTdGVwcGVyIiwiemVyb19sb2dfZGVucyIsIm9uZV9sb2dfZGVucyIsIm1heF9sb2dfZGVucyIsInplcm9fcHJvYiIsIkJpbmFyeUNvbXBvbmVudFN0ZXBwZXIiLCJzdWJwYXJhbXMiLCJBbXdnU3RlcHBlciIsIlNlbGVjdFN0ZXBwZXIiLCJwYXJhbV9vYmplY3Rfd3JhcCIsInBhcmFtX29wdGlvbnMiLCJTYW1wbGVyIiwiZGF0YSIsInBhcmFtX2luaXRfZnVuIiwidGhpbm5pbmdfaW50ZXJ2YWwiLCJwYXJhbXNfdG9fbW9uaXRvciIsInRoaW4iLCJtb25pdG9yIiwic3RlcHBlcnMiLCJjcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSIsInNhbXBsZSIsIm5faXRlcmF0aW9ucyIsIm1vbml0b3JlZF9wYXJhbXMiLCJjdXJyX3NhbXBsZSIsImJ1cm4iLCJBbXdnU2FtcGxlciIsImFzY2VuZGluZyIsIm51bWJlcnMiLCJ2YWx1ZXMiLCJ2YWx1ZW9mIiwiY29tcGFyZURlZmluZWQiLCJjb21wYXJlIiwiYXNjZW5kaW5nRGVmaW5lZCIsIlR5cGVFcnJvciIsInF1aWNrc2VsZWN0IiwibGVmdCIsInJpZ2h0IiwibmV3TGVmdCIsIm5ld1JpZ2h0Iiwic3dhcCIsInF1YW50aWxlIiwicCIsIkZsb2F0NjRBcnJheSIsImZyb20iLCJpc05hTiIsImkwIiwidmFsdWUwIiwic3ViYXJyYXkiLCJ2YWx1ZTEiLCJtZWRpYW4iLCJUcmFuc2Zvcm0iLCJ0cmFuc2xhdGUiLCJhcHBseSIsInBvaW50IiwiYXBwbHlYIiwiYXBwbHlZIiwiaW52ZXJ0IiwiaW52ZXJ0WCIsImludmVydFkiLCJyZXNjYWxlWCIsImNvcHkiLCJkb21haW4iLCJyYW5nZSIsIm1hcCIsInJlc2NhbGVZIiwiQ1BUTWF0aCIsInhhbDJ2IiwieGx2MmEiLCJ4YXYybCIsInBnMnciLCJnIiwidncydSIsInciLCJzZWxmIiwib25tZXNzYWdlIiwiZXZlbnQiLCJsdWNlIiwibG9nUG9zdCIsImxwIiwiYWxwaGFNZWFuIiwiYWxwaGFTYW1wbGVTaXplIiwiQmF5ZXNEaXN0cmlidXRpb25zIiwibGFtYmRhTWVhbiIsImxhbWJkYVNoYXBlIiwiZ2FtbWFNZWFuIiwiZ2FtbWFTYW1wbGVTaXplIiwibHVjZU1lYW4iLCJsdWNlU2hhcGUiLCJmb3JFYWNoIiwiY2hvaWNlIiwidmwiLCJ4bCIsInZ3IiwieHciLCJ2cyIsInhzIiwid3ciLCJwdyIsIndsIiwidWciLCJ1cyIsImJpbnZhbCIsInJlc3BvbnNlIiwic2FtcGxlciIsIkJheWVzTWNtYyIsInNhbXBsZXMiLCJyZXN1bHRzIiwiZDMiLCJwb3N0TWVzc2FnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0NBR0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7O0NBRUE7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7O0NBT0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0dBQ0MsQ0FBVUEsVUFBQUEsSUFBSSxFQUFFQyxPQUFPLEVBQUU7S0FJZixJQUFrQ0MsTUFBTSxDQUFDQyxPQUFPLEVBQUU7Q0FDN0Q7Q0FDQTtDQUNBO0NBQ1FELE1BQUFBLE1BQUEsQ0FBQUMsT0FBQSxHQUFpQkYsT0FBTyxFQUFFLENBQUE7Q0FDbEMsS0FBSyxNQUFNO0NBQ1g7Q0FDUUQsTUFBQUEsSUFBSSxDQUFDSSxFQUFFLEdBQUdILE9BQU8sRUFBRSxDQUFBO0NBQ3hCLEtBQUE7Q0FDSCxHQUFDLEVBQUNJLGNBQUksRUFBRSxZQUFXO0NBQ25CO0tBQ0UsSUFBSUQsRUFBRSxHQUFJLEVBQUUsQ0FBQTs7Q0FFZDtDQUNBOztDQUVFLElBQUEsSUFBSUUsTUFBTSxHQUFHLFVBQVNDLENBQUMsRUFBRTtPQUN2QixJQUFJQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0NBQ1QsTUFBQSxJQUFJQyxHQUFHLEdBQUcsQ0FDUixpQkFBaUIsRUFBRSxDQUFDLGlCQUFpQixFQUFFLGlCQUFpQixFQUN4RCxDQUFDLGlCQUFpQixFQUFFLHFCQUFxQixFQUFFLENBQUMsa0JBQWtCLENBQy9ELENBQUE7T0FDRCxJQUFJQyxHQUFHLEdBQUcsaUJBQWlCLENBQUE7Q0FDM0IsTUFBQSxJQUFJQyxFQUFFLEVBQUVDLENBQUMsRUFBRUMsR0FBRyxDQUFBO09BQ2RBLEdBQUcsR0FBRyxDQUFDRCxDQUFDLEdBQUdELEVBQUUsR0FBR0osQ0FBQyxJQUFJLEdBQUcsQ0FBQTtPQUN4Qk0sR0FBRyxJQUFJLENBQUNGLEVBQUUsR0FBRyxHQUFHLElBQUlHLEdBQUcsQ0FBQ0QsR0FBRyxDQUFDLENBQUE7Q0FDNUIsTUFBQSxPQUFPTCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFDZkUsR0FBRyxJQUFJRCxHQUFHLENBQUNELENBQUMsQ0FBQyxHQUFHLEVBQUVJLENBQUMsQ0FBQTtPQUNyQixPQUFPRSxHQUFHLENBQUMsa0JBQWtCLEdBQUdKLEdBQUcsR0FBR0MsRUFBRSxDQUFDLEdBQUdFLEdBQUcsQ0FBQTtNQUNoRCxDQUFBO0tBQ0RULEVBQUUsQ0FBQ0UsTUFBTSxHQUFHQSxNQUFNLENBQUE7Q0FFbEIsSUFBQSxJQUFJUyxVQUFVLEdBQUcsVUFBU0MsQ0FBQyxFQUFFO09BQzNCLE9BQU9BLENBQUMsR0FBRyxDQUFDLEdBQUdDLEdBQUcsR0FBR1gsTUFBTSxDQUFDVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7TUFDbkMsQ0FBQTtLQUNEWixFQUFFLENBQUNXLFVBQVUsR0FBR0EsVUFBVSxDQUFBO0NBRTFCLElBQUEsSUFBSUcsT0FBTyxHQUFHLFVBQVNGLENBQUMsRUFBRUcsQ0FBQyxFQUFDO0NBQzFCLE1BQUEsT0FBT0osVUFBVSxDQUFDQyxDQUFDLENBQUMsR0FBR0QsVUFBVSxDQUFDSSxDQUFDLENBQUMsR0FBR0osVUFBVSxDQUFDQyxDQUFDLEdBQUdHLENBQUMsQ0FBQyxDQUFBO01BQ3pELENBQUE7S0FDRGYsRUFBRSxDQUFDYyxPQUFPLEdBQUdBLE9BQU8sQ0FBQTtDQUVwQixJQUFBLElBQUlFLEtBQUssR0FBRyxVQUFTQyxDQUFDLEVBQUVDLENBQUMsRUFBRTtDQUN6QixNQUFBLE9BQU9oQixNQUFNLENBQUNlLENBQUMsQ0FBQyxHQUFHZixNQUFNLENBQUNnQixDQUFDLENBQUMsR0FBR2hCLE1BQU0sQ0FBQ2UsQ0FBQyxHQUFHQyxDQUFDLENBQUMsQ0FBQTtNQUM3QyxDQUFBO0tBQ0RsQixFQUFFLENBQUNnQixLQUFLLEdBQUdBLEtBQUssQ0FBQTtDQUVoQixJQUFBLElBQUlOLEdBQUcsR0FBSVMsSUFBSSxDQUFDVCxHQUFHLENBQUE7Q0FDbkIsSUFBQSxJQUFJVSxHQUFHLEdBQUlELElBQUksQ0FBQ0MsR0FBRyxDQUFBO0NBQ25CLElBQUEsSUFBSUMsR0FBRyxHQUFJRixJQUFJLENBQUNFLEdBQUcsQ0FBQTtDQUNuQixJQUFBLElBQUlDLEdBQUcsR0FBSUgsSUFBSSxDQUFDRyxHQUFHLENBQUE7Q0FDbkIsSUFBQSxJQUFJQyxJQUFJLEdBQUdKLElBQUksQ0FBQ0ksSUFBSSxDQUFBO0NBQ3BCLElBQUEsSUFBSUMsRUFBRSxHQUFLTCxJQUFJLENBQUNNLEVBQUUsQ0FBQTs7Q0FFcEI7Q0FDQTs7S0FFRXpCLEVBQUUsQ0FBQzBCLElBQUksR0FBRyxVQUFTdkIsQ0FBQyxFQUFFd0IsTUFBTSxFQUFFQyxNQUFNLEVBQUU7Q0FDcEMsTUFBQSxJQUFJekIsQ0FBQyxHQUFHLENBQUMsSUFBSUEsQ0FBQyxHQUFHLENBQUMsRUFBRTtDQUNoQixRQUFBLE9BQU8sQ0FBQzBCLFFBQVEsQ0FBQTtDQUNuQixPQUFBO0NBQ0QsTUFBQSxJQUFHRixNQUFNLEtBQUssQ0FBQyxJQUFJQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0NBQy9CLFFBQUEsT0FBTyxDQUFDLENBQUE7Q0FDZCxPQUFLLE1BQU07U0FDTCxPQUFPLENBQUNELE1BQU0sR0FBRyxDQUFDLElBQUlqQixHQUFHLENBQUNQLENBQUMsQ0FBQyxHQUFHLENBQUN5QixNQUFNLEdBQUcsQ0FBQyxJQUFJbEIsR0FBRyxDQUFDLENBQUMsR0FBR1AsQ0FBQyxDQUFDLEdBQUdhLEtBQUssQ0FBQ1csTUFBTSxFQUFFQyxNQUFNLENBQUMsQ0FBQTtDQUNqRixPQUFBO01BQ0YsQ0FBQTtLQUVENUIsRUFBRSxDQUFDOEIsTUFBTSxHQUFHLFVBQVMzQixDQUFDLEVBQUU0QixRQUFRLEVBQUVDLEtBQUssRUFBRTtPQUN2QyxPQUFPdEIsR0FBRyxDQUFDc0IsS0FBSyxDQUFDLEdBQUd0QixHQUFHLENBQUNZLEdBQUcsQ0FBQ25CLENBQUMsR0FBRzRCLFFBQVEsRUFBRSxDQUFDLENBQUMsR0FBR1QsR0FBRyxDQUFDVSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBSXRCLEdBQUcsQ0FBQ2MsRUFBRSxDQUFDLENBQUE7TUFDekUsQ0FBQTtLQUVEeEIsRUFBRSxDQUFDaUMsSUFBSSxHQUFHLFVBQVM5QixDQUFDLEVBQUUrQixJQUFJLEVBQUVDLEVBQUUsRUFBRTtDQUM1QixNQUFBLE9BQU8sQ0FBQyxHQUFHLEdBQUd6QixHQUFHLENBQUMsQ0FBQyxHQUFHYyxFQUFFLENBQUMsR0FBRWQsR0FBRyxDQUFDeUIsRUFBRSxDQUFDLEdBQUdiLEdBQUcsQ0FBQ25CLENBQUMsR0FBRytCLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUdDLEVBQUUsR0FBR0EsRUFBRSxDQUFDLENBQUE7TUFDeEUsQ0FBQTs7Q0FFSDtDQUNBO0tBQ0VuQyxFQUFFLENBQUNvQyxTQUFTLEdBQUcsVUFBU2pDLENBQUMsRUFBRStCLElBQUksRUFBRUMsRUFBRSxFQUFFRSxJQUFJLEVBQUU7Q0FDekMsTUFBQSxJQUFJQyxDQUFDLEdBQUdoQixHQUFHLENBQUNuQixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcrQixJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUdaLEdBQUcsQ0FBQ2EsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUN0Q2IsR0FBRyxDQUFDbkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHK0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHWixHQUFHLENBQUNhLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FDckMsQ0FBQyxHQUFHRSxJQUFJLElBQUlsQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcrQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSS9CLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRytCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFLQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0NBQzFFLE1BQUEsSUFBSUksa0JBQWtCLEdBQUcsRUFBRzdCLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBR0EsR0FBRyxDQUFDYyxFQUFFLENBQUMsR0FBR2QsR0FBRyxDQUFDeUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUd6QixHQUFHLENBQUN5QixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FDMUMsR0FBRyxHQUFHekIsR0FBRyxDQUFDLENBQUMsR0FBR1ksR0FBRyxDQUFDZSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBRSxDQUFBO0NBQ3pELE1BQUEsSUFBSUcsY0FBYyxHQUFHRCxrQkFBa0IsR0FBR0QsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUdoQixHQUFHLENBQUNlLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBRSxDQUFFLENBQUE7Q0FDeEUsTUFBQSxPQUFPRyxjQUFjLENBQUE7TUFDdEIsQ0FBQTtLQUdEeEMsRUFBRSxDQUFDeUMsT0FBTyxHQUFHLFVBQVN0QyxDQUFDLEVBQUU0QixRQUFRLEVBQUVDLEtBQUssRUFBRTtDQUN4QyxNQUFBLE9BQVEsQ0FBQ1gsR0FBRyxDQUFDbEIsQ0FBQyxHQUFHNEIsUUFBUSxDQUFDLEdBQUNDLEtBQUssR0FBSXRCLEdBQUcsQ0FBQyxDQUFDLEdBQUdzQixLQUFLLENBQUMsQ0FBQTtNQUNuRCxDQUFBO0NBRURoQyxJQUFBQSxFQUFFLENBQUMwQyxJQUFJLEdBQUcxQyxFQUFFLENBQUN5QyxPQUFPLENBQUE7S0FFcEJ6QyxFQUFFLENBQUMyQyxLQUFLLEdBQUcsVUFBU3hDLENBQUMsRUFBRXlDLEtBQUssRUFBRUMsSUFBSSxFQUFFO0NBQ2xDLE1BQUEsSUFBSWIsS0FBSyxHQUFHLENBQUMsR0FBR2EsSUFBSSxDQUFBO09BQ3BCLElBQUkxQyxDQUFDLEdBQUcsQ0FBQyxFQUFFO0NBQ1QsUUFBQSxPQUFPLENBQUMwQixRQUFRLENBQUE7Q0FDakIsT0FBQTtDQUNELE1BQUEsSUFBSTFCLENBQUMsS0FBSyxDQUFDLElBQUl5QyxLQUFLLEtBQUssQ0FBQyxFQUFJO0NBQzVCLFFBQUEsT0FBTyxDQUFDbEMsR0FBRyxDQUFDc0IsS0FBSyxDQUFDLENBQUE7Q0FDeEIsT0FBSyxNQUFNO1NBQ0wsT0FBTyxDQUFDWSxLQUFLLEdBQUcsQ0FBQyxJQUFJbEMsR0FBRyxDQUFDUCxDQUFDLENBQUMsR0FBR0EsQ0FBQyxHQUFHNkIsS0FBSyxHQUFHOUIsTUFBTSxDQUFDMEMsS0FBSyxDQUFDLEdBQUdBLEtBQUssR0FBR2xDLEdBQUcsQ0FBQ3NCLEtBQUssQ0FBQyxDQUFBO0NBQzdFLE9BQUE7TUFDRixDQUFBO0tBRURoQyxFQUFFLENBQUM4QyxRQUFRLEdBQUcsVUFBUzNDLENBQUMsRUFBRXlDLEtBQUssRUFBRVosS0FBSyxFQUFFO09BQ3BDLElBQUk3QixDQUFDLElBQUksQ0FBQyxFQUFFO0NBQ1YsUUFBQSxPQUFPLENBQUMwQixRQUFRLENBQUE7Q0FDakIsT0FBQTtPQUNELE9BQU8sRUFBRWUsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHbEMsR0FBRyxDQUFDUCxDQUFDLENBQUMsR0FBRzZCLEtBQUssR0FBRzdCLENBQUMsR0FBR0QsTUFBTSxDQUFDMEMsS0FBSyxDQUFDLEdBQUdBLEtBQUssR0FBR2xDLEdBQUcsQ0FBQ3NCLEtBQUssQ0FBQyxDQUFBO01BQzlFLENBQUE7S0FFSGhDLEVBQUUsQ0FBQytDLEtBQUssR0FBSSxVQUFTNUMsQ0FBQyxFQUFFNkMsT0FBTyxFQUFFQyxLQUFLLEVBQUU7T0FDdEMsSUFBSTlDLENBQUMsSUFBSSxDQUFDLEVBQUU7Q0FDVixRQUFBLE9BQU8sQ0FBQzBCLFFBQVEsQ0FBQTtDQUNqQixPQUFBO0NBQ0QsTUFBQSxPQUFPLENBQUNuQixHQUFHLENBQUNQLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBR08sR0FBRyxDQUFDLENBQUMsR0FBR2MsRUFBRSxDQUFDLEdBQUdkLEdBQUcsQ0FBQ3VDLEtBQUssQ0FBQyxHQUN2QzNCLEdBQUcsQ0FBQ1osR0FBRyxDQUFDUCxDQUFDLENBQUMsR0FBRzZDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUdDLEtBQUssR0FBR0EsS0FBSyxDQUFDLENBQUE7TUFDdkQsQ0FBQTtLQUVEakQsRUFBRSxDQUFDa0QsTUFBTSxHQUFHLFVBQVMvQyxDQUFDLEVBQUU2QixLQUFLLEVBQUVZLEtBQUssRUFBRTtPQUNwQyxJQUFJekMsQ0FBQyxHQUFHNkIsS0FBSyxFQUFFO0NBQ2IsUUFBQSxPQUFPLENBQUNILFFBQVEsQ0FBQTtDQUNqQixPQUFBO09BQ0QsT0FBT25CLEdBQUcsQ0FBQ2tDLEtBQUssQ0FBQyxHQUFHQSxLQUFLLEdBQUdsQyxHQUFHLENBQUNzQixLQUFLLENBQUMsR0FBRyxDQUFDWSxLQUFLLEdBQUcsQ0FBQyxJQUFJbEMsR0FBRyxDQUFDUCxDQUFDLENBQUMsQ0FBQTtNQUM5RCxDQUFBO0tBRURILEVBQUUsQ0FBQ21ELENBQUMsR0FBSyxVQUFTaEQsQ0FBQyxFQUFFNEIsUUFBUSxFQUFFQyxLQUFLLEVBQUVvQixFQUFFLEVBQUU7Q0FDeENBLE1BQUFBLEVBQUUsR0FBR0EsRUFBRSxHQUFHLEtBQUssR0FBRyxLQUFLLEdBQUdBLEVBQUUsQ0FBQTtPQUM1QixPQUFPbEQsTUFBTSxDQUFDLENBQUNrRCxFQUFFLEdBQUcsQ0FBQyxJQUFFLENBQUMsQ0FBQyxHQUFHbEQsTUFBTSxDQUFDa0QsRUFBRSxHQUFDLENBQUMsQ0FBQyxHQUFHMUMsR0FBRyxDQUFDYSxJQUFJLENBQUNDLEVBQUUsR0FBRzRCLEVBQUUsQ0FBQyxHQUFHcEIsS0FBSyxDQUFDLEdBQzlEdEIsR0FBRyxDQUFDWSxHQUFHLENBQUMsQ0FBQyxHQUFJLENBQUMsR0FBQzhCLEVBQUUsR0FBSTlCLEdBQUcsQ0FBQyxDQUFDbkIsQ0FBQyxHQUFHNEIsUUFBUSxJQUFFQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRW9CLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO01BQ3hFLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0tBQ0VwRCxFQUFFLENBQUNxRCxPQUFPLEdBQUcsVUFBU2xELENBQUMsRUFBRXlDLEtBQUssRUFBRVosS0FBSyxFQUFFO0NBQ3JDLE1BQUEsSUFBSTdCLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDMEIsUUFBUSxDQUFBO09BQzNCLElBQUcxQixDQUFDLEtBQUssQ0FBQyxJQUFJeUMsS0FBSyxHQUFHLENBQUMsRUFBRSxPQUFPZixRQUFRLENBQUE7T0FDeEMsSUFBSXlCLElBQUksR0FBR2hDLEdBQUcsQ0FBQ25CLENBQUMsR0FBRzZCLEtBQUssRUFBRVksS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFBO0NBQ3BDLE1BQUEsSUFBSVcsSUFBSSxHQUFHRCxJQUFJLElBQUluRCxDQUFDLEdBQUc2QixLQUFLLENBQUMsQ0FBQTtPQUM5QixPQUFPLENBQUN1QixJQUFJLEdBQUc3QyxHQUFHLENBQUNrQyxLQUFLLEdBQUdVLElBQUksR0FBR3RCLEtBQUssQ0FBQyxDQUFBO01BQ3hDLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0tBQ0VoQyxFQUFFLENBQUN3RCxLQUFLLEdBQUcsVUFBU3JELENBQUMsRUFBRTRCLFFBQVEsRUFBRUMsS0FBSyxFQUFFO09BQ3RDN0IsQ0FBQyxHQUFHa0IsR0FBRyxDQUFDLENBQUNsQixDQUFDLEdBQUc0QixRQUFRLElBQUlDLEtBQUssQ0FBQyxDQUFBO0NBQy9CLE1BQUEsSUFBSXlCLENBQUMsR0FBR3JDLEdBQUcsQ0FBQyxDQUFDakIsQ0FBQyxDQUFDLENBQUE7Q0FDZixNQUFBLElBQUl1RCxDQUFDLEdBQUcsR0FBRyxHQUFHRCxDQUFDLENBQUE7T0FDZixPQUFPLEVBQUV0RCxDQUFDLEdBQUdPLEdBQUcsQ0FBQ3NCLEtBQUssR0FBRzBCLENBQUMsR0FBR0EsQ0FBQyxDQUFDLENBQUMsQ0FBQTtNQUNqQyxDQUFBO0NBRUQxRCxJQUFBQSxFQUFFLENBQUMyRCxTQUFTLEdBQUcsVUFBU3hELENBQUMsRUFBRXlELEtBQUssRUFBRTtPQUNoQyxJQUFJQyxTQUFTLEdBQUcsQ0FBQyxDQUFBO09BQ2pCLElBQUlDLGdCQUFnQixHQUFHLENBQUMsQ0FBQTtPQUN4QixJQUFJQyxxQkFBcUIsR0FBRyxDQUFDLENBQUE7Q0FDN0IsTUFBQSxJQUFJbkQsQ0FBQyxHQUFHZ0QsS0FBSyxDQUFDSSxNQUFNLENBQUE7T0FDcEIsS0FBSSxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdyRCxDQUFDLEVBQUVxRCxDQUFDLEVBQUUsRUFBRTtDQUN6QkosUUFBQUEsU0FBUyxJQUFJRCxLQUFLLENBQUNLLENBQUMsQ0FBQyxDQUFBO0NBQ3JCSCxRQUFBQSxnQkFBZ0IsSUFBSTVELE1BQU0sQ0FBQzBELEtBQUssQ0FBQ0ssQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUNwQ0YsUUFBQUEscUJBQXFCLElBQUksQ0FBQ0gsS0FBSyxDQUFDSyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUl2RCxHQUFHLENBQUNQLENBQUMsQ0FBQzhELENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDcEQsT0FBQTtDQUNELE1BQUEsT0FBTy9ELE1BQU0sQ0FBQzJELFNBQVMsQ0FBQyxHQUFHQyxnQkFBZ0IsR0FBR0MscUJBQXFCLENBQUE7TUFDcEUsQ0FBQTtDQUdEL0QsSUFBQUEsRUFBRSxDQUFDb0IsR0FBRyxHQUFHLFVBQVNqQixDQUFDLEVBQUUwQyxJQUFJLEVBQUU7Q0FDdkIsTUFBQSxPQUFPMUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDMEIsUUFBUSxHQUFHbkIsR0FBRyxDQUFDbUMsSUFBSSxDQUFDLEdBQUVBLElBQUksR0FBRzFDLENBQUMsQ0FBQTtNQUNqRCxDQUFBO0tBRURILEVBQUUsQ0FBQ2tFLElBQUksR0FBRyxVQUFTL0QsQ0FBQyxFQUFFZ0UsR0FBRyxFQUFFQyxHQUFHLEVBQUU7Q0FDNUIsTUFBQSxPQUFRakUsQ0FBQyxHQUFHZ0UsR0FBRyxJQUFJaEUsQ0FBQyxHQUFHaUUsR0FBRyxHQUFJLENBQUN2QyxRQUFRLEdBQUduQixHQUFHLENBQUMsQ0FBQyxJQUFJMEQsR0FBRyxHQUFHRCxHQUFHLENBQUMsQ0FBQyxDQUFBO01BQ2pFLENBQUE7O0NBRUg7Q0FDQTs7Q0FFRW5FLElBQUFBLEVBQUUsQ0FBQ3FFLElBQUksR0FBRyxVQUFTbEUsQ0FBQyxFQUFFbUUsSUFBSSxFQUFFO0NBQ3hCLE1BQUEsT0FBTyxFQUFFbkUsQ0FBQyxLQUFLLENBQUMsSUFBSUEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMwQixRQUFRLEdBQUduQixHQUFHLENBQUNQLENBQUMsR0FBR21FLElBQUksR0FBRyxDQUFDLENBQUMsR0FBR25FLENBQUMsS0FBSyxDQUFDLEdBQUdtRSxJQUFJLENBQUMsQ0FBQyxDQUFBO01BQ2xGLENBQUE7Q0FFRHRFLElBQUFBLEVBQUUsQ0FBQ3VFLEdBQUcsR0FBRyxVQUFTcEUsQ0FBQyxFQUFFcUUsS0FBSyxFQUFFO09BQzFCLElBQUdyRSxDQUFDLEdBQUcsQ0FBQyxJQUFJQSxDQUFDLEdBQUdxRSxLQUFLLENBQUNSLE1BQU0sRUFBRTtDQUM1QixRQUFBLE9BQU8sQ0FBQ25DLFFBQVEsQ0FBQTtDQUN0QixPQUFLLE1BQU07U0FDTCxPQUFPbkIsR0FBRyxDQUFFOEQsS0FBSyxDQUFDckUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFFLENBQUE7Q0FDM0IsT0FBQTtNQUNGLENBQUE7S0FFREgsRUFBRSxDQUFDeUUsS0FBSyxHQUFHLFVBQVN0RSxDQUFDLEVBQUV1RSxJQUFJLEVBQUVKLElBQUksRUFBRTtDQUNqQyxNQUFBLElBQUduRSxDQUFDLEdBQUd1RSxJQUFJLElBQUl2RSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0NBQ3BCLFFBQUEsT0FBTyxDQUFDMEIsUUFBUSxDQUFBO0NBQ2pCLE9BQUE7Q0FDRCxNQUFBLElBQUd5QyxJQUFJLEtBQUssQ0FBQyxJQUFJQSxJQUFJLEtBQUssQ0FBQyxFQUFFO1NBQzNCLE9BQVFJLElBQUksR0FBR0osSUFBSSxLQUFNbkUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDMEIsUUFBUSxDQUFBO0NBQzNDLE9BQUE7T0FDRCxPQUFPZixPQUFPLENBQUM0RCxJQUFJLEVBQUV2RSxDQUFDLENBQUMsR0FBR0EsQ0FBQyxHQUFHTyxHQUFHLENBQUM0RCxJQUFJLENBQUMsR0FBRyxDQUFDSSxJQUFJLEdBQUd2RSxDQUFDLElBQUlPLEdBQUcsQ0FBQyxDQUFDLEdBQUc0RCxJQUFJLENBQUMsQ0FBQTtNQUNyRSxDQUFBO0tBbUJEdEUsRUFBRSxDQUFDMkUsTUFBTSxHQUFHLFVBQVN4RSxDQUFDLEVBQUV1RSxJQUFJLEVBQUVKLElBQUksRUFBRTtPQUNsQyxJQUFHbkUsQ0FBQyxHQUFHLENBQUMsRUFBRTtDQUNSLFFBQUEsT0FBTyxDQUFDMEIsUUFBUSxDQUFBO0NBQ2pCLE9BQUE7T0FDRCxPQUFPZixPQUFPLENBQUNYLENBQUMsR0FBR3VFLElBQUksR0FBRyxDQUFDLEVBQUVBLElBQUksR0FBRyxDQUFDLENBQUMsR0FBR3ZFLENBQUMsR0FBR08sR0FBRyxDQUFDLENBQUMsR0FBRzRELElBQUksQ0FBQyxHQUFHSSxJQUFJLEdBQUdoRSxHQUFHLENBQUM0RCxJQUFJLENBQUMsQ0FBQTtNQUM5RSxDQUFBO0tBRUR0RSxFQUFFLENBQUM0RSxLQUFLLEdBQUcsVUFBU3pFLENBQUMsRUFBRTBFLENBQUMsRUFBRWpFLENBQUMsRUFBRUcsQ0FBQyxFQUFFO0NBQzlCLE1BQUEsSUFBR1osQ0FBQyxHQUFHLENBQUMsSUFBSUEsQ0FBQyxHQUFHWSxDQUFDLEVBQUU7Q0FDakIsUUFBQSxPQUFPLENBQUNjLFFBQVEsQ0FBQTtDQUN0QixPQUFLLE1BQU07U0FDUCxPQUFPZixPQUFPLENBQUMrRCxDQUFDLEVBQUUxRSxDQUFDLENBQUMsR0FBR1csT0FBTyxDQUFDRixDQUFDLEVBQUVHLENBQUMsR0FBQ1osQ0FBQyxDQUFDLEdBQUdXLE9BQU8sQ0FBQytELENBQUMsR0FBQ2pFLENBQUMsRUFBRUcsQ0FBQyxDQUFDLENBQUE7Q0FDdkQsT0FBQTtNQUNGLENBQUE7Q0FFRGYsSUFBQUEsRUFBRSxDQUFDOEUsSUFBSSxHQUFHLFVBQVMzRSxDQUFDLEVBQUU0RSxNQUFNLEVBQUU7Q0FDMUIsTUFBQSxPQUFPNUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDMEIsUUFBUSxHQUFHbkIsR0FBRyxDQUFDcUUsTUFBTSxDQUFDLEdBQUc1RSxDQUFDLEdBQUc0RSxNQUFNLEdBQUdwRSxVQUFVLENBQUNSLENBQUMsQ0FBQyxDQUFBO01BQ3RFLENBQUE7Q0FFRCxJQUFBLE9BQU9ILEVBQUUsQ0FBQTtDQUNYLEdBQUMsQ0FBQyxDQUFBOzs7Ozs7OztDQzVSRjtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7R0FDQyxDQUFVSixVQUFBQSxJQUFJLEVBQUVDLE9BQU8sRUFBRTtLQUlmLElBQWtDQyxNQUFNLENBQUNDLE9BQU8sRUFBRTtDQUM3RDtDQUNBO0NBQ0E7Q0FDUUQsTUFBQUEsTUFBQSxDQUFBQyxPQUFBLEdBQWlCRixPQUFPLEVBQUUsQ0FBQTtDQUNsQyxLQUFLLE1BQU07Q0FDWDtDQUNRRCxNQUFBQSxJQUFJLENBQUNvRixJQUFJLEdBQUduRixPQUFPLEVBQUUsQ0FBQTtDQUMxQixLQUFBO0NBQ0gsR0FBQyxFQUFDSSxjQUFJLEVBQUUsWUFBVTtDQUVsQjtDQUNBOztDQUVBO0NBQ0E7O0NBRUE7Q0FDRSxJQUFBLElBQUlnRixLQUFLLEdBQUcsVUFBU2QsR0FBRyxFQUFFQyxHQUFHLEVBQUU7T0FDN0IsT0FBT2pELElBQUksQ0FBQytELE1BQU0sRUFBRSxJQUFJZCxHQUFHLEdBQUdELEdBQUcsQ0FBQyxHQUFHQSxHQUFHLENBQUE7TUFDekMsQ0FBQTs7Q0FFSDtDQUNFLElBQUEsSUFBSWdCLGNBQWMsR0FBRyxVQUFTaEIsR0FBRyxFQUFFQyxHQUFHLEVBQUU7Q0FDdEMsTUFBQSxPQUFPakQsSUFBSSxDQUFDaUUsS0FBSyxDQUFDakUsSUFBSSxDQUFDK0QsTUFBTSxFQUFFLElBQUlkLEdBQUcsR0FBR0QsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUdBLEdBQUcsQ0FBQTtNQUN6RCxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSWtCLEtBQUssR0FBRyxVQUFTbkQsSUFBSSxFQUFFQyxFQUFFLEVBQUU7T0FDN0IsSUFBSW1ELENBQUMsRUFBRUMsQ0FBQyxFQUFFcEYsQ0FBQyxFQUFFSyxDQUFDLEVBQUVnRixDQUFDLENBQUE7T0FDakIsR0FBRztDQUNERixRQUFBQSxDQUFDLEdBQUduRSxJQUFJLENBQUMrRCxNQUFNLEVBQUUsQ0FBQTtTQUNqQkssQ0FBQyxHQUFHLE1BQU0sSUFBSXBFLElBQUksQ0FBQytELE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFBO1NBQ2xDL0UsQ0FBQyxHQUFHbUYsQ0FBQyxHQUFHLFFBQVEsQ0FBQTtTQUNoQjlFLENBQUMsR0FBR1csSUFBSSxDQUFDRSxHQUFHLENBQUNrRSxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUE7Q0FDMUJDLFFBQUFBLENBQUMsR0FBR3JGLENBQUMsR0FBR0EsQ0FBQyxHQUFHSyxDQUFDLElBQUksT0FBTyxHQUFHQSxDQUFDLEdBQUcsT0FBTyxHQUFHTCxDQUFDLENBQUMsQ0FBQTtRQUM1QyxRQUFRcUYsQ0FBQyxHQUFHLE9BQU8sS0FBS0EsQ0FBQyxHQUFHLE9BQU8sSUFBSUQsQ0FBQyxHQUFHQSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUdwRSxJQUFJLENBQUNULEdBQUcsQ0FBQzRFLENBQUMsQ0FBQyxHQUFHQSxDQUFDLEdBQUdBLENBQUMsQ0FBQyxFQUFBO0NBRXpFLE1BQUEsT0FBUUMsQ0FBQyxHQUFHRCxDQUFDLEdBQUluRCxFQUFFLEdBQUdELElBQUksQ0FBQTtNQUMzQixDQUFBOztDQUdIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0UsSUFBQSxJQUFJdUQsVUFBVSxHQUFHLFVBQVNDLEdBQUcsRUFBRTtDQUM5QixNQUFBLFNBQVNDLEtBQUtBLENBQUNDLElBQUksRUFBRUMsTUFBTSxFQUFFQyxRQUFRLEVBQUU7Q0FDdEMsUUFBQSxJQUFJQyxJQUFJLENBQUE7V0FBRUMsQ0FBQyxDQUFBO1dBQUtDLEtBQUssR0FBRyxHQUFFO1NBQzFCLEtBQUlGLElBQUksSUFBSUYsTUFBTSxFQUFDO0NBQ3ZCO0NBQ0E7Q0FDQTtDQUNLRyxVQUFBQSxDQUFDLEdBQUdILE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLENBQUE7V0FDaEIsSUFBRyxFQUFFQSxJQUFJLElBQUlILElBQUksQ0FBQyxJQUFLQSxJQUFJLENBQUNHLElBQUksQ0FBQyxLQUFLQyxDQUFDLEtBQUssRUFBRUQsSUFBSSxJQUFJRSxLQUFLLENBQUMsSUFBSUEsS0FBSyxDQUFDRixJQUFJLENBQUMsS0FBS0MsQ0FBQyxDQUFFLEVBQUM7YUFDbkZKLElBQUksQ0FBQ0csSUFBSSxDQUFDLEdBQUdELFFBQVEsR0FBR0EsUUFBUSxDQUFDRSxDQUFDLENBQUMsR0FBR0EsQ0FBQyxDQUFBO0NBQ3ZDLFdBQUE7Q0FDRCxTQUFBO0NBQ0QsUUFBQSxPQUFPSixJQUFJLENBQUE7Q0FDWCxPQUFBO09BQ0QsSUFBRyxDQUFDRixHQUFHLElBQUksT0FBT0EsR0FBRyxJQUFJLFFBQVEsSUFBSVEsTUFBTSxDQUFDQyxTQUFTLENBQUNDLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDWCxHQUFHLENBQUMsS0FBSyxtQkFBbUIsRUFBQztDQUNwRztTQUNJLE9BQU9BLEdBQUcsQ0FBQztDQUNYLE9BQUE7Q0FDRCxNQUFBLElBQUdBLEdBQUcsQ0FBQ1ksUUFBUSxJQUFJLFdBQVcsSUFBSVosR0FBRyxFQUFDO0NBQ3pDO0NBQ0ksUUFBQSxPQUFPQSxHQUFHLENBQUNhLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztDQUMzQixPQUFBO09BQ0QsSUFBR2IsR0FBRyxZQUFZYyxJQUFJLEVBQUM7Q0FDMUI7U0FDSSxPQUFPLElBQUlBLElBQUksQ0FBQ2QsR0FBRyxDQUFDZSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0NBQy9CLE9BQUE7T0FDRCxJQUFHZixHQUFHLFlBQVlnQixNQUFNLEVBQUM7Q0FDNUI7Q0FDSSxRQUFBLE9BQU8sSUFBSUEsTUFBTSxDQUFDaEIsR0FBRyxDQUFDLENBQUM7Q0FDdkIsT0FBQTtDQUNELE1BQUEsSUFBSWlCLENBQUMsRUFBRTFDLENBQUMsRUFBRTJDLENBQUMsQ0FBQTtPQUNYLElBQUdsQixHQUFHLFlBQVltQixLQUFLLEVBQUM7Q0FDM0I7Q0FDSUYsUUFBQUEsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtDQUNOLFFBQUEsS0FBSTFDLENBQUMsR0FBRyxDQUFDLEVBQUUyQyxDQUFDLEdBQUdsQixHQUFHLENBQUMxQixNQUFNLEVBQUVDLENBQUMsR0FBRzJDLENBQUMsRUFBRSxFQUFFM0MsQ0FBQyxFQUFDO1dBQ3JDLElBQUdBLENBQUMsSUFBSXlCLEdBQUcsRUFBQzthQUNYaUIsQ0FBQyxDQUFDRyxJQUFJLENBQUNyQixVQUFVLENBQUNDLEdBQUcsQ0FBQ3pCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUMxQixXQUFBO0NBQ0QsU0FBQTtDQUNMLE9BQUksTUFBTTtDQUNWO0NBQ0kwQyxRQUFBQSxDQUFDLEdBQUdqQixHQUFHLENBQUNxQixXQUFXLEdBQUcsSUFBSXJCLEdBQUcsQ0FBQ3FCLFdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQTtDQUNoRCxPQUFBO0NBQ0QsTUFBQSxPQUFPcEIsS0FBSyxDQUFDZ0IsQ0FBQyxFQUFFakIsR0FBRyxFQUFFRCxVQUFVLENBQUMsQ0FBQTtNQUNoQyxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUl1QixnQkFBZ0IsR0FBRyxVQUFTN0csQ0FBQyxFQUFFO0NBQ2pDLE1BQUEsSUFBRzBHLEtBQUssQ0FBQ0ksT0FBTyxDQUFDOUcsQ0FBQyxDQUFDLEVBQUU7U0FDbkIsSUFBRzBHLEtBQUssQ0FBQ0ksT0FBTyxDQUFDOUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Q0FDOUI7V0FDUSxJQUFJK0csTUFBTSxHQUFHLEVBQUUsQ0FBQTtDQUNmLFVBQUEsS0FBSSxJQUFJakQsQ0FBQyxHQUFHLENBQUMsRUFBRUQsTUFBTSxHQUFHN0QsQ0FBQyxDQUFDNkQsTUFBTSxFQUFFQyxDQUFDLEdBQUdELE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7YUFDakRpRCxNQUFNLENBQUNKLElBQUksQ0FBQ0UsZ0JBQWdCLENBQUM3RyxDQUFDLENBQUM4RCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDcEMsV0FBQTtDQUNELFVBQUEsT0FBT2lELE1BQU0sQ0FBQTtDQUNyQixTQUFPLE1BQU07Q0FBQTtDQUNMLFVBQUEsT0FBTy9HLENBQUMsQ0FBQ2dILEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUNsQixTQUFBO0NBQ1AsT0FBSyxNQUFNO0NBQUE7Q0FDTCxRQUFBLE9BQU9oSCxDQUFDLENBQUE7Q0FDVCxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0UsSUFBQSxJQUFJaUgsU0FBUyxHQUFHLFVBQVNDLE1BQU0sRUFBRTtDQUM3QixNQUFBLE9BQU8sT0FBT0EsTUFBTSxJQUFJLFFBQVEsSUFBSyxPQUFPQSxNQUFNLElBQUksUUFBUSxJQUFJQSxNQUFNLENBQUNOLFdBQVcsS0FBS08sTUFBTyxDQUFBO01BQ25HLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0UsSUFBQSxJQUFJQyxZQUFZLEdBQUcsVUFBU0MsR0FBRyxFQUFFQyxJQUFJLEVBQUU7T0FDckMsSUFBSUMsR0FBRyxHQUFHLElBQUliLEtBQUssQ0FBQ1csR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDM0IsTUFBQSxJQUFJdkQsQ0FBQyxDQUFBO0NBQ0wsTUFBQSxJQUFHdUQsR0FBRyxDQUFDeEQsTUFBTSxJQUFJLENBQUMsRUFBRTtDQUFBO0NBQ2xCLFFBQUEsSUFBRyxPQUFPeUQsSUFBSSxLQUFLLFVBQVUsRUFBRTtDQUM3QixVQUFBLEtBQUl4RCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd1RCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUV2RCxDQUFDLEVBQUUsRUFBRTtDQUMxQnlELFlBQUFBLEdBQUcsQ0FBQ3pELENBQUMsQ0FBQyxHQUFHd0QsSUFBSSxFQUFFLENBQUE7Q0FDaEIsV0FBQTtDQUNULFNBQU8sTUFBTTtDQUNMLFVBQUEsS0FBSXhELENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3VELEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRXZELENBQUMsRUFBRSxFQUFFO0NBQzFCeUQsWUFBQUEsR0FBRyxDQUFDekQsQ0FBQyxDQUFDLEdBQUd3RCxJQUFJLENBQUE7Q0FDZCxXQUFBO0NBQ0YsU0FBQTtDQUNQLE9BQUssTUFBTSxJQUFHRCxHQUFHLENBQUN4RCxNQUFNLEdBQUcsQ0FBQyxFQUFFO0NBQ3hCLFFBQUEsS0FBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHdUQsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFdkQsQ0FBQyxFQUFFLEVBQUU7Q0FDMUJ5RCxVQUFBQSxHQUFHLENBQUN6RCxDQUFDLENBQUMsR0FBR3NELFlBQVksQ0FBQ0MsR0FBRyxDQUFDTCxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUVNLElBQUksQ0FBQyxDQUFBO0NBQzFDLFNBQUE7Q0FDUCxPQUFLLE1BQU07Q0FDTCxRQUFBLE1BQU0saURBQWlELENBQUE7Q0FDeEQsT0FBQTtDQUNELE1BQUEsT0FBT0MsR0FBRyxDQUFBO01BQ1gsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0UsSUFBQSxJQUFJQyxTQUFTLEdBQUcsVUFBUzFHLENBQUMsRUFBRTtPQUMxQixJQUFHNEYsS0FBSyxDQUFDSSxPQUFPLENBQUNoRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUN0QixRQUFBLE9BQU8sQ0FBQ0EsQ0FBQyxDQUFDK0MsTUFBTSxDQUFDLENBQUM0RCxNQUFNLENBQUNELFNBQVMsQ0FBQzFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDL0MsT0FBSyxNQUFNO0NBQ0wsUUFBQSxPQUFPLENBQUNBLENBQUMsQ0FBQytDLE1BQU0sQ0FBQyxDQUFBO0NBQ2xCLE9BQUE7TUFDRixDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUk2RCxXQUFXLEdBQUcsVUFBVUMsRUFBRSxFQUFFQyxFQUFFLEVBQUU7T0FDaEMsSUFBSUQsRUFBRSxDQUFDOUQsTUFBTSxJQUFJK0QsRUFBRSxDQUFDL0QsTUFBTSxFQUFFLE9BQU8sS0FBSyxDQUFBO0NBQ3hDLE1BQUEsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUc2RCxFQUFFLENBQUM5RCxNQUFNLEVBQUVDLENBQUMsRUFBRSxFQUFFO0NBQzFDO0NBQ1UsUUFBQSxJQUFJNEMsS0FBSyxDQUFDSSxPQUFPLENBQUNhLEVBQUUsQ0FBQzdELENBQUMsQ0FBQyxDQUFDLElBQUk0QyxLQUFLLENBQUNJLE9BQU8sQ0FBQ2MsRUFBRSxDQUFDOUQsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUM1RDtDQUNjLFVBQUEsSUFBSSxDQUFDNEQsV0FBVyxDQUFDQyxFQUFFLENBQUM3RCxDQUFDLENBQUMsRUFBRThELEVBQUUsQ0FBQzlELENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUE7VUFDL0MsTUFDSSxJQUFJNkQsRUFBRSxDQUFDN0QsQ0FBQyxDQUFDLElBQUk4RCxFQUFFLENBQUM5RCxDQUFDLENBQUMsRUFBRTtDQUNuQztDQUNjLFVBQUEsT0FBTyxLQUFLLENBQUE7Q0FDZixTQUFBO0NBQ0osT0FBQTtDQUNELE1BQUEsT0FBTyxJQUFJLENBQUE7TUFDZCxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUkrRCxrQkFBa0IsR0FBRyxVQUFTL0csQ0FBQyxFQUFFZ0gsR0FBRyxFQUFFO0NBQ3hDLE1BQUEsSUFBR3BCLEtBQUssQ0FBQ0ksT0FBTyxDQUFDaEcsQ0FBQyxDQUFDLEVBQUU7U0FDbkIsSUFBSWlILE1BQU0sR0FBRyxJQUFJckIsS0FBSyxDQUFDNUYsQ0FBQyxDQUFDK0MsTUFBTSxDQUFDLENBQUE7Q0FDaEMsUUFBQSxLQUFJLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR2hELENBQUMsQ0FBQytDLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7Q0FDaENpRSxVQUFBQSxNQUFNLENBQUNqRSxDQUFDLENBQUMsR0FBRytELGtCQUFrQixDQUFDL0csQ0FBQyxDQUFDZ0QsQ0FBQyxDQUFDLEVBQUVnRSxHQUFHLENBQUMsQ0FBQTtDQUMxQyxTQUFBO0NBQ0QsUUFBQSxPQUFPQyxNQUFNLENBQUE7Q0FDbkIsT0FBSyxNQUFNO1NBQ0wsT0FBT0QsR0FBRyxDQUFDaEgsQ0FBQyxDQUFDLENBQUE7Q0FDZCxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtLQUNFLFNBQVNrSCxhQUFhQSxDQUFDQyxLQUFLLEVBQUU7Q0FDMUIsTUFBQSxLQUFLLElBQUluRSxDQUFDLEdBQUdtRSxLQUFLLENBQUNwRSxNQUFNLEdBQUcsQ0FBQyxFQUFFQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFBRTtDQUN2QyxRQUFBLElBQUk3RCxDQUFDLEdBQUdlLElBQUksQ0FBQ2lFLEtBQUssQ0FBQ2pFLElBQUksQ0FBQytELE1BQU0sRUFBRSxJQUFJakIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDM0MsUUFBQSxJQUFJb0UsSUFBSSxHQUFHRCxLQUFLLENBQUNuRSxDQUFDLENBQUMsQ0FBQTtDQUNuQm1FLFFBQUFBLEtBQUssQ0FBQ25FLENBQUMsQ0FBQyxHQUFHbUUsS0FBSyxDQUFDaEksQ0FBQyxDQUFDLENBQUE7Q0FDbkJnSSxRQUFBQSxLQUFLLENBQUNoSSxDQUFDLENBQUMsR0FBR2lJLElBQUksQ0FBQTtDQUNsQixPQUFBO0NBQ0QsTUFBQSxPQUFPRCxLQUFLLENBQUE7Q0FDZixLQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSUUseUJBQXlCLEdBQUcsVUFBU3JILENBQUMsRUFBRWdILEdBQUcsRUFBRTtDQUMvQyxNQUFBLElBQUdwQixLQUFLLENBQUNJLE9BQU8sQ0FBQ2hHLENBQUMsQ0FBQyxFQUFFO0NBQ25CLFFBQUEsSUFBSXNILEdBQUcsR0FBR3RILENBQUMsQ0FBQytDLE1BQU0sQ0FBQTtDQUNsQixRQUFBLElBQUlDLENBQUMsQ0FBQTtTQUNMLElBQUl1RSxRQUFRLEdBQUcsRUFBRSxDQUFBO1NBQ2pCLEtBQUl2RSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdzRSxHQUFHLEVBQUV0RSxDQUFDLEVBQUUsRUFBRTtDQUN2QnVFLFVBQUFBLFFBQVEsQ0FBQ3ZFLENBQUMsQ0FBQyxHQUFHQSxDQUFDLENBQUE7Q0FDaEIsU0FBQTtTQUNEa0UsYUFBYSxDQUFDSyxRQUFRLENBQUMsQ0FBQTtTQUN2QixJQUFJTixNQUFNLEdBQUcsRUFBRSxDQUFBO1NBRWYsS0FBSWpFLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3NFLEdBQUcsRUFBRXRFLENBQUMsRUFBRSxFQUFFO0NBQ3ZCLFVBQUEsSUFBSXdFLE9BQU8sR0FBR0QsUUFBUSxDQUFDdkUsQ0FBQyxDQUFDLENBQUE7Q0FDekJpRSxVQUFBQSxNQUFNLENBQUNPLE9BQU8sQ0FBQyxHQUFHVCxrQkFBa0IsQ0FBQy9HLENBQUMsQ0FBQ3dILE9BQU8sQ0FBQyxFQUFFUixHQUFHLENBQUMsQ0FBQTtDQUN0RCxTQUFBO0NBQ0QsUUFBQSxPQUFPQyxNQUFNLENBQUE7Q0FDbkIsT0FBSyxNQUFNO1NBQ0wsT0FBT0QsR0FBRyxDQUFDaEgsQ0FBQyxDQUFDLENBQUE7Q0FDZCxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJeUgsVUFBVSxHQUFHLFVBQVNDLFdBQVcsRUFBRUMsT0FBTyxFQUFFQyxZQUFZLEVBQUU7Q0FDNURELE1BQUFBLE9BQU8sR0FBR0EsT0FBTyxJQUFJLEVBQUUsQ0FBQTtPQUN2QixPQUFPQSxPQUFPLENBQUNFLGNBQWMsQ0FBQ0gsV0FBVyxDQUFDLElBQ25DQyxPQUFPLENBQUNELFdBQVcsQ0FBQyxLQUFLSSxTQUFTLElBQ2xDSCxPQUFPLENBQUNELFdBQVcsQ0FBQyxLQUFLLElBQUksR0FBR0MsT0FBTyxDQUFDRCxXQUFXLENBQUMsR0FBR0UsWUFBWSxDQUFBO01BQzNFLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0tBQ0UsSUFBSUcsbUJBQW1CLEdBQUcsVUFBU0wsV0FBVyxFQUFFQyxPQUFPLEVBQUVwQixHQUFHLEVBQUVxQixZQUFZLEVBQUU7T0FDMUUsSUFBSUksS0FBSyxHQUFHUCxVQUFVLENBQUNDLFdBQVcsRUFBRUMsT0FBTyxFQUFFQyxZQUFZLENBQUMsQ0FBQTtDQUN6RCxNQUFBLElBQUcsQ0FBRWhDLEtBQUssQ0FBQ0ksT0FBTyxDQUFDZ0MsS0FBSyxDQUFDLEVBQUU7Q0FDekJBLFFBQUFBLEtBQUssR0FBRzFCLFlBQVksQ0FBQ0MsR0FBRyxFQUFFeUIsS0FBSyxDQUFDLENBQUE7Q0FDakMsT0FBQTtPQUNELElBQUcsQ0FBRXBCLFdBQVcsQ0FBRUYsU0FBUyxDQUFDc0IsS0FBSyxDQUFDLEVBQUV6QixHQUFHLENBQUMsRUFBRTtDQUN4QyxRQUFBLE1BQU0sYUFBYSxHQUFHbUIsV0FBVyxHQUFHLG9CQUFvQixHQUNsRGhCLFNBQVMsQ0FBQ3NCLEtBQUssQ0FBQyxHQUFHLG1CQUFtQixHQUFHekIsR0FBRyxHQUFHLElBQUksQ0FBQTtDQUMzRCxPQUFBO0NBQ0EsTUFBQSxPQUFPeUIsS0FBSyxDQUFBO01BQ2QsQ0FBQTs7Q0FFSDtDQUNBOztDQUVBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJQyxnQkFBZ0IsR0FBRyxVQUFTQyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFO09BQ2xELElBQUdELEtBQUssR0FBR0MsS0FBSyxFQUFFO0NBQ2hCLFFBQUEsTUFBTSw4REFBOEQsQ0FBQTtDQUNyRSxPQUFBO09BQ0QsSUFBR0YsSUFBSSxLQUFLLE1BQU0sRUFBRTtTQUNsQixJQUFHQyxLQUFLLEtBQUssQ0FBQ3ZILFFBQVEsSUFBSXdILEtBQUssS0FBS3hILFFBQVEsRUFBRTtDQUM1QyxVQUFBLE9BQU8sR0FBRyxDQUFBO0NBQ2xCLFNBQU8sTUFBTSxJQUFHdUgsS0FBSyxLQUFLLENBQUN2SCxRQUFRLEVBQUU7V0FDN0IsT0FBT3dILEtBQUssR0FBRyxHQUFHLENBQUE7Q0FDMUIsU0FBTyxNQUFNLElBQUdBLEtBQUssS0FBS3hILFFBQVEsRUFBRTtXQUM1QixPQUFPdUgsS0FBSyxHQUFHLEdBQUcsQ0FBQTtDQUMxQixTQUFPLE1BQU0sSUFBR0EsS0FBSyxJQUFJQyxLQUFLLEVBQUU7Q0FDeEIsVUFBQSxPQUFPLENBQUNELEtBQUssR0FBR0MsS0FBSyxJQUFJLENBQUMsQ0FBQTtDQUMzQixTQUFBO0NBQ1AsT0FBSyxNQUFNLElBQUdGLElBQUksS0FBSyxLQUFLLEVBQUU7U0FDeEIsSUFBR0MsS0FBSyxLQUFLLENBQUN2SCxRQUFRLElBQUl3SCxLQUFLLEtBQUt4SCxRQUFRLEVBQUU7Q0FDNUMsVUFBQSxPQUFPLENBQUMsQ0FBQTtDQUNoQixTQUFPLE1BQU0sSUFBR3VILEtBQUssS0FBSyxDQUFDdkgsUUFBUSxFQUFFO1dBQzdCLE9BQU93SCxLQUFLLEdBQUcsQ0FBQyxDQUFBO0NBQ3hCLFNBQU8sTUFBTSxJQUFHQSxLQUFLLEtBQUt4SCxRQUFRLEVBQUU7V0FDNUIsT0FBT3VILEtBQUssR0FBRyxDQUFDLENBQUE7Q0FDeEIsU0FBTyxNQUFNLElBQUdBLEtBQUssSUFBSUMsS0FBSyxFQUFDO1dBQ3ZCLE9BQU9sSSxJQUFJLENBQUNtSSxLQUFLLENBQUMsQ0FBQ0YsS0FBSyxHQUFHQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUE7Q0FDdkMsU0FBQTtDQUNQLE9BQUssTUFBTSxJQUFHRixJQUFJLEtBQUssUUFBUSxFQUFFO0NBQzNCLFFBQUEsT0FBTyxDQUFDLENBQUE7Q0FDVCxPQUFBO0NBQ0QsTUFBQSxNQUFNLHlDQUF5QyxHQUFHQSxJQUFJLEdBQUcsR0FBRyxHQUFHQyxLQUFLLEdBQUcsSUFBSSxHQUFHQyxLQUFLLEdBQUcsR0FBRyxDQUFBO01BQzFGLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSUUsZUFBZSxHQUFJLFVBQVNDLGtCQUFrQixFQUFFQyxVQUFVLEVBQUU7Q0FDOUQsTUFBQSxJQUFJQyxNQUFNLEdBQUdqRSxVQUFVLENBQUMrRCxrQkFBa0IsQ0FBQyxDQUFBO0NBQzNDLE1BQUEsS0FBSyxJQUFJRyxVQUFVLElBQUlELE1BQU0sRUFBRTtDQUFFLFFBQUEsSUFBSSxDQUFDQSxNQUFNLENBQUNaLGNBQWMsQ0FBQ2EsVUFBVSxDQUFDLEVBQUUsU0FBQTtDQUN2RSxRQUFBLElBQUlDLEtBQUssR0FBR0YsTUFBTSxDQUFDQyxVQUFVLENBQUMsQ0FBQTtDQUM5QixRQUFBLElBQUksQ0FBQ0MsS0FBSyxDQUFDZCxjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUU7V0FDakNjLEtBQUssQ0FBQ1QsSUFBSSxHQUFHLE1BQU0sQ0FBQTtDQUNwQixTQUFBO0NBQ0QsUUFBQSxJQUFHLENBQUNTLEtBQUssQ0FBQ2QsY0FBYyxDQUFDLEtBQUssQ0FBQyxFQUFFO0NBQy9CYyxVQUFBQSxLQUFLLENBQUNwQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUNoQixTQUFBO0NBQ0QsUUFBQSxJQUFHSixTQUFTLENBQUN3QyxLQUFLLENBQUNwQyxHQUFHLENBQUMsRUFBRTtDQUN2Qm9DLFVBQUFBLEtBQUssQ0FBQ3BDLEdBQUcsR0FBRyxDQUFDb0MsS0FBSyxDQUFDcEMsR0FBRyxDQUFDLENBQUE7Q0FDeEIsU0FBQTtDQUNELFFBQUEsSUFBR29DLEtBQUssQ0FBQ1QsSUFBSSxJQUFJLFFBQVEsRUFBRTtXQUN6QlMsS0FBSyxDQUFDUCxLQUFLLEdBQUcsQ0FBQyxDQUFBO1dBQ2ZPLEtBQUssQ0FBQ1IsS0FBSyxHQUFHLENBQUMsQ0FBQTtDQUNoQixTQUFBO0NBQ0QsUUFBQSxJQUFHLENBQUNRLEtBQUssQ0FBQ2QsY0FBYyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1dBQ2pDYyxLQUFLLENBQUNQLEtBQUssR0FBR3hILFFBQVEsQ0FBQTtDQUN2QixTQUFBO0NBQ0QsUUFBQSxJQUFHLENBQUMrSCxLQUFLLENBQUNkLGNBQWMsQ0FBQyxPQUFPLENBQUMsRUFBRTtDQUNqQ2MsVUFBQUEsS0FBSyxDQUFDUixLQUFLLEdBQUcsQ0FBQ3ZILFFBQVEsQ0FBQTtDQUN4QixTQUFBO0NBRUQsUUFBQSxJQUFHK0gsS0FBSyxDQUFDZCxjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUU7Q0FDdkM7Q0FDUSxVQUFBLElBQUdqQixXQUFXLENBQUMrQixLQUFLLENBQUNwQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLE9BQU9vQyxLQUFLLENBQUNuQyxJQUFJLEtBQUssVUFBVSxFQUFFO0NBQzVFO0NBQ1VtQyxZQUFBQSxLQUFLLENBQUNuQyxJQUFJLEdBQUdtQyxLQUFLLENBQUNuQyxJQUFJLEVBQUUsQ0FBQTtZQUMxQixNQUFNLElBQUcsQ0FBQ0ksV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDWCxLQUFLLENBQUNJLE9BQU8sQ0FBQzJDLEtBQUssQ0FBQ25DLElBQUksQ0FBQyxFQUFFO0NBQzlFO0NBQ0E7Q0FDQTtDQUNRbUMsWUFBQUEsS0FBSyxDQUFDbkMsSUFBSSxHQUFHRixZQUFZLENBQUNxQyxLQUFLLENBQUNwQyxHQUFHLEVBQUVvQyxLQUFLLENBQUNuQyxJQUFJLENBQUMsQ0FBQTtDQUMvQyxXQUFBO0NBQ1QsU0FBTyxNQUFNO0NBQUE7V0FDTCxJQUFHSSxXQUFXLENBQUMrQixLQUFLLENBQUNwQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO0NBQzlCb0MsWUFBQUEsS0FBSyxDQUFDbkMsSUFBSSxHQUFHZ0MsVUFBVSxDQUFDRyxLQUFLLENBQUNULElBQUksRUFBRVMsS0FBSyxDQUFDUixLQUFLLEVBQUVRLEtBQUssQ0FBQ1AsS0FBSyxDQUFDLENBQUE7Q0FDdkUsV0FBUyxNQUFNO2FBQ0xPLEtBQUssQ0FBQ25DLElBQUksR0FBR0YsWUFBWSxDQUFDcUMsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLFlBQVc7Q0FDOUMsY0FBQSxPQUFPaUMsVUFBVSxDQUFDRyxLQUFLLENBQUNULElBQUksRUFBRVMsS0FBSyxDQUFDUixLQUFLLEVBQUVRLEtBQUssQ0FBQ1AsS0FBSyxDQUFDLENBQUE7Q0FDbkUsYUFBVyxDQUFDLENBQUE7Q0FDSCxXQUFBO0NBQ0YsU0FBQTtDQUNGLE9BQUE7Q0FDRCxNQUFBLE9BQU9LLE1BQU0sQ0FBQTtNQUNkLENBQUE7O0NBR0g7Q0FDQTs7Q0FHQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0tBQ0UsSUFBSUcsT0FBTyxHQUFHLFVBQVNILE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUU7T0FDOUMsSUFBSSxDQUFDTCxNQUFNLEdBQUdBLE1BQU0sQ0FBQTtPQUNwQixJQUFJLENBQUNJLEtBQUssR0FBR0EsS0FBSyxDQUFBO09BQ2xCLElBQUksQ0FBQ0MsUUFBUSxHQUFHQSxRQUFRLENBQUE7TUFDekIsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0VGLElBQUFBLE9BQU8sQ0FBQzFELFNBQVMsQ0FBQzZELElBQUksR0FBRyxZQUFXO0NBQ2xDLE1BQUEsTUFBTSx3Q0FBd0MsQ0FBQTtNQUMvQyxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNFSCxJQUFBQSxPQUFPLENBQUMxRCxTQUFTLENBQUM4RCxnQkFBZ0IsR0FBRyxZQUFXO0NBQ2xEO01BQ0csQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDRUosSUFBQUEsT0FBTyxDQUFDMUQsU0FBUyxDQUFDK0QsZUFBZSxHQUFHLFlBQVc7Q0FDakQ7TUFDRyxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNFTCxJQUFBQSxPQUFPLENBQUMxRCxTQUFTLENBQUNnRSxJQUFJLEdBQUcsWUFBVztDQUN0QztDQUNJLE1BQUEsT0FBTyxFQUFFLENBQUE7TUFDVixDQUFBOztDQUdIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRSxJQUFBLElBQUlDLHVCQUF1QixHQUFHLFVBQVNWLE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUV5QixpQkFBaUIsRUFBRTtPQUMxRlIsT0FBTyxDQUFDeEQsSUFBSSxDQUFDLElBQUksRUFBRXFELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLENBQUMsQ0FBQTtPQUUzQyxJQUFJTyxXQUFXLEdBQUdwRSxNQUFNLENBQUNxRSxJQUFJLENBQUMsSUFBSSxDQUFDYixNQUFNLENBQUMsQ0FBQTtDQUMxQyxNQUFBLElBQUdZLFdBQVcsQ0FBQ3RHLE1BQU0sSUFBSyxDQUFDLEVBQUU7Q0FDM0IsUUFBQSxNQUFNLHdEQUF3RCxDQUFBO0NBQy9ELE9BQUE7Q0FDRCxNQUFBLElBQUksQ0FBQzJGLFVBQVUsR0FBR1csV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFBO09BQ2hDLElBQUlWLEtBQUssR0FBRyxJQUFJLENBQUNGLE1BQU0sQ0FBQyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxDQUFBO09BQ3hDLElBQUcsQ0FBQzlCLFdBQVcsQ0FBQytCLEtBQUssQ0FBQ3BDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Q0FDL0IsUUFBQSxNQUFNLHdFQUF3RSxDQUFBO0NBQy9FLE9BQUE7Q0FDRCxNQUFBLElBQUksQ0FBQzRCLEtBQUssR0FBR1EsS0FBSyxDQUFDUixLQUFLLENBQUE7Q0FDeEIsTUFBQSxJQUFJLENBQUNDLEtBQUssR0FBR08sS0FBSyxDQUFDUCxLQUFLLENBQUE7T0FFeEIsSUFBSSxDQUFDbUIsY0FBYyxHQUFPOUIsVUFBVSxDQUFDLGdCQUFnQixFQUFFRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUE7T0FDbEUsSUFBSSxDQUFDNkIsVUFBVSxHQUFXL0IsVUFBVSxDQUFDLFlBQVksRUFBRUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFBO09BQy9ELElBQUksQ0FBQzhCLGNBQWMsR0FBT2hDLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRUUsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO09BQ3JFLElBQUksQ0FBQytCLGtCQUFrQixHQUFHakMsVUFBVSxDQUFDLG9CQUFvQixFQUFFRSxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUE7T0FDeEUsSUFBSSxDQUFDZ0Msa0JBQWtCLEdBQUdsQyxVQUFVLENBQUMsb0JBQW9CLEVBQUVFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQTtPQUN6RSxJQUFJLENBQUNpQyxXQUFXLEdBQVVuQyxVQUFVLENBQUMsYUFBYSxFQUFFRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7T0FFbEUsSUFBSSxDQUFDeUIsaUJBQWlCLEdBQUdBLGlCQUFpQixDQUFBO09BRTFDLElBQUksQ0FBQ1MsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFBO09BQ3pCLElBQUksQ0FBQ0MsV0FBVyxHQUFHLENBQUMsQ0FBQTtPQUNwQixJQUFJLENBQUNDLHlCQUF5QixHQUFHLENBQUMsQ0FBQTtNQUNuQyxDQUFBO0tBRURaLHVCQUF1QixDQUFDakUsU0FBUyxHQUFHRCxNQUFNLENBQUMrRSxNQUFNLENBQUNwQixPQUFPLENBQUMxRCxTQUFTLENBQUMsQ0FBQTtDQUNwRWlFLElBQUFBLHVCQUF1QixDQUFDakUsU0FBUyxDQUFDWSxXQUFXLEdBQUdxRCx1QkFBdUIsQ0FBQTtDQUV2RUEsSUFBQUEsdUJBQXVCLENBQUNqRSxTQUFTLENBQUM2RCxJQUFJLEdBQUcsWUFBVztPQUNoRCxJQUFJa0IsV0FBVyxHQUFHLElBQUksQ0FBQ3BCLEtBQUssQ0FBQyxJQUFJLENBQUNILFVBQVUsQ0FBQyxDQUFBO09BQzdDLElBQUl3QixjQUFjLEdBQUcsSUFBSSxDQUFDZCxpQkFBaUIsQ0FBQ2EsV0FBVyxFQUFFLElBQUksQ0FBQ1YsY0FBYyxDQUFDLENBQUE7T0FDN0UsSUFBR1csY0FBYyxHQUFHLElBQUksQ0FBQy9CLEtBQUssSUFBSStCLGNBQWMsR0FBRyxJQUFJLENBQUM5QixLQUFLLEVBQUUsQ0FHOUQsTUFBTTtDQUFBO0NBQ0wsUUFBQSxJQUFJK0IsYUFBYSxHQUFHLElBQUksQ0FBQ3JCLFFBQVEsRUFBRSxDQUFBO1NBQ25DLElBQUksQ0FBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQ0gsVUFBVSxDQUFDLEdBQUd3QixjQUFjLENBQUE7Q0FDNUMsUUFBQSxJQUFJRSxhQUFhLEdBQUcsSUFBSSxDQUFDdEIsUUFBUSxFQUFFLENBQUE7U0FDbkMsSUFBSXVCLFdBQVcsR0FBR25LLElBQUksQ0FBQ0MsR0FBRyxDQUFDaUssYUFBYSxHQUFHRCxhQUFhLENBQUMsQ0FBQTtDQUN6RCxRQUFBLElBQUdFLFdBQVcsR0FBR25LLElBQUksQ0FBQytELE1BQU0sRUFBRSxFQUFFO0NBQ3hDO0NBQ1UsVUFBQSxJQUFHLElBQUksQ0FBQzJGLFdBQVcsRUFBRSxJQUFJLENBQUNDLGdCQUFnQixFQUFFLENBQUE7Q0FDdEQsU0FBUyxNQUFNO0NBQ2Y7V0FDVSxJQUFJLENBQUNoQixLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsR0FBR3VCLFdBQVcsQ0FBQTtDQUMxQyxTQUFBO0NBQ0YsT0FBQTtPQUNELElBQUcsSUFBSSxDQUFDTCxXQUFXLEVBQUU7U0FDbkIsSUFBSSxDQUFDRyx5QkFBeUIsRUFBRyxDQUFBO0NBQ2pDLFFBQUEsSUFBRyxJQUFJLENBQUNBLHlCQUF5QixJQUFJLElBQUksQ0FBQ1AsVUFBVSxFQUFFO0NBQUE7V0FDcEQsSUFBSSxDQUFDTSxXQUFXLEVBQUcsQ0FBQTtXQUNuQixJQUFJUSxpQkFBaUIsR0FDbkJwSyxJQUFJLENBQUNnRCxHQUFHLENBQUMsSUFBSSxDQUFDdUcsY0FBYyxFQUNuQixJQUFJLENBQUNDLGtCQUFrQixHQUFHeEosSUFBSSxDQUFDSSxJQUFJLENBQUMsSUFBSSxDQUFDd0osV0FBVyxDQUFDLENBQUMsQ0FBQTtXQUNqRSxJQUFHLElBQUksQ0FBQ0QsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDTCxVQUFVLEdBQUcsSUFBSSxDQUFDRyxrQkFBa0IsRUFBRTthQUNwRSxJQUFJLENBQUNKLGNBQWMsSUFBSWUsaUJBQWlCLENBQUE7Q0FDcEQsV0FBVyxNQUFNO2FBQ0wsSUFBSSxDQUFDZixjQUFjLElBQUllLGlCQUFpQixDQUFBO0NBQ3pDLFdBQUE7V0FDRCxJQUFJLENBQUNULGdCQUFnQixHQUFHLENBQUMsQ0FBQTtXQUN6QixJQUFJLENBQUNFLHlCQUF5QixHQUFHLENBQUMsQ0FBQTtDQUNuQyxTQUFBO0NBQ0YsT0FBQTtDQUNELE1BQUEsT0FBTyxJQUFJLENBQUNsQixLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsQ0FBQTtNQUNyQyxDQUFBO0NBRURTLElBQUFBLHVCQUF1QixDQUFDakUsU0FBUyxDQUFDOEQsZ0JBQWdCLEdBQUcsWUFBVztPQUM5RCxJQUFJLENBQUNZLFdBQVcsR0FBRyxJQUFJLENBQUE7TUFDeEIsQ0FBQTtDQUVEVCxJQUFBQSx1QkFBdUIsQ0FBQ2pFLFNBQVMsQ0FBQytELGVBQWUsR0FBRyxZQUFXO09BQzdELElBQUksQ0FBQ1csV0FBVyxHQUFHLEtBQUssQ0FBQTtNQUN6QixDQUFBO0NBRURULElBQUFBLHVCQUF1QixDQUFDakUsU0FBUyxDQUFDZ0UsSUFBSSxHQUFHLFlBQVc7T0FDbEQsT0FBTztTQUNMSyxjQUFjLEVBQUUsSUFBSSxDQUFDQSxjQUFjO1NBQ25DSyxXQUFXLEVBQUUsSUFBSSxDQUFDQSxXQUFXO1NBQzdCQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUNBLGdCQUFnQjtTQUN2Q0UseUJBQXlCLEVBQUUsSUFBSSxDQUFDQSx5QkFBeUI7U0FDekRELFdBQVcsRUFBRSxJQUFJLENBQUNBLFdBQUFBO1FBQ25CLENBQUE7TUFDRixDQUFBOztDQUdIO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSVMsZUFBZSxHQUFHLFVBQVNOLFdBQVcsRUFBRVYsY0FBYyxFQUFFO09BQzFELE9BQU9uRixLQUFLLENBQUM2RixXQUFXLEVBQUcvSixJQUFJLENBQUNDLEdBQUcsQ0FBQ29KLGNBQWMsQ0FBQyxDQUFDLENBQUE7TUFDckQsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0tBQ0UsSUFBSWlCLHFCQUFxQixHQUFHLFVBQVMvQixNQUFNLEVBQUVJLEtBQUssRUFBRUMsUUFBUSxFQUFFbkIsT0FBTyxFQUFFO0NBQ3JFd0IsTUFBQUEsdUJBQXVCLENBQUMvRCxJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsRUFBRW5CLE9BQU8sRUFBRTRDLGVBQWUsQ0FBQyxDQUFBO01BQ3RGLENBQUE7S0FFREMscUJBQXFCLENBQUN0RixTQUFTLEdBQUdELE1BQU0sQ0FBQytFLE1BQU0sQ0FBQ2IsdUJBQXVCLENBQUNqRSxTQUFTLENBQUMsQ0FBQTtDQUNsRnNGLElBQUFBLHFCQUFxQixDQUFDdEYsU0FBUyxDQUFDWSxXQUFXLEdBQUcwRSxxQkFBcUIsQ0FBQTs7Q0FFckU7Q0FDQTtDQUNBO0NBQ0UsSUFBQSxJQUFJQyx3QkFBd0IsR0FBRyxVQUFTUixXQUFXLEVBQUVWLGNBQWMsRUFBRTtDQUNuRSxNQUFBLE9BQU9ySixJQUFJLENBQUNtSSxLQUFLLENBQUNqRSxLQUFLLENBQUM2RixXQUFXLEVBQUcvSixJQUFJLENBQUNDLEdBQUcsQ0FBQ29KLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtNQUNqRSxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJbUIsb0JBQW9CLEdBQUcsVUFBU2pDLE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUU7Q0FDcEV3QixNQUFBQSx1QkFBdUIsQ0FBQy9ELElBQUksQ0FBQyxJQUFJLEVBQUVxRCxNQUFNLEVBQUVJLEtBQUssRUFBRUMsUUFBUSxFQUFFbkIsT0FBTyxFQUFFOEMsd0JBQXdCLENBQUMsQ0FBQTtNQUMvRixDQUFBO0tBRURDLG9CQUFvQixDQUFDeEYsU0FBUyxHQUFHRCxNQUFNLENBQUMrRSxNQUFNLENBQUNiLHVCQUF1QixDQUFDakUsU0FBUyxDQUFDLENBQUE7Q0FDakZ3RixJQUFBQSxvQkFBb0IsQ0FBQ3hGLFNBQVMsQ0FBQ1ksV0FBVyxHQUFHNEUsb0JBQW9CLENBQUE7O0NBR25FO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNFLElBQUEsSUFBSUMsa0NBQWtDLEdBQUcsVUFBU2xDLE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUVpRCxVQUFVLEVBQUU7T0FDOUZoQyxPQUFPLENBQUN4RCxJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsQ0FBQyxDQUFBO09BRTNDLElBQUlPLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQUksQ0FBQyxJQUFJLENBQUNiLE1BQU0sQ0FBQyxDQUFBO0NBQzFDLE1BQUEsSUFBR1ksV0FBVyxDQUFDdEcsTUFBTSxJQUFLLENBQUMsRUFBRTtDQUMzQixRQUFBLE1BQU0sMEVBQTBFLENBQUE7Q0FDakYsT0FBQTtDQUNELE1BQUEsSUFBSSxDQUFDMkYsVUFBVSxHQUFHVyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUE7T0FDaEMsSUFBSVYsS0FBSyxHQUFHLElBQUksQ0FBQ0YsTUFBTSxDQUFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDLENBQUE7Q0FDeEMsTUFBQSxJQUFJLENBQUNQLEtBQUssR0FBR1EsS0FBSyxDQUFDUixLQUFLLENBQUE7Q0FDeEIsTUFBQSxJQUFJLENBQUNDLEtBQUssR0FBR08sS0FBSyxDQUFDUCxLQUFLLENBQUE7Q0FDeEIsTUFBQSxJQUFJLENBQUM3QixHQUFHLEdBQUdvQyxLQUFLLENBQUNwQyxHQUFHLENBQUE7Q0FFcEIsTUFBQSxJQUFJLENBQUNnRCxjQUFjLEdBQU94QixtQkFBbUIsQ0FBQyxnQkFBZ0IsRUFBRUosT0FBTyxFQUFFLElBQUksQ0FBQ3BCLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQTtDQUNyRixNQUFBLElBQUksQ0FBQ2lELFVBQVUsR0FBV3pCLG1CQUFtQixDQUFDLFlBQVksRUFBRUosT0FBTyxFQUFFLElBQUksQ0FBQ3BCLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQTtDQUNsRixNQUFBLElBQUksQ0FBQ2tELGNBQWMsR0FBTzFCLG1CQUFtQixDQUFDLGdCQUFnQixFQUFFSixPQUFPLEVBQUUsSUFBSSxDQUFDcEIsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFBO0NBQ3hGLE1BQUEsSUFBSSxDQUFDbUQsa0JBQWtCLEdBQUczQixtQkFBbUIsQ0FBQyxvQkFBb0IsRUFBRUosT0FBTyxFQUFFLElBQUksQ0FBQ3BCLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQTtDQUMzRixNQUFBLElBQUksQ0FBQ29ELGtCQUFrQixHQUFHNUIsbUJBQW1CLENBQUMsb0JBQW9CLEVBQUVKLE9BQU8sRUFBRSxJQUFJLENBQUNwQixHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUE7Q0FDNUYsTUFBQSxJQUFJLENBQUNxRCxXQUFXLEdBQVU3QixtQkFBbUIsQ0FBQyxhQUFhLEVBQUVKLE9BQU8sRUFBRSxJQUFJLENBQUNwQixHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUE7O0NBRXpGO0NBQ0E7T0FDSSxJQUFJc0Usa0JBQWtCLEdBQ3BCLFVBQVN0RSxHQUFHLEVBQUV1RSxRQUFRLEVBQUVoQyxRQUFRLEVBQUVTLGNBQWMsRUFBRUMsVUFBVSxFQUFFQyxjQUFjLEVBQUVDLGtCQUFrQixFQUFFQyxrQkFBa0IsRUFBRUMsV0FBVyxFQUFFO1NBQ25JLElBQUltQixXQUFXLEdBQUcsRUFBRSxDQUFBO0NBQ3BCLFFBQUEsSUFBR3hFLEdBQUcsQ0FBQ3hELE1BQU0sS0FBSyxDQUFDLEVBQUU7Q0FDbkIsVUFBQSxLQUFJLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3VELEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRXZELENBQUMsRUFBRSxFQUFFO0NBQzlCLFlBQUEsSUFBSWdJLFVBQVUsR0FBRztDQUFDekIsY0FBQUEsY0FBYyxFQUFFQSxjQUFjLENBQUN2RyxDQUFDLENBQUM7Q0FBRXdHLGNBQUFBLFVBQVUsRUFBRUEsVUFBVSxDQUFDeEcsQ0FBQyxDQUFDO0NBQzVFeUcsY0FBQUEsY0FBYyxFQUFFQSxjQUFjLENBQUN6RyxDQUFDLENBQUM7Q0FBRTBHLGNBQUFBLGtCQUFrQixFQUFFQSxrQkFBa0IsQ0FBQzFHLENBQUMsQ0FBQztDQUM1RTJHLGNBQUFBLGtCQUFrQixFQUFFQSxrQkFBa0IsQ0FBQzNHLENBQUMsQ0FBQztlQUFFNEcsV0FBVyxFQUFFQSxXQUFXLENBQUM1RyxDQUFDLENBQUE7Y0FBRSxDQUFBO2FBQ3ZFLElBQUlpSSxRQUFRLEdBQUcsRUFBRSxDQUFBO0NBQ2pCQSxZQUFBQSxRQUFRLENBQUNqSSxDQUFDLENBQUMsR0FBR3dCLFVBQVUsQ0FBQ21FLEtBQUssQ0FBQyxDQUFBO2FBQy9Cc0MsUUFBUSxDQUFDakksQ0FBQyxDQUFDLENBQUN1RCxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUN0QixZQUFBLE9BQU8wRSxRQUFRLENBQUNqSSxDQUFDLENBQUMsQ0FBQ3dELElBQUksQ0FBQztDQUMxQnVFLFlBQUFBLFdBQVcsQ0FBQy9ILENBQUMsQ0FBQyxHQUFHLElBQUk0SCxVQUFVLENBQUNLLFFBQVEsRUFBRUgsUUFBUSxFQUFFaEMsUUFBUSxFQUFFa0MsVUFBVSxDQUFDLENBQUE7Q0FDMUUsV0FBQTtDQUNULFNBQU8sTUFBTTtDQUNMLFVBQUEsS0FBSSxJQUFJaEksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHdUQsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFdkQsQ0FBQyxFQUFFLEVBQUU7YUFDOUIrSCxXQUFXLENBQUMvSCxDQUFDLENBQUMsR0FBRzZILGtCQUFrQixDQUFDdEUsR0FBRyxDQUFDTCxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU0RSxRQUFRLENBQUM5SCxDQUFDLENBQUMsRUFBRThGLFFBQVEsRUFBRVMsY0FBYyxDQUFDdkcsQ0FBQyxDQUFDLEVBQ3hGd0csVUFBVSxDQUFDeEcsQ0FBQyxDQUFDLEVBQUV5RyxjQUFjLENBQUN6RyxDQUFDLENBQUMsRUFBRTBHLGtCQUFrQixDQUFDMUcsQ0FBQyxDQUFDLEVBQUUyRyxrQkFBa0IsQ0FBQzNHLENBQUMsQ0FBQyxFQUFFNEcsV0FBVyxDQUFDNUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUNsRyxXQUFBO0NBQ0YsU0FBQTtDQUNELFFBQUEsT0FBTytILFdBQVcsQ0FBQTtRQUNuQixDQUFBO09BRUQsSUFBSSxDQUFDQSxXQUFXLEdBQUdGLGtCQUFrQixDQUFDLElBQUksQ0FBQ3RFLEdBQUcsRUFBRSxJQUFJLENBQUNzQyxLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUNJLFFBQVEsRUFDeEYsSUFBSSxDQUFDUyxjQUFjLEVBQUUsSUFBSSxDQUFDQyxVQUFVLEVBQUUsSUFBSSxDQUFDQyxjQUFjLEVBQUUsSUFBSSxDQUFDQyxrQkFBa0IsRUFDbEYsSUFBSSxDQUFDQyxrQkFBa0IsRUFBRSxJQUFJLENBQUNDLFdBQVcsQ0FBQyxDQUFBO01BRTdDLENBQUE7S0FFRGUsa0NBQWtDLENBQUN6RixTQUFTLEdBQUdELE1BQU0sQ0FBQytFLE1BQU0sQ0FBQ3BCLE9BQU8sQ0FBQzFELFNBQVMsQ0FBQyxDQUFBO0NBQy9FeUYsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFTLENBQUNZLFdBQVcsR0FBRzZFLGtDQUFrQyxDQUFBO0NBRTdGQSxJQUFBQSxrQ0FBa0MsQ0FBQ3pGLFNBQVMsQ0FBQzZELElBQUksR0FBRyxZQUFXO0NBQ2pFO09BQ0ksT0FBTzFCLHlCQUF5QixDQUFDLElBQUksQ0FBQzBELFdBQVcsRUFBRSxVQUFTRyxVQUFVLEVBQUU7Q0FBQyxRQUFBLE9BQU9BLFVBQVUsQ0FBQ25DLElBQUksRUFBRSxDQUFBO0NBQUMsT0FBRSxDQUFDLENBQUE7TUFDdEcsQ0FBQTtDQUVENEIsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFTLENBQUM4RCxnQkFBZ0IsR0FBRyxZQUFXO0NBQ3pFakMsTUFBQUEsa0JBQWtCLENBQUMsSUFBSSxDQUFDZ0UsV0FBVyxFQUFFLFVBQVNHLFVBQVUsRUFBRTtTQUFDQSxVQUFVLENBQUNsQyxnQkFBZ0IsRUFBRSxDQUFBO0NBQUMsT0FBRSxDQUFDLENBQUE7TUFDN0YsQ0FBQTtDQUVEMkIsSUFBQUEsa0NBQWtDLENBQUN6RixTQUFTLENBQUMrRCxlQUFlLEdBQUcsWUFBVztDQUN4RWxDLE1BQUFBLGtCQUFrQixDQUFDLElBQUksQ0FBQ2dFLFdBQVcsRUFBRSxVQUFTRyxVQUFVLEVBQUU7U0FBQ0EsVUFBVSxDQUFDakMsZUFBZSxFQUFFLENBQUE7Q0FBQyxPQUFFLENBQUMsQ0FBQTtNQUM1RixDQUFBO0NBRUQwQixJQUFBQSxrQ0FBa0MsQ0FBQ3pGLFNBQVMsQ0FBQ2dFLElBQUksR0FBRyxZQUFXO09BQzdELE9BQU9uQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUNnRSxXQUFXLEVBQUUsVUFBU0csVUFBVSxFQUFFO0NBQy9ELFFBQUEsT0FBT0EsVUFBVSxDQUFDaEMsSUFBSSxFQUFFLENBQUE7Q0FDOUIsT0FBSyxDQUFDLENBQUE7TUFDSCxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJaUMsbUNBQW1DLEdBQUcsVUFBUzFDLE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUU7Q0FDbkZnRCxNQUFBQSxrQ0FBa0MsQ0FBQ3ZGLElBQUksQ0FBQyxJQUFJLEVBQUVxRCxNQUFNLEVBQUVJLEtBQUssRUFBRUMsUUFBUSxFQUFFbkIsT0FBTyxFQUFFNkMscUJBQXFCLENBQUMsQ0FBQTtNQUN2RyxDQUFBO0tBRURXLG1DQUFtQyxDQUFDakcsU0FBUyxHQUFHRCxNQUFNLENBQUMrRSxNQUFNLENBQUNXLGtDQUFrQyxDQUFDekYsU0FBUyxDQUFDLENBQUE7Q0FDM0dpRyxJQUFBQSxtQ0FBbUMsQ0FBQ2pHLFNBQVMsQ0FBQ1ksV0FBVyxHQUFHcUYsbUNBQW1DLENBQUE7O0NBRWpHO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJQyxrQ0FBa0MsR0FBRyxVQUFTM0MsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsRUFBRW5CLE9BQU8sRUFBRTtDQUNsRmdELE1BQUFBLGtDQUFrQyxDQUFDdkYsSUFBSSxDQUFDLElBQUksRUFBRXFELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUUrQyxvQkFBb0IsQ0FBQyxDQUFBO01BQ3RHLENBQUE7S0FFRFUsa0NBQWtDLENBQUNsRyxTQUFTLEdBQUdELE1BQU0sQ0FBQytFLE1BQU0sQ0FBQ1csa0NBQWtDLENBQUN6RixTQUFTLENBQUMsQ0FBQTtDQUMxR2tHLElBQUFBLGtDQUFrQyxDQUFDbEcsU0FBUyxDQUFDWSxXQUFXLEdBQUdzRixrQ0FBa0MsQ0FBQTs7Q0FFL0Y7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0tBQ0UsSUFBSUMsYUFBYSxHQUFHLFVBQVM1QyxNQUFNLEVBQUVJLEtBQUssRUFBRUMsUUFBUSxFQUFFbkIsT0FBTyxFQUFFO09BQzdEaUIsT0FBTyxDQUFDeEQsSUFBSSxDQUFDLElBQUksRUFBRXFELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLENBQUMsQ0FBQTtPQUMzQyxJQUFJTyxXQUFXLEdBQUdwRSxNQUFNLENBQUNxRSxJQUFJLENBQUMsSUFBSSxDQUFDYixNQUFNLENBQUMsQ0FBQTtDQUMxQyxNQUFBLElBQUdZLFdBQVcsQ0FBQ3RHLE1BQU0sSUFBSyxDQUFDLEVBQUU7Q0FDM0IsUUFBQSxJQUFJLENBQUMyRixVQUFVLEdBQUdXLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUN0QyxPQUFLLE1BQU07Q0FDTCxRQUFBLE1BQU0scURBQXFELENBQUE7Q0FDNUQsT0FBQTtNQUNGLENBQUE7S0FFRGdDLGFBQWEsQ0FBQ25HLFNBQVMsR0FBR0QsTUFBTSxDQUFDK0UsTUFBTSxDQUFDcEIsT0FBTyxDQUFDMUQsU0FBUyxDQUFDLENBQUE7Q0FDMURtRyxJQUFBQSxhQUFhLENBQUNuRyxTQUFTLENBQUNZLFdBQVcsR0FBR3VGLGFBQWEsQ0FBQTtDQUVuREEsSUFBQUEsYUFBYSxDQUFDbkcsU0FBUyxDQUFDNkQsSUFBSSxHQUFHLFlBQVc7T0FDeEMsSUFBSSxDQUFDRixLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7Q0FDL0IsTUFBQSxJQUFJNEMsYUFBYSxHQUFHLElBQUksQ0FBQ3hDLFFBQVEsRUFBRSxDQUFBO09BQ25DLElBQUksQ0FBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQ0gsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0NBQy9CLE1BQUEsSUFBSTZDLFlBQVksR0FBRyxJQUFJLENBQUN6QyxRQUFRLEVBQUUsQ0FBQTtPQUNsQyxJQUFJMEMsWUFBWSxHQUFHdEwsSUFBSSxDQUFDaUQsR0FBRyxDQUFDbUksYUFBYSxFQUFFQyxZQUFZLENBQUMsQ0FBQTtDQUN4REQsTUFBQUEsYUFBYSxJQUFJRSxZQUFZLENBQUE7Q0FDN0JELE1BQUFBLFlBQVksSUFBSUMsWUFBWSxDQUFBO09BQzVCLElBQUlDLFNBQVMsR0FBR3ZMLElBQUksQ0FBQ0MsR0FBRyxDQUFDbUwsYUFBYSxHQUFHcEwsSUFBSSxDQUFDVCxHQUFHLENBQUVTLElBQUksQ0FBQ0MsR0FBRyxDQUFDbUwsYUFBYSxDQUFDLEdBQUdwTCxJQUFJLENBQUNDLEdBQUcsQ0FBQ29MLFlBQVksQ0FBRyxDQUFBLENBQUUsQ0FBQTtDQUN2RyxNQUFBLElBQUdyTCxJQUFJLENBQUMrRCxNQUFNLEVBQUUsR0FBR3dILFNBQVMsRUFBRTtTQUM1QixJQUFJLENBQUM1QyxLQUFLLENBQUMsSUFBSSxDQUFDSCxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7Q0FDL0IsUUFBQSxPQUFPLENBQUMsQ0FBQTtDQUNULE9BQUE7Q0FDRCxNQUFBLE9BQU8sQ0FBQyxDQUFBO01BQ1QsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJZ0Qsc0JBQXNCLEdBQUcsVUFBU2pELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUU7T0FDdEVpQixPQUFPLENBQUN4RCxJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsQ0FBQyxDQUFBO09BRTNDLElBQUlPLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQUksQ0FBQyxJQUFJLENBQUNiLE1BQU0sQ0FBQyxDQUFBO0NBQzFDLE1BQUEsSUFBR1ksV0FBVyxDQUFDdEcsTUFBTSxJQUFLLENBQUMsRUFBRTtDQUMzQixRQUFBLElBQUksQ0FBQzJGLFVBQVUsR0FBR1csV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQ2hDLElBQUlWLEtBQUssR0FBRyxJQUFJLENBQUNGLE1BQU0sQ0FBQyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxDQUFBO0NBQ3hDLFFBQUEsSUFBSSxDQUFDbkMsR0FBRyxHQUFHb0MsS0FBSyxDQUFDcEMsR0FBRyxDQUFBO0NBQzFCLE9BQUssTUFBTTtDQUNMLFFBQUEsTUFBTSw4REFBOEQsQ0FBQTtDQUNyRSxPQUFBO09BRUQsSUFBSXNFLGtCQUFrQixHQUNwQixVQUFTdEUsR0FBRyxFQUFFdUUsUUFBUSxFQUFFaEMsUUFBUSxFQUFFO1NBQ2xDLElBQUlpQyxXQUFXLEdBQUcsRUFBRSxDQUFBO0NBQ3BCLFFBQUEsSUFBSS9ILENBQUMsQ0FBQTtDQUNMLFFBQUEsSUFBR3VELEdBQUcsQ0FBQ3hELE1BQU0sS0FBSyxDQUFDLEVBQUU7Q0FDbkIsVUFBQSxLQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd1RCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUV2RCxDQUFDLEVBQUUsRUFBRTthQUMxQixJQUFJMkksU0FBUyxHQUFHLEVBQUUsQ0FBQTtDQUNsQkEsWUFBQUEsU0FBUyxDQUFDM0ksQ0FBQyxDQUFDLEdBQUcyRixLQUFLLENBQUE7Q0FDcEJvQyxZQUFBQSxXQUFXLENBQUMvSCxDQUFDLENBQUMsR0FBRyxJQUFJcUksYUFBYSxDQUFDTSxTQUFTLEVBQUViLFFBQVEsRUFBRWhDLFFBQVEsQ0FBQyxDQUFBO0NBQ2xFLFdBQUE7Q0FDVCxTQUFPLE1BQU07Q0FDTCxVQUFBLEtBQUk5RixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd1RCxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUV2RCxDQUFDLEVBQUUsRUFBRTtDQUMxQitILFlBQUFBLFdBQVcsQ0FBQy9ILENBQUMsQ0FBQyxHQUFHNkgsa0JBQWtCLENBQUN0RSxHQUFHLENBQUNMLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRTRFLFFBQVEsQ0FBQzlILENBQUMsQ0FBQyxFQUFFOEYsUUFBUSxDQUFDLENBQUE7Q0FDekUsV0FBQTtDQUNGLFNBQUE7Q0FDRCxRQUFBLE9BQU9pQyxXQUFXLENBQUE7UUFDbkIsQ0FBQTtPQUVELElBQUksQ0FBQ0EsV0FBVyxHQUFHRixrQkFBa0IsQ0FBQyxJQUFJLENBQUN0RSxHQUFHLEVBQUUsSUFBSSxDQUFDc0MsS0FBSyxDQUFDLElBQUksQ0FBQ0gsVUFBVSxDQUFDLEVBQUUsSUFBSSxDQUFDSSxRQUFRLENBQUMsQ0FBQTtNQUM1RixDQUFBO0tBRUQ0QyxzQkFBc0IsQ0FBQ3hHLFNBQVMsR0FBR0QsTUFBTSxDQUFDK0UsTUFBTSxDQUFDcEIsT0FBTyxDQUFDMUQsU0FBUyxDQUFDLENBQUE7Q0FDbkV3RyxJQUFBQSxzQkFBc0IsQ0FBQ3hHLFNBQVMsQ0FBQ1ksV0FBVyxHQUFHNEYsc0JBQXNCLENBQUE7Q0FFckVBLElBQUFBLHNCQUFzQixDQUFDeEcsU0FBUyxDQUFDNkQsSUFBSSxHQUFHLFlBQVc7Q0FDckQ7T0FDSSxPQUFPMUIseUJBQXlCLENBQUMsSUFBSSxDQUFDMEQsV0FBVyxFQUFFLFVBQVNHLFVBQVUsRUFBRTtDQUFDLFFBQUEsT0FBT0EsVUFBVSxDQUFDbkMsSUFBSSxFQUFFLENBQUE7Q0FBQyxPQUFFLENBQUMsQ0FBQTtNQUN0RyxDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtLQUNFLElBQUk2QyxXQUFXLEdBQUcsVUFBU25ELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUU7T0FDM0RpQixPQUFPLENBQUN4RCxJQUFJLENBQUMsSUFBSSxFQUFFcUQsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLFFBQVEsQ0FBQyxDQUFBO09BQzNDLElBQUksQ0FBQ08sV0FBVyxHQUFHcEUsTUFBTSxDQUFDcUUsSUFBSSxDQUFDLElBQUksQ0FBQ2IsTUFBTSxDQUFDLENBQUE7T0FDM0MsSUFBSSxDQUFDc0MsV0FBVyxHQUFHLEVBQUUsQ0FBQTtDQUNyQixNQUFBLEtBQUksSUFBSS9ILENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNxRyxXQUFXLENBQUN0RyxNQUFNLEVBQUVDLENBQUMsRUFBRSxFQUFFO1NBQy9DLElBQUkyRixLQUFLLEdBQUdGLE1BQU0sQ0FBQyxJQUFJLENBQUNZLFdBQVcsQ0FBQ3JHLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FDdkMsUUFBQSxJQUFJNkksYUFBYSxDQUFBO1NBQ2pCLFFBQVFsRCxLQUFLLENBQUNULElBQUk7Q0FDaEIsVUFBQSxLQUFLLE1BQU07YUFDVCxJQUFHdEIsV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUM5QnNGLGNBQUFBLGFBQWEsR0FBR3JCLHFCQUFxQixDQUFBO0NBQ2pELGFBQVcsTUFBTTtDQUNMcUIsY0FBQUEsYUFBYSxHQUFHVixtQ0FBbUMsQ0FBQTtDQUNwRCxhQUFBO0NBQ0QsWUFBQSxNQUFBO0NBQ0YsVUFBQSxLQUFLLEtBQUs7YUFDUixJQUFHdkUsV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUM5QnNGLGNBQUFBLGFBQWEsR0FBR25CLG9CQUFvQixDQUFBO0NBQ2hELGFBQVcsTUFBTTtDQUNMbUIsY0FBQUEsYUFBYSxHQUFHVCxrQ0FBa0MsQ0FBQTtDQUNuRCxhQUFBO0NBQ0QsWUFBQSxNQUFBO0NBQ0YsVUFBQSxLQUFLLFFBQVE7YUFDWCxJQUFHeEUsV0FBVyxDQUFDK0IsS0FBSyxDQUFDcEMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtDQUM5QnNGLGNBQUFBLGFBQWEsR0FBR1IsYUFBYSxDQUFBO0NBQ3pDLGFBQVcsTUFBTTtDQUNMUSxjQUFBQSxhQUFhLEdBQUdILHNCQUFzQixDQUFBO0NBQ3ZDLGFBQUE7Q0FDRCxZQUFBLE1BQUE7Q0FDRixVQUFBO0NBQ0UsWUFBQSxNQUFNLHFDQUFxQyxHQUFHLElBQUksQ0FBQ3JDLFdBQVcsQ0FBQ3JHLENBQUMsQ0FBQyxHQUFHLGFBQWEsR0FBRzJGLEtBQUssQ0FBQ1QsSUFBSSxDQUFBO0NBQ2pHLFNBQUE7U0FDRCxJQUFJNEQsaUJBQWlCLEdBQUcsRUFBRSxDQUFBO1NBQzFCQSxpQkFBaUIsQ0FBQyxJQUFJLENBQUN6QyxXQUFXLENBQUNyRyxDQUFDLENBQUMsQ0FBQyxHQUFHMkYsS0FBSyxDQUFBO0NBQzlDaEIsUUFBQUEsT0FBTyxHQUFHQSxPQUFPLElBQUksRUFBRSxDQUFBO0NBQ3ZCLFFBQUEsSUFBSW9FLGFBQWEsR0FBR3BFLE9BQU8sQ0FBQ2MsTUFBTSxJQUFJZCxPQUFPLENBQUNjLE1BQU0sQ0FBQyxJQUFJLENBQUNZLFdBQVcsQ0FBQ3JHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO1NBQy9FK0ksYUFBYSxDQUFDeEMsY0FBYyxHQUFPd0MsYUFBYSxDQUFDeEMsY0FBYyxJQUFRNUIsT0FBTyxDQUFDNEIsY0FBYyxDQUFBO1NBQzdGd0MsYUFBYSxDQUFDdkMsVUFBVSxHQUFXdUMsYUFBYSxDQUFDdkMsVUFBVSxJQUFZN0IsT0FBTyxDQUFDNkIsVUFBVSxDQUFBO1NBQ3pGdUMsYUFBYSxDQUFDdEMsY0FBYyxHQUFPc0MsYUFBYSxDQUFDdEMsY0FBYyxJQUFROUIsT0FBTyxDQUFDOEIsY0FBYyxDQUFBO1NBQzdGc0MsYUFBYSxDQUFDckMsa0JBQWtCLEdBQUdxQyxhQUFhLENBQUNyQyxrQkFBa0IsSUFBSS9CLE9BQU8sQ0FBQytCLGtCQUFrQixDQUFBO1NBQ2pHcUMsYUFBYSxDQUFDcEMsa0JBQWtCLEdBQUdvQyxhQUFhLENBQUNwQyxrQkFBa0IsSUFBSWhDLE9BQU8sQ0FBQ2dDLGtCQUFrQixDQUFBO1NBQ2pHb0MsYUFBYSxDQUFDbkMsV0FBVyxHQUFVbUMsYUFBYSxDQUFDbkMsV0FBVyxJQUFXakMsT0FBTyxDQUFDaUMsV0FBVyxDQUFBO0NBQzFGLFFBQUEsSUFBSSxDQUFDbUIsV0FBVyxDQUFDL0gsQ0FBQyxDQUFDLEdBQUcsSUFBSTZJLGFBQWEsQ0FBQ0MsaUJBQWlCLEVBQUVqRCxLQUFLLEVBQUVDLFFBQVEsRUFBRWlELGFBQWEsQ0FBQyxDQUFBO0NBQzNGLE9BQUE7TUFDRixDQUFBO0tBRURILFdBQVcsQ0FBQzFHLFNBQVMsR0FBR0QsTUFBTSxDQUFDK0UsTUFBTSxDQUFDcEIsT0FBTyxDQUFDMUQsU0FBUyxDQUFDLENBQUE7Q0FDeEQwRyxJQUFBQSxXQUFXLENBQUMxRyxTQUFTLENBQUNZLFdBQVcsR0FBRzhGLFdBQVcsQ0FBQTtDQUUvQ0EsSUFBQUEsV0FBVyxDQUFDMUcsU0FBUyxDQUFDNkQsSUFBSSxHQUFHLFlBQVc7Q0FDdEM3QixNQUFBQSxhQUFhLENBQUMsSUFBSSxDQUFDNkQsV0FBVyxDQUFDLENBQUE7Q0FDL0IsTUFBQSxLQUFJLElBQUkvSCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDK0gsV0FBVyxDQUFDaEksTUFBTSxFQUFFQyxDQUFDLEVBQUUsRUFBRTtTQUMvQyxJQUFJLENBQUMrSCxXQUFXLENBQUMvSCxDQUFDLENBQUMsQ0FBQytGLElBQUksRUFBRSxDQUFBO0NBQzNCLE9BQUE7T0FDRCxPQUFPLElBQUksQ0FBQ0YsS0FBSyxDQUFBO01BQ2xCLENBQUE7Q0FFRCtDLElBQUFBLFdBQVcsQ0FBQzFHLFNBQVMsQ0FBQzhELGdCQUFnQixHQUFHLFlBQVc7Q0FDbEQsTUFBQSxLQUFJLElBQUloRyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDK0gsV0FBVyxDQUFDaEksTUFBTSxFQUFFQyxDQUFDLEVBQUUsRUFBRTtTQUMvQyxJQUFJLENBQUMrSCxXQUFXLENBQUMvSCxDQUFDLENBQUMsQ0FBQ2dHLGdCQUFnQixFQUFFLENBQUE7Q0FDdkMsT0FBQTtNQUNGLENBQUE7Q0FFRDRDLElBQUFBLFdBQVcsQ0FBQzFHLFNBQVMsQ0FBQytELGVBQWUsR0FBRyxZQUFXO0NBQ2pELE1BQUEsS0FBSSxJQUFJakcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQytILFdBQVcsQ0FBQ2hJLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7U0FDL0MsSUFBSSxDQUFDK0gsV0FBVyxDQUFDL0gsQ0FBQyxDQUFDLENBQUNpRyxlQUFlLEVBQUUsQ0FBQTtDQUN0QyxPQUFBO01BQ0YsQ0FBQTtDQUVEMkMsSUFBQUEsV0FBVyxDQUFDMUcsU0FBUyxDQUFDZ0UsSUFBSSxHQUFHLFlBQVc7T0FDdEMsSUFBSUEsSUFBSSxHQUFHLEVBQUUsQ0FBQTtDQUNiLE1BQUEsS0FBSSxJQUFJbEcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQytILFdBQVcsQ0FBQ2hJLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7Q0FDL0NrRyxRQUFBQSxJQUFJLENBQUMsSUFBSSxDQUFDRyxXQUFXLENBQUNyRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQytILFdBQVcsQ0FBQy9ILENBQUMsQ0FBQyxDQUFDa0csSUFBSSxFQUFFLENBQUE7Q0FDdkQsT0FBQTtDQUNELE1BQUEsT0FBT0EsSUFBSSxDQUFBO01BQ1osQ0FBQTs7Q0FJSDtDQUNBOztDQUdBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJOEMsT0FBTyxHQUFHLFVBQVN2RCxNQUFNLEVBQUVLLFFBQVEsRUFBRW1ELElBQUksRUFBRXRFLE9BQU8sRUFBRTtPQUN0RCxJQUFJLENBQUNjLE1BQU0sR0FBR0EsTUFBTSxDQUFBO09BQ3BCLElBQUksQ0FBQ3dELElBQUksR0FBR0EsSUFBSSxDQUFBO09BQ2hCLElBQUksQ0FBQzVDLFdBQVcsR0FBR3BFLE1BQU0sQ0FBQ3FFLElBQUksQ0FBQyxJQUFJLENBQUNiLE1BQU0sQ0FBQyxDQUFBOztDQUUvQztPQUNJLElBQUksQ0FBQ3lELGNBQWMsR0FBS3pFLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRUUsT0FBTyxFQUFFTSxnQkFBZ0IsQ0FBQyxDQUFBO09BQy9FLElBQUlrRSxpQkFBaUIsR0FBRzFFLFVBQVUsQ0FBQyxNQUFNLEVBQUVFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQTtPQUN0RCxJQUFJeUUsaUJBQWlCLEdBQUczRSxVQUFVLENBQUMsU0FBUyxFQUFFRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7Q0FDNUQsTUFBQSxJQUFJLENBQUMwRSxJQUFJLENBQUNGLGlCQUFpQixDQUFDLENBQUE7Q0FDNUIsTUFBQSxJQUFJLENBQUNHLE9BQU8sQ0FBQ0YsaUJBQWlCLENBQUMsQ0FBQTtPQUMvQixJQUFJLENBQUN6RSxPQUFPLEdBQUdBLE9BQU8sQ0FBQTtDQUMxQjtDQUNJLE1BQUEsSUFBSSxDQUFDYyxNQUFNLEdBQUdILGVBQWUsQ0FBQyxJQUFJLENBQUNHLE1BQU0sRUFBRSxJQUFJLENBQUN5RCxjQUFjLENBQUMsQ0FBQTtPQUMvRCxJQUFJckQsS0FBSyxHQUFHLEVBQUUsQ0FBQTtDQUNkLE1BQUEsS0FBSSxJQUFJN0YsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ3FHLFdBQVcsQ0FBQ3RHLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUc7U0FDaEQ2RixLQUFLLENBQUMsSUFBSSxDQUFDUSxXQUFXLENBQUNyRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQ3lGLE1BQU0sQ0FBQyxJQUFJLENBQUNZLFdBQVcsQ0FBQ3JHLENBQUMsQ0FBQyxDQUFDLENBQUN3RCxJQUFJLENBQUE7Q0FDbkUsT0FBQTtPQUNELElBQUksQ0FBQ3NDLFFBQVEsR0FBRyxZQUFXO0NBQ3pCLFFBQUEsT0FBT0EsUUFBUSxDQUFDRCxLQUFLLEVBQUVvRCxJQUFJLENBQUMsQ0FBQTtRQUM3QixDQUFBO0NBQ0w7Q0FDQTtPQUNJLElBQUksQ0FBQ25ELFFBQVEsRUFBRSxDQUFBO09BQ2YsSUFBSSxDQUFDRCxLQUFLLEdBQUdBLEtBQUssQ0FBQTtPQUNsQixJQUFJLENBQUMwRCxRQUFRLEdBQUcsSUFBSSxDQUFDQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMvRCxNQUFNLEVBQUUsSUFBSSxDQUFDSSxLQUFLLEVBQUUsSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDbkIsT0FBTyxDQUFDLENBQUE7TUFDbkcsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7S0FDRXFFLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQ3NILHVCQUF1QixHQUFHLFVBQVMzRCxLQUFLLEVBQUVDLFFBQVEsRUFBQztDQUNuRSxNQUFBLE1BQU0sNERBQTRELENBQUE7TUFDbkUsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0VrRCxJQUFBQSxPQUFPLENBQUM5RyxTQUFTLENBQUNnRSxJQUFJLEdBQUcsWUFBVztPQUNsQyxPQUFPO1NBQUNMLEtBQUssRUFBRSxJQUFJLENBQUNBLEtBQUs7U0FBRXdELElBQUksRUFBRSxJQUFJLENBQUNBLElBQUk7U0FBRUMsT0FBTyxFQUFFLElBQUksQ0FBQ0EsT0FBTztTQUN6REMsUUFBUSxFQUFFLElBQUksQ0FBQ0EsUUFBQUE7UUFBUyxDQUFBO01BQ2pDLENBQUE7O0NBRUg7Q0FDQTtDQUNBO0NBQ0VQLElBQUFBLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQzZELElBQUksR0FBRyxZQUFXO0NBQ2xDN0IsTUFBQUEsYUFBYSxDQUFDLElBQUksQ0FBQ3FGLFFBQVEsQ0FBQyxDQUFBO0NBQzVCLE1BQUEsS0FBSSxJQUFJdkosQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ3VKLFFBQVEsQ0FBQ3hKLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7U0FDNUMsSUFBSSxDQUFDdUosUUFBUSxDQUFDdkosQ0FBQyxDQUFDLENBQUMrRixJQUFJLEVBQUUsQ0FBQTtDQUN4QixPQUFBO09BQ0QsSUFBRzlELE1BQU0sQ0FBQ3FFLElBQUksQ0FBQyxJQUFJLENBQUNULEtBQUssQ0FBQyxDQUFDOUYsTUFBTSxHQUFHa0MsTUFBTSxDQUFDcUUsSUFBSSxDQUFDLElBQUksQ0FBQ2IsTUFBTSxDQUFDLENBQUMxRixNQUFNLEVBQUU7Q0FDekU7Q0FDQTtDQUNBO1NBQ00sSUFBSSxDQUFDK0YsUUFBUSxFQUFFLENBQUE7Q0FDaEIsT0FBQTtPQUNELE9BQU8sSUFBSSxDQUFDRCxLQUFLLENBQUE7TUFDbEIsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDRW1ELElBQUFBLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQ3VILE1BQU0sR0FBRyxVQUFTQyxZQUFZLEVBQUU7Q0FDcEQ7Q0FDQTtDQUNNLE1BQUEsSUFBSTFKLENBQUMsRUFBRTdELENBQUMsRUFBRXdOLGdCQUFnQixDQUFBO0NBQzFCLE1BQUEsSUFBRyxJQUFJLENBQUNBLGdCQUFnQixLQUFLLElBQUksRUFBRTtTQUNqQ0EsZ0JBQWdCLEdBQUcxSCxNQUFNLENBQUNxRSxJQUFJLENBQUMsSUFBSSxDQUFDVCxLQUFLLENBQUMsQ0FBQTtDQUNsRCxPQUFPLE1BQU07U0FDTDhELGdCQUFnQixHQUFHLElBQUksQ0FBQ0EsZ0JBQWdCLENBQUE7Q0FDekMsT0FBQTtPQUVELElBQUlDLFdBQVcsR0FBRyxFQUFFLENBQUE7Q0FDcEIsTUFBQSxLQUFJek4sQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHd04sZ0JBQWdCLENBQUM1SixNQUFNLEVBQUU1RCxDQUFDLEVBQUUsRUFBRTtDQUMzQ3lOLFFBQUFBLFdBQVcsQ0FBQ0QsZ0JBQWdCLENBQUN4TixDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtDQUN0QyxPQUFBO09BRUQsS0FBSTZELENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRzBKLFlBQVksRUFBRTFKLENBQUMsRUFBRSxFQUFFO0NBQ2hDLFFBQUEsSUFBR0EsQ0FBQyxHQUFHLElBQUksQ0FBQ21KLGlCQUFpQixLQUFLLENBQUMsRUFBRTtDQUNuQyxVQUFBLEtBQUloTixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd3TixnQkFBZ0IsQ0FBQzVKLE1BQU0sRUFBRTVELENBQUMsRUFBRSxFQUFFO0NBQzNDLFlBQUEsSUFBSXdKLEtBQUssR0FBR2dFLGdCQUFnQixDQUFDeE4sQ0FBQyxDQUFDLENBQUE7Q0FDL0J5TixZQUFBQSxXQUFXLENBQUNqRSxLQUFLLENBQUMsQ0FBQzlDLElBQUksQ0FBRUUsZ0JBQWdCLENBQUMsSUFBSSxDQUFDOEMsS0FBSyxDQUFDRixLQUFLLENBQUMsRUFBRyxDQUFBO0NBQy9ELFdBQUE7Q0FDRixTQUFBO1NBQ0QsSUFBSSxDQUFDSSxJQUFJLEVBQUUsQ0FBQTtDQUNaLE9BQUE7Q0FDRCxNQUFBLE9BQU82RCxXQUFXLENBQUE7TUFDckIsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDRVosSUFBQUEsT0FBTyxDQUFDOUcsU0FBUyxDQUFDMkgsSUFBSSxHQUFHLFVBQVNILFlBQVksRUFBRTtPQUM5QyxLQUFJLElBQUkxSixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcwSixZQUFZLEVBQUUxSixDQUFDLEVBQUUsRUFBRTtTQUNwQyxJQUFJLENBQUMrRixJQUFJLEVBQUUsQ0FBQTtDQUNaLE9BQUE7TUFDRixDQUFBOztDQUVIO0NBQ0E7Q0FDQTtDQUNBO0NBQ0VpRCxJQUFBQSxPQUFPLENBQUM5RyxTQUFTLENBQUNvSCxPQUFPLEdBQUcsVUFBU0YsaUJBQWlCLEVBQUU7T0FDcEQsSUFBSSxDQUFDTyxnQkFBZ0IsR0FBR1AsaUJBQWlCLENBQUE7TUFDNUMsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNFSixJQUFBQSxPQUFPLENBQUM5RyxTQUFTLENBQUNtSCxJQUFJLEdBQUcsVUFBU0YsaUJBQWlCLEVBQUU7T0FDbkQsSUFBSSxDQUFDQSxpQkFBaUIsR0FBR0EsaUJBQWlCLENBQUE7TUFDM0MsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDRUgsSUFBQUEsT0FBTyxDQUFDOUcsU0FBUyxDQUFDOEQsZ0JBQWdCLEdBQUcsWUFBVztDQUM5QyxNQUFBLEtBQUksSUFBSWhHLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUN1SixRQUFRLENBQUN4SixNQUFNLEVBQUVDLENBQUMsRUFBRSxFQUFFO1NBQzVDLElBQUksQ0FBQ3VKLFFBQVEsQ0FBQ3ZKLENBQUMsQ0FBQyxDQUFDZ0csZ0JBQWdCLEVBQUUsQ0FBQTtDQUNwQyxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDRWdELElBQUFBLE9BQU8sQ0FBQzlHLFNBQVMsQ0FBQytELGVBQWUsR0FBRyxZQUFXO0NBQzdDLE1BQUEsS0FBSSxJQUFJakcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ3VKLFFBQVEsQ0FBQ3hKLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7U0FDNUMsSUFBSSxDQUFDdUosUUFBUSxDQUFDdkosQ0FBQyxDQUFDLENBQUNpRyxlQUFlLEVBQUUsQ0FBQTtDQUNuQyxPQUFBO01BQ0YsQ0FBQTs7Q0FFSDtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7S0FDRSxJQUFJNkQsV0FBVyxHQUFHLFVBQVNyRSxNQUFNLEVBQUVLLFFBQVEsRUFBRW1ELElBQUksRUFBRXRFLE9BQU8sRUFBRTtDQUMxRHFFLE1BQUFBLE9BQU8sQ0FBQzVHLElBQUksQ0FBQyxJQUFJLEVBQUVxRCxNQUFNLEVBQUVLLFFBQVEsRUFBRW1ELElBQUksRUFBRXRFLE9BQU8sQ0FBQyxDQUFBO01BQ3BELENBQUE7S0FFRG1GLFdBQVcsQ0FBQzVILFNBQVMsR0FBR0QsTUFBTSxDQUFDK0UsTUFBTSxDQUFDZ0MsT0FBTyxDQUFDOUcsU0FBUyxDQUFDLENBQUE7Q0FDeEQ0SCxJQUFBQSxXQUFXLENBQUM1SCxTQUFTLENBQUNZLFdBQVcsR0FBR2dILFdBQVcsQ0FBQTtDQUUvQ0EsSUFBQUEsV0FBVyxDQUFDNUgsU0FBUyxDQUFDc0gsdUJBQXVCLEdBQUcsVUFBUy9ELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLEVBQUM7Q0FDeEYsTUFBQSxPQUFPLENBQUUsSUFBSWlFLFdBQVcsQ0FBQ25ELE1BQU0sRUFBRUksS0FBSyxFQUFFQyxRQUFRLEVBQUVuQixPQUFPLENBQUMsQ0FBRSxDQUFBO01BQzdELENBQUE7O0NBR0g7S0FDRSxPQUFPO0NBQ0wzRCxNQUFBQSxLQUFLLEVBQUVBLEtBQUs7Q0FDWkUsTUFBQUEsY0FBYyxFQUFFQSxjQUFjO0NBQzlCRSxNQUFBQSxLQUFLLEVBQUVBLEtBQUs7Q0FDWjZELE1BQUFBLGdCQUFnQixFQUFFQSxnQkFBZ0I7Q0FDbENLLE1BQUFBLGVBQWUsRUFBRUEsZUFBZTtDQUNoQ2tDLE1BQUFBLHFCQUFxQixFQUFFQSxxQkFBcUI7Q0FDNUNFLE1BQUFBLG9CQUFvQixFQUFFQSxvQkFBb0I7Q0FDMUNTLE1BQUFBLG1DQUFtQyxFQUFFQSxtQ0FBbUM7Q0FDeEVDLE1BQUFBLGtDQUFrQyxFQUFFQSxrQ0FBa0M7Q0FDdEVDLE1BQUFBLGFBQWEsRUFBRUEsYUFBYTtDQUM1QkssTUFBQUEsc0JBQXNCLEVBQUVBLHNCQUFzQjtDQUM5Q0UsTUFBQUEsV0FBVyxFQUFFQSxXQUFXO0NBQ3hCa0IsTUFBQUEsV0FBVyxFQUFFQSxXQUFBQTtNQUNkLENBQUE7Q0FDSCxHQUFDLENBQUMsQ0FBQTs7OztDQzdsQ2EsU0FBU0MsU0FBU0EsQ0FBQy9NLENBQUMsRUFBRUMsQ0FBQyxFQUFFO0NBQ3RDLEVBQUEsT0FBT0QsQ0FBQyxJQUFJLElBQUksSUFBSUMsQ0FBQyxJQUFJLElBQUksR0FBR0wsR0FBRyxHQUFHSSxDQUFDLEdBQUdDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR0QsQ0FBQyxHQUFHQyxDQUFDLEdBQUcsQ0FBQyxHQUFHRCxDQUFDLElBQUlDLENBQUMsR0FBRyxDQUFDLEdBQUdMLEdBQUcsQ0FBQTtDQUNqRjs7Q0NFTyxVQUFVb04sT0FBT0EsQ0FBQ0MsTUFBTSxFQUFFQyxPQUFPLEVBQUU7R0FDYjtDQUN6QixJQUFBLEtBQUssSUFBSWxGLEtBQUssSUFBSWlGLE1BQU0sRUFBRTtPQUN4QixJQUFJakYsS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDQSxLQUFLLEdBQUcsQ0FBQ0EsS0FBSyxLQUFLQSxLQUFLLEVBQUU7Q0FDOUMsUUFBQSxNQUFNQSxLQUFLLENBQUE7Q0FDYixPQUFBO0NBQ0YsS0FBQTtDQUNGLEdBT0E7Q0FDRjs7Q0NPTyxTQUFTbUYsY0FBY0EsQ0FBQ0MsT0FBTyxHQUFHTCxTQUFTLEVBQUU7Q0FDbEQsRUFBQSxJQUFJSyxPQUFPLEtBQUtMLFNBQVMsRUFBRSxPQUFPTSxnQkFBZ0IsQ0FBQTtHQUNsRCxJQUFJLE9BQU9ELE9BQU8sS0FBSyxVQUFVLEVBQUUsTUFBTSxJQUFJRSxTQUFTLENBQUMsMkJBQTJCLENBQUMsQ0FBQTtDQUNuRixFQUFBLE9BQU8sQ0FBQ3ROLENBQUMsRUFBRUMsQ0FBQyxLQUFLO0NBQ2YsSUFBQSxNQUFNZixDQUFDLEdBQUdrTyxPQUFPLENBQUNwTixDQUFDLEVBQUVDLENBQUMsQ0FBQyxDQUFBO0NBQ3ZCLElBQUEsSUFBSWYsQ0FBQyxJQUFJQSxDQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU9BLENBQUMsQ0FBQTtDQUMxQixJQUFBLE9BQU8sQ0FBQ2tPLE9BQU8sQ0FBQ25OLENBQUMsRUFBRUEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLbU4sT0FBTyxDQUFDcE4sQ0FBQyxFQUFFQSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQTtJQUNyRCxDQUFBO0NBQ0gsQ0FBQTtDQUVPLFNBQVNxTixnQkFBZ0JBLENBQUNyTixDQUFDLEVBQUVDLENBQUMsRUFBRTtDQUNyQyxFQUFBLE9BQU8sQ0FBQ0QsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFQSxDQUFDLElBQUlBLENBQUMsQ0FBQyxLQUFLQyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUVBLENBQUMsSUFBSUEsQ0FBQyxDQUFDLENBQUMsS0FBS0QsQ0FBQyxHQUFHQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUdELENBQUMsR0FBR0MsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtDQUM1Rjs7Q0N0Q2UsU0FBU2tELEdBQUdBLENBQUM4SixNQUFNLEVBQUVDLE9BQU8sRUFBRTtDQUMzQyxFQUFBLElBQUkvSixHQUFHLENBQUE7R0FDb0I7Q0FDekIsSUFBQSxLQUFLLE1BQU02RSxLQUFLLElBQUlpRixNQUFNLEVBQUU7Q0FDMUIsTUFBQSxJQUFJakYsS0FBSyxJQUFJLElBQUksS0FDVDdFLEdBQUcsR0FBRzZFLEtBQUssSUFBSzdFLEdBQUcsS0FBSzJFLFNBQVMsSUFBSUUsS0FBSyxJQUFJQSxLQUFNLENBQUMsRUFBRTtDQUM3RDdFLFFBQUFBLEdBQUcsR0FBRzZFLEtBQUssQ0FBQTtDQUNiLE9BQUE7Q0FDRixLQUFBO0NBQ0YsR0FRQTtDQUNBLEVBQUEsT0FBTzdFLEdBQUcsQ0FBQTtDQUNaOztDQ25CZSxTQUFTRCxHQUFHQSxDQUFDK0osTUFBTSxFQUFFQyxPQUFPLEVBQUU7Q0FDM0MsRUFBQSxJQUFJaEssR0FBRyxDQUFBO0dBQ29CO0NBQ3pCLElBQUEsS0FBSyxNQUFNOEUsS0FBSyxJQUFJaUYsTUFBTSxFQUFFO0NBQzFCLE1BQUEsSUFBSWpGLEtBQUssSUFBSSxJQUFJLEtBQ1Q5RSxHQUFHLEdBQUc4RSxLQUFLLElBQUs5RSxHQUFHLEtBQUs0RSxTQUFTLElBQUlFLEtBQUssSUFBSUEsS0FBTSxDQUFDLEVBQUU7Q0FDN0Q5RSxRQUFBQSxHQUFHLEdBQUc4RSxLQUFLLENBQUE7Q0FDYixPQUFBO0NBQ0YsS0FBQTtDQUNGLEdBUUE7Q0FDQSxFQUFBLE9BQU85RSxHQUFHLENBQUE7Q0FDWjs7Q0NqQkE7Q0FDQTtDQUNlLFNBQVNxSyxXQUFXQSxDQUFDcEcsS0FBSyxFQUFFckgsQ0FBQyxFQUFFME4sSUFBSSxHQUFHLENBQUMsRUFBRUMsS0FBSyxHQUFHN00sUUFBUSxFQUFFd00sT0FBTyxFQUFFO0NBQ2pGdE4sRUFBQUEsQ0FBQyxHQUFHSSxJQUFJLENBQUNpRSxLQUFLLENBQUNyRSxDQUFDLENBQUMsQ0FBQTtDQUNqQjBOLEVBQUFBLElBQUksR0FBR3ROLElBQUksQ0FBQ2lFLEtBQUssQ0FBQ2pFLElBQUksQ0FBQ2lELEdBQUcsQ0FBQyxDQUFDLEVBQUVxSyxJQUFJLENBQUMsQ0FBQyxDQUFBO0NBQ3BDQyxFQUFBQSxLQUFLLEdBQUd2TixJQUFJLENBQUNpRSxLQUFLLENBQUNqRSxJQUFJLENBQUNnRCxHQUFHLENBQUNpRSxLQUFLLENBQUNwRSxNQUFNLEdBQUcsQ0FBQyxFQUFFMEssS0FBSyxDQUFDLENBQUMsQ0FBQTtHQUVyRCxJQUFJLEVBQUVELElBQUksSUFBSTFOLENBQUMsSUFBSUEsQ0FBQyxJQUFJMk4sS0FBSyxDQUFDLEVBQUUsT0FBT3RHLEtBQUssQ0FBQTtHQUU1Q2lHLE9BQU8sR0FBR0EsT0FBTyxLQUFLdEYsU0FBUyxHQUFHdUYsZ0JBQWdCLEdBQUdGLGNBQWMsQ0FBQ0MsT0FBTyxDQUFDLENBQUE7R0FFNUUsT0FBT0ssS0FBSyxHQUFHRCxJQUFJLEVBQUU7Q0FDbkIsSUFBQSxJQUFJQyxLQUFLLEdBQUdELElBQUksR0FBRyxHQUFHLEVBQUU7Q0FDdEIsTUFBQSxNQUFNN04sQ0FBQyxHQUFHOE4sS0FBSyxHQUFHRCxJQUFJLEdBQUcsQ0FBQyxDQUFBO0NBQzFCLE1BQUEsTUFBTTVKLENBQUMsR0FBRzlELENBQUMsR0FBRzBOLElBQUksR0FBRyxDQUFDLENBQUE7Q0FDdEIsTUFBQSxNQUFNbk0sQ0FBQyxHQUFHbkIsSUFBSSxDQUFDVCxHQUFHLENBQUNFLENBQUMsQ0FBQyxDQUFBO0NBQ3JCLE1BQUEsTUFBTW9GLENBQUMsR0FBRyxHQUFHLEdBQUc3RSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdrQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7Q0FDbkMsTUFBQSxNQUFNSCxFQUFFLEdBQUcsR0FBRyxHQUFHaEIsSUFBSSxDQUFDSSxJQUFJLENBQUNlLENBQUMsR0FBRzBELENBQUMsSUFBSXBGLENBQUMsR0FBR29GLENBQUMsQ0FBQyxHQUFHcEYsQ0FBQyxDQUFDLElBQUlpRSxDQUFDLEdBQUdqRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtPQUMxRSxNQUFNK04sT0FBTyxHQUFHeE4sSUFBSSxDQUFDaUQsR0FBRyxDQUFDcUssSUFBSSxFQUFFdE4sSUFBSSxDQUFDaUUsS0FBSyxDQUFDckUsQ0FBQyxHQUFHOEQsQ0FBQyxHQUFHbUIsQ0FBQyxHQUFHcEYsQ0FBQyxHQUFHdUIsRUFBRSxDQUFDLENBQUMsQ0FBQTtPQUM5RCxNQUFNeU0sUUFBUSxHQUFHek4sSUFBSSxDQUFDZ0QsR0FBRyxDQUFDdUssS0FBSyxFQUFFdk4sSUFBSSxDQUFDaUUsS0FBSyxDQUFDckUsQ0FBQyxHQUFHLENBQUNILENBQUMsR0FBR2lFLENBQUMsSUFBSW1CLENBQUMsR0FBR3BGLENBQUMsR0FBR3VCLEVBQUUsQ0FBQyxDQUFDLENBQUE7T0FDdEVxTSxXQUFXLENBQUNwRyxLQUFLLEVBQUVySCxDQUFDLEVBQUU0TixPQUFPLEVBQUVDLFFBQVEsRUFBRVAsT0FBTyxDQUFDLENBQUE7Q0FDbkQsS0FBQTtDQUVBLElBQUEsTUFBTWxMLENBQUMsR0FBR2lGLEtBQUssQ0FBQ3JILENBQUMsQ0FBQyxDQUFBO0tBQ2xCLElBQUlrRCxDQUFDLEdBQUd3SyxJQUFJLENBQUE7S0FDWixJQUFJck8sQ0FBQyxHQUFHc08sS0FBSyxDQUFBO0NBRWJHLElBQUFBLElBQUksQ0FBQ3pHLEtBQUssRUFBRXFHLElBQUksRUFBRTFOLENBQUMsQ0FBQyxDQUFBO0NBQ3BCLElBQUEsSUFBSXNOLE9BQU8sQ0FBQ2pHLEtBQUssQ0FBQ3NHLEtBQUssQ0FBQyxFQUFFdkwsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFMEwsSUFBSSxDQUFDekcsS0FBSyxFQUFFcUcsSUFBSSxFQUFFQyxLQUFLLENBQUMsQ0FBQTtLQUUxRCxPQUFPekssQ0FBQyxHQUFHN0QsQ0FBQyxFQUFFO0NBQ1p5TyxNQUFBQSxJQUFJLENBQUN6RyxLQUFLLEVBQUVuRSxDQUFDLEVBQUU3RCxDQUFDLENBQUMsRUFBRSxFQUFFNkQsQ0FBQyxFQUFFLEVBQUU3RCxDQUFDLENBQUE7Q0FDM0IsTUFBQSxPQUFPaU8sT0FBTyxDQUFDakcsS0FBSyxDQUFDbkUsQ0FBQyxDQUFDLEVBQUVkLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFYyxDQUFDLENBQUE7Q0FDcEMsTUFBQSxPQUFPb0ssT0FBTyxDQUFDakcsS0FBSyxDQUFDaEksQ0FBQyxDQUFDLEVBQUUrQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRS9DLENBQUMsQ0FBQTtDQUN0QyxLQUFBO0NBRUEsSUFBQSxJQUFJaU8sT0FBTyxDQUFDakcsS0FBSyxDQUFDcUcsSUFBSSxDQUFDLEVBQUV0TCxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUwTCxJQUFJLENBQUN6RyxLQUFLLEVBQUVxRyxJQUFJLEVBQUVyTyxDQUFDLENBQUMsQ0FBQyxLQUNuRCxFQUFFQSxDQUFDLEVBQUV5TyxJQUFJLENBQUN6RyxLQUFLLEVBQUVoSSxDQUFDLEVBQUVzTyxLQUFLLENBQUMsQ0FBQTtLQUUvQixJQUFJdE8sQ0FBQyxJQUFJVyxDQUFDLEVBQUUwTixJQUFJLEdBQUdyTyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0tBQ3hCLElBQUlXLENBQUMsSUFBSVgsQ0FBQyxFQUFFc08sS0FBSyxHQUFHdE8sQ0FBQyxHQUFHLENBQUMsQ0FBQTtDQUMzQixHQUFBO0NBRUEsRUFBQSxPQUFPZ0ksS0FBSyxDQUFBO0NBQ2QsQ0FBQTtDQUVBLFNBQVN5RyxJQUFJQSxDQUFDekcsS0FBSyxFQUFFbkUsQ0FBQyxFQUFFN0QsQ0FBQyxFQUFFO0NBQ3pCLEVBQUEsTUFBTStDLENBQUMsR0FBR2lGLEtBQUssQ0FBQ25FLENBQUMsQ0FBQyxDQUFBO0NBQ2xCbUUsRUFBQUEsS0FBSyxDQUFDbkUsQ0FBQyxDQUFDLEdBQUdtRSxLQUFLLENBQUNoSSxDQUFDLENBQUMsQ0FBQTtDQUNuQmdJLEVBQUFBLEtBQUssQ0FBQ2hJLENBQUMsQ0FBQyxHQUFHK0MsQ0FBQyxDQUFBO0NBQ2Q7O0NDM0NlLFNBQVMyTCxRQUFRQSxDQUFDWixNQUFNLEVBQUVhLENBQUMsRUFBRVosT0FBTyxFQUFFO0dBQ25ERCxNQUFNLEdBQUdjLFlBQVksQ0FBQ0MsSUFBSSxDQUFDaEIsT0FBTyxDQUFDQyxNQUFlLENBQUMsQ0FBQyxDQUFBO0NBQ3BELEVBQUEsSUFBSSxFQUFFdE4sQ0FBQyxHQUFHc04sTUFBTSxDQUFDbEssTUFBTSxDQUFDLElBQUlrTCxLQUFLLENBQUNILENBQUMsR0FBRyxDQUFDQSxDQUFDLENBQUMsRUFBRSxPQUFBO0NBQzNDLEVBQUEsSUFBSUEsQ0FBQyxJQUFJLENBQUMsSUFBSW5PLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBT3VELEdBQUcsQ0FBQytKLE1BQU0sQ0FBQyxDQUFBO0dBQ3ZDLElBQUlhLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTzNLLEdBQUcsQ0FBQzhKLE1BQU0sQ0FBQyxDQUFBO0NBQzlCLEVBQUEsSUFBSXROLENBQUM7Q0FDRHFELElBQUFBLENBQUMsR0FBRyxDQUFDckQsQ0FBQyxHQUFHLENBQUMsSUFBSW1PLENBQUM7Q0FDZkksSUFBQUEsRUFBRSxHQUFHaE8sSUFBSSxDQUFDaUUsS0FBSyxDQUFDbkIsQ0FBQyxDQUFDO0NBQ2xCbUwsSUFBQUEsTUFBTSxHQUFHaEwsR0FBRyxDQUFDb0ssV0FBVyxDQUFDTixNQUFNLEVBQUVpQixFQUFFLENBQUMsQ0FBQ0UsUUFBUSxDQUFDLENBQUMsRUFBRUYsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQ3pERyxNQUFNLEdBQUduTCxHQUFHLENBQUMrSixNQUFNLENBQUNtQixRQUFRLENBQUNGLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0dBQ3pDLE9BQU9DLE1BQU0sR0FBRyxDQUFDRSxNQUFNLEdBQUdGLE1BQU0sS0FBS25MLENBQUMsR0FBR2tMLEVBQUUsQ0FBQyxDQUFBO0NBQzlDOztDQ2xCZSxTQUFTSSxNQUFNQSxDQUFDckIsTUFBTSxFQUFFQyxPQUFPLEVBQUU7Q0FDOUMsRUFBQSxPQUFPVyxRQUFRLENBQUNaLE1BQU0sRUFBRSxHQUFZLENBQUMsQ0FBQTtDQUN2Qzs7Q0NKTyxTQUFTc0IsU0FBU0EsQ0FBQ3pPLENBQUMsRUFBRVosQ0FBQyxFQUFFSyxDQUFDLEVBQUU7R0FDakMsSUFBSSxDQUFDTyxDQUFDLEdBQUdBLENBQUMsQ0FBQTtHQUNWLElBQUksQ0FBQ1osQ0FBQyxHQUFHQSxDQUFDLENBQUE7R0FDVixJQUFJLENBQUNLLENBQUMsR0FBR0EsQ0FBQyxDQUFBO0NBQ1osQ0FBQTtDQUVBZ1AsU0FBUyxDQUFDckosU0FBUyxHQUFHO0NBQ3BCWSxFQUFBQSxXQUFXLEVBQUV5SSxTQUFTO0NBQ3RCeE4sRUFBQUEsS0FBSyxFQUFFLFVBQVNqQixDQUFDLEVBQUU7S0FDakIsT0FBT0EsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLEdBQUcsSUFBSXlPLFNBQVMsQ0FBQyxJQUFJLENBQUN6TyxDQUFDLEdBQUdBLENBQUMsRUFBRSxJQUFJLENBQUNaLENBQUMsRUFBRSxJQUFJLENBQUNLLENBQUMsQ0FBQyxDQUFBO0lBQ2xFO0NBQ0RpUCxFQUFBQSxTQUFTLEVBQUUsVUFBU3RQLENBQUMsRUFBRUssQ0FBQyxFQUFFO0NBQ3hCLElBQUEsT0FBT0wsQ0FBQyxLQUFLLENBQUMsR0FBR0ssQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLEdBQUcsSUFBSWdQLFNBQVMsQ0FBQyxJQUFJLENBQUN6TyxDQUFDLEVBQUUsSUFBSSxDQUFDWixDQUFDLEdBQUcsSUFBSSxDQUFDWSxDQUFDLEdBQUdaLENBQUMsRUFBRSxJQUFJLENBQUNLLENBQUMsR0FBRyxJQUFJLENBQUNPLENBQUMsR0FBR1AsQ0FBQyxDQUFDLENBQUE7SUFDbEc7Q0FDRGtQLEVBQUFBLEtBQUssRUFBRSxVQUFTQyxLQUFLLEVBQUU7S0FDckIsT0FBTyxDQUFDQSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDNU8sQ0FBQyxHQUFHLElBQUksQ0FBQ1osQ0FBQyxFQUFFd1AsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQzVPLENBQUMsR0FBRyxJQUFJLENBQUNQLENBQUMsQ0FBQyxDQUFBO0lBQ2hFO0NBQ0RvUCxFQUFBQSxNQUFNLEVBQUUsVUFBU3pQLENBQUMsRUFBRTtLQUNsQixPQUFPQSxDQUFDLEdBQUcsSUFBSSxDQUFDWSxDQUFDLEdBQUcsSUFBSSxDQUFDWixDQUFDLENBQUE7SUFDM0I7Q0FDRDBQLEVBQUFBLE1BQU0sRUFBRSxVQUFTclAsQ0FBQyxFQUFFO0tBQ2xCLE9BQU9BLENBQUMsR0FBRyxJQUFJLENBQUNPLENBQUMsR0FBRyxJQUFJLENBQUNQLENBQUMsQ0FBQTtJQUMzQjtDQUNEc1AsRUFBQUEsTUFBTSxFQUFFLFVBQVMvTixRQUFRLEVBQUU7Q0FDekIsSUFBQSxPQUFPLENBQUMsQ0FBQ0EsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQzVCLENBQUMsSUFBSSxJQUFJLENBQUNZLENBQUMsRUFBRSxDQUFDZ0IsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQ3ZCLENBQUMsSUFBSSxJQUFJLENBQUNPLENBQUMsQ0FBQyxDQUFBO0lBQzFFO0NBQ0RnUCxFQUFBQSxPQUFPLEVBQUUsVUFBUzVQLENBQUMsRUFBRTtLQUNuQixPQUFPLENBQUNBLENBQUMsR0FBRyxJQUFJLENBQUNBLENBQUMsSUFBSSxJQUFJLENBQUNZLENBQUMsQ0FBQTtJQUM3QjtDQUNEaVAsRUFBQUEsT0FBTyxFQUFFLFVBQVN4UCxDQUFDLEVBQUU7S0FDbkIsT0FBTyxDQUFDQSxDQUFDLEdBQUcsSUFBSSxDQUFDQSxDQUFDLElBQUksSUFBSSxDQUFDTyxDQUFDLENBQUE7SUFDN0I7Q0FDRGtQLEVBQUFBLFFBQVEsRUFBRSxVQUFTOVAsQ0FBQyxFQUFFO0NBQ3BCLElBQUEsT0FBT0EsQ0FBQyxDQUFDK1AsSUFBSSxFQUFFLENBQUNDLE1BQU0sQ0FBQ2hRLENBQUMsQ0FBQ2lRLEtBQUssRUFBRSxDQUFDQyxHQUFHLENBQUMsSUFBSSxDQUFDTixPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUNNLEdBQUcsQ0FBQ2xRLENBQUMsQ0FBQzJQLE1BQU0sRUFBRTNQLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDM0U7Q0FDRG1RLEVBQUFBLFFBQVEsRUFBRSxVQUFTOVAsQ0FBQyxFQUFFO0NBQ3BCLElBQUEsT0FBT0EsQ0FBQyxDQUFDMFAsSUFBSSxFQUFFLENBQUNDLE1BQU0sQ0FBQzNQLENBQUMsQ0FBQzRQLEtBQUssRUFBRSxDQUFDQyxHQUFHLENBQUMsSUFBSSxDQUFDTCxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUNLLEdBQUcsQ0FBQzdQLENBQUMsQ0FBQ3NQLE1BQU0sRUFBRXRQLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDM0U7R0FDRDRGLFFBQVEsRUFBRSxZQUFXO0NBQ25CLElBQUEsT0FBTyxZQUFZLEdBQUcsSUFBSSxDQUFDakcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUNLLENBQUMsR0FBRyxVQUFVLEdBQUcsSUFBSSxDQUFDTyxDQUFDLEdBQUcsR0FBRyxDQUFBO0NBQ3pFLEdBQUE7Q0FDRixDQUFDLENBQUE7Q0FJcUJ5TyxTQUFTLENBQUNySixTQUFTOztDQzVDekM7Q0FDQTtBQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0FBQ0E7Q0FDQTtDQUNBO0NBQ0E7QUFDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0FBQ0E7Q0FDQTtBQUNBO0NBQ0E7Q0FDQTtDQUNlLE1BQU1vSyxPQUFPLENBQUM7Q0FDM0IsRUFBQSxPQUFPQyxLQUFLQSxDQUFDclEsQ0FBQyxFQUFFYyxDQUFDLEVBQUUyRixDQUFDLEVBQUU7S0FDcEIsSUFBSXpHLENBQUMsSUFBSSxDQUFDLEVBQUU7T0FDVixPQUFPQSxDQUFDLElBQUljLENBQUMsQ0FBQTtDQUNmLEtBQUE7Q0FDQTtDQUNBLElBQUEsT0FBTyxDQUFDMkYsQ0FBQyxHQUFJLENBQUMsQ0FBQ3pHLENBQUMsS0FBS2MsQ0FBRSxDQUFBO0NBQ3pCLEdBQUE7Q0FFQSxFQUFBLE9BQU93UCxLQUFLQSxDQUFDdFEsQ0FBQyxFQUFFeUcsQ0FBQyxFQUFFckIsQ0FBQyxFQUFFO0tBQ3BCLElBQUlwRixDQUFDLElBQUksQ0FBQyxFQUFFO0NBQ1YsTUFBQSxPQUFPZ0IsSUFBSSxDQUFDVCxHQUFHLENBQUM2RSxDQUFDLENBQUMsR0FBR3BFLElBQUksQ0FBQ1QsR0FBRyxDQUFDUCxDQUFDLENBQUMsQ0FBQTtDQUNsQyxLQUFBO0NBQ0E7S0FDQSxPQUFPLENBQUNnQixJQUFJLENBQUNULEdBQUcsQ0FBQyxDQUFDNkUsQ0FBQyxDQUFDLEdBQUdwRSxJQUFJLENBQUNULEdBQUcsQ0FBQ2tHLENBQUMsQ0FBQyxJQUFJekYsSUFBSSxDQUFDVCxHQUFHLENBQUMsQ0FBQ1AsQ0FBQyxDQUFDLENBQUE7Q0FDcEQsR0FBQTtDQUVBLEVBQUEsT0FBT3VRLEtBQUtBLENBQUN2USxDQUFDLEVBQUVjLENBQUMsRUFBRXNFLENBQUMsRUFBRTtLQUNwQixJQUFJcEYsQ0FBQyxJQUFJLENBQUMsRUFBRTtDQUNWLE1BQUEsT0FBT1UsR0FBRyxDQUFBO0NBQ1osS0FBQTtDQUNBO0NBQ0EsSUFBQSxPQUFPLENBQUMwRSxDQUFDLEdBQUksQ0FBQyxDQUFDcEYsQ0FBQyxLQUFLYyxDQUFFLENBQUE7Q0FDekIsR0FBQTtDQUVBLEVBQUEsT0FBTzBQLElBQUlBLENBQUM1QixDQUFDLEVBQUU2QixDQUFDLEVBQUU7Q0FDaEIsSUFBQSxPQUFRN0IsQ0FBQyxJQUFJNkIsQ0FBQyxHQUFLLENBQUU3QixDQUFDLElBQUk2QixDQUFDLEdBQUssQ0FBQyxDQUFDLEdBQUc3QixDQUFDLEtBQUs2QixDQUFFLE1BQU0sQ0FBQyxHQUFHQSxDQUFDLENBQUUsQ0FBQTtDQUM1RCxHQUFBO0NBRUEsRUFBQSxPQUFPQyxJQUFJQSxDQUFDdEwsQ0FBQyxFQUFFdUwsQ0FBQyxFQUFFO0NBQ2hCO0tBQ0EsSUFBSSxPQUFPdkwsQ0FBQyxLQUFLLFFBQVEsSUFBSSxPQUFPdUwsQ0FBQyxLQUFLLFFBQVEsRUFBRTtPQUNsRCxPQUFPdkwsQ0FBQyxHQUFHdUwsQ0FBQyxDQUFBO0NBQ2QsS0FBQTtDQUNBO0tBQ0EsSUFBSXZMLENBQUMsWUFBWXNCLEtBQUssSUFBSWlLLENBQUMsWUFBWWpLLEtBQUssSUFBSXRCLENBQUMsQ0FBQ3ZCLE1BQU0sR0FBRyxDQUFDLElBQUl1QixDQUFDLENBQUN2QixNQUFNLEtBQUs4TSxDQUFDLENBQUM5TSxNQUFNLEVBQUU7T0FDckYsSUFBSXNCLENBQUMsR0FBRyxDQUFDLENBQUE7Q0FDVCxNQUFBLEtBQUssSUFBSTFFLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRzJFLENBQUMsQ0FBQ3ZCLE1BQU0sRUFBRXBELENBQUMsSUFBSSxDQUFDLEVBQUU7U0FDcEMwRSxDQUFDLElBQUlDLENBQUMsQ0FBQzNFLENBQUMsQ0FBQyxHQUFHa1EsQ0FBQyxDQUFDbFEsQ0FBQyxDQUFDLENBQUE7Q0FDbEIsT0FBQTtDQUNBLE1BQUEsT0FBTzBFLENBQUMsQ0FBQTtDQUNWLEtBQUE7Q0FDQTtDQUNBLElBQUEsT0FBT3pFLEdBQUcsQ0FBQTtDQUNaLEdBQUE7Q0FDRjs7Q0NwRUE7O0NDREE7O0NBVUFrUSxJQUFJLENBQUNDLFNBQVMsR0FBSUMsS0FBSyxJQUFLO0NBQzFCLEVBQUEsTUFBTXZILE1BQU0sR0FBRztDQUNiOUYsSUFBQUEsS0FBSyxFQUFFO0NBQUN1RixNQUFBQSxJQUFJLEVBQUUsTUFBTTtDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQztDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQTtNQUFFO0NBQ3pDdEUsSUFBQUEsTUFBTSxFQUFFO0NBQUNvRSxNQUFBQSxJQUFJLEVBQUUsTUFBTTtDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQztDQUFFQyxNQUFBQSxLQUFLLEVBQUUsRUFBQTtNQUFHO0NBQzNDMUcsSUFBQUEsS0FBSyxFQUFFO0NBQUN3RyxNQUFBQSxJQUFJLEVBQUUsTUFBTTtDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQztDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQTtNQUFFO0NBQ3pDNkgsSUFBQUEsSUFBSSxFQUFFO0NBQUMvSCxNQUFBQSxJQUFJLEVBQUUsTUFBTTtDQUFFQyxNQUFBQSxLQUFLLEVBQUUsQ0FBQztDQUFFQyxNQUFBQSxLQUFLLEVBQUUsR0FBQTtDQUFHLEtBQUE7SUFDMUMsQ0FBQTtDQUVELEVBQUEsTUFBTThILE9BQU8sR0FBR0EsQ0FBQ3JILEtBQUssRUFBRW9ELElBQUksS0FBSztLQUMvQixJQUFJa0UsRUFBRSxHQUFHLENBQUMsQ0FBQTs7Q0FFVjtLQUNBLE1BQU1DLFNBQVMsR0FBRyxHQUFHLENBQUE7S0FDckIsTUFBTUMsZUFBZSxHQUFHLEdBQUcsQ0FBQTtDQUMzQkYsSUFBQUEsRUFBRSxJQUFJRyx5QkFBdUIsQ0FDM0J6SCxLQUFLLENBQUNsRyxLQUFLLEVBQ1h5TixTQUFTLEdBQUdDLGVBQWUsRUFDM0IsQ0FBQyxDQUFDLEdBQUdELFNBQVMsSUFBSUMsZUFDcEIsQ0FBQyxDQUFBO0NBQ0Q7O0tBRUEsTUFBTUUsVUFBVSxHQUFHLENBQUMsQ0FBQTtLQUNwQixNQUFNQyxXQUFXLEdBQUcsQ0FBQyxDQUFBO0NBQ3JCTCxJQUFBQSxFQUFFLElBQUlHLDBCQUF3QixDQUM1QnpILEtBQUssQ0FBQy9FLE1BQU0sRUFDWjBNLFdBQVcsRUFDWEEsV0FBVyxHQUFHRCxVQUNoQixDQUFDLENBQUE7Q0FDRDs7S0FFQSxNQUFNRSxTQUFTLEdBQUcsR0FBRyxDQUFBO0tBQ3JCLE1BQU1DLGVBQWUsR0FBRyxHQUFHLENBQUE7Q0FDM0JQLElBQUFBLEVBQUUsSUFBSUcseUJBQXVCLENBQzNCekgsS0FBSyxDQUFDbkgsS0FBSyxFQUNYK08sU0FBUyxHQUFHQyxlQUFlLEVBQzNCLENBQUMsQ0FBQyxHQUFHRCxTQUFTLElBQUlDLGVBQ3BCLENBQUMsQ0FBQTtDQUNEOztLQUVBLE1BQU1DLFFBQVEsR0FBRyxDQUFDLENBQUE7S0FDbEIsTUFBTUMsU0FBUyxHQUFHLENBQUMsQ0FBQTtDQUNuQlQsSUFBQUEsRUFBRSxJQUFJRywwQkFBd0IsQ0FDNUJ6SCxLQUFLLENBQUNvSCxJQUFJLEVBQ1ZXLFNBQVMsRUFDVEEsU0FBUyxHQUFHRCxRQUNkLENBQUMsQ0FBQTtDQUNEOztDQUVBO0NBQ0ExRSxJQUFBQSxJQUFJLENBQUM0RSxPQUFPLENBQUVDLE1BQU0sSUFBSztDQUN2QjtDQUNBLE1BQUEsTUFBTUMsRUFBRSxHQUFHekIsT0FBTyxDQUFDQyxLQUFLLENBQUN1QixNQUFNLENBQUNFLEVBQUUsRUFBRW5JLEtBQUssQ0FBQ2xHLEtBQUssRUFBRWtHLEtBQUssQ0FBQy9FLE1BQU0sQ0FBQyxDQUFBO0NBQzlELE1BQUEsTUFBTW1OLEVBQUUsR0FBRzNCLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDdUIsTUFBTSxDQUFDSSxFQUFFLEVBQUVySSxLQUFLLENBQUNsRyxLQUFLLEVBQUVrRyxLQUFLLENBQUMvRSxNQUFNLENBQUMsQ0FBQTtDQUM5RCxNQUFBLE1BQU1xTixFQUFFLEdBQUc3QixPQUFPLENBQUNDLEtBQUssQ0FBQ3VCLE1BQU0sQ0FBQ00sRUFBRSxFQUFFdkksS0FBSyxDQUFDbEcsS0FBSyxFQUFFa0csS0FBSyxDQUFDL0UsTUFBTSxDQUFDLENBQUE7O0NBRTlEO0NBQ0EsTUFBQSxNQUFNdU4sRUFBRSxHQUFHL0IsT0FBTyxDQUFDSSxJQUFJLENBQUNvQixNQUFNLENBQUNRLEVBQUUsRUFBRXpJLEtBQUssQ0FBQ25ILEtBQUssQ0FBQyxDQUFBO0NBQy9DLE1BQUEsTUFBTTZQLEVBQUUsR0FBRyxDQUFDLEdBQUdGLEVBQUUsQ0FBQTs7Q0FFakI7T0FDQSxNQUFNRyxFQUFFLEdBQUdELEVBQUUsR0FBR1IsRUFBRSxHQUFHTSxFQUFFLEdBQUdKLEVBQUUsQ0FBQTtPQUM1QixNQUFNUSxFQUFFLEdBQUdOLEVBQUUsQ0FBQTs7Q0FFYjtDQUNBO0NBQ0EsTUFBQSxNQUFNTyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBR3hSLElBQUksQ0FBQ0MsR0FBRyxDQUFDMEksS0FBSyxDQUFDb0gsSUFBSSxJQUFJd0IsRUFBRSxHQUFHRCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7O0NBRXpEO09BQ0EsTUFBTUcsUUFBUSxHQUFJYixNQUFNLENBQUNhLFFBQVEsS0FBSyxNQUFNLEdBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtPQUVyRHhCLEVBQUUsSUFBSUcseUJBQXVCLENBQUNxQixRQUFRLEVBQUVELE1BQU0sQ0FBQyxDQUFBO0NBQ2pELEtBQUMsQ0FBQyxDQUFBO0NBRUYsSUFBQSxPQUFPdkIsRUFBRSxDQUFBO0lBQ1YsQ0FBQTs7Q0FFRDtDQUNBLEVBQUEsTUFBTXlCLE9BQU8sR0FBRyxJQUFJQyx1QkFBcUIsQ0FBQ3BKLE1BQU0sRUFBRXlILE9BQU8sRUFBRUYsS0FBSyxDQUFDL0QsSUFBSSxDQUFDLENBQUE7Q0FDdEU7Q0FDQTJGLEVBQUFBLE9BQU8sQ0FBQy9FLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtDQUNsQixFQUFBLE1BQU1pRixPQUFPLEdBQUdGLE9BQU8sQ0FBQ25GLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTs7Q0FFcEM7Q0FDQSxFQUFBLE1BQU1zRixPQUFPLEdBQUc7S0FDZHBQLEtBQUssRUFBRXFQLE1BQVMsQ0FBQ0YsT0FBTyxDQUFDblAsS0FBSyxDQUFDO0tBQy9CbUIsTUFBTSxFQUFFa08sTUFBUyxDQUFDRixPQUFPLENBQUNoTyxNQUFNLENBQUM7S0FDakNwQyxLQUFLLEVBQUVzUSxNQUFTLENBQUNGLE9BQU8sQ0FBQ3BRLEtBQUssQ0FBQztDQUMvQnVPLElBQUFBLElBQUksRUFBRStCLE1BQVMsQ0FBQ0YsT0FBTyxDQUFDN0IsSUFBSSxDQUFBO0lBQzdCLENBQUE7R0FFREgsSUFBSSxDQUFDbUMsV0FBVyxDQUFDO0NBQUNGLElBQUFBLE9BQU8sRUFBRUEsT0FBTztDQUFFRCxJQUFBQSxPQUFPLEVBQUVBLE9BQUFBO0NBQU8sR0FBQyxDQUFDLENBQUE7Q0FDeEQsQ0FBQzs7Ozs7OyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlswLDEsMiwzLDQsNSw2LDcsOCw5LDEwXX0=",function(t){return SY=SY||wY(UY,AY),new Worker(SY,t)});const kY=s`
  /* inject:start */
.js-plotly-plot .plotly, .js-plotly-plot .plotly div {
  direction: ltr;
  font-family: "Open Sans", verdana, arial, sans-serif;
  margin: 0;
  padding: 0;
}
.js-plotly-plot .plotly input, .js-plotly-plot .plotly button {
  font-family: "Open Sans", verdana, arial, sans-serif;
}
.js-plotly-plot .plotly input:focus, .js-plotly-plot .plotly button:focus {
  outline: none;
}
.js-plotly-plot .plotly a {
  text-decoration: none;
}
.js-plotly-plot .plotly a:hover {
  text-decoration: none;
}
.js-plotly-plot .plotly .crisp {
  shape-rendering: crispEdges;
}
.js-plotly-plot .plotly .user-select-none {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
.js-plotly-plot .plotly svg {
  overflow: hidden;
}
.js-plotly-plot .plotly svg a {
  fill: #447adb;
}
.js-plotly-plot .plotly svg a:hover {
  fill: #3c6dc5;
}
.js-plotly-plot .plotly .main-svg {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}
.js-plotly-plot .plotly .main-svg .draglayer {
  pointer-events: all;
}
.js-plotly-plot .plotly .cursor-default {
  cursor: default;
}
.js-plotly-plot .plotly .cursor-pointer {
  cursor: pointer;
}
.js-plotly-plot .plotly .cursor-crosshair {
  cursor: crosshair;
}
.js-plotly-plot .plotly .cursor-move {
  cursor: move;
}
.js-plotly-plot .plotly .cursor-col-resize {
  cursor: col-resize;
}
.js-plotly-plot .plotly .cursor-row-resize {
  cursor: row-resize;
}
.js-plotly-plot .plotly .cursor-ns-resize {
  cursor: ns-resize;
}
.js-plotly-plot .plotly .cursor-ew-resize {
  cursor: ew-resize;
}
.js-plotly-plot .plotly .cursor-sw-resize {
  cursor: sw-resize;
}
.js-plotly-plot .plotly .cursor-s-resize {
  cursor: s-resize;
}
.js-plotly-plot .plotly .cursor-se-resize {
  cursor: se-resize;
}
.js-plotly-plot .plotly .cursor-w-resize {
  cursor: w-resize;
}
.js-plotly-plot .plotly .cursor-e-resize {
  cursor: e-resize;
}
.js-plotly-plot .plotly .cursor-nw-resize {
  cursor: nw-resize;
}
.js-plotly-plot .plotly .cursor-n-resize {
  cursor: n-resize;
}
.js-plotly-plot .plotly .cursor-ne-resize {
  cursor: ne-resize;
}
.js-plotly-plot .plotly .cursor-grab {
  cursor: -webkit-grab;
  cursor: grab;
}
.js-plotly-plot .plotly .modebar {
  position: absolute;
  top: 2px;
  right: 2px;
}
.js-plotly-plot .plotly .ease-bg {
  -webkit-transition: background-color 0.3s ease 0s;
  -moz-transition: background-color 0.3s ease 0s;
  -ms-transition: background-color 0.3s ease 0s;
  -o-transition: background-color 0.3s ease 0s;
  transition: background-color 0.3s ease 0s;
}
.js-plotly-plot .plotly .modebar--hover > :not(.watermark) {
  opacity: 0;
  -webkit-transition: opacity 0.3s ease 0s;
  -moz-transition: opacity 0.3s ease 0s;
  -ms-transition: opacity 0.3s ease 0s;
  -o-transition: opacity 0.3s ease 0s;
  transition: opacity 0.3s ease 0s;
}
.js-plotly-plot .plotly:hover .modebar--hover .modebar-group {
  opacity: 1;
}
.js-plotly-plot .plotly .modebar-group {
  float: left;
  display: inline-block;
  box-sizing: border-box;
  padding-left: 8px;
  position: relative;
  vertical-align: middle;
  white-space: nowrap;
}
.js-plotly-plot .plotly .modebar-btn {
  position: relative;
  font-size: 16px;
  padding: 3px 4px;
  height: 22px;
  /* display: inline-block; including this breaks 3d interaction in .embed mode. Chrome bug? */
  cursor: pointer;
  line-height: normal;
  box-sizing: border-box;
}
.js-plotly-plot .plotly .modebar-btn svg {
  position: relative;
  top: 2px;
}
.js-plotly-plot .plotly .modebar.vertical {
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  align-content: flex-end;
  max-height: 100%;
}
.js-plotly-plot .plotly .modebar.vertical svg {
  top: -1px;
}
.js-plotly-plot .plotly .modebar.vertical .modebar-group {
  display: block;
  float: none;
  padding-left: 0px;
  padding-bottom: 8px;
}
.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn {
  display: block;
  text-align: center;
}
.js-plotly-plot .plotly [data-title] {
  /**
   * tooltip body
   */
}
.js-plotly-plot .plotly [data-title]:before, .js-plotly-plot .plotly [data-title]:after {
  position: absolute;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  -ms-transform: translate3d(0, 0, 0);
  -o-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
  display: none;
  opacity: 0;
  z-index: 1001;
  pointer-events: none;
  top: 110%;
  right: 50%;
}
.js-plotly-plot .plotly [data-title]:hover:before, .js-plotly-plot .plotly [data-title]:hover:after {
  display: block;
  opacity: 1;
}
.js-plotly-plot .plotly [data-title]:before {
  content: "";
  position: absolute;
  background: transparent;
  border: 6px solid transparent;
  z-index: 1002;
  margin-top: -12px;
  border-bottom-color: #69738a;
  margin-right: -6px;
}
.js-plotly-plot .plotly [data-title]:after {
  content: attr(data-title);
  background: #69738a;
  color: white;
  padding: 8px 10px;
  font-size: 12px;
  line-height: 12px;
  white-space: nowrap;
  margin-right: -18px;
  border-radius: 2px;
}
.js-plotly-plot .plotly .vertical [data-title]:before, .js-plotly-plot .plotly .vertical [data-title]:after {
  top: 0%;
  right: 200%;
}
.js-plotly-plot .plotly .vertical [data-title]:before {
  border: 6px solid transparent;
  border-left-color: #69738a;
  margin-top: 8px;
  margin-right: -30px;
}

.plotly-notifier {
  font-family: "Open Sans", verdana, arial, sans-serif;
  position: fixed;
  top: 50px;
  right: 20px;
  z-index: 10000;
  font-size: 10pt;
  max-width: 180px;
}
.plotly-notifier p {
  margin: 0;
}
.plotly-notifier .notifier-note {
  min-width: 180px;
  max-width: 250px;
  border: 1px solid #fff;
  z-index: 3000;
  margin: 0;
  background-color: #8c97af;
  background-color: rgba(140, 151, 175, 0.9);
  color: #fff;
  padding: 10px;
  overflow-wrap: break-word;
  word-wrap: break-word;
  -ms-hyphens: auto;
  -webkit-hyphens: auto;
  hyphens: auto;
}
.plotly-notifier .notifier-close {
  color: #fff;
  opacity: 0.8;
  float: right;
  padding: 0 5px;
  background: none;
  border: none;
  font-size: 20px;
  font-weight: bold;
  line-height: 20px;
}
.plotly-notifier .notifier-close:hover {
  color: #444;
  text-decoration: none;
  cursor: pointer;
}
  /* inject:end */
`;EV.register([CY]);class GY extends Sa{static get properties(){return{}}constructor(){super(),this.a=1,this.l=1,this.g=1,this.choices=[],this.samples=null,this.working=!1,this.queued=!1,this.worker=new LY,this.worker.onmessage=t=>{this.working=!1,this.samples=t.data.samples,this.a=t.data.results.alpha,this.l=t.data.results.lambda,this.g=t.data.results.gamma,this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-fit-update",{detail:{a:this.a,l:this.l,g:this.g},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}clear(){this.choices=[],this.fit()}get(t="default"){const e=this.choices.find((e=>e.name===t));return void 0===e?null:e}set(t,e,n,r,i,a="",o=""){const s=this.choices.find((t=>t.name===a));void 0===s?this.choices.push({xl:t,xw:e,pw:n,xs:r,response:i,name:a,label:o}):(s.xl=t,s.xw=e,s.pw=n,s.xs=r,s.response=i,s.label=o),this.fit()}static get styles(){return[super.styles,kY,s`
        /* :host {
          display: inline-block;
        } */

        .trace,
        .hist {
          display: inline-block;

          width: 20rem;
          height: 15rem;
        }
      `]}render(){return W`
      <div>
        <div>After ${this.choices.length} trials:</div>
        <div>Current:
          <var class="math-var a">α</var> = ${this.a.toFixed(2)},
          <var class="math-var l">λ</var> = ${this.l.toFixed(2)},
          <var class="math-var g">γ</var> = ${this.g.toFixed(2)}
        </div>
        <div class="param">
          <div class="trace alpha"></div>
          <div class="hist alpha"></div>
        </div>
        <div class="param">
          <div class="trace lambda"></div>
          <div class="hist lambda"></div>
        </div>
        <div class="param">
          <div class="trace gamma"></div>
          <div class="hist gamma"></div>
        </div>
        <div class="param">
          <div class="trace luce"></div>
          <div class="hist luce"></div>
        </div>
      </div>
    `}plotParam(t){const e={l:40,r:10,b:40,t:40,pad:4};EV.react(this.shadowRoot.querySelector(`.trace.${t}`),[{y:this.samples[t]}],{margin:e,title:`Traceplot of ${t}`}),EV.react(this.shadowRoot.querySelector(`.hist.${t}`),[{x:this.samples[t],type:"histogram"}],{margin:e,title:`Posterior of ${t}`})}update(t){super.update(t),null!==this.samples&&(this.plotParam("alpha"),this.plotParam("lambda"),this.plotParam("gamma"),this.plotParam("luce"))}}customElements.define("cpt-fit",GY);class _Y extends(Aa(Sa)){static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.g=.5,this.p=null,this.label="",this.function="default",this.functions=[{name:"default",g:this.g}],this.probabilities=[{name:"default",p:this.p,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.alignState()}alignState(){this.functions[0].g=this.g,this.probabilities[0].p=this.p,this.probabilities[0].label=this.label,this.probabilities[0].function=this.function,this.probabilities.forEach((t=>{const e=this.functions.find((e=>e.name===t.function));t.w=$a.pg2w(t.p,e.g)})),this.w=this.probabilities[0].w}trial(t,e,n,r,i,a){this.trialCount&&this.removeProbability(`${this.trialCount}`),this.xl=t,this.xw=e,this.pw=n,this.xs=r,this.trialCount=i,this.response=a,this.setProbability(this.pw,`${this.trialCount}`,"","default",!0)}pauseTrial(){const t=Ke(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum((t=>(t.paused=!0,t)))}resumeTrial(){Ke(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((t=>(t.paused=!1,t))),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearProbabilities(){this.probabilities.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearProbabilities()}removeFunction(t){this.functions=this.functions.filter((e=>e.name!==t)),this.requestUpdate()}removeProbability(t){this.probabilities=this.probabilities.filter((e=>e.name!==t)),this.requestUpdate()}remove(t){this.removeFunction(t),this.removeProbability(t)}getFunction(t="default"){return this.functions.find((e=>e.name===t))}getProbability(t="default"){return this.probabilities.find((e=>e.name===t))}get(t="default"){return{...this.getFunction(t),...this.getProbability(t)}}setFunction(t,e="default"){"default"===e&&(this.g=t);const n=this.functions.find((t=>t.name===e));void 0===n?this.functions.push({name:e,g:t}):n.g=t,this.requestUpdate()}setProbability(t,e="default",n="",r=e,i=!1){"default"===e&&(this.p=t,this.label=n);const a=this.probabilities.find((t=>t.name===e));void 0===a?this.probabilities.push({name:e,p:t,label:n,function:r,trial:i,new:i}):(a.p=t,a.label=n,a.function=r),this.requestUpdate()}set(t,e,n="default",r="",i=n){this.setFunction(e,i),this.setProbability(t,n,r,i)}static get styles(){return[super.styles,s`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve.interactive:focus {
          filter: url("#shadow-8");
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        /* Make a larger target for touch users */
        @media (pointer: coarse) {
          .point.interactive .circle {
            stroke: #000000;
            stroke-opacity: 0;
            stroke-width: 12px;
          }
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-p,
        .line-w {
          fill: none;
          stroke-width: 2;
        }

        .line-p {
          stroke: var(---color-p);
        }

        .line-w {
          stroke: var(---color-w);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }
      `]}render(){return W`
      ${Sa.svgFilters}
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,n=this.height,r=Math.min(e,n),i=2*this.rem,a=3*this.rem,o=3*this.rem,s=r-(i+a),l=r-(o+2*this.rem),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),u=Oi().domain([0,1]).range([0,l]).clamp(!0);this.xScale=u;const h=Oi().domain([1,0]).range([0,s]);this.yScale=h;const d=un().subject(((t,e)=>({x:t.x,y:this.yScale($a.pg2w(this.xScale.invert(t.x),e.g)),p:this.xScale.invert(t.x),g:e.g,w:$a.pg2w(this.xScale.invert(t.x),e.g)}))).on("start",(t=>{Ke(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const n=this.xScale.invert(t.x),r=this.yScale.invert(t.y),i=n-t.subject.p,a=r-t.subject.w,o=(i**2+a**2)**.5,s=t.subject.p>t.subject.w?i>a?t.subject.g-o:t.subject.g+o:i>a?t.subject.g+o:t.subject.g-o;e.g=s>1?1:s<0?0:s,"default"===e.name&&(this.g=e.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{Ke(t.currentTarget).classed("dragging",!1)})),g=un().subject(((t,e)=>({x:this.xScale(e.p),y:this.yScale(e.w)}))).on("start",(t=>{Ke(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const n=this.xScale.invert(t.x);e.p=n<0?0:n>1?1:n,"default"===e.name&&(this.p=e.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,w:e.w,label:e.label,g:this.getFunction(e.function).g},bubbles:!0}))})).on("end",(t=>{Ke(t.currentTarget).classed("dragging",!1)})),f=Ba().x((t=>u(t.p))).y((t=>h(t.w))),p=Ke(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),v=p.enter().append("svg").classed("main",!0),m=v.merge(p).attr("viewBox",`0 0 ${r} ${r}`),y=v.append("g").classed("plot",!0),b=m.select(".plot").attr("transform",`translate(${o}, ${i})`);y.append("clipPath").attr("id","clip-cpt-value").append("rect"),b.select("clipPath rect").attr("height",s+1).attr("width",l+1);const x=y.append("g").classed("underlayer",!0),B=b.select(".underlayer");x.append("rect").classed("background",!0),B.select(".background").attr("height",s).attr("width",l),x.append("g").classed("scale-x",!0);B.select(".scale-x").attr("transform",`translate(0, ${s})`).transition().duration(2*c).ease(gi).call(Gt(u)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const I=x.append("text").classed("title-x",!0).attr("text-anchor","middle");I.append("tspan").classed("name",!0).text("Probability ("),I.append("tspan").classed("math-var p",!0).text("p"),I.append("tspan").classed("name",!0).text(")"),B.select(".title-x").attr("transform",`translate(${l/2}, ${s+2.25*this.rem})`),x.append("g").classed("scale-y",!0);B.select(".scale-y").transition().duration(2*c).ease(gi).call(_t(h)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const F=x.append("text").classed("title-y",!0).attr("text-anchor","middle");F.append("tspan").classed("name",!0).text("Decision Weight ("),F.append("tspan").classed("math-var v",!0).text("w"),F.append("tspan").classed("name",!0).text(")"),B.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${s/2})rotate(-90)`),x.append("line").classed("diagonal",!0),B.select(".diagonal").transition().duration(2*c).attr("x1",u(0)).attr("y1",h(0)).attr("x2",u(1)).attr("y2",h(1)),y.append("g").classed("content",!0);const Q=b.select(".content"),C=Q.selectAll(".lines").data(this.probabilities.filter((t=>null!=t.p)),(t=>t.name)),w=C.enter().append("g").classed("lines",!0);w.each(((t,e,n)=>{const r=Ke(n[e]);r.append("line").classed("line-p above",!0),r.append("line").classed("line-p below",!0),r.append("line").classed("line-w before",!0),r.append("line").classed("line-w after",!0)})),w.filter((t=>t.new)).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(((t,e,n)=>{const r=Ke(n[e]);r.select(".line-p.above").attr("x1",u(t.p)).attr("x2",u(t.p)).attr("y1",h(1)).attr("y2",h(1)),r.select(".line-p.below").attr("x1",u(t.p)).attr("x2",u(t.p)).attr("y1",h(0)).attr("y2",h(0)),r.select(".line-w.before").attr("x1",u(t.p)).attr("x2",u(t.p)).attr("y1",h(t.w)).attr("y2",h(t.w)),r.select(".line-w.after").attr("x1",u(t.p)).attr("x2",u(t.p)).attr("y1",h(t.w)).attr("y2",h(t.w))}));const U=w.merge(C),A=U.filter((t=>t.new&&!t.paused));if(!A.empty()){const t=A.attr("data-animating-ease-time-1"),e=A.attr("data-animating-ease-time-2"),n=e=>Oi().domain([0,1]).range([t,1])(e),r=e=>Oi().range([0,1]).domain([t,1])(e),i=t=>Oi().domain([0,1]).range([e,1])(t),a=t=>Oi().range([0,1]).domain([e,1])(t),o=e=>n=>Oi().domain([e(t),1]).range([0,1])(e(n)),s=t=>n=>Oi().domain([t(e),1]).range([0,1])(t(n));A.transition("new-1").duration((()=>Math.floor(c*(1-t)))).ease(n).attr("data-animating-ease-time-1",1).tween("animating",((t,e,n)=>{const i=n[e],a=Ke(i),s=rr(void 0!==i.p?i.p:t.p,t.p),l=rr(void 0!==i.g?i.g:this.getFunction(t.function).g,this.getFunction(t.function).g),c=rr(h.invert(a.select(".line-p.above").attr("y1")),t.w),d=rr(h.invert(a.select(".line-p.below").attr("y1")),t.w);return t=>{i.p=s(gi(r(t))),i.g=l(gi(r(t))),i.w=$a.pg2w(i.p,i.g),a.select(".line-p.above").attr("x1",u(i.p)).attr("x2",u(i.p)).attr("y1",h(c(o(di)(t)))).attr("y2",h(1)),a.select(".line-p.below").attr("x1",u(i.p)).attr("x2",u(i.p)).attr("y1",h(d(o(di)(t)))).attr("y2",h(0))}})).transition("new-2").duration((()=>Math.floor(c*(1-e)))).ease(i).attr("data-animating-ease-time-2",1).tween("animating",((t,e,n)=>{const r=n[e],i=Ke(r),o=rr(void 0!==r.p?r.p:t.p,t.p),l=rr(void 0!==r.g?r.g:this.getFunction(t.function).g,this.getFunction(t.function).g),c=rr(u.invert(i.select(".line-w.before").attr("x1")),0),d=rr(u.invert(i.select(".line-w.after").attr("x1")),1);return t=>{r.p=o(gi(a(t))),r.g=l(gi(a(t))),r.w=$a.pg2w(r.p,r.g),i.select(".line-w.before").attr("x1",u(c(s(gi)(t)))).attr("x2",u(r.p)).attr("y1",h(r.w)).attr("y2",h(r.w)),i.select(".line-w.after").attr("x1",u(d(s(gi)(t)))).attr("x2",u(r.p)).attr("y1",h(r.w)).attr("y2",h(r.w))}})).on("end",((t,e,n)=>{const r=n[e];r.removeAttribute("data-animating-ease-time-1"),r.removeAttribute("data-animating-ease-time-2"),t.new=!1,this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))}))}const S=U.filter((t=>t.new&&t.paused));if(!S.empty()){const t=S.attr("data-animating-ease-time-1"),e=S.attr("data-animating-ease-time-2");S.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).tween("paused",((n,r,i)=>{const a=i[r],o=Ke(a),s=rr(void 0!==a.p?a.p:n.p,n.p),l=rr(void 0!==a.g?a.g:this.getFunction(n.function).g,this.getFunction(n.function).g),c=rr(1,n.w),d=rr(0,n.w),g=rr(n.p,0),f=rr(n.p,1);return n=>{a.p=s(n),a.g=l(n),a.w=$a.pg2w(a.p,a.g),o.select(".line-p.above").attr("x1",u(a.p)).attr("x2",u(a.p)).attr("y1",h(c(di(t)))).attr("y2",h(1)),o.select(".line-p.below").attr("x1",u(a.p)).attr("x2",u(a.p)).attr("y1",h(d(di(t)))).attr("y2",h(0)),o.select(".line-w.before").attr("x1",u(g(gi(e)))).attr("x2",u(a.p)).attr("y1",h(a.w)).attr("y2",h(a.w)),o.select(".line-w.after").attr("x1",u(f(gi(e)))).attr("x2",u(a.p)).attr("y1",h(a.w)).attr("y2",h(a.w))}}))}U.filter((t=>!t.new)).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).tween("non-animating",((t,e,n)=>{const r=n[e],i=Ke(r),a=rr(void 0!==r.p?r.p:t.p,t.p),o=rr(void 0!==r.g?r.g:this.getFunction(t.function).g,this.getFunction(t.function).g);return t=>{r.p=a(t),r.g=o(t),r.w=$a.pg2w(r.p,r.g),i.select(".line-p.above").attr("x1",u(r.p)).attr("x2",u(r.p)).attr("y1",h(r.w)).attr("y2",h(1)),i.select(".line-p.below").attr("x1",u(r.p)).attr("x2",u(r.p)).attr("y1",h(r.w)).attr("y2",h(0)),i.select(".line-w.before").attr("x1",u(0)).attr("x2",u(r.p)).attr("y1",h(r.w)).attr("y2",h(r.w)),i.select(".line-w.after").attr("x1",u(1)).attr("x2",u(r.p)).attr("y1",h(r.w)).attr("y2",h(r.w))}})),C.exit().remove();const L=Q.selectAll(".curve").data(this.functions,(t=>t.name)),k=L.enter().append("path").classed("curve",!0).attr("clip-path","url(#clip-cpt-value)").merge(L);(this.firstUpdate||t.has("interactive"))&&(this.interactive?k.attr("tabindex",0).classed("interactive",!0).call(d).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let n=e.g;switch(t.key){case"ArrowUp":case"ArrowLeft":n+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n-=t.shiftKey?.01:.05}n=n<0?0:n>1?1:n,n!==e.g&&(e.g=n,"default"===e.name&&(this.g=e.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):k.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),k.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).attrTween("d",((t,e,n)=>{const r=n[e],i=rr(void 0!==r.g?r.g:t.g,t.g);return t=>{r.g=i(t);const e=bt(u.range()[0],u.range()[1]+1,1).map((t=>({p:u.invert(t),w:$a.pg2w(u.invert(t),r.g)})));return f(e)}})),L.exit().remove();const G=Q.selectAll(".point").data(this.probabilities.filter((t=>null!=t.p)),(t=>t.name)),_=G.enter().append("g").classed("point",!0);_.append("circle").classed("circle",!0),_.append("text").classed("label",!0);const R=_.merge(G);R.select("text").text((t=>t.label)),R.filter((e=>(this.firstUpdate||t.has("interactive"))&&this.interactive&&!e.trial)).attr("tabindex",0).classed("interactive",!0).call(g).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let n=e.p;switch(t.key){case"ArrowUp":case"ArrowRight":n+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":n-=t.shiftKey?.01:.05}n=n<0?0:n>1?1:n,n!==e.p&&(e.p=n,"default"===e.name&&(this.p=e.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,w:e.w,label:e.label,g:this.getFunction(e.function).g},bubbles:!0}))),t.preventDefault()}})),R.filter((e=>(this.firstUpdate||t.has("interactive"))&&!this.interactive||e.trial)).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),R.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).attrTween("transform",((t,e,n)=>{const r=n[e],i=rr(void 0!==r.p?r.p:t.p,t.p),a=rr(void 0!==r.g?r.g:this.getFunction(t.function).g,this.getFunction(t.function).g);return t=>(r.p=i(t),r.g=a(t),`translate(\n            ${u(r.p)},\n            ${h($a.pg2w(r.p,r.g))}\n          )`)})),G.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-probability",_Y);var RY={exports:{}},EY={exports:{}},TY=Pu,MY=im,NY=Iv,DY=dd.hovertemplateAttrs,XY=_u,ZY=Fu.extendFlat,VY=sd.overrideAll;function HY(t){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",t,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function WY(t){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",t,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:HY("x"),y:HY("y"),z:HY("z")},color:{valType:"color",dflt:TY.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",t,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:TY.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var YY=EY.exports=VY(ZY({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:DY(),xhoverformat:NY("x"),yhoverformat:NY("y"),zhoverformat:NY("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},MY("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:WY("x"),y:WY("y"),z:WY("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale.","The opacityscale must be an array containing","arrays mapping a normalized value to an opacity value.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have","higher opacity values and those in the middle would be more transparent","Alternatively, `opacityscale` may be a palette name string","of the following list: 'min', 'max', 'extremes' and 'uniform'.","The default is 'uniform'."].join(" ")},_deprecated:{zauto:ZY({},MY.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:ZY({},MY.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:ZY({},MY.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:ZY({},XY.hoverinfo),showlegend:ZY({},XY.showlegend,{dflt:!1})}),"calc","nested");YY.x.editType=YY.y.editType=YY.z.editType="calc+clearAxisTypes",YY.transforms=void 0;var zY=EY.exports,OY=im,JY=Iv,PY=dd.hovertemplateAttrs,jY=zY,KY=_u,qY=Fu.extendFlat,$Y=qY({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:PY({editType:"calc"}),xhoverformat:JY("x"),yhoverformat:JY("y"),zhoverformat:JY("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},OY("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:jY.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:qY({},jY.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:jY.contours.x.color,width:jY.contours.x.width,editType:"calc"},lightposition:{x:qY({},jY.lightposition.x,{dflt:1e5}),y:qY({},jY.lightposition.y,{dflt:1e5}),z:qY({},jY.lightposition.z,{dflt:0}),editType:"calc"},lighting:qY({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},jY.lighting),hoverinfo:qY({},KY.hoverinfo,{editType:"calc"}),showlegend:qY({},KY.showlegend,{dflt:!1})}),tz=im,ez=Iv,nz=dd.hovertemplateAttrs,rz=$Y,iz=_u,az=Fu.extendFlat,oz=sd.overrideAll;function sz(t){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not slice planes about the",t,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",t,"except start and end."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function lz(t){return{show:{valType:"boolean",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",t,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var cz=RY.exports=oz(az({x:{valType:"data_array",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:sz("x"),y:sz("y"),z:sz("z")},caps:{x:lz("x"),y:lz("y"),z:lz("z")},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:nz(),xhoverformat:ez("x"),yhoverformat:ez("y"),zhoverformat:ez("z"),valuehoverformat:ez("value",1),showlegend:az({},iz.showlegend,{dflt:!1})},tz("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:rz.opacity,lightposition:rz.lightposition,lighting:rz.lighting,flatshading:rz.flatshading,contour:rz.contour,hoverinfo:az({},iz.hoverinfo)}),"calc","nested");cz.flatshading.dflt=!0,cz.lighting.facenormalsepsilon.dflt=0,cz.x.editType=cz.y.editType=cz.z.editType=cz.value.editType="calc+clearAxisTypes",cz.transforms=void 0;var uz=RY.exports,hz=yf,dz=hh,gz=uz,fz=ty;function pz(t,e,n,r,i){var a=i("isomin"),o=i("isomax");null!=o&&null!=a&&a>o&&(e.isomin=null,e.isomax=null);var s=i("x"),l=i("y"),c=i("z"),u=i("value");s&&s.length&&l&&l.length&&c&&c.length&&u&&u.length?(dz.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],r),i("valuehoverformat"),["x","y","z"].forEach((function(t){i(t+"hoverformat");var e="caps."+t;i(e+".show")&&i(e+".fill");var n="slices."+t;i(n+".show")&&(i(n+".fill"),i(n+".locations"))})),i("spaceframe.show")&&i("spaceframe.fill"),i("surface.show")&&(i("surface.count"),i("surface.fill"),i("surface.pattern")),i("contour.show")&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach((function(t){i(t)})),fz(t,e,r,i,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}var vz={supplyDefaults:function(t,e,n,r){pz(t,e,n,r,(function(n,r){return hz.coerce(t,e,gz,n,r)}))},supplyIsoDefaults:pz},mz=yf;function yz(t){var e,n,r,i,a,o,s,l,c,u,h,d,g=t._x,f=t._y,p=t._z,v=t._len,m=-1/0,y=1/0,b=-1/0,x=1/0,B=-1/0,I=1/0,F="";for(v&&(s=g[0],c=f[0],h=p[0]),v>1&&(l=g[v-1],u=f[v-1],d=p[v-1]),e=0;e<v;e++)m=Math.max(m,g[e]),y=Math.min(y,g[e]),b=Math.max(b,f[e]),x=Math.min(x,f[e]),B=Math.max(B,p[e]),I=Math.min(I,p[e]),i||g[e]===s||(i=!0,F+="x"),a||f[e]===c||(a=!0,F+="y"),o||p[e]===h||(o=!0,F+="z");i||(F+="x"),a||(F+="y"),o||(F+="z");var Q=bz(t._x),C=bz(t._y),w=bz(t._z);F=(F=(F=F.replace("x",(s>l?"-":"+")+"x")).replace("y",(c>u?"-":"+")+"y")).replace("z",(h>d?"-":"+")+"z");var U=function(){v=0,Q=[],C=[],w=[]};(!v||v<Q.length*C.length*w.length)&&U();var A=function(t){return"x"===t?g:"y"===t?f:p},S=function(t){return"x"===t?Q:"y"===t?C:w},L=function(t){return t[v-1]<t[0]?-1:1},k=A(F[1]),G=A(F[3]),_=A(F[5]),R=S(F[1]).length,E=S(F[3]).length,T=S(F[5]).length,M=!1,N=function(t,e,n){return R*(E*t+e)+n},D=L(A(F[1])),X=L(A(F[3])),Z=L(A(F[5]));for(e=0;e<T-1;e++){for(n=0;n<E-1;n++){for(r=0;r<R-1;r++){var V=N(e,n,r),H=N(e,n,r+1),W=N(e,n+1,r),Y=N(e+1,n,r);if(k[V]*D<k[H]*D&&G[V]*X<G[W]*X&&_[V]*Z<_[Y]*Z||(M=!0),M)break}if(M)break}if(M)break}return M&&(mz.warn("Encountered arbitrary coordinates! Unable to input data grid."),U()),{xMin:y,yMin:x,zMin:I,xMax:m,yMax:b,zMax:B,Xs:Q,Ys:C,Zs:w,len:v,fill:F}}function bz(t){return mz.distinctVals(t).vals}function xz(t,e){if(void 0===e&&(e=t.length),mz.isTypedArray(t))return t.subarray(0,e);for(var n=[],r=0;r<e;r++)n[r]=+t[r];return n}var Bz=hy,Iz=yz,Fz=xz,Qz={exports:{}};!function(){var t={1964:function(t,e,n){t.exports={alpha_shape:n(3502),convex_hull:n(7352),delaunay_triangulate:n(7642),gl_cone3d:n(6405),gl_error3d:n(9165),gl_heatmap2d:n(2510),gl_line3d:n(5714),gl_mesh3d:n(7201),gl_plot2d:n(1850),gl_plot3d:n(4100),gl_pointcloud2d:n(4696),gl_scatter3d:n(8418),gl_select_box:n(3161),gl_spikes2d:n(4098),gl_streamtube3d:n(7815),gl_surface3d:n(9499),ndarray:n(9618),ndarray_linear_interpolate:n(4317)}},4793:function(t,e,n){function r(t,e,n){return e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==c(e)?e:e+""}function a(t,e,n){return e=s(e),function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(e,[],s(t).constructor):e.apply(t,n))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var u=n(7507),h=n(3778),d="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=p,e.IS=50;var g=2147483647;function f(t){if(t>g)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,p.prototype),e}function p(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return y(t)}return v(t,e,n)}function v(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!p.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|I(t,e),r=f(n),i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(nt(t,Uint8Array)){var e=new Uint8Array(t);return x(e.buffer,e.byteOffset,e.byteLength)}return b(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(t));if(nt(t,ArrayBuffer)||t&&nt(t.buffer,ArrayBuffer))return x(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(nt(t,SharedArrayBuffer)||t&&nt(t.buffer,SharedArrayBuffer)))return x(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return p.from(r,e,n);var i=function(t){if(p.isBuffer(t)){var e=0|B(t.length),n=f(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||rt(t.length)?f(0):b(t);if("Buffer"===t.type&&Array.isArray(t.data))return b(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return p.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(t))}function m(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function y(t){return m(t),f(t<0?0:0|B(t))}function b(t){for(var e=t.length<0?0:0|B(t.length),n=f(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function x(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,p.prototype),r}function B(t){if(t>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|t}function I(t,e){if(p.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||nt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+c(t));var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return tt(t).length;default:if(i)return r?-1:$(t).length;e=(""+e).toLowerCase(),i=!0}}function F(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return G(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Q(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function C(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),rt(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=p.from(e,r)),p.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){var a,o=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var u=-1;for(a=n;a<s;a++)if(c(t,a)===c(e,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var h=!0,d=0;d<l;d++)if(c(t,a+d)!==c(e,d)){h=!1;break}if(h)return a}return-1}function U(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a,o=e.length;for(r>o/2&&(r=o/2),a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(rt(s))return a;t[n+a]=s}return a}function A(t,e,n,r){return et($(e,t.length-n),t,n,r)}function S(t,e,n,r){return et(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function L(t,e,n,r){return et(tt(e),t,n,r)}function k(t,e,n,r){return et(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function G(t,e,n){return 0===e&&n===t.length?u.fromByteArray(t):u.fromByteArray(t.slice(e,n))}function _(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a=t[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var l=void 0,c=void 0,u=void 0,h=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:128==(192&(l=t[i+1]))&&(h=(31&a)<<6|63&l)>127&&(o=h);break;case 3:l=t[i+1],c=t[i+2],128==(192&l)&&128==(192&c)&&(h=(15&a)<<12|(63&l)<<6|63&c)>2047&&(h<55296||h>57343)&&(o=h);break;case 4:l=t[i+1],c=t[i+2],u=t[i+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(h=(15&a)<<18|(63&l)<<12|(63&c)<<6|63&u)>65535&&h<1114112&&(o=h)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=R));return n}(r)}p.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(t,e,n){return v(t,e,n)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(t,e,n){return function(t,e,n){return m(t),t<=0?f(t):void 0!==e?"string"==typeof n?f(t).fill(e,n):f(t).fill(e):f(t)}(t,e,n)},p.allocUnsafe=function(t){return y(t)},p.allocUnsafeSlow=function(t){return y(t)},p.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==p.prototype},p.compare=function(t,e){if(nt(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),nt(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=p.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(nt(a,Uint8Array))i+a.length>r.length?(p.isBuffer(a)||(a=p.from(a)),a.copy(r,i)):Uint8Array.prototype.set.call(r,a,i);else{if(!p.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},p.byteLength=I,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Q(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Q(this,e,e+3),Q(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Q(this,e,e+7),Q(this,e+1,e+6),Q(this,e+2,e+5),Q(this,e+3,e+4);return this},p.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?_(this,0,t):F.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",n=e.IS;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},d&&(p.prototype[d]=p.prototype.inspect),p.prototype.compare=function(t,e,n,r,i){if(nt(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+c(t));if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),l=this.slice(r,i),u=t.slice(e,n),h=0;h<s;++h)if(l[h]!==u[h]){a=l[h],o=u[h];break}return a<o?-1:o<a?1:0},p.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},p.prototype.indexOf=function(t,e,n){return C(this,t,e,n,!0)},p.prototype.lastIndexOf=function(t,e,n){return C(this,t,e,n,!1)},p.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return U(this,t,e,n);case"utf8":case"utf-8":return A(this,t,e,n);case"ascii":case"latin1":case"binary":return S(this,t,e,n);case"base64":return L(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=it[t[a]];return i}function N(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function X(t,e,n,r,i,a){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Z(t,e,n,r,i){P(e,r,i,t,n,7);var a=Number(e&BigInt(4294967295));t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a;var o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function V(t,e,n,r,i){P(e,r,i,t,n,7);var a=Number(e&BigInt(4294967295));t[n+7]=a,a>>=8,t[n+6]=a,a>>=8,t[n+5]=a,a>>=8,t[n+4]=a;var o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function H(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(t,e,n,r,i){return e=+e,n>>>=0,i||H(t,0,n,4),h.write(t,e,n,r,23,4),n+4}function Y(t,e,n,r,i){return e=+e,n>>>=0,i||H(t,0,n,8),h.write(t,e,n,r,52,8),n+8}p.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,p.prototype),r},p.prototype.readUintLE=p.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},p.prototype.readUintBE=p.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},p.prototype.readUint8=p.prototype.readUInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),this[t]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readBigUInt64LE=at((function(t){j(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);var r=e+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24),i=this[++t]+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),p.prototype.readBigUInt64BE=at((function(t){j(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);var r=e*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t],i=this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),p.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},p.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},p.prototype.readInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){t>>>=0,e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(t,e){t>>>=0,e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readBigInt64LE=at((function(t){j(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);var r=this[t+4]+this[t+5]*Math.pow(2,8)+this[t+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24))})),p.prototype.readBigInt64BE=at((function(t){j(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);var r=(e<<24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+n)})),p.prototype.readFloatLE=function(t,e){return t>>>=0,e||D(t,4,this.length),h.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return t>>>=0,e||D(t,4,this.length),h.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return t>>>=0,e||D(t,8,this.length),h.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return t>>>=0,e||D(t,8,this.length),h.read(this,t,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||X(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||X(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},p.prototype.writeUint8=p.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,1,255,0),this[e]=255&t,e+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeBigUInt64LE=at((function(t){return Z(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeBigUInt64BE=at((function(t){return V(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);X(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o|0)-s&255;return e+n},p.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);X(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o|0)-s&255;return e+n},p.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},p.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||X(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeBigInt64LE=at((function(t){return Z(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeBigInt64BE=at((function(t){return V(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeFloatLE=function(t,e,n){return W(this,t,e,!0,n)},p.prototype.writeFloatBE=function(t,e,n){return W(this,t,e,!1,n)},p.prototype.writeDoubleLE=function(t,e,n){return Y(this,t,e,!0,n)},p.prototype.writeDoubleBE=function(t,e,n){return Y(this,t,e,!1,n)},p.prototype.copy=function(t,e,n,r){if(!p.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},p.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=p.isBuffer(t)?t:p.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var z={};function O(t,e,n){z[t]=function(n){function i(){var n;
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=a(this,i),Object.defineProperty(n,"message",{value:e.apply(n,arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(t,"]"),n.stack,delete n.name,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(i,n),r(i,[{key:"code",get:function(){return t},set:function(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}])}(n)}function J(t){for(var e="",n=t.length,r="-"===t[0]?1:0;n>=r+4;n-=3)e="_".concat(t.slice(n-3,n)).concat(e);return"".concat(t.slice(0,n)).concat(e)}function P(t,e,n,r,i,a){if(t>n||t<e){var o,s="bigint"==typeof e?"n":"";throw o=0===e||e===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(a+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(a+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(s),new z.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){j(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||K(e,t.length-(n+1))}(r,i,a)}function j(t,e){if("number"!=typeof t)throw new z.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,n){if(Math.floor(t)!==t)throw j(t,n),new z.ERR_OUT_OF_RANGE("offset","an integer",t);if(e<0)throw new z.ERR_BUFFER_OUT_OF_BOUNDS;throw new z.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(e),t)}O("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),O("ERR_INVALID_ARG_TYPE",(function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(c(e))}),TypeError),O("ERR_OUT_OF_RANGE",(function(t,e,n){var r='The value of "'.concat(t,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=J(String(n)):"bigint"==typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=J(i)),i+="n"),r+=" It must be ".concat(e,". Received ").concat(i)}),RangeError);var q=/[^+/0-9A-Za-z-_]/g;function $(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function tt(t){return u.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function et(t,e,n,r){var i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function nt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function rt(t){return t!=t}var it=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}();function at(t){return"undefined"==typeof BigInt?ot:t}function ot(){throw new Error("BigInt not supported")}},9216:function(t){t.exports=i,t.exports.isMobile=i,t.exports.default=i;var e=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/CrOS/,r=/android|ipad|playbook|silk/i;function i(t){t||(t={});var i=t.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;var a=e.test(i)&&!n.test(i)||!!t.tablet&&r.test(i);return!a&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(a=!0),a}},6296:function(t,e,n){t.exports=function(t){var e=(t=t||{}).eye||[0,0,1],n=t.center||[0,0,0],s=t.up||[0,1,0],l=t.distanceLimits||[0,1/0],c=t.mode||"turntable",u=r(),h=i(),d=a();return u.setDistanceLimits(l[0],l[1]),u.lookAt(0,e,n,s),h.setDistanceLimits(l[0],l[1]),h.lookAt(0,e,n,s),d.setDistanceLimits(l[0],l[1]),d.lookAt(0,e,n,s),new o({turntable:u,orbit:h,matrix:d},c)};var r=n(7261),i=n(9977),a=n(4192);function o(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map((function(e){return t[e]})),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=o.prototype;s.flush=function(t){for(var e=this._controllerList,n=0;n<e.length;++n)e[n].flush(t)},s.idle=function(t){for(var e=this._controllerList,n=0;n<e.length;++n)e[n].idle(t)},s.lookAt=function(t,e,n,r){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].lookAt(t,e,n,r)},s.rotate=function(t,e,n,r){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].rotate(t,e,n,r)},s.pan=function(t,e,n,r){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].pan(t,e,n,r)},s.translate=function(t,e,n,r){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].translate(t,e,n,r)},s.setMatrix=function(t,e){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setMatrix(t,e)},s.setDistanceLimits=function(t,e){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setDistanceLimits(t,e)},s.setDistance=function(t,e){for(var n=this._controllerList,r=0;r<n.length;++r)n[r].setDistance(t,e)},s.recalcMatrix=function(t){this._active.recalcMatrix(t)},s.getDistance=function(t){return this._active.getDistance(t)},s.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},s.lastT=function(){return this._active.lastT()},s.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var n=this._active,r=this._controllerList[e],i=Math.max(n.lastT(),r.lastT());n.recalcMatrix(i),r.setMatrix(i,n.computedMatrix),this._active=r,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},7169:function(t,e,n){var r="undefined"==typeof WeakMap?n(1538):WeakMap,i=n(2762),a=n(8116),o=new r;t.exports=function(t){var e=o.get(t),n=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);if(!n||!t.isBuffer(n)){var r=i(t,new Float32Array([-1,-1,-1,4,4,-1]));(e=a(t,[{buffer:r,type:t.FLOAT,size:2}]))._triangleBuffer=r,o.set(t,e)}e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()}},1085:function(t,e,n){var r=n(1371);t.exports=function(t,e,n){e="number"==typeof e?e:1,n=n||": ";var i=t.split(/\r?\n/),a=String(i.length+e-1).length;return i.map((function(t,i){var o=i+e,s=String(o).length;return r(o,a-s)+n+t})).join("\n")}},3952:function(t,e,n){t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var n=t[0].length,r=[t[0]],a=[0],o=1;o<e;++o)if(r.push(t[o]),i(r,n)){if(a.push(o),a.length===n+1)return a}else r.pop();return a};var r=n(3250);function i(t,e){for(var n=new Array(e+1),i=0;i<t.length;++i)n[i]=t[i];for(i=0;i<=t.length;++i){for(var a=t.length;a<=e;++a){for(var o=new Array(e),s=0;s<e;++s)o[s]=Math.pow(a+1-i,s);n[a]=o}if(r.apply(void 0,n))return!0}return!1}},5995:function(t,e,n){t.exports=function(t,e){return r(e).filter((function(n){for(var r=new Array(n.length),a=0;a<n.length;++a)r[a]=e[n[a]];return i(r)*t<1}))};var r=n(7642),i=n(6037)},3502:function(t,e,n){t.exports=function(t,e){return i(r(t,e))};var r=n(5995),i=n(9127)},6468:function(t){t.exports=function(t){return atob(t)}},2642:function(t,e,n){t.exports=function(t,e){for(var n=e.length,a=new Array(n+1),o=0;o<n;++o){for(var s=new Array(n+1),l=0;l<=n;++l)s[l]=t[l][o];a[o]=s}a[n]=new Array(n+1);for(o=0;o<=n;++o)a[n][o]=1;var c=new Array(n+1);for(o=0;o<n;++o)c[o]=e[o];c[n]=1;var u=r(a,c),h=i(u[n+1]);0===h&&(h=1);var d=new Array(n+1);for(o=0;o<=n;++o)d[o]=i(u[o])/h;return d};var r=n(727);function i(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return e}},7507:function(t,e){e.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,a=s(t),o=a[0],l=a[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,o,l)),u=0,h=l>0?o-4:o;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;2===l&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[u++]=255&e);1===l&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e);return c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(l(t,s,s+o>c?c:s+o));1===i?(e=t[r-1],a.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],a.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,r){for(var i,a,o=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},3865:function(t,e,n){var r=n(869);t.exports=function(t,e){return r(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}},1318:function(t){t.exports=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}},8697:function(t,e,n){var r=n(869);t.exports=function(t,e){return r(t[0].mul(e[1]),t[1].mul(e[0]))}},7842:function(t,e,n){var r=n(6330),i=n(1533),a=n(2651),o=n(4387),s=n(869),l=n(8697);t.exports=function t(e,n){if(r(e))return n?l(e,t(n)):[e[0].clone(),e[1].clone()];var c,u,h=0;if(i(e))c=e.clone();else if("string"==typeof e)c=o(e);else{if(0===e)return[a(0),a(1)];if(e===Math.floor(e))c=a(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),h-=256;c=a(e)}}if(r(n))c.mul(n[1]),u=n[0].clone();else if(i(n))u=n.clone();else if("string"==typeof n)u=o(n);else if(n)if(n===Math.floor(n))u=a(n);else{for(;n!==Math.floor(n);)n*=Math.pow(2,256),h+=256;u=a(n)}else u=a(1);h>0?c=c.ushln(h):h<0&&(u=u.ushln(-h));return s(c,u)}},6330:function(t,e,n){var r=n(1533);t.exports=function(t){return Array.isArray(t)&&2===t.length&&r(t[0])&&r(t[1])}},5716:function(t,e,n){var r=n(6859);t.exports=function(t){return t.cmp(new r(0))}},1369:function(t,e,n){var r=n(5716);t.exports=function(t){var e=t.length,n=t.words,i=0;if(1===e)i=n[0];else if(2===e)i=n[0]+67108864*n[1];else for(var a=0;a<e;a++){i+=n[a]*Math.pow(67108864,a)}return r(t)*i}},4025:function(t,e,n){var r=n(2361),i=n(8828).countTrailingZeros;t.exports=function(t){var e=i(r.lo(t));if(e<32)return e;var n=i(r.hi(t));if(n>20)return 52;return n+32}},1533:function(t,e,n){n(6859),t.exports=function(t){return t&&"object"==typeof t&&Boolean(t.words)}},2651:function(t,e,n){var r=n(6859),i=n(2361);t.exports=function(t){var e=i.exponent(t);return e<52?new r(t):new r(t*Math.pow(2,52-e)).ushln(e-52)}},869:function(t,e,n){var r=n(2651),i=n(5716);t.exports=function(t,e){var n=i(t),a=i(e);if(0===n)return[r(0),r(1)];if(0===a)return[r(0),r(0)];a<0&&(t=t.neg(),e=e.neg());var o=t.gcd(e);if(o.cmpn(1))return[t.div(o),e.div(o)];return[t,e]}},4387:function(t,e,n){var r=n(6859);t.exports=function(t){return new r(t)}},6504:function(t,e,n){var r=n(869);t.exports=function(t,e){return r(t[0].mul(e[0]),t[1].mul(e[1]))}},7721:function(t,e,n){var r=n(5716);t.exports=function(t){return r(t[0])*r(t[1])}},5572:function(t,e,n){var r=n(869);t.exports=function(t,e){return r(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}},946:function(t,e,n){var r=n(1369),i=n(4025);t.exports=function(t){var e=t[0],n=t[1];if(0===e.cmpn(0))return 0;var a=e.abs().divmod(n.abs()),o=a.div,s=r(o),l=a.mod,c=e.negative!==n.negative?-1:1;if(0===l.cmpn(0))return c*s;if(s){var u=i(s)+4;return c*(s+(d=r(l.ushln(u).divRound(n)))*Math.pow(2,-u))}var h=n.bitLength()-l.bitLength()+53,d=r(l.ushln(h).divRound(n));return h<1023?c*d*Math.pow(2,-h):c*(d*=Math.pow(2,-1023))*Math.pow(2,1023-h)}},2478:function(t){function e(t,e,n,r,i){for(var a=i+1;r<=i;){var o=r+i>>>1,s=t[o];(void 0!==n?n(s,e):s-e)>=0?(a=o,i=o-1):r=o+1}return a}function n(t,e,n,r,i){for(var a=i+1;r<=i;){var o=r+i>>>1,s=t[o];(void 0!==n?n(s,e):s-e)>0?(a=o,i=o-1):r=o+1}return a}function r(t,e,n,r,i){for(var a=r-1;r<=i;){var o=r+i>>>1,s=t[o];(void 0!==n?n(s,e):s-e)<0?(a=o,r=o+1):i=o-1}return a}function i(t,e,n,r,i){for(var a=r-1;r<=i;){var o=r+i>>>1,s=t[o];(void 0!==n?n(s,e):s-e)<=0?(a=o,r=o+1):i=o-1}return a}function a(t,e,n,r,i){for(;r<=i;){var a=r+i>>>1,o=t[a],s=void 0!==n?n(o,e):o-e;if(0===s)return a;s<=0?r=a+1:i=a-1}return-1}function o(t,e,n,r,i,a){return"function"==typeof n?a(t,e,n,void 0===r?0:0|r,void 0===i?t.length-1:0|i):a(t,e,void 0,void 0===n?0:0|n,void 0===r?t.length-1:0|r)}t.exports={ge:function(t,n,r,i,a){return o(t,n,r,i,a,e)},gt:function(t,e,r,i,a){return o(t,e,r,i,a,n)},lt:function(t,e,n,i,a){return o(t,e,n,i,a,r)},le:function(t,e,n,r,a){return o(t,e,n,r,a,i)},eq:function(t,e,n,r,i){return o(t,e,n,r,i,a)}}},8828:function(t,e){function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},6859:function(t,e,n){!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t,e,n){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var o;"object"==typeof t?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(7790).Buffer}catch(t){}function s(t,e){var n=t.charCodeAt(e);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function l(t,e,n){var r=s(t,n);return n-1>=e&&(r|=s(t,n-1)<<4),r}function c(t,e,n,r){for(var i=0,a=Math.min(t.length,n),o=e;o<a;o++){var s=t.charCodeAt(o)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(t){return t instanceof a||null!==t&&"object"==typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},a.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,a=0,o=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=l(t,e,r)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)i=l(t,e,r)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;this.strip()},a.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var a=t.length-n,o=a%r,s=Math.min(a,a-o)+n,l=0,u=n;u<s;u+=r)l=c(t,u,u+r,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==o){var h=1;for(l=c(t,u,t.length,e),u=0;u<o;u++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],a=0|e.words[0],o=i*a,s=67108863&o,l=o/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var u=l>>>26,h=67108863&l,d=Math.min(c,e.length-1),g=Math.max(0,c-t.length+1);g<=d;g++){var f=c-g|0;u+=(o=(i=0|t.words[f])*(a=0|e.words[g])+h)/67108864|0,h=67108863&o}n.words[c]=0|h,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}a.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=(16777215&(s<<i|a)).toString(16);n=0!==(a=s>>>24-i&16777215)||o!==this.length-1?u[6-l.length]+l+n:l+n,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(n=a.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=h[t],g=d[t];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var p=f.modn(g).toString(t);n=(f=f.idivn(g)).isZero()?p+n:u[c-p.length]+p+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},a.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===e,c=new t(a),u=this.clone();if(l){for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[s]=o;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-i;s++)c[s]=0;for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[a-s-1]=o}return c},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 8191&e||(n+=13,e>>>=13),127&e||(n+=7,e>>>=7),15&e||(n+=4,e>>>=4),3&e||(n+=2,e>>>=2),1&e||n++,n},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},a.prototype.ior=function(t){return r(!(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},a.prototype.iand=function(t){return r(!(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},a.prototype.ixor=function(t){return r(!(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},a.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,a=0;a<r.length;a++)e=(0|n.words[a])+(0|r.words[a])+i,this.words[a]=67108863&e,i=e>>>26;for(;0!==i&&a<n.length;a++)e=(0|n.words[a])+i,this.words[a]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var a=0,o=0;o<r.length;o++)a=(e=(0|n.words[o])-(0|r.words[o])+a)>>26,this.words[o]=67108863&e;for(;0!==a&&o<n.length;o++)a=(e=(0|n.words[o])+a)>>26,this.words[o]=67108863&e;if(0===a&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,n){var r,i,a,o=t.words,s=e.words,l=n.words,c=0,u=0|o[0],h=8191&u,d=u>>>13,g=0|o[1],f=8191&g,p=g>>>13,v=0|o[2],m=8191&v,y=v>>>13,b=0|o[3],x=8191&b,B=b>>>13,I=0|o[4],F=8191&I,Q=I>>>13,C=0|o[5],w=8191&C,U=C>>>13,A=0|o[6],S=8191&A,L=A>>>13,k=0|o[7],G=8191&k,_=k>>>13,R=0|o[8],E=8191&R,T=R>>>13,M=0|o[9],N=8191&M,D=M>>>13,X=0|s[0],Z=8191&X,V=X>>>13,H=0|s[1],W=8191&H,Y=H>>>13,z=0|s[2],O=8191&z,J=z>>>13,P=0|s[3],j=8191&P,K=P>>>13,q=0|s[4],$=8191&q,tt=q>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],at=8191&it,ot=it>>>13,st=0|s[7],lt=8191&st,ct=st>>>13,ut=0|s[8],ht=8191&ut,dt=ut>>>13,gt=0|s[9],ft=8191&gt,pt=gt>>>13;n.negative=t.negative^e.negative,n.length=19;var vt=(c+(r=Math.imul(h,Z))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(d,Z)|0))<<13)|0;c=((a=Math.imul(d,V))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(f,Z),i=(i=Math.imul(f,V))+Math.imul(p,Z)|0,a=Math.imul(p,V);var mt=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,W)|0))<<13)|0;c=((a=a+Math.imul(d,Y)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,Z),i=(i=Math.imul(m,V))+Math.imul(y,Z)|0,a=Math.imul(y,V),r=r+Math.imul(f,W)|0,i=(i=i+Math.imul(f,Y)|0)+Math.imul(p,W)|0,a=a+Math.imul(p,Y)|0;var yt=(c+(r=r+Math.imul(h,O)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(d,O)|0))<<13)|0;c=((a=a+Math.imul(d,J)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(x,Z),i=(i=Math.imul(x,V))+Math.imul(B,Z)|0,a=Math.imul(B,V),r=r+Math.imul(m,W)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(y,W)|0,a=a+Math.imul(y,Y)|0,r=r+Math.imul(f,O)|0,i=(i=i+Math.imul(f,J)|0)+Math.imul(p,O)|0,a=a+Math.imul(p,J)|0;var bt=(c+(r=r+Math.imul(h,j)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(d,j)|0))<<13)|0;c=((a=a+Math.imul(d,K)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(F,Z),i=(i=Math.imul(F,V))+Math.imul(Q,Z)|0,a=Math.imul(Q,V),r=r+Math.imul(x,W)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(B,W)|0,a=a+Math.imul(B,Y)|0,r=r+Math.imul(m,O)|0,i=(i=i+Math.imul(m,J)|0)+Math.imul(y,O)|0,a=a+Math.imul(y,J)|0,r=r+Math.imul(f,j)|0,i=(i=i+Math.imul(f,K)|0)+Math.imul(p,j)|0,a=a+Math.imul(p,K)|0;var xt=(c+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,$)|0))<<13)|0;c=((a=a+Math.imul(d,tt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(w,Z),i=(i=Math.imul(w,V))+Math.imul(U,Z)|0,a=Math.imul(U,V),r=r+Math.imul(F,W)|0,i=(i=i+Math.imul(F,Y)|0)+Math.imul(Q,W)|0,a=a+Math.imul(Q,Y)|0,r=r+Math.imul(x,O)|0,i=(i=i+Math.imul(x,J)|0)+Math.imul(B,O)|0,a=a+Math.imul(B,J)|0,r=r+Math.imul(m,j)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(y,j)|0,a=a+Math.imul(y,K)|0,r=r+Math.imul(f,$)|0,i=(i=i+Math.imul(f,tt)|0)+Math.imul(p,$)|0,a=a+Math.imul(p,tt)|0;var Bt=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(d,nt)|0))<<13)|0;c=((a=a+Math.imul(d,rt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(S,Z),i=(i=Math.imul(S,V))+Math.imul(L,Z)|0,a=Math.imul(L,V),r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(U,W)|0,a=a+Math.imul(U,Y)|0,r=r+Math.imul(F,O)|0,i=(i=i+Math.imul(F,J)|0)+Math.imul(Q,O)|0,a=a+Math.imul(Q,J)|0,r=r+Math.imul(x,j)|0,i=(i=i+Math.imul(x,K)|0)+Math.imul(B,j)|0,a=a+Math.imul(B,K)|0,r=r+Math.imul(m,$)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(y,$)|0,a=a+Math.imul(y,tt)|0,r=r+Math.imul(f,nt)|0,i=(i=i+Math.imul(f,rt)|0)+Math.imul(p,nt)|0,a=a+Math.imul(p,rt)|0;var It=(c+(r=r+Math.imul(h,at)|0)|0)+((8191&(i=(i=i+Math.imul(h,ot)|0)+Math.imul(d,at)|0))<<13)|0;c=((a=a+Math.imul(d,ot)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(G,Z),i=(i=Math.imul(G,V))+Math.imul(_,Z)|0,a=Math.imul(_,V),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(L,W)|0,a=a+Math.imul(L,Y)|0,r=r+Math.imul(w,O)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(U,O)|0,a=a+Math.imul(U,J)|0,r=r+Math.imul(F,j)|0,i=(i=i+Math.imul(F,K)|0)+Math.imul(Q,j)|0,a=a+Math.imul(Q,K)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,tt)|0)+Math.imul(B,$)|0,a=a+Math.imul(B,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(y,nt)|0,a=a+Math.imul(y,rt)|0,r=r+Math.imul(f,at)|0,i=(i=i+Math.imul(f,ot)|0)+Math.imul(p,at)|0,a=a+Math.imul(p,ot)|0;var Ft=(c+(r=r+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(d,lt)|0))<<13)|0;c=((a=a+Math.imul(d,ct)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(E,Z),i=(i=Math.imul(E,V))+Math.imul(T,Z)|0,a=Math.imul(T,V),r=r+Math.imul(G,W)|0,i=(i=i+Math.imul(G,Y)|0)+Math.imul(_,W)|0,a=a+Math.imul(_,Y)|0,r=r+Math.imul(S,O)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(L,O)|0,a=a+Math.imul(L,J)|0,r=r+Math.imul(w,j)|0,i=(i=i+Math.imul(w,K)|0)+Math.imul(U,j)|0,a=a+Math.imul(U,K)|0,r=r+Math.imul(F,$)|0,i=(i=i+Math.imul(F,tt)|0)+Math.imul(Q,$)|0,a=a+Math.imul(Q,tt)|0,r=r+Math.imul(x,nt)|0,i=(i=i+Math.imul(x,rt)|0)+Math.imul(B,nt)|0,a=a+Math.imul(B,rt)|0,r=r+Math.imul(m,at)|0,i=(i=i+Math.imul(m,ot)|0)+Math.imul(y,at)|0,a=a+Math.imul(y,ot)|0,r=r+Math.imul(f,lt)|0,i=(i=i+Math.imul(f,ct)|0)+Math.imul(p,lt)|0,a=a+Math.imul(p,ct)|0;var Qt=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,dt)|0)+Math.imul(d,ht)|0))<<13)|0;c=((a=a+Math.imul(d,dt)|0)+(i>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,r=Math.imul(N,Z),i=(i=Math.imul(N,V))+Math.imul(D,Z)|0,a=Math.imul(D,V),r=r+Math.imul(E,W)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(T,W)|0,a=a+Math.imul(T,Y)|0,r=r+Math.imul(G,O)|0,i=(i=i+Math.imul(G,J)|0)+Math.imul(_,O)|0,a=a+Math.imul(_,J)|0,r=r+Math.imul(S,j)|0,i=(i=i+Math.imul(S,K)|0)+Math.imul(L,j)|0,a=a+Math.imul(L,K)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(U,$)|0,a=a+Math.imul(U,tt)|0,r=r+Math.imul(F,nt)|0,i=(i=i+Math.imul(F,rt)|0)+Math.imul(Q,nt)|0,a=a+Math.imul(Q,rt)|0,r=r+Math.imul(x,at)|0,i=(i=i+Math.imul(x,ot)|0)+Math.imul(B,at)|0,a=a+Math.imul(B,ot)|0,r=r+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(y,lt)|0,a=a+Math.imul(y,ct)|0,r=r+Math.imul(f,ht)|0,i=(i=i+Math.imul(f,dt)|0)+Math.imul(p,ht)|0,a=a+Math.imul(p,dt)|0;var Ct=(c+(r=r+Math.imul(h,ft)|0)|0)+((8191&(i=(i=i+Math.imul(h,pt)|0)+Math.imul(d,ft)|0))<<13)|0;c=((a=a+Math.imul(d,pt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(N,W),i=(i=Math.imul(N,Y))+Math.imul(D,W)|0,a=Math.imul(D,Y),r=r+Math.imul(E,O)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(T,O)|0,a=a+Math.imul(T,J)|0,r=r+Math.imul(G,j)|0,i=(i=i+Math.imul(G,K)|0)+Math.imul(_,j)|0,a=a+Math.imul(_,K)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(L,$)|0,a=a+Math.imul(L,tt)|0,r=r+Math.imul(w,nt)|0,i=(i=i+Math.imul(w,rt)|0)+Math.imul(U,nt)|0,a=a+Math.imul(U,rt)|0,r=r+Math.imul(F,at)|0,i=(i=i+Math.imul(F,ot)|0)+Math.imul(Q,at)|0,a=a+Math.imul(Q,ot)|0,r=r+Math.imul(x,lt)|0,i=(i=i+Math.imul(x,ct)|0)+Math.imul(B,lt)|0,a=a+Math.imul(B,ct)|0,r=r+Math.imul(m,ht)|0,i=(i=i+Math.imul(m,dt)|0)+Math.imul(y,ht)|0,a=a+Math.imul(y,dt)|0;var wt=(c+(r=r+Math.imul(f,ft)|0)|0)+((8191&(i=(i=i+Math.imul(f,pt)|0)+Math.imul(p,ft)|0))<<13)|0;c=((a=a+Math.imul(p,pt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(N,O),i=(i=Math.imul(N,J))+Math.imul(D,O)|0,a=Math.imul(D,J),r=r+Math.imul(E,j)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(T,j)|0,a=a+Math.imul(T,K)|0,r=r+Math.imul(G,$)|0,i=(i=i+Math.imul(G,tt)|0)+Math.imul(_,$)|0,a=a+Math.imul(_,tt)|0,r=r+Math.imul(S,nt)|0,i=(i=i+Math.imul(S,rt)|0)+Math.imul(L,nt)|0,a=a+Math.imul(L,rt)|0,r=r+Math.imul(w,at)|0,i=(i=i+Math.imul(w,ot)|0)+Math.imul(U,at)|0,a=a+Math.imul(U,ot)|0,r=r+Math.imul(F,lt)|0,i=(i=i+Math.imul(F,ct)|0)+Math.imul(Q,lt)|0,a=a+Math.imul(Q,ct)|0,r=r+Math.imul(x,ht)|0,i=(i=i+Math.imul(x,dt)|0)+Math.imul(B,ht)|0,a=a+Math.imul(B,dt)|0;var Ut=(c+(r=r+Math.imul(m,ft)|0)|0)+((8191&(i=(i=i+Math.imul(m,pt)|0)+Math.imul(y,ft)|0))<<13)|0;c=((a=a+Math.imul(y,pt)|0)+(i>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,r=Math.imul(N,j),i=(i=Math.imul(N,K))+Math.imul(D,j)|0,a=Math.imul(D,K),r=r+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(T,$)|0,a=a+Math.imul(T,tt)|0,r=r+Math.imul(G,nt)|0,i=(i=i+Math.imul(G,rt)|0)+Math.imul(_,nt)|0,a=a+Math.imul(_,rt)|0,r=r+Math.imul(S,at)|0,i=(i=i+Math.imul(S,ot)|0)+Math.imul(L,at)|0,a=a+Math.imul(L,ot)|0,r=r+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ct)|0)+Math.imul(U,lt)|0,a=a+Math.imul(U,ct)|0,r=r+Math.imul(F,ht)|0,i=(i=i+Math.imul(F,dt)|0)+Math.imul(Q,ht)|0,a=a+Math.imul(Q,dt)|0;var At=(c+(r=r+Math.imul(x,ft)|0)|0)+((8191&(i=(i=i+Math.imul(x,pt)|0)+Math.imul(B,ft)|0))<<13)|0;c=((a=a+Math.imul(B,pt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,$),i=(i=Math.imul(N,tt))+Math.imul(D,$)|0,a=Math.imul(D,tt),r=r+Math.imul(E,nt)|0,i=(i=i+Math.imul(E,rt)|0)+Math.imul(T,nt)|0,a=a+Math.imul(T,rt)|0,r=r+Math.imul(G,at)|0,i=(i=i+Math.imul(G,ot)|0)+Math.imul(_,at)|0,a=a+Math.imul(_,ot)|0,r=r+Math.imul(S,lt)|0,i=(i=i+Math.imul(S,ct)|0)+Math.imul(L,lt)|0,a=a+Math.imul(L,ct)|0,r=r+Math.imul(w,ht)|0,i=(i=i+Math.imul(w,dt)|0)+Math.imul(U,ht)|0,a=a+Math.imul(U,dt)|0;var St=(c+(r=r+Math.imul(F,ft)|0)|0)+((8191&(i=(i=i+Math.imul(F,pt)|0)+Math.imul(Q,ft)|0))<<13)|0;c=((a=a+Math.imul(Q,pt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(N,nt),i=(i=Math.imul(N,rt))+Math.imul(D,nt)|0,a=Math.imul(D,rt),r=r+Math.imul(E,at)|0,i=(i=i+Math.imul(E,ot)|0)+Math.imul(T,at)|0,a=a+Math.imul(T,ot)|0,r=r+Math.imul(G,lt)|0,i=(i=i+Math.imul(G,ct)|0)+Math.imul(_,lt)|0,a=a+Math.imul(_,ct)|0,r=r+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,dt)|0)+Math.imul(L,ht)|0,a=a+Math.imul(L,dt)|0;var Lt=(c+(r=r+Math.imul(w,ft)|0)|0)+((8191&(i=(i=i+Math.imul(w,pt)|0)+Math.imul(U,ft)|0))<<13)|0;c=((a=a+Math.imul(U,pt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(N,at),i=(i=Math.imul(N,ot))+Math.imul(D,at)|0,a=Math.imul(D,ot),r=r+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ct)|0)+Math.imul(T,lt)|0,a=a+Math.imul(T,ct)|0,r=r+Math.imul(G,ht)|0,i=(i=i+Math.imul(G,dt)|0)+Math.imul(_,ht)|0,a=a+Math.imul(_,dt)|0;var kt=(c+(r=r+Math.imul(S,ft)|0)|0)+((8191&(i=(i=i+Math.imul(S,pt)|0)+Math.imul(L,ft)|0))<<13)|0;c=((a=a+Math.imul(L,pt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(N,lt),i=(i=Math.imul(N,ct))+Math.imul(D,lt)|0,a=Math.imul(D,ct),r=r+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,dt)|0)+Math.imul(T,ht)|0,a=a+Math.imul(T,dt)|0;var Gt=(c+(r=r+Math.imul(G,ft)|0)|0)+((8191&(i=(i=i+Math.imul(G,pt)|0)+Math.imul(_,ft)|0))<<13)|0;c=((a=a+Math.imul(_,pt)|0)+(i>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,r=Math.imul(N,ht),i=(i=Math.imul(N,dt))+Math.imul(D,ht)|0,a=Math.imul(D,dt);var _t=(c+(r=r+Math.imul(E,ft)|0)|0)+((8191&(i=(i=i+Math.imul(E,pt)|0)+Math.imul(T,ft)|0))<<13)|0;c=((a=a+Math.imul(T,pt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863;var Rt=(c+(r=Math.imul(N,ft))|0)+((8191&(i=(i=Math.imul(N,pt))+Math.imul(D,ft)|0))<<13)|0;return c=((a=Math.imul(D,pt))+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,l[0]=vt,l[1]=mt,l[2]=yt,l[3]=bt,l[4]=xt,l[5]=Bt,l[6]=It,l[7]=Ft,l[8]=Qt,l[9]=Ct,l[10]=wt,l[11]=Ut,l[12]=At,l[13]=St,l[14]=Lt,l[15]=kt,l[16]=Gt,l[17]=_t,l[18]=Rt,0!==c&&(l[19]=c,n.length++),n};function p(t,e,n){return(new v).mulp(t,e,n)}function v(t,e){this.x=t,this.y=e}Math.imul||(f=g),a.prototype.mulTo=function(t,e){var n,r=this.length+t.length;return n=10===this.length&&10===t.length?f(this,t,e):r<63?g(this,t,e):r<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,a=0;a<n.length-1;a++){var o=i;i=0;for(var s=67108863&r,l=Math.min(a,e.length-1),c=Math.max(0,a-t.length+1);c<=l;c++){var u=a-c,h=(0|t.words[u])*(0|e.words[c]),d=67108863&h;s=67108863&(d=d+s|0),i+=(o=(o=o+(h/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}n.words[a]=s,r=o,o=i}return 0!==r?n.words[a]=r:n.length--,n.strip()}(this,t,e):p(this,t,e),n},v.prototype.makeRBT=function(t){for(var e=new Array(t),n=a.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},v.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},v.prototype.permute=function(t,e,n,r,i,a){for(var o=0;o<a;o++)r[o]=e[t[o]],i[o]=n[t[o]]},v.prototype.transform=function(t,e,n,r,i,a){this.permute(a,t,e,n,r,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<i;u+=s)for(var h=l,d=c,g=0;g<o;g++){var f=n[u+g],p=r[u+g],v=n[u+g+o],m=r[u+g+o],y=h*v-d*m;m=h*m+d*v,v=y,n[u+g]=f+v,r[u+g]=p+m,n[u+g+o]=f-v,r[u+g+o]=p-m,g!==s&&(y=l*h-c*d,d=l*d+c*h,h=y)}},v.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},v.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,n,i){for(var a=0,o=0;o<e;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*e;o<i;++o)n[o]=0;r(0===a),r(!(-8192&a))},v.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},v.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),a=this.stub(r),o=new Array(r),s=new Array(r),l=new Array(r),c=new Array(r),u=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,c,r),this.transform(o,a,s,l,r,i),this.transform(c,a,u,h,r,i);for(var g=0;g<r;g++){var f=s[g]*u[g]-l[g]*h[g];l[g]=s[g]*h[g]+l[g]*u[g],s[g]=f}return this.conjugate(s,l,r),this.transform(s,l,d,a,r,i),this.conjugate(d,a,r),this.normalize13b(d,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),p(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=a>>>26,this.words[n]=67108863&a}return 0!==e&&(this.words[n]=e,this.length++),this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new a(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},a.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(e=0;e<this.length;e++){var s=this.words[e]&a,l=(0|this.words[e])-s<<n;this.words[e]=l|o,o=s>>>26-n}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,l=n;if(i-=o,i=Math.max(0,i),l){for(var c=0;c<o;c++)l.words[c]=this.words[c];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var h=0|this.words[c];this.words[c]=u<<26-a|h>>>a,u=h&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},a.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var l=(0|t.words[i])*e;s=((a-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var s,l=r.length-i.length;if("mod"!==e){(s=new a(null)).length=l+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=r.clone()._ishlnsubmul(i,1,l);0===u.negative&&(r=u,s&&(s.words[l]=1));for(var h=l-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=d)}return s&&s.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},a.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):this.negative&t.negative?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,o,s},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),a=n.cmp(r);return a<0||1===i&&0===a?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},a.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new a(1),o=new a(0),s=new a(0),l=new a(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),h=e.clone();!e.isZero();){for(var d=0,g=1;!(e.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(h)),i.iushrn(1),o.iushrn(1);for(var f=0,p=1;!(n.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(h)),s.iushrn(1),l.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(s),o.isub(l)):(n.isub(e),s.isub(i),l.isub(o))}return{a:s,b:l,gcd:n.iushln(c)}},a.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new a(1),s=new a(0),l=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;!(e.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(e.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var h=0,d=1;!(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(s)):(n.isub(e),s.isub(o))}return(i=0===e.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(t),i},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var a=e;e=n,n=a}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return!(1&this.words[0])},a.prototype.isOdd=function(){return!(1&~this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new F(t)},a.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function B(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function I(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function F(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Q(t){F.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},i(b,y),b.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var a=t.words[9];for(e.words[e.length++]=a&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&n)<<4|a>>>22,a=o}a>>>=22,t.words[i-10]=a,0===a&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(x,y),i(B,y),i(I,y),I.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new x;else if("p192"===t)e=new B;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new I}return m[t]=e,e},F.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},F.prototype._verify2=function(t,e){r(!(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},F.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},F.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},F.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},F.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},F.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},F.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},F.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},F.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},F.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},F.prototype.isqr=function(t){return this.imul(t,t.clone())},F.prototype.sqr=function(t){return this.mul(t,t)},F.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new a(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var s=new a(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new a(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var h=this.pow(u,i),d=this.pow(t,i.addn(1).iushrn(1)),g=this.pow(t,i),f=o;0!==g.cmp(s);){for(var p=g,v=0;0!==p.cmp(s);v++)p=p.redSqr();r(v<f);var m=this.pow(h,new a(1).iushln(f-v-1));d=d.redMul(m),h=m.redSqr(),g=g.redMul(h),f=v}return d},F.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},F.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],o=0,s=0,l=e.bitLength()%26;for(0===l&&(l=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],u=l-1;u>=0;u--){var h=c>>u&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4===++s||0===r&&0===u)&&(i=this.mul(i,n[o]),s=0,o=0)):s=0}l=26}return i},F.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},F.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new Q(t)},i(Q,F),Q.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},Q.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},Q.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},Q.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},Q.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=n.nmd(t),this)},6204:function(t){t.exports=function(t){var e,n,r,i=t.length,a=0;for(e=0;e<i;++e)a+=t[e].length;var o=new Array(a),s=0;for(e=0;e<i;++e){var l=t[e],c=l.length;for(n=0;n<c;++n){var u=o[s++]=new Array(c-1),h=0;for(r=0;r<c;++r)r!==n&&(u[h++]=l[r]);if(1&n){var d=u[1];u[1]=u[0],u[0]=d}}}return o}},6867:function(t,e,n){t.exports=function(t,e,n){switch(arguments.length){case 1:return function(t){return r=[],c(t,t,u,!0),r}(t);case 2:return"function"==typeof e?c(t,t,e,!0):function(t,e){return r=[],c(t,e,u,!1),r}(t,e);case 3:return c(t,e,n,!1);default:throw new Error("box-intersect: Invalid arguments")}};var r,i=n(1888),a=n(855),o=n(7150);function s(t,e){for(var n=0;n<t;++n)if(!(e[n]<=e[n+t]))return!0;return!1}function l(t,e,n,r){for(var i=0,a=0,o=0,l=t.length;o<l;++o){var c=t[o];if(!s(e,c)){for(var u=0;u<2*e;++u)n[i++]=c[u];r[a++]=o}}return a}function c(t,e,n,r){var s=t.length,c=e.length;if(!(s<=0||c<=0)){var u=t[0].length>>>1;if(!(u<=0)){var h,d=i.mallocDouble(2*u*s),g=i.mallocInt32(s);if((s=l(t,u,d,g))>0){if(1===u&&r)a.init(s),h=a.sweepComplete(u,n,0,s,d,g,0,s,d,g);else{var f=i.mallocDouble(2*u*c),p=i.mallocInt32(c);(c=l(e,u,f,p))>0&&(a.init(s+c),h=1===u?a.sweepBipartite(u,n,0,s,d,g,0,c,f,p):o(u,n,r,s,d,g,c,f,p),i.free(f),i.free(p))}i.free(d),i.free(g)}return h}}}function u(t,e){r.push([t,e])}},2455:function(t,e){function n(t){return t?function(t,e,n,r,i,a,o,s,l,c,u){return i-r>l-s?function(t,e,n,r,i,a,o,s,l,c,u){for(var h=2*t,d=r,g=h*r;d<i;++d,g+=h){var f=a[e+g],p=a[e+g+t],v=o[d];t:for(var m=s,y=h*s;m<l;++m,y+=h){var b=c[e+y],x=c[e+y+t],B=u[m];if(!(x<f||p<b)){for(var I=e+1;I<t;++I){var F=a[I+g],Q=a[I+t+g],C=c[I+y],w=c[I+t+y];if(Q<C||w<F)continue t}var U=n(v,B);if(void 0!==U)return U}}}}(t,e,n,r,i,a,o,s,l,c,u):function(t,e,n,r,i,a,o,s,l,c,u){for(var h=2*t,d=s,g=h*s;d<l;++d,g+=h){var f=c[e+g],p=c[e+g+t],v=u[d];t:for(var m=r,y=h*r;m<i;++m,y+=h){var b=a[e+y],x=a[e+y+t],B=o[m];if(!(p<b||x<f)){for(var I=e+1;I<t;++I){var F=a[I+y],Q=a[I+t+y],C=c[I+g],w=c[I+t+g];if(Q<C||w<F)continue t}var U=n(B,v);if(void 0!==U)return U}}}}(t,e,n,r,i,a,o,s,l,c,u)}:function(t,e,n,r,i,a,o,s,l,c,u,h){return a-i>c-l?r?function(t,e,n,r,i,a,o,s,l,c,u){for(var h=2*t,d=r,g=h*r;d<i;++d,g+=h){var f=a[e+g],p=a[e+g+t],v=o[d];t:for(var m=s,y=h*s;m<l;++m,y+=h){var b=c[e+y],x=u[m];if(!(b<=f||p<b)){for(var B=e+1;B<t;++B){var I=a[B+g],F=a[B+t+g],Q=c[B+y],C=c[B+t+y];if(F<Q||C<I)continue t}var w=n(x,v);if(void 0!==w)return w}}}}(t,e,n,i,a,o,s,l,c,u,h):function(t,e,n,r,i,a,o,s,l,c,u){for(var h=2*t,d=r,g=h*r;d<i;++d,g+=h){var f=a[e+g],p=a[e+g+t],v=o[d];t:for(var m=s,y=h*s;m<l;++m,y+=h){var b=c[e+y],x=u[m];if(!(b<f||p<b)){for(var B=e+1;B<t;++B){var I=a[B+g],F=a[B+t+g],Q=c[B+y],C=c[B+t+y];if(F<Q||C<I)continue t}var w=n(v,x);if(void 0!==w)return w}}}}(t,e,n,i,a,o,s,l,c,u,h):r?function(t,e,n,r,i,a,o,s,l,c,u){for(var h=2*t,d=s,g=h*s;d<l;++d,g+=h){var f=c[e+g],p=u[d];t:for(var v=r,m=h*r;v<i;++v,m+=h){var y=a[e+m],b=a[e+m+t],x=o[v];if(!(f<=y||b<f)){for(var B=e+1;B<t;++B){var I=a[B+m],F=a[B+t+m],Q=c[B+g],C=c[B+t+g];if(F<Q||C<I)continue t}var w=n(p,x);if(void 0!==w)return w}}}}(t,e,n,i,a,o,s,l,c,u,h):function(t,e,n,r,i,a,o,s,l,c,u){for(var h=2*t,d=s,g=h*s;d<l;++d,g+=h){var f=c[e+g],p=u[d];t:for(var v=r,m=h*r;v<i;++v,m+=h){var y=a[e+m],b=a[e+m+t],x=o[v];if(!(f<y||b<f)){for(var B=e+1;B<t;++B){var I=a[B+m],F=a[B+t+m],Q=c[B+g],C=c[B+t+g];if(F<Q||C<I)continue t}var w=n(x,p);if(void 0!==w)return w}}}}(t,e,n,i,a,o,s,l,c,u,h)}}e.partial=n(!1),e.full=n(!0)},7150:function(t,e,n){t.exports=function(t,e,n,a,u,U,A,S,L){!function(t,e){var n=8*i.log2(e+1)*(t+1)|0,a=i.nextPow2(x*n);I.length<a&&(r.free(I),I=r.mallocInt32(a));var o=i.nextPow2(B*n);F.length<o&&(r.free(F),F=r.mallocDouble(o))}(t,a+A);var k,G=0,_=2*t;Q(G++,0,0,a,0,A,n?16:0,-1/0,1/0),n||Q(G++,0,0,A,0,a,1,-1/0,1/0);for(;G>0;){var R=(G-=1)*x,E=I[R],T=I[R+1],M=I[R+2],N=I[R+3],D=I[R+4],X=I[R+5],Z=G*B,V=F[Z],H=F[Z+1],W=1&X,Y=!!(16&X),z=u,O=U,J=S,P=L;if(W&&(z=S,O=L,J=u,P=U),!(2&X&&T>=(M=v(t,E,T,M,z,O,H))||4&X&&(T=m(t,E,T,M,z,O,V))>=M)){var j=M-T,K=D-N;if(Y){if(t*j*(j+K)<g){if(void 0!==(k=l.scanComplete(t,E,e,T,M,z,O,N,D,J,P)))return k;continue}}else{if(t*Math.min(j,K)<h){if(void 0!==(k=o(t,E,e,W,T,M,z,O,N,D,J,P)))return k;continue}if(t*j*K<d){if(void 0!==(k=l.scanBipartite(t,E,e,W,T,M,z,O,N,D,J,P)))return k;continue}}var q=f(t,E,T,M,z,O,V,H);if(T<q)if(t*(q-T)<h){if(void 0!==(k=s(t,E+1,e,T,q,z,O,N,D,J,P)))return k}else if(E===t-2){if(void 0!==(k=W?l.sweepBipartite(t,e,N,D,J,P,T,q,z,O):l.sweepBipartite(t,e,T,q,z,O,N,D,J,P)))return k}else Q(G++,E+1,T,q,N,D,W,-1/0,1/0),Q(G++,E+1,N,D,T,q,1^W,-1/0,1/0);if(q<M){var $=c(t,E,N,D,J,P),tt=J[_*$+E],et=p(t,E,$,D,J,P,tt);if(et<D&&Q(G++,E,q,M,et,D,(4|W)+(Y?16:0),tt,H),N<$&&Q(G++,E,q,M,N,$,(2|W)+(Y?16:0),V,tt),$+1===et){if(void 0!==(k=Y?w(t,E,e,q,M,z,O,$,J,P[$]):C(t,E,e,W,q,M,z,O,$,J,P[$])))return k}else if($<et){var nt;if(Y){if(q<(nt=y(t,E,q,M,z,O,tt))){var rt=p(t,E,q,nt,z,O,tt);if(E===t-2){if(q<rt&&void 0!==(k=l.sweepComplete(t,e,q,rt,z,O,$,et,J,P)))return k;if(rt<nt&&void 0!==(k=l.sweepBipartite(t,e,rt,nt,z,O,$,et,J,P)))return k}else q<rt&&Q(G++,E+1,q,rt,$,et,16,-1/0,1/0),rt<nt&&(Q(G++,E+1,rt,nt,$,et,0,-1/0,1/0),Q(G++,E+1,$,et,rt,nt,1,-1/0,1/0))}}else q<(nt=W?b(t,E,q,M,z,O,tt):y(t,E,q,M,z,O,tt))&&(E===t-2?k=W?l.sweepBipartite(t,e,$,et,J,P,q,nt,z,O):l.sweepBipartite(t,e,q,nt,z,O,$,et,J,P):(Q(G++,E+1,q,nt,$,et,W,-1/0,1/0),Q(G++,E+1,$,et,q,nt,1^W,-1/0,1/0)))}}}}};var r=n(1888),i=n(8828),a=n(2455),o=a.partial,s=a.full,l=n(855),c=n(3545),u=n(8105),h=128,d=1<<22,g=1<<22,f=u("!(lo>=p0)&&!(p1>=hi)"),p=u("lo===p0"),v=u("lo<p0"),m=u("hi<=p0"),y=u("lo<=p0&&p0<=hi"),b=u("lo<p0&&p0<=hi"),x=6,B=2,I=r.mallocInt32(1024),F=r.mallocDouble(1024);function Q(t,e,n,r,i,a,o,s,l){var c=x*t;I[c]=e,I[c+1]=n,I[c+2]=r,I[c+3]=i,I[c+4]=a,I[c+5]=o;var u=B*t;F[u]=s,F[u+1]=l}function C(t,e,n,r,i,a,o,s,l,c,u){var h=2*t,d=l*h,g=c[d+e];t:for(var f=i,p=i*h;f<a;++f,p+=h){var v=o[p+e],m=o[p+e+t];if(!(g<v||m<g)&&(!r||g!==v)){for(var y,b=s[f],x=e+1;x<t;++x){v=o[p+x],m=o[p+x+t];var B=c[d+x],I=c[d+x+t];if(m<B||I<v)continue t}if(void 0!==(y=r?n(u,b):n(b,u)))return y}}}function w(t,e,n,r,i,a,o,s,l,c){var u=2*t,h=s*u,d=l[h+e];t:for(var g=r,f=r*u;g<i;++g,f+=u){var p=o[g];if(p!==c){var v=a[f+e],m=a[f+e+t];if(!(d<v||m<d)){for(var y=e+1;y<t;++y){v=a[f+y],m=a[f+y+t];var b=l[h+y],x=l[h+y+t];if(m<b||x<v)continue t}var B=n(p,c);if(void 0!==B)return B}}}}},3545:function(t,e,n){t.exports=function(t,e,n,o,s,l){if(o<=n+1)return n;var c=n,u=o,h=o+n>>>1,d=2*t,g=h,f=s[d*h+e];for(;c<u;){if(u-c<i){a(t,e,c,u,s,l),f=s[d*h+e];break}var p=u-c,v=Math.random()*p+c|0,m=s[d*v+e],y=Math.random()*p+c|0,b=s[d*y+e],x=Math.random()*p+c|0,B=s[d*x+e];m<=b?B>=b?(g=y,f=b):m>=B?(g=v,f=m):(g=x,f=B):b>=B?(g=y,f=b):B>=m?(g=v,f=m):(g=x,f=B);for(var I=d*(u-1),F=d*g,Q=0;Q<d;++Q,++I,++F){var C=s[I];s[I]=s[F],s[F]=C}var w=l[u-1];l[u-1]=l[g],l[g]=w;for(I=d*(u-1),F=d*(g=r(t,e,c,u-1,s,l,f)),Q=0;Q<d;++Q,++I,++F){C=s[I];s[I]=s[F],s[F]=C}w=l[u-1];if(l[u-1]=l[g],l[g]=w,h<g){for(u=g-1;c<u&&s[d*(u-1)+e]===f;)u-=1;u+=1}else{if(!(g<h))break;for(c=g+1;c<u&&s[d*c+e]===f;)c+=1}}return r(t,e,n,h,s,l,s[d*h+e])};var r=n(8105)("lo<p0"),i=8;function a(t,e,n,r,i,a){for(var o=2*t,s=o*(n+1)+e,l=n+1;l<r;++l,s+=o)for(var c=i[s],u=l,h=o*(l-1);u>n&&i[h+e]>c;--u,h-=o){for(var d=h,g=h+o,f=0;f<o;++f,++d,++g){var p=i[d];i[d]=i[g],i[g]=p}var v=a[u];a[u]=a[u-1],a[u-1]=v}}},8105:function(t){t.exports=function(t){return e[t]};var e={"lo===p0":function(t,e,n,r,i,a,o){for(var s=2*t,l=s*n,c=l,u=n,h=e,d=n;r>d;++d,l+=s){if(i[l+h]===o)if(u===d)u+=1,c+=s;else{for(var g=0;s>g;++g){var f=i[l+g];i[l+g]=i[c],i[c++]=f}var p=a[d];a[d]=a[u],a[u++]=p}}return u},"lo<p0":function(t,e,n,r,i,a,o){for(var s=2*t,l=s*n,c=l,u=n,h=e,d=n;r>d;++d,l+=s){if(i[l+h]<o)if(u===d)u+=1,c+=s;else{for(var g=0;s>g;++g){var f=i[l+g];i[l+g]=i[c],i[c++]=f}var p=a[d];a[d]=a[u],a[u++]=p}}return u},"lo<=p0":function(t,e,n,r,i,a,o){for(var s=2*t,l=s*n,c=l,u=n,h=t+e,d=n;r>d;++d,l+=s){if(i[l+h]<=o)if(u===d)u+=1,c+=s;else{for(var g=0;s>g;++g){var f=i[l+g];i[l+g]=i[c],i[c++]=f}var p=a[d];a[d]=a[u],a[u++]=p}}return u},"hi<=p0":function(t,e,n,r,i,a,o){for(var s=2*t,l=s*n,c=l,u=n,h=t+e,d=n;r>d;++d,l+=s){if(i[l+h]<=o)if(u===d)u+=1,c+=s;else{for(var g=0;s>g;++g){var f=i[l+g];i[l+g]=i[c],i[c++]=f}var p=a[d];a[d]=a[u],a[u++]=p}}return u},"lo<p0&&p0<=hi":function(t,e,n,r,i,a,o){for(var s=2*t,l=s*n,c=l,u=n,h=e,d=t+e,g=n;r>g;++g,l+=s){var f=i[l+h],p=i[l+d];if(f<o&&o<=p)if(u===g)u+=1,c+=s;else{for(var v=0;s>v;++v){var m=i[l+v];i[l+v]=i[c],i[c++]=m}var y=a[g];a[g]=a[u],a[u++]=y}}return u},"lo<=p0&&p0<=hi":function(t,e,n,r,i,a,o){for(var s=2*t,l=s*n,c=l,u=n,h=e,d=t+e,g=n;r>g;++g,l+=s){var f=i[l+h],p=i[l+d];if(f<=o&&o<=p)if(u===g)u+=1,c+=s;else{for(var v=0;s>v;++v){var m=i[l+v];i[l+v]=i[c],i[c++]=m}var y=a[g];a[g]=a[u],a[u++]=y}}return u},"!(lo>=p0)&&!(p1>=hi)":function(t,e,n,r,i,a,o,s){for(var l=2*t,c=l*n,u=c,h=n,d=e,g=t+e,f=n;r>f;++f,c+=l){var p=i[c+d],v=i[c+g];if(!(p>=o||s>=v))if(h===f)h+=1,u+=l;else{for(var m=0;l>m;++m){var y=i[c+m];i[c+m]=i[u],i[u++]=y}var b=a[f];a[f]=a[h],a[h++]=b}}return h}}},1811:function(t){t.exports=function(t,r){r<=4*e?n(0,r-1,t):c(0,r-1,t)};var e=32;function n(t,e,n){for(var r=2*(t+1),i=t+1;i<=e;++i){for(var a=n[r++],o=n[r++],s=i,l=r-2;s-- >t;){var c=n[l-2],u=n[l-1];if(c<a)break;if(c===a&&u<o)break;n[l]=c,n[l+1]=u,l-=2}n[l]=a,n[l+1]=o}}function r(t,e,n){e*=2;var r=n[t*=2],i=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=r,n[e+1]=i}function i(t,e,n){e*=2,n[t*=2]=n[e],n[t+1]=n[e+1]}function a(t,e,n,r){e*=2,n*=2;var i=r[t*=2],a=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=r[n],r[e+1]=r[n+1],r[n]=i,r[n+1]=a}function o(t,e,n,r,i){e*=2,i[t*=2]=i[e],i[e]=n,i[t+1]=i[e+1],i[e+1]=r}function s(t,e,n){e*=2;var r=n[t*=2],i=n[e];return!(r<i)&&(r!==i||n[t+1]>n[e+1])}function l(t,e,n,r){var i=r[t*=2];return i<e||i===e&&r[t+1]<n}function c(t,u,h){var d=(u-t+1)/6|0,g=t+d,f=u-d,p=t+u>>1,v=p-d,m=p+d,y=g,b=v,x=p,B=m,I=f,F=t+1,Q=u-1,C=0;s(y,b,h)&&(C=y,y=b,b=C),s(B,I,h)&&(C=B,B=I,I=C),s(y,x,h)&&(C=y,y=x,x=C),s(b,x,h)&&(C=b,b=x,x=C),s(y,B,h)&&(C=y,y=B,B=C),s(x,B,h)&&(C=x,x=B,B=C),s(b,I,h)&&(C=b,b=I,I=C),s(b,x,h)&&(C=b,b=x,x=C),s(B,I,h)&&(C=B,B=I,I=C);for(var w=h[2*b],U=h[2*b+1],A=h[2*B],S=h[2*B+1],L=2*y,k=2*x,G=2*I,_=2*g,R=2*p,E=2*f,T=0;T<2;++T){var M=h[L+T],N=h[k+T],D=h[G+T];h[_+T]=M,h[R+T]=N,h[E+T]=D}i(v,t,h),i(m,u,h);for(var X=F;X<=Q;++X)if(l(X,w,U,h))X!==F&&r(X,F,h),++F;else if(!l(X,A,S,h))for(;;){if(l(Q,A,S,h)){l(Q,w,U,h)?(a(X,F,Q,h),++F,--Q):(r(X,Q,h),--Q);break}if(--Q<X)break}o(t,F-1,w,U,h),o(u,Q+1,A,S,h),F-2-t<=e?n(t,F-2,h):c(t,F-2,h),u-(Q+2)<=e?n(Q+2,u,h):c(Q+2,u,h),Q-F<=e?n(F,Q,h):c(F,Q,h)}},855:function(t,e,n){t.exports={init:function(t){var e=i.nextPow2(t);l.length<e&&(r.free(l),l=r.mallocInt32(e));c.length<e&&(r.free(c),c=r.mallocInt32(e));u.length<e&&(r.free(u),u=r.mallocInt32(e));h.length<e&&(r.free(h),h=r.mallocInt32(e));d.length<e&&(r.free(d),d=r.mallocInt32(e));g.length<e&&(r.free(g),g=r.mallocInt32(e));var n=8*e;f.length<n&&(r.free(f),f=r.mallocDouble(n))},sweepBipartite:function(t,e,n,r,i,s,d,g,m,y){for(var b=0,x=2*t,B=t-1,I=x-1,F=n;F<r;++F){var Q=s[F],C=x*F;f[b++]=i[C+B],f[b++]=-(Q+1),f[b++]=i[C+I],f[b++]=Q}for(F=d;F<g;++F){Q=y[F]+o;var w=x*F;f[b++]=m[w+B],f[b++]=-Q,f[b++]=m[w+I],f[b++]=Q}var U=b>>>1;a(f,U);var A=0,S=0;for(F=0;F<U;++F){var L=0|f[2*F+1];if(L>=o)p(u,h,S--,L=L-o|0);else if(L>=0)p(l,c,A--,L);else if(L<=-o){L=-L-o|0;for(var k=0;k<A;++k){if(void 0!==(G=e(l[k],L)))return G}v(u,h,S++,L)}else{L=-L-1|0;for(k=0;k<S;++k){var G;if(void 0!==(G=e(L,u[k])))return G}v(l,c,A++,L)}}},sweepComplete:function(t,e,n,r,i,o,s,m,y,b){for(var x=0,B=2*t,I=t-1,F=B-1,Q=n;Q<r;++Q){var C=o[Q]+1<<1,w=B*Q;f[x++]=i[w+I],f[x++]=-C,f[x++]=i[w+F],f[x++]=C}for(Q=s;Q<m;++Q){C=b[Q]+1<<1;var U=B*Q;f[x++]=y[U+I],f[x++]=1|-C,f[x++]=y[U+F],f[x++]=1|C}var A=x>>>1;a(f,A);var S=0,L=0,k=0;for(Q=0;Q<A;++Q){var G=0|f[2*Q+1],_=1&G;if(Q<A-1&&G>>1==f[2*Q+3]>>1&&(_=2,Q+=1),G<0){for(var R=-(G>>1)-1,E=0;E<k;++E){if(void 0!==(T=e(d[E],R)))return T}if(0!==_)for(E=0;E<S;++E){if(void 0!==(T=e(l[E],R)))return T}if(1!==_)for(E=0;E<L;++E){var T;if(void 0!==(T=e(u[E],R)))return T}0===_?v(l,c,S++,R):1===_?v(u,h,L++,R):2===_&&v(d,g,k++,R)}else{R=(G>>1)-1;0===_?p(l,c,S--,R):1===_?p(u,h,L--,R):2===_&&p(d,g,k--,R)}}},scanBipartite:function(t,e,n,r,i,s,u,h,d,g,m,y){var b=0,x=2*t,B=e,I=e+t,F=1,Q=1;r?Q=o:F=o;for(var C=i;C<s;++C){var w=C+F,U=x*C;f[b++]=u[U+B],f[b++]=-w,f[b++]=u[U+I],f[b++]=w}for(C=d;C<g;++C){w=C+Q;var A=x*C;f[b++]=m[A+B],f[b++]=-w}var S=b>>>1;a(f,S);var L=0;for(C=0;C<S;++C){var k=0|f[2*C+1];if(k<0){var G=!1;if((w=-k)>=o?(G=!r,w-=o):(G=!!r,w-=1),G)v(l,c,L++,w);else{var _=y[w],R=x*w,E=m[R+e+1],T=m[R+e+1+t];t:for(var M=0;M<L;++M){var N=l[M],D=x*N;if(!(T<u[D+e+1]||u[D+e+1+t]<E)){for(var X=e+2;X<t;++X)if(m[R+X+t]<u[D+X]||u[D+X+t]<m[R+X])continue t;var Z,V=h[N];if(void 0!==(Z=r?n(_,V):n(V,_)))return Z}}}}else p(l,c,L--,k-F)}},scanComplete:function(t,e,n,r,i,s,c,u,h,d,g){for(var p=0,v=2*t,m=e,y=e+t,b=r;b<i;++b){var x=b+o,B=v*b;f[p++]=s[B+m],f[p++]=-x,f[p++]=s[B+y],f[p++]=x}for(b=u;b<h;++b){x=b+1;var I=v*b;f[p++]=d[I+m],f[p++]=-x}var F=p>>>1;a(f,F);var Q=0;for(b=0;b<F;++b){var C=0|f[2*b+1];if(C<0){if((x=-C)>=o)l[Q++]=x-o;else{var w=g[x-=1],U=v*x,A=d[U+e+1],S=d[U+e+1+t];t:for(var L=0;L<Q;++L){var k=l[L],G=c[k];if(G===w)break;var _=v*k;if(!(S<s[_+e+1]||s[_+e+1+t]<A)){for(var R=e+2;R<t;++R)if(d[U+R+t]<s[_+R]||s[_+R+t]<d[U+R])continue t;var E=n(G,w);if(void 0!==E)return E}}}}else{for(x=C-o,L=Q-1;L>=0;--L)if(l[L]===x){for(R=L+1;R<Q;++R)l[R-1]=l[R];break}--Q}}}};var r=n(1888),i=n(8828),a=n(1811),o=1<<28,s=1024,l=r.mallocInt32(s),c=r.mallocInt32(s),u=r.mallocInt32(s),h=r.mallocInt32(s),d=r.mallocInt32(s),g=r.mallocInt32(s),f=r.mallocDouble(8192);function p(t,e,n,r){var i=e[r],a=t[n-1];t[i]=a,e[a]=i}function v(t,e,n,r){t[n]=r,e[r]=n}},2538:function(t,e,n){var r=n(8902),i=n(5542),a=n(2272),o=n(5023);function s(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function l(t,e){return t[0]-e[0]||t[1]-e[1]}function c(t,e,n){return e in t?t[e]:n}t.exports=function(t,e,n){Array.isArray(e)?(n=n||{},e=e||[]):(n=e||{},e=[]);var u=!!c(n,"delaunay",!0),h=!!c(n,"interior",!0),d=!!c(n,"exterior",!0),g=!!c(n,"infinity",!1);if(!h&&!d||0===t.length)return[];var f=r(t,e);if(u||h!==d||g){for(var p=i(t.length,function(t){return t.map(s).sort(l)}(e)),v=0;v<f.length;++v){var m=f[v];p.addTriangle(m[0],m[1],m[2])}return u&&a(t,p),d?h?g?o(p,0,g):p.cells():o(p,1,g):o(p,-1)}return f}},2272:function(t,e,n){var r=n(2646)[4];function i(t,e,n,i,a,o){var s=e.opposite(i,a);if(!(s<0)){if(a<i){var l=i;i=a,a=l,l=o,o=s,s=l}e.isConstraint(i,a)||r(t[i],t[a],t[o],t[s])<0&&n.push(i,a)}}n(2478),t.exports=function(t,e){for(var n=[],a=t.length,o=e.stars,s=0;s<a;++s)for(var l=o[s],c=1;c<l.length;c+=2){if(!((g=l[c])<s)&&!e.isConstraint(s,g)){for(var u=l[c-1],h=-1,d=1;d<l.length;d+=2)if(l[d-1]===g){h=l[d];break}h<0||r(t[s],t[g],t[u],t[h])<0&&n.push(s,g)}}for(;n.length>0;){for(var g=n.pop(),f=(u=-1,h=-1,l=o[s=n.pop()],1);f<l.length;f+=2){var p=l[f-1],v=l[f];p===g?h=v:v===g&&(u=p)}u<0||h<0||(r(t[s],t[g],t[u],t[h])>=0||(e.flip(s,g),i(t,e,n,u,s,h),i(t,e,n,s,h,u),i(t,e,n,h,g,u),i(t,e,n,g,u,h)))}}},5023:function(t,e,n){var r,i=n(2478);function a(t,e,n,r,i,a,o){this.cells=t,this.neighbor=e,this.flags=r,this.constraint=n,this.active=i,this.next=a,this.boundary=o}function o(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}t.exports=function(t,e,n){var r=function(t,e){for(var n=t.cells(),r=n.length,i=0;i<r;++i){var s=(m=n[i])[0],l=m[1],c=m[2];l<c?l<s&&(m[0]=l,m[1]=c,m[2]=s):c<s&&(m[0]=c,m[1]=s,m[2]=l)}n.sort(o);var u=new Array(r);for(i=0;i<u.length;++i)u[i]=0;var h=[],d=[],g=new Array(3*r),f=new Array(3*r),p=null;e&&(p=[]);var v=new a(n,g,f,u,h,d,p);for(i=0;i<r;++i)for(var m=n[i],y=0;y<3;++y){s=m[y],l=m[(y+1)%3];var b=g[3*i+y]=v.locate(l,s,t.opposite(l,s)),x=f[3*i+y]=t.isConstraint(s,l);b<0&&(x?d.push(i):(h.push(i),u[i]=1),e&&p.push([l,s,-1]))}return v}(t,n);if(0===e)return n?r.cells.concat(r.boundary):r.cells;var i=1,s=r.active,l=r.next,c=r.flags,u=r.cells,h=r.constraint,d=r.neighbor;for(;s.length>0||l.length>0;){for(;s.length>0;){var g=s.pop();if(c[g]!==-i){c[g]=i,u[g];for(var f=0;f<3;++f){var p=d[3*g+f];p>=0&&0===c[p]&&(h[3*g+f]?l.push(p):(s.push(p),c[p]=i))}}}var v=l;l=s,s=v,l.length=0,i=-i}var m=function(t,e,n){for(var r=0,i=0;i<t.length;++i)e[i]===n&&(t[r++]=t[i]);return t.length=r,t}(u,c,e);if(n)return m.concat(r.boundary);return m},a.prototype.locate=(r=[0,0,0],function(t,e,n){var a=t,s=e,l=n;return e<n?e<t&&(a=e,s=n,l=t):n<t&&(a=n,s=t,l=e),a<0?-1:(r[0]=a,r[1]=s,r[2]=l,i.eq(this.cells,r,o))})},8902:function(t,e,n){var r=n(2478),i=n(3250)[3],a=0;function o(t,e,n,r,i){this.a=t,this.b=e,this.idx=n,this.lowerIds=r,this.upperIds=i}function s(t,e,n,r){this.a=t,this.b=e,this.type=n,this.idx=r}function l(t,e){var n=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return n||(t.type!==a&&(n=i(t.a,t.b,e.b))?n:t.idx-e.idx)}function c(t,e){return i(t.a,t.b,e)}function u(t,e,n,a,o){for(var s=r.lt(e,a,c),l=r.gt(e,a,c),u=s;u<l;++u){for(var h=e[u],d=h.lowerIds,g=d.length;g>1&&i(n[d[g-2]],n[d[g-1]],a)>0;)t.push([d[g-1],d[g-2],o]),g-=1;d.length=g,d.push(o);var f=h.upperIds;for(g=f.length;g>1&&i(n[f[g-2]],n[f[g-1]],a)<0;)t.push([f[g-2],f[g-1],o]),g-=1;f.length=g,f.push(o)}}function h(t,e){var n;return(n=t.a[0]<e.a[0]?i(t.a,t.b,e.a):i(e.b,e.a,t.a))?n:(n=e.b[0]<t.b[0]?i(t.a,t.b,e.b):i(e.b,e.a,t.b))||t.idx-e.idx}function d(t,e,n){var i=r.le(t,n,h),a=t[i],s=a.upperIds,l=s[s.length-1];a.upperIds=[l],t.splice(i+1,0,new o(n.a,n.b,n.idx,[l],s))}function g(t,e,n){var i=n.a;n.a=n.b,n.b=i;var a=r.eq(t,n,h),o=t[a];t[a-1].upperIds=o.upperIds,t.splice(a,1)}t.exports=function(t,e){for(var n=t.length,r=e.length,i=[],c=0;c<n;++c)i.push(new s(t[c],null,a,c));for(c=0;c<r;++c){var h=e[c],f=t[h[0]],p=t[h[1]];f[0]<p[0]?i.push(new s(f,p,2,c),new s(p,f,1,c)):f[0]>p[0]&&i.push(new s(p,f,2,c),new s(f,p,1,c))}i.sort(l);for(var v=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),m=[new o([v,1],[v,0],-1,[],[])],y=[],b=(c=0,i.length);c<b;++c){var x=i[c],B=x.type;B===a?u(y,m,t,x.a,x.idx):2===B?d(m,t,x):g(m,t,x)}return y}},5542:function(t,e,n){var r=n(2478);function i(t,e){this.stars=t,this.edges=e}t.exports=function(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=[];return new i(n,e)};var a=i.prototype;function o(t,e,n){for(var r=1,i=t.length;r<i;r+=2)if(t[r-1]===e&&t[r]===n)return t[r-1]=t[i-2],t[r]=t[i-1],void(t.length=i-2)}a.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(n,i){return t[0]=Math.min(n,i),t[1]=Math.max(n,i),r.eq(this.edges,t,e)>=0}}(),a.removeTriangle=function(t,e,n){var r=this.stars;o(r[t],e,n),o(r[e],n,t),o(r[n],t,e)},a.addTriangle=function(t,e,n){var r=this.stars;r[t].push(e,n),r[e].push(n,t),r[n].push(t,e)},a.opposite=function(t,e){for(var n=this.stars[e],r=1,i=n.length;r<i;r+=2)if(n[r]===t)return n[r-1];return-1},a.flip=function(t,e){var n=this.opposite(t,e),r=this.opposite(e,t);this.removeTriangle(t,e,n),this.removeTriangle(e,t,r),this.addTriangle(t,r,n),this.addTriangle(e,n,r)},a.edges=function(){for(var t=this.stars,e=[],n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length;a<o;a+=2)e.push([i[a],i[a+1]]);return e},a.cells=function(){for(var t=this.stars,e=[],n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length;a<o;a+=2){var s=i[a],l=i[a+1];n<Math.min(s,l)&&e.push([n,s,l])}return e}},2419:function(t){t.exports=function(t){for(var e=1,n=1;n<t.length;++n)for(var r=0;r<n;++r)if(t[n]<t[r])e=-e;else if(t[r]===t[n])return 0;return e}},3628:function(t,e,n){var r=n(1338),i=n(727);function a(t,e){for(var n=0,r=t.length,i=0;i<r;++i)n+=t[i]*e[i];return n}function o(t){var e=t.length;if(0===e)return[];t[0].length;var n=r([t.length+1,t.length+1],1),o=r([t.length+1],1);n[e][e]=0;for(var s=0;s<e;++s){for(var l=0;l<=s;++l)n[l][s]=n[s][l]=2*a(t[s],t[l]);o[s]=a(t[s],t[s])}var c=i(n,o),u=0,h=c[e+1];for(s=0;s<h.length;++s)u+=h[s];var d=new Array(e);for(s=0;s<e;++s){h=c[s];var g=0;for(l=0;l<h.length;++l)g+=h[l];d[s]=g/u}return d}function s(t){if(0===t.length)return[];for(var e=t[0].length,n=r([e]),i=o(t),a=0;a<t.length;++a)for(var s=0;s<e;++s)n[s]+=t[a][s]*i[a];return n}s.barycenetric=o,t.exports=s},6037:function(t,e,n){t.exports=function(t){for(var e=r(t),n=0,i=0;i<t.length;++i)for(var a=t[i],o=0;o<e.length;++o)n+=Math.pow(a[o]-e[o],2);return Math.sqrt(n/t.length)};var r=n(3628)},332:function(t,e,n){t.exports=function(t,e,n){var r;if(n){r=e;for(var i=new Array(e.length),a=0;a<e.length;++a){var o=e[a];i[a]=[o[0],o[1],n[a]]}e=i}var s=function(t,e,n){var r=f(t,[],g(t));return m(e,r,n),!!r}(t,e,!!n);for(;y(t,e,!!n);)s=!0;if(n&&s){r.length=0,n.length=0;for(a=0;a<e.length;++a){o=e[a];r.push([o[0],o[1]]),n.push(o[2])}}return s};var r=n(1755),i=n(6867),a=n(1125),o=n(7842),s=n(1318),l=n(946),c=n(5838),u=n(1278),h=n(3637);function d(t){var e=l(t);return[u(e,-1/0),u(e,1/0)]}function g(t){for(var e=new Array(t.length),n=0;n<t.length;++n){var r=t[n];e[n]=[u(r[0],-1/0),u(r[1],-1/0),u(r[0],1/0),u(r[1],1/0)]}return e}function f(t,e,n){for(var a=e.length,o=new r(a),s=[],l=0;l<e.length;++l){var c=e[l],h=d(c[0]),g=d(c[1]);s.push([u(h[0],-1/0),u(g[0],-1/0),u(h[1],1/0),u(g[1],1/0)])}i(s,(function(t,e){o.link(t,e)}));var f=!0,p=new Array(a);for(l=0;l<a;++l){(m=o.find(l))!==l&&(f=!1,t[m]=[Math.min(t[l][0],t[m][0]),Math.min(t[l][1],t[m][1])])}if(f)return null;var v=0;for(l=0;l<a;++l){var m;(m=o.find(l))===l?(p[l]=v,t[v++]=t[l]):p[l]=-1}t.length=v;for(l=0;l<a;++l)p[l]<0&&(p[l]=p[o.find(l)]);return p}function p(t,e){return t[0]-e[0]||t[1]-e[1]}function v(t,e){var n=t[0]-e[0]||t[1]-e[1];return n||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function m(t,e,n){if(0!==t.length){if(e)for(var r=0;r<t.length;++r){var i=e[(o=t[r])[0]],a=e[o[1]];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}else for(r=0;r<t.length;++r){var o;i=(o=t[r])[0],a=o[1];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}n?t.sort(v):t.sort(p);var s=1;for(r=1;r<t.length;++r){var l=t[r-1],c=t[r];(c[0]!==l[0]||c[1]!==l[1]||n&&c[2]!==l[2])&&(t[s++]=c)}t.length=s}}function y(t,e,n){var r=function(t,e){for(var n=new Array(e.length),r=0;r<e.length;++r){var i=e[r],a=t[i[0]],o=t[i[1]];n[r]=[u(Math.min(a[0],o[0]),-1/0),u(Math.min(a[1],o[1]),-1/0),u(Math.max(a[0],o[0]),1/0),u(Math.max(a[1],o[1]),1/0)]}return n}(t,e),d=function(t,e,n){var r=[];return i(n,(function(n,i){var o=e[n],s=e[i];if(o[0]!==s[0]&&o[0]!==s[1]&&o[1]!==s[0]&&o[1]!==s[1]){var l=t[o[0]],c=t[o[1]],u=t[s[0]],h=t[s[1]];a(l,c,u,h)&&r.push([n,i])}})),r}(t,e,r),p=function(t,e,n,r){var o=[];return i(n,r,(function(n,r){var i=e[n];if(i[0]!==r&&i[1]!==r){var s=t[r],l=t[i[0]],c=t[i[1]];a(l,c,s,s)&&o.push([n,r])}})),o}(t,e,r,g(t)),v=function(t,e,n,r,i){var a,u,d=t.map((function(t){return[o(t[0]),o(t[1])]}));for(a=0;a<n.length;++a){var g=n[a];u=g[0];var f=g[1],p=e[u],v=e[f],m=h(c(t[p[0]]),c(t[p[1]]),c(t[v[0]]),c(t[v[1]]));if(m){var y=t.length;t.push([l(m[0]),l(m[1])]),d.push(m),r.push([u,y],[f,y])}}for(r.sort((function(t,e){if(t[0]!==e[0])return t[0]-e[0];var n=d[t[1]],r=d[e[1]];return s(n[0],r[0])||s(n[1],r[1])})),a=r.length-1;a>=0;--a){var b=e[u=(U=r[a])[0]],x=b[0],B=b[1],I=t[x],F=t[B];if((I[0]-F[0]||I[1]-F[1])<0){var Q=x;x=B,B=Q}b[0]=x;var C,w=b[1]=U[1];for(i&&(C=b[2]);a>0&&r[a-1][0]===u;){var U,A=(U=r[--a])[1];i?e.push([w,A,C]):e.push([w,A]),w=A}i?e.push([w,B,C]):e.push([w,B])}return d}(t,e,d,p,n),y=f(t,v);return m(e,y,n),!!y||(d.length>0||p.length>0)}},3637:function(t,e,n){t.exports=function(t,e,n,r){var a=s(e,t),h=s(r,n),d=u(a,h);if(0===o(d))return null;var g=s(t,n),f=u(h,g),p=i(f,d),v=c(a,p),m=l(t,v);return m};var r=n(6504),i=n(8697),a=n(5572),o=n(7721),s=n(544),l=n(2653),c=n(8987);function u(t,e){return a(r(t[0],e[1]),r(t[1],e[0]))}},3642:function(t){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(t,e,n){var r=n(3642),i=n(395);function a(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function o(t){for(var e,n="#",r=0;r<3;++r)n+=("00"+(e=(e=t[r]).toString(16))).substr(e.length);return n}function s(t){return"rgba("+t.join(",")+")"}t.exports=function(t){var e,n,l,c,u,h,d,g,f,p;t||(t={});g=(t.nshades||72)-1,d=t.format||"hex",(h=t.colormap)||(h="jet");if("string"==typeof h){if(h=h.toLowerCase(),!r[h])throw Error(h+" not a supported colorscale");u=r[h]}else{if(!Array.isArray(h))throw Error("unsupported colormap option",h);u=h.slice()}if(u.length>g+1)throw new Error(h+" map requires nshades to be at least size "+u.length);f=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1];e=u.map((function(t){return Math.round(t.index*g)})),f[0]=Math.min(Math.max(f[0],0),1),f[1]=Math.min(Math.max(f[1],0),1);var v=u.map((function(t,e){var n=u[e].index,r=u[e].rgb.slice();return 4===r.length&&r[3]>=0&&r[3]<=1||(r[3]=f[0]+(f[1]-f[0])*n),r})),m=[];for(p=0;p<e.length-1;++p){c=e[p+1]-e[p],n=v[p],l=v[p+1];for(var y=0;y<c;y++){var b=y/c;m.push([Math.round(i(n[0],l[0],b)),Math.round(i(n[1],l[1],b)),Math.round(i(n[2],l[2],b)),i(n[3],l[3],b)])}}m.push(u[u.length-1].rgb.concat(f[1])),"hex"===d?m=m.map(o):"rgbaString"===d?m=m.map(s):"float"===d&&(m=m.map(a));return m}},3140:function(t,e,n){t.exports=function(t,e,n,a){var o=r(e,n,a);if(0===o){var s=i(r(t,e,n)),c=i(r(t,e,a));if(s===c){if(0===s){var u=l(t,e,n);return u===l(t,e,a)?0:u?1:-1}return 0}return 0===c?s>0||l(t,e,a)?-1:1:0===s?c>0||l(t,e,n)?1:-1:i(c-s)}var h=r(t,e,n);return h>0?o>0&&r(t,e,a)>0?1:-1:h<0?o>0||r(t,e,a)>0?1:-1:r(t,e,a)>0||l(t,e,n)?1:-1};var r=n(3250),i=n(8572),a=n(9362),o=n(5382),s=n(8210);function l(t,e,n){var r=a(t[0],-e[0]),i=a(t[1],-e[1]),l=a(n[0],-e[0]),c=a(n[1],-e[1]),u=s(o(r,l),o(i,c));return u[u.length-1]>=0}},8572:function(t){t.exports=function(t){return t<0?-1:t>0?1:0}},8507:function(t){t.exports=function(t,r){var i=t.length,a=t.length-r.length;if(a)return a;switch(i){case 0:return 0;case 1:return t[0]-r[0];case 2:return t[0]+t[1]-r[0]-r[1]||e(t[0],t[1])-e(r[0],r[1]);case 3:var o=t[0]+t[1],s=r[0]+r[1];if(a=o+t[2]-(s+r[2]))return a;var l=e(t[0],t[1]),c=e(r[0],r[1]);return e(l,t[2])-e(c,r[2])||e(l+t[2],o)-e(c+r[2],s);case 4:var u=t[0],h=t[1],d=t[2],g=t[3],f=r[0],p=r[1],v=r[2],m=r[3];return u+h+d+g-(f+p+v+m)||e(u,h,d,g)-e(f,p,v,m,f)||e(u+h,u+d,u+g,h+d,h+g,d+g)-e(f+p,f+v,f+m,p+v,p+m,v+m)||e(u+h+d,u+h+g,u+d+g,h+d+g)-e(f+p+v,f+p+m,f+v+m,p+v+m);default:for(var y=t.slice().sort(n),b=r.slice().sort(n),x=0;x<i;++x)if(a=y[x]-b[x])return a;return 0}};var e=Math.min;function n(t,e){return t-e}},3788:function(t,e,n){var r=n(8507),i=n(2419);t.exports=function(t,e){return r(t,e)||i(t)-i(e)}},7352:function(t,e,n){var r=n(5721),i=n(4750),a=n(2690);t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var n=t[0].length;if(0===n)return[];if(1===n)return r(t);if(2===n)return i(t);return a(t,n)}},5721:function(t){t.exports=function(t){for(var e=0,n=0,r=1;r<t.length;++r)t[r][0]<t[e][0]&&(e=r),t[r][0]>t[n][0]&&(n=r);return e<n?[[e],[n]]:e>n?[[n],[e]]:[[e]]}},4750:function(t,e,n){t.exports=function(t){var e=r(t),n=e.length;if(n<=2)return[];for(var i=new Array(n),a=e[n-1],o=0;o<n;++o){var s=e[o];i[o]=[a,s],a=s}return i};var r=n(3090)},2690:function(t,e,n){t.exports=function(t,e){try{return r(t,!0)}catch(o){var n=i(t);if(n.length<=e)return[];var a=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<e.length;++i)r[i]=t[e[i]];var a=e.length;for(i=0;i<n;++i)e.indexOf(i)<0&&(r[a++]=t[i]);return r}(t,n);return function(t,e){for(var n=t.length,r=e.length,i=0;i<n;++i)for(var a=t[i],o=0;o<a.length;++o){var s=a[o];if(s<r)a[o]=e[s];else{s-=r;for(var l=0;l<r;++l)s>=e[l]&&(s+=1);a[o]=s}}return t}(r(a,!0),n)}};var r=n(8954),i=n(3952)},4769:function(t){t.exports=function(t,e,n,r,i,a){var o=i-1,s=i*i,l=o*o,c=(1+2*i)*l,u=i*l,h=s*(3-2*i),d=s*o;if(t.length){a||(a=new Array(t.length));for(var g=t.length-1;g>=0;--g)a[g]=c*t[g]+u*e[g]+h*n[g]+d*r[g];return a}return c*t+u*e+h*n+d*r},t.exports.derivative=function(t,e,n,r,i,a){var o=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,c=3*i*i-2*i;if(t.length){a||(a=new Array(t.length));for(var u=t.length-1;u>=0;--u)a[u]=o*t[u]+s*e[u]+l*n[u]+c*r[u];return a}return o*t+s*e+l*n[u]+c*r}},7642:function(t,e,n){var r=n(8954),i=n(1682);function a(t,e){this.point=t,this.index=e}function o(t,e){for(var n=t.point,r=e.point,i=n.length,a=0;a<i;++a){var o=r[a]-n[a];if(o)return o}return 0}t.exports=function(t,e){var n=t.length;if(0===n)return[];var s=t[0].length;if(s<1)return[];if(1===s)return function(t,e,n){if(1===t)return n?[[-1,0]]:[];var r=e.map((function(t,e){return[t[0],e]}));r.sort((function(t,e){return t[0]-e[0]}));for(var i=new Array(t-1),a=1;a<t;++a){var o=r[a-1],s=r[a];i[a-1]=[o[1],s[1]]}n&&i.push([-1,i[0][1]],[i[t-1][1],-1]);return i}(n,t,e);for(var l=new Array(n),c=1,u=0;u<n;++u){for(var h=t[u],d=new Array(s+1),g=0,f=0;f<s;++f){var p=h[f];d[f]=p,g+=p*p}d[s]=g,l[u]=new a(d,u),c=Math.max(g,c)}i(l,o),n=l.length;var v=new Array(n+s+1),m=new Array(n+s+1),y=(s+1)*(s+1)*c,b=new Array(s+1);for(u=0;u<=s;++u)b[u]=0;b[s]=y,v[0]=b.slice(),m[0]=-1;for(u=0;u<=s;++u){(d=b.slice())[u]=1,v[u+1]=d,m[u+1]=-1}for(u=0;u<n;++u){var x=l[u];v[u+s+1]=x.point,m[u+s+1]=x.index}var B=r(v,!1);B=e?B.filter((function(t){for(var e=0,n=0;n<=s;++n){var r=m[t[n]];if(r<0&&++e>=2)return!1;t[n]=r}return!0})):B.filter((function(t){for(var e=0;e<=s;++e){var n=m[t[e]];if(n<0)return!1;t[e]=n}return!0}));if(1&s)for(u=0;u<B.length;++u){d=(x=B[u])[0];x[0]=x[1],x[1]=d}return B}},2361:function(t){var e=!1;if("undefined"!=typeof Float64Array){var n=new Float64Array(1),r=new Uint32Array(n.buffer);if(n[0]=1,e=!0,1072693248===r[1]){function a(t,e){return r[0]=t,r[1]=e,n[0]}function o(t){return n[0]=t,r[0]}function s(t){return n[0]=t,r[1]}t.exports=function(t){return n[0]=t,[r[0],r[1]]},t.exports.pack=a,t.exports.lo=o,t.exports.hi=s}else if(1072693248===r[0]){function l(t,e){return r[1]=t,r[0]=e,n[0]}function c(t){return n[0]=t,r[1]}function u(t){return n[0]=t,r[0]}t.exports=function(t){return n[0]=t,[r[1],r[0]]},t.exports.pack=l,t.exports.lo=c,t.exports.hi=u}else e=!1}if(!e){var i=new Buffer(8);function h(t,e){return i.writeUInt32LE(t,0,!0),i.writeUInt32LE(e,4,!0),i.readDoubleLE(0,!0)}function d(t){return i.writeDoubleLE(t,0,!0),i.readUInt32LE(0,!0)}function g(t){return i.writeDoubleLE(t,0,!0),i.readUInt32LE(4,!0)}t.exports=function(t){return i.writeDoubleLE(t,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},t.exports.pack=h,t.exports.lo=d,t.exports.hi=g}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){return(t.exports.hi(e)<<1>>>21)-1023},t.exports.fraction=function(e){var n=t.exports.lo(e),r=t.exports.hi(e),i=1048575&r;return 2146435072&r&&(i+=1<<20),[n,i]},t.exports.denormalized=function(e){return!(2146435072&t.exports.hi(e))}},1338:function(t){function e(t,n,r){var i=0|t[r];if(i<=0)return[];var a,o=new Array(i);if(r===t.length-1)for(a=0;a<i;++a)o[a]=n;else for(a=0;a<i;++a)o[a]=e(t,n,r+1);return o}t.exports=function(t,n){switch(void 0===n&&(n=0),typeof t){case"number":if(t>0)return function(t,e){var n,r;for(n=new Array(t),r=0;r<t;++r)n[r]=e;return n}(0|t,n);break;case"object":if("number"==typeof t.length)return e(t,n,0)}return[]}},3134:function(t,e,n){t.exports=function(t,e){var n=t.length;if("number"!=typeof e){e=0;for(var i=0;i<n;++i){var a=t[i];e=Math.max(e,a[0],a[1])}e=1+(0|e)}e|=0;var o=new Array(e);for(i=0;i<e;++i)o[i]=[];for(i=0;i<n;++i){o[(a=t[i])[0]].push(a[1]),o[a[1]].push(a[0])}for(var s=0;s<e;++s)r(o[s],(function(t,e){return t-e}));return o};var r=n(1682)},5033:function(t){t.exports=function(t,e,n){var r=e||0,i=n||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[r*t[12]+t[8],r*t[13]+t[9],r*t[14]+t[10],r*t[15]+t[11]],[i*t[12]-t[8],i*t[13]-t[9],i*t[14]-t[10],i*t[15]-t[11]]]}},9215:function(t,e,n){t.exports=function(t,e,n){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof t?new o(r=l(t),r,0):new o(t,l(t.length),0);case 2:var r;if("number"==typeof e)return new o(t,r=l(t.length),+e);n=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new o(t,e,n)}};var r=n(4769),i=n(2478);function a(t,e,n){return Math.min(e,Math.max(t,n))}function o(t,e,n){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[n],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var s=o.prototype;function l(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}s.flush=function(t){var e=i.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},s.curve=function(t){var e=this._time,n=e.length,o=i.le(e,t),s=this._scratch[0],l=this._state,c=this._velocity,u=this.dimension,h=this.bounds;if(o<0)for(var d=u-1,g=0;g<u;++g,--d)s[g]=l[d];else if(o>=n-1){d=l.length-1;var f=t-e[n-1];for(g=0;g<u;++g,--d)s[g]=l[d]+f*c[d]}else{d=u*(o+1)-1;var p=e[o],v=e[o+1]-p||1,m=this._scratch[1],y=this._scratch[2],b=this._scratch[3],x=this._scratch[4],B=!0;for(g=0;g<u;++g,--d)m[g]=l[d],b[g]=c[d]*v,y[g]=l[d+u],x[g]=c[d+u]*v,B=B&&m[g]===y[g]&&b[g]===x[g]&&0===b[g];if(B)for(g=0;g<u;++g)s[g]=m[g];else r(m,b,y,x,(t-p)/v,s)}var I=h[0],F=h[1];for(g=0;g<u;++g)s[g]=a(I[g],F[g],s[g]);return s},s.dcurve=function(t){var e=this._time,n=e.length,a=i.le(e,t),o=this._scratch[0],s=this._state,l=this._velocity,c=this.dimension;if(a>=n-1){var u=s.length-1;e[n-1];for(var h=0;h<c;++h,--u)o[h]=l[u]}else{u=c*(a+1)-1;var d=e[a],g=e[a+1]-d||1,f=this._scratch[1],p=this._scratch[2],v=this._scratch[3],m=this._scratch[4],y=!0;for(h=0;h<c;++h,--u)f[h]=s[u],v[h]=l[u]*g,p[h]=s[u+c],m[h]=l[u+c]*g,y=y&&f[h]===p[h]&&v[h]===m[h]&&0===v[h];if(y)for(h=0;h<c;++h)o[h]=0;else{r.derivative(f,v,p,m,(t-d)/g,o);for(h=0;h<c;++h)o[h]/=g}}return o},s.lastT=function(){var t=this._time;return t[t.length-1]},s.stable=function(){for(var t=this._velocity,e=t.length,n=this.dimension-1;n>=0;--n)if(t[--e])return!1;return!0},s.jump=function(t){var e=this.lastT(),n=this.dimension;if(!(t<e||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,s=this.bounds,l=s[0],c=s[1];this._time.push(e,t);for(var u=0;u<2;++u)for(var h=0;h<n;++h)r.push(r[o++]),i.push(0);this._time.push(t);for(h=n;h>0;--h)r.push(a(l[h-1],c[h-1],arguments[h])),i.push(0)}},s.push=function(t){var e=this.lastT(),n=this.dimension;if(!(t<e||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,s=t-e,l=this.bounds,c=l[0],u=l[1],h=s>1e-6?1/s:0;this._time.push(t);for(var d=n;d>0;--d){var g=a(c[d-1],u[d-1],arguments[d]);r.push(g),i.push((g-r[o++])*h)}}},s.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var n=this._state,r=this._velocity,i=this.bounds,o=i[0],s=i[1];this._time.push(t);for(var l=e;l>0;--l)n.push(a(o[l-1],s[l-1],arguments[l])),r.push(0)}},s.move=function(t){var e=this.lastT(),n=this.dimension;if(!(t<=e||arguments.length!==n+1)){var r=this._state,i=this._velocity,o=r.length-this.dimension,s=this.bounds,l=s[0],c=s[1],u=t-e,h=u>1e-6?1/u:0;this._time.push(t);for(var d=n;d>0;--d){var g=arguments[d];r.push(a(l[d-1],c[d-1],r[o++]+g)),i.push(g*h)}}},s.idle=function(t){var e=this.lastT();if(!(t<e)){var n=this.dimension,r=this._state,i=this._velocity,o=r.length-n,s=this.bounds,l=s[0],c=s[1],u=t-e;this._time.push(t);for(var h=n-1;h>=0;--h)r.push(a(l[h],c[h],r[o]+u*i[o])),i.push(0),o+=1}}},3840:function(t){t.exports=function(t){return new a(t||g,null)};function e(t,e,n,r,i,a){this._color=t,this.key=e,this.value=n,this.left=r,this.right=i,this._count=a}function n(t){return new e(t._color,t.key,t.value,t.left,t.right,t._count)}function r(t,n){return new e(t,n.key,n.value,n.left,n.right,n._count)}function i(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function a(t,e){this._compare=t,this.root=e}var o=a.prototype;function s(t,e){var n;if(e.left&&(n=s(t,e.left)))return n;return(n=t(e.key,e.value))||(e.right?s(t,e.right):void 0)}function l(t,e,n,r){if(e(t,r.key)<=0){var i;if(r.left)if(i=l(t,e,n,r.left))return i;if(i=n(r.key,r.value))return i}if(r.right)return l(t,e,n,r.right)}function c(t,e,n,r,i){var a,o=n(t,i.key),s=n(e,i.key);if(o<=0){if(i.left&&(a=c(t,e,n,r,i.left)))return a;if(s>0&&(a=r(i.key,i.value)))return a}if(s>0&&i.right)return c(t,e,n,r,i.right)}function u(t,e){this.tree=t,this._stack=e}Object.defineProperty(o,"keys",{get:function(){var t=[];return this.forEach((function(e,n){t.push(e)})),t}}),Object.defineProperty(o,"values",{get:function(){var t=[];return this.forEach((function(e,n){t.push(n)})),t}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(t,n){for(var o=this._compare,s=this.root,l=[],c=[];s;){var u=o(t,s.key);l.push(s),c.push(u),s=u<=0?s.left:s.right}l.push(new e(0,t,n,null,null,1));for(var h=l.length-2;h>=0;--h){s=l[h];c[h]<=0?l[h]=new e(s._color,s.key,s.value,l[h+1],s.right,s._count+1):l[h]=new e(s._color,s.key,s.value,s.left,l[h+1],s._count+1)}for(h=l.length-1;h>1;--h){var d=l[h-1];s=l[h];if(1===d._color||1===s._color)break;var g=l[h-2];if(g.left===d)if(d.left===s){if(!(f=g.right)||0!==f._color){if(g._color=0,g.left=d.right,d._color=1,d.right=g,l[h-2]=d,l[h-1]=s,i(g),i(d),h>=3)(p=l[h-3]).left===g?p.left=d:p.right=d;break}d._color=1,g.right=r(1,f),g._color=0,h-=1}else{if(!(f=g.right)||0!==f._color){if(d.right=s.left,g._color=0,g.left=s.right,s._color=1,s.left=d,s.right=g,l[h-2]=s,l[h-1]=d,i(g),i(d),i(s),h>=3)(p=l[h-3]).left===g?p.left=s:p.right=s;break}d._color=1,g.right=r(1,f),g._color=0,h-=1}else if(d.right===s){if(!(f=g.left)||0!==f._color){if(g._color=0,g.right=d.left,d._color=1,d.left=g,l[h-2]=d,l[h-1]=s,i(g),i(d),h>=3)(p=l[h-3]).right===g?p.right=d:p.left=d;break}d._color=1,g.left=r(1,f),g._color=0,h-=1}else{var f;if(!(f=g.left)||0!==f._color){var p;if(d.left=s.right,g._color=0,g.right=s.left,s._color=1,s.right=d,s.left=g,l[h-2]=s,l[h-1]=d,i(g),i(d),i(s),h>=3)(p=l[h-3]).right===g?p.right=s:p.left=s;break}d._color=1,g.left=r(1,f),g._color=0,h-=1}}return l[0]._color=1,new a(o,l[0])},o.forEach=function(t,e,n){if(this.root)switch(arguments.length){case 1:return s(t,this.root);case 2:return l(e,this._compare,t,this.root);case 3:if(this._compare(e,n)>=0)return;return c(e,n,this._compare,t,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new u(this,t)}}),Object.defineProperty(o,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new u(this,t)}}),o.at=function(t){if(t<0)return new u(this,[]);for(var e=this.root,n=[];;){if(n.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new u(this,n);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new u(this,[])},o.ge=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var a=e(t,n.key);r.push(n),a<=0&&(i=r.length),n=a<=0?n.left:n.right}return r.length=i,new u(this,r)},o.gt=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var a=e(t,n.key);r.push(n),a<0&&(i=r.length),n=a<0?n.left:n.right}return r.length=i,new u(this,r)},o.lt=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var a=e(t,n.key);r.push(n),a>0&&(i=r.length),n=a<=0?n.left:n.right}return r.length=i,new u(this,r)},o.le=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var a=e(t,n.key);r.push(n),a>=0&&(i=r.length),n=a<0?n.left:n.right}return r.length=i,new u(this,r)},o.find=function(t){for(var e=this._compare,n=this.root,r=[];n;){var i=e(t,n.key);if(r.push(n),0===i)return new u(this,r);n=i<=0?n.left:n.right}return new u(this,[])},o.remove=function(t){var e=this.find(t);return e?e.remove():this},o.get=function(t){for(var e=this._compare,n=this.root;n;){var r=e(t,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var h=u.prototype;function d(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function g(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new u(this.tree,this._stack.slice())},h.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var o=new Array(t.length),s=t[t.length-1];o[o.length-1]=new e(s._color,s.key,s.value,s.left,s.right,s._count);for(var l=t.length-2;l>=0;--l){(s=t[l]).left===t[l+1]?o[l]=new e(s._color,s.key,s.value,o[l+1],s.right,s._count):o[l]=new e(s._color,s.key,s.value,s.left,o[l+1],s._count)}if((s=o[o.length-1]).left&&s.right){var c=o.length;for(s=s.left;s.right;)o.push(s),s=s.right;var u=o[c-1];o.push(new e(s._color,u.key,u.value,s.left,s.right,s._count)),o[c-1].key=s.key,o[c-1].value=s.value;for(l=o.length-2;l>=c;--l)s=o[l],o[l]=new e(s._color,s.key,s.value,s.left,o[l+1],s._count);o[c-1].left=o[c]}if(0===(s=o[o.length-1])._color){var h=o[o.length-2];h.left===s?h.left=null:h.right===s&&(h.right=null),o.pop();for(l=0;l<o.length;++l)o[l]._count--;return new a(this.tree._compare,o[0])}if(s.left||s.right){s.left?d(s,s.left):s.right&&d(s,s.right),s._color=1;for(l=0;l<o.length-1;++l)o[l]._count--;return new a(this.tree._compare,o[0])}if(1===o.length)return new a(this.tree._compare,null);for(l=0;l<o.length;++l)o[l]._count--;var g=o[o.length-2];return function(t){for(var e,a,o,s,l=t.length-1;l>=0;--l){if(e=t[l],0===l)return void(e._color=1);if((a=t[l-1]).left===e){if((o=a.right).right&&0===o.right._color)return s=(o=a.right=n(o)).right=n(o.right),a.right=o.left,o.left=a,o.right=s,o._color=a._color,e._color=1,a._color=1,s._color=1,i(a),i(o),l>1&&((c=t[l-2]).left===a?c.left=o:c.right=o),void(t[l-1]=o);if(o.left&&0===o.left._color)return s=(o=a.right=n(o)).left=n(o.left),a.right=s.left,o.left=s.right,s.left=a,s.right=o,s._color=a._color,a._color=1,o._color=1,e._color=1,i(a),i(o),i(s),l>1&&((c=t[l-2]).left===a?c.left=s:c.right=s),void(t[l-1]=s);if(1===o._color){if(0===a._color)return a._color=1,void(a.right=r(0,o));a.right=r(0,o);continue}o=n(o),a.right=o.left,o.left=a,o._color=a._color,a._color=0,i(a),i(o),l>1&&((c=t[l-2]).left===a?c.left=o:c.right=o),t[l-1]=o,t[l]=a,l+1<t.length?t[l+1]=e:t.push(e),l+=2}else{if((o=a.left).left&&0===o.left._color)return s=(o=a.left=n(o)).left=n(o.left),a.left=o.right,o.right=a,o.left=s,o._color=a._color,e._color=1,a._color=1,s._color=1,i(a),i(o),l>1&&((c=t[l-2]).right===a?c.right=o:c.left=o),void(t[l-1]=o);if(o.right&&0===o.right._color)return s=(o=a.left=n(o)).right=n(o.right),a.left=s.right,o.right=s.left,s.right=a,s.left=o,s._color=a._color,a._color=1,o._color=1,e._color=1,i(a),i(o),i(s),l>1&&((c=t[l-2]).right===a?c.right=s:c.left=s),void(t[l-1]=s);if(1===o._color){if(0===a._color)return a._color=1,void(a.left=r(0,o));a.left=r(0,o);continue}var c;o=n(o),a.left=o.right,o.right=a,o._color=a._color,a._color=0,i(a),i(o),l>1&&((c=t[l-2]).right===a?c.right=o:c.left=o),t[l-1]=o,t[l]=a,l+1<t.length?t[l+1]=e:t.push(e),l+=2}}}(o),g.left===s?g.left=null:g.right=null,new a(this.tree._compare,o[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var n=this.tree.root;return n?n._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var r=e.length-2;r>=0;--r)e[r+1]===e[r].right&&(++t,e[r].left&&(t+=e[r].left._count));return t},enumerable:!0}),h.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),h.update=function(t){var n=this._stack;if(0===n.length)throw new Error("Can't update empty node!");var r=new Array(n.length),i=n[n.length-1];r[r.length-1]=new e(i._color,i.key,t,i.left,i.right,i._count);for(var o=n.length-2;o>=0;--o)(i=n[o]).left===n[o+1]?r[o]=new e(i._color,i.key,i.value,r[o+1],i.right,i._count):r[o]=new e(i._color,i.key,i.value,i.left,r[o+1],i._count);return new a(this.tree._compare,r[0])},h.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},3837:function(t,e,n){t.exports=function(t,e){var n=new u(t);return n.update(e),n};var r=n(4935),i=n(501),a=n(5304),o=n(6429),s=n(6444),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(t)}var h=u.prototype;function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}h.update=function(t){function e(e,n,r){if(r in t){var i,a=t[r],o=this[r];(e?Array.isArray(a)&&Array.isArray(a[0]):Array.isArray(a))?this[r]=i=[n(a[0]),n(a[1]),n(a[2])]:this[r]=i=[n(a),n(a),n(a)];for(var s=0;s<3;++s)if(i[s]!==o[s])return!0}return!1}t=t||{};var n,a=e.bind(this,!1,Number),o=e.bind(this,!1,Boolean),l=e.bind(this,!1,String),c=e.bind(this,!0,(function(t){if(Array.isArray(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]})),u=!1,h=!1;if("bounds"in t)for(var d=t.bounds,g=0;g<2;++g)for(var f=0;f<3;++f)d[g][f]!==this.bounds[g][f]&&(h=!0),this.bounds[g][f]=d[g][f];if("ticks"in t){n=t.ticks,u=!0,this.autoTicks=!1;for(g=0;g<3;++g)this.tickSpacing[g]=0}else a("tickSpacing")&&(this.autoTicks=!0,h=!0);if(this._firstInit&&("ticks"in t||"tickSpacing"in t||(this.autoTicks=!0),h=!0,u=!0,this._firstInit=!1),h&&this.autoTicks&&(n=s.create(this.bounds,this.tickSpacing),u=!0),u){for(g=0;g<3;++g)n[g].sort((function(t,e){return t.x-e.x}));s.equal(n,this.ticks)?u=!1:this.ticks=n}o("tickEnable"),l("tickFont")&&(u=!0),l("tickFontStyle")&&(u=!0),l("tickFontWeight")&&(u=!0),l("tickFontVariant")&&(u=!0),a("tickSize"),a("tickAngle"),a("tickPad"),c("tickColor");var p=l("labels");l("labelFont")&&(p=!0),l("labelFontStyle")&&(p=!0),l("labelFontWeight")&&(p=!0),l("labelFontVariant")&&(p=!0),o("labelEnable"),a("labelSize"),a("labelPad"),c("labelColor"),o("lineEnable"),o("lineMirror"),a("lineWidth"),c("lineColor"),o("lineTickEnable"),o("lineTickMirror"),a("lineTickLength"),a("lineTickWidth"),c("lineTickColor"),o("gridEnable"),a("gridWidth"),c("gridColor"),o("zeroEnable"),c("zeroLineColor"),a("zeroLineWidth"),o("backgroundEnable"),c("backgroundColor");var v=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],m=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(p||u)&&this._text.update(this.bounds,this.labels,v,this.ticks,m):this._text=r(this.gl,this.bounds,this.labels,v,this.ticks,m),this._lines&&u&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};var g=[new d,new d,new d];function f(t,e,n,r,i){for(var a=t.primalOffset,o=t.primalMinor,s=t.mirrorOffset,l=t.mirrorMinor,c=r[e],u=0;u<3;++u)if(e!==u){var h=a,d=s,g=o,f=l;c&1<<u&&(h=s,d=a,g=l,f=o),h[u]=n[0][u],d[u]=n[1][u],i[u]>0?(g[u]=-1,f[u]=0):(g[u]=0,f[u]=1)}}var p=[0,0,0],v={model:l,view:l,projection:l,_ortho:!1};h.isOpaque=function(){return!0},h.isTransparent=function(){return!1},h.drawTransparent=function(t){};var m=[0,0,0],y=[0,0,0],b=[0,0,0];h.draw=function(t){t=t||v;for(var e=this.gl,n=t.model||l,r=t.view||l,i=t.projection||l,a=this.bounds,s=t._ortho||!1,u=o(n,r,i,a,s),h=u.cubeEdges,d=u.axis,x=r[12],B=r[13],I=r[14],F=r[15],Q=(s?2:1)*this.pixelRatio*(i[3]*x+i[7]*B+i[11]*I+i[15]*F)/e.drawingBufferHeight,C=0;C<3;++C)this.lastCubeProps.cubeEdges[C]=h[C],this.lastCubeProps.axis[C]=d[C];var w=g;for(C=0;C<3;++C)f(g[C],C,this.bounds,h,d);e=this.gl;var U,A=p;for(C=0;C<3;++C)this.backgroundEnable[C]?A[C]=d[C]:A[C]=0;this._background.draw(n,r,i,a,A,this.backgroundColor),this._lines.bind(n,r,i,this);for(C=0;C<3;++C){var S=[0,0,0];d[C]>0?S[C]=a[1][C]:S[C]=a[0][C];for(var L=0;L<2;++L){var k=(C+1+L)%3,G=(C+1+(1^L))%3;this.gridEnable[k]&&this._lines.drawGrid(k,G,this.bounds,S,this.gridColor[k],this.gridWidth[k]*this.pixelRatio)}for(L=0;L<2;++L){k=(C+1+L)%3,G=(C+1+(1^L))%3;this.zeroEnable[G]&&Math.min(a[0][G],a[1][G])<=0&&Math.max(a[0][G],a[1][G])>=0&&this._lines.drawZero(k,G,this.bounds,S,this.zeroLineColor[G],this.zeroLineWidth[G]*this.pixelRatio)}}for(C=0;C<3;++C){this.lineEnable[C]&&this._lines.drawAxisLine(C,this.bounds,w[C].primalOffset,this.lineColor[C],this.lineWidth[C]*this.pixelRatio),this.lineMirror[C]&&this._lines.drawAxisLine(C,this.bounds,w[C].mirrorOffset,this.lineColor[C],this.lineWidth[C]*this.pixelRatio);var _=c(m,w[C].primalMinor),R=c(y,w[C].mirrorMinor),E=this.lineTickLength;for(L=0;L<3;++L){var T=Q/n[5*L];_[L]*=E[L]*T,R[L]*=E[L]*T}this.lineTickEnable[C]&&this._lines.drawAxisTicks(C,w[C].primalOffset,_,this.lineTickColor[C],this.lineTickWidth[C]*this.pixelRatio),this.lineTickMirror[C]&&this._lines.drawAxisTicks(C,w[C].mirrorOffset,R,this.lineTickColor[C],this.lineTickWidth[C]*this.pixelRatio)}this._lines.unbind(),this._text.bind(n,r,i,this.pixelRatio);var M,N;function D(t){(N=[0,0,0])[t]=1}function X(t,e,n){var r=(t+1)%3,i=(t+2)%3,a=e[r],o=e[i],s=n[r],l=n[i];a>0&&l>0||a>0&&l<0||a<0&&l>0||a<0&&l<0?D(r):(o>0&&s>0||o>0&&s<0||o<0&&s>0||o<0&&s<0)&&D(i)}for(C=0;C<3;++C){var Z=w[C].primalMinor,V=w[C].mirrorMinor,H=c(b,w[C].primalOffset);for(L=0;L<3;++L)this.lineTickEnable[C]&&(H[L]+=Q*Z[L]*Math.max(this.lineTickLength[L],0)/n[5*L]);var W=[0,0,0];if(W[C]=1,this.tickEnable[C]){-3600===this.tickAngle[C]?(this.tickAngle[C]=0,this.tickAlign[C]="auto"):this.tickAlign[C]=-1,M=1,"auto"===(U=[this.tickAlign[C],.5,M])[0]?U[0]=0:U[0]=parseInt(""+U[0]),N=[0,0,0],X(C,Z,V);for(L=0;L<3;++L)H[L]+=Q*Z[L]*this.tickPad[L]/n[5*L];this._text.drawTicks(C,this.tickSize[C],this.tickAngle[C],H,this.tickColor[C],W,N,U)}if(this.labelEnable[C]){M=0,N=[0,0,0],this.labels[C].length>4&&(D(C),M=1),"auto"===(U=[this.labelAlign[C],.5,M])[0]?U[0]=0:U[0]=parseInt(""+U[0]);for(L=0;L<3;++L)H[L]+=Q*Z[L]*this.labelPad[L]/n[5*L];H[C]+=.5*(a[0][C]+a[1][C]),this._text.drawLabel(C,this.labelSize[C],this.labelAngle[C],H,this.labelColor[C],[0,0,0],N,U)}}this._text.unbind()},h.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(t,e,n){t.exports=function(t){for(var e=[],n=[],s=0,l=0;l<3;++l)for(var c=(l+1)%3,u=(l+2)%3,h=[0,0,0],d=[0,0,0],g=-1;g<=1;g+=2){n.push(s,s+2,s+1,s+1,s+2,s+3),h[l]=g,d[l]=g;for(var f=-1;f<=1;f+=2){h[c]=f;for(var p=-1;p<=1;p+=2)h[u]=p,e.push(h[0],h[1],h[2],d[0],d[1],d[2]),s+=1}var v=c;c=u,u=v}var m=r(t,new Float32Array(e)),y=r(t,new Uint16Array(n),t.ELEMENT_ARRAY_BUFFER),b=i(t,[{buffer:m,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:m,type:t.FLOAT,size:3,offset:12,stride:24}],y),x=a(t);return x.attributes.position.location=0,x.attributes.normal.location=1,new o(t,m,b,x)};var r=n(2762),i=n(8116),a=n(1879).bg;function o(t,e,n,r){this.gl=t,this.buffer=e,this.vao=n,this.shader=r}var s=o.prototype;s.draw=function(t,e,n,r,i,a){for(var o=!1,s=0;s<3;++s)o=o||i[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:n,bounds:r,enable:i,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(t,e,n){t.exports=function(t,e,n,a,g){i(s,e,t),i(s,n,s);for(var y=0,b=0;b<2;++b){u[2]=a[b][2];for(var x=0;x<2;++x){u[1]=a[x][1];for(var B=0;B<2;++B)u[0]=a[B][0],d(l[y],u,s),y+=1}}var I=-1;for(b=0;b<8;++b){for(var F=l[b][3],Q=0;Q<3;++Q)c[b][Q]=l[b][Q]/F;g&&(c[b][2]*=-1),F<0&&(I<0||c[b][2]<c[I][2])&&(I=b)}if(I<0){I=0;for(var C=0;C<3;++C){for(var w=(C+2)%3,U=(C+1)%3,A=-1,S=-1,L=0;L<2;++L){var k=(_=L<<C)+(L<<w)+(1-L<<U),G=_+(1-L<<w)+(L<<U);o(c[_],c[k],c[G],h)<0||(L?A=1:S=1)}if(A<0||S<0)S>A&&(I|=1<<C);else{for(L=0;L<2;++L){k=(_=L<<C)+(L<<w)+(1-L<<U),G=_+(1-L<<w)+(L<<U);var _,R=f([l[_],l[k],l[G],l[_+(1<<w)+(1<<U)]]);L?A=R:S=R}S>A&&(I|=1<<C)}}}var E=7^I,T=-1;for(b=0;b<8;++b)b!==I&&b!==E&&(T<0||c[T][1]>c[b][1])&&(T=b);var M=-1;for(b=0;b<3;++b){if((D=T^1<<b)!==I&&D!==E)M<0&&(M=D),(U=c[D])[0]<c[M][0]&&(M=D)}var N=-1;for(b=0;b<3;++b){var D;if((D=T^1<<b)!==I&&D!==E&&D!==M)N<0&&(N=D),(U=c[D])[0]>c[N][0]&&(N=D)}var X=p;X[0]=X[1]=X[2]=0,X[r.log2(M^T)]=T&M,X[r.log2(T^N)]=T&N;var Z=7^N;Z===I||Z===E?(Z=7^M,X[r.log2(N^Z)]=Z&N):X[r.log2(M^Z)]=Z&M;var V=v,H=I;for(C=0;C<3;++C)V[C]=H&1<<C?-1:1;return m};var r=n(8828),i=n(6760),a=n(5202),o=n(3250),s=new Array(16),l=new Array(8),c=new Array(8),u=new Array(3),h=[0,0,0];function d(t,e,n){for(var r=0;r<4;++r){t[r]=n[12+r];for(var i=0;i<3;++i)t[r]+=e[i]*n[4*i+r]}}!function(){for(var t=0;t<8;++t)l[t]=[1,1,1,1],c[t]=[1,1,1]}();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function f(t){for(var e=0;e<g.length;++e)if((t=a.positive(t,g[e])).length<3)return 0;var n=t[0],r=n[0]/n[3],i=n[1]/n[3],o=0;for(e=1;e+1<t.length;++e){var s=t[e],l=t[e+1],c=s[0]/s[3]-r,u=s[1]/s[3]-i,h=l[0]/l[3]-r,d=l[1]/l[3]-i;o+=Math.abs(c*d-u*h)}return o}var p=[1,1,1],v=[0,0,0],m={cubeEdges:p,axis:v}},501:function(t,e,n){t.exports=function(t,e,n){var o=[],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var h=0;h<3;++h){for(var d=o.length/3|0,f=0;f<n[h].length;++f){var p=+n[h][f].x;o.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var v=o.length/3|0;s[h]=d,l[h]=v-d;d=o.length/3|0;for(var m=0;m<n[h].length;++m){p=+n[h][m].x;o.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}v=o.length/3|0;c[h]=d,u[h]=v-d}var y=r(t,new Float32Array(o)),b=i(t,[{buffer:y,type:t.FLOAT,size:3,stride:0,offset:0}]),x=a(t);return x.attributes.position.location=0,new g(t,y,b,x,l,s,u,c)};var r=n(2762),i=n(8116),a=n(1879).n,o=[0,0,0],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[1,1];function h(t){return t[0]=t[1]=t[2]=0,t}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function g(t,e,n,r,i,a,o,s){this.gl=t,this.vertBuffer=e,this.vao=n,this.shader=r,this.tickCount=i,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}var f=g.prototype;f.bind=function(t,e,n){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=n,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=u,this.vao.bind()},f.unbind=function(){this.vao.unbind()},f.drawAxisLine=function(t,e,n,r,i){var a=h(s);this.shader.uniforms.majorAxis=s,a[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=a;var o,u=d(c,n);u[t]+=e[0][t],this.shader.uniforms.offset=u,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=r,(o=h(l))[(t+2)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6),(o=h(l))[(t+1)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6)},f.drawAxisTicks=function(t,e,n,r,i){if(this.tickCount[t]){var a=h(o);a[t]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=r,this.shader.uniforms.lineWidth=i;var s=h(l);s[t]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}},f.drawGrid=function(t,e,n,r,i,a){if(this.gridCount[t]){var u=h(s);u[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=u;var g=d(c,r);g[e]+=n[0][e],this.shader.uniforms.offset=g;var f=h(o);f[t]=1,this.shader.uniforms.majorAxis=f;var p=h(l);p[t]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t])}},f.drawZero=function(t,e,n,r,i,a){var o=h(s);this.shader.uniforms.majorAxis=o,o[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=o;var u=d(c,r);u[t]+=n[0][t],this.shader.uniforms.offset=u;var g=h(l);g[e]=1,this.shader.uniforms.screenAxis=g,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},f.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(t,e,n){var r=n(3236),i=n(9405),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);e.n=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"}])};var s=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);e.Q=function(t){return i(t,s,l,null,[{name:"position",type:"vec3"}])};var c=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);e.bg=function(t){return i(t,c,u,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(t,e,n){t.exports=function(t,e,n,a,s,l){var u=r(t),h=i(t,[{buffer:u,size:3}]),d=o(t);d.attributes.position.location=0;var g=new c(t,d,u,h);return g.update(e,n,a,s,l),g};var r=n(2762),i=n(8116),a=n(4359),o=n(1879).Q,s=window||process.global||{},l=s.__TEXT_CACHE||{};s.__TEXT_CACHE={};function c(t,e,n,r){this.gl=t,this.shader=e,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var u=c.prototype,h=[0,0];u.bind=function(t,e,n,r){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=t,i.view=e,i.projection=n,i.pixelScale=r,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=h},u.unbind=function(){this.vao.unbind()},u.update=function(t,e,n,r,i){var o=[];function s(t,e,n,r,i,s){var c=[n.style,n.weight,n.variant,n.family].join("_"),u=l[c];u||(u=l[c]={});var h=u[e];h||(h=u[e]=function(t,e){try{return a(t,e)}catch(e){return console.warn('error vectorizing text:"'+t+'" error:',e),{cells:[],positions:[]}}}(e,{triangles:!0,font:n.family,fontStyle:n.style,fontWeight:n.weight,fontVariant:n.variant,textAlign:"center",textBaseline:"middle",lineSpacing:i,styletags:s}));for(var d=(r||12)/12,g=h.positions,f=h.cells,p=0,v=f.length;p<v;++p)for(var m=f[p],y=2;y>=0;--y){var b=g[m[y]];o.push(d*b[0],-d*b[1],t)}}for(var c=[0,0,0],u=[0,0,0],h=[0,0,0],d=[0,0,0],g={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},f=0;f<3;++f){h[f]=o.length/3|0,s(.5*(t[0][f]+t[1][f]),e[f],n[f],12,1.25,g),d[f]=(o.length/3|0)-h[f],c[f]=o.length/3|0;for(var p=0;p<r[f].length;++p)if(r[f][p].text){var v={family:r[f][p].font||i[f].family,style:i[f].fontStyle||i[f].style,weight:i[f].fontWeight||i[f].weight,variant:i[f].fontVariant||i[f].variant};s(r[f][p].x,r[f][p].text,v,r[f][p].fontSize||12,1.25,g)}u[f]=(o.length/3|0)-c[f]}this.buffer.update(o),this.tickOffset=c,this.tickCount=u,this.labelOffset=h,this.labelCount=d},u.drawTicks=function(t,e,n,r,i,a,o,s){this.tickCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=e,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},u.drawLabel=function(t,e,n,r,i,a,o,s){this.labelCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=e,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(t,e){function n(t,e){var n=t+"",r=n.indexOf("."),i=0;r>=0&&(i=n.length-r-1);var a=Math.pow(10,i),o=Math.round(t*e*a),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/a,c=o%a;o<0?(l=0|-Math.ceil(l),c=0|-c):(l=0|Math.floor(l),c|=0);var u=""+l;if(o<0&&(u="-"+u),i){for(var h=""+c;h.length<i;)h="0"+h;return u+"."+h}return u}e.create=function(t,e){for(var r=[],i=0;i<3;++i){var a=[];t[0][i],t[1][i];for(var o=0;o*e[i]<=t[1][i];++o)a.push({x:o*e[i],text:n(e[i],o)});for(o=-1;o*e[i]>=t[0][i];--o)a.push({x:o*e[i],text:n(e[i],o)});r.push(a)}return r},e.equal=function(t,e){for(var n=0;n<3;++n){if(t[n].length!==e[n].length)return!1;for(var r=0;r<t[n].length;++r){var i=t[n][r],a=e[n][r];if(i.x!==a.x||i.text!==a.text||i.font!==a.font||i.fontColor!==a.fontColor||i.fontSize!==a.fontSize||i.dx!==a.dx||i.dy!==a.dy)return!1}}return!0}},5445:function(t,e,n){t.exports=function(t,e,n,l,h){var d=e.model||c,g=e.view||c,m=e.projection||c,y=e._ortho||!1,b=t.bounds,x=(h=h||a(d,g,m,b,y)).axis;o(u,g,d),o(u,m,u);for(var B=p,I=0;I<3;++I)B[I].lo=1/0,B[I].hi=-1/0,B[I].pixelsPerDataUnit=1/0;var F=r(s(u,u));s(u,u);for(var Q=0;Q<3;++Q){var C=(Q+1)%3,w=(Q+2)%3,U=v;t:for(I=0;I<2;++I){var A=[];if(x[Q]<0!=!!I){U[Q]=b[I][Q];for(var S=0;S<2;++S){U[C]=b[S^I][C];for(var L=0;L<2;++L)U[w]=b[L^S^I][w],A.push(U.slice())}var k=y?5:4;for(S=k;S===k;++S){if(0===A.length)continue t;A=i.positive(A,F[S])}for(S=0;S<A.length;++S){w=A[S];var G=f(v,u,w,n,l);for(L=0;L<3;++L)B[L].lo=Math.min(B[L].lo,w[L]),B[L].hi=Math.max(B[L].hi,w[L]),L!==Q&&(B[L].pixelsPerDataUnit=Math.min(B[L].pixelsPerDataUnit,Math.abs(G[L])))}}}}return B};var r=n(5033),i=n(5202),a=n(6429),o=n(6760),s=n(5665),l=n(5352),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array(16);function h(t,e,n){this.lo=t,this.hi=e,this.pixelsPerDataUnit=n}var d=[0,0,0,1],g=[0,0,0,1];function f(t,e,n,r,i){for(var a=0;a<3;++a){for(var o=d,s=g,c=0;c<3;++c)s[c]=o[c]=n[c];s[3]=o[3]=1,s[a]+=1,l(s,s,e),s[3]<0&&(t[a]=1/0),o[a]-=1,l(o,o,e),o[3]<0&&(t[a]=1/0);var u=(o[0]/o[3]-s[0]/s[3])*r,h=(o[1]/o[3]-s[1]/s[3])*i;t[a]=.25*Math.sqrt(u*u+h*h)}return t}var p=[new h(1/0,-1/0,1/0),new h(1/0,-1/0,1/0),new h(1/0,-1/0,1/0)],v=[0,0,0]},2762:function(t,e,n){var r=n(1888),i=n(5298),a=n(9618),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(t,e,n,r,i){this.gl=t,this.type=e,this.handle=n,this.length=r,this.usage=i}var l=s.prototype;function c(t,e,n,r,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0)return t.bufferData(e,i,r),o;if(o+a>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,a,i),n}function u(t,e){for(var n=r.malloc(t.length,e),i=t.length,a=0;a<i;++a)n[a]=t[a];return n}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var n=t.dtype;if(o.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)n=gl.getExtension("OES_element_index_uint")&&"uint16"!==n?"uint32":"uint16";if(n===t.dtype&&function(t,e){for(var n=1,r=e.length-1;r>=0;--r){if(e[r]!==n)return!1;n*=t[r]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,t.data,e):this.length=c(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var s=r.malloc(t.size,n),l=a(s,t.shape);i.assign(l,t),this.length=c(this.gl,this.type,this.length,this.usage,e<0?s:s.subarray(0,t.size),e),r.free(s)}}else if(Array.isArray(t)){var h;h=this.type===this.gl.ELEMENT_ARRAY_BUFFER?u(t,"uint16"):u(t,"float32"),this.length=c(this.gl,this.type,this.length,this.usage,e<0?h:h.subarray(0,t.length),e),r.free(h)}else if("object"==typeof t&&"number"==typeof t.length)this.length=c(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}},t.exports=function(t,e,n,r){if(n=n||t.ARRAY_BUFFER,r=r||t.DYNAMIC_DRAW,n!==t.ARRAY_BUFFER&&n!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(r!==t.DYNAMIC_DRAW&&r!==t.STATIC_DRAW&&r!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=t.createBuffer(),a=new s(t,n,i,0,r);return a.update(e),a}},6405:function(t,e,n){var r=n(2931);t.exports=function(t,e){var n=t.positions,i=t.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return e&&(e[0]=[0,0,0],e[1]=[0,0,0]),a;for(var o=0,s=1/0,l=-1/0,c=1/0,u=-1/0,h=1/0,d=-1/0,g=null,f=null,p=[],v=1/0,m=!1,y="raw"===t.coneSizemode,b=0;b<n.length;b++){var x=n[b];s=Math.min(x[0],s),l=Math.max(x[0],l),c=Math.min(x[1],c),u=Math.max(x[1],u),h=Math.min(x[2],h),d=Math.max(x[2],d);var B=i[b];if(r.length(B)>o&&(o=r.length(B)),b&&!y){var I=2*r.distance(g,x)/(r.length(f)+r.length(B));I?(v=Math.min(v,I),m=!1):m=!0}m||(g=x,f=B),p.push(B)}var F=[s,c,h],Q=[l,u,d];e&&(e[0]=F,e[1]=Q),0===o&&(o=1);var C=1/o;isFinite(v)||(v=1),a.vectorScale=v;var w=t.coneSize||(y?1:.5);t.absoluteConeSize&&(w=t.absoluteConeSize*C),a.coneScale=w;b=0;for(var U=0;b<n.length;b++)for(var A=(x=n[b])[0],S=x[1],L=x[2],k=p[b],G=r.length(k)*C,_=0;_<8;_++){a.positions.push([A,S,L,U++]),a.positions.push([A,S,L,U++]),a.positions.push([A,S,L,U++]),a.positions.push([A,S,L,U++]),a.positions.push([A,S,L,U++]),a.positions.push([A,S,L,U++]),a.vectors.push(k),a.vectors.push(k),a.vectors.push(k),a.vectors.push(k),a.vectors.push(k),a.vectors.push(k),a.vertexIntensity.push(G,G,G),a.vertexIntensity.push(G,G,G);var R=a.positions.length;a.cells.push([R-6,R-5,R-4],[R-3,R-2,R-1])}return a};var i=n(614);t.exports.createMesh=n(9060),t.exports.createConeMesh=function(e,n){return t.exports.createMesh(e,n,{shaders:i,traceType:"cone"})}},9060:function(t,e,n){var r=n(9405),i=n(2762),a=n(8116),o=n(7766),s=n(6760),l=n(7608),c=n(9618),u=n(6729),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(t,e,n,r,i,a,o,s,l,c,u){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=n,this.pickShader=r,this.trianglePositions=i,this.triangleVectors=a,this.triangleColors=s,this.triangleUVs=l,this.triangleIds=o,this.triangleVAO=c,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=u,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=h,this._view=h,this._projection=h,this._resolution=[1,1]}var g=d.prototype;g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(t){this.pickId=t},g.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"lightPosition"in t&&(this.lightPosition=t.lightPosition),"opacity"in t&&(this.opacity=t.opacity),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),void 0!==t.tubeScale&&(this.tubeScale=t.tubeScale),void 0!==t.vectorScale&&(this.vectorScale=t.vectorScale),void 0!==t.coneScale&&(this.coneScale=t.coneScale),void 0!==t.coneOffset&&(this.coneOffset=t.coneOffset),t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t){for(var e=u({colormap:t,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var i=e[r],a=0;a<3;++a)n[4*r+a]=i[a];n[4*r+3]=255*i[3]}return c(n,[256,256,4],[4,0,1])}(t.colormap)),this.texture.generateMipmap());var n=t.cells,r=t.positions,i=t.vectors;if(r&&n&&i){var a=[],o=[],s=[],l=[],h=[];this.cells=n,this.positions=r,this.vectors=i;var d=t.meshColor||[1,1,1,1],g=t.vertexIntensity,f=1/0,p=-1/0;if(g)if(t.vertexIntensityBounds)f=+t.vertexIntensityBounds[0],p=+t.vertexIntensityBounds[1];else for(var v=0;v<g.length;++v){var m=g[v];f=Math.min(f,m),p=Math.max(p,m)}else for(v=0;v<r.length;++v){m=r[v][2];f=Math.min(f,m),p=Math.max(p,m)}this.intensity=g||function(t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=t[r][2];return n}(r),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(v=0;v<r.length;++v)for(var y=r[v],b=0;b<3;++b)!isNaN(y[b])&&isFinite(y[b])&&(this.bounds[0][b]=Math.min(this.bounds[0][b],y[b]),this.bounds[1][b]=Math.max(this.bounds[1][b],y[b]));var x=0;t:for(v=0;v<n.length;++v){var B=n[v];if(3===B.length){for(b=0;b<3;++b){y=r[F=B[b]];for(var I=0;I<3;++I)if(isNaN(y[I])||!isFinite(y[I]))continue t}for(b=0;b<3;++b){var F;y=r[F=B[2-b]];a.push(y[0],y[1],y[2],y[3]);var Q=i[F];o.push(Q[0],Q[1],Q[2],Q[3]||0);var C,w=d;3===w.length?s.push(w[0],w[1],w[2],1):s.push(w[0],w[1],w[2],w[3]),C=g?[(g[F]-f)/(p-f),0]:[(y[2]-f)/(p-f),0],l.push(C[0],C[1]),h.push(v)}x+=1}}this.triangleCount=x,this.trianglePositions.update(a),this.triangleVectors.update(o),this.triangleColors.update(s),this.triangleUVs.update(l),this.triangleIds.update(new Uint32Array(h))}},g.drawTransparent=g.draw=function(t){t=t||{};for(var e=this.gl,n=t.model||h,r=t.view||h,i=t.projection||h,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var c={model:n,view:r,projection:i,inverseModel:h.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};c.inverseModel=l(c.inverseModel,c.model),e.disable(e.CULL_FACE),this.texture.bind(0);var u=new Array(16);s(u,c.view,c.model),s(u,c.projection,u),l(u,u);for(o=0;o<3;++o)c.eyePosition[o]=u[12+o]/u[15];var d=u[15];for(o=0;o<3;++o)d+=this.lightPosition[o]*u[4*o+3];for(o=0;o<3;++o){for(var g=u[12+o],f=0;f<3;++f)g+=u[4*f+o]*this.lightPosition[f];c.lightPosition[o]=g/d}if(this.triangleCount>0){var p=this.triShader;p.bind(),p.uniforms=c,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(t){t=t||{};for(var e=this.gl,n=t.model||h,r=t.view||h,i=t.projection||h,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s={model:n,view:r,projection:i,clipBounds:a,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},l=this.pickShader;l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[0]+256*t.value[1]+65536*t.value[2],n=this.cells[e],r=this.positions[n[1]].slice(0,3),i={position:r,dataCoordinate:r,index:Math.floor(n[1]/48)};return"cone"===this.traceType?i.index=Math.floor(n[1]/48):"streamtube"===this.traceType&&(i.intensity=this.intensity[n[1]],i.velocity=this.vectors[n[1]].slice(0,3),i.divergence=this.vectors[n[1]][3],i.index=e),i},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},t.exports=function(t,e,n){var s=n.shaders;1===arguments.length&&(t=(e=t).gl);var l=function(t,e){var n=r(t,e.meshShader.vertex,e.meshShader.fragment,null,e.meshShader.attributes);return n.attributes.position.location=0,n.attributes.color.location=2,n.attributes.uv.location=3,n.attributes.vector.location=4,n}(t,s),u=function(t,e){var n=r(t,e.pickShader.vertex,e.pickShader.fragment,null,e.pickShader.attributes);return n.attributes.position.location=0,n.attributes.id.location=1,n.attributes.vector.location=4,n}(t,s),h=o(t,c(new Uint8Array([255,255,255,255]),[1,1,4]));h.generateMipmap(),h.minFilter=t.LINEAR_MIPMAP_LINEAR,h.magFilter=t.LINEAR;var g=i(t),f=i(t),p=i(t),v=i(t),m=i(t),y=new d(t,h,l,u,g,f,m,p,v,a(t,[{buffer:g,type:t.FLOAT,size:4},{buffer:m,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:p,type:t.FLOAT,size:4},{buffer:v,type:t.FLOAT,size:2},{buffer:f,type:t.FLOAT,size:4}]),n.traceType||"cone");return y.update(e),y}},614:function(t,e,n){var r=n(3236),i=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);e.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},e.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(t){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(t,e,n){var r=n(737);t.exports=function(t){return r[t]}},9165:function(t,e,n){t.exports=function(t){var e=t.gl,n=r(e),o=i(e,[{buffer:n,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:e.FLOAT,size:3,offset:28,stride:40}]),l=a(e);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var c=new s(e,n,o,l);return c.update(t),c};var r=n(2762),i=n(8116),a=n(3436),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,n,r){this.gl=t,this.shader=r,this.buffer=e,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=s.prototype;function c(t,e){for(var n=0;n<3;++n)t[0][n]=Math.min(t[0][n],e[n]),t[1][n]=Math.max(t[1][n],e[n])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(t){var e=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=t.view||o,i=n.projection=t.projection||o;n.model=t.model||o,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var a=r[12],s=r[13],l=r[14],c=r[15],u=(t._ortho||!1?2:1)*this.pixelRatio*(i[3]*a+i[7]*s+i[11]*l+i[15]*c)/e.drawingBufferHeight;this.vao.bind();for(var h=0;h<3;++h)e.lineWidth(this.lineWidth[h]*this.pixelRatio),n.capSize=this.capSize[h]*u,this.lineCount[h]&&e.drawArrays(e.LINES,this.lineOffset[h],this.lineCount[h]);this.vao.unbind()};var u=function(){for(var t=new Array(3),e=0;e<3;++e){for(var n=[],r=1;r<=2;++r)for(var i=-1;i<=1;i+=2){var a=[0,0,0];a[(r+e)%3]=i,n.push(a)}t[e]=n}return t}();function h(t,e,n,r){for(var i=u[r],a=0;a<i.length;++a){var o=i[a];t.push(e[0],e[1],e[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return i.length}l.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],n=t.position,r=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),n&&r){var i=[],a=n.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;t:for(var l=0;l<a;++l){for(var u=n[l],d=0;d<3;++d)if(isNaN(u[d])||!isFinite(u[d]))continue t;var g=r[l],f=e[s];if(Array.isArray(f[0])&&(f=e[l]),3===f.length?f=[f[0],f[1],f[2],1]:4===f.length&&(f=[f[0],f[1],f[2],f[3]],!this.hasAlpha&&f[3]<1&&(this.hasAlpha=!0)),!isNaN(g[0][s])&&!isNaN(g[1][s])){var p;if(g[0][s]<0)(p=u.slice())[s]+=g[0][s],i.push(u[0],u[1],u[2],f[0],f[1],f[2],f[3],0,0,0,p[0],p[1],p[2],f[0],f[1],f[2],f[3],0,0,0),c(this.bounds,p),o+=2+h(i,p,f,s);if(g[1][s]>0)(p=u.slice())[s]+=g[1][s],i.push(u[0],u[1],u[2],f[0],f[1],f[2],f[3],0,0,0,p[0],p[1],p[2],f[0],f[1],f[2],f[3],0,0,0),c(this.bounds,p),o+=2+h(i,p,f,s)}}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(i)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(t,e,n){var r=n(3236),i=n(9405),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);t.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(t,e,n){var r=n(7766);t.exports=function(t,e,n,r){i||(i=t.FRAMEBUFFER_UNSUPPORTED,a=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var c=t.getExtension("WEBGL_draw_buffers");!l&&c&&function(t,e){var n=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(n+1);for(var r=0;r<=n;++r){for(var i=new Array(n),a=0;a<r;++a)i[a]=t.COLOR_ATTACHMENT0+a;for(a=r;a<n;++a)i[a]=t.NONE;l[r]=i}}(t,c);Array.isArray(e)&&(r=n,n=0|e[1],e=0|e[0]);if("number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var u=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>u||n<0||n>u)throw new Error("gl-fbo: Parameters are too large for FBO");var h=1;if("color"in(r=r||{})){if((h=Math.max(0|r.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(h>1){if(!c)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(h>t.getParameter(c.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}var d=t.UNSIGNED_BYTE,g=t.getExtension("OES_texture_float");if(r.float&&h>0){if(!g)throw new Error("gl-fbo: Context does not support floating point textures");d=t.FLOAT}else r.preferFloat&&h>0&&g&&(d=t.FLOAT);var p=!0;"depth"in r&&(p=!!r.depth);var v=!1;"stencil"in r&&(v=!!r.stencil);return new f(t,e,n,d,h,p,v,c)};var i,a,o,s,l=null;function c(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function u(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function h(t){switch(t){case i:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(t,e,n,i,a,o){if(!i)return null;var s=r(t,e,n,a,i);return s.magFilter=t.NEAREST,s.minFilter=t.NEAREST,s.mipSamples=1,s.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,o,t.TEXTURE_2D,s.handle,0),s}function g(t,e,n,r,i){var a=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorage(t.RENDERBUFFER,r,e,n),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,a),a}function f(t,e,n,r,i,a,o,s){this.gl=t,this._shape=[0|e,0|n],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var f=0;f<i;++f)this.color[f]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=a,this._useStencil=o;var p=this,v=[0|e,0|n];Object.defineProperties(v,{0:{get:function(){return p._shape[0]},set:function(t){return p.width=t}},1:{get:function(){return p._shape[1]},set:function(t){return p.height=t}}}),this._shapeVector=v,function(t){var e=c(t.gl),n=t.gl,r=t.handle=n.createFramebuffer(),i=t._shape[0],a=t._shape[1],o=t.color.length,s=t._ext,f=t._useStencil,p=t._useDepth,v=t._colorType;n.bindFramebuffer(n.FRAMEBUFFER,r);for(var m=0;m<o;++m)t.color[m]=d(n,i,a,v,n.RGBA,n.COLOR_ATTACHMENT0+m);0===o?(t._color_rb=g(n,i,a,n.RGBA4,n.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(l[0])):o>1&&s.drawBuffersWEBGL(l[o]);var y=n.getExtension("WEBGL_depth_texture");y?f?t.depth=d(n,i,a,y.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):p&&(t.depth=d(n,i,a,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):p&&f?t._depth_rb=g(n,i,a,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):p?t._depth_rb=g(n,i,a,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):f&&(t._depth_rb=g(n,i,a,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT));var b=n.checkFramebufferStatus(n.FRAMEBUFFER);if(b!==n.FRAMEBUFFER_COMPLETE){for(t._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(n.deleteRenderbuffer(t._depth_rb),t._depth_rb=null),m=0;m<t.color.length;++m)t.color[m].dispose(),t.color[m]=null;t._color_rb&&(n.deleteRenderbuffer(t._color_rb),t._color_rb=null),u(n,e),h(b)}u(n,e)}(this)}var p=f.prototype;function v(t,e,n){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==n){var r=t.gl,i=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(e<0||e>i||n<0||n>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=n;for(var a=c(r),o=0;o<t.color.length;++o)t.color[o].shape=t._shape;t._color_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,t._color_rb),r.renderbufferStorage(r.RENDERBUFFER,r.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX,t._shape[0],t._shape[1])),r.bindFramebuffer(r.FRAMEBUFFER,t.handle);var s=r.checkFramebufferStatus(r.FRAMEBUFFER);s!==r.FRAMEBUFFER_COMPLETE&&(t.dispose(),u(r,a),h(s)),u(r,a)}}Object.defineProperties(p,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],n=0|t[1];return v(this,e,n),[e,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return v(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,v(this,this._shape[0],t),t},enumerable:!1}}),p.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},p.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(t,e,n){var r=n(3387).sprintf,i=n(5171),a=n(1848),o=n(1085);t.exports=function(t,e,n){var s=a(e)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==n&&(l=n===i.FRAGMENT_SHADER?"fragment":"vertex");for(var c=r("Error compiling %s shader %s:\n",l,s),u=r("%s%s",c,t),h=t.split("\n"),d={},g=0;g<h.length;g++){var f=h[g];if(""!==f&&"\0"!==f){var p=parseInt(f.split(":")[2]);if(isNaN(p))throw new Error(r("Could not parse error: %s",f));d[p]=f}}var v=o(e).split("\n");for(g=0;g<v.length;g++){if(d[g+3]||d[g+2]||d[g+1])if(c+=v[g]+"\n",d[g+1]){var m=d[g+1];m=m.substr(m.split(":",3).join(":").length+1).trim(),c+=r("^^^ %s\n\n",m)}}return{long:c.trim(),short:u.trim()}}},2510:function(t,e,n){t.exports=function(t,e){var n=t.gl,r=o(n,l.vertex,l.fragment),i=o(n,l.pickVertex,l.pickFragment),a=s(n),u=s(n),h=s(n),d=s(n),g=new c(t,r,i,a,u,h,d);return g.update(e),t.addObject(g),g};var r=n(2478),i=n(7762),a=n(1888),o=n(9405),s=n(2762),l=n(6768);function c(t,e,n,r,i,a,o){this.plot=t,this.shader=e,this.pickShader=n,this.positionBuffer=r,this.weightBuffer=i,this.colorBuffer=a,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var u,h=c.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];h.draw=(u=[1,0,0,0,1,0,0,0,1],function(){var t=this.plot,e=this.shader,n=this.bounds,r=this.numVertices;if(!(r<=0)){var i=t.gl,a=t.dataBox,o=n[2]-n[0],s=n[3]-n[1],l=a[2]-a[0],c=a[3]-a[1];u[0]=2*o/l,u[4]=2*s/c,u[6]=2*(n[0]-a[0])/l-1,u[7]=2*(n[1]-a[1])/c-1,e.bind();var h=e.uniforms;h.viewTransform=u,h.shape=this.shape;var d=e.attributes;this.positionBuffer.bind(),d.position.pointer(),this.weightBuffer.bind(),d.weight.pointer(i.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),d.color.pointer(i.UNSIGNED_BYTE,!0),i.drawArrays(i.TRIANGLES,0,r)}}),h.drawPick=function(){var t=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(n){var r=this.plot,i=this.pickShader,a=this.bounds,o=this.numVertices;if(!(o<=0)){var s=r.gl,l=r.dataBox,c=a[2]-a[0],u=a[3]-a[1],h=l[2]-l[0],d=l[3]-l[1];t[0]=2*c/h,t[4]=2*u/d,t[6]=2*(a[0]-l[0])/h-1,t[7]=2*(a[1]-l[1])/d-1;for(var g=0;g<4;++g)e[g]=n>>8*g&255;this.pickOffset=n,i.bind();var f=i.uniforms;f.viewTransform=t,f.pickOffset=e,f.shape=this.shape;var p=i.attributes;return this.positionBuffer.bind(),p.position.pointer(),this.weightBuffer.bind(),p.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),p.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,o),n+this.shape[0]*this.shape[1]}}}(),h.pick=function(t,e,n){var r=this.pickOffset,i=this.shape[0]*this.shape[1];if(n<r||n>=r+i)return null;var a=n-r,o=this.xData,s=this.yData;return{object:this,pointId:a,dataCoord:[o[a%this.shape[0]],s[a/this.shape[0]|0]]}},h.update=function(t){var e=(t=t||{}).shape||[0,0],n=t.x||i(e[0]),o=t.y||i(e[1]),s=t.z||new Float32Array(e[0]*e[1]),l=!1!==t.zsmooth;this.xData=n,this.yData=o;var c,u,h,g,f=t.colorLevels||[0],p=t.colorValues||[0,0,0,1],v=f.length,m=this.bounds;l?(c=m[0]=n[0],u=m[1]=o[0],h=m[2]=n[n.length-1],g=m[3]=o[o.length-1]):(c=m[0]=n[0]+(n[1]-n[0])/2,u=m[1]=o[0]+(o[1]-o[0])/2,h=m[2]=n[n.length-1]+(n[n.length-1]-n[n.length-2])/2,g=m[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var y=1/(h-c),b=1/(g-u),x=e[0],B=e[1];this.shape=[x,B];var I=(l?(x-1)*(B-1):x*B)*(d.length>>>1);this.numVertices=I;for(var F=a.mallocUint8(4*I),Q=a.mallocFloat32(2*I),C=a.mallocUint8(2*I),w=a.mallocUint32(I),U=0,A=l?x-1:x,S=l?B-1:B,L=0;L<S;++L){var k,G;l?(k=b*(o[L]-u),G=b*(o[L+1]-u)):(k=L<B-1?b*(o[L]-(o[L+1]-o[L])/2-u):b*(o[L]-(o[L]-o[L-1])/2-u),G=L<B-1?b*(o[L]+(o[L+1]-o[L])/2-u):b*(o[L]+(o[L]-o[L-1])/2-u));for(var _=0;_<A;++_){var R,E;l?(R=y*(n[_]-c),E=y*(n[_+1]-c)):(R=_<x-1?y*(n[_]-(n[_+1]-n[_])/2-c):y*(n[_]-(n[_]-n[_-1])/2-c),E=_<x-1?y*(n[_]+(n[_+1]-n[_])/2-c):y*(n[_]+(n[_]-n[_-1])/2-c));for(var T=0;T<d.length;T+=2){var M,N,D,X,Z=d[T],V=d[T+1],H=s[l?(L+V)*x+(_+Z):L*x+_],W=r.le(f,H);if(W<0)M=p[0],N=p[1],D=p[2],X=p[3];else if(W===v-1)M=p[4*v-4],N=p[4*v-3],D=p[4*v-2],X=p[4*v-1];else{var Y=(H-f[W])/(f[W+1]-f[W]),z=1-Y,O=4*W,J=4*(W+1);M=z*p[O]+Y*p[J],N=z*p[O+1]+Y*p[J+1],D=z*p[O+2]+Y*p[J+2],X=z*p[O+3]+Y*p[J+3]}F[4*U]=255*M,F[4*U+1]=255*N,F[4*U+2]=255*D,F[4*U+3]=255*X,Q[2*U]=.5*R+.5*E,Q[2*U+1]=.5*k+.5*G,C[2*U]=Z,C[2*U+1]=V,w[U]=L*x+_,U+=1}}}this.positionBuffer.update(Q),this.weightBuffer.update(C),this.colorBuffer.update(F),this.idBuffer.update(w),a.free(Q),a.free(F),a.free(C),a.free(w)},h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(t,e,n){var r=n(3236);t.exports={fragment:r(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},7319:function(t,e,n){var r=n(3236),i=n(9405),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];e.createShader=function(t){return i(t,a,o,null,l)},e.createPickShader=function(t){return i(t,a,s,null,l)}},5714:function(t,e,n){t.exports=function(t){var e=t.gl||t.scene&&t.scene.gl,n=h(e);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var o=d(e);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;for(var s=r(e),l=i(e,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),u=c(new Array(1024),[256,1,4]),g=0;g<1024;++g)u.data[g]=255;var f=a(e,u);f.wrap=e.REPEAT;var p=new m(e,n,o,s,l,f);return p.update(t),p};var r=n(2762),i=n(8116),a=n(7766),o=new Uint8Array(4),s=new Float32Array(o.buffer);var l=n(2478),c=n(9618),u=n(7319),h=u.createShader,d=u.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(t,e){for(var n=0,r=0;r<3;++r){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}function p(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)e[0][n]=Math.max(t[0][n],e[0][n]),e[1][n]=Math.min(t[1][n],e[1][n]);return e}function v(t,e,n,r){this.arcLength=t,this.position=e,this.index=n,this.dataCoordinate=r}function m(t,e,n,r,i,a){this.gl=t,this.shader=e,this.pickShader=n,this.buffer=r,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var y=m.prototype;y.isTransparent=function(){return this.hasAlpha},y.isOpaque=function(){return!this.hasAlpha},y.pickSlots=1,y.setPickBase=function(t){this.pickId=t},y.drawTransparent=y.draw=function(t){if(this.vertexCount){var e=this.gl,n=this.shader,r=this.vao;n.bind(),n.uniforms={model:t.model||g,view:t.view||g,projection:t.projection||g,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(e.TRIANGLE_STRIP,this.vertexCount),r.unbind()}},y.drawPick=function(t){if(this.vertexCount){var e=this.gl,n=this.pickShader,r=this.vao;n.bind(),n.uniforms={model:t.model||g,view:t.view||g,projection:t.projection||g,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(e.TRIANGLE_STRIP,this.vertexCount),r.unbind()}},y.update=function(t){var e,n;this.dirty=!0;var r=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var i=[],a=[],o=[],s=0,u=0,h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],d=t.position||t.positions;if(d){var g=t.color||t.colors||[0,0,0,1],p=t.lineWidth||1,v=!1;t:for(e=1;e<d.length;++e){var m,y,b,x=d[e-1],B=d[e];for(a.push(s),o.push(x.slice()),n=0;n<3;++n){if(isNaN(x[n])||isNaN(B[n])||!isFinite(x[n])||!isFinite(B[n])){if(!r&&i.length>0){for(var I=0;I<24;++I)i.push(i[i.length-12]);u+=2,v=!0}continue t}h[0][n]=Math.min(h[0][n],x[n],B[n]),h[1][n]=Math.max(h[1][n],x[n],B[n])}Array.isArray(g[0])?(m=g.length>e-1?g[e-1]:g.length>0?g[g.length-1]:[0,0,0,1],y=g.length>e?g[e]:g.length>0?g[g.length-1]:[0,0,0,1]):m=y=g,3===m.length&&(m=[m[0],m[1],m[2],1]),3===y.length&&(y=[y[0],y[1],y[2],1]),!this.hasAlpha&&m[3]<1&&(this.hasAlpha=!0),b=Array.isArray(p)?p.length>e-1?p[e-1]:p.length>0?p[p.length-1]:[0,0,0,1]:p;var F=s;if(s+=f(x,B),v){for(n=0;n<2;++n)i.push(x[0],x[1],x[2],B[0],B[1],B[2],F,b,m[0],m[1],m[2],m[3]);u+=2,v=!1}i.push(x[0],x[1],x[2],B[0],B[1],B[2],F,b,m[0],m[1],m[2],m[3],x[0],x[1],x[2],B[0],B[1],B[2],F,-b,m[0],m[1],m[2],m[3],B[0],B[1],B[2],x[0],x[1],x[2],s,-b,y[0],y[1],y[2],y[3],B[0],B[1],B[2],x[0],x[1],x[2],s,b,y[0],y[1],y[2],y[3]),u+=4}}if(this.buffer.update(i),a.push(s),o.push(d[d.length-1].slice()),this.bounds=h,this.vertexCount=u,this.points=o,this.arcLength=a,"dashes"in t){var Q=t.dashes.slice();for(Q.unshift(0),e=1;e<Q.length;++e)Q[e]=Q[e-1]+Q[e];var C=c(new Array(1024),[256,1,4]);for(e=0;e<256;++e){for(n=0;n<4;++n)C.set(e,0,n,0);1&l.le(Q,Q[Q.length-1]*e/255)?C.set(e,0,0,0):C.set(e,0,0,255)}this.texture.setPixels(C)}},y.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},y.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=function(t,e,n,r){return o[0]=r,o[1]=n,o[2]=e,o[3]=t,s[0]}(t.value[0],t.value[1],t.value[2],0),n=l.le(this.arcLength,e);if(n<0)return null;if(n===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),n);for(var r=this.points[n],i=this.points[Math.min(n+1,this.points.length-1)],a=(e-this.arcLength[n])/(this.arcLength[n+1]-this.arcLength[n]),c=1-a,u=[0,0,0],h=0;h<3;++h)u[h]=c*r[h]+a*i[h];var d=Math.min(a<.5?n:n+1,this.points.length-1);return new v(e,u,d,this.points[d])}},1903:function(t){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},6864:function(t){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},9921:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],g=t[12],f=t[13],p=t[14],v=t[15];return(e*o-n*a)*(h*v-d*p)-(e*s-r*a)*(u*v-d*f)+(e*l-i*a)*(u*p-h*f)+(n*s-r*o)*(c*v-d*g)-(n*l-i*o)*(c*p-h*g)+(r*l-i*s)*(c*f-u*g)}},7399:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,h=r*s,d=i*o,g=i*s,f=i*l,p=a*o,v=a*s,m=a*l;return t[0]=1-h-f,t[1]=u+m,t[2]=d-v,t[3]=0,t[4]=u-m,t[5]=1-c-f,t[6]=g+p,t[7]=0,t[8]=d+v,t[9]=g-p,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},6743:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,c=a+a,u=r*s,h=r*l,d=r*c,g=i*l,f=i*c,p=a*c,v=o*s,m=o*l,y=o*c;return t[0]=1-(g+p),t[1]=h+y,t[2]=d-m,t[3]=0,t[4]=h-y,t[5]=1-(u+p),t[6]=f+v,t[7]=0,t[8]=d+m,t[9]=f-v,t[10]=1-(u+g),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},7894:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},7608:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],g=e[11],f=e[12],p=e[13],v=e[14],m=e[15],y=n*s-r*o,b=n*l-i*o,x=n*c-a*o,B=r*l-i*s,I=r*c-a*s,F=i*c-a*l,Q=u*p-h*f,C=u*v-d*f,w=u*m-g*f,U=h*v-d*p,A=h*m-g*p,S=d*m-g*v,L=y*S-b*A+x*U+B*w-I*C+F*Q;if(!L)return null;return L=1/L,t[0]=(s*S-l*A+c*U)*L,t[1]=(i*A-r*S-a*U)*L,t[2]=(p*F-v*I+m*B)*L,t[3]=(d*I-h*F-g*B)*L,t[4]=(l*w-o*S-c*C)*L,t[5]=(n*S-i*w+a*C)*L,t[6]=(v*x-f*F-m*b)*L,t[7]=(u*F-d*x+g*b)*L,t[8]=(o*A-s*w+c*Q)*L,t[9]=(r*w-n*A-a*Q)*L,t[10]=(f*I-p*x+m*y)*L,t[11]=(h*x-u*I-g*y)*L,t[12]=(s*C-o*U-l*Q)*L,t[13]=(n*U-r*C+i*Q)*L,t[14]=(p*b-f*B-v*y)*L,t[15]=(u*B-h*b+d*y)*L,t}},6582:function(t,e,n){var r=n(7894);t.exports=function(t,e,n,i){var a,o,s,l,c,u,h,d,g,f,p=e[0],v=e[1],m=e[2],y=i[0],b=i[1],x=i[2],B=n[0],I=n[1],F=n[2];if(Math.abs(p-B)<1e-6&&Math.abs(v-I)<1e-6&&Math.abs(m-F)<1e-6)return r(t);h=p-B,d=v-I,g=m-F,f=1/Math.sqrt(h*h+d*d+g*g),a=b*(g*=f)-x*(d*=f),o=x*(h*=f)-y*g,s=y*d-b*h,(f=Math.sqrt(a*a+o*o+s*s))?(a*=f=1/f,o*=f,s*=f):(a=0,o=0,s=0);l=d*s-g*o,c=g*a-h*s,u=h*o-d*a,(f=Math.sqrt(l*l+c*c+u*u))?(l*=f=1/f,c*=f,u*=f):(l=0,c=0,u=0);return t[0]=a,t[1]=l,t[2]=h,t[3]=0,t[4]=o,t[5]=c,t[6]=d,t[7]=0,t[8]=s,t[9]=u,t[10]=g,t[11]=0,t[12]=-(a*p+o*v+s*m),t[13]=-(l*p+c*v+u*m),t[14]=-(h*p+d*v+g*m),t[15]=1,t}},6760:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],g=e[10],f=e[11],p=e[12],v=e[13],m=e[14],y=e[15],b=n[0],x=n[1],B=n[2],I=n[3];return t[0]=b*r+x*s+B*h+I*p,t[1]=b*i+x*l+B*d+I*v,t[2]=b*a+x*c+B*g+I*m,t[3]=b*o+x*u+B*f+I*y,b=n[4],x=n[5],B=n[6],I=n[7],t[4]=b*r+x*s+B*h+I*p,t[5]=b*i+x*l+B*d+I*v,t[6]=b*a+x*c+B*g+I*m,t[7]=b*o+x*u+B*f+I*y,b=n[8],x=n[9],B=n[10],I=n[11],t[8]=b*r+x*s+B*h+I*p,t[9]=b*i+x*l+B*d+I*v,t[10]=b*a+x*c+B*g+I*m,t[11]=b*o+x*u+B*f+I*y,b=n[12],x=n[13],B=n[14],I=n[15],t[12]=b*r+x*s+B*h+I*p,t[13]=b*i+x*l+B*d+I*v,t[14]=b*a+x*c+B*g+I*m,t[15]=b*o+x*u+B*f+I*y,t}},4040:function(t){t.exports=function(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(o+a)*c,t[15]=1,t}},4772:function(t){t.exports=function(t,e,n,r,i){var a=1/Math.tan(e/2),o=1/(r-i);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*o,t[15]=0,t}},6079:function(t){t.exports=function(t,e,n,r){var i,a,o,s,l,c,u,h,d,g,f,p,v,m,y,b,x,B,I,F,Q,C,w,U,A=r[0],S=r[1],L=r[2],k=Math.sqrt(A*A+S*S+L*L);if(Math.abs(k)<1e-6)return null;A*=k=1/k,S*=k,L*=k,i=Math.sin(n),a=Math.cos(n),o=1-a,s=e[0],l=e[1],c=e[2],u=e[3],h=e[4],d=e[5],g=e[6],f=e[7],p=e[8],v=e[9],m=e[10],y=e[11],b=A*A*o+a,x=S*A*o+L*i,B=L*A*o-S*i,I=A*S*o-L*i,F=S*S*o+a,Q=L*S*o+A*i,C=A*L*o+S*i,w=S*L*o-A*i,U=L*L*o+a,t[0]=s*b+h*x+p*B,t[1]=l*b+d*x+v*B,t[2]=c*b+g*x+m*B,t[3]=u*b+f*x+y*B,t[4]=s*I+h*F+p*Q,t[5]=l*I+d*F+v*Q,t[6]=c*I+g*F+m*Q,t[7]=u*I+f*F+y*Q,t[8]=s*C+h*w+p*U,t[9]=l*C+d*w+v*U,t[10]=c*C+g*w+m*U,t[11]=u*C+f*w+y*U,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},5567:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*i+c*r,t[5]=o*i+u*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=c*i-a*r,t[9]=u*i-o*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t}},2408:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i-c*r,t[1]=o*i-u*r,t[2]=s*i-h*r,t[3]=l*i-d*r,t[8]=a*r+c*i,t[9]=o*r+u*i,t[10]=s*r+h*i,t[11]=l*r+d*i,t}},7089:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i+c*r,t[1]=o*i+u*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=c*i-a*r,t[5]=u*i-o*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t}},2504:function(t){t.exports=function(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},7656:function(t){t.exports=function(t,e,n){var r,i,a,o,s,l,c,u,h,d,g,f,p=n[0],v=n[1],m=n[2];e===t?(t[12]=e[0]*p+e[4]*v+e[8]*m+e[12],t[13]=e[1]*p+e[5]*v+e[9]*m+e[13],t[14]=e[2]*p+e[6]*v+e[10]*m+e[14],t[15]=e[3]*p+e[7]*v+e[11]*m+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],g=e[10],f=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=g,t[11]=f,t[12]=r*p+s*v+h*m+e[12],t[13]=i*p+l*v+d*m+e[13],t[14]=a*p+c*v+g*m+e[14],t[15]=o*p+u*v+f*m+e[15]);return t}},5665:function(t){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},7626:function(t,e,n){var r=n(2642),i=n(9346);function a(t,e){for(var n=[0,0,0,0],r=0;r<4;++r)for(var i=0;i<4;++i)n[i]+=t[4*r+i]*e[r];return n}function o(t,e,n,r,i){for(var o=a(r,a(n,a(e,[t[0],t[1],t[2],1]))),s=0;s<3;++s)o[s]/=o[3];return[.5*i[0]*(1+o[0]),.5*i[1]*(1-o[1])]}function s(t,e){for(var n=[0,0,0],r=0;r<t.length;++r)for(var i=t[r],a=e[r],o=0;o<3;++o)n[o]+=a*i[o];return n}t.exports=function(t,e,n,a,l,c){if(1===t.length)return[0,t[0].slice()];for(var u=new Array(t.length),h=0;h<t.length;++h)u[h]=o(t[h],n,a,l,c);var d=0,g=1/0;for(h=0;h<u.length;++h){for(var f=0,p=0;p<2;++p)f+=Math.pow(u[h][p]-e[p],2);f<g&&(g=f,d=h)}var v=function(t,e){if(2===t.length){for(var n=0,a=0,o=0;o<2;++o)n+=Math.pow(e[o]-t[0][o],2),a+=Math.pow(e[o]-t[1][o],2);return(n=Math.sqrt(n))+(a=Math.sqrt(a))<1e-6?[1,0]:[a/(n+a),n/(a+n)]}if(3===t.length){var s=[0,0];return i(t[0],t[1],t[2],e,s),r(t,s)}return[]}(u,e),m=0;for(h=0;h<3;++h){if(v[h]<-.001||v[h]>1.0001)return null;m+=v[h]}if(Math.abs(m-1)>.001)return null;return[d,s(t,v),v]}},840:function(t,e,n){var r=n(3236),i=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),g=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),f=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);e.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.pointShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},e.pickShader={vertex:u,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},e.pointPickShader={vertex:d,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},e.contourShader={vertex:g,fragment:f,attributes:[{name:"position",type:"vec3"}]}},7201:function(t,e,n){var r=n(9405),i=n(2762),a=n(8116),o=n(7766),s=n(8406),l=n(6760),c=n(7608),u=n(9618),h=n(6729),d=n(7765),g=n(1888),f=n(840),p=n(7626),v=f.meshShader,m=f.wireShader,y=f.pointShader,b=f.pickShader,x=f.pointPickShader,B=f.contourShader,I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function F(t,e,n,r,i,a,o,s,l,c,u,h,d,g,f,p,v,m,y,b,x,B,F,Q,C,w,U){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=i,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=u,this.triangleNormals=d,this.triangleUVs=h,this.triangleIds=c,this.triangleVAO=g,this.triangleCount=0,this.lineWidth=1,this.edgePositions=f,this.edgeColors=v,this.edgeUVs=m,this.edgeIds=p,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=b,this.pointColors=B,this.pointUVs=F,this.pointSizes=Q,this.pointIds=x,this.pointVAO=C,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=w,this.contourVAO=U,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=I,this._view=I,this._projection=I,this._resolution=[1,1]}var Q=F.prototype;function C(t,e){if(!e)return 1;if(!e.length)return 1;for(var n=0;n<e.length;++n){if(e.length<2)return 1;if(e[n][0]===t)return e[n][1];if(e[n][0]>t&&n>0){var r=(e[n][0]-t)/(e[n][0]-e[n-1][0]);return e[n][1]*(1-r)+r*e[n-1][1]}}return 1}function w(t){var e=r(t,y.vertex,y.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.pointSize.location=4,e}function U(t){var e=r(t,b.vertex,b.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e}function A(t){var e=r(t,x.vertex,x.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e.attributes.pointSize.location=4,e}function S(t){var e=r(t,B.vertex,B.fragment);return e.attributes.position.location=0,e}Q.isOpaque=function(){return!this.hasAlpha},Q.isTransparent=function(){return this.hasAlpha},Q.pickSlots=1,Q.setPickBase=function(t){this.pickId=t},Q.highlight=function(t){if(t&&this.contourEnable){for(var e=d(this.cells,this.intensity,t.intensity),n=e.cells,r=e.vertexIds,i=e.vertexWeights,a=n.length,o=g.mallocFloat32(6*a),s=0,l=0;l<a;++l)for(var c=n[l],u=0;u<2;++u){var h=c[0];2===c.length&&(h=c[u]);for(var f=r[h][0],p=r[h][1],v=i[h],m=1-v,y=this.positions[f],b=this.positions[p],x=0;x<3;++x)o[s++]=v*y[x]+m*b[x]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),g.free(o)}else this.contourCount=0},Q.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=o(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t,e){for(var n=h({colormap:t,nshades:256,format:"rgba"}),r=new Uint8Array(1024),i=0;i<256;++i){for(var a=n[i],o=0;o<3;++o)r[4*i+o]=a[o];r[4*i+3]=e?255*C(i/255,e):255*a[3]}return u(r,[256,256,4],[4,0,1])}(t.colormap,this.opacityscale)),this.texture.generateMipmap());var n=t.cells,r=t.positions;if(r&&n){var i=[],a=[],l=[],c=[],d=[],g=[],f=[],p=[],v=[],m=[],y=[],b=[],x=[],B=[];this.cells=n,this.positions=r;var I=t.vertexNormals,F=t.cellNormals,Q=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,w=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!F&&(F=s.faceNormals(n,r,w)),F||I||(I=s.vertexNormals(n,r,Q));var U=t.vertexColors,A=t.cellColors,S=t.meshColor||[1,1,1,1],L=t.vertexUVs,k=t.vertexIntensity,G=t.cellUVs,_=t.cellIntensity,R=1/0,E=-1/0;if(!L&&!G)if(k)if(t.vertexIntensityBounds)R=+t.vertexIntensityBounds[0],E=+t.vertexIntensityBounds[1];else for(var T=0;T<k.length;++T){var M=k[T];R=Math.min(R,M),E=Math.max(E,M)}else if(_)if(t.cellIntensityBounds)R=+t.cellIntensityBounds[0],E=+t.cellIntensityBounds[1];else for(T=0;T<_.length;++T){M=_[T];R=Math.min(R,M),E=Math.max(E,M)}else for(T=0;T<r.length;++T){M=r[T][2];R=Math.min(R,M),E=Math.max(E,M)}this.intensity=k||(_||function(t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=t[r][2];return n}(r)),this.pickVertex=!(_||A);var N=t.pointSizes,D=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(T=0;T<r.length;++T)for(var X=r[T],Z=0;Z<3;++Z)!isNaN(X[Z])&&isFinite(X[Z])&&(this.bounds[0][Z]=Math.min(this.bounds[0][Z],X[Z]),this.bounds[1][Z]=Math.max(this.bounds[1][Z],X[Z]));var V=0,H=0,W=0;t:for(T=0;T<n.length;++T){var Y=n[T];switch(Y.length){case 1:for(X=r[O=Y[0]],Z=0;Z<3;++Z)if(isNaN(X[Z])||!isFinite(X[Z]))continue t;m.push(X[0],X[1],X[2]),J=U?U[O]:A?A[T]:S,this.opacityscale&&k?a.push(J[0],J[1],J[2],this.opacity*C((k[O]-R)/(E-R),this.opacityscale)):3===J.length?y.push(J[0],J[1],J[2],this.opacity):(y.push(J[0],J[1],J[2],J[3]*this.opacity),J[3]<1&&(this.hasAlpha=!0)),P=L?L[O]:k?[(k[O]-R)/(E-R),0]:G?G[T]:_?[(_[T]-R)/(E-R),0]:[(X[2]-R)/(E-R),0],b.push(P[0],P[1]),N?x.push(N[O]):x.push(D),B.push(T),W+=1;break;case 2:for(Z=0;Z<2;++Z){X=r[O=Y[Z]];for(var z=0;z<3;++z)if(isNaN(X[z])||!isFinite(X[z]))continue t}for(Z=0;Z<2;++Z){X=r[O=Y[Z]];g.push(X[0],X[1],X[2]),J=U?U[O]:A?A[T]:S,this.opacityscale&&k?a.push(J[0],J[1],J[2],this.opacity*C((k[O]-R)/(E-R),this.opacityscale)):3===J.length?f.push(J[0],J[1],J[2],this.opacity):(f.push(J[0],J[1],J[2],J[3]*this.opacity),J[3]<1&&(this.hasAlpha=!0)),P=L?L[O]:k?[(k[O]-R)/(E-R),0]:G?G[T]:_?[(_[T]-R)/(E-R),0]:[(X[2]-R)/(E-R),0],p.push(P[0],P[1]),v.push(T)}H+=1;break;case 3:for(Z=0;Z<3;++Z)for(X=r[O=Y[Z]],z=0;z<3;++z)if(isNaN(X[z])||!isFinite(X[z]))continue t;for(Z=0;Z<3;++Z){var O,J,P,j;X=r[O=Y[2-Z]];i.push(X[0],X[1],X[2]),(J=U?U[O]:A?A[T]:S)?this.opacityscale&&k?a.push(J[0],J[1],J[2],this.opacity*C((k[O]-R)/(E-R),this.opacityscale)):3===J.length?a.push(J[0],J[1],J[2],this.opacity):(a.push(J[0],J[1],J[2],J[3]*this.opacity),J[3]<1&&(this.hasAlpha=!0)):a.push(.5,.5,.5,1),P=L?L[O]:k?[(k[O]-R)/(E-R),0]:G?G[T]:_?[(_[T]-R)/(E-R),0]:[(X[2]-R)/(E-R),0],c.push(P[0],P[1]),j=I?I[O]:F[T],l.push(j[0],j[1],j[2]),d.push(T)}V+=1}}this.pointCount=W,this.edgeCount=H,this.triangleCount=V,this.pointPositions.update(m),this.pointColors.update(y),this.pointUVs.update(b),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(B)),this.edgePositions.update(g),this.edgeColors.update(f),this.edgeUVs.update(p),this.edgeIds.update(new Uint32Array(v)),this.trianglePositions.update(i),this.triangleColors.update(a),this.triangleUVs.update(c),this.triangleNormals.update(l),this.triangleIds.update(new Uint32Array(d))}},Q.drawTransparent=Q.draw=function(t){t=t||{};for(var e=this.gl,n=t.model||I,r=t.view||I,i=t.projection||I,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var s={model:n,view:r,projection:i,inverseModel:I.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=c(s.inverseModel,s.model),e.disable(e.CULL_FACE),this.texture.bind(0);var u=new Array(16);l(u,s.view,s.model),l(u,s.projection,u),c(u,u);for(o=0;o<3;++o)s.eyePosition[o]=u[12+o]/u[15];var h,d=u[15];for(o=0;o<3;++o)d+=this.lightPosition[o]*u[4*o+3];for(o=0;o<3;++o){for(var g=u[12+o],f=0;f<3;++f)g+=u[4*f+o]*this.lightPosition[f];s.lightPosition[o]=g/d}this.triangleCount>0&&((h=this.triShader).bind(),h.uniforms=s,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());this.edgeCount>0&&this.lineWidth>0&&((h=this.lineShader).bind(),h.uniforms=s,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());this.pointCount>0&&((h=this.pointShader).bind(),h.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((h=this.contourShader).bind(),h.uniforms=s,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind())},Q.drawPick=function(t){t=t||{};for(var e=this.gl,n=t.model||I,r=t.view||I,i=t.projection||I,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s,l={model:n,view:r,projection:i,clipBounds:a,pickId:this.pickId/255};((s=this.pickShader).bind(),s.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0)&&((s=this.pointPickShader).bind(),s.uniforms=l,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind())},Q.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],n=this.cells[e],r=this.positions,i=new Array(n.length),a=0;a<n.length;++a)i[a]=r[n[a]];var o=t.coord[0],s=t.coord[1];if(!this.pickVertex){var l=this.positions[n[0]],c=this.positions[n[1]],u=this.positions[n[2]],h=[(l[0]+c[0]+u[0])/3,(l[1]+c[1]+u[1])/3,(l[2]+c[2]+u[2])/3];return{_cellCenter:!0,position:[o,s],index:e,cell:n,cellId:e,intensity:this.intensity[e],dataCoordinate:h}}var d=p(i,[o*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!d)return null;var g=d[2],f=0;for(a=0;a<n.length;++a)f+=g[a]*this.intensity[n[a]];return{position:d[1],index:n[d[0]],cell:n,cellId:e,intensity:f,dataCoordinate:this.positions[n[d[0]]]}},Q.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=function(t,e){if(1===arguments.length&&(t=(e=t).gl),!(t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var n=function(t){var e=r(t,v.vertex,v.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.normal.location=4,e}(t),s=function(t){var e=r(t,m.vertex,m.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e}(t),l=w(t),c=U(t),h=A(t),d=S(t),g=o(t,u(new Uint8Array([255,255,255,255]),[1,1,4]));g.generateMipmap(),g.minFilter=t.LINEAR_MIPMAP_LINEAR,g.magFilter=t.LINEAR;var f=i(t),p=i(t),y=i(t),b=i(t),x=i(t),B=a(t,[{buffer:f,type:t.FLOAT,size:3},{buffer:x,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:p,type:t.FLOAT,size:4},{buffer:y,type:t.FLOAT,size:2},{buffer:b,type:t.FLOAT,size:3}]),I=i(t),Q=i(t),C=i(t),L=i(t),k=a(t,[{buffer:I,type:t.FLOAT,size:3},{buffer:L,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:t.FLOAT,size:4},{buffer:C,type:t.FLOAT,size:2}]),G=i(t),_=i(t),R=i(t),E=i(t),T=i(t),M=a(t,[{buffer:G,type:t.FLOAT,size:3},{buffer:T,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:t.FLOAT,size:4},{buffer:R,type:t.FLOAT,size:2},{buffer:E,type:t.FLOAT,size:1}]),N=i(t),D=new F(t,g,n,s,l,c,h,d,f,x,p,y,b,B,I,L,Q,C,k,G,T,_,R,E,M,N,a(t,[{buffer:N,type:t.FLOAT,size:3}]));return D.update(e),D}},8120:function(t,e,n){t.exports=function(t){var e=t.gl,n=r(e,[0,0,0,1,1,0,1,1]),s=i(e,a.boxVert,a.lineFrag);return new o(t,n,s)};var r=n(2762),i=n(9405),a=n(3603);function o(t,e,n){this.plot=t,this.vbo=e,this.shader=n}var s,l,c=o.prototype;c.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},c.drawBox=(s=[0,0],l=[0,0],function(t,e,n,r,i){var a=this.plot,o=this.shader,c=a.gl;s[0]=t,s[1]=e,l[0]=n,l[1]=r,o.uniforms.lo=s,o.uniforms.hi=l,o.uniforms.color=i,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(t,e,n){t.exports=function(t){var e=t.gl,n=r(e),a=i(e,o.gridVert,o.gridFrag),l=i(e,o.tickVert,o.gridFrag),c=new s(t,n,a,l);return c};var r=n(2762),i=n(9405),a=n(2478),o=n(3603);function s(t,e,n,r){this.plot=t,this.vbo=e,this.shader=n,this.tickShader=r,this.ticks=[[],[]]}function l(t,e){return t-e}var c,u,h,d,g,f=s.prototype;f.draw=(c=[0,0],u=[0,0],h=[0,0],function(){for(var t=this.plot,e=this.vbo,n=this.shader,r=this.ticks,i=t.gl,a=t._tickBounds,o=t.dataBox,s=t.viewBox,l=t.gridLineWidth,d=t.gridLineColor,g=t.gridLineEnable,f=t.pixelRatio,p=0;p<2;++p){var v=a[p],m=a[p+2]-v,y=.5*(o[p+2]+o[p]),b=o[p+2]-o[p];u[p]=2*m/b,c[p]=2*(v-y)/b}n.bind(),e.bind(),n.attributes.dataCoord.pointer(),n.uniforms.dataShift=c,n.uniforms.dataScale=u;var x=0;for(p=0;p<2;++p){h[0]=h[1]=0,h[p]=1,n.uniforms.dataAxis=h,n.uniforms.lineWidth=l[p]/(s[p+2]-s[p])*f,n.uniforms.color=d[p];var B=6*r[p].length;g[p]&&B&&i.drawArrays(i.TRIANGLES,x,B),x+=B}}),f.drawTickMarks=function(){var t=[0,0],e=[0,0],n=[1,0],r=[0,1],i=[0,0],o=[0,0];return function(){for(var s=this.plot,c=this.vbo,u=this.tickShader,h=this.ticks,d=s.gl,g=s._tickBounds,f=s.dataBox,p=s.viewBox,v=s.pixelRatio,m=s.screenBox,y=m[2]-m[0],b=m[3]-m[1],x=p[2]-p[0],B=p[3]-p[1],I=0;I<2;++I){var F=g[I],Q=g[I+2]-F,C=.5*(f[I+2]+f[I]),w=f[I+2]-f[I];e[I]=2*Q/w,t[I]=2*(F-C)/w}e[0]*=x/y,t[0]*=x/y,e[1]*=B/b,t[1]*=B/b,u.bind(),c.bind(),u.attributes.dataCoord.pointer();var U=u.uniforms;U.dataShift=t,U.dataScale=e;var A=s.tickMarkLength,S=s.tickMarkWidth,L=s.tickMarkColor,k=6*h[0].length,G=Math.min(a.ge(h[0],(f[0]-g[0])/(g[2]-g[0]),l),h[0].length),_=Math.min(a.gt(h[0],(f[2]-g[0])/(g[2]-g[0]),l),h[0].length),R=0+6*G,E=6*Math.max(0,_-G),T=Math.min(a.ge(h[1],(f[1]-g[1])/(g[3]-g[1]),l),h[1].length),M=Math.min(a.gt(h[1],(f[3]-g[1])/(g[3]-g[1]),l),h[1].length),N=k+6*T,D=6*Math.max(0,M-T);i[0]=2*(p[0]-A[1])/y-1,i[1]=(p[3]+p[1])/b-1,o[0]=A[1]*v/y,o[1]=S[1]*v/b,D&&(U.color=L[1],U.tickScale=o,U.dataAxis=r,U.screenOffset=i,d.drawArrays(d.TRIANGLES,N,D)),i[0]=(p[2]+p[0])/y-1,i[1]=2*(p[1]-A[0])/b-1,o[0]=S[0]*v/y,o[1]=A[0]*v/b,E&&(U.color=L[0],U.tickScale=o,U.dataAxis=n,U.screenOffset=i,d.drawArrays(d.TRIANGLES,R,E)),i[0]=2*(p[2]+A[3])/y-1,i[1]=(p[3]+p[1])/b-1,o[0]=A[3]*v/y,o[1]=S[3]*v/b,D&&(U.color=L[3],U.tickScale=o,U.dataAxis=r,U.screenOffset=i,d.drawArrays(d.TRIANGLES,N,D)),i[0]=(p[2]+p[0])/y-1,i[1]=2*(p[3]+A[2])/b-1,o[0]=S[2]*v/y,o[1]=A[2]*v/b,E&&(U.color=L[2],U.tickScale=o,U.dataAxis=n,U.screenOffset=i,d.drawArrays(d.TRIANGLES,R,E))}}(),f.update=(d=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(t){var e=t.ticks,n=t.bounds,r=new Float32Array(18*(e[0].length+e[1].length));this.plot.zeroLineEnable;for(var i=0,a=[[],[]],o=0;o<2;++o)for(var s=a[o],l=e[o],c=n[o],u=n[o+2],h=0;h<l.length;++h){var f=(l[h].x-c)/(u-c);s.push(f);for(var p=0;p<6;++p)r[i++]=f,r[i++]=d[p],r[i++]=g[p]}this.ticks=a,this.vbo.update(r)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(t,e,n){t.exports=function(t){var e=t.gl,n=r(e,[-1,-1,-1,1,1,-1,1,1]),s=i(e,a.lineVert,a.lineFrag),l=new o(t,n,s);return l};var r=n(2762),i=n(9405),a=n(3603);function o(t,e,n){this.plot=t,this.vbo=e,this.shader=n}var s=o.prototype;s.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},s.drawLine=function(){var t=[0,0],e=[0,0];return function(n,r,i,a,o,s){var l=this.plot,c=this.shader,u=l.gl;t[0]=n,t[1]=r,e[0]=i,e[1]=a,c.uniforms.start=t,c.uniforms.end=e,c.uniforms.width=o*l.pixelRatio,c.uniforms.color=s,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(t,e,n){var r=n(3236),i=r(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);t.exports={lineVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:i,textVert:r(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:i,gridVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:i,boxVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},2142:function(t,e,n){t.exports=function(t){var e=t.gl,n=r(e),a=i(e,s.textVert,s.textFrag),o=new l(t,n,a);return o};var r=n(2762),i=n(9405),a=n(529),o=n(2478),s=n(3603);function l(t,e,n){this.plot=t,this.vbo=e,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var c,u,h,d,g,f,p=l.prototype;p.drawTicks=(c=[0,0],u=[0,0],h=[0,0],function(t){var e=this.plot,n=this.shader,r=this.tickX[t],i=this.tickOffset[t],a=e.gl,s=e.viewBox,l=e.dataBox,d=e.screenBox,g=e.pixelRatio,f=e.tickEnable,p=e.tickPad,v=e.tickColor,m=e.tickAngle,y=e.labelEnable,b=e.labelPad,x=e.labelColor,B=e.labelAngle,I=this.labelOffset[t],F=this.labelCount[t],Q=o.lt(r,l[t]),C=o.le(r,l[t+2]);c[0]=c[1]=0,c[t]=1,u[t]=(s[2+t]+s[t])/(d[2+t]-d[t])-1;var w=2/d[2+(1^t)]-d[1^t];u[1^t]=w*s[1^t]-1,f[t]&&(u[1^t]-=w*g*p[t],Q<C&&i[C]>i[Q]&&(n.uniforms.dataAxis=c,n.uniforms.screenOffset=u,n.uniforms.color=v[t],n.uniforms.angle=m[t],a.drawArrays(a.TRIANGLES,i[Q],i[C]-i[Q]))),y[t]&&F&&(u[1^t]-=w*g*b[t],n.uniforms.dataAxis=h,n.uniforms.screenOffset=u,n.uniforms.color=x[t],n.uniforms.angle=B[t],a.drawArrays(a.TRIANGLES,I,F)),u[1^t]=w*s[2+(1^t)]-1,f[t+2]&&(u[1^t]+=w*g*p[t+2],Q<C&&i[C]>i[Q]&&(n.uniforms.dataAxis=c,n.uniforms.screenOffset=u,n.uniforms.color=v[t+2],n.uniforms.angle=m[t+2],a.drawArrays(a.TRIANGLES,i[Q],i[C]-i[Q]))),y[t+2]&&F&&(u[1^t]+=w*g*b[t+2],n.uniforms.dataAxis=h,n.uniforms.screenOffset=u,n.uniforms.color=x[t+2],n.uniforms.angle=B[t+2],a.drawArrays(a.TRIANGLES,I,F))}),p.drawTitle=function(){var t=[0,0],e=[0,0];return function(){var n=this.plot,r=this.shader,i=n.gl,a=n.screenBox,o=n.titleCenter,s=n.titleAngle,l=n.titleColor,c=n.pixelRatio;if(this.titleCount){for(var u=0;u<2;++u)e[u]=2*(o[u]*c-a[u])/(a[2+u]-a[u])-1;r.bind(),r.uniforms.dataAxis=t,r.uniforms.screenOffset=e,r.uniforms.angle=s,r.uniforms.color=l,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}}(),p.bind=(d=[0,0],g=[0,0],f=[0,0],function(){var t=this.plot,e=this.shader,n=t._tickBounds,r=t.dataBox,i=t.screenBox,a=t.viewBox;e.bind();for(var o=0;o<2;++o){var s=n[o],l=n[o+2]-s,c=.5*(r[o+2]+r[o]),u=r[o+2]-r[o],h=a[o],p=a[o+2]-h,v=i[o],m=i[o+2]-v;g[o]=2*l/u*p/m,d[o]=2*(s-c)/u*p/m}f[1]=2*t.pixelRatio/(i[3]-i[1]),f[0]=f[1]*(i[3]-i[1])/(i[2]-i[0]),e.uniforms.dataScale=g,e.uniforms.dataShift=d,e.uniforms.textScale=f,this.vbo.bind(),e.attributes.textCoordinate.pointer()}),p.update=function(t){var e,n,r,i,o,s=[],l=t.ticks,c=t.bounds;for(o=0;o<2;++o){var u=[Math.floor(s.length/3)],h=[-1/0],d=l[o];for(e=0;e<d.length;++e){var g=d[e],f=g.x,p=g.text,v=g.font||"sans-serif",m=g.fontStyle||"normal",y=g.fontWeight||"normal",b=g.fontVariant||"normal";i=g.fontSize||12;for(var x=1/(c[o+2]-c[o]),B=c[o],I=p.split("\n"),F=0;F<I.length;F++)for(r=a(v,I[F],{fontStyle:m,fontWeight:y,fontVariant:b}).data,n=0;n<r.length;n+=2)s.push(r[n]*i,-r[n+1]*i-F*i*1.2,(f-B)*x);u.push(Math.floor(s.length/3)),h.push(f)}this.tickOffset[o]=u,this.tickX[o]=h}for(o=0;o<2;++o){for(this.labelOffset[o]=Math.floor(s.length/3),r=a(t.labelFont[o],t.labels[o],{fontStyle:t.labelFontStyle[o],fontWeight:t.labelFontWeight[o],fontVariant:t.labelFontVariant[o],textAlign:"center"}).data,i=t.labelSize[o],e=0;e<r.length;e+=2)s.push(r[e]*i,-r[e+1]*i,0);this.labelCount[o]=Math.floor(s.length/3)-this.labelOffset[o]}for(this.titleOffset=Math.floor(s.length/3),r=a(t.titleFont,t.title,{fontStyle:t.titleFontStyle,fontWeight:t.titleFontWeight,fontVariant:t.titleFontVariant}).data,i=t.titleSize,e=0;e<r.length;e+=2)s.push(r[e]*i,-r[e+1]*i,0);this.titleCount=Math.floor(s.length/3)-this.titleOffset,this.vbo.update(s)},p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(t,e,n){t.exports=function(t){var e=t.gl,n=r(e,[e.drawingBufferWidth,e.drawingBufferHeight]),c=new l(e,n);return c.grid=i(c),c.text=a(c),c.line=o(c),c.box=s(c),c.update(t),c};var r=n(3589),i=n(1913),a=n(2142),o=n(4747),s=n(8120);function l(t,e){this.gl=t,this.pickBuffer=e,this.screenBox=[0,0,t.drawingBufferWidth,t.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var c=l.prototype;function u(t){for(var e=t.slice(),n=0;n<e.length;++n)e[n]=e[n].slice();return e}function h(t,e){return t.x-e.x}c.setDirty=function(){this.dirty=this.pickDirty=!0},c.setOverlayDirty=function(){this.dirty=!0},c.nextDepthValue=function(){return this._depthCounter++/65536},c.draw=function(){var t=this.gl,e=this.screenBox,n=this.viewBox,r=this.dataBox,i=this.pixelRatio,a=this.grid,o=this.line,s=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,t.bindFramebuffer(t.FRAMEBUFFER,null),t.enable(t.SCISSOR_TEST),t.disable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.depthMask(!1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD,t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.borderColor){t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]);var c=this.borderColor;t.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}t.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),t.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var u=this.backgroundColor;t.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),t.clear(t.COLOR_BUFFER_BIT),a.draw();var h=this.zeroLineEnable,d=this.zeroLineColor,g=this.zeroLineWidth;if(h[0]||h[1]){o.bind();for(var f=0;f<2;++f)if(h[f]&&r[f]<=0&&r[f+2]>=0){var p=e[f]-r[f]*(e[f+2]-e[f])/(r[f+2]-r[f]);0===f?o.drawLine(p,e[1],p,e[3],g[f],d[f]):o.drawLine(e[0],p,e[2],p,g[f],d[f])}}for(f=0;f<l.length;++f)l[f].draw();t.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]),t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.grid.drawTickMarks(),o.bind();var v=this.borderLineEnable,m=this.borderLineWidth,y=this.borderLineColor;for(v[1]&&o.drawLine(n[0],n[1]-.5*m[1]*i,n[0],n[3]+.5*m[3]*i,m[1],y[1]),v[0]&&o.drawLine(n[0]-.5*m[0]*i,n[1],n[2]+.5*m[2]*i,n[1],m[0],y[0]),v[3]&&o.drawLine(n[2],n[1]-.5*m[1]*i,n[2],n[3]+.5*m[3]*i,m[3],y[3]),v[2]&&o.drawLine(n[0]-.5*m[0]*i,n[3],n[2]+.5*m[2]*i,n[3],m[2],y[2]),s.bind(),f=0;f<2;++f)s.drawTicks(f);this.titleEnable&&s.drawTitle();var b=this.overlays;for(f=0;f<b.length;++f)b[f].draw();t.disable(t.SCISSOR_TEST),t.disable(t.BLEND),t.depthMask(!0)}},c.drawPick=function(){if(!this.static){var t=this.pickBuffer;this.gl,this._pickTimeout=null,t.begin();for(var e=1,n=this.objects,r=0;r<n.length;++r)e=n[r].drawPick(e);t.end()}},c.pick=function(t,e){if(!this.static){var n=this.pixelRatio,r=this.pickPixelRatio,i=this.viewBox,a=0|Math.round((t-i[0]/n)*r),o=0|Math.round((e-i[1]/n)*r),s=this.pickBuffer.query(a,o,this.pickRadius);if(!s)return null;for(var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),c=this.objects,u=0;u<c.length;++u){var h=c[u].pick(a,o,l);if(h)return h}return null}},c.setScreenBox=function(t){var e=this.screenBox,n=this.pixelRatio;e[0]=0|Math.round(t[0]*n),e[1]=0|Math.round(t[1]*n),e[2]=0|Math.round(t[2]*n),e[3]=0|Math.round(t[3]*n),this.setDirty()},c.setDataBox=function(t){var e=this.dataBox;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this.setDirty())},c.setViewBox=function(t){var e=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(t[0]*e),n[1]=0|Math.round(t[1]*e),n[2]=0|Math.round(t[2]*e),n[3]=0|Math.round(t[3]*e);var r=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((t[2]-t[0])*r),0|Math.round((t[3]-t[1])*r)],this.setDirty()},c.update=function(t){t=t||{};var e=this.gl;this.pixelRatio=t.pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(t.screenBox||[0,0,e.drawingBufferWidth/n,e.drawingBufferHeight/n]),this.screenBox,this.setViewBox(t.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var r=this.viewBox,i=(r[2]-r[0])/(r[3]-r[1]);this.setDataBox(t.dataBox||[-10,-10/i,10,10/i]),this.borderColor=!1!==t.borderColor&&(t.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(t.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(t.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(t.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(t.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(t.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(t.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(t.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(t.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(t.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(t.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(t.titleCenter||[.5*(r[0]+r[2])/n,(r[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in t)||!!t.titleEnable,this.titleAngle=t.titleAngle||0,this.titleColor=(t.titleColor||[0,0,0,1]).slice(),this.labelPad=(t.labelPad||[15,15,15,15]).slice(),this.labelAngle=(t.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(t.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(t.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(t.tickPad||[15,15,15,15]).slice(),this.tickAngle=(t.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(t.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(t.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(t.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(t.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(t.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var a=t.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var s=0;s<2;++s){var l=a[s].slice(0);0!==l.length&&(l.sort(h),o[s]=Math.min(o[s],l[0].x),o[s+2]=Math.max(o[s+2],l[l.length-1].x))}this.grid.update({bounds:o,ticks:a}),this.text.update({bounds:o,ticks:a,labels:t.labels||["x","y"],labelSize:t.labelSize||[12,12],labelFont:t.labelFont||["sans-serif","sans-serif"],labelFontStyle:t.labelFontStyle||["normal","normal"],labelFontWeight:t.labelFontWeight||["normal","normal"],labelFontVariant:t.labelFontVariant||["normal","normal"],title:t.title||"",titleSize:t.titleSize||18,titleFont:t.titleFont||"sans-serif",titleFontStyle:t.titleFontStyle||"normal",titleFontWeight:t.titleFontWeight||"normal",titleFontVariant:t.titleFontVariant||"normal"}),this.static=!!t.static,this.setDirty()},c.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var t=this.objects.length-1;t>=0;--t)this.objects[t].dispose();this.objects.length=0;for(t=this.overlays.length-1;t>=0;--t)this.overlays[t].dispose();this.overlays.length=0,this.gl=null},c.addObject=function(t){this.objects.indexOf(t)<0&&(this.objects.push(t),this.setDirty())},c.removeObject=function(t){for(var e=this.objects,n=0;n<e.length;++n)if(e[n]===t){e.splice(n,1),this.setDirty();break}},c.addOverlay=function(t){this.overlays.indexOf(t)<0&&(this.overlays.push(t),this.setOverlayDirty())},c.removeOverlay=function(t){for(var e=this.overlays,n=0;n<e.length;++n)if(e[n]===t){e.splice(n,1),this.setOverlayDirty();break}}},4437:function(t,e,n){t.exports=function(t,e){t=t||document.body,e=e||{};var n=[.01,1/0];"distanceLimits"in e&&(n[0]=e.distanceLimits[0],n[1]=e.distanceLimits[1]);"zoomMin"in e&&(n[0]=e.zoomMin);"zoomMax"in e&&(n[1]=e.zoomMax);var c=i({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:n}),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0,d=t.clientWidth,g=t.clientHeight,f={keyBindingMode:"rotate",enableWheel:!0,view:c,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:c.modes,_ortho:e._ortho||e.projection&&"orthographic"===e.projection.type||!1,tick:function(){var e=r(),n=this.delay,i=e-2*n;c.idle(e-n),c.recalcMatrix(i),c.flush(e-(100+2*n));for(var a=!0,o=c.computedMatrix,s=0;s<16;++s)a=a&&u[s]===o[s],u[s]=o[s];var l=t.clientWidth===d&&t.clientHeight===g;return d=t.clientWidth,g=t.clientHeight,a?!l:(h=Math.exp(c.computedRadius[0]),!0)},lookAt:function(t,e,n){c.lookAt(c.lastT(),t,e,n)},rotate:function(t,e,n){c.rotate(c.lastT(),t,e,n)},pan:function(t,e,n){c.pan(c.lastT(),t,e,n)},translate:function(t,e,n){c.translate(c.lastT(),t,e,n)}};return Object.defineProperties(f,{matrix:{get:function(){return c.computedMatrix},set:function(t){return c.setMatrix(c.lastT(),t),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(t){var e=c.computedUp.slice(),n=c.computedEye.slice(),i=c.computedCenter.slice();if(c.setMode(t),"turntable"===t){var a=r();c._active.lookAt(a,n,i,e),c._active.lookAt(a+500,n,i,[0,0,1]),c._active.flush(a)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(t){return c.lookAt(c.lastT(),null,t),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(t){return c.lookAt(c.lastT(),t),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(t){return c.lookAt(c.lastT(),null,null,t),c.computedUp},enumerable:!0},distance:{get:function(){return h},set:function(t){return c.setDistance(c.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(n)},set:function(t){return c.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),f._lastX=-1,f._lastY=-1,f._lastMods={shift:!1,control:!1,alt:!1,meta:!1},f.enableMouseListeners=function(){function e(e,n,i,a){var o=f.keyBindingMode;if(!1!==o){var s="rotate"===o,l="pan"===o,u="zoom"===o,d=!!a.control,g=!!a.alt,p=!!a.shift,v=!!(1&e),m=!!(2&e),y=!!(4&e),b=1/t.clientHeight,x=b*(n-f._lastX),B=b*(i-f._lastY),I=f.flipX?1:-1,F=f.flipY?1:-1,Q=Math.PI*f.rotateSpeed,C=r();if(-1!==f._lastX&&-1!==f._lastY&&((s&&v&&!d&&!g&&!p||v&&!d&&!g&&p)&&c.rotate(C,I*Q*x,-F*Q*B,0),(l&&v&&!d&&!g&&!p||m||v&&d&&!g&&!p)&&c.pan(C,-f.translateSpeed*x*h,f.translateSpeed*B*h,0),u&&v&&!d&&!g&&!p||y||v&&!d&&g&&!p)){var w=-f.zoomSpeed*B/window.innerHeight*(C-c.lastT())*100;c.pan(C,0,0,h*(Math.exp(w)-1))}return f._lastX=n,f._lastY=i,f._lastMods=a,!0}}f.mouseListener=a(t,e),t.addEventListener("touchstart",(function(n){var r=s(n.changedTouches[0],t);e(0,r[0],r[1],f._lastMods),e(1,r[0],r[1],f._lastMods)}),!!l&&{passive:!0}),t.addEventListener("touchmove",(function(n){var r=s(n.changedTouches[0],t);e(1,r[0],r[1],f._lastMods),n.preventDefault()}),!!l&&{passive:!1}),t.addEventListener("touchend",(function(t){e(0,f._lastX,f._lastY,f._lastMods)}),!!l&&{passive:!0}),f.wheelListener=o(t,(function(t,e){if(!1!==f.keyBindingMode&&f.enableWheel){var n=f.flipX?1:-1,i=f.flipY?1:-1,a=r();if(Math.abs(t)>Math.abs(e))c.rotate(a,0,0,-t*n*Math.PI*f.rotateSpeed/window.innerWidth);else if(!f._ortho){var o=-f.zoomSpeed*i*e/window.innerHeight*(a-c.lastT())/20;c.pan(a,0,0,h*(Math.exp(o)-1))}}}),!0)},f.enableMouseListeners(),f};var r=n(3025),i=n(6296),a=n(351),o=n(8512),s=n(24),l=n(7520)},799:function(t,e,n){var r=n(3236),i=n(9405),a=r(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);t.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec2"}])}},4100:function(t,e,n){var r=n(4437),i=n(3837),a=n(5445),o=n(4449),s=n(3589),l=n(2260),c=n(7169),u=n(351),h=n(4772),d=n(4040),g=n(799),f=n(9216)({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function v(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));if(e<0){var n=Math.round(Math.pow(10,-e));return Math.ceil(t*n)/n}if(e>0){n=Math.round(Math.pow(10,e));return Math.ceil(t/n)*n}return Math.ceil(t)}function m(t){return"boolean"!=typeof t||t}t.exports={createScene:function(t){(t=t||{}).camera=t.camera||{};var e=t.canvas;if(!e){if(e=document.createElement("canvas"),t.container)t.container.appendChild(e);else document.body.appendChild(e)}var n=t.gl;n||(t.glOptions&&(f=!!t.glOptions.preserveDrawingBuffer),n=function(t,e){var n=null;try{(n=t.getContext("webgl",e))||(n=t.getContext("experimental-webgl",e))}catch(t){return null}return n}(e,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:f}));if(!n)throw new Error("webgl not supported");var y=t.bounds||[[-10,-10,-10],[10,10,10]],b=new p,x=l(n,n.drawingBufferWidth,n.drawingBufferHeight,{preferFloat:!f}),B=g(n),I=t.cameraObject&&!0===t.cameraObject._ortho||t.camera.projection&&"orthographic"===t.camera.projection.type||!1,F={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:I},Q=t.axes||{},C=i(n,Q);C.enable=!Q.disable;var w=t.spikes||{},U=o(n,w),A=[],S=[],L=[],k=[],G=!0,_=!0,R=new Array(16),E=new Array(16),T={view:null,projection:R,model:E,_ortho:!1},M=(_=!0,[n.drawingBufferWidth,n.drawingBufferHeight]),N=t.cameraObject||r(e,F),D={gl:n,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:e,selection:b,camera:N,axes:C,axesPixels:null,spikes:U,bounds:y,objects:A,shape:M,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:m(t.autoResize),autoBounds:m(t.autoBounds),autoScale:!!t.autoScale,autoCenter:m(t.autoCenter),clipToBounds:m(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:T,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(t){this.aspect[0]=t.x,this.aspect[1]=t.y,this.aspect[2]=t.z,_=!0},setBounds:function(t,e){this.bounds[0][t]=e.min,this.bounds[1][t]=e.max},setClearColor:function(t){this.clearColor=t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},X=[n.drawingBufferWidth/D.pixelRatio|0,n.drawingBufferHeight/D.pixelRatio|0];function Z(){if(!D._stopped&&D.autoResize){var t=e.parentNode,n=1,r=1;t&&t!==document.body?(n=t.clientWidth,r=t.clientHeight):(n=window.innerWidth,r=window.innerHeight);var i=0|Math.ceil(n*D.pixelRatio),a=0|Math.ceil(r*D.pixelRatio);if(i!==e.width||a!==e.height){e.width=i,e.height=a;var o=e.style;o.position=o.position||"absolute",o.left="0px",o.top="0px",o.width=n+"px",o.height=r+"px",G=!0}}}D.autoResize&&Z();function V(){for(var t=A.length,e=k.length,r=0;r<e;++r)L[r]=0;t:for(r=0;r<t;++r){var i=A[r],a=i.pickSlots;if(a){for(var o=0;o<e;++o)if(L[o]+a<255){S[r]=o,i.setPickBase(L[o]+1),L[o]+=a;continue t}var l=s(n,M);S[r]=e,k.push(l),L.push(a),i.setPickBase(1),e+=1}else S[r]=-1}for(;e>0&&0===L[e-1];)L.pop(),k.pop().dispose()}function H(){if(D.contextLost)return!0;n.isContextLost()&&(D.contextLost=!0,D.mouseListener.enabled=!1,D.selection.object=null,D.oncontextloss&&D.oncontextloss())}window.addEventListener("resize",Z),D.update=function(t){D._stopped||(G=!0,_=!0)},D.add=function(t){D._stopped||(t.axes=C,A.push(t),S.push(-1),G=!0,_=!0,V())},D.remove=function(t){if(!D._stopped){var e=A.indexOf(t);e<0||(A.splice(e,1),S.pop(),G=!0,_=!0,V())}},D.dispose=function(){if(!D._stopped&&(D._stopped=!0,window.removeEventListener("resize",Z),e.removeEventListener("webglcontextlost",H),D.mouseListener.enabled=!1,!D.contextLost)){C.dispose(),U.dispose();for(var t=0;t<A.length;++t)A[t].dispose();x.dispose();for(t=0;t<k.length;++t)k[t].dispose();B.dispose(),n=null,C=null,U=null,A=[]}},D._mouseRotating=!1,D._prevButtons=0,D.enableMouseListeners=function(){D.mouseListener=u(e,(function(t,e,n){if(!D._stopped){var r=k.length,i=A.length,a=b.object;b.distance=1/0,b.mouse[0]=e,b.mouse[1]=n,b.object=null,b.screen=null,b.dataCoordinate=b.dataPosition=null;var o=!1;if(t&&D._prevButtons)D._mouseRotating=!0;else{D._mouseRotating&&(_=!0),D._mouseRotating=!1;for(var s=0;s<r;++s){var l=k[s].query(e,X[1]-n-1,D.pickRadius);if(l){if(l.distance>b.distance)continue;for(var c=0;c<i;++c){var u=A[c];if(S[c]===s){var h=u.pick(l);h&&(b.buttons=t,b.screen=l.coord,b.distance=l.distance,b.object=u,b.index=h.distance,b.dataPosition=h.position,b.dataCoordinate=h.dataCoordinate,b.data=h,o=!0)}}}}}a&&a!==b.object&&(a.highlight&&a.highlight(null),G=!0),b.object&&(b.object.highlight&&b.object.highlight(b.data),G=!0),(o=o||b.object!==a)&&D.onselect&&D.onselect(b),1&t&&!(1&D._prevButtons)&&D.onclick&&D.onclick(b),D._prevButtons=t}}))},e.addEventListener("webglcontextlost",H);var W=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Y=[W[0].slice(),W[1].slice()];function z(){if(!H()){Z();var t=D.camera.tick();T.view=D.camera.matrix,G=G||t,_=_||t,C.pixelRatio=D.pixelRatio,U.pixelRatio=D.pixelRatio;var e=A.length,r=W[0],i=W[1];r[0]=r[1]=r[2]=1/0,i[0]=i[1]=i[2]=-1/0;for(var o=0;o<e;++o){(L=A[o]).pixelRatio=D.pixelRatio,L.axes=D.axes,G=G||!!L.dirty,_=_||!!L.dirty;var s=L.bounds;if(s)for(var l=s[0],u=s[1],g=0;g<3;++g)r[g]=Math.min(r[g],l[g]),i[g]=Math.max(i[g],u[g])}var f=D.bounds;if(D.autoBounds)for(g=0;g<3;++g){if(i[g]<r[g])r[g]=-1,i[g]=1;else{r[g]===i[g]&&(r[g]-=1,i[g]+=1);var p=.05*(i[g]-r[g]);r[g]=r[g]-p,i[g]=i[g]+p}f[0][g]=r[g],f[1][g]=i[g]}var m=!1;for(g=0;g<3;++g)m=m||Y[0][g]!==f[0][g]||Y[1][g]!==f[1][g],Y[0][g]=f[0][g],Y[1][g]=f[1][g];if(_=_||m,G=G||m){if(m){var y=[0,0,0];for(o=0;o<3;++o)y[o]=v((f[1][o]-f[0][o])/10);C.autoTicks?C.update({bounds:f,tickSpacing:y}):C.update({bounds:f})}var F=n.drawingBufferWidth,Q=n.drawingBufferHeight;M[0]=F,M[1]=Q,X[0]=0|Math.max(F/D.pixelRatio,1),X[1]=0|Math.max(Q/D.pixelRatio,1),function(t,e){var n=t.bounds,r=t.cameraParams,i=r.projection,a=r.model,o=t.gl.drawingBufferWidth,s=t.gl.drawingBufferHeight,l=t.zNear,c=t.zFar,u=t.fovy,g=o/s;e?(d(i,-g,g,-1,1,l,c),r._ortho=!0):(h(i,u,g,l,c),r._ortho=!1);for(var f=0;f<16;++f)a[f]=0;a[15]=1;var p=0;for(f=0;f<3;++f)p=Math.max(p,n[1][f]-n[0][f]);for(f=0;f<3;++f)t.autoScale?a[5*f]=t.aspect[f]/(n[1][f]-n[0][f]):a[5*f]=1/p,t.autoCenter&&(a[12+f]=.5*-a[5*f]*(n[0][f]+n[1][f]))}(D,I);for(o=0;o<e;++o){(L=A[o]).axesBounds=f,D.clipToBounds&&(L.clipBounds=f)}b.object&&(D.snapToData?U.position=b.dataCoordinate:U.position=b.dataPosition,U.bounds=f),_&&(_=!1,function(){if(!H()){n.colorMask(!0,!0,!0,!0),n.depthMask(!0),n.disable(n.BLEND),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL);for(var t=A.length,e=k.length,r=0;r<e;++r){var i=k[r];i.shape=X,i.begin();for(var a=0;a<t;++a)if(S[a]===r){var o=A[a];o.drawPick&&(o.pixelRatio=1,o.drawPick(T))}i.end()}}}()),D.axesPixels=a(D.axes,T,F,Q),D.onrender&&D.onrender(),n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,F,Q),D.clearRGBA(),n.depthMask(!0),n.colorMask(!0,!0,!0,!0),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.disable(n.BLEND),n.disable(n.CULL_FACE);var w=!1;C.enable&&(w=w||C.isTransparent(),C.draw(T)),U.axes=C,b.object&&U.draw(T),n.disable(n.CULL_FACE);for(o=0;o<e;++o){(L=A[o]).axes=C,L.pixelRatio=D.pixelRatio,L.isOpaque&&L.isOpaque()&&L.draw(T),L.isTransparent&&L.isTransparent()&&(w=!0)}if(w){x.shape=M,x.bind(),n.clear(n.DEPTH_BUFFER_BIT),n.colorMask(!1,!1,!1,!1),n.depthMask(!0),n.depthFunc(n.LESS),C.enable&&C.isTransparent()&&C.drawTransparent(T);for(o=0;o<e;++o){(L=A[o]).isOpaque&&L.isOpaque()&&L.draw(T)}n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.colorMask(!0,!0,!0,!0),n.depthMask(!1),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),C.isTransparent()&&C.drawTransparent(T);for(o=0;o<e;++o){var L;(L=A[o]).isTransparent&&L.isTransparent()&&L.drawTransparent(T)}n.bindFramebuffer(n.FRAMEBUFFER,null),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),B.bind(),x.color[0].bind(0),B.uniforms.accumBuffer=0,c(n),n.disable(n.BLEND)}G=!1;for(o=0;o<e;++o)A[o].dirty=!1}}}function O(){D._stopped||D.contextLost||(z(),requestAnimationFrame(O))}return D.enableMouseListeners(),O(),D.redraw=function(){D._stopped||(G=!0,z())},D},createCamera:r}},6640:function(t,e,n){var r=n(3236);e.pointVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),e.pointFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),e.pickVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),e.pickFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},4696:function(t,e,n){var r=n(9405),i=n(2762),a=n(1888),o=n(6640);function s(t,e,n,r,i){this.plot=t,this.offsetBuffer=e,this.pickBuffer=n,this.shader=r,this.pickShader=i,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}t.exports=function(t,e){var n=t.gl,a=i(n),l=i(n),c=r(n,o.pointVertex,o.pointFragment),u=r(n,o.pickVertex,o.pickFragment),h=new s(t,a,l,c,u);return h.update(e),t.addObject(h),h};var l,c,u=s.prototype;u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(t){var e;function n(e,n){return e in t?t[e]:n}t=t||{},this.sizeMin=n("sizeMin",.5),this.sizeMax=n("sizeMax",20),this.color=n("color",[1,0,0,1]).slice(),this.areaRatio=n("areaRatio",1),this.borderColor=n("borderColor",[0,0,0,1]).slice(),this.blend=n("blend",!1);var r=t.positions.length>>>1,i=t.positions instanceof Float32Array,o=t.idToIndex instanceof Int32Array&&t.idToIndex.length>=r,s=t.positions,l=i?s:a.mallocFloat32(s.length),c=o?t.idToIndex:a.mallocInt32(r);if(i||l.set(s),!o)for(l.set(s),e=0;e<r;e++)c[e]=e;this.points=s,this.offsetBuffer.update(l),this.pickBuffer.update(c),i||a.free(l),o||a.free(c),this.pointCount=r,this.pickOffset=0},u.unifiedDraw=(l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0],function(t){var e=void 0!==t,n=e?this.pickShader:this.shader,r=this.plot.gl,i=this.plot.dataBox;if(0===this.pointCount)return t;var a=i[2]-i[0],o=i[3]-i[1],s=function(t,e){var n,r=0,i=t.length>>>1;for(n=0;n<i;n++){var a=t[2*n],o=t[2*n+1];a>=e[0]&&a<=e[2]&&o>=e[1]&&o<=e[3]&&r++}return r}(this.points,i),u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(s,.33333)));l[0]=2/a,l[4]=2/o,l[6]=-2*i[0]/a-1,l[7]=-2*i[1]/o-1,this.offsetBuffer.bind(),n.bind(),n.attributes.position.pointer(),n.uniforms.matrix=l,n.uniforms.color=this.color,n.uniforms.borderColor=this.borderColor,n.uniforms.pointCloud=u<5,n.uniforms.pointSize=u,n.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),e&&(c[0]=255&t,c[1]=t>>8&255,c[2]=t>>16&255,c[3]=t>>24&255,this.pickBuffer.bind(),n.attributes.pickId.pointer(r.UNSIGNED_BYTE),n.uniforms.pickOffset=c,this.pickOffset=t);var h=r.getParameter(r.BLEND),d=r.getParameter(r.DITHER);return h&&!this.blend&&r.disable(r.BLEND),d&&r.disable(r.DITHER),r.drawArrays(r.POINTS,0,this.pointCount),h&&!this.blend&&r.enable(r.BLEND),d&&r.enable(r.DITHER),t+this.pointCount}),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(t,e,n){var r=this.pickOffset,i=this.pointCount;if(n<r||n>=r+i)return null;var a=n-r,o=this.points;return{object:this,pointId:a,dataCoord:[o[2*a],o[2*a+1]]}}},783:function(t){t.exports=function(t,e,n,r){var i,a,o,s,l,c=e[0],u=e[1],h=e[2],d=e[3],g=n[0],f=n[1],p=n[2],v=n[3];(a=c*g+u*f+h*p+d*v)<0&&(a=-a,g=-g,f=-f,p=-p,v=-v);1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,l=Math.sin(r*i)/o):(s=1-r,l=r);return t[0]=s*c+l*g,t[1]=s*u+l*f,t[2]=s*h+l*p,t[3]=s*d+l*v,t}},5964:function(t){t.exports=function(t){return t||0===t?t.toString():""}},9366:function(t,e,n){var r=n(4359);t.exports=function(t,e,n){var a=[e.style,e.weight,e.variant,e.family].join("_"),o=i[a];o||(o=i[a]={});if(t in o)return o[t];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e.family,fontStyle:e.style,fontWeight:e.weight,fontVariant:e.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},l=r(t,s);s.triangles=!1;var c,u,h=r(t,s);if(n&&1!==n){for(c=0;c<l.positions.length;++c)for(u=0;u<l.positions[c].length;++u)l.positions[c][u]/=n;for(c=0;c<h.positions.length;++c)for(u=0;u<h.positions[c].length;++u)h.positions[c][u]/=n}var d=[[1/0,1/0],[-1/0,-1/0]],g=h.positions.length;for(c=0;c<g;++c){var f=h.positions[c];for(u=0;u<2;++u)d[0][u]=Math.min(d[0][u],f[u]),d[1][u]=Math.max(d[1][u],f[u])}return o[t]=[l,h,d]};var i={}},1283:function(t,e,n){var r=n(9405),i=n(3236),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],h={vertex:a,fragment:l,attributes:u},d={vertex:o,fragment:l,attributes:u},g={vertex:s,fragment:l,attributes:u},f={vertex:a,fragment:c,attributes:u},p={vertex:o,fragment:c,attributes:u},v={vertex:s,fragment:c,attributes:u};function m(t,e){var n=r(t,e),i=n.attributes;return i.position.location=0,i.color.location=1,i.glyph.location=2,i.id.location=3,n}e.createPerspective=function(t){return m(t,h)},e.createOrtho=function(t){return m(t,d)},e.createProject=function(t){return m(t,g)},e.createPickPerspective=function(t){return m(t,f)},e.createPickOrtho=function(t){return m(t,p)},e.createPickProject=function(t){return m(t,v)}},8418:function(t,e,n){var r=n(5219),i=n(2762),a=n(8116),o=n(1888),s=n(6760),l=n(1283),c=n(9366),u=n(5964),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];return t[0]=e[0]*n+e[4]*r+e[8]*i+e[12]*a,t[1]=e[1]*n+e[5]*r+e[9]*i+e[13]*a,t[2]=e[2]*n+e[6]*r+e[10]*i+e[14]*a,t[3]=e[3]*n+e[7]*r+e[11]*i+e[15]*a,t}function g(t,e,n,r){return d(r,r),d(r,r),d(r,r)}function f(t,e){this.index=t,this.dataCoordinate=this.position=e}function p(t){return!0===t||t>1?1:t}function v(t,e,n,r,i,a,o,s,l,c,u,h){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=n,this.projectShader=r,this.pointBuffer=i,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=c,this.pickOrthoShader=u,this.pickProjectShader=h,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=function(t){var e=t.gl,n=l.createPerspective(e),r=l.createOrtho(e),o=l.createProject(e),s=l.createPickPerspective(e),c=l.createPickOrtho(e),u=l.createPickProject(e),h=i(e),d=i(e),g=i(e),f=i(e),p=a(e,[{buffer:h,size:3,type:e.FLOAT},{buffer:d,size:4,type:e.FLOAT},{buffer:g,size:2,type:e.FLOAT},{buffer:f,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),m=new v(e,n,r,o,h,d,g,f,p,s,c,u);return m.update(t),m};var m=v.prototype;m.pickSlots=1,m.setPickBase=function(t){this.pickId=t},m.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},m.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var y=[0,0],b=[0,0,0],x=[0,0,0],B=[0,0,0,1],I=[0,0,0,1],F=h.slice(),Q=[0,0,0],C=[[0,0,0],[0,0,0]];function w(t){return t[0]=t[1]=t[2]=0,t}function U(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function A(t,e,n,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[n]=r,t}function S(t,e,n,r){var i,a=e.axesProject,o=e.gl,l=t.uniforms,c=n.model||h,u=n.view||h,d=n.projection||h,f=e.axesBounds,p=function(t){for(var e=C,n=0;n<2;++n)for(var r=0;r<3;++r)e[n][r]=Math.max(Math.min(t[n][r],1e8),-1e8);return e}(e.clipBounds);i=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],y[0]=2/o.drawingBufferWidth,y[1]=2/o.drawingBufferHeight,t.bind(),l.view=u,l.projection=d,l.screenSize=y,l.highlightId=e.highlightId,l.highlightScale=e.highlightScale,l.clipBounds=p,l.pickGroup=e.pickId/255,l.pixelRatio=r;for(var v=0;v<3;++v)if(a[v]){l.scale=e.projectScale[v],l.opacity=e.projectOpacity[v];for(var m=F,S=0;S<16;++S)m[S]=0;for(S=0;S<4;++S)m[5*S]=1;m[5*v]=0,i[v]<0?m[12+v]=f[0][v]:m[12+v]=f[1][v],s(m,c,m),l.model=m;var L=(v+1)%3,k=(v+2)%3,G=w(b),_=w(x);G[L]=1,_[k]=1;var R=g(0,0,0,U(B,G)),E=g(0,0,0,U(I,_));if(Math.abs(R[1])>Math.abs(E[1])){var T=R;R=E,E=T,T=G,G=_,_=T;var M=L;L=k,k=M}R[0]<0&&(G[L]=-1),E[1]>0&&(_[k]=-1);var N=0,D=0;for(S=0;S<4;++S)N+=Math.pow(c[4*L+S],2),D+=Math.pow(c[4*k+S],2);G[L]/=Math.sqrt(N),_[k]/=Math.sqrt(D),l.axes[0]=G,l.axes[1]=_,l.fragClipBounds[0]=A(Q,p[0],v,-1e8),l.fragClipBounds[1]=A(Q,p[1],v,1e8),e.vao.bind(),e.vao.draw(o.TRIANGLES,e.vertexCount),e.lineWidth>0&&(o.lineWidth(e.lineWidth*r),e.vao.draw(o.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}var L=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function k(t,e,n,r,i,a,o){var s=n.gl;if((a===n.projectHasAlpha||o)&&S(e,n,r,i),a===n.hasAlpha||o){t.bind();var l=t.uniforms;l.model=r.model||h,l.view=r.view||h,l.projection=r.projection||h,y[0]=2/s.drawingBufferWidth,y[1]=2/s.drawingBufferHeight,l.screenSize=y,l.highlightId=n.highlightId,l.highlightScale=n.highlightScale,l.fragClipBounds=L,l.clipBounds=n.axes.bounds,l.opacity=n.opacity,l.pickGroup=n.pickId/255,l.pixelRatio=i,n.vao.bind(),n.vao.draw(s.TRIANGLES,n.vertexCount),n.lineWidth>0&&(s.lineWidth(n.lineWidth*i),n.vao.draw(s.LINES,n.lineVertexCount,n.vertexCount)),n.vao.unbind()}}function G(t,e,n,i){var a;a=Array.isArray(t)?e<t.length?t[e]:void 0:t,a=u(a);var o=!0;r(a)&&(a="▼",o=!1),n||(n={});var s=n.family;Array.isArray(s)&&(s=s[e]),s||(s="normal");var l=n.weight;Array.isArray(l)&&(l=l[e]),l||(l="normal");var h=n.style;Array.isArray(h)&&(h=h[e]),h||(h="normal");var d=n.variant;Array.isArray(d)&&(d=d[e]),d||(d="normal");var g=c(a,{family:s,weight:l,style:h,variant:d},i);return{mesh:(g=c(a,n,i))[0],lines:g[1],bounds:g[2],visible:o}}m.draw=function(t){k(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},m.drawTransparent=function(t){k(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},m.drawPick=function(t){k(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},m.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var n=this.points[e],r=this._selectResult;r.index=e;for(var i=0;i<3;++i)r.position[i]=r.dataCoordinate[i]=n[i];return r},m.highlight=function(t){if(t){var e=t.index,n=255&e,r=e>>8&255,i=e>>16&255;this.highlightId=[n/255,r/255,i/255,0]}else this.highlightId=[1,1,1,1]},m.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t)if(Array.isArray(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}if("projectScale"in t)if(Array.isArray(t.projectScale))this.projectScale=t.projectScale.slice();else{var n=+t.projectScale;this.projectScale=[n,n,n]}if(this.projectHasAlpha=!1,"projectOpacity"in t){if(Array.isArray(t.projectOpacity))this.projectOpacity=t.projectOpacity.slice();else{n=+t.projectOpacity;this.projectOpacity=[n,n,n]}for(var r=0;r<3;++r)this.projectOpacity[r]=p(this.projectOpacity[r]),this.projectOpacity[r]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=p(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var i,a,s=t.position,l={family:t.font||"normal",style:t.fontStyle||"normal",weight:t.fontWeight||"normal",variant:t.fontVariant||"normal"},c=t.alignment||[0,0];if(2===c.length)i=c[0],a=c[1];else{i=[],a=[];for(r=0;r<c.length;++r)i[r]=c[r][0],a[r]=c[r][1]}var u=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0],d=t.glyph,g=t.color,f=t.size,v=t.angle,m=t.lineColor,y=-1,b=0,x=0,B=0;if(s.length){B=s.length;t:for(r=0;r<B;++r){for(var I=s[r],F=0;F<3;++F)if(isNaN(I[F])||!isFinite(I[F]))continue t;var Q=(D=G(d,r,l,this.pixelRatio)).mesh,C=D.lines,w=D.bounds;b+=3*Q.cells.length,x+=2*C.edges.length}}var U=b+x,A=o.mallocFloat(3*U),S=o.mallocFloat(4*U),L=o.mallocFloat(2*U),k=o.mallocUint32(U);if(U>0){var _=0,R=b,E=[0,0,0,1],T=[0,0,0,1],M=Array.isArray(g)&&Array.isArray(g[0]),N=Array.isArray(m)&&Array.isArray(m[0]);t:for(r=0;r<B;++r){y+=1;for(I=s[r],F=0;F<3;++F){if(isNaN(I[F])||!isFinite(I[F]))continue t;h[F]=Math.max(h[F],I[F]),u[F]=Math.min(u[F],I[F])}Q=(D=G(d,r,l,this.pixelRatio)).mesh,C=D.lines,w=D.bounds;var D,X=D.visible;if(X)if(Array.isArray(g)){if(3===(Z=M?r<g.length?g[r]:[0,0,0,0]:g).length){for(F=0;F<3;++F)E[F]=Z[F];E[3]=1}else if(4===Z.length){for(F=0;F<4;++F)E[F]=Z[F];!this.hasAlpha&&Z[3]<1&&(this.hasAlpha=!0)}}else E[0]=E[1]=E[2]=0,E[3]=1;else E=[1,1,1,0];if(X)if(Array.isArray(m)){var Z;if(3===(Z=N?r<m.length?m[r]:[0,0,0,0]:m).length){for(F=0;F<3;++F)T[F]=Z[F];T[F]=1}else if(4===Z.length){for(F=0;F<4;++F)T[F]=Z[F];!this.hasAlpha&&Z[3]<1&&(this.hasAlpha=!0)}}else T[0]=T[1]=T[2]=0,T[3]=1;else T=[1,1,1,0];var V=.5;X?Array.isArray(f)?V=r<f.length?+f[r]:12:f?V=+f:this.useOrtho&&(V=12):V=0;var H=0;Array.isArray(v)?H=r<v.length?+v[r]:0:v&&(H=+v);var W=Math.cos(H),Y=Math.sin(H);for(I=s[r],F=0;F<3;++F)h[F]=Math.max(h[F],I[F]),u[F]=Math.min(u[F],I[F]);var z=i,O=a;z=0;Array.isArray(i)?z=r<i.length?i[r]:0:i&&(z=i);O=0;Array.isArray(a)?O=r<a.length?a[r]:0:a&&(O=a);var J=[z*=z>0?1-w[0][0]:z<0?1+w[1][0]:1,O*=O>0?1-w[0][1]:O<0?1+w[1][1]:1],P=Q.cells||[],j=Q.positions||[];for(F=0;F<P.length;++F)for(var K=P[F],q=0;q<3;++q){for(var $=0;$<3;++$)A[3*_+$]=I[$];for($=0;$<4;++$)S[4*_+$]=E[$];k[_]=y;var tt=j[K[q]];L[2*_]=V*(W*tt[0]-Y*tt[1]+J[0]),L[2*_+1]=V*(Y*tt[0]+W*tt[1]+J[1]),_+=1}for(P=C.edges,j=C.positions,F=0;F<P.length;++F)for(K=P[F],q=0;q<2;++q){for($=0;$<3;++$)A[3*R+$]=I[$];for($=0;$<4;++$)S[4*R+$]=T[$];k[R]=y;tt=j[K[q]];L[2*R]=V*(W*tt[0]-Y*tt[1]+J[0]),L[2*R+1]=V*(Y*tt[0]+W*tt[1]+J[1]),R+=1}}}this.bounds=[u,h],this.points=s,this.pointCount=s.length,this.vertexCount=b,this.lineVertexCount=x,this.pointBuffer.update(A),this.colorBuffer.update(S),this.glyphBuffer.update(L),this.idBuffer.update(k),o.free(A),o.free(S),o.free(L),o.free(k)},m.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(t,e,n){var r=n(3236);e.boxVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),e.boxFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},3161:function(t,e,n){var r=n(9405),i=n(2762),a=n(4298);function o(t,e,n){this.plot=t,this.boxBuffer=e,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}t.exports=function(t,e){var n=t.gl,s=i(n,[0,0,0,1,1,0,1,1]),l=r(n,a.boxVertex,a.boxFragment),c=new o(t,s,l);return c.update(e),t.addOverlay(c),c};var s=o.prototype;s.draw=function(){if(this.enabled){var t=this.plot,e=this.selectBox,n=this.borderWidth;this.innerFill;var r=this.innerColor;this.outerFill;var i=this.outerColor,a=this.borderColor,o=t.box,s=t.screenBox,l=t.dataBox,c=t.viewBox,u=t.pixelRatio,h=(e[0]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],d=(e[1]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1],g=(e[2]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],f=(e[3]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1];if(h=Math.max(h,c[0]),d=Math.max(d,c[1]),g=Math.min(g,c[2]),f=Math.min(f,c[3]),!(g<h||f<d)){o.bind();var p=s[2]-s[0],v=s[3]-s[1];if(this.outerFill&&(o.drawBox(0,0,p,d,i),o.drawBox(0,d,h,f,i),o.drawBox(0,f,p,v,i),o.drawBox(g,d,p,f,i)),this.innerFill&&o.drawBox(h,d,g,f,r),n>0){var m=n*u;o.drawBox(h-m,d-m,g+m,d+m,a),o.drawBox(h-m,f-m,g+m,f+m,a),o.drawBox(h-m,d-m,h+m,f+m,a),o.drawBox(g-m,d-m,g+m,f+m,a)}}}},s.update=function(t){t=t||{},this.innerFill=!!t.innerFill,this.outerFill=!!t.outerFill,this.innerColor=(t.innerColor||[0,0,0,.5]).slice(),this.outerColor=(t.outerColor||[0,0,0,.5]).slice(),this.borderColor=(t.borderColor||[0,0,0,1]).slice(),this.borderWidth=t.borderWidth||0,this.selectBox=(t.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(t,e,n){t.exports=function(t,e){var n=e[0],a=e[1],o=r(t,n,a,{}),s=i.mallocUint8(n*a*4);return new l(t,o,s)};var r=n(2260),i=n(1888),a=n(9618),o=n(8828).nextPow2;function s(t,e,n,r,i){this.coord=[t,e],this.id=n,this.value=r,this.distance=i}function l(t,e,n){this.gl=t,this.fbo=e,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){r.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,r.buffer),r._readTimeout=null)}}var c=l.prototype;Object.defineProperty(c,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],n=this.fbo.shape[1];if(n*e*4>this.buffer.length){i.free(this.buffer);for(var r=this.buffer=i.mallocUint8(o(n*e*4)),a=0;a<n*e*4;++a)r[a]=255}return t}}}),c.begin=function(){var t=this.gl;this.shape,t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},c.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},c.query=function(t,e,n){if(!this.gl)return null;var r=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof n&&(n=1);var i=0|Math.min(Math.max(t-n,0),r[0]),o=0|Math.min(Math.max(t+n,0),r[0]),l=0|Math.min(Math.max(e-n,0),r[1]),c=0|Math.min(Math.max(e+n,0),r[1]);if(o<=i||c<=l)return null;var u=[o-i,c-l],h=a(this.buffer,[u[0],u[1],4],[4,4*r[0],1],4*(i+r[0]*l)),d=function(t,e,n){for(var r=1e8,i=-1,a=-1,o=t.shape[0],s=t.shape[1],l=0;l<o;l++)for(var c=0;c<s;c++){var u=t.get(l,c,0),h=t.get(l,c,1),d=t.get(l,c,2),g=t.get(l,c,3);if(u<255||h<255||d<255||g<255){var f=e-l,p=n-c,v=f*f+p*p;v<r&&(r=v,i=l,a=c)}}return[i,a,r]}(h.hi(u[0],u[1],1),n,n),g=d[0],f=d[1];return g<0||Math.pow(this.radius,2)<d[2]?null:new s(g+i|0,f+l|0,h.get(g,f,0),[h.get(g,f,1),h.get(g,f,2),h.get(g,f,3)],Math.sqrt(d[2]))},c.dispose=function(){this.gl&&(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(t,e,n){var r=n(3327),i=n(8731),a=n(216),o=n(5091),s=n(2145),l=n(8866);function c(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=c.prototype;function h(t,e){return t.name<e.name?-1:1}u.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(e>n)for(t=n;t<e;t++)this.gl.enableVertexAttribArray(t);else if(n>e)for(t=e;t<n;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},u.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(t,e,n,c){if(!e||1===arguments.length){var u=t;t=u.vertex,e=u.fragment,n=u.uniforms,c=u.attributes}var d=this,g=d.gl,f=d._vref;d._vref=o.shader(g,g.VERTEX_SHADER,t),f&&f.dispose(),d.vertShader=d._vref.shader;var p=this._fref;if(d._fref=o.shader(g,g.FRAGMENT_SHADER,e),p&&p.dispose(),d.fragShader=d._fref.shader,!n||!c){var v=g.createProgram();if(g.attachShader(v,d.fragShader),g.attachShader(v,d.vertShader),g.linkProgram(v),!g.getProgramParameter(v,g.LINK_STATUS)){var m=g.getProgramInfoLog(v);throw new l(m,"Error linking program:"+m)}n=n||s.uniforms(g,v),c=c||s.attributes(g,v),g.deleteProgram(v)}(c=c.slice()).sort(h);var y,b=[],x=[],B=[];for(y=0;y<c.length;++y){var I=c[y];if(I.type.indexOf("mat")>=0){for(var F=0|I.type.charAt(I.type.length-1),Q=new Array(F),C=0;C<F;++C)Q[C]=B.length,x.push(I.name+"["+C+"]"),"number"==typeof I.location?B.push(I.location+C):Array.isArray(I.location)&&I.location.length===F&&"number"==typeof I.location[C]?B.push(0|I.location[C]):B.push(-1);b.push({name:I.name,type:I.type,locations:Q})}else b.push({name:I.name,type:I.type,locations:[B.length]}),x.push(I.name),"number"==typeof I.location?B.push(0|I.location):B.push(-1)}var w=0;for(y=0;y<B.length;++y)if(B[y]<0){for(;B.indexOf(w)>=0;)w+=1;B[y]=w}var U=new Array(n.length);function A(){d.program=o.program(g,d._vref,d._fref,x,B);for(var t=0;t<n.length;++t)U[t]=g.getUniformLocation(d.program,n[t].name)}A(),d._relink=A,d.types={uniforms:a(n),attributes:a(c)},d.attributes=i(g,d,b,B),Object.defineProperty(d,"uniforms",r(g,d,n,U))},t.exports=function(t,e,n,r,i){var a=new c(t);return a.update(e,n,r,i),a}},8866:function(t){function e(t,e,n){this.shortMessage=e||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(n?"\n"+n:""),this.stack=(new Error).stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,t.exports=e},8731:function(t,e,n){t.exports=function(t,e,n,i){for(var a={},o=0,c=n.length;o<c;++o){var u=n[o],h=u.name,d=u.type,g=u.locations;switch(d){case"bool":case"int":case"float":s(t,e,g[0],i,1,a,h);break;default:if(d.indexOf("vec")>=0){if((f=d.charCodeAt(d.length-1)-48)<2||f>4)throw new r("","Invalid data type for attribute "+h+": "+d);s(t,e,g[0],i,f,a,h)}else{if(!(d.indexOf("mat")>=0))throw new r("","Unknown data type for attribute "+h+": "+d);var f;if((f=d.charCodeAt(d.length-1)-48)<2||f>4)throw new r("","Invalid data type for attribute "+h+": "+d);l(t,e,g,i,f,a,h)}}}return a};var r=n(8866);function i(t,e,n,r,i,a){this._gl=t,this._wrapper=e,this._index=n,this._locations=r,this._dimension=i,this._constFunc=a}var a=i.prototype;a.pointer=function(t,e,n,r){var i=this,a=i._gl,o=i._locations[i._index];a.vertexAttribPointer(o,i._dimension,t||a.FLOAT,!!e,n||0,r||0),a.enableVertexAttribArray(o)},a.set=function(t,e,n,r){return this._constFunc(this._locations[this._index],t,e,n,r)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});var o=[function(t,e,n){return void 0===n.length?t.vertexAttrib1f(e,n):t.vertexAttrib1fv(e,n)},function(t,e,n,r){return void 0===n.length?t.vertexAttrib2f(e,n,r):t.vertexAttrib2fv(e,n)},function(t,e,n,r,i){return void 0===n.length?t.vertexAttrib3f(e,n,r,i):t.vertexAttrib3fv(e,n)},function(t,e,n,r,i,a){return void 0===n.length?t.vertexAttrib4f(e,n,r,i,a):t.vertexAttrib4fv(e,n)}];function s(t,e,n,r,a,s,l){var c=o[a],u=new i(t,e,n,r,a,c);Object.defineProperty(s,l,{set:function(e){return t.disableVertexAttribArray(r[n]),c(t,r[n],e),e},get:function(){return u},enumerable:!0})}function l(t,e,n,r,i,a,o){for(var l=new Array(i),c=new Array(i),u=0;u<i;++u)s(t,e,n[u],r,i,l,u),c[u]=l[u];Object.defineProperty(l,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<i;++e)c[e].location=t[e];else for(e=0;e<i;++e)c[e].location=t+e;return t},get:function(){for(var t=new Array(i),e=0;e<i;++e)t[e]=r[n[e]];return t},enumerable:!0}),l.pointer=function(e,a,o,s){e=e||t.FLOAT,a=!!a,o=o||i*i,s=s||0;for(var l=0;l<i;++l){var c=r[n[l]];t.vertexAttribPointer(c,i,e,a,o,s+l*i),t.enableVertexAttribArray(c)}};var h=new Array(i),d=t["vertexAttrib"+i+"fv"];Object.defineProperty(a,o,{set:function(e){for(var a=0;a<i;++a){var o=r[n[a]];if(t.disableVertexAttribArray(o),Array.isArray(e[0]))d.call(t,o,e[a]);else{for(var s=0;s<i;++s)h[s]=e[i*a+s];d.call(t,o,h)}}return e},get:function(){return l},enumerable:!0})}},3327:function(t,e,n){var r=n(216),i=n(8866);function a(t){return function(){return t}}function o(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=e;return n}t.exports=function(t,e,n,s){function l(e){return function(r){for(var a=c("",e),o=0;o<a.length;++o){var l=a[o],u=l[0],h=l[1];if(s[h]){var d=r;if("string"==typeof u&&(0===u.indexOf(".")||0===u.indexOf("["))){var g=u;if(0===u.indexOf(".")&&(g=u.slice(1)),g.indexOf("]")===g.length-1){var f=g.indexOf("["),p=g.slice(0,f),v=g.slice(f+1,g.length-1);d=p?r[p][v]:r[v]}else d=r[g]}var m,y=n[h].type;switch(y){case"bool":case"int":case"sampler2D":case"samplerCube":t.uniform1i(s[h],d);break;case"float":t.uniform1f(s[h],d);break;default:var b=y.indexOf("vec");if(!(0<=b&&b<=1&&y.length===4+b)){if(0===y.indexOf("mat")&&4===y.length){if((m=y.charCodeAt(y.length-1)-48)<2||m>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+y);t["uniformMatrix"+m+"fv"](s[h],!1,d);break}throw new i("","Unknown uniform data type for "+name+": "+y)}if((m=y.charCodeAt(y.length-1)-48)<2||m>4)throw new i("","Invalid data type");switch(y.charAt(0)){case"b":case"i":t["uniform"+m+"iv"](s[h],d);break;case"v":t["uniform"+m+"fv"](s[h],d);break;default:throw new i("","Unrecognized data type for vector "+name+": "+y)}}}}}}function c(t,e){if("object"!=typeof e)return[[t,e]];var n=[];for(var r in e){var i=e[r],a=t;parseInt(r)+""===r?a+="["+r+"]":a+="."+r,"object"==typeof i?n.push.apply(n,c(a,i)):n.push([a,i])}return n}function u(t,e,r){if("object"==typeof r){var c=h(r);Object.defineProperty(t,e,{get:a(c),set:l(r),enumerable:!0,configurable:!1})}else s[r]?Object.defineProperty(t,e,{get:(u=r,function(t,e,n){return t.getUniform(e.program,n[u])}),set:l(r),enumerable:!0,configurable:!1}):t[e]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){if((n=t.charCodeAt(t.length-1)-48)<2||n>4)throw new i("","Invalid data type");return"b"===t.charAt(0)?o(n,!1):o(n,0)}if(0===t.indexOf("mat")&&4===t.length){var n;if((n=t.charCodeAt(t.length-1)-48)<2||n>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+t);return o(n*n,0)}throw new i("","Unknown uniform data type for "+name+": "+t)}}(n[r].type);var u}function h(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var n=0;n<t.length;++n)u(e,n,t[n])}else for(var r in e={},t)u(e,r,t[r]);return e}var d=r(n,!0);return{get:a(h(d)),set:l(d),enumerable:!0,configurable:!0}}},216:function(t){t.exports=function(t,e){for(var n={},r=0;r<t.length;++r)for(var i=t[r].name.split("."),a=n,o=0;o<i.length;++o){var s=i[o].split("[");if(s.length>1){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var l=1;l<s.length;++l){var c=parseInt(s[l]);l<s.length-1||o<i.length-1?(c in a||(l<s.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=e?r:t[r].type}}else o<i.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=e?r:t[r].type}return n}},2145:function(t,e){e.uniforms=function(t,e){for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=[],a=0;a<n;++a){var o=t.getActiveUniform(e,a);if(o){var s=i(t,o.type);if(o.size>1)for(var l=0;l<o.size;++l)r.push({name:o.name.replace("[0]","["+l+"]"),type:s});else r.push({name:o.name,type:s})}}return r},e.attributes=function(t,e){for(var n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=[],a=0;a<n;++a){var o=t.getActiveAttrib(e,a);o&&r.push({name:o.name,type:i(t,o.type)})}return r};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function i(t,e){if(!r){var i=Object.keys(n);r={};for(var a=0;a<i.length;++a){var o=i[a];r[t[o]]=n[o]}}return r[e]}},5091:function(t,e,n){e.shader=function(t,e,n){return u(t).getShaderReference(e,n)},e.program=function(t,e,n,r,i){return u(t).getProgram(e,n,r,i)};var r=n(8866),i=n(2992),a=new("undefined"==typeof WeakMap?n(606):WeakMap),o=0;function s(t,e,n,r,i,a,o){this.id=t,this.src=e,this.type=n,this.shader=r,this.count=a,this.programs=[],this.cache=o}function l(t){this.gl=t,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,n=this.programs,r=0,i=n.length;r<i;++r){var a=t.programs[n[r]];a&&(delete t.programs[r],e.deleteProgram(a))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var c=l.prototype;function u(t){var e=a.get(t);return e||(e=new l(t),a.set(t,e)),e}c.getShaderReference=function(t,e){var n=this.gl,a=this.shaders[t===n.FRAGMENT_SHADER|0],l=a[e];if(l&&n.isShader(l.shader))l.count+=1;else{var c=function(t,e,n){var a=t.createShader(e);if(t.shaderSource(a,n),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(a);try{var s=i(o,n,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new r(o,"Error compiling shader:\n"+o)}throw new r(o,s.short,s.long)}return a}(n,t,e);l=a[e]=new s(o++,e,t,c,[],1,this)}return l},c.getProgram=function(t,e,n,i){var a=[t.id,e.id,n.join(":"),i.join(":")].join("@"),o=this.programs[a];return o&&this.gl.isProgram(o)||(this.programs[a]=o=function(t,e,n,i,a){var o=t.createProgram();t.attachShader(o,e),t.attachShader(o,n);for(var s=0;s<i.length;++s)t.bindAttribLocation(o,a[s],i[s]);if(t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS)){var l=t.getProgramInfoLog(o);throw new r(l,"Error linking program: "+l)}return o}(this.gl,t.shader,e.shader,n,i),t.programs.push(a),e.programs.push(a)),o}},4098:function(t){function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}t.exports=function(t,n){var r=new e(t);return r.update(n),t.addOverlay(r),r};var n=e.prototype;n.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map((function(t){return t.slice()})),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var t=this.enable,e=this.width,n=this.color,r=this.center,i=this.plot,a=i.line,o=i.dataBox,s=i.viewBox;if(a.bind(),o[0]<=r[0]&&r[0]<=o[2]&&o[1]<=r[1]&&r[1]<=o[3]){var l=s[0]+(r[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]),c=s[1]+(r[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);t[0]&&a.drawLine(l,c,s[0],c,e[0],n[0]),t[1]&&a.drawLine(l,c,l,s[1],e[1],n[1]),t[2]&&a.drawLine(l,c,s[2],c,e[2],n[2]),t[3]&&a.drawLine(l,c,l,s[3],e[3],n[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},1493:function(t,e,n){var r=n(3236),i=n(9405),a=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);t.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(t,e,n){var r=n(2762),i=n(8116),a=n(1493);t.exports=function(t,e){var n=[];function o(t,e,r,i,a,o){var s=[t,e,r,0,0,0,1];s[i+3]=1,s[i]=a,n.push.apply(n,s),s[6]=-1,n.push.apply(n,s),s[i]=o,n.push.apply(n,s),n.push.apply(n,s),s[6]=1,n.push.apply(n,s),s[i]=a,n.push.apply(n,s)}o(0,0,0,0,0,1),o(0,0,0,1,0,1),o(0,0,0,2,0,1),o(1,0,0,1,-1,1),o(1,0,0,2,-1,1),o(0,1,0,0,-1,1),o(0,1,0,2,-1,1),o(0,0,1,0,-1,1),o(0,0,1,1,-1,1);var l=r(t,n),c=i(t,[{type:t.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:l,size:1,offset:24,stride:28}]),u=a(t);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var h=new s(t,l,c,u);return h.update(e),h};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,n,r){this.gl=t,this.buffer=e,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=s.prototype,c=[0,0,0],u=[0,0,0],h=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(t){},l.draw=function(t){var e=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var i,a=t.model||o,s=t.view||o,l=t.projection||o;this.axes&&(i=this.axes.lastCubeProps.axis);for(var d=c,g=u,f=0;f<3;++f)i&&i[f]<0?(d[f]=this.bounds[0][f],g[f]=this.bounds[1][f]):(d[f]=this.bounds[1][f],g[f]=this.bounds[0][f]);h[0]=e.drawingBufferWidth,h[1]=e.drawingBufferHeight,r.uniforms.model=a,r.uniforms.view=s,r.uniforms.projection=l,r.uniforms.coordinates=[this.position,d,g],r.uniforms.colors=this.colors,r.uniforms.screenShape=h;for(f=0;f<3;++f)r.uniforms.lineWidth=this.lineWidth[f]*this.pixelRatio,this.enabled[f]&&(n.draw(e.TRIANGLES,6,6*f),this.drawSides[f]&&n.draw(e.TRIANGLES,12,18+12*f));n.unbind()},l.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(t,e,n){var r=n(3236),i=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);e.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},e.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(t,e,n){var r=n(2931),i=n(9970),a=["xyz","xzy","yxz","yzx","zxy","zyx"],o=function(t,e,n,a){for(var o=0,s=0;s<t.length;s++)for(var l=t[s].velocities,c=0;c<l.length;c++)o=Math.max(o,r.length(l[c]));var u=t.map((function(t){return function(t,e,n,a){for(var o=t.points,s=t.velocities,l=t.divergences,c=[],u=[],h=[],d=[],g=[],f=[],p=0,v=0,m=i.create(),y=i.create(),b=0;b<o.length;b++){var x=o[b],B=s[b],I=l[b];0===e&&(I=.05*n),v=r.length(B)/a,m=i.create(),r.copy(m,B),m[3]=I;for(var F=0;F<8;F++)g[F]=[x[0],x[1],x[2],F];if(d.length>0)for(F=0;F<8;F++){var Q=(F+1)%8;c.push(d[F],g[F],g[Q],g[Q],d[Q],d[F]),h.push(y,m,m,m,y,y),f.push(p,v,v,v,p,p);var C=c.length;u.push([C-6,C-5,C-4],[C-3,C-2,C-1])}var w=d;d=g,g=w;var U=y;y=m,m=U;var A=p;p=v,v=A}return{positions:c,cells:u,vectors:h,vertexIntensity:f}}(t,n,a,o)})),h=[],d=[],g=[],f=[];for(s=0;s<u.length;s++){var p=u[s],v=h.length;h=h.concat(p.positions),g=g.concat(p.vectors),f=f.concat(p.vertexIntensity);for(c=0;c<p.cells.length;c++){var m=p.cells[c],y=[];d.push(y);for(var b=0;b<m.length;b++)y.push(m[b]+v)}}return{positions:h,cells:d,vectors:g,vertexIntensity:f,colormap:e}},s=function(t,e){var n,r=t.length;for(n=0;n<r;n++){var i=t[n];if(i===e)return n;if(i>e)return n-1}return n},l=function(t,e,n){return t<e?e:t>n?n:t},c=function(t){var e=1/0;t.sort((function(t,e){return t-e}));for(var n=t.length,r=1;r<n;r++){var i=Math.abs(t[r]-t[r-1]);i<e&&(e=i)}return e};t.exports=function(t,e){var n=t.startingPositions,i=t.maxLength||1e3,u=t.tubeSize||1,h=t.absoluteTubeSize,d=t.gridFill||"+x+y+z",g={};-1!==d.indexOf("-x")&&(g.reversedX=!0),-1!==d.indexOf("-y")&&(g.reversedY=!0),-1!==d.indexOf("-z")&&(g.reversedZ=!0),g.filled=a.indexOf(d.replace(/-/g,"").replace(/\+/g,""));var f=t.getVelocity||function(e){return function(t,e,n){var i=e.vectors,a=e.meshgrid,o=t[0],c=t[1],u=t[2],h=a[0].length,d=a[1].length,g=a[2].length,f=s(a[0],o),p=s(a[1],c),v=s(a[2],u),m=f+1,y=p+1,b=v+1;if(f=l(f,0,h-1),m=l(m,0,h-1),p=l(p,0,d-1),y=l(y,0,d-1),v=l(v,0,g-1),b=l(b,0,g-1),f<0||p<0||v<0||m>h-1||y>d-1||b>g-1)return r.create();var x,B,I,F,Q,C,w=a[0][f],U=a[0][m],A=a[1][p],S=a[1][y],L=a[2][v],k=(o-w)/(U-w),G=(c-A)/(S-A),_=(u-L)/(a[2][b]-L);switch(isFinite(k)||(k=.5),isFinite(G)||(G=.5),isFinite(_)||(_=.5),n.reversedX&&(f=h-1-f,m=h-1-m),n.reversedY&&(p=d-1-p,y=d-1-y),n.reversedZ&&(v=g-1-v,b=g-1-b),n.filled){case 5:Q=v,C=b,I=p*g,F=y*g,x=f*g*d,B=m*g*d;break;case 4:Q=v,C=b,x=f*g,B=m*g,I=p*g*h,F=y*g*h;break;case 3:I=p,F=y,Q=v*d,C=b*d,x=f*d*g,B=m*d*g;break;case 2:I=p,F=y,x=f*d,B=m*d,Q=v*d*h,C=b*d*h;break;case 1:x=f,B=m,Q=v*h,C=b*h,I=p*h*g,F=y*h*g;break;default:x=f,B=m,I=p*h,F=y*h,Q=v*h*d,C=b*h*d}var R=i[x+I+Q],E=i[x+I+C],T=i[x+F+Q],M=i[x+F+C],N=i[B+I+Q],D=i[B+I+C],X=i[B+F+Q],Z=i[B+F+C],V=r.create(),H=r.create(),W=r.create(),Y=r.create();r.lerp(V,R,N,k),r.lerp(H,E,D,k),r.lerp(W,T,X,k),r.lerp(Y,M,Z,k);var z=r.create(),O=r.create();r.lerp(z,V,W,G),r.lerp(O,H,Y,G);var J=r.create();return r.lerp(J,z,O,_),J}(e,t,g)},p=t.getDivergence||function(t,e){var n=r.create(),i=1e-4;r.add(n,t,[i,0,0]);var a=f(n);r.subtract(a,a,e),r.scale(a,a,1/i),r.add(n,t,[0,i,0]);var o=f(n);r.subtract(o,o,e),r.scale(o,o,1/i),r.add(n,t,[0,0,i]);var s=f(n);return r.subtract(s,s,e),r.scale(s,s,1/i),r.add(n,a,o),r.add(n,n,s),n},v=[],m=e[0][0],y=e[0][1],b=e[0][2],x=e[1][0],B=e[1][1],I=e[1][2],F=function(t){var e=t[0],n=t[1],r=t[2];return!(e<m||e>x||n<y||n>B||r<b||r>I)},Q=10*r.distance(e[0],e[1])/i,C=Q*Q,w=1,U=0,A=n.length;A>1&&(w=function(t){for(var e=[],n=[],r=[],i={},a={},o={},s=t.length,l=0;l<s;l++){var u=t[l],h=u[0],d=u[1],g=u[2];i[h]||(e.push(h),i[h]=!0),a[d]||(n.push(d),a[d]=!0),o[g]||(r.push(g),o[g]=!0)}var f=c(e),p=c(n),v=c(r),m=Math.min(f,p,v);return isFinite(m)?m:1}(n));for(var S=0;S<A;S++){var L=r.create();r.copy(L,n[S]);var k=[L],G=[],_=f(L),R=L;G.push(_);var E=[],T=p(L,_),M=r.length(T);isFinite(M)&&M>U&&(U=M),E.push(M),v.push({points:k,velocities:G,divergences:E});for(var N=0;N<100*i&&k.length<i&&F(L);){N++;var D=r.clone(_),X=r.squaredLength(D);if(0===X)break;if(X>C&&r.scale(D,D,Q/Math.sqrt(X)),r.add(D,D,L),_=f(D),r.squaredDistance(R,D)-C>-1e-4*C){k.push(D),R=D,G.push(_);T=p(D,_),M=r.length(T);isFinite(M)&&M>U&&(U=M),E.push(M)}L=D}}var Z=o(v,t.colormap,U,w);return h?Z.tubeScale=h:(0===U&&(U=1),Z.tubeScale=.5*u*w/U),Z};var u=n(6740),h=n(6405).createMesh;t.exports.createTubeMesh=function(t,e){return h(t,e,{shaders:u,traceType:"streamtube"})}},990:function(t,e,n){var r=n(9405),i=n(3236),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);e.createShader=function(t){var e=r(t,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createPickShader=function(t){var e=r(t,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createContourShader=function(t){var e=r(t,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},e.createPickContourShader=function(t){var e=r(t,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e}},9499:function(t,e,n){t.exports=function(t){var e=t.gl,n=y(e),r=x(e),s=b(e),l=B(e),c=i(e),u=a(e,[{buffer:c,size:4,stride:I,offset:0},{buffer:c,size:3,stride:I,offset:16},{buffer:c,size:3,stride:I,offset:28}]),h=i(e),d=a(e,[{buffer:h,size:4,stride:20,offset:0},{buffer:h,size:1,stride:20,offset:16}]),g=i(e),f=a(e,[{buffer:g,size:2,type:e.FLOAT}]),p=o(e,1,U,e.RGBA,e.UNSIGNED_BYTE);p.minFilter=e.LINEAR,p.magFilter=e.LINEAR;var v=new A(e,[0,0],[[0,0,0],[0,0,0]],n,r,c,u,p,s,l,h,d,g,f,[0,0,0]),m={levels:[[],[],[]]};for(var F in t)m[F]=t[F];return m.colormap=m.colormap||"jet",v.update(m),v};var r=n(8828),i=n(2762),a=n(8116),o=n(7766),s=n(1888),l=n(6729),c=n(5298),u=n(9994),h=n(9618),d=n(3711),g=n(6760),f=n(7608),p=n(2478),v=n(6199),m=n(990),y=m.createShader,b=m.createContourShader,x=m.createPickShader,B=m.createPickContourShader,I=40,F=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Q=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],C=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function w(t,e,n,r,i){this.position=t,this.index=e,this.uv=n,this.level=r,this.dataCoordinate=i}!function(){for(var t=0;t<3;++t){var e=C[t],n=(t+2)%3;e[(t+1)%3+0]=1,e[n+3]=1,e[t+6]=1}}();var U=256;function A(t,e,n,r,i,a,o,l,c,u,d,g,f,p,v){this.gl=t,this.shape=e,this.bounds=n,this.objectOffset=v,this.intensityBounds=[],this._shader=r,this._pickShader=i,this._coordinateBuffer=a,this._vao=o,this._colorMap=l,this._contourShader=c,this._contourPickShader=u,this._contourBuffer=d,this._contourVAO=g,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new w([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=f,this._dynamicVAO=p,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[h(s.mallocFloat(1024),[0,0]),h(s.mallocFloat(1024),[0,0]),h(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var S=A.prototype;S.genColormap=function(t,e){var n=!1,r=u([l({colormap:t,nshades:U,format:"rgba"}).map((function(t,r){var i=e?function(t,e){if(!e)return 1;if(!e.length)return 1;for(var n=0;n<e.length;++n){if(e.length<2)return 1;if(e[n][0]===t)return e[n][1];if(e[n][0]>t&&n>0){var r=(e[n][0]-t)/(e[n][0]-e[n-1][0]);return e[n][1]*(1-r)+r*e[n-1][1]}}return 1}(r/255,e):t[3];return i<1&&(n=!0),[t[0],t[1],t[2],255*i]}))]);return c.divseq(r,255),this.hasAlphaScale=n,r},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(t){this.pickId=t};var L=[0,0,0],k={showSurface:!1,showContour:!1,projections:[F.slice(),F.slice(),F.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function G(t,e){var n,r,i,a=e.axes&&e.axes.lastCubeProps.axis||L,o=e.showSurface,s=e.showContour;for(n=0;n<3;++n)for(o=o||e.surfaceProject[n],r=0;r<3;++r)s=s||e.contourProject[n][r];for(n=0;n<3;++n){var l=k.projections[n];for(r=0;r<16;++r)l[r]=0;for(r=0;r<4;++r)l[5*r]=1;l[5*n]=0,l[12+n]=e.axesBounds[+(a[n]>0)][n],g(l,t.model,l);var c=k.clipBounds[n];for(i=0;i<2;++i)for(r=0;r<3;++r)c[i][r]=t.clipBounds[i][r];c[0][n]=-1e8,c[1][n]=1e8}return k.showSurface=o,k.showContour=s,k}var _={model:F,view:F,projection:F,inverseModel:F.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},R=F.slice(),E=[1,0,0,0,1,0,0,0,1];function T(t,e){t=t||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var r=_;r.model=t.model||F,r.view=t.view||F,r.projection=t.projection||F,r.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],r.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],r.objectOffset=this.objectOffset,r.contourColor=this.contourColor[0],r.inverseModel=f(r.inverseModel,r.model);for(var i=0;i<2;++i)for(var a=r.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);r.kambient=this.ambientLight,r.kdiffuse=this.diffuseLight,r.kspecular=this.specularLight,r.roughness=this.roughness,r.fresnel=this.fresnel,r.opacity=this.opacity,r.height=0,r.permutation=E,r.vertexColor=this.vertexColor;var s=R;for(g(s,r.view,r.model),g(s,r.projection,s),f(s,s),i=0;i<3;++i)r.eyePosition[i]=s[12+i]/s[15];var l=s[15];for(i=0;i<3;++i)l+=this.lightPosition[i]*s[4*i+3];for(i=0;i<3;++i){var c=s[12+i];for(o=0;o<3;++o)c+=s[4*o+i]*this.lightPosition[o];r.lightPosition[i]=c/l}var u=G(r,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=r,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(n.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[i],this._shader.uniforms.clipBounds=u.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var h=this._contourShader;r.kambient=1,r.kdiffuse=0,r.kspecular=0,r.opacity=1,h.bind(),h.uniforms=r;var d=this._contourVAO;for(d.bind(),i=0;i<3;++i)for(h.uniforms.permutation=C[i],n.lineWidth(this.contourWidth[i]*this.pixelRatio),o=0;o<this.contourLevels[i].length;++o)o===this.highlightLevel[i]?(h.uniforms.contourColor=this.highlightColor[i],h.uniforms.contourTint=this.highlightTint[i]):0!==o&&o-1!==this.highlightLevel[i]||(h.uniforms.contourColor=this.contourColor[i],h.uniforms.contourTint=this.contourTint[i]),this._contourCounts[i][o]&&(h.uniforms.height=this.contourLevels[i][o],d.draw(n.LINES,this._contourCounts[i][o],this._contourOffsets[i][o]));for(i=0;i<3;++i)for(h.uniforms.model=u.projections[i],h.uniforms.clipBounds=u.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){h.uniforms.permutation=C[o],n.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var p=0;p<this.contourLevels[o].length;++p)p===this.highlightLevel[o]?(h.uniforms.contourColor=this.highlightColor[o],h.uniforms.contourTint=this.highlightTint[o]):0!==p&&p-1!==this.highlightLevel[o]||(h.uniforms.contourColor=this.contourColor[o],h.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][p]&&(h.uniforms.height=this.contourLevels[o][p],d.draw(n.LINES,this._contourCounts[o][p],this._contourOffsets[o][p]))}for(d.unbind(),(d=this._dynamicVAO).bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(h.uniforms.model=r.model,h.uniforms.clipBounds=r.clipBounds,h.uniforms.permutation=C[i],n.lineWidth(this.dynamicWidth[i]*this.pixelRatio),h.uniforms.contourColor=this.dynamicColor[i],h.uniforms.contourTint=this.dynamicTint[i],h.uniforms.height=this.dynamicLevel[i],d.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),o=0;o<3;++o)this.contourProject[o][i]&&(h.uniforms.model=u.projections[o],h.uniforms.clipBounds=u.clipBounds[o],d.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));d.unbind()}}S.draw=function(t){return T.call(this,t,!1)},S.drawTransparent=function(t){return T.call(this,t,!0)};var M={model:F,view:F,projection:F,inverseModel:F,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function N(t,e){return Array.isArray(t)?[e(t[0]),e(t[1]),e(t[2])]:[e(t),e(t),e(t)]}function D(t){return Array.isArray(t)?3===t.length?[t[0],t[1],t[2],1]:[t[0],t[1],t[2],t[3]]:[0,0,0,1]}function X(t){if(Array.isArray(t)){if(Array.isArray(t))return[D(t[0]),D(t[1]),D(t[2])];var e=D(t);return[e.slice(),e.slice(),e.slice()]}}S.drawPick=function(t){t=t||{};var e=this.gl;e.disable(e.CULL_FACE);var n=M;n.model=t.model||F,n.view=t.view||F,n.projection=t.projection||F,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.objectOffset=this.objectOffset,n.permutation=E;for(var r=0;r<2;++r)for(var i=n.clipBounds[r],a=0;a<3;++a)i[a]=Math.min(Math.max(this.clipBounds[r][a],-1e8),1e8);var o=G(n,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(e.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&(this._pickShader.uniforms.model=o.projections[r],this._pickShader.uniforms.clipBounds=o.clipBounds[r],this._vao.draw(e.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=n;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(e.lineWidth(this.contourWidth[a]*this.pixelRatio),s.uniforms.permutation=C[a],r=0;r<this.contourLevels[a].length;++r)this._contourCounts[a][r]&&(s.uniforms.height=this.contourLevels[a][r],l.draw(e.LINES,this._contourCounts[a][r],this._contourOffsets[a][r]));for(r=0;r<3;++r)for(s.uniforms.model=o.projections[r],s.uniforms.clipBounds=o.clipBounds[r],a=0;a<3;++a)if(this.contourProject[r][a]){s.uniforms.permutation=C[a],e.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var c=0;c<this.contourLevels[a].length;++c)this._contourCounts[a][c]&&(s.uniforms.height=this.contourLevels[a][c],l.draw(e.LINES,this._contourCounts[a][c],this._contourOffsets[a][c]))}l.unbind()}},S.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=this._field[2].shape,n=this._pickResult,r=e[0]*(t.value[0]+(t.value[2]>>4)/16)/255,i=Math.floor(r),a=r-i,o=e[1]*(t.value[1]+(15&t.value[2])/16)/255,s=Math.floor(o),l=o-s;i+=1,s+=1;var c=n.position;c[0]=c[1]=c[2]=0;for(var u=0;u<2;++u)for(var h=u?a:1-a,d=0;d<2;++d)for(var g=i+u,f=s+d,v=h*(d?l:1-l),m=0;m<3;++m)c[m]+=this._field[m].get(g,f)*v;for(var y=this._pickResult.level,b=0;b<3;++b)if(y[b]=p.le(this.contourLevels[b],c[b]),y[b]<0)this.contourLevels[b].length>0&&(y[b]=0);else if(y[b]<this.contourLevels[b].length-1){var x=this.contourLevels[b][y[b]],B=this.contourLevels[b][y[b]+1];Math.abs(x-c[b])>Math.abs(B-c[b])&&(y[b]+=1)}for(n.index[0]=a<.5?i:i+1,n.index[1]=l<.5?s:s+1,n.uv[0]=r/e[0],n.uv[1]=o/e[1],m=0;m<3;++m)n.dataCoordinate[m]=this._field[m].get(n.index[0],n.index[1]);return n},S.padField=function(t,e){var n=e.shape.slice(),r=t.shape.slice();c.assign(t.lo(1,1).hi(n[0],n[1]),e),c.assign(t.lo(1).hi(n[0],1),e.hi(n[0],1)),c.assign(t.lo(1,r[1]-1).hi(n[0],1),e.lo(0,n[1]-1).hi(n[0],1)),c.assign(t.lo(0,1).hi(1,n[1]),e.hi(1)),c.assign(t.lo(r[0]-1,1).hi(1,n[1]),e.lo(n[0]-1)),t.set(0,0,e.get(0,0)),t.set(0,r[1]-1,e.get(0,n[1]-1)),t.set(r[0]-1,0,e.get(n[0]-1,0)),t.set(r[0]-1,r[1]-1,e.get(n[0]-1,n[1]-1))},S.update=function(t){t=t||{},this.objectOffset=t.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in t&&(this.contourWidth=N(t.contourWidth,Number)),"showContour"in t&&(this.showContour=N(t.showContour,Boolean)),"showSurface"in t&&(this.showSurface=!!t.showSurface),"contourTint"in t&&(this.contourTint=N(t.contourTint,Boolean)),"contourColor"in t&&(this.contourColor=X(t.contourColor)),"contourProject"in t&&(this.contourProject=N(t.contourProject,(function(t){return N(t,Boolean)}))),"surfaceProject"in t&&(this.surfaceProject=t.surfaceProject),"dynamicColor"in t&&(this.dynamicColor=X(t.dynamicColor)),"dynamicTint"in t&&(this.dynamicTint=N(t.dynamicTint,Number)),"dynamicWidth"in t&&(this.dynamicWidth=N(t.dynamicWidth,Number)),"opacity"in t&&(this.opacity=t.opacity),"opacityscale"in t&&(this.opacityscale=t.opacityscale),"colorBounds"in t&&(this.colorBounds=t.colorBounds),"vertexColor"in t&&(this.vertexColor=t.vertexColor?1:0),"colormap"in t&&this._colorMap.setPixels(this.genColormap(t.colormap,this.opacityscale));var e=t.field||t.coords&&t.coords[2]||null,n=!1;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in t||"coords"in t){var i=(e.shape[0]+2)*(e.shape[1]+2);i>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(r.nextPow2(i))),this._field[2]=h(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]),this.padField(this._field[2],e),this.shape=e.shape.slice();for(var a=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(s.freeFloat(this._field[o].data),this._field[o].data=s.mallocFloat(this._field[2].size)),this._field[o]=h(this._field[o].data,[a[0]+2,a[1]+2]);if(t.coords){var l=t.coords;if(!Array.isArray(l)||3!==l.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var c=l[o];for(m=0;m<2;++m)if(c.shape[m]!==a[m])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[o],c)}}else if(t.ticks){var u=t.ticks;if(!Array.isArray(u)||2!==u.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var g=u[o];if((Array.isArray(g)||g.length)&&(g=h(g)),g.shape[0]!==a[o])throw new Error("gl-surface: invalid tick length");var f=h(g.data,a);f.stride[o]=g.stride[0],f.stride[1^o]=0,this.padField(this._field[o],f)}}else{for(o=0;o<2;++o){var p=[0,0];p[o]=1,this._field[o]=h(this._field[o].data,[a[0]+2,a[1]+2],p,0)}this._field[0].set(0,0,0);for(var m=0;m<a[0];++m)this._field[0].set(m+1,0,m);for(this._field[0].set(a[0]+1,0,a[0]-1),this._field[1].set(0,0,0),m=0;m<a[1];++m)this._field[1].set(0,m+1,m);this._field[1].set(0,a[1]+1,a[1]-1)}var y=this._field,b=h(s.mallocFloat(3*y[2].size*2),[3,a[0]+2,a[1]+2,2]);for(o=0;o<3;++o)v(b.pick(o),y[o],"mirror");var x=h(s.mallocFloat(3*y[2].size),[a[0]+2,a[1]+2,3]);for(o=0;o<a[0]+2;++o)for(m=0;m<a[1]+2;++m){var B=b.get(0,o,m,0),I=b.get(0,o,m,1),F=b.get(1,o,m,0),C=b.get(1,o,m,1),w=b.get(2,o,m,0),U=b.get(2,o,m,1),A=F*U-C*w,S=w*I-U*B,L=B*C-I*F,k=Math.sqrt(A*A+S*S+L*L);k<1e-8?(k=Math.max(Math.abs(A),Math.abs(S),Math.abs(L)))<1e-8?(L=1,S=A=0,k=1):k=1/k:k=1/Math.sqrt(k),x.set(o,m,0,A*k),x.set(o,m,1,S*k),x.set(o,m,2,L*k)}s.free(b.data);var G=[1/0,1/0,1/0],_=[-1/0,-1/0,-1/0],R=1/0,E=-1/0,T=(a[0]-1)*(a[1]-1)*6,M=s.mallocFloat(r.nextPow2(10*T)),D=0,Z=0;for(o=0;o<a[0]-1;++o)t:for(m=0;m<a[1]-1;++m){for(var V=0;V<2;++V)for(var H=0;H<2;++H)for(var W=0;W<3;++W){var Y=this._field[W].get(1+o+V,1+m+H);if(isNaN(Y)||!isFinite(Y))continue t}for(W=0;W<6;++W){var z=o+Q[W][0],O=m+Q[W][1],J=this._field[0].get(z+1,O+1),P=this._field[1].get(z+1,O+1);Y=this._field[2].get(z+1,O+1),A=x.get(z+1,O+1,0),S=x.get(z+1,O+1,1),L=x.get(z+1,O+1,2),t.intensity&&(j=t.intensity.get(z,O));var j=t.intensity?t.intensity.get(z,O):Y+this.objectOffset[2];M[D++]=z,M[D++]=O,M[D++]=J,M[D++]=P,M[D++]=Y,M[D++]=0,M[D++]=j,M[D++]=A,M[D++]=S,M[D++]=L,G[0]=Math.min(G[0],J+this.objectOffset[0]),G[1]=Math.min(G[1],P+this.objectOffset[1]),G[2]=Math.min(G[2],Y+this.objectOffset[2]),R=Math.min(R,j),_[0]=Math.max(_[0],J+this.objectOffset[0]),_[1]=Math.max(_[1],P+this.objectOffset[1]),_[2]=Math.max(_[2],Y+this.objectOffset[2]),E=Math.max(E,j),Z+=1}}for(t.intensityBounds&&(R=+t.intensityBounds[0],E=+t.intensityBounds[1]),o=6;o<D;o+=10)M[o]=(M[o]-R)/(E-R);this._vertexCount=Z,this._coordinateBuffer.update(M.subarray(0,D)),s.freeFloat(M),s.free(x.data),this.bounds=[G,_],this.intensity=t.intensity||this._field[2],this.intensityBounds[0]===R&&this.intensityBounds[1]===E||(n=!0),this.intensityBounds=[R,E]}if("levels"in t){var K=t.levels;for(K=Array.isArray(K[0])?K.slice():[[],[],K],o=0;o<3;++o)K[o]=K[o].slice(),K[o].sort((function(t,e){return t-e}));for(o=0;o<3;++o)for(m=0;m<K[o].length;++m)K[o][m]-=this.objectOffset[o];t:for(o=0;o<3;++o){if(K[o].length!==this.contourLevels[o].length){n=!0;break}for(m=0;m<K[o].length;++m)if(K[o][m]!==this.contourLevels[o][m]){n=!0;break t}}this.contourLevels=K}if(n){y=this._field,a=this.shape;for(var q=[],$=0;$<3;++$){var tt=this.contourLevels[$],et=[],nt=[],rt=[0,0,0];for(o=0;o<tt.length;++o){var it=d(this._field[$],tt[o]);et.push(q.length/5|0),Z=0;t:for(m=0;m<it.cells.length;++m){var at=it.cells[m];for(W=0;W<2;++W){var ot=it.positions[at[W]],st=ot[0],lt=0|Math.floor(st),ct=st-lt,ut=ot[1],ht=0|Math.floor(ut),dt=ut-ht,gt=!1;e:for(var ft=0;ft<3;++ft){rt[ft]=0;var pt=($+ft+1)%3;for(V=0;V<2;++V){var vt=V?ct:1-ct;for(z=0|Math.min(Math.max(lt+V,0),a[0]),H=0;H<2;++H){var mt=H?dt:1-dt;if(O=0|Math.min(Math.max(ht+H,0),a[1]),Y=ft<2?this._field[pt].get(z,O):(this.intensity.get(z,O)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Y)||isNaN(Y)){gt=!0;break e}var yt=vt*mt;rt[ft]+=yt*Y}}}if(gt){if(W>0){for(var bt=0;bt<5;++bt)q.pop();Z-=1}continue t}q.push(rt[0],rt[1],ot[0],ot[1],rt[2]),Z+=1}}nt.push(Z)}this._contourOffsets[$]=et,this._contourCounts[$]=nt}var xt=s.mallocFloat(q.length);for(o=0;o<q.length;++o)xt[o]=q[o];this._contourBuffer.update(xt),s.freeFloat(xt)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var t=0;t<3;++t)s.freeFloat(this._field[t].data)},S.highlight=function(t){var e,n;if(!t)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(e=0;e<3;++e)this.enableHighlight[e]?this.highlightLevel[e]=t.level[e]:this.highlightLevel[e]=-1;for(n=this.snapToData?t.dataCoordinate:t.position,e=0;e<3;++e)n[e]-=this.objectOffset[e];if(this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]){for(var r=0,i=this.shape,a=s.mallocFloat(12*i[0]*i[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=n[o];var l=(o+1)%3,c=(o+2)%3,u=this._field[o],h=this._field[l],g=this._field[c],f=d(u,n[o]),p=f.cells,v=f.positions;for(this._dynamicOffsets[o]=r,e=0;e<p.length;++e)for(var m=p[e],y=0;y<2;++y){var b=v[m[y]],x=+b[0],B=0|x,I=0|Math.min(B+1,i[0]),F=x-B,Q=1-F,C=+b[1],w=0|C,U=0|Math.min(w+1,i[1]),A=C-w,S=1-A,L=Q*S,k=Q*A,G=F*S,_=F*A,R=L*h.get(B,w)+k*h.get(B,U)+G*h.get(I,w)+_*h.get(I,U),E=L*g.get(B,w)+k*g.get(B,U)+G*g.get(I,w)+_*g.get(I,U);if(isNaN(R)||isNaN(E)){y&&(r-=1);break}a[2*r+0]=R,a[2*r+1]=E,r+=1}this._dynamicCounts[o]=r-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*r)),s.freeFloat(a)}}},7766:function(t,e,n){var r=n(9618),i=n(5298),a=n(1888);t.exports=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");o||function(t){o=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],s=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],l=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}(t);if("number"==typeof arguments[1])return v(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return v(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1],n=c(e)?e:e.raw;if(n)return function(t,e,n,r,i,a){var o=p(t);return t.texImage2D(t.TEXTURE_2D,0,i,i,a,e),new d(t,o,n,r,i,a)}(t,n,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return function(t,e){var n=e.dtype,o=e.shape.slice(),s=t.getParameter(t.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s)throw new Error("gl-texture2d: Invalid texture size");var l=f(o,e.stride.slice()),c=0;"float32"===n?c=t.FLOAT:"float64"===n?(c=t.FLOAT,l=!1,n="float32"):"uint8"===n?c=t.UNSIGNED_BYTE:(c=t.UNSIGNED_BYTE,l=!1,n="uint8");var h,g,v=0;if(2===o.length)v=t.LUMINANCE,o=[o[0],o[1],1],e=r(e.data,o,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==o.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===o[2])v=t.ALPHA;else if(2===o[2])v=t.LUMINANCE_ALPHA;else if(3===o[2])v=t.RGB;else{if(4!==o[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");v=t.RGBA}}c!==t.FLOAT||t.getExtension("OES_texture_float")||(c=t.UNSIGNED_BYTE,l=!1);var m=e.size;if(l)h=0===e.offset&&e.data.length===m?e.data:e.data.subarray(e.offset,e.offset+m);else{var y=[o[2],o[2]*o[0],1];g=a.malloc(m,n);var b=r(g,o,y,0);"float32"!==n&&"float64"!==n||c!==t.UNSIGNED_BYTE?i.assign(b,e):u(b,e),h=g.subarray(0,m)}var x=p(t);t.texImage2D(t.TEXTURE_2D,0,v,o[0],o[1],0,v,c,h),l||a.free(g);return new d(t,x,o[0],o[1],v,c)}(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,s=null,l=null;function c(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var u=function(t,e){i.muls(t,e,255)};function h(t,e,n){var r=t.gl,i=r.getParameter(r.MAX_TEXTURE_SIZE);if(e<0||e>i||n<0||n>i)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,n],t.bind(),r.texImage2D(r.TEXTURE_2D,0,t.format,e,n,0,t.format,t.type,null),t._mipLevels=[0],t}function d(t,e,n,r,i,a){this.gl=t,this.handle=e,this.format=i,this.type=a,this._shape=[n,r],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(t){return o.wrapS=t}},{get:function(){return o._wrapT},set:function(t){return o.wrapT=t}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(t){return o.width=t}},{get:function(){return o._shape[1]},set:function(t){return o.height=t}}]),this._shapeVector=l}var g=d.prototype;function f(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function p(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function v(t,e,n,r,i){var a=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>a||n<0||n>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=p(t);return t.texImage2D(t.TEXTURE_2D,0,r,e,n,0,r,i,null),new d(t,o,e,n,r,i)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&o.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&o.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var n=this.gl.getExtension("EXT_texture_filter_anisotropic");n&&this.gl.texParameterf(this.gl.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(l.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return h(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return h(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,h(this,this._shape[0],t),t}}}),g.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},g.setPixels=function(t,e,n,o){var s=this.gl;this.bind(),Array.isArray(e)?(o=n,n=0|e[1],e=0|e[0]):(e=e||0,n=n||0),o=o||0;var l=c(t)?t:t.raw;if(l){this._mipLevels.indexOf(o)<0?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,l),this._mipLevels.push(o)):s.texSubImage2D(s.TEXTURE_2D,o,e,n,this.format,this.type,l)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>o||n+t.shape[0]>this._shape[0]>>>o||e<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,n,o,s,l,c,h){var d=h.dtype,g=h.shape.slice();if(g.length<2||g.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var p=0,v=0,m=f(g,h.stride.slice());"float32"===d?p=t.FLOAT:"float64"===d?(p=t.FLOAT,m=!1,d="float32"):"uint8"===d?p=t.UNSIGNED_BYTE:(p=t.UNSIGNED_BYTE,m=!1,d="uint8");if(2===g.length)v=t.LUMINANCE,g=[g[0],g[1],1],h=r(h.data,g,[h.stride[0],h.stride[1],1],h.offset);else{if(3!==g.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===g[2])v=t.ALPHA;else if(2===g[2])v=t.LUMINANCE_ALPHA;else if(3===g[2])v=t.RGB;else{if(4!==g[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");v=t.RGBA}g[2]}v!==t.LUMINANCE&&v!==t.ALPHA||s!==t.LUMINANCE&&s!==t.ALPHA||(v=s);if(v!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var y=h.size,b=c.indexOf(o)<0;b&&c.push(o);if(p===l&&m)0===h.offset&&h.data.length===y?b?t.texImage2D(t.TEXTURE_2D,o,s,g[0],g[1],0,s,l,h.data):t.texSubImage2D(t.TEXTURE_2D,o,e,n,g[0],g[1],s,l,h.data):b?t.texImage2D(t.TEXTURE_2D,o,s,g[0],g[1],0,s,l,h.data.subarray(h.offset,h.offset+y)):t.texSubImage2D(t.TEXTURE_2D,o,e,n,g[0],g[1],s,l,h.data.subarray(h.offset,h.offset+y));else{var x;x=l===t.FLOAT?a.mallocFloat32(y):a.mallocUint8(y);var B=r(x,g,[g[2],g[2]*g[0],1]);p===t.FLOAT&&l===t.UNSIGNED_BYTE?u(B,h):i.assign(B,h),b?t.texImage2D(t.TEXTURE_2D,o,s,g[0],g[1],0,s,l,x.subarray(0,y)):t.texSubImage2D(t.TEXTURE_2D,o,e,n,g[0],g[1],s,l,x.subarray(0,y)),l===t.FLOAT?a.freeFloat32(x):a.freeUint8(x)}}(s,e,n,o,this.format,this.type,this._mipLevels,t)}}},1433:function(t){t.exports=function(t,e,n){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var r=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var a=n[i];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||t.FLOAT,c=!!a.normalized,u=a.stride||0,h=a.offset||0;o.bind(),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,s,l,c,u,h)}else{if("number"==typeof a)t.vertexAttrib1f(i,a);else if(1===a.length)t.vertexAttrib1f(i,a[0]);else if(2===a.length)t.vertexAttrib2f(i,a[0],a[1]);else if(3===a.length)t.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}t.disableVertexAttribArray(i)}}for(;i<r;++i)t.disableVertexAttribArray(i)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(i=0;i<r;++i)t.disableVertexAttribArray(i)}}},870:function(t,e,n){var r=n(1433);function i(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}i.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},i.prototype.update=function(t,e,n){this._elements=e,this._attributes=t,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(t,e,n){n=n||0;var r=this.gl;this._elements?r.drawElements(t,e,this._elementsType,n):r.drawArrays(t,n,e)},t.exports=function(t){return new i(t)}},7518:function(t,e,n){var r=n(1433);function i(t,e,n,r,i,a){this.location=t,this.dimension=e,this.a=n,this.b=r,this.c=i,this.d=a}function a(t,e,n){this.gl=t,this._ext=e,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}i.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(t,e,n){if(this.bind(),r(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var a=0;a<t.length;++a){var o=t[a];"number"==typeof o?this._attribs.push(new i(a,1,o)):Array.isArray(o)&&this._attribs.push(new i(a,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!e,this._elementsType=n||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(t,e,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(t,e,this._elementsType,n):r.drawArrays(t,n,e)},t.exports=function(t,e){return new a(t,e,e.createVertexArrayOES())}},8116:function(t,e,n){var r=n(7518),i=n(870);function a(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}t.exports=function(t,e,n,o){var s,l=t.createVertexArray?new a(t):t.getExtension("OES_vertex_array_object");return(s=l?r(t,l):i(t)).update(e,n,o),s}},5632:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}},8192:function(t,e,n){t.exports=function(t,e){var n=r(t[0],t[1],t[2]),o=r(e[0],e[1],e[2]);i(n,n),i(o,o);var s=a(n,o);return s>1?0:Math.acos(s)};var r=n(2825),i=n(3536),a=n(244)},9226:function(t){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},3126:function(t){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},3990:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},1091:function(t){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},5911:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],l=n[2];return t[0]=i*l-a*s,t[1]=a*o-r*l,t[2]=r*s-i*o,t}},5455:function(t,e,n){t.exports=n(7056)},7056:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}},4008:function(t,e,n){t.exports=n(6690)},6690:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}},244:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},2613:function(t){t.exports=1e-6},9922:function(t,e,n){t.exports=function(t,e){var n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],l=e[2];return Math.abs(n-o)<=r*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-l)<=r*Math.max(1,Math.abs(a),Math.abs(l))};var r=n(2613)},9265:function(t){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},2681:function(t){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},5137:function(t,e,n){t.exports=function(t,e,n,i,a,o){var s,l;e||(e=3);n||(n=0);l=i?Math.min(i*e+n,t.length):t.length;for(s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],a(r,r,o),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t};var r=n(1091)()},2825:function(t){t.exports=function(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}},2931:function(t,e,n){t.exports={EPSILON:n(2613),create:n(1091),clone:n(3126),angle:n(8192),fromValues:n(2825),copy:n(3990),set:n(1463),equals:n(9922),exactEquals:n(9265),add:n(5632),subtract:n(6843),sub:n(2229),multiply:n(5847),mul:n(4505),divide:n(6690),div:n(4008),min:n(8107),max:n(7417),floor:n(2681),ceil:n(9226),round:n(2447),scale:n(6621),scaleAndAdd:n(8489),distance:n(7056),dist:n(5455),squaredDistance:n(2953),sqrDist:n(6141),length:n(1387),len:n(868),squaredLength:n(3066),sqrLen:n(5486),negate:n(5093),inverse:n(811),normalize:n(3536),dot:n(244),cross:n(5911),lerp:n(6658),random:n(7636),transformMat4:n(5673),transformMat3:n(492),transformQuat:n(264),rotateX:n(6894),rotateY:n(109),rotateZ:n(8692),forEach:n(5137)}},811:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},868:function(t,e,n){t.exports=n(1387)},1387:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}},6658:function(t){t.exports=function(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}},7417:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}},8107:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}},4505:function(t,e,n){t.exports=n(5847)},5847:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}},5093:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},3536:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a);return t}},7636:function(t){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}},6894:function(t){t.exports=function(t,e,n,r){var i=n[1],a=n[2],o=e[1]-i,s=e[2]-a,l=Math.sin(r),c=Math.cos(r);return t[0]=e[0],t[1]=i+o*c-s*l,t[2]=a+o*l+s*c,t}},109:function(t){t.exports=function(t,e,n,r){var i=n[0],a=n[2],o=e[0]-i,s=e[2]-a,l=Math.sin(r),c=Math.cos(r);return t[0]=i+s*l+o*c,t[1]=e[1],t[2]=a+s*c-o*l,t}},8692:function(t){t.exports=function(t,e,n,r){var i=n[0],a=n[1],o=e[0]-i,s=e[1]-a,l=Math.sin(r),c=Math.cos(r);return t[0]=i+o*c-s*l,t[1]=a+o*l+s*c,t[2]=e[2],t}},2447:function(t){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},6621:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}},8489:function(t){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}},1463:function(t){t.exports=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}},6141:function(t,e,n){t.exports=n(2953)},5486:function(t,e,n){t.exports=n(3066)},2953:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}},3066:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}},2229:function(t,e,n){t.exports=n(6843)},6843:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},492:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}},5673:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}},264:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*a-l*i,h=c*i+l*r-o*a,d=c*a+o*i-s*r,g=-o*r-s*i-l*a;return t[0]=u*c+g*-o+h*-l-d*-s,t[1]=h*c+g*-s+d*-o-u*-l,t[2]=d*c+g*-l+u*-s-h*-o,t}},4361:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}},2335:function(t){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},2933:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},7536:function(t){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},4691:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+a*a)}},1373:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}},3750:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},3390:function(t){t.exports=function(t,e,n,r){var i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}},9970:function(t,e,n){t.exports={create:n(7536),clone:n(2335),fromValues:n(3390),copy:n(2933),set:n(4578),add:n(4361),subtract:n(6860),multiply:n(3576),divide:n(1373),min:n(2334),max:n(160),scale:n(9288),scaleAndAdd:n(4844),distance:n(4691),squaredDistance:n(7960),length:n(6808),squaredLength:n(483),negate:n(1498),inverse:n(4494),normalize:n(5177),dot:n(3750),lerp:n(2573),random:n(9131),transformMat4:n(5352),transformQuat:n(4041)}},4494:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},6808:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}},2573:function(t){t.exports=function(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t}},160:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}},2334:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}},3576:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}},1498:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},5177:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o);return t}},9131:function(t,e,n){var r=n(5177),i=n(9288);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),r(t,t),i(t,t,e),t}},9288:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}},4844:function(t){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}},4578:function(t){t.exports=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}},7960:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+i*i+a*a}},483:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}},6860:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}},5352:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}},4041:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*a-l*i,h=c*i+l*r-o*a,d=c*a+o*i-s*r,g=-o*r-s*i-l*a;return t[0]=u*c+g*-o+h*-l-d*-s,t[1]=h*c+g*-s+d*-o-u*-l,t[2]=d*c+g*-l+u*-s-h*-o,t[3]=e[3],t}},1848:function(t,e,n){var r=n(4905),i=n(6468);t.exports=function(t){for(var e=Array.isArray(t)?t:r(t),n=0;n<e.length;n++){var a=e[n];if("preprocessor"===a.type){var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var s=o[1],l=o[2];return(s?i(l):l).trim()}}}}},5874:function(t,e,n){t.exports=function(t){var e,n,F,Q=0,C=0,w=l,U=[],A=[],S=1,L=0,k=0,G=!1,_=!1,R="",E=a,T=r;"300 es"===(t=t||{}).version&&(E=s,T=o);var M={},N={};for(Q=0;Q<E.length;Q++)M[E[Q]]=!0;for(Q=0;Q<T.length;Q++)N[T[Q]]=!0;return function(t){return A=[],null!==t?function(t){Q=0,t.toString&&(t=t.toString());var n;R+=t.replace(/\r\n/g,"\n"),F=R.length;for(;e=R[Q],Q<F;){switch(n=Q,w){case u:Q=W();break;case h:Q=H();break;case d:Q=V();break;case g:Q=Y();break;case f:Q=J();break;case B:Q=O();break;case p:Q=P();break;case c:Q=j();break;case b:Q=Z();break;case l:Q=X()}if(n!==Q)if("\n"===R[n])L=0,++S;else++L}return C+=Q,R=R.slice(Q),A}(t):function(t){U.length&&D(U.join(""));return w=x,D("(eof)"),A}()};function D(t){t.length&&A.push({type:I[w],data:t,position:k,line:S,column:L})}function X(){return U=U.length?[]:U,"/"===n&&"*"===e?(k=C+Q-1,w=u,n=e,Q+1):"/"===n&&"/"===e?(k=C+Q-1,w=h,n=e,Q+1):"#"===e?(w=d,k=C+Q,Q):/\s/.test(e)?(w=b,k=C+Q,Q):(G=/\d/.test(e),_=/[^\w_]/.test(e),k=C+Q,w=G?f:_?g:c,Q)}function Z(){return/[^\s]/g.test(e)?(D(U.join("")),w=l,Q):(U.push(e),n=e,Q+1)}function V(){return"\r"!==e&&"\n"!==e||"\\"===n?(U.push(e),n=e,Q+1):(D(U.join("")),w=l,Q)}function H(){return V()}function W(){return"/"===e&&"*"===n?(U.push(e),D(U.join("")),w=l,Q+1):(U.push(e),n=e,Q+1)}function Y(){if("."===n&&/\d/.test(e))return w=p,Q;if("/"===n&&"*"===e)return w=u,Q;if("/"===n&&"/"===e)return w=h,Q;if("."===e&&U.length){for(;z(U););return w=p,Q}if(";"===e||")"===e||"("===e){if(U.length)for(;z(U););return D(e),w=l,Q+1}var t=2===U.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;z(U););return w=l,Q}return U.push(e),n=e,Q+1}function z(t){for(var e,n,r=0;;){if(e=i.indexOf(t.slice(0,t.length+r).join("")),n=i[e],-1===e){if(r--+t.length>0)continue;n=t.slice(0,1).join("")}return D(n),k+=n.length,(U=U.slice(n.length)).length}}function O(){return/[^a-fA-F0-9]/.test(e)?(D(U.join("")),w=l,Q):(U.push(e),n=e,Q+1)}function J(){return"."===e||/[eE]/.test(e)?(U.push(e),w=p,n=e,Q+1):"x"===e&&1===U.length&&"0"===U[0]?(w=B,U.push(e),n=e,Q+1):/[^\d]/.test(e)?(D(U.join("")),w=l,Q):(U.push(e),n=e,Q+1)}function P(){return"f"===e&&(U.push(e),n=e,Q+=1),/[eE]/.test(e)?(U.push(e),n=e,Q+1):("-"!==e&&"+"!==e||!/[eE]/.test(n))&&/[^\d]/.test(e)?(D(U.join("")),w=l,Q):(U.push(e),n=e,Q+1)}function j(){if(/[^\d\w_]/.test(e)){var t=U.join("");return w=N[t]?y:M[t]?m:v,D(U.join("")),w=l,Q}return U.push(e),n=e,Q+1}};var r=n(620),i=n(7827),a=n(6852),o=n(7932),s=n(3508),l=999,c=9999,u=0,h=1,d=2,g=3,f=4,p=5,v=6,m=7,y=8,b=9,x=10,B=11,I=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(t,e,n){var r=n(6852);r=r.slice().filter((function(t){return!/^(gl\_|texture)/.test(t)})),t.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(t){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(t,e,n){var r=n(620);t.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(t){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(t){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(t,e,n){var r=n(5874);t.exports=function(t,e){var n=r(e),i=[];return i=i.concat(n(t)),i=i.concat(n(null))}},3236:function(t){t.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),n=[],r=0;r<t.length-1;r++)n.push(t[r],e[r]||"");return n.push(t[r]),n.join("")}},7520:function(t,e,n){var r=n(9507);t.exports=r&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},3778:function(t,e){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,g=t[e+h];for(h+=d,a=g&(1<<-u)-1,g>>=-u,u+=s;u>0;a=256*a+t[e+h],h+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+t[e+h],h+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(g?-1:1);o+=Math.pow(2,r),a-=c}return(g?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:a-1,f=r?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(s=0,o=u):o+h>=1?(s=(e*l-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=255&s,g+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+g]=255&o,g+=f,o/=256,c-=8);t[n+g-f]|=128*p}},8954:function(t,e,n){t.exports=function(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var i=t[0].length;if(n<=i)throw new Error("Must input at least d+1 points");var o=t.slice(0,i+1),s=r.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var l=new Array(i+1),u=0;u<=i;++u)l[u]=u;s<0&&(l[0]=1,l[1]=0);var h=new a(l,new Array(i+1),!1),d=h.adjacent,g=new Array(i+2);for(u=0;u<=i;++u){for(var f=l.slice(),p=0;p<=i;++p)p===u&&(f[p]=-1);var v=f[0];f[0]=f[1],f[1]=v;var m=new a(f,new Array(i+1),!0);d[u]=m,g[u]=m}g[i+1]=h;for(u=0;u<=i;++u){f=d[u].vertices;var y=d[u].adjacent;for(p=0;p<=i;++p){var b=f[p];if(b<0)y[p]=h;else for(var x=0;x<=i;++x)d[x].vertices.indexOf(b)<0&&(y[p]=d[x])}}var B=new c(i,o,g),I=!!e;for(u=i+1;u<n;++u)B.insert(t[u],I);return B.boundary()};var r=n(3250),i=n(6803).Fw;function a(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function o(t,e,n){this.vertices=t,this.cell=e,this.index=n}function s(t,e){return i(t.vertices,e.vertices)}a.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var l=[];function c(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var i=0;i<=t;++i)this.tuple[i]=this.vertices[i];var a=l[t];a||(a=l[t]=function(t){var e=r[t+1];return e||(e=r),function(t){return function(){var e=this.tuple;return t.apply(this,e)}}(e)}(t)),this.orient=a}var u=c.prototype;u.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,a=this.vertices,o=[t];for(t.lastVisited=-r;o.length>0;)for(var s=(t=o.pop()).adjacent,l=0;l<=n;++l){var c=s[l];if(c.boundary&&!(c.lastVisited<=-r)){for(var u=c.vertices,h=0;h<=n;++h){var d=u[h];i[h]=d<0?e:a[d]}var g=this.orient();if(g>0)return c;c.lastVisited=-r,0===g&&o.push(c)}}return null},u.walk=function(t,e){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,a=this.tuple,o=e?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];t:for(;!s.boundary;){for(var l=s.vertices,c=s.adjacent,u=0;u<=r;++u)a[u]=i[l[u]];s.lastVisited=n;for(u=0;u<=r;++u){var h=c[u];if(!(h.lastVisited>=n)){var d=a[u];a[u]=t;var g=this.orient();if(a[u]=d,g<0){s=h;continue t}h.boundary?h.lastVisited=-n:h.lastVisited=n}}return}return s},u.addPeaks=function(t,e){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,l=this.tuple,c=this.interior,u=this.simplices,h=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,c.push(e);for(var d=[];h.length>0;){var g=(e=h.pop()).vertices,f=e.adjacent,p=g.indexOf(n);if(!(p<0))for(var v=0;v<=r;++v)if(v!==p){var m=f[v];if(m.boundary&&!(m.lastVisited>=n)){var y=m.vertices;if(m.lastVisited!==-n){for(var b=0,x=0;x<=r;++x)y[x]<0?(b=x,l[x]=t):l[x]=i[y[x]];if(this.orient()>0){y[b]=n,m.boundary=!1,c.push(m),h.push(m),m.lastVisited=n;continue}m.lastVisited=-n}var B=m.adjacent,I=g.slice(),F=f.slice(),Q=new a(I,F,!0);u.push(Q);var C=B.indexOf(e);if(!(C<0)){B[C]=Q,F[p]=m,I[v]=-1,F[v]=e,f[v]=Q,Q.flip();for(x=0;x<=r;++x){var w=I[x];if(!(w<0||w===n)){for(var U=new Array(r-1),A=0,S=0;S<=r;++S){var L=I[S];L<0||S===x||(U[A++]=L)}d.push(new o(U,Q,x))}}}}}}d.sort(s);for(v=0;v+1<d.length;v+=2){var k=d[v],G=d[v+1],_=k.index,R=G.index;_<0||R<0||(k.cell.adjacent[k.index]=G.cell,G.cell.adjacent[G.index]=k.cell)}},u.insert=function(t,e){var n=this.vertices;n.push(t);var r=this.walk(t,e);if(r){for(var i=this.dimension,a=this.tuple,o=0;o<=i;++o){var s=r.vertices[o];a[o]=s<0?t:n[s]}var l=this.orient(a);l<0||(0!==l||(r=this.handleBoundaryDegeneracy(r,t)))&&this.addPeaks(t,r)}},u.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,r=n.length,i=0;i<r;++i){var a=n[i];if(a.boundary){for(var o=new Array(t),s=a.vertices,l=0,c=0,u=0;u<=t;++u)s[u]>=0?o[l++]=s[u]:c=1&u;if(c===(1&t)){var h=o[0];o[0]=o[1],o[1]=h}e.push(o)}}return e}},3352:function(t,e,n){var r=n(2478);function i(t,e,n,r,i){this.mid=t,this.left=e,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(e?e.count:0)+(n?n.count:0)+r.length}t.exports=function(t){if(!t||0===t.length)return new m(null);return new m(v(t))};var a=i.prototype;function o(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function s(t,e){var n=v(e);t.mid=n.mid,t.left=n.left,t.right=n.right,t.leftPoints=n.leftPoints,t.rightPoints=n.rightPoints,t.count=n.count}function l(t,e){var n=t.intervals([]);n.push(e),s(t,n)}function c(t,e){var n=t.intervals([]),r=n.indexOf(e);return r<0?0:(n.splice(r,1),s(t,n),1)}function u(t,e,n){for(var r=0;r<t.length&&t[r][0]<=e;++r){var i=n(t[r]);if(i)return i}}function h(t,e,n){for(var r=t.length-1;r>=0&&t[r][1]>=e;--r){var i=n(t[r]);if(i)return i}}function d(t,e){for(var n=0;n<t.length;++n){var r=e(t[n]);if(r)return r}}function g(t,e){return t-e}function f(t,e){var n=t[0]-e[0];return n||t[1]-e[1]}function p(t,e){var n=t[1]-e[1];return n||t[0]-e[0]}function v(t){if(0===t.length)return null;for(var e=[],n=0;n<t.length;++n)e.push(t[n][0],t[n][1]);e.sort(g);var r=e[e.length>>1],a=[],o=[],s=[];for(n=0;n<t.length;++n){var l=t[n];l[1]<r?a.push(l):r<l[0]?o.push(l):s.push(l)}var c=s,u=s.slice();return c.sort(f),u.sort(p),new i(r,v(a),v(o),c,u)}function m(t){this.root=t}a.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},a.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?l(this,t):this.left.insert(t):this.left=v([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?l(this,t):this.right.insert(t):this.right=v([t]);else{var n=r.ge(this.leftPoints,t,f),i=r.ge(this.rightPoints,t,p);this.leftPoints.splice(n,0,t),this.rightPoints.splice(i,0,t)}},a.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?c(this,t):2===(s=this.left.remove(t))?(this.left=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?c(this,t):2===(s=this.right.remove(t))?(this.right=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var n=this,i=this.left;i.right;)n=i,i=i.right;if(n===this)i.right=this.right;else{var a=this.left,s=this.right;n.count-=i.count,n.right=i.left,i.left=a,i.right=s}o(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return 1}for(a=r.ge(this.leftPoints,t,f);a<this.leftPoints.length&&this.leftPoints[a][0]===t[0];++a)if(this.leftPoints[a]===t){this.count-=1,this.leftPoints.splice(a,1);for(s=r.ge(this.rightPoints,t,p);s<this.rightPoints.length&&this.rightPoints[s][1]===t[1];++s)if(this.rightPoints[s]===t)return this.rightPoints.splice(s,1),1}return 0},a.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(n=this.left.queryPoint(t,e))return n;return u(this.leftPoints,t,e)}if(t>this.mid){var n;if(this.right)if(n=this.right.queryPoint(t,e))return n;return h(this.rightPoints,t,e)}return d(this.leftPoints,e)},a.queryInterval=function(t,e,n){var r;if(t<this.mid&&this.left&&(r=this.left.queryInterval(t,e,n)))return r;if(e>this.mid&&this.right&&(r=this.right.queryInterval(t,e,n)))return r;return e<this.mid?u(this.leftPoints,e,n):t>this.mid?h(this.rightPoints,t,n):d(this.leftPoints,n)};var y=m.prototype;y.insert=function(t){this.root?this.root.insert(t):this.root=new i(t[0],null,null,[t],[t])},y.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),0!==e}return!1},y.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},y.queryInterval=function(t,e,n){if(t<=e&&this.root)return this.root.queryInterval(t,e,n)},Object.defineProperty(y,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(y,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(t){t.exports=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}},9507:function(t){t.exports=!0},7163:function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(t){t.exports=function(t){for(var e,n=t.length,r=0;r<n;r++)if(((e=t.charCodeAt(r))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},395:function(t){t.exports=function(t,e,n){return t*(1-n)+e*n}},2652:function(t,e,n){var r=n(4335),i=n(6864),a=n(1903),o=n(9921),s=n(7608),l=n(5665),c={length:n(1387),normalize:n(3536),dot:n(244),cross:n(5911)},u=i(),h=i(),d=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];function p(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}t.exports=function(t,e,n,i,v,m){if(e||(e=[0,0,0]),n||(n=[0,0,0]),i||(i=[0,0,0]),v||(v=[0,0,0,1]),m||(m=[0,0,0,1]),!r(u,t))return!1;if(a(h,u),h[3]=0,h[7]=0,h[11]=0,h[15]=1,Math.abs(o(h)<1e-8))return!1;var y,b,x=u[3],B=u[7],I=u[11],F=u[12],Q=u[13],C=u[14],w=u[15];if(0!==x||0!==B||0!==I){if(d[0]=x,d[1]=B,d[2]=I,d[3]=w,!s(h,h))return!1;l(h,h),function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o}(v,d,h)}else v[0]=v[1]=v[2]=0,v[3]=1;if(e[0]=F,e[1]=Q,e[2]=C,b=u,(y=g)[0][0]=b[0],y[0][1]=b[1],y[0][2]=b[2],y[1][0]=b[4],y[1][1]=b[5],y[1][2]=b[6],y[2][0]=b[8],y[2][1]=b[9],y[2][2]=b[10],n[0]=c.length(g[0]),c.normalize(g[0],g[0]),i[0]=c.dot(g[0],g[1]),p(g[1],g[1],g[0],1,-i[0]),n[1]=c.length(g[1]),c.normalize(g[1],g[1]),i[0]/=n[1],i[1]=c.dot(g[0],g[2]),p(g[2],g[2],g[0],1,-i[1]),i[2]=c.dot(g[1],g[2]),p(g[2],g[2],g[1],1,-i[2]),n[2]=c.length(g[2]),c.normalize(g[2],g[2]),i[1]/=n[2],i[2]/=n[2],c.cross(f,g[1],g[2]),c.dot(g[0],f)<0)for(var U=0;U<3;U++)n[U]*=-1,g[U][0]*=-1,g[U][1]*=-1,g[U][2]*=-1;return m[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),m[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),m[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),m[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(m[0]=-m[0]),g[0][2]>g[2][0]&&(m[1]=-m[1]),g[1][0]>g[0][1]&&(m[2]=-m[2]),!0}},4335:function(t){t.exports=function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}},7442:function(t,e,n){var r=n(6658),i=n(7182),a=n(2652),o=n(9921),s=n(8648),l=h(),c=h(),u=h();function h(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(t){return[t||0,t||0,t||0]}t.exports=function(t,e,n,h){if(0===o(e)||0===o(n))return!1;var d=a(e,l.translate,l.scale,l.skew,l.perspective,l.quaternion),g=a(n,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!d||!g)&&(r(u.translate,l.translate,c.translate,h),r(u.skew,l.skew,c.skew,h),r(u.scale,l.scale,c.scale,h),r(u.perspective,l.perspective,c.perspective,h),s(u.quaternion,l.quaternion,c.quaternion,h),i(t,u.translate,u.scale,u.skew,u.perspective,u.quaternion),!0)}},7182:function(t,e,n){var r={identity:n(7894),translate:n(7656),multiply:n(6760),create:n(6864),scale:n(2504),fromRotationTranslation:n(6743)};r.create();var i=r.create();t.exports=function(t,e,n,a,o,s){return r.identity(t),r.fromRotationTranslation(t,s,e),t[3]=o[0],t[7]=o[1],t[11]=o[2],t[15]=o[3],r.identity(i),0!==a[2]&&(i[9]=a[2],r.multiply(t,t,i)),0!==a[1]&&(i[9]=0,i[8]=a[1],r.multiply(t,t,i)),0!==a[0]&&(i[8]=0,i[4]=a[0],r.multiply(t,t,i)),r.scale(t,t,n),t}},4192:function(t,e,n){var r=n(2478),i=n(7442),a=n(7608),o=n(5567),s=n(2408),l=n(7089),c=n(6582),u=n(7656);n(2504);var h=n(3536),d=[0,0,0];function g(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=function(t){var e=(t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new g(e)};var f=g.prototype;f.recalcMatrix=function(t){var e=this._time,n=r.le(e,t),o=this.computedMatrix;if(!(n<0)){var s=this._components;if(n===e.length-1)for(var l=16*n,c=0;c<16;++c)o[c]=s[l++];else{var u=e[n+1]-e[n],d=(l=16*n,this.prevMatrix),g=!0;for(c=0;c<16;++c)d[c]=s[l++];var f=this.nextMatrix;for(c=0;c<16;++c)f[c]=s[l++],g=g&&d[c]===f[c];if(u<1e-6||g)for(c=0;c<16;++c)o[c]=d[c];else i(o,d,f,(t-e[n])/u)}var p=this.computedUp;p[0]=o[1],p[1]=o[5],p[2]=o[9],h(p,p);var v=this.computedInverse;a(v,o);var m=this.computedEye,y=v[15];m[0]=v[12]/y,m[1]=v[13]/y,m[2]=v[14]/y;var b=this.computedCenter,x=Math.exp(this.computedRadius[0]);for(c=0;c<3;++c)b[c]=m[c]-o[2+4*c]*x}},f.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,n=e.length-16,r=0;r<16;++r)e.push(e[n++]);this._time.push(t)}},f.flush=function(t){var e=r.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},f.lastT=function(){return this._time[this._time.length-1]},f.lookAt=function(t,e,n,r){this.recalcMatrix(t),e=e||this.computedEye,n=n||d,r=r||this.computedUp,this.setMatrix(t,c(this.computedMatrix,e,n,r));for(var i=0,a=0;a<3;++a)i+=Math.pow(n[a]-e[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},f.rotate=function(t,e,n,r){this.recalcMatrix(t);var i=this.computedInverse;e&&s(i,i,e),n&&o(i,i,n),r&&l(i,i,r),this.setMatrix(t,a(this.computedMatrix,i))};var p=[0,0,0];f.pan=function(t,e,n,r){p[0]=-(e||0),p[1]=-(n||0),p[2]=-(r||0),this.recalcMatrix(t);var i=this.computedInverse;u(i,i,p),this.setMatrix(t,a(i,i))},f.translate=function(t,e,n,r){p[0]=e||0,p[1]=n||0,p[2]=r||0,this.recalcMatrix(t);var i=this.computedMatrix;u(i,i,p),this.setMatrix(t,i)},f.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var n=0;n<16;++n)this._components.push(e[n])}},f.setDistance=function(t,e){this.computedRadius[0]=e},f.setDistanceLimits=function(t,e){var n=this._limits;n[0]=t,n[1]=e},f.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},3090:function(t,e,n){t.exports=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var a=new Array(e);for(i=0;i<e;++i)a[i]=i;a.sort((function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]}));var o=[a[0],a[1]],s=[a[0],a[1]];for(i=2;i<e;++i){for(var l=a[i],c=t[l],u=o.length;u>1&&r(t[o[u-2]],t[o[u-1]],c)<=0;)u-=1,o.pop();for(o.push(l),u=s.length;u>1&&r(t[s[u-2]],t[s[u-1]],c)>=0;)u-=1,s.pop();s.push(l)}n=new Array(s.length+o.length-2);for(var h=0,d=(i=0,o.length);i<d;++i)n[h++]=o[i];for(var g=s.length-2;g>0;--g)n[h++]=s[g];return n};var r=n(3250)[3]},351:function(t,e,n){t.exports=function(t,e){e||(e=t,t=window);var n=0,i=0,a=0,o={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function l(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==o.alt,o.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==o.shift,o.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==o.control,o.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==o.meta,o.meta=!!t.metaKey),e}function c(t,s){var c=r.x(s),u=r.y(s);"buttons"in s&&(t=0|s.buttons),(t!==n||c!==i||u!==a||l(s))&&(n=0|t,i=c||0,a=u||0,e&&e(n,i,a,o))}function u(t){c(0,t)}function h(){(n||i||a||o.shift||o.alt||o.meta||o.control)&&(i=a=0,n=0,o.shift=o.alt=o.control=o.meta=!1,e&&e(0,0,0,o))}function d(t){l(t)&&e&&e(n,i,a,o)}function g(t){0===r.buttons(t)?c(0,t):c(n,t)}function f(t){c(n|r.buttons(t),t)}function p(t){c(n&~r.buttons(t),t)}function v(){s||(s=!0,t.addEventListener("mousemove",g),t.addEventListener("mousedown",f),t.addEventListener("mouseup",p),t.addEventListener("mouseleave",u),t.addEventListener("mouseenter",u),t.addEventListener("mouseout",u),t.addEventListener("mouseover",u),t.addEventListener("blur",h),t.addEventListener("keyup",d),t.addEventListener("keydown",d),t.addEventListener("keypress",d),t!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}v();var m={element:t};return Object.defineProperties(m,{enabled:{get:function(){return s},set:function(e){e?v():function(){if(!s)return;s=!1,t.removeEventListener("mousemove",g),t.removeEventListener("mousedown",f),t.removeEventListener("mouseup",p),t.removeEventListener("mouseleave",u),t.removeEventListener("mouseenter",u),t.removeEventListener("mouseout",u),t.removeEventListener("mouseover",u),t.removeEventListener("blur",h),t.removeEventListener("keyup",d),t.removeEventListener("keydown",d),t.removeEventListener("keypress",d),t!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d))}()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),m};var r=n(4687)},24:function(t){var e={left:0,top:0};t.exports=function(t,n,r){n=n||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var i=t.clientX||0,a=t.clientY||0,o=(s=n,s===window||s===document||s===document.body?e:s.getBoundingClientRect());var s;return r[0]=i-o.left,r[1]=a-o.top,r}},4687:function(t,e){function n(t){return t.target||t.srcElement||window}e.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},e.element=n,e.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=n(t).getBoundingClientRect();return t.clientX-e.left}return 0},e.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=n(t).getBoundingClientRect();return t.clientY-e.top}return 0}},8512:function(t,e,n){var r=n(665);t.exports=function(t,e,n){"function"==typeof t&&(n=!!e,e=t,t=window);var i=r("ex",t),a=function(t){n&&t.preventDefault();var r=t.deltaX||0,a=t.deltaY||0,o=t.deltaZ||0,s=1;switch(t.deltaMode){case 1:s=i;break;case 2:s=window.innerHeight}if(a*=s,o*=s,(r*=s)||a||o)return e(r,a,o,t)};return t.addEventListener("wheel",a),a}},2640:function(t,e,n){var r=n(1888);t.exports=function(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var n=t.order;Array.isArray(n)||e("Must specify order");var a=t.arrayArguments||1;a<1&&e("Must have at least one array argument");var o=t.scalarArguments||0;o<0&&e("Scalar arg count must be > 0");"function"!=typeof t.vertex&&e("Must specify vertex creation function");"function"!=typeof t.cell&&e("Must specify cell creation function");"function"!=typeof t.phase&&e("Must specify phase function");for(var s=t.getters||[],l=new Array(a),c=0;c<a;++c)s.indexOf(c)>=0?l[c]=!0:l[c]=!1;return function(t,e,n,a,o,s){var l=[s,o].join(",");return(0,i[l])(t,e,n,r.mallocUint32,r.freeUint32)}(t.vertex,t.cell,t.phase,0,n,l)};var i={"false,0,1":function(t,e,n,r,i){return function(a,o,s,l){var c,u=0|a.shape[0],h=0|a.shape[1],d=a.data,g=0|a.offset,f=0|a.stride[0],p=0|a.stride[1],v=g,m=0|-f,y=0,b=0|-p,x=0,B=-f-p|0,I=0,F=0|f,Q=p-f*u|0,C=0,w=0,U=0,A=2*u|0,S=r(A),L=r(A),k=0,G=0,_=-1,R=-1,E=0,T=0|-u,M=0|u,N=0,D=-u-1|0,X=u-1|0,Z=0,V=0,H=0;for(C=0;C<u;++C)S[k++]=n(d[v],o,s,l),v+=F;if(v+=Q,h>0){if(w=1,S[k++]=n(d[v],o,s,l),v+=F,u>0)for(C=1,c=d[v],G=S[k]=n(c,o,s,l),E=S[k+_],N=S[k+T],Z=S[k+D],G===E&&G===N&&G===Z||(y=d[v+m],x=d[v+b],I=d[v+B],t(C,w,c,y,x,I,G,E,N,Z,o,s,l),V=L[k]=U++),k+=1,v+=F,C=2;C<u;++C)c=d[v],G=S[k]=n(c,o,s,l),E=S[k+_],N=S[k+T],Z=S[k+D],G===E&&G===N&&G===Z||(y=d[v+m],x=d[v+b],I=d[v+B],t(C,w,c,y,x,I,G,E,N,Z,o,s,l),V=L[k]=U++,Z!==E&&e(L[k+_],V,I,y,Z,E,o,s,l)),k+=1,v+=F;for(v+=Q,k=0,H=_,_=R,R=H,H=T,T=M,M=H,H=D,D=X,X=H,w=2;w<h;++w){if(S[k++]=n(d[v],o,s,l),v+=F,u>0)for(C=1,c=d[v],G=S[k]=n(c,o,s,l),E=S[k+_],N=S[k+T],Z=S[k+D],G===E&&G===N&&G===Z||(y=d[v+m],x=d[v+b],I=d[v+B],t(C,w,c,y,x,I,G,E,N,Z,o,s,l),V=L[k]=U++,Z!==N&&e(L[k+T],V,x,I,N,Z,o,s,l)),k+=1,v+=F,C=2;C<u;++C)c=d[v],G=S[k]=n(c,o,s,l),E=S[k+_],N=S[k+T],Z=S[k+D],G===E&&G===N&&G===Z||(y=d[v+m],x=d[v+b],I=d[v+B],t(C,w,c,y,x,I,G,E,N,Z,o,s,l),V=L[k]=U++,Z!==N&&e(L[k+T],V,x,I,N,Z,o,s,l),Z!==E&&e(L[k+_],V,I,y,Z,E,o,s,l)),k+=1,v+=F;1&w&&(k=0),H=_,_=R,R=H,H=T,T=M,M=H,H=D,D=X,X=H,v+=Q}}i(L),i(S)}},"false,1,0":function(t,e,n,r,i){return function(a,o,s,l){var c,u=0|a.shape[0],h=0|a.shape[1],d=a.data,g=0|a.offset,f=0|a.stride[0],p=0|a.stride[1],v=g,m=0|-f,y=0,b=0|-p,x=0,B=-f-p|0,I=0,F=0|p,Q=f-p*h|0,C=0,w=0,U=0,A=2*h|0,S=r(A),L=r(A),k=0,G=0,_=-1,R=-1,E=0,T=0|-h,M=0|h,N=0,D=-h-1|0,X=h-1|0,Z=0,V=0,H=0;for(w=0;w<h;++w)S[k++]=n(d[v],o,s,l),v+=F;if(v+=Q,u>0){if(C=1,S[k++]=n(d[v],o,s,l),v+=F,h>0)for(w=1,c=d[v],G=S[k]=n(c,o,s,l),N=S[k+T],E=S[k+_],Z=S[k+D],G===N&&G===E&&G===Z||(y=d[v+m],x=d[v+b],I=d[v+B],t(C,w,c,y,x,I,G,N,E,Z,o,s,l),V=L[k]=U++),k+=1,v+=F,w=2;w<h;++w)c=d[v],G=S[k]=n(c,o,s,l),N=S[k+T],E=S[k+_],Z=S[k+D],G===N&&G===E&&G===Z||(y=d[v+m],x=d[v+b],I=d[v+B],t(C,w,c,y,x,I,G,N,E,Z,o,s,l),V=L[k]=U++,Z!==E&&e(L[k+_],V,x,I,E,Z,o,s,l)),k+=1,v+=F;for(v+=Q,k=0,H=T,T=M,M=H,H=_,_=R,R=H,H=D,D=X,X=H,C=2;C<u;++C){if(S[k++]=n(d[v],o,s,l),v+=F,h>0)for(w=1,c=d[v],G=S[k]=n(c,o,s,l),N=S[k+T],E=S[k+_],Z=S[k+D],G===N&&G===E&&G===Z||(y=d[v+m],x=d[v+b],I=d[v+B],t(C,w,c,y,x,I,G,N,E,Z,o,s,l),V=L[k]=U++,Z!==N&&e(L[k+T],V,I,y,Z,N,o,s,l)),k+=1,v+=F,w=2;w<h;++w)c=d[v],G=S[k]=n(c,o,s,l),N=S[k+T],E=S[k+_],Z=S[k+D],G===N&&G===E&&G===Z||(y=d[v+m],x=d[v+b],I=d[v+B],t(C,w,c,y,x,I,G,N,E,Z,o,s,l),V=L[k]=U++,Z!==E&&e(L[k+_],V,x,I,E,Z,o,s,l),Z!==N&&e(L[k+T],V,I,y,Z,N,o,s,l)),k+=1,v+=F;1&C&&(k=0),H=T,T=M,M=H,H=_,_=R,R=H,H=D,D=X,X=H,v+=Q}}i(L),i(S)}}}},6199:function(t,e,n){var r=n(1338),i={zero:function(t,e,n,r){var i=t[0];r|=0;var a=0,o=n[0];for(a=0;a<i;++a)e[r]=0,r+=o},fdTemplate1:function(t,e,n,r,i,a,o){var s=t[0],l=n[0],c=-1*l,u=l;r|=0,o|=0;var h=0,d=l,g=a[0];for(h=0;h<s;++h)i[o]=.5*(e[r+c]-e[r+u]),r+=d,o+=g},fdTemplate2:function(t,e,n,r,i,a,o,s,l,c){var u=t[0],h=t[1],d=n[0],g=n[1],f=a[0],p=a[1],v=l[0],m=l[1],y=-1*d,b=d,x=-1*g,B=g;r|=0,o|=0,c|=0;var I=0,F=0,Q=g,C=d-h*g,w=p,U=f-h*p,A=m,S=v-h*m;for(F=0;F<u;++F){for(I=0;I<h;++I)i[o]=.5*(e[r+y]-e[r+b]),s[c]=.5*(e[r+x]-e[r+B]),r+=Q,o+=w,c+=A;r+=C,o+=U,c+=S}}},a={cdiff:function(t){var e={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=i.dtype,u=i.order,h=[a,o.join(),s,l.join(),c,u.join()].join(),d=e[h];return d||(e[h]=d=t([a,o,s,l,c,u])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}},zero:function(t){var e={};return function(n){var r=n.dtype,i=n.order,a=[r,i.join()].join(),o=e[a];return o||(e[a]=o=t([r,i])),o(n.shape.slice(0),n.data,n.stride,0|n.offset)}},fdTemplate1:function(t){var e={};return function(n,r){var i=n.dtype,a=n.order,o=r.dtype,s=r.order,l=[i,a.join(),o,s.join()].join(),c=e[l];return c||(e[l]=c=t([i,a,o,s])),c(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset)}},fdTemplate2:function(t){var e={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=i.dtype,u=i.order,h=[a,o.join(),s,l.join(),c,u.join()].join(),d=e[h];return d||(e[h]=d=t([a,o,s,l,c,u])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}}};function o(t){return(0,a[t.funcName])(s.bind(void 0,t))}function s(t){return i[t.funcName]}function l(t){return o({funcName:t.funcName})}var c={},u={},h=l({funcName:"cdiff"}),d=l({funcName:"zero"});function g(t){return t in c?c[t]:c[t]=l({funcName:"fdTemplate"+t})}function f(t,e,n,r){return function(t,i){var a=i.shape.slice();return a[0]>2&&a[1]>2&&r(i.pick(-1,-1).lo(1,1).hi(a[0]-2,a[1]-2),t.pick(-1,-1,0).lo(1,1).hi(a[0]-2,a[1]-2),t.pick(-1,-1,1).lo(1,1).hi(a[0]-2,a[1]-2)),a[1]>2&&(n(i.pick(0,-1).lo(1).hi(a[1]-2),t.pick(0,-1,1).lo(1).hi(a[1]-2)),e(t.pick(0,-1,0).lo(1).hi(a[1]-2))),a[1]>2&&(n(i.pick(a[0]-1,-1).lo(1).hi(a[1]-2),t.pick(a[0]-1,-1,1).lo(1).hi(a[1]-2)),e(t.pick(a[0]-1,-1,0).lo(1).hi(a[1]-2))),a[0]>2&&(n(i.pick(-1,0).lo(1).hi(a[0]-2),t.pick(-1,0,0).lo(1).hi(a[0]-2)),e(t.pick(-1,0,1).lo(1).hi(a[0]-2))),a[0]>2&&(n(i.pick(-1,a[1]-1).lo(1).hi(a[0]-2),t.pick(-1,a[1]-1,0).lo(1).hi(a[0]-2)),e(t.pick(-1,a[1]-1,1).lo(1).hi(a[0]-2))),t.set(0,0,0,0),t.set(0,0,1,0),t.set(a[0]-1,0,0,0),t.set(a[0]-1,0,1,0),t.set(0,a[1]-1,0,0),t.set(0,a[1]-1,1,0),t.set(a[0]-1,a[1]-1,0,0),t.set(a[0]-1,a[1]-1,1,0),t}}t.exports=function(t,e,n){if(Array.isArray(n)||(n=r(e.dimension,"string"==typeof n?n:"clamp")),0===e.size)return t;if(0===e.dimension)return t.set(0),t;var i=function(t){var e=t.join();if(a=u[e])return a;for(var n=t.length,r=[h,d],i=1;i<=n;++i)r.push(g(i));var a=f.apply(void 0,r);return u[e]=a,a}(n);return i(t,e)}},4317:function(t){function e(t,e){var n=Math.floor(e),r=e-n,i=0<=n&&n<t.shape[0],a=0<=n+1&&n+1<t.shape[0];return(1-r)*(i?+t.get(n):0)+r*(a?+t.get(n+1):0)}function n(t,e,n){var r=Math.floor(e),i=e-r,a=0<=r&&r<t.shape[0],o=0<=r+1&&r+1<t.shape[0],s=Math.floor(n),l=n-s,c=0<=s&&s<t.shape[1],u=0<=s+1&&s+1<t.shape[1],h=a&&c?t.get(r,s):0,d=a&&u?t.get(r,s+1):0;return(1-l)*((1-i)*h+i*(o&&c?t.get(r+1,s):0))+l*((1-i)*d+i*(o&&u?t.get(r+1,s+1):0))}function r(t,e,n,r){var i=Math.floor(e),a=e-i,o=0<=i&&i<t.shape[0],s=0<=i+1&&i+1<t.shape[0],l=Math.floor(n),c=n-l,u=0<=l&&l<t.shape[1],h=0<=l+1&&l+1<t.shape[1],d=Math.floor(r),g=r-d,f=0<=d&&d<t.shape[2],p=0<=d+1&&d+1<t.shape[2],v=o&&u&&f?t.get(i,l,d):0,m=o&&h&&f?t.get(i,l+1,d):0,y=s&&u&&f?t.get(i+1,l,d):0,b=s&&h&&f?t.get(i+1,l+1,d):0,x=o&&u&&p?t.get(i,l,d+1):0,B=o&&h&&p?t.get(i,l+1,d+1):0;return(1-g)*((1-c)*((1-a)*v+a*y)+c*((1-a)*m+a*b))+g*((1-c)*((1-a)*x+a*(s&&u&&p?t.get(i+1,l,d+1):0))+c*((1-a)*B+a*(s&&h&&p?t.get(i+1,l+1,d+1):0)))}function i(t){var e,n,r=0|t.shape.length,i=new Array(r),a=new Array(r),o=new Array(r),s=new Array(r);for(e=0;e<r;++e)n=+arguments[e+1],i[e]=Math.floor(n),a[e]=n-i[e],o[e]=0<=i[e]&&i[e]<t.shape[e],s[e]=0<=i[e]+1&&i[e]+1<t.shape[e];var l,c,u,h=0;t:for(e=0;e<1<<r;++e){for(c=1,u=t.offset,l=0;l<r;++l)if(e&1<<l){if(!s[l])continue t;c*=a[l],u+=t.stride[l]*(i[l]+1)}else{if(!o[l])continue t;c*=1-a[l],u+=t.stride[l]*i[l]}h+=c*t.data[u]}return h}t.exports=function(t,a,o,s){switch(t.shape.length){case 0:return 0;case 1:return e(t,a);case 2:return n(t,a,o);case 3:return r(t,a,o,s);default:return i.apply(void 0,arguments)}},t.exports.d1=e,t.exports.d2=n,t.exports.d3=r},5298:function(t,e){var n={"float64,2,1,0":function(){return function(t,e,n,r,i){var a=t[0],o=t[1],s=t[2],l=n[0],c=n[1],u=n[2];r|=0;var h=0,d=0,g=0,f=u,p=c-s*u,v=l-o*c;for(g=0;g<a;++g){for(d=0;d<o;++d){for(h=0;h<s;++h)e[r]/=i,r+=f;r+=p}r+=v}}},"uint8,2,0,1,float64,2,1,0":function(){return function(t,e,n,r,i,a,o,s){for(var l=t[0],c=t[1],u=t[2],h=n[0],d=n[1],g=n[2],f=a[0],p=a[1],v=a[2],m=r|=0,y=o|=0,b=0|t[0];b>0;){b<64?(l=b,b=0):(l=64,b-=64);for(var x=0|t[1];x>0;){x<64?(c=x,x=0):(c=64,x-=64),r=m+b*h+x*d,o=y+b*f+x*p;var B=0,I=0,F=0,Q=g,C=h-u*g,w=d-l*h,U=v,A=f-u*v,S=p-l*f;for(F=0;F<c;++F){for(I=0;I<l;++I){for(B=0;B<u;++B)e[r]=i[o]*s,r+=Q,o+=U;r+=C,o+=A}r+=w,o+=S}}}}},"float32,1,0,float32,1,0":function(){return function(t,e,n,r,i,a,o){var s=t[0],l=t[1],c=n[0],u=n[1],h=a[0],d=a[1];r|=0,o|=0;var g=0,f=0,p=u,v=c-l*u,m=d,y=h-l*d;for(f=0;f<s;++f){for(g=0;g<l;++g)e[r]=i[o],r+=p,o+=m;r+=v,o+=y}}},"float32,1,0,float32,0,1":function(){return function(t,e,n,r,i,a,o){for(var s=t[0],l=t[1],c=n[0],u=n[1],h=a[0],d=a[1],g=r|=0,f=o|=0,p=0|t[1];p>0;){p<64?(l=p,p=0):(l=64,p-=64);for(var v=0|t[0];v>0;){v<64?(s=v,v=0):(s=64,v-=64),r=g+p*u+v*c,o=f+p*d+v*h;var m=0,y=0,b=u,x=c-l*u,B=d,I=h-l*d;for(y=0;y<s;++y){for(m=0;m<l;++m)e[r]=i[o],r+=b,o+=B;r+=x,o+=I}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(t,e,n,r,i,a,o){for(var s=t[0],l=t[1],c=t[2],u=n[0],h=n[1],d=n[2],g=a[0],f=a[1],p=a[2],v=r|=0,m=o|=0,y=0|t[2];y>0;){y<64?(c=y,y=0):(c=64,y-=64);for(var b=0|t[0];b>0;){b<64?(s=b,b=0):(s=64,b-=64);for(var x=0|t[1];x>0;){x<64?(l=x,x=0):(l=64,x-=64),r=v+y*d+b*u+x*h,o=m+y*p+b*g+x*f;var B=0,I=0,F=0,Q=d,C=u-c*d,w=h-s*u,U=p,A=g-c*p,S=f-s*g;for(F=0;F<l;++F){for(I=0;I<s;++I){for(B=0;B<c;++B)e[r]=i[o],r+=Q,o+=U;r+=C,o+=A}r+=w,o+=S}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(t,e,n,r,i,a,o){var s=t[0],l=t[1],c=t[2],u=n[0],h=n[1],d=n[2],g=a[0],f=a[1],p=a[2];r|=0,o|=0;var v=0,m=0,y=0,b=d,x=u-c*d,B=h-s*u,I=p,F=g-c*p,Q=f-s*g;for(y=0;y<l;++y){for(m=0;m<s;++m){for(v=0;v<c;++v)e[r]=i[o],r+=b,o+=I;r+=x,o+=F}r+=B,o+=Q}}}};var r=function(t,e){var r=e.join(",");return(0,n[r])()},i={mul:function(t){var e={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=i.dtype,u=i.order,h=[a,o.join(),s,l.join(),c,u.join()].join(),d=e[h];return d||(e[h]=d=t([a,o,s,l,c,u])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}},muls:function(t){var e={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=[a,o.join(),s,l.join()].join(),u=e[c];return u||(e[c]=u=t([a,o,s,l])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i)}},mulseq:function(t){var e={};return function(n,r){var i=n.dtype,a=n.order,o=[i,a.join()].join(),s=e[o];return s||(e[o]=s=t([i,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,r)}},div:function(t){var e={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=i.dtype,u=i.order,h=[a,o.join(),s,l.join(),c,u.join()].join(),d=e[h];return d||(e[h]=d=t([a,o,s,l,c,u])),d(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}},divs:function(t){var e={};return function(n,r,i){var a=n.dtype,o=n.order,s=r.dtype,l=r.order,c=[a,o.join(),s,l.join()].join(),u=e[c];return u||(e[c]=u=t([a,o,s,l])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset,i)}},divseq:function(t){var e={};return function(n,r){var i=n.dtype,a=n.order,o=[i,a.join()].join(),s=e[o];return s||(e[o]=s=t([i,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,r)}},assign:function(t){var e={};return function(n,r){var i=n.dtype,a=n.order,o=r.dtype,s=r.order,l=[i,a.join(),o,s.join()].join(),c=e[l];return c||(e[l]=c=t([i,a,o,s])),c(n.shape.slice(0),n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset)}}};function a(t){return e={funcName:t.funcName},(0,i[e.funcName])(r.bind(void 0,e));var e}var o={mul:"*",div:"/"};!function(){for(var t in o)e[t]=a({funcName:t}),e[t+"s"]=a({funcName:t+"s"}),e[t+"seq"]=a({funcName:t+"seq"})}(),e.assign=a({funcName:"assign"})},9994:function(t,e,n){var r=n(9618),i=n(8277);t.exports=function(t,e){for(var n=[],a=t,o=1;Array.isArray(a);)n.push(a.length),o*=a.length,a=a[0];return 0===n.length?r():(e||(e=r(new Float64Array(o),n)),i(e,t),e)}},8277:function(t){var e,n=function(){return function(t,e,n,r,i){var a=t[0],o=t[1],s=t[2],l=n[0],c=n[1],u=n[2],h=[0,0,0];r|=0;var d=0,g=0,f=0,p=u,v=c-s*u,m=l-o*c;for(f=0;f<a;++f){for(g=0;g<o;++g){for(d=0;d<s;++d){var y,b=i;for(y=0;y<h.length-1;++y)b=b[h[y]];e[r]=b[h[h.length-1]],r+=p,++h[2]}r+=v,h[2]-=s,++h[1]}r+=m,h[1]-=o,++h[0]}}};t.exports=(e={funcName:{funcName:"convert"}.funcName},function(t){var e={};return function(n,r){var i=n.dtype,a=n.order,o=[i,a.join()].join(),s=e[o];return s||(e[o]=s=t([i,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,r)}}(n.bind(void 0,e)))},7640:function(t,e,n){var r=n(1888);function i(t){return"uint32"===t?[r.mallocUint32,r.freeUint32]:null}var a={"uint32,1,0":function(t,e){return function(n,r,i,a,o,s,l,c,u,h,d){var g,f,p,v,m,y,b,x,B=n*o+a,I=t(c);for(g=n+1;g<=r;++g){for(f=g,p=B+=o,m=0,y=B,v=0;v<c;++v)I[m++]=i[y],y+=u;t:for(;f-- >n;){m=0,y=p-o;e:for(v=0;v<c;++v){if((b=i[y])<(x=I[m]))break t;if(b>x)break e;y+=h,m+=d}for(m=p,y=p-o,v=0;v<c;++v)i[m]=i[y],m+=u,y+=u;p-=o}for(m=p,y=0,v=0;v<c;++v)i[m]=I[y++],m+=u}e(I)}}};var o={"uint32,1,0":function(t,e,n){return function r(i,a,o,s,l,c,u,h,d,g,f){var p,v,m,y,b,x,B,I,F,Q,C,w,U,A,S,L,k,G,_,R,E,T,M,N,D,X=(a-i+1)/6|0,Z=i+X,V=a-X,H=i+a>>1,W=H-X,Y=H+X,z=Z,O=W,J=H,P=Y,j=V,K=i+1,q=a-1,$=!0,tt=0,et=0,nt=0,rt=h,it=e(rt),at=e(rt);C=l*z,w=l*O,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=z,z=O,O=v;break t}if(nt<0)break t;D+=g}C=l*P,w=l*j,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=P,P=j,j=v;break t}if(nt<0)break t;D+=g}C=l*z,w=l*J,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=z,z=J,J=v;break t}if(nt<0)break t;D+=g}C=l*O,w=l*J,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=O,O=J,J=v;break t}if(nt<0)break t;D+=g}C=l*z,w=l*P,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=z,z=P,P=v;break t}if(nt<0)break t;D+=g}C=l*J,w=l*P,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=J,J=P,P=v;break t}if(nt<0)break t;D+=g}C=l*O,w=l*j,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=O,O=j,j=v;break t}if(nt<0)break t;D+=g}C=l*O,w=l*J,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=O,O=J,J=v;break t}if(nt<0)break t;D+=g}C=l*P,w=l*j,D=s;t:for(Q=0;Q<h;++Q){if(I=w+D,(nt=o[B=C+D]-o[I])>0){v=P,P=j,j=v;break t}if(nt<0)break t;D+=g}for(C=l*z,w=l*O,U=l*J,A=l*P,S=l*j,L=l*Z,k=l*H,G=l*V,N=0,D=s,Q=0;Q<h;++Q)B=C+D,I=w+D,F=U+D,_=A+D,R=S+D,E=L+D,T=k+D,M=G+D,it[N]=o[I],at[N]=o[_],$=$&&it[N]===at[N],m=o[B],y=o[F],b=o[R],o[E]=m,o[T]=y,o[M]=b,++N,D+=d;for(C=l*W,w=l*i,D=s,Q=0;Q<h;++Q)I=w+D,o[B=C+D]=o[I],D+=d;for(C=l*Y,w=l*a,D=s,Q=0;Q<h;++Q)I=w+D,o[B=C+D]=o[I],D+=d;if($)for(x=K;x<=q;++x){B=s+x*l,N=0;t:for(Q=0;Q<h&&0===(nt=o[B]-it[N]);++Q)N+=f,B+=g;if(0!==nt)if(nt<0){if(x!==K)for(C=l*x,w=l*K,D=s,Q=0;Q<h;++Q)I=w+D,p=o[B=C+D],o[B]=o[I],o[I]=p,D+=d;++K}else for(;;){B=s+q*l,N=0;t:for(Q=0;Q<h&&0===(nt=o[B]-it[N]);++Q)N+=f,B+=g;if(!(nt>0)){if(nt<0){for(C=l*x,w=l*K,U=l*q,D=s,Q=0;Q<h;++Q)I=w+D,F=U+D,p=o[B=C+D],o[B]=o[I],o[I]=o[F],o[F]=p,D+=d;++K,--q;break}for(C=l*x,w=l*q,D=s,Q=0;Q<h;++Q)I=w+D,p=o[B=C+D],o[B]=o[I],o[I]=p,D+=d;--q;break}q--}}else for(x=K;x<=q;++x){B=s+x*l,N=0;t:for(Q=0;Q<h&&0===(tt=o[B]-it[N]);++Q)N+=f,B+=g;if(tt<0){if(x!==K)for(C=l*x,w=l*K,D=s,Q=0;Q<h;++Q)I=w+D,p=o[B=C+D],o[B]=o[I],o[I]=p,D+=d;++K}else{B=s+x*l,N=0;t:for(Q=0;Q<h&&0===(et=o[B]-at[N]);++Q)N+=f,B+=g;if(et>0)for(;;){B=s+q*l,N=0;t:for(Q=0;Q<h&&0===(nt=o[B]-at[N]);++Q)N+=f,B+=g;if(!(nt>0)){B=s+q*l,N=0;t:for(Q=0;Q<h&&0===(nt=o[B]-it[N]);++Q)N+=f,B+=g;if(nt<0){for(C=l*x,w=l*K,U=l*q,D=s,Q=0;Q<h;++Q)I=w+D,F=U+D,p=o[B=C+D],o[B]=o[I],o[I]=o[F],o[F]=p,D+=d;++K,--q}else{for(C=l*x,w=l*q,D=s,Q=0;Q<h;++Q)I=w+D,p=o[B=C+D],o[B]=o[I],o[I]=p,D+=d;--q}break}if(--q<x)break}}}for(C=l*i,w=l*(K-1),N=0,D=s,Q=0;Q<h;++Q)I=w+D,o[B=C+D]=o[I],o[I]=it[N],++N,D+=d;for(C=l*a,w=l*(q+1),N=0,D=s,Q=0;Q<h;++Q)I=w+D,o[B=C+D]=o[I],o[I]=at[N],++N,D+=d;if(K-2-i<=32?t(i,K-2,o,s,l,c,u,h,d,g,f):r(i,K-2,o,s,l,c,u,h,d,g,f),a-(q+2)<=32?t(q+2,a,o,s,l,c,u,h,d,g,f):r(q+2,a,o,s,l,c,u,h,d,g,f),$)return n(it),void n(at);if(K<Z&&q>V){t:for(;;){for(B=s+K*l,N=0,D=s,Q=0;Q<h;++Q){if(o[B]!==it[N])break t;++N,B+=d}++K}t:for(;;){for(B=s+q*l,N=0,D=s,Q=0;Q<h;++Q){if(o[B]!==at[N])break t;++N,B+=d}--q}for(x=K;x<=q;++x){B=s+x*l,N=0;t:for(Q=0;Q<h&&0===(tt=o[B]-it[N]);++Q)N+=f,B+=g;if(0===tt){if(x!==K)for(C=l*x,w=l*K,D=s,Q=0;Q<h;++Q)I=w+D,p=o[B=C+D],o[B]=o[I],o[I]=p,D+=d;++K}else{B=s+x*l,N=0;t:for(Q=0;Q<h&&0===(et=o[B]-at[N]);++Q)N+=f,B+=g;if(0===et)for(;;){B=s+q*l,N=0;t:for(Q=0;Q<h&&0===(nt=o[B]-at[N]);++Q)N+=f,B+=g;if(0!==nt){B=s+q*l,N=0;t:for(Q=0;Q<h&&0===(nt=o[B]-it[N]);++Q)N+=f,B+=g;if(nt<0){for(C=l*x,w=l*K,U=l*q,D=s,Q=0;Q<h;++Q)I=w+D,F=U+D,p=o[B=C+D],o[B]=o[I],o[I]=o[F],o[F]=p,D+=d;++K,--q}else{for(C=l*x,w=l*q,D=s,Q=0;Q<h;++Q)I=w+D,p=o[B=C+D],o[B]=o[I],o[I]=p,D+=d;--q}break}if(--q<x)break}}}}n(it),n(at),q-K<=32?t(K,q,o,s,l,c,u,h,d,g,f):r(K,q,o,s,l,c,u,h,d,g,f)}}};var s={"uint32,1,0":function(t,e){return function(n){var r=n.data,i=0|n.offset,a=n.shape,o=n.stride,s=0|o[0],l=0|a[0],c=0|o[1],u=0|a[1],h=c,d=c;l<=32?t(0,l-1,r,i,s,c,l,u,h,d,1):e(0,l-1,r,i,s,c,l,u,h,d,1)}}};t.exports=function(t,e){var n=[e,t].join(","),r=s[n],l=function(t,e){var n=i(e),r=[e,t].join(","),o=a[r];return n?o(n[0],n[1]):o()}(t,e),c=function(t,e,n){var r=i(e),a=[e,t].join(","),s=o[a];return t.length>1&&r?s(n,r[0],r[1]):s(n)}(t,e,l);return r(l,c)}},446:function(t,e,n){var r=n(7640),i={};t.exports=function(t){var e=t.order,n=t.dtype,a=[e,n].join(":"),o=i[a];return o||(i[a]=o=r(e,n)),o(t),t}},9618:function(t,e,n){var r=n(7163),i="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function o(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(a);var r=new Array(n.length);for(t=0;t<r.length;++t)r[t]=n[t][1];return r}var s={T:function(t){function e(t){this.data=t}var n=e.prototype;return n.dtype=t,n.index=function(){return-1},n.size=0,n.dimension=-1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new e(this.data)},n.get=n.set=function(){},n.pick=function(){return null},function(t){return new e(t)}},0:function(t,e){function n(t,e){this.data=t,this.offset=e}var r=n.prototype;return r.dtype=t,r.index=function(){return this.offset},r.dimension=0,r.size=1,r.shape=r.stride=r.order=[],r.lo=r.hi=r.transpose=r.step=function(){return new n(this.data,this.offset)},r.pick=function(){return e(this.data)},r.valueOf=r.get=function(){return"generic"===t?this.data.get(this.offset):this.data[this.offset]},r.set=function(e){return"generic"===t?this.data.set(this.offset,e):this.data[this.offset]=e},function(t,e,r,i){return new n(t,i)}},1:function(t,e,n){function r(t,e,n,r){this.data=t,this.shape=[e],this.stride=[n],this.offset=0|r}var i=r.prototype;return i.dtype=t,i.dimension=1,Object.defineProperty(i,"size",{get:function(){return this.shape[0]}}),i.order=[0],i.set=function(e,n){return"generic"===t?this.data.set(this.offset+this.stride[0]*e,n):this.data[this.offset+this.stride[0]*e]=n},i.get=function(e){return"generic"===t?this.data.get(this.offset+this.stride[0]*e):this.data[this.offset+this.stride[0]*e]},i.index=function(t){return this.offset+this.stride[0]*t},i.hi=function(t){return new r(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,this.stride[0],this.offset)},i.lo=function(t){var e=this.offset,n=0,i=this.shape[0],a=this.stride[0];return"number"==typeof t&&t>=0&&(e+=a*(n=0|t),i-=n),new r(this.data,i,a,e)},i.step=function(t){var e=this.shape[0],n=this.stride[0],i=this.offset,a=0,o=Math.ceil;return"number"==typeof t&&((a=0|t)<0?(i+=n*(e-1),e=o(-e/a)):e=o(e/a),n*=a),new r(this.data,e,n,i)},i.transpose=function(t){t=void 0===t?0:0|t;var e=this.shape,n=this.stride;return new r(this.data,e[t],n[t],this.offset)},i.pick=function(t){var n=[],r=[],i=this.offset;return"number"==typeof t&&t>=0?i=i+this.stride[0]*t|0:(n.push(this.shape[0]),r.push(this.stride[0])),(0,e[n.length+1])(this.data,n,r,i)},function(t,e,n,i){return new r(t,e[0],n[0],i)}},2:function(t,e,n){function r(t,e,n,r,i,a){this.data=t,this.shape=[e,n],this.stride=[r,i],this.offset=0|a}var i=r.prototype;return i.dtype=t,i.dimension=2,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(i,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),i.set=function(e,n,r){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*n,r):this.data[this.offset+this.stride[0]*e+this.stride[1]*n]=r},i.get=function(e,n){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*n):this.data[this.offset+this.stride[0]*e+this.stride[1]*n]},i.index=function(t,e){return this.offset+this.stride[0]*t+this.stride[1]*e},i.hi=function(t,e){return new r(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,this.stride[0],this.stride[1],this.offset)},i.lo=function(t,e){var n=this.offset,i=0,a=this.shape[0],o=this.shape[1],s=this.stride[0],l=this.stride[1];return"number"==typeof t&&t>=0&&(n+=s*(i=0|t),a-=i),"number"==typeof e&&e>=0&&(n+=l*(i=0|e),o-=i),new r(this.data,a,o,s,l,n)},i.step=function(t,e){var n=this.shape[0],i=this.shape[1],a=this.stride[0],o=this.stride[1],s=this.offset,l=0,c=Math.ceil;return"number"==typeof t&&((l=0|t)<0?(s+=a*(n-1),n=c(-n/l)):n=c(n/l),a*=l),"number"==typeof e&&((l=0|e)<0?(s+=o*(i-1),i=c(-i/l)):i=c(i/l),o*=l),new r(this.data,n,i,a,o,s)},i.transpose=function(t,e){t=void 0===t?0:0|t,e=void 0===e?1:0|e;var n=this.shape,i=this.stride;return new r(this.data,n[t],n[e],i[t],i[e],this.offset)},i.pick=function(t,n){var r=[],i=[],a=this.offset;return"number"==typeof t&&t>=0?a=a+this.stride[0]*t|0:(r.push(this.shape[0]),i.push(this.stride[0])),"number"==typeof n&&n>=0?a=a+this.stride[1]*n|0:(r.push(this.shape[1]),i.push(this.stride[1])),(0,e[r.length+1])(this.data,r,i,a)},function(t,e,n,i){return new r(t,e[0],e[1],n[0],n[1],i)}},3:function(t,e,n){function r(t,e,n,r,i,a,o,s){this.data=t,this.shape=[e,n,r],this.stride=[i,a,o],this.offset=0|s}var i=r.prototype;return i.dtype=t,i.dimension=3,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(i,"order",{get:function(){var t=Math.abs(this.stride[0]),e=Math.abs(this.stride[1]),n=Math.abs(this.stride[2]);return t>e?e>n?[2,1,0]:t>n?[1,2,0]:[1,0,2]:t>n?[2,0,1]:n>e?[0,1,2]:[0,2,1]}}),i.set=function(e,n,r,i){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r,i):this.data[this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r]=i},i.get=function(e,n,r){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r):this.data[this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r]},i.index=function(t,e,n){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*n},i.hi=function(t,e,n){return new r(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof n||n<0?this.shape[2]:0|n,this.stride[0],this.stride[1],this.stride[2],this.offset)},i.lo=function(t,e,n){var i=this.offset,a=0,o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.stride[0],u=this.stride[1],h=this.stride[2];return"number"==typeof t&&t>=0&&(i+=c*(a=0|t),o-=a),"number"==typeof e&&e>=0&&(i+=u*(a=0|e),s-=a),"number"==typeof n&&n>=0&&(i+=h*(a=0|n),l-=a),new r(this.data,o,s,l,c,u,h,i)},i.step=function(t,e,n){var i=this.shape[0],a=this.shape[1],o=this.shape[2],s=this.stride[0],l=this.stride[1],c=this.stride[2],u=this.offset,h=0,d=Math.ceil;return"number"==typeof t&&((h=0|t)<0?(u+=s*(i-1),i=d(-i/h)):i=d(i/h),s*=h),"number"==typeof e&&((h=0|e)<0?(u+=l*(a-1),a=d(-a/h)):a=d(a/h),l*=h),"number"==typeof n&&((h=0|n)<0?(u+=c*(o-1),o=d(-o/h)):o=d(o/h),c*=h),new r(this.data,i,a,o,s,l,c,u)},i.transpose=function(t,e,n){t=void 0===t?0:0|t,e=void 0===e?1:0|e,n=void 0===n?2:0|n;var i=this.shape,a=this.stride;return new r(this.data,i[t],i[e],i[n],a[t],a[e],a[n],this.offset)},i.pick=function(t,n,r){var i=[],a=[],o=this.offset;return"number"==typeof t&&t>=0?o=o+this.stride[0]*t|0:(i.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof n&&n>=0?o=o+this.stride[1]*n|0:(i.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof r&&r>=0?o=o+this.stride[2]*r|0:(i.push(this.shape[2]),a.push(this.stride[2])),(0,e[i.length+1])(this.data,i,a,o)},function(t,e,n,i){return new r(t,e[0],e[1],e[2],n[0],n[1],n[2],i)}},4:function(t,e,n){function r(t,e,n,r,i,a,o,s,l,c){this.data=t,this.shape=[e,n,r,i],this.stride=[a,o,s,l],this.offset=0|c}var i=r.prototype;return i.dtype=t,i.dimension=4,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(i,"order",{get:n}),i.set=function(e,n,r,i,a){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i,a):this.data[this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i]=a},i.get=function(e,n,r,i){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i):this.data[this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i]},i.index=function(t,e,n,r){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*n+this.stride[3]*r},i.hi=function(t,e,n,i){return new r(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof i||i<0?this.shape[3]:0|i,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},i.lo=function(t,e,n,i){var a=this.offset,o=0,s=this.shape[0],l=this.shape[1],c=this.shape[2],u=this.shape[3],h=this.stride[0],d=this.stride[1],g=this.stride[2],f=this.stride[3];return"number"==typeof t&&t>=0&&(a+=h*(o=0|t),s-=o),"number"==typeof e&&e>=0&&(a+=d*(o=0|e),l-=o),"number"==typeof n&&n>=0&&(a+=g*(o=0|n),c-=o),"number"==typeof i&&i>=0&&(a+=f*(o=0|i),u-=o),new r(this.data,s,l,c,u,h,d,g,f,a)},i.step=function(t,e,n,i){var a=this.shape[0],o=this.shape[1],s=this.shape[2],l=this.shape[3],c=this.stride[0],u=this.stride[1],h=this.stride[2],d=this.stride[3],g=this.offset,f=0,p=Math.ceil;return"number"==typeof t&&((f=0|t)<0?(g+=c*(a-1),a=p(-a/f)):a=p(a/f),c*=f),"number"==typeof e&&((f=0|e)<0?(g+=u*(o-1),o=p(-o/f)):o=p(o/f),u*=f),"number"==typeof n&&((f=0|n)<0?(g+=h*(s-1),s=p(-s/f)):s=p(s/f),h*=f),"number"==typeof i&&((f=0|i)<0?(g+=d*(l-1),l=p(-l/f)):l=p(l/f),d*=f),new r(this.data,a,o,s,l,c,u,h,d,g)},i.transpose=function(t,e,n,i){t=void 0===t?0:0|t,e=void 0===e?1:0|e,n=void 0===n?2:0|n,i=void 0===i?3:0|i;var a=this.shape,o=this.stride;return new r(this.data,a[t],a[e],a[n],a[i],o[t],o[e],o[n],o[i],this.offset)},i.pick=function(t,n,r,i){var a=[],o=[],s=this.offset;return"number"==typeof t&&t>=0?s=s+this.stride[0]*t|0:(a.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof n&&n>=0?s=s+this.stride[1]*n|0:(a.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof r&&r>=0?s=s+this.stride[2]*r|0:(a.push(this.shape[2]),o.push(this.stride[2])),"number"==typeof i&&i>=0?s=s+this.stride[3]*i|0:(a.push(this.shape[3]),o.push(this.stride[3])),(0,e[a.length+1])(this.data,a,o,s)},function(t,e,n,i){return new r(t,e[0],e[1],e[2],e[3],n[0],n[1],n[2],n[3],i)}},5:function(t,e,n){function r(t,e,n,r,i,a,o,s,l,c,u,h){this.data=t,this.shape=[e,n,r,i,a],this.stride=[o,s,l,c,u],this.offset=0|h}var i=r.prototype;return i.dtype=t,i.dimension=5,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(i,"order",{get:n}),i.set=function(e,n,r,i,a,o){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i+this.stride[4]*a,o):this.data[this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i+this.stride[4]*a]=o},i.get=function(e,n,r,i,a){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i+this.stride[4]*a):this.data[this.offset+this.stride[0]*e+this.stride[1]*n+this.stride[2]*r+this.stride[3]*i+this.stride[4]*a]},i.index=function(t,e,n,r,i){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*n+this.stride[3]*r+this.stride[4]*i},i.hi=function(t,e,n,i,a){return new r(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof i||i<0?this.shape[3]:0|i,"number"!=typeof a||a<0?this.shape[4]:0|a,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},i.lo=function(t,e,n,i,a){var o=this.offset,s=0,l=this.shape[0],c=this.shape[1],u=this.shape[2],h=this.shape[3],d=this.shape[4],g=this.stride[0],f=this.stride[1],p=this.stride[2],v=this.stride[3],m=this.stride[4];return"number"==typeof t&&t>=0&&(o+=g*(s=0|t),l-=s),"number"==typeof e&&e>=0&&(o+=f*(s=0|e),c-=s),"number"==typeof n&&n>=0&&(o+=p*(s=0|n),u-=s),"number"==typeof i&&i>=0&&(o+=v*(s=0|i),h-=s),"number"==typeof a&&a>=0&&(o+=m*(s=0|a),d-=s),new r(this.data,l,c,u,h,d,g,f,p,v,m,o)},i.step=function(t,e,n,i,a){var o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.shape[3],u=this.shape[4],h=this.stride[0],d=this.stride[1],g=this.stride[2],f=this.stride[3],p=this.stride[4],v=this.offset,m=0,y=Math.ceil;return"number"==typeof t&&((m=0|t)<0?(v+=h*(o-1),o=y(-o/m)):o=y(o/m),h*=m),"number"==typeof e&&((m=0|e)<0?(v+=d*(s-1),s=y(-s/m)):s=y(s/m),d*=m),"number"==typeof n&&((m=0|n)<0?(v+=g*(l-1),l=y(-l/m)):l=y(l/m),g*=m),"number"==typeof i&&((m=0|i)<0?(v+=f*(c-1),c=y(-c/m)):c=y(c/m),f*=m),"number"==typeof a&&((m=0|a)<0?(v+=p*(u-1),u=y(-u/m)):u=y(u/m),p*=m),new r(this.data,o,s,l,c,u,h,d,g,f,p,v)},i.transpose=function(t,e,n,i,a){t=void 0===t?0:0|t,e=void 0===e?1:0|e,n=void 0===n?2:0|n,i=void 0===i?3:0|i,a=void 0===a?4:0|a;var o=this.shape,s=this.stride;return new r(this.data,o[t],o[e],o[n],o[i],o[a],s[t],s[e],s[n],s[i],s[a],this.offset)},i.pick=function(t,n,r,i,a){var o=[],s=[],l=this.offset;return"number"==typeof t&&t>=0?l=l+this.stride[0]*t|0:(o.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof n&&n>=0?l=l+this.stride[1]*n|0:(o.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof r&&r>=0?l=l+this.stride[2]*r|0:(o.push(this.shape[2]),s.push(this.stride[2])),"number"==typeof i&&i>=0?l=l+this.stride[3]*i|0:(o.push(this.shape[3]),s.push(this.stride[3])),"number"==typeof a&&a>=0?l=l+this.stride[4]*a|0:(o.push(this.shape[4]),s.push(this.stride[4])),(0,e[o.length+1])(this.data,o,s,l)},function(t,e,n,i){return new r(t,e[0],e[1],e[2],e[3],e[4],n[0],n[1],n[2],n[3],n[4],i)}}};function l(t,e){var n=-1===e?"T":String(e),r=s[n];return-1===e?r(t):0===e?r(t,c[t][0]):r(t,c[t],o)}var c={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};t.exports=function(t,e,n,a){if(void 0===t)return(0,c.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var o=e.length;if(void 0===n){n=new Array(o);for(var s=o-1,u=1;s>=0;--s)n[s]=u,u*=e[s]}if(void 0===a){a=0;for(s=0;s<o;++s)n[s]<0&&(a-=(e[s]-1)*n[s])}for(var h=function(t){if(r(t))return"buffer";if(i)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),d=c[h];d.length<=o+1;)d.push(l(h,d.length-1));return(0,d[o+1])(t,e,n,a)}},1278:function(t,e,n){var r=n(2361),i=Math.pow(2,-1074),a=-1>>>0;t.exports=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-i:i;var n=r.hi(t),o=r.lo(t);e>t==t>0?o===a?(n+=1,o=0):o+=1:0===o?(o=a,n-=1):o-=1;return r.pack(o,n)}},8406:function(t,e){e.vertexNormals=function(t,e,n){for(var r=e.length,i=new Array(r),a=void 0===n?1e-6:n,o=0;o<r;++o)i[o]=[0,0,0];for(o=0;o<t.length;++o)for(var s=t[o],l=0,c=s[s.length-1],u=s[0],h=0;h<s.length;++h){l=c,c=u,u=s[(h+1)%s.length];for(var d=e[l],g=e[c],f=e[u],p=new Array(3),v=0,m=new Array(3),y=0,b=0;b<3;++b)p[b]=d[b]-g[b],v+=p[b]*p[b],m[b]=f[b]-g[b],y+=m[b]*m[b];if(v*y>a){var x=i[c],B=1/Math.sqrt(v*y);for(b=0;b<3;++b){var I=(b+1)%3,F=(b+2)%3;x[b]+=B*(m[I]*p[F]-m[F]*p[I])}}}for(o=0;o<r;++o){x=i[o];var Q=0;for(b=0;b<3;++b)Q+=x[b]*x[b];if(Q>a)for(B=1/Math.sqrt(Q),b=0;b<3;++b)x[b]*=B;else for(b=0;b<3;++b)x[b]=0}return i},e.faceNormals=function(t,e,n){for(var r=t.length,i=new Array(r),a=void 0===n?1e-6:n,o=0;o<r;++o){for(var s=t[o],l=new Array(3),c=0;c<3;++c)l[c]=e[s[c]];var u=new Array(3),h=new Array(3);for(c=0;c<3;++c)u[c]=l[1][c]-l[0][c],h[c]=l[2][c]-l[0][c];var d=new Array(3),g=0;for(c=0;c<3;++c){var f=(c+1)%3,p=(c+2)%3;d[c]=u[f]*h[p]-u[p]*h[f],g+=d[c]*d[c]}g=g>a?1/Math.sqrt(g):0;for(c=0;c<3;++c)d[c]*=g;i[o]=d}return i}},4081:function(t){t.exports=function(t,e,n,r,i,a,o,s,l,c){var u=e+a+c;if(h>0){var h=Math.sqrt(u+1);t[0]=.5*(o-l)/h,t[1]=.5*(s-r)/h,t[2]=.5*(n-a)/h,t[3]=.5*h}else{var d=Math.max(e,a,c);h=Math.sqrt(2*d-u+1);e>=d?(t[0]=.5*h,t[1]=.5*(i+n)/h,t[2]=.5*(s+r)/h,t[3]=.5*(o-l)/h):a>=d?(t[0]=.5*(n+i)/h,t[1]=.5*h,t[2]=.5*(l+o)/h,t[3]=.5*(s-r)/h):(t[0]=.5*(r+s)/h,t[1]=.5*(o+l)/h,t[2]=.5*h,t[3]=.5*(n-i)/h)}return t}},9977:function(t,e,n){t.exports=function(t){var e=(t=t||{}).center||[0,0,0],n=t.rotation||[0,0,0,1],r=t.radius||1;e=[].slice.call(e,0,3),u(n=[].slice.call(n,0,4),n);var i=new h(n,e,Math.log(r));i.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&i.lookAt(0,t.eye,t.center,t.up);return i};var r=n(9215),i=n(6582),a=n(7399),o=n(7608),s=n(4081);function l(t,e,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2))}function c(t,e,n,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2)+Math.pow(r,2))}function u(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=c(n,r,i,a);o>1e-6?(t[0]=n/o,t[1]=r/o,t[2]=i/o,t[3]=a/o):(t[0]=t[1]=t[2]=0,t[3]=1)}function h(t,e,n){this.radius=r([n]),this.center=r(e),this.rotation=r(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=h.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;u(e,e);var n=this.computedMatrix;a(n,e);var r=this.computedCenter,i=this.computedEye,o=this.computedUp,s=Math.exp(this.computedRadius[0]);i[0]=r[0]+s*n[2],i[1]=r[1]+s*n[6],i[2]=r[2]+s*n[10],o[0]=n[1],o[1]=n[5],o[2]=n[9];for(var l=0;l<3;++l){for(var c=0,h=0;h<3;++h)c+=n[l+4*h]*i[h];n[12+l]=-c}},d.getMatrix=function(t,e){this.recalcMatrix(t);var n=this.computedMatrix;if(e){for(var r=0;r<16;++r)e[r]=n[r];return e}return n},d.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},d.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},d.pan=function(t,e,n,r){e=e||0,n=n||0,r=r||0,this.recalcMatrix(t);var i=this.computedMatrix,a=i[1],o=i[5],s=i[9],c=l(a,o,s);a/=c,o/=c,s/=c;var u=i[0],h=i[4],d=i[8],g=u*a+h*o+d*s,f=l(u-=a*g,h-=o*g,d-=s*g);u/=f,h/=f,d/=f,i[2],i[6],i[10];var p=u*e+a*n,v=h*e+o*n,m=d*e+s*n;this.center.move(t,p,v,m);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+r),this.radius.set(t,Math.log(y))},d.rotate=function(t,e,n,r){this.recalcMatrix(t),e=e||0,n=n||0;var i=this.computedMatrix,a=i[0],o=i[4],s=i[8],u=i[1],h=i[5],d=i[9],g=i[2],f=i[6],p=i[10],v=e*a+n*u,m=e*o+n*h,y=e*s+n*d,b=-(f*y-p*m),x=-(p*v-g*y),B=-(g*m-f*v),I=Math.sqrt(Math.max(0,1-Math.pow(b,2)-Math.pow(x,2)-Math.pow(B,2))),F=c(b,x,B,I);F>1e-6?(b/=F,x/=F,B/=F,I/=F):(b=x=B=0,I=1);var Q=this.computedRotation,C=Q[0],w=Q[1],U=Q[2],A=Q[3],S=C*I+A*b+w*B-U*x,L=w*I+A*x+U*b-C*B,k=U*I+A*B+C*x-w*b,G=A*I-C*b-w*x-U*B;if(r){b=g,x=f,B=p;var _=Math.sin(r)/l(b,x,B);b*=_,x*=_,B*=_,G=G*(I=Math.cos(e))-(S=S*I+G*b+L*B-k*x)*b-(L=L*I+G*x+k*b-S*B)*x-(k=k*I+G*B+S*x-L*b)*B}var R=c(S,L,k,G);R>1e-6?(S/=R,L/=R,k/=R,G/=R):(S=L=k=0,G=1),this.rotation.set(t,S,L,k,G)},d.lookAt=function(t,e,n,r){this.recalcMatrix(t),n=n||this.computedCenter,e=e||this.computedEye,r=r||this.computedUp;var a=this.computedMatrix;i(a,e,n,r);var o=this.computedRotation;s(o,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),u(o,o),this.rotation.set(t,o[0],o[1],o[2],o[3]);for(var l=0,c=0;c<3;++c)l+=Math.pow(n[c]-e[c],2);this.radius.set(t,.5*Math.log(Math.max(l,1e-6))),this.center.set(t,n[0],n[1],n[2])},d.translate=function(t,e,n,r){this.center.move(t,e||0,n||0,r||0)},d.setMatrix=function(t,e){var n=this.computedRotation;s(n,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),u(n,n),this.rotation.set(t,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;o(r,e);var i=r[15];if(Math.abs(i)>1e-6){var a=r[12]/i,l=r[13]/i,c=r[14]/i;this.recalcMatrix(t);var h=Math.exp(this.computedRadius[0]);this.center.set(t,a-r[2]*h,l-r[6]*h,c-r[10]*h),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},d.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},d.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},d.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(t){var e=this.lastT(),n=t.center;n&&this.center.set(e,n[0],n[1],n[2]);var r=t.rotation;r&&this.rotation.set(e,r[0],r[1],r[2],r[3]);var i=t.distance;i&&i>0&&this.radius.set(e,Math.log(i)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},1371:function(t,e,n){
/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */
var r=n(3233);t.exports=function(t,e,n){return r(n=void 0!==n?n+"":" ",e)+t}},3202:function(t){t.exports=function(t,e){e||(e=[0,""]),t=String(t);var n=parseFloat(t,10);return e[0]=n,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},3088:function(t,e,n){t.exports=function(t,e){for(var n=0|e.length,i=t.length,a=[new Array(n),new Array(n)],o=0;o<n;++o)a[0][o]=[],a[1][o]=[];for(o=0;o<i;++o){var s=t[o];a[0][s[0]].push(s),a[1][s[1]].push(s)}var l=[];for(o=0;o<n;++o)a[0][o].length+a[1][o].length===0&&l.push([o]);function c(t,e){var n=a[e][t[e]];n.splice(n.indexOf(t),1)}function u(t,n,i){for(var o,s,l,u=0;u<2;++u)if(a[u][n].length>0){o=a[u][n][0],l=u;break}s=o[1^l];for(var h=0;h<2;++h)for(var d=a[h][n],g=0;g<d.length;++g){var f=d[g],p=f[1^h];r(e[t],e[n],e[s],e[p])>0&&(o=f,s=p,l=h)}return i||o&&c(o,l),s}function h(t,n){var i=a[n][t][0],o=[t];c(i,n);for(var s=i[1^n];;){for(;s!==t;)o.push(s),s=u(o[o.length-2],s,!1);if(a[0][t].length+a[1][t].length===0)break;var l=o[o.length-1],h=t,d=o[1],g=u(l,h,!0);if(r(e[l],e[h],e[d],e[g])<0)break;o.push(t),s=u(l,h)}return o}function d(t,e){return e[1]===e[e.length-1]}for(o=0;o<n;++o)for(var g=0;g<2;++g){for(var f=[];a[g][o].length>0;){a[0][o].length;var p=h(o,g);d(0,p)?f.push.apply(f,p):(f.length>0&&l.push(f),f=p)}f.length>0&&l.push(f)}return l};var r=n(3140)},5609:function(t,e,n){t.exports=function(t,e){for(var n=r(t,e.length),i=new Array(e.length),a=new Array(e.length),o=[],s=0;s<e.length;++s){var l=n[s].length;a[s]=l,i[s]=!0,l<=1&&o.push(s)}for(;o.length>0;){i[g=o.pop()]=!1;var c=n[g];for(s=0;s<c.length;++s){var u=c[s];0==--a[u]&&o.push(u)}}var h=new Array(e.length),d=[];for(s=0;s<e.length;++s)if(i[s]){var g=d.length;h[s]=g,d.push(e[s])}else h[s]=-1;var f=[];for(s=0;s<t.length;++s){var p=t[s];i[p[0]]&&i[p[1]]&&f.push([h[p[0]],h[p[1]]])}return[f,d]};var r=n(3134)},2095:function(t,e,n){t.exports=function(t,e){var n=c(t,e);t=n[0];var h=(e=n[1]).length;t.length;for(var d=r(t,e.length),g=0;g<h;++g)if(d[g].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var f=i(t,e);var p=(f=f.filter((function(t){for(var n=t.length,r=[0],i=0;i<n;++i){var a=e[t[i]],l=e[t[(i+1)%n]],c=o(-a[0],a[1]),u=o(-a[0],l[1]),h=o(l[0],a[1]),d=o(l[0],l[1]);r=s(r,s(s(c,u),s(h,d)))}return r[r.length-1]>0}))).length,v=new Array(p),m=new Array(p);for(g=0;g<p;++g){v[g]=g;var y=new Array(p),b=f[g].map((function(t){return e[t]})),x=a([b]),B=0;t:for(var I=0;I<p;++I)if(y[I]=0,g!==I){for(var F=(H=f[I]).length,Q=0;Q<F;++Q){var C=x(e[H[Q]]);if(0!==C){C<0&&(y[I]=1,B+=1);continue t}}y[I]=1,B+=1}m[g]=[B,g,y]}m.sort((function(t,e){return e[0]-t[0]}));for(g=0;g<p;++g){var w=(y=m[g])[1],U=y[2];for(I=0;I<p;++I)U[I]&&(v[I]=w)}var A=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=[];return e}(p);for(g=0;g<p;++g)A[g].push(v[g]),A[v[g]].push(g);var S={},L=u(h,!1);for(g=0;g<p;++g)for(F=(H=f[g]).length,I=0;I<F;++I){var k=H[I],G=H[(I+1)%F],_=Math.min(k,G)+":"+Math.max(k,G);if(_ in S){var R=S[_];A[R].push(g),A[g].push(R),L[k]=L[G]=!0}else S[_]=g}function E(t){for(var e=t.length,n=0;n<e;++n)if(!L[t[n]])return!1;return!0}var T=[],M=u(p,-1);for(g=0;g<p;++g)v[g]!==g||E(f[g])?M[g]=-1:(T.push(g),M[g]=0);n=[];for(;T.length>0;){var N=T.pop(),D=A[N];l(D,(function(t,e){return t-e}));var X,Z=D.length,V=M[N];if(0===V)X=[H=f[N]];for(g=0;g<Z;++g){var H,W=D[g];if(!(M[W]>=0))if(M[W]=1^V,T.push(W),0===V)E(H=f[W])||(H.reverse(),X.push(H))}0===V&&n.push(X)}return n};var r=n(3134),i=n(3088),a=n(5085),o=n(5250),s=n(8210),l=n(1682),c=n(5609);function u(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=e;return n}},5085:function(t,e,n){t.exports=function(t){for(var e=t.length,n=[],a=[],s=0;s<e;++s)for(var u=t[s],h=u.length,d=h-1,g=0;g<h;d=g++){var f=u[d],p=u[g];f[0]===p[0]?a.push([f,p]):n.push([f,p])}if(0===n.length)return 0===a.length?c:(v=l(a),function(t){return v(t[0],t[1])?0:1});var v;var m=i(n),y=function(t,e){return function(n){var i=o.le(e,n[0]);if(i<0)return 1;var a=t[i];if(!a){if(!(i>0&&e[i]===n[0]))return 1;a=t[i-1]}for(var s=1;a;){var l=a.key,c=r(n,l[0],l[1]);if(l[0][0]<l[1][0])if(c<0)a=a.left;else{if(!(c>0))return 0;s=-1,a=a.right}else if(c>0)a=a.left;else{if(!(c<0))return 0;s=1,a=a.right}}return s}}(m.slabs,m.coordinates);return 0===a.length?y:function(t,e){return function(n){return t(n[0],n[1])?0:e(n)}}(l(a),y)};var r=n(3250)[3],i=n(4209),a=n(3352),o=n(2478);function s(){return!0}function l(t){for(var e={},n=0;n<t.length;++n){var r=t[n],i=r[0][0],o=r[0][1],l=r[1][1],c=[Math.min(o,l),Math.max(o,l)];i in e?e[i].push(c):e[i]=[c]}var u={},h=Object.keys(e);for(n=0;n<h.length;++n){var d=e[h[n]];u[h[n]]=a(d)}return function(t){return function(e,n){var r=t[e];return!!r&&!!r.queryPoint(n,s)}}(u)}function c(t){return 1}},9346:function(t){var e=new Float64Array(4),n=new Float64Array(4),r=new Float64Array(4);t.exports=function(t,i,a,o,s){e.length<o.length&&(e=new Float64Array(o.length),n=new Float64Array(o.length),r=new Float64Array(o.length));for(var l=0;l<o.length;++l)e[l]=t[l]-o[l],n[l]=i[l]-t[l],r[l]=a[l]-t[l];var c=0,u=0,h=0,d=0,g=0,f=0;for(l=0;l<o.length;++l){var p=n[l],v=r[l],m=e[l];c+=p*p,u+=p*v,h+=v*v,d+=m*p,g+=m*v,f+=m*m}var y,b,x,B,I,F=Math.abs(c*h-u*u),Q=u*g-h*d,C=u*d-c*g;if(Q+C<=F)if(Q<0)C<0&&d<0?(C=0,-d>=c?(Q=1,y=c+2*d+f):y=d*(Q=-d/c)+f):(Q=0,g>=0?(C=0,y=f):-g>=h?(C=1,y=h+2*g+f):y=g*(C=-g/h)+f);else if(C<0)C=0,d>=0?(Q=0,y=f):-d>=c?(Q=1,y=c+2*d+f):y=d*(Q=-d/c)+f;else{var w=1/F;y=(Q*=w)*(c*Q+u*(C*=w)+2*d)+C*(u*Q+h*C+2*g)+f}else Q<0?(x=h+g)>(b=u+d)?(B=x-b)>=(I=c-2*u+h)?(Q=1,C=0,y=c+2*d+f):y=(Q=B/I)*(c*Q+u*(C=1-Q)+2*d)+C*(u*Q+h*C+2*g)+f:(Q=0,x<=0?(C=1,y=h+2*g+f):g>=0?(C=0,y=f):y=g*(C=-g/h)+f):C<0?(x=c+d)>(b=u+g)?(B=x-b)>=(I=c-2*u+h)?(C=1,Q=0,y=h+2*g+f):y=(Q=1-(C=B/I))*(c*Q+u*C+2*d)+C*(u*Q+h*C+2*g)+f:(C=0,x<=0?(Q=1,y=c+2*d+f):d>=0?(Q=0,y=f):y=d*(Q=-d/c)+f):(B=h+g-u-d)<=0?(Q=0,C=1,y=h+2*g+f):B>=(I=c-2*u+h)?(Q=1,C=0,y=c+2*d+f):y=(Q=B/I)*(c*Q+u*(C=1-Q)+2*d)+C*(u*Q+h*C+2*g)+f;var U=1-Q-C;for(l=0;l<o.length;++l)s[l]=U*t[l]+Q*i[l]+C*a[l];return y<0?0:y}},8648:function(t,e,n){t.exports=n(783)},2653:function(t,e,n){var r=n(3865);t.exports=function(t,e){for(var n=t.length,i=new Array(n),a=0;a<n;++a)i[a]=r(t[a],e[a]);return i}},5838:function(t,e,n){t.exports=function(t){for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=r(t[n]);return e};var r=n(7842)},8987:function(t,e,n){var r=n(7842),i=n(6504);t.exports=function(t,e){for(var n=r(e),a=t.length,o=new Array(a),s=0;s<a;++s)o[s]=i(t[s],n);return o}},544:function(t,e,n){var r=n(5572);t.exports=function(t,e){for(var n=t.length,i=new Array(n),a=0;a<n;++a)i[a]=r(t[a],e[a]);return i}},5771:function(t,e,n){var r=n(8507),i=n(3788),a=n(2419);t.exports=function(t){t.sort(i);for(var e=t.length,n=0,o=0;o<e;++o){var s=t[o],l=a(s);if(0!==l){if(n>0){var c=t[n-1];if(0===r(s,c)&&a(c)!==l){n-=1;continue}}t[n++]=s}}return t.length=n,t}},3233:function(t){
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
var e,n="";t.exports=function(t,r){if("string"!=typeof t)throw new TypeError("expected a string");if(1===r)return t;if(2===r)return t+t;var i=t.length*r;if(e!==t||void 0===e)e=t,n="";else if(n.length>=i)return n.substr(0,i);for(;i>n.length&&r>1;)1&r&&(n+=t),r>>=1,t+=t;return n+=t,n=n.substr(0,i),n}},3025:function(t,e,n){t.exports=n.g.performance&&n.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(t){t.exports=function(t){for(var e=t.length,n=t[t.length-1],r=e,i=e-2;i>=0;--i){var a=n;(l=(s=t[i])-((n=a+s)-a))&&(t[--r]=n,n=l)}var o=0;for(i=r;i<e;++i){var s,l;(l=(s=n)-((n=(a=t[i])+s)-a))&&(t[o++]=l)}return t[o++]=n,t.length=o,t}},2962:function(t,e,n){var r=n(5250),i=n(8210),a=n(3012),o=n(7004);function s(t,e,n,r){return function(e){return r(t(n(e[0][0],e[1][1]),n(-e[0][1],e[1][0])))}}function l(t,e,n,r){return function(i){return r(t(e(t(n(i[1][1],i[2][2]),n(-i[1][2],i[2][1])),i[0][0]),t(e(t(n(i[1][0],i[2][2]),n(-i[1][2],i[2][0])),-i[0][1]),e(t(n(i[1][0],i[2][1]),n(-i[1][1],i[2][0])),i[0][2]))))}}function c(t,e,n,r){return function(i){return r(t(t(e(t(e(t(n(i[2][2],i[3][3]),n(-i[2][3],i[3][2])),i[1][1]),t(e(t(n(i[2][1],i[3][3]),n(-i[2][3],i[3][1])),-i[1][2]),e(t(n(i[2][1],i[3][2]),n(-i[2][2],i[3][1])),i[1][3]))),i[0][0]),e(t(e(t(n(i[2][2],i[3][3]),n(-i[2][3],i[3][2])),i[1][0]),t(e(t(n(i[2][0],i[3][3]),n(-i[2][3],i[3][0])),-i[1][2]),e(t(n(i[2][0],i[3][2]),n(-i[2][2],i[3][0])),i[1][3]))),-i[0][1])),t(e(t(e(t(n(i[2][1],i[3][3]),n(-i[2][3],i[3][1])),i[1][0]),t(e(t(n(i[2][0],i[3][3]),n(-i[2][3],i[3][0])),-i[1][1]),e(t(n(i[2][0],i[3][1]),n(-i[2][1],i[3][0])),i[1][3]))),i[0][2]),e(t(e(t(n(i[2][1],i[3][2]),n(-i[2][2],i[3][1])),i[1][0]),t(e(t(n(i[2][0],i[3][2]),n(-i[2][2],i[3][0])),-i[1][1]),e(t(n(i[2][0],i[3][1]),n(-i[2][1],i[3][0])),i[1][2]))),-i[0][3]))))}}function u(t,e,n,r){return function(i){return r(t(t(e(t(t(e(t(e(t(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][2]),t(e(t(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),-i[2][3]),e(t(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][4]))),i[1][1]),e(t(e(t(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][1]),t(e(t(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),-i[2][3]),e(t(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),i[2][4]))),-i[1][2])),t(e(t(e(t(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),i[2][1]),t(e(t(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),-i[2][2]),e(t(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][4]))),i[1][3]),e(t(e(t(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][1]),t(e(t(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),-i[2][2]),e(t(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][3]))),-i[1][4]))),i[0][0]),e(t(t(e(t(e(t(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][2]),t(e(t(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),-i[2][3]),e(t(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][4]))),i[1][0]),e(t(e(t(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][0]),t(e(t(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][3]),e(t(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),i[2][4]))),-i[1][2])),t(e(t(e(t(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),i[2][0]),t(e(t(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][2]),e(t(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),i[2][4]))),i[1][3]),e(t(e(t(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][0]),t(e(t(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),-i[2][2]),e(t(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),i[2][3]))),-i[1][4]))),-i[0][1])),t(e(t(t(e(t(e(t(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][1]),t(e(t(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),-i[2][3]),e(t(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),i[2][4]))),i[1][0]),e(t(e(t(n(i[3][3],i[4][4]),n(-i[3][4],i[4][3])),i[2][0]),t(e(t(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][3]),e(t(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),i[2][4]))),-i[1][1])),t(e(t(e(t(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),i[2][0]),t(e(t(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][1]),e(t(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][4]))),i[1][3]),e(t(e(t(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),i[2][0]),t(e(t(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),-i[2][1]),e(t(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][3]))),-i[1][4]))),i[0][2]),t(e(t(t(e(t(e(t(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),i[2][1]),t(e(t(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),-i[2][2]),e(t(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][4]))),i[1][0]),e(t(e(t(n(i[3][2],i[4][4]),n(-i[3][4],i[4][2])),i[2][0]),t(e(t(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][2]),e(t(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),i[2][4]))),-i[1][1])),t(e(t(e(t(n(i[3][1],i[4][4]),n(-i[3][4],i[4][1])),i[2][0]),t(e(t(n(i[3][0],i[4][4]),n(-i[3][4],i[4][0])),-i[2][1]),e(t(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][4]))),i[1][2]),e(t(e(t(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][0]),t(e(t(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),-i[2][1]),e(t(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][2]))),-i[1][4]))),-i[0][3]),e(t(t(e(t(e(t(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][1]),t(e(t(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),-i[2][2]),e(t(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][3]))),i[1][0]),e(t(e(t(n(i[3][2],i[4][3]),n(-i[3][3],i[4][2])),i[2][0]),t(e(t(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),-i[2][2]),e(t(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),i[2][3]))),-i[1][1])),t(e(t(e(t(n(i[3][1],i[4][3]),n(-i[3][3],i[4][1])),i[2][0]),t(e(t(n(i[3][0],i[4][3]),n(-i[3][3],i[4][0])),-i[2][1]),e(t(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][3]))),i[1][2]),e(t(e(t(n(i[3][1],i[4][2]),n(-i[3][2],i[4][1])),i[2][0]),t(e(t(n(i[3][0],i[4][2]),n(-i[3][2],i[4][0])),-i[2][1]),e(t(n(i[3][0],i[4][1]),n(-i[3][1],i[4][0])),i[2][2]))),-i[1][3]))),i[0][4])))))}}function h(t){return(2===t?s:3===t?l:4===t?c:5===t?u:void 0)(i,a,r,o)}var d=[function(){return[0]},function(t){return[t[0][0]]}];function g(t,e,n,r,i,a,o,s){return function(l){switch(l.length){case 0:return t(l);case 1:return e(l);case 2:return n(l);case 3:return r(l);case 4:return i(l);case 5:return a(l)}var c=o[l.length];return c||(c=o[l.length]=s(l.length)),c(l)}}!function(){for(;d.length<6;)d.push(h(d.length));t.exports=g.apply(void 0,d.concat([d,h]));for(var e=0;e<d.length;++e)t.exports[e]=d[e]}()},1944:function(t,e,n){var r=n(5250),i=n(8210);t.exports=function(t,e){for(var n=r(t[0],e[0]),a=1;a<t.length;++a)n=i(n,r(t[a],e[a]));return n}},2646:function(t,e,n){var r=n(5250),i=n(8210),a=n(8545),o=n(3012);function s(t){return(3===t?l:4===t?c:5===t?u:h)(i,a,r,o)}function l(t,e,n,r){return function(i,a,o){var s=n(i[0],i[0]),l=r(s,a[0]),c=r(s,o[0]),u=n(a[0],a[0]),h=r(u,i[0]),d=r(u,o[0]),g=n(o[0],o[0]),f=r(g,i[0]),p=r(g,a[0]),v=t(e(p,d),e(h,l)),m=e(f,c),y=e(v,m);return y[y.length-1]}}function c(t,e,n,r){return function(i,a,o,s){var l=t(n(i[0],i[0]),n(i[1],i[1])),c=r(l,a[0]),u=r(l,o[0]),h=r(l,s[0]),d=t(n(a[0],a[0]),n(a[1],a[1])),g=r(d,i[0]),f=r(d,o[0]),p=r(d,s[0]),v=t(n(o[0],o[0]),n(o[1],o[1])),m=r(v,i[0]),y=r(v,a[0]),b=r(v,s[0]),x=t(n(s[0],s[0]),n(s[1],s[1])),B=r(x,i[0]),I=r(x,a[0]),F=r(x,o[0]),Q=t(t(r(e(F,b),a[1]),t(r(e(I,p),-o[1]),r(e(y,f),s[1]))),t(r(e(I,p),i[1]),t(r(e(B,h),-a[1]),r(e(g,c),s[1])))),C=t(t(r(e(F,b),i[1]),t(r(e(B,h),-o[1]),r(e(m,u),s[1]))),t(r(e(y,f),i[1]),t(r(e(m,u),-a[1]),r(e(g,c),o[1])))),w=e(Q,C);return w[w.length-1]}}function u(t,e,n,r){return function(i,a,o,s,l){var c=t(n(i[0],i[0]),t(n(i[1],i[1]),n(i[2],i[2]))),u=r(c,a[0]),h=r(c,o[0]),d=r(c,s[0]),g=r(c,l[0]),f=t(n(a[0],a[0]),t(n(a[1],a[1]),n(a[2],a[2]))),p=r(f,i[0]),v=r(f,o[0]),m=r(f,s[0]),y=r(f,l[0]),b=t(n(o[0],o[0]),t(n(o[1],o[1]),n(o[2],o[2]))),x=r(b,i[0]),B=r(b,a[0]),I=r(b,s[0]),F=r(b,l[0]),Q=t(n(s[0],s[0]),t(n(s[1],s[1]),n(s[2],s[2]))),C=r(Q,i[0]),w=r(Q,a[0]),U=r(Q,o[0]),A=r(Q,l[0]),S=t(n(l[0],l[0]),t(n(l[1],l[1]),n(l[2],l[2]))),L=r(S,i[0]),k=r(S,a[0]),G=r(S,o[0]),_=r(S,s[0]),R=t(t(t(r(t(r(e(_,A),o[1]),t(r(e(G,F),-s[1]),r(e(U,I),l[1]))),a[2]),t(r(t(r(e(_,A),a[1]),t(r(e(k,y),-s[1]),r(e(w,m),l[1]))),-o[2]),r(t(r(e(G,F),a[1]),t(r(e(k,y),-o[1]),r(e(B,v),l[1]))),s[2]))),t(r(t(r(e(U,I),a[1]),t(r(e(w,m),-o[1]),r(e(B,v),s[1]))),-l[2]),t(r(t(r(e(_,A),a[1]),t(r(e(k,y),-s[1]),r(e(w,m),l[1]))),i[2]),r(t(r(e(_,A),i[1]),t(r(e(L,g),-s[1]),r(e(C,d),l[1]))),-a[2])))),t(t(r(t(r(e(k,y),i[1]),t(r(e(L,g),-a[1]),r(e(p,u),l[1]))),s[2]),t(r(t(r(e(w,m),i[1]),t(r(e(C,d),-a[1]),r(e(p,u),s[1]))),-l[2]),r(t(r(e(U,I),a[1]),t(r(e(w,m),-o[1]),r(e(B,v),s[1]))),i[2]))),t(r(t(r(e(U,I),i[1]),t(r(e(C,d),-o[1]),r(e(x,h),s[1]))),-a[2]),t(r(t(r(e(w,m),i[1]),t(r(e(C,d),-a[1]),r(e(p,u),s[1]))),o[2]),r(t(r(e(B,v),i[1]),t(r(e(x,h),-a[1]),r(e(p,u),o[1]))),-s[2]))))),E=t(t(t(r(t(r(e(_,A),o[1]),t(r(e(G,F),-s[1]),r(e(U,I),l[1]))),i[2]),r(t(r(e(_,A),i[1]),t(r(e(L,g),-s[1]),r(e(C,d),l[1]))),-o[2])),t(r(t(r(e(G,F),i[1]),t(r(e(L,g),-o[1]),r(e(x,h),l[1]))),s[2]),r(t(r(e(U,I),i[1]),t(r(e(C,d),-o[1]),r(e(x,h),s[1]))),-l[2]))),t(t(r(t(r(e(G,F),a[1]),t(r(e(k,y),-o[1]),r(e(B,v),l[1]))),i[2]),r(t(r(e(G,F),i[1]),t(r(e(L,g),-o[1]),r(e(x,h),l[1]))),-a[2])),t(r(t(r(e(k,y),i[1]),t(r(e(L,g),-a[1]),r(e(p,u),l[1]))),o[2]),r(t(r(e(B,v),i[1]),t(r(e(x,h),-a[1]),r(e(p,u),o[1]))),-l[2])))),T=e(R,E);return T[T.length-1]}}function h(t,e,n,r){return function(i,a,o,s,l,c){var u=t(t(n(i[0],i[0]),n(i[1],i[1])),t(n(i[2],i[2]),n(i[3],i[3]))),h=r(u,a[0]),d=r(u,o[0]),g=r(u,s[0]),f=r(u,l[0]),p=r(u,c[0]),v=t(t(n(a[0],a[0]),n(a[1],a[1])),t(n(a[2],a[2]),n(a[3],a[3]))),m=r(v,i[0]),y=r(v,o[0]),b=r(v,s[0]),x=r(v,l[0]),B=r(v,c[0]),I=t(t(n(o[0],o[0]),n(o[1],o[1])),t(n(o[2],o[2]),n(o[3],o[3]))),F=r(I,i[0]),Q=r(I,a[0]),C=r(I,s[0]),w=r(I,l[0]),U=r(I,c[0]),A=t(t(n(s[0],s[0]),n(s[1],s[1])),t(n(s[2],s[2]),n(s[3],s[3]))),S=r(A,i[0]),L=r(A,a[0]),k=r(A,o[0]),G=r(A,l[0]),_=r(A,c[0]),R=t(t(n(l[0],l[0]),n(l[1],l[1])),t(n(l[2],l[2]),n(l[3],l[3]))),E=r(R,i[0]),T=r(R,a[0]),M=r(R,o[0]),N=r(R,s[0]),D=r(R,c[0]),X=t(t(n(c[0],c[0]),n(c[1],c[1])),t(n(c[2],c[2]),n(c[3],c[3]))),Z=r(X,i[0]),V=r(X,a[0]),H=r(X,o[0]),W=r(X,s[0]),Y=r(X,l[0]),z=t(t(t(r(t(t(r(t(r(e(Y,D),s[1]),t(r(e(W,_),-l[1]),r(e(N,G),c[1]))),o[2]),r(t(r(e(Y,D),o[1]),t(r(e(H,U),-l[1]),r(e(M,w),c[1]))),-s[2])),t(r(t(r(e(W,_),o[1]),t(r(e(H,U),-s[1]),r(e(k,C),c[1]))),l[2]),r(t(r(e(N,G),o[1]),t(r(e(M,w),-s[1]),r(e(k,C),l[1]))),-c[2]))),a[3]),t(r(t(t(r(t(r(e(Y,D),s[1]),t(r(e(W,_),-l[1]),r(e(N,G),c[1]))),a[2]),r(t(r(e(Y,D),a[1]),t(r(e(V,B),-l[1]),r(e(T,x),c[1]))),-s[2])),t(r(t(r(e(W,_),a[1]),t(r(e(V,B),-s[1]),r(e(L,b),c[1]))),l[2]),r(t(r(e(N,G),a[1]),t(r(e(T,x),-s[1]),r(e(L,b),l[1]))),-c[2]))),-o[3]),r(t(t(r(t(r(e(Y,D),o[1]),t(r(e(H,U),-l[1]),r(e(M,w),c[1]))),a[2]),r(t(r(e(Y,D),a[1]),t(r(e(V,B),-l[1]),r(e(T,x),c[1]))),-o[2])),t(r(t(r(e(H,U),a[1]),t(r(e(V,B),-o[1]),r(e(Q,y),c[1]))),l[2]),r(t(r(e(M,w),a[1]),t(r(e(T,x),-o[1]),r(e(Q,y),l[1]))),-c[2]))),s[3]))),t(t(r(t(t(r(t(r(e(W,_),o[1]),t(r(e(H,U),-s[1]),r(e(k,C),c[1]))),a[2]),r(t(r(e(W,_),a[1]),t(r(e(V,B),-s[1]),r(e(L,b),c[1]))),-o[2])),t(r(t(r(e(H,U),a[1]),t(r(e(V,B),-o[1]),r(e(Q,y),c[1]))),s[2]),r(t(r(e(k,C),a[1]),t(r(e(L,b),-o[1]),r(e(Q,y),s[1]))),-c[2]))),-l[3]),r(t(t(r(t(r(e(N,G),o[1]),t(r(e(M,w),-s[1]),r(e(k,C),l[1]))),a[2]),r(t(r(e(N,G),a[1]),t(r(e(T,x),-s[1]),r(e(L,b),l[1]))),-o[2])),t(r(t(r(e(M,w),a[1]),t(r(e(T,x),-o[1]),r(e(Q,y),l[1]))),s[2]),r(t(r(e(k,C),a[1]),t(r(e(L,b),-o[1]),r(e(Q,y),s[1]))),-l[2]))),c[3])),t(r(t(t(r(t(r(e(Y,D),s[1]),t(r(e(W,_),-l[1]),r(e(N,G),c[1]))),a[2]),r(t(r(e(Y,D),a[1]),t(r(e(V,B),-l[1]),r(e(T,x),c[1]))),-s[2])),t(r(t(r(e(W,_),a[1]),t(r(e(V,B),-s[1]),r(e(L,b),c[1]))),l[2]),r(t(r(e(N,G),a[1]),t(r(e(T,x),-s[1]),r(e(L,b),l[1]))),-c[2]))),i[3]),r(t(t(r(t(r(e(Y,D),s[1]),t(r(e(W,_),-l[1]),r(e(N,G),c[1]))),i[2]),r(t(r(e(Y,D),i[1]),t(r(e(Z,p),-l[1]),r(e(E,f),c[1]))),-s[2])),t(r(t(r(e(W,_),i[1]),t(r(e(Z,p),-s[1]),r(e(S,g),c[1]))),l[2]),r(t(r(e(N,G),i[1]),t(r(e(E,f),-s[1]),r(e(S,g),l[1]))),-c[2]))),-a[3])))),t(t(t(r(t(t(r(t(r(e(Y,D),a[1]),t(r(e(V,B),-l[1]),r(e(T,x),c[1]))),i[2]),r(t(r(e(Y,D),i[1]),t(r(e(Z,p),-l[1]),r(e(E,f),c[1]))),-a[2])),t(r(t(r(e(V,B),i[1]),t(r(e(Z,p),-a[1]),r(e(m,h),c[1]))),l[2]),r(t(r(e(T,x),i[1]),t(r(e(E,f),-a[1]),r(e(m,h),l[1]))),-c[2]))),s[3]),r(t(t(r(t(r(e(W,_),a[1]),t(r(e(V,B),-s[1]),r(e(L,b),c[1]))),i[2]),r(t(r(e(W,_),i[1]),t(r(e(Z,p),-s[1]),r(e(S,g),c[1]))),-a[2])),t(r(t(r(e(V,B),i[1]),t(r(e(Z,p),-a[1]),r(e(m,h),c[1]))),s[2]),r(t(r(e(L,b),i[1]),t(r(e(S,g),-a[1]),r(e(m,h),s[1]))),-c[2]))),-l[3])),t(r(t(t(r(t(r(e(N,G),a[1]),t(r(e(T,x),-s[1]),r(e(L,b),l[1]))),i[2]),r(t(r(e(N,G),i[1]),t(r(e(E,f),-s[1]),r(e(S,g),l[1]))),-a[2])),t(r(t(r(e(T,x),i[1]),t(r(e(E,f),-a[1]),r(e(m,h),l[1]))),s[2]),r(t(r(e(L,b),i[1]),t(r(e(S,g),-a[1]),r(e(m,h),s[1]))),-l[2]))),c[3]),r(t(t(r(t(r(e(W,_),o[1]),t(r(e(H,U),-s[1]),r(e(k,C),c[1]))),a[2]),r(t(r(e(W,_),a[1]),t(r(e(V,B),-s[1]),r(e(L,b),c[1]))),-o[2])),t(r(t(r(e(H,U),a[1]),t(r(e(V,B),-o[1]),r(e(Q,y),c[1]))),s[2]),r(t(r(e(k,C),a[1]),t(r(e(L,b),-o[1]),r(e(Q,y),s[1]))),-c[2]))),i[3]))),t(t(r(t(t(r(t(r(e(W,_),o[1]),t(r(e(H,U),-s[1]),r(e(k,C),c[1]))),i[2]),r(t(r(e(W,_),i[1]),t(r(e(Z,p),-s[1]),r(e(S,g),c[1]))),-o[2])),t(r(t(r(e(H,U),i[1]),t(r(e(Z,p),-o[1]),r(e(F,d),c[1]))),s[2]),r(t(r(e(k,C),i[1]),t(r(e(S,g),-o[1]),r(e(F,d),s[1]))),-c[2]))),-a[3]),r(t(t(r(t(r(e(W,_),a[1]),t(r(e(V,B),-s[1]),r(e(L,b),c[1]))),i[2]),r(t(r(e(W,_),i[1]),t(r(e(Z,p),-s[1]),r(e(S,g),c[1]))),-a[2])),t(r(t(r(e(V,B),i[1]),t(r(e(Z,p),-a[1]),r(e(m,h),c[1]))),s[2]),r(t(r(e(L,b),i[1]),t(r(e(S,g),-a[1]),r(e(m,h),s[1]))),-c[2]))),o[3])),t(r(t(t(r(t(r(e(H,U),a[1]),t(r(e(V,B),-o[1]),r(e(Q,y),c[1]))),i[2]),r(t(r(e(H,U),i[1]),t(r(e(Z,p),-o[1]),r(e(F,d),c[1]))),-a[2])),t(r(t(r(e(V,B),i[1]),t(r(e(Z,p),-a[1]),r(e(m,h),c[1]))),o[2]),r(t(r(e(Q,y),i[1]),t(r(e(F,d),-a[1]),r(e(m,h),o[1]))),-c[2]))),-s[3]),r(t(t(r(t(r(e(k,C),a[1]),t(r(e(L,b),-o[1]),r(e(Q,y),s[1]))),i[2]),r(t(r(e(k,C),i[1]),t(r(e(S,g),-o[1]),r(e(F,d),s[1]))),-a[2])),t(r(t(r(e(L,b),i[1]),t(r(e(S,g),-a[1]),r(e(m,h),s[1]))),o[2]),r(t(r(e(Q,y),i[1]),t(r(e(F,d),-a[1]),r(e(m,h),o[1]))),-s[2]))),c[3]))))),O=t(t(t(r(t(t(r(t(r(e(Y,D),s[1]),t(r(e(W,_),-l[1]),r(e(N,G),c[1]))),o[2]),r(t(r(e(Y,D),o[1]),t(r(e(H,U),-l[1]),r(e(M,w),c[1]))),-s[2])),t(r(t(r(e(W,_),o[1]),t(r(e(H,U),-s[1]),r(e(k,C),c[1]))),l[2]),r(t(r(e(N,G),o[1]),t(r(e(M,w),-s[1]),r(e(k,C),l[1]))),-c[2]))),i[3]),t(r(t(t(r(t(r(e(Y,D),s[1]),t(r(e(W,_),-l[1]),r(e(N,G),c[1]))),i[2]),r(t(r(e(Y,D),i[1]),t(r(e(Z,p),-l[1]),r(e(E,f),c[1]))),-s[2])),t(r(t(r(e(W,_),i[1]),t(r(e(Z,p),-s[1]),r(e(S,g),c[1]))),l[2]),r(t(r(e(N,G),i[1]),t(r(e(E,f),-s[1]),r(e(S,g),l[1]))),-c[2]))),-o[3]),r(t(t(r(t(r(e(Y,D),o[1]),t(r(e(H,U),-l[1]),r(e(M,w),c[1]))),i[2]),r(t(r(e(Y,D),i[1]),t(r(e(Z,p),-l[1]),r(e(E,f),c[1]))),-o[2])),t(r(t(r(e(H,U),i[1]),t(r(e(Z,p),-o[1]),r(e(F,d),c[1]))),l[2]),r(t(r(e(M,w),i[1]),t(r(e(E,f),-o[1]),r(e(F,d),l[1]))),-c[2]))),s[3]))),t(t(r(t(t(r(t(r(e(W,_),o[1]),t(r(e(H,U),-s[1]),r(e(k,C),c[1]))),i[2]),r(t(r(e(W,_),i[1]),t(r(e(Z,p),-s[1]),r(e(S,g),c[1]))),-o[2])),t(r(t(r(e(H,U),i[1]),t(r(e(Z,p),-o[1]),r(e(F,d),c[1]))),s[2]),r(t(r(e(k,C),i[1]),t(r(e(S,g),-o[1]),r(e(F,d),s[1]))),-c[2]))),-l[3]),r(t(t(r(t(r(e(N,G),o[1]),t(r(e(M,w),-s[1]),r(e(k,C),l[1]))),i[2]),r(t(r(e(N,G),i[1]),t(r(e(E,f),-s[1]),r(e(S,g),l[1]))),-o[2])),t(r(t(r(e(M,w),i[1]),t(r(e(E,f),-o[1]),r(e(F,d),l[1]))),s[2]),r(t(r(e(k,C),i[1]),t(r(e(S,g),-o[1]),r(e(F,d),s[1]))),-l[2]))),c[3])),t(r(t(t(r(t(r(e(Y,D),o[1]),t(r(e(H,U),-l[1]),r(e(M,w),c[1]))),a[2]),r(t(r(e(Y,D),a[1]),t(r(e(V,B),-l[1]),r(e(T,x),c[1]))),-o[2])),t(r(t(r(e(H,U),a[1]),t(r(e(V,B),-o[1]),r(e(Q,y),c[1]))),l[2]),r(t(r(e(M,w),a[1]),t(r(e(T,x),-o[1]),r(e(Q,y),l[1]))),-c[2]))),i[3]),r(t(t(r(t(r(e(Y,D),o[1]),t(r(e(H,U),-l[1]),r(e(M,w),c[1]))),i[2]),r(t(r(e(Y,D),i[1]),t(r(e(Z,p),-l[1]),r(e(E,f),c[1]))),-o[2])),t(r(t(r(e(H,U),i[1]),t(r(e(Z,p),-o[1]),r(e(F,d),c[1]))),l[2]),r(t(r(e(M,w),i[1]),t(r(e(E,f),-o[1]),r(e(F,d),l[1]))),-c[2]))),-a[3])))),t(t(t(r(t(t(r(t(r(e(Y,D),a[1]),t(r(e(V,B),-l[1]),r(e(T,x),c[1]))),i[2]),r(t(r(e(Y,D),i[1]),t(r(e(Z,p),-l[1]),r(e(E,f),c[1]))),-a[2])),t(r(t(r(e(V,B),i[1]),t(r(e(Z,p),-a[1]),r(e(m,h),c[1]))),l[2]),r(t(r(e(T,x),i[1]),t(r(e(E,f),-a[1]),r(e(m,h),l[1]))),-c[2]))),o[3]),r(t(t(r(t(r(e(H,U),a[1]),t(r(e(V,B),-o[1]),r(e(Q,y),c[1]))),i[2]),r(t(r(e(H,U),i[1]),t(r(e(Z,p),-o[1]),r(e(F,d),c[1]))),-a[2])),t(r(t(r(e(V,B),i[1]),t(r(e(Z,p),-a[1]),r(e(m,h),c[1]))),o[2]),r(t(r(e(Q,y),i[1]),t(r(e(F,d),-a[1]),r(e(m,h),o[1]))),-c[2]))),-l[3])),t(r(t(t(r(t(r(e(M,w),a[1]),t(r(e(T,x),-o[1]),r(e(Q,y),l[1]))),i[2]),r(t(r(e(M,w),i[1]),t(r(e(E,f),-o[1]),r(e(F,d),l[1]))),-a[2])),t(r(t(r(e(T,x),i[1]),t(r(e(E,f),-a[1]),r(e(m,h),l[1]))),o[2]),r(t(r(e(Q,y),i[1]),t(r(e(F,d),-a[1]),r(e(m,h),o[1]))),-l[2]))),c[3]),r(t(t(r(t(r(e(N,G),o[1]),t(r(e(M,w),-s[1]),r(e(k,C),l[1]))),a[2]),r(t(r(e(N,G),a[1]),t(r(e(T,x),-s[1]),r(e(L,b),l[1]))),-o[2])),t(r(t(r(e(M,w),a[1]),t(r(e(T,x),-o[1]),r(e(Q,y),l[1]))),s[2]),r(t(r(e(k,C),a[1]),t(r(e(L,b),-o[1]),r(e(Q,y),s[1]))),-l[2]))),i[3]))),t(t(r(t(t(r(t(r(e(N,G),o[1]),t(r(e(M,w),-s[1]),r(e(k,C),l[1]))),i[2]),r(t(r(e(N,G),i[1]),t(r(e(E,f),-s[1]),r(e(S,g),l[1]))),-o[2])),t(r(t(r(e(M,w),i[1]),t(r(e(E,f),-o[1]),r(e(F,d),l[1]))),s[2]),r(t(r(e(k,C),i[1]),t(r(e(S,g),-o[1]),r(e(F,d),s[1]))),-l[2]))),-a[3]),r(t(t(r(t(r(e(N,G),a[1]),t(r(e(T,x),-s[1]),r(e(L,b),l[1]))),i[2]),r(t(r(e(N,G),i[1]),t(r(e(E,f),-s[1]),r(e(S,g),l[1]))),-a[2])),t(r(t(r(e(T,x),i[1]),t(r(e(E,f),-a[1]),r(e(m,h),l[1]))),s[2]),r(t(r(e(L,b),i[1]),t(r(e(S,g),-a[1]),r(e(m,h),s[1]))),-l[2]))),o[3])),t(r(t(t(r(t(r(e(M,w),a[1]),t(r(e(T,x),-o[1]),r(e(Q,y),l[1]))),i[2]),r(t(r(e(M,w),i[1]),t(r(e(E,f),-o[1]),r(e(F,d),l[1]))),-a[2])),t(r(t(r(e(T,x),i[1]),t(r(e(E,f),-a[1]),r(e(m,h),l[1]))),o[2]),r(t(r(e(Q,y),i[1]),t(r(e(F,d),-a[1]),r(e(m,h),o[1]))),-l[2]))),-s[3]),r(t(t(r(t(r(e(k,C),a[1]),t(r(e(L,b),-o[1]),r(e(Q,y),s[1]))),i[2]),r(t(r(e(k,C),i[1]),t(r(e(S,g),-o[1]),r(e(F,d),s[1]))),-a[2])),t(r(t(r(e(L,b),i[1]),t(r(e(S,g),-a[1]),r(e(m,h),s[1]))),o[2]),r(t(r(e(Q,y),i[1]),t(r(e(F,d),-a[1]),r(e(m,h),o[1]))),-s[2]))),l[3]))))),J=e(z,O);return J[J.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function g(t){var e=d[t.length];return e||(e=d[t.length]=s(t.length)),e.apply(void 0,t)}function f(t,e,n,r,i,a,o,s){return function(e,n,l,c,u,h){switch(arguments.length){case 0:case 1:return 0;case 2:return r(e,n);case 3:return i(e,n,l);case 4:return a(e,n,l,c);case 5:return o(e,n,l,c,u);case 6:return s(e,n,l,c,u,h)}for(var d=new Array(arguments.length),g=0;g<arguments.length;++g)d[g]=arguments[g];return t(d)}}!function(){for(;d.length<=6;)d.push(s(d.length));t.exports=f.apply(void 0,[g].concat(d));for(var e=0;e<=6;++e)t.exports[e]=d[e]}()},727:function(t,e,n){var r=n(2962);function i(t){var e=2===t?a:3===t?o:4===t?s:5===t?l:c;return e(t<6?r[t]:r)}function a(t){return function(e,n){return[t([[+n[0],+e[0][1]],[+n[1],+e[1][1]]]),t([[+e[0][0],+n[0]],[+e[1][0],+n[1]]]),t(e)]}}function o(t){return function(e,n){return[t([[+n[0],+e[0][1],+e[0][2]],[+n[1],+e[1][1],+e[1][2]],[+n[2],+e[2][1],+e[2][2]]]),t([[+e[0][0],+n[0],+e[0][2]],[+e[1][0],+n[1],+e[1][2]],[+e[2][0],+n[2],+e[2][2]]]),t([[+e[0][0],+e[0][1],+n[0]],[+e[1][0],+e[1][1],+n[1]],[+e[2][0],+e[2][1],+n[2]]]),t(e)]}}function s(t){return function(e,n){return[t([[+n[0],+e[0][1],+e[0][2],+e[0][3]],[+n[1],+e[1][1],+e[1][2],+e[1][3]],[+n[2],+e[2][1],+e[2][2],+e[2][3]],[+n[3],+e[3][1],+e[3][2],+e[3][3]]]),t([[+e[0][0],+n[0],+e[0][2],+e[0][3]],[+e[1][0],+n[1],+e[1][2],+e[1][3]],[+e[2][0],+n[2],+e[2][2],+e[2][3]],[+e[3][0],+n[3],+e[3][2],+e[3][3]]]),t([[+e[0][0],+e[0][1],+n[0],+e[0][3]],[+e[1][0],+e[1][1],+n[1],+e[1][3]],[+e[2][0],+e[2][1],+n[2],+e[2][3]],[+e[3][0],+e[3][1],+n[3],+e[3][3]]]),t([[+e[0][0],+e[0][1],+e[0][2],+n[0]],[+e[1][0],+e[1][1],+e[1][2],+n[1]],[+e[2][0],+e[2][1],+e[2][2],+n[2]],[+e[3][0],+e[3][1],+e[3][2],+n[3]]]),t(e)]}}function l(t){return function(e,n){return[t([[+n[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4]],[+n[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4]],[+n[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4]],[+n[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4]],[+n[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+n[0],+e[0][2],+e[0][3],+e[0][4]],[+e[1][0],+n[1],+e[1][2],+e[1][3],+e[1][4]],[+e[2][0],+n[2],+e[2][2],+e[2][3],+e[2][4]],[+e[3][0],+n[3],+e[3][2],+e[3][3],+e[3][4]],[+e[4][0],+n[4],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+n[0],+e[0][3],+e[0][4]],[+e[1][0],+e[1][1],+n[1],+e[1][3],+e[1][4]],[+e[2][0],+e[2][1],+n[2],+e[2][3],+e[2][4]],[+e[3][0],+e[3][1],+n[3],+e[3][3],+e[3][4]],[+e[4][0],+e[4][1],+n[4],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+n[0],+e[0][4]],[+e[1][0],+e[1][1],+e[1][2],+n[1],+e[1][4]],[+e[2][0],+e[2][1],+e[2][2],+n[2],+e[2][4]],[+e[3][0],+e[3][1],+e[3][2],+n[3],+e[3][4]],[+e[4][0],+e[4][1],+e[4][2],+n[4],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+n[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+n[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+n[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+n[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+n[4]]]),t(e)]}}function c(t){return function(e,n){return[t([[+n[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+n[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+n[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+n[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+n[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+n[5],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+n[0],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+n[1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+n[2],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+n[3],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+n[4],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+n[5],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+n[0],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+n[1],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+n[2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+n[3],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+n[4],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+n[5],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+n[0],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+n[1],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+n[2],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+n[3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+n[4],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+n[5],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+n[0],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+n[1],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+n[2],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+n[3],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+n[4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+n[5],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+n[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+n[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+n[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+n[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+n[4]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+n[5]]]),t(e)]}}var u=[function(){return[[0]]},function(t,e){return[[e[0]],[t[0][0]]]}];function h(t,e,n,r,i,a,o,s){return function(l,c){switch(l.length){case 0:return t(l,c);case 1:return e(l,c);case 2:return n(l,c);case 3:return r(l,c);case 4:return i(l,c);case 5:return a(l,c)}var u=o[l.length];return u||(u=o[l.length]=s(l.length)),u(l,c)}}!function(){for(;u.length<6;)u.push(i(u.length));t.exports=h.apply(void 0,u.concat([u,i]));for(var e=0;e<6;++e)t.exports[e]=u[e]}()},3250:function(t,e,n){var r=n(5250),i=n(8210),a=n(3012),o=n(8545);function s(t,e,n,r){return function(n,i,a){var o=t(t(e(i[1],a[0]),e(-a[1],i[0])),t(e(n[1],i[0]),e(-i[1],n[0]))),s=t(e(n[1],a[0]),e(-a[1],n[0])),l=r(o,s);return l[l.length-1]}}function l(t,e,n,r){return function(i,a,o,s){var l=t(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2])))),c=t(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(n(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),o[2])))),u=r(l,c);return u[u.length-1]}}function c(t,e,n,r){return function(i,a,o,s,l){var c=t(t(t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),a[3]),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),-o[3]),n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),s[3]))),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-l[3]),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),i[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),i[2]),t(n(t(e(i[1],l[0]),e(-l[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),l[2]))),-a[3])))),t(t(n(t(n(t(e(a[1],l[0]),e(-l[1],a[0])),i[2]),t(n(t(e(i[1],l[0]),e(-l[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),l[2]))),s[3]),t(n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),-l[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),i[3]))),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-a[3]),t(n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),o[3]),n(t(n(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(n(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),o[2]))),-s[3]))))),u=t(t(t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),i[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),i[2]),t(n(t(e(i[1],l[0]),e(-l[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),l[2]))),-o[3])),t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),i[2]),t(n(t(e(i[1],l[0]),e(-l[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),l[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-l[3]))),t(t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),i[3]),n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),i[2]),t(n(t(e(i[1],l[0]),e(-l[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),l[2]))),-a[3])),t(n(t(n(t(e(a[1],l[0]),e(-l[1],a[0])),i[2]),t(n(t(e(i[1],l[0]),e(-l[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),l[2]))),o[3]),n(t(n(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(n(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),o[2]))),-l[3])))),h=r(c,u);return h[h.length-1]}}function u(t){return(3===t?s:4===t?l:c)(i,r,a,o)}var h=u(3),d=u(4),g=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-n[0])*(e[1]-n[1]),o=i-a;if(i>0){if(a<=0)return o;r=i+a}else{if(!(i<0))return o;if(a>=0)return o;r=-(i+a)}var s=33306690738754716e-32*r;return o>=s||o<=-s?o:h(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],a=e[0]-r[0],o=n[0]-r[0],s=t[1]-r[1],l=e[1]-r[1],c=n[1]-r[1],u=t[2]-r[2],h=e[2]-r[2],g=n[2]-r[2],f=a*c,p=o*l,v=o*s,m=i*c,y=i*l,b=a*s,x=u*(f-p)+h*(v-m)+g*(y-b),B=7771561172376103e-31*((Math.abs(f)+Math.abs(p))*Math.abs(u)+(Math.abs(v)+Math.abs(m))*Math.abs(h)+(Math.abs(y)+Math.abs(b))*Math.abs(g));return x>B||-x>B?x:d(t,e,n,r)}];function f(t){var e=g[t.length];return e||(e=g[t.length]=u(t.length)),e.apply(void 0,t)}function p(t,e,n,r,i,a,o){return function(e,n,s,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return r(e,n);case 3:return i(e,n,s);case 4:return a(e,n,s,l);case 5:return o(e,n,s,l,c)}for(var u=new Array(arguments.length),h=0;h<arguments.length;++h)u[h]=arguments[h];return t(u)}}!function(){for(;g.length<=5;)g.push(u(g.length));t.exports=p.apply(void 0,[f].concat(g));for(var e=0;e<=5;++e)t.exports[e]=g[e]}()},5382:function(t,e,n){var r=n(8210),i=n(3012);t.exports=function(t,e){if(1===t.length)return i(e,t[0]);if(1===e.length)return i(t,e[0]);if(0===t.length||0===e.length)return[0];var n=[0];if(t.length<e.length)for(var a=0;a<t.length;++a)n=r(n,i(e,t[a]));else for(a=0;a<e.length;++a)n=r(n,i(t,e[a]));return n}},3012:function(t,e,n){var r=n(5250),i=n(9362);t.exports=function(t,e){var n=t.length;if(1===n){var a=r(t[0],e);return a[0]?a:[a[1]]}var o=new Array(2*n),s=[.1,.1],l=[.1,.1],c=0;r(t[0],e,s),s[0]&&(o[c++]=s[0]);for(var u=1;u<n;++u){r(t[u],e,l);var h=s[1];i(h,l[0],s),s[0]&&(o[c++]=s[0]);var d=l[1],g=s[1],f=d+g,p=g-(f-d);s[1]=f,p&&(o[c++]=p)}s[1]&&(o[c++]=s[1]);0===c&&(o[c++]=0);return o.length=c,o}},1125:function(t,e,n){t.exports=function(t,e,n,i){var a=r(t,n,i),o=r(e,n,i);if(a>0&&o>0||a<0&&o<0)return!1;var s=r(n,t,e),l=r(i,t,e);if(s>0&&l>0||s<0&&l<0)return!1;if(0===a&&0===o&&0===s&&0===l)return function(t,e,n,r){for(var i=0;i<2;++i){var a=t[i],o=e[i],s=Math.min(a,o),l=Math.max(a,o),c=n[i],u=r[i],h=Math.min(c,u);if(Math.max(c,u)<s||l<h)return!1}return!0}(t,e,n,i);return!0};var r=n(3250)[3]},8545:function(t){t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=n-r,a=e-r,o=t-i,s=o+a;if(s)return[s,n];return[n]}(t[0],-e[0]);var i,a,o=n+r,s=new Array(o),l=0,c=0,u=0,h=Math.abs,d=t[c],g=h(d),f=-e[u],p=h(f);g<p?(a=d,(c+=1)<n&&(g=h(d=t[c]))):(a=f,(u+=1)<r&&(p=h(f=-e[u])));c<n&&g<p||u>=r?(i=d,(c+=1)<n&&(g=h(d=t[c]))):(i=f,(u+=1)<r&&(p=h(f=-e[u])));var v,m,y=i+a,b=y-i,x=a-b,B=x,I=y;for(;c<n&&u<r;)g<p?(i=d,(c+=1)<n&&(g=h(d=t[c]))):(i=f,(u+=1)<r&&(p=h(f=-e[u]))),(x=(a=B)-(b=(y=i+a)-i))&&(s[l++]=x),B=I-((v=I+y)-(m=v-I))+(y-m),I=v;for(;c<n;)(x=(a=B)-(b=(y=(i=d)+a)-i))&&(s[l++]=x),B=I-((v=I+y)-(m=v-I))+(y-m),I=v,(c+=1)<n&&(d=t[c]);for(;u<r;)(x=(a=B)-(b=(y=(i=f)+a)-i))&&(s[l++]=x),B=I-((v=I+y)-(m=v-I))+(y-m),I=v,(u+=1)<r&&(f=-e[u]);B&&(s[l++]=B);I&&(s[l++]=I);l||(s[l++]=0);return s.length=l,s}},8210:function(t){t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=n-r,a=e-r,o=t-i,s=o+a;if(s)return[s,n];return[n]}(t[0],e[0]);var i,a,o=n+r,s=new Array(o),l=0,c=0,u=0,h=Math.abs,d=t[c],g=h(d),f=e[u],p=h(f);g<p?(a=d,(c+=1)<n&&(g=h(d=t[c]))):(a=f,(u+=1)<r&&(p=h(f=e[u])));c<n&&g<p||u>=r?(i=d,(c+=1)<n&&(g=h(d=t[c]))):(i=f,(u+=1)<r&&(p=h(f=e[u])));var v,m,y=i+a,b=y-i,x=a-b,B=x,I=y;for(;c<n&&u<r;)g<p?(i=d,(c+=1)<n&&(g=h(d=t[c]))):(i=f,(u+=1)<r&&(p=h(f=e[u]))),(x=(a=B)-(b=(y=i+a)-i))&&(s[l++]=x),B=I-((v=I+y)-(m=v-I))+(y-m),I=v;for(;c<n;)(x=(a=B)-(b=(y=(i=d)+a)-i))&&(s[l++]=x),B=I-((v=I+y)-(m=v-I))+(y-m),I=v,(c+=1)<n&&(d=t[c]);for(;u<r;)(x=(a=B)-(b=(y=(i=f)+a)-i))&&(s[l++]=x),B=I-((v=I+y)-(m=v-I))+(y-m),I=v,(u+=1)<r&&(f=e[u]);B&&(s[l++]=B);I&&(s[l++]=I);l||(s[l++]=0);return s.length=l,s}},9127:function(t,e,n){t.exports=function(t){return i(r(t))};var r=n(6204),i=n(5771)},7765:function(t,e,n){t.exports=function(t,e,n,s){n=n||0,void 0===s&&(s=function(t){for(var e=t.length,n=0,r=0;r<e;++r)n=0|Math.max(n,t[r].length);return n-1}(t));if(0===t.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(t,e){for(var n=t.length,r=i.mallocUint8(n),a=0;a<n;++a)r[a]=t[a]<e|0;return r}(e,+n),c=function(t,e){for(var n=t.length,o=e*(e+1)/2*n|0,s=i.mallocUint32(2*o),l=0,c=0;c<n;++c)for(var u=t[c],h=(e=u.length,0);h<e;++h)for(var d=0;d<h;++d){var g=u[d],f=u[h];s[l++]=0|Math.min(g,f),s[l++]=0|Math.max(g,f)}a(r(s,[l/2|0,2]));var p=2;for(c=2;c<l;c+=2)s[c-2]===s[c]&&s[c-1]===s[c+1]||(s[p++]=s[c],s[p++]=s[c+1]);return r(s,[p/2|0,2])}(t,s),u=function(t,e,n,a){for(var o=t.data,s=t.shape[0],l=i.mallocDouble(s),c=0,u=0;u<s;++u){var h=o[2*u],d=o[2*u+1];if(n[h]!==n[d]){var g=e[h],f=e[d];o[2*c]=h,o[2*c+1]=d,l[c++]=(f-a)/(f-g)}}return t.shape[0]=c,r(l,[c])}(c,e,l,+n),h=function(t,e){var n=i.mallocInt32(2*e),r=t.shape[0],a=t.data;n[0]=0;for(var o=0,s=0;s<r;++s){var l=a[2*s];if(l!==o){for(n[2*o+1]=s;++o<l;)n[2*o]=s,n[2*o+1]=s;n[2*o]=s}}n[2*o+1]=r;for(;++o<e;)n[2*o]=n[2*o+1]=r;return n}(c,0|e.length),d=o(s)(t,c.data,h,l),g=function(t){for(var e=0|t.shape[0],n=t.data,r=new Array(e),i=0;i<e;++i)r[i]=[n[2*i],n[2*i+1]];return r}(c),f=[].slice.call(u.data,0,u.shape[0]);return i.free(l),i.free(c.data),i.free(u.data),i.free(h),{cells:d,vertexIds:g,vertexWeights:f}};var r=n(9618),i=n(1888),a=n(446),o=n(1570)},1570:function(t){t.exports=function(t){return e[t]()};var e=[function(){return function(t,e,n,r){for(var i=t.length,a=0;a<i;++a){t[a].length}return[]}},function(){function t(t,e,n,r){for(var i=0|Math.min(n,r),a=0|Math.max(n,r),o=t[2*i],s=t[2*i+1];o<s;){var l=o+s>>1,c=e[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(e,n,r,i){for(var a=e.length,o=[],s=0;s<a;++s){var l=e[s];if(2===l.length){var c=(i[l[0]]|0)+(i[l[1]]<<1);if(0===c||3===c)continue;switch(c){case 0:break;case 1:o.push([t(r,n,l[0],l[1])]);break;case 2:o.push([t(r,n,l[1],l[0])])}}}return o}},function(){function t(t,e,n,r){for(var i=0|Math.min(n,r),a=0|Math.max(n,r),o=t[2*i],s=t[2*i+1];o<s;){var l=o+s>>1,c=e[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(e,n,r,i){for(var a=e.length,o=[],s=0;s<a;++s){var l=e[s],c=l.length;if(3===c){if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1)+(i[l[2]]<<2))||7===u)continue;switch(u){case 0:break;case 1:o.push([t(r,n,l[0],l[2]),t(r,n,l[0],l[1])]);break;case 2:o.push([t(r,n,l[1],l[0]),t(r,n,l[1],l[2])]);break;case 3:o.push([t(r,n,l[0],l[2]),t(r,n,l[1],l[2])]);break;case 4:o.push([t(r,n,l[2],l[1]),t(r,n,l[2],l[0])]);break;case 5:o.push([t(r,n,l[2],l[1]),t(r,n,l[0],l[1])]);break;case 6:o.push([t(r,n,l[1],l[0]),t(r,n,l[2],l[0])])}}else if(2===c){var u;if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1))||3===u)continue;switch(u){case 0:break;case 1:o.push([t(r,n,l[0],l[1])]);break;case 2:o.push([t(r,n,l[1],l[0])])}}}return o}},function(){function t(t,e,n,r){for(var i=0|Math.min(n,r),a=0|Math.max(n,r),o=t[2*i],s=t[2*i+1];o<s;){var l=o+s>>1,c=e[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}return function(e,n,r,i){for(var a=e.length,o=[],s=0;s<a;++s){var l=e[s],c=l.length;if(4===c){if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1)+(i[l[2]]<<2)+(i[l[3]]<<3))||15===u)continue;switch(u){case 0:break;case 1:o.push([t(r,n,l[0],l[1]),t(r,n,l[0],l[2]),t(r,n,l[0],l[3])]);break;case 2:o.push([t(r,n,l[1],l[2]),t(r,n,l[1],l[0]),t(r,n,l[1],l[3])]);break;case 3:o.push([t(r,n,l[1],l[2]),t(r,n,l[0],l[2]),t(r,n,l[0],l[3])],[t(r,n,l[1],l[3]),t(r,n,l[1],l[2]),t(r,n,l[0],l[3])]);break;case 4:o.push([t(r,n,l[2],l[0]),t(r,n,l[2],l[1]),t(r,n,l[2],l[3])]);break;case 5:o.push([t(r,n,l[0],l[1]),t(r,n,l[2],l[1]),t(r,n,l[0],l[3])],[t(r,n,l[2],l[1]),t(r,n,l[2],l[3]),t(r,n,l[0],l[3])]);break;case 6:o.push([t(r,n,l[2],l[0]),t(r,n,l[1],l[0]),t(r,n,l[1],l[3])],[t(r,n,l[2],l[3]),t(r,n,l[2],l[0]),t(r,n,l[1],l[3])]);break;case 7:o.push([t(r,n,l[0],l[3]),t(r,n,l[1],l[3]),t(r,n,l[2],l[3])]);break;case 8:o.push([t(r,n,l[3],l[1]),t(r,n,l[3],l[0]),t(r,n,l[3],l[2])]);break;case 9:o.push([t(r,n,l[3],l[1]),t(r,n,l[0],l[1]),t(r,n,l[0],l[2])],[t(r,n,l[3],l[2]),t(r,n,l[3],l[1]),t(r,n,l[0],l[2])]);break;case 10:o.push([t(r,n,l[1],l[0]),t(r,n,l[3],l[0]),t(r,n,l[1],l[2])],[t(r,n,l[3],l[0]),t(r,n,l[3],l[2]),t(r,n,l[1],l[2])]);break;case 11:o.push([t(r,n,l[1],l[2]),t(r,n,l[0],l[2]),t(r,n,l[3],l[2])]);break;case 12:o.push([t(r,n,l[3],l[0]),t(r,n,l[2],l[0]),t(r,n,l[2],l[1])],[t(r,n,l[3],l[1]),t(r,n,l[3],l[0]),t(r,n,l[2],l[1])]);break;case 13:o.push([t(r,n,l[0],l[1]),t(r,n,l[2],l[1]),t(r,n,l[3],l[1])]);break;case 14:o.push([t(r,n,l[2],l[0]),t(r,n,l[1],l[0]),t(r,n,l[3],l[0])])}}else if(3===c){if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1)+(i[l[2]]<<2))||7===u)continue;switch(u){case 0:break;case 1:o.push([t(r,n,l[0],l[2]),t(r,n,l[0],l[1])]);break;case 2:o.push([t(r,n,l[1],l[0]),t(r,n,l[1],l[2])]);break;case 3:o.push([t(r,n,l[0],l[2]),t(r,n,l[1],l[2])]);break;case 4:o.push([t(r,n,l[2],l[1]),t(r,n,l[2],l[0])]);break;case 5:o.push([t(r,n,l[2],l[1]),t(r,n,l[0],l[1])]);break;case 6:o.push([t(r,n,l[1],l[0]),t(r,n,l[2],l[0])])}}else if(2===c){var u;if(0===(u=(i[l[0]]|0)+(i[l[1]]<<1))||3===u)continue;switch(u){case 0:break;case 1:o.push([t(r,n,l[0],l[1])]);break;case 2:o.push([t(r,n,l[1],l[0])])}}}return o}}]},6803:function(t,e,n){n(8828),n(1755),e.Fw=function(t,e){var n=t.length,r=t.length-e.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],o=e[0]+e[1];if(s=a+t[2]-(o+e[2]))return s;var s,l=i(t[0],t[1]),c=i(e[0],e[1]);return(s=i(l,t[2])-i(c,e[2]))||i(l+t[2],a)-i(c+e[2],o);default:var u=t.slice(0);u.sort();var h=e.slice(0);h.sort();for(var d=0;d<n;++d)if(r=u[d]-h[d])return r;return 0}}},3105:function(t,e){function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},2014:function(t,e,n){var r=n(3105),i=n(4623);function a(t,e){var n=t.length,r=t.length-e.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],o=e[0]+e[1];if(s=a+t[2]-(o+e[2]))return s;var s,l=i(t[0],t[1]),c=i(e[0],e[1]);return(s=i(l,t[2])-i(c,e[2]))||i(l+t[2],a)-i(c+e[2],o);default:var u=t.slice(0);u.sort();var h=e.slice(0);h.sort();for(var d=0;d<n;++d)if(r=u[d]-h[d])return r;return 0}}function o(t,e){return a(t[0],e[0])}function s(t,e){if(e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=[t[i],e[i]];r.sort(o);for(i=0;i<n;++i)t[i]=r[i][0],e[i]=r[i][1];return t}return t.sort(a),t}function l(t){if(0===t.length)return[];for(var e=1,n=t.length,r=1;r<n;++r){var i=t[r];if(a(i,t[r-1])){if(r===e){e++;continue}t[e++]=i}}return t.length=e,t}function c(t,e){for(var n=0,r=t.length-1,i=-1;n<=r;){var o=n+r>>1,s=a(t[o],e);s<=0?(0===s&&(i=o),n=o+1):s>0&&(r=o-1)}return i}function u(t,e){for(var n=new Array(t.length),i=0,o=n.length;i<o;++i)n[i]=[];for(var s=[],l=(i=0,e.length);i<l;++i)for(var u=e[i],h=u.length,d=1,g=1<<h;d<g;++d){s.length=r.popCount(d);for(var f=0,p=0;p<h;++p)d&1<<p&&(s[f++]=u[p]);var v=c(t,s);if(!(v<0))for(;n[v++].push(i),!(v>=t.length||0!==a(t[v],s)););}return n}function h(t,e){if(e<0)return[];for(var n=[],i=(1<<e+1)-1,a=0;a<t.length;++a)for(var o=t[a],l=i;l<1<<o.length;l=r.nextCombination(l)){for(var c=new Array(e+1),u=0,h=0;h<o.length;++h)l&1<<h&&(c[u++]=o[h]);n.push(c)}return s(n)}e.dimension=function(t){for(var e=0,n=Math.max,r=0,i=t.length;r<i;++r)e=n(e,t[r].length);return e-1},e.countVertices=function(t){for(var e=-1,n=Math.max,r=0,i=t.length;r<i;++r)for(var a=t[r],o=0,s=a.length;o<s;++o)e=n(e,a[o]);return e+1},e.cloneCells=function(t){for(var e=new Array(t.length),n=0,r=t.length;n<r;++n)e[n]=t[n].slice(0);return e},e.compareCells=a,e.normalize=s,e.unique=l,e.findCell=c,e.incidence=u,e.dual=function(t,e){if(!e)return u(l(h(t,0)),t);for(var n=new Array(e),r=0;r<e;++r)n[r]=[];r=0;for(var i=t.length;r<i;++r)for(var a=t[r],o=0,s=a.length;o<s;++o)n[a[o]].push(r);return n},e.explode=function(t){for(var e=[],n=0,r=t.length;n<r;++n)for(var i=t[n],a=0|i.length,o=1,l=1<<a;o<l;++o){for(var c=[],u=0;u<a;++u)o>>>u&1&&c.push(i[u]);e.push(c)}return s(e)},e.skeleton=h,e.boundary=function(t){for(var e=[],n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length;a<o;++a){for(var l=new Array(i.length-1),c=0,u=0;c<o;++c)c!==a&&(l[u++]=i[c]);e.push(l)}return s(e)},e.connectedComponents=function(t,e){return e?function(t,e){for(var n=new i(e),r=0;r<t.length;++r)for(var a=t[r],o=0;o<a.length;++o)for(var s=o+1;s<a.length;++s)n.link(a[o],a[s]);var l=[],c=n.ranks;for(r=0;r<c.length;++r)c[r]=-1;for(r=0;r<t.length;++r){var u=n.find(t[r][0]);c[u]<0?(c[u]=l.length,l.push([t[r].slice(0)])):l[c[u]].push(t[r].slice(0))}return l}(t,e):function(t){for(var e=l(s(h(t,0))),n=new i(e.length),r=0;r<t.length;++r)for(var a=t[r],o=0;o<a.length;++o)for(var u=c(e,[a[o]]),d=o+1;d<a.length;++d)n.link(u,c(e,[a[d]]));var g=[],f=n.ranks;for(r=0;r<f.length;++r)f[r]=-1;for(r=0;r<t.length;++r){var p=n.find(c(e,[t[r][0]]));f[p]<0?(f[p]=g.length,g.push([t[r].slice(0)])):g[f[p]].push(t[r].slice(0))}return g}(t)}},4623:function(t){function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},e.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var n=e[t];e[t]=e[n],t=n}return t},e.prototype.link=function(t,e){var n=this.find(t),r=this.find(e);if(n!==r){var i=this.ranks,a=this.roots,o=i[n],s=i[r];o<s?a[n]=r:s<o?a[r]=n:(a[r]=n,++i[n])}}},5878:function(t,e,n){t.exports=function(t,e,n){for(var a=e.length,o=t.length,s=new Array(a),l=new Array(a),c=new Array(a),u=new Array(a),h=0;h<a;++h)s[h]=l[h]=-1,c[h]=1/0,u[h]=!1;for(h=0;h<o;++h){var d=t[h];if(2!==d.length)throw new Error("Input must be a graph");var g=d[1],f=d[0];-1!==l[f]?l[f]=-2:l[f]=g,-1!==s[g]?s[g]=-2:s[g]=f}function p(t){if(u[t])return 1/0;var n=s[t],i=l[t];return n<0||i<0?1/0:function(t,e,n){var i=Math.abs(r(t,e,n)),a=Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2));return i/a}(e[t],e[n],e[i])}function v(t,e){var n=Q[t],r=Q[e];Q[t]=r,Q[e]=n,C[n]=e,C[r]=t}function m(t){return c[Q[t]]}function y(t){return 1&t?t-1>>1:(t>>1)-1}function b(t){for(var e=m(t);;){var n=e,r=2*t+1,i=2*(t+1),a=t;if(r<w){var o=m(r);o<n&&(a=r,n=o)}if(i<w)m(i)<n&&(a=i);if(a===t)return t;v(t,a),t=a}}function x(t){for(var e=m(t);t>0;){var n=y(t);if(n>=0)if(e<m(n)){v(t,n),t=n;continue}return t}}function B(){if(w>0){var t=Q[0];return v(0,w-1),w-=1,b(0),t}return-1}function I(t,e){var n=Q[t];return c[n]===e?t:(c[n]=-1/0,x(t),B(),c[n]=e,x((w+=1)-1))}function F(t){if(!u[t]){u[t]=!0;var e=s[t],n=l[t];s[n]>=0&&(s[n]=e),l[e]>=0&&(l[e]=n),C[e]>=0&&I(C[e],p(e)),C[n]>=0&&I(C[n],p(n))}}var Q=[],C=new Array(a);for(h=0;h<a;++h){(c[h]=p(h))<1/0?(C[h]=Q.length,Q.push(h)):C[h]=-1}var w=Q.length;for(h=w>>1;h>=0;--h)b(h);for(;;){var U=B();if(U<0||c[U]>n)break;F(U)}var A=[];for(h=0;h<a;++h)u[h]||(C[h]=A.length,A.push(e[h].slice()));function S(t,e){if(t[e]<0)return e;var n=e,r=e;do{var i=t[r];if(!u[r]||i<0||i===r)break;if(i=t[r=i],!u[r]||i<0||i===r)break;r=i,n=t[n]}while(n!==r);for(var a=e;a!==r;a=t[a])t[a]=r;return r}A.length;var L=[];return t.forEach((function(t){var e=S(s,t[0]),n=S(l,t[1]);if(e>=0&&n>=0&&e!==n){var r=C[e],i=C[n];r!==i&&L.push([r,i])}})),i.unique(i.normalize(L)),{positions:A,edges:L}};var r=n(3250),i=n(2014)},1303:function(t,e,n){t.exports=function(t,e){var n,a,o,s;if(e[0][0]<e[1][0])n=e[0],a=e[1];else{if(!(e[0][0]>e[1][0]))return i(e,t);n=e[1],a=e[0]}if(t[0][0]<t[1][0])o=t[0],s=t[1];else{if(!(t[0][0]>t[1][0]))return-i(t,e);o=t[1],s=t[0]}var l=r(n,a,s),c=r(n,a,o);if(l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;if(l=r(s,o,a),c=r(s,o,n),l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;return a[0]-s[0]};var r=n(3250);function i(t,e){var n,i,a,o;if(e[0][0]<e[1][0])n=e[0],i=e[1];else{if(!(e[0][0]>e[1][0])){var s=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),c=Math.min(e[0][1],e[1][1]),u=Math.max(e[0][1],e[1][1]);return l<c?l-c:s>u?s-u:l-u}n=e[1],i=e[0]}t[0][1]<t[1][1]?(a=t[0],o=t[1]):(a=t[1],o=t[0]);var h=r(i,n,a);return h||((h=r(i,n,o))||o-i)}},4209:function(t,e,n){t.exports=function(t){for(var e=t.length,n=2*e,r=new Array(n),a=0;a<e;++a){var l=t[a],c=l[0][0]<l[1][0];r[2*a]=new h(l[0][0],l,c,a),r[2*a+1]=new h(l[1][0],l,!c,a)}r.sort((function(t,e){var n=t.x-e.x;return n||((n=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1]))}));var d=i(o),g=[],f=[],p=[];for(a=0;a<n;){for(var v=r[a].x,m=[];a<n;){var y=r[a];if(y.x!==v)break;a+=1,y.segment[0][0]===y.x&&y.segment[1][0]===y.x?y.create&&(y.segment[0][1]<y.segment[1][1]?(m.push(new u(y.segment[0][1],y.index,!0,!0)),m.push(new u(y.segment[1][1],y.index,!1,!1))):(m.push(new u(y.segment[1][1],y.index,!0,!1)),m.push(new u(y.segment[0][1],y.index,!1,!0)))):d=y.create?d.insert(y.segment,y.index):d.remove(y.segment)}g.push(d.root),f.push(v),p.push(m)}return new s(g,f,p)};var r=n(2478),i=n(3840),a=n(3250),o=n(1303);function s(t,e,n){this.slabs=t,this.coordinates=e,this.horizontal=n}function l(t,e){return t.y-e}function c(t,e){for(var n=null;t;){var r,i,o=t.key;o[0][0]<o[1][0]?(r=o[0],i=o[1]):(r=o[1],i=o[0]);var s=a(r,i,e);if(s<0)t=t.left;else if(s>0)if(e[0]!==o[1][0])n=t,t=t.right;else{if(l=c(t.right,e))return l;t=t.left}else{if(e[0]!==o[1][0])return t;var l;if(l=c(t.right,e))return l;t=t.left}}return n}function u(t,e,n,r){this.y=t,this.index=e,this.start=n,this.closed=r}function h(t,e,n,r){this.x=t,this.segment=e,this.create=n,this.index=r}s.prototype.castUp=function(t){var e=r.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var n=c(this.slabs[e],t),i=-1;if(n&&(i=n.value),this.coordinates[e]===t[0]){var s=null;if(n&&(s=n.key),e>0){var u=c(this.slabs[e-1],t);u&&(s?o(u.key,s)>0&&(s=u.key,i=u.value):(i=u.value,s=u.key))}var h=this.horizontal[e];if(h.length>0){var d=r.ge(h,t[1],l);if(d<h.length){var g=h[d];if(t[1]===g.y){if(g.closed)return g.index;for(;d<h.length-1&&h[d+1].y===t[1];)if((g=h[d+=1]).closed)return g.index;if(g.y===t[1]&&!g.start){if((d+=1)>=h.length)return i;g=h[d]}}if(g.start)if(s){var f=a(s[0],s[1],[t[0],g.y]);s[0][0]>s[1][0]&&(f=-f),f>0&&(i=g.index)}else i=g.index;else g.y!==t[1]&&(i=g.index)}}}return i}},5202:function(t,e,n){var r=n(1944),i=n(8210);function a(t,e){var n=i(r(t,e),[e[e.length-1]]);return n[n.length-1]}function o(t,e,n,r){var i=-e/(r-e);i<0?i=0:i>1&&(i=1);for(var a=1-i,o=t.length,s=new Array(o),l=0;l<o;++l)s[l]=i*t[l]+a*n[l];return s}t.exports=function(t,e){for(var n=[],r=[],i=a(t[t.length-1],e),s=t[t.length-1],l=t[0],c=0;c<t.length;++c,s=l){var u=a(l=t[c],e);if(i<0&&u>0||i>0&&u<0){var h=o(s,u,l,i);n.push(h),r.push(h.slice())}u<0?r.push(l.slice()):u>0?n.push(l.slice()):(n.push(l.slice()),r.push(l.slice())),i=u}return{positive:n,negative:r}},t.exports.positive=function(t,e){for(var n=[],r=a(t[t.length-1],e),i=t[t.length-1],s=t[0],l=0;l<t.length;++l,i=s){var c=a(s=t[l],e);(r<0&&c>0||r>0&&c<0)&&n.push(o(i,c,s,r)),c>=0&&n.push(s.slice()),r=c}return n},t.exports.negative=function(t,e){for(var n=[],r=a(t[t.length-1],e),i=t[t.length-1],s=t[0],l=0;l<t.length;++l,i=s){var c=a(s=t[l],e);(r<0&&c>0||r>0&&c<0)&&n.push(o(i,c,s,r)),c<=0&&n.push(s.slice()),r=c}return n}},3387:function(t,e,n){var r;!function(){var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(t){return function(t,e){var n,r,o,s,l,c,u,h,d,g=1,f=t.length,p="";for(r=0;r<f;r++)if("string"==typeof t[r])p+=t[r];else if("object"==typeof t[r]){if((s=t[r]).keys)for(n=e[g],o=0;o<s.keys.length;o++){if(null==n)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[o],s.keys[o-1]));n=n[s.keys[o]]}else n=s.param_no?e[s.param_no]:e[g++];if(i.not_type.test(s.type)&&i.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),i.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(a("[sprintf] expecting number but found %T",n));switch(i.number.test(s.type)&&(h=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}i.json.test(s.type)?p+=n:(!i.number.test(s.type)||h&&!s.sign?d="":(d=h?"+":"-",n=n.toString().replace(i.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(d+n).length,l=s.width&&u>0?c.repeat(u):"",p+=s.align?d+n+l:"0"===c?d+l+n:l+d+n)}return p}(function(t){if(s[t])return s[t];var e,n=t,r=[],a=0;for(;n;){if(null!==(e=i.text.exec(n)))r.push(e[0]);else if(null!==(e=i.modulo.exec(n)))r.push("%");else{if(null===(e=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){a|=1;var o=[],l=e[2],c=[];if(null===(c=i.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=i.key_access.exec(l)))o.push(c[1]);else{if(null===(c=i.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(c[1])}e[2]=o}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}n=n.substring(e[0].length)}return s[t]=r}(t),arguments)}function o(t,e){return a.apply(null,[t].concat(e||[]))}var s=Object.create(null);e.sprintf=a,e.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=o,void 0===(r=function(){return{sprintf:a,vsprintf:o}}.call(e,n,e,t))||(t.exports=r))}()},3711:function(t,e,n){t.exports=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var n=i(t,e),r=n.length,a=new Array(r),o=new Array(r),s=0;s<r;++s)a[s]=[n[s]],o[s]=[s];return{positions:a,cells:o}}(t,e);var n=t.order.join()+"-"+t.dtype,s=o[n];e=+e||0;s||(s=o[n]=function(t,e){var n=t.length+"d",i=a[n];if(i)return i(r,t,e)}(t.order,t.dtype));return s(t,e)};var r=n(2640),i=n(781),a={"2d":function(t,e,n){var r=t({order:e,scalarArguments:3,getters:"generic"===n?[0]:void 0,phase:function(t,e,n,r){return t>r|0},vertex:function(t,e,n,r,i,a,o,s,l,c,u,h,d){var g=(o|0)+(s<<1)+(l<<2)+(c<<3)|0;if(0!==g&&15!==g)switch(g){case 0:case 15:u.push([t-.5,e-.5]);break;case 1:u.push([t-.25-.25*(r+n-2*d)/(n-r),e-.25-.25*(i+n-2*d)/(n-i)]);break;case 2:u.push([t-.75-.25*(-r-n+2*d)/(r-n),e-.25-.25*(a+r-2*d)/(r-a)]);break;case 3:u.push([t-.5,e-.5-.5*(i+n+a+r-4*d)/(n-i+r-a)]);break;case 4:u.push([t-.25-.25*(a+i-2*d)/(i-a),e-.75-.25*(-i-n+2*d)/(i-n)]);break;case 5:u.push([t-.5-.5*(r+n+a+i-4*d)/(n-r+i-a),e-.5]);break;case 6:u.push([t-.5-.25*(-r-n+a+i)/(r-n+i-a),e-.5-.25*(-i-n+a+r)/(i-n+r-a)]);break;case 7:u.push([t-.75-.25*(a+i-2*d)/(i-a),e-.75-.25*(a+r-2*d)/(r-a)]);break;case 8:u.push([t-.75-.25*(-a-i+2*d)/(a-i),e-.75-.25*(-a-r+2*d)/(a-r)]);break;case 9:u.push([t-.5-.25*(r+n+-a-i)/(n-r+a-i),e-.5-.25*(i+n+-a-r)/(n-i+a-r)]);break;case 10:u.push([t-.5-.5*(-r-n-a-i+4*d)/(r-n+a-i),e-.5]);break;case 11:u.push([t-.25-.25*(-a-i+2*d)/(a-i),e-.75-.25*(i+n-2*d)/(n-i)]);break;case 12:u.push([t-.5,e-.5-.5*(-i-n-a-r+4*d)/(i-n+a-r)]);break;case 13:u.push([t-.75-.25*(r+n-2*d)/(n-r),e-.25-.25*(-a-r+2*d)/(a-r)]);break;case 14:u.push([t-.25-.25*(-r-n+2*d)/(r-n),e-.25-.25*(-i-n+2*d)/(i-n)])}},cell:function(t,e,n,r,i,a,o,s,l){i?s.push([t,e]):s.push([e,t])}});return function(t,e){var n=[],i=[];return r(t,n,i,e),{positions:n,cells:i}}}};var o={}},529:function(t,e,n){t.exports=function t(e,n,i){var o=(i=i||{}).fontStyle||"normal",s=i.fontWeight||"normal",l=i.fontVariant||"normal",c=[o,s,l,e].join("_"),u=a[c];u||(u=a[c]={" ":{data:new Float32Array(0),shape:.2}});var h=u[n];if(!h)if(n.length<=1||!/\d/.test(n))h=u[n]=function(t){for(var e=t.cells,n=t.positions,r=new Float32Array(6*e.length),i=0,a=0,o=0;o<e.length;++o)for(var s=e[o],l=0;l<3;++l){var c=n[s[l]];r[i++]=c[0],r[i++]=c[1]+1.4,a=Math.max(c[0],a)}return{data:r,shape:a}}(r(n,{triangles:!0,font:e,fontStyle:o,fontWeight:s,fontVariant:l,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var d=n.split(/(\d|\s)/),g=new Array(d.length),f=0,p=0,v=0;v<d.length;++v)g[v]=t(e,d[v]),f+=g[v].data.length,p+=g[v].shape,v>0&&(p+=.02);var m=new Float32Array(f),y=0,b=-.5*p;for(v=0;v<g.length;++v){for(var x=g[v].data,B=0;B<x.length;B+=2)m[y++]=x[B]+b,m[y++]=x[B+1];b+=g[v].shape+.02}h=u[n]={data:m,shape:p}}return h};var r=n(4359),i=window||process.global||{},a=i.__TEXT_CACHE||{};i.__TEXT_CACHE={}},665:function(t,e,n){var r=n(3202);t.exports=o;var i=96;function a(t,e){var n=r(getComputedStyle(t).getPropertyValue(e));return n[0]*o(n[1],t)}function o(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return function(t,e){var n=document.createElement("div");n.style["font-size"]="128"+t,e.appendChild(n);var r=a(n,"font-size")/128;return e.removeChild(n),r}(t,e);case"em":return a(e,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6}return 1}},7261:function(t,e,n){t.exports=function(t){var e=(t=t||{}).center||[0,0,0],n=t.up||[0,1,0],r=t.right||h(n),i=t.radius||1,a=t.theta||0,u=t.phi||0;if(e=[].slice.call(e,0,3),n=[].slice.call(n,0,3),s(n,n),r=[].slice.call(r,0,3),s(r,r),"eye"in t){var g=t.eye,f=[g[0]-e[0],g[1]-e[1],g[2]-e[2]];o(r,f,n),c(r[0],r[1],r[2])<1e-6?r=h(n):s(r,r),i=c(f[0],f[1],f[2]);var p=l(n,f)/i,v=l(r,f)/i;u=Math.acos(p),a=Math.acos(v)}return i=Math.log(i),new d(t.zoomMin,t.zoomMax,e,n,r,i,a,u)};var r=n(9215),i=n(7608),a=n(6079),o=n(5911),s=n(3536),l=n(244);function c(t,e,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2))}function u(t){return Math.min(1,Math.max(-1,t))}function h(t){var e=Math.abs(t[0]),n=Math.abs(t[1]),r=Math.abs(t[2]),i=[0,0,0];e>Math.max(n,r)?i[2]=1:n>Math.max(e,r)?i[0]=1:i[1]=1;for(var a=0,o=0,l=0;l<3;++l)a+=t[l]*t[l],o+=i[l]*t[l];for(l=0;l<3;++l)i[l]-=o/a*t[l];return s(i,i),i}function d(t,e,n,i,a,o,s,l){this.center=r(n),this.up=r(i),this.right=r(a),this.radius=r([o]),this.angle=r([s,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var c=0;c<16;++c)this.computedMatrix[c]=.5;this.recalcMatrix(0)}var g=d.prototype;g.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},g.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},g.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,n=this.computedRight,r=0,i=0,a=0;a<3;++a)i+=e[a]*n[a],r+=e[a]*e[a];var l=Math.sqrt(r),u=0;for(a=0;a<3;++a)n[a]-=e[a]*i/r,u+=n[a]*n[a],e[a]/=l;var h=Math.sqrt(u);for(a=0;a<3;++a)n[a]/=h;var d=this.computedToward;o(d,e,n),s(d,d);var g=Math.exp(this.computedRadius[0]),f=this.computedAngle[0],p=this.computedAngle[1],v=Math.cos(f),m=Math.sin(f),y=Math.cos(p),b=Math.sin(p),x=this.computedCenter,B=v*y,I=m*y,F=b,Q=-v*b,C=-m*b,w=y,U=this.computedEye,A=this.computedMatrix;for(a=0;a<3;++a){var S=B*n[a]+I*d[a]+F*e[a];A[4*a+1]=Q*n[a]+C*d[a]+w*e[a],A[4*a+2]=S,A[4*a+3]=0}var L=A[1],k=A[5],G=A[9],_=A[2],R=A[6],E=A[10],T=k*E-G*R,M=G*_-L*E,N=L*R-k*_,D=c(T,M,N);T/=D,M/=D,N/=D,A[0]=T,A[4]=M,A[8]=N;for(a=0;a<3;++a)U[a]=x[a]+A[2+4*a]*g;for(a=0;a<3;++a){u=0;for(var X=0;X<3;++X)u+=A[a+4*X]*U[X];A[12+a]=-u}A[15]=1},g.getMatrix=function(t,e){this.recalcMatrix(t);var n=this.computedMatrix;if(e){for(var r=0;r<16;++r)e[r]=n[r];return e}return n};var f=[0,0,0];g.rotate=function(t,e,n,r){if(this.angle.move(t,e,n),r){this.recalcMatrix(t);var i=this.computedMatrix;f[0]=i[2],f[1]=i[6],f[2]=i[10];for(var o=this.computedUp,s=this.computedRight,l=this.computedToward,c=0;c<3;++c)i[4*c]=o[c],i[4*c+1]=s[c],i[4*c+2]=l[c];a(i,i,r,f);for(c=0;c<3;++c)o[c]=i[4*c],s[c]=i[4*c+1];this.up.set(t,o[0],o[1],o[2]),this.right.set(t,s[0],s[1],s[2])}},g.pan=function(t,e,n,r){e=e||0,n=n||0,r=r||0,this.recalcMatrix(t);var i=this.computedMatrix;Math.exp(this.computedRadius[0]);var a=i[1],o=i[5],s=i[9],l=c(a,o,s);a/=l,o/=l,s/=l;var u=i[0],h=i[4],d=i[8],g=u*a+h*o+d*s,f=c(u-=a*g,h-=o*g,d-=s*g),p=(u/=f)*e+a*n,v=(h/=f)*e+o*n,m=(d/=f)*e+s*n;this.center.move(t,p,v,m);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+r),this.radius.set(t,Math.log(y))},g.translate=function(t,e,n,r){this.center.move(t,e||0,n||0,r||0)},g.setMatrix=function(t,e,n,r){var a=1;"number"==typeof n&&(a=0|n),(a<0||a>3)&&(a=1);var o=(a+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var s=e[a],l=e[a+4],h=e[a+8];if(r){var d=Math.abs(s),g=Math.abs(l),f=Math.abs(h),p=Math.max(d,g,f);d===p?(s=s<0?-1:1,l=h=0):f===p?(h=h<0?-1:1,s=l=0):(l=l<0?-1:1,s=h=0)}else{var v=c(s,l,h);s/=v,l/=v,h/=v}var m,y,b=e[o],x=e[o+4],B=e[o+8],I=b*s+x*l+B*h,F=c(b-=s*I,x-=l*I,B-=h*I),Q=l*(B/=F)-h*(x/=F),C=h*(b/=F)-s*B,w=s*x-l*b,U=c(Q,C,w);if(Q/=U,C/=U,w/=U,this.center.jump(t,W,Y,z),this.radius.idle(t),this.up.jump(t,s,l,h),this.right.jump(t,b,x,B),2===a){var A=e[1],S=e[5],L=e[9],k=A*b+S*x+L*B,G=A*Q+S*C+L*w;m=T<0?-Math.PI/2:Math.PI/2,y=Math.atan2(G,k)}else{var _=e[2],R=e[6],E=e[10],T=_*s+R*l+E*h,M=_*b+R*x+E*B,N=_*Q+R*C+E*w;m=Math.asin(u(T)),y=Math.atan2(N,M)}this.angle.jump(t,y,m),this.recalcMatrix(t);var D=e[2],X=e[6],Z=e[10],V=this.computedMatrix;i(V,e);var H=V[15],W=V[12]/H,Y=V[13]/H,z=V[14]/H,O=Math.exp(this.computedRadius[0]);this.center.jump(t,W-D*O,Y-X*O,z-Z*O)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},g.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},g.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},g.lookAt=function(t,e,n,r){this.recalcMatrix(t),e=e||this.computedEye,n=n||this.computedCenter;var i=(r=r||this.computedUp)[0],a=r[1],o=r[2],s=c(i,a,o);if(!(s<1e-6)){i/=s,a/=s,o/=s;var l=e[0]-n[0],h=e[1]-n[1],d=e[2]-n[2],g=c(l,h,d);if(!(g<1e-6)){l/=g,h/=g,d/=g;var f=this.computedRight,p=f[0],v=f[1],m=f[2],y=i*p+a*v+o*m,b=c(p-=y*i,v-=y*a,m-=y*o);if(!(b<.01&&(b=c(p=a*d-o*h,v=o*l-i*d,m=i*h-a*l))<1e-6)){p/=b,v/=b,m/=b,this.up.set(t,i,a,o),this.right.set(t,p,v,m),this.center.set(t,n[0],n[1],n[2]),this.radius.set(t,Math.log(g));var x=a*m-o*v,B=o*p-i*m,I=i*v-a*p,F=c(x,B,I),Q=i*l+a*h+o*d,C=p*l+v*h+m*d,w=(x/=F)*l+(B/=F)*h+(I/=F)*d,U=Math.asin(u(Q)),A=Math.atan2(w,C),S=this.angle._state,L=S[S.length-1],k=S[S.length-2];L%=2*Math.PI;var G=Math.abs(L+2*Math.PI-A),_=Math.abs(L-A),R=Math.abs(L-2*Math.PI-A);G<_&&(L+=2*Math.PI),R<_&&(L-=2*Math.PI),this.angle.jump(this.angle.lastT(),L,k),this.angle.set(t,A,U)}}}}},5250:function(t){t.exports=function(t,n,r){var i=t*n,a=e*t,o=a-t,s=a-o,l=t-s,c=e*n,u=c-n,h=c-u,d=n-h,g=i-s*h,f=l*d-(g-l*h-s*d);if(r)return r[0]=f,r[1]=i,r;return[f,i]};var e=+(Math.pow(2,27)+1)},9362:function(t){t.exports=function(t,e,n){var r=t+e,i=r-t,a=r-i,o=e-i,s=t-a;if(n)return n[0]=s+o,n[1]=r,n;return[s+o,r]}},1888:function(t,e,n){var r=n(8828),i=n(1338),a=n(4793).hp;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=n.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=i([32,0])),c.BIGUINT64||(c.BIGUINT64=i([32,0])),c.BIGINT64||(c.BIGINT64=i([32,0])),c.BUFFER||(c.BUFFER=i([32,0]));var u=c.DATA,h=c.BUFFER;function d(t){if(t){var e=t.length||t.byteLength,n=r.log2(e);u[n].push(t)}}function g(t){t=r.nextPow2(t);var e=r.log2(t),n=u[e];return n.length>0?n.pop():new ArrayBuffer(t)}function f(t){return new Uint8Array(g(t),0,t)}function p(t){return new Uint16Array(g(2*t),0,t)}function v(t){return new Uint32Array(g(4*t),0,t)}function m(t){return new Int8Array(g(t),0,t)}function y(t){return new Int16Array(g(2*t),0,t)}function b(t){return new Int32Array(g(4*t),0,t)}function x(t){return new Float32Array(g(4*t),0,t)}function B(t){return new Float64Array(g(8*t),0,t)}function I(t){return o?new Uint8ClampedArray(g(t),0,t):f(t)}function F(t){return s?new BigUint64Array(g(8*t),0,t):null}function Q(t){return l?new BigInt64Array(g(8*t),0,t):null}function C(t){return new DataView(g(t),0,t)}function w(t){t=r.nextPow2(t);var e=r.log2(t),n=h[e];return n.length>0?n.pop():new a(t)}e.free=function(t){if(a.isBuffer(t))h[r.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,n=0|r.log2(e);u[n].push(t)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeBigUint64=e.freeInt8=e.freeInt16=e.freeInt32=e.freeBigInt64=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(t){d(t.buffer)},e.freeArrayBuffer=d,e.freeBuffer=function(t){h[r.log2(t.length)].push(t)},e.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return g(t);switch(e){case"uint8":return f(t);case"uint16":return p(t);case"uint32":return v(t);case"int8":return m(t);case"int16":return y(t);case"int32":return b(t);case"float":case"float32":return x(t);case"double":case"float64":return B(t);case"uint8_clamped":return I(t);case"bigint64":return Q(t);case"biguint64":return F(t);case"buffer":return w(t);case"data":case"dataview":return C(t);default:return null}return null},e.mallocArrayBuffer=g,e.mallocUint8=f,e.mallocUint16=p,e.mallocUint32=v,e.mallocInt8=m,e.mallocInt16=y,e.mallocInt32=b,e.mallocFloat32=e.mallocFloat=x,e.mallocFloat64=e.mallocDouble=B,e.mallocUint8Clamped=I,e.mallocBigUint64=F,e.mallocBigInt64=Q,e.mallocDataView=C,e.mallocBuffer=w,e.clearCache=function(){for(var t=0;t<32;++t)c.UINT8[t].length=0,c.UINT16[t].length=0,c.UINT32[t].length=0,c.INT8[t].length=0,c.INT16[t].length=0,c.INT32[t].length=0,c.FLOAT[t].length=0,c.DOUBLE[t].length=0,c.BIGUINT64[t].length=0,c.BIGINT64[t].length=0,c.UINT8C[t].length=0,u[t].length=0,h[t].length=0}},1755:function(t){function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e;var n=e.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var e=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[e]!==t;){var r=n[e];n[e]=t,e=r}return t},n.link=function(t,e){var n=this.find(t),r=this.find(e);if(n!==r){var i=this.ranks,a=this.roots,o=i[n],s=i[r];o<s?a[n]=r:s<o?a[r]=n:(a[r]=n,++i[n])}}},1682:function(t){t.exports=function(t,e,n){return 0===t.length?t:e?(n||t.sort(e),function(t,e){for(var n=1,r=t.length,i=t[0],a=t[0],o=1;o<r;++o)if(a=i,e(i=t[o],a)){if(o===n){n++;continue}t[n++]=i}return t.length=n,t}(t,e)):(n||t.sort(),function(t){for(var e=1,n=t.length,r=t[0],i=t[0],a=1;a<n;++a,i=r)if(i=r,(r=t[a])!==i){if(a===e){e++;continue}t[e++]=r}return t.length=e,t}(t))}},4359:function(t,e,n){t.exports=function(t,e){"object"==typeof e&&null!==e||(e={});return r(t,e.canvas||i,e.context||a,e)};var r=n(7718),i=null,a=null;"undefined"!=typeof document&&((i=document.createElement("canvas")).width=8192,i.height=1024,a=i.getContext("2d"))},7718:function(t,e,n){t.exports=function(t,e,n,r){var a=64,o=1.25,s={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};r&&(r.size&&r.size>0&&(a=r.size),r.lineSpacing&&r.lineSpacing>0&&(o=r.lineSpacing),r.styletags&&r.styletags.breaklines&&(s.breaklines=!!r.styletags.breaklines),r.styletags&&r.styletags.bolds&&(s.bolds=!!r.styletags.bolds),r.styletags&&r.styletags.italics&&(s.italics=!!r.styletags.italics),r.styletags&&r.styletags.subscripts&&(s.subscripts=!!r.styletags.subscripts),r.styletags&&r.styletags.superscripts&&(s.superscripts=!!r.styletags.superscripts));n.font=[r.fontStyle,r.fontVariant,r.fontWeight,a+"px",r.font].filter((function(t){return t})).join(" "),n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr";var l=function(t,e,n,r,a,o){n=n.replace(/\n/g,""),n=!0===o.breaklines?n.replace(/\<br\>/g,"\n"):n.replace(/\<br\>/g," ");var s="",l=[];for(F=0;F<n.length;++F)l[F]=s;!0===o.bolds&&(l=b(c,u,n,l));!0===o.italics&&(l=b(h,d,n,l));!0===o.superscripts&&(l=b(g,p,n,l));!0===o.subscripts&&(l=b(v,y,n,l));var x=[],B="";for(F=0;F<n.length;++F)null!==l[F]&&(B+=n[F],x.push(l[F]));var I,F,Q,C,w,U=B.split("\n"),A=U.length,S=Math.round(a*r),L=r,k=2*r,G=0,_=A*S+k;t.height<_&&(t.height=_);e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff";var R=0,E="";function T(){if(""!==E){var t=e.measureText(E).width;e.fillText(E,L+Q,k+C),Q+=t}}function M(){return Math.round(w)+"px "}function N(t,n){var r=""+e.font;if(!0===o.subscripts){var i=t.indexOf(m),a=n.indexOf(m),s=i>-1?parseInt(t[1+i]):0,l=a>-1?parseInt(n[1+a]):0;s!==l&&(r=r.replace(M(),"?px "),w*=Math.pow(.75,l-s),r=r.replace("?px ",M())),C+=.25*S*(l-s)}if(!0===o.superscripts){var c=t.indexOf(f),h=n.indexOf(f),g=c>-1?parseInt(t[1+c]):0,p=h>-1?parseInt(n[1+h]):0;g!==p&&(r=r.replace(M(),"?px "),w*=Math.pow(.75,p-g),r=r.replace("?px ",M())),C-=.25*S*(p-g)}if(!0===o.bolds){var v=t.indexOf(u)>-1,y=n.indexOf(u)>-1;!v&&y&&(r=b?r.replace("italic ","italic bold "):"bold "+r),v&&!y&&(r=r.replace("bold ",""))}if(!0===o.italics){var b=t.indexOf(d)>-1,x=n.indexOf(d)>-1;!b&&x&&(r="italic "+r),b&&!x&&(r=r.replace("italic ",""))}e.font=r}for(I=0;I<A;++I){var D=U[I]+"\n";for(Q=0,C=I*S,w=r,E="",F=0;F<D.length;++F){var X=F+R<x.length?x[F+R]:x[x.length-1];s===X?E+=D[F]:(T(),E=D[F],void 0!==X&&(N(s,X),s=X))}T(),R+=D.length;var Z=0|Math.round(Q+2*L);G<Z&&(G=Z)}var V=G,H=k+S*A,W=i(e.getImageData(0,0,V,H).data,[H,V,4]);return W.pick(-1,-1,0).transpose(1,0)}(e,n,t,a,o,s);return I(l,r,a)},t.exports.processPixels=I;var r=n(3711),i=n(9618),a=n(5878),o=n(332),s=n(2538),l=n(2095),c="b",u="b|",h="i",d="i|",g="sup",f="+",p="+1",v="sub",m="-",y="-1";function b(t,e,n,r){for(var i="<"+t+">",a="</"+t+">",o=i.length,s=a.length,l=e[0]===f||e[0]===m,c=0,u=-s;c>-1&&-1!==(c=n.indexOf(i,c))&&-1!==(u=n.indexOf(a,c+o))&&!(u<=c);){for(var h=c;h<u+s;++h)if(h<c+o||h>=u)r[h]=null,n=n.substr(0,h)+" "+n.substr(h+1);else if(null!==r[h]){var d=r[h].indexOf(e[0]);-1===d?r[h]+=e:l&&(r[h]=r[h].substr(0,d+1)+(1+parseInt(r[h][d+1]))+r[h].substr(d+2))}var g=c+o,p=n.substr(g,u-g).indexOf(i);c=-1!==p?p:u+s}return r}function x(t,e){var n=r(t,128);return e?a(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function B(t,e,n,r){var i=x(t,r),a=function(t,e,n){for(var r=e.textAlign||"start",i=e.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=t.length,l=0;l<s;++l)for(var c=t[l],u=0;u<2;++u)a[u]=0|Math.min(a[u],c[u]),o[u]=0|Math.max(o[u],c[u]);var h=0;switch(r){case"center":h=-.5*(a[0]+o[0]);break;case"right":case"end":h=-o[0];break;case"left":case"start":h=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var d=0;switch(i){case"hanging":case"top":d=-a[1];break;case"middle":d=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":d=-3*n;break;case"bottom":d=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var g=1/n;return"lineHeight"in e?g*=+e.lineHeight:"width"in e?g=e.width/(o[0]-a[0]):"height"in e&&(g=e.height/(o[1]-a[1])),t.map((function(t){return[g*(t[0]+h),g*(t[1]+d)]}))}(i.positions,e,n),c=i.edges,u="ccw"===e.orientation;if(o(a,c),e.polygons||e.polygon||e.polyline){for(var h=l(c,a),d=new Array(h.length),g=0;g<h.length;++g){for(var f=h[g],p=new Array(f.length),v=0;v<f.length;++v){for(var m=f[v],y=new Array(m.length),b=0;b<m.length;++b)y[b]=a[m[b]].slice();u&&y.reverse(),p[v]=y}d[g]=p}return d}return e.triangles||e.triangulate||e.triangle?{cells:s(a,c,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:c,positions:a}}function I(t,e,n){try{return B(t,e,n,!0)}catch(t){}try{return B(t,e,n,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(t){!function(){if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=v);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var r=new n,i=Object.freeze({});if(r.set(i,1),1===r.get(i))return void(t.exports=WeakMap);e=!0}}var a=Object.getOwnPropertyNames,o=Object.defineProperty,s=Object.isExtensible,l="weakmap:",c=l+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),h=new Uint8Array(u);crypto.getRandomValues(h),c=l+"rand:"+Array.prototype.map.call(h,(function(t){return(t%36).toString(36)})).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(t){return a(t).filter(m)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(t){return d(t).filter(m)}})}!function(){var t=Object.freeze;o(Object,"freeze",{value:function(e){return y(e),t(e)}});var e=Object.seal;o(Object,"seal",{value:function(t){return y(t),e(t)}});var n=Object.preventExtensions;o(Object,"preventExtensions",{value:function(t){return y(t),n(t)}})}();var g=!1,f=0,p=function(){this instanceof p||x();var t=[],e=[],n=f++;return Object.create(p.prototype,{get___:{value:b((function(r,i){var a,o=y(r);return o?n in o?o[n]:i:(a=t.indexOf(r))>=0?e[a]:i}))},has___:{value:b((function(e){var r=y(e);return r?n in r:t.indexOf(e)>=0}))},set___:{value:b((function(r,i){var a,o=y(r);return o?o[n]=i:(a=t.indexOf(r))>=0?e[a]=i:(a=t.length,e[a]=i,t[a]=r),this}))},delete___:{value:b((function(r){var i,a,o=y(r);return o?n in o&&delete o[n]:!((i=t.indexOf(r))<0)&&(a=t.length-1,t[i]=void 0,e[i]=e[a],t[i]=t[a],t.length=a,e.length=a,!0)}))}})};p.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function r(){this instanceof p||x();var t,r=new n,i=void 0,a=!1;return t=e?function(t,e){return r.set(t,e),r.has(t)||(i||(i=new p),i.set(t,e)),this}:function(t,e){if(a)try{r.set(t,e)}catch(n){i||(i=new p),i.set___(t,e)}else r.set(t,e);return this},Object.create(p.prototype,{get___:{value:b((function(t,e){return i?r.has(t)?r.get(t):i.get___(t,e):r.get(t,e)}))},has___:{value:b((function(t){return r.has(t)||!!i&&i.has___(t)}))},set___:{value:b(t)},delete___:{value:b((function(t){var e=!!r.delete(t);return i&&i.delete___(t)||e}))},permitHostObjects___:{value:b((function(t){if(t!==v)throw new Error("bogus call to permitHostObjects___");a=!0}))}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=p.prototype,t.exports=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=p)}function v(t){t.permitHostObjects___&&t.permitHostObjects___(v)}function m(t){return!(t.substr(0,8)==l&&"___"===t.substr(t.length-3))}function y(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[c];if(e&&e.key===t)return e;if(s(t)){e={key:t};try{return o(t,c,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function b(t){return t.prototype=null,Object.freeze(t)}function x(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},236:function(t,e,n){var r=n(8284);t.exports=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var n=e.valueOf(t);return n&&n.identity===t?n:r(e,t)}}},8284:function(t){t.exports=function(t,e){var n={identity:e},r=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?r.apply(this,arguments):n},writable:!0}),n}},606:function(t,e,n){var r=n(236);t.exports=function(){var t=r();return{get:function(e,n){var r=t(e);return r.hasOwnProperty("value")?r.value:n},set:function(e,n){return t(e).value=n,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}},3349:function(t){var e,n=function(){return function(t,e,n,r,i,a){var o=t[0],s=n[0],l=[0],c=s;r|=0;var u=0,h=s;for(u=0;u<o;++u){var d=e[r]-a,g=e[r+c]-a;d>=0!=g>=0&&i.push(l[0]+.5+.5*(d+g)/(d-g)),r+=h,++l[0]}}};t.exports=(e={funcName:{funcName:"zeroCrossings"}.funcName},function(t){var e={};return function(n,r,i){var a=n.dtype,o=n.order,s=[a,o.join()].join(),l=e[s];return l||(e[s]=l=t([a,o])),l(n.shape.slice(0),n.data,n.stride,0|n.offset,r,i)}}(n.bind(void 0,e)))},781:function(t,e,n){t.exports=function(t,e){var n=[];return e=+e||0,r(t.hi(t.shape[0]-1),n,e),n};var r=n(3349)},7790:function(){}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var r=n(1964);Qz.exports=r}();var Cz=Qz.exports,wz={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Uz=function(t){var e,n,r=[],i=1;if("string"==typeof t)if(t=t.toLowerCase(),wz[t])r=wz[t].slice(),n="rgb";else if("transparent"===t)i=0,n="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var a=t.slice(1);i=1,(l=a.length)<=4?(r=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===l&&(i=parseInt(a[3]+a[3],16)/255)):(r=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===l&&(i=parseInt(a[6]+a[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var o=e[1],s="rgb"===o;n=a=o.replace(/a$/,"");var l="cmyk"===a?4:"gray"===a?1:3;r=e[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(t,e){if(/%$/.test(t))return e===l?parseFloat(t)/100:"rgb"===a?255*parseFloat(t)/100:parseFloat(t);if("h"===a[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==Az[t])return Az[t]}return parseFloat(t)})),o===a&&r.push(1),i=s||void 0===r[l]?1:r[l],r=r.slice(0,l)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(r=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),n=t.match(/([a-z])/gi).join("").toLowerCase());else isNaN(t)?Array.isArray(t)||t.length?(r=[t[0],t[1],t[2]],n="rgb",i=4===t.length?t[3]:1):t instanceof Object&&(null!=t.r||null!=t.red||null!=t.R?(n="rgb",r=[t.r||t.red||t.R||0,t.g||t.green||t.G||0,t.b||t.blue||t.B||0]):(n="hsl",r=[t.h||t.hue||t.H||0,t.s||t.saturation||t.S||0,t.l||t.lightness||t.L||t.b||t.brightness]),i=t.a||t.alpha||t.opacity||1,null!=t.opacity&&(i/=100)):(n="rgb",r=[t>>>16,(65280&t)>>>8,255&t]);return{space:n,values:r,alpha:i}},Az={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var Sz=Uz;var Lz=function(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t};var kz=function(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw.apply(null,arguments));var n=Sz(t);if(!n.space)return[];var r=[0,0,0],i="h"===n.space[0]?[360,100,100]:[255,255,255];return(e=Array(3))[0]=Math.min(Math.max(n.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(n.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(n.values[2],r[2]),i[2]),"h"===n.space[0]&&(e=function(t){var e,n,r,i,a,o=t[0]/360,s=t[1]/100,l=t[2]/100,c=0;if(0===s)return a=255*l,[a,a,a];for(e=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];c<3;)(r=o+1/3*-(c-1))<0?r++:r>1&&r--,a=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[c++]=255*a;return i}(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e},Gz=Lz,_z=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},Rz=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var n=new(_z(e))(4),r="uint8"!==e&&"uint8_clamped"!==e;return t.length&&"string"!=typeof t||((t=kz(t))[0]/=255,t[1]/=255,t[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1))}(t)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:255,r&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(r?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:1):(n[0]=Gz(Math.floor(255*t[0]),0,255),n[1]=Gz(Math.floor(255*t[1]),0,255),n[2]=Gz(Math.floor(255*t[2]),0,255),n[3]=null==t[3]?255:Gz(Math.floor(255*t[3]),0,255)),n)};var Ez=Ac,Tz=vu,Mz=Rz,Nz=dy,Dz=Xu.defaultLine,Xz=Lc.isArrayOrTypedArray,Zz=Mz(Dz),Vz=1;function Hz(t,e){var n=t;return n[3]*=e,n}function Wz(t){if(Ez(t))return Zz;var e=Mz(t);return e.length?e:Zz}function Yz(t){return Ez(t)?t:Vz}var zz=function(t,e,n){var r=t.color;r&&r._inputArray&&(r=r._inputArray);var i,a,o,s,l,c=Xz(r),u=Xz(e),h=Nz.extractOpts(t),d=[];if(i=void 0!==h.colorscale?Nz.makeColorScaleFuncFromTrace(t):Wz,a=c?function(t,e){return void 0===t[e]?Zz:Mz(i(t[e]))}:Wz,o=u?function(t,e){return void 0===t[e]?Vz:Yz(t[e])}:Yz,c||u)for(var g=0;g<n;g++)s=a(r,g),l=o(e,g),d[g]=Hz(s,l);else d=Hz(Mz(r),e);return d},Oz=function(t){var e=Nz.extractOpts(t),n=e.colorscale;return e.reversescale&&(n=Nz.flipScale(e.colorscale)),n.map((function(t){var e=t[0],n=Tz(t[1]).toRgb();return{index:e,rgb:[n.r,n.g,n.b,n.a]}}))},Jz=Rz;var Pz=function(t){return t?Jz(t):[0,0,0,1]},jz=Cz.gl_mesh3d,Kz=Oz,qz=yf.isArrayOrTypedArray,$z=Pz,tO=dy.extractOpts,eO=function(t,e,n,r){r=r||t.length;for(var i=new Array(r),a=0;a<r;a++)i[a]=[t[a],e[a],n[a]];return i},nO=function(t,e){for(var n=e.length-1;n>0;n--){var r=Math.min(e[n],e[n-1]),i=Math.max(e[n],e[n-1]);if(i>r&&r<t&&t<=i)return{id:n,distRatio:(i-t)/(i-r)}}return{id:0,distRatio:0}};function rO(t,e,n){this.scene=t,this.uid=n,this.mesh=e,this.name="",this.data=null,this.showContour=!1}var iO=rO.prototype;iO.handlePick=function(t){if(t.object===this.mesh){var e=t.data.index,n=this.data._meshX[e],r=this.data._meshY[e],i=this.data._meshZ[e],a=this.data._Ys.length,o=this.data._Zs.length,s=nO(n,this.data._Xs).id,l=nO(r,this.data._Ys).id,c=nO(i,this.data._Zs).id,u=t.index=c+o*l+o*a*s;t.traceCoordinate=[this.data._meshX[u],this.data._meshY[u],this.data._meshZ[u],this.data._value[u]];var h=this.data.hovertext||this.data.text;return qz(h)&&void 0!==h[u]?t.textLabel=h[u]:h&&(t.textLabel=h),!0}},iO.update=function(t){var e=this.scene,n=e.fullSceneLayout;function r(t,e,n,r){return e.map((function(e){return t.d2l(e,0,r)*n}))}this.data=oO(t);var i={positions:eO(r(n.xaxis,t._meshX,e.dataScale[0],t.xcalendar),r(n.yaxis,t._meshY,e.dataScale[1],t.ycalendar),r(n.zaxis,t._meshZ,e.dataScale[2],t.zcalendar)),cells:eO(t._meshI,t._meshJ,t._meshK),lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:$z(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading},a=tO(t);i.vertexIntensity=t._meshIntensity,i.vertexIntensityBounds=[a.min,a.max],i.colormap=Kz(t),this.mesh.update(i)},iO.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var aO=["xyz","xzy","yxz","yzx","zxy","zyx"];function oO(t){t._meshI=[],t._meshJ=[],t._meshK=[];var e,n,r,i,a,o,s,l=t.surface.show,c=t.spaceframe.show,u=t.surface.fill,h=t.spaceframe.fill,d=!1,g=!1,f=0,p=t._Xs,v=t._Ys,m=t._Zs,y=p.length,b=v.length,x=m.length,B=aO.indexOf(t._gridFill.replace(/-/g,"").replace(/\+/g,"")),I=function(t,e,n){switch(B){case 5:return n+x*e+x*b*t;case 4:return n+x*t+x*y*e;case 3:return e+b*n+b*x*t;case 2:return e+b*t+b*y*n;case 1:return t+y*n+y*x*e;default:return t+y*e+y*b*n}},F=t._minValues,Q=t._maxValues,C=t._vMin,w=t._vMax;function U(t,e,s){for(var l=o.length,c=n;c<l;c++)if(t===r[c]&&e===i[c]&&s===a[c])return c;return-1}function A(){n=e}function S(){r=[],i=[],a=[],o=[],e=0,A()}function L(t,n,s,l){return r.push(t),i.push(n),a.push(s),o.push(l),++e-1}function k(e,n,r){return t._meshI.push(e),t._meshJ.push(n),t._meshK.push(r),++f-1}function G(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=t[i]*(1-n)+n*e[i];return r}function _(t){s=t}function R(t,e){return"all"===t||null===t||t.indexOf(e)>-1}function E(t,e){return null===t?e:t}function T(t,e,n){A();var r=[e],i=[n];if(s>=1)r=[e],i=[n];else if(s>0){var a=function(t,e){var n=t[0],r=t[1],i=t[2],a=function(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=(t[i]+e[i]+n[i])/3;return r}(n,r,i),o=Math.sqrt(1-s),l=G(a,n,o),c=G(a,r,o),u=G(a,i,o),h=e[0],d=e[1],g=e[2];return{xyzv:[[n,r,c],[c,l,n],[r,i,u],[u,c,r],[i,n,l],[l,u,i]],abc:[[h,d,-1],[-1,-1,h],[d,g,-1],[-1,-1,d],[g,h,-1],[-1,-1,g]]}}(e,n);r=a.xyzv,i=a.abc}for(var o=0;o<r.length;o++){e=r[o],n=i[o];for(var l=[],c=0;c<3;c++){var u=e[c][0],h=e[c][1],d=e[c][2],g=e[c][3],f=n[c]>-1?n[c]:U(u,h,d);l[c]=f>-1?f:L(u,h,d,E(t,g))}k(l[0],l[1],l[2])}}function M(t,e,n,r){var i=t[3];i<n&&(i=n),i>r&&(i=r);for(var a=(t[3]-i)/(t[3]-e[3]+1e-9),o=[],s=0;s<4;s++)o[s]=(1-a)*t[s]+a*e[s];return o}function N(t,e,n){return t>=e&&t<=n}function D(t){var e=.001*(w-C);return t>=C-e&&t<=w+e}function X(e){for(var n=[],r=0;r<4;r++){var i=e[r];n.push([t._x[i],t._y[i],t._z[i],t._value[i]])}return n}var Z=3;function V(t,e,n,r,i,a){a||(a=1),n=[-1,-1,-1];var o=!1,s=[N(e[0][3],r,i),N(e[1][3],r,i),N(e[2][3],r,i)];if(!s[0]&&!s[1]&&!s[2])return!1;var l=function(t,e,n){return D(e[0][3])&&D(e[1][3])&&D(e[2][3])?(T(t,e,n),!0):a<Z&&V(t,e,n,C,w,++a)};if(s[0]&&s[1]&&s[2])return l(t,e,n)||o;var c=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach((function(a){if(s[a[0]]&&s[a[1]]&&!s[a[2]]){var u=e[a[0]],h=e[a[1]],d=e[a[2]],g=M(d,u,r,i),f=M(d,h,r,i);o=l(t,[f,g,u],[-1,-1,n[a[0]]])||o,o=l(t,[u,h,f],[n[a[0]],n[a[1]],-1])||o,c=!0}})),c||[[0,1,2],[1,2,0],[2,0,1]].forEach((function(a){if(s[a[0]]&&!s[a[1]]&&!s[a[2]]){var u=e[a[0]],h=e[a[1]],d=e[a[2]],g=M(h,u,r,i),f=M(d,u,r,i);o=l(t,[f,g,u],[-1,-1,n[a[0]]])||o,c=!0}})),o}function H(t,e,n,r){var i=!1,a=X(e),o=[N(a[0][3],n,r),N(a[1][3],n,r),N(a[2][3],n,r),N(a[3][3],n,r)];if(!(o[0]||o[1]||o[2]||o[3]))return i;if(o[0]&&o[1]&&o[2]&&o[3])return g&&(i=function(t,e,n){var r=function(r,i,a){T(t,[e[r],e[i],e[a]],[n[r],n[i],n[a]])};r(0,1,2),r(3,0,1),r(2,3,0),r(1,2,3)}(t,a,e)||i),i;var s=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],h=a[l[2]],d=a[l[3]];if(g)i=T(t,[c,u,h],[e[l[0]],e[l[1]],e[l[2]]])||i;else{var f=M(d,c,n,r),p=M(d,u,n,r),v=M(d,h,n,r);i=T(null,[f,p,v],[-1,-1,-1])||i}s=!0}})),s?i:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&!o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],h=a[l[2]],d=a[l[3]],f=M(h,c,n,r),p=M(h,u,n,r),v=M(d,u,n,r),m=M(d,c,n,r);g?(i=T(t,[c,m,f],[e[l[0]],-1,-1])||i,i=T(t,[u,p,v],[e[l[1]],-1,-1])||i):i=function(t,e,n){var r=function(r,i,a){T(t,[e[r],e[i],e[a]],[n[r],n[i],n[a]])};r(0,1,2),r(2,3,0)}(null,[f,p,v,m],[-1,-1,-1,-1])||i,s=!0}})),s||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach((function(l){if(o[l[0]]&&!o[l[1]]&&!o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],h=a[l[2]],d=a[l[3]],f=M(u,c,n,r),p=M(h,c,n,r),v=M(d,c,n,r);g?(i=T(t,[c,f,p],[e[l[0]],-1,-1])||i,i=T(t,[c,p,v],[e[l[0]],-1,-1])||i,i=T(t,[c,v,f],[e[l[0]],-1,-1])||i):i=T(null,[f,p,v],[-1,-1,-1])||i,s=!0}})),i)}function W(t,e,n,r,i,a,o,s,l,c,u){var h=!1;return d&&(R(t,"A")&&(h=H(null,[e,n,r,a],c,u)||h),R(t,"B")&&(h=H(null,[n,r,i,l],c,u)||h),R(t,"C")&&(h=H(null,[n,a,o,l],c,u)||h),R(t,"D")&&(h=H(null,[r,a,s,l],c,u)||h),R(t,"E")&&(h=H(null,[n,r,a,l],c,u)||h)),g&&(h=H(t,[n,r,a,l],c,u)||h),h}function Y(t,e,n,r,i,a,o,s){return[!0===s[0]||V(t,X([e,n,r]),[e,n,r],a,o),!0===s[1]||V(t,X([r,i,e]),[r,i,e],a,o)]}function z(t,e,n,r,i,a,o,s,l){return s?Y(t,e,n,i,r,a,o,l):Y(t,n,i,r,e,a,o,l)}function O(t,e,n,r,i,a,o){var s,l,c,u,h=!1,d=function(){h=V(t,[s,l,c],[-1,-1,-1],i,a)||h,h=V(t,[c,u,s],[-1,-1,-1],i,a)||h},g=o[0],f=o[1],p=o[2];return g&&(s=G(X([I(e,n-0,r-0)])[0],X([I(e-1,n-0,r-0)])[0],g),l=G(X([I(e,n-0,r-1)])[0],X([I(e-1,n-0,r-1)])[0],g),c=G(X([I(e,n-1,r-1)])[0],X([I(e-1,n-1,r-1)])[0],g),u=G(X([I(e,n-1,r-0)])[0],X([I(e-1,n-1,r-0)])[0],g),d()),f&&(s=G(X([I(e-0,n,r-0)])[0],X([I(e-0,n-1,r-0)])[0],f),l=G(X([I(e-0,n,r-1)])[0],X([I(e-0,n-1,r-1)])[0],f),c=G(X([I(e-1,n,r-1)])[0],X([I(e-1,n-1,r-1)])[0],f),u=G(X([I(e-1,n,r-0)])[0],X([I(e-1,n-1,r-0)])[0],f),d()),p&&(s=G(X([I(e-0,n-0,r)])[0],X([I(e-0,n-0,r-1)])[0],p),l=G(X([I(e-0,n-1,r)])[0],X([I(e-0,n-1,r-1)])[0],p),c=G(X([I(e-1,n-1,r)])[0],X([I(e-1,n-1,r-1)])[0],p),u=G(X([I(e-1,n-0,r)])[0],X([I(e-1,n-0,r-1)])[0],p),d()),h}function J(t,e,n,r,i,a,o,s,l,c,u,h){var g=t;return h?(d&&"even"===t&&(g=null),W(g,e,n,r,i,a,o,s,l,c,u)):(d&&"odd"===t&&(g=null),W(g,l,s,o,a,i,r,n,e,c,u))}function P(t,e,n,r,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],c=1;c<x;c++)for(var u=1;u<b;u++)a.push(z(t,I(l,u-1,c-1),I(l,u-1,c),I(l,u,c-1),I(l,u,c),n,r,(l+u+c)%2,i&&i[o]?i[o]:[])),o++;return a}function j(t,e,n,r,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],c=1;c<y;c++)for(var u=1;u<x;u++)a.push(z(t,I(c-1,l,u-1),I(c,l,u-1),I(c-1,l,u),I(c,l,u),n,r,(c+l+u)%2,i&&i[o]?i[o]:[])),o++;return a}function K(t,e,n,r,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],c=1;c<b;c++)for(var u=1;u<y;u++)a.push(z(t,I(u-1,c-1,l),I(u-1,c,l),I(u,c-1,l),I(u,c,l),n,r,(u+c+l)%2,i&&i[o]?i[o]:[])),o++;return a}function q(t,e,n){for(var r=1;r<x;r++)for(var i=1;i<b;i++)for(var a=1;a<y;a++)J(t,I(a-1,i-1,r-1),I(a-1,i-1,r),I(a-1,i,r-1),I(a-1,i,r),I(a,i-1,r-1),I(a,i-1,r),I(a,i,r-1),I(a,i,r),e,n,(a+i+r)%2)}function $(t,e,n){d=!0,q(t,e,n),d=!1}function tt(t,e,n,r,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var c=e[l],u=1;u<x;u++)for(var h=1;h<b;h++)o.push(O(t,c,h,u,n,r,i[l],a&&a[s]&&a[s])),s++;return o}function et(t,e,n,r,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var c=e[l],u=1;u<y;u++)for(var h=1;h<x;h++)o.push(O(t,u,c,h,n,r,i[l],a&&a[s]&&a[s])),s++;return o}function nt(t,e,n,r,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var c=e[l],u=1;u<b;u++)for(var h=1;h<y;h++)o.push(O(t,h,u,c,n,r,i[l],a&&a[s]&&a[s])),s++;return o}function rt(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n}return function(){S(),function(){for(var e=0;e<y;e++)for(var n=0;n<b;n++)for(var r=0;r<x;r++){var i=I(e,n,r);L(t._x[i],t._y[i],t._z[i],t._value[i])}}();var e=null;if(c&&h&&(_(h),function(t,e,n){g=!0,q(t,e,n),g=!1}(e,C,w)),l&&u){_(u);for(var n=t.surface.pattern,s=t.surface.count,d=0;d<s;d++){var B=1===s?.5:d/(s-1),U=(1-B)*C+B*w,A=Math.abs(U-F)>Math.abs(U-Q)?[F,U]:[U,Q];$(n,A[0],A[1])}}var k=[[Math.min(C,Q),Math.max(C,Q)],[Math.min(F,w),Math.max(F,w)]];["x","y","z"].forEach((function(n){for(var r=[],i=0;i<k.length;i++){var a=0,o=k[i][0],s=k[i][1],l=t.slices[n];if(l.show&&l.fill){_(l.fill);var c=[],u=[],h=[];if(l.locations.length)for(var d=0;d<l.locations.length;d++){var g=nO(l.locations[d],"x"===n?p:"y"===n?v:m);0===g.distRatio?c.push(g.id):g.id>0&&(u.push(g.id),"x"===n?h.push([g.distRatio,0,0]):"y"===n?h.push([0,g.distRatio,0]):h.push([0,0,g.distRatio]))}else c=rt(1,"x"===n?y-1:"y"===n?b-1:x-1);u.length>0&&(r[a]="x"===n?tt(e,u,o,s,h,r[a]):"y"===n?et(e,u,o,s,h,r[a]):nt(e,u,o,s,h,r[a]),a++),c.length>0&&(r[a]="x"===n?P(e,c,o,s,r[a]):"y"===n?j(e,c,o,s,r[a]):K(e,c,o,s,r[a]),a++)}var f=t.caps[n];f.show&&f.fill&&(_(f.fill),r[a]="x"===n?P(e,[0,y-1],o,s,r[a]):"y"===n?j(e,[0,b-1],o,s,r[a]):K(e,[0,x-1],o,s,r[a]),a++)}})),0===f&&S(),t._meshX=r,t._meshY=i,t._meshZ=a,t._meshIntensity=o,t._Xs=p,t._Ys=v,t._Zs=m}(),t}var sO={findNearestOnAxis:nO,generateIsoMeshes:oO,createIsosurfaceTrace:function(t,e){var n=t.glplot.gl,r=jz({gl:n}),i=new rO(t,r,e.uid);return r._trace=i,i.update(e),t.glplot.add(r),i}},lO={},cO=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(n.width=e.width);"number"==typeof e.height&&(n.height=e.height);var r,i=e;try{var a=[t];0===t.indexOf("webgl")&&a.push("experimental-"+t);for(var o=0;o<a.length;o++)if(r=n.getContext(a[o],i))return r}catch(t){r=null}return r||null};var uO,hO,dO,gO,fO,pO,vO,mO,yO=cO;var bO,xO,BO=Cz.gl_plot3d,IO=BO.createCamera,FO=BO.createScene,QO=function(t){return yO("webgl",t)},CO=hh,wO=yf,UO=wO.preserveDrawingBuffer(),AO=iI,SO=uC,LO=Pz,kO=function(){if(hO)return uO;hO=1;var t=Pu,e=function(){};return uO=function(n){for(var r in n)"function"==typeof n[r]&&(n[r]=e);n.destroy=function(){n.container.parentNode.removeChild(n.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=t.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=t.lightLine,i.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",i.appendChild(a),n.container.appendChild(i),n.container.style.background="#FFFFFF",n.container.onclick=function(){window.open("https://get.webgl.org")},!1},uO}(),GO=_M,_O=function(){if(gO)return dO;gO=1;var t=Pz,e=yf,n=["xaxis","yaxis","zaxis"];function r(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}return r.prototype.merge=function(r,i){for(var a=this,o=0;o<3;++o){var s=i[n[o]];s.visible?(a.labels[o]=r._meta?e.templateString(s.title.text,r._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(a.labelColor[o]=t(s.title.font.color)),s.title.font.family&&(a.labelFont[o]=s.title.font.family),s.title.font.size&&(a.labelSize[o]=s.title.font.size),s.title.font.weight&&(a.labelFontWeight[o]=s.title.font.weight),s.title.font.style&&(a.labelFontStyle[o]=s.title.font.style),s.title.font.variant&&(a.labelFontVariant[o]=s.title.font.variant)),"showline"in s&&(a.lineEnable[o]=s.showline),"linecolor"in s&&(a.lineColor[o]=t(s.linecolor)),"linewidth"in s&&(a.lineWidth[o]=s.linewidth),"showgrid"in s&&(a.gridEnable[o]=s.showgrid),"gridcolor"in s&&(a.gridColor[o]=t(s.gridcolor)),"gridwidth"in s&&(a.gridWidth[o]=s.gridwidth),"log"===s.type?a.zeroEnable[o]=!1:"zeroline"in s&&(a.zeroEnable[o]=s.zeroline),"zerolinecolor"in s&&(a.zeroLineColor[o]=t(s.zerolinecolor)),"zerolinewidth"in s&&(a.zeroLineWidth[o]=s.zerolinewidth),"ticks"in s&&s.ticks?a.lineTickEnable[o]=!0:a.lineTickEnable[o]=!1,"ticklen"in s&&(a.lineTickLength[o]=a._defaultLineTickLength[o]=s.ticklen),"tickcolor"in s&&(a.lineTickColor[o]=t(s.tickcolor)),"tickwidth"in s&&(a.lineTickWidth[o]=s.tickwidth),"tickangle"in s&&(a.tickAngle[o]="auto"===s.tickangle?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(a.tickEnable[o]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(a.tickColor[o]=t(s.tickfont.color)),s.tickfont.family&&(a.tickFont[o]=s.tickfont.family),s.tickfont.size&&(a.tickSize[o]=s.tickfont.size),s.tickfont.weight&&(a.tickFontWeight[o]=s.tickfont.weight),s.tickfont.style&&(a.tickFontStyle[o]=s.tickfont.style),s.tickfont.variant&&(a.tickFontVariant[o]=s.tickfont.variant)),"mirror"in s?-1!==["ticks","all","allticks"].indexOf(s.mirror)?(a.lineTickMirror[o]=!0,a.lineMirror[o]=!0):!0===s.mirror?(a.lineTickMirror[o]=!1,a.lineMirror[o]=!0):(a.lineTickMirror[o]=!1,a.lineMirror[o]=!1):a.lineMirror[o]=!1,"showbackground"in s&&!1!==s.showbackground?(a.backgroundEnable[o]=!0,a.backgroundColor[o]=t(s.backgroundcolor)):a.backgroundEnable[o]=!1):(a.tickEnable[o]=!1,a.labelEnable[o]=!1,a.lineEnable[o]=!1,a.lineTickEnable[o]=!1,a.gridEnable[o]=!1,a.zeroEnable[o]=!1,a.backgroundEnable[o]=!1)}},dO=function(t,e){var n=new r;return n.merge(t,e),n}}(),RO=function(){if(pO)return fO;pO=1;var t=Pz,e=["xaxis","yaxis","zaxis"];function n(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}return n.prototype.merge=function(n){for(var r=0;r<3;++r){var i=n[e[r]];i.visible?(this.enabled[r]=i.showspikes,this.colors[r]=t(i.spikecolor),this.drawSides[r]=i.spikesides,this.lineWidth[r]=i.spikethickness):(this.enabled[r]=!1,this.drawSides[r]=!1)}},fO=function(t){var e=new n;return e.merge(t),e}}(),EO=function(){if(mO)return vO;mO=1,vO=function(r){for(var i=r.axesOptions,a=r.glplot.axesPixels,o=r.fullSceneLayout,s=[[],[],[]],l=0;l<3;++l){var c=o[n[l]];if(c._length=(a[l].hi-a[l].lo)*a[l].pixelsPerDataUnit/r.dataScale[l],Math.abs(c._length)===1/0||isNaN(c._length))s[l]=[];else{c._input_range=c.range.slice(),c.range[0]=a[l].lo/r.dataScale[l],c.range[1]=a[l].hi/r.dataScale[l],c._m=1/(r.dataScale[l]*a[l].pixelsPerDataUnit),c.range[0]===c.range[1]&&(c.range[0]-=1,c.range[1]+=1);var u=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var h=c.nticks||e.constrain(c._length/40,4,9);t.autoTicks(c,Math.abs(c.range[1]-c.range[0])/h)}for(var d=t.calcTicks(c,{msUTC:!0}),g=0;g<d.length;++g)d[g].x=d[g].x*r.dataScale[l],"date"===c.type&&(d[g].text=d[g].text.replace(/\<br\>/g," "));s[l]=d,c.tickmode=u}}i.ticks=s;for(l=0;l<3;++l){r.glplot.bounds[0][l],r.glplot.bounds[1][l];for(g=0;g<2;++g)i.bounds[g][l]=r.glplot.bounds[g][l]}r.contourLevels=function(t){for(var e=new Array(3),n=0;n<3;++n){for(var r=t[n],i=new Array(r.length),a=0;a<r.length;++a)i[a]=r[a].x;e[n]=i}return e}(s)};var t=iI,e=yf,n=["xaxis","yaxis","zaxis"];return vO}(),TO=Ix().applyAutorangeOptions,MO=!1;function NO(t,e){var n=document.createElement("div"),r=t.container;this.graphDiv=t.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",n.appendChild(i),this.svgContainer=i,n.id=t.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=e,this.id=t.id||"scene",this.fullSceneLayout=e[this.id],this.plotArgs=[[],{},{}],this.axesOptions=_O(e,e[this.id]),this.spikeOptions=RO(e[this.id]),this.container=n,this.staticMode=!!t.staticPlot,this.pixelRatio=this.pixelRatio||t.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=CO.getComponentMethod("annotations3d","convert"),this.drawAnnotations=CO.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var DO=NO.prototype;DO.prepareOptions=function(){var t=this,e={canvas:t.canvas,gl:t.gl,glOptions:{preserveDrawingBuffer:UO,premultipliedAlpha:!0,antialias:!0},container:t.container,axes:t.axesOptions,spikes:t.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:t.camera,pixelRatio:t.pixelRatio};if(t.staticMode){if(!(xO||(bO=document.createElement("canvas"),xO=QO({canvas:bO,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");e.gl=xO,e.canvas=bO}return e};var XO=!0;DO.tryCreatePlot=function(){var t=this,e=t.prepareOptions(),n=!0;try{t.glplot=FO(e)}catch(r){if(t.staticMode||!XO||UO)n=!1;else{wO.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{UO=e.glOptions.preserveDrawingBuffer=!0,t.glplot=FO(e)}catch(t){UO=e.glOptions.preserveDrawingBuffer=!1,n=!1}}}return XO=!1,n},DO.initializeGLCamera=function(){var t=this,e=t.fullSceneLayout.camera,n="orthographic"===e.projection.type;t.camera=IO(t.container,{center:[e.center.x,e.center.y,e.center.z],eye:[e.eye.x,e.eye.y,e.eye.z],up:[e.up.x,e.up.y,e.up.z],_ortho:n,zoomMin:.01,zoomMax:100,mode:"orbit"})},DO.initializeGLPlot=function(){var t=this;if(t.initializeGLCamera(),!t.tryCreatePlot())return kO(t);t.traces={},t.make4thDimension();var e=t.graphDiv,n=e.layout,r=function(){var e={};return t.isCameraChanged(n)&&(e[t.id+".camera"]=t.getCamera()),t.isAspectChanged(n)&&(e[t.id+".aspectratio"]=t.glplot.getAspectratio(),"manual"!==n[t.id].aspectmode&&(t.fullSceneLayout.aspectmode=n[t.id].aspectmode=e[t.id+".aspectmode"]="manual")),e},i=function(t){if(!1!==t.fullSceneLayout.dragmode){var e=r();t.saveLayout(n),t.graphDiv.emit("plotly_relayout",e)}};return t.glplot.canvas&&(t.glplot.canvas.addEventListener("mouseup",(function(){i(t)})),t.glplot.canvas.addEventListener("touchstart",(function(){MO=!0})),t.glplot.canvas.addEventListener("wheel",(function(n){if(e._context._scrollZoom.gl3d){if(t.camera._ortho){var r=n.deltaX>n.deltaY?1.1:1/1.1,a=t.glplot.getAspectratio();t.glplot.setAspectratio({x:r*a.x,y:r*a.y,z:r*a.z})}i(t)}}),!1),t.glplot.canvas.addEventListener("mousemove",(function(){if(!1!==t.fullSceneLayout.dragmode&&0!==t.camera.mouseListener.buttons){var e=r();t.graphDiv.emit("plotly_relayouting",e)}})),t.staticMode||t.glplot.canvas.addEventListener("webglcontextlost",(function(n){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:n,layer:t.id})}),!1)),t.glplot.oncontextloss=function(){t.recoverContext()},t.glplot.onrender=function(){t.render()},!0},DO.render=function(){var t,e=this,n=e.graphDiv,r=e.svgContainer,i=e.container.getBoundingClientRect();n._fullLayout._calcInverseTransform(n);var a=n._fullLayout._invScaleX,o=n._fullLayout._invScaleY,s=i.width*a,l=i.height*o;r.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),r.setAttributeNS(null,"width",s),r.setAttributeNS(null,"height",l),EO(e),e.glplot.axes.update(e.axesOptions);for(var c=Object.keys(e.traces),u=null,h=e.glplot.selection,d=0;d<c.length;++d)"skip"!==(t=e.traces[c[d]]).data.hoverinfo&&t.handlePick(h)&&(u=t),t.setContourLevels&&t.setContourLevels();function g(t,n,r){var i=e.fullSceneLayout[t+"axis"];return"log"!==i.type&&(n=i.d2l(n)),AO.hoverLabelText(i,n,r)}if(null!==u){var f=GO(e.glplot.cameraParams,h.dataCoordinate);t=u.data;var p,v=n._fullData[t.index],m=h.index,y={xLabel:g("x",h.traceCoordinate[0],t.xhoverformat),yLabel:g("y",h.traceCoordinate[1],t.yhoverformat),zLabel:g("z",h.traceCoordinate[2],t.zhoverformat)},b=SO.castHoverinfo(v,e.fullLayout,m),x=(b||"").split("+"),B=b&&"all"===b;v.hovertemplate||B||(-1===x.indexOf("x")&&(y.xLabel=void 0),-1===x.indexOf("y")&&(y.yLabel=void 0),-1===x.indexOf("z")&&(y.zLabel=void 0),-1===x.indexOf("text")&&(h.textLabel=void 0),-1===x.indexOf("name")&&(u.name=void 0));var I=[];"cone"===t.type||"streamtube"===t.type?(y.uLabel=g("x",h.traceCoordinate[3],t.uhoverformat),(B||-1!==x.indexOf("u"))&&I.push("u: "+y.uLabel),y.vLabel=g("y",h.traceCoordinate[4],t.vhoverformat),(B||-1!==x.indexOf("v"))&&I.push("v: "+y.vLabel),y.wLabel=g("z",h.traceCoordinate[5],t.whoverformat),(B||-1!==x.indexOf("w"))&&I.push("w: "+y.wLabel),y.normLabel=h.traceCoordinate[6].toPrecision(3),(B||-1!==x.indexOf("norm"))&&I.push("norm: "+y.normLabel),"streamtube"===t.type&&(y.divergenceLabel=h.traceCoordinate[7].toPrecision(3),(B||-1!==x.indexOf("divergence"))&&I.push("divergence: "+y.divergenceLabel)),h.textLabel&&I.push(h.textLabel),p=I.join("<br>")):"isosurface"===t.type||"volume"===t.type?(y.valueLabel=AO.hoverLabelText(e._mockAxis,e._mockAxis.d2l(h.traceCoordinate[3]),t.valuehoverformat),I.push("value: "+y.valueLabel),h.textLabel&&I.push(h.textLabel),p=I.join("<br>")):p=h.textLabel;var F={x:h.traceCoordinate[0],y:h.traceCoordinate[1],z:h.traceCoordinate[2],data:v._input,fullData:v,curveNumber:v.index,pointNumber:m};SO.appendArrayPointValue(F,v,m),t._module.eventData&&(F=v._module.eventData(F,h,v,{},m));var Q={points:[F]};if(e.fullSceneLayout.hovermode){var C=[];SO.loneHover({trace:v,x:(.5+.5*f[0]/f[3])*s,y:(.5-.5*f[1]/f[3])*l,xLabel:y.xLabel,yLabel:y.yLabel,zLabel:y.zLabel,text:p,name:u.name,color:SO.castHoverOption(v,m,"bgcolor")||u.color,borderColor:SO.castHoverOption(v,m,"bordercolor"),fontFamily:SO.castHoverOption(v,m,"font.family"),fontSize:SO.castHoverOption(v,m,"font.size"),fontColor:SO.castHoverOption(v,m,"font.color"),nameLength:SO.castHoverOption(v,m,"namelength"),textAlign:SO.castHoverOption(v,m,"align"),hovertemplate:wO.castOption(v,m,"hovertemplate"),hovertemplateLabels:wO.extendFlat({},F,y),eventData:[F]},{container:r,gd:n,inOut_bbox:C}),F.bbox=C[0]}h.distance<5&&(h.buttons||MO)?n.emit("plotly_click",Q):n.emit("plotly_hover",Q),this.oldEventData=Q}else SO.loneUnhover(r),this.oldEventData&&n.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;e.drawAnnotations(e)},DO.recoverContext=function(){var t=this;t.glplot.dispose();var e=function(){t.glplot.gl.isContextLost()?requestAnimationFrame(e):t.initializeGLPlot()?t.plot.apply(t,t.plotArgs):wO.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(e)};var ZO=["xaxis","yaxis","zaxis"];function VO(t,e,n){for(var r=t.fullSceneLayout,i=0;i<3;i++){var a=ZO[i],o=a.charAt(0),s=r[a],l=e[o],c=e[o+"calendar"],u=e["_"+o+"length"];if(wO.isArrayOrTypedArray(l))for(var h,d=0;d<(u||l.length);d++)if(wO.isArrayOrTypedArray(l[d]))for(var g=0;g<l[d].length;++g)h=s.d2l(l[d][g],0,c),!isNaN(h)&&isFinite(h)&&(n[0][i]=Math.min(n[0][i],h),n[1][i]=Math.max(n[1][i],h));else h=s.d2l(l[d],0,c),!isNaN(h)&&isFinite(h)&&(n[0][i]=Math.min(n[0][i],h),n[1][i]=Math.max(n[1][i],h));else n[0][i]=Math.min(n[0][i],0),n[1][i]=Math.max(n[1][i],u-1)}}DO.plot=function(t,e,n){var r=this;if(r.plotArgs=[t,e,n],!r.glplot.contextLost){var i,a,o,s,l,c,u=e[r.id],h=n[r.id];r.fullLayout=e,r.fullSceneLayout=u,r.axesOptions.merge(e,u),r.spikeOptions.merge(u),r.setViewport(u),r.updateFx(u.dragmode,u.hovermode),r.camera.enableWheel=r.graphDiv._context._scrollZoom.gl3d,r.glplot.setClearColor(LO(u.bgcolor)),r.setConvert(l),t?Array.isArray(t)||(t=[t]):t=[];var d=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<t.length;++o)!0===(i=t[o]).visible&&0!==i._length&&VO(this,i,d);!function(t,e){for(var n=t.fullSceneLayout,r=n.annotations||[],i=0;i<3;i++)for(var a=ZO[i],o=a.charAt(0),s=n[a],l=0;l<r.length;l++){var c=r[l];if(c.visible){var u=s.r2l(c[o]);!isNaN(u)&&isFinite(u)&&(e[0][i]=Math.min(e[0][i],u),e[1][i]=Math.max(e[1][i],u))}}}(this,d);var g=[1,1,1];for(s=0;s<3;++s)d[1][s]===d[0][s]?g[s]=1:g[s]=1/(d[1][s]-d[0][s]);for(r.dataScale=g,r.convertAnnotations(this),o=0;o<t.length;++o)!0===(i=t[o]).visible&&0!==i._length&&((a=r.traces[i.uid])?a.data.type===i.type?a.update(i):(a.dispose(),a=i._module.plot(this,i),r.traces[i.uid]=a):(a=i._module.plot(this,i),r.traces[i.uid]=a),a.name=i.name);var f=Object.keys(r.traces);t:for(o=0;o<f.length;++o){for(s=0;s<t.length;++s)if(t[s].uid===f[o]&&!0===t[s].visible&&0!==t[s]._length)continue t;(a=r.traces[f[o]]).dispose(),delete r.traces[f[o]]}r.glplot.objects.sort((function(t,e){return t._trace.data.index-e._trace.data.index}));var p,v=[[0,0,0],[0,0,0]],m={};for(o=0;o<3;++o){var y;if((c=(l=u[ZO[o]]).type)in m?(m[c].acc*=g[o],m[c].count+=1):m[c]={acc:g[o],count:1},l.autorange){v[0][o]=1/0,v[1][o]=-1/0;var b=r.glplot.objects,x=r.fullSceneLayout.annotations||[],B=l._name.charAt(0);for(s=0;s<b.length;s++){var I=b[s],F=I.bounds,Q=I._trace.data._pad||0;"ErrorBars"===I.constructor.name&&l._lowerLogErrorBound?v[0][o]=Math.min(v[0][o],l._lowerLogErrorBound):v[0][o]=Math.min(v[0][o],F[0][o]/g[o]-Q),v[1][o]=Math.max(v[1][o],F[1][o]/g[o]+Q)}for(s=0;s<x.length;s++){var C=x[s];if(C.visible){var w=l.r2l(C[B]);v[0][o]=Math.min(v[0][o],w),v[1][o]=Math.max(v[1][o],w)}}if("rangemode"in l&&"tozero"===l.rangemode&&(v[0][o]=Math.min(v[0][o],0),v[1][o]=Math.max(v[1][o],0)),v[0][o]>v[1][o])v[0][o]=-1,v[1][o]=1;else{var U=v[1][o]-v[0][o];v[0][o]-=U/32,v[1][o]+=U/32}if(y=[v[0][o],v[1][o]],y=TO(y,l),v[0][o]=y[0],v[1][o]=y[1],l.isReversed()){var A=v[0][o];v[0][o]=v[1][o],v[1][o]=A}}else y=l.range,v[0][o]=l.r2l(y[0]),v[1][o]=l.r2l(y[1]);v[0][o]===v[1][o]&&(v[0][o]-=1,v[1][o]+=1),l.range=[v[0][o],v[1][o]],l.limitRange(),r.glplot.setBounds(o,{min:l.range[0]*g[o],max:l.range[1]*g[o]})}var S=u.aspectmode;if("cube"===S)p=[1,1,1];else if("manual"===S){var L=u.aspectratio;p=[L.x,L.y,L.z]}else{if("auto"!==S&&"data"!==S)throw new Error("scene.js aspectRatio was not one of the enumerated types");var k=[1,1,1];for(o=0;o<3;++o){var G=m[c=(l=u[ZO[o]]).type];k[o]=Math.pow(G.acc,1/G.count)/g[o]}p="data"===S||Math.max.apply(null,k)/Math.min.apply(null,k)<=4?k:[1,1,1]}u.aspectratio.x=h.aspectratio.x=p[0],u.aspectratio.y=h.aspectratio.y=p[1],u.aspectratio.z=h.aspectratio.z=p[2],r.glplot.setAspectratio(u.aspectratio),r.viewInitial.aspectratio||(r.viewInitial.aspectratio={x:u.aspectratio.x,y:u.aspectratio.y,z:u.aspectratio.z}),r.viewInitial.aspectmode||(r.viewInitial.aspectmode=u.aspectmode);var _=u.domain||null,R=e._size||null;if(_&&R){var E=r.container.style;E.position="absolute",E.left=R.l+_.x[0]*R.w+"px",E.top=R.t+(1-_.y[1])*R.h+"px",E.width=R.w*(_.x[1]-_.x[0])+"px",E.height=R.h*(_.y[1]-_.y[0])+"px"}r.glplot.redraw()}},DO.destroy=function(){var t=this;t.glplot&&(t.camera.mouseListener.enabled=!1,t.container.removeEventListener("wheel",t.camera.wheelListener),t.camera=null,t.glplot.dispose(),t.container.parentNode.removeChild(t.container),t.glplot=null)},DO.getCamera=function(){var t,e=this;return e.camera.view.recalcMatrix(e.camera.view.lastT()),{up:{x:(t=e.camera).up[0],y:t.up[1],z:t.up[2]},center:{x:t.center[0],y:t.center[1],z:t.center[2]},eye:{x:t.eye[0],y:t.eye[1],z:t.eye[2]},projection:{type:!0===t._ortho?"orthographic":"perspective"}}},DO.setViewport=function(t){var e,n=this,r=t.camera;n.camera.lookAt.apply(this,[[(e=r).eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]),n.glplot.setAspectratio(t.aspectratio),"orthographic"===r.projection.type!==n.camera._ortho&&(n.glplot.redraw(),n.glplot.clearRGBA(),n.glplot.dispose(),n.initializeGLPlot())},DO.isCameraChanged=function(t){var e=this.getCamera(),n=wO.nestedProperty(t,this.id+".camera").get();function r(t,e,n,r){var i=["up","center","eye"],a=["x","y","z"];return e[i[n]]&&t[i[n]][a[r]]===e[i[n]][a[r]]}var i=!1;if(void 0===n)i=!0;else{for(var a=0;a<3;a++)for(var o=0;o<3;o++)if(!r(e,n,a,o)){i=!0;break}(!n.projection||e.projection&&e.projection.type!==n.projection.type)&&(i=!0)}return i},DO.isAspectChanged=function(t){var e=this.glplot.getAspectratio(),n=wO.nestedProperty(t,this.id+".aspectratio").get();return void 0===n||n.x!==e.x||n.y!==e.y||n.z!==e.z},DO.saveLayout=function(t){var e,n,r,i,a,o,s=this,l=s.fullLayout,c=s.isCameraChanged(t),u=s.isAspectChanged(t),h=c||u;if(h){var d={};if(c&&(e=s.getCamera(),r=(n=wO.nestedProperty(t,s.id+".camera")).get(),d[s.id+".camera"]=r),u&&(i=s.glplot.getAspectratio(),o=(a=wO.nestedProperty(t,s.id+".aspectratio")).get(),d[s.id+".aspectratio"]=o),CO.call("_storeDirectGUIEdit",t,l._preGUI,d),c)n.set(e),wO.nestedProperty(l,s.id+".camera").set(e);if(u)a.set(i),wO.nestedProperty(l,s.id+".aspectratio").set(i),s.glplot.redraw()}return h},DO.updateFx=function(t,e){var n=this,r=n.camera;if(r)if("orbit"===t)r.mode="orbit",r.keyBindingMode="rotate";else if("turntable"===t){r.up=[0,0,1],r.mode="turntable",r.keyBindingMode="rotate";var i=n.graphDiv,a=i._fullLayout,o=n.fullSceneLayout.camera,s=o.up.x,l=o.up.y,c=o.up.z;if(c/Math.sqrt(s*s+l*l+c*c)<.999){var u=n.id+".camera.up",h={x:0,y:0,z:1},d={};d[u]=h;var g=i.layout;CO.call("_storeDirectGUIEdit",g,a._preGUI,d),o.up=h,wO.nestedProperty(g,u).set(h)}}else r.keyBindingMode=t;n.fullSceneLayout.hovermode=e},DO.toImage=function(t){var e=this;t||(t="png"),e.staticMode&&e.container.appendChild(bO),e.glplot.redraw();var n=e.glplot.gl,r=n.drawingBufferWidth,i=n.drawingBufferHeight;n.bindFramebuffer(n.FRAMEBUFFER,null);var a=new Uint8Array(r*i*4);n.readPixels(0,0,r,i,n.RGBA,n.UNSIGNED_BYTE,a),function(t,e,n){for(var r=0,i=n-1;r<i;++r,--i)for(var a=0;a<e;++a)for(var o=0;o<4;++o){var s=4*(e*r+a)+o,l=4*(e*i+a)+o,c=t[s];t[s]=t[l],t[l]=c}}(a,r,i),function(t,e,n){for(var r=0;r<n;++r)for(var i=0;i<e;++i){var a=4*(e*r+i),o=t[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)t[a+l]=Math.min(s*t[a+l],255)}}(a,r,i);var o=document.createElement("canvas");o.width=r,o.height=i;var s,l=o.getContext("2d",{willReadFrequently:!0}),c=l.createImageData(r,i);switch(c.data.set(a),l.putImageData(c,0,0),t){case"jpeg":s=o.toDataURL("image/jpeg");break;case"webp":s=o.toDataURL("image/webp");break;default:s=o.toDataURL("image/png")}return e.staticMode&&e.container.removeChild(bO),s},DO.setConvert=function(){for(var t=0;t<3;t++){var e=this.fullSceneLayout[ZO[t]];AO.setConvert(e,this.fullLayout),e.setScale=wO.noop}},DO.make4thDimension=function(){var t=this,e=t.graphDiv._fullLayout;t._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},AO.setConvert(t._mockAxis,e)};var HO,WO,YO,zO,OO,JO,PO,jO,KO,qO,$O,tJ,eJ=NO;function nJ(){if(zO)return YO;zO=1;var t=Pu,e=Jv,n=Fu.extendFlat,r=sd.overrideAll;return YO=r({visible:e.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:t.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:e.color,categoryorder:e.categoryorder,categoryarray:e.categoryarray,title:{text:e.title.text,font:e.title.font},type:n({},e.type,{values:["-","linear","log","date","category"]}),autotypenumbers:e.autotypenumbers,autorange:e.autorange,autorangeoptions:{minallowed:e.autorangeoptions.minallowed,maxallowed:e.autorangeoptions.maxallowed,clipmin:e.autorangeoptions.clipmin,clipmax:e.autorangeoptions.clipmax,include:e.autorangeoptions.include,editType:"plot"},rangemode:e.rangemode,minallowed:e.minallowed,maxallowed:e.maxallowed,range:n({},e.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:e.minor.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,mirror:e.mirror,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,labelalias:e.labelalias,tickfont:e.tickfont,tickangle:e.tickangle,tickprefix:e.tickprefix,showtickprefix:e.showtickprefix,ticksuffix:e.ticksuffix,showticksuffix:e.showticksuffix,showexponent:e.showexponent,exponentformat:e.exponentformat,minexponent:e.minexponent,separatethousands:e.separatethousands,tickformat:e.tickformat,tickformatstops:e.tickformatstops,hoverformat:e.hoverformat,showline:e.showline,linecolor:e.linecolor,linewidth:e.linewidth,showgrid:e.showgrid,gridcolor:n({},e.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:e.gridwidth,zeroline:e.zeroline,zerolinecolor:e.zerolinecolor,zerolinewidth:e.zerolinewidth,_deprecated:{title:e._deprecated.title,titlefont:e._deprecated.titlefont}},"plot","from-root")}function rJ(){if(JO)return OO;JO=1;var t=nJ(),e=vZ.attributes,n=Fu.extendFlat,r=yf.counterRegex;function i(t,e,n){return{x:{valType:"number",dflt:t,editType:"camera"},y:{valType:"number",dflt:e,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}return OO={_arrayAttrRegexps:[r("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:n(i(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:n(i(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:n(i(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:e({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:t,yaxis:t,zaxis:t,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}}}var iJ=sd.overrideAll,aJ=Iu,oJ=eJ,sJ=hp.getSubplotData,lJ=yf,cJ=ev,uJ="gl3d",hJ="scene";lO.name=uJ,lO.attr=hJ,lO.idRoot=hJ,lO.idRegex=lO.attrRegex=lJ.counterRegex("scene"),lO.attributes=WO?HO:(WO=1,HO={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}}),lO.layoutAttributes=rJ(),lO.baseLayoutAttrOverrides=iJ({hoverlabel:aJ.hoverlabel},"plot","nested"),lO.supplyLayoutDefaults=function(){if(tJ)return $O;tJ=1;var t=yf,e=Pu,n=hh,r=function(){if(jO)return PO;jO=1;var t=yf,e=$f,n=vZ.defaults;return PO=function(r,i,a,o){var s,l,c=o.type,u=o.attributes,h=o.handleDefaults,d=o.partition||"x",g=i._subplots[c],f=g.length,p=f&&g[0].replace(/\d+$/,"");function v(e,n){return t.coerce(s,l,u,e,n)}for(var m=0;m<f;m++){var y=g[m];s=r[y]?r[y]:r[y]={},l=e.newContainer(i,y,p),o.noUirevision||v("uirevision",i.uirevision);var b={};b[d]=[m/f,(m+1)/f],n(l,i,v,b),o.id=y,h(s,l,v,o)}},PO}(),i=function(){if(qO)return KO;qO=1;var t=vu.mix,e=yf,n=$f,r=nJ(),i=kE(),a=qE,o=["xaxis","yaxis","zaxis"],s=13600/187;return KO=function(l,c,u){var h,d;function g(t,n){return e.coerce(h,d,r,t,n)}for(var f=0;f<o.length;f++){var p=o[f];h=l[p]||{},(d=n.newContainer(c,p))._id=p[0]+u.scene,d._name=p,i(h,d,g,u),a(h,d,g,{font:u.font,letter:p[0],data:u.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:u.bgColor,calendar:u.calendar},u.fullLayout),g("gridcolor",t(d.color,u.bgColor,s).toRgbString()),g("title.text",p[0]),d.setScale=e.noop,g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",d.color)),g("showaxeslabels"),g("showbackground")&&g("backgroundcolor")}},KO}(),a=rJ(),o=hp.getSubplotData,s="gl3d";function l(t,r,a,l){for(var c=a("bgcolor"),u=e.combine(c,l.paper_bgcolor),h=["up","center","eye"],d=0;d<h.length;d++)a("camera."+h[d]+".x"),a("camera."+h[d]+".y"),a("camera."+h[d]+".z");a("camera.projection.type");var g=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),f=a("aspectmode",g?"manual":"auto");g||(t.aspectratio=r.aspectratio={x:1,y:1,z:1},"manual"===f&&(r.aspectmode="auto"),t.aspectmode=r.aspectmode);var p=o(l.fullData,s,l.id);i(t,r,{font:l.font,scene:l.id,data:p,bgColor:u,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),n.getComponentMethod("annotations3d","handleDefaults")(t,r,l);var v=l.getDfltFromLayout("dragmode");if(!1!==v&&!v)if(v="orbit",t.camera&&t.camera.up){var m=t.camera.up.x,y=t.camera.up.y,b=t.camera.up.z;0!==b&&(m&&y&&b?b/Math.sqrt(m*m+y*y+b*b)>.999&&(v="turntable"):v="turntable")}else v="turntable";a("dragmode",v),a("hovermode",l.getDfltFromLayout("hovermode"))}return $O=function(e,n,i){var o=n._basePlotModules.length>1;r(e,n,i,{type:s,attributes:a,handleDefaults:l,fullLayout:n,font:n.font,fullData:i,getDfltFromLayout:function(n){if(!o)return t.validate(e[n],a[n])?e[n]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}}(),lO.plot=function(t){for(var e=t._fullLayout,n=t._fullData,r=e._subplots[uJ],i=0;i<r.length;i++){var a=r[i],o=sJ(n,uJ,a),s=e[a],l=s.camera,c=s._scene;c||(c=new oJ({id:a,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:l},e),s._scene=c),c.viewInitial||(c.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),c.plot(o,e,t.layout)}},lO.clean=function(t,e,n,r){for(var i=r._subplots[uJ]||[],a=0;a<i.length;a++){var o=i[a];!e[o]&&r[o]._scene&&(r[o]._scene.destroy(),r._infolayer&&r._infolayer.selectAll(".annotation-"+o).remove())}},lO.toSVG=function(t){for(var e=t._fullLayout,n=e._subplots[uJ],r=e._size,i=0;i<n.length;i++){var a=e[n[i]],o=a.domain,s=a._scene,l=s.toImage("png");e._glimages.append("svg:image").attr({xmlns:cJ.svg,"xlink:href":l,x:r.l+r.w*o.x[0],y:r.t+r.h*(1-o.y[1]),width:r.w*(o.x[1]-o.x[0]),height:r.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},lO.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var e=t.substr(5);return"1"===e&&(e=""),hJ+e}},lO.updateFx=function(t){for(var e=t._fullLayout,n=e._subplots[uJ],r=0;r<n.length;r++){e[n[r]]._scene.updateFx(e.dragmode,e.hovermode)}};var dJ={attributes:uz,supplyDefaults:vz.supplyDefaults,calc:function(t,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=Fz(e.x,e._len),e._y=Fz(e.y,e._len),e._z=Fz(e.z,e._len),e._value=Fz(e.value,e._len);var n=Iz(e);e._gridFill=n.fill,e._Xs=n.Xs,e._Ys=n.Ys,e._Zs=n.Zs,e._len=n.len;for(var r=1/0,i=-1/0,a=0;a<e._len;a++){var o=e._value[a];r=Math.min(r,o),i=Math.max(i,o)}e._minValues=r,e._maxValues=i,e._vMin=void 0===e.isomin||null===e.isomin?r:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?i:e.isomax,Bz(t,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})},colorbar:{min:"cmin",max:"cmax"},plot:sO.createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:lO,categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}},gJ=dJ,fJ=t({__proto__:null,default:ro(gJ)},[gJ]),pJ={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},vJ={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"},mJ=hh;function yJ(t,e,n,r){if(!e||!e.visible)return null;for(var i=mJ.getComponentMethod("errorbars","makeComputeError")(e),a=new Array(t.length),o=0;o<t.length;o++){var s=i(+t[o],o);if("log"===r.type){var l=r.c2l(t[o]),c=t[o]-s[0],u=t[o]+s[1];if(a[o]=[(r.c2l(c,!0)-l)*n,(r.c2l(u,!0)-l)*n],c>0){var h=r.c2l(c);r._lowerLogErrorBound||(r._lowerLogErrorBound=h),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,h)}}else a[o]=[-s[0]*n,s[1]*n]}return a}var bJ=function(t,e,n){var r=[yJ(t.x,t.error_x,e[0],n.xaxis),yJ(t.y,t.error_y,e[1],n.yaxis),yJ(t.z,t.error_z,e[2],n.zaxis)],i=function(t){for(var e=0;e<t.length;e++)if(t[e])return t[e].length;return 0}(r);if(0===i)return null;for(var a=new Array(i),o=0;o<i;o++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(r[l])for(var c=0;c<2;c++)s[c][l]=r[l][o][c];a[o]=s}return a},xJ=Cz.gl_line3d,BJ=Cz.gl_scatter3d,IJ=Cz.gl_error3d,FJ=Cz.gl_mesh3d,QJ=Cz.delaunay_triangulate,CJ=yf,wJ=Pz,UJ=zz,AJ=my,SJ=pJ,LJ=vJ,kJ=iI,GJ=yy.appendArrayPointValue,_J=bJ;function RJ(t,e){this.scene=t,this.uid=e,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var EJ=RJ.prototype;function TJ(t){return null==t?0:t.indexOf("left")>-1?-1:t.indexOf("right")>-1?1:0}function MJ(t){return null==t?0:t.indexOf("top")>-1?-1:t.indexOf("bottom")>-1?1:0}function NJ(t,e){return e(4*t)}function DJ(t){return LJ[t]}function XJ(t,e,n,r,i){var a=null;if(CJ.isArrayOrTypedArray(t)){a=[];for(var o=0;o<e;o++)void 0===t[o]?a[o]=r:a[o]=n(t[o],i)}else a=n(t,CJ.identity);return a}function ZJ(t,e){var n,r,i,a,o,s,l=[],c=t.fullSceneLayout,u=t.dataScale,h=c.xaxis,d=c.yaxis,g=c.zaxis,f=e.marker,p=e.line,v=e.x||[],m=e.y||[],y=e.z||[],b=v.length,x=e.xcalendar,B=e.ycalendar,I=e.zcalendar;for(o=0;o<b;o++)n=h.d2l(v[o],0,x)*u[0],r=d.d2l(m[o],0,B)*u[1],i=g.d2l(y[o],0,I)*u[2],l[o]=[n,r,i];if(Array.isArray(e.text))s=e.text;else if(CJ.isTypedArray(e.text))s=Array.from(e.text);else if(void 0!==e.text)for(s=new Array(b),o=0;o<b;o++)s[o]=e.text;function F(t,e){var n=c[t];return kJ.tickText(n,n.d2l(e),!0).text}var Q=e.texttemplate;if(Q){var C=t.fullLayout._d3locale,w=Array.isArray(Q),U=w?Math.min(Q.length,b):b,A=w?function(t){return Q[t]}:function(){return Q};for(s=new Array(U),o=0;o<U;o++){var S={x:v[o],y:m[o],z:y[o]},L={xLabel:F("xaxis",v[o]),yLabel:F("yaxis",m[o]),zLabel:F("zaxis",y[o])},k={};GJ(k,e,o);var G=e._meta||{};s[o]=CJ.texttemplateString(A(o),L,C,k,S,G)}}if(a={position:l,mode:e.mode,text:s},"line"in e&&(a.lineColor=UJ(p,1,b),a.lineWidth=p.width,a.lineDashes=p.dash),"marker"in e){var _=AJ(e);a.scatterColor=UJ(f,1,b),a.scatterSize=XJ(f.size,b,NJ,20,_),a.scatterMarker=XJ(f.symbol,b,DJ,"●"),a.scatterLineWidth=f.line.width,a.scatterLineColor=UJ(f.line,1,b),a.scatterAngle=0}"textposition"in e&&(a.textOffset=function(t){var e=[0,0];if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=[0,0],t[n]&&(e[n][0]=TJ(t[n]),e[n][1]=MJ(t[n]));else e[0]=TJ(t),e[1]=MJ(t);return e}(e.textposition),a.textColor=UJ(e.textfont,1,b),a.textSize=XJ(e.textfont.size,b,CJ.identity,12),a.textFontFamily=e.textfont.family,a.textFontWeight=e.textfont.weight,a.textFontStyle=e.textfont.style,a.textFontVariant=e.textfont.variant,a.textAngle=0);var R=["x","y","z"];for(a.project=[!1,!1,!1],a.projectScale=[1,1,1],a.projectOpacity=[1,1,1],o=0;o<3;++o){var E=e.projection[R[o]];(a.project[o]=E.show)&&(a.projectOpacity[o]=E.opacity,a.projectScale[o]=E.scale)}a.errorBounds=_J(e,u,c);var T=function(t){for(var e=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],r=[1,1,1],i=0;i<3;i++){var a=t[i];a&&!1!==a.copy_zstyle&&!1!==t[2].visible&&(a=t[2]),a&&a.visible&&(e[i]=a.width/2,n[i]=wJ(a.color),r[i]=a.thickness)}return{capSize:e,color:n,lineWidth:r}}([e.error_x,e.error_y,e.error_z]);return a.errorColor=T.color,a.errorLineWidth=T.lineWidth,a.errorCapSize=T.capSize,a.delaunayAxis=e.surfaceaxis,a.delaunayColor=wJ(e.surfacecolor),a}function VJ(t){if(CJ.isArrayOrTypedArray(t)){var e=t[0];return CJ.isArrayOrTypedArray(e)&&(t=e),"rgb("+t.slice(0,3).map((function(t){return Math.round(255*t)}))+")"}return null}function HJ(t){return CJ.isArrayOrTypedArray(t)?4===t.length&&"number"==typeof t[0]?VJ(t):t.map(VJ):null}EJ.handlePick=function(t){if(t.object&&(t.object===this.linePlot||t.object===this.delaunayMesh||t.object===this.textMarkers||t.object===this.scatterPlot)){var e=t.index=t.data.index;return t.object.highlight&&t.object.highlight(null),this.scatterPlot&&(t.object=this.scatterPlot,this.scatterPlot.highlight(t.data)),t.textLabel="",this.textLabels&&(CJ.isArrayOrTypedArray(this.textLabels)?(this.textLabels[e]||0===this.textLabels[e])&&(t.textLabel=this.textLabels[e]):t.textLabel=this.textLabels),t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]],!0}},EJ.update=function(t){var e,n,r,i,a=this.scene.glplot.gl,o=SJ.solid;this.data=t;var s=ZJ(this.scene,t);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in SJ&&(o=SJ[s.lineDashes]),this.color=HJ(s.scatterColor)||HJ(s.lineColor),this.dataPoints=s.position,e={gl:this.scene.glplot.gl,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:t.opacity,connectGaps:t.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(e):(this.linePlot=xJ(e),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=t.opacity;if(t.marker&&void 0!==t.marker.opacity&&(l*=t.marker.opacity),n={gl:this.scene.glplot.gl,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=BJ(n),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),i={gl:this.scene.glplot.gl,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFontFamily,fontWeight:s.textFontWeight,fontStyle:s.textFontStyle,fontVariant:s.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:t.opacity},this.textLabels=t.hovertext||t.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(i):(this.textMarkers=BJ(i),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),r={gl:this.scene.glplot.gl,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:t.opacity},this.errorBars?s.errorBounds?this.errorBars.update(r):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=IJ(r),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var c=function(t,e,n){var r,i=(n+1)%3,a=(n+2)%3,o=[],s=[];for(r=0;r<t.length;++r){var l=t[r];!isNaN(l[i])&&isFinite(l[i])&&!isNaN(l[a])&&isFinite(l[a])&&(o.push([l[i],l[a]]),s.push(r))}var c=QJ(o);for(r=0;r<c.length;++r)for(var u=c[r],h=0;h<u.length;++h)u[h]=s[u[h]];return{positions:t,cells:c,meshColor:e}}(s.position,s.delaunayColor,s.delaunayAxis);c.opacity=t.opacity,this.delaunayMesh?this.delaunayMesh.update(c):(c.gl=a,this.delaunayMesh=FJ(c),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},EJ.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};var WJ=function(t,e){var n=new RJ(t,e.uid);return n.update(e),n},YJ={exports:{}},zJ=xL,OJ=mu(),JJ=im,PJ=Iv,jJ=dd.hovertemplateAttrs,KJ=dd.texttemplateAttrs,qJ=_u,$J=pJ,tP=vJ,eP=Fu.extendFlat,nP=sd.overrideAll,rP=Jd,iP=zJ.line,aP=zJ.marker,oP=aP.line,sP=eP({width:iP.width,dash:{valType:"enumerated",values:rP($J),dflt:"solid",description:"Sets the dash style of the lines."}},JJ("line"));function lP(t){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",t,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var cP=YJ.exports=nP({x:zJ.x,y:zJ.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:eP({},zJ.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:KJ({},{}),hovertext:eP({},zJ.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:jJ(),xhoverformat:PJ("x"),yhoverformat:PJ("y"),zhoverformat:PJ("z"),mode:eP({},zJ.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:lP("x"),y:lP("y"),z:lP("z")},connectgaps:zJ.connectgaps,line:sP,marker:eP({symbol:{valType:"enumerated",values:rP(tP),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:eP({},aP.size,{dflt:8}),sizeref:aP.sizeref,sizemin:aP.sizemin,sizemode:aP.sizemode,opacity:eP({},aP.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:aP.colorbar,line:eP({width:eP({},oP.width,{arrayOk:!1})},JJ("marker.line"))},JJ("marker")),textposition:eP({},zJ.textposition,{dflt:"top center"}),textfont:OJ({editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"],description:"Sets the text font."}),opacity:qJ.opacity,hoverinfo:eP({},qJ.hoverinfo)},"calc","nested");cP.x.editType=cP.y.editType=cP.z.editType="calc+clearAxisTypes";var uP=YJ.exports,hP=hh,dP=yf,gP=py,fP=f_,pP=y_,vP=x_,mP=uP;var yP=tR,bP=q_,xP={plot:WJ,attributes:uP,markerSymbols:vJ,supplyDefaults:function(t,e,n,r){function i(n,r){return dP.coerce(t,e,mP,n,r)}var a=function(t,e,n,r){var i=0,a=n("x"),o=n("y"),s=n("z");hP.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],r),a&&o&&s&&(i=Math.min(a.length,o.length,s.length),e._length=e._xlength=e._ylength=e._zlength=i);return i}(t,e,i,r);if(a){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),gP.hasMarkers(e)&&fP(t,e,n,r,i,{noSelect:!0,noAngle:!0}),gP.hasLines(e)&&(i("connectgaps"),pP(t,e,n,r,i)),gP.hasText(e)&&(i("texttemplate"),vP(t,e,r,i,{noSelect:!0}));var o=(e.line||{}).color,s=(e.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",o||s);for(var l=["x","y","z"],c=0;c<3;++c){var u="projection."+l[c];i(u+".show")&&(i(u+".opacity"),i(u+".scale"))}var h=hP.getComponentMethod("errorbars","supplyDefaults");h(t,e,o||s||n,{axis:"z"}),h(t,e,o||s||n,{axis:"y",inherit:"z"}),h(t,e,o||s||n,{axis:"x",inherit:"z"})}else e.visible=!1},colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:function(t,e){var n=[{x:!1,y:!1,trace:e,t:{}}];return yP(n,e),bP(t,e),n},moduleType:"trace",name:"scatter3d",basePlotModule:lO,categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}},BP=xP,IP=t({__proto__:null,default:ro(BP)},[BP]);EV.register([fJ,IP]);class FP extends(Aa(Sa)){static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:Boolean,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.point=!0,this.updateable=!1,this.GAMBLE=0,this.SURE=1,this.NR=.25,this.DEFAULT=.75,this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response=this.DEFAULT,this.range={},this.range.a={start:1e-4,stop:1,step:.05},this.range.l={start:0,stop:10,step:.5},this.range.g={start:0,stop:1,step:.05},this.parameterSpace=[],this.alignState()}alignState(){this.updateable&&(this.response=$a.xal2v(this.xw,this.a,this.l)*$a.pg2w(this.pw,this.g)+$a.xal2v(this.xl,this.a,this.l)*(1-$a.pg2w(this.pw,this.g))>$a.xal2v(this.xs,this.a,this.l)?this.GAMBLE:this.SURE),this.parameterSpace={a:[],l:[],g:[],uDiff:[]},bt(this.range.a.start,this.range.a.stop+.01,this.range.a.step).forEach((t=>{bt(this.range.l.start,this.range.l.stop+.01,this.range.l.step).forEach((e=>{bt(this.range.g.start,this.range.g.stop+.01,this.range.g.step).forEach((n=>{this.parameterSpace.a.push(t),this.parameterSpace.l.push(e),this.parameterSpace.g.push(n);const r=$a.xal2v(this.xw,t,e)*$a.pg2w(this.pw,n)+$a.xal2v(this.xl,t,e)*(1-$a.pg2w(this.pw,n))-$a.xal2v(this.xs,t,e);this.parameterSpace.uDiff.push(r)}))}))}))}static get styles(){return[super.styles,kY,s`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .plotly {
          height: 100%;

          cursor: grab;
        }

        /* Plotly modebar styles */
        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */
        .plotly:hover .modebar .modebar-group {
          background-color: rgba(255, 255, 255, 0.5);
        }

        .modebar-btn .icon path {
          fill: rgba(68, 68, 68, 0.3);
        }

        .modebar-btn:hover .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }

        .modebar-btn.active .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }
      `]}render(){return W`
      <div class="plotly"></div>
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.getComputedStyleValue("---color-text"),n=this.getComputedStyleValue("---color-element-border"),r=this.getComputedStyleValue("---color-element-background"),i=this.getComputedStyleValue("---color-element-emphasis"),a=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-better"),s=this.getComputedStyleValue("---color-nr"),l=[];this.surface&&l.push({name:"Decision Boundary",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.a.stop]},y:{show:!0,locations:[this.range.l.stop]},z:{show:!0,locations:[this.range.g.start]}},surface:{show:!1}}),this.point&&l.push({name:"Current Decision",type:"scatter3d",x:[this.a],y:[this.l],z:[this.g],mode:"markers",marker:{color:[this.response],coloraxis:"coloraxis2",line:{color:i,width:2},size:6}});const c={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,a],[.01,a],[.24,s],[.26,s],[.74,i],[.76,i],[.99,o],[1,o]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:e},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:n,showline:!0,linecolor:n,zeroline:!1,range:[Math.round(this.range.a.start),this.range.a.stop],title:{text:"alpha",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:n,showline:!0,linecolor:n,zeroline:!1,range:[this.range.l.start,this.range.l.stop],title:{text:"lambda",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:n,showline:!0,linecolor:n,zeroline:!1,range:[this.range.g.start,this.range.g.stop],title:{text:"gamma",font:{size:1.125*this.rem}}}},uirevision:!0};EV.react(this.shadowRoot.querySelector(".plotly"),l,c,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}customElements.define("cpt-space",FP);class QP extends(Aa(Sa)){static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.a=.5,this.l=2,this.x=null,this.label="",this.function="default",this.functions=[{name:"default",a:this.a,l:this.l}],this.values=[{name:"default",x:this.x,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.alignState()}alignState(){this.functions[0].a=this.a,this.functions[0].l=this.l,this.values[0].x=this.x,this.values[0].label=this.label,this.values[0].function=this.function,this.values.forEach((t=>{const e=this.functions.find((e=>e.name===t.function));t.v=$a.xal2v(t.x,e.a,e.l)})),this.v=this.values[0].v}trial(t,e,n,r,i,a){this.trialCount&&this.removeValue(`${this.trialCount}-w`),this.trialCount&&this.removeValue(`${this.trialCount}-s`),this.xl=t,this.xw=e,this.pw=n,this.xs=r,this.trialCount=i,this.response=a,this.setValue(this.xw,`${this.trialCount}-w`,"g","default",!0),this.setValue(this.xs,`${this.trialCount}-s`,"s","default",!0)}pauseTrial(){const t=Ke(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum((t=>(t.paused=!0,t)))}resumeTrial(){Ke(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((t=>(t.paused=!1,t))),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearValues(){this.values.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearValues()}removeFunction(t){this.functions=this.functions.filter((e=>e.name!==t)),this.requestUpdate()}removeValue(t){this.values=this.values.filter((e=>e.name!==t)),this.requestUpdate()}remove(t){this.removeFunction(t),this.removeValue(t)}getFunction(t="default"){return this.functions.find((e=>e.name===t))}getValue(t="default"){return this.values.find((e=>e.name===t))}get(t="default"){return{...this.getFunction(t),...this.getValue(t)}}setFunction(t,e,n="default"){"default"===n&&(this.a=t,this.l=e);const r=this.functions.find((t=>t.name===n));void 0===r?this.functions.push({name:n,a:t,l:e}):(r.a=t,r.l=e),this.requestUpdate()}setValue(t,e="default",n="",r=e,i=!1){"default"===e&&(this.x=t,this.label=n);const a=this.values.find((t=>t.name===e));void 0===a?this.values.push({name:e,x:t,label:n,function:r,trial:i,new:i}):(a.x=t,a.label=n,a.function=r),this.requestUpdate()}set(t,e,n,r="default",i="",a=r){this.setFunction(e,n,a),this.setValue(t,r,i,a)}static get styles(){return[super.styles,s`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve-p.interactive,
        .curve-n.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve-p.interactive:hover,
        .curve-n.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve-p.interactive:active,
        .curve-n.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve-p.interactive:focus,
        :host(.keyboard) .curve-n.interactive:focus {
          filter: url("#shadow-8");
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        /* Make a larger target for touch users */
        @media (pointer: coarse) {
          .point.interactive .circle {
            stroke: #000000;
            stroke-opacity: 0;
            stroke-width: 12px;
          }
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .axis-x,
        .axis-y {
          stroke: var(---color-element-border);
          shape-rendering: crispEdges;
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve-p,
        .curve-n {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-x,
        .line-v {
          fill: none;
          stroke-width: 2;
        }

        .line-x {
          stroke: var(---color-x);
        }

        .line-v {
          stroke: var(---color-v);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }
      `]}render(){return W`
      ${Sa.svgFilters}
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,n=this.height,r=Math.min(e,n),i=2*this.rem,a=3*this.rem,o=3*this.rem,s=r-(i+a),l=r-(o+2*this.rem),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),u=20,h=Oi().domain([-20,u]).range([0,l]);this.xScale=h;const d=Oi().domain([u,-20]).range([0,s]);this.yScale=d;const g=un().subject(((t,e)=>({x:t.x,y:this.yScale($a.xal2v(this.xScale.invert(t.x),e.a,e.l))}))).on("start",(t=>{Ke(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const n=this.xScale.invert(t.x),r=this.yScale.invert(t.y),i=$a.xlv2a(n,e.l,r);e.a=Number.isNaN(i)||i<0||i>1||n<0||r<0?n>r?0:1:i,"default"===e.name&&(this.a=e.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{Ke(t.currentTarget).classed("dragging",!1)})),f=un().subject(((t,e)=>({x:t.x,y:this.yScale($a.xal2v(this.xScale.invert(t.x),e.a,e.l))}))).on("start",(t=>{Ke(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const n=this.xScale.invert(t.x),r=this.yScale.invert(t.y),i=$a.xav2l(n,e.a,r);e.l=Number.isNaN(i)||i<0||i>100||n>0||r>0?n>r?100:0:i,"default"===e.name&&(this.l=e.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{Ke(t.currentTarget).classed("dragging",!1)})),p=un().subject(((t,e)=>({x:this.xScale(e.x),y:this.yScale(e.v)}))).on("start",(t=>{Ke(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const n=this.xScale.invert(t.x);e.x=n<-20?-20:n>u?u:n,"default"===e.name&&(this.x=e.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,v:e.v,label:e.label,a:this.getFunction(e.function).a,l:this.getFunction(e.function).l},bubbles:!0}))})).on("end",(t=>{Ke(t.currentTarget).classed("dragging",!1)})),v=Ba().x((t=>h(t.x))).y((t=>d(t.v))),m=Ke(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),y=m.enter().append("svg").classed("main",!0),b=y.merge(m).attr("viewBox",`0 0 ${r} ${r}`),x=y.append("g").classed("plot",!0),B=b.select(".plot").attr("transform",`translate(${o}, ${i})`);x.append("clipPath").attr("id","clip-cpt-value").append("rect"),B.select("clipPath rect").attr("height",s+1).attr("width",l+1);const I=x.append("g").classed("underlayer",!0),F=B.select(".underlayer");I.append("rect").classed("background",!0),F.select(".background").attr("height",s).attr("width",l),I.append("g").classed("scale-x",!0);F.select(".scale-x").attr("transform",`translate(0, ${d(-20)})`).transition().duration(2*c).ease(gi).call(Gt(h)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),I.append("line").classed("axis-x",!0),F.select(".axis-x").transition().duration(c).ease(gi).attr("x1",h(-20)).attr("x2",h(u)).attr("y1",d(0)).attr("y2",d(0));const Q=I.append("text").classed("title-x",!0).attr("text-anchor","middle");Q.append("tspan").classed("name",!0).text("Objective Value ("),Q.append("tspan").classed("math-var x",!0).text("x"),Q.append("tspan").classed("name",!0).text(")"),F.select(".title-x").attr("transform",`translate(${l/2}, ${s+2.25*this.rem})`),I.append("g").classed("scale-y",!0);F.select(".scale-y").transition().duration(2*c).ease(gi).call(_t(d)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),I.append("line").classed("axis-y",!0),F.select(".axis-y").transition().duration(c).ease(gi).attr("x1",h(0)).attr("x2",h(0)).attr("y1",d(u)).attr("y2",d(-20));const C=I.append("text").classed("title-y",!0).attr("text-anchor","middle");C.append("tspan").classed("name",!0).text("Subjective Value ("),C.append("tspan").classed("math-var v",!0).text("v"),C.append("tspan").classed("name",!0).text(")"),F.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${s/2})rotate(-90)`),I.append("line").classed("diagonal",!0),F.select(".diagonal").transition().duration(2*c).ease(gi).attr("x1",h(-20)).attr("y1",d(-20)).attr("x2",h(u)).attr("y2",d(u)),x.append("g").classed("content",!0);const w=B.select(".content"),U=w.selectAll(".lines").data(this.values.filter((t=>null!=t.x)),(t=>t.name)),A=U.enter().append("g").classed("lines",!0);A.each(((t,e,n)=>{const r=Ke(n[e]);r.append("line").classed("line-x above",!0),r.append("line").classed("line-x below",!0),r.append("line").classed("line-v before",!0),r.append("line").classed("line-v after",!0)})),A.filter((t=>t.new)).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(((t,e,n)=>{const r=Ke(n[e]);r.select(".line-x.above").attr("x1",h(t.x)).attr("x2",h(t.x)).attr("y1",d(u)).attr("y2",d(u)),r.select(".line-x.below").attr("x1",h(t.x)).attr("x2",h(t.x)).attr("y1",d(-20)).attr("y2",d(-20)),r.select(".line-v.before").attr("x1",h(t.x)).attr("x2",h(t.x)).attr("y1",d(t.v)).attr("y2",d(t.v)),r.select(".line-v.after").attr("x1",h(t.x)).attr("x2",h(t.x)).attr("y1",d(t.v)).attr("y2",d(t.v))}));const S=A.merge(U),L=S.filter((t=>t.new&&!t.paused));if(!L.empty()){const t=L.attr("data-animating-ease-time-1"),e=L.attr("data-animating-ease-time-2"),n=e=>Oi().domain([0,1]).range([t,1])(e),r=e=>Oi().range([0,1]).domain([t,1])(e),i=t=>Oi().domain([0,1]).range([e,1])(t),a=t=>Oi().range([0,1]).domain([e,1])(t),o=e=>n=>Oi().domain([e(t),1]).range([0,1])(e(n)),s=t=>n=>Oi().domain([t(e),1]).range([0,1])(t(n));L.transition("new-1").duration((()=>Math.floor(c*(1-t)))).ease(n).attr("data-animating-ease-time-1",1).tween("animating",((t,e,n)=>{const i=n[e],a=Ke(i),s=rr(void 0!==i.x?i.x:t.x,t.x),l=rr(void 0!==i.a?i.a:this.getFunction(t.function).a,this.getFunction(t.function).a),c=rr(void 0!==i.l?i.l:this.getFunction(t.function).l,this.getFunction(t.function).l),g=rr(d.invert(a.select(".line-x.above").attr("y1")),t.v),f=rr(d.invert(a.select(".line-x.below").attr("y1")),t.v);return t=>{i.x=s(gi(r(t))),i.a=l(gi(r(t))),i.l=c(gi(r(t))),i.v=$a.xal2v(i.x,i.a,i.l),a.select(".line-x.above").attr("x1",h(i.x)).attr("x2",h(i.x)).attr("y1",d(g(o(di)(t)))).attr("y2",d(u)),a.select(".line-x.below").attr("x1",h(i.x)).attr("x2",h(i.x)).attr("y1",d(f(o(di)(t)))).attr("y2",d(-20))}})).transition("new-2").duration((()=>Math.floor(c*(1-e)))).ease(i).attr("data-animating-ease-time-2",1).tween("animating",((t,e,n)=>{const r=n[e],i=Ke(r),o=rr(void 0!==r.x?r.x:t.x,t.x),l=rr(void 0!==r.a?r.a:this.getFunction(t.function).a,this.getFunction(t.function).a),c=rr(void 0!==r.l?r.l:this.getFunction(t.function).l,this.getFunction(t.function).l),g=rr(h.invert(i.select(".line-v.before").attr("x1")),-20),f=rr(h.invert(i.select(".line-v.after").attr("x1")),u);return t=>{r.x=o(gi(a(t))),r.a=l(gi(a(t))),r.l=c(gi(a(t))),r.v=$a.xal2v(r.x,r.a,r.l),i.select(".line-v.before").attr("x1",h(g(s(gi)(t)))).attr("x2",h(r.x)).attr("y1",d(r.v)).attr("y2",d(r.v)),i.select(".line-v.after").attr("x1",h(f(s(gi)(t)))).attr("x2",h(r.x)).attr("y1",d(r.v)).attr("y2",d(r.v))}})).on("end",((t,e,n)=>{const r=n[e];r.removeAttribute("data-animating-ease-time-1"),r.removeAttribute("data-animating-ease-time-2"),t.new=!1,this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))}))}const k=S.filter((t=>t.new&&t.paused));if(!k.empty()){const t=k.attr("data-animating-ease-time-1"),e=k.attr("data-animating-ease-time-2");k.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).tween("paused",((n,r,i)=>{const a=i[r],o=Ke(a),s=rr(void 0!==a.x?a.x:n.x,n.x),l=rr(void 0!==a.a?a.a:this.getFunction(n.function).a,this.getFunction(n.function).a),c=rr(void 0!==a.l?a.l:this.getFunction(n.function).l,this.getFunction(n.function).l),g=rr(u,n.v),f=rr(-20,n.v),p=rr(n.x,-20),v=rr(n.x,u);return n=>{a.x=s(n),a.a=l(n),a.l=c(n),a.v=$a.xal2v(a.x,a.a,a.l),o.select(".line-x.above").attr("x1",h(a.x)).attr("x2",h(a.x)).attr("y1",d(g(di(t)))).attr("y2",d(u)),o.select(".line-x.below").attr("x1",h(a.x)).attr("x2",h(a.x)).attr("y1",d(f(di(t)))).attr("y2",d(-20)),o.select(".line-v.before").attr("x1",h(p(gi(e)))).attr("x2",h(a.x)).attr("y1",d(a.v)).attr("y2",d(a.v)),o.select(".line-v.after").attr("x1",h(v(gi(e)))).attr("x2",h(a.x)).attr("y1",d(a.v)).attr("y2",d(a.v))}}))}S.filter((t=>!t.new)).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).tween("non-animating",((t,e,n)=>{const r=n[e],i=Ke(r),a=rr(void 0!==r.x?r.x:t.x,t.x),o=rr(void 0!==r.a?r.a:this.getFunction(t.function).a,this.getFunction(t.function).a),s=rr(void 0!==r.l?r.l:this.getFunction(t.function).l,this.getFunction(t.function).l);return t=>{r.x=a(t),r.a=o(t),r.l=s(t),r.v=$a.xal2v(r.x,r.a,r.l),i.select(".line-x.above").attr("x1",h(r.x)).attr("x2",h(r.x)).attr("y1",d(r.v)).attr("y2",d(u)),i.select(".line-x.below").attr("x1",h(r.x)).attr("x2",h(r.x)).attr("y1",d(r.v)).attr("y2",d(-20)),i.select(".line-v.before").attr("x1",h(-20)).attr("x2",h(r.x)).attr("y1",d(r.v)).attr("y2",d(r.v)),i.select(".line-v.after").attr("x1",h(u)).attr("x2",h(r.x)).attr("y1",d(r.v)).attr("y2",d(r.v))}})),U.exit().remove();const G=w.selectAll(".curve-p").data(this.functions,(t=>t.name)),_=G.enter().append("path").classed("curve-p",!0).attr("clip-path","url(#clip-cpt-value)").merge(G);(this.firstUpdate||t.has("interactive"))&&(this.interactive?_.attr("tabindex",0).classed("interactive",!0).call(g).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let n=e.a;switch(t.key){case"ArrowUp":case"ArrowLeft":n+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n-=t.shiftKey?.01:.05}n=n<0?0:n>1?1:n,n!==e.a&&(e.a=n,"default"===e.name&&(this.a=e.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):_.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),_.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).attrTween("d",((t,e,n)=>{const r=n[e],i=rr(void 0!==r.a?r.a:t.a,t.a),a=rr(void 0!==r.l?r.l:t.l,t.l);return t=>{r.a=i(t),r.l=a(t);const e=bt(h(0),h.range()[1]+1,1).map((t=>({x:h.invert(t),v:$a.xal2v(h.invert(t),r.a,r.l)})));return v(e)}})),G.exit().remove();const R=w.selectAll(".curve-n").data(this.functions,(t=>t.name)),E=R.enter().append("path").classed("curve-n",!0).attr("clip-path","url(#clip-cpt-value)").merge(R);(this.firstUpdate||t.has("interactive"))&&(this.interactive?E.attr("tabindex",0).classed("interactive",!0).call(f).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let n=e.l;switch(t.key){case"ArrowUp":case"ArrowLeft":n-=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n+=t.shiftKey?.01:.05}n=n<0?0:n>100?100:n,n!==e.l&&(e.l=n,"default"===e.name&&(this.l=e.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):E.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),E.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).attrTween("d",((t,e,n)=>{const r=n[e],i=rr(void 0!==r.a?r.a:t.a,t.a),a=rr(void 0!==r.l?r.l:t.l,t.l);return t=>{r.a=i(t),r.l=a(t);const e=bt(h.range()[0],h(0)+1,1).map((t=>({x:h.invert(t),v:$a.xal2v(h.invert(t),r.a,r.l)})));return v(e)}})),R.exit().remove();const T=w.selectAll(".point").data(this.values.filter((t=>null!=t.x)),(t=>t.name)),M=T.enter().append("g").classed("point",!0);M.append("circle").classed("circle",!0),M.append("text").classed("label",!0);const N=M.merge(T);N.select("text").text((t=>t.label)),N.filter((e=>(this.firstUpdate||t.has("interactive"))&&this.interactive&&!e.trial)).attr("tabindex",0).classed("interactive",!0).call(p).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let n=e.x;switch(t.key){case"ArrowUp":case"ArrowRight":n+=t.shiftKey?.2:1;break;case"ArrowDown":case"ArrowLeft":n-=t.shiftKey?.2:1}n=n<-20?-20:n>u?u:n,n!==e.x&&(e.x=n,"default"===e.name&&(this.x=e.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,v:e.v,label:e.label,a:this.getFunction(e.function).a,l:this.getFunction(e.function).l},bubbles:!0}))),t.preventDefault()}})),N.filter((e=>(this.firstUpdate||t.has("interactive"))&&!this.interactive||e.trial)).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),N.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(gi).attrTween("transform",((t,e,n)=>{const r=n[e],i=rr(void 0!==r.x?r.x:t.x,t.x),a=rr(void 0!==r.a?r.a:this.getFunction(t.function).a,this.getFunction(t.function).a),o=rr(void 0!==r.l?r.l:this.getFunction(t.function).l,this.getFunction(t.function).l);return t=>(r.x=i(t),r.a=a(t),r.l=o(t),`translate(\n            ${h(r.x)},\n            ${d($a.xal2v(r.x,r.a,r.l))}\n          )`)})),T.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-value",QP),EV.register([fJ,IP]);class CP extends(Aa(Sa)){static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:String,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.points=["all","first","rest","none"],this.point="first",this.updateable=!1,this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response="",this.label="",this.choices=[{name:"default",xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,label:""}],this.GAMBLE=0,this.SURE=1,this.NR=.25,this.DEFAULT=.75,this.pointList=[],this.range={},this.range.xs={start:5,stop:15,step:.5},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:0,stop:1,step:.05},this.decisionSpace=[],this.alignState()}alignState(){this.choices[0].name="default",this.choices[0].xw=this.xw,this.choices[0].pw=this.pw,this.choices[0].xs=this.xs,this.choices[0].response=this.response,this.choices[0].label=this.label,this.updateable&&(this.choices.forEach((t=>{t.response=$a.xal2v(t.xw,this.a,this.l)*$a.pg2w(t.pw,this.g)+$a.xal2v(this.xl,this.a,this.l)*(1-$a.pg2w(t.pw,this.g))>$a.xal2v(t.xs,this.a,this.l)?"gamble":"sure"})),this.response=this.choices[0].response),this.pointList={xw:[],pw:[],xs:[],response:[],label:[]},this.choices.forEach(((t,e)=>{(0===e&&("first"===this.point||"all"===this.point)||e>0&&("rest"===this.point||"all"===this.point))&&(this.pointList.xw.push(t.xw),this.pointList.pw.push(t.pw),this.pointList.xs.push(t.xs),this.pointList.response.push("gamble"===t.response?this.GAMBLE:"sure"===t.response?this.SURE:"nr"===t.response?this.NR:this.DEFAULT),this.pointList.label.push(t.label))})),this.decisionSpace={xs:[],xw:[],pw:[],uDiff:[]},bt(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).forEach((t=>{bt(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).forEach((e=>{bt(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step).forEach((n=>{this.decisionSpace.xs.push(t),this.decisionSpace.xw.push(e),this.decisionSpace.pw.push(n);const r=$a.xal2v(e,this.a,this.l)*$a.pg2w(n,this.g)+$a.xal2v(this.xl,this.a,this.l)*(1-$a.pg2w(n,this.g))-$a.xal2v(t,this.a,this.l);this.decisionSpace.uDiff.push(r)}))}))}))}clear(){this.choices=[{}],this.requestUpdate()}get(t="default"){const e=this.choices.find((e=>e.name===t));return void 0===e?null:e}set(t,e,n,r,i="default",a=""){"default"===i&&(this.xw=t,this.pw=e,this.xs=n,this.response=r,this.label=a);const o=this.choices.find((t=>t.name===i));void 0===o?this.choices.push({name:i,xw:t,pw:e,xs:n,response:r,label:a}):(o.xw=t,o.pw=e,o.xs=n,o.response=r,o.label=a),this.requestUpdate()}static get styles(){return[super.styles,kY,s`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .plotly {
          height: 100%;

          cursor: grab;
        }

        /* Plotly modebar styles */
        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */
        .plotly:hover .modebar .modebar-group {
          background-color: rgba(255, 255, 255, 0.5);
        }

        .modebar-btn .icon path {
          fill: rgba(68, 68, 68, 0.3);
        }

        .modebar-btn:hover .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }

        .modebar-btn.active .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }
      `]}render(){return W`
      <div class="plotly"></div>
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.getComputedStyleValue("---color-text"),n=this.getComputedStyleValue("---color-element-border"),r=this.getComputedStyleValue("---color-element-background"),i=this.getComputedStyleValue("---color-element-emphasis"),a=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-better"),s=this.getComputedStyleValue("---color-nr"),l=[];this.surface&&l.push({name:"Decision Boundary",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.xs.stop]},y:{show:!0,locations:[this.range.xw.stop]},z:{show:!0,locations:[this.range.pw.start]}},surface:{show:!1}}),l.push({name:"Current Decision",type:"scatter3d",x:this.pointList.xs,y:this.pointList.xw,z:this.pointList.pw,mode:"markers",marker:{color:this.pointList.response,coloraxis:"coloraxis2",line:{color:i,width:2},size:6}});const c={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,a],[.01,a],[.24,s],[.26,s],[.74,i],[.76,i],[.99,o],[1,o]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:e},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:n,showline:!0,linecolor:n,zeroline:!1,range:[this.range.xs.start,this.range.xs.stop],title:{text:"Sure Value",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:n,showline:!0,linecolor:n,zeroline:!1,range:[this.range.xw.start,this.range.xw.stop],title:{text:"Win Value",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:n,showline:!0,linecolor:n,zeroline:!1,range:[this.range.pw.start,this.range.pw.stop],title:{text:"Win Probability",font:{size:1.125*this.rem}}}},uirevision:!0};EV.react(this.shadowRoot.querySelector(".plotly"),l,c,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}customElements.define("decision-space",CP);class wP extends Sa{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.duration=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("prospectable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("prospectable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("prospectable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("prospectable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("prospectable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,s`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `]}render(){return W`
      <div class="holder">
        ${this.trials?W`<decidables-slider min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:W``}
        ${this.duration?W`<decidables-slider min="10" max="4000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:W``}
        ${this.run||this.pause||this.reset?W`
            <div class="buttons">
              ${this.run?W`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:W``}
              ${this.pause?W`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:W``}
              ${this.reset?W`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:W``}
            </div>
            `:W``}
      </div>`}}customElements.define("prospectable-control",wP);class UP extends Sa{static get properties(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.feedbacks=["none","outcome"],this.feedback="none",this.trial=!1,this.payoffs=["none","selection","both"],this.payoff="none",this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.gamblePayoff=0,this.surePayoff=0,this.nrPayoff=0,this.betters=["gamble","sure","even"],this.better=void 0,this.responses=["gamble","sure","nr"],this.response=void 0,this.outcomes=["better","worse","even","nr"],this.outcome=void 0}get trialPayoff(){switch(this.response){case"gamble":return this.gamblePayoff;case"sure":return this.surePayoff;case"nr":return this.nrPayoff;default:return}}start(t,e,n,r,i,a,o,s){this.state="waiting",this.xl=t,this.xw=e,this.pw=n,this.xs=r,this.gamblePayoff=i,this.surePayoff=a,this.better=o,this.trialCount=s,this.response=void 0,this.outcome=void 0}stop(){this.state="feedback",void 0===this.response&&(this.outcome="nr")}gamble(){this.responded("gamble")}sure(){this.responded("sure")}responded(t){this.state="feedback",this.response=t,this.outcome="even"===this.better?"even":this.better===this.response?"better":"worse",this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,outcome:this.outcome,payoff:this.trialPayoff},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.better=void 0,this.gamblePayoff=0,this.surePayoff=0,this.response=void 0,this.outcome=void 0}static get styles(){return[super.styles,s`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Trial messages */
        .trials {
          display: flex;

          flex-direction: column;

          justify-content: center;
        }

        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          width: 5.25rem;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="gamble"] {
          --decidables-button-background-color: var(---color-worse);
        }

        .selected[disabled][name="sure"] {
          --decidables-button-background-color: var(---color-better);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: row;

          justify-content: center;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 5.25rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        .feedback.better {
          background-color: var(---color-better-light);
        }

        .feedback.worse {
          background-color: var(---color-worse-light);
        }

        .feedback.even {
          background-color: var(---color-even-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }

        .feedback .outcome {
          font-weight: 600;
          line-height: 1.15;
        }

        :host([payoff="selection"]) .feedback,
        :host([payoff="both"]) .feedback {
          height: 4rem;
        }

        /* Payoff feedback */
        .payoff {
          text-align: center;
        }

        .payoff .label {
          font-weight: 600;
        }
      `]}render(){return W`
      <div class="holder">
        ${this.trial?W`
            <div class="trials">
              <div class="trial">
                <span class="label">Trial: </span><span class="count">${this.trialCount}</span><span class="of"> of </span><span class="total">${this.trialTotal}</span>
              </div>
            </div>`:W``}
        <div class="responses">
          <decidables-button name="gamble" class="response ${"feedback"===this.state&&"gamble"===this.response?"selected":"waiting"===this.state?"waiting":""}" ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.gamble.bind(this)}>Gamble</decidables-button>
          <decidables-button name="sure" class="response ${"feedback"===this.state&&"sure"===this.response?"selected":"waiting"===this.state?"waiting":""}" ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.sure.bind(this)}>Sure</decidables-button>
        </div>
        ${"none"!==this.feedback||"none"!==this.payoff?W`
            <div class="feedbacks">
              <div class="feedback gamble
                ${"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?this.outcome:""}">
                ${"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?"better"===this.outcome?W`<span class="outcome">Better</span>`:"worse"===this.outcome?W`<span class="outcome">Worse</span>`:"even"===this.outcome?W`<span class="outcome">Even</span>`:W`<span class="outcome">No<br>Response</span>`:""}
                ${"both"===this.payoff||"selection"===this.payoff&&"gamble"===this.response?W`<span class="payoff">${"gamble"===this.response?"Win:":"Miss:"} $${this.gamblePayoff}</span>`:W``}
              </div>
              <div class="feedback sure
                ${"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?this.outcome:""}">
                ${"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?"better"===this.outcome?W`<span class="outcome">Better</span>`:"worse"===this.outcome?W`<span class="outcome">Worse</span>`:"even"===this.outcome?W`<span class="outcome">Even</span>`:W`<span class="outcome">No<br>Response</span>`:""}
                ${"both"===this.payoff||"selection"===this.payoff&&"sure"===this.response?W`<span class="payoff">${"sure"===this.response?"Win:":"Miss:"} $${this.surePayoff}</span>`:W``}
              </div>
            </div>`:W``}
      </div>`}}customElements.define("prospectable-response",UP);class AP extends(Aa(Sa)){static get styles(){return[super.styles,s`
        :host {
          --decidables-spinner-font-size: 1.75rem;
          --decidables-spinner-input-width: 4rem;
          --decidables-spinner-prefix: "$";

          display: inline-block;

          width: 10rem;
          height: 10rem;
        }

        .main {
          width: 100%;
          height: 100%;
          overflow: visible;
        }

        .outline {
          fill: var(---color-element-background);
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc {
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc.interactive {
          cursor: ns-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .arc.interactive:hover {
          filter: url("#shadow-4");
        }

        .arc.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .arc.interactive:focus {
          filter: url("#shadow-8");
        }

        .arc.win {
          fill: var(---color-better-light);
        }

        .arc.loss {
          fill: var(---color-worse-light);
        }

        .arc.sure {
          fill: var(---color-even-light);
        }

        .label.static {
          font-size: 1.75rem;

          user-select: none;

          dominant-baseline: middle;
          text-anchor: middle;
        }

        .label.interactive {
          width: var(--decidables-spinner-input-width);
          height: calc(var(--decidables-spinner-font-size) * 1.5);
          overflow: visible;
        }

        /* HACK: Get Safari to work with SVG foreignObject */
        /* https://stackoverflow.com/questions/51313873/svg-foreignobject-not-working-properly-on-safari */
        /* https://bugs.webkit.org/show_bug.cgi?id=23113 */
        .label.interactive decidables-spinner {
          position: fixed;
        }

        .label.interactive.win decidables-spinner {
          background-color: var(---color-better-light);
        }

        .label.interactive.loss decidables-spinner {
          background-color: var(---color-worse-light);
        }

        .label.interactive.sure decidables-spinner {
          background-color: var(---color-even-light);
        }
      `]}render(){return W`
      ${Sa.svgFilters}
      <slot></slot>
    `}connectedCallback(){super.connectedCallback(),this.mutationObserver=new MutationObserver((t=>{t.some((t=>"childList"===t.type||"attributes"===t.type&&t.target!==this))&&this.requestUpdate()})),this.mutationObserver.observe(this,{subtree:!0,childList:!0,attributes:!0})}disconnectedCallback(){this.mutationObserver.disconnect(),super.disconnectedCallback()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,n=this.height,r=Math.min(e,n),i=r-(0+0),a=r-(0+0),o=this.querySelectorAll("risky-outcome"),s=o.length?-o[0].p:0,l=function(){var t=Fa,e=Ia,n=null,r=Pi(0),i=Pi(oa),a=Pi(0);function o(o){var s,l,c,u,h,d=(o=va(o)).length,g=0,f=new Array(d),p=new Array(d),v=+r.apply(this,arguments),m=Math.min(oa,Math.max(-oa,i.apply(this,arguments)-v)),y=Math.min(Math.abs(m)/d,a.apply(this,arguments)),b=y*(m<0?-1:1);for(s=0;s<d;++s)(h=p[f[s]=s]=+t(o[s],s,o))>0&&(g+=h);for(null!=e?f.sort((function(t,n){return e(p[t],p[n])})):null!=n&&f.sort((function(t,e){return n(o[t],o[e])})),s=0,c=g?(m-d*b)/g:0;s<d;++s,v=u)l=f[s],u=v+((h=p[l])>0?h*c:0)+b,p[l]={data:o[l],index:s,value:h,startAngle:v,endAngle:u,padAngle:y};return p}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:Pi(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Pi(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Pi(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Pi(+t),o):a},o}().startAngle(s*Math.PI-Math.PI).endAngle(s*Math.PI+Math.PI).sortValues(null).value((t=>t.p))(o),c=l.filter((t=>!t.data.interactive)),u=l.filter((t=>t.data.interactive));function h(t){const e=(t+2*Math.PI)%(2*Math.PI);return e>Math.PI?e-2*Math.PI:e<-Math.PI?e+2*Math.PI:e}const d=un().subject(((t,e)=>{const n=h((e.endAngle+e.startAngle)/2),r=h(Math.atan2(t.y,t.x)+Math.PI/2);return o.forEach((t=>{t.startP=t.p})),{arcAngle:n,startAngle:h(r-n)}})).on("start",((t,e)=>{if(!e.data.interactive)return;Ke(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{if(!e.data.interactive)return;const n=h(Math.atan2(t.y,t.x)+Math.PI/2),r=h(n-t.subject.arcAngle),i=h(t.subject.startAngle>0?r-t.subject.startAngle:t.subject.startAngle-r)/Math.PI,a=e.data.startP+i,s=a>.99?.99:a<.01?.01:a;o.forEach((t=>{t.p=t===e.data?s:t.startP/(1-e.data.startP)*(1-s)})),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0}))})).on("end",((t,e)=>{if(!e.data.interactive)return;Ke(t.currentTarget).classed("dragging",!1)})),g=Ke(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),f=g.enter().append("svg").classed("main",!0),p=f.merge(g).attr("viewBox",`0 0 ${r} ${r}`),v=f.append("g").classed("pie",!0),m=p.select(".pie").attr("transform",`translate(${a/2}, ${i/2})`);v.append("circle").classed("outline",!0),m.select(".outline").attr("r",Math.min(a,i)/2-1);const y=m.selectAll(".arc").data(l),b=y.enter().append("path").call(d).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown"].includes(t.key)){const n=e.data.p;let r=e.data.p;switch(t.key){case"ArrowUp":r-=t.shiftKey?.01:.05;break;case"ArrowDown":r+=t.shiftKey?.01:.05}const i=r>.99?.99:r<.01?.01:r;o.forEach((t=>{t.p=t===e.data?i:t.p/(1-n)*(1-i)})),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0})),t.preventDefault()}}));b.merge(y).attr("tabindex",(t=>u.includes(t)&&l.length>1?0:null)).attr("class",(t=>`arc ${t.data.name}`)).classed("interactive",(t=>u.includes(t)&&l.length>1)).attr("d",pa().innerRadius(0).outerRadius(Math.min(a,i)/2-1)),y.exit().remove();const x=m.selectAll(".label.static").data(c),B=m.selectAll(".label.interactive").data(u),I=x.enter().append("text"),F=B.enter().append("foreignObject");F.append("xhtml:decidables-spinner").on("input",((t,e)=>{e.data.x=parseFloat(t.target.value),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0}))})),I.merge(x).attr("class",(t=>`label static ${t.data.name}`)).attr("transform",(t=>{if(1===l.length)return"translate(0, 0)";const e=Math.min(a,i)/2*.6;return`translate(${pa().innerRadius(e).outerRadius(e).centroid(t)})`})).text((t=>`$${t.data.x.toFixed(0)}`));const Q=F.merge(B).attr("class",(t=>`label interactive ${t.data.name}`)).attr("transform",(t=>{const e=parseFloat(this.getComputedStyleValue("--decidables-spinner-input-width")),n=parseFloat(this.getComputedStyleValue("--decidables-spinner-font-size")),r=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10),o=e*r/-2,s=n*r*1.5/-2;if(1===l.length)return`translate(${o}, ${s})`;const c=Math.min(a,i)/2*.6,u=pa().innerRadius(c).outerRadius(c);return`translate(${u.centroid(t)[0]+o}, ${u.centroid(t)[1]+s})`}));Q.select("decidables-spinner").attr("value",(t=>`${t.data.x.toFixed(0)}`)),x.exit().remove(),B.exit().remove()}}customElements.define("risky-option",AP);class SP extends Sa{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},name:{attribute:"name",type:String,reflect:!0}}}constructor(){super(),this.x=0,this.p=0,this.name=""}static get styles(){return[s`
        :host {
          display: none;
        }
      `]}render(){return W``}}customElements.define("risky-outcome",SP);class LP extends Sa{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.xl=0,this.xw=100,this.pw=.75,this.xs=50}static get styles(){return[super.styles,s`
        :host {
          display: inline-block;
        }

        .holder {
          user-select: none;
        }

        .holder > * {
          vertical-align: middle;
        }

        .query {
          margin: 0 0.5rem;

          font-family: var(--font-family-code);
          font-size: 1.75rem;
        }

        risky-option {
          width: 10rem;
          height: 10rem;
        }
      `]}sendEvent(){this.dispatchEvent(new CustomEvent("risky-choice-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs},bubbles:!0}))}winChange(t){this.xw=parseFloat(t.detail.x),this.pw=parseFloat(t.detail.p),this.sendEvent()}sureChange(t){this.xs=parseFloat(t.detail.x),this.sendEvent()}render(){return W`
      <div class="holder">
        <risky-option class="gamble" ?interactive=${this.interactive} @risky-outcome-change=${this.winChange.bind(this)}>
          ${"choice"===this.state?W`
              <risky-outcome probability="${1-this.pw}" value="${this.xl}" name="loss"></risky-outcome>
              <risky-outcome ?interactive=${this.interactive} probability="${this.pw}" value="${this.xw}" name="win"></risky-outcome>`:""}
        </risky-option><span class="query"
         >${"choice"===this.state?"?":"fixation"===this.state?"+":W`∙`}</span
        ><risky-option class="sure" ?interactive=${this.interactive} @risky-outcome-change=${this.sureChange.bind(this)}>
          ${"choice"===this.state?W`
              <risky-outcome ?interactive=${this.interactive} probability="1" value="${this.xs}" name="sure"></risky-outcome>`:""}
        </risky-option>
      </div>`}}customElements.define("risky-choice",LP);class kP extends Sa{static get properties(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.duration=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.states=["resetted","iti","stimulus","ended"],this.state="resetted",this.range={},this.range.xl={start:0,stop:0,step:1},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:.1,stop:.9,step:.1},this.range.xs={start:5,stop:15,step:1},this.range.xl.values=bt(this.range.xl.start,this.range.xl.stop+.01,this.range.xl.step),this.range.xw.values=bt(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step),this.range.pw.values=bt(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step),this.range.xs.values=bt(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step),this.firstUpdate=!0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.trial=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.runner=void 0}static get styles(){return[super.styles,s`
        :host {
          display: inline-block;
        }
      `]}render(){return W`
      <div class="holder">
        <risky-choice state="${"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank"}" probability="${this.pw}" win="${this.xw}" loss="${this.xl}" sure="${this.xs}"></risky-choice>
      </div>`}update(t){super.update(t),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=Fr()-this.pauseTime,this.pauseTime=0),this.runner=function(t,e,n){var r=new Cr,i=e;return r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?Fr():+n,r._restart((function a(o){o+=i,r._restart(a,i+=e,n),t(o)}),e,n)},r.restart(t,e,n),r}(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=Fr())),this.firstUpdate=!1}reset(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}run(){const t=Fr(),e=this.baseTime?t-this.baseTime:0,n=this.baseTime?e-this.startTime:0;this.lastTime=e,"resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("risky-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&n>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=e,this.xl=this.range.xl.values[Math.floor(Math.random()*this.range.xl.values.length)],this.xw=this.range.xw.values[Math.floor(Math.random()*this.range.xw.values.length)],this.pw=this.range.pw.values[Math.floor(Math.random()*this.range.pw.values.length)],this.xs=this.range.xs.values[Math.floor(Math.random()*this.range.xs.values.length)],this.vDiff=this.xw*this.pw+this.xl*(1-this.pw)-this.xs,this.gamblePayoff=Math.random()<this.pw?this.xw:this.xl,this.surePayoff=this.xs,this.better=this.vDiff>0?"gamble":this.vDiff<0?"sure":"equal",this.dispatchEvent(new CustomEvent("risky-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0}))):"stimulus"===this.state&&n>=this.duration&&(this.dispatchEvent(new CustomEvent("risky-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("risky-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=e))}}customElements.define("risky-task",kP);class GP extends to{static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.p=.75,this.g=.5,this.alignState()}alignState(){this.w=$a.pg2w(this.p,this.g)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-pg2w-change",{detail:{p:this.p,g:this.g,w:this.w},bubbles:!0}))}pInput(t){this.p=parseFloat(t.target.value),this.alignState(),this.sendEvent()}gInput(t){this.g=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,e,n;this.numeric?(t=W`<decidables-spinner class="p bottom" ?disabled=${!this.interactive} min="0" max="1" step="0.01" .value="${this.p}" @input=${this.pInput.bind(this)}>
          <var class="math-var">p</var>
        </decidables-spinner>`,e=W`<decidables-spinner class="g bottom" ?disabled=${!this.interactive} min="0" max="1" step="0.01" .value="${this.g}" @input=${this.gInput.bind(this)}>
          <var class="math-var">γ</var>
        </decidables-spinner>`,n=W`<decidables-spinner class="w bottom" disabled min="0" max="1" step=".01" .value="${+this.w.toFixed(2)}">
          <var class="math-var">w</var>
        </decidables-spinner>`):(t=W`<var class="math-var p">p</var>`,e=W`<var class="math-var g">γ</var>`,n=W`<var class="math-var w">w</var>`);const r=W`
      <tr>
        <td rowspan="2">
          ${n}<span class="equals">=</span>
        </td>
        <td class="underline">
          ${t}<sup class="exp">${e}</sup>
        </td>
      </tr>
      <tr>
        <td>
          <span class="bracket tight">[</span>${t}<sup class="exp">${e}</sup><span class="plus">+</span><span class="paren tight">(</span>1<span class="minus">−</span>${t}<span class="paren tight">)</span><sup class="exp">${e}</sup><span class="bracket tight">]</span><sup class="exp">1/${e}</sup>
        </td>
      </tr>`;return W`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${r}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-pg2w",GP);class _P extends to{static get properties(){return{v:{attribute:"value",converter:Ua,reflect:!0},w:{attribute:"weight",converter:Ua,reflect:!0},n:{attribute:"outcomes",type:Number,reflect:!0},u:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.v=[10,0],this.w=[.75,.25],this.n=2,this.nMax=4,this.vMax=new Array(this.nMax).fill(0),this.wMax=new Array(this.nMax).fill(0),this.alignState()}alignState(){this.v=this.v.length<this.n?this.v.concat(this.vMax.slice(this.v.length,this.n)):this.v.length>this.n?this.v.slice(0,this.n):this.v,this.w=this.w.length<this.n?this.w.concat(this.wMax.slice(this.w.length,this.n)):this.w.length>this.n?this.w.slice(0,this.n):this.w,this.v.forEach(((t,e)=>{this.vMax[e]=t})),this.w.forEach(((t,e)=>{this.wMax[e]=t})),this.u=this.v.reduce(((t,e,n)=>t+e*this.w[n]),0)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-vw2u-change",{detail:{v:this.v,w:this.w,n:this.n,u:this.u},bubbles:!0}))}vInput(t,e){this.v[t]=parseFloat(e.target.value),this.alignState(),this.sendEvent()}wInput(t,e){this.w[t]=parseFloat(e.target.value),this.alignState(),this.sendEvent()}nInput(t){this.n=parseFloat(t.target.value),this.alignState(),this.sendEvent()}vTemplate(t="",e="",n=!1){let r;if(n){const n=Number.parseInt(t,10)-1;r=W`<decidables-spinner class="v" ?disabled=${!this.interactive} .value="${this.v[n]}" @input=${this.vInput.bind(this,n)}>
          <var class="math-var">v<sub class="subscript ${e}">${t}</sub></var>
        </decidables-spinner>`}else r=W`<var class="math-var v">v<sub class="subscript ${e}">${t}</sub></var>`;return r}wTemplate(t="",e="",n=!1){let r;if(n){const n=Number.parseInt(t,10)-1;r=W`<decidables-spinner class="w" ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${this.w[n]}" @input=${this.wInput.bind(this,n)}>
          <var class="math-var">w<sub class="subscript ${e}">${t}</sub></var>
        </decidables-spinner>`}else r=W`<var class="math-var w">w<sub class="subscript ${e}">${t}</sub></var>`;return r}willUpdate(){this.alignState()}render(){let t,e;this.numeric?(t=W`<decidables-spinner class="u" disabled .value="${+this.u.toFixed(3)}">
          <var class="math-var">U</var>
        </decidables-spinner>`,e=W`<decidables-spinner class="n" ?disabled=${!this.interactive} min="1" max="4" step="1" .value="${this.n}" @input=${this.nInput.bind(this)}>
          <var class="math-var">n</var>
        </decidables-spinner>`):(t=W`<var class="math-var u">U</var>`,e=W`<var class="math-var subscript">n</var>`);const n=W`
      <tr>
        <td>
          ${t}<span class="equals">=</span>
        </td>
        <td>
          <div class="summation">
            <span class="tight">${e}</span>
            <span class="tight"><var class="math-greek sigma">Σ</var></span>
            <span class="tight"><var class="math-var subscript tight">i</var><span class="equals subscript">=</span><span class="subscript tight">1</span></span>
          </div>
        </td>
        <td>
          ${this.vTemplate("i","math-var",!1)}&nbsp;${this.wTemplate("i","math-var",!1)}<span class="equals">=</span>
        </td>
        <td>
          ${this.numeric?Array(this.nMax).fill().map(((t,e)=>e<this.n?W`<span class="addend tight" ${qa({in:Wa,out:Wa})}>${0!==e?W`<span class="plus">+</span>`:W``}${this.vTemplate(e+1,"math-num",!0)}&nbsp;${this.wTemplate(e+1,"math-num",!0)}</span>`:null)):W`${this.vTemplate("1","math-num",!1)}&nbsp;${this.wTemplate("1","math-num",!1)}<span class="plus">+</span><span class="ellipsis">…</span><span class="plus">+</span>${this.vTemplate("n","math-var",!1)}&nbsp;${this.wTemplate("n","math-var",!1)}`}
        </td>
      </tr>`;return W`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${n}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-vw2u",_P);class RP extends to{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.x=10,this.a=.5,this.l=2,this.alignState()}alignState(){this.v=$a.xal2v(this.x,this.a,this.l)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-xal2v-change",{detail:{x:this.x,a:this.a,l:this.l,v:this.v},bubbles:!0}))}xInput(t){this.x=parseFloat(t.target.value),this.alignState(),this.sendEvent()}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}lInput(t){this.l=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,e,n,r;this.numeric?(t=W`<decidables-spinner class="x bottom" ?disabled=${!this.interactive} step="1" .value="${this.x}" @input=${this.xInput.bind(this)}>
          <var class="math-var">x</var>
        </decidables-spinner>`,e=W`<decidables-spinner class="a bottom" ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${this.a}" @input=${this.aInput.bind(this)}>
          <var class="math-var">α</var>
        </decidables-spinner>`,n=W`<decidables-spinner class="l bottom" ?disabled=${!this.interactive} min="0" step=".001" .value="${this.l}" @input=${this.lInput.bind(this)}>
          <var class="math-var">λ</var>
        </decidables-spinner>`,r=W`<decidables-spinner class="v bottom" disabled step=".001" .value="${+this.v.toFixed(3)}">
          <var class="math-var">v</var>
        </decidables-spinner>`):(t=W`<var class="math-var x">x</var>`,e=W`<var class="math-var a">α</var>`,n=W`<var class="math-var l">λ</var>`,r=W`<var class="math-var v">v</var>`);const i=W`
      <tr>
        <td rowspan="2">
          ${r}<span class="equals">=</span><span class="brace tight">{</span>
        </td>
        <td class="left">
          ${t}<sup class="exp">${e}</sup>,&emsp;if ${t}<span class="equals">&ge;</span>0
        </td>
      </tr>
      <tr>
        <td class="left">
          <span class="minus tight">−</span>${n}<span class="paren tight">(</span><span class="minus tight">−</span>${t}<span class="paren tight">)</span><sup class="exp">${e}</sup>,&emsp;if ${t}<span class="equals">&lt;</span>0
        </td>
      </tr>`;return W`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-xal2v",RP);class EP extends Sa{static get styles(){return[super.styles,s`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `]}render(){return W`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("cpt-example",EP);class TP extends EP{connectedCallback(){super.connectedCallback(),this.cptFit=this.querySelector("cpt-fit"),this.prospectableControl=this.querySelector("prospectable-control"),this.riskyTask=this.querySelector("risky-task"),this.prospectableResponse=this.querySelector("prospectable-response"),this.decisionSpace=this.querySelector("decision-space"),this.cptProbability=this.querySelector("cpt-probability"),this.cptValue=this.querySelector("cpt-value"),this.cptFit&&this.cptFit.addEventListener("cpt-fit-update",(t=>{this.cptProbability&&(this.cptProbability.g=t.detail.g),this.cptValue&&(this.cptValue.a=t.detail.a,this.cptValue.l=t.detail.l),this.decisionSpace&&(this.decisionSpace.a=t.detail.a,this.decisionSpace.l=t.detail.l,this.decisionSpace.g=t.detail.g)})),this.prospectableControl&&(this.prospectableControl.hasAttribute("trials")&&this.prospectableControl.addEventListener("prospectable-control-trials",(t=>{this.riskyTask&&(this.riskyTask.trials=t.detail.trials),this.prospectableResponse&&(this.prospectableResponse.trialTotal=t.detail.trials)})),this.prospectableControl.hasAttribute("duration")&&this.prospectableControl.addEventListener("prospectable-control-duration",(t=>{this.riskyTask&&(this.riskyTask.duration=t.detail.duration,this.riskyTask.iti=t.detail.duration)})),this.prospectableControl.hasAttribute("run")&&this.prospectableControl.addEventListener("prospectable-control-run",(()=>{this.riskyTask&&(this.riskyTask.running=!0)})),this.prospectableControl.hasAttribute("pause")&&this.prospectableControl.addEventListener("prospectable-control-pause",(()=>{this.riskyTask&&(this.riskyTask.running=!1)})),this.prospectableControl.hasAttribute("reset")&&this.prospectableControl.addEventListener("prospectable-control-reset",(()=>{this.riskyTask&&this.riskyTask.reset(),this.prospectableResponse&&this.prospectableResponse.reset(),this.decisionSpace&&this.decisionSpace.clear(),this.cptFit&&this.cptFit.clear()}))),this.riskyTask&&(this.prospectableResponse&&(this.prospectableResponse.trialTotal=this.riskyTask.trials),this.riskyTask.addEventListener("risky-trial-start",(t=>{this.prospectableResponse&&this.prospectableResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial)})),this.riskyTask.addEventListener("risky-trial-end",(()=>{this.prospectableResponse&&this.prospectableResponse.stop()})),this.riskyTask.addEventListener("risky-block-end",(()=>{this.prospectableControl&&this.prospectableControl.complete()}))),this.prospectableResponse&&this.prospectableResponse.addEventListener("prospectable-response",(t=>{this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString()),this.cptFit&&this.cptFit.set(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))}}customElements.define("cpt-example-human",TP);class MP extends EP{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptProbability=null,this.cptSpace=null,this.cptValue=null,this.riskyChoice=null,this.decisionSpace=null}connectedCallback(){super.connectedCallback(),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.riskyChoice=this.querySelector("risky-choice"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation&&this.cptCalculation.addEventListener("cpt-calculation-change",(t=>{this.a=t.detail.a,this.l=t.detail.l,this.g=t.detail.g,this.xl=t.detail.xl,this.xw=t.detail.xw,this.pw=t.detail.pw,this.xs=t.detail.xs})),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(t=>{this.g=t.detail.g,this.pw=t.detail.p})),this.cptProbability.set(this.pw,this.g,"default","")),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(t=>{this.a=t.detail.a,this.l=t.detail.l,"default"===t.detail.name?this.xs=t.detail.x:"gamble"===t.detail.name&&(this.xw=t.detail.x)})),this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.riskyChoice&&this.riskyChoice.addEventListener("risky-choice-change",(t=>{this.xl=t.detail.xl,this.xw=t.detail.xw,this.pw=t.detail.pw,this.xs=t.detail.xs})),this.requestUpdate()}update(t){super.update(t),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g,this.cptCalculation.xl=this.xl,this.cptCalculation.xw=this.xw,this.cptCalculation.pw=this.pw,this.cptCalculation.xs=this.xs),this.cptProbability&&this.cptProbability.set(this.pw,this.g,"default",""),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g,this.cptSpace.xl=this.xl,this.cptSpace.xw=this.xw,this.cptSpace.pw=this.pw,this.cptSpace.xs=this.xs),this.cptValue&&(this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.riskyChoice&&(this.riskyChoice.xl=this.xl,this.riskyChoice.xw=this.xw,this.riskyChoice.pw=this.pw,this.riskyChoice.xs=this.xs),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g,this.decisionSpace.xl=this.xl,this.decisionSpace.xw=this.xw,this.decisionSpace.pw=this.pw,this.decisionSpace.xs=this.xs)}}customElements.define("cpt-example-interactive",MP);class NP extends EP{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptProbability=null,this.cptValue=null,this.prospectableControl=null,this.prospectableResponse=null,this.decisionSpace=null,this.riskyTask=null}connectedCallback(){super.connectedCallback(),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptValue=this.querySelector("cpt-value"),this.prospectableControl=this.querySelector("prospectable-control"),this.prospectableResponse=this.querySelector("prospectable-response"),this.decisionSpace=this.querySelector("decision-space"),this.riskyTask=this.querySelector("risky-task"),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(t=>{this.g=t.detail.g})),this.cptProbability.addEventListener("prospectable-response",(t=>{this.prospectableResponse&&this.prospectableResponse.responded(t.detail.response),this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(t=>{this.a=t.detail.a,this.l=t.detail.l})),this.cptProbability||this.cptValue.addEventListener("prospectable-response",(t=>{this.prospectableResponse&&this.prospectableResponse.responded(t.detail.response),this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))),this.prospectableControl&&(this.prospectableControl.hasAttribute("trials")&&this.prospectableControl.addEventListener("prospectable-control-trials",(t=>{this.riskyTask&&(this.riskyTask.trials=t.detail.trials),this.prospectableResponse&&(this.prospectableResponse.trialTotal=t.detail.trials)})),this.prospectableControl.hasAttribute("duration")&&this.prospectableControl.addEventListener("prospectable-control-duration",(t=>{this.riskyTask&&(this.riskyTask.duration=t.detail.duration,this.riskyTask.iti=t.detail.duration)})),this.prospectableControl.hasAttribute("run")&&this.prospectableControl.addEventListener("prospectable-control-run",(()=>{this.cptProbability&&this.cptProbability.resumeTrial(),this.cptValue&&this.cptValue.resumeTrial(),this.riskyTask&&(this.riskyTask.running=!0)})),this.prospectableControl.hasAttribute("pause")&&this.prospectableControl.addEventListener("prospectable-control-pause",(()=>{this.cptProbability&&this.cptProbability.pauseTrial(),this.cptValue&&this.cptValue.pauseTrial(),this.riskyTask&&(this.riskyTask.running=!1)})),this.prospectableControl.hasAttribute("reset")&&this.prospectableControl.addEventListener("prospectable-control-reset",(()=>{this.cptProbability&&this.cptProbability.clear(),this.cptValue&&this.cptValue.clear(),this.riskyTask&&this.riskyTask.reset(),this.prospectableResponse&&this.prospectableResponse.reset(),this.decisionSpace&&this.decisionSpace.clear()}))),this.riskyTask&&(this.prospectableResponse&&(this.prospectableResponse.trialTotal=this.riskyTask.trials),this.riskyTask.addEventListener("risky-trial-start",(t=>{this.prospectableResponse&&this.prospectableResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial),this.vw=$a.xal2v(this.xw,this.a,this.l),this.vl=$a.xal2v(this.xl,this.a,this.l),this.ww=$a.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=$a.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs;const e=$a.xal2v(t.detail.xw,this.a,this.l)*$a.pg2w(t.detail.pw,this.g)+$a.xal2v(t.detail.xl,this.a,this.l)*(1-$a.pg2w(t.detail.pw,this.g))>$a.xal2v(t.detail.xs,this.a,this.l)?"gamble":"sure";this.cptProbability&&this.cptProbability.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,e),this.cptValue&&this.cptValue.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,e)})),this.riskyTask.addEventListener("risky-trial-end",(()=>{this.prospectableResponse&&this.prospectableResponse.stop()})),this.riskyTask.addEventListener("risky-block-end",(()=>{this.prospectableControl&&this.prospectableControl.complete()}))),this.requestUpdate()}update(t){super.update(t),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g),this.cptProbability&&(this.cptProbability.g=this.g),this.cptValue&&(this.cptValue.a=this.a,this.cptValue.l=this.l),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g)}}customElements.define("cpt-example-model",NP);export{eo as CPTCalculation,GP as CPTEquationPG2W,_P as CPTEquationVW2U,RP as CPTEquationXAL2V,TP as CPTExampleHuman,MP as CPTExampleInteractive,NP as CPTExampleModel,GY as CPTFit,_Y as CPTProbability,FP as CPTSpace,QP as CPTValue,CP as DecisionSpace,wP as ProspectableControl,Sa as ProspectableElement,UP as ProspectableResponse,LP as RiskyChoice,AP as RiskyOption,SP as RiskyOutcome,kP as RiskyTask};
//# sourceMappingURL=prospectableElements.esm.min.js.map
