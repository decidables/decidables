function t(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(i){if("default"!==i&&!(i in t)){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}))})),Object.freeze(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e=globalThis,i=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n=Symbol(),r=new WeakMap;let a=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==n)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(i&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=r.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&r.set(e,t))}return t}toString(){return this.cssText}};const s=t=>new a("string"==typeof t?t:t+"",void 0,n),o=(t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[n+1]),t[0]);return new a(i,t,n)},l=i?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return s(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:c,defineProperty:g,getOwnPropertyDescriptor:u,getOwnPropertyNames:d,getOwnPropertySymbols:h,getPrototypeOf:B}=Object,p=globalThis,F=p.trustedTypes,f=F?F.emptyScript:"",Q=p.reactiveElementPolyfillSupport,I=(t,e)=>t,U={toAttribute(t,e){switch(e){case Boolean:t=t?f:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},b=(t,e)=>!c(t,e),y={attribute:!0,type:String,converter:U,reflect:!1,hasChanged:b};Symbol.metadata??=Symbol("metadata"),p.litPropertyMetadata??=new WeakMap;let m=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=y){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),n=this.getPropertyDescriptor(t,i,e);void 0!==n&&g(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){const{get:n,set:r}=u(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return n?.call(this)},set(e){const a=n?.call(this);r.call(this,e),this.requestUpdate(t,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??y}static _$Ei(){if(this.hasOwnProperty(I("elementProperties")))return;const t=B(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(I("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(I("properties"))){const t=this.properties,e=[...d(t),...h(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(l(t))}else void 0!==t&&e.push(l(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,n)=>{if(i)t.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const i of n){const n=document.createElement("style"),r=e.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=i.cssText,t.appendChild(n)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){const i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(void 0!==n&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:U).toAttribute(e,i.type);this._$Em=t,null==r?this.removeAttribute(n):this.setAttribute(n,r),this._$Em=null}}_$AK(t,e){const i=this.constructor,n=i._$Eh.get(t);if(void 0!==n&&this._$Em!==n){const t=i.getPropertyOptions(n),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:U;this._$Em=n,this[n]=r.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??b)(this[t],e))return;this.P(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,i){this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t)!0!==i.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],i)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}};m.elementStyles=[],m.shadowRootOptions={mode:"open"},m[I("elementProperties")]=new Map,m[I("finalized")]=new Map,Q?.({ReactiveElement:m}),(p.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const x=globalThis,v=x.trustedTypes,C=v?v.createPolicy("lit-html",{createHTML:t=>t}):void 0,A="$lit$",L=`lit$${Math.random().toFixed(9).slice(2)}$`,G="?"+L,R=`<${G}>`,S=document,w=()=>S.createComment(""),V=t=>null===t||"object"!=typeof t&&"function"!=typeof t,E=Array.isArray,Z="[ \t\n\f\r]",N=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,D=/-->/g,X=/>/g,H=RegExp(`>|${Z}(?:([^\\s"'>=/]+)(${Z}*=${Z}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),W=/'/g,k=/"/g,M=/^(?:script|style|textarea|title)$/i,T=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),Y=T(1),J=T(2),_=Symbol.for("lit-noChange"),z=Symbol.for("lit-nothing"),O=new WeakMap,K=S.createTreeWalker(S,129);function P(t,e){if(!E(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==C?C.createHTML(e):e}let j=class t{constructor({strings:e,_$litType$:i},n){let r;this.parts=[];let a=0,s=0;const o=e.length-1,l=this.parts,[c,g]=((t,e)=>{const i=t.length-1,n=[];let r,a=2===e?"<svg>":3===e?"<math>":"",s=N;for(let e=0;e<i;e++){const i=t[e];let o,l,c=-1,g=0;for(;g<i.length&&(s.lastIndex=g,l=s.exec(i),null!==l);)g=s.lastIndex,s===N?"!--"===l[1]?s=D:void 0!==l[1]?s=X:void 0!==l[2]?(M.test(l[2])&&(r=RegExp("</"+l[2],"g")),s=H):void 0!==l[3]&&(s=H):s===H?">"===l[0]?(s=r??N,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,o=l[1],s=void 0===l[3]?H:'"'===l[3]?k:W):s===k||s===W?s=H:s===D||s===X?s=N:(s=H,r=void 0);const u=s===H&&t[e+1].startsWith("/>")?" ":"";a+=s===N?i+R:c>=0?(n.push(o),i.slice(0,c)+A+i.slice(c)+L+u):i+L+(-2===c?e:u)}return[P(t,a+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),n]})(e,i);if(this.el=t.createElement(c,n),K.currentNode=this.el.content,2===i||3===i){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=K.nextNode())&&l.length<o;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(A)){const e=g[s++],i=r.getAttribute(t).split(L),n=/([.?@])?(.*)/.exec(e);l.push({type:1,index:a,name:n[2],strings:i,ctor:"."===n[1]?it:"?"===n[1]?nt:"@"===n[1]?rt:et}),r.removeAttribute(t)}else t.startsWith(L)&&(l.push({type:6,index:a}),r.removeAttribute(t));if(M.test(r.tagName)){const t=r.textContent.split(L),e=t.length-1;if(e>0){r.textContent=v?v.emptyScript:"";for(let i=0;i<e;i++)r.append(t[i],w()),K.nextNode(),l.push({type:2,index:++a});r.append(t[e],w())}}}else if(8===r.nodeType)if(r.data===G)l.push({type:2,index:a});else{let t=-1;for(;-1!==(t=r.data.indexOf(L,t+1));)l.push({type:7,index:a}),t+=L.length-1}a++}}static createElement(t,e){const i=S.createElement("template");return i.innerHTML=t,i}};function q(t,e,i=t,n){if(e===_)return e;let r=void 0!==n?i._$Co?.[n]:i._$Cl;const a=V(e)?void 0:e._$litDirective$;return r?.constructor!==a&&(r?._$AO?.(!1),void 0===a?r=void 0:(r=new a(t),r._$AT(t,i,n)),void 0!==n?(i._$Co??=[])[n]=r:i._$Cl=r),void 0!==r&&(e=q(t,r._$AS(t,e.values),r,n)),e}let $=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,n=(t?.creationScope??S).importNode(e,!0);K.currentNode=n;let r=K.nextNode(),a=0,s=0,o=i[0];for(;void 0!==o;){if(a===o.index){let e;2===o.type?e=new tt(r,r.nextSibling,this,t):1===o.type?e=new o.ctor(r,o.name,o.strings,this,t):6===o.type&&(e=new at(r,this,t)),this._$AV.push(e),o=i[++s]}a!==o?.index&&(r=K.nextNode(),a++)}return K.currentNode=S,n}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}},tt=class t{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,n){this.type=2,this._$AH=z,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=q(this,t,e),V(t)?t===z||null==t||""===t?(this._$AH!==z&&this._$AR(),this._$AH=z):t!==this._$AH&&t!==_&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>E(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==z&&V(this._$AH)?this._$AA.nextSibling.data=t:this.T(S.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,n="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=j.createElement(P(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(e);else{const t=new $(n,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=O.get(t.strings);return void 0===e&&O.set(t.strings,e=new j(t)),e}k(e){E(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let n,r=0;for(const a of e)r===i.length?i.push(n=new t(this.O(w()),this.O(w()),this,this.options)):n=i[r],n._$AI(a),r++;r<i.length&&(this._$AR(n&&n._$AB.nextSibling,r),i.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}},et=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,n,r){this.type=1,this._$AH=z,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=z}_$AI(t,e=this,i,n){const r=this.strings;let a=!1;if(void 0===r)t=q(this,t,e,0),a=!V(t)||t!==this._$AH&&t!==_,a&&(this._$AH=t);else{const n=t;let s,o;for(t=r[0],s=0;s<r.length-1;s++)o=q(this,n[i+s],e,s),o===_&&(o=this._$AH[s]),a||=!V(o)||o!==this._$AH[s],o===z?t=z:t!==z&&(t+=(o??"")+r[s+1]),this._$AH[s]=o}a&&!n&&this.j(t)}j(t){t===z?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},it=class extends et{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===z?void 0:t}},nt=class extends et{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==z)}},rt=class extends et{constructor(t,e,i,n,r){super(t,e,i,n,r),this.type=5}_$AI(t,e=this){if((t=q(this,t,e,0)??z)===_)return;const i=this._$AH,n=t===z&&i!==z||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,r=t!==z&&(i===z||n);n&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}};class at{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){q(this,t)}}const st=x.litHtmlPolyfillSupport;st?.(j,tt),(x.litHtmlVersions??=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let ot=class extends m{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,i)=>{const n=i?.renderBefore??e;let r=n._$litPart$;if(void 0===r){const t=i?.renderBefore??null;n._$litPart$=r=new tt(e.insertBefore(w(),t),t,void 0,i??{})}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return _}};ot._$litElement$=!0,ot.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:ot});const lt=globalThis.litElementPolyfillSupport;function ct(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ut(t){let e,i,n;function r(t,n,r=0,a=t.length){if(r<a){if(0!==e(n,n))return a;do{const e=r+a>>>1;i(t[e],n)<0?r=e+1:a=e}while(r<a)}return r}return 2!==t.length?(e=ct,i=(e,i)=>ct(t(e),i),n=(e,i)=>t(e)-i):(e=t===ct||t===gt?t:dt,i=t,n=t),{left:r,center:function(t,e,i=0,a=t.length){const s=r(t,e,i,a-1);return s>i&&n(t[s-1],e)>-n(t[s],e)?s-1:s},right:function(t,n,r=0,a=t.length){if(r<a){if(0!==e(n,n))return a;do{const e=r+a>>>1;i(t[e],n)<=0?r=e+1:a=e}while(r<a)}return r}}}function dt(){return 0}lt?.({LitElement:ot}),(globalThis.litElementVersions??=[]).push("4.1.1");const ht=ut(ct).right;ut((function(t){return null===t?NaN:+t})).center;const Bt=Math.sqrt(50),pt=Math.sqrt(10),Ft=Math.sqrt(2);function ft(t,e,i){const n=(e-t)/Math.max(0,i),r=Math.floor(Math.log10(n)),a=n/Math.pow(10,r),s=a>=Bt?10:a>=pt?5:a>=Ft?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/s,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*s,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=i&&i<2?ft(t,e,2*i):[o,l,c]}function Qt(t,e,i){return ft(t=+t,e=+e,i=+i)[2]}function It(t,e,i){t=+t,e=+e,i=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+i;for(var n=-1,r=0|Math.max(0,Math.ceil((e-t)/i)),a=new Array(r);++n<r;)a[n]=t+n*i;return a}function Ut(t){return t}var bt=1,yt=2,mt=3,xt=4,vt=1e-6;function Ct(t){return"translate("+t+",0)"}function At(t){return"translate(0,"+t+")"}function Lt(t){return e=>+t(e)}function Gt(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),i=>+t(i)+e}function Rt(){return!this.__axis}function St(t,e){var i=[],n=null,r=null,a=6,s=6,o=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===bt||t===xt?-1:1,g=t===xt||t===yt?"x":"y",u=t===bt||t===mt?Ct:At;function d(d){var h=null==n?e.ticks?e.ticks.apply(e,i):e.domain():n,B=null==r?e.tickFormat?e.tickFormat.apply(e,i):Ut:r,p=Math.max(a,0)+o,F=e.range(),f=+F[0]+l,Q=+F[F.length-1]+l,I=(e.bandwidth?Gt:Lt)(e.copy(),l),U=d.selection?d.selection():d,b=U.selectAll(".domain").data([null]),y=U.selectAll(".tick").data(h,e).order(),m=y.exit(),x=y.enter().append("g").attr("class","tick"),v=y.select("line"),C=y.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),y=y.merge(x),v=v.merge(x.append("line").attr("stroke","currentColor").attr(g+"2",c*a)),C=C.merge(x.append("text").attr("fill","currentColor").attr(g,c*p).attr("dy",t===bt?"0em":t===mt?"0.71em":"0.32em")),d!==U&&(b=b.transition(d),y=y.transition(d),v=v.transition(d),C=C.transition(d),m=m.transition(d).attr("opacity",vt).attr("transform",(function(t){return isFinite(t=I(t))?u(t+l):this.getAttribute("transform")})),x.attr("opacity",vt).attr("transform",(function(t){var e=this.parentNode.__axis;return u((e&&isFinite(e=e(t))?e:I(t))+l)}))),m.remove(),b.attr("d",t===xt||t===yt?s?"M"+c*s+","+f+"H"+l+"V"+Q+"H"+c*s:"M"+l+","+f+"V"+Q:s?"M"+f+","+c*s+"V"+l+"H"+Q+"V"+c*s:"M"+f+","+l+"H"+Q),y.attr("opacity",1).attr("transform",(function(t){return u(I(t)+l)})),v.attr(g+"2",c*a),C.attr(g,c*p).text(B),U.filter(Rt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===yt?"start":t===xt?"end":"middle"),U.each((function(){this.__axis=I}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return i=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(i=null==t?[]:Array.from(t),d):i.slice()},d.tickValues=function(t){return arguments.length?(n=null==t?null:Array.from(t),d):n&&n.slice()},d.tickFormat=function(t){return arguments.length?(r=t,d):r},d.tickSize=function(t){return arguments.length?(a=s=+t,d):a},d.tickSizeInner=function(t){return arguments.length?(a=+t,d):a},d.tickSizeOuter=function(t){return arguments.length?(s=+t,d):s},d.tickPadding=function(t){return arguments.length?(o=+t,d):o},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function wt(t){return St(mt,t)}function Vt(t){return St(xt,t)}var Et={value:()=>{}};function Zt(){for(var t,e=0,i=arguments.length,n={};e<i;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Nt(n)}function Nt(t){this._=t}function Dt(t,e){for(var i,n=0,r=t.length;n<r;++n)if((i=t[n]).name===e)return i.value}function Xt(t,e,i){for(var n=0,r=t.length;n<r;++n)if(t[n].name===e){t[n]=Et,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=i&&t.push({name:e,value:i}),t}Nt.prototype=Zt.prototype={constructor:Nt,on:function(t,e){var i,n,r=this._,a=(n=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,o=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=a[s]).type)r[i]=Xt(r[i],t.name,e);else if(null==e)for(i in r)r[i]=Xt(r[i],t.name,null);return this}for(;++s<o;)if((i=(t=a[s]).type)&&(i=Dt(r[i],t.name)))return i},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new Nt(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,n,r=new Array(i),a=0;a<i;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,i=(n=this._[t]).length;a<i;++a)n[a].value.apply(e,r)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,a=n.length;r<a;++r)n[r].value.apply(e,i)}};var Ht="http://www.w3.org/1999/xhtml",Wt={svg:"http://www.w3.org/2000/svg",xhtml:Ht,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kt(t){var e=t+="",i=e.indexOf(":");return i>=0&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),Wt.hasOwnProperty(e)?{space:Wt[e],local:t}:t}function Mt(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===Ht&&e.documentElement.namespaceURI===Ht?e.createElement(t):e.createElementNS(i,t)}}function Tt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Yt(t){var e=kt(t);return(e.local?Tt:Mt)(e)}function Jt(){}function _t(t){return null==t?Jt:function(){return this.querySelector(t)}}function zt(){return[]}function Ot(t){return null==t?zt:function(){return this.querySelectorAll(t)}}function Kt(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function Pt(t){return function(){return this.matches(t)}}function jt(t){return function(e){return e.matches(t)}}var qt=Array.prototype.find;function $t(){return this.firstElementChild}var te=Array.prototype.filter;function ee(){return Array.from(this.children)}function ie(t){return new Array(t.length)}function ne(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function re(t,e,i,n,r,a){for(var s,o=0,l=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],n[o]=s):i[o]=new ne(t,a[o]);for(;o<l;++o)(s=e[o])&&(r[o]=s)}function ae(t,e,i,n,r,a,s){var o,l,c,g=new Map,u=e.length,d=a.length,h=new Array(u);for(o=0;o<u;++o)(l=e[o])&&(h[o]=c=s.call(l,l.__data__,o,e)+"",g.has(c)?r[o]=l:g.set(c,l));for(o=0;o<d;++o)c=s.call(t,a[o],o,a)+"",(l=g.get(c))?(n[o]=l,l.__data__=a[o],g.delete(c)):i[o]=new ne(t,a[o]);for(o=0;o<u;++o)(l=e[o])&&g.get(h[o])===l&&(r[o]=l)}function se(t){return t.__data__}function oe(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function le(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ce(t){return function(){this.removeAttribute(t)}}function ge(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ue(t,e){return function(){this.setAttribute(t,e)}}function de(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function he(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}function Be(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function pe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Fe(t){return function(){this.style.removeProperty(t)}}function fe(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Qe(t,e,i){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function Ie(t,e){return t.style.getPropertyValue(e)||pe(t).getComputedStyle(t,null).getPropertyValue(e)}function Ue(t){return function(){delete this[t]}}function be(t,e){return function(){this[t]=e}}function ye(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}function me(t){return t.trim().split(/^|\s+/)}function xe(t){return t.classList||new ve(t)}function ve(t){this._node=t,this._names=me(t.getAttribute("class")||"")}function Ce(t,e){for(var i=xe(t),n=-1,r=e.length;++n<r;)i.add(e[n])}function Ae(t,e){for(var i=xe(t),n=-1,r=e.length;++n<r;)i.remove(e[n])}function Le(t){return function(){Ce(this,t)}}function Ge(t){return function(){Ae(this,t)}}function Re(t,e){return function(){(e.apply(this,arguments)?Ce:Ae)(this,t)}}function Se(){this.textContent=""}function we(t){return function(){this.textContent=t}}function Ve(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ee(){this.innerHTML=""}function Ze(t){return function(){this.innerHTML=t}}function Ne(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function De(){this.nextSibling&&this.parentNode.appendChild(this)}function Xe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function He(){return null}function We(){var t=this.parentNode;t&&t.removeChild(this)}function ke(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Me(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Te(t){return function(){var e=this.__on;if(e){for(var i,n=0,r=-1,a=e.length;n<a;++n)i=e[n],t.type&&i.type!==t.type||i.name!==t.name?e[++r]=i:this.removeEventListener(i.type,i.listener,i.options);++r?e.length=r:delete this.__on}}}function Ye(t,e,i){return function(){var n,r=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,o=r.length;s<o;++s)if((n=r[s]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=i),void(n.value=e);this.addEventListener(t.type,a,i),n={type:t.type,name:t.name,value:e,listener:a,options:i},r?r.push(n):this.__on=[n]}}function Je(t,e,i){var n=pe(t),r=n.CustomEvent;"function"==typeof r?r=new r(e,i):(r=n.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function _e(t,e){return function(){return Je(this,t,e)}}function ze(t,e){return function(){return Je(this,t,e.apply(this,arguments))}}ne.prototype={constructor:ne,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ve.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Oe=[null];function Ke(t,e){this._groups=t,this._parents=e}function Pe(){return new Ke([[document.documentElement]],Oe)}function je(t){return"string"==typeof t?new Ke([[document.querySelector(t)]],[document.documentElement]):new Ke([[t]],Oe)}function qe(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}Ke.prototype=Pe.prototype={constructor:Ke,select:function(t){"function"!=typeof t&&(t=_t(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var a,s,o=e[r],l=o.length,c=n[r]=new Array(l),g=0;g<l;++g)(a=o[g])&&(s=t.call(a,a.__data__,g,o))&&("__data__"in a&&(s.__data__=a.__data__),c[g]=s);return new Ke(n,this._parents)},selectAll:function(t){t="function"==typeof t?Kt(t):Ot(t);for(var e=this._groups,i=e.length,n=[],r=[],a=0;a<i;++a)for(var s,o=e[a],l=o.length,c=0;c<l;++c)(s=o[c])&&(n.push(t.call(s,s.__data__,c,o)),r.push(s));return new Ke(n,r)},selectChild:function(t){return this.select(null==t?$t:function(t){return function(){return qt.call(this.children,t)}}("function"==typeof t?t:jt(t)))},selectChildren:function(t){return this.selectAll(null==t?ee:function(t){return function(){return te.call(this.children,t)}}("function"==typeof t?t:jt(t)))},filter:function(t){"function"!=typeof t&&(t=Pt(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var a,s=e[r],o=s.length,l=n[r]=[],c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new Ke(n,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,se);var i=e?ae:re,n=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=r.length,s=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var g=n[c],u=r[c],d=u.length,h=oe(t.call(g,g&&g.__data__,c,n)),B=h.length,p=o[c]=new Array(B),F=s[c]=new Array(B);i(g,u,p,F,l[c]=new Array(d),h,e);for(var f,Q,I=0,U=0;I<B;++I)if(f=p[I]){for(I>=U&&(U=I+1);!(Q=F[U])&&++U<B;);f._next=Q||null}}return(s=new Ke(s,n))._enter=o,s._exit=l,s},enter:function(){return new Ke(this._enter||this._groups.map(ie),this._parents)},exit:function(){return new Ke(this._exit||this._groups.map(ie),this._parents)},join:function(t,e,i){var n=this.enter(),r=this,a=this.exit();return"function"==typeof t?(n=t(n))&&(n=n.selection()):n=n.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==i?a.remove():i(a),n&&r?n.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,i=this._groups,n=e._groups,r=i.length,a=n.length,s=Math.min(r,a),o=new Array(r),l=0;l<s;++l)for(var c,g=i[l],u=n[l],d=g.length,h=o[l]=new Array(d),B=0;B<d;++B)(c=g[B]||u[B])&&(h[B]=c);for(;l<r;++l)o[l]=i[l];return new Ke(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,r=t[e],a=r.length-1,s=r[a];--a>=0;)(n=r[a])&&(s&&4^n.compareDocumentPosition(s)&&s.parentNode.insertBefore(n,s),s=n);return this},sort:function(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=le);for(var i=this._groups,n=i.length,r=new Array(n),a=0;a<n;++a){for(var s,o=i[a],l=o.length,c=r[a]=new Array(l),g=0;g<l;++g)(s=o[g])&&(c[g]=s);c.sort(e)}return new Ke(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,a=n.length;r<a;++r){var s=n[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var r,a=e[i],s=0,o=a.length;s<o;++s)(r=a[s])&&t.call(r,r.__data__,s,a);return this},attr:function(t,e){var i=kt(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==e?i.local?ge:ce:"function"==typeof e?i.local?Be:he:i.local?de:ue)(i,e))},style:function(t,e,i){return arguments.length>1?this.each((null==e?Fe:"function"==typeof e?Qe:fe)(t,e,null==i?"":i)):Ie(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ue:"function"==typeof e?ye:be)(t,e)):this.node()[t]},classed:function(t,e){var i=me(t+"");if(arguments.length<2){for(var n=xe(this.node()),r=-1,a=i.length;++r<a;)if(!n.contains(i[r]))return!1;return!0}return this.each(("function"==typeof e?Re:e?Le:Ge)(i,e))},text:function(t){return arguments.length?this.each(null==t?Se:("function"==typeof t?Ve:we)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ee:("function"==typeof t?Ne:Ze)(t)):this.node().innerHTML},raise:function(){return this.each(De)},lower:function(){return this.each(Xe)},append:function(t){var e="function"==typeof t?t:Yt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var i="function"==typeof t?t:Yt(t),n=null==e?He:"function"==typeof e?e:_t(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(We)},clone:function(t){return this.select(t?Me:ke)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,i){var n,r,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}))}(t+""),s=a.length;if(!(arguments.length<2)){for(o=e?Ye:Te,n=0;n<s;++n)this.each(o(a[n],e,i));return this}var o=this.node().__on;if(o)for(var l,c=0,g=o.length;c<g;++c)for(n=0,l=o[c];n<s;++n)if((r=a[n]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?ze:_e)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n,r=t[e],a=0,s=r.length;a<s;++a)(n=r[a])&&(yield n)}};const $e={passive:!1},ti={capture:!0,passive:!1};function ei(t){t.stopImmediatePropagation()}function ii(t){t.preventDefault(),t.stopImmediatePropagation()}var ni=t=>()=>t;function ri(t,{sourceEvent:e,subject:i,target:n,identifier:r,active:a,x:s,y:o,dx:l,dy:c,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:g}})}function ai(t){return!t.ctrlKey&&!t.button}function si(){return this.parentNode}function oi(t,e){return null==e?{x:t.x,y:t.y}:e}function li(){return navigator.maxTouchPoints||"ontouchstart"in this}function ci(){var t,e,i,n,r=ai,a=si,s=oi,o=li,l={},c=Zt("start","drag","end"),g=0,u=0;function d(t){t.on("mousedown.drag",h).filter(o).on("touchstart.drag",F).on("touchmove.drag",f,$e).on("touchend.drag touchcancel.drag",Q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(s,o){if(!n&&r.call(this,s,o)){var l=I(this,a.call(this,s,o),s,o,"mouse");l&&(je(s.view).on("mousemove.drag",B,ti).on("mouseup.drag",p,ti),function(t){var e=t.document.documentElement,i=je(t).on("dragstart.drag",ii,ti);"onselectstart"in e?i.on("selectstart.drag",ii,ti):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(s.view),ei(s),i=!1,t=s.clientX,e=s.clientY,l("start",s))}}function B(n){if(ii(n),!i){var r=n.clientX-t,a=n.clientY-e;i=r*r+a*a>u}l.mouse("drag",n)}function p(t){je(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var i=t.document.documentElement,n=je(t).on("dragstart.drag",null);e&&(n.on("click.drag",ii,ti),setTimeout((function(){n.on("click.drag",null)}),0)),"onselectstart"in i?n.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}(t.view,i),ii(t),l.mouse("end",t)}function F(t,e){if(r.call(this,t,e)){var i,n,s=t.changedTouches,o=a.call(this,t,e),l=s.length;for(i=0;i<l;++i)(n=I(this,o,t,e,s[i].identifier,s[i]))&&(ei(t),n("start",t,s[i]))}}function f(t){var e,i,n=t.changedTouches,r=n.length;for(e=0;e<r;++e)(i=l[n[e].identifier])&&(ii(t),i("drag",t,n[e]))}function Q(t){var e,i,r=t.changedTouches,a=r.length;for(n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),e=0;e<a;++e)(i=l[r[e].identifier])&&(ei(t),i("end",t,r[e]))}function I(t,e,i,n,r,a){var o,u,h,B=c.copy(),p=qe(a||i,e);if(null!=(h=s.call(t,new ri("beforestart",{sourceEvent:i,target:d,identifier:r,active:g,x:p[0],y:p[1],dx:0,dy:0,dispatch:B}),n)))return o=h.x-p[0]||0,u=h.y-p[1]||0,function i(a,s,c){var F,f=p;switch(a){case"start":l[r]=i,F=g++;break;case"end":delete l[r],--g;case"drag":p=qe(c||s,e),F=g}B.call(a,t,new ri(a,{sourceEvent:s,subject:h,target:d,identifier:r,active:F,x:p[0]+o,y:p[1]+u,dx:p[0]-f[0],dy:p[1]-f[1],dispatch:B}),n)}}return d.filter=function(t){return arguments.length?(r="function"==typeof t?t:ni(!!t),d):r},d.container=function(t){return arguments.length?(a="function"==typeof t?t:ni(t),d):a},d.subject=function(t){return arguments.length?(s="function"==typeof t?t:ni(t),d):s},d.touchable=function(t){return arguments.length?(o="function"==typeof t?t:ni(!!t),d):o},d.on=function(){var t=c.on.apply(c,arguments);return t===c?d:t},d.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,d):Math.sqrt(u)},d}function gi(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function ui(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function di(){}ri.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var hi=.7,Bi=1/hi,pi="\\s*([+-]?\\d+)\\s*",Fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qi=/^#([0-9a-f]{3,8})$/,Ii=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),Ui=new RegExp(`^rgb\\(${fi},${fi},${fi}\\)$`),bi=new RegExp(`^rgba\\(${pi},${pi},${pi},${Fi}\\)$`),yi=new RegExp(`^rgba\\(${fi},${fi},${fi},${Fi}\\)$`),mi=new RegExp(`^hsl\\(${Fi},${fi},${fi}\\)$`),xi=new RegExp(`^hsla\\(${Fi},${fi},${fi},${Fi}\\)$`),vi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ci(){return this.rgb().formatHex()}function Ai(){return this.rgb().formatRgb()}function Li(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Qi.exec(t))?(i=e[1].length,e=parseInt(e[1],16),6===i?Gi(e):3===i?new wi(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===i?Ri(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===i?Ri(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ii.exec(t))?new wi(e[1],e[2],e[3],1):(e=Ui.exec(t))?new wi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=bi.exec(t))?Ri(e[1],e[2],e[3],e[4]):(e=yi.exec(t))?Ri(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=mi.exec(t))?Xi(e[1],e[2]/100,e[3]/100,1):(e=xi.exec(t))?Xi(e[1],e[2]/100,e[3]/100,e[4]):vi.hasOwnProperty(t)?Gi(vi[t]):"transparent"===t?new wi(NaN,NaN,NaN,0):null}function Gi(t){return new wi(t>>16&255,t>>8&255,255&t,1)}function Ri(t,e,i,n){return n<=0&&(t=e=i=NaN),new wi(t,e,i,n)}function Si(t,e,i,n){return 1===arguments.length?function(t){return t instanceof di||(t=Li(t)),t?new wi((t=t.rgb()).r,t.g,t.b,t.opacity):new wi}(t):new wi(t,e,i,null==n?1:n)}function wi(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function Vi(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}`}function Ei(){const t=Zi(this.opacity);return`${1===t?"rgb(":"rgba("}${Ni(this.r)}, ${Ni(this.g)}, ${Ni(this.b)}${1===t?")":`, ${t})`}`}function Zi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ni(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Di(t){return((t=Ni(t))<16?"0":"")+t.toString(16)}function Xi(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new Wi(t,e,i,n)}function Hi(t){if(t instanceof Wi)return new Wi(t.h,t.s,t.l,t.opacity);if(t instanceof di||(t=Li(t)),!t)return new Wi;if(t instanceof Wi)return t;var e=(t=t.rgb()).r/255,i=t.g/255,n=t.b/255,r=Math.min(e,i,n),a=Math.max(e,i,n),s=NaN,o=a-r,l=(a+r)/2;return o?(s=e===a?(i-n)/o+6*(i<n):i===a?(n-e)/o+2:(e-i)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new Wi(s,o,l,t.opacity)}function Wi(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function ki(t){return(t=(t||0)%360)<0?t+360:t}function Mi(t){return Math.max(0,Math.min(1,t||0))}function Ti(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}gi(di,Li,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ci,formatHex:Ci,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Hi(this).formatHsl()},formatRgb:Ai,toString:Ai}),gi(wi,Si,ui(di,{brighter(t){return t=null==t?Bi:Math.pow(Bi,t),new wi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?hi:Math.pow(hi,t),new wi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new wi(Ni(this.r),Ni(this.g),Ni(this.b),Zi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vi,formatHex:Vi,formatHex8:function(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}${Di(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ei,toString:Ei})),gi(Wi,(function(t,e,i,n){return 1===arguments.length?Hi(t):new Wi(t,e,i,null==n?1:n)}),ui(di,{brighter(t){return t=null==t?Bi:Math.pow(Bi,t),new Wi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?hi:Math.pow(hi,t),new Wi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,r=2*i-n;return new wi(Ti(t>=240?t-240:t+120,r,n),Ti(t,r,n),Ti(t<120?t+240:t-120,r,n),this.opacity)},clamp(){return new Wi(ki(this.h),Mi(this.s),Mi(this.l),Zi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zi(this.opacity);return`${1===t?"hsl(":"hsla("}${ki(this.h)}, ${100*Mi(this.s)}%, ${100*Mi(this.l)}%${1===t?")":`, ${t})`}`}}));var Yi=t=>()=>t;function Ji(t){return 1==(t=+t)?_i:function(e,i){return i-e?function(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}(e,i,t):Yi(isNaN(e)?i:e)}}function _i(t,e){var i=e-t;return i?function(t,e){return function(i){return t+i*e}}(t,i):Yi(isNaN(t)?e:t)}var zi=function t(e){var i=Ji(e);function n(t,e){var n=i((t=Si(t)).r,(e=Si(e)).r),r=i(t.g,e.g),a=i(t.b,e.b),s=_i(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=a(e),t.opacity=s(e),t+""}}return n.gamma=t,n}(1);function Oi(t,e){e||(e=[]);var i,n=t?Math.min(e.length,t.length):0,r=e.slice();return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Ki(t,e){var i,n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),s=new Array(n);for(i=0;i<r;++i)a[i]=nn(t[i],e[i]);for(;i<n;++i)s[i]=e[i];return function(t){for(i=0;i<r;++i)s[i]=a[i](t);return s}}function Pi(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function ji(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function qi(t,e){var i,n={},r={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=nn(t[i],e[i]):r[i]=e[i];return function(t){for(i in n)r[i]=n[i](t);return r}}var $i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tn=new RegExp($i.source,"g");function en(t,e){var i,n,r,a=$i.lastIndex=tn.lastIndex=0,s=-1,o=[],l=[];for(t+="",e+="";(i=$i.exec(t))&&(n=tn.exec(e));)(r=n.index)>a&&(r=e.slice(a,r),o[s]?o[s]+=r:o[++s]=r),(i=i[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,l.push({i:s,x:ji(i,n)})),a=tn.lastIndex;return a<e.length&&(r=e.slice(a),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var i,n=0;n<e;++n)o[(i=l[n]).i]=i.x(t);return o.join("")})}function nn(t,e){var i,n=typeof e;return null==e||"boolean"===n?Yi(e):("number"===n?ji:"string"===n?(i=Li(e))?(e=i,zi):en:e instanceof Li?zi:e instanceof Date?Pi:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Oi:Array.isArray(e)?Ki:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?qi:ji)(t,e)}function rn(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var an,sn=180/Math.PI,on={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ln(t,e,i,n,r,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*i+e*n)&&(i-=t*l,n-=e*l),(o=Math.sqrt(i*i+n*n))&&(i/=o,n/=o,l/=o),t*n<e*i&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*sn,skewX:Math.atan(l)*sn,scaleX:s,scaleY:o}}function cn(t,e,i,n){function r(t){return t.length?t.pop()+" ":""}return function(a,s){var o=[],l=[];return a=t(a),s=t(s),function(t,n,r,a,s,o){if(t!==r||n!==a){var l=s.push("translate(",null,e,null,i);o.push({i:l-4,x:ji(t,r)},{i:l-2,x:ji(n,a)})}else(r||a)&&s.push("translate("+r+e+a+i)}(a.translateX,a.translateY,s.translateX,s.translateY,o,l),function(t,e,i,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:i.push(r(i)+"rotate(",null,n)-2,x:ji(t,e)})):e&&i.push(r(i)+"rotate("+e+n)}(a.rotate,s.rotate,o,l),function(t,e,i,a){t!==e?a.push({i:i.push(r(i)+"skewX(",null,n)-2,x:ji(t,e)}):e&&i.push(r(i)+"skewX("+e+n)}(a.skewX,s.skewX,o,l),function(t,e,i,n,a,s){if(t!==i||e!==n){var o=a.push(r(a)+"scale(",null,",",null,")");s.push({i:o-4,x:ji(t,i)},{i:o-2,x:ji(e,n)})}else 1===i&&1===n||a.push(r(a)+"scale("+i+","+n+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,o,l),a=s=null,function(t){for(var e,i=-1,n=l.length;++i<n;)o[(e=l[i]).i]=e.x(t);return o.join("")}}}var gn,un,dn=cn((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?on:ln(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),hn=cn((function(t){return null==t?on:(an||(an=document.createElementNS("http://www.w3.org/2000/svg","g")),an.setAttribute("transform",t),(t=an.transform.baseVal.consolidate())?ln((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):on)}),", ",")",")"),Bn=0,pn=0,Fn=0,fn=1e3,Qn=0,In=0,Un=0,bn="object"==typeof performance&&performance.now?performance:Date,yn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mn(){return In||(yn(xn),In=bn.now()+Un)}function xn(){In=0}function vn(){this._call=this._time=this._next=null}function Cn(t,e,i){var n=new vn;return n.restart(t,e,i),n}function An(){In=(Qn=bn.now())+Un,Bn=pn=0;try{!function(){mn(),++Bn;for(var t,e=gn;e;)(t=In-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Bn}()}finally{Bn=0,function(){var t,e,i=gn,n=1/0;for(;i;)i._call?(n>i._time&&(n=i._time),t=i,i=i._next):(e=i._next,i._next=null,i=t?t._next=e:gn=e);un=t,Gn(n)}(),In=0}}function Ln(){var t=bn.now(),e=t-Qn;e>fn&&(Un-=e,Qn=t)}function Gn(t){Bn||(pn&&(pn=clearTimeout(pn)),t-In>24?(t<1/0&&(pn=setTimeout(An,t-bn.now()-Un)),Fn&&(Fn=clearInterval(Fn))):(Fn||(Qn=bn.now(),Fn=setInterval(Ln,fn)),Bn=1,yn(An)))}function Rn(t,e,i){var n=new vn;return e=null==e?0:+e,n.restart((i=>{n.stop(),t(i+e)}),e,i),n}vn.prototype=Cn.prototype={constructor:vn,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?mn():+i)+(null==e?0:+e),this._next||un===this||(un?un._next=this:gn=this,un=this),this._call=t,this._time=i,Gn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gn())}};var Sn=Zt("start","end","cancel","interrupt"),wn=[],Vn=0,En=1,Zn=2,Nn=3,Dn=4,Xn=5,Hn=6;function Wn(t,e,i,n,r,a){var s=t.__transition;if(s){if(i in s)return}else t.__transition={};!function(t,e,i){var n,r=t.__transition;function a(t){i.state=En,i.timer.restart(s,i.delay,i.time),i.delay<=t&&s(t-i.delay)}function s(a){var c,g,u,d;if(i.state!==En)return l();for(c in r)if((d=r[c]).name===i.name){if(d.state===Nn)return Rn(s);d.state===Dn?(d.state=Hn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Hn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Rn((function(){i.state===Nn&&(i.state=Dn,i.timer.restart(o,i.delay,i.time),o(a))})),i.state=Zn,i.on.call("start",t,t.__data__,i.index,i.group),i.state===Zn){for(i.state=Nn,n=new Array(u=i.tween.length),c=0,g=-1;c<u;++c)(d=i.tween[c].value.call(t,t.__data__,i.index,i.group))&&(n[++g]=d);n.length=g+1}}function o(e){for(var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=Xn,1),a=-1,s=n.length;++a<s;)n[a].call(t,r);i.state===Xn&&(i.on.call("end",t,t.__data__,i.index,i.group),l())}function l(){for(var n in i.state=Hn,i.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=i,i.timer=Cn(a,0,i.time)}(t,i,{name:e,index:n,group:r,on:Sn,tween:wn,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Vn})}function kn(t,e){var i=Tn(t,e);if(i.state>Vn)throw new Error("too late; already scheduled");return i}function Mn(t,e){var i=Tn(t,e);if(i.state>Nn)throw new Error("too late; already running");return i}function Tn(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function Yn(t,e){var i,n;return function(){var r=Mn(this,t),a=r.tween;if(a!==i)for(var s=0,o=(n=i=a).length;s<o;++s)if(n[s].name===e){(n=n.slice()).splice(s,1);break}r.tween=n}}function Jn(t,e,i){var n,r;if("function"!=typeof i)throw new Error;return function(){var a=Mn(this,t),s=a.tween;if(s!==n){r=(n=s).slice();for(var o={name:e,value:i},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=o;break}l===c&&r.push(o)}a.tween=r}}function _n(t,e,i){var n=t._id;return t.each((function(){var t=Mn(this,n);(t.value||(t.value={}))[e]=i.apply(this,arguments)})),function(t){return Tn(t,n).value[e]}}function zn(t,e){var i;return("number"==typeof e?ji:e instanceof Li?zi:(i=Li(e))?(e=i,zi):en)(t,e)}function On(t){return function(){this.removeAttribute(t)}}function Kn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pn(t,e,i){var n,r,a=i+"";return function(){var s=this.getAttribute(t);return s===a?null:s===n?r:r=e(n=s,i)}}function jn(t,e,i){var n,r,a=i+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===a?null:s===n?r:r=e(n=s,i)}}function qn(t,e,i){var n,r,a;return function(){var s,o,l=i(this);if(null!=l)return(s=this.getAttribute(t))===(o=l+"")?null:s===n&&o===r?a:(r=o,a=e(n=s,l));this.removeAttribute(t)}}function $n(t,e,i){var n,r,a;return function(){var s,o,l=i(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(o=l+"")?null:s===n&&o===r?a:(r=o,a=e(n=s,l));this.removeAttributeNS(t.space,t.local)}}function tr(t,e){var i,n;function r(){var r=e.apply(this,arguments);return r!==n&&(i=(n=r)&&function(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}(t,r)),i}return r._value=e,r}function er(t,e){var i,n;function r(){var r=e.apply(this,arguments);return r!==n&&(i=(n=r)&&function(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}(t,r)),i}return r._value=e,r}function ir(t,e){return function(){kn(this,t).delay=+e.apply(this,arguments)}}function nr(t,e){return e=+e,function(){kn(this,t).delay=e}}function rr(t,e){return function(){Mn(this,t).duration=+e.apply(this,arguments)}}function ar(t,e){return e=+e,function(){Mn(this,t).duration=e}}var sr=Pe.prototype.constructor;function or(t){return function(){this.style.removeProperty(t)}}var lr=0;function cr(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function gr(){return++lr}var ur=Pe.prototype;function dr(t){return t*t*t}function hr(t){return--t*t*t+1}cr.prototype={constructor:cr,select:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=_t(t));for(var n=this._groups,r=n.length,a=new Array(r),s=0;s<r;++s)for(var o,l,c=n[s],g=c.length,u=a[s]=new Array(g),d=0;d<g;++d)(o=c[d])&&(l=t.call(o,o.__data__,d,c))&&("__data__"in o&&(l.__data__=o.__data__),u[d]=l,Wn(u[d],e,i,d,u,Tn(o,i)));return new cr(a,this._parents,e,i)},selectAll:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=Ot(t));for(var n=this._groups,r=n.length,a=[],s=[],o=0;o<r;++o)for(var l,c=n[o],g=c.length,u=0;u<g;++u)if(l=c[u]){for(var d,h=t.call(l,l.__data__,u,c),B=Tn(l,i),p=0,F=h.length;p<F;++p)(d=h[p])&&Wn(d,e,i,p,h,B);a.push(h),s.push(l)}return new cr(a,s,e,i)},selectChild:ur.selectChild,selectChildren:ur.selectChildren,filter:function(t){"function"!=typeof t&&(t=Pt(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var a,s=e[r],o=s.length,l=n[r]=[],c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new cr(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,n=e.length,r=i.length,a=Math.min(n,r),s=new Array(n),o=0;o<a;++o)for(var l,c=e[o],g=i[o],u=c.length,d=s[o]=new Array(u),h=0;h<u;++h)(l=c[h]||g[h])&&(d[h]=l);for(;o<n;++o)s[o]=e[o];return new cr(s,this._parents,this._name,this._id)},selection:function(){return new sr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,i=gr(),n=this._groups,r=n.length,a=0;a<r;++a)for(var s,o=n[a],l=o.length,c=0;c<l;++c)if(s=o[c]){var g=Tn(s,e);Wn(s,t,i,c,o,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new cr(n,this._parents,t,i)},call:ur.call,nodes:ur.nodes,node:ur.node,size:ur.size,empty:ur.empty,each:ur.each,on:function(t,e){var i=this._id;return arguments.length<2?Tn(this.node(),i).on.on(t):this.each(function(t,e,i){var n,r,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?kn:Mn;return function(){var s=a(this,t),o=s.on;o!==n&&(r=(n=o).copy()).on(e,i),s.on=r}}(i,t,e))},attr:function(t,e){var i=kt(t),n="transform"===i?hn:zn;return this.attrTween(t,"function"==typeof e?(i.local?$n:qn)(i,n,_n(this,"attr."+t,e)):null==e?(i.local?Kn:On)(i):(i.local?jn:Pn)(i,n,e))},attrTween:function(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;var n=kt(t);return this.tween(i,(n.local?tr:er)(n,e))},style:function(t,e,i){var n="transform"==(t+="")?dn:zn;return null==e?this.styleTween(t,function(t,e){var i,n,r;return function(){var a=Ie(this,t),s=(this.style.removeProperty(t),Ie(this,t));return a===s?null:a===i&&s===n?r:r=e(i=a,n=s)}}(t,n)).on("end.style."+t,or(t)):"function"==typeof e?this.styleTween(t,function(t,e,i){var n,r,a;return function(){var s=Ie(this,t),o=i(this),l=o+"";return null==o&&(this.style.removeProperty(t),l=o=Ie(this,t)),s===l?null:s===n&&l===r?a:(r=l,a=e(n=s,o))}}(t,n,_n(this,"style."+t,e))).each(function(t,e){var i,n,r,a,s="style."+e,o="end."+s;return function(){var l=Mn(this,t),c=l.on,g=null==l.value[s]?a||(a=or(e)):void 0;c===i&&r===g||(n=(i=c).copy()).on(o,r=g),l.on=n}}(this._id,t)):this.styleTween(t,function(t,e,i){var n,r,a=i+"";return function(){var s=Ie(this,t);return s===a?null:s===n?r:r=e(n=s,i)}}(t,n,e),i).on("end.style."+t,null)},styleTween:function(t,e,i){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,function(t,e,i){var n,r;function a(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&function(t,e,i){return function(n){this.style.setProperty(t,e.call(this,n),i)}}(t,a,i)),n}return a._value=e,a}(t,e,null==i?"":i))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(_n(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,i;function n(){var n=t.apply(this,arguments);return n!==i&&(e=(i=n)&&function(t){return function(e){this.textContent=t.call(this,e)}}(n)),e}return n._value=t,n}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var i=this._id;if(t+="",arguments.length<2){for(var n,r=Tn(this.node(),i).tween,a=0,s=r.length;a<s;++a)if((n=r[a]).name===t)return n.value;return null}return this.each((null==e?Yn:Jn)(i,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ir:nr)(e,t)):Tn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rr:ar)(e,t)):Tn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Mn(this,t).ease=e}}(e,t)):Tn(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var i=e.apply(this,arguments);if("function"!=typeof i)throw new Error;Mn(this,t).ease=i}}(this._id,t))},end:function(){var t,e,i=this,n=i._id,r=i.size();return new Promise((function(a,s){var o={value:s},l={value:function(){0==--r&&a()}};i.each((function(){var i=Mn(this,n),r=i.on;r!==t&&((e=(t=r).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),i.on=e})),0===r&&a()}))},[Symbol.iterator]:ur[Symbol.iterator]};var Br={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function pr(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}Pe.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var i,n,r,a=t.__transition,s=!0;if(a){for(r in e=null==e?null:e+"",a)(i=a[r]).name===e?(n=i.state>Zn&&i.state<Xn,i.state=Hn,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete a[r]):s=!1;s&&delete t.__transition}}(this,t)}))},Pe.prototype.transition=function(t){var e,i;t instanceof cr?(e=t._id,t=t._name):(e=gr(),(i=Br).time=mn(),t=null==t?null:t+"");for(var n=this._groups,r=n.length,a=0;a<r;++a)for(var s,o=n[a],l=o.length,c=0;c<l;++c)(s=o[c])&&Wn(s,t,e,c,o,i||pr(s,e));return new cr(n,this._parents,t,e)};const Fr=Math.PI,fr=2*Fr,Qr=1e-6,Ir=fr-Qr;function Ur(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}class br{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Ur:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ur;const i=10**e;return function(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=Math.round(arguments[e]*i)/i+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,n){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(t,e,i,n,r,a){this._append`C${+t},${+e},${+i},${+n},${this._x1=+r},${this._y1=+a}`}arcTo(t,e,i,n,r){if(t=+t,e=+e,i=+i,n=+n,(r=+r)<0)throw new Error(`negative radius: ${r}`);let a=this._x1,s=this._y1,o=i-t,l=n-e,c=a-t,g=s-e,u=c*c+g*g;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(u>Qr)if(Math.abs(g*o-l*c)>Qr&&r){let d=i-a,h=n-s,B=o*o+l*l,p=d*d+h*h,F=Math.sqrt(B),f=Math.sqrt(u),Q=r*Math.tan((Fr-Math.acos((B+u-p)/(2*F*f)))/2),I=Q/f,U=Q/F;Math.abs(I-1)>Qr&&this._append`L${t+I*c},${e+I*g}`,this._append`A${r},${r},0,0,${+(g*d>c*h)},${this._x1=t+U*o},${this._y1=e+U*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,i,n,r,a){if(t=+t,e=+e,a=!!a,(i=+i)<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(n),o=i*Math.sin(n),l=t+s,c=e+o,g=1^a,u=a?n-r:r-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Qr||Math.abs(this._y1-c)>Qr)&&this._append`L${l},${c}`,i&&(u<0&&(u=u%fr+fr),u>Ir?this._append`A${i},${i},0,1,${g},${t-s},${e-o}A${i},${i},0,1,${g},${this._x1=l},${this._y1=c}`:u>Qr&&this._append`A${i},${i},0,${+(u>=Fr)},${g},${this._x1=t+i*Math.cos(r)},${this._y1=e+i*Math.sin(r)}`)}rect(t,e,i,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function yr(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function mr(t){return(t=yr(Math.abs(t)))?t[1]:NaN}var xr,vr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cr(t){if(!(e=vr.exec(t)))throw new Error("invalid format: "+t);var e;return new Ar({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ar(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Lr(t,e){var i=yr(t,e);if(!i)return t+"";var n=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}Cr.prototype=Ar.prototype,Ar.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Gr={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Lr(100*t,e),r:Lr,s:function(t,e){var i=yr(t,e);if(!i)return t+"";var n=i[0],r=i[1],a=r-(xr=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+yr(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Rr(t){return t}var Sr,wr,Vr,Er=Array.prototype.map,Zr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Nr(t){var e,i,n=void 0===t.grouping||void 0===t.thousands?Rr:(e=Er.call(t.grouping,Number),i=t.thousands+"",function(t,n){for(var r=t.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(t.substring(r-=o,r+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(i)}),r=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Rr:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Er.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",g=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=Cr(t)).fill,i=t.align,u=t.sign,d=t.symbol,h=t.zero,B=t.width,p=t.comma,F=t.precision,f=t.trim,Q=t.type;"n"===Q?(p=!0,Q="g"):Gr[Q]||(void 0===F&&(F=12),f=!0,Q="g"),(h||"0"===e&&"="===i)&&(h=!0,e="0",i="=");var I="$"===d?r:"#"===d&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",U="$"===d?a:/[%p]/.test(Q)?l:"",b=Gr[Q],y=/[defgprs%]/.test(Q);function m(t){var r,a,l,d=I,m=U;if("c"===Q)m=b(t)+m,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?g:b(Math.abs(t),F),f&&(t=function(t){t:for(var e,i=t.length,n=1,r=-1;n<i;++n)switch(t[n]){case".":r=e=n;break;case"0":0===r&&(r=n),e=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),x&&0==+t&&"+"!==u&&(x=!1),d=(x?"("===u?u:c:"-"===u||"("===u?"":u)+d,m=("s"===Q?Zr[8+xr/3]:"")+m+(x&&"("===u?")":""),y)for(r=-1,a=t.length;++r<a;)if(48>(l=t.charCodeAt(r))||l>57){m=(46===l?s+t.slice(r+1):t.slice(r))+m,t=t.slice(0,r);break}}p&&!h&&(t=n(t,1/0));var v=d.length+t.length+m.length,C=v<B?new Array(B-v+1).join(e):"";switch(p&&h&&(t=n(C+t,C.length?B-m.length:1/0),C=""),i){case"<":t=d+t+m+C;break;case"=":t=d+C+t+m;break;case"^":t=C.slice(0,v=C.length>>1)+d+t+m+C.slice(v);break;default:t=C+d+t+m}return o(t)}return F=void 0===F?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,F)):Math.max(0,Math.min(20,F)),m.toString=function(){return t+""},m}return{format:u,formatPrefix:function(t,e){var i=u(((t=Cr(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(mr(e)/3))),r=Math.pow(10,-n),a=Zr[8+n/3];return function(t){return i(r*t)+a}}}}function Dr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Xr(t){return+t}Sr=Nr({thousands:",",grouping:[3],currency:["$",""]}),wr=Sr.format,Vr=Sr.formatPrefix;var Hr=[0,1];function Wr(t){return t}function kr(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Mr(t,e,i){var n=t[0],r=t[1],a=e[0],s=e[1];return r<n?(n=kr(r,n),a=i(s,a)):(n=kr(n,r),a=i(a,s)),function(t){return a(n(t))}}function Tr(t,e,i){var n=Math.min(t.length,e.length)-1,r=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)r[s]=kr(t[s],t[s+1]),a[s]=i(e[s],e[s+1]);return function(e){var i=ht(t,e,1,n)-1;return a[i](r[i](e))}}function Yr(){var t,e,i,n,r,a,s=Hr,o=Hr,l=nn,c=Wr;function g(){var t=Math.min(s.length,o.length);return c!==Wr&&(c=function(t,e){var i;return t>e&&(i=t,t=e,e=i),function(i){return Math.max(t,Math.min(e,i))}}(s[0],s[t-1])),n=t>2?Tr:Mr,r=a=null,u}function u(e){return null==e||isNaN(e=+e)?i:(r||(r=n(s.map(t),o,l)))(t(c(e)))}return u.invert=function(i){return c(e((a||(a=n(o,s.map(t),ji)))(i)))},u.domain=function(t){return arguments.length?(s=Array.from(t,Xr),g()):s.slice()},u.range=function(t){return arguments.length?(o=Array.from(t),g()):o.slice()},u.rangeRound=function(t){return o=Array.from(t),l=rn,g()},u.clamp=function(t){return arguments.length?(c=!!t||Wr,g()):c!==Wr},u.interpolate=function(t){return arguments.length?(l=t,g()):l},u.unknown=function(t){return arguments.length?(i=t,u):i},function(i,n){return t=i,e=n,g()}}function Jr(t,e,i,n){var r,a=function(t,e,i){i=+i;const n=(e=+e)<(t=+t),r=n?Qt(e,t,i):Qt(t,e,i);return(n?-1:1)*(r<0?1/-r:r)}(t,e,i);switch((n=Cr(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(mr(e)/3)))-mr(Math.abs(t)))}(a,s))||(n.precision=r),Vr(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mr(e)-mr(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-mr(Math.abs(t)))}(a))||(n.precision=r-2*("%"===n.type))}return wr(n)}function _r(t){var e=t.domain;return t.ticks=function(t){var i=e();return function(t,e,i){if(!((i=+i)>0))return[];if((t=+t)==(e=+e))return[t];const n=e<t,[r,a,s]=n?ft(e,t,i):ft(t,e,i);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(n)if(s<0)for(let t=0;t<o;++t)l[t]=(a-t)/-s;else for(let t=0;t<o;++t)l[t]=(a-t)*s;else if(s<0)for(let t=0;t<o;++t)l[t]=(r+t)/-s;else for(let t=0;t<o;++t)l[t]=(r+t)*s;return l}(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,i){var n=e();return Jr(n[0],n[n.length-1],null==t?10:t,i)},t.nice=function(i){null==i&&(i=10);var n,r,a=e(),s=0,o=a.length-1,l=a[s],c=a[o],g=10;for(c<l&&(r=l,l=c,c=r,r=s,s=o,o=r);g-- >0;){if((r=Qt(l,c,i))===n)return a[s]=l,a[o]=c,e(a);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}n=r}return t},t}function zr(){var t=Yr()(Wr,Wr);return t.copy=function(){return e=t,zr().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},Dr.apply(t,arguments),_r(t)}var Or=function(t){for(var e=t.length/6|0,i=new Array(e),n=0;n<e;)i[n]="#"+t.slice(6*n,6*++n);return i}("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");function Kr(t){return function(){return t}}const Pr=Math.abs,jr=Math.atan2,qr=Math.cos,$r=Math.max,ta=Math.min,ea=Math.sin,ia=Math.sqrt,na=1e-12,ra=Math.PI,aa=ra/2,sa=2*ra;function oa(t){return t>=1?aa:t<=-1?-aa:Math.asin(t)}function la(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(null==i)e=null;else{const t=Math.floor(i);if(!(t>=0))throw new RangeError(`invalid digits: ${i}`);e=t}return t},()=>new br(e)}function ca(t){return t.innerRadius}function ga(t){return t.outerRadius}function ua(t){return t.startAngle}function da(t){return t.endAngle}function ha(t){return t&&t.padAngle}function Ba(t,e,i,n,r,a,s){var o=t-i,l=e-n,c=(s?a:-a)/ia(o*o+l*l),g=c*l,u=-c*o,d=t+g,h=e+u,B=i+g,p=n+u,F=(d+B)/2,f=(h+p)/2,Q=B-d,I=p-h,U=Q*Q+I*I,b=r-a,y=d*p-B*h,m=(I<0?-1:1)*ia($r(0,b*b*U-y*y)),x=(y*I-Q*m)/U,v=(-y*Q-I*m)/U,C=(y*I+Q*m)/U,A=(-y*Q+I*m)/U,L=x-F,G=v-f,R=C-F,S=A-f;return L*L+G*G>R*R+S*S&&(x=C,v=A),{cx:x,cy:v,x01:-g,y01:-u,x11:x*(r/b-1),y11:v*(r/b-1)}}function pa(){var t=ca,e=ga,i=Kr(0),n=null,r=ua,a=da,s=ha,o=null,l=la(c);function c(){var c,g,u=+t.apply(this,arguments),d=+e.apply(this,arguments),h=r.apply(this,arguments)-aa,B=a.apply(this,arguments)-aa,p=Pr(B-h),F=B>h;if(o||(o=c=l()),d<u&&(g=d,d=u,u=g),d>na)if(p>sa-na)o.moveTo(d*qr(h),d*ea(h)),o.arc(0,0,d,h,B,!F),u>na&&(o.moveTo(u*qr(B),u*ea(B)),o.arc(0,0,u,B,h,F));else{var f,Q,I=h,U=B,b=h,y=B,m=p,x=p,v=s.apply(this,arguments)/2,C=v>na&&(n?+n.apply(this,arguments):ia(u*u+d*d)),A=ta(Pr(d-u)/2,+i.apply(this,arguments)),L=A,G=A;if(C>na){var R=oa(C/u*ea(v)),S=oa(C/d*ea(v));(m-=2*R)>na?(b+=R*=F?1:-1,y-=R):(m=0,b=y=(h+B)/2),(x-=2*S)>na?(I+=S*=F?1:-1,U-=S):(x=0,I=U=(h+B)/2)}var w=d*qr(I),V=d*ea(I),E=u*qr(y),Z=u*ea(y);if(A>na){var N,D=d*qr(U),X=d*ea(U),H=u*qr(b),W=u*ea(b);if(p<ra)if(N=function(t,e,i,n,r,a,s,o){var l=i-t,c=n-e,g=s-r,u=o-a,d=u*l-g*c;if(!(d*d<na))return[t+(d=(g*(e-a)-u*(t-r))/d)*l,e+d*c]}(w,V,H,W,D,X,E,Z)){var k=w-N[0],M=V-N[1],T=D-N[0],Y=X-N[1],J=1/ea(function(t){return t>1?0:t<-1?ra:Math.acos(t)}((k*T+M*Y)/(ia(k*k+M*M)*ia(T*T+Y*Y)))/2),_=ia(N[0]*N[0]+N[1]*N[1]);L=ta(A,(u-_)/(J-1)),G=ta(A,(d-_)/(J+1))}else L=G=0}x>na?G>na?(f=Ba(H,W,w,V,d,G,F),Q=Ba(D,X,E,Z,d,G,F),o.moveTo(f.cx+f.x01,f.cy+f.y01),G<A?o.arc(f.cx,f.cy,G,jr(f.y01,f.x01),jr(Q.y01,Q.x01),!F):(o.arc(f.cx,f.cy,G,jr(f.y01,f.x01),jr(f.y11,f.x11),!F),o.arc(0,0,d,jr(f.cy+f.y11,f.cx+f.x11),jr(Q.cy+Q.y11,Q.cx+Q.x11),!F),o.arc(Q.cx,Q.cy,G,jr(Q.y11,Q.x11),jr(Q.y01,Q.x01),!F))):(o.moveTo(w,V),o.arc(0,0,d,I,U,!F)):o.moveTo(w,V),u>na&&m>na?L>na?(f=Ba(E,Z,D,X,u,-L,F),Q=Ba(w,V,H,W,u,-L,F),o.lineTo(f.cx+f.x01,f.cy+f.y01),L<A?o.arc(f.cx,f.cy,L,jr(f.y01,f.x01),jr(Q.y01,Q.x01),!F):(o.arc(f.cx,f.cy,L,jr(f.y01,f.x01),jr(f.y11,f.x11),!F),o.arc(0,0,u,jr(f.cy+f.y11,f.cx+f.x11),jr(Q.cy+Q.y11,Q.cx+Q.x11),F),o.arc(Q.cx,Q.cy,L,jr(Q.y11,Q.x11),jr(Q.y01,Q.x01),!F))):o.arc(0,0,u,y,b,F):o.lineTo(E,Z)}else o.moveTo(0,0);if(o.closePath(),c)return o=null,c+""||null}return c.centroid=function(){var i=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-ra/2;return[qr(n)*i,ea(n)*i]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Kr(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Kr(+t),c):e},c.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:Kr(+t),c):i},c.padRadius=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Kr(+t),c):n},c.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Kr(+t),c):r},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Kr(+t),c):a},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Kr(+t),c):s},c.context=function(t){return arguments.length?(o=null==t?null:t,c):o},c}function Fa(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function fa(t){this._context=t}function Qa(t){return new fa(t)}function Ia(t){return t[0]}function Ua(t){return t[1]}function ba(t,e){var i=Kr(!0),n=null,r=Qa,a=null,s=la(o);function o(o){var l,c,g,u=(o=Fa(o)).length,d=!1;for(null==n&&(a=r(g=s())),l=0;l<=u;++l)!(l<u&&i(c=o[l],l,o))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(c,l,o),+e(c,l,o));if(g)return a=null,g+""||null}return t="function"==typeof t?t:void 0===t?Ia:Kr(t),e="function"==typeof e?e:void 0===e?Ua:Kr(e),o.x=function(e){return arguments.length?(t="function"==typeof e?e:Kr(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Kr(+t),o):e},o.defined=function(t){return arguments.length?(i="function"==typeof t?t:Kr(!!t),o):i},o.curve=function(t){return arguments.length?(r=t,null!=n&&(a=r(n)),o):r},o.context=function(t){return arguments.length?(null==t?n=a=null:a=r(n=t),o):n},o}function ya(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function ma(t){return t}function xa(t,e,i){this.k=t,this.x=e,this.y=i}fa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},xa.prototype={constructor:xa,scale:function(t){return 1===t?this:new xa(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new xa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},xa.prototype;class va extends ot{getComputedStyleValue(t){return getComputedStyle(this).getPropertyValue(t).trim()}firstUpdated(t){super.firstUpdated(t),je(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",(t=>{je(t.currentTarget.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)})).on("keydown.keyboard",(t=>{je(t.currentTarget.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)}))}static get greys(){const t="#999999",e={white:"#ffffff"};return e.light75=zi(t,"#ffffff")(.75),e.light50=zi(t,"#ffffff")(.5),e.light25=zi(t,"#ffffff")(.25),e.grey=t,e.dark25=zi(t,"#000000")(.25),e.dark50=zi(t,"#000000")(.5),e.dark75=zi(t,"#000000")(.75),e.black="#000000",e}static get shadows(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}static cssBoxShadow(t,e=!1,i=!1){const n=this.shadows.opacityUmbra+this.shadows.opacityBoost,r=this.shadows.opacityPenumbra+this.shadows.opacityBoost,a=this.shadows.opacityAmbient+this.shadows.opacityBoost,s=i?`rgba(${this.shadows.inverseBaselineColorString}, ${n})`:`rgba(${this.shadows.baselineColorString}, ${n})`,o=i?`rgba(${this.shadows.inverseBaselineColorString}, ${r})`:`rgba(${this.shadows.baselineColorString}, ${r})`,l=i?`rgba(${this.shadows.inverseBaselineColorString}, ${a})`:`rgba(${this.shadows.baselineColorString}, ${a})`,c=this.shadows.mapUmbra[t],g=this.shadows.mapPenumbra[t],u=this.shadows.mapAmbient[t];return`${e?`${-c.y}px ${c.y/2}px ${c.b}px ${c.s}px`:`${c.y/2}px ${c.y}px ${c.b}px ${c.s}px`} ${s}, ${e?`${-g.y}px ${g.y/2}px ${g.b}px ${g.s}px`:`${g.y/2}px ${g.y}px ${g.b}px ${g.s}px`} ${o}, ${e?`${-u.y}px ${u.y/2}px ${u.b}px ${u.s}px`:`${u.y/2}px ${u.y}px ${u.b}px ${u.s}px`} ${l}`}static get svgDefs(){const t=va.shadows,e=t.elevations.map((e=>`\n        <filter id=shadow-${e} filterUnits="userSpaceOnUse" x="-100%" y="-100%" width="200%" height="200%">\n          <feComponentTransfer in="SourceAlpha" result="solid">\n            <feFuncA type="table" tableValues="0 1 1"/>\n          </feComponentTransfer>\n          <feOffset in="solid" result="offU" dx=${t.mapUmbra[e].y/2} dy=${t.mapUmbra[e].y} />\n          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[e].y/2} dy=${t.mapPenumbra[e].y} />\n          <feOffset in="solid" result="offA" dx=${t.mapAmbient[e].y/2} dy=${t.mapAmbient[e].y} />\n          ${0===t.mapUmbra[e].s?"":`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[e].s)} />`}\n          ${0===t.mapPenumbra[e].s?"":`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[e].s)} />`}\n          ${0===t.mapAmbient[e].s?"":`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[e].s)} />`}\n          <feGaussianBlur in=${0===t.mapUmbra[e].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[e].b/2} />\n          <feGaussianBlur in=${0===t.mapPenumbra[e].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[e].b/2} />\n          <feGaussianBlur in=${0===t.mapAmbient[e].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[e].b/2} />\n          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />\n          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />\n          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />\n          <feComposite in="opU" in2="blurU" result="shU" operator="in" />\n          <feComposite in="opP" in2="blurP" result="shP" operator="in" />\n          <feComposite in="opA" in2="blurA" result="shA" operator="in" />\n          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />\n          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />\n          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />\n          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />\n          <feMerge>\n            <feMergeNode in="finalU" />\n            <feMergeNode in="finalP" />\n            <feMergeNode in="finalA" />\n            <feMergeNode in="SourceGraphic" />\n          </feMerge>\n        </filter>`));return`\n      <defs>\n        ${e}\n      </defs>\n    `}static get svgFilters(){const t=va.shadows,e=t.elevations.map((e=>J`
        <filter id=${`shadow-${e}`} x="-250%" y="-250%" width="600%" height="600%">
          <feComponentTransfer in="SourceAlpha" result="solid">
            <feFuncA type="table" tableValues="0 1 1"/>
          </feComponentTransfer>
          <feOffset in="solid" result="offU" dx=${t.mapUmbra[e].y/2} dy=${t.mapUmbra[e].y} />
          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[e].y/2} dy=${t.mapPenumbra[e].y} />
          <feOffset in="solid" result="offA" dx=${t.mapAmbient[e].y/2} dy=${t.mapAmbient[e].y} />
          ${0===t.mapUmbra[e].s?J``:J`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[e].s)} />`}
          ${0===t.mapPenumbra[e].s?J``:J`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[e].s)} />`}
          ${0===t.mapAmbient[e].s?J``:J`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[e].s)} />`}
          <feGaussianBlur in=${0===t.mapUmbra[e].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[e].b/2} />
          <feGaussianBlur in=${0===t.mapPenumbra[e].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[e].b/2} />
          <feGaussianBlur in=${0===t.mapAmbient[e].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[e].b/2} />
          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />
          <feComposite in="opU" in2="blurU" result="shU" operator="in" />
          <feComposite in="opP" in2="blurP" result="shP" operator="in" />
          <feComposite in="opA" in2="blurA" result="shA" operator="in" />
          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />
          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />
          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />
          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />
          <feMerge>
            <feMergeNode in="finalU" />
            <feMergeNode in="finalP" />
            <feMergeNode in="finalA" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>`));return J`
      <svg class="defs">
        <defs>
          ${e}
        </defs>
      </svg>
    `}static get styles(){return o`
      :host {
        ---shadow-0: var(--shadow-0, ${s(this.cssBoxShadow(0))});
        ---shadow-2: var(--shadow-2, ${s(this.cssBoxShadow(2))});
        ---shadow-4: var(--shadow-4, ${s(this.cssBoxShadow(4))});
        ---shadow-8: var(--shadow-8, ${s(this.cssBoxShadow(8))});

        ---color-background: var(--color-background, ${s(this.greys.white)});
        ---color-border: var(--color-border, ${s(this.greys.light75)});
        ---color-text: var(--color-text, ${s(this.greys.dark75)});
        ---color-text-inverse: var(--color-text-inverse, ${s(this.greys.white)});
        ---color-link: var(--color-link, ${s(this.greys.dark25)});
        ---color-element-background: var(--color-element-background, ${s(this.greys.light75)});
        ---color-element-disabled: var(--color-element-disabled, ${s(this.greys.light50)});
        ---color-element-enabled: var(--color-element-enabled, ${s(this.greys.dark25)});
        ---color-element-selected: var(--color-element-selected, ${s(this.greys.grey)});
        ---color-element-border: var(--color-element-border, ${s(this.greys.dark50)});
        ---color-element-emphasis: var(--color-element-emphasis, ${s(this.greys.dark75)});

        ---font-family-base: var(--font-family-base, "Source Sans", sans-serif);
        ---font-family-math: var(--font-family-math, "Source Serif", serif);

        ---border: var(--border, 1px solid var(---color-border));
        ---border-radius: var(--border-radius, 0.25rem);
        ---transition-duration: var(--transition-duration, 500ms);

        font-family: var(---font-family-base);
      }

      :host,
      :host *,
      :host *::before,
      :host *::after {
        box-sizing: border-box;
      }

      .math-greek {
        font-family: var(---font-family-math);
        font-style: normal;
      }

      .math-num {
        font-family: var(---font-family-base);
        font-style: normal;
      }

      .math-var {
        font-family: var(---font-family-math);
        font-style: italic;
      }

      .defs {
        display: block;

        width: 0;
        height: 0;
      }
    `}}customElements.define("decidables-button",class extends va{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,o`
        :host {
          margin: 0.25rem;
        }

        button {
          width: 100%;
          height: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);

          border: 0;
          border-radius: var(---border-radius);
          outline: none;
        }

        button:disabled {
          background-color: var(--decidables-button-background-color, var(---color-element-disabled));
          outline: none;
          box-shadow: none;
        }

        button:enabled {
          cursor: pointer;

          background-color: var(--decidables-button-background-color, var(---color-element-enabled));
          outline: none;
          box-shadow: var(---shadow-2);
        }

        button:enabled:hover {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        button:enabled:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(.keyboard) button:enabled:focus {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) button:enabled:focus:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return Y`
      <button ?disabled=${this.disabled}>
        <slot></slot>
      </button>
    `}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Ca=t=>t??z;customElements.define("decidables-slider",class extends va{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}changed(t){this.value=t.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,o`
        :host {
          ---shadow-2-rotate: var(--shadow-2-rotate, ${s(this.cssBoxShadow(2,!0,!1))});
          ---shadow-4-rotate: var(--shadow-4-rotate, ${s(this.cssBoxShadow(4,!0,!1))});
          ---shadow-8-rotate: var(--shadow-8-rotate, ${s(this.cssBoxShadow(8,!0,!1))});

          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        label {
          margin: 0.25rem 0.25rem 0;
        }

        .range {
          display: inline-block;

          width: 3.5rem;
          height: 4.75rem;
          margin: 0 0.25rem 0.25rem;
        }

        decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;

          margin: 0 0.25rem 0.25rem;
        }

        /* Adapted from http://danielstern.ca/range.css/#/ */
        /* Overall */
        input[type=range] {
          width: 4.75rem;
          height: 3.5rem;
          padding: 0;
          margin: 0;

          background-color: unset;

          transform: rotate(-90deg);
          transform-origin: 2.375rem 2.375rem;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:enabled {
          cursor: ns-resize;
        }

        input[type=range]:focus {
          outline: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-tooltip {
          display: none;
        }

        /* Track */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-runnable-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-track {
          width: 100%;
          height: 4px;

          color: transparent;

          background: transparent;
          border-color: transparent;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-lower {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-upper {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-lower {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-upper {
          background: var(---color-element-disabled);
        }

        /* Thumb */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-thumb {
          width: 10px;
          height: 20px;
          margin-top: -8px;

          border: 0;
          border-radius: 4px;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:disabled::-webkit-slider-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=range]:enabled::-webkit-slider-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        input[type=range]:enabled:hover::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        input[type=range]:enabled:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-thumb {
          width: 10px;
          height: 20px;

          border: 0;
          border-radius: 4px;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-moz-range-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-moz-range-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-thumb {
          width: 10px;
          height: 20px;
          margin-top: 0;

          background: #999999;
          /* background: var(---color-element-enabled); */
          border: 0;
          border-radius: 4px;
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-ms-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-ms-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }
      `]}render(){return Y`
      <label for="slider">
        <slot></slot>
      </label>
      <div class="range">
        <input ?disabled=${this.disabled} type="range" id="slider" min=${Ca(this.min)} max=${Ca(this.max)} step=${Ca(this.step)} .value=${this.value} @change=${this.changed.bind(this)} @input=${this.inputted.bind(this)}>
      </div>
      <decidables-spinner ?disabled=${this.disabled} min=${Ca(this.min)} max=${Ca(this.max)} step=${Ca(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}></decidables-spinner>
    `}});customElements.define("decidables-spinner",class extends va{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,o`
        :host {
          ---decidables-spinner-font-size: var(--decidables-spinner-font-size, 1.125rem);
          ---decidables-spinner-input-width: var(--decidables-spinner-input-width, 4rem);
          ---decidables-spinner-prefix: var(--decidables-spinner-prefix, "");

          ---decidables-spinner-postfix: var(--decidables-spinner-postfix, "");
          ---decidables-spinner-postfix-padding: var(--decidables-spinner-postfix-padding, 0);

          display: block;
        }

        label {
          position: relative;
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0;

          font-size: 0.75rem;
        }

        label::before {
          position: absolute;
          bottom: 1px;
          left: calc(50% - var(---decidables-spinner-input-width) / 2 + 0.25rem);

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-prefix);
        }

        label::after {
          position: absolute;
          right: 0.25rem;
          bottom: 1px;

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-postfix);
        }

        input[type=number] {
          width: var(---decidables-spinner-input-width);
          padding-right: var(---decidables-spinner-postfix-padding);

          font-family: var(---font-family-base);
          font-size: var(---decidables-spinner-font-size);
          color: inherit;
          text-align: right;

          background: none;
          border: 0;
          border-radius: 0;
          outline: none;
          box-shadow: var(---shadow-2);

          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }

        input[type=number]:hover {
          box-shadow: var(---shadow-4);
        }

        input[type=number]:focus,
        input[type=number]:active {
          box-shadow: var(---shadow-8);
        }

        input[type=number]:disabled {
          color: var(---color-text);

          border: 0;
          box-shadow: none;

          /* HACK: Use correct text color in Safari */
          -webkit-opacity: 1;
          /* HACK: Hide spinners in disabled input for Firefox and Safari */
          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */
          /* HACK: Use correct text color in Safari */
          -webkit-text-fill-color: var(---color-text);
        }

        /* HACK: Hide spinners in disabled input for Firefox and Safari */
        input[type=number]:disabled::-webkit-outer-spin-button,
        input[type=number]:disabled::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }
      `]}render(){return Y`
      <label>
        <slot></slot>
        <input ?disabled=${this.disabled} type="number" min=${Ca(this.min)} max=${Ca(this.max)} step=${Ca(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}>
      </label>
    `}});customElements.define("decidables-switch",class extends va{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}static get styles(){return[super.styles,o`
        :host {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */
        input[type=checkbox] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=checkbox] + label {
          order: 1;

          margin: 0 0.25rem 0.25rem;

          font-weight: 400;
        }

        input[type=checkbox] + label + label {
          position: relative;

          min-width: 24px;
          padding: 0 0 36px;
          margin: 0.25rem 0.25rem 0;

          font-weight: 400;

          outline: none;
        }

        input[type=checkbox] + label + label::before,
        input[type=checkbox] + label + label::after {
          position: absolute;

          left: 50%;

          margin: 0;

          content: "";

          outline: 0;

          transition: all var(---transition-duration) ease;
          transform: translate(-50%, 0);
        }

        input[type=checkbox] + label + label::before {
          bottom: 1px;

          width: 8px;
          height: 34px;

          background-color: var(---color-element-disabled);
          border-radius: 4px;
        }

        input[type=checkbox] + label + label::after {
          bottom: 0;

          width: 18px;
          height: 18px;

          background-color: var(---color-element-enabled);
          border-radius: 50%;
          box-shadow: var(---shadow-2);
        }

        input[type=checkbox]:checked + label + label::after {
          transform: translate(-50%, -100%);
        }

        input[type=checkbox]:disabled + label + label::after {
          background-color: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=checkbox]:enabled + label,
        input[type=checkbox]:enabled + label + label {
          cursor: pointer;
        }

        input[type=checkbox]:enabled + label:hover + label::after,
        input[type=checkbox]:enabled + label + label:hover::after {
          box-shadow: var(---shadow-4);
        }

        input[type=checkbox]:enabled + label:active + label::after,
        input[type=checkbox]:enabled + label + label:active::after {
          box-shadow: var(---shadow-8);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {
          box-shadow: var(---shadow-4);
        }

        /* stylelint-disable selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,
        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {
          box-shadow: var(---shadow-8);
        }
        /* stylelint-enable selector-max-compound-selectors */
        `]}render(){return Y`
      <input type="checkbox" id="switch" ?checked=${this.checked} ?disabled=${this.disabled} @change=${this.changed.bind(this)}>
      <label for="switch">
        <slot name="off-label"></slot>
      </label>
      <label for="switch">
        <slot></slot>
      </label>
    `}});customElements.define("decidables-toggle",class extends va{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,o`
        fieldset {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;

          margin: 0.25rem;

          border: 0;
        }

        legend {
          text-align: center;
        }
      `]}render(){return Y`
      <fieldset ?disabled=${this.disabled}>
        <legend><slot name="label"></slot></legend>
        <slot></slot>
      </fieldset>
    `}});customElements.define("decidables-toggle-option",class extends va{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1,this.name=void 0,this.value=void 0}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}static get styles(){return[super.styles,o`
        :host {
          display: flex;
        }

        input[type=radio] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=radio] + label {
          width: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);
          text-align: center;

          cursor: pointer;

          background-color: var(---color-element-enabled);
          border: 0;
          border-radius: 0;
          outline: none;

          box-shadow: var(---shadow-2);
        }

        input[type=radio]:checked + label {
          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-2);
        }

        input[type=radio] + label:hover {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        input[type=radio] + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(:first-of-type) input[type=radio] + label {
          border-top-left-radius: 0.25rem;
          border-top-right-radius: 0.25rem;
        }

        :host(:last-of-type) input[type=radio] + label {
          border-bottom-right-radius: 0.25rem;
          border-bottom-left-radius: 0.25rem;
        }

        :host(.keyboard) input[type=radio]:focus + label {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus:checked + label {
          z-index: 1;

          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return Y`
      <input type="radio" id="toggle-option" name=${this.name} value=${this.value} .checked=${this.checked} @change=${this.changed.bind(this)}>
      <label for="toggle-option">
        <slot></slot>
      </label>
    `}});const Aa={fromAttribute:t=>t.split(/\s+/).map((t=>Number.parseFloat(t))),toAttribute:t=>t.length?t.map((t=>t.toFixed(3))).join(" "):null};function La(t){return class extends t{static get properties(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.width=NaN,this.height=NaN,this.rem=NaN}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(this.getDimensions.bind(this)),this.resizeObserver.observe(this)}disconnectedCallback(){this.resizeObserver.unobserve(this),super.disconnectedCallback()}}}class Ga extends va{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return{x:Or[0],a:Or[4],l:Or[5],v:Or[7],p:Or[1],g:Or[2],w:Or[3],u:Or[6],chosen:Or[8],better:"#4545d0",worse:"#f032e6",even:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}}static get lights(){return Object.keys(Ga.colors).reduce(((t,e)=>(t[e]=zi(Ga.colors[e],"#ffffff")(.5),t)),{})}static get darks(){return Object.keys(Ga.colors).reduce(((t,e)=>(t[e]=zi(Ga.colors[e],"#000000")(.5),t)),{})}static get styles(){return[super.styles,o`
        :host {
          ---color-x: var(--color-x, ${s(this.colors.x)});
          ---color-a: var(--color-a, ${s(this.colors.a)});
          ---color-l: var(--color-l, ${s(this.colors.l)});
          ---color-v: var(--color-v, ${s(this.colors.v)});
          ---color-p: var(--color-p, ${s(this.colors.p)});
          ---color-g: var(--color-g, ${s(this.colors.g)});
          ---color-w: var(--color-w, ${s(this.colors.w)});
          ---color-u: var(--color-u, ${s(this.colors.u)});
          ---color-chosen: var(--color-chosen, ${s(this.colors.chosen)});
          ---color-better: var(--color-better, ${s(this.colors.better)});
          ---color-worse: var(--color-worse, ${s(this.colors.worse)});
          ---color-even: var(--color-even, ${s(this.colors.even)});
          ---color-correct: var(--color-correct, ${s(this.colors.correct)});
          ---color-error: var(--color-error, ${s(this.colors.error)});
          ---color-nr: var(--color-nr, ${s(this.colors.nr)});

          ---color-x-light: var(--color-x-light, ${s(this.lights.x)});
          ---color-a-light: var(--color-a-light, ${s(this.lights.a)});
          ---color-l-light: var(--color-l-light, ${s(this.lights.l)});
          ---color-v-light: var(--color-v-light, ${s(this.lights.v)});
          ---color-p-light: var(--color-p-light, ${s(this.lights.p)});
          ---color-g-light: var(--color-g-light, ${s(this.lights.g)});
          ---color-w-light: var(--color-w-light, ${s(this.lights.w)});
          ---color-u-light: var(--color-u-light, ${s(this.lights.u)});
          ---color-chosen-light: var(--color-chosen-light, ${s(this.lights.chosen)});
          ---color-better-light: var(--color-better-light, ${s(this.lights.better)});
          ---color-worse-light: var(--color-worse-light, ${s(this.lights.worse)});
          ---color-even-light: var(--color-even-light, ${s(this.lights.even)});
          ---color-correct-light: var(--color-correct-light, ${s(this.lights.correct)});
          ---color-error-light: var(--color-error-light, ${s(this.lights.error)});
          ---color-nr-light: var(--color-nr-light, ${s(this.lights.nr)});

          ---color-x-dark: var(--color-x-dark, ${s(this.darks.x)});
          ---color-a-dark: var(--color-a-dark, ${s(this.darks.a)});
          ---color-l-dark: var(--color-l-dark, ${s(this.darks.l)});
          ---color-v-dark: var(--color-v-dark, ${s(this.darks.v)});
          ---color-p-dark: var(--color-p-dark, ${s(this.darks.p)});
          ---color-g-dark: var(--color-g-dark, ${s(this.darks.g)});
          ---color-w-dark: var(--color-w-dark, ${s(this.darks.w)});
          ---color-u-dark: var(--color-u-dark, ${s(this.darks.u)});
          ---color-chosen-dark: var(--color-chosen-dark, ${s(this.darks.chosen)});
          ---color-better-dark: var(--color-better-dark, ${s(this.darks.better)});
          ---color-worse-dark: var(--color-worse-dark, ${s(this.darks.worse)});
          ---color-even-dark: var(--color-even-dark, ${s(this.darks.even)});
          ---color-correct-dark: var(--color-correct-dark, ${s(this.darks.correct)});
          ---color-error-dark: var(--color-error-dark, ${s(this.darks.error)});
          ---color-nr-dark: var(--color-nr-dark, ${s(this.darks.nr)});
        }
      `]}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ra=globalThis,Sa=Ra.trustedTypes,wa=Sa?Sa.createPolicy("lit-html",{createHTML:t=>t}):void 0,Va="$lit$",Ea=`lit$${Math.random().toFixed(9).slice(2)}$`,Za="?"+Ea,Na=`<${Za}>`,Da=document,Xa=()=>Da.createComment(""),Ha=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Wa=Array.isArray,ka="[ \t\n\f\r]",Ma=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ta=/-->/g,Ya=/>/g,Ja=RegExp(`>|${ka}(?:([^\\s"'>=/]+)(${ka}*=${ka}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),_a=/'/g,za=/"/g,Oa=/^(?:script|style|textarea|title)$/i,Ka=Symbol.for("lit-noChange"),Pa=Symbol.for("lit-nothing"),ja=new WeakMap,qa=Da.createTreeWalker(Da,129);function $a(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==wa?wa.createHTML(e):e}class ts{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let r=0,a=0;const s=t.length-1,o=this.parts,[l,c]=((t,e)=>{const i=t.length-1,n=[];let r,a=2===e?"<svg>":"",s=Ma;for(let e=0;e<i;e++){const i=t[e];let o,l,c=-1,g=0;for(;g<i.length&&(s.lastIndex=g,l=s.exec(i),null!==l);)g=s.lastIndex,s===Ma?"!--"===l[1]?s=Ta:void 0!==l[1]?s=Ya:void 0!==l[2]?(Oa.test(l[2])&&(r=RegExp("</"+l[2],"g")),s=Ja):void 0!==l[3]&&(s=Ja):s===Ja?">"===l[0]?(s=r??Ma,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,o=l[1],s=void 0===l[3]?Ja:'"'===l[3]?za:_a):s===za||s===_a?s=Ja:s===Ta||s===Ya?s=Ma:(s=Ja,r=void 0);const u=s===Ja&&t[e+1].startsWith("/>")?" ":"";a+=s===Ma?i+Na:c>=0?(n.push(o),i.slice(0,c)+Va+i.slice(c)+Ea+u):i+Ea+(-2===c?e:u)}return[$a(t,a+(t[i]||"<?>")+(2===e?"</svg>":"")),n]})(t,e);if(this.el=ts.createElement(l,i),qa.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(n=qa.nextNode())&&o.length<s;){if(1===n.nodeType){if(n.hasAttributes())for(const t of n.getAttributeNames())if(t.endsWith(Va)){const e=c[a++],i=n.getAttribute(t).split(Ea),s=/([.?@])?(.*)/.exec(e);o.push({type:1,index:r,name:s[2],strings:i,ctor:"."===s[1]?as:"?"===s[1]?ss:"@"===s[1]?os:rs}),n.removeAttribute(t)}else t.startsWith(Ea)&&(o.push({type:6,index:r}),n.removeAttribute(t));if(Oa.test(n.tagName)){const t=n.textContent.split(Ea),e=t.length-1;if(e>0){n.textContent=Sa?Sa.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],Xa()),qa.nextNode(),o.push({type:2,index:++r});n.append(t[e],Xa())}}}else if(8===n.nodeType)if(n.data===Za)o.push({type:2,index:r});else{let t=-1;for(;-1!==(t=n.data.indexOf(Ea,t+1));)o.push({type:7,index:r}),t+=Ea.length-1}r++}}static createElement(t,e){const i=Da.createElement("template");return i.innerHTML=t,i}}function es(t,e,i=t,n){if(e===Ka)return e;let r=void 0!==n?i._$Co?.[n]:i._$Cl;const a=Ha(e)?void 0:e._$litDirective$;return r?.constructor!==a&&(r?._$AO?.(!1),void 0===a?r=void 0:(r=new a(t),r._$AT(t,i,n)),void 0!==n?(i._$Co??=[])[n]=r:i._$Cl=r),void 0!==r&&(e=es(t,r._$AS(t,e.values),r,n)),e}class is{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,n=(t?.creationScope??Da).importNode(e,!0);qa.currentNode=n;let r=qa.nextNode(),a=0,s=0,o=i[0];for(;void 0!==o;){if(a===o.index){let e;2===o.type?e=new ns(r,r.nextSibling,this,t):1===o.type?e=new o.ctor(r,o.name,o.strings,this,t):6===o.type&&(e=new ls(r,this,t)),this._$AV.push(e),o=i[++s]}a!==o?.index&&(r=qa.nextNode(),a++)}return qa.currentNode=Da,n}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class ns{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,n){this.type=2,this._$AH=Pa,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=es(this,t,e),Ha(t)?t===Pa||null==t||""===t?(this._$AH!==Pa&&this._$AR(),this._$AH=Pa):t!==this._$AH&&t!==Ka&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>Wa(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==Pa&&Ha(this._$AH)?this._$AA.nextSibling.data=t:this.T(Da.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,n="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=ts.createElement($a(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(e);else{const t=new is(n,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=ja.get(t.strings);return void 0===e&&ja.set(t.strings,e=new ts(t)),e}k(t){Wa(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,n=0;for(const r of t)n===e.length?e.push(i=new ns(this.S(Xa()),this.S(Xa()),this,this.options)):i=e[n],i._$AI(r),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}let rs=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,n,r){this.type=1,this._$AH=Pa,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Pa}_$AI(t,e=this,i,n){const r=this.strings;let a=!1;if(void 0===r)t=es(this,t,e,0),a=!Ha(t)||t!==this._$AH&&t!==Ka,a&&(this._$AH=t);else{const n=t;let s,o;for(t=r[0],s=0;s<r.length-1;s++)o=es(this,n[i+s],e,s),o===Ka&&(o=this._$AH[s]),a||=!Ha(o)||o!==this._$AH[s],o===Pa?t=Pa:t!==Pa&&(t+=(o??"")+r[s+1]),this._$AH[s]=o}a&&!n&&this.j(t)}j(t){t===Pa?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}};class as extends rs{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Pa?void 0:t}}class ss extends rs{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Pa)}}class os extends rs{constructor(t,e,i,n,r){super(t,e,i,n,r),this.type=5}_$AI(t,e=this){if((t=es(this,t,e,0)??Pa)===Ka)return;const i=this._$AH,n=t===Pa&&i!==Pa||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,r=t!==Pa&&(i===Pa||n);n&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class ls{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){es(this,t)}}const cs=Ra.litHtmlPolyfillSupport;cs?.(ts,ns),(Ra.litHtmlVersions??=[]).push("3.1.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const gs=2;let us=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ds=(t,e)=>{const i=t._$AN;if(void 0===i)return!1;for(const t of i)t._$AO?.(e,!1),ds(t,e);return!0},hs=t=>{let e,i;do{if(void 0===(e=t._$AM))break;i=e._$AN,i.delete(t),t=e}while(0===i?.size)},Bs=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(void 0===i)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),fs(e)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ps(t){void 0!==this._$AN?(hs(this),this._$AM=t,Bs(this)):this._$AM=t}function Fs(t,e=!1,i=0){const n=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(e)if(Array.isArray(n))for(let t=i;t<n.length;t++)ds(n[t],!1),hs(n[t]);else null!=n&&(ds(n,!1),hs(n));else ds(this,t)}const fs=t=>{t.type==gs&&(t._$AP??=Fs,t._$AQ??=ps)};class Qs extends us{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,i){super._$AT(t,e,i),Bs(this),this.isConnected=t._$AU}_$AO(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(ds(this,t),hs(this))}setValue(t){if((t=>void 0===t.strings)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}const Is=new WeakMap;let Us=0;const bs=new Map,ys=new WeakSet,ms=()=>new Promise((t=>requestAnimationFrame(t))),xs=[{transform:"translateX(-100%) scale(0)",opacity:0}],vs=[{opacity:0},{opacity:1}],Cs=(t,e)=>{const i=t-e;return 0===i?void 0:i},As=(t,e)=>{const i=t/e;return 1===i?void 0:i},Ls={left:(t,e)=>{const i=Cs(t,e);return{value:i,transform:null==i||isNaN(i)?void 0:`translateX(${i}px)`}},top:(t,e)=>{const i=Cs(t,e);return{value:i,transform:null==i||isNaN(i)?void 0:`translateY(${i}px)`}},width:(t,e)=>{let i;0===e&&(e=1,i={width:"1px"});const n=As(t,e);return{value:n,overrideFrom:i,transform:null==n||isNaN(n)?void 0:`scaleX(${n})`}},height:(t,e)=>{let i;0===e&&(e=1,i={height:"1px"});const n=As(t,e);return{value:n,overrideFrom:i,transform:null==n||isNaN(n)?void 0:`scaleY(${n})`}}},Gs={duration:333,easing:"ease-in-out"},Rs=["left","top","width","height","opacity","color","background"],Ss=new WeakMap;const ws=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends Qs{constructor(t){if(super(t),this.t=!1,this.i=null,this.o=null,this.h=!0,this.shouldLog=!1,t.type===gs)throw Error("The `animate` directive must be used in attribute position.");this.createFinished()}createFinished(){this.resolveFinished?.(),this.finished=new Promise((t=>{this.l=t}))}async resolveFinished(){this.l?.(),this.l=void 0}render(t){return Pa}getController(){return Is.get(this.u)}isDisabled(){return this.options.disabled||this.getController()?.disabled}update(t,[e]){const i=void 0===this.u;return i&&(this.u=t.options?.host,this.u.addController(this),this.u.updateComplete.then((t=>this.t=!0)),this.element=t.element,Ss.set(this.element,this)),this.optionsOrCallback=e,(i||"function"!=typeof e)&&this.p(e),this.render(e)}p(t){t=t??{};const e=this.getController();void 0!==e&&((t={...e.defaultOptions,...t}).keyframeOptions={...e.defaultOptions.keyframeOptions,...t.keyframeOptions}),t.properties??=Rs,this.options=t}m(){const t={},e=this.element.getBoundingClientRect(),i=getComputedStyle(this.element);return this.options.properties.forEach((n=>{const r=e[n]??(Ls[n]?void 0:i[n]),a=Number(r);t[n]=isNaN(a)?r+"":a})),t}v(){let t,e=!0;return this.options.guard&&(t=this.options.guard(),e=((t,e)=>{if(Array.isArray(t)){if(Array.isArray(e)&&e.length===t.length&&t.every(((t,i)=>t===e[i])))return!1}else if(e===t)return!1;return!0})(t,this._)),this.h=this.t&&!this.isDisabled()&&!this.isAnimating()&&e&&this.element.isConnected,this.h&&(this._=Array.isArray(t)?Array.from(t):t),this.h}hostUpdate(){"function"==typeof this.optionsOrCallback&&this.p(this.optionsOrCallback()),this.v()&&(this.A=this.m(),this.i=this.i??this.element.parentNode,this.o=this.element.nextSibling)}async hostUpdated(){if(!this.h||!this.element.isConnected||this.options.skipInitial&&!this.isHostRendered)return;let t;this.prepare(),await ms;const e=this.O(),i=this.j(this.options.keyframeOptions,e),n=this.m();if(void 0!==this.A){const{from:i,to:r}=this.N(this.A,n,e);this.log("measured",[this.A,n,i,r]),t=this.calculateKeyframes(i,r)}else{const i=bs.get(this.options.inId);if(i){bs.delete(this.options.inId);const{from:r,to:a}=this.N(i,n,e);t=this.calculateKeyframes(r,a),t=this.options.in?[{...this.options.in[0],...t[0]},...this.options.in.slice(1),t[1]]:t,Us++,t.forEach((t=>t.zIndex=Us))}else this.options.in&&(t=[...this.options.in,{}])}this.animate(t,i)}resetStyles(){void 0!==this.P&&(this.element.setAttribute("style",this.P??""),this.P=void 0)}commitStyles(){this.P=this.element.getAttribute("style"),this.webAnimation?.commitStyles(),this.webAnimation?.cancel()}reconnected(){}async disconnected(){if(!this.h)return;if(void 0!==this.options.id&&bs.set(this.options.id,this.A),void 0===this.options.out)return;if(this.prepare(),await ms(),this.i?.isConnected){const t=this.o&&this.o.parentNode===this.i?this.o:null;if(this.i.insertBefore(this.element,t),this.options.stabilizeOut){const t=this.m();this.log("stabilizing out");const e=this.A.left-t.left,i=this.A.top-t.top;!("static"===getComputedStyle(this.element).position)||0===e&&0===i||(this.element.style.position="relative"),0!==e&&(this.element.style.left=e+"px"),0!==i&&(this.element.style.top=i+"px")}}const t=this.j(this.options.keyframeOptions);await this.animate(this.options.out,t),this.element.remove()}prepare(){this.createFinished()}start(){this.options.onStart?.(this)}didFinish(t){t&&this.options.onComplete?.(this),this.A=void 0,this.animatingProperties=void 0,this.frames=void 0,this.resolveFinished()}O(){const t=[];for(let e=this.element.parentNode;e;e=e?.parentNode){const i=Ss.get(e);i&&!i.isDisabled()&&i&&t.push(i)}return t}get isHostRendered(){const t=ys.has(this.u);return t||this.u.updateComplete.then((()=>{ys.add(this.u)})),t}j(t,e=this.O()){const i={...Gs};return e.forEach((t=>Object.assign(i,t.options.keyframeOptions))),Object.assign(i,t),i}N(t,e,i){t={...t},e={...e};const n=i.map((t=>t.animatingProperties)).filter((t=>void 0!==t));let r=1,a=1;return n.length>0&&(n.forEach((t=>{t.width&&(r/=t.width),t.height&&(a/=t.height)})),void 0!==t.left&&void 0!==e.left&&(t.left=r*t.left,e.left=r*e.left),void 0!==t.top&&void 0!==e.top&&(t.top=a*t.top,e.top=a*e.top)),{from:t,to:e}}calculateKeyframes(t,e,i=!1){const n={},r={};let a=!1;const s={};for(const i in e){const o=t[i],l=e[i];if(i in Ls){const t=Ls[i];if(void 0===o||void 0===l)continue;const e=t(o,l);void 0!==e.transform&&(s[i]=e.value,a=!0,n.transform=`${n.transform??""} ${e.transform}`,void 0!==e.overrideFrom&&Object.assign(n,e.overrideFrom))}else o!==l&&void 0!==o&&void 0!==l&&(a=!0,n[i]=o,r[i]=l)}return n.transformOrigin=r.transformOrigin=i?"center center":"top left",this.animatingProperties=s,a?[n,r]:void 0}async animate(t,e=this.options.keyframeOptions){this.start(),this.frames=t;let i=!1;if(!this.isAnimating()&&!this.isDisabled()&&(this.options.onFrames&&(this.frames=t=this.options.onFrames(this),this.log("modified frames",t)),void 0!==t)){this.log("animate",[t,e]),i=!0,this.webAnimation=this.element.animate(t,e);const n=this.getController();n?.add(this);try{await this.webAnimation.finished}catch(t){}n?.remove(this)}return this.didFinish(i),i}isAnimating(){return"running"===this.webAnimation?.playState||this.webAnimation?.pending}log(t,e){this.shouldLog&&!this.isDisabled()&&console.log(t,this.options.id,e)}});class Vs{static xal2v(t,e,i){return t>=0?t**e:-i*(-t)**e}static xlv2a(t,e,i){return t>=0?Math.log(i)/Math.log(t):(Math.log(-i)-Math.log(e))/Math.log(-t)}static xav2l(t,e,i){return t>=0?NaN:-i/(-t)**e}static pg2w(t,e){return t**e/(t**e+(1-t)**e)**(1/e)}static vw2u(t,e){if("number"==typeof t&&"number"==typeof e)return t*e;if(t instanceof Array&&e instanceof Array&&t.length>0&&t.length===e.length){let i=0;for(let n=0;n<t.length;n+=1)i+=t[n]*e[n];return i}return NaN}}class Es extends Ga{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,o`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;
          white-space: nowrap;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        var {
          border-radius: var(---border-radius);
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .brace {
          font-size: 200%;
        }

        .addend {
          position: relative;
          display: inline-block;
        }

        .comparison {
          position: relative;
          display: inline-block;

          font-size: 125%;
          font-weight: 600;
        }

        .function {
          display: inline-block;

          border-radius: var(---border-radius);
        }

        :host([numeric]) .function {
          padding: 0.25rem;
        }

        .exp {
          display: inline-block;

          font-size: 0.75rem;
        }

        .subscript {
          display: inline-block;

          font-size: 66.667%;
        }

        .summation {
          display: flex;

          flex-direction: column;

          line-height: 0.8;
        }

        .sigma {
          display: inline-block;

          font-size: 200%;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          line-height: 1.5;
          vertical-align: middle;

          border-radius: var(---border-radius);
        }

        .n {
          --decidables-spinner-input-width: 2rem;
        }

        .left {
          text-align: left;
        }

        .right {
          text-align: right;
        }

        .bottom {
          vertical-align: bottom;
        }

        .top {
          vertical-align: top;
        }

        /* Color scheme */
        /* .win {
          background: var(---color-better);
        }

        .loss {
          background: var(---color-worse);
        }

        .sure {
          background: var(---color-even);
        } */

        .x {
          background: var(---color-x-light);
        }

        .a {
          background: var(---color-a-light);
        }

        .l {
          background: var(---color-l-light);
        }

        .v {
          background: var(---color-v-light);
        }

        .p {
          background: var(---color-p-light);
        }

        .g {
          background: var(---color-g-light);
        }

        .w {
          background: var(---color-w-light);
        }

        .u {
          background: var(---color-u-light);
        }
      `]}}class Zs extends Es{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.xl=0,this.xw=100,this.pw=.75,this.xs=50,this.a=.8,this.l=1.2,this.g=.8,this.alignState()}alignState(){this.vw=Vs.xal2v(this.xw,this.a,this.l),this.vl=Vs.xal2v(this.xl,this.a,this.l),this.ww=Vs.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=Vs.xal2v(this.xs,this.a,this.l),this.ug=Vs.vw2u([this.vw,this.vl],[this.ww,this.wl]),this.us=this.vs,this.uDiff=this.ug-this.us}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-calculation-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,a:this.a,l:this.l,g:this.g},bubbles:!0}))}xwInput(t){this.xw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}pwInput(t){this.pw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}xsInput(t){this.xs=parseFloat(t.target.value),this.alignState(),this.sendEvent()}static get styles(){return[super.styles,o`
        /* :host {
          display: inline-block;
        } */

        var {
          border-radius: var(---border-radius);
        }

        decidables-spinner {
          border-radius: var(---border-radius);
        }
      `]}willUpdate(){this.alignState()}render(){let t,e,i,n,r,a,s,o,l,c,g,u;this.numeric?(t=Y`<decidables-spinner class="x xw" ?disabled=${!this.interactive} .value="${this.xw}" @input=${this.xwInput.bind(this)}>
          <var class="math-var">x<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,e=Y`<decidables-spinner class="x xl" disabled .value="${this.xl}">
          <var class="math-var">x<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,i=Y`<decidables-spinner class="p pw" ?disabled=${!this.interactive} min="0" max="1" step=".01" .value="${+this.pw.toFixed(2)}" @input=${this.pwInput.bind(this)}>
          <var class="math-var">p<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,n=Y`<decidables-spinner class="x xs" ?disabled=${!this.interactive} .value="${this.xs}" @input=${this.xsInput.bind(this)}>
          <var class="math-var">x<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,r=Y`<decidables-spinner class="v vw" disabled .value="${+this.vw.toFixed(1)}">
          <var class="math-var">v<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,a=Y`<decidables-spinner class="v vl" disabled .value="${+this.vl.toFixed(1)}">
          <var class="math-var">v<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,s=Y`<decidables-spinner class="w ww" disabled .value="${+this.ww.toFixed(2)}">
          <var class="math-var">w<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,o=Y`<decidables-spinner class="w wl" disabled .value="${+this.wl.toFixed(2)}">
          <var class="math-var">w<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,l=Y`<decidables-spinner class="v vs" disabled .value="${+this.vs.toFixed(1)}">
          <var class="math-var">v<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,c=Y`<decidables-spinner class="u ug" disabled .value="${+this.ug.toFixed(1)}">
          <var class="math-var">U<sub class="subscript gamble">gamble</sub></var>
        </decidables-spinner>`,g=Y`<decidables-spinner class="u us" disabled .value="${+this.us.toFixed(1)}">
          <var class="math-var">U<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,u=Y`${this.uDiff>0?Y`<span class="comparison" ${ws({in:vs})}>&gt;</span>`:this.uDiff<0?Y`<span class="comparison" ${ws({in:vs})}>&lt;</span>`:Y`<span class="comparison" ${ws({in:vs})}>=</span>`}`):(t=Y`<var class="math-var x xw">x<sub class="subscript win">win</sub></var>`,e=Y`<var class="math-var x xl">x<sub class="subscript loss">loss</sub></var>`,i=Y`<var class="math-var p pw">p<sub class="subscript win">win</sub></var>`,n=Y`<var class="math-var x xs">x<sub class="subscript sure">sure</sub></var>`,r=Y`<var class="math-var v vw">v<sub class="subscript win">win</sub></var>`,a=Y`<var class="math-var v vl">v<sub class="subscript loss">loss</sub></var>`,s=Y`<var class="math-var w ww">w<sub class="subscript win">win</sub></var>`,o=Y`<var class="math-var w wl">w<sub class="subscript loss">loss</sub></var>`,l=Y`<var class="math-var v vs">v<sub class="subscript sure">sure</sub></var>`,c=Y`<var class="math-var u ug">U<sub class="subscript gamble">gamble</sub></var>`,g=Y`<var class="math-var u us">U<sub class="subscript sure">sure</sub></var>`,u=Y`<span class="comparison">≟</span>`);const d=Y`
      <tr>
        <td class="right">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${t}<span class="paren tight">)</span></span>&nbsp;<span class="function w"><var class="math-var w tight">w</var><span class="paren tight">(</span>${i}<span class="paren tight">)</span></span><span class="plus">+</span><span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${e}<span class="paren tight">)</span></span>&nbsp;<span class="bracket tight">[</span><span class="tight">1</span><span class="minus">−</span><span class="function w"><var class="math-var w">w</var><span class="paren tight">(</span>${i}<span class="paren tight">)</span></span><span class="bracket tight">]</span>
        </td>
        <td>
          ${u}
        </td>
        <td class="left">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${n}<span class="paren tight">)</span></span>
        </td>
      </tr>
      <tr>
        <td class="right">
          ${r}&nbsp;${s}<span class="plus">+</span>${a}&nbsp;${o}
        </td>
        <td>
          ${u}
        </td>
        <td class="left">
          ${l}
        </td>
      </tr>
      <tr>
        <td class="right">
          ${c}
        </td>
        <td>
          ${u}
        </td>
        <td class="left">
          ${g}
        </td>
      </tr>`;return Y`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${d}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-calculation",Zs);var Ns="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ds(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xs(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var i=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),i}var Hs,Ws={},ks={version:"3.0.0"},Ms={exports:{}};Hs=Ms,function(t,e,i){e[t]=e[t]||i(),Hs.exports&&(Hs.exports=e[t])}("Promise",void 0!==Ns?Ns:Ms.exports,(function(){var t,e,i,n=Object.prototype.toString,r="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(t,e,i,n){return Object.defineProperty(t,e,{value:i,writable:!0,configurable:!1!==n})}}catch(e){t=function(t,e,i){return t[e]=i,t}}function a(t,n){i.add(t,n),e||(e=r(i.drain))}function s(t){var e,i=typeof t;return null==t||"object"!=i&&"function"!=i||(e=t.then),"function"==typeof e&&e}function o(){for(var t=0;t<this.chain.length;t++)l(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function l(t,e,i){var n,r;try{!1===e?i.reject(t.msg):(n=!0===e?t.msg:e.call(void 0,t.msg))===i.promise?i.reject(TypeError("Promise-chain cycle")):(r=s(n))?r.call(n,i.resolve,i.reject):i.resolve(n)}catch(t){i.reject(t)}}function c(t){var e,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(e=s(t))?a((function(){var n=new d(i);try{e.call(t,(function(){c.apply(n,arguments)}),(function(){g.apply(n,arguments)}))}catch(t){g.call(n,t)}})):(i.msg=t,i.state=1,i.chain.length>0&&a(o,i))}catch(t){g.call(new d(i),t)}}}function g(t){var e=this;e.triggered||(e.triggered=!0,e.def&&(e=e.def),e.msg=t,e.state=2,e.chain.length>0&&a(o,e))}function u(t,e,i,n){for(var r=0;r<e.length;r++)!function(r){t.resolve(e[r]).then((function(t){i(r,t)}),n)}(r)}function d(t){this.def=t,this.triggered=!1}function h(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function B(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var e=new h(this);this.then=function(t,i){var n={success:"function"!=typeof t||t,failure:"function"==typeof i&&i};return n.promise=new this.constructor((function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");n.resolve=t,n.reject=e})),e.chain.push(n),0!==e.state&&a(o,e),n.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,(function(t){c.call(e,t)}),(function(t){g.call(e,t)}))}catch(t){g.call(e,t)}}i=function(){var t,i,n;function r(t,e){this.fn=t,this.self=e,this.next=void 0}return{add:function(e,a){n=new r(e,a),i?i.next=n:t=n,i=n,n=void 0},drain:function(){var n=t;for(t=i=e=void 0;n;)n.fn.call(n.self),n=n.next}}}();var p=t({},"constructor",B,!1);return B.prototype=p,t(p,"__NPO__",0,!1),t(B,"resolve",(function(t){return t&&"object"==typeof t&&1===t.__NPO__?t:new this((function(e,i){if("function"!=typeof e||"function"!=typeof i)throw TypeError("Not a function");e(t)}))})),t(B,"reject",(function(t){return new this((function(e,i){if("function"!=typeof e||"function"!=typeof i)throw TypeError("Not a function");i(t)}))})),t(B,"all",(function(t){var e=this;return"[object Array]"!=n.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e((function(i,n){if("function"!=typeof i||"function"!=typeof n)throw TypeError("Not a function");var r=t.length,a=Array(r),s=0;u(e,t,(function(t,e){a[t]=e,++s===r&&i(a)}),n)}))})),t(B,"race",(function(t){var e=this;return"[object Array]"!=n.call(t)?e.reject(TypeError("Not an array")):new e((function(i,n){if("function"!=typeof i||"function"!=typeof n)throw TypeError("Not a function");u(e,t,(function(t,e){i(e)}),n)}))})),B}));var Ts={exports:{}},Ys={exports:{}};!function(t){(function(){var e={version:"3.8.2"},i=[].slice,n=function(t){return i.call(t)},r=self.document;function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function s(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(r)try{n(r.documentElement.childNodes)[0].nodeType}catch(t){n=function(t){for(var e=t.length,i=new Array(e);e--;)i[e]=t[e];return i}}if(Date.now||(Date.now=function(){return+new Date}),r)try{r.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var o=this.Element.prototype,l=o.setAttribute,c=o.setAttributeNS,g=this.CSSStyleDeclaration.prototype,u=g.setProperty;o.setAttribute=function(t,e){l.call(this,t,e+"")},o.setAttributeNS=function(t,e,i){c.call(this,t,e,i+"")},g.setProperty=function(t,e,i){u.call(this,t,e+"",i)}}function d(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function h(t){return null===t?NaN:+t}function B(t){return!isNaN(t)}function p(t){return{left:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;t(e[a],i)<0?n=a+1:r=a}return n},right:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;t(e[a],i)>0?r=a:n=a+1}return n}}}e.ascending=d,e.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},e.min=function(t,e){var i,n,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(n=t[r])&&n>=n){i=n;break}for(;++r<a;)null!=(n=t[r])&&i>n&&(i=n)}else{for(;++r<a;)if(null!=(n=e.call(t,t[r],r))&&n>=n){i=n;break}for(;++r<a;)null!=(n=e.call(t,t[r],r))&&i>n&&(i=n)}return i},e.max=function(t,e){var i,n,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(n=t[r])&&n>=n){i=n;break}for(;++r<a;)null!=(n=t[r])&&n>i&&(i=n)}else{for(;++r<a;)if(null!=(n=e.call(t,t[r],r))&&n>=n){i=n;break}for(;++r<a;)null!=(n=e.call(t,t[r],r))&&n>i&&(i=n)}return i},e.extent=function(t,e){var i,n,r,a=-1,s=t.length;if(1===arguments.length){for(;++a<s;)if(null!=(n=t[a])&&n>=n){i=r=n;break}for(;++a<s;)null!=(n=t[a])&&(i>n&&(i=n),r<n&&(r=n))}else{for(;++a<s;)if(null!=(n=e.call(t,t[a],a))&&n>=n){i=r=n;break}for(;++a<s;)null!=(n=e.call(t,t[a],a))&&(i>n&&(i=n),r<n&&(r=n))}return[i,r]},e.sum=function(t,e){var i,n=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)B(i=+t[a])&&(n+=i);else for(;++a<r;)B(i=+e.call(t,t[a],a))&&(n+=i);return n},e.mean=function(t,e){var i,n=0,r=t.length,a=-1,s=r;if(1===arguments.length)for(;++a<r;)B(i=h(t[a]))?n+=i:--s;else for(;++a<r;)B(i=h(e.call(t,t[a],a)))?n+=i:--s;if(s)return n/s},e.quantile=function(t,e){var i=(t.length-1)*e+1,n=Math.floor(i),r=+t[n-1],a=i-n;return a?r+a*(t[n]-r):r},e.median=function(t,i){var n,r=[],a=t.length,s=-1;if(1===arguments.length)for(;++s<a;)B(n=h(t[s]))&&r.push(n);else for(;++s<a;)B(n=h(i.call(t,t[s],s)))&&r.push(n);if(r.length)return e.quantile(r.sort(d),.5)},e.variance=function(t,e){var i,n,r=t.length,a=0,s=0,o=-1,l=0;if(1===arguments.length)for(;++o<r;)B(i=h(t[o]))&&(s+=(n=i-a)*(i-(a+=n/++l)));else for(;++o<r;)B(i=h(e.call(t,t[o],o)))&&(s+=(n=i-a)*(i-(a+=n/++l)));if(l>1)return s/(l-1)},e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};var F=p(d);function f(t){return t.length}e.bisectLeft=F.left,e.bisect=e.bisectRight=F.right,e.bisector=function(t){return p(1===t.length?function(e,i){return d(t(e),i)}:t)},e.shuffle=function(t,e,i){(a=arguments.length)<3&&(i=t.length,a<2&&(e=0));for(var n,r,a=i-e;a;)r=Math.random()*a--|0,n=t[a+e],t[a+e]=t[r+e],t[r+e]=n;return t},e.permute=function(t,e){for(var i=e.length,n=new Array(i);i--;)n[i]=t[e[i]];return n},e.pairs=function(t){for(var e=0,i=t.length-1,n=t[0],r=new Array(i<0?0:i);e<i;)r[e]=[n,n=t[++e]];return r},e.transpose=function(t){if(!(a=t.length))return[];for(var i=-1,n=e.min(t,f),r=new Array(n);++i<n;)for(var a,s=-1,o=r[i]=new Array(a);++s<a;)o[s]=t[s][i];return r},e.zip=function(){return e.transpose(arguments)},e.keys=function(t){var e=[];for(var i in t)e.push(i);return e},e.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},e.entries=function(t){var e=[];for(var i in t)e.push({key:i,value:t[i]});return e},e.merge=function(t){for(var e,i,n,r=t.length,a=-1,s=0;++a<r;)s+=t[a].length;for(i=new Array(s);--r>=0;)for(e=(n=t[r]).length;--e>=0;)i[--s]=n[e];return i};var Q=Math.abs;function I(t,e){for(var i in e)Object.defineProperty(t.prototype,i,{value:e[i],enumerable:!1})}function U(){this._=Object.create(null)}e.range=function(t,e,i){if(arguments.length<3&&(i=1,arguments.length<2&&(e=t,t=0)),(e-t)/i==1/0)throw new Error("infinite range");var n,r=[],a=function(t){var e=1;for(;t*e%1;)e*=10;return e}(Q(i)),s=-1;if(t*=a,e*=a,(i*=a)<0)for(;(n=t+i*++s)>e;)r.push(n/a);else for(;(n=t+i*++s)<e;)r.push(n/a);return r},e.map=function(t,e){var i=new U;if(t instanceof U)t.forEach((function(t,e){i.set(t,e)}));else if(Array.isArray(t)){var n,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)i.set(r,t[r]);else for(;++r<a;)i.set(e.call(t,n=t[r],r),n)}else for(var s in t)i.set(s,t[s]);return i};var b="__proto__",y="\0";function m(t){return(t+="")===b||t[0]===y?y+t:t}function x(t){return(t+="")[0]===y?t.slice(1):t}function v(t){return m(t)in this._}function C(t){return(t=m(t))in this._&&delete this._[t]}function A(){var t=[];for(var e in this._)t.push(x(e));return t}function L(){var t=0;for(var e in this._)++t;return t}function G(){for(var t in this._)return!1;return!0}function R(){this._=Object.create(null)}function S(t){return t}function w(t,e,i){return function(){var n=i.apply(e,arguments);return n===e?t:n}}function V(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var i=0,n=E.length;i<n;++i){var r=E[i]+e;if(r in t)return r}}I(U,{has:v,get:function(t){return this._[m(t)]},set:function(t,e){return this._[m(t)]=e},remove:C,keys:A,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:x(e),value:this._[e]});return t},size:L,empty:G,forEach:function(t){for(var e in this._)t.call(this,x(e),this._[e])}}),e.nest=function(){var t,i,n={},r=[],a=[];function s(e,a,o){if(o>=r.length)return i?i.call(n,a):t?a.sort(t):a;for(var l,c,g,u,d=-1,h=a.length,B=r[o++],p=new U;++d<h;)(u=p.get(l=B(c=a[d])))?u.push(c):p.set(l,[c]);return e?(c=e(),g=function(t,i){c.set(t,s(e,i,o))}):(c={},g=function(t,i){c[t]=s(e,i,o)}),p.forEach(g),c}function o(t,e){if(e>=r.length)return t;var i=[],n=a[e++];return t.forEach((function(t,n){i.push({key:t,values:o(n,e)})})),n?i.sort((function(t,e){return n(t.key,e.key)})):i}return n.map=function(t,e){return s(e,t,0)},n.entries=function(t){return o(s(e.map,t,0),0)},n.key=function(t){return r.push(t),n},n.sortKeys=function(t){return a[r.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return i=t,n},n},e.set=function(t){var e=new R;if(t)for(var i=0,n=t.length;i<n;++i)e.add(t[i]);return e},I(R,{has:v,add:function(t){return this._[m(t+="")]=!0,t},remove:C,values:A,size:L,empty:G,forEach:function(t){for(var e in this._)t.call(this,x(e))}}),e.behavior={},e.rebind=function(t,e){for(var i,n=1,r=arguments.length;++n<r;)t[i=arguments[n]]=w(t,e,e[i]);return t};var E=["webkit","ms","moz","Moz","o","O"];function Z(){}function N(){}function D(t){var e=[],i=new U;function n(){for(var i,n=e,r=-1,a=n.length;++r<a;)(i=n[r].on)&&i.apply(this,arguments);return t}return n.on=function(n,r){var a,s=i.get(n);return arguments.length<2?s&&s.on:(s&&(s.on=null,e=e.slice(0,a=e.indexOf(s)).concat(e.slice(a+1)),i.remove(n)),r&&e.push(i.set(n,{on:r})),t)},n}function X(){e.event.preventDefault()}function H(){for(var t,i=e.event;t=i.sourceEvent;)i=t;return i}function W(t){for(var i=new N,n=0,r=arguments.length;++n<r;)i[arguments[n]]=D(i);return i.of=function(n,r){return function(a){try{var s=a.sourceEvent=e.event;a.target=t,e.event=a,i[a.type].apply(n,r)}finally{e.event=s}}},i}e.dispatch=function(){for(var t=new N,e=-1,i=arguments.length;++e<i;)t[arguments[e]]=D(t);return t},N.prototype.on=function(t,e){var i=t.indexOf("."),n="";if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},e.event=null,e.requote=function(t){return t.replace(k,"\\$&")};var k=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,M={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)t[i]=e[i]};function T(t){return M(t,z),t}var Y=function(t,e){return e.querySelector(t)},J=function(t,e){return e.querySelectorAll(t)},_=function(t,e){var i=t.matches||t[V(t,"matchesSelector")];return _=function(t,e){return i.call(t,e)},_(t,e)};"function"==typeof Sizzle&&(Y=function(t,e){return Sizzle(t,e)[0]||null},J=Sizzle,_=Sizzle.matchesSelector),e.selection=function(){return e.select(r.documentElement)};var z=e.selection.prototype=[];function O(t){return"function"==typeof t?t:function(){return Y(t,this)}}function K(t){return"function"==typeof t?t:function(){return J(t,this)}}z.select=function(t){var e,i,n,r,a=[];t=O(t);for(var s=-1,o=this.length;++s<o;){a.push(e=[]),e.parentNode=(n=this[s]).parentNode;for(var l=-1,c=n.length;++l<c;)(r=n[l])?(e.push(i=t.call(r,r.__data__,l,s)),i&&"__data__"in r&&(i.__data__=r.__data__)):e.push(null)}return T(a)},z.selectAll=function(t){var e,i,r=[];t=K(t);for(var a=-1,s=this.length;++a<s;)for(var o=this[a],l=-1,c=o.length;++l<c;)(i=o[l])&&(r.push(e=n(t.call(i,i.__data__,l,a))),e.parentNode=i);return T(r)};var P="http://www.w3.org/1999/xhtml",j={svg:"http://www.w3.org/2000/svg",xhtml:P,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q(t,i){return t=e.ns.qualify(t),null==i?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof i?t.local?function(){var e=i.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=i.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,i)}:function(){this.setAttribute(t,i)}}function $(t){return t.trim().replace(/\s+/g," ")}function tt(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function it(t,e){var i=(t=et(t).map(nt)).length;return"function"==typeof e?function(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}:function(){for(var n=-1;++n<i;)t[n](this,e)}}function nt(t){var e=tt(t);return function(i,n){if(r=i.classList)return n?r.add(t):r.remove(t);var r=i.getAttribute("class")||"";n?(e.lastIndex=0,e.test(r)||i.setAttribute("class",$(r+" "+t))):i.setAttribute("class",$(r.replace(e," ")))}}function rt(t,e,i){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}:function(){this.style.setProperty(t,e,i)}}function at(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}:function(){this[t]=e}}function st(t){return"function"==typeof t?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,i=this.namespaceURI;return i===P&&e.documentElement.namespaceURI===P?e.createElement(t):e.createElementNS(i,t)}}function ot(){var t=this.parentNode;t&&t.removeChild(this)}function lt(t){return{__data__:t}}function ct(t){return function(){return _(this,t)}}function gt(t){return arguments.length||(t=d),function(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}}function ut(t,e){for(var i=0,n=t.length;i<n;i++)for(var r,a=t[i],s=0,o=a.length;s<o;s++)(r=a[s])&&e(r,s,i);return t}function dt(t){return M(t,ht),t}e.ns={prefix:j,qualify:function(t){var e=t.indexOf(":"),i=t;return e>=0&&"xmlns"!==(i=t.slice(0,e))&&(t=t.slice(e+1)),j.hasOwnProperty(i)?{space:j[i],local:t}:t}},z.attr=function(t,i){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=e.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(i in t)this.each(q(i,t[i]));return this}return this.each(q(t,i))},z.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node(),n=(t=et(t)).length,r=-1;if(e=i.classList){for(;++r<n;)if(!e.contains(t[r]))return!1}else for(e=i.getAttribute("class");++r<n;)if(!tt(t[r]).test(e))return!1;return!0}for(e in t)this.each(it(e,t[e]));return this}return this.each(it(t,e))},z.style=function(t,e,i){var n=arguments.length;if(n<3){if("string"!=typeof t){for(i in n<2&&(e=""),t)this.each(rt(i,t[i],e));return this}if(n<2){var r=this.node();return s(r).getComputedStyle(r,null).getPropertyValue(t)}i=""}return this.each(rt(t,e,i))},z.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},z.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},z.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},z.append=function(t){return t=st(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},z.insert=function(t,e){return t=st(t),e=O(e),this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},z.remove=function(){return this.each(ot)},z.data=function(t,e){var i,n,r=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(i=this[0]).length);++r<a;)(n=i[r])&&(t[r]=n.__data__);return t}function s(t,i){var n,r,a,s=t.length,g=i.length,u=Math.min(s,g),d=new Array(g),h=new Array(g),B=new Array(s);if(e){var p,F=new U,f=new Array(s);for(n=-1;++n<s;)(r=t[n])&&(F.has(p=e.call(r,r.__data__,n))?B[n]=r:F.set(p,r),f[n]=p);for(n=-1;++n<g;)(r=F.get(p=e.call(i,a=i[n],n)))?!0!==r&&(d[n]=r,r.__data__=a):h[n]=lt(a),F.set(p,!0);for(n=-1;++n<s;)n in f&&!0!==F.get(f[n])&&(B[n]=t[n])}else{for(n=-1;++n<u;)r=t[n],a=i[n],r?(r.__data__=a,d[n]=r):h[n]=lt(a);for(;n<g;++n)h[n]=lt(i[n]);for(;n<s;++n)B[n]=t[n]}h.update=d,h.parentNode=d.parentNode=B.parentNode=t.parentNode,o.push(h),l.push(d),c.push(B)}var o=dt([]),l=T([]),c=T([]);if("function"==typeof t)for(;++r<a;)s(i=this[r],t.call(i,i.parentNode.__data__,r));else for(;++r<a;)s(i=this[r],t);return l.enter=function(){return o},l.exit=function(){return c},l},z.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},z.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=ct(t));for(var a=0,s=this.length;a<s;a++){r.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var o=0,l=i.length;o<l;o++)(n=i[o])&&t.call(n,n.__data__,o,a)&&e.push(n)}return T(r)},z.order=function(){for(var t=-1,e=this.length;++t<e;)for(var i,n=this[t],r=n.length-1,a=n[r];--r>=0;)(i=n[r])&&(a&&a!==i.nextSibling&&a.parentNode.insertBefore(i,a),a=i);return this},z.sort=function(t){t=gt.apply(this,arguments);for(var e=-1,i=this.length;++e<i;)this[e].sort(t);return this.order()},z.each=function(t){return ut(this,(function(e,i,n){t.call(e,e.__data__,i,n)}))},z.call=function(t){var e=n(arguments);return t.apply(e[0]=this,e),this},z.empty=function(){return!this.node()},z.node=function(){for(var t=0,e=this.length;t<e;t++)for(var i=this[t],n=0,r=i.length;n<r;n++){var a=i[n];if(a)return a}return null},z.size=function(){var t=0;return ut(this,(function(){++t})),t};var ht=[];function Bt(t,i,r){var a="__on"+t,s=t.indexOf("."),o=Ft;s>0&&(t=t.slice(0,s));var l=pt.get(t);function c(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}return l&&(t=l,o=ft),s?i?function(){var e=o(i,n(arguments));c.call(this),this.addEventListener(t,this[a]=e,e.$=r),e._=i}:c:i?Z:function(){var i,n=new RegExp("^__on([^.]+)"+e.requote(t)+"$");for(var r in this)if(i=r.match(n)){var a=this[r];this.removeEventListener(i[1],a,a.$),delete this[r]}}}e.selection.enter=dt,e.selection.enter.prototype=ht,ht.append=z.append,ht.empty=z.empty,ht.node=z.node,ht.call=z.call,ht.size=z.size,ht.select=function(t){for(var e,i,n,r,a,s=[],o=-1,l=this.length;++o<l;){n=(r=this[o]).update,s.push(e=[]),e.parentNode=r.parentNode;for(var c=-1,g=r.length;++c<g;)(a=r[c])?(e.push(n[c]=i=t.call(r.parentNode,a.__data__,c,o)),i.__data__=a.__data__):e.push(null)}return T(s)},ht.insert=function(t,e){var i,n,r;return arguments.length<2&&(i=this,e=function(t,e,a){var s,o=i[a].update,l=o.length;for(a!=r&&(r=a,n=0),e>=n&&(n=e+1);!(s=o[n])&&++n<l;);return s}),z.insert.call(this,t,e)},e.select=function(t){var e;return"string"==typeof t?(e=[Y(t,r)]).parentNode=r.documentElement:(e=[t]).parentNode=a(t),T([e])},e.selectAll=function(t){var e;return"string"==typeof t?(e=n(J(t,r))).parentNode=r.documentElement:(e=n(t)).parentNode=null,T([e])},z.on=function(t,e,i){var n=arguments.length;if(n<3){if("string"!=typeof t){for(i in n<2&&(e=!1),t)this.each(Bt(i,t[i],e));return this}if(n<2)return(n=this.node()["__on"+t])&&n._;i=!1}return this.each(Bt(t,e,i))};var pt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ft(t,i){return function(n){var r=e.event;e.event=n,i[0]=this.__data__;try{t.apply(this,i)}finally{e.event=r}}}function ft(t,e){var i=Ft(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||i.call(e,t)}}r&&pt.forEach((function(t){"on"+t in r&&pt.remove(t)}));var Qt,It=0;function Ut(t){var i=".dragsuppress-"+ ++It,n="click"+i,r=e.select(s(t)).on("touchmove"+i,X).on("dragstart"+i,X).on("selectstart"+i,X);if(null==Qt&&(Qt=!("onselectstart"in t)&&V(t.style,"userSelect")),Qt){var o=a(t).style,l=o[Qt];o[Qt]="none"}return function(t){if(r.on(i,null),Qt&&(o[Qt]=l),t){var e=function(){r.on(n,null)};r.on(n,(function(){X(),e()}),!0),setTimeout(e,0)}}}e.mouse=function(t){return yt(t,H())};var bt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function yt(t,i){i.changedTouches&&(i=i.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(bt<0){var a=s(t);if(a.scrollX||a.scrollY){var o=(n=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();bt=!(o.f||o.e),n.remove()}}return bt?(r.x=i.pageX,r.y=i.pageY):(r.x=i.clientX,r.y=i.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var l=t.getBoundingClientRect();return[i.clientX-l.left-t.clientLeft,i.clientY-l.top-t.clientTop]}function mt(){return e.event.changedTouches[0].identifier}e.touch=function(t,e,i){if(arguments.length<3&&(i=e,e=H().changedTouches),e)for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).identifier===i)return yt(t,n)},e.behavior.drag=function(){var t=W(a,"drag","dragstart","dragend"),i=null,n=o(Z,e.mouse,s,"mousemove","mouseup"),r=o(mt,e.touch,S,"touchmove","touchend");function a(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,a,s,o){return function(){var l,c=this,g=e.event.target.correspondingElement||e.event.target,u=c.parentNode,d=t.of(c,arguments),h=0,B=n(),p=".drag"+(null==B?"":"-"+B),F=e.select(a(g)).on(s+p,(function(){var t,e,i=r(u,B);if(!i)return;t=i[0]-Q[0],e=i[1]-Q[1],h|=t|e,Q=i,d({type:"drag",x:i[0]+l[0],y:i[1]+l[1],dx:t,dy:e})})).on(o+p,(function(){if(!r(u,B))return;F.on(s+p,null).on(o+p,null),f(h),d({type:"dragend"})})),f=Ut(g),Q=r(u,B);l=i?[(l=i.apply(c,arguments)).x-Q[0],l.y-Q[1]]:[0,0],d({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(i=t,a):i},e.rebind(a,t,"on")},e.touches=function(t,e){return arguments.length<2&&(e=H().touches),e?n(e).map((function(e){var i=yt(t,e);return i.identifier=e.identifier,i})):[]};var xt=1e-6,vt=xt*xt,Ct=Math.PI,At=2*Ct,Lt=At-xt,Gt=Ct/2,Rt=Ct/180,St=180/Ct;function wt(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0])}function Vt(t){return t>1?Gt:t<-1?-Gt:Math.asin(t)}function Et(t){return((t=Math.exp(t))+1/t)/2}var Zt=Math.SQRT2;e.interpolateZoom=function(t,e){var i,n,r=t[0],a=t[1],s=t[2],o=e[0],l=e[1],c=e[2],g=o-r,u=l-a,d=g*g+u*u;if(d<vt)n=Math.log(c/s)/Zt,i=function(t){return[r+t*g,a+t*u,s*Math.exp(Zt*t*n)]};else{var h=Math.sqrt(d),B=(c*c-s*s+4*d)/(2*s*2*h),p=(c*c-s*s-4*d)/(2*c*2*h),F=Math.log(Math.sqrt(B*B+1)-B),f=Math.log(Math.sqrt(p*p+1)-p);n=(f-F)/Zt,i=function(t){var e=t*n,i=Et(F),o=s/(2*h)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Zt*e+F)-function(t){return((t=Math.exp(t))-1/t)/2}(F));return[r+o*g,a+o*u,s*i/Et(Zt*e+F)]}}return i.duration=1e3*n,i},e.behavior.zoom=function(){var t,i,n,a,o,l,c,g,u,d={x:0,y:0,k:1},h=[960,500],B=Xt,p=250,F=0,f="mousedown.zoom",Q="mousemove.zoom",I="mouseup.zoom",U="touchstart.zoom",b=W(y,"zoomstart","zoom","zoomend");function y(t){t.on(f,S).on(Dt+".zoom",V).on("dblclick.zoom",E).on(U,w)}function m(t){return[(t[0]-d.x)/d.k,(t[1]-d.y)/d.k]}function x(t){d.k=Math.max(B[0],Math.min(B[1],t))}function v(t,e){e=function(t){return[t[0]*d.k+d.x,t[1]*d.k+d.y]}(e),d.x+=t[0]-e[0],d.y+=t[1]-e[1]}function C(t,n,r,a){t.__chart__={x:d.x,y:d.y,k:d.k},x(Math.pow(2,a)),v(i=n,r),t=e.select(t),p>0&&(t=t.transition().duration(p)),t.call(y.event)}function A(){c&&c.domain(l.range().map((function(t){return(t-d.x)/d.k})).map(l.invert)),u&&u.domain(g.range().map((function(t){return(t-d.y)/d.k})).map(g.invert))}function L(t){F++||t({type:"zoomstart"})}function G(t){A(),t({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function R(t){--F||(t({type:"zoomend"}),i=null)}function S(){var t=this,i=b.of(t,arguments),n=0,r=e.select(s(t)).on(Q,(function(){n=1,v(e.mouse(t),a),G(i)})).on(I,(function(){r.on(Q,null).on(I,null),o(n),R(i)})),a=m(e.mouse(t)),o=Ut(t);Pr.call(t),L(i)}function w(){var t,i=this,n=b.of(i,arguments),r={},a=0,s=".zoom-"+e.event.changedTouches[0].identifier,l="touchmove"+s,c="touchend"+s,g=[],u=e.select(i),h=Ut(i);function B(){var n=e.touches(i);return t=d.k,n.forEach((function(t){t.identifier in r&&(r[t.identifier]=m(t))})),n}function p(){var t=e.event.target;e.select(t).on(l,F).on(c,Q),g.push(t);for(var n=e.event.changedTouches,s=0,u=n.length;s<u;++s)r[n[s].identifier]=null;var h=B(),p=Date.now();if(1===h.length){if(p-o<500){var f=h[0];C(i,f,r[f.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),X()}o=p}else if(h.length>1){f=h[0];var I=h[1],U=f[0]-I[0],b=f[1]-I[1];a=U*U+b*b}}function F(){var s,l,c,g,u=e.touches(i);Pr.call(i);for(var d=0,h=u.length;d<h;++d,g=null)if(c=u[d],g=r[c.identifier]){if(l)break;s=c,l=g}if(g){var B=(B=c[0]-s[0])*B+(B=c[1]-s[1])*B,p=a&&Math.sqrt(B/a);s=[(s[0]+c[0])/2,(s[1]+c[1])/2],l=[(l[0]+g[0])/2,(l[1]+g[1])/2],x(p*t)}o=null,v(s,l),G(n)}function Q(){if(e.event.touches.length){for(var t=e.event.changedTouches,i=0,a=t.length;i<a;++i)delete r[t[i].identifier];for(var o in r)return void B()}e.selectAll(g).on(s,null),u.on(f,S).on(U,w),h(),R(n)}p(),L(n),u.on(f,null).on(U,p)}function V(){var r=b.of(this,arguments);a?clearTimeout(a):(Pr.call(this),t=m(i=n||e.mouse(this)),L(r)),a=setTimeout((function(){a=null,R(r)}),50),X(),x(Math.pow(2,.002*Nt())*d.k),v(i,t),G(r)}function E(){var t=e.mouse(this),i=Math.log(d.k)/Math.LN2;C(this,t,m(t),e.event.shiftKey?Math.ceil(i)-1:Math.floor(i)+1)}return Dt||(Dt="onwheel"in r?(Nt=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(Nt=function(){return e.event.wheelDelta},"mousewheel"):(Nt=function(){return-e.event.detail},"MozMousePixelScroll")),y.event=function(t){t.each((function(){var t=b.of(this,arguments),n=d;$r?e.select(this).transition().each("start.zoom",(function(){d=this.__chart__||{x:0,y:0,k:1},L(t)})).tween("zoom:zoom",(function(){var r=h[0],a=h[1],s=i?i[0]:r/2,o=i?i[1]:a/2,l=e.interpolateZoom([(s-d.x)/d.k,(o-d.y)/d.k,r/d.k],[(s-n.x)/n.k,(o-n.y)/n.k,r/n.k]);return function(e){var i=l(e),n=r/i[2];this.__chart__=d={x:s-i[0]*n,y:o-i[1]*n,k:n},G(t)}})).each("interrupt.zoom",(function(){R(t)})).each("end.zoom",(function(){R(t)})):(this.__chart__=d,L(t),G(t),R(t))}))},y.translate=function(t){return arguments.length?(d={x:+t[0],y:+t[1],k:d.k},A(),y):[d.x,d.y]},y.scale=function(t){return arguments.length?(d={x:d.x,y:d.y,k:null},x(+t),A(),y):d.k},y.scaleExtent=function(t){return arguments.length?(B=null==t?Xt:[+t[0],+t[1]],y):B},y.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],y):n},y.size=function(t){return arguments.length?(h=t&&[+t[0],+t[1]],y):h},y.duration=function(t){return arguments.length?(p=+t,y):p},y.x=function(t){return arguments.length?(c=t,l=t.copy(),d={x:0,y:0,k:1},y):c},y.y=function(t){return arguments.length?(u=t,g=t.copy(),d={x:0,y:0,k:1},y):u},e.rebind(y,b,"on")};var Nt,Dt,Xt=[0,1/0];function Ht(){}function Wt(t,e,i){return this instanceof Wt?(this.h=+t,this.s=+e,void(this.l=+i)):arguments.length<2?t instanceof Wt?new Wt(t.h,t.s,t.l):le(""+t,ce,Wt):new Wt(t,e,i)}e.color=Ht,Ht.prototype.toString=function(){return this.rgb()+""},e.hsl=Wt;var kt=Wt.prototype=new Ht;function Mt(t,e,i){var n,r;function a(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?n+(r-n)*t/60:t<180?r:t<240?n+(r-n)*(240-t)/60:n}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,n=2*(i=i<0?0:i>1?1:i)-(r=i<=.5?i*(1+e):i+e-i*e),new ne(a(t+120),a(t),a(t-120))}function Tt(t,i,n){return this instanceof Tt?(this.h=+t,this.c=+i,void(this.l=+n)):arguments.length<2?t instanceof Tt?new Tt(t.h,t.c,t.l):$t(t instanceof _t?t.l:(t=ge((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Tt(t,i,n)}kt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Wt(this.h,this.s,this.l/t)},kt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Wt(this.h,this.s,t*this.l)},kt.rgb=function(){return Mt(this.h,this.s,this.l)},e.hcl=Tt;var Yt=Tt.prototype=new Ht;function Jt(t,e,i){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new _t(i,Math.cos(t*=Rt)*e,Math.sin(t)*e)}function _t(t,e,i){return this instanceof _t?(this.l=+t,this.a=+e,void(this.b=+i)):arguments.length<2?t instanceof _t?new _t(t.l,t.a,t.b):t instanceof Tt?Jt(t.h,t.c,t.l):ge((t=ne(t)).r,t.g,t.b):new _t(t,e,i)}Yt.brighter=function(t){return new Tt(this.h,this.c,Math.min(100,this.l+zt*(arguments.length?t:1)))},Yt.darker=function(t){return new Tt(this.h,this.c,Math.max(0,this.l-zt*(arguments.length?t:1)))},Yt.rgb=function(){return Jt(this.h,this.c,this.l).rgb()},e.lab=_t;var zt=18,Ot=.95047,Kt=1,Pt=1.08883,jt=_t.prototype=new Ht;function qt(t,e,i){var n=(t+16)/116,r=n+e/500,a=n-i/200;return new ne(ie(3.2404542*(r=te(r)*Ot)-1.5371385*(n=te(n)*Kt)-.4985314*(a=te(a)*Pt)),ie(-.969266*r+1.8760108*n+.041556*a),ie(.0556434*r-.2040259*n+1.0572252*a))}function $t(t,e,i){return t>0?new Tt(Math.atan2(i,e)*St,Math.sqrt(e*e+i*i),t):new Tt(NaN,NaN,t)}function te(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ee(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ie(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ne(t,e,i){return this instanceof ne?(this.r=~~t,this.g=~~e,void(this.b=~~i)):arguments.length<2?t instanceof ne?new ne(t.r,t.g,t.b):le(""+t,ne,Mt):new ne(t,e,i)}function re(t){return new ne(t>>16,t>>8&255,255&t)}function ae(t){return re(t)+""}jt.brighter=function(t){return new _t(Math.min(100,this.l+zt*(arguments.length?t:1)),this.a,this.b)},jt.darker=function(t){return new _t(Math.max(0,this.l-zt*(arguments.length?t:1)),this.a,this.b)},jt.rgb=function(){return qt(this.l,this.a,this.b)},e.rgb=ne;var se=ne.prototype=new Ht;function oe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function le(t,e,i){var n,r,a,s=0,o=0,l=0;if(n=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=n[2].split(","),n[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(de(r[0]),de(r[1]),de(r[2]))}return(a=he.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&a)>>4,s|=s>>4,o=240&a,o|=o>>4,l=15&a,l|=l<<4):7===t.length&&(s=(16711680&a)>>16,o=(65280&a)>>8,l=255&a)),e(s,o,l))}function ce(t,e,i){var n,r,a=Math.min(t/=255,e/=255,i/=255),s=Math.max(t,e,i),o=s-a,l=(s+a)/2;return o?(r=l<.5?o/(s+a):o/(2-s-a),n=t==s?(e-i)/o+(e<i?6:0):e==s?(i-t)/o+2:(t-e)/o+4,n*=60):(n=NaN,r=l>0&&l<1?0:n),new Wt(n,r,l)}function ge(t,e,i){var n=ee((.4124564*(t=ue(t))+.3575761*(e=ue(e))+.1804375*(i=ue(i)))/Ot),r=ee((.2126729*t+.7151522*e+.072175*i)/Kt);return _t(116*r-16,500*(n-r),200*(r-ee((.0193339*t+.119192*e+.9503041*i)/Pt)))}function ue(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function de(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}se.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,i=this.g,n=this.b,r=30;return e||i||n?(e&&e<r&&(e=r),i&&i<r&&(i=r),n&&n<r&&(n=r),new ne(Math.min(255,e/t),Math.min(255,i/t),Math.min(255,n/t))):new ne(r,r,r)},se.darker=function(t){return new ne((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},se.hsl=function(){return ce(this.r,this.g,this.b)},se.toString=function(){return"#"+oe(this.r)+oe(this.g)+oe(this.b)};var he=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Be(t){return"function"==typeof t?t:function(){return t}}function pe(t){return function(e,i,n){return 2===arguments.length&&"function"==typeof i&&(n=i,i=null),Fe(e,i,t,n)}}function Fe(t,i,r,a){var s={},o=e.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,g=null;function u(){var t,e=c.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||e>=200&&e<300||304===e){try{t=r.call(s,c)}catch(t){return void o.error.call(s,t)}o.load.call(s,t)}else o.error.call(s,c)}return self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(t)&&(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(t){var i=e.event;e.event=t;try{o.progress.call(s,c)}finally{e.event=i}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(i=null==t?null:t+"",s):i},s.responseType=function(t){return arguments.length?(g=t,s):g},s.response=function(t){return r=t,s},["get","post"].forEach((function(t){s[t]=function(){return s.send.apply(s,[t].concat(n(arguments)))}})),s.send=function(e,n,r){if(2===arguments.length&&"function"==typeof n&&(r=n,n=null),c.open(e,t,!0),null==i||"accept"in l||(l.accept=i+",*/*"),c.setRequestHeader)for(var a in l)c.setRequestHeader(a,l[a]);return null!=i&&c.overrideMimeType&&c.overrideMimeType(i),null!=g&&(c.responseType=g),null!=r&&s.on("error",r).on("load",(function(t){r(null,t)})),o.beforesend.call(s,c),c.send(null==n?null:n),s},s.abort=function(){return c.abort(),s},e.rebind(s,o,"on"),null==a?s:s.get(function(t){return 1===t.length?function(e,i){t(null==e?i:null)}:t}(a))}he.forEach((function(t,e){he.set(t,re(e))})),e.functor=Be,e.xhr=pe(S),e.dsv=function(t,e){var i=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function r(t,i,n){arguments.length<3&&(n=i,i=null);var r=Fe(t,e,null==i?a:s(i),n);return r.row=function(t){return arguments.length?r.response(null==(i=t)?a:s(t)):i},r}function a(t){return r.parse(t.responseText)}function s(t){return function(e){return r.parse(e.responseText,t)}}function o(e){return e.map(l).join(t)}function l(t){return i.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return r.parse=function(t,e){var i;return r.parseRows(t,(function(t,n){if(i)return i(t,n-1);var r=function(e){for(var i={},n=t.length,r=0;r<n;++r)i[t[r]]=e[r];return i};i=e?function(t,i){return e(r(t),i)}:r}))},r.parseRows=function(t,e){var i,r,a={},s={},o=[],l=t.length,c=0,g=0;function u(){if(c>=l)return s;if(r)return r=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var i=e;i++<l;)if(34===t.charCodeAt(i)){if(34!==t.charCodeAt(i+1))break;++i}return c=i+2,13===(o=t.charCodeAt(i+1))?(r=!0,10===t.charCodeAt(i+2)&&++c):10===o&&(r=!0),t.slice(e+1,i).replace(/""/g,'"')}for(;c<l;){var o,g=1;if(10===(o=t.charCodeAt(c++)))r=!0;else if(13===o)r=!0,10===t.charCodeAt(c)&&(++c,++g);else if(o!==n)continue;return t.slice(e,c-g)}return t.slice(e)}for(;(i=u())!==s;){for(var d=[];i!==a&&i!==s;)d.push(i),i=u();e&&null==(d=e(d,g++))||o.push(d)}return o},r.format=function(e){if(Array.isArray(e[0]))return r.formatRows(e);var i=new R,n=[];return e.forEach((function(t){for(var e in t)i.has(e)||n.push(i.add(e))})),[n.map(l).join(t)].concat(e.map((function(e){return n.map((function(t){return l(e[t])})).join(t)}))).join("\n")},r.formatRows=function(t){return t.map(o).join("\n")},r},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("\t","text/tab-separated-values");var fe,Qe,Ie,Ue,be=this[V(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ye(t,e,i){var n=arguments.length;n<2&&(e=0),n<3&&(i=Date.now());var r={c:t,t:i+e,n:null};return Qe?Qe.n=r:fe=r,Qe=r,Ie||(Ue=clearTimeout(Ue),Ie=1,be(me)),r}function me(){var t=xe(),e=ve()-t;e>24?(isFinite(e)&&(clearTimeout(Ue),Ue=setTimeout(me,e)),Ie=0):(Ie=1,be(me))}function xe(){for(var t=Date.now(),e=fe;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function ve(){for(var t,e=fe,i=1/0;e;)e.c?(e.t<i&&(i=e.t),e=(t=e).n):e=t?t.n=e.n:fe=e.n;return Qe=t,i}function Ce(t){return t[0]}function Ae(t){return t[1]}function Le(t){for(var e=t.length,i=[0,1],n=2,r=2;r<e;r++){for(;n>1&&wt(t[i[n-2]],t[i[n-1]],t[r])<=0;)--n;i[n++]=r}return i.slice(0,n)}function Ge(t,e){return t[0]-e[0]||t[1]-e[1]}e.timer=function(){ye.apply(this,arguments)},e.timer.flush=function(){xe(),ve()},e.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},e.geom={},e.geom.hull=function(t){var e=Ce,i=Ae;if(arguments.length)return n(t);function n(t){if(t.length<3)return[];var n,r=Be(e),a=Be(i),s=t.length,o=[],l=[];for(n=0;n<s;n++)o.push([+r.call(this,t[n],n),+a.call(this,t[n],n),n]);for(o.sort(Ge),n=0;n<s;n++)l.push([o[n][0],-o[n][1]]);var c=Le(o),g=Le(l),u=g[0]===c[0],d=g[g.length-1]===c[c.length-1],h=[];for(n=c.length-1;n>=0;--n)h.push(t[o[c[n]][2]]);for(n=+u;n<g.length-d;++n)h.push(t[o[g[n]][2]]);return h}return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(i=t,n):i},n},e.geom.polygon=function(t){return M(t,Re),t};var Re=e.geom.polygon.prototype=[];function Se(t,e,i){return(i[0]-e[0])*(t[1]-e[1])<(i[1]-e[1])*(t[0]-e[0])}function we(t,e,i,n){var r=t[0],a=i[0],s=e[0]-r,o=n[0]-a,l=t[1],c=i[1],g=e[1]-l,u=n[1]-c,d=(o*(l-c)-u*(r-a))/(u*s-o*g);return[r+d*s,l+d*g]}function Ve(t){var e=t[0],i=t[t.length-1];return!(e[0]-i[0]||e[1]-i[1])}Re.area=function(){for(var t,e=-1,i=this.length,n=this[i-1],r=0;++e<i;)t=n,n=this[e],r+=t[1]*n[0]-t[0]*n[1];return.5*r},Re.centroid=function(t){var e,i,n=-1,r=this.length,a=0,s=0,o=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++n<r;)e=o,o=this[n],i=e[0]*o[1]-o[0]*e[1],a+=(e[0]+o[0])*i,s+=(e[1]+o[1])*i;return[a*t,s*t]},Re.clip=function(t){for(var e,i,n,r,a,s,o=Ve(t),l=-1,c=this.length-Ve(this),g=this[c-1];++l<c;){for(e=t.slice(),t.length=0,r=this[l],a=e[(n=e.length-o)-1],i=-1;++i<n;)Se(s=e[i],g,r)?(Se(a,g,r)||t.push(we(a,s,g,r)),t.push(s)):Se(a,g,r)&&t.push(we(a,s,g,r)),a=s;o&&t.push(t[0]),g=r}return t};var Ee,Ze,Ne,De,Xe,He=[],We=[];function ke(){si(this),this.edge=this.site=this.circle=null}function Me(t){var e=He.pop()||new ke;return e.site=t,e}function Te(t){qe(t),Ne.remove(t),He.push(t),si(t)}function Ye(t){var e=t.circle,i=e.x,n=e.cy,r={x:i,y:n},a=t.P,s=t.N,o=[t];Te(t);for(var l=a;l.circle&&Q(i-l.circle.x)<xt&&Q(n-l.circle.cy)<xt;)a=l.P,o.unshift(l),Te(l),l=a;o.unshift(l),qe(l);for(var c=s;c.circle&&Q(i-c.circle.x)<xt&&Q(n-c.circle.cy)<xt;)s=c.N,o.push(c),Te(c),c=s;o.push(c),qe(c);var g,u=o.length;for(g=1;g<u;++g)c=o[g],l=o[g-1],ni(c.edge,l.site,c.site,r);l=o[0],(c=o[u-1]).edge=ei(l.site,c.site,null,r),je(l),je(c)}function Je(t){for(var e,i,n,r,a=t.x,s=t.y,o=Ne._;o;)if((n=_e(o,s)-a)>xt)o=o.L;else{if(!((r=a-ze(o,s))>xt)){n>-1e-6?(e=o.P,i=o):r>-1e-6?(e=o,i=o.N):e=i=o;break}if(!o.R){e=o;break}o=o.R}var l=Me(t);if(Ne.insert(e,l),e||i){if(e===i)return qe(e),i=Me(e.site),Ne.insert(l,i),l.edge=i.edge=ei(e.site,l.site),je(e),void je(i);if(i){qe(e),qe(i);var c=e.site,g=c.x,u=c.y,d=t.x-g,h=t.y-u,B=i.site,p=B.x-g,F=B.y-u,f=2*(d*F-h*p),Q=d*d+h*h,I=p*p+F*F,U={x:(F*Q-h*I)/f+g,y:(d*I-p*Q)/f+u};ni(i.edge,c,B,U),l.edge=ei(c,t,null,U),i.edge=ei(t,B,null,U),je(e),je(i)}else l.edge=ei(e.site,l.site)}}function _e(t,e){var i=t.site,n=i.x,r=i.y,a=r-e;if(!a)return n;var s=t.P;if(!s)return-1/0;var o=(i=s.site).x,l=i.y,c=l-e;if(!c)return o;var g=o-n,u=1/a-1/c,d=g/c;return u?(-d+Math.sqrt(d*d-2*u*(g*g/(-2*c)-l+c/2+r-a/2)))/u+n:(n+o)/2}function ze(t,e){var i=t.N;if(i)return _e(i,e);var n=t.site;return n.y===e?n.x:1/0}function Oe(t){this.site=t,this.edges=[]}function Ke(t,e){return e.angle-t.angle}function Pe(){si(this),this.x=this.y=this.arc=this.site=this.cy=null}function je(t){var e=t.P,i=t.N;if(e&&i){var n=e.site,r=t.site,a=i.site;if(n!==a){var s=r.x,o=r.y,l=n.x-s,c=n.y-o,g=a.x-s,u=2*(l*(F=a.y-o)-c*g);if(!(u>=-1e-12)){var d=l*l+c*c,h=g*g+F*F,B=(F*d-c*h)/u,p=(l*h-g*d)/u,F=p+o,f=We.pop()||new Pe;f.arc=t,f.site=r,f.x=B+s,f.y=F+Math.sqrt(B*B+p*p),f.cy=F,t.circle=f;for(var Q=null,I=Xe._;I;)if(f.y<I.y||f.y===I.y&&f.x<=I.x){if(!I.L){Q=I.P;break}I=I.L}else{if(!I.R){Q=I;break}I=I.R}Xe.insert(Q,f),Q||(De=f)}}}}function qe(t){var e=t.circle;e&&(e.P||(De=e.N),Xe.remove(e),We.push(e),si(e),t.circle=null)}function $e(t,e){var i=t.b;if(i)return!0;var n,r,a=t.a,s=e[0][0],o=e[1][0],l=e[0][1],c=e[1][1],g=t.l,u=t.r,d=g.x,h=g.y,B=u.x,p=u.y,F=(d+B)/2,f=(h+p)/2;if(p===h){if(F<s||F>=o)return;if(d>B){if(a){if(a.y>=c)return}else a={x:F,y:l};i={x:F,y:c}}else{if(a){if(a.y<l)return}else a={x:F,y:c};i={x:F,y:l}}}else if(r=f-(n=(d-B)/(p-h))*F,n<-1||n>1)if(d>B){if(a){if(a.y>=c)return}else a={x:(l-r)/n,y:l};i={x:(c-r)/n,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-r)/n,y:c};i={x:(l-r)/n,y:l}}else if(h<p){if(a){if(a.x>=o)return}else a={x:s,y:n*s+r};i={x:o,y:n*o+r}}else{if(a){if(a.x<s)return}else a={x:o,y:n*o+r};i={x:s,y:n*s+r}}return t.a=a,t.b=i,!0}function ti(t,e){this.l=t,this.r=e,this.a=this.b=null}function ei(t,e,i,n){var r=new ti(t,e);return Ee.push(r),i&&ni(r,t,e,i),n&&ni(r,e,t,n),Ze[t.i].edges.push(new ri(r,t,e)),Ze[e.i].edges.push(new ri(r,e,t)),r}function ii(t,e,i){var n=new ti(t,null);return n.a=e,n.b=i,Ee.push(n),n}function ni(t,e,i,n){t.a||t.b?t.l===i?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=i)}function ri(t,e,i){var n=t.a,r=t.b;this.edge=t,this.site=e,this.angle=i?Math.atan2(i.y-e.y,i.x-e.x):t.l===e?Math.atan2(r.x-n.x,n.y-r.y):Math.atan2(n.x-r.x,r.y-n.y)}function ai(){this._=null}function si(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function oi(t,e){var i=e,n=e.R,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function li(t,e){var i=e,n=e.L,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function ci(t){for(;t.L;)t=t.L;return t}function gi(t,e){var i,n,r,a=t.sort(ui).pop();for(Ee=[],Ze=new Array(t.length),Ne=new ai,Xe=new ai;;)if(r=De,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))a.x===i&&a.y===n||(Ze[a.i]=new Oe(a),Je(a),i=a.x,n=a.y),a=t.pop();else{if(!r)break;Ye(r.arc)}e&&(function(t){for(var e,i,n,r,a,s=Ee,o=(i=t[0][0],n=t[0][1],r=t[1][0],a=t[1][1],function(t){var e,s=t.a,o=t.b,l=s.x,c=s.y,g=0,u=1,d=o.x-l,h=o.y-c;if(e=i-l,d||!(e>0)){if(e/=d,d<0){if(e<g)return;e<u&&(u=e)}else if(d>0){if(e>u)return;e>g&&(g=e)}if(e=r-l,d||!(e<0)){if(e/=d,d<0){if(e>u)return;e>g&&(g=e)}else if(d>0){if(e<g)return;e<u&&(u=e)}if(e=n-c,h||!(e>0)){if(e/=h,h<0){if(e<g)return;e<u&&(u=e)}else if(h>0){if(e>u)return;e>g&&(g=e)}if(e=a-c,h||!(e<0)){if(e/=h,h<0){if(e>u)return;e>g&&(g=e)}else if(h>0){if(e<g)return;e<u&&(u=e)}return g>0&&(t.a={x:l+g*d,y:c+g*h}),u<1&&(t.b={x:l+u*d,y:c+u*h}),t}}}}}),l=s.length;l--;)(!$e(e=s[l],t)||!o(e)||Q(e.a.x-e.b.x)<xt&&Q(e.a.y-e.b.y)<xt)&&(e.a=e.b=null,s.splice(l,1))}(e),function(t){for(var e,i,n,r,a,s,o,l,c,g,u=t[0][0],d=t[1][0],h=t[0][1],B=t[1][1],p=Ze,F=p.length;F--;)if((a=p[F])&&a.prepare())for(l=(o=a.edges).length,s=0;s<l;)n=(g=o[s].end()).x,r=g.y,e=(c=o[++s%l].start()).x,i=c.y,(Q(n-e)>xt||Q(r-i)>xt)&&(o.splice(s,0,new ri(ii(a.site,g,Q(n-u)<xt&&B-r>xt?{x:u,y:Q(e-u)<xt?i:B}:Q(r-B)<xt&&d-n>xt?{x:Q(i-B)<xt?e:d,y:B}:Q(n-d)<xt&&r-h>xt?{x:d,y:Q(e-d)<xt?i:h}:Q(r-h)<xt&&n-u>xt?{x:Q(i-h)<xt?e:u,y:h}:null),a.site,null)),++l)}(e));var s={cells:Ze,edges:Ee};return Ne=Xe=Ee=Ze=null,s}function ui(t,e){return e.y-t.y||e.x-t.x}Oe.prototype.prepare=function(){for(var t,e=this.edges,i=e.length;i--;)(t=e[i].edge).b&&t.a||e.splice(i,1);return e.sort(Ke),e.length},ri.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ai.prototype={insert:function(t,e){var i,n,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=ci(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(n=i.U).L?(r=n.R)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.R&&(oi(this,i),i=(t=i).U),i.C=!1,n.C=!0,li(this,n)):(r=n.L)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.L&&(li(this,i),i=(t=i).U),i.C=!1,n.C=!0,oi(this,n)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,n,r=t.U,a=t.L,s=t.R;if(i=a?s?ci(s):a:s,r?r.L===t?r.L=i:r.R=i:this._=i,a&&s?(n=i.C,i.C=t.C,i.L=a,a.U=i,i!==s?(r=i.U,i.U=t.U,t=i.R,r.L=t,i.R=s,s.U=i):(i.U=r,r=i,t=i.R)):(n=t.C,t=i),t&&(t.U=r),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,oi(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,li(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,oi(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,li(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,oi(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,li(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},e.geom.voronoi=function(t){var e=Ce,i=Ae,n=e,r=i,a=di;if(t)return s(t);function s(t){var e=new Array(t.length),i=a[0][0],n=a[0][1],r=a[1][0],s=a[1][1];return gi(o(t),a).cells.forEach((function(a,o){var l=a.edges,c=a.site,g=e[o]=l.length?l.map((function(t){var e=t.start();return[e.x,e.y]})):c.x>=i&&c.x<=r&&c.y>=n&&c.y<=s?[[i,s],[r,s],[r,n],[i,n]]:[];g.point=t[o]})),e}function o(t){return t.map((function(t,e){return{x:Math.round(n(t,e)/xt)*xt,y:Math.round(r(t,e)/xt)*xt,i:e}}))}return s.links=function(t){return gi(o(t)).edges.filter((function(t){return t.l&&t.r})).map((function(e){return{source:t[e.l.i],target:t[e.r.i]}}))},s.triangles=function(t){var e=[];return gi(o(t)).cells.forEach((function(i,n){for(var r,a=i.site,s=i.edges.sort(Ke),o=-1,l=s.length,c=s[l-1].edge,g=c.l===a?c.r:c.l;++o<l;)r=g,g=(c=s[o].edge).l===a?c.r:c.l,n<r.i&&n<g.i&&hi(a,r,g)<0&&e.push([t[n],t[r.i],t[g.i]])})),e},s.x=function(t){return arguments.length?(n=Be(e=t),s):e},s.y=function(t){return arguments.length?(r=Be(i=t),s):i},s.clipExtent=function(t){return arguments.length?(a=null==t?di:t,s):a===di?null:a},s.size=function(t){return arguments.length?s.clipExtent(t&&[[0,0],t]):a===di?null:a&&a[1]},s};var di=[[-1e6,-1e6],[1e6,1e6]];function hi(t,e,i){return(t.x-i.x)*(e.y-t.y)-(t.x-e.x)*(i.y-t.y)}function Bi(t){return t.x}function pi(t){return t.y}function Fi(t,e,i,n,r,a){if(!t(e,i,n,r,a)){var s=.5*(i+r),o=.5*(n+a),l=e.nodes;l[0]&&Fi(t,l[0],i,n,s,o),l[1]&&Fi(t,l[1],s,n,r,o),l[2]&&Fi(t,l[2],i,o,s,a),l[3]&&Fi(t,l[3],s,o,r,a)}}function fi(t,i){t=e.rgb(t),i=e.rgb(i);var n=t.r,r=t.g,a=t.b,s=i.r-n,o=i.g-r,l=i.b-a;return function(t){return"#"+oe(Math.round(n+s*t))+oe(Math.round(r+o*t))+oe(Math.round(a+l*t))}}function Qi(t,e){var i,n={},r={};for(i in t)i in e?n[i]=mi(t[i],e[i]):r[i]=t[i];for(i in e)i in t||(r[i]=e[i]);return function(t){for(i in n)r[i]=n[i](t);return r}}function Ii(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function Ui(t,e){var i,n,r,a=bi.lastIndex=yi.lastIndex=0,s=-1,o=[],l=[];for(t+="",e+="";(i=bi.exec(t))&&(n=yi.exec(e));)(r=n.index)>a&&(r=e.slice(a,r),o[s]?o[s]+=r:o[++s]=r),(i=i[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,l.push({i:s,x:Ii(i,n)})),a=yi.lastIndex;return a<e.length&&(r=e.slice(a),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var i,n=0;n<e;++n)o[(i=l[n]).i]=i.x(t);return o.join("")})}e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(t,e,i,n,r){var a,s=Ce,o=Ae;if(a=arguments.length)return s=Bi,o=pi,3===a&&(r=i,n=e,i=e=0),l(t);function l(t){var l,c,g,u,d,h,B,p,F,f=Be(s),I=Be(o);if(null!=e)h=e,B=i,p=n,F=r;else if(p=F=-(h=B=1/0),c=[],g=[],d=t.length,a)for(u=0;u<d;++u)(l=t[u]).x<h&&(h=l.x),l.y<B&&(B=l.y),l.x>p&&(p=l.x),l.y>F&&(F=l.y),c.push(l.x),g.push(l.y);else for(u=0;u<d;++u){var U=+f(l=t[u],u),b=+I(l,u);U<h&&(h=U),b<B&&(B=b),U>p&&(p=U),b>F&&(F=b),c.push(U),g.push(b)}var y=p-h,m=F-B;function x(t,e,i,n,r,a,s,o){if(!isNaN(i)&&!isNaN(n))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(Q(l-i)+Q(c-n)<.01)v(t,e,i,n,r,a,s,o);else{var g=t.point;t.x=t.y=t.point=null,v(t,g,l,c,r,a,s,o),v(t,e,i,n,r,a,s,o)}else t.x=i,t.y=n,t.point=e}else v(t,e,i,n,r,a,s,o)}function v(t,e,i,n,r,a,s,o){var l=.5*(r+s),c=.5*(a+o),g=i>=l,u=n>=c,d=u<<1|g;t.leaf=!1,g?r=l:s=l,u?a=c:o=c,x(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,i,n,r,a,s,o)}y>m?F=B+y:p=h+m;var C={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){x(C,t,+f(t,++u),+I(t,u),h,B,p,F)}};if(C.visit=function(t){Fi(t,C,h,B,p,F)},C.find=function(t){return function(t,e,i,n,r,a,s){var o,l=1/0;return function t(c,g,u,d,h){if(!(g>a||u>s||d<n||h<r)){if(B=c.point){var B,p=e-c.x,F=i-c.y,f=p*p+F*F;if(f<l){var Q=Math.sqrt(l=f);n=e-Q,r=i-Q,a=e+Q,s=i+Q,o=B}}for(var I=c.nodes,U=.5*(g+d),b=.5*(u+h),y=(i>=b)<<1|e>=U,m=y+4;y<m;++y)if(c=I[3&y])switch(3&y){case 0:t(c,g,u,U,b);break;case 1:t(c,U,u,d,b);break;case 2:t(c,g,b,U,h);break;case 3:t(c,U,b,d,h)}}}(t,n,r,a,s),o}(C,t[0],t[1],h,B,p,F)},u=-1,null==e){for(;++u<d;)x(C,t[u],c[u],g[u],h,B,p,F);--u}else t.forEach(C.add);return c=g=t=l=null,C}return l.x=function(t){return arguments.length?(s=t,l):s},l.y=function(t){return arguments.length?(o=t,l):o},l.extent=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=+t[0][0],i=+t[0][1],n=+t[1][0],r=+t[1][1]),l):null==e?null:[[e,i],[n,r]]},l.size=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=i=0,n=+t[0],r=+t[1]),l):null==e?null:[n-e,r-i]},l},e.interpolateRgb=fi,e.interpolateObject=Qi,e.interpolateNumber=Ii,e.interpolateString=Ui;var bi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yi=new RegExp(bi.source,"g");function mi(t,i){for(var n,r=e.interpolators.length;--r>=0&&!(n=e.interpolators[r](t,i)););return n}function xi(t,e){var i,n=[],r=[],a=t.length,s=e.length,o=Math.min(t.length,e.length);for(i=0;i<o;++i)n.push(mi(t[i],e[i]));for(;i<a;++i)r[i]=t[i];for(;i<s;++i)r[i]=e[i];return function(t){for(i=0;i<o;++i)r[i]=n[i](t);return r}}e.interpolate=mi,e.interpolators=[function(t,e){var i=typeof e;return("string"===i?he.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?fi:Ui:e instanceof Ht?fi:Array.isArray(e)?xi:"object"===i&&isNaN(e)?Qi:Ii)(t,e)}],e.interpolateArray=xi;var vi=function(){return S},Ci=e.map({linear:vi,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return Ri},cubic:function(){return Si},sin:function(){return Vi},exp:function(){return Ei},circle:function(){return Zi},elastic:function(t,e){var i;arguments.length<2&&(e=.45);arguments.length?i=e/At*Math.asin(1/t):(t=1,i=e/4);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-i)*At/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return Ni}}),Ai=e.map({in:S,out:Li,"in-out":Gi,"out-in":function(t){return Gi(Li(t))}});function Li(t){return function(e){return 1-t(1-e)}}function Gi(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Ri(t){return t*t}function Si(t){return t*t*t}function wi(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}function Vi(t){return 1-Math.cos(t*Gt)}function Ei(t){return Math.pow(2,10*(t-1))}function Zi(t){return 1-Math.sqrt(1-t*t)}function Ni(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Di(t,e){return e-=t,function(i){return Math.round(t+e*i)}}function Xi(t){var e=[t.a,t.b],i=[t.c,t.d],n=Wi(e),r=Hi(e,i),a=Wi(function(t,e,i){return t[0]+=i*e[0],t[1]+=i*e[1],t}(i,e,-r))||0;e[0]*i[1]<i[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,r*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-i[0],i[1]))*St,this.translate=[t.e,t.f],this.scale=[n,a],this.skew=a?Math.atan2(r,a)*St:0}function Hi(t,e){return t[0]*e[0]+t[1]*e[1]}function Wi(t){var e=Math.sqrt(Hi(t,t));return e&&(t[0]/=e,t[1]/=e),e}e.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=Ci.get(n)||vi,function(t){return function(e){return e<=0?0:e>=1?1:t(e)}}((r=Ai.get(r)||S)(n.apply(null,i.call(arguments,1))))},e.interpolateHcl=function(t,i){t=e.hcl(t),i=e.hcl(i);var n=t.h,r=t.c,a=t.l,s=i.h-n,o=i.c-r,l=i.l-a;isNaN(o)&&(o=0,r=isNaN(r)?i.c:r);isNaN(s)?(s=0,n=isNaN(n)?i.h:n):s>180?s-=360:s<-180&&(s+=360);return function(t){return Jt(n+s*t,r+o*t,a+l*t)+""}},e.interpolateHsl=function(t,i){t=e.hsl(t),i=e.hsl(i);var n=t.h,r=t.s,a=t.l,s=i.h-n,o=i.s-r,l=i.l-a;isNaN(o)&&(o=0,r=isNaN(r)?i.s:r);isNaN(s)?(s=0,n=isNaN(n)?i.h:n):s>180?s-=360:s<-180&&(s+=360);return function(t){return Mt(n+s*t,r+o*t,a+l*t)+""}},e.interpolateLab=function(t,i){t=e.lab(t),i=e.lab(i);var n=t.l,r=t.a,a=t.b,s=i.l-n,o=i.a-r,l=i.b-a;return function(t){return qt(n+s*t,r+o*t,a+l*t)+""}},e.interpolateRound=Di,e.transform=function(t){var i=r.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(t){if(null!=t){i.setAttribute("transform",t);var e=i.transform.baseVal.consolidate()}return new Xi(e?e.matrix:ki)})(t)},Xi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ki={a:1,b:0,c:0,d:1,e:0,f:0};function Mi(t){return t.length?t.pop()+",":""}function Ti(t,i){var n=[],r=[];return t=e.transform(t),i=e.transform(i),function(t,e,i,n){if(t[0]!==e[0]||t[1]!==e[1]){var r=i.push("translate(",null,",",null,")");n.push({i:r-4,x:Ii(t[0],e[0])},{i:r-2,x:Ii(t[1],e[1])})}else(e[0]||e[1])&&i.push("translate("+e+")")}(t.translate,i.translate,n,r),function(t,e,i,n){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),n.push({i:i.push(Mi(i)+"rotate(",null,")")-2,x:Ii(t,e)})):e&&i.push(Mi(i)+"rotate("+e+")")}(t.rotate,i.rotate,n,r),function(t,e,i,n){t!==e?n.push({i:i.push(Mi(i)+"skewX(",null,")")-2,x:Ii(t,e)}):e&&i.push(Mi(i)+"skewX("+e+")")}(t.skew,i.skew,n,r),function(t,e,i,n){if(t[0]!==e[0]||t[1]!==e[1]){var r=i.push(Mi(i)+"scale(",null,",",null,")");n.push({i:r-4,x:Ii(t[0],e[0])},{i:r-2,x:Ii(t[1],e[1])})}else 1===e[0]&&1===e[1]||i.push(Mi(i)+"scale("+e+")")}(t.scale,i.scale,n,r),t=i=null,function(t){for(var e,i=-1,a=r.length;++i<a;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function Yi(t,e){return e=(e-=t=+t)||1/e,function(i){return(i-t)/e}}function Ji(t,e){return e=(e-=t=+t)||1/e,function(i){return Math.max(0,Math.min(1,(i-t)/e))}}function _i(t){for(var e=t.source,i=t.target,n=function(t,e){if(t===e)return t;var i=zi(t),n=zi(e),r=i.pop(),a=n.pop(),s=null;for(;r===a;)s=r,r=i.pop(),a=n.pop();return s}(e,i),r=[e];e!==n;)e=e.parent,r.push(e);for(var a=r.length;i!==n;)r.splice(a,0,i),i=i.parent;return r}function zi(t){for(var e=[],i=t.parent;null!=i;)e.push(t),t=i,i=i.parent;return e.push(t),e}function Oi(t){t.fixed|=2}function Ki(t){t.fixed&=-7}function Pi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ji(t){t.fixed&=-5}function qi(t,e,i){var n=0,r=0;if(t.charge=0,!t.leaf)for(var a,s=t.nodes,o=s.length,l=-1;++l<o;)null!=(a=s[l])&&(qi(a,e,i),t.charge+=a.charge,n+=a.charge*a.cx,r+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*i[t.point.index];t.charge+=t.pointCharge=c,n+=c*t.point.x,r+=c*t.point.y}t.cx=n/t.charge,t.cy=r/t.charge}e.interpolateTransform=Ti,e.layout={},e.layout.bundle=function(){return function(t){for(var e=[],i=-1,n=t.length;++i<n;)e.push(_i(t[i]));return e}},e.layout.chord=function(){var t,i,n,r,a,s,o,l={},c=0;function g(){var l,g,d,h,B,p={},F=[],f=e.range(r),Q=[];for(t=[],i=[],l=0,h=-1;++h<r;){for(g=0,B=-1;++B<r;)g+=n[h][B];F.push(g),Q.push(e.range(r)),l+=g}for(a&&f.sort((function(t,e){return a(F[t],F[e])})),s&&Q.forEach((function(t,e){t.sort((function(t,i){return s(n[e][t],n[e][i])}))})),l=(At-c*r)/l,g=0,h=-1;++h<r;){for(d=g,B=-1;++B<r;){var I=f[h],U=Q[I][B],b=n[I][U],y=g,m=g+=b*l;p[I+"-"+U]={index:I,subindex:U,startAngle:y,endAngle:m,value:b}}i[I]={index:I,startAngle:d,endAngle:g,value:F[I]},g+=c}for(h=-1;++h<r;)for(B=h-1;++B<r;){var x=p[h+"-"+B],v=p[B+"-"+h];(x.value||v.value)&&t.push(x.value<v.value?{source:v,target:x}:{source:x,target:v})}o&&u()}function u(){t.sort((function(t,e){return o((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)}))}return l.matrix=function(e){return arguments.length?(r=(n=e)&&n.length,t=i=null,l):n},l.padding=function(e){return arguments.length?(c=e,t=i=null,l):c},l.sortGroups=function(e){return arguments.length?(a=e,t=i=null,l):a},l.sortSubgroups=function(e){return arguments.length?(s=e,t=null,l):s},l.sortChords=function(e){return arguments.length?(o=e,t&&u(),l):o},l.chords=function(){return t||g(),t},l.groups=function(){return i||g(),i},l},e.layout.force=function(){var t,i,n,r,a,s,o={},l=e.dispatch("start","tick","end"),c=[1,1],g=.9,u=$i,d=tn,h=-30,B=en,p=.1,F=.64,f=[],Q=[];function I(t){return function(e,i,n,r){if(e.point!==t){var a=e.cx-t.x,s=e.cy-t.y,o=r-i,l=a*a+s*s;if(o*o/F<l){if(l<B){var c=e.charge/l;t.px-=a*c,t.py-=s*c}return!0}if(e.point&&l&&l<B){c=e.pointCharge/l;t.px-=a*c,t.py-=s*c}}return!e.charge}}function U(t){t.px=e.event.x,t.py=e.event.y,o.resume()}return o.tick=function(){if((n*=.99)<.005)return t=null,l.end({type:"end",alpha:n=0}),!0;var i,o,u,d,B,F,U,b,y,m=f.length,x=Q.length;for(o=0;o<x;++o)d=(u=Q[o]).source,(F=(b=(B=u.target).x-d.x)*b+(y=B.y-d.y)*y)&&(b*=F=n*a[o]*((F=Math.sqrt(F))-r[o])/F,y*=F,B.x-=b*(U=d.weight+B.weight?d.weight/(d.weight+B.weight):.5),B.y-=y*U,d.x+=b*(U=1-U),d.y+=y*U);if((U=n*p)&&(b=c[0]/2,y=c[1]/2,o=-1,U))for(;++o<m;)(u=f[o]).x+=(b-u.x)*U,u.y+=(y-u.y)*U;if(h)for(qi(i=e.geom.quadtree(f),n,s),o=-1;++o<m;)(u=f[o]).fixed||i.visit(I(u));for(o=-1;++o<m;)(u=f[o]).fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*g,u.y-=(u.py-(u.py=u.y))*g);l.tick({type:"tick",alpha:n})},o.nodes=function(t){return arguments.length?(f=t,o):f},o.links=function(t){return arguments.length?(Q=t,o):Q},o.size=function(t){return arguments.length?(c=t,o):c},o.linkDistance=function(t){return arguments.length?(u="function"==typeof t?t:+t,o):u},o.distance=o.linkDistance,o.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,o):d},o.friction=function(t){return arguments.length?(g=+t,o):g},o.charge=function(t){return arguments.length?(h="function"==typeof t?t:+t,o):h},o.chargeDistance=function(t){return arguments.length?(B=t*t,o):Math.sqrt(B)},o.gravity=function(t){return arguments.length?(p=+t,o):p},o.theta=function(t){return arguments.length?(F=t*t,o):Math.sqrt(F)},o.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:n=0})):e>0&&(l.start({type:"start",alpha:n=e}),t=ye(o.tick)),o):n},o.start=function(){var t,e,i,n=f.length,l=Q.length,g=c[0],B=c[1];for(t=0;t<n;++t)(i=f[t]).index=t,i.weight=0;for(t=0;t<l;++t)"number"==typeof(i=Q[t]).source&&(i.source=f[i.source]),"number"==typeof i.target&&(i.target=f[i.target]),++i.source.weight,++i.target.weight;for(t=0;t<n;++t)i=f[t],isNaN(i.x)&&(i.x=p("x",g)),isNaN(i.y)&&(i.y=p("y",B)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof u)for(t=0;t<l;++t)r[t]=+u.call(this,Q[t],t);else for(t=0;t<l;++t)r[t]=u;if(a=[],"function"==typeof d)for(t=0;t<l;++t)a[t]=+d.call(this,Q[t],t);else for(t=0;t<l;++t)a[t]=d;if(s=[],"function"==typeof h)for(t=0;t<n;++t)s[t]=+h.call(this,f[t],t);else for(t=0;t<n;++t)s[t]=h;function p(i,r){if(!e){for(e=new Array(n),c=0;c<n;++c)e[c]=[];for(c=0;c<l;++c){var a=Q[c];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var s,o=e[t],c=-1,g=o.length;++c<g;)if(!isNaN(s=o[c][i]))return s;return Math.random()*r}return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){if(i||(i=e.behavior.drag().origin(S).on("dragstart.force",Oi).on("drag.force",U).on("dragend.force",Ki)),!arguments.length)return i;this.on("mouseover.force",Pi).on("mouseout.force",ji).call(i)},e.rebind(o,l,"on")};var $i=20,tn=1,en=1/0;function nn(t,i){return e.rebind(t,i,"sort","children","value"),t.nodes=t,t.links=cn,t}function rn(t,e){for(var i=[t];null!=(t=i.pop());)if(e(t),(r=t.children)&&(n=r.length))for(var n,r;--n>=0;)i.push(r[n])}function an(t,e){for(var i=[t],n=[];null!=(t=i.pop());)if(n.push(t),(a=t.children)&&(r=a.length))for(var r,a,s=-1;++s<r;)i.push(a[s]);for(;null!=(t=n.pop());)e(t)}function sn(t){return t.children}function on(t){return t.value}function ln(t,e){return e.value-t.value}function cn(t){return e.merge(t.map((function(t){return(t.children||[]).map((function(e){return{source:t,target:e}}))})))}e.layout.hierarchy=function(){var t=ln,e=sn,i=on;function n(r){var a,s=[r],o=[];for(r.depth=0;null!=(a=s.pop());)if(o.push(a),(c=e.call(n,a,a.depth))&&(l=c.length)){for(var l,c,g;--l>=0;)s.push(g=c[l]),g.parent=a,g.depth=a.depth+1;i&&(a.value=0),a.children=c}else i&&(a.value=+i.call(n,a,a.depth)||0),delete a.children;return an(r,(function(e){var n,r;t&&(n=e.children)&&n.sort(t),i&&(r=e.parent)&&(r.value+=e.value)})),o}return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(i=t,n):i},n.revalue=function(t){return i&&(rn(t,(function(t){t.children&&(t.value=0)})),an(t,(function(t){var e;t.children||(t.value=+i.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)}))),t},n},e.layout.partition=function(){var t=e.layout.hierarchy(),i=[1,1];function n(t,e,i,r){var a=t.children;if(t.x=e,t.y=t.depth*r,t.dx=i,t.dy=r,a&&(s=a.length)){var s,o,l,c=-1;for(i=t.value?i/t.value:0;++c<s;)n(o=a[c],e,l=o.value*i,r),e+=l}}function r(t){var e=t.children,i=0;if(e&&(n=e.length))for(var n,a=-1;++a<n;)i=Math.max(i,r(e[a]));return 1+i}function a(e,a){var s=t.call(this,e,a);return n(s[0],0,i[0],i[1]/r(s[0])),s}return a.size=function(t){return arguments.length?(i=t,a):i},nn(a,t)},e.layout.pie=function(){var t=Number,i=gn,n=0,r=At,a=0;function s(o){var l,c=o.length,g=o.map((function(e,i){return+t.call(s,e,i)})),u=+("function"==typeof n?n.apply(this,arguments):n),d=("function"==typeof r?r.apply(this,arguments):r)-u,h=Math.min(Math.abs(d)/c,+("function"==typeof a?a.apply(this,arguments):a)),B=h*(d<0?-1:1),p=e.sum(g),F=p?(d-c*B)/p:0,f=e.range(c),Q=[];return null!=i&&f.sort(i===gn?function(t,e){return g[e]-g[t]}:function(t,e){return i(o[t],o[e])}),f.forEach((function(t){Q[t]={data:o[t],value:l=g[t],startAngle:u,endAngle:u+=l*F+B,padAngle:h}})),Q}return s.value=function(e){return arguments.length?(t=e,s):t},s.sort=function(t){return arguments.length?(i=t,s):i},s.startAngle=function(t){return arguments.length?(n=t,s):n},s.endAngle=function(t){return arguments.length?(r=t,s):r},s.padAngle=function(t){return arguments.length?(a=t,s):a},s};var gn={};function un(t){return t.x}function dn(t){return t.y}function hn(t,e,i){t.y0=e,t.y=i}e.layout.stack=function(){var t=S,i=Fn,n=fn,r=hn,a=un,s=dn;function o(l,c){if(!(h=l.length))return l;var g=l.map((function(e,i){return t.call(o,e,i)})),u=g.map((function(t){return t.map((function(t,e){return[a.call(o,t,e),s.call(o,t,e)]}))})),d=i.call(o,u,c);g=e.permute(g,d),u=e.permute(u,d);var h,B,p,F,f=n.call(o,u,c),Q=g[0].length;for(p=0;p<Q;++p)for(r.call(o,g[0][p],F=f[p],u[0][p][1]),B=1;B<h;++B)r.call(o,g[B][p],F+=u[B-1][p][1],u[B][p][1]);return l}return o.values=function(e){return arguments.length?(t=e,o):t},o.order=function(t){return arguments.length?(i="function"==typeof t?t:Bn.get(t)||Fn,o):i},o.offset=function(t){return arguments.length?(n="function"==typeof t?t:pn.get(t)||fn,o):n},o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(s=t,o):s},o.out=function(t){return arguments.length?(r=t,o):r},o};var Bn=e.map({"inside-out":function(t){var i,n,r=t.length,a=t.map(Qn),s=t.map(In),o=e.range(r).sort((function(t,e){return a[t]-a[e]})),l=0,c=0,g=[],u=[];for(i=0;i<r;++i)n=o[i],l<c?(l+=s[n],g.push(n)):(c+=s[n],u.push(n));return u.reverse().concat(g)},reverse:function(t){return e.range(t.length).reverse()},default:Fn}),pn=e.map({silhouette:function(t){var e,i,n,r=t.length,a=t[0].length,s=[],o=0,l=[];for(i=0;i<a;++i){for(e=0,n=0;e<r;e++)n+=t[e][i][1];n>o&&(o=n),s.push(n)}for(i=0;i<a;++i)l[i]=(o-s[i])/2;return l},wiggle:function(t){var e,i,n,r,a,s,o,l,c,g=t.length,u=t[0],d=u.length,h=[];for(h[0]=l=c=0,i=1;i<d;++i){for(e=0,r=0;e<g;++e)r+=t[e][i][1];for(e=0,a=0,o=u[i][0]-u[i-1][0];e<g;++e){for(n=0,s=(t[e][i][1]-t[e][i-1][1])/(2*o);n<e;++n)s+=(t[n][i][1]-t[n][i-1][1])/o;a+=s*t[e][i][1]}h[i]=l-=r?a/r*o:0,l<c&&(c=l)}for(i=0;i<d;++i)h[i]-=c;return h},expand:function(t){var e,i,n,r=t.length,a=t[0].length,s=1/r,o=[];for(i=0;i<a;++i){for(e=0,n=0;e<r;e++)n+=t[e][i][1];if(n)for(e=0;e<r;e++)t[e][i][1]/=n;else for(e=0;e<r;e++)t[e][i][1]=s}for(i=0;i<a;++i)o[i]=0;return o},zero:fn});function Fn(t){return e.range(t.length)}function fn(t){for(var e=-1,i=t[0].length,n=[];++e<i;)n[e]=0;return n}function Qn(t){for(var e,i=1,n=0,r=t[0][1],a=t.length;i<a;++i)(e=t[i][1])>r&&(n=i,r=e);return n}function In(t){return t.reduce(Un,0)}function Un(t,e){return t+e[1]}function bn(t,e){return yn(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function yn(t,e){for(var i=-1,n=+t[0],r=(t[1]-n)/e,a=[];++i<=e;)a[i]=r*i+n;return a}function mn(t){return[e.min(t),e.max(t)]}function xn(t,e){return t.value-e.value}function vn(t,e){var i=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=i,i._pack_prev=e}function Cn(t,e){t._pack_next=e,e._pack_prev=t}function An(t,e){var i=e.x-t.x,n=e.y-t.y,r=t.r+e.r;return.999*r*r>i*i+n*n}function Ln(t){if((e=t.children)&&(l=e.length)){var e,i,n,r,a,s,o,l,c=1/0,g=-1/0,u=1/0,d=-1/0;if(e.forEach(Gn),(i=e[0]).x=-i.r,i.y=0,I(i),l>1&&((n=e[1]).x=n.r,n.y=0,I(n),l>2))for(wn(i,n,r=e[2]),I(r),vn(i,r),i._pack_prev=r,vn(r,n),n=i._pack_next,a=3;a<l;a++){wn(i,n,r=e[a]);var h=0,B=1,p=1;for(s=n._pack_next;s!==n;s=s._pack_next,B++)if(An(s,r)){h=1;break}if(1==h)for(o=i._pack_prev;o!==s._pack_prev&&!An(o,r);o=o._pack_prev,p++);h?(B<p||B==p&&n.r<i.r?Cn(i,n=s):Cn(i=o,n),a--):(vn(i,r),n=r,I(r))}var F=(c+g)/2,f=(u+d)/2,Q=0;for(a=0;a<l;a++)(r=e[a]).x-=F,r.y-=f,Q=Math.max(Q,r.r+Math.sqrt(r.x*r.x+r.y*r.y));t.r=Q,e.forEach(Rn)}function I(t){c=Math.min(t.x-t.r,c),g=Math.max(t.x+t.r,g),u=Math.min(t.y-t.r,u),d=Math.max(t.y+t.r,d)}}function Gn(t){t._pack_next=t._pack_prev=t}function Rn(t){delete t._pack_next,delete t._pack_prev}function Sn(t,e,i,n){var r=t.children;if(t.x=e+=n*t.x,t.y=i+=n*t.y,t.r*=n,r)for(var a=-1,s=r.length;++a<s;)Sn(r[a],e,i,n)}function wn(t,e,i){var n=t.r+i.r,r=e.x-t.x,a=e.y-t.y;if(n&&(r||a)){var s=e.r+i.r,o=r*r+a*a,l=.5+((n*=n)-(s*=s))/(2*o),c=Math.sqrt(Math.max(0,2*s*(n+o)-(n-=o)*n-s*s))/(2*o);i.x=t.x+l*r+c*a,i.y=t.y+l*a-c*r}else i.x=t.x+n,i.y=t.y}function Vn(t,e){return t.parent==e.parent?1:2}function En(t){var e=t.children;return e.length?e[0]:t.t}function Zn(t){var e,i=t.children;return(e=i.length)?i[e-1]:t.t}function Nn(t,e,i){var n=i/(e.i-t.i);e.c-=n,e.s+=i,t.c+=n,e.z+=i,e.m+=i}function Dn(t,e,i){return t.a.parent===e.parent?t.a:i}function Xn(t){var e=t.children;return e&&e.length?Xn(e[0]):t}function Hn(t){var e,i=t.children;return i&&(e=i.length)?Hn(i[e-1]):t}function Wn(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function kn(t,e){var i=t.x+e[3],n=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return r<0&&(i+=r/2,r=0),a<0&&(n+=a/2,a=0),{x:i,y:n,dx:r,dy:a}}function Mn(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]}function Tn(t){return t.rangeExtent?t.rangeExtent():Mn(t.range())}function Yn(t,e,i,n){var r=i(t[0],t[1]),a=n(e[0],e[1]);return function(t){return a(r(t))}}function Jn(t,e){var i,n=0,r=t.length-1,a=t[n],s=t[r];return s<a&&(i=n,n=r,r=i,i=a,a=s,s=i),t[n]=e.floor(a),t[r]=e.ceil(s),t}function _n(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:zn}e.layout.histogram=function(){var t=!0,i=Number,n=mn,r=bn;function a(a,s){for(var o,l,c=[],g=a.map(i,this),u=n.call(this,g,s),d=r.call(this,u,g,s),h=(s=-1,g.length),B=d.length-1,p=t?1:1/h;++s<B;)(o=c[s]=[]).dx=d[s+1]-(o.x=d[s]),o.y=0;if(B>0)for(s=-1;++s<h;)(l=g[s])>=u[0]&&l<=u[1]&&((o=c[e.bisect(d,l,1,B)-1]).y+=p,o.push(a[s]));return c}return a.value=function(t){return arguments.length?(i=t,a):i},a.range=function(t){return arguments.length?(n=Be(t),a):n},a.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return yn(e,t)}:Be(t),a):r},a.frequency=function(e){return arguments.length?(t=!!e,a):t},a},e.layout.pack=function(){var t,i=e.layout.hierarchy().sort(xn),n=0,r=[1,1];function a(e,a){var s=i.call(this,e,a),o=s[0],l=r[0],c=r[1],g=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(o.x=o.y=0,an(o,(function(t){t.r=+g(t.value)})),an(o,Ln),n){var u=n*(t?1:Math.max(2*o.r/l,2*o.r/c))/2;an(o,(function(t){t.r+=u})),an(o,Ln),an(o,(function(t){t.r-=u}))}return Sn(o,l/2,c/2,t?1:1/Math.max(2*o.r/l,2*o.r/c)),s}return a.size=function(t){return arguments.length?(r=t,a):r},a.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,a):t},a.padding=function(t){return arguments.length?(n=+t,a):n},nn(a,i)},e.layout.tree=function(){var t=e.layout.hierarchy().sort(null).value(null),i=Vn,n=[1,1],r=null;function a(e,a){var c=t.call(this,e,a),g=c[0],u=function(t){var e,i={A:null,children:[t]},n=[i];for(;null!=(e=n.pop());)for(var r,a=e.children,s=0,o=a.length;s<o;++s)n.push((a[s]=r={_:a[s],parent:e,children:(r=a[s].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=r);return i.children[0]}(g);if(an(u,s),u.parent.m=-u.z,rn(u,o),r)rn(g,l);else{var d=g,h=g,B=g;rn(g,(function(t){t.x<d.x&&(d=t),t.x>h.x&&(h=t),t.depth>B.depth&&(B=t)}));var p=i(d,h)/2-d.x,F=n[0]/(h.x+i(h,d)/2+p),f=n[1]/(B.depth||1);rn(g,(function(t){t.x=(t.x+p)*F,t.y=t.depth*f}))}return c}function s(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,i=0,n=0,r=t.children,a=r.length;for(;--a>=0;)(e=r[a]).z+=i,e.m+=i,i+=e.s+(n+=e.c)}(t);var a=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+i(t._,r._),t.m=t.z-a):t.z=a}else r&&(t.z=r.z+i(t._,r._));t.parent.A=function(t,e,n){if(e){for(var r,a=t,s=t,o=e,l=a.parent.children[0],c=a.m,g=s.m,u=o.m,d=l.m;o=Zn(o),a=En(a),o&&a;)l=En(l),(s=Zn(s)).a=t,(r=o.z+u-a.z-c+i(o._,a._))>0&&(Nn(Dn(o,t,n),t,r),c+=r,g+=r),u+=o.m,c+=a.m,d+=l.m,g+=s.m;o&&!Zn(s)&&(s.t=o,s.m+=u-g),a&&!En(l)&&(l.t=a,l.m+=c-d,n=t)}return n}(t,r,t.parent.A||n[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return a.separation=function(t){return arguments.length?(i=t,a):i},a.size=function(t){return arguments.length?(r=null==(n=t)?l:null,a):r?null:n},a.nodeSize=function(t){return arguments.length?(r=null==(n=t)?null:l,a):r?n:null},nn(a,t)},e.layout.cluster=function(){var t=e.layout.hierarchy().sort(null).value(null),i=Vn,n=[1,1],r=!1;function a(a,s){var o,l=t.call(this,a,s),c=l[0],g=0;an(c,(function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce((function(t,e){return t+e.x}),0)/t.length}(n),t.y=function(t){return 1+e.max(t,(function(t){return t.y}))}(n)):(t.x=o?g+=i(t,o):0,t.y=0,o=t)}));var u=Xn(c),d=Hn(c),h=u.x-i(u,d)/2,B=d.x+i(d,u)/2;return an(c,r?function(t){t.x=(t.x-c.x)*n[0],t.y=(c.y-t.y)*n[1]}:function(t){t.x=(t.x-h)/(B-h)*n[0],t.y=(1-(c.y?t.y/c.y:1))*n[1]}),l}return a.separation=function(t){return arguments.length?(i=t,a):i},a.size=function(t){return arguments.length?(r=null==(n=t),a):r?null:n},a.nodeSize=function(t){return arguments.length?(r=null!=(n=t),a):r?n:null},nn(a,t)},e.layout.treemap=function(){var t,i=e.layout.hierarchy(),n=Math.round,r=[1,1],a=null,s=Wn,o=!1,l="squarify",c=.5*(1+Math.sqrt(5));function g(t,e){for(var i,n,r=-1,a=t.length;++r<a;)n=(i=t[r]).value*(e<0?0:e),i.area=isNaN(n)||n<=0?0:n}function u(t){var e=t.children;if(e&&e.length){var i,n,r,a=s(t),o=[],c=e.slice(),d=1/0,p="slice"===l?a.dx:"dice"===l?a.dy:"slice-dice"===l?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(g(c,a.dx*a.dy/t.value),o.area=0;(r=c.length)>0;)o.push(i=c[r-1]),o.area+=i.area,"squarify"!==l||(n=h(o,p))<=d?(c.pop(),d=n):(o.area-=o.pop().area,B(o,p,a,!1),p=Math.min(a.dx,a.dy),o.length=o.area=0,d=1/0);o.length&&(B(o,p,a,!0),o.length=o.area=0),e.forEach(u)}}function d(t){var e=t.children;if(e&&e.length){var i,n=s(t),r=e.slice(),a=[];for(g(r,n.dx*n.dy/t.value),a.area=0;i=r.pop();)a.push(i),a.area+=i.area,null!=i.z&&(B(a,i.z?n.dx:n.dy,n,!r.length),a.length=a.area=0);e.forEach(d)}}function h(t,e){for(var i,n=t.area,r=0,a=1/0,s=-1,o=t.length;++s<o;)(i=t[s].area)&&(i<a&&(a=i),i>r&&(r=i));return e*=e,(n*=n)?Math.max(e*r*c/n,n/(e*a*c)):1/0}function B(t,e,i,r){var a,s=-1,o=t.length,l=i.x,c=i.y,g=e?n(t.area/e):0;if(e==i.dx){for((r||g>i.dy)&&(g=i.dy);++s<o;)(a=t[s]).x=l,a.y=c,a.dy=g,l+=a.dx=Math.min(i.x+i.dx-l,g?n(a.area/g):0);a.z=!0,a.dx+=i.x+i.dx-l,i.y+=g,i.dy-=g}else{for((r||g>i.dx)&&(g=i.dx);++s<o;)(a=t[s]).x=l,a.y=c,a.dx=g,c+=a.dy=Math.min(i.y+i.dy-c,g?n(a.area/g):0);a.z=!1,a.dy+=i.y+i.dy-c,i.x+=g,i.dx-=g}}function p(e){var n=t||i(e),a=n[0];return a.x=a.y=0,a.value?(a.dx=r[0],a.dy=r[1]):a.dx=a.dy=0,t&&i.revalue(a),g([a],a.dx*a.dy/a.value),(t?d:u)(a),o&&(t=n),n}return p.size=function(t){return arguments.length?(r=t,p):r},p.padding=function(t){if(!arguments.length)return a;function e(e){return kn(e,t)}var i;return s=null==(a=t)?Wn:"function"==(i=typeof t)?function(e){var i=t.call(p,e,e.depth);return null==i?Wn(e):kn(e,"number"==typeof i?[i,i,i,i]:i)}:"number"===i?(t=[t,t,t,t],e):e,p},p.round=function(t){return arguments.length?(n=t?Math.round:Number,p):n!=Number},p.sticky=function(e){return arguments.length?(o=e,t=null,p):o},p.ratio=function(t){return arguments.length?(c=t,p):c},p.mode=function(t){return arguments.length?(l=t+"",p):l},nn(p,i)},e.random={normal:function(t,e){var i=arguments.length;return i<2&&(e=1),i<1&&(t=0),function(){var i,n,r;do{r=(i=2*Math.random()-1)*i+(n=2*Math.random()-1)*n}while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var i=e.random.irwinHall(t);return function(){return i()/t}},irwinHall:function(t){return function(){for(var e=0,i=0;i<t;i++)e+=Math.random();return e}}},e.scale={};var zn={floor:S,ceil:S};function On(t,i,n,r){var a=[],s=[],o=0,l=Math.min(t.length,i.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++o<=l;)a.push(n(t[o-1],t[o])),s.push(r(i[o-1],i[o]));return function(i){var n=e.bisect(t,i,1,l)-1;return s[n](a[n](i))}}function Kn(t,e,i,n){var r,a;function s(){var s=Math.min(t.length,e.length)>2?On:Yn,l=n?Ji:Yi;return r=s(t,e,l,i),a=s(e,t,l,mi),o}function o(t){return r(t)}return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),s()):t},o.range=function(t){return arguments.length?(e=t,s()):e},o.rangeRound=function(t){return o.range(t).interpolate(Di)},o.clamp=function(t){return arguments.length?(n=t,s()):n},o.interpolate=function(t){return arguments.length?(i=t,s()):i},o.ticks=function(e){return $n(t,e)},o.tickFormat=function(e,i){return d3_scale_linearTickFormat(t,e,i)},o.nice=function(e){return jn(t,e),s()},o.copy=function(){return Kn(t,e,i,n)},s()}function Pn(t,i){return e.rebind(t,i,"range","rangeRound","interpolate","clamp")}function jn(t,e){return Jn(t,_n(qn(t,e)[2])),Jn(t,_n(qn(t,e)[2])),t}function qn(t,e){null==e&&(e=10);var i=Mn(t),n=i[1]-i[0],r=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),a=e/n*r;return a<=.15?r*=10:a<=.35?r*=5:a<=.75&&(r*=2),i[0]=Math.ceil(i[0]/r)*r,i[1]=Math.floor(i[1]/r)*r+.5*r,i[2]=r,i}function $n(t,i){return e.range.apply(e,qn(t,i))}function tr(t,e,i,n){function r(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return i?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(r(e))}return s.invert=function(e){return a(t.invert(e))},s.domain=function(e){return arguments.length?(i=e[0]>=0,t.domain((n=e.map(Number)).map(r)),s):n},s.base=function(i){return arguments.length?(e=+i,t.domain(n.map(r)),s):e},s.nice=function(){var e=Jn(n.map(r),i?Math:er);return t.domain(e),n=e.map(a),s},s.ticks=function(){var t=Mn(n),s=[],o=t[0],l=t[1],c=Math.floor(r(o)),g=Math.ceil(r(l)),u=e%1?2:e;if(isFinite(g-c)){if(i){for(;c<g;c++)for(var d=1;d<u;d++)s.push(a(c)*d);s.push(a(c))}else for(s.push(a(c));c++<g;)for(d=u-1;d>0;d--)s.push(a(c)*d);for(c=0;s[c]<o;c++);for(g=s.length;s[g-1]>l;g--);s=s.slice(c,g)}return s},s.copy=function(){return tr(t.copy(),e,i,n)},Pn(s,t)}e.scale.linear=function(){return Kn([0,1],[0,1],mi,!1)},e.scale.log=function(){return tr(e.scale.linear().domain([0,1]),10,!0,[1,10])};var er={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function ir(t,e,i){var n=nr(e),r=nr(1/e);function a(e){return t(n(e))}return a.invert=function(e){return r(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain((i=e.map(Number)).map(n)),a):i},a.ticks=function(t){return $n(i,t)},a.tickFormat=function(t,e){return d3_scale_linearTickFormat(i,t,e)},a.nice=function(t){return a.domain(jn(i,t))},a.exponent=function(s){return arguments.length?(n=nr(e=s),r=nr(1/e),t.domain(i.map(n)),a):e},a.copy=function(){return ir(t.copy(),e,i)},Pn(a,t)}function nr(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function rr(t,i){var n,r,a;function s(e){return r[((n.get(e)||("range"===i.t?n.set(e,t.push(e)):NaN))-1)%r.length]}function o(i,n){return e.range(t.length).map((function(t){return i+n*t}))}return s.domain=function(e){if(!arguments.length)return t;t=[],n=new U;for(var r,a=-1,o=e.length;++a<o;)n.has(r=e[a])||n.set(r,t.push(r));return s[i.t].apply(s,i.a)},s.range=function(t){return arguments.length?(r=t,a=0,i={t:"range",a:arguments},s):r},s.rangePoints=function(e,n){arguments.length<2&&(n=0);var l=e[0],c=e[1],g=t.length<2?(l=(l+c)/2,0):(c-l)/(t.length-1+n);return r=o(l+g*n/2,g),a=0,i={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(e,n){arguments.length<2&&(n=0);var l=e[0],c=e[1],g=t.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(t.length-1+n)|0;return r=o(l+Math.round(g*n/2+(c-l-(t.length-1+n)*g)/2),g),a=0,i={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(e,n,l){arguments.length<2&&(n=0),arguments.length<3&&(l=n);var c=e[1]<e[0],g=e[c-0],u=(e[1-c]-g)/(t.length-n+2*l);return r=o(g+u*l,u),c&&r.reverse(),a=u*(1-n),i={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(e,n,l){arguments.length<2&&(n=0),arguments.length<3&&(l=n);var c=e[1]<e[0],g=e[c-0],u=e[1-c],d=Math.floor((u-g)/(t.length-n+2*l));return r=o(g+Math.round((u-g-(t.length-n)*d)/2),d),c&&r.reverse(),a=Math.round(d*(1-n)),i={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return a},s.rangeExtent=function(){return Mn(i.a[0])},s.copy=function(){return rr(t,i)},s.domain(t)}e.scale.pow=function(){return ir(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return rr([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(ar)},e.scale.category20=function(){return e.scale.ordinal().range(sr)},e.scale.category20b=function(){return e.scale.ordinal().range(or)},e.scale.category20c=function(){return e.scale.ordinal().range(lr)};var ar=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ae),sr=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ae),or=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ae),lr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ae);function cr(t,i){var n;function r(){var r=0,s=i.length;for(n=[];++r<s;)n[r-1]=e.quantile(t,r/s);return a}function a(t){if(!isNaN(t=+t))return i[e.bisect(n,t)]}return a.domain=function(e){return arguments.length?(t=e.map(h).filter(B).sort(d),r()):t},a.range=function(t){return arguments.length?(i=t,r()):i},a.quantiles=function(){return n},a.invertExtent=function(e){return(e=i.indexOf(e))<0?[NaN,NaN]:[e>0?n[e-1]:t[0],e<n.length?n[e]:t[t.length-1]]},a.copy=function(){return cr(t,i)},r()}function gr(t,e,i){var n,r;function a(e){return i[Math.max(0,Math.min(r,Math.floor(n*(e-t))))]}function s(){return n=i.length/(e-t),r=i.length-1,a}return a.domain=function(i){return arguments.length?(t=+i[0],e=+i[i.length-1],s()):[t,e]},a.range=function(t){return arguments.length?(i=t,s()):i},a.invertExtent=function(e){return[e=(e=i.indexOf(e))<0?NaN:e/n+t,e+1/n]},a.copy=function(){return gr(t,e,i)},s()}function ur(t,i){function n(n){if(n<=n)return i[e.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(i=t,n):i},n.invertExtent=function(e){return e=i.indexOf(e),[t[e-1],t[e]]},n.copy=function(){return ur(t,i)},n}function dr(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(i){return arguments.length?(t=i.map(e),e):t},e.ticks=function(e){return $n(t,e)},e.tickFormat=function(e,i){return d3_scale_linearTickFormat(t,e,i)},e.copy=function(){return dr(t)},e}function hr(){return 0}e.scale.quantile=function(){return cr([],[])},e.scale.quantize=function(){return gr(0,1,[0,1])},e.scale.threshold=function(){return ur([.5],[0,1])},e.scale.identity=function(){return dr([0,1])},e.svg={},e.svg.arc=function(){var t=pr,e=Fr,i=hr,n=Br,r=fr,a=Qr,s=Ir;function o(){var o=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),g=r.apply(this,arguments)-Gt,u=a.apply(this,arguments)-Gt,d=Math.abs(u-g),h=g>u?0:1;if(c<o&&(B=c,c=o,o=B),d>=Lt)return l(c,h)+(o?l(o,1-h):"")+"Z";var B,p,F,f,Q,I,U,b,y,m,x,v,C=0,A=0,L=[];if((f=(+s.apply(this,arguments)||0)/2)&&(F=n===Br?Math.sqrt(o*o+c*c):+n.apply(this,arguments),h||(A*=-1),c&&(A=Vt(F/c*Math.sin(f))),o&&(C=Vt(F/o*Math.sin(f)))),c){Q=c*Math.cos(g+A),I=c*Math.sin(g+A),U=c*Math.cos(u-A),b=c*Math.sin(u-A);var G=Math.abs(u-g-2*A)<=Ct?0:1;if(A&&Ur(Q,I,U,b)===h^G){var R=(g+u)/2;Q=c*Math.cos(R),I=c*Math.sin(R),U=b=null}}else Q=I=0;if(o){y=o*Math.cos(u-C),m=o*Math.sin(u-C),x=o*Math.cos(g+C),v=o*Math.sin(g+C);var S=Math.abs(g-u+2*C)<=Ct?0:1;if(C&&Ur(y,m,x,v)===1-h^S){var w=(g+u)/2;y=o*Math.cos(w),m=o*Math.sin(w),x=v=null}}else y=m=0;if(d>xt&&(B=Math.min(Math.abs(c-o)/2,+i.apply(this,arguments)))>.001){p=o<c^h?0:1;var V=B,E=B;if(d<Ct){var Z=null==x?[y,m]:null==U?[Q,I]:we([Q,I],[x,v],[U,b],[y,m]),N=Q-Z[0],D=I-Z[1],X=U-Z[0],H=b-Z[1],W=1/Math.sin(Math.acos((N*X+D*H)/(Math.sqrt(N*N+D*D)*Math.sqrt(X*X+H*H)))/2),k=Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]);E=Math.min(B,(o-k)/(W-1)),V=Math.min(B,(c-k)/(W+1))}if(null!=U){var M=br(null==x?[y,m]:[x,v],[Q,I],c,V,h),T=br([U,b],[y,m],c,V,h);B===V?L.push("M",M[0],"A",V,",",V," 0 0,",p," ",M[1],"A",c,",",c," 0 ",1-h^Ur(M[1][0],M[1][1],T[1][0],T[1][1]),",",h," ",T[1],"A",V,",",V," 0 0,",p," ",T[0]):L.push("M",M[0],"A",V,",",V," 0 1,",p," ",T[0])}else L.push("M",Q,",",I);if(null!=x){var Y=br([Q,I],[x,v],o,-E,h),J=br([y,m],null==U?[Q,I]:[U,b],o,-E,h);B===E?L.push("L",J[0],"A",E,",",E," 0 0,",p," ",J[1],"A",o,",",o," 0 ",h^Ur(J[1][0],J[1][1],Y[1][0],Y[1][1]),",",1-h," ",Y[1],"A",E,",",E," 0 0,",p," ",Y[0]):L.push("L",J[0],"A",E,",",E," 0 0,",p," ",Y[0])}else L.push("L",y,",",m)}else L.push("M",Q,",",I),null!=U&&L.push("A",c,",",c," 0 ",G,",",h," ",U,",",b),L.push("L",y,",",m),null!=x&&L.push("A",o,",",o," 0 ",S,",",1-h," ",x,",",v);return L.push("Z"),L.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return o.innerRadius=function(e){return arguments.length?(t=Be(e),o):t},o.outerRadius=function(t){return arguments.length?(e=Be(t),o):e},o.cornerRadius=function(t){return arguments.length?(i=Be(t),o):i},o.padRadius=function(t){return arguments.length?(n=t==Br?Br:Be(t),o):n},o.startAngle=function(t){return arguments.length?(r=Be(t),o):r},o.endAngle=function(t){return arguments.length?(a=Be(t),o):a},o.padAngle=function(t){return arguments.length?(s=Be(t),o):s},o.centroid=function(){var i=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Gt;return[Math.cos(n)*i,Math.sin(n)*i]},o};var Br="auto";function pr(t){return t.innerRadius}function Fr(t){return t.outerRadius}function fr(t){return t.startAngle}function Qr(t){return t.endAngle}function Ir(t){return t&&t.padAngle}function Ur(t,e,i,n){return(t-i)*e-(e-n)*t>0?0:1}function br(t,e,i,n,r){var a=t[0]-e[0],s=t[1]-e[1],o=(r?n:-n)/Math.sqrt(a*a+s*s),l=o*s,c=-o*a,g=t[0]+l,u=t[1]+c,d=e[0]+l,h=e[1]+c,B=(g+d)/2,p=(u+h)/2,F=d-g,f=h-u,Q=F*F+f*f,I=i-n,U=g*h-d*u,b=(f<0?-1:1)*Math.sqrt(Math.max(0,I*I*Q-U*U)),y=(U*f-F*b)/Q,m=(-U*F-f*b)/Q,x=(U*f+F*b)/Q,v=(-U*F+f*b)/Q,C=y-B,A=m-p,L=x-B,G=v-p;return C*C+A*A>L*L+G*G&&(y=x,m=v),[[y-l,m-c],[y*i/I,m*i/I]]}function yr(){return!0}function mr(t){var e=Ce,i=Ae,n=yr,r=vr,a=r.key,s=.7;function o(a){var o,l=[],c=[],g=-1,u=a.length,d=Be(e),h=Be(i);function B(){l.push("M",r(t(c),s))}for(;++g<u;)n.call(this,o=a[g],g)?c.push([+d.call(this,o,g),+h.call(this,o,g)]):c.length&&(B(),c=[]);return c.length&&B(),l.length?l.join(""):null}return o.x=function(t){return arguments.length?(e=t,o):e},o.y=function(t){return arguments.length?(i=t,o):i},o.defined=function(t){return arguments.length?(n=t,o):n},o.interpolate=function(t){return arguments.length?(a="function"==typeof t?r=t:(r=xr.get(t)||vr).key,o):a},o.tension=function(t){return arguments.length?(s=t,o):s},o}e.svg.line=function(){return mr(S)};var xr=e.map({linear:vr,"linear-closed":Cr,step:function(t){var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];for(;++e<i;)r.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);i>1&&r.push("H",n[0]);return r.join("")},"step-before":Ar,"step-after":Lr,basis:Sr,"basis-open":function(t){if(t.length<4)return vr(t);var e,i=[],n=-1,r=t.length,a=[0],s=[0];for(;++n<3;)e=t[n],a.push(e[0]),s.push(e[1]);i.push(wr(Zr,a)+","+wr(Zr,s)),--n;for(;++n<r;)e=t[n],a.shift(),a.push(e[0]),s.shift(),s.push(e[1]),Nr(i,a,s);return i.join("")},"basis-closed":function(t){var e,i,n=-1,r=t.length,a=r+4,s=[],o=[];for(;++n<4;)i=t[n%r],s.push(i[0]),o.push(i[1]);e=[wr(Zr,s),",",wr(Zr,o)],--n;for(;++n<a;)i=t[n%r],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),Nr(e,s,o);return e.join("")},bundle:function(t,e){var i=t.length-1;if(i)for(var n,r,a=t[0][0],s=t[0][1],o=t[i][0]-a,l=t[i][1]-s,c=-1;++c<=i;)r=c/i,(n=t[c])[0]=e*n[0]+(1-e)*(a+r*o),n[1]=e*n[1]+(1-e)*(s+r*l);return Sr(t)},cardinal:function(t,e){return t.length<3?vr(t):t[0]+Gr(t,Rr(t,e))},"cardinal-open":function(t,e){return t.length<4?vr(t):t[1]+Gr(t.slice(1,-1),Rr(t,e))},"cardinal-closed":function(t,e){return t.length<3?Cr(t):t[0]+Gr((t.push(t[0]),t),Rr([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?vr(t):t[0]+Gr(t,function(t){var e,i,n,r,a=[],s=function(t){var e=0,i=t.length-1,n=[],r=t[0],a=t[1],s=n[0]=Dr(r,a);for(;++e<i;)n[e]=(s+(s=Dr(r=a,a=t[e+1])))/2;return n[e]=s,n}(t),o=-1,l=t.length-1;for(;++o<l;)e=Dr(t[o],t[o+1]),Q(e)<xt?s[o]=s[o+1]=0:(r=(i=s[o]/e)*i+(n=s[o+1]/e)*n)>9&&(r=3*e/Math.sqrt(r),s[o]=r*i,s[o+1]=r*n);o=-1;for(;++o<=l;)r=(t[Math.min(l,o+1)][0]-t[Math.max(0,o-1)][0])/(6*(1+s[o]*s[o])),a.push([r||0,s[o]*r||0]);return a}(t))}});function vr(t){return t.length>1?t.join("L"):t+"Z"}function Cr(t){return t.join("L")+"Z"}function Ar(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("V",(n=t[e])[1],"H",n[0]);return r.join("")}function Lr(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n=t[e])[0],"V",n[1]);return r.join("")}function Gr(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return vr(t);var i=t.length!=e.length,n="",r=t[0],a=t[1],s=e[0],o=s,l=1;if(i&&(n+="Q"+(a[0]-2*s[0]/3)+","+(a[1]-2*s[1]/3)+","+a[0]+","+a[1],r=t[1],l=2),e.length>1){o=e[1],a=t[l],l++,n+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,l++)a=t[l],o=e[c],n+="S"+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1]}if(i){var g=t[l];n+="Q"+(a[0]+2*o[0]/3)+","+(a[1]+2*o[1]/3)+","+g[0]+","+g[1]}return n}function Rr(t,e){for(var i,n=[],r=(1-e)/2,a=t[0],s=t[1],o=1,l=t.length;++o<l;)i=a,a=s,s=t[o],n.push([r*(s[0]-i[0]),r*(s[1]-i[1])]);return n}function Sr(t){if(t.length<3)return vr(t);var e=1,i=t.length,n=t[0],r=n[0],a=n[1],s=[r,r,r,(n=t[1])[0]],o=[a,a,a,n[1]],l=[r,",",a,"L",wr(Zr,s),",",wr(Zr,o)];for(t.push(t[i-1]);++e<=i;)n=t[e],s.shift(),s.push(n[0]),o.shift(),o.push(n[1]),Nr(l,s,o);return t.pop(),l.push("L",n),l.join("")}function wr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}xr.forEach((function(t,e){e.key=t,e.closed=/-closed$/.test(t)}));var Vr=[0,2/3,1/3,0],Er=[0,1/3,2/3,0],Zr=[0,1/6,2/3,1/6];function Nr(t,e,i){t.push("C",wr(Vr,e),",",wr(Vr,i),",",wr(Er,e),",",wr(Er,i),",",wr(Zr,e),",",wr(Zr,i))}function Dr(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Xr(t){for(var e,i,n,r=-1,a=t.length;++r<a;)i=(e=t[r])[0],n=e[1]-Gt,e[0]=i*Math.cos(n),e[1]=i*Math.sin(n);return t}function Hr(t){var e=Ce,i=Ce,n=0,r=Ae,a=yr,s=vr,o=s.key,l=s,c="L",g=.7;function u(o){var u,d,h,B=[],p=[],F=[],f=-1,Q=o.length,I=Be(e),U=Be(n),b=e===i?function(){return d}:Be(i),y=n===r?function(){return h}:Be(r);function m(){B.push("M",s(t(F),g),c,l(t(p.reverse()),g),"Z")}for(;++f<Q;)a.call(this,u=o[f],f)?(p.push([d=+I.call(this,u,f),h=+U.call(this,u,f)]),F.push([+b.call(this,u,f),+y.call(this,u,f)])):p.length&&(m(),p=[],F=[]);return p.length&&m(),B.length?B.join(""):null}return u.x=function(t){return arguments.length?(e=i=t,u):i},u.x0=function(t){return arguments.length?(e=t,u):e},u.x1=function(t){return arguments.length?(i=t,u):i},u.y=function(t){return arguments.length?(n=r=t,u):r},u.y0=function(t){return arguments.length?(n=t,u):n},u.y1=function(t){return arguments.length?(r=t,u):r},u.defined=function(t){return arguments.length?(a=t,u):a},u.interpolate=function(t){return arguments.length?(o="function"==typeof t?s=t:(s=xr.get(t)||vr).key,l=s.reverse||s,c=s.closed?"M":"L",u):o},u.tension=function(t){return arguments.length?(g=t,u):g},u}function Wr(t){return t.source}function kr(t){return t.target}function Mr(t){return t.radius}function Tr(t){return[t.x,t.y]}function Yr(){return 64}function Jr(){return"circle"}function _r(t){var e=Math.sqrt(t/Ct);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}e.svg.line.radial=function(){var t=mr(Xr);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ar.reverse=Lr,Lr.reverse=Ar,e.svg.area=function(){return Hr(S)},e.svg.area.radial=function(){var t=Hr(Xr);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},e.svg.chord=function(){var t=Wr,e=kr,i=Mr,n=fr,r=Qr;function a(i,n){var r=s(this,t,i,n),a=s(this,e,i,n);return"M"+r.p0+o(r.r,r.p1,r.a1-r.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(r,a)?l(r.r,r.p1,r.r,r.p0):l(r.r,r.p1,a.r,a.p0)+o(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,r.r,r.p0))+"Z"}function s(t,e,a,s){var o=e.call(t,a,s),l=i.call(t,o,s),c=n.call(t,o,s)-Gt,g=r.call(t,o,s)-Gt;return{r:l,a0:c,a1:g,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(g),l*Math.sin(g)]}}function o(t,e,i){return"A"+t+","+t+" 0 "+ +(i>Ct)+",1 "+e}function l(t,e,i,n){return"Q 0,0 "+n}return a.radius=function(t){return arguments.length?(i=Be(t),a):i},a.source=function(e){return arguments.length?(t=Be(e),a):t},a.target=function(t){return arguments.length?(e=Be(t),a):e},a.startAngle=function(t){return arguments.length?(n=Be(t),a):n},a.endAngle=function(t){return arguments.length?(r=Be(t),a):r},a},e.svg.diagonal=function(){var t=Wr,e=kr,i=Tr;function n(n,r){var a=t.call(this,n,r),s=e.call(this,n,r),o=(a.y+s.y)/2,l=[a,{x:a.x,y:o},{x:s.x,y:o},s];return"M"+(l=l.map(i))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return n.source=function(e){return arguments.length?(t=Be(e),n):t},n.target=function(t){return arguments.length?(e=Be(t),n):e},n.projection=function(t){return arguments.length?(i=t,n):i},n},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),i=Tr,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),i=e[0],n=e[1]-Gt;return[i*Math.cos(n),i*Math.sin(n)]}}(i=t)):i},t},e.svg.symbol=function(){var t=Jr,e=Yr;function i(i,n){return(zr.get(t.call(this,i,n))||_r)(e.call(this,i,n))}return i.type=function(e){return arguments.length?(t=Be(e),i):t},i.size=function(t){return arguments.length?(e=Be(t),i):e},i};var zr=e.map({circle:_r,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Kr)),i=e*Kr;return"M0,"+-e+"L"+i+",0 0,"+e+" "+-i+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Or),i=e*Or/2;return"M0,"+i+"L"+e+","+-i+" "+-e+","+-i+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Or),i=e*Or/2;return"M0,"+-i+"L"+e+","+i+" "+-e+","+i+"Z"}});e.svg.symbolTypes=zr.keys();var Or=Math.sqrt(3),Kr=Math.tan(30*Rt);z.transition=function(t){for(var e,i,n=$r||++ia,r=aa(t),a=[],s=ta||{time:Date.now(),ease:wi,delay:0,duration:250},o=-1,l=this.length;++o<l;){a.push(e=[]);for(var c=this[o],g=-1,u=c.length;++g<u;)(i=c[g])&&sa(i,g,r,n,s),e.push(i)}return qr(a,r,n)},z.interrupt=function(t){return this.each(null==t?Pr:jr(aa(t)))};var Pr=jr(aa());function jr(t){return function(){var e,i,n;(e=this[t])&&(n=e[i=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[i]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function qr(t,e,i){return M(t,ea),t.namespace=e,t.id=i,t}var $r,ta,ea=[],ia=0;function na(t,e,i,n){var r=t.id,a=t.namespace;return ut(t,"function"==typeof i?function(t,s,o){t[a][r].tween.set(e,n(i.call(t,t.__data__,s,o)))}:(i=n(i),function(t){t[a][r].tween.set(e,i)}))}function ra(t){return null==t&&(t=""),function(){this.textContent=t}}function aa(t){return null==t?"__transition__":"__transition_"+t+"__"}function sa(t,e,i,n,r){var a,s,o,l,c,g=t[i]||(t[i]={active:0,count:0}),u=g[n];function d(i){var r=g.active,d=g[r];for(var B in d&&(d.timer.c=null,d.timer.t=NaN,--g.count,delete g[r],d.event&&d.event.interrupt.call(t,t.__data__,d.index)),g)if(+B<n){var p=g[B];p.timer.c=null,p.timer.t=NaN,--g.count,delete g[B]}s.c=h,ye((function(){return s.c&&h(i||1)&&(s.c=null,s.t=NaN),1}),0,a),g.active=n,u.event&&u.event.start.call(t,t.__data__,e),c=[],u.tween.forEach((function(i,n){(n=n.call(t,t.__data__,e))&&c.push(n)})),l=u.ease,o=u.duration}function h(r){for(var a=r/o,s=l(a),d=c.length;d>0;)c[--d].call(t,s);if(a>=1)return u.event&&u.event.end.call(t,t.__data__,e),--g.count?delete g[n]:delete t[i],1}u||(a=r.time,s=ye((function(t){var e=u.delay;if(s.t=e+a,e<=t)return d(t-e);s.c=d}),0,a),u=g[n]={tween:new U,time:a,timer:s,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++g.count)}ea.call=z.call,ea.empty=z.empty,ea.node=z.node,ea.size=z.size,e.transition=function(t,i){return t&&t.transition?$r?t.transition(i):t:e.selection().transition(t)},e.transition.prototype=ea,ea.select=function(t){var e,i,n,r=this.id,a=this.namespace,s=[];t=O(t);for(var o=-1,l=this.length;++o<l;){s.push(e=[]);for(var c=this[o],g=-1,u=c.length;++g<u;)(n=c[g])&&(i=t.call(n,n.__data__,g,o))?("__data__"in n&&(i.__data__=n.__data__),sa(i,g,a,r,n[a][r]),e.push(i)):e.push(null)}return qr(s,a,r)},ea.selectAll=function(t){var e,i,n,r,a,s=this.id,o=this.namespace,l=[];t=K(t);for(var c=-1,g=this.length;++c<g;)for(var u=this[c],d=-1,h=u.length;++d<h;)if(n=u[d]){a=n[o][s],i=t.call(n,n.__data__,d,c),l.push(e=[]);for(var B=-1,p=i.length;++B<p;)(r=i[B])&&sa(r,B,o,s,a),e.push(r)}return qr(l,o,s)},ea.filter=function(t){var e,i,n=[];"function"!=typeof t&&(t=ct(t));for(var r=0,a=this.length;r<a;r++){n.push(e=[]);for(var s,o=0,l=(s=this[r]).length;o<l;o++)(i=s[o])&&t.call(i,i.__data__,o,r)&&e.push(i)}return qr(n,this.namespace,this.id)},ea.tween=function(t,e){var i=this.id,n=this.namespace;return arguments.length<2?this.node()[n][i].tween.get(t):ut(this,null==e?function(e){e[n][i].tween.remove(t)}:function(r){r[n][i].tween.set(t,e)})},ea.attr=function(t,i){if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}var n="transform"==t?Ti:mi,r=e.ns.qualify(t);function a(){this.removeAttribute(r)}function s(){this.removeAttributeNS(r.space,r.local)}return na(this,"attr."+t,i,r.local?function(t){return null==t?s:(t+="",function(){var e,i=this.getAttributeNS(r.space,r.local);return i!==t&&(e=n(i,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(t){return null==t?a:(t+="",function(){var e,i=this.getAttribute(r);return i!==t&&(e=n(i,t),function(t){this.setAttribute(r,e(t))})})})},ea.attrTween=function(t,i){var n=e.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,e){var r=i.call(this,t,e,this.getAttributeNS(n.space,n.local));return r&&function(t){this.setAttributeNS(n.space,n.local,r(t))}}:function(t,e){var r=i.call(this,t,e,this.getAttribute(n));return r&&function(t){this.setAttribute(n,r(t))}})},ea.style=function(t,e,i){var n=arguments.length;if(n<3){if("string"!=typeof t){for(i in n<2&&(e=""),t)this.style(i,t[i],e);return this}i=""}function r(){this.style.removeProperty(t)}return na(this,"style."+t,e,(function(e){return null==e?r:(e+="",function(){var n,r=s(this).getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(n=mi(r,e),function(e){this.style.setProperty(t,n(e),i)})})}))},ea.styleTween=function(t,e,i){return arguments.length<3&&(i=""),this.tween("style."+t,(function(n,r){var a=e.call(this,n,r,s(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),i)}}))},ea.text=function(t){return na(this,"text",t,ra)},ea.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)}))},ea.ease=function(t){var i=this.id,n=this.namespace;return arguments.length<1?this.node()[n][i].ease:("function"!=typeof t&&(t=e.ease.apply(e,arguments)),ut(this,(function(e){e[n][i].ease=t})))},ea.delay=function(t){var e=this.id,i=this.namespace;return arguments.length<1?this.node()[i][e].delay:ut(this,"function"==typeof t?function(n,r,a){n[i][e].delay=+t.call(n,n.__data__,r,a)}:(t=+t,function(n){n[i][e].delay=t}))},ea.duration=function(t){var e=this.id,i=this.namespace;return arguments.length<1?this.node()[i][e].duration:ut(this,"function"==typeof t?function(n,r,a){n[i][e].duration=Math.max(1,t.call(n,n.__data__,r,a))}:(t=Math.max(1,t),function(n){n[i][e].duration=t}))},ea.each=function(t,i){var n=this.id,r=this.namespace;if(arguments.length<2){var a=ta,s=$r;try{$r=n,ut(this,(function(e,i,a){ta=e[r][n],t.call(e,e.__data__,i,a)}))}finally{ta=a,$r=s}}else ut(this,(function(a){var s=a[r][n];(s.event||(s.event=e.dispatch("start","end","interrupt"))).on(t,i)}));return this},ea.transition=function(){for(var t,e,i,n=this.id,r=++ia,a=this.namespace,s=[],o=0,l=this.length;o<l;o++){s.push(t=[]);for(var c,g=0,u=(c=this[o]).length;g<u;g++)(e=c[g])&&sa(e,g,a,r,{time:(i=e[a][n]).time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration}),t.push(e)}return qr(s,a,r)},e.svg.axis=function(){var t,i=e.scale.linear(),r=oa,a=6,s=6,o=3,l=[10],c=null;function g(n){n.each((function(){var n,g=e.select(this),u=this.__chart__||i,d=this.__chart__=i.copy(),h=null==c?d.ticks?d.ticks.apply(d,l):d.domain():c,B=null==t?d.tickFormat?d.tickFormat.apply(d,l):S:t,p=g.selectAll(".tick").data(h,d),F=p.enter().insert("g",".domain").attr("class","tick").style("opacity",xt),f=e.transition(p.exit()).style("opacity",xt).remove(),Q=e.transition(p.order()).style("opacity",1),I=Math.max(a,0)+o,U=Tn(d),b=g.selectAll(".domain").data([0]),y=(b.enter().append("path").attr("class","domain"),e.transition(b));F.append("line"),F.append("text");var m,x,v,C,A=F.select("line"),L=Q.select("line"),G=p.select("text").text(B),R=F.select("text"),w=Q.select("text"),V="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=ca,m="x",v="y",x="x2",C="y2",G.attr("dy",V<0?"0em":".71em").style("text-anchor","middle"),y.attr("d","M"+U[0]+","+V*s+"V0H"+U[1]+"V"+V*s)):(n=ga,m="y",v="x",x="y2",C="x2",G.attr("dy",".32em").style("text-anchor",V<0?"end":"start"),y.attr("d","M"+V*s+","+U[0]+"H0V"+U[1]+"H"+V*s)),A.attr(C,V*a),R.attr(v,V*I),L.attr(x,0).attr(C,V*a),w.attr(m,0).attr(v,V*I),d.rangeBand){var E=d,Z=E.rangeBand()/2;u=d=function(t){return E(t)+Z}}else u.rangeBand?u=d:f.call(n,d,u);F.call(n,u,d),Q.call(n,d,d)}))}return g.scale=function(t){return arguments.length?(i=t,g):i},g.orient=function(t){return arguments.length?(r=t in la?t+"":oa,g):r},g.ticks=function(){return arguments.length?(l=n(arguments),g):l},g.tickValues=function(t){return arguments.length?(c=t,g):c},g.tickFormat=function(e){return arguments.length?(t=e,g):t},g.tickSize=function(t){var e=arguments.length;return e?(a=+t,s=+arguments[e-1],g):a},g.innerTickSize=function(t){return arguments.length?(a=+t,g):a},g.outerTickSize=function(t){return arguments.length?(s=+t,g):s},g.tickPadding=function(t){return arguments.length?(o=+t,g):o},g.tickSubdivide=function(){return arguments.length&&g},g};var oa="bottom",la={top:1,right:1,bottom:1,left:1};function ca(t,e,i){t.attr("transform",(function(t){var n=e(t);return"translate("+(isFinite(n)?n:i(t))+",0)"}))}function ga(t,e,i){t.attr("transform",(function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:i(t))+")"}))}e.svg.brush=function(){var t,i,n=W(d,"brushstart","brush","brushend"),r=null,a=null,o=[0,0],l=[0,0],c=!0,g=!0,u=da[0];function d(t){t.each((function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",F).on("touchstart.brush",F),i=t.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(u,S);n.exit().remove(),n.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return ua[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",d.empty()?"none":null);var s,o=e.transition(t),l=e.transition(i);r&&(s=Tn(r),l.attr("x",s[0]).attr("width",s[1]-s[0]),B(o)),a&&(s=Tn(a),l.attr("y",s[0]).attr("height",s[1]-s[0]),p(o)),h(o)}))}function h(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+o[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"}))}function B(t){t.select(".extent").attr("x",o[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function p(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function F(){var u,F,f=this,Q=e.select(e.event.target),I=n.of(f,arguments),U=e.select(f),b=Q.datum(),y=!/^(n|s)$/.test(b)&&r,m=!/^(e|w)$/.test(b)&&a,x=Q.classed("extent"),v=Ut(f),C=e.mouse(f),A=e.select(s(f)).on("keydown.brush",(function(){32==e.event.keyCode&&(x||(u=null,C[0]-=o[1],C[1]-=l[1],x=2),X())})).on("keyup.brush",(function(){32==e.event.keyCode&&2==x&&(C[0]+=o[1],C[1]+=l[1],x=0,X())}));if(e.event.changedTouches?A.on("touchmove.brush",R).on("touchend.brush",w):A.on("mousemove.brush",R).on("mouseup.brush",w),U.interrupt().selectAll("*").interrupt(),x)C[0]=o[0]-C[0],C[1]=l[0]-C[1];else if(b){var L=+/w$/.test(b),G=+/^n/.test(b);F=[o[1-L]-C[0],l[1-G]-C[1]],C[0]=o[L],C[1]=l[G]}else e.event.altKey&&(u=C.slice());function R(){var t=e.mouse(f),i=!1;F&&(t[0]+=F[0],t[1]+=F[1]),x||(e.event.altKey?(u||(u=[(o[0]+o[1])/2,(l[0]+l[1])/2]),C[0]=o[+(t[0]<u[0])],C[1]=l[+(t[1]<u[1])]):u=null),y&&S(t,r,0)&&(B(U),i=!0),m&&S(t,a,1)&&(p(U),i=!0),i&&(h(U),I({type:"brush",mode:x?"move":"resize"}))}function S(e,n,r){var a,s,d=Tn(n),h=d[0],B=d[1],p=C[r],F=r?l:o,f=F[1]-F[0];if(x&&(h-=p,B-=f+p),a=(r?g:c)?Math.max(h,Math.min(B,e[r])):e[r],x?s=(a+=p)+f:(u&&(p=Math.max(h,Math.min(B,2*u[r]-a))),p<a?(s=a,a=p):s=p),F[0]!=a||F[1]!=s)return r?i=null:t=null,F[0]=a,F[1]=s,!0}function w(){R(),U.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),e.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),v(),I({type:"brushend"})}U.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",Q.style("cursor")),I({type:"brushstart"}),R()}return d.event=function(r){r.each((function(){var r=n.of(this,arguments),a={x:o,y:l,i:t,j:i},s=this.__chart__||a;this.__chart__=a,$r?e.select(this).transition().each("start.brush",(function(){t=s.i,i=s.j,o=s.x,l=s.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var e=xi(o,a.x),n=xi(l,a.y);return t=i=null,function(t){o=a.x=e(t),l=a.y=n(t),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){t=a.i,i=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},d.x=function(t){return arguments.length?(u=da[!(r=t)<<1|!a],d):r},d.y=function(t){return arguments.length?(u=da[!r<<1|!(a=t)],d):a},d.clamp=function(t){return arguments.length?(r&&a?(c=!!t[0],g=!!t[1]):r?c=!!t:a&&(g=!!t),d):r&&a?[c,g]:r?c:a?g:null},d.extent=function(e){var n,s,c,g,u;return arguments.length?(r&&(n=e[0],s=e[1],a&&(n=n[0],s=s[0]),t=[n,s],r.invert&&(n=r(n),s=r(s)),s<n&&(u=n,n=s,s=u),n==o[0]&&s==o[1]||(o=[n,s])),a&&(c=e[0],g=e[1],r&&(c=c[1],g=g[1]),i=[c,g],a.invert&&(c=a(c),g=a(g)),g<c&&(u=c,c=g,g=u),c==l[0]&&g==l[1]||(l=[c,g])),d):(r&&(t?(n=t[0],s=t[1]):(n=o[0],s=o[1],r.invert&&(n=r.invert(n),s=r.invert(s)),s<n&&(u=n,n=s,s=u))),a&&(i?(c=i[0],g=i[1]):(c=l[0],g=l[1],a.invert&&(c=a.invert(c),g=a.invert(g)),g<c&&(u=c,c=g,g=u))),r&&a?[[n,c],[s,g]]:r?[n,s]:a&&[c,g])},d.clear=function(){return d.empty()||(o=[0,0],l=[0,0],t=i=null),d},d.empty=function(){return!!r&&o[0]==o[1]||!!a&&l[0]==l[1]},e.rebind(d,n,"on")};var ua={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},da=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function ha(t){return JSON.parse(t.responseText)}function Ba(t){var e=r.createRange();return e.selectNode(r.body),e.createContextualFragment(t.responseText)}e.text=pe((function(t){return t.responseText})),e.json=function(t,e){return Fe(t,"application/json",ha,e)},e.html=function(t,e){return Fe(t,"text/html",Ba,e)},e.xml=pe((function(t){return t.responseXML})),t.exports?t.exports=e:this.d3=e}).apply(self)}(Ys);var Js=Ys.exports,_s=new Date,zs=new Date;function Os(t,e,i,n){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i},r.round=function(t){var e=r(t),i=r.ceil(t);return t-e<i-t?e:i},r.offset=function(t,i){return e(t=new Date(+t),null==i?1:Math.floor(i)),t},r.range=function(i,n,a){var s,o=[];if(i=r.ceil(i),a=null==a?1:Math.floor(a),!(i<n&&a>0))return o;do{o.push(s=new Date(+i)),e(i,a),t(i)}while(s<i&&i<n);return o},r.filter=function(i){return Os((function(e){if(e>=e)for(;t(e),!i(e);)e.setTime(e-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;e(t,-1),!i(t););else for(;--n>=0;)for(;e(t,1),!i(t););}))},i&&(r.count=function(e,n){return _s.setTime(+e),zs.setTime(+n),t(_s),t(zs),Math.floor(i(_s,zs))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(n?function(e){return n(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var Ks=Os((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Ks.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Os((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t})):Ks:null};var Ps=Ks.range,js=1e3,qs=6e4,$s=36e5,to=864e5,eo=6048e5,io=Os((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*js)}),(function(t,e){return(e-t)/js}),(function(t){return t.getUTCSeconds()})),no=io.range,ro=Os((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*js)}),(function(t,e){t.setTime(+t+e*qs)}),(function(t,e){return(e-t)/qs}),(function(t){return t.getMinutes()})),ao=ro.range,so=Os((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*js-t.getMinutes()*qs)}),(function(t,e){t.setTime(+t+e*$s)}),(function(t,e){return(e-t)/$s}),(function(t){return t.getHours()})),oo=so.range,lo=Os((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qs)/to}),(function(t){return t.getDate()-1})),co=lo.range;function go(t){return Os((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qs)/eo}))}var uo=go(0),ho=go(1),Bo=go(2),po=go(3),Fo=go(4),fo=go(5),Qo=go(6),Io=uo.range,Uo=ho.range,bo=Bo.range,yo=po.range,mo=Fo.range,xo=fo.range,vo=Qo.range,Co=Os((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Ao=Co.range,Lo=Os((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Lo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Os((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)})):null};var Go=Lo.range,Ro=Os((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*qs)}),(function(t,e){return(e-t)/qs}),(function(t){return t.getUTCMinutes()})),So=Ro.range,wo=Os((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*$s)}),(function(t,e){return(e-t)/$s}),(function(t){return t.getUTCHours()})),Vo=wo.range,Eo=Os((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/to}),(function(t){return t.getUTCDate()-1})),Zo=Eo.range;function No(t){return Os((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/eo}))}var Do=No(0),Xo=No(1),Ho=No(2),Wo=No(3),ko=No(4),Mo=No(5),To=No(6),Yo=Do.range,Jo=Xo.range,_o=Ho.range,zo=Wo.range,Oo=ko.range,Ko=Mo.range,Po=To.range,jo=Os((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),qo=jo.range,$o=Os((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));$o.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Os((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)})):null};var tl=$o.range,el=Object.freeze({__proto__:null,timeDay:lo,timeDays:co,timeFriday:fo,timeFridays:xo,timeHour:so,timeHours:oo,timeInterval:Os,timeMillisecond:Ks,timeMilliseconds:Ps,timeMinute:ro,timeMinutes:ao,timeMonday:ho,timeMondays:Uo,timeMonth:Co,timeMonths:Ao,timeSaturday:Qo,timeSaturdays:vo,timeSecond:io,timeSeconds:no,timeSunday:uo,timeSundays:Io,timeThursday:Fo,timeThursdays:mo,timeTuesday:Bo,timeTuesdays:bo,timeWednesday:po,timeWednesdays:yo,timeWeek:uo,timeWeeks:Io,timeYear:Lo,timeYears:Go,utcDay:Eo,utcDays:Zo,utcFriday:Mo,utcFridays:Ko,utcHour:wo,utcHours:Vo,utcMillisecond:Ks,utcMilliseconds:Ps,utcMinute:Ro,utcMinutes:So,utcMonday:Xo,utcMondays:Jo,utcMonth:jo,utcMonths:qo,utcSaturday:To,utcSaturdays:Po,utcSecond:io,utcSeconds:no,utcSunday:Do,utcSundays:Yo,utcThursday:ko,utcThursdays:Oo,utcTuesday:Ho,utcTuesdays:_o,utcWednesday:Wo,utcWednesdays:zo,utcWeek:Do,utcWeeks:Yo,utcYear:$o,utcYears:tl});function il(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function nl(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function rl(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function al(t){var e=t.dateTime,i=t.date,n=t.time,r=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=Ql(r),g=Il(r),u=Ql(a),d=Il(a),h=Ql(s),B=Il(s),p=Ql(o),F=Il(o),f=Ql(l),Q=Il(l),I={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:Wl,e:Wl,f:Jl,g:ic,G:rc,H:kl,I:Ml,j:Tl,L:Yl,m:_l,M:zl,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ac,s:Lc,S:Ol,u:Kl,U:Pl,V:ql,w:$l,W:tc,x:null,X:null,y:ec,Y:nc,Z:ac,"%":Cc},U={a:function(t){return s[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:sc,e:sc,f:uc,g:yc,G:xc,H:oc,I:lc,j:cc,L:gc,m:dc,M:hc,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ac,s:Lc,S:Bc,u:pc,U:Fc,V:Qc,w:Ic,W:Uc,x:null,X:null,y:bc,Y:mc,Z:vc,"%":Cc},b={a:function(t,e,i){var n=h.exec(e.slice(i));return n?(t.w=B[n[0].toLowerCase()],i+n[0].length):-1},A:function(t,e,i){var n=u.exec(e.slice(i));return n?(t.w=d[n[0].toLowerCase()],i+n[0].length):-1},b:function(t,e,i){var n=f.exec(e.slice(i));return n?(t.m=Q[n[0].toLowerCase()],i+n[0].length):-1},B:function(t,e,i){var n=p.exec(e.slice(i));return n?(t.m=F[n[0].toLowerCase()],i+n[0].length):-1},c:function(t,i,n){return x(t,e,i,n)},d:Rl,e:Rl,f:Nl,g:Cl,G:vl,H:wl,I:wl,j:Sl,L:Zl,m:Gl,M:Vl,p:function(t,e,i){var n=c.exec(e.slice(i));return n?(t.p=g[n[0].toLowerCase()],i+n[0].length):-1},q:Ll,Q:Xl,s:Hl,S:El,u:bl,U:yl,V:ml,w:Ul,W:xl,x:function(t,e,n){return x(t,i,e,n)},X:function(t,e,i){return x(t,n,e,i)},y:Cl,Y:vl,Z:Al,"%":Dl};function y(t,e){return function(i){var n,r,a,s=[],o=-1,l=0,c=t.length;for(i instanceof Date||(i=new Date(+i));++o<c;)37===t.charCodeAt(o)&&(s.push(t.slice(l,o)),null!=(r=dl[n=t.charAt(++o)])?n=t.charAt(++o):r="e"===n?" ":"0",(a=e[n])&&(n=a(i,r)),s.push(n),l=o+1);return s.push(t.slice(l,o)),s.join("")}}function m(t,e){return function(i){var n,r,a=rl(1900,void 0,1);if(x(a,t,i+="",0)!=i.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(r=(n=nl(rl(a.y,0,1))).getUTCDay(),n=r>4||0===r?Xo.ceil(n):Xo(n),n=Eo.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(r=(n=il(rl(a.y,0,1))).getDay(),n=r>4||0===r?ho.ceil(n):ho(n),n=lo.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?nl(rl(a.y,0,1)).getUTCDay():il(rl(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,nl(a)):il(a)}}function x(t,e,i,n){for(var r,a,s=0,o=e.length,l=i.length;s<o;){if(n>=l)return-1;if(37===(r=e.charCodeAt(s++))){if(r=e.charAt(s++),!(a=b[r in dl?e.charAt(s++):r])||(n=a(t,i,n))<0)return-1}else if(r!=i.charCodeAt(n++))return-1}return n}return I.x=y(i,I),I.X=y(n,I),I.c=y(e,I),U.x=y(i,U),U.X=y(n,U),U.c=y(e,U),{format:function(t){var e=y(t+="",I);return e.toString=function(){return t},e},parse:function(t){var e=m(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=y(t+="",U);return e.toString=function(){return t},e},utcParse:function(t){var e=m(t+="",!0);return e.toString=function(){return t},e}}}var sl,ol,ll,cl,ul,dl={"-":"",_:" ",0:"0"},hl=/^\s*\d+/,Bl=/^%/,pl=/[\\^$*+?|[\]().{}]/g;function Fl(t,e,i){var n=t<0?"-":"",r=(n?-t:t)+"",a=r.length;return n+(a<i?new Array(i-a+1).join(e)+r:r)}function fl(t){return t.replace(pl,"\\$&")}function Ql(t){return new RegExp("^(?:"+t.map(fl).join("|")+")","i")}function Il(t){for(var e={},i=-1,n=t.length;++i<n;)e[t[i].toLowerCase()]=i;return e}function Ul(t,e,i){var n=hl.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function bl(t,e,i){var n=hl.exec(e.slice(i,i+1));return n?(t.u=+n[0],i+n[0].length):-1}function yl(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.U=+n[0],i+n[0].length):-1}function ml(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.V=+n[0],i+n[0].length):-1}function xl(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.W=+n[0],i+n[0].length):-1}function vl(t,e,i){var n=hl.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Cl(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function Al(t,e,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function Ll(t,e,i){var n=hl.exec(e.slice(i,i+1));return n?(t.q=3*n[0]-3,i+n[0].length):-1}function Gl(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function Rl(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function Sl(t,e,i){var n=hl.exec(e.slice(i,i+3));return n?(t.m=0,t.d=+n[0],i+n[0].length):-1}function wl(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function Vl(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function El(t,e,i){var n=hl.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function Zl(t,e,i){var n=hl.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function Nl(t,e,i){var n=hl.exec(e.slice(i,i+6));return n?(t.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function Dl(t,e,i){var n=Bl.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function Xl(t,e,i){var n=hl.exec(e.slice(i));return n?(t.Q=+n[0],i+n[0].length):-1}function Hl(t,e,i){var n=hl.exec(e.slice(i));return n?(t.s=+n[0],i+n[0].length):-1}function Wl(t,e){return Fl(t.getDate(),e,2)}function kl(t,e){return Fl(t.getHours(),e,2)}function Ml(t,e){return Fl(t.getHours()%12||12,e,2)}function Tl(t,e){return Fl(1+lo.count(Lo(t),t),e,3)}function Yl(t,e){return Fl(t.getMilliseconds(),e,3)}function Jl(t,e){return Yl(t,e)+"000"}function _l(t,e){return Fl(t.getMonth()+1,e,2)}function zl(t,e){return Fl(t.getMinutes(),e,2)}function Ol(t,e){return Fl(t.getSeconds(),e,2)}function Kl(t){var e=t.getDay();return 0===e?7:e}function Pl(t,e){return Fl(uo.count(Lo(t)-1,t),e,2)}function jl(t){var e=t.getDay();return e>=4||0===e?Fo(t):Fo.ceil(t)}function ql(t,e){return t=jl(t),Fl(Fo.count(Lo(t),t)+(4===Lo(t).getDay()),e,2)}function $l(t){return t.getDay()}function tc(t,e){return Fl(ho.count(Lo(t)-1,t),e,2)}function ec(t,e){return Fl(t.getFullYear()%100,e,2)}function ic(t,e){return Fl((t=jl(t)).getFullYear()%100,e,2)}function nc(t,e){return Fl(t.getFullYear()%1e4,e,4)}function rc(t,e){var i=t.getDay();return Fl((t=i>=4||0===i?Fo(t):Fo.ceil(t)).getFullYear()%1e4,e,4)}function ac(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fl(e/60|0,"0",2)+Fl(e%60,"0",2)}function sc(t,e){return Fl(t.getUTCDate(),e,2)}function oc(t,e){return Fl(t.getUTCHours(),e,2)}function lc(t,e){return Fl(t.getUTCHours()%12||12,e,2)}function cc(t,e){return Fl(1+Eo.count($o(t),t),e,3)}function gc(t,e){return Fl(t.getUTCMilliseconds(),e,3)}function uc(t,e){return gc(t,e)+"000"}function dc(t,e){return Fl(t.getUTCMonth()+1,e,2)}function hc(t,e){return Fl(t.getUTCMinutes(),e,2)}function Bc(t,e){return Fl(t.getUTCSeconds(),e,2)}function pc(t){var e=t.getUTCDay();return 0===e?7:e}function Fc(t,e){return Fl(Do.count($o(t)-1,t),e,2)}function fc(t){var e=t.getUTCDay();return e>=4||0===e?ko(t):ko.ceil(t)}function Qc(t,e){return t=fc(t),Fl(ko.count($o(t),t)+(4===$o(t).getUTCDay()),e,2)}function Ic(t){return t.getUTCDay()}function Uc(t,e){return Fl(Xo.count($o(t)-1,t),e,2)}function bc(t,e){return Fl(t.getUTCFullYear()%100,e,2)}function yc(t,e){return Fl((t=fc(t)).getUTCFullYear()%100,e,2)}function mc(t,e){return Fl(t.getUTCFullYear()%1e4,e,4)}function xc(t,e){var i=t.getUTCDay();return Fl((t=i>=4||0===i?ko(t):ko.ceil(t)).getUTCFullYear()%1e4,e,4)}function vc(){return"+0000"}function Cc(){return"%"}function Ac(t){return+t}function Lc(t){return Math.floor(+t/1e3)}function Gc(t){return sl=al(t),ol=sl.format,ll=sl.parse,cl=sl.utcFormat,ul=sl.utcParse,sl}Gc({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Rc="%Y-%m-%dT%H:%M:%S.%LZ";var Sc=Date.prototype.toISOString?function(t){return t.toISOString()}:cl(Rc);var wc=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:ul(Rc),Vc=Xs(Object.freeze({__proto__:null,isoFormat:Sc,isoParse:wc,get timeFormat(){return ol},timeFormatDefaultLocale:Gc,timeFormatLocale:al,get timeParse(){return ll},get utcFormat(){return cl},get utcParse(){return ul}}));function Ec(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function Zc(t){return(t=Ec(Math.abs(t)))?t[1]:NaN}var Nc,Dc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xc(t){if(!(e=Dc.exec(t)))throw new Error("invalid format: "+t);var e;return new Hc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Hc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Wc(t,e){var i=Ec(t,e);if(!i)return t+"";var n=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}Xc.prototype=Hc.prototype,Hc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var kc={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Wc(100*t,e)},r:Wc,s:function(t,e){var i=Ec(t,e);if(!i)return t+"";var n=i[0],r=i[1],a=r-(Nc=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Ec(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Mc(t){return t}var Tc,Yc,Jc,_c=Array.prototype.map,zc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Oc(t){var e,i,n=void 0===t.grouping||void 0===t.thousands?Mc:(e=_c.call(t.grouping,Number),i=t.thousands+"",function(t,n){for(var r=t.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(t.substring(r-=o,r+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(i)}),r=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Mc:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(_c.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",g=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=Xc(t)).fill,i=t.align,u=t.sign,d=t.symbol,h=t.zero,B=t.width,p=t.comma,F=t.precision,f=t.trim,Q=t.type;"n"===Q?(p=!0,Q="g"):kc[Q]||(void 0===F&&(F=12),f=!0,Q="g"),(h||"0"===e&&"="===i)&&(h=!0,e="0",i="=");var I="$"===d?r:"#"===d&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",U="$"===d?a:/[%p]/.test(Q)?l:"",b=kc[Q],y=/[defgprs%]/.test(Q);function m(t){var r,a,l,d=I,m=U;if("c"===Q)m=b(t)+m,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?g:b(Math.abs(t),F),f&&(t=function(t){t:for(var e,i=t.length,n=1,r=-1;n<i;++n)switch(t[n]){case".":r=e=n;break;case"0":0===r&&(r=n),e=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),x&&0==+t&&"+"!==u&&(x=!1),d=(x?"("===u?u:c:"-"===u||"("===u?"":u)+d,m=("s"===Q?zc[8+Nc/3]:"")+m+(x&&"("===u?")":""),y)for(r=-1,a=t.length;++r<a;)if(48>(l=t.charCodeAt(r))||l>57){m=(46===l?s+t.slice(r+1):t.slice(r))+m,t=t.slice(0,r);break}}p&&!h&&(t=n(t,1/0));var v=d.length+t.length+m.length,C=v<B?new Array(B-v+1).join(e):"";switch(p&&h&&(t=n(C+t,C.length?B-m.length:1/0),C=""),i){case"<":t=d+t+m+C;break;case"=":t=d+C+t+m;break;case"^":t=C.slice(0,v=C.length>>1)+d+t+m+C.slice(v);break;default:t=C+d+t+m}return o(t)}return F=void 0===F?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,F)):Math.max(0,Math.min(20,F)),m.toString=function(){return t+""},m}return{format:u,formatPrefix:function(t,e){var i=u(((t=Xc(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(Zc(e)/3))),r=Math.pow(10,-n),a=zc[8+n/3];return function(t){return i(r*t)+a}}}}function Kc(t){return Tc=Oc(t),Yc=Tc.format,Jc=Tc.formatPrefix,Tc}Kc({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});for(var Pc=Object.freeze({__proto__:null,FormatSpecifier:Hc,get format(){return Yc},formatDefaultLocale:Kc,formatLocale:Oc,get formatPrefix(){return Jc},formatSpecifier:Xc,precisionFixed:function(t){return Math.max(0,-Zc(Math.abs(t)))},precisionPrefix:function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zc(e)/3)))-Zc(Math.abs(t)))},precisionRound:function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Zc(e)-Zc(t))+1}}),jc=Xs(Pc),qc=function(t){for(var e,i=t.length,n=0;n<i;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0},$c=function(t){var e=typeof t;if("string"===e){var i=t;if(0===(t=+t)&&qc(i))return!1}else if("number"!==e)return!1;return t-t<1},tg={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"},eg={},ig="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ng="undefined"==typeof Uint8Array?[]:new Uint8Array(256),rg=0;rg<64;rg++)ng[ig.charCodeAt(rg)]=rg;var ag=Object.freeze({__proto__:null,decode:function(t){var e,i,n,r,a,s=.75*t.length,o=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),g=new Uint8Array(c);for(e=0;e<o;e+=4)i=ng[t.charCodeAt(e)],n=ng[t.charCodeAt(e+1)],r=ng[t.charCodeAt(e+2)],a=ng[t.charCodeAt(e+3)],g[l++]=i<<2|n>>4,g[l++]=(15&n)<<4|r>>2,g[l++]=(3&r)<<6|63&a;return c},encode:function(t){var e,i=new Uint8Array(t),n=i.length,r="";for(e=0;e<n;e+=3)r+=ig[i[e]>>2],r+=ig[(3&i[e])<<4|i[e+1]>>4],r+=ig[(15&i[e+1])<<2|i[e+2]>>6],r+=ig[63&i[e+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r}}),sg=Xs(ag),og=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")},lg=sg.decode,cg=og,gg=Array.isArray,ug=ArrayBuffer,dg=DataView;function hg(t){return ug.isView(t)&&!(t instanceof dg)}function Bg(t){return gg(t)||hg(t)}eg.isTypedArray=hg,eg.isArrayOrTypedArray=Bg,eg.isArray1D=function(t){return!Bg(t[0])},eg.ensureArray=function(t,e){return gg(t)||(t=[]),t.length=e,t};var pg={u1c:"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,i1:"undefined"==typeof Int8Array?void 0:Int8Array,u1:"undefined"==typeof Uint8Array?void 0:Uint8Array,i2:"undefined"==typeof Int16Array?void 0:Int16Array,u2:"undefined"==typeof Uint16Array?void 0:Uint16Array,i4:"undefined"==typeof Int32Array?void 0:Int32Array,u4:"undefined"==typeof Uint32Array?void 0:Uint32Array,f4:"undefined"==typeof Float32Array?void 0:Float32Array,f8:"undefined"==typeof Float64Array?void 0:Float64Array};function Fg(t){return t.constructor===ArrayBuffer}function fg(t,e,i){if(Bg(t)){if(Bg(t[0])){for(var n=i,r=0;r<t.length;r++)n=e(n,t[r].length);return n}return t.length}return 0}pg.uint8c=pg.u1c,pg.uint8=pg.u1,pg.int8=pg.i1,pg.uint16=pg.u2,pg.int16=pg.i2,pg.uint32=pg.u4,pg.int32=pg.i4,pg.float32=pg.f4,pg.float64=pg.f8,eg.isArrayBuffer=Fg,eg.decodeTypedArraySpec=function(t){var e=[],i=function(t){return{bdata:t.bdata,dtype:t.dtype,shape:t.shape}}(t),n=i.dtype,r=pg[n];if(!r)throw new Error('Error in dtype: "'+n+'"');var a=r.BYTES_PER_ELEMENT,s=i.bdata;Fg(s)||(s=lg(s));var o=void 0===i.shape?[s.byteLength/a]:(""+i.shape).split(",");o.reverse();var l,c,g=o.length,u=+o[0],d=a*u,h=0;if(1===g)e=new r(s);else if(2===g)for(l=+o[1],c=0;c<l;c++)e[c]=new r(s,h,u),h+=d;else{if(3!==g)throw new Error("ndim: "+g+'is not supported with the shape:"'+i.shape+'"');l=+o[1];for(var B=+o[2],p=0;p<B;p++)for(e[p]=[],c=0;c<l;c++)e[p][c]=new r(s,h,u),h+=d}return e.bdata=i.bdata,e.dtype=i.dtype,e.shape=o.reverse().join(","),t._inputArray=e,e},eg.isTypedArraySpec=function(t){return cg(t)&&t.hasOwnProperty("dtype")&&"string"==typeof t.dtype&&t.hasOwnProperty("bdata")&&("string"==typeof t.bdata||Fg(t.bdata))&&(void 0===t.shape||t.hasOwnProperty("shape")&&("string"==typeof t.shape||"number"==typeof t.shape))},eg.concat=function(){var t,e,i,n,r,a,s,o,l=[],c=!0,g=0;for(i=0;i<arguments.length;i++)(a=(n=arguments[i]).length)&&(e?l.push(n):(e=n,r=a),gg(n)?t=!1:(c=!1,g?t!==n.constructor&&(t=!1):t=n.constructor),g+=a);if(!g)return[];if(!l.length)return e;if(c)return e.concat.apply(e,l);if(t){for((s=new t(g)).set(e),i=0;i<l.length;i++)n=l[i],s.set(n,r),r+=n.length;return s}for(s=new Array(g),o=0;o<e.length;o++)s[o]=e[o];for(i=0;i<l.length;i++){for(n=l[i],o=0;o<n.length;o++)s[r+o]=n[o];r+=o}return s},eg.maxRowLength=function(t){return fg(t,Math.max,0)},eg.minRowLength=function(t){return fg(t,Math.min,1/0)};var Qg=$c,Ig=eg.isArrayOrTypedArray,Ug=function(t,e){if(Qg(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";var i,n,r,a,s=e.split(".");for(a=0;a<s.length;a++)if("__"===String(s[a]).slice(0,2))throw"bad property string";for(a=0;a<s.length;){if(i=String(s[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])s[a]=i[1];else{if(0!==a)throw"bad property string";s.splice(0,1)}for(n=i[2].substr(1,i[2].length-2).split("]["),r=0;r<n.length;r++)a++,s.splice(a,0,Number(n[r]))}a++}return"object"!=typeof t?function(t,e,i){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:i,obj:t}}(t,e,s):{set:xg(t,s,e),get:bg(t,s),astr:e,parts:s,obj:t}};function bg(t,e){return function(){var i,n,r,a,s,o=t;for(a=0;a<e.length-1;a++){if(-1===(i=e[a])){for(n=!0,r=[],s=0;s<o.length;s++)r[s]=bg(o[s],e.slice(a+1))(),r[s]!==r[0]&&(n=!1);return n?r[0]:r}if("number"==typeof i&&!Ig(o))return;if("object"!=typeof(o=o[i])||null===o)return}if("object"==typeof o&&null!==o&&null!==(r=o[e[a]]))return r}}var yg=/(^|\.)args\[/;function mg(t,e){return void 0===t||null===t&&!e.match(yg)}function xg(t,e,i){return function(n){var r,a,s=t,o="",l=mg(n,i);for(a=0;a<e.length-1;a++){if("number"==typeof(r=e[a])&&!Ig(s))throw"array index but container is not an array";if(-1===r){if(l=!Cg(s,e.slice(a+1),n,i))break;return}if(!Ag(s,r,e[a+1],l))break;if("object"!=typeof(s=s[r])||null===s)throw"container is not an object";o=vg(o,r)}if(l){if(a===e.length-1&&(delete s[e[a]],Array.isArray(s)&&+e[a]==s.length-1))for(;s.length&&void 0===s[s.length-1];)s.pop()}else s[e[a]]=n}}function vg(t,e){var i=e;return Qg(e)?i="["+e+"]":t&&(i="."+e),t+i}function Cg(t,e,i,n){var r,a=Ig(i),s=!0,o=i,l=n.replace("-1",0),c=!a&&mg(i,l),g=e[0];for(r=0;r<t.length;r++)l=n.replace("-1",r),a&&(c=mg(o=i[r%i.length],l)),c&&(s=!1),Ag(t,r,g,c)&&xg(t[r],e,n.replace("-1",r))(o);return s}function Ag(t,e,i,n){if(void 0===t[e]){if(n)return!1;t[e]="number"==typeof i?[]:{}}return!0}var Lg=Ug,Gg=/^\w*$/,Rg=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,Sg=/^[^\.\[\]]+$/,wg=$c,Vg=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var i=Math.log(Math.min(e[0],e[1]))/Math.LN10;return wg(i)||(i=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),i},Eg=eg.isArrayOrTypedArray,Zg=og;var Ng={mod:function(t,e){var i=t%e;return i<0?i+e:i},modHalf:function(t,e){return Math.abs(t)>e/2?t-Math.round(t/e)*e:t}},Dg={},Xg={exports:{}};Xg.exports=function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=/^\s+/,i=/\s+$/;function n(t,e){if(e=e||{},(t=t||"")instanceof n)return t;if(!(this instanceof n))return new n(t,e);var i=r(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function r(e){var i={r:0,g:0,b:0},n=1,r=null,s=null,l=null,g=!1,u=!1;return"string"==typeof e&&(e=T(e)),"object"==t(e)&&(M(e.r)&&M(e.g)&&M(e.b)?(i=a(e.r,e.g,e.b),g=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):M(e.h)&&M(e.s)&&M(e.v)?(r=Z(e.s),s=Z(e.v),i=c(e.h,r,s),g=!0,u="hsv"):M(e.h)&&M(e.s)&&M(e.l)&&(r=Z(e.s),l=Z(e.l),i=o(e.h,r,l),g=!0,u="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=L(n),{ok:g,format:e.format||u,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:n}}function a(t,e,i){return{r:255*G(t,255),g:255*G(e,255),b:255*G(i,255)}}function s(t,e,i){t=G(t,255),e=G(e,255),i=G(i,255);var n,r,a=Math.max(t,e,i),s=Math.min(t,e,i),o=(a+s)/2;if(a==s)n=r=0;else{var l=a-s;switch(r=o>.5?l/(2-a-s):l/(a+s),a){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,l:o}}function o(t,e,i){var n,r,a;function s(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=G(t,360),e=G(e,100),i=G(i,100),0===e)n=r=a=i;else{var o=i<.5?i*(1+e):i+e-i*e,l=2*i-o;n=s(l,o,t+1/3),r=s(l,o,t),a=s(l,o,t-1/3)}return{r:255*n,g:255*r,b:255*a}}function l(t,e,i){t=G(t,255),e=G(e,255),i=G(i,255);var n,r,a=Math.max(t,e,i),s=Math.min(t,e,i),o=a,l=a-s;if(r=0===a?0:l/a,a==s)n=0;else{switch(a){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,v:o}}function c(t,e,i){t=6*G(t,360),e=G(e,100),i=G(i,100);var n=Math.floor(t),r=t-n,a=i*(1-e),s=i*(1-r*e),o=i*(1-(1-r)*e),l=n%6;return{r:255*[i,s,a,a,o,i][l],g:255*[o,i,i,s,a,a][l],b:255*[a,a,o,i,i,s][l]}}function g(t,e,i,n){var r=[E(Math.round(t).toString(16)),E(Math.round(e).toString(16)),E(Math.round(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function u(t,e,i,n,r){var a=[E(Math.round(t).toString(16)),E(Math.round(e).toString(16)),E(Math.round(i).toString(16)),E(N(n))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function d(t,e,i,n){return[E(N(n)),E(Math.round(t).toString(16)),E(Math.round(e).toString(16)),E(Math.round(i).toString(16))].join("")}function h(t,e){e=0===e?0:e||10;var i=n(t).toHsl();return i.s-=e/100,i.s=R(i.s),n(i)}function B(t,e){e=0===e?0:e||10;var i=n(t).toHsl();return i.s+=e/100,i.s=R(i.s),n(i)}function p(t){return n(t).desaturate(100)}function F(t,e){e=0===e?0:e||10;var i=n(t).toHsl();return i.l+=e/100,i.l=R(i.l),n(i)}function f(t,e){e=0===e?0:e||10;var i=n(t).toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(-e/100*255))),i.g=Math.max(0,Math.min(255,i.g-Math.round(-e/100*255))),i.b=Math.max(0,Math.min(255,i.b-Math.round(-e/100*255))),n(i)}function Q(t,e){e=0===e?0:e||10;var i=n(t).toHsl();return i.l-=e/100,i.l=R(i.l),n(i)}function I(t,e){var i=n(t).toHsl(),r=(i.h+e)%360;return i.h=r<0?360+r:r,n(i)}function U(t){var e=n(t).toHsl();return e.h=(e.h+180)%360,n(e)}function b(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var i=n(t).toHsl(),r=[n(t)],a=360/e,s=1;s<e;s++)r.push(n({h:(i.h+s*a)%360,s:i.s,l:i.l}));return r}function y(t){var e=n(t).toHsl(),i=e.h;return[n(t),n({h:(i+72)%360,s:e.s,l:e.l}),n({h:(i+216)%360,s:e.s,l:e.l})]}function m(t,e,i){e=e||6,i=i||30;var r=n(t).toHsl(),a=360/i,s=[n(t)];for(r.h=(r.h-(a*e>>1)+720)%360;--e;)r.h=(r.h+a)%360,s.push(n(r));return s}function x(t,e){e=e||6;for(var i=n(t).toHsv(),r=i.h,a=i.s,s=i.v,o=[],l=1/e;e--;)o.push(n({h:r,s:a,v:s})),s=(s+l)%1;return o}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,i,n=this.toRgb();return t=n.r/255,e=n.g/255,i=n.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},setAlpha:function(t){return this._a=L(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=l(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=l(this._r,this._g,this._b),e=Math.round(360*t.h),i=Math.round(100*t.s),n=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=s(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=s(this._r,this._g,this._b),e=Math.round(360*t.h),i=Math.round(100*t.s),n=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return u(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*G(this._r,255))+"%",g:Math.round(100*G(this._g,255))+"%",b:Math.round(100*G(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*G(this._r,255))+"%, "+Math.round(100*G(this._g,255))+"%, "+Math.round(100*G(this._b,255))+"%)":"rgba("+Math.round(100*G(this._r,255))+"%, "+Math.round(100*G(this._g,255))+"%, "+Math.round(100*G(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),i=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var a=n(t);i="#"+d(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(F,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(Q,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(B,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(I,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(m,arguments)},complement:function(){return this._applyCombination(U,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(y,arguments)},triad:function(){return this._applyCombination(b,[3])},tetrad:function(){return this._applyCombination(b,[4])}},n.fromRatio=function(e,i){if("object"==t(e)){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]="a"===a?e[a]:Z(e[a]));e=r}return n(e,i)},n.equals=function(t,e){return!(!t||!e)&&n(t).toRgbString()==n(e).toRgbString()},n.random=function(){return n.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},n.mix=function(t,e,i){i=0===i?0:i||50;var r=n(t).toRgb(),a=n(e).toRgb(),s=i/100;return n({r:(a.r-r.r)*s+r.r,g:(a.g-r.g)*s+r.g,b:(a.b-r.b)*s+r.b,a:(a.a-r.a)*s+r.a})},n.readability=function(t,e){var i=n(t),r=n(e);return(Math.max(i.getLuminance(),r.getLuminance())+.05)/(Math.min(i.getLuminance(),r.getLuminance())+.05)},n.isReadable=function(t,e,i){var r,a,s=n.readability(t,e);switch(a=!1,(r=Y(i)).level+r.size){case"AAsmall":case"AAAlarge":a=s>=4.5;break;case"AAlarge":a=s>=3;break;case"AAAsmall":a=s>=7}return a},n.mostReadable=function(t,e,i){var r,a,s,o,l=null,c=0;a=(i=i||{}).includeFallbackColors,s=i.level,o=i.size;for(var g=0;g<e.length;g++)(r=n.readability(t,e[g]))>c&&(c=r,l=n(e[g]));return n.isReadable(t,l,{level:s,size:o})||!a?l:(i.includeFallbackColors=!1,n.mostReadable(t,["#fff","#000"],i))};var v=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=n.hexNames=A(v);function A(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function L(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function G(t,e){w(t)&&(t="100%");var i=V(t);return t=Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function R(t){return Math.min(1,Math.max(0,t))}function S(t){return parseInt(t,16)}function w(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function V(t){return"string"==typeof t&&-1!=t.indexOf("%")}function E(t){return 1==t.length?"0"+t:""+t}function Z(t){return t<=1&&(t=100*t+"%"),t}function N(t){return Math.round(255*parseFloat(t)).toString(16)}function D(t){return S(t)/255}var X,H,W,k=(H="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",W="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{CSS_UNIT:new RegExp(X),rgb:new RegExp("rgb"+H),rgba:new RegExp("rgba"+W),hsl:new RegExp("hsl"+H),hsla:new RegExp("hsla"+W),hsv:new RegExp("hsv"+H),hsva:new RegExp("hsva"+W),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function M(t){return!!k.CSS_UNIT.exec(t)}function T(t){t=t.replace(e,"").replace(i,"").toLowerCase();var n,r=!1;if(v[t])t=v[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(n=k.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=k.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=k.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=k.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=k.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=k.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=k.hex8.exec(t))?{r:S(n[1]),g:S(n[2]),b:S(n[3]),a:D(n[4]),format:r?"name":"hex8"}:(n=k.hex6.exec(t))?{r:S(n[1]),g:S(n[2]),b:S(n[3]),format:r?"name":"hex"}:(n=k.hex4.exec(t))?{r:S(n[1]+""+n[1]),g:S(n[2]+""+n[2]),b:S(n[3]+""+n[3]),a:D(n[4]+""+n[4]),format:r?"name":"hex8"}:!!(n=k.hex3.exec(t))&&{r:S(n[1]+""+n[1]),g:S(n[2]+""+n[2]),b:S(n[3]+""+n[3]),format:r?"name":"hex"}}function Y(t){var e,i;return"AA"!==(e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(i=(t.size||"small").toLowerCase())&&"large"!==i&&(i="small"),{level:e,size:i}}return n}();var Hg,Wg,kg=Xg.exports,Mg={},Tg=og,Yg=Array.isArray;function Jg(t,e,i,n){var r,a,s,o,l,c,g,u=t[0],d=t.length;if(2===d&&Yg(u)&&Yg(t[1])&&0===u.length){if(g=function(t,e){var i,n;for(i=0;i<t.length;i++){if(null!==(n=t[i])&&"object"==typeof n)return!1;void 0!==n&&(e[i]=n)}return!0}(t[1],u),g)return u;u.splice(0,u.length)}for(var h=1;h<d;h++)for(a in r=t[h])s=u[a],o=r[a],n&&Yg(o)?u[a]=o:e&&o&&(Tg(o)||(l=Yg(o)))?(l?(l=!1,c=s&&Yg(s)?s:[]):c=s&&Tg(s)?s:{},u[a]=Jg([c,o],e,i,n)):(void 0!==o||i)&&(u[a]=o);return u}function _g(){return Wg||(Wg=1,Hg=function(t){var e=t.variantValues,i=t.editType,n=t.colorEditType;void 0===n&&(n=i);var r={editType:i,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal",description:["Sets the weight (or boldness) of the font."].join(" ")};t.noNumericWeightValues&&(r.valType="enumerated",r.values=r.extras,r.extras=void 0,r.min=void 0,r.max=void 0);var a={family:{valType:"string",noBlank:!0,strict:!0,editType:i,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:i},color:{valType:"color",editType:n},weight:r,style:{editType:i,valType:"enumerated",values:["normal","italic"],dflt:"normal",description:["Sets whether a font should be styled with a normal or italic face from its family."].join(" ")},variant:t.noFontVariant?void 0:{editType:i,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal",description:["Sets the variant of the font."].join(" ")},textcase:t.noFontTextcase?void 0:{editType:i,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal",description:["Sets capitalization of text.","It can be used to make text appear in all-uppercase or all-lowercase,","or with each word capitalized."].join(" ")},lineposition:t.noFontLineposition?void 0:{editType:i,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none",description:["Sets the kind of decoration line(s) with text,","such as an *under*, *over* or *through*","as well as combinations e.g. *under+over*, etc."].join(" ")},shadow:t.noFontShadow?void 0:{editType:i,valType:"string",dflt:t.autoShadowDflt?"auto":"none",description:["Sets the shape and color of the shadow behind text.","*auto* places minimal shadow and applies contrast text font color.","See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options."].join(" ")},editType:i,description:""+(t.description||"")};return t.autoSize&&(a.size.dflt="auto"),t.autoColor&&(a.color.dflt="auto"),t.arrayOk&&(a.family.arrayOk=!0,a.weight.arrayOk=!0,a.style.arrayOk=!0,t.noFontVariant||(a.variant.arrayOk=!0),t.noFontTextcase||(a.textcase.arrayOk=!0),t.noFontLineposition||(a.lineposition.arrayOk=!0),t.noFontShadow||(a.shadow.arrayOk=!0),a.size.arrayOk=!0,a.color.arrayOk=!0),a}),Hg}Mg.extendFlat=function(){return Jg(arguments,!1,!1,!1)},Mg.extendDeep=function(){return Jg(arguments,!0,!1,!1)},Mg.extendDeepAll=function(){return Jg(arguments,!0,!0,!1)},Mg.extendDeepNoArrays=function(){return Jg(arguments,!0,!1,!0)};var zg={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},Og=zg,Kg=_g(),Pg=Kg({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});Pg.family.dflt=Og.HOVERFONT,Pg.size.dflt=Og.HOVERFONTSIZE;var jg={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none",description:["Determines expansion of hover effects to other subplots","If *single* just the axis pair of the primary point is included without overlaying subplots.","If *overlaying* all subplots using the main axis and occupying the same space are included.","If *axis*, also include stacked subplots using the same axis","when `hovermode` is set to *x*, *x unified*, *y* or *y unified*."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:Pg,grouptitlefont:Kg({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}},qg=_g(),$g=jg.hoverlabel,tu=Mg.extendFlat,eu={hoverlabel:{bgcolor:tu({},$g.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:tu({},$g.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:qg({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:tu({},$g.align,{arrayOk:!0}),namelength:tu({},$g.namelength,{arrayOk:!0}),editType:"none"}},iu=_g(),nu=eu,ru={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legend:{valType:"subplotid",dflt:"legend",editType:"style",description:["Sets the reference to a legend to show this trace in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:iu({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items.","When having unranked or equal rank items shapes would be displayed after traces","i.e. according to their order in data and layout."].join(" ")},legendwidth:{valType:"number",min:0,editType:"style",description:"Sets the width (in px or fraction) of the legend for this trace."},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appears as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:nu.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}},au=kg,su={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},ou=su.RdBu;function lu(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var i=0;i<t.length;i++){var n=t[i];if(2!==n.length||+n[0]<e||!au(n[1]).isValid())return!1;e=+n[0]}return!0}var cu={scales:su,defaultScale:ou,get:function(t,e){if(e||(e=ou),!t)return e;function i(){try{t=su[t]||JSON.parse(t)}catch(i){t=e}}return"string"==typeof t&&(i(),"string"==typeof t&&i()),lu(t)?t:e},isValid:function(t){return void 0!==su[t]||lu(t)}},gu={exports:{}},uu={defaults:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],defaultLine:"#444",lightLine:"#eee",background:"#fff",borderLine:"#BEC8D9",lightFraction:1e3/11},du=kg,hu=$c,Bu=eg.isTypedArray,pu=gu.exports={},Fu=uu;pu.defaults=Fu.defaults;var fu=pu.defaultLine=Fu.defaultLine;pu.lightLine=Fu.lightLine;var Qu=pu.background=Fu.background;function Iu(t){if(hu(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var i=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!i)return t;var n=i[1].trim().split(/\s*[\s,]\s*/),r="a"===e.charAt(3)&&4===n.length;if(!r&&3!==n.length)return t;for(var a=0;a<n.length;a++){if(!n[a].length)return t;if(n[a]=Number(n[a]),!(n[a]>=0))return t;if(3===a)n[a]>1&&(n[a]=1);else if(n[a]>=1)return t}var s=Math.round(255*n[0])+", "+Math.round(255*n[1])+", "+Math.round(255*n[2]);return r?"rgba("+s+", "+n[3]+")":"rgb("+s+")"}pu.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},pu.rgb=function(t){return pu.tinyRGB(du(t))},pu.opacity=function(t){return t?du(t).getAlpha():0},pu.addOpacity=function(t,e){var i=du(t).toRgb();return"rgba("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+", "+e+")"},pu.combine=function(t,e){var i=du(t).toRgb();if(1===i.a)return du(t).toRgbString();var n=du(e||Qu).toRgb(),r=1===n.a?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a},a={r:r.r*(1-i.a)+i.r*i.a,g:r.g*(1-i.a)+i.g*i.a,b:r.b*(1-i.a)+i.b*i.a};return du(a).toRgbString()},pu.interpolate=function(t,e,i){var n=du(t).toRgb(),r=du(e).toRgb(),a={r:i*n.r+(1-i)*r.r,g:i*n.g+(1-i)*r.g,b:i*n.b+(1-i)*r.b};return du(a).toRgbString()},pu.contrast=function(t,e,i){var n=du(t);return 1!==n.getAlpha()&&(n=du(pu.combine(t,Qu))),(n.isDark()?e?n.lighten(e):Qu:i?n.darken(i):fu).toString()},pu.stroke=function(t,e){var i=du(e);t.style({stroke:pu.tinyRGB(i),"stroke-opacity":i.getAlpha()})},pu.fill=function(t,e){var i=du(e);t.style({fill:pu.tinyRGB(i),"fill-opacity":i.getAlpha()})},pu.clean=function(t){if(t&&"object"==typeof t){var e,i,n,r,a=Object.keys(t);for(e=0;e<a.length;e++)if(r=t[n=a[e]],"color"===n.substr(n.length-5))if(Array.isArray(r))for(i=0;i<r.length;i++)r[i]=Iu(r[i]);else t[n]=Iu(r);else if("colorscale"===n.substr(n.length-10)&&Array.isArray(r))for(i=0;i<r.length;i++)Array.isArray(r[i])&&(r[i][1]=Iu(r[i][1]));else if(Array.isArray(r)){var s=r[0];if(!Array.isArray(s)&&s&&"object"==typeof s)for(i=0;i<r.length;i++)pu.clean(r[i])}else r&&"object"==typeof r&&!Bu(r)&&pu.clean(r)}};var Uu=gu.exports,bu={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2},yu={counter:function(t,e,i,n){var r=(e||"")+(i?"":"$"),a=!1===n?"":"^";return"xy"===t?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+r):new RegExp(a+t+"([2-9]|[1-9][0-9]+)?"+r)}};!function(t){var e=$c,i=kg,n=Mg.extendFlat,r=ru,a=cu,s=Uu,o=bu.DESELECTDIM,l=Ug,c=yu.counter,g=Ng.modHalf,u=eg.isArrayOrTypedArray,d=eg.isTypedArraySpec,h=eg.decodeTypedArraySpec;function B(e,i){var n=t.valObjectMeta[i.valType];if(i.arrayOk&&u(e))return!0;if(n.validateFunction)return n.validateFunction(e,i);var r={},a=r,s={set:function(t){a=t}};return n.coerceFunction(e,s,r,i),a!==r}t.valObjectMeta={data_array:{description:["An {array} of data.","The value must represent an {array} or it will be ignored,","but this array can be provided in several forms:","(1) a regular {array} object","(2) a typed array (e.g. Float32Array)","(3) an object with keys dtype, bdata, and optionally shape.","In this 3rd form, dtype is one of","*f8*, *f4*.","*i4*, *u4*,","*i2*, *u2*,","*i1*, *u1* or *u1c* for Uint8ClampedArray.","In addition to shorthand `dtype` above one could also use the following forms:","*float64*, *float32*,","*int32*, *uint32*,","*int16*, *uint16*,","*int8*, *uint8* or *uint8c* for Uint8ClampedArray.","`bdata` is either a base64-encoded string or the ArrayBuffer of","an integer or float typed array.","For either multi-dimensional arrays you must also","provide its dimensions separated by comma via `shape`.","For example using `dtype`: *f4* and `shape`: *5,100* you can","declare a 2-D array that has 5 rows and 100 columns","containing float32 values i.e. 4 bits per value.","`shape` is optional for one dimensional arrays."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,i){e.set(u(t)?t:d(t)?h(t):i)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(t,e,i,n){n.coerceNumber&&(t=+t),-1===n.values.indexOf(t)?e.set(i):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var i=e.values,n=0;n<i.length;n++){var r=String(i[n]);if("/"===r.charAt(0)&&"/"===r.charAt(r.length-1)){if(new RegExp(r.substr(1,r.length-2)).test(t))return!0}else if(t===i[n])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,i){!0===t||!1===t?e.set(t):e.set(i)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(t,i,n,r){d(t)&&(t=h(t)),!e(t)||void 0!==r.min&&t<r.min||void 0!==r.max&&t>r.max?i.set(n):i.set(+t)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk","extras"],coerceFunction:function(t,i,n,r){-1===(r.extras||[]).indexOf(t)?(d(t)&&(t=h(t)),t%1||!e(t)||void 0!==r.min&&t<r.min||void 0!==r.max&&t>r.max?i.set(n):i.set(+t)):i.set(t)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(t,e,i,n){if("string"!=typeof t){var r="number"==typeof t;!0!==n.strict&&r?e.set(String(t)):e.set(i)}else n.noBlank&&!t?e.set(i):e.set(t)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(t,e,n){d(t)&&(t=h(t)),i(t).isValid()?e.set(t):e.set(n)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,n){Array.isArray(t)&&t.length&&t.every((function(t){return i(t).isValid()}))?e.set(t):e.set(n)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(a.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(t,e,i){e.set(a.get(t,i))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(t,i,n){d(t)&&(t=h(t)),"auto"===t?i.set("auto"):e(t)?i.set(g(+t,360)):i.set(n)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(t,e,i,n){var r=n.regex||c(i);"string"==typeof t&&r.test(t)?e.set(t):e.set(i)},validateFunction:function(t,e){var i=e.dflt;return t===i||"string"==typeof t&&!!c(i).test(t)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(t,e,i,n){if(-1===(n.extras||[]).indexOf(t))if("string"==typeof t){for(var r=t.split("+"),a=0;a<r.length;){var s=r[a];-1===n.flags.indexOf(s)||r.indexOf(s)<a?r.splice(a,1):a++}r.length?e.set(r.join("+")):e.set(i)}else e.set(i);else e.set(t)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(t,e,i){void 0===t?e.set(i):e.set(d(t)?h(t):t)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(e,i,n,r){function a(e,i,n){var r,a={set:function(t){r=t}};return void 0===n&&(n=i.dflt),t.valObjectMeta[i.valType].coerceFunction(e,a,n,i),r}if(d(e)&&(e=h(e)),u(e)){var s,o,l,c,g,B,p=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&u(e[0]),F=r.items,f=[],Q=Array.isArray(F),I=Q&&p&&u(F[0]),U=p&&Q&&!I,b=Q&&!U?F.length:e.length;if(n=Array.isArray(n)?n:[],p)for(s=0;s<b;s++)for(f[s]=[],l=u(e[s])?e[s]:[],g=U?F.length:Q?F[s].length:l.length,o=0;o<g;o++)c=U?F[o]:Q?F[s][o]:F,void 0!==(B=a(l[o],c,(n[s]||[])[o]))&&(f[s][o]=B);else for(s=0;s<b;s++)void 0!==(B=a(e[s],Q?F[s]:F,n[s]))&&(f[s]=B);i.set(f)}else i.set(n)},validateFunction:function(t,e){if(!u(t))return!1;var i=e.items,n=Array.isArray(i),r=2===e.dimensions;if(!e.freeLength&&t.length!==i.length)return!1;for(var a=0;a<t.length;a++)if(r){if(!u(t[a])||!e.freeLength&&t[a].length!==i[a].length)return!1;for(var s=0;s<t[a].length;s++)if(!B(t[a][s],n?i[a][s]:i))return!1}else if(!B(t[a],n?i[a]:i))return!1;return!0}}},t.coerce=function(e,i,n,r,a){var s=l(n,r).get(),o=l(e,r),c=l(i,r),g=o.get(),p=i._template;if(void 0===g&&p&&(g=l(p,r).get(),p=0),void 0===a&&(a=s.dflt),s.arrayOk){if(u(g))return c.set(g),g;if(d(g))return g=h(g),c.set(g),g}var F=t.valObjectMeta[s.valType].coerceFunction;F(g,c,a,s);var f=c.get();return p&&f===a&&!B(g,s)&&(F(g=l(p,r).get(),c,a,s),f=c.get()),f},t.coerce2=function(e,i,n,r,a){var s=l(e,r),o=t.coerce(e,i,n,r,a),c=s.get();return null!=c&&o},t.coerceFont=function(t,e,i,r){r||(r={}),i=n({},i);var a={family:t(e+".family",(i=n(i,r.overrideDflt||{})).family),size:t(e+".size",i.size),color:t(e+".color",i.color),weight:t(e+".weight",i.weight),style:t(e+".style",i.style)};if(r.noFontVariant||(a.variant=t(e+".variant",i.variant)),r.noFontLineposition||(a.lineposition=t(e+".lineposition",i.lineposition)),r.noFontTextcase||(a.textcase=t(e+".textcase",i.textcase)),!r.noFontShadow){var s=i.shadow;"none"===s&&r.autoShadowDflt&&(s="auto"),a.shadow=t(e+".shadow",s)}return a},t.coercePattern=function(t,e,i,n){if(t(e+".shape")){t(e+".solidity"),t(e+".size");var r="overlay"===t(e+".fillmode");if(!n){var a=t(e+".bgcolor",r?i:void 0);t(e+".fgcolor",r?s.contrast(a):i)}t(e+".fgopacity",r?.5:1)}},t.coerceHoverinfo=function(e,i,n){var a,s=i._module.attributes,o=s.hoverinfo?s:r,l=o.hoverinfo;if(1===n._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),a=c.join("+")}return t.coerce(e,i,o,"hoverinfo",a)},t.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var i,n,r=t.marker.opacity;if(void 0!==r)u(r)||t.selected||t.unselected||(i=r,n=o*r),e("selected.marker.opacity",i),e("unselected.marker.opacity",n)}},t.validate=B}(Dg);var mu={},xu={exports:{}},vu={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},typesetMath:{valType:"boolean",dflt:!0,description:["Determines whether math should be typeset or not,","when MathJax (either v2 or v3) is present on the page."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},editSelection:{valType:"boolean",dflt:!0,description:"Enables moving selections."},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo, mapbox and map subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo, mapbox and map) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},Cu={};!function t(e,i){for(var n in e){var r=e[n];r.valType?i[n]=r.dflt:(i[n]||(i[n]={}),t(r,i[n]))}}(vu,Cu);var Au={configAttributes:vu,dfltConfig:Cu},Lu=Js,Gu=$c,Ru=[],Su=function(t,e){if(-1===Ru.indexOf(t)){Ru.push(t);var i=1e3;Gu(e)?i=e:"long"===e&&(i=3e3);var n=Lu.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0),n.selectAll(".notifier-note").data(Ru).enter().append("div").classed("notifier-note",!0).style("opacity",0).each((function(t){var n=Lu.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",(function(){n.transition().call(r)}));for(var a=n.append("p"),s=t.split(/<br\s*\/?>/g),o=0;o<s.length;o++)o&&a.append("br"),a.append("span").text(s[o]);"stick"===e?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(i).call(r)}))}function r(t){t.duration(700).style("opacity",0).each("end",(function(t){var e=Ru.indexOf(t);-1!==e&&Ru.splice(e,1),Lu.select(this).remove()}))}},wu=Au.dfltConfig,Vu=Su,Eu=xu.exports={};Eu.log=function(){var t;if(wu.logging>1){var e=["LOG:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(wu.notifyOnLogging>1){var i=[];for(t=0;t<arguments.length;t++)i.push(arguments[t]);Vu(i.join("<br>"),"long")}},Eu.warn=function(){var t;if(wu.logging>0){var e=["WARN:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(wu.notifyOnLogging>0){var i=[];for(t=0;t<arguments.length;t++)i.push(arguments[t]);Vu(i.join("<br>"),"stick")}},Eu.error=function(){var t;if(wu.logging>0){var e=["ERROR:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(wu.notifyOnLogging>0){var i=[];for(t=0;t<arguments.length;t++)i.push(arguments[t]);Vu(i.join("<br>"),"stick")}};var Zu=xu.exports,Nu={},Du=function(){},Xu=function(t,e){if(e instanceof RegExp){for(var i=e.toString(),n=0;n<t.length;n++)if(t[n]instanceof RegExp&&t[n].toString()===i)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t},Hu={};var Wu=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};var ku=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};var Mu=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Tu=function(t,e){if(t===e){var i=e[1],n=e[2],r=e[3],a=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=r,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t};var Yu=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],g=e[8],u=e[9],d=e[10],h=e[11],B=e[12],p=e[13],F=e[14],f=e[15],Q=i*o-n*s,I=i*l-r*s,U=i*c-a*s,b=n*l-r*o,y=n*c-a*o,m=r*c-a*l,x=g*p-u*B,v=g*F-d*B,C=g*f-h*B,A=u*F-d*p,L=u*f-h*p,G=d*f-h*F,R=Q*G-I*L+U*A+b*C-y*v+m*x;if(!R)return null;return R=1/R,t[0]=(o*G-l*L+c*A)*R,t[1]=(r*L-n*G-a*A)*R,t[2]=(p*m-F*y+f*b)*R,t[3]=(d*y-u*m-h*b)*R,t[4]=(l*C-s*G-c*v)*R,t[5]=(i*G-r*C+a*v)*R,t[6]=(F*U-B*m-f*I)*R,t[7]=(g*m-d*U+h*I)*R,t[8]=(s*L-o*C+c*x)*R,t[9]=(n*C-i*L-a*x)*R,t[10]=(B*y-p*U+f*Q)*R,t[11]=(u*U-g*y-h*Q)*R,t[12]=(o*v-s*A-l*x)*R,t[13]=(i*A-n*v+r*x)*R,t[14]=(p*I-B*b-F*Q)*R,t[15]=(g*b-u*I+d*Q)*R,t};var Ju=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],g=e[8],u=e[9],d=e[10],h=e[11],B=e[12],p=e[13],F=e[14],f=e[15];return t[0]=o*(d*f-h*F)-u*(l*f-c*F)+p*(l*h-c*d),t[1]=-(n*(d*f-h*F)-u*(r*f-a*F)+p*(r*h-a*d)),t[2]=n*(l*f-c*F)-o*(r*f-a*F)+p*(r*c-a*l),t[3]=-(n*(l*h-c*d)-o*(r*h-a*d)+u*(r*c-a*l)),t[4]=-(s*(d*f-h*F)-g*(l*f-c*F)+B*(l*h-c*d)),t[5]=i*(d*f-h*F)-g*(r*f-a*F)+B*(r*h-a*d),t[6]=-(i*(l*f-c*F)-s*(r*f-a*F)+B*(r*c-a*l)),t[7]=i*(l*h-c*d)-s*(r*h-a*d)+g*(r*c-a*l),t[8]=s*(u*f-h*p)-g*(o*f-c*p)+B*(o*h-c*u),t[9]=-(i*(u*f-h*p)-g*(n*f-a*p)+B*(n*h-a*u)),t[10]=i*(o*f-c*p)-s*(n*f-a*p)+B*(n*c-a*o),t[11]=-(i*(o*h-c*u)-s*(n*h-a*u)+g*(n*c-a*o)),t[12]=-(s*(u*F-d*p)-g*(o*F-l*p)+B*(o*d-l*u)),t[13]=i*(u*F-d*p)-g*(n*F-r*p)+B*(n*d-r*u),t[14]=-(i*(o*F-l*p)-s*(n*F-r*p)+B*(n*l-r*o)),t[15]=i*(o*d-l*u)-s*(n*d-r*u)+g*(n*l-r*o),t};var _u=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],g=t[9],u=t[10],d=t[11],h=t[12],B=t[13],p=t[14],F=t[15];return(e*s-i*a)*(u*F-d*p)-(e*o-n*a)*(g*F-d*B)+(e*l-r*a)*(g*p-u*B)+(i*o-n*s)*(c*F-d*h)-(i*l-r*s)*(c*p-u*h)+(n*l-r*o)*(c*B-g*h)};var zu=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],c=e[6],g=e[7],u=e[8],d=e[9],h=e[10],B=e[11],p=e[12],F=e[13],f=e[14],Q=e[15],I=i[0],U=i[1],b=i[2],y=i[3];return t[0]=I*n+U*o+b*u+y*p,t[1]=I*r+U*l+b*d+y*F,t[2]=I*a+U*c+b*h+y*f,t[3]=I*s+U*g+b*B+y*Q,I=i[4],U=i[5],b=i[6],y=i[7],t[4]=I*n+U*o+b*u+y*p,t[5]=I*r+U*l+b*d+y*F,t[6]=I*a+U*c+b*h+y*f,t[7]=I*s+U*g+b*B+y*Q,I=i[8],U=i[9],b=i[10],y=i[11],t[8]=I*n+U*o+b*u+y*p,t[9]=I*r+U*l+b*d+y*F,t[10]=I*a+U*c+b*h+y*f,t[11]=I*s+U*g+b*B+y*Q,I=i[12],U=i[13],b=i[14],y=i[15],t[12]=I*n+U*o+b*u+y*p,t[13]=I*r+U*l+b*d+y*F,t[14]=I*a+U*c+b*h+y*f,t[15]=I*s+U*g+b*B+y*Q,t};var Ou=function(t,e,i){var n,r,a,s,o,l,c,g,u,d,h,B,p=i[0],F=i[1],f=i[2];e===t?(t[12]=e[0]*p+e[4]*F+e[8]*f+e[12],t[13]=e[1]*p+e[5]*F+e[9]*f+e[13],t[14]=e[2]*p+e[6]*F+e[10]*f+e[14],t[15]=e[3]*p+e[7]*F+e[11]*f+e[15]):(n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],c=e[6],g=e[7],u=e[8],d=e[9],h=e[10],B=e[11],t[0]=n,t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=l,t[6]=c,t[7]=g,t[8]=u,t[9]=d,t[10]=h,t[11]=B,t[12]=n*p+o*F+u*f+e[12],t[13]=r*p+l*F+d*f+e[13],t[14]=a*p+c*F+h*f+e[14],t[15]=s*p+g*F+B*f+e[15]);return t};var Ku=function(t,e,i){var n=i[0],r=i[1],a=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};var Pu=function(t,e,i,n){var r,a,s,o,l,c,g,u,d,h,B,p,F,f,Q,I,U,b,y,m,x,v,C,A,L=n[0],G=n[1],R=n[2],S=Math.sqrt(L*L+G*G+R*R);if(Math.abs(S)<1e-6)return null;L*=S=1/S,G*=S,R*=S,r=Math.sin(i),a=Math.cos(i),s=1-a,o=e[0],l=e[1],c=e[2],g=e[3],u=e[4],d=e[5],h=e[6],B=e[7],p=e[8],F=e[9],f=e[10],Q=e[11],I=L*L*s+a,U=G*L*s+R*r,b=R*L*s-G*r,y=L*G*s-R*r,m=G*G*s+a,x=R*G*s+L*r,v=L*R*s+G*r,C=G*R*s-L*r,A=R*R*s+a,t[0]=o*I+u*U+p*b,t[1]=l*I+d*U+F*b,t[2]=c*I+h*U+f*b,t[3]=g*I+B*U+Q*b,t[4]=o*y+u*m+p*x,t[5]=l*y+d*m+F*x,t[6]=c*y+h*m+f*x,t[7]=g*y+B*m+Q*x,t[8]=o*v+u*C+p*A,t[9]=l*v+d*C+F*A,t[10]=c*v+h*C+f*A,t[11]=g*v+B*C+Q*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t};var ju=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],g=e[9],u=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*r+c*n,t[5]=s*r+g*n,t[6]=o*r+u*n,t[7]=l*r+d*n,t[8]=c*r-a*n,t[9]=g*r-s*n,t[10]=u*r-o*n,t[11]=d*r-l*n,t};var qu=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],c=e[8],g=e[9],u=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*r-c*n,t[1]=s*r-g*n,t[2]=o*r-u*n,t[3]=l*r-d*n,t[8]=a*n+c*r,t[9]=s*n+g*r,t[10]=o*n+u*r,t[11]=l*n+d*r,t};var $u=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],c=e[4],g=e[5],u=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*r+c*n,t[1]=s*r+g*n,t[2]=o*r+u*n,t[3]=l*r+d*n,t[4]=c*r-a*n,t[5]=g*r-s*n,t[6]=u*r-o*n,t[7]=d*r-l*n,t};var td=function(t,e,i){var n,r,a,s=i[0],o=i[1],l=i[2],c=Math.sqrt(s*s+o*o+l*l);if(Math.abs(c)<1e-6)return null;return s*=c=1/c,o*=c,l*=c,n=Math.sin(e),r=Math.cos(e),a=1-r,t[0]=s*s*a+r,t[1]=o*s*a+l*n,t[2]=l*s*a-o*n,t[3]=0,t[4]=s*o*a-l*n,t[5]=o*o*a+r,t[6]=l*o*a+s*n,t[7]=0,t[8]=s*l*a+o*n,t[9]=o*l*a-s*n,t[10]=l*l*a+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var ed=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=n+n,l=r+r,c=a+a,g=n*o,u=n*l,d=n*c,h=r*l,B=r*c,p=a*c,F=s*o,f=s*l,Q=s*c;return t[0]=1-(h+p),t[1]=u+Q,t[2]=d-f,t[3]=0,t[4]=u-Q,t[5]=1-(g+p),t[6]=B+F,t[7]=0,t[8]=d+f,t[9]=B-F,t[10]=1-(g+h),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t};var id=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var nd=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t};var rd=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var ad=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var sd=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var od=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i+i,o=n+n,l=r+r,c=i*s,g=n*s,u=n*o,d=r*s,h=r*o,B=r*l,p=a*s,F=a*o,f=a*l;return t[0]=1-u-B,t[1]=g+f,t[2]=d-F,t[3]=0,t[4]=g-f,t[5]=1-c-B,t[6]=h+p,t[7]=0,t[8]=d+F,t[9]=h-p,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var ld=function(t,e,i,n,r,a,s){var o=1/(i-e),l=1/(r-n),c=1/(a-s);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(r+n)*l,t[10]=(s+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*a*2*c,t[15]=0,t};var cd=function(t,e,i,n,r){var a=1/Math.tan(e/2),s=1/(n-r);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*s,t[15]=0,t};var gd=function(t,e,i,n,r,a,s){var o=1/(e-i),l=1/(n-r),c=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*o,t[13]=(r+n)*l,t[14]=(s+a)*c,t[15]=1,t};var ud=Mu,dd=function(t,e,i,n){var r,a,s,o,l,c,g,u,d,h,B=e[0],p=e[1],F=e[2],f=n[0],Q=n[1],I=n[2],U=i[0],b=i[1],y=i[2];if(Math.abs(B-U)<1e-6&&Math.abs(p-b)<1e-6&&Math.abs(F-y)<1e-6)return ud(t);g=B-U,u=p-b,d=F-y,h=1/Math.sqrt(g*g+u*u+d*d),r=Q*(d*=h)-I*(u*=h),a=I*(g*=h)-f*d,s=f*u-Q*g,(h=Math.sqrt(r*r+a*a+s*s))?(r*=h=1/h,a*=h,s*=h):(r=0,a=0,s=0);o=u*s-d*a,l=d*r-g*s,c=g*a-u*r,(h=Math.sqrt(o*o+l*l+c*c))?(o*=h=1/h,l*=h,c*=h):(o=0,l=0,c=0);return t[0]=r,t[1]=o,t[2]=g,t[3]=0,t[4]=a,t[5]=l,t[6]=u,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(r*B+a*p+s*F),t[13]=-(o*B+l*p+c*F),t[14]=-(g*B+u*p+d*F),t[15]=1,t};var hd=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"};var Bd={create:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:Wu,copy:ku,identity:Mu,transpose:Tu,invert:Yu,adjoint:Ju,determinant:_u,multiply:zu,translate:Ou,scale:Ku,rotate:Pu,rotateX:ju,rotateY:qu,rotateZ:$u,fromRotation:td,fromRotationTranslation:ed,fromScaling:id,fromTranslation:nd,fromXRotation:rd,fromYRotation:ad,fromZRotation:sd,fromQuat:od,frustum:ld,perspective:cd,perspectiveFromFieldOfView:function(t,e,i,n){var r=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+o),c=2/(r+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(s-o)*l*.5,t[9]=(r-a)*c*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t},ortho:gd,lookAt:dd,str:hd};!function(t){var e=Bd;t.init2dArray=function(t,e){for(var i=new Array(t),n=0;n<t;n++)i[n]=new Array(e);return i},t.transposeRagged=function(t){var e,i,n=0,r=t.length;for(e=0;e<r;e++)n=Math.max(n,t[e].length);var a=new Array(n);for(e=0;e<n;e++)for(a[e]=new Array(r),i=0;i<r;i++)a[e][i]=t[i][e];return a},t.dot=function(e,i){if(!e.length||!i.length||e.length!==i.length)return null;var n,r,a=e.length;if(e[0].length)for(n=new Array(a),r=0;r<a;r++)n[r]=t.dot(e[r],i);else if(i[0].length){var s=t.transposeRagged(i);for(n=new Array(s.length),r=0;r<s.length;r++)n[r]=t.dot(e,s[r])}else for(n=0,r=0;r<a;r++)n+=e[r]*i[r];return n},t.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},t.rotationMatrix=function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},t.rotationXYMatrix=function(e,i,n){return t.dot(t.dot(t.translationMatrix(i,n),t.rotationMatrix(e)),t.translationMatrix(-i,-n))},t.apply3DTransform=function(e){return function(){var i=arguments,n=1===arguments.length?i[0]:[i[0],i[1],i[2]||0];return t.dot(e,[n[0],n[1],n[2],1]).slice(0,3)}},t.apply2DTransform=function(e){return function(){var i=arguments;3===i.length&&(i=i[0]);var n=1===arguments.length?i[0]:[i[0],i[1]];return t.dot(e,[n[0],n[1],1]).slice(0,2)}},t.apply2DTransform2=function(e){var i=t.apply2DTransform(e);return function(t){return i(t.slice(0,2)).concat(i(t.slice(2,4)))}},t.convertCssMatrix=function(t){if(t){var e=t.length;if(16===e)return t;if(6===e)return[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.inverseTransformMatrix=function(t){var i=[];return e.invert(i,t),[[i[0],i[1],i[2],i[3]],[i[4],i[5],i[6],i[7]],[i[8],i[9],i[10],i[11]],[i[12],i[13],i[14],i[15]]]}}(Hu);var pd=Js,Fd=Zu,fd=Hu,Qd=Bd;function Id(t){var e=t&&t.parentNode;e&&e.removeChild(t)}function Ud(t,e,i){var n="plotly.js-style-"+t,r=document.getElementById(n);if(!r||!r.matches(".no-inline-styles")){r||((r=document.createElement("style")).setAttribute("id",n),r.appendChild(document.createTextNode("")),document.head.appendChild(r));var a=r.sheet;a?a.insertRule?a.insertRule(e+"{"+i+"}",0):a.addRule?a.addRule(e,i,0):Fd.warn("addStyleRule failed"):Fd.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function bd(t){var e=window.getComputedStyle(t,null),i=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map((function(t){return+t}))}function yd(t){for(var e=[];md(t);)e.push(t),t=t.parentNode,"function"==typeof ShadowRoot&&t instanceof ShadowRoot&&(t=t.host);return e}function md(t){return t&&(t instanceof Element||t instanceof HTMLElement)}var xd={getGraphDiv:function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null==t)throw new Error("DOM element provided is null or undefined");return t},isPlotDiv:function(t){var e=pd.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:Id,addStyleRule:function(t,e){Ud("global",t,e)},addRelatedStyleRule:Ud,deleteRelatedStyleRule:function(t){var e="plotly.js-style-"+t,i=document.getElementById(e);i&&Id(i)},setStyleOnHover:function(t,e,i,n,r,a){var s=n.split(":"),o=r.split(":"),l="data-btn-style-event-added";a||(a=document),a.querySelectorAll(t).forEach((function(t){t.getAttribute(l)||(t.addEventListener("mouseenter",(function(){var t=this.querySelector(i);t&&(t.style[s[0]]=s[1])})),t.addEventListener("mouseleave",(function(){var t=this.querySelector(i);t&&(e&&this.matches(e)?t.style[s[0]]=s[1]:t.style[o[0]]=o[1])})),t.setAttribute(l,!0))}))},getFullTransformMatrix:function(t){var e=yd(t),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach((function(t){var e=bd(t);if(e){var n=fd.convertCssMatrix(e);i=Qd.multiply(i,i,n)}})),i},getElementTransformMatrix:bd,getElementAndAncestors:yd,equalDomRects:function(t,e){return t&&e&&t.top===e.top&&t.left===e.left&&t.right===e.right&&t.bottom===e.bottom}},vd={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}},Cd=Mg.extendFlat,Ad=og,Ld={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},Gd={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},Rd=Ld.flags.slice().concat(["fullReplot"]),Sd=Gd.flags.slice().concat("layoutReplot"),wd={traces:Ld,layout:Gd,traceFlags:function(){return Vd(Rd)},layoutFlags:function(){return Vd(Sd)},update:function(t,e){var i=e.editType;if(i&&"none"!==i)for(var n=i.split("+"),r=0;r<n.length;r++)t[n[r]]=!0},overrideAll:Ed};function Vd(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=!1;return e}function Ed(t,e,i){var n=Cd({},t);for(var r in n){var a=n[r];Ad(a)&&(n[r]=Zd(a,e,i,r))}return"from-root"===i&&(n.editType=e),n}function Zd(t,e,i,n){if(t.valType){var r=Cd({},t);if(r.editType=e,Array.isArray(t.items)){r.items=new Array(t.items.length);for(var a=0;a<t.items.length;a++)r.items[a]=Zd(t.items[a],e)}return r}return Ed(t,e,"_"===n.charAt(0)?"nested":"from-root")}var Nd={};Nd.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")},Nd.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")};var Dd={},Xd={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"},Hd=Xd.FORMAT_LINK,Wd=Xd.DATE_FORMAT_LINK;function kd(t){return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t&&t.supportOther?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',Hd,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',Wd,"for details on the date formatting syntax."].join(" ")}function Md(t){var e=t.description?" "+t.description:"",i=t.keys||[];if(i.length>0){for(var n=[],r=0;r<i.length;r++)n[r]="`"+i[r]+"`";e+="Finally, the template string has access to ",e=1===i.length?e+"variable "+n[0]:e+"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return e}function Td(t,e){return e?e.d2l(t):t}function Yd(t,e){return e?e.l2d(t):t}function Jd(t){return t.x0shift||0}function _d(t){return t.x1shift||0}function zd(t){return t.y0shift||0}function Od(t){return t.y1shift||0}function Kd(t,e){return Td(t.x1,e)+_d(t)-Td(t.x0,e)-Jd(t)}function Pd(t,e,i){return Td(t.y1,i)+Od(t)-Td(t.y0,i)-zd(t)}Dd.hovertemplateAttrs=function(t,e){t=t||{};var i=Md(e=e||{}),n={valType:"string",dflt:"",editType:t.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",kd({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",i,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return!1!==t.arrayOk&&(n.arrayOk=!0),n},Dd.texttemplateAttrs=function(t,e){t=t||{};var i=Md(e=e||{}),n={valType:"string",dflt:"",editType:t.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",kd(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",i].join(" ")};return!1!==t.arrayOk&&(n.arrayOk=!0),n},Dd.shapeTexttemplateAttrs=function(t,e){e=e||{};var i=(t=t||{}).newshape?"new ":"",n=Md(e);return{valType:"string",dflt:"",editType:t.editType||"arraydraw",description:["Template string used for rendering the "+i+"shape's label.","Note that this will override `text`.",["Variables are inserted using %{variable},",'for example "x0: %{x0}".','Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{x0:$.2f}". See',Hd,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{x0|%m %b %Y}". See',Wd,"for details on the date formatting syntax.","A single multiplication or division operation may be applied to numeric variables, and combined with",'d3 number formatting, for example "Length in cm: %{x0*2.54}", "%{slope*60:.1f} meters per second."',"For log axes, variable values are given in log units.","For date axes, x/y coordinate variables and center variables use datetimes, while all other variable values use values in ms."].join(" "),n].join(" ")}};var jd={x0:function(t){return t.x0},x1:function(t){return t.x1},y0:function(t){return t.y0},y1:function(t){return t.y1},slope:function(t,e,i){return"line"!==t.type?void 0:Pd(t,0,i)/Kd(t,e)},dx:Kd,dy:Pd,width:function(t,e){return Math.abs(Kd(t,e))},height:function(t,e,i){return Math.abs(Pd(t,0,i))},length:function(t,e,i){return"line"!==t.type?void 0:Math.sqrt(Math.pow(Kd(t,e),2)+Math.pow(Pd(t,0,i),2))},xcenter:function(t,e){return Yd((Td(t.x1,e)+_d(t)+Td(t.x0,e)+Jd(t))/2,e)},ycenter:function(t,e,i){return Yd((Td(t.y1,i)+Od(t)+Td(t.y0,i)+zd(t))/2,i)}},qd=wd.overrideAll,$d=ru,th=_g(),eh=Nd.dash,ih=Mg.extendFlat,nh=Dd.shapeTexttemplateAttrs,rh=jd,ah=qd({newshape:{visible:ih({},$d.visible,{description:["Determines whether or not new shape is visible.","If *legendonly*, the shape is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")}),showlegend:{valType:"boolean",dflt:!1,description:["Determines whether or not new","shape is shown in the legend."].join(" ")},legend:ih({},$d.legend,{description:["Sets the reference to a legend to show new shape in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")}),legendgroup:ih({},$d.legendgroup,{description:["Sets the legend group for new shape.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")}),legendgrouptitle:{text:ih({},$d.legendgrouptitle.text,{}),font:th({description:["Sets this legend group's title font."].join(" ")})},legendrank:ih({},$d.legendrank,{description:["Sets the legend rank for new shape.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")}),legendwidth:ih({},$d.legendwidth,{description:"Sets the width (in px or fraction) of the legend for new shape."}),line:{color:{valType:"color",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,description:"Sets the line width (in px)."},dash:ih({},eh,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",description:["Specifies whether new shapes are drawn below gridlines (*below*),","between gridlines and traces (*between*) or above traces (*above*)."].join(" ")},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},name:ih({},$d.name,{description:["Sets new shape name.","The name appears as the legend item."].join(" ")}),label:{text:{valType:"string",dflt:"",description:["Sets the text to display with the new shape.","It is also used for legend item if `name` is not provided."].join(" ")},texttemplate:nh({newshape:!0},{keys:Object.keys(rh)}),font:th({description:"Sets the new shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],description:["Sets the position of the label text relative to the new shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","new shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","new shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,description:"Sets padding (in px) between edge of label and edge of new shape."}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,description:"Sets the opacity of the active shape."}}},"none","from-root"),sh=Nd.dash,oh=Mg.extendFlat,lh={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none",description:["Describes how a new selection is created.","If `immediate`, a new selection is created after first mouse up.","If `gradual`, a new selection is not created after first mouse.","By adding to and subtracting from the initial selection,","this option allows declaring extra outlines of the selection."].join(" ")},line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:1,dflt:1,editType:"none",description:"Sets the line width (in px)."},dash:oh({},sh,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:"Sets the color filling the active selection' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active selection."},editType:"none"}},ch=function(t){var e=t.editType;return{t:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) on the left side of the component."},editType:e}},gh=_g(),uh=vd,dh=uu,hh=ah,Bh=lh,ph=ch,Fh=Mg.extendFlat,fh=gh({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});fh.family.dflt='"Open Sans", verdana, arial, sans-serif',fh.size.dflt=12,fh.color.dflt=dh.defaultLine;var Qh={font:fh,title:{text:{valType:"string",editType:"layoutstyle",description:"Sets the plot's title."},font:gh({editType:"layoutstyle",description:"Sets the title font."}),subtitle:{text:{valType:"string",editType:"layoutstyle",description:"Sets the plot's subtitle."},font:gh({editType:"layoutstyle",description:"Sets the subtitle font."}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:Fh(ph({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether the title can automatically push the figure margins.","If `yref='paper'` then the margin will expand to ensure that the title doesn’t","overlap with the edges of the container. If `yref='container'` then the margins","will ensure that the title doesn’t overlap with the plot area, tick labels,","and axis titles. If `automargin=true` and the margins need to be expanded,","then y will be set to a default 1 and yanchor will be set to an appropriate","default to ensure that minimal margin space is needed. Note that when `yref='paper'`,","only 1 or 0 are allowed y values. Invalid values will be reset to the default 1."].join(" ")},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum width of the plot with margin.automargin applied (in px)"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum height of the plot with margin.automargin applied (in px)"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:dh.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:dh.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:dh.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:hh.newshape,activeshape:hh.activeshape,newselection:Bh.newselection,activeselection:Bh.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:Fh({},uh.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"})};!function(t){var e=Zu,i=Du,n=Xu,r=og,a=xd.addStyleRule,s=Mg,o=ru,l=Qh,c=s.extendFlat,g=s.extendDeepAll;function u(i){var n=i.name,r=i.categories,s=i.meta;if(t.modules[n])e.log("Type "+n+" already registered");else{t.subplotsRegistry[i.basePlotModule.name]||function(i){var n=i.name;if(t.subplotsRegistry[n])return void e.log("Plot type "+n+" already registered.");for(var r in p(i),t.subplotsRegistry[n]=i,t.componentsRegistry)f(r,i.name)}(i.basePlotModule);for(var o={},l=0;l<r.length;l++)o[r[l]]=!0,t.allCategories[r[l]]=!0;for(var g in t.modules[n]={_module:i,categories:o},s&&Object.keys(s).length&&(t.modules[n].meta=s),t.allTypes.push(n),t.componentsRegistry)F(g,n);i.layoutAttributes&&c(t.traceLayoutAttributes,i.layoutAttributes);var u=i.basePlotModule,d=u.name;if("mapbox"===d){var h=u.constants.styleRules;for(var B in h)a(".js-plotly-plot .plotly .mapboxgl-"+B,h[B])}"map"===d&&require("maplibre-gl/dist/maplibre-gl.css"),"geo"!==d&&"mapbox"!==d&&"map"!==d||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function d(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var i=e.name;for(var r in t.componentsRegistry[i]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&n(t.layoutArrayContainers,i),p(e)),t.modules)F(i,r);for(var a in t.subplotsRegistry)f(i,a);e.schema&&e.schema.layout&&g(l,e.schema.layout)}function h(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var i="Transform module "+t.name,n="function"==typeof t.transform,a="function"==typeof t.calcTransform;if(!n&&!a)throw new Error(i+" is missing a *transform* or *calcTransform* method.");n&&a&&e.log([i+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),r(t.attributes)||e.log(i+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&e.log(i+" registered without a *supplyDefaults* method.")}function B(e){var i=e.name,n=i.split("-")[0],r=e.dictionary,a=e.format,s=r&&Object.keys(r).length,o=a&&Object.keys(a).length,l=t.localeRegistry,c=l[i];if(c||(l[i]=c={}),n!==i){var g=l[n];g||(l[n]=g={}),s&&g.dictionary===c.dictionary&&(g.dictionary=r),o&&g.format===c.format&&(g.format=a)}s&&(c.dictionary=r),o&&(c.format=a)}function p(e){if(e.layoutAttributes){var i=e.layoutAttributes._arrayAttrRegexps;if(i)for(var r=0;r<i.length;r++)n(t.layoutArrayRegexes,i[r])}}function F(e,i){var n=t.componentsRegistry[e].schema;if(n&&n.traces){var r=n.traces[i];r&&g(t.modules[i]._module.attributes,r)}}function f(e,i){var n=t.componentsRegistry[e].schema;if(n&&n.subplots){var r=t.subplotsRegistry[i],a=r.layoutAttributes,s="subplot"===r.attr?r.name:r.attr;Array.isArray(s)&&(s=s[0]);var o=n.subplots[s];a&&o&&g(a,o)}}function Q(t){return"object"==typeof t&&(t=t.type),t}t.modules={},t.allCategories={},t.allTypes=[],t.subplotsRegistry={},t.componentsRegistry={},t.layoutArrayContainers=[],t.layoutArrayRegexes=[],t.traceLayoutAttributes={},t.localeRegistry={},t.apiMethodRegistry={},t.collectableSubplotTypes=null,t.register=function(e){if(t.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var i=0;i<e.length;i++){var n=e[i];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":u(n);break;case"transform":h(n);break;case"component":d(n);break;case"locale":B(n);break;case"apiMethod":var r=n.name;t.apiMethodRegistry[r]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},t.getModule=function(e){var i=t.modules[Q(e)];return!!i&&i._module},t.traceIs=function(i,n){if("various"===(i=Q(i)))return!1;var r=t.modules[i];return r||(i&&e.log("Unrecognized trace type "+i+"."),r=t.modules[o.type.dflt]),!!r.categories[n]},t.getComponentMethod=function(e,n){var r=t.componentsRegistry[e];return r&&r[n]||i},t.call=function(){var e=arguments[0],i=[].slice.call(arguments,1);return t.apiMethodRegistry[e].apply(null,i)}}(Nu),function(t){var e,i,n=Vc.timeFormat,r=$c,a=Zu,s=Ng.mod,o=tg,l=o.BADNUM,c=o.ONEDAY,g=o.ONEHOUR,u=o.ONEMIN,d=o.ONESEC,h=o.EPOCHJD,B=Nu,p=Vc.utcFormat,F=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,Q=(new Date).getFullYear()-70;function I(t){return t&&B.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function U(t,e){return String(t+Math.pow(10,e)).substr(1)}t.dateTick0=function(e,i){var n=function(t,e){return I(t)?e?B.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:B.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"}(e,!!i);if(i<2)return n;var r=t.dateTime2ms(n,e);return r+=c*(i-1),t.ms2DateTime(r,0,e)},t.dfltRange=function(t){return I(t)?B.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},t.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},t.dateTime2ms=function(n,r){if(t.isJSDate(n)){var a=n.getTimezoneOffset()*u,o=(n.getUTCMinutes()-n.getMinutes())*u+(n.getUTCSeconds()-n.getSeconds())*d+(n.getUTCMilliseconds()-n.getMilliseconds());if(o){var p=3*u;a=a-p/2+s(o-a+p/2,p)}return(n=Number(n)-a)>=e&&n<=i?n:l}if("string"!=typeof n&&"number"!=typeof n)return l;n=String(n);var U=I(r),b=n.charAt(0);!U||"G"!==b&&"g"!==b||(n=n.substr(1),r="");var y=U&&"chinese"===r.substr(0,7),m=n.match(y?f:F);if(!m)return l;var x=m[1],v=m[3]||"1",C=Number(m[5]||1),A=Number(m[7]||0),L=Number(m[9]||0),G=Number(m[11]||0);if(U){if(2===x.length)return l;var R;x=Number(x);try{var S=B.getComponentMethod("calendars","getCal")(r);if(y){var w="i"===v.charAt(v.length-1);v=parseInt(v,10),R=S.newDate(x,S.toMonthIndex(x,v,w),C)}else R=S.newDate(x,Number(v),C)}catch(t){return l}return R?(R.toJD()-h)*c+A*g+L*u+G*d:l}x=2===x.length?(Number(x)+2e3-Q)%100+Q:Number(x),v-=1;var V=new Date(Date.UTC(2e3,v,C,A,L));return V.setUTCFullYear(x),V.getUTCMonth()!==v||V.getUTCDate()!==C?l:V.getTime()+G*d},e=t.MIN_MS=t.dateTime2ms("-9999"),i=t.MAX_MS=t.dateTime2ms("9999-12-31 23:59:59.9999"),t.isDateTime=function(e,i){return t.dateTime2ms(e,i)!==l};var b=90*c,y=3*g,m=5*u;function x(t,e,i,n,r){if((e||i||n||r)&&(t+=" "+U(e,2)+":"+U(i,2),(n||r)&&(t+=":"+U(n,2),r))){for(var a=4;r%10==0;)a-=1,r/=10;t+="."+U(r,a)}return t}t.ms2DateTime=function(t,n,r){if("number"!=typeof t||!(t>=e&&t<=i))return l;n||(n=0);var a,o,F,f,Q,U,v=Math.floor(10*s(t+.05,1)),C=Math.round(t-v/10);if(I(r)){var A=Math.floor(C/c)+h,L=Math.floor(s(t,c));try{a=B.getComponentMethod("calendars","getCal")(r).fromJD(A).formatDate("yyyy-mm-dd")}catch(t){a=p("G%Y-%m-%d")(new Date(C))}if("-"===a.charAt(0))for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=n<b?Math.floor(L/g):0,F=n<b?Math.floor(L%g/u):0,f=n<y?Math.floor(L%u/d):0,Q=n<m?L%d*10+v:0}else U=new Date(C),a=p("%Y-%m-%d")(U),o=n<b?U.getUTCHours():0,F=n<b?U.getUTCMinutes():0,f=n<y?U.getUTCSeconds():0,Q=n<m?10*U.getUTCMilliseconds()+v:0;return x(a,o,F,f,Q)},t.ms2DateTimeLocal=function(t){if(!(t>=e+c&&t<=i-c))return l;var r=Math.floor(10*s(t+.05,1)),a=new Date(Math.round(t-r/10));return x(n("%Y-%m-%d")(a),a.getHours(),a.getMinutes(),a.getSeconds(),10*a.getUTCMilliseconds()+r)},t.cleanDate=function(e,i,n){if(e===l)return i;if(t.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(I(n))return a.error("JS Dates and milliseconds are incompatible with world calendars",e),i;if(!(e=t.ms2DateTimeLocal(+e))&&void 0!==i)return i}else if(!t.isDateTime(e,n))return a.error("unrecognized date",e),i;return e};var v=/%\d?f/g,C=/%h/g,A={1:"1",2:"1",3:"2",4:"2"};function L(t,e,i,n){t=t.replace(v,(function(t){var i=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(i).substr(2).replace(/0+$/,"")||"0"}));var r=new Date(Math.floor(e+.05));if(t=t.replace(C,(function(){return A[i("%q")(r)]})),I(n))try{t=B.getComponentMethod("calendars","worldCalFmt")(t,e,n)}catch(t){return"Invalid"}return i(t)(r)}var G=[59,59.9,59.99,59.999,59.9999];t.formatDate=function(t,e,i,n,a,o){if(a=I(a)&&a,!e)if("y"===i)e=o.year;else if("m"===i)e=o.month;else{if("d"!==i)return function(t,e){var i=s(t+.05,c),n=U(Math.floor(i/g),2)+":"+U(s(Math.floor(i/u),60),2);if("M"!==e){r(e)||(e=0);var a=(100+Math.min(s(t/d,60),G[e])).toFixed(e).substr(1);e>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),n+=":"+a}return n}(t,i)+"\n"+L(o.dayMonthYear,t,n,a);e=o.dayMonth+"\n"+o.year}return L(e,t,n,a)};var R=3*c;t.incrementMonth=function(t,e,i){i=I(i)&&i;var n=s(t,c);if(t=Math.round(t-n),i)try{var r=Math.round(t/c)+h,o=B.getComponentMethod("calendars","getCal")(i),l=o.fromJD(r);return e%12?o.add(l,e,"m"):o.add(l,e/12,"y"),(l.toJD()-h)*c+n}catch(e){a.error("invalid ms "+t+" in calendar "+i)}var g=new Date(t+R);return g.setUTCMonth(g.getUTCMonth()+e)+n-R},t.findExactDates=function(t,e){for(var i,n,a=0,s=0,o=0,l=0,g=I(e)&&B.getComponentMethod("calendars","getCal")(e),u=0;u<t.length;u++)if(n=t[u],r(n)){if(!(n%c))if(g)try{1===(i=g.fromJD(n/c+h)).day()?1===i.month()?a++:s++:o++}catch(t){}else 1===(i=new Date(n)).getUTCDate()?0===i.getUTCMonth()?a++:s++:o++}else l++;o+=s+=a;var d=t.length-l;return{exactYears:a/d,exactMonths:s/d,exactDays:o/d}}}(mu);var Ih,Uh,bh={};function yh(){return Uh||(Uh=1,Ih=function(t){return t}),Ih}!function(t){var e=$c,i=Zu,n=yh(),r=tg.BADNUM,a=1e-9;function s(t,e){return t<e}function o(t,e){return t<=e}function l(t,e){return t>e}function c(t,e){return t>=e}t.findBin=function(t,n,r){if(e(n.start))return r?Math.ceil((t-n.start)/n.size-a)-1:Math.floor((t-n.start)/n.size+a);var g,u,d=0,h=n.length,B=0,p=h>1?(n[h-1]-n[0])/(h-1):1;for(u=p>=0?r?s:o:r?c:l,t+=p*a*(r?-1:1)*(p>=0?1:-1);d<h&&B++<100;)u(n[g=Math.floor((d+h)/2)],t)?d=g+1:h=g;return B>90&&i.log("Long binary search..."),d-1},t.sorterAsc=function(t,e){return t-e},t.sorterDes=function(t,e){return e-t},t.distinctVals=function(e){var i,n=e.slice();for(n.sort(t.sorterAsc),i=n.length-1;i>-1&&n[i]===r;i--);for(var a,s=n[i]-n[0]||1,o=s/(i||1)/1e4,l=[],c=0;c<=i;c++){var g=n[c],u=g-a;void 0===a?(l.push(g),a=g):u>o&&(s=Math.min(s,u),l.push(g),a=g)}return{vals:l,minDiff:s}},t.roundUp=function(t,e,i){for(var n,r=0,a=e.length-1,s=0,o=i?0:1,l=i?1:0,c=i?Math.ceil:Math.floor;r<a&&s++<100;)e[n=c((r+a)/2)]<=t?r=n+o:a=n-l;return e[r]},t.sort=function(t,e){for(var i=0,n=0,r=1;r<t.length;r++){var a=e(t[r],t[r-1]);if(a<0?i=1:a>0&&(n=1),i&&n)return t.sort(e)}return n?t:t.reverse()},t.findIndexOfMin=function(t,e){e=e||n;for(var i,r=1/0,a=0;a<t.length;a++){var s=e(t[a]);s<r&&(r=s,i=a)}return i}}(bh);var mh=function(t){return Object.keys(t).sort()},xh={};!function(t){var e=$c,i=eg.isArrayOrTypedArray;t.aggNums=function(n,r,a,s){var o,l;if((!s||s>a.length)&&(s=a.length),e(r)||(r=!1),i(a[0])){for(l=new Array(s),o=0;o<s;o++)l[o]=t.aggNums(n,r,a[o]);a=l}for(o=0;o<s;o++)e(r)?e(a[o])&&(r=n(+r,+a[o])):r=a[o];return r},t.len=function(e){return t.aggNums((function(t){return t+1}),0,e)},t.mean=function(e,i){return i||(i=t.len(e)),t.aggNums((function(t,e){return t+e}),0,e)/i},t.geometricMean=function(e,i){return i||(i=t.len(e)),Math.pow(t.aggNums((function(t,e){return t*e}),1,e),1/i)},t.midRange=function(e){if(void 0!==e&&0!==e.length)return(t.aggNums(Math.max,null,e)+t.aggNums(Math.min,null,e))/2},t.variance=function(i,n,r){return n||(n=t.len(i)),e(r)||(r=t.mean(i,n)),t.aggNums((function(t,e){return t+Math.pow(e-r,2)}),0,i)/n},t.stdev=function(e,i,n){return Math.sqrt(t.variance(e,i,n))},t.median=function(e){var i=e.slice().sort();return t.interp(i,.5)},t.interp=function(t,i){if(!e(i))throw"n should be a finite number";if((i=i*t.length-.5)<0)return t[0];if(i>t.length-1)return t[t.length-1];var n=i%1;return n*t[Math.ceil(i)]+(1-n)*t[Math.floor(i)]}}(xh);var vh=Ng.mod,Ch=Ng.modHalf,Ah=Math.PI,Lh=2*Ah;function Gh(t){return Math.abs(t[1]-t[0])>Lh-1e-14}function Rh(t,e){return Ch(e-t,Lh)}function Sh(t,e){if(Gh(e))return!0;var i,n;e[0]<e[1]?(i=e[0],n=e[1]):(i=e[1],n=e[0]),(i=vh(i,Lh))>(n=vh(n,Lh))&&(n+=Lh);var r=vh(t,Lh),a=r+Lh;return r>=i&&r<=n||a>=i&&a<=n}function wh(t,e,i,n,r,a,s){r=r||0,a=a||0;var o,l,c,g,u,d=Gh([i,n]);function h(t,e){return[t*Math.cos(e)+r,a-t*Math.sin(e)]}d?(o=0,l=Ah,c=Lh):i<n?(o=i,c=n):(o=n,c=i),t<e?(g=t,u=e):(g=e,u=t);var B,p=Math.abs(c-o)<=Ah?0:1;function F(t,e,i){return"A"+[t,t]+" "+[0,p,i]+" "+h(t,e)}return d?B=null===g?"M"+h(u,o)+F(u,l,0)+F(u,c,0)+"Z":"M"+h(g,o)+F(g,l,0)+F(g,c,0)+"ZM"+h(u,o)+F(u,l,1)+F(u,c,1)+"Z":null===g?(B="M"+h(u,o)+F(u,c,0),s&&(B+="L0,0Z")):B="M"+h(g,o)+"L"+h(u,o)+F(u,c,0)+"L"+h(g,c)+F(g,o,1)+"Z",B}var Vh,Eh,Zh,Nh={deg2rad:function(t){return t/180*Ah},rad2deg:function(t){return t/Ah*180},angleDelta:Rh,angleDist:function(t,e){return Math.abs(Rh(t,e))},isFullCircle:Gh,isAngleInsideSector:Sh,isPtInsideSector:function(t,e,i,n){return!!Sh(e,n)&&(i[0]<i[1]?(r=i[0],a=i[1]):(r=i[1],a=i[0]),t>=r&&t<=a);var r,a},pathArc:function(t,e,i,n,r){return wh(null,t,e,i,n,r,0)},pathSector:function(t,e,i,n,r){return wh(null,t,e,i,n,r,1)},pathAnnulus:function(t,e,i,n,r,a){return wh(t,e,i,n,r,a,1)}},Dh={isLeftAnchor:function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=1/3},isCenterAnchor:function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},isRightAnchor:function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},isTopAnchor:function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=2/3},isMiddleAnchor:function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3},isBottomAnchor:function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3}},Xh={},Hh=Ng.mod;function Wh(t,e,i,n,r,a,s,o){var l=i-t,c=r-t,g=s-r,u=n-e,d=a-e,h=o-a,B=l*h-g*u;if(0===B)return null;var p=(c*h-g*d)/B,F=(c*u-l*d)/B;return F<0||F>1||p<0||p>1?null:{x:t+l*p,y:e+u*p}}function kh(t,e,i,n,r){var a=n*t+r*e;if(a<0)return n*n+r*r;if(a>i){var s=n-t,o=r-e;return s*s+o*o}var l=n*e-r*t;return l*l/i}Xh.segmentsIntersect=Wh,Xh.segmentDistance=function(t,e,i,n,r,a,s,o){if(Wh(t,e,i,n,r,a,s,o))return 0;var l=i-t,c=n-e,g=s-r,u=o-a,d=l*l+c*c,h=g*g+u*u,B=Math.min(kh(l,c,d,r-t,a-e),kh(l,c,d,s-t,o-e),kh(g,u,h,t-r,e-a),kh(g,u,h,i-r,n-a));return Math.sqrt(B)},Xh.getTextLocation=function(t,e,i,n){if(t===Eh&&n===Zh||(Vh={},Eh=t,Zh=n),Vh[i])return Vh[i];var r=t.getPointAtLength(Hh(i-n/2,e)),a=t.getPointAtLength(Hh(i+n/2,e)),s=Math.atan((a.y-r.y)/(a.x-r.x)),o=t.getPointAtLength(Hh(i,e)),l={x:(4*o.x+r.x+a.x)/6,y:(4*o.y+r.y+a.y)/6,theta:s};return Vh[i]=l,l},Xh.clearLocationCache=function(){Eh=null},Xh.getVisibleSegment=function(t,e,i){var n,r,a=e.left,s=e.right,o=e.top,l=e.bottom,c=0,g=t.getTotalLength(),u=g;function d(e){var i=t.getPointAtLength(e);0===e?n=i:e===g&&(r=i);var c=i.x<a?a-i.x:i.x>s?i.x-s:0,u=i.y<o?o-i.y:i.y>l?i.y-l:0;return Math.sqrt(c*c+u*u)}for(var h=d(c);h;){if((c+=h+i)>u)return;h=d(c)}for(h=d(u);h;){if(c>(u-=h+i))return;h=d(u)}return{min:c,max:u,len:u-c,total:g,isClosed:0===c&&u===g&&Math.abs(n.x-r.x)<.1&&Math.abs(n.y-r.y)<.1}},Xh.findPointOnPath=function(t,e,i,n){for(var r,a,s,o=(n=n||{}).pathLength||t.getTotalLength(),l=n.tolerance||.001,c=n.iterationLimit||30,g=t.getPointAtLength(0)[i]>t.getPointAtLength(o)[i]?-1:1,u=0,d=0,h=o;u<c;){if(r=(d+h)/2,s=(a=t.getPointAtLength(r))[i]-e,Math.abs(s)<l)return a;g*s>0?h=r:d=r,u++}return a};var Mh={};!function(t){var e={};function i(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}t.throttle=function(t,n,r){var a=e[t],s=Date.now();if(!a){for(var o in e)e[o].ts<s-6e4&&delete e[o];a=e[t]={ts:0,timer:null}}function l(){r(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}i(a),s>a.ts+n?l():a.timer=setTimeout((function(){l(),a.timer=null}),n)},t.done=function(t){var i=e[t];return i&&i.timer?new Promise((function(t){var e=i.onDone;i.onDone=function(){e&&e(),t(),i.onDone=null}})):Promise.resolve()},t.clear=function(n){if(n)i(e[n]),delete e[n];else for(var r in e)t.clear(r)}}(Mh);var Th={exports:{}};Th.exports=zh,Th.exports.isMobile=zh,Th.exports.default=zh;const Yh=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,Jh=/CrOS/,_h=/android|ipad|playbook|silk/i;function zh(t){t||(t={});let e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;let i=Yh.test(e)&&!Jh.test(e)||!!t.tablet&&_h.test(e);return!i&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(i=!0),i}var Oh=Th.exports,Kh=$c,Ph=Oh;var jh=Js,qh=Nu;function $h(t){return!0===t.visible}function tB(t){var e=t[0].trace;return!0===e.visible&&0!==e._length}var eB=$c,iB=tg.BADNUM,nB=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,rB=Js,aB=Vc.utcFormat,sB=jc.format,oB=$c,lB=tg,cB=lB.FP_SAFE,gB=-cB,uB=lB.BADNUM,dB=Ts.exports={};dB.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:"0.f"===t?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var hB={};dB.warnBadFormat=function(t){var e=String(t);hB[e]||(hB[e]=1,dB.warn('encountered bad format: "'+e+'"'))},dB.noFormat=function(t){return String(t)},dB.numberFormat=function(t){var e;try{e=sB(dB.adjustFormat(t))}catch(e){return dB.warnBadFormat(t),dB.noFormat}return e},dB.nestedProperty=Ug,dB.keyedContainer=function(t,e,i,n){var r,a,s;i=i||"name",n=n||"value";var o={};e&&e.length?(s=Lg(t,e),a=s.get()):a=t,e=e||"";var l={};if(a)for(r=0;r<a.length;r++)l[a[r][i]]=r;var c=Gg.test(n),g={set:function(t,e){var r=null===e?4:0;if(!a){if(!s||4===r)return;a=[],s.set(a)}var u=l[t];if(void 0===u){if(4===r)return;r|=3,u=a.length,l[t]=u}else e!==(c?a[u][n]:Lg(a[u],n).get())&&(r|=2);var d=a[u]=a[u]||{};return d[i]=t,c?d[n]=e:Lg(d,n).set(e),null!==e&&(r&=-5),o[u]=o[u]|r,g},get:function(t){if(a){var e=l[t];return void 0===e?void 0:c?a[e][n]:Lg(a[e],n).get()}},rename:function(t,e){var n=l[t];return void 0===n||(o[n]=1|o[n],l[e]=n,delete l[t],a[n][i]=e),g},remove:function(t){var e=l[t];if(void 0===e)return g;var s=a[e];if(Object.keys(s).length>2)return o[e]=2|o[e],g.set(t,null);if(c){for(r=e;r<a.length;r++)o[r]=3|o[r];for(r=e;r<a.length;r++)l[a[r][i]]--;a.splice(e,1),delete l[t]}else Lg(s,n).set(null),o[e]=6|o[e];return g},constructUpdate:function(){for(var t,r,s={},l=Object.keys(o),g=0;g<l.length;g++)r=l[g],t=e+"["+r+"]",a[r]?(1&o[r]&&(s[t+"."+i]=a[r][i]),2&o[r]&&(s[t+"."+n]=c?4&o[r]?null:a[r][n]:4&o[r]?null:Lg(a[r],n).get())):s[t]=null;return s}};return g},dB.relativeAttr=function(t,e){for(;e;){var i=t.match(Rg);if(i)t=i[1];else{if(!t.match(Sg))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e},dB.isPlainObject=og,dB.toLogRange=Vg,dB.relinkPrivateKeys=function t(e,i){for(var n in i){var r=i[n],a=e[n];if(a!==r)if("_"===n.charAt(0)||"function"==typeof r){if(n in e)continue;e[n]=r}else if(Eg(r)&&Eg(a)&&Zg(r[0])){if("customdata"===n||"ids"===n)continue;for(var s=Math.min(r.length,a.length),o=0;o<s;o++)a[o]!==r[o]&&Zg(r[o])&&Zg(a[o])&&t(a[o],r[o])}else Zg(r)&&Zg(a)&&(t(a,r),Object.keys(a).length||delete e[n])}};var BB=eg;dB.isArrayBuffer=BB.isArrayBuffer,dB.isTypedArray=BB.isTypedArray,dB.isArrayOrTypedArray=BB.isArrayOrTypedArray,dB.isArray1D=BB.isArray1D,dB.ensureArray=BB.ensureArray,dB.concat=BB.concat,dB.maxRowLength=BB.maxRowLength,dB.minRowLength=BB.minRowLength;var pB=Ng;dB.mod=pB.mod,dB.modHalf=pB.modHalf;var FB=Dg;dB.valObjectMeta=FB.valObjectMeta,dB.coerce=FB.coerce,dB.coerce2=FB.coerce2,dB.coerceFont=FB.coerceFont,dB.coercePattern=FB.coercePattern,dB.coerceHoverinfo=FB.coerceHoverinfo,dB.coerceSelectionMarkerOpacity=FB.coerceSelectionMarkerOpacity,dB.validate=FB.validate;var fB=mu;dB.dateTime2ms=fB.dateTime2ms,dB.isDateTime=fB.isDateTime,dB.ms2DateTime=fB.ms2DateTime,dB.ms2DateTimeLocal=fB.ms2DateTimeLocal,dB.cleanDate=fB.cleanDate,dB.isJSDate=fB.isJSDate,dB.formatDate=fB.formatDate,dB.incrementMonth=fB.incrementMonth,dB.dateTick0=fB.dateTick0,dB.dfltRange=fB.dfltRange,dB.findExactDates=fB.findExactDates,dB.MIN_MS=fB.MIN_MS,dB.MAX_MS=fB.MAX_MS;var QB=bh;dB.findBin=QB.findBin,dB.sorterAsc=QB.sorterAsc,dB.sorterDes=QB.sorterDes,dB.distinctVals=QB.distinctVals,dB.roundUp=QB.roundUp,dB.sort=QB.sort,dB.findIndexOfMin=QB.findIndexOfMin,dB.sortObjectKeys=mh;var IB=xh;dB.aggNums=IB.aggNums,dB.len=IB.len,dB.mean=IB.mean,dB.geometricMean=IB.geometricMean,dB.median=IB.median,dB.midRange=IB.midRange,dB.variance=IB.variance,dB.stdev=IB.stdev,dB.interp=IB.interp;var UB=Hu;dB.init2dArray=UB.init2dArray,dB.transposeRagged=UB.transposeRagged,dB.dot=UB.dot,dB.translationMatrix=UB.translationMatrix,dB.rotationMatrix=UB.rotationMatrix,dB.rotationXYMatrix=UB.rotationXYMatrix,dB.apply3DTransform=UB.apply3DTransform,dB.apply2DTransform=UB.apply2DTransform,dB.apply2DTransform2=UB.apply2DTransform2,dB.convertCssMatrix=UB.convertCssMatrix,dB.inverseTransformMatrix=UB.inverseTransformMatrix;var bB=Nh;dB.deg2rad=bB.deg2rad,dB.rad2deg=bB.rad2deg,dB.angleDelta=bB.angleDelta,dB.angleDist=bB.angleDist,dB.isFullCircle=bB.isFullCircle,dB.isAngleInsideSector=bB.isAngleInsideSector,dB.isPtInsideSector=bB.isPtInsideSector,dB.pathArc=bB.pathArc,dB.pathSector=bB.pathSector,dB.pathAnnulus=bB.pathAnnulus;var yB=Dh;dB.isLeftAnchor=yB.isLeftAnchor,dB.isCenterAnchor=yB.isCenterAnchor,dB.isRightAnchor=yB.isRightAnchor,dB.isTopAnchor=yB.isTopAnchor,dB.isMiddleAnchor=yB.isMiddleAnchor,dB.isBottomAnchor=yB.isBottomAnchor;var mB=Xh;dB.segmentsIntersect=mB.segmentsIntersect,dB.segmentDistance=mB.segmentDistance,dB.getTextLocation=mB.getTextLocation,dB.clearLocationCache=mB.clearLocationCache,dB.getVisibleSegment=mB.getVisibleSegment,dB.findPointOnPath=mB.findPointOnPath;var xB=Mg;dB.extendFlat=xB.extendFlat,dB.extendDeep=xB.extendDeep,dB.extendDeepAll=xB.extendDeepAll,dB.extendDeepNoArrays=xB.extendDeepNoArrays;var vB=Zu;dB.log=vB.log,dB.warn=vB.warn,dB.error=vB.error;var CB=yu;dB.counterRegex=CB.counter;var AB=Mh;dB.throttle=AB.throttle,dB.throttleDone=AB.done,dB.clearThrottle=AB.clear;var LB=xd;function GB(t){var e={};for(var i in t)for(var n=t[i],r=0;r<n.length;r++)e[n[r]]=+i;return e}dB.getGraphDiv=LB.getGraphDiv,dB.isPlotDiv=LB.isPlotDiv,dB.removeElement=LB.removeElement,dB.addStyleRule=LB.addStyleRule,dB.addRelatedStyleRule=LB.addRelatedStyleRule,dB.deleteRelatedStyleRule=LB.deleteRelatedStyleRule,dB.setStyleOnHover=LB.setStyleOnHover,dB.getFullTransformMatrix=LB.getFullTransformMatrix,dB.getElementTransformMatrix=LB.getElementTransformMatrix,dB.getElementAndAncestors=LB.getElementAndAncestors,dB.equalDomRects=LB.equalDomRects,dB.clearResponsive=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)},dB.preserveDrawingBuffer=function(t){var e;if("string"!=typeof(e=t&&t.hasOwnProperty("userAgent")?t.userAgent:function(){var t;"undefined"!=typeof navigator&&(t=navigator.userAgent);t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]);return t}()))return!0;var i=Ph({ua:{headers:{"user-agent":e}},tablet:!0,featureDetect:!1});if(!i)for(var n=e.split(" "),r=1;r<n.length;r++){if(-1!==n[r].indexOf("Safari"))for(var a=r-1;a>-1;a--){var s=n[a];if("Version/"===s.substr(0,8)){var o=s.substr(8).split(".")[0];if(Kh(o)&&(o=+o),o>=13)return!0}}}return i},dB.makeTraceGroups=function(t,e,i){var n=t.selectAll("g."+i.replace(/\s/g,".")).data(e,(function(t){return t[0].trace.uid}));n.exit().remove(),n.enter().append("g").attr("class",i),n.order();var r=t.classed("rangeplot")?"nodeRangePlot3":"node3";return n.each((function(t){t[0][r]=jh.select(this)})),n},dB._=function(t,e){for(var i=t._context.locale,n=0;n<2;n++){for(var r=t._context.locales,a=0;a<2;a++){var s=(r[i]||{}).dictionary;if(s){var o=s[e];if(o)return o}r=qh.localeRegistry}var l=i.split("-")[0];if(l===i)break;i=l}return e},dB.notifier=Su,dB.filterUnique=function(t){for(var e={},i=[],n=0,r=0;r<t.length;r++){var a=t[r];1!==e[a]&&(e[a]=1,i[n++]=a)}return i},dB.filterVisible=function(t){for(var e,i=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?tB:$h),n=[],r=0;r<t.length;r++){var a=t[r];i(a)&&n.push(a)}return n},dB.pushUnique=Xu,dB.increment=function(t,e){if(!e)return t;var i=1/Math.abs(e),n=i>1?(i*t+i*e)/i:t+e,r=String(n).length;if(r>16){var a=String(e).length;if(r>=String(t).length+a){var s=parseFloat(n).toPrecision(12);-1===s.indexOf("e+")&&(n=+s)}}return n},dB.cleanNumber=function(t){return"string"==typeof t&&(t=t.replace(nB,"")),eB(t)?Number(t):iB},dB.ensureNumber=function(t){return oB(t)?(t=Number(t))>cB||t<gB?uB:t:uB},dB.isIndex=function(t,e){return!(void 0!==e&&t>=e)&&(oB(t)&&t>=0&&t%1==0)},dB.noop=Du,dB.identity=yh(),dB.repeat=function(t,e){for(var i=new Array(e),n=0;n<e;n++)i[n]=t;return i},dB.swapAttrs=function(t,e,i,n){i||(i="x"),n||(n="y");for(var r=0;r<e.length;r++){var a=e[r],s=dB.nestedProperty(t,a.replace("?",i)),o=dB.nestedProperty(t,a.replace("?",n)),l=s.get();s.set(o.get()),o.set(l)}},dB.raiseToTop=function(t){t.parentNode.appendChild(t)},dB.cancelTransition=function(t){return t.transition().duration(0)},dB.constrain=function(t,e,i){return e>i?Math.max(i,Math.min(e,t)):Math.max(e,Math.min(i,t))},dB.bBoxIntersect=function(t,e,i){return i=i||0,t.left<=e.right+i&&e.left<=t.right+i&&t.top<=e.bottom+i&&e.top<=t.bottom+i},dB.simpleMap=function(t,e,i,n,r){for(var a=t.length,s=new Array(a),o=0;o<a;o++)s[o]=e(t[o],i,n,r);return s},dB.randstr=function t(e,i,n,r){if(n||(n=16),void 0===i&&(i=24),i<=0)return"0";var a,s,o=Math.log(Math.pow(2,i))/Math.log(n),l="";for(a=2;o===1/0;a*=2)o=Math.log(Math.pow(2,i/a))/Math.log(n)*a;var c=o-Math.floor(o);for(a=0;a<Math.floor(o);a++)l=Math.floor(Math.random()*n).toString(n)+l;c&&(s=Math.pow(n,c),l=Math.floor(Math.random()*s).toString(n)+l);var g=parseInt(l,n);return e&&e[l]||g!==1/0&&g>=Math.pow(2,i)?r>10?(dB.warn("randstr failed uniqueness"),l):t(e,i,n,(r||0)+1):l},dB.OptionControl=function(t,e){t||(t={}),e||(e="opt");var i={optionList:[],_newoption:function(n){n[e]=t,i[n.name]=n,i.optionList.push(n)}};return i["_"+e]=t,i},dB.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var i,n,r,a,s=t.length,o=2*s,l=2*e-1,c=new Array(l),g=new Array(s);for(i=0;i<l;i++)c[i]=(1-Math.cos(Math.PI*(i+1)/e))/(2*e);for(i=0;i<s;i++){for(a=0,n=0;n<l;n++)(r=i+n+1-e)<-s?r-=o*Math.round(r/o):r>=o&&(r-=o*Math.floor(r/o)),r<0?r=-1-r:r>=s&&(r=o-1-r),a+=t[r]*c[n];g[i]=a}return g},dB.syncOrAsync=function(t,e,i){var n;function r(){return dB.syncOrAsync(t,e,i)}for(;t.length;)if((n=(0,t.splice(0,1)[0])(e))&&n.then)return n.then(r);return i&&i(e)},dB.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},dB.noneOrAll=function(t,e,i){if(t){var n,r=!1,a=!0;for(n=0;n<i.length;n++)null!=t[i[n]]?r=!0:a=!1;if(r&&!a)for(n=0;n<i.length;n++)t[i[n]]=e[i[n]]}},dB.mergeArray=function(t,e,i,n){var r="function"==typeof n;if(dB.isArrayOrTypedArray(t))for(var a=Math.min(t.length,e.length),s=0;s<a;s++){var o=t[s];e[s][i]=r?n(o):o}},dB.mergeArrayCastPositive=function(t,e,i){return dB.mergeArray(t,e,i,(function(t){var e=+t;return isFinite(e)&&e>0?e:0}))},dB.fillArray=function(t,e,i,n){if(n=n||dB.identity,dB.isArrayOrTypedArray(t))for(var r=0;r<e.length;r++)e[r][i]=n(t[r])},dB.castOption=function(t,e,i,n){n=n||dB.identity;var r=dB.nestedProperty(t,i).get();return dB.isArrayOrTypedArray(r)?Array.isArray(e)&&dB.isArrayOrTypedArray(r[e[0]])?n(r[e[0]][e[1]]):n(r[e]):r},dB.extractOption=function(t,e,i,n){if(i in t)return t[i];var r=dB.nestedProperty(e,n).get();return Array.isArray(r)?void 0:r},dB.tagSelected=function(t,e,i){var n,r=e.selectedpoints,a=e._indexToPoints;function s(e){return void 0!==e&&e<t.length}a&&(n=GB(a));for(var o=0;o<r.length;o++){var l=r[o];if(dB.isIndex(l)||dB.isArrayOrTypedArray(l)&&dB.isIndex(l[0])&&dB.isIndex(l[1])){var c=n?n[l]:l,g=i?i[c]:c;s(g)&&(t[g].selected=1)}}},dB.selIndices2selPoints=function(t){var e=t.selectedpoints,i=t._indexToPoints;if(i){for(var n=GB(i),r=[],a=0;a<e.length;a++){var s=e[a];if(dB.isIndex(s)){var o=n[s];dB.isIndex(o)&&r.push(o)}}return r}return e},dB.getTargetArray=function(t,e){var i=e.target;if("string"==typeof i&&i){var n=dB.nestedProperty(t,i).get();return!!dB.isArrayOrTypedArray(n)&&n}return!!dB.isArrayOrTypedArray(i)&&i},dB.minExtend=function t(e,i,n){var r={};"object"!=typeof i&&(i={});var a,s,o,l="pieLike"===n?-1:3,c=Object.keys(e);for(a=0;a<c.length;a++)o=e[s=c[a]],"_"!==s.charAt(0)&&"function"!=typeof o&&("module"===s?r[s]=o:Array.isArray(o)?r[s]="colorscale"===s||-1===l?o.slice():o.slice(0,l):dB.isTypedArray(o)?r[s]=-1===l?o.subarray():o.subarray(0,l):r[s]=o&&"object"==typeof o?t(e[s],i[s],n):o);for(c=Object.keys(i),a=0;a<c.length;a++)"object"==typeof(o=i[s=c[a]])&&s in r&&"object"==typeof r[s]||(r[s]=o);return r},dB.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},dB.containsAny=function(t,e){for(var i=0;i<e.length;i++)if(-1!==t.indexOf(e[i]))return!0;return!1};var RB=/Version\/[\d\.]+.*Safari/;dB.isSafari=function(){return RB.test(window.navigator.userAgent)};var SB=/iPad|iPhone|iPod/;dB.isIOS=function(){return SB.test(window.navigator.userAgent)};var wB=/Firefox\/(\d+)\.\d+/;dB.getFirefoxVersion=function(){var t=wB.exec(window.navigator.userAgent);if(t&&2===t.length){var e=parseInt(t[1]);if(!isNaN(e))return e}return null},dB.isD3Selection=function(t){return t instanceof rB.selection},dB.ensureSingle=function(t,e,i,n){var r=t.select(e+(i?"."+i:""));if(r.size())return r;var a=t.append(e);return i&&a.classed(i,!0),n&&a.call(n),a},dB.ensureSingleById=function(t,e,i,n){var r=t.select(e+"#"+i);if(r.size())return r;var a=t.append(e).attr("id",i);return n&&a.call(n),a},dB.objectFromPath=function(t,e){for(var i,n=t.split("."),r=i={},a=0;a<n.length;a++){var s=n[a],o=null,l=n[a].match(/(.*)\[([0-9]+)\]/);l?(s=l[1],o=l[2],i=i[s]=[],a===n.length-1?i[o]=e:i[o]={},i=i[o]):(a===n.length-1?i[s]=e:i[s]={},i=i[s])}return r};var VB=/^([^\[\.]+)\.(.+)?/,EB=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function ZB(t){return"__"===t.slice(0,2)}dB.expandObjectPaths=function(t){var e,i,n,r,a,s,o;if("object"==typeof t&&!Array.isArray(t))for(i in t)if(t.hasOwnProperty(i))if(e=i.match(VB)){if(r=t[i],ZB(n=e[1]))continue;delete t[i],t[n]=dB.extendDeepNoArrays(t[n]||{},dB.objectFromPath(i,dB.expandObjectPaths(r))[n])}else if(e=i.match(EB)){if(r=t[i],ZB(n=e[1]))continue;if(a=parseInt(e[2]),delete t[i],t[n]=t[n]||[],"."===e[3])o=e[4],s=t[n][a]=t[n][a]||{},dB.extendDeepNoArrays(s,dB.objectFromPath(o,dB.expandObjectPaths(r)));else{if(ZB(n))continue;t[n][a]=dB.expandObjectPaths(r)}}else{if(ZB(i))continue;t[i]=dB.expandObjectPaths(t[i])}return t},dB.numSeparate=function(t,e,i){if(i||(i=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var n=/(\d+)(\d{3})/,r=e.charAt(0),a=e.charAt(1),s=t.split("."),o=s[0],l=s.length>1?r+s[1]:"";if(a&&(s.length>1||o.length>4||i))for(;n.test(o);)o=o.replace(n,"$1"+a+"$2");return o+l},dB.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var NB=/^\w*$/;dB.templateString=function(t,e){var i={};return t.replace(dB.TEMPLATE_STRING_REGEX,(function(t,n){var r;return NB.test(n)?r=e[n]:(i[n]=i[n]||dB.nestedProperty(e,n).get,r=i[n]()),dB.isValidTextValue(r)?r:""}))};var DB={max:10,count:0,name:"hovertemplate"};dB.hovertemplateString=function(){return MB.apply(DB,arguments)};var XB={max:10,count:0,name:"texttemplate"};dB.texttemplateString=function(){return MB.apply(XB,arguments)};var HB=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;var WB={max:10,count:0,name:"texttemplate",parseMultDiv:!0};dB.texttemplateStringForShapes=function(){return MB.apply(WB,arguments)};var kB=/^[:|\|]/;function MB(t,e,i){var n=this,r=arguments;e||(e={});var a={};return t.replace(dB.TEMPLATE_STRING_REGEX,(function(t,s,o){var l="_xother"===s||"_yother"===s,c="_xother_"===s||"_yother_"===s,g="xother_"===s||"yother_"===s,u="xother"===s||"yother"===s||l||g||c,d=s;(l||c)&&(d=d.substring(1)),(g||c)&&(d=d.substring(0,d.length-1));var h,B,p,F=null,f=null;if(n.parseMultDiv){var Q=function(t){var e=t.match(HB);return e?{key:e[1],op:e[2],number:Number(e[3])}:{key:t,op:null,number:null}}(d);d=Q.key,F=Q.op,f=Q.number}if(u){if(void 0===(h=e[d]))return""}else for(p=3;p<r.length;p++)if(B=r[p]){if(B.hasOwnProperty(d)){h=B[d];break}if(NB.test(d)||(h=dB.nestedProperty(B,d).get(),(h=a[d]||dB.nestedProperty(B,d).get())&&(a[d]=h)),void 0!==h)break}if(void 0!==h&&("*"===F&&(h*=f),"/"===F&&(h/=f)),void 0===h&&n)return n.count<n.max&&(dB.warn("Variable '"+d+"' in "+n.name+" could not be found!"),h=t),n.count===n.max&&dB.warn("Too many "+n.name+" warnings - additional warnings will be suppressed"),n.count++,t;if(o){var I;if(":"===o[0]&&(I=i?i.numberFormat:dB.numberFormat,""!==h&&(h=I(o.replace(kB,""))(h))),"|"===o[0]){I=i?i.timeFormat:aB;var U=dB.dateTime2ms(h);h=dB.formatDate(U,o.replace(kB,""),!1,I)}}else{var b=d+"Label";e.hasOwnProperty(b)&&(h=e[b])}return u&&(h="("+h+")",(l||c)&&(h=" "+h),(g||c)&&(h+=" ")),h}))}dB.subplotSort=function(t,e){for(var i=Math.min(t.length,e.length)+1,n=0,r=0,a=0;a<i;a++){var s=t.charCodeAt(a)||0,o=e.charCodeAt(a)||0,l=s>=48&&s<=57,c=o>=48&&o<=57;if(l&&(n=10*n+s-48),c&&(r=10*r+o-48),!l||!c){if(n!==r)return n-r;if(s!==o)return s-o}}return r-n};var TB=2e9;dB.seedPseudoRandom=function(){TB=2e9},dB.pseudoRandom=function(){var t=TB;return TB=(69069*TB+1)%4294967296,Math.abs(TB-t)<429496729?dB.pseudoRandom():TB/4294967296},dB.fillText=function(t,e,i){var n=Array.isArray(i)?function(t){i.push(t)}:function(t){i.text=t},r=dB.extractOption(t,e,"htx","hovertext");if(dB.isValidTextValue(r))return n(r);var a=dB.extractOption(t,e,"tx","text");return dB.isValidTextValue(a)?n(a):void 0},dB.isValidTextValue=function(t){return t||0===t},dB.formatPercent=function(t,e){e=e||0;for(var i=(Math.round(100*t*Math.pow(10,e))*Math.pow(.1,e)).toFixed(e)+"%",n=0;n<e;n++)-1!==i.indexOf(".")&&(i=(i=i.replace("0%","%")).replace(".%","%"));return i},dB.isHidden=function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e},dB.strTranslate=function(t,e){return t||e?"translate("+t+","+e+")":""},dB.strRotate=function(t){return t?"rotate("+t+")":""},dB.strScale=function(t){return 1!==t?"scale("+t+")":""},dB.getTextTransform=function(t){var e=t.noCenter,i=t.textX,n=t.textY,r=t.targetX,a=t.targetY,s=t.anchorX||0,o=t.anchorY||0,l=t.rotate,c=t.scale;return c?c>1&&(c=1):c=0,dB.strTranslate(r-c*(i+s),a-c*(n+o))+dB.strScale(c)+(l?"rotate("+l+(e?"":" "+i+" "+n)+")":"")},dB.setTransormAndDisplay=function(t,e){t.attr("transform",dB.getTextTransform(e)),t.style("display",e.scale?null:"none")},dB.ensureUniformFontSize=function(t,e){var i=dB.extendFlat({},e);return i.size=Math.max(e.size,t._fullLayout.uniformtext.minsize||0),i},dB.join2=function(t,e,i){var n=t.length;return n>1?t.slice(0,-1).join(e)+i+t[n-1]:t.join(e)},dB.bigFont=function(t){return Math.round(1.2*t)};var YB=dB.getFirefoxVersion(),JB=null!==YB&&YB<86;dB.getPositionFromD3Event=function(){return JB?[rB.event.layerX,rB.event.layerY]:[rB.event.offsetX,rB.event.offsetY]};var _B=Ts.exports,zB=_B,OB={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var KB in OB){var PB=KB.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");zB.addStyleRule(PB,OB[KB])}var jB,qB={},$B={},tp="function"==typeof Ns.matchMedia&&!Ns.matchMedia("(hover: none)").matches,ep={exports:{}},ip="object"==typeof Reflect?Reflect:null,np=ip&&"function"==typeof ip.apply?ip.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};jB=ip&&"function"==typeof ip.ownKeys?ip.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var rp=Number.isNaN||function(t){return t!=t};function ap(){ap.init.call(this)}ep.exports=ap,ep.exports.once=function(t,e){return new Promise((function(i,n){function r(i){t.removeListener(e,a),n(i)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",r),i([].slice.call(arguments))}pp(t,e,a,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&pp(t,"error",e,i)}(t,r,{once:!0})}))},ap.EventEmitter=ap,ap.prototype._events=void 0,ap.prototype._eventsCount=0,ap.prototype._maxListeners=void 0;var sp=10;function op(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function lp(t){return void 0===t._maxListeners?ap.defaultMaxListeners:t._maxListeners}function cp(t,e,i,n){var r,a,s,o;if(op(i),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),a=t._events),s=a[e]),void 0===s)s=a[e]=i,++t._eventsCount;else if("function"==typeof s?s=a[e]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(r=lp(t))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,o=l,console&&console.warn&&console.warn(o)}return t}function gp(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function up(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=gp.bind(n);return r.listener=i,n.wrapFn=r,r}function dp(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):Bp(r,r.length)}function hp(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function Bp(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function pp(t,e,i,n){if("function"==typeof t.on)n.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(a){n.once&&t.removeEventListener(e,r),i(a)}))}}Object.defineProperty(ap,"defaultMaxListeners",{enumerable:!0,get:function(){return sp},set:function(t){if("number"!=typeof t||t<0||rp(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");sp=t}}),ap.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ap.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||rp(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},ap.prototype.getMaxListeners=function(){return lp(this)},ap.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var o=r[t];if(void 0===o)return!1;if("function"==typeof o)np(o,this,e);else{var l=o.length,c=Bp(o,l);for(i=0;i<l;++i)np(c[i],this,e)}return!0},ap.prototype.addListener=function(t,e){return cp(this,t,e,!1)},ap.prototype.on=ap.prototype.addListener,ap.prototype.prependListener=function(t,e){return cp(this,t,e,!0)},ap.prototype.once=function(t,e){return op(e),this.on(t,up(this,t,e)),this},ap.prototype.prependOnceListener=function(t,e){return op(e),this.prependListener(t,up(this,t,e)),this},ap.prototype.removeListener=function(t,e){var i,n,r,a,s;if(op(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,a=i.length-1;a>=0;a--)if(i[a]===e||i[a].listener===e){s=i[a].listener,r=a;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},ap.prototype.off=ap.prototype.removeListener,ap.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,a=Object.keys(i);for(n=0;n<a.length;++n)"removeListener"!==(r=a[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},ap.prototype.listeners=function(t){return dp(this,t,!0)},ap.prototype.rawListeners=function(t){return dp(this,t,!1)},ap.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):hp.call(t,e)},ap.prototype.listenerCount=hp,ap.prototype.eventNames=function(){return this._eventsCount>0?jB(this._events):[]};var Fp=ep.exports,fp=Fp.EventEmitter,Qp={init:function(t){if(t._ev instanceof fp)return t;var e=new fp,i=new fp;return t._ev=e,t._internalEv=i,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=i.on.bind(i),t._internalOnce=i.once.bind(i),t._removeInternalListener=i.removeListener.bind(i),t._removeAllInternalListeners=i.removeAllListeners.bind(i),t.emit=function(t,n){e.emit(t,n),i.emit(t,n)},t},triggerHandler:function(t,e,i){var n=t._ev;if(n){var r=n._events[e];if(r){var a;for(r=Array.isArray(r)?r:[r],a=0;a<r.length-1;a++)s(r[a]);return s(r[a])}}function s(t){return t.listener?(n.removeListener(e,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(n,[i]))):t.apply(n,[i])}},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}},Ip=Qp,Up=_B,bp=Au.dfltConfig;var yp={add:function(t,e,i,n,r){var a,s;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},s=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(s,t.undoQueue.queue.length-s,a),t.undoQueue.index+=1):a=t.undoQueue.queue[s-1],t.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(e),a.undo.args.unshift(i),a.redo.calls.push(n),a.redo.args.push(r)),t.undoQueue.queue.length>bp.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,i;if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<e.undo.calls.length;i++)yp.plotDo(t,e.undo.calls[i],e.undo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,i;if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<e.redo.calls.length;i++)yp.plotDo(t,e.redo.calls[i],e.redo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};yp.plotDo=function(t,e,i){t.autoplay=!0,i=function(t,e){for(var i,n=[],r=0;r<e.length;r++)i=e[r],n[r]=i===t?i:"object"==typeof i?Array.isArray(i)?Up.extendDeep([],i):Up.extendDeepAll({},i):i;return n}(t,i),e.apply(null,i)};var mp=yp,xp={},vp={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}};!function(t){var e=Nu,i=_B,n=ru,r=Qh,a=vp,s=vd,o=Au.configAttributes,l=wd,c=i.extendDeepAll,g=i.isPlainObject,u=i.isArrayOrTypedArray,d=i.nestedProperty,h=i.valObjectMeta,B="_isSubplotObj",p="_isLinkedToArray",F="_deprecated",f=[B,p,"_arrayAttrRegexps",F];function Q(t,e,i){if(!t)return!1;if(t._isLinkedToArray)if(I(e[i]))i++;else if(i<e.length)return!1;for(;i<e.length;i++){var n=t[e[i]];if(!g(n))break;if(t=n,i===e.length-1)break;if(t._isLinkedToArray){if(!I(e[++i]))return!1}else if("info_array"===t.valType){var r=e[++i];if(!I(r))return!1;var a=t.items;if(Array.isArray(a)){if(r>=a.length)return!1;if(2===t.dimensions){if(i++,e.length===i)return t;var s=e[i];if(!I(s))return!1;t=a[r][s]}else t=a[r]}else t=a}}return t}function I(t){return t===Math.round(t)&&t>=0}function U(){var t,i,n={};for(t in c(n,r),e.subplotsRegistry){if((i=e.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(i.attr))for(var a=0;a<i.attr.length;a++)m(n,i,i.attr[a]);else m(n,i,"subplot"===i.attr?i.name:i.attr)}for(t in e.componentsRegistry){var s=(i=e.componentsRegistry[t]).schema;if(s&&(s.subplots||s.layout)){var o=s.subplots;if(o&&o.xaxis&&!o.yaxis)for(var l in o.xaxis)delete n.yaxis[l];delete n.xaxis.shift,delete n.xaxis.autoshift}else"colorscale"===i.name?c(n,i.layoutAttributes):i.layoutAttributes&&x(n,i.layoutAttributes,i.name)}return{layoutAttributes:y(n)}}function b(){var t={frames:c({},a)};return y(t),t.frames}function y(e){return function(e){function i(t){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+t+"`.",editType:"none"}}function n(e,n,r){t.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(r[n+"src"]=i(n)):g(e)&&(e.role="object")}t.crawl(e,n)}(e),function(e){function i(t,e,i){if(t){var n=t[p];n&&(delete t[p],i[e]={items:{}},i[e].items[n]=t,i[e].role="object")}}t.crawl(e,i)}(e),function(t){function e(t){for(var i in t)if(g(t[i]))e(t[i]);else if(Array.isArray(t[i]))for(var n=0;n<t[i].length;n++)e(t[i][n]);else t[i]instanceof RegExp&&(t[i]=t[i].toString())}e(t)}(e),e}function m(t,e,i){var n=d(t,i),r=c({},e.layoutAttributes);r[B]=!0,n.set(r)}function x(t,e,i){var n=d(t,i);n.set(c(n.get()||{},e))}t.IS_SUBPLOT_OBJ=B,t.IS_LINKED_TO_ARRAY=p,t.DEPRECATED=F,t.UNDERSCORE_ATTRS=f,t.get=function(){var i={};return e.allTypes.forEach((function(r){i[r]=function(i){var r,a;r=e.modules[i]._module,a=r.basePlotModule;var s={type:null},o=c({},n),l=c({},r.attributes);t.crawl(l,(function(t,e,i,n,r){d(o,r).set(void 0),void 0===t&&d(l,r).set(void 0)})),c(s,o),e.traceIs(i,"noOpacity")&&delete s.opacity;e.traceIs(i,"showLegend")||(delete s.showlegend,delete s.legendgroup);e.traceIs(i,"noHover")&&(delete s.hoverinfo,delete s.hoverlabel);r.selectPoints||delete s.selectedpoints;c(s,l),a.attributes&&c(s,a.attributes);s.type=i;var g={meta:r.meta||{},categories:r.categories||{},animatable:Boolean(r.animatable),type:i,attributes:y(s)};if(r.layoutAttributes){var u={};c(u,r.layoutAttributes),g.layoutAttributes=y(u)}r.animatable||t.crawl(g,(function(e){t.isValObject(e)&&"anim"in e&&delete e.anim}));return g}(r)})),{defs:{valObjects:h,metaKeys:f.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:i,layout:U(),frames:b(),animation:y(s),config:y(o)}},t.crawl=function(e,i,n,r){var a=n||0;r=r||"",Object.keys(e).forEach((function(n){var s=e[n];if(-1===f.indexOf(n)){var o=(r?r+".":"")+n;i(s,n,e,a,o),t.isValObject(s)||g(s)&&"impliedEdits"!==n&&t.crawl(s,i,a+1,o)}}))},t.isValObject=function(t){return t&&void 0!==t.valType},t.findArrayAttributes=function(e){var i,r,a=[],s=[],o=[];function l(t,e,n,r){s=s.slice(0,r).concat([e]),o=o.slice(0,r).concat([t&&t._isLinkedToArray]),t&&("data_array"===t.valType||!0===t.arrayOk)&&!("colorbar"===s[r-1]&&("ticktext"===e||"tickvals"===e))&&c(i,0,"")}function c(t,e,i){var n=t[s[e]],l=i+s[e];if(e===s.length-1)u(n)&&a.push(r+l);else if(o[e]){if(Array.isArray(n))for(var d=0;d<n.length;d++)g(n[d])&&c(n[d],e+1,l+"["+d+"].")}else g(n)&&c(n,e+1,l+".")}return i=e,r="",t.crawl(n,l),e._module&&e._module.attributes&&t.crawl(e._module.attributes,l),a},t.getTraceValObject=function(t,i){var r,a,s=i[0],o=t._module;if(o||(o=(e.modules[t.type||n.type.dflt]||{})._module),!o)return!1;if(!(a=(r=o.attributes)&&r[s])){var l=o.basePlotModule;l&&l.attributes&&(a=l.attributes[s])}return a||(a=n[s]),Q(a,i,1)},t.getLayoutValObject=function(t,i){var n=function(t,i){var n,a,s,o,l=t._basePlotModules;if(l){var c;for(n=0;n<l.length;n++){if((s=l[n]).attrRegex&&s.attrRegex.test(i)){if(s.layoutAttrOverrides)return s.layoutAttrOverrides;!c&&s.layoutAttributes&&(c=s.layoutAttributes)}var g=s.baseLayoutAttrOverrides;if(g&&i in g)return g[i]}if(c)return c}var u=t._modules;if(u)for(n=0;n<u.length;n++)if((o=u[n].layoutAttributes)&&i in o)return o[i];for(a in e.componentsRegistry){if("colorscale"===(s=e.componentsRegistry[a]).name&&0===i.indexOf("coloraxis"))return s.layoutAttributes[i];if(!s.schema&&i===s.name)return s.layoutAttributes}return i in r&&r[i]}(t,i[0]);return Q(n,i,1)}}(xp);var Cp={exports:{}},Ap={},Lp=_B,Gp=ru,Rp="templateitemname",Sp={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};function wp(t){return t&&"string"==typeof t}function Vp(t){var e=t.length-1;return"s"!==t.charAt(e)&&Lp.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}Sp[Rp]={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")},Ap.templatedArray=function(t,e){return e._isLinkedToArray=t,e.name=Sp.name,e[Rp]=Sp[Rp],e},Ap.traceTemplater=function(t){var e,i,n={};for(e in t)i=t[e],Array.isArray(i)&&i.length&&(n[e]=0);return{newTrace:function(r){var a={type:e=Lp.coerce(r,{},Gp,"type"),_template:null};if(e in n){i=t[e];var s=n[e]%i.length;n[e]++,a._template=i[s]}return a}}},Ap.newContainer=function(t,e,i){var n=t._template,r=n&&(n[e]||i&&n[i]);return Lp.isPlainObject(r)||(r=null),t[e]={_template:r}},Ap.arrayTemplater=function(t,e,i){var n=t._template,r=n&&n[Vp(e)],a=n&&n[e];Array.isArray(a)&&a.length||(a=[]);var s={};return{newItem:function(t){var e={name:t.name,_input:t},n=e[Rp]=t[Rp];if(!wp(n))return e._template=r,e;for(var o=0;o<a.length;o++){var l=a[o];if(l.name===n)return s[n]=1,e._template=l,e}return e[i]=t[i]||!1,e._template=!1,e},defaultItems:function(){for(var t=[],e=0;e<a.length;e++){var i=a[e],n=i.name;if(wp(n)&&!s[n]){var r={_template:i,name:n,_input:{_templateitemname:n}};r[Rp]=i[Rp],t.push(r),s[n]=1}}return t}}},Ap.arrayDefaultKey=Vp,Ap.arrayEditor=function(t,e,i){var n=(Lp.nestedProperty(t,e).get()||[]).length,r=i._index,a=r>=n&&(i._input||{})._templateitemname;a&&(r=n);var s,o=e+"["+r+"]";function l(){s={},a&&(s[o]={},s[o][Rp]=a)}function c(t,e){a?Lp.nestedProperty(s[o],t).set(e):s[o+"."+t]=e}function g(){var t=s;return l(),t}return l(),{modifyBase:function(t,e){s[t]=e},modifyItem:c,getUpdateObj:g,applyUpdate:function(e,i){e&&c(e,i);var n=g();for(var r in n)Lp.nestedProperty(t,r).set(n[r])}}};var Ep={},Zp=yu.counter,Np={idRegex:{x:Zp("x","( domain)?"),y:Zp("y","( domain)?")},attrRegex:Zp("[xy]axis"),xAxisMatch:Zp("xaxis"),yAxisMatch:Zp("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"};!function(t){var e=Nu,i=Np;function n(t,e){if(e&&e.length)for(var i=0;i<e.length;i++)if(e[i][t])return!0;return!1}t.id2name=function(t){if("string"==typeof t&&t.match(i.AX_ID_PATTERN)){var e=t.split(" ")[0].substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},t.name2id=function(t){if(t.match(i.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},t.cleanId=function(t,e,n){var r=/( domain)$/.test(t);if("string"==typeof t&&t.match(i.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)&&(!r||n)){var a=t.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),t.charAt(0)+a+(r&&n?" domain":"")}},t.list=function(e,i,n){var r=e._fullLayout;if(!r)return[];var a,s=t.listIds(e,i),o=new Array(s.length);for(a=0;a<s.length;a++){var l=s[a];o[a]=r[l.charAt(0)+"axis"+l.substr(1)]}if(!n){var c=r._subplots.gl3d||[];for(a=0;a<c.length;a++){var g=r[c[a]];i?o.push(g[i+"axis"]):o.push(g.xaxis,g.yaxis,g.zaxis)}}return o},t.listIds=function(t,e){var i=t._fullLayout;if(!i)return[];var n=i._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},t.getFromId=function(e,i,n){var r=e._fullLayout;return i=void 0===i||"string"!=typeof i?i:i.replace(" domain",""),"x"===n?i=i.replace(/y[0-9]*/,""):"y"===n&&(i=i.replace(/x[0-9]*/,"")),r[t.id2name(i)]},t.getFromTrace=function(i,n,r){var a=i._fullLayout,s=null;if(e.traceIs(n,"gl3d")){var o=n.scene;"scene"===o.substr(0,5)&&(s=a[o][r+"axis"])}else s=t.getFromId(i,n[r+"axis"]||r);return s},t.idSort=function(t,e){var i=t.charAt(0),n=e.charAt(0);return i!==n?i>n?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},t.ref2id=function(t){return!!/^[xyz]/.test(t)&&t.split(" ")[0]},t.isLinked=function(t,e){return n(e,t._axisMatchGroups)||n(e,t._axisConstraintGroups)}}(Ep);var Dp={clearOutlineControllers:function(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),t._fullLayout._outlining=!1}},Xp={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how scatter points at the same location coordinate","are displayed on the graph.","With *group*, the scatter points are plotted next to one another","centered around the shared location.","With *overlay*, the scatter points are plotted over one another,","you might need to reduce *opacity* to see multiple scatter points."].join(" ")},scattergap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between scatter points of","adjacent location coordinates.","Defaults to `bargap`."].join(" ")}},Hp={},Wp=Nu;Hp.getSubplotCalcData=function(t,e,i){var n=Wp.subplotsRegistry[e];if(!n)return[];for(var r=n.attr,a=[],s=0;s<t.length;s++){var o=t[s];o[0].trace[r]===i&&a.push(o)}return a},Hp.getModuleCalcData=function(t,e,i){var n,r=[],a=[];if(!(n="string"==typeof e?Wp.getModule(e).plot:"function"==typeof e?e:e.plot))return[r,t];for(var s=i,o=0;o<t.length;o++){var l=t[o],c=l[0].trace,g=void 0!==c.zorder;!0===c.visible&&0!==c._length&&(!c._module||c._module.plot!==n||g&&c.zorder!==s?a.push(l):r.push(l))}return[r,a]},Hp.getSubplotData=function(t,e,i){if(!Wp.subplotsRegistry[e])return[];for(var n,r=Wp.subplotsRegistry[e].attr,a=[],s=0;s<t.length;s++)(n=t[s])[r]===i&&a.push(n);return a};var kp,Mp={};var Tp=Js,Yp=Vc.timeFormatLocale,Jp=jc.formatLocale,_p=$c,zp=sg,Op=Nu,Kp=xp,Pp=Ap,jp=_B,qp=Uu,$p=tg.BADNUM,tF=Ep,eF=Dp.clearOutline,iF=Xp,nF=vd,rF=vp,aF=Hp.getModuleCalcData,sF=jp.relinkPrivateKeys,oF=jp._,lF=Cp.exports={};jp.extendFlat(lF,Op),lF.attributes=ru,lF.attributes.type.values=lF.allTypes,lF.fontAttrs=_g(),lF.layoutAttributes=Qh;var cF=(kp||(kp=1,function(t){var e=Nu,i=_B;function n(t,e,n){var r,a,s,o=!1;if("data"===e.type)r=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;r=t._fullLayout}return a=i.nestedProperty(r,e.prop).get(),(s=n[e.type]=n[e.type]||{}).hasOwnProperty(e.prop)&&s[e.prop]!==a&&(o=!0),s[e.prop]=a,{changed:o,value:a}}function r(t,e){var n=[],r=e[0],a={};if("string"==typeof r)a[r]=e[1];else{if(!i.isPlainObject(r))return n;a=r}return s(a,(function(t,e,i){n.push({type:"layout",prop:t,value:i})}),"",0),n}function a(t,e){var n,r,a,o,l=[];if(r=e[0],a=e[1],n=e[2],o={},"string"==typeof r)o[r]=a;else{if(!i.isPlainObject(r))return l;o=r,void 0===n&&(n=a)}return void 0===n&&(n=null),s(o,(function(e,i,r){var a,s;if(Array.isArray(r)){s=r.slice();var o=Math.min(s.length,t.data.length);n&&(o=Math.min(o,n.length)),a=[];for(var c=0;c<o;c++)a[c]=n?n[c]:c}else s=r,a=n?n.slice():null;if(null===a)Array.isArray(s)&&(s=s[0]);else if(Array.isArray(a)){if(!Array.isArray(s)){var g=s;s=[];for(var u=0;u<a.length;u++)s[u]=g}s.length=Math.min(a.length,s.length)}l.push({type:"data",prop:e,traces:a,value:s})}),"",0),l}function s(t,e,n,r){Object.keys(t).forEach((function(a){var o=t[a];if("_"!==a[0]){var l=n+(r>0?".":"")+a;i.isPlainObject(o)?s(o,e,l,r+1):e(l,a,o)}}))}t.manageCommandObserver=function(e,r,a,s){var o={},l=!0;r&&r._commandObserver&&(o=r._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var c=t.hasSimpleAPICommandBindings(e,a,o.lookupTable);if(r&&r._commandObserver){if(c)return o;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,o}if(c){n(e,c,o.cache),o.check=function(){if(l){var t=n(e,c,o.cache);return t.changed&&s&&void 0!==o.lookupTable[t.value]&&(o.disable(),Promise.resolve(s({value:t.value,type:c.type,prop:c.prop,traces:c.traces,index:o.lookupTable[t.value]})).then(o.enable,o.enable)),t.changed}};for(var g=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],u=0;u<g.length;u++)e._internalOn(g[u],o.check);o.remove=function(){for(var t=0;t<g.length;t++)e._removeInternalListener(g[t],o.check)}}else i.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){l=!1},o.enable=function(){l=!0},r&&(r._commandObserver=o),o},t.hasSimpleAPICommandBindings=function(e,i,n){var r,a,s=i.length;for(r=0;r<s;r++){var o,l=i[r],c=l.method,g=l.args;if(Array.isArray(g)||(g=[]),!c)return!1;var u=t.computeAPICommandBindings(e,c,g);if(1!==u.length)return!1;if(a){if((o=u[0]).type!==a.type)return!1;if(o.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(o.traces))return!1;o.traces.sort();for(var d=0;d<a.traces.length;d++)if(a.traces[d]!==o.traces[d])return!1}else if(o.prop!==a.prop)return!1}else a=u[0],Array.isArray(a.traces)&&a.traces.sort();var h=(o=u[0]).value;if(Array.isArray(h)){if(1!==h.length)return!1;h=h[0]}n&&(n[h]=r)}return a},t.executeAPICommand=function(t,n,r){if("skip"===n)return Promise.resolve();var a=e.apiMethodRegistry[n],s=[t];Array.isArray(r)||(r=[]);for(var o=0;o<r.length;o++)s.push(r[o]);return a.apply(null,s).catch((function(t){return i.warn("API call to Plotly."+n+" rejected.",t),Promise.reject(t)}))},t.computeAPICommandBindings=function(t,e,i){var n;switch(Array.isArray(i)||(i=[]),e){case"restyle":n=a(t,i);break;case"relayout":n=r(0,i);break;case"update":n=a(t,[i[0],i[2]]).concat(r(0,[i[1]]));break;case"animate":n=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,i);break;default:n=[]}return n}}(Mp)),Mp);lF.executeAPICommand=cF.executeAPICommand,lF.computeAPICommandBindings=cF.computeAPICommandBindings,lF.manageCommandObserver=cF.manageCommandObserver,lF.hasSimpleAPICommandBindings=cF.hasSimpleAPICommandBindings,lF.redrawText=function(t){return t=jp.getGraphDiv(t),new Promise((function(e){setTimeout((function(){t._fullLayout&&(Op.getComponentMethod("annotations","draw")(t),Op.getComponentMethod("legend","draw")(t),Op.getComponentMethod("colorbar","draw")(t),e(lF.previousPromises(t)))}),300)}))},lF.resize=function(t){var e;t=jp.getGraphDiv(t);var i=new Promise((function(i,n){t&&!jp.isHidden(t)||n(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._resolveResize&&(e=t._resolveResize),t._resolveResize=i,t._redrawTimer=setTimeout((function(){if(!t.layout||t.layout.width&&t.layout.height||jp.isHidden(t))i(t);else{delete t.layout.width,delete t.layout.height;var e=t.changed;t.autoplay=!0,Op.call("relayout",t,{autosize:!0}).then((function(){t.changed=e,t._resolveResize===i&&(delete t._resolveResize,i(t))}))}}),100)}));return e&&e(i),i},lF.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then((function(){t._promises=[]}))},lF.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,i=jp.ensureSingle(e._paper,"text","js-plot-link-container",(function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:qp.defaultLine,"pointer-events":"all"}).each((function(){var t=Tp.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)}))})),n=i.node(),r={y:e._paper.attr("height")-9};document.body.contains(n)&&n.getComputedTextLength()>=e.width-20?(r["text-anchor"]="start",r.x=5):(r["text-anchor"]="end",r.x=e._paper.attr("width")-7),i.attr(r);var a=i.select(".js-link-to-tool"),s=i.select(".js-link-spacer"),o=i.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var i=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)i.on("click",(function(){lF.sendDataToCloud(t)}));else{var n=window.location.pathname.split("/"),r=window.location.search;i.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+r})}}(t,a),s.text(a.text()&&o.text()?" - ":"")}},lF.sendDataToCloud=function(t){var e=(window.PLOTLYENV||{}).BASE_URL||t._context.plotlyServerURL;if(e){t.emit("plotly_beforeexport");var i=Tp.select(t).append("div").attr("id","hiddenform").style("display","none"),n=i.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return n.append("input").attr({type:"text",name:"data"}).node().value=lF.graphJson(t,!1,"keepdata"),n.node().submit(),i.remove(),t.emit("plotly_afterexport"),!1}};var gF=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],uF=["year","month","dayMonth","dayMonthYear"];function dF(t,e){var i=t._context.locale;i||(i="en-US");var n=!1,r={};function a(t){for(var i=!0,a=0;a<e.length;a++){var s=e[a];r[s]||(t[s]?r[s]=t[s]:i=!1)}i&&(n=!0)}for(var s=0;s<2;s++){for(var o=t._context.locales,l=0;l<2;l++){var c=(o[i]||{}).format;if(c&&(a(c),n))break;o=Op.localeRegistry}var g=i.split("-")[0];if(n||g===i)break;i=g}return n||a(Op.localeRegistry.en.format),r}function hF(t,e){var i={_fullLayout:e},n="x"===t._id.charAt(0),r=t._mainAxis._anchorAxis,a="",s="",o="";if(r&&(o=r._mainAxis._id,a=n?t._id+o:o+t._id),!a||!e._plots[a]){a="";for(var l=t._counterAxes,c=0;c<l.length;c++){var g=l[c],u=n?t._id+g:g+t._id;s||(s=u);var d=tF.getFromId(i,g);if(o&&d.overlaying===o){a=u;break}}}return a||s}function BF(t){return"string"==typeof t&&"px"===t.substr(t.length-2)&&parseFloat(t)}function pF(t){var e=t.margin;if(!t._size){var i=t._size={l:Math.round(e.l),r:Math.round(e.r),t:Math.round(e.t),b:Math.round(e.b),p:Math.round(e.pad)};i.w=Math.round(t.width)-i.l-i.r,i.h=Math.round(t.height)-i.t-i.b}t._pushmargin||(t._pushmargin={}),t._pushmarginIds||(t._pushmarginIds={}),t._reservedMargin||(t._reservedMargin={})}lF.supplyDefaults=function(t,e){var i=e&&e.skipUpdateCalc,n=t._fullLayout||{};if(n._skipDefaults)delete n._skipDefaults;else{var r,a=t._fullLayout={},s=t.layout||{},o=t._fullData||[],l=t._fullData=[],c=t.data||[],g=t.calcdata||[],u=t._context||{};t._transitionData||lF.createTransitionData(t),a._dfltTitle={plot:oF(t,"Click to enter Plot title"),subtitle:oF(t,"Click to enter Plot subtitle"),x:oF(t,"Click to enter X axis title"),y:oF(t,"Click to enter Y axis title"),colorbar:oF(t,"Click to enter Colorscale title"),annotation:oF(t,"new text")},a._traceWord=oF(t,"trace");var d=dF(t,gF);if(a._mapboxAccessToken=u.mapboxAccessToken,n._initialAutoSizeIsDone){var h=n.width,B=n.height;lF.supplyLayoutGlobalDefaults(s,a,d),s.width||(a.width=h),s.height||(a.height=B),lF.sanitizeMargins(a)}else{lF.supplyLayoutGlobalDefaults(s,a,d);var p=!s.width||!s.height,F=a.autosize,f=u.autosizable;p&&(F||f)?lF.plotAutoSize(t,s,a):p&&lF.sanitizeMargins(a),!F&&p&&(s.width=a.width,s.height=a.height)}a._d3locale=function(t,e){return t.decimal=e.charAt(0),t.thousands=e.charAt(1),{numberFormat:function(e){try{e=Jp(t).format(jp.adjustFormat(e))}catch(t){return jp.warnBadFormat(e),jp.noFormat}return e},timeFormat:Yp(t).utcFormat}}(d,a.separators),a._extraFormat=dF(t,uF),a._initialAutoSizeIsDone=!0,a._dataLength=c.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var Q=a._subplots=function(){var t,e,i=Op.collectableSubplotTypes,n={};if(!i){i=[];var r=Op.subplotsRegistry;for(var a in r){var s=r[a].attr;if(s&&(i.push(a),Array.isArray(s)))for(e=0;e<s.length;e++)jp.pushUnique(i,s[e])}}for(t=0;t<i.length;t++)n[i[t]]=[];return n}(),I=a._splomAxes={x:{},y:{}},U=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=function(t,e){var i,n,r=e.length,a=[];for(i=0;i<t.length;i++){var s=t[i]._fullInput;s!==n&&a.push(s),n=s}var o=a.length,l=new Array(r),c={};function g(t,e){l[e]=t,c[t]=1}function u(t,e){if(t&&"string"==typeof t&&!c[t])return g(t,e),!0}for(i=0;i<r;i++){var d=e[i].uid;"number"==typeof d&&(d=String(d)),u(d,i)||(i<o&&u(a[i].uid,i)||g(jp.randstr(c),i))}return l}(o,c),lF.supplyDataDefaults(c,l,s,a);var b=Object.keys(I.x),y=Object.keys(I.y);if(b.length>1&&y.length>1){for(Op.getComponentMethod("grid","sizeDefaults")(s,a),r=0;r<b.length;r++)jp.pushUnique(Q.xaxis,b[r]);for(r=0;r<y.length;r++)jp.pushUnique(Q.yaxis,y[r]);for(var m in U)jp.pushUnique(Q.cartesian,m)}if(a._has=lF._hasPlotType.bind(a),o.length===l.length)for(r=0;r<l.length;r++)sF(l[r],o[r]);lF.supplyLayoutModuleDefaults(s,a,l,t._transitionData);var x=a._visibleModules,v=[];for(r=0;r<x.length;r++){var C=x[r].crossTraceDefaults;C&&jp.pushUnique(v,C)}for(r=0;r<v.length;r++)v[r](l,a);a._hasOnlyLargeSploms=1===a._basePlotModules.length&&"splom"===a._basePlotModules[0].name&&b.length>15&&y.length>15&&0===a.shapes.length&&0===a.images.length,lF.linkSubplots(l,a,o,n),lF.cleanPlot(l,a,o,n);var A=!(!n._has||!n._has("cartesian")),L=!(!a._has||!a._has("cartesian"));A&&!L?n._bgLayer.remove():L&&!A&&(a._shouldCreateBgLayer=!0),n._zoomlayer&&!t._dragging&&eF({_fullLayout:n}),function(t,e){var i,n=[];e.meta&&(i=e._meta={meta:e.meta,layout:{meta:e.meta}});for(var r=0;r<t.length;r++){var a=t[r];a.meta?n[a.index]=a._meta={meta:a.meta}:e.meta&&(a._meta={meta:e.meta}),e.meta&&(a._meta.layout={meta:e.meta})}n.length&&(i||(i=e._meta={}),i.data=n)}(l,a),sF(a,n),Op.getComponentMethod("colorscale","crossTraceDefaults")(l,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var G,R=a._tracePreGUI,S={};for(G in R)S[G]="old";for(r=0;r<l.length;r++)S[G=l[r]._fullInput.uid]||(R[G]={}),S[G]="new";for(G in S)"old"===S[G]&&delete R[G];pF(a),Op.getComponentMethod("rangeslider","makeData")(a),i||g.length!==l.length||lF.supplyDefaultsUpdateCalc(g,l)}},lF.supplyDefaultsUpdateCalc=function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=(t[i]||[])[0];if(r&&r.trace){var a=r.trace;if(a._hasCalcTransform){var s,o,l,c=a._arrayAttrs;for(s=0;s<c.length;s++)o=c[s],l=jp.nestedProperty(a,o).get().slice(),jp.nestedProperty(n,o).set(l)}r.trace=n}}},lF.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},lF._hasPlotType=function(t){var e,i=this._basePlotModules||[];for(e=0;e<i.length;e++)if(i[e].name===t)return!0;var n=this._modules||[];for(e=0;e<n.length;e++){var r=n[e].name;if(r===t)return!0;var a=Op.modules[r];if(a&&a.categories[t])return!0}return!1},lF.cleanPlot=function(t,e,i,n){var r,a,s=n._basePlotModules||[];for(r=0;r<s.length;r++){var o=s[r];o.clean&&o.clean(t,e,i,n)}var l=n._has&&n._has("gl"),c=e._has&&e._has("gl");l&&!c&&void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcontainer.selectAll(".no-webgl").remove(),n._glcanvas=null);var g=!!n._infolayer;t:for(r=0;r<i.length;r++){var u=i[r].uid;for(a=0;a<t.length;a++){if(u===t[a].uid)continue t}g&&n._infolayer.select(".cb"+u).remove()}},lF.linkSubplots=function(t,e,i,n){var r,a,s=n._plots||{},o=e._plots={},l={_fullData:t,_fullLayout:e},c=e._subplots.cartesian||[];for(r=0;r<c.length;r++){var g,u=c[r],d=s[u],h=tF.getFromId(l,u,"x"),B=tF.getFromId(l,u,"y");for(d?g=o[u]=d:(g=o[u]={}).id=u,h._counterAxes.push(B._id),B._counterAxes.push(h._id),h._subplotsWith.push(u),B._subplotsWith.push(u),g.xaxis=h,g.yaxis=B,g._hasClipOnAxisFalse=!1,a=0;a<t.length;a++){var p=t[a];if(p.xaxis===g.xaxis._id&&p.yaxis===g.yaxis._id&&!1===p.cliponaxis){g._hasClipOnAxisFalse=!0;break}}}var F,f=tF.list(l,null,!0);for(r=0;r<f.length;r++){var Q=null;(F=f[r]).overlaying&&(Q=tF.getFromId(l,F.overlaying))&&Q.overlaying&&(F.overlaying=!1,Q=null),F._mainAxis=Q||F,Q&&(F.domain=Q.domain.slice()),F._anchorAxis="free"===F.anchor?null:tF.getFromId(l,F.anchor)}for(r=0;r<f.length;r++)if((F=f[r])._counterAxes.sort(tF.idSort),F._subplotsWith.sort(jp.subplotSort),F._mainSubplot=hF(F,e),F._counterAxes.length&&(F.spikemode&&-1!==F.spikemode.indexOf("across")||F.automargin&&F.mirror&&"free"!==F.anchor||Op.getComponentMethod("rangeslider","isVisible")(F))){var I=1,U=0;for(a=0;a<F._counterAxes.length;a++){var b=tF.getFromId(l,F._counterAxes[a]);I=Math.min(I,b.domain[0]),U=Math.max(U,b.domain[1])}I<U&&(F._counterDomainMin=I,F._counterDomainMax=U)}},lF.clearExpandedTraceDefaultColors=function(t){var e,i,n;for(i=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],Kp.crawl(t._module.attributes,(function(t,n,r,a){i[a]=n,i.length=a+1,"color"===t.valType&&void 0===t.dflt&&e.push(i.join("."))}))),n=0;n<e.length;n++){jp.nestedProperty(t,"_input."+e[n]).get()||jp.nestedProperty(t,e[n]).set(null)}},lF.supplyDataDefaults=function(t,e,i,n){var r,a,s,o=n._modules,l=n._visibleModules,c=n._basePlotModules,g=0;function u(t){e.push(t);var i=t._module;i&&(jp.pushUnique(o,i),!0===t.visible&&jp.pushUnique(l,i),jp.pushUnique(c,t._module.basePlotModule),!1!==t._input.visible&&g++)}n._transformModules=[];var d={},h=[],B=(i.template||{}).data||{},p=Pp.traceTemplater(B);for(r=0;r<t.length;r++)s=t[r],(a=p.newTrace(s)).uid=n._traceUids[r],lF.supplyTraceDefaults(s,a,g,n,r),a.index=r,a._input=s,a._fullInput=a,u(a),Op.traceIs(a,"carpetAxis")&&(d[a.carpet]=a),Op.traceIs(a,"carpetDependent")&&h.push(r);for(r=0;r<h.length;r++)if((a=e[h[r]]).visible){var F=d[a.carpet];a._carpet=F,F&&F.visible?(a.xaxis=F.xaxis,a.yaxis=F.yaxis):a.visible=!1}},lF.supplyAnimationDefaults=function(t){var e;t=t||{};var i={};function n(e,n){return jp.coerce(t||{},i,nF,e,n)}if(n("mode"),n("direction"),n("fromcurrent"),Array.isArray(t.frame))for(i.frame=[],e=0;e<t.frame.length;e++)i.frame[e]=lF.supplyAnimationFrameDefaults(t.frame[e]||{});else i.frame=lF.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(i.transition=[],e=0;e<t.transition.length;e++)i.transition[e]=lF.supplyAnimationTransitionDefaults(t.transition[e]||{});else i.transition=lF.supplyAnimationTransitionDefaults(t.transition||{});return i},lF.supplyAnimationFrameDefaults=function(t){var e={};function i(i,n){return jp.coerce(t||{},e,nF.frame,i,n)}return i("duration"),i("redraw"),e},lF.supplyAnimationTransitionDefaults=function(t){var e={};function i(i,n){return jp.coerce(t||{},e,nF.transition,i,n)}return i("duration"),i("easing"),e},lF.supplyFrameDefaults=function(t){var e={};function i(i,n){return jp.coerce(t,e,rF,i,n)}return i("group"),i("name"),i("traces"),i("baseframe"),i("data"),i("layout"),e},lF.supplyTraceDefaults=function(t,e,i,n,r){var a,s=n.colorway||qp.defaults,o=s[i%s.length];function l(i,n){return jp.coerce(t,e,lF.attributes,i,n)}var c=l("visible");l("type"),l("name",n._traceWord+" "+r),l("uirevision",n.uirevision);var g=lF.getModule(e);if(e._module=g,g){var u=g.basePlotModule,d=u.attr,h=u.attributes;if(d&&h){var B=n._subplots,p="";if(Array.isArray(d))for(a=0;a<d.length;a++){var F=d[a],f=jp.coerce(t,e,h,F);B[F]&&jp.pushUnique(B[F],f),p+=f}else p=jp.coerce(t,e,h,d);B[u.name]&&jp.pushUnique(B[u.name],p)}}if(c&&(l("customdata"),l("ids"),l("meta"),Op.traceIs(e,"showLegend")?(jp.coerce(t,e,g.attributes.showlegend?g.attributes:lF.attributes,"showlegend"),l("legend"),l("legendwidth"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),e._dfltShowLegend=!0):e._dfltShowLegend=!1,g&&g.supplyDefaults(t,e,o,n),Op.traceIs(e,"noOpacity")||l("opacity"),Op.traceIs(e,"notLegendIsolatable")&&(e.visible=!!e.visible),Op.traceIs(e,"noHover")||(e.hovertemplate||jp.coerceHoverinfo(t,e,n),"parcats"!==e.type&&Op.getComponentMethod("fx","supplyDefaults")(t,e,o,n)),g&&g.selectPoints)){var Q=l("selectedpoints");jp.isTypedArray(Q)&&(e.selectedpoints=Array.from(Q))}return e},lF.supplyLayoutGlobalDefaults=function(t,e,i){function n(i,n){return jp.coerce(t,e,lF.layoutAttributes,i,n)}var r=t.template;jp.isPlainObject(r)&&(e.template=r,e._template=r.layout,e._dataTemplate=r.data),n("autotypenumbers");var a=jp.coerceFont(n,"font"),s=a.size;jp.coerceFont(n,"title.font",a,{overrideDflt:{size:Math.round(1.4*s)}}),n("title.text",e._dfltTitle.plot),n("title.xref");var o=n("title.yref");n("title.pad.t"),n("title.pad.r"),n("title.pad.b"),n("title.pad.l");var l=n("title.automargin");n("title.x"),n("title.xanchor"),n("title.y"),n("title.yanchor"),n("title.subtitle.text",e._dfltTitle.subtitle),jp.coerceFont(n,"title.subtitle.font",a,{overrideDflt:{size:Math.round(.7*e.title.font.size)}}),l&&("paper"===o&&(0!==e.title.y&&(e.title.y=1),"auto"===e.title.yanchor&&(e.title.yanchor=0===e.title.y?"top":"bottom")),"container"===o&&("auto"===e.title.y&&(e.title.y=1),"auto"===e.title.yanchor&&(e.title.yanchor=e.title.y<.5?"bottom":"top"))),n("uniformtext.mode")&&n("uniformtext.minsize"),n("autosize",!(t.width&&t.height)),n("width"),n("height"),n("minreducedwidth"),n("minreducedheight"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),t.width&&t.height&&lF.sanitizeMargins(e),Op.getComponentMethod("grid","sizeDefaults")(t,e),n("paper_bgcolor"),n("separators",i.decimal+i.thousands),n("hidesources"),n("colorway"),n("datarevision");var c=n("uirevision");n("editrevision",c),n("selectionrevision",c),Op.getComponentMethod("modebar","supplyLayoutDefaults")(t,e),Op.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(t,e,n),Op.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(t,e,n),n("meta"),jp.isPlainObject(t.transition)&&(n("transition.duration"),n("transition.easing"),n("transition.ordering")),Op.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),Op.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,n),jp.coerce(t,e,iF,"scattermode")},lF.plotAutoSize=function(t,e,i){var n,r,a=t._context||{},s=a.frameMargins,o=jp.isPlotDiv(t);if(o&&t.emit("plotly_autosize"),a.fillFrame)n=window.innerWidth,r=window.innerHeight,document.body.style.overflow="hidden";else{var l=o?window.getComputedStyle(t):{};if(n=BF(l.width)||BF(l.maxWidth)||i.width,r=BF(l.height)||BF(l.maxHeight)||i.height,_p(s)&&s>0){var c=1-2*s;n=Math.round(c*n),r=Math.round(c*r)}}var g=lF.layoutAttributes.width.min,u=lF.layoutAttributes.height.min;n<g&&(n=g),r<u&&(r=u);var d=!e.width&&Math.abs(i.width-n)>1,h=!e.height&&Math.abs(i.height-r)>1;(h||d)&&(d&&(i.width=n),h&&(i.height=r)),t._initialAutoSize||(t._initialAutoSize={width:n,height:r}),lF.sanitizeMargins(i)},lF.supplyLayoutModuleDefaults=function(t,e,i,n){var r,a,s,o=Op.componentsRegistry,l=e._basePlotModules,c=Op.subplotsRegistry.cartesian;for(r in o)(s=o[r]).includeBasePlot&&s.includeBasePlot(t,e);for(var g in l.length||l.push(c),e._has("cartesian")&&(Op.getComponentMethod("grid","contentDefaults")(t,e),c.finalizeSubplots(t,e)),e._subplots)e._subplots[g].sort(jp.subplotSort);for(a=0;a<l.length;a++)(s=l[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,i);var u=e._modules;for(a=0;a<u.length;a++)(s=u[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,i);var d=e._transformModules;for(a=0;a<d.length;a++)(s=d[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,i,n);for(r in o)(s=o[r]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,i)},lF.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),jp.clearThrottle(),jp.clearResponsive(t),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._dragdata,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},lF.style=function(t){var e,i=t._fullLayout._visibleModules,n=[];for(e=0;e<i.length;e++){var r=i[e];r.style&&jp.pushUnique(n,r.style)}for(e=0;e<n.length;e++)n[e](t)},lF.sanitizeMargins=function(t){if(t&&t.margin){var e,i=t.width,n=t.height,r=t.margin,a=i-(r.l+r.r),s=n-(r.t+r.b);a<0&&(e=(i-1)/(r.l+r.r),r.l=Math.floor(e*r.l),r.r=Math.floor(e*r.r)),s<0&&(e=(n-1)/(r.t+r.b),r.t=Math.floor(e*r.t),r.b=Math.floor(e*r.b))}},lF.clearAutoMarginIds=function(t){t._fullLayout._pushmarginIds={}},lF.allowAutoMargin=function(t,e){t._fullLayout._pushmarginIds[e]=1};lF.autoMargin=function(t,e,i){var n=t._fullLayout,r=n.width,a=n.height,s=n.margin,o=n.minreducedwidth,l=n.minreducedheight,c=jp.constrain(r-s.l-s.r,2,o),g=jp.constrain(a-s.t-s.b,2,l),u=Math.max(0,r-c),d=Math.max(0,a-g),h=n._pushmargin,B=n._pushmarginIds;if(!1!==s.autoexpand){if(i){var p=i.pad;if(void 0===p&&(p=Math.min(12,s.l,s.r,s.t,s.b)),u){var F=(i.l+i.r)/u;F>1&&(i.l/=F,i.r/=F)}if(d){var f=(i.t+i.b)/d;f>1&&(i.t/=f,i.b/=f)}var Q=void 0!==i.xl?i.xl:i.x,I=void 0!==i.xr?i.xr:i.x,U=void 0!==i.yt?i.yt:i.y,b=void 0!==i.yb?i.yb:i.y;h[e]={l:{val:Q,size:i.l+p},r:{val:I,size:i.r+p},b:{val:b,size:i.b+p},t:{val:U,size:i.t+p}},B[e]=1}else delete h[e],delete B[e];if(!n._replotting)return lF.doAutoMargin(t)}},lF.doAutoMargin=function(t){var e=t._fullLayout,i=e.width,n=e.height;e._size||(e._size={}),pF(e);var r=e._size,a=e.margin,s={t:0,b:0,l:0,r:0},o=jp.extendFlat({},r),l=a.l,c=a.r,g=a.t,u=a.b,d=e._pushmargin,h=e._pushmarginIds,B=e.minreducedwidth,p=e.minreducedheight;if(!1!==a.autoexpand){for(var F in d)h[F]||delete d[F];var f=t._fullLayout._reservedMargin;for(var Q in f)for(var I in f[Q]){var U=f[Q][I];s[I]=Math.max(s[I],U)}for(var b in d.base={l:{val:0,size:l},r:{val:1,size:c},t:{val:1,size:g},b:{val:0,size:u}},s){var y=0;for(var m in d)"base"!==m&&_p(d[m][b].size)&&(y=d[m][b].size>y?d[m][b].size:y);var x=Math.max(0,a[b]-y);s[b]=Math.max(0,s[b]-x)}for(var v in d){var C=d[v].l||{},A=d[v].b||{},L=C.val,G=C.size,R=A.val,S=A.size,w=i-s.r-s.l,V=n-s.t-s.b;for(var E in d){if(_p(G)&&d[E].r){var Z=d[E].r.val,N=d[E].r.size;if(Z>L){var D=(G*Z+(N-w)*L)/(Z-L),X=(N*(1-L)+(G-w)*(1-Z))/(Z-L);D+X>l+c&&(l=D,c=X)}}if(_p(S)&&d[E].t){var H=d[E].t.val,W=d[E].t.size;if(H>R){var k=(S*H+(W-V)*R)/(H-R),M=(W*(1-R)+(S-V)*(1-H))/(H-R);k+M>u+g&&(u=k,g=M)}}}}}var T=jp.constrain(i-a.l-a.r,2,B),Y=jp.constrain(n-a.t-a.b,2,p),J=Math.max(0,i-T),_=Math.max(0,n-Y);if(J){var z=(l+c)/J;z>1&&(l/=z,c/=z)}if(_){var O=(u+g)/_;O>1&&(u/=O,g/=O)}if(r.l=Math.round(l)+s.l,r.r=Math.round(c)+s.r,r.t=Math.round(g)+s.t,r.b=Math.round(u)+s.b,r.p=Math.round(a.pad),r.w=Math.round(i)-r.l-r.r,r.h=Math.round(n)-r.t-r.b,!e._replotting&&(lF.didMarginChange(o,r)||function(t){if("_redrawFromAutoMarginCount"in t._fullLayout)return!1;var e=tF.list(t,"",!0);for(var i in e)if(e[i].autoshift||e[i].shift)return!0;return!1}(t))){"_redrawFromAutoMarginCount"in e?e._redrawFromAutoMarginCount++:e._redrawFromAutoMarginCount=1;var K=3*(1+Object.keys(h).length);if(e._redrawFromAutoMarginCount<K)return Op.call("_doPlot",t);e._size=o,jp.warn("Too many auto-margin redraws.")}!function(t){var e=tF.list(t,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach((function(t){for(var i=0;i<e.length;i++){var n=e[i][t];n&&n()}}))}(t)};var FF=["l","r","t","b","p","w","h"];function fF(t,e,i){var n=!1;var r=[lF.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},i.prepareFn,lF.rehover,lF.reselect,function(){return t.emit("plotly_transitioning",[]),new Promise((function(r){t._transitioning=!0,e.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push((function(){n=!0})),i.redraw&&t._transitionData._interruptCallbacks.push((function(){return Op.call("redraw",t)})),t._transitionData._interruptCallbacks.push((function(){t.emit("plotly_transitioninterrupted",[])}));var a=0,s=0;function o(){return a++,function(){s++,n||s!==a||function(e){if(!t._transitionData)return;(function(t){if(t)for(;t.length;)t.shift()})(t._transitionData._interruptCallbacks),Promise.resolve().then((function(){if(i.redraw)return Op.call("redraw",t)})).then((function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])})).then(e)}(r)}}i.runFn(o),setTimeout(o())}))}],a=jp.syncOrAsync(r,t);return a&&a.then||(a=Promise.resolve()),a.then((function(){return t}))}lF.didMarginChange=function(t,e){for(var i=0;i<FF.length;i++){var n=FF[i],r=t[n],a=e[n];if(!_p(r)||Math.abs(a-r)>1)return!0}return!1},lF.graphJson=function(t,e,i,n,r,a){(r&&e&&!t._fullData||r&&!e&&!t._fullLayout)&&lF.supplyDefaults(t);var s=r?t._fullData:t.data,o=r?t._fullLayout:t.layout,l=(t._transitionData||{})._frames;function c(t,e){if("function"==typeof t)return e?"_function_":null;if(jp.isPlainObject(t)){var n,r={};return Object.keys(t).sort().forEach((function(a){if(-1===["_","["].indexOf(a.charAt(0)))if("function"!=typeof t[a]){if("keepdata"===i){if("src"===a.substr(a.length-3))return}else if("keepstream"===i){if("string"==typeof(n=t[a+"src"])&&n.indexOf(":")>0&&!jp.isPlainObject(t.stream))return}else if("keepall"!==i&&"string"==typeof(n=t[a+"src"])&&n.indexOf(":")>0)return;r[a]=c(t[a],e)}else e&&(r[a]="_function")})),r}var a=Array.isArray(t),s=jp.isTypedArray(t);if((a||s)&&t.dtype&&t.shape){var o=t.bdata;return c({dtype:t.dtype,shape:t.shape,bdata:jp.isArrayBuffer(o)?zp.encode(o):o},e)}return a?t.map((function(t){return c(t,e)})):s?jp.simpleMap(t,jp.identity):jp.isJSDate(t)?jp.ms2DateTimeLocal(+t):t}var g={data:(s||[]).map((function(t){var i=c(t);return e&&delete i.fit,i}))};if(!e&&(g.layout=c(o),r)){var u=o._size;g.layout.computed={margin:{b:u.b,l:u.l,r:u.r,t:u.t}}}return l&&(g.frames=c(l)),a&&(g.config=c(t._context,!0)),"object"===n?g:JSON.stringify(g)},lF.modifyFrames=function(t,e){var i,n,r,a=t._transitionData._frames,s=t._transitionData._frameHash;for(i=0;i<e.length;i++)switch((n=e[i]).type){case"replace":r=n.value;var o=(a[n.index]||{}).name,l=r.name;a[n.index]=s[l]=r,l!==o&&(delete s[o],s[l]=r);break;case"insert":s[(r=n.value).name]=r,a.splice(n.index,0,r);break;case"delete":delete s[(r=a[n.index]).name],a.splice(n.index,1)}return Promise.resolve()},lF.computeFrame=function(t,e){var i,n,r,a,s=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var o=s[e.toString()];if(!o)return!1;for(var l=[o],c=[o.name];o.baseframe&&(o=s[o.baseframe.toString()])&&-1===c.indexOf(o.name);)l.push(o),c.push(o.name);for(var g={};o=l.pop();)if(o.layout&&(g.layout=lF.extendLayout(g.layout,o.layout)),o.data){if(g.data||(g.data=[]),!(n=o.traces))for(n=[],i=0;i<o.data.length;i++)n[i]=i;for(g.traces||(g.traces=[]),i=0;i<o.data.length;i++)null!=(r=n[i])&&(-1===(a=g.traces.indexOf(r))&&(a=g.data.length,g.traces[a]=r),g.data[a]=lF.extendTrace(g.data[a],o.data[i]))}return g},lF.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},i=t._transitionData._frames,n=0;n<i.length;n++){var r=i[n];r&&r.name&&(e[r.name]=r)}},lF.extendObjectWithContainers=function(t,e,i){var n,r,a,s,o,l,c,g=jp.extendDeepNoArrays({},e||{}),u=jp.expandObjectPaths(g),d={};if(i&&i.length)for(a=0;a<i.length;a++)void 0===(r=(n=jp.nestedProperty(u,i[a])).get())?jp.nestedProperty(d,i[a]).set(null):(n.set(null),jp.nestedProperty(d,i[a]).set(r));if(t=jp.extendDeepNoArrays(t||{},u),i&&i.length)for(a=0;a<i.length;a++)if(l=jp.nestedProperty(d,i[a]).get()){for(c=(o=jp.nestedProperty(t,i[a])).get(),Array.isArray(c)||(c=[],o.set(c)),s=0;s<l.length;s++){var h=l[s];c[s]=null===h?null:lF.extendObjectWithContainers(c[s],h)}o.set(c)}return t},lF.dataArrayContainers=["transforms","dimensions"],lF.layoutArrayContainers=Op.layoutArrayContainers,lF.extendTrace=function(t,e){return lF.extendObjectWithContainers(t,e,lF.dataArrayContainers)},lF.extendLayout=function(t,e){return lF.extendObjectWithContainers(t,e,lF.layoutArrayContainers)},lF.transition=function(t,e,i,n,r,a){var s={redraw:r.redraw},o={},l=[];return s.prepareFn=function(){for(var r=Array.isArray(e)?e.length:0,a=n.slice(0,r),s=0;s<a.length;s++){var c=a[s],g=t._fullData[c]._module;if(g){if(g.animatable){var u=g.basePlotModule.name;o[u]||(o[u]=[]),o[u].push(c)}t.data[a[s]]=lF.extendTrace(t.data[a[s]],e[s])}}var d=jp.expandObjectPaths(jp.extendDeepNoArrays({},i)),h=/^[xy]axis[0-9]*$/;for(var B in d)h.test(B)&&delete d[B].range;lF.extendLayout(t.layout,d),delete t.calcdata,lF.supplyDefaults(t),lF.doCalcdata(t);var p=jp.expandObjectPaths(i);if(p){var F=t._fullLayout._plots;for(var f in F){var Q=F[f],I=Q.xaxis,U=Q.yaxis,b=I.range.slice(),y=U.range.slice(),m=null,x=null,v=null,C=null;Array.isArray(p[I._name+".range"])?m=p[I._name+".range"].slice():Array.isArray((p[I._name]||{}).range)&&(m=p[I._name].range.slice()),Array.isArray(p[U._name+".range"])?x=p[U._name+".range"].slice():Array.isArray((p[U._name]||{}).range)&&(x=p[U._name].range.slice()),b&&m&&(I.r2l(b[0])!==I.r2l(m[0])||I.r2l(b[1])!==I.r2l(m[1]))&&(v={xr0:b,xr1:m}),y&&x&&(U.r2l(y[0])!==U.r2l(x[0])||U.r2l(y[1])!==U.r2l(x[1]))&&(C={yr0:y,yr1:x}),(v||C)&&l.push(jp.extendFlat({plotinfo:Q},v,C))}}return Promise.resolve()},s.runFn=function(e){var n,r,s=t._fullLayout._basePlotModules,c=l.length;if(i)for(r=0;r<s.length;r++)s[r].transitionAxes&&s[r].transitionAxes(t,l,a,e);for(var g in c?((n=jp.extendFlat({},a)).duration=0,delete o.cartesian):n=a,o){var u=o[g];t._fullData[u[0]]._module.basePlotModule.plot(t,u,n,e)}},fF(t,a,s)},lF.transitionFromReact=function(t,e,i,n){var r=t._fullLayout,a=r.transition,s={},o=[];return s.prepareFn=function(){var t=r._plots;for(var a in s.redraw=!1,"some"===e.anim&&(s.redraw=!0),"some"===i.anim&&(s.redraw=!0),t){var l=t[a],c=l.xaxis,g=l.yaxis,u=n[c._name].range.slice(),d=n[g._name].range.slice(),h=c.range.slice(),B=g.range.slice();c.setScale(),g.setScale();var p=null,F=null;c.r2l(u[0])===c.r2l(h[0])&&c.r2l(u[1])===c.r2l(h[1])||(p={xr0:u,xr1:h}),g.r2l(d[0])===g.r2l(B[0])&&g.r2l(d[1])===g.r2l(B[1])||(F={yr0:d,yr1:B}),(p||F)&&o.push(jp.extendFlat({plotinfo:l},p,F))}return Promise.resolve()},s.runFn=function(i){for(var n,r,s,l=t._fullData,c=t._fullLayout._basePlotModules,g=[],u=0;u<l.length;u++)g.push(u);function d(){if(t._fullLayout)for(var e=0;e<c.length;e++)c[e].transitionAxes&&c[e].transitionAxes(t,o,n,i)}function h(){if(t._fullLayout)for(var e=0;e<c.length;e++)c[e].plot(t,s,r,i)}o.length&&e.anim?"traces first"===a.ordering?(n=jp.extendFlat({},a,{duration:0}),s=g,r=a,setTimeout(d,a.duration),h()):(n=a,s=null,r=jp.extendFlat({},a,{duration:0}),setTimeout(h,n.duration),d()):o.length?(n=a,d()):e.anim&&(s=g,r=a,h())},fF(t,a,s)},lF.doCalcdata=function(t,e){var i,n,r,a,s=tF.list(t),o=t._fullData,l=t._fullLayout,c=new Array(o.length),g=(t.calcdata||[]).slice();for(t.calcdata=c,l._numBoxes=0,l._numViolins=0,l._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,l._piecolormap={},l._sunburstcolormap={},l._treemapcolormap={},l._iciclecolormap={},l._funnelareacolormap={},r=0;r<o.length;r++)Array.isArray(e)&&-1===e.indexOf(r)&&(c[r]=g[r]);for(r=0;r<o.length;r++)(i=o[r])._arrayAttrs=Kp.findArrayAttributes(i),i._extremes={};var u=l._subplots.polar||[];for(r=0;r<u.length;r++)s.push(l[u[r]].radialaxis,l[u[r]].angularaxis);for(var d in l._colorAxes){var h=l[d];!1!==h.cauto&&(delete h.cmin,delete h.cmax)}var B=!1;function p(e){if(i=o[e],n=i._module,!0===i.visible&&i.transforms){if(n&&n.calc){var r=n.calc(t,i);r[0]&&r[0].t&&r[0].t._scene&&delete r[0].t._scene.dirty}for(a=0;a<i.transforms.length;a++){var s=i.transforms[a];(n=transformsRegistry[s.type])&&n.calcTransform&&(i._hasCalcTransform=!0,B=!0,n.calcTransform(t,i,s))}}}function F(e,r){if(i=o[e],!!(n=i._module).isContainer===r){var s=[];if(!0===i.visible&&0!==i._length){delete i._indexToPoints;var l=i.transforms||[];for(a=l.length-1;a>=0;a--)if(l[a].enabled){i._indexToPoints=l[a]._indexToPoints;break}n&&n.calc&&(s=n.calc(t,i))}Array.isArray(s)&&s[0]||(s=[{x:$p,y:$p}]),s[0].t||(s[0].t={}),s[0].trace=i,c[e]=s}}for(IF(s,o,l),r=0;r<o.length;r++)F(r,!0);for(r=0;r<o.length;r++)p(r);for(B&&IF(s,o,l),r=0;r<o.length;r++)F(r,!0);for(r=0;r<o.length;r++)F(r,!1);UF(t);var f=function(t,e){var i,n,r,a,s,o=[];function l(t,i,n){var r=i._id.charAt(0);if("histogram2dcontour"===t){var a=i._counterAxes[0],s=tF.getFromId(e,a),o="x"===r||"x"===a&&"category"===s.type,l="y"===r||"y"===a&&"category"===s.type;return function(t,e){return 0===t||0===e||o&&t===n[e].length-1||l&&e===n.length-1?-1:("y"===r?e:t)-1}}return function(t,e){return"y"===r?e:t}}var c={min:function(t){return jp.aggNums(Math.min,null,t)},max:function(t){return jp.aggNums(Math.max,null,t)},sum:function(t){return jp.aggNums((function(t,e){return t+e}),null,t)},total:function(t){return jp.aggNums((function(t,e){return t+e}),null,t)},mean:function(t){return jp.mean(t)},"geometric mean":function(t){return jp.geometricMean(t)},median:function(t){return jp.median(t)}};function g(t,e){return t[1]-e[1]}function u(t,e){return e[1]-t[1]}for(i=0;i<t.length;i++){var d=t[i];if("category"===d.type){var h=d.categoryorder.match(QF);if(h){var B=h[1],p=h[2],F=d._id.charAt(0),f="x"===F,Q=[];for(n=0;n<d._categories.length;n++)Q.push([d._categories[n],[]]);for(n=0;n<d._traceIndices.length;n++){var I=d._traceIndices[n],U=e._fullData[I];if(!0===U.visible){var b=U.type;Op.traceIs(U,"histogram")&&(delete U._xautoBinFinished,delete U._yautoBinFinished);var y="splom"===b,m="scattergl"===b,x=e.calcdata[I];for(r=0;r<x.length;r++){var v,C,A=x[r];if(y){var L=U._axesDim[d._id];if(!f){var G=U._diag[L][0];G&&(d=e._fullLayout[tF.id2name(G)])}var R=A.trace.dimensions[L].values;for(a=0;a<R.length;a++)for(v=d._categoriesMap[R[a]],s=0;s<A.trace.dimensions.length;s++)if(s!==L){var S=A.trace.dimensions[s];Q[v][1].push(S.values[a])}}else if(m){for(a=0;a<A.t.x.length;a++)f?(v=A.t.x[a],C=A.t.y[a]):(v=A.t.y[a],C=A.t.x[a]),Q[v][1].push(C);A.t&&A.t._scene&&delete A.t._scene.dirty}else if(A.hasOwnProperty("z")){C=A.z;var w=l(U.type,d,C);for(a=0;a<C.length;a++)for(s=0;s<C[a].length;s++)(v=w(s,a))+1&&Q[v][1].push(C[a][s])}else for(void 0===(v=A.p)&&(v=A[F]),void 0===(C=A.s)&&(C=A.v),void 0===C&&(C=f?A.y:A.x),Array.isArray(C)||(C=void 0===C?[]:[C]),a=0;a<C.length;a++)Q[v][1].push(C[a])}}}d._categoriesValue=Q;var V=[];for(n=0;n<Q.length;n++)V.push([Q[n][0],c[B](Q[n][1])]);V.sort("descending"===p?u:g),d._categoriesAggregatedValue=V,d._initialCategories=V.map((function(t){return t[0]})),o=o.concat(d.sortByInitialCategories())}}}return o}(s,t);if(f.length){for(l._numBoxes=0,l._numViolins=0,r=0;r<f.length;r++)F(f[r],!0);for(r=0;r<f.length;r++)F(f[r],!1);UF(t)}Op.getComponentMethod("fx","calc")(t),Op.getComponentMethod("errorbars","calc")(t)};var QF=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function IF(t,e,i){var n={};function r(t){t.clearCalc(),"multicategory"===t.type&&t.setupMultiCategory(e),n[t._id]=1}jp.simpleMap(t,r);for(var a=i._axisMatchGroups||[],s=0;s<a.length;s++)for(var o in a[s])n[o]||r(i[tF.id2name(o)])}function UF(t){var e,i,n,r=t._fullLayout,a=r._visibleModules,s={};for(i=0;i<a.length;i++){var o=a[i],l=o.crossTraceCalc;if(l){var c=o.basePlotModule.name;s[c]?jp.pushUnique(s[c],l):s[c]=[l]}}for(n in s){var g=s[n],u=r._subplots[n];if(Array.isArray(u))for(e=0;e<u.length;e++){var d=u[e],h="cartesian"===n?r._plots[d]:r[d];for(i=0;i<g.length;i++)g[i](t,h,d)}else for(i=0;i<g.length;i++)g[i](t)}}lF.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},lF.redrag=function(t){t._fullLayout._redrag&&t._fullLayout._redrag()},lF.reselect=function(t){var e=t._fullLayout,i=(t.layout||{}).selections,n=e._previousSelections;e._previousSelections=i;var r=e._reselect||JSON.stringify(i)!==JSON.stringify(n);Op.getComponentMethod("selections","reselect")(t,r)},lF.generalUpdatePerTraceModule=function(t,e,i,n){var r,a=e.traceHash,s={};for(r=0;r<i.length;r++){var o=i[r],l=o[0].trace;l.visible&&(s[l.type]=s[l.type]||[],s[l.type].push(o))}for(var c in a)if(!s[c]){var g=a[c][0];g[0].trace.visible=!1,s[c]=[g]}for(var u in s){var d=s[u];d[0][0].trace._module.plot(t,e,jp.filterVisible(d),n)}e.traceHash=s},lF.plotBasePlot=function(t,e,i,n,r){var a=Op.getModule(t),s=aF(e.calcdata,a)[0];a.plot(e,s,n,r)},lF.cleanBasePlot=function(t,e,i,n,r){var a=r._has&&r._has(t),s=i._has&&i._has(t);a&&!s&&r["_"+t+"layer"].selectAll("g.trace").remove()};var bF,yF=Cp.exports,mF={exports:{}},xF={},vF={};(bF=vF).xmlns="http://www.w3.org/2000/xmlns/",bF.svg="http://www.w3.org/2000/svg",bF.xlink="http://www.w3.org/1999/xlink",bF.svgAttrs={xmlns:bF.svg,"xmlns:xlink":bF.xlink};var CF={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}};!function(t){var e=Js,i=_B,n=i.strTranslate,r=vF,a=CF.LINE_SPACING,s=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;t.convertToTspans=function(B,v,C){var G=B.text(),R=!B.attr("data-notex")&&v&&v._context.typesetMath&&"undefined"!=typeof MathJax&&G.match(s),S=e.select(B.node().parentNode);if(!S.empty()){var w=B.attr("class")?B.attr("class").split(" ")[0]:"text";return w+="-math",S.selectAll("svg."+w).remove(),S.selectAll("g."+w+"-group").remove(),B.style("display",null).attr({"data-unformatted":G,"data-math":"N"}),R?(v&&v._promises||[]).push(new Promise((function(t){B.style("display","none");var r=parseInt(B.node().style.fontSize,10),a={fontSize:r};!function(t,n,r){var a,s,g,u,d=parseInt((MathJax.version||"").split(".")[0]);if(2!==d&&3!==d)return void i.warn("No MathJax version:",MathJax.version);var h=function(){return s=i.extendDeepAll({},MathJax.Hub.config),g=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:c},displayAlign:"left"})},B=function(){s=i.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=c},p=function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},F=function(){"svg"!==(a=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg")},f=function(){var r="math-output-"+i.randstr({},64);u=e.select("body").append("div").attr({id:r}).style({visibility:"hidden",position:"absolute","font-size":n.fontSize+"px"}).text(function(t){return t.replace(o,"\\lt ").replace(l,"\\gt ")}(t));var a=u.node();return 2===d?MathJax.Hub.Typeset(a):MathJax.typeset([a])},Q=function(){var n=u.select(2===d?".MathJax_SVG":".MathJax"),a=!n.empty()&&u.select("svg").node();if(a){var s,o=a.getBoundingClientRect();s=2===d?e.select("body").select("#MathJax_SVG_glyphs"):n.select("defs"),r(n,s,o)}else i.log("There was an error in the tex syntax.",t),r();u.remove()},I=function(){if("SVG"!==a)return MathJax.Hub.setRenderer(a)},U=function(){"svg"!==a&&(MathJax.config.startup.output=a)},b=function(){return void 0!==g&&(MathJax.Hub.processSectionDelay=g),MathJax.Hub.Config(s)},y=function(){MathJax.config=s};2===d?MathJax.Hub.Queue(h,p,f,Q,I,b):3===d&&(B(),F(),MathJax.startup.defaultReady(),MathJax.startup.promise.then((function(){f(),Q(),U(),y()})))}(R[2],a,(function(e,i,a){S.selectAll("svg."+w).remove(),S.selectAll("g."+w+"-group").remove();var s=e&&e.select("svg");if(!s||!s.node())return V(),void t();var o=S.append("g").classed(w+"-group",!0).attr({"pointer-events":"none","data-unformatted":G,"data-math":"Y"});o.node().appendChild(s.node()),i&&i.node()&&s.node().insertBefore(i.node().cloneNode(!0),s.node().firstChild);var l=a.width,c=a.height;s.attr({class:w,height:c,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var g=B.node().style.fill||"black",u=s.select("g");u.attr({fill:g,stroke:g});var d=u.node().getBoundingClientRect(),h=d.width,p=d.height;(h>l||p>c)&&(s.style("overflow","hidden"),h=(d=s.node().getBoundingClientRect()).width,p=d.height);var F=+B.attr("x"),f=+B.attr("y"),Q=-(r||B.node().getBoundingClientRect().height)/4;if("y"===w[0])o.attr({transform:"rotate("+[-90,F,f]+")"+n(-h/2,Q-p/2)});else if("l"===w[0])f=Q-p/2;else if("a"===w[0]&&0!==w.indexOf("atitle"))F=0,f=Q;else{var I=B.attr("text-anchor");F-=h*("middle"===I?.5:"end"===I?1:0),f=f+Q-p/2}s.attr({x:F,y:f}),C&&C.call(B,o),t(o)}))}))):V(),B}function V(){S.empty()||(w=B.attr("class")+"-math",S.select("svg."+w).remove()),B.text("").style("white-space","pre");var n=function(t,n){n=n.replace(p," ");var s,o=!1,l=[],c=-1;function B(){c++;var i=document.createElementNS(r.svg,"tspan");e.select(i).attr({class:"line",dy:c*a+"em"}),t.appendChild(i),s=i;var n=l;if(l=[{node:i}],n.length>1)for(var o=1;o<n.length;o++)v(n[o])}function v(t){var i,n=t.type,a={};if("a"===n){i="a";var o=t.target,c=t.href,g=t.popup;c&&(a={"xlink:xlink:show":"_blank"===o||"_"!==o.charAt(0)?"new":"replace",target:o,"xlink:xlink:href":c},g&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+g+'");return false;'))}else i="tspan";t.style&&(a.style=t.style);var B=document.createElementNS(r.svg,i);if("sup"===n||"sub"===n){C(s,h),s.appendChild(B);var p=document.createElementNS(r.svg,"tspan");C(p,h),e.select(p).attr("dy",d[n]),a.dy=u[n],s.appendChild(B),s.appendChild(p)}else s.appendChild(B);e.select(B).attr(a),s=t.node=B,l.push(t)}function C(t,e){t.appendChild(document.createTextNode(e))}function G(t){if(1!==l.length){var e=l.pop();t!==e.type&&i.log("Start tag <"+e.type+"> doesnt match end tag <"+t+">. Pretending it did match.",n),s=l[l.length-1].node}else i.log("Ignoring unexpected end tag </"+t+">.",n)}var R=Q.test(n);R?B():(s=t,l=[{node:t}]);for(var S=n.split(F),w=0;w<S.length;w++){var V=S[w],E=V.match(f),Z=E&&E[2].toLowerCase(),N=g[Z];if("br"===Z)B();else if(void 0===N)C(s,A(V));else if(E[1])G(Z);else{var D=E[4],X={type:Z},H=m(D,I);if(H?(H=H.replace(x,"$1 fill:"),N&&(H+=";"+N)):N&&(H=N),H&&(X.style=H),"a"===Z){o=!0;var W=m(D,U);if(W){var k=L(W);k&&(X.href=k,X.target=m(D,b)||"_blank",X.popup=m(D,y))}}v(X)}}return o}(B.node(),G);n&&B.style("pointer-events","all"),t.positionText(B),C&&C.call(B)}};var o=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g;var c=[["$","$"],["\\(","\\)"]];var g={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},h="​",B=["http:","https:","mailto:","",void 0,":"],p=t.NEWLINES=/(\r\n?|\n)/g,F=/(<[^<>]*>)/,f=/<(\/?)([^ >]*)(\s+(.*))?>/i,Q=/<br(\s+.*)?>/i;t.BR_TAG_ALL=/<br(\s+.*)?>/gi;var I=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,U=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,b=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function m(t,e){if(!t)return null;var i=t.match(e),n=i&&(i[3]||i[4]);return n&&A(n)}var x=/(^|;)\s*color:/;t.plainText=function(t,e){for(var i=void 0!==(e=e||{}).len&&-1!==e.len?e.len:1/0,n=void 0!==e.allowedTags?e.allowedTags:["br"],r=t.split(F),a=[],s="",o=0,l=0;l<r.length;l++){var c=r[l],g=c.match(f),u=g&&g[2].toLowerCase();if(u)-1!==n.indexOf(u)&&(a.push(c),s=u);else{var d=c.length;if(o+d<i)a.push(c),o+=d;else if(o<i){var h=i-o;s&&("br"!==s||h<=3||d<=3)&&a.pop(),i>3?a.push(c.substr(0,h-3)+"..."):a.push(c.substr(0,h));break}s=""}}return a.join("")};var v={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function A(t){return t.replace(C,(function(t,e){var i;return i="#"===e.charAt(0)?function(t){if(t>1114111)return;var e=String.fromCodePoint;if(e)return e(t);var i=String.fromCharCode;return t<=65535?i(t):i(55232+(t>>10),t%1024+56320)}("x"===e.charAt(1)?parseInt(e.substr(2),16):parseInt(e.substr(1),10)):v[e],i||t}))}function L(t){var e=encodeURI(decodeURI(t)),i=document.createElement("a"),n=document.createElement("a");i.href=t,n.href=e;var r=i.protocol,a=n.protocol;return-1!==B.indexOf(r)&&-1!==B.indexOf(a)?e:""}function G(t,e,n){var r,a,s,o=n.horizontalAlign,l=n.verticalAlign||"top",c=t.node().getBoundingClientRect(),g=e.node().getBoundingClientRect();return a="bottom"===l?function(){return c.bottom-r.height}:"middle"===l?function(){return c.top+(c.height-r.height)/2}:function(){return c.top},s="right"===o?function(){return c.right-r.width}:"center"===o?function(){return c.left+(c.width-r.width)/2}:function(){return c.left},function(){r=this.node().getBoundingClientRect();var t=s()-g.left,e=a()-g.top,o=n.gd||{};if(n.gd){o._fullLayout._calcInverseTransform(o);var l=i.apply3DTransform(o._fullLayout._invTransform)(t,e);t=l[0],e=l[1]}return this.style({top:e+"px",left:t+"px","z-index":1e3}),this}}t.convertEntities=A,t.sanitizeHTML=function(t){t=t.replace(p," ");for(var i=document.createElement("p"),n=i,r=[],a=t.split(F),s=0;s<a.length;s++){var o=a[s],l=o.match(f),c=l&&l[2].toLowerCase();if(c in g)if(l[1])r.length&&(n=r.pop());else{var u=l[4],d=m(u,I),h=d?{style:d}:{};if("a"===c){var B=m(u,U);if(B){var Q=L(B);if(Q){h.href=Q;var y=m(u,b);y&&(h.target=y)}}}var x=document.createElement(c);n.appendChild(x),e.select(x).attr(h),n=x,r.push(x)}else n.appendChild(document.createTextNode(A(o)))}return i.innerHTML},t.lineCount=function(t){return t.selectAll("tspan.line").size()||1},t.positionText=function(t,i,n){return t.each((function(){var t=e.select(this);function r(e,i){return void 0===i?null===(i=t.attr(e))&&(t.attr(e,0),i=0):t.attr(e,i),i}var a=r("x",i),s=r("y",n);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:a,y:s})}))};var R="1px ";t.makeTextShadow=function(t){return R+R+R+t+", -"+R+"-"+R+R+t+", "+R+"-"+R+R+t+", -"+R+R+R+t},t.makeEditable=function(t,i){var n=i.gd,r=i.delegate,a=e.dispatch("edit","input","cancel"),s=r||t;if(t.style({"pointer-events":r?"none":"all"}),1!==t.size())throw new Error("boo");function o(){!function(){var r=e.select(n).select(".svg-container"),s=r.append("div"),o=t.node().style,c=parseFloat(o.fontSize||12),g=i.text;void 0===g&&(g=t.attr("data-unformatted"));s.classed("plugin-editable editable",!0).style({position:"absolute","font-family":o.fontFamily||"Arial","font-size":c,color:i.fill||o.fill||"black",opacity:1,"background-color":i.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(g).call(G(t,r,i)).on("blur",(function(){n._editing=!1,t.text(this.textContent).style({opacity:1});var i,r=e.select(this).attr("class");(i=r?"."+r.split(" ")[0]+"-math-group":"[class*=-math-group]")&&e.select(t.node().parentNode).select(i).style({opacity:0});var s=this.textContent;e.select(this).transition().duration(0).remove(),e.select(document).on("mouseup",null),a.edit.call(t,s)})).on("focus",(function(){var t=this;n._editing=!0,e.select(document).on("mouseup",(function(){if(e.event.target===t)return!1;document.activeElement===s.node()&&s.node().blur()}))})).on("keyup",(function(){27===e.event.which?(n._editing=!1,t.style({opacity:1}),e.select(this).style({opacity:0}).on("blur",(function(){return!1})).transition().remove(),a.cancel.call(t,this.textContent)):(a.input.call(t,this.textContent),e.select(this).call(G(t,r,i)))})).on("keydown",(function(){13===e.event.which&&this.blur()})).call(l)}(),t.style({opacity:0});var r,o=s.attr("class");(r=o?"."+o.split(" ")[0]+"-math-group":"[class*=-math-group]")&&e.select(t.node().parentNode).select(r).style({opacity:0})}function l(t){var e=t.node(),i=document.createRange();i.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(i),e.focus()}return i.immediate?o():s.on("click",o),e.rebind(t,a,"on")}}(xF);var AF={exports:{}},LF=Js,GF=kg,RF=$c,SF=_B,wF=Uu,VF=cu.isValid;var EF=["showscale","autocolorscale","colorscale","reversescale","colorbar"],ZF=["min","max","mid","auto"];function NF(t){var e,i,n,r=t._colorAx,a=r||t,s={};for(i=0;i<EF.length;i++)s[n=EF[i]]=a[n];if(r)for(e="c",i=0;i<ZF.length;i++)s[n=ZF[i]]=a["c"+n];else{var o;for(i=0;i<ZF.length;i++)((o="c"+(n=ZF[i]))in a||(o="z"+n)in a)&&(s[n]=a[o]);e=o.charAt(0)}return s._sync=function(t,i){var n=-1!==ZF.indexOf(t)?e+t:t;a[n]=a["_"+n]=i},s}function DF(t){for(var e=NF(t),i=e.min,n=e.max,r=e.reversescale?XF(e.colorscale):e.colorscale,a=r.length,s=new Array(a),o=new Array(a),l=0;l<a;l++){var c=r[l];s[l]=i+c[0]*(n-i),o[l]=c[1]}return{domain:s,range:o}}function XF(t){for(var e=t.length,i=new Array(e),n=e-1,r=0;n>=0;n--,r++){var a=t[n];i[r]=[1-a[0],a[1]]}return i}function HF(t,e){e=e||{};for(var i=t.domain,n=t.range,r=n.length,a=new Array(r),s=0;s<r;s++){var o=GF(n[s]).toRgb();a[s]=[o.r,o.g,o.b,o.a]}var l,c=LF.scale.linear().domain(i).range(a).clamp(!0),g=e.noNumericCheck,u=e.returnArray;return l=g&&u?c:g?function(t){return WF(c(t))}:u?function(t){return RF(t)?c(t):GF(t).isValid()?t:wF.defaultLine}:function(t){return RF(t)?WF(c(t)):GF(t).isValid()?t:wF.defaultLine},l.domain=c.domain,l.range=function(){return n},l}function WF(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return GF(e).toRgbString()}var kF={hasColorscale:function(t,e,i){var n=e?SF.nestedProperty(t,e).get()||{}:t,r=n[i||"color"];r&&r._inputArray&&(r=r._inputArray);var a=!1;if(SF.isArrayOrTypedArray(r))for(var s=0;s<r.length;s++)if(RF(r[s])){a=!0;break}return SF.isPlainObject(n)&&(a||!0===n.showscale||RF(n.cmin)&&RF(n.cmax)||VF(n.colorscale)||SF.isPlainObject(n.colorbar))},extractOpts:NF,extractScale:DF,flipScale:XF,makeColorScaleFunc:HF,makeColorScaleFuncFromTrace:function(t,e){return HF(DF(t),e)}},MF=Xd.FORMAT_LINK,TF=Xd.DATE_FORMAT_LINK;function YF(t,e){return["Sets the "+t+" formatting rule"+(e?"for `"+e+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+MF+"."].join(" ")}function JF(t,e){return YF(t,e)+[" And for dates see: "+TF+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}var _F=function(t,e){return{valType:"string",dflt:"",editType:"none",description:(e?YF:JF)("hover text",t)+["By default the values are formatted using "+(e?"generic number format":"`"+t+"axis.hoverformat`")+"."].join(" ")}},zF=JF,OF=_g(),KF=uu,PF=Nd.dash,jF=Mg.extendFlat,qF=Ap.templatedArray,$F=zF,tf=tg.ONEDAY,ef=Np,nf=ef.HOUR_PATTERN,rf=ef.WEEKDAY_PATTERN,af={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},sf=jF({},af,{values:af.values.slice().concat(["sync"]),description:[af.description,"If *sync*, the number of ticks will sync with the overlayed axis","set by `overlaying` property."].join(" ")});function of(t){return{valType:"integer",min:0,dflt:t?5:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")}}var lf={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},cf={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},gf={valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},uf={valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")};function df(t){var e={valType:"number",min:0,editType:"ticks",description:"Sets the tick length (in px)."};return t||(e.dflt=5),e}function hf(t){var e={valType:"number",min:0,editType:"ticks",description:"Sets the tick width (in px)."};return t||(e.dflt=1),e}var Bf={valType:"color",dflt:KF.defaultLine,editType:"ticks",description:"Sets the tick color."},pf={valType:"color",dflt:KF.lightLine,editType:"ticks",description:"Sets the color of the grid lines."};function Ff(t){var e={valType:"number",min:0,editType:"ticks",description:"Sets the width (in px) of the grid lines."};return t||(e.dflt=1),e}var ff=jF({},PF,{editType:"ticks"}),Qf={valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},If={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:KF.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:"Sets the title of this axis."},font:OF({editType:"ticks",description:"Sets this axis' title font."}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided and it has a value for both the","lower and upper bound, `autorange` is set to *false*.","Using *min* applies autorange only to set the minimum.","Using *max* applies autorange only to set the maximum.","Using *min reversed* applies autorange only to set the minimum on a reversed axis.","Using *max reversed* applies autorange only to set the maximum on a reversed axis.","Using *reversed* applies autorange on both ends and reverses the axis direction."].join(" ")},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Use this value exactly as autorange minimum."].join(" ")},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Use this value exactly as autorange maximum."].join(" ")},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Clip autorange minimum if it goes beyond this value.","Has no effect when `autorangeoptions.minallowed` is provided."].join(" ")},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Clip autorange maximum if it goes beyond this value.","Has no effect when `autorangeoptions.maxallowed` is provided."].join(" ")},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Ensure this value is included in autorange."].join(" ")},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears.","Leaving either or both elements `null` impacts the default `autorange`."].join(" ")},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1},description:["Determines the minimum range of this axis."].join(" ")},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1},description:["Determines the maximum range of this axis."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Could be used to set the desired inside range of this axis","(excluding the labels) when `ticklabelposition` of","the anchored axis has *inside*.","Not implemented for axes with `type` *log*.","This would be ignored when `range` is provided."].join(" ")},scaleanchor:{valType:"enumerated",values:[ef.idRegex.x.toString(),ef.idRegex.y.toString(),!1],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Setting `false` allows to remove a default constraint (occasionally,","you may need to prevent a default `scaleanchor` constraint from",'being applied, eg. when having an image trace `yaxis: {scaleanchor: "x"}`',"is set automatically in order for pixels to be rendered as squares,","setting `yaxis: {scaleanchor: false}` allows to remove the constraint)."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[ef.idRegex.x.toString(),ef.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:qF("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[rf,nf,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+rf+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+nf+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+rf+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+nf+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:tf,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:sf,nticks:of(),tick0:lf,dtick:cf,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks",description:["Sets the spacing between tick labels as compared to the spacing between ticks.","A value of 1 (default) means each tick gets a label.","A value of 2 means shows every 2nd label.","A larger value n means only every nth tick is labeled.","`tick0` determines which labels are shown.","Not implemented for axes with `type` *log* or *multicategory*, or when `tickmode` is *array*."].join(" ")},tickvals:gf,ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:uf,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks",description:["Shifts the tick labels by the specified number of pixels in parallel to the axis.","Positive values move the labels in the positive direction of the axis."].join(" ")},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis tick labels and their default position.","A positive `ticklabelstandoff` moves the labels farther away from the plot area","if `ticklabelposition` is *outside*, and deeper into the plot area if","`ticklabelposition` is *inside*. A negative `ticklabelstandoff` works in the opposite","direction, moving outside ticks towards the plot area and inside ticks towards","the outside. If the negative value is large enough, inside ticks can even end up","outside and vice versa."].join(" ")},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc",description:["Only for axes with `type` *date* or *linear*.","Instead of drawing the major tick label, draw the label for the minor tick","that is n positions away from the major tick. E.g. to always draw the label for the","minor tick before each major tick, choose `ticklabelindex` -1. This is useful for date","axes with `ticklabelmode` *period* if you want to label the period that ends with each","major tick instead of the period that begins there."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:df(),tickwidth:hf(),tickcolor:Bf,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},labelalias:{valType:"any",dflt:!1,editType:"ticks",description:["Replacement text for specific tick or hover labels.","For example using {US: 'USA', CA: 'Canada'} changes US to USA","and CA to Canada. The labels we would have shown must match","the keys exactly, after adding any tickprefix or ticksuffix.","For negative numbers the minus sign symbol used (U+2212) is wider than the regular ascii dash.","That means you need to use −1 instead of -1.","labelalias can be used with any axis type, and both keys (if needed)","and values (if desired) can include html-like tags or MathJax."].join(" ")},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:jF({},PF,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:OF({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks",description:["When `tickangle` is set to *auto*, it will be set to the first","angle in this array that is large enough to prevent label","overlap."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:$F("tick label")},tickformatstops:qF("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:$F("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:KF.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:Qf,gridcolor:pf,gridwidth:Ff(),griddash:ff,zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:KF.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:KF.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",ef.idRegex.x.toString(),ef.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",ef.idRegex.x.toString(),ef.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},minor:{tickmode:af,nticks:of("minor"),tick0:lf,dtick:cf,tickvals:gf,ticks:uf,ticklen:df("minor"),tickwidth:hf("minor"),tickcolor:Bf,gridcolor:pf,gridwidth:Ff("minor"),griddash:ff,showgrid:Qf,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},autoshift:{valType:"boolean",dflt:!1,editType:"plot",description:["Automatically reposition the axis to avoid","overlap with other axes with the same `overlaying` value.","This repositioning will account for any `shift` amount applied to other","axes on the same side with `autoshift` is set to true.","Only has an effect if `anchor` is set to *free*."].join(" ")},shift:{valType:"number",editType:"plot",description:["Moves the axis a given number of pixels from where it would have been otherwise.","Accepts both positive and negative values, which will shift the axis either right","or left, respectively.","If `autoshift` is set to true, then this defaults to a padding of -3 if `side` is set to *left*.","and defaults to +3 if `side` is set to *right*. Defaults to 0 if `autoshift` is set to false.","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean, geometric mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc"},Uf=If,bf=_g(),yf=Mg.extendFlat,mf=(0,wd.overrideAll)({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",description:["Sets the x position with respect to `xref` of the color bar (in plot fraction).","When `xref` is *paper*, defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*.","When `xref` is *container*, defaults to *1* when `orientation` is *v* and","0.5 when `orientation` is *h*.","Must be between *0* and *1* if `xref` is *container*","and between *-2* and *3* if `xref` is *paper*."].join(" ")},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",description:["Sets the y position with respect to `yref` of the color bar (in plot fraction).","When `yref` is *paper*, defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*.","When `yref` is *container*, defaults to 0.5 when `orientation` is *v* and","1 when `orientation` is *h*.","Must be between *0* and *1* if `yref` is *container*","and between *-2* and *3* if `yref` is *paper*."].join(" ")},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:Uf.linecolor,outlinewidth:Uf.linewidth,bordercolor:Uf.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:Uf.minor.tickmode,nticks:Uf.nticks,tick0:Uf.tick0,dtick:Uf.dtick,tickvals:Uf.tickvals,ticktext:Uf.ticktext,ticks:yf({},Uf.ticks,{dflt:""}),ticklabeloverflow:yf({},Uf.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:Uf.ticklen,tickwidth:Uf.tickwidth,tickcolor:Uf.tickcolor,ticklabelstep:Uf.ticklabelstep,showticklabels:Uf.showticklabels,labelalias:Uf.labelalias,tickfont:bf({description:"Sets the color bar's tick label font"}),tickangle:Uf.tickangle,tickformat:Uf.tickformat,tickformatstops:Uf.tickformatstops,tickprefix:Uf.tickprefix,showtickprefix:Uf.showtickprefix,ticksuffix:Uf.ticksuffix,showticksuffix:Uf.showticksuffix,separatethousands:Uf.separatethousands,exponentformat:Uf.exponentformat,minexponent:Uf.minexponent,showexponent:Uf.showexponent,title:{text:{valType:"string",description:"Sets the title of the color bar."},font:bf({description:"Sets this color bar's title font."}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*."].join(" ")}}},"colorbars","from-root"),xf=mf,vf=yu.counter,Cf=cu.scales,Af=mh(Cf);function Lf(t){return"`"+t+"`"}var Gf=function(t,e){t=t||"";var i,n,r=(e=e||{}).cLetter||"c",a="onlyIfNumerical"in e?e.onlyIfNumerical:Boolean(t),s="noScale"in e?e.noScale:"marker.line"===t,o="showScaleDflt"in e?e.showScaleDflt:"z"===r,l="string"==typeof e.colorscaleDflt?Cf[e.colorscaleDflt]:null,c=e.editTypeOverride||"",g=t?t+".":"";"colorAttr"in e?(i=e.colorAttr,n=e.colorAttr):n="in "+Lf(g+(i={z:"z",c:"color"}[r]));var u=a?" Has an effect only if "+n+" is set to a numerical array.":"",d=r+"auto",h=r+"min",B=r+"max",p=r+"mid",F=Lf(g+d),f=Lf(g+h),Q=Lf(g+B),I=f+" and "+Q,U={};U[h]=U[B]=void 0;var b={};b[d]=!1;var y={};return"color"===i&&(y.color={valType:"color",arrayOk:!0,editType:c||"style",description:["Sets the",t,"color.","It accepts either a specific color","or an array of numbers that are mapped to the colorscale","relative to the max and min values of the array or relative to",I,"if set."].join(" ")},e.anim&&(y.color.anim=!0)),y[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:U,description:["Determines whether or not the color domain is computed","with respect to the input data (here "+n+") or the bounds set in",I+u,"Defaults to `false` when",I,"are set by the user."].join(" ")},y[h]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:b,description:["Sets the lower bound of the color domain."+u,"Value should have the same units as",n,"and if set,",Q,"must be set as well."].join(" ")},y[B]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:b,description:["Sets the upper bound of the color domain."+u,"Value should have the same units as",n,"and if set,",f,"must be set as well."].join(" ")},y[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:U,description:["Sets the mid-point of the color domain by scaling",f,"and/or",Q,"to be equidistant to this point."+u,"Value should have the same units as",n+".","Has no effect when",F,"is `false`."].join(" ")},y.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale."+u,"The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in color space,","use",I+".","Alternatively, `colorscale` may be a palette name string","of the following list: "+Af+"."].join(" ")},y.autocolorscale={valType:"boolean",dflt:!1!==e.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)","or the palette determined by",Lf(g+"colorscale")+"."+u,"In case `colorscale` is unspecified or `autocolorscale` is true, the default","palette will be chosen according to whether numbers in the `color` array are","all positive, all negative or mixed."].join(" ")},y.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true."+u,"If true,",f,"will correspond to the last color","in the array and",Q,"will correspond to the first color."].join(" ")},s||(y.showscale={valType:"boolean",dflt:o,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace."+u].join(" ")},y.colorbar=xf),e.noColorAxis||(y.coloraxis={valType:"subplotid",regex:vf("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),y},Rf=Mg.extendFlat,Sf=Gf,wf=cu.scales,Vf="Note that `autocolorscale` must be true for this attribute to work.",Ef={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:wf.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",Vf].join(" ")},sequentialminus:{valType:"colorscale",dflt:wf.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",Vf].join(" ")},diverging:{valType:"colorscale",dflt:wf.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",Vf].join(" ")}},coloraxis:Rf({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},Sf("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))},Zf=_B,Nf=function(t){return Zf.isPlainObject(t.colorbar)},Df={},Xf=$c,Hf=_B,Wf=tg,kf=Wf.ONEDAY,Mf=Wf.ONEWEEK;Df.dtick=function(t,e){var i="log"===e,n="date"===e,r="category"===e,a=n?kf:1;if(!t)return a;if(Xf(t))return(t=Number(t))<=0?a:r?Math.max(1,Math.round(t)):n?Math.max(.1,t):t;if("string"!=typeof t||!n&&!i)return a;var s=t.charAt(0),o=t.substr(1);return(o=Xf(o)?Number(o):0)<=0||!(n&&"M"===s&&o===Math.round(o)||i&&"L"===s||i&&"D"===s&&(1===o||2===o))?a:t},Df.tick0=function(t,e,i,n){return"date"===e?Hf.cleanDate(t,Hf.dateTick0(i,n%Mf==0?1:0)):"D1"!==n&&"D2"!==n?Xf(t)?Number(t):0:void 0};var Tf=Df,Yf=_B.isArrayOrTypedArray,Jf=eg.isTypedArraySpec,_f=eg.decodeTypedArraySpec,zf=function(t,e,i,n,r){r||(r={});var a=r.isMinor,s=a?t.minor||{}:t,o=a?e.minor:e,l=a?"minor.":"";function c(t){var e=s[t];return Jf(e)&&(e=_f(e)),void 0!==e?e:(o._template||{})[t]}var g=c("tick0"),u=c("dtick"),d=c("tickvals"),h=i(l+"tickmode",Yf(d)?"array":u?"linear":"auto");if("auto"===h||"sync"===h)i(l+"nticks");else if("linear"===h){var B=o.dtick=Tf.dtick(u,n);o.tick0=Tf.tick0(g,n,e.calendar,B)}else if("multicategory"!==n){void 0===i(l+"tickvals")?o.tickmode="auto":a||i("ticktext")}},Of=_B,Kf=If,Pf=function(t,e,i,n){var r=n.isMinor,a=r?t.minor||{}:t,s=r?e.minor:e,o=r?Kf.minor:Kf,l=r?"minor.":"",c=Of.coerce2(a,s,o,"ticklen",r?.6*(e.ticklen||5):void 0),g=Of.coerce2(a,s,o,"tickwidth",r?e.tickwidth||1:void 0),u=Of.coerce2(a,s,o,"tickcolor",(r?e.tickcolor:void 0)||s.color);i(l+"ticks",!r&&n.outerTicks||c||g||u?"outside":"")||(delete s.ticklen,delete s.tickwidth,delete s.tickcolor)},jf=function(t){var e=["showexponent","showtickprefix","showticksuffix"].filter((function(e){return void 0!==t[e]}));if(e.every((function(i){return t[i]===t[e[0]]}))||1===e.length)return t[e[0]]},qf=_B,$f=Ap,tQ=function(t,e,i){var n,r,a=i.name,s=i.inclusionAttr||"visible",o=e[a],l=qf.isArrayOrTypedArray(t[a])?t[a]:[],c=e[a]=[],g=$f.arrayTemplater(e,a,s);for(n=0;n<l.length;n++){var u=l[n];qf.isPlainObject(u)?r=g.newItem(u):(r=g.newItem({}))[s]=!1,r._index=n,!1!==r[s]&&i.handleItemDefaults(u,r,e,i),c.push(r)}var d=g.defaultItems();for(n=0;n<d.length;n++)(r=d[n])._index=c.length,i.handleItemDefaults({},r,e,i,{}),c.push(r);if(qf.isArrayOrTypedArray(o)){var h=Math.min(o.length,c.length);for(n=0;n<h;n++)qf.relinkPrivateKeys(c[n],o[n])}return c},eQ=_B,iQ=Uu.contrast,nQ=If,rQ=jf,aQ=tQ,sQ=function(t,e,i,n,r){r||(r={});var a=i("labelalias");eQ.isPlainObject(a)||delete e.labelalias;var s=rQ(t);if(i("showticklabels")){r.noTicklabelshift||i("ticklabelshift"),r.noTicklabelstandoff||i("ticklabelstandoff");var o=r.font||{},l=e.color,c=-1!==(e.ticklabelposition||"").indexOf("inside")?iQ(r.bgColor):l&&l!==nQ.color.dflt?l:o.color;if(eQ.coerceFont(i,"tickfont",o,{overrideDflt:{color:c}}),r.noTicklabelstep||"multicategory"===n||"log"===n||i("ticklabelstep"),!r.noAng){var g=i("tickangle");r.noAutotickangles||"auto"!==g||i("autotickangles")}if("category"!==n){var u=i("tickformat");aQ(t,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:oQ}),e.tickformatstops.length||delete e.tickformatstops,r.noExp||u||"date"===n||(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}};function oQ(t,e){function i(i,n){return eQ.coerce(t,e,nQ.tickformatstops,i,n)}i("enabled")&&(i("dtickrange"),i("value"))}var lQ=jf,cQ=function(t,e,i,n,r){r||(r={});var a=r.tickSuffixDflt,s=lQ(t);i("tickprefix")&&i("showtickprefix",s),i("ticksuffix",a)&&i("showticksuffix",s)},gQ=_B,uQ=Ap,dQ=zf,hQ=Pf,BQ=sQ,pQ=cQ,FQ=mf,fQ=function(t,e,i){var n=uQ.newContainer(e,"colorbar"),r=t.colorbar||{};function a(t,e){return gQ.coerce(r,n,FQ,t,e)}var s=i.margin||{t:0,b:0,l:0,r:0},o=i.width-s.l-s.r,l=i.height-s.t-s.b,c="v"===a("orientation"),g=a("thicknessmode");a("thickness","fraction"===g?30/(c?o:l):30);var u=a("lenmode");a("len","fraction"===u?1:c?l:o);var d,h,B,p="paper"===a("yref"),F="paper"===a("xref"),f="left";c?(B="middle",f=F?"left":"right",d=F?1.02:1,h=.5):(B=p?"bottom":"top",f="center",d=.5,h=p?1.02:1),gQ.coerce(r,n,{x:{valType:"number",min:F?-2:0,max:F?3:1,dflt:d}},"x"),gQ.coerce(r,n,{y:{valType:"number",min:p?-2:0,max:p?3:1,dflt:h}},"y"),a("xanchor",f),a("xpad"),a("yanchor",B),a("ypad"),gQ.noneOrAll(r,n,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");var Q=gQ.coerce(r,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");a("ticklabeloverflow",-1!==Q.indexOf("inside")?"hide past domain":"hide past div"),dQ(r,n,a,"linear");var I=i.font,U={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,font:I};-1!==Q.indexOf("inside")&&(U.bgColor="black"),pQ(r,n,a,"linear",U),BQ(r,n,a,"linear",U),hQ(r,n,a,"linear"),a("title.text",i._dfltTitle.colorbar);var b=n.showticklabels?n.tickfont:I,y=gQ.extendFlat({},I,{family:b.family,size:gQ.bigFont(b.size)});gQ.coerceFont(a,"title.font",y),a("title.side",c?"top":"right")},QQ=$c,IQ=_B,UQ=Nf,bQ=fQ,yQ=cu.isValid,mQ=Nu.traceIs;function xQ(t,e){var i=e.slice(0,e.length-1);return e?IQ.nestedProperty(t,i).get()||{}:t}var vQ=function t(e,i,n,r,a){var s=a.prefix,o=a.cLetter,l="_module"in i,c=xQ(e,s),g=xQ(i,s),u=xQ(i._template||{},s)||{},d=function(){return delete e.coloraxis,delete i.coloraxis,t(e,i,n,r,a)};if(l){var h=n._colorAxes||{},B=r(s+"coloraxis");if(B){var p=mQ(i,"contour")&&IQ.nestedProperty(i,"contours.coloring").get()||"heatmap",F=h[B];return void(F?(F[2].push(d),F[0]!==p&&(F[0]=!1,IQ.warn(["Ignoring coloraxis:",B,"setting","as it is linked to incompatible colorscales."].join(" ")))):h[B]=[p,i,[d]])}}var f=c[o+"min"],Q=c[o+"max"],I=QQ(f)&&QQ(Q)&&f<Q;r(s+o+"auto",!I)?r(s+o+"mid"):(r(s+o+"min"),r(s+o+"max"));var U,b,y=c.colorscale,m=u.colorscale;(void 0!==y&&(U=!yQ(y)),void 0!==m&&(U=!yQ(m)),r(s+"autocolorscale",U),r(s+"colorscale"),r(s+"reversescale"),"marker.line."!==s)&&(s&&l&&(b=UQ(c)),r(s+"showscale",b)&&(s&&u&&(g._template=u),bQ(c,g,n)))},CQ=_B,AQ=Ap,LQ=Ef,GQ=vQ,RQ=_B,SQ=kF.hasColorscale,wQ=kF.extractOpts,VQ=$c,EQ=_B,ZQ=kF.extractOpts,NQ=function(t,e,i){var n,r=t._fullLayout,a=i.vals,s=i.containerStr,o=s?EQ.nestedProperty(e,s).get():e,l=ZQ(o),c=!1!==l.auto,g=l.min,u=l.max,d=l.mid,h=function(){return EQ.aggNums(Math.min,null,a)},B=function(){return EQ.aggNums(Math.max,null,a)};(void 0===g?g=h():c&&(g=o._colorAx&&VQ(g)?Math.min(g,h()):h()),void 0===u?u=B():c&&(u=o._colorAx&&VQ(u)?Math.max(u,B()):B()),c&&void 0!==d&&(u-d>d-g?g=d-(u-d):u-d<d-g&&(u=d+(d-g))),g===u&&(g-=.5,u+=.5),l._sync("min",g),l._sync("max",u),l.autocolorscale)&&(n=g*u<0?r.colorscale.diverging:g>=0?r.colorscale.sequential:r.colorscale.sequentialminus,l._sync("colorscale",n))},DQ={moduleType:"component",name:"colorscale",attributes:Gf,layoutAttributes:Ef,supplyLayoutDefaults:function(t,e){function i(i,n){return CQ.coerce(t,e,LQ,i,n)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var n,r,a=e._colorAxes;function s(t,e){return CQ.coerce(n,r,LQ.coloraxis,t,e)}for(var o in a){var l=a[o];if(l[0])n=t[o]||{},(r=AQ.newContainer(e,o,"coloraxis"))._name=o,GQ(n,r,e,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete e._colorAxes[o]}}},handleDefaults:vQ,crossTraceDefaults:function(t,e){function i(t,e){var i=t["_"+e];void 0!==i&&(t[e]=i)}function n(t,n){var r=n.container?RQ.nestedProperty(t,n.container).get():t;if(r)if(r.coloraxis)r._colorAx=e[r.coloraxis];else{var a=wQ(r),s=a.auto;(s||void 0===a.min)&&i(r,n.min),(s||void 0===a.max)&&i(r,n.max),a.autocolorscale&&i(r,"colorscale")}}for(var r=0;r<t.length;r++){var a=t[r],s=a._module.colorbar;if(s)if(Array.isArray(s))for(var o=0;o<s.length;o++)n(a,s[o]);else n(a,s);SQ(a,"marker.line")&&n(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var l in e._colorAxes)n(e[l],{min:"cmin",max:"cmax"})},calc:NQ,scales:cu.scales,defaultScale:cu.defaultScale,getScale:cu.get,isValidScale:cu.isValid,hasColorscale:kF.hasColorscale,extractOpts:kF.extractOpts,extractScale:kF.extractScale,flipScale:kF.flipScale,makeColorScaleFunc:kF.makeColorScaleFunc,makeColorScaleFuncFromTrace:kF.makeColorScaleFuncFromTrace},XQ=_B,HQ=eg.isTypedArraySpec,WQ={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){var e=t.marker;return XQ.isPlainObject(e)&&(XQ.isArrayOrTypedArray(e.size)||HQ(e.size))}},kQ=$c,MQ=function(t,e){e||(e=2);var i=t.marker,n=i.sizeref||1,r=i.sizemin||0,a="area"===i.sizemode?function(t){return Math.sqrt(t/n)}:function(t){return t/n};return function(t){var i=a(t/e);return kQ(i)&&i>0?Math.max(i,r):0}},TQ={};!function(t){var e=_B;t.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},t.isTraceInSubplots=function(e,i){if("splom"===e.type){for(var n=e.xaxes||[],r=e.yaxes||[],a=0;a<n.length;a++)for(var s=0;s<r.length;s++)if(-1!==i.indexOf(n[a]+r[s]))return!0;return!1}return-1!==i.indexOf(t.getSubplot(e))},t.flat=function(t,e){for(var i=new Array(t.length),n=0;n<t.length;n++)i[n]=e;return i},t.p2c=function(t,e){for(var i=new Array(t.length),n=0;n<t.length;n++)i[n]=t[n].p2c(e);return i},t.getDistanceFunction=function(e,i,n,r){return"closest"===e?r||t.quadrature(i,n):"x"===e.charAt(0)?i:n},t.getClosest=function(t,e,i){if(!1!==i.index)i.index>=0&&i.index<t.length?i.distance=0:i.index=!1;else for(var n=1/0,r=t.length,a=0;a<r;a++)(n=e(t[a]))<=i.distance&&(i.index=a,i.distance=n);return i},t.inbox=function(t,e,i){return t*e<0||0===t?i:1/0},t.quadrature=function(t,e){return function(i){var n=t(i),r=e(i);return Math.sqrt(n*n+r*r)}},t.makeEventData=function(e,i,n){var r="index"in e?e.index:e.pointNumber,a={data:i._input,fullData:i,curveNumber:i.index,pointNumber:r};if(i._indexToPoints){var s=i._indexToPoints[r];1===s.length?a.pointIndex=s[0]:a.pointIndices=s}else a.pointIndex=r;return i._module.eventData?a=i._module.eventData(a,e,i,n,r):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),void 0!==e.zLabelVal&&(a.z=e.zLabelVal)),t.appendArrayPointValue(a,i,r),a},t.appendArrayPointValue=function(t,i,a){var s=i._arrayAttrs;if(s)for(var o=0;o<s.length;o++){var l=s[o],c=n(l);if(void 0===t[c]){var g=r(e.nestedProperty(i,l).get(),a);void 0!==g&&(t[c]=g)}}},t.appendArrayMultiPointValues=function(t,i,a){var s=i._arrayAttrs;if(s)for(var o=0;o<s.length;o++){var l=s[o],c=n(l);if(void 0===t[c]){for(var g=e.nestedProperty(i,l).get(),u=new Array(a.length),d=0;d<a.length;d++)u[d]=r(g,a[d]);t[c]=u}}};var i={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function n(t){return i[t]||t}function r(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var a={x:!0,y:!0},s={"x unified":!0,"y unified":!0};t.isUnifiedHover=function(t){return"string"==typeof t&&!!s[t]},t.isXYhover=function(t){return"string"==typeof t&&!!a[t]}}(TQ);var YQ=function(t){var e=[];return t.replace(_Q,(function(t,i,n){var r=i.toLowerCase();for(n=function(t){var e=t.match(KQ);return e?e.map(Number):[]}(n),"m"==r&&n.length>2&&(e.push([i].concat(n.splice(0,2))),r="l",i="m"==i?"l":"L");;){if(n.length==JQ[r])return n.unshift(i),e.push(n);if(n.length<JQ[r])throw new Error("malformed path data");e.push([i].concat(n.splice(0,JQ[r])))}})),e},JQ={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},_Q=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var zQ,OQ,KQ=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;var PQ=Js,jQ=_B,qQ=jQ.numberFormat,$Q=$c,tI=kg,eI=Nu,iI=Uu,nI=DQ,rI=jQ.strTranslate,aI=xF,sI=vF,oI=CF.LINE_SPACING,lI=bu.DESELECTDIM,cI=WQ,gI=MQ,uI=TQ.appendArrayPointValue,dI=AF.exports={};function hI(t){return"none"===t?void 0:t}dI.font=function(t,e){var i=e.variant,n=e.style,r=e.weight,a=e.color,s=e.size,o=e.family,l=e.shadow,c=e.lineposition,g=e.textcase;o&&t.style("font-family",o),s+1&&t.style("font-size",s+"px"),a&&t.call(iI.fill,a),r&&t.style("font-weight",r),n&&t.style("font-style",n),i&&t.style("font-variant",i),g&&t.style("text-transform",hI(function(t){return BI[t]}(g))),l&&t.style("text-shadow","auto"===l?aI.makeTextShadow(iI.contrast(a)):hI(l)),c&&t.style("text-decoration-line",hI(function(t){return t.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}(c)))};var BI={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function pI(t,e,i,n){var r=e.fillpattern,a=e.fillgradient,s=r&&dI.getPatternAttr(r.shape,0,"");if(s){var o=dI.getPatternAttr(r.bgcolor,0,null),l=dI.getPatternAttr(r.fgcolor,0,null),c=r.fgopacity,g=dI.getPatternAttr(r.size,0,8),u=dI.getPatternAttr(r.solidity,0,.3),d=e.uid;dI.pattern(t,"point",i,d,s,g,u,void 0,r.fillmode,o,l,c)}else if(a&&"none"!==a.type){var h,B,p=a.type,F="scatterfill-"+e.uid;if(n&&(F="legendfill-"+e.uid),n||void 0===a.start&&void 0===a.stop)"horizontal"===p&&(p+="reversed"),t.call(dI.gradient,i,F,p,a.colorscale,"fill");else"horizontal"===p?(h={x:a.start,y:0},B={x:a.stop,y:0}):"vertical"===p&&(h={x:0,y:a.start},B={x:0,y:a.stop}),h.x=e._xA.c2p(void 0===h.x?e._extremes.x.min[0].val:h.x,!0),h.y=e._yA.c2p(void 0===h.y?e._extremes.y.min[0].val:h.y,!0),B.x=e._xA.c2p(void 0===B.x?e._extremes.x.max[0].val:B.x,!0),B.y=e._yA.c2p(void 0===B.y?e._extremes.y.max[0].val:B.y,!0),t.call(bI,i,F,"linear",a.colorscale,"fill",h,B,!0,!1)}else e.fillcolor&&t.call(iI.fill,e.fillcolor)}dI.setPosition=function(t,e,i){t.attr("x",e).attr("y",i)},dI.setSize=function(t,e,i){t.attr("width",e).attr("height",i)},dI.setRect=function(t,e,i,n,r){t.call(dI.setPosition,e,i).call(dI.setSize,n,r)},dI.translatePoint=function(t,e,i,n){var r=i.c2p(t.x),a=n.c2p(t.y);return!!($Q(r)&&$Q(a)&&e.node())&&("text"===e.node().nodeName?e.attr("x",r).attr("y",a):e.attr("transform",rI(r,a)),!0)},dI.translatePoints=function(t,e,i){t.each((function(t){var n=PQ.select(this);dI.translatePoint(t,n,e,i)}))},dI.hideOutsideRangePoint=function(t,e,i,n,r,a){e.attr("display",i.isPtWithinRange(t,r)&&n.isPtWithinRange(t,a)?null:"none")},dI.hideOutsideRangePoints=function(t,e){if(e._hasClipOnAxisFalse){var i=e.xaxis,n=e.yaxis;t.each((function(e){var r=e[0].trace,a=r.xcalendar,s=r.ycalendar,o=eI.traceIs(r,"bar-like")?".bartext":".point,.textpoint";t.selectAll(o).each((function(t){dI.hideOutsideRangePoint(t,PQ.select(this),i,n,a,s)}))}))}},dI.crispRound=function(t,e,i){return e&&$Q(e)?t._context.staticPlot?e:e<1?1:Math.round(e):i||0},dI.singleLineStyle=function(t,e,i,n,r){e.style("fill","none");var a=(((t||[])[0]||{}).trace||{}).line||{},s=i||a.width||0,o=r||a.dash||"";iI.stroke(e,n||a.color),dI.dashLine(e,o,s)},dI.lineGroupStyle=function(t,e,i,n){t.style("fill","none").each((function(t){var r=(((t||[])[0]||{}).trace||{}).line||{},a=e||r.width||0,s=n||r.dash||"";PQ.select(this).call(iI.stroke,i||r.color).call(dI.dashLine,s,a)}))},dI.dashLine=function(t,e,i){i=+i||0,e=dI.dashStyle(e,i),t.style({"stroke-dasharray":e,"stroke-width":i+"px"})},dI.dashStyle=function(t,e){e=+e||1;var i=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=i+"px,"+i+"px":"dash"===t?t=3*i+"px,"+3*i+"px":"longdash"===t?t=5*i+"px,"+5*i+"px":"dashdot"===t?t=3*i+"px,"+i+"px,"+i+"px,"+i+"px":"longdashdot"===t&&(t=5*i+"px,"+2*i+"px,"+i+"px,"+2*i+"px"),t},dI.singleFillStyle=function(t,e){var i=PQ.select(t.node());pI(t,((i.data()[0]||[])[0]||{}).trace||{},e,!1)},dI.fillGroupStyle=function(t,e,i){t.style("stroke-width",0).each((function(t){var n=PQ.select(this);t[0].trace&&pI(n,t[0].trace,e,i)}))};var FI=function(){if(OQ)return zQ;OQ=1;var t,e,i,n,r=YQ,a=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},s="M0,0Z",o=Math.sqrt(2),l=Math.sqrt(3),c=Math.PI,g=Math.cos,u=Math.sin;function d(t){return null===t}function h(a,s,o){if(!(a&&a%360!=0||s))return o;if(i===a&&n===s&&t===o)return e;function l(t,e){var i=g(t),n=u(t),r=e[0],a=e[1]+(s||0);return[r*i-a*n,r*n+a*i]}i=a,n=s,t=o;for(var d=a/180*c,h=0,B=0,p=r(o),F="",f=0;f<p.length;f++){var Q=p[f],I=Q[0],U=h,b=B;if("M"===I||"L"===I)h=+Q[1],B=+Q[2];else if("m"===I||"l"===I)h+=+Q[1],B+=+Q[2];else if("H"===I)h=+Q[1];else if("h"===I)h+=+Q[1];else if("V"===I)B=+Q[1];else if("v"===I)B+=+Q[1];else if("A"===I){h=+Q[1],B=+Q[2];var y=l(d,[+Q[6],+Q[7]]);Q[6]=y[0],Q[7]=y[1],Q[3]=+Q[3]+a}"H"!==I&&"V"!==I||(I="L"),"h"!==I&&"v"!==I||(I="l"),"m"!==I&&"l"!==I||(h-=U,B-=b);var m=l(d,[h,B]);"H"!==I&&"V"!==I||(I="L"),"M"!==I&&"L"!==I&&"m"!==I&&"l"!==I||(Q[1]=m[0],Q[2]=m[1]),Q[0]=I,F+=Q[0]+Q.slice(1).join(",")}return e=F,F}return zQ={circle:{n:0,f:function(t,e,i){if(d(e))return s;var n=a(t,2),r="M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z";return i?h(e,i,r):r}},square:{n:1,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")}},diamond:{n:2,f:function(t,e,i){if(d(e))return s;var n=a(1.3*t,2);return h(e,i,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z")}},cross:{n:3,f:function(t,e,i){if(d(e))return s;var n=a(.4*t,2),r=a(1.2*t,2);return h(e,i,"M"+r+","+n+"H"+n+"V"+r+"H-"+n+"V"+n+"H-"+r+"V-"+n+"H-"+n+"V-"+r+"H"+n+"V-"+n+"H"+r+"Z")}},x:{n:4,f:function(t,e,i){if(d(e))return s;var n=a(.8*t/o,2),r="l"+n+","+n,l="l"+n+",-"+n,c="l-"+n+",-"+n,g="l-"+n+","+n;return h(e,i,"M0,"+n+r+l+c+l+c+g+c+g+r+g+r+"Z")}},"triangle-up":{n:5,f:function(t,e,i){if(d(e))return s;var n=a(2*t/l,2);return h(e,i,"M-"+n+","+a(t/2,2)+"H"+n+"L0,-"+a(t,2)+"Z")}},"triangle-down":{n:6,f:function(t,e,i){if(d(e))return s;var n=a(2*t/l,2);return h(e,i,"M-"+n+",-"+a(t/2,2)+"H"+n+"L0,"+a(t,2)+"Z")}},"triangle-left":{n:7,f:function(t,e,i){if(d(e))return s;var n=a(2*t/l,2);return h(e,i,"M"+a(t/2,2)+",-"+n+"V"+n+"L-"+a(t,2)+",0Z")}},"triangle-right":{n:8,f:function(t,e,i){if(d(e))return s;var n=a(2*t/l,2);return h(e,i,"M-"+a(t/2,2)+",-"+n+"V"+n+"L"+a(t,2)+",0Z")}},"triangle-ne":{n:9,f:function(t,e,i){if(d(e))return s;var n=a(.6*t,2),r=a(1.2*t,2);return h(e,i,"M-"+r+",-"+n+"H"+n+"V"+r+"Z")}},"triangle-se":{n:10,f:function(t,e,i){if(d(e))return s;var n=a(.6*t,2),r=a(1.2*t,2);return h(e,i,"M"+n+",-"+r+"V"+n+"H-"+r+"Z")}},"triangle-sw":{n:11,f:function(t,e,i){if(d(e))return s;var n=a(.6*t,2),r=a(1.2*t,2);return h(e,i,"M"+r+","+n+"H-"+n+"V-"+r+"Z")}},"triangle-nw":{n:12,f:function(t,e,i){if(d(e))return s;var n=a(.6*t,2),r=a(1.2*t,2);return h(e,i,"M-"+n+","+r+"V-"+n+"H"+r+"Z")}},pentagon:{n:13,f:function(t,e,i){if(d(e))return s;var n=a(.951*t,2),r=a(.588*t,2),o=a(-t,2),l=a(-.309*t,2);return h(e,i,"M"+n+","+l+"L"+r+","+a(.809*t,2)+"H-"+r+"L-"+n+","+l+"L0,"+o+"Z")}},hexagon:{n:14,f:function(t,e,i){if(d(e))return s;var n=a(t,2),r=a(t/2,2),o=a(t*l/2,2);return h(e,i,"M"+o+",-"+r+"V"+r+"L0,"+n+"L-"+o+","+r+"V-"+r+"L0,-"+n+"Z")}},hexagon2:{n:15,f:function(t,e,i){if(d(e))return s;var n=a(t,2),r=a(t/2,2),o=a(t*l/2,2);return h(e,i,"M-"+r+","+o+"H"+r+"L"+n+",0L"+r+",-"+o+"H-"+r+"L-"+n+",0Z")}},octagon:{n:16,f:function(t,e,i){if(d(e))return s;var n=a(.924*t,2),r=a(.383*t,2);return h(e,i,"M-"+r+",-"+n+"H"+r+"L"+n+",-"+r+"V"+r+"L"+r+","+n+"H-"+r+"L-"+n+","+r+"V-"+r+"Z")}},star:{n:17,f:function(t,e,i){if(d(e))return s;var n=1.4*t,r=a(.225*n,2),o=a(.951*n,2),l=a(.363*n,2),c=a(.588*n,2),g=a(-n,2),u=a(-.309*n,2),B=a(.118*n,2),p=a(.809*n,2);return h(e,i,"M"+r+","+u+"H"+o+"L"+l+","+B+"L"+c+","+p+"L0,"+a(.382*n,2)+"L-"+c+","+p+"L-"+l+","+B+"L-"+o+","+u+"H-"+r+"L0,"+g+"Z")}},hexagram:{n:18,f:function(t,e,i){if(d(e))return s;var n=a(.66*t,2),r=a(.38*t,2),o=a(.76*t,2);return h(e,i,"M-"+o+",0l-"+r+",-"+n+"h"+o+"l"+r+",-"+n+"l"+r+","+n+"h"+o+"l-"+r+","+n+"l"+r+","+n+"h-"+o+"l-"+r+","+n+"l-"+r+",-"+n+"h-"+o+"Z")}},"star-triangle-up":{n:19,f:function(t,e,i){if(d(e))return s;var n=a(t*l*.8,2),r=a(.8*t,2),o=a(1.6*t,2),c=a(4*t,2),g="A "+c+","+c+" 0 0 1 ";return h(e,i,"M-"+n+","+r+g+n+","+r+g+"0,-"+o+g+"-"+n+","+r+"Z")}},"star-triangle-down":{n:20,f:function(t,e,i){if(d(e))return s;var n=a(t*l*.8,2),r=a(.8*t,2),o=a(1.6*t,2),c=a(4*t,2),g="A "+c+","+c+" 0 0 1 ";return h(e,i,"M"+n+",-"+r+g+"-"+n+",-"+r+g+"0,"+o+g+n+",-"+r+"Z")}},"star-square":{n:21,f:function(t,e,i){if(d(e))return s;var n=a(1.1*t,2),r=a(2*t,2),o="A "+r+","+r+" 0 0 1 ";return h(e,i,"M-"+n+",-"+n+o+"-"+n+","+n+o+n+","+n+o+n+",-"+n+o+"-"+n+",-"+n+"Z")}},"star-diamond":{n:22,f:function(t,e,i){if(d(e))return s;var n=a(1.4*t,2),r=a(1.9*t,2),o="A "+r+","+r+" 0 0 1 ";return h(e,i,"M-"+n+",0"+o+"0,"+n+o+n+",0"+o+"0,-"+n+o+"-"+n+",0Z")}},"diamond-tall":{n:23,f:function(t,e,i){if(d(e))return s;var n=a(.7*t,2),r=a(1.4*t,2);return h(e,i,"M0,"+r+"L"+n+",0L0,-"+r+"L-"+n+",0Z")}},"diamond-wide":{n:24,f:function(t,e,i){if(d(e))return s;var n=a(1.4*t,2),r=a(.7*t,2);return h(e,i,"M0,"+r+"L"+n+",0L0,-"+r+"L-"+n+",0Z")}},hourglass:{n:25,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M"+n+","+n+"H-"+n+"L"+n+",-"+n+"H-"+n+"Z")},noDot:!0},bowtie:{n:26,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M"+n+","+n+"V-"+n+"L-"+n+","+n+"V-"+n+"Z")},noDot:!0},"circle-cross":{n:27,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t,e,i){if(d(e))return s;var n=a(t,2),r=a(t/o,2);return h(e,i,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t,e,i){if(d(e))return s;var n=a(1.3*t,2);return h(e,i,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM0,-"+n+"V"+n+"M-"+n+",0H"+n)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t,e,i){if(d(e))return s;var n=a(1.3*t,2),r=a(.65*t,2);return h(e,i,"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t,e,i){if(d(e))return s;var n=a(1.4*t,2);return h(e,i,"M0,"+n+"V-"+n+"M"+n+",0H-"+n)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t,e,i){if(d(e))return s;var n=a(1.2*t,2),r=a(.85*t,2);return h(e,i,"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t,e,i){if(d(e))return s;var n=a(t/2,2),r=a(t,2);return h(e,i,"M"+n+","+r+"V-"+r+"M"+(n-r)+",-"+r+"V"+r+"M"+r+","+n+"H-"+r+"M-"+r+","+(n-r)+"H"+r)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t,e,i){if(d(e))return s;var n=a(1.2*t,2),r=a(1.6*t,2),o=a(.8*t,2);return h(e,i,"M-"+n+","+o+"L0,0M"+n+","+o+"L0,0M0,-"+r+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t,e,i){if(d(e))return s;var n=a(1.2*t,2),r=a(1.6*t,2),o=a(.8*t,2);return h(e,i,"M-"+n+",-"+o+"L0,0M"+n+",-"+o+"L0,0M0,"+r+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t,e,i){if(d(e))return s;var n=a(1.2*t,2),r=a(1.6*t,2),o=a(.8*t,2);return h(e,i,"M"+o+","+n+"L0,0M"+o+",-"+n+"L0,0M-"+r+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t,e,i){if(d(e))return s;var n=a(1.2*t,2),r=a(1.6*t,2),o=a(.8*t,2);return h(e,i,"M-"+o+","+n+"L0,0M-"+o+",-"+n+"L0,0M"+r+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t,e,i){if(d(e))return s;var n=a(1.4*t,2);return h(e,i,"M"+n+",0H-"+n)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t,e,i){if(d(e))return s;var n=a(1.4*t,2);return h(e,i,"M0,"+n+"V-"+n)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M"+n+",-"+n+"L-"+n+","+n)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M"+n+","+n+"L-"+n+",-"+n)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M0,0L-"+n+","+a(2*t,2)+"H"+n+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M0,0L-"+n+",-"+a(2*t,2)+"H"+n+"Z")},noDot:!0},"arrow-left":{n:47,f:function(t,e,i){if(d(e))return s;var n=a(2*t,2),r=a(t,2);return h(e,i,"M0,0L"+n+",-"+r+"V"+r+"Z")},noDot:!0},"arrow-right":{n:48,f:function(t,e,i){if(d(e))return s;var n=a(2*t,2),r=a(t,2);return h(e,i,"M0,0L-"+n+",-"+r+"V"+r+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M-"+n+",0H"+n+"M0,0L-"+n+","+a(2*t,2)+"H"+n+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(t,e,i){if(d(e))return s;var n=a(t,2);return h(e,i,"M-"+n+",0H"+n+"M0,0L-"+n+",-"+a(2*t,2)+"H"+n+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(t,e,i){if(d(e))return s;var n=a(2*t,2),r=a(t,2);return h(e,i,"M0,-"+r+"V"+r+"M0,0L"+n+",-"+r+"V"+r+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(t,e,i){if(d(e))return s;var n=a(2*t,2),r=a(t,2);return h(e,i,"M0,-"+r+"V"+r+"M0,0L-"+n+",-"+r+"V"+r+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(t,e,i){if(d(e))return s;var n=c/2.5,r=2*t*g(n),a=2*t*u(n);return h(e,i,"M0,0L"+-r+","+a+"L"+r+","+a+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(t,e,i){if(d(e))return s;var n=c/4,r=2*t*g(n),a=2*t*u(n);return h(e,i,"M0,0L"+-r+","+a+"A "+2*t+","+2*t+" 0 0 1 "+r+","+a+"Z")},backoff:.4,noDot:!0}},zQ}();dI.symbolNames=[],dI.symbolFuncs=[],dI.symbolBackOffs=[],dI.symbolNeedLines={},dI.symbolNoDot={},dI.symbolNoFill={},dI.symbolList=[],Object.keys(FI).forEach((function(t){var e=FI[t],i=e.n;dI.symbolList.push(i,String(i),t,i+100,String(i+100),t+"-open"),dI.symbolNames[i]=t,dI.symbolFuncs[i]=e.f,dI.symbolBackOffs[i]=e.backoff||0,e.needLine&&(dI.symbolNeedLines[i]=!0),e.noDot?dI.symbolNoDot[i]=!0:dI.symbolList.push(i+200,String(i+200),t+"-dot",i+300,String(i+300),t+"-open-dot"),e.noFill&&(dI.symbolNoFill[i]=!0)}));var fI=dI.symbolNames.length;function QI(t,e,i,n){var r=t%100;return dI.symbolFuncs[r](e,i,n)+(t>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}dI.symbolNumber=function(t){if($Q(t))t=+t;else if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=dI.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=fI||t>=400?0:Math.floor(Math.max(t,0))};var II=qQ("~f"),UI={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function bI(t,e,i,n,r,a,s,o,l,c){var g,u=r.length;"linear"===n?g={node:"linearGradient",attrs:{x1:s.x,y1:s.y,x2:o.x,y2:o.y,gradientUnits:l?"userSpaceOnUse":"objectBoundingBox"},reversed:c}:"radial"===n&&(g={node:"radialGradient",reversed:c});for(var d=new Array(u),h=0;h<u;h++)g.reversed?d[u-1-h]=[II(100*(1-r[h][0])),r[h][1]]:d[h]=[II(100*r[h][0]),r[h][1]];var B=e._fullLayout,p="g"+B._uid+"-"+i,F=B._defs.select(".gradients").selectAll("#"+p).data([n+d.join(";")],jQ.identity);F.exit().remove(),F.enter().append(g.node).each((function(){var t=PQ.select(this);g.attrs&&t.attr(g.attrs),t.attr("id",p);var e=t.selectAll("stop").data(d);e.exit().remove(),e.enter().append("stop"),e.each((function(t){var e=tI(t[1]);PQ.select(this).attr({offset:t[0]+"%","stop-color":iI.tinyRGB(e),"stop-opacity":e.getAlpha()})}))})),t.style(a,NI(p,e)).style(a+"-opacity",null),t.classed("gradient_filled",!0)}dI.gradient=function(t,e,i,n,r,a){var s=UI[n];return bI(t,e,i,s.type,r,a,s.start,s.stop,!1,s.reversed)},dI.pattern=function(t,e,i,n,r,a,s,o,l,c,g,u){var d="legend"===e;o&&("overlay"===l?(c=o,g=iI.contrast(c)):(c=void 0,g=o));var h,B,p,F,f,Q,I=i._fullLayout,U="p"+I._uid+"-"+n,b={},y=tI(g),m=iI.tinyRGB(y),x=u*y.getAlpha();switch(r){case"/":h=a*Math.sqrt(2),B=a*Math.sqrt(2),Q="path",b={d:p="M-"+h/4+","+B/4+"l"+h/2+",-"+B/2+"M0,"+B+"L"+h+",0M"+h/4*3+","+B/4*5+"l"+h/2+",-"+B/2,opacity:x,stroke:m,"stroke-width":(F=s*a)+"px"};break;case"\\":h=a*Math.sqrt(2),B=a*Math.sqrt(2),Q="path",b={d:p="M"+h/4*3+",-"+B/4+"l"+h/2+","+B/2+"M0,0L"+h+","+B+"M-"+h/4+","+B/4*3+"l"+h/2+","+B/2,opacity:x,stroke:m,"stroke-width":(F=s*a)+"px"};break;case"x":h=a*Math.sqrt(2),B=a*Math.sqrt(2),p="M-"+h/4+","+B/4+"l"+h/2+",-"+B/2+"M0,"+B+"L"+h+",0M"+h/4*3+","+B/4*5+"l"+h/2+",-"+B/2+"M"+h/4*3+",-"+B/4+"l"+h/2+","+B/2+"M0,0L"+h+","+B+"M-"+h/4+","+B/4*3+"l"+h/2+","+B/2,F=a-a*Math.sqrt(1-s),Q="path",b={d:p,opacity:x,stroke:m,"stroke-width":F+"px"};break;case"|":Q="path",Q="path",b={d:p="M"+(h=a)/2+",0L"+h/2+","+(B=a),opacity:x,stroke:m,"stroke-width":(F=s*a)+"px"};break;case"-":Q="path",Q="path",b={d:p="M0,"+(B=a)/2+"L"+(h=a)+","+B/2,opacity:x,stroke:m,"stroke-width":(F=s*a)+"px"};break;case"+":Q="path",p="M"+(h=a)/2+",0L"+h/2+","+(B=a)+"M0,"+B/2+"L"+h+","+B/2,F=a-a*Math.sqrt(1-s),Q="path",b={d:p,opacity:x,stroke:m,"stroke-width":F+"px"};break;case".":h=a,B=a,f=s<Math.PI/4?Math.sqrt(s*a*a/Math.PI):function(t,e,i,n,r){return n+(r-n)*(t-e)/(i-e)}(s,Math.PI/4,1,a/2,a/Math.sqrt(2)),Q="circle",b={cx:h/2,cy:B/2,r:f,opacity:x,fill:m}}var v=[r||"noSh",c||"noBg",g||"noFg",a,s].join(";"),C=I._defs.select(".patterns").selectAll("#"+U).data([v],jQ.identity);C.exit().remove(),C.enter().append("pattern").each((function(){var t=PQ.select(this);if(t.attr({id:U,width:h+"px",height:B+"px",patternUnits:"userSpaceOnUse",patternTransform:d?"scale(0.8)":""}),c){var e=tI(c),i=iI.tinyRGB(e),n=e.getAlpha(),r=t.selectAll("rect").data([0]);r.exit().remove(),r.enter().append("rect").attr({width:h+"px",height:B+"px",fill:i,"fill-opacity":n})}var a=t.selectAll(Q).data([0]);a.exit().remove(),a.enter().append(Q).attr(b)})),t.style("fill",NI(U,i)).style("fill-opacity",null),t.classed("pattern_filled",!0)},dI.initGradients=function(t){var e=t._fullLayout;jQ.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),PQ.select(t).selectAll(".gradient_filled").classed("gradient_filled",!1)},dI.initPatterns=function(t){var e=t._fullLayout;jQ.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),PQ.select(t).selectAll(".pattern_filled").classed("pattern_filled",!1)},dI.getPatternAttr=function(t,e,i){return t&&jQ.isArrayOrTypedArray(t)?e<t.length?t[e]:i:t},dI.pointStyle=function(t,e,i,n){if(t.size()){var r=dI.makePointStyleFns(e);t.each((function(t){dI.singlePointStyle(t,PQ.select(this),e,r,i,n)}))}},dI.singlePointStyle=function(t,e,i,n,r,a){var s=i.marker,o=s.line;if(a&&a.i>=0&&void 0===t.i&&(t.i=a.i),e.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(t):void 0===t.mo?s.opacity:t.mo),n.ms2mrc){var l;l="various"===t.ms||"various"===s.size?3:n.ms2mrc(t.ms),t.mrc=l,n.selectedSizeFn&&(l=t.mrc=n.selectedSizeFn(t));var c=dI.symbolNumber(t.mx||s.symbol)||0;t.om=c%200>=100;var g=PI(t,i),u=HI(t,i);e.attr("d",QI(c,l,g,u))}var d,h,B,p=!1;if(t.so)B=o.outlierwidth,h=o.outliercolor,d=s.outliercolor;else{var F=(o||{}).width;B=(t.mlw+1||F+1||(t.trace?(t.trace.marker.line||{}).width:0)+1)-1||0,h="mlc"in t?t.mlcc=n.lineScale(t.mlc):jQ.isArrayOrTypedArray(o.color)?iI.defaultLine:o.color,jQ.isArrayOrTypedArray(s.color)&&(d=iI.defaultLine,p=!0),d="mc"in t?t.mcc=n.markerScale(t.mc):s.color||s.colors||"rgba(0,0,0,0)",n.selectedColorFn&&(d=n.selectedColorFn(t))}if(t.om)e.call(iI.stroke,d).style({"stroke-width":(B||1)+"px",fill:"none"});else{e.style("stroke-width",(t.isBlank?0:B)+"px");var f=s.gradient,Q=t.mgt;Q?p=!0:Q=f&&f.type,jQ.isArrayOrTypedArray(Q)&&(Q=Q[0],UI[Q]||(Q=0));var I=s.pattern,U=I&&dI.getPatternAttr(I.shape,t.i,"");if(Q&&"none"!==Q){var b=t.mgc;b?p=!0:b=f.color;var y=i.uid;p&&(y+="-"+t.i),dI.gradient(e,r,y,Q,[[0,b],[1,d]],"fill")}else if(U){var m=!1,x=I.fgcolor;!x&&a&&a.color&&(x=a.color,m=!0);var v=dI.getPatternAttr(x,t.i,a&&a.color||null),C=dI.getPatternAttr(I.bgcolor,t.i,null),A=I.fgopacity,L=dI.getPatternAttr(I.size,t.i,8),G=dI.getPatternAttr(I.solidity,t.i,.3);m=m||t.mcc||jQ.isArrayOrTypedArray(I.shape)||jQ.isArrayOrTypedArray(I.bgcolor)||jQ.isArrayOrTypedArray(I.fgcolor)||jQ.isArrayOrTypedArray(I.size)||jQ.isArrayOrTypedArray(I.solidity);var R=i.uid;m&&(R+="-"+t.i),dI.pattern(e,"point",r,R,U,L,G,t.mcc,I.fillmode,C,v,A)}else jQ.isArrayOrTypedArray(d)?iI.fill(e,d[t.i]):iI.fill(e,d);B&&iI.stroke(e,h)}},dI.makePointStyleFns=function(t){var e={},i=t.marker;return e.markerScale=dI.tryColorscale(i,""),e.lineScale=dI.tryColorscale(i,"line"),eI.traceIs(t,"symbols")&&(e.ms2mrc=cI.isBubble(t)?gI(t):function(){return(i.size||6)/2}),t.selectedpoints&&jQ.extendFlat(e,dI.makeSelectedPointStyleFns(t)),e},dI.makeSelectedPointStyleFns=function(t){var e={},i=t.selected||{},n=t.unselected||{},r=t.marker||{},a=i.marker||{},s=n.marker||{},o=r.opacity,l=a.opacity,c=s.opacity,g=void 0!==l,u=void 0!==c;(jQ.isArrayOrTypedArray(o)||g||u)&&(e.selectedOpacityFn=function(t){var e=void 0===t.mo?r.opacity:t.mo;return t.selected?g?l:e:u?c:lI*e});var d=r.color,h=a.color,B=s.color;(h||B)&&(e.selectedColorFn=function(t){var e=t.mcc||d;return t.selected?h||e:B||e});var p=r.size,F=a.size,f=s.size,Q=void 0!==F,I=void 0!==f;return eI.traceIs(t,"symbols")&&(Q||I)&&(e.selectedSizeFn=function(t){var e=t.mrc||p/2;return t.selected?Q?F/2:e:I?f/2:e}),e},dI.makeSelectedTextStyleFns=function(t){var e={},i=t.selected||{},n=t.unselected||{},r=t.textfont||{},a=i.textfont||{},s=n.textfont||{},o=r.color,l=a.color,c=s.color;return e.selectedTextColorFn=function(t){var e=t.tc||o;return t.selected?l||e:c||(l?e:iI.addOpacity(e,lI))},e},dI.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var i=dI.makeSelectedPointStyleFns(e),n=e.marker||{},r=[];i.selectedOpacityFn&&r.push((function(t,e){t.style("opacity",i.selectedOpacityFn(e))})),i.selectedColorFn&&r.push((function(t,e){iI.fill(t,i.selectedColorFn(e))})),i.selectedSizeFn&&r.push((function(t,r){var a=r.mx||n.symbol||0,s=i.selectedSizeFn(r);t.attr("d",QI(dI.symbolNumber(a),s,PI(r,e),HI(r,e))),r.mrc2=s})),r.length&&t.each((function(t){for(var e=PQ.select(this),i=0;i<r.length;i++)r[i](e,t)}))}},dI.tryColorscale=function(t,e){var i=e?jQ.nestedProperty(t,e).get():t;if(i){var n=i.color;if((i.colorscale||i._colorAx)&&jQ.isArrayOrTypedArray(n))return nI.makeColorScaleFuncFromTrace(i)}return jQ.identity};var yI={start:1,end:-1,middle:0,bottom:1,top:-1};function mI(t,e,i,n,r){var a=PQ.select(t.node().parentNode),s=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",o=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",l=n?n/.8+1:0,c=(aI.lineCount(t)-1)*oI+1,g=yI[o]*l,u=.75*i+yI[s]*l+(yI[s]-1)*c*i/2;t.attr("text-anchor",o),r||a.attr("transform",rI(g,u))}function xI(t,e){var i=t.ts||e.textfont.size;return $Q(i)&&i>0?i:0}dI.textPointStyle=function(t,e,i){if(t.size()){var n;if(e.selectedpoints){var r=dI.makeSelectedTextStyleFns(e);n=r.selectedTextColorFn}var a=e.texttemplate,s=i._fullLayout;t.each((function(t){var r=PQ.select(this),o=a?jQ.extractOption(t,e,"txt","texttemplate"):jQ.extractOption(t,e,"tx","text");if(o||0===o){if(a){var l=e._module.formatLabels,c=l?l(t,e,s):{},g={};uI(g,e,t.i);var u=e._meta||{};o=jQ.texttemplateString(o,c,s._d3locale,g,t,u)}var d=t.tp||e.textposition,h=xI(t,e),B=n?n(t):t.tc||e.textfont.color;r.call(dI.font,{family:t.tf||e.textfont.family,weight:t.tw||e.textfont.weight,style:t.ty||e.textfont.style,variant:t.tv||e.textfont.variant,textcase:t.tC||e.textfont.textcase,lineposition:t.tE||e.textfont.lineposition,shadow:t.tS||e.textfont.shadow,size:h,color:B}).text(o).call(aI.convertToTspans,i).call(mI,d,h,t.mrc)}else r.remove()}))}},dI.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var i=dI.makeSelectedTextStyleFns(e);t.each((function(t){var n=PQ.select(this),r=i.selectedTextColorFn(t),a=t.tp||e.textposition,s=xI(t,e);iI.fill(n,r);var o=eI.traceIs(e,"bar-like");mI(n,a,s,t.mrc2||t.mrc,o)}))}};var vI,CI;function AI(t,e,i){return i&&(t=VI(t)),e?GI(t[1]):LI(t[0])}function LI(t){var e=PQ.round(t,2);return vI=e,e}function GI(t){var e=PQ.round(t,2);return CI=e,e}function RI(t,e,i,n){var r=t[0]-e[0],a=t[1]-e[1],s=i[0]-e[0],o=i[1]-e[1],l=Math.pow(r*r+a*a,.25),c=Math.pow(s*s+o*o,.25),g=(c*c*r-l*l*s)*n,u=(c*c*a-l*l*o)*n,d=3*c*(l+c),h=3*l*(l+c);return[[LI(e[0]+(d&&g/d)),GI(e[1]+(d&&u/d))],[LI(e[0]-(h&&g/h)),GI(e[1]-(h&&u/h))]]}dI.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var i,n="M"+t[0],r=[];for(i=1;i<t.length-1;i++)r.push(RI(t[i-1],t[i],t[i+1],e));for(n+="Q"+r[0][0]+" "+t[1],i=2;i<t.length-1;i++)n+="C"+r[i-2][1]+" "+r[i-1][0]+" "+t[i];return n+="Q"+r[t.length-3][1]+" "+t[t.length-1]},dI.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var i,n="M"+t[0],r=t.length-1,a=[RI(t[r],t[0],t[1],e)];for(i=1;i<r;i++)a.push(RI(t[i-1],t[i],t[i+1],e));for(a.push(RI(t[r-1],t[r],t[0],e)),i=1;i<=r;i++)n+="C"+a[i-1][1]+" "+a[i][0]+" "+t[i];return n+="C"+a[r][1]+" "+a[0][0]+" "+t[0]+"Z"};var SI={hv:function(t,e,i){return"H"+LI(e[0])+"V"+AI(e,1,i)},vh:function(t,e,i){return"V"+GI(e[1])+"H"+AI(e,0,i)},hvh:function(t,e,i){return"H"+LI((t[0]+e[0])/2)+"V"+GI(e[1])+"H"+AI(e,0,i)},vhv:function(t,e,i){return"V"+GI((t[1]+e[1])/2)+"H"+LI(e[0])+"V"+AI(e,1,i)}},wI=function(t,e,i){return"L"+AI(e,0,i)+","+AI(e,1,i)};function VI(t,e){var i=t.backoff,n=t.trace,r=t.d,a=t.i;if(i&&n&&n.marker&&n.marker.angle%360==0&&n.line&&"spline"!==n.line.shape){var s=jQ.isArrayOrTypedArray(i),o=t,l=e?e[0]:vI||0,c=e?e[1]:CI||0,g=o[0],u=o[1],d=g-l,h=u-c,B=Math.atan2(h,d),p=s?i[a]:i;if("auto"===p){var F=o.i;"scatter"===n.type&&F--;var f=o.marker,Q=f.symbol;jQ.isArrayOrTypedArray(Q)&&(Q=Q[F]);var I=f.size;jQ.isArrayOrTypedArray(I)&&(I=I[F]),p=f?dI.symbolBackOffs[dI.symbolNumber(Q)]*I:0,p+=dI.getMarkerStandoff(r[F],n)||0}var U=g-p*Math.cos(B),b=u-p*Math.sin(B);(U<=g&&U>=l||U>=g&&U<=l)&&(b<=u&&b>=c||b>=u&&b<=c)&&(t=[U,b])}return t}dI.steps=function(t){var e=SI[t]||wI;return function(t){for(var i="M"+LI(t[0][0])+","+GI(t[0][1]),n=t.length,r=1;r<n;r++)i+=e(t[r-1],t[r],r===n-1);return i}},dI.applyBackoff=VI,dI.makeTester=function(){var t=jQ.ensureSingleById(PQ.select("body"),"svg","js-plotly-tester",(function(t){t.attr(sI.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})})),e=jQ.ensureSingle(t,"path","js-reference-point",(function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})}));dI.tester=t,dI.testref=e},dI.savedBBoxes={};var EI=0;function ZI(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}function NI(t,e){if(!t)return null;var i=e._context,n=i._exportedPlot?"":i._baseUrl||"";return n?"url('"+n+"#"+t+"')":"url(#"+t+")"}dI.bBox=function(t,e,i){var n,r,a;if(i||(i=ZI(t)),i){if(n=dI.savedBBoxes[i])return jQ.extendFlat({},n)}else if(1===t.childNodes.length){var s=t.childNodes[0];if(i=ZI(s)){var o=+s.getAttribute("x")||0,l=+s.getAttribute("y")||0,c=s.getAttribute("transform");if(!c){var g=dI.bBox(s,!1,i);return o&&(g.left+=o,g.right+=o),l&&(g.top+=l,g.bottom+=l),g}if(i+="~"+o+"~"+l+"~"+c,n=dI.savedBBoxes[i])return jQ.extendFlat({},n)}}e?r=t:(a=dI.tester.node(),r=t.cloneNode(!0),a.appendChild(r)),PQ.select(r).attr("transform",null).call(aI.positionText,0,0);var u=r.getBoundingClientRect(),d=dI.testref.node().getBoundingClientRect();e||a.removeChild(r);var h={height:u.height,width:u.width,left:u.left-d.left,top:u.top-d.top,right:u.right-d.left,bottom:u.bottom-d.top};return EI>=1e4&&(dI.savedBBoxes={},EI=0),i&&(dI.savedBBoxes[i]=h),EI++,jQ.extendFlat({},h)},dI.setClipUrl=function(t,e,i){t.attr("clip-path",NI(e,i))},dI.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,(function(t,e,i){return[e,i].join(" ")})).split(" ");return{x:+e[0]||0,y:+e[1]||0}},dI.setTranslate=function(t,e,i){var n=t.attr?"attr":"getAttribute",r=t.attr?"attr":"setAttribute",a=t[n]("transform")||"";return e=e||0,i=i||0,a=a.replace(/(\btranslate\(.*?\);?)/,"").trim(),a=(a+=rI(e,i)).trim(),t[r]("transform",a),a},dI.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,(function(t,e,i){return[e,i].join(" ")})).split(" ");return{x:+e[0]||1,y:+e[1]||1}},dI.setScale=function(t,e,i){var n=t.attr?"attr":"getAttribute",r=t.attr?"attr":"setAttribute",a=t[n]("transform")||"";return e=e||1,i=i||1,a=a.replace(/(\bscale\(.*?\);?)/,"").trim(),a=(a+="scale("+e+","+i+")").trim(),t[r]("transform",a),a};var DI=/\s*sc.*/;dI.setPointGroupScale=function(t,e,i){if(e=e||1,i=i||1,t){var n=1===e&&1===i?"":"scale("+e+","+i+")";t.each((function(){var t=(this.getAttribute("transform")||"").replace(DI,"");t=(t+=n).trim(),this.setAttribute("transform",t)}))}};var XI=/translate\([^)]*\)\s*$/;function HI(t,e){var i;return t&&(i=t.mf),void 0===i&&(i=e.marker&&e.marker.standoff||0),e._geo||e._xA?i:-i}dI.setTextPointsScale=function(t,e,i){t&&t.each((function(){var t,n=PQ.select(this),r=n.select("text");if(r.node()){var a=parseFloat(r.attr("x")||0),s=parseFloat(r.attr("y")||0),o=(n.attr("transform")||"").match(XI);t=1===e&&1===i?[]:[rI(a,s),"scale("+e+","+i+")",rI(-a,-s)],o&&t.push(o),n.attr("transform",t.join(""))}}))},dI.getMarkerStandoff=HI;var WI,kI,MI,TI,YI,JI,_I=Math.atan2,zI=Math.cos,OI=Math.sin;function KI(t,e){var i=e[0],n=e[1];return[i*zI(t)-n*OI(t),i*OI(t)+n*zI(t)]}function PI(t,e){var i,n,r=t.ma;void 0===r&&((r=e.marker.angle)&&!jQ.isArrayOrTypedArray(r)||(r=0));var a=e.marker.angleref;if("previous"===a||"north"===a){if(e._geo){var s=e._geo.project(t.lonlat);i=s[0],n=s[1]}else{var o=e._xA,l=e._yA;if(!o||!l)return 90;i=o.c2p(t.x),n=l.c2p(t.y)}if(e._geo){var c,g=t.lonlat[0],u=t.lonlat[1],d=e._geo.project([g,u+1e-5]),h=e._geo.project([g+1e-5,u]),B=_I(h[1]-n,h[0]-i),p=_I(d[1]-n,d[0]-i);if("north"===a)c=r/180*Math.PI;else if("previous"===a){var F=g/180*Math.PI,f=u/180*Math.PI,Q=WI/180*Math.PI,I=kI/180*Math.PI,U=Q-F,b=zI(I)*OI(U),y=OI(I)*zI(f)-zI(I)*OI(f)*zI(U);c=-_I(b,y)-Math.PI,WI=g,kI=u}var m=KI(B,[zI(c),0]),x=KI(p,[OI(c),0]);r=_I(m[1]+x[1],m[0]+x[0])/Math.PI*180,"previous"!==a||JI===e.uid&&t.i===YI+1||(r=null)}if("previous"===a&&!e._geo)if(JI===e.uid&&t.i===YI+1&&$Q(i)&&$Q(n)){var v=i-MI,C=n-TI,A=e.line&&e.line.shape||"",L=A.slice(A.length-1);"h"===L&&(C=0),"v"===L&&(v=0),r+=_I(C,v)/Math.PI*180+90}else r=null}return MI=i,TI=n,YI=t.i,JI=e.uid,r}dI.getMarkerAngle=PI;var jI=AF.exports,qI=Js,$I=$c,tU=yF,eU=Nu,iU=_B,nU=iU.strTranslate,rU=jI,aU=Uu,sU=xF,oU=bu,lU=CF.OPPOSITE_SIDE,cU=/ [XY][0-9]* /;var gU={draw:function(t,e,i){var n,r=t._fullLayout,a=i.propContainer,s=i.propName,o=i.placeholder,l=i.traceIndex,c=i.avoid||{},g=i.attributes,u=i.transform,d=i.containerGroup,h=1,B=a.title,p=(B&&B.text?B.text:"").trim(),F=!1,f=B&&B.font?B.font:{},Q=f.family,I=f.size,U=f.color,b=f.weight,y=f.style,m=f.variant,x=f.textcase,v=f.lineposition,C=f.shadow,A=!!i.subtitlePropName,L=i.subtitlePlaceholder,G=(a.title||{}).subtitle||{text:"",font:{}},R=G.text.trim(),S=!1,w=1,V=G.font,E=V.family,Z=V.size,N=V.color,D=V.weight,X=V.style,H=V.variant,W=V.textcase,k=V.lineposition,M=V.shadow;"title.text"===s?n="titleText":-1!==s.indexOf("axis")?n="axisTitleText":s.indexOf(!0)&&(n="colorbarTitleText");var T=t._context.edits[n];function Y(t,e){return void 0!==t&&void 0!==e&&t.replace(cU," % ")===e.replace(cU," % ")}""===p?h=0:Y(p,o)&&(T||(p=""),h=.2,F=!0),A&&(""===R?w=0:Y(R,L)&&(T||(R=""),w=.2,S=!0)),i._meta?p=iU.templateString(p,i._meta):r._meta&&(p=iU.templateString(p,r._meta));var J,_=p||R||T;d||(d=iU.ensureSingle(r._infolayer,"g","g-"+e),J=r._hColorbarMoveTitle);var z=d.selectAll("text."+e).data(_?[0]:[]);z.enter().append("text"),z.text(p).attr("class",e),z.exit().remove();var O=null,K=e+"-subtitle",P=R||T;if(A&&P&&((O=d.selectAll("text."+K).data(P?[0]:[])).enter().append("text"),O.text(R).attr("class",K),O.exit().remove()),!_)return d;function j(t,e){iU.syncOrAsync([q,$],{title:t,subtitle:e})}function q(i){var n,r=i.title,a=i.subtitle;if(!u&&J&&(u={}),u?(n="",u.rotate&&(n+="rotate("+[u.rotate,g.x,g.y]+")"),(u.offset||J)&&(n+=nU(0,(u.offset||0)-(J||0)))):n=null,r.attr("transform",n),r.style("opacity",h*aU.opacity(U)).call(rU.font,{color:aU.rgb(U),size:qI.round(I,2),family:Q,weight:b,style:y,variant:m,textcase:x,shadow:C,lineposition:v}).attr(g).call(sU.convertToTspans,t,(function(t){if(t){var e=qI.select(t.node().parentNode).select("."+K);if(!e.empty()){var i=t.node().getBBox();if(i.height){var n=i.y+i.height+1.6*Z;e.attr("y",n)}}}})),a){var s=d.select("."+e+"-math-group"),o=r.node().getBBox(),l=s.node()?s.node().getBBox():void 0,c=l?l.y+l.height+1.6*Z:o.y+o.height+1.6*Z,B=iU.extendFlat({},g,{y:c});a.attr("transform",n),a.style("opacity",w*aU.opacity(N)).call(rU.font,{color:aU.rgb(N),size:qI.round(Z,2),family:E,weight:D,style:X,variant:H,textcase:W,shadow:M,lineposition:k}).attr(B).call(sU.convertToTspans,t)}return tU.previousPromises(t)}function $(e){var i=e.title,n=qI.select(i.node().parentNode);if(c&&c.selection&&c.side&&p){n.attr("transform",null);var s=lU[c.side],o="left"===c.side||"top"===c.side?-1:1,l=$I(c.pad)?c.pad:2,g=rU.bBox(n.node()),u={t:0,b:0,l:0,r:0},d=t._fullLayout._reservedMargin;for(var h in d)for(var B in d[h]){var F=d[h][B];u[B]=Math.max(u[B],F)}var f={left:u.l,top:u.t,right:r.width-u.r,bottom:r.height-u.b},Q=c.maxShift||o*(f[c.side]-g[c.side]),I=0;if(Q<0)I=Q;else{var U=c.offsetLeft||0,b=c.offsetTop||0;g.left-=U,g.right-=U,g.top-=b,g.bottom-=b,c.selection.each((function(){var t=rU.bBox(this);iU.bBoxIntersect(g,t,l)&&(I=Math.max(I,o*(t[c.side]-g[s])+l))})),I=Math.min(Q,I),a._titleScoot=Math.abs(I)}if(I>0||Q<0){var y={left:[-I,0],right:[I,0],top:[0,-I],bottom:[0,I]}[c.side];n.attr("transform",nU(y[0],y[1]))}}}function tt(t,e){t.text(e).on("mouseover.opacity",(function(){qI.select(this).transition().duration(oU.SHOW_PLACEHOLDER).style("opacity",1)})).on("mouseout.opacity",(function(){qI.select(this).transition().duration(oU.HIDE_PLACEHOLDER).style("opacity",0)}))}if(z.call(j,O),T&&(p?z.on(".opacity",null):(tt(z,o),F=!0),z.call(sU.makeEditable,{gd:t}).on("edit",(function(e){void 0!==l?eU.call("_guiRestyle",t,s,e,l):eU.call("_guiRelayout",t,s,e)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(j)})).on("input",(function(t){this.text(t||" ").call(sU.positionText,g.x,g.y)})),A)){if(A&&!p){var et=z.node().getBBox(),it=et.y+et.height+1.6*Z;O.attr("y",it)}R?O.on(".opacity",null):(tt(O,L),S=!0),O.call(sU.makeEditable,{gd:t}).on("edit",(function(e){eU.call("_guiRelayout",t,"title.subtitle.text",e)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(j)})).on("input",(function(t){this.text(t||" ").call(sU.positionText,O.attr("x"),O.attr("y"))}))}return z.classed("js-placeholder",F),O&&O.classed("js-placeholder",S),d},SUBTITLE_PADDING_EM:1.6,SUBTITLE_PADDING_MATHJAX_EM:1.6},uU=Js,dU=Vc.utcFormat,hU=_B,BU=hU.numberFormat,pU=$c,FU=hU.cleanNumber,fU=hU.ms2DateTime,QU=hU.dateTime2ms,IU=hU.ensureNumber,UU=hU.isArrayOrTypedArray,bU=tg,yU=bU.FP_SAFE,mU=bU.BADNUM,xU=bU.LOG_CLIP,vU=bU.ONEWEEK,CU=bU.ONEDAY,AU=bU.ONEHOUR,LU=bU.ONEMIN,GU=bU.ONESEC,RU=Ep,SU=Np,wU=SU.HOUR_PATTERN,VU=SU.WEEKDAY_PATTERN;function EU(t){return Math.pow(10,t)}function ZU(t){return null!=t}var NU,DU,XU=function(t,e){e=e||{};var i=t._id||"x",n=i.charAt(0);function r(e,i){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&i&&t.range&&2===t.range.length){var n=t.range[0],r=t.range[1];return.5*(n+r-2*xU*Math.abs(n-r))}return mU}function a(e,i,n,r){if((r||{}).msUTC&&pU(e))return+e;var a=QU(e,n||t.calendar);if(a===mU){if(!pU(e))return mU;e=+e;var s=Math.floor(10*hU.mod(e+.05,1)),o=Math.round(e-s/10);a=QU(new Date(o))+s/10}return a}function s(e,i,n){return fU(e,i,n||t.calendar)}function o(e){return t._categories[Math.round(e)]}function l(e){if(ZU(e)){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push("number"==typeof e?String(e):e);var i=t._categories.length-1;return t._categoriesMap[e]=i,i}return mU}function c(e){if(t._categoriesMap)return t._categoriesMap[e]}function g(t){var e=c(t);return void 0!==e?e:pU(t)?+t:void 0}function u(t){return pU(t)?+t:c(t)}function d(t,e,i){return uU.round(i+e*t,2)}function h(t,e,i){return(t-i)/e}var B=function(e){return pU(e)?d(e,t._m,t._b):mU},p=function(e){return h(e,t._m,t._b)};if(t.rangebreaks){var F="y"===n;B=function(e){if(!pU(e))return mU;var i=t._rangebreaks.length;if(!i)return d(e,t._m,t._b);var n=F;t.range[0]>t.range[1]&&(n=!n);for(var r=n?-1:1,a=r*e,s=0,o=0;o<i;o++){var l=r*t._rangebreaks[o].min,c=r*t._rangebreaks[o].max;if(a<l)break;if(!(a>c)){s=a<(l+c)/2?o:o+1;break}s=o+1}var g=t._B[s]||0;return isFinite(g)?d(e,t._m2,g):0},p=function(e){var i=t._rangebreaks.length;if(!i)return h(e,t._m,t._b);for(var n=0,r=0;r<i&&!(e<t._rangebreaks[r].pmin);r++)e>t._rangebreaks[r].pmax&&(n=r+1);return h(e,t._m2,t._B[n])}}t.c2l="log"===t.type?r:IU,t.l2c="log"===t.type?EU:IU,t.l2p=B,t.p2l=p,t.c2p="log"===t.type?function(t,e){return B(r(t,e))}:B,t.p2c="log"===t.type?function(t){return EU(p(t))}:p,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=FU,t.c2d=t.c2r=t.l2d=t.l2r=IU,t.d2p=t.r2p=function(e){return t.l2p(FU(e))},t.p2d=t.p2r=p,t.cleanPos=IU):"log"===t.type?(t.d2r=t.d2l=function(t,e){return r(FU(t),e)},t.r2d=t.r2c=function(t){return EU(FU(t))},t.d2c=t.r2l=FU,t.c2d=t.l2r=IU,t.c2r=r,t.l2d=EU,t.d2p=function(e,i){return t.l2p(t.d2r(e,i))},t.p2d=function(t){return EU(p(t))},t.r2p=function(e){return t.l2p(FU(e))},t.p2r=p,t.cleanPos=IU):"date"===t.type?(t.d2r=t.r2d=hU.identity,t.d2c=t.r2c=t.d2l=t.r2l=a,t.c2d=t.c2r=t.l2d=t.l2r=s,t.d2p=t.r2p=function(e,i,n){return t.l2p(a(e,0,n))},t.p2d=t.p2r=function(t,e,i){return s(p(t),e,i)},t.cleanPos=function(e){return hU.cleanDate(e,mU,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=l,t.r2d=t.c2d=t.l2d=o,t.d2r=t.d2l_noadd=g,t.r2c=function(e){var i=u(e);return void 0!==i?i:t.fraction2r(.5)},t.l2r=t.c2r=IU,t.r2l=u,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return o(p(t))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(t){return"string"==typeof t&&""!==t?t:IU(t)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=o,t.d2r=t.d2l_noadd=g,t.r2c=function(e){var i=g(e);return void 0!==i?i:t.fraction2r(.5)},t.r2c_just_indices=c,t.l2r=t.c2r=IU,t.r2l=g,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return o(p(t))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(t){return Array.isArray(t)||"string"==typeof t&&""!==t?t:IU(t)},t.setupMultiCategory=function(r){var a,s,o=t._traceIndices,c=t._matchGroup;if(c&&0===t._categories.length)for(var g in c)if(g!==i){var u=e[RU.id2name(g)];o=o.concat(u._traceIndices)}var d=[[0,{}],[0,{}]],h=[];for(a=0;a<o.length;a++){var B=r[o[a]];if(n in B){var p=B[n],F=B._length||hU.minRowLength(p);if(UU(p[0])&&UU(p[1]))for(s=0;s<F;s++){var f=p[0][s],Q=p[1][s];ZU(f)&&ZU(Q)&&(h.push([f,Q]),f in d[0][1]||(d[0][1][f]=d[0][0]++),Q in d[1][1]||(d[1][1][Q]=d[1][0]++))}}}for(h.sort((function(t,e){var i=d[0][1],n=i[t[0]]-i[e[0]];if(n)return n;var r=d[1][1];return r[t[1]]-r[e[1]]})),a=0;a<h.length;a++)l(h[a])}),t.fraction2r=function(e){var i=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return t.l2r(i+e*(n-i))},t.r2fraction=function(e){var i=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return(t.r2l(e)-i)/(n-i)},t.limitRange=function(e){var i=t.minallowed,n=t.maxallowed;if(void 0!==i||void 0!==n){e||(e="range");var r=hU.nestedProperty(t,e).get(),a=hU.simpleMap(r,t.r2l),s=a[1]<a[0];s&&a.reverse();var o=hU.simpleMap([i,n],t.r2l);if(void 0!==i&&a[0]<o[0]&&(r[s?1:0]=i),void 0!==n&&a[1]>o[1]&&(r[s?0:1]=n),r[0]===r[1]){var l=t.l2r(i),c=t.l2r(n);if(void 0!==i){var g=l+1;void 0!==n&&(g=Math.min(g,c)),r[s?1:0]=g}if(void 0!==n){var u=c+1;void 0!==i&&(u=Math.max(u,l)),r[s?0:1]=u}}}},t.cleanRange=function(e,i){t._cleanRange(e,i),t.limitRange(e)},t._cleanRange=function(e,i){i||(i={}),e||(e="range");var r,a,s=hU.nestedProperty(t,e).get();if(a=(a="date"===t.type?hU.dfltRange(t.calendar):"y"===n?SU.DFLTRANGEY:"realaxis"===t._name?[0,1]:i.dfltRange||SU.DFLTRANGEX).slice(),"tozero"!==t.rangemode&&"nonnegative"!==t.rangemode||(a[0]=0),s&&2===s.length){var o=null===s[0],l=null===s[1];for("date"!==t.type||t.autorange||(s[0]=hU.cleanDate(s[0],mU,t.calendar),s[1]=hU.cleanDate(s[1],mU,t.calendar)),r=0;r<2;r++)if("date"===t.type){if(!hU.isDateTime(s[r],t.calendar)){t[e]=a;break}if(t.r2l(s[0])===t.r2l(s[1])){var c=hU.constrain(t.r2l(s[0]),hU.MIN_MS+1e3,hU.MAX_MS-1e3);s[0]=t.l2r(c-1e3),s[1]=t.l2r(c+1e3);break}}else{if(!pU(s[r])){if(o||l||!pU(s[1-r])){t[e]=a;break}s[r]=s[1-r]*(r?10:.1)}if(s[r]<-yU?s[r]=-yU:s[r]>yU&&(s[r]=yU),s[0]===s[1]){var g=Math.max(1,Math.abs(1e-6*s[0]));s[0]-=g,s[1]+=g}}}else hU.nestedProperty(t,e).set(a)},t.setScale=function(i){var r=e._size;if(t.overlaying){var a=RU.getFromId({_fullLayout:e},t.overlaying);t.domain=a.domain}var s=i&&t._r?"_r":"range",o=t.calendar;t.cleanRange(s);var l,c,g=t.r2l(t[s][0],o),u=t.r2l(t[s][1],o),d="y"===n;if((d?(t._offset=r.t+(1-t.domain[1])*r.h,t._length=r.h*(t.domain[1]-t.domain[0]),t._m=t._length/(g-u),t._b=-t._m*u):(t._offset=r.l+t.domain[0]*r.w,t._length=r.w*(t.domain[1]-t.domain[0]),t._m=t._length/(u-g),t._b=-t._m*g),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks)&&(t._rangebreaks=t.locateBreaks(Math.min(g,u),Math.max(g,u)),t._rangebreaks.length)){for(l=0;l<t._rangebreaks.length;l++)c=t._rangebreaks[l],t._lBreaks+=Math.abs(c.max-c.min);var h=d;g>u&&(h=!h),h&&t._rangebreaks.reverse();var p=h?-1:1;for(t._m2=p*t._length/(Math.abs(u-g)-t._lBreaks),t._B.push(-t._m2*(d?u:g)),l=0;l<t._rangebreaks.length;l++)c=t._rangebreaks[l],t._B.push(t._B[t._B.length-1]-p*t._m2*(c.max-c.min));for(l=0;l<t._rangebreaks.length;l++)(c=t._rangebreaks[l]).pmin=B(c.min),c.pmax=B(c.max)}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(e){var i,n,r,a,s,o=t.rangebreaks||[];o._cachedPatterns||(o._cachedPatterns=o.map((function(e){return e.enabled&&e.bounds?hU.simpleMap(e.bounds,e.pattern?FU:t.d2c):null}))),o._cachedValues||(o._cachedValues=o.map((function(e){return e.enabled&&e.values?hU.simpleMap(e.values,t.d2c).sort(hU.sorterAsc):null})));for(var l=0;l<o.length;l++){var c=o[l];if(c.enabled)if(c.bounds){var g=c.pattern;switch(n=(i=o._cachedPatterns[l])[0],r=i[1],g){case VU:a=(s=new Date(e)).getUTCDay(),n>r&&(r+=7,a<n&&(a+=7));break;case wU:a=(s=new Date(e)).getUTCHours()+(s.getUTCMinutes()/60+s.getUTCSeconds()/3600+s.getUTCMilliseconds()/36e5),n>r&&(r+=24,a<n&&(a+=24));break;case"":a=e}if(a>=n&&a<r)return mU}else for(var u=o._cachedValues[l],d=0;d<u.length;d++)if(r=(n=u[d])+c.dvalue,e>=n&&e<r)return mU}return e},t.locateBreaks=function(e,i){var n,r,a,s,o=[];if(!t.rangebreaks)return o;var l=t.rangebreaks.slice().sort((function(t,e){return t.pattern===VU&&e.pattern===wU?-1:e.pattern===VU&&t.pattern===wU?1:0})),c=function(t,n){if((t=hU.constrain(t,e,i))!==(n=hU.constrain(n,e,i))){for(var r=!0,a=0;a<o.length;a++){var s=o[a];t<s.max&&n>=s.min&&(t<s.min&&(s.min=t),n>s.max&&(s.max=n),r=!1)}r&&o.push({min:t,max:n})}};for(n=0;n<l.length;n++){var g=l[n];if(g.enabled)if(g.bounds){var u=e,d=i;g.pattern&&(u=Math.floor(u)),a=(r=hU.simpleMap(g.bounds,g.pattern?FU:t.r2l))[0],s=r[1];var h,B,p=new Date(u);switch(g.pattern){case VU:B=vU,h=(s-a+(s<a?7:0))*CU,u+=a*CU-(p.getUTCDay()*CU+p.getUTCHours()*AU+p.getUTCMinutes()*LU+p.getUTCSeconds()*GU+p.getUTCMilliseconds());break;case wU:B=CU,h=(s-a+(s<a?24:0))*AU,u+=a*AU-(p.getUTCHours()*AU+p.getUTCMinutes()*LU+p.getUTCSeconds()*GU+p.getUTCMilliseconds());break;default:u=Math.min(r[0],r[1]),h=B=(d=Math.max(r[0],r[1]))-u}for(var F=u;F<d;F+=B)c(F,F+h)}else for(var f=hU.simpleMap(g.values,t.d2c),Q=0;Q<f.length;Q++)c(a=f[Q],s=a+g.dvalue)}return o.sort((function(t,e){return t.min-e.min})),o},t.makeCalcdata=function(e,i,n){var r,a,s,o,l=t.type,g="date"===l&&e[i+"calendar"];if(i in e){if(r=e[i],o=e._length||hU.minRowLength(r),hU.isTypedArray(r)&&("linear"===l||"log"===l)){if(o===r.length)return r;if(r.subarray)return r.subarray(0,o)}if("multicategory"===l)return function(t,e){for(var i=new Array(e),n=0;n<e;n++){var r=(t[0]||[])[n],a=(t[1]||[])[n];i[n]=c([r,a])}return i}(r,o);for(a=new Array(o),s=0;s<o;s++)a[s]=t.d2c(r[s],0,g,n)}else{var u=i+"0"in e?t.d2c(e[i+"0"],0,g):0,d=e["d"+i]?Number(e["d"+i]):1;for(r=e[{x:"y",y:"x"}[i]],o=e._length||r.length,a=new Array(o),s=0;s<o;s++)a[s]=u+s*d}if(t.rangebreaks)for(s=0;s<o;s++)a[s]=t.maskBreaks(a[s]);return a},t.isValidRange=function(e,i){return Array.isArray(e)&&2===e.length&&(i&&null===e[0]||pU(t.r2l(e[0])))&&(i&&null===e[1]||pU(t.r2l(e[1])))},t.getAutorangeDflt=function(e,i){var n=!t.isValidRange(e,"nullOk");return n&&i&&i.reverseDflt?n="reversed":e&&(null===e[0]&&null===e[1]?n=!0:null===e[0]&&null!==e[1]?n="min":null!==e[0]&&null===e[1]&&(n="max")),n},t.isReversed=function(){var e=t.autorange;return"reversed"===e||"min reversed"===e||"max reversed"===e},t.isPtWithinRange=function(e,i){var r=t.c2l(e[n],null,i),a=t.r2l(t.range[0]),s=t.r2l(t.range[1]);return a<s?a<=r&&r<=s:s<=r&&r<=a},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var i=t._matchGroup;if(i){var n=null,r=null;for(var a in i){var s=e[RU.id2name(a)];if(s._categories){n=s._categories,r=s._categoriesMap;break}}n&&r?(t._categories=n,t._categoriesMap=r):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var o=0;o<t._initialCategories.length;o++)l(t._initialCategories[o])},t.sortByInitialCategories=function(){var n=[];if(t._emptyCategories(),t._initialCategories)for(var r=0;r<t._initialCategories.length;r++)l(t._initialCategories[r]);n=n.concat(t._traceIndices);var a=t._matchGroup;for(var s in a)if(i!==s){var o=e[RU.id2name(s)];o._categories=t._categories,o._categoriesMap=t._categoriesMap,n=n.concat(o._traceIndices)}return n};var f=e._d3locale;"date"===t.type&&(t._dateFormat=f?f.timeFormat:dU,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=f?f.numberFormat:BU,delete t._minDtick,delete t._forceTick0},HU=$c,WU=_B,kU=tg.BADNUM,MU=WU.isArrayOrTypedArray,TU=WU.isDateTime,YU=WU.cleanNumber,JU=Math.round,_U=function(t,e,i){var n=t,r=i.noMultiCategory;if(MU(n)&&!n.length)return"-";if(!r&&function(t){return MU(t[0])&&MU(t[1])}(n))return"multicategory";if(r&&Array.isArray(n[0])){for(var a=[],s=0;s<n.length;s++)if(MU(n[s]))for(var o=0;o<n[s].length;o++)a.push(n[s][o]);n=a}if(function(t,e){for(var i=t.length,n=OU(i),r=0,a=0,s={},o=0;o<i;o+=n){var l=t[JU(o)],c=String(l);s[c]||(s[c]=1,TU(l,e)&&r++,HU(l)&&a++)}return r>2*a}(n,e))return"date";var l="strict"!==i.autotypenumbers;return function(t,e){for(var i=t.length,n=OU(i),r=0,a=0,s={},o=0;o<i;o+=n){var l=t[JU(o)],c=String(l);if(!s[c]){s[c]=1;var g=typeof l;"boolean"===g?a++:(e?YU(l)!==kU:"number"===g)?r++:"string"===g&&a++}}return a>2*r}(n,l)?"category":function(t,e){for(var i=t.length,n=0;n<i;n++)if(zU(t[n],e))return!0;return!1}(n,l)?"linear":"-"};function zU(t,e){return e?HU(t):"number"==typeof t}function OU(t){return Math.max(1,(t-1)/1e3)}function KU(){if(DU)return NU;DU=1;var t=Js,e=$c,i=_B,n=tg.FP_SAFE,r=Nu,a=jI,s=Ep,o=s.getFromId,l=s.isLinked;function c(t,e){var n,r,a=[],s=t._fullLayout,o=u(s,e,0),l=u(s,e,1),c=h(t,e),d=c.min,B=c.max;if(0===d.length||0===B.length)return i.simpleMap(e.range,e.r2l);var p=d[0].val,F=B[0].val;for(n=1;n<d.length&&p===F;n++)p=Math.min(p,d[n].val);for(n=1;n<B.length&&p===F;n++)F=Math.max(F,B[n].val);var f=e.autorange,Q="reversed"===f||"min reversed"===f||"max reversed"===f;if(!Q&&e.range){var I=i.simpleMap(e.range,e.r2l);Q=I[1]<I[0]}"reversed"===e.autorange&&(e.autorange=!0);var U,y,m,x,v,C,A=e.rangemode,L="tozero"===A,G="nonnegative"===A,R=e._length,S=R/10,w=0;for(n=0;n<d.length;n++)for(U=d[n],r=0;r<B.length;r++)(C=(y=B[r]).val-U.val-g(e,U.val,y.val))>0&&((v=R-o(U)-l(y))>S?C/v>w&&(m=U,x=y,w=C/v):C/R>w&&(m={val:U.val,nopad:1},x={val:y.val,nopad:1},w=C/R));if(p===F){var V=p-1,E=p+1;if(L)if(0===p)a=[0,1];else{var Z=(p>0?B:d).reduce((function(t,e){return Math.max(t,l(e))}),0),N=p/(1-Math.min(.5,Z/R));a=p>0?[0,N]:[N,0]}else a=G?[Math.max(0,V),Math.max(1,E)]:[V,E]}else L?(m.val>=0&&(m={val:0,nopad:1}),x.val<=0&&(x={val:0,nopad:1})):G&&(m.val-w*o(m)<0&&(m={val:0,nopad:1}),x.val<=0&&(x={val:1,nopad:1})),w=(x.val-m.val-g(e,U.val,y.val))/(R-o(m)-l(x)),a=[m.val-w*o(m),x.val+w*l(x)];return a=b(a,e),e.limitRange&&e.limitRange(),Q&&a.reverse(),i.simpleMap(a,e.l2r||Number)}function g(t,e,i){var n=0;if(t.rangebreaks)for(var r=t.locateBreaks(e,i),a=0;a<r.length;a++){var s=r[a];n+=s.max-s.min}return n}function u(e,n,r){var s=.05*n._length,o=n._anchorAxis||{};if(-1!==(n.ticklabelposition||"").indexOf("inside")||-1!==(o.ticklabelposition||"").indexOf("inside")){var c=n.isReversed();if(!c){var g=i.simpleMap(n.range,n.r2l);c=g[1]<g[0]}c&&(r=!r)}var u=0;return l(e,n._id)||(u=function(e,n,r){var s=0,o="x"===n._id.charAt(0);for(var l in e._plots){var c=e._plots[l];if(n._id===c.xaxis._id||n._id===c.yaxis._id){var g=(o?c.yaxis:c.xaxis)||{};if(-1!==(g.ticklabelposition||"").indexOf("inside")&&(!r&&("left"===g.side||"bottom"===g.side)||r&&("top"===g.side||"right"===g.side))){if(g._vals){var u=i.deg2rad(g._tickAngles[g._id+"tick"]||0),h=Math.abs(Math.cos(u)),B=Math.abs(Math.sin(u));if(!g._vals[0].bb){var p=g._id+"tick";g._selections[p].each((function(e){var i=t.select(this);i.select(".text-math-group").empty()&&(e.bb=a.bBox(i.node()))}))}for(var F=0;F<g._vals.length;F++){var f=g._vals[F].bb;if(f){var Q=2*d+f.width,I=2*d+f.height;s=Math.max(s,o?Math.max(Q*h,I*B):Math.max(I*h,Q*B))}}}"inside"===g.ticks&&"inside"===g.ticklabelposition&&(s+=g.ticklen||0)}}}return s}(e,n,r)),s=Math.max(u,s),"domain"===n.constrain&&n._inputDomain&&(s*=(n._inputDomain[1]-n._inputDomain[0])/(n.domain[1]-n.domain[0])),function(t){return t.nopad?0:t.pad+(t.extrapad?s:u)}}NU={applyAutorangeOptions:b,getAutoRange:c,makePadFn:u,doAutoRange:function(t,e,n){if(e.setScale(),e.autorange){e.range=n?n.slice():c(t,e),e._r=e.range.slice(),e._rl=i.simpleMap(e._r,e.r2l);var a=e._input,s={};s[e._attr+".range"]=e.range,s[e._attr+".autorange"]=e.autorange,r.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,s),a.range=e.range.slice(),a.autorange=e.autorange}var o=e._anchorAxis;if(o&&o.rangeslider){var l=o.rangeslider[e._name];l&&"auto"===l.rangemode&&(l.range=c(t,e)),o._input.rangeslider[e._name]=i.extendFlat({},l)}},findExtremes:function(t,i,r){r||(r={});t._m||t.setScale();var a,s,o,l,c,g,u,d,h,F=[],Q=[],I=i.length,U=r.padded||!1,b=r.tozero&&("linear"===t.type||"-"===t.type),y="log"===t.type,m=!1,x=r.vpadLinearized||!1;function v(t){if(Array.isArray(t))return m=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var C=v((t._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),A=v((t._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),L=v(r.vpadplus||r.vpad),G=v(r.vpadminus||r.vpad);if(!m){if(d=1/0,h=-1/0,y)for(a=0;a<I;a++)(s=i[a])<d&&s>0&&(d=s),s>h&&s<n&&(h=s);else for(a=0;a<I;a++)(s=i[a])<d&&s>-n&&(d=s),s>h&&s<n&&(h=s);i=[d,h],I=2}var R={tozero:b,extrapad:U};function S(n){o=i[n],e(o)&&(g=C(n),u=A(n),x?(l=t.c2l(o)-G(n),c=t.c2l(o)+L(n)):(d=o-G(n),h=o+L(n),y&&d<h/10&&(d=h/10),l=t.c2l(d),c=t.c2l(h)),b&&(l=Math.min(0,l),c=Math.max(0,c)),f(l)&&B(F,l,u,R),f(c)&&p(Q,c,g,R))}var w=Math.min(6,I);for(a=0;a<w;a++)S(a);for(a=I-1;a>=w;a--)S(a);return{min:F,max:Q,opts:r}},concatExtremes:h};var d=3;function h(t,e,i){var n,r,a,s=e._id,l=t._fullData,c=t._fullLayout,g=[],u=[];function d(t,e){for(n=0;n<e.length;n++){var i=t[e[n]],o=(i._extremes||{})[s];if(!0===i.visible&&o){for(r=0;r<o.min.length;r++)a=o.min[r],B(g,a.val,a.pad,{extrapad:a.extrapad});for(r=0;r<o.max.length;r++)a=o.max[r],p(u,a.val,a.pad,{extrapad:a.extrapad})}}}if(d(l,e._traceIndices),d(c.annotations||[],e._annIndices||[]),d(c.shapes||[],e._shapeIndices||[]),e._matchGroup&&!i)for(var F in e._matchGroup)if(F!==e._id){var f=o(t,F),Q=h(t,f,!0),I=e._length/f._length;for(r=0;r<Q.min.length;r++)a=Q.min[r],B(g,a.val,a.pad*I,{extrapad:a.extrapad});for(r=0;r<Q.max.length;r++)a=Q.max[r],p(u,a.val,a.pad*I,{extrapad:a.extrapad})}return{min:g,max:u}}function B(t,e,i,n){F(t,e,i,n,Q)}function p(t,e,i,n){F(t,e,i,n,I)}function F(t,e,i,n,r){for(var a=n.tozero,s=n.extrapad,o=!0,l=0;l<t.length&&o;l++){var c=t[l];if(r(c.val,e)&&c.pad>=i&&(c.extrapad||!s)){o=!1;break}r(e,c.val)&&c.pad<=i&&(s||!c.extrapad)&&(t.splice(l,1),l--)}if(o){var g=a&&0===e;t.push({val:e,pad:g?0:i,extrapad:!g&&s})}}function f(t){return e(t)&&Math.abs(t)<n}function Q(t,e){return t<=e}function I(t,e){return t>=e}function U(t,e,i){return void 0===e||void 0===i||(e=t.d2l(e))<(i=t.d2l(i))}function b(t,e){if(!e||!e.autorangeoptions)return t;var n=t[0],r=t[1],a=e.autorangeoptions.include;if(void 0!==a){var s=e.d2l(n),o=e.d2l(r);i.isArrayOrTypedArray(a)||(a=[a]);for(var l=0;l<a.length;l++){var c=e.d2l(a[l]);s>=c&&(s=c,n=c),o<=c&&(o=c,r=c)}}return n=function(t,e){var i=e.autorangeoptions;return i&&void 0!==i.minallowed&&U(e,i.minallowed,i.maxallowed)?i.minallowed:i&&void 0!==i.clipmin&&U(e,i.clipmin,i.clipmax)?Math.max(t,e.d2l(i.clipmin)):t}(n,e),r=function(t,e){var i=e.autorangeoptions;return i&&void 0!==i.maxallowed&&U(e,i.minallowed,i.maxallowed)?i.maxallowed:i&&void 0!==i.clipmax&&U(e,i.clipmin,i.clipmax)?Math.min(t,e.d2l(i.clipmax)):t}(r,e),[n,r]}return NU}var PU=Js,jU=$c,qU=yF,$U=Nu,tb=_B,eb=tb.strTranslate,ib=xF,nb=gU,rb=Uu,ab=jI,sb=If,ob=Df,lb=tg,cb=lb.ONEMAXYEAR,gb=lb.ONEAVGYEAR,ub=lb.ONEMINYEAR,db=lb.ONEMAXQUARTER,hb=lb.ONEAVGQUARTER,Bb=lb.ONEMINQUARTER,pb=lb.ONEMAXMONTH,Fb=lb.ONEAVGMONTH,fb=lb.ONEMINMONTH,Qb=lb.ONEWEEK,Ib=lb.ONEDAY,Ub=Ib/2,bb=lb.ONEHOUR,yb=lb.ONEMIN,mb=lb.ONESEC,xb=lb.ONEMILLI,vb=lb.ONEMICROSEC,Cb=lb.MINUS_SIGN,Ab=lb.BADNUM,Lb={K:"zeroline"},Gb={K:"gridline",L:"path"},Rb={K:"minor-gridline",L:"path"},Sb={K:"tick",L:"path"},wb={K:"tick",L:"text"},Vb={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},Eb=CF.MID_SHIFT,Zb=CF.CAP_SHIFT,Nb=CF.LINE_SPACING,Db=CF.OPPOSITE_SIDE,Xb=mF.exports={};Xb.setConvert=XU;var Hb=_U,Wb=Ep,kb=Wb.idSort,Mb=Wb.isLinked;Xb.id2name=Wb.id2name,Xb.name2id=Wb.name2id,Xb.cleanId=Wb.cleanId,Xb.list=Wb.list,Xb.listIds=Wb.listIds,Xb.getFromId=Wb.getFromId,Xb.getFromTrace=Wb.getFromTrace;var Tb=KU();Xb.getAutoRange=Tb.getAutoRange,Xb.findExtremes=Tb.findExtremes;var Yb=1e-4;function Jb(t){var e=(t[1]-t[0])*Yb;return[t[0]-e,t[1]+e]}Xb.coerceRef=function(t,e,i,n,r,a){var s=n.charAt(n.length-1),o=i._fullLayout._subplots[s+"axis"],l=n+"ref",c={};return r||(r=o[0]||("string"==typeof a?a:a[0])),a||(a=r),o=o.concat(o.map((function(t){return t+" domain"}))),c[l]={valType:"enumerated",values:o.concat(a?"string"==typeof a?[a]:a:[]),dflt:r},tb.coerce(t,e,c,l)},Xb.getRefType=function(t){return void 0===t?t:"paper"===t?"paper":"pixel"===t?"pixel":/( domain)$/.test(t)?"domain":"range"},Xb.coercePosition=function(t,e,i,n,r,a){var s,o;if("range"!==Xb.getRefType(n))s=tb.ensureNumber,o=i(r,a);else{var l=Xb.getFromId(e,n);o=i(r,a=l.fraction2r(a)),s=l.cleanPos}t[r]=s(o)},Xb.cleanPosition=function(t,e,i){return("paper"===i||"pixel"===i?tb.ensureNumber:Xb.getFromId(e,i).cleanPos)(t)},Xb.redrawComponents=function(t,e){e=e||Xb.listIds(t);var i=t._fullLayout;function n(n,r,a,s){for(var o=$U.getComponentMethod(n,r),l={},c=0;c<e.length;c++)for(var g=i[Xb.id2name(e[c])][a],u=0;u<g.length;u++){var d=g[u];if(!l[d]&&(o(t,d),l[d]=1,s))return}}n("annotations","drawOne","_annIndices"),n("shapes","drawOne","_shapeIndices"),n("images","draw","_imgIndices",!0),n("selections","drawOne","_selectionIndices")};var _b=Xb.getDataConversions=function(t,e,i,n){var r,a="x"===i||"y"===i||"z"===i?i:n;if(tb.isArrayOrTypedArray(a)){if(r={type:Hb(n,void 0,{autotypenumbers:t._fullLayout.autotypenumbers}),_categories:[]},Xb.setConvert(r),"category"===r.type)for(var s=0;s<n.length;s++)r.d2c(n[s])}else r=Xb.getFromTrace(t,e,a);return r?{d2c:r.d2c,c2d:r.c2d}:"ids"===a?{d2c:Ob,c2d:Ob}:{d2c:zb,c2d:zb}};function zb(t){return+t}function Ob(t){return String(t)}function Kb(t,e){return Math.abs((t/e+.5)%1-.5)<.001}function Pb(t,e){return Math.abs(t/e-1)<.001}function jb(t){return+t.substring(1)}function qb(t,e){return t.rangebreaks&&(e=e.filter((function(e){return t.maskBreaks(e.x)!==Ab}))),e}function $b(t){var e=t._mainAxis,i=[];if(e._vals)for(var n=0;n<e._vals.length;n++)if(!e._vals[n].noTick){var r=e.l2p(e._vals[n].x),a=t.p2l(r),s=Xb.tickText(t,a);e._vals[n].minor&&(s.minor=!0,s.text=""),i.push(s)}return i=qb(t,i)}function ty(t,e){var i=Jb(tb.simpleMap(t.range,t.r2l)),n=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]),a="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var s=[],o=0;o<=1;o++)if((void 0===e||!(e&&o||!1===e&&!o))&&(!o||t.minor)){var l=o?t.minor.tickvals:t.tickvals,c=o?[]:t.ticktext;if(l){tb.isArrayOrTypedArray(c)||(c=[]);for(var g=0;g<l.length;g++){var u=a(l[g]);if(u>n&&u<r){var d=Xb.tickText(t,u,!1,String(c[g]));o&&(d.minor=!0,d.text=""),s.push(d)}}}}return s=qb(t,s)}Xb.getDataToCoordFunc=function(t,e,i,n){return _b(t,e,i,n).d2c},Xb.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},Xb.minDtick=function(t,e,i,n){-1===["log","category","multicategory"].indexOf(t.type)&&n?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=i):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((i-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=i):((e/t._minDtick+1e-6)%1>2e-6||((i-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},Xb.saveRangeInitial=function(t,e){for(var i=Xb.list(t,"",!0),n=!1,r=0;r<i.length;r++){var a=i[r],s=void 0===a._rangeInitial0&&void 0===a._rangeInitial1,o=s||a.range[0]!==a._rangeInitial0||a.range[1]!==a._rangeInitial1,l=a.autorange;(s&&!0!==l||e&&o)&&(a._rangeInitial0="min"===l||"max reversed"===l?void 0:a.range[0],a._rangeInitial1="max"===l||"min reversed"===l?void 0:a.range[1],a._autorangeInitial=l,n=!0)}return n},Xb.saveShowSpikeInitial=function(t,e){for(var i=Xb.list(t,"",!0),n=!1,r="on",a=0;a<i.length;a++){var s=i[a],o=void 0===s._showSpikeInitial,l=o||!(s.showspikes===s._showspikes);(o||e&&l)&&(s._showSpikeInitial=s.showspikes,n=!0),"on"!==r||s.showspikes||(r="off")}return t._fullLayout._cartesianSpikesEnabled=r,n},Xb.autoBin=function(t,e,i,n,r,a){var s,o=tb.aggNums(Math.min,null,t),l=tb.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:o-.5,end:l+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:l-o};if(r||(r=e.calendar),s="log"===e.type?{type:"linear",range:[o,l]}:{type:e.type,range:tb.simpleMap([o,l],e.c2r,0,r),calendar:r},Xb.setConvert(s),a=a&&ob.dtick(a,s.type))s.dtick=a,s.tick0=ob.tick0(void 0,s.type,r);else{var c;if(i)c=(l-o)/i;else{var g=tb.distinctVals(t),u=Math.pow(10,Math.floor(Math.log(g.minDiff)/Math.LN10)),d=u*tb.roundUp(g.minDiff/u,[.9,1.9,4.9,9.9],!0);c=Math.max(d,2*tb.stdev(t)/Math.pow(t.length,n?.25:.4)),jU(c)||(c=1)}Xb.autoTicks(s,c)}var h,B=s.dtick,p=Xb.tickIncrement(Xb.tickFirst(s),B,"reverse",r);if("number"==typeof B)p=function(t,e,i,n,r){var a=0,s=0,o=0,l=0;function c(e){return(1+100*(e-t)/i.dtick)%100<2}for(var g=0;g<e.length;g++)e[g]%1==0?o++:jU(e[g])||l++,c(e[g])&&a++,c(e[g]+i.dtick/2)&&s++;var u=e.length-l;if(o===u&&"date"!==i.type)i.dtick<1?t=n-.5*i.dtick:(t-=.5)+i.dtick<n&&(t+=i.dtick);else if(s<.1*u&&(a>.3*u||c(n)||c(r))){var d=i.dtick/2;t+=t+d<n?d:-d}return t}(p,t,s,o,l),h=p+(1+Math.floor((l-p)/B))*B;else for("M"===s.dtick.charAt(0)&&(p=function(t,e,i,n,r){var a=tb.findExactDates(e,r),s=.8;if(a.exactDays>s){var o=Number(i.substr(1));a.exactYears>s&&o%12==0?t=Xb.tickIncrement(t,"M6","reverse")+1.5*Ib:a.exactMonths>s?t=Xb.tickIncrement(t,"M1","reverse")+15.5*Ib:t-=Ub;var l=Xb.tickIncrement(t,i);if(l<=n)return l}return t}(p,t,B,o,r)),h=p,0;h<=l;)h=Xb.tickIncrement(h,B,!1,r);return{start:e.c2r(p,0,r),end:e.c2r(h,0,r),size:B,_dataSpan:l-o}},Xb.prepMinorTicks=function(t,e,i){if(!e.minor.dtick){delete t.dtick;var n,r=e.dtick&&jU(e._tmin);if(r){var a=Xb.tickIncrement(e._tmin,e.dtick,!0);n=[e._tmin,.99*a+.01*e._tmin]}else{var s=tb.simpleMap(e.range,e.r2l);n=[s[0],.8*s[0]+.2*s[1]]}if(t.range=tb.simpleMap(n,e.l2r),t._isMinor=!0,Xb.prepTicks(t,i),r){var o=jU(e.dtick),l=jU(t.dtick),c=o?e.dtick:+e.dtick.substring(1),g=l?t.dtick:+t.dtick.substring(1);o&&l?Kb(c,g)?c===2*Qb&&g===2*Ib&&(t.dtick=Qb):c===2*Qb&&g===3*Ib?t.dtick=Qb:c!==Qb||(e._input.minor||{}).nticks?Pb(c/g,2.5)?t.dtick=c/2:t.dtick=c:t.dtick=Ib:"M"===String(e.dtick).charAt(0)?l?t.dtick="M1":Kb(c,g)?c>=12&&2===g&&(t.dtick="M3"):t.dtick=e.dtick:"L"===String(t.dtick).charAt(0)?"L"===String(e.dtick).charAt(0)?Kb(c,g)||(t.dtick=Pb(c/g,2.5)?e.dtick/2:e.dtick):t.dtick="D1":"D2"===t.dtick&&+e.dtick>1&&(t.dtick=1)}t.range=e.range}void 0===e.minor._tick0Init&&(t.tick0=e.tick0)},Xb.prepTicks=function(t,e){var i=tb.simpleMap(t.range,t.r2l,void 0,void 0,e);if("auto"===t.tickmode||!t.dtick){var n,r=t.nticks;r||("category"===t.type||"multicategory"===t.type?(n=t.tickfont?tb.bigFont(t.tickfont.size||12):15,r=t._length/n):(n="y"===t._id.charAt(0)?40:80,r=tb.constrain(t._length/n,4,9)+1),"radialaxis"===t._name&&(r*=2)),t.minor&&"array"!==t.minor.tickmode||"array"===t.tickmode&&(r*=100),t._roughDTick=Math.abs(i[1]-i[0])/r,Xb.autoTicks(t,t._roughDTick),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}"period"===t.ticklabelmode&&function(t){var e;function i(){return!(jU(t.dtick)||"M"!==t.dtick.charAt(0))}var n=i(),r=Xb.getTickFormat(t);if(r){var a=t._dtickInit!==t.dtick;/%[fLQsSMX]/.test(r)||(/%[HI]/.test(r)?(e=bb,a&&!n&&t.dtick<bb&&(t.dtick=bb)):/%p/.test(r)?(e=Ub,a&&!n&&t.dtick<Ub&&(t.dtick=Ub)):/%[Aadejuwx]/.test(r)?(e=Ib,a&&!n&&t.dtick<Ib&&(t.dtick=Ib)):/%[UVW]/.test(r)?(e=Qb,a&&!n&&t.dtick<Qb&&(t.dtick=Qb)):/%[Bbm]/.test(r)?(e=Fb,a&&(n?jb(t.dtick)<1:t.dtick<fb)&&(t.dtick="M1")):/%[q]/.test(r)?(e=hb,a&&(n?jb(t.dtick)<3:t.dtick<Bb)&&(t.dtick="M3")):/%[Yy]/.test(r)&&(e=gb,a&&(n?jb(t.dtick)<12:t.dtick<ub)&&(t.dtick="M12")))}(n=i())&&t.tick0===t._dowTick0&&(t.tick0=t._rawTick0);t._definedDelta=e}(t),t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),cy(t)},Xb.calcTicks=function(t,e){for(var i,n,r,a,s=t.type,o=t.calendar,l=t.ticklabelstep,c="period"===t.ticklabelmode,g=t.range[0]>t.range[1],u=!t.ticklabelindex||tb.isArrayOrTypedArray(t.ticklabelindex)?t.ticklabelindex:[t.ticklabelindex],d=tb.simpleMap(t.range,t.r2l,void 0,void 0,e),h=d[1]<d[0],B=Math.min(d[0],d[1]),p=Math.max(d[0],d[1]),F=Math.max(1e3,t._length||0),f=[],Q=[],I=[],U=[],b=[],y=t.minor&&(t.minor.ticks||t.minor.showgrid),m=1;m>=(y?0:1);m--){var x=!m;m?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var v=m?t:tb.extendFlat({},t,t.minor);if(x?Xb.prepMinorTicks(v,t,e):Xb.prepTicks(v,e),"array"!==v.tickmode)if("sync"!==v.tickmode){var C=Jb(d),A=C[0],L=C[1],G=jU(v.dtick),R="log"===s&&!(G||"L"===v.dtick.charAt(0)),S=Xb.tickFirst(v,e);if(m){if(t._tmin=S,S<A!==h)break;"category"!==s&&"multicategory"!==s||(L=h?Math.max(-.5,L):Math.min(t._categories.length-.5,L))}var w,V,E=null,Z=S;if(m)G?V=t.dtick:"date"===s?"string"==typeof t.dtick&&"M"===t.dtick.charAt(0)&&(V=Fb*t.dtick.substring(1)):V=t._roughDTick,w=Math.round((t.r2l(Z)-t.r2l(t.tick0))/V)-1;var N=v.dtick;for(v.rangebreaks&&v._tick0Init!==v.tick0&&(Z=Gy(Z,t),h||(Z=Xb.tickIncrement(Z,N,!h,o))),m&&c&&(Z=Xb.tickIncrement(Z,N,!h,o),w--);h?Z>=L:Z<=L;Z=Xb.tickIncrement(Z,N,h,o)){if(m&&w++,v.rangebreaks&&!h){if(Z<A)continue;if(v.maskBreaks(Z)===Ab&&Gy(Z,v)>=p)break}if(I.length>F||Z===E)break;E=Z;var D={value:Z};m?(R&&Z!==(0|Z)&&(D.simpleLabel=!0),l>1&&w%l&&(D.skipLabel=!0),I.push(D)):(D.minor=!0,U.push(D))}}else I=[],f=$b(t);else m?(I=[],f=ty(t,!x)):(U=[],Q=ty(t,!x))}if(!U||U.length<2)u=!1;else{var X=(U[1].value-U[0].value)*(g?-1:1);i=X,n=t.tickformat,(/%f/.test(n)?i>=vb:/%L/.test(n)?i>=xb:/%[SX]/.test(n)?i>=mb:/%M/.test(n)?i>=yb:/%[HI]/.test(n)?i>=bb:/%p/.test(n)?i>=Ub:/%[Aadejuwx]/.test(n)?i>=Ib:/%[UVW]/.test(n)?i>=Qb:/%[Bbm]/.test(n)?i>=fb:/%[q]/.test(n)?i>=Bb:!/%[Yy]/.test(n)||i>=ub)||(u=!1)}if(u){var H=I.concat(U);c&&I.length&&(H=H.slice(1)),H=H.sort((function(t,e){return t.value-e.value})).filter((function(t,e,i){return 0===e||t.value!==i[e-1].value})),H.map((function(t,e){return void 0!==t.minor||t.skipLabel?null:e})).filter((function(t){return null!==t})).forEach((function(t){u.map((function(e){var i=t+e;i>=0&&i<H.length&&tb.pushUnique(b,H[i])}))}))}else b=I;if(y&&!("inside"===t.minor.ticks&&"outside"===t.ticks||"outside"===t.minor.ticks&&"inside"===t.ticks)){for(var W=I.map((function(t){return t.value})),k=[],M=0;M<U.length;M++){var T=U[M],Y=T.value;if(-1===W.indexOf(Y)){for(var J=!1,_=0;!J&&_<I.length;_++)1e7+I[_].value===1e7+Y&&(J=!0);J||k.push(T)}}U=k}if(c&&function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n].value,a=n,s=n+1;n<t.length-1?(a=n,s=n+1):n>0?(a=n-1,s=n):(a=n,s=n);var o,l=t[a].value,c=t[s].value,g=Math.abs(c-l),u=i||g,d=0;u>=ub?d=g>=ub&&g<=cb?g:gb:i===hb&&u>=Bb?d=g>=Bb&&g<=db?g:hb:u>=fb?d=g>=fb&&g<=pb?g:Fb:i===Qb&&u>=Qb?d=Qb:u>=Ib?d=Ib:i===Ub&&u>=Ub?d=Ub:i===bb&&u>=bb&&(d=bb),d>=g&&(d=g,o=!0);var h=r+d;if(e.rangebreaks&&d>0){for(var B=0,p=0;p<84;p++){var F=(p+.5)/84;e.maskBreaks(r*(1-F)+F*h)!==Ab&&B++}(d*=B/84)||(t[n].drop=!0),o&&g>Qb&&(d=g)}(d>0||0===n)&&(t[n].periodX=r+d/2)}}(b,t,t._definedDelta),t.rangebreaks){var z="y"===t._id.charAt(0),O=1;"auto"===t.tickmode&&(O=t.tickfont?t.tickfont.size:12);var K=NaN;for(r=I.length-1;r>-1;r--)if(I[r].drop)I.splice(r,1);else{I[r].value=Gy(I[r].value,t);var P=t.c2p(I[r].value);(z?K>P-O:K<P+O)?I.splice(h?r+1:r,1):K=P}}Ly(t)&&360===Math.abs(d[1]-d[0])&&I.pop(),t._tmax=(I[I.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var j,q=function(e){e.text="",t._prevDateHead=a};function $(t,e){var i=Xb.tickText(t,e.value,!1,e.simpleLabel),n=e.periodX;return void 0!==n&&(i.periodX=n,(n>p||n<B)&&(n>p&&(i.periodX=p),n<B&&(i.periodX=B),q(i))),i}for(I=I.concat(U),r=0;r<I.length;r++){var tt=I[r].minor,et=I[r].value;tt?((j=u&&-1!==b.indexOf(I[r])?$(t,I[r]):{x:et}).minor=!0,Q.push(j)):(a=t._prevDateHead,j=$(t,I[r]),(I[r].skipLabel||u&&-1===b.indexOf(I[r]))&&q(j),f.push(j))}return f=f.concat(Q),t._inCalcTicks=!1,c&&f.length&&(f[0].noTick=!0),f};var ey=[2,5,10],iy=[1,2,3,6,12],ny=[1,2,5,10,15,30],ry=[1,2,3,7,14],ay=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],sy=[-.301,0,.301,.699,1],oy=[15,30,45,90,180];function ly(t,e,i){return e*tb.roundUp(t/e,i)}function cy(t){var e=t.dtick;if(t._tickexponent=0,jU(e)||"string"==typeof e||(e=1),"category"!==t.type&&"multicategory"!==t.type||(t._tickround=null),"date"===t.type){var i=t.r2l(t.tick0),n=t.l2r(i).replace(/(^-|i)/g,""),r=n.length;if("M"===String(e).charAt(0))r>10||"01-01"!==n.substr(5)?t._tickround="d":t._tickround=+e.substr(1)%12==0?"y":"m";else if(e>=Ib&&r<=10||e>=15*Ib)t._tickround="d";else if(e>=yb&&r<=16||e>=bb)t._tickround="M";else if(e>=mb&&r<=19||e>=yb)t._tickround="S";else{var a=t.l2r(i+e).replace(/^-/,"").length;t._tickround=Math.max(r,a)-20,t._tickround<0&&(t._tickround=4)}}else if(jU(e)||"L"===e.charAt(0)){var s=t.range.map(t.r2d||Number);jU(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var o=Math.max(Math.abs(s[0]),Math.abs(s[1])),l=Math.floor(Math.log(o)/Math.LN10+.01),c=void 0===t.minexponent?3:t.minexponent;Math.abs(l)>c&&(dy(t.exponentformat)&&!hy(l)?t._tickexponent=3*Math.round((l-1)/3):t._tickexponent=l)}else t._tickround=null}function gy(t,e,i){var n=t.tickfont||{};return{x:e,dx:0,dy:0,text:i||"",fontSize:n.size,font:n.family,fontWeight:n.weight,fontStyle:n.style,fontVariant:n.variant,fontTextcase:n.textcase,fontLineposition:n.lineposition,fontShadow:n.shadow,fontColor:n.color}}Xb.autoTicks=function(t,e,i){var n;function r(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=tb.dateTick0(t.calendar,0);var a=2*e;if(a>gb)e/=gb,n=r(10),t.dtick="M"+12*ly(e,n,ey);else if(a>Fb)e/=Fb,t.dtick="M"+ly(e,1,iy);else if(a>Ib){if(t.dtick=ly(e,Ib,t._hasDayOfWeekBreaks?[1,2,7,14]:ry),!i){var s=Xb.getTickFormat(t),o="period"===t.ticklabelmode;o&&(t._rawTick0=t.tick0),/%[uVW]/.test(s)?t.tick0=tb.dateTick0(t.calendar,2):t.tick0=tb.dateTick0(t.calendar,1),o&&(t._dowTick0=t.tick0)}}else a>bb?t.dtick=ly(e,bb,iy):a>yb?t.dtick=ly(e,yb,ny):a>mb?t.dtick=ly(e,mb,ny):(n=r(10),t.dtick=ly(e,n,ey))}else if("log"===t.type){t.tick0=0;var l=tb.simpleMap(t.range,t.r2l);if(t._isMinor&&(e*=1.5),e>.7)t.dtick=Math.ceil(e);else if(Math.abs(l[1]-l[0])<1){var c=1.5*Math.abs((l[1]-l[0])/e);e=Math.abs(Math.pow(10,l[1])-Math.pow(10,l[0]))/c,n=r(10),t.dtick="L"+ly(e,n,ey)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):Ly(t)?(t.tick0=0,n=1,t.dtick=ly(e,n,oy)):(t.tick0=0,n=r(10),t.dtick=ly(e,n,ey));if(0===t.dtick&&(t.dtick=1),!jU(t.dtick)&&"string"!=typeof t.dtick){var g=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(g)}},Xb.tickIncrement=function(t,e,i,n){var r=i?-1:1;if(jU(e))return tb.increment(t,r*e);var a=e.charAt(0),s=r*Number(e.substr(1));if("M"===a)return tb.incrementMonth(t,s,n);if("L"===a)return Math.log(Math.pow(10,t)+s)/Math.LN10;if("D"===a){var o="D2"===e?sy:ay,l=t+.01*r,c=tb.roundUp(tb.mod(l,1),o,i);return Math.floor(l)+Math.log(PU.round(Math.pow(10,c),1))/Math.LN10}throw"unrecognized dtick "+String(e)},Xb.tickFirst=function(t,e){var i=t.r2l||Number,n=tb.simpleMap(t.range,i,void 0,void 0,e),r=n[1]<n[0],a=r?Math.floor:Math.ceil,s=Jb(n)[0],o=t.dtick,l=i(t.tick0);if(jU(o)){var c=a((s-l)/o)*o+l;return"category"!==t.type&&"multicategory"!==t.type||(c=tb.constrain(c,0,t._categories.length-1)),c}var g=o.charAt(0),u=Number(o.substr(1));if("M"===g){for(var d,h,B,p=0,F=l;p<10;){if(((d=Xb.tickIncrement(F,o,r,t.calendar))-s)*(F-s)<=0)return r?Math.min(F,d):Math.max(F,d);h=(s-(F+d)/2)/(d-F),B=g+(Math.abs(Math.round(h))||1)*u,F=Xb.tickIncrement(F,B,h<0?!r:r,t.calendar),p++}return tb.error("tickFirst did not converge",t),F}if("L"===g)return Math.log(a((Math.pow(10,s)-l)/u)*u+l)/Math.LN10;if("D"===g){var f="D2"===o?sy:ay,Q=tb.roundUp(tb.mod(s,1),f,r);return Math.floor(s)+Math.log(PU.round(Math.pow(10,Q),1))/Math.LN10}throw"unrecognized dtick "+String(o)},Xb.tickText=function(t,e,i,n){var r,a=gy(t,e),s="array"===t.tickmode,o=i||s,l=t.type,c="category"===l?t.d2l_noadd:t.d2l,g=function(e){var i=t.l2p(e);return i>=0&&i<=t._length?e:null};if(s&&tb.isArrayOrTypedArray(t.ticktext)){var u=tb.simpleMap(t.range,t.r2l),d=(Math.abs(u[1]-u[0])-(t._lBreaks||0))/1e4;for(r=0;r<t.ticktext.length&&!(Math.abs(e-c(t.tickvals[r]))<d);r++);if(r<t.ticktext.length)return a.text=String(t.ticktext[r]),a.xbnd=[g(a.x-.5),g(a.x+t.dtick-.5)],a}function h(n){if(void 0===n)return!0;if(i)return"none"===n;var r={first:t._tmin,last:t._tmax}[n];return"all"!==n&&e!==r}var B=i?"never":"none"!==t.exponentformat&&h(t.showexponent)?"hide":"";if("date"===l?function(t,e,i,n){var r=t._tickround,a=i&&t.hoverformat||Xb.getTickFormat(t);n=!a&&n,n&&(r=jU(r)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[r]);var s,o=tb.formatDate(e.x,a,r,t._dateFormat,t.calendar,t._extraFormat),l=o.indexOf("\n");-1!==l&&(s=o.substr(l+1),o=o.substr(0,l));n&&(void 0===s||"00:00:00"!==o&&"00:00"!==o?8===o.length&&(o=o.replace(/:00$/,"")):(o=s,s=""));if(s)if(i)"d"===r?o+=", "+s:o=s+(o?", "+o:"");else if(t._inCalcTicks&&t._prevDateHead===s){var c=Ry(t),g=t._trueSide||t.side;(!c&&"top"===g||c&&"bottom"===g)&&(o+="<br> ")}else t._prevDateHead=s,o+="<br>"+s;e.text=o}(t,a,i,o):"log"===l?function(t,e,i,n,r){var a=t.dtick,s=e.x,o=t.tickformat,l="string"==typeof a&&a.charAt(0);"never"===r&&(r="");n&&"L"!==l&&(a="L3",l="L");if(o||"L"===l)e.text=By(Math.pow(10,s),t,r,n);else if(jU(a)||"D"===l&&tb.mod(s+.01,1)<.1){var c=Math.round(s),g=Math.abs(c),u=t.exponentformat;"power"===u||dy(u)&&hy(c)?(e.text=0===c?1:1===c?"10":"10<sup>"+(c>1?"":Cb)+g+"</sup>",e.fontSize*=1.25):("e"===u||"E"===u)&&g>2?e.text="1"+u+(c>0?"+":Cb)+g:(e.text=By(Math.pow(10,s),t,"","fakehover"),"D1"===a&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==l)throw"unrecognized dtick "+String(a);e.text=String(Math.round(Math.pow(10,tb.mod(s,1)))),e.fontSize*=.75}if("D1"===t.dtick){var d=String(e.text).charAt(0);"0"!==d&&"1"!==d||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(s<0?.5:.25)))}}(t,a,0,o,B):"category"===l?function(t,e){var i=t._categories[Math.round(e.x)];void 0===i&&(i="");e.text=String(i)}(t,a):"multicategory"===l?function(t,e,i){var n=Math.round(e.x),r=t._categories[n]||[],a=void 0===r[1]?"":String(r[1]),s=void 0===r[0]?"":String(r[0]);i?e.text=s+" - "+a:(e.text=a,e.text2=s)}(t,a,i):Ly(t)?function(t,e,i,n,r){if("radians"!==t.thetaunit||i)e.text=By(e.x,t,r,n);else{var a=e.x/180;if(0===a)e.text="0";else{var s=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}function i(t,n){return e(n,0)?t:i(n,t%n)}function n(t){for(var i=1;!e(Math.round(t*i)/i,t);)i*=10;return i}var r=n(t),a=t*r,s=Math.abs(i(a,r));return[Math.round(a/s),Math.round(r/s)]}(a);if(s[1]>=100)e.text=By(tb.deg2rad(e.x),t,r,n);else{var o=e.x<0;1===s[1]?1===s[0]?e.text="π":e.text=s[0]+"π":e.text=["<sup>",s[0],"</sup>","⁄","<sub>",s[1],"</sub>","π"].join(""),o&&(e.text=Cb+e.text)}}}}(t,a,i,o,B):function(t,e,i,n,r){"never"===r?r="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(r="hide");e.text=By(e.x,t,r,n)}(t,a,0,o,B),n||(t.tickprefix&&!h(t.showtickprefix)&&(a.text=t.tickprefix+a.text),t.ticksuffix&&!h(t.showticksuffix)&&(a.text+=t.ticksuffix)),t.labelalias&&t.labelalias.hasOwnProperty(a.text)){var p=t.labelalias[a.text];"string"==typeof p&&(a.text=p)}return("boundaries"===t.tickson||t.showdividers)&&(a.xbnd=[g(a.x-.5),g(a.x+t.dtick-.5)]),a},Xb.hoverLabelText=function(t,e,i){i&&(t=tb.extendFlat({},t,{hoverformat:i}));var n=tb.isArrayOrTypedArray(e)?e[0]:e,r=tb.isArrayOrTypedArray(e)?e[1]:void 0;if(void 0!==r&&r!==n)return Xb.hoverLabelText(t,n,i)+" - "+Xb.hoverLabelText(t,r,i);var a="log"===t.type&&n<=0,s=Xb.tickText(t,t.c2l(a?-n:n),"hover").text;return a?0===n?"0":Cb+s:s};var uy=["f","p","n","μ","m","","k","M","G","T"];function dy(t){return"SI"===t||"B"===t}function hy(t){return t>14||t<-15}function By(t,e,i,n){var r=t<0,a=e._tickround,s=i||e.exponentformat||"B",o=e._tickexponent,l=Xb.getTickFormat(e),c=e.separatethousands;if(n){var g={exponentformat:s,minexponent:e.minexponent,dtick:"none"===e.showexponent?e.dtick:jU(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};cy(g),a=(Number(g._tickround)||0)+4,o=g._tickexponent,e.hoverformat&&(l=e.hoverformat)}if(l)return e._numFormat(l)(t).replace(/-/g,Cb);var u,d=Math.pow(10,-a)/2;if("none"===s&&(o=0),(t=Math.abs(t))<d)t="0",r=!1;else{if(t+=d,o&&(t*=Math.pow(10,-o),a+=o),0===a)t=String(Math.floor(t));else if(a<0){t=(t=String(Math.round(t))).substr(0,t.length+a);for(var h=a;h<0;h++)t+="0"}else{var B=(t=String(t)).indexOf(".")+1;B&&(t=t.substr(0,B+a).replace(/\.?0+$/,""))}t=tb.numSeparate(t,e._separators,c)}o&&"hide"!==s&&(dy(s)&&hy(o)&&(s="power"),u=o<0?Cb+-o:"power"!==s?"+"+o:String(o),"e"===s||"E"===s?t+=s+u:"power"===s?t+="×10<sup>"+u+"</sup>":"B"===s&&9===o?t+="B":dy(s)&&(t+=uy[o/3+5]));return r?Cb+t:t}function py(t,e){if(t){var i=Object.keys(Vb).reduce((function(t,i){return-1!==e.indexOf(i)&&Vb[i].forEach((function(e){t[e]=1})),t}),{});Object.keys(t).forEach((function(e){i[e]||(1===e.length?t[e]=0:delete t[e])}))}}function Fy(t,e){for(var i=[],n={},r=0;r<e.length;r++){var a=e[r];n[a.text2]?n[a.text2].push(a.x):n[a.text2]=[a.x]}for(var s in n)i.push(gy(t,tb.interp(n[s],.5),s));return i}function fy(t){return void 0!==t.periodX?t.periodX:t.x}function Qy(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function Iy(t){var e=t.title.font.size,i=(t.title.text.match(ib.BR_TAG_ALL)||[]).length;return t.title.hasOwnProperty("standoff")?e*(Zb+i*Nb):i?e*(i+1)*Nb:e}function Uy(t,e){var i=t.l2p(e);return i>1&&i<t._length-1}function by(t){var e=PU.select(t),i=e.select(".text-math-group");return i.empty()?e.select("text"):i}function yy(t){return t._id+".automargin"}function my(t){return yy(t)+".mirror"}function xy(t){return t._id+".rangeslider"}function vy(t,e){for(var i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i])}function Cy(t,e,i){var n,r,a=[],s=[],o=t.layout;for(n=0;n<e.length;n++)a.push(Xb.getFromId(t,e[n]));for(n=0;n<i.length;n++)s.push(Xb.getFromId(t,i[n]));var l=Object.keys(sb),c=["anchor","domain","overlaying","position","side","tickangle","editType"],g=["linear","log"];for(n=0;n<l.length;n++){var u=l[n],d=a[0][u],h=s[0][u],B=!0,p=!1,F=!1;if("_"!==u.charAt(0)&&"function"!=typeof d&&-1===c.indexOf(u)){for(r=1;r<a.length&&B;r++){var f=a[r][u];"type"===u&&-1!==g.indexOf(d)&&-1!==g.indexOf(f)&&d!==f?p=!0:f!==d&&(B=!1)}for(r=1;r<s.length&&B;r++){var Q=s[r][u];"type"===u&&-1!==g.indexOf(h)&&-1!==g.indexOf(Q)&&h!==Q?F=!0:s[r][u]!==h&&(B=!1)}B&&(p&&(o[a[0]._name].type="linear"),F&&(o[s[0]._name].type="linear"),Ay(o,u,a,s,t._fullLayout._dfltTitle))}}for(n=0;n<t._fullLayout.annotations.length;n++){var I=t._fullLayout.annotations[n];-1!==e.indexOf(I.xref)&&-1!==i.indexOf(I.yref)&&tb.swapAttrs(o.annotations[n],["?"])}}function Ay(t,e,i,n,r){var a,s=tb.nestedProperty,o=s(t[i[0]._name],e).get(),l=s(t[n[0]._name],e).get();for("title"===e&&(o&&o.text===r.x&&(o.text=r.y),l&&l.text===r.y&&(l.text=r.x)),a=0;a<i.length;a++)s(t,i[a]._name+"."+e).set(l);for(a=0;a<n.length;a++)s(t,n[a]._name+"."+e).set(o)}function Ly(t){return"angularaxis"===t._id}function Gy(t,e){for(var i=e._rangebreaks.length,n=0;n<i;n++){var r=e._rangebreaks[n];if(t>=r.min&&t<r.max)return r.max}return t}function Ry(t){return-1!==(t.ticklabelposition||"").indexOf("inside")}function Sy(t,e){Ry(t._anchorAxis||{})&&t._hideCounterAxisInsideTickLabels&&t._hideCounterAxisInsideTickLabels(e)}function wy(t,e,i,n){var r,a="free"===t.anchor||void 0!==t.overlaying&&!1!==t.overlaying?t.overlaying:t._id;r=n?"right"===t.side?e:-e:e,a in i||(i[a]={}),t.side in i[a]||(i[a][t.side]=0),i[a][t.side]+=r}Xb.getTickFormat=function(t){var e,i,n;function r(t){return"string"!=typeof t?t:Number(t.replace("M",""))*Fb}function a(t,e){var i=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var n=i.indexOf(t.charAt(0)),r=i.indexOf(e.charAt(0));return n===r?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):n-r}return"number"==typeof t?1:-1}function s(t,e,i){var n=i||function(t){return t},r=e[0],a=e[1];return(!r&&"number"!=typeof r||n(r)<=n(t))&&(!a&&"number"!=typeof a||n(a)>=n(t))}function o(t,e){var i=null===e[0],n=null===e[1],r=a(t,e[0])>=0,s=a(t,e[1])<=0;return(i||r)&&(n||s)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((n=t.tickformatstops[e]).enabled&&s(t.dtick,n.dtickrange,r)){i=n;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((n=t.tickformatstops[e]).enabled&&o(t.dtick,n.dtickrange)){i=n;break}}return i?i.value:t.tickformat},Xb.getSubplots=function(t,e){var i=t._fullLayout._subplots,n=i.cartesian.concat(i.gl2d||[]),r=e?Xb.findSubplotsWithAxis(n,e):n;return r.sort((function(t,e){var i=t.substr(1).split("y"),n=e.substr(1).split("y");return i[0]===n[0]?+i[1]-+n[1]:+i[0]-+n[0]})),r},Xb.findSubplotsWithAxis=function(t,e){for(var i=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),n=[],r=0;r<t.length;r++){var a=t[r];i.test(a)&&n.push(a)}return n},Xb.makeClipPaths=function(t){var e=t._fullLayout;if(!e._hasOnlyLargeSploms){var i,n,r={_offset:0,_length:e.width,_id:""},a={_offset:0,_length:e.height,_id:""},s=Xb.list(t,"x",!0),o=Xb.list(t,"y",!0),l=[];for(i=0;i<s.length;i++)for(l.push({x:s[i],y:a}),n=0;n<o.length;n++)0===i&&l.push({x:r,y:o[n]}),l.push({x:s[i],y:o[n]});var c=e._clips.selectAll(".axesclip").data(l,(function(t){return t.x._id+t.y._id}));c.enter().append("clipPath").classed("axesclip",!0).attr("id",(function(t){return"clip"+e._uid+t.x._id+t.y._id})).append("rect"),c.exit().remove(),c.each((function(t){PU.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})}))}},Xb.draw=function(t,e,i){var n=t._fullLayout;"redraw"===e&&n._paper.selectAll("g.subplot").each((function(t){var e=t[0],i=n._plots[e];if(i){var r=i.xaxis,a=i.yaxis;i.xaxislayer.selectAll("."+r._id+"tick").remove(),i.yaxislayer.selectAll("."+a._id+"tick").remove(),i.xaxislayer.selectAll("."+r._id+"tick2").remove(),i.yaxislayer.selectAll("."+a._id+"tick2").remove(),i.xaxislayer.selectAll("."+r._id+"divider").remove(),i.yaxislayer.selectAll("."+a._id+"divider").remove(),i.minorGridlayer&&i.minorGridlayer.selectAll("path").remove(),i.gridlayer&&i.gridlayer.selectAll("path").remove(),i.zerolinelayer&&i.zerolinelayer.selectAll("path").remove(),n._infolayer.select(".g-"+r._id+"title").remove(),n._infolayer.select(".g-"+a._id+"title").remove()}}));var r=e&&"redraw"!==e?e:Xb.listIds(t),a=Xb.list(t).filter((function(t){return t.autoshift})).map((function(t){return t.overlaying}));r.map((function(e){var i=Xb.getFromId(t,e);if("sync"===i.tickmode&&i.overlaying){var n=r.findIndex((function(t){return t===i.overlaying}));n>=0&&r.unshift(r.splice(n,1).shift())}}));var s={false:{left:0,right:0}};return tb.syncOrAsync(r.map((function(e){return function(){if(e){var n=Xb.getFromId(t,e);i||(i={}),i.axShifts=s,i.overlayingShiftedAx=a;var r=Xb.drawOne(t,n,i);return n._shiftPusher&&wy(n,n._fullDepth||0,s,!0),n._r=n.range.slice(),n._rl=tb.simpleMap(n._r,n.r2l),r}}})))},Xb.drawOne=function(t,e,i){var n,r,a,s=(i=i||{}).axShifts||{},o=i.overlayingShiftedAx||[];e.setScale();var l=t._fullLayout,c=e._id,g=c.charAt(0),u=Xb.counterLetter(c),d=l._plots[e._mainSubplot];if(d){if(e._shiftPusher=e.autoshift||-1!==o.indexOf(e._id)||-1!==o.indexOf(e.overlaying),e._shiftPusher&"free"===e.anchor){var h=e.linewidth/2||0;"inside"===e.ticks&&(h+=e.ticklen),wy(e,h,s,!0),wy(e,e.shift||0,s,!1)}!0===i.skipTitle&&void 0!==e._shift||(e._shift=function(t,e){return t.autoshift?e[t.overlaying][t.side]:t.shift||0}(e,s));var B=d[g+"axislayer"],p=e._mainLinePosition,F=p+=e._shift,f=e._mainMirrorPosition,Q=e._vals=Xb.calcTicks(e),I=[e.mirror,F,f].join("_");for(n=0;n<Q.length;n++)Q[n].axInfo=I;e._selections={},e._tickAngles&&(e._prevTickAngles=e._tickAngles),e._tickAngles={},e._depth=null;var U={};if(e.visible){var b,y,m=Xb.makeTransTickFn(e),x=Xb.makeTransTickLabelFn(e),v="inside"===e.ticks,C="outside"===e.ticks;if("boundaries"===e.tickson){var A=function(t,e){var i,n=[],r=function(t,e){var i=t.xbnd[e];null!==i&&n.push(tb.extendFlat({},t,{x:i}))};if(e.length){for(i=0;i<e.length;i++)r(e[i],0);r(e[i-1],1)}return n}(0,Q);y=Xb.clipEnds(e,A),b=v?y:A}else y=Xb.clipEnds(e,Q),b=v&&"period"!==e.ticklabelmode?y:Q;var L,G=e._gridVals=y,R=function(t,e){var i,n,r=[],a=e.length&&e[e.length-1].x<e[0].x,s=function(t,e){var i=t.xbnd[e];null!==i&&r.push(tb.extendFlat({},t,{x:i}))};if(t.showdividers&&e.length){for(i=0;i<e.length;i++){var o=e[i];o.text2!==n&&s(o,a?1:0),n=o.text2}s(e[i-1],a?0:1)}return r}(e,Q);if(!l._hasOnlyLargeSploms){var S=e._subplotsWith,w={};for(n=0;n<S.length;n++){r=S[n];var V=(a=l._plots[r])[u+"axis"],E=V._mainAxis._id;if(!w[E]){w[E]=1;var Z="x"===g?"M0,"+V._offset+"v"+V._length:"M"+V._offset+",0h"+V._length;Xb.drawGrid(t,e,{vals:G,counterAxis:V,layer:a.gridlayer.select("."+c),minorLayer:a.minorGridlayer.select("."+c),path:Z,transFn:m}),Xb.drawZeroLine(t,e,{counterAxis:V,layer:a.zerolinelayer,path:Z,transFn:m})}}}var N=Xb.getTickSigns(e),D=Xb.getTickSigns(e,"minor");if(e.ticks||e.minor&&e.minor.ticks){var X,H,W,k,M=Xb.makeTickPath(e,F,N[2]),T=Xb.makeTickPath(e,F,D[2],{minor:!0});if(e._anchorAxis&&e.mirror&&!0!==e.mirror?(X=Xb.makeTickPath(e,f,N[3]),H=Xb.makeTickPath(e,f,D[3],{minor:!0}),W=M+X,k=T+H):(X="",H="",W=M,k=T),e.showdividers&&C&&"boundaries"===e.tickson){var Y={};for(n=0;n<R.length;n++)Y[R[n].x]=1;L=function(t){return Y[t.x]?X:W}}else L=function(t){return t.minor?k:W}}if(Xb.drawTicks(t,e,{vals:b,layer:B,path:L,transFn:m}),"allticks"===e.mirror){var J=Object.keys(e._linepositions||{});for(n=0;n<J.length;n++){r=J[n],a=l._plots[r];var _=e._linepositions[r]||[],z=_[0],O=_[1],K=_[2],P=Xb.makeTickPath(e,z,K?N[0]:D[0],{minor:K})+Xb.makeTickPath(e,O,K?N[1]:D[1],{minor:K});Xb.drawTicks(t,e,{vals:b,layer:a[g+"axislayer"],path:P,transFn:m})}}var j=[];if(j.push((function(){return Xb.drawLabels(t,e,{vals:Q,layer:B,plotinfo:a,transFn:x,labelFns:Xb.makeLabelFns(e,F)})})),"multicategory"===e.type){var q={x:2,y:10}[g];j.push((function(){var i={x:"height",y:"width"}[g],n=tt()[i]+q+(e._tickAngles[c+"tick"]?e.tickfont.size*Nb:0);return Xb.drawLabels(t,e,{vals:Fy(e,Q),layer:B,cls:c+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:m,labelFns:Xb.makeLabelFns(e,F+n*N[4])})})),j.push((function(){return e._depth=N[4]*(tt("tick2")[e.side]-F),function(t,e,i){var n=e._id+"divider",r=i.vals,a=i.layer.selectAll("path."+n).data(r,Qy);a.exit().remove(),a.enter().insert("path",":first-child").classed(n,1).classed("crisp",1).call(rb.stroke,e.dividercolor).style("stroke-width",ab.crispRound(t,e.dividerwidth,1)+"px"),a.attr("transform",i.transFn).attr("d",i.path)}(t,e,{vals:R,layer:B,path:Xb.makeTickPath(e,F,N[4],{len:e._depth}),transFn:m})}))}else e.title.hasOwnProperty("standoff")&&j.push((function(){e._depth=N[4]*(tt()[e.side]-F)}));var $=$U.getComponentMethod("rangeslider","isVisible")(e);return i.skipTitle||$&&"bottom"===e.side||j.push((function(){return function(t,e){var i,n=t._fullLayout,r=e._id,a=r.charAt(0),s=e.title.font.size,o=(e.title.text.match(ib.BR_TAG_ALL)||[]).length;if(e.title.hasOwnProperty("standoff"))"bottom"===e.side||"right"===e.side?i=e._depth+e.title.standoff+s*Zb:"top"!==e.side&&"left"!==e.side||(i=e._depth+e.title.standoff+s*(Eb+o*Nb));else{var l=Ry(e);if("multicategory"===e.type)i=e._depth;else{var c=1.5*s;l&&(c=.5*s,"outside"===e.ticks&&(c+=e.ticklen)),i=10+c+(e.linewidth?e.linewidth-1:0)}l||(i+="x"===a?"top"===e.side?s*(e.showticklabels?1:0):s*(e.showticklabels?1.5:.5):"right"===e.side?s*(e.showticklabels?1:.5):s*(e.showticklabels?.5:0))}var g,u,d,h,B=Xb.getPxPosition(t,e);"x"===a?(u=e._offset+e._length/2,d="top"===e.side?B-i:B+i):(d=e._offset+e._length/2,u="right"===e.side?B+i:B-i,g={rotate:"-90",offset:0});if("multicategory"!==e.type){var p=e._selections[e._id+"tick"];if(h={selection:p,side:e.side},p&&p.node()&&p.node().parentNode){var F=ab.getTranslate(p.node().parentNode);h.offsetLeft=F.x,h.offsetTop=F.y}e.title.hasOwnProperty("standoff")&&(h.pad=0)}return e._titleStandoff=i,nb.draw(t,r+"title",{propContainer:e,propName:e._name+".title.text",placeholder:n._dfltTitle[a],avoid:h,transform:g,attributes:{x:u,y:d,"text-anchor":"middle"}})}(t,e)})),j.push((function(){var i,n,r,a,s=e.side.charAt(0),o=Db[e.side].charAt(0),c=Xb.getPxPosition(t,e),d=C?e.ticklen:0;(e.automargin||$||e._shiftPusher)&&("multicategory"===e.type?i=tt("tick2"):(i=tt(),"x"===g&&"b"===s&&(e._depth=Math.max(i.width>0?i.bottom-c:0,d))));var h=0,B=0;if(e._shiftPusher&&(h=Math.max(d,i.height>0?"l"===s?c-i.left:i.right-c:0),e.title.text!==l._dfltTitle[g]&&(B=(e._titleStandoff||0)+(e._titleScoot||0),"l"===s&&(B+=Iy(e))),e._fullDepth=Math.max(h,B)),e.automargin){n={x:0,y:0,r:0,l:0,t:0,b:0};var p=[0,1],F="number"==typeof e._shift?e._shift:0;if("x"===g){if("b"===s?n[s]=e._depth:(n[s]=e._depth=Math.max(i.width>0?c-i.top:0,d),p.reverse()),i.width>0){var f=i.right-(e._offset+e._length);f>0&&(n.xr=1,n.r=f);var Q=e._offset-i.left;Q>0&&(n.xl=0,n.l=Q)}}else if("l"===s?(e._depth=Math.max(i.height>0?c-i.left:0,d),n[s]=e._depth-F):(e._depth=Math.max(i.height>0?i.right-c:0,d),n[s]=e._depth+F,p.reverse()),i.height>0){var I=i.bottom-(e._offset+e._length);I>0&&(n.yb=0,n.b=I);var U=e._offset-i.top;U>0&&(n.yt=1,n.t=U)}n[u]="free"===e.anchor?e.position:e._anchorAxis.domain[p[0]],e.title.text!==l._dfltTitle[g]&&(n[s]+=Iy(e)+(e.title.standoff||0)),e.mirror&&"free"!==e.anchor&&((r={x:0,y:0,r:0,l:0,t:0,b:0})[o]=e.linewidth,e.mirror&&!0!==e.mirror&&(r[o]+=d),!0===e.mirror||"ticks"===e.mirror?r[u]=e._anchorAxis.domain[p[1]]:"all"!==e.mirror&&"allticks"!==e.mirror||(r[u]=[e._counterDomainMin,e._counterDomainMax][p[1]]))}$&&(a=$U.getComponentMethod("rangeslider","autoMarginOpts")(t,e)),"string"==typeof e.automargin&&(py(n,e.automargin),py(r,e.automargin)),qU.autoMargin(t,yy(e),n),qU.autoMargin(t,my(e),r),qU.autoMargin(t,xy(e),a)})),tb.syncOrAsync(j)}}function tt(t){var i=c+(t||"tick");return U[i]||(U[i]=function(t,e,i){var n,r,a,s;if(t._selections[e].size())n=1/0,r=-1/0,a=1/0,s=-1/0,t._selections[e].each((function(){var t=by(this),e=ab.bBox(t.node().parentNode);n=Math.min(n,e.top),r=Math.max(r,e.bottom),a=Math.min(a,e.left),s=Math.max(s,e.right)}));else{var o=Xb.makeLabelFns(t,i);n=r=o.yFn({dx:0,dy:0,fontSize:0}),a=s=o.xFn({dx:0,dy:0,fontSize:0})}return{top:n,bottom:r,left:a,right:s,height:r-n,width:s-a}}(e,i,F)),U[i]}},Xb.getTickSigns=function(t,e){var i=t._id.charAt(0),n={x:"top",y:"right"}[i],r=t.side===n?1:-1,a=[-1,1,r,-r];return"inside"!==(e?(t.minor||{}).ticks:t.ticks)==("x"===i)&&(a=a.map((function(t){return-t}))),t.side&&a.push({l:-1,t:-1,r:1,b:1}[t.side.charAt(0)]),a},Xb.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return eb(t._offset+t.l2p(e.x),0)}:function(e){return eb(0,t._offset+t.l2p(e.x))}},Xb.makeTransTickLabelFn=function(t){var e=function(t){var e=t.ticklabelposition||"",i=function(t){return-1!==e.indexOf(t)},n=i("top"),r=i("left"),a=i("right"),s=i("bottom"),o=i("inside"),l=s||r||n||a;if(!l&&!o)return[0,0];var c=t.side,g=l?(t.tickwidth||0)/2:0,u=3,d=t.tickfont?t.tickfont.size:12;(s||n)&&(g+=d*Zb,u+=(t.linewidth||0)/2);(r||a)&&(g+=(t.linewidth||0)/2,u+=3);o&&"top"===c&&(u-=d*(1-Zb));(r||n)&&(g=-g);"bottom"!==c&&"right"!==c||(u=-u);return[l?g:0,o?u:0]}(t),i=t.ticklabelshift||0,n=t.ticklabelstandoff||0,r=e[0],a=e[1],s=t.range[0]>t.range[1],o=t.ticklabelposition&&-1!==t.ticklabelposition.indexOf("inside"),l=!o;i&&(i*=s?-1:1);if(n){var c=t.side;n*=o&&("top"===c||"left"===c)||l&&("bottom"===c||"right"===c)?1:-1}return"x"===t._id.charAt(0)?function(e){return eb(r+t._offset+t.l2p(fy(e))+i,a+n)}:function(e){return eb(a+n,r+t._offset+t.l2p(fy(e))+i)}},Xb.makeTickPath=function(t,e,i,n){n||(n={});var r=n.minor;if(r&&!t.minor)return"";var a=void 0!==n.len?n.len:r?t.minor.ticklen:t.ticklen,s=t._id.charAt(0),o=(t.linewidth||1)/2;return"x"===s?"M0,"+(e+o*i)+"v"+a*i:"M"+(e+o*i)+",0h"+a*i},Xb.makeLabelFns=function(t,e,i){var n=t.ticklabelposition||"",r=function(t){return-1!==n.indexOf(t)},a=r("top"),s=r("left"),o=r("right"),l=r("bottom")||s||a||o,c=r("inside"),g="inside"===n&&"inside"===t.ticks||!c&&"outside"===t.ticks&&"boundaries"!==t.tickson,u=0,d=0,h=g?t.ticklen:0;if(c?h*=-1:l&&(h=0),g&&(u+=h,i)){var B=tb.deg2rad(i);u=h*Math.cos(B)+1,d=h*Math.sin(B)}t.showticklabels&&(g||t.showline)&&(u+=.2*t.tickfont.size);var p,F,f,Q,I,U={labelStandoff:u+=(t.linewidth||1)/2*(c?-1:1),labelShift:d},b=0,y=t.side,m=t._id.charAt(0),x=t.tickangle;if("x"===m)Q=(I=!c&&"bottom"===y||c&&"top"===y)?1:-1,c&&(Q*=-1),p=d*Q,F=e+u*Q,f=I?1:-.2,90===Math.abs(x)&&(c?f+=Eb:f=-90===x&&"bottom"===y?Zb:90===x&&"top"===y?Eb:.5,b=Eb/2*(x/90)),U.xFn=function(t){return t.dx+p+b*t.fontSize},U.yFn=function(t){return t.dy+F+t.fontSize*f},U.anchorFn=function(t,e){if(l){if(s)return"end";if(o)return"start"}return jU(e)&&0!==e&&180!==e?e*Q<0!==c?"end":"start":"middle"},U.heightFn=function(e,i,n){return i<-60||i>60?-.5*n:"top"===t.side!==c?-n:0};else if("y"===m){if(Q=(I=!c&&"left"===y||c&&"right"===y)?1:-1,c&&(Q*=-1),p=u,F=d*Q,f=0,c||90!==Math.abs(x)||(f=-90===x&&"left"===y||90===x&&"right"===y?Zb:.5),c){var v=jU(x)?+x:0;if(0!==v){var C=tb.deg2rad(v);b=Math.abs(Math.sin(C))*Zb*Q,f=0}}U.xFn=function(t){return t.dx+e-(p+t.fontSize*f)*Q+b*t.fontSize},U.yFn=function(t){return t.dy+F+t.fontSize*Eb},U.anchorFn=function(t,e){return jU(e)&&90===Math.abs(e)?"middle":I?"end":"start"},U.heightFn=function(e,i,n){return"right"===t.side&&(i*=-1),i<-30?-n:i<30?-.5*n:0}}return U},Xb.drawTicks=function(t,e,i){i=i||{};var n=e._id+"tick",r=[].concat(e.minor&&e.minor.ticks?i.vals.filter((function(t){return t.minor&&!t.noTick})):[]).concat(e.ticks?i.vals.filter((function(t){return!t.minor&&!t.noTick})):[]),a=i.layer.selectAll("path."+n).data(r,Qy);a.exit().remove(),a.enter().append("path").classed(n,1).classed("ticks",1).classed("crisp",!1!==i.crisp).each((function(t){return rb.stroke(PU.select(this),t.minor?e.minor.tickcolor:e.tickcolor)})).style("stroke-width",(function(i){return ab.crispRound(t,i.minor?e.minor.tickwidth:e.tickwidth,1)+"px"})).attr("d",i.path).style("display",null),Sy(e,[Sb]),a.attr("transform",i.transFn)},Xb.drawGrid=function(t,e,i){if(i=i||{},"sync"!==e.tickmode){var n=e._id+"grid",r=e.minor&&e.minor.showgrid,a=r?i.vals.filter((function(t){return t.minor})):[],s=e.showgrid?i.vals.filter((function(t){return!t.minor})):[],o=i.counterAxis;if(o&&Xb.shouldShowZeroLine(t,e,o))for(var l="array"===e.tickmode,c=0;c<s.length;c++){var g=s[c].x;if(l?!g:Math.abs(g)<e.dtick/100){if(s=s.slice(0,c).concat(s.slice(c+1)),!l)break;c--}}e._gw=ab.crispRound(t,e.gridwidth,1);for(var u=r?ab.crispRound(t,e.minor.gridwidth,1):0,d=i.layer,h=i.minorLayer,B=1;B>=0;B--){var p=B?d:h;if(p){var F=p.selectAll("path."+n).data(B?s:a,Qy);F.exit().remove(),F.enter().append("path").classed(n,1).classed("crisp",!1!==i.crisp),F.attr("transform",i.transFn).attr("d",i.path).each((function(t){return rb.stroke(PU.select(this),t.minor?e.minor.gridcolor:e.gridcolor||"#ddd")})).style("stroke-dasharray",(function(t){return ab.dashStyle(t.minor?e.minor.griddash:e.griddash,t.minor?e.minor.gridwidth:e.gridwidth)})).style("stroke-width",(function(t){return(t.minor?u:e._gw)+"px"})).style("display",null),"function"==typeof i.path&&F.attr("d",i.path)}}Sy(e,[Gb,Rb])}},Xb.drawZeroLine=function(t,e,i){i=i||i;var n=e._id+"zl",r=Xb.shouldShowZeroLine(t,e,i.counterAxis),a=i.layer.selectAll("path."+n).data(r?[{x:0,id:e._id}]:[]);a.exit().remove(),a.enter().append("path").classed(n,1).classed("zl",1).classed("crisp",!1!==i.crisp).each((function(){i.layer.selectAll("path").sort((function(t,e){return kb(t.id,e.id)}))})),a.attr("transform",i.transFn).attr("d",i.path).call(rb.stroke,e.zerolinecolor||rb.defaultLine).style("stroke-width",ab.crispRound(t,e.zerolinewidth,e._gw||1)+"px").style("display",null),Sy(e,[Lb])},Xb.drawLabels=function(t,e,i){i=i||{};var n=t._fullLayout,r=e._id,a=i.cls||r+"tick",s=i.vals.filter((function(t){return t.text})),o=i.labelFns,l=i.secondary?0:e.tickangle,c=(e._prevTickAngles||{})[a],g=i.layer.selectAll("g."+a).data(e.showticklabels?s:[],Qy),u=[];function d(t,n){t.each((function(t){var r=PU.select(this),a=r.select(".text-math-group"),s=o.anchorFn(t,n),l=i.transFn.call(r.node(),t)+(jU(n)&&0!=+n?" rotate("+n+","+o.xFn(t)+","+(o.yFn(t)-t.fontSize/2)+")":""),c=ib.lineCount(r),g=Nb*t.fontSize,u=o.heightFn(t,jU(n)?+n:0,(c-1)*g);if(u&&(l+=eb(0,u)),a.empty()){var d=r.select("text");d.attr({transform:l,"text-anchor":s}),d.style("opacity",1),e._adjustTickLabelsOverflow&&e._adjustTickLabelsOverflow()}else{var h=ab.bBox(a.node()).width*{end:-.5,start:.5}[s];a.attr("transform",l+eb(h,0))}}))}g.enter().append("g").classed(a,1).append("text").attr("text-anchor","middle").each((function(e){var i=PU.select(this),n=t._promises.length;i.call(ib.positionText,o.xFn(e),o.yFn(e)).call(ab.font,{family:e.font,size:e.fontSize,color:e.fontColor,weight:e.fontWeight,style:e.fontStyle,variant:e.fontVariant,textcase:e.fontTextcase,lineposition:e.fontLineposition,shadow:e.fontShadow}).text(e.text).call(ib.convertToTspans,t),t._promises[n]?u.push(t._promises.pop().then((function(){d(i,l)}))):d(i,l)})),Sy(e,[wb]),g.exit().remove(),i.repositionOnUpdate&&g.each((function(t){PU.select(this).select("text").call(ib.positionText,o.xFn(t),o.yFn(t))})),e._adjustTickLabelsOverflow=function(){var i=e.ticklabeloverflow;if(i&&"allow"!==i){var r=-1!==i.indexOf("hide"),a="x"===e._id.charAt(0),s=0,o=a?t._fullLayout.width:t._fullLayout.height;if(-1!==i.indexOf("domain")){var l=tb.simpleMap(e.range,e.r2l);s=e.l2p(l[0])+e._offset,o=e.l2p(l[1])+e._offset}var c=Math.min(s,o),u=Math.max(s,o),d=e.side,h=1/0,B=-1/0;for(var p in g.each((function(t){var i=PU.select(this);if(i.select(".text-math-group").empty()){var n=ab.bBox(i.node()),s=0;a?(n.right>u||n.left<c)&&(s=1):(n.bottom>u||n.top+(e.tickangle?0:t.fontSize/4)<c)&&(s=1);var o=i.select("text");s?r&&o.style("opacity",0):(o.style("opacity",1),h="bottom"===d||"right"===d?Math.min(h,a?n.top:n.left):-1/0,B="top"===d||"left"===d?Math.max(B,a?n.bottom:n.right):1/0)}})),n._plots){var F=n._plots[p];if(e._id===F.xaxis._id||e._id===F.yaxis._id){var f=a?F.yaxis:F.xaxis;f&&(f["_visibleLabelMin_"+e._id]=h,f["_visibleLabelMax_"+e._id]=B)}}}},e._hideCounterAxisInsideTickLabels=function(t){var i="x"===e._id.charAt(0),r=[];for(var a in n._plots){var s=n._plots[a];e._id!==s.xaxis._id&&e._id!==s.yaxis._id||r.push(i?s.yaxis:s.xaxis)}r.forEach((function(i,r){i&&Ry(i)&&(t||[Lb,Rb,Gb,Sb,wb]).forEach((function(t){var a="tick"===t.K&&"text"===t.L&&"period"===e.ticklabelmode,s=n._plots[e._mainSubplot];(t.K===Lb.K?s.zerolinelayer.selectAll("."+e._id+"zl"):t.K===Rb.K?s.minorGridlayer.selectAll("."+e._id):t.K===Gb.K?s.gridlayer.selectAll("."+e._id):s[e._id.charAt(0)+"axislayer"]).each((function(){var n=PU.select(this);t.L&&(n=n.selectAll(t.L)),n.each((function(n){var s=e.l2p(a?fy(n):n.x)+e._offset,o=PU.select(this);s<e["_visibleLabelMax_"+i._id]&&s>e["_visibleLabelMin_"+i._id]?o.style("display","none"):"tick"!==t.K||r||o.style("display",null)}))}))}))}))},d(g,c+1?c:l);var h=null;e._selections&&(e._selections[a]=g);var B=[function(){return u.length&&Promise.all(u)}];e.automargin&&n._redrawFromAutoMarginCount&&90===c?(h=c,B.push((function(){d(g,c)}))):B.push((function(){if(d(g,l),s.length&&e.autotickangles&&("log"!==e.type||"D"!==String(e.dtick).charAt(0))){h=e.autotickangles[0];var t,n=0,r=[],a=1;g.each((function(t){n=Math.max(n,t.fontSize);var i=e.l2p(t.x),s=by(this),o=ab.bBox(s.node());a=Math.max(a,ib.lineCount(s)),r.push({top:0,bottom:10,height:10,left:i-o.width/2,right:i+o.width/2+2,width:o.width+2})}));var o=("boundaries"===e.tickson||e.showdividers)&&!i.secondary,c=s.length,u=Math.abs((s[c-1].x-s[0].x)*e._m)/(c-1),B=o?u/2:u,p=o?e.ticklen:1.25*n*a,F=B/Math.sqrt(Math.pow(B,2)+Math.pow(p,2)),f=e.autotickangles.map((function(t){return t*Math.PI/180})),Q=f.find((function(t){return Math.abs(Math.cos(t))<=F}));void 0===Q&&(Q=f.reduce((function(t,e){return Math.abs(Math.cos(t))<Math.abs(Math.cos(e))?t:e}),f[0]));var I=Q*(180/Math.PI);if(o){var U=2;for(e.ticks&&(U+=e.tickwidth/2),t=0;t<r.length;t++){var b=s[t].xbnd,y=r[t];if(null!==b[0]&&y.left-e.l2p(b[0])<U||null!==b[1]&&e.l2p(b[1])-y.right<U){h=I;break}}}else{var m=e.ticklabelposition||"",x=function(t){return-1!==m.indexOf(t)},v=x("top"),C=x("left"),A=x("right"),L=x("bottom")||C||v||A?(e.tickwidth||0)+6:0;for(t=0;t<r.length-1;t++)if(tb.bBoxIntersect(r[t],r[t+1],L)){h=I;break}}h&&d(g,h)}})),e._tickAngles&&B.push((function(){e._tickAngles[a]=null===h?jU(l)?l:0:h}));var p=function(){var t=0,i=0;return g.each((function(n,r){var a,s=by(this);s.select(".text-math-group").empty()&&(e._vals[r]&&(a=e._vals[r].bb||ab.bBox(s.node()),e._vals[r].bb=a),t=Math.max(t,a.width),i=Math.max(i,a.height))})),{labelsMaxW:t,labelsMaxH:i}},F=e._anchorAxis;if(F&&(F.autorange||F.insiderange)&&Ry(e)&&!Mb(n,e._id)&&(n._insideTickLabelsUpdaterange||(n._insideTickLabelsUpdaterange={}),F.autorange&&(n._insideTickLabelsUpdaterange[F._name+".autorange"]=F.autorange,B.push(p)),F.insiderange)){var f=p(),Q="y"===e._id.charAt(0)?f.labelsMaxW:f.labelsMaxH;Q+=6,"inside"===e.ticklabelposition&&(Q+=e.ticklen||0);var I="right"===e.side||"top"===e.side?1:-1,U=1===I?1:0,b=1===I?0:1,y=[];y[b]=F.range[b];var m=F.range,x=F.r2p(m[U]),v=F.r2p(m[b]),C=n._insideTickLabelsUpdaterange[F._name+".range"];if(C){var A=F.r2p(C[U]),L=F.r2p(C[b]),G=I*("y"===e._id.charAt(0)?1:-1);G*x<G*A&&(x=A,y[U]=m[U]=C[U]),G*v>G*L&&(v=L,y[b]=m[b]=C[b])}var R=Math.abs(v-x);R-Q>0?Q*=1+Q/(R-=Q):Q=0,"y"!==e._id.charAt(0)&&(Q=-Q),y[U]=F.p2r(F.r2p(m[U])+I*Q),"min"===F.autorange||"max reversed"===F.autorange?(y[0]=null,F._rangeInitial0=void 0,F._rangeInitial1=void 0):"max"!==F.autorange&&"min reversed"!==F.autorange||(y[1]=null,F._rangeInitial0=void 0,F._rangeInitial1=void 0),n._insideTickLabelsUpdaterange[F._name+".range"]=y}var S=tb.syncOrAsync(B);return S&&S.then&&t._promises.push(S),S},Xb.getPxPosition=function(t,e){var i,n=t._fullLayout._size,r=e._id.charAt(0),a=e.side;return"free"!==e.anchor?i=e._anchorAxis:"x"===r?i={_offset:n.t+(1-(e.position||0))*n.h,_length:0}:"y"===r&&(i={_offset:n.l+(e.position||0)*n.w+e._shift,_length:0}),"top"===a||"left"===a?i._offset:"bottom"===a||"right"===a?i._offset+i._length:void 0},Xb.shouldShowZeroLine=function(t,e,i){var n=tb.simpleMap(e.range,e.r2l);return n[0]*n[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&!(e.rangebreaks&&e.maskBreaks(0)===Ab)&&(Uy(e,0)||!function(t,e,i,n){var r=i._mainAxis;if(!r)return;var a=t._fullLayout,s=e._id.charAt(0),o=Xb.counterLetter(e._id),l=e._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===s)?0:e._length);function c(t){if(!t.showline||!t.linewidth)return!1;var i=Math.max((t.linewidth+e.zerolinewidth)/2,1);function n(t){return"number"==typeof t&&Math.abs(t-l)<i}if(n(t._mainLinePosition)||n(t._mainMirrorPosition))return!0;var r=t._linepositions||{};for(var a in r)if(n(r[a][0])||n(r[a][1]))return!0}var g=a._plots[i._mainSubplot];if(!(g.mainplotinfo||g).overlays.length)return c(i);for(var u=Xb.list(t,o),d=0;d<u.length;d++){var h=u[d];if(h._mainAxis===r&&c(h))return!0}}(t,e,i,n)||function(t,e){for(var i=t._fullData,n=e._mainSubplot,r=e._id.charAt(0),a=0;a<i.length;a++){var s=i[a];if(!0===s.visible&&s.xaxis+s.yaxis===n){if($U.traceIs(s,"bar-like")&&s.orientation==={x:"h",y:"v"}[r])return!0;if(s.fill&&s.fill.charAt(s.fill.length-1)===r)return!0}}return!1}(t,e))},Xb.clipEnds=function(t,e){return e.filter((function(e){return Uy(t,e.x)}))},Xb.allowAutoMargin=function(t){for(var e=Xb.list(t,"",!0),i=0;i<e.length;i++){var n=e[i];n.automargin&&(qU.allowAutoMargin(t,yy(n)),n.mirror&&qU.allowAutoMargin(t,my(n))),$U.getComponentMethod("rangeslider","isVisible")(n)&&qU.allowAutoMargin(t,xy(n))}},Xb.swap=function(t,e){for(var i=function(t,e){var i,n,r=[];for(i=0;i<e.length;i++){var a=[],s=t._fullData[e[i]].xaxis,o=t._fullData[e[i]].yaxis;if(s&&o){for(n=0;n<r.length;n++)-1===r[n].x.indexOf(s)&&-1===r[n].y.indexOf(o)||a.push(n);if(a.length){var l,c=r[a[0]];if(a.length>1)for(n=1;n<a.length;n++)l=r[a[n]],vy(c.x,l.x),vy(c.y,l.y);vy(c.x,[s]),vy(c.y,[o])}else r.push({x:[s],y:[o]})}}return r}(t,e),n=0;n<i.length;n++)Cy(t,i[n].x,i[n].y)};var Vy=mF.exports,Ey=function(t,e,i){var n,r;if(i){var a="reversed"===e||"min reversed"===e||"max reversed"===e;n=i[a?1:0],r=i[a?0:1]}var s=t("autorangeoptions.minallowed",null===r?n:void 0),o=t("autorangeoptions.maxallowed",null===n?r:void 0);void 0===s&&t("autorangeoptions.clipmin"),void 0===o&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")},Zy=function(t,e,i,n){var r=e._template||{},a=e.type||r.type||"-";i("minallowed"),i("maxallowed");var s,o=i("range");o||(n.noInsiderange||"log"===a||(!(s=i("insiderange"))||null!==s[0]&&null!==s[1]||(e.insiderange=!1,s=void 0),s&&(o=i("range",s))));var l,c=e.getAutorangeDflt(o,n),g=i("autorange",c);!o||(null!==o[0]||null!==o[1])&&(null!==o[0]&&null!==o[1]||"reversed"!==g&&!0!==g)&&(null===o[0]||"min"!==g&&"max reversed"!==g)&&(null===o[1]||"max"!==g&&"min reversed"!==g)||(o=void 0,delete e.range,e.autorange=!0,l=!0),l||(g=i("autorange",c=e.getAutorangeDflt(o,n))),g&&(Ey(i,g,o),"linear"!==a&&"-"!==a||i("rangemode")),e.cleanRange()},Ny={},Dy={exports:{}},Xy={left:0,top:0},Hy=function(t,e,i){e=e||t.currentTarget||t.srcElement,Array.isArray(i)||(i=[0,0]);var n=t.clientX||0,r=t.clientY||0,a=(s=e,s===window||s===document||s===document.body?Xy:s.getBoundingClientRect());var s;return i[0]=n-a.left,i[1]=r-a.top,i};var Wy=_B,ky=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],My={exports:{}},Ty=Ip,Yy=Mh,Jy=xd.getGraphDiv,_y=zg,zy=My.exports={};zy.wrapped=function(t,e,i){(t=Jy(t))._fullLayout&&Yy.clear(t._fullLayout._uid+_y.HOVERID),zy.raw(t,e,i)},zy.raw=function(t,e){var i=t._fullLayout,n=t._hoverdata;e||(e={}),e.target&&!t._dragged&&!1===Ty.triggerHandler(t,"plotly_beforehover",e)||(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&n&&t.emit("plotly_unhover",{event:e,points:n}))};var Oy=My.exports,Ky=Hy,Py=tp,jy=_B.removeElement,qy=Np,$y=Dy.exports={};$y.align=function(t,e,i,n,r){var a=(t-i)/(n-i),s=a+e/(n-i),o=(a+s)/2;return"left"===r||"bottom"===r?a:"center"===r||"middle"===r?o:"right"===r||"top"===r?s:a<2/3-o?a:s>4/3-o?s:o},$y.getCursor=function(t,e,i,n){return t="left"===i?0:"center"===i?1:"right"===i?2:Wy.constrain(Math.floor(3*t),0,2),e="bottom"===n?0:"middle"===n?1:"top"===n?2:Wy.constrain(Math.floor(3*e),0,2),ky[e][t]};var tm=Oy;function em(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function im(t){return Ky(t.changedTouches?t.changedTouches[0]:t,document.body)}$y.unhover=tm.wrapped,$y.unhoverRaw=tm.raw,$y.init=function(t){var e,i,n,r,a,s,o,l,c=t.gd,g=1,u=c._context.doubleClickDelay,d=t.element;c._mouseDownTime||(c._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=B,d.ontouchstart=B;var h=t.clampFn||function(t,e,i){return Math.abs(t)<i&&(t=0),Math.abs(e)<i&&(e=0),[t,e]};function B(h){c._dragged=!1,c._dragging=!0;var B=im(h);e=B[0],i=B[1],o=h.target,s=h,l=2===h.buttons||h.ctrlKey,void 0===h.clientX&&void 0===h.clientY&&(h.clientX=e,h.clientY=i),(n=(new Date).getTime())-c._mouseDownTime<u?g+=1:(g=1,c._mouseDownTime=n),t.prepFn&&t.prepFn(h,e,i),Py&&!l?(a=em()).style.cursor=window.getComputedStyle(d).cursor:Py||(a=document,r=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mouseup",F),document.addEventListener("touchend",F),!1!==t.dragmode&&(h.preventDefault(),document.addEventListener("mousemove",p),document.addEventListener("touchmove",p,{passive:!1}))}function p(n){n.preventDefault();var r=im(n),a=t.minDrag||qy.MINDRAG,s=h(r[0]-e,r[1]-i,a),o=s[0],g=s[1];(o||g)&&(c._dragged=!0,$y.unhover(c,n)),c._dragged&&t.moveFn&&!l&&(c._dragdata={element:d,dx:o,dy:g},t.moveFn(o,g))}function F(e){if(delete c._dragdata,!1!==t.dragmode&&(e.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("touchmove",p)),document.removeEventListener("mouseup",F),document.removeEventListener("touchend",F),Py?jy(a):r&&(a.documentElement.style.cursor=r,r=null),c._dragging){if(c._dragging=!1,(new Date).getTime()-c._mouseDownTime>u&&(g=Math.max(g-1,1)),c._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(g,s),!l){var i;try{i=new MouseEvent("click",e)}catch(t){var n=im(e);(i=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,n[0],n[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}o.dispatchEvent(i)}c._dragging=!1,c._dragged=!1}else c._dragged=!1}},$y.coverSlip=em;var nm=Dy.exports,rm={},am=function(t,e){(t.attr("class")||"").split(" ").forEach((function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)})),e&&t.classed("cursor-"+e,!0)},sm=am,om="data-savedcursor",lm=_g(),cm=uu,gm={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend",description:["Determines whether or not this legend is visible."].join(" ")},bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:cm.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:lm({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:lm({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},entrywidth:{valType:"number",min:0,editType:"legend",description:["Sets the width (in px or fraction) of the legend.","Use 0 to size the entry based on the text width,","when `entrywidthmode` is set to *pixels*."].join(" ")},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend",description:"Determines what entrywidth means."},indentation:{valType:"number",min:-15,dflt:0,editType:"legend",description:"Sets the indentation (in px) of the legend entries."},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",editType:"legend",description:["Sets the x position with respect to `xref` (in normalized coordinates) of the legend.","When `xref` is *paper*, defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends.","When `xref` is *container*, defaults to *1* for vertical legends and","defaults to *0* for horizontal legends.","Must be between *0* and *1* if `xref` is *container*.","and between *-2* and *3* if `xref` is *paper*."].join(" ")},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",editType:"legend",description:["Sets the y position with respect to `yref` (in normalized coordinates) of the legend.","When `yref` is *paper*, defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders.","When `yref` is *container*, defaults to *1*.","Must be between *0* and *1* if `yref` is *container*","and between *-2* and *3* if `yref` is *paper*."].join(" ")},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:lm({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","top center and top right are for horizontal alignment","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"},um={isGrouped:function(t){return-1!==(t.traceorder||"").indexOf("grouped")},isVertical:function(t){return"h"!==t.orientation},isReversed:function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},dm=Nu,hm=_B,Bm=Ap,pm=ru,Fm=gm,fm=Qh,Qm=um;function Im(t,e,i,n){var r=e[t]||{},a=Bm.newContainer(i,t);function s(t,e){return hm.coerce(r,a,Fm,t,e)}var o=hm.coerceFont(s,"font",i.font);if(s("bgcolor",i.paper_bgcolor),s("bordercolor"),s("visible")){for(var l,c=function(t,e){var i=l._input,n=l;return hm.coerce(i,n,pm,t,e)},g=i.font||{},u=hm.coerceFont(s,"grouptitlefont",g,{overrideDflt:{size:Math.round(1.1*g.size)}}),d=0,h=!1,B="normal",p=(i.shapes||[]).filter((function(t){return t.showlegend})),F=n.concat(p).filter((function(e){return t===(e.legend||"legend")})),f=0;f<F.length;f++)if((l=F[f]).visible){var Q=l._isShape;(l.showlegend||l._dfltShowLegend&&!(l._module&&l._module.attributes&&l._module.attributes.showlegend&&!1===l._module.attributes.showlegend.dflt))&&(d++,l.showlegend&&(h=!0,(!Q&&dm.traceIs(l,"pie-like")||!0===l._input.showlegend)&&d++),hm.coerceFont(c,"legendgrouptitle.font",u)),(!Q&&dm.traceIs(l,"bar")&&"stack"===i.barmode||-1!==["tonextx","tonexty"].indexOf(l.fill))&&(B=Qm.isGrouped({traceorder:B})?"grouped+reversed":"reversed"),void 0!==l.legendgroup&&""!==l.legendgroup&&(B=Qm.isReversed({traceorder:B})?"reversed+grouped":"grouped")}var I=hm.coerce(e,i,fm,"showlegend",h&&d>("legend"===t?1:0));if(!1===I&&(i[t]=void 0),(!1!==I||r.uirevision)&&(s("uirevision",i.uirevision),!1!==I)){s("borderwidth");var U,b,y,m="h"===s("orientation"),x="paper"===s("yref"),v="paper"===s("xref"),C="left";if(m?(U=0,dm.getComponentMethod("rangeslider","isVisible")(e.xaxis)?x?(b=1.1,y="bottom"):(b=1,y="top"):x?(b=-.1,y="top"):(b=0,y="bottom")):(b=1,y="auto",v?U=1.02:(U=1,C="right")),hm.coerce(r,a,{x:{valType:"number",editType:"legend",min:v?-2:0,max:v?3:1,dflt:U}},"x"),hm.coerce(r,a,{y:{valType:"number",editType:"legend",min:x?-2:0,max:x?3:1,dflt:b}},"y"),s("traceorder",B),Qm.isGrouped(i[t])&&s("tracegroupgap"),s("entrywidth"),s("entrywidthmode"),s("indentation"),s("itemsizing"),s("itemwidth"),s("itemclick"),s("itemdoubleclick"),s("groupclick"),s("xanchor",C),s("yanchor",y),s("valign"),hm.noneOrAll(r,a,["x","y"]),s("title.text")){s("title.side",m?"left":"top");var A=hm.extendFlat({},o,{size:hm.bigFont(o.size)});hm.coerceFont(s,"title.font",A)}}}}var Um=function(t,e,i){var n,r=i.slice(),a=e.shapes;if(a)for(n=0;n<a.length;n++){var s=a[n];if(s.showlegend){var o={_input:s._input,visible:s.visible,showlegend:s.showlegend,legend:s.legend};r.push(o)}}var l=["legend"];for(n=0;n<r.length;n++)hm.pushUnique(l,r[n].legend);for(e._legends=[],n=0;n<l.length;n++){var c=l[n];Im(c,t,e,r),e[c]&&e[c].visible&&(e[c]._id=c),e._legends.push(c)}},bm=Nu,ym=_B,mm=ym.pushUnique,xm=!0,vm={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5},Cm=Nu,Am=um,Lm={};!function(t){var e=_B;function i(t){return-1!==t.indexOf("e")?t.replace(/[.]?0+e/,"e"):-1!==t.indexOf(".")?t.replace(/[.]?0+$/,""):t}t.formatPiePercent=function(t,n){var r=i((100*t).toPrecision(3));return e.numSeparate(r,n)+"%"},t.formatPieValue=function(t,n){var r=i(t.toPrecision(10));return e.numSeparate(r,n)},t.getFirstFilled=function(t,i){if(e.isArrayOrTypedArray(t))for(var n=0;n<i.length;n++){var r=t[i[n]];if(r||0===r||""===r)return r}},t.castOption=function(i,n){return e.isArrayOrTypedArray(i)?t.getFirstFilled(i,n):i||void 0},t.getRotationAngle=function(t){return("auto"===t?0:t)*Math.PI/180}}(Lm);var Gm=jI,Rm=Uu,Sm=Uu,wm=Lm.castOption,Vm=function(t,e,i,n){var r=i.marker.pattern;r&&r.shape?Gm.pointStyle(t,i,n,e):Rm.fill(t,e.color)},Em=Js,Zm=Nu,Nm=_B,Dm=Nm.strTranslate,Xm=jI,Hm=Uu,Wm=kF.extractOpts,km=WQ,Mm=function(t,e,i,n){var r=i.marker.line,a=wm(r.color,e.pts)||Sm.defaultLine,s=wm(r.width,e.pts)||0;t.call(Vm,e,i,n).style("stroke-width",s).call(Sm.stroke,a)},Tm=Lm.castOption,Ym=vm,Jm=function(t,e,i){var n=e._fullLayout;i||(i=n.legend);var r="constant"===i.itemsizing,a=i.itemwidth,s=Dm((a+2*Ym.itemGap)/2,0),o=function(t,e,i,n){var a;if(t+1)a=t;else{if(!(e&&e.width>0))return 0;a=e.width}return r?n:Math.min(a,i)};function l(t,n,r){var a=t[0].trace,l=a.marker||{},c=l.line||{},g=l.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",u=r?a.visible&&a.type===r:Zm.traceIs(a,"bar"),d=Em.select(n).select("g.legendpoints").selectAll("path.legend"+r).data(u?[t]:[]);d.enter().append("path").classed("legend"+r,!0).attr("d",g).attr("transform",s),d.exit().remove(),d.each((function(t){var n=Em.select(this),r=t[0],s=o(r.mlw,l.line,5,2);n.style("stroke-width",s+"px");var g=r.mcc;if(!i._inHover&&"mc"in r){var u=Wm(l),d=u.mid;void 0===d&&(d=(u.max+u.min)/2),g=Xm.tryColorscale(l,"")(d)}var h=g||r.mc||l.color,B=l.pattern,p=B&&Xm.getPatternAttr(B.shape,0,"");if(p){var F=Xm.getPatternAttr(B.bgcolor,0,null),f=Xm.getPatternAttr(B.fgcolor,0,null),Q=B.fgopacity,I=Om(B.size,8,10),U=Om(B.solidity,.5,1),b="legend-"+a.uid;n.call(Xm.pattern,"legend",e,b,p,I,U,g,B.fillmode,F,f,Q)}else n.call(Hm.fill,h);s&&Hm.stroke(n,r.mlc||c.color)}))}function c(t,i,n){var r=t[0],a=r.trace,l=n?a.visible&&a.type===n:Zm.traceIs(a,n),c=Em.select(i).select("g.legendpoints").selectAll("path.legend"+n).data(l?[t]:[]);if(c.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",s),c.exit().remove(),c.size()){var g=a.marker||{},u=o(Tm(g.line.width,r.pts),g.line,5,2),d="pieLike",h=Nm.minExtend(a,{marker:{line:{width:u}}},d),B=Nm.minExtend(r,{trace:h},d);Mm(c,B,h,e)}}t.each((function(t){var e=Em.select(this),n=Nm.ensureSingle(e,"g","layers");n.style("opacity",t[0].trace.opacity);var r=i.indentation,a=i.valign,s=t[0].lineHeight,o=t[0].height;if("middle"===a&&0===r||!s||!o)n.attr("transform",null);else{var l={top:1,bottom:-1}[a]*(.5*(s-o+3))||0,c=i.indentation;n.attr("transform",Dm(c,l))}n.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);var g=n.selectAll("g.legendsymbols").data([t]);g.enter().append("g").classed("legendsymbols",!0),g.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)})).each((function(t){var i,n=t[0].trace,r=[];if(n.visible)switch(n.type){case"histogram2d":case"heatmap":r=[["M-15,-2V4H15V-2Z"]],i=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":r=[["M-6,-6V6H6V-6Z"]],i=!0;break;case"densitymapbox":case"densitymap":r=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],i="radial";break;case"cone":r=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],i=!1;break;case"streamtube":r=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],i=!1;break;case"surface":r=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],i=!0;break;case"mesh3d":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],i=!1;break;case"volume":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],i=!0;break;case"isosurface":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],i=!1}var a=Em.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(r);a.enter().append("path").classed("legend3dandfriends",!0).attr("transform",s).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(t,r){var a,s=Em.select(this),o=Wm(n),l=o.colorscale,c=o.reversescale;if(l){if(!i){var g=l.length;a=0===r?l[c?g-1:0][1]:1===r?l[c?0:g-1][1]:l[Math.floor((g-1)/2)][1]}}else{var u=n.vertexcolor||n.facecolor||n.color;a=Nm.isArrayOrTypedArray(u)?u[r]||u[0]:u}s.attr("d",t[0]),a?s.call(Hm.fill,a):s.call((function(t){if(t.size()){var r="legendfill-"+n.uid;Xm.gradient(t,e,r,_m(c,"radial"===i),l,"fill")}}))}))})).each((function(t){var e=t[0].trace,i="waterfall"===e.type;if(t[0]._distinct&&i){var n=t[0].trace[t[0].dir].marker;return t[0].mc=n.color,t[0].mlw=n.line.width,t[0].mlc=n.line.color,l(t,this,"waterfall")}var r=[];e.visible&&i&&(r=t[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var a=Em.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(r);a.enter().append("path").classed("legendwaterfall",!0).attr("transform",s).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(t){var i=Em.select(this),n=e[t[0]].marker,r=o(void 0,n.line,5,2);i.attr("d",t[1]).style("stroke-width",r+"px").call(Hm.fill,n.color),r&&i.call(Hm.stroke,n.line.color)}))})).each((function(t){l(t,this,"funnel")})).each((function(t){l(t,this)})).each((function(t){var i=t[0].trace,n=Em.select(this).select("g.legendpoints").selectAll("path.legendbox").data(i.visible&&Zm.traceIs(i,"box-violin")?[t]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",s),n.exit().remove(),n.each((function(){var t=Em.select(this);if("all"!==i.boxpoints&&"all"!==i.points||0!==Hm.opacity(i.fillcolor)||0!==Hm.opacity((i.line||{}).color)){var a=o(void 0,i.line,5,2);t.style("stroke-width",a+"px").call(Hm.fill,i.fillcolor),a&&Hm.stroke(t,i.line.color)}else{var s=Nm.minExtend(i,{marker:{size:r?12:Nm.constrain(i.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});n.call(Xm.pointStyle,s,e)}}))})).each((function(t){c(t,this,"funnelarea")})).each((function(t){c(t,this,"pie")})).each((function(t){var i,n,r=zm(t),s=r.showFill,l=r.showLine,c=r.showGradientLine,g=r.showGradientFill,u=r.anyFill,d=r.anyLine,h=t[0],B=h.trace,p=Wm(B),F=p.colorscale,f=p.reversescale,Q=function(t){if(t.size())if(s)Xm.fillGroupStyle(t,e,!0);else{var i="legendfill-"+B.uid;Xm.gradient(t,e,i,_m(f),F,"fill")}},I=km.hasMarkers(B)||!u?"M5,0":d?"M5,-2":"M5,-3",U=Em.select(this),b=U.select(".legendfill").selectAll("path").data(s||g?[t]:[]);if(b.enter().append("path").classed("js-fill",!0),b.exit().remove(),b.attr("d",I+"h"+a+"v6h-"+a+"z").call(Q),l||c){var y=o(void 0,B.line,10,5);n=Nm.minExtend(B,{line:{width:y}}),i=[Nm.minExtend(h,{trace:n})]}var m=U.select(".legendlines").selectAll("path").data(l||c?[i]:[]);m.enter().append("path").classed("js-line",!0),m.exit().remove(),m.attr("d",I+(c?"l"+a+",0.0001":"h"+a)).call(l?Xm.lineGroupStyle:function(t){if(t.size()){var i="legendline-"+B.uid;Xm.lineGroupStyle(t),Xm.gradient(t,e,i,_m(f),F,"stroke")}})})).each((function(t){var i,n,a=zm(t),o=a.anyFill,l=a.anyLine,c=a.showLine,g=a.showMarker,u=t[0],d=u.trace,h=!g&&!l&&!o&&km.hasText(d);function B(t,e,i,n){var a=Nm.nestedProperty(d,t).get(),s=Nm.isArrayOrTypedArray(a)&&e?e(a):a;if(r&&s&&void 0!==n&&(s=n),i){if(s<i[0])return i[0];if(s>i[1])return i[1]}return s}function p(t){return u._distinct&&u.index&&t[u.index]?t[u.index]:t[0]}if(g||h||c){var F={},f={};if(g){F.mc=B("marker.color",p),F.mx=B("marker.symbol",p),F.mo=B("marker.opacity",Nm.mean,[.2,1]),F.mlc=B("marker.line.color",p),F.mlw=B("marker.line.width",Nm.mean,[0,5],2),f.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Q=B("marker.size",Nm.mean,[2,16],12);F.ms=Q,f.marker.size=Q}c&&(f.line={width:B("line.width",p,[0,10],5)}),h&&(F.tx="Aa",F.tp=B("textposition",p),F.ts=10,F.tc=B("textfont.color",p),F.tf=B("textfont.family",p),F.tw=B("textfont.weight",p),F.ty=B("textfont.style",p),F.tv=B("textfont.variant",p),F.tC=B("textfont.textcase",p),F.tE=B("textfont.lineposition",p),F.tS=B("textfont.shadow",p)),i=[Nm.minExtend(u,F)],(n=Nm.minExtend(d,f)).selectedpoints=null,n.texttemplate=null}var I=Em.select(this).select("g.legendpoints"),U=I.selectAll("path.scatterpts").data(g?i:[]);U.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",s),U.exit().remove(),U.call(Xm.pointStyle,n,e),g&&(i[0].mrc=3);var b=I.selectAll("g.pointtext").data(h?i:[]);b.enter().append("g").classed("pointtext",!0).append("text").attr("transform",s),b.exit().remove(),b.selectAll("text").call(Xm.textPointStyle,n,e)})).each((function(t){var e=t[0].trace,i=Em.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(e.visible&&"candlestick"===e.type?[t,t]:[]);i.enter().append("path").classed("legendcandle",!0).attr("d",(function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"})).attr("transform",s).style("stroke-miterlimit",1),i.exit().remove(),i.each((function(t,i){var n=Em.select(this),r=e[i?"increasing":"decreasing"],a=o(void 0,r.line,5,2);n.style("stroke-width",a+"px").call(Hm.fill,r.fillcolor),a&&Hm.stroke(n,r.line.color)}))})).each((function(t){var e=t[0].trace,i=Em.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(e.visible&&"ohlc"===e.type?[t,t]:[]);i.enter().append("path").classed("legendohlc",!0).attr("d",(function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"})).attr("transform",s).style("stroke-miterlimit",1),i.exit().remove(),i.each((function(t,i){var n=Em.select(this),r=e[i?"increasing":"decreasing"],a=o(void 0,r.line,5,2);n.style("fill","none").call(Xm.dashLine,r.line.dash,a),a&&Hm.stroke(n,r.line.color)}))}))};function _m(t,e){return(e?"radial":"horizontal")+(t?"":"reversed")}function zm(t){var e=t[0].trace,i=e.contours,n=km.hasLines(e),r=km.hasMarkers(e),a=e.visible&&e.fill&&"none"!==e.fill,s=!1,o=!1;if(i){var l=i.coloring;"lines"===l?s=!0:n="none"===l||"heatmap"===l||i.showlines,"constraint"===i.type?a="="!==i._operation:"fill"!==l&&"heatmap"!==l||(o=!0)}return{showMarker:r,showLine:n,showFill:a,showGradientLine:s,showGradientFill:o,anyLine:n||s,anyFill:a||o}}function Om(t,e,i){return t&&Nm.isArrayOrTypedArray(t)?e:t>i?i:t}var Km=Js,Pm=_B,jm=yF,qm=Nu,$m=Ip,tx=nm,ex=jI,ix=Uu,nx=xF,rx=function(t,e,i){var n=e._fullLayout;if(!e._dragged&&!e._editing){var r,a=n.legend.itemclick,s=n.legend.itemdoubleclick,o=n.legend.groupclick;if(1===i&&"toggle"===a&&"toggleothers"===s&&xm&&e.data&&e._context.showTips?(ym.notifier(ym._(e,"Double-click on legend to isolate one trace"),"long"),xm=!1):xm=!1,1===i?r=a:2===i&&(r=s),r){var l="togglegroup"===o,c=n.hiddenlabels?n.hiddenlabels.slice():[],g=t.data()[0][0];if(!g.groupTitle||!g.noClick){var u=e._fullData,d=(n.shapes||[]).filter((function(t){return t.showlegend})),h=u.concat(d),B=g.trace;B._isShape&&(B=B._fullInput);var p,F,f,Q,I,U=B.legendgroup,b={},y=[],m=[],x=[],v=(n.shapes||[]).map((function(t){return t._input})),C=!1,A=B.legend,L=B._fullInput;if(!(L&&L._isShape)&&bm.traceIs(B,"pie-like")){var G=g.label,R=c.indexOf(G);if("toggle"===r)-1===R?c.push(G):c.splice(R,1);else if("toggleothers"===r){var S=-1!==R,w=[];for(p=0;p<e.calcdata.length;p++){var V=e.calcdata[p];for(F=0;F<V.length;F++){var E=V[F].label;A===V[0].trace.legend&&G!==E&&(-1===c.indexOf(E)&&(S=!0),mm(c,E),w.push(E))}}if(!S)for(var Z=0;Z<w.length;Z++){var N=c.indexOf(w[Z]);-1!==N&&c.splice(N,1)}}bm.call("_guiRelayout",e,"hiddenlabels",c)}else{var D,X=U&&U.length,H=[];if(X)for(p=0;p<h.length;p++)(D=h[p]).visible&&D.legendgroup===U&&H.push(p);if("toggle"===r){var W;switch(B.visible){case!0:W="legendonly";break;case!1:W=!1;break;case"legendonly":W=!0}if(X)if(l)for(p=0;p<h.length;p++){var k=h[p];!1!==k.visible&&k.legendgroup===U&&K(k,W)}else K(B,W);else K(B,W)}else if("toggleothers"===r){var M,T,Y,J,_=!0;for(p=0;p<h.length;p++)if(M=(J=h[p])===B,T=!0!==J.showlegend,!(M||T||X&&J.legendgroup===U||J.legend!==A||!0!==J.visible||bm.traceIs(J,"notLegendIsolatable"))){_=!1;break}for(p=0;p<h.length;p++)if(!1!==(J=h[p]).visible&&J.legend===A&&!bm.traceIs(J,"notLegendIsolatable"))switch(B.visible){case"legendonly":K(J,!0);break;case!0:Y=!!_||"legendonly",M=J===B,T=!0!==J.showlegend&&!J.legendgroup,K(J,!(!(M||X&&J.legendgroup===U)&&!T)||Y)}}for(p=0;p<m.length;p++)if(f=m[p]){var z=f.constructUpdate(),O=Object.keys(z);for(F=0;F<O.length;F++)Q=O[F],(b[Q]=b[Q]||[])[x[p]]=z[Q]}for(I=Object.keys(b),p=0;p<I.length;p++)for(Q=I[p],F=0;F<y.length;F++)b[Q].hasOwnProperty(F)||(b[Q][F]=void 0);C?bm.call("_guiUpdate",e,b,{shapes:v},y):bm.call("_guiRestyle",e,b,y)}}}}function K(t,e){if(!g.groupTitle||l){var i=t._fullInput||t,n=i._isShape,r=i.index;void 0===r&&(r=i._index);var a,s=!1!==i.visible&&e;n?(a=s,v[r].visible=a,C=!0):function(t,e){var i=y.indexOf(t),n=b.visible;n||(n=b.visible=[]),-1===y.indexOf(t)&&(y.push(t),i=y.length-1),n[i]=e}(r,s)}}},ax=vm,sx=CF.LINE_SPACING,ox=CF.FROM_TL,lx=CF.FROM_BR,cx=function(t,e,i){var n,r,a=e._inHover,s=Am.isGrouped(e),o=Am.isReversed(e),l={},c=[],g=!1,u={},d=0,h=0;function B(t,n,r){if(!1!==e.visible&&(!i||t===e._id))if(""!==n&&Am.isGrouped(e))-1===c.indexOf(n)?(c.push(n),g=!0,l[n]=[r]):l[n].push(r);else{var a="~~i"+d;c.push(a),l[a]=[r],d++}}for(n=0;n<t.length;n++){var p=t[n],F=p[0],f=F.trace,Q=f.legend,I=f.legendgroup;if(a||f.visible&&f.showlegend)if(Cm.traceIs(f,"pie-like"))for(u[I]||(u[I]={}),r=0;r<p.length;r++){var U=p[r].label;u[I][U]||(B(Q,I,{label:U,color:p[r].color,i:p[r].i,trace:f,pts:p[r].pts}),u[I][U]=!0,h=Math.max(h,(U||"").length))}else B(Q,I,F),h=Math.max(h,(f.name||"").length)}if(!c.length)return[];var b=!g||!s,y=[];for(n=0;n<c.length;n++){var m=l[c[n]];b?y.push(m[0]):y.push(m)}for(b&&(y=[y]),n=0;n<y.length;n++){var x=1/0;for(r=0;r<y[n].length;r++){var v=y[n][r].trace.legendrank;x>v&&(x=v)}y[n][0]._groupMinRank=x,y[n][0]._preGroupSort=n}var C=function(t,e){return t.trace.legendrank-e.trace.legendrank||t._preSort-e._preSort};for(y.forEach((function(t,e){t[0]._preGroupSort=e})),y.sort((function(t,e){return t[0]._groupMinRank-e[0]._groupMinRank||t[0]._preGroupSort-e[0]._preGroupSort})),n=0;n<y.length;n++){y[n].forEach((function(t,e){t._preSort=e})),y[n].sort(C);var A=y[n][0].trace,L=null;for(r=0;r<y[n].length;r++){var G=y[n][r].trace.legendgrouptitle;if(G&&G.text){L=G,a&&(G.font=e._groupTitleFont);break}}if(o&&y[n].reverse(),L){var R=!1;for(r=0;r<y[n].length;r++)if(Cm.traceIs(y[n][r].trace,"pie-like")){R=!0;break}y[n].unshift({i:-1,groupTitle:L,noClick:R,trace:{showlegend:A.showlegend,legendgroup:A.legendgroup,visible:"toggleitem"===e.groupclick||A.visible}})}for(r=0;r<y[n].length;r++)y[n][r]=[y[n][r]]}return e._lgroupsLength=y.length,e._maxNameLength=h,y},gx=Jm,ux=um,dx=1,hx=/^legend[0-9]*$/,Bx=function(t,e){if(e)px(t,e);else{var i=t._fullLayout,n=i._legends;i._infolayer.selectAll('[class^="legend"]').each((function(){var t=Km.select(this),e=t.attr("class").split(" ")[0];e.match(hx)&&-1===n.indexOf(e)&&t.remove()}));for(var r=0;r<n.length;r++){var a=n[r];px(t,t._fullLayout[a])}}};function px(t,e){var i,n,r=e||{},a=t._fullLayout,s=xx(r),o=r._inHover;if(o?(n=r.layer,i="hover"):(n=a._infolayer,i=s),n){var l;if(i+=a._uid,t._legendMouseDownTime||(t._legendMouseDownTime=0),o){if(!r.entries)return;l=cx(r.entries,r)}else{for(var c=(t.calcdata||[]).slice(),g=a.shapes,u=0;u<g.length;u++){var d=g[u];if(d.showlegend){var h={_isShape:!0,_fullInput:d,index:d._index,name:d.name||d.label.text||"shape "+d._index,legend:d.legend,legendgroup:d.legendgroup,legendgrouptitle:d.legendgrouptitle,legendrank:d.legendrank,legendwidth:d.legendwidth,showlegend:d.showlegend,visible:d.visible,opacity:d.opacity,mode:"line"===d.type?"lines":"markers",line:d.line,marker:{line:d.line,color:d.fillcolor,size:12,symbol:"rect"===d.type?"square":"circle"===d.type?"circle":"hexagon2"}};c.push([{trace:h}])}}l=a.showlegend&&cx(c,r,a._legends.length>1)}var B=a.hiddenlabels||[];if(!(o||a.showlegend&&l.length))return n.selectAll("."+s).remove(),a._topdefs.select("#"+i).remove(),jm.autoMargin(t,s);var p=Pm.ensureSingle(n,"g",s,(function(t){o||t.attr("pointer-events","all")})),F=Pm.ensureSingleById(a._topdefs,"clipPath",i,(function(t){t.append("rect")})),f=Pm.ensureSingle(p,"rect","bg",(function(t){t.attr("shape-rendering","crispEdges")}));f.call(ix.stroke,r.bordercolor).call(ix.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var Q,I=Pm.ensureSingle(p,"g","scrollbox"),U=r.title;r._titleWidth=0,r._titleHeight=0,U.text?((Q=Pm.ensureSingle(I,"text",s+"titletext")).attr("text-anchor","start").call(ex.font,U.font).text(U.text),bx(Q,I,t,r,dx)):I.selectAll("."+s+"titletext").remove();var b=Pm.ensureSingle(p,"rect","scrollbar",(function(t){t.attr(ax.scrollBarEnterAttrs).call(ix.fill,ax.scrollBarColor)})),y=I.selectAll("g.groups").data(l);y.enter().append("g").attr("class","groups"),y.exit().remove();var m=y.selectAll("g.traces").data(Pm.identity);m.enter().append("g").attr("class","traces"),m.exit().remove(),m.style("opacity",(function(t){var e=t[0].trace;return qm.traceIs(e,"pie-like")?-1!==B.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1})).each((function(){Km.select(this).call(Qx,t,r)})).call(gx,t,r).each((function(){o||Km.select(this).call(Ux,t,s)})),Pm.syncOrAsync([jm.previousPromises,function(){return function(t,e,i,n){var r=t._fullLayout,a=xx(n);n||(n=r[a]);var s=r._size,o=ux.isVertical(n),l=ux.isGrouped(n),c="fraction"===n.entrywidthmode,g=n.borderwidth,u=2*g,d=ax.itemGap,h=n.indentation+n.itemwidth+2*d,B=2*(g+d),p=mx(n),F=n.y<0||0===n.y&&"top"===p,f=n.y>1||1===n.y&&"bottom"===p,Q=n.tracegroupgap,I={};n._maxHeight=Math.max(F||f?r.height/2:s.h,30);var U=0;n._width=0,n._height=0;var b=function(t){var e=0,i=0,n=t.title.side;n&&(-1!==n.indexOf("left")&&(e=t._titleWidth),-1!==n.indexOf("top")&&(i=t._titleHeight));return[e,i]}(n);if(o)i.each((function(t){var e=t[0].height;ex.setTranslate(this,g+b[0],g+b[1]+n._height+e/2+d),n._height+=e,n._width=Math.max(n._width,t[0].width)})),U=h+n._width,n._width+=d+h+u,n._height+=B,l&&(e.each((function(t,e){ex.setTranslate(this,0,e*n.tracegroupgap)})),n._height+=(n._lgroupsLength-1)*n.tracegroupgap);else{var y=yx(n),m=n.x<0||0===n.x&&"right"===y,x=n.x>1||1===n.x&&"left"===y,v=f||F,C=r.width/2;n._maxWidth=Math.max(m?v&&"left"===y?s.l+s.w:C:x?v&&"right"===y?s.r+s.w:C:s.w,2*h);var A=0,L=0;i.each((function(t){var e=Fx(t,n,h);A=Math.max(A,e),L+=e})),U=null;var G=0;if(l){var R=0,S=0,w=0;e.each((function(){var t=0,e=0;Km.select(this).selectAll("g.traces").each((function(i){var r=Fx(i,n,h),a=i[0].height;ex.setTranslate(this,b[0],b[1]+g+d+a/2+e),e+=a,t=Math.max(t,r),I[i[0].trace.legendgroup]=t}));var i=t+d;S>0&&i+g+S>n._maxWidth?(G=Math.max(G,S),S=0,w+=R+Q,R=e):R=Math.max(R,e),ex.setTranslate(this,S,w),S+=i})),n._width=Math.max(G,S)+g,n._height=w+R+B}else{var V=i.size(),E=L+u+(V-1)*d<n._maxWidth,Z=0,N=0,D=0,X=0;i.each((function(t){var e=t[0].height,i=Fx(t,n,h),r=E?i:A;c||(r+=d),r+g+N-d>=n._maxWidth&&(G=Math.max(G,X),N=0,D+=Z,n._height+=Z,Z=0),ex.setTranslate(this,b[0]+g+N,b[1]+g+D+e/2+d),X=N+i+d,N+=r,Z=Math.max(Z,e)})),E?(n._width=N+u,n._height=Z+B):(n._width=Math.max(G,X)+u,n._height+=Z+B)}}n._width=Math.ceil(Math.max(n._width+b[0],n._titleWidth+2*(g+ax.titlePad))),n._height=Math.ceil(Math.max(n._height+b[1],n._titleHeight+2*(g+ax.itemGap))),n._effHeight=Math.min(n._height,n._maxHeight);var H=t._context.edits,W=H.legendText||H.legendPosition;i.each((function(t){var e=Km.select(this).select("."+a+"toggle"),i=t[0].height,r=t[0].trace.legendgroup,s=Fx(t,n,h);l&&""!==r&&(s=I[r]);var g=W?h:U||s;o||c||(g+=d/2),ex.setRect(e,0,-i/2,g,i)}))}(t,y,m,r)},function(){var e,l,c,g,u=a._size,d=r.borderwidth,h="paper"===r.xref,B="paper"===r.yref;if(U.text&&function(t,e,i){if("top center"===e.title.side||"top right"===e.title.side){var n=e.title.font.size*sx,r=0,a=t.node(),s=ex.bBox(a).width;"top center"===e.title.side?r=.5*(e._width-2*i-2*ax.titlePad-s):"top right"===e.title.side&&(r=e._width-2*i-2*ax.titlePad-s),nx.positionText(t,i+ax.titlePad+r,i+n)}}(Q,r,d),!o){var y,m;y=h?u.l+u.w*r.x-ox[yx(r)]*r._width:a.width*r.x-ox[yx(r)]*r._width,m=B?u.t+u.h*(1-r.y)-ox[mx(r)]*r._effHeight:a.height*(1-r.y)-ox[mx(r)]*r._effHeight;var x=function(t,e,i,n){var r=t._fullLayout,a=r[e],s=yx(a),o=mx(a),l="paper"===a.xref,c="paper"===a.yref;t._fullLayout._reservedMargin[e]={};var g=a.y<.5?"b":"t",u=a.x<.5?"l":"r",d={r:r.width-i,l:i+a._width,b:r.height-n,t:n+a._effHeight};if(l&&c)return jm.autoMargin(t,e,{x:a.x,y:a.y,l:a._width*ox[s],r:a._width*lx[s],b:a._effHeight*lx[o],t:a._effHeight*ox[o]});l?t._fullLayout._reservedMargin[e][g]=d[g]:c||"v"===a.orientation?t._fullLayout._reservedMargin[e][u]=d[u]:t._fullLayout._reservedMargin[e][g]=d[g]}(t,s,y,m);if(x)return;if(a.margin.autoexpand){var v=y,C=m;y=h?Pm.constrain(y,0,a.width-r._width):v,m=B?Pm.constrain(m,0,a.height-r._effHeight):C,y!==v&&Pm.log("Constrain "+s+".x to make legend fit inside graph"),m!==C&&Pm.log("Constrain "+s+".y to make legend fit inside graph")}ex.setTranslate(p,y,m)}if(b.on(".drag",null),p.on("wheel",null),o||r._height<=r._maxHeight||t._context.staticPlot){var A=r._effHeight;o&&(A=r._height),f.attr({width:r._width-d,height:A-d,x:d/2,y:d/2}),ex.setTranslate(I,0,0),F.select("rect").attr({width:r._width-2*d,height:A-2*d,x:d,y:d}),ex.setClipUrl(I,i,t),ex.setRect(b,0,0,0,0),delete r._scrollY}else{var L,G,R,S=Math.max(ax.scrollBarMinHeight,r._effHeight*r._effHeight/r._height),w=r._effHeight-S-2*ax.scrollBarMargin,V=r._height-r._effHeight,E=w/V,Z=Math.min(r._scrollY||0,V);f.attr({width:r._width-2*d+ax.scrollBarWidth+ax.scrollBarMargin,height:r._effHeight-d,x:d/2,y:d/2}),F.select("rect").attr({width:r._width-2*d+ax.scrollBarWidth+ax.scrollBarMargin,height:r._effHeight-2*d,x:d,y:d+Z}),ex.setClipUrl(I,i,t),X(Z,S,E),p.on("wheel",(function(){X(Z=Pm.constrain(r._scrollY+Km.event.deltaY/w*V,0,V),S,E),0!==Z&&Z!==V&&Km.event.preventDefault()}));var N=Km.behavior.drag().on("dragstart",(function(){var t=Km.event.sourceEvent;L="touchstart"===t.type?t.changedTouches[0].clientY:t.clientY,R=Z})).on("drag",(function(){var t=Km.event.sourceEvent;2===t.buttons||t.ctrlKey||(G="touchmove"===t.type?t.changedTouches[0].clientY:t.clientY,Z=function(t,e,i){var n=(i-e)/E+t;return Pm.constrain(n,0,V)}(R,L,G),X(Z,S,E))}));b.call(N);var D=Km.behavior.drag().on("dragstart",(function(){var t=Km.event.sourceEvent;"touchstart"===t.type&&(L=t.changedTouches[0].clientY,R=Z)})).on("drag",(function(){var t=Km.event.sourceEvent;"touchmove"===t.type&&(G=t.changedTouches[0].clientY,Z=function(t,e,i){var n=(e-i)/E+t;return Pm.constrain(n,0,V)}(R,L,G),X(Z,S,E))}));I.call(D)}function X(e,i,n){r._scrollY=t._fullLayout[s]._scrollY=e,ex.setTranslate(I,0,-e),ex.setRect(b,r._width,ax.scrollBarMargin+e*n,ax.scrollBarWidth,i),F.select("rect").attr("y",d+e)}t._context.edits.legendPosition&&(p.classed("cursor-move",!0),tx.init({element:p.node(),gd:t,prepFn:function(t){if(t.target!==b.node()){var e=ex.getTranslate(p);c=e.x,g=e.y}},moveFn:function(t,i){if(void 0!==c&&void 0!==g){var n=c+t,a=g+i;ex.setTranslate(p,n,a),e=tx.align(n,r._width,u.l,u.l+u.w,r.xanchor),l=tx.align(a+r._height,-r._height,u.t+u.h,u.t,r.yanchor)}},doneFn:function(){if(void 0!==e&&void 0!==l){var i={};i[s+".x"]=e,i[s+".y"]=l,qm.call("_guiRelayout",t,i)}},clickFn:function(e,i){var r=n.selectAll("g.traces").filter((function(){var t=this.getBoundingClientRect();return i.clientX>=t.left&&i.clientX<=t.right&&i.clientY>=t.top&&i.clientY<=t.bottom}));r.size()>0&&fx(t,p,r,e,i)}}))}],t)}}function Fx(t,e,i){var n=t[0],r=n.width,a=e.entrywidthmode,s=n.trace.legendwidth||e.entrywidth;return"fraction"===a?e._maxWidth*s:i+(s||r)}function fx(t,e,i,n,r){var a=i.data()[0][0].trace,s={event:r,node:i.node(),curveNumber:a.index,expandedIndex:a.index,data:t.data,layout:t.layout,frames:t._transitionData._frames,config:t._context,fullData:t._fullData,fullLayout:t._fullLayout};a._group&&(s.group=a._group),qm.traceIs(a,"pie-like")&&(s.label=i.datum()[0].label);var o=$m.triggerHandler(t,"plotly_legendclick",s);if(1===n){if(!1===o)return;e._clickTimeout=setTimeout((function(){t._fullLayout&&rx(i,t,n)}),t._context.doubleClickDelay)}else if(2===n){e._clickTimeout&&clearTimeout(e._clickTimeout),t._legendMouseDownTime=0,!1!==$m.triggerHandler(t,"plotly_legenddoubleclick",s)&&!1!==o&&rx(i,t,n)}}function Qx(t,e,i){var n,r,a=xx(i),s=t.data()[0][0],o=s.trace,l=qm.traceIs(o,"pie-like"),c=!i._inHover&&e._context.edits.legendText&&!l,g=i._maxNameLength;s.groupTitle?(n=s.groupTitle.text,r=s.groupTitle.font):(r=i.font,i.entries?n=s.text:(n=l?s.label:o.name,o._meta&&(n=Pm.templateString(n,o._meta))));var u=Pm.ensureSingle(t,"text",a+"text");u.attr("text-anchor","start").call(ex.font,r).text(c?Ix(n,g):n);var d=i.indentation+i.itemwidth+2*ax.itemGap;nx.positionText(u,d,0),c?u.call(nx.makeEditable,{gd:e,text:n}).call(bx,t,e,i).on("edit",(function(n){this.text(Ix(n,g)).call(bx,t,e,i);var r=s.trace._fullInput||{},a={};return a.name=n,r._isShape?qm.call("_guiRelayout",e,"shapes["+o.index+"].name",a.name):qm.call("_guiRestyle",e,a,o.index)})):bx(u,t,e,i)}function Ix(t,e){var i=Math.max(4,e);if(t&&t.trim().length>=i/2)return t;for(var n=i-(t=t||"").length;n>0;n--)t+=" ";return t}function Ux(t,e,i){var n,r=e._context.doubleClickDelay,a=1,s=Pm.ensureSingle(t,"rect",i+"toggle",(function(t){e._context.staticPlot||t.style("cursor","pointer").attr("pointer-events","all"),t.call(ix.fill,"rgba(0,0,0,0)")}));e._context.staticPlot||(s.on("mousedown",(function(){(n=(new Date).getTime())-e._legendMouseDownTime<r?a+=1:(a=1,e._legendMouseDownTime=n)})),s.on("mouseup",(function(){if(!e._dragged&&!e._editing){var n=e._fullLayout[i];(new Date).getTime()-e._legendMouseDownTime>r&&(a=Math.max(a-1,1)),fx(e,n,t,a,Km.event)}})))}function bx(t,e,i,n,r){n._inHover&&t.attr("data-notex",!0),nx.convertToTspans(t,i,(function(){!function(t,e,i,n){var r=t.data()[0][0];if(!i._inHover&&r&&!r.trace.showlegend)return void t.remove();var a=t.select("g[class*=math-group]"),s=a.node(),o=xx(i);i||(i=e._fullLayout[o]);var l,c=i.borderwidth;l=n===dx?i.title.font:r.groupTitle?r.groupTitle.font:i.font;var g,u,d=l.size*sx;if(s){var h=ex.bBox(s);g=h.height,u=h.width,n===dx?ex.setTranslate(a,c,c+.75*g):ex.setTranslate(a,0,.25*g)}else{var B="."+o+(n===dx?"title":"")+"text",p=t.select(B),F=nx.lineCount(p),f=p.node();if(g=d*F,u=f?ex.bBox(f).width:0,n===dx)"left"===i.title.side&&(u+=2*ax.itemGap),nx.positionText(p,c+ax.titlePad,c+d);else{var Q=2*ax.itemGap+i.indentation+i.itemwidth;r.groupTitle&&(Q=ax.itemGap,u-=i.indentation+i.itemwidth),nx.positionText(p,Q,-d*((F-1)/2-.3))}}n===dx?(i._titleWidth=u,i._titleHeight=g):(r.lineHeight=d,r.height=Math.max(g,16)+3,r.width=u)}(e,i,n,r)}))}function yx(t){return Pm.isRightAnchor(t)?"right":Pm.isCenterAnchor(t)?"center":"left"}function mx(t){return Pm.isBottomAnchor(t)?"bottom":Pm.isMiddleAnchor(t)?"middle":"top"}function xx(t){return t._id||"legend"}var vx=Js,Cx=$c,Ax=kg,Lx=_B,Gx=Lx.pushUnique,Rx=Lx.strTranslate,Sx=Lx.strRotate,wx=Ip,Vx=xF,Ex=function(t,e){var i=t.attr(om);if(e){if(!i){for(var n=(t.attr("class")||"").split(" "),r=0;r<n.length;r++){var a=n[r];0===a.indexOf("cursor-")&&t.attr(om,a.substr(7)).classed(a,!1)}t.attr(om)||t.attr(om,"!!")}sm(t,e)}else i&&(t.attr(om,null),"!!"===i?sm(t):sm(t,i))},Zx=jI,Nx=Uu,Dx=nm,Xx=Vy,Hx=Np.zindexSeparator,Wx=Nu,kx=TQ,Mx=zg,Tx=Um,Yx=Bx,Jx=Mx.YANGLE,_x=Math.PI*Jx/180,zx=1/Math.sin(_x),Ox=Math.cos(_x),Kx=Math.sin(_x),Px=Mx.HOVERARROWSIZE,jx=Mx.HOVERTEXTPAD,qx={box:!0,ohlc:!0,violin:!0,candlestick:!0},$x={scatter:!0,scattergl:!0,splom:!0};function tv(t,e){return t.distance-e.distance}function ev(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa?t.xa._id:"",t.ya?t.ya._id:""].join(",")}rm.hover=function(t,e,i,n){t=Lx.getGraphDiv(t);var r=e.target;Lx.throttle(t._fullLayout._uid+Mx.HOVERID,Mx.HOVERMINTIME,(function(){!function(t,e,i,n,r){i||(i="xy");"string"==typeof i&&(i=i.split(Hx)[0]);var a,s,o,l=Array.isArray(i)?i:[i],c=t._fullLayout,g=c.hoversubplots,u=c._plots||[],d=u[i],h=c._has("cartesian"),B=e.hovermode||c.hovermode,p="x"===(B||"").charAt(0),F="y"===(B||"").charAt(0);if(h&&(p||F)&&"axis"===g)for(var f=l.length,Q=0;Q<f;Q++)if(u[a=l[Q]]){s=Xx.getFromId(t,a,"x"),o=Xx.getFromId(t,a,"y");var I=(p?s:o)._subplotsWith;if(I&&I.length)for(var U=0;U<I.length;U++)Gx(l,I[U])}if(d&&"single"!==g){var b=d.overlays.map((function(t){return t.id}));l=l.concat(b)}for(var y=l.length,m=new Array(y),x=new Array(y),v=!1,C=0;C<y;C++)if(u[a=l[C]])v=!0,m[C]=u[a].xaxis,x[C]=u[a].yaxis;else{if(!c[a]||!c[a]._subplot)return void Lx.warn("Unrecognized subplot: "+a);var A=c[a]._subplot;m[C]=A.xaxis,x[C]=A.yaxis}B&&!v&&(B="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(B)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return Dx.unhoverRaw(t,e);var L=c.hoverdistance;-1===L&&(L=1/0);var G=c.spikedistance;-1===G&&(G=1/0);var R,S,w,V,E,Z,N,D,X,H,W,k,M,T=[],Y=[],J={hLinePoint:null,vLinePoint:null},_=!1;if(Array.isArray(e))for(B="array",w=0;w<e.length;w++)(E=t.calcdata[e[w].curveNumber||0])&&(Z=E[0].trace,"skip"!==E[0].trace.hoverinfo&&(Y.push(E),"h"===Z.orientation&&(_=!0)));else{var z,O,K=t.calcdata.slice();for(K.sort((function(t,e){return(t[0].trace.zorder||0)-(e[0].trace.zorder||0)})),V=0;V<K.length;V++)E=K[V],"skip"!==(Z=E[0].trace).hoverinfo&&kx.isTraceInSubplots(Z,l)&&(Y.push(E),"h"===Z.orientation&&(_=!0));if(!r)z="xpx"in e?e.xpx:m[0]._length/2,O="ypx"in e?e.ypx:x[0]._length/2;else{if(!1===wx.triggerHandler(t,"plotly_beforehover",e))return;var P=r.getBoundingClientRect();z=e.clientX-P.left,O=e.clientY-P.top,c._calcInverseTransform(t);var j=Lx.apply3DTransform(c._invTransform)(z,O);if(z=j[0],O=j[1],z<0||z>m[0]._length||O<0||O>x[0]._length)return Dx.unhoverRaw(t,e)}if(e.pointerX=z+m[0]._offset,e.pointerY=O+x[0]._offset,R="xval"in e?kx.flat(l,e.xval):kx.p2c(m,z),S="yval"in e?kx.flat(l,e.yval):kx.p2c(x,O),!Cx(R[0])||!Cx(S[0]))return Lx.warn("Fx.hover failed",e,t),Dx.unhoverRaw(t,e)}var q=1/0;function $(i,n){for(V=0;V<Y.length;V++)if((E=Y[V])&&E[0]&&E[0].trace&&!0===(Z=E[0].trace).visible&&0!==Z._length&&-1===["carpet","contourcarpet"].indexOf(Z._module.name)){if(X=B,kx.isUnifiedHover(X)&&(X=X.charAt(0)),"splom"===Z.type?N=l[D=0]:(N=kx.getSubplot(Z),D=l.indexOf(N)),k={cd:E,trace:Z,xa:m[D],ya:x[D],maxHoverDistance:L,maxSpikeDistance:G,index:!1,distance:Math.min(q,L),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:Nx.defaultLine,name:Z.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},c[N]&&(k.subplot=c[N]._subplot),c._splomScenes&&c._splomScenes[Z.uid]&&(k.scene=c._splomScenes[Z.uid]),"array"===X){var r=e[V];"pointNumber"in r?(k.index=r.pointNumber,X="closest"):(X="","xval"in r&&(H=r.xval,X="x"),"yval"in r&&(W=r.yval,X=X?"closest":"y"))}else void 0!==i&&void 0!==n?(H=i,W=n):(H=R[D],W=S[D]);if(M=T.length,0!==L)if(Z._module&&Z._module.hoverPoints){var a=Z._module.hoverPoints(k,H,W,X,{finiteRange:!0,hoverLayer:c._hoverlayer,hoversubplots:g,gd:t});if(a)for(var s,o=0;o<a.length;o++)s=a[o],Cx(s.x0)&&Cx(s.y0)&&T.push(ov(s,B))}else Lx.log("Unrecognized trace type in hover:",Z);if("closest"===B&&T.length>M&&(T.splice(0,M),q=T[0].distance),h&&0!==G&&0===T.length){k.distance=G,k.index=!1;var u=Z._module.hoverPoints(k,H,W,"closest",{hoverLayer:c._hoverlayer});if(u&&(u=u.filter((function(t){return t.spikeDistance<=G}))),u&&u.length){var d,p=u.filter((function(t){return t.xa.showspikes&&"hovered data"!==t.xa.spikesnap}));if(p.length){var F=p[0];Cx(F.x0)&&Cx(F.y0)&&(d=et(F),(!J.vLinePoint||J.vLinePoint.spikeDistance>d.spikeDistance)&&(J.vLinePoint=d))}var f=u.filter((function(t){return t.ya.showspikes&&"hovered data"!==t.ya.spikesnap}));if(f.length){var Q=f[0];Cx(Q.x0)&&Cx(Q.y0)&&(d=et(Q),(!J.hLinePoint||J.hLinePoint.spikeDistance>d.spikeDistance)&&(J.hLinePoint=d))}}}}}function tt(t,e,i){for(var n,r=null,a=1/0,l=0;l<t.length;l++)s&&s._id!==t[l].xa._id||o&&o._id!==t[l].ya._id||(n=t[l].spikeDistance,i&&0===l&&(n=-1/0),n<=a&&n<=e&&(r=t[l],a=n));return r}function et(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}$();var it={fullLayout:c,container:c._hoverlayer,event:e};t._spikepoints;var nt={vLinePoint:J.vLinePoint,hLinePoint:J.hLinePoint};t._spikepoints=nt;var rt=function(){var t=T.filter((function(t){return s&&s._id===t.xa._id&&o&&o._id===t.ya._id})),e=T.filter((function(t){return!(s&&s._id===t.xa._id&&o&&o._id===t.ya._id)}));t.sort(tv),e.sort(tv),T=function(t,e){for(var i=e.charAt(0),n=[],r=[],a=[],s=0;s<t.length;s++){var o=t[s];Wx.traceIs(o.trace,"bar-like")||Wx.traceIs(o.trace,"box-violin")?a.push(o):o.trace[i+"period"]?r.push(o):n.push(o)}return n.concat(r).concat(a)}(T=t.concat(e),B)};rt();var at=B.charAt(0),st=("x"===at||"y"===at)&&T[0]&&$x[T[0].trace.type];if(h&&0!==G&&0!==T.length){var ot=tt(T.filter((function(t){return t.ya.showspikes})),G,st);J.hLinePoint=et(ot);var lt=tt(T.filter((function(t){return t.xa.showspikes})),G,st);J.vLinePoint=et(lt)}if(0===T.length){var ct=Dx.unhoverRaw(t,e);return!h||null===J.hLinePoint&&null===J.vLinePoint||lv(t,J,it),ct}h&&lv(t,J,it);if(kx.isXYhover(X)&&0!==T[0].length&&"splom"!==T[0].trace.type){var gt=T[0];T=qx[gt.trace.type]?T.filter((function(t){return t.trace.index===gt.trace.index})):[gt];var ut=T.length;$(gv("x",gt,c),gv("y",gt,c));var dt,ht=[],Bt={},pt=0,Ft=function(t){var e=qx[t.trace.type]?ev(t):t.trace.index;if(Bt[e]){var i=Bt[e]-1,n=ht[i];i>0&&Math.abs(t.distance)<Math.abs(n.distance)&&(ht[i]=t)}else pt++,Bt[e]=pt,ht.push(t)};for(dt=0;dt<ut;dt++)Ft(T[dt]);for(dt=T.length-1;dt>ut-1;dt--)Ft(T[dt]);T=ht,rt()}var ft=t._hoverdata,Qt=[],It=uv(t),Ut=dv(t);for(w=0;w<T.length;w++){var bt=T[w],yt=kx.makeEventData(bt,bt.trace,bt.cd);if(!1!==bt.hovertemplate){var mt=!1;bt.cd[bt.index]&&bt.cd[bt.index].ht&&(mt=bt.cd[bt.index].ht),bt.hovertemplate=mt||bt.trace.hovertemplate||!1}if(bt.xa&&bt.ya){var xt=bt.x0+bt.xa._offset,vt=bt.x1+bt.xa._offset,Ct=bt.y0+bt.ya._offset,At=bt.y1+bt.ya._offset,Lt=Math.min(xt,vt),Gt=Math.max(xt,vt),Rt=Math.min(Ct,At),St=Math.max(Ct,At);yt.bbox={x0:Lt+Ut,x1:Gt+Ut,y0:Rt+It,y1:St+It}}bt.eventData=[yt],Qt.push(yt)}t._hoverdata=Qt;var wt="y"===B&&(Y.length>1||T.length>1)||"closest"===B&&_&&T.length>1,Vt=Nx.combine(c.plot_bgcolor||Nx.background,c.paper_bgcolor),Et=nv(T,{gd:t,hovermode:B,rotateLabels:wt,bgColor:Vt,container:c._hoverlayer,outerContainer:c._paper.node(),commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance}),Zt=Et.hoverLabels;kx.isUnifiedHover(B)||(!function(t,e,i,n){var r,a,s,o,l,c,g,u=e?"xa":"ya",d=e?"ya":"xa",h=0,B=1,p=t.size(),F=new Array(p),f=0,Q=n.minX,I=n.maxX,U=n.minY,b=n.maxY,y=function(t){return t*i._invScaleX},m=function(t){return t*i._invScaleY};function x(t){var e=t[0],i=t[t.length-1];if(a=e.pmin-e.pos-e.dp+e.size,s=i.pos+i.dp+i.size-e.pmax,a>.01){for(l=t.length-1;l>=0;l--)t[l].dp+=a;r=!1}if(!(s<.01)){if(a<-.01){for(l=t.length-1;l>=0;l--)t[l].dp-=s;r=!1}if(r){var n=0;for(o=0;o<t.length;o++)(c=t[o]).pos+c.dp+c.size>e.pmax&&n++;for(o=t.length-1;o>=0&&!(n<=0);o--)(c=t[o]).pos>e.pmax-1&&(c.del=!0,n--);for(o=0;o<t.length&&!(n<=0);o++)if((c=t[o]).pos<e.pmin+1)for(c.del=!0,n--,s=2*c.size,l=t.length-1;l>=0;l--)t[l].dp-=s;for(o=t.length-1;o>=0&&!(n<=0);o--)(c=t[o]).pos+c.dp+c.size>e.pmax&&(c.del=!0,n--)}}}t.each((function(t){var n=t[u],r=t[d],a="x"===n._id.charAt(0),s=n.range;0===f&&s&&s[0]>s[1]!==a&&(B=-1);var o=0,l=a?i.width:i.height;if("x"===i.hovermode||"y"===i.hovermode){var c,g,h=av(t,e),p=t.anchor,x="end"===p?-1:1;if("middle"===p)g=(c=t.crossPos+(a?m(h.y-t.by/2):y(t.bx/2+t.tx2width/2)))+(a?m(t.by):y(t.bx));else if(a)g=(c=t.crossPos+m(Px+h.y)-m(t.by/2-Px))+m(t.by);else{var v=y(x*Px+h.x),C=v+y(x*t.bx);c=t.crossPos+Math.min(v,C),g=t.crossPos+Math.max(v,C)}a?void 0!==U&&void 0!==b&&Math.min(g,b)-Math.max(c,U)>1&&("left"===r.side?(o=r._mainLinePosition,l=i.width):l=r._mainLinePosition):void 0!==Q&&void 0!==I&&Math.min(g,I)-Math.max(c,Q)>1&&("top"===r.side?(o=r._mainLinePosition,l=i.height):l=r._mainLinePosition)}F[f++]=[{datum:t,traceIndex:t.trace.index,dp:0,pos:t.pos,posref:t.posref,size:t.by*(a?zx:1)/2,pmin:o,pmax:l}]})),F.sort((function(t,e){return t[0].posref-e[0].posref||B*(e[0].traceIndex-t[0].traceIndex)}));for(;!r&&h<=p;){for(h++,r=!0,o=0;o<F.length-1;){var v=F[o],C=F[o+1],A=v[v.length-1],L=C[0];if((a=A.pos+A.dp+A.size-L.pos-L.dp+L.size)>.01){for(l=C.length-1;l>=0;l--)C[l].dp+=a;for(v.push.apply(v,C),F.splice(o+1,1),g=0,l=v.length-1;l>=0;l--)g+=v[l].dp;for(s=g/v.length,l=v.length-1;l>=0;l--)v[l].dp-=s;r=!1}else o++}F.forEach(x)}for(o=F.length-1;o>=0;o--){var G=F[o];for(l=G.length-1;l>=0;l--){var R=G[l],S=R.datum;S.offset=R.dp,S.del=R.del}}}(Zt,wt,c,Et.commonLabelBoundingBox),sv(Zt,wt,c._invScaleX,c._invScaleY));if(r&&r.tagName){var Nt=Wx.getComponentMethod("annotations","hasClickToShow")(t,Qt);Ex(vx.select(r),Nt?"pointer":"")}if(!r||n||!function(t,e,i){if(!i||i.length!==t._hoverdata.length)return!0;for(var n=i.length-1;n>=0;n--){var r=i[n],a=t._hoverdata[n];if(r.curveNumber!==a.curveNumber||String(r.pointNumber)!==String(a.pointNumber)||String(r.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(t,0,ft))return;ft&&t.emit("plotly_unhover",{event:e,points:ft});t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:m,yaxes:x,xvals:R,yvals:S})}(t,e,i,n,r)}))},rm.loneHover=function(t,e){var i=!0;Array.isArray(t)||(i=!1,t=[t]);var n=e.gd,r=uv(n),a=dv(n),s=!1,o=nv(t.map((function(t){var i=t._x0||t.x0||t.x||0,s=t._x1||t.x1||t.x||0,o=t._y0||t.y0||t.y||0,l=t._y1||t.y1||t.y||0,c=t.eventData;if(c){var g=Math.min(i,s),u=Math.max(i,s),d=Math.min(o,l),h=Math.max(o,l),B=t.trace;if(Wx.traceIs(B,"gl3d")){var p=n._fullLayout[B.scene]._scene.container,F=p.offsetLeft,f=p.offsetTop;g+=F,u+=F,d+=f,h+=f}c.bbox={x0:g+a,x1:u+a,y0:d+r,y1:h+r},e.inOut_bbox&&e.inOut_bbox.push(c.bbox)}else c=!1;return{color:t.color||Nx.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontVariant:t.fontVariant,nameLength:t.nameLength,textAlign:t.textAlign,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,hovertemplateLabels:t.hovertemplateLabels||!1,eventData:c}})),{gd:n,hovermode:"closest",rotateLabels:s,bgColor:e.bgColor||Nx.background,container:vx.select(e.container),outerContainer:e.outerContainer||e.container}).hoverLabels,l=0,c=0;return o.sort((function(t,e){return t.y0-e.y0})).each((function(t,i){var n=t.y0-t.by/2;t.offset=n-5<l?l-n+5:0,l=n+t.by+t.offset,i===e.anchorIndex&&(c=t.offset)})).each((function(t){t.offset-=c})),sv(o,s,n._fullLayout._invScaleX,n._fullLayout._invScaleY),i?o:o.node()};var iv=/<extra>([\s\S]*)<\/extra>/;function nv(t,e){var i=e.gd,n=i._fullLayout,r=e.hovermode,a=e.rotateLabels,s=e.bgColor,o=e.container,l=e.outerContainer,c=e.commonLabelOpts||{};if(0===t.length)return[[]];var g=e.fontFamily||Mx.HOVERFONT,u=e.fontSize||Mx.HOVERFONTSIZE,d=e.fontWeight||n.font.weight,h=e.fontStyle||n.font.style,B=e.fontVariant||n.font.variant,p=e.fontTextcase||n.font.textcase,F=e.fontLineposition||n.font.lineposition,f=e.fontShadow||n.font.shadow,Q=t[0],I=Q.xa,U=Q.ya,b=r.charAt(0),y=b+"Label",m=Q[y];if(void 0===m&&"multicategory"===I.type)for(var x=0;x<t.length&&void 0===(m=t[x][y]);x++);var v=hv(i,l),C=v.top,A=v.width,L=v.height,G=void 0!==m&&Q.distance<=e.hoverdistance&&("x"===r||"y"===r);if(G){var R,S,w=!0;for(R=0;R<t.length;R++)if(w&&void 0===t[R].zLabel&&(w=!1),S=t[R].hoverinfo||t[R].trace.hoverinfo){var V=Array.isArray(S)?S:S.split("+");if(-1===V.indexOf("all")&&-1===V.indexOf(r)){G=!1;break}}w&&(G=!1)}var E=o.selectAll("g.axistext").data(G?[0]:[]);E.enter().append("g").classed("axistext",!0),E.exit().remove();var Z={minX:0,maxX:0,minY:0,maxY:0};if(E.each((function(){var t=vx.select(this),e=Lx.ensureSingle(t,"path","",(function(t){t.style({"stroke-width":"1px"})})),a=Lx.ensureSingle(t,"text","",(function(t){t.attr("data-notex",1)})),s=c.bgcolor||Nx.defaultLine,o=c.bordercolor||Nx.contrast(s),l=Nx.contrast(s),b=c.font,y={weight:b.weight||d,style:b.style||h,variant:b.variant||B,textcase:b.textcase||p,lineposition:b.lineposition||F,shadow:b.shadow||f,family:b.family||g,size:b.size||u,color:b.color||l};e.style({fill:s,stroke:o}),a.text(m).call(Zx.font,y).call(Vx.positionText,0,0).call(Vx.convertToTspans,i),t.attr("transform","");var x,v,A=hv(i,a.node());if("x"===r){var L="top"===I.side?"-":"";a.attr("text-anchor","middle").call(Vx.positionText,0,"top"===I.side?C-A.bottom-Px-jx:C-A.top+Px+jx),x=I._offset+(Q.x0+Q.x1)/2,v=U._offset+("top"===I.side?0:U._length);var G=A.width/2+jx,R=x;x<G?R=G:x>n.width-G&&(R=n.width-G),e.attr("d","M"+(x-R)+",0L"+(x-R+Px)+","+L+Px+"H"+G+"v"+L+(2*jx+A.height)+"H"+-G+"V"+L+Px+"H"+(x-R-Px)+"Z"),x=R,Z.minX=x-G,Z.maxX=x+G,"top"===I.side?(Z.minY=v-(2*jx+A.height),Z.maxY=v-jx):(Z.minY=v+jx,Z.maxY=v+(2*jx+A.height))}else{var S,w,V;"right"===U.side?(S="start",w=1,V="",x=I._offset+I._length):(S="end",w=-1,V="-",x=I._offset),v=U._offset+(Q.y0+Q.y1)/2,a.attr("text-anchor",S),e.attr("d","M0,0L"+V+Px+","+Px+"V"+(jx+A.height/2)+"h"+V+(2*jx+A.width)+"V-"+(jx+A.height/2)+"H"+V+Px+"V-"+Px+"Z"),Z.minY=v-(jx+A.height/2),Z.maxY=v+(jx+A.height/2),"right"===U.side?(Z.minX=x+Px,Z.maxX=x+Px+(2*jx+A.width)):(Z.minX=x-Px-(2*jx+A.width),Z.maxX=x-Px);var E,N=A.height/2,D=C-A.top-N,X="clip"+n._uid+"commonlabel"+U._id;if(x<A.width+2*jx+Px){E="M-"+(Px+jx)+"-"+N+"h-"+(A.width-jx)+"V"+N+"h"+(A.width-jx)+"Z";var H=A.width-x+jx;Vx.positionText(a,H,D),"end"===S&&a.selectAll("tspan").each((function(){var t=vx.select(this),e=Zx.tester.append("text").text(t.text()).call(Zx.font,y),n=hv(i,e.node());Math.round(n.width)<Math.round(A.width)&&t.attr("x",H-n.width),e.remove()}))}else Vx.positionText(a,w*(jx+Px),D),E=null;var W=n._topclips.selectAll("#"+X).data(E?[0]:[]);W.enter().append("clipPath").attr("id",X).append("path"),W.exit().remove(),W.select("path").attr("d",E),Zx.setClipUrl(a,E?X:null,i)}t.attr("transform",Rx(x,v))})),kx.isUnifiedHover(r)){o.selectAll("g.hovertext").remove();var N=t.filter((function(t){return"none"!==t.hoverinfo}));if(0===N.length)return[];var D=n.hoverlabel,X=D.font,H={showlegend:!0,legend:{title:{text:m,font:X},font:X,bgcolor:D.bgcolor,bordercolor:D.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:n.legend?n.legend.traceorder:void 0,orientation:"v"}},W={font:X};Tx(H,W,i._fullData);var k=W.legend;k.entries=[];for(var M=0;M<N.length;M++){var T=N[M];if("none"!==T.hoverinfo){var Y=rv(T,!0,r,n,m),J=Y[0],_=Y[1];T.name=_,T.text=""!==_?_+" : "+J:J;var z=T.cd[T.index];z&&(z.mc&&(T.mc=z.mc),z.mcc&&(T.mc=z.mcc),z.mlc&&(T.mlc=z.mlc),z.mlcc&&(T.mlc=z.mlcc),z.mlw&&(T.mlw=z.mlw),z.mrc&&(T.mrc=z.mrc),z.dir&&(T.dir=z.dir)),T._distinct=!0,k.entries.push([T])}}k.entries.sort((function(t,e){return t[0].trace.index-e[0].trace.index})),k.layer=o,k._inHover=!0,k._groupTitleFont=D.grouptitlefont,Yx(i,k);var O,K,P,j,q=o.select("g.legend"),$=hv(i,q.node()),tt=$.width+2*jx,et=$.height+2*jx,it=N[0],nt=(it.x0+it.x1)/2,rt=(it.y0+it.y1)/2,at=!(Wx.traceIs(it.trace,"bar-like")||Wx.traceIs(it.trace,"box-violin"));"y"===b?at?(K=rt-jx,O=rt+jx):(K=Math.min.apply(null,N.map((function(t){return Math.min(t.y0,t.y1)}))),O=Math.max.apply(null,N.map((function(t){return Math.max(t.y0,t.y1)})))):K=O=Lx.mean(N.map((function(t){return(t.y0+t.y1)/2})))-et/2,"x"===b?at?(P=nt+jx,j=nt-jx):(P=Math.max.apply(null,N.map((function(t){return Math.max(t.x0,t.x1)}))),j=Math.min.apply(null,N.map((function(t){return Math.min(t.x0,t.x1)})))):P=j=Lx.mean(N.map((function(t){return(t.x0+t.x1)/2})))-tt/2;var st,ot,lt=I._offset,ct=U._offset;return j+=lt-tt,K+=ct-et,st=(P+=lt)+tt<A&&P>=0?P:j+tt<A&&j>=0?j:lt+tt<A?lt:P-nt<nt-j+tt?A-tt:0,st+=jx,ot=(O+=ct)+et<L&&O>=0?O:K+et<L&&K>=0?K:ct+et<L?ct:O-rt<rt-K+et?L-et:0,ot+=jx,q.attr("transform",Rx(st-1,ot-1)),q}var gt=o.selectAll("g.hovertext").data(t,(function(t){return ev(t)}));return gt.enter().append("g").classed("hovertext",!0).each((function(){var t=vx.select(this);t.append("rect").call(Nx.fill,Nx.addOpacity(s,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(Zx.font,{weight:d,style:h,variant:B,textcase:p,lineposition:F,shadow:f,family:g,size:u})})),gt.exit().remove(),gt.each((function(t){var e=vx.select(this).attr("transform",""),o=t.color;Array.isArray(o)&&(o=o[t.eventData[0].pointNumber]);var l=t.bgcolor||o,c=Nx.combine(Nx.opacity(l)?l:Nx.defaultLine,s),Q=Nx.combine(Nx.opacity(o)?o:Nx.defaultLine,s),I=t.borderColor||Nx.contrast(c),U=rv(t,G,r,n,m,e),b=U[0],y=U[1],x=e.select("text.nums").call(Zx.font,{family:t.fontFamily||g,size:t.fontSize||u,color:t.fontColor||I,weight:t.fontWeight||d,style:t.fontStyle||h,variant:t.fontVariant||B,textcase:t.fontTextcase||p,lineposition:t.fontLineposition||F,shadow:t.fontShadow||f}).text(b).attr("data-notex",1).call(Vx.positionText,0,0).call(Vx.convertToTspans,i),v=e.select("text.name"),R=0,S=0;if(y&&y!==b){v.call(Zx.font,{family:t.fontFamily||g,size:t.fontSize||u,color:Q,weight:t.fontWeight||d,style:t.fontStyle||h,variant:t.fontVariant||B,textcase:t.fontTextcase||p,lineposition:t.fontLineposition||F,shadow:t.fontShadow||f}).text(y).attr("data-notex",1).call(Vx.positionText,0,0).call(Vx.convertToTspans,i);var w=hv(i,v.node());R=w.width+2*jx,S=w.height+2*jx}else v.remove(),e.select("rect").remove();e.select("path").style({fill:c,stroke:I});var V=t.xa._offset+(t.x0+t.x1)/2,E=t.ya._offset+(t.y0+t.y1)/2,Z=Math.abs(t.x1-t.x0),N=Math.abs(t.y1-t.y0),D=hv(i,x.node()),X=D.width/n._invScaleX,H=D.height/n._invScaleY;t.ty0=(C-D.top)/n._invScaleY,t.bx=X+2*jx,t.by=Math.max(H+2*jx,S),t.anchor="start",t.txwidth=X,t.tx2width=R,t.offset=0;var W,k,M=(X+Px+jx+R)*n._invScaleX;if(a)t.pos=V,W=E+N/2+M<=L,k=E-N/2-M>=0,"top"!==t.idealAlign&&W||!k?W?(E+=N/2,t.anchor="start"):t.anchor="middle":(E-=N/2,t.anchor="end"),t.crossPos=E;else{if(t.pos=E,W=V+Z/2+M<=A,k=V-Z/2-M>=0,"left"!==t.idealAlign&&W||!k)if(W)V+=Z/2,t.anchor="start";else{t.anchor="middle";var T=M/2,Y=V+T-A,J=V-T;Y>0&&(V-=Y),J<0&&(V+=-J)}else V-=Z/2,t.anchor="end";t.crossPos=V}x.attr("text-anchor",t.anchor),R&&v.attr("text-anchor",t.anchor),e.attr("transform",Rx(V,E)+(a?Sx(Jx):""))})),{hoverLabels:gt,commonLabelBoundingBox:Z}}function rv(t,e,i,n,r,a){var s="",o="";void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name&&(t.trace._meta&&(t.name=Lx.templateString(t.name,t.trace._meta)),s=cv(t.name,t.nameLength));var l=i.charAt(0),c="x"===l?"y":"x";void 0!==t.zLabel?(void 0!==t.xLabel&&(o+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(o+="y: "+t.yLabel+"<br>"),"choropleth"!==t.trace.type&&"choroplethmapbox"!==t.trace.type&&"choroplethmap"!==t.trace.type&&(o+=(o?"z: ":"")+t.zLabel)):e&&t[l+"Label"]===r?o=t[c+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&"scattercarpet"!==t.trace.type&&(o=t.yLabel):o=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",!t.text&&0!==t.text||Array.isArray(t.text)||(o+=(o?"<br>":"")+t.text),void 0!==t.extraText&&(o+=(o?"<br>":"")+t.extraText),a&&""===o&&!t.hovertemplate&&(""===s&&a.remove(),o=s);var g=t.hovertemplate||!1;if(g){var u=t.hovertemplateLabels||t;t[l+"Label"]!==r&&(u[l+"other"]=u[l+"Val"],u[l+"otherLabel"]=u[l+"Label"]),o=(o=Lx.hovertemplateString(g,u,n._d3locale,t.eventData[0]||{},t.trace._meta)).replace(iv,(function(e,i){return s=cv(i,t.nameLength),""}))}return[o,s]}function av(t,e){var i=0,n=t.offset;return e&&(n*=-Kx,i=t.offset*Ox),{x:i,y:n}}function sv(t,e,i,n){var r=function(t){return t*i},a=function(t){return t*n};t.each((function(t){var i=vx.select(this);if(t.del)return i.remove();var n,s,o,l,c=i.select("text.nums"),g=t.anchor,u="end"===g?-1:1,d=(s={start:1,end:-1,middle:0}[(n=t).anchor],l=(o=s*(Px+jx))+s*(n.txwidth+jx),"middle"===n.anchor&&(o-=n.tx2width/2,l+=n.txwidth/2+jx),{alignShift:s,textShiftX:o,text2ShiftX:l}),h=av(t,e),B=h.x,p=h.y,F="middle"===g;i.select("path").attr("d",F?"M-"+r(t.bx/2+t.tx2width/2)+","+a(p-t.by/2)+"h"+r(t.bx)+"v"+a(t.by)+"h-"+r(t.bx)+"Z":"M0,0L"+r(u*Px+B)+","+a(Px+p)+"v"+a(t.by/2-Px)+"h"+r(u*t.bx)+"v-"+a(t.by)+"H"+r(u*Px+B)+"V"+a(p-Px)+"Z");var f=B+d.textShiftX,Q=p+t.ty0-t.by/2+jx,I=t.textAlign||"auto";"auto"!==I&&("left"===I&&"start"!==g?(c.attr("text-anchor","start"),f=F?-t.bx/2-t.tx2width/2+jx:-t.bx-jx):"right"===I&&"end"!==g&&(c.attr("text-anchor","end"),f=F?t.bx/2-t.tx2width/2-jx:t.bx+jx)),c.call(Vx.positionText,r(f),a(Q)),t.tx2width&&(i.select("text.name").call(Vx.positionText,r(d.text2ShiftX+d.alignShift*jx+B),a(p+t.ty0-t.by/2+jx)),i.select("rect").call(Zx.setRect,r(d.text2ShiftX+(d.alignShift-1)*t.tx2width/2+B),a(p-t.by/2-1),r(t.tx2width),a(t.by+2)))}))}function ov(t,e){var i=t.index,n=t.trace||{},r=t.cd[0],a=t.cd[i]||{};function s(t){return t||Cx(t)&&0===t}var o=Array.isArray(i)?function(t,e){var a=Lx.castOption(r,i,t);return s(a)?a:Lx.extractOption({},n,"",e)}:function(t,e){return Lx.extractOption(a,n,t,e)};function l(e,i,n){var r=o(i,n);s(r)&&(t[e]=r)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("fontWeight","htw","hoverlabel.font.weight"),l("fontStyle","hty","hoverlabel.font.style"),l("fontVariant","htv","hoverlabel.font.variant"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),t.posref="y"===e||"closest"===e&&"h"===n.orientation?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=Lx.constrain(t.x0,0,t.xa._length),t.x1=Lx.constrain(t.x1,0,t.xa._length),t.y0=Lx.constrain(t.y0,0,t.ya._length),t.y1=Lx.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:Xx.hoverLabelText(t.xa,t.xLabelVal,n.xhoverformat),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:Xx.hoverLabelText(t.ya,t.yLabelVal,n.yhoverformat),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var c=Xx.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+c+" / -"+Xx.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" ± "+c,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var g=Xx.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+g+" / -"+Xx.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" ± "+g,"y"===e&&(t.distance+=1)}var u=t.hoverinfo||t.trace.hoverinfo;return u&&"all"!==u&&(-1===(u=Array.isArray(u)?u:u.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===u.indexOf("y")&&(t.yLabel=void 0),-1===u.indexOf("z")&&(t.zLabel=void 0),-1===u.indexOf("text")&&(t.text=void 0),-1===u.indexOf("name")&&(t.name=void 0)),t}function lv(t,e,i){var n,r,a=i.container,s=i.fullLayout,o=s._size,l=i.event,c=!!e.hLinePoint,g=!!e.vLinePoint;if(a.selectAll(".spikeline").remove(),g||c){var u=Nx.combine(s.plot_bgcolor,s.paper_bgcolor);if(c){var d,h,B=e.hLinePoint;n=B&&B.xa,"cursor"===(r=B&&B.ya).spikesnap?(d=l.pointerX,h=l.pointerY):(d=n._offset+B.x,h=r._offset+B.y);var p,F,f=Ax.readability(B.color,u)<1.5?Nx.contrast(u):B.color,Q=r.spikemode,I=r.spikethickness,U=r.spikecolor||f,b=Xx.getPxPosition(t,r);if(-1!==Q.indexOf("toaxis")||-1!==Q.indexOf("across")){if(-1!==Q.indexOf("toaxis")&&(p=b,F=d),-1!==Q.indexOf("across")){var y=r._counterDomainMin,m=r._counterDomainMax;"free"===r.anchor&&(y=Math.min(y,r.position),m=Math.max(m,r.position)),p=o.l+y*o.w,F=o.l+m*o.w}a.insert("line",":first-child").attr({x1:p,x2:F,y1:h,y2:h,"stroke-width":I,stroke:U,"stroke-dasharray":Zx.dashStyle(r.spikedash,I)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:p,x2:F,y1:h,y2:h,"stroke-width":I+2,stroke:u}).classed("spikeline",!0).classed("crisp",!0)}-1!==Q.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:b+("right"!==r.side?I:-I),cy:h,r:I,fill:U}).classed("spikeline",!0)}if(g){var x,v,C=e.vLinePoint;n=C&&C.xa,r=C&&C.ya,"cursor"===n.spikesnap?(x=l.pointerX,v=l.pointerY):(x=n._offset+C.x,v=r._offset+C.y);var A,L,G=Ax.readability(C.color,u)<1.5?Nx.contrast(u):C.color,R=n.spikemode,S=n.spikethickness,w=n.spikecolor||G,V=Xx.getPxPosition(t,n);if(-1!==R.indexOf("toaxis")||-1!==R.indexOf("across")){if(-1!==R.indexOf("toaxis")&&(A=V,L=v),-1!==R.indexOf("across")){var E=n._counterDomainMin,Z=n._counterDomainMax;"free"===n.anchor&&(E=Math.min(E,n.position),Z=Math.max(Z,n.position)),A=o.t+(1-Z)*o.h,L=o.t+(1-E)*o.h}a.insert("line",":first-child").attr({x1:x,x2:x,y1:A,y2:L,"stroke-width":S,stroke:w,"stroke-dasharray":Zx.dashStyle(n.spikedash,S)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:x,x2:x,y1:A,y2:L,"stroke-width":S+2,stroke:u}).classed("spikeline",!0).classed("crisp",!0)}-1!==R.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:x,cy:V-("top"!==n.side?S:-S),r:S,fill:w}).classed("spikeline",!0)}}}function cv(t,e){return Vx.plainText(t||"",{len:e,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function gv(t,e,i){var n=e[t+"a"],r=e[t+"Val"],a=e.cd[0];if("category"===n.type||"multicategory"===n.type)r=n._categoriesMap[r];else if("date"===n.type){var s=e.trace[t+"periodalignment"];if(s){var o=e.cd[e.index],l=o[t+"Start"];void 0===l&&(l=o[t]);var c=o[t+"End"];void 0===c&&(c=o[t]);var g=c-l;"end"===s?r+=g:"middle"===s&&(r+=g/2)}r=n.d2c(r)}return a&&a.t&&a.t.posLetter===n._id&&("group"!==i.boxmode&&"group"!==i.violinmode||(r+=a.t.dPos)),r}function uv(t){return t.offsetTop+t.clientTop}function dv(t){return t.offsetLeft+t.clientLeft}function hv(t,e){var i=t._fullLayout,n=e.getBoundingClientRect(),r=n.left,a=n.top,s=r+n.width,o=a+n.height,l=Lx.apply3DTransform(i._invTransform)(r,a),c=Lx.apply3DTransform(i._invTransform)(s,o),g=l[0],u=l[1],d=c[0],h=c[1];return{x:g,y:u,width:d-g,height:h-u,top:Math.min(u,h),left:Math.min(g,d),right:Math.max(g,d),bottom:Math.max(u,h)}}var Bv=_B,pv=Uu,Fv=TQ.isUnifiedHover,fv=function(t,e,i,n){n=n||{};var r=e.legend;function a(t){n.font[t]||(n.font[t]=r?e.legend.font[t]:e.font[t])}e&&Fv(e.hovermode)&&(n.font||(n.font={}),a("size"),a("family"),a("color"),a("weight"),a("style"),a("variant"),r?(n.bgcolor||(n.bgcolor=pv.combine(e.legend.bgcolor,e.paper_bgcolor)),n.bordercolor||(n.bordercolor=e.legend.bordercolor)):n.bgcolor||(n.bgcolor=e.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),Bv.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)},Qv=_B,Iv=fv,Uv=jg,bv=_B,yv=eu,mv=fv,xv=_B,vv=jg,Cv=function(t,e){function i(i,n){return void 0!==e[i]?e[i]:xv.coerce(t,e,vv,i,n)}return i("clickmode"),i("hoversubplots"),i("hovermode")},Av=_B,Lv=jg,Gv=Cv,Rv=fv,Sv=_B,wv=Nu;function Vv(t,e,i,n){n=n||Sv.identity,Array.isArray(t)&&(e[0][i]=n(t))}var Ev=Nu,Zv=rm.hover,Nv=Js,Dv=_B,Xv=nm,Hv=rm,Wv={moduleType:"component",name:"fx",constants:zg,schema:{layout:jg},attributes:eu,layoutAttributes:jg,supplyLayoutGlobalDefaults:function(t,e){Iv(t,e,(function(i,n){return Qv.coerce(t,e,Uv,i,n)}))},supplyDefaults:function(t,e,i,n){var r=bv.extendFlat({},n.hoverlabel);e.hovertemplate&&(r.namelength=-1),mv(t,e,(function(i,n){return bv.coerce(t,e,yv,i,n)}),r)},supplyLayoutDefaults:function(t,e){function i(i,n){return Av.coerce(t,e,Lv,i,n)}Gv(t,e)&&(i("hoverdistance"),i("spikedistance")),"select"===i("dragmode")&&i("selectdirection");var n=e._has("mapbox"),r=e._has("map"),a=e._has("geo"),s=e._basePlotModules.length;"zoom"===e.dragmode&&((n||r||a)&&1===s||(n||r)&&a&&2===s)&&(e.dragmode="pan"),Rv(t,e,i),Av.coerceFont(i,"hoverlabel.grouptitlefont",e.hoverlabel.font)},calc:function(t){var e=t.calcdata,i=t._fullLayout;function n(t){return function(e){return Sv.coerceHoverinfo({hoverinfo:e},{_module:t._module},i)}}for(var r=0;r<e.length;r++){var a=e[r],s=a[0].trace;if(!wv.traceIs(s,"pie-like")){var o=wv.traceIs(s,"2dMap")?Vv:Sv.fillArray;o(s.hoverinfo,a,"hi",n(s)),s.hovertemplate&&o(s.hovertemplate,a,"ht"),s.hoverlabel&&(o(s.hoverlabel.bgcolor,a,"hbg"),o(s.hoverlabel.bordercolor,a,"hbc"),o(s.hoverlabel.font.size,a,"hts"),o(s.hoverlabel.font.color,a,"htc"),o(s.hoverlabel.font.family,a,"htf"),o(s.hoverlabel.font.weight,a,"htw"),o(s.hoverlabel.font.style,a,"hty"),o(s.hoverlabel.font.variant,a,"htv"),o(s.hoverlabel.namelength,a,"hnl"),o(s.hoverlabel.align,a,"hta"))}}},getDistanceFunction:TQ.getDistanceFunction,getClosest:TQ.getClosest,inbox:TQ.inbox,quadrature:TQ.quadrature,appendArrayPointValue:TQ.appendArrayPointValue,castHoverOption:function(t,e,i){return Dv.castOption(t,e,"hoverlabel."+i)},castHoverinfo:function(t,e,i){return Dv.castOption(t,i,"hoverinfo",(function(i){return Dv.coerceHoverinfo({hoverinfo:i},{_module:t._module},e)}))},hover:Hv.hover,unhover:Xv.unhover,loneHover:Hv.loneHover,loneUnhover:function(t){var e=Dv.isD3Selection(t)?t:Nv.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:function(t,e,i){var n=Ev.getComponentMethod("annotations","onClick")(t,t._hoverdata);function r(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==i&&Zv(t,e,i,!0),t._hoverdata&&e&&e.target&&(n&&n.then?n.then(r):r(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}};var kv={};!function(t){t.selectMode=function(t){return"lasso"===t||"select"===t},t.drawMode=function(t){return"drawclosedpath"===t||"drawopenpath"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},t.openMode=function(t){return"drawline"===t||"drawopenpath"===t},t.rectMode=function(t){return"select"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},t.freeMode=function(t){return"lasso"===t||"drawclosedpath"===t||"drawopenpath"===t},t.selectingOrDrawing=function(e){return t.freeMode(e)||t.rectMode(e)}}(kv);var Mv=function(t){var e=t._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each((function(t){t.regl&&t.regl.clear({color:!0,depth:!0})}))},Tv={},Yv={exports:{}},Jv={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}},_v={},zv={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)},Ov=_B.strTranslate;function Kv(t,e){switch(t.type){case"log":return t.p2d(e);case"date":return t.p2r(e,0,t.calendar);default:return t.p2r(e)}}var Pv={p2r:Kv,r2p:function(t,e){switch(t.type){case"log":return t.d2p(e);case"date":return t.r2p(e,0,t.calendar);default:return t.r2p(e)}},axValue:function(t){var e="y"===t._id.charAt(0)?1:0;return function(i){return Kv(t,i[e])}},getTransform:function(t){return Ov(t.xaxis._offset,t.yaxis._offset)}};!function(t){var e=YQ,i=zv.CIRCLE_SIDES,n=zv.SQRT2,r=Pv.p2r,a=Pv.r2p,s=[0,3,4,5,6,1,2],o=[0,3,4,1,2];function l(t,e){return Math.abs(t-e)<=1e-6}function c(t,e){var i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+n*n)}t.writePaths=function(t){var e=t.length;if(!e)return"M0,0Z";for(var i="",n=0;n<e;n++)for(var r=t[n].length,a=0;a<r;a++){var l=t[n][a][0];if("Z"===l)i+="Z";else for(var c=t[n][a].length,g=0;g<c;g++){var u=g;"Q"===l||"S"===l?u=o[g]:"C"===l&&(u=s[g]),i+=t[n][a][u],g>0&&g<c-1&&(i+=",")}}return i},t.readPaths=function(t,n,s,o){var l,c,g,u=e(t),d=[],h=-1,B=0,p=0,F=function(){c=B,g=p};F();for(var f=0;f<u.length;f++){var Q,I,U,b,y=[],m=u[f][0],x=m;switch(m){case"M":h++,d[h]=[],B=+u[f][1],p=+u[f][2],y.push([x,B,p]),F();break;case"Q":case"S":Q=+u[f][1],U=+u[f][2],B=+u[f][3],p=+u[f][4],y.push([x,B,p,Q,U]);break;case"C":Q=+u[f][1],U=+u[f][2],I=+u[f][3],b=+u[f][4],B=+u[f][5],p=+u[f][6],y.push([x,B,p,Q,U,I,b]);break;case"T":case"L":B=+u[f][1],p=+u[f][2],y.push([x,B,p]);break;case"H":x="L",B=+u[f][1],y.push([x,B,p]);break;case"V":x="L",p=+u[f][1],y.push([x,B,p]);break;case"A":x="L";var v=+u[f][1],C=+u[f][2];+u[f][4]||(v=-v,C=-C);var A=B-v,L=p;for(l=1;l<=i/2;l++){var G=2*Math.PI*l/i;y.push([x,A+v*Math.cos(G),L+C*Math.sin(G)])}break;case"Z":B===c&&p===g||(B=c,p=g,y.push([x,B,p]))}for(var R=(s||{}).domain,S=n._fullLayout._size,w=s&&"pixel"===s.xsizemode,V=s&&"pixel"===s.ysizemode,E=!1===o,Z=0;Z<y.length;Z++){for(l=0;l+2<7;l+=2){var N=y[Z][l+1],D=y[Z][l+2];void 0!==N&&void 0!==D&&(B=N,p=D,s&&(s.xaxis&&s.xaxis.p2r?(E&&(N-=s.xaxis._offset),N=w?a(s.xaxis,s.xanchor)+N:r(s.xaxis,N)):(E&&(N-=S.l),R?N=R.x[0]+N/S.w:N/=S.w),s.yaxis&&s.yaxis.p2r?(E&&(D-=s.yaxis._offset),D=V?a(s.yaxis,s.yanchor)-D:r(s.yaxis,D)):(E&&(D-=S.t),D=R?R.y[1]-D/S.h:1-D/S.h)),y[Z][l+1]=N,y[Z][l+2]=D)}d[h].push(y[Z].slice())}}return d},t.pointsOnRectangle=function(t){if(5!==t.length)return!1;for(var e=1;e<3;e++){if(!l(t[0][e]-t[1][e],t[3][e]-t[2][e]))return!1;if(!l(t[0][e]-t[3][e],t[1][e]-t[2][e]))return!1}return!(!l(t[0][1],t[1][1])&&!l(t[0][1],t[3][1]))&&!!(c(t[0],t[1])*c(t[0],t[3]))},t.pointsOnEllipse=function(t){var e=t.length;if(e!==i+1)return!1;e=i;for(var n=0;n<e;n++){var r=(2*e-n)%e,a=(e/2+r)%e,s=(e/2+n)%e;if(!l(c(t[n],t[s]),c(t[r],t[a])))return!1}return!0},t.handleEllipse=function(e,r,a){if(!e)return[r,a];var s=t.ellipseOver({x0:r[0],y0:r[1],x1:a[0],y1:a[1]}),o=(s.x1+s.x0)/2,l=(s.y1+s.y0)/2,c=(s.x1-s.x0)/2,g=(s.y1-s.y0)/2;c||(c=g/=n),g||(g=c/=n);for(var u=[],d=0;d<i;d++){var h=2*d*Math.PI/i;u.push([o+c*Math.cos(h),l+g*Math.sin(h)])}return u},t.ellipseOver=function(t){var e=t.x0,i=t.y0,r=t.x1,a=t.y1,s=r-e,o=a-i,l=((e-=s)+r)/2,c=((i-=o)+a)/2;return{x0:l-(s*=n),y0:c-(o*=n),x1:l+s,y1:c+o}},t.fixDatesForPaths=function(t,e,i){var n="date"===e.type,r="date"===i.type;if(!n&&!r)return t;for(var a=0;a<t.length;a++)for(var s=0;s<t[a].length;s++)for(var o=0;o+2<t[a][s].length;o+=2)n&&(t[a][s][o+1]=t[a][s][o+1].replace(" ","_")),r&&(t[a][s][o+2]=t[a][s][o+2].replace(" ","_"));return t}}(_v);var jv=kv.drawMode,qv=kv.openMode,$v=zv.i000,tC=zv.i090,eC=zv.i180,iC=zv.i270,nC=zv.cos45,rC=zv.sin45,aC=Pv.p2r,sC=Pv.r2p,oC=Dp.clearOutline,lC=_v.readPaths,cC=_v.writePaths,gC=_v.ellipseOver,uC=_v.fixDatesForPaths;function dC(t,e,i){var n,r=t[0][0],a=e.gd,s=r.getAttribute("d"),o=a._fullLayout.newshape,l=e.plotinfo,c=e.isActiveShape,g=l.xaxis,u=l.yaxis,d=!!l.domain||!l.xaxis,h=!!l.domain||!l.yaxis,B=qv(i),p=lC(s,a,l,c),F={editable:!0,visible:o.visible,name:o.name,showlegend:o.showlegend,legend:o.legend,legendwidth:o.legendwidth,legendgroup:o.legendgroup,legendgrouptitle:{text:o.legendgrouptitle.text,font:o.legendgrouptitle.font},legendrank:o.legendrank,label:o.label,xref:d?"paper":g._id,yref:h?"paper":u._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};if(B||(F.fillcolor=o.fillcolor,F.fillrule=o.fillrule),1===p.length&&(n=p[0]),n&&5===n.length&&"drawrect"===i)F.type="rect",F.x0=n[0][1],F.y0=n[0][2],F.x1=n[2][1],F.y1=n[2][2];else if(n&&"drawline"===i)F.type="line",F.x0=n[0][1],F.y0=n[0][2],F.x1=n[1][1],F.y1=n[1][2];else if(n&&"drawcircle"===i){F.type="circle";var f=n[$v][1],Q=n[tC][1],I=n[eC][1],U=n[iC][1],b=n[$v][2],y=n[tC][2],m=n[eC][2],x=n[iC][2],v=l.xaxis&&("date"===l.xaxis.type||"log"===l.xaxis.type),C=l.yaxis&&("date"===l.yaxis.type||"log"===l.yaxis.type);v&&(f=sC(l.xaxis,f),Q=sC(l.xaxis,Q),I=sC(l.xaxis,I),U=sC(l.xaxis,U)),C&&(b=sC(l.yaxis,b),y=sC(l.yaxis,y),m=sC(l.yaxis,m),x=sC(l.yaxis,x));var A=(Q+U)/2,L=(b+m)/2,G=gC({x0:A,y0:L,x1:A+(U-Q+I-f)/2*nC,y1:L+(x-y+m-b)/2*rC});v&&(G.x0=aC(l.xaxis,G.x0),G.x1=aC(l.xaxis,G.x1)),C&&(G.y0=aC(l.yaxis,G.y0),G.y1=aC(l.yaxis,G.y1)),F.x0=G.x0,F.y0=G.y0,F.x1=G.x1,F.y1=G.y1}else F.type="path",g&&u&&uC(p,g,u),F.path=cC(p),n=null;return F}var hC=function(t,e){if(t.length&&t[0][0]){var i=e.gd,n=e.isActiveShape,r=e.dragmode,a=(i.layout||{}).shapes||[];if(!jv(r)&&void 0!==n){var s=i._fullLayout._activeShapeIndex;if(s<a.length)switch(i._fullLayout.shapes[s].type){case"rect":r="drawrect";break;case"circle":r="drawcircle";break;case"line":r="drawline";break;case"path":var o=a[s].path||"";r="Z"===o[o.length-1]?"drawclosedpath":"drawopenpath"}}var l=dC(t,e,r);oC(i);for(var c=e.editHelpers,g=(c||{}).modifyItem,u=[],d=0;d<a.length;d++){var h=i._fullLayout.shapes[d];if(u[d]=h._input,void 0!==n&&d===i._fullLayout._activeShapeIndex){var B=l;switch(h.type){case"line":case"rect":case"circle":g("x0",B.x0-(h.x0shift||0)),g("x1",B.x1-(h.x1shift||0)),g("y0",B.y0-(h.y0shift||0)),g("y1",B.y1-(h.y1shift||0));break;case"path":g("path",B.path)}}}return void 0===n?(u.push(l),u):c?c.getUpdateObj():{}}},BC=dC,pC=kv.selectMode,FC=Dp.clearOutline,fC=_v.readPaths,QC=_v.writePaths,IC=_v.fixDatesForPaths,UC=function(t,e){if(t.length){var i=t[0][0];if(i){var n=i.getAttribute("d"),r=e.gd,a=r._fullLayout.newselection,s=e.plotinfo,o=s.xaxis,l=s.yaxis,c=e.isActiveSelection,g=e.dragmode,u=(r.layout||{}).selections||[];if(!pC(g)&&void 0!==c){var d=r._fullLayout._activeSelectionIndex;if(d<u.length)switch(r._fullLayout.selections[d].type){case"rect":g="select";break;case"path":g="lasso"}}var h,B=fC(n,r,s,c),p={xref:o._id,yref:l._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};1===B.length&&(h=B[0]),h&&5===h.length&&"select"===g?(p.type="rect",p.x0=h[0][1],p.y0=h[0][2],p.x1=h[2][1],p.y1=h[2][2]):(p.type="path",o&&l&&IC(B,o,l),p.path=QC(B),h=null),FC(r);for(var F=e.editHelpers,f=(F||{}).modifyItem,Q=[],I=0;I<u.length;I++){var U=r._fullLayout.selections[I];if(U){if(Q[I]=U._input,void 0!==c&&I===r._fullLayout._activeSelectionIndex){var b=p;switch(U.type){case"rect":f("x0",b.x0),f("x1",b.x1),f("y0",b.y0),f("y1",b.y1);break;case"path":f("path",b.path)}}}else Q[I]=U}return void 0===c?(Q.push(p),Q):F?F.getUpdateObj():{}}}},bC={},yC={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}};!function(t){var e=yC,i=_B,n=Vy;function r(t,e){var i=0;return(e=e||0)&&t&&("category"===t.type||"multicategory"===t.type)&&(i=(t.r2p(1)-t.r2p(0))*e),i}t.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},t.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},t.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},t.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},t.extractPathCoords=function(t,n,r){var a=[];return t.match(e.segmentRE).forEach((function(t){var s=n[t.charAt(0)].drawn;if(void 0!==s){var o=t.substr(1).match(e.paramRE);if(o&&!(o.length<s)){var l=o[s],c=r?l:i.cleanNumber(l);a.push(c)}}})),a},t.getDataToPixel=function(e,i,n,a,s){var o,l=e._fullLayout._size;if(i)if("domain"===s)o=function(t){return i._length*(a?1-t:t)+i._offset};else{var c=t.shapePositionToRange(i);o=function(t){var e=r(i,n);return i._offset+i.r2p(c(t,!0))+e},"date"===i.type&&(o=t.decodeDate(o))}else o=a?function(t){return l.t+l.h*(1-t)}:function(t){return l.l+l.w*t};return o},t.getPixelToData=function(e,i,n,r){var a,s=e._fullLayout._size;if(i)if("domain"===r)a=function(t){var e=(t-i._offset)/i._length;return n?1-e:e};else{var o=t.rangeToShapePosition(i);a=function(t){return o(i.p2r(t-i._offset))}}else a=n?function(t){return 1-(t-s.t)/s.h}:function(t){return(t-s.l)/s.w};return a},t.roundPositionForSharpStrokeRendering=function(t,e){var i=1===Math.round(e%2),n=Math.round(t);return i?n+.5:n},t.makeShapesOptionsAndPlotinfo=function(t,e){var i=t._fullLayout.shapes[e]||{},n=t._fullLayout._plots[i.xref+i.yref];return!!n?n._hadPlotinfo=!0:(n={},i.xref&&"paper"!==i.xref&&(n.xaxis=t._fullLayout[i.xref+"axis"]),i.yref&&"paper"!==i.yref&&(n.yaxis=t._fullLayout[i.yref+"axis"])),n.xsizemode=i.xsizemode,n.ysizemode=i.ysizemode,n.xanchor=i.xanchor,n.yanchor=i.yanchor,{options:i,plotinfo:n}},t.makeSelectionsOptionsAndPlotinfo=function(t,e){var i=t._fullLayout.selections[e]||{},n=t._fullLayout._plots[i.xref+i.yref];return!!n?n._hadPlotinfo=!0:(n={},i.xref&&(n.xaxis=t._fullLayout[i.xref+"axis"]),i.yref&&(n.yaxis=t._fullLayout[i.yref+"axis"])),{options:i,plotinfo:n}},t.getPathString=function(a,s){var o,l,c,g,u,d,h,B,p=s.type,F=n.getRefType(s.xref),f=n.getRefType(s.yref),Q=n.getFromId(a,s.xref),I=n.getFromId(a,s.yref),U=a._fullLayout._size,b=r(Q,s.x0shift),y=r(Q,s.x1shift),m=r(I,s.y0shift),x=r(I,s.y1shift);if(Q?"domain"===F?l=function(t){return Q._offset+Q._length*t}:(o=t.shapePositionToRange(Q),l=function(t){return Q._offset+Q.r2p(o(t,!0))}):l=function(t){return U.l+U.w*t},I?"domain"===f?g=function(t){return I._offset+I._length*(1-t)}:(c=t.shapePositionToRange(I),g=function(t){return I._offset+I.r2p(c(t,!0))}):g=function(t){return U.t+U.h*(1-t)},"path"===p)return Q&&"date"===Q.type&&(l=t.decodeDate(l)),I&&"date"===I.type&&(g=t.decodeDate(g)),function(t,n,r){var a=t.path,s=t.xsizemode,o=t.ysizemode,l=t.xanchor,c=t.yanchor;return a.replace(e.segmentRE,(function(t){var a=0,g=t.charAt(0),u=e.paramIsX[g],d=e.paramIsY[g],h=e.numParams[g],B=t.substr(1).replace(e.paramRE,(function(t){return u[a]?t="pixel"===s?n(l)+Number(t):n(t):d[a]&&(t="pixel"===o?r(c)-Number(t):r(t)),++a>h&&(t="X"),t}));return a>h&&(B=B.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+t)),g+B}))}(s,l,g);if("pixel"===s.xsizemode){var v=l(s.xanchor);u=v+s.x0+b,d=v+s.x1+y}else u=l(s.x0)+b,d=l(s.x1)+y;if("pixel"===s.ysizemode){var C=g(s.yanchor);h=C-s.y0+m,B=C-s.y1+x}else h=g(s.y0)+m,B=g(s.y1)+x;if("line"===p)return"M"+u+","+h+"L"+d+","+B;if("rect"===p)return"M"+u+","+h+"H"+d+"V"+B+"H"+u+"Z";var A=(u+d)/2,L=(h+B)/2,G=Math.abs(A-u),R=Math.abs(L-h),S="A"+G+","+R,w=A+G+","+L;return"M"+w+S+" 0 1,1 "+(A+","+(L-R))+S+" 0 0,1 "+w+"Z"}}(bC);var mC=_B,xC=Vy,vC=xF,CC=jI,AC=_v.readPaths,LC=bC,GC=LC.getPathString,RC=jd,SC=CF.FROM_TL,wC=function(t,e,i,n){if(n.selectAll(".shape-label").remove(),i.label.text||i.label.texttemplate){var r;if(i.label.texttemplate){var a={};if("path"!==i.type){var s=xC.getFromId(t,i.xref),o=xC.getFromId(t,i.yref);for(var l in RC){var c=RC[l](i,s,o);void 0!==c&&(a[l]=c)}}r=mC.texttemplateStringForShapes(i.label.texttemplate,{},t._fullLayout._d3locale,a)}else r=i.label.text;var g,u,d,h,B={"data-index":e},p=i.label.font,F=n.append("g").attr(B).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(r);if(i.path){var f=GC(t,i),Q=AC(f,t);g=1/0,d=1/0,u=-1/0,h=-1/0;for(var I=0;I<Q.length;I++)for(var U=0;U<Q[I].length;U++)for(var b=Q[I][U],y=1;y<b.length;y+=2){var m=b[y],x=b[y+1];g=Math.min(g,m),u=Math.max(u,m),d=Math.min(d,x),h=Math.max(h,x)}}else{var v=xC.getFromId(t,i.xref),C=i.x0shift,A=i.x1shift,L=xC.getRefType(i.xref),G=xC.getFromId(t,i.yref),R=i.y0shift,S=i.y1shift,w=xC.getRefType(i.yref),V=function(e,i){return LC.getDataToPixel(t,v,i,!1,L)(e)},E=function(e,i){return LC.getDataToPixel(t,G,i,!0,w)(e)};g=V(i.x0,C),u=V(i.x1,A),d=E(i.y0,R),h=E(i.y1,S)}var Z=i.label.textangle;"auto"===Z&&(Z="line"===i.type?function(t,e,i,n){var r,a;a=Math.abs(i-t),r=i>=t?e-n:n-e;return-180/Math.PI*Math.atan2(r,a)}(g,d,u,h):0),F.call((function(e){return e.call(CC.font,p).attr({}),vC.convertToTspans(e,t),e}));var N=function(t,e,i,n,r,a,s){var o,l,c,g,u=r.label.textposition,d=r.label.textangle,h=r.label.padding,B=r.type,p=Math.PI/180*a,F=Math.sin(p),f=Math.cos(p),Q=r.label.xanchor,I=r.label.yanchor;if("line"===B){"start"===u?(o=t,l=e):"end"===u?(o=i,l=n):(o=(t+i)/2,l=(e+n)/2),"auto"===Q&&(Q="start"===u?"auto"===d?i>t?"left":i<t?"right":"center":i>t?"right":i<t?"left":"center":"end"===u?"auto"===d?i>t?"right":i<t?"left":"center":i>t?"left":i<t?"right":"center":"center");var U={left:1,center:0,right:-1},b={bottom:-1,middle:0,top:1};if("auto"===d){var y=b[I];c=-h*F*y,g=h*f*y}else{c=h*U[Q],g=h*b[I]}o+=c,l+=g}else c=h+3,-1!==u.indexOf("right")?(o=Math.max(t,i)-c,"auto"===Q&&(Q="right")):-1!==u.indexOf("left")?(o=Math.min(t,i)+c,"auto"===Q&&(Q="left")):(o=(t+i)/2,"auto"===Q&&(Q="center")),l=-1!==u.indexOf("top")?Math.min(e,n):-1!==u.indexOf("bottom")?Math.max(e,n):(e+n)/2,g=h,"bottom"===I?l-=g:"top"===I&&(l+=g);var m=SC[I],x=r.label.font.size,v=s.height;return{textx:o+(v*m-x)*F,texty:l+-(v*m-x)*f,xanchor:Q}}(g,d,u,h,i,Z,CC.bBox(F.node())),D=N.textx,X=N.texty,H=N.xanchor;F.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[H],y:X,x:D,transform:"rotate("+Z+","+D+","+X+")"}).call(vC.positionText,D,X)}};var VC=_B.strTranslate,EC=nm,ZC=kv.drawMode,NC=kv.selectMode,DC=Nu,XC=Uu,HC=zv.i000,WC=zv.i090,kC=zv.i180,MC=zv.i270,TC=Dp.clearOutlineControllers,YC=_v.pointsOnRectangle,JC=_v.pointsOnEllipse,_C=_v.writePaths,zC=hC,OC=BC,KC=UC,PC=wC,jC=function t(e,i,n,r){r||(r=0);var a=n.gd;function s(){t(e,i,n,r++),(JC(e[0])||n.hasText)&&o({redrawing:!0})}function o(t){var e={};void 0!==n.isActiveShape&&(n.isActiveShape=!1,e=zC(i,n)),void 0!==n.isActiveSelection&&(n.isActiveSelection=!1,e=KC(i,n),a._fullLayout._reselect=!0),Object.keys(e).length&&DC.call((t||{}).redrawing?"relayout":"_guiRelayout",a,e)}var l,c,g,u,d,h=a._fullLayout._zoomlayer,B=n.dragmode,p=ZC(B),F=NC(B);((p||F)&&(a._fullLayout._outlining=!0),TC(a),i.attr("d",_C(e)),r||!n.isActiveShape&&!n.isActiveSelection)||(d=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];t[i]=[];for(var r=0;r<n.length;r++){t[i][r]=[];for(var a=0;a<n[r].length;a++)t[i][r][a]=n[r][a]}}return t}([],e),function(t){l=[];for(var i=0;i<e.length;i++){var r=e[i],s=YC(r),o=!s&&JC(r);l[i]=[];for(var c=r.length,g=0;g<c;g++)if("Z"!==r[g][0]&&(!o||g===HC||g===WC||g===kC||g===MC)){var u,d=s&&n.isActiveSelection;d&&(u=qC(r,g));var h=r[g][1],B=r[g][2],p=t.append(d?"rect":"circle").attr("data-i",i).attr("data-j",g).style({fill:XC.background,stroke:XC.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(d){var F=u[1]-h,f=u[2]-B,Q=f?5:Math.max(Math.min(25,Math.abs(F)-5),5),U=F?5:Math.max(Math.min(25,Math.abs(f)-5),5);p.classed(f?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Q).attr("height",U).attr("x",h-Q/2).attr("y",B-U/2).attr("transform",VC(F/2,f/2))}else p.classed("cursor-grab",!0).attr("r",5).attr("cx",h).attr("cy",B);l[i][g]={element:p.node(),gd:a,prepFn:I,doneFn:b,clickFn:y},EC.init(l[i][g])}}}(h.append("g").attr("class","outline-controllers")),function(){if(c=[],!e.length)return;var t=0;c[t]={element:i[0][0],gd:a,prepFn:x,doneFn:v,clickFn:C},EC.init(c[t])}());if(p&&n.hasText){var f=h.select(".label-temp"),Q=OC(i,n,n.dragmode);PC(a,"label-temp",Q,f)}function I(t){g=+t.srcElement.getAttribute("data-i"),u=+t.srcElement.getAttribute("data-j"),l[g][u].moveFn=U}function U(t,i){if(e.length){var r=d[g][u][1],a=d[g][u][2],o=e[g],l=o.length;if(YC(o)){var c=t,h=i;if(n.isActiveSelection)qC(o,u)[1]===o[u][1]?h=0:c=0;for(var B=0;B<l;B++)if(B!==u){var p=o[B];p[1]===o[u][1]&&(p[1]=r+c),p[2]===o[u][2]&&(p[2]=a+h)}if(o[u][1]=r+c,o[u][2]=a+h,!YC(o))for(var F=0;F<l;F++)for(var f=0;f<o[F].length;f++)o[F][f]=d[g][F][f]}else o[u][1]=r+t,o[u][2]=a+i;s()}}function b(){o()}function y(t,i){if(2===t){g=+i.srcElement.getAttribute("data-i"),u=+i.srcElement.getAttribute("data-j");var n=e[g];YC(n)||JC(n)||function(){if(e.length&&e[g]&&e[g].length){for(var t=[],i=0;i<e[g].length;i++)i!==u&&t.push(e[g][i]);t.length>1&&(2!==t.length||"Z"!==t[1][0])&&(0===u&&(t[0][0]="M"),e[g]=t,s(),o())}}()}}function m(t,i){!function(t,i){if(e.length)for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)for(var a=0;a+2<e[n][r].length;a+=2)e[n][r][a+1]=d[n][r][a+1]+t,e[n][r][a+2]=d[n][r][a+2]+i}(t,i),s()}function x(t){(g=+t.srcElement.getAttribute("data-i"))||(g=0),c[g].moveFn=m}function v(){o()}function C(t){2===t&&function(t){if(!NC(t._fullLayout.dragmode))return;TC(t);var e=t._fullLayout._activeSelectionIndex,i=(t.layout||{}).selections||[];if(e<i.length){for(var n=[],r=0;r<i.length;r++)r!==e&&n.push(i[r]);delete t._fullLayout._activeSelectionIndex;var a=t._fullLayout.selections[e];t._fullLayout._deselect={xref:a.xref,yref:a.yref},DC.call("_guiRelayout",t,{selections:n})}}(a)}};function qC(t,e){var i,n,r,a=t[e][1],s=t[e][2],o=t.length;return n=t[i=(e+1)%o][1],r=t[i][2],n===a&&r===s&&(n=t[i=(e+2)%o][1],r=t[i][2]),[i,n,r]}var $C=Js,tA=Nu,eA=_B,iA=Vy,nA=_v.readPaths,rA=jC,aA=wC,sA=Dp.clearOutlineControllers,oA=Uu,lA=jI,cA=Ap.arrayEditor,gA=nm,uA=am,dA=yC,hA=bC,BA=hA.getPathString,pA={draw:FA,drawOne:IA,eraseActiveShape:function(t){if(!QA(t))return;sA(t);var e=t._fullLayout._activeShapeIndex,i=(t.layout||{}).shapes||[];if(e<i.length){for(var n=[],r=0;r<i.length;r++)r!==e&&n.push(i[r]);return delete t._fullLayout._activeShapeIndex,tA.call("_guiRelayout",t,{shapes:n})}}};function FA(t){var e=t._fullLayout;for(var i in e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._shapeUpperLayer.selectAll("text").remove(),e._shapeLowerLayer.selectAll("text").remove(),e._plots){var n=e._plots[i].shapelayer;n&&(n.selectAll("path").remove(),n.selectAll("text").remove())}for(var r=0;r<e.shapes.length;r++)!0===e.shapes[r].visible&&IA(t,r)}function fA(t){return!!t._fullLayout._outlining}function QA(t){return!t._context.edits.shapePosition}function IA(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var i=hA.makeShapesOptionsAndPlotinfo(t,e),n=i.options,r=i.plotinfo;if(n._input&&!0===n.visible)if("above"===n.layer)a(t._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)a(t._fullLayout._shapeLowerLayer);else if("between"===n.layer)a(r.shapelayerBetween);else{if(r._hadPlotinfo)a((r.mainplotinfo||r).shapelayer);else a(t._fullLayout._shapeLowerLayer)}function a(i){var a=BA(t,n),s={"data-index":e,"fill-rule":n.fillrule,d:a},o=n.opacity,l=n.fillcolor,c=n.line.width?n.line.color:"rgba(0,0,0,0)",g=n.line.width,u=n.line.dash;g||!0!==n.editable||(g=5,u="solid");var d="Z"!==a[a.length-1],h=QA(t)&&n.editable&&t._fullLayout._activeShapeIndex===e;h&&(l=d?"rgba(0,0,0,0)":t._fullLayout.activeshape.fillcolor,o=t._fullLayout.activeshape.opacity);var B,p=i.append("g").classed("shape-group",!0).attr({"data-index":e}),F=p.append("path").attr(s).style("opacity",o).call(oA.stroke,c).call(oA.fill,l).call(lA.dashLine,u,g);if(UA(p,t,n),aA(t,e,n,p),(h||t._context.edits.shapePosition)&&(B=cA(t.layout,"shapes",n)),h){F.style({cursor:"move"});var f={element:F.node(),plotinfo:r,gd:t,editHelpers:B,hasText:n.label.text||n.label.texttemplate,isActiveShape:!0},Q=nA(a,t);rA(Q,F,f)}else t._context.edits.shapePosition?function(t,e,i,n,r,a){var s,o,l,c,g,u,d,h,B,p,F,f,Q,I,U,b,y=10,m=10,x="pixel"===i.xsizemode,v="pixel"===i.ysizemode,C="line"===i.type,A="path"===i.type,L=a.modifyItem,G=$C.select(e.node().parentNode),R=iA.getFromId(t,i.xref),S=iA.getRefType(i.xref),w=iA.getFromId(t,i.yref),V=iA.getRefType(i.yref),E=i.x0shift,Z=i.x1shift,N=i.y0shift,D=i.y1shift,X=function(e,i){return hA.getDataToPixel(t,R,i,!1,S)(e)},H=function(e,i){return hA.getDataToPixel(t,w,i,!0,V)(e)},W=hA.getPixelToData(t,R,!1,S),k=hA.getPixelToData(t,w,!0,V),M=Y(),T={element:M.node(),gd:t,prepFn:z,doneFn:O,clickFn:K};function Y(){return C?J():e}function J(){var t=10,a=Math.max(i.line.width,t),s=r.append("g").attr("data-index",n).attr("drag-helper",!0);s.append("path").attr("d",e.attr("d")).style({cursor:"move","stroke-width":a,"stroke-opacity":"0"});var o={"fill-opacity":"0"},l=Math.max(a/2,t);return s.append("circle").attr({"data-line-point":"start-point",cx:x?X(i.xanchor)+i.x0:X(i.x0,E),cy:v?H(i.yanchor)-i.y0:H(i.y0,N),r:l}).style(o).classed("cursor-grab",!0),s.append("circle").attr({"data-line-point":"end-point",cx:x?X(i.xanchor)+i.x1:X(i.x1,Z),cy:v?H(i.yanchor)-i.y1:H(i.y1,D),r:l}).style(o).classed("cursor-grab",!0),s}function _(i){if(fA(t))b=null;else if(C)b="path"===i.target.tagName?"move":"start-point"===i.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var n=T.element.getBoundingClientRect(),r=n.right-n.left,a=n.bottom-n.top,s=i.clientX-n.left,o=i.clientY-n.top,l=!A&&r>y&&a>m&&!i.shiftKey?gA.getCursor(s/r,1-o/a):"move";uA(e,l),b=l.split("-")[0]}}function z(n){fA(t)||(x&&(g=X(i.xanchor)),v&&(u=H(i.yanchor)),"path"===i.type?U=i.path:(s=x?i.x0:X(i.x0),o=v?i.y0:H(i.y0),l=x?i.x1:X(i.x1),c=v?i.y1:H(i.y1)),s<l?(B=s,Q="x0",p=l,I="x1"):(B=l,Q="x1",p=s,I="x0"),!v&&o<c||v&&o>c?(d=o,F="y0",h=c,f="y1"):(d=c,F="y1",h=o,f="y0"),_(n),q(r,i),tt(e,i,t),T.moveFn="move"===b?P:j,T.altKey=n.altKey)}function O(){fA(t)||(uA(e),$(r),UA(e,t,i),tA.call("_guiRelayout",t,a.getUpdateObj()))}function K(){fA(t)||$(r)}function P(a,d){if("path"===i.type){var h=function(t){return t},B=h,p=h;x?L("xanchor",i.xanchor=W(g+a)):(B=function(t){return W(X(t)+a)},R&&"date"===R.type&&(B=hA.encodeDate(B))),v?L("yanchor",i.yanchor=k(u+d)):(p=function(t){return k(H(t)+d)},w&&"date"===w.type&&(p=hA.encodeDate(p))),L("path",i.path=bA(U,B,p))}else x?L("xanchor",i.xanchor=W(g+a)):(L("x0",i.x0=W(s+a)),L("x1",i.x1=W(l+a))),v?L("yanchor",i.yanchor=k(u+d)):(L("y0",i.y0=k(o+d)),L("y1",i.y1=k(c+d)));e.attr("d",BA(t,i)),q(r,i),aA(t,n,i,G)}function j(a,S){if(A){var V=function(t){return t},E=V,Z=V;x?L("xanchor",i.xanchor=W(g+a)):(E=function(t){return W(X(t)+a)},R&&"date"===R.type&&(E=hA.encodeDate(E))),v?L("yanchor",i.yanchor=k(u+S)):(Z=function(t){return k(H(t)+S)},w&&"date"===w.type&&(Z=hA.encodeDate(Z))),L("path",i.path=bA(U,E,Z))}else if(C){if("resize-over-start-point"===b){var N=s+a,D=v?o-S:o+S;L("x0",i.x0=x?N:W(N)),L("y0",i.y0=v?D:k(D))}else if("resize-over-end-point"===b){var M=l+a,T=v?c-S:c+S;L("x1",i.x1=x?M:W(M)),L("y1",i.y1=v?T:k(T))}}else{var Y=function(t){return-1!==b.indexOf(t)},J=Y("n"),_=Y("s"),z=Y("w"),O=Y("e"),K=J?d+S:d,P=_?h+S:h,j=z?B+a:B,$=O?p+a:p;v&&(J&&(K=d-S),_&&(P=h-S)),(!v&&P-K>m||v&&K-P>m)&&(L(F,i[F]=v?K:k(K)),L(f,i[f]=v?P:k(P))),$-j>y&&(L(Q,i[Q]=x?j:W(j)),L(I,i[I]=x?$:W($)))}e.attr("d",BA(t,i)),q(r,i),aA(t,n,i,G)}function q(t,e){function i(){var i="path"!==e.type,n=t.selectAll(".visual-cue").data([0]),r=1;n.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":r}).classed("visual-cue",!0);var a=X(x?e.xanchor:eA.midRange(i?[e.x0,e.x1]:hA.extractPathCoords(e.path,dA.paramIsX))),s=H(v?e.yanchor:eA.midRange(i?[e.y0,e.y1]:hA.extractPathCoords(e.path,dA.paramIsY)));if(a=hA.roundPositionForSharpStrokeRendering(a,r),s=hA.roundPositionForSharpStrokeRendering(s,r),x&&v){var o="M"+(a-1-r)+","+(s-1-r)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";n.attr("d",o)}else if(x){var l="M"+(a-1-r)+","+(s-9-r)+"v18 h2 v-18 Z";n.attr("d",l)}else{var c="M"+(a-9-r)+","+(s-1-r)+"h18 v2 h-18 Z";n.attr("d",c)}}(x||v)&&i()}function $(t){t.selectAll(".visual-cue").remove()}function tt(t,e,i){var n=e.xref,r=e.yref,a=iA.getFromId(i,n),s=iA.getFromId(i,r),o="";"paper"===n||a.autorange||(o+=n),"paper"===r||s.autorange||(o+=r),lA.setClipUrl(t,o?"clip"+i._fullLayout._uid+o:null,i)}gA.init(T),M.node().onmousemove=_}(t,F,n,e,i,B):!0===n.editable&&F.style("pointer-events",d||oA.opacity(l)*o<=.5?"stroke":"all");F.node().addEventListener("click",(function(){return function(t,e){if(!QA(t))return;var i=e.node(),n=+i.getAttribute("data-index");if(n>=0){if(n===t._fullLayout._activeShapeIndex)return void yA(t);t._fullLayout._activeShapeIndex=n,t._fullLayout._deactivateShape=yA,FA(t)}}(t,F)}))}}function UA(t,e,i){var n=(i.xref+i.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");lA.setClipUrl(t,n?"clip"+e._fullLayout._uid+n:null,e)}function bA(t,e,i){return t.replace(dA.segmentRE,(function(t){var n=0,r=t.charAt(0),a=dA.paramIsX[r],s=dA.paramIsY[r],o=dA.numParams[r];return r+t.substr(1).replace(dA.paramRE,(function(t){return n>=o||(a[n]?t=e(t):s[n]&&(t=i(t)),n++),t}))}))}function yA(t){QA(t)&&(t._fullLayout._activeShapeIndex>=0&&(sA(t),delete t._fullLayout._activeShapeIndex,FA(t)))}var mA=Nu,xA=yF,vA=Ep,CA=Jv,AA=pA.eraseActiveShape,LA=_B,GA=LA._,RA=Yv.exports={};function SA(t,e){var i,n,r=e.currentTarget,a=r.getAttribute("data-attr"),s=r.getAttribute("data-val")||!0,o=t._fullLayout,l={},c=vA.list(t,null,!0),g=o._cartesianSpikesEnabled;if("zoom"===a){var u,d="in"===s?.5:2,h=(1+d)/2,B=(1-d)/2;for(n=0;n<c.length;n++)if(!(i=c[n]).fixedrange)if(u=i._name,"auto"===s)l[u+".autorange"]=!0;else if("reset"===s)void 0===i._rangeInitial0&&void 0===i._rangeInitial1?l[u+".autorange"]=!0:void 0===i._rangeInitial0?(l[u+".autorange"]=i._autorangeInitial,l[u+".range"]=[null,i._rangeInitial1]):void 0===i._rangeInitial1?(l[u+".range"]=[i._rangeInitial0,null],l[u+".autorange"]=i._autorangeInitial):l[u+".range"]=[i._rangeInitial0,i._rangeInitial1],void 0!==i._showSpikeInitial&&(l[u+".showspikes"]=i._showSpikeInitial,"on"!==g||i._showSpikeInitial||(g="off"));else{var p=[i.r2l(i.range[0]),i.r2l(i.range[1])],F=[h*p[0]+B*p[1],h*p[1]+B*p[0]];l[u+".range[0]"]=i.l2r(F[0]),l[u+".range[1]"]=i.l2r(F[1])}}else"hovermode"!==a||"x"!==s&&"y"!==s||(s=o._isHoriz?"y":"x",r.setAttribute("data-val",s)),l[a]=s;o._cartesianSpikesEnabled=g,mA.call("_guiRelayout",t,l)}function wA(t,e){for(var i=e.currentTarget,n=i.getAttribute("data-attr"),r=i.getAttribute("data-val")||!0,a=t._fullLayout._subplots.gl3d||[],s={},o=n.split("."),l=0;l<a.length;l++)s[a[l]+"."+o[1]]=r;var c="pan"===r?r:"zoom";s.dragmode=c,mA.call("_guiRelayout",t,s)}function VA(t,e){for(var i=e.currentTarget.getAttribute("data-attr"),n="resetLastSave"===i,r="resetDefault"===i,a=t._fullLayout,s=a._subplots.gl3d||[],o={},l=0;l<s.length;l++){var c,g=s[l],u=g+".camera",d=g+".aspectratio",h=g+".aspectmode",B=a[g]._scene;n?(o[u+".up"]=B.viewInitial.up,o[u+".eye"]=B.viewInitial.eye,o[u+".center"]=B.viewInitial.center,c=!0):r&&(o[u+".up"]=null,o[u+".eye"]=null,o[u+".center"]=null,c=!0),c&&(o[d+".x"]=B.viewInitial.aspectratio.x,o[d+".y"]=B.viewInitial.aspectratio.y,o[d+".z"]=B.viewInitial.aspectratio.z,o[h]=B.viewInitial.aspectmode)}mA.call("_guiRelayout",t,o)}function EA(t,e){var i=e.currentTarget,n=i._previousVal,r=t._fullLayout,a=r._subplots.gl3d||[],s=["xaxis","yaxis","zaxis"],o={},l={};if(n)l=n,i._previousVal=null;else{for(var c=0;c<a.length;c++){var g=a[c],u=r[g],d=g+".hovermode";o[d]=u.hovermode,l[d]=!1;for(var h=0;h<3;h++){var B=s[h],p=g+"."+B+".showspikes";l[p]=!1,o[p]=u[B].showspikes}}i._previousVal=o}return l}function ZA(t,e){for(var i=e.currentTarget,n=i.getAttribute("data-attr"),r=i.getAttribute("data-val")||!0,a=t._fullLayout,s=a._subplots.geo||[],o=0;o<s.length;o++){var l=s[o],c=a[l];if("zoom"===n){var g=c.projection.scale,u="in"===r?2*g:.5*g;mA.call("_guiRelayout",t,l+".projection.scale",u)}}"reset"===n&&kA(t,"geo")}function NA(t){var e=t._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function DA(t){var e=NA(t);mA.call("_guiRelayout",t,"hovermode",e)}function XA(t,e){WA(t,e,"mapbox")}function HA(t,e){WA(t,e,"map")}function WA(t,e,i){for(var n=e.currentTarget.getAttribute("data-val"),r=t._fullLayout,a=r._subplots[i]||[],s={},o=0;o<a.length;o++){var l=a[o],c=r[l].zoom,g="in"===n?1.05*c:c/1.05;s[l+".zoom"]=g}mA.call("_guiRelayout",t,s)}function kA(t,e){for(var i=t._fullLayout,n=i._subplots[e]||[],r={},a=0;a<n.length;a++)for(var s=n[a],o=i[s]._subplot.viewInitial,l=Object.keys(o),c=0;c<l.length;c++){var g=l[c];r[s+"."+g]=o[g]}mA.call("_guiRelayout",t,r)}RA.toImage={name:"toImage",title:function(t){var e=(t._context.toImageButtonOptions||{}).format||"png";return GA(t,"png"===e?"Download plot as a png":"Download plot")},icon:CA.camera,click:function(t){var e=t._context.toImageButtonOptions,i={format:e.format||"png"};LA.notifier(GA(t,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach((function(t){t in e&&(i[t]=e[t])})),mA.call("downloadImage",t,i).then((function(e){LA.notifier(GA(t,"Snapshot succeeded")+" - "+e,"long")})).catch((function(){LA.notifier(GA(t,"Sorry, there was a problem downloading your snapshot!"),"long")}))}},RA.sendDataToCloud={name:"sendDataToCloud",title:function(t){return GA(t,"Edit in Chart Studio")},icon:CA.disk,click:function(t){xA.sendDataToCloud(t)}},RA.editInChartStudio={name:"editInChartStudio",title:function(t){return GA(t,"Edit in Chart Studio")},icon:CA.pencil,click:function(t){xA.sendDataToCloud(t)}},RA.zoom2d={name:"zoom2d",_cat:"zoom",title:function(t){return GA(t,"Zoom")},attr:"dragmode",val:"zoom",icon:CA.zoombox,click:SA},RA.pan2d={name:"pan2d",_cat:"pan",title:function(t){return GA(t,"Pan")},attr:"dragmode",val:"pan",icon:CA.pan,click:SA},RA.select2d={name:"select2d",_cat:"select",title:function(t){return GA(t,"Box Select")},attr:"dragmode",val:"select",icon:CA.selectbox,click:SA},RA.lasso2d={name:"lasso2d",_cat:"lasso",title:function(t){return GA(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:CA.lasso,click:SA},RA.drawclosedpath={name:"drawclosedpath",title:function(t){return GA(t,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:CA.drawclosedpath,click:SA},RA.drawopenpath={name:"drawopenpath",title:function(t){return GA(t,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:CA.drawopenpath,click:SA},RA.drawline={name:"drawline",title:function(t){return GA(t,"Draw line")},attr:"dragmode",val:"drawline",icon:CA.drawline,click:SA},RA.drawrect={name:"drawrect",title:function(t){return GA(t,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:CA.drawrect,click:SA},RA.drawcircle={name:"drawcircle",title:function(t){return GA(t,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:CA.drawcircle,click:SA},RA.eraseshape={name:"eraseshape",title:function(t){return GA(t,"Erase active shape")},icon:CA.eraseshape,click:AA},RA.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(t){return GA(t,"Zoom in")},attr:"zoom",val:"in",icon:CA.zoom_plus,click:SA},RA.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(t){return GA(t,"Zoom out")},attr:"zoom",val:"out",icon:CA.zoom_minus,click:SA},RA.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(t){return GA(t,"Autoscale")},attr:"zoom",val:"auto",icon:CA.autoscale,click:SA},RA.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(t){return GA(t,"Reset axes")},attr:"zoom",val:"reset",icon:CA.home,click:SA},RA.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(t){return GA(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:CA.tooltip_basic,gravity:"ne",click:SA},RA.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(t){return GA(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:CA.tooltip_compare,gravity:"ne",click:SA},RA.zoom3d={name:"zoom3d",_cat:"zoom",title:function(t){return GA(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:CA.zoombox,click:wA},RA.pan3d={name:"pan3d",_cat:"pan",title:function(t){return GA(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:CA.pan,click:wA},RA.orbitRotation={name:"orbitRotation",title:function(t){return GA(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:CA["3d_rotate"],click:wA},RA.tableRotation={name:"tableRotation",title:function(t){return GA(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:CA["z-axis"],click:wA},RA.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(t){return GA(t,"Reset camera to default")},attr:"resetDefault",icon:CA.home,click:VA},RA.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(t){return GA(t,"Reset camera to last save")},attr:"resetLastSave",icon:CA.movie,click:VA},RA.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(t){return GA(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:CA.tooltip_basic,gravity:"ne",click:function(t,e){var i=EA(t,e);mA.call("_guiRelayout",t,i)}},RA.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(t){return GA(t,"Zoom in")},attr:"zoom",val:"in",icon:CA.zoom_plus,click:ZA},RA.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(t){return GA(t,"Zoom out")},attr:"zoom",val:"out",icon:CA.zoom_minus,click:ZA},RA.resetGeo={name:"resetGeo",_cat:"reset",title:function(t){return GA(t,"Reset")},attr:"reset",val:null,icon:CA.autoscale,click:ZA},RA.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(t){return GA(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:CA.tooltip_basic,gravity:"ne",click:DA},RA.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(t){return GA(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:CA.tooltip_basic,gravity:"ne",click:DA},RA.resetViewSankey={name:"resetSankeyGroup",title:function(t){return GA(t,"Reset view")},icon:CA.home,click:function(t){for(var e={"node.groups":[],"node.x":[],"node.y":[]},i=0;i<t._fullData.length;i++){var n=t._fullData[i]._viewInitial;e["node.groups"].push(n.node.groups.slice()),e["node.x"].push(n.node.x.slice()),e["node.y"].push(n.node.y.slice())}mA.call("restyle",t,e)}},RA.toggleHover={name:"toggleHover",title:function(t){return GA(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:CA.tooltip_basic,gravity:"ne",click:function(t,e){var i=EA(t,e);i.hovermode=NA(t),mA.call("_guiRelayout",t,i)}},RA.resetViews={name:"resetViews",title:function(t){return GA(t,"Reset views")},icon:CA.home,click:function(t,e){var i=e.currentTarget;i.setAttribute("data-attr","zoom"),i.setAttribute("data-val","reset"),SA(t,e),i.setAttribute("data-attr","resetLastSave"),VA(t,e),kA(t,"geo"),kA(t,"mapbox"),kA(t,"map")}},RA.toggleSpikelines={name:"toggleSpikelines",title:function(t){return GA(t,"Toggle Spike Lines")},icon:CA.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout,i=e._cartesianSpikesEnabled;e._cartesianSpikesEnabled="on"===i?"off":"on",mA.call("_guiRelayout",t,function(t){for(var e="on"===t._fullLayout._cartesianSpikesEnabled,i=vA.list(t,null,!0),n={},r=0;r<i.length;r++){var a=i[r];n[a._name+".showspikes"]=!!e||a._showSpikeInitial}return n}(t))}},RA.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(t){return GA(t,"Reset view")},attr:"reset",icon:CA.home,click:function(t){kA(t,"mapbox")}},RA.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(t){return GA(t,"Reset view")},attr:"reset",icon:CA.home,click:function(t){kA(t,"map")}},RA.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(t){return GA(t,"Zoom in")},attr:"zoom",val:"in",icon:CA.zoom_plus,click:XA},RA.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(t){return GA(t,"Zoom in")},attr:"zoom",val:"in",icon:CA.zoom_plus,click:HA},RA.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(t){return GA(t,"Zoom out")},attr:"zoom",val:"out",icon:CA.zoom_minus,click:XA},RA.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(t){return GA(t,"Zoom out")},attr:"zoom",val:"out",icon:CA.zoom_minus,click:HA};var MA=Yv.exports,TA=MA,YA=Object.keys(TA),JA=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],_A=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(JA),zA=[];YA.forEach((function(t){!function(t){if(-1===_A.indexOf(t._cat||t.name)){var e=t.name,i=(t._cat||t.name).toLowerCase();-1===zA.indexOf(e)&&zA.push(e),-1===zA.indexOf(i)&&zA.push(i)}}(TA[t])})),zA.sort();var OA={DRAW_MODES:JA,backButtons:_A,foreButtons:zA},KA=OA,PA={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+KA.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+KA.foreButtons.join("*, *")+"*."].join(" ")}},jA=_B,qA=Uu,$A=Ap,tL=PA,eL=Js,iL=$c,nL=_B,rL=Jv,aL=ks.version,sL=new DOMParser;function oL(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var lL=oL.prototype;lL.update=function(t,e){this.graphInfo=t;var i=this.graphInfo._context,n=this.graphInfo._fullLayout,r="modebar-"+n._uid;this.element.setAttribute("id",r),this._uid=r,this.element.className="modebar","hover"===i.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===n.modebar.orientation&&(this.element.className+=" vertical",e=e.reverse());var a=n.modebar,s="#"+r+" .modebar-group";document.querySelectorAll(s).forEach((function(t){t.style.backgroundColor=a.bgcolor}));var o=!this.hasButtons(e),l=this.hasLogo!==i.displaylogo,c=this.locale!==i.locale;if(this.locale=i.locale,(o||l||c)&&(this.removeAllButtons(),this.updateButtons(e),i.watermark||i.displaylogo)){var g=this.getLogo();i.watermark&&(g.className=g.className+" watermark"),"v"===n.modebar.orientation?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton(),nL.setStyleOnHover("#"+r+" .modebar-btn",".active",".icon path","fill: "+a.activecolor,"fill: "+a.color,this.element)},lL.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach((function(t){var i=e.createGroup();t.forEach((function(t){var n=t.name;if(!n)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(n))throw new Error("button name '"+n+"' is taken");e.buttonsNames.push(n);var r=e.createButton(t);e.buttonElements.push(r),i.appendChild(r)})),e.element.appendChild(i)}))},lL.createGroup=function(){var t=document.createElement("div");t.className="modebar-group";var e=this.graphInfo._fullLayout.modebar;return t.style.backgroundColor=e.bgcolor,t},lL.createButton=function(t){var e=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var n=t.title;void 0===n?n=t.name:"function"==typeof n&&(n=n(this.graphInfo)),(n||0===n)&&i.setAttribute("data-title",n),void 0!==t.attr&&i.setAttribute("data-attr",t.attr);var r=t.val;if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),i.setAttribute("data-val",r)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");i.addEventListener("click",(function(i){t.click(e.graphInfo,i),e.updateActiveButton(i.currentTarget)})),i.setAttribute("data-toggle",t.toggle||!1),t.toggle&&eL.select(i).classed("active",!0);var a=t.icon;return"function"==typeof a?i.appendChild(a()):i.appendChild(this.createIcon(a||rL.question)),i.setAttribute("data-gravity",t.gravity||"n"),i},lL.createIcon=function(t){var e,i=iL(t.height)?Number(t.height):t.ascent-t.descent,n="http://www.w3.org/2000/svg";if(t.path){(e=document.createElementNS(n,"svg")).setAttribute("viewBox",[0,0,t.width,i].join(" ")),e.setAttribute("class","icon");var r=document.createElementNS(n,"path");r.setAttribute("d",t.path),t.transform?r.setAttribute("transform",t.transform):void 0!==t.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),e.appendChild(r)}t.svg&&(e=sL.parseFromString(t.svg,"application/xml").childNodes[0]);return e.setAttribute("height","1em"),e.setAttribute("width","1em"),e},lL.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,i=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach((function(t){var n=t.getAttribute("data-val")||!0,r=t.getAttribute("data-attr"),a="true"===t.getAttribute("data-toggle"),s=eL.select(t),o=function(t,i){var n=e.modebar,r=t.querySelector(".icon path");r&&(i||t.matches(":hover")?r.style.fill=n.activecolor:r.style.fill=n.color)};if(a){if(r===i){var l=!s.classed("active");s.classed("active",l),o(t,l)}}else{var c=null===r?r:nL.nestedProperty(e,r).get();s.classed("active",c===n),o(t,c===n)}}))},lL.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i){if(t[i].length!==e[i].length)return!1;for(var n=0;n<t[i].length;n++)if(t[i][n].name!==e[i][n].name)return!1}return!0},lL.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plotly.com/",e.target="_blank",e.setAttribute("data-title",function(t){return t+" (v"+aL+")"}(nL._(this.graphInfo,"Produced with Plotly.js"))),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(rL.newplotlylogo)),t.appendChild(e),t},lL.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},lL.destroy=function(){nL.removeElement(this.container.querySelector(".modebar"))};var cL=function(t,e){var i=t._fullLayout,n=new oL({graphInfo:t,container:i._modebardiv.node(),buttons:e});return i._privateplot&&eL.select(n.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),n},gL=Ep,uL=WQ,dL=Nu,hL=TQ.isUnifiedHover,BL=cL,pL=MA,FL=OA.DRAW_MODES,fL=_B.extendDeep;var QL={moduleType:"component",name:"modebar",layoutAttributes:PA,supplyLayoutDefaults:function(t,e){var i=t.modebar||{},n=$A.newContainer(e,"modebar");function r(t,e){return jA.coerce(i,n,tL,t,e)}r("orientation"),r("bgcolor",qA.addOpacity(e.paper_bgcolor,.5));var a=qA.contrast(qA.rgb(e.modebar.bgcolor));r("color",qA.addOpacity(a,.3)),r("activecolor",qA.addOpacity(a,.7)),r("uirevision",e.uirevision),r("add"),r("remove")},manage:function(t){var e=t._fullLayout,i=t._context,n=e._modeBar;if(i.displayModeBar||i.watermark){if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var r,a=i.modeBarButtons;r=Array.isArray(a)&&a.length?function(t){for(var e=fL([],t),i=0;i<e.length;i++)for(var n=e[i],r=0;r<n.length;r++){var a=n[r];if("string"==typeof a){if(void 0===pL[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[i][r]=pL[a]}}return e}(a):!i.displayModeBar&&i.watermark?[]:function(t){var e=t._fullLayout,i=t._fullData,n=t._context;function r(t,e){if("string"==typeof e){if(e.toLowerCase()===t.toLowerCase())return!0}else{var i=e.name,n=e._cat||e.name;if(i===t||n===t.toLowerCase())return!0}return!1}var a=e.modebar.add;"string"==typeof a&&(a=[a]);var s=e.modebar.remove;"string"==typeof s&&(s=[s]);var o=n.modeBarButtonsToAdd.concat(a.filter((function(t){for(var e=0;e<n.modeBarButtonsToRemove.length;e++)if(r(t,n.modeBarButtonsToRemove[e]))return!1;return!0}))),l=n.modeBarButtonsToRemove.concat(s.filter((function(t){for(var e=0;e<n.modeBarButtonsToAdd.length;e++)if(r(t,n.modeBarButtonsToAdd[e]))return!1;return!0}))),c=e._has("cartesian"),g=e._has("gl3d"),u=e._has("geo"),d=e._has("pie"),h=e._has("funnelarea"),B=e._has("ternary"),p=e._has("mapbox"),F=e._has("map"),f=e._has("polar"),Q=e._has("smith"),I=e._has("sankey"),U=function(t){for(var e=gL.list({_fullLayout:t},null,!0),i=0;i<e.length;i++)if(!e[i].fixedrange)return!1;return!0}(e),b=hL(e.hovermode),y=[];function m(t){if(t.length){for(var e=[],i=0;i<t.length;i++){for(var n=t[i],r=pL[n],a=r.name.toLowerCase(),s=(r._cat||r.name).toLowerCase(),o=!1,c=0;c<l.length;c++){var g=l[c].toLowerCase();if(g===a||g===s){o=!0;break}}o||e.push(pL[n])}y.push(e)}}var x=["toImage"];n.showEditInChartStudio?x.push("editInChartStudio"):n.showSendToCloud&&x.push("sendDataToCloud");m(x);var v=[],C=[],A=[],L=[];(c||d||h||B)+u+g+p+F+f+Q>1?(C=["toggleHover"],A=["resetViews"]):u?(v=["zoomInGeo","zoomOutGeo"],C=["hoverClosestGeo"],A=["resetGeo"]):g?(C=["hoverClosest3d"],A=["resetCameraDefault3d","resetCameraLastSave3d"]):p?(v=["zoomInMapbox","zoomOutMapbox"],C=["toggleHover"],A=["resetViewMapbox"]):F?(v=["zoomInMap","zoomOutMap"],C=["toggleHover"],A=["resetViewMap"]):d?C=["hoverClosestPie"]:I?(C=["hoverClosestCartesian","hoverCompareCartesian"],A=["resetViewSankey"]):C=["toggleHover"];c&&C.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian");(function(t){for(var e=0;e<t.length;e++)if(!dL.traceIs(t[e],"noHover"))return!1;return!0}(i)||b)&&(C=[]);c&&!U&&(v=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==A[0]&&(A=["resetScale2d"]));g?L=["zoom3d","pan3d","orbitRotation","tableRotation"]:c&&!U||B?L=["zoom2d","pan2d"]:p||F||u?L=["pan2d"]:f&&(L=["zoom2d"]);(function(t){for(var e=!1,i=0;i<t.length&&!e;i++){var n=t[i];n._module&&n._module.selectPoints&&(dL.traceIs(n,"scatter-like")?(uL.hasMarkers(n)||uL.hasText(n))&&(e=!0):dL.traceIs(n,"box-violin")&&"all"!==n.boxpoints&&"all"!==n.points||(e=!0))}return e})(i)&&L.push("select2d","lasso2d");var G=[],R=function(t){-1===G.indexOf(t)&&-1!==C.indexOf(t)&&G.push(t)};if(Array.isArray(o)){for(var S=[],w=0;w<o.length;w++){var V=o[w];"string"==typeof V?(V=V.toLowerCase(),-1!==FL.indexOf(V)?(e._has("mapbox")||e._has("map")||e._has("cartesian"))&&L.push(V):"togglespikelines"===V?R("toggleSpikelines"):"togglehover"===V?R("toggleHover"):"hovercompare"===V?R("hoverCompareCartesian"):"hoverclosest"===V?(R("hoverClosestCartesian"),R("hoverClosestGeo"),R("hoverClosest3d"),R("hoverClosestPie")):"v1hovermode"===V&&(R("hoverClosestCartesian"),R("hoverCompareCartesian"),R("hoverClosestGeo"),R("hoverClosest3d"),R("hoverClosestPie"))):S.push(V)}o=S}return m(L),m(v.concat(A)),m(G),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t}(y,o)}(t),n?n.update(t,r):e._modeBar=BL(t,r)}else n&&(n.destroy(),delete e._modeBar)}},IL={},UL=CF.FROM_BL,bL=function(t,e,i){void 0===i&&(i=UL[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],r=n[0]+(n[1]-n[0])*i;t.range=t._input.range=[t.l2r(r+(n[0]-r)*e),t.l2r(r+(n[1]-r)*e)],t.setScale()},yL=_B,mL=KU(),xL=Ep.id2name,vL=If,CL=bL,AL=XU,LL=tg.ALMOST_EQUAL,GL=CF.FROM_BL;function RL(t,e,i){var n=i.axIds,r=i.layoutOut,a=i.hasImage,s=r._axisConstraintGroups,o=r._axisMatchGroups,l=e._id,c=l.charAt(0),g=((r._splomAxes||{})[c]||{})[l]||{},u=e._id,d="x"===u.charAt(0);function h(i,n){return yL.coerce(t,e,vL,i,n)}e._matchGroup=null,e._constraintGroup=null,h("constrain",a?"domain":"range"),yL.coerce(t,e,{constraintoward:{valType:"enumerated",values:d?["left","center","right"]:["bottom","middle","top"],dflt:d?"center":"middle"}},"constraintoward");var B,p,F=e.type,f=[];for(B=0;B<n.length;B++){if((p=n[B])!==u)r[xL(p)].type===F&&f.push(p)}var Q=wL(s,u);if(Q){var I=[];for(B=0;B<f.length;B++)Q[p=f[B]]||I.push(p);f=I}var U,b,y=f.length;y&&(t.matches||g.matches)&&(U=yL.coerce(t,e,{matches:{valType:"enumerated",values:f,dflt:-1!==f.indexOf(g.matches)?g.matches:void 0}},"matches"));var m=a&&!d?e.anchor:void 0;if(y&&!U&&(t.scaleanchor||m)&&(b=yL.coerce(t,e,{scaleanchor:{valType:"enumerated",values:f.concat([!1])}},"scaleanchor",m)),U){e._matchGroup=VL(o,u,U,1);var x=r[xL(U)],v=SL(r,e)/SL(r,x);d!==("x"===U.charAt(0))&&(v=(d?"x":"y")+v),VL(s,u,U,v)}else t.matches&&-1!==n.indexOf(t.matches)&&yL.warn("ignored "+e._name+'.matches: "'+t.matches+'" to avoid an infinite loop');if(b){var C=h("scaleratio");C||(C=e.scaleratio=1),VL(s,u,b,C)}else t.scaleanchor&&-1!==n.indexOf(t.scaleanchor)&&yL.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function SL(t,e){var i=e.domain;return i||(i=t[xL(e.overlaying)].domain),i[1]-i[0]}function wL(t,e){for(var i=0;i<t.length;i++)if(t[i][e])return t[i];return null}function VL(t,e,i,n){var r,a,s,o,l,c=wL(t,e);null===c?((c={})[e]=1,l=t.length,t.push(c)):l=t.indexOf(c);var g=Object.keys(c);for(r=0;r<t.length;r++)if(s=t[r],r!==l&&s[i]){var u=s[i];for(a=0;a<g.length;a++)s[o=g[a]]=EL(u,EL(n,c[o]));return void t.splice(l,1)}if(1!==n)for(a=0;a<g.length;a++){var d=g[a];c[d]=EL(n,c[d])}c[i]=1}function EL(t,e){var i,n,r="",a="";"string"==typeof t&&(i=(r=t.match(/^[xy]*/)[0]).length,t=+t.substr(i)),"string"==typeof e&&(n=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(n));var s=t*e;return i||n?i&&n&&r.charAt(0)!==a.charAt(0)?i===n?s:(i>n?r.substr(n):a.substr(i))+s:r+a+t*e:s}function ZL(t,e){for(var i=e._size,n=i.h/i.w,r={},a=Object.keys(t),s=0;s<a.length;s++){var o=a[s],l=t[o];if("string"==typeof l){var c=l.match(/^[xy]*/)[0],g=c.length;l=+l.substr(g);for(var u="y"===c.charAt(0)?n:1/n,d=0;d<g;d++)l*=u}r[o]=l}return r}function NL(t,e){var i=t._inputDomain,n=GL[t.constraintoward],r=i[0]+(i[1]-i[0])*n;t.domain=t._input.domain=[r+(i[0]-r)/e,r+(i[1]-r)/e],t.setScale()}IL.handleDefaults=function(t,e,i){var n,r,a,s,o,l,c,g,u=i.axIds,d=i.axHasImage,h=e._axisConstraintGroups=[],B=e._axisMatchGroups=[];for(n=0;n<u.length;n++)RL(o=t[s=xL(u[n])],l=e[s],{axIds:u,layoutOut:e,hasImage:d[s]});function p(t,i){for(n=0;n<t.length;n++)for(a in r=t[n])e[xL(a)][i]=r}for(p(B,"_matchGroup"),n=0;n<h.length;n++)for(a in r=h[n])if((l=e[xL(a)]).fixedrange){for(var F in r){var f=xL(F);!1===(t[f]||{}).fixedrange&&yL.warn("fixedrange was specified as false for axis "+f+" but was overridden because another axis in its constraint group has fixedrange true"),e[f].fixedrange=!0}break}for(n=0;n<h.length;){for(a in r=h[n]){(l=e[xL(a)])._matchGroup&&Object.keys(l._matchGroup).length===Object.keys(r).length&&(h.splice(n,1),n--);break}n++}p(h,"_constraintGroup");var Q=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],I=!1,U=!1;function b(){g=l[c],"rangebreaks"===c&&(U=l._hasDayOfWeekBreaks)}for(n=0;n<B.length;n++){r=B[n];for(var y=0;y<Q.length;y++){var m;for(a in c=Q[y],g=null,r)if(o=t[s=xL(a)],l=e[s],c in l){if(!l.matches&&(m=l,c in o)){b();break}null===g&&c in o&&b()}if("range"===c&&g&&o.range&&2===o.range.length&&null!==o.range[0]&&null!==o.range[1]&&(I=!0),"autorange"===c&&null===g&&I&&(g=!1),null===g&&c in m&&(g=m[c]),null!==g)for(a in r)(l=e[xL(a)])[c]="range"===c?g.slice():g,"rangebreaks"===c&&(l._hasDayOfWeekBreaks=U,AL(l,e))}}},IL.enforce=function(t){var e,i,n,r,a,s,o,l,c=t._fullLayout,g=c._axisConstraintGroups||[];for(e=0;e<g.length;e++){n=ZL(g[e],c);var u=Object.keys(n),d=1/0,h=0,B=1/0,p={},F={},f=!1;for(i=0;i<u.length;i++)F[r=u[i]]=a=c[xL(r)],a._inputDomain?a.domain=a._inputDomain.slice():a._inputDomain=a.domain.slice(),a._inputRange||(a._inputRange=a.range.slice()),a.setScale(),p[r]=s=Math.abs(a._m)/n[r],d=Math.min(d,s),"domain"!==a.constrain&&a._constraintShrinkable||(B=Math.min(B,s)),delete a._constraintShrinkable,h=Math.max(h,s),"domain"===a.constrain&&(f=!0);if(!(d>LL*h)||f)for(i=0;i<u.length;i++)if(s=p[r=u[i]],o=(a=F[r]).constrain,s!==B||"domain"===o)if(l=s/B,"range"===o)CL(a,l);else{var Q=a._inputDomain,I=(a.domain[1]-a.domain[0])/(Q[1]-Q[0]),U=(a.r2l(a.range[1])-a.r2l(a.range[0]))/(a.r2l(a._inputRange[1])-a.r2l(a._inputRange[0]));if((l/=I)*U<1){a.domain=a._input.domain=Q.slice(),CL(a,l);continue}if(U<1&&(a.range=a._input.range=a._inputRange.slice(),l*=U),a.autorange){var b=a.r2l(a.range[0]),y=a.r2l(a.range[1]),m=(b+y)/2,x=m,v=m,C=Math.abs(y-m),A=m-C*l*1.0001,L=m+C*l*1.0001,G=mL.makePadFn(c,a,0),R=mL.makePadFn(c,a,1);NL(a,l);var S,w,V=Math.abs(a._m),E=mL.concatExtremes(t,a),Z=E.min,N=E.max;for(w=0;w<Z.length;w++)(S=Z[w].val-G(Z[w])/V)>A&&S<x&&(x=S);for(w=0;w<N.length;w++)(S=N[w].val+R(N[w])/V)<L&&S>v&&(v=S);l/=(v-x)/(2*C),x=a.l2r(x),v=a.l2r(v),a.range=a._input.range=b<y?[x,v]:[v,x]}NL(a,l)}}},IL.getAxisGroup=function(t,e){for(var i=t._axisMatchGroups,n=0;n<i.length;n++){if(i[n][e])return"g"+n}return e},IL.clean=function(t,e){if(e._inputDomain){for(var i=!1,n=e._id,r=t._fullLayout._axisConstraintGroups,a=0;a<r.length;a++)if(r[a][n]){i=!0;break}i&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}},function(t){var e=Js,i=Nu,n=yF,r=_B,a=xF,s=Mv,o=Uu,l=jI,c=gU,g=QL,u=Vy,d=CF,h=IL,B=h.enforce,p=h.clean,F=KU().doAutoRange,f="start",Q="middle",I="end",U=Np.zindexSeparator;function b(t,e,i){for(var n=0;n<i.length;n++){var r=i[n][0],a=i[n][1];if(!(r[0]>=t[1]||r[1]<=t[0])&&(a[0]<e[1]&&a[1]>e[0]))return!0}return!1}function y(i){var a,s,c,h,B,p,F=i._fullLayout,f=F._size,Q=f.p,I=u.list(i,"",!0);if(F._paperdiv.style({width:i._context.responsive&&F.autosize&&!i._context._hasZeroWidth&&!i.layout.width?"100%":F.width+"px",height:i._context.responsive&&F.autosize&&!i._context._hasZeroHeight&&!i.layout.height?"100%":F.height+"px"}).selectAll(".main-svg").call(l.setSize,F.width,F.height),i._context.setBackground(i,F.paper_bgcolor),t.drawMainTitle(i),g.manage(i),!F._has("cartesian"))return n.previousPromises(i);function y(t,e,i){var n=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===i?e._offset-Q-n:e._offset+e._length+Q+n:f.t+f.h*(1-(t.position||0))+n%1:e?"right"===i?e._offset+e._length+Q+n:e._offset-Q-n:f.l+f.w*(t.position||0)+n%1}for(a=0;a<I.length;a++){var x=(h=I[a])._anchorAxis;h._linepositions={},h._lw=l.crispRound(i,h.linewidth,1),h._mainLinePosition=y(h,x,h.side),h._mainMirrorPosition=h.mirror&&x?y(h,x,d.OPPOSITE_SIDE[h.side]):null}var C=[],A=[],L=[],G=1===o.opacity(F.paper_bgcolor)&&1===o.opacity(F.plot_bgcolor)&&F.paper_bgcolor===F.plot_bgcolor;for(s in F._plots)if((c=F._plots[s]).mainplot)c.bg&&c.bg.remove(),c.bg=void 0;else{var R=c.xaxis.domain,S=c.yaxis.domain,w=c.plotgroup;if(b(R,S,L)&&-1===s.indexOf(U)){var V=w.node(),E=c.bg=r.ensureSingle(w,"rect","bg");V.insertBefore(E.node(),V.childNodes[0]),A.push(s)}else w.select("rect.bg").remove(),L.push([R,S]),G||(C.push(s),A.push(s))}var Z,N,D,X,H,W,k,M,T,Y,J,_,z,O=F._bgLayer.selectAll(".bg").data(C);for(O.enter().append("rect").classed("bg",!0),O.exit().remove(),O.each((function(t){F._plots[t].bg=e.select(this)})),a=0;a<A.length;a++)c=F._plots[A[a]],B=c.xaxis,p=c.yaxis,c.bg&&void 0!==B._offset&&void 0!==p._offset&&c.bg.call(l.setRect,B._offset-Q,p._offset-Q,B._length+2*Q,p._length+2*Q).call(o.fill,F.plot_bgcolor).style("stroke-width",0);if(!F._hasOnlyLargeSploms)for(s in F._plots){c=F._plots[s],B=c.xaxis,p=c.yaxis;var K,P,j=c.clipId="clip"+F._uid+s+"plot",q=r.ensureSingleById(F._clips,"clipPath",j,(function(t){t.classed("plotclip",!0).append("rect")}));c.clipRect=q.select("rect").attr({width:B._length,height:p._length}),l.setTranslate(c.plot,B._offset,p._offset),c._hasClipOnAxisFalse?(K=null,P=j):(K=j,P=null),l.setClipUrl(c.plot,K,i),c.layerClipId=P}function $(t){return"M"+Z+","+t+"H"+N}function tt(t){return"M"+B._offset+","+t+"h"+B._length}function et(t){return"M"+t+","+M+"V"+k}function it(t){return void 0!==p._shift&&(t+=p._shift),"M"+t+","+p._offset+"v"+p._length}function nt(t,e,i){if(!t.showline||s!==t._mainSubplot)return"";if(!t._anchorAxis)return i(t._mainLinePosition);var n=e(t._mainLinePosition);return t.mirror&&(n+=e(t._mainMirrorPosition)),n}for(s in F._plots){c=F._plots[s],B=c.xaxis,p=c.yaxis;var rt="M0,0";m(B,s)&&(H=v(B,"left",p,I),Z=B._offset-(H?Q+H:0),W=v(B,"right",p,I),N=B._offset+B._length+(W?Q+W:0),D=y(B,p,"bottom"),X=y(B,p,"top"),!(z=!B._anchorAxis||s!==B._mainSubplot)||"allticks"!==B.mirror&&"all"!==B.mirror||(B._linepositions[s]=[D,X]),rt=nt(B,$,tt),z&&B.showline&&("all"===B.mirror||"allticks"===B.mirror)&&(rt+=$(D)+$(X)),c.xlines.style("stroke-width",B._lw+"px").call(o.stroke,B.showline?B.linecolor:"rgba(0,0,0,0)")),c.xlines.attr("d",rt);var at="M0,0";m(p,s)&&(J=v(p,"bottom",B,I),k=p._offset+p._length+(J?Q:0),_=v(p,"top",B,I),M=p._offset-(_?Q:0),T=y(p,B,"left"),Y=y(p,B,"right"),!(z=!p._anchorAxis||s!==p._mainSubplot)||"allticks"!==p.mirror&&"all"!==p.mirror||(p._linepositions[s]=[T,Y]),at=nt(p,et,it),z&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(at+=et(T)+et(Y)),c.ylines.style("stroke-width",p._lw+"px").call(o.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),c.ylines.attr("d",at)}return u.makeClipPaths(i),n.previousPromises(i)}function m(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function x(t,e,i){if(!i.showline||!i._lw)return!1;if("all"===i.mirror||"allticks"===i.mirror)return!0;var n=i._anchorAxis;if(!n)return!1;var r=d.FROM_BL[e];return i.side===e?n.domain[r]===t.domain[r]:i.mirror&&n.domain[1-r]===t.domain[1-r]}function v(t,e,i,n){if(x(t,e,i))return i._lw;for(var r=0;r<n.length;r++){var a=n[r];if(a._mainAxis===i._mainAxis&&x(t,e,a))return a._lw}return 0}function C(t){return"top"===t?d.CAP_SHIFT+.3+"em":"bottom"===t?"-0.3em":d.MID_SHIFT+"em"}t.layoutStyles=function(t){return r.syncOrAsync([n.doAutoMargin,y],t)},t.drawMainTitle=function(t){var i=t._fullLayout.title,s=t._fullLayout,o=function(t){var e=t.title,i=Q;r.isRightAnchor(e)?i=I:r.isLeftAnchor(e)&&(i=f);return i}(s),g=function(t){var e=t.title,i="0em";r.isTopAnchor(e)?i=d.CAP_SHIFT+"em":r.isMiddleAnchor(e)&&(i=d.MID_SHIFT+"em");return i}(s),u=function(t,e){var i=t.title,n=t._size,r=0;"0em"!==e&&e?e===d.CAP_SHIFT+"em"&&(r=i.pad.t):r=-i.pad.b;return"auto"===i.y?n.t/2:"paper"===i.yref?n.t+n.h-n.h*i.y+r:t.height-t.height*i.y+r}(s,g),h=function(t,e){var i=t.title,n=t._size,r=0;e===f?r=i.pad.l:e===I&&(r=-i.pad.r);if("paper"===i.xref)return n.l+n.w*i.x+r;return t.width*i.x+r}(s,o);if(c.draw(t,"gtitle",{propContainer:s,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:s._dfltTitle.plot,subtitlePlaceholder:s._dfltTitle.subtitle,attributes:{x:h,y:u,"text-anchor":o,dy:g}}),i.text&&i.automargin){var B=e.selectAll(".gtitle"),p=l.bBox(e.selectAll(".g-gtitle").node()).height,F=function(t,e,i){var n=e.y,r=e.yanchor,a=n>.5?"t":"b",s=t._fullLayout.margin[a],o=0;"paper"===e.yref?o=i+e.pad.t+e.pad.b:"container"===e.yref&&(o=function(t,e,i,n,r){var a=0;"middle"===i&&(a+=r/2);"t"===t?("top"===i&&(a+=r),a+=n-e*n):("bottom"===i&&(a+=r),a+=e*n);return a}(a,n,r,t._fullLayout.height,i)+e.pad.t+e.pad.b);if(o>s)return o;return 0}(t,i,p);if(F>0){!function(t,e,i,a){var s="title.automargin",o=t._fullLayout.title,l=o.y>.5?"t":"b",c={x:o.x,y:o.y,t:0,b:0},g={};"paper"===o.yref&&function(t,e,i,n,a){var s="paper"===e.yref?t._fullLayout._size.h:t._fullLayout.height,o=r.isTopAnchor(e)?n:n-a,l="b"===i?s-o:o;return!(r.isTopAnchor(e)&&"t"===i||r.isBottomAnchor(e)&&"b"===i)&&l<a}(t,o,l,e,a)?c[l]=i:"container"===o.yref&&(g[l]=i,t._fullLayout._reservedMargin[s]=g);n.allowAutoMargin(t,s),n.autoMargin(t,s,c)}(t,u,F,p),B.attr({x:h,y:u,"text-anchor":o,dy:C(i.yanchor)}).call(a.positionText,h,u);var U=(i.text.match(a.BR_TAG_ALL)||[]).length;if(U){var b=d.LINE_SPACING*U+d.MID_SHIFT;0===i.y&&(b=-b),B.selectAll(".line").each((function(){var t=+this.getAttribute("dy").slice(0,-2)-b+"em";this.setAttribute("dy",t)}))}var y=e.selectAll(".gtitle-subtitle");if(y.node()){var m=B.node().getBBox(),x=m.y+m.height+c.SUBTITLE_PADDING_EM*i.subtitle.font.size;y.attr({x:h,y:x,"text-anchor":o,dy:C(i.yanchor)}).call(a.positionText,h,x)}}}},t.doTraceStyle=function(e){var r,a=e.calcdata,o=[];for(r=0;r<a.length;r++){var l=a[r],c=l[0]||{},g=c.trace||{},u=g._module||{},d=u.arraysToCalcdata;d&&d(l,g);var h=u.editStyle;h&&o.push({fn:h,cd0:c})}if(o.length){for(r=0;r<o.length;r++){var B=o[r];B.fn(e,B.cd0)}s(e),t.redrawReglTraces(e)}return n.style(e),i.getComponentMethod("legend","draw")(e),n.previousPromises(e)},t.doColorBars=function(t){return i.getComponentMethod("colorbar","draw")(t),n.previousPromises(t)},t.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,i.call("_doPlot",t,"",e)},t.doLegend=function(t){return i.getComponentMethod("legend","draw")(t),n.previousPromises(t)},t.doTicksRelayout=function(e){return u.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(i.subplotsRegistry.splom.updateGrid(e),s(e),t.redrawReglTraces(e)),t.drawMainTitle(e),n.previousPromises(e)},t.doModeBar=function(t){var e=t._fullLayout;g.manage(t);for(var i=0;i<e._basePlotModules.length;i++){var r=e._basePlotModules[i].updateFx;r&&r(t)}return n.previousPromises(t)},t.doCamera=function(t){for(var e=t._fullLayout,i=e._subplots.gl3d,n=0;n<i.length;n++){var r=e[i[n]];r._scene.setViewport(r)}},t.drawData=function(e){var r=e._fullLayout;s(e);for(var a=r._basePlotModules,o=0;o<a.length;o++)a[o].plot(e);return t.redrawReglTraces(e),n.style(e),i.getComponentMethod("selections","draw")(e),i.getComponentMethod("shapes","draw")(e),i.getComponentMethod("annotations","draw")(e),i.getComponentMethod("images","draw")(e),r._replotting=!1,n.previousPromises(e)},t.redrawReglTraces=function(t){var e=t._fullLayout;if(e._has("regl")){var i,n,a=t._fullData,s=[],o=[];for(e._hasOnlyLargeSploms&&e._splomGrid.draw(),i=0;i<a.length;i++){var l=a[i];!0===l.visible&&0!==l._length&&("splom"===l.type?e._splomScenes[l.uid].draw():"scattergl"===l.type?r.pushUnique(s,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&r.pushUnique(o,l.subplot))}for(i=0;i<s.length;i++)(n=e._plots[s[i]])._scene&&n._scene.draw();for(i=0;i<o.length;i++)(n=e[o[i]]._subplot)._scene&&n._scene.draw()}},t.doAutoRangeAndConstraints=function(t){for(var e,i=u.list(t,"",!0),n={},r=0;r<i.length;r++)if(!n[(e=i[r])._id]){n[e._id]=1,p(t,e),F(t,e);var a=e._matchGroup;if(a)for(var s in a){var o=u.getFromId(t,s);F(t,o,e.range),n[s]=1}}B(t)},t.finalDraw=function(t){i.getComponentMethod("rangeslider","draw")(t),i.getComponentMethod("rangeselector","draw")(t)},t.drawMarginPushers=function(t){i.getComponentMethod("legend","draw")(t),i.getComponentMethod("rangeselector","draw")(t),i.getComponentMethod("sliders","draw")(t),i.getComponentMethod("updatemenus","draw")(t),i.getComponentMethod("colorbar","draw")(t)}}(Tv);var DL=_v.readPaths,XL=jC,HL=Dp.clearOutlineControllers,WL=Uu,kL=jI,ML=Ap.arrayEditor,TL=bC,YL=TL.getPathString,JL={draw:_L,drawOne:OL,activateLastSelection:function(t){if(!zL(t))return;var e=t._fullLayout.selections.length-1;t._fullLayout._activeSelectionIndex=e,t._fullLayout._deactivateSelection=PL,_L(t)}};function _L(t){var e=t._fullLayout;for(var i in HL(t),e._selectionLayer.selectAll("path").remove(),e._plots){var n=e._plots[i].selectionLayer;n&&n.selectAll("path").remove()}for(var r=0;r<e.selections.length;r++)OL(t,r)}function zL(t){return t._context.editSelection}function OL(t,e){t._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+e+'"]').remove();var i=TL.makeSelectionsOptionsAndPlotinfo(t,e),n=i.options,r=i.plotinfo;n._input&&function(i){var a=YL(t,n),s={"data-index":e,"fill-rule":"evenodd",d:a},o=n.opacity,l="rgba(0,0,0,0)",c=n.line.color||WL.contrast(t._fullLayout.plot_bgcolor),g=n.line.width,u=n.line.dash;g||(g=5,u="solid");var d=zL(t)&&t._fullLayout._activeSelectionIndex===e;d&&(l=t._fullLayout.activeselection.fillcolor,o=t._fullLayout.activeselection.opacity);for(var h=[],B=1;B>=0;B--){var p=i.append("path").attr(s).style("opacity",B?.1:o).call(WL.stroke,c).call(WL.fill,l).call(kL.dashLine,B?"solid":u,B?4+g:g);if(KL(p,t,n),d){var F=ML(t.layout,"selections",n);p.style({cursor:"move"});var f={element:p.node(),plotinfo:r,gd:t,editHelpers:F,isActiveSelection:!0},Q=DL(a,t);XL(Q,p,f)}else p.style("pointer-events",B?"all":"none");h[B]=p}var I=h[0];h[1].node().addEventListener("click",(function(){return function(t,e){if(!zL(t))return;var i=e.node(),n=+i.getAttribute("data-index");if(n>=0){if(n===t._fullLayout._activeSelectionIndex)return void PL(t);t._fullLayout._activeSelectionIndex=n,t._fullLayout._deactivateSelection=PL,_L(t)}}(t,I)}))}(t._fullLayout._selectionLayer)}function KL(t,e,i){var n=i.xref+i.yref;kL.setClipUrl(t,"clip"+e._fullLayout._uid+n,e)}function PL(t){zL(t)&&(t._fullLayout._activeSelectionIndex>=0&&(HL(t),delete t._fullLayout._activeSelectionIndex,_L(t)))}var jL=function(){var t,e=0,i=!1;function n(e,i){return t.list.push({type:e,data:i?JSON.parse(JSON.stringify(i)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return n("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return n("div_seg",{seg:t,pt:e}),n("chop",{seg:t,pt:e})},statusRemove:function(t){return n("pop_seg",{seg:t})},segmentUpdate:function(t){return n("seg_update",{seg:t})},segmentNew:function(t,e){return n("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return n("rem_seg",{seg:t})},tempStatus:function(t,e,i){return n("temp_status",{seg:t,above:e,below:i})},rewind:function(t){return n("rewind",{seg:t})},status:function(t,e,i){return n("status",{seg:t,above:e,below:i})},vert:function(e){return e===i?t:(i=e,n("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),n("log",{txt:t})},reset:function(){return n("reset")},selected:function(t){return n("selected",{segs:t})},chainStart:function(t){return n("chain_start",{seg:t})},chainRemoveHead:function(t,e){return n("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return n("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return n("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return n("chain_match",{index:t})},chainClose:function(t){return n("chain_close",{index:t})},chainAddHead:function(t,e){return n("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return n("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return n("chain_con",{index1:t,index2:e})},chainReverse:function(t){return n("chain_rev",{index:t})},chainJoin:function(t,e){return n("chain_join",{index1:t,index2:e})},done:function(){return n("done")}},t};var qL=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,i,n){var r=i[0],a=i[1],s=n[0],o=n[1],l=e[0];return(s-r)*(e[1]-a)-(o-a)*(l-r)>=-t},pointBetween:function(e,i,n){var r=e[1]-i[1],a=n[0]-i[0],s=e[0]-i[0],o=n[1]-i[1],l=s*a+r*o;return!(l<t)&&!(l-(a*a+o*o)>-t)},pointsSameX:function(e,i){return Math.abs(e[0]-i[0])<t},pointsSameY:function(e,i){return Math.abs(e[1]-i[1])<t},pointsSame:function(t,i){return e.pointsSameX(t,i)&&e.pointsSameY(t,i)},pointsCompare:function(t,i){return e.pointsSameX(t,i)?e.pointsSameY(t,i)?0:t[1]<i[1]?-1:1:t[0]<i[0]?-1:1},pointsCollinear:function(e,i,n){var r=e[0]-i[0],a=e[1]-i[1],s=i[0]-n[0],o=i[1]-n[1];return Math.abs(r*o-s*a)<t},linesIntersect:function(e,i,n,r){var a=i[0]-e[0],s=i[1]-e[1],o=r[0]-n[0],l=r[1]-n[1],c=a*l-s*o;if(Math.abs(c)<t)return!1;var g=e[0]-n[0],u=e[1]-n[1],d=(o*u-l*g)/c,h=(a*u-s*g)/c,B={alongA:0,alongB:0,pt:[e[0]+d*a,e[1]+d*s]};return B.alongA=d<=-t?-2:d<t?-1:d-1<=-t?0:d-1<t?1:2,B.alongB=h<=-t?-2:h<t?-1:h-1<=-t?0:h-1<t?1:2,B},pointInsideRegion:function(e,i){for(var n=e[0],r=e[1],a=i[i.length-1][0],s=i[i.length-1][1],o=!1,l=0;l<i.length;l++){var c=i[l][0],g=i[l][1];g-r>t!=s-r>t&&(a-c)*(r-g)/(s-g)+c-n>t&&(o=!o),a=c,s=g}return o}};return e},$L={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,i){for(var n=t.root,r=t.root.next;null!==r;){if(i(r))return e.prev=r.prev,e.next=r,r.prev.next=e,void(r.prev=e);n=r,r=r.next}n.next=e,e.prev=n,e.next=null},findTransition:function(e){for(var i=t.root,n=t.root.next;null!==n&&!e(n);)i=n,n=n.next;return{before:i===t.root?null:i,after:n,insert:function(t){return t.prev=i,t.next=n,i.next=t,null!==n&&(n.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}};var tG=function(t,e,i){function n(t,e){return{id:i?i.segmentId():-1,start:t,end:e,myFill:{above:null,below:null},otherFill:null}}function r(t,e,n){return{id:i?i.segmentId():-1,start:t,end:e,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var a=$L.create();function s(t,i){a.insertBefore(t,(function(n){return function(t,i,n,r,a,s){var o=e.pointsCompare(i,a);return 0!==o?o:e.pointsSame(n,s)?0:t!==r?t?1:-1:e.pointAboveOrOnLine(n,r?a:s,r?s:a)?1:-1}(t.isStart,t.pt,i,n.isStart,n.pt,n.other.pt)<0}))}function o(t,e){var i=function(t,e){var i=$L.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return s(i,t.end),i}(t,e);return function(t,e,i){var n=$L.node({isStart:!1,pt:e.end,seg:e,primary:i,other:t,status:null});t.other=n,s(n,t.pt)}(i,t,e),i}function l(t,e){var n=r(e,t.seg.end,t.seg);return function(t,e){i&&i.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,s(t.other,t.pt)}(t,e),o(n,t.primary)}function c(n,r){var s=$L.create();function o(t){return s.findTransition((function(i){var n,r,a,s,o,l;return(n=t,r=i.ev,a=n.seg.start,s=n.seg.end,o=r.seg.start,l=r.seg.end,e.pointsCollinear(a,o,l)?e.pointsCollinear(s,o,l)||e.pointAboveOrOnLine(s,o,l)?1:-1:e.pointAboveOrOnLine(a,o,l)?1:-1)>0}))}function c(t,n){var r=t.seg,a=n.seg,s=r.start,o=r.end,c=a.start,g=a.end;i&&i.checkIntersection(r,a);var u=e.linesIntersect(s,o,c,g);if(!1===u){if(!e.pointsCollinear(s,o,c))return!1;if(e.pointsSame(s,g)||e.pointsSame(o,c))return!1;var d=e.pointsSame(s,c),h=e.pointsSame(o,g);if(d&&h)return n;var B=!d&&e.pointBetween(s,c,g),p=!h&&e.pointBetween(o,c,g);if(d)return p?l(n,o):l(t,g),n;B&&(h||(p?l(n,o):l(t,g)),l(n,s))}else 0===u.alongA&&(-1===u.alongB?l(t,c):0===u.alongB?l(t,u.pt):1===u.alongB&&l(t,g)),0===u.alongB&&(-1===u.alongA?l(n,s):0===u.alongA?l(n,u.pt):1===u.alongA&&l(n,o));return!1}for(var g=[];!a.isEmpty();){var u=a.getHead();if(i&&i.vert(u.pt[0]),u.isStart){i&&i.segmentNew(u.seg,u.primary);var d=o(u),h=d.before?d.before.ev:null,B=d.after?d.after.ev:null;function U(){if(h){var t=c(u,h);if(t)return t}return!!B&&c(u,B)}i&&i.tempStatus(u.seg,!!h&&h.seg,!!B&&B.seg);var p,F=U();if(F){var f;if(t)(f=null===u.seg.myFill.below||u.seg.myFill.above!==u.seg.myFill.below)&&(F.seg.myFill.above=!F.seg.myFill.above);else F.seg.otherFill=u.seg.myFill;i&&i.segmentUpdate(F.seg),u.other.remove(),u.remove()}if(a.getHead()!==u){i&&i.rewind(u.seg);continue}if(t)f=null===u.seg.myFill.below||u.seg.myFill.above!==u.seg.myFill.below,u.seg.myFill.below=B?B.seg.myFill.above:n,u.seg.myFill.above=f?!u.seg.myFill.below:u.seg.myFill.below;else if(null===u.seg.otherFill)p=B?u.primary===B.primary?B.seg.otherFill.above:B.seg.myFill.above:u.primary?r:n,u.seg.otherFill={above:p,below:p};i&&i.status(u.seg,!!h&&h.seg,!!B&&B.seg),u.other.status=d.insert($L.node({ev:u}))}else{var Q=u.status;if(null===Q)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(Q.prev)&&s.exists(Q.next)&&c(Q.prev.ev,Q.next.ev),i&&i.statusRemove(Q.ev.seg),Q.remove(),!u.primary){var I=u.seg.myFill;u.seg.myFill=u.seg.otherFill,u.seg.otherFill=I}g.push(u.seg)}a.getHead().remove()}return i&&i.done(),g}return t?{addRegion:function(t){for(var i,r=t[t.length-1],a=0;a<t.length;a++){i=r,r=t[a];var s=e.pointsCompare(i,r);0!==s&&o(n(s<0?i:r,s<0?r:i),!0)}},calculate:function(t){return c(t,!1)}}:{calculate:function(t,e,i,n){return t.forEach((function(t){o(r(t.start,t.end,t),!0)})),i.forEach((function(t){o(r(t.start,t.end,t),!1)})),c(e,n)}}};var eG=function(t,e,i){var n=[],r=[];return t.forEach((function(t){var a=t.start,s=t.end;if(e.pointsSame(a,s))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{i&&i.chainStart(t);for(var o={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=o,g=0;g<n.length;g++){var u=(F=n[g])[0];F[1];var d=F[F.length-1];if(F[F.length-2],e.pointsSame(u,a)){if(x(g,!0,!0))break}else if(e.pointsSame(u,s)){if(x(g,!0,!1))break}else if(e.pointsSame(d,a)){if(x(g,!1,!0))break}else if(e.pointsSame(d,s)&&x(g,!1,!1))break}if(c===o)return n.push([a,s]),void(i&&i.chainNew(a,s));if(c===l){i&&i.chainMatch(o.index);var h=o.index,B=o.matches_pt1?s:a,p=o.matches_head,F=n[h],f=p?F[0]:F[F.length-1],Q=p?F[1]:F[F.length-2],I=p?F[F.length-1]:F[0],U=p?F[F.length-2]:F[1];return e.pointsCollinear(Q,f,B)&&(p?(i&&i.chainRemoveHead(o.index,B),F.shift()):(i&&i.chainRemoveTail(o.index,B),F.pop()),f=Q),e.pointsSame(I,B)?(n.splice(h,1),e.pointsCollinear(U,I,f)&&(p?(i&&i.chainRemoveTail(o.index,f),F.pop()):(i&&i.chainRemoveHead(o.index,f),F.shift())),i&&i.chainClose(o.index),void r.push(F)):void(p?(i&&i.chainAddHead(o.index,B),F.unshift(B)):(i&&i.chainAddTail(o.index,B),F.push(B)))}var b=o.index,y=l.index;i&&i.chainConnect(b,y);var m=n[b].length<n[y].length;o.matches_head?l.matches_head?m?(v(b),C(b,y)):(v(y),C(y,b)):C(y,b):l.matches_head?C(b,y):m?(v(b),C(y,b)):(v(y),C(b,y))}function x(t,e,i){return c.index=t,c.matches_head=e,c.matches_pt1=i,c===o?(c=l,!1):(c=null,!0)}function v(t){i&&i.chainReverse(t),n[t].reverse()}function C(t,r){var a=n[t],s=n[r],o=a[a.length-1],l=a[a.length-2],c=s[0],g=s[1];e.pointsCollinear(l,o,c)&&(i&&i.chainRemoveTail(t,o),a.pop(),o=l),e.pointsCollinear(o,c,g)&&(i&&i.chainRemoveHead(r,c),s.shift()),i&&i.chainJoin(t,r),n[t]=a.concat(s),n.splice(r,1)}})),r};function iG(t,e,i){var n=[];return t.forEach((function(t){var r=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[r]&&n.push({id:i?i.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[r],below:2===e[r]},otherFill:null})})),i&&i.selected(n),n}var nG,rG={union:function(t,e){return iG(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return iG(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return iG(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return iG(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return iG(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}},aG={toPolygon:function(t,e){function i(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function i(e){var i=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[i]})}for(var n=i(e[0]),r=1;r<e.length;r++)n=t.selectDifference(t.combine(n,i(e[r])));return n}if("Polygon"===e.type)return t.polygon(i(e.coordinates));if("MultiPolygon"===e.type){for(var n=t.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)n=t.selectUnion(t.combine(n,i(e.coordinates[r])));return t.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,i){function n(t,i){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],i)}function r(t){return{region:t,children:[]}}i=t.polygon(t.segments(i));var a=r(null);function s(t,e){for(var i=0;i<t.children.length;i++){if(n(e,(o=t.children[i]).region))return void s(o,e)}var a=r(e);for(i=0;i<t.children.length;i++){var o;n((o=t.children[i]).region,e)&&(a.children.push(o),t.children.splice(i,1),i--)}t.children.push(a)}for(var o=0;o<i.regions.length;o++){var l=i.regions[o];l.length<3||s(a,l)}function c(t,e){for(var i=0,n=t[t.length-1][0],r=t[t.length-1][1],a=[],s=0;s<t.length;s++){var o=t[s][0],l=t[s][1];a.push([o,l]),i+=l*n-o*r,n=o,r=l}return i<0!==e&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var g=[];function u(t){var e=[c(t.region,!1)];g.push(e);for(var i=0;i<t.children.length;i++)e.push(d(t.children[i]))}function d(t){for(var e=0;e<t.children.length;e++)u(t.children[e]);return c(t.region,!0)}for(o=0;o<a.children.length;o++)u(a.children[o]);return g.length<=0?{type:"Polygon",coordinates:[]}:1==g.length?{type:"Polygon",coordinates:g[0]}:{type:"MultiPolygon",coordinates:g}}},sG=jL,oG=tG,lG=eG,cG=rG,gG=aG,uG=!1,dG=qL();function hG(t,e,i){var n=nG.segments(t),r=nG.segments(e),a=i(nG.combine(n,r));return nG.polygon(a)}nG={buildLog:function(t){return!0===t?uG=sG():!1===t&&(uG=!1),!1!==uG&&uG.list},epsilon:function(t){return dG.epsilon(t)},segments:function(t){var e=oG(!0,dG,uG);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:oG(!1,dG,uG).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:cG.union(t.combined,uG),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:cG.intersect(t.combined,uG),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:cG.difference(t.combined,uG),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:cG.differenceRev(t.combined,uG),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:cG.xor(t.combined,uG),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:lG(t.segments,dG,uG),inverted:t.inverted}},polygonFromGeoJSON:function(t){return gG.toPolygon(nG,t)},polygonToGeoJSON:function(t){return gG.fromPolygon(nG,dG,t)},union:function(t,e){return hG(t,e,nG.selectUnion)},intersect:function(t,e){return hG(t,e,nG.selectIntersect)},difference:function(t,e){return hG(t,e,nG.selectDifference)},differenceRev:function(t,e){return hG(t,e,nG.selectDifferenceRev)},xor:function(t,e){return hG(t,e,nG.selectXor)}},"object"==typeof window&&(window.PolyBool=nG);var BG=nG,pG={exports:{}},FG=Hu.dot,fG=tg.BADNUM,QG=pG.exports={};QG.tester=function(t){var e,i=t.slice(),n=i[0][0],r=n,a=i[0][1],s=a;for(i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),e=1;e<i.length;e++)n=Math.min(n,i[e][0]),r=Math.max(r,i[e][0]),a=Math.min(a,i[e][1]),s=Math.max(s,i[e][1]);var o,l=!1;5===i.length&&(i[0][0]===i[1][0]?i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]&&(l=!0,o=function(t){return t[0]===i[0][0]}):i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0]&&(l=!0,o=function(t){return t[1]===i[0][1]}));var c=!0,g=i[0];for(e=1;e<i.length;e++)if(g[0]!==i[e][0]||g[1]!==i[e][1]){c=!1;break}return{xmin:n,xmax:r,ymin:a,ymax:s,pts:i,contains:l?function(t,e){var i=t[0],l=t[1];return!(i===fG||i<n||i>r||l===fG||l<a||l>s)&&(!e||!o(t))}:function(t,e){var o=t[0],l=t[1];if(o===fG||o<n||o>r||l===fG||l<a||l>s)return!1;var c,g,u,d,h,B=i.length,p=i[0][0],F=i[0][1],f=0;for(c=1;c<B;c++)if(g=p,u=F,p=i[c][0],F=i[c][1],!(o<(d=Math.min(g,p))||o>Math.max(g,p)||l>Math.max(u,F)))if(l<Math.min(u,F))o!==d&&f++;else{if(l===(h=p===g?l:u+(o-g)*(F-u)/(p-g)))return 1!==c||!e;l<=h&&o!==d&&f++}return f%2==1},isRect:l,degenerate:c}},QG.isSegmentBent=function(t,e,i,n){var r,a,s,o=t[e],l=[t[i][0]-o[0],t[i][1]-o[1]],c=FG(l,l),g=Math.sqrt(c),u=[-l[1]/g,l[0]/g];for(r=e+1;r<i;r++)if(a=[t[r][0]-o[0],t[r][1]-o[1]],(s=FG(a,l))<0||s>c||Math.abs(FG(a,u))>n)return!0;return!1},QG.filter=function(t,e){var i=[t[0]],n=0,r=0;function a(a){t.push(a);var s=i.length,o=n;i.splice(r+1);for(var l=o+1;l<t.length;l++)(l===t.length-1||QG.isSegmentBent(t,o,l+1,e))&&(i.push(t[l]),i.length<s-2&&(n=l,r=i.length-1),o=l)}t.length>1&&a(t.pop());return{addPt:a,raw:t,filtered:i}};var IG=pG.exports,UG=BG,bG=function(t,e,i,n){var r=t[0],a=t[1],s=!1;void 0===i&&(i=0),void 0===n&&(n=e.length);for(var o=n-i,l=0,c=o-1;l<o;c=l++){var g=e[l+i][0],u=e[l+i][1],d=e[c+i][0],h=e[c+i][1];u>a!=h>a&&r<(d-g)*(a-u)/(h-u)+g&&(s=!s)}return s},yG=Nu,mG=jI.dashStyle,xG=Uu,vG=Wv,CG=TQ.makeEventData,AG=kv.freeMode,LG=kv.rectMode,GG=kv.drawMode,RG=kv.openMode,SG=kv.selectMode,wG=bC,VG=yC,EG=jC,ZG=Dp.clearOutline,NG=_v.handleEllipse,DG=_v.readPaths,XG=hC,HG=UC,WG=JL.activateLastSelection,kG=_B,MG=kG.sorterAsc,TG=IG,YG=Mh,JG=Ep.getFromId,_G=Mv,zG=Tv.redrawReglTraces,OG={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"},KG=OG.MINSELECT,PG=TG.filter,jG=TG.tester,qG=Pv.p2r,$G=Pv.axValue,tR=Pv.getTransform;function eR(t){return void 0!==t.subplot}function iR(t,e,i,n,r,a,s){var o,l,c,g,u,d,h,B,p,F=e._hoverdata,f=e._fullLayout.clickmode.indexOf("event")>-1,Q=[];if(function(t){return t&&Array.isArray(t)&&!0!==t[0].hoverOnBox}(F)){sR(t,e,a);var I=function(t,e){var i,n,r=t[0],a=-1,s=[];for(n=0;n<e.length;n++)if(i=e[n],r.fullData.index===i.cd[0].trace.index){if(!0===r.hoverOnBox)break;void 0!==r.pointNumber?a=r.pointNumber:void 0!==r.binNumber&&(a=r.binNumber,s=r.pointNumbers);break}return{pointNumber:a,pointNumbers:s,searchInfo:i}}(F,o=cR(e,i,n,r));if(I.pointNumbers.length>0?function(t,e){var i,n,r,a=[];for(r=0;r<t.length;r++)(i=t[r]).cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&a.push(i);if(1===a.length&&a[0]===e.searchInfo&&(n=e.searchInfo.cd[0].trace).selectedpoints.length===e.pointNumbers.length){for(r=0;r<e.pointNumbers.length;r++)if(n.selectedpoints.indexOf(e.pointNumbers[r])<0)return!1;return!0}return!1}(o,I):function(t){var e,i,n=0;for(i=0;i<t.length;i++)if((e=t[i].cd[0].trace).selectedpoints){if(e.selectedpoints.length>1)return!1;if((n+=e.selectedpoints.length)>1)return!1}return 1===n}(o)&&(d=uR(I))){for(s&&s.remove(),p=0;p<o.length;p++)(l=o[p])._module.selectPoints(l,!1);dR(e,o),oR(a),f&&CR(e)}else{for(h=t.shiftKey&&(void 0!==d?d:uR(I)),c=function(t,e,i){return{pointNumber:t,searchInfo:e,subtract:!!i}}(I.pointNumber,I.searchInfo,h),g=aR(a.selectionDefs.concat([c])),p=0;p<o.length;p++)if(u=BR(o[p]._module.selectPoints(o[p],g),o[p]),Q.length)for(var U=0;U<u.length;U++)Q.push(u[U]);else Q=u;if(dR(e,o,B={points:Q}),c&&a&&a.selectionDefs.push(c),s){var b=a.mergedPolygons,y=RG(a.dragmode);EG(pR(b,y),s,a)}f&&vR(e,B)}}}function nR(t){return"pointNumber"in t&&"searchInfo"in t}function rR(t){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,i,n,r){var a=t.searchInfo.cd[0].trace.index;return r.cd[0].trace.index===a&&n===t.pointNumber},isRect:!1,degenerate:!1,subtract:!!t.subtract}}function aR(t){if(t.length){for(var e=[],i=nR(t[0])?0:t[0][0][0],n=i,r=nR(t[0])?0:t[0][0][1],a=r,s=0;s<t.length;s++)if(nR(t[s]))e.push(rR(t[s]));else{var o=jG(t[s]);o.subtract=!!t[s].subtract,e.push(o),i=Math.min(i,o.xmin),n=Math.max(n,o.xmax),r=Math.min(r,o.ymin),a=Math.max(a,o.ymax)}return{xmin:i,xmax:n,ymin:r,ymax:a,pts:[],contains:function(t,i,n,r){for(var a=!1,s=0;s<e.length;s++)e[s].contains(t,i,n,r)&&(a=!e[s].subtract);return a},isRect:!1,degenerate:!1}}}function sR(t,e,i){var n=e._fullLayout,r=i.plotinfo,a=i.dragmode,s=n._lastSelectedSubplot&&n._lastSelectedSubplot===r.id,o=(t.shiftKey||t.altKey)&&!(GG(a)&&RG(a));s&&o&&r.selection&&r.selection.selectionDefs&&!i.selectionDefs?(i.selectionDefs=r.selection.selectionDefs,i.mergedPolygons=r.selection.mergedPolygons):o&&r.selection||oR(i),s||(ZG(e),n._lastSelectedSubplot=r.id)}function oR(t,e){var i=t.dragmode,n=t.plotinfo,r=t.gd;(function(t){return t._fullLayout._activeShapeIndex>=0})(r)&&r._fullLayout._deactivateShape(r),function(t){return t._fullLayout._activeSelectionIndex>=0}(r)&&r._fullLayout._deactivateSelection(r);var a=r._fullLayout._zoomlayer,s=GG(i),o=SG(i);if(s||o){var l,c,g=a.selectAll(".select-outline-"+n.id);if(g&&r._fullLayout._outlining)s&&(l=XG(g,t)),l&&yG.call("_guiRelayout",r,{shapes:l}),o&&!eR(t)&&(c=HG(g,t)),c&&(r._fullLayout._noEmitSelectedAtStart=!0,yG.call("_guiRelayout",r,{selections:c}).then((function(){e&&WG(r)}))),r._fullLayout._outlining=!1}n.selection={},n.selection.selectionDefs=t.selectionDefs=[],n.selection.mergedPolygons=t.mergedPolygons=[]}function lR(t){return t._id}function cR(t,e,i,n){if(!t.calcdata)return[];var r,a,s,o=[],l=e.map(lR),c=i.map(lR);for(s=0;s<t.calcdata.length;s++)if(!0===(a=(r=t.calcdata[s])[0].trace).visible&&a._module&&a._module.selectPoints)if(!eR({subplot:n})||a.subplot!==n&&a.geo!==n)if("splom"===a.type){if(a._xaxes[l[0]]&&a._yaxes[c[0]]){var g=gR(a._module,r,e[0],i[0]);g.scene=t._fullLayout._splomScenes[a.uid],o.push(g)}}else if("sankey"===a.type){var u=gR(a._module,r,e[0],i[0]);o.push(u)}else{if(!(-1!==l.indexOf(a.xaxis)||a._xA&&a._xA.overlaying))continue;if(!(-1!==c.indexOf(a.yaxis)||a._yA&&a._yA.overlaying))continue;o.push(gR(a._module,r,JG(t,a.xaxis),JG(t,a.yaxis)))}else o.push(gR(a._module,r,e[0],i[0]));return o}function gR(t,e,i,n){return{_module:t,cd:e,xaxis:i,yaxis:n}}function uR(t){var e=t.searchInfo.cd[0].trace,i=t.pointNumber,n=t.pointNumbers,r=n.length>0?n[0]:i;return!!e.selectedpoints&&e.selectedpoints.indexOf(r)>-1}function dR(t,e,i){var n,r;for(n=0;n<e.length;n++){var a=e[n].cd[0].trace._fullInput,s=t._fullLayout._tracePreGUI[a.uid]||{};void 0===s.selectedpoints&&(s.selectedpoints=a._input.selectedpoints||null)}if(i){var o=i.points||[];for(n=0;n<e.length;n++)(r=e[n].cd[0].trace)._input.selectedpoints=r._fullInput.selectedpoints=[],r._fullInput!==r&&(r.selectedpoints=[]);for(var l=0;l<o.length;l++){var c=o[l],g=c.data,u=c.fullData,d=c.pointIndex,h=c.pointIndices;h?([].push.apply(g.selectedpoints,h),r._fullInput!==r&&[].push.apply(u.selectedpoints,h)):(g.selectedpoints.push(d),r._fullInput!==r&&u.selectedpoints.push(d))}}else for(n=0;n<e.length;n++)delete(r=e[n].cd[0].trace).selectedpoints,delete r._input.selectedpoints,r._fullInput!==r&&delete r._fullInput.selectedpoints;!function(t,e){for(var i=!1,n=0;n<e.length;n++){var r=e[n],a=r.cd;yG.traceIs(a[0].trace,"regl")&&(i=!0);var s=r._module,o=s.styleOnSelect||s.style;o&&(o(t,a,a[0].node3),a[0].nodeRangePlot3&&o(t,a,a[0].nodeRangePlot3))}i&&(_G(t),zG(t))}(t,e)}function hR(t,e,i){for(var n=(i?UG.difference:UG.union)({regions:t},{regions:[e]}).regions.reverse(),r=0;r<n.length;r++){var a=n[r];a.subtract=bR(a,n.slice(0,r))}return n}function BR(t,e){if(Array.isArray(t))for(var i=e.cd,n=e.cd[0].trace,r=0;r<t.length;r++)t[r]=CG(t[r],n,i);return t}function pR(t,e){for(var i=[],n=0;n<t.length;n++){i[n]=[];for(var r=0;r<t[n].length;r++){i[n][r]=[],i[n][r][0]=r?"L":"M";for(var a=0;a<t[n][r].length;a++)i[n][r].push(t[n][r][a])}e||i[n].push(["Z",i[n][0][1],i[n][0][2]])}return i}function FR(t,e){for(var i,n=[],r=0;r<e.length;r++){var a=e[r];i=BR(a._module.selectPoints(a,t),a),n=n.concat(i)}return n}function fR(t,e,i,n,r){var a,s,o,l=!!n;r&&(a=r.plotinfo,s=r.xaxes[0]._id,o=r.yaxes[0]._id);var c=[],g=[],u=UR(t),d=t._fullLayout;if(a){var h=d._zoomlayer,B=d.dragmode,p=GG(B),F=SG(B);if(p||F){var f=JG(t,s,"x"),Q=JG(t,o,"y");if(f&&Q){var I=h.selectAll(".select-outline-"+a.id);if(I&&t._fullLayout._outlining&&I.length){for(var U=I[0][0].getAttribute("d"),b=DG(U,t,a),y=[],m=0;m<b.length;m++){for(var x=b[m],v=[],C=0;C<x.length;C++)v.push([yR(f,x[C][1]),yR(Q,x[C][2])]);v.xref=s,v.yref=o,v.subtract=bR(v,y),y.push(v)}u=u.concat(y)}}}}var A=s&&o?[s+o]:d._subplots.cartesian;!function(t){var e=t.calcdata;if(!e)return;for(var i=0;i<e.length;i++){var n=e[i][0].trace,r=t._fullLayout._splomScenes;if(r){var a=r[n.uid];a&&(a.selectBatch=[])}}}(t);for(var L={},G=0;G<A.length;G++){var R=A[G],S=R.indexOf("y"),w=R.slice(0,S),V=R.slice(S),E=s&&o?i:void 0;if(E=IR(u,w,V,E)){var Z=n;if(!l){var N=JG(t,w,"x"),D=JG(t,V,"y");Z=cR(t,[N],[D],R);for(var X=0;X<Z.length;X++){var H=Z[X],W=H.cd[0],k=W.trace;if("scattergl"===H._module.name&&!W.t.xpx){var M=k.x,T=k.y,Y=k._length;W.t.xpx=[],W.t.ypx=[];for(var J=0;J<Y;J++)W.t.xpx[J]=N.c2p(M[J]),W.t.ypx[J]=D.c2p(T[J])}"splom"===H._module.name&&(L[k.uid]||(L[k.uid]=!0))}}var _=FR(E,Z);c=c.concat(_),g=g.concat(Z)}}var z={points:c};dR(t,g,z);var O=d.clickmode.indexOf("event")>-1&&e;if(!a&&e){var K=UR(t,!0);if(K.length){var P=K[0].xref,j=K[0].yref;if(P&&j){var q=mR(K);xR([JG(t,P,"x"),JG(t,j,"y")])(z,q)}}t._fullLayout._noEmitSelectedAtStart?t._fullLayout._noEmitSelectedAtStart=!1:O&&vR(t,z),d._reselect=!1}if(!a&&d._deselect){var $=d._deselect;(function(t,e,i){for(var n=0;n<i.length;n++){var r=i[n];if(r.xaxis&&r.xaxis._id===t&&r.yaxis&&r.yaxis._id===e)return!0}return!1})(s=$.xref,o=$.yref,g)||QR(t,s,o,n),O&&(z.points.length?vR(t,z):CR(t)),d._deselect=!1}return{eventData:z,selectionTesters:i}}function QR(t,e,i,n){n=cR(t,[JG(t,e,"x")],[JG(t,i,"y")],e+i);for(var r=0;r<n.length;r++){var a=n[r];a._module.selectPoints(a,!1)}dR(t,n)}function IR(t,e,i,n){for(var r,a=0;a<t.length;a++){var s=t[a];if(e===s.xref&&i===s.yref)if(r)n=aR(r=hR(r,s,!!s.subtract));else r=[s],n=jG(s)}return n}function UR(t,e){for(var i=[],n=t._fullLayout,r=n.selections,a=r.length,s=0;s<a;s++)if(!e||s===n._activeSelectionIndex){var o=r[s];if(o){var l,c,g,u,d,h=o.xref,B=o.yref,p=JG(t,h,"x"),F=JG(t,B,"y");if("rect"===o.type){d=[];var f=yR(p,o.x0),Q=yR(p,o.x1),I=yR(F,o.y0),U=yR(F,o.y1);d=[[f,I],[f,U],[Q,U],[Q,I]],l=Math.min(f,Q),c=Math.max(f,Q),g=Math.min(I,U),u=Math.max(I,U),d.xmin=l,d.xmax=c,d.ymin=g,d.ymax=u,d.xref=h,d.yref=B,d.subtract=!1,d.isRect=!0,i.push(d)}else if("path"===o.type)for(var b=o.path.split("Z"),y=[],m=0;m<b.length;m++){var x=b[m];if(x){x+="Z";var v=wG.extractPathCoords(x,VG.paramIsX,"raw"),C=wG.extractPathCoords(x,VG.paramIsY,"raw");l=1/0,c=-1/0,g=1/0,u=-1/0,d=[];for(var A=0;A<v.length;A++){var L=yR(p,v[A]),G=yR(F,C[A]);d.push([L,G]),l=Math.min(L,l),c=Math.max(L,c),g=Math.min(G,g),u=Math.max(G,u)}d.xmin=l,d.xmax=c,d.ymin=g,d.ymax=u,d.xref=h,d.yref=B,d.subtract=bR(d,y),y.push(d),i.push(d)}}}}return i}function bR(t,e){for(var i=!1,n=0;n<e.length;n++)for(var r=e[n],a=0;a<t.length;a++)if(bG(t[a],r)){i=!i;break}return i}function yR(t,e){return"date"===t.type&&(e=e.replace("_"," ")),"log"===t.type?t.c2p(e):t.r2p(e,null,t.calendar)}function mR(t){for(var e=t.length,i=[],n=0;n<e;n++){var r=t[n];i=(i=i.concat(r)).concat([r[0]])}return function(t){t.isRect=5===t.length&&t[0][0]===t[4][0]&&t[0][1]===t[4][1]&&t[0][0]===t[1][0]&&t[2][0]===t[3][0]&&t[0][1]===t[3][1]&&t[1][1]===t[2][1]||t[0][1]===t[1][1]&&t[2][1]===t[3][1]&&t[0][0]===t[3][0]&&t[1][0]===t[2][0],t.isRect&&(t.xmin=Math.min(t[0][0],t[2][0]),t.xmax=Math.max(t[0][0],t[2][0]),t.ymin=Math.min(t[0][1],t[2][1]),t.ymax=Math.max(t[0][1],t[2][1]));return t}(i)}function xR(t){return function(e,i){for(var n,r,a=0;a<t.length;a++){var s=t[a],o=s._id,l=o.charAt(0);if(i.isRect){n||(n={});var c=i[l+"min"],g=i[l+"max"];void 0!==c&&void 0!==g&&(n[o]=[qG(s,c),qG(s,g)].sort(MG))}else r||(r={}),r[o]=i.map($G(s))}n&&(e.range=n),r&&(e.lassoPoints=r)}}function vR(t,e){e&&(e.selections=(t.layout||{}).selections||[]),t.emit("plotly_selected",e)}function CR(t){t.emit("plotly_deselect",null)}var AR={reselect:fR,prepSelect:function(t,e,i,n,r){var a=!eR(n),s=AG(r),o=LG(r),l=RG(r),c=GG(r),g=SG(r),u="drawcircle"===r,d="drawline"===r||u,h=n.gd,B=h._fullLayout,p=g&&"immediate"===B.newselection.mode&&a,F=B._zoomlayer,f=n.element.getBoundingClientRect(),Q=n.plotinfo,I=tR(Q),U=e-f.left,b=i-f.top;B._calcInverseTransform(h);var y=kG.apply3DTransform(B._invTransform)(U,b);U=y[0],b=y[1];var m,x,v,C,A,L,G,R=B._invScaleX,S=B._invScaleY,w=U,V=b,E="M"+U+","+b,Z=n.xaxes[0],N=n.yaxes[0],D=Z._length,X=N._length,H=t.altKey&&!(GG(r)&&l);sR(t,h,n),s&&(m=PG([[U,b]],OG.BENDPX));var W=F.selectAll("path.select-outline-"+Q.id).data([1]),k=c?B.newshape:B.newselection;c&&(n.hasText=k.label.text||k.label.texttemplate);var M=c&&!l?k.fillcolor:"rgba(0,0,0,0)",T=k.line.color||(a?xG.contrast(h._fullLayout.plot_bgcolor):"#7f7f7f");W.enter().append("path").attr("class","select-outline select-outline-"+Q.id).style({opacity:c?k.opacity/2:1,"stroke-dasharray":mG(k.line.dash,k.line.width),"stroke-width":k.line.width+"px","shape-rendering":"crispEdges"}).call(xG.stroke,T).call(xG.fill,M).attr("fill-rule","evenodd").classed("cursor-move",!!c).attr("transform",I).attr("d",E+"Z");var Y=F.append("path").attr("class","zoombox-corners").style({fill:xG.background,stroke:xG.defaultLine,"stroke-width":1}).attr("transform",I).attr("d","M0,0Z");if(c&&n.hasText){var J=F.select(".label-temp");J.empty()&&(J=F.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var _=B._uid+OG.SELECTID,z=[],O=cR(h,n.xaxes,n.yaxes,n.subplot);p&&!t.shiftKey&&(n._clearSubplotSelections=function(){if(a){var t=Z._id,e=N._id;QR(h,t,e,O);for(var i=(h.layout||{}).selections||[],n=[],r=!1,s=0;s<i.length;s++){var o=B.selections[s];o&&o.xref===t&&o.yref===e?r=!0:n.push(i[s])}r&&(h._fullLayout._noEmitSelectedAtStart=!0,yG.call("_guiRelayout",h,{selections:n}))}});var K=function(t){var e=t.plotinfo;return e.fillRangeItems||xR(t.xaxes.concat(t.yaxes))}(n);n.moveFn=function(t,e){n._clearSubplotSelections&&(n._clearSubplotSelections(),n._clearSubplotSelections=void 0),w=Math.max(0,Math.min(D,R*t+U)),V=Math.max(0,Math.min(X,S*e+b));var i=Math.abs(w-U),r=Math.abs(V-b);if(o){var a,p,F;if(g){var f=B.selectdirection;switch(a="any"===f?r<Math.min(.6*i,KG)?"h":i<Math.min(.6*r,KG)?"v":"d":f){case"h":p=u?X/2:0,F=X;break;case"v":p=u?D/2:0,F=D}}if(c)switch(B.newshape.drawdirection){case"vertical":a="h",p=u?X/2:0,F=X;break;case"horizontal":a="v",p=u?D/2:0,F=D;break;case"ortho":i<r?(a="h",p=b,F=V):(a="v",p=U,F=w);break;default:a="d"}"h"===a?((C=d?NG(u,[w,p],[w,F]):[[U,p],[U,F],[w,F],[w,p]]).xmin=d?w:Math.min(U,w),C.xmax=d?w:Math.max(U,w),C.ymin=Math.min(p,F),C.ymax=Math.max(p,F),Y.attr("d","M"+C.xmin+","+(b-KG)+"h-4v"+2*KG+"h4ZM"+(C.xmax-1)+","+(b-KG)+"h4v"+2*KG+"h-4Z")):"v"===a?((C=d?NG(u,[p,V],[F,V]):[[p,b],[p,V],[F,V],[F,b]]).xmin=Math.min(p,F),C.xmax=Math.max(p,F),C.ymin=d?V:Math.min(b,V),C.ymax=d?V:Math.max(b,V),Y.attr("d","M"+(U-KG)+","+C.ymin+"v-4h"+2*KG+"v4ZM"+(U-KG)+","+(C.ymax-1)+"v4h"+2*KG+"v-4Z")):"d"===a&&((C=d?NG(u,[U,b],[w,V]):[[U,b],[U,V],[w,V],[w,b]]).xmin=Math.min(U,w),C.xmax=Math.max(U,w),C.ymin=Math.min(b,V),C.ymax=Math.max(b,V),Y.attr("d","M0,0Z"))}else s&&(m.addPt([w,V]),C=m.filtered);if(n.selectionDefs&&n.selectionDefs.length?(v=hR(n.mergedPolygons,C,H),C.subtract=H,x=aR(n.selectionDefs.concat([C]))):(v=[C],x=jG(C)),EG(pR(v,l),W,n),g){var Q,I=fR(h,!1),y=I.eventData?I.eventData.points.slice():[];I=fR(h,!1,x,O,n),x=I.selectionTesters,G=I.eventData,Q=m?m.filtered:mR(v),YG.throttle(_,OG.SELECTDELAY,(function(){for(var t=(z=FR(x,O)).slice(),e=0;e<y.length;e++){for(var i=y[e],n=!1,r=0;r<t.length;r++)if(t[r].curveNumber===i.curveNumber&&t[r].pointNumber===i.pointNumber){n=!0;break}n||t.push(i)}t.length&&(G||(G={}),G.points=t),K(G,Q),function(t,e){t.emit("plotly_selecting",e)}(h,G)}))}},n.clickFn=function(t,e){if(Y.remove(),h._fullLayout._activeShapeIndex>=0)h._fullLayout._deactivateShape(h);else if(!c){var i=B.clickmode;YG.done(_).then((function(){if(YG.clear(_),2===t){for(W.remove(),A=0;A<O.length;A++)(L=O[A])._module.selectPoints(L,!1);if(dR(h,O),oR(n),CR(h),O.length){var r=O[0].xaxis,a=O[0].yaxis;if(r&&a){for(var s=[],o=h._fullLayout.selections,l=0;l<o.length;l++){var c=o[l];c&&(c.xref===r._id&&c.yref===a._id||s.push(c))}s.length<o.length&&(h._fullLayout._noEmitSelectedAtStart=!0,yG.call("_guiRelayout",h,{selections:s}))}}}else i.indexOf("select")>-1&&iR(e,h,n.xaxes,n.yaxes,n.subplot,n,W),"event"===i&&vR(h,void 0);vG.click(h,e,Q.id)})).catch(kG.error)}},n.doneFn=function(){Y.remove(),YG.done(_).then((function(){YG.clear(_),!p&&C&&n.selectionDefs&&(C.subtract=H,n.selectionDefs.push(C),n.mergedPolygons.length=0,[].push.apply(n.mergedPolygons,v)),(p||c)&&oR(n,p),n.doneFnCompleted&&n.doneFnCompleted(z),g&&vR(h,G)})).catch(kG.error)}},clearOutline:ZG,clearSelectionsCache:oR,selectOnClick:iR},LR=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],GR={axisRefDescription:function(t,e,i){return["If set to a",t,"axis id (e.g. *"+t+"* or","*"+t+"2*), the `"+t+"` position refers to a",t,"coordinate. If set to *paper*, the `"+t+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+i+"). If set to a",t,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+t+"2 domain* refers to the domain of the second",t," axis and a",t,"position of 0.5 refers to the","point between the",e,"and the",i,"of the domain of the","second",t,"axis."].join(" ")}},RR=LR,SR=_g(),wR=Np,VR=GR;function ER(t){return["In order for absolute positioning of the arrow to work, *a"+t+"ref* must be exactly the same as *"+t+"ref*, otherwise *a"+t+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+t+"ref* can be set to *pixel*,","in which case the *a"+t+"* value is specified in pixels","relative to *"+t+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function ZR(t,e,i){return["Sets the",t,"component of the arrow tail about the arrow head.","If `a"+t+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",i,"to",e,"("+e,"to",i+").","If `a"+t+"ref` is not `pixel` and is exactly the same as `"+t+"ref`,","this is an absolute value on that axis,","like `"+t+"`, specified in the same coordinates as `"+t+"ref`."].join(" ")}var NR=(0,Ap.templatedArray)("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>, <s>, <u>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:SR({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:RR.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:RR.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[ZR("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[ZR("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",wR.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",VR.axisRefDescription("x","left","right"),ER("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",wR.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",VR.axisRefDescription("y","bottom","top"),ER("y")].join(" ")},xref:{valType:"enumerated",values:["paper",wR.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",VR.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",wR.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",VR.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:SR({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc"}),DR={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]},XR=_F,HR=Dd.texttemplateAttrs,WR=Dd.hovertemplateAttrs,kR=Gf,MR=_g(),TR=Nd.dash,YR=Nd.pattern,JR=jI,_R=DR,zR=Mg.extendFlat,OR=function(t){return{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."+(t?" If fillgradient is specified, fillcolor is ignored except for setting the background color of the hover label, if any.":"")].join(" ")}};function KR(t){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+t+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function PR(t){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+t+" axis.","When `"+t+"period` is round number of weeks,","the `"+t+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function jR(t){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+t+" axis."].join(" ")}}var qR={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:KR("x"),yperiod:KR("y"),xperiod0:PR("x0"),yperiod0:PR("y0"),xperiodalignment:jR("x"),yperiodalignment:jR("y"),xhoverformat:XR("x"),yhoverformat:XR("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant in the following cases:","1. when `scattermode` is set to *group*.","2. when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:HR({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+_R.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:WR({},{keys:_R.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:zR({},TR,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot",description:["Sets the line back off from the end point of the nth line segment (in px).","This option is useful e.g. to avoid overlap with arrowhead markers.","With *auto* the lines would trim before markers if `marker.angleref` is set to *previous*."].join(" ")},simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:OR(!0),fillgradient:zR({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc",description:["Sets the type/orientation of the color gradient for the fill.","Defaults to *none*."].join(" ")},start:{valType:"number",editType:"calc",description:["Sets the gradient start value.","It is given as the absolute position on the axis determined by","the orientiation. E.g., if orientation is *horizontal*, the","gradient will be horizontal and start from the x-position","given by start. If omitted, the gradient starts at the lowest","value of the trace along the respective axis.","Ignored if orientation is *radial*."].join(" ")},stop:{valType:"number",editType:"calc",description:["Sets the gradient end value.","It is given as the absolute position on the axis determined by","the orientiation. E.g., if orientation is *horizontal*, the","gradient will be horizontal and end at the x-position","given by end. If omitted, the gradient ends at the highest","value of the trace along the respective axis.","Ignored if orientation is *radial*."].join(" ")},colorscale:{valType:"colorscale",editType:"style",description:["Sets the fill gradient colors as a color scale.","The color scale is interpreted as a gradient","applied in the direction specified by *orientation*,","from the lowest to the highest value of the scatter","plot along that axis, or from the center to the most","distant point from it, if orientation is *radial*."].join(" ")},editType:"calc",description:["Sets a fill gradient.","If not specified, the fillcolor is used instead."].join(" ")}),fillpattern:YR,marker:zR({symbol:{valType:"enumerated",values:JR.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1,description:["Sets the marker angle in respect to `angleref`."].join(" ")},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1,description:["Sets the reference for marker angle.","With *previous*, angle 0 points along the line from the previous point to this one.","With *up*, angle 0 points toward the top of the screen."].join(" ")},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0,description:["Moves the marker away from the data point in the direction of `angle` (in px).","This can be useful for example if you have another marker at this","location and you want to point an arrowhead marker at it."].join(" ")},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:zR({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},kR("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},kR("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:MR({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."}),zorder:{valType:"integer",dflt:0,editType:"plot",description:["Sets the layer on which this trace is displayed, relative to","other SVG traces on the same subplot. SVG traces with higher `zorder`","appear in front of those with lower `zorder`."].join(" ")}},$R=NR,tS=qR.line,eS=Nd.dash,iS=Mg.extendFlat,nS=GR,rS=(0,wd.overrideAll)((0,Ap.templatedArray)("selection",{type:{valType:"enumerated",values:["rect","path"],description:["Specifies the selection type to be drawn.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`) and (`x0`,`y1`).","If *path*, draw a custom SVG path using `path`."].join(" ")},xref:iS({},$R.xref,{description:["Sets the selection's x coordinate axis.",nS.axisRefDescription("x","left","right")].join(" ")}),yref:iS({},$R.yref,{description:["Sets the selection's x coordinate axis.",nS.axisRefDescription("y","bottom","top")].join(" ")}),x0:{valType:"any",description:"Sets the selection's starting x position."},x1:{valType:"any",description:"Sets the selection's end x position."},y0:{valType:"any",description:"Sets the selection's starting y position."},y1:{valType:"any",description:"Sets the selection's end y position."},path:{valType:"string",editType:"arraydraw",description:["For `type` *path* - a valid SVG path similar to `shapes.path` in data coordinates.","Allowed segments are: M, L and Z."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw",description:"Sets the opacity of the selection."},line:{color:tS.color,width:iS({},tS.width,{min:1,dflt:1}),dash:iS({},eS,{dflt:"dot"})}}),"arraydraw","from-root"),aS=_B,sS=Vy,oS=tQ,lS=rS,cS=bC;function gS(t,e,i){function n(i,n){return aS.coerce(t,e,lS,i,n)}var r=n("path"),a="path"!==n("type",r?"path":"rect");a&&delete e.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var s=["x","y"],o=0;o<2;o++){var l,c,g,u=s[o],d={_fullLayout:i},h=sS.coerceRef(t,e,d,u);if((l=sS.getFromId(d,h))._selectionIndices.push(e._index),g=cS.rangeToShapePosition(l),c=cS.shapePositionToRange(l),a){var B=u+"0",p=u+"1",F=t[B],f=t[p];t[B]=c(t[B],!0),t[p]=c(t[p],!0),sS.coercePosition(e,d,n,h,B),sS.coercePosition(e,d,n,h,p);var Q=e[B],I=e[p];void 0!==Q&&void 0!==I&&(e[B]=g(Q),e[p]=g(I),t[B]=F,t[p]=f)}}a&&aS.noneOrAll(t,e,["x0","x1","y0","y1"])}var uS=Nu,dS=_B,hS=Ep,BS=function(t){return function(e,i){var n=e[t];if(Array.isArray(n))for(var r=uS.subplotsRegistry.cartesian,a=r.idRegex,s=i._subplots,o=s.xaxis,l=s.yaxis,c=s.cartesian,g=i._has("cartesian"),u=0;u<n.length;u++){var d=n[u];if(dS.isPlainObject(d)){var h=hS.cleanId(d.xref,"x",!1),B=hS.cleanId(d.yref,"y",!1),p=a.x.test(h),F=a.y.test(B);if(p||F){g||dS.pushUnique(i._basePlotModules,r);var f=!1;p&&-1===o.indexOf(h)&&(o.push(h),f=!0),F&&-1===l.indexOf(B)&&(l.push(B),f=!0),f&&p&&F&&c.push(h+B)}}}}},pS=JL,FS=AR,fS={moduleType:"component",name:"selections",layoutAttributes:rS,supplyLayoutDefaults:function(t,e){oS(t,e,{name:"selections",handleItemDefaults:gS});for(var i=e.selections,n=0;n<i.length;n++){var r=i[n];r&&(void 0===r.path&&(void 0!==r.x0&&void 0!==r.x1&&void 0!==r.y0&&void 0!==r.y1||(e.selections[n]=null)))}},supplyDrawNewSelectionDefaults:function(t,e,i){i("newselection.mode"),i("newselection.line.width")&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")},includeBasePlot:BS("selections"),draw:pS.draw,drawOne:pS.drawOne,reselect:FS.reselect,prepSelect:FS.prepSelect,clearOutline:FS.clearOutline,clearSelectionsCache:FS.clearSelectionsCache,selectOnClick:FS.selectOnClick},QS=Js,IS=_B,US=IS.numberFormat,bS=kg,yS=Nu,mS=IS.strTranslate,xS=xF,vS=Uu,CS=jI,AS=Wv,LS=Vy,GS=am,RS=nm,SS=kv.selectingOrDrawing,wS=kv.freeMode,VS=CF.FROM_TL,ES=Mv,ZS=Tv.redrawReglTraces,NS=yF,DS=Ep.getFromId,XS=fS.prepSelect,HS=fS.clearOutline,WS=fS.selectOnClick,kS=bL,MS=Np,TS=MS.MINDRAG,YS=MS.MINZOOM,JS=!0;function _S(t,e){for(var i=0;i<t.length;i++)if(!t[i].fixedrange)return e;return""}function zS(t,e,i,n,r){for(var a=0;a<t.length;a++){var s=t[a];if(!s.fixedrange)if(s.rangebreaks){var o="y"===s._id.charAt(0),l=o?1-e:e,c=o?1-i:i;n[s._name+".range[0]"]=s.l2r(s.p2l(l*s._length)),n[s._name+".range[1]"]=s.l2r(s.p2l(c*s._length))}else{var g=s._rl[0],u=s._rl[1]-g;n[s._name+".range[0]"]=s.l2r(g+u*e),n[s._name+".range[1]"]=s.l2r(g+u*i)}}if(r&&r.length){var d=(e+(1-i))/2;zS(r,d,1-d,n,[])}}function OS(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(!n.fixedrange){if(n.rangebreaks){var r=n._length,a=(n.p2l(0+e)-n.p2l(0)+(n.p2l(r+e)-n.p2l(r)))/2;n.range=[n.l2r(n._rl[0]-a),n.l2r(n._rl[1]-a)]}else n.range=[n.l2r(n._rl[0]-e/n._m),n.l2r(n._rl[1]-e/n._m)];n.limitRange&&n.limitRange()}}}function KS(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function PS(t){QS.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function jS(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,YS)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function qS(t,e,i,n,r){for(var a,s,o,l,c=!1,g={},u={},d=(r||{}).xaHash,h=(r||{}).yaHash,B=0;B<e.length;B++){var p=e[B];for(a in i)if(p[a]){for(o in p)r&&(d[o]||h[o])||("x"===o.charAt(0)?i:n)[o]||(g[o]=a);for(s in n)r&&(d[s]||h[s])||!p[s]||(c=!0)}for(s in n)if(p[s])for(l in p)r&&(d[l]||h[l])||("x"===l.charAt(0)?i:n)[l]||(u[l]=s)}c&&(IS.extendFlat(g,u),u={});var F={},f=[];for(o in g){var Q=DS(t,o);f.push(Q),F[Q._id]=Q}var I={},U=[];for(l in u){var b=DS(t,l);U.push(b),I[b._id]=b}return{xaHash:F,yaHash:I,xaxes:f,yaxes:U,xLinks:g,yLinks:u,isSubplotConstrained:c}}function $S(t){var e=[];for(var i in t)e.push(t[i]);return e}var tw=function(t,e,i,n,r,a,s,o){var l,c,g,u,d,h,B,p,F,f,Q,I,U,b,y,m,x,v,C,A,L,G,R,S=t._fullLayout._zoomlayer,w=s+o==="nsew",V=1===(s+o).length;function E(){if(l=e.xaxis,c=e.yaxis,F=l._length,f=c._length,B=l._offset,p=c._offset,(g={})[l._id]=l,(u={})[c._id]=c,s&&o)for(var i=e.overlays,n=0;n<i.length;n++){var r=i[n].xaxis;g[r._id]=r;var a=i[n].yaxis;u[a._id]=a}d=$S(g),h=$S(u),U=_S(d,o),b=_S(h,s),y=!b&&!U,I=qS(t,t._fullLayout._axisMatchGroups,g,u);var L=(Q=qS(t,t._fullLayout._axisConstraintGroups,g,u,I)).isSubplotConstrained||I.isSubplotConstrained;m=o||L,x=s||L;var G=t._fullLayout;v=G._has("scattergl"),C=G._has("splom"),A=G._has("svg")}i+=e.yaxis._shift,E();var Z=function(t,e,i){if(!t)return"pointer";if("nsew"===t)return i?"":"pan"===e?"move":"crosshair";return t.toLowerCase()+"-resize"}(b+U,t._fullLayout.dragmode,w),N=function(t,e,i,n,r,a,s){var o=function(t,e,i,n){var r=IS.ensureSingle(t.draglayer,e,i,(function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)}));return r.call(GS,n),r.node()}(t,"rect",e,i);return QS.select(o).call(CS.setRect,n,r,a,s),o}(e,s+o+"drag",Z,i,n,r,a);if(y&&!w)return N.onmousedown=null,N.style.pointerEvents="none",N;var D,X,H,W,k,M,T,Y,J,_,z={element:N,gd:t,plotinfo:e};function O(){z.plotinfo.selection=!1,HS(t)}function K(t,i){var n=z.gd;if(n._fullLayout._activeShapeIndex>=0)n._fullLayout._deactivateShape(n);else{var r=n._fullLayout.clickmode;if(PS(n),2!==t||V||lt(),w)r.indexOf("select")>-1&&WS(i,n,d,h,e.id,z),r.indexOf("event")>-1&&AS.click(n,i,e.id);else if(1===t&&V){var a=s?c:l,g="s"===s||"w"===o?0:1,u=a._name+".range["+g+"]",B=function(t,e){var i,n=t.range[e],r=Math.abs(n-t.range[1-e]);return"date"===t.type?n:"log"===t.type?(i=Math.ceil(Math.max(0,-Math.log(r)/Math.LN10))+3,US("."+i+"g")(Math.pow(10,n))):(i=Math.floor(Math.log(Math.abs(n))/Math.LN10)-Math.floor(Math.log(r)/Math.LN10)+4,US("."+String(i)+"g")(n))}(a,g),p="left",F="middle";if(a.fixedrange)return;s?(F="n"===s?"top":"bottom","right"===a.side&&(p="right")):"e"===o&&(p="right"),n._context.showAxisRangeEntryBoxes&&QS.select(N).call(xS.makeEditable,{gd:n,immediate:!0,background:n._fullLayout.paper_bgcolor,text:String(B),fill:a.tickfont?a.tickfont.color:"#444",horizontalAlign:p,verticalAlign:F}).on("edit",(function(t){var e=a.d2r(t);void 0!==e&&yS.call("_guiRelayout",n,u,e)}))}}}function P(e,i){if(t._transitioningWithDuration)return!1;var n=Math.max(0,Math.min(F,G*e+D)),r=Math.max(0,Math.min(f,R*i+X)),a=Math.abs(n-D),s=Math.abs(r-X);function o(){T="",H.r=H.l,H.t=H.b,J.attr("d","M0,0Z")}if(H.l=Math.min(D,n),H.r=Math.max(D,n),H.t=Math.min(X,r),H.b=Math.max(X,r),Q.isSubplotConstrained)a>YS||s>YS?(T="xy",a/F>s/f?(s=a*f/F,X>r?H.t=X-s:H.b=X+s):(a=s*F/f,D>n?H.l=D-a:H.r=D+a),J.attr("d",jS(H))):o();else if(I.isSubplotConstrained)if(a>YS||s>YS){T="xy";var l=Math.min(H.l/F,(f-H.b)/f),c=Math.max(H.r/F,(f-H.t)/f);H.l=l*F,H.r=c*F,H.b=(1-l)*f,H.t=(1-c)*f,J.attr("d",jS(H))}else o();else!b||s<Math.min(Math.max(.6*a,TS),YS)?a<TS||!U?o():(H.t=0,H.b=f,T="x",J.attr("d",function(t,e){return"M"+(t.l-.5)+","+(e-YS-.5)+"h-3v"+(2*YS+1)+"h3ZM"+(t.r+.5)+","+(e-YS-.5)+"h3v"+(2*YS+1)+"h-3Z"}(H,X))):!U||a<Math.min(.6*s,YS)?(H.l=0,H.r=F,T="y",J.attr("d",function(t,e){return"M"+(e-YS-.5)+","+(t.t-.5)+"v-3h"+(2*YS+1)+"v3ZM"+(e-YS-.5)+","+(t.b+.5)+"v3h"+(2*YS+1)+"v-3Z"}(H,D))):(T="xy",J.attr("d",jS(H)));H.w=H.r-H.l,H.h=H.b-H.t,T&&(_=!0),t._dragged=_,function(t,e,i,n,r,a){t.attr("d",n+"M"+i.l+","+i.t+"v"+i.h+"h"+i.w+"v-"+i.h+"h-"+i.w+"Z"),function(t,e,i,n){i||(t.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}(t,e,r,a)}(Y,J,H,k,M,W),j(),t.emit("plotly_relayouting",L),M=!0}function j(){L={},"xy"!==T&&"x"!==T||(zS(d,H.l/F,H.r/F,L,Q.xaxes),st("x",L)),"xy"!==T&&"y"!==T||(zS(h,(f-H.b)/f,(f-H.t)/f,L,Q.yaxes),st("y",L))}function q(){j(),PS(t),ct(),function(t){JS&&t.data&&t._context.showTips&&(IS.notifier(IS._(t,"Double-click to zoom back out"),"long"),JS=!1)}(t)}z.prepFn=function(e,i,n){var r=z.dragmode,a=t._fullLayout.dragmode;a!==r&&(z.dragmode=a),E(),G=t._fullLayout._invScaleX,R=t._fullLayout._invScaleY,y||(w?e.shiftKey?"pan"===a?a="zoom":SS(a)||(a="pan"):e.ctrlKey&&(a="pan"):a="pan"),wS(a)?z.minDrag=1:z.minDrag=void 0,SS(a)?(z.xaxes=d,z.yaxes=h,XS(e,i,n,z,a)):(z.clickFn=K,SS(r)&&O(),y||("zoom"===a?(z.moveFn=P,z.doneFn=q,z.minDrag=1,function(e,i,n){var r=N.getBoundingClientRect();D=i-r.left,X=n-r.top,t._fullLayout._calcInverseTransform(t);var a=IS.apply3DTransform(t._fullLayout._invTransform)(D,X);D=a[0],X=a[1],H={l:D,r:D,w:0,t:X,b:X,h:0},W=t._hmpixcount?t._hmlumcount/t._hmpixcount:bS(t._fullLayout.plot_bgcolor).getLuminance(),M=!1,T="xy",_=!1,Y=function(t,e,i,n,r){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",mS(i,n)).attr("d",r+"Z")}(S,W,B,p,k="M0,0H"+F+"V"+f+"H0V0"),J=function(t,e,i){return t.append("path").attr("class","zoombox-corners").style({fill:vS.background,stroke:vS.defaultLine,"stroke-width":1,opacity:0}).attr("transform",mS(e,i)).attr("d","M0,0Z")}(S,B,p)}(0,i,n)):"pan"===a&&(z.moveFn=at,z.doneFn=ct))),t._fullLayout._redrag=function(){var e=t._dragdata;if(e&&e.element===N){var i=t._fullLayout.dragmode;SS(i)||(E(),gt([0,0,F,f]),z.moveFn(e.dx,e.dy))}}},RS.init(z);var $,tt,et=[0,0,F,f],it=null,nt=MS.REDRAWDELAY,rt=e.mainplot?t._fullLayout._plots[e.mainplot]:e;function at(e,i){if(e*=G,i*=R,!t._transitioningWithDuration){if(t._fullLayout._replotting=!0,"ew"===U||"ns"===b){var n=U?-e:0,r=b?-i:0;if(I.isSubplotConstrained){if(U&&b){var a=(e/F-i/f)/2;n=-(e=a*F),r=-(i=-a*f)}b?n=-r*F/f:r=-n*f/F}return U&&(OS(d,e),st("x")),b&&(OS(h,i),st("y")),gt([n,r,F,f]),ot(),void t.emit("plotly_relayouting",L)}var s,o,l="w"===U==("n"===b)?1:-1;if(U&&b&&(Q.isSubplotConstrained||I.isSubplotConstrained)){var c=(e/F+l*i/f)/2;e=c*F,i=l*c*f}if("w"===U?e=p(d,0,e):"e"===U?e=p(d,1,-e):U||(e=0),"n"===b?i=p(h,1,i):"s"===b?i=p(h,0,-i):b||(i=0),s="w"===U?e:0,o="n"===b?i:0,Q.isSubplotConstrained&&!I.isSubplotConstrained||I.isSubplotConstrained&&U&&b&&l>0){var g;if(I.isSubplotConstrained||!U&&1===b.length){for(g=0;g<d.length;g++)d[g].range=d[g]._r.slice(),kS(d[g],1-i/f);s=(e=i*F/f)/2}if(I.isSubplotConstrained||!b&&1===U.length){for(g=0;g<h.length;g++)h[g].range=h[g]._r.slice(),kS(h[g],1-e/F);o=(i=e*f/F)/2}}I.isSubplotConstrained&&b||st("x"),I.isSubplotConstrained&&U||st("y");var u=F-e,B=f-i;!I.isSubplotConstrained||U&&b||(U?(o=s?0:e*f/F,B=u*f/F):(s=o?0:i*F/f,u=B*F/f)),gt([s,o,u,B]),ot(),t.emit("plotly_relayouting",L)}function p(t,e,i){for(var n,r,a=1-e,s=0;s<t.length;s++){var o=t[s];if(!o.fixedrange){n=o,r=o._rl[a]+(o._rl[e]-o._rl[a])/KS(i/o._length);var l=o.l2r(r);!1!==l&&void 0!==l&&(o.range[e]=l)}}return n._length*(n._rl[e]-r)/(n._rl[e]-n._rl[a])}}function st(t,e){for(var i=I.isSubplotConstrained?{x:h,y:d}[t]:I[t+"axes"],n=I.isSubplotConstrained?{x:d,y:h}[t]:[],r=0;r<i.length;r++){var a=i[r],s=a._id,o=I.xLinks[s]||I.yLinks[s],l=n[0]||g[o]||u[o];l&&(e?(e[a._name+".range[0]"]=e[l._name+".range[0]"],e[a._name+".range[1]"]=e[l._name+".range[1]"]):a.range=l.range.slice())}}function ot(){var i,n=[];function r(t){for(i=0;i<t.length;i++)t[i].fixedrange||n.push(t[i]._id)}function a(t,e){for(i=0;i<t.length;i++){var r=t[i],a=r[e];r.fixedrange||"sync"!==a.tickmode||n.push(a._id)}}for(m&&(r(d),r(Q.xaxes),r(I.xaxes),a(e.overlays,"xaxis")),x&&(r(h),r(Q.yaxes),r(I.yaxes),a(e.overlays,"yaxis")),L={},i=0;i<n.length;i++){var s=n[i],o=DS(t,s);LS.drawOne(t,o,{skipTitle:!0}),L[o._name+".range[0]"]=o.range[0],L[o._name+".range[1]"]=o.range[1]}LS.redrawComponents(t,n)}function lt(){if(!t._transitioningWithDuration){var e=t._context.doubleClick,i=[];U&&(i=i.concat(d)),b&&(i=i.concat(h)),I.xaxes&&(i=i.concat(I.xaxes)),I.yaxes&&(i=i.concat(I.yaxes));var n,r,a={};if("reset+autosize"===e)for(e="autosize",r=0;r<i.length;r++){var s=(n=i[r])._rangeInitial0,o=n._rangeInitial1,l=void 0!==s||void 0!==o;if(l&&(void 0!==s&&s!==n.range[0]||void 0!==o&&o!==n.range[1])||!l&&!0!==n.autorange){e="reset";break}}if("autosize"===e)for(r=0;r<i.length;r++)(n=i[r]).fixedrange||(a[n._name+".autorange"]=!0);else if("reset"===e)for((U||Q.isSubplotConstrained)&&(i=i.concat(Q.xaxes)),b&&!Q.isSubplotConstrained&&(i=i.concat(Q.yaxes)),Q.isSubplotConstrained&&(U?b||(i=i.concat(h)):i=i.concat(d)),r=0;r<i.length;r++)if(!(n=i[r]).fixedrange){var c=n._name,g=n._autorangeInitial;void 0===n._rangeInitial0&&void 0===n._rangeInitial1?a[c+".autorange"]=!0:void 0===n._rangeInitial0?(a[c+".autorange"]=g,a[c+".range"]=[null,n._rangeInitial1]):void 0===n._rangeInitial1?(a[c+".range"]=[n._rangeInitial0,null],a[c+".autorange"]=g):a[c+".range"]=[n._rangeInitial0,n._rangeInitial1]}t.emit("plotly_doubleclick",null),yS.call("_guiRelayout",t,a)}}function ct(){gt([0,0,F,f]),IS.syncOrAsync([NS.previousPromises,function(){t._fullLayout._replotting=!1,yS.call("_guiRelayout",t,L)}],t)}function gt(e){var i,n,r,a,d=t._fullLayout,h=d._plots,B=d._subplots.cartesian;if(C&&yS.subplotsRegistry.splom.drag(t),v)for(i=0;i<B.length;i++)if(r=(n=h[B[i]]).xaxis,a=n.yaxis,n._scene){r.limitRange&&r.limitRange(),a.limitRange&&a.limitRange();var p=IS.simpleMap(r.range,r.r2l),F=IS.simpleMap(a.range,a.r2l);n._scene.update({range:[p[0],F[0],p[1],F[1]]})}if((C||v)&&(ES(t),ZS(t)),A){var f=e[2]/l._length,Q=e[3]/c._length;for(i=0;i<B.length;i++){r=(n=h[B[i]]).xaxis,a=n.yaxis;var y,L,G,R,S=(m||I.isSubplotConstrained)&&!r.fixedrange&&g[r._id],w=(x||I.isSubplotConstrained)&&!a.fixedrange&&u[a._id];if(S?(y=f,G=o||I.isSubplotConstrained?e[0]:ht(r,y)):I.xaHash[r._id]?(y=f,G=e[0]*r._length/l._length):I.yaHash[r._id]?(y=Q,G="ns"===b?-e[1]*r._length/c._length:ht(r,y,{n:"top",s:"bottom"}[b])):G=dt(r,y=ut(r,f,Q)),y>1&&(void 0!==r.maxallowed&&m===(r.range[0]<r.range[1]?"e":"w")||void 0!==r.minallowed&&m===(r.range[0]<r.range[1]?"w":"e"))&&(y=1,G=0),w?(L=Q,R=s||I.isSubplotConstrained?e[1]:ht(a,L)):I.yaHash[a._id]?(L=Q,R=e[1]*a._length/c._length):I.xaHash[a._id]?(L=f,R="ew"===U?-e[0]*a._length/l._length:ht(a,L,{e:"right",w:"left"}[U])):R=dt(a,L=ut(a,f,Q)),L>1&&(void 0!==a.maxallowed&&x===(a.range[0]<a.range[1]?"n":"s")||void 0!==a.minallowed&&x===(a.range[0]<a.range[1]?"s":"n"))&&(L=1,R=0),y||L){y||(y=1),L||(L=1);var V=r._offset-G/y,E=a._offset-R/L;n.clipRect.call(CS.setTranslate,G,R).call(CS.setScale,y,L),n.plot.call(CS.setTranslate,V,E).call(CS.setScale,1/y,1/L),y===n.xScaleFactor&&L===n.yScaleFactor||(CS.setPointGroupScale(n.zoomScalePts,y,L),CS.setTextPointsScale(n.zoomScaleTxt,y,L)),CS.hideOutsideRangePoints(n.clipOnAxisFalseTraces,n),n.xScaleFactor=y,n.yScaleFactor=L}}}}function ut(t,e,i){return t.fixedrange?0:m&&Q.xaHash[t._id]?e:x&&(Q.isSubplotConstrained?Q.xaHash:Q.yaHash)[t._id]?i:0}function dt(t,e){return e?(t.range=t._r.slice(),kS(t,e),ht(t,e)):0}function ht(t,e,i){return t._length*(1-e)*VS[i||t.constraintoward||"middle"]}return s.length*o.length!=1&&(tt=function(e){if(t._context._scrollZoom.cartesian||t._fullLayout._enablescrollzoom){if(O(),t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();E(),clearTimeout(it);var i=-e.deltaY;if(isFinite(i)||(i=e.wheelDelta/10),isFinite(i)){var n,r=Math.exp(-Math.min(Math.max(i,-20),20)/200),a=rt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(e.clientX-a.left)/a.width,c=(a.bottom-e.clientY)/a.height;if(m){for(o||(l=.5),n=0;n<d.length;n++)g(d[n],l,r);st("x"),et[2]*=r,et[0]+=et[2]*l*(1/r-1)}if(x){for(s||(c=.5),n=0;n<h.length;n++)g(h[n],c,r);st("y"),et[3]*=r,et[1]+=et[3]*(1-c)*(1/r-1)}gt(et),ot(),t.emit("plotly_relayouting",L),it=setTimeout((function(){t._fullLayout&&(et=[0,0,F,f],ct())}),nt),e.preventDefault()}else IS.log("Did not find wheel motion attributes: ",e)}function g(t,e,i){if(!t.fixedrange){var n=IS.simpleMap(t.range,t.r2l),r=n[0]+(n[1]-n[0])*e;t.range=n.map((function(e){return t.l2r(r+(e-r)*i)}))}}},void 0!==($=N).onwheel?$.onwheel=tt:void 0!==$.onmousewheel?$.onmousewheel=tt:$.isAddedWheelEvent||($.isAddedWheelEvent=!0,$.addEventListener("wheel",tt,{passive:!1}))),N};!function(t){var e=Js,i=Wv,n=nm,r=am,a=tw,s=Np.DRAGGERSIZE;t.initInteractions=function(r){var o=r._fullLayout;if(r._context.staticPlot)e.select(r).selectAll(".drag").remove();else if(o._has("cartesian")||o._has("splom")){var l=Object.keys(o._plots||{}).sort((function(t,e){if((o._plots[t].mainplot&&!0)===(o._plots[e].mainplot&&!0)){var i=t.split("y"),n=e.split("y");return i[0]===n[0]?Number(i[1]||1)-Number(n[1]||1):Number(i[0]||1)-Number(n[0]||1)}return o._plots[t].mainplot?1:-1}));l.forEach((function(t){var e=o._plots[t],l=e.xaxis,c=e.yaxis;if(!e.mainplot){var g=a(r,e,l._offset,c._offset,l._length,c._length,"ns","ew");g.onmousemove=function(e){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===t&&r._fullLayout._plots[t]&&i.hover(r,e,t)},i.hover(r,e,t),r._fullLayout._lasthover=g,r._fullLayout._hoversubplot=t},g.onmouseout=function(t){r._dragging||(r._fullLayout._hoversubplot=null,n.unhover(r,t))},r._context.showAxisDragHandles&&(a(r,e,l._offset-s,c._offset-s,s,s,"n","w"),a(r,e,l._offset+l._length,c._offset-s,s,s,"n","e"),a(r,e,l._offset-s,c._offset+c._length,s,s,"s","w"),a(r,e,l._offset+l._length,c._offset+c._length,s,s,"s","e"))}if(r._context.showAxisDragHandles){if(t===l._mainSubplot){var u=l._mainLinePosition;"top"===l.side&&(u-=s),a(r,e,l._offset+.1*l._length,u,.8*l._length,s,"","ew"),a(r,e,l._offset,u,.1*l._length,s,"","w"),a(r,e,l._offset+.9*l._length,u,.1*l._length,s,"","e")}if(t===c._mainSubplot){var d=c._mainLinePosition;"right"!==c.side&&(d-=s),a(r,e,d,c._offset+.1*c._length,s,.8*c._length,"ns",""),a(r,e,d,c._offset+.9*c._length,s,.1*c._length,"s",""),a(r,e,d,c._offset,s,.1*c._length,"n","")}}}));var c=o._hoverlayer.node();c.onmousemove=function(t){t.target=r._fullLayout._lasthover,i.hover(r,t,o._hoversubplot)},c.onclick=function(t){t.target=r._fullLayout._lasthover,i.click(r,t)},c.onmousedown=function(t){r._fullLayout._lasthover.onmousedown(t)},t.updateFx(r)}},t.updateFx=function(t){var e=t._fullLayout,i="pan"===e.dragmode?"move":"crosshair";r(e._draggers,i)}}(Ny);var ew={},iw=Nu,nw=og,rw=Du,aw=Zu,sw=bh.sorterAsc,ow=Nu;ew.containerArrayMatch=function(t){for(var e,i,n=iw.layoutArrayContainers,r=iw.layoutArrayRegexes,a=t.split("[")[0],s=0;s<r.length;s++)if((i=t.match(r[s]))&&0===i.index){e=i[0];break}if(e||(e=n[n.indexOf(a)]),!e)return!1;var o=t.substr(e.length);return o?!!(i=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(i[1]),property:i[3]||""}:{array:e,index:"",property:""}};var lw=ew.isAddVal=function(t){return"add"===t||nw(t)},cw=ew.isRemoveVal=function(t){return null===t||"remove"===t};ew.applyContainerArrayChanges=function(t,e,i,n,r){var a=e.astr,s=ow.getComponentMethod(a,"supplyLayoutDefaults"),o=ow.getComponentMethod(a,"draw"),l=ow.getComponentMethod(a,"drawOne"),c=n.replot||n.recalc||s===rw||o===rw,g=t.layout,u=t._fullLayout;if(i[""]){Object.keys(i).length>1&&aw.warn("Full array edits are incompatible with other edits",a);var d=i[""][""];if(cw(d))e.set(null);else{if(!Array.isArray(d))return aw.warn("Unrecognized full array edit value",a,d),!0;e.set(d)}return!c&&(s(g,u),o(t),!0)}var h,B,p,F,f,Q,I,U,b=Object.keys(i).map(Number).sort(sw),y=e.get(),m=y||[],x=r(u,a).get(),v=[],C=-1,A=m.length;for(h=0;h<b.length;h++)if(F=i[p=b[h]],f=Object.keys(F),Q=F[""],I=lw(Q),p<0||p>m.length-(I?0:1))aw.warn("index out of range",a,p);else if(void 0!==Q)f.length>1&&aw.warn("Insertion & removal are incompatible with edits to the same index.",a,p),cw(Q)?v.push(p):I?("add"===Q&&(Q={}),m.splice(p,0,Q),x&&x.splice(p,0,{})):aw.warn("Unrecognized full object edit value",a,p,Q),-1===C&&(C=p);else for(B=0;B<f.length;B++)U=a+"["+p+"].",r(m[p],f[B],U).set(F[f[B]]);for(h=v.length-1;h>=0;h--)m.splice(v[h],1),x&&x.splice(v[h],1);if(m.length?y||e.set(m):e.set(null),c)return!1;if(s(g,u),l!==rw){var L;if(-1===C)L=b;else{for(A=Math.max(m.length,A),L=[],h=0;h<b.length&&!((p=b[h])>=C);h++)L.push(p);for(h=C;h<A;h++)L.push(h)}for(h=0;h<L.length;h++)l(t,L[h])}else o(t);return!0};var gw={};!function(t){var e=$c,i=Nu,n=_B,r=yF,a=Ep,s=Uu,o=a.cleanId,l=a.getFromTrace,c=i.traceIs;function g(t,e){var i=t[e],n=e.charAt(0);i&&"paper"!==i&&(t[e]=o(i,n,!0))}function u(t){if(!n.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function d(t,e,i,n){if(i&&!n)return t;if(n&&!i)return e;if(!t.trim())return e;if(!e.trim())return t;var r,a=Math.min(t.length,e.length);for(r=0;r<a&&t.charAt(r)===e.charAt(r);r++);return t.substr(0,r).trim()}function h(t){var e="middle",i="center";return"string"==typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?i="left":-1!==t.indexOf("right")&&(i="right")),e+" "+i}function B(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}t.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&n.log("Clearing previous rejected promises from queue."),t._promises=[]},t.cleanLayout=function(e){var i;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var a=(r.subplotsRegistry.cartesian||{}).attrRegex;(r.subplotsRegistry.polar||{}).attrRegex,(r.subplotsRegistry.ternary||{}).attrRegex,(r.subplotsRegistry.gl3d||{}).attrRegex;var l=Object.keys(e);for(i=0;i<l.length;i++){var c=l[i];if(a&&a.test(c)){var u=e[c];u.anchor&&"free"!==u.anchor&&(u.anchor=o(u.anchor)),u.overlaying&&(u.overlaying=o(u.overlaying)),u.type||(u.isdate?u.type="date":u.islog?u.type="log":!1===u.isdate&&!1===u.islog&&(u.type="linear")),"withzero"!==u.autorange&&"tozero"!==u.autorange||(u.autorange=!0,u.rangemode="tozero"),u.insiderange&&delete u.range,delete u.islog,delete u.isdate,delete u.categories,B(u,"domain")&&delete u.domain}}var d=Array.isArray(e.annotations)?e.annotations.length:0;for(i=0;i<d;i++){var h=e.annotations[i];n.isPlainObject(h)&&(g(h,"xref"),g(h,"yref"))}var p=Array.isArray(e.shapes)?e.shapes.length:0;for(i=0;i<p;i++){var F=e.shapes[i];n.isPlainObject(F)&&(g(F,"xref"),g(F,"yref"))}var f=Array.isArray(e.images)?e.images.length:0;for(i=0;i<f;i++){var Q=e.images[i];n.isPlainObject(Q)&&(g(Q,"xref"),g(Q,"yref"))}var I=e.legend;return I&&(I.x>3?(I.x=1.02,I.xanchor="left"):I.x<-2&&(I.x=-.02,I.xanchor="right"),I.y>3?(I.y=1.02,I.yanchor="bottom"):I.y<-2&&(I.y=-.02,I.yanchor="top")),"rotate"===e.dragmode&&(e.dragmode="orbit"),s.clean(e),e.template&&e.template.layout&&t.cleanLayout(e.template.layout),e},t.cleanData=function(e){for(var a=0;a<e.length;a++){var l,g=e[a];if("histogramy"===g.type&&"xbins"in g&&!("ybins"in g)&&(g.ybins=g.xbins,delete g.xbins),"histogramy"===g.type&&t.swapXYData(g),"histogramx"!==g.type&&"histogramy"!==g.type||(g.type="histogram"),"scl"in g&&!("colorscale"in g)&&(g.colorscale=g.scl,delete g.scl),"reversescl"in g&&!("reversescale"in g)&&(g.reversescale=g.reversescl,delete g.reversescl),g.xaxis&&(g.xaxis=o(g.xaxis,"x")),g.yaxis&&(g.yaxis=o(g.yaxis,"y")),c(g,"gl3d")&&g.scene&&(g.scene=r.subplotsRegistry.gl3d.cleanId(g.scene)),!c(g,"pie-like")&&!c(g,"bar-like"))if(Array.isArray(g.textposition))for(l=0;l<g.textposition.length;l++)g.textposition[l]=h(g.textposition[l]);else g.textposition&&(g.textposition=h(g.textposition));var p=i.getModule(g);if(p&&p.colorbar){var F=p.colorbar.container,f=F?g[F]:g;f&&f.colorscale&&("YIGnBu"===f.colorscale&&(f.colorscale="YlGnBu"),"YIOrRd"===f.colorscale&&(f.colorscale="YlOrRd"))}if("surface"===g.type&&n.isPlainObject(g.contours)){var Q=["x","y","z"];for(l=0;l<Q.length;l++){var I=g.contours[Q[l]];n.isPlainObject(I)&&(I.highlightColor&&(I.highlightcolor=I.highlightColor,delete I.highlightColor),I.highlightWidth&&(I.highlightwidth=I.highlightWidth,delete I.highlightWidth))}}if("candlestick"===g.type||"ohlc"===g.type){var U=!1!==(g.increasing||{}).showlegend,b=!1!==(g.decreasing||{}).showlegend,y=u(g.increasing),m=u(g.decreasing);if(!1!==y&&!1!==m){var x=d(y,m,U,b);x&&(g.name=x)}else!y&&!m||g.name||(g.name=y||m)}B(g,"line")&&delete g.line,"marker"in g&&(B(g.marker,"line")&&delete g.marker.line,B(g,"marker")&&delete g.marker),s.clean(g),g.autobinx&&(delete g.autobinx,delete g.xbins),g.autobiny&&(delete g.autobiny,delete g.ybins)}},t.swapXYData=function(t){var e;if(n.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var i=t.error_y,r="copy_ystyle"in i?i.copy_ystyle:!(i.color||i.thickness||i.width);n.swapAttrs(t,["error_?.copy_ystyle"]),r&&n.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var a=t.hoverinfo.split("+");for(e=0;e<a.length;e++)"x"===a[e]?a[e]="y":"y"===a[e]&&(a[e]="x");t.hoverinfo=a.join("+")}},t.coerceTraceIndices=function(t,i){if(e(i))return[i];if(!Array.isArray(i)||!i.length)return t.data.map((function(t,e){return e}));if(Array.isArray(i)){for(var r=[],a=0;a<i.length;a++)n.isIndex(i[a],t.data.length)?r.push(i[a]):n.warn("trace index (",i[a],") is not a number or is out of bounds");return r}return i},t.manageArrayContainers=function(t,i,r){var a=t.obj,s=t.parts,o=s.length,l=s[o-1],c=e(l);if(c&&null===i){var g=s.slice(0,o-1).join(".");n.nestedProperty(a,g).get().splice(l,1)}else c&&void 0===t.get()?(void 0===t.get()&&(r[t.astr]=null),t.set(i)):t.set(i)};var p=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function F(t){var e=t.search(p);if(e>0)return t.substr(0,e)}t.hasParent=function(t,e){for(var i=F(e);i;){if(i in t)return!0;i=F(i)}return!1};var f=["x","y","z"];t.clearAxisTypes=function(t,e,i){for(var r=0;r<e.length;r++)for(var a=t._fullData[r],s=0;s<3;s++){var o=l(t,a,f[s]);if(o&&"log"!==o.type){var c=o._name,g=o._id.substr(1);if("scene"===g.substr(0,5)){if(void 0!==i[g])continue;c=g+"."+c}var u=c+".type";void 0===i[c]&&void 0===i[u]&&n.nestedProperty(t.layout,u).set(null)}}}}(gw),function(t){var e=Js,i=$c,n=tp,r=_B,a=r.nestedProperty,s=Ip,o=mp,l=Nu,c=xp,g=yF,u=Vy,d=Zy,h=If,B=jI,p=Uu,F=Ny.initInteractions,f=vF,Q=fS.clearOutline,I=Au.dfltConfig,U=ew,b=gw,y=Tv,m=wd,x=Np.AX_NAME_PATTERN,v=0;function C(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function A(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){r.error(t)}}function L(t,e){A(t,p.combine(e,"white"))}function G(t,i){if(!t._context){t._context=r.extendDeep({},I);var a=e.select("base");t._context._baseUrl=a.size()&&a.attr("href")?window.location.href.split("#")[0]:""}var s,o,l,c=t._context;if(i){for(o=Object.keys(i),s=0;s<o.length;s++)"editable"!==(l=o[s])&&"edits"!==l&&l in c&&("setBackground"===l&&"opaque"===i[l]?c[l]=L:c[l]=i[l]);var g=i.editable;if(void 0!==g)for(c.editable=g,o=Object.keys(c.edits),s=0;s<o.length;s++)c.edits[o[s]]=g;if(i.edits)for(o=Object.keys(i.edits),s=0;s<o.length;s++)(l=o[s])in c.edits&&(c.edits[l]=i.edits[l]);c._exportedPlot=i._exportedPlot}c.staticPlot&&(c.editable=!1,c.edits={},c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1),"hover"!==c.displayModeBar||n||(c.displayModeBar=!0),"transparent"!==c.setBackground&&"function"==typeof c.setBackground||(c.setBackground=A),c._hasZeroHeight=c._hasZeroHeight||0===t.clientHeight,c._hasZeroWidth=c._hasZeroWidth||0===t.clientWidth;var u=c.scrollZoom,d=c._scrollZoom={};if(!0===u)d.cartesian=1,d.gl3d=1,d.geo=1,d.mapbox=1,d.map=1;else if("string"==typeof u){var h=u.split("+");for(s=0;s<h.length;s++)d[h[s]]=1}else!1!==u&&(d.gl3d=1,d.geo=1,d.mapbox=1,d.map=1)}function R(t,e){var i,n,r=e+1,a=[];for(i=0;i<t.length;i++)(n=t[i])<0?a.push(r+n):a.push(n);return a}function S(t,e,i){var n,r;for(n=0;n<e.length;n++){if((r=e[n])!==parseInt(r,10))throw new Error("all values in "+i+" must be integers");if(r>=t.data.length||r<-t.data.length)throw new Error(i+" must be valid indices for gd.data.");if(e.indexOf(r,n+1)>-1||r>=0&&e.indexOf(-t.data.length+r)>-1||r<0&&e.indexOf(t.data.length+r)>-1)throw new Error("each index in "+i+" must be unique.")}}function w(t,e,i){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),S(t,e,"currentIndices"),void 0===i||Array.isArray(i)||(i=[i]),void 0!==i&&S(t,i,"newIndices"),void 0!==i&&e.length!==i.length)throw new Error("current and new indices must be of equal length.")}function V(t,e,n,s,o){!function(t,e,i,n){var a=r.isPlainObject(n);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!r.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===i)throw new Error("indices must be an integer or array of integers");for(var s in S(t,i,"indices"),e){if(!Array.isArray(e[s])||e[s].length!==i.length)throw new Error("attribute "+s+" must be an array of length equal to indices array length");if(a&&(!(s in n)||!Array.isArray(n[s])||n[s].length!==e[s].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,n,s);for(var l=function(t,e,n,s){var o,l,c,g,u,d=r.isPlainObject(s),h=[];for(var B in Array.isArray(n)||(n=[n]),n=R(n,t.data.length-1),e)for(var p=0;p<n.length;p++){if(o=t.data[n[p]],l=(c=a(o,B)).get(),g=e[B][p],!r.isArrayOrTypedArray(g))throw new Error("attribute: "+B+" index: "+p+" must be an array");if(!r.isArrayOrTypedArray(l))throw new Error("cannot extend missing or non-array attribute: "+B);if(l.constructor!==g.constructor)throw new Error("cannot extend array with an array of a different type: "+B);u=d?s[B][p]:s,i(u)||(u=-1),h.push({prop:c,target:l,insert:g,maxp:Math.floor(u)})}return h}(t,e,n,s),c={},g={},u=0;u<l.length;u++){var d=l[u].prop,h=l[u].maxp,B=o(l[u].target,l[u].insert,h);d.set(B[0]),Array.isArray(c[d.astr])||(c[d.astr]=[]),c[d.astr].push(B[1]),Array.isArray(g[d.astr])||(g[d.astr]=[]),g[d.astr].push(l[u].target.length)}return{update:c,maxPoints:g}}function E(t,e){var i=new t.constructor(t.length+e.length);return i.set(t),i.set(e,t.length),i}function Z(e,i,n,a){e=r.getGraphDiv(e),b.clearPromiseQueue(e);var s={};if("string"==typeof i)s[i]=n;else{if(!r.isPlainObject(i))return r.warn("Restyle fail.",i,n,a),Promise.reject();s=r.extendFlat({},i),void 0===a&&(a=n)}Object.keys(s).length&&(e.changed=!0);var l=b.coerceTraceIndices(e,a),c=H(e,s,l),u=c.flags;u.calc&&(e.calcdata=void 0),u.clearAxisTypes&&b.clearAxisTypes(e,l,{});var d=[];u.fullReplot?d.push(t._doPlot):(d.push(g.previousPromises),g.supplyDefaults(e),u.markerSize&&(g.doCalcdata(e),M(d)),u.style&&d.push(y.doTraceStyle),u.colorbars&&d.push(y.doColorBars),d.push(C)),d.push(g.rehover,g.redrag,g.reselect),o.add(e,Z,[e,c.undoit,c.traces],Z,[e,c.redoit,c.traces]);var h=r.syncOrAsync(d,e);return h&&h.then||(h=Promise.resolve()),h.then((function(){return e.emit("plotly_restyle",c.eventData),e}))}function N(t){return void 0===t?null:t}function D(t,e){return e?function(e,i,n){var r=a(e,i),s=r.set;return r.set=function(e){X((n||"")+i,r.get(),e,t),s(e)},r}:a}function X(t,e,i,n){if(Array.isArray(e)||Array.isArray(i))for(var a=Array.isArray(e)?e:[],s=Array.isArray(i)?i:[],o=Math.max(a.length,s.length),l=0;l<o;l++)X(t+"["+l+"]",a[l],s[l],n);else if(r.isPlainObject(e)||r.isPlainObject(i)){var c=r.isPlainObject(e)?e:{},g=r.isPlainObject(i)?i:{},u=r.extendFlat({},c,g);for(var d in u)X(t+"."+d,c[d],g[d],n)}else void 0===n[t]&&(n[t]=N(e))}function H(t,e,i){var n,s,o=t._fullLayout,d=t._fullData,h=t.data,B=o._guiEditing,p=D(o._preGUI,B),F=r.extendDeepAll({},e),f=m.traceFlags(),Q={},I={};function U(){return i.map((function(){}))}function y(t){var e=u.id2name(t);-1===s.indexOf(e)&&s.push(e)}function x(t){return"LAYOUT"+t+".autorange"}function v(t){return"LAYOUT"+t+".range"}function C(t){for(var e=t;e<d.length;e++)if(d[e]._input===h[t])return d[e]}function A(n,r,a){if(Array.isArray(n))n.forEach((function(t){A(t,r,a)}));else if(!(n in e)&&!b.hasParent(e,n)){var s;if("LAYOUT"===n.substr(0,6))s=p(t.layout,n.replace("LAYOUT",""));else{var l=i[a];s=D(o._tracePreGUI[C(l)._fullInput.uid],B)(h[l],n)}n in I||(I[n]=U()),void 0===I[n][a]&&(I[n][a]=N(s.get())),void 0!==r&&s.set(r)}}function L(t){return function(e){return d[e][t]}}function G(t){return function(e,n){return!1===e?d[i[n]][t]:null}}for(var R in e){if(b.hasParent(e,R))throw new Error("cannot set "+R+" and a parent attribute simultaneously");var S,w,V,E,Z,X,H=e[R];if("autobinx"!==R&&"autobiny"!==R||(R=R.charAt(R.length-1)+"bins",H=Array.isArray(H)?H.map(G(R)):!1===H?i.map(L(R)):null),Q[R]=H,"LAYOUT"!==R.substr(0,6)){for(I[R]=U(),n=0;n<i.length;n++){if(S=h[i[n]],w=C(i[n]),E=(V=D(o._tracePreGUI[w._fullInput.uid],B)(S,R)).get(),void 0!==(Z=Array.isArray(H)?H[n%H.length]:H)){var W=V.parts[V.parts.length-1],k=R.substr(0,R.length-W.length-1),M=k?k+".":"",T=k?a(w,k).get():w;if((X=c.getTraceValObject(w,V.parts))&&X.impliedEdits&&null!==Z)for(var Y in X.impliedEdits)A(r.relativeAttr(R,Y),X.impliedEdits[Y],n);else if("thicknessmode"!==W&&"lenmode"!==W||E===Z||"fraction"!==Z&&"pixels"!==Z||!T){if("type"===R&&("pie"===Z!=("pie"===E)||"funnelarea"===Z!=("funnelarea"===E))){var J="x",_="y";"bar"!==Z&&"bar"!==E||"h"!==S.orientation||(J="y",_="x"),r.swapAttrs(S,["?","?src"],"labels",J),r.swapAttrs(S,["d?","?0"],"label",J),r.swapAttrs(S,["?","?src"],"values",_),"pie"===E||"funnelarea"===E?(a(S,"marker.color").set(a(S,"marker.colors").get()),o._pielayer.selectAll("g.trace").remove()):l.traceIs(S,"cartesian")&&a(S,"marker.colors").set(a(S,"marker.color").get())}}else{var z=o._size,O=T.orient,K="top"===O||"bottom"===O;if("thicknessmode"===W){var P=K?z.h:z.w;A(M+"thickness",T.thickness*("fraction"===Z?1/P:P),n)}else{var j=K?z.w:z.h;A(M+"len",T.len*("fraction"===Z?1/j:j),n)}}I[R][n]=N(E);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(R)){if("orientation"===R){V.set(Z);var q=S.x&&!S.y?"h":"v";if((V.get()||q)===w.orientation)continue}else"orientationaxes"===R&&(S.orientation={v:"h",h:"v"}[w.orientation]);b.swapXYData(S),f.calc=f.clearAxisTypes=!0}else-1!==g.dataArrayContainers.indexOf(V.parts[0])?(b.manageArrayContainers(V,Z,I),f.calc=!0):(X?X.arrayOk&&!l.traceIs(w,"regl")&&(r.isArrayOrTypedArray(Z)||r.isArrayOrTypedArray(E))?f.calc=!0:m.update(f,X):f.calc=!0,V.set(Z))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(R)&&u.swap(t,i),"orientationaxes"===R){var $=a(t.layout,"hovermode"),tt=$.get();"x"===tt?$.set("y"):"y"===tt?$.set("x"):"x unified"===tt?$.set("y unified"):"y unified"===tt&&$.set("x unified")}if(-1!==["orientation","type"].indexOf(R)){for(s=[],n=0;n<i.length;n++){var et=h[i[n]];l.traceIs(et,"cartesian")&&(y(et.xaxis||"x"),y(et.yaxis||"y"))}A(s.map(x),!0,0),A(s.map(v),[0,1],0)}}else V=p(t.layout,R.replace("LAYOUT","")),I[R]=[N(V.get())],V.set(Array.isArray(H)?H[0]:H),f.calc=!0}return(f.calc||f.plot)&&(f.fullReplot=!0),{flags:f,undoit:I,redoit:Q,traces:i,eventData:r.extendDeepNoArrays([],[F,i])}}function W(t,e,i){t=r.getGraphDiv(t),b.clearPromiseQueue(t);var n={};if("string"==typeof e)n[e]=i;else{if(!r.isPlainObject(e))return r.warn("Relayout fail.",e,i),Promise.reject();n=r.extendFlat({},e)}Object.keys(n).length&&(t.changed=!0);var a=_(t,n),s=a.flags;s.calc&&(t.calcdata=void 0);var l=[g.previousPromises];s.layoutReplot?l.push(y.layoutReplot):Object.keys(n).length&&(k(t,s,a)||g.supplyDefaults(t),s.legend&&l.push(y.doLegend),s.layoutstyle&&l.push(y.layoutStyles),s.axrange&&M(l,a.rangesAltered),s.ticks&&l.push(y.doTicksRelayout),s.modebar&&l.push(y.doModeBar),s.camera&&l.push(y.doCamera),s.colorbars&&l.push(y.doColorBars),l.push(C)),l.push(g.rehover,g.redrag,g.reselect),o.add(t,W,[t,a.undoit],W,[t,a.redoit]);var c=r.syncOrAsync(l,t);return c&&c.then||(c=Promise.resolve(t)),c.then((function(){return t.emit("plotly_relayout",a.eventData),t}))}function k(t,e,i){var n,a,s=t._fullLayout;if(!e.axrange)return!1;for(var o in e)if("axrange"!==o&&e[o])return!1;var l=function(t,e){return r.coerce(n,a,h,t,e)},c={};for(var g in i.rangesAltered){var B=u.id2name(g);if(n=t.layout[B],a=s[B],d(n,a,l,c),a._matchGroup)for(var p in a._matchGroup)if(p!==g){var F=s[u.id2name(p)];F.autorange=a.autorange,F.range=a.range.slice(),F._input.range=a.range.slice()}}return!0}function M(t,e){var i=e?function(t){var i=[];for(var n in e){var r=u.getFromId(t,n);if(i.push(n),-1!==(r.ticklabelposition||"").indexOf("inside")&&r._anchorAxis&&i.push(r._anchorAxis._id),r._matchGroup)for(var a in r._matchGroup)e[a]||i.push(a)}return u.draw(t,i,{skipTitle:!0})}:function(t){return u.draw(t,"redraw")};t.push(Q,y.doAutoRangeAndConstraints,i,y.drawData,y.finalDraw)}var T=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Y=/^[xyz]axis[0-9]*\.autorange$/,J=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function _(t,e){var i,n,s,o=t.layout,g=t._fullLayout,d=g._guiEditing,h=D(g._preGUI,d),B=Object.keys(e),p=u.list(t),F=r.extendDeepAll({},e),f={};for(B=Object.keys(e),n=0;n<B.length;n++)if(0===B[n].indexOf("allaxes")){for(s=0;s<p.length;s++){var Q=p[s]._id.substr(1),I=-1!==Q.indexOf("scene")?Q+".":"",y=B[n].replace("allaxes",I+p[s]._name);e[y]||(e[y]=e[B[n]])}delete e[B[n]]}var v=m.layoutFlags(),C={},A={};function L(t,i){if(Array.isArray(t))t.forEach((function(t){L(t,i)}));else if(!(t in e)&&!b.hasParent(e,t)){var n=h(o,t);t in A||(A[t]=N(n.get())),void 0!==i&&n.set(i)}}var G,R={};function S(t){var e=u.name2id(t.split(".")[0]);return R[e]=1,e}for(var w in e){if(b.hasParent(e,w))throw new Error("cannot set "+w+" and a parent attribute simultaneously");for(var V=h(o,w),E=e[w],Z=V.parts.length-1;Z>0&&"string"!=typeof V.parts[Z];)Z--;var X=V.parts[Z],H=V.parts[Z-1]+"."+X,W=V.parts.slice(0,Z).join("."),k=a(t.layout,W).get(),M=a(g,W).get(),_=V.get();if(void 0!==E){C[w]=E,A[w]="reverse"===X?E:N(_);var O=c.getLayoutValObject(g,V.parts);if(O&&O.impliedEdits&&null!==E)for(var K in O.impliedEdits)L(r.relativeAttr(w,K),O.impliedEdits[K]);if(-1!==["width","height"].indexOf(w))if(E){L("autosize",null);var P="height"===w?"width":"height";L(P,g[P])}else g[w]=t._initialAutoSize[w];else if("autosize"===w)L("width",E?null:g.width),L("height",E?null:g.height);else if(H.match(T))S(H),a(g,W+"._inputRange").set(null);else if(H.match(Y)){S(H),a(g,W+"._inputRange").set(null);var j=a(g,W).get();j._inputDomain&&(j._input.domain=j._inputDomain.slice())}else H.match(J)&&a(g,W+"._inputDomain").set(null);if("type"===X){G=k;var q="linear"===M.type&&"log"===E,$="log"===M.type&&"linear"===E;if(q||$){if(G&&G.range)if(M.autorange)q&&(G.range=G.range[1]>G.range[0]?[1,2]:[2,1]);else{var tt=G.range[0],et=G.range[1];q?(tt<=0&&et<=0&&L(W+".autorange",!0),tt<=0?tt=et/1e6:et<=0&&(et=tt/1e6),L(W+".range[0]",Math.log(tt)/Math.LN10),L(W+".range[1]",Math.log(et)/Math.LN10)):(L(W+".range[0]",Math.pow(10,tt)),L(W+".range[1]",Math.pow(10,et)))}else L(W+".autorange",!0);Array.isArray(g._subplots.polar)&&g._subplots.polar.length&&g[V.parts[0]]&&"radialaxis"===V.parts[1]&&delete g[V.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(t,M,E,L),l.getComponentMethod("images","convertCoords")(t,M,E,L)}else L(W+".autorange",!0),L(W+".range",null);a(g,W+"._inputRange").set(null)}else if(X.match(x)){var it=a(g,w).get(),nt=(E||{}).type;nt&&"-"!==nt||(nt="linear"),l.getComponentMethod("annotations","convertCoords")(t,it,nt,L),l.getComponentMethod("images","convertCoords")(t,it,nt,L)}var rt=U.containerArrayMatch(w);if(rt){i=rt.array,n=rt.index;var at=rt.property,st=O||{editType:"calc"};""!==n&&""===at&&(U.isAddVal(E)?A[w]=null:U.isRemoveVal(E)?A[w]=(a(o,i).get()||[])[n]:r.warn("unrecognized full object value",e)),m.update(v,st),f[i]||(f[i]={});var ot=f[i][n];ot||(ot=f[i][n]={}),ot[at]=E,delete e[w]}else"reverse"===X?(k.range?k.range.reverse():(L(W+".autorange",!0),k.range=[1,0]),M.autorange?v.calc=!0:v.plot=!0):("dragmode"===w&&(!1===E&&!1!==_||!1!==E&&!1===_)||g._has("scatter-like")&&g._has("regl")&&"dragmode"===w&&("lasso"===E||"select"===E)&&"lasso"!==_&&"select"!==_?v.plot=!0:O?m.update(v,O):v.calc=!0,V.set(E))}}for(i in f){U.applyContainerArrayChanges(t,h(o,i),f[i],v,h)||(v.plot=!0)}for(var lt in R){var ct=(G=u.getFromId(t,lt))&&G._constraintGroup;if(ct)for(var gt in v.calc=!0,ct)R[gt]||(u.getFromId(t,gt)._constraintShrinkable=!0)}(z(t)||e.height||e.width)&&(v.plot=!0);var ut=g.shapes;for(n=0;n<ut.length;n++)if(ut[n].showlegend){v.calc=!0;break}return(v.plot||v.calc)&&(v.layoutReplot=!0),{flags:v,rangesAltered:R,undoit:A,redoit:C,eventData:F}}function z(t){var e=t._fullLayout,i=e.width,n=e.height;return t.layout.autosize&&g.plotAutoSize(t,t.layout,e),e.width!==i||e.height!==n}function O(e,i,n,a){e=r.getGraphDiv(e),b.clearPromiseQueue(e),r.isPlainObject(i)||(i={}),r.isPlainObject(n)||(n={}),Object.keys(i).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var s=b.coerceTraceIndices(e,a),l=H(e,r.extendFlat({},i),s),c=l.flags,u=_(e,r.extendFlat({},n)),d=u.flags;(c.calc||d.calc)&&(e.calcdata=void 0),c.clearAxisTypes&&b.clearAxisTypes(e,s,n);var h=[];d.layoutReplot?h.push(y.layoutReplot):c.fullReplot?h.push(t._doPlot):(h.push(g.previousPromises),k(e,d,u)||g.supplyDefaults(e),c.style&&h.push(y.doTraceStyle),(c.colorbars||d.colorbars)&&h.push(y.doColorBars),d.legend&&h.push(y.doLegend),d.layoutstyle&&h.push(y.layoutStyles),d.axrange&&M(h,u.rangesAltered),d.ticks&&h.push(y.doTicksRelayout),d.modebar&&h.push(y.doModeBar),d.camera&&h.push(y.doCamera),h.push(C)),h.push(g.rehover,g.redrag,g.reselect),o.add(e,O,[e,l.undoit,u.undoit,l.traces],O,[e,l.redoit,u.redoit,l.traces]);var B=r.syncOrAsync(h,e);return B&&B.then||(B=Promise.resolve(e)),B.then((function(){return e.emit("plotly_update",{data:l.eventData,layout:u.eventData}),e}))}function K(t){return function(e){e._fullLayout._guiEditing=!0;var i=t.apply(null,arguments);return e._fullLayout._guiEditing=!1,i}}var P=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],j=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function q(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=t.match(n.pattern);if(r){var a=r[1]||"";return{head:a,tail:t.substr(a.length+1),attr:n.attr}}}}function $(t,e){var i=a(e,t).get();if(void 0!==i)return i;var n=t.split(".");for(n.pop();n.length>1;)if(n.pop(),void 0!==(i=a(e,n.join(".")+".uirevision").get()))return i;return e.uirevision}function tt(t,e){for(var i=0;i<e.length;i++)if(e[i]._fullInput.uid===t)return i;return-1}function et(t,e,i){for(var n=0;n<e.length;n++)if(e[n].uid===t)return n;return!e[i]||e[i].uid?-1:i}function it(t,e){var i=r.isPlainObject(t),n=Array.isArray(t);return i||n?(i&&r.isPlainObject(e)||n&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function nt(t,e,i,n){var a,s,o,l=n.getValObject,c=n.flags,g=n.immutable,u=n.inArray,d=n.arrayIndex;function h(){var t=a.editType;u&&-1!==t.indexOf("arraydraw")?r.pushUnique(c.arrays[u],d):(m.update(c,a),"none"!==t&&c.nChanges++,n.transition&&a.anim&&c.nChangesAnim++,(T.test(o)||Y.test(o))&&(c.rangesAltered[i[0]]=1),"datarevision"===s&&(c.newDataRevision=1))}function B(t){return"data_array"===t.valType||t.arrayOk}for(s in t){if(c.calc&&!n.transition)return;var p=t[s],F=e[s],f=i.concat(s);if(o=f.join("."),"_"!==s.charAt(0)&&"function"!=typeof p&&p!==F){if(("tick0"===s||"dtick"===s)&&"geo"!==i[0]){var Q=e.tickmode;if("auto"===Q||"array"===Q||!Q)continue}if(("range"!==s||!e.autorange)&&("zmin"!==s&&"zmax"!==s||"contourcarpet"!==e.type)&&(a=l(f))&&(!a._compareAsJSON||JSON.stringify(p)!==JSON.stringify(F))){var I,U=a.valType,b=B(a),y=Array.isArray(p),x=Array.isArray(F);if(y&&x){var v="_input_"+s,C=t[v],A=e[v];if(Array.isArray(C)&&C===A)continue}if(void 0===F)b&&y?c.calc=!0:h();else if(a._isLinkedToArray){var L=[],G=!1;u||(c.arrays[s]=L);var R=Math.min(p.length,F.length),S=Math.max(p.length,F.length);if(R!==S){if("arraydraw"!==a.editType){h();continue}G=!0}for(I=0;I<R;I++)nt(p[I],F[I],f.concat(I),r.extendFlat({inArray:s,arrayIndex:I},n));if(G)for(I=R;I<S;I++)L.push(I)}else!U&&r.isPlainObject(p)?nt(p,F,f,n):b?y&&x?(g&&(c.calc=!0),(g||n.newDataRevision)&&h()):y!==x?c.calc=!0:h():y&&x&&p.length===F.length&&String(p)===String(F)||h()}}}for(s in e)if(!(s in t)&&"_"!==s.charAt(0)&&"function"!=typeof e[s]){if(B(a=l(i.concat(s)))&&Array.isArray(e[s]))return void(c.calc=!0);h()}}function rt(t,e){var i;for(i in t)if("_"!==i.charAt(0)){var n=t[i],a=e[i];if(n!==a)if(r.isPlainObject(n)&&r.isPlainObject(a)){if(rt(n,a))return!0}else{if(!Array.isArray(n)||!Array.isArray(a))return!0;if(n.length!==a.length)return!0;for(var s=0;s<n.length;s++)if(n[s]!==a[s]){if(!r.isPlainObject(n[s])||!r.isPlainObject(a[s]))return!0;if(rt(n[s],a[s]))return!0}}}}function at(t){var e=t._fullLayout,i=t.getBoundingClientRect();if(!r.equalDomRects(i,e._lastBBox)){var n=e._invTransform=r.inverseTransformMatrix(r.getFullTransformMatrix(t));e._invScaleX=Math.sqrt(n[0][0]*n[0][0]+n[0][1]*n[0][1]+n[0][2]*n[0][2]),e._invScaleY=Math.sqrt(n[1][0]*n[1][0]+n[1][1]*n[1][1]+n[1][2]*n[1][2]),e._lastBBox=i}}t.animate=function(t,e,i){if(t=r.getGraphDiv(t),!r.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var n=t._transitionData;n._frameQueue||(n._frameQueue=[]);var a=(i=g.supplyAnimationDefaults(i)).transition,s=i.frame;function o(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function l(t){return Array.isArray(s)?t>=s.length?s[0]:s[t]:s}function c(t,e){var i=0;return function(){if(t&&++i===e)return t()}}return void 0===n._frameWaitingCnt&&(n._frameWaitingCnt=0),new Promise((function(s,u){function d(){n._currentFrame&&n._currentFrame.onComplete&&n._currentFrame.onComplete();var e=n._currentFrame=n._frameQueue.shift();if(e){var i=e.name?e.name.toString():null;t._fullLayout._currentFrame=i,n._lastFrameAt=Date.now(),n._timeToNext=e.frameOpts.duration,g.transition(t,e.frame.data,e.frame.layout,b.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then((function(){e.onComplete&&e.onComplete()})),t.emit("plotly_animatingframe",{name:i,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(n._animationRaf),n._animationRaf=null}function h(){t.emit("plotly_animating"),n._lastFrameAt=-1/0,n._timeToNext=0,n._runningTransitions=0,n._currentFrame=null;var e=function(){n._animationRaf=window.requestAnimationFrame(e),Date.now()-n._lastFrameAt>n._timeToNext&&d()};e()}var B,p,F=0;function f(t){return Array.isArray(a)?F>=a.length?t.transitionOpts=a[F]:t.transitionOpts=a[0]:t.transitionOpts=a,F++,t}var Q=[],I=null==e,U=Array.isArray(e);if(!I&&!U&&r.isPlainObject(e))Q.push({type:"object",data:f(r.extendFlat({},e))});else if(I||-1!==["string","number"].indexOf(typeof e))for(B=0;B<n._frames.length;B++)(p=n._frames[B])&&(I||String(p.group)===String(e))&&Q.push({type:"byname",name:String(p.name),data:f({name:p.name})});else if(U)for(B=0;B<e.length;B++){var y=e[B];-1!==["number","string"].indexOf(typeof y)?(y=String(y),Q.push({type:"byname",name:y,data:f({name:y})})):r.isPlainObject(y)&&Q.push({type:"object",data:f(r.extendFlat({},y))})}for(B=0;B<Q.length;B++)if("byname"===(p=Q[B]).type&&!n._frameHash[p.data.name])return r.warn('animate failure: frame not found: "'+p.data.name+'"'),void u();-1!==["next","immediate"].indexOf(i.mode)&&function(){if(0!==n._frameQueue.length){for(;n._frameQueue.length;){var e=n._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===i.direction&&Q.reverse();var m=t._fullLayout._currentFrame;if(m&&i.fromcurrent){var x=-1;for(B=0;B<Q.length;B++)if("byname"===(p=Q[B]).type&&p.name===m){x=B;break}if(x>0&&x<Q.length-1){var v=[];for(B=0;B<Q.length;B++)p=Q[B],("byname"!==Q[B].type||B>x)&&v.push(p);Q=v}}Q.length>0?function(e){if(0!==e.length){for(var r=0;r<e.length;r++){var a;a="byname"===e[r].type?g.computeFrame(t,e[r].name):e[r].data;var d=l(r),B=o(r);B.duration=Math.min(B.duration,d.duration);var p={frame:a,name:e[r].name,frameOpts:d,transitionOpts:B};r===e.length-1&&(p.onComplete=c(s,2),p.onInterrupt=u),n._frameQueue.push(p)}"immediate"===i.mode&&(n._lastFrameAt=-1/0),n._animationRaf||h()}}(Q):(t.emit("plotly_animated"),s())}))},t.addFrames=function(t,e,i){if(t=r.getGraphDiv(t),null==e)return Promise.resolve();if(!r.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var n,a,s,l,c=t._transitionData._frames,u=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var d=c.length+2*e.length,h=[],B={};for(n=e.length-1;n>=0;n--)if(r.isPlainObject(e[n])){var p=e[n].name,F=(u[p]||B[p]||{}).name,f=e[n].name,Q=u[F]||B[F];F&&f&&"number"==typeof f&&Q&&v<5&&(v++,r.warn('addFrames: overwriting frame "'+(u[F]||B[F]).name+'" with a frame whose name of type "number" also equates to "'+F+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===v&&r.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),B[p]={name:p},h.push({frame:g.supplyFrameDefaults(e[n]),index:i&&void 0!==i[n]&&null!==i[n]?i[n]:d+n})}h.sort((function(t,e){return t.index>e.index?-1:t.index<e.index?1:0}));var I=[],U=[],b=c.length;for(n=h.length-1;n>=0;n--){if("number"==typeof(a=h[n].frame).name&&r.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;u[a.name="frame "+t._transitionData._counter++];);if(u[a.name]){for(s=0;s<c.length&&(c[s]||{}).name!==a.name;s++);I.push({type:"replace",index:s,value:a}),U.unshift({type:"replace",index:s,value:c[s]})}else l=Math.max(0,Math.min(h[n].index,b)),I.push({type:"insert",index:l,value:a}),U.unshift({type:"delete",index:l}),b++}var y=g.modifyFrames,m=g.modifyFrames,x=[t,U],C=[t,I];return o&&o.add(t,y,x,m,C),g.modifyFrames(t,I)},t.deleteFrames=function(t,e){if(t=r.getGraphDiv(t),!r.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var i,n,a=t._transitionData._frames,s=[],l=[];if(!e)for(e=[],i=0;i<a.length;i++)e.push(i);for((e=e.slice()).sort(),i=e.length-1;i>=0;i--)n=e[i],s.push({type:"delete",index:n}),l.unshift({type:"insert",index:n,value:a[n]});var c=g.modifyFrames,u=g.modifyFrames,d=[t,l],h=[t,s];return o&&o.add(t,c,d,u,h),g.modifyFrames(t,s)},t.addTraces=function e(i,n,a){i=r.getGraphDiv(i);var s,l,c=[],g=t.deleteTraces,u=e,d=[i,c],h=[i,n];for(function(t,e,i){var n,r;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),n=0;n<e.length;n++)if("object"!=typeof(r=e[n])||Array.isArray(r)||null===r)throw new Error("all values in traces array must be non-array objects");if(void 0===i||Array.isArray(i)||(i=[i]),void 0!==i&&i.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(i,n,a),Array.isArray(n)||(n=[n]),n=n.map((function(t){return r.extendFlat({},t)})),b.cleanData(n),s=0;s<n.length;s++)i.data.push(n[s]);for(s=0;s<n.length;s++)c.push(-n.length+s);if(void 0===a)return l=t.redraw(i),o.add(i,g,d,u,h),l;Array.isArray(a)||(a=[a]);try{w(i,c,a)}catch(t){throw i.data.splice(i.data.length-n.length,n.length),t}return o.startSequence(i),o.add(i,g,d,u,h),l=t.moveTraces(i,c,a),o.stopSequence(i),l},t.deleteTraces=function e(i,n){i=r.getGraphDiv(i);var a,s,l=[],c=t.addTraces,g=e,u=[i,l,n],d=[i,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(n)||(n=[n]),S(i,n,"indices"),(n=R(n,i.data.length-1)).sort(r.sorterDes),a=0;a<n.length;a+=1)s=i.data.splice(n[a],1)[0],l.push(s);var h=t.redraw(i);return o.add(i,c,u,g,d),h},t.extendTraces=function e(i,n,a,s){var l=V(i=r.getGraphDiv(i),n,a,s,(function(t,e,i){var n,a;if(r.isTypedArray(t))if(i<0){var s=new t.constructor(0),o=E(t,e);i<0?(n=o,a=s):(n=s,a=o)}else if(n=new t.constructor(i),a=new t.constructor(t.length+e.length-i),i===e.length)n.set(e),a.set(t);else if(i<e.length){var l=e.length-i;n.set(e.subarray(l)),a.set(t),a.set(e.subarray(0,l),t.length)}else{var c=i-e.length,g=t.length-c;n.set(t.subarray(g)),n.set(e,c),a.set(t.subarray(0,g))}else n=t.concat(e),a=i>=0&&i<n.length?n.splice(0,n.length-i):[];return[n,a]})),c=t.redraw(i),g=[i,l.update,a,l.maxPoints];return o.add(i,t.prependTraces,g,e,arguments),c},t.moveTraces=function e(i,n,a){var s,l=[],c=[],g=e,u=e,d=[i=r.getGraphDiv(i),a,n],h=[i,n,a];if(w(i,n,a),n=Array.isArray(n)?n:[n],void 0===a)for(a=[],s=0;s<n.length;s++)a.push(-n.length+s);for(a=Array.isArray(a)?a:[a],n=R(n,i.data.length-1),a=R(a,i.data.length-1),s=0;s<i.data.length;s++)-1===n.indexOf(s)&&l.push(i.data[s]);for(s=0;s<n.length;s++)c.push({newIndex:a[s],trace:i.data[n[s]]});for(c.sort((function(t,e){return t.newIndex-e.newIndex})),s=0;s<c.length;s+=1)l.splice(c[s].newIndex,0,c[s].trace);i.data=l;var B=t.redraw(i);return o.add(i,g,d,u,h),B},t.prependTraces=function e(i,n,a,s){var l=V(i=r.getGraphDiv(i),n,a,s,(function(t,e,i){var n,a;if(r.isTypedArray(t))if(i<=0){var s=new t.constructor(0),o=E(e,t);i<0?(n=o,a=s):(n=s,a=o)}else if(n=new t.constructor(i),a=new t.constructor(t.length+e.length-i),i===e.length)n.set(e),a.set(t);else if(i<e.length){var l=e.length-i;n.set(e.subarray(0,l)),a.set(e.subarray(l)),a.set(t,l)}else{var c=i-e.length;n.set(e),n.set(t.subarray(0,c),e.length),a.set(t.subarray(c))}else n=e.concat(t),a=i>=0&&i<n.length?n.splice(i,n.length):[];return[n,a]})),c=t.redraw(i),g=[i,l.update,a,l.maxPoints];return o.add(i,t.extendTraces,g,e,arguments),c},t.newPlot=function(e,i,n,a){return e=r.getGraphDiv(e),g.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),g.purge(e),t._doPlot(e,i,n,a)},t._doPlot=function(i,n,a,o){var c;if(i=r.getGraphDiv(i),s.init(i),r.isPlainObject(n)){var d=n;n=d.data,a=d.layout,o=d.config,c=d.frames}if(!1===s.triggerHandler(i,"plotly_beforeplot",[n,a,o]))return Promise.reject();n||a||r.isPlotDiv(i)||r.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",i),G(i,o),a||(a={}),e.select(i).classed("js-plotly-plot",!0),B.makeTester(),Array.isArray(i._promises)||(i._promises=[]);var h=0===(i.data||[]).length&&Array.isArray(n);Array.isArray(n)&&(b.cleanData(n),h?i.data=n:i.data.push.apply(i.data,n),i.empty=!1),i.layout&&!h||(i.layout=b.cleanLayout(a)),g.supplyDefaults(i);var p=i._fullLayout,Q=p._has("cartesian");p._replotting=!0,(h||p._shouldCreateBgLayer)&&(!function(t){var i=e.select(t),n=t._fullLayout;if(n._calcInverseTransform=at,n._calcInverseTransform(t),n._container=i.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var a={};e.selectAll("defs").each((function(){this.id&&(a[this.id.split("-")[1]]=1)})),n._uid=r.randstr(a)}n._paperdiv.selectAll(".main-svg").attr(f.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var s=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=s.append("g").classed("imagelayer",!0),n._shapeLowerLayer=s.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._smithlayer=n._paper.append("g").classed("smithlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._iciclelayer=n._paper.append("g").classed("iciclelayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var o=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=o.append("g").classed("imagelayer",!0),n._shapeUpperLayer=o.append("g").classed("shapelayer",!0),n._selectionLayer=n._toppaper.append("g").classed("selectionlayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}(i),p._shouldCreateBgLayer&&delete p._shouldCreateBgLayer),B.initGradients(i),B.initPatterns(i),h&&u.saveShowSpikeInitial(i);var I=!i.calcdata||i.calcdata.length!==(i._fullData||[]).length;I&&g.doCalcdata(i);for(var U=0;U<i.calcdata.length;U++)i.calcdata[U][0].trace=i._fullData[U];i._context.responsive?i._responsiveChartHandler||(i._responsiveChartHandler=function(){r.isHidden(i)||g.resize(i)},window.addEventListener("resize",i._responsiveChartHandler)):r.clearResponsive(i);var m=r.extendFlat({},p._size),x=0;function v(){if(g.clearAutoMarginIds(i),y.drawMarginPushers(i),u.allowAutoMargin(i),i._fullLayout.title.text&&i._fullLayout.title.automargin&&g.allowAutoMargin(i,"title.automargin"),p._has("pie"))for(var t=i._fullData,e=0;e<t.length;e++){var n=t[e];"pie"===n.type&&n.automargin&&g.allowAutoMargin(i,"pie."+n.uid+".automargin")}return g.doAutoMargin(i),g.previousPromises(i)}function A(){i._transitioning||(y.doAutoRangeAndConstraints(i),h&&u.saveRangeInitial(i),l.getComponentMethod("rangeslider","calcAutorange")(i))}var L=[g.previousPromises,function(){if(c)return t.addFrames(i,c)},function t(){for(var e=p._basePlotModules,n=0;n<e.length;n++)e[n].drawFramework&&e[n].drawFramework(i);!p._glcanvas&&p._has("gl")&&(p._glcanvas=p._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],(function(t){return t.key})),p._glcanvas.enter().append("canvas").attr("class",(function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var a=i._context.plotGlPixelRatio;if(p._glcanvas){p._glcanvas.attr("width",p.width*a).attr("height",p.height*a).style("width",p.width+"px").style("height",p.height+"px");var s=p._glcanvas.data()[0].regl;if(s&&(Math.floor(p.width*a)!==s._gl.drawingBufferWidth||Math.floor(p.height*a)!==s._gl.drawingBufferHeight)){var o="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!x)return r.log(o+" Clearing graph and plotting again."),g.cleanPlot([],{},i._fullData,p),g.supplyDefaults(i),p=i._fullLayout,g.doCalcdata(i),x++,t();r.error(o)}}return"h"===p.modebar.orientation?p._modebardiv.style("height",null).style("width","100%"):p._modebardiv.style("width",null).style("height",p.height+"px"),g.previousPromises(i)},v,function(){if(g.didMarginChange(m,p._size))return r.syncOrAsync([v,y.layoutStyles],i)}];Q&&L.push((function(){if(I)return r.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),A],i);A()})),L.push(y.layoutStyles),Q&&L.push((function(){return u.draw(i,h?"":"redraw")}),(function(t){var e=t._fullLayout._insideTickLabelsUpdaterange;if(e)return t._fullLayout._insideTickLabelsUpdaterange=void 0,W(t,e).then((function(){u.saveRangeInitial(t,!0)}))})),L.push(y.drawData,y.finalDraw,F,g.addLinks,g.rehover,g.redrag,g.reselect,g.doAutoMargin,g.previousPromises);var R=r.syncOrAsync(L,i);return R&&R.then||(R=Promise.resolve()),R.then((function(){return C(i),i}))},t.purge=function(t){var e=(t=r.getGraphDiv(t))._fullLayout||{},i=t._fullData||[];return g.cleanPlot([],{},i,e),g.purge(t),s.purge(t),e._container&&e._container.remove(),delete t._context,t},t.react=function(e,i,n,s){var o,u;e=r.getGraphDiv(e),b.clearPromiseQueue(e);var d=e._fullData,h=e._fullLayout;if(r.isPlotDiv(e)&&d&&h){if(r.isPlainObject(i)){var B=i;i=B.data,n=B.layout,s=B.config,o=B.frames}var p=!1;if(s){var F=r.extendDeep({},e._context);e._context=void 0,G(e,s),p=rt(F,e._context)}e.data=i||[],b.cleanData(e.data),e.layout=n||{},b.cleanLayout(e.layout),function(t,e,i,n){var s,o,l,c,g,u,d,h,B,p,F=n._preGUI,f=[],Q={},I={};for(s in F){if(g=q(s,P)){if(B=g.head,p=g.tail,o=g.attr||B+".uirevision",(c=(l=a(n,o).get())&&$(o,e))&&c===l){if(null===(u=F[s])&&(u=void 0),it(h=(d=a(e,s)).get(),u)){void 0===h&&"autorange"===p&&f.push(B),d.set(N(a(n,s).get()));continue}if("autorange"===p||"range["===p.substr(0,6)){var U=F[B+".range[0]"],b=F[B+".range[1]"],y=F[B+".autorange"];if(y||null===y&&null===U&&null===b){if(!(B in Q)){var m=a(e,B).get();Q[B]=m&&(m.autorange||!1!==m.autorange&&(!m.range||2!==m.range.length))}if(Q[B]){d.set(N(a(n,s).get()));continue}}}}}else r.warn("unrecognized GUI edit: "+s);delete F[s],g&&"range["===g.tail.substr(0,6)&&(I[g.head]=1)}for(var x=0;x<f.length;x++){var v=f[x];if(I[v]){var C=a(e,v).get();C&&delete C.autorange}}var A=n._tracePreGUI;for(var L in A){var G,R=A[L],S=null;for(s in R){if(!S){var w=tt(L,i);if(w<0){delete A[L];break}var V=et(L,t,(G=i[w]._fullInput).index);if(V<0){delete A[L];break}S=t[V]}if(g=q(s,j)){if(g.attr?c=(l=a(n,g.attr).get())&&$(g.attr,e):(l=G.uirevision,void 0===(c=S.uirevision)&&(c=e.uirevision)),c&&c===l&&(null===(u=R[s])&&(u=void 0),it(h=(d=a(S,s)).get(),u))){d.set(N(a(G,s).get()));continue}}else r.warn("unrecognized GUI edit: "+s+" in trace uid "+L);delete R[s]}}}(e.data,e.layout,d,h),g.supplyDefaults(e,{skipUpdateCalc:!0});var f=e._fullData,Q=e._fullLayout,I=void 0===Q.datarevision,U=Q.transition,x=function(t,e,i,n,r){var a=m.layoutFlags();function s(t){return c.getLayoutValObject(i,t)}for(var o in a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,i)if((o.startsWith("xaxis")||o.startsWith("yaxis"))&&e[o]){var l=i[o].domain,g=e[o].domain,u=e[o]._inputDomain;e[o]._inputDomain&&(l[0]===u[0]&&l[1]===u[1]?i[o].domain=e[o].domain:l[0]===g[0]&&l[1]===g[1]||(i[o]._inputDomain=null))}var d={getValObject:s,flags:a,immutable:n,transition:r,gd:t};nt(e,i,[],d),(a.plot||a.calc)&&(a.layoutReplot=!0);r&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(e,h,Q,I,U),v=x.newDataRevision,A=function(t,e,i,n,r,a){var s=e.length===i.length;if(!r&&!s)return{fullReplot:!0,calc:!0};var o,l,g=m.traceFlags();function u(t){var e=c.getTraceValObject(l,t);return!l._module.animatable&&e.anim&&(e.anim=!1),e}g.arrays={},g.nChanges=0,g.nChangesAnim=0;var d={getValObject:u,flags:g,immutable:n,transition:r,newDataRevision:a,gd:t},h={};for(o=0;o<e.length;o++)if(i[o]){if(h[(l=i[o]._fullInput).uid])continue;h[l.uid]=1,nt(e[o]._fullInput,l,[],d)}(g.calc||g.plot)&&(g.fullReplot=!0);r&&g.nChanges&&g.nChangesAnim&&(g.anim=g.nChanges===g.nChangesAnim&&s?"all":"some");return g}(e,d,f,I,U,v);if(z(e)&&(x.layoutReplot=!0),A.calc||x.calc){e.calcdata=void 0;for(var L=Object.getOwnPropertyNames(Q),R=0;R<L.length;R++){var S=L[R],w=S.substring(0,5);if("xaxis"===w||"yaxis"===w){var V=Q[S]._emptyCategories;V&&V()}}}else g.supplyDefaultsUpdateCalc(e.calcdata,f);var E=[];if(o&&(e._transitionData={},g.createTransitionData(e),E.push((function(){return t.addFrames(e,o)}))),Q.transition&&!p&&(A.anim||x.anim))x.ticks&&E.push(y.doTicksRelayout),g.doCalcdata(e),y.doAutoRangeAndConstraints(e),E.push((function(){return g.transitionFromReact(e,A,x,h)}));else if(A.fullReplot||x.layoutReplot||p)e._fullLayout._skipDefaults=!0,E.push(t._doPlot);else{for(var Z in x.arrays){var D=x.arrays[Z];if(D.length){var X=l.getComponentMethod(Z,"drawOne");if(X!==r.noop)for(var H=0;H<D.length;H++)X(e,D[H]);else{var W=l.getComponentMethod(Z,"draw");if(W===r.noop)throw new Error("cannot draw components: "+Z);W(e)}}}E.push(g.previousPromises),A.style&&E.push(y.doTraceStyle),(A.colorbars||x.colorbars)&&E.push(y.doColorBars),x.legend&&E.push(y.doLegend),x.layoutstyle&&E.push(y.layoutStyles),x.axrange&&M(E),x.ticks&&E.push(y.doTicksRelayout),x.modebar&&E.push(y.doModeBar),x.camera&&E.push(y.doCamera),E.push(C)}E.push(g.rehover,g.redrag,g.reselect),(u=r.syncOrAsync(E,e))&&u.then||(u=Promise.resolve(e))}else u=t.newPlot(e,i,n,s);return u.then((function(){return e.emit("plotly_react",{data:i,layout:n}),e}))},t.redraw=function(e){if(e=r.getGraphDiv(e),!r.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return b.cleanData(e.data),b.cleanLayout(e.layout),e.calcdata=void 0,t._doPlot(e).then((function(){return e.emit("plotly_redraw"),e}))},t.relayout=W,t.restyle=Z,t.setPlotConfig=function(t){return r.extendFlat(I,t)},t.update=O,t._guiRelayout=K(W),t._guiRestyle=K(Z),t._guiUpdate=K(O),t._storeDirectGUIEdit=function(t,e,i){for(var n in i){X(n,a(t,n).get(),i[n],e)}}}($B);var uw={},dw=Nu;uw.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("mapbox")||t._has("map"))?500:0},uw.getRedrawFunc=function(t){return function(){dw.getComponentMethod("colorbar","draw")(t)}},uw.encodeSVG=function(t){return"data:image/svg+xml,"+encodeURIComponent(t)},uw.encodeJSON=function(t){return"data:application/json,"+encodeURIComponent(t)};var hw=window.URL||window.webkitURL;uw.createObjectURL=function(t){return hw.createObjectURL(t)},uw.revokeObjectURL=function(t){return hw.revokeObjectURL(t)},uw.createBlob=function(t,e){if("svg"===e)return new window.Blob([t],{type:"image/svg+xml;charset=utf-8"});if("full-json"===e)return new window.Blob([t],{type:"application/json;charset=utf-8"});var i=function(t){for(var e=t.length,i=new ArrayBuffer(e),n=new Uint8Array(i),r=0;r<e;r++)n[r]=t.charCodeAt(r);return i}(window.atob(t));return new window.Blob([i],{type:"image/"+e})},uw.octetStream=function(t){document.location.href="data:application/octet-stream"+t},uw.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;var Bw=Js,pw=jI,Fw=Uu,fw=/"/g,Qw="TOBESTRIPPED",Iw=new RegExp('("'+Qw+")|("+Qw+'")',"g");var Uw=function(t,e,i){var n,r=t._fullLayout,a=r._paper,s=r._toppaper,o=r.width,l=r.height;a.insert("rect",":first-child").call(pw.setRect,0,0,o,l).call(Fw.fill,r.paper_bgcolor);var c=r._basePlotModules||[];for(n=0;n<c.length;n++){var g=c[n];g.toSVG&&g.toSVG(t)}if(s){var u=s.node().childNodes,d=Array.prototype.slice.call(u);for(n=0;n<d.length;n++){var h=d[n];h.childNodes.length&&a.node().appendChild(h)}}r._draggers&&r._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var t=Bw.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(fw,Qw));var i=this.style.fontWeight;!i||"normal"!==i&&"400"!==i||t.style("font-weight",void 0);var n=this.style.fontStyle;n&&"normal"===n&&t.style("font-style",void 0);var r=this.style.fontVariant;r&&"normal"===r&&t.style("font-variant",void 0)}else t.remove()})),a.selectAll(".gradient_filled,.pattern_filled").each((function(){var t=Bw.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(fw,Qw));var i=this.style.stroke;i&&-1!==i.indexOf("url(")&&t.style("stroke",i.replace(fw,Qw))})),"pdf"!==e&&"eps"!==e||a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),"svg"===e&&i&&(a.attr("width",i*o),a.attr("height",i*l),a.attr("viewBox","0 0 "+o+" "+l));var B=(new window.XMLSerializer).serializeToString(a.node());return B=function(t){var e=Bw.select("body").append("div").style({display:"none"}).html(""),i=t.replace(/(&[^;]*;)/gi,(function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()}));return e.remove(),i}(B),B=function(t){return t.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}(B),B=B.replace(Iw,"'")},bw=_B,yw=Fp.EventEmitter,mw=uw;var xw=function(t){var e=t.emitter||new yw,i=new Promise((function(i,n){var r,a,s=window.Image,o=t.svg,l=t.format||"png",c=t.canvas,g=t.scale||1,u=t.width||300,d=t.height||150,h=g*u,B=g*d,p=c.getContext("2d",{willReadFrequently:!0}),F=new s;"svg"===l||bw.isSafari()?a=mw.encodeSVG(o):(r=mw.createBlob(o,"svg"),a=mw.createObjectURL(r)),c.width=h,c.height=B,F.onload=function(){var s;switch(r=null,mw.revokeObjectURL(a),"svg"!==l&&p.drawImage(F,0,0,h,B),l){case"jpeg":s=c.toDataURL("image/jpeg");break;case"png":s=c.toDataURL("image/png");break;case"webp":s=c.toDataURL("image/webp");break;case"svg":s=a;break;default:var o="Image format is not jpeg, png, svg or webp.";if(n(new Error(o)),!t.promise)return e.emit("error",o)}i(s),t.promise||e.emit("success",s)},F.onerror=function(i){if(r=null,mw.revokeObjectURL(a),n(i),!t.promise)return e.emit("error",i)},F.src=a}));return t.promise?i:e},vw=$c,Cw=$B,Aw=yF,Lw=_B,Gw=uw,Rw=Uw,Sw=xw,ww=ks.version,Vw={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};var Ew=function(t,e){var i,n,r,a;function s(t){return!(t in e)||Lw.validate(e[t],Vw[t])}if(e=e||{},Lw.isPlainObject(t)?(i=t.data||[],n=t.layout||{},r=t.config||{},a={}):(t=Lw.getGraphDiv(t),i=Lw.extendDeep([],t.data),n=Lw.extendDeep({},t.layout),r=t._context,a=t._fullLayout||{}),!s("width")&&null!==e.width||!s("height")&&null!==e.height)throw new Error("Height and width should be pixel values.");if(!s("format"))throw new Error("Export format is not "+Lw.join2(Vw.format.values,", "," or ")+".");var o={};function l(t,i){return Lw.coerce(e,o,Vw,t,i)}var c=l("format"),g=l("width"),u=l("height"),d=l("scale"),h=l("setBackground"),B=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var F=Lw.extendFlat({},n);g?F.width=g:null===e.width&&vw(a.width)&&(F.width=a.width),u?F.height=u:null===e.height&&vw(a.height)&&(F.height=a.height);var f=Lw.extendFlat({},r,{_exportedPlot:!0,staticPlot:!0,setBackground:h}),Q=Gw.getRedrawFunc(p);function I(){return new Promise((function(t){setTimeout(t,Gw.getDelay(p._fullLayout))}))}function U(){return new Promise((function(t,e){var i=Rw(p,c,d),n=p._fullLayout.width,r=p._fullLayout.height;function a(){Cw.purge(p),document.body.removeChild(p)}if("full-json"===c){var s=Aw.graphJson(p,!1,"keepdata","object",!0,!0);return s.version=ww,s=JSON.stringify(s),a(),t(B?s:Gw.encodeJSON(s))}if(a(),"svg"===c)return t(B?i:Gw.encodeSVG(i));var o=document.createElement("canvas");o.id=Lw.randstr(),Sw({format:c,width:n,height:r,scale:d,canvas:o,svg:i,promise:!0}).then(t).catch(e)}))}return new Promise((function(t,e){Cw.newPlot(p,i,F,f).then(Q).then(I).then(U).then((function(e){t(function(t){return B?t.replace(Gw.IMAGE_URL_PREFIX,""):t}(e))})).catch((function(t){e(t)}))}))},Zw=_B,Nw=yF,Dw=xp,Xw=Au.dfltConfig,Hw=Zw.isPlainObject,Ww=Array.isArray,kw=Zw.isArrayOrTypedArray;function Mw(t,e,i,n,r,a){a=a||[];for(var s=Object.keys(t),o=0;o<s.length;o++){var l=s[o],c=a.slice();c.push(l);var g=t[l],u=e[l],d=zw(i,l),h=(d||{}).valType,B="info_array"===h,p="colorscale"===h,F=(d||{}).items;if(_w(i,l))if(Hw(g)&&Hw(u)&&"any"!==h)Mw(g,u,d,n,r,c);else if(B&&Ww(g)){g.length>u.length&&n.push(Jw("unused",r,c.concat(u.length)));var f,Q,I,U,b,y=u.length,m=Array.isArray(F);if(m&&(y=Math.min(y,F.length)),2===d.dimensions)for(Q=0;Q<y;Q++)if(Ww(g[Q])){g[Q].length>u[Q].length&&n.push(Jw("unused",r,c.concat(Q,u[Q].length)));var x=u[Q].length;for(f=0;f<(m?Math.min(x,F[Q].length):x);f++)I=m?F[Q][f]:F,U=g[Q][f],b=u[Q][f],Zw.validate(U,I)?b!==U&&b!==+U&&n.push(Jw("dynamic",r,c.concat(Q,f),U,b)):n.push(Jw("value",r,c.concat(Q,f),U))}else n.push(Jw("array",r,c.concat(Q),g[Q]));else for(Q=0;Q<y;Q++)I=m?F[Q]:F,U=g[Q],b=u[Q],Zw.validate(U,I)?b!==U&&b!==+U&&n.push(Jw("dynamic",r,c.concat(Q),U,b)):n.push(Jw("value",r,c.concat(Q),U))}else if(d.items&&!B&&Ww(g)){var v,C,A=F[Object.keys(F)[0]],L=[];for(v=0;v<u.length;v++){var G=u[v]._index||v;if((C=c.slice()).push(G),Hw(g[G])&&Hw(u[v])){L.push(G);var R=g[G],S=u[v];Hw(R)&&!1!==R.visible&&!1===S.visible?n.push(Jw("invisible",r,C)):Mw(R,S,A,n,r,C)}}for(v=0;v<g.length;v++)(C=c.slice()).push(v),Hw(g[v])?-1===L.indexOf(v)&&n.push(Jw("unused",r,C)):n.push(Jw("object",r,C,g[v]))}else!Hw(g)&&Hw(u)?n.push(Jw("object",r,c,g)):kw(g)||!kw(u)||B||p?l in e?Zw.validate(g,d)?"enumerated"===d.valType&&(d.coerceNumber&&g!==+u||g!==u)&&n.push(Jw("dynamic",r,c,g,u)):n.push(Jw("value",r,c,g)):n.push(Jw("unused",r,c,g)):n.push(Jw("array",r,c,g));else n.push(Jw("schema",r,c))}return n}var Tw={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":Yw(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":Yw(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return Yw(t)+"key "+e+" is not part of the schema"},unused:function(t,e,i){var n=Hw(i)?"container":"key";return Yw(t)+n+" "+e+" did not get coerced"},dynamic:function(t,e,i,n){return[Yw(t)+"key",e,"(set to '"+i+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?Yw(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,i){return[Yw(t)+"key "+e,"is set to an invalid value ("+i+")"].join(" ")}};function Yw(t){return Ww(t)?"In data trace "+t[1]+", ":"In "+t+", "}function Jw(t,e,i,n,r){var a,s;i=i||"",Ww(e)?(a=e[0],s=e[1]):(a=e,s=null);var o=function(t){if(!Ww(t))return String(t);for(var e="",i=0;i<t.length;i++){var n=t[i];"number"==typeof n?e=e.substr(0,e.length-1)+"["+n+"]":e+=n,i<t.length-1&&(e+=".")}return e}(i),l=Tw[t](e,o,n,r);return Zw.log(l),{code:t,container:a,trace:s,path:i,astr:o,msg:l}}function _w(t,e){var i=Kw(e),n=i.keyMinusId,r=i.id;return!!(n in t&&t[n]._isSubplotObj&&r)||e in t}function zw(t,e){return e in t?t[e]:t[Kw(e).keyMinusId]}var Ow=Zw.counterRegex("([a-z]+)");function Kw(t){var e=t.match(Ow);return{keyMinusId:e&&e[1],id:e&&e[2]}}var Pw=_B,jw=uw;var qw=function(t,e,i){var n=document.createElement("a"),r="download"in n;return new Promise((function(a,s){var o,l;if(r)return o=jw.createBlob(t,i),l=jw.createObjectURL(o),n.href=l,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),jw.revokeObjectURL(l),o=null,a(e);if(Pw.isSafari()){var c="svg"===i?",":";base64,";return jw.octetStream(c+encodeURIComponent(t)),a(e)}s(new Error("download error"))}))},$w=_B,tV=Ew,eV=qw;var iV=function(t,e){var i;return $w.isPlainObject(t)||(i=$w.getGraphDiv(t)),(e=e||{}).format=e.format||"png",e.width=e.width||null,e.height=e.height||null,e.imageDataOnly=!0,new Promise((function(n,r){i&&i._snapshotInProgress&&r(new Error("Snapshotting already in progress.")),i&&(i._snapshotInProgress=!0);var a=tV(t,e),s=e.filename||t.fn||"newplot";s+="."+e.format.replace("-","."),a.then((function(t){return i&&(i._snapshotInProgress=!1),eV(t,s,e.format)})).then((function(t){n(t)})).catch((function(t){i&&(i._snapshotInProgress=!1),r(t)}))}))},nV={},rV=_B,aV=rV.isPlainObject,sV=xp,oV=yF,lV=ru,cV=Ap,gV=Au.dfltConfig;function uV(t,e){t=rV.extendDeep({},t);var i,n,r=Object.keys(t).sort();function a(e,i,r){if(aV(i)&&aV(e))uV(e,i);else if(Array.isArray(i)&&Array.isArray(e)){var a=cV.arrayTemplater({_template:t},r);for(n=0;n<i.length;n++){var s=i[n],o=a.newItem(s)._template;o&&uV(o,s)}var l=a.defaultItems();for(n=0;n<l.length;n++)i.push(l[n]._template);for(n=0;n<i.length;n++)delete i[n].templateitemname}}for(i=0;i<r.length;i++){var s=r[i],o=t[s];if(s in e?a(o,e[s],s):e[s]=o,dV(s)===s)for(var l in e){var c=dV(l);l===c||c!==s||l in t||a(o,e[l],s)}}}function dV(t){return t.replace(/[0-9]+$/,"")}function hV(t,e,i,n,r){var a=r&&i(r);for(var s in t){var o=t[s],l=FV(t,s,n),c=FV(t,s,r),g=i(c);if(!g){var u=dV(s);u!==s&&(g=i(c=FV(t,u,r)))}if((!a||a!==g)&&!(!g||g._noTemplating||"data_array"===g.valType||g.arrayOk&&Array.isArray(o)))if(!g.valType&&aV(o))hV(o,e,i,l,c);else if(g._isLinkedToArray&&Array.isArray(o))for(var d=!1,h=0,B={},p=0;p<o.length;p++){var F=o[p];if(aV(F)){var f=F.name;if(f)B[f]||(hV(F,e,i,FV(o,h,l),FV(o,h,c)),h++,B[f]=1);else if(!d){var Q=FV(t,cV.arrayDefaultKey(s),n),I=FV(o,h,l);hV(F,e,i,I,FV(o,h,c));var U=rV.nestedProperty(e,I);rV.nestedProperty(e,Q).set(U.get()),U.set(null),d=!0}}}else{rV.nestedProperty(e,l).set(o)}}}function BV(t,e){return sV.getLayoutValObject(t,rV.nestedProperty({},e).parts)}function pV(t,e){return sV.getTraceValObject(t,rV.nestedProperty({},e).parts)}function FV(t,e,i){return i?Array.isArray(t)?i+"["+e+"]":i+"."+e:e}function fV(t){for(var e=0;e<t.length;e++)if(aV(t[e]))return!0}function QV(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}nV.makeTemplate=function(t){t=rV.isPlainObject(t)?t:rV.getGraphDiv(t),t=rV.extendDeep({_context:gV},{data:t.data,layout:t.layout}),oV.supplyDefaults(t);var e=t.data||[],i=t.layout||{};i._basePlotModules=t._fullLayout._basePlotModules,i._modules=t._fullLayout._modules;var n={data:{},layout:{}};e.forEach((function(t){var e={};hV(t,e,pV.bind(null,t));var i=rV.coerce(t,{},lV,"type"),r=n.data[i];r||(r=n.data[i]=[]),r.push(e)})),hV(i,n.layout,BV.bind(null,i)),delete n.layout.template;var r=i.template;if(aV(r)){var a,s,o,l,c,g,u=r.layout;aV(u)&&uV(u,n.layout);var d=r.data;if(aV(d)){for(s in n.data)if(o=d[s],Array.isArray(o)){for(g=(c=n.data[s]).length,l=o.length,a=0;a<g;a++)uV(o[a%l],c[a]);for(a=g;a<l;a++)c.push(rV.extendDeep({},o[a]))}for(s in d)s in n.data||(n.data[s]=rV.extendDeep([],d[s]))}}return n},nV.validateTemplate=function(t,e){var i=rV.extendDeep({},{_context:gV,data:t.data,layout:t.layout}),n=i.layout||{};aV(e)||(e=n.template||{});var r=e.layout,a=e.data,s=[];i.layout=n,i.layout.template=e,oV.supplyDefaults(i);var o=i._fullLayout,l=i._fullData,c={};if(aV(r)?(!function t(e,i){for(var n in e)if("_"!==n.charAt(0)&&aV(e[n])){var r,a=dV(n),s=[];for(r=0;r<i.length;r++)s.push(FV(e,n,i[r])),a!==n&&s.push(FV(e,a,i[r]));for(r=0;r<s.length;r++)c[s[r]]=1;t(e[n],s)}}(o,["layout"]),function t(e,i){for(var n in e)if(-1===n.indexOf("defaults")&&aV(e[n])){var r=FV(e,n,i);c[r]?t(e[n],r):s.push({code:"unused",path:r})}}(r,"layout")):s.push({code:"layout"}),aV(a)){for(var g,u={},d=0;d<l.length;d++){var h=l[d];u[g=h.type]=(u[g]||0)+1,h._fullInput._template||s.push({code:"missing",index:h.index,traceType:g})}for(g in a){var B=a[g].length,p=u[g]||0;B>p?s.push({code:"unused",traceType:g,templateCount:B,dataCount:p}):p>B&&s.push({code:"reused",traceType:g,templateCount:B,dataCount:p})}}else s.push({code:"data"});if(function t(e,i){for(var n in e)if("_"!==n.charAt(0)){var r=e[n],a=FV(e,n,i);aV(r)?(Array.isArray(e)&&!1===r._template&&r.templateitemname&&s.push({code:"missing",path:a,templateitemname:r.templateitemname}),t(r,a)):Array.isArray(r)&&fV(r)&&t(r,a)}}({data:l,layout:o},""),s.length)return s.map(QV)};var IV=$B;qB._doPlot=IV._doPlot,qB.newPlot=IV.newPlot,qB.restyle=IV.restyle,qB.relayout=IV.relayout,qB.redraw=IV.redraw,qB.update=IV.update,qB._guiRestyle=IV._guiRestyle,qB._guiRelayout=IV._guiRelayout,qB._guiUpdate=IV._guiUpdate,qB._storeDirectGUIEdit=IV._storeDirectGUIEdit,qB.react=IV.react,qB.extendTraces=IV.extendTraces,qB.prependTraces=IV.prependTraces,qB.addTraces=IV.addTraces,qB.deleteTraces=IV.deleteTraces,qB.moveTraces=IV.moveTraces,qB.purge=IV.purge,qB.addFrames=IV.addFrames,qB.deleteFrames=IV.deleteFrames,qB.animate=IV.animate,qB.setPlotConfig=IV.setPlotConfig;var UV=xd.getGraphDiv,bV=pA.eraseActiveShape;qB.deleteActiveShape=function(t){return bV(UV(t))},qB.toImage=Ew,qB.validate=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var i,n,r=Dw.get(),a=[],s={_context:Zw.extendFlat({},Xw)};Ww(t)?(s.data=Zw.extendDeep([],t),i=t):(s.data=[],i=[],a.push(Jw("array","data"))),Hw(e)?(s.layout=Zw.extendDeep({},e),n=e):(s.layout={},n={},arguments.length>1&&a.push(Jw("object","layout"))),Nw.supplyDefaults(s);for(var o=s._fullData,l=i.length,c=0;c<l;c++){var g=i[c],u=["data",c];if(Hw(g)){var d=o[c],h=d.type,B=r.traces[h].attributes;B.type={valType:"enumerated",values:[h]},!1===d.visible&&!1!==g.visible&&a.push(Jw("invisible",u)),Mw(g,d,B,a,u)}else a.push(Jw("object",u))}var p=s._fullLayout,F=function(t,e){for(var i=t.layout.layoutAttributes,n=0;n<e.length;n++){var r=e[n],a=t.traces[r.type],s=a.layoutAttributes;s&&(r.subplot?Zw.extendFlat(i[a.attributes.subplot.dflt],s):Zw.extendFlat(i,s))}return i}(r,o);return Mw(n,p,F,a,"layout"),0===a.length?void 0:a},qB.downloadImage=iV;var yV=nV;qB.makeTemplate=yV.makeTemplate,qB.validateTemplate=yV.validateTemplate;var mV=_B,xV=Nu,vV=_B.dateTick0,CV=tg.ONEWEEK;function AV(t,e){return vV(e,t%CV==0?1:0)}var LV=["orientation","groupnorm","stackgaps"],GV=Uu,RV=kF.hasColorscale,SV=vQ,wV=WQ,VV=function(t,e,i,n,r,a){var s=wV.isBubble(t),o=(t.line||{}).color;(a=a||{},o&&(i=o),r("marker.symbol"),r("marker.opacity",s?.7:1),r("marker.size"),a.noAngle||(r("marker.angle"),a.noAngleRef||r("marker.angleref"),a.noStandOff||r("marker.standoff")),r("marker.color",i),RV(t,"marker")&&SV(t,e,n,r,{prefix:"marker.",cLetter:"c"}),a.noSelect||(r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size")),a.noLine||(r("marker.line.color",o&&!Array.isArray(o)&&e.marker.color!==o?o:s?GV.background:GV.defaultLine),RV(t,"marker.line")&&SV(t,e,n,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width",s?1:0)),s&&(r("marker.sizeref"),r("marker.sizemin"),r("marker.sizemode")),a.gradient)&&("none"!==r("marker.gradient.type")&&r("marker.gradient.color"))},EV=_B.isArrayOrTypedArray,ZV=kF.hasColorscale,NV=vQ,DV=function(t,e,i,n,r,a){a||(a={});var s=(t.marker||{}).color;(s&&s._inputArray&&(s=s._inputArray),r("line.color",i),ZV(t,"line"))?NV(t,e,n,r,{prefix:"line.",cLetter:"c"}):r("line.color",!EV(s)&&s||i);r("line.width"),a.noDash||r("line.dash"),a.backoff&&r("line.backoff")},XV=_B,HV=function(t,e,i,n,r){r=r||{},n("textposition"),XV.coerceFont(n,"textfont",r.font||i.font,r),r.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))},WV=Uu,kV=_B.isArrayOrTypedArray;var MV=_B,TV=Nu,YV=qR,JV=DR,_V=WQ,zV=function(t,e,i,n){var r,a=n("x"),s=n("y");if(xV.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],i),a){var o=mV.minRowLength(a);s?r=Math.min(o,mV.minRowLength(s)):(r=o,n("y0"),n("dy"))}else{if(!s)return 0;r=mV.minRowLength(s),n("x0"),n("dx")}return e._length=r,r},OV=function(t,e,i,n,r){if(r||(r={x:!0,y:!0}),r.x){var a=n("xperiod");a&&(n("xperiod0",AV(a,e.xcalendar)),n("xperiodalignment"))}if(r.y){var s=n("yperiod");s&&(n("yperiod0",AV(s,e.ycalendar)),n("yperiodalignment"))}},KV=function(t,e,i,n){var r=i._scatterStackOpts,a=n("stackgroup");if(a){var s=e.xaxis+e.yaxis,o=r[s];o||(o=r[s]={});var l=o[a],c=!1;l?l.traces.push(e):(l=o[a]={traceIndices:[],traces:[e]},c=!0);for(var g={orientation:e.x&&!e.y?"h":"v"},u=0;u<LV.length;u++){var d=LV[u],h=d+"Found";if(!l[h]){var B=void 0!==t[d],p="orientation"===d;if((B||c)&&(l[d]=n(d,g[d]),p&&(l.fillDflt="h"===l[d]?"tonextx":"tonexty"),B&&(l[h]=!0,!c&&(delete l.traces[0][d],p))))for(var F=0;F<l.traces.length-1;F++){var f=l.traces[F];f._input.fill!==f.fill&&(f.fill=l.fillDflt)}}}return l}},PV=VV,jV=DV,qV=function(t,e,i){"spline"===i("line.shape")&&i("line.smoothing")},$V=HV,tE=function(t,e,i,n,r){r||(r={});var a,s=!1;if(e.marker){var o=e.marker.color,l=(e.marker.line||{}).color;o&&!kV(o)?s=o:l&&!kV(l)&&(s=l)}if(r.moduleHasFillgradient&&"none"!==n("fillgradient.type")){n("fillgradient.start"),n("fillgradient.stop");var c=n("fillgradient.colorscale");c&&(a=function(t){for(var e=WV.interpolate(t[0][1],t[1][1],.5),i=2;i<t.length;i++){var n=WV.interpolate(t[i-1][1],t[i][1],.5);e=WV.interpolate(e,n,t[i-1][0]/t[i][0])}return e}(c))}n("fillcolor",WV.addOpacity((e.line||{}).color||s||a||i,.5))},eE=_B.coercePattern,iE=IL.getAxisGroup,nE=function(t,e,i,n,r){var a=e.orientation,s=e[{v:"x",h:"y"}[a]+"axis"],o=iE(i,s)+a,l=i._alignmentOpts||{},c=n("alignmentgroup"),g=l[o];g||(g=l[o]={});var u=g[c];u?u.traces.push(e):u=g[c]={traces:[e],alignmentIndex:Object.keys(g).length,offsetGroups:{}};var d=n("offsetgroup")||"",h=u.offsetGroups,B=h[d];e._offsetIndex=0,("group"!==r||d)&&(B||(B=h[d]={offsetIndex:Object.keys(h).length}),e._offsetIndex=B.offsetIndex)},rE=_B,aE=nE,sE=qR,oE=_B,lE=Xp,cE=$c,gE=_B,uE=gE.dateTime2ms,dE=gE.incrementMonth,hE=tg.ONEAVGMONTH,BE=kF.hasColorscale,pE=NQ,FE=WQ,fE=function(t,e){FE.hasLines(e)&&BE(e,"line")&&pE(t,e,{vals:e.line.color,containerStr:"line"}),FE.hasMarkers(e)&&(BE(e,"marker")&&pE(t,e,{vals:e.marker.color,containerStr:"marker"}),BE(e,"marker.line")&&pE(t,e,{vals:e.marker.line.color,containerStr:"marker.line"}))},QE=_B,IE=function(t,e){for(var i=0;i<t.length;i++)t[i].i=i;QE.mergeArray(e.text,t,"tx"),QE.mergeArray(e.texttemplate,t,"txt"),QE.mergeArray(e.hovertext,t,"htx"),QE.mergeArray(e.customdata,t,"data"),QE.mergeArray(e.textposition,t,"tp"),e.textfont&&(QE.mergeArrayCastPositive(e.textfont.size,t,"ts"),QE.mergeArray(e.textfont.color,t,"tc"),QE.mergeArray(e.textfont.family,t,"tf"),QE.mergeArray(e.textfont.weight,t,"tw"),QE.mergeArray(e.textfont.style,t,"ty"),QE.mergeArray(e.textfont.variant,t,"tv"),QE.mergeArray(e.textfont.textcase,t,"tC"),QE.mergeArray(e.textfont.lineposition,t,"tE"),QE.mergeArray(e.textfont.shadow,t,"tS"));var n=e.marker;if(n){QE.mergeArrayCastPositive(n.size,t,"ms"),QE.mergeArrayCastPositive(n.opacity,t,"mo"),QE.mergeArray(n.symbol,t,"mx"),QE.mergeArray(n.angle,t,"ma"),QE.mergeArray(n.standoff,t,"mf"),QE.mergeArray(n.color,t,"mc");var r=n.line;n.line&&(QE.mergeArray(r.color,t,"mlc"),QE.mergeArrayCastPositive(r.width,t,"mlw"));var a=n.gradient;a&&"none"!==a.type&&(QE.mergeArray(a.type,t,"mgt"),QE.mergeArray(a.color,t,"mgc"))}},UE=_B,bE=$c,yE=_B,mE=Vy,xE=function(t,e,i,n){if("date"!==e.type)return{vals:n};var r=t[i+"periodalignment"];if(!r)return{vals:n};var a,s=t[i+"period"];if(cE(s)){if((s=+s)<=0)return{vals:n}}else if("string"==typeof s&&"M"===s.charAt(0)){var o=+s.substring(1);if(!(o>0&&Math.round(o)===o))return{vals:n};a=o}for(var l=e.calendar,c="start"===r,g="end"===r,u=t[i+"period0"],d=uE(u,l)||0,h=[],B=[],p=[],F=n.length,f=0;f<F;f++){var Q,I,U,b=n[f];if(a){for(Q=Math.round((b-d)/(a*hE)),U=dE(d,a*Q,l);U>b;)U=dE(U,-a,l);for(;U<=b;)U=dE(U,a,l);I=dE(U,-a,l)}else{for(U=d+(Q=Math.round((b-d)/s))*s;U>b;)U-=s;for(;U<=b;)U+=s;I=U-s}h[f]=c?I:g?U:(I+U)/2,B[f]=I,p[f]=U}return{vals:h,starts:B,ends:p}},vE=tg.BADNUM,CE=WQ,AE=fE,LE=IE,GE=function(t,e){UE.isArrayOrTypedArray(e.selectedpoints)&&UE.tagSelected(t,e)};function RE(t,e,i,n,r,a,s){var o=e._length,l=t._fullLayout,c=i._id,g=n._id,u=l._firstScatter[VE(e)]===e.uid,d=(EE(e,l,i,n)||{}).orientation,h=e.fill;i._minDtick=0,n._minDtick=0;var B={padded:!0},p={padded:!0};s&&(B.ppad=p.ppad=s);var F=o<2||r[0]!==r[o-1]||a[0]!==a[o-1];F&&("tozerox"===h||"tonextx"===h&&(u||"h"===d))?B.tozero=!0:(e.error_y||{}).visible||"tonexty"!==h&&"tozeroy"!==h&&(CE.hasMarkers(e)||CE.hasText(e))||(B.padded=!1,B.ppad=0),F&&("tozeroy"===h||"tonexty"===h&&(u||"v"===d))?p.tozero=!0:"tonextx"!==h&&"tozerox"!==h||(p.padded=!1),c&&(e._extremes[c]=mE.findExtremes(i,r,B)),g&&(e._extremes[g]=mE.findExtremes(n,a,p))}function SE(t,e){if(CE.hasMarkers(t)){var i,n=t.marker,r=1.6*(t.marker.sizeref||1);if(i="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/r),3)}:function(t){return Math.max((t||0)/r,3)},yE.isArrayOrTypedArray(n.size)){var a={type:"linear"};mE.setConvert(a);for(var s=a.makeCalcdata(t.marker,"size"),o=new Array(e),l=0;l<e;l++)o[l]=i(s[l]);return o}return i(n.size)}}function wE(t,e){var i=VE(e),n=t._firstScatter;n[i]||(n[i]=e.uid)}function VE(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function EE(t,e,i,n){var r=t.stackgroup;if(r){var a=e._scatterStackOpts[i._id+n._id][r],s="v"===a.orientation?n:i;return"linear"===s.type||"log"===s.type?a:void 0}}var ZE={calc:function(t,e){var i,n,r,a,s,o,l=t._fullLayout,c=e._xA=mE.getFromId(t,e.xaxis||"x","x"),g=e._yA=mE.getFromId(t,e.yaxis||"y","y"),u=c.makeCalcdata(e,"x"),d=g.makeCalcdata(e,"y"),h=xE(e,c,"x",u),B=xE(e,g,"y",d),p=h.vals,F=B.vals,f=e._length,Q=new Array(f),I=e.ids,U=EE(e,l,c,g),b=!1;wE(l,e);var y,m="x",x="y";U?(yE.pushUnique(U.traceIndices,e.index),(i="v"===U.orientation)?(x="s",y="x"):(m="s",y="y"),s="interpolate"===U.stackgaps):RE(t,e,c,g,p,F,SE(e,f));var v=!!e.xperiodalignment,C=!!e.yperiodalignment;for(n=0;n<f;n++){var A=Q[n]={},L=bE(p[n]),G=bE(F[n]);L&&G?(A[m]=p[n],A[x]=F[n],v&&(A.orig_x=u[n],A.xEnd=h.ends[n],A.xStart=h.starts[n]),C&&(A.orig_y=d[n],A.yEnd=B.ends[n],A.yStart=B.starts[n])):U&&(i?L:G)?(A[y]=i?p[n]:F[n],A.gap=!0,s?(A.s=vE,b=!0):A.s=0):A[m]=A[x]=vE,I&&(A.id=String(I[n]))}if(LE(Q,e),AE(t,e),GE(Q,e),U){for(n=0;n<Q.length;)Q[n][y]===vE?Q.splice(n,1):n++;if(yE.sort(Q,(function(t,e){return t[y]-e[y]||t.i-e.i})),b){for(n=0;n<Q.length-1&&Q[n].gap;)n++;for((o=Q[n].s)||(o=Q[n].s=0),r=0;r<n;r++)Q[r].s=o;for(a=Q.length-1;a>n&&Q[a].gap;)a--;for(o=Q[a].s,r=Q.length-1;r>a;r--)Q[r].s=o;for(;n<a;)if(Q[++n].gap){for(r=n+1;Q[r].gap;)r++;for(var R=Q[n-1][y],S=Q[n-1].s,w=(Q[r].s-S)/(Q[r][y]-R);n<r;)Q[n].s=S+(Q[n][y]-R)*w,n++}}}return Q},calcMarkerSize:SE,calcAxisExpansion:RE,setFirstScatter:wE,getStackOpts:EE},NE=XE,DE=_B.distinctVals;function XE(t,e){this.traces=t,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var i=1/0,n=e.posAxis._id.charAt(0),r=[],a=0;a<t.length;a++){for(var s=t[a],o=0;o<s.length;o++){var l=s[o],c=l.p;void 0===c&&(c=l[n]),void 0!==c&&r.push(c)}s[0]&&s[0].width1&&(i=Math.min(s[0].width1,i))}this.positions=r;var g=DE(r);this.distinctPositions=g.vals,1===g.vals.length&&i!==1/0?this.minDiff=i:this.minDiff=Math.min(g.minDiff,i);var u=(e.posAxis||{}).type;"category"!==u&&"multicategory"!==u||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}XE.prototype.put=function(t,e,i){var n=this.getLabel(t,e,i),r=this.bins[n]||0;return this.bins[n]=r+i,r},XE.prototype.get=function(t,e,i){var n=this.getLabel(t,e,i);return this.bins[n]||0},XE.prototype.getLabel=function(t,e,i){return(i<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?t:Math.round(t/this.binWidth))+"g"+e};var HE=$c,WE=_B.isArrayOrTypedArray,kE=tg.BADNUM,ME=Nu,TE=Vy,YE=IL.getAxisGroup,JE=NE;function _E(t,e,i,n,r){if(n.length){var a,s,o,l;switch(function(t,e){var i,n;for(i=0;i<e.length;i++){var r,a=e[i],s=a[0].trace,o="funnel"===s.type?s._base:s.base,l="h"===s.orientation?s.xcalendar:s.ycalendar,c="category"===t.type||"multicategory"===t.type?function(){return null}:t.d2c;if(WE(o)){for(n=0;n<Math.min(o.length,a.length);n++)r=c(o[n],0,l),HE(r)?(a[n].b=+r,a[n].hasB=1):a[n].b=0;for(;n<a.length;n++)a[n].b=0}else{r=c(o,0,l);var g=HE(r);for(r=g?r:0,n=0;n<a.length;n++)a[n].b=r,g&&(a[n].hasB=1)}}}(i,n),r.mode){case"overlay":zE(t,e,i,n,r);break;case"group":for(a=[],s=[],o=0;o<n.length;o++)void 0===(l=n[o])[0].trace.offset?s.push(l):a.push(l);s.length&&function(t,e,i,n,r){var a=new JE(n,{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});OE(t,e,a,r),function(t,e){for(var i=t.traces,n=0;n<i.length;n++){var r=i[n],a=r[0].trace,s=r[0].t.offsetindex;if(void 0===a.base)for(var o=new JE([r],{posAxis:e,sepNegVal:!0,overlapNoMerge:!0}),l=0;l<r.length;l++){var c=r[l];if(c.p!==kE){var g=o.put(c.p,s,c.b+c.s);g&&(c.b=g)}}}}(a,e),r.norm?(jE(a),qE(i,a,r)):PE(i,a)}(t,e,i,s,r),a.length&&zE(t,e,i,a,r);break;case"stack":case"relative":for(a=[],s=[],o=0;o<n.length;o++)void 0===(l=n[o])[0].trace.base?s.push(l):a.push(l);!function(t){if(t.length<2)return;var e,i,n,r,a,s;for(e=0;e<t.length&&void 0===(r=(i=t[e][0].trace).marker?i.marker.cornerradius:void 0);e++);if(void 0!==r)for(a=HE(r)?+r:+r.slice(0,-1),s=HE(r)?"px":"%",e=0;e<t.length;e++)(n=t[e][0].t).cornerradiusvalue=a,n.cornerradiusform=s}(s),s.length&&function(t,e,i,n,r){var a=new JE(n,{posAxis:e,sepNegVal:"relative"===r.mode,overlapNoMerge:!(r.norm||"stack"===r.mode||"relative"===r.mode)});OE(t,e,a,r),function(t,e,i){var n,r,a,s,o,l,c,g=$E(t),u=e.traces;for(s=0;s<u.length;s++)if("funnel"===(r=(n=u[s])[0].trace).type)for(c=n[0].t.offsetindex,o=0;o<n.length;o++)(l=n[o]).s!==kE&&e.put(l.p,c,-.5*l.s);for(s=0;s<u.length;s++){a="funnel"===(r=(n=u[s])[0].trace).type,c="barpolar"===r.type?0:n[0].t.offsetindex;var d=[];for(o=0;o<n.length;o++)if((l=n[o]).s!==kE){var h;h=a?l.s:l.s+l.b;var B=e.put(l.p,c,h),p=B+h;l.b=B,l[g]=p,i.norm||(d.push(p),l.hasB&&d.push(B))}i.norm||(r._extremes[t._id]=TE.findExtremes(t,d,{tozero:!0,padded:!0}))}}(i,a,r);for(var s=0;s<n.length;s++)for(var o=n[s],l=o[0].t.offsetindex,c=0;c<o.length;c++){var g=o[c];if(g.s!==kE)g.b+g.s===a.get(g.p,l,g.s)&&(g._outmost=!0)}r.norm&&qE(i,a,r)}(t,e,i,s,r),a.length&&zE(t,e,i,a,r)}!function(t){var e,i,n,r,a,s,o;for(e=0;e<t.length;e++)n=(i=t[e])[0].trace,void 0===(r=i[0].t).cornerradiusvalue&&void 0!==(a=n.marker?n.marker.cornerradius:void 0)&&(s=HE(a)?+a:+a.slice(0,-1),o=HE(a)?"px":"%",r.cornerradiusvalue=s,r.cornerradiusform=o)}(n),function(t,e){var i,n,r,a=$E(e),s={},o=1/0,l=-1/0;for(i=0;i<t.length;i++)for(r=t[i],n=0;n<r.length;n++){var c=r[n].p;HE(c)&&(o=Math.min(o,c),l=Math.max(l,c))}var g=1e4/(l-o),u=s.round=function(t){return String(Math.round(g*(t-o)))},d={},h={},B=t.some((function(t){var e=t[0].trace;return"marker"in e&&e.marker.cornerradius}));for(i=0;i<t.length;i++){(r=t[i])[0].t.extents=s;var p=r[0].t.poffset,F=WE(p);for(n=0;n<r.length;n++){var f=r[n],Q=f[a]-f.w/2;if(HE(Q)){var I=f[a]+f.w/2,U=u(f.p);s[U]?s[U]=[Math.min(Q,s[U][0]),Math.max(I,s[U][1])]:s[U]=[Q,I]}if(f.p0=f.p+(F?p[n]:p),f.p1=f.p0+f.w,f.s0=f.b,f.s1=f.s0+f.s,B){var b=Math.min(f.s0,f.s1)||0,y=Math.max(f.s0,f.s1)||0,m=f[a];d[m]=m in d?Math.min(d[m],b):b,h[m]=m in h?Math.max(h[m],y):y}}}B&&function(t,e,i,n){for(var r=$E(n),a=0;a<t.length;a++)for(var s=t[a],o=0;o<s.length;o++){var l=s[o],c=l[r];l._sMin=e[c],l._sMax=i[c]}}(t,d,h,e)}(n,e)}}function zE(t,e,i,n,r){for(var a=0;a<n.length;a++){var s=n[a],o=new JE([s],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});OE(t,e,o,r),r.norm?(jE(o),qE(i,o,r)):PE(i,o)}}function OE(t,e,i,n){var r,a,s,o,l=t._fullLayout,c=i.positions,g=i.distinctPositions,u=i.minDiff,d=i.traces,h=d.length,B=c.length!==g.length,p=u*(1-n.gap);if("angularaxis"===e._id)s=-(a=(r=p)*(1-(n.groupgap||0)))/2;else{var F=YE(l,e._id)+d[0][0].trace.orientation;o=l._alignmentOpts[F]||{}}for(var f=0;f<h;f++){var Q=d[f],I=Q[0].trace;if("angularaxis"!==e._id){var U=o[I.alignmentgroup]||{},b=Object.keys(U.offsetGroups||{}).length;a=(r=b?p/b:B?p/h:p)*(1-(n.groupgap||0)),s=b?((2*I._offsetIndex+1-b)*r-a)/2:B?((2*f+1-h)*r-a)/2:-a/2}var y=Q[0].t;y.barwidth=a,y.offsetindex=I._offsetIndex||0,y.poffset=s,y.bargroupwidth=p,y.bardelta=u}i.binWidth=d[0][0].t.barwidth/100,function(t){var e,i,n=t.traces;for(e=0;e<n.length;e++){var r,a=n[e],s=a[0],o=s.trace,l=s.t,c=o._offset||o.offset,g=l.poffset;if(WE(c)){for(r=Array.prototype.slice.call(c,0,a.length),i=0;i<r.length;i++)HE(r[i])||(r[i]=g);for(i=r.length;i<a.length;i++)r.push(g);l.poffset=r}else void 0!==c&&(l.poffset=c);var u=o._width||o.width,d=l.barwidth;if(WE(u)){var h=Array.prototype.slice.call(u,0,a.length);for(i=0;i<h.length;i++)HE(h[i])||(h[i]=d);for(i=h.length;i<a.length;i++)h.push(d);if(l.barwidth=h,void 0===c){for(r=[],i=0;i<a.length;i++)r.push(g+(d-h[i])/2);l.poffset=r}}else void 0!==u&&(l.barwidth=u,void 0===c&&(l.poffset=g+(d-u)/2))}}(i),function(t,e){for(var i=e.traces,n=$E(t),r=0;r<i.length;r++)for(var a=i[r],s=a[0].t,o=s.poffset,l=WE(o),c=s.barwidth,g=WE(c),u=0;u<a.length;u++){var d=a[u],h=d.w=g?c[u]:c;void 0===d.p&&(d.p=d[n],d["orig_"+n]=d[n]);var B=(l?o[u]:o)+h/2;d[n]=d.p+B}}(e,i),"angularaxis"===e._id?KE(e,i):KE(e,i,B)}function KE(t,e,i){var n=e.traces,r=e.minDiff/2;TE.minDtick(t,e.minDiff,e.distinctPositions[0],i);for(var a=0;a<n.length;a++){var s,o,l,c,g=n[a],u=g[0],d=u.trace,h=[];for(c=0;c<g.length;c++)o=(s=g[c]).p-r,l=s.p+r,h.push(o,l);if(d.width||d.offset){var B=u.t,p=B.poffset,F=B.barwidth,f=WE(p),Q=WE(F);for(c=0;c<g.length;c++){s=g[c];var I=f?p[c]:p,U=Q?F[c]:F;l=(o=s.p+I)+U,h.push(o,l)}}d._extremes[t._id]=TE.findExtremes(t,h,{padded:!1})}}function PE(t,e){for(var i=e.traces,n=$E(t),r=0;r<i.length;r++){for(var a=i[r],s=a[0].trace,o="scatter"===s.type,l="v"===s.orientation,c=[],g=!1,u=0;u<a.length;u++){var d=a[u],h=o?0:d.b,B=o?l?d.y:d.x:h+d.s;d[n]=B,c.push(B),d.hasB&&c.push(h),d.hasB&&d.b||(g=!0)}s._extremes[t._id]=TE.findExtremes(t,c,{tozero:g,padded:!0})}}function jE(t){for(var e=t.traces,i=0;i<e.length;i++)for(var n=e[i],r=n[0].t.offsetindex,a=0;a<n.length;a++){var s=n[a];s.s!==kE&&t.put(s.p,r,s.b+s.s)}}function qE(t,e,i){var n=e.traces,r=$E(t),a="fraction"===i.norm?1:100,s=a/1e9,o=t.l2c(t.c2l(0)),l="stack"===i.mode?a:o;function c(e){return HE(t.c2l(e))&&(e<o-s||e>l+s||!HE(o))}for(var g=0;g<n.length;g++){for(var u=n[g],d=u[0].t.offsetindex,h=u[0].trace,B=[],p=!1,F=!1,f=0;f<u.length;f++){var Q=u[f];if(Q.s!==kE){var I=Math.abs(a/e.get(Q.p,d,Q.s));Q.b*=I,Q.s*=I;var U=Q.b,b=U+Q.s;Q[r]=b,B.push(b),F=F||c(b),Q.hasB&&(B.push(U),F=F||c(U)),Q.hasB&&Q.b||(p=!0)}}h._extremes[t._id]=TE.findExtremes(t,B,{tozero:p,padded:F})}}function $E(t){return t._id.charAt(0)}var tZ={crossTraceCalc:function(t,e){for(var i=e.xaxis,n=e.yaxis,r=t._fullLayout,a=t._fullData,s=t.calcdata,o=[],l=[],c=0;c<a.length;c++){var g=a[c];if(!0===g.visible&&ME.traceIs(g,"bar")&&g.xaxis===i._id&&g.yaxis===n._id&&("h"===g.orientation?o.push(s[c]):l.push(s[c]),g._computePh))for(var u=t.calcdata[c],d=0;d<u.length;d++)"function"==typeof u[d].ph0&&(u[d].ph0=u[d].ph0()),"function"==typeof u[d].ph1&&(u[d].ph1=u[d].ph1())}var h={xCat:"category"===i.type||"multicategory"===i.type,yCat:"category"===n.type||"multicategory"===n.type,mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap};_E(t,i,n,l,h),_E(t,n,i,o,h)},setGroupPositions:_E},eZ=ZE,iZ=tZ.setGroupPositions;function nZ(t,e,i,n,r,a,s){r[n]=!0;var o={i:null,gap:!0,s:0};if(o[s]=i,t.splice(e,0,o),e&&i===t[e-1][s]){var l=t[e-1];o.s=l.s,o.i=l.i,o.gap=l.gap}else a&&(o.s=function(t,e,i,n){var r=t[e-1],a=t[e+1];return a?r?r.s+(a.s-r.s)*(i-r[n])/(a[n]-r[n]):a.s:r.s}(t,e,i,s));e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}var rZ=jI,aZ=tg,sZ=aZ.BADNUM,oZ=aZ.LOG_CLIP,lZ=oZ+.5,cZ=oZ-.5,gZ=_B,uZ=gZ.segmentsIntersect,dZ=gZ.constrain,hZ=DR,BZ={tonextx:1,tonexty:1,tonext:1},pZ=Js,FZ=Nu,fZ=_B,QZ=fZ.ensureSingle,IZ=fZ.identity,UZ=jI,bZ=WQ,yZ=function(t,e){var i,n,r,a,s,o,l,c,g,u,d,h,B,p,F,f,Q,I,U=e.trace||{},b=e.xaxis,y=e.yaxis,m="log"===b.type,x="log"===y.type,v=b._length,C=y._length,A=e.backoff,L=U.marker,G=e.connectGaps,R=e.baseTolerance,S=e.shape,w="linear"===S,V=U.fill&&"none"!==U.fill,E=[],Z=hZ.minTolerance,N=t.length,D=new Array(N),X=0;function H(i){var n=t[i];if(!n)return!1;var r=e.linearized?b.l2p(n.x):b.c2p(n.x),a=e.linearized?y.l2p(n.y):y.c2p(n.y);if(r===sZ){if(m&&(r=b.c2p(n.x,!0)),r===sZ)return!1;x&&a===sZ&&(r*=Math.abs(b._m*C*(b._m>0?lZ:cZ)/(y._m*v*(y._m>0?lZ:cZ)))),r*=1e3}if(a===sZ){if(x&&(a=y.c2p(n.y,!0)),a===sZ)return!1;a*=1e3}return[r,a]}function W(t,e,i,n){var r=i-t,a=n-e,s=.5-t,o=.5-e,l=r*r+a*a,c=r*s+a*o;if(c>0&&c<l){var g=s*a-o*r;if(g*g<l)return!0}}function k(t,e){var i=t[0]/v,n=t[1]/C,r=Math.max(0,-i,i-1,-n,n-1);return r&&void 0!==Q&&W(i,n,Q,I)&&(r=0),r&&e&&W(i,n,e[0]/v,e[1]/C)&&(r=0),(1+hZ.toleranceGrowth*r)*R}function M(t,e){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)}var T,Y,J,_,z,O,K,P=hZ.maxScreensAway,j=-v*P,q=v*(1+P),$=-C*P,tt=C*(1+P),et=[[j,$,q,$],[q,$,q,tt],[q,tt,j,tt],[j,tt,j,$]];function it(t){if(t[0]<j||t[0]>q||t[1]<$||t[1]>tt)return[dZ(t[0],j,q),dZ(t[1],$,tt)]}function nt(t,e){return t[0]===e[0]&&(t[0]===j||t[0]===q)||(t[1]===e[1]&&(t[1]===$||t[1]===tt)||void 0)}function rt(t,e,i){return function(n,r){var a=it(n),s=it(r),o=[];if(a&&s&&nt(a,s))return o;a&&o.push(a),s&&o.push(s);var l=2*gZ.constrain((n[t]+r[t])/2,e,i)-((a||n)[t]+(s||r)[t]);l&&((a&&s?l>0==a[t]>s[t]?a:s:a||s)[t]+=l);return o}}function at(t){var e=t[0],i=t[1],n=e===D[X-1][0],r=i===D[X-1][1];if(!n||!r)if(X>1){var a=e===D[X-2][0],s=i===D[X-2][1];n&&(e===j||e===q)&&a?s?X--:D[X-1]=t:r&&(i===$||i===tt)&&s?a?X--:D[X-1]=t:D[X++]=t}else D[X++]=t}function st(t){D[X-1][0]!==t[0]&&D[X-1][1]!==t[1]&&at([J,_]),at(t),z=null,J=_=0}"linear"===S||"spline"===S?K=function(t,e){for(var i=[],n=0,r=0;r<4;r++){var a=et[r],s=uZ(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);s&&(!n||Math.abs(s.x-i[0][0])>1||Math.abs(s.y-i[0][1])>1)&&(s=[s.x,s.y],n&&M(s,t)<M(i[0],t)?i.unshift(s):i.push(s),n++)}return i}:"hv"===S||"vh"===S?K=function(t,e){var i=[],n=it(t),r=it(e);return n&&r&&nt(n,r)||(n&&i.push(n),r&&i.push(r)),i}:"hvh"===S?K=rt(0,j,q):"vhv"===S&&(K=rt(1,$,tt));var ot=gZ.isArrayOrTypedArray(L);function lt(e){if(e&&A&&(e.i=i,e.d=t,e.trace=U,e.marker=ot?L[e.i]:L,e.backoff=A),Q=e[0]/v,I=e[1]/C,T=e[0]<j?j:e[0]>q?q:0,Y=e[1]<$?$:e[1]>tt?tt:0,T||Y){if(X)if(z){var n=K(z,e);n.length>1&&(st(n[0]),D[X++]=n[1])}else O=K(D[X-1],e)[0],D[X++]=O;else D[X++]=[T||e[0],Y||e[1]];var r=D[X-1];T&&Y&&(r[0]!==T||r[1]!==Y)?(z&&(J!==T&&_!==Y?at(J&&_?function(t,e){var i=e[0]-t[0],n=(e[1]-t[1])/i;return(t[1]*e[0]-e[1]*t[0])/i>0?[n>0?j:q,tt]:[n>0?q:j,$]}(z,e):[J||T,_||Y]):J&&_&&at([J,_])),at([T,Y])):J-T&&_-Y&&at([T||J,Y||_]),z=e,J=T,_=Y}else z&&st(K(z,e)[0]),D[X++]=e}for(i=0;i<N;i++)if(n=H(i)){for(X=0,z=null,lt(n),i++;i<N;i++){if(!(a=H(i))){if(G)continue;break}if(w&&e.simplify){var ct=H(i+1);if(u=M(a,n),V&&(0===X||X===N-1)||!(u<k(a,ct)*Z)){for(c=[(a[0]-n[0])/u,(a[1]-n[1])/u],s=n,d=u,h=p=F=0,l=!1,r=a,i++;i<t.length;i++){if(o=ct,ct=H(i+1),!o){if(G)continue;break}if(f=(g=[o[0]-n[0],o[1]-n[1]])[0]*c[1]-g[1]*c[0],p=Math.min(p,f),(F=Math.max(F,f))-p>k(o,ct))break;r=o,(B=g[0]*c[0]+g[1]*c[1])>d?(d=B,a=o,l=!1):B<h&&(h=B,s=o,l=!0)}if(l?(lt(a),r!==s&&lt(s)):(s!==n&&lt(s),r!==a&&lt(a)),lt(r),i>=t.length||!o)break;lt(o),n=o}}else lt(a)}z&&at([J||z[0],_||z[1]]),E.push(D.slice(0,X))}var gt=S.slice(S.length-1);if(A&&"h"!==gt&&"v"!==gt){for(var ut=!1,dt=-1,ht=[],Bt=0;Bt<E.length;Bt++)for(var pt=0;pt<E[Bt].length-1;pt++){var Ft=E[Bt][pt],ft=E[Bt][pt+1],Qt=rZ.applyBackoff(ft,Ft);Qt[0]===ft[0]&&Qt[1]===ft[1]||(ut=!0),ht[dt+1]||(ht[++dt]=[Ft,[Qt[0],Qt[1]]])}return ut?ht:E}return E},mZ=function(t,e,i){var n,r,a,s,o,l={},c=!1,g=-1,u=0,d=-1;for(r=0;r<i.length;r++)(a=(n=i[r][0].trace).stackgroup||"")?a in l?o=l[a]:(o=l[a]=u,u++):n.fill in BZ&&d>=0?o=d:(o=d=u,u++),o<g&&(c=!0),n._groupIndex=g=o;var h=i.slice();c&&h.sort((function(t,e){var i=t[0].trace,n=e[0].trace;return i._groupIndex-n._groupIndex||i.index-n.index}));var B={};for(r=0;r<h.length;r++)a=(n=h[r][0].trace).stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in BZ&&(s=B[a],n._prevtrace=s||null,s&&(s._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace),B[a]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return h},xZ=IG.tester;function vZ(t,e,i,n,r,a,s){var o,l=t._context.staticPlot;!function(t,e,i,n,r){var a=i.xaxis,s=i.yaxis,o=pZ.extent(fZ.simpleMap(a.range,a.r2c)),l=pZ.extent(fZ.simpleMap(s.range,s.r2c)),c=n[0].trace;if(!bZ.hasMarkers(c))return;var g=c.marker.maxdisplayed;if(0===g)return;var u=n.filter((function(t){return t.x>=o[0]&&t.x<=o[1]&&t.y>=l[0]&&t.y<=l[1]})),d=Math.ceil(u.length/g),h=0;r.forEach((function(t,i){var n=t[0].trace;bZ.hasMarkers(n)&&n.marker.maxdisplayed>0&&i<e&&h++}));var B=Math.round(h*d/3+Math.floor(h/3)*d/7.1);n.forEach((function(t){delete t.vis})),u.forEach((function(t,e){0===Math.round((e+B)%d)&&(t.vis=!0)}))}(0,e,i,n,r);var c=!!s&&s.duration>0;function g(t){return c?t.transition():t}var u=i.xaxis,d=i.yaxis,h=n[0].trace,B=h.line,p=pZ.select(a),F=QZ(p,"g","errorbars"),f=QZ(p,"g","lines"),Q=QZ(p,"g","points"),I=QZ(p,"g","text");if(FZ.getComponentMethod("errorbars","plot")(t,F,i,s),!0===h.visible){var U,b;g(p).style("opacity",h.opacity);var y,m,x=h.fill.charAt(h.fill.length-1);"x"!==x&&"y"!==x&&(x=""),"y"===x?(y=1,m=d.c2p(0,!0)):"x"===x&&(y=0,m=u.c2p(0,!0)),n[0][i.isRangePlot?"nodeRangePlot3":"node3"]=p;var v,C,A="",L=[],G=h._prevtrace,R=null,S=null;G&&(A=G._prevRevpath||"",b=G._nextFill,L=G._ownPolygons,R=G._fillsegments,S=G._fillElement);var w,V,E,Z,N,D,X="",H="",W=[];h._polygons=[];var k=[],M=[],T=fZ.noop;if(U=h._ownFill,bZ.hasLines(h)||"none"!==h.fill){b&&b.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(B.shape)?(w=UZ.steps(B.shape),V=UZ.steps(B.shape.split("").reverse().join(""))):w=V="spline"===B.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?UZ.smoothclosed(t.slice(1),B.smoothing):UZ.smoothopen(t,B.smoothing)}:function(t){return"M"+t.join("L")},E=function(t){return V(t.reverse())},M=yZ(n,{xaxis:u,yaxis:d,trace:h,connectGaps:h.connectgaps,baseTolerance:Math.max(B.width||1,3)/4,shape:B.shape,backoff:B.backoff,simplify:B.simplify,fill:h.fill}),k=new Array(M.length);var Y=0;for(o=0;o<M.length;o++){var J,_=M[o];J&&x?J.push.apply(J,_):(J=_.slice(),k[Y]=J,Y++)}h._fillElement=null,h._fillExclusionElement=S,h._fillsegments=k.slice(0,Y),k=h._fillsegments,M.length&&(Z=M[0][0].slice(),D=(N=M[M.length-1])[N.length-1].slice()),T=function(t){return function(e){if(v=w(e),C=E(e),X?x?(X+="L"+v.substr(1),H=C+"L"+H.substr(1)):(X+="Z"+v,H=C+"Z"+H):(X=v,H=C),bZ.hasLines(h)){var i=pZ.select(this);if(i.datum(n),t)g(i.style("opacity",0).attr("d",v).call(UZ.lineGroupStyle)).style("opacity",1);else{var r=g(i);r.attr("d",v),UZ.singleLineStyle(n,r)}}}}}var z=f.selectAll(".js-line").data(M);g(z.exit()).style("opacity",0).remove(),z.each(T(!1)),z.enter().append("path").classed("js-line",!0).style("vector-effect",l?"none":"non-scaling-stroke").call(UZ.lineGroupStyle).each(T(!0)),UZ.setClipUrl(z,i.layerClipId,t);var O=function(){var t=new Array(k.length);for(o=0;o<k.length;o++)t[o]=xZ(k[o]);return t},K=function(t){var e,i;if(t&&0!==t.length){for(e=new Array(t.length-1+k.length),i=0;i<t.length-1;i++)e[i]=xZ(t[i]);var n=t[t.length-1].slice();for(n.reverse(),i=0;i<k.length;i++)e[t.length-1+i]=xZ(k[i].concat(n))}else for(e=new Array(k.length),i=0;i<k.length;i++){var r=k[i][0].slice(),a=k[i][k[i].length-1].slice();r[y]=a[y]=m;var s=[a,r].concat(k[i]);e[i]=xZ(s)}return e};M.length?(U?(U.datum(n),Z&&D&&(x?(Z[y]=D[y]=m,g(U).attr("d","M"+D+"L"+Z+"L"+X.substr(1)).call(UZ.singleFillStyle,t),W=K(null)):(g(U).attr("d",X+"Z").call(UZ.singleFillStyle,t),W=O())),h._polygons=W,h._fillElement=U):b&&("tonext"===h.fill.substr(0,6)&&X&&A?("tonext"===h.fill?(g(b).attr("d",X+"Z"+A+"Z").call(UZ.singleFillStyle,t),W=O(),h._polygons=W.concat(L)):(g(b).attr("d",X+"L"+A.substr(1)+"Z").call(UZ.singleFillStyle,t),W=K(R),h._polygons=W),h._fillElement=b):j(b)),h._prevRevpath=H):(U?j(U):b&&j(b),h._prevRevpath=null),h._ownPolygons=W,Q.datum(n),I.datum(n),function(e,n,r){var a,s=r[0].trace,o=bZ.hasMarkers(s),l=bZ.hasText(s),h=it(s),B=nt,p=nt;if(o||l){var F=IZ,f=s.stackgroup,Q=f&&"infer zero"===t._fullLayout._scatterStackOpts[u._id+d._id][f].stackgaps;s.marker.maxdisplayed||s._needsCull?F=Q?$:q:f&&!Q&&(F=tt),o&&(B=F),l&&(p=F)}var I,U=(a=e.selectAll("path.point").data(B,h)).enter().append("path").classed("point",!0);c&&U.call(UZ.pointStyle,s,t).call(UZ.translatePoints,u,d).style("opacity",0).transition().style("opacity",1),a.order(),o&&(I=UZ.makePointStyleFns(s)),a.each((function(e){var n=pZ.select(this),r=g(n);UZ.translatePoint(e,r,u,d)?(UZ.singlePointStyle(e,r,s,I,t),i.layerClipId&&UZ.hideOutsideRangePoint(e,r,u,d,s.xcalendar,s.ycalendar),s.customdata&&n.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):r.remove()})),c?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=n.selectAll("g").data(p,h)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each((function(t){var e=pZ.select(this),n=g(e.select("text"));UZ.translatePoint(t,n,u,d)?i.layerClipId&&UZ.hideOutsideRangePoint(t,e,u,d,s.xcalendar,s.ycalendar):e.remove()})),a.selectAll("text").call(UZ.textPointStyle,s,t).each((function(t){var e=u.c2p(t.x),i=d.c2p(t.y);pZ.select(this).selectAll("tspan.line").each((function(){g(pZ.select(this)).attr({x:e,y:i})}))})),a.exit().remove()}(Q,I,n);var P=!1===h.cliponaxis?null:i.layerClipId;UZ.setClipUrl(Q,P,t),UZ.setClipUrl(I,P,t)}function j(t){g(t).attr("d","M0,0Z")}function q(t){return t.filter((function(t){return!t.gap&&t.vis}))}function $(t){return t.filter((function(t){return t.vis}))}function tt(t){return t.filter((function(t){return!t.gap}))}function et(t){return t.id}function it(t){if(t.ids)return et}function nt(){return!1}}var CZ={container:"marker",min:"cmin",max:"cmax"},AZ=Vy,LZ=Js,GZ=jI,RZ=Nu;function SZ(t,e,i){GZ.pointStyle(t.selectAll("path.point"),e,i)}function wZ(t,e,i){GZ.textPointStyle(t.selectAll("text"),e,i)}var VZ,EZ,ZZ,NZ,DZ={style:function(t){var e=LZ.select(t).selectAll("g.trace.scatter");e.style("opacity",(function(t){return t[0].trace.opacity})),e.selectAll("g.points").each((function(e){SZ(LZ.select(this),e.trace||e[0].trace,t)})),e.selectAll("g.text").each((function(e){wZ(LZ.select(this),e.trace||e[0].trace,t)})),e.selectAll("g.trace path.js-line").call(GZ.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(GZ.fillGroupStyle,t,!1),RZ.getComponentMethod("errorbars","style")(e)},styleOnSelect:function(t,e,i){var n=e[0].trace;n.selectedpoints?(GZ.selectedPointStyle(i.selectAll("path.point"),n),GZ.selectedTextStyle(i.selectAll("text"),n)):(SZ(i,n,t),wZ(i,n,t))}},XZ=Uu,HZ=WQ,WZ=_B,kZ=Wv,MZ=Nu,TZ=function(t,e){var i,n;if("lines"===t.mode)return(i=t.line.color)&&XZ.opacity(i)?i:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var r=e.mcc||(t.marker||{}).color,a=e.mlcc||((t.marker||{}).line||{}).color;return(n=r&&XZ.opacity(r)?r:a&&XZ.opacity(a)&&(e.mlw||((t.marker||{}).line||{}).width)?a:"")?XZ.opacity(n)<.3?XZ.addOpacity(n,.3):n:(i=(t.line||{}).color)&&XZ.opacity(i)&&HZ.hasLines(t)&&t.line.width?i:t.fillcolor},YZ=Uu,JZ=WZ.fillText,_Z=WQ,zZ={};function OZ(){if(NZ)return ZZ;NZ=1;var t=Nu.traceIs,e=_U;function i(t){return{v:"x",h:"y"}[t.orientation||"v"]}function n(e,n){var r=i(e),a=t(e,"box-violin"),s=t(e._fullInput||{},"candlestick");return a&&!s&&n===r&&void 0===e[r]&&void 0===e[r+"0"]}return ZZ=function(r,a,s,o){s("autotypenumbers",o.autotypenumbersDflt),"-"===s("type",(o.splomStash||{}).type)&&(!function(r,a){if("-"!==r.type)return;var s,o=r._id,l=o.charAt(0);-1!==o.indexOf("scene")&&(o=l);var c=function(t,e,i){for(var r=0;r<t.length;r++){var a=t[r];if("splom"===a.type&&a._length>0&&(a["_"+i+"axes"]||{})[e])return a;if((a[i+"axis"]||i)===e){if(n(a,i))return a;if((a[i]||[]).length||a[i+"0"])return a}}}(a,o,l);if(!c)return;if("histogram"===c.type&&l==={v:"y",h:"x"}[c.orientation||"v"])return void(r.type="linear");var g=l+"calendar",u=c[g],d={noMultiCategory:!t(c,"cartesian")||t(c,"noMultiCategory")};"box"===c.type&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(d.noMultiCategory=!0);if(d.autotypenumbers=r.autotypenumbers,n(c,l)){var h=i(c),B=[];for(s=0;s<a.length;s++){var p=a[s];t(p,"box-violin")&&(p[l+"axis"]||l)===o&&(void 0!==p[h]?B.push(p[h][0]):void 0!==p.name?B.push(p.name):B.push("text"),p[g]!==u&&(u=void 0))}r.type=e(B,u,d)}else if("splom"===c.type){var F=c.dimensions[c._axesDim[o]];F.visible&&(r.type=e(F.values,u,d))}else r.type=e(c[l]||[c[l+"0"]],u,d)}(a,o.data),"-"===a.type?a.type="linear":r.type=a.type)},ZZ}var KZ=eg.isTypedArraySpec;var PZ=kg.mix,jZ=uu,qZ=_B,$Z=$c,tN=Nu,eN=_B,iN=Ap,nN=tQ,rN=If,aN=zf,sN=Pf,oN=sQ,lN=cQ,cN=function(t,e,i,n){if("category"===e.type){var r,a=t.categoryarray,s=Array.isArray(a)&&a.length>0||KZ(a);s&&(r="array");var o,l=i("categoryorder",r);"array"===l&&(o=i("categoryarray")),s||"array"!==l||(l=e.categoryorder="trace"),"trace"===l?e._initialCategories=[]:"array"===l?e._initialCategories=o.slice():(o=function(t,e){var i,n,r,a=e.dataAttr||t._id.charAt(0),s={};if(e.axData)i=e.axData;else for(i=[],n=0;n<e.data.length;n++){var o=e.data[n];o[a+"axis"]===t._id&&i.push(o)}for(n=0;n<i.length;n++){var l=i[n][a];for(r=0;r<l.length;r++){var c=l[r];null!=c&&(s[c]=1)}}return Object.keys(s)}(e,n).sort(),"category ascending"===l?e._initialCategories=o:"category descending"===l&&(e._initialCategories=o.reverse()))}},gN=function(t,e,i,n){var r=(n=n||{}).dfltColor;function a(i,r){return qZ.coerce2(t,e,n.attributes,i,r)}var s=a("linecolor",r),o=a("linewidth");i("showline",n.showLine||!!s||!!o)||(delete e.linecolor,delete e.linewidth);var l=a("gridcolor",PZ(r,n.bgColor,n.blend||jZ.lightFraction).toRgbString()),c=a("gridwidth"),g=a("griddash");if(i("showgrid",n.showGrid||!!l||!!c||!!g)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),n.hasMinor){var u=a("minor.gridcolor",PZ(e.gridcolor,n.bgColor,67).toRgbString()),d=a("minor.gridwidth",e.gridwidth||1),h=a("minor.griddash",e.griddash||"solid");i("minor.showgrid",!!u||!!d||!!h)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!n.noZeroLine){var B=a("zerolinecolor",r),p=a("zerolinewidth");i("zeroline",n.showGrid||!!B||!!p)||(delete e.zerolinecolor,delete e.zerolinewidth)}},uN=Zy,dN=XU,hN=Np.WEEKDAY_PATTERN,BN=Np.HOUR_PATTERN,pN=function(t,e,i,n,r){var a,s=n.letter,o=n.font||{},l=n.splomStash||{},c=i("visible",!n.visibleDflt),g=e._template||{},u=e.type||g.type||"-";"date"===u&&(tN.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",n.calendar),n.noTicklabelmode||(a=i("ticklabelmode")));n.noTicklabelindex||"date"!==u&&"linear"!==u||i("ticklabelindex");var d="";n.noTicklabelposition&&"multicategory"!==u||(d=eN.coerce(t,e,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===a?["outside","inside"]:"x"===s?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),n.noTicklabeloverflow||i("ticklabeloverflow",-1!==d.indexOf("inside")?"hide past domain":"category"===u||"multicategory"===u?"allow":"hide past div"),dN(e,r),uN(t,e,i,n),cN(t,e,i,n),"category"===u||n.noHover||i("hoverformat");var h=i("color"),B=h!==rN.color.dflt?h:o.color,p=l.label||r._dfltTitle[s];if(lN(t,e,i,u,n),!c)return e;i("title.text",p),eN.coerceFont(i,"title.font",o,{overrideDflt:{size:eN.bigFont(o.size),color:B}}),aN(t,e,i,u);var F=n.hasMinor;if(F&&(iN.newContainer(e,"minor"),aN(t,e,i,u,{isMinor:!0})),oN(t,e,i,u,n),sN(t,e,i,n),F){var f=n.isMinor;n.isMinor=!0,sN(t,e,i,n),n.isMinor=f}gN(t,e,i,{dfltColor:h,bgColor:n.bgColor,showGrid:n.showGrid,hasMinor:F,attributes:rN}),!F||e.minor.ticks||e.minor.showgrid||delete e.minor,(e.showline||e.ticks)&&i("mirror");var Q,I="multicategory"===u;n.noTickson||"category"!==u&&!I||!e.ticks&&!e.showgrid||(I&&(Q="boundaries"),"boundaries"===i("tickson",Q)&&delete e.ticklabelposition);I&&(i("showdividers")&&(i("dividercolor"),i("dividerwidth")));if("date"===u)if(nN(t,e,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:FN}),e.rangebreaks.length){for(var U=0;U<e.rangebreaks.length;U++)if(e.rangebreaks[U].pattern===hN){e._hasDayOfWeekBreaks=!0;break}if(dN(e,r),r._has("scattergl")||r._has("splom"))for(var b=0;b<n.data.length;b++){var y=n.data[b];"scattergl"!==y.type&&"splom"!==y.type||(y.visible=!1,eN.warn(y.type+" traces do not work on axes with rangebreaks. Setting trace "+y.index+" to `visible: false`."))}}else delete e.rangebreaks;return e};function FN(t,e,i){function n(i,n){return eN.coerce(t,e,rN.rangebreaks,i,n)}if(n("enabled")){var r=n("bounds");if(r&&r.length>=2){var a,s,o="";if(2===r.length)for(a=0;a<2;a++)if(s=QN(r[a])){o=hN;break}var l=n("pattern",o);if(l===hN)for(a=0;a<2;a++)(s=QN(r[a]))&&(e.bounds[a]=r[a]=s-1);if(l)for(a=0;a<2;a++)switch(s=r[a],l){case hN:if(!$Z(s))return void(e.enabled=!1);if((s=+s)!==Math.floor(s)||s<0||s>=7)return void(e.enabled=!1);e.bounds[a]=r[a]=s;break;case BN:if(!$Z(s))return void(e.enabled=!1);if((s=+s)<0||s>24)return void(e.enabled=!1);e.bounds[a]=r[a]=s}if(!1===i.autorange){var c=i.range;if(c[0]<c[1]){if(r[0]<c[0]&&r[1]>c[1])return void(e.enabled=!1)}else if(r[0]>c[0]&&r[1]<c[1])return void(e.enabled=!1)}}else{var g=n("values");if(!g||!g.length)return void(e.enabled=!1);n("dvalue")}}}var fN={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function QN(t){if("string"==typeof t)return fN[t.substr(0,3).toLowerCase()]}var IN,UN,bN,yN,mN=$c,xN=_B,vN=function(t,e,i,n){var r,a,s,o,l,c,g=n.counterAxes||[],u=n.overlayableAxes||[],d=n.letter,h=n.grid,B=n.overlayingDomain;h&&(a=h._domains[d][h._axisMap[e._id]],r=h._anchors[e._id],a&&(s=h[d+"side"].split(" ")[0],o=h.domain[d]["right"===s||"top"===s?1:0])),a=a||[0,1],r=r||(mN(t.position)?"free":g[0]||"free"),s=s||("x"===d?"bottom":"left"),o=o||0,l=0,c=!1;var p=xN.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(g),dflt:r}},"anchor"),F=xN.coerce(t,e,{side:{valType:"enumerated",values:"x"===d?["bottom","top"]:["left","right"],dflt:s}},"side");if("free"===p){if("y"===d)i("autoshift")&&(o="left"===F?B[0]:B[1],c=!e.automargin||e.automargin,l="left"===F?-3:3),i("shift",l);i("position",o)}i("automargin",c);var f=!1;if(u.length&&(f=xN.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!f){var Q=i("domain",a);Q[0]>Q[1]-1/4096&&(e.domain=a),xN.noneOrAll(t.domain,e.domain,a),"sync"===e.tickmode&&(e.tickmode="auto")}return i("layer"),e};var CN=Js,AN=Nu,LN=_B,GN=yF,RN=jI,SN=Hp.getModuleCalcData,wN=Ep,VN=Np,EN=vF,ZN=LN.ensureSingle;function NN(t,e,i){return LN.ensureSingle(t,e,i,(function(t){t.datum(i)}))}var DN=VN.zindexSeparator;function XN(t,e,i,n,r){for(var a,s,o,l=VN.traceLayerClasses,c=t._fullLayout,g=c._zindices,u=c._modules,d=[],h=[],B=0;B<g.length;B++)for(var p=g[B],F=0;F<u.length;F++){var f=(a=u[F]).name,Q=AN.modules[f].categories;if(Q.svg){var I=a.layerName||f+"layer",U=I+(B?Number(B)+1:""),b=a.plot;o=(s=SN(i,b,p))[0],i=s[1],o.length&&d.push({i:l.indexOf(I),zindex:B,className:U,plotMethod:b,cdModule:o}),Q.zoomScale&&h.push("."+U)}}d.sort((function(t,e){return(t.zindex||0)-(e.zindex||0)||t.i-e.i}));var y=e.plot.selectAll("g.mlayer").data(d,(function(t){return t.className}));if(y.enter().append("g").attr("class",(function(t){return t.className})).classed("mlayer",!0).classed("rangeplot",e.isRangePlot),y.exit().remove(),y.order(),y.each((function(i){var a=CN.select(this),s=i.className;i.plotMethod(t,e,i.cdModule,a,n,r),-1===VN.clipOnAxisFalseQuery.indexOf("."+s)&&RN.setClipUrl(a,e.layerClipId,t)})),c._has("scattergl")&&(a=AN.getModule("scattergl"),o=SN(i,a)[0],a.plot(t,e,o)),!t._context.staticPlot&&(e._hasClipOnAxisFalse&&(e.clipOnAxisFalseTraces=e.plot.selectAll(VN.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),h.length)){var m=e.plot.selectAll(h.join(",")).selectAll(".trace");e.zoomScalePts=m.selectAll("path.point"),e.zoomScaleTxt=m.selectAll(".textpoint")}}function HN(t,e){var i=t._fullLayout,n=e.plotgroup,r=e.id,a=-1!==r.indexOf(DN),s=VN.layerValue2layerClass[e.xaxis.layer],o=VN.layerValue2layerClass[e.yaxis.layer],l=i._hasOnlyLargeSploms,c=i._zindices.length>1,g=e.mainplotinfo;if(!e.mainplot||c)if(l)e.xlines=ZN(n,"path","xlines-above"),e.ylines=ZN(n,"path","ylines-above"),e.xaxislayer=ZN(n,"g","xaxislayer-above"),e.yaxislayer=ZN(n,"g","yaxislayer-above");else{if(!a){var u=ZN(n,"g","layer-subplot");e.shapelayer=ZN(u,"g","shapelayer"),e.imagelayer=ZN(u,"g","imagelayer"),g&&c?(e.minorGridlayer=g.minorGridlayer,e.gridlayer=g.gridlayer,e.zerolinelayer=g.zerolinelayer):(e.minorGridlayer=ZN(n,"g","minor-gridlayer"),e.gridlayer=ZN(n,"g","gridlayer"),e.zerolinelayer=ZN(n,"g","zerolinelayer"));var d=ZN(n,"g","layer-between");e.shapelayerBetween=ZN(d,"g","shapelayer"),e.imagelayerBetween=ZN(d,"g","imagelayer"),ZN(n,"path","xlines-below"),ZN(n,"path","ylines-below"),e.overlinesBelow=ZN(n,"g","overlines-below"),ZN(n,"g","xaxislayer-below"),ZN(n,"g","yaxislayer-below"),e.overaxesBelow=ZN(n,"g","overaxes-below")}e.overplot=ZN(n,"g","overplot"),e.plot=ZN(e.overplot,"g",r),a||(e.xlines=ZN(n,"path","xlines-above"),e.ylines=ZN(n,"path","ylines-above"),e.overlinesAbove=ZN(n,"g","overlines-above"),ZN(n,"g","xaxislayer-above"),ZN(n,"g","yaxislayer-above"),e.overaxesAbove=ZN(n,"g","overaxes-above"),e.xlines=n.select(".xlines-"+s),e.ylines=n.select(".ylines-"+o),e.xaxislayer=n.select(".xaxislayer-"+s),e.yaxislayer=n.select(".yaxislayer-"+o))}else{var h=g.plotgroup,B=r+"-x",p=r+"-y";e.minorGridlayer=g.minorGridlayer,e.gridlayer=g.gridlayer,e.zerolinelayer=g.zerolinelayer,ZN(g.overlinesBelow,"path",B),ZN(g.overlinesBelow,"path",p),ZN(g.overaxesBelow,"g",B),ZN(g.overaxesBelow,"g",p),e.plot=ZN(g.overplot,"g",r),ZN(g.overlinesAbove,"path",B),ZN(g.overlinesAbove,"path",p),ZN(g.overaxesAbove,"g",B),ZN(g.overaxesAbove,"g",p),e.xlines=h.select(".overlines-"+s).select("."+B),e.ylines=h.select(".overlines-"+o).select("."+p),e.xaxislayer=h.select(".overaxes-"+s).select("."+B),e.yaxislayer=h.select(".overaxes-"+o).select("."+p)}a||(l||(NN(e.minorGridlayer,"g",e.xaxis._id),NN(e.minorGridlayer,"g",e.yaxis._id),e.minorGridlayer.selectAll("g").map((function(t){return t[0]})).sort(wN.idSort),NN(e.gridlayer,"g",e.xaxis._id),NN(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").map((function(t){return t[0]})).sort(wN.idSort)),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0))}function WN(t,e){if(t){var i={};for(var n in t.each((function(t){var n=t[0];CN.select(this).remove(),kN(n,e),i[n]=!0})),e._plots)for(var r=e._plots[n].overlays||[],a=0;a<r.length;a++){var s=r[a];i[s.id]&&s.plot.selectAll(".trace").remove()}}}function kN(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}zZ.name="cartesian",zZ.attr=["xaxis","yaxis"],zZ.idRoot=["x","y"],zZ.idRegex=VN.idRegex,zZ.attrRegex=VN.attrRegex,zZ.attributes=EZ?VZ:(EZ=1,VZ={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}}),zZ.layoutAttributes=If,zZ.supplyLayoutDefaults=function(){if(UN)return IN;UN=1;var t=_B,e=Uu,i=TQ.isUnifiedHover,n=Cv,r=Ap,a=Qh,s=If,o=OZ(),l=pN,c=IL,g=vN,u=Ep,d=u.id2name,h=u.name2id,B=Np.AX_ID_PATTERN,p=Nu,F=p.traceIs,f=p.getComponentMethod;function Q(t,e,i){Array.isArray(t[e])?t[e].push(i):t[e]=[i]}return IN=function(p,I,U){var b,y,m=I.autotypenumbers,x={},v={},C={},A={},L={},G={},R={},S={},w={},V={};for(b=0;b<U.length;b++){var E=U[b];if(F(E,"cartesian")){var Z,N;if(E.xaxis)Z=d(E.xaxis),Q(x,Z,E);else if(E.xaxes)for(y=0;y<E.xaxes.length;y++)Q(x,d(E.xaxes[y]),E);if(E.yaxis)N=d(E.yaxis),Q(x,N,E);else if(E.yaxes)for(y=0;y<E.yaxes.length;y++)Q(x,d(E.yaxes[y]),E);if("funnel"===E.type?"h"===E.orientation?(Z&&(v[Z]=!0),N&&(R[N]=!0)):N&&(C[N]=!0):"image"===E.type?(N&&(S[N]=!0),Z&&(S[Z]=!0)):(N&&(L[N]=!0,G[N]=!0),F(E,"carpet")&&("carpet"!==E.type||E._cheater)||Z&&(A[Z]=!0)),"carpet"===E.type&&E._cheater&&Z&&(v[Z]=!0),F(E,"2dMap")&&(w[Z]=!0,w[N]=!0),F(E,"oriented"))V["h"===E.orientation?N:Z]=!0}}var D=I._subplots,X=D.xaxis,H=D.yaxis,W=t.simpleMap(X,d),k=t.simpleMap(H,d),M=W.concat(k),T=e.background;X.length&&H.length&&(T=t.coerce(p,I,a,"plot_bgcolor"));var Y,J,_,z,O,K=e.combine(T,I.paper_bgcolor);function P(){var t=x[Y]||[];O._traceIndices=t.map((function(t){return t.index})),O._annIndices=[],O._shapeIndices=[],O._selectionIndices=[],O._imgIndices=[],O._subplotsWith=[],O._counterAxes=[],O._name=O._attr=Y,O._id=J}function j(e,i){return t.coerce(z,O,s,e,i)}function q(e,i){return t.coerce2(z,O,s,e,i)}function $(t){return"x"===t?H:X}function tt(t,e){for(var i="x"===t?W:k,n=[],r=0;r<i.length;r++){var a=i[r];a===e||(p[a]||{}).overlaying||n.push(h(a))}return n}var et={x:$("x"),y:$("y")},it=et.x.concat(et.y),nt={},rt=[];function at(){var t=z.matches;B.test(t)&&-1===it.indexOf(t)&&(nt[t]=z.type,rt=Object.keys(nt))}var st=n(p,I),ot=i(st);for(b=0;b<M.length;b++){Y=M[b],J=h(Y),_=Y.charAt(0),t.isPlainObject(p[Y])||(p[Y]={}),z=p[Y],O=r.newContainer(I,Y,_+"axis"),P();var lt="x"===_&&!A[Y]&&v[Y]||"y"===_&&!L[Y]&&C[Y],ct="y"===_&&(!G[Y]&&R[Y]||S[Y]),gt={hasMinor:!0,letter:_,font:I.font,outerTicks:w[Y],showGrid:!V[Y],data:x[Y]||[],bgColor:K,calendar:I.calendar,automargin:!0,visibleDflt:lt,reverseDflt:ct,autotypenumbersDflt:m,splomStash:((I._splomAxes||{})[_]||{})[J],noAutotickangles:"y"===_};j("uirevision",I.uirevision),o(z,O,j,gt),l(z,O,j,gt,I);var ut=ot&&_===st.charAt(0),dt=q("spikecolor",ot?O.color:void 0),ht=q("spikethickness",ot?1.5:void 0),Bt=q("spikedash",ot?"dot":void 0),pt=q("spikemode",ot?"across":void 0),Ft=q("spikesnap");j("showspikes",!!(ut||dt||ht||Bt||pt||Ft))||(delete O.spikecolor,delete O.spikethickness,delete O.spikedash,delete O.spikemode,delete O.spikesnap);var ft=d(z.overlaying),Qt=[0,1];if(void 0!==I[ft]){var It=d(I[ft].anchor);void 0!==I[It]&&(Qt=I[It].domain)}g(z,O,j,{letter:_,counterAxes:et[_],overlayableAxes:tt(_,Y),grid:I.grid,overlayingDomain:Qt}),j("title.standoff"),at(),O._input=z}for(b=0;b<rt.length;){J=rt[b++],_=(Y=d(J)).charAt(0),t.isPlainObject(p[Y])||(p[Y]={}),z=p[Y],O=r.newContainer(I,Y,_+"axis"),P();var Ut={letter:_,font:I.font,outerTicks:w[Y],showGrid:!V[Y],data:[],bgColor:K,calendar:I.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:m,splomStash:((I._splomAxes||{})[_]||{})[J]};j("uirevision",I.uirevision),O.type=nt[J]||"linear",l(z,O,j,Ut,I),g(z,O,j,{letter:_,counterAxes:et[_],overlayableAxes:tt(_,Y),grid:I.grid}),j("fixedrange"),at(),O._input=z}var bt=f("rangeslider","handleDefaults"),yt=f("rangeselector","handleDefaults");for(b=0;b<W.length;b++)Y=W[b],z=p[Y],O=I[Y],bt(p,I,Y),"date"===O.type&&yt(z,O,I,k,O.calendar),j("fixedrange");for(b=0;b<k.length;b++){Y=k[b],z=p[Y],O=I[Y];var mt=I[d(O.anchor)];j("fixedrange",f("rangeslider","isVisible")(mt))}c.handleDefaults(p,I,{axIds:it.concat(rt).sort(u.idSort),axHasImage:S})},IN}(),zZ.transitionAxes=function(){if(yN)return bN;yN=1;var t=Js,e=Nu,i=_B,n=jI,r=Vy;return bN=function(a,s,o,l){var c=a._fullLayout;if(0!==s.length){var g,u,d,h;l&&(g=l());var B=t.ease(o.easing);return a._transitionData._interruptCallbacks.push((function(){return window.cancelAnimationFrame(h),h=null,function(){for(var t={},i=0;i<s.length;i++){var n=s[i],r=n.plotinfo.xaxis,o=n.plotinfo.yaxis;n.xr0&&(t[r._name+".range"]=n.xr0.slice()),n.yr0&&(t[o._name+".range"]=n.yr0.slice())}return e.call("relayout",a,t).then((function(){for(var t=0;t<s.length;t++)p(s[t].plotinfo)}))}()})),u=Date.now(),h=window.requestAnimationFrame((function t(){d=Date.now();for(var i=Math.min(1,(d-u)/o.duration),n=B(i),r=0;r<s.length;r++)F(s[r],n);d-u>o.duration?(!function(){for(var t={},i=0;i<s.length;i++){var n=s[i],r=n.plotinfo.xaxis,o=n.plotinfo.yaxis;n.xr1&&(t[r._name+".range"]=n.xr1.slice()),n.yr1&&(t[o._name+".range"]=n.yr1.slice())}g&&g(),e.call("relayout",a,t).then((function(){for(var t=0;t<s.length;t++)p(s[t].plotinfo)}))}(),h=window.cancelAnimationFrame(t)):h=window.requestAnimationFrame(t)})),Promise.resolve()}function p(t){var e=t.xaxis,i=t.yaxis;c._defs.select("#"+t.clipId+"> rect").call(n.setTranslate,0,0).call(n.setScale,1,1),t.plot.call(n.setTranslate,e._offset,i._offset).call(n.setScale,1,1);var r=t.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(n.setPointGroupScale,1,1),r.selectAll(".textpoint").call(n.setTextPointsScale,1,1),r.call(n.hideOutsideRangePoints,t)}function F(t,e){var s=t.plotinfo,o=s.xaxis,l=s.yaxis,c=o._length,g=l._length,u=!!t.xr1,d=!!t.yr1,h=[];if(u){var B=i.simpleMap(t.xr0,o.r2l),p=i.simpleMap(t.xr1,o.r2l),F=B[1]-B[0],f=p[1]-p[0];h[0]=(B[0]*(1-e)+e*p[0]-B[0])/(B[1]-B[0])*c,h[2]=c*(1-e+e*f/F),o.range[0]=o.l2r(B[0]*(1-e)+e*p[0]),o.range[1]=o.l2r(B[1]*(1-e)+e*p[1])}else h[0]=0,h[2]=c;if(d){var Q=i.simpleMap(t.yr0,l.r2l),I=i.simpleMap(t.yr1,l.r2l),U=Q[1]-Q[0],b=I[1]-I[0];h[1]=(Q[1]*(1-e)+e*I[1]-Q[1])/(Q[0]-Q[1])*g,h[3]=g*(1-e+e*b/U),l.range[0]=o.l2r(Q[0]*(1-e)+e*I[0]),l.range[1]=l.l2r(Q[1]*(1-e)+e*I[1])}else h[1]=0,h[3]=g;r.drawOne(a,o,{skipTitle:!0}),r.drawOne(a,l,{skipTitle:!0}),r.redrawComponents(a,[o._id,l._id]);var y=u?c/h[2]:1,m=d?g/h[3]:1,x=u?h[0]:0,v=d?h[1]:0,C=u?h[0]/h[2]*c:0,A=d?h[1]/h[3]*g:0,L=o._offset-C,G=l._offset-A;s.clipRect.call(n.setTranslate,x,v).call(n.setScale,1/y,1/m),s.plot.call(n.setTranslate,L,G).call(n.setScale,y,m),n.setPointGroupScale(s.zoomScalePts,1/y,1/m),n.setTextPointsScale(s.zoomScaleTxt,1/y,1/m)}r.redrawComponents(a)},bN}(),zZ.finalizeSubplots=function(t,e){var i,n,r,a=e._subplots,s=a.xaxis,o=a.yaxis,l=a.cartesian,c=l,g={},u={};for(i=0;i<c.length;i++){var d=c[i].split("y");g[d[0]]=1,u["y"+d[1]]=1}for(i=0;i<s.length;i++)g[n=s[i]]||(r=(t[wN.id2name(n)]||{}).anchor,VN.idRegex.y.test(r)||(r="y"),l.push(n+r),c.push(n+r),u[r]||(u[r]=1,LN.pushUnique(o,r)));for(i=0;i<o.length;i++)u[r=o[i]]||(n=(t[wN.id2name(r)]||{}).anchor,VN.idRegex.x.test(n)||(n="x"),l.push(n+r),c.push(n+r),g[n]||(g[n]=1,LN.pushUnique(s,n)));if(!c.length){for(var h in n="",r="",t){if(VN.attrRegex.test(h))"x"===h.charAt(0)?(!n||+h.substr(5)<+n.substr(5))&&(n=h):(!r||+h.substr(5)<+r.substr(5))&&(r=h)}n=n?wN.name2id(n):"x",r=r?wN.name2id(r):"y",s.push(n),o.push(r),l.push(n+r)}},zZ.plot=function(t,e,i,n){var r,a=t._fullLayout,s=a._subplots.cartesian,o=t.calcdata;if(!Array.isArray(e))for(e=[],r=0;r<o.length;r++)e.push(r);for(var l=a._zindices,c=0;c<l.length;c++){var g=l[c];for(r=0;r<s.length;r++){var u=s[r],d=a._plots[u];if(c>0){var h=d.id;if(-1!==h.indexOf(DN))continue;h+=DN+(c+1),d=LN.extendFlat({},d,{id:h,plot:a._cartesianlayer.selectAll(".subplot").select("."+h)})}for(var B,p=[],F=0;F<o.length;F++){var f=o[F],Q=f[0].trace;g===(Q.zorder||0)&&(Q.xaxis+Q.yaxis===u&&((-1!==e.indexOf(Q.index)||Q.carpet)&&(B&&B[0].trace.xaxis+B[0].trace.yaxis===u&&-1!==["tonextx","tonexty","tonext"].indexOf(Q.fill)&&-1===p.indexOf(B)&&p.push(B),p.push(f)),B=f))}XN(t,d,p,i,n)}}},zZ.clean=function(t,e,i,n){var r,a,s,o=n._plots||{},l=e._plots||{},c=n._subplots||{};if(n._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(s in o)(r=o[s]).plotgroup&&r.plotgroup.remove();var g=n._has&&n._has("gl"),u=e._has&&e._has("gl");if(g&&!u)for(s in o)(r=o[s])._scene&&r._scene.destroy();if(c.xaxis&&c.yaxis){var d=wN.listIds({_fullLayout:n});for(a=0;a<d.length;a++){var h=d[a];e[wN.id2name(h)]||n._infolayer.selectAll(".g-"+h+"title").remove()}}var B=n._has&&n._has("cartesian"),p=e._has&&e._has("cartesian");if(B&&!p)WN(n._cartesianlayer.selectAll(".subplot"),n),n._defs.selectAll(".axesclip").remove(),delete n._axisConstraintGroups,delete n._axisMatchGroups;else if(c.cartesian)for(a=0;a<c.cartesian.length;a++){var F=c.cartesian[a];if(-1===F.indexOf(DN)&&!l[F]){var f="."+F+",."+F+"-x,."+F+"-y";n._cartesianlayer.selectAll(f).remove(),kN(F,n)}}},zZ.drawFramework=function(t){var e,i=t._fullLayout,n=t.calcdata,r={};for(e=0;e<n.length;e++){var a=n[e][0],s=a.trace.zorder||0;r[s]||(r[s]=[]),r[s].push(a)}var o=Object.keys(r).map(Number).sort(LN.sorterAsc);o.length||(o=[0]),i._zindices=o;var l=function(t){var e,i,n,r,a,s,o=t._fullLayout,l=o._zindices.length,c=o._subplots.cartesian,g=c.length,u=[],d=[];for(e=0;e<g;e++){n=c[e],a=(r=o._plots[n]).xaxis,s=r.yaxis;var h=a._mainAxis,B=s._mainAxis,p=h._id+B._id,F=o._plots[p];r.overlays=[],p!==n&&F?(r.mainplot=p,r.mainplotinfo=F,d.push(n)):(r.mainplot=void 0,r.mainplotinfo=void 0,u.push(n))}for(e=0;e<d.length;e++)n=d[e],(r=o._plots[n]).mainplotinfo.overlays.push(r);var f=u.concat(d),Q=[];for(e=0;e<g;e++){n=f[e],a=(r=o._plots[n]).xaxis,s=r.yaxis;for(var I=[],U=1;U<=l;U++){var b="";for(U>1&&(b+=DN+U),I.push(n+b),i=0;i<r.overlays.length;i++)I.push(r.overlays[i].id+b)}I=I.concat([a.layer,s.layer,a.overlaying||"",s.overlaying||""]),Q.push(I)}return Q}(t),c=l.length,g=[];for(e=0;e<c;e++)g[e]=l[e].slice();for(var u=1;u<o.length;u++){var d=[];for(e=0;e<c;e++)d[e]=l[e].slice(),d[e][0]+=DN+(u+1);g=g.concat(d)}var h=i._cartesianlayer.selectAll(".subplot").data(g,String);h.enter().append("g").attr("class",(function(t){return"subplot "+t[0]})),h.order(),h.exit().call(WN,i),h.each((function(e){var n=e[0],r=n.indexOf(DN),a=-1!==r,s=a?n.slice(0,r):n,o=i._plots[n];o||(o=LN.extendFlat({},i._plots[s]))&&(o.id=n,i._plots[n]=o,i._subplots.cartesian.push(n)),o&&(o.plotgroup=CN.select(this),HN(t,o),a||(o.draglayer=ZN(i._draggers,"g",n)))}))},zZ.rangePlot=function(t,e,i){HN(t,e),XN(t,e,i),GN.style(t)},zZ.toSVG=function(t){var e=t._fullLayout._glimages,i=CN.select(t).selectAll(".svg-container"),n=i.filter((function(t,e){return e===i.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus");n.each((function(){var t=this,i=t.toDataURL("image/png");e.append("svg:image").attr({xmlns:EN.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}))},zZ.updateFx=Ny.updateFx;var MN={hasLines:WQ.hasLines,hasMarkers:WQ.hasMarkers,hasText:WQ.hasText,isBubble:WQ.isBubble,attributes:qR,layoutAttributes:Xp,supplyDefaults:function(t,e,i,n){function r(i,n){return MV.coerce(t,e,YV,i,n)}var a=zV(t,e,n,r);if(a||(e.visible=!1),e.visible){OV(t,e,n,r),r("xhoverformat"),r("yhoverformat"),r("zorder");var s=KV(t,e,n,r);"group"===n.scattermode&&void 0===e.orientation&&r("orientation","v");var o=!s&&a<JV.PTS_LINESONLY?"lines+markers":"lines";r("text"),r("hovertext"),r("mode",o),_V.hasMarkers(e)&&PV(t,e,i,n,r,{gradient:!0}),_V.hasLines(e)&&(jV(t,e,i,n,r,{backoff:!0}),qV(t,e,r),r("connectgaps"),r("line.simplify")),_V.hasText(e)&&(r("texttemplate"),$V(t,e,n,r));var l=[];(_V.hasMarkers(e)||_V.hasText(e))&&(r("cliponaxis"),r("marker.maxdisplayed"),l.push("points")),r("fill",s?s.fillDflt:"none"),"none"!==e.fill&&(tE(t,e,i,r,{moduleHasFillgradient:!0}),_V.hasLines(e)||qV(t,e,r),eE(r,"fillpattern",e.fillcolor,!1));var c=(e.line||{}).color,g=(e.marker||{}).color;"tonext"!==e.fill&&"toself"!==e.fill||l.push("fills"),r("hoveron",l.join("+")||"points"),"fills"!==e.hoveron&&r("hovertemplate");var u=TV.getComponentMethod("errorbars","supplyDefaults");u(t,e,c||g||i,{axis:"y"}),u(t,e,c||g||i,{axis:"x",inherit:"y"}),MV.coerceSelectionMarkerOpacity(e,r)}},crossTraceDefaults:function(t,e){var i,n,r,a=e.scattermode;function s(t){return rE.coerce(n._input,n,sE,t)}if("group"===e.scattermode)for(r=0;r<t.length;r++)"scatter"===(n=t[r]).type&&(i=n._input,aE(i,n,e,s,a));for(r=0;r<t.length;r++){var o=t[r];if("scatter"===o.type){var l=o.fill;if("none"!==l&&"toself"!==l&&(o.opacity=void 0,"tonexty"===l||"tonextx"===l))for(var c=r-1;c>=0;c--){var g=t[c];if("scatter"===g.type&&g.xaxis===o.xaxis&&g.yaxis===o.yaxis){g.opacity=void 0;break}}}}},supplyLayoutDefaults:function(t,e){var i,n,r="group"===e.barmode;"group"===e.scattermode&&(i="scattergap",n=r?e.bargap:.2,oE.coerce(t,e,lE,i,n))},calc:ZE.calc,crossTraceCalc:function(t,e){"group"===t._fullLayout.scattermode&&function(t,e){for(var i=e.xaxis,n=e.yaxis,r=t._fullLayout,a=t._fullData,s=t.calcdata,o=[],l=[],c=0;c<a.length;c++){var g=a[c];!0===g.visible&&"scatter"===g.type&&g.xaxis===i._id&&g.yaxis===n._id&&("h"===g.orientation?o.push(s[c]):"v"===g.orientation&&l.push(s[c]))}var u={mode:r.scattermode,gap:r.scattergap};iZ(t,i,n,l,u),iZ(t,n,i,o,u)}(t,e);var i=e.xaxis,n=e.yaxis,r=i._id+n._id,a=t._fullLayout._scatterStackOpts[r];if(a){var s,o,l,c,g,u,d,h,B,p,F,f,Q,I,U,b=t.calcdata;for(var y in a){var m=(p=a[y]).traceIndices;if(m.length){for(F="interpolate"===p.stackgaps,f=p.groupnorm,"v"===p.orientation?(Q="x",I="y"):(Q="y",I="x"),U=new Array(m.length),s=0;s<U.length;s++)U[s]=!1;u=b[m[0]];var x=new Array(u.length);for(s=0;s<u.length;s++)x[s]=u[s][Q];for(s=1;s<m.length;s++){for(g=b[m[s]],o=l=0;o<g.length;o++){for(d=g[o][Q];d>x[l]&&l<x.length;l++)nZ(g,o,x[l],s,U,F,Q),o++;if(d!==x[l]){for(c=0;c<s;c++)nZ(b[m[c]],l,d,c,U,F,Q);x.splice(l,0,d)}l++}for(;l<x.length;l++)nZ(g,o,x[l],s,U,F,Q),o++}var v=x.length;for(o=0;o<u.length;o++){for(h=u[o][I]=u[o].s,s=1;s<m.length;s++)(g=b[m[s]])[0].trace._rawLength=g[0].trace._length,g[0].trace._length=v,h+=g[o].s,g[o][I]=h;if(f)for(B=("fraction"===f?h:h/100)||1,s=0;s<m.length;s++){var C=b[m[s]][o];C[I]/=B,C.sNorm=C.s/B}}for(s=0;s<m.length;s++){var A=(g=b[m[s]])[0].trace,L=eZ.calcMarkerSize(A,A._rawLength),G=Array.isArray(L);if(L&&U[s]||G){var R=L;for(L=new Array(v),o=0;o<v;o++)L[o]=g[o].gap?0:G?R[g[o].i]:R}var S=new Array(v),w=new Array(v);for(o=0;o<v;o++)S[o]=g[o].x,w[o]=g[o].y;eZ.calcAxisExpansion(t,A,i,n,S,w,L),g[0].t.orientation=p.orientation}}}}},arraysToCalcdata:IE,plot:function(t,e,i,n,r,a){var s,o,l=!r,c=!!r&&r.duration>0,g=mZ(t,e,i);(s=n.selectAll("g.trace").data(g,(function(t){return t[0].trace.uid})),s.enter().append("g").attr("class",(function(t){return"trace scatter trace"+t[0].trace.uid})).style("stroke-miterlimit",2),s.order(),function(t,e,i){e.each((function(e){var n=QZ(pZ.select(this),"g","fills");UZ.setClipUrl(n,i.layerClipId,t);var r=e[0].trace,a=[];r._ownfill&&a.push("_ownFill"),r._nexttrace&&a.push("_nextFill");var s=n.selectAll("g").data(a,IZ);s.enter().append("g"),s.exit().each((function(t){r[t]=null})).remove(),s.order().each((function(t){r[t]=QZ(pZ.select(this),"path","js-fill")}))}))}(t,s,e),c)?(a&&(o=a()),pZ.transition().duration(r.duration).ease(r.easing).each("end",(function(){o&&o()})).each("interrupt",(function(){o&&o()})).each((function(){n.selectAll("g.trace").each((function(i,n){vZ(t,n,e,i,g,this,r)}))}))):s.each((function(i,n){vZ(t,n,e,i,g,this,r)}));l&&s.exit().remove(),n.selectAll("path:not([d])").remove()},colorbar:CZ,formatLabels:function(t,e,i){var n={},r={_fullLayout:i},a=AZ.getFromTrace(r,e,"x"),s=AZ.getFromTrace(r,e,"y"),o=t.orig_x;void 0===o&&(o=t.x);var l=t.orig_y;return void 0===l&&(l=t.y),n.xLabel=AZ.tickText(a,a.c2l(o),!0).text,n.yLabel=AZ.tickText(s,s.c2l(l),!0).text,n},style:DZ.style,styleOnSelect:DZ.styleOnSelect,hoverPoints:function(t,e,i,n){var r=t.cd,a=r[0].trace,s=t.xa,o=t.ya,l=s.c2p(e),c=o.c2p(i),g=[l,c],u=a.hoveron||"",d=-1!==a.mode.indexOf("markers")?3:.5,h=!!a.xperiodalignment,B=!!a.yperiodalignment;if(-1!==u.indexOf("points")){var p=function(t){var e=Math.max(d,t.mrc||0),i=s.c2p(t.x)-l,n=o.c2p(t.y)-c;return Math.max(Math.sqrt(i*i+n*n)-e,1-d/e)},F=kZ.getDistanceFunction(n,(function(t){if(h){var e=s.c2p(t.xStart),i=s.c2p(t.xEnd);return l>=Math.min(e,i)&&l<=Math.max(e,i)?0:1/0}var n=Math.max(3,t.mrc||0),r=1-1/n,a=Math.abs(s.c2p(t.x)-l);return a<n?r*a/n:a-n+r}),(function(t){if(B){var e=o.c2p(t.yStart),i=o.c2p(t.yEnd);return c>=Math.min(e,i)&&c<=Math.max(e,i)?0:1/0}var n=Math.max(3,t.mrc||0),r=1-1/n,a=Math.abs(o.c2p(t.y)-c);return a<n?r*a/n:a-n+r}),p);if(kZ.getClosest(r,F,t),!1!==t.index){var f=r[t.index],Q=s.c2p(f.x,!0),I=o.c2p(f.y,!0),U=f.mrc||1;t.index=f.i;var b=r[0].t.orientation,y=b&&(f.sNorm||f.s),m="h"===b?y:void 0!==f.orig_x?f.orig_x:f.x,x="v"===b?y:void 0!==f.orig_y?f.orig_y:f.y;return WZ.extendFlat(t,{color:TZ(a,f),x0:Q-U,x1:Q+U,xLabelVal:m,y0:I-U,y1:I+U,yLabelVal:x,spikeDistance:p(f),hovertemplate:a.hovertemplate}),JZ(f,a,t),MZ.getComponentMethod("errorbars","hoverInfo")(f,a,t),[t]}}function v(t){if(!t)return!1;var e=t.node();try{var i=new DOMPoint(g[0],g[1]);return e.isPointInFill(i)}catch(t){var n=e.ownerSVGElement.createSVGPoint();return n.x=g[0],n.y=g[1],e.isPointInFill(n)}}if(-1!==u.indexOf("fills")&&a._fillElement&&(v(a._fillElement)&&!v(a._fillExclusionElement))){var C=function(t){var e,i,n,r,a,l,c,u,d,h=[],B=1/0,p=-1/0,F=1/0,f=-1/0;for(e=0;e<t.length;e++){var Q=t[e];Q.contains(g)&&(h.push(Q),F=Math.min(F,Q.ymin),f=Math.max(f,Q.ymax))}if(0===h.length)return null;for(i=((F=Math.max(F,0))+(f=Math.min(f,o._length)))/2,e=0;e<h.length;e++)for(r=h[e].pts,n=1;n<r.length;n++)(u=r[n-1][1])>i!=(d=r[n][1])>=i&&(l=r[n-1][0],c=r[n][0],d-u&&(a=l+(c-l)*(i-u)/(d-u),B=Math.min(B,a),p=Math.max(p,a)));return{x0:B=Math.max(B,0),x1:p=Math.min(p,s._length),y0:i,y1:i}}(a._polygons);null===C&&(C={x0:g[0],x1:g[0],y0:g[1],y1:g[1]});var A=YZ.defaultLine;return YZ.opacity(a.fillcolor)?A=a.fillcolor:YZ.opacity((a.line||{}).color)&&(A=a.line.color),WZ.extendFlat(t,{distance:t.maxHoverDistance,x0:C.x0,x1:C.x1,y0:C.y0,y1:C.y1,color:A,hovertemplate:!1}),delete t.index,a.text&&!WZ.isArrayOrTypedArray(a.text)?t.text=String(a.text):t.text=a.name,[t]}},selectPoints:function(t,e){var i,n,r,a,s=t.cd,o=t.xaxis,l=t.yaxis,c=[],g=s[0].trace;if(!_Z.hasMarkers(g)&&!_Z.hasText(g))return[];if(!1===e)for(i=0;i<s.length;i++)s[i].selected=0;else for(i=0;i<s.length;i++)n=s[i],r=o.c2p(n.x),a=l.c2p(n.y),null!==n.i&&e.contains([r,a],!1,i,t)?(c.push({pointNumber:n.i,x:o.c2d(n.x),y:l.c2d(n.y)}),n.selected=1):n.selected=0;return c},animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:zZ,categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},TN=Js,YN=Uu,JN=LR,_N=_B,zN=_N.strScale,ON=_N.strRotate,KN=_N.strTranslate,PN=Js,jN=Nu,qN=yF,$N=_B,tD=$N.strTranslate,eD=Vy,iD=Uu,nD=jI,rD=Wv,aD=xF,sD=am,oD=nm,lD=Ap.arrayEditor,cD=function(t,e,i){var n,r,a,s,o=t.node(),l=JN[i.arrowhead||0],c=JN[i.startarrowhead||0],g=(i.arrowwidth||1)*(i.arrowsize||1),u=(i.arrowwidth||1)*(i.startarrowsize||1),d=e.indexOf("start")>=0,h=e.indexOf("end")>=0,B=l.backoff*g+i.standoff,p=c.backoff*u+i.startstandoff;if("line"===o.nodeName){n={x:+t.attr("x1"),y:+t.attr("y1")},r={x:+t.attr("x2"),y:+t.attr("y2")};var F=n.x-r.x,f=n.y-r.y;if(s=(a=Math.atan2(f,F))+Math.PI,B&&p&&B+p>Math.sqrt(F*F+f*f))return void L();if(B){if(B*B>F*F+f*f)return void L();var Q=B*Math.cos(a),I=B*Math.sin(a);r.x+=Q,r.y+=I,t.attr({x2:r.x,y2:r.y})}if(p){if(p*p>F*F+f*f)return void L();var U=p*Math.cos(a),b=p*Math.sin(a);n.x-=U,n.y-=b,t.attr({x1:n.x,y1:n.y})}}else if("path"===o.nodeName){var y=o.getTotalLength(),m="";if(y<B+p)return void L();var x=o.getPointAtLength(0),v=o.getPointAtLength(.1);a=Math.atan2(x.y-v.y,x.x-v.x),n=o.getPointAtLength(Math.min(p,y)),m="0px,"+p+"px,";var C=o.getPointAtLength(y),A=o.getPointAtLength(y-.1);s=Math.atan2(C.y-A.y,C.x-A.x),r=o.getPointAtLength(Math.max(0,y-B)),m+=y-(m?p+B:B)+"px,"+y+"px",t.style("stroke-dasharray",m)}function L(){t.style("stroke-dasharray","0px,100px")}function G(e,n,r,a){e.path&&(e.noRotate&&(r=0),TN.select(o.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:KN(n.x,n.y)+ON(180*r/Math.PI)+zN(a)}).style({fill:YN.rgb(i.arrowcolor),"stroke-width":0}))}d&&G(c,n,a,u),h&&G(l,r,s,g)},gD={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var i=0;i<e.annotations.length;i++)e.annotations[i].visible&&uD(t,i);return qN.previousPromises(t)},drawOne:uD,drawRaw:hD};function uD(t,e){var i=t._fullLayout.annotations[e]||{},n=eD.getFromId(t,i.xref),r=eD.getFromId(t,i.yref);n&&n.setScale(),r&&r.setScale(),hD(t,i,e,!1,n,r)}function dD(t,e,i,n,r){var a=r[i],s=r[i+"ref"],o=-1!==i.indexOf("y"),l="domain"===eD.getRefType(s),c=o?n.h:n.w;return t?l?a+(o?-e:e)/t._length:t.p2r(t.r2p(a)+e):a+(o?-e:e)/c}function hD(t,e,i,n,r,a){var s,o,l=t._fullLayout,c=t._fullLayout._size,g=t._context.edits;n?(s="annotation-"+n,o=n+".annotations"):(s="annotation",o="annotations");var u=lD(t.layout,o,e),d=u.modifyBase,h=u.modifyItem,B=u.getUpdateObj;l._infolayer.selectAll("."+s+'[data-index="'+i+'"]').remove();var p="clip"+l._uid+"_ann"+i;if(e._input&&!1!==e.visible){var F={x:{},y:{}},f=+e.textangle||0,Q=l._infolayer.append("g").classed(s,!0).attr("data-index",String(i)).style("opacity",e.opacity),I=Q.append("g").classed("annotation-text-g",!0),U=g[e.showarrow?"annotationTail":"annotationPosition"],b=e.captureevents||g.annotationText||U,y=I.append("g").style("pointer-events",b?"all":null).call(sD,"pointer").on("click",(function(){t._dragging=!1,t.emit("plotly_clickannotation",w(PN.event))}));e.hovertext&&y.on("mouseover",(function(){var i=e.hoverlabel,n=i.font,r=this.getBoundingClientRect(),a=t.getBoundingClientRect();rD.loneHover({x0:r.left-a.left,x1:r.right-a.left,y:(r.top+r.bottom)/2-a.top,text:e.hovertext,color:i.bgcolor,borderColor:i.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color,fontWeight:n.weight,fontStyle:n.style,fontVariant:n.variant,fontShadow:n.fontShadow,fontLineposition:n.fontLineposition,fontTextcase:n.fontTextcase},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:t})})).on("mouseout",(function(){rD.loneUnhover(l._hoverlayer.node())}));var m=e.borderwidth,x=e.borderpad,v=m+x,C=y.append("rect").attr("class","bg").style("stroke-width",m+"px").call(iD.stroke,e.bordercolor).call(iD.fill,e.bgcolor),A=e.width||e.height,L=l._topclips.selectAll("#"+p).data(A?[0]:[]);L.enter().append("clipPath").classed("annclip",!0).attr("id",p).append("rect"),L.exit().remove();var G=e.font,R=l._meta?$N.templateString(e.text,l._meta):e.text,S=y.append("text").classed("annotation-text",!0).text(R);g.annotationText?S.call(aD.makeEditable,{delegate:y,gd:t}).call(V).on("edit",(function(i){e.text=i,this.call(V),h("text",i),r&&r.autorange&&d(r._name+".autorange",!0),a&&a.autorange&&d(a._name+".autorange",!0),jN.call("_guiRelayout",t,B())})):S.call(V)}else PN.selectAll("#"+p).remove();function w(t){var r={index:i,annotation:e._input,fullAnnotation:e,event:t};return n&&(r.subplotId=n),r}function V(i){return i.call(nD.font,G).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),aD.convertToTspans(i,t,E),i}function E(){var i=S.selectAll("a");1===i.size()&&i.text()===S.text()&&y.insert("a",":first-child").attr({"xlink:xlink:href":i.attr("xlink:href"),"xlink:xlink:show":i.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(C.node());var s=y.select(".annotation-text-math-group"),o=!s.empty(),u=nD.bBox((o?s:S).node()),b=u.width,x=u.height,G=e.width||b,R=e.height||x,V=Math.round(G+2*v),E=Math.round(R+2*v);function Z(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var N=!1,D=["x","y"],X=0;X<D.length;X++){var H,W,k,M,T,Y=D[X],J=e[Y+"ref"]||Y,_=e["a"+Y+"ref"],z={x:r,y:a}[Y],O=(f+("x"===Y?0:-90))*Math.PI/180,K=V*Math.cos(O),P=E*Math.sin(O),j=Math.abs(K)+Math.abs(P),q=e[Y+"anchor"],$=e[Y+"shift"]*("x"===Y?1:-1),tt=F[Y],et=eD.getRefType(J);if(z&&"domain"!==et){var it=z.r2fraction(e[Y]);(it<0||it>1)&&(_===J?((it=z.r2fraction(e["a"+Y]))<0||it>1)&&(N=!0):N=!0),H=z._offset+z.r2p(e[Y]),M=.5}else{var nt="domain"===et;"x"===Y?(k=e[Y],H=nt?z._offset+z._length*k:H=c.l+c.w*k):(k=1-e[Y],H=nt?z._offset+z._length*k:H=c.t+c.h*k),M=e.showarrow?.5:k}if(e.showarrow){tt.head=H;var rt=e["a"+Y];if(T=K*Z(.5,e.xanchor)-P*Z(.5,e.yanchor),_===J){var at=eD.getRefType(_);"domain"===at?("y"===Y&&(rt=1-rt),tt.tail=z._offset+z._length*rt):"paper"===at?"y"===Y?(rt=1-rt,tt.tail=c.t+c.h*rt):tt.tail=c.l+c.w*rt:tt.tail=z._offset+z.r2p(rt),W=T}else tt.tail=H+rt,W=T+rt;tt.text=tt.tail+T;var st=l["x"===Y?"width":"height"];if("paper"===J&&(tt.head=$N.constrain(tt.head,1,st-1)),"pixel"===_){var ot=-Math.max(tt.tail-3,tt.text),lt=Math.min(tt.tail+3,tt.text)-st;ot>0?(tt.tail+=ot,tt.text+=ot):lt>0&&(tt.tail-=lt,tt.text-=lt)}tt.tail+=$,tt.head+=$}else W=T=j*Z(M,q),tt.text=H+T;tt.text+=$,T+=$,W+=$,e["_"+Y+"padplus"]=j/2+W,e["_"+Y+"padminus"]=j/2-W,e["_"+Y+"size"]=j,e["_"+Y+"shift"]=T}if(N)y.remove();else{var ct=0,gt=0;if("left"!==e.align&&(ct=(G-b)*("center"===e.align?.5:1)),"top"!==e.valign&&(gt=(R-x)*("middle"===e.valign?.5:1)),o)s.select("svg").attr({x:v+ct-1,y:v+gt}).call(nD.setClipUrl,A?p:null,t);else{var ut=v+gt-u.top,dt=v+ct-u.left;S.call(aD.positionText,dt,ut).call(nD.setClipUrl,A?p:null,t)}L.select("rect").call(nD.setRect,v,v,G,R),C.call(nD.setRect,m/2,m/2,V-m,E-m),y.call(nD.setTranslate,Math.round(F.x.text-V/2),Math.round(F.y.text-E/2)),I.attr({transform:"rotate("+f+","+F.x.text+","+F.y.text+")"});var ht,Bt=function(i,s){Q.selectAll(".annotation-arrow-g").remove();var o=F.x.head,l=F.y.head,u=F.x.tail+i,p=F.y.tail+s,U=F.x.text+i,b=F.y.text+s,m=$N.rotationXYMatrix(f,U,b),x=$N.apply2DTransform(m),v=$N.apply2DTransform2(m),A=+C.attr("width"),L=+C.attr("height"),G=U-.5*A,R=G+A,S=b-.5*L,w=S+L,V=[[G,S,G,w],[G,w,R,w],[R,w,R,S],[R,S,G,S]].map(v);if(!V.reduce((function(t,e){return t^!!$N.segmentsIntersect(o,l,o+1e6,l+1e6,e[0],e[1],e[2],e[3])}),!1)){V.forEach((function(t){var e=$N.segmentsIntersect(u,p,o,l,t[0],t[1],t[2],t[3]);e&&(u=e.x,p=e.y)}));var E=e.arrowwidth,Z=e.arrowcolor,N=e.arrowside,D=Q.append("g").style({opacity:iD.opacity(Z)}).classed("annotation-arrow-g",!0),X=D.append("path").attr("d","M"+u+","+p+"L"+o+","+l).style("stroke-width",E+"px").call(iD.stroke,iD.rgb(Z));if(cD(X,N,e),g.annotationPosition&&X.node().parentNode&&!n){var H=o,W=l;if(e.standoff){var k=Math.sqrt(Math.pow(o-u,2)+Math.pow(l-p,2));H+=e.standoff*(u-o)/k,W+=e.standoff*(p-l)/k}var M,T,Y=D.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(u-H)+","+(p-W),transform:tD(H,W)}).style("stroke-width",E+6+"px").call(iD.stroke,"rgba(0,0,0,0)").call(iD.fill,"rgba(0,0,0,0)");oD.init({element:Y.node(),gd:t,prepFn:function(){var t=nD.getTranslate(y);M=t.x,T=t.y,r&&r.autorange&&d(r._name+".autorange",!0),a&&a.autorange&&d(a._name+".autorange",!0)},moveFn:function(t,i){var n=x(M,T),s=n[0]+t,o=n[1]+i;y.call(nD.setTranslate,s,o),h("x",dD(r,t,"x",c,e)),h("y",dD(a,i,"y",c,e)),e.axref===e.xref&&h("ax",dD(r,t,"ax",c,e)),e.ayref===e.yref&&h("ay",dD(a,i,"ay",c,e)),D.attr("transform",tD(t,i)),I.attr({transform:"rotate("+f+","+s+","+o+")"})},doneFn:function(){jN.call("_guiRelayout",t,B());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};if(e.showarrow&&Bt(0,0),U)oD.init({element:y.node(),gd:t,prepFn:function(){ht=I.attr("transform")},moveFn:function(t,i){var s="pointer";if(e.showarrow)e.axref===e.xref?h("ax",dD(r,t,"ax",c,e)):h("ax",e.ax+t),e.ayref===e.yref?h("ay",dD(a,i,"ay",c.w,e)):h("ay",e.ay+i),Bt(t,i);else{if(n)return;var o,l;if(r)o=dD(r,t,"x",c,e);else{var g=e._xsize/c.w,u=e.x+(e._xshift-e.xshift)/c.w-g/2;o=oD.align(u+t/c.w,g,0,1,e.xanchor)}if(a)l=dD(a,i,"y",c,e);else{var d=e._ysize/c.h,B=e.y-(e._yshift+e.yshift)/c.h-d/2;l=oD.align(B-i/c.h,d,0,1,e.yanchor)}h("x",o),h("y",l),r&&a||(s=oD.getCursor(r?.5:o,a?.5:l,e.xanchor,e.yanchor))}I.attr({transform:tD(t,i)+ht}),sD(y,s)},clickFn:function(i,n){e.captureevents&&t.emit("plotly_clickannotation",w(n))},doneFn:function(){sD(y),jN.call("_guiRelayout",t,B());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}var BD=_B,pD=Nu,FD=Ap.arrayEditor,fD={hasClickToShow:function(t,e){var i=QD(t,e);return i.on.length>0||i.explicitOff.length>0},onClick:function(t,e){var i,n,r=QD(t,e),a=r.on,s=r.off.concat(r.explicitOff),o={},l=t._fullLayout.annotations;if(!a.length&&!s.length)return;for(i=0;i<a.length;i++)(n=FD(t.layout,"annotations",l[a[i]])).modifyItem("visible",!0),BD.extendFlat(o,n.getUpdateObj());for(i=0;i<s.length;i++)(n=FD(t.layout,"annotations",l[s[i]])).modifyItem("visible",!1),BD.extendFlat(o,n.getUpdateObj());return pD.call("update",t,{},o)}};function QD(t,e){var i,n,r,a,s,o,l,c=t._fullLayout.annotations,g=[],u=[],d=[],h=(e||[]).length;for(i=0;i<c.length;i++)if(a=(r=c[i]).clicktoshow){for(n=0;n<h;n++)if(o=(s=e[n]).xaxis,l=s.yaxis,o._id===r.xref&&l._id===r.yref&&o.d2r(s.x)===ID(r._xclick,o)&&l.d2r(s.y)===ID(r._yclick,l)){(r.visible?"onout"===a?u:d:g).push(i);break}n===h&&r.visible&&"onout"===a&&u.push(i)}return{on:g,off:u,explicitOff:d}}function ID(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}var UD=_B,bD=Uu,yD=function(t,e,i,n){n("opacity");var r=n("bgcolor"),a=n("bordercolor"),s=bD.opacity(a);n("borderpad");var o=n("borderwidth"),l=n("showarrow");if(n("text",l?" ":i._dfltTitle.annotation),n("textangle"),UD.coerceFont(n,"font",i.font),n("width"),n("align"),n("height")&&n("valign"),l){var c,g,u=n("arrowside");-1!==u.indexOf("end")&&(c=n("arrowhead"),g=n("arrowsize")),-1!==u.indexOf("start")&&(n("startarrowhead",c),n("startarrowsize",g)),n("arrowcolor",s?e.bordercolor:bD.defaultLine),n("arrowwidth",2*(s&&o||1)),n("standoff"),n("startstandoff")}var d=n("hovertext"),h=i.hoverlabel||{};if(d){var B=n("hoverlabel.bgcolor",h.bgcolor||(bD.opacity(r)?bD.rgb(r):bD.defaultLine)),p=n("hoverlabel.bordercolor",h.bordercolor||bD.contrast(B)),F=UD.extendFlat({},h.font);F.color||(F.color=p),UD.coerceFont(n,"hoverlabel.font",F)}n("captureevents",!!d)},mD=_B,xD=Vy,vD=tQ,CD=yD,AD=NR;function LD(t,e,i){function n(i,n){return mD.coerce(t,e,AD,i,n)}var r=n("visible"),a=n("clicktoshow");if(r||a){CD(t,e,i,n);for(var s=e.showarrow,o=["x","y"],l=[-10,-30],c={_fullLayout:i},g=0;g<2;g++){var u=o[g],d=xD.coerceRef(t,e,c,u,"","paper");if("paper"!==d)xD.getFromId(c,d)._annIndices.push(e._index);if(xD.coercePosition(e,c,n,d,u,.5),s){var h="a"+u,B=xD.coerceRef(t,e,c,h,"pixel",["pixel","paper"]);"pixel"!==B&&B!==d&&(B=e[h]="pixel");var p="pixel"===B?l[g]:.4;xD.coercePosition(e,c,n,B,h,p)}n(u+"anchor"),n(u+"shift")}if(mD.noneOrAll(t,e,["x","y"]),s&&mD.noneOrAll(t,e,["ax","ay"]),a){var F=n("xclick"),f=n("yclick");e._xclick=void 0===F?e.x:xD.cleanPosition(F,c,e.xref),e._yclick=void 0===f?e.y:xD.cleanPosition(f,c,e.yref)}}}var GD=_B,RD=Vy,SD=gD.draw;function wD(t){var e=t._fullLayout;GD.filterVisible(e.annotations).forEach((function(e){var i=RD.getFromId(t,e.xref),n=RD.getFromId(t,e.yref),r=RD.getRefType(e.xref),a=RD.getRefType(e.yref);e._extremes={},"range"===r&&VD(e,i),"range"===a&&VD(e,n)}))}function VD(t,e){var i,n=e._id,r=n.charAt(0),a=t[r],s=t["a"+r],o=t[r+"ref"],l=t["a"+r+"ref"],c=t["_"+r+"padplus"],g=t["_"+r+"padminus"],u={x:1,y:-1}[r]*t[r+"shift"],d=3*t.arrowsize*t.arrowwidth||0,h=d+u,B=d-u,p=3*t.startarrowsize*t.arrowwidth||0,F=p+u,f=p-u;if(l===o){var Q=RD.findExtremes(e,[e.r2c(a)],{ppadplus:h,ppadminus:B}),I=RD.findExtremes(e,[e.r2c(s)],{ppadplus:Math.max(c,F),ppadminus:Math.max(g,f)});i={min:[Q.min[0],I.min[0]],max:[Q.max[0],I.max[0]]}}else F=s?F+s:F,f=s?f-s:f,i=RD.findExtremes(e,[e.r2c(a)],{ppadplus:Math.max(c,h,F),ppadminus:Math.max(g,B,f)});t._extremes[n]=i}var ED=$c,ZD=Vg,ND=gD,DD=fD,XD={moduleType:"component",name:"annotations",layoutAttributes:NR,supplyLayoutDefaults:function(t,e){vD(t,e,{name:"annotations",handleItemDefaults:LD})},includeBasePlot:BS("annotations"),calcAutorange:function(t){var e=t._fullLayout;if(GD.filterVisible(e.annotations).length&&t._fullData.length)return GD.syncOrAsync([SD,wD],t)},draw:ND.draw,drawOne:ND.drawOne,drawRaw:ND.drawRaw,hasClickToShow:DD.hasClickToShow,onClick:DD.onClick,convertCoords:function(t,e,i,n){e=e||{};var r="log"===i&&"linear"===e.type,a="linear"===i&&"log"===e.type;if(r||a)for(var s,o,l=t._fullLayout.annotations,c=e._id.charAt(0),g=0;g<l.length;g++)s=l[g],o="annotations["+g+"].",s[c+"ref"]===e._id&&u(c),s["a"+c+"ref"]===e._id&&u("a"+c);function u(t){var i=s[t],a=null;a=r?ZD(i,e.range):Math.pow(10,i),ED(a)||(a=null),n(o+t,a)}}},HD=NR,WD=(0,wd.overrideAll)((0,Ap.templatedArray)("annotation",{visible:HD.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:HD.xanchor,xshift:HD.xshift,yanchor:HD.yanchor,yshift:HD.yshift,text:HD.text,textangle:HD.textangle,font:HD.font,width:HD.width,height:HD.height,opacity:HD.opacity,align:HD.align,valign:HD.valign,bgcolor:HD.bgcolor,bordercolor:HD.bordercolor,borderpad:HD.borderpad,borderwidth:HD.borderwidth,showarrow:HD.showarrow,arrowcolor:HD.arrowcolor,arrowhead:HD.arrowhead,startarrowhead:HD.startarrowhead,arrowside:HD.arrowside,arrowsize:HD.arrowsize,startarrowsize:HD.startarrowsize,arrowwidth:HD.arrowwidth,standoff:HD.standoff,startstandoff:HD.startstandoff,hovertext:HD.hovertext,hoverlabel:HD.hoverlabel,captureevents:HD.captureevents}),"calc","from-root"),kD=_B,MD=Vy,TD=tQ,YD=yD,JD=WD;function _D(t,e,i,n){function r(i,n){return kD.coerce(t,e,JD,i,n)}function a(t){var n=t+"axis",a={_fullLayout:{}};return a._fullLayout[n]=i[n],MD.coercePosition(e,a,r,t,t,.5)}r("visible")&&(YD(t,e,n.fullLayout,r),a("x"),a("y"),a("z"),kD.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",r("xanchor"),r("yanchor"),r("xshift"),r("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",r("ax",-10),r("ay",-30),kD.noneOrAll(t,e,["ax","ay"])))}var zD=_B,OD=Vy;function KD(t,e){var i=e.fullSceneLayout.domain,n=e.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},zD.extendFlat(t._xa,r),OD.setConvert(t._xa),t._xa._offset=n.l+i.x[0]*n.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*n.w*(i.x[1]-i.x[0])},t._ya={},zD.extendFlat(t._ya,r),OD.setConvert(t._ya),t._ya._offset=n.t+(1-i.y[1])*n.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*n.h*(i.y[1]-i.y[0])}}function PD(t,e){var i,n,r=[0,0,0,0];for(i=0;i<4;++i)for(n=0;n<4;++n)r[n]+=t[4*i+n]*e[i];return r}var jD=function(t,e){return PD(t.projection,PD(t.view,PD(t.model,[e[0],e[1],e[2],1])))},qD=gD.drawRaw,$D=jD,tX=["x","y","z"],eX=Nu,iX=_B,nX={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:WD}}},layoutAttributes:WD,handleDefaults:function(t,e,i){TD(t,e,{name:"annotations",handleItemDefaults:_D,fullLayout:i.fullLayout})},includeBasePlot:function(t,e){var i=eX.subplotsRegistry.gl3d;if(!i)return;for(var n=i.attrRegex,r=Object.keys(t),a=0;a<r.length;a++){var s=r[a];n.test(s)&&(t[s].annotations||[]).length&&(iX.pushUnique(e._basePlotModules,i),iX.pushUnique(e._subplots.gl3d,s))}},convert:function(t){for(var e=t.fullSceneLayout.annotations,i=0;i<e.length;i++)KD(e[i],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()},draw:function(t){for(var e=t.fullSceneLayout,i=t.dataScale,n=e.annotations,r=0;r<n.length;r++){for(var a=n[r],s=!1,o=0;o<3;o++){var l=tX[o],c=a[l],g=e[l+"axis"].r2fraction(c);if(g<0||g>1){s=!0;break}}s?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+r+'"]').remove():(a._pdata=$D(t.glplot.cameraParams,[e.xaxis.r2l(a.x)*i[0],e.yaxis.r2l(a.y)*i[1],e.zaxis.r2l(a.z)*i[2]]),qD(t.graphDiv,a,r,t.id,a._xa,a._ya))}}};var rX=NR,aX=_g(),sX=qR.line,oX=Nd.dash,lX=Mg.extendFlat,cX=Ap.templatedArray,gX=GR,uX=ru,dX=Dd.shapeTexttemplateAttrs,hX=jd,BX=cX("shape",{visible:lX({},uX.visible,{editType:"calc+arraydraw",description:["Determines whether or not this shape is visible.","If *legendonly*, the shape is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether or not this","shape is shown in the legend."].join(" ")},legend:lX({},uX.legend,{editType:"calc+arraydraw",description:["Sets the reference to a legend to show this shape in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")}),legendgroup:lX({},uX.legendgroup,{editType:"calc+arraydraw",description:["Sets the legend group for this shape.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")}),legendgrouptitle:{text:lX({},uX.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:aX({editType:"calc+arraydraw",description:["Sets this legend group's title font."].join(" ")}),editType:"calc+arraydraw"},legendrank:lX({},uX.legendrank,{editType:"calc+arraydraw",description:["Sets the legend rank for this shape.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items.","When having unranked or equal rank items shapes would be displayed after traces","i.e. according to their order in data and layout."].join(" ")}),legendwidth:lX({},uX.legendwidth,{editType:"calc+arraydraw",description:"Sets the width (in px or fraction) of the legend for this shape."}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw",description:["Specifies whether shapes are drawn below gridlines (*below*),","between gridlines and traces (*between*) or above traces (*above*)."].join(" ")},xref:lX({},rX.xref,{description:["Sets the shape's x coordinate axis.",gX.axisRefDescription("x","left","right")].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc",description:["Shifts `x0` away from the center of the category when `xref` is a *category* or","*multicategory* axis. -0.5 corresponds to the start of the category and 0.5","corresponds to the end of the category."].join(" ")},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc",description:["Shifts `x1` away from the center of the category when `xref` is a *category* or","*multicategory* axis. -0.5 corresponds to the start of the category and 0.5","corresponds to the end of the category."].join(" ")},yref:lX({},rX.yref,{description:["Sets the shape's y coordinate axis.",gX.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc",description:["Shifts `y0` away from the center of the category when `yref` is a *category* or","*multicategory* axis. -0.5 corresponds to the start of the category and 0.5","corresponds to the end of the category."].join(" ")},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc",description:["Shifts `y1` away from the center of the category when `yref` is a *category* or","*multicategory* axis. -0.5 corresponds to the start of the category and 0.5","corresponds to the end of the category."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:lX({},sX.color,{editType:"arraydraw"}),width:lX({},sX.width,{editType:"calc+arraydraw"}),dash:lX({},oX,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},label:{text:{valType:"string",dflt:"",editType:"arraydraw",description:["Sets the text to display with shape.","It is also used for legend item if `name` is not provided."].join(" ")},texttemplate:dX({},{keys:Object.keys(hX)}),font:aX({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw",description:["Sets the position of the label text relative to the shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw",description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw",description:"Sets padding (in px) between edge of label and edge of shape."},editType:"arraydraw"},editType:"arraydraw"}),pX=_B,FX=Vy,fX=tQ,QX=BX,IX=bC;function UX(t,e,i){function n(i,n){return pX.coerce(t,e,QX,i,n)}if(e._isShape=!0,n("visible")){n("showlegend")&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),pX.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var r=n("path"),a=n("type",r?"path":"rect"),s="path"!==a;s&&delete e.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var o=n("xsizemode"),l=n("ysizemode"),c=["x","y"],g=0;g<2;g++){var u,d,h,B=c[g],p=B+"anchor",F="x"===B?o:l,f={_fullLayout:i},Q=FX.coerceRef(t,e,f,B,void 0,"paper");if("range"===FX.getRefType(Q)?((u=FX.getFromId(f,Q))._shapeIndices.push(e._index),h=IX.rangeToShapePosition(u),d=IX.shapePositionToRange(u),"category"!==u.type&&"multicategory"!==u.type||(n(B+"0shift"),n(B+"1shift"))):d=h=pX.identity,s){var I=B+"0",U=B+"1",b=t[I],y=t[U];t[I]=d(t[I],!0),t[U]=d(t[U],!0),"pixel"===F?(n(I,0),n(U,10)):(FX.coercePosition(e,f,n,Q,I,.25),FX.coercePosition(e,f,n,Q,U,.75)),e[I]=h(e[I]),e[U]=h(e[U]),t[I]=b,t[U]=y}if("pixel"===F){var m=t[p];t[p]=d(t[p],!0),FX.coercePosition(e,f,n,Q,p,.25),e[p]=h(e[p]),t[p]=m}}s&&pX.noneOrAll(t,e,["x0","x1","y0","y1"]);var x,v,C="line"===a;if(s&&(x=n("label.texttemplate")),x||(v=n("label.text")),v||x){n("label.textangle");var A=n("label.textposition",C?"middle":"middle center");n("label.xanchor"),n("label.yanchor",function(t,e){return t?"bottom":-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle"}(C,A)),n("label.padding"),pX.coerceFont(n,"label.font",i.font)}}}var bX=Uu,yX=_B;var mX=_B,xX=Vy,vX=yC,CX=bC;function AX(t){return GX(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function LX(t){return GX(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function GX(t,e,i,n,r,a){var s=t/2,o=a;if("pixel"===e){var l=r?CX.extractPathCoords(r,a?vX.paramIsY:vX.paramIsX):[i,n],c=mX.aggNums(Math.max,null,l),g=mX.aggNums(Math.min,null,l),u=g<0?Math.abs(g)+s:s,d=c>0?c+s:s;return{ppad:s,ppadplus:o?u:d,ppadminus:o?d:u}}return{ppad:s}}function RX(t,e,i){var n,r,a="x"===t._id.charAt(0)?"x":"y",s="category"===t.type||"multicategory"===t.type,o=0,l=0,c=s?t.r2c:t.d2c;if("scaled"===e[a+"sizemode"]?(n=e[a+"0"],r=e[a+"1"],s&&(o=e[a+"0shift"],l=e[a+"1shift"])):(n=e[a+"anchor"],r=e[a+"anchor"]),void 0!==n)return[c(n)+o,c(r)+l];if(e.path){var g,u,d,h,B=1/0,p=-1/0,F=e.path.match(vX.segmentRE);for("date"===t.type&&(c=CX.decodeDate(c)),g=0;g<F.length;g++)void 0!==(u=i[F[g].charAt(0)].drawn)&&(!(d=F[g].substr(1).match(vX.paramRE))||d.length<u||((h=c(d[u]))<B&&(B=h),h>p&&(p=h)));return p>=B?[B,p]:void 0}}var SX=pA,wX={moduleType:"component",name:"shapes",layoutAttributes:BX,supplyLayoutDefaults:function(t,e){fX(t,e,{name:"shapes",handleItemDefaults:UX})},supplyDrawNewShapeDefaults:function(t,e,i){if(i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),yX.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity"),i("newshape.line.width")){var n=(t||{}).plot_bgcolor||"#FFF";i("newshape.line.color",bX.contrast(n)),i("newshape.line.dash")}var r="drawline"===t.dragmode,a=i("newshape.label.text"),s=i("newshape.label.texttemplate");if(a||s){i("newshape.label.textangle");var o=i("newshape.label.textposition",r?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",function(t,e){return t?"bottom":-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle"}(r,o)),i("newshape.label.padding"),yX.coerceFont(i,"newshape.label.font",e.font)}i("activeshape.fillcolor"),i("activeshape.opacity")},includeBasePlot:BS("shapes"),calcAutorange:function(t){var e=t._fullLayout,i=mX.filterVisible(e.shapes);if(i.length&&t._fullData.length)for(var n=0;n<i.length;n++){var r,a,s=i[n];s._extremes={};var o=xX.getRefType(s.xref),l=xX.getRefType(s.yref);"paper"!==s.xref&&"domain"!==o&&(a=RX(r=xX.getFromId(t,s.xref),s,vX.paramIsX))&&(s._extremes[r._id]=xX.findExtremes(r,a,AX(s))),"paper"!==s.yref&&"domain"!==l&&(a=RX(r=xX.getFromId(t,s.yref),s,vX.paramIsY))&&(s._extremes[r._id]=xX.findExtremes(r,a,LX(s)))}},draw:SX.draw,drawOne:SX.drawOne},VX=Np,EX=GR,ZX=(0,Ap.templatedArray)("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",VX.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",EX.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",VX.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",EX.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"}),NX=_B,DX=Vy,XX=tQ,HX=ZX;function WX(t,e,i){function n(i,n){return NX.coerce(t,e,HX,i,n)}var r=n("source");if(!n("visible",!!r))return e;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var a={_fullLayout:i},s=["x","y"],o=0;o<2;o++){var l=s[o],c=DX.coerceRef(t,e,a,l,"paper",void 0);if("paper"!==c)DX.getFromId(a,c)._imgIndices.push(e._index);DX.coercePosition(e,a,n,c,l,0)}return e}var kX=Js,MX=jI,TX=Vy,YX=Ep,JX=vF,_X=$c,zX=Vg,OX={moduleType:"component",name:"images",layoutAttributes:ZX,supplyLayoutDefaults:function(t,e){XX(t,e,{name:"images",handleItemDefaults:WX})},includeBasePlot:BS("images"),draw:function(t){var e,i,n=t._fullLayout,r=[],a={},s=[];for(i=0;i<n.images.length;i++){var o=n.images[i];if(o.visible)if("below"===o.layer&&"paper"!==o.xref&&"paper"!==o.yref){e=YX.ref2id(o.xref)+YX.ref2id(o.yref);var l=n._plots[e];if(!l){s.push(o);continue}l.mainplot&&(e=l.mainplot.id),a[e]||(a[e]=[]),a[e].push(o)}else"above"===o.layer?r.push(o):s.push(o)}var c={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},g={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function u(e){var i=kX.select(this);if(this._imgSrc!==e.source)if(i.attr("xmlns",JX.svg),!t._context.staticPlot||e.source&&"data:"===e.source.slice(0,5))i.attr("xlink:href",e.source),this._imgSrc=e.source;else{var n=new Promise(function(t){var n=new Image;function r(){i.remove(),t()}this.img=n,n.setAttribute("crossOrigin","anonymous"),n.onerror=r,n.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var n=e.toDataURL("image/png");i.attr("xlink:href",n),t()},i.on("error",r),n.src=e.source,this._imgSrc=e.source}.bind(this));t._promises.push(n)}}function d(e){var i,r,a=kX.select(this),s=TX.getFromId(t,e.xref),o=TX.getFromId(t,e.yref),l="domain"===TX.getRefType(e.xref),u="domain"===TX.getRefType(e.yref),d=n._size;i=void 0!==s?"string"==typeof e.xref&&l?s._length*e.sizex:Math.abs(s.l2p(e.sizex)-s.l2p(0)):e.sizex*d.w,r=void 0!==o?"string"==typeof e.yref&&u?o._length*e.sizey:Math.abs(o.l2p(e.sizey)-o.l2p(0)):e.sizey*d.h;var h,B,p=i*c[e.xanchor].offset,F=r*g[e.yanchor].offset,f=c[e.xanchor].sizing+g[e.yanchor].sizing;switch(h=void 0!==s?"string"==typeof e.xref&&l?s._length*e.x+s._offset:s.r2p(e.x)+s._offset:e.x*d.w+d.l,h+=p,B=void 0!==o?"string"==typeof e.yref&&u?o._length*(1-e.y)+o._offset:o.r2p(e.y)+o._offset:d.h-e.y*d.h+d.t,B+=F,e.sizing){case"fill":f+=" slice";break;case"stretch":f="none"}a.attr({x:h,y:B,width:i,height:r,preserveAspectRatio:f,opacity:e.opacity});var Q=(s&&"domain"!==TX.getRefType(e.xref)?s._id:"")+(o&&"domain"!==TX.getRefType(e.yref)?o._id:"");MX.setClipUrl(a,Q?"clip"+n._uid+Q:null,t)}function h(t){return[t.xref,t.x,t.sizex,t.yref,t.y,t.sizey].join("_")}function B(t,e){return t._index-e._index}var p=n._imageLowerLayer.selectAll("image").data(s,h),F=n._imageUpperLayer.selectAll("image").data(r,h);p.enter().append("image"),F.enter().append("image"),p.exit().remove(),F.exit().remove(),p.each((function(t){u.bind(this)(t),d.bind(this)(t)})),F.each((function(t){u.bind(this)(t),d.bind(this)(t)})),p.sort(B),F.sort(B);var f=Object.keys(n._plots);for(i=0;i<f.length;i++){e=f[i];var Q=n._plots[e];if(Q.imagelayer){var I=Q.imagelayer.selectAll("image").data(a[e]||[],h);I.enter().append("image"),I.exit().remove(),I.each((function(t){u.bind(this)(t),d.bind(this)(t)})),I.sort(B)}}},convertCoords:function(t,e,i,n){e=e||{};var r="log"===i&&"linear"===e.type,a="linear"===i&&"log"===e.type;if(r||a)for(var s,o,l=t._fullLayout.images,c=e._id.charAt(0),g=0;g<l.length;g++)if(o="images["+g+"].",(s=l[g])[c+"ref"]===e._id){var u=s[c],d=s["size"+c],h=null,B=null;if(r){h=zX(u,e.range);var p=d/Math.pow(10,h)/2;B=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10}else B=(h=Math.pow(10,u))*(Math.pow(10,d/2)-Math.pow(10,-d/2));_X(h)?_X(B)||(B=null):(h=null,B=null),n(o+c,h),n(o+"size"+c,B)}}},KX={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}},PX=_g(),jX=uu,qX=Mg.extendFlat,$X=wd.overrideAll,tH=ch,eH=Ap.templatedArray,iH=eH("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),nH=$X(eH("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:iH,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:qX(tH({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:PX({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:jX.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root"),rH=_B,aH=tQ,sH=nH,oH=KX.name,lH=sH.buttons;function cH(t,e,i){function n(i,n){return rH.coerce(t,e,sH,i,n)}n("visible",aH(t,e,{name:"buttons",handleItemDefaults:gH}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),rH.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),rH.coerceFont(n,"font",i.font),n("bgcolor",i.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function gH(t,e){function i(i,n){return rH.coerce(t,e,lH,i,n)}i("visible","skip"===t.method||Array.isArray(t.args))&&(i("method"),i("args"),i("args2"),i("label"),i("execute"))}var uH=FH,dH=Js,hH=Uu,BH=jI,pH=_B;function FH(t,e,i){this.gd=t,this.container=e,this.id=i,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}FH.barWidth=2,FH.barLength=20,FH.barRadius=2,FH.barPad=1,FH.barColor="#808BA4",FH.prototype.enable=function(t,e,i){var n=this.gd._fullLayout,r=n.width,a=n.height;this.position=t;var s,o,l,c,g=this.position.l,u=this.position.w,d=this.position.t,h=this.position.h,B=this.position.direction,p="down"===B,F="left"===B,f="up"===B,Q=u,I=h;p||F||"right"===B||f||(this.position.direction="down",p=!0),p||f?(o=(s=g)+Q,p?(l=d,I=(c=Math.min(l+I,a))-l):I=(c=d+I)-(l=Math.max(c-I,0))):(c=(l=d)+I,F?Q=(o=g+Q)-(s=Math.max(o-Q,0)):(s=g,Q=(o=Math.min(s+Q,r))-s)),this._box={l:s,t:l,w:Q,h:I};var U=u>Q,b=FH.barLength+2*FH.barPad,y=FH.barWidth+2*FH.barPad,m=g,x=d+h;x+y>a&&(x=a-y);var v=this.container.selectAll("rect.scrollbar-horizontal").data(U?[0]:[]);v.exit().on(".drag",null).remove(),v.enter().append("rect").classed("scrollbar-horizontal",!0).call(hH.fill,FH.barColor),U?(this.hbar=v.attr({rx:FH.barRadius,ry:FH.barRadius,x:m,y:x,width:b,height:y}),this._hbarXMin=m+b/2,this._hbarTranslateMax=Q-b):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var C=h>I,A=FH.barWidth+2*FH.barPad,L=FH.barLength+2*FH.barPad,G=g+u,R=d;G+A>r&&(G=r-A);var S=this.container.selectAll("rect.scrollbar-vertical").data(C?[0]:[]);S.exit().on(".drag",null).remove(),S.enter().append("rect").classed("scrollbar-vertical",!0).call(hH.fill,FH.barColor),C?(this.vbar=S.attr({rx:FH.barRadius,ry:FH.barRadius,x:G,y:R,width:A,height:L}),this._vbarYMin=R+L/2,this._vbarTranslateMax=I-L):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var w=this.id,V=s-.5,E=C?o+A+.5:o+.5,Z=l-.5,N=U?c+y+.5:c+.5,D=n._topdefs.selectAll("#"+w).data(U||C?[0]:[]);if(D.exit().remove(),D.enter().append("clipPath").attr("id",w).append("rect"),U||C?(this._clipRect=D.select("rect").attr({x:Math.floor(V),y:Math.floor(Z),width:Math.ceil(E)-Math.floor(V),height:Math.ceil(N)-Math.floor(Z)}),this.container.call(BH.setClipUrl,w,this.gd),this.bg.attr({x:g,y:d,width:u,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(BH.setClipUrl,null),delete this._clipRect),U||C){var X=dH.behavior.drag().on("dragstart",(function(){dH.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(X);var H=dH.behavior.drag().on("dragstart",(function(){dH.event.sourceEvent.preventDefault(),dH.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));U&&this.hbar.on(".drag",null).call(H),C&&this.vbar.on(".drag",null).call(H)}this.setTranslate(e,i)},FH.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(BH.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},FH.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=dH.event.dx),this.vbar&&(e-=dH.event.dy),this.setTranslate(t,e)},FH.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=dH.event.deltaY),this.vbar&&(e+=dH.event.deltaY),this.setTranslate(t,e)},FH.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var i=t+this._hbarXMin,n=i+this._hbarTranslateMax;t=(pH.constrain(dH.event.x,i,n)-i)/(n-i)*(this.position.w-this._box.w)}if(this.vbar){var r=e+this._vbarYMin,a=r+this._vbarTranslateMax;e=(pH.constrain(dH.event.y,r,a)-r)/(a-r)*(this.position.h-this._box.h)}this.setTranslate(t,e)},FH.prototype.setTranslate=function(t,e){var i=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=pH.constrain(t||0,0,i),e=pH.constrain(e||0,0,n),this.translateX=t,this.translateY=e,this.container.call(BH.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var r=t/i;this.hbar.call(BH.setTranslate,t+r*this._hbarTranslateMax,e)}if(this.vbar){var a=e/n;this.vbar.call(BH.setTranslate,t,e+a*this._vbarTranslateMax)}};var fH=Js,QH=yF,IH=Uu,UH=jI,bH=_B,yH=xF,mH=Ap.arrayEditor,xH=CF.LINE_SPACING,vH=KX,CH=uH;function AH(t){return t._index}function LH(t,e){return+t.attr(vH.menuIndexAttrName)===e._index}function GH(t,e,i,n,r,a,s,o){e.active=s,mH(t.layout,vH.name,e).applyUpdate("active",s),"buttons"===e.type?SH(t,n,null,null,e):"dropdown"===e.type&&(r.attr(vH.menuIndexAttrName,"-1"),RH(t,n,r,a,e),o||SH(t,n,r,a,e))}function RH(t,e,i,n,r){var a=bH.ensureSingle(e,"g",vH.headerClassName,(function(t){t.style("pointer-events","all")})),s=r._dims,o=r.active,l=r.buttons[o]||vH.blankHeaderOpts,c={y:r.pad.t,yPad:0,x:r.pad.l,xPad:0,index:0},g={width:s.headerWidth,height:s.headerHeight};a.call(wH,r,l,t).call(WH,r,c,g);var u=bH.ensureSingle(e,"text",vH.headerArrowClassName,(function(t){t.attr("text-anchor","end").call(UH.font,r.font).text(vH.arrowSymbol[r.direction])}));u.attr({x:s.headerWidth-vH.arrowOffsetX+r.pad.l,y:s.headerHeight/2+vH.textOffsetY+r.pad.t}),a.on("click",(function(){i.call(kH,String(LH(i,r)?-1:r._index)),SH(t,e,i,n,r)})),a.on("mouseover",(function(){a.call(NH)})),a.on("mouseout",(function(){a.call(DH,r)})),UH.setTranslate(e,s.lx,s.ly)}function SH(t,e,i,n,r){i||(i=e).attr("pointer-events","all");var a=function(t){return-1==+t.attr(vH.menuIndexAttrName)}(i)&&"buttons"!==r.type?[]:r.buttons,s="dropdown"===r.type?vH.dropdownButtonClassName:vH.buttonClassName,o=i.selectAll("g."+s).data(bH.filterVisible(a)),l=o.enter().append("g").classed(s,!0),c=o.exit();"dropdown"===r.type?(l.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var g=0,u=0,d=r._dims,h=-1!==["up","down"].indexOf(r.direction);"dropdown"===r.type&&(h?u=d.headerHeight+vH.gapButtonHeader:g=d.headerWidth+vH.gapButtonHeader),"dropdown"===r.type&&"up"===r.direction&&(u=-vH.gapButtonHeader+vH.gapButton-d.openHeight),"dropdown"===r.type&&"left"===r.direction&&(g=-vH.gapButtonHeader+vH.gapButton-d.openWidth);var B={x:d.lx+g+r.pad.l,y:d.ly+u+r.pad.t,yPad:vH.gapButton,xPad:vH.gapButton,index:0},p={l:B.x+r.borderwidth,t:B.y+r.borderwidth};o.each((function(a,s){var l=fH.select(this);l.call(wH,r,a,t).call(WH,r,B),l.on("click",(function(){fH.event.defaultPrevented||(a.execute&&(a.args2&&r.active===s?(GH(t,r,0,e,i,n,-1),QH.executeAPICommand(t,a.method,a.args2)):(GH(t,r,0,e,i,n,s),QH.executeAPICommand(t,a.method,a.args))),t.emit("plotly_buttonclicked",{menu:r,button:a,active:r.active}))})),l.on("mouseover",(function(){l.call(NH)})),l.on("mouseout",(function(){l.call(DH,r),o.call(ZH,r)}))})),o.call(ZH,r),h?(p.w=Math.max(d.openWidth,d.headerWidth),p.h=B.y-p.t):(p.w=B.x-p.l,p.h=Math.max(d.openHeight,d.headerHeight)),p.direction=r.direction,n&&(o.size()?function(t,e,i,n,r,a){var s,o,l,c=r.direction,g="up"===c||"down"===c,u=r._dims,d=r.active;if(g)for(o=0,l=0;l<d;l++)o+=u.heights[l]+vH.gapButton;else for(s=0,l=0;l<d;l++)s+=u.widths[l]+vH.gapButton;n.enable(a,s,o),n.hbar&&n.hbar.attr("opacity","0").transition().attr("opacity","1");n.vbar&&n.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,n,r,p):function(t){var e=!!t.hbar,i=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",(function(){e=!1,i||t.disable()}));i&&t.vbar.transition().attr("opacity","0").each("end",(function(){i=!1,e||t.disable()}))}(n))}function wH(t,e,i,n){t.call(VH,e).call(EH,e,i,n)}function VH(t,e){var i=bH.ensureSingle(t,"rect",vH.itemRectClassName,(function(t){t.attr({rx:vH.rx,ry:vH.ry,"shape-rendering":"crispEdges"})}));i.call(IH.stroke,e.bordercolor).call(IH.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function EH(t,e,i,n){var r=bH.ensureSingle(t,"text",vH.itemTextClassName,(function(t){t.attr({"text-anchor":"start","data-notex":1})})),a=i.label,s=n._fullLayout._meta;s&&(a=bH.templateString(a,s)),r.call(UH.font,e.font).text(a).call(yH.convertToTspans,n)}function ZH(t,e){var i=e.active;t.each((function(t,n){var r=fH.select(this);n===i&&e.showactive&&r.select("rect."+vH.itemRectClassName).call(IH.fill,vH.activeColor)}))}function NH(t){t.select("rect."+vH.itemRectClassName).call(IH.fill,vH.hoverColor)}function DH(t,e){t.select("rect."+vH.itemRectClassName).call(IH.fill,e.bgcolor)}function XH(t,e){var i=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},n=UH.tester.selectAll("g."+vH.dropdownButtonClassName).data(bH.filterVisible(e.buttons));n.enter().append("g").classed(vH.dropdownButtonClassName,!0);var r=-1!==["up","down"].indexOf(e.direction);n.each((function(n,a){var s=fH.select(this);s.call(wH,e,n,t);var o=s.select("."+vH.itemTextClassName),l=o.node()&&UH.bBox(o.node()).width,c=Math.max(l+vH.textPadX,vH.minWidth),g=e.font.size*xH,u=yH.lineCount(o),d=Math.max(g*u,vH.minHeight)+vH.textOffsetY;d=Math.ceil(d),c=Math.ceil(c),i.widths[a]=c,i.heights[a]=d,i.height1=Math.max(i.height1,d),i.width1=Math.max(i.width1,c),r?(i.totalWidth=Math.max(i.totalWidth,c),i.openWidth=i.totalWidth,i.totalHeight+=d+vH.gapButton,i.openHeight+=d+vH.gapButton):(i.totalWidth+=c+vH.gapButton,i.openWidth+=c+vH.gapButton,i.totalHeight=Math.max(i.totalHeight,d),i.openHeight=i.totalHeight)})),r?i.totalHeight-=vH.gapButton:i.totalWidth-=vH.gapButton,i.headerWidth=i.width1+vH.arrowPadX,i.headerHeight=i.height1,"dropdown"===e.type&&(r?(i.width1+=vH.arrowPadX,i.totalHeight=i.height1):i.totalWidth=i.width1,i.totalWidth+=vH.arrowPadX),n.remove();var a=i.totalWidth+e.pad.l+e.pad.r,s=i.totalHeight+e.pad.t+e.pad.b,o=t._fullLayout._size;i.lx=o.l+o.w*e.x,i.ly=o.t+o.h*(1-e.y);var l="left";bH.isRightAnchor(e)&&(i.lx-=a,l="right"),bH.isCenterAnchor(e)&&(i.lx-=a/2,l="center");var c="top";bH.isBottomAnchor(e)&&(i.ly-=s,c="bottom"),bH.isMiddleAnchor(e)&&(i.ly-=s/2,c="middle"),i.totalWidth=Math.ceil(i.totalWidth),i.totalHeight=Math.ceil(i.totalHeight),i.lx=Math.round(i.lx),i.ly=Math.round(i.ly),QH.autoMargin(t,HH(e),{x:e.x,y:e.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:s*({top:1,middle:.5}[c]||0),t:s*({bottom:1,middle:.5}[c]||0)})}function HH(t){return vH.autoMarginIdRoot+t._index}function WH(t,e,i,n){n=n||{};var r=t.select("."+vH.itemRectClassName),a=t.select("."+vH.itemTextClassName),s=e.borderwidth,o=i.index,l=e._dims;UH.setTranslate(t,s+i.x,s+i.y);var c=-1!==["up","down"].indexOf(e.direction),g=n.height||(c?l.heights[o]:l.height1);r.attr({x:0,y:0,width:n.width||(c?l.width1:l.widths[o]),height:g});var u=e.font.size*xH,d=(yH.lineCount(a)-1)*u/2;yH.positionText(a,vH.textOffsetX,g/2-d+vH.textOffsetY),c?i.y+=l.heights[o]+i.yPad:i.x+=l.widths[o]+i.xPad,i.index++}function kH(t,e){t.attr(vH.menuIndexAttrName,e||"-1").selectAll("g."+vH.dropdownButtonClassName).remove()}var MH={moduleType:"component",name:KX.name,layoutAttributes:nH,supplyLayoutDefaults:function(t,e){aH(t,e,{name:oH,handleItemDefaults:cH})},draw:function(t){var e=t._fullLayout,i=bH.filterVisible(e[vH.name]);function n(e){QH.autoMargin(t,HH(e))}var r=e._menulayer.selectAll("g."+vH.containerClassName).data(i.length>0?[0]:[]);if(r.enter().append("g").classed(vH.containerClassName,!0).style("cursor","pointer"),r.exit().each((function(){fH.select(this).selectAll("g."+vH.headerGroupClassName).each(n)})).remove(),0!==i.length){var a=r.selectAll("g."+vH.headerGroupClassName).data(i,AH);a.enter().append("g").classed(vH.headerGroupClassName,!0);for(var s=bH.ensureSingle(r,"g",vH.dropdownButtonGroupClassName,(function(t){t.style("pointer-events","all")})),o=0;o<i.length;o++){var l=i[o];XH(t,l)}var c="updatemenus"+e._uid,g=new CH(t,s,c);a.enter().size()&&(s.node().parentNode.appendChild(s.node()),s.call(kH)),a.exit().each((function(t){s.call(kH),n(t)})).remove(),a.each((function(e){var i=fH.select(this),n="dropdown"===e.type?s:null;QH.manageCommandObserver(t,e,e.buttons,(function(r){GH(t,e,e.buttons[r.index],i,n,g,r.index,!0)})),"dropdown"===e.type?(RH(t,i,s,g,e),LH(s,e)&&SH(t,i,s,g,e)):SH(t,i,null,null,e)}))}}},TH={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",autoMarginIdRoot:"slider-",railRadius:2,railWidth:5,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickLength:4,currentValueInset:0},YH=_g(),JH=ch,_H=Mg.extendDeepAll,zH=wd.overrideAll,OH=vd,KH=Ap.templatedArray,PH=TH,jH=KH("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),qH=zH(KH("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:jH,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:_H(JH({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:OH.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:YH({description:"Sets the font of the current value label text."})},font:YH({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:PH.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:PH.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:PH.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:PH.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:PH.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:PH.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:PH.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root"),$H=_B,tW=tQ,eW=qH,iW=TH.name,nW=eW.steps;function rW(t,e,i){function n(i,n){return $H.coerce(t,e,eW,i,n)}for(var r=tW(t,e,{name:"steps",handleItemDefaults:aW}),a=0,s=0;s<r.length;s++)r[s].visible&&a++;if(a<2?e.visible=!1:n("visible")){e._stepCount=a;var o=e._visibleSteps=$H.filterVisible(r);(r[n("active")]||{}).visible||(e.active=o[0]._index),n("x"),n("y"),$H.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),$H.coerceFont(n,"font",i.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),$H.coerceFont(n,"currentvalue.font",e.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function aW(t,e){function i(i,n){return $H.coerce(t,e,nW,i,n)}if("skip"===t.method||Array.isArray(t.args)?i("visible"):e.visible=!1){i("method"),i("args");var n=i("label","step-"+e._index);i("value",n),i("execute")}}var sW=Js,oW=yF,lW=Uu,cW=jI,gW=_B,uW=gW.strTranslate,dW=xF,hW=Ap.arrayEditor,BW=TH,pW=CF.LINE_SPACING,FW=CF.FROM_TL,fW=CF.FROM_BR;function QW(t){return BW.autoMarginIdRoot+t._index}function IW(t){return t._index}function UW(t,e){var i=cW.tester.selectAll("g."+BW.labelGroupClass).data(e._visibleSteps);i.enter().append("g").classed(BW.labelGroupClass,!0);var n=0,r=0;i.each((function(t){var i=mW(sW.select(this),{step:t},e).node();if(i){var a=cW.bBox(i);r=Math.max(r,a.height),n=Math.max(n,a.width)}})),i.remove();var a=e._dims={};a.inputAreaWidth=Math.max(BW.railWidth,BW.gripHeight);var s=t._fullLayout._size;a.lx=s.l+s.w*e.x,a.ly=s.t+s.h*(1-e.y),"fraction"===e.lenmode?a.outerLength=Math.round(s.w*e.len):a.outerLength=e.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-e.pad.l-e.pad.r);var o=(a.inputAreaLength-2*BW.stepInset)/(e._stepCount-1),l=n+BW.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(l/o)),a.labelHeight=r,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,e.currentvalue.visible){var c=cW.tester.append("g");i.each((function(t){var i=bW(c,e,t.label),n=i.node()&&cW.bBox(i.node())||{width:0,height:0},r=dW.lineCount(i);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(n.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(n.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,r)})),a.currentValueTotalHeight=a.currentValueHeight+e.currentvalue.offset,c.remove()}a.height=a.currentValueTotalHeight+BW.tickOffset+e.ticklen+BW.labelOffset+a.labelHeight+e.pad.t+e.pad.b;var g="left";gW.isRightAnchor(e)&&(a.lx-=a.outerLength,g="right"),gW.isCenterAnchor(e)&&(a.lx-=a.outerLength/2,g="center");var u="top";gW.isBottomAnchor(e)&&(a.ly-=a.height,u="bottom"),gW.isMiddleAnchor(e)&&(a.ly-=a.height/2,u="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);var d={y:e.y,b:a.height*fW[u],t:a.height*FW[u]};"fraction"===e.lenmode?(d.l=0,d.xl=e.x-e.len*FW[g],d.r=0,d.xr=e.x+e.len*fW[g]):(d.x=e.x,d.l=a.outerLength*FW[g],d.r=a.outerLength*fW[g]),oW.autoMargin(t,QW(e),d)}function bW(t,e,i){if(e.currentvalue.visible){var n,r,a=e._dims;switch(e.currentvalue.xanchor){case"right":n=a.inputAreaLength-BW.currentValueInset-a.currentValueMaxWidth,r="left";break;case"center":n=.5*a.inputAreaLength,r="middle";break;default:n=BW.currentValueInset,r="left"}var s=gW.ensureSingle(t,"text",BW.labelClass,(function(t){t.attr({"text-anchor":r,"data-notex":1})})),o=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof i)o+=i;else{var l=e.steps[e.active].label,c=e._gd._fullLayout._meta;c&&(l=gW.templateString(l,c)),o+=l}e.currentvalue.suffix&&(o+=e.currentvalue.suffix),s.call(cW.font,e.currentvalue.font).text(o).call(dW.convertToTspans,e._gd);var g=dW.lineCount(s),u=(a.currentValueMaxLines+1-g)*e.currentvalue.font.size*pW;return dW.positionText(s,n,u),s}}function yW(t,e,i){var n=gW.ensureSingle(t,"rect",BW.gripRectClass,(function(n){n.call(AW,e,t,i).style("pointer-events","all")}));n.attr({width:BW.gripWidth,height:BW.gripHeight,rx:BW.gripRadius,ry:BW.gripRadius}).call(lW.stroke,i.bordercolor).call(lW.fill,i.bgcolor).style("stroke-width",i.borderwidth+"px")}function mW(t,e,i){var n=gW.ensureSingle(t,"text",BW.labelClass,(function(t){t.attr({"text-anchor":"middle","data-notex":1})})),r=e.step.label,a=i._gd._fullLayout._meta;return a&&(r=gW.templateString(r,a)),n.call(cW.font,i.font).text(r).call(dW.convertToTspans,i._gd),n}function xW(t,e){var i=gW.ensureSingle(t,"g",BW.labelsClass),n=e._dims,r=i.selectAll("g."+BW.labelGroupClass).data(n.labelSteps);r.enter().append("g").classed(BW.labelGroupClass,!0),r.exit().remove(),r.each((function(t){var i=sW.select(this);i.call(mW,t,e),cW.setTranslate(i,RW(e,t.fraction),BW.tickOffset+e.ticklen+e.font.size*pW+BW.labelOffset+n.currentValueTotalHeight)}))}function vW(t,e,i,n,r){var a=Math.round(n*(i._stepCount-1)),s=i._visibleSteps[a]._index;s!==i.active&&CW(t,e,i,s,!0,r)}function CW(t,e,i,n,r,a){var s=i.active;i.active=n,hW(t.layout,BW.name,i).applyUpdate("active",n);var o=i.steps[i.active];e.call(GW,i,a),e.call(bW,i),t.emit("plotly_sliderchange",{slider:i,step:i.steps[i.active],interaction:r,previousActive:s}),o&&o.method&&r&&(e._nextMethod?(e._nextMethod.step=o,e._nextMethod.doCallback=r,e._nextMethod.doTransition=a):(e._nextMethod={step:o,doCallback:r,doTransition:a},e._nextMethodRaf=window.requestAnimationFrame((function(){var i=e._nextMethod.step;i.method&&(i.execute&&oW.executeAPICommand(t,i.method,i.args),e._nextMethod=null,e._nextMethodRaf=null)}))))}function AW(t,e,i){if(!e._context.staticPlot){var n=i.node(),r=sW.select(e);t.on("mousedown",s),t.on("touchstart",s)}function a(){return i.data()[0]}function s(){var t=a();e.emit("plotly_sliderstart",{slider:t});var s=i.select("."+BW.gripRectClass);sW.event.stopPropagation(),sW.event.preventDefault(),s.call(lW.fill,t.activebgcolor);var o=SW(t,sW.mouse(n)[0]);function l(){var t=a(),r=SW(t,sW.mouse(n)[0]);vW(e,i,t,r,!1)}function c(){var t=a();t._dragging=!1,s.call(lW.fill,t.bgcolor),r.on("mouseup",null),r.on("mousemove",null),r.on("touchend",null),r.on("touchmove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})}vW(e,i,t,o,!0),t._dragging=!0,r.on("mousemove",l),r.on("touchmove",l),r.on("mouseup",c),r.on("touchend",c)}}function LW(t,e){var i=t.selectAll("rect."+BW.tickRectClass).data(e._visibleSteps),n=e._dims;i.enter().append("rect").classed(BW.tickRectClass,!0),i.exit().remove(),i.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),i.each((function(t,i){var r=i%n.labelStride==0,a=sW.select(this);a.attr({height:r?e.ticklen:e.minorticklen}).call(lW.fill,e.tickcolor),cW.setTranslate(a,RW(e,i/(e._stepCount-1))-.5*e.tickwidth,(r?BW.tickOffset:BW.minorTickOffset)+n.currentValueTotalHeight)}))}function GW(t,e,i){for(var n=t.select("rect."+BW.gripRectClass),r=0,a=0;a<e._stepCount;a++)if(e._visibleSteps[a]._index===e.active){r=a;break}var s=RW(e,r/(e._stepCount-1));if(!e._invokingCommand){var o=n;i&&e.transition.duration>0&&(o=o.transition().duration(e.transition.duration).ease(e.transition.easing)),o.attr("transform",uW(s-.5*BW.gripWidth,e._dims.currentValueTotalHeight))}}function RW(t,e){var i=t._dims;return i.inputAreaStart+BW.stepInset+(i.inputAreaLength-2*BW.stepInset)*Math.min(1,Math.max(0,e))}function SW(t,e){var i=t._dims;return Math.min(1,Math.max(0,(e-BW.stepInset-i.inputAreaStart)/(i.inputAreaLength-2*BW.stepInset-2*i.inputAreaStart)))}function wW(t,e,i){var n=i._dims,r=gW.ensureSingle(t,"rect",BW.railTouchRectClass,(function(n){n.call(AW,e,t,i).style("pointer-events","all")}));r.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,BW.tickOffset+i.ticklen+n.labelHeight)}).call(lW.fill,i.bgcolor).attr("opacity",0),cW.setTranslate(r,0,n.currentValueTotalHeight)}function VW(t,e){var i=e._dims,n=i.inputAreaLength-2*BW.railInset,r=gW.ensureSingle(t,"rect",BW.railRectClass);r.attr({width:n,height:BW.railWidth,rx:BW.railRadius,ry:BW.railRadius,"shape-rendering":"crispEdges"}).call(lW.stroke,e.bordercolor).call(lW.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),cW.setTranslate(r,BW.railInset,.5*(i.inputAreaWidth-BW.railWidth)+i.currentValueTotalHeight)}var EW,ZW,NW,DW,XW,HW,WW={moduleType:"component",name:TH.name,layoutAttributes:qH,supplyLayoutDefaults:function(t,e){tW(t,e,{name:iW,handleItemDefaults:rW})},draw:function(t){var e=t._context.staticPlot,i=t._fullLayout,n=function(t,e){for(var i=t[BW.name],n=[],r=0;r<i.length;r++){var a=i[r];a.visible&&(a._gd=e,n.push(a))}return n}(i,t),r=i._infolayer.selectAll("g."+BW.containerClassName).data(n.length>0?[0]:[]);function a(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),oW.autoMargin(t,QW(e))}if(r.enter().append("g").classed(BW.containerClassName,!0).style("cursor",e?null:"ew-resize"),r.exit().each((function(){sW.select(this).selectAll("g."+BW.groupClassName).each(a)})).remove(),0!==n.length){var s=r.selectAll("g."+BW.groupClassName).data(n,IW);s.enter().append("g").classed(BW.groupClassName,!0),s.exit().each(a).remove();for(var o=0;o<n.length;o++){var l=n[o];UW(t,l)}s.each((function(e){var i=sW.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var i=t._stepCount,n=0;n<i;n+=e.labelStride)e.labelSteps.push({fraction:n/(i-1),step:t._visibleSteps[n]})}(e),oW.manageCommandObserver(t,e,e._visibleSteps,(function(e){var n=i.data()[0];n.active!==e.index&&(n._dragging||CW(t,i,n,e.index,!1,!0))})),function(t,e,i){(i.steps[i.active]||{}).visible||(i.active=i._visibleSteps[0]._index);e.call(bW,i).call(VW,i).call(xW,i).call(LW,i).call(wW,t,i).call(yW,t,i);var n=i._dims;cW.setTranslate(e,n.lx+i.pad.l,n.ly+i.pad.t),e.call(GW,i,!1),e.call(bW,i)}(t,sW.select(this),e)}))}}},kW=uu,MW={bgcolor:{valType:"color",dflt:kW.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:kW.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"},TW={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"},YW={},JW={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},_W=Ep,zW=xF,OW=JW,KW=CF.LINE_SPACING,PW=OW.name;function jW(t){var e=t&&t[PW];return e&&e.visible}YW.isVisible=jW,YW.makeData=function(t){for(var e=_W.list({_fullLayout:t},"x",!0),i=t.margin,n=[],r=0;r<e.length;r++){var a=e[r];if(jW(a)){n.push(a);var s=a[PW];s._id=PW+a._id,s._height=(t.height-i.b-i.t)*s.thickness,s._offsetShift=Math.floor(s.borderwidth/2)}}t._rangeSliderData=n},YW.autoMarginOpts=function(t,e){var i=t._fullLayout,n=e[PW],r=e._id.charAt(0),a=0,s=0;"bottom"===e.side&&(a=e._depth,e.title.text!==i._dfltTitle[r]&&(s=1.5*e.title.font.size+10+n._offsetShift,s+=(e.title.text.match(zW.BR_TAG_ALL)||[]).length*e.title.font.size*KW));return{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:n._height+a+Math.max(i.margin.b,s),pad:OW.extraPad+2*n._offsetShift}};var qW=MW,$W=TW,tk=YW,ek={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:_B.extendFlat({},qW,{yaxis:$W})}}},layoutAttributes:MW,handleDefaults:function(){if(ZW)return EW;ZW=1;var t=_B,e=Ap,i=Ep,n=MW,r=TW;return EW=function(a,s,o){var l=a[o],c=s[o];if(l.rangeslider||s._requestRangeslider[c._id]){t.isPlainObject(l.rangeslider)||(l.rangeslider={});var g,u,d=l.rangeslider,h=e.newContainer(c,"rangeslider");if(b("visible")){b("bgcolor",s.plot_bgcolor),b("bordercolor"),b("borderwidth"),b("thickness"),b("autorange",!c.isValidRange(d.range)),b("range");var B=s._subplots;if(B)for(var p=B.cartesian.filter((function(t){return t.substr(0,t.indexOf("y"))===i.name2id(o)})).map((function(t){return t.substr(t.indexOf("y"),t.length)})),F=t.simpleMap(p,i.id2name),f=0;f<F.length;f++){var Q=F[f];g=d[Q]||{},u=e.newContainer(h,Q,"yaxis");var I,U=s[Q];g.range&&U.isValidRange(g.range)&&(I="fixed"),"match"!==y("rangemode",I)&&y("range",U.range.slice())}h._input=d}}function b(e,i){return t.coerce(d,h,n,e,i)}function y(e,i){return t.coerce(g,u,r,e,i)}},EW}(),calcAutorange:function(){if(DW)return NW;DW=1;var t=Ep.list,e=KU().getAutoRange,i=JW;return NW=function(n){for(var r=t(n,"x",!0),a=0;a<r.length;a++){var s=r[a],o=s[i.name];o&&o.visible&&o.autorange&&(o._input.autorange=!0,o._input.range=o.range=e(n,s))}},NW}(),draw:function(){if(HW)return XW;HW=1;var t=Js,e=Nu,i=yF,n=_B,r=n.strTranslate,a=jI,s=Uu,o=gU,l=zZ,c=Ep,g=nm,u=am,d=JW;function h(t){return"number"==typeof t.clientX?t.clientX:t.touches&&t.touches.length>0?t.touches[0].clientX:0}function B(t,e,i,o){var l=n.ensureSingle(t,"rect",d.bgClassName,(function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})})),c=o.borderwidth%2==0?o.borderwidth:o.borderwidth-1,g=-o._offsetShift,u=a.crispRound(e,o.borderwidth);l.attr({width:o._width+c,height:o._height+c,transform:r(g,g),"stroke-width":u}).call(s.stroke,o.bordercolor).call(s.fill,o.bgcolor)}function p(t,e,i,r){var a=e._fullLayout,s=n.ensureSingleById(a._topdefs,"clipPath",r._clipId,(function(t){t.append("rect").attr({x:0,y:0})}));s.select("rect").attr({width:r._width,height:r._height})}function F(e,r,s,o){var g,u=r.calcdata,h=e.selectAll("g."+d.rangePlotClassName).data(s._subplotsWith,n.identity);h.enter().append("g").attr("class",(function(t){return d.rangePlotClassName+" "+t})).call(a.setClipUrl,o._clipId,r),h.order(),h.exit().remove(),h.each((function(e,n){var a=t.select(this),d=0===n,h=c.getFromId(r,e,"y"),B=h._name,p=o[B],F={data:[],layout:{xaxis:{type:s.type,domain:[0,1],range:o.range.slice(),calendar:s.calendar},width:o._width,height:o._height,margin:{t:0,b:0,l:0,r:0}},_context:r._context};s.rangebreaks&&(F.layout.xaxis.rangebreaks=s.rangebreaks),F.layout[B]={type:h.type,domain:[0,1],range:"match"!==p.rangemode?p.range.slice():h.range.slice(),calendar:h.calendar},h.rangebreaks&&(F.layout[B].rangebreaks=h.rangebreaks),i.supplyDefaults(F);var f=F._fullLayout.xaxis,Q=F._fullLayout[B];f.clearCalc(),f.setScale(),Q.clearCalc(),Q.setScale();var I={id:e,plotgroup:a,xaxis:f,yaxis:Q,isRangePlot:!0};d?g=I:(I.mainplot="xy",I.mainplotinfo=g),l.rangePlot(r,I,function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n],a=r[0].trace;a.xaxis+a.yaxis===e&&i.push(r)}return i}(u,e))}))}function f(t,e,i,r,a){var o=n.ensureSingle(t,"rect",d.maskMinClassName,(function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}));o.attr("height",r._height).call(s.fill,d.maskColor);var l=n.ensureSingle(t,"rect",d.maskMaxClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));if(l.attr("height",r._height).call(s.fill,d.maskColor),"match"!==a.rangemode){var c=n.ensureSingle(t,"rect",d.maskMinOppAxisClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));c.attr("width",r._width).call(s.fill,d.maskOppAxisColor);var g=n.ensureSingle(t,"rect",d.maskMaxOppAxisClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}));g.attr("width",r._width).style("border-top",d.maskOppBorder).call(s.fill,d.maskOppAxisColor)}}function Q(t,e,i,r){if(!e._context.staticPlot){var a=n.ensureSingle(t,"rect",d.slideBoxClassName,(function(t){t.attr({y:0,cursor:d.slideBoxCursor,"shape-rendering":"crispEdges"})}));a.attr({height:r._height,fill:d.slideBoxFill})}}function I(t,e,i,r){var a=n.ensureSingle(t,"g",d.grabberMinClassName),o=n.ensureSingle(t,"g",d.grabberMaxClassName),l={x:0,width:d.handleWidth,rx:d.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":d.handleStrokeWidth,"shape-rendering":"crispEdges"},c={y:Math.round(r._height/4),height:Math.round(r._height/2)},g=n.ensureSingle(a,"rect",d.handleMinClassName,(function(t){t.attr(l)}));g.attr(c);var u=n.ensureSingle(o,"rect",d.handleMaxClassName,(function(t){t.attr(l)}));u.attr(c);var h={width:d.grabAreaWidth,x:0,y:0,fill:d.grabAreaFill,cursor:e._context.staticPlot?void 0:d.grabAreaCursor},B=n.ensureSingle(a,"rect",d.grabAreaMinClassName,(function(t){t.attr(h)}));B.attr("height",r._height);var p=n.ensureSingle(o,"rect",d.grabAreaMaxClassName,(function(t){t.attr(h)}));p.attr("height",r._height)}return XW=function(i){for(var a=i._fullLayout,s=a._rangeSliderData,l=0;l<s.length;l++){var U=s[l][d.name];U._clipId=U._id+"-"+a._uid}var b=a._infolayer.selectAll("g."+d.containerClassName).data(s,(function(t){return t._name}));b.exit().each((function(t){var e=t[d.name];a._topdefs.select("#"+e._clipId).remove()})).remove(),0!==s.length&&(b.enter().append("g").classed(d.containerClassName,!0).attr("pointer-events","all"),b.each((function(s){var l=t.select(this),U=s[d.name],b=a[c.id2name(s.anchor)],y=U[c.id2name(s.anchor)];if(U.range){var m,x=n.simpleMap(U.range,s.r2l),v=n.simpleMap(s.range,s.r2l);m=v[0]<v[1]?[Math.min(x[0],v[0]),Math.max(x[1],v[1])]:[Math.max(x[0],v[0]),Math.min(x[1],v[1])],U.range=U._input.range=n.simpleMap(m,s.l2r)}s.cleanRange("rangeslider.range");var C=a._size,A=s.domain;U._width=C.w*(A[1]-A[0]);var L=Math.round(C.l+C.w*A[0]),G=Math.round(C.t+C.h*(1-s._counterDomainMin)+("bottom"===s.side?s._depth:0)+U._offsetShift+d.extraPad);l.attr("transform",r(L,G)),U._rl=n.simpleMap(U.range,s.r2l);var R=U._rl[0],S=U._rl[1],w=S-R;if(U.p2d=function(t){return t/U._width*w+R},U.d2p=function(t){return(t-R)/w*U._width},s.rangebreaks){var V=s.locateBreaks(R,S);if(V.length){var E,Z,N=0;for(E=0;E<V.length;E++)N+=(Z=V[E]).max-Z.min;var D=U._width/(S-R-N),X=[-D*R];for(E=0;E<V.length;E++)Z=V[E],X.push(X[X.length-1]-D*(Z.max-Z.min));for(U.d2p=function(t){for(var e=X[0],i=0;i<V.length;i++){var n=V[i];if(t>=n.max)e=X[i+1];else if(t<n.min)break}return e+D*t},E=0;E<V.length;E++)(Z=V[E]).pmin=U.d2p(Z.min),Z.pmax=U.d2p(Z.max);U.p2d=function(t){for(var e=X[0],i=0;i<V.length;i++){var n=V[i];if(t>=n.pmax)e=X[i+1];else if(t<n.pmin)break}return(t-e)/D}}}if("match"!==y.rangemode){var H=b.r2l(y.range[0]),W=b.r2l(y.range[1])-H;U.d2pOppAxis=function(t){return(t-H)/W*U._height}}l.call(B,i,s,U).call(p,i,s,U).call(F,i,s,U).call(f,i,s,U,y).call(Q,i,s,U).call(I,i,s,U),function(i,r,a,s){if(r._context.staticPlot)return;var o=i.select("rect."+d.slideBoxClassName).node(),l=i.select("rect."+d.grabAreaMinClassName).node(),c=i.select("rect."+d.grabAreaMaxClassName).node();function B(){var d=t.event,B=d.target,p=h(d),F=p-i.node().getBoundingClientRect().left,f=s.d2p(a._rl[0]),Q=s.d2p(a._rl[1]),I=g.coverSlip();function U(i){var g,d,U,b=+h(i)-p;switch(B){case o:if(U="ew-resize",f+b>a._length||Q+b<0)return;g=f+b,d=Q+b;break;case l:if(U="col-resize",f+b>a._length)return;g=f+b,d=Q;break;case c:if(U="col-resize",Q+b<0)return;g=f,d=Q+b;break;default:U="ew-resize",g=F,d=F+b}if(d<g){var y=d;d=g,g=y}s._pixelMin=g,s._pixelMax=d,u(t.select(I),U),function(t,i,r,a){function s(t){return r.l2r(n.constrain(t,a._rl[0],a._rl[1]))}var o=s(a.p2d(a._pixelMin)),l=s(a.p2d(a._pixelMax));window.requestAnimationFrame((function(){e.call("_guiRelayout",i,r._name+".range",[o,l])}))}(0,r,a,s)}function b(){I.removeEventListener("mousemove",U),I.removeEventListener("mouseup",b),this.removeEventListener("touchmove",U),this.removeEventListener("touchend",b),n.removeElement(I)}this.addEventListener("touchmove",U),this.addEventListener("touchend",b),I.addEventListener("mousemove",U),I.addEventListener("mouseup",b)}i.on("mousedown",B),i.on("touchstart",B)}(l,i,s,U),function(t,e,i,a,s,o){var l=d.handleWidth/2;function c(t){return n.constrain(t,0,a._width)}function g(t){return n.constrain(t,0,a._height)}function u(t){return n.constrain(t,-l,a._width+l)}var h=c(a.d2p(i._rl[0])),B=c(a.d2p(i._rl[1]));if(t.select("rect."+d.slideBoxClassName).attr("x",h).attr("width",B-h),t.select("rect."+d.maskMinClassName).attr("width",h),t.select("rect."+d.maskMaxClassName).attr("x",B).attr("width",a._width-B),"match"!==o.rangemode){var p=a._height-g(a.d2pOppAxis(s._rl[1])),F=a._height-g(a.d2pOppAxis(s._rl[0]));t.select("rect."+d.maskMinOppAxisClassName).attr("x",h).attr("height",p).attr("width",B-h),t.select("rect."+d.maskMaxOppAxisClassName).attr("x",h).attr("y",F).attr("height",a._height-F).attr("width",B-h),t.select("rect."+d.slideBoxClassName).attr("y",p).attr("height",F-p)}var f=.5,Q=Math.round(u(h-l))-f,I=Math.round(u(B-l))+f;t.select("g."+d.grabberMinClassName).attr("transform",r(Q,f)),t.select("g."+d.grabberMaxClassName).attr("transform",r(I,f))}(l,0,s,U,b,y),"bottom"===s.side&&o.draw(i,s._id+"title",{propContainer:s,propName:s._name+".title",placeholder:a._dfltTitle.x,attributes:{x:s._offset+s._length/2,y:G+U._height+U._offsetShift+10+1.5*s.title.font.size,"text-anchor":"middle"}})})))},XW}(),isVisible:tk.isVisible,makeData:tk.makeData,autoMarginOpts:tk.autoMarginOpts},ik=_g(),nk=uu,rk=(0,Ap.templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),ak={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:rk,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:ik({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:nk.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:nk.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"},sk={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10},ok=_B,lk=Uu,ck=Ap,gk=tQ,uk=ak,dk=sk;function hk(t,e,i,n){var r=n.calendar;function a(i,n){return ok.coerce(t,e,uk.buttons,i,n)}if(a("visible")){var s=a("step");"all"!==s&&(!r||"gregorian"===r||"month"!==s&&"year"!==s?a("stepmode"):e.stepmode="backward",a("count")),a("label")}}var Bk=Xs(el),pk=_B.titleCase;var Fk=Js,fk=Nu,Qk=yF,Ik=Uu,Uk=jI,bk=_B,yk=bk.strTranslate,mk=xF,xk=Ep,vk=CF.LINE_SPACING,Ck=CF.FROM_TL,Ak=CF.FROM_BR,Lk=sk,Gk=function(t,e){var i=t._name,n={};if("all"===e.step)n[i+".autorange"]=!0;else{var r=function(t,e){var i,n=t.range,r=new Date(t.r2l(n[1])),a=e.step,s=Bk["utc"+pk(a)],o=e.count;switch(e.stepmode){case"backward":i=t.l2r(+s.offset(r,-o));break;case"todate":var l=s.offset(r,-o);i=t.l2r(+s.ceil(l))}var c=n[1];return[i,c]}(t,e);n[i+".range[0]"]=r[0],n[i+".range[1]"]=r[1]}return n};function Rk(t){return t._id}function Sk(t,e,i){var n=bk.ensureSingle(t,"rect","selector-rect",(function(t){t.attr("shape-rendering","crispEdges")}));n.attr({rx:Lk.rx,ry:Lk.ry}),n.call(Ik.stroke,e.bordercolor).call(Ik.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,i)).style("stroke-width",e.borderwidth+"px")}function wk(t,e,i,n){var r=bk.ensureSingle(t,"text","selector-text",(function(t){t.attr("text-anchor","middle")}));r.call(Uk.font,e.font).text(function(t,e){if(t.label)return e?bk.templateString(t.label,e):t.label;return"all"===t.step?"all":t.count+t.step.charAt(0)}(i,n._fullLayout._meta)).call((function(t){mk.convertToTspans(t,n)}))}var Vk={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:ak}}},layoutAttributes:ak,handleDefaults:function(t,e,i,n,r){var a=t.rangeselector||{},s=ck.newContainer(e,"rangeselector");function o(t,e){return ok.coerce(a,s,uk,t,e)}if(o("visible",gk(a,s,{name:"buttons",handleItemDefaults:hk,calendar:r}).length>0)){var l=function(t,e,i){for(var n=i.filter((function(i){return e[i].anchor===t._id})),r=0,a=0;a<n.length;a++){var s=e[n[a]].domain;s&&(r=Math.max(s[1],r))}return[t.domain[0],r+dk.yPad]}(e,i,n);o("x",l[0]),o("y",l[1]),ok.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),ok.coerceFont(o,"font",i.font);var c=o("bgcolor");o("activecolor",lk.contrast(c,dk.lightAmount,dk.darkAmount)),o("bordercolor"),o("borderwidth")}},draw:function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=xk.list(t,"x",!0),i=[],n=0;n<e.length;n++){var r=e[n];r.rangeselector&&r.rangeselector.visible&&i.push(r)}return i}(t),Rk);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each((function(e){var i=Fk.select(this),n=e,r=n.rangeselector,a=i.selectAll("g.button").data(bk.filterVisible(r.buttons));a.enter().append("g").classed("button",!0),a.exit().remove(),a.each((function(e){var i=Fk.select(this),a=Gk(n,e);e._isActive=function(t,e,i){if("all"===e.step)return!0===t.autorange;var n=Object.keys(i);return t.range[0]===i[n[0]]&&t.range[1]===i[n[1]]}(n,e,a),i.call(Sk,r,e),i.call(wk,r,e,t),i.on("click",(function(){t._dragged||fk.call("_guiRelayout",t,a)})),i.on("mouseover",(function(){e._isHovered=!0,i.call(Sk,r,e)})),i.on("mouseout",(function(){e._isHovered=!1,i.call(Sk,r,e)}))})),function(t,e,i,n,r){var a=0,s=0,o=i.borderwidth;e.each((function(){var t=Fk.select(this).select(".selector-text"),e=i.font.size*vk,n=Math.max(e*mk.lineCount(t),16)+3;s=Math.max(s,n)})),e.each((function(){var t=Fk.select(this),e=t.select(".selector-rect"),n=t.select(".selector-text"),r=n.node()&&Uk.bBox(n.node()).width,l=i.font.size*vk,c=mk.lineCount(n),g=Math.max(r+10,Lk.minButtonWidth);t.attr("transform",yk(o+a,o)),e.attr({x:0,y:0,width:g,height:s}),mk.positionText(n,g/2,s/2-(c-1)*l/2+3),a+=g+5}));var l=t._fullLayout._size,c=l.l+l.w*i.x,g=l.t+l.h*(1-i.y),u="left";bk.isRightAnchor(i)&&(c-=a,u="right");bk.isCenterAnchor(i)&&(c-=a/2,u="center");var d="top";bk.isBottomAnchor(i)&&(g-=s,d="bottom");bk.isMiddleAnchor(i)&&(g-=s/2,d="middle");a=Math.ceil(a),s=Math.ceil(s),c=Math.round(c),g=Math.round(g),Qk.autoMargin(t,n+"-range-selector",{x:i.x,y:i.y,l:a*Ck[u],r:a*Ak[u],b:s*Ak[d],t:s*Ck[d]}),r.attr("transform",yk(c,g))}(t,a,r,n._name,i)}))}},Ek={},Zk=Mg.extendFlat;Ek.attributes=function(t,e){e=e||{};var i={valType:"info_array",editType:(t=t||{}).editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},n=t.name?t.name+" ":"",r=t.trace?"trace ":"subplot ",a=e.description?" "+e.description:"",s={x:Zk({},i,{description:["Sets the horizontal domain of this ",n,r,"(in plot fraction).",a].join("")}),y:Zk({},i,{description:["Sets the vertical domain of this ",n,r,"(in plot fraction).",a].join("")}),editType:t.editType};return t.noGridCell||(s.row={valType:"integer",min:0,dflt:0,editType:t.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",n,r,".",a].join("")},s.column={valType:"integer",min:0,dflt:0,editType:t.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",n,r,".",a].join("")}),s},Ek.defaults=function(t,e,i,n){var r=n&&n.x||[0,1],a=n&&n.y||[0,1],s=e.grid;if(s){var o=i("domain.column");void 0!==o&&(o<s.columns?r=s._domains.x[o]:delete t.domain.column);var l=i("domain.row");void 0!==l&&(l<s.rows?a=s._domains.y[l]:delete t.domain.row)}var c=i("domain.x",r),g=i("domain.y",a);c[0]<c[1]||(t.domain.x=r.slice()),g[0]<g[1]||(t.domain.y=a.slice())};var Nk=_B,Dk=yu.counter,Xk=Ek.attributes,Hk=Np.idRegex,Wk=Ap,kk={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[Dk("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Hk.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Hk.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:Xk({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function Mk(t,e,i){var n=e[i+"axes"],r=Object.keys((t._splomAxes||{})[i]||{});return Array.isArray(n)?n:r.length?r:void 0}function Tk(t,e,i,n,r,a){var s=e(t+"gap",i),o=e("domain."+t);e(t+"side",n);for(var l=new Array(r),c=o[0],g=(o[1]-c)/(r-s),u=g*(1-s),d=0;d<r;d++){var h=c+g*d;l[a?r-1-d:d]=[h,h+u]}return l}function Yk(t,e,i,n,r){var a,s=new Array(i);function o(t,i){-1!==e.indexOf(i)&&void 0===n[i]?(s[t]=i,n[i]=t):s[t]=""}if(Array.isArray(t))for(a=0;a<i;a++)o(a,t[a]);else for(o(0,r),a=1;a<i;a++)o(a,r+(a+1));return s}var Jk,_k,zk,Ok,Kk,Pk,jk,qk,$k,tM,eM={moduleType:"component",name:"grid",schema:{layout:{grid:kk}},layoutAttributes:kk,sizeDefaults:function(t,e){var i=t.grid||{},n=Mk(e,i,"x"),r=Mk(e,i,"y");if(t.grid||n||r){var a,s,o=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),l=Array.isArray(n),c=Array.isArray(r),g=l&&n!==i.xaxes&&c&&r!==i.yaxes;o?(a=i.subplots.length,s=i.subplots[0].length):(c&&(a=r.length),l&&(s=n.length));var u=Wk.newContainer(e,"grid"),d=I("rows",a),h=I("columns",s);if(d*h>1){if(!o&&!l&&!c)"independent"===I("pattern")&&(o=!0);u._hasSubplotGrid=o;var B,p,F="top to bottom"===I("roworder"),f=o?.2:.1,Q=o?.3:.1;g&&e._splomGridDflt&&(B=e._splomGridDflt.xside,p=e._splomGridDflt.yside),u._domains={x:Tk("x",I,f,B,h),y:Tk("y",I,Q,p,d,F)}}else delete e.grid}function I(t,e){return Nk.coerce(i,u,kk,t,e)}},contentDefaults:function(t,e){var i=e.grid;if(i&&i._domains){var n,r,a,s,o,l,c,g=t.grid||{},u=e._subplots,d=i._hasSubplotGrid,h=i.rows,B=i.columns,p="independent"===i.pattern,F=i._axisMap={};if(d){var f=g.subplots||[];l=i.subplots=new Array(h);var Q=1;for(n=0;n<h;n++){var I=l[n]=new Array(B),U=f[n]||[];for(r=0;r<B;r++)if(p?(o=1===Q?"xy":"x"+Q+"y"+Q,Q++):o=U[r],I[r]="",-1!==u.cartesian.indexOf(o)){if(c=o.indexOf("y"),a=o.slice(0,c),s=o.slice(c),void 0!==F[a]&&F[a]!==r||void 0!==F[s]&&F[s]!==n)continue;I[r]=o,F[a]=r,F[s]=n}}}else{var b=Mk(e,g,"x"),y=Mk(e,g,"y");i.xaxes=Yk(b,u.xaxis,B,F,"x"),i.yaxes=Yk(y,u.yaxis,h,F,"y")}var m=i._anchors={},x="top to bottom"===i.roworder;for(var v in F){var C,A,L,G=v.charAt(0),R=i[G+"side"];if(R.length<8)m[v]="free";else if("x"===G){if("t"===R.charAt(0)===x?(C=0,A=1,L=h):(C=h-1,A=-1,L=-1),d){var S=F[v];for(n=C;n!==L;n+=A)if((o=l[n][S])&&(c=o.indexOf("y"),o.slice(0,c)===v)){m[v]=o.slice(c);break}}else for(n=C;n!==L;n+=A)if(s=i.yaxes[n],-1!==u.cartesian.indexOf(v+s)){m[v]=s;break}}else if("l"===R.charAt(0)?(C=0,A=1,L=B):(C=B-1,A=-1,L=-1),d){var w=F[v];for(n=C;n!==L;n+=A)if((o=l[w][n])&&(c=o.indexOf("y"),o.slice(c)===v)){m[v]=o.slice(0,c);break}}else for(n=C;n!==L;n+=A)if(a=i.xaxes[n],-1!==u.cartesian.indexOf(a+v)){m[v]=a;break}}}}},iM={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stroke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc"};function nM(){if(Ok)return zk;function t(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}return Ok=1,zk=function(e){var i=e.type,n=e.symmetric;if("data"===i){var r=e.array||[];if(n)return function(t,e){var i=+r[e];return[i,i]};var a=e.arrayminus||[];return function(t,e){var i=+r[e],n=+a[e];return isNaN(i)&&isNaN(n)?[NaN,NaN]:[n||0,i||0]}}var s=t(i,e.value),o=t(i,e.valueminus);return n||void 0===e.valueminus?function(t){var e=s(t);return[e,e]}:function(t){return[o(t),s(t)]}},zk}var rM=_B,aM=wd.overrideAll,sM=iM,oM={error_x:rM.extendFlat({},sM),error_y:rM.extendFlat({},sM)};delete oM.error_x.copy_zstyle,delete oM.error_y.copy_zstyle,delete oM.error_y.copy_ystyle;var lM={error_x:rM.extendFlat({},sM),error_y:rM.extendFlat({},sM),error_z:rM.extendFlat({},sM)};delete lM.error_x.copy_ystyle,delete lM.error_y.copy_ystyle,delete lM.error_z.copy_ystyle,delete lM.error_z.copy_zstyle;var cM={moduleType:"component",name:"errorbars",schema:{traces:{scatter:oM,bar:oM,histogram:oM,scatter3d:aM(lM,"calc","nested"),scattergl:aM(oM,"calc","nested")}},supplyDefaults:function(){if(_k)return Jk;_k=1;var t=$c,e=Nu,i=_B,n=Ap,r=iM;return Jk=function(a,s,o,l){var c="error_"+l.axis,g=n.newContainer(s,c),u=a[c]||{};function d(t,e){return i.coerce(u,g,r,t,e)}if(!1!==d("visible",void 0!==u.array||void 0!==u.value||"sqrt"===u.type)){var h=d("type","array"in u?"data":"percent"),B=!0;"sqrt"!==h&&(B=d("symmetric",!(("data"===h?"arrayminus":"valueminus")in u))),"data"===h?(d("array"),d("traceref"),B||(d("arrayminus"),d("tracerefminus"))):"percent"!==h&&"constant"!==h||(d("value"),B||d("valueminus"));var p="copy_"+l.inherit+"style";if(l.inherit)(s["error_"+l.inherit]||{}).visible&&d(p,!(u.color||t(u.thickness)||t(u.width)));l.inherit&&g[p]||(d("color",o),d("thickness"),d("width",e.traceIs(s,"gl3d")?0:4))}},Jk}(),calc:function(){if(Pk)return Kk;Pk=1;var t=$c,e=Nu,i=Vy,n=_B,r=nM();function a(e,a,s,o){var l=a["error_"+o]||{},c=[];if(l.visible&&-1!==["linear","log"].indexOf(s.type)){for(var g=r(l),u=0;u<e.length;u++){var d=e[u],h=d.i;if(void 0===h)h=u;else if(null===h)continue;var B=d[o];if(t(s.c2l(B))){var p=g(B,h);if(t(p[0])&&t(p[1])){var F=d[o+"s"]=B-p[0],f=d[o+"h"]=B+p[1];c.push(F,f)}}}var Q=s._id,I=a._extremes[Q],U=i.findExtremes(s,c,n.extendFlat({tozero:I.opts.tozero},{padded:!0}));I.min=I.min.concat(U.min),I.max=I.max.concat(U.max)}}return Kk=function(t){for(var n=t.calcdata,r=0;r<n.length;r++){var s=n[r],o=s[0].trace;if(!0===o.visible&&e.traceIs(o,"errorBarsOK")){var l=i.getFromId(t,o.xaxis),c=i.getFromId(t,o.yaxis);a(s,o,l,"x"),a(s,o,c,"y")}}},Kk}(),makeComputeError:nM(),plot:function(){if(qk)return jk;qk=1;var t=Js,e=$c,i=jI,n=WQ;return jk=function(r,a,s,o){var l=s.xaxis,c=s.yaxis,g=o&&o.duration>0,u=r._context.staticPlot;a.each((function(a){var d,h=a[0].trace,B=h.error_x||{},p=h.error_y||{};h.ids&&(d=function(t){return t.id});var F=n.hasMarkers(h)&&h.marker.maxdisplayed>0;p.visible||B.visible||(a=[]);var f=t.select(this).selectAll("g.errorbar").data(a,d);if(f.exit().remove(),a.length){B.visible||f.selectAll("path.xerror").remove(),p.visible||f.selectAll("path.yerror").remove(),f.style("opacity",1);var Q=f.enter().append("g").classed("errorbar",!0);g&&Q.style("opacity",0).transition().duration(o.duration).style("opacity",1),i.setClipUrl(f,s.layerClipId,r),f.each((function(i){var n=t.select(this),r=function(t,i,n){var r={x:i.c2p(t.x),y:n.c2p(t.y)};void 0!==t.yh&&(r.yh=n.c2p(t.yh),r.ys=n.c2p(t.ys),e(r.ys)||(r.noYS=!0,r.ys=n.c2p(t.ys,!0)));void 0!==t.xh&&(r.xh=i.c2p(t.xh),r.xs=i.c2p(t.xs),e(r.xs)||(r.noXS=!0,r.xs=i.c2p(t.xs,!0)));return r}(i,l,c);if(!F||i.vis){var a,s=n.select("path.yerror");if(p.visible&&e(r.x)&&e(r.yh)&&e(r.ys)){var d=p.width;a="M"+(r.x-d)+","+r.yh+"h"+2*d+"m-"+d+",0V"+r.ys,r.noYS||(a+="m-"+d+",0h"+2*d),!s.size()?s=n.append("path").style("vector-effect",u?"none":"non-scaling-stroke").classed("yerror",!0):g&&(s=s.transition().duration(o.duration).ease(o.easing)),s.attr("d",a)}else s.remove();var h=n.select("path.xerror");if(B.visible&&e(r.y)&&e(r.xh)&&e(r.xs)){var f=(B.copy_ystyle?p:B).width;a="M"+r.xh+","+(r.y-f)+"v"+2*f+"m0,-"+f+"H"+r.xs,r.noXS||(a+="m0,-"+f+"v"+2*f),!h.size()?h=n.append("path").style("vector-effect",u?"none":"non-scaling-stroke").classed("xerror",!0):g&&(h=h.transition().duration(o.duration).ease(o.easing)),h.attr("d",a)}else h.remove()}}))}}))},jk}(),style:function(){if(tM)return $k;tM=1;var t=Js,e=Uu;return $k=function(i){i.each((function(i){var n=i[0].trace,r=n.error_y||{},a=n.error_x||{},s=t.select(this);s.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(e.stroke,r.color),a.copy_ystyle&&(a=r),s.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(e.stroke,a.color)}))},$k}(),hoverInfo:function(t,e,i){(e.error_y||{}).visible&&(i.yerr=t.yh-t.y,e.error_y.symmetric||(i.yerrneg=t.y-t.ys));(e.error_x||{}).visible&&(i.xerr=t.xh-t.x,e.error_x.symmetric||(i.xerrneg=t.x-t.xs))}};var gM=Js,uM=kg,dM=yF,hM=Nu,BM=Vy,pM=nm,FM=_B,fM=FM.strTranslate,QM=Mg.extendFlat,IM=am,UM=jI,bM=Uu,yM=gU,mM=xF,xM=kF.flipScale,vM=pN,CM=vN,AM=If,LM=CF.LINE_SPACING,GM=CF.FROM_TL,RM=CF.FROM_BR,SM={colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"};var wM={draw:function(t){var e=t._fullLayout._infolayer.selectAll("g."+SM.colorbar).data(function(t){var e,i,n,r,a=t._fullLayout,s=t.calcdata,o=[];function l(t){return QM(t,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof r.calc?r.calc(t,n,e):(e._fillgradient=i.reversescale?xM(i.colorscale):i.colorscale,e._zrange=[i[r.min],i[r.max]])}for(var g=0;g<s.length;g++){var u=s[g];if((n=u[0].trace)._module){var d=n._module.colorbar;if(!0===n.visible&&d)for(var h=Array.isArray(d),B=h?d:[d],p=0;p<B.length;p++){var F=(r=B[p]).container;(i=F?n[F]:n)&&i.showscale&&((e=l(i.colorbar))._id="cb"+n.uid+(h&&F?"-"+F:""),e._traceIndex=n.index,e._propPrefix=(F?F+".":"")+"colorbar.",e._meta=n._meta,c(),o.push(e))}}}for(var f in a._colorAxes)if((i=a[f]).showscale){var Q=a._colorAxes[f];(e=l(i.colorbar))._id="cb"+f,e._propPrefix=f+".colorbar.",e._meta=a._meta,r={min:"cmin",max:"cmax"},"heatmap"!==Q[0]&&(n=Q[1],r.calc=n._module.colorbar.calc),c(),o.push(e)}return o}(t),(function(t){return t._id}));e.enter().append("g").attr("class",(function(t){return t._id})).classed(SM.colorbar,!0),e.each((function(e){var i=gM.select(this);FM.ensureSingle(i,"rect",SM.cbbg),FM.ensureSingle(i,"g",SM.cbfills),FM.ensureSingle(i,"g",SM.cblines),FM.ensureSingle(i,"g",SM.cbaxis,(function(t){t.classed(SM.crisp,!0)})),FM.ensureSingle(i,"g",SM.cbtitleunshift,(function(t){t.append("g").classed(SM.cbtitle,!0)})),FM.ensureSingle(i,"rect",SM.cboutline);var n=function(t,e,i){var n="v"===e.orientation,r=e.len,a=e.lenmode,s=e.thickness,o=e.thicknessmode,l=e.outlinewidth,c=e.borderwidth,g=e.bgcolor,u=e.xanchor,d=e.yanchor,h=e.xpad,B=e.ypad,p=e.x,F=n?e.y:1-e.y,f="paper"===e.yref,Q="paper"===e.xref,I=i._fullLayout,U=I._size,b=e._fillcolor,y=e._line,m=e.title,x=m.side,v=e._zrange||gM.extent(("function"==typeof b?b:y.color).domain()),C="function"==typeof y.color?y.color:function(){return y.color},A="function"==typeof b?b:function(){return b},L=e._levels,G=function(t,e,i){var n,r,a=e._levels,s=[],o=[],l=a.end+a.size/100,c=a.size,g=1.001*i[0]-.001*i[1],u=1.001*i[1]-.001*i[0];for(r=0;r<1e5&&(n=a.start+r*c,!(c>0?n>=l:n<=l));r++)n>g&&n<u&&s.push(n);if(e._fillgradient)o=[0];else if("function"==typeof e._fillcolor){var d=e._filllevels;if(d)for(l=d.end+d.size/100,c=d.size,r=0;r<1e5&&(n=d.start+r*c,!(c>0?n>=l:n<=l));r++)n>i[0]&&n<i[1]&&o.push(n);else o=s.map((function(t){return t-a.size/2})),o.push(o[o.length-1]+a.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(o=[0]);a.size<0&&(s.reverse(),o.reverse());return{line:s,fill:o}}(0,e,v),R=G.fill,S=G.line,w=Math.round(s*("fraction"===o?n?U.w:U.h:1)),V=w/(n?U.w:U.h),E=Math.round(r*("fraction"===a?n?U.h:U.w:1)),Z=E/(n?U.h:U.w),N=Q?U.w:i._fullLayout.width,D=f?U.h:i._fullLayout.height,X=Math.round(n?p*N+h:F*D+B),H={center:.5,right:1}[u]||0,W={top:1,middle:.5}[d]||0,k=n?p-H*V:F-W*V,M=n?F-W*Z:p-H*Z,T=Math.round(n?D*(1-M):N*M);e._lenFrac=Z,e._thickFrac=V,e._uFrac=k,e._vFrac=M;var Y=e._axis=function(t,e,i){var n=t._fullLayout,r="v"===e.orientation,a={type:"linear",range:i,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,labelalias:e.labelalias,ticklabelposition:e.ticklabelposition,ticklabeloverflow:e.ticklabeloverflow,ticklabelstep:e.ticklabelstep,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,exponentformat:e.exponentformat,minexponent:e.minexponent,separatethousands:e.separatethousands,showexponent:e.showexponent,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,title:e.title,showline:!0,anchor:"free",side:r?"right":"bottom",position:1},s=r?"y":"x",o={type:"linear",_id:s+e._id},l={letter:s,font:n.font,noAutotickangles:"y"===s,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:n.calendar};function c(t,e){return FM.coerce(a,o,AM,t,e)}return vM(a,o,c,l,n),CM(a,o,c,l),o}(i,e,v);Y.position=V+(n?p+h/U.w:F+B/U.h);var J=-1!==["top","bottom"].indexOf(x);n&&J&&(Y.title.side=x,Y.titlex=p+h/U.w,Y.titley=M+("top"===m.side?Z-B/U.h:B/U.h));n||J||(Y.title.side=x,Y.titley=F+B/U.h,Y.titlex=M+h/U.w);if(y.color&&"auto"===e.tickmode){Y.tickmode="linear",Y.tick0=L.start;var _=L.size,z=FM.constrain(E/50,4,15)+1,O=(v[1]-v[0])/((e.nticks||z)*_);if(O>1){var K=Math.pow(10,Math.floor(Math.log(O)/Math.LN10));_*=K*FM.roundUp(O/K,[2,5,10]),(Math.abs(L.start)/L.size+1e-6)%1<2e-6&&(Y.tick0=0)}Y.dtick=_}Y.domain=n?[M+B/U.h,M+Z-B/U.h]:[M+h/U.w,M+Z-h/U.w],Y.setScale(),t.attr("transform",fM(Math.round(U.l),Math.round(U.t)));var P,j=t.select("."+SM.cbtitleunshift).attr("transform",fM(-Math.round(U.l),-Math.round(U.t))),q=Y.ticklabelposition,$=Y.title.font.size,tt=t.select("."+SM.cbaxis),et=0,it=0;function nt(n,r){var a={propContainer:Y,propName:e._propPrefix+"title",traceIndex:e._traceIndex,_meta:e._meta,placeholder:I._dfltTitle.colorbar,containerGroup:t.select("."+SM.cbtitle)},s="h"===n.charAt(0)?n.substr(1):"h"+n;t.selectAll("."+s+",."+s+"-math-group").remove(),yM.draw(i,n,QM(a,r||{}))}function rt(){var t,e;(n&&J||!n&&!J)&&("top"===x&&(t=h+U.l+N*p,e=B+U.t+D*(1-M-Z)+3+.75*$),"bottom"===x&&(t=h+U.l+N*p,e=B+U.t+D*(1-M)-3-.25*$),"right"===x&&(e=B+U.t+D*F+3+.75*$,t=h+U.l+N*M),nt(Y._id+"title",{attributes:{x:t,y:e,"text-anchor":n?"start":"middle"}}))}function at(){if(n&&!J||!n&&J){var t,r,a=Y.position||0,s=Y._offset+Y._length/2;if("right"===x)r=s,t=U.l+N*a+10+$*(Y.showticklabels?1:.5);else if(t=s,"bottom"===x&&(r=U.t+D*a+10+(-1===q.indexOf("inside")?Y.tickfont.size:0)+("intside"!==Y.ticks&&e.ticklen||0)),"top"===x){var o=m.text.split("<br>").length;r=U.t+D*a+10-w-LM*$*o}nt((n?"h":"v")+Y._id+"title",{avoid:{selection:gM.select(i).selectAll("g."+Y._id+"tick"),side:x,offsetTop:n?0:U.t,offsetLeft:n?U.l:0,maxShift:n?I.width:I.height},attributes:{x:t,y:r,"text-anchor":"middle"},transform:{rotate:n?-90:0,offset:0}})}}function st(){if(!n&&!J||n&&J){var r,a=t.select("."+SM.cbtitle),s=a.select("text"),o=[-l/2,l/2],c=a.select(".h"+Y._id+"title-math-group").node(),g=15.6;if(s.node()&&(g=parseInt(s.node().style.fontSize,10)*LM),c?(r=UM.bBox(c),it=r.width,(et=r.height)>g&&(o[1]-=(et-g)/2)):s.node()&&!s.classed(SM.jsPlaceholder)&&(r=UM.bBox(s.node()),it=r.width,et=r.height),n){if(et){if(et+=5,"top"===x)Y.domain[1]-=et/U.h,o[1]*=-1;else{Y.domain[0]+=et/U.h;var u=mM.lineCount(s);o[1]+=(1-u)*g}a.attr("transform",fM(o[0],o[1])),Y.setScale()}}else it&&("right"===x&&(Y.domain[0]+=(it+$/2)/U.w),a.attr("transform",fM(o[0],o[1])),Y.setScale())}t.selectAll("."+SM.cbfills+",."+SM.cblines).attr("transform",n?fM(0,Math.round(U.h*(1-Y.domain[1]))):fM(Math.round(U.w*Y.domain[0]),0)),tt.attr("transform",n?fM(0,Math.round(-U.t)):fM(Math.round(-U.l),0));var d=t.select("."+SM.cbfills).selectAll("rect."+SM.cbfill).attr("style","").data(R);d.enter().append("rect").classed(SM.cbfill,!0).attr("style",""),d.exit().remove();var h=v.map(Y.c2p).map(Math.round).sort((function(t,e){return t-e}));d.each((function(t,r){var a=[0===r?v[0]:(R[r]+R[r-1])/2,r===R.length-1?v[1]:(R[r]+R[r+1])/2].map(Y.c2p).map(Math.round);n&&(a[1]=FM.constrain(a[1]+(a[1]>a[0])?1:-1,h[0],h[1]));var s=gM.select(this).attr(n?"x":"y",X).attr(n?"y":"x",gM.min(a)).attr(n?"width":"height",Math.max(w,2)).attr(n?"height":"width",Math.max(gM.max(a)-gM.min(a),2));if(e._fillgradient)UM.gradient(s,i,e._id,n?"vertical":"horizontalreversed",e._fillgradient,"fill");else{var o=A(t).replace("e-","");s.attr("fill",uM(o).toHexString())}}));var B=t.select("."+SM.cblines).selectAll("path."+SM.cbline).data(y.color&&y.width?S:[]);B.enter().append("path").classed(SM.cbline,!0),B.exit().remove(),B.each((function(t){var e=X,i=Math.round(Y.c2p(t))+y.width/2%1;gM.select(this).attr("d","M"+(n?e+","+i:i+","+e)+(n?"h":"v")+w).call(UM.lineGroupStyle,y.width,C(t),y.dash)})),tt.selectAll("g."+Y._id+"tick,path").remove();var p=X+w+(l||0)/2-("outside"===e.ticks?1:0),F=BM.calcTicks(Y),f=BM.getTickSigns(Y)[2];return BM.drawTicks(i,Y,{vals:"inside"===Y.ticks?BM.clipEnds(Y,F):F,layer:tt,path:BM.makeTickPath(Y,p,f),transFn:BM.makeTransTickFn(Y)}),BM.drawLabels(i,Y,{vals:F,layer:tt,transFn:BM.makeTransTickLabelFn(Y),labelFns:BM.makeLabelFns(Y,p)})}function ot(){var b,y=w+l/2;-1===q.indexOf("inside")&&(b=UM.bBox(tt.node()),y+=n?b.width:b.height),P=j.select("text");var v=0,C=n&&"top"===x,A=!n&&"right"===x,L=0;if(P.node()&&!P.classed(SM.jsPlaceholder)){var G,R=j.select(".h"+Y._id+"title-math-group").node();R&&(n&&J||!n&&!J)?(v=(b=UM.bBox(R)).width,G=b.height):(v=(b=UM.bBox(j.node())).right-U.l-(n?X:T),G=b.bottom-U.t-(n?T:X),n||"top"!==x||(y+=b.height,L=b.height)),A&&(P.attr("transform",fM(v/2+$/2,0)),v*=2),y=Math.max(y,n?v:G)}var S=2*(n?h:B)+y+c+l/2,V=0;!n&&m.text&&"bottom"===d&&F<=0&&(S+=V=S/2,L+=V),I._hColorbarMoveTitle=V,I._hColorbarMoveCBTitle=L;var Z=c+l,N=(n?X:T)-Z/2-(n?h:0),D=(n?T:X)-(n?E:B+L-V);t.select("."+SM.cbbg).attr("x",N).attr("y",D).attr(n?"width":"height",Math.max(S-V,2)).attr(n?"height":"width",Math.max(E+Z,2)).call(bM.fill,g).call(bM.stroke,e.bordercolor).style("stroke-width",c);var k=A?Math.max(v-10,0):0;t.selectAll("."+SM.cboutline).attr("x",(n?X:T+h)+k).attr("y",(n?T+B-E:X)+(C?et:0)).attr(n?"width":"height",Math.max(w,2)).attr(n?"height":"width",Math.max(E-(n?2*B+et:2*h+k),2)).call(bM.stroke,e.outlinecolor).style({fill:"none","stroke-width":l});var M=n?H*S:0,_=n?0:(1-W)*S-L;if(M=Q?U.l-M:-M,_=f?U.t-_:-_,t.attr("transform",fM(M,_)),!n&&(c||uM(g).getAlpha()&&!uM.equals(I.paper_bgcolor,g))){var z=tt.selectAll("text"),O=z[0].length,K=t.select("."+SM.cbbg).node(),it=UM.bBox(K),nt=UM.getTranslate(t),rt=2;z.each((function(t,e){var i=0,n=O-1;if(e===i||e===n){var r,a=UM.bBox(this),s=UM.getTranslate(this);if(e===n){var o=a.right+s.x;(r=it.right+nt.x+T-c-rt+p-o)>0&&(r=0)}else if(e===i){var l=a.left+s.x;(r=it.left+nt.x+T+c+rt-l)<0&&(r=0)}r&&(O<3?this.setAttribute("transform","translate("+r+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}}))}var at={},st=GM[u],ot=RM[u],lt=GM[d],ct=RM[d],gt=S-w;n?("pixels"===a?(at.y=F,at.t=E*lt,at.b=E*ct):(at.t=at.b=0,at.yt=F+r*lt,at.yb=F-r*ct),"pixels"===o?(at.x=p,at.l=S*st,at.r=S*ot):(at.l=gt*st,at.r=gt*ot,at.xl=p-s*st,at.xr=p+s*ot)):("pixels"===a?(at.x=p,at.l=E*st,at.r=E*ot):(at.l=at.r=0,at.xl=p+r*st,at.xr=p-r*ot),"pixels"===o?(at.y=1-F,at.t=S*lt,at.b=S*ct):(at.t=gt*lt,at.b=gt*ct,at.yt=F-s*lt,at.yb=F+s*ct));var ut=e.y<.5?"b":"t",dt=e.x<.5?"l":"r";i._fullLayout._reservedMargin[e._id]={};var ht={r:I.width-N-M,l:N+at.r,b:I.height-D-_,t:D+at.b};Q&&f?dM.autoMargin(i,e._id,at):Q?i._fullLayout._reservedMargin[e._id][ut]=ht[ut]:f||n?i._fullLayout._reservedMargin[e._id][dt]=ht[dt]:i._fullLayout._reservedMargin[e._id][ut]=ht[ut]}return FM.syncOrAsync([dM.previousPromises,rt,st,at,dM.previousPromises,ot],i)}(i,e,t);n&&n.then&&(t._promises||[]).push(n),t._context.edits.colorbarPosition&&function(t,e,i){var n,r,a,s="v"===e.orientation,o=i._fullLayout,l=o._size;pM.init({element:t.node(),gd:i,prepFn:function(){n=t.attr("transform"),IM(t)},moveFn:function(i,o){t.attr("transform",n+fM(i,o)),r=pM.align((s?e._uFrac:e._vFrac)+i/l.w,s?e._thickFrac:e._lenFrac,0,1,e.xanchor),a=pM.align((s?e._vFrac:1-e._uFrac)-o/l.h,s?e._lenFrac:e._thickFrac,0,1,e.yanchor);var c=pM.getCursor(r,a,e.xanchor,e.yanchor);IM(t,c)},doneFn:function(){if(IM(t),void 0!==r&&void 0!==a){var n={};n[e._propPrefix+"x"]=r,n[e._propPrefix+"y"]=a,void 0!==e._traceIndex?hM.call("_guiRestyle",i,n,e._traceIndex):hM.call("_guiRelayout",i,n)}}})}(i,e,t)})),e.exit().each((function(e){dM.autoMargin(t,e._id)})).remove(),e.order()}},VM={moduleType:"component",name:"colorbar",attributes:mf,supplyDefaults:fQ,draw:wM.draw,hasColorbar:Nf},EM={moduleType:"component",name:"legend",layoutAttributes:gm,supplyLayoutDefaults:Um,draw:Bx,style:Jm},ZM={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},NM={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}},DM=Nu,XM=_B,HM=XM.extendFlat,WM=XM.extendDeep;function kM(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}var MM=function(t,e){var i,n,r=t.data,a=t.layout,s=WM([],r),o=WM({},a,kM(e.tileClass)),l=t._context||{};if(e.width&&(o.width=e.width),e.height&&(o.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){o.annotations=[];var c=Object.keys(o);for(i=0;i<c.length;i++)n=c[i],["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))>-1&&(o[c[i]].title={text:""});for(i=0;i<s.length;i++){var g=s[i];g.showscale=!1,g.marker&&(g.marker.showscale=!1),DM.traceIs(g,"pie-like")&&(g.textposition="none")}}if(Array.isArray(e.annotations))for(i=0;i<e.annotations.length;i++)o.annotations.push(e.annotations[i]);var u=Object.keys(o).filter((function(t){return t.match(/^scene\d*$/)}));if(u.length){var d={};for("thumbnail"===e.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<u.length;i++){var h=o[u[i]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),HM(h.xaxis,d),HM(h.yaxis,d),HM(h.zaxis,d),h._scene=null}}var B=document.createElement("div");e.tileClass&&(B.className=e.tileClass);var p={gd:B,td:B,layout:o,data:s,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return"transparent"!==e.setBackground&&(p.config.setBackground=e.setBackground||"opaque"),p.gd.defaultLayout=kM(e.tileClass),p},TM=Fp.EventEmitter,YM=Nu,JM=_B,_M=uw,zM=MM,OM=Uw,KM=xw;var PM=function(t,e){var i=new TM,n=zM(t,{}),r=n.gd;r.style.position="absolute",r.style.left="-5000px",document.body.appendChild(r);var a=_M.getRedrawFunc(r);return YM.call("_doPlot",r,n.data,n.layout,n.config).then(a).then((function(){var t=_M.getDelay(r._fullLayout);setTimeout((function(){var t=OM(r),n=document.createElement("canvas");n.id=JM.randstr(),(i=KM({format:e.format,width:r._fullLayout.width,height:r._fullLayout.height,canvas:n,emitter:i,svg:t})).clean=function(){r&&document.body.removeChild(r)}}),t)})).catch((function(t){i.emit("error",t)})),i},jM=uw,qM={getDelay:jM.getDelay,getRedrawFunc:jM.getRedrawFunc,clone:MM,toSVG:Uw,svgToImg:xw,toImage:PM,downloadImage:iV};!function(t){t.version=ks.version;for(var e=Nu,i=t.register=e.register,n=qB,r=Object.keys(n),a=0;a<r.length;a++){var s=r[a];"_"!==s.charAt(0)&&(t[s]=n[s]),i({moduleType:"apiMethod",name:s,fn:n[s]})}i(MN),i([XD,nX,fS,wX,OX,MH,WW,ek,Vk,eM,cM,DQ,VM,EM,Wv,QL]),i([ZM,NM]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),t.Icons=Jv;var o=Wv,l=yF;t.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},t.Fx={hover:o.hover,unhover:o.unhover,loneHover:o.loneHover,loneUnhover:o.loneUnhover},t.Snapshot=qM,t.PlotSchema=xp}(Ws);var $M=Ws,tT={TEXTPAD:3,eventDataKeys:["value","label"]},eT=qR,iT=_F,nT=Dd.hovertemplateAttrs,rT=Dd.texttemplateAttrs,aT=Gf,sT=_g(),oT=tT,lT=Nd.pattern,cT=Mg.extendFlat,gT=sT({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),uT=cT({},eT.marker.line.width,{dflt:0}),dT=cT({width:uT,editType:"calc"},aT("marker.line")),hT=cT({line:dT,editType:"calc"},aT("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:lT,cornerradius:{valType:"any",editType:"calc",description:["Sets the rounding of corners. May be an integer number of pixels,","or a percentage of bar width (as a string ending in %). Defaults to `layout.barcornerradius`.","In stack or relative barmode, the first trace to set cornerradius is used for the whole stack."].join(" ")}}),BT={x:eT.x,x0:eT.x0,dx:eT.dx,y:eT.y,y0:eT.y0,dy:eT.dy,xperiod:eT.xperiod,yperiod:eT.yperiod,xperiod0:eT.xperiod0,yperiod0:eT.yperiod0,xperiodalignment:eT.xperiodalignment,yperiodalignment:eT.yperiodalignment,xhoverformat:iT("x"),yhoverformat:iT("y"),text:eT.text,texttemplate:rT({editType:"plot"},{keys:oT.eventDataKeys}),hovertext:eT.hovertext,hovertemplate:nT({},{keys:oT.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:cT({},gT,{description:"Sets the font used for `text`."}),insidetextfont:cT({},gT,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:cT({},gT,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:cT({},eT.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},marker:hT,offsetgroup:eT.offsetgroup,alignmentgroup:eT.alignmentgroup,selected:{marker:{opacity:eT.selected.marker.opacity,color:eT.selected.marker.color,editType:"style"},textfont:eT.selected.textfont,editType:"style"},unselected:{marker:{opacity:eT.unselected.marker.opacity,color:eT.unselected.marker.color,editType:"style"},textfont:eT.unselected.textfont,editType:"style"},zorder:eT.zorder},pT=BT,FT=_F,fT=Dd.hovertemplateAttrs,QT=Dd.texttemplateAttrs,IT=_g(),UT=function(t,e){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",t,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",e?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",t,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",t,"axis bin.","Default behavior: If `nbins"+t+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+t+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",e?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}},bT={eventDataKeys:["binNumber"]},yT=Mg.extendFlat,mT={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:FT("x"),yhoverformat:FT("y"),text:yT({},pT.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:yT({},pT.hovertext,{description:"Same as `text`."}),orientation:pT.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:UT("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:UT("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:fT({},{keys:bT.eventDataKeys}),texttemplate:QT({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:yT({},pT.textposition,{arrayOk:!1}),textfont:IT({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:IT({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:IT({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:pT.insidetextanchor,textangle:pT.textangle,cliponaxis:pT.cliponaxis,constraintext:pT.constraintext,marker:pT.marker,offsetgroup:pT.offsetgroup,alignmentgroup:pT.alignmentgroup,selected:pT.selected,unselected:pT.unselected,zorder:pT.zorder},xT={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")},barcornerradius:{valType:"any",editType:"calc",description:["Sets the rounding of bar corners. May be an integer number of pixels,","or a percentage of bar width (as a string ending in %)."].join(" ")}},vT=Uu,CT=kF.hasColorscale,AT=vQ,LT=_B.coercePattern,GT=$c,RT=_B,ST=RT.coerceFont;var wT=function(t,e,i,n,r,a){var s=!(!1===(a=a||{}).moduleHasSelected),o=!(!1===a.moduleHasUnselected),l=!(!1===a.moduleHasConstrain),c=!(!1===a.moduleHasCliponaxis),g=!(!1===a.moduleHasTextangle),u=!(!1===a.moduleHasInsideanchor),d=!!a.hasPathbar,h=Array.isArray(r)||"auto"===r,B=h||"inside"===r,p=h||"outside"===r;if(B||p){var F=ST(n,"textfont",i.font),f=RT.extendFlat({},F),Q=!(t.textfont&&t.textfont.color);if(Q&&delete f.color,ST(n,"insidetextfont",f),d){var I=RT.extendFlat({},F);Q&&delete I.color,ST(n,"pathbar.textfont",I)}p&&ST(n,"outsidetextfont",F),s&&n("selected.textfont.color"),o&&n("unselected.textfont.color"),l&&n("constraintext"),c&&n("cliponaxis"),g&&n("textangle"),n("texttemplate")}B&&u&&n("insidetextanchor")},VT=function(t){if(GT(t)){if((t=+t)>=0)return t}else if("string"==typeof t&&"%"===(t=t.trim()).slice(-1)&&GT(t.slice(0,-1))&&(t=+t.slice(0,-1))>=0)return t+"%"},ET=Nu,ZT=_B,NT=Uu,DT=wT,XT=function(t,e,i,n,r){var a=i("marker.color",n),s=CT(t,"marker");s&&AT(t,e,r,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",vT.defaultLine),CT(t,"marker.line")&&AT(t,e,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),LT(i,"marker.pattern",a,s),i("selected.marker.color"),i("unselected.marker.color")},HT=mT,WT=_B,kT=Ep,MT=Nu.traceIs,TT=nE,YT=VT,JT=WT.nestedProperty,_T=IL.getAxisGroup,zT=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],OT=["x","y"],KT=Nu,PT=Vy,jT=_B,qT=xT,$T=VT,tY=_B,eY=$c,iY={count:function(t,e,i){return i[t]++,1},sum:function(t,e,i,n){var r=n[e];return eY(r)?(r=Number(r),i[t]+=r,r):0},avg:function(t,e,i,n,r){var a=n[e];return eY(a)&&(a=Number(a),i[t]+=a,r[t]++),0},min:function(t,e,i,n){var r=n[e];if(eY(r)){if(r=Number(r),!eY(i[t]))return i[t]=r,r;if(i[t]>r){var a=r-i[t];return i[t]=r,a}}return 0},max:function(t,e,i,n){var r=n[e];if(eY(r)){if(r=Number(r),!eY(i[t]))return i[t]=r,r;if(i[t]<r){var a=r-i[t];return i[t]=r,a}}return 0}},nY=tg,rY=nY.ONEAVGYEAR,aY=nY.ONEAVGMONTH,sY=nY.ONEDAY,oY=nY.ONEHOUR,lY=nY.ONEMIN,cY=nY.ONESEC,gY=Vy.tickIncrement;function uY(t,e,i,n){if(t*e<=0)return 1/0;for(var r=Math.abs(e-t),a="date"===i.type,s=dY(r,a),o=0;o<10;o++){var l=dY(80*s,a);if(s===l)break;if(!hY(l,t,e,a,i,n))break;s=l}return s}function dY(t,e){return e&&t>cY?t>sY?t>1.1*rY?rY:t>1.1*aY?aY:sY:t>oY?oY:t>lY?lY:cY:Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function hY(t,e,i,n,r,a){if(n&&t>sY){var s=BY(e,r,a),o=BY(i,r,a),l=t===rY?0:1;return s[l]!==o[l]}return Math.floor(i/t)-Math.floor(e/t)>.1}function BY(t,e,i){var n=e.c2d(t,rY,i).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}var pY=$c,FY=_B,fY=Nu,QY=Vy,IY=function(t,e){for(var i=0;i<t.length;i++)t[i].i=i;tY.mergeArray(e.text,t,"tx"),tY.mergeArray(e.hovertext,t,"htx");var n=e.marker;if(n){tY.mergeArray(n.opacity,t,"mo",!0),tY.mergeArray(n.color,t,"mc");var r=n.line;r&&(tY.mergeArray(r.color,t,"mlc"),tY.mergeArrayCastPositive(r.width,t,"mlw"))}},UY=iY,bY={percent:function(t,e){for(var i=t.length,n=100/e,r=0;r<i;r++)t[r]*=n},probability:function(t,e){for(var i=t.length,n=0;n<i;n++)t[n]/=e},density:function(t,e,i,n){var r=t.length;n=n||1;for(var a=0;a<r;a++)t[a]*=i[a]*n},"probability density":function(t,e,i,n){var r=t.length;n&&(e/=n);for(var a=0;a<r;a++)t[a]*=i[a]/e}},yY=function(t,e){for(var i=t.length,n=0,r=0;r<i;r++)e[r]?(t[r]/=e[r],n+=t[r]):t[r]=null;return n},mY=function(t,e,i,n,r){var a,s,o=-1.1*e,l=-.1*e,c=t-l,g=i[0],u=i[1],d=Math.min(uY(g+l,g+c,n,r),uY(u+l,u+c,n,r)),h=Math.min(uY(g+o,g+l,n,r),uY(u+o,u+l,n,r));if(d>h&&h<Math.abs(u-g)/4e3?(a=d,s=!1):(a=Math.min(d,h),s=!0),"date"===n.type&&a>sY){var B=a===rY?1:6,p=a===rY?"M12":"M1";return function(e,i){var a=n.c2d(e,rY,r),o=a.indexOf("-",B);o>0&&(a=a.substr(0,o));var l=n.d2c(a,0,r);if(l<e){var c=gY(l,p,!1,r);(l+c)/2<e+t&&(l=c)}return i&&s?gY(l,p,!0,r):l}}return function(e,i){var n=a*Math.round(e/a);return n+a/10<e&&n+.9*a<e+t&&(n+=a),i&&s&&(n-=a),n}};function xY(t,e,i,n,r){var a,s,o,l,c,g,u,d=n+"bins",h=t._fullLayout,B=e["_"+n+"bingroup"],p=h._histogramBinOpts[B],F="overlay"===h.barmode,f=function(t){return i.r2c(t,0,l)},Q=function(t){return i.c2r(t,0,l)},I="date"===i.type?function(t){return t||0===t?FY.cleanDate(t,null,l):null}:function(t){return pY(t)?Number(t):null};function U(t,e,i){e[t+"Found"]?(e[t]=I(e[t]),null===e[t]&&(e[t]=i[t])):(g[t]=e[t]=i[t],FY.nestedProperty(s[0],d+"."+t).set(i[t]))}if(e["_"+n+"autoBinFinished"])delete e["_"+n+"autoBinFinished"];else{s=p.traces;var b=[],y=!0,m=!1,x=!1;for(a=0;a<s.length;a++)if((o=s[a]).visible){var v=p.dirs[a];c=o["_"+v+"pos0"]=i.makeCalcdata(o,v),b=FY.concat(b,c),delete o["_"+n+"autoBinFinished"],!0===e.visible&&(y?y=!1:(delete o._autoBin,o["_"+n+"autoBinFinished"]=1),fY.traceIs(o,"2dMap")&&(m=!0),"histogram2dcontour"===o.type&&(x=!0))}l=s[0][n+"calendar"];var C=QY.autoBin(b,i,p.nbins,m,l,p.sizeFound&&p.size),A=s[0]._autoBin={};if(g=A[p.dirs[0]]={},x&&(p.size||(C.start=Q(QY.tickIncrement(f(C.start),C.size,!0,l))),void 0===p.end&&(C.end=Q(QY.tickIncrement(f(C.end),C.size,!1,l)))),F&&!fY.traceIs(e,"2dMap")&&0===C._dataSpan&&"category"!==i.type&&"multicategory"!==i.type&&""===e.bingroup&&void 0===e.xbins){if(r)return[C,c,!0];C=function(t,e,i,n,r){var a,s,o,l=t._fullLayout,c=function(t,e){for(var i=e.xaxis,n=e.yaxis,r=e.orientation,a=[],s=t._fullData,o=0;o<s.length;o++){var l=s[o];"histogram"===l.type&&!0===l.visible&&l.orientation===r&&l.xaxis===i&&l.yaxis===n&&a.push(l)}return a}(t,e),g=!1,u=1/0,d=[e];for(a=0;a<c.length;a++)if((s=c[a])===e)g=!0;else if(g){var h=xY(t,s,i,n,!0),B=h[0],p=h[2];s["_"+n+"autoBinFinished"]=1,s["_"+n+"pos0"]=h[1],p?d.push(s):u=Math.min(u,B.size)}else o=l._histogramBinOpts[s["_"+n+"bingroup"]],u=Math.min(u,o.size||s[r].size);var F=new Array(d.length);for(a=0;a<d.length;a++)for(var f=d[a]["_"+n+"pos0"],Q=0;Q<f.length;Q++)if(void 0!==f[Q]){F[a]=f[Q];break}isFinite(u)||(u=FY.distinctVals(F).minDiff);for(a=0;a<d.length;a++){var I=(s=d[a])[n+"calendar"],U={start:i.c2r(F[a]-u/2,0,I),end:i.c2r(F[a]+u/2,0,I),size:u};s._input[r]=s[r]=U,(o=l._histogramBinOpts[s["_"+n+"bingroup"]])&&FY.extendFlat(o,U)}return e[r]}(t,e,i,n,d)}(u=o.cumulative||{}).enabled&&"include"!==u.currentbin&&("decreasing"===u.direction?C.start=Q(QY.tickIncrement(f(C.start),C.size,!0,l)):C.end=Q(QY.tickIncrement(f(C.end),C.size,!1,l))),p.size=C.size,p.sizeFound||(g.size=C.size,FY.nestedProperty(s[0],d+".size").set(C.size)),U("start",p,C),U("end",p,C)}c=e["_"+n+"pos0"],delete e["_"+n+"pos0"];var L=e._input[d]||{},G=FY.extendFlat({},p),R=p.start,S=i.r2l(L.start),w=void 0!==S;if((p.startFound||w)&&S!==i.r2l(R)){var V=w?S:FY.aggNums(Math.min,null,c),E={type:"category"===i.type||"multicategory"===i.type?"linear":i.type,r2l:i.r2l,dtick:p.size,tick0:R,calendar:l,range:[V,QY.tickIncrement(V,p.size,!1,l)].map(i.l2r)},Z=QY.tickFirst(E);Z>i.r2l(V)&&(Z=QY.tickIncrement(Z,p.size,!0,l)),G.start=i.l2r(Z),w||FY.nestedProperty(e,d+".start").set(G.start)}var N=p.end,D=i.r2l(L.end),X=void 0!==D;if((p.endFound||X)&&D!==i.r2l(N)){var H=X?D:FY.aggNums(Math.max,null,c);G.end=i.l2r(H),X||FY.nestedProperty(e,d+".start").set(G.end)}var W="autobin"+n;return!1===e._input[W]&&(e._input[d]=FY.extendFlat({},e[d]||{}),delete e._input[W],delete e[W]),[G,c]}var vY={calc:function(t,e){var i,n,r,a,s=[],o=[],l="h"===e.orientation,c=QY.getFromId(t,l?e.yaxis:e.xaxis),g=l?"y":"x",u={x:"y",y:"x"}[g],d=e[g+"calendar"],h=e.cumulative,B=xY(t,e,c,g),p=B[0],F=B[1],f="string"==typeof p.size,Q=[],I=f?Q:p,U=[],b=[],y=[],m=0,x=e.histnorm,v=e.histfunc,C=-1!==x.indexOf("density");h.enabled&&C&&(x=x.replace(/ ?density$/,""),C=!1);var A,L="max"===v||"min"===v?null:0,G=UY.count,R=bY[x],S=!1,w=function(t){return c.r2c(t,0,d)};for(FY.isArrayOrTypedArray(e[u])&&"count"!==v&&(A=e[u],S="avg"===v,G=UY[v]),i=w(p.start),r=w(p.end)+(i-QY.tickIncrement(i,p.size,!1,d))/1e6;i<r&&s.length<1e6&&(n=QY.tickIncrement(i,p.size,!1,d),s.push((i+n)/2),o.push(L),y.push([]),Q.push(i),C&&U.push(1/(n-i)),S&&b.push(0),!(n<=i));)i=n;Q.push(i),f||"date"!==c.type||(I={start:w(I.start),end:w(I.end),size:I.size}),t._fullLayout._roundFnOpts||(t._fullLayout._roundFnOpts={});var V=e["_"+g+"bingroup"],E={leftGap:1/0,rightGap:1/0};V&&(t._fullLayout._roundFnOpts[V]||(t._fullLayout._roundFnOpts[V]=E),E=t._fullLayout._roundFnOpts[V]);var Z,N=o.length,D=!0,X=E.leftGap,H=E.rightGap,W={};for(i=0;i<F.length;i++){var k=F[i];(a=FY.findBin(k,I))>=0&&a<N&&(m+=G(a,i,o,A,b),D&&y[a].length&&k!==F[y[a][0]]&&(D=!1),y[a].push(i),W[i]=a,X=Math.min(X,k-Q[a]),H=Math.min(H,Q[a+1]-k))}E.leftGap=X,E.rightGap=H,D||(Z=function(e,i){return function(){var n=t._fullLayout._roundFnOpts[V];return mY(n.leftGap,n.rightGap,Q,c,d)(e,i)}}),S&&(m=yY(o,b)),R&&R(o,m,U),h.enabled&&function(t,e,i){var n,r,a;function s(e){a=t[e],t[e]/=2}function o(e){r=t[e],t[e]=a+r/2,a+=r}if("half"===i)if("increasing"===e)for(s(0),n=1;n<t.length;n++)o(n);else for(s(t.length-1),n=t.length-2;n>=0;n--)o(n);else if("increasing"===e){for(n=1;n<t.length;n++)t[n]+=t[n-1];"exclude"===i&&(t.unshift(0),t.pop())}else{for(n=t.length-2;n>=0;n--)t[n]+=t[n+1];"exclude"===i&&(t.push(0),t.shift())}}(o,h.direction,h.currentbin);var M=Math.min(s.length,o.length),T=[],Y=0,J=M-1;for(i=0;i<M;i++)if(o[i]){Y=i;break}for(i=M-1;i>=Y;i--)if(o[i]){J=i;break}for(i=Y;i<=J;i++)if(pY(s[i])&&pY(o[i])){var _={p:s[i],s:o[i],b:0};h.enabled||(_.pts=y[i],D?_.ph0=_.ph1=y[i].length?F[y[i][0]]:s[i]:(e._computePh=!0,_.ph0=Z(Q[i]),_.ph1=Z(Q[i+1],!0))),T.push(_)}return 1===T.length&&(T[0].width1=QY.tickIncrement(T[0].p,p.size,!1,d)-T[0].p),IY(T,e),FY.isArrayOrTypedArray(e.selectedpoints)&&FY.tagSelected(T,e,W),T}},CY=Js,AY=_B;function LY(t){return"_"+t+"Text_minsize"}var GY={recordMinTextSize:function(t,e,i){if(i.uniformtext.mode){var n=LY(t),r=i.uniformtext.minsize,a=e.scale*e.fontSize;e.hide=a<r,i[n]=i[n]||1/0,e.hide||(i[n]=Math.min(i[n],Math.max(a,r)))}},clearMinTextSize:function(t,e){e[LY(t)]=void 0},resizeText:function(t,e,i){var n=t._fullLayout,r=n["_"+i+"Text_minsize"];if(r){var a,s="hide"===n.uniformtext.mode;switch(i){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}e.selectAll(a).each((function(t){var e=t.transform;if(e){e.scale=s&&e.hide?0:r/e.fontSize;var i=CY.select(this).select("text");AY.setTransormAndDisplay(i,e)}}))}}},RY={},SY=$c,wY=kg,VY=_B.isArrayOrTypedArray;RY.coerceString=function(t,e,i){if("string"==typeof e){if(e||!t.noBlank)return e}else if(("number"==typeof e||!0===e)&&!t.strict)return String(e);return void 0!==i?i:t.dflt},RY.coerceNumber=function(t,e,i){if(SY(e)){e=+e;var n=t.min,r=t.max;if(!(void 0!==n&&e<n||void 0!==r&&e>r))return e}return void 0!==i?i:t.dflt},RY.coerceColor=function(t,e,i){return wY(e).isValid()?e:void 0!==i?i:t.dflt},RY.coerceEnumerated=function(t,e,i){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==i?i:t.dflt},RY.getValue=function(t,e){var i;return VY(t)?e<t.length&&(i=t[e]):i=t,i},RY.getLineWidth=function(t,e){return 0<e.mlw?e.mlw:VY(t.marker.line.width)?0:t.marker.line.width};var EY=Js,ZY=Uu,NY=jI,DY=_B,XY=Nu,HY=GY.resizeText,WY=BT.textfont,kY=BT.insidetextfont,MY=BT.outsidetextfont,TY=RY;function YY(t,e,i){NY.pointStyle(t.selectAll("path"),e,i),JY(t,e,i)}function JY(t,e,i){t.selectAll("text").each((function(t){var n=EY.select(this),r=DY.ensureUniformFontSize(i,_Y(n,t,e,i));NY.font(n,r)}))}function _Y(t,e,i,n){var r=n._fullLayout.font,a=i.textfont;if(t.classed("bartext-inside")){var s=jY(e,i);a=OY(i,e.i,r,s)}else t.classed("bartext-outside")&&(a=KY(i,e.i,r));return a}function zY(t,e,i){return PY(WY,t.textfont,e,i)}function OY(t,e,i,n){var r=zY(t,e,i);return(void 0===t._input.textfont||void 0===t._input.textfont.color||Array.isArray(t.textfont.color)&&void 0===t.textfont.color[e])&&(r={color:ZY.contrast(n),family:r.family,size:r.size,weight:r.weight,style:r.style,variant:r.variant,textcase:r.textcase,lineposition:r.lineposition,shadow:r.shadow}),PY(kY,t.insidetextfont,e,r)}function KY(t,e,i){var n=zY(t,e,i);return PY(MY,t.outsidetextfont,e,n)}function PY(t,e,i,n){e=e||{};var r=TY.getValue(e.family,i),a=TY.getValue(e.size,i),s=TY.getValue(e.color,i),o=TY.getValue(e.weight,i),l=TY.getValue(e.style,i),c=TY.getValue(e.variant,i),g=TY.getValue(e.textcase,i),u=TY.getValue(e.lineposition,i),d=TY.getValue(e.shadow,i);return{family:TY.coerceString(t.family,r,n.family),size:TY.coerceNumber(t.size,a,n.size),color:TY.coerceColor(t.color,s,n.color),weight:TY.coerceString(t.weight,o,n.weight),style:TY.coerceString(t.style,l,n.style),variant:TY.coerceString(t.variant,c,n.variant),textcase:TY.coerceString(t.variant,g,n.textcase),lineposition:TY.coerceString(t.variant,u,n.lineposition),shadow:TY.coerceString(t.variant,d,n.shadow)}}function jY(t,e){return"waterfall"===e.type?e[t.dir].marker.color:t.mcc||t.mc||e.marker.color}var qY={style:function(t){var e=EY.select(t).selectAll('g[class^="barlayer"]').selectAll("g.trace");HY(t,e,"bar");var i=e.size(),n=t._fullLayout;e.style("opacity",(function(t){return t[0].trace.opacity})).each((function(t){("stack"===n.barmode&&i>1||0===n.bargap&&0===n.bargroupgap&&!t[0].trace.marker.line.width)&&EY.select(this).attr("shape-rendering","crispEdges")})),e.selectAll("g.points").each((function(e){YY(EY.select(this),e[0].trace,t)})),XY.getComponentMethod("errorbars","style")(e)},styleTextPoints:JY,styleOnSelect:function(t,e,i){var n=e[0].trace;n.selectedpoints?function(t,e,i){NY.selectedPointStyle(t.selectAll("path"),e),function(t,e,i){t.each((function(t){var n,r=EY.select(this);if(t.selected){n=DY.ensureUniformFontSize(i,_Y(r,t,e,i));var a=e.selected.textfont&&e.selected.textfont.color;a&&(n.color=a),NY.font(r,n)}else NY.selectedTextStyle(r,e)}))}(t.selectAll("text"),e,i)}(i,n,t):(YY(i,n,t),XY.getComponentMethod("errorbars","style")(i))},getInsideTextFont:OY,getOutsideTextFont:KY,getBarColor:jY,resizeText:HY},$Y=Js,tJ=$c,eJ=_B,iJ=xF,nJ=Uu,rJ=jI,aJ=Nu,sJ=Vy.tickText,oJ=GY.recordMinTextSize,lJ=GY.clearMinTextSize,cJ=qY,gJ=RY,uJ=BT.text,dJ=BT.textposition,hJ=TQ.appendArrayPointValue,BJ=tT.TEXTPAD;function pJ(t){return t.id}function FJ(t){if(t.ids)return pJ}function fJ(t){return(t>0)-(t<0)}function QJ(t,e){return t<e?1:-1}function IJ(t,e,i,n){var r;return!e.uniformtext.mode&&UJ(i)?(n&&(r=n()),t.transition().duration(i.duration).ease(i.easing).each("end",(function(){r&&r()})).each("interrupt",(function(){r&&r()}))):t}function UJ(t){return t&&t.duration>0}function bJ(t,e,i,n,r){return!(t<0||e<0)&&(i<=t&&n<=e||i<=e&&n<=t||(r?t>=i*(e/n):e>=n*(t/i)))}function yJ(t){return"auto"===t?0:t}function mJ(t,e){var i=Math.PI/180*e,n=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));return{x:t.width*r+t.height*n,y:t.width*n+t.height*r}}var xJ={plot:function(t,e,i,n,r,a){var s=e.xaxis,o=e.yaxis,l=t._fullLayout,c=t._context.staticPlot;r||(r={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},lJ("bar",l));var g=eJ.makeTraceGroups(n,i,"trace bars").each((function(i){var n=$Y.select(this),g=i[0].trace,u=i[0].t,d="waterfall"===g.type,h="funnel"===g.type,B="histogram"===g.type,p="bar"===g.type,F=p||h,f=0;d&&g.connector.visible&&"between"===g.connector.mode&&(f=g.connector.line.width/2);var Q="h"===g.orientation,I=UJ(r),U=eJ.ensureSingle(n,"g","points"),b=FJ(g),y=U.selectAll("g.point").data(eJ.identity,b);y.enter().append("g").classed("point",!0),y.exit().remove(),y.each((function(n,d){var h,U,b=$Y.select(this),y=function(t,e,i,n){var r=[],a=[],s=n?e:i,o=n?i:e;return r[0]=s.c2p(t.s0,!0),a[0]=o.c2p(t.p0,!0),r[1]=s.c2p(t.s1,!0),a[1]=o.c2p(t.p1,!0),n?[r,a]:[a,r]}(n,s,o,Q),m=y[0][0],x=y[0][1],v=y[1][0],C=y[1][1],A=0==(Q?x-m:C-v);if(A&&F&&gJ.getLineWidth(g,n)&&(A=!1),A||(A=!(tJ(m)&&tJ(x)&&tJ(v)&&tJ(C))),n.isBlank=A,A&&(Q?x=m:C=v),f&&!A&&(Q?(m-=QJ(m,x)*f,x+=QJ(m,x)*f):(v-=QJ(v,C)*f,C+=QJ(v,C)*f)),"waterfall"===g.type){if(!A){var L=g[n.dir].marker;h=L.line.width,U=L.color}}else h=gJ.getLineWidth(g,n),U=n.mc||g.marker.color;function G(t){var e=$Y.round(h/2%1,2);return 0===r.gap&&0===r.groupgap?$Y.round(Math.round(t)-e,2):t}var R=nJ.opacity(U)<1||h>.01?G:function(t,e,i){return i&&t===e?t:Math.abs(t-e)>=2?G(t):t>e?Math.ceil(t):Math.floor(t)};t._context.staticPlot||(m=R(m,x,Q),x=R(x,m,Q),v=R(v,C,!Q),C=R(C,v,!Q));var S,w=Q?s.c2p:o.c2p;S=n.s0>0?n._sMax:n.s0<0?n._sMin:n.s1>0?n._sMax:n._sMin;var V,E,Z=p||B?function(t,e){if(!t)return 0;var i,r=Q?Math.abs(C-v):Math.abs(x-m),a=Q?Math.abs(x-m):Math.abs(C-v),s=R(Math.abs(w(S,!0)-w(0,!0))),o=n.hasB?Math.min(r/2,a/2):Math.min(r/2,s);return i="%"===e?r*(Math.min(50,t)/100):t,R(Math.max(Math.min(i,o),0))}(u.cornerradiusvalue,u.cornerradiusform):0,N="M"+m+","+v+"V"+C+"H"+x+"V"+v+"Z",D=0;if(Z&&n.s){var X=0===fJ(n.s0)||fJ(n.s)===fJ(n.s0)?n.s1:n.s0;if((D=R(n.hasB?0:Math.abs(w(S,!0)-w(X,!0))))<Z){var H=QJ(m,x),W=QJ(v,C),k=H===-W?1:0;if(Q)if(n.hasB)V="M"+(m+Z*H)+","+v+"A "+Z+","+Z+" 0 0 "+k+" "+m+","+(v+Z*W)+"V"+(C-Z*W)+"A "+Z+","+Z+" 0 0 "+k+" "+(m+Z*H)+","+C+"H"+(x-Z*H)+"A "+Z+","+Z+" 0 0 "+k+" "+x+","+(C-Z*W)+"V"+(v+Z*W)+"A "+Z+","+Z+" 0 0 "+k+" "+(x-Z*H)+","+v+"Z";else{var M=(E=Math.abs(x-m)+D)<Z?Z-Math.sqrt(E*(2*Z-E)):0,T=D>0?Math.sqrt(D*(2*Z-D)):0,Y=H>0?Math.max:Math.min;V="M"+m+","+v+"V"+(C-M*W)+"H"+Y(x-(Z-D)*H,m)+"A "+Z+","+Z+" 0 0 "+k+" "+x+","+(C-Z*W-T)+"V"+(v+Z*W+T)+"A "+Z+","+Z+" 0 0 "+k+" "+Y(x-(Z-D)*H,m)+","+(v+M*W)+"Z"}else if(n.hasB)V="M"+(m+Z*H)+","+v+"A "+Z+","+Z+" 0 0 "+k+" "+m+","+(v+Z*W)+"V"+(C-Z*W)+"A "+Z+","+Z+" 0 0 "+k+" "+(m+Z*H)+","+C+"H"+(x-Z*H)+"A "+Z+","+Z+" 0 0 "+k+" "+x+","+(C-Z*W)+"V"+(v+Z*W)+"A "+Z+","+Z+" 0 0 "+k+" "+(x-Z*H)+","+v+"Z";else{var J=(E=Math.abs(C-v)+D)<Z?Z-Math.sqrt(E*(2*Z-E)):0,_=D>0?Math.sqrt(D*(2*Z-D)):0,z=W>0?Math.max:Math.min;V="M"+(m+J*H)+","+v+"V"+z(C-(Z-D)*W,v)+"A "+Z+","+Z+" 0 0 "+k+" "+(m+Z*H-_)+","+C+"H"+(x-Z*H+_)+"A "+Z+","+Z+" 0 0 "+k+" "+(x-J*H)+","+z(C-(Z-D)*W,v)+"V"+v+"Z"}}else V=N}else V=N;var O=IJ(eJ.ensureSingle(b,"path"),l,r,a);if(O.style("vector-effect",c?"none":"non-scaling-stroke").attr("d",isNaN((x-m)*(C-v))||A&&t._context.staticPlot?"M0,0Z":V).call(rJ.setClipUrl,e.layerClipId,t),!l.uniformtext.mode&&I){var K=rJ.makePointStyleFns(g);rJ.singlePointStyle(n,O,g,K,t)}!function(t,e,i,n,r,a,s,o,l,c,g,u,d){var h,B=e.xaxis,p=e.yaxis,F=t._fullLayout;function f(e,i,n){return eJ.ensureSingle(e,"text").text(i).attr({class:"bartext bartext-"+h,"text-anchor":"middle","data-notex":1}).call(rJ.font,n).call(iJ.convertToTspans,t)}var Q=n[0].trace,I="h"===Q.orientation,U=function(t,e,i,n,r){var a,s=e[0].trace,o=s.texttemplate;a=o?function(t,e,i,n,r){var a=e[0].trace,s=eJ.castOption(a,i,"texttemplate");if(!s)return"";var o,l,c,g,u="histogram"===a.type,d="waterfall"===a.type,h="funnel"===a.type,B="h"===a.orientation;B?(o="y",l=r,c="x",g=n):(o="x",l=n,c="y",g=r);function p(t){return sJ(l,l.c2l(t),!0).text}function F(t){return sJ(g,g.c2l(t),!0).text}var f=e[i],Q={};Q.label=f.p,Q.labelLabel=Q[o+"Label"]=p(f.p);var I=eJ.castOption(a,f.i,"text");(0===I||I)&&(Q.text=I);Q.value=f.s,Q.valueLabel=Q[c+"Label"]=F(f.s);var U={};hJ(U,a,f.i),(u||void 0===U.x)&&(U.x=B?Q.value:Q.label);(u||void 0===U.y)&&(U.y=B?Q.label:Q.value);(u||void 0===U.xLabel)&&(U.xLabel=B?Q.valueLabel:Q.labelLabel);(u||void 0===U.yLabel)&&(U.yLabel=B?Q.labelLabel:Q.valueLabel);d&&(Q.delta=+f.rawS||f.s,Q.deltaLabel=F(Q.delta),Q.final=f.v,Q.finalLabel=F(Q.final),Q.initial=Q.final-Q.delta,Q.initialLabel=F(Q.initial));h&&(Q.value=f.s,Q.valueLabel=F(Q.value),Q.percentInitial=f.begR,Q.percentInitialLabel=eJ.formatPercent(f.begR),Q.percentPrevious=f.difR,Q.percentPreviousLabel=eJ.formatPercent(f.difR),Q.percentTotal=f.sumR,Q.percenTotalLabel=eJ.formatPercent(f.sumR));var b=eJ.castOption(a,f.i,"customdata");b&&(Q.customdata=b);return eJ.texttemplateString(s,Q,t._d3locale,U,Q,a._meta||{})}(t,e,i,n,r):s.textinfo?function(t,e,i,n){var r=t[0].trace,a="h"===r.orientation,s="waterfall"===r.type,o="funnel"===r.type;function l(t){return sJ(a?n:i,t,!0).text}function c(t){return sJ(a?i:n,+t,!0).text}var g,u=r.textinfo,d=t[e],h=u.split("+"),B=[],p=function(t){return-1!==h.indexOf(t)};p("label")&&B.push(l(t[e].p));p("text")&&(0===(g=eJ.castOption(r,d.i,"text"))||g)&&B.push(g);if(s){var F=+d.rawS||d.s,f=d.v,Q=f-F;p("initial")&&B.push(c(Q)),p("delta")&&B.push(c(F)),p("final")&&B.push(c(f))}if(o){p("value")&&B.push(c(d.s));var I=0;p("percent initial")&&I++,p("percent previous")&&I++,p("percent total")&&I++;var U=I>1;p("percent initial")&&(g=eJ.formatPercent(d.begR),U&&(g+=" of initial"),B.push(g)),p("percent previous")&&(g=eJ.formatPercent(d.difR),U&&(g+=" of previous"),B.push(g)),p("percent total")&&(g=eJ.formatPercent(d.sumR),U&&(g+=" of total"),B.push(g))}return B.join("<br>")}(e,i,n,r):gJ.getValue(s.text,i);return gJ.coerceString(uJ,a)}(F,n,r,B,p);h=function(t,e){var i=gJ.getValue(t.textposition,e);return gJ.coerceEnumerated(dJ,i)}(Q,r);var b="stack"===u.mode||"relative"===u.mode,y=n[r],m=!b||y._outmost,x=y.hasB,v=c&&c-g>BJ;if(!U||"none"===h||(y.isBlank||a===s||o===l)&&("auto"===h||"inside"===h))return void i.select("text").remove();var C=F.font,A=cJ.getBarColor(n[r],Q),L=cJ.getInsideTextFont(Q,r,C,A),G=cJ.getOutsideTextFont(Q,r,C),R=Q.insidetextanchor||"end",S=i.datum();I?"log"===B.type&&S.s0<=0&&(a=B.range[0]<B.range[1]?0:B._length):"log"===p.type&&S.s0<=0&&(o=p.range[0]<p.range[1]?p._length:0);var w,V,E,Z,N,D=Math.abs(s-a),X=Math.abs(l-o),H=D-2*BJ,W=X-2*BJ;"outside"===h&&(m||y.hasB||(h="inside"));if("auto"===h)if(m){h="inside",w=f(i,U,N=eJ.ensureUniformFontSize(t,L)),E=(V=rJ.bBox(w.node())).width,Z=V.height;var k,M=E>0&&Z>0;k=v?x?bJ(H-2*c,W,E,Z,I)||bJ(H,W-2*c,E,Z,I):I?bJ(H-(c-g),W,E,Z,I)||bJ(H,W-2*(c-g),E,Z,I):bJ(H,W-(c-g),E,Z,I)||bJ(H-2*(c-g),W,E,Z,I):bJ(H,W,E,Z,I),M&&k?h="inside":(h="outside",w.remove(),w=null)}else h="inside";if(!w){var T=(w=f(i,U,N=eJ.ensureUniformFontSize(t,"outside"===h?G:L))).attr("transform");if(w.attr("transform",""),E=(V=rJ.bBox(w.node())).width,Z=V.height,w.attr("transform",T),E<=0||Z<=0)return void w.remove()}var Y,J=Q.textangle;Y="outside"===h?function(t,e,i,n,r,a){var s,o=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,g=r.width,u=r.height,d=Math.abs(e-t),h=Math.abs(n-i);s=o?h>2*BJ?BJ:0:d>2*BJ?BJ:0;var B=1;l&&(B=o?Math.min(1,h/u):Math.min(1,d/g));var p=yJ(c),F=mJ(r,p),f=(o?F.x:F.y)/2,Q=(r.left+r.right)/2,I=(r.top+r.bottom)/2,U=(t+e)/2,b=(i+n)/2,y=0,m=0,x=o?QJ(e,t):QJ(i,n);o?(U=e-x*s,y=x*f):(b=n+x*s,m=-x*f);return{textX:Q,textY:I,targetX:U,targetY:b,anchorX:y,anchorY:m,scale:B,rotate:p}}(a,s,o,l,V,{isHorizontal:I,constrained:"both"===Q.constraintext||"outside"===Q.constraintext,angle:J}):function(t,e,i,n,r,a){var s=!!a.isHorizontal,o=!!a.constrained,l=a.angle||0,c=a.anchor,g="end"===c,u="start"===c,d=a.leftToRight||0,h=(d+1)/2,B=1-h,p=a.hasB,F=a.r,f=a.overhead,Q=r.width,I=r.height,U=Math.abs(e-t),b=Math.abs(n-i),y=U>2*BJ&&b>2*BJ?BJ:0;U-=2*y,b-=2*y;var m=yJ(l);"auto"!==l||Q<=U&&I<=b||!(Q>U||I>b)||(Q>b||I>U)&&Q<I==U<b||(m+=90);var x,v,C=mJ(r,m);if(F&&F-f>BJ){var A=function(t,e,i,n,r,a,s,o,l){var c,g,u,d,h,B=Math.max(0,Math.abs(e-t)-2*BJ),p=Math.max(0,Math.abs(n-i)-2*BJ),F=a-BJ,f=s?F-Math.sqrt(F*F-(F-s)*(F-s)):F,Q=l?2*F:o?F-s:2*f,I=l?2*F:o?2*f:F-s;r.y/r.x>=p/(B-Q)?d=p/r.y:r.y/r.x<=(p-I)/B?d=B/r.x:!l&&o?(c=r.x*r.x+r.y*r.y/4,u=(B-F)*(B-F)+(p/2-F)*(p/2-F)-F*F,d=(-(g=-2*r.x*(B-F)-r.y*(p/2-F))+Math.sqrt(g*g-4*c*u))/(2*c)):l?(c=(r.x*r.x+r.y*r.y)/4,u=(B/2-F)*(B/2-F)+(p/2-F)*(p/2-F)-F*F,d=(-(g=-r.x*(B/2-F)-r.y*(p/2-F))+Math.sqrt(g*g-4*c*u))/(2*c)):(c=r.x*r.x/4+r.y*r.y,u=(B/2-F)*(B/2-F)+(p-F)*(p-F)-F*F,d=(-(g=-r.x*(B/2-F)-2*r.y*(p-F))+Math.sqrt(g*g-4*c*u))/(2*c));d=Math.min(1,d),h=o?Math.max(0,F-Math.sqrt(Math.max(0,F*F-(F-(p-r.y*d)/2)*(F-(p-r.y*d)/2)))-s):Math.max(0,F-Math.sqrt(Math.max(0,F*F-(F-(B-r.x*d)/2)*(F-(B-r.x*d)/2)))-s);return{scale:d,pad:h}}(t,e,i,n,C,F,f,s,p);x=A.scale,v=A.pad}else x=1,o&&(x=Math.min(1,U/C.x,b/C.y)),v=0;var L=r.left*B+r.right*h,G=(r.top+r.bottom)/2,R=(t+BJ)*B+(e-BJ)*h,S=(i+n)/2,w=0,V=0;if(u||g){var E=(s?C.x:C.y)/2;F&&(g||p)&&(y+=v);var Z=s?QJ(t,e):QJ(i,n);s?u?(R=t+Z*y,w=-Z*E):(R=e-Z*y,w=Z*E):u?(S=i+Z*y,V=-Z*E):(S=n-Z*y,V=Z*E)}return{textX:L,textY:G,targetX:R,targetY:S,anchorX:w,anchorY:V,scale:x,rotate:m}}(a,s,o,l,V,{isHorizontal:I,constrained:"both"===Q.constraintext||"inside"===Q.constraintext,angle:J,anchor:R,hasB:x,r:c,overhead:g});Y.fontSize=N.size,oJ("histogram"===Q.type?"bar":Q.type,Y,F),y.transform=Y;var _=IJ(w,F,u,d);eJ.setTransormAndDisplay(_,Y)}(t,e,b,i,d,m,x,v,C,Z,D,r,a),e.layerClipId&&rJ.hideOutsideRangePoint(n,b.select("text"),s,o,g.xcalendar,g.ycalendar)}));var m=!1===g.cliponaxis;rJ.setClipUrl(n,m?null:e.layerClipId,t)}));aJ.getComponentMethod("errorbars","plot")(t,g,e,r)}},vJ=Wv,CJ=Nu,AJ=Uu,LJ=_B.fillText,GJ=RY.getLineWidth,RJ=Vy.hoverLabelText,SJ=tg.BADNUM;var wJ=function(t,e,i,n,r){var a=function(t,e,i,n,r){var a,s,o,l,c,g,u,d=t.cd,h=d[0].trace,B=d[0].t,p="closest"===n,F="waterfall"===h.type,f=t.maxHoverDistance,Q=t.maxSpikeDistance;"h"===h.orientation?(a=i,s=e,o="y",l="x",c=S,g=L):(a=e,s=i,o="x",l="y",g=S,c=L);var I=h[o+"period"],U=p||I;function b(t){return m(t,-1)}function y(t){return m(t,1)}function m(t,e){var i=t.w;return t[o]+e*i/2}function x(t){return t[o+"End"]-t[o+"Start"]}var v=p?b:I?function(t){return t.p-x(t)/2}:function(t){return Math.min(b(t),t.p-B.bardelta/2)},C=p?y:I?function(t){return t.p+x(t)/2}:function(t){return Math.max(y(t),t.p+B.bardelta/2)};function A(t,e,i){return r.finiteRange&&(i=0),vJ.inbox(t-a,e-a,i+Math.min(1,Math.abs(e-t)/u)-1)}function L(t){return A(v(t),C(t),f)}function G(t){return A(b(t),y(t),Q)}function R(t){var e=t[l];if(F){var i=Math.abs(t.rawS)||0;s>0?e+=i:s<0&&(e-=i)}return e}function S(t){var e=s,i=t.b,n=R(t);return vJ.inbox(i-e,n-e,f+(n-e)/(n-i)-1)}function w(t){var e=s,i=t.b,n=R(t);return vJ.inbox(i-e,n-e,Q+(n-e)/(n-i)-1)}var V=t[o+"a"],E=t[l+"a"];function Z(t){return(c(t)+g(t))/2}u=Math.abs(V.r2c(V.range[1])-V.r2c(V.range[0]));var N=vJ.getDistanceFunction(n,c,g,Z);if(vJ.getClosest(d,N,t),!1===t.index)return;if(d[t.index].p===SJ)return;U||(v=function(t){return Math.min(b(t),t.p-B.bargroupwidth/2)},C=function(t){return Math.max(y(t),t.p+B.bargroupwidth/2)});var D=t.index,X=d[D],H=h.base?X.b+X.s:X.s;t[l+"0"]=t[l+"1"]=E.c2p(X[l],!0),t[l+"LabelVal"]=H;var W=B.extents[B.extents.round(X.p)];t[o+"0"]=V.c2p(p?v(X):W[0],!0),t[o+"1"]=V.c2p(p?C(X):W[1],!0);var k=void 0!==X.orig_p;return t[o+"LabelVal"]=k?X.orig_p:X.p,t.labelLabel=RJ(V,t[o+"LabelVal"],h[o+"hoverformat"]),t.valueLabel=RJ(E,t[l+"LabelVal"],h[l+"hoverformat"]),t.baseLabel=RJ(E,X.b,h[l+"hoverformat"]),t.spikeDistance=(w(X)+G(X))/2,t[o+"Spike"]=V.c2p(X.p,!0),LJ(X,h,t),t.hovertemplate=h.hovertemplate,t}(t,e,i,n,r);if(a){var s=a.cd,o=s[0].trace,l=s[a.index];return a.color=function(t,e){var i=e.mcc||t.marker.color,n=e.mlcc||t.marker.line.color,r=GJ(t,e);if(AJ.opacity(i))return i;if(AJ.opacity(n)&&r)return n}(o,l),CJ.getComponentMethod("errorbars","hoverInfo")(l,o,a),[a]}},VJ=wJ,EJ=Vy.hoverLabelText;function ZJ(t,e,i,n,r){var a=e.c2p(n?t.s0:t.p0,!0),s=e.c2p(n?t.s1:t.p1,!0),o=i.c2p(n?t.p0:t.s0,!0),l=i.c2p(n?t.p1:t.s1,!0);return r?[(a+s)/2,(o+l)/2]:n?[s,(o+l)/2]:[(a+s)/2,l]}var NJ={attributes:mT,layoutAttributes:xT,supplyDefaults:function(t,e,i,n){function r(i,n){return ZT.coerce(t,e,HT,i,n)}var a=r("x"),s=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var o=r("textposition");DT(t,e,n,r,o,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var l=r("orientation",s&&!a?"h":"v"),c="v"===l?"x":"y",g="v"===l?"y":"x",u=a&&s?Math.min(ZT.minRowLength(a)&&ZT.minRowLength(s)):ZT.minRowLength(e[c]||[]);if(u){e._length=u,ET.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],n),e[g]&&r("histfunc"),r("histnorm"),r("autobin"+c),XT(t,e,r,i,n),ZT.coerceSelectionMarkerOpacity(e,r);var d=(e.marker.line||{}).color,h=ET.getComponentMethod("errorbars","supplyDefaults");h(t,e,d||NT.defaultLine,{axis:"y"}),h(t,e,d||NT.defaultLine,{axis:"x",inherit:"y"}),r("zorder")}else e.visible=!1},crossTraceDefaults:function(t,e){var i,n,r,a,s,o,l,c=e._histogramBinOpts={},g=[],u={},d=[];function h(t,e){return WT.coerce(i._input,i,i._module.attributes,t,e)}function B(t){return"v"===t.orientation?"x":"y"}function p(t,i,n){var r=t.uid+"__"+n;i||(i=r);var a=function(t,i){return kT.getFromTrace({_fullLayout:e},t,i).type}(t,n),s=t[n+"calendar"]||"",o=c[i],l=!0;o&&(a===o.axType&&s===o.calendar?(l=!1,o.traces.push(t),o.dirs.push(n)):(i=r,a!==o.axType&&WT.warn(["Attempted to group the bins of trace",t.index,"set on a","type:"+a,"axis","with bins on","type:"+o.axType,"axis."].join(" ")),s!==o.calendar&&WT.warn(["Attempted to group the bins of trace",t.index,"set with a",s,"calendar","with bins",o.calendar?"on a "+o.calendar+" calendar":"w/o a set calendar"].join(" ")))),l&&(c[i]={traces:[t],dirs:[n],axType:a,calendar:t[n+"calendar"]||""}),t["_"+n+"bingroup"]=i}for(s=0;s<t.length;s++)if(i=t[s],MT(i,"histogram")){if(g.push(i),delete i._xautoBinFinished,delete i._yautoBinFinished,"histogram"===i.type){var F=h("marker.cornerradius",e.barcornerradius);i.marker&&(i.marker.cornerradius=YT(F))}MT(i,"2dMap")||TT(i._input,i,e,h,e.barmode)}var f=e._alignmentOpts||{};for(s=0;s<g.length;s++){if(i=g[s],r="",!MT(i,"2dMap")){if(a=B(i),"group"===e.barmode&&i.alignmentgroup){var Q=i[a+"axis"],I=_T(e,Q)+i.orientation;(f[I]||{})[i.alignmentgroup]&&(r=I)}r||"overlay"===e.barmode||(r=_T(e,i.xaxis)+_T(e,i.yaxis)+B(i))}r?(u[r]||(u[r]=[]),u[r].push(i)):d.push(i)}for(r in u)if(1!==(n=u[r]).length){var U=!1;for(n.length&&(i=n[0],U=h("bingroup")),r=U||r,s=0;s<n.length;s++){var b=(i=n[s])._input.bingroup;b&&b!==r&&WT.warn(["Trace",i.index,"must match","within bingroup",r+".","Ignoring its bingroup:",b,"setting."].join(" ")),i.bingroup=r,p(i,r,B(i))}}else d.push(n[0]);for(s=0;s<d.length;s++){i=d[s];var y=h("bingroup");if(MT(i,"2dMap"))for(l=0;l<2;l++){var m=h((a=OT[l])+"bingroup",y?y+"__"+a:null);p(i,m,a)}else p(i,y,B(i))}for(r in c){var x=c[r];for(n=x.traces,o=0;o<zT.length;o++){var v,C,A=zT[o],L=A.name;if("nbins"!==L||!x.sizeFound){for(s=0;s<n.length;s++){if(i=n[s],a=x.dirs[s],v=A.aStr[a],void 0!==JT(i._input,v).get()){x[L]=h(v),x[L+"Found"]=!0;break}(C=(i._autoBin||{})[a]||{})[L]&&JT(i,v).set(C[L])}if("start"===L||"end"===L)for(;s<n.length;s++)(i=n[s])["_"+a+"bingroup"]&&h(v,(C=(i._autoBin||{})[a]||{})[L]);"nbins"!==L||x.sizeFound||x.nbinsFound||(i=n[0],x[L]=h(v))}}}},supplyLayoutDefaults:function(t,e,i){function n(i,n){return jT.coerce(t,e,qT,i,n)}for(var r=!1,a=!1,s=!1,o={},l=n("barmode"),c="group"===l,g=0;g<i.length;g++){var u=i[g];if(KT.traceIs(u,"bar")&&u.visible){r=!0;var d=u.xaxis+u.yaxis;if(c?(o[d]&&(s=!0),o[d]=!0):(d+=u._input.offsetgroup,o.length>0&&!o[d]&&(s=!0),o[d]=!0),u.visible&&"histogram"===u.type)"category"!==PT.getFromId({_fullLayout:e},u["v"===u.orientation?"xaxis":"yaxis"]).type&&(a=!0)}}if(r){"overlay"!==l&&n("barnorm"),n("bargap",a&&!s?0:.2),n("bargroupgap");var h=n("barcornerradius");e.barcornerradius=$T(h)}else delete e.barmode},calc:vY.calc,crossTraceCalc:tZ.crossTraceCalc,plot:xJ.plot,layerName:"barlayer",style:qY.style,styleOnSelect:qY.styleOnSelect,colorbar:CZ,hoverPoints:function(t,e,i,n,r){var a=VJ(t,e,i,n,r);if(a){var s=(t=a[0]).cd[t.index],o=t.cd[0].trace;if(!o.cumulative.enabled){var l="h"===o.orientation?"y":"x";t[l+"Label"]=EJ(t[l+"a"],[s.ph0,s.ph1],o[l+"hoverformat"])}return a}},selectPoints:function(t,e){var i,n=t.cd,r=t.xaxis,a=t.yaxis,s=n[0].trace,o="funnel"===s.type,l="h"===s.orientation,c=[];if(!1===e)for(i=0;i<n.length;i++)n[i].selected=0;else for(i=0;i<n.length;i++){var g=n[i],u="ct"in g?g.ct:ZJ(g,r,a,l,o);e.contains(u,!1,i,t)?(c.push({pointNumber:i,x:r.c2d(g.x),y:a.c2d(g.y)}),g.selected=1):g.selected=0}return c},eventData:function(t,e,i,n,r){if(t.x="xVal"in e?e.xVal:e.x,t.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(t.z=e.zLabelVal),e.xa&&(t.xaxis=e.xa),e.ya&&(t.yaxis=e.ya),!(i.cumulative||{}).enabled){var a,s=Array.isArray(r)?n[0].pts[r[0]][r[1]]:n[r].pts;if(t.pointNumbers=s,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex,i._indexToPoints){a=[];for(var o=0;o<s.length;o++)a=a.concat(i._indexToPoints[s[o]])}else a=s;t.pointIndices=a}return t},moduleType:"trace",name:"histogram",basePlotModule:zZ,categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}},DJ=NJ,XJ=t({__proto__:null,default:Ds(DJ)},[DJ]);function HJ(t,e,i){var n=e,r=function(t,e){return atob(t)}(t),a=r.indexOf("\n",10)+1,s=r.substring(a)+"//# sourceMappingURL="+n,o=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(o)}function WJ(t,e,i){var n;return function(i){return n=n||HJ(t,e),new Worker(n,i)}}var kJ=WJ("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgdmFyIGRpc3RyaWJ1dGlvbnMkMSA9IHtleHBvcnRzOiB7fX07CgogIHZhciBkaXN0cmlidXRpb25zID0gZGlzdHJpYnV0aW9ucyQxLmV4cG9ydHM7CiAgKGZ1bmN0aW9uIChtb2R1bGUpIHsKCiAgICAvLyBBIG51bWJlciBvZiBsb2cgcHJvYmFiaWxpdHkgZGVuc2l0eSBmdW5jdGlvbnMgKFBERikuIE5hbWluZyBhbmQgcGFyYW1ldGVyaXphdGlvbgogICAgLy8gc2hvdWxkIG1hdGNoIFIncywgZXhjZXB0IGZvciB0aGF0IGFsbCBmdW5jdGlvbnMgcmVzaWRlIGluIGFuIGxkIG9iamVjdCAoCiAgICAvLyBhcyBpbiAibG9nIGRlbnNpdHkiKSwgc28gdG8gZ2V0IGEgbm9ybWFsIGxvZyBkZW5zaXR5IHlvdSB3b3VsZCB3cml0ZQogICAgLy8gbGQubm9ybSguLi4pLgogICAgLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0CiAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0Lykgd2hpY2ggaW5jbHVkZXMgUERGIGZvciBtYW55IGNvbW1vbiBwcm9iYWJpbGl0eQogICAgLy8gZGlzdHJpYnV0aW9ucy4gV2hhdCBJIGhhdmUgZG9uZSBpcyBvbmx5IHRvIGNvbnZlcnQgdGhlc2UgdG8gbG9nIFBERnMuCgogICAgLyoKICAgIE9yaWdpbmFsIHdvcmsgQ29weXJpZ2h0IChjKSAyMDEzIGpTdGF0CiAgICBNb2RpZmllZCB3b3JrIENvcHlyaWdodCAoYykgMjAxNSBSYXNtdXMgQsOlw6V0aCAKICAgIAlQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CiAgICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAogICAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwogICAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAogICAgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiAgICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAgCVRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCiAgICBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgIAlUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgogICAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKICAgIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCiAgICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCiAgICBUSEUgU09GVFdBUkUuCiAgICAJKi8KCiAgICAvLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbToKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanMKICAgIC8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLAogICAgLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuCiAgICAvLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWwKICAgIC8vIG9iamVjdCBsZCAuCiAgICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCiAgICAgICAgLy8gbGlrZSBOb2RlLgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTsKICAgICAgfQogICAgfSkoZGlzdHJpYnV0aW9ucywgZnVuY3Rpb24gKCkgewogICAgICAvLyBPYmplY3QgdG8gaG9sZCB0aGUgZnVuY3Rpb25zIHRvIGJlIGV4cG9ydGVkLgogICAgICB2YXIgbGQgPSB7fTsKCiAgICAgIC8vLy8vLy8vLy8gSGVscGVyIGZ1bmN0aW9ucyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICB2YXIgbGdhbW1hID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICB2YXIgaiA9IDA7CiAgICAgICAgdmFyIGNvZiA9IFs3Ni4xODAwOTE3Mjk0NzE0NiwgLTg2LjUwNTMyMDMyOTQxNjc4LCAyNC4wMTQwOTgyNDA4MzA5MSwgLTEuMjMxNzM5NTcyNDUwMTU1LCAwLjEyMDg2NTA5NzM4NjYxNzllLTIsIC01Mzk1MjM5Mzg0OTUzZS0xOF07CiAgICAgICAgdmFyIHNlciA9IDEuMDAwMDAwMDAwMTkwMDE1OwogICAgICAgIHZhciB4eCwgeSwgdG1wOwogICAgICAgIHRtcCA9ICh5ID0geHggPSB4KSArIDUuNTsKICAgICAgICB0bXAgLT0gKHh4ICsgMC41KSAqIGxvZyh0bXApOwogICAgICAgIGZvciAoOyBqIDwgNjsgaisrKSBzZXIgKz0gY29mW2pdIC8gKyt5OwogICAgICAgIHJldHVybiBsb2coMi41MDY2MjgyNzQ2MzEwMDA1ICogc2VyIC8geHgpIC0gdG1wOwogICAgICB9OwogICAgICBsZC5sZ2FtbWEgPSBsZ2FtbWE7CiAgICAgIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbiA8IDAgPyBOYU4gOiBsZ2FtbWEobiArIDEpOwogICAgICB9OwogICAgICBsZC5sZmFjdG9yaWFsID0gbGZhY3RvcmlhbDsKICAgICAgdmFyIGxjaG9vc2UgPSBmdW5jdGlvbiAobiwgaykgewogICAgICAgIHJldHVybiBsZmFjdG9yaWFsKG4pIC0gbGZhY3RvcmlhbChrKSAtIGxmYWN0b3JpYWwobiAtIGspOwogICAgICB9OwogICAgICBsZC5sY2hvb3NlID0gbGNob29zZTsKICAgICAgdmFyIGxiZXRhID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gbGdhbW1hKGEpICsgbGdhbW1hKGIpIC0gbGdhbW1hKGEgKyBiKTsKICAgICAgfTsKICAgICAgbGQubGJldGEgPSBsYmV0YTsKICAgICAgdmFyIGxvZyA9IE1hdGgubG9nOwogICAgICB2YXIgZXhwID0gTWF0aC5leHA7CiAgICAgIHZhciBhYnMgPSBNYXRoLmFiczsKICAgICAgdmFyIHBvdyA9IE1hdGgucG93OwogICAgICB2YXIgc3FydCA9IE1hdGguc3FydDsKICAgICAgdmFyIHBpID0gTWF0aC5QSTsKCiAgICAgIC8vLy8vLy8vLy8gQ29udGlub3VzIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIGxkLmJldGEgPSBmdW5jdGlvbiAoeCwgc2hhcGUxLCBzaGFwZTIpIHsKICAgICAgICBpZiAoeCA+IDEgfHwgeCA8IDApIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfQogICAgICAgIGlmIChzaGFwZTEgPT09IDEgJiYgc2hhcGUyID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIChzaGFwZTEgLSAxKSAqIGxvZyh4KSArIChzaGFwZTIgLSAxKSAqIGxvZygxIC0geCkgLSBsYmV0YShzaGFwZTEsIHNoYXBlMik7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5jYXVjaHkgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CiAgICAgICAgcmV0dXJuIGxvZyhzY2FsZSkgLSBsb2cocG93KHggLSBsb2NhdGlvbiwgMikgKyBwb3coc2NhbGUsIDIpKSAtIGxvZyhwaSk7CiAgICAgIH07CiAgICAgIGxkLm5vcm0gPSBmdW5jdGlvbiAoeCwgbWVhbiwgc2QpIHsKICAgICAgICByZXR1cm4gLTAuNSAqIGxvZygyICogcGkpIC0gbG9nKHNkKSAtIHBvdyh4IC0gbWVhbiwgMikgLyAoMiAqIHNkICogc2QpOwogICAgICB9OwoKICAgICAgLy8gQSBiaXZhcmlhdGUgTm9ybWFsIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJpemVkIGJ5IGFycmF5cyBvZiB0d28gbWVhbnMgYW5kIFNEcywgYW5kIAogICAgICAvLyB0aGUgY29ycmVsYXRpb24uCiAgICAgIGxkLmJpdmFybm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCwgY29ycikgewogICAgICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgKyBwb3coeFsxXSAtIG1lYW5bMV0sIDIpIC8gcG93KHNkWzFdLCAyKSAtIDIgKiBjb3JyICogKHhbMF0gLSBtZWFuWzBdKSAqICh4WzFdIC0gbWVhblsxXSkgLyAoc2RbMF0gKiBzZFsxXSk7CiAgICAgICAgdmFyIG5vcm1hbGl6aW5nX2ZhY3RvciA9IC0obG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgMC41ICogbG9nKDEgLSBwb3coY29yciwgMikpKTsKICAgICAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSkpOwogICAgICAgIHJldHVybiBiaXZhcl9sb2dfZGVuczsKICAgICAgfTsKICAgICAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKICAgICAgICByZXR1cm4gLWFicyh4IC0gbG9jYXRpb24pIC8gc2NhbGUgLSBsb2coMiAqIHNjYWxlKTsKICAgICAgfTsKICAgICAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7CiAgICAgIGxkLmdhbW1hID0gZnVuY3Rpb24gKHgsIHNoYXBlLCByYXRlKSB7CiAgICAgICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7CiAgICAgICAgaWYgKHggPCAwKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICBpZiAoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgewogICAgICAgICAgcmV0dXJuIC1sb2coc2NhbGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gKHNoYXBlIC0gMSkgKiBsb2coeCkgLSB4IC8gc2NhbGUgLSBsZ2FtbWEoc2hhcGUpIC0gc2hhcGUgKiBsb2coc2NhbGUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHNjYWxlKSB7CiAgICAgICAgaWYgKHggPD0gMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIC0oc2hhcGUgKyAxKSAqIGxvZyh4KSAtIHNjYWxlIC8geCAtIGxnYW1tYShzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSk7CiAgICAgIH07CiAgICAgIGxkLmxub3JtID0gZnVuY3Rpb24gKHgsIG1lYW5sb2csIHNkbG9nKSB7CiAgICAgICAgaWYgKHggPD0gMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIC1sb2coeCkgLSAwLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZGxvZykgLSBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpOwogICAgICB9OwogICAgICBsZC5wYXJldG8gPSBmdW5jdGlvbiAoeCwgc2NhbGUsIHNoYXBlKSB7CiAgICAgICAgaWYgKHggPCBzY2FsZSkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTsKICAgICAgfTsKICAgICAgbGQudCA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUsIGRmKSB7CiAgICAgICAgZGYgPSBkZiA+IDFlMTAwID8gMWUxMDAgOiBkZjsKICAgICAgICByZXR1cm4gbGdhbW1hKChkZiArIDEpIC8gMikgLSBsZ2FtbWEoZGYgLyAyKSAtIGxvZyhzcXJ0KHBpICogZGYpICogc2NhbGUpICsgbG9nKHBvdygxICsgMSAvIGRmICogcG93KCh4IC0gbG9jYXRpb24pIC8gc2NhbGUsIDIpLCAtKGRmICsgMSkgLyAyKSk7CiAgICAgIH07CgogICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlCiAgICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIHdlaWJ1bGwgZGlzdHJpYnV0aW9uOiAKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmMKICAgICAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uICh4LCBzaGFwZSwgc2NhbGUpIHsKICAgICAgICBpZiAoeCA8IDApIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgaWYgKHggPT09IDAgJiYgc2hhcGUgPCAxKSByZXR1cm4gSW5maW5pdHk7CiAgICAgICAgdmFyIHRtcDEgPSBwb3coeCAvIHNjYWxlLCBzaGFwZSAtIDEpOwogICAgICAgIHZhciB0bXAyID0gdG1wMSAqICh4IC8gc2NhbGUpOwogICAgICAgIHJldHVybiAtdG1wMiArIGxvZyhzaGFwZSAqIHRtcDEgLyBzY2FsZSk7CiAgICAgIH07CgogICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlCiAgICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIGxvZ2lzdGljIGRpc3RyaWJ1dGlvbjogCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kbG9naXMuYwogICAgICBsZC5sb2dpcyA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKICAgICAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpOwogICAgICAgIHZhciBlID0gZXhwKC14KTsKICAgICAgICB2YXIgZiA9IDEuMCArIGU7CiAgICAgICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7CiAgICAgIH07CiAgICAgIGxkLmRpcmljaGxldCA9IGZ1bmN0aW9uICh4LCBhbHBoYSkgewogICAgICAgIHZhciBzdW1fYWxwaGEgPSAwOwogICAgICAgIHZhciBzdW1fbGdhbW1hX2FscGhhID0gMDsKICAgICAgICB2YXIgc3VtX2FscGhhX3N1Yl8xX2xvZ194ID0gMDsKICAgICAgICB2YXIgbiA9IGFscGhhLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgc3VtX2FscGhhICs9IGFscGhhW2ldOwogICAgICAgICAgc3VtX2xnYW1tYV9hbHBoYSArPSBsZ2FtbWEoYWxwaGFbaV0pOwogICAgICAgICAgc3VtX2FscGhhX3N1Yl8xX2xvZ194ICs9IChhbHBoYVtpXSAtIDEpICogbG9nKHhbaV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGdhbW1hKHN1bV9hbHBoYSkgLSBzdW1fbGdhbW1hX2FscGhhICsgc3VtX2FscGhhX3N1Yl8xX2xvZ194OwogICAgICB9OwogICAgICBsZC5leHAgPSBmdW5jdGlvbiAoeCwgcmF0ZSkgewogICAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhyYXRlKSAtIHJhdGUgKiB4OwogICAgICB9OwogICAgICBsZC51bmlmID0gZnVuY3Rpb24gKHgsIG1pbiwgbWF4KSB7CiAgICAgICAgcmV0dXJuIHggPCBtaW4gfHwgeCA+IG1heCA/IC1JbmZpbml0eSA6IGxvZygxIC8gKG1heCAtIG1pbikpOwogICAgICB9OwoKICAgICAgLy8vLy8vLy8vLyBEaXNjcmV0ZSBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy8KICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIGxkLmJlcm4gPSBmdW5jdGlvbiAoeCwgcHJvYikgewogICAgICAgIHJldHVybiAhKHggPT09IDAgfHwgeCA9PT0gMSkgPyAtSW5maW5pdHkgOiBsb2coeCAqIHByb2IgKyAoMSAtIHgpICogKDEgLSBwcm9iKSk7CiAgICAgIH07CiAgICAgIGxkLmNhdCA9IGZ1bmN0aW9uICh4LCBwcm9icykgewogICAgICAgIGlmICh4IDwgMSB8fCB4ID4gcHJvYnMubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbG9nKHByb2JzW3ggLSAxXSk7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5iaW5vbSA9IGZ1bmN0aW9uICh4LCBzaXplLCBwcm9iKSB7CiAgICAgICAgaWYgKHggPiBzaXplIHx8IHggPCAwKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICBpZiAocHJvYiA9PT0gMCB8fCBwcm9iID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gc2l6ZSAqIHByb2IgPT09IHggPyAwIDogLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTsKICAgICAgfTsKICAgICAgbGQubmJpbm9tID0gZnVuY3Rpb24gKHgsIHNpemUsIHByb2IpIHsKICAgICAgICBpZiAoeCA8IDApIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpOwogICAgICB9OwogICAgICBsZC5oeXBlciA9IGZ1bmN0aW9uICh4LCBtLCBuLCBrKSB7CiAgICAgICAgaWYgKHggPCAwIHx8IHggPiBrKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2UobiwgayAtIHgpIC0gbGNob29zZShtICsgbiwgayk7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5wb2lzID0gZnVuY3Rpb24gKHgsIGxhbWJkYSkgewogICAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhsYW1iZGEpICogeCAtIGxhbWJkYSAtIGxmYWN0b3JpYWwoeCk7CiAgICAgIH07CiAgICAgIHJldHVybiBsZDsKICAgIH0pOwogIH0pKGRpc3RyaWJ1dGlvbnMkMSk7CiAgdmFyIGRpc3RyaWJ1dGlvbnNFeHBvcnRzID0gZGlzdHJpYnV0aW9ucyQxLmV4cG9ydHM7CgogIHZhciBtY21jJDEgPSB7ZXhwb3J0czoge319OwoKICB2YXIgbWNtYyA9IG1jbWMkMS5leHBvcnRzOwogIChmdW5jdGlvbiAobW9kdWxlKSB7CgogICAgLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206CiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzCiAgICAvLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3NlciwKICAgIC8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLgogICAgLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsCiAgICAvLyBvYmplY3QgbWNtYyAuCiAgICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCiAgICAgICAgLy8gbGlrZSBOb2RlLgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICAgICAgcm9vdC5tY21jID0gZmFjdG9yeSgpOwogICAgICB9CiAgICB9KShtY21jLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vLyBUaGUgYWN0dWFsIG1vZHVsZSBjb2RlIHN0YXJ0cyBoZXJlIC8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gIAoKICAgICAgLy8vLy8vLy8vLyBIZWxwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8KICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXggKi8KICAgICAgdmFyIHJ1bmlmID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7CiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjsKICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqLwogICAgICB2YXIgcnVuaWZfZGlzY3JldGUgPSBmdW5jdGlvbiAobWluLCBtYXgpIHsKICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjsKICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkCiAgICAgICAqICBieSBtZWFuIGFuZCBzZC4gCiAgICAgICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovCiAgICAgIHZhciBybm9ybSA9IGZ1bmN0aW9uIChtZWFuLCBzZCkgewogICAgICAgIHZhciB1LCB2LCB4LCB5LCBxOwogICAgICAgIGRvIHsKICAgICAgICAgIHUgPSBNYXRoLnJhbmRvbSgpOwogICAgICAgICAgdiA9IDEuNzE1NiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTsKICAgICAgICAgIHggPSB1IC0gMC40NDk4NzE7CiAgICAgICAgICB5ID0gTWF0aC5hYnModikgKyAwLjM4NjU5NTsKICAgICAgICAgIHEgPSB4ICogeCArIHkgKiAoMC4xOTYwMCAqIHkgLSAwLjI1NDcyICogeCk7CiAgICAgICAgfSB3aGlsZSAocSA+IDAuMjc1OTcgJiYgKHEgPiAwLjI3ODQ2IHx8IHYgKiB2ID4gLTQgKiBNYXRoLmxvZyh1KSAqIHUgKiB1KSk7CiAgICAgICAgcmV0dXJuIHYgLyB1ICogc2QgKyBtZWFuOwogICAgICB9OwoKICAgICAgLyoqIFJldHVybnMgYSBkZWVwIGNsb25lIG9mIHNyYywgc29ydCBvZi4uLiBJdCBvbmx5IGNvcGllcyBhIGxpbWl0ZWQKICAgICAgICogbnVtYmVyIG9mIHR5cGVzIGFuZCwgZm9yIGV4YW1wbGUsIGZ1bmN0aW9uIGFyZSBub3QgY29waWVkLiAKICAgICAgICogRnJvbSBodHRwOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtY2xvbmUKICAgICAgICovCiAgICAgIHZhciBkZWVwX2Nsb25lID0gZnVuY3Rpb24gKHNyYykgewogICAgICAgIGZ1bmN0aW9uIG1peGluKGRlc3QsIHNvdXJjZSwgY29weUZ1bmMpIHsKICAgICAgICAgIHZhciBuYW1lLAogICAgICAgICAgICBzLAogICAgICAgICAgICBlbXB0eSA9IHt9OwogICAgICAgICAgZm9yIChuYW1lIGluIHNvdXJjZSkgewogICAgICAgICAgICAvLyB0aGUgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpIGNvbmRpdGlvbiBhdm9pZHMgY29weWluZyBwcm9wZXJ0aWVzIGluICJzb3VyY2UiCiAgICAgICAgICAgIC8vIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGUuCSBGb3IgZXhhbXBsZSwgaWYgZGVzdCBoYXMgYSBjdXN0b20gdG9TdHJpbmcoKSBtZXRob2QsCiAgICAgICAgICAgIC8vIGRvbid0IG92ZXJ3cml0ZSBpdCB3aXRoIHRoZSB0b1N0cmluZygpIG1ldGhvZCB0aGF0IHNvdXJjZSBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlCiAgICAgICAgICAgIHMgPSBzb3VyY2VbbmFtZV07CiAgICAgICAgICAgIGlmICghKG5hbWUgaW4gZGVzdCkgfHwgZGVzdFtuYW1lXSAhPT0gcyAmJiAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykpIHsKICAgICAgICAgICAgICBkZXN0W25hbWVdID0gY29weUZ1bmMgPyBjb3B5RnVuYyhzKSA6IHM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0KICAgICAgICBpZiAoIXNyYyB8fCB0eXBlb2Ygc3JjICE9ICJvYmplY3QiIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpID09PSAiW29iamVjdCBGdW5jdGlvbl0iKSB7CiAgICAgICAgICAvLyBudWxsLCB1bmRlZmluZWQsIGFueSBub24tb2JqZWN0LCBvciBmdW5jdGlvbgogICAgICAgICAgcmV0dXJuIHNyYzsgLy8gYW55dGhpbmcKICAgICAgICB9CiAgICAgICAgaWYgKHNyYy5ub2RlVHlwZSAmJiAiY2xvbmVOb2RlIiBpbiBzcmMpIHsKICAgICAgICAgIC8vIERPTSBOb2RlCiAgICAgICAgICByZXR1cm4gc3JjLmNsb25lTm9kZSh0cnVlKTsgLy8gTm9kZQogICAgICAgIH0KICAgICAgICBpZiAoc3JjIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAgICAgLy8gRGF0ZQogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHNyYy5nZXRUaW1lKCkpOyAvLyBEYXRlCiAgICAgICAgfQogICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgIC8vIFJlZ0V4cAogICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc3JjKTsgLy8gUmVnRXhwCiAgICAgICAgfQogICAgICAgIHZhciByLCBpLCBsOwogICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgLy8gYXJyYXkKICAgICAgICAgIHIgPSBbXTsKICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICAgICAgICAgIGlmIChpIGluIHNyYykgewogICAgICAgICAgICAgIHIucHVzaChkZWVwX2Nsb25lKHNyY1tpXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGdlbmVyaWMgb2JqZWN0cwogICAgICAgICAgciA9IHNyYy5jb25zdHJ1Y3RvciA/IG5ldyBzcmMuY29uc3RydWN0b3IoKSA6IHt9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTsKICAgICAgfTsKCiAgICAgIC8qKiBTcGVjaWFsaXplZCBjbG9uZSBmdW5jdGlvbiB0aGF0IG9ubHkgY2xvbmVzIHNjYWxhcnMgYW5kIG5lc3RlZCBhcnJheXMgd2hlcmUKICAgICAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvbgogICAgICAgKiBpcyBtZWFudCBhcyBhIGZhc3Qgd2F5IG9mIGNsb25pbmcgcGFyYW1ldGVyIGRyYXdzIHdpdGhpbiB0aGUgbWNtYyBzYW1wbGluZwogICAgICAgKiBsb29wLgogICAgICAgKi8KICAgICAgdmFyIGNsb25lX3BhcmFtX2RyYXcgPSBmdW5jdGlvbiAoeCkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHgpKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4WzBdKSkgewogICAgICAgICAgICAvLyB4IGlzIGFuIGFycmF5IG9mIGFycmF5cyBzbyB3ZSBuZWVkIHRvIGNsb25lIGl0IHJlY3Vyc2l2ZWx5CiAgICAgICAgICAgIHZhciB4X2NvcHkgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB4X2NvcHkucHVzaChjbG9uZV9wYXJhbV9kcmF3KHhbaV0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4geF9jb3B5OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBhcnJheXMgb2Ygc2NhbGFycwogICAgICAgICAgICByZXR1cm4geC5zbGljZSgwKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXIKICAgICAgICAgIHJldHVybiB4OwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgbnVtYmVyLgogICAgICAgKi8KICAgICAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uIChvYmplY3QpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PSAibnVtYmVyIiB8fCB0eXBlb2Ygb2JqZWN0ID09ICJvYmplY3QiICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGEgKHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwvbmVzdGVkKSBhcnJheS4KICAgICAgICogQHBhcmFtIGRpbSAtIEFuIGFycmF5IGdpdmluZyB0aGUgZGltZW5zaW9uIG9mIHRoZSBhcnJheS4gRm9yIGV4YW1wbGUsCiAgICAgICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LgogICAgICAgKiBAcGFyYW0gaW5pdCAtIEEgdmFsdWUgb3IgYSBmdW5jdGlvbiB1c2VkIHRvIGZpbGwgaW4gdGhlIGVhY2ggZWxlbWVudCBpbgogICAgICAgKiAgIHRoZSBhcnJheS4gSWYgaXQgaXMgYSBmdW5jdGlvbiBpdCBzaG91bGQgdGFrZSBubyBhcmd1bWVudHMsIGl0IHdpbGwgYmUgCiAgICAgICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0bwogICAgICAgKiAgIGZpbGwgaW4gZWFjaCBlbGVtZW50LgogICAgICAgKiBAZXhhbXBsZSAKICAgICAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXQogICAgICAgKiBjcmVhdGVfYXJyYXkoWzIsM10sIDEpCiAgICAgICAqLwogICAgICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24gKGRpbSwgaW5pdCkgewogICAgICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoZGltWzBdKTsKICAgICAgICB2YXIgaTsKICAgICAgICBpZiAoZGltLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAvLyBGaWxsIGl0IHVwIHdpdGggaW5pdAogICAgICAgICAgaWYgKHR5cGVvZiBpbml0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICAgIGFycltpXSA9IGluaXQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgYXJyW2ldID0gaW5pdDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZGltLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICBhcnJbaV0gPSBjcmVhdGVfYXJyYXkoZGltLnNsaWNlKDEpLCBpbml0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgImNyZWF0ZV9hcnJheSBjYW4ndCBjcmVhdGUgYSBkaW1lbnNpb25sZXNzIGFycmF5IjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFycjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciAKICAgICAgICogZXhhbXBsZSwgYXJyYXlfZGltKCBbWzEsIDJdLCBbMSwgMl1dICkgc2hvdWxkIHJldHVybiBbMiwgMl0KICAgICAgICogQXNzdW1lcyB0aGF0IGFsbCBhcnJheXMgaW5zaWRlIGFub3RoZXIgYXJyYXkgYXJlIG9mIHRoZSBzYW1lIGxlbmd0aC4KICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gU2hvdWxkIHJldHVybiBbNCwgMiwgMV0KICAgICAgICogYXJyYXlfZGltKGNyZWF0ZV9hcnJheShbNCwgMiwgMV0sIDApKQogICAgICAgKi8KICAgICAgdmFyIGFycmF5X2RpbSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYVswXSkpIHsKICAgICAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gW2EubGVuZ3RoXTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQ2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsIGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50cwogICAgICAgKiBhcyBqdWRnZWQgYnkgdGhlICI9PSIgb3BlcmF0b3IuIFJldHVybnMgdHJ1ZSBvciBmYWxzZS4KICAgICAgICogQWRhcHRlZCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE0ODUzOTc0LzEwMDE4NDgKICAgICAgICovCiAgICAgIHZhciBhcnJheV9lcXVhbCA9IGZ1bmN0aW9uIChhMSwgYTIpIHsKICAgICAgICBpZiAoYTEubGVuZ3RoICE9IGEyLmxlbmd0aCkgcmV0dXJuIGZhbHNlOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5cwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYTFbaV0pICYmIEFycmF5LmlzQXJyYXkoYTJbaV0pKSB7CiAgICAgICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5cwogICAgICAgICAgICBpZiAoIWFycmF5X2VxdWFsKGExW2ldLCBhMltpXSkpIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gZWxzZSBpZiAoYTFbaV0gIT0gYTJbaV0pIHsKICAgICAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogVHJhdmVyc2VzIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCAibGVhZiBub2RlcyIsIAogICAgICAgKiB0aGF0IGlzLCB2YWx1ZXMgdGhhdCBhcmUgbm90IGFycmF5cy4gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2FtZSBzaXplIGFzCiAgICAgICAqIGEuCiAgICAgICAqLwogICAgICB2YXIgbmVzdGVkX2FycmF5X2FwcGx5ID0gZnVuY3Rpb24gKGEsIGZ1bikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGEubGVuZ3RoKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmdW4oYSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLyoqIFJhbmRvbWl6aW5nIHRoZSBhcnJheSBlbGVtZW50IG9yZGVyIGluLXBsYWNlLiBVc2luZyBEdXJzdGVuZmVsZAogICAgICAgKiBzaHVmZmxlIGFsZ29yaXRobS4gQWRhcHRlZCBmcm9tIGhlcmU6IAogICAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4CiAgICAgICAqLwogICAgICBmdW5jdGlvbiBzaHVmZmxlX2FycmF5KGFycmF5KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7CiAgICAgICAgICB2YXIgdGVtcCA9IGFycmF5W2ldOwogICAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTsKICAgICAgICAgIGFycmF5W2pdID0gdGVtcDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFycmF5OwogICAgICB9CgogICAgICAvKioKICAgICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5CiAgICAgICAqIG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgImxlYWYgbm9kZXMiIGFuZCByZXR1cm5zIGFuIGFycmF5IAogICAgICAgKiBvZiB0aGUgc2FtZSBzaXplIGFzIGEuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseQogICAgICAgKiBicmFuY2hlcyByYW5kb21seS4KICAgICAgICovCiAgICAgIHZhciBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5ID0gZnVuY3Rpb24gKGEsIGZ1bikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgICB2YXIgbGVuID0gYS5sZW5ndGg7CiAgICAgICAgICB2YXIgaTsKICAgICAgICAgIHZhciBhcnJheV9pcyA9IFtdOwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIGFycmF5X2lzW2ldID0gaTsKICAgICAgICAgIH0KICAgICAgICAgIHNodWZmbGVfYXJyYXkoYXJyYXlfaXMpOwogICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhcnJheV9pID0gYXJyYXlfaXNbaV07CiAgICAgICAgICAgIHJlc3VsdFthcnJheV9pXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2FycmF5X2ldLCBmdW4pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZ1bihhKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQWxsb3dzIGEgcHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmdWx0cyBjYW4gYmUKICAgICAgICogb3ZlcnJpZGRlbiBieSBhbiBvcHRpb25zIG9iamVjdC4KICAgICAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmcKICAgICAgICogIEBwYXJhbSBteV9vcHRpb25zIC0gYW4gb3B0aW9uIG9iamVjdCB0aGF0IGNvdWxkIGhhdmUgb3B0aW9uX25hbWUgCiAgICAgICAqICAgIGFzIGEgbWVtYmVyLgogICAgICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgCiAgICAgICAqICAgaXMgbm90IGRlZmluZWQgaW4gbXlfb3B0aW9ucy4KICAgICAgICogQGV4YW1wbGUKICAgICAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9CiAgICAgICAqIHZhciBwaSA9IGdldF9vcHRpb24oInBpIiwgbXlfb3B0aW9ucywgMy4xNCkKICAgICAgICovCiAgICAgIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuCiAgICAgIC8vIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LiBGb3IgZXhhbXBsZToKICAgICAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbigicGkiLCBteV9vcHRpb25zLCAzLjE0KQogICAgICB2YXIgZ2V0X29wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7CiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uX25hbWUpICYmIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSB1bmRlZmluZWQgJiYgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IG51bGwgPyBvcHRpb25zW29wdGlvbl9uYW1lXSA6IGRlZmF1bF92YWx1ZTsKICAgICAgfTsKCiAgICAgIC8qKiBWZXJzaW9uIG9mIGdldF9vcHRpb24gd2hlcmUgdGhlIG9wdGlvbiBzaG91bGQgYmUgYSBvbmUgb3IgbXVsdGktZGltZW5zaW9uYWwKICAgICAgICogYXJyYXkgYW5kIHdoZXJlIHRoZSBkZWZhdWx0IGNhbiBiZSBvdmVycmlkZGVuIGVpdGhlciBieSBhIHNjYWxhciBvciBieSBhbiBhcnJheS4KICAgICAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggCiAgICAgICAqIGRpbSBkaW1lbnNpb25zLgogICAgICAgKiAKICAgICAgICovCiAgICAgIHZhciBnZXRfbXVsdGlkaW1fb3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkaW0sIGRlZmF1bF92YWx1ZSkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldF9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSk7CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgdmFsdWUgPSBjcmVhdGVfYXJyYXkoZGltLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGlmICghYXJyYXlfZXF1YWwoYXJyYXlfZGltKHZhbHVlKSwgZGltKSkgewogICAgICAgICAgdGhyb3cgIlRoZSBvcHRpb24gIiArIG9wdGlvbl9uYW1lICsgIiBpcyBvZiBkaW1lbnNpb24gWyIgKyBhcnJheV9kaW0odmFsdWUpICsgIl0gYnV0IHNob3VsZCBiZSBbIiArIGRpbSArICJdLiI7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfTsKCiAgICAgIC8vLy8vLy8vLy8gRnVuY3Rpb25zIGZvciBoYW5kbGluZyBwYXJhbWV0ZXIgb2JqZWN0cyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICAvKioKICAgICAgICogUmV0dXJucyBhIGZpeGVkIChzYW1lIGV2ZXJ5IHRpbWUpIG51bWJlciB0aGF0IGNvdWxkIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZQogICAgICAgKiBhIHBhcmFtZXRlciBvZiBhIGNlcnRhaW4gdHlwZSwgcG9zc2libHkgd2l0aCBsb3dlciBhbmQgdXBwZXIgYm91bmRzLgogICAgICAgKiBUaGUgcG9zc2lsZSB0eXBlcyBhcmUgInJlYWwiLCAiaW50IiwgYW5kICJiaW5hcnkiLgogICAgICAgKi8KICAgICAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbiAodHlwZSwgbG93ZXIsIHVwcGVyKSB7CiAgICAgICAgaWYgKGxvd2VyID4gdXBwZXIpIHsKICAgICAgICAgIHRocm93ICJDYW4gbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIHdoZXJlIGxvd2VyIGJvdW5kID4gdXBwZXIgYm91bmQiOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZSA9PT0gInJlYWwiKSB7CiAgICAgICAgICBpZiAobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgcmV0dXJuIDAuNTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPT09IC1JbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gdXBwZXIgLSAwLjU7CiAgICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gbG93ZXIgKyAwLjU7CiAgICAgICAgICB9IGVsc2UgaWYgKGxvd2VyIDw9IHVwcGVyKSB7CiAgICAgICAgICAgIHJldHVybiAobG93ZXIgKyB1cHBlcikgLyAyOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gImludCIpIHsKICAgICAgICAgIGlmIChsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPT09IC1JbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gdXBwZXIgLSAxOwogICAgICAgICAgfSBlbHNlIGlmICh1cHBlciA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgcmV0dXJuIGxvd2VyICsgMTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPD0gdXBwZXIpIHsKICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGxvd2VyICsgdXBwZXIpIC8gMik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiYmluYXJ5IikgewogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfQogICAgICAgIHRocm93ICJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSAiICsgdHlwZSArICJbIiArIGxvd2VyICsgIiwgIiArIHVwcGVyICsgIl0iOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIAogICAgICAgKiBhbmQgaW5pdGlhbGl6ZXMgbm9uLWluaXRpYWxpemVkIHBhcmFtZXRlcnMuIFRoaXMgbW9kaWZpZWQgdmVyc2lvbiBvZgogICAgICAgKiBwYXJhbXNfdG9fY29tcGxldGUgaXMgcmV0dXJuZWQgYXMgYSBkZWVwIGNvcHkgYW5kIG5vdCBtb2RpZmllZCBpbiBwbGFjZS4KICAgICAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlCiAgICAgICAqIGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikgdGhhdCBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIG51bWJlciAKICAgICAgICogKGxpa2UgcGFyYW1faW5pdF9maXhlZCwgZm9yIGV4YW1wbGUpLgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiB2YXIgcGFyYW1zID0geyAibXUiOiB7InR5cGUiOiAicmVhbCJ9IH0KICAgICAgICogcGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHBhcmFtcyk7CiAgICAgICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOgogICAgICAgKiAvLyAgeyJtdSI6IHsgInR5cGUiOiAicmVhbCIsICJkaW0iOiBbMV0sICJ1cHBlciI6IEluZmluaXR5LAogICAgICAgKiAvLyAgICAgICAgICAgImxvd2VyIjogLUluZmluaXR5LCAiaW5pdCI6IDAuNSB9fQogICAgICAgKi8KICAgICAgdmFyIGNvbXBsZXRlX3BhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXNfdG9fY29tcGxldGUsIHBhcmFtX2luaXQpIHsKICAgICAgICB2YXIgcGFyYW1zID0gZGVlcF9jbG9uZShwYXJhbXNfdG9fY29tcGxldGUpOwogICAgICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7CiAgICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwYXJhbV9uYW1lKSkgY29udGludWU7CiAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbcGFyYW1fbmFtZV07CiAgICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ0eXBlIikpIHsKICAgICAgICAgICAgcGFyYW0udHlwZSA9ICJyZWFsIjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghcGFyYW0uaGFzT3duUHJvcGVydHkoImRpbSIpKSB7CiAgICAgICAgICAgIHBhcmFtLmRpbSA9IFsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc19udW1iZXIocGFyYW0uZGltKSkgewogICAgICAgICAgICBwYXJhbS5kaW0gPSBbcGFyYW0uZGltXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwYXJhbS50eXBlID09ICJiaW5hcnkiKSB7CiAgICAgICAgICAgIHBhcmFtLnVwcGVyID0gMTsKICAgICAgICAgICAgcGFyYW0ubG93ZXIgPSAwOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eSgidXBwZXIiKSkgewogICAgICAgICAgICBwYXJhbS51cHBlciA9IEluZmluaXR5OwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eSgibG93ZXIiKSkgewogICAgICAgICAgICBwYXJhbS5sb3dlciA9IC1JbmZpbml0eTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwYXJhbS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpKSB7CiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMganVzdCBhIG51bWJlciBvciBhIG5lc3RlZCBhcnJheSB3ZSBsZWF2ZSBpdCBhbG9uZSwgYnV0IGlmLi4uCiAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAvLyBwYXJhbS5pbml0IGlzIGEgZnVuY3Rpb24sIHVzZSB0aGF0IHRvIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlci4KICAgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW0uaW5pdCgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHsKICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgd2hlcmUgdGhlIHBhcmFtLmluaXQgZXhpc3QgYnV0CiAgICAgICAgICAgICAgLy8gaXMgbm90IGFuIGFycmF5LiBUaGVuIGFzc3VtZSBpdCBpcyBhIG51bWJlciBvciBhIGZ1bmN0aW9uIGFuZCB1c2UKICAgICAgICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuCiAgICAgICAgICAgICAgcGFyYW0uaW5pdCA9IGNyZWF0ZV9hcnJheShwYXJhbS5kaW0sIHBhcmFtLmluaXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGRlZmF1bHQgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uCiAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXJhbXM7CiAgICAgIH07CgogICAgICAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKgogICAgICAgKiBAaW50ZXJmYWNlCiAgICAgICAqIEEgU3RlcHBlciBpcyBhbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIHB1c2hpbmcgYXJvdW5kIG9uZQogICAgICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvbgogICAgICAgKiBkZWZpbmVkIGJ5IHRoZSBsb2cgcG9zdGVyaW9yLiBUaGlzIGRlZmluZXMgdGhlIFN0ZXBwZXIgImludGVyZmFjZSIsCiAgICAgICAqIHdoZXJlICJpbnRlcmZhY2UiIG1lYW5zIHRoYXQgU3RlcHBlciBkZWZpbmVzIGEgY2xhc3MgdGhhdCBpcyBuZXZlcgogICAgICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWQKICAgICAgICogc3RlcHBlciBmdW5jdGlvbnMuCiAgICAgICAqIEBpbnRlcmZhY2UKICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CiAgICAgICAqICAgeyJtdSI6IHsgInR5cGUiOiAicmVhbCIsICJkaW0iOiBbMV0sICJ1cHBlciI6IEluZmluaXR5LCAKICAgICAgICogICAibG93ZXIiOiAtSW5maW5pdHksICJpbml0IjogMC41IH19CiAgICAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgImNvbXBsZXRlIiwgdGhhdCBpcywKICAgICAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycyBpbiBwYXJhbXMKICAgICAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzCiAgICAgICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOgogICAgICAgKiAgIHttdTogMTAsIHNpZ21hOiA1LCBiZXRhOiBbMSwgMi41XX0KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGUKICAgICAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3QKICAgICAgICogICBzaG91bGQgY2hhbmdlIGlmIHRoZSB0aGUgdmFsdWVzIGluIHN0YXRlIGFyZSBjaGFuZ2VkLgogICAgICAKICAgICAgICovCiAgICAgIHZhciBTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KSB7CiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgIHRoaXMubG9nX3Bvc3QgPSBsb2dfcG9zdDsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBUYWtlcyBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS4gU2hvdWxkIHJldHVybiB0aGUgbmV3IHN0YXRlLAogICAgICAgKiBidXQgaXMgbWFpbmx5IGNhbGxlZCBmb3IgaXQncyBzaWRlIGVmZmVjdCBvZiBtYWtpbmcgYSBjaGFuZ2UgaW4gdGhlCiAgICAgICAqIHN0YXRlIG9iamVjdC4KICAgICAgICovCiAgICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgIkV2ZXJ5IFN0ZXBwZXIgbmVlZCB0byBpbXBsZW1lbnQgc3RlcCgpIjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgYWRhcHQgd2hpbGUgc3RlcHBpbmcuCiAgICAgICAqLwogICAgICBTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gCiAgICAgIH07CgogICAgICAvKioKICAgICAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGNlYXNlIGFkYXB0aW5nIHdoaWxlIHN0ZXBwaW5nLgogICAgICAgKi8KICAgICAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gCiAgICAgIH07CgogICAgICAvKioKICAgICAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmcgaW5mbyByZWdhcmRpbmcgdGhlIHN0ZXBwZXIuCiAgICAgICAqLwogICAgICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIHN0ZXBwZXIuCiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpbgogICAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgogICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLgogICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKQogICAgICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhCiAgICAgICAqIG51bWJlciBhbmQgbG9nX3NjYWxlIGRlZmluZXMgdGhlIHNjYWxlIG9mIHRoZSBwcm9wb3NhbCBzb21laG93LgogICAgICAqLwogICAgICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGdlbmVyYXRlX3Byb3Bvc2FsKSB7CiAgICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKICAgICAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CiAgICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CiAgICAgICAgICB0aHJvdyAiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBwYXJhbWV0ZXIuIjsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CiAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKICAgICAgICBpZiAoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkgewogICAgICAgICAgdGhyb3cgIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgICB0aGlzLmxvd2VyID0gcGFyYW0ubG93ZXI7CiAgICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwogICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgPSBnZXRfb3B0aW9uKCJwcm9wX2xvZ19zY2FsZSIsIG9wdGlvbnMsIDApOwogICAgICAgIHRoaXMuYmF0Y2hfc2l6ZSA9IGdldF9vcHRpb24oImJhdGNoX3NpemUiLCBvcHRpb25zLCA1MCk7CiAgICAgICAgdGhpcy5tYXhfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oIm1heF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgMC4zMyk7CiAgICAgICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfb3B0aW9uKCJpbml0aWFsX2FkYXB0YXRpb24iLCBvcHRpb25zLCAxLjApOwogICAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X29wdGlvbigidGFyZ2V0X2FjY2VwdF9yYXRlIiwgb3B0aW9ucywgMC40NCk7CiAgICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGdldF9vcHRpb24oImlzX2FkYXB0aW5nIiwgb3B0aW9ucywgdHJ1ZSk7CiAgICAgICAgdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbCA9IGdlbmVyYXRlX3Byb3Bvc2FsOwogICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CiAgICAgICAgdGhpcy5iYXRjaF9jb3VudCA9IDA7CiAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDsKICAgICAgfTsKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyOwogICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcGFyYW1fc3RhdGUgPSB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CiAgICAgICAgdmFyIHBhcmFtX3Byb3Bvc2FsID0gdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgdGhpcy5wcm9wX2xvZ19zY2FsZSk7CiAgICAgICAgaWYgKHBhcmFtX3Byb3Bvc2FsIDwgdGhpcy5sb3dlciB8fCBwYXJhbV9wcm9wb3NhbCA+IHRoaXMudXBwZXIpIDsgZWxzZSB7CiAgICAgICAgICAvLyBtYWtlIGEgTWV0cm9wb2xpcyBzdGVwCiAgICAgICAgICB2YXIgY3Vycl9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTsKICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3Byb3Bvc2FsOwogICAgICAgICAgdmFyIHByb3BfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgICB2YXIgYWNjZXB0X3Byb2IgPSBNYXRoLmV4cChwcm9wX2xvZ19kZW5zIC0gY3Vycl9sb2dfZGVucyk7CiAgICAgICAgICBpZiAoYWNjZXB0X3Byb2IgPiBNYXRoLnJhbmRvbSgpKSB7CiAgICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWwKICAgICAgICAgICAgaWYgKHRoaXMuaXNfYWRhcHRpbmcpIHRoaXMuYWNjZXB0YW5jZV9jb3VudCsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbQogICAgICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9zdGF0ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuaXNfYWRhcHRpbmcpIHsKICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbisrOwogICAgICAgICAgaWYgKHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA+PSB0aGlzLmJhdGNoX3NpemUpIHsKICAgICAgICAgICAgLy8gdGhlbiBhZGFwdAogICAgICAgICAgICB0aGlzLmJhdGNoX2NvdW50Kys7CiAgICAgICAgICAgIHZhciBsb2dfc2RfYWRqdXN0bWVudCA9IE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uIC8gTWF0aC5zcXJ0KHRoaXMuYmF0Y2hfY291bnQpKTsKICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXB0YW5jZV9jb3VudCAvIHRoaXMuYmF0Y2hfc2l6ZSA+IHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlKSB7CiAgICAgICAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSArPSBsb2dfc2RfYWRqdXN0bWVudDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlIC09IGxvZ19zZF9hZGp1c3RtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CiAgICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CiAgICAgIH07CiAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSB0cnVlOwogICAgICB9OwogICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBmYWxzZTsKICAgICAgfTsKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByb3BfbG9nX3NjYWxlOiB0aGlzLnByb3BfbG9nX3NjYWxlLAogICAgICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsCiAgICAgICAgICBhY2NlcHRhbmNlX2NvdW50OiB0aGlzLmFjY2VwdGFuY2VfY291bnQsCiAgICAgICAgICBpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uOiB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24sCiAgICAgICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudAogICAgICAgIH07CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgTm9ybWFsIHByb3Bvc2FsLgogICAgICAgKi8KICAgICAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKICAgICAgICByZXR1cm4gcm5vcm0ocGFyYW1fc3RhdGUsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSk7CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQGNsYXNzCiAgICAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCiAgICAgICAqLwogICAgICB2YXIgUmVhbE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CiAgICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgbm9ybWFsX3Byb3Bvc2FsKTsKICAgICAgfTsKICAgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjsKCiAgICAgIC8qKgogICAgICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWwuCiAgICAgICAqLwogICAgICB2YXIgZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsID0gZnVuY3Rpb24gKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkgewogICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHJub3JtKHBhcmFtX3N0YXRlLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpKTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAqIEBjbGFzcwogICAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICogQSAic3ViY2xhc3MiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgogICAgICAqLwogICAgICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwpOwogICAgICB9OwogICAgICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEludE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpbgogICAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgogICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpIGZvciBwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5cy4gVGhhdAogICAgICAgKiBpcywgaW5zdGVhZCBvZiBqdXN0IHRha2luZyBhIHN0ZXAgZm9yIGEgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlciBsaWtlIAogICAgICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgCiAgICAgICAqIGZvciBhIG11bHRpZGltZW5zaW9uYWwgYXJyYXkuIEl0J3Mgc3RpbGwgcHJldHR5IGR1bWIgYW5kIGp1c3QgdGFrZXMKICAgICAgICogb25lLWRpbWVuc2lvbmFsIHN0ZXBzIGZvciBlYWNoIHBhcmFtZXRlciBjb21wb25lbnQsIHRob3VnaC4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIAogICAgICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLgogICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgogICAgICAgKiBAcGFyYW0gU3ViU3RlcHBlciAtIGEgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlIG9mIG9uZSBkaW1lbnNpb25hbCBTdGVwcGVyIHRvIGFwcGx5IG9uCiAgICAgICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KICAgICAgKi8KICAgICAgdmFyIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFN1YlN0ZXBwZXIpIHsKICAgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwogICAgICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoICE9IDEpIHsKICAgICAgICAgIHRocm93ICJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTsKICAgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwogICAgICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjsKICAgICAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7CiAgICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CiAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oInByb3BfbG9nX3NjYWxlIiwgb3B0aW9ucywgdGhpcy5kaW0sIDApOwogICAgICAgIHRoaXMuYmF0Y2hfc2l6ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oImJhdGNoX3NpemUiLCBvcHRpb25zLCB0aGlzLmRpbSwgNTApOwogICAgICAgIHRoaXMubWF4X2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJtYXhfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTsKICAgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9tdWx0aWRpbV9vcHRpb24oImluaXRpYWxfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAxLjApOwogICAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X211bHRpZGltX29wdGlvbigidGFyZ2V0X2FjY2VwdF9yYXRlIiwgb3B0aW9ucywgdGhpcy5kaW0sIDAuNDQpOwogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJpc19hZGFwdGluZyIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTsKCiAgICAgICAgLy8gVGhpcyBoYWNrIGJlbG93IGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBhcnJheSBvZiAKICAgICAgICAvLyBvbmUgZGltZW5zaW9uYWwgc3RlcHBlcnMgYWNjb3JkaW5nIHRvIGRpbS4KICAgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZSwgYmF0Y2hfc2l6ZSwgbWF4X2FkYXB0YXRpb24sIGluaXRpYWxfYWRhcHRhdGlvbiwgdGFyZ2V0X2FjY2VwdF9yYXRlLCBpc19hZGFwdGluZykgewogICAgICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgICBpZiAoZGltLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHN1Ym9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICBwcm9wX2xvZ19zY2FsZTogcHJvcF9sb2dfc2NhbGVbaV0sCiAgICAgICAgICAgICAgICBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLAogICAgICAgICAgICAgICAgbWF4X2FkYXB0YXRpb246IG1heF9hZGFwdGF0aW9uW2ldLAogICAgICAgICAgICAgICAgaW5pdGlhbF9hZGFwdGF0aW9uOiBpbml0aWFsX2FkYXB0YXRpb25baV0sCiAgICAgICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwKICAgICAgICAgICAgICAgIGlzX2FkYXB0aW5nOiBpc19hZGFwdGluZ1tpXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307CiAgICAgICAgICAgICAgc3VicGFyYW1baV0gPSBkZWVwX2Nsb25lKHBhcmFtKTsKICAgICAgICAgICAgICBzdWJwYXJhbVtpXS5kaW0gPSBbMV07IC8vIEFzIHRoaXMgc2hvdWxkIG5vdyBiZSBhIG9uZS1kaW0gcGFyYW1ldGVyCiAgICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWQKICAgICAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBTdWJTdGVwcGVyKHN1YnBhcmFtLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHN1Ym9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlW2ldLCBiYXRjaF9zaXplW2ldLCBtYXhfYWRhcHRhdGlvbltpXSwgaW5pdGlhbF9hZGFwdGF0aW9uW2ldLCB0YXJnZXRfYWNjZXB0X3JhdGVbaV0sIGlzX2FkYXB0aW5nW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXJzOwogICAgICAgIH07CiAgICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0LCB0aGlzLnByb3BfbG9nX3NjYWxlLCB0aGlzLmJhdGNoX3NpemUsIHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uLCB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKICAgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KICAgICAgICByZXR1cm4gbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuc3RlcCgpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgc3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKICAgICAgICAgIHN1YnN0ZXBwZXIuc3RvcF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuaW5mbygpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy4KICAgICAgICovCiAgICAgIHZhciBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgUmVhbE1ldHJvcG9saXNTdGVwcGVyKTsKICAgICAgfTsKICAgICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgogICAgICAgKi8KICAgICAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIEludE1ldHJvcG9saXNTdGVwcGVyKTsKICAgICAgfTsKICAgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgYSBzdGVwIGZvciBhIGJpbmFyeSBwYXJhbWV0ZXIuCiAgICAgICAqIFRoaXMgaXMgZG9uZSBieSBldmFsdWF0aW5nIHRoZSBsb2cgcG9zdGVyaW9yIGZvciBib3RoIHN0YXRlcyBvZiB0aGUKICAgICAgICogcGFyYW1ldGVyIGFuZCB0aGVuIHNlbGVjdGluZyBhIHN0YXRlIHJhbmRvbWx5IHdpdGggcHJvYmFiaWxpdHkgcmVsYXRpdmUgCiAgICAgICAqIHRvIHRoZSBwb3N0ZXJpb3Igb2YgZWFjaCBzdGF0ZS4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLgogICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgogICAgICAqLwogICAgICB2YXIgQmluYXJ5U3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwogICAgICAgIGlmIChwYXJhbV9uYW1lcy5sZW5ndGggPT0gMSkgewogICAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93ICJCaW5hcnlTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgfTsKICAgICAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlTdGVwcGVyOwogICAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7CiAgICAgICAgdmFyIHplcm9fbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTsKICAgICAgICB2YXIgb25lX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwogICAgICAgIHZhciBtYXhfbG9nX2RlbnMgPSBNYXRoLm1heCh6ZXJvX2xvZ19kZW5zLCBvbmVfbG9nX2RlbnMpOwogICAgICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zOwogICAgICAgIG9uZV9sb2dfZGVucyAtPSBtYXhfbG9nX2RlbnM7CiAgICAgICAgdmFyIHplcm9fcHJvYiA9IE1hdGguZXhwKHplcm9fbG9nX2RlbnMgLSBNYXRoLmxvZyhNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zKSArIE1hdGguZXhwKG9uZV9sb2dfZGVucykpKTsKICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikgewogICAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC4KICAgICAgICByZXR1cm4gMTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAqIEBjbGFzcwogICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQogICAgICAqIEp1c3QgbGlrZSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIHRoaXMgU3RlcHBlciB0YWtlcyBhIHN0ZXBzIGZvcgogICAgICAqIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgYnkgdXBkYXRpbmcgZWFjaCBjb21wb25lbnQgaW4gdHVybi4gVGhlIGRpZmZlcmVuY2UKICAgICAgKiBpcyB0aGF0IHRoaXMgc3RlcHBlciB3b3JrcyBvbiBiaW5hcnkgcGFyYW1ldGVycy4KICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgCiAgICAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KICAgICAgKi8KICAgICAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwogICAgICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoID09IDEpIHsKICAgICAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdOwogICAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKICAgICAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyAiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuIjsKICAgICAgICB9CiAgICAgICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IGZ1bmN0aW9uIChkaW0sIHN1YnN0YXRlLCBsb2dfcG9zdCkgewogICAgICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgICB2YXIgaTsKICAgICAgICAgIGlmIChkaW0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTsKICAgICAgICAgICAgICBzdWJwYXJhbXNbaV0gPSBwYXJhbTsKICAgICAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBCaW5hcnlTdGVwcGVyKHN1YnBhcmFtcywgc3Vic3RhdGUsIGxvZ19wb3N0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc3Vic3RlcHBlcnM7CiAgICAgICAgfTsKICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QpOwogICAgICB9OwogICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7CiAgICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgc3Vic3RlcHBlcnMgaW4gYSByYW5kb20gb3JkZXIgYW5kIGNhbGwgc3RlcCgpIG9uIHRoZW0uCiAgICAgICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKICAgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBAY2xhc3MKICAgICAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9CiAgICAgICAqIFRoaXMgc3RlcHBlciBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHRha2luZyBhIHN0ZXAgZm9yIG9uZSBvciBtb3JlIHBhcmFtZXRlcnMuCiAgICAgICAqIEZvciByZWFsIGFuZCBpbnQgcGFyYW1ldGVycyBpdCB0YWtlcyBNZXRyb3BvbGlzIHdpdGhpbiBHaWJicyBzdGVwcywgYW5kIGZvciAKICAgICAgICogYmluYXJ5IHBhcmFtZXRlcnMgaXQgZG9lcyBldmFsdWF0ZXMgdGhlIHBvc3RlcmlvciBmb3IgYm90aCBwYXJhbXRlciB2YWx1ZXMgYW5kCiAgICAgICAqIHJhbmRvbWx5IGNoYW5nZXMgdG8gYSBjZXJ0YWluIHZhbHVlIHByb3BvcnRpb25hbGx5IHRvIHRoYXQgdmFsdWUncyBwb3N0ZXJpb3IKICAgICAgICogKHRoaXMgaXMgYWxzbyBkb25lIGZvciBlYWNoIHBhcmFtZXRlciwgc28gYWxzbyBhICogd2l0aGluIEdpYmJzIGFwcHJvYWNoKS4KICAgICAgICogVGhpcyBzdGVwcGVyIGlzIGFsc28gYWRhcHRpdmUgYW5kIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMKICAgICAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICovCiAgICAgIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV07CiAgICAgICAgICB2YXIgU2VsZWN0U3RlcHBlcjsKICAgICAgICAgIHN3aXRjaCAocGFyYW0udHlwZSkgewogICAgICAgICAgICBjYXNlICJyZWFsIjoKICAgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJpbnQiOgogICAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJiaW5hcnkiOgogICAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdGhyb3cgIkFtd2dTdGVwcGVyIGNhbid0IGhhbmRsZSBwYXJhbWV0ZXIgIiArIHRoaXMucGFyYW1fbmFtZXNbaV0gKyAiIHdpdGggdHlwZSAiICsgcGFyYW0udHlwZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBwYXJhbV9vYmplY3Rfd3JhcCA9IHt9OwogICAgICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHBhcmFtX29wdGlvbnMgPSBvcHRpb25zLnBhcmFtcyAmJiBvcHRpb25zLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXSB8fCB7fTsKICAgICAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7CiAgICAgICAgICBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgPSBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgfHwgb3B0aW9ucy5iYXRjaF9zaXplOwogICAgICAgICAgcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiA9IHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gfHwgb3B0aW9ucy5tYXhfYWRhcHRhdGlvbjsKICAgICAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247CiAgICAgICAgICBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSA9IHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlIHx8IG9wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlOwogICAgICAgICAgcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyA9IHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgfHwgb3B0aW9ucy5pc19hZGFwdGluZzsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU3RlcHBlcjsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RlcCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKICAgICAgfTsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGluZm8gPSB7fTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGluZm9bdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnN1YnN0ZXBwZXJzW2ldLmluZm8oKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGluZm87CiAgICAgIH07CgogICAgICAvLy8vLy8vLy8vLyBTYW1wbGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKgogICAgICAqIEBpbnRlcmZhY2UKICAgICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYQogICAgICAvLyBTYW1wbGVyIGlzIGhlcmUgaXMgYSBjb252ZW5pZW5jZSBjbGFzcyB3aGVyZSBhbiBpbnN0YW5jZSBvZiBTYW1wbGVyCiAgICAgIC8vIHNldHMgdXAgdGhlIFN0ZXBwZXJzLCBjaGVja3MgdGhlIHBhcmFtZXRlciBkZWZpbml0aW9uLAogICAgICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyICJpbnRlcmZhY2UiLgogICAgICAqIEBpbnRlcmZhY2UKICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZToKICAgICAgKiAgIHsibXUiOiB7InR5cGUiOiAicmVhbCJ9LCAic2lnbWEiOiB7InR5cGUiOiAicmVhbCIsICJsb3dlciIgPSAwfX0KICAgICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgZG9lc24ndCBoYXZlIHRvIGJlICJjb21wbGV0ZSIgYW5kIHByb3BlcnRpZXMKICAgICAgKiAgIGxlZnQgb3V0IChsaWtlIGxvd2VyIGFuZCB1cHBlcikgd2lsbCBiZSBmaWxsZWQgaW4gYnkgZGVmYXVsdHMuCiAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmUKICAgICAgKiAgIHN0YXRlIHdpbGwgYmUgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhdGUgd2l0aCBlYWNoIHBhcmFtZXRlciBhcyBhIAogICAgICAqICAga2V5IGFuZCB0aGUgcGFyYW1ldGVyIHZhbHVlcyBhcyBudW1iZXJzIG9yIGFycmF5cy4gRm9yIGV4YW1wbGU6CiAgICAgICogICB7Im11IjogMywgInNpZ21hIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgCiAgICAgICogICB0aGUgZGF0YSBhcmd1bWVudCBnaXZlbiBiZWxvdy4KICAgICAgKiBAcGFyYW0gZGF0YSAtIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBsb2dfcG9zdCBmdW5jdGlvbgogICAgICAqICAgd2hlbiBzYW1wbGluZy4KICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHNhbXBsZXIuCiAgICAgICovCiAgICAgIHZhciBTYW1wbGVyID0gZnVuY3Rpb24gKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHsKICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtczsKICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgogICAgICAgIC8vIFNldHRpbmcgZGVmYXVsdCBvcHRpb25zIGlmIG5vdCBwYXNzZWQgdGhyb3VnaCB0aGUgb3B0aW9ucyBvYmplY3QKICAgICAgICB0aGlzLnBhcmFtX2luaXRfZnVuID0gZ2V0X29wdGlvbigicGFyYW1faW5pdF9mdW4iLCBvcHRpb25zLCBwYXJhbV9pbml0X2ZpeGVkKTsKICAgICAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKCJ0aGluIiwgb3B0aW9ucywgMSk7CiAgICAgICAgdmFyIHBhcmFtc190b19tb25pdG9yID0gZ2V0X29wdGlvbigibW9uaXRvciIsIG9wdGlvbnMsIG51bGwpOwogICAgICAgIHRoaXMudGhpbih0aGlubmluZ19pbnRlcnZhbCk7CiAgICAgICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTsKICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgICAgIC8vIENvbXBsZXRpbmcgdGhlIHBhcmFtcyBhbmQgaW5pdGlhbGl6aW5nIHRoZSBzdGF0ZS4KICAgICAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7CiAgICAgICAgdmFyIHN0YXRlID0ge307CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7CiAgICAgICAgfQogICAgICAgIHRoaXMubG9nX3Bvc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpOwogICAgICAgIH07CiAgICAgICAgLy8gUnVubmluZyB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24gb25jZSBpbiBjYXNlIGl0IGZ1cnRoZXIgbW9kaWZpZXMgdGhlIHN0YXRlCiAgICAgICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy4KICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpOwogICAgICB9OwoKICAgICAgLyoqIFNob3VsZCByZXR1cm4gYSB2ZWN0b3Igb2Ygc3RlcHBlcnMgdGhhdCB3aGVuIGNhbGxlZCAKICAgICAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuCiAgICAgICAqLwogICAgICBTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgbG9nX3Bvc3QpIHsKICAgICAgICB0aHJvdyAiRXZlcnkgU2FtcGxlciBuZWVkcyB0byBpbXBsZW1lbnQgY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUoKSI7CiAgICAgIH07CgogICAgICAvKiogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgU2FtcGxlci4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLAogICAgICAgICAgdGhpbjogdGhpcy50aGluLAogICAgICAgICAgbW9uaXRvcjogdGhpcy5tb25pdG9yLAogICAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnMKICAgICAgICB9OwogICAgICB9OwoKICAgICAgLyoqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBSZXR1cm5zIHRoZSBuZXcgc3BhY2UKICAgICAgICogYnV0IGFsc28gbW9kaWZpZXMgdGhlIHN0YXRlIGluIHBsYWNlLgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3RlcHBlcnMpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGVwKCk7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5sZW5ndGggPiBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcykubGVuZ3RoKSB7CiAgICAgICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2UKICAgICAgICAgIC8vIG5lZWQgdG8gcnVuIHRoZSBsb2dfcG9zdCBvbmNlIG1vcmUgaW4gb3JkZXIgdG8gc2V0IHRoZSBkZXJpdmVkIHF1YW50aXRpZXMKICAgICAgICAgIC8vIGZvciB0aGUgZmluYWwgcGFyYW1ldGVyIHN0YXRlCiAgICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnN0YXRlOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIFRha2VzIG5faXRlcmF0aW9ucyBzdGVwcyBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlIGFuZCByZXR1cm5zIHRoZW0KICAgICAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZToKICAgICAgICoge211OiBbMSwgLTEsIDIsIDMsIC4uLl0sIHNpZ21hOiBbMSwgMiwgMiwgMSwgLi4uXX0uCiAgICAgICAqIElmIHRoaW4gaXMgPiAxIHRoZW4gbl9pdGVyYXRpb25zIC8gdGhpbiBzYW1wbGVzIGFyZSByZXR1cm5lZC4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZSA9IGZ1bmN0aW9uIChuX2l0ZXJhdGlvbnMpIHsKICAgICAgICAvLyBJbml0aWFsaXppbmcgY3Vycl9zYW1wbGUgd2hlcmUgdGhlIHNhbXBsZSBpcyBnb2luZyB0byBiZSBzYXZlZAogICAgICAgIC8vIGFzIGFuIG9iamVjdCBjb250YWluaW5nIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyIHRvIGJlIG1vbml0b3JlZC4KICAgICAgICB2YXIgaSwgaiwgbW9uaXRvcmVkX3BhcmFtczsKICAgICAgICBpZiAodGhpcy5tb25pdG9yZWRfcGFyYW1zID09PSBudWxsKSB7CiAgICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1vbml0b3JlZF9wYXJhbXMgPSB0aGlzLm1vbml0b3JlZF9wYXJhbXM7CiAgICAgICAgfQogICAgICAgIHZhciBjdXJyX3NhbXBsZSA9IHt9OwogICAgICAgIGZvciAoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjdXJyX3NhbXBsZVttb25pdG9yZWRfcGFyYW1zW2pdXSA9IFtdOwogICAgICAgIH0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHsKICAgICAgICAgIGlmIChpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkgewogICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIHZhciBwYXJhbSA9IG1vbml0b3JlZF9wYXJhbXNbal07CiAgICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnN0ZXAoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGN1cnJfc2FtcGxlOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIFRha2VzIG5faXRlcmF0aW9uIHN0ZXBzIGluIHBhcmFtZXRlciBzcGFjZSBidXQgcmV0dXJucyBub3RoaW5nLgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUuYnVybiA9IGZ1bmN0aW9uIChuX2l0ZXJhdGlvbnMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXAoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogU2V0cyB3aGF0IHBhcmFtZXRlcnMgc2hvdWxkIGJlIG1vbml0b3JlZCBhbmQgcmV0dXJuZWQgd2hlbiBjYWxsaW5nCiAgICAgICAqIHNhbXBsZS4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbiAocGFyYW1zX3RvX21vbml0b3IpIHsKICAgICAgICB0aGlzLm1vbml0b3JlZF9wYXJhbXMgPSBwYXJhbXNfdG9fbW9uaXRvcjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBTZXRzIHRoZSB0aGlubmluZy4gRm9yIGV4YW1wbGUgdGhpbiA9PSAxMCBtZWFucyB0aGF0IGV2ZXJ5IDEwdGggcG9zdGVyaW9yCiAgICAgICAqIGRyYXcgd2lsbCBiZSBrZXB0LgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUudGhpbiA9IGZ1bmN0aW9uICh0aGlubmluZ19pbnRlcnZhbCkgewogICAgICAgIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPSB0aGlubmluZ19pbnRlcnZhbDsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBTZXRzIGFkYXB0YXRpb24gb24sIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgKiBTZXRzIGFkYXB0YXRpb24gb2ZmLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuCiAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLyoqCiAgICAgICogQGNsYXNzCiAgICAgICogQGltcGxlbWVudHMge1NhbXBsZXJ9CiAgICAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIAogICAgICAqIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiAiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQyIKICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLiBBbiBhZGl0aW9uIGlzIHRoYXQgaXQgaGFuZGxlcyBpbnQgcGFyYW1ldGVycwogICAgICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgCiAgICAgICogdmFsdWUgcHJvcG9ydGlvbmFsIHRvIHRoZSBwb3N0ZXJpb3Igb2YgdGhlIHR3byBwb3NzaWJsZSBzdGF0ZXMgb2YgdGhlCiAgICAgICogcGFyYW1ldGVyLiBUaGlzIHNhbXBsZXIgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVycwogICAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCiAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zCiAgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgogICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICovCiAgICAgIHZhciBBbXdnU2FtcGxlciA9IGZ1bmN0aW9uIChwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7CiAgICAgICAgU2FtcGxlci5jYWxsKHRoaXMsIHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpOwogICAgICB9OwogICAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsKICAgICAgQW13Z1NhbXBsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQW13Z1NhbXBsZXI7CiAgICAgIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIHJldHVybiBbbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKV07CiAgICAgIH07CgogICAgICAvLyBSZXR1cm5pbmcgdGhlIGZ1bmN0aW9ucyB0aGF0IHNob3VsZCBiZSBwdWJsaWNseSBleHBvc2VkIGJ5IHRoaXMgbW9kdWxlCiAgICAgIHJldHVybiB7CiAgICAgICAgcnVuaWY6IHJ1bmlmLAogICAgICAgIHJ1bmlmX2Rpc2NyZXRlOiBydW5pZl9kaXNjcmV0ZSwKICAgICAgICBybm9ybTogcm5vcm0sCiAgICAgICAgcGFyYW1faW5pdF9maXhlZDogcGFyYW1faW5pdF9maXhlZCwKICAgICAgICBjb21wbGV0ZV9wYXJhbXM6IGNvbXBsZXRlX3BhcmFtcywKICAgICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwKICAgICAgICBJbnRNZXRyb3BvbGlzU3RlcHBlcjogSW50TWV0cm9wb2xpc1N0ZXBwZXIsCiAgICAgICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLAogICAgICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsCiAgICAgICAgQmluYXJ5U3RlcHBlcjogQmluYXJ5U3RlcHBlciwKICAgICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyOiBCaW5hcnlDb21wb25lbnRTdGVwcGVyLAogICAgICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwKICAgICAgICBBbXdnU2FtcGxlcjogQW13Z1NhbXBsZXIKICAgICAgfTsKICAgIH0pOwogIH0pKG1jbWMkMSk7CiAgdmFyIG1jbWNFeHBvcnRzID0gbWNtYyQxLmV4cG9ydHM7CgogIGZ1bmN0aW9uIGFzY2VuZGluZyQxKGEsIGIpIHsKICAgIHJldHVybiBhID09IG51bGwgfHwgYiA9PSBudWxsID8gTmFOIDogYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47CiAgfQoKICBmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIHsKICAgICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkgewogICAgICAgICAgeWllbGQgdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjb21wYXJlRGVmaW5lZChjb21wYXJlID0gYXNjZW5kaW5nJDEpIHsKICAgIGlmIChjb21wYXJlID09PSBhc2NlbmRpbmckMSkgcmV0dXJuIGFzY2VuZGluZ0RlZmluZWQ7CiAgICBpZiAodHlwZW9mIGNvbXBhcmUgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJyb3IoImNvbXBhcmUgaXMgbm90IGEgZnVuY3Rpb24iKTsKICAgIHJldHVybiAoYSwgYikgPT4gewogICAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTsKICAgICAgaWYgKHggfHwgeCA9PT0gMCkgcmV0dXJuIHg7CiAgICAgIHJldHVybiAoY29tcGFyZShiLCBiKSA9PT0gMCkgLSAoY29tcGFyZShhLCBhKSA9PT0gMCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhc2NlbmRpbmdEZWZpbmVkKGEsIGIpIHsKICAgIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTsKICB9CgogIGZ1bmN0aW9uIG1heCh2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIGxldCBtYXg7CiAgICB7CiAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKG1heCA8IHZhbHVlIHx8IG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkgewogICAgICAgICAgbWF4ID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbWF4OwogIH0KCiAgZnVuY3Rpb24gbWluKHZhbHVlcywgdmFsdWVvZikgewogICAgbGV0IG1pbjsKICAgIHsKICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHsKICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAobWluID4gdmFsdWUgfHwgbWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CiAgICAgICAgICBtaW4gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtaW47CiAgfQoKICAvLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9xdWlja3NlbGVjdAogIC8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uCiAgZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyYXksIGssIGxlZnQgPSAwLCByaWdodCA9IEluZmluaXR5LCBjb21wYXJlKSB7CiAgICBrID0gTWF0aC5mbG9vcihrKTsKICAgIGxlZnQgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIGxlZnQpKTsKICAgIHJpZ2h0ID0gTWF0aC5mbG9vcihNYXRoLm1pbihhcnJheS5sZW5ndGggLSAxLCByaWdodCkpOwogICAgaWYgKCEobGVmdCA8PSBrICYmIGsgPD0gcmlnaHQpKSByZXR1cm4gYXJyYXk7CiAgICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpOwogICAgd2hpbGUgKHJpZ2h0ID4gbGVmdCkgewogICAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7CiAgICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7CiAgICAgICAgY29uc3QgbSA9IGsgLSBsZWZ0ICsgMTsKICAgICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7CiAgICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7CiAgICAgICAgY29uc3Qgc2QgPSAwLjUgKiBNYXRoLnNxcnQoeiAqIHMgKiAobiAtIHMpIC8gbikgKiAobSAtIG4gLyAyIDwgMCA/IC0xIDogMSk7CiAgICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7CiAgICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTsKICAgICAgICBxdWlja3NlbGVjdChhcnJheSwgaywgbmV3TGVmdCwgbmV3UmlnaHQsIGNvbXBhcmUpOwogICAgICB9CiAgICAgIGNvbnN0IHQgPSBhcnJheVtrXTsKICAgICAgbGV0IGkgPSBsZWZ0OwogICAgICBsZXQgaiA9IHJpZ2h0OwogICAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTsKICAgICAgaWYgKGNvbXBhcmUoYXJyYXlbcmlnaHRdLCB0KSA+IDApIHN3YXAoYXJyYXksIGxlZnQsIHJpZ2h0KTsKICAgICAgd2hpbGUgKGkgPCBqKSB7CiAgICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qOwogICAgICAgIHdoaWxlIChjb21wYXJlKGFycmF5W2ldLCB0KSA8IDApICsraTsKICAgICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtqXSwgdCkgPiAwKSAtLWo7CiAgICAgIH0KICAgICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpOwogICAgICBpZiAoaiA8PSBrKSBsZWZ0ID0gaiArIDE7CiAgICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7CiAgICB9CiAgICByZXR1cm4gYXJyYXk7CiAgfQogIGZ1bmN0aW9uIHN3YXAoYXJyYXksIGksIGopIHsKICAgIGNvbnN0IHQgPSBhcnJheVtpXTsKICAgIGFycmF5W2ldID0gYXJyYXlbal07CiAgICBhcnJheVtqXSA9IHQ7CiAgfQoKICBmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHsKICAgIHZhbHVlcyA9IEZsb2F0NjRBcnJheS5mcm9tKG51bWJlcnModmFsdWVzKSk7CiAgICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkgfHwgaXNOYU4ocCA9ICtwKSkgcmV0dXJuOwogICAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpOwogICAgaWYgKHAgPj0gMSkgcmV0dXJuIG1heCh2YWx1ZXMpOwogICAgdmFyIG4sCiAgICAgIGkgPSAobiAtIDEpICogcCwKICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLAogICAgICB2YWx1ZTAgPSBtYXgocXVpY2tzZWxlY3QodmFsdWVzLCBpMCkuc3ViYXJyYXkoMCwgaTAgKyAxKSksCiAgICAgIHZhbHVlMSA9IG1pbih2YWx1ZXMuc3ViYXJyYXkoaTAgKyAxKSk7CiAgICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTsKICB9CgogIGZ1bmN0aW9uIG1lZGlhbih2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIHJldHVybiBxdWFudGlsZSh2YWx1ZXMsIDAuNSk7CiAgfQoKICB2YXIgbm9vcCA9IHsKICAgIHZhbHVlOiAoKSA9PiB7fQogIH07CiAgZnVuY3Rpb24gZGlzcGF0Y2goKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIF8gPSB7fSwgdDsgaSA8IG47ICsraSkgewogICAgICBpZiAoISh0ID0gYXJndW1lbnRzW2ldICsgIiIpIHx8IHQgaW4gXyB8fCAvW1xzLl0vLnRlc3QodCkpIHRocm93IG5ldyBFcnJvcigiaWxsZWdhbCB0eXBlOiAiICsgdCk7CiAgICAgIF9bdF0gPSBbXTsKICAgIH0KICAgIHJldHVybiBuZXcgRGlzcGF0Y2goXyk7CiAgfQogIGZ1bmN0aW9uIERpc3BhdGNoKF8pIHsKICAgIHRoaXMuXyA9IF87CiAgfQogIGZ1bmN0aW9uIHBhcnNlVHlwZW5hbWVzJDEodHlwZW5hbWVzLCB0eXBlcykgewogICAgcmV0dXJuIHR5cGVuYW1lcy50cmltKCkuc3BsaXQoL158XHMrLykubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBuYW1lID0gIiIsCiAgICAgICAgaSA9IHQuaW5kZXhPZigiLiIpOwogICAgICBpZiAoaSA+PSAwKSBuYW1lID0gdC5zbGljZShpICsgMSksIHQgPSB0LnNsaWNlKDAsIGkpOwogICAgICBpZiAodCAmJiAhdHlwZXMuaGFzT3duUHJvcGVydHkodCkpIHRocm93IG5ldyBFcnJvcigidW5rbm93biB0eXBlOiAiICsgdCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogdCwKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH07CiAgICB9KTsKICB9CiAgRGlzcGF0Y2gucHJvdG90eXBlID0gZGlzcGF0Y2gucHJvdG90eXBlID0gewogICAgY29uc3RydWN0b3I6IERpc3BhdGNoLAogICAgb246IGZ1bmN0aW9uICh0eXBlbmFtZSwgY2FsbGJhY2spIHsKICAgICAgdmFyIF8gPSB0aGlzLl8sCiAgICAgICAgVCA9IHBhcnNlVHlwZW5hbWVzJDEodHlwZW5hbWUgKyAiIiwgXyksCiAgICAgICAgdCwKICAgICAgICBpID0gLTEsCiAgICAgICAgbiA9IFQubGVuZ3RoOwoKICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSBjYWxsYmFjayBvZiB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7CiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgodCA9ICh0eXBlbmFtZSA9IFRbaV0pLnR5cGUpICYmICh0ID0gZ2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSkpKSByZXR1cm4gdDsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIElmIGEgdHlwZSB3YXMgc3BlY2lmaWVkLCBzZXQgdGhlIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS4KICAgICAgLy8gT3RoZXJ3aXNlLCBpZiBhIG51bGwgY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmVtb3ZlIGNhbGxiYWNrcyBvZiB0aGUgZ2l2ZW4gbmFtZS4KICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwgJiYgdHlwZW9mIGNhbGxiYWNrICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgY2FsbGJhY2s6ICIgKyBjYWxsYmFjayk7CiAgICAgIHdoaWxlICgrK2kgPCBuKSB7CiAgICAgICAgaWYgKHQgPSAodHlwZW5hbWUgPSBUW2ldKS50eXBlKSBfW3RdID0gc2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSwgY2FsbGJhY2spO2Vsc2UgaWYgKGNhbGxiYWNrID09IG51bGwpIGZvciAodCBpbiBfKSBfW3RdID0gc2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSwgbnVsbCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgY29weTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgY29weSA9IHt9LAogICAgICAgIF8gPSB0aGlzLl87CiAgICAgIGZvciAodmFyIHQgaW4gXykgY29weVt0XSA9IF9bdF0uc2xpY2UoKTsKICAgICAgcmV0dXJuIG5ldyBEaXNwYXRjaChjb3B5KTsKICAgIH0sCiAgICBjYWxsOiBmdW5jdGlvbiAodHlwZSwgdGhhdCkgewogICAgICBpZiAoKG4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMikgPiAwKSBmb3IgKHZhciBhcmdzID0gbmV3IEFycmF5KG4pLCBpID0gMCwgbiwgdDsgaSA8IG47ICsraSkgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMl07CiAgICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZTogIiArIHR5cGUpOwogICAgICBmb3IgKHQgPSB0aGlzLl9bdHlwZV0sIGkgPSAwLCBuID0gdC5sZW5ndGg7IGkgPCBuOyArK2kpIHRbaV0udmFsdWUuYXBwbHkodGhhdCwgYXJncyk7CiAgICB9LAogICAgYXBwbHk6IGZ1bmN0aW9uICh0eXBlLCB0aGF0LCBhcmdzKSB7CiAgICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZTogIiArIHR5cGUpOwogICAgICBmb3IgKHZhciB0ID0gdGhpcy5fW3R5cGVdLCBpID0gMCwgbiA9IHQubGVuZ3RoOyBpIDwgbjsgKytpKSB0W2ldLnZhbHVlLmFwcGx5KHRoYXQsIGFyZ3MpOwogICAgfQogIH07CiAgZnVuY3Rpb24gZ2V0JDEodHlwZSwgbmFtZSkgewogICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0eXBlLmxlbmd0aCwgYzsgaSA8IG47ICsraSkgewogICAgICBpZiAoKGMgPSB0eXBlW2ldKS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgcmV0dXJuIGMudmFsdWU7CiAgICAgIH0KICAgIH0KICB9CiAgZnVuY3Rpb24gc2V0JDEodHlwZSwgbmFtZSwgY2FsbGJhY2spIHsKICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGg7IGkgPCBuOyArK2kpIHsKICAgICAgaWYgKHR5cGVbaV0ubmFtZSA9PT0gbmFtZSkgewogICAgICAgIHR5cGVbaV0gPSBub29wLCB0eXBlID0gdHlwZS5zbGljZSgwLCBpKS5jb25jYXQodHlwZS5zbGljZShpICsgMSkpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgdHlwZS5wdXNoKHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgdmFsdWU6IGNhbGxiYWNrCiAgICB9KTsKICAgIHJldHVybiB0eXBlOwogIH0KCiAgdmFyIHhodG1sID0gImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiOwogIHZhciBuYW1lc3BhY2VzID0gewogICAgc3ZnOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgeGh0bWw6IHhodG1sLAogICAgeGxpbms6ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwKICAgIHhtbDogImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvIgogIH07CgogIGZ1bmN0aW9uIG5hbWVzcGFjZSAobmFtZSkgewogICAgdmFyIHByZWZpeCA9IG5hbWUgKz0gIiIsCiAgICAgIGkgPSBwcmVmaXguaW5kZXhPZigiOiIpOwogICAgaWYgKGkgPj0gMCAmJiAocHJlZml4ID0gbmFtZS5zbGljZSgwLCBpKSkgIT09ICJ4bWxucyIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTsKICAgIHJldHVybiBuYW1lc3BhY2VzLmhhc093blByb3BlcnR5KHByZWZpeCkgPyB7CiAgICAgIHNwYWNlOiBuYW1lc3BhY2VzW3ByZWZpeF0sCiAgICAgIGxvY2FsOiBuYW1lCiAgICB9IDogbmFtZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICB9CgogIGZ1bmN0aW9uIGNyZWF0b3JJbmhlcml0KG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkb2N1bWVudCA9IHRoaXMub3duZXJEb2N1bWVudCwKICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTsKICAgICAgcmV0dXJuIHVyaSA9PT0geGh0bWwgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0geGh0bWwgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHVyaSwgbmFtZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjcmVhdG9yRml4ZWQoZnVsbG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjcmVhdG9yIChuYW1lKSB7CiAgICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7CiAgICByZXR1cm4gKGZ1bGxuYW1lLmxvY2FsID8gY3JlYXRvckZpeGVkIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTsKICB9CgogIGZ1bmN0aW9uIG5vbmUoKSB7fQogIGZ1bmN0aW9uIHNlbGVjdG9yIChzZWxlY3RvcikgewogICAgcmV0dXJuIHNlbGVjdG9yID09IG51bGwgPyBub25lIDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fc2VsZWN0IChzZWxlY3QpIHsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkgewogICAgICAgICAgaWYgKCJfX2RhdGFfXyIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187CiAgICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7CiAgfQoKICAvLyBHaXZlbiBzb21ldGhpbmcgYXJyYXkgbGlrZSAob3IgbnVsbCksIHJldHVybnMgc29tZXRoaW5nIHRoYXQgaXMgc3RyaWN0bHkgYW4KICAvLyBhcnJheS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IGFycmF5LWxpa2Ugb2JqZWN0cyBwYXNzZWQgdG8gZDMuc2VsZWN0QWxsCiAgLy8gb3Igc2VsZWN0aW9uLnNlbGVjdEFsbCBhcmUgY29udmVydGVkIGludG8gcHJvcGVyIGFycmF5cyB3aGVuIGNyZWF0aW5nIGEKICAvLyBzZWxlY3Rpb247IHdlIGRvbuKAmXQgZXZlciB3YW50IHRvIGNyZWF0ZSBhIHNlbGVjdGlvbiBiYWNrZWQgYnkgYSBsaXZlCiAgLy8gSFRNTENvbGxlY3Rpb24gb3IgTm9kZUxpc3QuIEhvd2V2ZXIsIG5vdGUgdGhhdCBzZWxlY3Rpb24uc2VsZWN0QWxsIHdpbGwgdXNlIGEKICAvLyBzdGF0aWMgTm9kZUxpc3QgYXMgYSBncm91cCwgc2luY2UgaXQgc2FmZWx5IGRlcml2ZWQgZnJvbSBxdWVyeVNlbGVjdG9yQWxsLgogIGZ1bmN0aW9uIGFycmF5KHgpIHsKICAgIHJldHVybiB4ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoeCkgPyB4IDogQXJyYXkuZnJvbSh4KTsKICB9CgogIGZ1bmN0aW9uIGVtcHR5KCkgewogICAgcmV0dXJuIFtdOwogIH0KICBmdW5jdGlvbiBzZWxlY3RvckFsbCAoc2VsZWN0b3IpIHsKICAgIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gZW1wdHkgOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGFycmF5QWxsKHNlbGVjdCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGFycmF5KHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3RBbGwgKHNlbGVjdCkgewogICAgaWYgKHR5cGVvZiBzZWxlY3QgPT09ICJmdW5jdGlvbiIpIHNlbGVjdCA9IGFycmF5QWxsKHNlbGVjdCk7ZWxzZSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgICAgc3ViZ3JvdXBzLnB1c2goc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKTsKICAgICAgICAgIHBhcmVudHMucHVzaChub2RlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEoc3ViZ3JvdXBzLCBwYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIG1hdGNoZXIgKHNlbGVjdG9yKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5tYXRjaGVzKHNlbGVjdG9yKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNoaWxkTWF0Y2hlcihzZWxlY3RvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgIHJldHVybiBub2RlLm1hdGNoZXMoc2VsZWN0b3IpOwogICAgfTsKICB9CgogIHZhciBmaW5kID0gQXJyYXkucHJvdG90eXBlLmZpbmQ7CiAgZnVuY3Rpb24gY2hpbGRGaW5kKG1hdGNoKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZmluZC5jYWxsKHRoaXMuY2hpbGRyZW4sIG1hdGNoKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNoaWxkRmlyc3QoKSB7CiAgICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnRDaGlsZDsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX3NlbGVjdENoaWxkIChtYXRjaCkgewogICAgcmV0dXJuIHRoaXMuc2VsZWN0KG1hdGNoID09IG51bGwgPyBjaGlsZEZpcnN0IDogY2hpbGRGaW5kKHR5cGVvZiBtYXRjaCA9PT0gImZ1bmN0aW9uIiA/IG1hdGNoIDogY2hpbGRNYXRjaGVyKG1hdGNoKSkpOwogIH0KCiAgdmFyIGZpbHRlciA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXI7CiAgZnVuY3Rpb24gY2hpbGRyZW4oKSB7CiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuKTsKICB9CiAgZnVuY3Rpb24gY2hpbGRyZW5GaWx0ZXIobWF0Y2gpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBmaWx0ZXIuY2FsbCh0aGlzLmNoaWxkcmVuLCBtYXRjaCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4gKG1hdGNoKSB7CiAgICByZXR1cm4gdGhpcy5zZWxlY3RBbGwobWF0Y2ggPT0gbnVsbCA/IGNoaWxkcmVuIDogY2hpbGRyZW5GaWx0ZXIodHlwZW9mIG1hdGNoID09PSAiZnVuY3Rpb24iID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZmlsdGVyIChtYXRjaCkgewogICAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gImZ1bmN0aW9uIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTsKICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIG1hdGNoLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSB7CiAgICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24kMShzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpOwogIH0KCiAgZnVuY3Rpb24gc3BhcnNlICh1cGRhdGUpIHsKICAgIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZW50ZXIgKCkgewogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24kMSh0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpOwogIH0KICBmdW5jdGlvbiBFbnRlck5vZGUocGFyZW50LCBkYXR1bSkgewogICAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7CiAgICB0aGlzLm5hbWVzcGFjZVVSSSA9IHBhcmVudC5uYW1lc3BhY2VVUkk7CiAgICB0aGlzLl9uZXh0ID0gbnVsbDsKICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDsKICAgIHRoaXMuX19kYXRhX18gPSBkYXR1bTsKICB9CiAgRW50ZXJOb2RlLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBFbnRlck5vZGUsCiAgICBhcHBlbmRDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCB0aGlzLl9uZXh0KTsKICAgIH0sCiAgICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChjaGlsZCwgbmV4dCkgewogICAgICByZXR1cm4gdGhpcy5fcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgbmV4dCk7CiAgICB9LAogICAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICB9LAogICAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gY29uc3RhbnQkMSAoeCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHg7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHsKICAgIHZhciBpID0gMCwKICAgICAgbm9kZSwKICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsCiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDsKCiAgICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZml0IGludG8gdXBkYXRlLgogICAgLy8gUHV0IGFueSBudWxsIG5vZGVzIGludG8gZW50ZXIuCiAgICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuCiAgICBmb3IgKDsgaSA8IGRhdGFMZW5ndGg7ICsraSkgewogICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07CiAgICAgICAgdXBkYXRlW2ldID0gbm9kZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTsKICAgICAgfQogICAgfQoKICAgIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBkb27igJl0IGZpdCBpbnRvIGV4aXQuCiAgICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGJpbmRLZXkocGFyZW50LCBncm91cCwgZW50ZXIsIHVwZGF0ZSwgZXhpdCwgZGF0YSwga2V5KSB7CiAgICB2YXIgaSwKICAgICAgbm9kZSwKICAgICAgbm9kZUJ5S2V5VmFsdWUgPSBuZXcgTWFwKCksCiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLAogICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsCiAgICAgIGtleVZhbHVlcyA9IG5ldyBBcnJheShncm91cExlbmd0aCksCiAgICAgIGtleVZhbHVlOwoKICAgIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBub2RlLgogICAgLy8gSWYgbXVsdGlwbGUgbm9kZXMgaGF2ZSB0aGUgc2FtZSBrZXksIHRoZSBkdXBsaWNhdGVzIGFyZSBhZGRlZCB0byBleGl0LgogICAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgIGtleVZhbHVlc1tpXSA9IGtleVZhbHVlID0ga2V5LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApICsgIiI7CiAgICAgICAgaWYgKG5vZGVCeUtleVZhbHVlLmhhcyhrZXlWYWx1ZSkpIHsKICAgICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlQnlLZXlWYWx1ZS5zZXQoa2V5VmFsdWUsIG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBkYXR1bS4KICAgIC8vIElmIHRoZXJlIGEgbm9kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBrZXksIGpvaW4gYW5kIGFkZCBpdCB0byB1cGRhdGUuCiAgICAvLyBJZiB0aGVyZSBpcyBub3QgKG9yIHRoZSBrZXkgaXMgYSBkdXBsaWNhdGUpLCBhZGQgaXQgdG8gZW50ZXIuCiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7CiAgICAgIGtleVZhbHVlID0ga2V5LmNhbGwocGFyZW50LCBkYXRhW2ldLCBpLCBkYXRhKSArICIiOwogICAgICBpZiAobm9kZSA9IG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZSkpIHsKICAgICAgICB1cGRhdGVbaV0gPSBub2RlOwogICAgICAgIG5vZGUuX19kYXRhX18gPSBkYXRhW2ldOwogICAgICAgIG5vZGVCeUtleVZhbHVlLmRlbGV0ZShrZXlWYWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZW50ZXJbaV0gPSBuZXcgRW50ZXJOb2RlKHBhcmVudCwgZGF0YVtpXSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC4KICAgIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7CiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWVzW2ldKSA9PT0gbm9kZSkgewogICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGRhdHVtKG5vZGUpIHsKICAgIHJldHVybiBub2RlLl9fZGF0YV9fOwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fZGF0YSAodmFsdWUsIGtleSkgewogICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLCBkYXR1bSk7CiAgICB2YXIgYmluZCA9IGtleSA/IGJpbmRLZXkgOiBiaW5kSW5kZXgsCiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLAogICAgICBncm91cHMgPSB0aGlzLl9ncm91cHM7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB2YWx1ZSA9IGNvbnN0YW50JDEodmFsdWUpOwogICAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7CiAgICAgIHZhciBwYXJlbnQgPSBwYXJlbnRzW2pdLAogICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLAogICAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLAogICAgICAgIGRhdGEgPSBhcnJheWxpa2UodmFsdWUuY2FsbChwYXJlbnQsIHBhcmVudCAmJiBwYXJlbnQuX19kYXRhX18sIGosIHBhcmVudHMpKSwKICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsCiAgICAgICAgZW50ZXJHcm91cCA9IGVudGVyW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLAogICAgICAgIHVwZGF0ZUdyb3VwID0gdXBkYXRlW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLAogICAgICAgIGV4aXRHcm91cCA9IGV4aXRbal0gPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpOwogICAgICBiaW5kKHBhcmVudCwgZ3JvdXAsIGVudGVyR3JvdXAsIHVwZGF0ZUdyb3VwLCBleGl0R3JvdXAsIGRhdGEsIGtleSk7CgogICAgICAvLyBOb3cgY29ubmVjdCB0aGUgZW50ZXIgbm9kZXMgdG8gdGhlaXIgZm9sbG93aW5nIHVwZGF0ZSBub2RlLCBzdWNoIHRoYXQKICAgICAgLy8gYXBwZW5kQ2hpbGQgY2FuIGluc2VydCB0aGUgbWF0ZXJpYWxpemVkIGVudGVyIG5vZGUgYmVmb3JlIHRoaXMgbm9kZSwKICAgICAgLy8gcmF0aGVyIHRoYW4gYXQgdGhlIGVuZCBvZiB0aGUgcGFyZW50IG5vZGUuCiAgICAgIGZvciAodmFyIGkwID0gMCwgaTEgPSAwLCBwcmV2aW91cywgbmV4dDsgaTAgPCBkYXRhTGVuZ3RoOyArK2kwKSB7CiAgICAgICAgaWYgKHByZXZpb3VzID0gZW50ZXJHcm91cFtpMF0pIHsKICAgICAgICAgIGlmIChpMCA+PSBpMSkgaTEgPSBpMCArIDE7CiAgICAgICAgICB3aGlsZSAoIShuZXh0ID0gdXBkYXRlR3JvdXBbaTFdKSAmJiArK2kxIDwgZGF0YUxlbmd0aCk7CiAgICAgICAgICBwcmV2aW91cy5fbmV4dCA9IG5leHQgfHwgbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHVwZGF0ZSA9IG5ldyBTZWxlY3Rpb24kMSh1cGRhdGUsIHBhcmVudHMpOwogICAgdXBkYXRlLl9lbnRlciA9IGVudGVyOwogICAgdXBkYXRlLl9leGl0ID0gZXhpdDsKICAgIHJldHVybiB1cGRhdGU7CiAgfQoKICAvLyBHaXZlbiBzb21lIGRhdGEsIHRoaXMgcmV0dXJucyBhbiBhcnJheS1saWtlIHZpZXcgb2YgaXQ6IGFuIG9iamVjdCB0aGF0CiAgLy8gZXhwb3NlcyBhIGxlbmd0aCBwcm9wZXJ0eSBhbmQgYWxsb3dzIG51bWVyaWMgaW5kZXhpbmcuIE5vdGUgdGhhdCB1bmxpa2UKICAvLyBzZWxlY3RBbGwsIHRoaXMgaXNu4oCZdCB3b3JyaWVkIGFib3V0IOKAnGxpdmXigJ0gY29sbGVjdGlvbnMgYmVjYXVzZSB0aGUgcmVzdWx0aW5nCiAgLy8gYXJyYXkgd2lsbCBvbmx5IGJlIHVzZWQgYnJpZWZseSB3aGlsZSBkYXRhIGlzIGJlaW5nIGJvdW5kLiAoSXQgaXMgcG9zc2libGUgdG8KICAvLyBjYXVzZSB0aGUgZGF0YSB0byBjaGFuZ2Ugd2hpbGUgaXRlcmF0aW5nIGJ5IHVzaW5nIGEga2V5IGZ1bmN0aW9uLCBidXQgcGxlYXNlCiAgLy8gZG9u4oCZdDsgd2XigJlkIHJhdGhlciBhdm9pZCBhIGdyYXR1aXRvdXMgY29weS4pCiAgZnVuY3Rpb24gYXJyYXlsaWtlKGRhdGEpIHsKICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gIm9iamVjdCIgJiYgImxlbmd0aCIgaW4gZGF0YSA/IGRhdGEgLy8gQXJyYXksIFR5cGVkQXJyYXksIE5vZGVMaXN0LCBhcnJheS1saWtlCiAgICA6IEFycmF5LmZyb20oZGF0YSk7IC8vIE1hcCwgU2V0LCBpdGVyYWJsZSwgc3RyaW5nLCBvciBhbnl0aGluZyBlbHNlCiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZXhpdCAoKSB7CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHRoaXMuX2V4aXQgfHwgdGhpcy5fZ3JvdXBzLm1hcChzcGFyc2UpLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9qb2luIChvbmVudGVyLCBvbnVwZGF0ZSwgb25leGl0KSB7CiAgICB2YXIgZW50ZXIgPSB0aGlzLmVudGVyKCksCiAgICAgIHVwZGF0ZSA9IHRoaXMsCiAgICAgIGV4aXQgPSB0aGlzLmV4aXQoKTsKICAgIGlmICh0eXBlb2Ygb25lbnRlciA9PT0gImZ1bmN0aW9uIikgewogICAgICBlbnRlciA9IG9uZW50ZXIoZW50ZXIpOwogICAgICBpZiAoZW50ZXIpIGVudGVyID0gZW50ZXIuc2VsZWN0aW9uKCk7CiAgICB9IGVsc2UgewogICAgICBlbnRlciA9IGVudGVyLmFwcGVuZChvbmVudGVyICsgIiIpOwogICAgfQogICAgaWYgKG9udXBkYXRlICE9IG51bGwpIHsKICAgICAgdXBkYXRlID0gb251cGRhdGUodXBkYXRlKTsKICAgICAgaWYgKHVwZGF0ZSkgdXBkYXRlID0gdXBkYXRlLnNlbGVjdGlvbigpOwogICAgfQogICAgaWYgKG9uZXhpdCA9PSBudWxsKSBleGl0LnJlbW92ZSgpO2Vsc2Ugb25leGl0KGV4aXQpOwogICAgcmV0dXJuIGVudGVyICYmIHVwZGF0ZSA/IGVudGVyLm1lcmdlKHVwZGF0ZSkub3JkZXIoKSA6IHVwZGF0ZTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9tZXJnZSAoY29udGV4dCkgewogICAgdmFyIHNlbGVjdGlvbiA9IGNvbnRleHQuc2VsZWN0aW9uID8gY29udGV4dC5zZWxlY3Rpb24oKSA6IGNvbnRleHQ7CiAgICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gc2VsZWN0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cDBbaV0gfHwgZ3JvdXAxW2ldKSB7CiAgICAgICAgICBtZXJnZVtpXSA9IG5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmb3IgKDsgaiA8IG0wOyArK2opIHsKICAgICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTsKICAgIH0KICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEobWVyZ2VzLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9vcmRlciAoKSB7CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAtMSwgbSA9IGdyb3Vwcy5sZW5ndGg7ICsraiA8IG07KSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICBpZiAobmV4dCAmJiBub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG5leHQpIF4gNCkgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTsKICAgICAgICAgIG5leHQgPSBub2RlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fc29ydCAoY29tcGFyZSkgewogICAgaWYgKCFjb21wYXJlKSBjb21wYXJlID0gYXNjZW5kaW5nOwogICAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikgewogICAgICByZXR1cm4gYSAmJiBiID8gY29tcGFyZShhLl9fZGF0YV9fLCBiLl9fZGF0YV9fKSA6ICFhIC0gIWI7CiAgICB9CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzb3J0Z3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc29ydGdyb3VwID0gc29ydGdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICBzb3J0Z3JvdXBbaV0gPSBub2RlOwogICAgICAgIH0KICAgICAgfQogICAgICBzb3J0Z3JvdXAuc29ydChjb21wYXJlTm9kZSk7CiAgICB9CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7CiAgfQogIGZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7CiAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fY2FsbCAoKSB7CiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbMF07CiAgICBhcmd1bWVudHNbMF0gPSB0aGlzOwogICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX25vZGVzICgpIHsKICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMpOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX25vZGUgKCkgewogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgdmFyIG5vZGUgPSBncm91cFtpXTsKICAgICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX3NpemUgKCkgewogICAgbGV0IHNpemUgPSAwOwogICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMpICsrc2l6ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogICAgcmV0dXJuIHNpemU7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZW1wdHkgKCkgewogICAgcmV0dXJuICF0aGlzLm5vZGUoKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9lYWNoIChjYWxsYmFjaykgewogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgY2FsbGJhY2suY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gYXR0clJlbW92ZSQxKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0clJlbW92ZU5TJDEoZnVsbG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJDb25zdGFudCQxKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyQ29uc3RhbnROUyQxKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJGdW5jdGlvbiQxKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO2Vsc2UgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdik7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyRnVuY3Rpb25OUyQxKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAodiA9PSBudWxsKSB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7ZWxzZSB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgdik7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fYXR0ciAobmFtZSwgdmFsdWUpIHsKICAgIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpOwogICAgICByZXR1cm4gZnVsbG5hbWUubG9jYWwgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCkgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsID8gZnVsbG5hbWUubG9jYWwgPyBhdHRyUmVtb3ZlTlMkMSA6IGF0dHJSZW1vdmUkMSA6IHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IGZ1bGxuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMkMSA6IGF0dHJGdW5jdGlvbiQxIDogZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyQxIDogYXR0ckNvbnN0YW50JDEpKGZ1bGxuYW1lLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gZGVmYXVsdFZpZXcgKG5vZGUpIHsKICAgIHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IC8vIG5vZGUgaXMgYSBOb2RlCiAgICB8fCBub2RlLmRvY3VtZW50ICYmIG5vZGUgLy8gbm9kZSBpcyBhIFdpbmRvdwogICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50CiAgfQoKICBmdW5jdGlvbiBzdHlsZVJlbW92ZSQxKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUNvbnN0YW50JDEobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlLCBwcmlvcml0eSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uJDEobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7ZWxzZSB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHYsIHByaW9yaXR5KTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zdHlsZSAobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyBzdHlsZVJlbW92ZSQxIDogdHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gc3R5bGVGdW5jdGlvbiQxIDogc3R5bGVDb25zdGFudCQxKShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/ICIiIDogcHJpb3JpdHkpKSA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpOwogIH0KICBmdW5jdGlvbiBzdHlsZVZhbHVlKG5vZGUsIG5hbWUpIHsKICAgIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSkgfHwgZGVmYXVsdFZpZXcobm9kZSkuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpOwogIH0KCiAgZnVuY3Rpb24gcHJvcGVydHlSZW1vdmUobmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgZGVsZXRlIHRoaXNbbmFtZV07CiAgICB9OwogIH0KICBmdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzW25hbWVdID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiBwcm9wZXJ0eUZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIGRlbGV0ZSB0aGlzW25hbWVdO2Vsc2UgdGhpc1tuYW1lXSA9IHY7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fcHJvcGVydHkgKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IHByb3BlcnR5RnVuY3Rpb24gOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpIDogdGhpcy5ub2RlKClbbmFtZV07CiAgfQoKICBmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykgewogICAgcmV0dXJuIHN0cmluZy50cmltKCkuc3BsaXQoL158XHMrLyk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7CiAgICByZXR1cm4gbm9kZS5jbGFzc0xpc3QgfHwgbmV3IENsYXNzTGlzdChub2RlKTsKICB9CiAgZnVuY3Rpb24gQ2xhc3NMaXN0KG5vZGUpIHsKICAgIHRoaXMuX25vZGUgPSBub2RlOwogICAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpIHx8ICIiKTsKICB9CiAgQ2xhc3NMaXN0LnByb3RvdHlwZSA9IHsKICAgIGFkZDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdmFyIGkgPSB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpOwogICAgICBpZiAoaSA8IDApIHsKICAgICAgICB0aGlzLl9uYW1lcy5wdXNoKG5hbWUpOwogICAgICAgIHRoaXMuX25vZGUuc2V0QXR0cmlidXRlKCJjbGFzcyIsIHRoaXMuX25hbWVzLmpvaW4oIiAiKSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTsKICAgICAgaWYgKGkgPj0gMCkgewogICAgICAgIHRoaXMuX25hbWVzLnNwbGljZShpLCAxKTsKICAgICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCB0aGlzLl9uYW1lcy5qb2luKCIgIikpOwogICAgICB9CiAgICB9LAogICAgY29udGFpbnM6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHJldHVybiB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpID49IDA7CiAgICB9CiAgfTsKICBmdW5jdGlvbiBjbGFzc2VkQWRkKG5vZGUsIG5hbWVzKSB7CiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwKICAgICAgaSA9IC0xLAogICAgICBuID0gbmFtZXMubGVuZ3RoOwogICAgd2hpbGUgKCsraSA8IG4pIGxpc3QuYWRkKG5hbWVzW2ldKTsKICB9CiAgZnVuY3Rpb24gY2xhc3NlZFJlbW92ZShub2RlLCBuYW1lcykgewogICAgdmFyIGxpc3QgPSBjbGFzc0xpc3Qobm9kZSksCiAgICAgIGkgPSAtMSwKICAgICAgbiA9IG5hbWVzLmxlbmd0aDsKICAgIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNsYXNzZWRGYWxzZShuYW1lcykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgY2xhc3NlZFJlbW92ZSh0aGlzLCBuYW1lcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjbGFzc2VkRnVuY3Rpb24obmFtZXMsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAodmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKSA/IGNsYXNzZWRBZGQgOiBjbGFzc2VkUmVtb3ZlKSh0aGlzLCBuYW1lcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fY2xhc3NlZCAobmFtZSwgdmFsdWUpIHsKICAgIHZhciBuYW1lcyA9IGNsYXNzQXJyYXkobmFtZSArICIiKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksCiAgICAgICAgaSA9IC0xLAogICAgICAgIG4gPSBuYW1lcy5sZW5ndGg7CiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIWxpc3QuY29udGFpbnMobmFtZXNbaV0pKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWUgPyBjbGFzc2VkVHJ1ZSA6IGNsYXNzZWRGYWxzZSkobmFtZXMsIHZhbHVlKSk7CiAgfQoKICBmdW5jdGlvbiB0ZXh0UmVtb3ZlKCkgewogICAgdGhpcy50ZXh0Q29udGVudCA9ICIiOwogIH0KICBmdW5jdGlvbiB0ZXh0Q29uc3RhbnQkMSh2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdGV4dEZ1bmN0aW9uJDEodmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/ICIiIDogdjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl90ZXh0ICh2YWx1ZSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbCA/IHRleHRSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gdGV4dEZ1bmN0aW9uJDEgOiB0ZXh0Q29uc3RhbnQkMSkodmFsdWUpKSA6IHRoaXMubm9kZSgpLnRleHRDb250ZW50OwogIH0KCiAgZnVuY3Rpb24gaHRtbFJlbW92ZSgpIHsKICAgIHRoaXMuaW5uZXJIVE1MID0gIiI7CiAgfQogIGZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGh0bWxGdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB0aGlzLmlubmVySFRNTCA9IHYgPT0gbnVsbCA/ICIiIDogdjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9odG1sICh2YWx1ZSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbCA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gaHRtbEZ1bmN0aW9uIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpIDogdGhpcy5ub2RlKCkuaW5uZXJIVE1MOwogIH0KCiAgZnVuY3Rpb24gcmFpc2UoKSB7CiAgICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpOwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fcmFpc2UgKCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7CiAgfQoKICBmdW5jdGlvbiBsb3dlcigpIHsKICAgIGlmICh0aGlzLnByZXZpb3VzU2libGluZykgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLCB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9sb3dlciAoKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGxvd2VyKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9hcHBlbmQgKG5hbWUpIHsKICAgIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gImZ1bmN0aW9uIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpOwogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBjb25zdGFudE51bGwoKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX2luc2VydCAobmFtZSwgYmVmb3JlKSB7CiAgICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09ICJmdW5jdGlvbiIgPyBuYW1lIDogY3JlYXRvcihuYW1lKSwKICAgICAgc2VsZWN0ID0gYmVmb3JlID09IG51bGwgPyBjb25zdGFudE51bGwgOiB0eXBlb2YgYmVmb3JlID09PSAiZnVuY3Rpb24iID8gYmVmb3JlIDogc2VsZWN0b3IoYmVmb3JlKTsKICAgIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLmluc2VydEJlZm9yZShjcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgbnVsbCk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7CiAgICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9yZW1vdmUgKCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChyZW1vdmUpOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lU2hhbGxvdygpIHsKICAgIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKGZhbHNlKSwKICAgICAgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZURlZXAoKSB7CiAgICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZSh0cnVlKSwKICAgICAgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZSAoZGVlcCkgewogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGRlZXAgPyBzZWxlY3Rpb25fY2xvbmVEZWVwIDogc2VsZWN0aW9uX2Nsb25lU2hhbGxvdyk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZGF0dW0gKHZhbHVlKSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMucHJvcGVydHkoIl9fZGF0YV9fIiwgdmFsdWUpIDogdGhpcy5ub2RlKCkuX19kYXRhX187CiAgfQoKICBmdW5jdGlvbiBjb250ZXh0TGlzdGVuZXIobGlzdGVuZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCwgdGhpcy5fX2RhdGFfXyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZXMpIHsKICAgIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxzKy8pLm1hcChmdW5jdGlvbiAodCkgewogICAgICB2YXIgbmFtZSA9ICIiLAogICAgICAgIGkgPSB0LmluZGV4T2YoIi4iKTsKICAgICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTsKICAgICAgcmV0dXJuIHsKICAgICAgICB0eXBlOiB0LAogICAgICAgIG5hbWU6IG5hbWUKICAgICAgfTsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBvblJlbW92ZSh0eXBlbmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9uID0gdGhpcy5fX29uOwogICAgICBpZiAoIW9uKSByZXR1cm47CiAgICAgIGZvciAodmFyIGogPSAwLCBpID0gLTEsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHsKICAgICAgICBpZiAobyA9IG9uW2pdLCAoIXR5cGVuYW1lLnR5cGUgfHwgby50eXBlID09PSB0eXBlbmFtZS50eXBlKSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHsKICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9uWysraV0gPSBvOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoKytpKSBvbi5sZW5ndGggPSBpO2Vsc2UgZGVsZXRlIHRoaXMuX19vbjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9uID0gdGhpcy5fX29uLAogICAgICAgIG8sCiAgICAgICAgbGlzdGVuZXIgPSBjb250ZXh0TGlzdGVuZXIodmFsdWUpOwogICAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoOyBqIDwgbTsgKytqKSB7CiAgICAgICAgaWYgKChvID0gb25bal0pLnR5cGUgPT09IHR5cGVuYW1lLnR5cGUgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7CiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoby50eXBlLCBvLmxpc3RlbmVyLCBvLm9wdGlvbnMpOwogICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciA9IGxpc3RlbmVyLCBvLm9wdGlvbnMgPSBvcHRpb25zKTsKICAgICAgICAgIG8udmFsdWUgPSB2YWx1ZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGVuYW1lLnR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTsKICAgICAgbyA9IHsKICAgICAgICB0eXBlOiB0eXBlbmFtZS50eXBlLAogICAgICAgIG5hbWU6IHR5cGVuYW1lLm5hbWUsCiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lciwKICAgICAgICBvcHRpb25zOiBvcHRpb25zCiAgICAgIH07CiAgICAgIGlmICghb24pIHRoaXMuX19vbiA9IFtvXTtlbHNlIG9uLnB1c2gobyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fb24gKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykgewogICAgdmFyIHR5cGVuYW1lcyA9IHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lICsgIiIpLAogICAgICBpLAogICAgICBuID0gdHlwZW5hbWVzLmxlbmd0aCwKICAgICAgdDsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgb24gPSB0aGlzLm5vZGUoKS5fX29uOwogICAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7CiAgICAgICAgZm9yIChpID0gMCwgbyA9IG9uW2pdOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICBpZiAoKHQgPSB0eXBlbmFtZXNbaV0pLnR5cGUgPT09IG8udHlwZSAmJiB0Lm5hbWUgPT09IG8ubmFtZSkgewogICAgICAgICAgICByZXR1cm4gby52YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgb24gPSB2YWx1ZSA/IG9uQWRkIDogb25SZW1vdmU7CiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB0aGlzLmVhY2gob24odHlwZW5hbWVzW2ldLCB2YWx1ZSwgb3B0aW9ucykpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KG5vZGUsIHR5cGUsIHBhcmFtcykgewogICAgdmFyIHdpbmRvdyA9IGRlZmF1bHRWaWV3KG5vZGUpLAogICAgICBldmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDsKICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgZXZlbnQgPSBuZXcgZXZlbnQodHlwZSwgcGFyYW1zKTsKICAgIH0gZWxzZSB7CiAgICAgIGV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpOwogICAgICBpZiAocGFyYW1zKSBldmVudC5pbml0RXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlKSwgZXZlbnQuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtlbHNlIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UpOwogICAgfQogICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICB9CiAgZnVuY3Rpb24gZGlzcGF0Y2hDb25zdGFudCh0eXBlLCBwYXJhbXMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBkaXNwYXRjaEZ1bmN0aW9uKHR5cGUsIHBhcmFtcykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcywgdHlwZSwgcGFyYW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX2Rpc3BhdGNoICh0eXBlLCBwYXJhbXMpIHsKICAgIHJldHVybiB0aGlzLmVhY2goKHR5cGVvZiBwYXJhbXMgPT09ICJmdW5jdGlvbiIgPyBkaXNwYXRjaEZ1bmN0aW9uIDogZGlzcGF0Y2hDb25zdGFudCkodHlwZSwgcGFyYW1zKSk7CiAgfQoKICBmdW5jdGlvbiogc2VsZWN0aW9uX2l0ZXJhdG9yICgpIHsKICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZTsgaSA8IG47ICsraSkgewogICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHlpZWxkIG5vZGU7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciByb290ID0gW251bGxdOwogIGZ1bmN0aW9uIFNlbGVjdGlvbiQxKGdyb3VwcywgcGFyZW50cykgewogICAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzOwogICAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbigpIHsKICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEoW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpczsKICB9CiAgU2VsZWN0aW9uJDEucHJvdG90eXBlID0gc2VsZWN0aW9uLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBTZWxlY3Rpb24kMSwKICAgIHNlbGVjdDogc2VsZWN0aW9uX3NlbGVjdCwKICAgIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCwKICAgIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQsCiAgICBzZWxlY3RDaGlsZHJlbjogc2VsZWN0aW9uX3NlbGVjdENoaWxkcmVuLAogICAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLAogICAgZGF0YTogc2VsZWN0aW9uX2RhdGEsCiAgICBlbnRlcjogc2VsZWN0aW9uX2VudGVyLAogICAgZXhpdDogc2VsZWN0aW9uX2V4aXQsCiAgICBqb2luOiBzZWxlY3Rpb25fam9pbiwKICAgIG1lcmdlOiBzZWxlY3Rpb25fbWVyZ2UsCiAgICBzZWxlY3Rpb246IHNlbGVjdGlvbl9zZWxlY3Rpb24sCiAgICBvcmRlcjogc2VsZWN0aW9uX29yZGVyLAogICAgc29ydDogc2VsZWN0aW9uX3NvcnQsCiAgICBjYWxsOiBzZWxlY3Rpb25fY2FsbCwKICAgIG5vZGVzOiBzZWxlY3Rpb25fbm9kZXMsCiAgICBub2RlOiBzZWxlY3Rpb25fbm9kZSwKICAgIHNpemU6IHNlbGVjdGlvbl9zaXplLAogICAgZW1wdHk6IHNlbGVjdGlvbl9lbXB0eSwKICAgIGVhY2g6IHNlbGVjdGlvbl9lYWNoLAogICAgYXR0cjogc2VsZWN0aW9uX2F0dHIsCiAgICBzdHlsZTogc2VsZWN0aW9uX3N0eWxlLAogICAgcHJvcGVydHk6IHNlbGVjdGlvbl9wcm9wZXJ0eSwKICAgIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLAogICAgdGV4dDogc2VsZWN0aW9uX3RleHQsCiAgICBodG1sOiBzZWxlY3Rpb25faHRtbCwKICAgIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsCiAgICBsb3dlcjogc2VsZWN0aW9uX2xvd2VyLAogICAgYXBwZW5kOiBzZWxlY3Rpb25fYXBwZW5kLAogICAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LAogICAgcmVtb3ZlOiBzZWxlY3Rpb25fcmVtb3ZlLAogICAgY2xvbmU6IHNlbGVjdGlvbl9jbG9uZSwKICAgIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sCiAgICBvbjogc2VsZWN0aW9uX29uLAogICAgZGlzcGF0Y2g6IHNlbGVjdGlvbl9kaXNwYXRjaCwKICAgIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25faXRlcmF0b3IKICB9OwoKICBmdW5jdGlvbiBkZWZpbmUgKGNvbnN0cnVjdG9yLCBmYWN0b3J5LCBwcm90b3R5cGUpIHsKICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGZhY3RvcnkucHJvdG90eXBlID0gcHJvdG90eXBlOwogICAgcHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7CiAgfQogIGZ1bmN0aW9uIGV4dGVuZChwYXJlbnQsIGRlZmluaXRpb24pIHsKICAgIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5wcm90b3R5cGUpOwogICAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldOwogICAgcmV0dXJuIHByb3RvdHlwZTsKICB9CgogIGZ1bmN0aW9uIENvbG9yKCkge30KICB2YXIgZGFya2VyID0gMC43OwogIHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7CiAgdmFyIHJlSSA9ICJcXHMqKFsrLV0/XFxkKylcXHMqIiwKICAgIHJlTiA9ICJcXHMqKFsrLV0/KD86XFxkKlxcLik/XFxkKyg/OltlRV1bKy1dP1xcZCspPylcXHMqIiwKICAgIHJlUCA9ICJcXHMqKFsrLV0/KD86XFxkKlxcLik/XFxkKyg/OltlRV1bKy1dP1xcZCspPyklXFxzKiIsCiAgICByZUhleCA9IC9eIyhbMC05YS1mXXszLDh9KSQvLAogICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChgXnJnYlxcKCR7cmVJfSwke3JlSX0sJHtyZUl9XFwpJGApLAogICAgcmVSZ2JQZXJjZW50ID0gbmV3IFJlZ0V4cChgXnJnYlxcKCR7cmVQfSwke3JlUH0sJHtyZVB9XFwpJGApLAogICAgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoYF5yZ2JhXFwoJHtyZUl9LCR7cmVJfSwke3JlSX0sJHtyZU59XFwpJGApLAogICAgcmVSZ2JhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5yZ2JhXFwoJHtyZVB9LCR7cmVQfSwke3JlUH0sJHtyZU59XFwpJGApLAogICAgcmVIc2xQZXJjZW50ID0gbmV3IFJlZ0V4cChgXmhzbFxcKCR7cmVOfSwke3JlUH0sJHtyZVB9XFwpJGApLAogICAgcmVIc2xhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5oc2xhXFwoJHtyZU59LCR7cmVQfSwke3JlUH0sJHtyZU59XFwpJGApOwogIHZhciBuYW1lZCA9IHsKICAgIGFsaWNlYmx1ZTogMHhmMGY4ZmYsCiAgICBhbnRpcXVld2hpdGU6IDB4ZmFlYmQ3LAogICAgYXF1YTogMHgwMGZmZmYsCiAgICBhcXVhbWFyaW5lOiAweDdmZmZkNCwKICAgIGF6dXJlOiAweGYwZmZmZiwKICAgIGJlaWdlOiAweGY1ZjVkYywKICAgIGJpc3F1ZTogMHhmZmU0YzQsCiAgICBibGFjazogMHgwMDAwMDAsCiAgICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsCiAgICBibHVlOiAweDAwMDBmZiwKICAgIGJsdWV2aW9sZXQ6IDB4OGEyYmUyLAogICAgYnJvd246IDB4YTUyYTJhLAogICAgYnVybHl3b29kOiAweGRlYjg4NywKICAgIGNhZGV0Ymx1ZTogMHg1ZjllYTAsCiAgICBjaGFydHJldXNlOiAweDdmZmYwMCwKICAgIGNob2NvbGF0ZTogMHhkMjY5MWUsCiAgICBjb3JhbDogMHhmZjdmNTAsCiAgICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsCiAgICBjb3Juc2lsazogMHhmZmY4ZGMsCiAgICBjcmltc29uOiAweGRjMTQzYywKICAgIGN5YW46IDB4MDBmZmZmLAogICAgZGFya2JsdWU6IDB4MDAwMDhiLAogICAgZGFya2N5YW46IDB4MDA4YjhiLAogICAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsCiAgICBkYXJrZ3JheTogMHhhOWE5YTksCiAgICBkYXJrZ3JlZW46IDB4MDA2NDAwLAogICAgZGFya2dyZXk6IDB4YTlhOWE5LAogICAgZGFya2toYWtpOiAweGJkYjc2YiwKICAgIGRhcmttYWdlbnRhOiAweDhiMDA4YiwKICAgIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZiwKICAgIGRhcmtvcmFuZ2U6IDB4ZmY4YzAwLAogICAgZGFya29yY2hpZDogMHg5OTMyY2MsCiAgICBkYXJrcmVkOiAweDhiMDAwMCwKICAgIGRhcmtzYWxtb246IDB4ZTk5NjdhLAogICAgZGFya3NlYWdyZWVuOiAweDhmYmM4ZiwKICAgIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLAogICAgZGFya3NsYXRlZ3JheTogMHgyZjRmNGYsCiAgICBkYXJrc2xhdGVncmV5OiAweDJmNGY0ZiwKICAgIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLAogICAgZGFya3Zpb2xldDogMHg5NDAwZDMsCiAgICBkZWVwcGluazogMHhmZjE0OTMsCiAgICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsCiAgICBkaW1ncmF5OiAweDY5Njk2OSwKICAgIGRpbWdyZXk6IDB4Njk2OTY5LAogICAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsCiAgICBmaXJlYnJpY2s6IDB4YjIyMjIyLAogICAgZmxvcmFsd2hpdGU6IDB4ZmZmYWYwLAogICAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLAogICAgZnVjaHNpYTogMHhmZjAwZmYsCiAgICBnYWluc2Jvcm86IDB4ZGNkY2RjLAogICAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsCiAgICBnb2xkOiAweGZmZDcwMCwKICAgIGdvbGRlbnJvZDogMHhkYWE1MjAsCiAgICBncmF5OiAweDgwODA4MCwKICAgIGdyZWVuOiAweDAwODAwMCwKICAgIGdyZWVueWVsbG93OiAweGFkZmYyZiwKICAgIGdyZXk6IDB4ODA4MDgwLAogICAgaG9uZXlkZXc6IDB4ZjBmZmYwLAogICAgaG90cGluazogMHhmZjY5YjQsCiAgICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLAogICAgaW5kaWdvOiAweDRiMDA4MiwKICAgIGl2b3J5OiAweGZmZmZmMCwKICAgIGtoYWtpOiAweGYwZTY4YywKICAgIGxhdmVuZGVyOiAweGU2ZTZmYSwKICAgIGxhdmVuZGVyYmx1c2g6IDB4ZmZmMGY1LAogICAgbGF3bmdyZWVuOiAweDdjZmMwMCwKICAgIGxlbW9uY2hpZmZvbjogMHhmZmZhY2QsCiAgICBsaWdodGJsdWU6IDB4YWRkOGU2LAogICAgbGlnaHRjb3JhbDogMHhmMDgwODAsCiAgICBsaWdodGN5YW46IDB4ZTBmZmZmLAogICAgbGlnaHRnb2xkZW5yb2R5ZWxsb3c6IDB4ZmFmYWQyLAogICAgbGlnaHRncmF5OiAweGQzZDNkMywKICAgIGxpZ2h0Z3JlZW46IDB4OTBlZTkwLAogICAgbGlnaHRncmV5OiAweGQzZDNkMywKICAgIGxpZ2h0cGluazogMHhmZmI2YzEsCiAgICBsaWdodHNhbG1vbjogMHhmZmEwN2EsCiAgICBsaWdodHNlYWdyZWVuOiAweDIwYjJhYSwKICAgIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsCiAgICBsaWdodHNsYXRlZ3JheTogMHg3Nzg4OTksCiAgICBsaWdodHNsYXRlZ3JleTogMHg3Nzg4OTksCiAgICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsCiAgICBsaWdodHllbGxvdzogMHhmZmZmZTAsCiAgICBsaW1lOiAweDAwZmYwMCwKICAgIGxpbWVncmVlbjogMHgzMmNkMzIsCiAgICBsaW5lbjogMHhmYWYwZTYsCiAgICBtYWdlbnRhOiAweGZmMDBmZiwKICAgIG1hcm9vbjogMHg4MDAwMDAsCiAgICBtZWRpdW1hcXVhbWFyaW5lOiAweDY2Y2RhYSwKICAgIG1lZGl1bWJsdWU6IDB4MDAwMGNkLAogICAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMywKICAgIG1lZGl1bXB1cnBsZTogMHg5MzcwZGIsCiAgICBtZWRpdW1zZWFncmVlbjogMHgzY2IzNzEsCiAgICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLAogICAgbWVkaXVtc3ByaW5nZ3JlZW46IDB4MDBmYTlhLAogICAgbWVkaXVtdHVycXVvaXNlOiAweDQ4ZDFjYywKICAgIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsCiAgICBtaWRuaWdodGJsdWU6IDB4MTkxOTcwLAogICAgbWludGNyZWFtOiAweGY1ZmZmYSwKICAgIG1pc3R5cm9zZTogMHhmZmU0ZTEsCiAgICBtb2NjYXNpbjogMHhmZmU0YjUsCiAgICBuYXZham93aGl0ZTogMHhmZmRlYWQsCiAgICBuYXZ5OiAweDAwMDA4MCwKICAgIG9sZGxhY2U6IDB4ZmRmNWU2LAogICAgb2xpdmU6IDB4ODA4MDAwLAogICAgb2xpdmVkcmFiOiAweDZiOGUyMywKICAgIG9yYW5nZTogMHhmZmE1MDAsCiAgICBvcmFuZ2VyZWQ6IDB4ZmY0NTAwLAogICAgb3JjaGlkOiAweGRhNzBkNiwKICAgIHBhbGVnb2xkZW5yb2Q6IDB4ZWVlOGFhLAogICAgcGFsZWdyZWVuOiAweDk4ZmI5OCwKICAgIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLAogICAgcGFsZXZpb2xldHJlZDogMHhkYjcwOTMsCiAgICBwYXBheWF3aGlwOiAweGZmZWZkNSwKICAgIHBlYWNocHVmZjogMHhmZmRhYjksCiAgICBwZXJ1OiAweGNkODUzZiwKICAgIHBpbms6IDB4ZmZjMGNiLAogICAgcGx1bTogMHhkZGEwZGQsCiAgICBwb3dkZXJibHVlOiAweGIwZTBlNiwKICAgIHB1cnBsZTogMHg4MDAwODAsCiAgICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSwKICAgIHJlZDogMHhmZjAwMDAsCiAgICByb3N5YnJvd246IDB4YmM4ZjhmLAogICAgcm95YWxibHVlOiAweDQxNjllMSwKICAgIHNhZGRsZWJyb3duOiAweDhiNDUxMywKICAgIHNhbG1vbjogMHhmYTgwNzIsCiAgICBzYW5keWJyb3duOiAweGY0YTQ2MCwKICAgIHNlYWdyZWVuOiAweDJlOGI1NywKICAgIHNlYXNoZWxsOiAweGZmZjVlZSwKICAgIHNpZW5uYTogMHhhMDUyMmQsCiAgICBzaWx2ZXI6IDB4YzBjMGMwLAogICAgc2t5Ymx1ZTogMHg4N2NlZWIsCiAgICBzbGF0ZWJsdWU6IDB4NmE1YWNkLAogICAgc2xhdGVncmF5OiAweDcwODA5MCwKICAgIHNsYXRlZ3JleTogMHg3MDgwOTAsCiAgICBzbm93OiAweGZmZmFmYSwKICAgIHNwcmluZ2dyZWVuOiAweDAwZmY3ZiwKICAgIHN0ZWVsYmx1ZTogMHg0NjgyYjQsCiAgICB0YW46IDB4ZDJiNDhjLAogICAgdGVhbDogMHgwMDgwODAsCiAgICB0aGlzdGxlOiAweGQ4YmZkOCwKICAgIHRvbWF0bzogMHhmZjYzNDcsCiAgICB0dXJxdW9pc2U6IDB4NDBlMGQwLAogICAgdmlvbGV0OiAweGVlODJlZSwKICAgIHdoZWF0OiAweGY1ZGViMywKICAgIHdoaXRlOiAweGZmZmZmZiwKICAgIHdoaXRlc21va2U6IDB4ZjVmNWY1LAogICAgeWVsbG93OiAweGZmZmYwMCwKICAgIHllbGxvd2dyZWVuOiAweDlhY2QzMgogIH07CiAgZGVmaW5lKENvbG9yLCBjb2xvciwgewogICAgY29weShjaGFubmVscykgewogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLCB0aGlzLCBjaGFubmVscyk7CiAgICB9LAogICAgZGlzcGxheWFibGUoKSB7CiAgICAgIHJldHVybiB0aGlzLnJnYigpLmRpc3BsYXlhYmxlKCk7CiAgICB9LAogICAgaGV4OiBjb2xvcl9mb3JtYXRIZXgsCiAgICAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LgogICAgZm9ybWF0SGV4OiBjb2xvcl9mb3JtYXRIZXgsCiAgICBmb3JtYXRIZXg4OiBjb2xvcl9mb3JtYXRIZXg4LAogICAgZm9ybWF0SHNsOiBjb2xvcl9mb3JtYXRIc2wsCiAgICBmb3JtYXRSZ2I6IGNvbG9yX2Zvcm1hdFJnYiwKICAgIHRvU3RyaW5nOiBjb2xvcl9mb3JtYXRSZ2IKICB9KTsKICBmdW5jdGlvbiBjb2xvcl9mb3JtYXRIZXgoKSB7CiAgICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXgoKTsKICB9CiAgZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4OCgpIHsKICAgIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdEhleDgoKTsKICB9CiAgZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkgewogICAgcmV0dXJuIGhzbENvbnZlcnQodGhpcykuZm9ybWF0SHNsKCk7CiAgfQogIGZ1bmN0aW9uIGNvbG9yX2Zvcm1hdFJnYigpIHsKICAgIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdFJnYigpOwogIH0KICBmdW5jdGlvbiBjb2xvcihmb3JtYXQpIHsKICAgIHZhciBtLCBsOwogICAgZm9ybWF0ID0gKGZvcm1hdCArICIiKS50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgIHJldHVybiAobSA9IHJlSGV4LmV4ZWMoZm9ybWF0KSkgPyAobCA9IG1bMV0ubGVuZ3RoLCBtID0gcGFyc2VJbnQobVsxXSwgMTYpLCBsID09PSA2ID8gcmdibihtKSAvLyAjZmYwMDAwCiAgICA6IGwgPT09IDMgPyBuZXcgUmdiKG0gPj4gOCAmIDB4ZiB8IG0gPj4gNCAmIDB4ZjAsIG0gPj4gNCAmIDB4ZiB8IG0gJiAweGYwLCAobSAmIDB4ZikgPDwgNCB8IG0gJiAweGYsIDEpIC8vICNmMDAKICAgIDogbCA9PT0gOCA/IHJnYmEobSA+PiAyNCAmIDB4ZmYsIG0gPj4gMTYgJiAweGZmLCBtID4+IDggJiAweGZmLCAobSAmIDB4ZmYpIC8gMHhmZikgLy8gI2ZmMDAwMDAwCiAgICA6IGwgPT09IDQgPyByZ2JhKG0gPj4gMTIgJiAweGYgfCBtID4+IDggJiAweGYwLCBtID4+IDggJiAweGYgfCBtID4+IDQgJiAweGYwLCBtID4+IDQgJiAweGYgfCBtICYgMHhmMCwgKChtICYgMHhmKSA8PCA0IHwgbSAmIDB4ZikgLyAweGZmKSAvLyAjZjAwMAogICAgOiBudWxsIC8vIGludmFsaWQgaGV4CiAgICApIDogKG0gPSByZVJnYkludGVnZXIuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSwgbVsyXSwgbVszXSwgMSkgLy8gcmdiKDI1NSwgMCwgMCkKICAgIDogKG0gPSByZVJnYlBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgMSkgLy8gcmdiKDEwMCUsIDAlLCAwJSkKICAgIDogKG0gPSByZVJnYmFJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0sIG1bMl0sIG1bM10sIG1bNF0pIC8vIHJnYmEoMjU1LCAwLCAwLCAxKQogICAgOiAobSA9IHJlUmdiYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgbVs0XSkgLy8gcmdiKDEwMCUsIDAlLCAwJSwgMSkKICAgIDogKG0gPSByZUhzbFBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgMSkgLy8gaHNsKDEyMCwgNTAlLCA1MCUpCiAgICA6IChtID0gcmVIc2xhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCBtWzRdKSAvLyBoc2xhKDEyMCwgNTAlLCA1MCUsIDEpCiAgICA6IG5hbWVkLmhhc093blByb3BlcnR5KGZvcm1hdCkgPyByZ2JuKG5hbWVkW2Zvcm1hdF0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICA6IGZvcm1hdCA9PT0gInRyYW5zcGFyZW50IiA/IG5ldyBSZ2IoTmFOLCBOYU4sIE5hTiwgMCkgOiBudWxsOwogIH0KICBmdW5jdGlvbiByZ2JuKG4pIHsKICAgIHJldHVybiBuZXcgUmdiKG4gPj4gMTYgJiAweGZmLCBuID4+IDggJiAweGZmLCBuICYgMHhmZiwgMSk7CiAgfQogIGZ1bmN0aW9uIHJnYmEociwgZywgYiwgYSkgewogICAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOOwogICAgcmV0dXJuIG5ldyBSZ2IociwgZywgYiwgYSk7CiAgfQogIGZ1bmN0aW9uIHJnYkNvbnZlcnQobykgewogICAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pOwogICAgaWYgKCFvKSByZXR1cm4gbmV3IFJnYigpOwogICAgbyA9IG8ucmdiKCk7CiAgICByZXR1cm4gbmV3IFJnYihvLnIsIG8uZywgby5iLCBvLm9wYWNpdHkpOwogIH0KICBmdW5jdGlvbiByZ2IociwgZywgYiwgb3BhY2l0eSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyByZ2JDb252ZXJ0KHIpIDogbmV3IFJnYihyLCBnLCBiLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7CiAgfQogIGZ1bmN0aW9uIFJnYihyLCBnLCBiLCBvcGFjaXR5KSB7CiAgICB0aGlzLnIgPSArcjsKICAgIHRoaXMuZyA9ICtnOwogICAgdGhpcy5iID0gK2I7CiAgICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTsKICB9CiAgZGVmaW5lKFJnYiwgcmdiLCBleHRlbmQoQ29sb3IsIHsKICAgIGJyaWdodGVyKGspIHsKICAgICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspOwogICAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIGRhcmtlcihrKSB7CiAgICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspOwogICAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIHJnYigpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgY2xhbXAoKSB7CiAgICAgIHJldHVybiBuZXcgUmdiKGNsYW1waSh0aGlzLnIpLCBjbGFtcGkodGhpcy5nKSwgY2xhbXBpKHRoaXMuYiksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTsKICAgIH0sCiAgICBkaXNwbGF5YWJsZSgpIHsKICAgICAgcmV0dXJuIC0wLjUgPD0gdGhpcy5yICYmIHRoaXMuciA8IDI1NS41ICYmIC0wLjUgPD0gdGhpcy5nICYmIHRoaXMuZyA8IDI1NS41ICYmIC0wLjUgPD0gdGhpcy5iICYmIHRoaXMuYiA8IDI1NS41ICYmIDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxOwogICAgfSwKICAgIGhleDogcmdiX2Zvcm1hdEhleCwKICAgIC8vIERlcHJlY2F0ZWQhIFVzZSBjb2xvci5mb3JtYXRIZXguCiAgICBmb3JtYXRIZXg6IHJnYl9mb3JtYXRIZXgsCiAgICBmb3JtYXRIZXg4OiByZ2JfZm9ybWF0SGV4OCwKICAgIGZvcm1hdFJnYjogcmdiX2Zvcm1hdFJnYiwKICAgIHRvU3RyaW5nOiByZ2JfZm9ybWF0UmdiCiAgfSkpOwogIGZ1bmN0aW9uIHJnYl9mb3JtYXRIZXgoKSB7CiAgICByZXR1cm4gYCMke2hleCh0aGlzLnIpfSR7aGV4KHRoaXMuZyl9JHtoZXgodGhpcy5iKX1gOwogIH0KICBmdW5jdGlvbiByZ2JfZm9ybWF0SGV4OCgpIHsKICAgIHJldHVybiBgIyR7aGV4KHRoaXMucil9JHtoZXgodGhpcy5nKX0ke2hleCh0aGlzLmIpfSR7aGV4KChpc05hTih0aGlzLm9wYWNpdHkpID8gMSA6IHRoaXMub3BhY2l0eSkgKiAyNTUpfWA7CiAgfQogIGZ1bmN0aW9uIHJnYl9mb3JtYXRSZ2IoKSB7CiAgICBjb25zdCBhID0gY2xhbXBhKHRoaXMub3BhY2l0eSk7CiAgICByZXR1cm4gYCR7YSA9PT0gMSA/ICJyZ2IoIiA6ICJyZ2JhKCJ9JHtjbGFtcGkodGhpcy5yKX0sICR7Y2xhbXBpKHRoaXMuZyl9LCAke2NsYW1waSh0aGlzLmIpfSR7YSA9PT0gMSA/ICIpIiA6IGAsICR7YX0pYH1gOwogIH0KICBmdW5jdGlvbiBjbGFtcGEob3BhY2l0eSkgewogICAgcmV0dXJuIGlzTmFOKG9wYWNpdHkpID8gMSA6IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG9wYWNpdHkpKTsKICB9CiAgZnVuY3Rpb24gY2xhbXBpKHZhbHVlKSB7CiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHZhbHVlKSB8fCAwKSk7CiAgfQogIGZ1bmN0aW9uIGhleCh2YWx1ZSkgewogICAgdmFsdWUgPSBjbGFtcGkodmFsdWUpOwogICAgcmV0dXJuICh2YWx1ZSA8IDE2ID8gIjAiIDogIiIpICsgdmFsdWUudG9TdHJpbmcoMTYpOwogIH0KICBmdW5jdGlvbiBoc2xhKGgsIHMsIGwsIGEpIHsKICAgIGlmIChhIDw9IDApIGggPSBzID0gbCA9IE5hTjtlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtlbHNlIGlmIChzIDw9IDApIGggPSBOYU47CiAgICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBhKTsKICB9CiAgZnVuY3Rpb24gaHNsQ29udmVydChvKSB7CiAgICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTsKICAgIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTsKICAgIGlmICghbykgcmV0dXJuIG5ldyBIc2woKTsKICAgIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbzsKICAgIG8gPSBvLnJnYigpOwogICAgdmFyIHIgPSBvLnIgLyAyNTUsCiAgICAgIGcgPSBvLmcgLyAyNTUsCiAgICAgIGIgPSBvLmIgLyAyNTUsCiAgICAgIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpLAogICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSwKICAgICAgaCA9IE5hTiwKICAgICAgcyA9IG1heCAtIG1pbiwKICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjsKICAgIGlmIChzKSB7CiAgICAgIGlmIChyID09PSBtYXgpIGggPSAoZyAtIGIpIC8gcyArIChnIDwgYikgKiA2O2Vsc2UgaWYgKGcgPT09IG1heCkgaCA9IChiIC0gcikgLyBzICsgMjtlbHNlIGggPSAociAtIGcpIC8gcyArIDQ7CiAgICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47CiAgICAgIGggKj0gNjA7CiAgICB9IGVsc2UgewogICAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDsKICAgIH0KICAgIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIG8ub3BhY2l0eSk7CiAgfQogIGZ1bmN0aW9uIGhzbChoLCBzLCBsLCBvcGFjaXR5KSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhzbENvbnZlcnQoaCkgOiBuZXcgSHNsKGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTsKICB9CiAgZnVuY3Rpb24gSHNsKGgsIHMsIGwsIG9wYWNpdHkpIHsKICAgIHRoaXMuaCA9ICtoOwogICAgdGhpcy5zID0gK3M7CiAgICB0aGlzLmwgPSArbDsKICAgIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5OwogIH0KICBkZWZpbmUoSHNsLCBoc2wsIGV4dGVuZChDb2xvciwgewogICAgYnJpZ2h0ZXIoaykgewogICAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7CiAgICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIGRhcmtlcihrKSB7CiAgICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspOwogICAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTsKICAgIH0sCiAgICByZ2IoKSB7CiAgICAgIHZhciBoID0gdGhpcy5oICUgMzYwICsgKHRoaXMuaCA8IDApICogMzYwLAogICAgICAgIHMgPSBpc05hTihoKSB8fCBpc05hTih0aGlzLnMpID8gMCA6IHRoaXMucywKICAgICAgICBsID0gdGhpcy5sLAogICAgICAgIG0yID0gbCArIChsIDwgMC41ID8gbCA6IDEgLSBsKSAqIHMsCiAgICAgICAgbTEgPSAyICogbCAtIG0yOwogICAgICByZXR1cm4gbmV3IFJnYihoc2wycmdiKGggPj0gMjQwID8gaCAtIDI0MCA6IGggKyAxMjAsIG0xLCBtMiksIGhzbDJyZ2IoaCwgbTEsIG0yKSwgaHNsMnJnYihoIDwgMTIwID8gaCArIDI0MCA6IGggLSAxMjAsIG0xLCBtMiksIHRoaXMub3BhY2l0eSk7CiAgICB9LAogICAgY2xhbXAoKSB7CiAgICAgIHJldHVybiBuZXcgSHNsKGNsYW1waCh0aGlzLmgpLCBjbGFtcHQodGhpcy5zKSwgY2xhbXB0KHRoaXMubCksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTsKICAgIH0sCiAgICBkaXNwbGF5YWJsZSgpIHsKICAgICAgcmV0dXJuICgwIDw9IHRoaXMucyAmJiB0aGlzLnMgPD0gMSB8fCBpc05hTih0aGlzLnMpKSAmJiAwIDw9IHRoaXMubCAmJiB0aGlzLmwgPD0gMSAmJiAwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMTsKICAgIH0sCiAgICBmb3JtYXRIc2woKSB7CiAgICAgIGNvbnN0IGEgPSBjbGFtcGEodGhpcy5vcGFjaXR5KTsKICAgICAgcmV0dXJuIGAke2EgPT09IDEgPyAiaHNsKCIgOiAiaHNsYSgifSR7Y2xhbXBoKHRoaXMuaCl9LCAke2NsYW1wdCh0aGlzLnMpICogMTAwfSUsICR7Y2xhbXB0KHRoaXMubCkgKiAxMDB9JSR7YSA9PT0gMSA/ICIpIiA6IGAsICR7YX0pYH1gOwogICAgfQogIH0pKTsKICBmdW5jdGlvbiBjbGFtcGgodmFsdWUpIHsKICAgIHZhbHVlID0gKHZhbHVlIHx8IDApICUgMzYwOwogICAgcmV0dXJuIHZhbHVlIDwgMCA/IHZhbHVlICsgMzYwIDogdmFsdWU7CiAgfQogIGZ1bmN0aW9uIGNsYW1wdCh2YWx1ZSkgewogICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZhbHVlIHx8IDApKTsKICB9CgogIC8qIEZyb20gRnZEIDEzLjM3LCBDU1MgQ29sb3IgTW9kdWxlIExldmVsIDMgKi8KICBmdW5jdGlvbiBoc2wycmdiKGgsIG0xLCBtMikgewogICAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MCA6IGggPCAxODAgPyBtMiA6IGggPCAyNDAgPyBtMSArIChtMiAtIG0xKSAqICgyNDAgLSBoKSAvIDYwIDogbTEpICogMjU1OwogIH0KCiAgdmFyIGNvbnN0YW50ID0geCA9PiAoKSA9PiB4OwoKICBmdW5jdGlvbiBsaW5lYXIoYSwgZCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBhICsgdCAqIGQ7CiAgICB9OwogIH0KICBmdW5jdGlvbiBleHBvbmVudGlhbChhLCBiLCB5KSB7CiAgICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBNYXRoLnBvdyhhICsgdCAqIGIsIHkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gZ2FtbWEoeSkgewogICAgcmV0dXJuICh5ID0gK3kpID09PSAxID8gbm9nYW1tYSA6IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBiIC0gYSA/IGV4cG9uZW50aWFsKGEsIGIsIHkpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBub2dhbW1hKGEsIGIpIHsKICAgIHZhciBkID0gYiAtIGE7CiAgICByZXR1cm4gZCA/IGxpbmVhcihhLCBkKSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpOwogIH0KCiAgdmFyIGludGVycG9sYXRlUmdiID0gKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHsKICAgIHZhciBjb2xvciA9IGdhbW1hKHkpOwogICAgZnVuY3Rpb24gcmdiJDEoc3RhcnQsIGVuZCkgewogICAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IHJnYihzdGFydCkpLnIsIChlbmQgPSByZ2IoZW5kKSkuciksCiAgICAgICAgZyA9IGNvbG9yKHN0YXJ0LmcsIGVuZC5nKSwKICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLAogICAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgc3RhcnQuciA9IHIodCk7CiAgICAgICAgc3RhcnQuZyA9IGcodCk7CiAgICAgICAgc3RhcnQuYiA9IGIodCk7CiAgICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7CiAgICAgICAgcmV0dXJuIHN0YXJ0ICsgIiI7CiAgICAgIH07CiAgICB9CiAgICByZ2IkMS5nYW1tYSA9IHJnYkdhbW1hOwogICAgcmV0dXJuIHJnYiQxOwogIH0pKDEpOwoKICBmdW5jdGlvbiBpbnRlcnBvbGF0ZU51bWJlciAoYSwgYikgewogICAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gYSAqICgxIC0gdCkgKyBiICogdDsKICAgIH07CiAgfQoKICB2YXIgcmVBID0gL1stK10/KD86XGQrXC4/XGQqfFwuP1xkKykoPzpbZUVdWy0rXT9cZCspPy9nLAogICAgcmVCID0gbmV3IFJlZ0V4cChyZUEuc291cmNlLCAiZyIpOwogIGZ1bmN0aW9uIHplcm8oYikgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGI7CiAgICB9OwogIH0KICBmdW5jdGlvbiBvbmUoYikgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBiKHQpICsgIiI7CiAgICB9OwogIH0KICBmdW5jdGlvbiBpbnRlcnBvbGF0ZVN0cmluZyAoYSwgYikgewogICAgdmFyIGJpID0gcmVBLmxhc3RJbmRleCA9IHJlQi5sYXN0SW5kZXggPSAwLAogICAgICAvLyBzY2FuIGluZGV4IGZvciBuZXh0IG51bWJlciBpbiBiCiAgICAgIGFtLAogICAgICAvLyBjdXJyZW50IG1hdGNoIGluIGEKICAgICAgYm0sCiAgICAgIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYgogICAgICBicywKICAgICAgLy8gc3RyaW5nIHByZWNlZGluZyBjdXJyZW50IG51bWJlciBpbiBiLCBpZiBhbnkKICAgICAgaSA9IC0xLAogICAgICAvLyBpbmRleCBpbiBzCiAgICAgIHMgPSBbXSwKICAgICAgLy8gc3RyaW5nIGNvbnN0YW50cyBhbmQgcGxhY2Vob2xkZXJzCiAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnMKCiAgICAvLyBDb2VyY2UgaW5wdXRzIHRvIHN0cmluZ3MuCiAgICBhID0gYSArICIiLCBiID0gYiArICIiOwoKICAgIC8vIEludGVycG9sYXRlIHBhaXJzIG9mIG51bWJlcnMgaW4gYSAmIGIuCiAgICB3aGlsZSAoKGFtID0gcmVBLmV4ZWMoYSkpICYmIChibSA9IHJlQi5leGVjKGIpKSkgewogICAgICBpZiAoKGJzID0gYm0uaW5kZXgpID4gYmkpIHsKICAgICAgICAvLyBhIHN0cmluZyBwcmVjZWRlcyB0aGUgbmV4dCBudW1iZXIgaW4gYgogICAgICAgIGJzID0gYi5zbGljZShiaSwgYnMpOwogICAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZwogICAgICAgIGVsc2Ugc1srK2ldID0gYnM7CiAgICAgIH0KICAgICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7CiAgICAgICAgLy8gbnVtYmVycyBpbiBhICYgYiBtYXRjaAogICAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZwogICAgICAgIGVsc2Ugc1srK2ldID0gYm07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gaW50ZXJwb2xhdGUgbm9uLW1hdGNoaW5nIG51bWJlcnMKICAgICAgICBzWysraV0gPSBudWxsOwogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBpLAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoYW0sIGJtKQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGJpID0gcmVCLmxhc3RJbmRleDsKICAgIH0KCiAgICAvLyBBZGQgcmVtYWlucyBvZiBiLgogICAgaWYgKGJpIDwgYi5sZW5ndGgpIHsKICAgICAgYnMgPSBiLnNsaWNlKGJpKTsKICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nCiAgICAgIGVsc2Ugc1srK2ldID0gYnM7CiAgICB9CgogICAgLy8gU3BlY2lhbCBvcHRpbWl6YXRpb24gZm9yIG9ubHkgYSBzaW5nbGUgbWF0Y2guCiAgICAvLyBPdGhlcndpc2UsIGludGVycG9sYXRlIGVhY2ggb2YgdGhlIG51bWJlcnMgYW5kIHJlam9pbiB0aGUgc3RyaW5nLgogICAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IHFbMF0gPyBvbmUocVswXS54KSA6IHplcm8oYikgOiAoYiA9IHEubGVuZ3RoLCBmdW5jdGlvbiAodCkgewogICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpOwogICAgICByZXR1cm4gcy5qb2luKCIiKTsKICAgIH0pOwogIH0KCiAgdmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJOwogIHZhciBpZGVudGl0eSA9IHsKICAgIHRyYW5zbGF0ZVg6IDAsCiAgICB0cmFuc2xhdGVZOiAwLAogICAgcm90YXRlOiAwLAogICAgc2tld1g6IDAsCiAgICBzY2FsZVg6IDEsCiAgICBzY2FsZVk6IDEKICB9OwogIGZ1bmN0aW9uIGRlY29tcG9zZSAoYSwgYiwgYywgZCwgZSwgZikgewogICAgdmFyIHNjYWxlWCwgc2NhbGVZLCBza2V3WDsKICAgIGlmIChzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYikpIGEgLz0gc2NhbGVYLCBiIC89IHNjYWxlWDsKICAgIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDsKICAgIGlmIChzY2FsZVkgPSBNYXRoLnNxcnQoYyAqIGMgKyBkICogZCkpIGMgLz0gc2NhbGVZLCBkIC89IHNjYWxlWSwgc2tld1ggLz0gc2NhbGVZOwogICAgaWYgKGEgKiBkIDwgYiAqIGMpIGEgPSAtYSwgYiA9IC1iLCBza2V3WCA9IC1za2V3WCwgc2NhbGVYID0gLXNjYWxlWDsKICAgIHJldHVybiB7CiAgICAgIHRyYW5zbGF0ZVg6IGUsCiAgICAgIHRyYW5zbGF0ZVk6IGYsCiAgICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsCiAgICAgIHNrZXdYOiBNYXRoLmF0YW4oc2tld1gpICogZGVncmVlcywKICAgICAgc2NhbGVYOiBzY2FsZVgsCiAgICAgIHNjYWxlWTogc2NhbGVZCiAgICB9OwogIH0KCiAgdmFyIHN2Z05vZGU7CgogIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovCiAgZnVuY3Rpb24gcGFyc2VDc3ModmFsdWUpIHsKICAgIGNvbnN0IG0gPSBuZXcgKHR5cGVvZiBET01NYXRyaXggPT09ICJmdW5jdGlvbiIgPyBET01NYXRyaXggOiBXZWJLaXRDU1NNYXRyaXgpKHZhbHVlICsgIiIpOwogICAgcmV0dXJuIG0uaXNJZGVudGl0eSA/IGlkZW50aXR5IDogZGVjb21wb3NlKG0uYSwgbS5iLCBtLmMsIG0uZCwgbS5lLCBtLmYpOwogIH0KICBmdW5jdGlvbiBwYXJzZVN2Zyh2YWx1ZSkgewogICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBpZGVudGl0eTsKICAgIGlmICghc3ZnTm9kZSkgc3ZnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCAiZyIpOwogICAgc3ZnTm9kZS5zZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIsIHZhbHVlKTsKICAgIGlmICghKHZhbHVlID0gc3ZnTm9kZS50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpKSkgcmV0dXJuIGlkZW50aXR5OwogICAgdmFsdWUgPSB2YWx1ZS5tYXRyaXg7CiAgICByZXR1cm4gZGVjb21wb3NlKHZhbHVlLmEsIHZhbHVlLmIsIHZhbHVlLmMsIHZhbHVlLmQsIHZhbHVlLmUsIHZhbHVlLmYpOwogIH0KCiAgZnVuY3Rpb24gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2UsIHB4Q29tbWEsIHB4UGFyZW4sIGRlZ1BhcmVuKSB7CiAgICBmdW5jdGlvbiBwb3AocykgewogICAgICByZXR1cm4gcy5sZW5ndGggPyBzLnBvcCgpICsgIiAiIDogIiI7CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHsKICAgICAgaWYgKHhhICE9PSB4YiB8fCB5YSAhPT0geWIpIHsKICAgICAgICB2YXIgaSA9IHMucHVzaCgidHJhbnNsYXRlKCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pOwogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBpIC0gNCwKICAgICAgICAgIHg6IGludGVycG9sYXRlTnVtYmVyKHhhLCB4YikKICAgICAgICB9LCB7CiAgICAgICAgICBpOiBpIC0gMiwKICAgICAgICAgIHg6IGludGVycG9sYXRlTnVtYmVyKHlhLCB5YikKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh4YiB8fCB5YikgewogICAgICAgIHMucHVzaCgidHJhbnNsYXRlKCIgKyB4YiArIHB4Q29tbWEgKyB5YiArIHB4UGFyZW4pOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkgewogICAgICBpZiAoYSAhPT0gYikgewogICAgICAgIGlmIChhIC0gYiA+IDE4MCkgYiArPSAzNjA7ZWxzZSBpZiAoYiAtIGEgPiAxODApIGEgKz0gMzYwOyAvLyBzaG9ydGVzdCBwYXRoCiAgICAgICAgcS5wdXNoKHsKICAgICAgICAgIGk6IHMucHVzaChwb3AocykgKyAicm90YXRlKCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsCiAgICAgICAgICB4OiBpbnRlcnBvbGF0ZU51bWJlcihhLCBiKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGIpIHsKICAgICAgICBzLnB1c2gocG9wKHMpICsgInJvdGF0ZSgiICsgYiArIGRlZ1BhcmVuKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkgewogICAgICBpZiAoYSAhPT0gYikgewogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBzLnB1c2gocG9wKHMpICsgInNrZXdYKCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsCiAgICAgICAgICB4OiBpbnRlcnBvbGF0ZU51bWJlcihhLCBiKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGIpIHsKICAgICAgICBzLnB1c2gocG9wKHMpICsgInNrZXdYKCIgKyBiICsgZGVnUGFyZW4pOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkgewogICAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5YikgewogICAgICAgIHZhciBpID0gcy5wdXNoKHBvcChzKSArICJzY2FsZSgiLCBudWxsLCAiLCIsIG51bGwsICIpIik7CiAgICAgICAgcS5wdXNoKHsKICAgICAgICAgIGk6IGkgLSA0LAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoeGEsIHhiKQogICAgICAgIH0sIHsKICAgICAgICAgIGk6IGkgLSAyLAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoeWEsIHliKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHhiICE9PSAxIHx8IHliICE9PSAxKSB7CiAgICAgICAgcy5wdXNoKHBvcChzKSArICJzY2FsZSgiICsgeGIgKyAiLCIgKyB5YiArICIpIik7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICB2YXIgcyA9IFtdLAogICAgICAgIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVycwogICAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnMKICAgICAgYSA9IHBhcnNlKGEpLCBiID0gcGFyc2UoYik7CiAgICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpOwogICAgICByb3RhdGUoYS5yb3RhdGUsIGIucm90YXRlLCBzLCBxKTsKICAgICAgc2tld1goYS5za2V3WCwgYi5za2V3WCwgcywgcSk7CiAgICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTsKICAgICAgYSA9IGIgPSBudWxsOyAvLyBnYwogICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IC0xLAogICAgICAgICAgbiA9IHEubGVuZ3RoLAogICAgICAgICAgbzsKICAgICAgICB3aGlsZSAoKytpIDwgbikgc1sobyA9IHFbaV0pLmldID0gby54KHQpOwogICAgICAgIHJldHVybiBzLmpvaW4oIiIpOwogICAgICB9OwogICAgfTsKICB9CiAgdmFyIGludGVycG9sYXRlVHJhbnNmb3JtQ3NzID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VDc3MsICJweCwgIiwgInB4KSIsICJkZWcpIik7CiAgdmFyIGludGVycG9sYXRlVHJhbnNmb3JtU3ZnID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VTdmcsICIsICIsICIpIiwgIikiKTsKCiAgdmFyIGZyYW1lID0gMCwKICAgIC8vIGlzIGFuIGFuaW1hdGlvbiBmcmFtZSBwZW5kaW5nPwogICAgdGltZW91dCQxID0gMCwKICAgIC8vIGlzIGEgdGltZW91dCBwZW5kaW5nPwogICAgaW50ZXJ2YWwgPSAwLAogICAgLy8gYXJlIGFueSB0aW1lcnMgYWN0aXZlPwogICAgcG9rZURlbGF5ID0gMTAwMCwKICAgIC8vIGhvdyBmcmVxdWVudGx5IHdlIGNoZWNrIGZvciBjbG9jayBza2V3CiAgICB0YXNrSGVhZCwKICAgIHRhc2tUYWlsLAogICAgY2xvY2tMYXN0ID0gMCwKICAgIGNsb2NrTm93ID0gMCwKICAgIGNsb2NrU2tldyA9IDAsCiAgICBjbG9jayA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gIm9iamVjdCIgJiYgcGVyZm9ybWFuY2Uubm93ID8gcGVyZm9ybWFuY2UgOiBEYXRlLAogICAgc2V0RnJhbWUgPSB0eXBlb2Ygd2luZG93ID09PSAib2JqZWN0IiAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdykgOiBmdW5jdGlvbiAoZikgewogICAgICBzZXRUaW1lb3V0KGYsIDE3KTsKICAgIH07CiAgZnVuY3Rpb24gbm93KCkgewogICAgcmV0dXJuIGNsb2NrTm93IHx8IChzZXRGcmFtZShjbGVhck5vdyksIGNsb2NrTm93ID0gY2xvY2subm93KCkgKyBjbG9ja1NrZXcpOwogIH0KICBmdW5jdGlvbiBjbGVhck5vdygpIHsKICAgIGNsb2NrTm93ID0gMDsKICB9CiAgZnVuY3Rpb24gVGltZXIoKSB7CiAgICB0aGlzLl9jYWxsID0gdGhpcy5fdGltZSA9IHRoaXMuX25leHQgPSBudWxsOwogIH0KICBUaW1lci5wcm90b3R5cGUgPSB0aW1lci5wcm90b3R5cGUgPSB7CiAgICBjb25zdHJ1Y3RvcjogVGltZXIsCiAgICByZXN0YXJ0OiBmdW5jdGlvbiAoY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7CiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJyb3IoImNhbGxiYWNrIGlzIG5vdCBhIGZ1bmN0aW9uIik7CiAgICAgIHRpbWUgPSAodGltZSA9PSBudWxsID8gbm93KCkgOiArdGltZSkgKyAoZGVsYXkgPT0gbnVsbCA/IDAgOiArZGVsYXkpOwogICAgICBpZiAoIXRoaXMuX25leHQgJiYgdGFza1RhaWwgIT09IHRoaXMpIHsKICAgICAgICBpZiAodGFza1RhaWwpIHRhc2tUYWlsLl9uZXh0ID0gdGhpcztlbHNlIHRhc2tIZWFkID0gdGhpczsKICAgICAgICB0YXNrVGFpbCA9IHRoaXM7CiAgICAgIH0KICAgICAgdGhpcy5fY2FsbCA9IGNhbGxiYWNrOwogICAgICB0aGlzLl90aW1lID0gdGltZTsKICAgICAgc2xlZXAoKTsKICAgIH0sCiAgICBzdG9wOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLl9jYWxsKSB7CiAgICAgICAgdGhpcy5fY2FsbCA9IG51bGw7CiAgICAgICAgdGhpcy5fdGltZSA9IEluZmluaXR5OwogICAgICAgIHNsZWVwKCk7CiAgICAgIH0KICAgIH0KICB9OwogIGZ1bmN0aW9uIHRpbWVyKGNhbGxiYWNrLCBkZWxheSwgdGltZSkgewogICAgdmFyIHQgPSBuZXcgVGltZXIoKTsKICAgIHQucmVzdGFydChjYWxsYmFjaywgZGVsYXksIHRpbWUpOwogICAgcmV0dXJuIHQ7CiAgfQogIGZ1bmN0aW9uIHRpbWVyRmx1c2goKSB7CiAgICBub3coKTsgLy8gR2V0IHRoZSBjdXJyZW50IHRpbWUsIGlmIG5vdCBhbHJlYWR5IHNldC4KICAgICsrZnJhbWU7IC8vIFByZXRlbmQgd2XigJl2ZSBzZXQgYW4gYWxhcm0sIGlmIHdlIGhhdmVu4oCZdCBhbHJlYWR5LgogICAgdmFyIHQgPSB0YXNrSGVhZCwKICAgICAgZTsKICAgIHdoaWxlICh0KSB7CiAgICAgIGlmICgoZSA9IGNsb2NrTm93IC0gdC5fdGltZSkgPj0gMCkgdC5fY2FsbC5jYWxsKHVuZGVmaW5lZCwgZSk7CiAgICAgIHQgPSB0Ll9uZXh0OwogICAgfQogICAgLS1mcmFtZTsKICB9CiAgZnVuY3Rpb24gd2FrZSgpIHsKICAgIGNsb2NrTm93ID0gKGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpKSArIGNsb2NrU2tldzsKICAgIGZyYW1lID0gdGltZW91dCQxID0gMDsKICAgIHRyeSB7CiAgICAgIHRpbWVyRmx1c2goKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGZyYW1lID0gMDsKICAgICAgbmFwKCk7CiAgICAgIGNsb2NrTm93ID0gMDsKICAgIH0KICB9CiAgZnVuY3Rpb24gcG9rZSgpIHsKICAgIHZhciBub3cgPSBjbG9jay5ub3coKSwKICAgICAgZGVsYXkgPSBub3cgLSBjbG9ja0xhc3Q7CiAgICBpZiAoZGVsYXkgPiBwb2tlRGVsYXkpIGNsb2NrU2tldyAtPSBkZWxheSwgY2xvY2tMYXN0ID0gbm93OwogIH0KICBmdW5jdGlvbiBuYXAoKSB7CiAgICB2YXIgdDAsCiAgICAgIHQxID0gdGFza0hlYWQsCiAgICAgIHQyLAogICAgICB0aW1lID0gSW5maW5pdHk7CiAgICB3aGlsZSAodDEpIHsKICAgICAgaWYgKHQxLl9jYWxsKSB7CiAgICAgICAgaWYgKHRpbWUgPiB0MS5fdGltZSkgdGltZSA9IHQxLl90aW1lOwogICAgICAgIHQwID0gdDEsIHQxID0gdDEuX25leHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdDIgPSB0MS5fbmV4dCwgdDEuX25leHQgPSBudWxsOwogICAgICAgIHQxID0gdDAgPyB0MC5fbmV4dCA9IHQyIDogdGFza0hlYWQgPSB0MjsKICAgICAgfQogICAgfQogICAgdGFza1RhaWwgPSB0MDsKICAgIHNsZWVwKHRpbWUpOwogIH0KICBmdW5jdGlvbiBzbGVlcCh0aW1lKSB7CiAgICBpZiAoZnJhbWUpIHJldHVybjsgLy8gU29vbmVzdCBhbGFybSBhbHJlYWR5IHNldCwgb3Igd2lsbCBiZS4KICAgIGlmICh0aW1lb3V0JDEpIHRpbWVvdXQkMSA9IGNsZWFyVGltZW91dCh0aW1lb3V0JDEpOwogICAgdmFyIGRlbGF5ID0gdGltZSAtIGNsb2NrTm93OyAvLyBTdHJpY3RseSBsZXNzIHRoYW4gaWYgd2UgcmVjb21wdXRlZCBjbG9ja05vdy4KICAgIGlmIChkZWxheSA+IDI0KSB7CiAgICAgIGlmICh0aW1lIDwgSW5maW5pdHkpIHRpbWVvdXQkMSA9IHNldFRpbWVvdXQod2FrZSwgdGltZSAtIGNsb2NrLm5vdygpIC0gY2xvY2tTa2V3KTsKICAgICAgaWYgKGludGVydmFsKSBpbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCFpbnRlcnZhbCkgY2xvY2tMYXN0ID0gY2xvY2subm93KCksIGludGVydmFsID0gc2V0SW50ZXJ2YWwocG9rZSwgcG9rZURlbGF5KTsKICAgICAgZnJhbWUgPSAxLCBzZXRGcmFtZSh3YWtlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRpbWVvdXQgKGNhbGxiYWNrLCBkZWxheSwgdGltZSkgewogICAgdmFyIHQgPSBuZXcgVGltZXIoKTsKICAgIGRlbGF5ID0gZGVsYXkgPT0gbnVsbCA/IDAgOiArZGVsYXk7CiAgICB0LnJlc3RhcnQoZWxhcHNlZCA9PiB7CiAgICAgIHQuc3RvcCgpOwogICAgICBjYWxsYmFjayhlbGFwc2VkICsgZGVsYXkpOwogICAgfSwgZGVsYXksIHRpbWUpOwogICAgcmV0dXJuIHQ7CiAgfQoKICB2YXIgZW1wdHlPbiA9IGRpc3BhdGNoKCJzdGFydCIsICJlbmQiLCAiY2FuY2VsIiwgImludGVycnVwdCIpOwogIHZhciBlbXB0eVR3ZWVuID0gW107CiAgdmFyIENSRUFURUQgPSAwOwogIHZhciBTQ0hFRFVMRUQgPSAxOwogIHZhciBTVEFSVElORyA9IDI7CiAgdmFyIFNUQVJURUQgPSAzOwogIHZhciBSVU5OSU5HID0gNDsKICB2YXIgRU5ESU5HID0gNTsKICB2YXIgRU5ERUQgPSA2OwogIGZ1bmN0aW9uIHNjaGVkdWxlIChub2RlLCBuYW1lLCBpZCwgaW5kZXgsIGdyb3VwLCB0aW1pbmcpIHsKICAgIHZhciBzY2hlZHVsZXMgPSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIGlmICghc2NoZWR1bGVzKSBub2RlLl9fdHJhbnNpdGlvbiA9IHt9O2Vsc2UgaWYgKGlkIGluIHNjaGVkdWxlcykgcmV0dXJuOwogICAgY3JlYXRlKG5vZGUsIGlkLCB7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGluZGV4OiBpbmRleCwKICAgICAgLy8gRm9yIGNvbnRleHQgZHVyaW5nIGNhbGxiYWNrLgogICAgICBncm91cDogZ3JvdXAsCiAgICAgIC8vIEZvciBjb250ZXh0IGR1cmluZyBjYWxsYmFjay4KICAgICAgb246IGVtcHR5T24sCiAgICAgIHR3ZWVuOiBlbXB0eVR3ZWVuLAogICAgICB0aW1lOiB0aW1pbmcudGltZSwKICAgICAgZGVsYXk6IHRpbWluZy5kZWxheSwKICAgICAgZHVyYXRpb246IHRpbWluZy5kdXJhdGlvbiwKICAgICAgZWFzZTogdGltaW5nLmVhc2UsCiAgICAgIHRpbWVyOiBudWxsLAogICAgICBzdGF0ZTogQ1JFQVRFRAogICAgfSk7CiAgfQogIGZ1bmN0aW9uIGluaXQobm9kZSwgaWQpIHsKICAgIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7CiAgICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBDUkVBVEVEKSB0aHJvdyBuZXcgRXJyb3IoInRvbyBsYXRlOyBhbHJlYWR5IHNjaGVkdWxlZCIpOwogICAgcmV0dXJuIHNjaGVkdWxlOwogIH0KICBmdW5jdGlvbiBzZXQobm9kZSwgaWQpIHsKICAgIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7CiAgICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBTVEFSVEVEKSB0aHJvdyBuZXcgRXJyb3IoInRvbyBsYXRlOyBhbHJlYWR5IHJ1bm5pbmciKTsKICAgIHJldHVybiBzY2hlZHVsZTsKICB9CiAgZnVuY3Rpb24gZ2V0KG5vZGUsIGlkKSB7CiAgICB2YXIgc2NoZWR1bGUgPSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIGlmICghc2NoZWR1bGUgfHwgIShzY2hlZHVsZSA9IHNjaGVkdWxlW2lkXSkpIHRocm93IG5ldyBFcnJvcigidHJhbnNpdGlvbiBub3QgZm91bmQiKTsKICAgIHJldHVybiBzY2hlZHVsZTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlKG5vZGUsIGlkLCBzZWxmKSB7CiAgICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sCiAgICAgIHR3ZWVuOwoKICAgIC8vIEluaXRpYWxpemUgdGhlIHNlbGYgdGltZXIgd2hlbiB0aGUgdHJhbnNpdGlvbiBpcyBjcmVhdGVkLgogICAgLy8gTm90ZSB0aGUgYWN0dWFsIGRlbGF5IGlzIG5vdCBrbm93biB1bnRpbCB0aGUgZmlyc3QgY2FsbGJhY2shCiAgICBzY2hlZHVsZXNbaWRdID0gc2VsZjsKICAgIHNlbGYudGltZXIgPSB0aW1lcihzY2hlZHVsZSwgMCwgc2VsZi50aW1lKTsKICAgIGZ1bmN0aW9uIHNjaGVkdWxlKGVsYXBzZWQpIHsKICAgICAgc2VsZi5zdGF0ZSA9IFNDSEVEVUxFRDsKICAgICAgc2VsZi50aW1lci5yZXN0YXJ0KHN0YXJ0LCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpOwoKICAgICAgLy8gSWYgdGhlIGVsYXBzZWQgZGVsYXkgaXMgbGVzcyB0aGFuIG91ciBmaXJzdCBzbGVlcCwgc3RhcnQgaW1tZWRpYXRlbHkuCiAgICAgIGlmIChzZWxmLmRlbGF5IDw9IGVsYXBzZWQpIHN0YXJ0KGVsYXBzZWQgLSBzZWxmLmRlbGF5KTsKICAgIH0KICAgIGZ1bmN0aW9uIHN0YXJ0KGVsYXBzZWQpIHsKICAgICAgdmFyIGksIGosIG4sIG87CgogICAgICAvLyBJZiB0aGUgc3RhdGUgaXMgbm90IFNDSEVEVUxFRCwgdGhlbiB3ZSBwcmV2aW91c2x5IGVycm9yZWQgb24gc3RhcnQuCiAgICAgIGlmIChzZWxmLnN0YXRlICE9PSBTQ0hFRFVMRUQpIHJldHVybiBzdG9wKCk7CiAgICAgIGZvciAoaSBpbiBzY2hlZHVsZXMpIHsKICAgICAgICBvID0gc2NoZWR1bGVzW2ldOwogICAgICAgIGlmIChvLm5hbWUgIT09IHNlbGYubmFtZSkgY29udGludWU7CgogICAgICAgIC8vIFdoaWxlIHRoaXMgZWxlbWVudCBhbHJlYWR5IGhhcyBhIHN0YXJ0aW5nIHRyYW5zaXRpb24gZHVyaW5nIHRoaXMgZnJhbWUsCiAgICAgICAgLy8gZGVmZXIgc3RhcnRpbmcgYW4gaW50ZXJydXB0aW5nIHRyYW5zaXRpb24gdW50aWwgdGhhdCB0cmFuc2l0aW9uIGhhcyBhCiAgICAgICAgLy8gY2hhbmNlIHRvIHRpY2sgKGFuZCBwb3NzaWJseSBlbmQpOyBzZWUgZDMvZDMtdHJhbnNpdGlvbiM1NCEKICAgICAgICBpZiAoby5zdGF0ZSA9PT0gU1RBUlRFRCkgcmV0dXJuIHRpbWVvdXQoc3RhcnQpOwoKICAgICAgICAvLyBJbnRlcnJ1cHQgdGhlIGFjdGl2ZSB0cmFuc2l0aW9uLCBpZiBhbnkuCiAgICAgICAgaWYgKG8uc3RhdGUgPT09IFJVTk5JTkcpIHsKICAgICAgICAgIG8uc3RhdGUgPSBFTkRFRDsKICAgICAgICAgIG8udGltZXIuc3RvcCgpOwogICAgICAgICAgby5vbi5jYWxsKCJpbnRlcnJ1cHQiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTsKICAgICAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07CiAgICAgICAgfQoKICAgICAgICAvLyBDYW5jZWwgYW55IHByZS1lbXB0ZWQgdHJhbnNpdGlvbnMuCiAgICAgICAgZWxzZSBpZiAoK2kgPCBpZCkgewogICAgICAgICAgby5zdGF0ZSA9IEVOREVEOwogICAgICAgICAgby50aW1lci5zdG9wKCk7CiAgICAgICAgICBvLm9uLmNhbGwoImNhbmNlbCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIG8uaW5kZXgsIG8uZ3JvdXApOwogICAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIERlZmVyIHRoZSBmaXJzdCB0aWNrIHRvIGVuZCBvZiB0aGUgY3VycmVudCBmcmFtZTsgc2VlIGQzL2QzIzE1NzYuCiAgICAgIC8vIE5vdGUgdGhlIHRyYW5zaXRpb24gbWF5IGJlIGNhbmNlbGVkIGFmdGVyIHN0YXJ0IGFuZCBiZWZvcmUgdGhlIGZpcnN0IHRpY2shCiAgICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIHNjaGVkdWxlZCBiZWZvcmUgdGhlIHN0YXJ0IGV2ZW50OyBzZWUgZDMvZDMtdHJhbnNpdGlvbiMxNiEKICAgICAgLy8gQXNzdW1pbmcgdGhpcyBpcyBzdWNjZXNzZnVsLCBzdWJzZXF1ZW50IGNhbGxiYWNrcyBnbyBzdHJhaWdodCB0byB0aWNrLgogICAgICB0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gU1RBUlRFRCkgewogICAgICAgICAgc2VsZi5zdGF0ZSA9IFJVTk5JTkc7CiAgICAgICAgICBzZWxmLnRpbWVyLnJlc3RhcnQodGljaywgc2VsZi5kZWxheSwgc2VsZi50aW1lKTsKICAgICAgICAgIHRpY2soZWxhcHNlZCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIERpc3BhdGNoIHRoZSBzdGFydCBldmVudC4KICAgICAgLy8gTm90ZSB0aGlzIG11c3QgYmUgZG9uZSBiZWZvcmUgdGhlIHR3ZWVuIGFyZSBpbml0aWFsaXplZC4KICAgICAgc2VsZi5zdGF0ZSA9IFNUQVJUSU5HOwogICAgICBzZWxmLm9uLmNhbGwoInN0YXJ0Iiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgc2VsZi5pbmRleCwgc2VsZi5ncm91cCk7CiAgICAgIGlmIChzZWxmLnN0YXRlICE9PSBTVEFSVElORykgcmV0dXJuOyAvLyBpbnRlcnJ1cHRlZAogICAgICBzZWxmLnN0YXRlID0gU1RBUlRFRDsKCiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHR3ZWVuLCBkZWxldGluZyBudWxsIHR3ZWVuLgogICAgICB0d2VlbiA9IG5ldyBBcnJheShuID0gc2VsZi50d2Vlbi5sZW5ndGgpOwogICAgICBmb3IgKGkgPSAwLCBqID0gLTE7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobyA9IHNlbGYudHdlZW5baV0udmFsdWUuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKSkgewogICAgICAgICAgdHdlZW5bKytqXSA9IG87CiAgICAgICAgfQogICAgICB9CiAgICAgIHR3ZWVuLmxlbmd0aCA9IGogKyAxOwogICAgfQogICAgZnVuY3Rpb24gdGljayhlbGFwc2VkKSB7CiAgICAgIHZhciB0ID0gZWxhcHNlZCA8IHNlbGYuZHVyYXRpb24gPyBzZWxmLmVhc2UuY2FsbChudWxsLCBlbGFwc2VkIC8gc2VsZi5kdXJhdGlvbikgOiAoc2VsZi50aW1lci5yZXN0YXJ0KHN0b3ApLCBzZWxmLnN0YXRlID0gRU5ESU5HLCAxKSwKICAgICAgICBpID0gLTEsCiAgICAgICAgbiA9IHR3ZWVuLmxlbmd0aDsKICAgICAgd2hpbGUgKCsraSA8IG4pIHsKICAgICAgICB0d2VlbltpXS5jYWxsKG5vZGUsIHQpOwogICAgICB9CgogICAgICAvLyBEaXNwYXRjaCB0aGUgZW5kIGV2ZW50LgogICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gRU5ESU5HKSB7CiAgICAgICAgc2VsZi5vbi5jYWxsKCJlbmQiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKTsKICAgICAgICBzdG9wKCk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHN0b3AoKSB7CiAgICAgIHNlbGYuc3RhdGUgPSBFTkRFRDsKICAgICAgc2VsZi50aW1lci5zdG9wKCk7CiAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaWRdOwogICAgICBmb3IgKHZhciBpIGluIHNjaGVkdWxlcykgcmV0dXJuOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgIGRlbGV0ZSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGludGVycnVwdCAobm9kZSwgbmFtZSkgewogICAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uLAogICAgICBzY2hlZHVsZSwKICAgICAgYWN0aXZlLAogICAgICBlbXB0eSA9IHRydWUsCiAgICAgIGk7CiAgICBpZiAoIXNjaGVkdWxlcykgcmV0dXJuOwogICAgbmFtZSA9IG5hbWUgPT0gbnVsbCA/IG51bGwgOiBuYW1lICsgIiI7CiAgICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7CiAgICAgIGlmICgoc2NoZWR1bGUgPSBzY2hlZHVsZXNbaV0pLm5hbWUgIT09IG5hbWUpIHsKICAgICAgICBlbXB0eSA9IGZhbHNlOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGFjdGl2ZSA9IHNjaGVkdWxlLnN0YXRlID4gU1RBUlRJTkcgJiYgc2NoZWR1bGUuc3RhdGUgPCBFTkRJTkc7CiAgICAgIHNjaGVkdWxlLnN0YXRlID0gRU5ERUQ7CiAgICAgIHNjaGVkdWxlLnRpbWVyLnN0b3AoKTsKICAgICAgc2NoZWR1bGUub24uY2FsbChhY3RpdmUgPyAiaW50ZXJydXB0IiA6ICJjYW5jZWwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzY2hlZHVsZS5pbmRleCwgc2NoZWR1bGUuZ3JvdXApOwogICAgICBkZWxldGUgc2NoZWR1bGVzW2ldOwogICAgfQogICAgaWYgKGVtcHR5KSBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25faW50ZXJydXB0IChuYW1lKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgaW50ZXJydXB0KHRoaXMsIG5hbWUpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiB0d2VlblJlbW92ZShpZCwgbmFtZSkgewogICAgdmFyIHR3ZWVuMCwgdHdlZW4xOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSwKICAgICAgICB0d2VlbiA9IHNjaGVkdWxlLnR3ZWVuOwoKICAgICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCB0d2VlbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlLAogICAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgdHdlZW4gYW5kIHdl4oCZcmUgZG9uZSEKICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICBpZiAodHdlZW4gIT09IHR3ZWVuMCkgewogICAgICAgIHR3ZWVuMSA9IHR3ZWVuMCA9IHR3ZWVuOwogICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgICAgaWYgKHR3ZWVuMVtpXS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgICAgIHR3ZWVuMSA9IHR3ZWVuMS5zbGljZSgpOwogICAgICAgICAgICB0d2VlbjEuc3BsaWNlKGksIDEpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0d2VlbkZ1bmN0aW9uKGlkLCBuYW1lLCB2YWx1ZSkgewogICAgdmFyIHR3ZWVuMCwgdHdlZW4xOwogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLAogICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47CgogICAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsCiAgICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCB0d2VlbiBhbmQgd2XigJlyZSBkb25lIQogICAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuCiAgICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7CiAgICAgICAgdHdlZW4xID0gKHR3ZWVuMCA9IHR3ZWVuKS5zbGljZSgpOwogICAgICAgIGZvciAodmFyIHQgPSB7CiAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgfSwgaSA9IDAsIG4gPSB0d2VlbjEubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgICAgdHdlZW4xW2ldID0gdDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChpID09PSBuKSB0d2VlbjEucHVzaCh0KTsKICAgICAgfQogICAgICBzY2hlZHVsZS50d2VlbiA9IHR3ZWVuMTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fdHdlZW4gKG5hbWUsIHZhbHVlKSB7CiAgICB2YXIgaWQgPSB0aGlzLl9pZDsKICAgIG5hbWUgKz0gIiI7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHsKICAgICAgdmFyIHR3ZWVuID0gZ2V0KHRoaXMubm9kZSgpLCBpZCkudHdlZW47CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4ubGVuZ3RoLCB0OyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKCh0ID0gdHdlZW5baV0pLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgIHJldHVybiB0LnZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHJldHVybiB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyB0d2VlblJlbW92ZSA6IHR3ZWVuRnVuY3Rpb24pKGlkLCBuYW1lLCB2YWx1ZSkpOwogIH0KICBmdW5jdGlvbiB0d2VlblZhbHVlKHRyYW5zaXRpb24sIG5hbWUsIHZhbHVlKSB7CiAgICB2YXIgaWQgPSB0cmFuc2l0aW9uLl9pZDsKICAgIHRyYW5zaXRpb24uZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCk7CiAgICAgIChzY2hlZHVsZS52YWx1ZSB8fCAoc2NoZWR1bGUudmFsdWUgPSB7fSkpW25hbWVdID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0pOwogICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgIHJldHVybiBnZXQobm9kZSwgaWQpLnZhbHVlW25hbWVdOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGludGVycG9sYXRlIChhLCBiKSB7CiAgICB2YXIgYzsKICAgIHJldHVybiAodHlwZW9mIGIgPT09ICJudW1iZXIiID8gaW50ZXJwb2xhdGVOdW1iZXIgOiBiIGluc3RhbmNlb2YgY29sb3IgPyBpbnRlcnBvbGF0ZVJnYiA6IChjID0gY29sb3IoYikpID8gKGIgPSBjLCBpbnRlcnBvbGF0ZVJnYikgOiBpbnRlcnBvbGF0ZVN0cmluZykoYSwgYik7CiAgfQoKICBmdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0clJlbW92ZU5TKGZ1bGxuYW1lKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkgewogICAgdmFyIHN0cmluZzAwLAogICAgICBzdHJpbmcxID0gdmFsdWUxICsgIiIsCiAgICAgIGludGVycG9sYXRlMDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbCA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckNvbnN0YW50TlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHsKICAgIHZhciBzdHJpbmcwMCwKICAgICAgc3RyaW5nMSA9IHZhbHVlMSArICIiLAogICAgICBpbnRlcnBvbGF0ZTA7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7CiAgICB2YXIgc3RyaW5nMDAsIHN0cmluZzEwLCBpbnRlcnBvbGF0ZTA7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc3RyaW5nMCwKICAgICAgICB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSwKICAgICAgICBzdHJpbmcxOwogICAgICBpZiAodmFsdWUxID09IG51bGwpIHJldHVybiB2b2lkIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAsCiAgICAgICAgdmFsdWUxID0gdmFsdWUodGhpcyksCiAgICAgICAgc3RyaW5nMTsKICAgICAgaWYgKHZhbHVlMSA9PSBudWxsKSByZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICAgIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9hdHRyIChuYW1lLCB2YWx1ZSkgewogICAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpLAogICAgICBpID0gZnVsbG5hbWUgPT09ICJ0cmFuc2Zvcm0iID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgOiBpbnRlcnBvbGF0ZTsKICAgIHJldHVybiB0aGlzLmF0dHJUd2VlbihuYW1lLCB0eXBlb2YgdmFsdWUgPT09ICJmdW5jdGlvbiIgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbikoZnVsbG5hbWUsIGksIHR3ZWVuVmFsdWUodGhpcywgImF0dHIuIiArIG5hbWUsIHZhbHVlKSkgOiB2YWx1ZSA9PSBudWxsID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0clJlbW92ZU5TIDogYXR0clJlbW92ZSkoZnVsbG5hbWUpIDogKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKGZ1bGxuYW1lLCBpLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gYXR0ckludGVycG9sYXRlKG5hbWUsIGkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCBpLmNhbGwodGhpcywgdCkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckludGVycG9sYXRlTlMoZnVsbG5hbWUsIGkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgaS5jYWxsKHRoaXMsIHQpKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgdmFyIHQwLCBpMDsKICAgIGZ1bmN0aW9uIHR3ZWVuKCkgewogICAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiBhdHRySW50ZXJwb2xhdGVOUyhmdWxsbmFtZSwgaSk7CiAgICAgIHJldHVybiB0MDsKICAgIH0KICAgIHR3ZWVuLl92YWx1ZSA9IHZhbHVlOwogICAgcmV0dXJuIHR3ZWVuOwogIH0KICBmdW5jdGlvbiBhdHRyVHdlZW4obmFtZSwgdmFsdWUpIHsKICAgIHZhciB0MCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlKG5hbWUsIGkpOwogICAgICByZXR1cm4gdDA7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9hdHRyVHdlZW4gKG5hbWUsIHZhbHVlKSB7CiAgICB2YXIga2V5ID0gImF0dHIuIiArIG5hbWU7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlOwogICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTsKICAgIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgKGZ1bGxuYW1lLmxvY2FsID8gYXR0clR3ZWVuTlMgOiBhdHRyVHdlZW4pKGZ1bGxuYW1lLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gZGVsYXlGdW5jdGlvbihpZCwgdmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gK3ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBkZWxheUNvbnN0YW50KGlkLCB2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2RlbGF5ICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gZGVsYXlGdW5jdGlvbiA6IGRlbGF5Q29uc3RhbnQpKGlkLCB2YWx1ZSkpIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZGVsYXk7CiAgfQoKICBmdW5jdGlvbiBkdXJhdGlvbkZ1bmN0aW9uKGlkLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgc2V0KHRoaXMsIGlkKS5kdXJhdGlvbiA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gZHVyYXRpb25Db25zdGFudChpZCwgdmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSA9ICt2YWx1ZSwgZnVuY3Rpb24gKCkgewogICAgICBzZXQodGhpcywgaWQpLmR1cmF0aW9uID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2R1cmF0aW9uICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gZHVyYXRpb25GdW5jdGlvbiA6IGR1cmF0aW9uQ29uc3RhbnQpKGlkLCB2YWx1ZSkpIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZHVyYXRpb247CiAgfQoKICBmdW5jdGlvbiBlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSB7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHZhbHVlOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9lYXNlICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaChlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSkgOiBnZXQodGhpcy5ub2RlKCksIGlkKS5lYXNlOwogIH0KCiAgZnVuY3Rpb24gZWFzZVZhcnlpbmcoaWQsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh0eXBlb2YgdiAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHY7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2Vhc2VWYXJ5aW5nICh2YWx1ZSkgewogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gdGhpcy5lYWNoKGVhc2VWYXJ5aW5nKHRoaXMuX2lkLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9maWx0ZXIgKG1hdGNoKSB7CiAgICBpZiAodHlwZW9mIG1hdGNoICE9PSAiZnVuY3Rpb24iKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHsKICAgICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2l0aW9uX21lcmdlICh0cmFuc2l0aW9uKSB7CiAgICBpZiAodHJhbnNpdGlvbi5faWQgIT09IHRoaXMuX2lkKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIGZvciAodmFyIGdyb3VwczAgPSB0aGlzLl9ncm91cHMsIGdyb3VwczEgPSB0cmFuc2l0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cDBbaV0gfHwgZ3JvdXAxW2ldKSB7CiAgICAgICAgICBtZXJnZVtpXSA9IG5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmb3IgKDsgaiA8IG0wOyArK2opIHsKICAgICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTsKICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMsIHRoaXMuX25hbWUsIHRoaXMuX2lkKTsKICB9CgogIGZ1bmN0aW9uIHN0YXJ0KG5hbWUpIHsKICAgIHJldHVybiAobmFtZSArICIiKS50cmltKCkuc3BsaXQoL158XHMrLykuZXZlcnkoZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIGkgPSB0LmluZGV4T2YoIi4iKTsKICAgICAgaWYgKGkgPj0gMCkgdCA9IHQuc2xpY2UoMCwgaSk7CiAgICAgIHJldHVybiAhdCB8fCB0ID09PSAic3RhcnQiOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIG9uRnVuY3Rpb24oaWQsIG5hbWUsIGxpc3RlbmVyKSB7CiAgICB2YXIgb24wLAogICAgICBvbjEsCiAgICAgIHNpdCA9IHN0YXJ0KG5hbWUpID8gaW5pdCA6IHNldDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzY2hlZHVsZSA9IHNpdCh0aGlzLCBpZCksCiAgICAgICAgb24gPSBzY2hlZHVsZS5vbjsKCiAgICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLAogICAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdl4oCZcmUgZG9uZSEKICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICBpZiAob24gIT09IG9uMCkgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihuYW1lLCBsaXN0ZW5lcik7CiAgICAgIHNjaGVkdWxlLm9uID0gb24xOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9vbiAobmFtZSwgbGlzdGVuZXIpIHsKICAgIHZhciBpZCA9IHRoaXMuX2lkOwogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gZ2V0KHRoaXMubm9kZSgpLCBpZCkub24ub24obmFtZSkgOiB0aGlzLmVhY2gob25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpKTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZUZ1bmN0aW9uKGlkKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgICBmb3IgKHZhciBpIGluIHRoaXMuX190cmFuc2l0aW9uKSBpZiAoK2kgIT09IGlkKSByZXR1cm47CiAgICAgIGlmIChwYXJlbnQpIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fcmVtb3ZlICgpIHsKICAgIHJldHVybiB0aGlzLm9uKCJlbmQucmVtb3ZlIiwgcmVtb3ZlRnVuY3Rpb24odGhpcy5faWQpKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc2VsZWN0IChzZWxlY3QpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQgPSB0aGlzLl9pZDsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkgewogICAgICAgICAgaWYgKCJfX2RhdGFfXyIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187CiAgICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7CiAgICAgICAgICBzY2hlZHVsZShzdWJncm91cFtpXSwgbmFtZSwgaWQsIGksIHN1Ymdyb3VwLCBnZXQobm9kZSwgaWQpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc2VsZWN0QWxsIChzZWxlY3QpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQgPSB0aGlzLl9pZDsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgICAgZm9yICh2YXIgY2hpbGRyZW4gPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCksIGNoaWxkLCBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkKSwgayA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGsgPCBsOyArK2spIHsKICAgICAgICAgICAgaWYgKGNoaWxkID0gY2hpbGRyZW5ba10pIHsKICAgICAgICAgICAgICBzY2hlZHVsZShjaGlsZCwgbmFtZSwgaWQsIGssIGNoaWxkcmVuLCBpbmhlcml0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc3ViZ3JvdXBzLnB1c2goY2hpbGRyZW4pOwogICAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgcGFyZW50cywgbmFtZSwgaWQpOwogIH0KCiAgdmFyIFNlbGVjdGlvbiA9IHNlbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3I7CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9zZWxlY3Rpb24gKCkgewogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHN0eWxlTnVsbChuYW1lLCBpbnRlcnBvbGF0ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAgPSBzdHlsZVZhbHVlKHRoaXMsIG5hbWUpLAogICAgICAgIHN0cmluZzEgPSAodGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKSwgc3R5bGVWYWx1ZSh0aGlzLCBuYW1lKSk7CiAgICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbCA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCBzdHJpbmcxMCA9IHN0cmluZzEpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkgewogICAgdmFyIHN0cmluZzAwLAogICAgICBzdHJpbmcxID0gdmFsdWUxICsgIiIsCiAgICAgIGludGVycG9sYXRlMDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzdHJpbmcwID0gc3R5bGVWYWx1ZSh0aGlzLCBuYW1lKTsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAgPSBzdHlsZVZhbHVlKHRoaXMsIG5hbWUpLAogICAgICAgIHZhbHVlMSA9IHZhbHVlKHRoaXMpLAogICAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgaWYgKHZhbHVlMSA9PSBudWxsKSBzdHJpbmcxID0gdmFsdWUxID0gKHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSksIHN0eWxlVmFsdWUodGhpcywgbmFtZSkpOwogICAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGwgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMCA6IChzdHJpbmcxMCA9IHN0cmluZzEsIGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZU1heWJlUmVtb3ZlKGlkLCBuYW1lKSB7CiAgICB2YXIgb24wLAogICAgICBvbjEsCiAgICAgIGxpc3RlbmVyMCwKICAgICAga2V5ID0gInN0eWxlLiIgKyBuYW1lLAogICAgICBldmVudCA9ICJlbmQuIiArIGtleSwKICAgICAgcmVtb3ZlOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSwKICAgICAgICBvbiA9IHNjaGVkdWxlLm9uLAogICAgICAgIGxpc3RlbmVyID0gc2NoZWR1bGUudmFsdWVba2V5XSA9PSBudWxsID8gcmVtb3ZlIHx8IChyZW1vdmUgPSBzdHlsZVJlbW92ZShuYW1lKSkgOiB1bmRlZmluZWQ7CgogICAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSwKICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhCiAgICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS4KICAgICAgaWYgKG9uICE9PSBvbjAgfHwgbGlzdGVuZXIwICE9PSBsaXN0ZW5lcikgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihldmVudCwgbGlzdGVuZXIwID0gbGlzdGVuZXIpOwogICAgICBzY2hlZHVsZS5vbiA9IG9uMTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc3R5bGUgKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkgewogICAgdmFyIGkgPSAobmFtZSArPSAiIikgPT09ICJ0cmFuc2Zvcm0iID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgOiBpbnRlcnBvbGF0ZTsKICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlTnVsbChuYW1lLCBpKSkub24oImVuZC5zdHlsZS4iICsgbmFtZSwgc3R5bGVSZW1vdmUobmFtZSkpIDogdHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlRnVuY3Rpb24obmFtZSwgaSwgdHdlZW5WYWx1ZSh0aGlzLCAic3R5bGUuIiArIG5hbWUsIHZhbHVlKSkpLmVhY2goc3R5bGVNYXliZVJlbW92ZSh0aGlzLl9pZCwgbmFtZSkpIDogdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlQ29uc3RhbnQobmFtZSwgaSwgdmFsdWUpLCBwcmlvcml0eSkub24oImVuZC5zdHlsZS4iICsgbmFtZSwgbnVsbCk7CiAgfQoKICBmdW5jdGlvbiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCBpLmNhbGwodGhpcywgdCksIHByaW9yaXR5KTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHN0eWxlVHdlZW4obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICB2YXIgdCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQgPSAoaTAgPSBpKSAmJiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KTsKICAgICAgcmV0dXJuIHQ7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9zdHlsZVR3ZWVuIChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHsKICAgIHZhciBrZXkgPSAic3R5bGUuIiArIChuYW1lICs9ICIiKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIChrZXkgPSB0aGlzLnR3ZWVuKGtleSkpICYmIGtleS5fdmFsdWU7CiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTsKICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBFcnJvcigpOwogICAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBzdHlsZVR3ZWVuKG5hbWUsIHZhbHVlLCBwcmlvcml0eSA9PSBudWxsID8gIiIgOiBwcmlvcml0eSkpOwogIH0KCiAgZnVuY3Rpb24gdGV4dENvbnN0YW50KHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0ZXh0RnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2YWx1ZTEgPSB2YWx1ZSh0aGlzKTsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlMSA9PSBudWxsID8gIiIgOiB2YWx1ZTE7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX3RleHQgKHZhbHVlKSB7CiAgICByZXR1cm4gdGhpcy50d2VlbigidGV4dCIsIHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IHRleHRGdW5jdGlvbih0d2VlblZhbHVlKHRoaXMsICJ0ZXh0IiwgdmFsdWUpKSA6IHRleHRDb25zdGFudCh2YWx1ZSA9PSBudWxsID8gIiIgOiB2YWx1ZSArICIiKSk7CiAgfQoKICBmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGUoaSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHRoaXMudGV4dENvbnRlbnQgPSBpLmNhbGwodGhpcywgdCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0ZXh0VHdlZW4odmFsdWUpIHsKICAgIHZhciB0MCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgdGV4dEludGVycG9sYXRlKGkpOwogICAgICByZXR1cm4gdDA7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl90ZXh0VHdlZW4gKHZhbHVlKSB7CiAgICB2YXIga2V5ID0gInRleHQiOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTsKICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdGhpcy50d2VlbihrZXksIG51bGwpOwogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gdGhpcy50d2VlbihrZXksIHRleHRUd2Vlbih2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNpdGlvbl90cmFuc2l0aW9uICgpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQwID0gdGhpcy5faWQsCiAgICAgIGlkMSA9IG5ld0lkKCk7CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICB2YXIgaW5oZXJpdCA9IGdldChub2RlLCBpZDApOwogICAgICAgICAgc2NoZWR1bGUobm9kZSwgbmFtZSwgaWQxLCBpLCBncm91cCwgewogICAgICAgICAgICB0aW1lOiBpbmhlcml0LnRpbWUgKyBpbmhlcml0LmRlbGF5ICsgaW5oZXJpdC5kdXJhdGlvbiwKICAgICAgICAgICAgZGVsYXk6IDAsCiAgICAgICAgICAgIGR1cmF0aW9uOiBpbmhlcml0LmR1cmF0aW9uLAogICAgICAgICAgICBlYXNlOiBpbmhlcml0LmVhc2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQxKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fZW5kICgpIHsKICAgIHZhciBvbjAsCiAgICAgIG9uMSwKICAgICAgdGhhdCA9IHRoaXMsCiAgICAgIGlkID0gdGhhdC5faWQsCiAgICAgIHNpemUgPSB0aGF0LnNpemUoKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBjYW5jZWwgPSB7CiAgICAgICAgICB2YWx1ZTogcmVqZWN0CiAgICAgICAgfSwKICAgICAgICBlbmQgPSB7CiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoLS1zaXplID09PSAwKSByZXNvbHZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgdGhhdC5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLAogICAgICAgICAgb24gPSBzY2hlZHVsZS5vbjsKCiAgICAgICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsCiAgICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhCiAgICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICAgIGlmIChvbiAhPT0gb24wKSB7CiAgICAgICAgICBvbjEgPSAob24wID0gb24pLmNvcHkoKTsKICAgICAgICAgIG9uMS5fLmNhbmNlbC5wdXNoKGNhbmNlbCk7CiAgICAgICAgICBvbjEuXy5pbnRlcnJ1cHQucHVzaChjYW5jZWwpOwogICAgICAgICAgb24xLl8uZW5kLnB1c2goZW5kKTsKICAgICAgICB9CiAgICAgICAgc2NoZWR1bGUub24gPSBvbjE7CiAgICAgIH0pOwoKICAgICAgLy8gVGhlIHNlbGVjdGlvbiB3YXMgZW1wdHksIHJlc29sdmUgZW5kIGltbWVkaWF0ZWx5CiAgICAgIGlmIChzaXplID09PSAwKSByZXNvbHZlKCk7CiAgICB9KTsKICB9CgogIHZhciBpZCA9IDA7CiAgZnVuY3Rpb24gVHJhbnNpdGlvbihncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKSB7CiAgICB0aGlzLl9ncm91cHMgPSBncm91cHM7CiAgICB0aGlzLl9wYXJlbnRzID0gcGFyZW50czsKICAgIHRoaXMuX25hbWUgPSBuYW1lOwogICAgdGhpcy5faWQgPSBpZDsKICB9CiAgZnVuY3Rpb24gbmV3SWQoKSB7CiAgICByZXR1cm4gKytpZDsKICB9CiAgdmFyIHNlbGVjdGlvbl9wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlOwogIFRyYW5zaXRpb24ucHJvdG90eXBlID0gewogICAgY29uc3RydWN0b3I6IFRyYW5zaXRpb24sCiAgICBzZWxlY3Q6IHRyYW5zaXRpb25fc2VsZWN0LAogICAgc2VsZWN0QWxsOiB0cmFuc2l0aW9uX3NlbGVjdEFsbCwKICAgIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNlbGVjdENoaWxkLAogICAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9wcm90b3R5cGUuc2VsZWN0Q2hpbGRyZW4sCiAgICBmaWx0ZXI6IHRyYW5zaXRpb25fZmlsdGVyLAogICAgbWVyZ2U6IHRyYW5zaXRpb25fbWVyZ2UsCiAgICBzZWxlY3Rpb246IHRyYW5zaXRpb25fc2VsZWN0aW9uLAogICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbl90cmFuc2l0aW9uLAogICAgY2FsbDogc2VsZWN0aW9uX3Byb3RvdHlwZS5jYWxsLAogICAgbm9kZXM6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZXMsCiAgICBub2RlOiBzZWxlY3Rpb25fcHJvdG90eXBlLm5vZGUsCiAgICBzaXplOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNpemUsCiAgICBlbXB0eTogc2VsZWN0aW9uX3Byb3RvdHlwZS5lbXB0eSwKICAgIGVhY2g6IHNlbGVjdGlvbl9wcm90b3R5cGUuZWFjaCwKICAgIG9uOiB0cmFuc2l0aW9uX29uLAogICAgYXR0cjogdHJhbnNpdGlvbl9hdHRyLAogICAgYXR0clR3ZWVuOiB0cmFuc2l0aW9uX2F0dHJUd2VlbiwKICAgIHN0eWxlOiB0cmFuc2l0aW9uX3N0eWxlLAogICAgc3R5bGVUd2VlbjogdHJhbnNpdGlvbl9zdHlsZVR3ZWVuLAogICAgdGV4dDogdHJhbnNpdGlvbl90ZXh0LAogICAgdGV4dFR3ZWVuOiB0cmFuc2l0aW9uX3RleHRUd2VlbiwKICAgIHJlbW92ZTogdHJhbnNpdGlvbl9yZW1vdmUsCiAgICB0d2VlbjogdHJhbnNpdGlvbl90d2VlbiwKICAgIGRlbGF5OiB0cmFuc2l0aW9uX2RlbGF5LAogICAgZHVyYXRpb246IHRyYW5zaXRpb25fZHVyYXRpb24sCiAgICBlYXNlOiB0cmFuc2l0aW9uX2Vhc2UsCiAgICBlYXNlVmFyeWluZzogdHJhbnNpdGlvbl9lYXNlVmFyeWluZywKICAgIGVuZDogdHJhbnNpdGlvbl9lbmQsCiAgICBbU3ltYm9sLml0ZXJhdG9yXTogc2VsZWN0aW9uX3Byb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdCiAgfTsKCiAgZnVuY3Rpb24gY3ViaWNJbk91dCh0KSB7CiAgICByZXR1cm4gKCh0ICo9IDIpIDw9IDEgPyB0ICogdCAqIHQgOiAodCAtPSAyKSAqIHQgKiB0ICsgMikgLyAyOwogIH0KCiAgdmFyIGRlZmF1bHRUaW1pbmcgPSB7CiAgICB0aW1lOiBudWxsLAogICAgLy8gU2V0IG9uIHVzZS4KICAgIGRlbGF5OiAwLAogICAgZHVyYXRpb246IDI1MCwKICAgIGVhc2U6IGN1YmljSW5PdXQKICB9OwogIGZ1bmN0aW9uIGluaGVyaXQobm9kZSwgaWQpIHsKICAgIHZhciB0aW1pbmc7CiAgICB3aGlsZSAoISh0aW1pbmcgPSBub2RlLl9fdHJhbnNpdGlvbikgfHwgISh0aW1pbmcgPSB0aW1pbmdbaWRdKSkgewogICAgICBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgdHJhbnNpdGlvbiAke2lkfSBub3QgZm91bmRgKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRpbWluZzsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX3RyYW5zaXRpb24gKG5hbWUpIHsKICAgIHZhciBpZCwgdGltaW5nOwogICAgaWYgKG5hbWUgaW5zdGFuY2VvZiBUcmFuc2l0aW9uKSB7CiAgICAgIGlkID0gbmFtZS5faWQsIG5hbWUgPSBuYW1lLl9uYW1lOwogICAgfSBlbHNlIHsKICAgICAgaWQgPSBuZXdJZCgpLCAodGltaW5nID0gZGVmYXVsdFRpbWluZykudGltZSA9IG5vdygpLCBuYW1lID0gbmFtZSA9PSBudWxsID8gbnVsbCA6IG5hbWUgKyAiIjsKICAgIH0KICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIGogPSAwOyBqIDwgbTsgKytqKSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkgewogICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHsKICAgICAgICAgIHNjaGVkdWxlKG5vZGUsIG5hbWUsIGlkLCBpLCBncm91cCwgdGltaW5nIHx8IGluaGVyaXQobm9kZSwgaWQpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTsKICB9CgogIHNlbGVjdGlvbi5wcm90b3R5cGUuaW50ZXJydXB0ID0gc2VsZWN0aW9uX2ludGVycnVwdDsKICBzZWxlY3Rpb24ucHJvdG90eXBlLnRyYW5zaXRpb24gPSBzZWxlY3Rpb25fdHJhbnNpdGlvbjsKCiAgZnVuY3Rpb24gVHJhbnNmb3JtKGssIHgsIHkpIHsKICAgIHRoaXMuayA9IGs7CiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICB9CiAgVHJhbnNmb3JtLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBUcmFuc2Zvcm0sCiAgICBzY2FsZTogZnVuY3Rpb24gKGspIHsKICAgICAgcmV0dXJuIGsgPT09IDEgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmsgKiBrLCB0aGlzLngsIHRoaXMueSk7CiAgICB9LAogICAgdHJhbnNsYXRlOiBmdW5jdGlvbiAoeCwgeSkgewogICAgICByZXR1cm4geCA9PT0gMCAmIHkgPT09IDAgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmssIHRoaXMueCArIHRoaXMuayAqIHgsIHRoaXMueSArIHRoaXMuayAqIHkpOwogICAgfSwKICAgIGFwcGx5OiBmdW5jdGlvbiAocG9pbnQpIHsKICAgICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldOwogICAgfSwKICAgIGFwcGx5WDogZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIHggKiB0aGlzLmsgKyB0aGlzLng7CiAgICB9LAogICAgYXBwbHlZOiBmdW5jdGlvbiAoeSkgewogICAgICByZXR1cm4geSAqIHRoaXMuayArIHRoaXMueTsKICAgIH0sCiAgICBpbnZlcnQ6IGZ1bmN0aW9uIChsb2NhdGlvbikgewogICAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdOwogICAgfSwKICAgIGludmVydFg6IGZ1bmN0aW9uICh4KSB7CiAgICAgIHJldHVybiAoeCAtIHRoaXMueCkgLyB0aGlzLms7CiAgICB9LAogICAgaW52ZXJ0WTogZnVuY3Rpb24gKHkpIHsKICAgICAgcmV0dXJuICh5IC0gdGhpcy55KSAvIHRoaXMuazsKICAgIH0sCiAgICByZXNjYWxlWDogZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7CiAgICB9LAogICAgcmVzY2FsZVk6IGZ1bmN0aW9uICh5KSB7CiAgICAgIHJldHVybiB5LmNvcHkoKS5kb21haW4oeS5yYW5nZSgpLm1hcCh0aGlzLmludmVydFksIHRoaXMpLm1hcCh5LmludmVydCwgeSkpOwogICAgfSwKICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyB0aGlzLnggKyAiLCIgKyB0aGlzLnkgKyAiKSBzY2FsZSgiICsgdGhpcy5rICsgIikiOwogICAgfQogIH07CiAgVHJhbnNmb3JtLnByb3RvdHlwZTsKCiAgLyoKICAgIENQVE1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIQoKICAgIFZhcmlhYmxlczoKICAgICAgeCA9IG9iamVjdGl2ZSB2YWx1ZQogICAgICB2ID0gc3ViamVjdGl2ZSB2YWx1ZQogICAgICBwID0gb2JqZWN0aXZlIHByb2JhYmlsaXR5CiAgICAgIHcgPSBzdWJqZWN0aXZlIHByb2JhYmlsaXR5L2RlY2lzaW9uIHdlaWdodAogICAgICB1ID0gc3ViamVjdGl2ZSB1dGlsaXR5CgogICAgICBhID0gYWxwaGEgKGN1cnZhdHVyZSBmb3IgdmFsdWUgZnVuY3Rpb24pCiAgICAgIGwgPSBsYW1iZGEgKGxvc3MgYXZlcnNpb24gZm9yIHZhbHVlIGZ1bmN0aW9uKQogICAgICBnID0gZ2FtbWEgKHNlbnNpdGl2aXR5IGZvciBkZWNpc2lvbiB3ZWlnaHRpbmcgZnVuY3Rpb24pCgogICAgRXF1YXRpb25zOgogICAgICB2ID0gaWYgKHggPj0gMCkgeF5hOyBpZiAoeCA8IDApIC1sICogKC14KV5hCiAgICAgIGEgPSBpZiAoeCA+PSAwKSBsb2codikgLyBsb2coeCk7IGlmICh4IDwgMCkgKGxvZygtdikgLSBsb2cobCkpIC8gbG9nKC14KQogICAgICBsID0gaWYgKHggPj0gMCkgMTsgaWYgKHggPCAwKSAtdiAvICgteCleYQoKICAgICAgdyA9IHBeZyAvIChwXmcgKyAoMSAtIHApXmcpXigxIC8gZykKCiAgICAgIHUgPSBTdW1fbih2X24gKiB3X24pCiAgKi8KICBjbGFzcyBDUFRNYXRoIHsKICAgIHN0YXRpYyB4YWwydih4LCBhLCBsKSB7CiAgICAgIGlmICh4ID49IDApIHsKICAgICAgICByZXR1cm4geCAqKiBhOwogICAgICB9CiAgICAgIC8vIGVsc2UgKHggPCAwKQogICAgICByZXR1cm4gLWwgKiAoLXgpICoqIGE7CiAgICB9CiAgICBzdGF0aWMgeGx2MmEoeCwgbCwgdikgewogICAgICBpZiAoeCA+PSAwKSB7CiAgICAgICAgcmV0dXJuIE1hdGgubG9nKHYpIC8gTWF0aC5sb2coeCk7CiAgICAgIH0KICAgICAgLy8gZWxzZSAoeCA8IDApCiAgICAgIHJldHVybiAoTWF0aC5sb2coLXYpIC0gTWF0aC5sb2cobCkpIC8gTWF0aC5sb2coLXgpOwogICAgfQogICAgc3RhdGljIHhhdjJsKHgsIGEsIHYpIHsKICAgICAgaWYgKHggPj0gMCkgewogICAgICAgIHJldHVybiBOYU47CiAgICAgIH0KICAgICAgLy8gZWxzZSAoeCA8IDApCiAgICAgIHJldHVybiAtdiAvICgteCkgKiogYTsKICAgIH0KICAgIHN0YXRpYyBwZzJ3KHAsIGcpIHsKICAgICAgcmV0dXJuIHAgKiogZyAvIChwICoqIGcgKyAoMSAtIHApICoqIGcpICoqICgxIC8gZyk7CiAgICB9CiAgICBzdGF0aWMgdncydSh2LCB3KSB7CiAgICAgIC8vIE51bWJlcnMKICAgICAgaWYgKHR5cGVvZiB2ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgdyA9PT0gJ251bWJlcicpIHsKICAgICAgICByZXR1cm4gdiAqIHc7CiAgICAgIH0KICAgICAgLy8gQXJyYXlzCiAgICAgIGlmICh2IGluc3RhbmNlb2YgQXJyYXkgJiYgdyBpbnN0YW5jZW9mIEFycmF5ICYmIHYubGVuZ3RoID4gMCAmJiB2Lmxlbmd0aCA9PT0gdy5sZW5ndGgpIHsKICAgICAgICBsZXQgdSA9IDA7CiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB2Lmxlbmd0aDsgbiArPSAxKSB7CiAgICAgICAgICB1ICs9IHZbbl0gKiB3W25dOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdTsKICAgICAgfQogICAgICAvLyBPdGhlcndpc2UKICAgICAgcmV0dXJuIE5hTjsKICAgIH0KICB9CgogIC8vIEludGVybmFsIGRlcGVuZGVuY2llcwoKICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbIm9mZiIsICJzZWxmIl0gKi8KCiAgc2VsZi5vbm1lc3NhZ2UgPSBldmVudCA9PiB7CiAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgIGFscGhhOiB7CiAgICAgICAgdHlwZTogJ3JlYWwnLAogICAgICAgIGxvd2VyOiAwLAogICAgICAgIHVwcGVyOiAxCiAgICAgIH0sCiAgICAgIGxhbWJkYTogewogICAgICAgIHR5cGU6ICdyZWFsJywKICAgICAgICBsb3dlcjogMCwKICAgICAgICB1cHBlcjogMTAKICAgICAgfSwKICAgICAgZ2FtbWE6IHsKICAgICAgICB0eXBlOiAncmVhbCcsCiAgICAgICAgbG93ZXI6IDAsCiAgICAgICAgdXBwZXI6IDEKICAgICAgfSwKICAgICAgbHVjZTogewogICAgICAgIHR5cGU6ICdyZWFsJywKICAgICAgICBsb3dlcjogMCwKICAgICAgICB1cHBlcjogMTAwCiAgICAgIH0KICAgIH07CiAgICBjb25zdCBsb2dQb3N0ID0gKHN0YXRlLCBkYXRhKSA9PiB7CiAgICAgIGxldCBscCA9IDA7CgogICAgICAvLyBQcmlvcnMKICAgICAgY29uc3QgYWxwaGFNZWFuID0gMC41OwogICAgICBjb25zdCBhbHBoYVNhbXBsZVNpemUgPSAyLjU7CiAgICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmJldGEoc3RhdGUuYWxwaGEsIGFscGhhTWVhbiAqIGFscGhhU2FtcGxlU2l6ZSwgKDEgLSBhbHBoYU1lYW4pICogYWxwaGFTYW1wbGVTaXplKTsKICAgICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuYWxwaGEsIDAsIDEpOwoKICAgICAgY29uc3QgbGFtYmRhTWVhbiA9IDI7CiAgICAgIGNvbnN0IGxhbWJkYVNoYXBlID0gMzsKICAgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuZ2FtbWEoc3RhdGUubGFtYmRhLCBsYW1iZGFTaGFwZSwgbGFtYmRhU2hhcGUgLyBsYW1iZGFNZWFuKTsKICAgICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubGFtYmRhLCAwLCAxMCk7CgogICAgICBjb25zdCBnYW1tYU1lYW4gPSAwLjU7CiAgICAgIGNvbnN0IGdhbW1hU2FtcGxlU2l6ZSA9IDIuNTsKICAgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuYmV0YShzdGF0ZS5nYW1tYSwgZ2FtbWFNZWFuICogZ2FtbWFTYW1wbGVTaXplLCAoMSAtIGdhbW1hTWVhbikgKiBnYW1tYVNhbXBsZVNpemUpOwogICAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5nYW1tYSwgMCwgMSk7CgogICAgICBjb25zdCBsdWNlTWVhbiA9IDI7CiAgICAgIGNvbnN0IGx1Y2VTaGFwZSA9IDM7CiAgICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmdhbW1hKHN0YXRlLmx1Y2UsIGx1Y2VTaGFwZSwgbHVjZVNoYXBlIC8gbHVjZU1lYW4pOwogICAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5sdWNlLCAwLCAxMDApOwoKICAgICAgLy8gTGlrZWxpaG9vZAogICAgICBkYXRhLmZvckVhY2goY2hvaWNlID0+IHsKICAgICAgICAvLyBWYWx1ZXMKICAgICAgICBjb25zdCB2bCA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnhsLCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTsKICAgICAgICBjb25zdCB2dyA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnh3LCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTsKICAgICAgICBjb25zdCB2cyA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnhzLCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTsKCiAgICAgICAgLy8gUHJvYmFiaWxpdGllcwogICAgICAgIGNvbnN0IHd3ID0gQ1BUTWF0aC5wZzJ3KGNob2ljZS5wdywgc3RhdGUuZ2FtbWEpOwogICAgICAgIGNvbnN0IHdsID0gMSAtIHd3OwoKICAgICAgICAvLyBVdGlsaXRpZXMKICAgICAgICBjb25zdCB1ZyA9IHdsICogdmwgKyB3dyAqIHZ3OwogICAgICAgIGNvbnN0IHVzID0gdnM7CgogICAgICAgIC8vIENob2ljZSBvZiBnYW1ibGUgb3Igc3VyZSBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uCiAgICAgICAgLy8gTHVjZSBjaG9pY2UgcnVsZSBpcyB1c2VkIHRvIGNvbXB1dGUgcHJvYmFiaWxpdHkgb2YgZ2FtYmxpbmchICgwID0gc3VyZSwgMSA9IGdhbWJsZSkKICAgICAgICBjb25zdCBiaW52YWwgPSAxIC8gKDEgKyBNYXRoLmV4cChzdGF0ZS5sdWNlICogKHVzIC0gdWcpKSk7CgogICAgICAgIC8vIEFjdHVhbCByZXNwb25zZQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gY2hvaWNlLnJlc3BvbnNlID09PSAnc3VyZScgPyAwIDogMTsKICAgICAgICBscCArPSBkaXN0cmlidXRpb25zRXhwb3J0cy5iZXJuKHJlc3BvbnNlLCBiaW52YWwpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGxwOwogICAgfTsKCiAgICAvLyBJbml0aWFsaXppbmcgdGhlIHNhbXBsZXIKICAgIGNvbnN0IHNhbXBsZXIgPSBuZXcgbWNtY0V4cG9ydHMuQW13Z1NhbXBsZXIocGFyYW1zLCBsb2dQb3N0LCBldmVudC5kYXRhKTsKICAgIC8vIEJ1cm5pbmcgc29tZSBzYW1wbGVzIHRvIHRoZSBNQ01DIGdvZHMgYW5kIHNhbXBsaW5nIDUwMDAgZHJhd3MKICAgIHNhbXBsZXIuYnVybigxMDAwKTsKICAgIGNvbnN0IHNhbXBsZXMgPSBzYW1wbGVyLnNhbXBsZSg1MDAwKTsKCiAgICAvLyBFeHRyYWN0IHN1bW1hcnkgc3RhdHMKICAgIGNvbnN0IHJlc3VsdHMgPSB7CiAgICAgIGFscGhhOiBtZWRpYW4oc2FtcGxlcy5hbHBoYSksCiAgICAgIGxhbWJkYTogbWVkaWFuKHNhbXBsZXMubGFtYmRhKSwKICAgICAgZ2FtbWE6IG1lZGlhbihzYW1wbGVzLmdhbW1hKSwKICAgICAgbHVjZTogbWVkaWFuKHNhbXBsZXMubHVjZSkKICAgIH07CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgcmVzdWx0czogcmVzdWx0cywKICAgICAgc2FtcGxlczogc2FtcGxlcwogICAgfSk7CiAgfTsKCn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWNwdC1maXQtd29ya2VyLmpzLm1hcAoK","data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3B0LWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9iYXllcy5qcy9kaXN0cmlidXRpb25zLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2JheWVzLmpzL21jbWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9zb3J0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tYXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL21pbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvcXVpY2tzZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3F1YW50aWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tZWRpYW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZGlzcGF0Y2gvc3JjL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9hcnJheS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdG9yQWxsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdEFsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL21hdGNoZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0Q2hpbGQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0Q2hpbGRyZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NwYXJzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9lbnRlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NvbnN0YW50LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdGEuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZXhpdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9qb2luLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL21lcmdlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29yZGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NvcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2FsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2Rlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2RlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NpemUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW1wdHkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZWFjaC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hdHRyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvd2luZG93LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3N0eWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3Byb3BlcnR5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2NsYXNzZWQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vdGV4dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9odG1sLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3JhaXNlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2xvd2VyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2FwcGVuZC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9pbnNlcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmVtb3ZlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Nsb25lLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdHVtLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2l0ZXJhdG9yLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9kZWZpbmUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jb25zdGFudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29sb3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3JnYi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9zdHJpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9kZWNvbXBvc2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9wYXJzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRpbWVyL3NyYy90aW1lci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lci9zcmMvdGltZW91dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NjaGVkdWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL2ludGVycnVwdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy9zZWxlY3Rpb24vaW50ZXJydXB0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9pbnRlcnBvbGF0ZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2F0dHIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9hdHRyVHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9kZWxheS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2R1cmF0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZWFzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2Vhc2VWYXJ5aW5nLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vbWVyZ2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9vbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3JlbW92ZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdEFsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdGlvbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3N0eWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc3R5bGVUd2Vlbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3RleHQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90ZXh0VHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZW5kLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZWFzZS9zcmMvY3ViaWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL3RyYW5zaXRpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXpvb20vc3JjL3RyYW5zZm9ybS5qcyIsIi4uL3Byb3NwZWN0YWJsZS1tYXRoL3NyYy9jcHQtbWF0aC5qcyIsIi4uL3Byb3NwZWN0YWJsZS1tYXRoL3NyYy9pbmRleC5qcyIsInNyYy9jb21wb25lbnRzL2NwdC1maXQtd29ya2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5cbi8vIEEgbnVtYmVyIG9mIGxvZyBwcm9iYWJpbGl0eSBkZW5zaXR5IGZ1bmN0aW9ucyAoUERGKS4gTmFtaW5nIGFuZCBwYXJhbWV0ZXJpemF0aW9uXG4vLyBzaG91bGQgbWF0Y2ggUidzLCBleGNlcHQgZm9yIHRoYXQgYWxsIGZ1bmN0aW9ucyByZXNpZGUgaW4gYW4gbGQgb2JqZWN0IChcbi8vIGFzIGluIFwibG9nIGRlbnNpdHlcIiksIHNvIHRvIGdldCBhIG5vcm1hbCBsb2cgZGVuc2l0eSB5b3Ugd291bGQgd3JpdGVcbi8vIGxkLm5vcm0oLi4uKS5cbi8vIE1vc3Qgb2YgdGhlIGNvZGUgYmVsb3cgaXMgZGlyZWN0bHkgdGFrZW4gZnJvbSB0aGUgZ3JlYXQgSnN0YXQgcHJvamVjdFxuLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9qc3RhdC8pIHdoaWNoIGluY2x1ZGVzIFBERiBmb3IgbWFueSBjb21tb24gcHJvYmFiaWxpdHlcbi8vIGRpc3RyaWJ1dGlvbnMuIFdoYXQgSSBoYXZlIGRvbmUgaXMgb25seSB0byBjb252ZXJ0IHRoZXNlIHRvIGxvZyBQREZzLlxuXG4vKlxuT3JpZ2luYWwgd29yayBDb3B5cmlnaHQgKGMpIDIwMTMgalN0YXRcbk1vZGlmaWVkIHdvcmsgQ29weXJpZ2h0IChjKSAyMDE1IFJhc211cyBCw6XDpXRoIFxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG5USEUgU09GVFdBUkUuXG5cbiovXG5cblxuLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzXG4vLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3Nlcixcbi8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLlxuLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsXG4vLyBvYmplY3QgbGQgLlxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpIHtcbiAgLy8gT2JqZWN0IHRvIGhvbGQgdGhlIGZ1bmN0aW9ucyB0byBiZSBleHBvcnRlZC5cbiAgdmFyIGxkICA9IHt9O1xuICBcbiAgLy8vLy8vLy8vLyBIZWxwZXIgZnVuY3Rpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIHZhciBsZ2FtbWEgPSBmdW5jdGlvbih4KSB7XG4gICAgdmFyIGogPSAwO1xuICAgIHZhciBjb2YgPSBbXG4gICAgICA3Ni4xODAwOTE3Mjk0NzE0NiwgLTg2LjUwNTMyMDMyOTQxNjc3LCAyNC4wMTQwOTgyNDA4MzA5MSxcbiAgICAgIC0xLjIzMTczOTU3MjQ1MDE1NSwgMC4xMjA4NjUwOTczODY2MTc5ZS0yLCAtMC41Mzk1MjM5Mzg0OTUzZS01XG4gICAgXTtcbiAgICB2YXIgc2VyID0gMS4wMDAwMDAwMDAxOTAwMTU7XG4gICAgdmFyIHh4LCB5LCB0bXA7XG4gICAgdG1wID0gKHkgPSB4eCA9IHgpICsgNS41O1xuICAgIHRtcCAtPSAoeHggKyAwLjUpICogbG9nKHRtcCk7XG4gICAgZm9yICg7IGogPCA2OyBqKyspXG4gICAgICBzZXIgKz0gY29mW2pdIC8gKyt5O1xuICAgIHJldHVybiBsb2coMi41MDY2MjgyNzQ2MzEwMDA1ICogc2VyIC8geHgpIC0gdG1wO1xuICB9O1xuICBsZC5sZ2FtbWEgPSBsZ2FtbWE7XG4gIFxuICB2YXIgbGZhY3RvcmlhbCA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gbiA8IDAgPyBOYU4gOiBsZ2FtbWEobiArIDEpO1xuICB9O1xuICBsZC5sZmFjdG9yaWFsID0gbGZhY3RvcmlhbDtcbiAgXG4gIHZhciBsY2hvb3NlID0gZnVuY3Rpb24obiwgayl7XG4gICAgcmV0dXJuIGxmYWN0b3JpYWwobikgLSBsZmFjdG9yaWFsKGspIC0gbGZhY3RvcmlhbChuIC0gayk7XG4gIH07XG4gIGxkLmxjaG9vc2UgPSBsY2hvb3NlO1xuICBcbiAgdmFyIGxiZXRhID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBsZ2FtbWEoYSkgKyBsZ2FtbWEoYikgLSBsZ2FtbWEoYSArIGIpO1xuICB9O1xuICBsZC5sYmV0YSA9IGxiZXRhO1xuICBcbiAgdmFyIGxvZyAgPSBNYXRoLmxvZztcbiAgdmFyIGV4cCAgPSBNYXRoLmV4cDtcbiAgdmFyIGFicyAgPSBNYXRoLmFicztcbiAgdmFyIHBvdyAgPSBNYXRoLnBvdztcbiAgdmFyIHNxcnQgPSBNYXRoLnNxcnQ7XG4gIHZhciBwaSAgID0gTWF0aC5QSTtcbiAgXG4gIC8vLy8vLy8vLy8gQ29udGlub3VzIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIGxkLmJldGEgPSBmdW5jdGlvbih4LCBzaGFwZTEsIHNoYXBlMikge1xuICAgIGlmICh4ID4gMSB8fCB4IDwgMCkge1xuICAgICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICBpZihzaGFwZTEgPT09IDEgJiYgc2hhcGUyID09PSAxKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChzaGFwZTEgLSAxKSAqIGxvZyh4KSArIChzaGFwZTIgLSAxKSAqIGxvZygxIC0geCkgLSBsYmV0YShzaGFwZTEsIHNoYXBlMik7ICBcbiAgICB9XG4gIH07XG4gIFxuICBsZC5jYXVjaHkgPSBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUpIHtcbiAgICByZXR1cm4gbG9nKHNjYWxlKSAtIGxvZyhwb3coeCAtIGxvY2F0aW9uLCAyKSArIHBvdyhzY2FsZSwgMikpICAtIGxvZyhwaSk7XG4gIH07XG4gIFxuICBsZC5ub3JtID0gZnVuY3Rpb24oeCwgbWVhbiwgc2QpIHtcbiAgICAgIHJldHVybiAtMC41ICogbG9nKDIgKiBwaSkgLWxvZyhzZCkgLSBwb3coeCAtIG1lYW4sIDIpIC8gKDIgKiBzZCAqIHNkKTtcbiAgfTtcblxuICAvLyBBIGJpdmFyaWF0ZSBOb3JtYWwgZGlzdHJpYnV0aW9uIHBhcmFtZXRlcml6ZWQgYnkgYXJyYXlzIG9mIHR3byBtZWFucyBhbmQgU0RzLCBhbmQgXG4gIC8vIHRoZSBjb3JyZWxhdGlvbi5cbiAgbGQuYml2YXJub3JtID0gZnVuY3Rpb24oeCwgbWVhbiwgc2QsIGNvcnIpIHtcbiAgICB2YXIgeiA9IHBvdyh4WzBdIC0gbWVhblswXSwgMikgLyBwb3coc2RbMF0sIDIpICtcbiAgICAgICAgICAgIHBvdyh4WzFdIC0gbWVhblsxXSwgMikgLyBwb3coc2RbMV0sIDIpIC0gXG4gICAgICAgICAgICAoMiAqIGNvcnIgKiAoeFswXSAtIG1lYW5bMF0pICogKHhbMV0gLSBtZWFuWzFdKSkgLyAoc2RbMF0gKiBzZFsxXSk7XG4gICAgdmFyIG5vcm1hbGl6aW5nX2ZhY3RvciA9IC0oIGxvZygyKSArIGxvZyhwaSkgKyBsb2coc2RbMF0pICsgbG9nKHNkWzFdKSArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLjUgKiBsb2coMSAtIHBvdyhjb3JyLCAyKSkgKTsgXG4gICAgdmFyIGJpdmFyX2xvZ19kZW5zID0gbm9ybWFsaXppbmdfZmFjdG9yIC0geiAvICgyICogKDEgLSBwb3coY29yciwgMikgKSApOyBcbiAgICByZXR1cm4gYml2YXJfbG9nX2RlbnM7XG4gIH07XG4gIFxuXG4gIGxkLmxhcGxhY2UgPSBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUpIHtcbiAgICByZXR1cm4gKC1hYnMoeCAtIGxvY2F0aW9uKS9zY2FsZSkgLSBsb2coMiAqIHNjYWxlKTtcbiAgfTtcbiAgXG4gIGxkLmRleHAgPSBsZC5sYXBsYWNlO1xuICBcbiAgbGQuZ2FtbWEgPSBmdW5jdGlvbih4LCBzaGFwZSwgcmF0ZSkge1xuICAgIHZhciBzY2FsZSA9IDEgLyByYXRlO1xuICAgIGlmICh4IDwgMCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgaWYoKHggPT09IDAgJiYgc2hhcGUgPT09IDEpICkge1xuICAgICAgcmV0dXJuIC1sb2coc2NhbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHNoYXBlIC0gMSkgKiBsb2coeCkgLSB4IC8gc2NhbGUgLSBsZ2FtbWEoc2hhcGUpIC0gc2hhcGUgKiBsb2coc2NhbGUpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGxkLmludmdhbW1hID0gZnVuY3Rpb24oeCwgc2hhcGUsIHNjYWxlKSB7XG4gICAgICBpZiAoeCA8PSAwKSB7XG4gICAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgICB9XG4gICAgICByZXR1cm4gLShzaGFwZSArIDEpICogbG9nKHgpIC0gc2NhbGUgLyB4IC0gbGdhbW1hKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKTtcbiAgICB9O1xuICBcbiAgbGQubG5vcm0gPSAgZnVuY3Rpb24oeCwgbWVhbmxvZywgc2Rsb2cpIHtcbiAgICBpZiAoeCA8PSAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gLWxvZyh4KSAtIDAuNSAqIGxvZygyICogcGkpIC0gbG9nKHNkbG9nKSAtIFxuICAgICAgICAgICAgcG93KGxvZyh4KSAtIG1lYW5sb2csIDIpIC8gKDIgKiBzZGxvZyAqIHNkbG9nKTtcbiAgfTtcbiAgXG4gIGxkLnBhcmV0byA9IGZ1bmN0aW9uKHgsIHNjYWxlLCBzaGFwZSkge1xuICAgIGlmICh4IDwgc2NhbGUpIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiBsb2coc2hhcGUpICsgc2hhcGUgKiBsb2coc2NhbGUpIC0gKHNoYXBlICsgMSkgKiBsb2coeCk7XG4gIH07XG4gIFxuICBsZC50ICA9ICBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUsIGRmKSB7XG4gICAgZGYgPSBkZiA+IDFlMTAwID8gMWUxMDAgOiBkZjtcbiAgICByZXR1cm4gbGdhbW1hKChkZiArIDEpLzIpIC0gbGdhbW1hKGRmLzIpIC0gbG9nKHNxcnQocGkgKiBkZikgKiBzY2FsZSkgK1xuICAgICAgICAgICBsb2cocG93KDEgKyAoMS9kZikgKiBwb3coKHggLSBsb2NhdGlvbikvc2NhbGUsIDIpLCAtKGRmICsgMSkvMikpO1xuICB9O1xuICBcbiAgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZVxuICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSB3ZWlidWxsIGRpc3RyaWJ1dGlvbjogXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kd2VpYnVsbC5jXG4gIGxkLndlaWJ1bGwgPSBmdW5jdGlvbih4LCBzaGFwZSwgc2NhbGUpIHtcbiAgICBpZiAoeCA8IDApIHJldHVybiAtSW5maW5pdHk7XG4gICAgaWYoeCA9PT0gMCAmJiBzaGFwZSA8IDEpIHJldHVybiBJbmZpbml0eTtcbiAgICB2YXIgdG1wMSA9IHBvdyh4IC8gc2NhbGUsIHNoYXBlIC0gMSk7XG4gICAgdmFyIHRtcDIgPSB0bXAxICogKHggLyBzY2FsZSk7XG5cdCAgcmV0dXJuIC10bXAyICsgbG9nKHNoYXBlICogdG1wMSAvIHNjYWxlKTtcbiAgfTtcbiAgXG4gIC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGVcbiAgLy8gdGhlIGxvZyBkZW5zaXR5IG9mIGEgbG9naXN0aWMgZGlzdHJpYnV0aW9uOiBcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2Rsb2dpcy5jXG4gIGxkLmxvZ2lzID0gZnVuY3Rpb24oeCwgbG9jYXRpb24sIHNjYWxlKSB7XG4gICAgeCA9IGFicygoeCAtIGxvY2F0aW9uKSAvIHNjYWxlKTtcbiAgICB2YXIgZSA9IGV4cCgteCk7XG4gICAgdmFyIGYgPSAxLjAgKyBlO1xuICAgIHJldHVybiAtKHggKyBsb2coc2NhbGUgKiBmICogZikpOyAgICBcbiAgfTtcblxuICBsZC5kaXJpY2hsZXQgPSBmdW5jdGlvbih4LCBhbHBoYSkge1xuICAgIHZhciBzdW1fYWxwaGEgPSAwO1xuICAgIHZhciBzdW1fbGdhbW1hX2FscGhhID0gMDtcbiAgICB2YXIgc3VtX2FscGhhX3N1Yl8xX2xvZ194ID0gMDtcbiAgICB2YXIgbiA9IGFscGhhLmxlbmd0aDtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBzdW1fYWxwaGEgKz0gYWxwaGFbaV07XG4gICAgICBzdW1fbGdhbW1hX2FscGhhICs9IGxnYW1tYShhbHBoYVtpXSk7XG4gICAgICBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggKz0gKGFscGhhW2ldIC0gMSkgKiBsb2coeFtpXSk7XG4gICAgfVxuICAgIHJldHVybiBsZ2FtbWEoc3VtX2FscGhhKSAtIHN1bV9sZ2FtbWFfYWxwaGEgKyBzdW1fYWxwaGFfc3ViXzFfbG9nX3g7XG4gIH07XG4gICBcbiAgICBcbiAgbGQuZXhwID0gZnVuY3Rpb24oeCwgcmF0ZSkge1xuICAgICAgcmV0dXJuIHggPCAwID8gLUluZmluaXR5IDogbG9nKHJhdGUpIC1yYXRlICogeDtcbiAgfTtcbiAgXG4gIGxkLnVuaWYgPSBmdW5jdGlvbih4LCBtaW4sIG1heCkge1xuICAgICAgcmV0dXJuICh4IDwgbWluIHx8IHggPiBtYXgpID8gLUluZmluaXR5IDogbG9nKDEgLyAobWF4IC0gbWluKSk7XG4gIH07XG4gIFxuICAvLy8vLy8vLy8vIERpc2NyZXRlIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgbGQuYmVybiA9IGZ1bmN0aW9uKHgsIHByb2IpIHtcbiAgICAgIHJldHVybiAhKHggPT09IDAgfHwgeCA9PT0gMSkgPyAtSW5maW5pdHkgOiBsb2coeCAqIHByb2IgKyAoMSAtIHgpICogKDEgLSBwcm9iKSk7XG4gIH07XG4gIFxuICBsZC5jYXQgPSBmdW5jdGlvbih4LCBwcm9icykge1xuICAgIGlmKHggPCAxIHx8IHggPiBwcm9icy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsb2coIHByb2JzW3ggLSAxXSApO1xuICAgIH1cbiAgfTtcbiAgXG4gIGxkLmJpbm9tID0gZnVuY3Rpb24oeCwgc2l6ZSwgcHJvYikge1xuICAgIGlmKHggPiBzaXplIHx8IHggPCAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICBpZihwcm9iID09PSAwIHx8IHByb2IgPT09IDEpIHtcbiAgICAgIHJldHVybiAoc2l6ZSAqIHByb2IpID09PSB4ID8gMCA6IC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIGxjaG9vc2Uoc2l6ZSwgeCkgKyB4ICogbG9nKHByb2IpICsgKHNpemUgLSB4KSAqIGxvZygxIC0gcHJvYik7XG4gIH07XG4gIFxuICB2YXIgbXVsdGlub20gPSBmdW5jdGlvbih4LCBwcm9icykge1xuICAgIHZhciBuID0geC5sZW5ndGg7XG4gICAgdmFyIHNpemUgPSAwO1xuICAgIHZhciB0bXBfdGVybSA9IDA7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgaWYocHJvYnNbaV0gPT09IDApIHtcbiAgICAgICAgaWYoeFtpXSAhPT0gMCkge1xuICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7ICBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2l6ZSArPSB4W2ldO1xuICAgICAgICB0bXBfdGVybSArPSB4W2ldICogbG9nKHByb2JzW2ldKSAtIGxnYW1tYSh4W2ldICsgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZ2FtbWEoc2l6ZSArIDEpICsgdG1wX3Rlcm0gO1xuICB9O1xuICBcbiAgbGQubmJpbm9tID0gZnVuY3Rpb24oeCwgc2l6ZSwgcHJvYikge1xuICAgIGlmKHggPCAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gbGNob29zZSh4ICsgc2l6ZSAtIDEsIHNpemUgLSAxKSArIHggKiBsb2coMSAtIHByb2IpICsgc2l6ZSAqIGxvZyhwcm9iKTtcbiAgfTtcbiAgXG4gIGxkLmh5cGVyID0gZnVuY3Rpb24oeCwgbSwgbiwgaykge1xuICAgIGlmKHggPCAwIHx8IHggPiBrKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxjaG9vc2UobSwgeCkgKyBsY2hvb3NlKG4sIGsteCkgLSBsY2hvb3NlKG0rbiwgayk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQucG9pcyA9IGZ1bmN0aW9uKHgsIGxhbWJkYSkge1xuICAgICAgcmV0dXJuIHggPCAwID8gLUluZmluaXR5IDogbG9nKGxhbWJkYSkgKiB4IC0gbGFtYmRhIC0gbGZhY3RvcmlhbCh4KTtcbiAgfTtcbiAgXG4gIHJldHVybiBsZDtcbn0pKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzXG4vLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3Nlcixcbi8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLlxuLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsXG4vLyBvYmplY3QgbWNtYyAuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290Lm1jbWMgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24oKXtcblxuLy8vIFRoZSBhY3R1YWwgbW9kdWxlIGNvZGUgc3RhcnRzIGhlcmUgLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gIFxuICBcbiAgLy8vLy8vLy8vLyBIZWxwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXggKi9cbiAgdmFyIHJ1bmlmID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuICB9O1xuICBcbiAgLyoqIFJldHVybnMgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4ICovXG4gIHZhciBydW5pZl9kaXNjcmV0ZSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhIHJhbmRvbSByZWFsIG51bWJlciBmcm9tIGEgbm9ybWFsIGRpc3RyaWJidXRpb24gZGVmaW5lZFxuICAgKiAgYnkgbWVhbiBhbmQgc2QuIFxuICAgKiAgQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qc3RhdC9qc3RhdC9ibG9iL21hc3Rlci9zcmMvc3BlY2lhbC5qcyAqL1xuICB2YXIgcm5vcm0gPSBmdW5jdGlvbihtZWFuLCBzZCkge1xuICAgIHZhciB1LCB2LCB4LCB5LCBxO1xuICAgIGRvIHtcbiAgICAgIHUgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgdiA9IDEuNzE1NiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICAgIHggPSB1IC0gMC40NDk4NzE7XG4gICAgICB5ID0gTWF0aC5hYnModikgKyAwLjM4NjU5NTtcbiAgICAgIHEgPSB4ICogeCArIHkgKiAoMC4xOTYwMCAqIHkgLSAwLjI1NDcyICogeCk7XG4gICAgfSB3aGlsZSAocSA+IDAuMjc1OTcgJiYgKHEgPiAwLjI3ODQ2IHx8IHYgKiB2ID4gLTQgKiBNYXRoLmxvZyh1KSAqIHUgKiB1KSk7XG4gICAgXG4gICAgcmV0dXJuICh2IC8gdSkgKiBzZCArIG1lYW47XG4gIH07XG4gIFxuICBcbiAgLyoqIFJldHVybnMgYSBkZWVwIGNsb25lIG9mIHNyYywgc29ydCBvZi4uLiBJdCBvbmx5IGNvcGllcyBhIGxpbWl0ZWRcbiAgICogbnVtYmVyIG9mIHR5cGVzIGFuZCwgZm9yIGV4YW1wbGUsIGZ1bmN0aW9uIGFyZSBub3QgY29waWVkLiBcbiAgICogRnJvbSBodHRwOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtY2xvbmVcbiAgICovXG4gIHZhciBkZWVwX2Nsb25lID0gZnVuY3Rpb24oc3JjKSB7XG4gIFx0ZnVuY3Rpb24gbWl4aW4oZGVzdCwgc291cmNlLCBjb3B5RnVuYykge1xuICBcdFx0dmFyIG5hbWUsIHMsIGksIGVtcHR5ID0ge307XG4gIFx0XHRmb3IobmFtZSBpbiBzb3VyY2Upe1xuICBcdFx0XHQvLyB0aGUgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpIGNvbmRpdGlvbiBhdm9pZHMgY29weWluZyBwcm9wZXJ0aWVzIGluIFwic291cmNlXCJcbiAgXHRcdFx0Ly8gaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZS5cdCBGb3IgZXhhbXBsZSwgaWYgZGVzdCBoYXMgYSBjdXN0b20gdG9TdHJpbmcoKSBtZXRob2QsXG4gIFx0XHRcdC8vIGRvbid0IG92ZXJ3cml0ZSBpdCB3aXRoIHRoZSB0b1N0cmluZygpIG1ldGhvZCB0aGF0IHNvdXJjZSBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlXG4gIFx0XHRcdHMgPSBzb3VyY2VbbmFtZV07XG4gIFx0XHRcdGlmKCEobmFtZSBpbiBkZXN0KSB8fCAoZGVzdFtuYW1lXSAhPT0gcyAmJiAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykpKXtcbiAgXHRcdFx0XHRkZXN0W25hbWVdID0gY29weUZ1bmMgPyBjb3B5RnVuYyhzKSA6IHM7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHRcdHJldHVybiBkZXN0O1xuICBcdH1cbiAgXHRpZighc3JjIHx8IHR5cGVvZiBzcmMgIT0gXCJvYmplY3RcIiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3JjKSA9PT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKXtcbiAgXHRcdC8vIG51bGwsIHVuZGVmaW5lZCwgYW55IG5vbi1vYmplY3QsIG9yIGZ1bmN0aW9uXG4gIFx0XHRyZXR1cm4gc3JjO1x0Ly8gYW55dGhpbmdcbiAgXHR9XG4gIFx0aWYoc3JjLm5vZGVUeXBlICYmIFwiY2xvbmVOb2RlXCIgaW4gc3JjKXtcbiAgXHRcdC8vIERPTSBOb2RlXG4gIFx0XHRyZXR1cm4gc3JjLmNsb25lTm9kZSh0cnVlKTsgLy8gTm9kZVxuICBcdH1cbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBEYXRlKXtcbiAgXHRcdC8vIERhdGVcbiAgXHRcdHJldHVybiBuZXcgRGF0ZShzcmMuZ2V0VGltZSgpKTtcdC8vIERhdGVcbiAgXHR9XG4gIFx0aWYoc3JjIGluc3RhbmNlb2YgUmVnRXhwKXtcbiAgXHRcdC8vIFJlZ0V4cFxuICBcdFx0cmV0dXJuIG5ldyBSZWdFeHAoc3JjKTsgICAvLyBSZWdFeHBcbiAgXHR9XG4gIFx0dmFyIHIsIGksIGw7XG4gIFx0aWYoc3JjIGluc3RhbmNlb2YgQXJyYXkpe1xuICBcdFx0Ly8gYXJyYXlcbiAgXHRcdHIgPSBbXTtcbiAgXHRcdGZvcihpID0gMCwgbCA9IHNyYy5sZW5ndGg7IGkgPCBsOyArK2kpe1xuICBcdFx0XHRpZihpIGluIHNyYyl7XG4gIFx0XHRcdFx0ci5wdXNoKGRlZXBfY2xvbmUoc3JjW2ldKSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9IGVsc2Uge1xuICBcdFx0Ly8gZ2VuZXJpYyBvYmplY3RzXG4gIFx0XHRyID0gc3JjLmNvbnN0cnVjdG9yID8gbmV3IHNyYy5jb25zdHJ1Y3RvcigpIDoge307XG4gIFx0fVxuICBcdHJldHVybiBtaXhpbihyLCBzcmMsIGRlZXBfY2xvbmUpO1xuICB9O1xuICBcbiAgLyoqIFNwZWNpYWxpemVkIGNsb25lIGZ1bmN0aW9uIHRoYXQgb25seSBjbG9uZXMgc2NhbGFycyBhbmQgbmVzdGVkIGFycmF5cyB3aGVyZVxuICAgKiBlYWNoIGFycmF5IGVpdGhlciBjb25zaXN0cyBvZiBhbGwgYXJyYXlzIG9yIGFsbCBudW1iZXJzLiBUaGlzIGZ1bmN0aW9uXG4gICAqIGlzIG1lYW50IGFzIGEgZmFzdCB3YXkgb2YgY2xvbmluZyBwYXJhbWV0ZXIgZHJhd3Mgd2l0aGluIHRoZSBtY21jIHNhbXBsaW5nXG4gICAqIGxvb3AuXG4gICAqL1xuICB2YXIgY2xvbmVfcGFyYW1fZHJhdyA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZihBcnJheS5pc0FycmF5KHgpKSB7XG4gICAgICBpZihBcnJheS5pc0FycmF5KHhbMF0pKSB7XG4gICAgICAgIC8vIHggaXMgYW4gYXJyYXkgb2YgYXJyYXlzIHNvIHdlIG5lZWQgdG8gY2xvbmUgaXQgcmVjdXJzaXZlbHlcbiAgICAgICAgdmFyIHhfY29weSA9IFtdO1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW5ndGggPSB4Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgeF9jb3B5LnB1c2goY2xvbmVfcGFyYW1fZHJhdyh4W2ldKSk7XG4gICAgICAgIH0gXG4gICAgICAgIHJldHVybiB4X2NvcHk7XG4gICAgICB9IGVsc2UgeyAvLyBXZSdsbCBhc3N1bWUgeCBpcyBhIGFycmF5cyBvZiBzY2FsYXJzXG4gICAgICAgIHJldHVybiB4LnNsaWNlKDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7IC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgc2NhbGFyXG4gICAgICByZXR1cm4geDtcbiAgICB9XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIG51bWJlci5cbiAgICovXG4gIHZhciBpc19udW1iZXIgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09IFwibnVtYmVyXCIgfHwgKHR5cGVvZiBvYmplY3QgPT0gXCJvYmplY3RcIiAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IE51bWJlcik7XG4gIH07XG4gIFxuICAvKipcbiAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYSAocG9zc2libHkgbXVsdGlkaW1lbnNpb25hbC9uZXN0ZWQpIGFycmF5LlxuICAgKiBAcGFyYW0gZGltIC0gQW4gYXJyYXkgZ2l2aW5nIHRoZSBkaW1lbnNpb24gb2YgdGhlIGFycmF5LiBGb3IgZXhhbXBsZSxcbiAgICogICBbNV0gd291bGQgeWllbGQgYSA1IGVsZW1lbnQgYXJyYXksIGFuZCBbMywzXSB3b3VsZCB5aWVsZCBhIDMgYnkgMyBtYXRyaXguXG4gICAqIEBwYXJhbSBpbml0IC0gQSB2YWx1ZSBvciBhIGZ1bmN0aW9uIHVzZWQgdG8gZmlsbCBpbiB0aGUgZWFjaCBlbGVtZW50IGluXG4gICAqICAgdGhlIGFycmF5LiBJZiBpdCBpcyBhIGZ1bmN0aW9uIGl0IHNob3VsZCB0YWtlIG5vIGFyZ3VtZW50cywgaXQgd2lsbCBiZSBcbiAgICogICBldmFsdWF0ZWQgb25jZSBmb3IgZWFjaCBlbGVtZW50LCBhbmQgaXQncyByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkIHRvXG4gICAqICAgZmlsbCBpbiBlYWNoIGVsZW1lbnQuXG4gICAqIEBleGFtcGxlIFxuICAgKiAvLyBUaGUgZm9sbG93aW5nIHdvdWxkIHJldHVybiBbWzEsMV0sWzEsMV0sWzEsMV1dXG4gICAqIGNyZWF0ZV9hcnJheShbMiwzXSwgMSlcbiAgICovXG4gIHZhciBjcmVhdGVfYXJyYXkgPSBmdW5jdGlvbihkaW0sIGluaXQpIHtcbiAgICB2YXIgYXJyID0gbmV3IEFycmF5KGRpbVswXSk7XG4gICAgdmFyIGk7XG4gICAgaWYoZGltLmxlbmd0aCA9PSAxKSB7IC8vIEZpbGwgaXQgdXAgd2l0aCBpbml0XG4gICAgICBpZih0eXBlb2YgaW5pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgYXJyW2ldID0gaW5pdCgpO1xuICAgICAgICB9ICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgYXJyW2ldID0gaW5pdDtcbiAgICAgICAgfSBcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoZGltLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IGNyZWF0ZV9hcnJheShkaW0uc2xpY2UoMSksIGluaXQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBcImNyZWF0ZV9hcnJheSBjYW4ndCBjcmVhdGUgYSBkaW1lbnNpb25sZXNzIGFycmF5XCI7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH07XG4gIFxuICAvKipcbiAgICogUmV0dXJuIHRoZSBkaW1lbnNpb25zIG9mIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGFzIGFuIGFycmF5LiBGb3IgXG4gICAqIGV4YW1wbGUsIGFycmF5X2RpbSggW1sxLCAyXSwgWzEsIDJdXSApIHNob3VsZCByZXR1cm4gWzIsIDJdXG4gICAqIEFzc3VtZXMgdGhhdCBhbGwgYXJyYXlzIGluc2lkZSBhbm90aGVyIGFycmF5IGFyZSBvZiB0aGUgc2FtZSBsZW5ndGguXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFNob3VsZCByZXR1cm4gWzQsIDIsIDFdXG4gICAqIGFycmF5X2RpbShjcmVhdGVfYXJyYXkoWzQsIDIsIDFdLCAwKSlcbiAgICovXG4gIHZhciBhcnJheV9kaW0gPSBmdW5jdGlvbihhKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhWzBdKSkge1xuICAgICAgcmV0dXJuIFthLmxlbmd0aF0uY29uY2F0KGFycmF5X2RpbShhWzBdKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbYS5sZW5ndGhdO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdHdvIGFycmF5cyBhcmUgZXF1YWwgaW4gdGhlIHNlbnNlIHRoYXQgdGhleSBjb250YWluIHRoZSBzYW1lIGVsZW1lbnRzXG4gICAqIGFzIGp1ZGdlZCBieSB0aGUgXCI9PVwiIG9wZXJhdG9yLiBSZXR1cm5zIHRydWUgb3IgZmFsc2UuXG4gICAqIEFkYXB0ZWQgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNDg1Mzk3NC8xMDAxODQ4XG4gICAqLyBcbiAgdmFyIGFycmF5X2VxdWFsID0gZnVuY3Rpb24gKGExLCBhMikge1xuICAgICAgaWYgKGExLmxlbmd0aCAhPSBhMi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhMVtpXSkgJiYgQXJyYXkuaXNBcnJheShhMltpXSkpIHtcbiAgICAgICAgICAgICAgLy8gcmVjdXJzZSBpbnRvIHRoZSBuZXN0ZWQgYXJyYXlzXG4gICAgICAgICAgICAgIGlmICghYXJyYXlfZXF1YWwoYTFbaV0sIGEyW2ldKSkgcmV0dXJuIGZhbHNlOyAgICAgICBcbiAgICAgICAgICB9ICAgICAgICAgICBcbiAgICAgICAgICBlbHNlIGlmIChhMVtpXSAhPSBhMltpXSkgeyBcbiAgICAgICAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICBcbiAgICAgICAgICB9ICAgICAgICAgICBcbiAgICAgIH0gICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUcmF2ZXJzZXMgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsIFwibGVhZiBub2Rlc1wiLCBcbiAgICogdGhhdCBpcywgdmFsdWVzIHRoYXQgYXJlIG5vdCBhcnJheXMuIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHNhbWUgc2l6ZSBhc1xuICAgKiBhLlxuICAgKi9cbiAgdmFyIG5lc3RlZF9hcnJheV9hcHBseSA9IGZ1bmN0aW9uKGEsIGZ1bikge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoYS5sZW5ndGgpO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0W2ldID0gbmVzdGVkX2FycmF5X2FwcGx5KGFbaV0sIGZ1bik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZnVuKGEpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKiBSYW5kb21pemluZyB0aGUgYXJyYXkgZWxlbWVudCBvcmRlciBpbi1wbGFjZS4gVXNpbmcgRHVyc3RlbmZlbGRcbiAgICogc2h1ZmZsZSBhbGdvcml0aG0uIEFkYXB0ZWQgZnJvbSBoZXJlOiBcbiAgICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTI2NDY4NjQvMTAwMTg0OFxuICAgKi9cbiAgZnVuY3Rpb24gc2h1ZmZsZV9hcnJheShhcnJheSkge1xuICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICB2YXIgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgICAgICAgIHZhciB0ZW1wID0gYXJyYXlbaV07XG4gICAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgICAgICAgICBhcnJheVtqXSA9IHRlbXA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBEb2VzIHRoZSBzYW1lIHRoaW5nIGFzIG5lc3RlZF9hcnJheV9hcHBseSwgdGhhdCBpcywgdHJhdmVyc2VzIGEgcG9zc2libHlcbiAgICogbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCBcImxlYWYgbm9kZXNcIiBhbmQgcmV0dXJucyBhbiBhcnJheSBcbiAgICogb2YgdGhlIHNhbWUgc2l6ZSBhcyBhLiBUaGUgZGlmZmVyZW5jZSBpcyB0aGF0IG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHlcbiAgICogYnJhbmNoZXMgcmFuZG9tbHkuXG4gICAqL1xuICB2YXIgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSA9IGZ1bmN0aW9uKGEsIGZ1bikge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgIHZhciBsZW4gPSBhLmxlbmd0aDtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIGFycmF5X2lzID0gW107XG4gICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBhcnJheV9pc1tpXSA9IGk7XG4gICAgICB9XG4gICAgICBzaHVmZmxlX2FycmF5KGFycmF5X2lzKTtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIFxuICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGFycmF5X2kgPSBhcnJheV9pc1tpXTtcbiAgICAgICAgcmVzdWx0W2FycmF5X2ldID0gbmVzdGVkX2FycmF5X2FwcGx5KGFbYXJyYXlfaV0sIGZ1bik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZnVuKGEpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBBbGxvd3MgYSBwcmV0dHkgd2F5IG9mIHNldHRpbmcgZGVmYXVsdCBvcHRpb25zIHdoZXJlIHRoZSBkZWZ1bHRzIGNhbiBiZVxuICAgKiBvdmVycmlkZGVuIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgKiAgQHBhcmFtIG9wdGlvbl9uYW1lIC0gdGhlIG5hbWUgb2YgdGhlIG9wdGlvbiBhcyBhIHN0cmluZ1xuICAgKiAgQHBhcmFtIG15X29wdGlvbnMgLSBhbiBvcHRpb24gb2JqZWN0IHRoYXQgY291bGQgaGF2ZSBvcHRpb25fbmFtZSBcbiAgICogICAgYXMgYSBtZW1iZXIuXG4gICAqIEBwYXJhbSBkZWZhdWxfdmFsdWUgLSBkZWZ1bHQgdmFsdWUgdGhhdCBpcyByZXR1cm5lZCBpZiBvcHRpb25fbmFtZSBcbiAgICogICBpcyBub3QgZGVmaW5lZCBpbiBteV9vcHRpb25zLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgbXlfb3B0aW9ucyA9IHtwaTogMy4xNDE1OX1cbiAgICogdmFyIHBpID0gZ2V0X29wdGlvbihcInBpXCIsIG15X29wdGlvbnMsIDMuMTQpXG4gICAqL1xuICAvLyBQcmV0dHkgd2F5IG9mIHNldHRpbmcgZGVmYXVsdCBvcHRpb25zIHdoZXJlIHRoZSBkZWZhdWx0cyBjYW4gYmUgb3ZlcnJpZGRlblxuICAvLyBieSBhbiBvcHRpb25zIG9iamVjdC4gRm9yIGV4YW1wbGU6XG4gIC8vIHZhciBwaSA9IGdldF9vcHRpb24oXCJwaVwiLCBteV9vcHRpb25zLCAzLjE0KVxuICB2YXIgZ2V0X29wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkZWZhdWxfdmFsdWUpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICByZXR1cm4gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHRpb25fbmFtZSkgJiYgXG4gICAgICAgICAgIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSB1bmRlZmluZWQgICYmIFxuICAgICAgICAgICBvcHRpb25zW29wdGlvbl9uYW1lXSAhPT0gbnVsbCA/IG9wdGlvbnNbb3B0aW9uX25hbWVdIDogZGVmYXVsX3ZhbHVlO1xuICB9O1xuICBcbiAgLyoqIFZlcnNpb24gb2YgZ2V0X29wdGlvbiB3aGVyZSB0aGUgb3B0aW9uIHNob3VsZCBiZSBhIG9uZSBvciBtdWx0aS1kaW1lbnNpb25hbFxuICAgKiBhcnJheSBhbmQgd2hlcmUgdGhlIGRlZmF1bHQgY2FuIGJlIG92ZXJyaWRkZW4gZWl0aGVyIGJ5IGEgc2NhbGFyIG9yIGJ5IGFuIGFycmF5LlxuICAgKiBJZiBpdCdzIGEgc2NhbGFyIHRoZSB0aGF0IHNjYWxhciBpcyB1c2VkIHRvIGluaXRpYWxpemUgYW4gYXJyYXkgd2l0aCBcbiAgICogZGltIGRpbWVuc2lvbnMuXG4gICAqIFxuICAgKi9cbiAgdmFyIGdldF9tdWx0aWRpbV9vcHRpb24gPSBmdW5jdGlvbihvcHRpb25fbmFtZSwgb3B0aW9ucywgZGltLCBkZWZhdWxfdmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBnZXRfb3B0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkZWZhdWxfdmFsdWUpO1xuICAgICBpZighIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgdmFsdWUgPSBjcmVhdGVfYXJyYXkoZGltLCB2YWx1ZSk7XG4gICAgIH0gXG4gICAgIGlmKCEgYXJyYXlfZXF1YWwoIGFycmF5X2RpbSh2YWx1ZSksIGRpbSkpIHtcbiAgICAgICB0aHJvdyBcIlRoZSBvcHRpb24gXCIgKyBvcHRpb25fbmFtZSArIFwiIGlzIG9mIGRpbWVuc2lvbiBbXCIgKyBcbiAgICAgICAgICAgICBhcnJheV9kaW0odmFsdWUpICsgXCJdIGJ1dCBzaG91bGQgYmUgW1wiICsgZGltICsgXCJdLlwiO1xuICAgIH1cbiAgICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuICBcbiAgLy8vLy8vLy8vLyBGdW5jdGlvbnMgZm9yIGhhbmRsaW5nIHBhcmFtZXRlciBvYmplY3RzIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgZml4ZWQgKHNhbWUgZXZlcnkgdGltZSkgbnVtYmVyIHRoYXQgY291bGQgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gICAqIGEgcGFyYW1ldGVyIG9mIGEgY2VydGFpbiB0eXBlLCBwb3NzaWJseSB3aXRoIGxvd2VyIGFuZCB1cHBlciBib3VuZHMuXG4gICAqIFRoZSBwb3NzaWxlIHR5cGVzIGFyZSBcInJlYWxcIiwgXCJpbnRcIiwgYW5kIFwiYmluYXJ5XCIuXG4gICAqL1xuICB2YXIgcGFyYW1faW5pdF9maXhlZCA9IGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikge1xuICAgIGlmKGxvd2VyID4gdXBwZXIpIHtcbiAgICAgIHRocm93IFwiQ2FuIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciB3aGVyZSBsb3dlciBib3VuZCA+IHVwcGVyIGJvdW5kXCI7XG4gICAgfVxuICAgIGlmKHR5cGUgPT09IFwicmVhbFwiKSB7XG4gICAgICBpZihsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gMC41O1xuICAgICAgfSBlbHNlIGlmKGxvd2VyID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIHVwcGVyIC0gMC41O1xuICAgICAgfSBlbHNlIGlmKHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gbG93ZXIgKyAwLjU7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPD0gdXBwZXIpIHtcbiAgICAgICAgcmV0dXJuIChsb3dlciArIHVwcGVyKSAvIDI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiaW50XCIpIHtcbiAgICAgIGlmKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSBlbHNlIGlmKGxvd2VyID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIHVwcGVyIC0gMTtcbiAgICAgIH0gZWxzZSBpZih1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIGxvd2VyICsgMTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA8PSB1cHBlcil7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKChsb3dlciArIHVwcGVyKSAvIDIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih0eXBlID09PSBcImJpbmFyeVwiKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgdGhyb3cgXCJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSBcIiArIHR5cGUgKyBcIltcIiArIGxvd2VyICsgXCIsIFwiICsgdXBwZXIgKyBcIl1cIjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDb21wbGV0ZXMgcGFyYW1zX3RvX2NvbXBsZXRlLCBhbiBvYmplY3QgY29udGFpbmluZyBwYXJhbWV0ZXIgZGVzY3JpcHRpb25zLCBcbiAgICogYW5kIGluaXRpYWxpemVzIG5vbi1pbml0aWFsaXplZCBwYXJhbWV0ZXJzLiBUaGlzIG1vZGlmaWVkIHZlcnNpb24gb2ZcbiAgICogcGFyYW1zX3RvX2NvbXBsZXRlIGlzIHJldHVybmVkIGFzIGEgZGVlcCBjb3B5IGFuZCBub3QgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAqIEluaXRpYWxpemF0aW9uIGlzIGRvbmUgYnkgc3VwcGx5aW5nIGEgcGFyYW1faW5pdCBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZVxuICAgKiBmdW5jdGlvbih0eXBlLCBsb3dlciwgdXBwZXIpIHRoYXQgc2hvdWxkIHJldHVybiBhIHNpbmdsZSBudW1iZXIgXG4gICAqIChsaWtlIHBhcmFtX2luaXRfZml4ZWQsIGZvciBleGFtcGxlKS5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHBhcmFtcyA9IHsgXCJtdVwiOiB7XCJ0eXBlXCI6IFwicmVhbFwifSB9XG4gICAqIHBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyhwYXJhbXMpO1xuICAgKiAvLyBwYXJhbXMgc2hvdWxkIG5vdyBiZTpcbiAgICogLy8gIHtcIm11XCI6IHsgXCJ0eXBlXCI6IFwicmVhbFwiLCBcImRpbVwiOiBbMV0sIFwidXBwZXJcIjogSW5maW5pdHksXG4gICAqIC8vICAgICAgICAgICBcImxvd2VyXCI6IC1JbmZpbml0eSwgXCJpbml0XCI6IDAuNSB9fVxuICAgKi8gXG4gIHZhciBjb21wbGV0ZV9wYXJhbXMgID0gZnVuY3Rpb24ocGFyYW1zX3RvX2NvbXBsZXRlLCBwYXJhbV9pbml0KSB7XG4gICAgdmFyIHBhcmFtcyA9IGRlZXBfY2xvbmUocGFyYW1zX3RvX2NvbXBsZXRlKTtcbiAgICBmb3IgKHZhciBwYXJhbV9uYW1lIGluIHBhcmFtcykgeyBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwYXJhbV9uYW1lKSkgY29udGludWU7XG4gICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbcGFyYW1fbmFtZV07XG4gICAgICBpZiggIXBhcmFtLmhhc093blByb3BlcnR5KFwidHlwZVwiKSkge1xuICAgICAgICBwYXJhbS50eXBlID0gXCJyZWFsXCI7XG4gICAgICB9XG4gICAgICBpZighcGFyYW0uaGFzT3duUHJvcGVydHkoXCJkaW1cIikpIHtcbiAgICAgICAgcGFyYW0uZGltID0gWzFdO1xuICAgICAgfVxuICAgICAgaWYoaXNfbnVtYmVyKHBhcmFtLmRpbSkpIHtcbiAgICAgICAgcGFyYW0uZGltID0gW3BhcmFtLmRpbV07XG4gICAgICB9XG4gICAgICBpZihwYXJhbS50eXBlID09IFwiYmluYXJ5XCIpIHtcbiAgICAgICAgcGFyYW0udXBwZXIgPSAxO1xuICAgICAgICBwYXJhbS5sb3dlciA9IDA7XG4gICAgICB9XG4gICAgICBpZighcGFyYW0uaGFzT3duUHJvcGVydHkoXCJ1cHBlclwiKSkge1xuICAgICAgICBwYXJhbS51cHBlciA9IEluZmluaXR5O1xuICAgICAgfVxuICAgICAgaWYoIXBhcmFtLmhhc093blByb3BlcnR5KFwibG93ZXJcIikpIHtcbiAgICAgICAgcGFyYW0ubG93ZXIgPSAtSW5maW5pdHk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmKHBhcmFtLmhhc093blByb3BlcnR5KFwiaW5pdFwiKSkge1xuICAgICAgICAvLyBJZiB0aGlzIGlzIGp1c3QgYSBudW1iZXIgb3IgYSBuZXN0ZWQgYXJyYXkgd2UgbGVhdmUgaXQgYWxvbmUsIGJ1dCBpZi4uLlxuICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIC8vIHBhcmFtLmluaXQgaXMgYSBmdW5jdGlvbiwgdXNlIHRoYXQgdG8gaW5pdGlhbGl6ZSB0aGUgcGFyYW1ldGVyLlxuICAgICAgICAgIHBhcmFtLmluaXQgPSBwYXJhbS5pbml0KCk7XG4gICAgICAgIH0gZWxzZSBpZighYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pICYmICFBcnJheS5pc0FycmF5KHBhcmFtLmluaXQpKSB7XG4gICAgICAgIC8vIFdlIGhhdmUgYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciB3aGVyZSB0aGUgcGFyYW0uaW5pdCBleGlzdCBidXRcbiAgICAgICAgLy8gaXMgbm90IGFuIGFycmF5LiBUaGVuIGFzc3VtZSBpdCBpcyBhIG51bWJlciBvciBhIGZ1bmN0aW9uIGFuZCB1c2VcbiAgICAgICAgLy8gaXQgdG8gaW5pdGlhbGl6ZSB0aGUgcGFyYW1ldGVyLlxuICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgcGFyYW0uaW5pdCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vIFdlIHVzZSB0aGUgZGVmYXVsdCBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi5cbiAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtX2luaXQocGFyYW0udHlwZSwgcGFyYW0ubG93ZXIsIHBhcmFtLnVwcGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXM7XG4gIH07XG4gIFxuICBcbiAgLy8vLy8vLy8vLyBTdGVwcGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBcbiAgLyoqXG4gICAqIEBpbnRlcmZhY2VcbiAgICogQSBTdGVwcGVyIGlzIGFuIG9iamVjdCByZXNwb25zaWJsZSBmb3IgcHVzaGluZyBhcm91bmQgb25lXG4gICAqIG9yIG1vcmUgcGFyYW1ldGVyIHZhbHVlcyBpbiBhIHN0YXRlIGFjY29yZGluZyB0byB0aGUgZGlzdHJpYnV0aW9uXG4gICAqIGRlZmluZWQgYnkgdGhlIGxvZyBwb3N0ZXJpb3IuIFRoaXMgZGVmaW5lcyB0aGUgU3RlcHBlciBcImludGVyZmFjZVwiLFxuICAgKiB3aGVyZSBcImludGVyZmFjZVwiIG1lYW5zIHRoYXQgU3RlcHBlciBkZWZpbmVzIGEgY2xhc3MgdGhhdCBpcyBuZXZlclxuICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWRcbiAgICogc3RlcHBlciBmdW5jdGlvbnMuXG4gICAqIEBpbnRlcmZhY2VcbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6XG4gICAqICAge1wibXVcIjogeyBcInR5cGVcIjogXCJyZWFsXCIsIFwiZGltXCI6IFsxXSwgXCJ1cHBlclwiOiBJbmZpbml0eSwgXG4gICAqICAgXCJsb3dlclwiOiAtSW5maW5pdHksIFwiaW5pdFwiOiAwLjUgfX1cbiAgICogICBUaGUgcGFyYW1ldGVyIGRlZmluaXRpb25zIGFyZSBleHBlY3RlZCB0byBiZSBcImNvbXBsZXRlXCIsIHRoYXQgaXMsXG4gICAqICAgc3BlY2lmeWluZyBhbGwgcmVsZXZhbnQgYXR0cmlidXRlcyBzdWNoIGFzIGRpbSwgbG93ZXIgYW5kIHVwcGVyLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMgaW4gcGFyYW1zXG4gICAqICAgKGFuZCBwb3NzaWJseSBtb3JlKS4gVGhlIHBhcmFtZXRlciBuYW1lcyBhcmUgZ2l2ZW4gYXMga2V5cyBhbmQgdGhlIHN0YXRlc1xuICAgKiAgIGFzIHNjYWxhcnMgb3IsIHBvc3NpYmx5IG5lc3RlZCwgYXJyYXlzLiBGb3IgZXhhbXBsZTpcbiAgICogICB7bXU6IDEwLCBzaWdtYTogNSwgYmV0YTogWzEsIDIuNV19XG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gKnRha2luZyBubyBwYXJhbWV0ZXJzKiB0aGF0IHJldHVybnMgdGhlXG4gICAqICAgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gVGhhdCBpcywgdGhlIHZhbHVlIG9mIGxvZ19wb3N0XG4gICAqICAgc2hvdWxkIGNoYW5nZSBpZiB0aGUgdGhlIHZhbHVlcyBpbiBzdGF0ZSBhcmUgY2hhbmdlZC5cbiAgXG4gICAqL1xuICB2YXIgU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KSB7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMubG9nX3Bvc3QgPSBsb2dfcG9zdDtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUYWtlcyBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS4gU2hvdWxkIHJldHVybiB0aGUgbmV3IHN0YXRlLFxuICAgKiBidXQgaXMgbWFpbmx5IGNhbGxlZCBmb3IgaXQncyBzaWRlIGVmZmVjdCBvZiBtYWtpbmcgYSBjaGFuZ2UgaW4gdGhlXG4gICAqIHN0YXRlIG9iamVjdC5cbiAgICovXG4gIFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBcIkV2ZXJ5IFN0ZXBwZXIgbmVlZCB0byBpbXBsZW1lbnQgc3RlcCgpXCI7XG4gIH07XG4gIFxuICAvKipcbiAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGFkYXB0IHdoaWxlIHN0ZXBwaW5nLlxuICAgKi8gXG4gIFN0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAvLyBPcHRpb25hbCwgc29tZSBzdGVwcGVycyBtaWdodCBub3QgYmUgYWRhcHRpdmUuICovIFxuICB9O1xuICBcbiAgLyoqXG4gICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBjZWFzZSBhZGFwdGluZyB3aGlsZSBzdGVwcGluZy5cbiAgICovIFxuICBTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAvLyBPcHRpb25hbCwgc29tZSBzdGVwcGVycyBtaWdodCBub3QgYmUgYWRhcHRpdmUuICovIFxuICB9O1xuICBcbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5nIGluZm8gcmVnYXJkaW5nIHRoZSBzdGVwcGVyLlxuICAgKi8gXG4gIFN0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICAvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHN0YXRlIG9mIHRoZSBzdGVwcGVyLlxuICAgIHJldHVybiB7fTtcbiAgfTtcbiAgXG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluXG4gICAqIHRoZSBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gXCJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DXCJcbiAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KS5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAgKiBAcGFyYW0gZ2VuZXJhdGVfcHJvcG9zYWwgLSBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHByb3Bvc2FsIChhcyBhIG51bWJlcilcbiAgICogd2l0aCBzaWduYXR1cmUgZnVuY3Rpb24ocGFyYW1fc3RhdGUsIGxvZ19zY2FsZSkgd2hlcmUgcGFyYW1fc3RhdGUgaXMgYVxuICAgKiBudW1iZXIgYW5kIGxvZ19zY2FsZSBkZWZpbmVzIHRoZSBzY2FsZSBvZiB0aGUgcHJvcG9zYWwgc29tZWhvdy5cbiAgKi9cbiAgdmFyIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGdlbmVyYXRlX3Byb3Bvc2FsKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICBcbiAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgaWYocGFyYW1fbmFtZXMubGVuZ3RoICAhPSAxKSB7XG4gICAgICB0aHJvdyBcIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTtcbiAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdO1xuICAgIGlmKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgIHRocm93IFwiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBvbmUtZGltZW5zaW9uYWwgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgICB0aGlzLmxvd2VyID0gcGFyYW0ubG93ZXI7XG4gICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyO1xuICAgIFxuICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgICAgID0gZ2V0X29wdGlvbihcInByb3BfbG9nX3NjYWxlXCIsIG9wdGlvbnMsIDApO1xuICAgIHRoaXMuYmF0Y2hfc2l6ZSAgICAgICAgID0gZ2V0X29wdGlvbihcImJhdGNoX3NpemVcIiwgb3B0aW9ucywgNTApO1xuICAgIHRoaXMubWF4X2FkYXB0YXRpb24gICAgID0gZ2V0X29wdGlvbihcIm1heF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIDAuMzMpO1xuICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X29wdGlvbihcImluaXRpYWxfYWRhcHRhdGlvblwiLCBvcHRpb25zLCAxLjApO1xuICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X29wdGlvbihcInRhcmdldF9hY2NlcHRfcmF0ZVwiLCBvcHRpb25zLCAwLjQ0KTtcbiAgICB0aGlzLmlzX2FkYXB0aW5nICAgICAgICA9IGdldF9vcHRpb24oXCJpc19hZGFwdGluZ1wiLCBvcHRpb25zLCB0cnVlKTtcbiAgICBcbiAgICB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsID0gZ2VuZXJhdGVfcHJvcG9zYWw7XG4gICAgXG4gICAgdGhpcy5hY2NlcHRhbmNlX2NvdW50ID0gMDtcbiAgICB0aGlzLmJhdGNoX2NvdW50ID0gMDtcbiAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwOyAgXG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJhbV9zdGF0ZSA9IHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXTtcbiAgICAgIHZhciBwYXJhbV9wcm9wb3NhbCA9IHRoaXMuZ2VuZXJhdGVfcHJvcG9zYWwocGFyYW1fc3RhdGUsIHRoaXMucHJvcF9sb2dfc2NhbGUpO1xuICAgICAgaWYocGFyYW1fcHJvcG9zYWwgPCB0aGlzLmxvd2VyIHx8IHBhcmFtX3Byb3Bvc2FsID4gdGhpcy51cHBlcikge1xuICAgICAgICAvLyBPdXRzaWRlIG9mIGxpbWl0cyBvZiB0aGUgcGFyYW1ldGVyLCByZWplY3QgdGhlIHByb3Bvc2FsIFxuICAgICAgICAvLyBhbmQgc3RheSBhdCB0aGUgY3VycmVudCBzdGF0ZS5cbiAgICAgIH0gZWxzZSB7IC8vIG1ha2UgYSBNZXRyb3BvbGlzIHN0ZXBcbiAgICAgICAgdmFyIGN1cnJfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7XG4gICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3Byb3Bvc2FsO1xuICAgICAgICB2YXIgcHJvcF9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICAgICAgdmFyIGFjY2VwdF9wcm9iID0gTWF0aC5leHAocHJvcF9sb2dfZGVucyAtIGN1cnJfbG9nX2RlbnMpO1xuICAgICAgICBpZihhY2NlcHRfcHJvYiA+IE1hdGgucmFuZG9tKCkpIHtcbiAgICAgICAgICAvLyBXZSBkbyBub3RoaW5nIGFzIHRoZSBzdGF0ZSBvZiBwYXJhbSBoYXMgYWxyZWFkeSBiZWVuIGNoYW5nZWQgdG8gdGhlIHByb3Bvc2FsXG4gICAgICAgICAgaWYodGhpcy5pc19hZGFwdGluZykgdGhpcy5hY2NlcHRhbmNlX2NvdW50KysgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJldmVydCBzdGF0ZSBiYWNrIHRvIHRoZSBvbGQgc3RhdGUgb2YgcGFyYW1cbiAgICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9zdGF0ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYodGhpcy5pc19hZGFwdGluZykge1xuICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gKys7XG4gICAgICAgIGlmKHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA+PSB0aGlzLmJhdGNoX3NpemUpIHsgLy8gdGhlbiBhZGFwdFxuICAgICAgICAgIHRoaXMuYmF0Y2hfY291bnQgKys7XG4gICAgICAgICAgdmFyIGxvZ19zZF9hZGp1c3RtZW50ID0gXG4gICAgICAgICAgICBNYXRoLm1pbih0aGlzLm1heF9hZGFwdGF0aW9uLCBcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uIC8gTWF0aC5zcXJ0KHRoaXMuYmF0Y2hfY291bnQpKTtcbiAgICAgICAgICBpZih0aGlzLmFjY2VwdGFuY2VfY291bnQgLyB0aGlzLmJhdGNoX3NpemUgPiB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSArPSBsb2dfc2RfYWRqdXN0bWVudDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAtPSBsb2dfc2RfYWRqdXN0bWVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hY2NlcHRhbmNlX2NvdW50ID0gMDtcbiAgICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdO1xuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzX2FkYXB0aW5nID0gdHJ1ZTtcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzX2FkYXB0aW5nID0gZmFsc2U7XG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wX2xvZ19zY2FsZTogdGhpcy5wcm9wX2xvZ19zY2FsZSxcbiAgICAgIGlzX2FkYXB0aW5nOiB0aGlzLmlzX2FkYXB0aW5nLFxuICAgICAgYWNjZXB0YW5jZV9jb3VudDogdGhpcy5hY2NlcHRhbmNlX2NvdW50LFxuICAgICAgaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbjogdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uLFxuICAgICAgYmF0Y2hfY291bnQ6IHRoaXMuYmF0Y2hfY291bnRcbiAgICB9O1xuICB9O1xuICBcbiAgXG4gIC8qKlxuICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBOb3JtYWwgcHJvcG9zYWwuXG4gICAqL1xuICB2YXIgbm9ybWFsX3Byb3Bvc2FsID0gZnVuY3Rpb24ocGFyYW1fc3RhdGUsIHByb3BfbG9nX3NjYWxlKSB7XG4gICAgcmV0dXJuIHJub3JtKHBhcmFtX3N0YXRlICwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGNvbnRpbm91cyBOb3JtYWwgcHJvcG9zYWxzLlxuICAgKi9cbiAgdmFyIFJlYWxNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgbm9ybWFsX3Byb3Bvc2FsKTtcbiAgfTtcbiAgXG4gIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHJldHVybmluZyBhIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbC5cbiAgICovXG4gIHZhciBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChybm9ybShwYXJhbV9zdGF0ZSAsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSkpO1xuICB9O1xuICBcbiAgICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLlxuICAgKi9cbiAgdmFyIEludE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwpO1xuICB9O1xuICBcbiAgSW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgSW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpblxuICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluIFwiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQ1wiXG4gICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkgZm9yIHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwgYXJyYXlzLiBUaGF0XG4gICAqIGlzLCBpbnN0ZWFkIG9mIGp1c3QgdGFraW5nIGEgc3RlcCBmb3IgYSBvbmUtZGltZW5zaW9uYWwgcGFyYW1ldGVyIGxpa2UgXG4gICAqIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLCB0aGlzIFN0ZXBwZXIgaXMgcmVzcG9uc2libGUgZm9yIHRha2luZyBzdGVwcyBcbiAgICogZm9yIGEgbXVsdGlkaW1lbnNpb25hbCBhcnJheS4gSXQncyBzdGlsbCBwcmV0dHkgZHVtYiBhbmQganVzdCB0YWtlc1xuICAgKiBvbmUtZGltZW5zaW9uYWwgc3RlcHMgZm9yIGVhY2ggcGFyYW1ldGVyIGNvbXBvbmVudCwgdGhvdWdoLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgXG4gICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICAqIEBwYXJhbSBTdWJTdGVwcGVyIC0gYSBjb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGUgb2Ygb25lIGRpbWVuc2lvbmFsIFN0ZXBwZXIgdG8gYXBwbHkgb25cbiAgICogICBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLlxuICAqL1xuICB2YXIgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBTdWJTdGVwcGVyKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICBcbiAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgaWYocGFyYW1fbmFtZXMubGVuZ3RoICAhPSAxKSB7XG4gICAgICB0aHJvdyBcIk11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTtcbiAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdO1xuICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjtcbiAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7XG4gICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07XG4gIFxuICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcInByb3BfbG9nX3NjYWxlXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAwKTtcbiAgICB0aGlzLmJhdGNoX3NpemUgICAgICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJiYXRjaF9zaXplXCIsIG9wdGlvbnMsIHRoaXMuZGltLCA1MCk7XG4gICAgdGhpcy5tYXhfYWRhcHRhdGlvbiAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwibWF4X2FkYXB0YXRpb25cIiwgb3B0aW9ucywgdGhpcy5kaW0sIDAuMzMpO1xuICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X211bHRpZGltX29wdGlvbihcImluaXRpYWxfYWRhcHRhdGlvblwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMS4wKTtcbiAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJ0YXJnZXRfYWNjZXB0X3JhdGVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDAuNDQpO1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgICAgICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcImlzX2FkYXB0aW5nXCIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTtcbiAgICBcbiAgICAvLyBUaGlzIGhhY2sgYmVsb3cgaXMgYSByZWN1cnNpdmUgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGFuIGFycmF5IG9mIFxuICAgIC8vIG9uZSBkaW1lbnNpb25hbCBzdGVwcGVycyBhY2NvcmRpbmcgdG8gZGltLlxuICAgIHZhciBjcmVhdGVfc3Vic3RlcHBlcnMgPSBcbiAgICAgIGZ1bmN0aW9uKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZSwgYmF0Y2hfc2l6ZSwgbWF4X2FkYXB0YXRpb24sIGluaXRpYWxfYWRhcHRhdGlvbiwgdGFyZ2V0X2FjY2VwdF9yYXRlLCBpc19hZGFwdGluZykge1xuICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107XG4gICAgICBpZihkaW0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHZhciBzdWJvcHRpb25zID0ge3Byb3BfbG9nX3NjYWxlOiBwcm9wX2xvZ19zY2FsZVtpXSwgYmF0Y2hfc2l6ZTogYmF0Y2hfc2l6ZVtpXSxcbiAgICAgICAgICAgIG1heF9hZGFwdGF0aW9uOiBtYXhfYWRhcHRhdGlvbltpXSwgaW5pdGlhbF9hZGFwdGF0aW9uOiBpbml0aWFsX2FkYXB0YXRpb25baV0sXG4gICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwgaXNfYWRhcHRpbmc6IGlzX2FkYXB0aW5nW2ldfTtcbiAgICAgICAgICAgIHZhciBzdWJwYXJhbSA9IHt9O1xuICAgICAgICAgICAgc3VicGFyYW1baV0gPSBkZWVwX2Nsb25lKHBhcmFtKTtcbiAgICAgICAgICAgIHN1YnBhcmFtW2ldLmRpbSA9IFsxXTsgLy8gQXMgdGhpcyBzaG91bGQgbm93IGJlIGEgb25lLWRpbSBwYXJhbWV0ZXJcbiAgICAgICAgICAgIGRlbGV0ZSBzdWJwYXJhbVtpXS5pbml0OyAvLyBBcyBpdCBzb3VsZCBub3QgYmUgbmVlZGVkXG4gICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgU3ViU3RlcHBlcihzdWJwYXJhbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBzdWJvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlW2ldLCBcbiAgICAgICAgICAgIGJhdGNoX3NpemVbaV0sIG1heF9hZGFwdGF0aW9uW2ldLCBpbml0aWFsX2FkYXB0YXRpb25baV0sIHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwgaXNfYWRhcHRpbmdbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc3Vic3RlcHBlcnM7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QsXG4gICAgICB0aGlzLnByb3BfbG9nX3NjYWxlLCB0aGlzLmJhdGNoX3NpemUsIHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uLFxuICAgICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUsIHRoaXMuaXNfYWRhcHRpbmcpO1xuICAgIFxuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS5cbiAgICByZXR1cm4gbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7cmV0dXJuIHN1YnN0ZXBwZXIuc3RlcCgpOyB9KTtcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge3N1YnN0ZXBwZXIuc3RhcnRfYWRhcHRhdGlvbigpOyB9KTtcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7c3Vic3RlcHBlci5zdG9wX2FkYXB0YXRpb24oKTsgfSk7XG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7XG4gICAgICByZXR1cm4gc3Vic3RlcHBlci5pbmZvKCk7IFxuICAgIH0pO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGNvbnRpbm91cyBOb3JtYWwgcHJvcG9zYWxzLlxuICAgKi9cbiAgdmFyIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFJlYWxNZXRyb3BvbGlzU3RlcHBlcik7XG4gIH07XG4gIFxuICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLlxuICAgKi8gICAgXG4gIHZhciBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIEludE1ldHJvcG9saXNTdGVwcGVyKTtcbiAgfTtcbiAgXG4gIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBhIHN0ZXAgZm9yIGEgYmluYXJ5IHBhcmFtZXRlci5cbiAgICogVGhpcyBpcyBkb25lIGJ5IGV2YWx1YXRpbmcgdGhlIGxvZyBwb3N0ZXJpb3IgZm9yIGJvdGggc3RhdGVzIG9mIHRoZVxuICAgKiBwYXJhbWV0ZXIgYW5kIHRoZW4gc2VsZWN0aW5nIGEgc3RhdGUgcmFuZG9tbHkgd2l0aCBwcm9iYWJpbGl0eSByZWxhdGl2ZSBcbiAgICogdG8gdGhlIHBvc3RlcmlvciBvZiBlYWNoIHN0YXRlLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICovXG4gIHZhciBCaW5hcnlTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggID09IDEpIHtcbiAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBcIkJpbmFyeVN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgfTtcbiAgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJpbmFyeVN0ZXBwZXI7XG4gIFxuICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDtcbiAgICB2YXIgemVyb19sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAxO1xuICAgIHZhciBvbmVfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7XG4gICAgdmFyIG1heF9sb2dfZGVucyA9IE1hdGgubWF4KHplcm9fbG9nX2RlbnMsIG9uZV9sb2dfZGVucyk7XG4gICAgemVyb19sb2dfZGVucyAtPSBtYXhfbG9nX2RlbnM7XG4gICAgb25lX2xvZ19kZW5zIC09IG1heF9sb2dfZGVucztcbiAgICB2YXIgemVyb19wcm9iID0gTWF0aC5leHAoemVyb19sb2dfZGVucyAtIE1hdGgubG9nKCBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zKSArIE1hdGguZXhwKG9uZV9sb2dfZGVucykgKSApO1xuICAgIGlmKE1hdGgucmFuZG9tKCkgPCB6ZXJvX3Byb2IpIHtcbiAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IC8vIGVsc2Uga2VlcCB0aGUgcGFyYW0gYXQgMSAuXG4gICAgcmV0dXJuIDE7XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIEp1c3QgbGlrZSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIHRoaXMgU3RlcHBlciB0YWtlcyBhIHN0ZXBzIGZvclxuICAgKiBhIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyIGJ5IHVwZGF0aW5nIGVhY2ggY29tcG9uZW50IGluIHR1cm4uIFRoZSBkaWZmZXJlbmNlXG4gICAqIGlzIHRoYXQgdGhpcyBzdGVwcGVyIHdvcmtzIG9uIGJpbmFyeSBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgXG4gICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICovXG4gIHZhciBCaW5hcnlDb21wb25lbnRTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggID09IDEpIHtcbiAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTtcbiAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBcIkJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLlwiO1xuICAgIH1cbiAgICBcbiAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gXG4gICAgICBmdW5jdGlvbihkaW0sIHN1YnN0YXRlLCBsb2dfcG9zdCkge1xuICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107XG4gICAgICB2YXIgaTtcbiAgICAgIGlmKGRpbS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICB2YXIgc3VicGFyYW1zID0ge307XG4gICAgICAgICAgc3VicGFyYW1zW2ldID0gcGFyYW07XG4gICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgQmluYXJ5U3RlcHBlcihzdWJwYXJhbXMsIHN1YnN0YXRlLCBsb2dfcG9zdCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc3Vic3RlcHBlcnM7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QpO1xuICB9O1xuICBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjtcbiAgXG4gIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS5cbiAgICByZXR1cm4gbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7cmV0dXJuIHN1YnN0ZXBwZXIuc3RlcCgpOyB9KTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIFRoaXMgc3RlcHBlciBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHRha2luZyBhIHN0ZXAgZm9yIG9uZSBvciBtb3JlIHBhcmFtZXRlcnMuXG4gICAqIEZvciByZWFsIGFuZCBpbnQgcGFyYW1ldGVycyBpdCB0YWtlcyBNZXRyb3BvbGlzIHdpdGhpbiBHaWJicyBzdGVwcywgYW5kIGZvciBcbiAgICogYmluYXJ5IHBhcmFtZXRlcnMgaXQgZG9lcyBldmFsdWF0ZXMgdGhlIHBvc3RlcmlvciBmb3IgYm90aCBwYXJhbXRlciB2YWx1ZXMgYW5kXG4gICAqIHJhbmRvbWx5IGNoYW5nZXMgdG8gYSBjZXJ0YWluIHZhbHVlIHByb3BvcnRpb25hbGx5IHRvIHRoYXQgdmFsdWUncyBwb3N0ZXJpb3JcbiAgICogKHRoaXMgaXMgYWxzbyBkb25lIGZvciBlYWNoIHBhcmFtZXRlciwgc28gYWxzbyBhICogd2l0aGluIEdpYmJzIGFwcHJvYWNoKS5cbiAgICogVGhpcyBzdGVwcGVyIGlzIGFsc28gYWRhcHRpdmUgYW5kIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnNcbiAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICovXG4gIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICB0aGlzLnBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBbXTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbV9uYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dO1xuICAgICAgdmFyIFNlbGVjdFN0ZXBwZXI7XG4gICAgICBzd2l0Y2ggKHBhcmFtLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcInJlYWxcIjpcbiAgICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJpbnRcIjpcbiAgICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYmluYXJ5XCI6XG4gICAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5U3RlcHBlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IFwiQW13Z1N0ZXBwZXIgY2FuJ3QgaGFuZGxlIHBhcmFtZXRlciBcIiArIHRoaXMucGFyYW1fbmFtZXNbaV0gICtcIiB3aXRoIHR5cGUgXCIgKyBwYXJhbS50eXBlOyBcbiAgICAgIH1cbiAgICAgIHZhciBwYXJhbV9vYmplY3Rfd3JhcCA9IHt9O1xuICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgdmFyIHBhcmFtX29wdGlvbnMgPSBvcHRpb25zLnBhcmFtcyAmJiBvcHRpb25zLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXSB8fCB7fTtcbiAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgICAgID0gcGFyYW1fb3B0aW9ucy5wcm9wX2xvZ19zY2FsZSAgICAgfHwgb3B0aW9ucy5wcm9wX2xvZ19zY2FsZTsgXG4gICAgICBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgICAgICAgICA9IHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSAgICAgICAgIHx8IG9wdGlvbnMuYmF0Y2hfc2l6ZTsgXG4gICAgICBwYXJhbV9vcHRpb25zLm1heF9hZGFwdGF0aW9uICAgICA9IHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gICAgIHx8IG9wdGlvbnMubWF4X2FkYXB0YXRpb247XG4gICAgICBwYXJhbV9vcHRpb25zLmluaXRpYWxfYWRhcHRhdGlvbiA9IHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uIHx8IG9wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uO1xuICAgICAgcGFyYW1fb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGUgPSBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSB8fCBvcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZTsgXG4gICAgICBwYXJhbV9vcHRpb25zLmlzX2FkYXB0aW5nICAgICAgICA9IHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgICAgICAgIHx8IG9wdGlvbnMuaXNfYWRhcHRpbmc7IFxuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXSA9IG5ldyBTZWxlY3RTdGVwcGVyKHBhcmFtX29iamVjdF93cmFwLCBzdGF0ZSwgbG9nX3Bvc3QsIHBhcmFtX29wdGlvbnMpO1xuICAgIH1cbiAgfTtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQW13Z1N0ZXBwZXI7XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdWJzdGVwcGVycyk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RlcCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfTtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpO1xuICAgIH1cbiAgfTtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdG9wX2FkYXB0YXRpb24oKTtcbiAgICB9IFxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5mbyA9IHt9O1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpbmZvW3RoaXMucGFyYW1fbmFtZXNbaV1dID0gdGhpcy5zdWJzdGVwcGVyc1tpXS5pbmZvKCk7XG4gICAgfVxuICAgIHJldHVybiBpbmZvO1xuICB9O1xuICBcbiAgXG4gIFxuICAvLy8vLy8vLy8vLyBTYW1wbGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIFxuICAgLyoqXG4gICAqIEBpbnRlcmZhY2VcbiAgICogV2hpbGUgeW91IGNvdWxkIGZpdCBhIG1vZGVsIGJ5IHBhc3RpbmcgdG9nZXRoZXIgU3RlcHBlcnMsIGFcbiAgLy8gU2FtcGxlciBpcyBoZXJlIGlzIGEgY29udmVuaWVuY2UgY2xhc3Mgd2hlcmUgYW4gaW5zdGFuY2Ugb2YgU2FtcGxlclxuICAvLyBzZXRzIHVwIHRoZSBTdGVwcGVycywgY2hlY2tzIHRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbixcbiAgLy8gYW5kIG1hbmFnZXMgdGhlIHNhbXBsaW5nLiBUaGlzIGhlcmUgZGVmaW5lcyB0aGUgU2FtcGxlciBcImludGVyZmFjZVwiLlxuICAgKiBAaW50ZXJmYWNlXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOlxuICAgKiAgIHtcIm11XCI6IHtcInR5cGVcIjogXCJyZWFsXCJ9LCBcInNpZ21hXCI6IHtcInR5cGVcIjogXCJyZWFsXCIsIFwibG93ZXJcIiA9IDB9fVxuICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgZG9lc24ndCBoYXZlIHRvIGJlIFwiY29tcGxldGVcIiBhbmQgcHJvcGVydGllc1xuICAgKiAgIGxlZnQgb3V0IChsaWtlIGxvd2VyIGFuZCB1cHBlcikgd2lsbCBiZSBmaWxsZWQgaW4gYnkgZGVmYXVsdHMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gd2l0aCBzaWduYXR1cmUgZnVuY3Rpb24oc3RhdGUsIGRhdGEpLiBIZXJlXG4gICAqICAgc3RhdGUgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSB3aXRoIGVhY2ggcGFyYW1ldGVyIGFzIGEgXG4gICAqICAga2V5IGFuZCB0aGUgcGFyYW1ldGVyIHZhbHVlcyBhcyBudW1iZXJzIG9yIGFycmF5cy4gRm9yIGV4YW1wbGU6XG4gICAqICAge1wibXVcIjogMywgXCJzaWdtYVwiOiAxLjV9LiBUaGUgZGF0YSBhcmd1bWVudCB3aWxsIGJlIHRoZSBzYW1lIG9iamVjdCBhcyBcbiAgICogICB0aGUgZGF0YSBhcmd1bWVudCBnaXZlbiBiZWxvdy5cbiAgICogQHBhcmFtIGRhdGEgLSBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aGUgbG9nX3Bvc3QgZnVuY3Rpb25cbiAgICogICB3aGVuIHNhbXBsaW5nLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHNhbXBsZXIuXG4gICAqL1xuICB2YXIgU2FtcGxlciA9IGZ1bmN0aW9uKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgXG4gICAgLy8gU2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgaWYgbm90IHBhc3NlZCB0aHJvdWdoIHRoZSBvcHRpb25zIG9iamVjdFxuICAgIHRoaXMucGFyYW1faW5pdF9mdW4gICA9IGdldF9vcHRpb24oXCJwYXJhbV9pbml0X2Z1blwiLCBvcHRpb25zLCBwYXJhbV9pbml0X2ZpeGVkKTtcbiAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKFwidGhpblwiLCBvcHRpb25zLCAxKTtcbiAgICB2YXIgcGFyYW1zX3RvX21vbml0b3IgPSBnZXRfb3B0aW9uKFwibW9uaXRvclwiLCBvcHRpb25zLCBudWxsKTtcbiAgICB0aGlzLnRoaW4odGhpbm5pbmdfaW50ZXJ2YWwpO1xuICAgIHRoaXMubW9uaXRvcihwYXJhbXNfdG9fbW9uaXRvcik7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyBDb21wbGV0aW5nIHRoZSBwYXJhbXMgYW5kIGluaXRpYWxpemluZyB0aGUgc3RhdGUuXG4gICAgdGhpcy5wYXJhbXMgPSBjb21wbGV0ZV9wYXJhbXModGhpcy5wYXJhbXMsIHRoaXMucGFyYW1faW5pdF9mdW4pO1xuICAgIHZhciBzdGF0ZSA9IHt9O1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrICkge1xuICAgICAgc3RhdGVbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXS5pbml0O1xuICAgIH1cbiAgICB0aGlzLmxvZ19wb3N0ID0gZnVuY3Rpb24oKSB7IFxuICAgICAgcmV0dXJuIGxvZ19wb3N0KHN0YXRlLCBkYXRhKTtcbiAgICB9O1xuICAgIC8vIFJ1bm5pbmcgdGhlIGxvZ19wb3N0IGZ1bmN0aW9uIG9uY2UgaW4gY2FzZSBpdCBmdXJ0aGVyIG1vZGlmaWVzIHRoZSBzdGF0ZVxuICAgIC8vIGZvciBleGFtcGxlIGFkZGluZyBkZXJpdmVkIHF1YW50aXRpZXMuXG4gICAgdGhpcy5sb2dfcG9zdCgpO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLnN0ZXBwZXJzID0gdGhpcy5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSh0aGlzLnBhcmFtcywgdGhpcy5zdGF0ZSwgdGhpcy5sb2dfcG9zdCwgdGhpcy5vcHRpb25zKTtcbiAgfTtcbiAgXG4gIC8qKiBTaG91bGQgcmV0dXJuIGEgdmVjdG9yIG9mIHN0ZXBwZXJzIHRoYXQgd2hlbiBjYWxsZWQgXG4gICAqIHNob3VsZCB0YWtlIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLlxuICAgKi9cbiAgU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbihzdGF0ZSwgbG9nX3Bvc3Qpe1xuICAgIHRocm93IFwiRXZlcnkgU2FtcGxlciBuZWVkcyB0byBpbXBsZW1lbnQgY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUoKVwiO1xuICB9O1xuICBcbiAgLyoqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIFNhbXBsZXIuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7c3RhdGU6IHRoaXMuc3RhdGUsIHRoaW46IHRoaXMudGhpbiwgbW9uaXRvcjogdGhpcy5tb25pdG9yLFxuICAgICAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnN9O1xuICB9O1xuICBcbiAgLyoqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBSZXR1cm5zIHRoZSBuZXcgc3BhY2VcbiAgICogYnV0IGFsc28gbW9kaWZpZXMgdGhlIHN0YXRlIGluIHBsYWNlLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3RlcHBlcnMpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0ZXAoKTtcbiAgICB9XG4gICAgaWYoT2JqZWN0LmtleXModGhpcy5zdGF0ZSkubGVuZ3RoID4gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpLmxlbmd0aCkge1xuICAgICAgLy8gVGhlIHN0YXRlIGNvbnRhaW5zIGRldml2ZWQgcXVhbnRpdGllcyAobm90IG9ubHkgcGFyYW1ldGVycykgYW5kIHdlXG4gICAgICAvLyBuZWVkIHRvIHJ1biB0aGUgbG9nX3Bvc3Qgb25jZSBtb3JlIGluIG9yZGVyIHRvIHNldCB0aGUgZGVyaXZlZCBxdWFudGl0aWVzXG4gICAgICAvLyBmb3IgdGhlIGZpbmFsIHBhcmFtZXRlciBzdGF0ZVxuICAgICAgdGhpcy5sb2dfcG9zdCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUYWtlcyBuX2l0ZXJhdGlvbnMgc3RlcHMgaW4gdGhlIHBhcmFtZXRlciBzcGFjZSBhbmQgcmV0dXJucyB0aGVtXG4gICAqIGFzIGFuIG9iamVjdCBvZiBhcnJheXMgd2l0aCBvbmUgYXJyYXkgcGVyIHBhcmFtZXRlci4gRm9yIGV4YW1wbGU6XG4gICAqIHttdTogWzEsIC0xLCAyLCAzLCAuLi5dLCBzaWdtYTogWzEsIDIsIDIsIDEsIC4uLl19LlxuICAgKiBJZiB0aGluIGlzID4gMSB0aGVuIG5faXRlcmF0aW9ucyAvIHRoaW4gc2FtcGxlcyBhcmUgcmV0dXJuZWQuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc2FtcGxlID0gZnVuY3Rpb24obl9pdGVyYXRpb25zKSB7XG4gICAgICAvLyBJbml0aWFsaXppbmcgY3Vycl9zYW1wbGUgd2hlcmUgdGhlIHNhbXBsZSBpcyBnb2luZyB0byBiZSBzYXZlZFxuICAgICAgLy8gYXMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgb25lIGFycmF5IHBlciBwYXJhbWV0ZXIgdG8gYmUgbW9uaXRvcmVkLlxuICAgICAgdmFyIGksIGosIG1vbml0b3JlZF9wYXJhbXM7XG4gICAgICBpZih0aGlzLm1vbml0b3JlZF9wYXJhbXMgPT09IG51bGwpIHtcbiAgICAgICAgbW9uaXRvcmVkX3BhcmFtcyA9IE9iamVjdC5rZXlzKHRoaXMuc3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW9uaXRvcmVkX3BhcmFtcyA9IHRoaXMubW9uaXRvcmVkX3BhcmFtcztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdmFyIGN1cnJfc2FtcGxlID0ge307XG4gICAgICBmb3IoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGN1cnJfc2FtcGxlW21vbml0b3JlZF9wYXJhbXNbal1dID0gW107XG4gICAgICB9XG4gICAgICBcbiAgICAgIGZvcihpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgIGlmKGkgJSB0aGlzLnRoaW5uaW5nX2ludGVydmFsID09PSAwKSB7XG4gICAgICAgICAgZm9yKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gbW9uaXRvcmVkX3BhcmFtc1tqXTtcbiAgICAgICAgICAgIGN1cnJfc2FtcGxlW3BhcmFtXS5wdXNoKCBjbG9uZV9wYXJhbV9kcmF3KHRoaXMuc3RhdGVbcGFyYW1dKSApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0ZXAoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyX3NhbXBsZTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUYWtlcyBuX2l0ZXJhdGlvbiBzdGVwcyBpbiBwYXJhbWV0ZXIgc3BhY2UgYnV0IHJldHVybnMgbm90aGluZy5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5idXJuID0gZnVuY3Rpb24obl9pdGVyYXRpb25zKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXAoKTtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyB3aGF0IHBhcmFtZXRlcnMgc2hvdWxkIGJlIG1vbml0b3JlZCBhbmQgcmV0dXJuZWQgd2hlbiBjYWxsaW5nXG4gICAqIHNhbXBsZS5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5tb25pdG9yID0gZnVuY3Rpb24ocGFyYW1zX3RvX21vbml0b3IpIHtcbiAgICAgIHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9IHBhcmFtc190b19tb25pdG9yO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFNldHMgdGhlIHRoaW5uaW5nLiBGb3IgZXhhbXBsZSB0aGluID09IDEwIG1lYW5zIHRoYXQgZXZlcnkgMTB0aCBwb3N0ZXJpb3JcbiAgICogZHJhdyB3aWxsIGJlIGtlcHQuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUudGhpbiA9IGZ1bmN0aW9uKHRoaW5uaW5nX2ludGVydmFsKSB7XG4gICAgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9IHRoaW5uaW5nX2ludGVydmFsO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFNldHMgYWRhcHRhdGlvbiBvbiwgaWYgYXBwbGljYWJsZSwgaW4gYWxsIHN0ZXBwZXJzLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgICAvKipcbiAgICogU2V0cyBhZGFwdGF0aW9uIG9mZiwgaWYgYXBwbGljYWJsZSwgaW4gYWxsIHN0ZXBwZXJzLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpO1xuICAgIH1cbiAgfTtcbiAgXG4gICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTYW1wbGVyfVxuICAgKiBUaGlzIHNhbXBsZXIgdXNlcyB0aGUgQW13Z1N0ZXBwZXIgYXMgdGhlIHN0ZXBwZXIgZnVuY3Rpb24gd2hpY2ggaW1wbGVtZW50cyB0aGUgXG4gICAqIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiBcIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUNcIlxuICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLiBBbiBhZGl0aW9uIGlzIHRoYXQgaXQgaGFuZGxlcyBpbnQgcGFyYW1ldGVyc1xuICAgKiBieSBtYWtpbmcgZGlzY3JldGUgTm9ybWFsIHByb3Bvc2FscyBhbmQgYmluYXJ5IHBhcmFtZXRlcnMgYnkgdGFraW5nIG9uIGEgbmV3IFxuICAgKiB2YWx1ZSBwcm9wb3J0aW9uYWwgdG8gdGhlIHBvc3RlcmlvciBvZiB0aGUgdHdvIHBvc3NpYmxlIHN0YXRlcyBvZiB0aGVcbiAgICogcGFyYW1ldGVyLiBUaGlzIHNhbXBsZXIgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVyc1xuICAgKiBhcmUgbm90IHRvbyBoaWdoIGFuZCB0aGUgY29ycmVsYXRpb25zIGJldHdlZW4gcGFyYW1ldGVycyBhcmUgbG93LlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnNcbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEFtd2dTYW1wbGVyID0gZnVuY3Rpb24ocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykge1xuICAgIFNhbXBsZXIuY2FsbCh0aGlzLCBwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKTtcbiAgfTtcbiAgXG4gIEFtd2dTYW1wbGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU2FtcGxlci5wcm90b3R5cGUpOyBcbiAgQW13Z1NhbXBsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQW13Z1NhbXBsZXI7XG4gIFxuICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucyl7XG4gICAgcmV0dXJuIFsgbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSBdO1xuICB9O1xuICBcbiAgXG4gIC8vIFJldHVybmluZyB0aGUgZnVuY3Rpb25zIHRoYXQgc2hvdWxkIGJlIHB1YmxpY2x5IGV4cG9zZWQgYnkgdGhpcyBtb2R1bGVcbiAgcmV0dXJuIHtcbiAgICBydW5pZjogcnVuaWYsXG4gICAgcnVuaWZfZGlzY3JldGU6IHJ1bmlmX2Rpc2NyZXRlLFxuICAgIHJub3JtOiBybm9ybSxcbiAgICBwYXJhbV9pbml0X2ZpeGVkOiBwYXJhbV9pbml0X2ZpeGVkLCBcbiAgICBjb21wbGV0ZV9wYXJhbXM6IGNvbXBsZXRlX3BhcmFtcywgXG4gICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyOiBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIEludE1ldHJvcG9saXNTdGVwcGVyOiBJbnRNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBCaW5hcnlTdGVwcGVyOiBCaW5hcnlTdGVwcGVyLCBcbiAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyOiBCaW5hcnlDb21wb25lbnRTdGVwcGVyLCBcbiAgICBBbXdnU3RlcHBlcjogQW13Z1N0ZXBwZXIsIFxuICAgIEFtd2dTYW1wbGVyOiBBbXdnU2FtcGxlclxuICB9O1xufSkpO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHtcbiAgcmV0dXJuIGEgPT0gbnVsbCB8fCBiID09IG51bGwgPyBOYU4gOiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG51bWJlcih4KSB7XG4gIHJldHVybiB4ID09PSBudWxsID8gTmFOIDogK3g7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkge1xuICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IGFzY2VuZGluZyBmcm9tIFwiLi9hc2NlbmRpbmcuanNcIjtcbmltcG9ydCBwZXJtdXRlIGZyb20gXCIuL3Blcm11dGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc29ydCh2YWx1ZXMsIC4uLkYpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZXNbU3ltYm9sLml0ZXJhdG9yXSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwidmFsdWVzIGlzIG5vdCBpdGVyYWJsZVwiKTtcbiAgdmFsdWVzID0gQXJyYXkuZnJvbSh2YWx1ZXMpO1xuICBsZXQgW2ZdID0gRjtcbiAgaWYgKChmICYmIGYubGVuZ3RoICE9PSAyKSB8fCBGLmxlbmd0aCA+IDEpIHtcbiAgICBjb25zdCBpbmRleCA9IFVpbnQzMkFycmF5LmZyb20odmFsdWVzLCAoZCwgaSkgPT4gaSk7XG4gICAgaWYgKEYubGVuZ3RoID4gMSkge1xuICAgICAgRiA9IEYubWFwKGYgPT4gdmFsdWVzLm1hcChmKSk7XG4gICAgICBpbmRleC5zb3J0KChpLCBqKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZiBvZiBGKSB7XG4gICAgICAgICAgY29uc3QgYyA9IGFzY2VuZGluZ0RlZmluZWQoZltpXSwgZltqXSk7XG4gICAgICAgICAgaWYgKGMpIHJldHVybiBjO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZiA9IHZhbHVlcy5tYXAoZik7XG4gICAgICBpbmRleC5zb3J0KChpLCBqKSA9PiBhc2NlbmRpbmdEZWZpbmVkKGZbaV0sIGZbal0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHBlcm11dGUodmFsdWVzLCBpbmRleCk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlcy5zb3J0KGNvbXBhcmVEZWZpbmVkKGYpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUgPSBhc2NlbmRpbmcpIHtcbiAgaWYgKGNvbXBhcmUgPT09IGFzY2VuZGluZykgcmV0dXJuIGFzY2VuZGluZ0RlZmluZWQ7XG4gIGlmICh0eXBlb2YgY29tcGFyZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY29tcGFyZSBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgcmV0dXJuIChhLCBiKSA9PiB7XG4gICAgY29uc3QgeCA9IGNvbXBhcmUoYSwgYik7XG4gICAgaWYgKHggfHwgeCA9PT0gMCkgcmV0dXJuIHg7XG4gICAgcmV0dXJuIChjb21wYXJlKGIsIGIpID09PSAwKSAtIChjb21wYXJlKGEsIGEpID09PSAwKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzY2VuZGluZ0RlZmluZWQoYSwgYikge1xuICByZXR1cm4gKGEgPT0gbnVsbCB8fCAhKGEgPj0gYSkpIC0gKGIgPT0gbnVsbCB8fCAhKGIgPj0gYikpIHx8IChhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMCk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYXgodmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGxldCBtYXg7XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGxcbiAgICAgICAgICAmJiAobWF4IDwgdmFsdWUgfHwgKG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkpIHtcbiAgICAgICAgbWF4ID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGxcbiAgICAgICAgICAmJiAobWF4IDwgdmFsdWUgfHwgKG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkpIHtcbiAgICAgICAgbWF4ID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXg7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaW4odmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGxldCBtaW47XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGxcbiAgICAgICAgICAmJiAobWluID4gdmFsdWUgfHwgKG1pbiA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkpIHtcbiAgICAgICAgbWluID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGxcbiAgICAgICAgICAmJiAobWluID4gdmFsdWUgfHwgKG1pbiA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkpIHtcbiAgICAgICAgbWluID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBtaW47XG59XG4iLCJpbXBvcnQge2FzY2VuZGluZ0RlZmluZWQsIGNvbXBhcmVEZWZpbmVkfSBmcm9tIFwiLi9zb3J0LmpzXCI7XG5cbi8vIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3VybmVyL3F1aWNrc2VsZWN0XG4vLyBJU0MgbGljZW5zZSwgQ29weXJpZ2h0IDIwMTggVmxhZGltaXIgQWdhZm9ua2luLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyYXksIGssIGxlZnQgPSAwLCByaWdodCA9IEluZmluaXR5LCBjb21wYXJlKSB7XG4gIGsgPSBNYXRoLmZsb29yKGspO1xuICBsZWZ0ID0gTWF0aC5mbG9vcihNYXRoLm1heCgwLCBsZWZ0KSk7XG4gIHJpZ2h0ID0gTWF0aC5mbG9vcihNYXRoLm1pbihhcnJheS5sZW5ndGggLSAxLCByaWdodCkpO1xuXG4gIGlmICghKGxlZnQgPD0gayAmJiBrIDw9IHJpZ2h0KSkgcmV0dXJuIGFycmF5O1xuXG4gIGNvbXBhcmUgPSBjb21wYXJlID09PSB1bmRlZmluZWQgPyBhc2NlbmRpbmdEZWZpbmVkIDogY29tcGFyZURlZmluZWQoY29tcGFyZSk7XG5cbiAgd2hpbGUgKHJpZ2h0ID4gbGVmdCkge1xuICAgIGlmIChyaWdodCAtIGxlZnQgPiA2MDApIHtcbiAgICAgIGNvbnN0IG4gPSByaWdodCAtIGxlZnQgKyAxO1xuICAgICAgY29uc3QgbSA9IGsgLSBsZWZ0ICsgMTtcbiAgICAgIGNvbnN0IHogPSBNYXRoLmxvZyhuKTtcbiAgICAgIGNvbnN0IHMgPSAwLjUgKiBNYXRoLmV4cCgyICogeiAvIDMpO1xuICAgICAgY29uc3Qgc2QgPSAwLjUgKiBNYXRoLnNxcnQoeiAqIHMgKiAobiAtIHMpIC8gbikgKiAobSAtIG4gLyAyIDwgMCA/IC0xIDogMSk7XG4gICAgICBjb25zdCBuZXdMZWZ0ID0gTWF0aC5tYXgobGVmdCwgTWF0aC5mbG9vcihrIC0gbSAqIHMgLyBuICsgc2QpKTtcbiAgICAgIGNvbnN0IG5ld1JpZ2h0ID0gTWF0aC5taW4ocmlnaHQsIE1hdGguZmxvb3IoayArIChuIC0gbSkgKiBzIC8gbiArIHNkKSk7XG4gICAgICBxdWlja3NlbGVjdChhcnJheSwgaywgbmV3TGVmdCwgbmV3UmlnaHQsIGNvbXBhcmUpO1xuICAgIH1cblxuICAgIGNvbnN0IHQgPSBhcnJheVtrXTtcbiAgICBsZXQgaSA9IGxlZnQ7XG4gICAgbGV0IGogPSByaWdodDtcblxuICAgIHN3YXAoYXJyYXksIGxlZnQsIGspO1xuICAgIGlmIChjb21wYXJlKGFycmF5W3JpZ2h0XSwgdCkgPiAwKSBzd2FwKGFycmF5LCBsZWZ0LCByaWdodCk7XG5cbiAgICB3aGlsZSAoaSA8IGopIHtcbiAgICAgIHN3YXAoYXJyYXksIGksIGopLCArK2ksIC0tajtcbiAgICAgIHdoaWxlIChjb21wYXJlKGFycmF5W2ldLCB0KSA8IDApICsraTtcbiAgICAgIHdoaWxlIChjb21wYXJlKGFycmF5W2pdLCB0KSA+IDApIC0tajtcbiAgICB9XG5cbiAgICBpZiAoY29tcGFyZShhcnJheVtsZWZ0XSwgdCkgPT09IDApIHN3YXAoYXJyYXksIGxlZnQsIGopO1xuICAgIGVsc2UgKytqLCBzd2FwKGFycmF5LCBqLCByaWdodCk7XG5cbiAgICBpZiAoaiA8PSBrKSBsZWZ0ID0gaiArIDE7XG4gICAgaWYgKGsgPD0gaikgcmlnaHQgPSBqIC0gMTtcbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn1cblxuZnVuY3Rpb24gc3dhcChhcnJheSwgaSwgaikge1xuICBjb25zdCB0ID0gYXJyYXlbaV07XG4gIGFycmF5W2ldID0gYXJyYXlbal07XG4gIGFycmF5W2pdID0gdDtcbn1cbiIsImltcG9ydCBtYXggZnJvbSBcIi4vbWF4LmpzXCI7XG5pbXBvcnQgbWF4SW5kZXggZnJvbSBcIi4vbWF4SW5kZXguanNcIjtcbmltcG9ydCBtaW4gZnJvbSBcIi4vbWluLmpzXCI7XG5pbXBvcnQgbWluSW5kZXggZnJvbSBcIi4vbWluSW5kZXguanNcIjtcbmltcG9ydCBxdWlja3NlbGVjdCBmcm9tIFwiLi9xdWlja3NlbGVjdC5qc1wiO1xuaW1wb3J0IG51bWJlciwge251bWJlcnN9IGZyb20gXCIuL251bWJlci5qc1wiO1xuaW1wb3J0IHthc2NlbmRpbmdEZWZpbmVkfSBmcm9tIFwiLi9zb3J0LmpzXCI7XG5pbXBvcnQgZ3JlYXRlc3QgZnJvbSBcIi4vZ3JlYXRlc3QuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcXVhbnRpbGUodmFsdWVzLCBwLCB2YWx1ZW9mKSB7XG4gIHZhbHVlcyA9IEZsb2F0NjRBcnJheS5mcm9tKG51bWJlcnModmFsdWVzLCB2YWx1ZW9mKSk7XG4gIGlmICghKG4gPSB2YWx1ZXMubGVuZ3RoKSB8fCBpc05hTihwID0gK3ApKSByZXR1cm47XG4gIGlmIChwIDw9IDAgfHwgbiA8IDIpIHJldHVybiBtaW4odmFsdWVzKTtcbiAgaWYgKHAgPj0gMSkgcmV0dXJuIG1heCh2YWx1ZXMpO1xuICB2YXIgbixcbiAgICAgIGkgPSAobiAtIDEpICogcCxcbiAgICAgIGkwID0gTWF0aC5mbG9vcihpKSxcbiAgICAgIHZhbHVlMCA9IG1heChxdWlja3NlbGVjdCh2YWx1ZXMsIGkwKS5zdWJhcnJheSgwLCBpMCArIDEpKSxcbiAgICAgIHZhbHVlMSA9IG1pbih2YWx1ZXMuc3ViYXJyYXkoaTAgKyAxKSk7XG4gIHJldHVybiB2YWx1ZTAgKyAodmFsdWUxIC0gdmFsdWUwKSAqIChpIC0gaTApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpbGVTb3J0ZWQodmFsdWVzLCBwLCB2YWx1ZW9mID0gbnVtYmVyKSB7XG4gIGlmICghKG4gPSB2YWx1ZXMubGVuZ3RoKSB8fCBpc05hTihwID0gK3ApKSByZXR1cm47XG4gIGlmIChwIDw9IDAgfHwgbiA8IDIpIHJldHVybiArdmFsdWVvZih2YWx1ZXNbMF0sIDAsIHZhbHVlcyk7XG4gIGlmIChwID49IDEpIHJldHVybiArdmFsdWVvZih2YWx1ZXNbbiAtIDFdLCBuIC0gMSwgdmFsdWVzKTtcbiAgdmFyIG4sXG4gICAgICBpID0gKG4gLSAxKSAqIHAsXG4gICAgICBpMCA9IE1hdGguZmxvb3IoaSksXG4gICAgICB2YWx1ZTAgPSArdmFsdWVvZih2YWx1ZXNbaTBdLCBpMCwgdmFsdWVzKSxcbiAgICAgIHZhbHVlMSA9ICt2YWx1ZW9mKHZhbHVlc1tpMCArIDFdLCBpMCArIDEsIHZhbHVlcyk7XG4gIHJldHVybiB2YWx1ZTAgKyAodmFsdWUxIC0gdmFsdWUwKSAqIChpIC0gaTApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpbGVJbmRleCh2YWx1ZXMsIHAsIHZhbHVlb2YgPSBudW1iZXIpIHtcbiAgaWYgKGlzTmFOKHAgPSArcCkpIHJldHVybjtcbiAgbnVtYmVycyA9IEZsb2F0NjRBcnJheS5mcm9tKHZhbHVlcywgKF8sIGkpID0+IG51bWJlcih2YWx1ZW9mKHZhbHVlc1tpXSwgaSwgdmFsdWVzKSkpO1xuICBpZiAocCA8PSAwKSByZXR1cm4gbWluSW5kZXgobnVtYmVycyk7XG4gIGlmIChwID49IDEpIHJldHVybiBtYXhJbmRleChudW1iZXJzKTtcbiAgdmFyIG51bWJlcnMsXG4gICAgICBpbmRleCA9IFVpbnQzMkFycmF5LmZyb20odmFsdWVzLCAoXywgaSkgPT4gaSksXG4gICAgICBqID0gbnVtYmVycy5sZW5ndGggLSAxLFxuICAgICAgaSA9IE1hdGguZmxvb3IoaiAqIHApO1xuICBxdWlja3NlbGVjdChpbmRleCwgaSwgMCwgaiwgKGksIGopID0+IGFzY2VuZGluZ0RlZmluZWQobnVtYmVyc1tpXSwgbnVtYmVyc1tqXSkpO1xuICBpID0gZ3JlYXRlc3QoaW5kZXguc3ViYXJyYXkoMCwgaSArIDEpLCAoaSkgPT4gbnVtYmVyc1tpXSk7XG4gIHJldHVybiBpID49IDAgPyBpIDogLTE7XG59XG4iLCJpbXBvcnQgcXVhbnRpbGUsIHtxdWFudGlsZUluZGV4fSBmcm9tIFwiLi9xdWFudGlsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZWRpYW4odmFsdWVzLCB2YWx1ZW9mKSB7XG4gIHJldHVybiBxdWFudGlsZSh2YWx1ZXMsIDAuNSwgdmFsdWVvZik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZWRpYW5JbmRleCh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgcmV0dXJuIHF1YW50aWxlSW5kZXgodmFsdWVzLCAwLjUsIHZhbHVlb2YpO1xufVxuIiwidmFyIG5vb3AgPSB7dmFsdWU6ICgpID0+IHt9fTtcblxuZnVuY3Rpb24gZGlzcGF0Y2goKSB7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gYXJndW1lbnRzLmxlbmd0aCwgXyA9IHt9LCB0OyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKCEodCA9IGFyZ3VtZW50c1tpXSArIFwiXCIpIHx8ICh0IGluIF8pIHx8IC9bXFxzLl0vLnRlc3QodCkpIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgdHlwZTogXCIgKyB0KTtcbiAgICBfW3RdID0gW107XG4gIH1cbiAgcmV0dXJuIG5ldyBEaXNwYXRjaChfKTtcbn1cblxuZnVuY3Rpb24gRGlzcGF0Y2goXykge1xuICB0aGlzLl8gPSBfO1xufVxuXG5mdW5jdGlvbiBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZXMsIHR5cGVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICBpZiAodCAmJiAhdHlwZXMuaGFzT3duUHJvcGVydHkodCkpIHRocm93IG5ldyBFcnJvcihcInVua25vd24gdHlwZTogXCIgKyB0KTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuRGlzcGF0Y2gucHJvdG90eXBlID0gZGlzcGF0Y2gucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogRGlzcGF0Y2gsXG4gIG9uOiBmdW5jdGlvbih0eXBlbmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgXyA9IHRoaXMuXyxcbiAgICAgICAgVCA9IHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lICsgXCJcIiwgXyksXG4gICAgICAgIHQsXG4gICAgICAgIGkgPSAtMSxcbiAgICAgICAgbiA9IFQubGVuZ3RoO1xuXG4gICAgLy8gSWYgbm8gY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSBjYWxsYmFjayBvZiB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoKHQgPSAodHlwZW5hbWUgPSBUW2ldKS50eXBlKSAmJiAodCA9IGdldChfW3RdLCB0eXBlbmFtZS5uYW1lKSkpIHJldHVybiB0O1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIGEgdHlwZSB3YXMgc3BlY2lmaWVkLCBzZXQgdGhlIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS5cbiAgICAvLyBPdGhlcndpc2UsIGlmIGEgbnVsbCBjYWxsYmFjayB3YXMgc3BlY2lmaWVkLCByZW1vdmUgY2FsbGJhY2tzIG9mIHRoZSBnaXZlbiBuYW1lLlxuICAgIGlmIChjYWxsYmFjayAhPSBudWxsICYmIHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGNhbGxiYWNrOiBcIiArIGNhbGxiYWNrKTtcbiAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgaWYgKHQgPSAodHlwZW5hbWUgPSBUW2ldKS50eXBlKSBfW3RdID0gc2V0KF9bdF0sIHR5cGVuYW1lLm5hbWUsIGNhbGxiYWNrKTtcbiAgICAgIGVsc2UgaWYgKGNhbGxiYWNrID09IG51bGwpIGZvciAodCBpbiBfKSBfW3RdID0gc2V0KF9bdF0sIHR5cGVuYW1lLm5hbWUsIG51bGwpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuICBjb3B5OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29weSA9IHt9LCBfID0gdGhpcy5fO1xuICAgIGZvciAodmFyIHQgaW4gXykgY29weVt0XSA9IF9bdF0uc2xpY2UoKTtcbiAgICByZXR1cm4gbmV3IERpc3BhdGNoKGNvcHkpO1xuICB9LFxuICBjYWxsOiBmdW5jdGlvbih0eXBlLCB0aGF0KSB7XG4gICAgaWYgKChuID0gYXJndW1lbnRzLmxlbmd0aCAtIDIpID4gMCkgZm9yICh2YXIgYXJncyA9IG5ldyBBcnJheShuKSwgaSA9IDAsIG4sIHQ7IGkgPCBuOyArK2kpIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgZm9yICh0ID0gdGhpcy5fW3R5cGVdLCBpID0gMCwgbiA9IHQubGVuZ3RoOyBpIDwgbjsgKytpKSB0W2ldLnZhbHVlLmFwcGx5KHRoYXQsIGFyZ3MpO1xuICB9LFxuICBhcHBseTogZnVuY3Rpb24odHlwZSwgdGhhdCwgYXJncykge1xuICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgZm9yICh2YXIgdCA9IHRoaXMuX1t0eXBlXSwgaSA9IDAsIG4gPSB0Lmxlbmd0aDsgaSA8IG47ICsraSkgdFtpXS52YWx1ZS5hcHBseSh0aGF0LCBhcmdzKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0KHR5cGUsIG5hbWUpIHtcbiAgZm9yICh2YXIgaSA9IDAsIG4gPSB0eXBlLmxlbmd0aCwgYzsgaSA8IG47ICsraSkge1xuICAgIGlmICgoYyA9IHR5cGVbaV0pLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgIHJldHVybiBjLnZhbHVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXQodHlwZSwgbmFtZSwgY2FsbGJhY2spIHtcbiAgZm9yICh2YXIgaSA9IDAsIG4gPSB0eXBlLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgIGlmICh0eXBlW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgIHR5cGVbaV0gPSBub29wLCB0eXBlID0gdHlwZS5zbGljZSgwLCBpKS5jb25jYXQodHlwZS5zbGljZShpICsgMSkpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmIChjYWxsYmFjayAhPSBudWxsKSB0eXBlLnB1c2goe25hbWU6IG5hbWUsIHZhbHVlOiBjYWxsYmFja30pO1xuICByZXR1cm4gdHlwZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZGlzcGF0Y2g7XG4iLCJleHBvcnQgdmFyIHhodG1sID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc3ZnOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gIHhodG1sOiB4aHRtbCxcbiAgeGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICB4bWw6IFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCIsXG4gIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCJcbn07XG4iLCJpbXBvcnQgbmFtZXNwYWNlcyBmcm9tIFwiLi9uYW1lc3BhY2VzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIHByZWZpeCA9IG5hbWUgKz0gXCJcIiwgaSA9IHByZWZpeC5pbmRleE9mKFwiOlwiKTtcbiAgaWYgKGkgPj0gMCAmJiAocHJlZml4ID0gbmFtZS5zbGljZSgwLCBpKSkgIT09IFwieG1sbnNcIikgbmFtZSA9IG5hbWUuc2xpY2UoaSArIDEpO1xuICByZXR1cm4gbmFtZXNwYWNlcy5oYXNPd25Qcm9wZXJ0eShwcmVmaXgpID8ge3NwYWNlOiBuYW1lc3BhY2VzW3ByZWZpeF0sIGxvY2FsOiBuYW1lfSA6IG5hbWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG59XG4iLCJpbXBvcnQgbmFtZXNwYWNlIGZyb20gXCIuL25hbWVzcGFjZS5qc1wiO1xuaW1wb3J0IHt4aHRtbH0gZnJvbSBcIi4vbmFtZXNwYWNlcy5qc1wiO1xuXG5mdW5jdGlvbiBjcmVhdG9ySW5oZXJpdChuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZG9jdW1lbnQgPSB0aGlzLm93bmVyRG9jdW1lbnQsXG4gICAgICAgIHVyaSA9IHRoaXMubmFtZXNwYWNlVVJJO1xuICAgIHJldHVybiB1cmkgPT09IHhodG1sICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5uYW1lc3BhY2VVUkkgPT09IHhodG1sXG4gICAgICAgID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKVxuICAgICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh1cmksIG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdG9yRml4ZWQoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpO1xuICByZXR1cm4gKGZ1bGxuYW1lLmxvY2FsXG4gICAgICA/IGNyZWF0b3JGaXhlZFxuICAgICAgOiBjcmVhdG9ySW5oZXJpdCkoZnVsbG5hbWUpO1xufVxuIiwiZnVuY3Rpb24gbm9uZSgpIHt9XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gbm9uZSA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9O1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2VsZWN0b3IgZnJvbSBcIi4uL3NlbGVjdG9yLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICBpZiAodHlwZW9mIHNlbGVjdCAhPT0gXCJmdW5jdGlvblwiKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKHN1Ym5vZGUgPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpKSB7XG4gICAgICAgIGlmIChcIl9fZGF0YV9fXCIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICAgIHN1Ymdyb3VwW2ldID0gc3Vibm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiLy8gR2l2ZW4gc29tZXRoaW5nIGFycmF5IGxpa2UgKG9yIG51bGwpLCByZXR1cm5zIHNvbWV0aGluZyB0aGF0IGlzIHN0cmljdGx5IGFuXG4vLyBhcnJheS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IGFycmF5LWxpa2Ugb2JqZWN0cyBwYXNzZWQgdG8gZDMuc2VsZWN0QWxsXG4vLyBvciBzZWxlY3Rpb24uc2VsZWN0QWxsIGFyZSBjb252ZXJ0ZWQgaW50byBwcm9wZXIgYXJyYXlzIHdoZW4gY3JlYXRpbmcgYVxuLy8gc2VsZWN0aW9uOyB3ZSBkb27igJl0IGV2ZXIgd2FudCB0byBjcmVhdGUgYSBzZWxlY3Rpb24gYmFja2VkIGJ5IGEgbGl2ZVxuLy8gSFRNTENvbGxlY3Rpb24gb3IgTm9kZUxpc3QuIEhvd2V2ZXIsIG5vdGUgdGhhdCBzZWxlY3Rpb24uc2VsZWN0QWxsIHdpbGwgdXNlIGFcbi8vIHN0YXRpYyBOb2RlTGlzdCBhcyBhIGdyb3VwLCBzaW5jZSBpdCBzYWZlbHkgZGVyaXZlZCBmcm9tIHF1ZXJ5U2VsZWN0b3JBbGwuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhcnJheSh4KSB7XG4gIHJldHVybiB4ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoeCkgPyB4IDogQXJyYXkuZnJvbSh4KTtcbn1cbiIsImZ1bmN0aW9uIGVtcHR5KCkge1xuICByZXR1cm4gW107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gZW1wdHkgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IGFycmF5IGZyb20gXCIuLi9hcnJheS5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yQWxsIGZyb20gXCIuLi9zZWxlY3RvckFsbC5qc1wiO1xuXG5mdW5jdGlvbiBhcnJheUFsbChzZWxlY3QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBhcnJheShzZWxlY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICBpZiAodHlwZW9mIHNlbGVjdCA9PT0gXCJmdW5jdGlvblwiKSBzZWxlY3QgPSBhcnJheUFsbChzZWxlY3QpO1xuICBlbHNlIHNlbGVjdCA9IHNlbGVjdG9yQWxsKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKTtcbiAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgcGFyZW50cyk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubWF0Y2hlcyhzZWxlY3Rvcik7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZE1hdGNoZXIoc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5tYXRjaGVzKHNlbGVjdG9yKTtcbiAgfTtcbn1cblxuIiwiaW1wb3J0IHtjaGlsZE1hdGNoZXJ9IGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbnZhciBmaW5kID0gQXJyYXkucHJvdG90eXBlLmZpbmQ7XG5cbmZ1bmN0aW9uIGNoaWxkRmluZChtYXRjaCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZpbmQuY2FsbCh0aGlzLmNoaWxkcmVuLCBtYXRjaCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNoaWxkRmlyc3QoKSB7XG4gIHJldHVybiB0aGlzLmZpcnN0RWxlbWVudENoaWxkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICByZXR1cm4gdGhpcy5zZWxlY3QobWF0Y2ggPT0gbnVsbCA/IGNoaWxkRmlyc3RcbiAgICAgIDogY2hpbGRGaW5kKHR5cGVvZiBtYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7XG59XG4iLCJpbXBvcnQge2NoaWxkTWF0Y2hlcn0gZnJvbSBcIi4uL21hdGNoZXIuanNcIjtcblxudmFyIGZpbHRlciA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXI7XG5cbmZ1bmN0aW9uIGNoaWxkcmVuKCkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuKTtcbn1cblxuZnVuY3Rpb24gY2hpbGRyZW5GaWx0ZXIobWF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmaWx0ZXIuY2FsbCh0aGlzLmNoaWxkcmVuLCBtYXRjaCk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdEFsbChtYXRjaCA9PSBudWxsID8gY2hpbGRyZW5cbiAgICAgIDogY2hpbGRyZW5GaWx0ZXIodHlwZW9mIG1hdGNoID09PSBcImZ1bmN0aW9uXCIgPyBtYXRjaCA6IGNoaWxkTWF0Y2hlcihtYXRjaCkpKTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IG1hdGNoZXIgZnJvbSBcIi4uL21hdGNoZXIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gXCJmdW5jdGlvblwiKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBtYXRjaC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkge1xuICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih1cGRhdGUpIHtcbiAgcmV0dXJuIG5ldyBBcnJheSh1cGRhdGUubGVuZ3RoKTtcbn1cbiIsImltcG9ydCBzcGFyc2UgZnJvbSBcIi4vc3BhcnNlLmpzXCI7XG5pbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHRoaXMuX2VudGVyIHx8IHRoaXMuX2dyb3Vwcy5tYXAoc3BhcnNlKSwgdGhpcy5fcGFyZW50cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBFbnRlck5vZGUocGFyZW50LCBkYXR1bSkge1xuICB0aGlzLm93bmVyRG9jdW1lbnQgPSBwYXJlbnQub3duZXJEb2N1bWVudDtcbiAgdGhpcy5uYW1lc3BhY2VVUkkgPSBwYXJlbnQubmFtZXNwYWNlVVJJO1xuICB0aGlzLl9uZXh0ID0gbnVsbDtcbiAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICB0aGlzLl9fZGF0YV9fID0gZGF0dW07XG59XG5cbkVudGVyTm9kZS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBFbnRlck5vZGUsXG4gIGFwcGVuZENoaWxkOiBmdW5jdGlvbihjaGlsZCkgeyByZXR1cm4gdGhpcy5fcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgdGhpcy5fbmV4dCk7IH0sXG4gIGluc2VydEJlZm9yZTogZnVuY3Rpb24oY2hpbGQsIG5leHQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIG5leHQpOyB9LFxuICBxdWVyeVNlbGVjdG9yOiBmdW5jdGlvbihzZWxlY3RvcikgeyByZXR1cm4gdGhpcy5fcGFyZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOyB9LFxuICBxdWVyeVNlbGVjdG9yQWxsOiBmdW5jdGlvbihzZWxlY3RvcikgeyByZXR1cm4gdGhpcy5fcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOyB9XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHg7XG4gIH07XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCB7RW50ZXJOb2RlfSBmcm9tIFwiLi9lbnRlci5qc1wiO1xuaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuLi9jb25zdGFudC5qc1wiO1xuXG5mdW5jdGlvbiBiaW5kSW5kZXgocGFyZW50LCBncm91cCwgZW50ZXIsIHVwZGF0ZSwgZXhpdCwgZGF0YSkge1xuICB2YXIgaSA9IDAsXG4gICAgICBub2RlLFxuICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsXG4gICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG5cbiAgLy8gUHV0IGFueSBub24tbnVsbCBub2RlcyB0aGF0IGZpdCBpbnRvIHVwZGF0ZS5cbiAgLy8gUHV0IGFueSBudWxsIG5vZGVzIGludG8gZW50ZXIuXG4gIC8vIFB1dCBhbnkgcmVtYWluaW5nIGRhdGEgaW50byBlbnRlci5cbiAgZm9yICg7IGkgPCBkYXRhTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBub2RlLl9fZGF0YV9fID0gZGF0YVtpXTtcbiAgICAgIHVwZGF0ZVtpXSA9IG5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyW2ldID0gbmV3IEVudGVyTm9kZShwYXJlbnQsIGRhdGFbaV0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBkb27igJl0IGZpdCBpbnRvIGV4aXQuXG4gIGZvciAoOyBpIDwgZ3JvdXBMZW5ndGg7ICsraSkge1xuICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBiaW5kS2V5KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEsIGtleSkge1xuICB2YXIgaSxcbiAgICAgIG5vZGUsXG4gICAgICBub2RlQnlLZXlWYWx1ZSA9IG5ldyBNYXAsXG4gICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aCxcbiAgICAgIGtleVZhbHVlcyA9IG5ldyBBcnJheShncm91cExlbmd0aCksXG4gICAgICBrZXlWYWx1ZTtcblxuICAvLyBDb21wdXRlIHRoZSBrZXkgZm9yIGVhY2ggbm9kZS5cbiAgLy8gSWYgbXVsdGlwbGUgbm9kZXMgaGF2ZSB0aGUgc2FtZSBrZXksIHRoZSBkdXBsaWNhdGVzIGFyZSBhZGRlZCB0byBleGl0LlxuICBmb3IgKGkgPSAwOyBpIDwgZ3JvdXBMZW5ndGg7ICsraSkge1xuICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgIGtleVZhbHVlc1tpXSA9IGtleVZhbHVlID0ga2V5LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApICsgXCJcIjtcbiAgICAgIGlmIChub2RlQnlLZXlWYWx1ZS5oYXMoa2V5VmFsdWUpKSB7XG4gICAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZUJ5S2V5VmFsdWUuc2V0KGtleVZhbHVlLCBub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBrZXkgZm9yIGVhY2ggZGF0dW0uXG4gIC8vIElmIHRoZXJlIGEgbm9kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBrZXksIGpvaW4gYW5kIGFkZCBpdCB0byB1cGRhdGUuXG4gIC8vIElmIHRoZXJlIGlzIG5vdCAob3IgdGhlIGtleSBpcyBhIGR1cGxpY2F0ZSksIGFkZCBpdCB0byBlbnRlci5cbiAgZm9yIChpID0gMDsgaSA8IGRhdGFMZW5ndGg7ICsraSkge1xuICAgIGtleVZhbHVlID0ga2V5LmNhbGwocGFyZW50LCBkYXRhW2ldLCBpLCBkYXRhKSArIFwiXCI7XG4gICAgaWYgKG5vZGUgPSBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWUpKSB7XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICBub2RlQnlLZXlWYWx1ZS5kZWxldGUoa2V5VmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZXNbaV0pID09PSBub2RlKSkge1xuICAgICAgZXhpdFtpXSA9IG5vZGU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRhdHVtKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUuX19kYXRhX187XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLCBkYXR1bSk7XG5cbiAgdmFyIGJpbmQgPSBrZXkgPyBiaW5kS2V5IDogYmluZEluZGV4LFxuICAgICAgcGFyZW50cyA9IHRoaXMuX3BhcmVudHMsXG4gICAgICBncm91cHMgPSB0aGlzLl9ncm91cHM7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB2YWx1ZSA9IGNvbnN0YW50KHZhbHVlKTtcblxuICBmb3IgKHZhciBtID0gZ3JvdXBzLmxlbmd0aCwgdXBkYXRlID0gbmV3IEFycmF5KG0pLCBlbnRlciA9IG5ldyBBcnJheShtKSwgZXhpdCA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICB2YXIgcGFyZW50ID0gcGFyZW50c1tqXSxcbiAgICAgICAgZ3JvdXAgPSBncm91cHNbal0sXG4gICAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgICBkYXRhID0gYXJyYXlsaWtlKHZhbHVlLmNhbGwocGFyZW50LCBwYXJlbnQgJiYgcGFyZW50Ll9fZGF0YV9fLCBqLCBwYXJlbnRzKSksXG4gICAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aCxcbiAgICAgICAgZW50ZXJHcm91cCA9IGVudGVyW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLFxuICAgICAgICB1cGRhdGVHcm91cCA9IHVwZGF0ZVtqXSA9IG5ldyBBcnJheShkYXRhTGVuZ3RoKSxcbiAgICAgICAgZXhpdEdyb3VwID0gZXhpdFtqXSA9IG5ldyBBcnJheShncm91cExlbmd0aCk7XG5cbiAgICBiaW5kKHBhcmVudCwgZ3JvdXAsIGVudGVyR3JvdXAsIHVwZGF0ZUdyb3VwLCBleGl0R3JvdXAsIGRhdGEsIGtleSk7XG5cbiAgICAvLyBOb3cgY29ubmVjdCB0aGUgZW50ZXIgbm9kZXMgdG8gdGhlaXIgZm9sbG93aW5nIHVwZGF0ZSBub2RlLCBzdWNoIHRoYXRcbiAgICAvLyBhcHBlbmRDaGlsZCBjYW4gaW5zZXJ0IHRoZSBtYXRlcmlhbGl6ZWQgZW50ZXIgbm9kZSBiZWZvcmUgdGhpcyBub2RlLFxuICAgIC8vIHJhdGhlciB0aGFuIGF0IHRoZSBlbmQgb2YgdGhlIHBhcmVudCBub2RlLlxuICAgIGZvciAodmFyIGkwID0gMCwgaTEgPSAwLCBwcmV2aW91cywgbmV4dDsgaTAgPCBkYXRhTGVuZ3RoOyArK2kwKSB7XG4gICAgICBpZiAocHJldmlvdXMgPSBlbnRlckdyb3VwW2kwXSkge1xuICAgICAgICBpZiAoaTAgPj0gaTEpIGkxID0gaTAgKyAxO1xuICAgICAgICB3aGlsZSAoIShuZXh0ID0gdXBkYXRlR3JvdXBbaTFdKSAmJiArK2kxIDwgZGF0YUxlbmd0aCk7XG4gICAgICAgIHByZXZpb3VzLl9uZXh0ID0gbmV4dCB8fCBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSA9IG5ldyBTZWxlY3Rpb24odXBkYXRlLCBwYXJlbnRzKTtcbiAgdXBkYXRlLl9lbnRlciA9IGVudGVyO1xuICB1cGRhdGUuX2V4aXQgPSBleGl0O1xuICByZXR1cm4gdXBkYXRlO1xufVxuXG4vLyBHaXZlbiBzb21lIGRhdGEsIHRoaXMgcmV0dXJucyBhbiBhcnJheS1saWtlIHZpZXcgb2YgaXQ6IGFuIG9iamVjdCB0aGF0XG4vLyBleHBvc2VzIGEgbGVuZ3RoIHByb3BlcnR5IGFuZCBhbGxvd3MgbnVtZXJpYyBpbmRleGluZy4gTm90ZSB0aGF0IHVubGlrZVxuLy8gc2VsZWN0QWxsLCB0aGlzIGlzbuKAmXQgd29ycmllZCBhYm91dCDigJxsaXZl4oCdIGNvbGxlY3Rpb25zIGJlY2F1c2UgdGhlIHJlc3VsdGluZ1xuLy8gYXJyYXkgd2lsbCBvbmx5IGJlIHVzZWQgYnJpZWZseSB3aGlsZSBkYXRhIGlzIGJlaW5nIGJvdW5kLiAoSXQgaXMgcG9zc2libGUgdG9cbi8vIGNhdXNlIHRoZSBkYXRhIHRvIGNoYW5nZSB3aGlsZSBpdGVyYXRpbmcgYnkgdXNpbmcgYSBrZXkgZnVuY3Rpb24sIGJ1dCBwbGVhc2Vcbi8vIGRvbuKAmXQ7IHdl4oCZZCByYXRoZXIgYXZvaWQgYSBncmF0dWl0b3VzIGNvcHkuKVxuZnVuY3Rpb24gYXJyYXlsaWtlKGRhdGEpIHtcbiAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIFwibGVuZ3RoXCIgaW4gZGF0YVxuICAgID8gZGF0YSAvLyBBcnJheSwgVHlwZWRBcnJheSwgTm9kZUxpc3QsIGFycmF5LWxpa2VcbiAgICA6IEFycmF5LmZyb20oZGF0YSk7IC8vIE1hcCwgU2V0LCBpdGVyYWJsZSwgc3RyaW5nLCBvciBhbnl0aGluZyBlbHNlXG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZS5qc1wiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9leGl0IHx8IHRoaXMuX2dyb3Vwcy5tYXAoc3BhcnNlKSwgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvbmVudGVyLCBvbnVwZGF0ZSwgb25leGl0KSB7XG4gIHZhciBlbnRlciA9IHRoaXMuZW50ZXIoKSwgdXBkYXRlID0gdGhpcywgZXhpdCA9IHRoaXMuZXhpdCgpO1xuICBpZiAodHlwZW9mIG9uZW50ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGVudGVyID0gb25lbnRlcihlbnRlcik7XG4gICAgaWYgKGVudGVyKSBlbnRlciA9IGVudGVyLnNlbGVjdGlvbigpO1xuICB9IGVsc2Uge1xuICAgIGVudGVyID0gZW50ZXIuYXBwZW5kKG9uZW50ZXIgKyBcIlwiKTtcbiAgfVxuICBpZiAob251cGRhdGUgIT0gbnVsbCkge1xuICAgIHVwZGF0ZSA9IG9udXBkYXRlKHVwZGF0ZSk7XG4gICAgaWYgKHVwZGF0ZSkgdXBkYXRlID0gdXBkYXRlLnNlbGVjdGlvbigpO1xuICB9XG4gIGlmIChvbmV4aXQgPT0gbnVsbCkgZXhpdC5yZW1vdmUoKTsgZWxzZSBvbmV4aXQoZXhpdCk7XG4gIHJldHVybiBlbnRlciAmJiB1cGRhdGUgPyBlbnRlci5tZXJnZSh1cGRhdGUpLm9yZGVyKCkgOiB1cGRhdGU7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29udGV4dCkge1xuICB2YXIgc2VsZWN0aW9uID0gY29udGV4dC5zZWxlY3Rpb24gPyBjb250ZXh0LnNlbGVjdGlvbigpIDogY29udGV4dDtcblxuICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gc2VsZWN0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwMCA9IGdyb3VwczBbal0sIGdyb3VwMSA9IGdyb3VwczFbal0sIG4gPSBncm91cDAubGVuZ3RoLCBtZXJnZSA9IG1lcmdlc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXAwW2ldIHx8IGdyb3VwMVtpXSkge1xuICAgICAgICBtZXJnZVtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yICg7IGogPCBtMDsgKytqKSB7XG4gICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKG1lcmdlcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAtMSwgbSA9IGdyb3Vwcy5sZW5ndGg7ICsraiA8IG07KSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSBncm91cC5sZW5ndGggLSAxLCBuZXh0ID0gZ3JvdXBbaV0sIG5vZGU7IC0taSA+PSAwOykge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBpZiAobmV4dCAmJiBub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG5leHQpIF4gNCkgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTtcbiAgICAgICAgbmV4dCA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29tcGFyZSkge1xuICBpZiAoIWNvbXBhcmUpIGNvbXBhcmUgPSBhc2NlbmRpbmc7XG5cbiAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJlKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfVxuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHNvcnRncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHNvcnRncm91cCA9IHNvcnRncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHNvcnRncm91cFtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHNvcnRncm91cC5zb3J0KGNvbXBhcmVOb2RlKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7XG59XG5cbmZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbMF07XG4gIGFyZ3VtZW50c1swXSA9IHRoaXM7XG4gIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIHJldHVybiB0aGlzO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKHRoaXMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgIHZhciBub2RlID0gZ3JvdXBbaV07XG4gICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgbGV0IHNpemUgPSAwO1xuICBmb3IgKGNvbnN0IG5vZGUgb2YgdGhpcykgKytzaXplOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHJldHVybiBzaXplO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiAhdGhpcy5ub2RlKCk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjYWxsYmFjaykge1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSBjYWxsYmFjay5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cbiIsImltcG9ydCBuYW1lc3BhY2UgZnJvbSBcIi4uL25hbWVzcGFjZS5qc1wiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHYpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKTtcbiAgICByZXR1cm4gZnVsbG5hbWUubG9jYWxcbiAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbClcbiAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJGdW5jdGlvbk5TIDogYXR0ckZ1bmN0aW9uKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpKShmdWxsbmFtZSwgdmFsdWUpKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUpIHtcbiAgcmV0dXJuIChub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSAvLyBub2RlIGlzIGEgTm9kZVxuICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG4iLCJpbXBvcnQgZGVmYXVsdFZpZXcgZnJvbSBcIi4uL3dpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBzdHlsZVJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUNvbnN0YW50KG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gICAgZWxzZSB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHYsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMVxuICAgICAgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGxcbiAgICAgICAgICAgID8gc3R5bGVSZW1vdmUgOiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBzdHlsZUZ1bmN0aW9uXG4gICAgICAgICAgICA6IHN0eWxlQ29uc3RhbnQpKG5hbWUsIHZhbHVlLCBwcmlvcml0eSA9PSBudWxsID8gXCJcIiA6IHByaW9yaXR5KSlcbiAgICAgIDogc3R5bGVWYWx1ZSh0aGlzLm5vZGUoKSwgbmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHlsZVZhbHVlKG5vZGUsIG5hbWUpIHtcbiAgcmV0dXJuIG5vZGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKVxuICAgICAgfHwgZGVmYXVsdFZpZXcobm9kZSkuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpO1xufVxuIiwiZnVuY3Rpb24gcHJvcGVydHlSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZGVsZXRlIHRoaXNbbmFtZV07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5Q29uc3RhbnQobmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXNbbmFtZV0gPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJvcGVydHlGdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgIGVsc2UgdGhpc1tuYW1lXSA9IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMVxuICAgICAgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IHByb3BlcnR5UmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHByb3BlcnR5RnVuY3Rpb25cbiAgICAgICAgICA6IHByb3BlcnR5Q29uc3RhbnQpKG5hbWUsIHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKClbbmFtZV07XG59XG4iLCJmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7XG4gIHJldHVybiBub2RlLmNsYXNzTGlzdCB8fCBuZXcgQ2xhc3NMaXN0KG5vZGUpO1xufVxuXG5mdW5jdGlvbiBDbGFzc0xpc3Qobm9kZSkge1xuICB0aGlzLl9ub2RlID0gbm9kZTtcbiAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIik7XG59XG5cbkNsYXNzTGlzdC5wcm90b3R5cGUgPSB7XG4gIGFkZDogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA8IDApIHtcbiAgICAgIHRoaXMuX25hbWVzLnB1c2gobmFtZSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSkgPj0gMDtcbiAgfVxufTtcblxuZnVuY3Rpb24gY2xhc3NlZEFkZChub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5hZGQobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkUmVtb3ZlKG5vZGUsIG5hbWVzKSB7XG4gIHZhciBsaXN0ID0gY2xhc3NMaXN0KG5vZGUpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZhbHNlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkUmVtb3ZlKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZ1bmN0aW9uKG5hbWVzLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgKHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgPyBjbGFzc2VkQWRkIDogY2xhc3NlZFJlbW92ZSkodGhpcywgbmFtZXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgbmFtZXMgPSBjbGFzc0FycmF5KG5hbWUgKyBcIlwiKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbikgaWYgKCFsaXN0LmNvbnRhaW5zKG5hbWVzW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWVcbiAgICAgID8gY2xhc3NlZFRydWVcbiAgICAgIDogY2xhc3NlZEZhbHNlKShuYW1lcywgdmFsdWUpKTtcbn1cbiIsImZ1bmN0aW9uIHRleHRSZW1vdmUoKSB7XG4gIHRoaXMudGV4dENvbnRlbnQgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbFxuICAgICAgICAgID8gdGV4dFJlbW92ZSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gdGV4dEZ1bmN0aW9uXG4gICAgICAgICAgOiB0ZXh0Q29uc3RhbnQpKHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59XG4iLCJmdW5jdGlvbiBodG1sUmVtb3ZlKCkge1xuICB0aGlzLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaHRtbEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGh0bWxGdW5jdGlvblxuICAgICAgICAgIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLmlubmVySFRNTDtcbn1cbiIsImZ1bmN0aW9uIHJhaXNlKCkge1xuICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7XG59XG4iLCJmdW5jdGlvbiBsb3dlcigpIHtcbiAgaWYgKHRoaXMucHJldmlvdXNTaWJsaW5nKSB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gobG93ZXIpO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn1cbiIsImltcG9ydCBjcmVhdG9yIGZyb20gXCIuLi9jcmVhdG9yLmpzXCI7XG5pbXBvcnQgc2VsZWN0b3IgZnJvbSBcIi4uL3NlbGVjdG9yLmpzXCI7XG5cbmZ1bmN0aW9uIGNvbnN0YW50TnVsbCgpIHtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIGJlZm9yZSkge1xuICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpLFxuICAgICAgc2VsZWN0ID0gYmVmb3JlID09IG51bGwgPyBjb25zdGFudE51bGwgOiB0eXBlb2YgYmVmb3JlID09PSBcImZ1bmN0aW9uXCIgPyBiZWZvcmUgOiBzZWxlY3RvcihiZWZvcmUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0QmVmb3JlKGNyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBzZWxlY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCBudWxsKTtcbiAgfSk7XG59XG4iLCJmdW5jdGlvbiByZW1vdmUoKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gIGlmIChwYXJlbnQpIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gocmVtb3ZlKTtcbn1cbiIsImZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZVNoYWxsb3coKSB7XG4gIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKGZhbHNlKSwgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICByZXR1cm4gcGFyZW50ID8gcGFyZW50Lmluc2VydEJlZm9yZShjbG9uZSwgdGhpcy5uZXh0U2libGluZykgOiBjbG9uZTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lRGVlcCgpIHtcbiAgdmFyIGNsb25lID0gdGhpcy5jbG9uZU5vZGUodHJ1ZSksIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGRlZXApIHtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KGRlZXAgPyBzZWxlY3Rpb25fY2xvbmVEZWVwIDogc2VsZWN0aW9uX2Nsb25lU2hhbGxvdyk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLnByb3BlcnR5KFwiX19kYXRhX19cIiwgdmFsdWUpXG4gICAgICA6IHRoaXMubm9kZSgpLl9fZGF0YV9fO1xufVxuIiwiZnVuY3Rpb24gY29udGV4dExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIHJldHVybiBmdW5jdGlvbihldmVudCkge1xuICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQsIHRoaXMuX19kYXRhX18pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZXMpIHtcbiAgcmV0dXJuIHR5cGVuYW1lcy50cmltKCkuc3BsaXQoL158XFxzKy8pLm1hcChmdW5jdGlvbih0KSB7XG4gICAgdmFyIG5hbWUgPSBcIlwiLCBpID0gdC5pbmRleE9mKFwiLlwiKTtcbiAgICBpZiAoaSA+PSAwKSBuYW1lID0gdC5zbGljZShpICsgMSksIHQgPSB0LnNsaWNlKDAsIGkpO1xuICAgIHJldHVybiB7dHlwZTogdCwgbmFtZTogbmFtZX07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvblJlbW92ZSh0eXBlbmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uO1xuICAgIGlmICghb24pIHJldHVybjtcbiAgICBmb3IgKHZhciBqID0gMCwgaSA9IC0xLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7XG4gICAgICBpZiAobyA9IG9uW2pdLCAoIXR5cGVuYW1lLnR5cGUgfHwgby50eXBlID09PSB0eXBlbmFtZS50eXBlKSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciwgby5vcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uWysraV0gPSBvO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoKytpKSBvbi5sZW5ndGggPSBpO1xuICAgIGVsc2UgZGVsZXRlIHRoaXMuX19vbjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gb25BZGQodHlwZW5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgb24gPSB0aGlzLl9fb24sIG8sIGxpc3RlbmVyID0gY29udGV4dExpc3RlbmVyKHZhbHVlKTtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgICBpZiAoKG8gPSBvbltqXSkudHlwZSA9PT0gdHlwZW5hbWUudHlwZSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciwgby5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciA9IGxpc3RlbmVyLCBvLm9wdGlvbnMgPSBvcHRpb25zKTtcbiAgICAgICAgby52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlbmFtZS50eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gICAgbyA9IHt0eXBlOiB0eXBlbmFtZS50eXBlLCBuYW1lOiB0eXBlbmFtZS5uYW1lLCB2YWx1ZTogdmFsdWUsIGxpc3RlbmVyOiBsaXN0ZW5lciwgb3B0aW9uczogb3B0aW9uc307XG4gICAgaWYgKCFvbikgdGhpcy5fX29uID0gW29dO1xuICAgIGVsc2Ugb24ucHVzaChvKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odHlwZW5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gIHZhciB0eXBlbmFtZXMgPSBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZSArIFwiXCIpLCBpLCBuID0gdHlwZW5hbWVzLmxlbmd0aCwgdDtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgb24gPSB0aGlzLm5vZGUoKS5fX29uO1xuICAgIGlmIChvbikgZm9yICh2YXIgaiA9IDAsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHtcbiAgICAgIGZvciAoaSA9IDAsIG8gPSBvbltqXTsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoKHQgPSB0eXBlbmFtZXNbaV0pLnR5cGUgPT09IG8udHlwZSAmJiB0Lm5hbWUgPT09IG8ubmFtZSkge1xuICAgICAgICAgIHJldHVybiBvLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIG9uID0gdmFsdWUgPyBvbkFkZCA6IG9uUmVtb3ZlO1xuICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB0aGlzLmVhY2gob24odHlwZW5hbWVzW2ldLCB2YWx1ZSwgb3B0aW9ucykpO1xuICByZXR1cm4gdGhpcztcbn1cbiIsImltcG9ydCBkZWZhdWx0VmlldyBmcm9tIFwiLi4vd2luZG93LmpzXCI7XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQobm9kZSwgdHlwZSwgcGFyYW1zKSB7XG4gIHZhciB3aW5kb3cgPSBkZWZhdWx0Vmlldyhub2RlKSxcbiAgICAgIGV2ZW50ID0gd2luZG93LkN1c3RvbUV2ZW50O1xuXG4gIGlmICh0eXBlb2YgZXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGV2ZW50ID0gbmV3IGV2ZW50KHR5cGUsIHBhcmFtcyk7XG4gIH0gZWxzZSB7XG4gICAgZXZlbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICBpZiAocGFyYW1zKSBldmVudC5pbml0RXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlKSwgZXZlbnQuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgICBlbHNlIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UpO1xuICB9XG5cbiAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hDb25zdGFudCh0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRnVuY3Rpb24odHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gdGhpcy5lYWNoKCh0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZGlzcGF0Y2hGdW5jdGlvblxuICAgICAgOiBkaXNwYXRjaENvbnN0YW50KSh0eXBlLCBwYXJhbXMpKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKigpIHtcbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHlpZWxkIG5vZGU7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgc2VsZWN0aW9uX3NlbGVjdCBmcm9tIFwiLi9zZWxlY3QuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0QWxsIGZyb20gXCIuL3NlbGVjdEFsbC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RDaGlsZCBmcm9tIFwiLi9zZWxlY3RDaGlsZC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RDaGlsZHJlbiBmcm9tIFwiLi9zZWxlY3RDaGlsZHJlbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9maWx0ZXIgZnJvbSBcIi4vZmlsdGVyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2RhdGEgZnJvbSBcIi4vZGF0YS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lbnRlciBmcm9tIFwiLi9lbnRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9leGl0IGZyb20gXCIuL2V4aXQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fam9pbiBmcm9tIFwiLi9qb2luLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX21lcmdlIGZyb20gXCIuL21lcmdlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX29yZGVyIGZyb20gXCIuL29yZGVyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NvcnQgZnJvbSBcIi4vc29ydC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jYWxsIGZyb20gXCIuL2NhbGwuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fbm9kZXMgZnJvbSBcIi4vbm9kZXMuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fbm9kZSBmcm9tIFwiLi9ub2RlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NpemUgZnJvbSBcIi4vc2l6ZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lbXB0eSBmcm9tIFwiLi9lbXB0eS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lYWNoIGZyb20gXCIuL2VhY2guanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fYXR0ciBmcm9tIFwiLi9hdHRyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3N0eWxlIGZyb20gXCIuL3N0eWxlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3Byb3BlcnR5IGZyb20gXCIuL3Byb3BlcnR5LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2NsYXNzZWQgZnJvbSBcIi4vY2xhc3NlZC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl90ZXh0IGZyb20gXCIuL3RleHQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25faHRtbCBmcm9tIFwiLi9odG1sLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3JhaXNlIGZyb20gXCIuL3JhaXNlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2xvd2VyIGZyb20gXCIuL2xvd2VyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2FwcGVuZCBmcm9tIFwiLi9hcHBlbmQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25faW5zZXJ0IGZyb20gXCIuL2luc2VydC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9yZW1vdmUgZnJvbSBcIi4vcmVtb3ZlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2Nsb25lIGZyb20gXCIuL2Nsb25lLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2RhdHVtIGZyb20gXCIuL2RhdHVtLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX29uIGZyb20gXCIuL29uLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2Rpc3BhdGNoIGZyb20gXCIuL2Rpc3BhdGNoLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2l0ZXJhdG9yIGZyb20gXCIuL2l0ZXJhdG9yLmpzXCI7XG5cbmV4cG9ydCB2YXIgcm9vdCA9IFtudWxsXTtcblxuZXhwb3J0IGZ1bmN0aW9uIFNlbGVjdGlvbihncm91cHMsIHBhcmVudHMpIHtcbiAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzO1xuICB0aGlzLl9wYXJlbnRzID0gcGFyZW50cztcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbihbW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudF1dLCByb290KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uX3NlbGVjdGlvbigpIHtcbiAgcmV0dXJuIHRoaXM7XG59XG5cblNlbGVjdGlvbi5wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogU2VsZWN0aW9uLFxuICBzZWxlY3Q6IHNlbGVjdGlvbl9zZWxlY3QsXG4gIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCxcbiAgc2VsZWN0Q2hpbGQ6IHNlbGVjdGlvbl9zZWxlY3RDaGlsZCxcbiAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9zZWxlY3RDaGlsZHJlbixcbiAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLFxuICBkYXRhOiBzZWxlY3Rpb25fZGF0YSxcbiAgZW50ZXI6IHNlbGVjdGlvbl9lbnRlcixcbiAgZXhpdDogc2VsZWN0aW9uX2V4aXQsXG4gIGpvaW46IHNlbGVjdGlvbl9qb2luLFxuICBtZXJnZTogc2VsZWN0aW9uX21lcmdlLFxuICBzZWxlY3Rpb246IHNlbGVjdGlvbl9zZWxlY3Rpb24sXG4gIG9yZGVyOiBzZWxlY3Rpb25fb3JkZXIsXG4gIHNvcnQ6IHNlbGVjdGlvbl9zb3J0LFxuICBjYWxsOiBzZWxlY3Rpb25fY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9ub2RlcyxcbiAgbm9kZTogc2VsZWN0aW9uX25vZGUsXG4gIHNpemU6IHNlbGVjdGlvbl9zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX2VtcHR5LFxuICBlYWNoOiBzZWxlY3Rpb25fZWFjaCxcbiAgYXR0cjogc2VsZWN0aW9uX2F0dHIsXG4gIHN0eWxlOiBzZWxlY3Rpb25fc3R5bGUsXG4gIHByb3BlcnR5OiBzZWxlY3Rpb25fcHJvcGVydHksXG4gIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLFxuICB0ZXh0OiBzZWxlY3Rpb25fdGV4dCxcbiAgaHRtbDogc2VsZWN0aW9uX2h0bWwsXG4gIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsXG4gIGxvd2VyOiBzZWxlY3Rpb25fbG93ZXIsXG4gIGFwcGVuZDogc2VsZWN0aW9uX2FwcGVuZCxcbiAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LFxuICByZW1vdmU6IHNlbGVjdGlvbl9yZW1vdmUsXG4gIGNsb25lOiBzZWxlY3Rpb25fY2xvbmUsXG4gIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sXG4gIG9uOiBzZWxlY3Rpb25fb24sXG4gIGRpc3BhdGNoOiBzZWxlY3Rpb25fZGlzcGF0Y2gsXG4gIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25faXRlcmF0b3Jcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGlvbjtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnN0cnVjdG9yLCBmYWN0b3J5LCBwcm90b3R5cGUpIHtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlID0gZmFjdG9yeS5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gIHByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHBhcmVudCwgZGVmaW5pdGlvbikge1xuICB2YXIgcHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQucHJvdG90eXBlKTtcbiAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldO1xuICByZXR1cm4gcHJvdG90eXBlO1xufVxuIiwiaW1wb3J0IGRlZmluZSwge2V4dGVuZH0gZnJvbSBcIi4vZGVmaW5lLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDb2xvcigpIHt9XG5cbmV4cG9ydCB2YXIgZGFya2VyID0gMC43O1xuZXhwb3J0IHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7XG5cbnZhciByZUkgPSBcIlxcXFxzKihbKy1dP1xcXFxkKylcXFxccypcIixcbiAgICByZU4gPSBcIlxcXFxzKihbKy1dPyg/OlxcXFxkKlxcXFwuKT9cXFxcZCsoPzpbZUVdWystXT9cXFxcZCspPylcXFxccypcIixcbiAgICByZVAgPSBcIlxcXFxzKihbKy1dPyg/OlxcXFxkKlxcXFwuKT9cXFxcZCsoPzpbZUVdWystXT9cXFxcZCspPyklXFxcXHMqXCIsXG4gICAgcmVIZXggPSAvXiMoWzAtOWEtZl17Myw4fSkkLyxcbiAgICByZVJnYkludGVnZXIgPSBuZXcgUmVnRXhwKGBecmdiXFxcXCgke3JlSX0sJHtyZUl9LCR7cmVJfVxcXFwpJGApLFxuICAgIHJlUmdiUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5yZ2JcXFxcKCR7cmVQfSwke3JlUH0sJHtyZVB9XFxcXCkkYCksXG4gICAgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoYF5yZ2JhXFxcXCgke3JlSX0sJHtyZUl9LCR7cmVJfSwke3JlTn1cXFxcKSRgKSxcbiAgICByZVJnYmFQZXJjZW50ID0gbmV3IFJlZ0V4cChgXnJnYmFcXFxcKCR7cmVQfSwke3JlUH0sJHtyZVB9LCR7cmVOfVxcXFwpJGApLFxuICAgIHJlSHNsUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5oc2xcXFxcKCR7cmVOfSwke3JlUH0sJHtyZVB9XFxcXCkkYCksXG4gICAgcmVIc2xhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5oc2xhXFxcXCgke3JlTn0sJHtyZVB9LCR7cmVQfSwke3JlTn1cXFxcKSRgKTtcblxudmFyIG5hbWVkID0ge1xuICBhbGljZWJsdWU6IDB4ZjBmOGZmLFxuICBhbnRpcXVld2hpdGU6IDB4ZmFlYmQ3LFxuICBhcXVhOiAweDAwZmZmZixcbiAgYXF1YW1hcmluZTogMHg3ZmZmZDQsXG4gIGF6dXJlOiAweGYwZmZmZixcbiAgYmVpZ2U6IDB4ZjVmNWRjLFxuICBiaXNxdWU6IDB4ZmZlNGM0LFxuICBibGFjazogMHgwMDAwMDAsXG4gIGJsYW5jaGVkYWxtb25kOiAweGZmZWJjZCxcbiAgYmx1ZTogMHgwMDAwZmYsXG4gIGJsdWV2aW9sZXQ6IDB4OGEyYmUyLFxuICBicm93bjogMHhhNTJhMmEsXG4gIGJ1cmx5d29vZDogMHhkZWI4ODcsXG4gIGNhZGV0Ymx1ZTogMHg1ZjllYTAsXG4gIGNoYXJ0cmV1c2U6IDB4N2ZmZjAwLFxuICBjaG9jb2xhdGU6IDB4ZDI2OTFlLFxuICBjb3JhbDogMHhmZjdmNTAsXG4gIGNvcm5mbG93ZXJibHVlOiAweDY0OTVlZCxcbiAgY29ybnNpbGs6IDB4ZmZmOGRjLFxuICBjcmltc29uOiAweGRjMTQzYyxcbiAgY3lhbjogMHgwMGZmZmYsXG4gIGRhcmtibHVlOiAweDAwMDA4YixcbiAgZGFya2N5YW46IDB4MDA4YjhiLFxuICBkYXJrZ29sZGVucm9kOiAweGI4ODYwYixcbiAgZGFya2dyYXk6IDB4YTlhOWE5LFxuICBkYXJrZ3JlZW46IDB4MDA2NDAwLFxuICBkYXJrZ3JleTogMHhhOWE5YTksXG4gIGRhcmtraGFraTogMHhiZGI3NmIsXG4gIGRhcmttYWdlbnRhOiAweDhiMDA4YixcbiAgZGFya29saXZlZ3JlZW46IDB4NTU2YjJmLFxuICBkYXJrb3JhbmdlOiAweGZmOGMwMCxcbiAgZGFya29yY2hpZDogMHg5OTMyY2MsXG4gIGRhcmtyZWQ6IDB4OGIwMDAwLFxuICBkYXJrc2FsbW9uOiAweGU5OTY3YSxcbiAgZGFya3NlYWdyZWVuOiAweDhmYmM4ZixcbiAgZGFya3NsYXRlYmx1ZTogMHg0ODNkOGIsXG4gIGRhcmtzbGF0ZWdyYXk6IDB4MmY0ZjRmLFxuICBkYXJrc2xhdGVncmV5OiAweDJmNGY0ZixcbiAgZGFya3R1cnF1b2lzZTogMHgwMGNlZDEsXG4gIGRhcmt2aW9sZXQ6IDB4OTQwMGQzLFxuICBkZWVwcGluazogMHhmZjE0OTMsXG4gIGRlZXBza3libHVlOiAweDAwYmZmZixcbiAgZGltZ3JheTogMHg2OTY5NjksXG4gIGRpbWdyZXk6IDB4Njk2OTY5LFxuICBkb2RnZXJibHVlOiAweDFlOTBmZixcbiAgZmlyZWJyaWNrOiAweGIyMjIyMixcbiAgZmxvcmFsd2hpdGU6IDB4ZmZmYWYwLFxuICBmb3Jlc3RncmVlbjogMHgyMjhiMjIsXG4gIGZ1Y2hzaWE6IDB4ZmYwMGZmLFxuICBnYWluc2Jvcm86IDB4ZGNkY2RjLFxuICBnaG9zdHdoaXRlOiAweGY4ZjhmZixcbiAgZ29sZDogMHhmZmQ3MDAsXG4gIGdvbGRlbnJvZDogMHhkYWE1MjAsXG4gIGdyYXk6IDB4ODA4MDgwLFxuICBncmVlbjogMHgwMDgwMDAsXG4gIGdyZWVueWVsbG93OiAweGFkZmYyZixcbiAgZ3JleTogMHg4MDgwODAsXG4gIGhvbmV5ZGV3OiAweGYwZmZmMCxcbiAgaG90cGluazogMHhmZjY5YjQsXG4gIGluZGlhbnJlZDogMHhjZDVjNWMsXG4gIGluZGlnbzogMHg0YjAwODIsXG4gIGl2b3J5OiAweGZmZmZmMCxcbiAga2hha2k6IDB4ZjBlNjhjLFxuICBsYXZlbmRlcjogMHhlNmU2ZmEsXG4gIGxhdmVuZGVyYmx1c2g6IDB4ZmZmMGY1LFxuICBsYXduZ3JlZW46IDB4N2NmYzAwLFxuICBsZW1vbmNoaWZmb246IDB4ZmZmYWNkLFxuICBsaWdodGJsdWU6IDB4YWRkOGU2LFxuICBsaWdodGNvcmFsOiAweGYwODA4MCxcbiAgbGlnaHRjeWFuOiAweGUwZmZmZixcbiAgbGlnaHRnb2xkZW5yb2R5ZWxsb3c6IDB4ZmFmYWQyLFxuICBsaWdodGdyYXk6IDB4ZDNkM2QzLFxuICBsaWdodGdyZWVuOiAweDkwZWU5MCxcbiAgbGlnaHRncmV5OiAweGQzZDNkMyxcbiAgbGlnaHRwaW5rOiAweGZmYjZjMSxcbiAgbGlnaHRzYWxtb246IDB4ZmZhMDdhLFxuICBsaWdodHNlYWdyZWVuOiAweDIwYjJhYSxcbiAgbGlnaHRza3libHVlOiAweDg3Y2VmYSxcbiAgbGlnaHRzbGF0ZWdyYXk6IDB4Nzc4ODk5LFxuICBsaWdodHNsYXRlZ3JleTogMHg3Nzg4OTksXG4gIGxpZ2h0c3RlZWxibHVlOiAweGIwYzRkZSxcbiAgbGlnaHR5ZWxsb3c6IDB4ZmZmZmUwLFxuICBsaW1lOiAweDAwZmYwMCxcbiAgbGltZWdyZWVuOiAweDMyY2QzMixcbiAgbGluZW46IDB4ZmFmMGU2LFxuICBtYWdlbnRhOiAweGZmMDBmZixcbiAgbWFyb29uOiAweDgwMDAwMCxcbiAgbWVkaXVtYXF1YW1hcmluZTogMHg2NmNkYWEsXG4gIG1lZGl1bWJsdWU6IDB4MDAwMGNkLFxuICBtZWRpdW1vcmNoaWQ6IDB4YmE1NWQzLFxuICBtZWRpdW1wdXJwbGU6IDB4OTM3MGRiLFxuICBtZWRpdW1zZWFncmVlbjogMHgzY2IzNzEsXG4gIG1lZGl1bXNsYXRlYmx1ZTogMHg3YjY4ZWUsXG4gIG1lZGl1bXNwcmluZ2dyZWVuOiAweDAwZmE5YSxcbiAgbWVkaXVtdHVycXVvaXNlOiAweDQ4ZDFjYyxcbiAgbWVkaXVtdmlvbGV0cmVkOiAweGM3MTU4NSxcbiAgbWlkbmlnaHRibHVlOiAweDE5MTk3MCxcbiAgbWludGNyZWFtOiAweGY1ZmZmYSxcbiAgbWlzdHlyb3NlOiAweGZmZTRlMSxcbiAgbW9jY2FzaW46IDB4ZmZlNGI1LFxuICBuYXZham93aGl0ZTogMHhmZmRlYWQsXG4gIG5hdnk6IDB4MDAwMDgwLFxuICBvbGRsYWNlOiAweGZkZjVlNixcbiAgb2xpdmU6IDB4ODA4MDAwLFxuICBvbGl2ZWRyYWI6IDB4NmI4ZTIzLFxuICBvcmFuZ2U6IDB4ZmZhNTAwLFxuICBvcmFuZ2VyZWQ6IDB4ZmY0NTAwLFxuICBvcmNoaWQ6IDB4ZGE3MGQ2LFxuICBwYWxlZ29sZGVucm9kOiAweGVlZThhYSxcbiAgcGFsZWdyZWVuOiAweDk4ZmI5OCxcbiAgcGFsZXR1cnF1b2lzZTogMHhhZmVlZWUsXG4gIHBhbGV2aW9sZXRyZWQ6IDB4ZGI3MDkzLFxuICBwYXBheWF3aGlwOiAweGZmZWZkNSxcbiAgcGVhY2hwdWZmOiAweGZmZGFiOSxcbiAgcGVydTogMHhjZDg1M2YsXG4gIHBpbms6IDB4ZmZjMGNiLFxuICBwbHVtOiAweGRkYTBkZCxcbiAgcG93ZGVyYmx1ZTogMHhiMGUwZTYsXG4gIHB1cnBsZTogMHg4MDAwODAsXG4gIHJlYmVjY2FwdXJwbGU6IDB4NjYzMzk5LFxuICByZWQ6IDB4ZmYwMDAwLFxuICByb3N5YnJvd246IDB4YmM4ZjhmLFxuICByb3lhbGJsdWU6IDB4NDE2OWUxLFxuICBzYWRkbGVicm93bjogMHg4YjQ1MTMsXG4gIHNhbG1vbjogMHhmYTgwNzIsXG4gIHNhbmR5YnJvd246IDB4ZjRhNDYwLFxuICBzZWFncmVlbjogMHgyZThiNTcsXG4gIHNlYXNoZWxsOiAweGZmZjVlZSxcbiAgc2llbm5hOiAweGEwNTIyZCxcbiAgc2lsdmVyOiAweGMwYzBjMCxcbiAgc2t5Ymx1ZTogMHg4N2NlZWIsXG4gIHNsYXRlYmx1ZTogMHg2YTVhY2QsXG4gIHNsYXRlZ3JheTogMHg3MDgwOTAsXG4gIHNsYXRlZ3JleTogMHg3MDgwOTAsXG4gIHNub3c6IDB4ZmZmYWZhLFxuICBzcHJpbmdncmVlbjogMHgwMGZmN2YsXG4gIHN0ZWVsYmx1ZTogMHg0NjgyYjQsXG4gIHRhbjogMHhkMmI0OGMsXG4gIHRlYWw6IDB4MDA4MDgwLFxuICB0aGlzdGxlOiAweGQ4YmZkOCxcbiAgdG9tYXRvOiAweGZmNjM0NyxcbiAgdHVycXVvaXNlOiAweDQwZTBkMCxcbiAgdmlvbGV0OiAweGVlODJlZSxcbiAgd2hlYXQ6IDB4ZjVkZWIzLFxuICB3aGl0ZTogMHhmZmZmZmYsXG4gIHdoaXRlc21va2U6IDB4ZjVmNWY1LFxuICB5ZWxsb3c6IDB4ZmZmZjAwLFxuICB5ZWxsb3dncmVlbjogMHg5YWNkMzJcbn07XG5cbmRlZmluZShDb2xvciwgY29sb3IsIHtcbiAgY29weShjaGFubmVscykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyB0aGlzLmNvbnN0cnVjdG9yLCB0aGlzLCBjaGFubmVscyk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLnJnYigpLmRpc3BsYXlhYmxlKCk7XG4gIH0sXG4gIGhleDogY29sb3JfZm9ybWF0SGV4LCAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LlxuICBmb3JtYXRIZXg6IGNvbG9yX2Zvcm1hdEhleCxcbiAgZm9ybWF0SGV4ODogY29sb3JfZm9ybWF0SGV4OCxcbiAgZm9ybWF0SHNsOiBjb2xvcl9mb3JtYXRIc2wsXG4gIGZvcm1hdFJnYjogY29sb3JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogY29sb3JfZm9ybWF0UmdiXG59KTtcblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXgoKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4OCgpIHtcbiAgcmV0dXJuIHRoaXMucmdiKCkuZm9ybWF0SGV4OCgpO1xufVxuXG5mdW5jdGlvbiBjb2xvcl9mb3JtYXRIc2woKSB7XG4gIHJldHVybiBoc2xDb252ZXJ0KHRoaXMpLmZvcm1hdEhzbCgpO1xufVxuXG5mdW5jdGlvbiBjb2xvcl9mb3JtYXRSZ2IoKSB7XG4gIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdFJnYigpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb2xvcihmb3JtYXQpIHtcbiAgdmFyIG0sIGw7XG4gIGZvcm1hdCA9IChmb3JtYXQgKyBcIlwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIChtID0gcmVIZXguZXhlYyhmb3JtYXQpKSA/IChsID0gbVsxXS5sZW5ndGgsIG0gPSBwYXJzZUludChtWzFdLCAxNiksIGwgPT09IDYgPyByZ2JuKG0pIC8vICNmZjAwMDBcbiAgICAgIDogbCA9PT0gMyA/IG5ldyBSZ2IoKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHhmMCksIChtID4+IDQgJiAweGYpIHwgKG0gJiAweGYwKSwgKChtICYgMHhmKSA8PCA0KSB8IChtICYgMHhmKSwgMSkgLy8gI2YwMFxuICAgICAgOiBsID09PSA4ID8gcmdiYShtID4+IDI0ICYgMHhmZiwgbSA+PiAxNiAmIDB4ZmYsIG0gPj4gOCAmIDB4ZmYsIChtICYgMHhmZikgLyAweGZmKSAvLyAjZmYwMDAwMDBcbiAgICAgIDogbCA9PT0gNCA/IHJnYmEoKG0gPj4gMTIgJiAweGYpIHwgKG0gPj4gOCAmIDB4ZjApLCAobSA+PiA4ICYgMHhmKSB8IChtID4+IDQgJiAweGYwKSwgKG0gPj4gNCAmIDB4ZikgfCAobSAmIDB4ZjApLCAoKChtICYgMHhmKSA8PCA0KSB8IChtICYgMHhmKSkgLyAweGZmKSAvLyAjZjAwMFxuICAgICAgOiBudWxsKSAvLyBpbnZhbGlkIGhleFxuICAgICAgOiAobSA9IHJlUmdiSW50ZWdlci5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdLCBtWzJdLCBtWzNdLCAxKSAvLyByZ2IoMjU1LCAwLCAwKVxuICAgICAgOiAobSA9IHJlUmdiUGVyY2VudC5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCAxKSAvLyByZ2IoMTAwJSwgMCUsIDAlKVxuICAgICAgOiAobSA9IHJlUmdiYUludGVnZXIuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSwgbVsyXSwgbVszXSwgbVs0XSkgLy8gcmdiYSgyNTUsIDAsIDAsIDEpXG4gICAgICA6IChtID0gcmVSZ2JhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gcmdiYShtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCBtWzRdKSAvLyByZ2IoMTAwJSwgMCUsIDAlLCAxKVxuICAgICAgOiAobSA9IHJlSHNsUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCAxKSAvLyBoc2woMTIwLCA1MCUsIDUwJSlcbiAgICAgIDogKG0gPSByZUhzbGFQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBoc2xhKG1bMV0sIG1bMl0gLyAxMDAsIG1bM10gLyAxMDAsIG1bNF0pIC8vIGhzbGEoMTIwLCA1MCUsIDUwJSwgMSlcbiAgICAgIDogbmFtZWQuaGFzT3duUHJvcGVydHkoZm9ybWF0KSA/IHJnYm4obmFtZWRbZm9ybWF0XSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgIDogZm9ybWF0ID09PSBcInRyYW5zcGFyZW50XCIgPyBuZXcgUmdiKE5hTiwgTmFOLCBOYU4sIDApXG4gICAgICA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHJnYm4obikge1xuICByZXR1cm4gbmV3IFJnYihuID4+IDE2ICYgMHhmZiwgbiA+PiA4ICYgMHhmZiwgbiAmIDB4ZmYsIDEpO1xufVxuXG5mdW5jdGlvbiByZ2JhKHIsIGcsIGIsIGEpIHtcbiAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOO1xuICByZXR1cm4gbmV3IFJnYihyLCBnLCBiLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYkNvbnZlcnQobykge1xuICBpZiAoIShvIGluc3RhbmNlb2YgQ29sb3IpKSBvID0gY29sb3Iobyk7XG4gIGlmICghbykgcmV0dXJuIG5ldyBSZ2I7XG4gIG8gPSBvLnJnYigpO1xuICByZXR1cm4gbmV3IFJnYihvLnIsIG8uZywgby5iLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiKHIsIGcsIGIsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyByZ2JDb252ZXJ0KHIpIDogbmV3IFJnYihyLCBnLCBiLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZ2IociwgZywgYiwgb3BhY2l0eSkge1xuICB0aGlzLnIgPSArcjtcbiAgdGhpcy5nID0gK2c7XG4gIHRoaXMuYiA9ICtiO1xuICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcbn1cblxuZGVmaW5lKFJnYiwgcmdiLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXIoaykge1xuICAgIGsgPSBrID09IG51bGwgPyBicmlnaHRlciA6IE1hdGgucG93KGJyaWdodGVyLCBrKTtcbiAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXIoaykge1xuICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspO1xuICAgIHJldHVybiBuZXcgUmdiKHRoaXMuciAqIGssIHRoaXMuZyAqIGssIHRoaXMuYiAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIHJnYigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgY2xhbXAoKSB7XG4gICAgcmV0dXJuIG5ldyBSZ2IoY2xhbXBpKHRoaXMuciksIGNsYW1waSh0aGlzLmcpLCBjbGFtcGkodGhpcy5iKSwgY2xhbXBhKHRoaXMub3BhY2l0eSkpO1xuICB9LFxuICBkaXNwbGF5YWJsZSgpIHtcbiAgICByZXR1cm4gKC0wLjUgPD0gdGhpcy5yICYmIHRoaXMuciA8IDI1NS41KVxuICAgICAgICAmJiAoLTAuNSA8PSB0aGlzLmcgJiYgdGhpcy5nIDwgMjU1LjUpXG4gICAgICAgICYmICgtMC41IDw9IHRoaXMuYiAmJiB0aGlzLmIgPCAyNTUuNSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxKTtcbiAgfSxcbiAgaGV4OiByZ2JfZm9ybWF0SGV4LCAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LlxuICBmb3JtYXRIZXg6IHJnYl9mb3JtYXRIZXgsXG4gIGZvcm1hdEhleDg6IHJnYl9mb3JtYXRIZXg4LFxuICBmb3JtYXRSZ2I6IHJnYl9mb3JtYXRSZ2IsXG4gIHRvU3RyaW5nOiByZ2JfZm9ybWF0UmdiXG59KSk7XG5cbmZ1bmN0aW9uIHJnYl9mb3JtYXRIZXgoKSB7XG4gIHJldHVybiBgIyR7aGV4KHRoaXMucil9JHtoZXgodGhpcy5nKX0ke2hleCh0aGlzLmIpfWA7XG59XG5cbmZ1bmN0aW9uIHJnYl9mb3JtYXRIZXg4KCkge1xuICByZXR1cm4gYCMke2hleCh0aGlzLnIpfSR7aGV4KHRoaXMuZyl9JHtoZXgodGhpcy5iKX0ke2hleCgoaXNOYU4odGhpcy5vcGFjaXR5KSA/IDEgOiB0aGlzLm9wYWNpdHkpICogMjU1KX1gO1xufVxuXG5mdW5jdGlvbiByZ2JfZm9ybWF0UmdiKCkge1xuICBjb25zdCBhID0gY2xhbXBhKHRoaXMub3BhY2l0eSk7XG4gIHJldHVybiBgJHthID09PSAxID8gXCJyZ2IoXCIgOiBcInJnYmEoXCJ9JHtjbGFtcGkodGhpcy5yKX0sICR7Y2xhbXBpKHRoaXMuZyl9LCAke2NsYW1waSh0aGlzLmIpfSR7YSA9PT0gMSA/IFwiKVwiIDogYCwgJHthfSlgfWA7XG59XG5cbmZ1bmN0aW9uIGNsYW1wYShvcGFjaXR5KSB7XG4gIHJldHVybiBpc05hTihvcGFjaXR5KSA/IDEgOiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBvcGFjaXR5KSk7XG59XG5cbmZ1bmN0aW9uIGNsYW1waSh2YWx1ZSkge1xuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHZhbHVlKSB8fCAwKSk7XG59XG5cbmZ1bmN0aW9uIGhleCh2YWx1ZSkge1xuICB2YWx1ZSA9IGNsYW1waSh2YWx1ZSk7XG4gIHJldHVybiAodmFsdWUgPCAxNiA/IFwiMFwiIDogXCJcIikgKyB2YWx1ZS50b1N0cmluZygxNik7XG59XG5cbmZ1bmN0aW9uIGhzbGEoaCwgcywgbCwgYSkge1xuICBpZiAoYSA8PSAwKSBoID0gcyA9IGwgPSBOYU47XG4gIGVsc2UgaWYgKGwgPD0gMCB8fCBsID49IDEpIGggPSBzID0gTmFOO1xuICBlbHNlIGlmIChzIDw9IDApIGggPSBOYU47XG4gIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIGEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHNsQ29udmVydChvKSB7XG4gIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbmV3IEhzbChvLmgsIG8ucywgby5sLCBvLm9wYWNpdHkpO1xuICBpZiAoIShvIGluc3RhbmNlb2YgQ29sb3IpKSBvID0gY29sb3Iobyk7XG4gIGlmICghbykgcmV0dXJuIG5ldyBIc2w7XG4gIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbztcbiAgbyA9IG8ucmdiKCk7XG4gIHZhciByID0gby5yIC8gMjU1LFxuICAgICAgZyA9IG8uZyAvIDI1NSxcbiAgICAgIGIgPSBvLmIgLyAyNTUsXG4gICAgICBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKSxcbiAgICAgIG1heCA9IE1hdGgubWF4KHIsIGcsIGIpLFxuICAgICAgaCA9IE5hTixcbiAgICAgIHMgPSBtYXggLSBtaW4sXG4gICAgICBsID0gKG1heCArIG1pbikgLyAyO1xuICBpZiAocykge1xuICAgIGlmIChyID09PSBtYXgpIGggPSAoZyAtIGIpIC8gcyArIChnIDwgYikgKiA2O1xuICAgIGVsc2UgaWYgKGcgPT09IG1heCkgaCA9IChiIC0gcikgLyBzICsgMjtcbiAgICBlbHNlIGggPSAociAtIGcpIC8gcyArIDQ7XG4gICAgcyAvPSBsIDwgMC41ID8gbWF4ICsgbWluIDogMiAtIG1heCAtIG1pbjtcbiAgICBoICo9IDYwO1xuICB9IGVsc2Uge1xuICAgIHMgPSBsID4gMCAmJiBsIDwgMSA/IDAgOiBoO1xuICB9XG4gIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoc2woaCwgcywgbCwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhzbENvbnZlcnQoaCkgOiBuZXcgSHNsKGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZnVuY3Rpb24gSHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgdGhpcy5oID0gK2g7XG4gIHRoaXMucyA9ICtzO1xuICB0aGlzLmwgPSArbDtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShIc2wsIGhzbCwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIGRhcmtlcihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGRhcmtlciA6IE1hdGgucG93KGRhcmtlciwgayk7XG4gICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIHJnYigpIHtcbiAgICB2YXIgaCA9IHRoaXMuaCAlIDM2MCArICh0aGlzLmggPCAwKSAqIDM2MCxcbiAgICAgICAgcyA9IGlzTmFOKGgpIHx8IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zLFxuICAgICAgICBsID0gdGhpcy5sLFxuICAgICAgICBtMiA9IGwgKyAobCA8IDAuNSA/IGwgOiAxIC0gbCkgKiBzLFxuICAgICAgICBtMSA9IDIgKiBsIC0gbTI7XG4gICAgcmV0dXJuIG5ldyBSZ2IoXG4gICAgICBoc2wycmdiKGggPj0gMjQwID8gaCAtIDI0MCA6IGggKyAxMjAsIG0xLCBtMiksXG4gICAgICBoc2wycmdiKGgsIG0xLCBtMiksXG4gICAgICBoc2wycmdiKGggPCAxMjAgPyBoICsgMjQwIDogaCAtIDEyMCwgbTEsIG0yKSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH0sXG4gIGNsYW1wKCkge1xuICAgIHJldHVybiBuZXcgSHNsKGNsYW1waCh0aGlzLmgpLCBjbGFtcHQodGhpcy5zKSwgY2xhbXB0KHRoaXMubCksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTtcbiAgfSxcbiAgZGlzcGxheWFibGUoKSB7XG4gICAgcmV0dXJuICgwIDw9IHRoaXMucyAmJiB0aGlzLnMgPD0gMSB8fCBpc05hTih0aGlzLnMpKVxuICAgICAgICAmJiAoMCA8PSB0aGlzLmwgJiYgdGhpcy5sIDw9IDEpXG4gICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG4gIH0sXG4gIGZvcm1hdEhzbCgpIHtcbiAgICBjb25zdCBhID0gY2xhbXBhKHRoaXMub3BhY2l0eSk7XG4gICAgcmV0dXJuIGAke2EgPT09IDEgPyBcImhzbChcIiA6IFwiaHNsYShcIn0ke2NsYW1waCh0aGlzLmgpfSwgJHtjbGFtcHQodGhpcy5zKSAqIDEwMH0lLCAke2NsYW1wdCh0aGlzLmwpICogMTAwfSUke2EgPT09IDEgPyBcIilcIiA6IGAsICR7YX0pYH1gO1xuICB9XG59KSk7XG5cbmZ1bmN0aW9uIGNsYW1waCh2YWx1ZSkge1xuICB2YWx1ZSA9ICh2YWx1ZSB8fCAwKSAlIDM2MDtcbiAgcmV0dXJuIHZhbHVlIDwgMCA/IHZhbHVlICsgMzYwIDogdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGNsYW1wdCh2YWx1ZSkge1xuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdmFsdWUgfHwgMCkpO1xufVxuXG4vKiBGcm9tIEZ2RCAxMy4zNywgQ1NTIENvbG9yIE1vZHVsZSBMZXZlbCAzICovXG5mdW5jdGlvbiBoc2wycmdiKGgsIG0xLCBtMikge1xuICByZXR1cm4gKGggPCA2MCA/IG0xICsgKG0yIC0gbTEpICogaCAvIDYwXG4gICAgICA6IGggPCAxODAgPyBtMlxuICAgICAgOiBoIDwgMjQwID8gbTEgKyAobTIgLSBtMSkgKiAoMjQwIC0gaCkgLyA2MFxuICAgICAgOiBtMSkgKiAyNTU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCB4ID0+ICgpID0+IHg7XG4iLCJpbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnQuanNcIjtcblxuZnVuY3Rpb24gbGluZWFyKGEsIGQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYSArIHQgKiBkO1xuICB9O1xufVxuXG5mdW5jdGlvbiBleHBvbmVudGlhbChhLCBiLCB5KSB7XG4gIHJldHVybiBhID0gTWF0aC5wb3coYSwgeSksIGIgPSBNYXRoLnBvdyhiLCB5KSAtIGEsIHkgPSAxIC8geSwgZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBNYXRoLnBvdyhhICsgdCAqIGIsIHkpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHVlKGEsIGIpIHtcbiAgdmFyIGQgPSBiIC0gYTtcbiAgcmV0dXJuIGQgPyBsaW5lYXIoYSwgZCA+IDE4MCB8fCBkIDwgLTE4MCA/IGQgLSAzNjAgKiBNYXRoLnJvdW5kKGQgLyAzNjApIDogZCkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdhbW1hKHkpIHtcbiAgcmV0dXJuICh5ID0gK3kpID09PSAxID8gbm9nYW1tYSA6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYiAtIGEgPyBleHBvbmVudGlhbChhLCBiLCB5KSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBub2dhbW1hKGEsIGIpIHtcbiAgdmFyIGQgPSBiIC0gYTtcbiAgcmV0dXJuIGQgPyBsaW5lYXIoYSwgZCkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbn1cbiIsImltcG9ydCB7cmdiIGFzIGNvbG9yUmdifSBmcm9tIFwiZDMtY29sb3JcIjtcbmltcG9ydCBiYXNpcyBmcm9tIFwiLi9iYXNpcy5qc1wiO1xuaW1wb3J0IGJhc2lzQ2xvc2VkIGZyb20gXCIuL2Jhc2lzQ2xvc2VkLmpzXCI7XG5pbXBvcnQgbm9nYW1tYSwge2dhbW1hfSBmcm9tIFwiLi9jb2xvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gcmdiR2FtbWEoeSkge1xuICB2YXIgY29sb3IgPSBnYW1tYSh5KTtcblxuICBmdW5jdGlvbiByZ2Ioc3RhcnQsIGVuZCkge1xuICAgIHZhciByID0gY29sb3IoKHN0YXJ0ID0gY29sb3JSZ2Ioc3RhcnQpKS5yLCAoZW5kID0gY29sb3JSZ2IoZW5kKSkuciksXG4gICAgICAgIGcgPSBjb2xvcihzdGFydC5nLCBlbmQuZyksXG4gICAgICAgIGIgPSBjb2xvcihzdGFydC5iLCBlbmQuYiksXG4gICAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgc3RhcnQuciA9IHIodCk7XG4gICAgICBzdGFydC5nID0gZyh0KTtcbiAgICAgIHN0YXJ0LmIgPSBiKHQpO1xuICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgIH07XG4gIH1cblxuICByZ2IuZ2FtbWEgPSByZ2JHYW1tYTtcblxuICByZXR1cm4gcmdiO1xufSkoMSk7XG5cbmZ1bmN0aW9uIHJnYlNwbGluZShzcGxpbmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbG9ycykge1xuICAgIHZhciBuID0gY29sb3JzLmxlbmd0aCxcbiAgICAgICAgciA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgZyA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgYiA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgaSwgY29sb3I7XG4gICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgY29sb3IgPSBjb2xvclJnYihjb2xvcnNbaV0pO1xuICAgICAgcltpXSA9IGNvbG9yLnIgfHwgMDtcbiAgICAgIGdbaV0gPSBjb2xvci5nIHx8IDA7XG4gICAgICBiW2ldID0gY29sb3IuYiB8fCAwO1xuICAgIH1cbiAgICByID0gc3BsaW5lKHIpO1xuICAgIGcgPSBzcGxpbmUoZyk7XG4gICAgYiA9IHNwbGluZShiKTtcbiAgICBjb2xvci5vcGFjaXR5ID0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgY29sb3IuciA9IHIodCk7XG4gICAgICBjb2xvci5nID0gZyh0KTtcbiAgICAgIGNvbG9yLmIgPSBiKHQpO1xuICAgICAgcmV0dXJuIGNvbG9yICsgXCJcIjtcbiAgICB9O1xuICB9O1xufVxuXG5leHBvcnQgdmFyIHJnYkJhc2lzID0gcmdiU3BsaW5lKGJhc2lzKTtcbmV4cG9ydCB2YXIgcmdiQmFzaXNDbG9zZWQgPSByZ2JTcGxpbmUoYmFzaXNDbG9zZWQpO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gYSA9ICthLCBiID0gK2IsIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYSAqICgxIC0gdCkgKyBiICogdDtcbiAgfTtcbn1cbiIsImltcG9ydCBudW1iZXIgZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5cbnZhciByZUEgPSAvWy0rXT8oPzpcXGQrXFwuP1xcZCp8XFwuP1xcZCspKD86W2VFXVstK10/XFxkKyk/L2csXG4gICAgcmVCID0gbmV3IFJlZ0V4cChyZUEuc291cmNlLCBcImdcIik7XG5cbmZ1bmN0aW9uIHplcm8oYikge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGI7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uZShiKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGIodCkgKyBcIlwiO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBiaSA9IHJlQS5sYXN0SW5kZXggPSByZUIubGFzdEluZGV4ID0gMCwgLy8gc2NhbiBpbmRleCBmb3IgbmV4dCBudW1iZXIgaW4gYlxuICAgICAgYW0sIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYVxuICAgICAgYm0sIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYlxuICAgICAgYnMsIC8vIHN0cmluZyBwcmVjZWRpbmcgY3VycmVudCBudW1iZXIgaW4gYiwgaWYgYW55XG4gICAgICBpID0gLTEsIC8vIGluZGV4IGluIHNcbiAgICAgIHMgPSBbXSwgLy8gc3RyaW5nIGNvbnN0YW50cyBhbmQgcGxhY2Vob2xkZXJzXG4gICAgICBxID0gW107IC8vIG51bWJlciBpbnRlcnBvbGF0b3JzXG5cbiAgLy8gQ29lcmNlIGlucHV0cyB0byBzdHJpbmdzLlxuICBhID0gYSArIFwiXCIsIGIgPSBiICsgXCJcIjtcblxuICAvLyBJbnRlcnBvbGF0ZSBwYWlycyBvZiBudW1iZXJzIGluIGEgJiBiLlxuICB3aGlsZSAoKGFtID0gcmVBLmV4ZWMoYSkpXG4gICAgICAmJiAoYm0gPSByZUIuZXhlYyhiKSkpIHtcbiAgICBpZiAoKGJzID0gYm0uaW5kZXgpID4gYmkpIHsgLy8gYSBzdHJpbmcgcHJlY2VkZXMgdGhlIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGJzID0gYi5zbGljZShiaSwgYnMpO1xuICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgICBlbHNlIHNbKytpXSA9IGJzO1xuICAgIH1cbiAgICBpZiAoKGFtID0gYW1bMF0pID09PSAoYm0gPSBibVswXSkpIHsgLy8gbnVtYmVycyBpbiBhICYgYiBtYXRjaFxuICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYm07IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgICBlbHNlIHNbKytpXSA9IGJtO1xuICAgIH0gZWxzZSB7IC8vIGludGVycG9sYXRlIG5vbi1tYXRjaGluZyBudW1iZXJzXG4gICAgICBzWysraV0gPSBudWxsO1xuICAgICAgcS5wdXNoKHtpOiBpLCB4OiBudW1iZXIoYW0sIGJtKX0pO1xuICAgIH1cbiAgICBiaSA9IHJlQi5sYXN0SW5kZXg7XG4gIH1cblxuICAvLyBBZGQgcmVtYWlucyBvZiBiLlxuICBpZiAoYmkgPCBiLmxlbmd0aCkge1xuICAgIGJzID0gYi5zbGljZShiaSk7XG4gICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgZWxzZSBzWysraV0gPSBicztcbiAgfVxuXG4gIC8vIFNwZWNpYWwgb3B0aW1pemF0aW9uIGZvciBvbmx5IGEgc2luZ2xlIG1hdGNoLlxuICAvLyBPdGhlcndpc2UsIGludGVycG9sYXRlIGVhY2ggb2YgdGhlIG51bWJlcnMgYW5kIHJlam9pbiB0aGUgc3RyaW5nLlxuICByZXR1cm4gcy5sZW5ndGggPCAyID8gKHFbMF1cbiAgICAgID8gb25lKHFbMF0ueClcbiAgICAgIDogemVybyhiKSlcbiAgICAgIDogKGIgPSBxLmxlbmd0aCwgZnVuY3Rpb24odCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvOyBpIDwgYjsgKytpKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICAgICAgcmV0dXJuIHMuam9pbihcIlwiKTtcbiAgICAgICAgfSk7XG59XG4iLCJ2YXIgZGVncmVlcyA9IDE4MCAvIE1hdGguUEk7XG5cbmV4cG9ydCB2YXIgaWRlbnRpdHkgPSB7XG4gIHRyYW5zbGF0ZVg6IDAsXG4gIHRyYW5zbGF0ZVk6IDAsXG4gIHJvdGF0ZTogMCxcbiAgc2tld1g6IDAsXG4gIHNjYWxlWDogMSxcbiAgc2NhbGVZOiAxXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHZhciBzY2FsZVgsIHNjYWxlWSwgc2tld1g7XG4gIGlmIChzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYikpIGEgLz0gc2NhbGVYLCBiIC89IHNjYWxlWDtcbiAgaWYgKHNrZXdYID0gYSAqIGMgKyBiICogZCkgYyAtPSBhICogc2tld1gsIGQgLT0gYiAqIHNrZXdYO1xuICBpZiAoc2NhbGVZID0gTWF0aC5zcXJ0KGMgKiBjICsgZCAqIGQpKSBjIC89IHNjYWxlWSwgZCAvPSBzY2FsZVksIHNrZXdYIC89IHNjYWxlWTtcbiAgaWYgKGEgKiBkIDwgYiAqIGMpIGEgPSAtYSwgYiA9IC1iLCBza2V3WCA9IC1za2V3WCwgc2NhbGVYID0gLXNjYWxlWDtcbiAgcmV0dXJuIHtcbiAgICB0cmFuc2xhdGVYOiBlLFxuICAgIHRyYW5zbGF0ZVk6IGYsXG4gICAgcm90YXRlOiBNYXRoLmF0YW4yKGIsIGEpICogZGVncmVlcyxcbiAgICBza2V3WDogTWF0aC5hdGFuKHNrZXdYKSAqIGRlZ3JlZXMsXG4gICAgc2NhbGVYOiBzY2FsZVgsXG4gICAgc2NhbGVZOiBzY2FsZVlcbiAgfTtcbn1cbiIsImltcG9ydCBkZWNvbXBvc2UsIHtpZGVudGl0eX0gZnJvbSBcIi4vZGVjb21wb3NlLmpzXCI7XG5cbnZhciBzdmdOb2RlO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ3NzKHZhbHVlKSB7XG4gIGNvbnN0IG0gPSBuZXcgKHR5cGVvZiBET01NYXRyaXggPT09IFwiZnVuY3Rpb25cIiA/IERPTU1hdHJpeCA6IFdlYktpdENTU01hdHJpeCkodmFsdWUgKyBcIlwiKTtcbiAgcmV0dXJuIG0uaXNJZGVudGl0eSA/IGlkZW50aXR5IDogZGVjb21wb3NlKG0uYSwgbS5iLCBtLmMsIG0uZCwgbS5lLCBtLmYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdmcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBpZGVudGl0eTtcbiAgaWYgKCFzdmdOb2RlKSBzdmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJnXCIpO1xuICBzdmdOb2RlLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCB2YWx1ZSk7XG4gIGlmICghKHZhbHVlID0gc3ZnTm9kZS50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpKSkgcmV0dXJuIGlkZW50aXR5O1xuICB2YWx1ZSA9IHZhbHVlLm1hdHJpeDtcbiAgcmV0dXJuIGRlY29tcG9zZSh2YWx1ZS5hLCB2YWx1ZS5iLCB2YWx1ZS5jLCB2YWx1ZS5kLCB2YWx1ZS5lLCB2YWx1ZS5mKTtcbn1cbiIsImltcG9ydCBudW1iZXIgZnJvbSBcIi4uL251bWJlci5qc1wiO1xuaW1wb3J0IHtwYXJzZUNzcywgcGFyc2VTdmd9IGZyb20gXCIuL3BhcnNlLmpzXCI7XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlVHJhbnNmb3JtKHBhcnNlLCBweENvbW1hLCBweFBhcmVuLCBkZWdQYXJlbikge1xuXG4gIGZ1bmN0aW9uIHBvcChzKSB7XG4gICAgcmV0dXJuIHMubGVuZ3RoID8gcy5wb3AoKSArIFwiIFwiIDogXCJcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zbGF0ZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChcInRyYW5zbGF0ZShcIiwgbnVsbCwgcHhDb21tYSwgbnVsbCwgcHhQYXJlbik7XG4gICAgICBxLnB1c2goe2k6IGkgLSA0LCB4OiBudW1iZXIoeGEsIHhiKX0sIHtpOiBpIC0gMiwgeDogbnVtYmVyKHlhLCB5Yil9KTtcbiAgICB9IGVsc2UgaWYgKHhiIHx8IHliKSB7XG4gICAgICBzLnB1c2goXCJ0cmFuc2xhdGUoXCIgKyB4YiArIHB4Q29tbWEgKyB5YiArIHB4UGFyZW4pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJvdGF0ZShhLCBiLCBzLCBxKSB7XG4gICAgaWYgKGEgIT09IGIpIHtcbiAgICAgIGlmIChhIC0gYiA+IDE4MCkgYiArPSAzNjA7IGVsc2UgaWYgKGIgLSBhID4gMTgwKSBhICs9IDM2MDsgLy8gc2hvcnRlc3QgcGF0aFxuICAgICAgcS5wdXNoKHtpOiBzLnB1c2gocG9wKHMpICsgXCJyb3RhdGUoXCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsIHg6IG51bWJlcihhLCBiKX0pO1xuICAgIH0gZWxzZSBpZiAoYikge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBza2V3WChhLCBiLCBzLCBxKSB7XG4gICAgaWYgKGEgIT09IGIpIHtcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwic2tld1goXCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsIHg6IG51bWJlcihhLCBiKX0pO1xuICAgIH0gZWxzZSBpZiAoYikge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2tld1goXCIgKyBiICsgZGVnUGFyZW4pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNjYWxlKHhhLCB5YSwgeGIsIHliLCBzLCBxKSB7XG4gICAgaWYgKHhhICE9PSB4YiB8fCB5YSAhPT0geWIpIHtcbiAgICAgIHZhciBpID0gcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIsIG51bGwsIFwiLFwiLCBudWxsLCBcIilcIik7XG4gICAgICBxLnB1c2goe2k6IGkgLSA0LCB4OiBudW1iZXIoeGEsIHhiKX0sIHtpOiBpIC0gMiwgeDogbnVtYmVyKHlhLCB5Yil9KTtcbiAgICB9IGVsc2UgaWYgKHhiICE9PSAxIHx8IHliICE9PSAxKSB7XG4gICAgICBzLnB1c2gocG9wKHMpICsgXCJzY2FsZShcIiArIHhiICsgXCIsXCIgKyB5YiArIFwiKVwiKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuICAgICAgICBxID0gW107IC8vIG51bWJlciBpbnRlcnBvbGF0b3JzXG4gICAgYSA9IHBhcnNlKGEpLCBiID0gcGFyc2UoYik7XG4gICAgdHJhbnNsYXRlKGEudHJhbnNsYXRlWCwgYS50cmFuc2xhdGVZLCBiLnRyYW5zbGF0ZVgsIGIudHJhbnNsYXRlWSwgcywgcSk7XG4gICAgcm90YXRlKGEucm90YXRlLCBiLnJvdGF0ZSwgcywgcSk7XG4gICAgc2tld1goYS5za2V3WCwgYi5za2V3WCwgcywgcSk7XG4gICAgc2NhbGUoYS5zY2FsZVgsIGEuc2NhbGVZLCBiLnNjYWxlWCwgYi5zY2FsZVksIHMsIHEpO1xuICAgIGEgPSBiID0gbnVsbDsgLy8gZ2NcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgdmFyIGkgPSAtMSwgbiA9IHEubGVuZ3RoLCBvO1xuICAgICAgd2hpbGUgKCsraSA8IG4pIHNbKG8gPSBxW2ldKS5pXSA9IG8ueCh0KTtcbiAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciBpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyA9IGludGVycG9sYXRlVHJhbnNmb3JtKHBhcnNlQ3NzLCBcInB4LCBcIiwgXCJweClcIiwgXCJkZWcpXCIpO1xuZXhwb3J0IHZhciBpbnRlcnBvbGF0ZVRyYW5zZm9ybVN2ZyA9IGludGVycG9sYXRlVHJhbnNmb3JtKHBhcnNlU3ZnLCBcIiwgXCIsIFwiKVwiLCBcIilcIik7XG4iLCJ2YXIgZnJhbWUgPSAwLCAvLyBpcyBhbiBhbmltYXRpb24gZnJhbWUgcGVuZGluZz9cbiAgICB0aW1lb3V0ID0gMCwgLy8gaXMgYSB0aW1lb3V0IHBlbmRpbmc/XG4gICAgaW50ZXJ2YWwgPSAwLCAvLyBhcmUgYW55IHRpbWVycyBhY3RpdmU/XG4gICAgcG9rZURlbGF5ID0gMTAwMCwgLy8gaG93IGZyZXF1ZW50bHkgd2UgY2hlY2sgZm9yIGNsb2NrIHNrZXdcbiAgICB0YXNrSGVhZCxcbiAgICB0YXNrVGFpbCxcbiAgICBjbG9ja0xhc3QgPSAwLFxuICAgIGNsb2NrTm93ID0gMCxcbiAgICBjbG9ja1NrZXcgPSAwLFxuICAgIGNsb2NrID0gdHlwZW9mIHBlcmZvcm1hbmNlID09PSBcIm9iamVjdFwiICYmIHBlcmZvcm1hbmNlLm5vdyA/IHBlcmZvcm1hbmNlIDogRGF0ZSxcbiAgICBzZXRGcmFtZSA9IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpIDogZnVuY3Rpb24oZikgeyBzZXRUaW1lb3V0KGYsIDE3KTsgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vdygpIHtcbiAgcmV0dXJuIGNsb2NrTm93IHx8IChzZXRGcmFtZShjbGVhck5vdyksIGNsb2NrTm93ID0gY2xvY2subm93KCkgKyBjbG9ja1NrZXcpO1xufVxuXG5mdW5jdGlvbiBjbGVhck5vdygpIHtcbiAgY2xvY2tOb3cgPSAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gVGltZXIoKSB7XG4gIHRoaXMuX2NhbGwgPVxuICB0aGlzLl90aW1lID1cbiAgdGhpcy5fbmV4dCA9IG51bGw7XG59XG5cblRpbWVyLnByb3RvdHlwZSA9IHRpbWVyLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRpbWVyLFxuICByZXN0YXJ0OiBmdW5jdGlvbihjYWxsYmFjaywgZGVsYXksIHRpbWUpIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYWxsYmFjayBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICB0aW1lID0gKHRpbWUgPT0gbnVsbCA/IG5vdygpIDogK3RpbWUpICsgKGRlbGF5ID09IG51bGwgPyAwIDogK2RlbGF5KTtcbiAgICBpZiAoIXRoaXMuX25leHQgJiYgdGFza1RhaWwgIT09IHRoaXMpIHtcbiAgICAgIGlmICh0YXNrVGFpbCkgdGFza1RhaWwuX25leHQgPSB0aGlzO1xuICAgICAgZWxzZSB0YXNrSGVhZCA9IHRoaXM7XG4gICAgICB0YXNrVGFpbCA9IHRoaXM7XG4gICAgfVxuICAgIHRoaXMuX2NhbGwgPSBjYWxsYmFjaztcbiAgICB0aGlzLl90aW1lID0gdGltZTtcbiAgICBzbGVlcCgpO1xuICB9LFxuICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fY2FsbCkge1xuICAgICAgdGhpcy5fY2FsbCA9IG51bGw7XG4gICAgICB0aGlzLl90aW1lID0gSW5maW5pdHk7XG4gICAgICBzbGVlcCgpO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVyKGNhbGxiYWNrLCBkZWxheSwgdGltZSkge1xuICB2YXIgdCA9IG5ldyBUaW1lcjtcbiAgdC5yZXN0YXJ0KGNhbGxiYWNrLCBkZWxheSwgdGltZSk7XG4gIHJldHVybiB0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGltZXJGbHVzaCgpIHtcbiAgbm93KCk7IC8vIEdldCB0aGUgY3VycmVudCB0aW1lLCBpZiBub3QgYWxyZWFkeSBzZXQuXG4gICsrZnJhbWU7IC8vIFByZXRlbmQgd2XigJl2ZSBzZXQgYW4gYWxhcm0sIGlmIHdlIGhhdmVu4oCZdCBhbHJlYWR5LlxuICB2YXIgdCA9IHRhc2tIZWFkLCBlO1xuICB3aGlsZSAodCkge1xuICAgIGlmICgoZSA9IGNsb2NrTm93IC0gdC5fdGltZSkgPj0gMCkgdC5fY2FsbC5jYWxsKHVuZGVmaW5lZCwgZSk7XG4gICAgdCA9IHQuX25leHQ7XG4gIH1cbiAgLS1mcmFtZTtcbn1cblxuZnVuY3Rpb24gd2FrZSgpIHtcbiAgY2xvY2tOb3cgPSAoY2xvY2tMYXN0ID0gY2xvY2subm93KCkpICsgY2xvY2tTa2V3O1xuICBmcmFtZSA9IHRpbWVvdXQgPSAwO1xuICB0cnkge1xuICAgIHRpbWVyRmx1c2goKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBmcmFtZSA9IDA7XG4gICAgbmFwKCk7XG4gICAgY2xvY2tOb3cgPSAwO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBva2UoKSB7XG4gIHZhciBub3cgPSBjbG9jay5ub3coKSwgZGVsYXkgPSBub3cgLSBjbG9ja0xhc3Q7XG4gIGlmIChkZWxheSA+IHBva2VEZWxheSkgY2xvY2tTa2V3IC09IGRlbGF5LCBjbG9ja0xhc3QgPSBub3c7XG59XG5cbmZ1bmN0aW9uIG5hcCgpIHtcbiAgdmFyIHQwLCB0MSA9IHRhc2tIZWFkLCB0MiwgdGltZSA9IEluZmluaXR5O1xuICB3aGlsZSAodDEpIHtcbiAgICBpZiAodDEuX2NhbGwpIHtcbiAgICAgIGlmICh0aW1lID4gdDEuX3RpbWUpIHRpbWUgPSB0MS5fdGltZTtcbiAgICAgIHQwID0gdDEsIHQxID0gdDEuX25leHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHQyID0gdDEuX25leHQsIHQxLl9uZXh0ID0gbnVsbDtcbiAgICAgIHQxID0gdDAgPyB0MC5fbmV4dCA9IHQyIDogdGFza0hlYWQgPSB0MjtcbiAgICB9XG4gIH1cbiAgdGFza1RhaWwgPSB0MDtcbiAgc2xlZXAodGltZSk7XG59XG5cbmZ1bmN0aW9uIHNsZWVwKHRpbWUpIHtcbiAgaWYgKGZyYW1lKSByZXR1cm47IC8vIFNvb25lc3QgYWxhcm0gYWxyZWFkeSBzZXQsIG9yIHdpbGwgYmUuXG4gIGlmICh0aW1lb3V0KSB0aW1lb3V0ID0gY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICB2YXIgZGVsYXkgPSB0aW1lIC0gY2xvY2tOb3c7IC8vIFN0cmljdGx5IGxlc3MgdGhhbiBpZiB3ZSByZWNvbXB1dGVkIGNsb2NrTm93LlxuICBpZiAoZGVsYXkgPiAyNCkge1xuICAgIGlmICh0aW1lIDwgSW5maW5pdHkpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KHdha2UsIHRpbWUgLSBjbG9jay5ub3coKSAtIGNsb2NrU2tldyk7XG4gICAgaWYgKGludGVydmFsKSBpbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICB9IGVsc2Uge1xuICAgIGlmICghaW50ZXJ2YWwpIGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpLCBpbnRlcnZhbCA9IHNldEludGVydmFsKHBva2UsIHBva2VEZWxheSk7XG4gICAgZnJhbWUgPSAxLCBzZXRGcmFtZSh3YWtlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtUaW1lcn0gZnJvbSBcIi4vdGltZXIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7XG4gIHZhciB0ID0gbmV3IFRpbWVyO1xuICBkZWxheSA9IGRlbGF5ID09IG51bGwgPyAwIDogK2RlbGF5O1xuICB0LnJlc3RhcnQoZWxhcHNlZCA9PiB7XG4gICAgdC5zdG9wKCk7XG4gICAgY2FsbGJhY2soZWxhcHNlZCArIGRlbGF5KTtcbiAgfSwgZGVsYXksIHRpbWUpO1xuICByZXR1cm4gdDtcbn1cbiIsImltcG9ydCB7ZGlzcGF0Y2h9IGZyb20gXCJkMy1kaXNwYXRjaFwiO1xuaW1wb3J0IHt0aW1lciwgdGltZW91dH0gZnJvbSBcImQzLXRpbWVyXCI7XG5cbnZhciBlbXB0eU9uID0gZGlzcGF0Y2goXCJzdGFydFwiLCBcImVuZFwiLCBcImNhbmNlbFwiLCBcImludGVycnVwdFwiKTtcbnZhciBlbXB0eVR3ZWVuID0gW107XG5cbmV4cG9ydCB2YXIgQ1JFQVRFRCA9IDA7XG5leHBvcnQgdmFyIFNDSEVEVUxFRCA9IDE7XG5leHBvcnQgdmFyIFNUQVJUSU5HID0gMjtcbmV4cG9ydCB2YXIgU1RBUlRFRCA9IDM7XG5leHBvcnQgdmFyIFJVTk5JTkcgPSA0O1xuZXhwb3J0IHZhciBFTkRJTkcgPSA1O1xuZXhwb3J0IHZhciBFTkRFRCA9IDY7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUsIG5hbWUsIGlkLCBpbmRleCwgZ3JvdXAsIHRpbWluZykge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb247XG4gIGlmICghc2NoZWR1bGVzKSBub2RlLl9fdHJhbnNpdGlvbiA9IHt9O1xuICBlbHNlIGlmIChpZCBpbiBzY2hlZHVsZXMpIHJldHVybjtcbiAgY3JlYXRlKG5vZGUsIGlkLCB7XG4gICAgbmFtZTogbmFtZSxcbiAgICBpbmRleDogaW5kZXgsIC8vIEZvciBjb250ZXh0IGR1cmluZyBjYWxsYmFjay5cbiAgICBncm91cDogZ3JvdXAsIC8vIEZvciBjb250ZXh0IGR1cmluZyBjYWxsYmFjay5cbiAgICBvbjogZW1wdHlPbixcbiAgICB0d2VlbjogZW1wdHlUd2VlbixcbiAgICB0aW1lOiB0aW1pbmcudGltZSxcbiAgICBkZWxheTogdGltaW5nLmRlbGF5LFxuICAgIGR1cmF0aW9uOiB0aW1pbmcuZHVyYXRpb24sXG4gICAgZWFzZTogdGltaW5nLmVhc2UsXG4gICAgdGltZXI6IG51bGwsXG4gICAgc3RhdGU6IENSRUFURURcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KG5vZGUsIGlkKSB7XG4gIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7XG4gIGlmIChzY2hlZHVsZS5zdGF0ZSA+IENSRUFURUQpIHRocm93IG5ldyBFcnJvcihcInRvbyBsYXRlOyBhbHJlYWR5IHNjaGVkdWxlZFwiKTtcbiAgcmV0dXJuIHNjaGVkdWxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG5vZGUsIGlkKSB7XG4gIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7XG4gIGlmIChzY2hlZHVsZS5zdGF0ZSA+IFNUQVJURUQpIHRocm93IG5ldyBFcnJvcihcInRvbyBsYXRlOyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gIHJldHVybiBzY2hlZHVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBub2RlLl9fdHJhbnNpdGlvbjtcbiAgaWYgKCFzY2hlZHVsZSB8fCAhKHNjaGVkdWxlID0gc2NoZWR1bGVbaWRdKSkgdGhyb3cgbmV3IEVycm9yKFwidHJhbnNpdGlvbiBub3QgZm91bmRcIik7XG4gIHJldHVybiBzY2hlZHVsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlKG5vZGUsIGlkLCBzZWxmKSB7XG4gIHZhciBzY2hlZHVsZXMgPSBub2RlLl9fdHJhbnNpdGlvbixcbiAgICAgIHR3ZWVuO1xuXG4gIC8vIEluaXRpYWxpemUgdGhlIHNlbGYgdGltZXIgd2hlbiB0aGUgdHJhbnNpdGlvbiBpcyBjcmVhdGVkLlxuICAvLyBOb3RlIHRoZSBhY3R1YWwgZGVsYXkgaXMgbm90IGtub3duIHVudGlsIHRoZSBmaXJzdCBjYWxsYmFjayFcbiAgc2NoZWR1bGVzW2lkXSA9IHNlbGY7XG4gIHNlbGYudGltZXIgPSB0aW1lcihzY2hlZHVsZSwgMCwgc2VsZi50aW1lKTtcblxuICBmdW5jdGlvbiBzY2hlZHVsZShlbGFwc2VkKSB7XG4gICAgc2VsZi5zdGF0ZSA9IFNDSEVEVUxFRDtcbiAgICBzZWxmLnRpbWVyLnJlc3RhcnQoc3RhcnQsIHNlbGYuZGVsYXksIHNlbGYudGltZSk7XG5cbiAgICAvLyBJZiB0aGUgZWxhcHNlZCBkZWxheSBpcyBsZXNzIHRoYW4gb3VyIGZpcnN0IHNsZWVwLCBzdGFydCBpbW1lZGlhdGVseS5cbiAgICBpZiAoc2VsZi5kZWxheSA8PSBlbGFwc2VkKSBzdGFydChlbGFwc2VkIC0gc2VsZi5kZWxheSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydChlbGFwc2VkKSB7XG4gICAgdmFyIGksIGosIG4sIG87XG5cbiAgICAvLyBJZiB0aGUgc3RhdGUgaXMgbm90IFNDSEVEVUxFRCwgdGhlbiB3ZSBwcmV2aW91c2x5IGVycm9yZWQgb24gc3RhcnQuXG4gICAgaWYgKHNlbGYuc3RhdGUgIT09IFNDSEVEVUxFRCkgcmV0dXJuIHN0b3AoKTtcblxuICAgIGZvciAoaSBpbiBzY2hlZHVsZXMpIHtcbiAgICAgIG8gPSBzY2hlZHVsZXNbaV07XG4gICAgICBpZiAoby5uYW1lICE9PSBzZWxmLm5hbWUpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBXaGlsZSB0aGlzIGVsZW1lbnQgYWxyZWFkeSBoYXMgYSBzdGFydGluZyB0cmFuc2l0aW9uIGR1cmluZyB0aGlzIGZyYW1lLFxuICAgICAgLy8gZGVmZXIgc3RhcnRpbmcgYW4gaW50ZXJydXB0aW5nIHRyYW5zaXRpb24gdW50aWwgdGhhdCB0cmFuc2l0aW9uIGhhcyBhXG4gICAgICAvLyBjaGFuY2UgdG8gdGljayAoYW5kIHBvc3NpYmx5IGVuZCk7IHNlZSBkMy9kMy10cmFuc2l0aW9uIzU0IVxuICAgICAgaWYgKG8uc3RhdGUgPT09IFNUQVJURUQpIHJldHVybiB0aW1lb3V0KHN0YXJ0KTtcblxuICAgICAgLy8gSW50ZXJydXB0IHRoZSBhY3RpdmUgdHJhbnNpdGlvbiwgaWYgYW55LlxuICAgICAgaWYgKG8uc3RhdGUgPT09IFJVTk5JTkcpIHtcbiAgICAgICAgby5zdGF0ZSA9IEVOREVEO1xuICAgICAgICBvLnRpbWVyLnN0b3AoKTtcbiAgICAgICAgby5vbi5jYWxsKFwiaW50ZXJydXB0XCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIG8uaW5kZXgsIG8uZ3JvdXApO1xuICAgICAgICBkZWxldGUgc2NoZWR1bGVzW2ldO1xuICAgICAgfVxuXG4gICAgICAvLyBDYW5jZWwgYW55IHByZS1lbXB0ZWQgdHJhbnNpdGlvbnMuXG4gICAgICBlbHNlIGlmICgraSA8IGlkKSB7XG4gICAgICAgIG8uc3RhdGUgPSBFTkRFRDtcbiAgICAgICAgby50aW1lci5zdG9wKCk7XG4gICAgICAgIG8ub24uY2FsbChcImNhbmNlbFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTtcbiAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWZlciB0aGUgZmlyc3QgdGljayB0byBlbmQgb2YgdGhlIGN1cnJlbnQgZnJhbWU7IHNlZSBkMy9kMyMxNTc2LlxuICAgIC8vIE5vdGUgdGhlIHRyYW5zaXRpb24gbWF5IGJlIGNhbmNlbGVkIGFmdGVyIHN0YXJ0IGFuZCBiZWZvcmUgdGhlIGZpcnN0IHRpY2shXG4gICAgLy8gTm90ZSB0aGlzIG11c3QgYmUgc2NoZWR1bGVkIGJlZm9yZSB0aGUgc3RhcnQgZXZlbnQ7IHNlZSBkMy9kMy10cmFuc2l0aW9uIzE2IVxuICAgIC8vIEFzc3VtaW5nIHRoaXMgaXMgc3VjY2Vzc2Z1bCwgc3Vic2VxdWVudCBjYWxsYmFja3MgZ28gc3RyYWlnaHQgdG8gdGljay5cbiAgICB0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHNlbGYuc3RhdGUgPT09IFNUQVJURUQpIHtcbiAgICAgICAgc2VsZi5zdGF0ZSA9IFJVTk5JTkc7XG4gICAgICAgIHNlbGYudGltZXIucmVzdGFydCh0aWNrLCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpO1xuICAgICAgICB0aWNrKGVsYXBzZWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRGlzcGF0Y2ggdGhlIHN0YXJ0IGV2ZW50LlxuICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIGRvbmUgYmVmb3JlIHRoZSB0d2VlbiBhcmUgaW5pdGlhbGl6ZWQuXG4gICAgc2VsZi5zdGF0ZSA9IFNUQVJUSU5HO1xuICAgIHNlbGYub24uY2FsbChcInN0YXJ0XCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIHNlbGYuaW5kZXgsIHNlbGYuZ3JvdXApO1xuICAgIGlmIChzZWxmLnN0YXRlICE9PSBTVEFSVElORykgcmV0dXJuOyAvLyBpbnRlcnJ1cHRlZFxuICAgIHNlbGYuc3RhdGUgPSBTVEFSVEVEO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgdHdlZW4sIGRlbGV0aW5nIG51bGwgdHdlZW4uXG4gICAgdHdlZW4gPSBuZXcgQXJyYXkobiA9IHNlbGYudHdlZW4ubGVuZ3RoKTtcbiAgICBmb3IgKGkgPSAwLCBqID0gLTE7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChvID0gc2VsZi50d2VlbltpXS52YWx1ZS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIHNlbGYuaW5kZXgsIHNlbGYuZ3JvdXApKSB7XG4gICAgICAgIHR3ZWVuWysral0gPSBvO1xuICAgICAgfVxuICAgIH1cbiAgICB0d2Vlbi5sZW5ndGggPSBqICsgMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpY2soZWxhcHNlZCkge1xuICAgIHZhciB0ID0gZWxhcHNlZCA8IHNlbGYuZHVyYXRpb24gPyBzZWxmLmVhc2UuY2FsbChudWxsLCBlbGFwc2VkIC8gc2VsZi5kdXJhdGlvbikgOiAoc2VsZi50aW1lci5yZXN0YXJ0KHN0b3ApLCBzZWxmLnN0YXRlID0gRU5ESU5HLCAxKSxcbiAgICAgICAgaSA9IC0xLFxuICAgICAgICBuID0gdHdlZW4ubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIHR3ZWVuW2ldLmNhbGwobm9kZSwgdCk7XG4gICAgfVxuXG4gICAgLy8gRGlzcGF0Y2ggdGhlIGVuZCBldmVudC5cbiAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gRU5ESU5HKSB7XG4gICAgICBzZWxmLm9uLmNhbGwoXCJlbmRcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgc2VsZi5pbmRleCwgc2VsZi5ncm91cCk7XG4gICAgICBzdG9wKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBzZWxmLnN0YXRlID0gRU5ERUQ7XG4gICAgc2VsZi50aW1lci5zdG9wKCk7XG4gICAgZGVsZXRlIHNjaGVkdWxlc1tpZF07XG4gICAgZm9yICh2YXIgaSBpbiBzY2hlZHVsZXMpIHJldHVybjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIGRlbGV0ZSBub2RlLl9fdHJhbnNpdGlvbjtcbiAgfVxufVxuIiwiaW1wb3J0IHtTVEFSVElORywgRU5ESU5HLCBFTkRFRH0gZnJvbSBcIi4vdHJhbnNpdGlvbi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlLCBuYW1lKSB7XG4gIHZhciBzY2hlZHVsZXMgPSBub2RlLl9fdHJhbnNpdGlvbixcbiAgICAgIHNjaGVkdWxlLFxuICAgICAgYWN0aXZlLFxuICAgICAgZW1wdHkgPSB0cnVlLFxuICAgICAgaTtcblxuICBpZiAoIXNjaGVkdWxlcykgcmV0dXJuO1xuXG4gIG5hbWUgPSBuYW1lID09IG51bGwgPyBudWxsIDogbmFtZSArIFwiXCI7XG5cbiAgZm9yIChpIGluIHNjaGVkdWxlcykge1xuICAgIGlmICgoc2NoZWR1bGUgPSBzY2hlZHVsZXNbaV0pLm5hbWUgIT09IG5hbWUpIHsgZW1wdHkgPSBmYWxzZTsgY29udGludWU7IH1cbiAgICBhY3RpdmUgPSBzY2hlZHVsZS5zdGF0ZSA+IFNUQVJUSU5HICYmIHNjaGVkdWxlLnN0YXRlIDwgRU5ESU5HO1xuICAgIHNjaGVkdWxlLnN0YXRlID0gRU5ERUQ7XG4gICAgc2NoZWR1bGUudGltZXIuc3RvcCgpO1xuICAgIHNjaGVkdWxlLm9uLmNhbGwoYWN0aXZlID8gXCJpbnRlcnJ1cHRcIiA6IFwiY2FuY2VsXCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIHNjaGVkdWxlLmluZGV4LCBzY2hlZHVsZS5ncm91cCk7XG4gICAgZGVsZXRlIHNjaGVkdWxlc1tpXTtcbiAgfVxuXG4gIGlmIChlbXB0eSkgZGVsZXRlIG5vZGUuX190cmFuc2l0aW9uO1xufVxuIiwiaW1wb3J0IGludGVycnVwdCBmcm9tIFwiLi4vaW50ZXJydXB0LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICBpbnRlcnJ1cHQodGhpcywgbmFtZSk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gdHdlZW5SZW1vdmUoaWQsIG5hbWUpIHtcbiAgdmFyIHR3ZWVuMCwgdHdlZW4xO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSxcbiAgICAgICAgdHdlZW4gPSBzY2hlZHVsZS50d2VlbjtcblxuICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgdHdlZW4gd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgdHdlZW4gYW5kIHdl4oCZcmUgZG9uZSFcbiAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgaWYgKHR3ZWVuICE9PSB0d2VlbjApIHtcbiAgICAgIHR3ZWVuMSA9IHR3ZWVuMCA9IHR3ZWVuO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0d2VlbjEubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmICh0d2VlbjFbaV0ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgIHR3ZWVuMSA9IHR3ZWVuMS5zbGljZSgpO1xuICAgICAgICAgIHR3ZWVuMS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBzY2hlZHVsZS50d2VlbiA9IHR3ZWVuMTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdHdlZW5GdW5jdGlvbihpZCwgbmFtZSwgdmFsdWUpIHtcbiAgdmFyIHR3ZWVuMCwgdHdlZW4xO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIHR3ZWVuIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7XG4gICAgICB0d2VlbjEgPSAodHdlZW4wID0gdHdlZW4pLnNsaWNlKCk7XG4gICAgICBmb3IgKHZhciB0ID0ge25hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZX0sIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICB0d2VlbjFbaV0gPSB0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gbikgdHdlZW4xLnB1c2godCk7XG4gICAgfVxuXG4gICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIG5hbWUgKz0gXCJcIjtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgdHdlZW4gPSBnZXQodGhpcy5ub2RlKCksIGlkKS50d2VlbjtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IHR3ZWVuLmxlbmd0aCwgdDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKCh0ID0gdHdlZW5baV0pLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHQudmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodmFsdWUgPT0gbnVsbCA/IHR3ZWVuUmVtb3ZlIDogdHdlZW5GdW5jdGlvbikoaWQsIG5hbWUsIHZhbHVlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0d2VlblZhbHVlKHRyYW5zaXRpb24sIG5hbWUsIHZhbHVlKSB7XG4gIHZhciBpZCA9IHRyYW5zaXRpb24uX2lkO1xuXG4gIHRyYW5zaXRpb24uZWFjaChmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpO1xuICAgIChzY2hlZHVsZS52YWx1ZSB8fCAoc2NoZWR1bGUudmFsdWUgPSB7fSkpW25hbWVdID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gZ2V0KG5vZGUsIGlkKS52YWx1ZVtuYW1lXTtcbiAgfTtcbn1cbiIsImltcG9ydCB7Y29sb3J9IGZyb20gXCJkMy1jb2xvclwiO1xuaW1wb3J0IHtpbnRlcnBvbGF0ZU51bWJlciwgaW50ZXJwb2xhdGVSZ2IsIGludGVycG9sYXRlU3RyaW5nfSBmcm9tIFwiZDMtaW50ZXJwb2xhdGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgYztcbiAgcmV0dXJuICh0eXBlb2YgYiA9PT0gXCJudW1iZXJcIiA/IGludGVycG9sYXRlTnVtYmVyXG4gICAgICA6IGIgaW5zdGFuY2VvZiBjb2xvciA/IGludGVycG9sYXRlUmdiXG4gICAgICA6IChjID0gY29sb3IoYikpID8gKGIgPSBjLCBpbnRlcnBvbGF0ZVJnYilcbiAgICAgIDogaW50ZXJwb2xhdGVTdHJpbmcpKGEsIGIpO1xufVxuIiwiaW1wb3J0IHtpbnRlcnBvbGF0ZVRyYW5zZm9ybVN2ZyBhcyBpbnRlcnBvbGF0ZVRyYW5zZm9ybX0gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5pbXBvcnQge25hbWVzcGFjZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHt0d2VlblZhbHVlfSBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuaW1wb3J0IGludGVycG9sYXRlIGZyb20gXCIuL2ludGVycG9sYXRlLmpzXCI7XG5cbmZ1bmN0aW9uIGF0dHJSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJSZW1vdmVOUyhmdWxsbmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKGZ1bGxuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUxKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbihuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMTAsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCwgdmFsdWUxID0gdmFsdWUodGhpcyksIHN0cmluZzE7XG4gICAgaWYgKHZhbHVlMSA9PSBudWxsKSByZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCI7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyRnVuY3Rpb25OUyhmdWxsbmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAsIHZhbHVlMSA9IHZhbHVlKHRoaXMpLCBzdHJpbmcxO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCI7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSksIGkgPSBmdWxsbmFtZSA9PT0gXCJ0cmFuc2Zvcm1cIiA/IGludGVycG9sYXRlVHJhbnNmb3JtIDogaW50ZXJwb2xhdGU7XG4gIHJldHVybiB0aGlzLmF0dHJUd2VlbihuYW1lLCB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbikoZnVsbG5hbWUsIGksIHR3ZWVuVmFsdWUodGhpcywgXCJhdHRyLlwiICsgbmFtZSwgdmFsdWUpKVxuICAgICAgOiB2YWx1ZSA9PSBudWxsID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0clJlbW92ZU5TIDogYXR0clJlbW92ZSkoZnVsbG5hbWUpXG4gICAgICA6IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJDb25zdGFudE5TIDogYXR0ckNvbnN0YW50KShmdWxsbmFtZSwgaSwgdmFsdWUpKTtcbn1cbiIsImltcG9ydCB7bmFtZXNwYWNlfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5cbmZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZShuYW1lLCBpKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgaS5jYWxsKHRoaXMsIHQpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckludGVycG9sYXRlTlMoZnVsbG5hbWUsIGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgaS5jYWxsKHRoaXMsIHQpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0clR3ZWVuTlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0MCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlTlMoZnVsbG5hbWUsIGkpO1xuICAgIHJldHVybiB0MDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5mdW5jdGlvbiBhdHRyVHdlZW4obmFtZSwgdmFsdWUpIHtcbiAgdmFyIHQwLCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiBhdHRySW50ZXJwb2xhdGUobmFtZSwgaSk7XG4gICAgcmV0dXJuIHQwO1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHZhciBrZXkgPSBcImF0dHIuXCIgKyBuYW1lO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlO1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcbiAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCAoZnVsbG5hbWUubG9jYWwgPyBhdHRyVHdlZW5OUyA6IGF0dHJUd2VlbikoZnVsbG5hbWUsIHZhbHVlKSk7XG59XG4iLCJpbXBvcnQge2dldCwgaW5pdH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZGVsYXlGdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gK3ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRlbGF5Q29uc3RhbnQoaWQsIHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9ICt2YWx1ZSwgZnVuY3Rpb24oKSB7XG4gICAgaW5pdCh0aGlzLCBpZCkuZGVsYXkgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIGlkID0gdGhpcy5faWQ7XG5cbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gZGVsYXlGdW5jdGlvblxuICAgICAgICAgIDogZGVsYXlDb25zdGFudCkoaWQsIHZhbHVlKSlcbiAgICAgIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZGVsYXk7XG59XG4iLCJpbXBvcnQge2dldCwgc2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBkdXJhdGlvbkZ1bmN0aW9uKGlkLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgc2V0KHRoaXMsIGlkKS5kdXJhdGlvbiA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkdXJhdGlvbkNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPSArdmFsdWUsIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZHVyYXRpb24gPSB2YWx1ZTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIGlkID0gdGhpcy5faWQ7XG5cbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gZHVyYXRpb25GdW5jdGlvblxuICAgICAgICAgIDogZHVyYXRpb25Db25zdGFudCkoaWQsIHZhbHVlKSlcbiAgICAgIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZHVyYXRpb247XG59XG4iLCJpbXBvcnQge2dldCwgc2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgc2V0KHRoaXMsIGlkKS5lYXNlID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaChlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSlcbiAgICAgIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZWFzZTtcbn1cbiIsImltcG9ydCB7c2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBlYXNlVmFyeWluZyhpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodHlwZW9mIHYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gdGhpcy5lYWNoKGVhc2VWYXJ5aW5nKHRoaXMuX2lkLCB2YWx1ZSkpO1xufVxuIiwiaW1wb3J0IHttYXRjaGVyfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIGlmICh0eXBlb2YgbWF0Y2ggIT09IFwiZnVuY3Rpb25cIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7XG59XG4iLCJpbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHRyYW5zaXRpb24pIHtcbiAgaWYgKHRyYW5zaXRpb24uX2lkICE9PSB0aGlzLl9pZCkgdGhyb3cgbmV3IEVycm9yO1xuXG4gIGZvciAodmFyIGdyb3VwczAgPSB0aGlzLl9ncm91cHMsIGdyb3VwczEgPSB0cmFuc2l0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwMCA9IGdyb3VwczBbal0sIGdyb3VwMSA9IGdyb3VwczFbal0sIG4gPSBncm91cDAubGVuZ3RoLCBtZXJnZSA9IG1lcmdlc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXAwW2ldIHx8IGdyb3VwMVtpXSkge1xuICAgICAgICBtZXJnZVtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yICg7IGogPCBtMDsgKytqKSB7XG4gICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTtcbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMsIHRoaXMuX25hbWUsIHRoaXMuX2lkKTtcbn1cbiIsImltcG9ydCB7Z2V0LCBzZXQsIGluaXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIHN0YXJ0KG5hbWUpIHtcbiAgcmV0dXJuIChuYW1lICsgXCJcIikudHJpbSgpLnNwbGl0KC9efFxccysvKS5ldmVyeShmdW5jdGlvbih0KSB7XG4gICAgdmFyIGkgPSB0LmluZGV4T2YoXCIuXCIpO1xuICAgIGlmIChpID49IDApIHQgPSB0LnNsaWNlKDAsIGkpO1xuICAgIHJldHVybiAhdCB8fCB0ID09PSBcInN0YXJ0XCI7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvbkZ1bmN0aW9uKGlkLCBuYW1lLCBsaXN0ZW5lcikge1xuICB2YXIgb24wLCBvbjEsIHNpdCA9IHN0YXJ0KG5hbWUpID8gaW5pdCA6IHNldDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNpdCh0aGlzLCBpZCksXG4gICAgICAgIG9uID0gc2NoZWR1bGUub247XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdl4oCZcmUgZG9uZSFcbiAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgaWYgKG9uICE9PSBvbjApIChvbjEgPSAob24wID0gb24pLmNvcHkoKSkub24obmFtZSwgbGlzdGVuZXIpO1xuXG4gICAgc2NoZWR1bGUub24gPSBvbjE7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoIDwgMlxuICAgICAgPyBnZXQodGhpcy5ub2RlKCksIGlkKS5vbi5vbihuYW1lKVxuICAgICAgOiB0aGlzLmVhY2gob25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpKTtcbn1cbiIsImZ1bmN0aW9uIHJlbW92ZUZ1bmN0aW9uKGlkKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgaW4gdGhpcy5fX3RyYW5zaXRpb24pIGlmICgraSAhPT0gaWQpIHJldHVybjtcbiAgICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5vbihcImVuZC5yZW1vdmVcIiwgcmVtb3ZlRnVuY3Rpb24odGhpcy5faWQpKTtcbn1cbiIsImltcG9ydCB7c2VsZWN0b3J9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7VHJhbnNpdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSwge2dldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0KSB7XG4gIHZhciBuYW1lID0gdGhpcy5fbmFtZSxcbiAgICAgIGlkID0gdGhpcy5faWQ7XG5cbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICAgIHNjaGVkdWxlKHN1Ymdyb3VwW2ldLCBuYW1lLCBpZCwgaSwgc3ViZ3JvdXAsIGdldChub2RlLCBpZCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTtcbn1cbiIsImltcG9ydCB7c2VsZWN0b3JBbGx9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7VHJhbnNpdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSwge2dldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0KSB7XG4gIHZhciBuYW1lID0gdGhpcy5fbmFtZSxcbiAgICAgIGlkID0gdGhpcy5faWQ7XG5cbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3JBbGwoc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBbXSwgcGFyZW50cyA9IFtdLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBmb3IgKHZhciBjaGlsZHJlbiA9IHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSwgY2hpbGQsIGluaGVyaXQgPSBnZXQobm9kZSwgaWQpLCBrID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgayA8IGw7ICsraykge1xuICAgICAgICAgIGlmIChjaGlsZCA9IGNoaWxkcmVuW2tdKSB7XG4gICAgICAgICAgICBzY2hlZHVsZShjaGlsZCwgbmFtZSwgaWQsIGssIGNoaWxkcmVuLCBpbmhlcml0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goY2hpbGRyZW4pO1xuICAgICAgICBwYXJlbnRzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgcGFyZW50cywgbmFtZSwgaWQpO1xufVxuIiwiaW1wb3J0IHtzZWxlY3Rpb259IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcblxudmFyIFNlbGVjdGlvbiA9IHNlbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3I7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9ncm91cHMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiaW1wb3J0IHtpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyBhcyBpbnRlcnBvbGF0ZVRyYW5zZm9ybX0gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5pbXBvcnQge3N0eWxlfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge3NldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcbmltcG9ydCB7dHdlZW5WYWx1ZX0gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCBpbnRlcnBvbGF0ZSBmcm9tIFwiLi9pbnRlcnBvbGF0ZS5qc1wiO1xuXG5mdW5jdGlvbiBzdHlsZU51bGwobmFtZSwgaW50ZXJwb2xhdGUpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMTAsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHN0eWxlKHRoaXMsIG5hbWUpLFxuICAgICAgICBzdHJpbmcxID0gKHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSksIHN0eWxlKHRoaXMsIG5hbWUpKTtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgc3RyaW5nMTAgPSBzdHJpbmcxKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVDb25zdGFudChuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUxKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSBzdHlsZSh0aGlzLCBuYW1lKTtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMTAsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHN0eWxlKHRoaXMsIG5hbWUpLFxuICAgICAgICB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSxcbiAgICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCI7XG4gICAgaWYgKHZhbHVlMSA9PSBudWxsKSBzdHJpbmcxID0gdmFsdWUxID0gKHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSksIHN0eWxlKHRoaXMsIG5hbWUpKTtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IChzdHJpbmcxMCA9IHN0cmluZzEsIGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlTWF5YmVSZW1vdmUoaWQsIG5hbWUpIHtcbiAgdmFyIG9uMCwgb24xLCBsaXN0ZW5lcjAsIGtleSA9IFwic3R5bGUuXCIgKyBuYW1lLCBldmVudCA9IFwiZW5kLlwiICsga2V5LCByZW1vdmU7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICBvbiA9IHNjaGVkdWxlLm9uLFxuICAgICAgICBsaXN0ZW5lciA9IHNjaGVkdWxlLnZhbHVlW2tleV0gPT0gbnVsbCA/IHJlbW92ZSB8fCAocmVtb3ZlID0gc3R5bGVSZW1vdmUobmFtZSkpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmIChvbiAhPT0gb24wIHx8IGxpc3RlbmVyMCAhPT0gbGlzdGVuZXIpIChvbjEgPSAob24wID0gb24pLmNvcHkoKSkub24oZXZlbnQsIGxpc3RlbmVyMCA9IGxpc3RlbmVyKTtcblxuICAgIHNjaGVkdWxlLm9uID0gb24xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgdmFyIGkgPSAobmFtZSArPSBcIlwiKSA9PT0gXCJ0cmFuc2Zvcm1cIiA/IGludGVycG9sYXRlVHJhbnNmb3JtIDogaW50ZXJwb2xhdGU7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdGhpc1xuICAgICAgLnN0eWxlVHdlZW4obmFtZSwgc3R5bGVOdWxsKG5hbWUsIGkpKVxuICAgICAgLm9uKFwiZW5kLnN0eWxlLlwiICsgbmFtZSwgc3R5bGVSZW1vdmUobmFtZSkpXG4gICAgOiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IHRoaXNcbiAgICAgIC5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlRnVuY3Rpb24obmFtZSwgaSwgdHdlZW5WYWx1ZSh0aGlzLCBcInN0eWxlLlwiICsgbmFtZSwgdmFsdWUpKSlcbiAgICAgIC5lYWNoKHN0eWxlTWF5YmVSZW1vdmUodGhpcy5faWQsIG5hbWUpKVxuICAgIDogdGhpc1xuICAgICAgLnN0eWxlVHdlZW4obmFtZSwgc3R5bGVDb25zdGFudChuYW1lLCBpLCB2YWx1ZSksIHByaW9yaXR5KVxuICAgICAgLm9uKFwiZW5kLnN0eWxlLlwiICsgbmFtZSwgbnVsbCk7XG59XG4iLCJmdW5jdGlvbiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCBpLmNhbGwodGhpcywgdCksIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVUd2VlbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgdmFyIHQsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0ID0gKGkwID0gaSkgJiYgc3R5bGVJbnRlcnBvbGF0ZShuYW1lLCBpLCBwcmlvcml0eSk7XG4gICAgcmV0dXJuIHQ7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHZhciBrZXkgPSBcInN0eWxlLlwiICsgKG5hbWUgKz0gXCJcIik7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIChrZXkgPSB0aGlzLnR3ZWVuKGtleSkpICYmIGtleS5fdmFsdWU7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdGhpcy50d2VlbihrZXksIG51bGwpO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBzdHlsZVR3ZWVuKG5hbWUsIHZhbHVlLCBwcmlvcml0eSA9PSBudWxsID8gXCJcIiA6IHByaW9yaXR5KSk7XG59XG4iLCJpbXBvcnQge3R3ZWVuVmFsdWV9IGZyb20gXCIuL3R3ZWVuLmpzXCI7XG5cbmZ1bmN0aW9uIHRleHRDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuICB9O1xufVxuXG5mdW5jdGlvbiB0ZXh0RnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZTEgPSB2YWx1ZSh0aGlzKTtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWUxID09IG51bGwgPyBcIlwiIDogdmFsdWUxO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdGhpcy50d2VlbihcInRleHRcIiwgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gdGV4dEZ1bmN0aW9uKHR3ZWVuVmFsdWUodGhpcywgXCJ0ZXh0XCIsIHZhbHVlKSlcbiAgICAgIDogdGV4dENvbnN0YW50KHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiKSk7XG59XG4iLCJmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGUoaSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSBpLmNhbGwodGhpcywgdCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRleHRUd2Vlbih2YWx1ZSkge1xuICB2YXIgdDAsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0MCA9IChpMCA9IGkpICYmIHRleHRJbnRlcnBvbGF0ZShpKTtcbiAgICByZXR1cm4gdDA7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIGtleSA9IFwidGV4dFwiO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlO1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgdGV4dFR3ZWVuKHZhbHVlKSk7XG59XG4iLCJpbXBvcnQge1RyYW5zaXRpb24sIG5ld0lkfSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNjaGVkdWxlLCB7Z2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIG5hbWUgPSB0aGlzLl9uYW1lLFxuICAgICAgaWQwID0gdGhpcy5faWQsXG4gICAgICBpZDEgPSBuZXdJZCgpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHZhciBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkMCk7XG4gICAgICAgIHNjaGVkdWxlKG5vZGUsIG5hbWUsIGlkMSwgaSwgZ3JvdXAsIHtcbiAgICAgICAgICB0aW1lOiBpbmhlcml0LnRpbWUgKyBpbmhlcml0LmRlbGF5ICsgaW5oZXJpdC5kdXJhdGlvbixcbiAgICAgICAgICBkZWxheTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogaW5oZXJpdC5kdXJhdGlvbixcbiAgICAgICAgICBlYXNlOiBpbmhlcml0LmVhc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQxKTtcbn1cbiIsImltcG9ydCB7c2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIG9uMCwgb24xLCB0aGF0ID0gdGhpcywgaWQgPSB0aGF0Ll9pZCwgc2l6ZSA9IHRoYXQuc2l6ZSgpO1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGNhbmNlbCA9IHt2YWx1ZTogcmVqZWN0fSxcbiAgICAgICAgZW5kID0ge3ZhbHVlOiBmdW5jdGlvbigpIHsgaWYgKC0tc2l6ZSA9PT0gMCkgcmVzb2x2ZSgpOyB9fTtcblxuICAgIHRoYXQuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgICAgb24gPSBzY2hlZHVsZS5vbjtcblxuICAgICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdl4oCZcmUgZG9uZSFcbiAgICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICAgIGlmIChvbiAhPT0gb24wKSB7XG4gICAgICAgIG9uMSA9IChvbjAgPSBvbikuY29weSgpO1xuICAgICAgICBvbjEuXy5jYW5jZWwucHVzaChjYW5jZWwpO1xuICAgICAgICBvbjEuXy5pbnRlcnJ1cHQucHVzaChjYW5jZWwpO1xuICAgICAgICBvbjEuXy5lbmQucHVzaChlbmQpO1xuICAgICAgfVxuXG4gICAgICBzY2hlZHVsZS5vbiA9IG9uMTtcbiAgICB9KTtcblxuICAgIC8vIFRoZSBzZWxlY3Rpb24gd2FzIGVtcHR5LCByZXNvbHZlIGVuZCBpbW1lZGlhdGVseVxuICAgIGlmIChzaXplID09PSAwKSByZXNvbHZlKCk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHtzZWxlY3Rpb259IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB0cmFuc2l0aW9uX2F0dHIgZnJvbSBcIi4vYXR0ci5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fYXR0clR3ZWVuIGZyb20gXCIuL2F0dHJUd2Vlbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZGVsYXkgZnJvbSBcIi4vZGVsYXkuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2R1cmF0aW9uIGZyb20gXCIuL2R1cmF0aW9uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9lYXNlIGZyb20gXCIuL2Vhc2UuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2Vhc2VWYXJ5aW5nIGZyb20gXCIuL2Vhc2VWYXJ5aW5nLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9maWx0ZXIgZnJvbSBcIi4vZmlsdGVyLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9tZXJnZSBmcm9tIFwiLi9tZXJnZS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fb24gZnJvbSBcIi4vb24uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3JlbW92ZSBmcm9tIFwiLi9yZW1vdmUuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3NlbGVjdCBmcm9tIFwiLi9zZWxlY3QuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3NlbGVjdEFsbCBmcm9tIFwiLi9zZWxlY3RBbGwuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3NlbGVjdGlvbiBmcm9tIFwiLi9zZWxlY3Rpb24uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3N0eWxlIGZyb20gXCIuL3N0eWxlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zdHlsZVR3ZWVuIGZyb20gXCIuL3N0eWxlVHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RleHQgZnJvbSBcIi4vdGV4dC5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdGV4dFR3ZWVuIGZyb20gXCIuL3RleHRUd2Vlbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdHJhbnNpdGlvbiBmcm9tIFwiLi90cmFuc2l0aW9uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl90d2VlbiBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZW5kIGZyb20gXCIuL2VuZC5qc1wiO1xuXG52YXIgaWQgPSAwO1xuXG5leHBvcnQgZnVuY3Rpb24gVHJhbnNpdGlvbihncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKSB7XG4gIHRoaXMuX2dyb3VwcyA9IGdyb3VwcztcbiAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7XG4gIHRoaXMuX25hbWUgPSBuYW1lO1xuICB0aGlzLl9pZCA9IGlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2l0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHNlbGVjdGlvbigpLnRyYW5zaXRpb24obmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdJZCgpIHtcbiAgcmV0dXJuICsraWQ7XG59XG5cbnZhciBzZWxlY3Rpb25fcHJvdG90eXBlID0gc2VsZWN0aW9uLnByb3RvdHlwZTtcblxuVHJhbnNpdGlvbi5wcm90b3R5cGUgPSB0cmFuc2l0aW9uLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRyYW5zaXRpb24sXG4gIHNlbGVjdDogdHJhbnNpdGlvbl9zZWxlY3QsXG4gIHNlbGVjdEFsbDogdHJhbnNpdGlvbl9zZWxlY3RBbGwsXG4gIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNlbGVjdENoaWxkLFxuICBzZWxlY3RDaGlsZHJlbjogc2VsZWN0aW9uX3Byb3RvdHlwZS5zZWxlY3RDaGlsZHJlbixcbiAgZmlsdGVyOiB0cmFuc2l0aW9uX2ZpbHRlcixcbiAgbWVyZ2U6IHRyYW5zaXRpb25fbWVyZ2UsXG4gIHNlbGVjdGlvbjogdHJhbnNpdGlvbl9zZWxlY3Rpb24sXG4gIHRyYW5zaXRpb246IHRyYW5zaXRpb25fdHJhbnNpdGlvbixcbiAgY2FsbDogc2VsZWN0aW9uX3Byb3RvdHlwZS5jYWxsLFxuICBub2Rlczogc2VsZWN0aW9uX3Byb3RvdHlwZS5ub2RlcyxcbiAgbm9kZTogc2VsZWN0aW9uX3Byb3RvdHlwZS5ub2RlLFxuICBzaXplOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNpemUsXG4gIGVtcHR5OiBzZWxlY3Rpb25fcHJvdG90eXBlLmVtcHR5LFxuICBlYWNoOiBzZWxlY3Rpb25fcHJvdG90eXBlLmVhY2gsXG4gIG9uOiB0cmFuc2l0aW9uX29uLFxuICBhdHRyOiB0cmFuc2l0aW9uX2F0dHIsXG4gIGF0dHJUd2VlbjogdHJhbnNpdGlvbl9hdHRyVHdlZW4sXG4gIHN0eWxlOiB0cmFuc2l0aW9uX3N0eWxlLFxuICBzdHlsZVR3ZWVuOiB0cmFuc2l0aW9uX3N0eWxlVHdlZW4sXG4gIHRleHQ6IHRyYW5zaXRpb25fdGV4dCxcbiAgdGV4dFR3ZWVuOiB0cmFuc2l0aW9uX3RleHRUd2VlbixcbiAgcmVtb3ZlOiB0cmFuc2l0aW9uX3JlbW92ZSxcbiAgdHdlZW46IHRyYW5zaXRpb25fdHdlZW4sXG4gIGRlbGF5OiB0cmFuc2l0aW9uX2RlbGF5LFxuICBkdXJhdGlvbjogdHJhbnNpdGlvbl9kdXJhdGlvbixcbiAgZWFzZTogdHJhbnNpdGlvbl9lYXNlLFxuICBlYXNlVmFyeWluZzogdHJhbnNpdGlvbl9lYXNlVmFyeWluZyxcbiAgZW5kOiB0cmFuc2l0aW9uX2VuZCxcbiAgW1N5bWJvbC5pdGVyYXRvcl06IHNlbGVjdGlvbl9wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXVxufTtcbiIsImV4cG9ydCBmdW5jdGlvbiBjdWJpY0luKHQpIHtcbiAgcmV0dXJuIHQgKiB0ICogdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljT3V0KHQpIHtcbiAgcmV0dXJuIC0tdCAqIHQgKiB0ICsgMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljSW5PdXQodCkge1xuICByZXR1cm4gKCh0ICo9IDIpIDw9IDEgPyB0ICogdCAqIHQgOiAodCAtPSAyKSAqIHQgKiB0ICsgMikgLyAyO1xufVxuIiwiaW1wb3J0IHtUcmFuc2l0aW9uLCBuZXdJZH0gZnJvbSBcIi4uL3RyYW5zaXRpb24vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSBmcm9tIFwiLi4vdHJhbnNpdGlvbi9zY2hlZHVsZS5qc1wiO1xuaW1wb3J0IHtlYXNlQ3ViaWNJbk91dH0gZnJvbSBcImQzLWVhc2VcIjtcbmltcG9ydCB7bm93fSBmcm9tIFwiZDMtdGltZXJcIjtcblxudmFyIGRlZmF1bHRUaW1pbmcgPSB7XG4gIHRpbWU6IG51bGwsIC8vIFNldCBvbiB1c2UuXG4gIGRlbGF5OiAwLFxuICBkdXJhdGlvbjogMjUwLFxuICBlYXNlOiBlYXNlQ3ViaWNJbk91dFxufTtcblxuZnVuY3Rpb24gaW5oZXJpdChub2RlLCBpZCkge1xuICB2YXIgdGltaW5nO1xuICB3aGlsZSAoISh0aW1pbmcgPSBub2RlLl9fdHJhbnNpdGlvbikgfHwgISh0aW1pbmcgPSB0aW1pbmdbaWRdKSkge1xuICAgIGlmICghKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRyYW5zaXRpb24gJHtpZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aW1pbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIGlkLFxuICAgICAgdGltaW5nO1xuXG4gIGlmIChuYW1lIGluc3RhbmNlb2YgVHJhbnNpdGlvbikge1xuICAgIGlkID0gbmFtZS5faWQsIG5hbWUgPSBuYW1lLl9uYW1lO1xuICB9IGVsc2Uge1xuICAgIGlkID0gbmV3SWQoKSwgKHRpbWluZyA9IGRlZmF1bHRUaW1pbmcpLnRpbWUgPSBub3coKSwgbmFtZSA9IG5hbWUgPT0gbnVsbCA/IG51bGwgOiBuYW1lICsgXCJcIjtcbiAgfVxuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHNjaGVkdWxlKG5vZGUsIG5hbWUsIGlkLCBpLCBncm91cCwgdGltaW5nIHx8IGluaGVyaXQobm9kZSwgaWQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCBuYW1lLCBpZCk7XG59XG4iLCJpbXBvcnQge3NlbGVjdGlvbn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHNlbGVjdGlvbl9pbnRlcnJ1cHQgZnJvbSBcIi4vaW50ZXJydXB0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3RyYW5zaXRpb24gZnJvbSBcIi4vdHJhbnNpdGlvbi5qc1wiO1xuXG5zZWxlY3Rpb24ucHJvdG90eXBlLmludGVycnVwdCA9IHNlbGVjdGlvbl9pbnRlcnJ1cHQ7XG5zZWxlY3Rpb24ucHJvdG90eXBlLnRyYW5zaXRpb24gPSBzZWxlY3Rpb25fdHJhbnNpdGlvbjtcbiIsImV4cG9ydCBmdW5jdGlvbiBUcmFuc2Zvcm0oaywgeCwgeSkge1xuICB0aGlzLmsgPSBrO1xuICB0aGlzLnggPSB4O1xuICB0aGlzLnkgPSB5O1xufVxuXG5UcmFuc2Zvcm0ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogVHJhbnNmb3JtLFxuICBzY2FsZTogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBrID09PSAxID8gdGhpcyA6IG5ldyBUcmFuc2Zvcm0odGhpcy5rICogaywgdGhpcy54LCB0aGlzLnkpO1xuICB9LFxuICB0cmFuc2xhdGU6IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4geCA9PT0gMCAmIHkgPT09IDAgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmssIHRoaXMueCArIHRoaXMuayAqIHgsIHRoaXMueSArIHRoaXMuayAqIHkpO1xuICB9LFxuICBhcHBseTogZnVuY3Rpb24ocG9pbnQpIHtcbiAgICByZXR1cm4gW3BvaW50WzBdICogdGhpcy5rICsgdGhpcy54LCBwb2ludFsxXSAqIHRoaXMuayArIHRoaXMueV07XG4gIH0sXG4gIGFwcGx5WDogZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4ICogdGhpcy5rICsgdGhpcy54O1xuICB9LFxuICBhcHBseVk6IGZ1bmN0aW9uKHkpIHtcbiAgICByZXR1cm4geSAqIHRoaXMuayArIHRoaXMueTtcbiAgfSxcbiAgaW52ZXJ0OiBmdW5jdGlvbihsb2NhdGlvbikge1xuICAgIHJldHVybiBbKGxvY2F0aW9uWzBdIC0gdGhpcy54KSAvIHRoaXMuaywgKGxvY2F0aW9uWzFdIC0gdGhpcy55KSAvIHRoaXMua107XG4gIH0sXG4gIGludmVydFg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gKHggLSB0aGlzLngpIC8gdGhpcy5rO1xuICB9LFxuICBpbnZlcnRZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuICh5IC0gdGhpcy55KSAvIHRoaXMuaztcbiAgfSxcbiAgcmVzY2FsZVg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geC5jb3B5KCkuZG9tYWluKHgucmFuZ2UoKS5tYXAodGhpcy5pbnZlcnRYLCB0aGlzKS5tYXAoeC5pbnZlcnQsIHgpKTtcbiAgfSxcbiAgcmVzY2FsZVk6IGZ1bmN0aW9uKHkpIHtcbiAgICByZXR1cm4geS5jb3B5KCkuZG9tYWluKHkucmFuZ2UoKS5tYXAodGhpcy5pbnZlcnRZLCB0aGlzKS5tYXAoeS5pbnZlcnQsIHkpKTtcbiAgfSxcbiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHRoaXMueCArIFwiLFwiICsgdGhpcy55ICsgXCIpIHNjYWxlKFwiICsgdGhpcy5rICsgXCIpXCI7XG4gIH1cbn07XG5cbmV4cG9ydCB2YXIgaWRlbnRpdHkgPSBuZXcgVHJhbnNmb3JtKDEsIDAsIDApO1xuXG50cmFuc2Zvcm0ucHJvdG90eXBlID0gVHJhbnNmb3JtLnByb3RvdHlwZTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNmb3JtKG5vZGUpIHtcbiAgd2hpbGUgKCFub2RlLl9fem9vbSkgaWYgKCEobm9kZSA9IG5vZGUucGFyZW50Tm9kZSkpIHJldHVybiBpZGVudGl0eTtcbiAgcmV0dXJuIG5vZGUuX196b29tO1xufVxuIiwiXG4vKlxuICBDUFRNYXRoIFN0YXRpYyBDbGFzcyAtIE5vdCBpbnRlbmRlZCBmb3IgaW5zdGFudGlhdGlvbiFcblxuICBWYXJpYWJsZXM6XG4gICAgeCA9IG9iamVjdGl2ZSB2YWx1ZVxuICAgIHYgPSBzdWJqZWN0aXZlIHZhbHVlXG4gICAgcCA9IG9iamVjdGl2ZSBwcm9iYWJpbGl0eVxuICAgIHcgPSBzdWJqZWN0aXZlIHByb2JhYmlsaXR5L2RlY2lzaW9uIHdlaWdodFxuICAgIHUgPSBzdWJqZWN0aXZlIHV0aWxpdHlcblxuICAgIGEgPSBhbHBoYSAoY3VydmF0dXJlIGZvciB2YWx1ZSBmdW5jdGlvbilcbiAgICBsID0gbGFtYmRhIChsb3NzIGF2ZXJzaW9uIGZvciB2YWx1ZSBmdW5jdGlvbilcbiAgICBnID0gZ2FtbWEgKHNlbnNpdGl2aXR5IGZvciBkZWNpc2lvbiB3ZWlnaHRpbmcgZnVuY3Rpb24pXG5cbiAgRXF1YXRpb25zOlxuICAgIHYgPSBpZiAoeCA+PSAwKSB4XmE7IGlmICh4IDwgMCkgLWwgKiAoLXgpXmFcbiAgICBhID0gaWYgKHggPj0gMCkgbG9nKHYpIC8gbG9nKHgpOyBpZiAoeCA8IDApIChsb2coLXYpIC0gbG9nKGwpKSAvIGxvZygteClcbiAgICBsID0gaWYgKHggPj0gMCkgMTsgaWYgKHggPCAwKSAtdiAvICgteCleYVxuXG4gICAgdyA9IHBeZyAvIChwXmcgKyAoMSAtIHApXmcpXigxIC8gZylcblxuICAgIHUgPSBTdW1fbih2X24gKiB3X24pXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ1BUTWF0aCB7XG4gIHN0YXRpYyB4YWwydih4LCBhLCBsKSB7XG4gICAgaWYgKHggPj0gMCkge1xuICAgICAgcmV0dXJuIHggKiogYTtcbiAgICB9XG4gICAgLy8gZWxzZSAoeCA8IDApXG4gICAgcmV0dXJuIC1sICogKCgteCkgKiogYSk7XG4gIH1cblxuICBzdGF0aWMgeGx2MmEoeCwgbCwgdikge1xuICAgIGlmICh4ID49IDApIHtcbiAgICAgIHJldHVybiBNYXRoLmxvZyh2KSAvIE1hdGgubG9nKHgpO1xuICAgIH1cbiAgICAvLyBlbHNlICh4IDwgMClcbiAgICByZXR1cm4gKE1hdGgubG9nKC12KSAtIE1hdGgubG9nKGwpKSAvIE1hdGgubG9nKC14KTtcbiAgfVxuXG4gIHN0YXRpYyB4YXYybCh4LCBhLCB2KSB7XG4gICAgaWYgKHggPj0gMCkge1xuICAgICAgcmV0dXJuIE5hTjtcbiAgICB9XG4gICAgLy8gZWxzZSAoeCA8IDApXG4gICAgcmV0dXJuIC12IC8gKCgteCkgKiogYSk7XG4gIH1cblxuICBzdGF0aWMgcGcydyhwLCBnKSB7XG4gICAgcmV0dXJuIChwICoqIGcpIC8gKCgocCAqKiBnKSArICgoMSAtIHApICoqIGcpKSAqKiAoMSAvIGcpKTtcbiAgfVxuXG4gIHN0YXRpYyB2dzJ1KHYsIHcpIHtcbiAgICAvLyBOdW1iZXJzXG4gICAgaWYgKHR5cGVvZiB2ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgdyA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB2ICogdztcbiAgICB9XG4gICAgLy8gQXJyYXlzXG4gICAgaWYgKHYgaW5zdGFuY2VvZiBBcnJheSAmJiB3IGluc3RhbmNlb2YgQXJyYXkgJiYgdi5sZW5ndGggPiAwICYmIHYubGVuZ3RoID09PSB3Lmxlbmd0aCkge1xuICAgICAgbGV0IHUgPSAwO1xuICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB2Lmxlbmd0aDsgbiArPSAxKSB7XG4gICAgICAgIHUgKz0gdltuXSAqIHdbbl07XG4gICAgICB9XG4gICAgICByZXR1cm4gdTtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlXG4gICAgcmV0dXJuIE5hTjtcbiAgfVxufVxuIiwiXG4vLyBJbnRlcm5hbCBkZXBlbmRlbmNpZXNcbmltcG9ydCBDUFRNYXRoIGZyb20gJy4vY3B0LW1hdGgnO1xuXG5leHBvcnQgZGVmYXVsdCBDUFRNYXRoO1xuIiwiLyogZXNsaW50IG5vLXJlc3RyaWN0ZWQtZ2xvYmFsczogW1wib2ZmXCIsIFwic2VsZlwiXSAqL1xuXG4vLyBOZWVkZWQgZm9yIGQzIGluIFdlYldvcmtlciFcbmltcG9ydCAncmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lJztcblxuaW1wb3J0ICogYXMgQmF5ZXNEaXN0cmlidXRpb25zIGZyb20gJ2JheWVzLmpzL2Rpc3RyaWJ1dGlvbnMnO1xuaW1wb3J0ICogYXMgQmF5ZXNNY21jIGZyb20gJ2JheWVzLmpzL21jbWMnO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IENQVE1hdGggZnJvbSAnQGRlY2lkYWJsZXMvcHJvc3BlY3RhYmxlLW1hdGgnO1xuXG5zZWxmLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICBjb25zdCBwYXJhbXMgPSB7XG4gICAgYWxwaGE6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiAwLCB1cHBlcjogMX0sXG4gICAgbGFtYmRhOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogMCwgdXBwZXI6IDEwfSxcbiAgICBnYW1tYToge3R5cGU6ICdyZWFsJywgbG93ZXI6IDAsIHVwcGVyOiAxfSxcbiAgICBsdWNlOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogMCwgdXBwZXI6IDEwMH0sXG4gIH07XG5cbiAgY29uc3QgbG9nUG9zdCA9IChzdGF0ZSwgZGF0YSkgPT4ge1xuICAgIGxldCBscCA9IDA7XG5cbiAgICAvLyBQcmlvcnNcbiAgICBjb25zdCBhbHBoYU1lYW4gPSAwLjU7XG4gICAgY29uc3QgYWxwaGFTYW1wbGVTaXplID0gMi41O1xuICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5iZXRhKFxuICAgICAgc3RhdGUuYWxwaGEsXG4gICAgICBhbHBoYU1lYW4gKiBhbHBoYVNhbXBsZVNpemUsXG4gICAgICAoMSAtIGFscGhhTWVhbikgKiBhbHBoYVNhbXBsZVNpemUsXG4gICAgKTtcbiAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5hbHBoYSwgMCwgMSk7XG5cbiAgICBjb25zdCBsYW1iZGFNZWFuID0gMjtcbiAgICBjb25zdCBsYW1iZGFTaGFwZSA9IDM7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmdhbW1hKFxuICAgICAgc3RhdGUubGFtYmRhLFxuICAgICAgbGFtYmRhU2hhcGUsXG4gICAgICBsYW1iZGFTaGFwZSAvIGxhbWJkYU1lYW4sXG4gICAgKTtcbiAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5sYW1iZGEsIDAsIDEwKTtcblxuICAgIGNvbnN0IGdhbW1hTWVhbiA9IDAuNTtcbiAgICBjb25zdCBnYW1tYVNhbXBsZVNpemUgPSAyLjU7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmJldGEoXG4gICAgICBzdGF0ZS5nYW1tYSxcbiAgICAgIGdhbW1hTWVhbiAqIGdhbW1hU2FtcGxlU2l6ZSxcbiAgICAgICgxIC0gZ2FtbWFNZWFuKSAqIGdhbW1hU2FtcGxlU2l6ZSxcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmdhbW1hLCAwLCAxKTtcblxuICAgIGNvbnN0IGx1Y2VNZWFuID0gMjtcbiAgICBjb25zdCBsdWNlU2hhcGUgPSAzO1xuICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5nYW1tYShcbiAgICAgIHN0YXRlLmx1Y2UsXG4gICAgICBsdWNlU2hhcGUsXG4gICAgICBsdWNlU2hhcGUgLyBsdWNlTWVhbixcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmx1Y2UsIDAsIDEwMCk7XG5cbiAgICAvLyBMaWtlbGlob29kXG4gICAgZGF0YS5mb3JFYWNoKChjaG9pY2UpID0+IHtcbiAgICAgIC8vIFZhbHVlc1xuICAgICAgY29uc3QgdmwgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54bCwgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7XG4gICAgICBjb25zdCB2dyA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnh3LCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTtcbiAgICAgIGNvbnN0IHZzID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHMsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpO1xuXG4gICAgICAvLyBQcm9iYWJpbGl0aWVzXG4gICAgICBjb25zdCB3dyA9IENQVE1hdGgucGcydyhjaG9pY2UucHcsIHN0YXRlLmdhbW1hKTtcbiAgICAgIGNvbnN0IHdsID0gMSAtIHd3O1xuXG4gICAgICAvLyBVdGlsaXRpZXNcbiAgICAgIGNvbnN0IHVnID0gd2wgKiB2bCArIHd3ICogdnc7XG4gICAgICBjb25zdCB1cyA9IHZzO1xuXG4gICAgICAvLyBDaG9pY2Ugb2YgZ2FtYmxlIG9yIHN1cmUgaXMgc2FtcGxlZCBmcm9tIGEgQmVybm91bGxpIGRpc3RyaWJ1dGlvblxuICAgICAgLy8gTHVjZSBjaG9pY2UgcnVsZSBpcyB1c2VkIHRvIGNvbXB1dGUgcHJvYmFiaWxpdHkgb2YgZ2FtYmxpbmchICgwID0gc3VyZSwgMSA9IGdhbWJsZSlcbiAgICAgIGNvbnN0IGJpbnZhbCA9IDEgLyAoMSArIE1hdGguZXhwKHN0YXRlLmx1Y2UgKiAodXMgLSB1ZykpKTtcblxuICAgICAgLy8gQWN0dWFsIHJlc3BvbnNlXG4gICAgICBjb25zdCByZXNwb25zZSA9IChjaG9pY2UucmVzcG9uc2UgPT09ICdzdXJlJykgPyAwIDogMTtcblxuICAgICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmJlcm4ocmVzcG9uc2UsIGJpbnZhbCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbHA7XG4gIH07XG5cbiAgLy8gSW5pdGlhbGl6aW5nIHRoZSBzYW1wbGVyXG4gIGNvbnN0IHNhbXBsZXIgPSBuZXcgQmF5ZXNNY21jLkFtd2dTYW1wbGVyKHBhcmFtcywgbG9nUG9zdCwgZXZlbnQuZGF0YSk7XG4gIC8vIEJ1cm5pbmcgc29tZSBzYW1wbGVzIHRvIHRoZSBNQ01DIGdvZHMgYW5kIHNhbXBsaW5nIDUwMDAgZHJhd3NcbiAgc2FtcGxlci5idXJuKDEwMDApO1xuICBjb25zdCBzYW1wbGVzID0gc2FtcGxlci5zYW1wbGUoNTAwMCk7XG5cbiAgLy8gRXh0cmFjdCBzdW1tYXJ5IHN0YXRzXG4gIGNvbnN0IHJlc3VsdHMgPSB7XG4gICAgYWxwaGE6IGQzLm1lZGlhbihzYW1wbGVzLmFscGhhKSxcbiAgICBsYW1iZGE6IGQzLm1lZGlhbihzYW1wbGVzLmxhbWJkYSksXG4gICAgZ2FtbWE6IGQzLm1lZGlhbihzYW1wbGVzLmdhbW1hKSxcbiAgICBsdWNlOiBkMy5tZWRpYW4oc2FtcGxlcy5sdWNlKSxcbiAgfTtcblxuICBzZWxmLnBvc3RNZXNzYWdlKHtyZXN1bHRzOiByZXN1bHRzLCBzYW1wbGVzOiBzYW1wbGVzfSk7XG59O1xuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsImxkIiwidGhpcyIsImxnYW1tYSIsIngiLCJqIiwiY29mIiwic2VyIiwieHgiLCJ5IiwidG1wIiwibG9nIiwibGZhY3RvcmlhbCIsIm4iLCJOYU4iLCJsY2hvb3NlIiwiayIsImxiZXRhIiwiYSIsImIiLCJNYXRoIiwiZXhwIiwiYWJzIiwicG93Iiwic3FydCIsInBpIiwiUEkiLCJiZXRhIiwic2hhcGUxIiwic2hhcGUyIiwiSW5maW5pdHkiLCJjYXVjaHkiLCJsb2NhdGlvbiIsInNjYWxlIiwibm9ybSIsIm1lYW4iLCJzZCIsImJpdmFybm9ybSIsImNvcnIiLCJ6Iiwibm9ybWFsaXppbmdfZmFjdG9yIiwiYml2YXJfbG9nX2RlbnMiLCJsYXBsYWNlIiwiZGV4cCIsImdhbW1hIiwic2hhcGUiLCJyYXRlIiwiaW52Z2FtbWEiLCJsbm9ybSIsIm1lYW5sb2ciLCJzZGxvZyIsInBhcmV0byIsInQiLCJkZiIsIndlaWJ1bGwiLCJ0bXAxIiwidG1wMiIsImxvZ2lzIiwiZSIsImYiLCJkaXJpY2hsZXQiLCJhbHBoYSIsInN1bV9hbHBoYSIsInN1bV9sZ2FtbWFfYWxwaGEiLCJzdW1fYWxwaGFfc3ViXzFfbG9nX3giLCJsZW5ndGgiLCJpIiwidW5pZiIsIm1pbiIsIm1heCIsImJlcm4iLCJwcm9iIiwiY2F0IiwicHJvYnMiLCJiaW5vbSIsInNpemUiLCJuYmlub20iLCJoeXBlciIsIm0iLCJwb2lzIiwibGFtYmRhIiwibWNtYyIsInJ1bmlmIiwicmFuZG9tIiwicnVuaWZfZGlzY3JldGUiLCJmbG9vciIsInJub3JtIiwidSIsInYiLCJxIiwiZGVlcF9jbG9uZSIsInNyYyIsIm1peGluIiwiZGVzdCIsInNvdXJjZSIsImNvcHlGdW5jIiwibmFtZSIsInMiLCJlbXB0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIm5vZGVUeXBlIiwiY2xvbmVOb2RlIiwiRGF0ZSIsImdldFRpbWUiLCJSZWdFeHAiLCJyIiwibCIsIkFycmF5IiwicHVzaCIsImNvbnN0cnVjdG9yIiwiY2xvbmVfcGFyYW1fZHJhdyIsImlzQXJyYXkiLCJ4X2NvcHkiLCJzbGljZSIsImlzX251bWJlciIsIm9iamVjdCIsIk51bWJlciIsImNyZWF0ZV9hcnJheSIsImRpbSIsImluaXQiLCJhcnIiLCJhcnJheV9kaW0iLCJjb25jYXQiLCJhcnJheV9lcXVhbCIsImExIiwiYTIiLCJuZXN0ZWRfYXJyYXlfYXBwbHkiLCJmdW4iLCJyZXN1bHQiLCJzaHVmZmxlX2FycmF5IiwiYXJyYXkiLCJ0ZW1wIiwibmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSIsImxlbiIsImFycmF5X2lzIiwiYXJyYXlfaSIsImdldF9vcHRpb24iLCJvcHRpb25fbmFtZSIsIm9wdGlvbnMiLCJkZWZhdWxfdmFsdWUiLCJoYXNPd25Qcm9wZXJ0eSIsInVuZGVmaW5lZCIsImdldF9tdWx0aWRpbV9vcHRpb24iLCJ2YWx1ZSIsInBhcmFtX2luaXRfZml4ZWQiLCJ0eXBlIiwibG93ZXIiLCJ1cHBlciIsInJvdW5kIiwiY29tcGxldGVfcGFyYW1zIiwicGFyYW1zX3RvX2NvbXBsZXRlIiwicGFyYW1faW5pdCIsInBhcmFtcyIsInBhcmFtX25hbWUiLCJwYXJhbSIsIlN0ZXBwZXIiLCJzdGF0ZSIsImxvZ19wb3N0Iiwic3RlcCIsInN0YXJ0X2FkYXB0YXRpb24iLCJzdG9wX2FkYXB0YXRpb24iLCJpbmZvIiwiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIiLCJnZW5lcmF0ZV9wcm9wb3NhbCIsInBhcmFtX25hbWVzIiwia2V5cyIsInByb3BfbG9nX3NjYWxlIiwiYmF0Y2hfc2l6ZSIsIm1heF9hZGFwdGF0aW9uIiwiaW5pdGlhbF9hZGFwdGF0aW9uIiwidGFyZ2V0X2FjY2VwdF9yYXRlIiwiaXNfYWRhcHRpbmciLCJhY2NlcHRhbmNlX2NvdW50IiwiYmF0Y2hfY291bnQiLCJpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uIiwiY3JlYXRlIiwicGFyYW1fc3RhdGUiLCJwYXJhbV9wcm9wb3NhbCIsImN1cnJfbG9nX2RlbnMiLCJwcm9wX2xvZ19kZW5zIiwiYWNjZXB0X3Byb2IiLCJsb2dfc2RfYWRqdXN0bWVudCIsIm5vcm1hbF9wcm9wb3NhbCIsIlJlYWxNZXRyb3BvbGlzU3RlcHBlciIsImRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCIsIkludE1ldHJvcG9saXNTdGVwcGVyIiwiTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciIsIlN1YlN0ZXBwZXIiLCJjcmVhdGVfc3Vic3RlcHBlcnMiLCJzdWJzdGF0ZSIsInN1YnN0ZXBwZXJzIiwic3Vib3B0aW9ucyIsInN1YnBhcmFtIiwic3Vic3RlcHBlciIsIk11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciIsIkJpbmFyeVN0ZXBwZXIiLCJ6ZXJvX2xvZ19kZW5zIiwib25lX2xvZ19kZW5zIiwibWF4X2xvZ19kZW5zIiwiemVyb19wcm9iIiwiQmluYXJ5Q29tcG9uZW50U3RlcHBlciIsInN1YnBhcmFtcyIsIkFtd2dTdGVwcGVyIiwiU2VsZWN0U3RlcHBlciIsInBhcmFtX29iamVjdF93cmFwIiwicGFyYW1fb3B0aW9ucyIsIlNhbXBsZXIiLCJkYXRhIiwicGFyYW1faW5pdF9mdW4iLCJ0aGlubmluZ19pbnRlcnZhbCIsInBhcmFtc190b19tb25pdG9yIiwidGhpbiIsIm1vbml0b3IiLCJzdGVwcGVycyIsImNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlIiwic2FtcGxlIiwibl9pdGVyYXRpb25zIiwibW9uaXRvcmVkX3BhcmFtcyIsImN1cnJfc2FtcGxlIiwiYnVybiIsIkFtd2dTYW1wbGVyIiwiYXNjZW5kaW5nIiwibnVtYmVycyIsInZhbHVlcyIsInZhbHVlb2YiLCJjb21wYXJlRGVmaW5lZCIsImNvbXBhcmUiLCJhc2NlbmRpbmdEZWZpbmVkIiwiVHlwZUVycm9yIiwicXVpY2tzZWxlY3QiLCJsZWZ0IiwicmlnaHQiLCJuZXdMZWZ0IiwibmV3UmlnaHQiLCJzd2FwIiwicXVhbnRpbGUiLCJwIiwiRmxvYXQ2NEFycmF5IiwiZnJvbSIsImlzTmFOIiwiaTAiLCJ2YWx1ZTAiLCJzdWJhcnJheSIsInZhbHVlMSIsIm1lZGlhbiIsIm5vb3AiLCJkaXNwYXRjaCIsImFyZ3VtZW50cyIsIl8iLCJ0ZXN0IiwiRXJyb3IiLCJEaXNwYXRjaCIsInBhcnNlVHlwZW5hbWVzIiwidHlwZW5hbWVzIiwidHlwZXMiLCJ0cmltIiwic3BsaXQiLCJtYXAiLCJpbmRleE9mIiwib24iLCJ0eXBlbmFtZSIsImNhbGxiYWNrIiwiVCIsImdldCIsInNldCIsImNvcHkiLCJ0aGF0IiwiYXJncyIsImFwcGx5IiwiYyIsInhodG1sIiwic3ZnIiwieGxpbmsiLCJ4bWwiLCJ4bWxucyIsInByZWZpeCIsIm5hbWVzcGFjZXMiLCJzcGFjZSIsImxvY2FsIiwiY3JlYXRvckluaGVyaXQiLCJkb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJ1cmkiLCJuYW1lc3BhY2VVUkkiLCJkb2N1bWVudEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRvckZpeGVkIiwiZnVsbG5hbWUiLCJuYW1lc3BhY2UiLCJub25lIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwic2VsZWN0IiwiZ3JvdXBzIiwiX2dyb3VwcyIsInN1Ymdyb3VwcyIsImdyb3VwIiwic3ViZ3JvdXAiLCJub2RlIiwic3Vibm9kZSIsIl9fZGF0YV9fIiwiU2VsZWN0aW9uIiwiX3BhcmVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYXJyYXlBbGwiLCJzZWxlY3RvckFsbCIsInBhcmVudHMiLCJtYXRjaGVzIiwiY2hpbGRNYXRjaGVyIiwiZmluZCIsImNoaWxkRmluZCIsIm1hdGNoIiwiY2hpbGRyZW4iLCJjaGlsZEZpcnN0IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJmaWx0ZXIiLCJjaGlsZHJlbkZpbHRlciIsInNlbGVjdEFsbCIsIm1hdGNoZXIiLCJ1cGRhdGUiLCJfZW50ZXIiLCJzcGFyc2UiLCJFbnRlck5vZGUiLCJwYXJlbnQiLCJkYXR1bSIsIl9uZXh0IiwiX3BhcmVudCIsImFwcGVuZENoaWxkIiwiY2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJuZXh0IiwiYmluZEluZGV4IiwiZW50ZXIiLCJleGl0IiwiZ3JvdXBMZW5ndGgiLCJkYXRhTGVuZ3RoIiwiYmluZEtleSIsImtleSIsIm5vZGVCeUtleVZhbHVlIiwiTWFwIiwia2V5VmFsdWVzIiwia2V5VmFsdWUiLCJoYXMiLCJkZWxldGUiLCJiaW5kIiwiY29uc3RhbnQiLCJhcnJheWxpa2UiLCJlbnRlckdyb3VwIiwidXBkYXRlR3JvdXAiLCJleGl0R3JvdXAiLCJpMSIsInByZXZpb3VzIiwiX2V4aXQiLCJvbmVudGVyIiwib251cGRhdGUiLCJvbmV4aXQiLCJzZWxlY3Rpb24iLCJhcHBlbmQiLCJyZW1vdmUiLCJtZXJnZSIsIm9yZGVyIiwiY29udGV4dCIsImdyb3VwczAiLCJncm91cHMxIiwibTAiLCJtMSIsIm1lcmdlcyIsImdyb3VwMCIsImdyb3VwMSIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwicGFyZW50Tm9kZSIsImNvbXBhcmVOb2RlIiwic29ydGdyb3VwcyIsInNvcnRncm91cCIsInNvcnQiLCJhdHRyUmVtb3ZlIiwicmVtb3ZlQXR0cmlidXRlIiwiYXR0clJlbW92ZU5TIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJhdHRyQ29uc3RhbnQiLCJzZXRBdHRyaWJ1dGUiLCJhdHRyQ29uc3RhbnROUyIsInNldEF0dHJpYnV0ZU5TIiwiYXR0ckZ1bmN0aW9uIiwiYXR0ckZ1bmN0aW9uTlMiLCJnZXRBdHRyaWJ1dGVOUyIsImdldEF0dHJpYnV0ZSIsImVhY2giLCJkZWZhdWx0VmlldyIsInN0eWxlUmVtb3ZlIiwic3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsInN0eWxlQ29uc3RhbnQiLCJwcmlvcml0eSIsInNldFByb3BlcnR5Iiwic3R5bGVGdW5jdGlvbiIsInN0eWxlVmFsdWUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInByb3BlcnR5UmVtb3ZlIiwicHJvcGVydHlDb25zdGFudCIsInByb3BlcnR5RnVuY3Rpb24iLCJjbGFzc0FycmF5Iiwic3RyaW5nIiwiY2xhc3NMaXN0IiwiQ2xhc3NMaXN0IiwiX25vZGUiLCJfbmFtZXMiLCJhZGQiLCJqb2luIiwic3BsaWNlIiwiY29udGFpbnMiLCJjbGFzc2VkQWRkIiwibmFtZXMiLCJsaXN0IiwiY2xhc3NlZFJlbW92ZSIsImNsYXNzZWRUcnVlIiwiY2xhc3NlZEZhbHNlIiwiY2xhc3NlZEZ1bmN0aW9uIiwidGV4dFJlbW92ZSIsInRleHRDb250ZW50IiwidGV4dENvbnN0YW50IiwidGV4dEZ1bmN0aW9uIiwiaHRtbFJlbW92ZSIsImlubmVySFRNTCIsImh0bWxDb25zdGFudCIsImh0bWxGdW5jdGlvbiIsInJhaXNlIiwibmV4dFNpYmxpbmciLCJwcmV2aW91c1NpYmxpbmciLCJmaXJzdENoaWxkIiwiY3JlYXRvciIsImNvbnN0YW50TnVsbCIsImJlZm9yZSIsInJlbW92ZUNoaWxkIiwic2VsZWN0aW9uX2Nsb25lU2hhbGxvdyIsImNsb25lIiwic2VsZWN0aW9uX2Nsb25lRGVlcCIsImRlZXAiLCJwcm9wZXJ0eSIsImNvbnRleHRMaXN0ZW5lciIsImxpc3RlbmVyIiwiZXZlbnQiLCJvblJlbW92ZSIsIl9fb24iLCJvIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uQWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiLCJ3aW5kb3ciLCJDdXN0b21FdmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJkaXNwYXRjaENvbnN0YW50IiwiZGlzcGF0Y2hGdW5jdGlvbiIsInNlbGVjdGlvbl9zZWxlY3Rpb24iLCJzZWxlY3Rpb25fc2VsZWN0Iiwic2VsZWN0aW9uX3NlbGVjdEFsbCIsInNlbGVjdENoaWxkIiwic2VsZWN0aW9uX3NlbGVjdENoaWxkIiwic2VsZWN0Q2hpbGRyZW4iLCJzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4iLCJzZWxlY3Rpb25fZmlsdGVyIiwic2VsZWN0aW9uX2RhdGEiLCJzZWxlY3Rpb25fZW50ZXIiLCJzZWxlY3Rpb25fZXhpdCIsInNlbGVjdGlvbl9qb2luIiwic2VsZWN0aW9uX21lcmdlIiwic2VsZWN0aW9uX29yZGVyIiwic2VsZWN0aW9uX3NvcnQiLCJzZWxlY3Rpb25fY2FsbCIsIm5vZGVzIiwic2VsZWN0aW9uX25vZGVzIiwic2VsZWN0aW9uX25vZGUiLCJzZWxlY3Rpb25fc2l6ZSIsInNlbGVjdGlvbl9lbXB0eSIsInNlbGVjdGlvbl9lYWNoIiwiYXR0ciIsInNlbGVjdGlvbl9hdHRyIiwic2VsZWN0aW9uX3N0eWxlIiwic2VsZWN0aW9uX3Byb3BlcnR5IiwiY2xhc3NlZCIsInNlbGVjdGlvbl9jbGFzc2VkIiwidGV4dCIsInNlbGVjdGlvbl90ZXh0IiwiaHRtbCIsInNlbGVjdGlvbl9odG1sIiwic2VsZWN0aW9uX3JhaXNlIiwic2VsZWN0aW9uX2xvd2VyIiwic2VsZWN0aW9uX2FwcGVuZCIsImluc2VydCIsInNlbGVjdGlvbl9pbnNlcnQiLCJzZWxlY3Rpb25fcmVtb3ZlIiwic2VsZWN0aW9uX2Nsb25lIiwic2VsZWN0aW9uX2RhdHVtIiwic2VsZWN0aW9uX29uIiwic2VsZWN0aW9uX2Rpc3BhdGNoIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJzZWxlY3Rpb25faXRlcmF0b3IiLCJleHRlbmQiLCJkZWZpbml0aW9uIiwiQ29sb3IiLCJkYXJrZXIiLCJicmlnaHRlciIsInJlSSIsInJlTiIsInJlUCIsInJlSGV4IiwicmVSZ2JJbnRlZ2VyIiwicmVSZ2JQZXJjZW50IiwicmVSZ2JhSW50ZWdlciIsInJlUmdiYVBlcmNlbnQiLCJyZUhzbFBlcmNlbnQiLCJyZUhzbGFQZXJjZW50IiwibmFtZWQiLCJhbGljZWJsdWUiLCJhbnRpcXVld2hpdGUiLCJhcXVhIiwiYXF1YW1hcmluZSIsImF6dXJlIiwiYmVpZ2UiLCJiaXNxdWUiLCJibGFjayIsImJsYW5jaGVkYWxtb25kIiwiYmx1ZSIsImJsdWV2aW9sZXQiLCJicm93biIsImJ1cmx5d29vZCIsImNhZGV0Ymx1ZSIsImNoYXJ0cmV1c2UiLCJjaG9jb2xhdGUiLCJjb3JhbCIsImNvcm5mbG93ZXJibHVlIiwiY29ybnNpbGsiLCJjcmltc29uIiwiY3lhbiIsImRhcmtibHVlIiwiZGFya2N5YW4iLCJkYXJrZ29sZGVucm9kIiwiZGFya2dyYXkiLCJkYXJrZ3JlZW4iLCJkYXJrZ3JleSIsImRhcmtraGFraSIsImRhcmttYWdlbnRhIiwiZGFya29saXZlZ3JlZW4iLCJkYXJrb3JhbmdlIiwiZGFya29yY2hpZCIsImRhcmtyZWQiLCJkYXJrc2FsbW9uIiwiZGFya3NlYWdyZWVuIiwiZGFya3NsYXRlYmx1ZSIsImRhcmtzbGF0ZWdyYXkiLCJkYXJrc2xhdGVncmV5IiwiZGFya3R1cnF1b2lzZSIsImRhcmt2aW9sZXQiLCJkZWVwcGluayIsImRlZXBza3libHVlIiwiZGltZ3JheSIsImRpbWdyZXkiLCJkb2RnZXJibHVlIiwiZmlyZWJyaWNrIiwiZmxvcmFsd2hpdGUiLCJmb3Jlc3RncmVlbiIsImZ1Y2hzaWEiLCJnYWluc2Jvcm8iLCJnaG9zdHdoaXRlIiwiZ29sZCIsImdvbGRlbnJvZCIsImdyYXkiLCJncmVlbiIsImdyZWVueWVsbG93IiwiZ3JleSIsImhvbmV5ZGV3IiwiaG90cGluayIsImluZGlhbnJlZCIsImluZGlnbyIsIml2b3J5Iiwia2hha2kiLCJsYXZlbmRlciIsImxhdmVuZGVyYmx1c2giLCJsYXduZ3JlZW4iLCJsZW1vbmNoaWZmb24iLCJsaWdodGJsdWUiLCJsaWdodGNvcmFsIiwibGlnaHRjeWFuIiwibGlnaHRnb2xkZW5yb2R5ZWxsb3ciLCJsaWdodGdyYXkiLCJsaWdodGdyZWVuIiwibGlnaHRncmV5IiwibGlnaHRwaW5rIiwibGlnaHRzYWxtb24iLCJsaWdodHNlYWdyZWVuIiwibGlnaHRza3libHVlIiwibGlnaHRzbGF0ZWdyYXkiLCJsaWdodHNsYXRlZ3JleSIsImxpZ2h0c3RlZWxibHVlIiwibGlnaHR5ZWxsb3ciLCJsaW1lIiwibGltZWdyZWVuIiwibGluZW4iLCJtYWdlbnRhIiwibWFyb29uIiwibWVkaXVtYXF1YW1hcmluZSIsIm1lZGl1bWJsdWUiLCJtZWRpdW1vcmNoaWQiLCJtZWRpdW1wdXJwbGUiLCJtZWRpdW1zZWFncmVlbiIsIm1lZGl1bXNsYXRlYmx1ZSIsIm1lZGl1bXNwcmluZ2dyZWVuIiwibWVkaXVtdHVycXVvaXNlIiwibWVkaXVtdmlvbGV0cmVkIiwibWlkbmlnaHRibHVlIiwibWludGNyZWFtIiwibWlzdHlyb3NlIiwibW9jY2FzaW4iLCJuYXZham93aGl0ZSIsIm5hdnkiLCJvbGRsYWNlIiwib2xpdmUiLCJvbGl2ZWRyYWIiLCJvcmFuZ2UiLCJvcmFuZ2VyZWQiLCJvcmNoaWQiLCJwYWxlZ29sZGVucm9kIiwicGFsZWdyZWVuIiwicGFsZXR1cnF1b2lzZSIsInBhbGV2aW9sZXRyZWQiLCJwYXBheWF3aGlwIiwicGVhY2hwdWZmIiwicGVydSIsInBpbmsiLCJwbHVtIiwicG93ZGVyYmx1ZSIsInB1cnBsZSIsInJlYmVjY2FwdXJwbGUiLCJyZWQiLCJyb3N5YnJvd24iLCJyb3lhbGJsdWUiLCJzYWRkbGVicm93biIsInNhbG1vbiIsInNhbmR5YnJvd24iLCJzZWFncmVlbiIsInNlYXNoZWxsIiwic2llbm5hIiwic2lsdmVyIiwic2t5Ymx1ZSIsInNsYXRlYmx1ZSIsInNsYXRlZ3JheSIsInNsYXRlZ3JleSIsInNub3ciLCJzcHJpbmdncmVlbiIsInN0ZWVsYmx1ZSIsInRhbiIsInRlYWwiLCJ0aGlzdGxlIiwidG9tYXRvIiwidHVycXVvaXNlIiwidmlvbGV0Iiwid2hlYXQiLCJ3aGl0ZSIsIndoaXRlc21va2UiLCJ5ZWxsb3ciLCJ5ZWxsb3dncmVlbiIsImRlZmluZSIsImNvbG9yIiwiY2hhbm5lbHMiLCJhc3NpZ24iLCJkaXNwbGF5YWJsZSIsInJnYiIsImhleCIsImNvbG9yX2Zvcm1hdEhleCIsImZvcm1hdEhleCIsImZvcm1hdEhleDgiLCJjb2xvcl9mb3JtYXRIZXg4IiwiZm9ybWF0SHNsIiwiY29sb3JfZm9ybWF0SHNsIiwiZm9ybWF0UmdiIiwiY29sb3JfZm9ybWF0UmdiIiwiaHNsQ29udmVydCIsImZvcm1hdCIsInRvTG93ZXJDYXNlIiwiZXhlYyIsInBhcnNlSW50IiwicmdibiIsIlJnYiIsInJnYmEiLCJoc2xhIiwiZyIsInJnYkNvbnZlcnQiLCJvcGFjaXR5IiwiY2xhbXAiLCJjbGFtcGkiLCJjbGFtcGEiLCJyZ2JfZm9ybWF0SGV4IiwicmdiX2Zvcm1hdEhleDgiLCJyZ2JfZm9ybWF0UmdiIiwiaCIsIkhzbCIsImhzbCIsIm0yIiwiaHNsMnJnYiIsImNsYW1waCIsImNsYW1wdCIsImxpbmVhciIsImQiLCJleHBvbmVudGlhbCIsIm5vZ2FtbWEiLCJyZ2JHYW1tYSIsInN0YXJ0IiwiZW5kIiwiY29sb3JSZ2IiLCJyZUEiLCJyZUIiLCJ6ZXJvIiwib25lIiwiYmkiLCJsYXN0SW5kZXgiLCJhbSIsImJtIiwiYnMiLCJpbmRleCIsIm51bWJlciIsImRlZ3JlZXMiLCJpZGVudGl0eSIsInRyYW5zbGF0ZVgiLCJ0cmFuc2xhdGVZIiwicm90YXRlIiwic2tld1giLCJzY2FsZVgiLCJzY2FsZVkiLCJhdGFuMiIsImF0YW4iLCJzdmdOb2RlIiwicGFyc2VDc3MiLCJET01NYXRyaXgiLCJXZWJLaXRDU1NNYXRyaXgiLCJpc0lkZW50aXR5IiwiZGVjb21wb3NlIiwicGFyc2VTdmciLCJ0cmFuc2Zvcm0iLCJiYXNlVmFsIiwiY29uc29saWRhdGUiLCJtYXRyaXgiLCJpbnRlcnBvbGF0ZVRyYW5zZm9ybSIsInBhcnNlIiwicHhDb21tYSIsInB4UGFyZW4iLCJkZWdQYXJlbiIsInBvcCIsInRyYW5zbGF0ZSIsInhhIiwieWEiLCJ4YiIsInliIiwiaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MiLCJpbnRlcnBvbGF0ZVRyYW5zZm9ybVN2ZyIsImZyYW1lIiwidGltZW91dCIsImludGVydmFsIiwicG9rZURlbGF5IiwidGFza0hlYWQiLCJ0YXNrVGFpbCIsImNsb2NrTGFzdCIsImNsb2NrTm93IiwiY2xvY2tTa2V3IiwiY2xvY2siLCJwZXJmb3JtYW5jZSIsIm5vdyIsInNldEZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCIsImNsZWFyTm93IiwiVGltZXIiLCJfY2FsbCIsIl90aW1lIiwidGltZXIiLCJyZXN0YXJ0IiwiZGVsYXkiLCJ0aW1lIiwic2xlZXAiLCJzdG9wIiwidGltZXJGbHVzaCIsIndha2UiLCJuYXAiLCJwb2tlIiwidDAiLCJ0MSIsInQyIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiZWxhcHNlZCIsImVtcHR5T24iLCJlbXB0eVR3ZWVuIiwiQ1JFQVRFRCIsIlNDSEVEVUxFRCIsIlNUQVJUSU5HIiwiU1RBUlRFRCIsIlJVTk5JTkciLCJFTkRJTkciLCJFTkRFRCIsImlkIiwidGltaW5nIiwic2NoZWR1bGVzIiwiX190cmFuc2l0aW9uIiwidHdlZW4iLCJkdXJhdGlvbiIsImVhc2UiLCJzY2hlZHVsZSIsInNlbGYiLCJ0aWNrIiwiYWN0aXZlIiwiaW50ZXJydXB0IiwidHdlZW5SZW1vdmUiLCJ0d2VlbjAiLCJ0d2VlbjEiLCJ0d2VlbkZ1bmN0aW9uIiwiX2lkIiwidHdlZW5WYWx1ZSIsInRyYW5zaXRpb24iLCJpbnRlcnBvbGF0ZU51bWJlciIsImludGVycG9sYXRlUmdiIiwiaW50ZXJwb2xhdGVTdHJpbmciLCJpbnRlcnBvbGF0ZSIsInN0cmluZzAwIiwic3RyaW5nMSIsImludGVycG9sYXRlMCIsInN0cmluZzAiLCJzdHJpbmcxMCIsImF0dHJUd2VlbiIsImF0dHJJbnRlcnBvbGF0ZSIsImF0dHJJbnRlcnBvbGF0ZU5TIiwiYXR0clR3ZWVuTlMiLCJfdmFsdWUiLCJkZWxheUZ1bmN0aW9uIiwiZGVsYXlDb25zdGFudCIsImR1cmF0aW9uRnVuY3Rpb24iLCJkdXJhdGlvbkNvbnN0YW50IiwiZWFzZUNvbnN0YW50IiwiZWFzZVZhcnlpbmciLCJUcmFuc2l0aW9uIiwiX25hbWUiLCJldmVyeSIsIm9uRnVuY3Rpb24iLCJvbjAiLCJvbjEiLCJzaXQiLCJyZW1vdmVGdW5jdGlvbiIsImluaGVyaXQiLCJzdHlsZU51bGwiLCJzdHlsZU1heWJlUmVtb3ZlIiwibGlzdGVuZXIwIiwic3R5bGVUd2VlbiIsInN0eWxlSW50ZXJwb2xhdGUiLCJ0ZXh0SW50ZXJwb2xhdGUiLCJ0ZXh0VHdlZW4iLCJpZDAiLCJpZDEiLCJuZXdJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2FuY2VsIiwic2VsZWN0aW9uX3Byb3RvdHlwZSIsInRyYW5zaXRpb25fc2VsZWN0IiwidHJhbnNpdGlvbl9zZWxlY3RBbGwiLCJ0cmFuc2l0aW9uX2ZpbHRlciIsInRyYW5zaXRpb25fbWVyZ2UiLCJ0cmFuc2l0aW9uX3NlbGVjdGlvbiIsInRyYW5zaXRpb25fdHJhbnNpdGlvbiIsInRyYW5zaXRpb25fb24iLCJ0cmFuc2l0aW9uX2F0dHIiLCJ0cmFuc2l0aW9uX2F0dHJUd2VlbiIsInRyYW5zaXRpb25fc3R5bGUiLCJ0cmFuc2l0aW9uX3N0eWxlVHdlZW4iLCJ0cmFuc2l0aW9uX3RleHQiLCJ0cmFuc2l0aW9uX3RleHRUd2VlbiIsInRyYW5zaXRpb25fcmVtb3ZlIiwidHJhbnNpdGlvbl90d2VlbiIsInRyYW5zaXRpb25fZGVsYXkiLCJ0cmFuc2l0aW9uX2R1cmF0aW9uIiwidHJhbnNpdGlvbl9lYXNlIiwidHJhbnNpdGlvbl9lYXNlVmFyeWluZyIsInRyYW5zaXRpb25fZW5kIiwiY3ViaWNJbk91dCIsImRlZmF1bHRUaW1pbmciLCJlYXNlQ3ViaWNJbk91dCIsInNlbGVjdGlvbl9pbnRlcnJ1cHQiLCJzZWxlY3Rpb25fdHJhbnNpdGlvbiIsIlRyYW5zZm9ybSIsInBvaW50IiwiYXBwbHlYIiwiYXBwbHlZIiwiaW52ZXJ0IiwiaW52ZXJ0WCIsImludmVydFkiLCJyZXNjYWxlWCIsImRvbWFpbiIsInJhbmdlIiwicmVzY2FsZVkiLCJDUFRNYXRoIiwieGFsMnYiLCJ4bHYyYSIsInhhdjJsIiwicGcydyIsInZ3MnUiLCJ3Iiwib25tZXNzYWdlIiwibHVjZSIsImxvZ1Bvc3QiLCJscCIsImFscGhhTWVhbiIsImFscGhhU2FtcGxlU2l6ZSIsIkJheWVzRGlzdHJpYnV0aW9ucyIsImxhbWJkYU1lYW4iLCJsYW1iZGFTaGFwZSIsImdhbW1hTWVhbiIsImdhbW1hU2FtcGxlU2l6ZSIsImx1Y2VNZWFuIiwibHVjZVNoYXBlIiwiZm9yRWFjaCIsImNob2ljZSIsInZsIiwieGwiLCJ2dyIsInh3IiwidnMiLCJ4cyIsInd3IiwicHciLCJ3bCIsInVnIiwidXMiLCJiaW52YWwiLCJyZXNwb25zZSIsInNhbXBsZXIiLCJCYXllc01jbWMiLCJzYW1wbGVzIiwicmVzdWx0cyIsImQzIiwicG9zdE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0VBR0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0VBT0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0lBQ0MsQ0FBVUEsVUFBQUEsSUFBSSxFQUFFQyxPQUFPLEVBQUU7TUFJZixJQUFrQ0MsTUFBTSxDQUFDQyxPQUFPLEVBQUU7RUFDN0Q7RUFDQTtFQUNBO0VBQ1FELE1BQUFBLE1BQUEsQ0FBQUMsT0FBQSxHQUFpQkYsT0FBTyxFQUFFO0VBQ2xDLEtBQUssTUFBTTtFQUNYO0VBQ1FELE1BQUFBLElBQUksQ0FBQ0ksRUFBRSxHQUFHSCxPQUFPLEVBQUU7RUFDeEI7S0FDRixFQUFDSSxhQUFJLEVBQUUsWUFBVztFQUNuQjtNQUNFLElBQUlELEVBQUUsR0FBSSxFQUFFOztFQUVkO0VBQ0E7O0VBRUUsSUFBQSxJQUFJRSxNQUFNLEdBQUcsVUFBU0MsQ0FBQyxFQUFFO1FBQ3ZCLElBQUlDLENBQUMsR0FBRyxD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LENBQUN0dEIsTUFBTSxDQUFDLElBQUksQ0FBQzs7RUFFcEM7RUFDQSxFQUFBLE1BQU15dEIsT0FBTyxHQUFHO01BQ2R2M0IsS0FBSyxFQUFFdzNCLE1BQVMsQ0FBQ0YsT0FBTyxDQUFDdDNCLEtBQUssQ0FBQztNQUMvQm1CLE1BQU0sRUFBRXEyQixNQUFTLENBQUNGLE9BQU8sQ0FBQ24yQixNQUFNLENBQUM7TUFDakNwQyxLQUFLLEVBQUV5NEIsTUFBUyxDQUFDRixPQUFPLENBQUN2NEIsS0FBSyxDQUFDO0VBQy9CMDJCLElBQUFBLElBQUksRUFBRStCLE1BQVMsQ0FBQ0YsT0FBTyxDQUFDN0IsSUFBSTtLQUM3QjtJQUVEbkcsSUFBSSxDQUFDbUksV0FBVyxDQUFDO0VBQUNGLElBQUFBLE9BQU8sRUFBRUEsT0FBTztFQUFFRCxJQUFBQSxPQUFPLEVBQUVBO0VBQU8sR0FBQyxDQUFDO0VBQ3hELENBQUM7Ozs7OzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MSw0Miw0Myw0NCw0NSw0Niw0Nyw0OCw0OSw1MCw1MSw1Miw1Myw1NCw1NSw1Niw1Nyw1OCw1OSw2MCw2MSw2Miw2Myw2NCw2NSw2Niw2Nyw2OCw2OSw3MCw3MSw3Miw3Myw3NCw3NSw3Niw3Nyw3OCw3OSw4MCw4MSw4Miw4Myw4NCw4NSw4Niw4Nyw4OCw4OSw5MCw5MSw5Miw5Myw5NCw5NSw5Nl19");const MJ=o`
  /* inject:start */
.js-plotly-plot .plotly, .js-plotly-plot .plotly div {
  direction: ltr;
  font-family: "Open Sans", verdana, arial, sans-serif;
  margin: 0;
  padding: 0;
}
.js-plotly-plot .plotly input, .js-plotly-plot .plotly button {
  font-family: "Open Sans", verdana, arial, sans-serif;
}
.js-plotly-plot .plotly input:focus, .js-plotly-plot .plotly button:focus {
  outline: none;
}
.js-plotly-plot .plotly a {
  text-decoration: none;
}
.js-plotly-plot .plotly a:hover {
  text-decoration: none;
}
.js-plotly-plot .plotly .crisp {
  shape-rendering: crispEdges;
}
.js-plotly-plot .plotly .user-select-none {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
.js-plotly-plot .plotly svg a {
  fill: #447adb;
}
.js-plotly-plot .plotly svg a:hover {
  fill: #3c6dc5;
}
.js-plotly-plot .plotly .main-svg {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}
.js-plotly-plot .plotly .main-svg .draglayer {
  pointer-events: all;
}
.js-plotly-plot .plotly .cursor-default {
  cursor: default;
}
.js-plotly-plot .plotly .cursor-pointer {
  cursor: pointer;
}
.js-plotly-plot .plotly .cursor-crosshair {
  cursor: crosshair;
}
.js-plotly-plot .plotly .cursor-move {
  cursor: move;
}
.js-plotly-plot .plotly .cursor-col-resize {
  cursor: col-resize;
}
.js-plotly-plot .plotly .cursor-row-resize {
  cursor: row-resize;
}
.js-plotly-plot .plotly .cursor-ns-resize {
  cursor: ns-resize;
}
.js-plotly-plot .plotly .cursor-ew-resize {
  cursor: ew-resize;
}
.js-plotly-plot .plotly .cursor-sw-resize {
  cursor: sw-resize;
}
.js-plotly-plot .plotly .cursor-s-resize {
  cursor: s-resize;
}
.js-plotly-plot .plotly .cursor-se-resize {
  cursor: se-resize;
}
.js-plotly-plot .plotly .cursor-w-resize {
  cursor: w-resize;
}
.js-plotly-plot .plotly .cursor-e-resize {
  cursor: e-resize;
}
.js-plotly-plot .plotly .cursor-nw-resize {
  cursor: nw-resize;
}
.js-plotly-plot .plotly .cursor-n-resize {
  cursor: n-resize;
}
.js-plotly-plot .plotly .cursor-ne-resize {
  cursor: ne-resize;
}
.js-plotly-plot .plotly .cursor-grab {
  cursor: -webkit-grab;
  cursor: grab;
}
.js-plotly-plot .plotly .modebar {
  position: absolute;
  top: 2px;
  right: 2px;
}
.js-plotly-plot .plotly .ease-bg {
  -webkit-transition: background-color 0.3s ease 0s;
  -moz-transition: background-color 0.3s ease 0s;
  -ms-transition: background-color 0.3s ease 0s;
  -o-transition: background-color 0.3s ease 0s;
  transition: background-color 0.3s ease 0s;
}
.js-plotly-plot .plotly .modebar--hover > :not(.watermark) {
  opacity: 0;
  -webkit-transition: opacity 0.3s ease 0s;
  -moz-transition: opacity 0.3s ease 0s;
  -ms-transition: opacity 0.3s ease 0s;
  -o-transition: opacity 0.3s ease 0s;
  transition: opacity 0.3s ease 0s;
}
.js-plotly-plot .plotly:hover .modebar--hover .modebar-group {
  opacity: 1;
}
.js-plotly-plot .plotly .modebar-group {
  float: left;
  display: inline-block;
  box-sizing: border-box;
  padding-left: 8px;
  position: relative;
  vertical-align: middle;
  white-space: nowrap;
}
.js-plotly-plot .plotly .modebar-btn {
  position: relative;
  font-size: 16px;
  padding: 3px 4px;
  height: 22px;
  /* display: inline-block; including this breaks 3d interaction in .embed mode. Chrome bug? */
  cursor: pointer;
  line-height: normal;
  box-sizing: border-box;
}
.js-plotly-plot .plotly .modebar-btn svg {
  position: relative;
  top: 2px;
}
.js-plotly-plot .plotly .modebar.vertical {
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  align-content: flex-end;
  max-height: 100%;
}
.js-plotly-plot .plotly .modebar.vertical svg {
  top: -1px;
}
.js-plotly-plot .plotly .modebar.vertical .modebar-group {
  display: block;
  float: none;
  padding-left: 0px;
  padding-bottom: 8px;
}
.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn {
  display: block;
  text-align: center;
}
.js-plotly-plot .plotly [data-title] {
  /**
   * tooltip body
   */
}
.js-plotly-plot .plotly [data-title]:before, .js-plotly-plot .plotly [data-title]:after {
  position: absolute;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  -ms-transform: translate3d(0, 0, 0);
  -o-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
  display: none;
  opacity: 0;
  z-index: 1001;
  pointer-events: none;
  top: 110%;
  right: 50%;
}
.js-plotly-plot .plotly [data-title]:hover:before, .js-plotly-plot .plotly [data-title]:hover:after {
  display: block;
  opacity: 1;
}
.js-plotly-plot .plotly [data-title]:before {
  content: "";
  position: absolute;
  background: transparent;
  border: 6px solid transparent;
  z-index: 1002;
  margin-top: -12px;
  border-bottom-color: #69738a;
  margin-right: -6px;
}
.js-plotly-plot .plotly [data-title]:after {
  content: attr(data-title);
  background: #69738a;
  color: white;
  padding: 8px 10px;
  font-size: 12px;
  line-height: 12px;
  white-space: nowrap;
  margin-right: -18px;
  border-radius: 2px;
}
.js-plotly-plot .plotly .vertical [data-title]:before, .js-plotly-plot .plotly .vertical [data-title]:after {
  top: 0%;
  right: 200%;
}
.js-plotly-plot .plotly .vertical [data-title]:before {
  border: 6px solid transparent;
  border-left-color: #69738a;
  margin-top: 8px;
  margin-right: -30px;
}

.plotly-notifier {
  font-family: "Open Sans", verdana, arial, sans-serif;
  position: fixed;
  top: 50px;
  right: 20px;
  z-index: 10000;
  font-size: 10pt;
  max-width: 180px;
}
.plotly-notifier p {
  margin: 0;
}
.plotly-notifier .notifier-note {
  min-width: 180px;
  max-width: 250px;
  border: 1px solid #fff;
  z-index: 3000;
  margin: 0;
  background-color: #8c97af;
  background-color: rgba(140, 151, 175, 0.9);
  color: #fff;
  padding: 10px;
  overflow-wrap: break-word;
  word-wrap: break-word;
  -ms-hyphens: auto;
  -webkit-hyphens: auto;
  hyphens: auto;
}
.plotly-notifier .notifier-close {
  color: #fff;
  opacity: 0.8;
  float: right;
  padding: 0 5px;
  background: none;
  border: none;
  font-size: 20px;
  font-weight: bold;
  line-height: 20px;
}
.plotly-notifier .notifier-close:hover {
  color: #444;
  text-decoration: none;
  cursor: pointer;
}
  /* inject:end */
`;$M.register([XJ]);class TJ extends Ga{static get properties(){return{}}constructor(){super(),this.a=1,this.l=1,this.g=1,this.choices=[],this.samples=null,this.working=!1,this.queued=!1,this.worker=new kJ,this.worker.onmessage=t=>{this.working=!1,this.samples=t.data.samples,this.a=t.data.results.alpha,this.l=t.data.results.lambda,this.g=t.data.results.gamma,this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-fit-update",{detail:{a:this.a,l:this.l,g:this.g},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}clear(){this.choices=[],this.fit()}get(t="default"){const e=this.choices.find((e=>e.name===t));return void 0===e?null:e}set(t,e,i,n,r,a="",s=""){const o=this.choices.find((t=>t.name===a));void 0===o?this.choices.push({xl:t,xw:e,pw:i,xs:n,response:r,name:a,label:s}):(o.xl=t,o.xw=e,o.pw=i,o.xs=n,o.response=r,o.label=s),this.fit()}static get styles(){return[super.styles,MJ,o`
        /* :host {
          display: inline-block;
        } */

        .trace,
        .hist {
          display: inline-block;

          width: 20rem;
          height: 15rem;
        }
      `]}render(){return Y`
      <div>
        <div>After ${this.choices.length} trials:</div>
        <div>Current:
          <var class="math-var a">α</var> = ${this.a.toFixed(2)},
          <var class="math-var l">λ</var> = ${this.l.toFixed(2)},
          <var class="math-var g">γ</var> = ${this.g.toFixed(2)}
        </div>
        <div class="param">
          <div class="trace alpha"></div>
          <div class="hist alpha"></div>
        </div>
        <div class="param">
          <div class="trace lambda"></div>
          <div class="hist lambda"></div>
        </div>
        <div class="param">
          <div class="trace gamma"></div>
          <div class="hist gamma"></div>
        </div>
        <div class="param">
          <div class="trace luce"></div>
          <div class="hist luce"></div>
        </div>
      </div>
    `}plotParam(t){const e={l:40,r:10,b:40,t:40,pad:4};$M.react(this.shadowRoot.querySelector(`.trace.${t}`),[{y:this.samples[t]}],{margin:e,title:`Traceplot of ${t}`}),$M.react(this.shadowRoot.querySelector(`.hist.${t}`),[{x:this.samples[t],type:"histogram"}],{margin:e,title:`Posterior of ${t}`})}update(t){super.update(t),null!==this.samples&&(this.plotParam("alpha"),this.plotParam("lambda"),this.plotParam("gamma"),this.plotParam("luce"))}}customElements.define("cpt-fit",TJ);class YJ extends(La(Ga)){static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.g=.5,this.p=null,this.label="",this.function="default",this.functions=[{name:"default",g:this.g}],this.probabilities=[{name:"default",p:this.p,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.alignState()}alignState(){this.functions[0].g=this.g,this.probabilities[0].p=this.p,this.probabilities[0].label=this.label,this.probabilities[0].function=this.function,this.probabilities.forEach((t=>{const e=this.functions.find((e=>e.name===t.function));t.w=Vs.pg2w(t.p,e.g)})),this.w=this.probabilities[0].w}trial(t,e,i,n,r,a){this.trialCount&&this.removeProbability(`${this.trialCount}`),this.xl=t,this.xw=e,this.pw=i,this.xs=n,this.trialCount=r,this.response=a,this.setProbability(this.pw,`${this.trialCount}`,"","default",!0)}pauseTrial(){const t=je(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum((t=>(t.paused=!0,t)))}resumeTrial(){je(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((t=>(t.paused=!1,t))),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearProbabilities(){this.probabilities.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearProbabilities()}removeFunction(t){this.functions=this.functions.filter((e=>e.name!==t)),this.requestUpdate()}removeProbability(t){this.probabilities=this.probabilities.filter((e=>e.name!==t)),this.requestUpdate()}remove(t){this.removeFunction(t),this.removeProbability(t)}getFunction(t="default"){return this.functions.find((e=>e.name===t))}getProbability(t="default"){return this.probabilities.find((e=>e.name===t))}get(t="default"){return{...this.getFunction(t),...this.getProbability(t)}}setFunction(t,e="default"){"default"===e&&(this.g=t);const i=this.functions.find((t=>t.name===e));void 0===i?this.functions.push({name:e,g:t}):i.g=t,this.requestUpdate()}setProbability(t,e="default",i="",n=e,r=!1){"default"===e&&(this.p=t,this.label=i);const a=this.probabilities.find((t=>t.name===e));void 0===a?this.probabilities.push({name:e,p:t,label:i,function:n,trial:r,new:r}):(a.p=t,a.label=i,a.function=n),this.requestUpdate()}set(t,e,i="default",n="",r=i){this.setFunction(e,r),this.setProbability(t,i,n,r)}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve.interactive:focus {
          filter: url("#shadow-8");
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        /* Make a larger target for touch users */
        @media (pointer: coarse) {
          .point.interactive .circle {
            stroke: #000000;
            stroke-opacity: 0;
            stroke-width: 12px;
          }
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-p,
        .line-w {
          fill: none;
          stroke-width: 2;
        }

        .line-p {
          stroke: var(---color-p);
        }

        .line-w {
          stroke: var(---color-w);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }
      `]}render(){return Y`
      ${Ga.svgFilters}
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,i=this.height,n=Math.min(e,i),r=2*this.rem,a=3*this.rem,s=3*this.rem,o=n-(r+a),l=n-(s+2*this.rem),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),g=zr().domain([0,1]).range([0,l]).clamp(!0);this.xScale=g;const u=zr().domain([1,0]).range([0,o]);this.yScale=u;const d=ci().subject(((t,e)=>({x:t.x,y:this.yScale(Vs.pg2w(this.xScale.invert(t.x),e.g)),p:this.xScale.invert(t.x),g:e.g,w:Vs.pg2w(this.xScale.invert(t.x),e.g)}))).on("start",(t=>{je(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const i=this.xScale.invert(t.x),n=this.yScale.invert(t.y),r=i-t.subject.p,a=n-t.subject.w,s=(r**2+a**2)**.5,o=t.subject.p>t.subject.w?r>a?t.subject.g-s:t.subject.g+s:r>a?t.subject.g+s:t.subject.g-s;e.g=o>1?1:o<0?0:o,"default"===e.name&&(this.g=e.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{je(t.currentTarget).classed("dragging",!1)})),h=ci().subject(((t,e)=>({x:this.xScale(e.p),y:this.yScale(e.w)}))).on("start",(t=>{je(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const i=this.xScale.invert(t.x);e.p=i<0?0:i>1?1:i,"default"===e.name&&(this.p=e.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,w:e.w,label:e.label,g:this.getFunction(e.function).g},bubbles:!0}))})).on("end",(t=>{je(t.currentTarget).classed("dragging",!1)})),B=ba().x((t=>g(t.p))).y((t=>u(t.w))),p=je(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),F=p.enter().append("svg").classed("main",!0),f=F.merge(p).attr("viewBox",`0 0 ${n} ${n}`),Q=F.append("g").classed("plot",!0),I=f.select(".plot").attr("transform",`translate(${s}, ${r})`);Q.append("clipPath").attr("id","clip-cpt-value").append("rect"),I.select("clipPath rect").attr("height",o+1).attr("width",l+1);const U=Q.append("g").classed("underlayer",!0),b=I.select(".underlayer");U.append("rect").classed("background",!0),b.select(".background").attr("height",o).attr("width",l),U.append("g").classed("scale-x",!0);b.select(".scale-x").attr("transform",`translate(0, ${o})`).transition().duration(2*c).ease(hr).call(wt(g)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const y=U.append("text").classed("title-x",!0).attr("text-anchor","middle");y.append("tspan").classed("name",!0).text("Probability ("),y.append("tspan").classed("math-var p",!0).text("p"),y.append("tspan").classed("name",!0).text(")"),b.select(".title-x").attr("transform",`translate(${l/2}, ${o+2.25*this.rem})`),U.append("g").classed("scale-y",!0);b.select(".scale-y").transition().duration(2*c).ease(hr).call(Vt(u)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const m=U.append("text").classed("title-y",!0).attr("text-anchor","middle");m.append("tspan").classed("name",!0).text("Decision Weight ("),m.append("tspan").classed("math-var v",!0).text("w"),m.append("tspan").classed("name",!0).text(")"),b.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${o/2})rotate(-90)`),U.append("line").classed("diagonal",!0),b.select(".diagonal").transition().duration(2*c).attr("x1",g(0)).attr("y1",u(0)).attr("x2",g(1)).attr("y2",u(1)),Q.append("g").classed("content",!0);const x=I.select(".content"),v=x.selectAll(".lines").data(this.probabilities.filter((t=>null!=t.p)),(t=>t.name)),C=v.enter().append("g").classed("lines",!0);C.each(((t,e,i)=>{const n=je(i[e]);n.append("line").classed("line-p above",!0),n.append("line").classed("line-p below",!0),n.append("line").classed("line-w before",!0),n.append("line").classed("line-w after",!0)})),C.filter((t=>t.new)).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(((t,e,i)=>{const n=je(i[e]);n.select(".line-p.above").attr("x1",g(t.p)).attr("x2",g(t.p)).attr("y1",u(1)).attr("y2",u(1)),n.select(".line-p.below").attr("x1",g(t.p)).attr("x2",g(t.p)).attr("y1",u(0)).attr("y2",u(0)),n.select(".line-w.before").attr("x1",g(t.p)).attr("x2",g(t.p)).attr("y1",u(t.w)).attr("y2",u(t.w)),n.select(".line-w.after").attr("x1",g(t.p)).attr("x2",g(t.p)).attr("y1",u(t.w)).attr("y2",u(t.w))}));const A=C.merge(v),L=A.filter((t=>t.new&&!t.paused));if(!L.empty()){const t=L.attr("data-animating-ease-time-1"),e=L.attr("data-animating-ease-time-2"),i=e=>zr().domain([0,1]).range([t,1])(e),n=e=>zr().range([0,1]).domain([t,1])(e),r=t=>zr().domain([0,1]).range([e,1])(t),a=t=>zr().range([0,1]).domain([e,1])(t),s=e=>i=>zr().domain([e(t),1]).range([0,1])(e(i)),o=t=>i=>zr().domain([t(e),1]).range([0,1])(t(i));L.transition("new-1").duration((()=>Math.floor(c*(1-t)))).ease(i).attr("data-animating-ease-time-1",1).tween("animating",((t,e,i)=>{const r=i[e],a=je(r),o=nn(void 0!==r.p?r.p:t.p,t.p),l=nn(void 0!==r.g?r.g:this.getFunction(t.function).g,this.getFunction(t.function).g),c=nn(u.invert(a.select(".line-p.above").attr("y1")),t.w),d=nn(u.invert(a.select(".line-p.below").attr("y1")),t.w);return t=>{r.p=o(hr(n(t))),r.g=l(hr(n(t))),r.w=Vs.pg2w(r.p,r.g),a.select(".line-p.above").attr("x1",g(r.p)).attr("x2",g(r.p)).attr("y1",u(c(s(dr)(t)))).attr("y2",u(1)),a.select(".line-p.below").attr("x1",g(r.p)).attr("x2",g(r.p)).attr("y1",u(d(s(dr)(t)))).attr("y2",u(0))}})).transition("new-2").duration((()=>Math.floor(c*(1-e)))).ease(r).attr("data-animating-ease-time-2",1).tween("animating",((t,e,i)=>{const n=i[e],r=je(n),s=nn(void 0!==n.p?n.p:t.p,t.p),l=nn(void 0!==n.g?n.g:this.getFunction(t.function).g,this.getFunction(t.function).g),c=nn(g.invert(r.select(".line-w.before").attr("x1")),0),d=nn(g.invert(r.select(".line-w.after").attr("x1")),1);return t=>{n.p=s(hr(a(t))),n.g=l(hr(a(t))),n.w=Vs.pg2w(n.p,n.g),r.select(".line-w.before").attr("x1",g(c(o(hr)(t)))).attr("x2",g(n.p)).attr("y1",u(n.w)).attr("y2",u(n.w)),r.select(".line-w.after").attr("x1",g(d(o(hr)(t)))).attr("x2",g(n.p)).attr("y1",u(n.w)).attr("y2",u(n.w))}})).on("end",((t,e,i)=>{const n=i[e];n.removeAttribute("data-animating-ease-time-1"),n.removeAttribute("data-animating-ease-time-2"),t.new=!1,this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))}))}const G=A.filter((t=>t.new&&t.paused));if(!G.empty()){const t=G.attr("data-animating-ease-time-1"),e=G.attr("data-animating-ease-time-2");G.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).tween("paused",((i,n,r)=>{const a=r[n],s=je(a),o=nn(void 0!==a.p?a.p:i.p,i.p),l=nn(void 0!==a.g?a.g:this.getFunction(i.function).g,this.getFunction(i.function).g),c=nn(1,i.w),d=nn(0,i.w),h=nn(i.p,0),B=nn(i.p,1);return i=>{a.p=o(i),a.g=l(i),a.w=Vs.pg2w(a.p,a.g),s.select(".line-p.above").attr("x1",g(a.p)).attr("x2",g(a.p)).attr("y1",u(c(dr(t)))).attr("y2",u(1)),s.select(".line-p.below").attr("x1",g(a.p)).attr("x2",g(a.p)).attr("y1",u(d(dr(t)))).attr("y2",u(0)),s.select(".line-w.before").attr("x1",g(h(hr(e)))).attr("x2",g(a.p)).attr("y1",u(a.w)).attr("y2",u(a.w)),s.select(".line-w.after").attr("x1",g(B(hr(e)))).attr("x2",g(a.p)).attr("y1",u(a.w)).attr("y2",u(a.w))}}))}A.filter((t=>!t.new)).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).tween("non-animating",((t,e,i)=>{const n=i[e],r=je(n),a=nn(void 0!==n.p?n.p:t.p,t.p),s=nn(void 0!==n.g?n.g:this.getFunction(t.function).g,this.getFunction(t.function).g);return t=>{n.p=a(t),n.g=s(t),n.w=Vs.pg2w(n.p,n.g),r.select(".line-p.above").attr("x1",g(n.p)).attr("x2",g(n.p)).attr("y1",u(n.w)).attr("y2",u(1)),r.select(".line-p.below").attr("x1",g(n.p)).attr("x2",g(n.p)).attr("y1",u(n.w)).attr("y2",u(0)),r.select(".line-w.before").attr("x1",g(0)).attr("x2",g(n.p)).attr("y1",u(n.w)).attr("y2",u(n.w)),r.select(".line-w.after").attr("x1",g(1)).attr("x2",g(n.p)).attr("y1",u(n.w)).attr("y2",u(n.w))}})),v.exit().remove();const R=x.selectAll(".curve").data(this.functions,(t=>t.name)),S=R.enter().append("path").classed("curve",!0).attr("clip-path","url(#clip-cpt-value)").merge(R);(this.firstUpdate||t.has("interactive"))&&(this.interactive?S.attr("tabindex",0).classed("interactive",!0).call(d).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let i=e.g;switch(t.key){case"ArrowUp":case"ArrowLeft":i+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":i-=t.shiftKey?.01:.05}i=i<0?0:i>1?1:i,i!==e.g&&(e.g=i,"default"===e.name&&(this.g=e.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):S.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),S.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).attrTween("d",((t,e,i)=>{const n=i[e],r=nn(void 0!==n.g?n.g:t.g,t.g);return t=>{n.g=r(t);const e=It(g.range()[0],g.range()[1]+1,1).map((t=>({p:g.invert(t),w:Vs.pg2w(g.invert(t),n.g)})));return B(e)}})),R.exit().remove();const w=x.selectAll(".point").data(this.probabilities.filter((t=>null!=t.p)),(t=>t.name)),V=w.enter().append("g").classed("point",!0);V.append("circle").classed("circle",!0),V.append("text").classed("label",!0);const E=V.merge(w);E.select("text").text((t=>t.label)),E.filter((e=>(this.firstUpdate||t.has("interactive"))&&this.interactive&&!e.trial)).attr("tabindex",0).classed("interactive",!0).call(h).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let i=e.p;switch(t.key){case"ArrowUp":case"ArrowRight":i+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":i-=t.shiftKey?.01:.05}i=i<0?0:i>1?1:i,i!==e.p&&(e.p=i,"default"===e.name&&(this.p=e.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,w:e.w,label:e.label,g:this.getFunction(e.function).g},bubbles:!0}))),t.preventDefault()}})),E.filter((e=>(this.firstUpdate||t.has("interactive"))&&!this.interactive||e.trial)).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),E.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).attrTween("transform",((t,e,i)=>{const n=i[e],r=nn(void 0!==n.p?n.p:t.p,t.p),a=nn(void 0!==n.g?n.g:this.getFunction(t.function).g,this.getFunction(t.function).g);return t=>(n.p=r(t),n.g=a(t),`translate(\n            ${g(n.p)},\n            ${u(Vs.pg2w(n.p,n.g))}\n          )`)})),w.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-probability",YJ);var JJ={exports:{}},_J={exports:{}},zJ=Uu,OJ=Gf,KJ=_F,PJ=Dd.hovertemplateAttrs,jJ=ru,qJ=Mg.extendFlat,$J=wd.overrideAll;function t_(t){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",t,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function e_(t){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",t,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:t_("x"),y:t_("y"),z:t_("z")},color:{valType:"color",dflt:zJ.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",t,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:zJ.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var i_=_J.exports=$J(qJ({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:PJ(),xhoverformat:KJ("x"),yhoverformat:KJ("y"),zhoverformat:KJ("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},OJ("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:e_("x"),y:e_("y"),z:e_("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale.","The opacityscale must be an array containing","arrays mapping a normalized value to an opacity value.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have","higher opacity values and those in the middle would be more transparent","Alternatively, `opacityscale` may be a palette name string","of the following list: 'min', 'max', 'extremes' and 'uniform'.","The default is 'uniform'."].join(" ")},hoverinfo:qJ({},jJ.hoverinfo),showlegend:qJ({},jJ.showlegend,{dflt:!1})}),"calc","nested");i_.x.editType=i_.y.editType=i_.z.editType="calc+clearAxisTypes";var n_=_J.exports,r_=Gf,a_=_F,s_=Dd.hovertemplateAttrs,o_=n_,l_=ru,c_=Mg.extendFlat,g_=c_({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:s_({editType:"calc"}),xhoverformat:a_("x"),yhoverformat:a_("y"),zhoverformat:a_("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")}},r_("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:o_.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:c_({},o_.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:o_.contours.x.color,width:o_.contours.x.width,editType:"calc"},lightposition:{x:c_({},o_.lightposition.x,{dflt:1e5}),y:c_({},o_.lightposition.y,{dflt:1e5}),z:c_({},o_.lightposition.z,{dflt:0}),editType:"calc"},lighting:c_({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},o_.lighting),hoverinfo:c_({},l_.hoverinfo,{editType:"calc"}),showlegend:c_({},l_.showlegend,{dflt:!1})}),u_=Gf,d_=_F,h_=Dd.hovertemplateAttrs,B_=g_,p_=ru,F_=Mg.extendFlat,f_=wd.overrideAll;function Q_(t){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not slice planes about the",t,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",t,"except start and end."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function I_(t){return{show:{valType:"boolean",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",t,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var U_=JJ.exports=f_(F_({x:{valType:"data_array",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:Q_("x"),y:Q_("y"),z:Q_("z")},caps:{x:I_("x"),y:I_("y"),z:I_("z")},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:h_(),xhoverformat:d_("x"),yhoverformat:d_("y"),zhoverformat:d_("z"),valuehoverformat:d_("value",1),showlegend:F_({},p_.showlegend,{dflt:!1})},u_("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:B_.opacity,lightposition:B_.lightposition,lighting:B_.lighting,flatshading:B_.flatshading,contour:B_.contour,hoverinfo:F_({},p_.hoverinfo)}),"calc","nested");U_.flatshading.dflt=!0,U_.lighting.facenormalsepsilon.dflt=0,U_.x.editType=U_.y.editType=U_.z.editType=U_.value.editType="calc+clearAxisTypes";var b_=JJ.exports,y_=_B,m_=Nu,x_=b_,v_=vQ;var C_={supplyDefaults:function(t,e,i,n){!function(t,e,i,n,r){var a=r("isomin"),s=r("isomax");null!=s&&null!=a&&a>s&&(e.isomin=null,e.isomax=null);var o=r("x"),l=r("y"),c=r("z"),g=r("value");if(!(o&&o.length&&l&&l.length&&c&&c.length&&g&&g.length))return void(e.visible=!1);m_.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],n),r("valuehoverformat"),["x","y","z"].forEach((function(t){r(t+"hoverformat");var e="caps."+t;r(e+".show")&&r(e+".fill");var i="slices."+t;r(i+".show")&&(r(i+".fill"),r(i+".locations"))}));var u=r("spaceframe.show");u&&r("spaceframe.fill");var d=r("surface.show");d&&(r("surface.count"),r("surface.fill"),r("surface.pattern"));var h=r("contour.show");h&&(r("contour.color"),r("contour.width"));["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach((function(t){r(t)})),v_(t,e,n,r,{prefix:"",cLetter:"c"}),e._length=null}(t,e,0,n,(function(i,n){return y_.coerce(t,e,x_,i,n)}))}},A_=_B;function L_(t){return A_.distinctVals(t).vals}var G_=function(t,e){if(void 0===e&&(e=t.length),A_.isTypedArray(t))return t.subarray(0,e);for(var i=[],n=0;n<e;n++)i[n]=+t[n];return i},R_=function(t){var e,i,n,r,a,s,o,l,c,g,u,d,h=t._x,B=t._y,p=t._z,F=t._len,f=-1/0,Q=1/0,I=-1/0,U=1/0,b=-1/0,y=1/0,m="";for(F&&(o=h[0],c=B[0],u=p[0]),F>1&&(l=h[F-1],g=B[F-1],d=p[F-1]),e=0;e<F;e++)f=Math.max(f,h[e]),Q=Math.min(Q,h[e]),I=Math.max(I,B[e]),U=Math.min(U,B[e]),b=Math.max(b,p[e]),y=Math.min(y,p[e]),r||h[e]===o||(r=!0,m+="x"),a||B[e]===c||(a=!0,m+="y"),s||p[e]===u||(s=!0,m+="z");r||(m+="x"),a||(m+="y"),s||(m+="z");var x=L_(t._x),v=L_(t._y),C=L_(t._z);m=(m=(m=m.replace("x",(o>l?"-":"+")+"x")).replace("y",(c>g?"-":"+")+"y")).replace("z",(u>d?"-":"+")+"z");var A=function(){F=0,x=[],v=[],C=[]};(!F||F<x.length*v.length*C.length)&&A();var L=function(t){return"x"===t?h:"y"===t?B:p},G=function(t){return"x"===t?x:"y"===t?v:C},R=function(t){return t[F-1]<t[0]?-1:1},S=L(m[1]),w=L(m[3]),V=L(m[5]),E=G(m[1]).length,Z=G(m[3]).length,N=G(m[5]).length,D=!1,X=function(t,e,i){return E*(Z*t+e)+i},H=R(L(m[1])),W=R(L(m[3])),k=R(L(m[5]));for(e=0;e<N-1;e++){for(i=0;i<Z-1;i++){for(n=0;n<E-1;n++){var M=X(e,i,n),T=X(e,i,n+1),Y=X(e,i+1,n),J=X(e+1,i,n);if(S[M]*H<S[T]*H&&w[M]*W<w[Y]*W&&V[M]*k<V[J]*k||(D=!0),D)break}if(D)break}if(D)break}return D&&(A_.warn("Encountered arbitrary coordinates! Unable to input data grid."),A()),{xMin:Q,yMin:U,zMin:y,xMax:f,yMax:I,zMax:b,Xs:x,Ys:v,Zs:C,len:F,fill:m}},S_=NQ,w_=R_,V_=G_,E_={exports:{}};!function(){var t={1964:function(t,e,i){t.exports={alpha_shape:i(3502),convex_hull:i(7352),delaunay_triangulate:i(7642),gl_cone3d:i(6405),gl_error3d:i(9165),gl_line3d:i(5714),gl_mesh3d:i(7201),gl_plot3d:i(4100),gl_scatter3d:i(8418),gl_streamtube3d:i(7815),gl_surface3d:i(9499),ndarray:i(9618),ndarray_linear_interpolate:i(4317)}},4793:function(t,e,i){function n(t,e,i){return e&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e);if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==c(e)?e:e+""}function a(t,e,i){return e=o(e),function(t,e){if(e&&("object"==c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,[],o(t).constructor):e.apply(t,i))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var g=i(7507),u=i(3778),d="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=p,e.IS=50;var h=2147483647;function B(t){if(t>h)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,p.prototype),e}function p(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return Q(t)}return F(t,e,i)}function F(t,e,i){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!p.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var i=0|y(t,e),n=B(i),r=n.write(t,e);r!==i&&(n=n.slice(0,r));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(it(t,Uint8Array)){var e=new Uint8Array(t);return U(e.buffer,e.byteOffset,e.byteLength)}return I(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(t));if(it(t,ArrayBuffer)||t&&it(t.buffer,ArrayBuffer))return U(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(it(t,SharedArrayBuffer)||t&&it(t.buffer,SharedArrayBuffer)))return U(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return p.from(n,e,i);var r=function(t){if(p.isBuffer(t)){var e=0|b(t.length),i=B(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||nt(t.length)?B(0):I(t);if("Buffer"===t.type&&Array.isArray(t.data))return I(t.data)}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return p.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(t))}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Q(t){return f(t),B(t<0?0:0|b(t))}function I(t){for(var e=t.length<0?0:0|b(t.length),i=B(e),n=0;n<e;n+=1)i[n]=255&t[n];return i}function U(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(n,p.prototype),n}function b(t){if(t>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|t}function y(t,e){if(p.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||it(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+c(t));var i=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return tt(t).length;default:if(r)return n?-1:$(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,i);case"utf8":case"utf-8":return V(this,e,i);case"ascii":return Z(this,e,i);case"latin1":case"binary":return N(this,e,i);case"base64":return w(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function x(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function v(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),nt(i=+i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=p.from(e,n)),p.isBuffer(e))return 0===e.length?-1:C(t,e,i,n,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):C(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function C(t,e,i,n,r){var a,s=1,o=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,o/=2,l/=2,i/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var g=-1;for(a=i;a<o;a++)if(c(t,a)===c(e,-1===g?0:a-g)){if(-1===g&&(g=a),a-g+1===l)return g*s}else-1!==g&&(a-=a-g),g=-1}else for(i+l>o&&(i=o-l),a=i;a>=0;a--){for(var u=!0,d=0;d<l;d++)if(c(t,a+d)!==c(e,d)){u=!1;break}if(u)return a}return-1}function A(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var a,s=e.length;for(n>s/2&&(n=s/2),a=0;a<n;++a){var o=parseInt(e.substr(2*a,2),16);if(nt(o))return a;t[i+a]=o}return a}function L(t,e,i,n){return et($(e,t.length-i),t,i,n)}function G(t,e,i,n){return et(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function R(t,e,i,n){return et(tt(e),t,i,n)}function S(t,e,i,n){return et(function(t,e){for(var i,n,r,a=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(i=t.charCodeAt(s))>>8,r=i%256,a.push(r),a.push(n);return a}(e,t.length-i),t,i,n)}function w(t,e,i){return 0===e&&i===t.length?g.fromByteArray(t):g.fromByteArray(t.slice(e,i))}function V(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var a=t[r],s=null,o=a>239?4:a>223?3:a>191?2:1;if(r+o<=i){var l=void 0,c=void 0,g=void 0,u=void 0;switch(o){case 1:a<128&&(s=a);break;case 2:128==(192&(l=t[r+1]))&&(u=(31&a)<<6|63&l)>127&&(s=u);break;case 3:l=t[r+1],c=t[r+2],128==(192&l)&&128==(192&c)&&(u=(15&a)<<12|(63&l)<<6|63&c)>2047&&(u<55296||u>57343)&&(s=u);break;case 4:l=t[r+1],c=t[r+2],g=t[r+3],128==(192&l)&&128==(192&c)&&128==(192&g)&&(u=(15&a)<<18|(63&l)<<12|(63&c)<<6|63&g)>65535&&u<1114112&&(s=u)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),r+=o}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=E));return i}(n)}p.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(t,e,i){return F(t,e,i)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(t,e,i){return function(t,e,i){return f(t),t<=0?B(t):void 0!==e?"string"==typeof i?B(t).fill(e,i):B(t).fill(e):B(t)}(t,e,i)},p.allocUnsafe=function(t){return Q(t)},p.allocUnsafeSlow=function(t){return Q(t)},p.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==p.prototype},p.compare=function(t,e){if(it(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),it(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,n=e.length,r=0,a=Math.min(i,n);r<a;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=p.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var a=t[i];if(it(a,Uint8Array))r+a.length>n.length?(p.isBuffer(a)||(a=p.from(a)),a.copy(n,r)):Uint8Array.prototype.set.call(n,a,r);else{if(!p.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r)}r+=a.length}return n},p.byteLength=y,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},p.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?V(this,0,t):m.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",i=e.IS;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},d&&(p.prototype[d]=p.prototype.inspect),p.prototype.compare=function(t,e,i,n,r){if(it(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+c(t));if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var a=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(e>>>=0),o=Math.min(a,s),l=this.slice(n,r),g=t.slice(e,i),u=0;u<o;++u)if(l[u]!==g[u]){a=l[u],s=g[u];break}return a<s?-1:s<a?1:0},p.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},p.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},p.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},p.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return A(this,t,e,i);case"utf8":case"utf-8":return L(this,t,e,i);case"ascii":case"latin1":case"binary":return G(this,t,e,i);case"base64":return R(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function Z(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function N(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function D(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",a=e;a<i;++a)r+=rt[t[a]];return r}function X(t,e,i){for(var n=t.slice(e,i),r="",a=0;a<n.length-1;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function H(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function W(t,e,i,n,r,a){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<a)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function k(t,e,i,n,r){K(e,n,r,t,i,7);var a=Number(e&BigInt(4294967295));t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a;var s=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,i}function M(t,e,i,n,r){K(e,n,r,t,i,7);var a=Number(e&BigInt(4294967295));t[i+7]=a,a>>=8,t[i+6]=a,a>>=8,t[i+5]=a,a>>=8,t[i+4]=a;var s=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=s,s>>=8,t[i+2]=s,s>>=8,t[i+1]=s,s>>=8,t[i]=s,i+8}function T(t,e,i,n,r,a){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Y(t,e,i,n,r){return e=+e,i>>>=0,r||T(t,0,i,4),u.write(t,e,i,n,23,4),i+4}function J(t,e,i,n,r){return e=+e,i>>>=0,r||T(t,0,i,8),u.write(t,e,i,n,52,8),i+8}p.prototype.slice=function(t,e){var i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,p.prototype),n},p.prototype.readUintLE=p.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||H(t,e,this.length);for(var n=this[t],r=1,a=0;++a<e&&(r*=256);)n+=this[t+a]*r;return n},p.prototype.readUintBE=p.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||H(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},p.prototype.readUint8=p.prototype.readUInt8=function(t,e){return t>>>=0,e||H(t,1,this.length),this[t]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(t,e){return t>>>=0,e||H(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(t,e){return t>>>=0,e||H(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(t,e){return t>>>=0,e||H(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(t,e){return t>>>=0,e||H(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readBigUInt64LE=at((function(t){P(t>>>=0,"offset");var e=this[t],i=this[t+7];void 0!==e&&void 0!==i||j(t,this.length-8);var n=e+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24),r=this[++t]+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+i*Math.pow(2,24);return BigInt(n)+(BigInt(r)<<BigInt(32))})),p.prototype.readBigUInt64BE=at((function(t){P(t>>>=0,"offset");var e=this[t],i=this[t+7];void 0!==e&&void 0!==i||j(t,this.length-8);var n=e*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t],r=this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+i;return(BigInt(n)<<BigInt(32))+BigInt(r)})),p.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||H(t,e,this.length);for(var n=this[t],r=1,a=0;++a<e&&(r*=256);)n+=this[t+a]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},p.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||H(t,e,this.length);for(var n=e,r=1,a=this[t+--n];n>0&&(r*=256);)a+=this[t+--n]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*e)),a},p.prototype.readInt8=function(t,e){return t>>>=0,e||H(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){t>>>=0,e||H(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt16BE=function(t,e){t>>>=0,e||H(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt32LE=function(t,e){return t>>>=0,e||H(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return t>>>=0,e||H(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readBigInt64LE=at((function(t){P(t>>>=0,"offset");var e=this[t],i=this[t+7];void 0!==e&&void 0!==i||j(t,this.length-8);var n=this[t+4]+this[t+5]*Math.pow(2,8)+this[t+6]*Math.pow(2,16)+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24))})),p.prototype.readBigInt64BE=at((function(t){P(t>>>=0,"offset");var e=this[t],i=this[t+7];void 0!==e&&void 0!==i||j(t,this.length-8);var n=(e<<24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+i)})),p.prototype.readFloatLE=function(t,e){return t>>>=0,e||H(t,4,this.length),u.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return t>>>=0,e||H(t,4,this.length),u.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return t>>>=0,e||H(t,8,this.length),u.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return t>>>=0,e||H(t,8,this.length),u.read(this,t,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e>>>=0,i>>>=0,n)||W(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,a=0;for(this[e]=255&t;++a<i&&(r*=256);)this[e+a]=t/r&255;return e+i},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e>>>=0,i>>>=0,n)||W(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,a=1;for(this[e+r]=255&t;--r>=0&&(a*=256);)this[e+r]=t/a&255;return e+i},p.prototype.writeUint8=p.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,1,255,0),this[e]=255&t,e+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeBigUInt64LE=at((function(t){return k(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeBigUInt64BE=at((function(t){return M(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e>>>=0,!n){var r=Math.pow(2,8*i-1);W(this,t,e,i,r-1,-r)}var a=0,s=1,o=0;for(this[e]=255&t;++a<i&&(s*=256);)t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s|0)-o&255;return e+i},p.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e>>>=0,!n){var r=Math.pow(2,8*i-1);W(this,t,e,i,r-1,-r)}var a=i-1,s=1,o=0;for(this[e+a]=255&t;--a>=0&&(s*=256);)t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s|0)-o&255;return e+i},p.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},p.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||W(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeBigInt64LE=at((function(t){return k(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeBigInt64BE=at((function(t){return M(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeFloatLE=function(t,e,i){return Y(this,t,e,!0,i)},p.prototype.writeFloatBE=function(t,e,i){return Y(this,t,e,!1,i)},p.prototype.writeDoubleLE=function(t,e,i){return J(this,t,e,!0,i)},p.prototype.writeDoubleBE=function(t,e,i){return J(this,t,e,!1,i)},p.prototype.copy=function(t,e,i,n){if(!p.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r=n-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,n):Uint8Array.prototype.set.call(t,this.subarray(i,n),e),r},p.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!p.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var r=t.charCodeAt(0);("utf8"===n&&r<128||"latin1"===n)&&(t=r)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var a;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(a=e;a<i;++a)this[a]=t;else{var s=p.isBuffer(t)?t:p.from(t,n),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<i-e;++a)this[a+e]=s[a%o]}return this};var _={};function z(t,e,i){_[t]=function(i){function r(){var i;
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),i=a(this,r),Object.defineProperty(i,"message",{value:e.apply(i,arguments),writable:!0,configurable:!0}),i.name="".concat(i.name," [").concat(t,"]"),i.stack,delete i.name,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(r,i),n(r,[{key:"code",get:function(){return t},set:function(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}])}(i)}function O(t){for(var e="",i=t.length,n="-"===t[0]?1:0;i>=n+4;i-=3)e="_".concat(t.slice(i-3,i)).concat(e);return"".concat(t.slice(0,i)).concat(e)}function K(t,e,i,n,r,a){if(t>i||t<e){var s,o="bigint"==typeof e?"n":"";throw s=0===e||e===BigInt(0)?">= 0".concat(o," and < 2").concat(o," ** ").concat(8*(a+1)).concat(o):">= -(2".concat(o," ** ").concat(8*(a+1)-1).concat(o,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(o),new _.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){P(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||j(e,t.length-(i+1))}(n,r,a)}function P(t,e){if("number"!=typeof t)throw new _.ERR_INVALID_ARG_TYPE(e,"number",t)}function j(t,e,i){if(Math.floor(t)!==t)throw P(t,i),new _.ERR_OUT_OF_RANGE("offset","an integer",t);if(e<0)throw new _.ERR_BUFFER_OUT_OF_BOUNDS;throw new _.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(e),t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(c(e))}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,i){var n='The value of "'.concat(t,'" is out of range.'),r=i;return Number.isInteger(i)&&Math.abs(i)>Math.pow(2,32)?r=O(String(i)):"bigint"==typeof i&&(r=String(i),(i>Math.pow(BigInt(2),BigInt(32))||i<-Math.pow(BigInt(2),BigInt(32)))&&(r=O(r)),r+="n"),n+=" It must be ".concat(e,". Received ").concat(r)}),RangeError);var q=/[^+/0-9A-Za-z-_]/g;function $(t,e){var i;e=e||1/0;for(var n=t.length,r=null,a=[],s=0;s<n;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&a.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;a.push(i)}else if(i<2048){if((e-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function tt(t){return g.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function et(t,e,i,n){var r;for(r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function it(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function nt(t){return t!=t}var rt=function(){for(var t="0123456789abcdef",e=new Array(256),i=0;i<16;++i)for(var n=16*i,r=0;r<16;++r)e[n+r]=t[i]+t[r];return e}();function at(t){return"undefined"==typeof BigInt?st:t}function st(){throw new Error("BigInt not supported")}},9216:function(t){t.exports=r,t.exports.isMobile=r,t.exports.default=r;var e=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,n=/android|ipad|playbook|silk/i;function r(t){t||(t={});var r=t.ua;if(r||"undefined"==typeof navigator||(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var a=e.test(r)&&!i.test(r)||!!t.tablet&&n.test(r);return!a&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(a=!0),a}},6296:function(t,e,i){t.exports=function(t){var e=(t=t||{}).eye||[0,0,1],i=t.center||[0,0,0],o=t.up||[0,1,0],l=t.distanceLimits||[0,1/0],c=t.mode||"turntable",g=n(),u=r(),d=a();return g.setDistanceLimits(l[0],l[1]),g.lookAt(0,e,i,o),u.setDistanceLimits(l[0],l[1]),u.lookAt(0,e,i,o),d.setDistanceLimits(l[0],l[1]),d.lookAt(0,e,i,o),new s({turntable:g,orbit:u,matrix:d},c)};var n=i(7261),r=i(9977),a=i(1811);function s(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map((function(e){return t[e]})),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=s.prototype;o.flush=function(t){for(var e=this._controllerList,i=0;i<e.length;++i)e[i].flush(t)},o.idle=function(t){for(var e=this._controllerList,i=0;i<e.length;++i)e[i].idle(t)},o.lookAt=function(t,e,i,n){for(var r=this._controllerList,a=0;a<r.length;++a)r[a].lookAt(t,e,i,n)},o.rotate=function(t,e,i,n){for(var r=this._controllerList,a=0;a<r.length;++a)r[a].rotate(t,e,i,n)},o.pan=function(t,e,i,n){for(var r=this._controllerList,a=0;a<r.length;++a)r[a].pan(t,e,i,n)},o.translate=function(t,e,i,n){for(var r=this._controllerList,a=0;a<r.length;++a)r[a].translate(t,e,i,n)},o.setMatrix=function(t,e){for(var i=this._controllerList,n=0;n<i.length;++n)i[n].setMatrix(t,e)},o.setDistanceLimits=function(t,e){for(var i=this._controllerList,n=0;n<i.length;++n)i[n].setDistanceLimits(t,e)},o.setDistance=function(t,e){for(var i=this._controllerList,n=0;n<i.length;++n)i[n].setDistance(t,e)},o.recalcMatrix=function(t){this._active.recalcMatrix(t)},o.getDistance=function(t){return this._active.getDistance(t)},o.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},o.lastT=function(){return this._active.lastT()},o.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var i=this._active,n=this._controllerList[e],r=Math.max(i.lastT(),n.lastT());i.recalcMatrix(r),n.setMatrix(r,i.computedMatrix),this._active=n,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode}},7169:function(t,e,i){var n="undefined"==typeof WeakMap?i(1538):WeakMap,r=i(2762),a=i(8116),s=new n;t.exports=function(t){var e=s.get(t),i=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);if(!i||!t.isBuffer(i)){var n=r(t,new Float32Array([-1,-1,-1,4,4,-1]));(e=a(t,[{buffer:n,type:t.FLOAT,size:2}]))._triangleBuffer=n,s.set(t,e)}e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()}},1085:function(t,e,i){var n=i(1371);t.exports=function(t,e,i){e="number"==typeof e?e:1,i=i||": ";var r=t.split(/\r?\n/),a=String(r.length+e-1).length;return r.map((function(t,r){var s=r+e,o=String(s).length;return n(s,a-o)+i+t})).join("\n")}},3952:function(t,e,i){t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var i=t[0].length,n=[t[0]],a=[0],s=1;s<e;++s)if(n.push(t[s]),r(n,i)){if(a.push(s),a.length===i+1)return a}else n.pop();return a};var n=i(3250);function r(t,e){for(var i=new Array(e+1),r=0;r<t.length;++r)i[r]=t[r];for(r=0;r<=t.length;++r){for(var a=t.length;a<=e;++a){for(var s=new Array(e),o=0;o<e;++o)s[o]=Math.pow(a+1-r,o);i[a]=s}if(n.apply(void 0,i))return!0}return!1}},5995:function(t,e,i){t.exports=function(t,e){return n(e).filter((function(i){for(var n=new Array(i.length),a=0;a<i.length;++a)n[a]=e[i[a]];return r(n)*t<1}))};var n=i(7642),r=i(6037)},3502:function(t,e,i){t.exports=function(t,e){return r(n(t,e))};var n=i(5995),r=i(9127)},6468:function(t){t.exports=function(t){return atob(t)}},2642:function(t,e,i){t.exports=function(t,e){for(var i=e.length,a=new Array(i+1),s=0;s<i;++s){for(var o=new Array(i+1),l=0;l<=i;++l)o[l]=t[l][s];a[s]=o}a[i]=new Array(i+1);for(s=0;s<=i;++s)a[i][s]=1;var c=new Array(i+1);for(s=0;s<i;++s)c[s]=e[s];c[i]=1;var g=n(a,c),u=r(g[i+1]);0===u&&(u=1);var d=new Array(i+1);for(s=0;s<=i;++s)d[s]=r(g[s])/u;return d};var n=i(727);function r(t){for(var e=0,i=0;i<t.length;++i)e+=t[i];return e}},7507:function(t,e){e.byteLength=function(t){var e=o(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,a=o(t),s=a[0],l=a[1],c=new r(function(t,e,i){return 3*(e+i)/4-i}(0,s,l)),g=0,u=l>0?s-4:s;for(i=0;i<u;i+=4)e=n[t.charCodeAt(i)]<<18|n[t.charCodeAt(i+1)]<<12|n[t.charCodeAt(i+2)]<<6|n[t.charCodeAt(i+3)],c[g++]=e>>16&255,c[g++]=e>>8&255,c[g++]=255&e;2===l&&(e=n[t.charCodeAt(i)]<<2|n[t.charCodeAt(i+1)]>>4,c[g++]=255&e);1===l&&(e=n[t.charCodeAt(i)]<<10|n[t.charCodeAt(i+1)]<<4|n[t.charCodeAt(i+2)]>>2,c[g++]=e>>8&255,c[g++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,a=[],s=16383,o=0,c=n-r;o<c;o+=s)a.push(l(t,o,o+s>c?c:o+s));1===r?(e=t[n-1],a.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],a.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return a.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)i[s]=a[s],n[a.charCodeAt(s)]=s;function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function l(t,e,n){for(var r,a,s=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(i[(a=r)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3865:function(t,e,i){var n=i(869);t.exports=function(t,e){return n(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}},1318:function(t){t.exports=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}},8697:function(t,e,i){var n=i(869);t.exports=function(t,e){return n(t[0].mul(e[1]),t[1].mul(e[0]))}},7842:function(t,e,i){var n=i(6330),r=i(1533),a=i(2651),s=i(6768),o=i(869),l=i(8697);t.exports=function t(e,i){if(n(e))return i?l(e,t(i)):[e[0].clone(),e[1].clone()];var c,g,u=0;if(r(e))c=e.clone();else if("string"==typeof e)c=s(e);else{if(0===e)return[a(0),a(1)];if(e===Math.floor(e))c=a(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),u-=256;c=a(e)}}if(n(i))c.mul(i[1]),g=i[0].clone();else if(r(i))g=i.clone();else if("string"==typeof i)g=s(i);else if(i)if(i===Math.floor(i))g=a(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),u+=256;g=a(i)}else g=a(1);u>0?c=c.ushln(u):u<0&&(g=g.ushln(-u));return o(c,g)}},6330:function(t,e,i){var n=i(1533);t.exports=function(t){return Array.isArray(t)&&2===t.length&&n(t[0])&&n(t[1])}},5716:function(t,e,i){var n=i(6859);t.exports=function(t){return t.cmp(new n(0))}},1369:function(t,e,i){var n=i(5716);t.exports=function(t){var e=t.length,i=t.words,r=0;if(1===e)r=i[0];else if(2===e)r=i[0]+67108864*i[1];else for(var a=0;a<e;a++){r+=i[a]*Math.pow(67108864,a)}return n(t)*r}},4025:function(t,e,i){var n=i(2361),r=i(8828).countTrailingZeros;t.exports=function(t){var e=r(n.lo(t));if(e<32)return e;var i=r(n.hi(t));if(i>20)return 52;return i+32}},1533:function(t,e,i){i(6859),t.exports=function(t){return t&&"object"==typeof t&&Boolean(t.words)}},2651:function(t,e,i){var n=i(6859),r=i(2361);t.exports=function(t){var e=r.exponent(t);return e<52?new n(t):new n(t*Math.pow(2,52-e)).ushln(e-52)}},869:function(t,e,i){var n=i(2651),r=i(5716);t.exports=function(t,e){var i=r(t),a=r(e);if(0===i)return[n(0),n(1)];if(0===a)return[n(0),n(0)];a<0&&(t=t.neg(),e=e.neg());var s=t.gcd(e);if(s.cmpn(1))return[t.div(s),e.div(s)];return[t,e]}},6768:function(t,e,i){var n=i(6859);t.exports=function(t){return new n(t)}},6504:function(t,e,i){var n=i(869);t.exports=function(t,e){return n(t[0].mul(e[0]),t[1].mul(e[1]))}},7721:function(t,e,i){var n=i(5716);t.exports=function(t){return n(t[0])*n(t[1])}},5572:function(t,e,i){var n=i(869);t.exports=function(t,e){return n(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}},946:function(t,e,i){var n=i(1369),r=i(4025);t.exports=function(t){var e=t[0],i=t[1];if(0===e.cmpn(0))return 0;var a=e.abs().divmod(i.abs()),s=a.div,o=n(s),l=a.mod,c=e.negative!==i.negative?-1:1;if(0===l.cmpn(0))return c*o;if(o){var g=r(o)+4;return c*(o+(d=n(l.ushln(g).divRound(i)))*Math.pow(2,-g))}var u=i.bitLength()-l.bitLength()+53,d=n(l.ushln(u).divRound(i));return u<1023?c*d*Math.pow(2,-u):c*(d*=Math.pow(2,-1023))*Math.pow(2,1023-u)}},2478:function(t){function e(t,e,i,n,r){for(var a=r+1;n<=r;){var s=n+r>>>1,o=t[s];(void 0!==i?i(o,e):o-e)>=0?(a=s,r=s-1):n=s+1}return a}function i(t,e,i,n,r){for(var a=r+1;n<=r;){var s=n+r>>>1,o=t[s];(void 0!==i?i(o,e):o-e)>0?(a=s,r=s-1):n=s+1}return a}function n(t,e,i,n,r){for(var a=n-1;n<=r;){var s=n+r>>>1,o=t[s];(void 0!==i?i(o,e):o-e)<0?(a=s,n=s+1):r=s-1}return a}function r(t,e,i,n,r){for(var a=n-1;n<=r;){var s=n+r>>>1,o=t[s];(void 0!==i?i(o,e):o-e)<=0?(a=s,n=s+1):r=s-1}return a}function a(t,e,i,n,r){for(;n<=r;){var a=n+r>>>1,s=t[a],o=void 0!==i?i(s,e):s-e;if(0===o)return a;o<=0?n=a+1:r=a-1}return-1}function s(t,e,i,n,r,a){return"function"==typeof i?a(t,e,i,void 0===n?0:0|n,void 0===r?t.length-1:0|r):a(t,e,void 0,void 0===i?0:0|i,void 0===n?t.length-1:0|n)}t.exports={ge:function(t,i,n,r,a){return s(t,i,n,r,a,e)},gt:function(t,e,n,r,a){return s(t,e,n,r,a,i)},lt:function(t,e,i,r,a){return s(t,e,i,r,a,n)},le:function(t,e,i,n,a){return s(t,e,i,n,a,r)},eq:function(t,e,i,n,r){return s(t,e,i,n,r,a)}}},8828:function(t,e){function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,e|=i=((t>>>=e)>255)<<3,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=i,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},6859:function(t,e,i){!function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function a(t,e,i){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var s;"object"==typeof t?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(7790).Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function l(t,e,i){var n=o(t,i);return i-1>=e&&(n|=o(t,i-1)<<4),n}function c(t,e,i,n){for(var r=0,a=Math.min(t.length,i),s=e;s<a;s++){var o=t.charCodeAt(s)-48;r*=n,r+=o>=49?o-49+10:o>=17?o-17+10:o}return r}a.isBN=function(t){return t instanceof a||null!==t&&"object"==typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},a.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},a.prototype._initArray=function(t,e,i){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,s,o=0;if("be"===i)for(r=t.length-1,a=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},a.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,a=0,s=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=l(t,e,n)<<a,this.words[s]|=67108863&r,a>=18?(a-=18,s+=1,this.words[s]|=r>>>26):a+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=l(t,e,n)<<a,this.words[s]|=67108863&r,a>=18?(a-=18,s+=1,this.words[s]|=r>>>26):a+=8;this.strip()},a.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var n=0,r=1;r<=67108863;r*=e)n++;n--,r=r/e|0;for(var a=t.length-i,s=a%n,o=Math.min(a,a-s)+i,l=0,g=i;g<o;g+=n)l=c(t,g,g+n,e),this.imuln(r),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var u=1;for(l=c(t,g,t.length,e),g=0;g<s;g++)u*=e;this.imuln(u),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(t,e,i){i.negative=e.negative^t.negative;var n=t.length+e.length|0;i.length=n,n=n-1|0;var r=0|t.words[0],a=0|e.words[0],s=r*a,o=67108863&s,l=s/67108864|0;i.words[0]=o;for(var c=1;c<n;c++){for(var g=l>>>26,u=67108863&l,d=Math.min(c,e.length-1),h=Math.max(0,c-t.length+1);h<=d;h++){var B=c-h|0;g+=(s=(r=0|t.words[B])*(a=0|e.words[h])+u)/67108864|0,u=67108863&s}i.words[c]=0|u,l=0|g}return 0!==l?i.words[c]=0|l:i.length--,i.strip()}a.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,a=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<r|a)).toString(16);i=0!==(a=o>>>24-r&16777215)||s!==this.length-1?g[6-l.length]+l+i:l+i,(r+=2)>=26&&(r-=26,s--)}for(0!==a&&(i=a.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=u[t],h=d[t];i="";var B=this.clone();for(B.negative=0;!B.isZero();){var p=B.modn(h).toString(t);i=(B=B.idivn(h)).isZero()?p+i:g[c-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(t,e){return n(void 0!==s),this.toArrayLike(s,t,e)},a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},a.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),a=i||Math.max(1,r);n(r<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var s,o,l="le"===e,c=new t(a),g=this.clone();if(l){for(o=0;!g.isZero();o++)s=g.andln(255),g.iushrn(8),c[o]=s;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-r;o++)c[o]=0;for(o=0;!g.isZero();o++)s=g.andln(255),g.iushrn(8),c[a-o-1]=s}return c},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 8191&e||(i+=13,e>>>=13),127&e||(i+=7,e>>>=7),15&e||(i+=4,e>>>=4),3&e||(i+=2,e>>>=2),1&e||i++,i},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},a.prototype.ior=function(t){return n(!(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},a.prototype.iand=function(t){return n(!(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var n=0;n<i.length;n++)this.words[n]=e.words[n]^i.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},a.prototype.ixor=function(t){return n(!(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},a.prototype.iadd=function(t){var e,i,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,n=t):(i=t,n=this);for(var r=0,a=0;a<n.length;a++)e=(0|i.words[a])+(0|n.words[a])+r,this.words[a]=67108863&e,r=e>>>26;for(;0!==r&&a<i.length;a++)e=(0|i.words[a])+r,this.words[a]=67108863&e,r=e>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,n,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,n=t):(i=t,n=this);for(var a=0,s=0;s<n.length;s++)a=(e=(0|i.words[s])-(0|n.words[s])+a)>>26,this.words[s]=67108863&e;for(;0!==a&&s<i.length;s++)a=(e=(0|i.words[s])+a)>>26,this.words[s]=67108863&e;if(0===a&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var B=function(t,e,i){var n,r,a,s=t.words,o=e.words,l=i.words,c=0,g=0|s[0],u=8191&g,d=g>>>13,h=0|s[1],B=8191&h,p=h>>>13,F=0|s[2],f=8191&F,Q=F>>>13,I=0|s[3],U=8191&I,b=I>>>13,y=0|s[4],m=8191&y,x=y>>>13,v=0|s[5],C=8191&v,A=v>>>13,L=0|s[6],G=8191&L,R=L>>>13,S=0|s[7],w=8191&S,V=S>>>13,E=0|s[8],Z=8191&E,N=E>>>13,D=0|s[9],X=8191&D,H=D>>>13,W=0|o[0],k=8191&W,M=W>>>13,T=0|o[1],Y=8191&T,J=T>>>13,_=0|o[2],z=8191&_,O=_>>>13,K=0|o[3],P=8191&K,j=K>>>13,q=0|o[4],$=8191&q,tt=q>>>13,et=0|o[5],it=8191&et,nt=et>>>13,rt=0|o[6],at=8191&rt,st=rt>>>13,ot=0|o[7],lt=8191&ot,ct=ot>>>13,gt=0|o[8],ut=8191&gt,dt=gt>>>13,ht=0|o[9],Bt=8191&ht,pt=ht>>>13;i.negative=t.negative^e.negative,i.length=19;var Ft=(c+(n=Math.imul(u,k))|0)+((8191&(r=(r=Math.imul(u,M))+Math.imul(d,k)|0))<<13)|0;c=((a=Math.imul(d,M))+(r>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,n=Math.imul(B,k),r=(r=Math.imul(B,M))+Math.imul(p,k)|0,a=Math.imul(p,M);var ft=(c+(n=n+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,J)|0)+Math.imul(d,Y)|0))<<13)|0;c=((a=a+Math.imul(d,J)|0)+(r>>>13)|0)+(ft>>>26)|0,ft&=67108863,n=Math.imul(f,k),r=(r=Math.imul(f,M))+Math.imul(Q,k)|0,a=Math.imul(Q,M),n=n+Math.imul(B,Y)|0,r=(r=r+Math.imul(B,J)|0)+Math.imul(p,Y)|0,a=a+Math.imul(p,J)|0;var Qt=(c+(n=n+Math.imul(u,z)|0)|0)+((8191&(r=(r=r+Math.imul(u,O)|0)+Math.imul(d,z)|0))<<13)|0;c=((a=a+Math.imul(d,O)|0)+(r>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,n=Math.imul(U,k),r=(r=Math.imul(U,M))+Math.imul(b,k)|0,a=Math.imul(b,M),n=n+Math.imul(f,Y)|0,r=(r=r+Math.imul(f,J)|0)+Math.imul(Q,Y)|0,a=a+Math.imul(Q,J)|0,n=n+Math.imul(B,z)|0,r=(r=r+Math.imul(B,O)|0)+Math.imul(p,z)|0,a=a+Math.imul(p,O)|0;var It=(c+(n=n+Math.imul(u,P)|0)|0)+((8191&(r=(r=r+Math.imul(u,j)|0)+Math.imul(d,P)|0))<<13)|0;c=((a=a+Math.imul(d,j)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(m,k),r=(r=Math.imul(m,M))+Math.imul(x,k)|0,a=Math.imul(x,M),n=n+Math.imul(U,Y)|0,r=(r=r+Math.imul(U,J)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,J)|0,n=n+Math.imul(f,z)|0,r=(r=r+Math.imul(f,O)|0)+Math.imul(Q,z)|0,a=a+Math.imul(Q,O)|0,n=n+Math.imul(B,P)|0,r=(r=r+Math.imul(B,j)|0)+Math.imul(p,P)|0,a=a+Math.imul(p,j)|0;var Ut=(c+(n=n+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,tt)|0)+Math.imul(d,$)|0))<<13)|0;c=((a=a+Math.imul(d,tt)|0)+(r>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,n=Math.imul(C,k),r=(r=Math.imul(C,M))+Math.imul(A,k)|0,a=Math.imul(A,M),n=n+Math.imul(m,Y)|0,r=(r=r+Math.imul(m,J)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,J)|0,n=n+Math.imul(U,z)|0,r=(r=r+Math.imul(U,O)|0)+Math.imul(b,z)|0,a=a+Math.imul(b,O)|0,n=n+Math.imul(f,P)|0,r=(r=r+Math.imul(f,j)|0)+Math.imul(Q,P)|0,a=a+Math.imul(Q,j)|0,n=n+Math.imul(B,$)|0,r=(r=r+Math.imul(B,tt)|0)+Math.imul(p,$)|0,a=a+Math.imul(p,tt)|0;var bt=(c+(n=n+Math.imul(u,it)|0)|0)+((8191&(r=(r=r+Math.imul(u,nt)|0)+Math.imul(d,it)|0))<<13)|0;c=((a=a+Math.imul(d,nt)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(G,k),r=(r=Math.imul(G,M))+Math.imul(R,k)|0,a=Math.imul(R,M),n=n+Math.imul(C,Y)|0,r=(r=r+Math.imul(C,J)|0)+Math.imul(A,Y)|0,a=a+Math.imul(A,J)|0,n=n+Math.imul(m,z)|0,r=(r=r+Math.imul(m,O)|0)+Math.imul(x,z)|0,a=a+Math.imul(x,O)|0,n=n+Math.imul(U,P)|0,r=(r=r+Math.imul(U,j)|0)+Math.imul(b,P)|0,a=a+Math.imul(b,j)|0,n=n+Math.imul(f,$)|0,r=(r=r+Math.imul(f,tt)|0)+Math.imul(Q,$)|0,a=a+Math.imul(Q,tt)|0,n=n+Math.imul(B,it)|0,r=(r=r+Math.imul(B,nt)|0)+Math.imul(p,it)|0,a=a+Math.imul(p,nt)|0;var yt=(c+(n=n+Math.imul(u,at)|0)|0)+((8191&(r=(r=r+Math.imul(u,st)|0)+Math.imul(d,at)|0))<<13)|0;c=((a=a+Math.imul(d,st)|0)+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(w,k),r=(r=Math.imul(w,M))+Math.imul(V,k)|0,a=Math.imul(V,M),n=n+Math.imul(G,Y)|0,r=(r=r+Math.imul(G,J)|0)+Math.imul(R,Y)|0,a=a+Math.imul(R,J)|0,n=n+Math.imul(C,z)|0,r=(r=r+Math.imul(C,O)|0)+Math.imul(A,z)|0,a=a+Math.imul(A,O)|0,n=n+Math.imul(m,P)|0,r=(r=r+Math.imul(m,j)|0)+Math.imul(x,P)|0,a=a+Math.imul(x,j)|0,n=n+Math.imul(U,$)|0,r=(r=r+Math.imul(U,tt)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,tt)|0,n=n+Math.imul(f,it)|0,r=(r=r+Math.imul(f,nt)|0)+Math.imul(Q,it)|0,a=a+Math.imul(Q,nt)|0,n=n+Math.imul(B,at)|0,r=(r=r+Math.imul(B,st)|0)+Math.imul(p,at)|0,a=a+Math.imul(p,st)|0;var mt=(c+(n=n+Math.imul(u,lt)|0)|0)+((8191&(r=(r=r+Math.imul(u,ct)|0)+Math.imul(d,lt)|0))<<13)|0;c=((a=a+Math.imul(d,ct)|0)+(r>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(Z,k),r=(r=Math.imul(Z,M))+Math.imul(N,k)|0,a=Math.imul(N,M),n=n+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,J)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,J)|0,n=n+Math.imul(G,z)|0,r=(r=r+Math.imul(G,O)|0)+Math.imul(R,z)|0,a=a+Math.imul(R,O)|0,n=n+Math.imul(C,P)|0,r=(r=r+Math.imul(C,j)|0)+Math.imul(A,P)|0,a=a+Math.imul(A,j)|0,n=n+Math.imul(m,$)|0,r=(r=r+Math.imul(m,tt)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,tt)|0,n=n+Math.imul(U,it)|0,r=(r=r+Math.imul(U,nt)|0)+Math.imul(b,it)|0,a=a+Math.imul(b,nt)|0,n=n+Math.imul(f,at)|0,r=(r=r+Math.imul(f,st)|0)+Math.imul(Q,at)|0,a=a+Math.imul(Q,st)|0,n=n+Math.imul(B,lt)|0,r=(r=r+Math.imul(B,ct)|0)+Math.imul(p,lt)|0,a=a+Math.imul(p,ct)|0;var xt=(c+(n=n+Math.imul(u,ut)|0)|0)+((8191&(r=(r=r+Math.imul(u,dt)|0)+Math.imul(d,ut)|0))<<13)|0;c=((a=a+Math.imul(d,dt)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(X,k),r=(r=Math.imul(X,M))+Math.imul(H,k)|0,a=Math.imul(H,M),n=n+Math.imul(Z,Y)|0,r=(r=r+Math.imul(Z,J)|0)+Math.imul(N,Y)|0,a=a+Math.imul(N,J)|0,n=n+Math.imul(w,z)|0,r=(r=r+Math.imul(w,O)|0)+Math.imul(V,z)|0,a=a+Math.imul(V,O)|0,n=n+Math.imul(G,P)|0,r=(r=r+Math.imul(G,j)|0)+Math.imul(R,P)|0,a=a+Math.imul(R,j)|0,n=n+Math.imul(C,$)|0,r=(r=r+Math.imul(C,tt)|0)+Math.imul(A,$)|0,a=a+Math.imul(A,tt)|0,n=n+Math.imul(m,it)|0,r=(r=r+Math.imul(m,nt)|0)+Math.imul(x,it)|0,a=a+Math.imul(x,nt)|0,n=n+Math.imul(U,at)|0,r=(r=r+Math.imul(U,st)|0)+Math.imul(b,at)|0,a=a+Math.imul(b,st)|0,n=n+Math.imul(f,lt)|0,r=(r=r+Math.imul(f,ct)|0)+Math.imul(Q,lt)|0,a=a+Math.imul(Q,ct)|0,n=n+Math.imul(B,ut)|0,r=(r=r+Math.imul(B,dt)|0)+Math.imul(p,ut)|0,a=a+Math.imul(p,dt)|0;var vt=(c+(n=n+Math.imul(u,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(u,pt)|0)+Math.imul(d,Bt)|0))<<13)|0;c=((a=a+Math.imul(d,pt)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(X,Y),r=(r=Math.imul(X,J))+Math.imul(H,Y)|0,a=Math.imul(H,J),n=n+Math.imul(Z,z)|0,r=(r=r+Math.imul(Z,O)|0)+Math.imul(N,z)|0,a=a+Math.imul(N,O)|0,n=n+Math.imul(w,P)|0,r=(r=r+Math.imul(w,j)|0)+Math.imul(V,P)|0,a=a+Math.imul(V,j)|0,n=n+Math.imul(G,$)|0,r=(r=r+Math.imul(G,tt)|0)+Math.imul(R,$)|0,a=a+Math.imul(R,tt)|0,n=n+Math.imul(C,it)|0,r=(r=r+Math.imul(C,nt)|0)+Math.imul(A,it)|0,a=a+Math.imul(A,nt)|0,n=n+Math.imul(m,at)|0,r=(r=r+Math.imul(m,st)|0)+Math.imul(x,at)|0,a=a+Math.imul(x,st)|0,n=n+Math.imul(U,lt)|0,r=(r=r+Math.imul(U,ct)|0)+Math.imul(b,lt)|0,a=a+Math.imul(b,ct)|0,n=n+Math.imul(f,ut)|0,r=(r=r+Math.imul(f,dt)|0)+Math.imul(Q,ut)|0,a=a+Math.imul(Q,dt)|0;var Ct=(c+(n=n+Math.imul(B,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(B,pt)|0)+Math.imul(p,Bt)|0))<<13)|0;c=((a=a+Math.imul(p,pt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(X,z),r=(r=Math.imul(X,O))+Math.imul(H,z)|0,a=Math.imul(H,O),n=n+Math.imul(Z,P)|0,r=(r=r+Math.imul(Z,j)|0)+Math.imul(N,P)|0,a=a+Math.imul(N,j)|0,n=n+Math.imul(w,$)|0,r=(r=r+Math.imul(w,tt)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,tt)|0,n=n+Math.imul(G,it)|0,r=(r=r+Math.imul(G,nt)|0)+Math.imul(R,it)|0,a=a+Math.imul(R,nt)|0,n=n+Math.imul(C,at)|0,r=(r=r+Math.imul(C,st)|0)+Math.imul(A,at)|0,a=a+Math.imul(A,st)|0,n=n+Math.imul(m,lt)|0,r=(r=r+Math.imul(m,ct)|0)+Math.imul(x,lt)|0,a=a+Math.imul(x,ct)|0,n=n+Math.imul(U,ut)|0,r=(r=r+Math.imul(U,dt)|0)+Math.imul(b,ut)|0,a=a+Math.imul(b,dt)|0;var At=(c+(n=n+Math.imul(f,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(f,pt)|0)+Math.imul(Q,Bt)|0))<<13)|0;c=((a=a+Math.imul(Q,pt)|0)+(r>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(X,P),r=(r=Math.imul(X,j))+Math.imul(H,P)|0,a=Math.imul(H,j),n=n+Math.imul(Z,$)|0,r=(r=r+Math.imul(Z,tt)|0)+Math.imul(N,$)|0,a=a+Math.imul(N,tt)|0,n=n+Math.imul(w,it)|0,r=(r=r+Math.imul(w,nt)|0)+Math.imul(V,it)|0,a=a+Math.imul(V,nt)|0,n=n+Math.imul(G,at)|0,r=(r=r+Math.imul(G,st)|0)+Math.imul(R,at)|0,a=a+Math.imul(R,st)|0,n=n+Math.imul(C,lt)|0,r=(r=r+Math.imul(C,ct)|0)+Math.imul(A,lt)|0,a=a+Math.imul(A,ct)|0,n=n+Math.imul(m,ut)|0,r=(r=r+Math.imul(m,dt)|0)+Math.imul(x,ut)|0,a=a+Math.imul(x,dt)|0;var Lt=(c+(n=n+Math.imul(U,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(U,pt)|0)+Math.imul(b,Bt)|0))<<13)|0;c=((a=a+Math.imul(b,pt)|0)+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(X,$),r=(r=Math.imul(X,tt))+Math.imul(H,$)|0,a=Math.imul(H,tt),n=n+Math.imul(Z,it)|0,r=(r=r+Math.imul(Z,nt)|0)+Math.imul(N,it)|0,a=a+Math.imul(N,nt)|0,n=n+Math.imul(w,at)|0,r=(r=r+Math.imul(w,st)|0)+Math.imul(V,at)|0,a=a+Math.imul(V,st)|0,n=n+Math.imul(G,lt)|0,r=(r=r+Math.imul(G,ct)|0)+Math.imul(R,lt)|0,a=a+Math.imul(R,ct)|0,n=n+Math.imul(C,ut)|0,r=(r=r+Math.imul(C,dt)|0)+Math.imul(A,ut)|0,a=a+Math.imul(A,dt)|0;var Gt=(c+(n=n+Math.imul(m,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(m,pt)|0)+Math.imul(x,Bt)|0))<<13)|0;c=((a=a+Math.imul(x,pt)|0)+(r>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,n=Math.imul(X,it),r=(r=Math.imul(X,nt))+Math.imul(H,it)|0,a=Math.imul(H,nt),n=n+Math.imul(Z,at)|0,r=(r=r+Math.imul(Z,st)|0)+Math.imul(N,at)|0,a=a+Math.imul(N,st)|0,n=n+Math.imul(w,lt)|0,r=(r=r+Math.imul(w,ct)|0)+Math.imul(V,lt)|0,a=a+Math.imul(V,ct)|0,n=n+Math.imul(G,ut)|0,r=(r=r+Math.imul(G,dt)|0)+Math.imul(R,ut)|0,a=a+Math.imul(R,dt)|0;var Rt=(c+(n=n+Math.imul(C,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(C,pt)|0)+Math.imul(A,Bt)|0))<<13)|0;c=((a=a+Math.imul(A,pt)|0)+(r>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(X,at),r=(r=Math.imul(X,st))+Math.imul(H,at)|0,a=Math.imul(H,st),n=n+Math.imul(Z,lt)|0,r=(r=r+Math.imul(Z,ct)|0)+Math.imul(N,lt)|0,a=a+Math.imul(N,ct)|0,n=n+Math.imul(w,ut)|0,r=(r=r+Math.imul(w,dt)|0)+Math.imul(V,ut)|0,a=a+Math.imul(V,dt)|0;var St=(c+(n=n+Math.imul(G,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(G,pt)|0)+Math.imul(R,Bt)|0))<<13)|0;c=((a=a+Math.imul(R,pt)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(X,lt),r=(r=Math.imul(X,ct))+Math.imul(H,lt)|0,a=Math.imul(H,ct),n=n+Math.imul(Z,ut)|0,r=(r=r+Math.imul(Z,dt)|0)+Math.imul(N,ut)|0,a=a+Math.imul(N,dt)|0;var wt=(c+(n=n+Math.imul(w,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(w,pt)|0)+Math.imul(V,Bt)|0))<<13)|0;c=((a=a+Math.imul(V,pt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(X,ut),r=(r=Math.imul(X,dt))+Math.imul(H,ut)|0,a=Math.imul(H,dt);var Vt=(c+(n=n+Math.imul(Z,Bt)|0)|0)+((8191&(r=(r=r+Math.imul(Z,pt)|0)+Math.imul(N,Bt)|0))<<13)|0;c=((a=a+Math.imul(N,pt)|0)+(r>>>13)|0)+(Vt>>>26)|0,Vt&=67108863;var Et=(c+(n=Math.imul(X,Bt))|0)+((8191&(r=(r=Math.imul(X,pt))+Math.imul(H,Bt)|0))<<13)|0;return c=((a=Math.imul(H,pt))+(r>>>13)|0)+(Et>>>26)|0,Et&=67108863,l[0]=Ft,l[1]=ft,l[2]=Qt,l[3]=It,l[4]=Ut,l[5]=bt,l[6]=yt,l[7]=mt,l[8]=xt,l[9]=vt,l[10]=Ct,l[11]=At,l[12]=Lt,l[13]=Gt,l[14]=Rt,l[15]=St,l[16]=wt,l[17]=Vt,l[18]=Et,0!==c&&(l[19]=c,i.length++),i};function p(t,e,i){return(new F).mulp(t,e,i)}function F(t,e){this.x=t,this.y=e}Math.imul||(B=h),a.prototype.mulTo=function(t,e){var i,n=this.length+t.length;return i=10===this.length&&10===t.length?B(this,t,e):n<63?h(this,t,e):n<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var n=0,r=0,a=0;a<i.length-1;a++){var s=r;r=0;for(var o=67108863&n,l=Math.min(a,e.length-1),c=Math.max(0,a-t.length+1);c<=l;c++){var g=a-c,u=(0|t.words[g])*(0|e.words[c]),d=67108863&u;o=67108863&(d=d+o|0),r+=(s=(s=s+(u/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}i.words[a]=o,n=s,s=r}return 0!==n?i.words[a]=n:i.length--,i.strip()}(this,t,e):p(this,t,e),i},F.prototype.makeRBT=function(t){for(var e=new Array(t),i=a.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},F.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var n=0,r=0;r<e;r++)n|=(1&t)<<e-r-1,t>>=1;return n},F.prototype.permute=function(t,e,i,n,r,a){for(var s=0;s<a;s++)n[s]=e[t[s]],r[s]=i[t[s]]},F.prototype.transform=function(t,e,i,n,r,a){this.permute(a,t,e,i,n,r);for(var s=1;s<r;s<<=1)for(var o=s<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),g=0;g<r;g+=o)for(var u=l,d=c,h=0;h<s;h++){var B=i[g+h],p=n[g+h],F=i[g+h+s],f=n[g+h+s],Q=u*F-d*f;f=u*f+d*F,F=Q,i[g+h]=B+F,n[g+h]=p+f,i[g+h+s]=B-F,n[g+h+s]=p-f,h!==o&&(Q=l*u-c*d,d=l*d+c*u,u=Q)}},F.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),n=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+n},F.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var n=0;n<i/2;n++){var r=t[n];t[n]=t[i-n-1],t[i-n-1]=r,r=e[n],e[n]=-e[i-n-1],e[i-n-1]=-r}},F.prototype.normalize13b=function(t,e){for(var i=0,n=0;n<e/2;n++){var r=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+i;t[n]=67108863&r,i=r<67108864?0:r/67108864|0}return t},F.prototype.convert13b=function(t,e,i,r){for(var a=0,s=0;s<e;s++)a+=0|t[s],i[2*s]=8191&a,a>>>=13,i[2*s+1]=8191&a,a>>>=13;for(s=2*e;s<r;++s)i[s]=0;n(0===a),n(!(-8192&a))},F.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},F.prototype.mulp=function(t,e,i){var n=2*this.guessLen13b(t.length,e.length),r=this.makeRBT(n),a=this.stub(n),s=new Array(n),o=new Array(n),l=new Array(n),c=new Array(n),g=new Array(n),u=new Array(n),d=i.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,a,o,l,n,r),this.transform(c,a,g,u,n,r);for(var h=0;h<n;h++){var B=o[h]*g[h]-l[h]*u[h];l[h]=o[h]*u[h]+l[h]*g[h],o[h]=B}return this.conjugate(o,l,n),this.transform(o,l,d,a,n,r),this.conjugate(d,a,n),this.normalize13b(d,n),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),p(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,a=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=a>>>26,this.words[i]=67108863&a}return 0!==e&&(this.words[i]=e,this.length++),this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var n=i/26|0,r=i%26;e[i]=(t.words[n]&1<<r)>>>r}return e}(t);if(0===e.length)return new a(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var r=i.sqr();n<e.length;n++,r=r.sqr())0!==e[n]&&(i=i.mul(r));return i},a.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,i=t%26,r=(t-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&a,l=(0|this.words[e])-o<<i;this.words[e]=l|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,i){var r;n("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var a=t%26,s=Math.min((t-a)/26,this.length),o=67108863^67108863>>>a<<a,l=i;if(r-=s,r=Math.max(0,r),l){for(var c=0;c<s;c++)l.words[c]=this.words[c];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var g=0;for(c=this.length-1;c>=0&&(0!==g||c>=r);c--){var u=0|this.words[c];this.words[c]=g<<26-a|u>>>a,g=u&o}return l&&0!==g&&(l.words[l.length++]=g),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(t,e,i){return n(0===this.negative),this.iushrn(t,e,i)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i)&&!!(this.words[i]&r)},a.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,i){var r,a,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){a=(0|this.words[r+i])+o;var l=(0|t.words[r])*e;o=((a-=67108863&l)>>26)-(l/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this.strip();for(n(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),r=t,s=0|r.words[r.length-1];0!==(i=26-this._countBits(s))&&(r=r.ushln(i),n.iushln(i),s=0|r.words[r.length-1]);var o,l=n.length-r.length;if("mod"!==e){(o=new a(null)).length=l+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var g=n.clone()._ishlnsubmul(r,1,l);0===g.negative&&(n=g,o&&(o.words[l]=1));for(var u=l-1;u>=0;u--){var d=67108864*(0|n.words[r.length+u])+(0|n.words[r.length+u-1]);for(d=Math.min(d/s|0,67108863),n._ishlnsubmul(r,d,u);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(r,1,u),n.isZero()||(n.negative^=1);o&&(o.words[u]=d)}return o&&o.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:o||null,mod:n}},a.prototype.divmod=function(t,e,i){return n(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(r=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(r=o.div.neg()),{div:r,mod:o.mod}):this.negative&t.negative?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,s,o},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),r=t.andln(1),a=i.cmp(n);return a<0||1===r&&0===a?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},a.prototype.idivn=function(t){n(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new a(1),s=new a(0),o=new a(0),l=new a(1),c=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++c;for(var g=i.clone(),u=e.clone();!e.isZero();){for(var d=0,h=1;!(e.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(r.isOdd()||s.isOdd())&&(r.iadd(g),s.isub(u)),r.iushrn(1),s.iushrn(1);for(var B=0,p=1;!(i.words[0]&p)&&B<26;++B,p<<=1);if(B>0)for(i.iushrn(B);B-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(g),l.isub(u)),o.iushrn(1),l.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(o),s.isub(l)):(i.isub(e),o.isub(r),l.isub(s))}return{a:o,b:l,gcd:i.iushln(c)}},a.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,s=new a(1),o=new a(0),l=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,g=1;!(e.words[0]&g)&&c<26;++c,g<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var u=0,d=1;!(i.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(r=0===e.cmpn(1)?s:o).cmpn(0)<0&&r.iadd(t),r},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var n=0;e.isEven()&&i.isEven();n++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=e.cmp(i);if(r<0){var a=e;e=i,i=a}else if(0===r||0===i.cmpn(1))break;e.isub(i)}return i.iushln(n)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return!(1&this.words[0])},a.prototype.isOdd=function(){return!(1&~this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,s=i;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),n(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var n=0|this.words[i],r=0|t.words[i];if(n!==r){n<r?e=-1:n>r&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new m(t)},a.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var f={k256:null,p224:null,p192:null,p25519:null};function Q(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function I(){Q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function U(){Q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){Q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){Q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function m(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){m.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Q.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},Q.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:i.ucmp(this.p);return 0===n?(i.words[0]=0,i.length=1):n>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},Q.prototype.split=function(t,e){t.iushrn(this.n,0,e)},Q.prototype.imulK=function(t){return t.imul(this.k)},r(I,Q),I.prototype.split=function(t,e){for(var i=4194303,n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var a=t.words[9];for(e.words[e.length++]=a&i,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(s&i)<<4|a>>>22,a=s}a>>>=22,t.words[r-10]=a,0===a&&t.length>10?t.length-=10:t.length-=9},I.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var n=0|t.words[i];e+=977*n,t.words[i]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(U,Q),r(b,Q),r(y,Q),y.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var n=19*(0|t.words[i])+e,r=67108863&n;n>>>=26,t.words[i]=r,e=n}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(f[t])return f[t];var e;if("k256"===t)e=new I;else if("p224"===t)e=new U;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new y}return f[t]=e,e},m.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},m.prototype._verify2=function(t,e){n(!(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},m.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},m.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},m.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},m.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},m.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},m.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},m.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},m.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},m.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},m.prototype.isqr=function(t){return this.imul(t,t.clone())},m.prototype.sqr=function(t){return this.mul(t,t)},m.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var i=this.m.add(new a(1)).iushrn(2);return this.pow(t,i)}for(var r=this.m.subn(1),s=0;!r.isZero()&&0===r.andln(1);)s++,r.iushrn(1);n(!r.isZero());var o=new a(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new a(2*g*g).toRed(this);0!==this.pow(g,c).cmp(l);)g.redIAdd(l);for(var u=this.pow(g,r),d=this.pow(t,r.addn(1).iushrn(1)),h=this.pow(t,r),B=s;0!==h.cmp(o);){for(var p=h,F=0;0!==p.cmp(o);F++)p=p.redSqr();n(F<B);var f=this.pow(u,new a(1).iushln(B-F-1));d=d.redMul(f),u=f.redSqr(),h=h.redMul(u),B=F}return d},m.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},m.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var r=i[0],s=0,o=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],g=l-1;g>=0;g--){var u=c>>g&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==s?(s<<=1,s|=u,(4===++o||0===n&&0===g)&&(r=this.mul(r,i[s]),o=0,s=0)):o=0}l=26}return r},m.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},m.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new x(t)},r(x,m),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(n).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(n).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},6204:function(t){t.exports=function(t){var e,i,n,r=t.length,a=0;for(e=0;e<r;++e)a+=t[e].length;var s=new Array(a),o=0;for(e=0;e<r;++e){var l=t[e],c=l.length;for(i=0;i<c;++i){var g=s[o++]=new Array(c-1),u=0;for(n=0;n<c;++n)n!==i&&(g[u++]=l[n]);if(1&i){var d=g[1];g[1]=g[0],g[0]=d}}}return s}},6867:function(t,e,i){t.exports=function(t,e,i){switch(arguments.length){case 1:return function(t){return n=[],c(t,t,g,!0),n}(t);case 2:return"function"==typeof e?c(t,t,e,!0):function(t,e){return n=[],c(t,e,g,!1),n}(t,e);case 3:return c(t,e,i,!1);default:throw new Error("box-intersect: Invalid arguments")}};var n,r=i(1888),a=i(855),s=i(7150);function o(t,e){for(var i=0;i<t;++i)if(!(e[i]<=e[i+t]))return!0;return!1}function l(t,e,i,n){for(var r=0,a=0,s=0,l=t.length;s<l;++s){var c=t[s];if(!o(e,c)){for(var g=0;g<2*e;++g)i[r++]=c[g];n[a++]=s}}return a}function c(t,e,i,n){var o=t.length,c=e.length;if(!(o<=0||c<=0)){var g=t[0].length>>>1;if(!(g<=0)){var u,d=r.mallocDouble(2*g*o),h=r.mallocInt32(o);if((o=l(t,g,d,h))>0){if(1===g&&n)a.init(o),u=a.sweepComplete(g,i,0,o,d,h,0,o,d,h);else{var B=r.mallocDouble(2*g*c),p=r.mallocInt32(c);(c=l(e,g,B,p))>0&&(a.init(o+c),u=1===g?a.sweepBipartite(g,i,0,o,d,h,0,c,B,p):s(g,i,n,o,d,h,c,B,p),r.free(B),r.free(p))}r.free(d),r.free(h)}return u}}}function g(t,e){n.push([t,e])}},2455:function(t,e){function i(t){return t?function(t,e,i,n,r,a,s,o,l,c,g){return r-n>l-o?function(t,e,i,n,r,a,s,o,l,c,g){for(var u=2*t,d=n,h=u*n;d<r;++d,h+=u){var B=a[e+h],p=a[e+h+t],F=s[d];t:for(var f=o,Q=u*o;f<l;++f,Q+=u){var I=c[e+Q],U=c[e+Q+t],b=g[f];if(!(U<B||p<I)){for(var y=e+1;y<t;++y){var m=a[y+h],x=a[y+t+h],v=c[y+Q],C=c[y+t+Q];if(x<v||C<m)continue t}var A=i(F,b);if(void 0!==A)return A}}}}(t,e,i,n,r,a,s,o,l,c,g):function(t,e,i,n,r,a,s,o,l,c,g){for(var u=2*t,d=o,h=u*o;d<l;++d,h+=u){var B=c[e+h],p=c[e+h+t],F=g[d];t:for(var f=n,Q=u*n;f<r;++f,Q+=u){var I=a[e+Q],U=a[e+Q+t],b=s[f];if(!(p<I||U<B)){for(var y=e+1;y<t;++y){var m=a[y+Q],x=a[y+t+Q],v=c[y+h],C=c[y+t+h];if(x<v||C<m)continue t}var A=i(b,F);if(void 0!==A)return A}}}}(t,e,i,n,r,a,s,o,l,c,g)}:function(t,e,i,n,r,a,s,o,l,c,g,u){return a-r>c-l?n?function(t,e,i,n,r,a,s,o,l,c,g){for(var u=2*t,d=n,h=u*n;d<r;++d,h+=u){var B=a[e+h],p=a[e+h+t],F=s[d];t:for(var f=o,Q=u*o;f<l;++f,Q+=u){var I=c[e+Q],U=g[f];if(!(I<=B||p<I)){for(var b=e+1;b<t;++b){var y=a[b+h],m=a[b+t+h],x=c[b+Q],v=c[b+t+Q];if(m<x||v<y)continue t}var C=i(U,F);if(void 0!==C)return C}}}}(t,e,i,r,a,s,o,l,c,g,u):function(t,e,i,n,r,a,s,o,l,c,g){for(var u=2*t,d=n,h=u*n;d<r;++d,h+=u){var B=a[e+h],p=a[e+h+t],F=s[d];t:for(var f=o,Q=u*o;f<l;++f,Q+=u){var I=c[e+Q],U=g[f];if(!(I<B||p<I)){for(var b=e+1;b<t;++b){var y=a[b+h],m=a[b+t+h],x=c[b+Q],v=c[b+t+Q];if(m<x||v<y)continue t}var C=i(F,U);if(void 0!==C)return C}}}}(t,e,i,r,a,s,o,l,c,g,u):n?function(t,e,i,n,r,a,s,o,l,c,g){for(var u=2*t,d=o,h=u*o;d<l;++d,h+=u){var B=c[e+h],p=g[d];t:for(var F=n,f=u*n;F<r;++F,f+=u){var Q=a[e+f],I=a[e+f+t],U=s[F];if(!(B<=Q||I<B)){for(var b=e+1;b<t;++b){var y=a[b+f],m=a[b+t+f],x=c[b+h],v=c[b+t+h];if(m<x||v<y)continue t}var C=i(p,U);if(void 0!==C)return C}}}}(t,e,i,r,a,s,o,l,c,g,u):function(t,e,i,n,r,a,s,o,l,c,g){for(var u=2*t,d=o,h=u*o;d<l;++d,h+=u){var B=c[e+h],p=g[d];t:for(var F=n,f=u*n;F<r;++F,f+=u){var Q=a[e+f],I=a[e+f+t],U=s[F];if(!(B<Q||I<B)){for(var b=e+1;b<t;++b){var y=a[b+f],m=a[b+t+f],x=c[b+h],v=c[b+t+h];if(m<x||v<y)continue t}var C=i(U,p);if(void 0!==C)return C}}}}(t,e,i,r,a,s,o,l,c,g,u)}}e.partial=i(!1),e.full=i(!0)},7150:function(t,e,i){t.exports=function(t,e,i,a,g,A,L,G,R){!function(t,e){var i=8*r.log2(e+1)*(t+1)|0,a=r.nextPow2(U*i);y.length<a&&(n.free(y),y=n.mallocInt32(a));var s=r.nextPow2(b*i);m.length<s&&(n.free(m),m=n.mallocDouble(s))}(t,a+L);var S,w=0,V=2*t;x(w++,0,0,a,0,L,i?16:0,-1/0,1/0),i||x(w++,0,0,L,0,a,1,-1/0,1/0);for(;w>0;){var E=(w-=1)*U,Z=y[E],N=y[E+1],D=y[E+2],X=y[E+3],H=y[E+4],W=y[E+5],k=w*b,M=m[k],T=m[k+1],Y=1&W,J=!!(16&W),_=g,z=A,O=G,K=R;if(Y&&(_=G,z=R,O=g,K=A),!(2&W&&N>=(D=F(t,Z,N,D,_,z,T))||4&W&&(N=f(t,Z,N,D,_,z,M))>=D)){var P=D-N,j=H-X;if(J){if(t*P*(P+j)<h){if(void 0!==(S=l.scanComplete(t,Z,e,N,D,_,z,X,H,O,K)))return S;continue}}else{if(t*Math.min(P,j)<u){if(void 0!==(S=s(t,Z,e,Y,N,D,_,z,X,H,O,K)))return S;continue}if(t*P*j<d){if(void 0!==(S=l.scanBipartite(t,Z,e,Y,N,D,_,z,X,H,O,K)))return S;continue}}var q=B(t,Z,N,D,_,z,M,T);if(N<q)if(t*(q-N)<u){if(void 0!==(S=o(t,Z+1,e,N,q,_,z,X,H,O,K)))return S}else if(Z===t-2){if(void 0!==(S=Y?l.sweepBipartite(t,e,X,H,O,K,N,q,_,z):l.sweepBipartite(t,e,N,q,_,z,X,H,O,K)))return S}else x(w++,Z+1,N,q,X,H,Y,-1/0,1/0),x(w++,Z+1,X,H,N,q,1^Y,-1/0,1/0);if(q<D){var $=c(t,Z,X,H,O,K),tt=O[V*$+Z],et=p(t,Z,$,H,O,K,tt);if(et<H&&x(w++,Z,q,D,et,H,(4|Y)+(J?16:0),tt,T),X<$&&x(w++,Z,q,D,X,$,(2|Y)+(J?16:0),M,tt),$+1===et){if(void 0!==(S=J?C(t,Z,e,q,D,_,z,$,O,K[$]):v(t,Z,e,Y,q,D,_,z,$,O,K[$])))return S}else if($<et){var it;if(J){if(q<(it=Q(t,Z,q,D,_,z,tt))){var nt=p(t,Z,q,it,_,z,tt);if(Z===t-2){if(q<nt&&void 0!==(S=l.sweepComplete(t,e,q,nt,_,z,$,et,O,K)))return S;if(nt<it&&void 0!==(S=l.sweepBipartite(t,e,nt,it,_,z,$,et,O,K)))return S}else q<nt&&x(w++,Z+1,q,nt,$,et,16,-1/0,1/0),nt<it&&(x(w++,Z+1,nt,it,$,et,0,-1/0,1/0),x(w++,Z+1,$,et,nt,it,1,-1/0,1/0))}}else q<(it=Y?I(t,Z,q,D,_,z,tt):Q(t,Z,q,D,_,z,tt))&&(Z===t-2?S=Y?l.sweepBipartite(t,e,$,et,O,K,q,it,_,z):l.sweepBipartite(t,e,q,it,_,z,$,et,O,K):(x(w++,Z+1,q,it,$,et,Y,-1/0,1/0),x(w++,Z+1,$,et,q,it,1^Y,-1/0,1/0)))}}}}};var n=i(1888),r=i(8828),a=i(2455),s=a.partial,o=a.full,l=i(855),c=i(3545),g=i(8105),u=128,d=1<<22,h=1<<22,B=g("!(lo>=p0)&&!(p1>=hi)"),p=g("lo===p0"),F=g("lo<p0"),f=g("hi<=p0"),Q=g("lo<=p0&&p0<=hi"),I=g("lo<p0&&p0<=hi"),U=6,b=2,y=n.mallocInt32(1024),m=n.mallocDouble(1024);function x(t,e,i,n,r,a,s,o,l){var c=U*t;y[c]=e,y[c+1]=i,y[c+2]=n,y[c+3]=r,y[c+4]=a,y[c+5]=s;var g=b*t;m[g]=o,m[g+1]=l}function v(t,e,i,n,r,a,s,o,l,c,g){var u=2*t,d=l*u,h=c[d+e];t:for(var B=r,p=r*u;B<a;++B,p+=u){var F=s[p+e],f=s[p+e+t];if(!(h<F||f<h)&&(!n||h!==F)){for(var Q,I=o[B],U=e+1;U<t;++U){F=s[p+U],f=s[p+U+t];var b=c[d+U],y=c[d+U+t];if(f<b||y<F)continue t}if(void 0!==(Q=n?i(g,I):i(I,g)))return Q}}}function C(t,e,i,n,r,a,s,o,l,c){var g=2*t,u=o*g,d=l[u+e];t:for(var h=n,B=n*g;h<r;++h,B+=g){var p=s[h];if(p!==c){var F=a[B+e],f=a[B+e+t];if(!(d<F||f<d)){for(var Q=e+1;Q<t;++Q){F=a[B+Q],f=a[B+Q+t];var I=l[u+Q],U=l[u+Q+t];if(f<I||U<F)continue t}var b=i(p,c);if(void 0!==b)return b}}}}},3545:function(t,e,i){t.exports=function(t,e,i,s,o,l){if(s<=i+1)return i;var c=i,g=s,u=s+i>>>1,d=2*t,h=u,B=o[d*u+e];for(;c<g;){if(g-c<r){a(t,e,c,g,o,l),B=o[d*u+e];break}var p=g-c,F=Math.random()*p+c|0,f=o[d*F+e],Q=Math.random()*p+c|0,I=o[d*Q+e],U=Math.random()*p+c|0,b=o[d*U+e];f<=I?b>=I?(h=Q,B=I):f>=b?(h=F,B=f):(h=U,B=b):I>=b?(h=Q,B=I):b>=f?(h=F,B=f):(h=U,B=b);for(var y=d*(g-1),m=d*h,x=0;x<d;++x,++y,++m){var v=o[y];o[y]=o[m],o[m]=v}var C=l[g-1];l[g-1]=l[h],l[h]=C;for(y=d*(g-1),m=d*(h=n(t,e,c,g-1,o,l,B)),x=0;x<d;++x,++y,++m){v=o[y];o[y]=o[m],o[m]=v}C=l[g-1];if(l[g-1]=l[h],l[h]=C,u<h){for(g=h-1;c<g&&o[d*(g-1)+e]===B;)g-=1;g+=1}else{if(!(h<u))break;for(c=h+1;c<g&&o[d*c+e]===B;)c+=1}}return n(t,e,i,u,o,l,o[d*u+e])};var n=i(8105)("lo<p0"),r=8;function a(t,e,i,n,r,a){for(var s=2*t,o=s*(i+1)+e,l=i+1;l<n;++l,o+=s)for(var c=r[o],g=l,u=s*(l-1);g>i&&r[u+e]>c;--g,u-=s){for(var d=u,h=u+s,B=0;B<s;++B,++d,++h){var p=r[d];r[d]=r[h],r[h]=p}var F=a[g];a[g]=a[g-1],a[g-1]=F}}},8105:function(t){t.exports=function(t){return e[t]};var e={"lo===p0":function(t,e,i,n,r,a,s){for(var o=2*t,l=o*i,c=l,g=i,u=e,d=i;n>d;++d,l+=o){if(r[l+u]===s)if(g===d)g+=1,c+=o;else{for(var h=0;o>h;++h){var B=r[l+h];r[l+h]=r[c],r[c++]=B}var p=a[d];a[d]=a[g],a[g++]=p}}return g},"lo<p0":function(t,e,i,n,r,a,s){for(var o=2*t,l=o*i,c=l,g=i,u=e,d=i;n>d;++d,l+=o){if(r[l+u]<s)if(g===d)g+=1,c+=o;else{for(var h=0;o>h;++h){var B=r[l+h];r[l+h]=r[c],r[c++]=B}var p=a[d];a[d]=a[g],a[g++]=p}}return g},"lo<=p0":function(t,e,i,n,r,a,s){for(var o=2*t,l=o*i,c=l,g=i,u=t+e,d=i;n>d;++d,l+=o){if(r[l+u]<=s)if(g===d)g+=1,c+=o;else{for(var h=0;o>h;++h){var B=r[l+h];r[l+h]=r[c],r[c++]=B}var p=a[d];a[d]=a[g],a[g++]=p}}return g},"hi<=p0":function(t,e,i,n,r,a,s){for(var o=2*t,l=o*i,c=l,g=i,u=t+e,d=i;n>d;++d,l+=o){if(r[l+u]<=s)if(g===d)g+=1,c+=o;else{for(var h=0;o>h;++h){var B=r[l+h];r[l+h]=r[c],r[c++]=B}var p=a[d];a[d]=a[g],a[g++]=p}}return g},"lo<p0&&p0<=hi":function(t,e,i,n,r,a,s){for(var o=2*t,l=o*i,c=l,g=i,u=e,d=t+e,h=i;n>h;++h,l+=o){var B=r[l+u],p=r[l+d];if(B<s&&s<=p)if(g===h)g+=1,c+=o;else{for(var F=0;o>F;++F){var f=r[l+F];r[l+F]=r[c],r[c++]=f}var Q=a[h];a[h]=a[g],a[g++]=Q}}return g},"lo<=p0&&p0<=hi":function(t,e,i,n,r,a,s){for(var o=2*t,l=o*i,c=l,g=i,u=e,d=t+e,h=i;n>h;++h,l+=o){var B=r[l+u],p=r[l+d];if(B<=s&&s<=p)if(g===h)g+=1,c+=o;else{for(var F=0;o>F;++F){var f=r[l+F];r[l+F]=r[c],r[c++]=f}var Q=a[h];a[h]=a[g],a[g++]=Q}}return g},"!(lo>=p0)&&!(p1>=hi)":function(t,e,i,n,r,a,s,o){for(var l=2*t,c=l*i,g=c,u=i,d=e,h=t+e,B=i;n>B;++B,c+=l){var p=r[c+d],F=r[c+h];if(!(p>=s||o>=F))if(u===B)u+=1,g+=l;else{for(var f=0;l>f;++f){var Q=r[c+f];r[c+f]=r[g],r[g++]=Q}var I=a[B];a[B]=a[u],a[u++]=I}}return u}}},4192:function(t){t.exports=function(t,n){n<=4*e?i(0,n-1,t):c(0,n-1,t)};var e=32;function i(t,e,i){for(var n=2*(t+1),r=t+1;r<=e;++r){for(var a=i[n++],s=i[n++],o=r,l=n-2;o-- >t;){var c=i[l-2],g=i[l-1];if(c<a)break;if(c===a&&g<s)break;i[l]=c,i[l+1]=g,l-=2}i[l]=a,i[l+1]=s}}function n(t,e,i){e*=2;var n=i[t*=2],r=i[t+1];i[t]=i[e],i[t+1]=i[e+1],i[e]=n,i[e+1]=r}function r(t,e,i){e*=2,i[t*=2]=i[e],i[t+1]=i[e+1]}function a(t,e,i,n){e*=2,i*=2;var r=n[t*=2],a=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=n[i],n[e+1]=n[i+1],n[i]=r,n[i+1]=a}function s(t,e,i,n,r){e*=2,r[t*=2]=r[e],r[e]=i,r[t+1]=r[e+1],r[e+1]=n}function o(t,e,i){e*=2;var n=i[t*=2],r=i[e];return!(n<r)&&(n!==r||i[t+1]>i[e+1])}function l(t,e,i,n){var r=n[t*=2];return r<e||r===e&&n[t+1]<i}function c(t,g,u){var d=(g-t+1)/6|0,h=t+d,B=g-d,p=t+g>>1,F=p-d,f=p+d,Q=h,I=F,U=p,b=f,y=B,m=t+1,x=g-1,v=0;o(Q,I,u)&&(v=Q,Q=I,I=v),o(b,y,u)&&(v=b,b=y,y=v),o(Q,U,u)&&(v=Q,Q=U,U=v),o(I,U,u)&&(v=I,I=U,U=v),o(Q,b,u)&&(v=Q,Q=b,b=v),o(U,b,u)&&(v=U,U=b,b=v),o(I,y,u)&&(v=I,I=y,y=v),o(I,U,u)&&(v=I,I=U,U=v),o(b,y,u)&&(v=b,b=y,y=v);for(var C=u[2*I],A=u[2*I+1],L=u[2*b],G=u[2*b+1],R=2*Q,S=2*U,w=2*y,V=2*h,E=2*p,Z=2*B,N=0;N<2;++N){var D=u[R+N],X=u[S+N],H=u[w+N];u[V+N]=D,u[E+N]=X,u[Z+N]=H}r(F,t,u),r(f,g,u);for(var W=m;W<=x;++W)if(l(W,C,A,u))W!==m&&n(W,m,u),++m;else if(!l(W,L,G,u))for(;;){if(l(x,L,G,u)){l(x,C,A,u)?(a(W,m,x,u),++m,--x):(n(W,x,u),--x);break}if(--x<W)break}s(t,m-1,C,A,u),s(g,x+1,L,G,u),m-2-t<=e?i(t,m-2,u):c(t,m-2,u),g-(x+2)<=e?i(x+2,g,u):c(x+2,g,u),x-m<=e?i(m,x,u):c(m,x,u)}},855:function(t,e,i){t.exports={init:function(t){var e=r.nextPow2(t);l.length<e&&(n.free(l),l=n.mallocInt32(e));c.length<e&&(n.free(c),c=n.mallocInt32(e));g.length<e&&(n.free(g),g=n.mallocInt32(e));u.length<e&&(n.free(u),u=n.mallocInt32(e));d.length<e&&(n.free(d),d=n.mallocInt32(e));h.length<e&&(n.free(h),h=n.mallocInt32(e));var i=8*e;B.length<i&&(n.free(B),B=n.mallocDouble(i))},sweepBipartite:function(t,e,i,n,r,o,d,h,f,Q){for(var I=0,U=2*t,b=t-1,y=U-1,m=i;m<n;++m){var x=o[m],v=U*m;B[I++]=r[v+b],B[I++]=-(x+1),B[I++]=r[v+y],B[I++]=x}for(m=d;m<h;++m){x=Q[m]+s;var C=U*m;B[I++]=f[C+b],B[I++]=-x,B[I++]=f[C+y],B[I++]=x}var A=I>>>1;a(B,A);var L=0,G=0;for(m=0;m<A;++m){var R=0|B[2*m+1];if(R>=s)p(g,u,G--,R=R-s|0);else if(R>=0)p(l,c,L--,R);else if(R<=-268435456){R=-R-s|0;for(var S=0;S<L;++S){if(void 0!==(w=e(l[S],R)))return w}F(g,u,G++,R)}else{R=-R-1|0;for(S=0;S<G;++S){var w;if(void 0!==(w=e(R,g[S])))return w}F(l,c,L++,R)}}},sweepComplete:function(t,e,i,n,r,s,o,f,Q,I){for(var U=0,b=2*t,y=t-1,m=b-1,x=i;x<n;++x){var v=s[x]+1<<1,C=b*x;B[U++]=r[C+y],B[U++]=-v,B[U++]=r[C+m],B[U++]=v}for(x=o;x<f;++x){v=I[x]+1<<1;var A=b*x;B[U++]=Q[A+y],B[U++]=1|-v,B[U++]=Q[A+m],B[U++]=1|v}var L=U>>>1;a(B,L);var G=0,R=0,S=0;for(x=0;x<L;++x){var w=0|B[2*x+1],V=1&w;if(x<L-1&&w>>1==B[2*x+3]>>1&&(V=2,x+=1),w<0){for(var E=-(w>>1)-1,Z=0;Z<S;++Z){if(void 0!==(N=e(d[Z],E)))return N}if(0!==V)for(Z=0;Z<G;++Z){if(void 0!==(N=e(l[Z],E)))return N}if(1!==V)for(Z=0;Z<R;++Z){var N;if(void 0!==(N=e(g[Z],E)))return N}0===V?F(l,c,G++,E):1===V?F(g,u,R++,E):2===V&&F(d,h,S++,E)}else{E=(w>>1)-1;0===V?p(l,c,G--,E):1===V?p(g,u,R--,E):2===V&&p(d,h,S--,E)}}},scanBipartite:function(t,e,i,n,r,o,g,u,d,h,f,Q){var I=0,U=2*t,b=e,y=e+t,m=1,x=1;n?x=s:m=s;for(var v=r;v<o;++v){var C=v+m,A=U*v;B[I++]=g[A+b],B[I++]=-C,B[I++]=g[A+y],B[I++]=C}for(v=d;v<h;++v){C=v+x;var L=U*v;B[I++]=f[L+b],B[I++]=-C}var G=I>>>1;a(B,G);var R=0;for(v=0;v<G;++v){var S=0|B[2*v+1];if(S<0){var w=!1;if((C=-S)>=s?(w=!n,C-=s):(w=!!n,C-=1),w)F(l,c,R++,C);else{var V=Q[C],E=U*C,Z=f[E+e+1],N=f[E+e+1+t];t:for(var D=0;D<R;++D){var X=l[D],H=U*X;if(!(N<g[H+e+1]||g[H+e+1+t]<Z)){for(var W=e+2;W<t;++W)if(f[E+W+t]<g[H+W]||g[H+W+t]<f[E+W])continue t;var k,M=u[X];if(void 0!==(k=n?i(V,M):i(M,V)))return k}}}}else p(l,c,R--,S-m)}},scanComplete:function(t,e,i,n,r,o,c,g,u,d,h){for(var p=0,F=2*t,f=e,Q=e+t,I=n;I<r;++I){var U=I+s,b=F*I;B[p++]=o[b+f],B[p++]=-U,B[p++]=o[b+Q],B[p++]=U}for(I=g;I<u;++I){U=I+1;var y=F*I;B[p++]=d[y+f],B[p++]=-U}var m=p>>>1;a(B,m);var x=0;for(I=0;I<m;++I){var v=0|B[2*I+1];if(v<0){if((U=-v)>=s)l[x++]=U-s;else{var C=h[U-=1],A=F*U,L=d[A+e+1],G=d[A+e+1+t];t:for(var R=0;R<x;++R){var S=l[R],w=c[S];if(w===C)break;var V=F*S;if(!(G<o[V+e+1]||o[V+e+1+t]<L)){for(var E=e+2;E<t;++E)if(d[A+E+t]<o[V+E]||o[V+E+t]<d[A+E])continue t;var Z=i(w,C);if(void 0!==Z)return Z}}}}else{for(U=v-s,R=x-1;R>=0;--R)if(l[R]===U){for(E=R+1;E<x;++E)l[E-1]=l[E];break}--x}}}};var n=i(1888),r=i(8828),a=i(4192),s=1<<28,o=1024,l=n.mallocInt32(o),c=n.mallocInt32(o),g=n.mallocInt32(o),u=n.mallocInt32(o),d=n.mallocInt32(o),h=n.mallocInt32(o),B=n.mallocDouble(8192);function p(t,e,i,n){var r=e[n],a=t[i-1];t[r]=a,e[a]=r}function F(t,e,i,n){t[i]=n,e[n]=i}},2538:function(t,e,i){var n=i(8902),r=i(5542),a=i(2272),s=i(5023);function o(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function l(t,e){return t[0]-e[0]||t[1]-e[1]}function c(t,e,i){return e in t?t[e]:i}t.exports=function(t,e,i){Array.isArray(e)?(i=i||{},e=e||[]):(i=e||{},e=[]);var g=!!c(i,"delaunay",!0),u=!!c(i,"interior",!0),d=!!c(i,"exterior",!0),h=!!c(i,"infinity",!1);if(!u&&!d||0===t.length)return[];var B=n(t,e);if(g||u!==d||h){for(var p=r(t.length,function(t){return t.map(o).sort(l)}(e)),F=0;F<B.length;++F){var f=B[F];p.addTriangle(f[0],f[1],f[2])}return g&&a(t,p),d?u?h?s(p,0,h):p.cells():s(p,1,h):s(p,-1)}return B}},2272:function(t,e,i){var n=i(2646)[4];function r(t,e,i,r,a,s){var o=e.opposite(r,a);if(!(o<0)){if(a<r){var l=r;r=a,a=l,l=s,s=o,o=l}e.isConstraint(r,a)||n(t[r],t[a],t[s],t[o])<0&&i.push(r,a)}}i(2478),t.exports=function(t,e){for(var i=[],a=t.length,s=e.stars,o=0;o<a;++o)for(var l=s[o],c=1;c<l.length;c+=2){if(!((h=l[c])<o)&&!e.isConstraint(o,h)){for(var g=l[c-1],u=-1,d=1;d<l.length;d+=2)if(l[d-1]===h){u=l[d];break}u<0||n(t[o],t[h],t[g],t[u])<0&&i.push(o,h)}}for(;i.length>0;){for(var h=i.pop(),B=(g=-1,u=-1,l=s[o=i.pop()],1);B<l.length;B+=2){var p=l[B-1],F=l[B];p===h?u=F:F===h&&(g=p)}g<0||u<0||(n(t[o],t[h],t[g],t[u])>=0||(e.flip(o,h),r(t,e,i,g,o,u),r(t,e,i,o,u,g),r(t,e,i,u,h,g),r(t,e,i,h,g,u)))}}},5023:function(t,e,i){var n,r=i(2478);function a(t,e,i,n,r,a,s){this.cells=t,this.neighbor=e,this.flags=n,this.constraint=i,this.active=r,this.next=a,this.boundary=s}function s(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}t.exports=function(t,e,i){var n=function(t,e){for(var i=t.cells(),n=i.length,r=0;r<n;++r){var o=(f=i[r])[0],l=f[1],c=f[2];l<c?l<o&&(f[0]=l,f[1]=c,f[2]=o):c<o&&(f[0]=c,f[1]=o,f[2]=l)}i.sort(s);var g=new Array(n);for(r=0;r<g.length;++r)g[r]=0;var u=[],d=[],h=new Array(3*n),B=new Array(3*n),p=null;e&&(p=[]);var F=new a(i,h,B,g,u,d,p);for(r=0;r<n;++r)for(var f=i[r],Q=0;Q<3;++Q){o=f[Q],l=f[(Q+1)%3];var I=h[3*r+Q]=F.locate(l,o,t.opposite(l,o)),U=B[3*r+Q]=t.isConstraint(o,l);I<0&&(U?d.push(r):(u.push(r),g[r]=1),e&&p.push([l,o,-1]))}return F}(t,i);if(0===e)return i?n.cells.concat(n.boundary):n.cells;var r=1,o=n.active,l=n.next,c=n.flags,g=n.cells,u=n.constraint,d=n.neighbor;for(;o.length>0||l.length>0;){for(;o.length>0;){var h=o.pop();if(c[h]!==-r){c[h]=r,g[h];for(var B=0;B<3;++B){var p=d[3*h+B];p>=0&&0===c[p]&&(u[3*h+B]?l.push(p):(o.push(p),c[p]=r))}}}var F=l;l=o,o=F,l.length=0,r=-r}var f=function(t,e,i){for(var n=0,r=0;r<t.length;++r)e[r]===i&&(t[n++]=t[r]);return t.length=n,t}(g,c,e);if(i)return f.concat(n.boundary);return f},a.prototype.locate=(n=[0,0,0],function(t,e,i){var a=t,o=e,l=i;return e<i?e<t&&(a=e,o=i,l=t):i<t&&(a=i,o=t,l=e),a<0?-1:(n[0]=a,n[1]=o,n[2]=l,r.eq(this.cells,n,s))})},8902:function(t,e,i){var n=i(2478),r=i(3250)[3],a=0;function s(t,e,i,n,r){this.a=t,this.b=e,this.idx=i,this.lowerIds=n,this.upperIds=r}function o(t,e,i,n){this.a=t,this.b=e,this.type=i,this.idx=n}function l(t,e){var i=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return i||(t.type!==a&&(i=r(t.a,t.b,e.b))?i:t.idx-e.idx)}function c(t,e){return r(t.a,t.b,e)}function g(t,e,i,a,s){for(var o=n.lt(e,a,c),l=n.gt(e,a,c),g=o;g<l;++g){for(var u=e[g],d=u.lowerIds,h=d.length;h>1&&r(i[d[h-2]],i[d[h-1]],a)>0;)t.push([d[h-1],d[h-2],s]),h-=1;d.length=h,d.push(s);var B=u.upperIds;for(h=B.length;h>1&&r(i[B[h-2]],i[B[h-1]],a)<0;)t.push([B[h-2],B[h-1],s]),h-=1;B.length=h,B.push(s)}}function u(t,e){var i;return(i=t.a[0]<e.a[0]?r(t.a,t.b,e.a):r(e.b,e.a,t.a))?i:(i=e.b[0]<t.b[0]?r(t.a,t.b,e.b):r(e.b,e.a,t.b))||t.idx-e.idx}function d(t,e,i){var r=n.le(t,i,u),a=t[r],o=a.upperIds,l=o[o.length-1];a.upperIds=[l],t.splice(r+1,0,new s(i.a,i.b,i.idx,[l],o))}function h(t,e,i){var r=i.a;i.a=i.b,i.b=r;var a=n.eq(t,i,u),s=t[a];t[a-1].upperIds=s.upperIds,t.splice(a,1)}t.exports=function(t,e){for(var i=t.length,n=e.length,r=[],c=0;c<i;++c)r.push(new o(t[c],null,a,c));for(c=0;c<n;++c){var u=e[c],B=t[u[0]],p=t[u[1]];B[0]<p[0]?r.push(new o(B,p,2,c),new o(p,B,1,c)):B[0]>p[0]&&r.push(new o(p,B,2,c),new o(B,p,1,c))}r.sort(l);for(var F=r[0].a[0]-(1+Math.abs(r[0].a[0]))*Math.pow(2,-52),f=[new s([F,1],[F,0],-1,[],[])],Q=[],I=(c=0,r.length);c<I;++c){var U=r[c],b=U.type;b===a?g(Q,f,t,U.a,U.idx):2===b?d(f,t,U):h(f,t,U)}return Q}},5542:function(t,e,i){var n=i(2478);function r(t,e){this.stars=t,this.edges=e}t.exports=function(t,e){for(var i=new Array(t),n=0;n<t;++n)i[n]=[];return new r(i,e)};var a=r.prototype;function s(t,e,i){for(var n=1,r=t.length;n<r;n+=2)if(t[n-1]===e&&t[n]===i)return t[n-1]=t[r-2],t[n]=t[r-1],void(t.length=r-2)}a.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(i,r){return t[0]=Math.min(i,r),t[1]=Math.max(i,r),n.eq(this.edges,t,e)>=0}}(),a.removeTriangle=function(t,e,i){var n=this.stars;s(n[t],e,i),s(n[e],i,t),s(n[i],t,e)},a.addTriangle=function(t,e,i){var n=this.stars;n[t].push(e,i),n[e].push(i,t),n[i].push(t,e)},a.opposite=function(t,e){for(var i=this.stars[e],n=1,r=i.length;n<r;n+=2)if(i[n]===t)return i[n-1];return-1},a.flip=function(t,e){var i=this.opposite(t,e),n=this.opposite(e,t);this.removeTriangle(t,e,i),this.removeTriangle(e,t,n),this.addTriangle(t,n,i),this.addTriangle(e,i,n)},a.edges=function(){for(var t=this.stars,e=[],i=0,n=t.length;i<n;++i)for(var r=t[i],a=0,s=r.length;a<s;a+=2)e.push([r[a],r[a+1]]);return e},a.cells=function(){for(var t=this.stars,e=[],i=0,n=t.length;i<n;++i)for(var r=t[i],a=0,s=r.length;a<s;a+=2){var o=r[a],l=r[a+1];i<Math.min(o,l)&&e.push([i,o,l])}return e}},2419:function(t){t.exports=function(t){for(var e=1,i=1;i<t.length;++i)for(var n=0;n<i;++n)if(t[i]<t[n])e=-e;else if(t[n]===t[i])return 0;return e}},3628:function(t,e,i){var n=i(1338),r=i(727);function a(t,e){for(var i=0,n=t.length,r=0;r<n;++r)i+=t[r]*e[r];return i}function s(t){var e=t.length;if(0===e)return[];t[0].length;var i=n([t.length+1,t.length+1],1),s=n([t.length+1],1);i[e][e]=0;for(var o=0;o<e;++o){for(var l=0;l<=o;++l)i[l][o]=i[o][l]=2*a(t[o],t[l]);s[o]=a(t[o],t[o])}var c=r(i,s),g=0,u=c[e+1];for(o=0;o<u.length;++o)g+=u[o];var d=new Array(e);for(o=0;o<e;++o){u=c[o];var h=0;for(l=0;l<u.length;++l)h+=u[l];d[o]=h/g}return d}function o(t){if(0===t.length)return[];for(var e=t[0].length,i=n([e]),r=s(t),a=0;a<t.length;++a)for(var o=0;o<e;++o)i[o]+=t[a][o]*r[a];return i}o.barycenetric=s,t.exports=o},6037:function(t,e,i){t.exports=function(t){for(var e=n(t),i=0,r=0;r<t.length;++r)for(var a=t[r],s=0;s<e.length;++s)i+=Math.pow(a[s]-e[s],2);return Math.sqrt(i/t.length)};var n=i(3628)},332:function(t,e,i){t.exports=function(t,e,i){var n;if(i){n=e;for(var r=new Array(e.length),a=0;a<e.length;++a){var s=e[a];r[a]=[s[0],s[1],i[a]]}e=r}var o=function(t,e,i){var n=B(t,[],h(t));return f(e,n,i),!!n}(t,e,!!i);for(;Q(t,e,!!i);)o=!0;if(i&&o){n.length=0,i.length=0;for(a=0;a<e.length;++a){s=e[a];n.push([s[0],s[1]]),i.push(s[2])}}return o};var n=i(1755),r=i(6867),a=i(1125),s=i(7842),o=i(1318),l=i(946),c=i(5838),g=i(1278),u=i(3637);function d(t){var e=l(t);return[g(e,-1/0),g(e,1/0)]}function h(t){for(var e=new Array(t.length),i=0;i<t.length;++i){var n=t[i];e[i]=[g(n[0],-1/0),g(n[1],-1/0),g(n[0],1/0),g(n[1],1/0)]}return e}function B(t,e,i){for(var a=e.length,s=new n(a),o=[],l=0;l<e.length;++l){var c=e[l],u=d(c[0]),h=d(c[1]);o.push([g(u[0],-1/0),g(h[0],-1/0),g(u[1],1/0),g(h[1],1/0)])}r(o,(function(t,e){s.link(t,e)}));var B=!0,p=new Array(a);for(l=0;l<a;++l){(f=s.find(l))!==l&&(B=!1,t[f]=[Math.min(t[l][0],t[f][0]),Math.min(t[l][1],t[f][1])])}if(B)return null;var F=0;for(l=0;l<a;++l){var f;(f=s.find(l))===l?(p[l]=F,t[F++]=t[l]):p[l]=-1}t.length=F;for(l=0;l<a;++l)p[l]<0&&(p[l]=p[s.find(l)]);return p}function p(t,e){return t[0]-e[0]||t[1]-e[1]}function F(t,e){var i=t[0]-e[0]||t[1]-e[1];return i||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function f(t,e,i){if(0!==t.length){if(e)for(var n=0;n<t.length;++n){var r=e[(s=t[n])[0]],a=e[s[1]];s[0]=Math.min(r,a),s[1]=Math.max(r,a)}else for(n=0;n<t.length;++n){var s;r=(s=t[n])[0],a=s[1];s[0]=Math.min(r,a),s[1]=Math.max(r,a)}i?t.sort(F):t.sort(p);var o=1;for(n=1;n<t.length;++n){var l=t[n-1],c=t[n];(c[0]!==l[0]||c[1]!==l[1]||i&&c[2]!==l[2])&&(t[o++]=c)}t.length=o}}function Q(t,e,i){var n=function(t,e){for(var i=new Array(e.length),n=0;n<e.length;++n){var r=e[n],a=t[r[0]],s=t[r[1]];i[n]=[g(Math.min(a[0],s[0]),-1/0),g(Math.min(a[1],s[1]),-1/0),g(Math.max(a[0],s[0]),1/0),g(Math.max(a[1],s[1]),1/0)]}return i}(t,e),d=function(t,e,i){var n=[];return r(i,(function(i,r){var s=e[i],o=e[r];if(s[0]!==o[0]&&s[0]!==o[1]&&s[1]!==o[0]&&s[1]!==o[1]){var l=t[s[0]],c=t[s[1]],g=t[o[0]],u=t[o[1]];a(l,c,g,u)&&n.push([i,r])}})),n}(t,e,n),p=function(t,e,i,n){var s=[];return r(i,n,(function(i,n){var r=e[i];if(r[0]!==n&&r[1]!==n){var o=t[n],l=t[r[0]],c=t[r[1]];a(l,c,o,o)&&s.push([i,n])}})),s}(t,e,n,h(t)),F=function(t,e,i,n,r){var a,g,d=t.map((function(t){return[s(t[0]),s(t[1])]}));for(a=0;a<i.length;++a){var h=i[a];g=h[0];var B=h[1],p=e[g],F=e[B],f=u(c(t[p[0]]),c(t[p[1]]),c(t[F[0]]),c(t[F[1]]));if(f){var Q=t.length;t.push([l(f[0]),l(f[1])]),d.push(f),n.push([g,Q],[B,Q])}}for(n.sort((function(t,e){if(t[0]!==e[0])return t[0]-e[0];var i=d[t[1]],n=d[e[1]];return o(i[0],n[0])||o(i[1],n[1])})),a=n.length-1;a>=0;--a){var I=e[g=(A=n[a])[0]],U=I[0],b=I[1],y=t[U],m=t[b];if((y[0]-m[0]||y[1]-m[1])<0){var x=U;U=b,b=x}I[0]=U;var v,C=I[1]=A[1];for(r&&(v=I[2]);a>0&&n[a-1][0]===g;){var A,L=(A=n[--a])[1];r?e.push([C,L,v]):e.push([C,L]),C=L}r?e.push([C,b,v]):e.push([C,b])}return d}(t,e,d,p,i),Q=B(t,F);return f(e,Q,i),!!Q||(d.length>0||p.length>0)}},3637:function(t,e,i){t.exports=function(t,e,i,n){var a=o(e,t),u=o(n,i),d=g(a,u);if(0===s(d))return null;var h=o(t,i),B=g(u,h),p=r(B,d),F=c(a,p),f=l(t,F);return f};var n=i(6504),r=i(8697),a=i(5572),s=i(7721),o=i(544),l=i(2653),c=i(8987);function g(t,e){return a(n(t[0],e[1]),n(t[1],e[0]))}},3642:function(t){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(t,e,i){var n=i(3642),r=i(395);function a(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function s(t){for(var e,i="#",n=0;n<3;++n)i+=("00"+(e=(e=t[n]).toString(16))).substr(e.length);return i}function o(t){return"rgba("+t.join(",")+")"}t.exports=function(t){var e,i,l,c,g,u,d,h,B,p;t||(t={});h=(t.nshades||72)-1,d=t.format||"hex",(u=t.colormap)||(u="jet");if("string"==typeof u){if(u=u.toLowerCase(),!n[u])throw Error(u+" not a supported colorscale");g=n[u]}else{if(!Array.isArray(u))throw Error("unsupported colormap option",u);g=u.slice()}if(g.length>h+1)throw new Error(u+" map requires nshades to be at least size "+g.length);B=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1];e=g.map((function(t){return Math.round(t.index*h)})),B[0]=Math.min(Math.max(B[0],0),1),B[1]=Math.min(Math.max(B[1],0),1);var F=g.map((function(t,e){var i=g[e].index,n=g[e].rgb.slice();return 4===n.length&&n[3]>=0&&n[3]<=1||(n[3]=B[0]+(B[1]-B[0])*i),n})),f=[];for(p=0;p<e.length-1;++p){c=e[p+1]-e[p],i=F[p],l=F[p+1];for(var Q=0;Q<c;Q++){var I=Q/c;f.push([Math.round(r(i[0],l[0],I)),Math.round(r(i[1],l[1],I)),Math.round(r(i[2],l[2],I)),r(i[3],l[3],I)])}}f.push(g[g.length-1].rgb.concat(B[1])),"hex"===d?f=f.map(s):"rgbaString"===d?f=f.map(o):"float"===d&&(f=f.map(a));return f}},3140:function(t,e,i){t.exports=function(t,e,i,a){var s=n(e,i,a);if(0===s){var o=r(n(t,e,i)),c=r(n(t,e,a));if(o===c){if(0===o){var g=l(t,e,i);return g===l(t,e,a)?0:g?1:-1}return 0}return 0===c?o>0||l(t,e,a)?-1:1:0===o?c>0||l(t,e,i)?1:-1:r(c-o)}var u=n(t,e,i);return u>0?s>0&&n(t,e,a)>0?1:-1:u<0?s>0||n(t,e,a)>0?1:-1:n(t,e,a)>0||l(t,e,i)?1:-1};var n=i(3250),r=i(8572),a=i(9362),s=i(5382),o=i(8210);function l(t,e,i){var n=a(t[0],-e[0]),r=a(t[1],-e[1]),l=a(i[0],-e[0]),c=a(i[1],-e[1]),g=o(s(n,l),s(r,c));return g[g.length-1]>=0}},8572:function(t){t.exports=function(t){return t<0?-1:t>0?1:0}},8507:function(t){t.exports=function(t,n){var r=t.length,a=t.length-n.length;if(a)return a;switch(r){case 0:return 0;case 1:return t[0]-n[0];case 2:return t[0]+t[1]-n[0]-n[1]||e(t[0],t[1])-e(n[0],n[1]);case 3:var s=t[0]+t[1],o=n[0]+n[1];if(a=s+t[2]-(o+n[2]))return a;var l=e(t[0],t[1]),c=e(n[0],n[1]);return e(l,t[2])-e(c,n[2])||e(l+t[2],s)-e(c+n[2],o);case 4:var g=t[0],u=t[1],d=t[2],h=t[3],B=n[0],p=n[1],F=n[2],f=n[3];return g+u+d+h-(B+p+F+f)||e(g,u,d,h)-e(B,p,F,f,B)||e(g+u,g+d,g+h,u+d,u+h,d+h)-e(B+p,B+F,B+f,p+F,p+f,F+f)||e(g+u+d,g+u+h,g+d+h,u+d+h)-e(B+p+F,B+p+f,B+F+f,p+F+f);default:for(var Q=t.slice().sort(i),I=n.slice().sort(i),U=0;U<r;++U)if(a=Q[U]-I[U])return a;return 0}};var e=Math.min;function i(t,e){return t-e}},3788:function(t,e,i){var n=i(8507),r=i(2419);t.exports=function(t,e){return n(t,e)||r(t)-r(e)}},7352:function(t,e,i){var n=i(5721),r=i(4750),a=i(2690);t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var i=t[0].length;if(0===i)return[];if(1===i)return n(t);if(2===i)return r(t);return a(t,i)}},5721:function(t){t.exports=function(t){for(var e=0,i=0,n=1;n<t.length;++n)t[n][0]<t[e][0]&&(e=n),t[n][0]>t[i][0]&&(i=n);return e<i?[[e],[i]]:e>i?[[i],[e]]:[[e]]}},4750:function(t,e,i){t.exports=function(t){var e=n(t),i=e.length;if(i<=2)return[];for(var r=new Array(i),a=e[i-1],s=0;s<i;++s){var o=e[s];r[s]=[a,o],a=o}return r};var n=i(3090)},2690:function(t,e,i){t.exports=function(t,e){try{return n(t,!0)}catch(s){var i=r(t);if(i.length<=e)return[];var a=function(t,e){for(var i=t.length,n=new Array(i),r=0;r<e.length;++r)n[r]=t[e[r]];var a=e.length;for(r=0;r<i;++r)e.indexOf(r)<0&&(n[a++]=t[r]);return n}(t,i);return function(t,e){for(var i=t.length,n=e.length,r=0;r<i;++r)for(var a=t[r],s=0;s<a.length;++s){var o=a[s];if(o<n)a[s]=e[o];else{o-=n;for(var l=0;l<n;++l)o>=e[l]&&(o+=1);a[s]=o}}return t}(n(a,!0),i)}};var n=i(8954),r=i(3952)},4769:function(t){t.exports=function(t,e,i,n,r,a){var s=r-1,o=r*r,l=s*s,c=(1+2*r)*l,g=r*l,u=o*(3-2*r),d=o*s;if(t.length){a||(a=new Array(t.length));for(var h=t.length-1;h>=0;--h)a[h]=c*t[h]+g*e[h]+u*i[h]+d*n[h];return a}return c*t+g*e+u*i+d*n},t.exports.derivative=function(t,e,i,n,r,a){var s=6*r*r-6*r,o=3*r*r-4*r+1,l=-6*r*r+6*r,c=3*r*r-2*r;if(t.length){a||(a=new Array(t.length));for(var g=t.length-1;g>=0;--g)a[g]=s*t[g]+o*e[g]+l*i[g]+c*n[g];return a}return s*t+o*e+l*i[g]+c*n}},7642:function(t,e,i){var n=i(8954),r=i(1682);function a(t,e){this.point=t,this.index=e}function s(t,e){for(var i=t.point,n=e.point,r=i.length,a=0;a<r;++a){var s=n[a]-i[a];if(s)return s}return 0}t.exports=function(t,e){var i=t.length;if(0===i)return[];var o=t[0].length;if(o<1)return[];if(1===o)return function(t,e,i){if(1===t)return i?[[-1,0]]:[];var n=e.map((function(t,e){return[t[0],e]}));n.sort((function(t,e){return t[0]-e[0]}));for(var r=new Array(t-1),a=1;a<t;++a){var s=n[a-1],o=n[a];r[a-1]=[s[1],o[1]]}i&&r.push([-1,r[0][1]],[r[t-1][1],-1]);return r}(i,t,e);for(var l=new Array(i),c=1,g=0;g<i;++g){for(var u=t[g],d=new Array(o+1),h=0,B=0;B<o;++B){var p=u[B];d[B]=p,h+=p*p}d[o]=h,l[g]=new a(d,g),c=Math.max(h,c)}r(l,s),i=l.length;var F=new Array(i+o+1),f=new Array(i+o+1),Q=(o+1)*(o+1)*c,I=new Array(o+1);for(g=0;g<=o;++g)I[g]=0;I[o]=Q,F[0]=I.slice(),f[0]=-1;for(g=0;g<=o;++g){(d=I.slice())[g]=1,F[g+1]=d,f[g+1]=-1}for(g=0;g<i;++g){var U=l[g];F[g+o+1]=U.point,f[g+o+1]=U.index}var b=n(F,!1);b=e?b.filter((function(t){for(var e=0,i=0;i<=o;++i){var n=f[t[i]];if(n<0&&++e>=2)return!1;t[i]=n}return!0})):b.filter((function(t){for(var e=0;e<=o;++e){var i=f[t[e]];if(i<0)return!1;t[e]=i}return!0}));if(1&o)for(g=0;g<b.length;++g){d=(U=b[g])[0];U[0]=U[1],U[1]=d}return b}},2361:function(t){var e=!1;if("undefined"!=typeof Float64Array){var i=new Float64Array(1),n=new Uint32Array(i.buffer);if(i[0]=1,e=!0,1072693248===n[1]){function a(t,e){return n[0]=t,n[1]=e,i[0]}function s(t){return i[0]=t,n[0]}function o(t){return i[0]=t,n[1]}t.exports=function(t){return i[0]=t,[n[0],n[1]]},t.exports.pack=a,t.exports.lo=s,t.exports.hi=o}else if(1072693248===n[0]){function l(t,e){return n[1]=t,n[0]=e,i[0]}function c(t){return i[0]=t,n[1]}function g(t){return i[0]=t,n[0]}t.exports=function(t){return i[0]=t,[n[1],n[0]]},t.exports.pack=l,t.exports.lo=c,t.exports.hi=g}else e=!1}if(!e){var r=new Buffer(8);function u(t,e){return r.writeUInt32LE(t,0,!0),r.writeUInt32LE(e,4,!0),r.readDoubleLE(0,!0)}function d(t){return r.writeDoubleLE(t,0,!0),r.readUInt32LE(0,!0)}function h(t){return r.writeDoubleLE(t,0,!0),r.readUInt32LE(4,!0)}t.exports=function(t){return r.writeDoubleLE(t,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},t.exports.pack=u,t.exports.lo=d,t.exports.hi=h}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){return(t.exports.hi(e)<<1>>>21)-1023},t.exports.fraction=function(e){var i=t.exports.lo(e),n=t.exports.hi(e),r=1048575&n;return 2146435072&n&&(r+=1<<20),[i,r]},t.exports.denormalized=function(e){return!(2146435072&t.exports.hi(e))}},1338:function(t){function e(t,i,n){var r=0|t[n];if(r<=0)return[];var a,s=new Array(r);if(n===t.length-1)for(a=0;a<r;++a)s[a]=i;else for(a=0;a<r;++a)s[a]=e(t,i,n+1);return s}t.exports=function(t,i){switch(void 0===i&&(i=0),typeof t){case"number":if(t>0)return function(t,e){var i,n;for(i=new Array(t),n=0;n<t;++n)i[n]=e;return i}(0|t,i);break;case"object":if("number"==typeof t.length)return e(t,i,0)}return[]}},3134:function(t,e,i){t.exports=function(t,e){var i=t.length;if("number"!=typeof e){e=0;for(var r=0;r<i;++r){var a=t[r];e=Math.max(e,a[0],a[1])}e=1+(0|e)}e|=0;var s=new Array(e);for(r=0;r<e;++r)s[r]=[];for(r=0;r<i;++r){s[(a=t[r])[0]].push(a[1]),s[a[1]].push(a[0])}for(var o=0;o<e;++o)n(s[o],(function(t,e){return t-e}));return s};var n=i(1682)},5033:function(t){t.exports=function(t,e,i){var n=e||0,r=i||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[n*t[12]+t[8],n*t[13]+t[9],n*t[14]+t[10],n*t[15]+t[11]],[r*t[12]-t[8],r*t[13]-t[9],r*t[14]-t[10],r*t[15]-t[11]]]}},9215:function(t,e,i){t.exports=function(t,e,i){switch(arguments.length){case 0:return new s([0],[0],0);case 1:return"number"==typeof t?new s(n=l(t),n,0):new s(t,l(t.length),0);case 2:var n;if("number"==typeof e)return new s(t,n=l(t.length),+e);i=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new s(t,e,i)}};var n=i(4769),r=i(2478);function a(t,e,i){return Math.min(e,Math.max(t,i))}function s(t,e,i){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-1/0,this.bounds[1][n]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[i],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var o=s.prototype;function l(t){for(var e=new Array(t),i=0;i<t;++i)e[i]=0;return e}o.flush=function(t){var e=r.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},o.curve=function(t){var e=this._time,i=e.length,s=r.le(e,t),o=this._scratch[0],l=this._state,c=this._velocity,g=this.dimension,u=this.bounds;if(s<0)for(var d=g-1,h=0;h<g;++h,--d)o[h]=l[d];else if(s>=i-1){d=l.length-1;var B=t-e[i-1];for(h=0;h<g;++h,--d)o[h]=l[d]+B*c[d]}else{d=g*(s+1)-1;var p=e[s],F=e[s+1]-p||1,f=this._scratch[1],Q=this._scratch[2],I=this._scratch[3],U=this._scratch[4],b=!0;for(h=0;h<g;++h,--d)f[h]=l[d],I[h]=c[d]*F,Q[h]=l[d+g],U[h]=c[d+g]*F,b=b&&f[h]===Q[h]&&I[h]===U[h]&&0===I[h];if(b)for(h=0;h<g;++h)o[h]=f[h];else n(f,I,Q,U,(t-p)/F,o)}var y=u[0],m=u[1];for(h=0;h<g;++h)o[h]=a(y[h],m[h],o[h]);return o},o.dcurve=function(t){var e=this._time,i=e.length,a=r.le(e,t),s=this._scratch[0],o=this._state,l=this._velocity,c=this.dimension;if(a>=i-1){var g=o.length-1;e[i-1];for(var u=0;u<c;++u,--g)s[u]=l[g]}else{g=c*(a+1)-1;var d=e[a],h=e[a+1]-d||1,B=this._scratch[1],p=this._scratch[2],F=this._scratch[3],f=this._scratch[4],Q=!0;for(u=0;u<c;++u,--g)B[u]=o[g],F[u]=l[g]*h,p[u]=o[g+c],f[u]=l[g+c]*h,Q=Q&&B[u]===p[u]&&F[u]===f[u]&&0===F[u];if(Q)for(u=0;u<c;++u)s[u]=0;else{n.derivative(B,F,p,f,(t-d)/h,s);for(u=0;u<c;++u)s[u]/=h}}return s},o.lastT=function(){var t=this._time;return t[t.length-1]},o.stable=function(){for(var t=this._velocity,e=t.length,i=this.dimension-1;i>=0;--i)if(t[--e])return!1;return!0},o.jump=function(t){var e=this.lastT(),i=this.dimension;if(!(t<e||arguments.length!==i+1)){var n=this._state,r=this._velocity,s=n.length-this.dimension,o=this.bounds,l=o[0],c=o[1];this._time.push(e,t);for(var g=0;g<2;++g)for(var u=0;u<i;++u)n.push(n[s++]),r.push(0);this._time.push(t);for(u=i;u>0;--u)n.push(a(l[u-1],c[u-1],arguments[u])),r.push(0)}},o.push=function(t){var e=this.lastT(),i=this.dimension;if(!(t<e||arguments.length!==i+1)){var n=this._state,r=this._velocity,s=n.length-this.dimension,o=t-e,l=this.bounds,c=l[0],g=l[1],u=o>1e-6?1/o:0;this._time.push(t);for(var d=i;d>0;--d){var h=a(c[d-1],g[d-1],arguments[d]);n.push(h),r.push((h-n[s++])*u)}}},o.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var i=this._state,n=this._velocity,r=this.bounds,s=r[0],o=r[1];this._time.push(t);for(var l=e;l>0;--l)i.push(a(s[l-1],o[l-1],arguments[l])),n.push(0)}},o.move=function(t){var e=this.lastT(),i=this.dimension;if(!(t<=e||arguments.length!==i+1)){var n=this._state,r=this._velocity,s=n.length-this.dimension,o=this.bounds,l=o[0],c=o[1],g=t-e,u=g>1e-6?1/g:0;this._time.push(t);for(var d=i;d>0;--d){var h=arguments[d];n.push(a(l[d-1],c[d-1],n[s++]+h)),r.push(h*u)}}},o.idle=function(t){var e=this.lastT();if(!(t<e)){var i=this.dimension,n=this._state,r=this._velocity,s=n.length-i,o=this.bounds,l=o[0],c=o[1],g=t-e;this._time.push(t);for(var u=i-1;u>=0;--u)n.push(a(l[u],c[u],n[s]+g*r[s])),r.push(0),s+=1}}},3840:function(t){t.exports=function(t){return new a(t||h,null)};function e(t,e,i,n,r,a){this._color=t,this.key=e,this.value=i,this.left=n,this.right=r,this._count=a}function i(t){return new e(t._color,t.key,t.value,t.left,t.right,t._count)}function n(t,i){return new e(t,i.key,i.value,i.left,i.right,i._count)}function r(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function a(t,e){this._compare=t,this.root=e}var s=a.prototype;function o(t,e){var i;if(e.left&&(i=o(t,e.left)))return i;return(i=t(e.key,e.value))||(e.right?o(t,e.right):void 0)}function l(t,e,i,n){if(e(t,n.key)<=0){var r;if(n.left)if(r=l(t,e,i,n.left))return r;if(r=i(n.key,n.value))return r}if(n.right)return l(t,e,i,n.right)}function c(t,e,i,n,r){var a,s=i(t,r.key),o=i(e,r.key);if(s<=0){if(r.left&&(a=c(t,e,i,n,r.left)))return a;if(o>0&&(a=n(r.key,r.value)))return a}if(o>0&&r.right)return c(t,e,i,n,r.right)}function g(t,e){this.tree=t,this._stack=e}Object.defineProperty(s,"keys",{get:function(){var t=[];return this.forEach((function(e,i){t.push(e)})),t}}),Object.defineProperty(s,"values",{get:function(){var t=[];return this.forEach((function(e,i){t.push(i)})),t}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(t,i){for(var s=this._compare,o=this.root,l=[],c=[];o;){var g=s(t,o.key);l.push(o),c.push(g),o=g<=0?o.left:o.right}l.push(new e(0,t,i,null,null,1));for(var u=l.length-2;u>=0;--u){o=l[u];c[u]<=0?l[u]=new e(o._color,o.key,o.value,l[u+1],o.right,o._count+1):l[u]=new e(o._color,o.key,o.value,o.left,l[u+1],o._count+1)}for(u=l.length-1;u>1;--u){var d=l[u-1];o=l[u];if(1===d._color||1===o._color)break;var h=l[u-2];if(h.left===d)if(d.left===o){if(!(B=h.right)||0!==B._color){if(h._color=0,h.left=d.right,d._color=1,d.right=h,l[u-2]=d,l[u-1]=o,r(h),r(d),u>=3)(p=l[u-3]).left===h?p.left=d:p.right=d;break}d._color=1,h.right=n(1,B),h._color=0,u-=1}else{if(!(B=h.right)||0!==B._color){if(d.right=o.left,h._color=0,h.left=o.right,o._color=1,o.left=d,o.right=h,l[u-2]=o,l[u-1]=d,r(h),r(d),r(o),u>=3)(p=l[u-3]).left===h?p.left=o:p.right=o;break}d._color=1,h.right=n(1,B),h._color=0,u-=1}else if(d.right===o){if(!(B=h.left)||0!==B._color){if(h._color=0,h.right=d.left,d._color=1,d.left=h,l[u-2]=d,l[u-1]=o,r(h),r(d),u>=3)(p=l[u-3]).right===h?p.right=d:p.left=d;break}d._color=1,h.left=n(1,B),h._color=0,u-=1}else{var B;if(!(B=h.left)||0!==B._color){var p;if(d.left=o.right,h._color=0,h.right=o.left,o._color=1,o.right=d,o.left=h,l[u-2]=o,l[u-1]=d,r(h),r(d),r(o),u>=3)(p=l[u-3]).right===h?p.right=o:p.left=o;break}d._color=1,h.left=n(1,B),h._color=0,u-=1}}return l[0]._color=1,new a(s,l[0])},s.forEach=function(t,e,i){if(this.root)switch(arguments.length){case 1:return o(t,this.root);case 2:return l(e,this._compare,t,this.root);case 3:if(this._compare(e,i)>=0)return;return c(e,i,this._compare,t,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new g(this,t)}}),Object.defineProperty(s,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new g(this,t)}}),s.at=function(t){if(t<0)return new g(this,[]);for(var e=this.root,i=[];;){if(i.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new g(this,i);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new g(this,[])},s.ge=function(t){for(var e=this._compare,i=this.root,n=[],r=0;i;){var a=e(t,i.key);n.push(i),a<=0&&(r=n.length),i=a<=0?i.left:i.right}return n.length=r,new g(this,n)},s.gt=function(t){for(var e=this._compare,i=this.root,n=[],r=0;i;){var a=e(t,i.key);n.push(i),a<0&&(r=n.length),i=a<0?i.left:i.right}return n.length=r,new g(this,n)},s.lt=function(t){for(var e=this._compare,i=this.root,n=[],r=0;i;){var a=e(t,i.key);n.push(i),a>0&&(r=n.length),i=a<=0?i.left:i.right}return n.length=r,new g(this,n)},s.le=function(t){for(var e=this._compare,i=this.root,n=[],r=0;i;){var a=e(t,i.key);n.push(i),a>=0&&(r=n.length),i=a<0?i.left:i.right}return n.length=r,new g(this,n)},s.find=function(t){for(var e=this._compare,i=this.root,n=[];i;){var r=e(t,i.key);if(n.push(i),0===r)return new g(this,n);i=r<=0?i.left:i.right}return new g(this,[])},s.remove=function(t){var e=this.find(t);return e?e.remove():this},s.get=function(t){for(var e=this._compare,i=this.root;i;){var n=e(t,i.key);if(0===n)return i.value;i=n<=0?i.left:i.right}};var u=g.prototype;function d(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function h(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(u,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(u,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),u.clone=function(){return new g(this.tree,this._stack.slice())},u.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var s=new Array(t.length),o=t[t.length-1];s[s.length-1]=new e(o._color,o.key,o.value,o.left,o.right,o._count);for(var l=t.length-2;l>=0;--l){(o=t[l]).left===t[l+1]?s[l]=new e(o._color,o.key,o.value,s[l+1],o.right,o._count):s[l]=new e(o._color,o.key,o.value,o.left,s[l+1],o._count)}if((o=s[s.length-1]).left&&o.right){var c=s.length;for(o=o.left;o.right;)s.push(o),o=o.right;var g=s[c-1];s.push(new e(o._color,g.key,g.value,o.left,o.right,o._count)),s[c-1].key=o.key,s[c-1].value=o.value;for(l=s.length-2;l>=c;--l)o=s[l],s[l]=new e(o._color,o.key,o.value,o.left,s[l+1],o._count);s[c-1].left=s[c]}if(0===(o=s[s.length-1])._color){var u=s[s.length-2];u.left===o?u.left=null:u.right===o&&(u.right=null),s.pop();for(l=0;l<s.length;++l)s[l]._count--;return new a(this.tree._compare,s[0])}if(o.left||o.right){o.left?d(o,o.left):o.right&&d(o,o.right),o._color=1;for(l=0;l<s.length-1;++l)s[l]._count--;return new a(this.tree._compare,s[0])}if(1===s.length)return new a(this.tree._compare,null);for(l=0;l<s.length;++l)s[l]._count--;var h=s[s.length-2];return function(t){for(var e,a,s,o,l=t.length-1;l>=0;--l){if(e=t[l],0===l)return void(e._color=1);if((a=t[l-1]).left===e){if((s=a.right).right&&0===s.right._color)return o=(s=a.right=i(s)).right=i(s.right),a.right=s.left,s.left=a,s.right=o,s._color=a._color,e._color=1,a._color=1,o._color=1,r(a),r(s),l>1&&((c=t[l-2]).left===a?c.left=s:c.right=s),void(t[l-1]=s);if(s.left&&0===s.left._color)return o=(s=a.right=i(s)).left=i(s.left),a.right=o.left,s.left=o.right,o.left=a,o.right=s,o._color=a._color,a._color=1,s._color=1,e._color=1,r(a),r(s),r(o),l>1&&((c=t[l-2]).left===a?c.left=o:c.right=o),void(t[l-1]=o);if(1===s._color){if(0===a._color)return a._color=1,void(a.right=n(0,s));a.right=n(0,s);continue}s=i(s),a.right=s.left,s.left=a,s._color=a._color,a._color=0,r(a),r(s),l>1&&((c=t[l-2]).left===a?c.left=s:c.right=s),t[l-1]=s,t[l]=a,l+1<t.length?t[l+1]=e:t.push(e),l+=2}else{if((s=a.left).left&&0===s.left._color)return o=(s=a.left=i(s)).left=i(s.left),a.left=s.right,s.right=a,s.left=o,s._color=a._color,e._color=1,a._color=1,o._color=1,r(a),r(s),l>1&&((c=t[l-2]).right===a?c.right=s:c.left=s),void(t[l-1]=s);if(s.right&&0===s.right._color)return o=(s=a.left=i(s)).right=i(s.right),a.left=o.right,s.right=o.left,o.right=a,o.left=s,o._color=a._color,a._color=1,s._color=1,e._color=1,r(a),r(s),r(o),l>1&&((c=t[l-2]).right===a?c.right=o:c.left=o),void(t[l-1]=o);if(1===s._color){if(0===a._color)return a._color=1,void(a.left=n(0,s));a.left=n(0,s);continue}var c;s=i(s),a.left=s.right,s.right=a,s._color=a._color,a._color=0,r(a),r(s),l>1&&((c=t[l-2]).right===a?c.right=s:c.left=s),t[l-1]=s,t[l]=a,l+1<t.length?t[l+1]=e:t.push(e),l+=2}}}(s),h.left===o?h.left=null:h.right=null,new a(this.tree._compare,s[0])},Object.defineProperty(u,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(u,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(u,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var i=this.tree.root;return i?i._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),u.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(u,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),u.update=function(t){var i=this._stack;if(0===i.length)throw new Error("Can't update empty node!");var n=new Array(i.length),r=i[i.length-1];n[n.length-1]=new e(r._color,r.key,t,r.left,r.right,r._count);for(var s=i.length-2;s>=0;--s)(r=i[s]).left===i[s+1]?n[s]=new e(r._color,r.key,r.value,n[s+1],r.right,r._count):n[s]=new e(r._color,r.key,r.value,r.left,n[s+1],r._count);return new a(this.tree._compare,n[0])},u.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(u,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},3837:function(t,e,i){t.exports=function(t,e){var i=new h(t);return i.update(e),i};var n=i(4935),r=i(501),a=i(5304),s=i(6429),o=i(6444),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=ArrayBuffer,g=DataView;function u(t){return Array.isArray(t)||function(t){return c.isView(t)&&!(t instanceof g)}(t)}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function h(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(t)}var B=h.prototype;function p(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}B.update=function(t){function e(e,i,n){if(n in t){var r,a=t[n],s=this[n];(e?u(a)&&u(a[0]):u(a))?this[n]=r=[i(a[0]),i(a[1]),i(a[2])]:this[n]=r=[i(a),i(a),i(a)];for(var o=0;o<3;++o)if(r[o]!==s[o])return!0}return!1}t=t||{};var i,a=e.bind(this,!1,Number),s=e.bind(this,!1,Boolean),l=e.bind(this,!1,String),c=e.bind(this,!0,(function(t){if(u(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]})),g=!1,d=!1;if("bounds"in t)for(var h=t.bounds,B=0;B<2;++B)for(var p=0;p<3;++p)h[B][p]!==this.bounds[B][p]&&(d=!0),this.bounds[B][p]=h[B][p];if("ticks"in t){i=t.ticks,g=!0,this.autoTicks=!1;for(B=0;B<3;++B)this.tickSpacing[B]=0}else a("tickSpacing")&&(this.autoTicks=!0,d=!0);if(this._firstInit&&("ticks"in t||"tickSpacing"in t||(this.autoTicks=!0),d=!0,g=!0,this._firstInit=!1),d&&this.autoTicks&&(i=o.create(this.bounds,this.tickSpacing),g=!0),g){for(B=0;B<3;++B)i[B].sort((function(t,e){return t.x-e.x}));o.equal(i,this.ticks)?g=!1:this.ticks=i}s("tickEnable"),l("tickFont")&&(g=!0),l("tickFontStyle")&&(g=!0),l("tickFontWeight")&&(g=!0),l("tickFontVariant")&&(g=!0),a("tickSize"),a("tickAngle"),a("tickPad"),c("tickColor");var F=l("labels");l("labelFont")&&(F=!0),l("labelFontStyle")&&(F=!0),l("labelFontWeight")&&(F=!0),l("labelFontVariant")&&(F=!0),s("labelEnable"),a("labelSize"),a("labelPad"),c("labelColor"),s("lineEnable"),s("lineMirror"),a("lineWidth"),c("lineColor"),s("lineTickEnable"),s("lineTickMirror"),a("lineTickLength"),a("lineTickWidth"),c("lineTickColor"),s("gridEnable"),a("gridWidth"),c("gridColor"),s("zeroEnable"),c("zeroLineColor"),a("zeroLineWidth"),s("backgroundEnable"),c("backgroundColor");var f=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],Q=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(F||g)&&this._text.update(this.bounds,this.labels,f,this.ticks,Q):this._text=n(this.gl,this.bounds,this.labels,f,this.ticks,Q),this._lines&&g&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var F=[new p,new p,new p];function f(t,e,i,n,r){for(var a=t.primalOffset,s=t.primalMinor,o=t.mirrorOffset,l=t.mirrorMinor,c=n[e],g=0;g<3;++g)if(e!==g){var u=a,d=o,h=s,B=l;c&1<<g&&(u=o,d=a,h=l,B=s),u[g]=i[0][g],d[g]=i[1][g],r[g]>0?(h[g]=-1,B[g]=0):(h[g]=0,B[g]=1)}}var Q=[0,0,0],I={model:l,view:l,projection:l,_ortho:!1};B.isOpaque=function(){return!0},B.isTransparent=function(){return!1},B.drawTransparent=function(t){};var U=[0,0,0],b=[0,0,0],y=[0,0,0];B.draw=function(t){t=t||I;for(var e=this.gl,i=t.model||l,n=t.view||l,r=t.projection||l,a=this.bounds,o=t._ortho||!1,c=s(i,n,r,a,o),g=c.cubeEdges,u=c.axis,h=n[12],B=n[13],p=n[14],m=n[15],x=(o?2:1)*this.pixelRatio*(r[3]*h+r[7]*B+r[11]*p+r[15]*m)/e.drawingBufferHeight,v=0;v<3;++v)this.lastCubeProps.cubeEdges[v]=g[v],this.lastCubeProps.axis[v]=u[v];var C=F;for(v=0;v<3;++v)f(F[v],v,this.bounds,g,u);e=this.gl;var A,L=Q;for(v=0;v<3;++v)this.backgroundEnable[v]?L[v]=u[v]:L[v]=0;this._background.draw(i,n,r,a,L,this.backgroundColor),this._lines.bind(i,n,r,this);for(v=0;v<3;++v){var G=[0,0,0];u[v]>0?G[v]=a[1][v]:G[v]=a[0][v];for(var R=0;R<2;++R){var S=(v+1+R)%3,w=(v+1+(1^R))%3;this.gridEnable[S]&&this._lines.drawGrid(S,w,this.bounds,G,this.gridColor[S],this.gridWidth[S]*this.pixelRatio)}for(R=0;R<2;++R){S=(v+1+R)%3,w=(v+1+(1^R))%3;this.zeroEnable[w]&&Math.min(a[0][w],a[1][w])<=0&&Math.max(a[0][w],a[1][w])>=0&&this._lines.drawZero(S,w,this.bounds,G,this.zeroLineColor[w],this.zeroLineWidth[w]*this.pixelRatio)}}for(v=0;v<3;++v){this.lineEnable[v]&&this._lines.drawAxisLine(v,this.bounds,C[v].primalOffset,this.lineColor[v],this.lineWidth[v]*this.pixelRatio),this.lineMirror[v]&&this._lines.drawAxisLine(v,this.bounds,C[v].mirrorOffset,this.lineColor[v],this.lineWidth[v]*this.pixelRatio);var V=d(U,C[v].primalMinor),E=d(b,C[v].mirrorMinor),Z=this.lineTickLength;for(R=0;R<3;++R){var N=x/i[5*R];V[R]*=Z[R]*N,E[R]*=Z[R]*N}this.lineTickEnable[v]&&this._lines.drawAxisTicks(v,C[v].primalOffset,V,this.lineTickColor[v],this.lineTickWidth[v]*this.pixelRatio),this.lineTickMirror[v]&&this._lines.drawAxisTicks(v,C[v].mirrorOffset,E,this.lineTickColor[v],this.lineTickWidth[v]*this.pixelRatio)}this._lines.unbind(),this._text.bind(i,n,r,this.pixelRatio);var D,X;function H(t){(X=[0,0,0])[t]=1}function W(t,e,i){var n=(t+1)%3,r=(t+2)%3,a=e[n],s=e[r],o=i[n],l=i[r];a>0&&l>0||a>0&&l<0||a<0&&l>0||a<0&&l<0?H(n):(s>0&&o>0||s>0&&o<0||s<0&&o>0||s<0&&o<0)&&H(r)}for(v=0;v<3;++v){var k=C[v].primalMinor,M=C[v].mirrorMinor,T=d(y,C[v].primalOffset);for(R=0;R<3;++R)this.lineTickEnable[v]&&(T[R]+=x*k[R]*Math.max(this.lineTickLength[R],0)/i[5*R]);var Y=[0,0,0];if(Y[v]=1,this.tickEnable[v]){-3600===this.tickAngle[v]?(this.tickAngle[v]=0,this.tickAlign[v]="auto"):this.tickAlign[v]=-1,D=1,"auto"===(A=[this.tickAlign[v],.5,D])[0]?A[0]=0:A[0]=parseInt(""+A[0]),X=[0,0,0],W(v,k,M);for(R=0;R<3;++R)T[R]+=x*k[R]*this.tickPad[R]/i[5*R];this._text.drawTicks(v,this.tickSize[v],this.tickAngle[v],T,this.tickColor[v],Y,X,A)}if(this.labelEnable[v]){D=0,X=[0,0,0],this.labels[v].length>4&&(H(v),D=1),"auto"===(A=[this.labelAlign[v],.5,D])[0]?A[0]=0:A[0]=parseInt(""+A[0]);for(R=0;R<3;++R)T[R]+=x*k[R]*this.labelPad[R]/i[5*R];T[v]+=.5*(a[0][v]+a[1][v]),this._text.drawLabel(v,this.labelSize[v],this.labelAngle[v],T,this.labelColor[v],[0,0,0],X,A)}}this._text.unbind()},B.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(t,e,i){t.exports=function(t){for(var e=[],i=[],o=0,l=0;l<3;++l)for(var c=(l+1)%3,g=(l+2)%3,u=[0,0,0],d=[0,0,0],h=-1;h<=1;h+=2){i.push(o,o+2,o+1,o+1,o+2,o+3),u[l]=h,d[l]=h;for(var B=-1;B<=1;B+=2){u[c]=B;for(var p=-1;p<=1;p+=2)u[g]=p,e.push(u[0],u[1],u[2],d[0],d[1],d[2]),o+=1}var F=c;c=g,g=F}var f=n(t,new Float32Array(e)),Q=n(t,new Uint16Array(i),t.ELEMENT_ARRAY_BUFFER),I=r(t,[{buffer:f,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:f,type:t.FLOAT,size:3,offset:12,stride:24}],Q),U=a(t);return U.attributes.position.location=0,U.attributes.normal.location=1,new s(t,f,I,U)};var n=i(2762),r=i(8116),a=i(1879).bg;function s(t,e,i,n){this.gl=t,this.buffer=e,this.vao=i,this.shader=n}var o=s.prototype;o.draw=function(t,e,i,n,r,a){for(var s=!1,o=0;o<3;++o)s=s||r[o];if(s){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:i,bounds:n,enable:r,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},o.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(t,e,i){t.exports=function(t,e,i,a,h){r(o,e,t),r(o,i,o);for(var Q=0,I=0;I<2;++I){g[2]=a[I][2];for(var U=0;U<2;++U){g[1]=a[U][1];for(var b=0;b<2;++b)g[0]=a[b][0],d(l[Q],g,o),Q+=1}}var y=-1;for(I=0;I<8;++I){for(var m=l[I][3],x=0;x<3;++x)c[I][x]=l[I][x]/m;h&&(c[I][2]*=-1),m<0&&(y<0||c[I][2]<c[y][2])&&(y=I)}if(y<0){y=0;for(var v=0;v<3;++v){for(var C=(v+2)%3,A=(v+1)%3,L=-1,G=-1,R=0;R<2;++R){var S=(V=R<<v)+(R<<C)+(1-R<<A),w=V+(1-R<<C)+(R<<A);s(c[V],c[S],c[w],u)<0||(R?L=1:G=1)}if(L<0||G<0)G>L&&(y|=1<<v);else{for(R=0;R<2;++R){S=(V=R<<v)+(R<<C)+(1-R<<A),w=V+(1-R<<C)+(R<<A);var V,E=B([l[V],l[S],l[w],l[V+(1<<C)+(1<<A)]]);R?L=E:G=E}G>L&&(y|=1<<v)}}}var Z=7^y,N=-1;for(I=0;I<8;++I)I!==y&&I!==Z&&(N<0||c[N][1]>c[I][1])&&(N=I);var D=-1;for(I=0;I<3;++I){if((H=N^1<<I)!==y&&H!==Z)D<0&&(D=H),(A=c[H])[0]<c[D][0]&&(D=H)}var X=-1;for(I=0;I<3;++I){var H;if((H=N^1<<I)!==y&&H!==Z&&H!==D)X<0&&(X=H),(A=c[H])[0]>c[X][0]&&(X=H)}var W=p;W[0]=W[1]=W[2]=0,W[n.log2(D^N)]=N&D,W[n.log2(N^X)]=N&X;var k=7^X;k===y||k===Z?(k=7^D,W[n.log2(X^k)]=k&X):W[n.log2(D^k)]=k&D;var M=F,T=y;for(v=0;v<3;++v)M[v]=T&1<<v?-1:1;return f};var n=i(8828),r=i(6760),a=i(5202),s=i(3250),o=new Array(16),l=new Array(8),c=new Array(8),g=new Array(3),u=[0,0,0];function d(t,e,i){for(var n=0;n<4;++n){t[n]=i[12+n];for(var r=0;r<3;++r)t[n]+=e[r]*i[4*r+n]}}!function(){for(var t=0;t<8;++t)l[t]=[1,1,1,1],c[t]=[1,1,1]}();var h=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function B(t){for(var e=0;e<h.length;++e)if((t=a.positive(t,h[e])).length<3)return 0;var i=t[0],n=i[0]/i[3],r=i[1]/i[3],s=0;for(e=1;e+1<t.length;++e){var o=t[e],l=t[e+1],c=o[0]/o[3]-n,g=o[1]/o[3]-r,u=l[0]/l[3]-n,d=l[1]/l[3]-r;s+=Math.abs(c*d-g*u)}return s}var p=[1,1,1],F=[0,0,0],f={cubeEdges:p,axis:F}},501:function(t,e,i){t.exports=function(t,e,i){var s=[],o=[0,0,0],l=[0,0,0],c=[0,0,0],g=[0,0,0];s.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var u=0;u<3;++u){for(var d=s.length/3|0,B=0;B<i[u].length;++B){var p=+i[u][B].x;s.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var F=s.length/3|0;o[u]=d,l[u]=F-d;d=s.length/3|0;for(var f=0;f<i[u].length;++f){p=+i[u][f].x;s.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}F=s.length/3|0;c[u]=d,g[u]=F-d}var Q=n(t,new Float32Array(s)),I=r(t,[{buffer:Q,type:t.FLOAT,size:3,stride:0,offset:0}]),U=a(t);return U.attributes.position.location=0,new h(t,Q,I,U,l,o,g,c)};var n=i(2762),r=i(8116),a=i(1879).n,s=[0,0,0],o=[0,0,0],l=[0,0,0],c=[0,0,0],g=[1,1];function u(t){return t[0]=t[1]=t[2]=0,t}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function h(t,e,i,n,r,a,s,o){this.gl=t,this.vertBuffer=e,this.vao=i,this.shader=n,this.tickCount=r,this.tickOffset=a,this.gridCount=s,this.gridOffset=o}var B=h.prototype;B.bind=function(t,e,i){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=i,g[0]=this.gl.drawingBufferWidth,g[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=g,this.vao.bind()},B.unbind=function(){this.vao.unbind()},B.drawAxisLine=function(t,e,i,n,r){var a=u(o);this.shader.uniforms.majorAxis=o,a[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=a;var s,g=d(c,i);g[t]+=e[0][t],this.shader.uniforms.offset=g,this.shader.uniforms.lineWidth=r,this.shader.uniforms.color=n,(s=u(l))[(t+2)%3]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,6),(s=u(l))[(t+1)%3]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,6)},B.drawAxisTicks=function(t,e,i,n,r){if(this.tickCount[t]){var a=u(s);a[t]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=i,this.shader.uniforms.color=n,this.shader.uniforms.lineWidth=r;var o=u(l);o[t]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}},B.drawGrid=function(t,e,i,n,r,a){if(this.gridCount[t]){var g=u(o);g[e]=i[1][e]-i[0][e],this.shader.uniforms.minorAxis=g;var h=d(c,n);h[e]+=i[0][e],this.shader.uniforms.offset=h;var B=u(s);B[t]=1,this.shader.uniforms.majorAxis=B;var p=u(l);p[t]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=r,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t])}},B.drawZero=function(t,e,i,n,r,a){var s=u(o);this.shader.uniforms.majorAxis=s,s[t]=i[1][t]-i[0][t],this.shader.uniforms.minorAxis=s;var g=d(c,n);g[t]+=i[0][t],this.shader.uniforms.offset=g;var h=u(l);h[e]=1,this.shader.uniforms.screenAxis=h,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=r,this.vao.draw(this.gl.TRIANGLES,6)},B.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(t,e,i){var n=i(3236),r=i(9405),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);e.n=function(t){return r(t,a,s,null,[{name:"position",type:"vec3"}])};var o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}\n"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);e.Q=function(t){return r(t,o,l,null,[{name:"position",type:"vec3"}])};var c=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}\n"]),g=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);e.bg=function(t){return r(t,c,g,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(t,e,i){t.exports=function(t,e,i,a,o,l){var g=n(t),u=r(t,[{buffer:g,size:3}]),d=s(t);d.attributes.position.location=0;var h=new c(t,d,g,u);return h.update(e,i,a,o,l),h};var n=i(2762),r=i(8116),a=i(4359),s=i(1879).Q,o=window||process.global||{},l=o.__TEXT_CACHE||{};o.__TEXT_CACHE={};function c(t,e,i,n){this.gl=t,this.shader=e,this.buffer=i,this.vao=n,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var g=c.prototype,u=[0,0];g.bind=function(t,e,i,n){this.vao.bind(),this.shader.bind();var r=this.shader.uniforms;r.model=t,r.view=e,r.projection=i,r.pixelScale=n,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=u},g.unbind=function(){this.vao.unbind()},g.update=function(t,e,i,n,r){var s=[];function o(t,e,i,n,r,o){var c=[i.style,i.weight,i.variant,i.family].join("_"),g=l[c];g||(g=l[c]={});var u=g[e];u||(u=g[e]=function(t,e){try{return a(t,e)}catch(e){return console.warn('error vectorizing text:"'+t+'" error:',e),{cells:[],positions:[]}}}(e,{triangles:!0,font:i.family,fontStyle:i.style,fontWeight:i.weight,fontVariant:i.variant,textAlign:"center",textBaseline:"middle",lineSpacing:r,styletags:o}));for(var d=(n||12)/12,h=u.positions,B=u.cells,p=0,F=B.length;p<F;++p)for(var f=B[p],Q=2;Q>=0;--Q){var I=h[f[Q]];s.push(d*I[0],-d*I[1],t)}}for(var c=[0,0,0],g=[0,0,0],u=[0,0,0],d=[0,0,0],h={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},B=0;B<3;++B){u[B]=s.length/3|0,o(.5*(t[0][B]+t[1][B]),e[B],i[B],12,1.25,h),d[B]=(s.length/3|0)-u[B],c[B]=s.length/3|0;for(var p=0;p<n[B].length;++p)if(n[B][p].text){var F={family:n[B][p].font||r[B].family,style:r[B].fontStyle||r[B].style,weight:r[B].fontWeight||r[B].weight,variant:r[B].fontVariant||r[B].variant};o(n[B][p].x,n[B][p].text,F,n[B][p].fontSize||12,1.25,h)}g[B]=(s.length/3|0)-c[B]}this.buffer.update(s),this.tickOffset=c,this.tickCount=g,this.labelOffset=u,this.labelCount=d},g.drawTicks=function(t,e,i,n,r,a,s,o){this.tickCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=r,this.shader.uniforms.angle=i,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=s,this.shader.uniforms.alignOpt=o,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},g.drawLabel=function(t,e,i,n,r,a,s,o){this.labelCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=r,this.shader.uniforms.angle=i,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=s,this.shader.uniforms.alignOpt=o,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(t,e){function i(t,e){var i=t+"",n=i.indexOf("."),r=0;n>=0&&(r=i.length-n-1);var a=Math.pow(10,r),s=Math.round(t*e*a),o=s+"";if(o.indexOf("e")>=0)return o;var l=s/a,c=s%a;s<0?(l=0|-Math.ceil(l),c=0|-c):(l=0|Math.floor(l),c|=0);var g=""+l;if(s<0&&(g="-"+g),r){for(var u=""+c;u.length<r;)u="0"+u;return g+"."+u}return g}e.create=function(t,e){for(var n=[],r=0;r<3;++r){var a=[];t[0][r],t[1][r];for(var s=0;s*e[r]<=t[1][r];++s)a.push({x:s*e[r],text:i(e[r],s)});for(s=-1;s*e[r]>=t[0][r];--s)a.push({x:s*e[r],text:i(e[r],s)});n.push(a)}return n},e.equal=function(t,e){for(var i=0;i<3;++i){if(t[i].length!==e[i].length)return!1;for(var n=0;n<t[i].length;++n){var r=t[i][n],a=e[i][n];if(r.x!==a.x||r.text!==a.text||r.font!==a.font||r.fontColor!==a.fontColor||r.fontSize!==a.fontSize||r.dx!==a.dx||r.dy!==a.dy)return!1}}return!0}},5445:function(t,e,i){t.exports=function(t,e,i,l,u){var d=e.model||c,h=e.view||c,f=e.projection||c,Q=e._ortho||!1,I=t.bounds,U=(u=u||a(d,h,f,I,Q)).axis;s(g,h,d),s(g,f,g);for(var b=p,y=0;y<3;++y)b[y].lo=1/0,b[y].hi=-1/0,b[y].pixelsPerDataUnit=1/0;var m=n(o(g,g));o(g,g);for(var x=0;x<3;++x){var v=(x+1)%3,C=(x+2)%3,A=F;t:for(y=0;y<2;++y){var L=[];if(U[x]<0!=!!y){A[x]=I[y][x];for(var G=0;G<2;++G){A[v]=I[G^y][v];for(var R=0;R<2;++R)A[C]=I[R^G^y][C],L.push(A.slice())}var S=Q?5:4;for(G=S;G===S;++G){if(0===L.length)continue t;L=r.positive(L,m[G])}for(G=0;G<L.length;++G){C=L[G];var w=B(F,g,C,i,l);for(R=0;R<3;++R)b[R].lo=Math.min(b[R].lo,C[R]),b[R].hi=Math.max(b[R].hi,C[R]),R!==x&&(b[R].pixelsPerDataUnit=Math.min(b[R].pixelsPerDataUnit,Math.abs(w[R])))}}}}return b};var n=i(5033),r=i(5202),a=i(6429),s=i(6760),o=i(5665),l=i(5352),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),g=new Float32Array(16);function u(t,e,i){this.lo=t,this.hi=e,this.pixelsPerDataUnit=i}var d=[0,0,0,1],h=[0,0,0,1];function B(t,e,i,n,r){for(var a=0;a<3;++a){for(var s=d,o=h,c=0;c<3;++c)o[c]=s[c]=i[c];o[3]=s[3]=1,o[a]+=1,l(o,o,e),o[3]<0&&(t[a]=1/0),s[a]-=1,l(s,s,e),s[3]<0&&(t[a]=1/0);var g=(s[0]/s[3]-o[0]/o[3])*n,u=(s[1]/s[3]-o[1]/o[3])*r;t[a]=.25*Math.sqrt(g*g+u*u)}return t}var p=[new u(1/0,-1/0,1/0),new u(1/0,-1/0,1/0),new u(1/0,-1/0,1/0)],F=[0,0,0]},2762:function(t,e,i){var n=i(1888),r=i(5298),a=i(9618),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function o(t,e,i,n,r){this.gl=t,this.type=e,this.handle=i,this.length=n,this.usage=r}var l=o.prototype;function c(t,e,i,n,r,a){var s=r.length*r.BYTES_PER_ELEMENT;if(a<0)return t.bufferData(e,r,n),s;if(s+a>i)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,a,r),i}function g(t,e){for(var i=n.malloc(t.length,e),r=t.length,a=0;a<r;++a)i[a]=t[a];return i}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var i=t.dtype;if(s.indexOf(i)<0&&(i="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)i=gl.getExtension("OES_element_index_uint")&&"uint16"!==i?"uint32":"uint16";if(i===t.dtype&&function(t,e){for(var i=1,n=e.length-1;n>=0;--n){if(e[n]!==i)return!1;i*=t[n]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,t.data,e):this.length=c(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var o=n.malloc(t.size,i),l=a(o,t.shape);r.assign(l,t),this.length=c(this.gl,this.type,this.length,this.usage,e<0?o:o.subarray(0,t.size),e),n.free(o)}}else if(Array.isArray(t)){var u;u=this.type===this.gl.ELEMENT_ARRAY_BUFFER?g(t,"uint16"):g(t,"float32"),this.length=c(this.gl,this.type,this.length,this.usage,e<0?u:u.subarray(0,t.length),e),n.free(u)}else if("object"==typeof t&&"number"==typeof t.length)this.length=c(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}},t.exports=function(t,e,i,n){if(i=i||t.ARRAY_BUFFER,n=n||t.DYNAMIC_DRAW,i!==t.ARRAY_BUFFER&&i!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==t.DYNAMIC_DRAW&&n!==t.STATIC_DRAW&&n!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var r=t.createBuffer(),a=new o(t,i,r,0,n);return a.update(e),a}},6405:function(t,e,i){var n=i(2931);t.exports=function(t,e){var i=t.positions,r=t.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return e&&(e[0]=[0,0,0],e[1]=[0,0,0]),a;for(var s=0,o=1/0,l=-1/0,c=1/0,g=-1/0,u=1/0,d=-1/0,h=null,B=null,p=[],F=1/0,f=!1,Q="raw"===t.coneSizemode,I=0;I<i.length;I++){var U=i[I];o=Math.min(U[0],o),l=Math.max(U[0],l),c=Math.min(U[1],c),g=Math.max(U[1],g),u=Math.min(U[2],u),d=Math.max(U[2],d);var b=r[I];if(n.length(b)>s&&(s=n.length(b)),I&&!Q){var y=2*n.distance(h,U)/(n.length(B)+n.length(b));y?(F=Math.min(F,y),f=!1):f=!0}f||(h=U,B=b),p.push(b)}var m=[o,c,u],x=[l,g,d];e&&(e[0]=m,e[1]=x),0===s&&(s=1);var v=1/s;isFinite(F)||(F=1),a.vectorScale=F;var C=t.coneSize||(Q?1:.5);t.absoluteConeSize&&(C=t.absoluteConeSize*v),a.coneScale=C;I=0;for(var A=0;I<i.length;I++)for(var L=(U=i[I])[0],G=U[1],R=U[2],S=p[I],w=n.length(S)*v,V=0;V<8;V++){a.positions.push([L,G,R,A++]),a.positions.push([L,G,R,A++]),a.positions.push([L,G,R,A++]),a.positions.push([L,G,R,A++]),a.positions.push([L,G,R,A++]),a.positions.push([L,G,R,A++]),a.vectors.push(S),a.vectors.push(S),a.vectors.push(S),a.vectors.push(S),a.vectors.push(S),a.vectors.push(S),a.vertexIntensity.push(w,w,w),a.vertexIntensity.push(w,w,w);var E=a.positions.length;a.cells.push([E-6,E-5,E-4],[E-3,E-2,E-1])}return a};var r=i(614);t.exports.createMesh=i(9060),t.exports.createConeMesh=function(e,i){return t.exports.createMesh(e,i,{shaders:r,traceType:"cone"})}},9060:function(t,e,i){var n=i(9405),r=i(2762),a=i(8116),s=i(7766),o=i(6760),l=i(7608),c=i(9618),g=i(6729),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(t,e,i,n,r,a,s,o,l,c,g){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=i,this.pickShader=n,this.trianglePositions=r,this.triangleVectors=a,this.triangleColors=o,this.triangleUVs=l,this.triangleIds=s,this.triangleVAO=c,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=g,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=u,this._view=u,this._projection=u,this._resolution=[1,1]}var h=d.prototype;h.isOpaque=function(){return this.opacity>=1},h.isTransparent=function(){return this.opacity<1},h.pickSlots=1,h.setPickBase=function(t){this.pickId=t},h.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"lightPosition"in t&&(this.lightPosition=t.lightPosition),"opacity"in t&&(this.opacity=t.opacity),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),void 0!==t.tubeScale&&(this.tubeScale=t.tubeScale),void 0!==t.vectorScale&&(this.vectorScale=t.vectorScale),void 0!==t.coneScale&&(this.coneScale=t.coneScale),void 0!==t.coneOffset&&(this.coneOffset=t.coneOffset),t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t){for(var e=g({colormap:t,nshades:256,format:"rgba"}),i=new Uint8Array(1024),n=0;n<256;++n){for(var r=e[n],a=0;a<3;++a)i[4*n+a]=r[a];i[4*n+3]=255*r[3]}return c(i,[256,256,4],[4,0,1])}(t.colormap)),this.texture.generateMipmap());var i=t.cells,n=t.positions,r=t.vectors;if(n&&i&&r){var a=[],s=[],o=[],l=[],u=[];this.cells=i,this.positions=n,this.vectors=r;var d=t.meshColor||[1,1,1,1],h=t.vertexIntensity,B=1/0,p=-1/0;if(h)if(t.vertexIntensityBounds)B=+t.vertexIntensityBounds[0],p=+t.vertexIntensityBounds[1];else for(var F=0;F<h.length;++F){var f=h[F];B=Math.min(B,f),p=Math.max(p,f)}else for(F=0;F<n.length;++F){f=n[F][2];B=Math.min(B,f),p=Math.max(p,f)}this.intensity=h||function(t){for(var e=t.length,i=new Array(e),n=0;n<e;++n)i[n]=t[n][2];return i}(n),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(F=0;F<n.length;++F)for(var Q=n[F],I=0;I<3;++I)!isNaN(Q[I])&&isFinite(Q[I])&&(this.bounds[0][I]=Math.min(this.bounds[0][I],Q[I]),this.bounds[1][I]=Math.max(this.bounds[1][I],Q[I]));var U=0;t:for(F=0;F<i.length;++F){var b=i[F];if(3===b.length){for(I=0;I<3;++I){Q=n[m=b[I]];for(var y=0;y<3;++y)if(isNaN(Q[y])||!isFinite(Q[y]))continue t}for(I=0;I<3;++I){var m;Q=n[m=b[2-I]];a.push(Q[0],Q[1],Q[2],Q[3]);var x=r[m];s.push(x[0],x[1],x[2],x[3]||0);var v,C=d;3===C.length?o.push(C[0],C[1],C[2],1):o.push(C[0],C[1],C[2],C[3]),v=h?[(h[m]-B)/(p-B),0]:[(Q[2]-B)/(p-B),0],l.push(v[0],v[1]),u.push(F)}U+=1}}this.triangleCount=U,this.trianglePositions.update(a),this.triangleVectors.update(s),this.triangleColors.update(o),this.triangleUVs.update(l),this.triangleIds.update(new Uint32Array(u))}},h.drawTransparent=h.draw=function(t){t=t||{};for(var e=this.gl,i=t.model||u,n=t.view||u,r=t.projection||u,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],s=0;s<3;++s)a[0][s]=Math.max(a[0][s],this.clipBounds[0][s]),a[1][s]=Math.min(a[1][s],this.clipBounds[1][s]);var c={model:i,view:n,projection:r,inverseModel:u.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};c.inverseModel=l(c.inverseModel,c.model),e.disable(e.CULL_FACE),this.texture.bind(0);var g=new Array(16);o(g,c.view,c.model),o(g,c.projection,g),l(g,g);for(s=0;s<3;++s)c.eyePosition[s]=g[12+s]/g[15];var d=g[15];for(s=0;s<3;++s)d+=this.lightPosition[s]*g[4*s+3];for(s=0;s<3;++s){for(var h=g[12+s],B=0;B<3;++B)h+=g[4*B+s]*this.lightPosition[B];c.lightPosition[s]=h/d}if(this.triangleCount>0){var p=this.triShader;p.bind(),p.uniforms=c,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},h.drawPick=function(t){t=t||{};for(var e=this.gl,i=t.model||u,n=t.view||u,r=t.projection||u,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],s=0;s<3;++s)a[0][s]=Math.max(a[0][s],this.clipBounds[0][s]),a[1][s]=Math.min(a[1][s],this.clipBounds[1][s]);this._model=[].slice.call(i),this._view=[].slice.call(n),this._projection=[].slice.call(r),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var o={model:i,view:n,projection:r,clipBounds:a,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},l=this.pickShader;l.bind(),l.uniforms=o,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},h.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[0]+256*t.value[1]+65536*t.value[2],i=this.cells[e],n=this.positions[i[1]].slice(0,3),r={position:n,dataCoordinate:n,index:Math.floor(i[1]/48)};return"cone"===this.traceType?r.index=Math.floor(i[1]/48):"streamtube"===this.traceType&&(r.intensity=this.intensity[i[1]],r.velocity=this.vectors[i[1]].slice(0,3),r.divergence=this.vectors[i[1]][3],r.index=e),r},h.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},t.exports=function(t,e,i){var o=i.shaders;1===arguments.length&&(t=(e=t).gl);var l=function(t,e){var i=n(t,e.meshShader.vertex,e.meshShader.fragment,null,e.meshShader.attributes);return i.attributes.position.location=0,i.attributes.color.location=2,i.attributes.uv.location=3,i.attributes.vector.location=4,i}(t,o),g=function(t,e){var i=n(t,e.pickShader.vertex,e.pickShader.fragment,null,e.pickShader.attributes);return i.attributes.position.location=0,i.attributes.id.location=1,i.attributes.vector.location=4,i}(t,o),u=s(t,c(new Uint8Array([255,255,255,255]),[1,1,4]));u.generateMipmap(),u.minFilter=t.LINEAR_MIPMAP_LINEAR,u.magFilter=t.LINEAR;var h=r(t),B=r(t),p=r(t),F=r(t),f=r(t),Q=new d(t,u,l,g,h,B,f,p,F,a(t,[{buffer:h,type:t.FLOAT,size:4},{buffer:f,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:p,type:t.FLOAT,size:4},{buffer:F,type:t.FLOAT,size:2},{buffer:B,type:t.FLOAT,size:4}]),i.traceType||"cone");return Q.update(e),Q}},614:function(t,e,i){var n=i(3236),r=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),s=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * (view * conePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);e.meshShader={vertex:r,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},e.pickShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(t){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(t,e,i){var n=i(737);t.exports=function(t){return n[t]}},9165:function(t,e,i){t.exports=function(t){var e=t.gl,i=n(e),s=r(e,[{buffer:i,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:i,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:i,type:e.FLOAT,size:3,offset:28,stride:40}]),l=a(e);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var c=new o(e,i,s,l);return c.update(t),c};var n=i(2762),r=i(8116),a=i(3436),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(t,e,i,n){this.gl=t,this.shader=n,this.buffer=e,this.vao=i,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=o.prototype;function c(t,e){for(var i=0;i<3;++i)t[0][i]=Math.min(t[0][i],e[i]),t[1][i]=Math.max(t[1][i],e[i])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(t){var e=this.gl,i=this.shader.uniforms;this.shader.bind();var n=i.view=t.view||s,r=i.projection=t.projection||s;i.model=t.model||s,i.clipBounds=this.clipBounds,i.opacity=this.opacity;var a=n[12],o=n[13],l=n[14],c=n[15],g=(t._ortho||!1?2:1)*this.pixelRatio*(r[3]*a+r[7]*o+r[11]*l+r[15]*c)/e.drawingBufferHeight;this.vao.bind();for(var u=0;u<3;++u)e.lineWidth(this.lineWidth[u]*this.pixelRatio),i.capSize=this.capSize[u]*g,this.lineCount[u]&&e.drawArrays(e.LINES,this.lineOffset[u],this.lineCount[u]);this.vao.unbind()};var g=function(){for(var t=new Array(3),e=0;e<3;++e){for(var i=[],n=1;n<=2;++n)for(var r=-1;r<=1;r+=2){var a=[0,0,0];a[(n+e)%3]=r,i.push(a)}t[e]=i}return t}();function u(t,e,i,n){for(var r=g[n],a=0;a<r.length;++a){var s=r[a];t.push(e[0],e[1],e[2],i[0],i[1],i[2],i[3],s[0],s[1],s[2])}return r.length}l.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],i=t.position,n=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),i&&n){var r=[],a=i.length,s=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var o=0;o<3;++o){this.lineOffset[o]=s;t:for(var l=0;l<a;++l){for(var g=i[l],d=0;d<3;++d)if(isNaN(g[d])||!isFinite(g[d]))continue t;var h=n[l],B=e[o];if(Array.isArray(B[0])&&(B=e[l]),3===B.length?B=[B[0],B[1],B[2],1]:4===B.length&&(B=[B[0],B[1],B[2],B[3]],!this.hasAlpha&&B[3]<1&&(this.hasAlpha=!0)),!isNaN(h[0][o])&&!isNaN(h[1][o])){var p;if(h[0][o]<0)(p=g.slice())[o]+=h[0][o],r.push(g[0],g[1],g[2],B[0],B[1],B[2],B[3],0,0,0,p[0],p[1],p[2],B[0],B[1],B[2],B[3],0,0,0),c(this.bounds,p),s+=2+u(r,p,B,o);if(h[1][o]>0)(p=g.slice())[o]+=h[1][o],r.push(g[0],g[1],g[2],B[0],B[1],B[2],B[3],0,0,0,p[0],p[1],p[2],B[0],B[1],B[2],B[3],0,0,0),c(this.bounds,p),s+=2+u(r,p,B,o)}}this.lineCount[o]=s-this.lineOffset[o]}this.buffer.update(r)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(t,e,i){var n=i(3236),r=i(9405),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * (view * worldPosition);\n  fragColor           = color;\n  fragPosition        = position;\n}"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);t.exports=function(t){return r(t,a,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(t,e,i){var n=i(7766);t.exports=function(t,e,i,n){r||(r=t.FRAMEBUFFER_UNSUPPORTED,a=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,s=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,o=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var c=t.getExtension("WEBGL_draw_buffers");!l&&c&&function(t,e){var i=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(i+1);for(var n=0;n<=i;++n){for(var r=new Array(i),a=0;a<n;++a)r[a]=t.COLOR_ATTACHMENT0+a;for(a=n;a<i;++a)r[a]=t.NONE;l[n]=r}}(t,c);Array.isArray(e)&&(n=i,i=0|e[1],e=0|e[0]);if("number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var g=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>g||i<0||i>g)throw new Error("gl-fbo: Parameters are too large for FBO");var u=1;if("color"in(n=n||{})){if((u=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(u>1){if(!c)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(u>t.getParameter(c.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+u+" draw buffers")}}var d=t.UNSIGNED_BYTE,h=t.getExtension("OES_texture_float");if(n.float&&u>0){if(!h)throw new Error("gl-fbo: Context does not support floating point textures");d=t.FLOAT}else n.preferFloat&&u>0&&h&&(d=t.FLOAT);var p=!0;"depth"in n&&(p=!!n.depth);var F=!1;"stencil"in n&&(F=!!n.stencil);return new B(t,e,i,d,u,p,F,c)};var r,a,s,o,l=null;function c(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function g(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function u(t){switch(t){case r:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case s:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case o:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(t,e,i,r,a,s){if(!r)return null;var o=n(t,e,i,a,r);return o.magFilter=t.NEAREST,o.minFilter=t.NEAREST,o.mipSamples=1,o.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,s,t.TEXTURE_2D,o.handle,0),o}function h(t,e,i,n,r){var a=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorage(t.RENDERBUFFER,n,e,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,r,t.RENDERBUFFER,a),a}function B(t,e,i,n,r,a,s,o){this.gl=t,this._shape=[0|e,0|i],this._destroyed=!1,this._ext=o,this.color=new Array(r);for(var B=0;B<r;++B)this.color[B]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=a,this._useStencil=s;var p=this,F=[0|e,0|i];Object.defineProperties(F,{0:{get:function(){return p._shape[0]},set:function(t){return p.width=t}},1:{get:function(){return p._shape[1]},set:function(t){return p.height=t}}}),this._shapeVector=F,function(t){var e=c(t.gl),i=t.gl,n=t.handle=i.createFramebuffer(),r=t._shape[0],a=t._shape[1],s=t.color.length,o=t._ext,B=t._useStencil,p=t._useDepth,F=t._colorType;i.bindFramebuffer(i.FRAMEBUFFER,n);for(var f=0;f<s;++f)t.color[f]=d(i,r,a,F,i.RGBA,i.COLOR_ATTACHMENT0+f);0===s?(t._color_rb=h(i,r,a,i.RGBA4,i.COLOR_ATTACHMENT0),o&&o.drawBuffersWEBGL(l[0])):s>1&&o.drawBuffersWEBGL(l[s]);var Q=i.getExtension("WEBGL_depth_texture");Q?B?t.depth=d(i,r,a,Q.UNSIGNED_INT_24_8_WEBGL,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):p&&(t.depth=d(i,r,a,i.UNSIGNED_SHORT,i.DEPTH_COMPONENT,i.DEPTH_ATTACHMENT)):p&&B?t._depth_rb=h(i,r,a,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):p?t._depth_rb=h(i,r,a,i.DEPTH_COMPONENT16,i.DEPTH_ATTACHMENT):B&&(t._depth_rb=h(i,r,a,i.STENCIL_INDEX,i.STENCIL_ATTACHMENT));var I=i.checkFramebufferStatus(i.FRAMEBUFFER);if(I!==i.FRAMEBUFFER_COMPLETE){for(t._destroyed=!0,i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(i.deleteRenderbuffer(t._depth_rb),t._depth_rb=null),f=0;f<t.color.length;++f)t.color[f].dispose(),t.color[f]=null;t._color_rb&&(i.deleteRenderbuffer(t._color_rb),t._color_rb=null),g(i,e),u(I)}g(i,e)}(this)}var p=B.prototype;function F(t,e,i){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==i){var n=t.gl,r=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(e<0||e>r||i<0||i>r)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=i;for(var a=c(n),s=0;s<t.color.length;++s)t.color[s].shape=t._shape;t._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,t._shape[0],t._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,t.handle);var o=n.checkFramebufferStatus(n.FRAMEBUFFER);o!==n.FRAMEBUFFER_COMPLETE&&(t.dispose(),g(n,a),u(o)),g(n,a)}}Object.defineProperties(p,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],i=0|t[1];return F(this,e,i),[e,i]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return F(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,F(this,this._shape[0],t),t},enumerable:!1}}),p.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},p.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(t,e,i){var n=i(3387).sprintf,r=i(5171),a=i(1848),s=i(1085);t.exports=function(t,e,i){var o=a(e)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==i&&(l=i===r.FRAGMENT_SHADER?"fragment":"vertex");for(var c=n("Error compiling %s shader %s:\n",l,o),g=n("%s%s",c,t),u=t.split("\n"),d={},h=0;h<u.length;h++){var B=u[h];if(""!==B&&"\0"!==B){var p=parseInt(B.split(":")[2]);if(isNaN(p))throw new Error(n("Could not parse error: %s",B));d[p]=B}}var F=s(e).split("\n");for(h=0;h<F.length;h++){if(d[h+3]||d[h+2]||d[h+1])if(c+=F[h]+"\n",d[h+1]){var f=d[h+1];f=f.substr(f.split(":",3).join(":").length+1).trim(),c+=n("^^^ %s\n\n",f)}}return{long:c.trim(),short:g.trim()}}},7319:function(t,e,i){var n=i(3236),r=i(9405),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];e.createShader=function(t){return r(t,a,s,null,l)},e.createPickShader=function(t){return r(t,a,o,null,l)}},5714:function(t,e,i){t.exports=function(t){var e=t.gl||t.scene&&t.scene.gl,i=u(e);i.attributes.position.location=0,i.attributes.nextPosition.location=1,i.attributes.arcLength.location=2,i.attributes.lineWidth.location=3,i.attributes.color.location=4;var s=d(e);s.attributes.position.location=0,s.attributes.nextPosition.location=1,s.attributes.arcLength.location=2,s.attributes.lineWidth.location=3,s.attributes.color.location=4;for(var o=n(e),l=r(e,[{buffer:o,size:3,offset:0,stride:48},{buffer:o,size:3,offset:12,stride:48},{buffer:o,size:1,offset:24,stride:48},{buffer:o,size:1,offset:28,stride:48},{buffer:o,size:4,offset:32,stride:48}]),g=c(new Array(1024),[256,1,4]),h=0;h<1024;++h)g.data[h]=255;var B=a(e,g);B.wrap=e.REPEAT;var p=new f(e,i,s,o,l,B);return p.update(t),p};var n=i(2762),r=i(8116),a=i(7766),s=new Uint8Array(4),o=new Float32Array(s.buffer);var l=i(2478),c=i(9618),g=i(7319),u=g.createShader,d=g.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function B(t,e){for(var i=0,n=0;n<3;++n){var r=t[n]-e[n];i+=r*r}return Math.sqrt(i)}function p(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],i=0;i<3;++i)e[0][i]=Math.max(t[0][i],e[0][i]),e[1][i]=Math.min(t[1][i],e[1][i]);return e}function F(t,e,i,n){this.arcLength=t,this.position=e,this.index=i,this.dataCoordinate=n}function f(t,e,i,n,r,a){this.gl=t,this.shader=e,this.pickShader=i,this.buffer=n,this.vao=r,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var Q=f.prototype;Q.isTransparent=function(){return this.hasAlpha},Q.isOpaque=function(){return!this.hasAlpha},Q.pickSlots=1,Q.setPickBase=function(t){this.pickId=t},Q.drawTransparent=Q.draw=function(t){if(this.vertexCount){var e=this.gl,i=this.shader,n=this.vao;i.bind(),i.uniforms={model:t.model||h,view:t.view||h,projection:t.projection||h,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},Q.drawPick=function(t){if(this.vertexCount){var e=this.gl,i=this.pickShader,n=this.vao;i.bind(),i.uniforms={model:t.model||h,view:t.view||h,projection:t.projection||h,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},Q.update=function(t){var e,i;this.dirty=!0;var n=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var r=[],a=[],s=[],o=0,g=0,u=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],d=t.position||t.positions;if(d){var h=t.color||t.colors||[0,0,0,1],p=t.lineWidth||1,F=!1;t:for(e=1;e<d.length;++e){var f,Q,I,U=d[e-1],b=d[e];for(a.push(o),s.push(U.slice()),i=0;i<3;++i){if(isNaN(U[i])||isNaN(b[i])||!isFinite(U[i])||!isFinite(b[i])){if(!n&&r.length>0){for(var y=0;y<24;++y)r.push(r[r.length-12]);g+=2,F=!0}continue t}u[0][i]=Math.min(u[0][i],U[i],b[i]),u[1][i]=Math.max(u[1][i],U[i],b[i])}Array.isArray(h[0])?(f=h.length>e-1?h[e-1]:h.length>0?h[h.length-1]:[0,0,0,1],Q=h.length>e?h[e]:h.length>0?h[h.length-1]:[0,0,0,1]):f=Q=h,3===f.length&&(f=[f[0],f[1],f[2],1]),3===Q.length&&(Q=[Q[0],Q[1],Q[2],1]),!this.hasAlpha&&f[3]<1&&(this.hasAlpha=!0),I=Array.isArray(p)?p.length>e-1?p[e-1]:p.length>0?p[p.length-1]:[0,0,0,1]:p;var m=o;if(o+=B(U,b),F){for(i=0;i<2;++i)r.push(U[0],U[1],U[2],b[0],b[1],b[2],m,I,f[0],f[1],f[2],f[3]);g+=2,F=!1}r.push(U[0],U[1],U[2],b[0],b[1],b[2],m,I,f[0],f[1],f[2],f[3],U[0],U[1],U[2],b[0],b[1],b[2],m,-I,f[0],f[1],f[2],f[3],b[0],b[1],b[2],U[0],U[1],U[2],o,-I,Q[0],Q[1],Q[2],Q[3],b[0],b[1],b[2],U[0],U[1],U[2],o,I,Q[0],Q[1],Q[2],Q[3]),g+=4}}if(this.buffer.update(r),a.push(o),s.push(d[d.length-1].slice()),this.bounds=u,this.vertexCount=g,this.points=s,this.arcLength=a,"dashes"in t){var x=t.dashes.slice();for(x.unshift(0),e=1;e<x.length;++e)x[e]=x[e-1]+x[e];var v=c(new Array(1024),[256,1,4]);for(e=0;e<256;++e){for(i=0;i<4;++i)v.set(e,0,i,0);1&l.le(x,x[x.length-1]*e/255)?v.set(e,0,0,0):v.set(e,0,0,255)}this.texture.setPixels(v)}},Q.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},Q.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=function(t,e,i,n){return s[0]=n,s[1]=i,s[2]=e,s[3]=t,o[0]}(t.value[0],t.value[1],t.value[2],0),i=l.le(this.arcLength,e);if(i<0)return null;if(i===this.arcLength.length-1)return new F(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),i);for(var n=this.points[i],r=this.points[Math.min(i+1,this.points.length-1)],a=(e-this.arcLength[i])/(this.arcLength[i+1]-this.arcLength[i]),c=1-a,g=[0,0,0],u=0;u<3;++u)g[u]=c*n[u]+a*r[u];var d=Math.min(a<.5?i:i+1,this.points.length-1);return new F(e,g,d,this.points[d])}},1903:function(t){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},6864:function(t){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},9921:function(t){t.exports=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],g=t[9],u=t[10],d=t[11],h=t[12],B=t[13],p=t[14],F=t[15];return(e*s-i*a)*(u*F-d*p)-(e*o-n*a)*(g*F-d*B)+(e*l-r*a)*(g*p-u*B)+(i*o-n*s)*(c*F-d*h)-(i*l-r*s)*(c*p-u*h)+(n*l-r*o)*(c*B-g*h)}},7399:function(t){t.exports=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i+i,o=n+n,l=r+r,c=i*s,g=n*s,u=n*o,d=r*s,h=r*o,B=r*l,p=a*s,F=a*o,f=a*l;return t[0]=1-u-B,t[1]=g+f,t[2]=d-F,t[3]=0,t[4]=g-f,t[5]=1-c-B,t[6]=h+p,t[7]=0,t[8]=d+F,t[9]=h-p,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},6743:function(t){t.exports=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=n+n,l=r+r,c=a+a,g=n*o,u=n*l,d=n*c,h=r*l,B=r*c,p=a*c,F=s*o,f=s*l,Q=s*c;return t[0]=1-(h+p),t[1]=u+Q,t[2]=d-f,t[3]=0,t[4]=u-Q,t[5]=1-(g+p),t[6]=B+F,t[7]=0,t[8]=d+f,t[9]=B-F,t[10]=1-(g+h),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}},7894:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},7608:function(t){t.exports=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],g=e[8],u=e[9],d=e[10],h=e[11],B=e[12],p=e[13],F=e[14],f=e[15],Q=i*o-n*s,I=i*l-r*s,U=i*c-a*s,b=n*l-r*o,y=n*c-a*o,m=r*c-a*l,x=g*p-u*B,v=g*F-d*B,C=g*f-h*B,A=u*F-d*p,L=u*f-h*p,G=d*f-h*F,R=Q*G-I*L+U*A+b*C-y*v+m*x;if(!R)return null;return R=1/R,t[0]=(o*G-l*L+c*A)*R,t[1]=(r*L-n*G-a*A)*R,t[2]=(p*m-F*y+f*b)*R,t[3]=(d*y-u*m-h*b)*R,t[4]=(l*C-s*G-c*v)*R,t[5]=(i*G-r*C+a*v)*R,t[6]=(F*U-B*m-f*I)*R,t[7]=(g*m-d*U+h*I)*R,t[8]=(s*L-o*C+c*x)*R,t[9]=(n*C-i*L-a*x)*R,t[10]=(B*y-p*U+f*Q)*R,t[11]=(u*U-g*y-h*Q)*R,t[12]=(o*v-s*A-l*x)*R,t[13]=(i*A-n*v+r*x)*R,t[14]=(p*I-B*b-F*Q)*R,t[15]=(g*b-u*I+d*Q)*R,t}},6582:function(t,e,i){var n=i(7894);t.exports=function(t,e,i,r){var a,s,o,l,c,g,u,d,h,B,p=e[0],F=e[1],f=e[2],Q=r[0],I=r[1],U=r[2],b=i[0],y=i[1],m=i[2];if(Math.abs(p-b)<1e-6&&Math.abs(F-y)<1e-6&&Math.abs(f-m)<1e-6)return n(t);u=p-b,d=F-y,h=f-m,B=1/Math.sqrt(u*u+d*d+h*h),a=I*(h*=B)-U*(d*=B),s=U*(u*=B)-Q*h,o=Q*d-I*u,(B=Math.sqrt(a*a+s*s+o*o))?(a*=B=1/B,s*=B,o*=B):(a=0,s=0,o=0);l=d*o-h*s,c=h*a-u*o,g=u*s-d*a,(B=Math.sqrt(l*l+c*c+g*g))?(l*=B=1/B,c*=B,g*=B):(l=0,c=0,g=0);return t[0]=a,t[1]=l,t[2]=u,t[3]=0,t[4]=s,t[5]=c,t[6]=d,t[7]=0,t[8]=o,t[9]=g,t[10]=h,t[11]=0,t[12]=-(a*p+s*F+o*f),t[13]=-(l*p+c*F+g*f),t[14]=-(u*p+d*F+h*f),t[15]=1,t}},6760:function(t){t.exports=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],c=e[6],g=e[7],u=e[8],d=e[9],h=e[10],B=e[11],p=e[12],F=e[13],f=e[14],Q=e[15],I=i[0],U=i[1],b=i[2],y=i[3];return t[0]=I*n+U*o+b*u+y*p,t[1]=I*r+U*l+b*d+y*F,t[2]=I*a+U*c+b*h+y*f,t[3]=I*s+U*g+b*B+y*Q,I=i[4],U=i[5],b=i[6],y=i[7],t[4]=I*n+U*o+b*u+y*p,t[5]=I*r+U*l+b*d+y*F,t[6]=I*a+U*c+b*h+y*f,t[7]=I*s+U*g+b*B+y*Q,I=i[8],U=i[9],b=i[10],y=i[11],t[8]=I*n+U*o+b*u+y*p,t[9]=I*r+U*l+b*d+y*F,t[10]=I*a+U*c+b*h+y*f,t[11]=I*s+U*g+b*B+y*Q,I=i[12],U=i[13],b=i[14],y=i[15],t[12]=I*n+U*o+b*u+y*p,t[13]=I*r+U*l+b*d+y*F,t[14]=I*a+U*c+b*h+y*f,t[15]=I*s+U*g+b*B+y*Q,t}},4040:function(t){t.exports=function(t,e,i,n,r,a,s){var o=1/(e-i),l=1/(n-r),c=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*o,t[13]=(r+n)*l,t[14]=(s+a)*c,t[15]=1,t}},4772:function(t){t.exports=function(t,e,i,n,r){var a=1/Math.tan(e/2),s=1/(n-r);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*s,t[15]=0,t}},6079:function(t){t.exports=function(t,e,i,n){var r,a,s,o,l,c,g,u,d,h,B,p,F,f,Q,I,U,b,y,m,x,v,C,A,L=n[0],G=n[1],R=n[2],S=Math.sqrt(L*L+G*G+R*R);if(Math.abs(S)<1e-6)return null;L*=S=1/S,G*=S,R*=S,r=Math.sin(i),a=Math.cos(i),s=1-a,o=e[0],l=e[1],c=e[2],g=e[3],u=e[4],d=e[5],h=e[6],B=e[7],p=e[8],F=e[9],f=e[10],Q=e[11],I=L*L*s+a,U=G*L*s+R*r,b=R*L*s-G*r,y=L*G*s-R*r,m=G*G*s+a,x=R*G*s+L*r,v=L*R*s+G*r,C=G*R*s-L*r,A=R*R*s+a,t[0]=o*I+u*U+p*b,t[1]=l*I+d*U+F*b,t[2]=c*I+h*U+f*b,t[3]=g*I+B*U+Q*b,t[4]=o*y+u*m+p*x,t[5]=l*y+d*m+F*x,t[6]=c*y+h*m+f*x,t[7]=g*y+B*m+Q*x,t[8]=o*v+u*C+p*A,t[9]=l*v+d*C+F*A,t[10]=c*v+h*C+f*A,t[11]=g*v+B*C+Q*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},5567:function(t){t.exports=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],g=e[9],u=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*r+c*n,t[5]=s*r+g*n,t[6]=o*r+u*n,t[7]=l*r+d*n,t[8]=c*r-a*n,t[9]=g*r-s*n,t[10]=u*r-o*n,t[11]=d*r-l*n,t}},2408:function(t){t.exports=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],c=e[8],g=e[9],u=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*r-c*n,t[1]=s*r-g*n,t[2]=o*r-u*n,t[3]=l*r-d*n,t[8]=a*n+c*r,t[9]=s*n+g*r,t[10]=o*n+u*r,t[11]=l*n+d*r,t}},7089:function(t){t.exports=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),a=e[0],s=e[1],o=e[2],l=e[3],c=e[4],g=e[5],u=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*r+c*n,t[1]=s*r+g*n,t[2]=o*r+u*n,t[3]=l*r+d*n,t[4]=c*r-a*n,t[5]=g*r-s*n,t[6]=u*r-o*n,t[7]=d*r-l*n,t}},2504:function(t){t.exports=function(t,e,i){var n=i[0],r=i[1],a=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},7656:function(t){t.exports=function(t,e,i){var n,r,a,s,o,l,c,g,u,d,h,B,p=i[0],F=i[1],f=i[2];e===t?(t[12]=e[0]*p+e[4]*F+e[8]*f+e[12],t[13]=e[1]*p+e[5]*F+e[9]*f+e[13],t[14]=e[2]*p+e[6]*F+e[10]*f+e[14],t[15]=e[3]*p+e[7]*F+e[11]*f+e[15]):(n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],c=e[6],g=e[7],u=e[8],d=e[9],h=e[10],B=e[11],t[0]=n,t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=l,t[6]=c,t[7]=g,t[8]=u,t[9]=d,t[10]=h,t[11]=B,t[12]=n*p+o*F+u*f+e[12],t[13]=r*p+l*F+d*f+e[13],t[14]=a*p+c*F+h*f+e[14],t[15]=s*p+g*F+B*f+e[15]);return t}},5665:function(t){t.exports=function(t,e){if(t===e){var i=e[1],n=e[2],r=e[3],a=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=r,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},7626:function(t,e,i){var n=i(2642),r=i(9346);function a(t,e){for(var i=[0,0,0,0],n=0;n<4;++n)for(var r=0;r<4;++r)i[r]+=t[4*n+r]*e[n];return i}function s(t,e,i,n,r){for(var s=a(n,a(i,a(e,[t[0],t[1],t[2],1]))),o=0;o<3;++o)s[o]/=s[3];return[.5*r[0]*(1+s[0]),.5*r[1]*(1-s[1])]}function o(t,e){for(var i=[0,0,0],n=0;n<t.length;++n)for(var r=t[n],a=e[n],s=0;s<3;++s)i[s]+=a*r[s];return i}t.exports=function(t,e,i,a,l,c){if(1===t.length)return[0,t[0].slice()];for(var g=new Array(t.length),u=0;u<t.length;++u)g[u]=s(t[u],i,a,l,c);var d=0,h=1/0;for(u=0;u<g.length;++u){for(var B=0,p=0;p<2;++p)B+=Math.pow(g[u][p]-e[p],2);B<h&&(h=B,d=u)}var F=function(t,e){if(2===t.length){for(var i=0,a=0,s=0;s<2;++s)i+=Math.pow(e[s]-t[0][s],2),a+=Math.pow(e[s]-t[1][s],2);return(i=Math.sqrt(i))+(a=Math.sqrt(a))<1e-6?[1,0]:[a/(i+a),i/(a+i)]}if(3===t.length){var o=[0,0];return r(t[0],t[1],t[2],e,o),n(t,o)}return[]}(g,e),f=0;for(u=0;u<3;++u){if(F[u]<-.001||F[u]>1.0001)return null;f+=F[u]}if(Math.abs(f-1)>.001)return null;return[d,o(t,F),F]}},840:function(t,e,i){var n=i(3236),r=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),c=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),g=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_id        = id;\n  f_position  = position;\n}"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * (view * (model * vec4(position, 1.0)));\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),h=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n}"]),B=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);e.meshShader={vertex:r,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.wireShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.pointShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},e.pickShader={vertex:g,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},e.pointPickShader={vertex:d,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},e.contourShader={vertex:h,fragment:B,attributes:[{name:"position",type:"vec3"}]}},7201:function(t,e,i){var n=i(9405),r=i(2762),a=i(8116),s=i(7766),o=i(8406),l=i(6760),c=i(7608),g=i(9618),u=i(6729),d=i(7765),h=i(1888),B=i(840),p=i(7626),F=B.meshShader,f=B.wireShader,Q=B.pointShader,I=B.pickShader,U=B.pointPickShader,b=B.contourShader,y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(t,e,i,n,r,a,s,o,l,c,g,u,d,h,B,p,F,f,Q,I,U,b,m,x,v,C,A){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=i,this.lineShader=n,this.pointShader=r,this.pickShader=a,this.pointPickShader=s,this.contourShader=o,this.trianglePositions=l,this.triangleColors=g,this.triangleNormals=d,this.triangleUVs=u,this.triangleIds=c,this.triangleVAO=h,this.triangleCount=0,this.lineWidth=1,this.edgePositions=B,this.edgeColors=F,this.edgeUVs=f,this.edgeIds=p,this.edgeVAO=Q,this.edgeCount=0,this.pointPositions=I,this.pointColors=b,this.pointUVs=m,this.pointSizes=x,this.pointIds=U,this.pointVAO=v,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=C,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=y,this._view=y,this._projection=y,this._resolution=[1,1]}var x=m.prototype;function v(t,e){if(!e)return 1;if(!e.length)return 1;for(var i=0;i<e.length;++i){if(e.length<2)return 1;if(e[i][0]===t)return e[i][1];if(e[i][0]>t&&i>0){var n=(e[i][0]-t)/(e[i][0]-e[i-1][0]);return e[i][1]*(1-n)+n*e[i-1][1]}}return 1}function C(t){var e=n(t,Q.vertex,Q.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.pointSize.location=4,e}function A(t){var e=n(t,I.vertex,I.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e}function L(t){var e=n(t,U.vertex,U.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e.attributes.pointSize.location=4,e}function G(t){var e=n(t,b.vertex,b.fragment);return e.attributes.position.location=0,e}x.isOpaque=function(){return!this.hasAlpha},x.isTransparent=function(){return this.hasAlpha},x.pickSlots=1,x.setPickBase=function(t){this.pickId=t},x.highlight=function(t){if(t&&this.contourEnable){for(var e=d(this.cells,this.intensity,t.intensity),i=e.cells,n=e.vertexIds,r=e.vertexWeights,a=i.length,s=h.mallocFloat32(6*a),o=0,l=0;l<a;++l)for(var c=i[l],g=0;g<2;++g){var u=c[0];2===c.length&&(u=c[g]);for(var B=n[u][0],p=n[u][1],F=r[u],f=1-F,Q=this.positions[B],I=this.positions[p],U=0;U<3;++U)s[o++]=F*Q[U]+f*I[U]}this.contourCount=o/3|0,this.contourPositions.update(s.subarray(0,o)),h.free(s)}else this.contourCount=0},x.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=s(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t,e){for(var i=u({colormap:t,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var a=i[r],s=0;s<3;++s)n[4*r+s]=a[s];n[4*r+3]=e?255*v(r/255,e):255*a[3]}return g(n,[256,256,4],[4,0,1])}(t.colormap,this.opacityscale)),this.texture.generateMipmap());var i=t.cells,n=t.positions;if(n&&i){var r=[],a=[],l=[],c=[],d=[],h=[],B=[],p=[],F=[],f=[],Q=[],I=[],U=[],b=[];this.cells=i,this.positions=n;var y=t.vertexNormals,m=t.cellNormals,x=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,C=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!m&&(m=o.faceNormals(i,n,C)),m||y||(y=o.vertexNormals(i,n,x));var A=t.vertexColors,L=t.cellColors,G=t.meshColor||[1,1,1,1],R=t.vertexUVs,S=t.vertexIntensity,w=t.cellUVs,V=t.cellIntensity,E=1/0,Z=-1/0;if(!R&&!w)if(S)if(t.vertexIntensityBounds)E=+t.vertexIntensityBounds[0],Z=+t.vertexIntensityBounds[1];else for(var N=0;N<S.length;++N){var D=S[N];E=Math.min(E,D),Z=Math.max(Z,D)}else if(V)if(t.cellIntensityBounds)E=+t.cellIntensityBounds[0],Z=+t.cellIntensityBounds[1];else for(N=0;N<V.length;++N){D=V[N];E=Math.min(E,D),Z=Math.max(Z,D)}else for(N=0;N<n.length;++N){D=n[N][2];E=Math.min(E,D),Z=Math.max(Z,D)}this.intensity=S||(V||function(t){for(var e=t.length,i=new Array(e),n=0;n<e;++n)i[n]=t[n][2];return i}(n)),this.pickVertex=!(V||L);var X=t.pointSizes,H=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(N=0;N<n.length;++N)for(var W=n[N],k=0;k<3;++k)!isNaN(W[k])&&isFinite(W[k])&&(this.bounds[0][k]=Math.min(this.bounds[0][k],W[k]),this.bounds[1][k]=Math.max(this.bounds[1][k],W[k]));var M=0,T=0,Y=0;t:for(N=0;N<i.length;++N){var J=i[N];switch(J.length){case 1:for(W=n[z=J[0]],k=0;k<3;++k)if(isNaN(W[k])||!isFinite(W[k]))continue t;f.push(W[0],W[1],W[2]),O=A?A[z]:L?L[N]:G,this.opacityscale&&S?a.push(O[0],O[1],O[2],this.opacity*v((S[z]-E)/(Z-E),this.opacityscale)):3===O.length?Q.push(O[0],O[1],O[2],this.opacity):(Q.push(O[0],O[1],O[2],O[3]*this.opacity),O[3]<1&&(this.hasAlpha=!0)),K=R?R[z]:S?[(S[z]-E)/(Z-E),0]:w?w[N]:V?[(V[N]-E)/(Z-E),0]:[(W[2]-E)/(Z-E),0],I.push(K[0],K[1]),X?U.push(X[z]):U.push(H),b.push(N),Y+=1;break;case 2:for(k=0;k<2;++k){W=n[z=J[k]];for(var _=0;_<3;++_)if(isNaN(W[_])||!isFinite(W[_]))continue t}for(k=0;k<2;++k){W=n[z=J[k]];h.push(W[0],W[1],W[2]),O=A?A[z]:L?L[N]:G,this.opacityscale&&S?a.push(O[0],O[1],O[2],this.opacity*v((S[z]-E)/(Z-E),this.opacityscale)):3===O.length?B.push(O[0],O[1],O[2],this.opacity):(B.push(O[0],O[1],O[2],O[3]*this.opacity),O[3]<1&&(this.hasAlpha=!0)),K=R?R[z]:S?[(S[z]-E)/(Z-E),0]:w?w[N]:V?[(V[N]-E)/(Z-E),0]:[(W[2]-E)/(Z-E),0],p.push(K[0],K[1]),F.push(N)}T+=1;break;case 3:for(k=0;k<3;++k)for(W=n[z=J[k]],_=0;_<3;++_)if(isNaN(W[_])||!isFinite(W[_]))continue t;for(k=0;k<3;++k){var z,O,K,P;W=n[z=J[2-k]];r.push(W[0],W[1],W[2]),(O=A?A[z]:L?L[N]:G)?this.opacityscale&&S?a.push(O[0],O[1],O[2],this.opacity*v((S[z]-E)/(Z-E),this.opacityscale)):3===O.length?a.push(O[0],O[1],O[2],this.opacity):(a.push(O[0],O[1],O[2],O[3]*this.opacity),O[3]<1&&(this.hasAlpha=!0)):a.push(.5,.5,.5,1),K=R?R[z]:S?[(S[z]-E)/(Z-E),0]:w?w[N]:V?[(V[N]-E)/(Z-E),0]:[(W[2]-E)/(Z-E),0],c.push(K[0],K[1]),P=y?y[z]:m[N],l.push(P[0],P[1],P[2]),d.push(N)}M+=1}}this.pointCount=Y,this.edgeCount=T,this.triangleCount=M,this.pointPositions.update(f),this.pointColors.update(Q),this.pointUVs.update(I),this.pointSizes.update(U),this.pointIds.update(new Uint32Array(b)),this.edgePositions.update(h),this.edgeColors.update(B),this.edgeUVs.update(p),this.edgeIds.update(new Uint32Array(F)),this.trianglePositions.update(r),this.triangleColors.update(a),this.triangleUVs.update(c),this.triangleNormals.update(l),this.triangleIds.update(new Uint32Array(d))}},x.drawTransparent=x.draw=function(t){t=t||{};for(var e=this.gl,i=t.model||y,n=t.view||y,r=t.projection||y,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],s=0;s<3;++s)a[0][s]=Math.max(a[0][s],this.clipBounds[0][s]),a[1][s]=Math.min(a[1][s],this.clipBounds[1][s]);var o={model:i,view:n,projection:r,inverseModel:y.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};o.inverseModel=c(o.inverseModel,o.model),e.disable(e.CULL_FACE),this.texture.bind(0);var g=new Array(16);l(g,o.view,o.model),l(g,o.projection,g),c(g,g);for(s=0;s<3;++s)o.eyePosition[s]=g[12+s]/g[15];var u,d=g[15];for(s=0;s<3;++s)d+=this.lightPosition[s]*g[4*s+3];for(s=0;s<3;++s){for(var h=g[12+s],B=0;B<3;++B)h+=g[4*B+s]*this.lightPosition[B];o.lightPosition[s]=h/d}this.triangleCount>0&&((u=this.triShader).bind(),u.uniforms=o,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());this.edgeCount>0&&this.lineWidth>0&&((u=this.lineShader).bind(),u.uniforms=o,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());this.pointCount>0&&((u=this.pointShader).bind(),u.uniforms=o,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((u=this.contourShader).bind(),u.uniforms=o,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind())},x.drawPick=function(t){t=t||{};for(var e=this.gl,i=t.model||y,n=t.view||y,r=t.projection||y,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],s=0;s<3;++s)a[0][s]=Math.max(a[0][s],this.clipBounds[0][s]),a[1][s]=Math.min(a[1][s],this.clipBounds[1][s]);this._model=[].slice.call(i),this._view=[].slice.call(n),this._projection=[].slice.call(r),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var o,l={model:i,view:n,projection:r,clipBounds:a,pickId:this.pickId/255};((o=this.pickShader).bind(),o.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0)&&((o=this.pointPickShader).bind(),o.uniforms=l,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind())},x.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],i=this.cells[e],n=this.positions,r=new Array(i.length),a=0;a<i.length;++a)r[a]=n[i[a]];var s=t.coord[0],o=t.coord[1];if(!this.pickVertex){var l=this.positions[i[0]],c=this.positions[i[1]],g=this.positions[i[2]],u=[(l[0]+c[0]+g[0])/3,(l[1]+c[1]+g[1])/3,(l[2]+c[2]+g[2])/3];return{_cellCenter:!0,position:[s,o],index:e,cell:i,cellId:e,intensity:this.intensity[e],dataCoordinate:u}}var d=p(r,[s*this.pixelRatio,this._resolution[1]-o*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!d)return null;var h=d[2],B=0;for(a=0;a<i.length;++a)B+=h[a]*this.intensity[i[a]];return{position:d[1],index:i[d[0]],cell:i,cellId:e,intensity:B,dataCoordinate:this.positions[i[d[0]]]}},x.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=function(t,e){if(1===arguments.length&&(t=(e=t).gl),!(t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var i=function(t){var e=n(t,F.vertex,F.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.normal.location=4,e}(t),o=function(t){var e=n(t,f.vertex,f.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e}(t),l=C(t),c=A(t),u=L(t),d=G(t),h=s(t,g(new Uint8Array([255,255,255,255]),[1,1,4]));h.generateMipmap(),h.minFilter=t.LINEAR_MIPMAP_LINEAR,h.magFilter=t.LINEAR;var B=r(t),p=r(t),Q=r(t),I=r(t),U=r(t),b=a(t,[{buffer:B,type:t.FLOAT,size:3},{buffer:U,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:p,type:t.FLOAT,size:4},{buffer:Q,type:t.FLOAT,size:2},{buffer:I,type:t.FLOAT,size:3}]),y=r(t),x=r(t),v=r(t),R=r(t),S=a(t,[{buffer:y,type:t.FLOAT,size:3},{buffer:R,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:t.FLOAT,size:4},{buffer:v,type:t.FLOAT,size:2}]),w=r(t),V=r(t),E=r(t),Z=r(t),N=r(t),D=a(t,[{buffer:w,type:t.FLOAT,size:3},{buffer:N,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:V,type:t.FLOAT,size:4},{buffer:E,type:t.FLOAT,size:2},{buffer:Z,type:t.FLOAT,size:1}]),X=r(t),H=new m(t,h,i,o,l,c,u,d,B,U,p,Q,I,b,y,R,x,v,S,w,N,V,E,Z,D,X,a(t,[{buffer:X,type:t.FLOAT,size:3}]));return H.update(e),H}},4437:function(t,e,i){t.exports=function(t,e){t=t||document.body,e=e||{};var i=[.01,1/0];"distanceLimits"in e&&(i[0]=e.distanceLimits[0],i[1]=e.distanceLimits[1]);"zoomMin"in e&&(i[0]=e.zoomMin);"zoomMax"in e&&(i[1]=e.zoomMax);var c=r({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:i}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0,d=t.clientWidth,h=t.clientHeight,B={keyBindingMode:"rotate",enableWheel:!0,view:c,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:c.modes,_ortho:e._ortho||e.projection&&"orthographic"===e.projection.type||!1,tick:function(){var e=n(),i=this.delay,r=e-2*i;c.idle(e-i),c.recalcMatrix(r),c.flush(e-(100+2*i));for(var a=!0,s=c.computedMatrix,o=0;o<16;++o)a=a&&g[o]===s[o],g[o]=s[o];var l=t.clientWidth===d&&t.clientHeight===h;return d=t.clientWidth,h=t.clientHeight,a?!l:(u=Math.exp(c.computedRadius[0]),!0)},lookAt:function(t,e,i){c.lookAt(c.lastT(),t,e,i)},rotate:function(t,e,i){c.rotate(c.lastT(),t,e,i)},pan:function(t,e,i){c.pan(c.lastT(),t,e,i)},translate:function(t,e,i){c.translate(c.lastT(),t,e,i)}};return Object.defineProperties(B,{matrix:{get:function(){return c.computedMatrix},set:function(t){return c.setMatrix(c.lastT(),t),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(t){var e=c.computedUp.slice(),i=c.computedEye.slice(),r=c.computedCenter.slice();if(c.setMode(t),"turntable"===t){var a=n();c._active.lookAt(a,i,r,e),c._active.lookAt(a+500,i,r,[0,0,1]),c._active.flush(a)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(t){return c.lookAt(c.lastT(),null,t),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(t){return c.lookAt(c.lastT(),t),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(t){return c.lookAt(c.lastT(),null,null,t),c.computedUp},enumerable:!0},distance:{get:function(){return u},set:function(t){return c.setDistance(c.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(i)},set:function(t){return c.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),B._lastX=-1,B._lastY=-1,B._lastMods={shift:!1,control:!1,alt:!1,meta:!1},B.enableMouseListeners=function(){function e(e,i,r,a){var s=B.keyBindingMode;if(!1!==s){var o="rotate"===s,l="pan"===s,g="zoom"===s,d=!!a.control,h=!!a.alt,p=!!a.shift,F=!!(1&e),f=!!(2&e),Q=!!(4&e),I=1/t.clientHeight,U=I*(i-B._lastX),b=I*(r-B._lastY),y=B.flipX?1:-1,m=B.flipY?1:-1,x=Math.PI*B.rotateSpeed,v=n();if(-1!==B._lastX&&-1!==B._lastY&&((o&&F&&!d&&!h&&!p||F&&!d&&!h&&p)&&c.rotate(v,y*x*U,-m*x*b,0),(l&&F&&!d&&!h&&!p||f||F&&d&&!h&&!p)&&c.pan(v,-B.translateSpeed*U*u,B.translateSpeed*b*u,0),g&&F&&!d&&!h&&!p||Q||F&&!d&&h&&!p)){var C=-B.zoomSpeed*b/window.innerHeight*(v-c.lastT())*100;c.pan(v,0,0,u*(Math.exp(C)-1))}return B._lastX=i,B._lastY=r,B._lastMods=a,!0}}B.mouseListener=a(t,e),t.addEventListener("touchstart",(function(i){var n=o(i.changedTouches[0],t);e(0,n[0],n[1],B._lastMods),e(1,n[0],n[1],B._lastMods)}),!!l&&{passive:!0}),t.addEventListener("touchmove",(function(i){var n=o(i.changedTouches[0],t);e(1,n[0],n[1],B._lastMods),i.preventDefault()}),!!l&&{passive:!1}),t.addEventListener("touchend",(function(t){e(0,B._lastX,B._lastY,B._lastMods)}),!!l&&{passive:!0}),B.wheelListener=s(t,(function(t,e){if(!1!==B.keyBindingMode&&B.enableWheel){var i=B.flipX?1:-1,r=B.flipY?1:-1,a=n();if(Math.abs(t)>Math.abs(e))c.rotate(a,0,0,-t*i*Math.PI*B.rotateSpeed/window.innerWidth);else if(!B._ortho){var s=-B.zoomSpeed*r*e/window.innerHeight*(a-c.lastT())/20;c.pan(a,0,0,u*(Math.exp(s)-1))}}}),!0)},B.enableMouseListeners(),B};var n=i(3025),r=i(6296),a=i(351),s=i(8512),o=i(24),l=i(7520)},799:function(t,e,i){var n=i(3236),r=i(9405),a=n(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),s=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);t.exports=function(t){return r(t,a,s,null,[{name:"position",type:"vec2"}])}},4100:function(t,e,i){var n=i(4437),r=i(3837),a=i(5445),s=i(4449),o=i(3589),l=i(2260),c=i(7169),g=i(351),u=i(4772),d=i(4040),h=i(799),B=i(9216)({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function F(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));if(e<0){var i=Math.round(Math.pow(10,-e));return Math.ceil(t*i)/i}if(e>0){i=Math.round(Math.pow(10,e));return Math.ceil(t/i)*i}return Math.ceil(t)}function f(t){return"boolean"!=typeof t||t}t.exports={createScene:function(t){(t=t||{}).camera=t.camera||{};var e=t.canvas;if(!e){if(e=document.createElement("canvas"),t.container)t.container.appendChild(e);else document.body.appendChild(e)}var i=t.gl;i||(t.glOptions&&(B=!!t.glOptions.preserveDrawingBuffer),i=function(t,e){var i=null;try{(i=t.getContext("webgl",e))||(i=t.getContext("experimental-webgl",e))}catch(t){return null}return i}(e,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:B}));if(!i)throw new Error("webgl not supported");var Q=t.bounds||[[-10,-10,-10],[10,10,10]],I=new p,U=l(i,i.drawingBufferWidth,i.drawingBufferHeight,{preferFloat:!B}),b=h(i),y=t.cameraObject&&!0===t.cameraObject._ortho||t.camera.projection&&"orthographic"===t.camera.projection.type||!1,m={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:y},x=t.axes||{},v=r(i,x);v.enable=!x.disable;var C=t.spikes||{},A=s(i,C),L=[],G=[],R=[],S=[],w=!0,V=!0,E=new Array(16),Z=new Array(16),N={view:null,projection:E,model:Z,_ortho:!1},D=(V=!0,[i.drawingBufferWidth,i.drawingBufferHeight]),X=t.cameraObject||n(e,m),H={gl:i,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:e,selection:I,camera:X,axes:v,axesPixels:null,spikes:A,bounds:Q,objects:L,shape:D,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:f(t.autoResize),autoBounds:f(t.autoBounds),autoScale:!!t.autoScale,autoCenter:f(t.autoCenter),clipToBounds:f(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:N,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(t){this.aspect[0]=t.x,this.aspect[1]=t.y,this.aspect[2]=t.z,V=!0},setBounds:function(t,e){this.bounds[0][t]=e.min,this.bounds[1][t]=e.max},setClearColor:function(t){this.clearColor=t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},W=[i.drawingBufferWidth/H.pixelRatio|0,i.drawingBufferHeight/H.pixelRatio|0];function k(){if(!H._stopped&&H.autoResize){var t=e.parentNode,i=1,n=1;t&&t!==document.body?(i=t.clientWidth,n=t.clientHeight):(i=window.innerWidth,n=window.innerHeight);var r=0|Math.ceil(i*H.pixelRatio),a=0|Math.ceil(n*H.pixelRatio);if(r!==e.width||a!==e.height){e.width=r,e.height=a;var s=e.style;s.position=s.position||"absolute",s.left="0px",s.top="0px",s.width=i+"px",s.height=n+"px",w=!0}}}H.autoResize&&k();function M(){for(var t=L.length,e=S.length,n=0;n<e;++n)R[n]=0;t:for(n=0;n<t;++n){var r=L[n],a=r.pickSlots;if(a){for(var s=0;s<e;++s)if(R[s]+a<255){G[n]=s,r.setPickBase(R[s]+1),R[s]+=a;continue t}var l=o(i,D);G[n]=e,S.push(l),R.push(a),r.setPickBase(1),e+=1}else G[n]=-1}for(;e>0&&0===R[e-1];)R.pop(),S.pop().dispose()}function T(){if(H.contextLost)return!0;i.isContextLost()&&(H.contextLost=!0,H.mouseListener.enabled=!1,H.selection.object=null,H.oncontextloss&&H.oncontextloss())}window.addEventListener("resize",k),H.update=function(t){H._stopped||(w=!0,V=!0)},H.add=function(t){H._stopped||(t.axes=v,L.push(t),G.push(-1),w=!0,V=!0,M())},H.remove=function(t){if(!H._stopped){var e=L.indexOf(t);e<0||(L.splice(e,1),G.pop(),w=!0,V=!0,M())}},H.dispose=function(){if(!H._stopped&&(H._stopped=!0,window.removeEventListener("resize",k),e.removeEventListener("webglcontextlost",T),H.mouseListener.enabled=!1,!H.contextLost)){v.dispose(),A.dispose();for(var t=0;t<L.length;++t)L[t].dispose();U.dispose();for(t=0;t<S.length;++t)S[t].dispose();b.dispose(),i=null,v=null,A=null,L=[]}},H._mouseRotating=!1,H._prevButtons=0,H.enableMouseListeners=function(){H.mouseListener=g(e,(function(t,e,i){if(!H._stopped){var n=S.length,r=L.length,a=I.object;I.distance=1/0,I.mouse[0]=e,I.mouse[1]=i,I.object=null,I.screen=null,I.dataCoordinate=I.dataPosition=null;var s=!1;if(t&&H._prevButtons)H._mouseRotating=!0;else{H._mouseRotating&&(V=!0),H._mouseRotating=!1;for(var o=0;o<n;++o){var l=S[o].query(e,W[1]-i-1,H.pickRadius);if(l){if(l.distance>I.distance)continue;for(var c=0;c<r;++c){var g=L[c];if(G[c]===o){var u=g.pick(l);u&&(I.buttons=t,I.screen=l.coord,I.distance=l.distance,I.object=g,I.index=u.distance,I.dataPosition=u.position,I.dataCoordinate=u.dataCoordinate,I.data=u,s=!0)}}}}}a&&a!==I.object&&(a.highlight&&a.highlight(null),w=!0),I.object&&(I.object.highlight&&I.object.highlight(I.data),w=!0),(s=s||I.object!==a)&&H.onselect&&H.onselect(I),1&t&&!(1&H._prevButtons)&&H.onclick&&H.onclick(I),H._prevButtons=t}}))},e.addEventListener("webglcontextlost",T);var Y=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],J=[Y[0].slice(),Y[1].slice()];function _(){if(!T()){k();var t=H.camera.tick();N.view=H.camera.matrix,w=w||t,V=V||t,v.pixelRatio=H.pixelRatio,A.pixelRatio=H.pixelRatio;var e=L.length,n=Y[0],r=Y[1];n[0]=n[1]=n[2]=1/0,r[0]=r[1]=r[2]=-1/0;for(var s=0;s<e;++s){(R=L[s]).pixelRatio=H.pixelRatio,R.axes=H.axes,w=w||!!R.dirty,V=V||!!R.dirty;var o=R.bounds;if(o)for(var l=o[0],g=o[1],h=0;h<3;++h)n[h]=Math.min(n[h],l[h]),r[h]=Math.max(r[h],g[h])}var B=H.bounds;if(H.autoBounds)for(h=0;h<3;++h){if(r[h]<n[h])n[h]=-1,r[h]=1;else{n[h]===r[h]&&(n[h]-=1,r[h]+=1);var p=.05*(r[h]-n[h]);n[h]=n[h]-p,r[h]=r[h]+p}B[0][h]=n[h],B[1][h]=r[h]}var f=!1;for(h=0;h<3;++h)f=f||J[0][h]!==B[0][h]||J[1][h]!==B[1][h],J[0][h]=B[0][h],J[1][h]=B[1][h];if(V=V||f,w=w||f){if(f){var Q=[0,0,0];for(s=0;s<3;++s)Q[s]=F((B[1][s]-B[0][s])/10);v.autoTicks?v.update({bounds:B,tickSpacing:Q}):v.update({bounds:B})}var m=i.drawingBufferWidth,x=i.drawingBufferHeight;D[0]=m,D[1]=x,W[0]=0|Math.max(m/H.pixelRatio,1),W[1]=0|Math.max(x/H.pixelRatio,1),function(t,e){var i=t.bounds,n=t.cameraParams,r=n.projection,a=n.model,s=t.gl.drawingBufferWidth,o=t.gl.drawingBufferHeight,l=t.zNear,c=t.zFar,g=t.fovy,h=s/o;e?(d(r,-h,h,-1,1,l,c),n._ortho=!0):(u(r,g,h,l,c),n._ortho=!1);for(var B=0;B<16;++B)a[B]=0;a[15]=1;var p=0;for(B=0;B<3;++B)p=Math.max(p,i[1][B]-i[0][B]);for(B=0;B<3;++B)t.autoScale?a[5*B]=t.aspect[B]/(i[1][B]-i[0][B]):a[5*B]=1/p,t.autoCenter&&(a[12+B]=.5*-a[5*B]*(i[0][B]+i[1][B]))}(H,y);for(s=0;s<e;++s){(R=L[s]).axesBounds=B,H.clipToBounds&&(R.clipBounds=B)}I.object&&(H.snapToData?A.position=I.dataCoordinate:A.position=I.dataPosition,A.bounds=B),V&&(V=!1,function(){if(!T()){i.colorMask(!0,!0,!0,!0),i.depthMask(!0),i.disable(i.BLEND),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL);for(var t=L.length,e=S.length,n=0;n<e;++n){var r=S[n];r.shape=W,r.begin();for(var a=0;a<t;++a)if(G[a]===n){var s=L[a];s.drawPick&&(s.pixelRatio=1,s.drawPick(N))}r.end()}}}()),H.axesPixels=a(H.axes,N,m,x),H.onrender&&H.onrender(),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,m,x),H.clearRGBA(),i.depthMask(!0),i.colorMask(!0,!0,!0,!0),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL),i.disable(i.BLEND),i.disable(i.CULL_FACE);var C=!1;v.enable&&(C=C||v.isTransparent(),v.draw(N)),A.axes=v,I.object&&A.draw(N),i.disable(i.CULL_FACE);for(s=0;s<e;++s){(R=L[s]).axes=v,R.pixelRatio=H.pixelRatio,R.isOpaque&&R.isOpaque()&&R.draw(N),R.isTransparent&&R.isTransparent()&&(C=!0)}if(C){U.shape=D,U.bind(),i.clear(i.DEPTH_BUFFER_BIT),i.colorMask(!1,!1,!1,!1),i.depthMask(!0),i.depthFunc(i.LESS),v.enable&&v.isTransparent()&&v.drawTransparent(N);for(s=0;s<e;++s){(R=L[s]).isOpaque&&R.isOpaque()&&R.draw(N)}i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.colorMask(!0,!0,!0,!0),i.depthMask(!1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),v.isTransparent()&&v.drawTransparent(N);for(s=0;s<e;++s){var R;(R=L[s]).isTransparent&&R.isTransparent()&&R.drawTransparent(N)}i.bindFramebuffer(i.FRAMEBUFFER,null),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.disable(i.DEPTH_TEST),b.bind(),U.color[0].bind(0),b.uniforms.accumBuffer=0,c(i),i.disable(i.BLEND)}w=!1;for(s=0;s<e;++s)L[s].dirty=!1}}}function z(){H._stopped||H.contextLost||(_(),requestAnimationFrame(z))}return H.enableMouseListeners(),z(),H.redraw=function(){H._stopped||(w=!0,_())},H},createCamera:n}},783:function(t){t.exports=function(t,e,i,n){var r,a,s,o,l,c=e[0],g=e[1],u=e[2],d=e[3],h=i[0],B=i[1],p=i[2],F=i[3];(a=c*h+g*B+u*p+d*F)<0&&(a=-a,h=-h,B=-B,p=-p,F=-F);1-a>1e-6?(r=Math.acos(a),s=Math.sin(r),o=Math.sin((1-n)*r)/s,l=Math.sin(n*r)/s):(o=1-n,l=n);return t[0]=o*c+l*h,t[1]=o*g+l*B,t[2]=o*u+l*p,t[3]=o*d+l*F,t}},5964:function(t){t.exports=function(t){return t||0===t?t.toString():""}},9366:function(t,e,i){var n=i(4359);t.exports=function(t,e,i){var a=[e.style,e.weight,e.variant,e.family].join("_"),s=r[a];s||(s=r[a]={});if(t in s)return s[t];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e.family,fontStyle:e.style,fontWeight:e.weight,fontVariant:e.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},l=n(t,o);o.triangles=!1;var c,g,u=n(t,o);if(i&&1!==i){for(c=0;c<l.positions.length;++c)for(g=0;g<l.positions[c].length;++g)l.positions[c][g]/=i;for(c=0;c<u.positions.length;++c)for(g=0;g<u.positions[c].length;++g)u.positions[c][g]/=i}var d=[[1/0,1/0],[-1/0,-1/0]],h=u.positions.length;for(c=0;c<h;++c){var B=u.positions[c];for(g=0;g<2;++g)d[0][g]=Math.min(d[0][g],B[g]),d[1][g]=Math.max(d[1][g],B[g])}return s[t]=[l,u,d]};var r={}},1283:function(t,e,i){var n=i(9405),r=i(3236),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),g=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],u={vertex:a,fragment:l,attributes:g},d={vertex:s,fragment:l,attributes:g},h={vertex:o,fragment:l,attributes:g},B={vertex:a,fragment:c,attributes:g},p={vertex:s,fragment:c,attributes:g},F={vertex:o,fragment:c,attributes:g};function f(t,e){var i=n(t,e),r=i.attributes;return r.position.location=0,r.color.location=1,r.glyph.location=2,r.id.location=3,i}e.createPerspective=function(t){return f(t,u)},e.createOrtho=function(t){return f(t,d)},e.createProject=function(t){return f(t,h)},e.createPickPerspective=function(t){return f(t,B)},e.createPickOrtho=function(t){return f(t,p)},e.createPickProject=function(t){return f(t,F)}},8418:function(t,e,i){var n=i(5219),r=i(2762),a=i(8116),s=i(1888),o=i(6760),l=i(1283),c=i(9366),g=i(5964),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=ArrayBuffer,h=DataView;function B(t){return Array.isArray(t)||function(t){return d.isView(t)&&!(t instanceof h)}(t)}function p(t,e){var i=t[0],n=t[1],r=t[2],a=t[3];return t[0]=e[0]*i+e[4]*n+e[8]*r+e[12]*a,t[1]=e[1]*i+e[5]*n+e[9]*r+e[13]*a,t[2]=e[2]*i+e[6]*n+e[10]*r+e[14]*a,t[3]=e[3]*i+e[7]*n+e[11]*r+e[15]*a,t}function F(t,e,i,n){return p(n,n),p(n,n),p(n,n)}function f(t,e){this.index=t,this.dataCoordinate=this.position=e}function Q(t){return!0===t||t>1?1:t}function I(t,e,i,n,r,a,s,o,l,c,g,u){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=i,this.projectShader=n,this.pointBuffer=r,this.colorBuffer=a,this.glyphBuffer=s,this.idBuffer=o,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=c,this.pickOrthoShader=g,this.pickProjectShader=u,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=function(t){var e=t.gl,i=l.createPerspective(e),n=l.createOrtho(e),s=l.createProject(e),o=l.createPickPerspective(e),c=l.createPickOrtho(e),g=l.createPickProject(e),u=r(e),d=r(e),h=r(e),B=r(e),p=a(e,[{buffer:u,size:3,type:e.FLOAT},{buffer:d,size:4,type:e.FLOAT},{buffer:h,size:2,type:e.FLOAT},{buffer:B,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),F=new I(e,i,n,s,u,d,h,B,p,o,c,g);return F.update(t),F};var U=I.prototype;U.pickSlots=1,U.setPickBase=function(t){this.pickId=t},U.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},U.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],y=[0,0,0],m=[0,0,0],x=[0,0,0,1],v=[0,0,0,1],C=u.slice(),A=[0,0,0],L=[[0,0,0],[0,0,0]];function G(t){return t[0]=t[1]=t[2]=0,t}function R(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function S(t,e,i,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[i]=n,t}function w(t,e,i,n){var r,a=e.axesProject,s=e.gl,l=t.uniforms,c=i.model||u,g=i.view||u,d=i.projection||u,h=e.axesBounds,B=function(t){for(var e=L,i=0;i<2;++i)for(var n=0;n<3;++n)e[i][n]=Math.max(Math.min(t[i][n],1e8),-1e8);return e}(e.clipBounds);r=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],b[0]=2/s.drawingBufferWidth,b[1]=2/s.drawingBufferHeight,t.bind(),l.view=g,l.projection=d,l.screenSize=b,l.highlightId=e.highlightId,l.highlightScale=e.highlightScale,l.clipBounds=B,l.pickGroup=e.pickId/255,l.pixelRatio=n;for(var p=0;p<3;++p)if(a[p]){l.scale=e.projectScale[p],l.opacity=e.projectOpacity[p];for(var f=C,Q=0;Q<16;++Q)f[Q]=0;for(Q=0;Q<4;++Q)f[5*Q]=1;f[5*p]=0,r[p]<0?f[12+p]=h[0][p]:f[12+p]=h[1][p],o(f,c,f),l.model=f;var I=(p+1)%3,U=(p+2)%3,w=G(y),V=G(m);w[I]=1,V[U]=1;var E=F(0,0,0,R(x,w)),Z=F(0,0,0,R(v,V));if(Math.abs(E[1])>Math.abs(Z[1])){var N=E;E=Z,Z=N,N=w,w=V,V=N;var D=I;I=U,U=D}E[0]<0&&(w[I]=-1),Z[1]>0&&(V[U]=-1);var X=0,H=0;for(Q=0;Q<4;++Q)X+=Math.pow(c[4*I+Q],2),H+=Math.pow(c[4*U+Q],2);w[I]/=Math.sqrt(X),V[U]/=Math.sqrt(H),l.axes[0]=w,l.axes[1]=V,l.fragClipBounds[0]=S(A,B[0],p,-1e8),l.fragClipBounds[1]=S(A,B[1],p,1e8),e.vao.bind(),e.vao.draw(s.TRIANGLES,e.vertexCount),e.lineWidth>0&&(s.lineWidth(e.lineWidth*n),e.vao.draw(s.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}var V=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function E(t,e,i,n,r,a,s){var o=i.gl;if((a===i.projectHasAlpha||s)&&w(e,i,n,r),a===i.hasAlpha||s){t.bind();var l=t.uniforms;l.model=n.model||u,l.view=n.view||u,l.projection=n.projection||u,b[0]=2/o.drawingBufferWidth,b[1]=2/o.drawingBufferHeight,l.screenSize=b,l.highlightId=i.highlightId,l.highlightScale=i.highlightScale,l.fragClipBounds=V,l.clipBounds=i.axes.bounds,l.opacity=i.opacity,l.pickGroup=i.pickId/255,l.pixelRatio=r,i.vao.bind(),i.vao.draw(o.TRIANGLES,i.vertexCount),i.lineWidth>0&&(o.lineWidth(i.lineWidth*r),i.vao.draw(o.LINES,i.lineVertexCount,i.vertexCount)),i.vao.unbind()}}function Z(t,e,i,r){var a;a=B(t)?e<t.length?t[e]:void 0:t,a=g(a);var s=!0;n(a)&&(a="▼",s=!1),i||(i={});var o=i.family;B(o)&&(o=o[e]),o||(o="normal");var l=i.weight;B(l)&&(l=l[e]),l||(l="normal");var u=i.style;B(u)&&(u=u[e]),u||(u="normal");var d=i.variant;B(d)&&(d=d[e]),d||(d="normal");var h=c(a,{family:o,weight:l,style:u,variant:d},r);return{mesh:(h=c(a,i,r))[0],lines:h[1],bounds:h[2],visible:s}}U.draw=function(t){E(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},U.drawTransparent=function(t){E(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},U.drawPick=function(t){E(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},U.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var i=this.points[e],n=this._selectResult;n.index=e;for(var r=0;r<3;++r)n.position[r]=n.dataCoordinate[r]=i[r];return n},U.highlight=function(t){if(t){var e=t.index,i=255&e,n=e>>8&255,r=e>>16&255;this.highlightId=[i/255,n/255,r/255,0]}else this.highlightId=[1,1,1,1]},U.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t)if(B(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}if("projectScale"in t)if(B(t.projectScale))this.projectScale=t.projectScale.slice();else{var i=+t.projectScale;this.projectScale=[i,i,i]}if(this.projectHasAlpha=!1,"projectOpacity"in t){if(B(t.projectOpacity))this.projectOpacity=t.projectOpacity.slice();else{i=+t.projectOpacity;this.projectOpacity=[i,i,i]}for(var n=0;n<3;++n)this.projectOpacity[n]=Q(this.projectOpacity[n]),this.projectOpacity[n]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=Q(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var r,a,o=t.position,l={family:t.font||"normal",style:t.fontStyle||"normal",weight:t.fontWeight||"normal",variant:t.fontVariant||"normal"},c=t.alignment||[0,0];if(2===c.length)r=c[0],a=c[1];else{r=[],a=[];for(n=0;n<c.length;++n)r[n]=c[n][0],a[n]=c[n][1]}var g=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0],d=t.glyph,h=t.color,p=t.size,F=t.angle,f=t.lineColor,I=-1,U=0,b=0,y=0;if(o.length){y=o.length;t:for(n=0;n<y;++n){for(var m=o[n],x=0;x<3;++x)if(isNaN(m[x])||!isFinite(m[x]))continue t;var v=(W=Z(d,n,l,this.pixelRatio)).mesh,C=W.lines,A=W.bounds;U+=3*v.cells.length,b+=2*C.edges.length}}var L=U+b,G=s.mallocFloat(3*L),R=s.mallocFloat(4*L),S=s.mallocFloat(2*L),w=s.mallocUint32(L);if(L>0){var V=0,E=U,N=[0,0,0,1],D=[0,0,0,1],X=B(h)&&B(h[0]),H=B(f)&&B(f[0]);t:for(n=0;n<y;++n){I+=1;for(m=o[n],x=0;x<3;++x){if(isNaN(m[x])||!isFinite(m[x]))continue t;u[x]=Math.max(u[x],m[x]),g[x]=Math.min(g[x],m[x])}v=(W=Z(d,n,l,this.pixelRatio)).mesh,C=W.lines,A=W.bounds;var W,k=W.visible;if(k)if(B(h)){if(3===(M=X?n<h.length?h[n]:[0,0,0,0]:h).length){for(x=0;x<3;++x)N[x]=M[x];N[3]=1}else if(4===M.length){for(x=0;x<4;++x)N[x]=M[x];!this.hasAlpha&&M[3]<1&&(this.hasAlpha=!0)}}else N[0]=N[1]=N[2]=0,N[3]=1;else N=[1,1,1,0];if(k)if(B(f)){var M;if(3===(M=H?n<f.length?f[n]:[0,0,0,0]:f).length){for(x=0;x<3;++x)D[x]=M[x];D[x]=1}else if(4===M.length){for(x=0;x<4;++x)D[x]=M[x];!this.hasAlpha&&M[3]<1&&(this.hasAlpha=!0)}}else D[0]=D[1]=D[2]=0,D[3]=1;else D=[1,1,1,0];var T=.5;k?B(p)?T=n<p.length?+p[n]:12:p?T=+p:this.useOrtho&&(T=12):T=0;var Y=0;B(F)?Y=n<F.length?+F[n]:0:F&&(Y=+F);var J=Math.cos(Y),_=Math.sin(Y);for(m=o[n],x=0;x<3;++x)u[x]=Math.max(u[x],m[x]),g[x]=Math.min(g[x],m[x]);var z=r,O=a;z=0;B(r)?z=n<r.length?r[n]:0:r&&(z=r);O=0;B(a)?O=n<a.length?a[n]:0:a&&(O=a);var K=[z*=z>0?1-A[0][0]:z<0?1+A[1][0]:1,O*=O>0?1-A[0][1]:O<0?1+A[1][1]:1],P=v.cells||[],j=v.positions||[];for(x=0;x<P.length;++x)for(var q=P[x],$=0;$<3;++$){for(var tt=0;tt<3;++tt)G[3*V+tt]=m[tt];for(tt=0;tt<4;++tt)R[4*V+tt]=N[tt];w[V]=I;var et=j[q[$]];S[2*V]=T*(J*et[0]-_*et[1]+K[0]),S[2*V+1]=T*(_*et[0]+J*et[1]+K[1]),V+=1}for(P=C.edges,j=C.positions,x=0;x<P.length;++x)for(q=P[x],$=0;$<2;++$){for(tt=0;tt<3;++tt)G[3*E+tt]=m[tt];for(tt=0;tt<4;++tt)R[4*E+tt]=D[tt];w[E]=I;et=j[q[$]];S[2*E]=T*(J*et[0]-_*et[1]+K[0]),S[2*E+1]=T*(_*et[0]+J*et[1]+K[1]),E+=1}}}this.bounds=[g,u],this.points=o,this.pointCount=o.length,this.vertexCount=U,this.lineVertexCount=b,this.pointBuffer.update(G),this.colorBuffer.update(R),this.glyphBuffer.update(S),this.idBuffer.update(w),s.free(G),s.free(R),s.free(S),s.free(w)},U.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},3589:function(t,e,i){t.exports=function(t,e){var i=e[0],a=e[1],s=n(t,i,a,{}),o=r.mallocUint8(i*a*4);return new l(t,s,o)};var n=i(2260),r=i(1888),a=i(9618),s=i(8828).nextPow2;function o(t,e,i,n,r){this.coord=[t,e],this.id=i,this.value=n,this.distance=r}function l(t,e,i){this.gl=t,this.fbo=e,this.buffer=i,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var c=l.prototype;Object.defineProperty(c,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],i=this.fbo.shape[1];if(i*e*4>this.buffer.length){r.free(this.buffer);for(var n=this.buffer=r.mallocUint8(s(i*e*4)),a=0;a<i*e*4;++a)n[a]=255}return t}}}),c.begin=function(){var t=this.gl;this.shape,t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},c.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},c.query=function(t,e,i){if(!this.gl)return null;var n=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof i&&(i=1);var r=0|Math.min(Math.max(t-i,0),n[0]),s=0|Math.min(Math.max(t+i,0),n[0]),l=0|Math.min(Math.max(e-i,0),n[1]),c=0|Math.min(Math.max(e+i,0),n[1]);if(s<=r||c<=l)return null;var g=[s-r,c-l],u=a(this.buffer,[g[0],g[1],4],[4,4*n[0],1],4*(r+n[0]*l)),d=function(t,e,i){for(var n=1e8,r=-1,a=-1,s=t.shape[0],o=t.shape[1],l=0;l<s;l++)for(var c=0;c<o;c++){var g=t.get(l,c,0),u=t.get(l,c,1),d=t.get(l,c,2),h=t.get(l,c,3);if(g<255||u<255||d<255||h<255){var B=e-l,p=i-c,F=B*B+p*p;F<n&&(n=F,r=l,a=c)}}return[r,a,n]}(u.hi(g[0],g[1],1),i,i),h=d[0],B=d[1];return h<0||Math.pow(this.radius,2)<d[2]?null:new o(h+r|0,B+l|0,u.get(h,B,0),[u.get(h,B,1),u.get(h,B,2),u.get(h,B,3)],Math.sqrt(d[2]))},c.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(t,e,i){var n=i(3327),r=i(8731),a=i(216),s=i(5091),o=i(2145),l=i(8866);function c(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var g=c.prototype;function u(t,e){return t.name<e.name?-1:1}g.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),i=this.gl.lastAttribCount;if(e>i)for(t=i;t<e;t++)this.gl.enableVertexAttribArray(t);else if(i>e)for(t=e;t<i;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},g.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},g.update=function(t,e,i,c){if(!e||1===arguments.length){var g=t;t=g.vertex,e=g.fragment,i=g.uniforms,c=g.attributes}var d=this,h=d.gl,B=d._vref;d._vref=s.shader(h,h.VERTEX_SHADER,t),B&&B.dispose(),d.vertShader=d._vref.shader;var p=this._fref;if(d._fref=s.shader(h,h.FRAGMENT_SHADER,e),p&&p.dispose(),d.fragShader=d._fref.shader,!i||!c){var F=h.createProgram();if(h.attachShader(F,d.fragShader),h.attachShader(F,d.vertShader),h.linkProgram(F),!h.getProgramParameter(F,h.LINK_STATUS)){var f=h.getProgramInfoLog(F);throw new l(f,"Error linking program:"+f)}i=i||o.uniforms(h,F),c=c||o.attributes(h,F),h.deleteProgram(F)}(c=c.slice()).sort(u);var Q,I=[],U=[],b=[];for(Q=0;Q<c.length;++Q){var y=c[Q];if(y.type.indexOf("mat")>=0){for(var m=0|y.type.charAt(y.type.length-1),x=new Array(m),v=0;v<m;++v)x[v]=b.length,U.push(y.name+"["+v+"]"),"number"==typeof y.location?b.push(y.location+v):Array.isArray(y.location)&&y.location.length===m&&"number"==typeof y.location[v]?b.push(0|y.location[v]):b.push(-1);I.push({name:y.name,type:y.type,locations:x})}else I.push({name:y.name,type:y.type,locations:[b.length]}),U.push(y.name),"number"==typeof y.location?b.push(0|y.location):b.push(-1)}var C=0;for(Q=0;Q<b.length;++Q)if(b[Q]<0){for(;b.indexOf(C)>=0;)C+=1;b[Q]=C}var A=new Array(i.length);function L(){d.program=s.program(h,d._vref,d._fref,U,b);for(var t=0;t<i.length;++t)A[t]=h.getUniformLocation(d.program,i[t].name)}L(),d._relink=L,d.types={uniforms:a(i),attributes:a(c)},d.attributes=r(h,d,I,b),Object.defineProperty(d,"uniforms",n(h,d,i,A))},t.exports=function(t,e,i,n,r){var a=new c(t);return a.update(e,i,n,r),a}},8866:function(t){function e(t,e,i){this.shortMessage=e||"",this.longMessage=i||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(i?"\n"+i:""),this.stack=(new Error).stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,t.exports=e},8731:function(t,e,i){t.exports=function(t,e,i,r){for(var a={},s=0,c=i.length;s<c;++s){var g=i[s],u=g.name,d=g.type,h=g.locations;switch(d){case"bool":case"int":case"float":o(t,e,h[0],r,1,a,u);break;default:if(d.indexOf("vec")>=0){if((B=d.charCodeAt(d.length-1)-48)<2||B>4)throw new n("","Invalid data type for attribute "+u+": "+d);o(t,e,h[0],r,B,a,u)}else{if(!(d.indexOf("mat")>=0))throw new n("","Unknown data type for attribute "+u+": "+d);var B;if((B=d.charCodeAt(d.length-1)-48)<2||B>4)throw new n("","Invalid data type for attribute "+u+": "+d);l(t,e,h,r,B,a,u)}}}return a};var n=i(8866);function r(t,e,i,n,r,a){this._gl=t,this._wrapper=e,this._index=i,this._locations=n,this._dimension=r,this._constFunc=a}var a=r.prototype;a.pointer=function(t,e,i,n){var r=this,a=r._gl,s=r._locations[r._index];a.vertexAttribPointer(s,r._dimension,t||a.FLOAT,!!e,i||0,n||0),a.enableVertexAttribArray(s)},a.set=function(t,e,i,n){return this._constFunc(this._locations[this._index],t,e,i,n)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});var s=[function(t,e,i){return void 0===i.length?t.vertexAttrib1f(e,i):t.vertexAttrib1fv(e,i)},function(t,e,i,n){return void 0===i.length?t.vertexAttrib2f(e,i,n):t.vertexAttrib2fv(e,i)},function(t,e,i,n,r){return void 0===i.length?t.vertexAttrib3f(e,i,n,r):t.vertexAttrib3fv(e,i)},function(t,e,i,n,r,a){return void 0===i.length?t.vertexAttrib4f(e,i,n,r,a):t.vertexAttrib4fv(e,i)}];function o(t,e,i,n,a,o,l){var c=s[a],g=new r(t,e,i,n,a,c);Object.defineProperty(o,l,{set:function(e){return t.disableVertexAttribArray(n[i]),c(t,n[i],e),e},get:function(){return g},enumerable:!0})}function l(t,e,i,n,r,a,s){for(var l=new Array(r),c=new Array(r),g=0;g<r;++g)o(t,e,i[g],n,r,l,g),c[g]=l[g];Object.defineProperty(l,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<r;++e)c[e].location=t[e];else for(e=0;e<r;++e)c[e].location=t+e;return t},get:function(){for(var t=new Array(r),e=0;e<r;++e)t[e]=n[i[e]];return t},enumerable:!0}),l.pointer=function(e,a,s,o){e=e||t.FLOAT,a=!!a,s=s||r*r,o=o||0;for(var l=0;l<r;++l){var c=n[i[l]];t.vertexAttribPointer(c,r,e,a,s,o+l*r),t.enableVertexAttribArray(c)}};var u=new Array(r),d=t["vertexAttrib"+r+"fv"];Object.defineProperty(a,s,{set:function(e){for(var a=0;a<r;++a){var s=n[i[a]];if(t.disableVertexAttribArray(s),Array.isArray(e[0]))d.call(t,s,e[a]);else{for(var o=0;o<r;++o)u[o]=e[r*a+o];d.call(t,s,u)}}return e},get:function(){return l},enumerable:!0})}},3327:function(t,e,i){var n=i(216),r=i(8866);function a(t){return function(){return t}}function s(t,e){for(var i=new Array(t),n=0;n<t;++n)i[n]=e;return i}t.exports=function(t,e,i,o){function l(e){return function(n){for(var a=c("",e),s=0;s<a.length;++s){var l=a[s],g=l[0],u=l[1];if(o[u]){var d=n;if("string"==typeof g&&(0===g.indexOf(".")||0===g.indexOf("["))){var h=g;if(0===g.indexOf(".")&&(h=g.slice(1)),h.indexOf("]")===h.length-1){var B=h.indexOf("["),p=h.slice(0,B),F=h.slice(B+1,h.length-1);d=p?n[p][F]:n[F]}else d=n[h]}var f,Q=i[u].type;switch(Q){case"bool":case"int":case"sampler2D":case"samplerCube":t.uniform1i(o[u],d);break;case"float":t.uniform1f(o[u],d);break;default:var I=Q.indexOf("vec");if(!(0<=I&&I<=1&&Q.length===4+I)){if(0===Q.indexOf("mat")&&4===Q.length){if((f=Q.charCodeAt(Q.length-1)-48)<2||f>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+Q);t["uniformMatrix"+f+"fv"](o[u],!1,d);break}throw new r("","Unknown uniform data type for "+name+": "+Q)}if((f=Q.charCodeAt(Q.length-1)-48)<2||f>4)throw new r("","Invalid data type");switch(Q.charAt(0)){case"b":case"i":t["uniform"+f+"iv"](o[u],d);break;case"v":t["uniform"+f+"fv"](o[u],d);break;default:throw new r("","Unrecognized data type for vector "+name+": "+Q)}}}}}}function c(t,e){if("object"!=typeof e)return[[t,e]];var i=[];for(var n in e){var r=e[n],a=t;parseInt(n)+""===n?a+="["+n+"]":a+="."+n,"object"==typeof r?i.push.apply(i,c(a,r)):i.push([a,r])}return i}function g(t,e,n){if("object"==typeof n){var c=u(n);Object.defineProperty(t,e,{get:a(c),set:l(n),enumerable:!0,configurable:!1})}else o[n]?Object.defineProperty(t,e,{get:(g=n,function(t,e,i){return t.getUniform(e.program,i[g])}),set:l(n),enumerable:!0,configurable:!1}):t[e]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){if((i=t.charCodeAt(t.length-1)-48)<2||i>4)throw new r("","Invalid data type");return"b"===t.charAt(0)?s(i,!1):s(i,0)}if(0===t.indexOf("mat")&&4===t.length){var i;if((i=t.charCodeAt(t.length-1)-48)<2||i>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+t);return s(i*i,0)}throw new r("","Unknown uniform data type for "+name+": "+t)}}(i[n].type);var g}function u(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var i=0;i<t.length;++i)g(e,i,t[i])}else for(var n in e={},t)g(e,n,t[n]);return e}var d=n(i,!0);return{get:a(u(d)),set:l(d),enumerable:!0,configurable:!0}}},216:function(t){t.exports=function(t,e){for(var i={},n=0;n<t.length;++n)for(var r=t[n].name.split("."),a=i,s=0;s<r.length;++s){var o=r[s].split("[");if(o.length>1){o[0]in a||(a[o[0]]=[]),a=a[o[0]];for(var l=1;l<o.length;++l){var c=parseInt(o[l]);l<o.length-1||s<r.length-1?(c in a||(l<o.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=e?n:t[n].type}}else s<r.length-1?(o[0]in a||(a[o[0]]={}),a=a[o[0]]):a[o[0]]=e?n:t[n].type}return i}},2145:function(t,e){e.uniforms=function(t,e){for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],a=0;a<i;++a){var s=t.getActiveUniform(e,a);if(s){var o=r(t,s.type);if(s.size>1)for(var l=0;l<s.size;++l)n.push({name:s.name.replace("[0]","["+l+"]"),type:o});else n.push({name:s.name,type:o})}}return n},e.attributes=function(t,e){for(var i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=[],a=0;a<i;++a){var s=t.getActiveAttrib(e,a);s&&n.push({name:s.name,type:r(t,s.type)})}return n};var i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function r(t,e){if(!n){var r=Object.keys(i);n={};for(var a=0;a<r.length;++a){var s=r[a];n[t[s]]=i[s]}}return n[e]}},5091:function(t,e,i){e.shader=function(t,e,i){return g(t).getShaderReference(e,i)},e.program=function(t,e,i,n,r){return g(t).getProgram(e,i,n,r)};var n=i(8866),r=i(2992),a=new("undefined"==typeof WeakMap?i(606):WeakMap),s=0;function o(t,e,i,n,r,a,s){this.id=t,this.src=e,this.type=i,this.shader=n,this.count=a,this.programs=[],this.cache=s}function l(t){this.gl=t,this.shaders=[{},{}],this.programs={}}o.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,i=this.programs,n=0,r=i.length;n<r;++n){var a=t.programs[i[n]];a&&(delete t.programs[n],e.deleteProgram(a))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var c=l.prototype;function g(t){var e=a.get(t);return e||(e=new l(t),a.set(t,e)),e}c.getShaderReference=function(t,e){var i=this.gl,a=this.shaders[t===i.FRAGMENT_SHADER|0],l=a[e];if(l&&i.isShader(l.shader))l.count+=1;else{var c=function(t,e,i){var a=t.createShader(e);if(t.shaderSource(a,i),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(a);try{var o=r(s,i,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new n(s,"Error compiling shader:\n"+s)}throw new n(s,o.short,o.long)}return a}(i,t,e);l=a[e]=new o(s++,e,t,c,[],1,this)}return l},c.getProgram=function(t,e,i,r){var a=[t.id,e.id,i.join(":"),r.join(":")].join("@"),s=this.programs[a];return s&&this.gl.isProgram(s)||(this.programs[a]=s=function(t,e,i,r,a){var s=t.createProgram();t.attachShader(s,e),t.attachShader(s,i);for(var o=0;o<r.length;++o)t.bindAttribLocation(s,a[o],r[o]);if(t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS)){var l=t.getProgramInfoLog(s);throw new n(l,"Error linking program: "+l)}return s}(this.gl,t.shader,e.shader,i,r),t.programs.push(a),e.programs.push(a)),s}},1493:function(t,e,i){var n=i(3236),r=i(9405),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));\n  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),s=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);t.exports=function(t){return r(t,a,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(t,e,i){var n=i(2762),r=i(8116),a=i(1493);t.exports=function(t,e){var i=[];function s(t,e,n,r,a,s){var o=[t,e,n,0,0,0,1];o[r+3]=1,o[r]=a,i.push.apply(i,o),o[6]=-1,i.push.apply(i,o),o[r]=s,i.push.apply(i,o),i.push.apply(i,o),o[6]=1,i.push.apply(i,o),o[r]=a,i.push.apply(i,o)}s(0,0,0,0,0,1),s(0,0,0,1,0,1),s(0,0,0,2,0,1),s(1,0,0,1,-1,1),s(1,0,0,2,-1,1),s(0,1,0,0,-1,1),s(0,1,0,2,-1,1),s(0,0,1,0,-1,1),s(0,0,1,1,-1,1);var l=n(t,i),c=r(t,[{type:t.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:l,size:1,offset:24,stride:28}]),g=a(t);g.attributes.position.location=0,g.attributes.color.location=1,g.attributes.weight.location=2;var u=new o(t,l,c,g);return u.update(e),u};var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(t,e,i,n){this.gl=t,this.buffer=e,this.vao=i,this.shader=n,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=o.prototype,c=[0,0,0],g=[0,0,0],u=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(t){},l.draw=function(t){var e=this.gl,i=this.vao,n=this.shader;i.bind(),n.bind();var r,a=t.model||s,o=t.view||s,l=t.projection||s;this.axes&&(r=this.axes.lastCubeProps.axis);for(var d=c,h=g,B=0;B<3;++B)r&&r[B]<0?(d[B]=this.bounds[0][B],h[B]=this.bounds[1][B]):(d[B]=this.bounds[1][B],h[B]=this.bounds[0][B]);u[0]=e.drawingBufferWidth,u[1]=e.drawingBufferHeight,n.uniforms.model=a,n.uniforms.view=o,n.uniforms.projection=l,n.uniforms.coordinates=[this.position,d,h],n.uniforms.colors=this.colors,n.uniforms.screenShape=u;for(B=0;B<3;++B)n.uniforms.lineWidth=this.lineWidth[B]*this.pixelRatio,this.enabled[B]&&(i.draw(e.TRIANGLES,6,6*B),this.drawSides[B]&&i.draw(e.TRIANGLES,12,18+12*B));i.unbind()},l.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(t,e,i){var n=i(3236),r=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),s=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * (view * tubePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);e.meshShader={vertex:r,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},e.pickShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(t,e,i){var n=i(2931),r=i(9970),a=["xyz","xzy","yxz","yzx","zxy","zyx"],s=function(t,e,i,a){for(var s=0,o=0;o<t.length;o++)for(var l=t[o].velocities,c=0;c<l.length;c++)s=Math.max(s,n.length(l[c]));var g=t.map((function(t){return function(t,e,i,a){for(var s=t.points,o=t.velocities,l=t.divergences,c=[],g=[],u=[],d=[],h=[],B=[],p=0,F=0,f=r.create(),Q=r.create(),I=0;I<s.length;I++){var U=s[I],b=o[I],y=l[I];0===e&&(y=.05*i),F=n.length(b)/a,f=r.create(),n.copy(f,b),f[3]=y;for(var m=0;m<8;m++)h[m]=[U[0],U[1],U[2],m];if(d.length>0)for(m=0;m<8;m++){var x=(m+1)%8;c.push(d[m],h[m],h[x],h[x],d[x],d[m]),u.push(Q,f,f,f,Q,Q),B.push(p,F,F,F,p,p);var v=c.length;g.push([v-6,v-5,v-4],[v-3,v-2,v-1])}var C=d;d=h,h=C;var A=Q;Q=f,f=A;var L=p;p=F,F=L}return{positions:c,cells:g,vectors:u,vertexIntensity:B}}(t,i,a,s)})),u=[],d=[],h=[],B=[];for(o=0;o<g.length;o++){var p=g[o],F=u.length;u=u.concat(p.positions),h=h.concat(p.vectors),B=B.concat(p.vertexIntensity);for(c=0;c<p.cells.length;c++){var f=p.cells[c],Q=[];d.push(Q);for(var I=0;I<f.length;I++)Q.push(f[I]+F)}}return{positions:u,cells:d,vectors:h,vertexIntensity:B,colormap:e}},o=function(t,e){var i,n=t.length;for(i=0;i<n;i++){var r=t[i];if(r===e)return i;if(r>e)return i-1}return i},l=function(t,e,i){return t<e?e:t>i?i:t},c=function(t){var e=1/0;t.sort((function(t,e){return t-e}));for(var i=t.length,n=1;n<i;n++){var r=Math.abs(t[n]-t[n-1]);r<e&&(e=r)}return e};t.exports=function(t,e){var i=t.startingPositions,r=t.maxLength||1e3,g=t.tubeSize||1,u=t.absoluteTubeSize,d=t.gridFill||"+x+y+z",h={};-1!==d.indexOf("-x")&&(h.reversedX=!0),-1!==d.indexOf("-y")&&(h.reversedY=!0),-1!==d.indexOf("-z")&&(h.reversedZ=!0),h.filled=a.indexOf(d.replace(/-/g,"").replace(/\+/g,""));var B=t.getVelocity||function(e){return function(t,e,i){var r=e.vectors,a=e.meshgrid,s=t[0],c=t[1],g=t[2],u=a[0].length,d=a[1].length,h=a[2].length,B=o(a[0],s),p=o(a[1],c),F=o(a[2],g),f=B+1,Q=p+1,I=F+1;if(B=l(B,0,u-1),f=l(f,0,u-1),p=l(p,0,d-1),Q=l(Q,0,d-1),F=l(F,0,h-1),I=l(I,0,h-1),B<0||p<0||F<0||f>u-1||Q>d-1||I>h-1)return n.create();var U,b,y,m,x,v,C=a[0][B],A=a[0][f],L=a[1][p],G=a[1][Q],R=a[2][F],S=(s-C)/(A-C),w=(c-L)/(G-L),V=(g-R)/(a[2][I]-R);switch(isFinite(S)||(S=.5),isFinite(w)||(w=.5),isFinite(V)||(V=.5),i.reversedX&&(B=u-1-B,f=u-1-f),i.reversedY&&(p=d-1-p,Q=d-1-Q),i.reversedZ&&(F=h-1-F,I=h-1-I),i.filled){case 5:x=F,v=I,y=p*h,m=Q*h,U=B*h*d,b=f*h*d;break;case 4:x=F,v=I,U=B*h,b=f*h,y=p*h*u,m=Q*h*u;break;case 3:y=p,m=Q,x=F*d,v=I*d,U=B*d*h,b=f*d*h;break;case 2:y=p,m=Q,U=B*d,b=f*d,x=F*d*u,v=I*d*u;break;case 1:U=B,b=f,x=F*u,v=I*u,y=p*u*h,m=Q*u*h;break;default:U=B,b=f,y=p*u,m=Q*u,x=F*u*d,v=I*u*d}var E=r[U+y+x],Z=r[U+y+v],N=r[U+m+x],D=r[U+m+v],X=r[b+y+x],H=r[b+y+v],W=r[b+m+x],k=r[b+m+v],M=n.create(),T=n.create(),Y=n.create(),J=n.create();n.lerp(M,E,X,S),n.lerp(T,Z,H,S),n.lerp(Y,N,W,S),n.lerp(J,D,k,S);var _=n.create(),z=n.create();n.lerp(_,M,Y,w),n.lerp(z,T,J,w);var O=n.create();return n.lerp(O,_,z,V),O}(e,t,h)},p=t.getDivergence||function(t,e){var i=n.create(),r=1e-4;n.add(i,t,[r,0,0]);var a=B(i);n.subtract(a,a,e),n.scale(a,a,1/r),n.add(i,t,[0,r,0]);var s=B(i);n.subtract(s,s,e),n.scale(s,s,1/r),n.add(i,t,[0,0,r]);var o=B(i);return n.subtract(o,o,e),n.scale(o,o,1/r),n.add(i,a,s),n.add(i,i,o),i},F=[],f=e[0][0],Q=e[0][1],I=e[0][2],U=e[1][0],b=e[1][1],y=e[1][2],m=function(t){var e=t[0],i=t[1],n=t[2];return!(e<f||e>U||i<Q||i>b||n<I||n>y)},x=10*n.distance(e[0],e[1])/r,v=x*x,C=1,A=0,L=i.length;L>1&&(C=function(t){for(var e=[],i=[],n=[],r={},a={},s={},o=t.length,l=0;l<o;l++){var g=t[l],u=g[0],d=g[1],h=g[2];r[u]||(e.push(u),r[u]=!0),a[d]||(i.push(d),a[d]=!0),s[h]||(n.push(h),s[h]=!0)}var B=c(e),p=c(i),F=c(n),f=Math.min(B,p,F);return isFinite(f)?f:1}(i));for(var G=0;G<L;G++){var R=n.create();n.copy(R,i[G]);var S=[R],w=[],V=B(R),E=R;w.push(V);var Z=[],N=p(R,V),D=n.length(N);isFinite(D)&&D>A&&(A=D),Z.push(D),F.push({points:S,velocities:w,divergences:Z});for(var X=0;X<100*r&&S.length<r&&m(R);){X++;var H=n.clone(V),W=n.squaredLength(H);if(0===W)break;if(W>v&&n.scale(H,H,x/Math.sqrt(W)),n.add(H,H,R),V=B(H),n.squaredDistance(E,H)-v>-1e-4*v){S.push(H),E=H,w.push(V);N=p(H,V),D=n.length(N);isFinite(D)&&D>A&&(A=D),Z.push(D)}R=H}}var k=s(F,t.colormap,A,C);return u?k.tubeScale=u:(0===A&&(A=1),k.tubeScale=.5*g*C/A),k};var g=i(6740),u=i(6405).createMesh;t.exports.createTubeMesh=function(t,e){return u(t,e,{shaders:g,traceType:"streamtube"})}},990:function(t,e,i){var n=i(9405),r=i(3236),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);\n  vec4 clipPosition = projection * (view * worldPosition);\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * (view * worldPosition);\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);e.createShader=function(t){var e=n(t,a,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createPickShader=function(t){var e=n(t,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createContourShader=function(t){var e=n(t,o,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},e.createPickContourShader=function(t){var e=n(t,o,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e}},9499:function(t,e,i){t.exports=function(t){var e=t.gl,i=Q(e),n=U(e),o=I(e),l=b(e),c=r(e),g=a(e,[{buffer:c,size:4,stride:y,offset:0},{buffer:c,size:3,stride:y,offset:16},{buffer:c,size:3,stride:y,offset:28}]),u=r(e),d=a(e,[{buffer:u,size:4,stride:20,offset:0},{buffer:u,size:1,stride:20,offset:16}]),h=r(e),B=a(e,[{buffer:h,size:2,type:e.FLOAT}]),p=s(e,1,A,e.RGBA,e.UNSIGNED_BYTE);p.minFilter=e.LINEAR,p.magFilter=e.LINEAR;var F=new L(e,[0,0],[[0,0,0],[0,0,0]],i,n,c,g,p,o,l,u,d,h,B,[0,0,0]),f={levels:[[],[],[]]};for(var m in t)f[m]=t[m];return f.colormap=f.colormap||"jet",F.update(f),F};var n=i(8828),r=i(2762),a=i(8116),s=i(7766),o=i(1888),l=i(6729),c=i(5298),g=i(9994),u=i(9618),d=i(3711),h=i(6760),B=i(7608),p=i(2478),F=i(6199),f=i(990),Q=f.createShader,I=f.createContourShader,U=f.createPickShader,b=f.createPickContourShader,y=40,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],v=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function C(t,e,i,n,r){this.position=t,this.index=e,this.uv=i,this.level=n,this.dataCoordinate=r}!function(){for(var t=0;t<3;++t){var e=v[t],i=(t+2)%3;e[(t+1)%3+0]=1,e[i+3]=1,e[t+6]=1}}();var A=256;function L(t,e,i,n,r,a,s,l,c,g,d,h,B,p,F){this.gl=t,this.shape=e,this.bounds=i,this.objectOffset=F,this.intensityBounds=[],this._shader=n,this._pickShader=r,this._coordinateBuffer=a,this._vao=s,this._colorMap=l,this._contourShader=c,this._contourPickShader=g,this._contourBuffer=d,this._contourVAO=h,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new C([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=B,this._dynamicVAO=p,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[u(o.mallocFloat(1024),[0,0]),u(o.mallocFloat(1024),[0,0]),u(o.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var G=L.prototype;G.genColormap=function(t,e){var i=!1,n=g([l({colormap:t,nshades:A,format:"rgba"}).map((function(t,n){var r=e?function(t,e){if(!e)return 1;if(!e.length)return 1;for(var i=0;i<e.length;++i){if(e.length<2)return 1;if(e[i][0]===t)return e[i][1];if(e[i][0]>t&&i>0){var n=(e[i][0]-t)/(e[i][0]-e[i-1][0]);return e[i][1]*(1-n)+n*e[i-1][1]}}return 1}(n/255,e):t[3];return r<1&&(i=!0),[t[0],t[1],t[2],255*r]}))]);return c.divseq(n,255),this.hasAlphaScale=i,n},G.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},G.isOpaque=function(){return!this.isTransparent()},G.pickSlots=1,G.setPickBase=function(t){this.pickId=t};var R=[0,0,0],S={showSurface:!1,showContour:!1,projections:[m.slice(),m.slice(),m.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function w(t,e){var i,n,r,a=e.axes&&e.axes.lastCubeProps.axis||R,s=e.showSurface,o=e.showContour;for(i=0;i<3;++i)for(s=s||e.surfaceProject[i],n=0;n<3;++n)o=o||e.contourProject[i][n];for(i=0;i<3;++i){var l=S.projections[i];for(n=0;n<16;++n)l[n]=0;for(n=0;n<4;++n)l[5*n]=1;l[5*i]=0,l[12+i]=e.axesBounds[+(a[i]>0)][i],h(l,t.model,l);var c=S.clipBounds[i];for(r=0;r<2;++r)for(n=0;n<3;++n)c[r][n]=t.clipBounds[r][n];c[0][i]=-1e8,c[1][i]=1e8}return S.showSurface=s,S.showContour=o,S}var V={model:m,view:m,projection:m,inverseModel:m.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},E=m.slice(),Z=[1,0,0,0,1,0,0,0,1];function N(t,e){t=t||{};var i=this.gl;i.disable(i.CULL_FACE),this._colorMap.bind(0);var n=V;n.model=t.model||m,n.view=t.view||m,n.projection=t.projection||m,n.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],n.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],n.objectOffset=this.objectOffset,n.contourColor=this.contourColor[0],n.inverseModel=B(n.inverseModel,n.model);for(var r=0;r<2;++r)for(var a=n.clipBounds[r],s=0;s<3;++s)a[s]=Math.min(Math.max(this.clipBounds[r][s],-1e8),1e8);n.kambient=this.ambientLight,n.kdiffuse=this.diffuseLight,n.kspecular=this.specularLight,n.roughness=this.roughness,n.fresnel=this.fresnel,n.opacity=this.opacity,n.height=0,n.permutation=Z,n.vertexColor=this.vertexColor;var o=E;for(h(o,n.view,n.model),h(o,n.projection,o),B(o,o),r=0;r<3;++r)n.eyePosition[r]=o[12+r]/o[15];var l=o[15];for(r=0;r<3;++r)l+=this.lightPosition[r]*o[4*r+3];for(r=0;r<3;++r){var c=o[12+r];for(s=0;s<3;++s)c+=o[4*s+r]*this.lightPosition[s];n.lightPosition[r]=c/l}var g=w(n,this);if(g.showSurface){for(this._shader.bind(),this._shader.uniforms=n,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(i.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&this.vertexCount&&(this._shader.uniforms.model=g.projections[r],this._shader.uniforms.clipBounds=g.clipBounds[r],this._vao.draw(i.TRIANGLES,this._vertexCount));this._vao.unbind()}if(g.showContour){var u=this._contourShader;n.kambient=1,n.kdiffuse=0,n.kspecular=0,n.opacity=1,u.bind(),u.uniforms=n;var d=this._contourVAO;for(d.bind(),r=0;r<3;++r)for(u.uniforms.permutation=v[r],i.lineWidth(this.contourWidth[r]*this.pixelRatio),s=0;s<this.contourLevels[r].length;++s)s===this.highlightLevel[r]?(u.uniforms.contourColor=this.highlightColor[r],u.uniforms.contourTint=this.highlightTint[r]):0!==s&&s-1!==this.highlightLevel[r]||(u.uniforms.contourColor=this.contourColor[r],u.uniforms.contourTint=this.contourTint[r]),this._contourCounts[r][s]&&(u.uniforms.height=this.contourLevels[r][s],d.draw(i.LINES,this._contourCounts[r][s],this._contourOffsets[r][s]));for(r=0;r<3;++r)for(u.uniforms.model=g.projections[r],u.uniforms.clipBounds=g.clipBounds[r],s=0;s<3;++s)if(this.contourProject[r][s]){u.uniforms.permutation=v[s],i.lineWidth(this.contourWidth[s]*this.pixelRatio);for(var p=0;p<this.contourLevels[s].length;++p)p===this.highlightLevel[s]?(u.uniforms.contourColor=this.highlightColor[s],u.uniforms.contourTint=this.highlightTint[s]):0!==p&&p-1!==this.highlightLevel[s]||(u.uniforms.contourColor=this.contourColor[s],u.uniforms.contourTint=this.contourTint[s]),this._contourCounts[s][p]&&(u.uniforms.height=this.contourLevels[s][p],d.draw(i.LINES,this._contourCounts[s][p],this._contourOffsets[s][p]))}for(d.unbind(),(d=this._dynamicVAO).bind(),r=0;r<3;++r)if(0!==this._dynamicCounts[r])for(u.uniforms.model=n.model,u.uniforms.clipBounds=n.clipBounds,u.uniforms.permutation=v[r],i.lineWidth(this.dynamicWidth[r]*this.pixelRatio),u.uniforms.contourColor=this.dynamicColor[r],u.uniforms.contourTint=this.dynamicTint[r],u.uniforms.height=this.dynamicLevel[r],d.draw(i.LINES,this._dynamicCounts[r],this._dynamicOffsets[r]),s=0;s<3;++s)this.contourProject[s][r]&&(u.uniforms.model=g.projections[s],u.uniforms.clipBounds=g.clipBounds[s],d.draw(i.LINES,this._dynamicCounts[r],this._dynamicOffsets[r]));d.unbind()}}G.draw=function(t){return N.call(this,t,!1)},G.drawTransparent=function(t){return N.call(this,t,!0)};var D={model:m,view:m,projection:m,inverseModel:m,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function X(t,e){return Array.isArray(t)?[e(t[0]),e(t[1]),e(t[2])]:[e(t),e(t),e(t)]}function H(t){return Array.isArray(t)?3===t.length?[t[0],t[1],t[2],1]:[t[0],t[1],t[2],t[3]]:[0,0,0,1]}function W(t){if(Array.isArray(t)){if(Array.isArray(t))return[H(t[0]),H(t[1]),H(t[2])];var e=H(t);return[e.slice(),e.slice(),e.slice()]}}G.drawPick=function(t){t=t||{};var e=this.gl;e.disable(e.CULL_FACE);var i=D;i.model=t.model||m,i.view=t.view||m,i.projection=t.projection||m,i.shape=this._field[2].shape,i.pickId=this.pickId/255,i.lowerBound=this.bounds[0],i.upperBound=this.bounds[1],i.objectOffset=this.objectOffset,i.permutation=Z;for(var n=0;n<2;++n)for(var r=i.clipBounds[n],a=0;a<3;++a)r[a]=Math.min(Math.max(this.clipBounds[n][a],-1e8),1e8);var s=w(i,this);if(s.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=i,this._vao.bind(),this._vao.draw(e.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&(this._pickShader.uniforms.model=s.projections[n],this._pickShader.uniforms.clipBounds=s.clipBounds[n],this._vao.draw(e.TRIANGLES,this._vertexCount));this._vao.unbind()}if(s.showContour){var o=this._contourPickShader;o.bind(),o.uniforms=i;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(e.lineWidth(this.contourWidth[a]*this.pixelRatio),o.uniforms.permutation=v[a],n=0;n<this.contourLevels[a].length;++n)this._contourCounts[a][n]&&(o.uniforms.height=this.contourLevels[a][n],l.draw(e.LINES,this._contourCounts[a][n],this._contourOffsets[a][n]));for(n=0;n<3;++n)for(o.uniforms.model=s.projections[n],o.uniforms.clipBounds=s.clipBounds[n],a=0;a<3;++a)if(this.contourProject[n][a]){o.uniforms.permutation=v[a],e.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var c=0;c<this.contourLevels[a].length;++c)this._contourCounts[a][c]&&(o.uniforms.height=this.contourLevels[a][c],l.draw(e.LINES,this._contourCounts[a][c],this._contourOffsets[a][c]))}l.unbind()}},G.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=this._field[2].shape,i=this._pickResult,n=e[0]*(t.value[0]+(t.value[2]>>4)/16)/255,r=Math.floor(n),a=n-r,s=e[1]*(t.value[1]+(15&t.value[2])/16)/255,o=Math.floor(s),l=s-o;r+=1,o+=1;var c=i.position;c[0]=c[1]=c[2]=0;for(var g=0;g<2;++g)for(var u=g?a:1-a,d=0;d<2;++d)for(var h=r+g,B=o+d,F=u*(d?l:1-l),f=0;f<3;++f)c[f]+=this._field[f].get(h,B)*F;for(var Q=this._pickResult.level,I=0;I<3;++I)if(Q[I]=p.le(this.contourLevels[I],c[I]),Q[I]<0)this.contourLevels[I].length>0&&(Q[I]=0);else if(Q[I]<this.contourLevels[I].length-1){var U=this.contourLevels[I][Q[I]],b=this.contourLevels[I][Q[I]+1];Math.abs(U-c[I])>Math.abs(b-c[I])&&(Q[I]+=1)}for(i.index[0]=a<.5?r:r+1,i.index[1]=l<.5?o:o+1,i.uv[0]=n/e[0],i.uv[1]=s/e[1],f=0;f<3;++f)i.dataCoordinate[f]=this._field[f].get(i.index[0],i.index[1]);return i},G.padField=function(t,e){var i=e.shape.slice(),n=t.shape.slice();c.assign(t.lo(1,1).hi(i[0],i[1]),e),c.assign(t.lo(1).hi(i[0],1),e.hi(i[0],1)),c.assign(t.lo(1,n[1]-1).hi(i[0],1),e.lo(0,i[1]-1).hi(i[0],1)),c.assign(t.lo(0,1).hi(1,i[1]),e.hi(1)),c.assign(t.lo(n[0]-1,1).hi(1,i[1]),e.lo(i[0]-1)),t.set(0,0,e.get(0,0)),t.set(0,n[1]-1,e.get(0,i[1]-1)),t.set(n[0]-1,0,e.get(i[0]-1,0)),t.set(n[0]-1,n[1]-1,e.get(i[0]-1,i[1]-1))},G.update=function(t){t=t||{},this.objectOffset=t.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in t&&(this.contourWidth=X(t.contourWidth,Number)),"showContour"in t&&(this.showContour=X(t.showContour,Boolean)),"showSurface"in t&&(this.showSurface=!!t.showSurface),"contourTint"in t&&(this.contourTint=X(t.contourTint,Boolean)),"contourColor"in t&&(this.contourColor=W(t.contourColor)),"contourProject"in t&&(this.contourProject=X(t.contourProject,(function(t){return X(t,Boolean)}))),"surfaceProject"in t&&(this.surfaceProject=t.surfaceProject),"dynamicColor"in t&&(this.dynamicColor=W(t.dynamicColor)),"dynamicTint"in t&&(this.dynamicTint=X(t.dynamicTint,Number)),"dynamicWidth"in t&&(this.dynamicWidth=X(t.dynamicWidth,Number)),"opacity"in t&&(this.opacity=t.opacity),"opacityscale"in t&&(this.opacityscale=t.opacityscale),"colorBounds"in t&&(this.colorBounds=t.colorBounds),"vertexColor"in t&&(this.vertexColor=t.vertexColor?1:0),"colormap"in t&&this._colorMap.setPixels(this.genColormap(t.colormap,this.opacityscale));var e=t.field||t.coords&&t.coords[2]||null,i=!1;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in t||"coords"in t){var r=(e.shape[0]+2)*(e.shape[1]+2);r>this._field[2].data.length&&(o.freeFloat(this._field[2].data),this._field[2].data=o.mallocFloat(n.nextPow2(r))),this._field[2]=u(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]),this.padField(this._field[2],e),this.shape=e.shape.slice();for(var a=this.shape,s=0;s<2;++s)this._field[2].size>this._field[s].data.length&&(o.freeFloat(this._field[s].data),this._field[s].data=o.mallocFloat(this._field[2].size)),this._field[s]=u(this._field[s].data,[a[0]+2,a[1]+2]);if(t.coords){var l=t.coords;if(!Array.isArray(l)||3!==l.length)throw new Error("gl-surface: invalid coordinates for x/y");for(s=0;s<2;++s){var c=l[s];for(f=0;f<2;++f)if(c.shape[f]!==a[f])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[s],c)}}else if(t.ticks){var g=t.ticks;if(!Array.isArray(g)||2!==g.length)throw new Error("gl-surface: invalid ticks");for(s=0;s<2;++s){var h=g[s];if((Array.isArray(h)||h.length)&&(h=u(h)),h.shape[0]!==a[s])throw new Error("gl-surface: invalid tick length");var B=u(h.data,a);B.stride[s]=h.stride[0],B.stride[1^s]=0,this.padField(this._field[s],B)}}else{for(s=0;s<2;++s){var p=[0,0];p[s]=1,this._field[s]=u(this._field[s].data,[a[0]+2,a[1]+2],p,0)}this._field[0].set(0,0,0);for(var f=0;f<a[0];++f)this._field[0].set(f+1,0,f);for(this._field[0].set(a[0]+1,0,a[0]-1),this._field[1].set(0,0,0),f=0;f<a[1];++f)this._field[1].set(0,f+1,f);this._field[1].set(0,a[1]+1,a[1]-1)}var Q=this._field,I=u(o.mallocFloat(3*Q[2].size*2),[3,a[0]+2,a[1]+2,2]);for(s=0;s<3;++s)F(I.pick(s),Q[s],"mirror");var U=u(o.mallocFloat(3*Q[2].size),[a[0]+2,a[1]+2,3]);for(s=0;s<a[0]+2;++s)for(f=0;f<a[1]+2;++f){var b=I.get(0,s,f,0),y=I.get(0,s,f,1),m=I.get(1,s,f,0),v=I.get(1,s,f,1),C=I.get(2,s,f,0),A=I.get(2,s,f,1),L=m*A-v*C,G=C*y-A*b,R=b*v-y*m,S=Math.sqrt(L*L+G*G+R*R);S<1e-8?(S=Math.max(Math.abs(L),Math.abs(G),Math.abs(R)))<1e-8?(R=1,G=L=0,S=1):S=1/S:S=1/Math.sqrt(S),U.set(s,f,0,L*S),U.set(s,f,1,G*S),U.set(s,f,2,R*S)}o.free(I.data);var w=[1/0,1/0,1/0],V=[-1/0,-1/0,-1/0],E=1/0,Z=-1/0,N=(a[0]-1)*(a[1]-1)*6,D=o.mallocFloat(n.nextPow2(10*N)),H=0,k=0;for(s=0;s<a[0]-1;++s)t:for(f=0;f<a[1]-1;++f){for(var M=0;M<2;++M)for(var T=0;T<2;++T)for(var Y=0;Y<3;++Y){var J=this._field[Y].get(1+s+M,1+f+T);if(isNaN(J)||!isFinite(J))continue t}for(Y=0;Y<6;++Y){var _=s+x[Y][0],z=f+x[Y][1],O=this._field[0].get(_+1,z+1),K=this._field[1].get(_+1,z+1);J=this._field[2].get(_+1,z+1),L=U.get(_+1,z+1,0),G=U.get(_+1,z+1,1),R=U.get(_+1,z+1,2),t.intensity&&(P=t.intensity.get(_,z));var P=t.intensity?t.intensity.get(_,z):J+this.objectOffset[2];D[H++]=_,D[H++]=z,D[H++]=O,D[H++]=K,D[H++]=J,D[H++]=0,D[H++]=P,D[H++]=L,D[H++]=G,D[H++]=R,w[0]=Math.min(w[0],O+this.objectOffset[0]),w[1]=Math.min(w[1],K+this.objectOffset[1]),w[2]=Math.min(w[2],J+this.objectOffset[2]),E=Math.min(E,P),V[0]=Math.max(V[0],O+this.objectOffset[0]),V[1]=Math.max(V[1],K+this.objectOffset[1]),V[2]=Math.max(V[2],J+this.objectOffset[2]),Z=Math.max(Z,P),k+=1}}for(t.intensityBounds&&(E=+t.intensityBounds[0],Z=+t.intensityBounds[1]),s=6;s<H;s+=10)D[s]=(D[s]-E)/(Z-E);this._vertexCount=k,this._coordinateBuffer.update(D.subarray(0,H)),o.freeFloat(D),o.free(U.data),this.bounds=[w,V],this.intensity=t.intensity||this._field[2],this.intensityBounds[0]===E&&this.intensityBounds[1]===Z||(i=!0),this.intensityBounds=[E,Z]}if("levels"in t){var j=t.levels;for(j=Array.isArray(j[0])?j.slice():[[],[],j],s=0;s<3;++s)j[s]=j[s].slice(),j[s].sort((function(t,e){return t-e}));for(s=0;s<3;++s)for(f=0;f<j[s].length;++f)j[s][f]-=this.objectOffset[s];t:for(s=0;s<3;++s){if(j[s].length!==this.contourLevels[s].length){i=!0;break}for(f=0;f<j[s].length;++f)if(j[s][f]!==this.contourLevels[s][f]){i=!0;break t}}this.contourLevels=j}if(i){Q=this._field,a=this.shape;for(var q=[],$=0;$<3;++$){var tt=this.contourLevels[$],et=[],it=[],nt=[0,0,0];for(s=0;s<tt.length;++s){var rt=d(this._field[$],tt[s]);et.push(q.length/5|0),k=0;t:for(f=0;f<rt.cells.length;++f){var at=rt.cells[f];for(Y=0;Y<2;++Y){var st=rt.positions[at[Y]],ot=st[0],lt=0|Math.floor(ot),ct=ot-lt,gt=st[1],ut=0|Math.floor(gt),dt=gt-ut,ht=!1;e:for(var Bt=0;Bt<3;++Bt){nt[Bt]=0;var pt=($+Bt+1)%3;for(M=0;M<2;++M){var Ft=M?ct:1-ct;for(_=0|Math.min(Math.max(lt+M,0),a[0]),T=0;T<2;++T){var ft=T?dt:1-dt;if(z=0|Math.min(Math.max(ut+T,0),a[1]),J=Bt<2?this._field[pt].get(_,z):(this.intensity.get(_,z)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(J)||isNaN(J)){ht=!0;break e}var Qt=Ft*ft;nt[Bt]+=Qt*J}}}if(ht){if(Y>0){for(var It=0;It<5;++It)q.pop();k-=1}continue t}q.push(nt[0],nt[1],st[0],st[1],nt[2]),k+=1}}it.push(k)}this._contourOffsets[$]=et,this._contourCounts[$]=it}var Ut=o.mallocFloat(q.length);for(s=0;s<q.length;++s)Ut[s]=q[s];this._contourBuffer.update(Ut),o.freeFloat(Ut)}},G.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var t=0;t<3;++t)o.freeFloat(this._field[t].data)},G.highlight=function(t){var e,i;if(!t)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(e=0;e<3;++e)this.enableHighlight[e]?this.highlightLevel[e]=t.level[e]:this.highlightLevel[e]=-1;for(i=this.snapToData?t.dataCoordinate:t.position,e=0;e<3;++e)i[e]-=this.objectOffset[e];if(this.enableDynamic[0]&&i[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&i[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&i[2]!==this.dynamicLevel[2]){for(var n=0,r=this.shape,a=o.mallocFloat(12*r[0]*r[1]),s=0;s<3;++s)if(this.enableDynamic[s]){this.dynamicLevel[s]=i[s];var l=(s+1)%3,c=(s+2)%3,g=this._field[s],u=this._field[l],h=this._field[c],B=d(g,i[s]),p=B.cells,F=B.positions;for(this._dynamicOffsets[s]=n,e=0;e<p.length;++e)for(var f=p[e],Q=0;Q<2;++Q){var I=F[f[Q]],U=+I[0],b=0|U,y=0|Math.min(b+1,r[0]),m=U-b,x=1-m,v=+I[1],C=0|v,A=0|Math.min(C+1,r[1]),L=v-C,G=1-L,R=x*G,S=x*L,w=m*G,V=m*L,E=R*u.get(b,C)+S*u.get(b,A)+w*u.get(y,C)+V*u.get(y,A),Z=R*h.get(b,C)+S*h.get(b,A)+w*h.get(y,C)+V*h.get(y,A);if(isNaN(E)||isNaN(Z)){Q&&(n-=1);break}a[2*n+0]=E,a[2*n+1]=Z,n+=1}this._dynamicCounts[s]=n-this._dynamicOffsets[s]}else this.dynamicLevel[s]=NaN,this._dynamicCounts[s]=0;this._dynamicBuffer.update(a.subarray(0,2*n)),o.freeFloat(a)}}},7766:function(t,e,i){var n=i(9618),r=i(5298),a=i(1888);t.exports=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");s||function(t){s=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],o=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],l=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}(t);if("number"==typeof arguments[1])return F(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return F(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1],i=c(e)?e:e.raw;if(i)return function(t,e,i,n,r,a){var s=p(t);return t.texImage2D(t.TEXTURE_2D,0,r,r,a,e),new d(t,s,i,n,r,a)}(t,i,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return function(t,e){var i=e.dtype,s=e.shape.slice(),o=t.getParameter(t.MAX_TEXTURE_SIZE);if(s[0]<0||s[0]>o||s[1]<0||s[1]>o)throw new Error("gl-texture2d: Invalid texture size");var l=B(s,e.stride.slice()),c=0;"float32"===i?c=t.FLOAT:"float64"===i?(c=t.FLOAT,l=!1,i="float32"):"uint8"===i?c=t.UNSIGNED_BYTE:(c=t.UNSIGNED_BYTE,l=!1,i="uint8");var u,h,F=0;if(2===s.length)F=t.LUMINANCE,s=[s[0],s[1],1],e=n(e.data,s,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==s.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===s[2])F=t.ALPHA;else if(2===s[2])F=t.LUMINANCE_ALPHA;else if(3===s[2])F=t.RGB;else{if(4!==s[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");F=t.RGBA}}c!==t.FLOAT||t.getExtension("OES_texture_float")||(c=t.UNSIGNED_BYTE,l=!1);var f=e.size;if(l)u=0===e.offset&&e.data.length===f?e.data:e.data.subarray(e.offset,e.offset+f);else{var Q=[s[2],s[2]*s[0],1];h=a.malloc(f,i);var I=n(h,s,Q,0);"float32"!==i&&"float64"!==i||c!==t.UNSIGNED_BYTE?r.assign(I,e):g(I,e),u=h.subarray(0,f)}var U=p(t);t.texImage2D(t.TEXTURE_2D,0,F,s[0],s[1],0,F,c,u),l||a.free(h);return new d(t,U,s[0],s[1],F,c)}(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var s=null,o=null,l=null;function c(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var g=function(t,e){r.muls(t,e,255)};function u(t,e,i){var n=t.gl,r=n.getParameter(n.MAX_TEXTURE_SIZE);if(e<0||e>r||i<0||i>r)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,i],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,i,0,t.format,t.type,null),t._mipLevels=[0],t}function d(t,e,i,n,r,a){this.gl=t,this.handle=e,this.format=r,this.type=a,this._shape=[i,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var s=this,o=[this._wrapS,this._wrapT];Object.defineProperties(o,[{get:function(){return s._wrapS},set:function(t){return s.wrapS=t}},{get:function(){return s._wrapT},set:function(t){return s.wrapT=t}}]),this._wrapVector=o;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return s._shape[0]},set:function(t){return s.width=t}},{get:function(){return s._shape[1]},set:function(t){return s.height=t}}]),this._shapeVector=l}var h=d.prototype;function B(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function p(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function F(t,e,i,n,r){var a=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>a||i<0||i>a)throw new Error("gl-texture2d: Invalid texture shape");if(r===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var s=p(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,i,0,n,r,null),new d(t,s,e,i,n,r)}Object.defineProperties(h,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&s.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),o.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&s.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),o.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var i=this.gl.getExtension("EXT_texture_filter_anisotropic");i&&this.gl.texParameterf(this.gl.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(l.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var i=this.gl;return this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,this._wrapS),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return u(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return u(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,u(this,this._shape[0],t),t}}}),h.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},h.dispose=function(){this.gl.deleteTexture(this.handle)},h.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},h.setPixels=function(t,e,i,s){var o=this.gl;this.bind(),Array.isArray(e)?(s=i,i=0|e[1],e=0|e[0]):(e=e||0,i=i||0),s=s||0;var l=c(t)?t:t.raw;if(l){this._mipLevels.indexOf(s)<0?(o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,this.type,l),this._mipLevels.push(s)):o.texSubImage2D(o.TEXTURE_2D,s,e,i,this.format,this.type,l)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>s||i+t.shape[0]>this._shape[0]>>>s||e<0||i<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,i,s,o,l,c,u){var d=u.dtype,h=u.shape.slice();if(h.length<2||h.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var p=0,F=0,f=B(h,u.stride.slice());"float32"===d?p=t.FLOAT:"float64"===d?(p=t.FLOAT,f=!1,d="float32"):"uint8"===d?p=t.UNSIGNED_BYTE:(p=t.UNSIGNED_BYTE,f=!1,d="uint8");if(2===h.length)F=t.LUMINANCE,h=[h[0],h[1],1],u=n(u.data,h,[u.stride[0],u.stride[1],1],u.offset);else{if(3!==h.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===h[2])F=t.ALPHA;else if(2===h[2])F=t.LUMINANCE_ALPHA;else if(3===h[2])F=t.RGB;else{if(4!==h[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");F=t.RGBA}h[2]}F!==t.LUMINANCE&&F!==t.ALPHA||o!==t.LUMINANCE&&o!==t.ALPHA||(F=o);if(F!==o)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Q=u.size,I=c.indexOf(s)<0;I&&c.push(s);if(p===l&&f)0===u.offset&&u.data.length===Q?I?t.texImage2D(t.TEXTURE_2D,s,o,h[0],h[1],0,o,l,u.data):t.texSubImage2D(t.TEXTURE_2D,s,e,i,h[0],h[1],o,l,u.data):I?t.texImage2D(t.TEXTURE_2D,s,o,h[0],h[1],0,o,l,u.data.subarray(u.offset,u.offset+Q)):t.texSubImage2D(t.TEXTURE_2D,s,e,i,h[0],h[1],o,l,u.data.subarray(u.offset,u.offset+Q));else{var U;U=l===t.FLOAT?a.mallocFloat32(Q):a.mallocUint8(Q);var b=n(U,h,[h[2],h[2]*h[0],1]);p===t.FLOAT&&l===t.UNSIGNED_BYTE?g(b,u):r.assign(b,u),I?t.texImage2D(t.TEXTURE_2D,s,o,h[0],h[1],0,o,l,U.subarray(0,Q)):t.texSubImage2D(t.TEXTURE_2D,s,e,i,h[0],h[1],o,l,U.subarray(0,Q)),l===t.FLOAT?a.freeFloat32(U):a.freeUint8(U)}}(o,e,i,s,this.format,this.type,this._mipLevels,t)}}},1433:function(t){t.exports=function(t,e,i){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var n=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(i){if(i.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<i.length;++r){var a=i[r];if(a.buffer){var s=a.buffer,o=a.size||4,l=a.type||t.FLOAT,c=!!a.normalized,g=a.stride||0,u=a.offset||0;s.bind(),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,o,l,c,g,u)}else{if("number"==typeof a)t.vertexAttrib1f(r,a);else if(1===a.length)t.vertexAttrib1f(r,a[0]);else if(2===a.length)t.vertexAttrib2f(r,a[0],a[1]);else if(3===a.length)t.vertexAttrib3f(r,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(r,a[0],a[1],a[2],a[3])}t.disableVertexAttribArray(r)}}for(;r<n;++r)t.disableVertexAttribArray(r)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(r=0;r<n;++r)t.disableVertexAttribArray(r)}}},870:function(t,e,i){var n=i(1433);function r(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}r.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},r.prototype.update=function(t,e,i){this._elements=e,this._attributes=t,this._elementsType=i||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(t,e,i){i=i||0;var n=this.gl;this._elements?n.drawElements(t,e,this._elementsType,i):n.drawArrays(t,i,e)},t.exports=function(t){return new r(t)}},7518:function(t,e,i){var n=i(1433);function r(t,e,i,n,r,a){this.location=t,this.dimension=e,this.a=i,this.b=n,this.c=r,this.d=a}function a(t,e,i){this.gl=t,this._ext=e,this.handle=i,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}r.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(t,e,i){if(this.bind(),n(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var a=0;a<t.length;++a){var s=t[a];"number"==typeof s?this._attribs.push(new r(a,1,s)):Array.isArray(s)&&this._attribs.push(new r(a,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!e,this._elementsType=i||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(t,e,i){i=i||0;var n=this.gl;this._useElements?n.drawElements(t,e,this._elementsType,i):n.drawArrays(t,i,e)},t.exports=function(t,e){return new a(t,e,e.createVertexArrayOES())}},8116:function(t,e,i){var n=i(7518),r=i(870);function a(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}t.exports=function(t,e,i,s){var o,l=t.createVertexArray?new a(t):t.getExtension("OES_vertex_array_object");return(o=l?n(t,l):r(t)).update(e,i,s),o}},5632:function(t){t.exports=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}},8192:function(t,e,i){t.exports=function(t,e){var i=n(t[0],t[1],t[2]),s=n(e[0],e[1],e[2]);r(i,i),r(s,s);var o=a(i,s);return o>1?0:Math.acos(o)};var n=i(2825),r=i(3536),a=i(244)},9226:function(t){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},3126:function(t){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},3990:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},1091:function(t){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},5911:function(t){t.exports=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],l=i[2];return t[0]=r*l-a*o,t[1]=a*s-n*l,t[2]=n*o-r*s,t}},5455:function(t,e,i){t.exports=i(7056)},7056:function(t){t.exports=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(i*i+n*n+r*r)}},4008:function(t,e,i){t.exports=i(6690)},6690:function(t){t.exports=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}},244:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},2613:function(t){t.exports=1e-6},9922:function(t,e,i){t.exports=function(t,e){var i=t[0],r=t[1],a=t[2],s=e[0],o=e[1],l=e[2];return Math.abs(i-s)<=n*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=n*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-l)<=n*Math.max(1,Math.abs(a),Math.abs(l))};var n=i(2613)},9265:function(t){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},2681:function(t){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},5137:function(t,e,i){t.exports=function(t,e,i,r,a,s){var o,l;e||(e=3);i||(i=0);l=r?Math.min(r*e+i,t.length):t.length;for(o=i;o<l;o+=e)n[0]=t[o],n[1]=t[o+1],n[2]=t[o+2],a(n,n,s),t[o]=n[0],t[o+1]=n[1],t[o+2]=n[2];return t};var n=i(1091)()},2825:function(t){t.exports=function(t,e,i){var n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=i,n}},2931:function(t,e,i){t.exports={EPSILON:i(2613),create:i(1091),clone:i(3126),angle:i(8192),fromValues:i(2825),copy:i(3990),set:i(1463),equals:i(9922),exactEquals:i(9265),add:i(5632),subtract:i(6843),sub:i(2229),multiply:i(5847),mul:i(4505),divide:i(6690),div:i(4008),min:i(8107),max:i(7417),floor:i(2681),ceil:i(9226),round:i(2447),scale:i(6621),scaleAndAdd:i(8489),distance:i(7056),dist:i(5455),squaredDistance:i(2953),sqrDist:i(6141),length:i(1387),len:i(868),squaredLength:i(3066),sqrLen:i(5486),negate:i(5093),inverse:i(811),normalize:i(3536),dot:i(244),cross:i(5911),lerp:i(6658),random:i(7636),transformMat4:i(5673),transformMat3:i(492),transformQuat:i(264),rotateX:i(6894),rotateY:i(109),rotateZ:i(8692),forEach:i(5137)}},811:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},868:function(t,e,i){t.exports=i(1387)},1387:function(t){t.exports=function(t){var e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)}},6658:function(t){t.exports=function(t,e,i,n){var r=e[0],a=e[1],s=e[2];return t[0]=r+n*(i[0]-r),t[1]=a+n*(i[1]-a),t[2]=s+n*(i[2]-s),t}},7417:function(t){t.exports=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}},8107:function(t){t.exports=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}},4505:function(t,e,i){t.exports=i(5847)},5847:function(t){t.exports=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}},5093:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},3536:function(t){t.exports=function(t,e){var i=e[0],n=e[1],r=e[2],a=i*i+n*n+r*r;a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a);return t}},7636:function(t){t.exports=function(t,e){e=e||1;var i=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=n*e,t}},6894:function(t){t.exports=function(t,e,i,n){var r=i[1],a=i[2],s=e[1]-r,o=e[2]-a,l=Math.sin(n),c=Math.cos(n);return t[0]=e[0],t[1]=r+s*c-o*l,t[2]=a+s*l+o*c,t}},109:function(t){t.exports=function(t,e,i,n){var r=i[0],a=i[2],s=e[0]-r,o=e[2]-a,l=Math.sin(n),c=Math.cos(n);return t[0]=r+o*l+s*c,t[1]=e[1],t[2]=a+o*c-s*l,t}},8692:function(t){t.exports=function(t,e,i,n){var r=i[0],a=i[1],s=e[0]-r,o=e[1]-a,l=Math.sin(n),c=Math.cos(n);return t[0]=r+s*c-o*l,t[1]=a+s*l+o*c,t[2]=e[2],t}},2447:function(t){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},6621:function(t){t.exports=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}},8489:function(t){t.exports=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}},1463:function(t){t.exports=function(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t}},6141:function(t,e,i){t.exports=i(2953)},5486:function(t,e,i){t.exports=i(3066)},2953:function(t){t.exports=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return i*i+n*n+r*r}},3066:function(t){t.exports=function(t){var e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}},2229:function(t,e,i){t.exports=i(6843)},6843:function(t){t.exports=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}},492:function(t){t.exports=function(t,e,i){var n=e[0],r=e[1],a=e[2];return t[0]=n*i[0]+r*i[3]+a*i[6],t[1]=n*i[1]+r*i[4]+a*i[7],t[2]=n*i[2]+r*i[5]+a*i[8],t}},5673:function(t){t.exports=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[3]*n+i[7]*r+i[11]*a+i[15];return s=s||1,t[0]=(i[0]*n+i[4]*r+i[8]*a+i[12])/s,t[1]=(i[1]*n+i[5]*r+i[9]*a+i[13])/s,t[2]=(i[2]*n+i[6]*r+i[10]*a+i[14])/s,t}},264:function(t){t.exports=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],l=i[2],c=i[3],g=c*n+o*a-l*r,u=c*r+l*n-s*a,d=c*a+s*r-o*n,h=-s*n-o*r-l*a;return t[0]=g*c+h*-s+u*-l-d*-o,t[1]=u*c+h*-o+d*-s-g*-l,t[2]=d*c+h*-l+g*-o-u*-s,t}},4361:function(t){t.exports=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}},2335:function(t){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},2933:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},7536:function(t){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},4691:function(t){t.exports=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(i*i+n*n+r*r+a*a)}},1373:function(t){t.exports=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}},3750:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},3390:function(t){t.exports=function(t,e,i,n){var r=new Float32Array(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}},9970:function(t,e,i){t.exports={create:i(7536),clone:i(2335),fromValues:i(3390),copy:i(2933),set:i(4578),add:i(4361),subtract:i(6860),multiply:i(3576),divide:i(1373),min:i(2334),max:i(160),scale:i(9288),scaleAndAdd:i(4844),distance:i(4691),squaredDistance:i(7960),length:i(6808),squaredLength:i(483),negate:i(1498),inverse:i(4494),normalize:i(5177),dot:i(3750),lerp:i(2573),random:i(9131),transformMat4:i(5352),transformQuat:i(4041)}},4494:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},6808:function(t){t.exports=function(t){var e=t[0],i=t[1],n=t[2],r=t[3];return Math.sqrt(e*e+i*i+n*n+r*r)}},2573:function(t){t.exports=function(t,e,i,n){var r=e[0],a=e[1],s=e[2],o=e[3];return t[0]=r+n*(i[0]-r),t[1]=a+n*(i[1]-a),t[2]=s+n*(i[2]-s),t[3]=o+n*(i[3]-o),t}},160:function(t){t.exports=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}},2334:function(t){t.exports=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}},3576:function(t){t.exports=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}},1498:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},5177:function(t){t.exports=function(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=i*i+n*n+r*r+a*a;s>0&&(s=1/Math.sqrt(s),t[0]=i*s,t[1]=n*s,t[2]=r*s,t[3]=a*s);return t}},9131:function(t,e,i){var n=i(5177),r=i(9288);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),n(t,t),r(t,t,e),t}},9288:function(t){t.exports=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}},4844:function(t){t.exports=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t}},4578:function(t){t.exports=function(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}},7960:function(t){t.exports=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],a=e[3]-t[3];return i*i+n*n+r*r+a*a}},483:function(t){t.exports=function(t){var e=t[0],i=t[1],n=t[2],r=t[3];return e*e+i*i+n*n+r*r}},6860:function(t){t.exports=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}},5352:function(t){t.exports=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*s,t}},4041:function(t){t.exports=function(t,e,i){var n=e[0],r=e[1],a=e[2],s=i[0],o=i[1],l=i[2],c=i[3],g=c*n+o*a-l*r,u=c*r+l*n-s*a,d=c*a+s*r-o*n,h=-s*n-o*r-l*a;return t[0]=g*c+h*-s+u*-l-d*-o,t[1]=u*c+h*-o+d*-s-g*-l,t[2]=d*c+h*-l+g*-o-u*-s,t[3]=e[3],t}},1848:function(t,e,i){var n=i(4905),r=i(6468);t.exports=function(t){for(var e=Array.isArray(t)?t:n(t),i=0;i<e.length;i++){var a=e[i];if("preprocessor"===a.type){var s=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var o=s[1],l=s[2];return(o?r(l):l).trim()}}}}},5874:function(t,e,i){t.exports=function(t){var e,i,m,x=0,v=0,C=l,A=[],L=[],G=1,R=0,S=0,w=!1,V=!1,E="",Z=a,N=n;"300 es"===(t=t||{}).version&&(Z=o,N=s);var D={},X={};for(x=0;x<Z.length;x++)D[Z[x]]=!0;for(x=0;x<N.length;x++)X[N[x]]=!0;return function(t){return L=[],null!==t?function(t){x=0,t.toString&&(t=t.toString());var i;E+=t.replace(/\r\n/g,"\n"),m=E.length;for(;e=E[x],x<m;){switch(i=x,C){case g:x=Y();break;case u:x=T();break;case d:x=M();break;case h:x=J();break;case B:x=O();break;case b:x=z();break;case p:x=K();break;case c:x=P();break;case I:x=k();break;case l:x=W()}if(i!==x)if("\n"===E[i])R=0,++G;else++R}return v+=x,E=E.slice(x),L}(t):function(t){A.length&&H(A.join(""));return C=U,H("(eof)"),L}()};function H(t){t.length&&L.push({type:y[C],data:t,position:S,line:G,column:R})}function W(){return A=A.length?[]:A,"/"===i&&"*"===e?(S=v+x-1,C=g,i=e,x+1):"/"===i&&"/"===e?(S=v+x-1,C=u,i=e,x+1):"#"===e?(C=d,S=v+x,x):/\s/.test(e)?(C=I,S=v+x,x):(w=/\d/.test(e),V=/[^\w_]/.test(e),S=v+x,C=w?B:V?h:c,x)}function k(){return/[^\s]/g.test(e)?(H(A.join("")),C=l,x):(A.push(e),i=e,x+1)}function M(){return"\r"!==e&&"\n"!==e||"\\"===i?(A.push(e),i=e,x+1):(H(A.join("")),C=l,x)}function T(){return M()}function Y(){return"/"===e&&"*"===i?(A.push(e),H(A.join("")),C=l,x+1):(A.push(e),i=e,x+1)}function J(){if("."===i&&/\d/.test(e))return C=p,x;if("/"===i&&"*"===e)return C=g,x;if("/"===i&&"/"===e)return C=u,x;if("."===e&&A.length){for(;_(A););return C=p,x}if(";"===e||")"===e||"("===e){if(A.length)for(;_(A););return H(e),C=l,x+1}var t=2===A.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;_(A););return C=l,x}return A.push(e),i=e,x+1}function _(t){for(var e,i,n=0;;){if(e=r.indexOf(t.slice(0,t.length+n).join("")),i=r[e],-1===e){if(n--+t.length>0)continue;i=t.slice(0,1).join("")}return H(i),S+=i.length,(A=A.slice(i.length)).length}}function z(){return/[^a-fA-F0-9]/.test(e)?(H(A.join("")),C=l,x):(A.push(e),i=e,x+1)}function O(){return"."===e||/[eE]/.test(e)?(A.push(e),C=p,i=e,x+1):"x"===e&&1===A.length&&"0"===A[0]?(C=b,A.push(e),i=e,x+1):/[^\d]/.test(e)?(H(A.join("")),C=l,x):(A.push(e),i=e,x+1)}function K(){return"f"===e&&(A.push(e),i=e,x+=1),/[eE]/.test(e)?(A.push(e),i=e,x+1):("-"!==e&&"+"!==e||!/[eE]/.test(i))&&/[^\d]/.test(e)?(H(A.join("")),C=l,x):(A.push(e),i=e,x+1)}function P(){if(/[^\d\w_]/.test(e)){var t=A.join("");return C=X[t]?Q:D[t]?f:F,H(A.join("")),C=l,x}return A.push(e),i=e,x+1}};var n=i(620),r=i(7827),a=i(6852),s=i(7932),o=i(3508),l=999,c=9999,g=0,u=1,d=2,h=3,B=4,p=5,F=6,f=7,Q=8,I=9,U=10,b=11,y=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(t,e,i){var n=i(6852);n=n.slice().filter((function(t){return!/^(gl\_|texture)/.test(t)})),t.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(t){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(t,e,i){var n=i(620);t.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(t){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(t){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(t,e,i){var n=i(5874);t.exports=function(t,e){var i=n(e),r=[];return r=r.concat(i(t)),r=r.concat(i(null))}},3236:function(t){t.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),i=[],n=0;n<t.length-1;n++)i.push(t[n],e[n]||"");return i.push(t[n]),i.join("")}},7520:function(t,e,i){var n=i(9507);t.exports=n&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},3778:function(t,e){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */e.read=function(t,e,i,n,r){var a,s,o=8*r-n-1,l=(1<<o)-1,c=l>>1,g=-7,u=i?r-1:0,d=i?-1:1,h=t[e+u];for(u+=d,a=h&(1<<-g)-1,h>>=-g,g+=o;g>0;a=256*a+t[e+u],u+=d,g-=8);for(s=a&(1<<-g)-1,a>>=-g,g+=n;g>0;s=256*s+t[e+u],u+=d,g-=8);if(0===a)a=1-c;else{if(a===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),a-=c}return(h?-1:1)*s*Math.pow(2,a-n)},e.write=function(t,e,i,n,r,a){var s,o,l,c=8*a-r-1,g=(1<<c)-1,u=g>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,B=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=g):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=g?(o=0,s=g):s+u>=1?(o=(e*l-1)*Math.pow(2,r),s+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[i+h]=255&o,h+=B,o/=256,r-=8);for(s=s<<r|o,c+=r;c>0;t[i+h]=255&s,h+=B,s/=256,c-=8);t[i+h-B]|=128*p}},8954:function(t,e,i){t.exports=function(t,e){var i=t.length;if(0===i)throw new Error("Must have at least d+1 points");var r=t[0].length;if(i<=r)throw new Error("Must input at least d+1 points");var s=t.slice(0,r+1),o=n.apply(void 0,s);if(0===o)throw new Error("Input not in general position");for(var l=new Array(r+1),g=0;g<=r;++g)l[g]=g;o<0&&(l[0]=1,l[1]=0);var u=new a(l,new Array(r+1),!1),d=u.adjacent,h=new Array(r+2);for(g=0;g<=r;++g){for(var B=l.slice(),p=0;p<=r;++p)p===g&&(B[p]=-1);var F=B[0];B[0]=B[1],B[1]=F;var f=new a(B,new Array(r+1),!0);d[g]=f,h[g]=f}h[r+1]=u;for(g=0;g<=r;++g){B=d[g].vertices;var Q=d[g].adjacent;for(p=0;p<=r;++p){var I=B[p];if(I<0)Q[p]=u;else for(var U=0;U<=r;++U)d[U].vertices.indexOf(I)<0&&(Q[p]=d[U])}}var b=new c(r,s,h),y=!!e;for(g=r+1;g<i;++g)b.insert(t[g],y);return b.boundary()};var n=i(3250),r=i(6803).Fw;function a(t,e,i){this.vertices=t,this.adjacent=e,this.boundary=i,this.lastVisited=-1}function s(t,e,i){this.vertices=t,this.cell=e,this.index=i}function o(t,e){return r(t.vertices,e.vertices)}a.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var l=[];function c(t,e,i){this.dimension=t,this.vertices=e,this.simplices=i,this.interior=i.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var r=0;r<=t;++r)this.tuple[r]=this.vertices[r];var a=l[t];a||(a=l[t]=function(t){var e=n[t+1];return e||(e=n),function(t){return function(){var e=this.tuple;return t.apply(this,e)}}(e)}(t)),this.orient=a}var g=c.prototype;g.handleBoundaryDegeneracy=function(t,e){var i=this.dimension,n=this.vertices.length-1,r=this.tuple,a=this.vertices,s=[t];for(t.lastVisited=-n;s.length>0;)for(var o=(t=s.pop()).adjacent,l=0;l<=i;++l){var c=o[l];if(c.boundary&&!(c.lastVisited<=-n)){for(var g=c.vertices,u=0;u<=i;++u){var d=g[u];r[u]=d<0?e:a[d]}var h=this.orient();if(h>0)return c;c.lastVisited=-n,0===h&&s.push(c)}}return null},g.walk=function(t,e){var i=this.vertices.length-1,n=this.dimension,r=this.vertices,a=this.tuple,s=e?this.interior.length*Math.random()|0:this.interior.length-1,o=this.interior[s];t:for(;!o.boundary;){for(var l=o.vertices,c=o.adjacent,g=0;g<=n;++g)a[g]=r[l[g]];o.lastVisited=i;for(g=0;g<=n;++g){var u=c[g];if(!(u.lastVisited>=i)){var d=a[g];a[g]=t;var h=this.orient();if(a[g]=d,h<0){o=u;continue t}u.boundary?u.lastVisited=-i:u.lastVisited=i}}return}return o},g.addPeaks=function(t,e){var i=this.vertices.length-1,n=this.dimension,r=this.vertices,l=this.tuple,c=this.interior,g=this.simplices,u=[e];e.lastVisited=i,e.vertices[e.vertices.indexOf(-1)]=i,e.boundary=!1,c.push(e);for(var d=[];u.length>0;){var h=(e=u.pop()).vertices,B=e.adjacent,p=h.indexOf(i);if(!(p<0))for(var F=0;F<=n;++F)if(F!==p){var f=B[F];if(f.boundary&&!(f.lastVisited>=i)){var Q=f.vertices;if(f.lastVisited!==-i){for(var I=0,U=0;U<=n;++U)Q[U]<0?(I=U,l[U]=t):l[U]=r[Q[U]];if(this.orient()>0){Q[I]=i,f.boundary=!1,c.push(f),u.push(f),f.lastVisited=i;continue}f.lastVisited=-i}var b=f.adjacent,y=h.slice(),m=B.slice(),x=new a(y,m,!0);g.push(x);var v=b.indexOf(e);if(!(v<0)){b[v]=x,m[p]=f,y[F]=-1,m[F]=e,B[F]=x,x.flip();for(U=0;U<=n;++U){var C=y[U];if(!(C<0||C===i)){for(var A=new Array(n-1),L=0,G=0;G<=n;++G){var R=y[G];R<0||G===U||(A[L++]=R)}d.push(new s(A,x,U))}}}}}}d.sort(o);for(F=0;F+1<d.length;F+=2){var S=d[F],w=d[F+1],V=S.index,E=w.index;V<0||E<0||(S.cell.adjacent[S.index]=w.cell,w.cell.adjacent[w.index]=S.cell)}},g.insert=function(t,e){var i=this.vertices;i.push(t);var n=this.walk(t,e);if(n){for(var r=this.dimension,a=this.tuple,s=0;s<=r;++s){var o=n.vertices[s];a[s]=o<0?t:i[o]}var l=this.orient(a);l<0||(0!==l||(n=this.handleBoundaryDegeneracy(n,t)))&&this.addPeaks(t,n)}},g.boundary=function(){for(var t=this.dimension,e=[],i=this.simplices,n=i.length,r=0;r<n;++r){var a=i[r];if(a.boundary){for(var s=new Array(t),o=a.vertices,l=0,c=0,g=0;g<=t;++g)o[g]>=0?s[l++]=o[g]:c=1&g;if(c===(1&t)){var u=s[0];s[0]=s[1],s[1]=u}e.push(s)}}return e}},3352:function(t,e,i){var n=i(2478);function r(t,e,i,n,r){this.mid=t,this.left=e,this.right=i,this.leftPoints=n,this.rightPoints=r,this.count=(e?e.count:0)+(i?i.count:0)+n.length}t.exports=function(t){if(!t||0===t.length)return new f(null);return new f(F(t))};var a=r.prototype;function s(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function o(t,e){var i=F(e);t.mid=i.mid,t.left=i.left,t.right=i.right,t.leftPoints=i.leftPoints,t.rightPoints=i.rightPoints,t.count=i.count}function l(t,e){var i=t.intervals([]);i.push(e),o(t,i)}function c(t,e){var i=t.intervals([]),n=i.indexOf(e);return n<0?0:(i.splice(n,1),o(t,i),1)}function g(t,e,i){for(var n=0;n<t.length&&t[n][0]<=e;++n){var r=i(t[n]);if(r)return r}}function u(t,e,i){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var r=i(t[n]);if(r)return r}}function d(t,e){for(var i=0;i<t.length;++i){var n=e(t[i]);if(n)return n}}function h(t,e){return t-e}function B(t,e){var i=t[0]-e[0];return i||t[1]-e[1]}function p(t,e){var i=t[1]-e[1];return i||t[0]-e[0]}function F(t){if(0===t.length)return null;for(var e=[],i=0;i<t.length;++i)e.push(t[i][0],t[i][1]);e.sort(h);var n=e[e.length>>1],a=[],s=[],o=[];for(i=0;i<t.length;++i){var l=t[i];l[1]<n?a.push(l):n<l[0]?s.push(l):o.push(l)}var c=o,g=o.slice();return c.sort(B),g.sort(p),new r(n,F(a),F(s),c,g)}function f(t){this.root=t}a.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},a.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?l(this,t):this.left.insert(t):this.left=F([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?l(this,t):this.right.insert(t):this.right=F([t]);else{var i=n.ge(this.leftPoints,t,B),r=n.ge(this.rightPoints,t,p);this.leftPoints.splice(i,0,t),this.rightPoints.splice(r,0,t)}},a.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?c(this,t):2===(o=this.left.remove(t))?(this.left=null,this.count-=1,1):(1===o&&(this.count-=1),o):0;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?c(this,t):2===(o=this.right.remove(t))?(this.right=null,this.count-=1,1):(1===o&&(this.count-=1),o):0;if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var i=this,r=this.left;r.right;)i=r,r=r.right;if(i===this)r.right=this.right;else{var a=this.left,o=this.right;i.count-=r.count,i.right=r.left,r.left=a,r.right=o}s(this,r),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return 1}for(a=n.ge(this.leftPoints,t,B);a<this.leftPoints.length&&this.leftPoints[a][0]===t[0];++a)if(this.leftPoints[a]===t){this.count-=1,this.leftPoints.splice(a,1);for(o=n.ge(this.rightPoints,t,p);o<this.rightPoints.length&&this.rightPoints[o][1]===t[1];++o)if(this.rightPoints[o]===t)return this.rightPoints.splice(o,1),1}return 0},a.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(i=this.left.queryPoint(t,e))return i;return g(this.leftPoints,t,e)}if(t>this.mid){var i;if(this.right)if(i=this.right.queryPoint(t,e))return i;return u(this.rightPoints,t,e)}return d(this.leftPoints,e)},a.queryInterval=function(t,e,i){var n;if(t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,i)))return n;if(e>this.mid&&this.right&&(n=this.right.queryInterval(t,e,i)))return n;return e<this.mid?g(this.leftPoints,e,i):t>this.mid?u(this.rightPoints,t,i):d(this.leftPoints,i)};var Q=f.prototype;Q.insert=function(t){this.root?this.root.insert(t):this.root=new r(t[0],null,null,[t],[t])},Q.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),0!==e}return!1},Q.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},Q.queryInterval=function(t,e,i){if(t<=e&&this.root)return this.root.queryInterval(t,e,i)},Object.defineProperty(Q,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(Q,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9507:function(t){t.exports=!0},7163:function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(t){t.exports=function(t){for(var e,i=t.length,n=0;n<i;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},395:function(t){t.exports=function(t,e,i){return t*(1-i)+e*i}},2652:function(t,e,i){var n=i(4335),r=i(6864),a=i(1903),s=i(9921),o=i(7608),l=i(5665),c={length:i(1387),normalize:i(3536),dot:i(244),cross:i(5911)},g=r(),u=r(),d=[0,0,0,0],h=[[0,0,0],[0,0,0],[0,0,0]],B=[0,0,0];function p(t,e,i,n,r){t[0]=e[0]*n+i[0]*r,t[1]=e[1]*n+i[1]*r,t[2]=e[2]*n+i[2]*r}t.exports=function(t,e,i,r,F,f){if(e||(e=[0,0,0]),i||(i=[0,0,0]),r||(r=[0,0,0]),F||(F=[0,0,0,1]),f||(f=[0,0,0,1]),!n(g,t))return!1;if(a(u,g),u[3]=0,u[7]=0,u[11]=0,u[15]=1,Math.abs(s(u)<1e-8))return!1;var Q,I,U=g[3],b=g[7],y=g[11],m=g[12],x=g[13],v=g[14],C=g[15];if(0!==U||0!==b||0!==y){if(d[0]=U,d[1]=b,d[2]=y,d[3]=C,!o(u,u))return!1;l(u,u),function(t,e,i){var n=e[0],r=e[1],a=e[2],s=e[3];t[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*s}(F,d,u)}else F[0]=F[1]=F[2]=0,F[3]=1;if(e[0]=m,e[1]=x,e[2]=v,I=g,(Q=h)[0][0]=I[0],Q[0][1]=I[1],Q[0][2]=I[2],Q[1][0]=I[4],Q[1][1]=I[5],Q[1][2]=I[6],Q[2][0]=I[8],Q[2][1]=I[9],Q[2][2]=I[10],i[0]=c.length(h[0]),c.normalize(h[0],h[0]),r[0]=c.dot(h[0],h[1]),p(h[1],h[1],h[0],1,-r[0]),i[1]=c.length(h[1]),c.normalize(h[1],h[1]),r[0]/=i[1],r[1]=c.dot(h[0],h[2]),p(h[2],h[2],h[0],1,-r[1]),r[2]=c.dot(h[1],h[2]),p(h[2],h[2],h[1],1,-r[2]),i[2]=c.length(h[2]),c.normalize(h[2],h[2]),r[1]/=i[2],r[2]/=i[2],c.cross(B,h[1],h[2]),c.dot(h[0],B)<0)for(var A=0;A<3;A++)i[A]*=-1,h[A][0]*=-1,h[A][1]*=-1,h[A][2]*=-1;return f[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),f[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),f[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),f[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(f[0]=-f[0]),h[0][2]>h[2][0]&&(f[1]=-f[1]),h[1][0]>h[0][1]&&(f[2]=-f[2]),!0}},4335:function(t){t.exports=function(t,e){var i=e[15];if(0===i)return!1;for(var n=1/i,r=0;r<16;r++)t[r]=e[r]*n;return!0}},7442:function(t,e,i){var n=i(6658),r=i(7182),a=i(2652),s=i(9921),o=i(8648),l=u(),c=u(),g=u();function u(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(t){return[t||0,t||0,t||0]}t.exports=function(t,e,i,u){if(0===s(e)||0===s(i))return!1;var d=a(e,l.translate,l.scale,l.skew,l.perspective,l.quaternion),h=a(i,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!d||!h)&&(n(g.translate,l.translate,c.translate,u),n(g.skew,l.skew,c.skew,u),n(g.scale,l.scale,c.scale,u),n(g.perspective,l.perspective,c.perspective,u),o(g.quaternion,l.quaternion,c.quaternion,u),r(t,g.translate,g.scale,g.skew,g.perspective,g.quaternion),!0)}},7182:function(t,e,i){var n={identity:i(7894),translate:i(7656),multiply:i(6760),create:i(6864),scale:i(2504),fromRotationTranslation:i(6743)};n.create();var r=n.create();t.exports=function(t,e,i,a,s,o){return n.identity(t),n.fromRotationTranslation(t,o,e),t[3]=s[0],t[7]=s[1],t[11]=s[2],t[15]=s[3],n.identity(r),0!==a[2]&&(r[9]=a[2],n.multiply(t,t,r)),0!==a[1]&&(r[9]=0,r[8]=a[1],n.multiply(t,t,r)),0!==a[0]&&(r[8]=0,r[4]=a[0],n.multiply(t,t,r)),n.scale(t,t,i),t}},1811:function(t,e,i){var n=i(2478),r=i(7442),a=i(7608),s=i(5567),o=i(2408),l=i(7089),c=i(6582),g=i(7656);i(2504);var u=i(3536),d=[0,0,0];function h(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=function(t){var e=(t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new h(e)};var B=h.prototype;B.recalcMatrix=function(t){var e=this._time,i=n.le(e,t),s=this.computedMatrix;if(!(i<0)){var o=this._components;if(i===e.length-1)for(var l=16*i,c=0;c<16;++c)s[c]=o[l++];else{var g=e[i+1]-e[i],d=(l=16*i,this.prevMatrix),h=!0;for(c=0;c<16;++c)d[c]=o[l++];var B=this.nextMatrix;for(c=0;c<16;++c)B[c]=o[l++],h=h&&d[c]===B[c];if(g<1e-6||h)for(c=0;c<16;++c)s[c]=d[c];else r(s,d,B,(t-e[i])/g)}var p=this.computedUp;p[0]=s[1],p[1]=s[5],p[2]=s[9],u(p,p);var F=this.computedInverse;a(F,s);var f=this.computedEye,Q=F[15];f[0]=F[12]/Q,f[1]=F[13]/Q,f[2]=F[14]/Q;var I=this.computedCenter,U=Math.exp(this.computedRadius[0]);for(c=0;c<3;++c)I[c]=f[c]-s[2+4*c]*U}},B.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,i=e.length-16,n=0;n<16;++n)e.push(e[i++]);this._time.push(t)}},B.flush=function(t){var e=n.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},B.lastT=function(){return this._time[this._time.length-1]},B.lookAt=function(t,e,i,n){this.recalcMatrix(t),e=e||this.computedEye,i=i||d,n=n||this.computedUp,this.setMatrix(t,c(this.computedMatrix,e,i,n));for(var r=0,a=0;a<3;++a)r+=Math.pow(i[a]-e[a],2);r=Math.log(Math.sqrt(r)),this.computedRadius[0]=r},B.rotate=function(t,e,i,n){this.recalcMatrix(t);var r=this.computedInverse;e&&o(r,r,e),i&&s(r,r,i),n&&l(r,r,n),this.setMatrix(t,a(this.computedMatrix,r))};var p=[0,0,0];B.pan=function(t,e,i,n){p[0]=-(e||0),p[1]=-(i||0),p[2]=-(n||0),this.recalcMatrix(t);var r=this.computedInverse;g(r,r,p),this.setMatrix(t,a(r,r))},B.translate=function(t,e,i,n){p[0]=e||0,p[1]=i||0,p[2]=n||0,this.recalcMatrix(t);var r=this.computedMatrix;g(r,r,p),this.setMatrix(t,r)},B.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var i=0;i<16;++i)this._components.push(e[i])}},B.setDistance=function(t,e){this.computedRadius[0]=e},B.setDistanceLimits=function(t,e){var i=this._limits;i[0]=t,i[1]=e},B.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},3090:function(t,e,i){t.exports=function(t){var e=t.length;if(e<3){for(var i=new Array(e),r=0;r<e;++r)i[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:i}var a=new Array(e);for(r=0;r<e;++r)a[r]=r;a.sort((function(e,i){var n=t[e][0]-t[i][0];return n||t[e][1]-t[i][1]}));var s=[a[0],a[1]],o=[a[0],a[1]];for(r=2;r<e;++r){for(var l=a[r],c=t[l],g=s.length;g>1&&n(t[s[g-2]],t[s[g-1]],c)<=0;)g-=1,s.pop();for(s.push(l),g=o.length;g>1&&n(t[o[g-2]],t[o[g-1]],c)>=0;)g-=1,o.pop();o.push(l)}i=new Array(o.length+s.length-2);for(var u=0,d=(r=0,s.length);r<d;++r)i[u++]=s[r];for(var h=o.length-2;h>0;--h)i[u++]=o[h];return i};var n=i(3250)[3]},351:function(t,e,i){t.exports=function(t,e){e||(e=t,t=window);var i=0,r=0,a=0,s={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function l(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==s.alt,s.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==s.shift,s.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==s.control,s.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==s.meta,s.meta=!!t.metaKey),e}function c(t,o){var c=n.x(o),g=n.y(o);"buttons"in o&&(t=0|o.buttons),(t!==i||c!==r||g!==a||l(o))&&(i=0|t,r=c||0,a=g||0,e&&e(i,r,a,s))}function g(t){c(0,t)}function u(){(i||r||a||s.shift||s.alt||s.meta||s.control)&&(r=a=0,i=0,s.shift=s.alt=s.control=s.meta=!1,e&&e(0,0,0,s))}function d(t){l(t)&&e&&e(i,r,a,s)}function h(t){0===n.buttons(t)?c(0,t):c(i,t)}function B(t){c(i|n.buttons(t),t)}function p(t){c(i&~n.buttons(t),t)}function F(){o||(o=!0,t.addEventListener("mousemove",h),t.addEventListener("mousedown",B),t.addEventListener("mouseup",p),t.addEventListener("mouseleave",g),t.addEventListener("mouseenter",g),t.addEventListener("mouseout",g),t.addEventListener("mouseover",g),t.addEventListener("blur",u),t.addEventListener("keyup",d),t.addEventListener("keydown",d),t.addEventListener("keypress",d),t!==window&&(window.addEventListener("blur",u),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}F();var f={element:t};return Object.defineProperties(f,{enabled:{get:function(){return o},set:function(e){e?F():function(){if(!o)return;o=!1,t.removeEventListener("mousemove",h),t.removeEventListener("mousedown",B),t.removeEventListener("mouseup",p),t.removeEventListener("mouseleave",g),t.removeEventListener("mouseenter",g),t.removeEventListener("mouseout",g),t.removeEventListener("mouseover",g),t.removeEventListener("blur",u),t.removeEventListener("keyup",d),t.removeEventListener("keydown",d),t.removeEventListener("keypress",d),t!==window&&(window.removeEventListener("blur",u),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d))}()},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),f};var n=i(4687)},24:function(t){var e={left:0,top:0};t.exports=function(t,i,n){i=i||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r=t.clientX||0,a=t.clientY||0,s=(o=i,o===window||o===document||o===document.body?e:o.getBoundingClientRect());var o;return n[0]=r-s.left,n[1]=a-s.top,n}},4687:function(t,e){function i(t){return t.target||t.srcElement||window}e.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},e.element=i,e.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=i(t).getBoundingClientRect();return t.clientX-e.left}return 0},e.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=i(t).getBoundingClientRect();return t.clientY-e.top}return 0}},8512:function(t,e,i){var n=i(665);t.exports=function(t,e,i){"function"==typeof t&&(i=!!e,e=t,t=window);var r=n("ex",t),a=function(t){i&&t.preventDefault();var n=t.deltaX||0,a=t.deltaY||0,s=t.deltaZ||0,o=1;switch(t.deltaMode){case 1:o=r;break;case 2:o=window.innerHeight}if(a*=o,s*=o,(n*=o)||a||s)return e(n,a,s,t)};return t.addEventListener("wheel",a),a}},2640:function(t,e,i){var n=i(1888);t.exports=function(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var i=t.order;Array.isArray(i)||e("Must specify order");var a=t.arrayArguments||1;a<1&&e("Must have at least one array argument");var s=t.scalarArguments||0;s<0&&e("Scalar arg count must be > 0");"function"!=typeof t.vertex&&e("Must specify vertex creation function");"function"!=typeof t.cell&&e("Must specify cell creation function");"function"!=typeof t.phase&&e("Must specify phase function");for(var o=t.getters||[],l=new Array(a),c=0;c<a;++c)o.indexOf(c)>=0?l[c]=!0:l[c]=!1;return function(t,e,i,a,s,o){var l=[o,s].join(",");return(0,r[l])(t,e,i,n.mallocUint32,n.freeUint32)}(t.vertex,t.cell,t.phase,0,i,l)};var r={"false,0,1":function(t,e,i,n,r){return function(a,s,o,l){var c,g=0|a.shape[0],u=0|a.shape[1],d=a.data,h=0|a.offset,B=0|a.stride[0],p=0|a.stride[1],F=h,f=0|-B,Q=0,I=0|-p,U=0,b=-B-p|0,y=0,m=0|B,x=p-B*g|0,v=0,C=0,A=0,L=2*g|0,G=n(L),R=n(L),S=0,w=0,V=-1,E=-1,Z=0,N=0|-g,D=0|g,X=0,H=-g-1|0,W=g-1|0,k=0,M=0,T=0;for(v=0;v<g;++v)G[S++]=i(d[F],s,o,l),F+=m;if(F+=x,u>0){if(C=1,G[S++]=i(d[F],s,o,l),F+=m,g>0)for(v=1,c=d[F],w=G[S]=i(c,s,o,l),Z=G[S+V],X=G[S+N],k=G[S+H],w===Z&&w===X&&w===k||(Q=d[F+f],U=d[F+I],y=d[F+b],t(v,C,c,Q,U,y,w,Z,X,k,s,o,l),M=R[S]=A++),S+=1,F+=m,v=2;v<g;++v)c=d[F],w=G[S]=i(c,s,o,l),Z=G[S+V],X=G[S+N],k=G[S+H],w===Z&&w===X&&w===k||(Q=d[F+f],U=d[F+I],y=d[F+b],t(v,C,c,Q,U,y,w,Z,X,k,s,o,l),M=R[S]=A++,k!==Z&&e(R[S+V],M,y,Q,k,Z,s,o,l)),S+=1,F+=m;for(F+=x,S=0,T=V,V=E,E=T,T=N,N=D,D=T,T=H,H=W,W=T,C=2;C<u;++C){if(G[S++]=i(d[F],s,o,l),F+=m,g>0)for(v=1,c=d[F],w=G[S]=i(c,s,o,l),Z=G[S+V],X=G[S+N],k=G[S+H],w===Z&&w===X&&w===k||(Q=d[F+f],U=d[F+I],y=d[F+b],t(v,C,c,Q,U,y,w,Z,X,k,s,o,l),M=R[S]=A++,k!==X&&e(R[S+N],M,U,y,X,k,s,o,l)),S+=1,F+=m,v=2;v<g;++v)c=d[F],w=G[S]=i(c,s,o,l),Z=G[S+V],X=G[S+N],k=G[S+H],w===Z&&w===X&&w===k||(Q=d[F+f],U=d[F+I],y=d[F+b],t(v,C,c,Q,U,y,w,Z,X,k,s,o,l),M=R[S]=A++,k!==X&&e(R[S+N],M,U,y,X,k,s,o,l),k!==Z&&e(R[S+V],M,y,Q,k,Z,s,o,l)),S+=1,F+=m;1&C&&(S=0),T=V,V=E,E=T,T=N,N=D,D=T,T=H,H=W,W=T,F+=x}}r(R),r(G)}},"false,1,0":function(t,e,i,n,r){return function(a,s,o,l){var c,g=0|a.shape[0],u=0|a.shape[1],d=a.data,h=0|a.offset,B=0|a.stride[0],p=0|a.stride[1],F=h,f=0|-B,Q=0,I=0|-p,U=0,b=-B-p|0,y=0,m=0|p,x=B-p*u|0,v=0,C=0,A=0,L=2*u|0,G=n(L),R=n(L),S=0,w=0,V=-1,E=-1,Z=0,N=0|-u,D=0|u,X=0,H=-u-1|0,W=u-1|0,k=0,M=0,T=0;for(C=0;C<u;++C)G[S++]=i(d[F],s,o,l),F+=m;if(F+=x,g>0){if(v=1,G[S++]=i(d[F],s,o,l),F+=m,u>0)for(C=1,c=d[F],w=G[S]=i(c,s,o,l),X=G[S+N],Z=G[S+V],k=G[S+H],w===X&&w===Z&&w===k||(Q=d[F+f],U=d[F+I],y=d[F+b],t(v,C,c,Q,U,y,w,X,Z,k,s,o,l),M=R[S]=A++),S+=1,F+=m,C=2;C<u;++C)c=d[F],w=G[S]=i(c,s,o,l),X=G[S+N],Z=G[S+V],k=G[S+H],w===X&&w===Z&&w===k||(Q=d[F+f],U=d[F+I],y=d[F+b],t(v,C,c,Q,U,y,w,X,Z,k,s,o,l),M=R[S]=A++,k!==Z&&e(R[S+V],M,U,y,Z,k,s,o,l)),S+=1,F+=m;for(F+=x,S=0,T=N,N=D,D=T,T=V,V=E,E=T,T=H,H=W,W=T,v=2;v<g;++v){if(G[S++]=i(d[F],s,o,l),F+=m,u>0)for(C=1,c=d[F],w=G[S]=i(c,s,o,l),X=G[S+N],Z=G[S+V],k=G[S+H],w===X&&w===Z&&w===k||(Q=d[F+f],U=d[F+I],y=d[F+b],t(v,C,c,Q,U,y,w,X,Z,k,s,o,l),M=R[S]=A++,k!==X&&e(R[S+N],M,y,Q,k,X,s,o,l)),S+=1,F+=m,C=2;C<u;++C)c=d[F],w=G[S]=i(c,s,o,l),X=G[S+N],Z=G[S+V],k=G[S+H],w===X&&w===Z&&w===k||(Q=d[F+f],U=d[F+I],y=d[F+b],t(v,C,c,Q,U,y,w,X,Z,k,s,o,l),M=R[S]=A++,k!==Z&&e(R[S+V],M,U,y,Z,k,s,o,l),k!==X&&e(R[S+N],M,y,Q,k,X,s,o,l)),S+=1,F+=m;1&v&&(S=0),T=N,N=D,D=T,T=V,V=E,E=T,T=H,H=W,W=T,F+=x}}r(R),r(G)}}}},6199:function(t,e,i){var n=i(1338),r={zero:function(t,e,i,n){var r=t[0];n|=0;var a=0,s=i[0];for(a=0;a<r;++a)e[n]=0,n+=s},fdTemplate1:function(t,e,i,n,r,a,s){var o=t[0],l=i[0],c=-1*l,g=l;n|=0,s|=0;var u=0,d=l,h=a[0];for(u=0;u<o;++u)r[s]=.5*(e[n+c]-e[n+g]),n+=d,s+=h},fdTemplate2:function(t,e,i,n,r,a,s,o,l,c){var g=t[0],u=t[1],d=i[0],h=i[1],B=a[0],p=a[1],F=l[0],f=l[1],Q=-1*d,I=d,U=-1*h,b=h;n|=0,s|=0,c|=0;var y=0,m=0,x=h,v=d-u*h,C=p,A=B-u*p,L=f,G=F-u*f;for(m=0;m<g;++m){for(y=0;y<u;++y)r[s]=.5*(e[n+Q]-e[n+I]),o[c]=.5*(e[n+U]-e[n+b]),n+=x,s+=C,c+=L;n+=v,s+=A,c+=G}}},a={cdiff:function(t){var e={};return function(i,n,r){var a=i.dtype,s=i.order,o=n.dtype,l=n.order,c=r.dtype,g=r.order,u=[a,s.join(),o,l.join(),c,g.join()].join(),d=e[u];return d||(e[u]=d=t([a,s,o,l,c,g])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset)}},zero:function(t){var e={};return function(i){var n=i.dtype,r=i.order,a=[n,r.join()].join(),s=e[a];return s||(e[a]=s=t([n,r])),s(i.shape.slice(0),i.data,i.stride,0|i.offset)}},fdTemplate1:function(t){var e={};return function(i,n){var r=i.dtype,a=i.order,s=n.dtype,o=n.order,l=[r,a.join(),s,o.join()].join(),c=e[l];return c||(e[l]=c=t([r,a,s,o])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset)}},fdTemplate2:function(t){var e={};return function(i,n,r){var a=i.dtype,s=i.order,o=n.dtype,l=n.order,c=r.dtype,g=r.order,u=[a,s.join(),o,l.join(),c,g.join()].join(),d=e[u];return d||(e[u]=d=t([a,s,o,l,c,g])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset)}}};function s(t){return(0,a[t.funcName])(o.bind(void 0,t))}function o(t){return r[t.funcName]}function l(t){return s({funcName:t.funcName})}var c={},g={},u=l({funcName:"cdiff"}),d=l({funcName:"zero"});function h(t){return t in c?c[t]:c[t]=l({funcName:"fdTemplate"+t})}function B(t,e,i,n){return function(t,r){var a=r.shape.slice();return a[0]>2&&a[1]>2&&n(r.pick(-1,-1).lo(1,1).hi(a[0]-2,a[1]-2),t.pick(-1,-1,0).lo(1,1).hi(a[0]-2,a[1]-2),t.pick(-1,-1,1).lo(1,1).hi(a[0]-2,a[1]-2)),a[1]>2&&(i(r.pick(0,-1).lo(1).hi(a[1]-2),t.pick(0,-1,1).lo(1).hi(a[1]-2)),e(t.pick(0,-1,0).lo(1).hi(a[1]-2))),a[1]>2&&(i(r.pick(a[0]-1,-1).lo(1).hi(a[1]-2),t.pick(a[0]-1,-1,1).lo(1).hi(a[1]-2)),e(t.pick(a[0]-1,-1,0).lo(1).hi(a[1]-2))),a[0]>2&&(i(r.pick(-1,0).lo(1).hi(a[0]-2),t.pick(-1,0,0).lo(1).hi(a[0]-2)),e(t.pick(-1,0,1).lo(1).hi(a[0]-2))),a[0]>2&&(i(r.pick(-1,a[1]-1).lo(1).hi(a[0]-2),t.pick(-1,a[1]-1,0).lo(1).hi(a[0]-2)),e(t.pick(-1,a[1]-1,1).lo(1).hi(a[0]-2))),t.set(0,0,0,0),t.set(0,0,1,0),t.set(a[0]-1,0,0,0),t.set(a[0]-1,0,1,0),t.set(0,a[1]-1,0,0),t.set(0,a[1]-1,1,0),t.set(a[0]-1,a[1]-1,0,0),t.set(a[0]-1,a[1]-1,1,0),t}}t.exports=function(t,e,i){if(Array.isArray(i)||(i=n(e.dimension,"string"==typeof i?i:"clamp")),0===e.size)return t;if(0===e.dimension)return t.set(0),t;var r=function(t){var e=t.join();if(a=g[e])return a;for(var i=t.length,n=[u,d],r=1;r<=i;++r)n.push(h(r));var a=B.apply(void 0,n);return g[e]=a,a}(i);return r(t,e)}},4317:function(t){function e(t,e){var i=Math.floor(e),n=e-i,r=0<=i&&i<t.shape[0],a=0<=i+1&&i+1<t.shape[0];return(1-n)*(r?+t.get(i):0)+n*(a?+t.get(i+1):0)}function i(t,e,i){var n=Math.floor(e),r=e-n,a=0<=n&&n<t.shape[0],s=0<=n+1&&n+1<t.shape[0],o=Math.floor(i),l=i-o,c=0<=o&&o<t.shape[1],g=0<=o+1&&o+1<t.shape[1],u=a&&c?t.get(n,o):0,d=a&&g?t.get(n,o+1):0;return(1-l)*((1-r)*u+r*(s&&c?t.get(n+1,o):0))+l*((1-r)*d+r*(s&&g?t.get(n+1,o+1):0))}function n(t,e,i,n){var r=Math.floor(e),a=e-r,s=0<=r&&r<t.shape[0],o=0<=r+1&&r+1<t.shape[0],l=Math.floor(i),c=i-l,g=0<=l&&l<t.shape[1],u=0<=l+1&&l+1<t.shape[1],d=Math.floor(n),h=n-d,B=0<=d&&d<t.shape[2],p=0<=d+1&&d+1<t.shape[2],F=s&&g&&B?t.get(r,l,d):0,f=s&&u&&B?t.get(r,l+1,d):0,Q=o&&g&&B?t.get(r+1,l,d):0,I=o&&u&&B?t.get(r+1,l+1,d):0,U=s&&g&&p?t.get(r,l,d+1):0,b=s&&u&&p?t.get(r,l+1,d+1):0;return(1-h)*((1-c)*((1-a)*F+a*Q)+c*((1-a)*f+a*I))+h*((1-c)*((1-a)*U+a*(o&&g&&p?t.get(r+1,l,d+1):0))+c*((1-a)*b+a*(o&&u&&p?t.get(r+1,l+1,d+1):0)))}function r(t){var e,i,n=0|t.shape.length,r=new Array(n),a=new Array(n),s=new Array(n),o=new Array(n);for(e=0;e<n;++e)i=+arguments[e+1],r[e]=Math.floor(i),a[e]=i-r[e],s[e]=0<=r[e]&&r[e]<t.shape[e],o[e]=0<=r[e]+1&&r[e]+1<t.shape[e];var l,c,g,u=0;t:for(e=0;e<1<<n;++e){for(c=1,g=t.offset,l=0;l<n;++l)if(e&1<<l){if(!o[l])continue t;c*=a[l],g+=t.stride[l]*(r[l]+1)}else{if(!s[l])continue t;c*=1-a[l],g+=t.stride[l]*r[l]}u+=c*t.data[g]}return u}t.exports=function(t,a,s,o){switch(t.shape.length){case 0:return 0;case 1:return e(t,a);case 2:return i(t,a,s);case 3:return n(t,a,s,o);default:return r.apply(void 0,arguments)}},t.exports.d1=e,t.exports.d2=i,t.exports.d3=n},5298:function(t,e){var i={"float64,2,1,0":function(){return function(t,e,i,n,r){var a=t[0],s=t[1],o=t[2],l=i[0],c=i[1],g=i[2];n|=0;var u=0,d=0,h=0,B=g,p=c-o*g,F=l-s*c;for(h=0;h<a;++h){for(d=0;d<s;++d){for(u=0;u<o;++u)e[n]/=r,n+=B;n+=p}n+=F}}},"uint8,2,0,1,float64,2,1,0":function(){return function(t,e,i,n,r,a,s,o){for(var l=t[0],c=t[1],g=t[2],u=i[0],d=i[1],h=i[2],B=a[0],p=a[1],F=a[2],f=n|=0,Q=s|=0,I=0|t[0];I>0;){I<64?(l=I,I=0):(l=64,I-=64);for(var U=0|t[1];U>0;){U<64?(c=U,U=0):(c=64,U-=64),n=f+I*u+U*d,s=Q+I*B+U*p;var b=0,y=0,m=0,x=h,v=u-g*h,C=d-l*u,A=F,L=B-g*F,G=p-l*B;for(m=0;m<c;++m){for(y=0;y<l;++y){for(b=0;b<g;++b)e[n]=r[s]*o,n+=x,s+=A;n+=v,s+=L}n+=C,s+=G}}}}},"float32,1,0,float32,1,0":function(){return function(t,e,i,n,r,a,s){var o=t[0],l=t[1],c=i[0],g=i[1],u=a[0],d=a[1];n|=0,s|=0;var h=0,B=0,p=g,F=c-l*g,f=d,Q=u-l*d;for(B=0;B<o;++B){for(h=0;h<l;++h)e[n]=r[s],n+=p,s+=f;n+=F,s+=Q}}},"float32,1,0,float32,0,1":function(){return function(t,e,i,n,r,a,s){for(var o=t[0],l=t[1],c=i[0],g=i[1],u=a[0],d=a[1],h=n|=0,B=s|=0,p=0|t[1];p>0;){p<64?(l=p,p=0):(l=64,p-=64);for(var F=0|t[0];F>0;){F<64?(o=F,F=0):(o=64,F-=64),n=h+p*g+F*c,s=B+p*d+F*u;var f=0,Q=0,I=g,U=c-l*g,b=d,y=u-l*d;for(Q=0;Q<o;++Q){for(f=0;f<l;++f)e[n]=r[s],n+=I,s+=b;n+=U,s+=y}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(t,e,i,n,r,a,s){for(var o=t[0],l=t[1],c=t[2],g=i[0],u=i[1],d=i[2],h=a[0],B=a[1],p=a[2],F=n|=0,f=s|=0,Q=0|t[2];Q>0;){Q<64?(c=Q,Q=0):(c=64,Q-=64);for(var I=0|t[0];I>0;){I<64?(o=I,I=0):(o=64,I-=64);for(var U=0|t[1];U>0;){U<64?(l=U,U=0):(l=64,U-=64),n=F+Q*d+I*g+U*u,s=f+Q*p+I*h+U*B;var b=0,y=0,m=0,x=d,v=g-c*d,C=u-o*g,A=p,L=h-c*p,G=B-o*h;for(m=0;m<l;++m){for(y=0;y<o;++y){for(b=0;b<c;++b)e[n]=r[s],n+=x,s+=A;n+=v,s+=L}n+=C,s+=G}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(t,e,i,n,r,a,s){var o=t[0],l=t[1],c=t[2],g=i[0],u=i[1],d=i[2],h=a[0],B=a[1],p=a[2];n|=0,s|=0;var F=0,f=0,Q=0,I=d,U=g-c*d,b=u-o*g,y=p,m=h-c*p,x=B-o*h;for(Q=0;Q<l;++Q){for(f=0;f<o;++f){for(F=0;F<c;++F)e[n]=r[s],n+=I,s+=y;n+=U,s+=m}n+=b,s+=x}}}};var n=function(t,e){var n=e.join(",");return(0,i[n])()},r={mul:function(t){var e={};return function(i,n,r){var a=i.dtype,s=i.order,o=n.dtype,l=n.order,c=r.dtype,g=r.order,u=[a,s.join(),o,l.join(),c,g.join()].join(),d=e[u];return d||(e[u]=d=t([a,s,o,l,c,g])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset)}},muls:function(t){var e={};return function(i,n,r){var a=i.dtype,s=i.order,o=n.dtype,l=n.order,c=[a,s.join(),o,l.join()].join(),g=e[c];return g||(e[c]=g=t([a,s,o,l])),g(i.shape.slice(0),i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset,r)}},mulseq:function(t){var e={};return function(i,n){var r=i.dtype,a=i.order,s=[r,a.join()].join(),o=e[s];return o||(e[s]=o=t([r,a])),o(i.shape.slice(0),i.data,i.stride,0|i.offset,n)}},div:function(t){var e={};return function(i,n,r){var a=i.dtype,s=i.order,o=n.dtype,l=n.order,c=r.dtype,g=r.order,u=[a,s.join(),o,l.join(),c,g.join()].join(),d=e[u];return d||(e[u]=d=t([a,s,o,l,c,g])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset,r.data,r.stride,0|r.offset)}},divs:function(t){var e={};return function(i,n,r){var a=i.dtype,s=i.order,o=n.dtype,l=n.order,c=[a,s.join(),o,l.join()].join(),g=e[c];return g||(e[c]=g=t([a,s,o,l])),g(i.shape.slice(0),i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset,r)}},divseq:function(t){var e={};return function(i,n){var r=i.dtype,a=i.order,s=[r,a.join()].join(),o=e[s];return o||(e[s]=o=t([r,a])),o(i.shape.slice(0),i.data,i.stride,0|i.offset,n)}},assign:function(t){var e={};return function(i,n){var r=i.dtype,a=i.order,s=n.dtype,o=n.order,l=[r,a.join(),s,o.join()].join(),c=e[l];return c||(e[l]=c=t([r,a,s,o])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset)}}};function a(t){return e={funcName:t.funcName},(0,r[e.funcName])(n.bind(void 0,e));var e}var s={mul:"*",div:"/"};!function(){for(var t in s)e[t]=a({funcName:t}),e[t+"s"]=a({funcName:t+"s"}),e[t+"seq"]=a({funcName:t+"seq"})}(),e.assign=a({funcName:"assign"})},9994:function(t,e,i){var n=i(9618),r=i(8277);t.exports=function(t,e){for(var i=[],a=t,s=1;Array.isArray(a);)i.push(a.length),s*=a.length,a=a[0];return 0===i.length?n():(e||(e=n(new Float64Array(s),i)),r(e,t),e)}},8277:function(t){var e,i=function(){return function(t,e,i,n,r){var a=t[0],s=t[1],o=t[2],l=i[0],c=i[1],g=i[2],u=[0,0,0];n|=0;var d=0,h=0,B=0,p=g,F=c-o*g,f=l-s*c;for(B=0;B<a;++B){for(h=0;h<s;++h){for(d=0;d<o;++d){var Q,I=r;for(Q=0;Q<u.length-1;++Q)I=I[u[Q]];e[n]=I[u[u.length-1]],n+=p,++u[2]}n+=F,u[2]-=o,++u[1]}n+=f,u[1]-=s,++u[0]}}};t.exports=(e={funcName:{funcName:"convert"}.funcName},function(t){var e={};return function(i,n){var r=i.dtype,a=i.order,s=[r,a.join()].join(),o=e[s];return o||(e[s]=o=t([r,a])),o(i.shape.slice(0),i.data,i.stride,0|i.offset,n)}}(i.bind(void 0,e)))},7640:function(t,e,i){var n=i(1888);function r(t){return"uint32"===t?[n.mallocUint32,n.freeUint32]:null}var a={"uint32,1,0":function(t,e){return function(i,n,r,a,s,o,l,c,g,u,d){var h,B,p,F,f,Q,I,U,b=i*s+a,y=t(c);for(h=i+1;h<=n;++h){for(B=h,p=b+=s,f=0,Q=b,F=0;F<c;++F)y[f++]=r[Q],Q+=g;t:for(;B-- >i;){f=0,Q=p-s;e:for(F=0;F<c;++F){if((I=r[Q])<(U=y[f]))break t;if(I>U)break e;Q+=u,f+=d}for(f=p,Q=p-s,F=0;F<c;++F)r[f]=r[Q],f+=g,Q+=g;p-=s}for(f=p,Q=0,F=0;F<c;++F)r[f]=y[Q++],f+=g}e(y)}}};var s={"uint32,1,0":function(t,e,i){return function n(r,a,s,o,l,c,g,u,d,h,B){var p,F,f,Q,I,U,b,y,m,x,v,C,A,L,G,R,S,w,V,E,Z,N,D,X,H,W=(a-r+1)/6|0,k=r+W,M=a-W,T=r+a>>1,Y=T-W,J=T+W,_=k,z=Y,O=T,K=J,P=M,j=r+1,q=a-1,$=!0,tt=0,et=0,it=0,nt=u,rt=e(nt),at=e(nt);v=l*_,C=l*z,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=_,_=z,z=F;break t}if(it<0)break t;H+=h}v=l*K,C=l*P,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=K,K=P,P=F;break t}if(it<0)break t;H+=h}v=l*_,C=l*O,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=_,_=O,O=F;break t}if(it<0)break t;H+=h}v=l*z,C=l*O,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=z,z=O,O=F;break t}if(it<0)break t;H+=h}v=l*_,C=l*K,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=_,_=K,K=F;break t}if(it<0)break t;H+=h}v=l*O,C=l*K,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=O,O=K,K=F;break t}if(it<0)break t;H+=h}v=l*z,C=l*P,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=z,z=P,P=F;break t}if(it<0)break t;H+=h}v=l*z,C=l*O,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=z,z=O,O=F;break t}if(it<0)break t;H+=h}v=l*K,C=l*P,H=o;t:for(x=0;x<u;++x){if(y=C+H,(it=s[b=v+H]-s[y])>0){F=K,K=P,P=F;break t}if(it<0)break t;H+=h}for(v=l*_,C=l*z,A=l*O,L=l*K,G=l*P,R=l*k,S=l*T,w=l*M,X=0,H=o,x=0;x<u;++x)b=v+H,y=C+H,m=A+H,V=L+H,E=G+H,Z=R+H,N=S+H,D=w+H,rt[X]=s[y],at[X]=s[V],$=$&&rt[X]===at[X],f=s[b],Q=s[m],I=s[E],s[Z]=f,s[N]=Q,s[D]=I,++X,H+=d;for(v=l*Y,C=l*r,H=o,x=0;x<u;++x)y=C+H,s[b=v+H]=s[y],H+=d;for(v=l*J,C=l*a,H=o,x=0;x<u;++x)y=C+H,s[b=v+H]=s[y],H+=d;if($)for(U=j;U<=q;++U){b=o+U*l,X=0;t:for(x=0;x<u&&0===(it=s[b]-rt[X]);++x)X+=B,b+=h;if(0!==it)if(it<0){if(U!==j)for(v=l*U,C=l*j,H=o,x=0;x<u;++x)y=C+H,p=s[b=v+H],s[b]=s[y],s[y]=p,H+=d;++j}else for(;;){b=o+q*l,X=0;t:for(x=0;x<u&&0===(it=s[b]-rt[X]);++x)X+=B,b+=h;if(!(it>0)){if(it<0){for(v=l*U,C=l*j,A=l*q,H=o,x=0;x<u;++x)y=C+H,m=A+H,p=s[b=v+H],s[b]=s[y],s[y]=s[m],s[m]=p,H+=d;++j,--q;break}for(v=l*U,C=l*q,H=o,x=0;x<u;++x)y=C+H,p=s[b=v+H],s[b]=s[y],s[y]=p,H+=d;--q;break}q--}}else for(U=j;U<=q;++U){b=o+U*l,X=0;t:for(x=0;x<u&&0===(tt=s[b]-rt[X]);++x)X+=B,b+=h;if(tt<0){if(U!==j)for(v=l*U,C=l*j,H=o,x=0;x<u;++x)y=C+H,p=s[b=v+H],s[b]=s[y],s[y]=p,H+=d;++j}else{b=o+U*l,X=0;t:for(x=0;x<u&&0===(et=s[b]-at[X]);++x)X+=B,b+=h;if(et>0)for(;;){b=o+q*l,X=0;t:for(x=0;x<u&&0===(it=s[b]-at[X]);++x)X+=B,b+=h;if(!(it>0)){b=o+q*l,X=0;t:for(x=0;x<u&&0===(it=s[b]-rt[X]);++x)X+=B,b+=h;if(it<0){for(v=l*U,C=l*j,A=l*q,H=o,x=0;x<u;++x)y=C+H,m=A+H,p=s[b=v+H],s[b]=s[y],s[y]=s[m],s[m]=p,H+=d;++j,--q}else{for(v=l*U,C=l*q,H=o,x=0;x<u;++x)y=C+H,p=s[b=v+H],s[b]=s[y],s[y]=p,H+=d;--q}break}if(--q<U)break}}}for(v=l*r,C=l*(j-1),X=0,H=o,x=0;x<u;++x)y=C+H,s[b=v+H]=s[y],s[y]=rt[X],++X,H+=d;for(v=l*a,C=l*(q+1),X=0,H=o,x=0;x<u;++x)y=C+H,s[b=v+H]=s[y],s[y]=at[X],++X,H+=d;if(j-2-r<=32?t(r,j-2,s,o,l,c,g,u,d,h,B):n(r,j-2,s,o,l,c,g,u,d,h,B),a-(q+2)<=32?t(q+2,a,s,o,l,c,g,u,d,h,B):n(q+2,a,s,o,l,c,g,u,d,h,B),$)return i(rt),void i(at);if(j<k&&q>M){t:for(;;){for(b=o+j*l,X=0,H=o,x=0;x<u;++x){if(s[b]!==rt[X])break t;++X,b+=d}++j}t:for(;;){for(b=o+q*l,X=0,H=o,x=0;x<u;++x){if(s[b]!==at[X])break t;++X,b+=d}--q}for(U=j;U<=q;++U){b=o+U*l,X=0;t:for(x=0;x<u&&0===(tt=s[b]-rt[X]);++x)X+=B,b+=h;if(0===tt){if(U!==j)for(v=l*U,C=l*j,H=o,x=0;x<u;++x)y=C+H,p=s[b=v+H],s[b]=s[y],s[y]=p,H+=d;++j}else{b=o+U*l,X=0;t:for(x=0;x<u&&0===(et=s[b]-at[X]);++x)X+=B,b+=h;if(0===et)for(;;){b=o+q*l,X=0;t:for(x=0;x<u&&0===(it=s[b]-at[X]);++x)X+=B,b+=h;if(0!==it){b=o+q*l,X=0;t:for(x=0;x<u&&0===(it=s[b]-rt[X]);++x)X+=B,b+=h;if(it<0){for(v=l*U,C=l*j,A=l*q,H=o,x=0;x<u;++x)y=C+H,m=A+H,p=s[b=v+H],s[b]=s[y],s[y]=s[m],s[m]=p,H+=d;++j,--q}else{for(v=l*U,C=l*q,H=o,x=0;x<u;++x)y=C+H,p=s[b=v+H],s[b]=s[y],s[y]=p,H+=d;--q}break}if(--q<U)break}}}}i(rt),i(at),q-j<=32?t(j,q,s,o,l,c,g,u,d,h,B):n(j,q,s,o,l,c,g,u,d,h,B)}}};var o={"uint32,1,0":function(t,e){return function(i){var n=i.data,r=0|i.offset,a=i.shape,s=i.stride,o=0|s[0],l=0|a[0],c=0|s[1],g=0|a[1],u=c,d=c;l<=32?t(0,l-1,n,r,o,c,l,g,u,d,1):e(0,l-1,n,r,o,c,l,g,u,d,1)}}};t.exports=function(t,e){var i=[e,t].join(","),n=o[i],l=function(t,e){var i=r(e),n=[e,t].join(","),s=a[n];return i?s(i[0],i[1]):s()}(t,e),c=function(t,e,i){var n=r(e),a=[e,t].join(","),o=s[a];return t.length>1&&n?o(i,n[0],n[1]):o(i)}(t,e,l);return n(l,c)}},446:function(t,e,i){var n=i(7640),r={};t.exports=function(t){var e=t.order,i=t.dtype,a=[e,i].join(":"),s=r[a];return s||(r[a]=s=n(e,i)),s(t),t}},9618:function(t,e,i){var n=i(7163),r="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,i=new Array(e.length);for(t=0;t<i.length;++t)i[t]=[Math.abs(e[t]),t];i.sort(a);var n=new Array(i.length);for(t=0;t<n.length;++t)n[t]=i[t][1];return n}var o={T:function(t){function e(t){this.data=t}var i=e.prototype;return i.dtype=t,i.index=function(){return-1},i.size=0,i.dimension=-1,i.shape=i.stride=i.order=[],i.lo=i.hi=i.transpose=i.step=function(){return new e(this.data)},i.get=i.set=function(){},i.pick=function(){return null},function(t){return new e(t)}},0:function(t,e){function i(t,e){this.data=t,this.offset=e}var n=i.prototype;return n.dtype=t,n.index=function(){return this.offset},n.dimension=0,n.size=1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new i(this.data,this.offset)},n.pick=function(){return e(this.data)},n.valueOf=n.get=function(){return"generic"===t?this.data.get(this.offset):this.data[this.offset]},n.set=function(e){return"generic"===t?this.data.set(this.offset,e):this.data[this.offset]=e},function(t,e,n,r){return new i(t,r)}},1:function(t,e,i){function n(t,e,i,n){this.data=t,this.shape=[e],this.stride=[i],this.offset=0|n}var r=n.prototype;return r.dtype=t,r.dimension=1,Object.defineProperty(r,"size",{get:function(){return this.shape[0]}}),r.order=[0],r.set=function(e,i){return"generic"===t?this.data.set(this.offset+this.stride[0]*e,i):this.data[this.offset+this.stride[0]*e]=i},r.get=function(e){return"generic"===t?this.data.get(this.offset+this.stride[0]*e):this.data[this.offset+this.stride[0]*e]},r.index=function(t){return this.offset+this.stride[0]*t},r.hi=function(t){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,this.stride[0],this.offset)},r.lo=function(t){var e=this.offset,i=0,r=this.shape[0],a=this.stride[0];return"number"==typeof t&&t>=0&&(e+=a*(i=0|t),r-=i),new n(this.data,r,a,e)},r.step=function(t){var e=this.shape[0],i=this.stride[0],r=this.offset,a=0,s=Math.ceil;return"number"==typeof t&&((a=0|t)<0?(r+=i*(e-1),e=s(-e/a)):e=s(e/a),i*=a),new n(this.data,e,i,r)},r.transpose=function(t){t=void 0===t?0:0|t;var e=this.shape,i=this.stride;return new n(this.data,e[t],i[t],this.offset)},r.pick=function(t){var i=[],n=[],r=this.offset;return"number"==typeof t&&t>=0?r=r+this.stride[0]*t|0:(i.push(this.shape[0]),n.push(this.stride[0])),(0,e[i.length+1])(this.data,i,n,r)},function(t,e,i,r){return new n(t,e[0],i[0],r)}},2:function(t,e,i){function n(t,e,i,n,r,a){this.data=t,this.shape=[e,i],this.stride=[n,r],this.offset=0|a}var r=n.prototype;return r.dtype=t,r.dimension=2,Object.defineProperty(r,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(r,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),r.set=function(e,i,n){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*i,n):this.data[this.offset+this.stride[0]*e+this.stride[1]*i]=n},r.get=function(e,i){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*i):this.data[this.offset+this.stride[0]*e+this.stride[1]*i]},r.index=function(t,e){return this.offset+this.stride[0]*t+this.stride[1]*e},r.hi=function(t,e){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,this.stride[0],this.stride[1],this.offset)},r.lo=function(t,e){var i=this.offset,r=0,a=this.shape[0],s=this.shape[1],o=this.stride[0],l=this.stride[1];return"number"==typeof t&&t>=0&&(i+=o*(r=0|t),a-=r),"number"==typeof e&&e>=0&&(i+=l*(r=0|e),s-=r),new n(this.data,a,s,o,l,i)},r.step=function(t,e){var i=this.shape[0],r=this.shape[1],a=this.stride[0],s=this.stride[1],o=this.offset,l=0,c=Math.ceil;return"number"==typeof t&&((l=0|t)<0?(o+=a*(i-1),i=c(-i/l)):i=c(i/l),a*=l),"number"==typeof e&&((l=0|e)<0?(o+=s*(r-1),r=c(-r/l)):r=c(r/l),s*=l),new n(this.data,i,r,a,s,o)},r.transpose=function(t,e){t=void 0===t?0:0|t,e=void 0===e?1:0|e;var i=this.shape,r=this.stride;return new n(this.data,i[t],i[e],r[t],r[e],this.offset)},r.pick=function(t,i){var n=[],r=[],a=this.offset;return"number"==typeof t&&t>=0?a=a+this.stride[0]*t|0:(n.push(this.shape[0]),r.push(this.stride[0])),"number"==typeof i&&i>=0?a=a+this.stride[1]*i|0:(n.push(this.shape[1]),r.push(this.stride[1])),(0,e[n.length+1])(this.data,n,r,a)},function(t,e,i,r){return new n(t,e[0],e[1],i[0],i[1],r)}},3:function(t,e,i){function n(t,e,i,n,r,a,s,o){this.data=t,this.shape=[e,i,n],this.stride=[r,a,s],this.offset=0|o}var r=n.prototype;return r.dtype=t,r.dimension=3,Object.defineProperty(r,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(r,"order",{get:function(){var t=Math.abs(this.stride[0]),e=Math.abs(this.stride[1]),i=Math.abs(this.stride[2]);return t>e?e>i?[2,1,0]:t>i?[1,2,0]:[1,0,2]:t>i?[2,0,1]:i>e?[0,1,2]:[0,2,1]}}),r.set=function(e,i,n,r){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n,r):this.data[this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n]=r},r.get=function(e,i,n){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n):this.data[this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n]},r.index=function(t,e,i){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*i},r.hi=function(t,e,i){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof i||i<0?this.shape[2]:0|i,this.stride[0],this.stride[1],this.stride[2],this.offset)},r.lo=function(t,e,i){var r=this.offset,a=0,s=this.shape[0],o=this.shape[1],l=this.shape[2],c=this.stride[0],g=this.stride[1],u=this.stride[2];return"number"==typeof t&&t>=0&&(r+=c*(a=0|t),s-=a),"number"==typeof e&&e>=0&&(r+=g*(a=0|e),o-=a),"number"==typeof i&&i>=0&&(r+=u*(a=0|i),l-=a),new n(this.data,s,o,l,c,g,u,r)},r.step=function(t,e,i){var r=this.shape[0],a=this.shape[1],s=this.shape[2],o=this.stride[0],l=this.stride[1],c=this.stride[2],g=this.offset,u=0,d=Math.ceil;return"number"==typeof t&&((u=0|t)<0?(g+=o*(r-1),r=d(-r/u)):r=d(r/u),o*=u),"number"==typeof e&&((u=0|e)<0?(g+=l*(a-1),a=d(-a/u)):a=d(a/u),l*=u),"number"==typeof i&&((u=0|i)<0?(g+=c*(s-1),s=d(-s/u)):s=d(s/u),c*=u),new n(this.data,r,a,s,o,l,c,g)},r.transpose=function(t,e,i){t=void 0===t?0:0|t,e=void 0===e?1:0|e,i=void 0===i?2:0|i;var r=this.shape,a=this.stride;return new n(this.data,r[t],r[e],r[i],a[t],a[e],a[i],this.offset)},r.pick=function(t,i,n){var r=[],a=[],s=this.offset;return"number"==typeof t&&t>=0?s=s+this.stride[0]*t|0:(r.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof i&&i>=0?s=s+this.stride[1]*i|0:(r.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof n&&n>=0?s=s+this.stride[2]*n|0:(r.push(this.shape[2]),a.push(this.stride[2])),(0,e[r.length+1])(this.data,r,a,s)},function(t,e,i,r){return new n(t,e[0],e[1],e[2],i[0],i[1],i[2],r)}},4:function(t,e,i){function n(t,e,i,n,r,a,s,o,l,c){this.data=t,this.shape=[e,i,n,r],this.stride=[a,s,o,l],this.offset=0|c}var r=n.prototype;return r.dtype=t,r.dimension=4,Object.defineProperty(r,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(r,"order",{get:i}),r.set=function(e,i,n,r,a){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n+this.stride[3]*r,a):this.data[this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n+this.stride[3]*r]=a},r.get=function(e,i,n,r){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n+this.stride[3]*r):this.data[this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n+this.stride[3]*r]},r.index=function(t,e,i,n){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*i+this.stride[3]*n},r.hi=function(t,e,i,r){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof i||i<0?this.shape[2]:0|i,"number"!=typeof r||r<0?this.shape[3]:0|r,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},r.lo=function(t,e,i,r){var a=this.offset,s=0,o=this.shape[0],l=this.shape[1],c=this.shape[2],g=this.shape[3],u=this.stride[0],d=this.stride[1],h=this.stride[2],B=this.stride[3];return"number"==typeof t&&t>=0&&(a+=u*(s=0|t),o-=s),"number"==typeof e&&e>=0&&(a+=d*(s=0|e),l-=s),"number"==typeof i&&i>=0&&(a+=h*(s=0|i),c-=s),"number"==typeof r&&r>=0&&(a+=B*(s=0|r),g-=s),new n(this.data,o,l,c,g,u,d,h,B,a)},r.step=function(t,e,i,r){var a=this.shape[0],s=this.shape[1],o=this.shape[2],l=this.shape[3],c=this.stride[0],g=this.stride[1],u=this.stride[2],d=this.stride[3],h=this.offset,B=0,p=Math.ceil;return"number"==typeof t&&((B=0|t)<0?(h+=c*(a-1),a=p(-a/B)):a=p(a/B),c*=B),"number"==typeof e&&((B=0|e)<0?(h+=g*(s-1),s=p(-s/B)):s=p(s/B),g*=B),"number"==typeof i&&((B=0|i)<0?(h+=u*(o-1),o=p(-o/B)):o=p(o/B),u*=B),"number"==typeof r&&((B=0|r)<0?(h+=d*(l-1),l=p(-l/B)):l=p(l/B),d*=B),new n(this.data,a,s,o,l,c,g,u,d,h)},r.transpose=function(t,e,i,r){t=void 0===t?0:0|t,e=void 0===e?1:0|e,i=void 0===i?2:0|i,r=void 0===r?3:0|r;var a=this.shape,s=this.stride;return new n(this.data,a[t],a[e],a[i],a[r],s[t],s[e],s[i],s[r],this.offset)},r.pick=function(t,i,n,r){var a=[],s=[],o=this.offset;return"number"==typeof t&&t>=0?o=o+this.stride[0]*t|0:(a.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof i&&i>=0?o=o+this.stride[1]*i|0:(a.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof n&&n>=0?o=o+this.stride[2]*n|0:(a.push(this.shape[2]),s.push(this.stride[2])),"number"==typeof r&&r>=0?o=o+this.stride[3]*r|0:(a.push(this.shape[3]),s.push(this.stride[3])),(0,e[a.length+1])(this.data,a,s,o)},function(t,e,i,r){return new n(t,e[0],e[1],e[2],e[3],i[0],i[1],i[2],i[3],r)}},5:function(t,e,i){function n(t,e,i,n,r,a,s,o,l,c,g,u){this.data=t,this.shape=[e,i,n,r,a],this.stride=[s,o,l,c,g],this.offset=0|u}var r=n.prototype;return r.dtype=t,r.dimension=5,Object.defineProperty(r,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(r,"order",{get:i}),r.set=function(e,i,n,r,a,s){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n+this.stride[3]*r+this.stride[4]*a,s):this.data[this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n+this.stride[3]*r+this.stride[4]*a]=s},r.get=function(e,i,n,r,a){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n+this.stride[3]*r+this.stride[4]*a):this.data[this.offset+this.stride[0]*e+this.stride[1]*i+this.stride[2]*n+this.stride[3]*r+this.stride[4]*a]},r.index=function(t,e,i,n,r){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*i+this.stride[3]*n+this.stride[4]*r},r.hi=function(t,e,i,r,a){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof i||i<0?this.shape[2]:0|i,"number"!=typeof r||r<0?this.shape[3]:0|r,"number"!=typeof a||a<0?this.shape[4]:0|a,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},r.lo=function(t,e,i,r,a){var s=this.offset,o=0,l=this.shape[0],c=this.shape[1],g=this.shape[2],u=this.shape[3],d=this.shape[4],h=this.stride[0],B=this.stride[1],p=this.stride[2],F=this.stride[3],f=this.stride[4];return"number"==typeof t&&t>=0&&(s+=h*(o=0|t),l-=o),"number"==typeof e&&e>=0&&(s+=B*(o=0|e),c-=o),"number"==typeof i&&i>=0&&(s+=p*(o=0|i),g-=o),"number"==typeof r&&r>=0&&(s+=F*(o=0|r),u-=o),"number"==typeof a&&a>=0&&(s+=f*(o=0|a),d-=o),new n(this.data,l,c,g,u,d,h,B,p,F,f,s)},r.step=function(t,e,i,r,a){var s=this.shape[0],o=this.shape[1],l=this.shape[2],c=this.shape[3],g=this.shape[4],u=this.stride[0],d=this.stride[1],h=this.stride[2],B=this.stride[3],p=this.stride[4],F=this.offset,f=0,Q=Math.ceil;return"number"==typeof t&&((f=0|t)<0?(F+=u*(s-1),s=Q(-s/f)):s=Q(s/f),u*=f),"number"==typeof e&&((f=0|e)<0?(F+=d*(o-1),o=Q(-o/f)):o=Q(o/f),d*=f),"number"==typeof i&&((f=0|i)<0?(F+=h*(l-1),l=Q(-l/f)):l=Q(l/f),h*=f),"number"==typeof r&&((f=0|r)<0?(F+=B*(c-1),c=Q(-c/f)):c=Q(c/f),B*=f),"number"==typeof a&&((f=0|a)<0?(F+=p*(g-1),g=Q(-g/f)):g=Q(g/f),p*=f),new n(this.data,s,o,l,c,g,u,d,h,B,p,F)},r.transpose=function(t,e,i,r,a){t=void 0===t?0:0|t,e=void 0===e?1:0|e,i=void 0===i?2:0|i,r=void 0===r?3:0|r,a=void 0===a?4:0|a;var s=this.shape,o=this.stride;return new n(this.data,s[t],s[e],s[i],s[r],s[a],o[t],o[e],o[i],o[r],o[a],this.offset)},r.pick=function(t,i,n,r,a){var s=[],o=[],l=this.offset;return"number"==typeof t&&t>=0?l=l+this.stride[0]*t|0:(s.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof i&&i>=0?l=l+this.stride[1]*i|0:(s.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof n&&n>=0?l=l+this.stride[2]*n|0:(s.push(this.shape[2]),o.push(this.stride[2])),"number"==typeof r&&r>=0?l=l+this.stride[3]*r|0:(s.push(this.shape[3]),o.push(this.stride[3])),"number"==typeof a&&a>=0?l=l+this.stride[4]*a|0:(s.push(this.shape[4]),o.push(this.stride[4])),(0,e[s.length+1])(this.data,s,o,l)},function(t,e,i,r){return new n(t,e[0],e[1],e[2],e[3],e[4],i[0],i[1],i[2],i[3],i[4],r)}}};function l(t,e){var i=-1===e?"T":String(e),n=o[i];return-1===e?n(t):0===e?n(t,c[t][0]):n(t,c[t],s)}var c={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};t.exports=function(t,e,i,a){if(void 0===t)return(0,c.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var s=e.length;if(void 0===i){i=new Array(s);for(var o=s-1,g=1;o>=0;--o)i[o]=g,g*=e[o]}if(void 0===a){a=0;for(o=0;o<s;++o)i[o]<0&&(a-=(e[o]-1)*i[o])}for(var u=function(t){if(n(t))return"buffer";if(r)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),d=c[u];d.length<=s+1;)d.push(l(u,d.length-1));return(0,d[s+1])(t,e,i,a)}},1278:function(t,e,i){var n=i(2361),r=Math.pow(2,-1074),a=-1>>>0;t.exports=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-r:r;var i=n.hi(t),s=n.lo(t);e>t==t>0?s===a?(i+=1,s=0):s+=1:0===s?(s=a,i-=1):s-=1;return n.pack(s,i)}},8406:function(t,e){e.vertexNormals=function(t,e,i){for(var n=e.length,r=new Array(n),a=void 0===i?1e-6:i,s=0;s<n;++s)r[s]=[0,0,0];for(s=0;s<t.length;++s)for(var o=t[s],l=0,c=o[o.length-1],g=o[0],u=0;u<o.length;++u){l=c,c=g,g=o[(u+1)%o.length];for(var d=e[l],h=e[c],B=e[g],p=new Array(3),F=0,f=new Array(3),Q=0,I=0;I<3;++I)p[I]=d[I]-h[I],F+=p[I]*p[I],f[I]=B[I]-h[I],Q+=f[I]*f[I];if(F*Q>a){var U=r[c],b=1/Math.sqrt(F*Q);for(I=0;I<3;++I){var y=(I+1)%3,m=(I+2)%3;U[I]+=b*(f[y]*p[m]-f[m]*p[y])}}}for(s=0;s<n;++s){U=r[s];var x=0;for(I=0;I<3;++I)x+=U[I]*U[I];if(x>a)for(b=1/Math.sqrt(x),I=0;I<3;++I)U[I]*=b;else for(I=0;I<3;++I)U[I]=0}return r},e.faceNormals=function(t,e,i){for(var n=t.length,r=new Array(n),a=void 0===i?1e-6:i,s=0;s<n;++s){for(var o=t[s],l=new Array(3),c=0;c<3;++c)l[c]=e[o[c]];var g=new Array(3),u=new Array(3);for(c=0;c<3;++c)g[c]=l[1][c]-l[0][c],u[c]=l[2][c]-l[0][c];var d=new Array(3),h=0;for(c=0;c<3;++c){var B=(c+1)%3,p=(c+2)%3;d[c]=g[B]*u[p]-g[p]*u[B],h+=d[c]*d[c]}h=h>a?1/Math.sqrt(h):0;for(c=0;c<3;++c)d[c]*=h;r[s]=d}return r}},4081:function(t){t.exports=function(t,e,i,n,r,a,s,o,l,c){var g=e+a+c;if(u>0){var u=Math.sqrt(g+1);t[0]=.5*(s-l)/u,t[1]=.5*(o-n)/u,t[2]=.5*(i-a)/u,t[3]=.5*u}else{var d=Math.max(e,a,c);u=Math.sqrt(2*d-g+1);e>=d?(t[0]=.5*u,t[1]=.5*(r+i)/u,t[2]=.5*(o+n)/u,t[3]=.5*(s-l)/u):a>=d?(t[0]=.5*(i+r)/u,t[1]=.5*u,t[2]=.5*(l+s)/u,t[3]=.5*(o-n)/u):(t[0]=.5*(n+o)/u,t[1]=.5*(s+l)/u,t[2]=.5*u,t[3]=.5*(i-r)/u)}return t}},9977:function(t,e,i){t.exports=function(t){var e=(t=t||{}).center||[0,0,0],i=t.rotation||[0,0,0,1],n=t.radius||1;e=[].slice.call(e,0,3),g(i=[].slice.call(i,0,4),i);var r=new u(i,e,Math.log(n));r.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&r.lookAt(0,t.eye,t.center,t.up);return r};var n=i(9215),r=i(6582),a=i(7399),s=i(7608),o=i(4081);function l(t,e,i){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(i,2))}function c(t,e,i,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(i,2)+Math.pow(n,2))}function g(t,e){var i=e[0],n=e[1],r=e[2],a=e[3],s=c(i,n,r,a);s>1e-6?(t[0]=i/s,t[1]=n/s,t[2]=r/s,t[3]=a/s):(t[0]=t[1]=t[2]=0,t[3]=1)}function u(t,e,i){this.radius=n([i]),this.center=n(e),this.rotation=n(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=u.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;g(e,e);var i=this.computedMatrix;a(i,e);var n=this.computedCenter,r=this.computedEye,s=this.computedUp,o=Math.exp(this.computedRadius[0]);r[0]=n[0]+o*i[2],r[1]=n[1]+o*i[6],r[2]=n[2]+o*i[10],s[0]=i[1],s[1]=i[5],s[2]=i[9];for(var l=0;l<3;++l){for(var c=0,u=0;u<3;++u)c+=i[l+4*u]*r[u];i[12+l]=-c}},d.getMatrix=function(t,e){this.recalcMatrix(t);var i=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=i[n];return e}return i},d.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},d.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},d.pan=function(t,e,i,n){e=e||0,i=i||0,n=n||0,this.recalcMatrix(t);var r=this.computedMatrix,a=r[1],s=r[5],o=r[9],c=l(a,s,o);a/=c,s/=c,o/=c;var g=r[0],u=r[4],d=r[8],h=g*a+u*s+d*o,B=l(g-=a*h,u-=s*h,d-=o*h);g/=B,u/=B,d/=B,r[2],r[6],r[10];var p=g*e+a*i,F=u*e+s*i,f=d*e+o*i;this.center.move(t,p,F,f);var Q=Math.exp(this.computedRadius[0]);Q=Math.max(1e-4,Q+n),this.radius.set(t,Math.log(Q))},d.rotate=function(t,e,i,n){this.recalcMatrix(t),e=e||0,i=i||0;var r=this.computedMatrix,a=r[0],s=r[4],o=r[8],g=r[1],u=r[5],d=r[9],h=r[2],B=r[6],p=r[10],F=e*a+i*g,f=e*s+i*u,Q=e*o+i*d,I=-(B*Q-p*f),U=-(p*F-h*Q),b=-(h*f-B*F),y=Math.sqrt(Math.max(0,1-Math.pow(I,2)-Math.pow(U,2)-Math.pow(b,2))),m=c(I,U,b,y);m>1e-6?(I/=m,U/=m,b/=m,y/=m):(I=U=b=0,y=1);var x=this.computedRotation,v=x[0],C=x[1],A=x[2],L=x[3],G=v*y+L*I+C*b-A*U,R=C*y+L*U+A*I-v*b,S=A*y+L*b+v*U-C*I,w=L*y-v*I-C*U-A*b;if(n){I=h,U=B,b=p;var V=Math.sin(n)/l(I,U,b);I*=V,U*=V,b*=V,w=w*(y=Math.cos(e))-(G=G*y+w*I+R*b-S*U)*I-(R=R*y+w*U+S*I-G*b)*U-(S=S*y+w*b+G*U-R*I)*b}var E=c(G,R,S,w);E>1e-6?(G/=E,R/=E,S/=E,w/=E):(G=R=S=0,w=1),this.rotation.set(t,G,R,S,w)},d.lookAt=function(t,e,i,n){this.recalcMatrix(t),i=i||this.computedCenter,e=e||this.computedEye,n=n||this.computedUp;var a=this.computedMatrix;r(a,e,i,n);var s=this.computedRotation;o(s,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),g(s,s),this.rotation.set(t,s[0],s[1],s[2],s[3]);for(var l=0,c=0;c<3;++c)l+=Math.pow(i[c]-e[c],2);this.radius.set(t,.5*Math.log(Math.max(l,1e-6))),this.center.set(t,i[0],i[1],i[2])},d.translate=function(t,e,i,n){this.center.move(t,e||0,i||0,n||0)},d.setMatrix=function(t,e){var i=this.computedRotation;o(i,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),g(i,i),this.rotation.set(t,i[0],i[1],i[2],i[3]);var n=this.computedMatrix;s(n,e);var r=n[15];if(Math.abs(r)>1e-6){var a=n[12]/r,l=n[13]/r,c=n[14]/r;this.recalcMatrix(t);var u=Math.exp(this.computedRadius[0]);this.center.set(t,a-n[2]*u,l-n[6]*u,c-n[10]*u),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},d.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},d.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},d.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(t){var e=this.lastT(),i=t.center;i&&this.center.set(e,i[0],i[1],i[2]);var n=t.rotation;n&&this.rotation.set(e,n[0],n[1],n[2],n[3]);var r=t.distance;r&&r>0&&this.radius.set(e,Math.log(r)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},1371:function(t,e,i){
/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */
var n=i(3233);t.exports=function(t,e,i){return n(i=void 0!==i?i+"":" ",e)+t}},3202:function(t){t.exports=function(t,e){e||(e=[0,""]),t=String(t);var i=parseFloat(t,10);return e[0]=i,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},3088:function(t,e,i){t.exports=function(t,e){for(var i=0|e.length,r=t.length,a=[new Array(i),new Array(i)],s=0;s<i;++s)a[0][s]=[],a[1][s]=[];for(s=0;s<r;++s){var o=t[s];a[0][o[0]].push(o),a[1][o[1]].push(o)}var l=[];for(s=0;s<i;++s)a[0][s].length+a[1][s].length===0&&l.push([s]);function c(t,e){var i=a[e][t[e]];i.splice(i.indexOf(t),1)}function g(t,i,r){for(var s,o,l,g=0;g<2;++g)if(a[g][i].length>0){s=a[g][i][0],l=g;break}o=s[1^l];for(var u=0;u<2;++u)for(var d=a[u][i],h=0;h<d.length;++h){var B=d[h],p=B[1^u];n(e[t],e[i],e[o],e[p])>0&&(s=B,o=p,l=u)}return r||s&&c(s,l),o}function u(t,i){var r=a[i][t][0],s=[t];c(r,i);for(var o=r[1^i];;){for(;o!==t;)s.push(o),o=g(s[s.length-2],o,!1);if(a[0][t].length+a[1][t].length===0)break;var l=s[s.length-1],u=t,d=s[1],h=g(l,u,!0);if(n(e[l],e[u],e[d],e[h])<0)break;s.push(t),o=g(l,u)}return s}function d(t,e){return e[1]===e[e.length-1]}for(s=0;s<i;++s)for(var h=0;h<2;++h){for(var B=[];a[h][s].length>0;){a[0][s].length;var p=u(s,h);d(0,p)?B.push.apply(B,p):(B.length>0&&l.push(B),B=p)}B.length>0&&l.push(B)}return l};var n=i(3140)},5609:function(t,e,i){t.exports=function(t,e){for(var i=n(t,e.length),r=new Array(e.length),a=new Array(e.length),s=[],o=0;o<e.length;++o){var l=i[o].length;a[o]=l,r[o]=!0,l<=1&&s.push(o)}for(;s.length>0;){r[h=s.pop()]=!1;var c=i[h];for(o=0;o<c.length;++o){var g=c[o];0==--a[g]&&s.push(g)}}var u=new Array(e.length),d=[];for(o=0;o<e.length;++o)if(r[o]){var h=d.length;u[o]=h,d.push(e[o])}else u[o]=-1;var B=[];for(o=0;o<t.length;++o){var p=t[o];r[p[0]]&&r[p[1]]&&B.push([u[p[0]],u[p[1]]])}return[B,d]};var n=i(3134)},2095:function(t,e,i){t.exports=function(t,e){var i=c(t,e);t=i[0];var u=(e=i[1]).length;t.length;for(var d=n(t,e.length),h=0;h<u;++h)if(d[h].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var B=r(t,e);var p=(B=B.filter((function(t){for(var i=t.length,n=[0],r=0;r<i;++r){var a=e[t[r]],l=e[t[(r+1)%i]],c=s(-a[0],a[1]),g=s(-a[0],l[1]),u=s(l[0],a[1]),d=s(l[0],l[1]);n=o(n,o(o(c,g),o(u,d)))}return n[n.length-1]>0}))).length,F=new Array(p),f=new Array(p);for(h=0;h<p;++h){F[h]=h;var Q=new Array(p),I=B[h].map((function(t){return e[t]})),U=a([I]),b=0;t:for(var y=0;y<p;++y)if(Q[y]=0,h!==y){for(var m=(T=B[y]).length,x=0;x<m;++x){var v=U(e[T[x]]);if(0!==v){v<0&&(Q[y]=1,b+=1);continue t}}Q[y]=1,b+=1}f[h]=[b,h,Q]}f.sort((function(t,e){return e[0]-t[0]}));for(h=0;h<p;++h){var C=(Q=f[h])[1],A=Q[2];for(y=0;y<p;++y)A[y]&&(F[y]=C)}var L=function(t){for(var e=new Array(t),i=0;i<t;++i)e[i]=[];return e}(p);for(h=0;h<p;++h)L[h].push(F[h]),L[F[h]].push(h);var G={},R=g(u,!1);for(h=0;h<p;++h)for(m=(T=B[h]).length,y=0;y<m;++y){var S=T[y],w=T[(y+1)%m],V=Math.min(S,w)+":"+Math.max(S,w);if(V in G){var E=G[V];L[E].push(h),L[h].push(E),R[S]=R[w]=!0}else G[V]=h}function Z(t){for(var e=t.length,i=0;i<e;++i)if(!R[t[i]])return!1;return!0}var N=[],D=g(p,-1);for(h=0;h<p;++h)F[h]!==h||Z(B[h])?D[h]=-1:(N.push(h),D[h]=0);i=[];for(;N.length>0;){var X=N.pop(),H=L[X];l(H,(function(t,e){return t-e}));var W,k=H.length,M=D[X];if(0===M)W=[T=B[X]];for(h=0;h<k;++h){var T,Y=H[h];if(!(D[Y]>=0))if(D[Y]=1^M,N.push(Y),0===M)Z(T=B[Y])||(T.reverse(),W.push(T))}0===M&&i.push(W)}return i};var n=i(3134),r=i(3088),a=i(5085),s=i(5250),o=i(8210),l=i(1682),c=i(5609);function g(t,e){for(var i=new Array(t),n=0;n<t;++n)i[n]=e;return i}},5085:function(t,e,i){t.exports=function(t){for(var e=t.length,i=[],a=[],o=0;o<e;++o)for(var g=t[o],u=g.length,d=u-1,h=0;h<u;d=h++){var B=g[d],p=g[h];B[0]===p[0]?a.push([B,p]):i.push([B,p])}if(0===i.length)return 0===a.length?c:(F=l(a),function(t){return F(t[0],t[1])?0:1});var F;var f=r(i),Q=function(t,e){return function(i){var r=s.le(e,i[0]);if(r<0)return 1;var a=t[r];if(!a){if(!(r>0&&e[r]===i[0]))return 1;a=t[r-1]}for(var o=1;a;){var l=a.key,c=n(i,l[0],l[1]);if(l[0][0]<l[1][0])if(c<0)a=a.left;else{if(!(c>0))return 0;o=-1,a=a.right}else if(c>0)a=a.left;else{if(!(c<0))return 0;o=1,a=a.right}}return o}}(f.slabs,f.coordinates);return 0===a.length?Q:function(t,e){return function(i){return t(i[0],i[1])?0:e(i)}}(l(a),Q)};var n=i(3250)[3],r=i(4209),a=i(3352),s=i(2478);function o(){return!0}function l(t){for(var e={},i=0;i<t.length;++i){var n=t[i],r=n[0][0],s=n[0][1],l=n[1][1],c=[Math.min(s,l),Math.max(s,l)];r in e?e[r].push(c):e[r]=[c]}var g={},u=Object.keys(e);for(i=0;i<u.length;++i){var d=e[u[i]];g[u[i]]=a(d)}return function(t){return function(e,i){var n=t[e];return!!n&&!!n.queryPoint(i,o)}}(g)}function c(t){return 1}},9346:function(t){var e=new Float64Array(4),i=new Float64Array(4),n=new Float64Array(4);t.exports=function(t,r,a,s,o){e.length<s.length&&(e=new Float64Array(s.length),i=new Float64Array(s.length),n=new Float64Array(s.length));for(var l=0;l<s.length;++l)e[l]=t[l]-s[l],i[l]=r[l]-t[l],n[l]=a[l]-t[l];var c=0,g=0,u=0,d=0,h=0,B=0;for(l=0;l<s.length;++l){var p=i[l],F=n[l],f=e[l];c+=p*p,g+=p*F,u+=F*F,d+=f*p,h+=f*F,B+=f*f}var Q,I,U,b,y,m=Math.abs(c*u-g*g),x=g*h-u*d,v=g*d-c*h;if(x+v<=m)if(x<0)v<0&&d<0?(v=0,-d>=c?(x=1,Q=c+2*d+B):Q=d*(x=-d/c)+B):(x=0,h>=0?(v=0,Q=B):-h>=u?(v=1,Q=u+2*h+B):Q=h*(v=-h/u)+B);else if(v<0)v=0,d>=0?(x=0,Q=B):-d>=c?(x=1,Q=c+2*d+B):Q=d*(x=-d/c)+B;else{var C=1/m;Q=(x*=C)*(c*x+g*(v*=C)+2*d)+v*(g*x+u*v+2*h)+B}else x<0?(U=u+h)>(I=g+d)?(b=U-I)>=(y=c-2*g+u)?(x=1,v=0,Q=c+2*d+B):Q=(x=b/y)*(c*x+g*(v=1-x)+2*d)+v*(g*x+u*v+2*h)+B:(x=0,U<=0?(v=1,Q=u+2*h+B):h>=0?(v=0,Q=B):Q=h*(v=-h/u)+B):v<0?(U=c+d)>(I=g+h)?(b=U-I)>=(y=c-2*g+u)?(v=1,x=0,Q=u+2*h+B):Q=(x=1-(v=b/y))*(c*x+g*v+2*d)+v*(g*x+u*v+2*h)+B:(v=0,U<=0?(x=1,Q=c+2*d+B):d>=0?(x=0,Q=B):Q=d*(x=-d/c)+B):(b=u+h-g-d)<=0?(x=0,v=1,Q=u+2*h+B):b>=(y=c-2*g+u)?(x=1,v=0,Q=c+2*d+B):Q=(x=b/y)*(c*x+g*(v=1-x)+2*d)+v*(g*x+u*v+2*h)+B;var A=1-x-v;for(l=0;l<s.length;++l)o[l]=A*t[l]+x*r[l]+v*a[l];return Q<0?0:Q}},8648:function(t,e,i){t.exports=i(783)},2653:function(t,e,i){var n=i(3865);t.exports=function(t,e){for(var i=t.length,r=new Array(i),a=0;a<i;++a)r[a]=n(t[a],e[a]);return r}},5838:function(t,e,i){t.exports=function(t){for(var e=new Array(t.length),i=0;i<t.length;++i)e[i]=n(t[i]);return e};var n=i(7842)},8987:function(t,e,i){var n=i(7842),r=i(6504);t.exports=function(t,e){for(var i=n(e),a=t.length,s=new Array(a),o=0;o<a;++o)s[o]=r(t[o],i);return s}},544:function(t,e,i){var n=i(5572);t.exports=function(t,e){for(var i=t.length,r=new Array(i),a=0;a<i;++a)r[a]=n(t[a],e[a]);return r}},5771:function(t,e,i){var n=i(8507),r=i(3788),a=i(2419);t.exports=function(t){t.sort(r);for(var e=t.length,i=0,s=0;s<e;++s){var o=t[s],l=a(o);if(0!==l){if(i>0){var c=t[i-1];if(0===n(o,c)&&a(c)!==l){i-=1;continue}}t[i++]=o}}return t.length=i,t}},3233:function(t){
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
var e,i="";t.exports=function(t,n){if("string"!=typeof t)throw new TypeError("expected a string");if(1===n)return t;if(2===n)return t+t;var r=t.length*n;if(e!==t||void 0===e)e=t,i="";else if(i.length>=r)return i.substr(0,r);for(;r>i.length&&n>1;)1&n&&(i+=t),n>>=1,t+=t;return i+=t,i=i.substr(0,r),i}},3025:function(t,e,i){t.exports=i.g.performance&&i.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(t){t.exports=function(t){for(var e=t.length,i=t[t.length-1],n=e,r=e-2;r>=0;--r){var a=i;(l=(o=t[r])-((i=a+o)-a))&&(t[--n]=i,i=l)}var s=0;for(r=n;r<e;++r){var o,l;(l=(o=i)-((i=(a=t[r])+o)-a))&&(t[s++]=l)}return t[s++]=i,t.length=s,t}},2962:function(t,e,i){var n=i(5250),r=i(8210),a=i(3012),s=i(7004);function o(t,e,i,n){return function(e){return n(t(i(e[0][0],e[1][1]),i(-e[0][1],e[1][0])))}}function l(t,e,i,n){return function(r){return n(t(e(t(i(r[1][1],r[2][2]),i(-r[1][2],r[2][1])),r[0][0]),t(e(t(i(r[1][0],r[2][2]),i(-r[1][2],r[2][0])),-r[0][1]),e(t(i(r[1][0],r[2][1]),i(-r[1][1],r[2][0])),r[0][2]))))}}function c(t,e,i,n){return function(r){return n(t(t(e(t(e(t(i(r[2][2],r[3][3]),i(-r[2][3],r[3][2])),r[1][1]),t(e(t(i(r[2][1],r[3][3]),i(-r[2][3],r[3][1])),-r[1][2]),e(t(i(r[2][1],r[3][2]),i(-r[2][2],r[3][1])),r[1][3]))),r[0][0]),e(t(e(t(i(r[2][2],r[3][3]),i(-r[2][3],r[3][2])),r[1][0]),t(e(t(i(r[2][0],r[3][3]),i(-r[2][3],r[3][0])),-r[1][2]),e(t(i(r[2][0],r[3][2]),i(-r[2][2],r[3][0])),r[1][3]))),-r[0][1])),t(e(t(e(t(i(r[2][1],r[3][3]),i(-r[2][3],r[3][1])),r[1][0]),t(e(t(i(r[2][0],r[3][3]),i(-r[2][3],r[3][0])),-r[1][1]),e(t(i(r[2][0],r[3][1]),i(-r[2][1],r[3][0])),r[1][3]))),r[0][2]),e(t(e(t(i(r[2][1],r[3][2]),i(-r[2][2],r[3][1])),r[1][0]),t(e(t(i(r[2][0],r[3][2]),i(-r[2][2],r[3][0])),-r[1][1]),e(t(i(r[2][0],r[3][1]),i(-r[2][1],r[3][0])),r[1][2]))),-r[0][3]))))}}function g(t,e,i,n){return function(r){return n(t(t(e(t(t(e(t(e(t(i(r[3][3],r[4][4]),i(-r[3][4],r[4][3])),r[2][2]),t(e(t(i(r[3][2],r[4][4]),i(-r[3][4],r[4][2])),-r[2][3]),e(t(i(r[3][2],r[4][3]),i(-r[3][3],r[4][2])),r[2][4]))),r[1][1]),e(t(e(t(i(r[3][3],r[4][4]),i(-r[3][4],r[4][3])),r[2][1]),t(e(t(i(r[3][1],r[4][4]),i(-r[3][4],r[4][1])),-r[2][3]),e(t(i(r[3][1],r[4][3]),i(-r[3][3],r[4][1])),r[2][4]))),-r[1][2])),t(e(t(e(t(i(r[3][2],r[4][4]),i(-r[3][4],r[4][2])),r[2][1]),t(e(t(i(r[3][1],r[4][4]),i(-r[3][4],r[4][1])),-r[2][2]),e(t(i(r[3][1],r[4][2]),i(-r[3][2],r[4][1])),r[2][4]))),r[1][3]),e(t(e(t(i(r[3][2],r[4][3]),i(-r[3][3],r[4][2])),r[2][1]),t(e(t(i(r[3][1],r[4][3]),i(-r[3][3],r[4][1])),-r[2][2]),e(t(i(r[3][1],r[4][2]),i(-r[3][2],r[4][1])),r[2][3]))),-r[1][4]))),r[0][0]),e(t(t(e(t(e(t(i(r[3][3],r[4][4]),i(-r[3][4],r[4][3])),r[2][2]),t(e(t(i(r[3][2],r[4][4]),i(-r[3][4],r[4][2])),-r[2][3]),e(t(i(r[3][2],r[4][3]),i(-r[3][3],r[4][2])),r[2][4]))),r[1][0]),e(t(e(t(i(r[3][3],r[4][4]),i(-r[3][4],r[4][3])),r[2][0]),t(e(t(i(r[3][0],r[4][4]),i(-r[3][4],r[4][0])),-r[2][3]),e(t(i(r[3][0],r[4][3]),i(-r[3][3],r[4][0])),r[2][4]))),-r[1][2])),t(e(t(e(t(i(r[3][2],r[4][4]),i(-r[3][4],r[4][2])),r[2][0]),t(e(t(i(r[3][0],r[4][4]),i(-r[3][4],r[4][0])),-r[2][2]),e(t(i(r[3][0],r[4][2]),i(-r[3][2],r[4][0])),r[2][4]))),r[1][3]),e(t(e(t(i(r[3][2],r[4][3]),i(-r[3][3],r[4][2])),r[2][0]),t(e(t(i(r[3][0],r[4][3]),i(-r[3][3],r[4][0])),-r[2][2]),e(t(i(r[3][0],r[4][2]),i(-r[3][2],r[4][0])),r[2][3]))),-r[1][4]))),-r[0][1])),t(e(t(t(e(t(e(t(i(r[3][3],r[4][4]),i(-r[3][4],r[4][3])),r[2][1]),t(e(t(i(r[3][1],r[4][4]),i(-r[3][4],r[4][1])),-r[2][3]),e(t(i(r[3][1],r[4][3]),i(-r[3][3],r[4][1])),r[2][4]))),r[1][0]),e(t(e(t(i(r[3][3],r[4][4]),i(-r[3][4],r[4][3])),r[2][0]),t(e(t(i(r[3][0],r[4][4]),i(-r[3][4],r[4][0])),-r[2][3]),e(t(i(r[3][0],r[4][3]),i(-r[3][3],r[4][0])),r[2][4]))),-r[1][1])),t(e(t(e(t(i(r[3][1],r[4][4]),i(-r[3][4],r[4][1])),r[2][0]),t(e(t(i(r[3][0],r[4][4]),i(-r[3][4],r[4][0])),-r[2][1]),e(t(i(r[3][0],r[4][1]),i(-r[3][1],r[4][0])),r[2][4]))),r[1][3]),e(t(e(t(i(r[3][1],r[4][3]),i(-r[3][3],r[4][1])),r[2][0]),t(e(t(i(r[3][0],r[4][3]),i(-r[3][3],r[4][0])),-r[2][1]),e(t(i(r[3][0],r[4][1]),i(-r[3][1],r[4][0])),r[2][3]))),-r[1][4]))),r[0][2]),t(e(t(t(e(t(e(t(i(r[3][2],r[4][4]),i(-r[3][4],r[4][2])),r[2][1]),t(e(t(i(r[3][1],r[4][4]),i(-r[3][4],r[4][1])),-r[2][2]),e(t(i(r[3][1],r[4][2]),i(-r[3][2],r[4][1])),r[2][4]))),r[1][0]),e(t(e(t(i(r[3][2],r[4][4]),i(-r[3][4],r[4][2])),r[2][0]),t(e(t(i(r[3][0],r[4][4]),i(-r[3][4],r[4][0])),-r[2][2]),e(t(i(r[3][0],r[4][2]),i(-r[3][2],r[4][0])),r[2][4]))),-r[1][1])),t(e(t(e(t(i(r[3][1],r[4][4]),i(-r[3][4],r[4][1])),r[2][0]),t(e(t(i(r[3][0],r[4][4]),i(-r[3][4],r[4][0])),-r[2][1]),e(t(i(r[3][0],r[4][1]),i(-r[3][1],r[4][0])),r[2][4]))),r[1][2]),e(t(e(t(i(r[3][1],r[4][2]),i(-r[3][2],r[4][1])),r[2][0]),t(e(t(i(r[3][0],r[4][2]),i(-r[3][2],r[4][0])),-r[2][1]),e(t(i(r[3][0],r[4][1]),i(-r[3][1],r[4][0])),r[2][2]))),-r[1][4]))),-r[0][3]),e(t(t(e(t(e(t(i(r[3][2],r[4][3]),i(-r[3][3],r[4][2])),r[2][1]),t(e(t(i(r[3][1],r[4][3]),i(-r[3][3],r[4][1])),-r[2][2]),e(t(i(r[3][1],r[4][2]),i(-r[3][2],r[4][1])),r[2][3]))),r[1][0]),e(t(e(t(i(r[3][2],r[4][3]),i(-r[3][3],r[4][2])),r[2][0]),t(e(t(i(r[3][0],r[4][3]),i(-r[3][3],r[4][0])),-r[2][2]),e(t(i(r[3][0],r[4][2]),i(-r[3][2],r[4][0])),r[2][3]))),-r[1][1])),t(e(t(e(t(i(r[3][1],r[4][3]),i(-r[3][3],r[4][1])),r[2][0]),t(e(t(i(r[3][0],r[4][3]),i(-r[3][3],r[4][0])),-r[2][1]),e(t(i(r[3][0],r[4][1]),i(-r[3][1],r[4][0])),r[2][3]))),r[1][2]),e(t(e(t(i(r[3][1],r[4][2]),i(-r[3][2],r[4][1])),r[2][0]),t(e(t(i(r[3][0],r[4][2]),i(-r[3][2],r[4][0])),-r[2][1]),e(t(i(r[3][0],r[4][1]),i(-r[3][1],r[4][0])),r[2][2]))),-r[1][3]))),r[0][4])))))}}function u(t){return(2===t?o:3===t?l:4===t?c:5===t?g:void 0)(r,a,n,s)}var d=[function(){return[0]},function(t){return[t[0][0]]}];function h(t,e,i,n,r,a,s,o){return function(l){switch(l.length){case 0:return t(l);case 1:return e(l);case 2:return i(l);case 3:return n(l);case 4:return r(l);case 5:return a(l)}var c=s[l.length];return c||(c=s[l.length]=o(l.length)),c(l)}}!function(){for(;d.length<6;)d.push(u(d.length));t.exports=h.apply(void 0,d.concat([d,u]));for(var e=0;e<d.length;++e)t.exports[e]=d[e]}()},1944:function(t,e,i){var n=i(5250),r=i(8210);t.exports=function(t,e){for(var i=n(t[0],e[0]),a=1;a<t.length;++a)i=r(i,n(t[a],e[a]));return i}},2646:function(t,e,i){var n=i(5250),r=i(8210),a=i(8545),s=i(3012);function o(t){return(3===t?l:4===t?c:5===t?g:u)(r,a,n,s)}function l(t,e,i,n){return function(r,a,s){var o=i(r[0],r[0]),l=n(o,a[0]),c=n(o,s[0]),g=i(a[0],a[0]),u=n(g,r[0]),d=n(g,s[0]),h=i(s[0],s[0]),B=n(h,r[0]),p=n(h,a[0]),F=t(e(p,d),e(u,l)),f=e(B,c),Q=e(F,f);return Q[Q.length-1]}}function c(t,e,i,n){return function(r,a,s,o){var l=t(i(r[0],r[0]),i(r[1],r[1])),c=n(l,a[0]),g=n(l,s[0]),u=n(l,o[0]),d=t(i(a[0],a[0]),i(a[1],a[1])),h=n(d,r[0]),B=n(d,s[0]),p=n(d,o[0]),F=t(i(s[0],s[0]),i(s[1],s[1])),f=n(F,r[0]),Q=n(F,a[0]),I=n(F,o[0]),U=t(i(o[0],o[0]),i(o[1],o[1])),b=n(U,r[0]),y=n(U,a[0]),m=n(U,s[0]),x=t(t(n(e(m,I),a[1]),t(n(e(y,p),-s[1]),n(e(Q,B),o[1]))),t(n(e(y,p),r[1]),t(n(e(b,u),-a[1]),n(e(h,c),o[1])))),v=t(t(n(e(m,I),r[1]),t(n(e(b,u),-s[1]),n(e(f,g),o[1]))),t(n(e(Q,B),r[1]),t(n(e(f,g),-a[1]),n(e(h,c),s[1])))),C=e(x,v);return C[C.length-1]}}function g(t,e,i,n){return function(r,a,s,o,l){var c=t(i(r[0],r[0]),t(i(r[1],r[1]),i(r[2],r[2]))),g=n(c,a[0]),u=n(c,s[0]),d=n(c,o[0]),h=n(c,l[0]),B=t(i(a[0],a[0]),t(i(a[1],a[1]),i(a[2],a[2]))),p=n(B,r[0]),F=n(B,s[0]),f=n(B,o[0]),Q=n(B,l[0]),I=t(i(s[0],s[0]),t(i(s[1],s[1]),i(s[2],s[2]))),U=n(I,r[0]),b=n(I,a[0]),y=n(I,o[0]),m=n(I,l[0]),x=t(i(o[0],o[0]),t(i(o[1],o[1]),i(o[2],o[2]))),v=n(x,r[0]),C=n(x,a[0]),A=n(x,s[0]),L=n(x,l[0]),G=t(i(l[0],l[0]),t(i(l[1],l[1]),i(l[2],l[2]))),R=n(G,r[0]),S=n(G,a[0]),w=n(G,s[0]),V=n(G,o[0]),E=t(t(t(n(t(n(e(V,L),s[1]),t(n(e(w,m),-o[1]),n(e(A,y),l[1]))),a[2]),t(n(t(n(e(V,L),a[1]),t(n(e(S,Q),-o[1]),n(e(C,f),l[1]))),-s[2]),n(t(n(e(w,m),a[1]),t(n(e(S,Q),-s[1]),n(e(b,F),l[1]))),o[2]))),t(n(t(n(e(A,y),a[1]),t(n(e(C,f),-s[1]),n(e(b,F),o[1]))),-l[2]),t(n(t(n(e(V,L),a[1]),t(n(e(S,Q),-o[1]),n(e(C,f),l[1]))),r[2]),n(t(n(e(V,L),r[1]),t(n(e(R,h),-o[1]),n(e(v,d),l[1]))),-a[2])))),t(t(n(t(n(e(S,Q),r[1]),t(n(e(R,h),-a[1]),n(e(p,g),l[1]))),o[2]),t(n(t(n(e(C,f),r[1]),t(n(e(v,d),-a[1]),n(e(p,g),o[1]))),-l[2]),n(t(n(e(A,y),a[1]),t(n(e(C,f),-s[1]),n(e(b,F),o[1]))),r[2]))),t(n(t(n(e(A,y),r[1]),t(n(e(v,d),-s[1]),n(e(U,u),o[1]))),-a[2]),t(n(t(n(e(C,f),r[1]),t(n(e(v,d),-a[1]),n(e(p,g),o[1]))),s[2]),n(t(n(e(b,F),r[1]),t(n(e(U,u),-a[1]),n(e(p,g),s[1]))),-o[2]))))),Z=t(t(t(n(t(n(e(V,L),s[1]),t(n(e(w,m),-o[1]),n(e(A,y),l[1]))),r[2]),n(t(n(e(V,L),r[1]),t(n(e(R,h),-o[1]),n(e(v,d),l[1]))),-s[2])),t(n(t(n(e(w,m),r[1]),t(n(e(R,h),-s[1]),n(e(U,u),l[1]))),o[2]),n(t(n(e(A,y),r[1]),t(n(e(v,d),-s[1]),n(e(U,u),o[1]))),-l[2]))),t(t(n(t(n(e(w,m),a[1]),t(n(e(S,Q),-s[1]),n(e(b,F),l[1]))),r[2]),n(t(n(e(w,m),r[1]),t(n(e(R,h),-s[1]),n(e(U,u),l[1]))),-a[2])),t(n(t(n(e(S,Q),r[1]),t(n(e(R,h),-a[1]),n(e(p,g),l[1]))),s[2]),n(t(n(e(b,F),r[1]),t(n(e(U,u),-a[1]),n(e(p,g),s[1]))),-l[2])))),N=e(E,Z);return N[N.length-1]}}function u(t,e,i,n){return function(r,a,s,o,l,c){var g=t(t(i(r[0],r[0]),i(r[1],r[1])),t(i(r[2],r[2]),i(r[3],r[3]))),u=n(g,a[0]),d=n(g,s[0]),h=n(g,o[0]),B=n(g,l[0]),p=n(g,c[0]),F=t(t(i(a[0],a[0]),i(a[1],a[1])),t(i(a[2],a[2]),i(a[3],a[3]))),f=n(F,r[0]),Q=n(F,s[0]),I=n(F,o[0]),U=n(F,l[0]),b=n(F,c[0]),y=t(t(i(s[0],s[0]),i(s[1],s[1])),t(i(s[2],s[2]),i(s[3],s[3]))),m=n(y,r[0]),x=n(y,a[0]),v=n(y,o[0]),C=n(y,l[0]),A=n(y,c[0]),L=t(t(i(o[0],o[0]),i(o[1],o[1])),t(i(o[2],o[2]),i(o[3],o[3]))),G=n(L,r[0]),R=n(L,a[0]),S=n(L,s[0]),w=n(L,l[0]),V=n(L,c[0]),E=t(t(i(l[0],l[0]),i(l[1],l[1])),t(i(l[2],l[2]),i(l[3],l[3]))),Z=n(E,r[0]),N=n(E,a[0]),D=n(E,s[0]),X=n(E,o[0]),H=n(E,c[0]),W=t(t(i(c[0],c[0]),i(c[1],c[1])),t(i(c[2],c[2]),i(c[3],c[3]))),k=n(W,r[0]),M=n(W,a[0]),T=n(W,s[0]),Y=n(W,o[0]),J=n(W,l[0]),_=t(t(t(n(t(t(n(t(n(e(J,H),o[1]),t(n(e(Y,V),-l[1]),n(e(X,w),c[1]))),s[2]),n(t(n(e(J,H),s[1]),t(n(e(T,A),-l[1]),n(e(D,C),c[1]))),-o[2])),t(n(t(n(e(Y,V),s[1]),t(n(e(T,A),-o[1]),n(e(S,v),c[1]))),l[2]),n(t(n(e(X,w),s[1]),t(n(e(D,C),-o[1]),n(e(S,v),l[1]))),-c[2]))),a[3]),t(n(t(t(n(t(n(e(J,H),o[1]),t(n(e(Y,V),-l[1]),n(e(X,w),c[1]))),a[2]),n(t(n(e(J,H),a[1]),t(n(e(M,b),-l[1]),n(e(N,U),c[1]))),-o[2])),t(n(t(n(e(Y,V),a[1]),t(n(e(M,b),-o[1]),n(e(R,I),c[1]))),l[2]),n(t(n(e(X,w),a[1]),t(n(e(N,U),-o[1]),n(e(R,I),l[1]))),-c[2]))),-s[3]),n(t(t(n(t(n(e(J,H),s[1]),t(n(e(T,A),-l[1]),n(e(D,C),c[1]))),a[2]),n(t(n(e(J,H),a[1]),t(n(e(M,b),-l[1]),n(e(N,U),c[1]))),-s[2])),t(n(t(n(e(T,A),a[1]),t(n(e(M,b),-s[1]),n(e(x,Q),c[1]))),l[2]),n(t(n(e(D,C),a[1]),t(n(e(N,U),-s[1]),n(e(x,Q),l[1]))),-c[2]))),o[3]))),t(t(n(t(t(n(t(n(e(Y,V),s[1]),t(n(e(T,A),-o[1]),n(e(S,v),c[1]))),a[2]),n(t(n(e(Y,V),a[1]),t(n(e(M,b),-o[1]),n(e(R,I),c[1]))),-s[2])),t(n(t(n(e(T,A),a[1]),t(n(e(M,b),-s[1]),n(e(x,Q),c[1]))),o[2]),n(t(n(e(S,v),a[1]),t(n(e(R,I),-s[1]),n(e(x,Q),o[1]))),-c[2]))),-l[3]),n(t(t(n(t(n(e(X,w),s[1]),t(n(e(D,C),-o[1]),n(e(S,v),l[1]))),a[2]),n(t(n(e(X,w),a[1]),t(n(e(N,U),-o[1]),n(e(R,I),l[1]))),-s[2])),t(n(t(n(e(D,C),a[1]),t(n(e(N,U),-s[1]),n(e(x,Q),l[1]))),o[2]),n(t(n(e(S,v),a[1]),t(n(e(R,I),-s[1]),n(e(x,Q),o[1]))),-l[2]))),c[3])),t(n(t(t(n(t(n(e(J,H),o[1]),t(n(e(Y,V),-l[1]),n(e(X,w),c[1]))),a[2]),n(t(n(e(J,H),a[1]),t(n(e(M,b),-l[1]),n(e(N,U),c[1]))),-o[2])),t(n(t(n(e(Y,V),a[1]),t(n(e(M,b),-o[1]),n(e(R,I),c[1]))),l[2]),n(t(n(e(X,w),a[1]),t(n(e(N,U),-o[1]),n(e(R,I),l[1]))),-c[2]))),r[3]),n(t(t(n(t(n(e(J,H),o[1]),t(n(e(Y,V),-l[1]),n(e(X,w),c[1]))),r[2]),n(t(n(e(J,H),r[1]),t(n(e(k,p),-l[1]),n(e(Z,B),c[1]))),-o[2])),t(n(t(n(e(Y,V),r[1]),t(n(e(k,p),-o[1]),n(e(G,h),c[1]))),l[2]),n(t(n(e(X,w),r[1]),t(n(e(Z,B),-o[1]),n(e(G,h),l[1]))),-c[2]))),-a[3])))),t(t(t(n(t(t(n(t(n(e(J,H),a[1]),t(n(e(M,b),-l[1]),n(e(N,U),c[1]))),r[2]),n(t(n(e(J,H),r[1]),t(n(e(k,p),-l[1]),n(e(Z,B),c[1]))),-a[2])),t(n(t(n(e(M,b),r[1]),t(n(e(k,p),-a[1]),n(e(f,u),c[1]))),l[2]),n(t(n(e(N,U),r[1]),t(n(e(Z,B),-a[1]),n(e(f,u),l[1]))),-c[2]))),o[3]),n(t(t(n(t(n(e(Y,V),a[1]),t(n(e(M,b),-o[1]),n(e(R,I),c[1]))),r[2]),n(t(n(e(Y,V),r[1]),t(n(e(k,p),-o[1]),n(e(G,h),c[1]))),-a[2])),t(n(t(n(e(M,b),r[1]),t(n(e(k,p),-a[1]),n(e(f,u),c[1]))),o[2]),n(t(n(e(R,I),r[1]),t(n(e(G,h),-a[1]),n(e(f,u),o[1]))),-c[2]))),-l[3])),t(n(t(t(n(t(n(e(X,w),a[1]),t(n(e(N,U),-o[1]),n(e(R,I),l[1]))),r[2]),n(t(n(e(X,w),r[1]),t(n(e(Z,B),-o[1]),n(e(G,h),l[1]))),-a[2])),t(n(t(n(e(N,U),r[1]),t(n(e(Z,B),-a[1]),n(e(f,u),l[1]))),o[2]),n(t(n(e(R,I),r[1]),t(n(e(G,h),-a[1]),n(e(f,u),o[1]))),-l[2]))),c[3]),n(t(t(n(t(n(e(Y,V),s[1]),t(n(e(T,A),-o[1]),n(e(S,v),c[1]))),a[2]),n(t(n(e(Y,V),a[1]),t(n(e(M,b),-o[1]),n(e(R,I),c[1]))),-s[2])),t(n(t(n(e(T,A),a[1]),t(n(e(M,b),-s[1]),n(e(x,Q),c[1]))),o[2]),n(t(n(e(S,v),a[1]),t(n(e(R,I),-s[1]),n(e(x,Q),o[1]))),-c[2]))),r[3]))),t(t(n(t(t(n(t(n(e(Y,V),s[1]),t(n(e(T,A),-o[1]),n(e(S,v),c[1]))),r[2]),n(t(n(e(Y,V),r[1]),t(n(e(k,p),-o[1]),n(e(G,h),c[1]))),-s[2])),t(n(t(n(e(T,A),r[1]),t(n(e(k,p),-s[1]),n(e(m,d),c[1]))),o[2]),n(t(n(e(S,v),r[1]),t(n(e(G,h),-s[1]),n(e(m,d),o[1]))),-c[2]))),-a[3]),n(t(t(n(t(n(e(Y,V),a[1]),t(n(e(M,b),-o[1]),n(e(R,I),c[1]))),r[2]),n(t(n(e(Y,V),r[1]),t(n(e(k,p),-o[1]),n(e(G,h),c[1]))),-a[2])),t(n(t(n(e(M,b),r[1]),t(n(e(k,p),-a[1]),n(e(f,u),c[1]))),o[2]),n(t(n(e(R,I),r[1]),t(n(e(G,h),-a[1]),n(e(f,u),o[1]))),-c[2]))),s[3])),t(n(t(t(n(t(n(e(T,A),a[1]),t(n(e(M,b),-s[1]),n(e(x,Q),c[1]))),r[2]),n(t(n(e(T,A),r[1]),t(n(e(k,p),-s[1]),n(e(m,d),c[1]))),-a[2])),t(n(t(n(e(M,b),r[1]),t(n(e(k,p),-a[1]),n(e(f,u),c[1]))),s[2]),n(t(n(e(x,Q),r[1]),t(n(e(m,d),-a[1]),n(e(f,u),s[1]))),-c[2]))),-o[3]),n(t(t(n(t(n(e(S,v),a[1]),t(n(e(R,I),-s[1]),n(e(x,Q),o[1]))),r[2]),n(t(n(e(S,v),r[1]),t(n(e(G,h),-s[1]),n(e(m,d),o[1]))),-a[2])),t(n(t(n(e(R,I),r[1]),t(n(e(G,h),-a[1]),n(e(f,u),o[1]))),s[2]),n(t(n(e(x,Q),r[1]),t(n(e(m,d),-a[1]),n(e(f,u),s[1]))),-o[2]))),c[3]))))),z=t(t(t(n(t(t(n(t(n(e(J,H),o[1]),t(n(e(Y,V),-l[1]),n(e(X,w),c[1]))),s[2]),n(t(n(e(J,H),s[1]),t(n(e(T,A),-l[1]),n(e(D,C),c[1]))),-o[2])),t(n(t(n(e(Y,V),s[1]),t(n(e(T,A),-o[1]),n(e(S,v),c[1]))),l[2]),n(t(n(e(X,w),s[1]),t(n(e(D,C),-o[1]),n(e(S,v),l[1]))),-c[2]))),r[3]),t(n(t(t(n(t(n(e(J,H),o[1]),t(n(e(Y,V),-l[1]),n(e(X,w),c[1]))),r[2]),n(t(n(e(J,H),r[1]),t(n(e(k,p),-l[1]),n(e(Z,B),c[1]))),-o[2])),t(n(t(n(e(Y,V),r[1]),t(n(e(k,p),-o[1]),n(e(G,h),c[1]))),l[2]),n(t(n(e(X,w),r[1]),t(n(e(Z,B),-o[1]),n(e(G,h),l[1]))),-c[2]))),-s[3]),n(t(t(n(t(n(e(J,H),s[1]),t(n(e(T,A),-l[1]),n(e(D,C),c[1]))),r[2]),n(t(n(e(J,H),r[1]),t(n(e(k,p),-l[1]),n(e(Z,B),c[1]))),-s[2])),t(n(t(n(e(T,A),r[1]),t(n(e(k,p),-s[1]),n(e(m,d),c[1]))),l[2]),n(t(n(e(D,C),r[1]),t(n(e(Z,B),-s[1]),n(e(m,d),l[1]))),-c[2]))),o[3]))),t(t(n(t(t(n(t(n(e(Y,V),s[1]),t(n(e(T,A),-o[1]),n(e(S,v),c[1]))),r[2]),n(t(n(e(Y,V),r[1]),t(n(e(k,p),-o[1]),n(e(G,h),c[1]))),-s[2])),t(n(t(n(e(T,A),r[1]),t(n(e(k,p),-s[1]),n(e(m,d),c[1]))),o[2]),n(t(n(e(S,v),r[1]),t(n(e(G,h),-s[1]),n(e(m,d),o[1]))),-c[2]))),-l[3]),n(t(t(n(t(n(e(X,w),s[1]),t(n(e(D,C),-o[1]),n(e(S,v),l[1]))),r[2]),n(t(n(e(X,w),r[1]),t(n(e(Z,B),-o[1]),n(e(G,h),l[1]))),-s[2])),t(n(t(n(e(D,C),r[1]),t(n(e(Z,B),-s[1]),n(e(m,d),l[1]))),o[2]),n(t(n(e(S,v),r[1]),t(n(e(G,h),-s[1]),n(e(m,d),o[1]))),-l[2]))),c[3])),t(n(t(t(n(t(n(e(J,H),s[1]),t(n(e(T,A),-l[1]),n(e(D,C),c[1]))),a[2]),n(t(n(e(J,H),a[1]),t(n(e(M,b),-l[1]),n(e(N,U),c[1]))),-s[2])),t(n(t(n(e(T,A),a[1]),t(n(e(M,b),-s[1]),n(e(x,Q),c[1]))),l[2]),n(t(n(e(D,C),a[1]),t(n(e(N,U),-s[1]),n(e(x,Q),l[1]))),-c[2]))),r[3]),n(t(t(n(t(n(e(J,H),s[1]),t(n(e(T,A),-l[1]),n(e(D,C),c[1]))),r[2]),n(t(n(e(J,H),r[1]),t(n(e(k,p),-l[1]),n(e(Z,B),c[1]))),-s[2])),t(n(t(n(e(T,A),r[1]),t(n(e(k,p),-s[1]),n(e(m,d),c[1]))),l[2]),n(t(n(e(D,C),r[1]),t(n(e(Z,B),-s[1]),n(e(m,d),l[1]))),-c[2]))),-a[3])))),t(t(t(n(t(t(n(t(n(e(J,H),a[1]),t(n(e(M,b),-l[1]),n(e(N,U),c[1]))),r[2]),n(t(n(e(J,H),r[1]),t(n(e(k,p),-l[1]),n(e(Z,B),c[1]))),-a[2])),t(n(t(n(e(M,b),r[1]),t(n(e(k,p),-a[1]),n(e(f,u),c[1]))),l[2]),n(t(n(e(N,U),r[1]),t(n(e(Z,B),-a[1]),n(e(f,u),l[1]))),-c[2]))),s[3]),n(t(t(n(t(n(e(T,A),a[1]),t(n(e(M,b),-s[1]),n(e(x,Q),c[1]))),r[2]),n(t(n(e(T,A),r[1]),t(n(e(k,p),-s[1]),n(e(m,d),c[1]))),-a[2])),t(n(t(n(e(M,b),r[1]),t(n(e(k,p),-a[1]),n(e(f,u),c[1]))),s[2]),n(t(n(e(x,Q),r[1]),t(n(e(m,d),-a[1]),n(e(f,u),s[1]))),-c[2]))),-l[3])),t(n(t(t(n(t(n(e(D,C),a[1]),t(n(e(N,U),-s[1]),n(e(x,Q),l[1]))),r[2]),n(t(n(e(D,C),r[1]),t(n(e(Z,B),-s[1]),n(e(m,d),l[1]))),-a[2])),t(n(t(n(e(N,U),r[1]),t(n(e(Z,B),-a[1]),n(e(f,u),l[1]))),s[2]),n(t(n(e(x,Q),r[1]),t(n(e(m,d),-a[1]),n(e(f,u),s[1]))),-l[2]))),c[3]),n(t(t(n(t(n(e(X,w),s[1]),t(n(e(D,C),-o[1]),n(e(S,v),l[1]))),a[2]),n(t(n(e(X,w),a[1]),t(n(e(N,U),-o[1]),n(e(R,I),l[1]))),-s[2])),t(n(t(n(e(D,C),a[1]),t(n(e(N,U),-s[1]),n(e(x,Q),l[1]))),o[2]),n(t(n(e(S,v),a[1]),t(n(e(R,I),-s[1]),n(e(x,Q),o[1]))),-l[2]))),r[3]))),t(t(n(t(t(n(t(n(e(X,w),s[1]),t(n(e(D,C),-o[1]),n(e(S,v),l[1]))),r[2]),n(t(n(e(X,w),r[1]),t(n(e(Z,B),-o[1]),n(e(G,h),l[1]))),-s[2])),t(n(t(n(e(D,C),r[1]),t(n(e(Z,B),-s[1]),n(e(m,d),l[1]))),o[2]),n(t(n(e(S,v),r[1]),t(n(e(G,h),-s[1]),n(e(m,d),o[1]))),-l[2]))),-a[3]),n(t(t(n(t(n(e(X,w),a[1]),t(n(e(N,U),-o[1]),n(e(R,I),l[1]))),r[2]),n(t(n(e(X,w),r[1]),t(n(e(Z,B),-o[1]),n(e(G,h),l[1]))),-a[2])),t(n(t(n(e(N,U),r[1]),t(n(e(Z,B),-a[1]),n(e(f,u),l[1]))),o[2]),n(t(n(e(R,I),r[1]),t(n(e(G,h),-a[1]),n(e(f,u),o[1]))),-l[2]))),s[3])),t(n(t(t(n(t(n(e(D,C),a[1]),t(n(e(N,U),-s[1]),n(e(x,Q),l[1]))),r[2]),n(t(n(e(D,C),r[1]),t(n(e(Z,B),-s[1]),n(e(m,d),l[1]))),-a[2])),t(n(t(n(e(N,U),r[1]),t(n(e(Z,B),-a[1]),n(e(f,u),l[1]))),s[2]),n(t(n(e(x,Q),r[1]),t(n(e(m,d),-a[1]),n(e(f,u),s[1]))),-l[2]))),-o[3]),n(t(t(n(t(n(e(S,v),a[1]),t(n(e(R,I),-s[1]),n(e(x,Q),o[1]))),r[2]),n(t(n(e(S,v),r[1]),t(n(e(G,h),-s[1]),n(e(m,d),o[1]))),-a[2])),t(n(t(n(e(R,I),r[1]),t(n(e(G,h),-a[1]),n(e(f,u),o[1]))),s[2]),n(t(n(e(x,Q),r[1]),t(n(e(m,d),-a[1]),n(e(f,u),s[1]))),-o[2]))),l[3]))))),O=e(_,z);return O[O.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function h(t){var e=d[t.length];return e||(e=d[t.length]=o(t.length)),e.apply(void 0,t)}function B(t,e,i,n,r,a,s,o){return function(e,i,l,c,g,u){switch(arguments.length){case 0:case 1:return 0;case 2:return n(e,i);case 3:return r(e,i,l);case 4:return a(e,i,l,c);case 5:return s(e,i,l,c,g);case 6:return o(e,i,l,c,g,u)}for(var d=new Array(arguments.length),h=0;h<arguments.length;++h)d[h]=arguments[h];return t(d)}}!function(){for(;d.length<=6;)d.push(o(d.length));t.exports=B.apply(void 0,[h].concat(d));for(var e=0;e<=6;++e)t.exports[e]=d[e]}()},727:function(t,e,i){var n=i(2962);function r(t){var e=2===t?a:3===t?s:4===t?o:5===t?l:c;return e(t<6?n[t]:n)}function a(t){return function(e,i){return[t([[+i[0],+e[0][1]],[+i[1],+e[1][1]]]),t([[+e[0][0],+i[0]],[+e[1][0],+i[1]]]),t(e)]}}function s(t){return function(e,i){return[t([[+i[0],+e[0][1],+e[0][2]],[+i[1],+e[1][1],+e[1][2]],[+i[2],+e[2][1],+e[2][2]]]),t([[+e[0][0],+i[0],+e[0][2]],[+e[1][0],+i[1],+e[1][2]],[+e[2][0],+i[2],+e[2][2]]]),t([[+e[0][0],+e[0][1],+i[0]],[+e[1][0],+e[1][1],+i[1]],[+e[2][0],+e[2][1],+i[2]]]),t(e)]}}function o(t){return function(e,i){return[t([[+i[0],+e[0][1],+e[0][2],+e[0][3]],[+i[1],+e[1][1],+e[1][2],+e[1][3]],[+i[2],+e[2][1],+e[2][2],+e[2][3]],[+i[3],+e[3][1],+e[3][2],+e[3][3]]]),t([[+e[0][0],+i[0],+e[0][2],+e[0][3]],[+e[1][0],+i[1],+e[1][2],+e[1][3]],[+e[2][0],+i[2],+e[2][2],+e[2][3]],[+e[3][0],+i[3],+e[3][2],+e[3][3]]]),t([[+e[0][0],+e[0][1],+i[0],+e[0][3]],[+e[1][0],+e[1][1],+i[1],+e[1][3]],[+e[2][0],+e[2][1],+i[2],+e[2][3]],[+e[3][0],+e[3][1],+i[3],+e[3][3]]]),t([[+e[0][0],+e[0][1],+e[0][2],+i[0]],[+e[1][0],+e[1][1],+e[1][2],+i[1]],[+e[2][0],+e[2][1],+e[2][2],+i[2]],[+e[3][0],+e[3][1],+e[3][2],+i[3]]]),t(e)]}}function l(t){return function(e,i){return[t([[+i[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4]],[+i[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4]],[+i[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4]],[+i[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4]],[+i[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+i[0],+e[0][2],+e[0][3],+e[0][4]],[+e[1][0],+i[1],+e[1][2],+e[1][3],+e[1][4]],[+e[2][0],+i[2],+e[2][2],+e[2][3],+e[2][4]],[+e[3][0],+i[3],+e[3][2],+e[3][3],+e[3][4]],[+e[4][0],+i[4],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+i[0],+e[0][3],+e[0][4]],[+e[1][0],+e[1][1],+i[1],+e[1][3],+e[1][4]],[+e[2][0],+e[2][1],+i[2],+e[2][3],+e[2][4]],[+e[3][0],+e[3][1],+i[3],+e[3][3],+e[3][4]],[+e[4][0],+e[4][1],+i[4],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+i[0],+e[0][4]],[+e[1][0],+e[1][1],+e[1][2],+i[1],+e[1][4]],[+e[2][0],+e[2][1],+e[2][2],+i[2],+e[2][4]],[+e[3][0],+e[3][1],+e[3][2],+i[3],+e[3][4]],[+e[4][0],+e[4][1],+e[4][2],+i[4],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+i[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+i[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+i[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+i[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+i[4]]]),t(e)]}}function c(t){return function(e,i){return[t([[+i[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+i[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+i[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+i[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+i[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+i[5],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+i[0],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+i[1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+i[2],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+i[3],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+i[4],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+i[5],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+i[0],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+i[1],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+i[2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+i[3],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+i[4],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+i[5],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+i[0],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+i[1],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+i[2],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+i[3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+i[4],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+i[5],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+i[0],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+i[1],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+i[2],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+i[3],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+i[4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+i[5],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+i[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+i[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+i[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+i[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+i[4]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+i[5]]]),t(e)]}}var g=[function(){return[[0]]},function(t,e){return[[e[0]],[t[0][0]]]}];function u(t,e,i,n,r,a,s,o){return function(l,c){switch(l.length){case 0:return t(l,c);case 1:return e(l,c);case 2:return i(l,c);case 3:return n(l,c);case 4:return r(l,c);case 5:return a(l,c)}var g=s[l.length];return g||(g=s[l.length]=o(l.length)),g(l,c)}}!function(){for(;g.length<6;)g.push(r(g.length));t.exports=u.apply(void 0,g.concat([g,r]));for(var e=0;e<6;++e)t.exports[e]=g[e]}()},3250:function(t,e,i){var n=i(5250),r=i(8210),a=i(3012),s=i(8545);function o(t,e,i,n){return function(i,r,a){var s=t(t(e(r[1],a[0]),e(-a[1],r[0])),t(e(i[1],r[0]),e(-r[1],i[0]))),o=t(e(i[1],a[0]),e(-a[1],i[0])),l=n(s,o);return l[l.length-1]}}function l(t,e,i,n){return function(r,a,s,o){var l=t(t(i(t(e(s[1],o[0]),e(-o[1],s[0])),a[2]),t(i(t(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),i(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),t(i(t(e(a[1],o[0]),e(-o[1],a[0])),r[2]),t(i(t(e(r[1],o[0]),e(-o[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),o[2])))),c=t(t(i(t(e(s[1],o[0]),e(-o[1],s[0])),r[2]),t(i(t(e(r[1],o[0]),e(-o[1],r[0])),-s[2]),i(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]))),t(i(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(i(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),s[2])))),g=n(l,c);return g[g.length-1]}}function c(t,e,i,n){return function(r,a,s,o,l){var c=t(t(t(i(t(i(t(e(o[1],l[0]),e(-l[1],o[0])),s[2]),t(i(t(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),i(t(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),a[3]),t(i(t(i(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(i(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),i(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),-s[3]),i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(i(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),i(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),o[3]))),t(i(t(i(t(e(s[1],o[0]),e(-o[1],s[0])),a[2]),t(i(t(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),i(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),-l[3]),t(i(t(i(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(i(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),i(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),r[3]),i(t(i(t(e(o[1],l[0]),e(-l[1],o[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-o[2]),i(t(e(r[1],o[0]),e(-o[1],r[0])),l[2]))),-a[3])))),t(t(i(t(i(t(e(a[1],l[0]),e(-l[1],a[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),l[2]))),o[3]),t(i(t(i(t(e(a[1],o[0]),e(-o[1],a[0])),r[2]),t(i(t(e(r[1],o[0]),e(-o[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),o[2]))),-l[3]),i(t(i(t(e(s[1],o[0]),e(-o[1],s[0])),a[2]),t(i(t(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),i(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),r[3]))),t(i(t(i(t(e(s[1],o[0]),e(-o[1],s[0])),r[2]),t(i(t(e(r[1],o[0]),e(-o[1],r[0])),-s[2]),i(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]))),-a[3]),t(i(t(i(t(e(a[1],o[0]),e(-o[1],a[0])),r[2]),t(i(t(e(r[1],o[0]),e(-o[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),o[2]))),s[3]),i(t(i(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(i(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),-o[3]))))),g=t(t(t(i(t(i(t(e(o[1],l[0]),e(-l[1],o[0])),s[2]),t(i(t(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),i(t(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),r[3]),i(t(i(t(e(o[1],l[0]),e(-l[1],o[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-o[2]),i(t(e(r[1],o[0]),e(-o[1],r[0])),l[2]))),-s[3])),t(i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-s[2]),i(t(e(r[1],s[0]),e(-s[1],r[0])),l[2]))),o[3]),i(t(i(t(e(s[1],o[0]),e(-o[1],s[0])),r[2]),t(i(t(e(r[1],o[0]),e(-o[1],r[0])),-s[2]),i(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]))),-l[3]))),t(t(i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(i(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),i(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),r[3]),i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-s[2]),i(t(e(r[1],s[0]),e(-s[1],r[0])),l[2]))),-a[3])),t(i(t(i(t(e(a[1],l[0]),e(-l[1],a[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),l[2]))),s[3]),i(t(i(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(i(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),-l[3])))),u=n(c,g);return u[u.length-1]}}function g(t){return(3===t?o:4===t?l:c)(r,n,a,s)}var u=g(3),d=g(4),h=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,i){var n,r=(t[1]-i[1])*(e[0]-i[0]),a=(t[0]-i[0])*(e[1]-i[1]),s=r-a;if(r>0){if(a<=0)return s;n=r+a}else{if(!(r<0))return s;if(a>=0)return s;n=-(r+a)}var o=33306690738754716e-32*n;return s>=o||s<=-o?s:u(t,e,i)},function(t,e,i,n){var r=t[0]-n[0],a=e[0]-n[0],s=i[0]-n[0],o=t[1]-n[1],l=e[1]-n[1],c=i[1]-n[1],g=t[2]-n[2],u=e[2]-n[2],h=i[2]-n[2],B=a*c,p=s*l,F=s*o,f=r*c,Q=r*l,I=a*o,U=g*(B-p)+u*(F-f)+h*(Q-I),b=7771561172376103e-31*((Math.abs(B)+Math.abs(p))*Math.abs(g)+(Math.abs(F)+Math.abs(f))*Math.abs(u)+(Math.abs(Q)+Math.abs(I))*Math.abs(h));return U>b||-U>b?U:d(t,e,i,n)}];function B(t){var e=h[t.length];return e||(e=h[t.length]=g(t.length)),e.apply(void 0,t)}function p(t,e,i,n,r,a,s){return function(e,i,o,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return n(e,i);case 3:return r(e,i,o);case 4:return a(e,i,o,l);case 5:return s(e,i,o,l,c)}for(var g=new Array(arguments.length),u=0;u<arguments.length;++u)g[u]=arguments[u];return t(g)}}!function(){for(;h.length<=5;)h.push(g(h.length));t.exports=p.apply(void 0,[B].concat(h));for(var e=0;e<=5;++e)t.exports[e]=h[e]}()},5382:function(t,e,i){var n=i(8210),r=i(3012);t.exports=function(t,e){if(1===t.length)return r(e,t[0]);if(1===e.length)return r(t,e[0]);if(0===t.length||0===e.length)return[0];var i=[0];if(t.length<e.length)for(var a=0;a<t.length;++a)i=n(i,r(e,t[a]));else for(a=0;a<e.length;++a)i=n(i,r(t,e[a]));return i}},3012:function(t,e,i){var n=i(5250),r=i(9362);t.exports=function(t,e){var i=t.length;if(1===i){var a=n(t[0],e);return a[0]?a:[a[1]]}var s=new Array(2*i),o=[.1,.1],l=[.1,.1],c=0;n(t[0],e,o),o[0]&&(s[c++]=o[0]);for(var g=1;g<i;++g){n(t[g],e,l);var u=o[1];r(u,l[0],o),o[0]&&(s[c++]=o[0]);var d=l[1],h=o[1],B=d+h,p=h-(B-d);o[1]=B,p&&(s[c++]=p)}o[1]&&(s[c++]=o[1]);0===c&&(s[c++]=0);return s.length=c,s}},1125:function(t,e,i){t.exports=function(t,e,i,r){var a=n(t,i,r),s=n(e,i,r);if(a>0&&s>0||a<0&&s<0)return!1;var o=n(i,t,e),l=n(r,t,e);if(o>0&&l>0||o<0&&l<0)return!1;if(0===a&&0===s&&0===o&&0===l)return function(t,e,i,n){for(var r=0;r<2;++r){var a=t[r],s=e[r],o=Math.min(a,s),l=Math.max(a,s),c=i[r],g=n[r],u=Math.min(c,g);if(Math.max(c,g)<o||l<u)return!1}return!0}(t,e,i,r);return!0};var n=i(3250)[3]},8545:function(t){t.exports=function(t,e){var i=0|t.length,n=0|e.length;if(1===i&&1===n)return function(t,e){var i=t+e,n=i-t,r=i-n,a=e-n,s=t-r,o=s+a;if(o)return[o,i];return[i]}(t[0],-e[0]);var r,a,s=i+n,o=new Array(s),l=0,c=0,g=0,u=Math.abs,d=t[c],h=u(d),B=-e[g],p=u(B);h<p?(a=d,(c+=1)<i&&(h=u(d=t[c]))):(a=B,(g+=1)<n&&(p=u(B=-e[g])));c<i&&h<p||g>=n?(r=d,(c+=1)<i&&(h=u(d=t[c]))):(r=B,(g+=1)<n&&(p=u(B=-e[g])));var F,f,Q=r+a,I=Q-r,U=a-I,b=U,y=Q;for(;c<i&&g<n;)h<p?(r=d,(c+=1)<i&&(h=u(d=t[c]))):(r=B,(g+=1)<n&&(p=u(B=-e[g]))),(U=(a=b)-(I=(Q=r+a)-r))&&(o[l++]=U),b=y-((F=y+Q)-(f=F-y))+(Q-f),y=F;for(;c<i;)(U=(a=b)-(I=(Q=(r=d)+a)-r))&&(o[l++]=U),b=y-((F=y+Q)-(f=F-y))+(Q-f),y=F,(c+=1)<i&&(d=t[c]);for(;g<n;)(U=(a=b)-(I=(Q=(r=B)+a)-r))&&(o[l++]=U),b=y-((F=y+Q)-(f=F-y))+(Q-f),y=F,(g+=1)<n&&(B=-e[g]);b&&(o[l++]=b);y&&(o[l++]=y);l||(o[l++]=0);return o.length=l,o}},8210:function(t){t.exports=function(t,e){var i=0|t.length,n=0|e.length;if(1===i&&1===n)return function(t,e){var i=t+e,n=i-t,r=i-n,a=e-n,s=t-r,o=s+a;if(o)return[o,i];return[i]}(t[0],e[0]);var r,a,s=i+n,o=new Array(s),l=0,c=0,g=0,u=Math.abs,d=t[c],h=u(d),B=e[g],p=u(B);h<p?(a=d,(c+=1)<i&&(h=u(d=t[c]))):(a=B,(g+=1)<n&&(p=u(B=e[g])));c<i&&h<p||g>=n?(r=d,(c+=1)<i&&(h=u(d=t[c]))):(r=B,(g+=1)<n&&(p=u(B=e[g])));var F,f,Q=r+a,I=Q-r,U=a-I,b=U,y=Q;for(;c<i&&g<n;)h<p?(r=d,(c+=1)<i&&(h=u(d=t[c]))):(r=B,(g+=1)<n&&(p=u(B=e[g]))),(U=(a=b)-(I=(Q=r+a)-r))&&(o[l++]=U),b=y-((F=y+Q)-(f=F-y))+(Q-f),y=F;for(;c<i;)(U=(a=b)-(I=(Q=(r=d)+a)-r))&&(o[l++]=U),b=y-((F=y+Q)-(f=F-y))+(Q-f),y=F,(c+=1)<i&&(d=t[c]);for(;g<n;)(U=(a=b)-(I=(Q=(r=B)+a)-r))&&(o[l++]=U),b=y-((F=y+Q)-(f=F-y))+(Q-f),y=F,(g+=1)<n&&(B=e[g]);b&&(o[l++]=b);y&&(o[l++]=y);l||(o[l++]=0);return o.length=l,o}},9127:function(t,e,i){t.exports=function(t){return r(n(t))};var n=i(6204),r=i(5771)},7765:function(t,e,i){t.exports=function(t,e,i,o){i=i||0,void 0===o&&(o=function(t){for(var e=t.length,i=0,n=0;n<e;++n)i=0|Math.max(i,t[n].length);return i-1}(t));if(0===t.length||o<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(t,e){for(var i=t.length,n=r.mallocUint8(i),a=0;a<i;++a)n[a]=t[a]<e|0;return n}(e,+i),c=function(t,e){for(var i=t.length,s=e*(e+1)/2*i|0,o=r.mallocUint32(2*s),l=0,c=0;c<i;++c)for(var g=t[c],u=(e=g.length,0);u<e;++u)for(var d=0;d<u;++d){var h=g[d],B=g[u];o[l++]=0|Math.min(h,B),o[l++]=0|Math.max(h,B)}a(n(o,[l/2|0,2]));var p=2;for(c=2;c<l;c+=2)o[c-2]===o[c]&&o[c-1]===o[c+1]||(o[p++]=o[c],o[p++]=o[c+1]);return n(o,[p/2|0,2])}(t,o),g=function(t,e,i,a){for(var s=t.data,o=t.shape[0],l=r.mallocDouble(o),c=0,g=0;g<o;++g){var u=s[2*g],d=s[2*g+1];if(i[u]!==i[d]){var h=e[u],B=e[d];s[2*c]=u,s[2*c+1]=d,l[c++]=(B-a)/(B-h)}}return t.shape[0]=c,n(l,[c])}(c,e,l,+i),u=function(t,e){var i=r.mallocInt32(2*e),n=t.shape[0],a=t.data;i[0]=0;for(var s=0,o=0;o<n;++o){var l=a[2*o];if(l!==s){for(i[2*s+1]=o;++s<l;)i[2*s]=o,i[2*s+1]=o;i[2*s]=o}}i[2*s+1]=n;for(;++s<e;)i[2*s]=i[2*s+1]=n;return i}(c,0|e.length),d=s(o)(t,c.data,u,l),h=function(t){for(var e=0|t.shape[0],i=t.data,n=new Array(e),r=0;r<e;++r)n[r]=[i[2*r],i[2*r+1]];return n}(c),B=[].slice.call(g.data,0,g.shape[0]);return r.free(l),r.free(c.data),r.free(g.data),r.free(u),{cells:d,vertexIds:h,vertexWeights:B}};var n=i(9618),r=i(1888),a=i(446),s=i(1570)},1570:function(t){t.exports=function(t){return e[t]()};var e=[function(){return function(t,e,i,n){for(var r=t.length,a=0;a<r;++a){t[a].length}return[]}},function(){function t(t,e,i,n){for(var r=0|Math.min(i,n),a=0|Math.max(i,n),s=t[2*r],o=t[2*r+1];s<o;){var l=s+o>>1,c=e[2*l+1];if(c===a)return l;a<c?o=l:s=l+1}return s}return function(e,i,n,r){for(var a=e.length,s=[],o=0;o<a;++o){var l=e[o];if(2===l.length){var c=(r[l[0]]|0)+(r[l[1]]<<1);if(0===c||3===c)continue;switch(c){case 0:break;case 1:s.push([t(n,i,l[0],l[1])]);break;case 2:s.push([t(n,i,l[1],l[0])])}}}return s}},function(){function t(t,e,i,n){for(var r=0|Math.min(i,n),a=0|Math.max(i,n),s=t[2*r],o=t[2*r+1];s<o;){var l=s+o>>1,c=e[2*l+1];if(c===a)return l;a<c?o=l:s=l+1}return s}return function(e,i,n,r){for(var a=e.length,s=[],o=0;o<a;++o){var l=e[o],c=l.length;if(3===c){if(0===(g=(r[l[0]]|0)+(r[l[1]]<<1)+(r[l[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:s.push([t(n,i,l[0],l[2]),t(n,i,l[0],l[1])]);break;case 2:s.push([t(n,i,l[1],l[0]),t(n,i,l[1],l[2])]);break;case 3:s.push([t(n,i,l[0],l[2]),t(n,i,l[1],l[2])]);break;case 4:s.push([t(n,i,l[2],l[1]),t(n,i,l[2],l[0])]);break;case 5:s.push([t(n,i,l[2],l[1]),t(n,i,l[0],l[1])]);break;case 6:s.push([t(n,i,l[1],l[0]),t(n,i,l[2],l[0])])}}else if(2===c){var g;if(0===(g=(r[l[0]]|0)+(r[l[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:s.push([t(n,i,l[0],l[1])]);break;case 2:s.push([t(n,i,l[1],l[0])])}}}return s}},function(){function t(t,e,i,n){for(var r=0|Math.min(i,n),a=0|Math.max(i,n),s=t[2*r],o=t[2*r+1];s<o;){var l=s+o>>1,c=e[2*l+1];if(c===a)return l;a<c?o=l:s=l+1}return s}return function(e,i,n,r){for(var a=e.length,s=[],o=0;o<a;++o){var l=e[o],c=l.length;if(4===c){if(0===(g=(r[l[0]]|0)+(r[l[1]]<<1)+(r[l[2]]<<2)+(r[l[3]]<<3))||15===g)continue;switch(g){case 0:break;case 1:s.push([t(n,i,l[0],l[1]),t(n,i,l[0],l[2]),t(n,i,l[0],l[3])]);break;case 2:s.push([t(n,i,l[1],l[2]),t(n,i,l[1],l[0]),t(n,i,l[1],l[3])]);break;case 3:s.push([t(n,i,l[1],l[2]),t(n,i,l[0],l[2]),t(n,i,l[0],l[3])],[t(n,i,l[1],l[3]),t(n,i,l[1],l[2]),t(n,i,l[0],l[3])]);break;case 4:s.push([t(n,i,l[2],l[0]),t(n,i,l[2],l[1]),t(n,i,l[2],l[3])]);break;case 5:s.push([t(n,i,l[0],l[1]),t(n,i,l[2],l[1]),t(n,i,l[0],l[3])],[t(n,i,l[2],l[1]),t(n,i,l[2],l[3]),t(n,i,l[0],l[3])]);break;case 6:s.push([t(n,i,l[2],l[0]),t(n,i,l[1],l[0]),t(n,i,l[1],l[3])],[t(n,i,l[2],l[3]),t(n,i,l[2],l[0]),t(n,i,l[1],l[3])]);break;case 7:s.push([t(n,i,l[0],l[3]),t(n,i,l[1],l[3]),t(n,i,l[2],l[3])]);break;case 8:s.push([t(n,i,l[3],l[1]),t(n,i,l[3],l[0]),t(n,i,l[3],l[2])]);break;case 9:s.push([t(n,i,l[3],l[1]),t(n,i,l[0],l[1]),t(n,i,l[0],l[2])],[t(n,i,l[3],l[2]),t(n,i,l[3],l[1]),t(n,i,l[0],l[2])]);break;case 10:s.push([t(n,i,l[1],l[0]),t(n,i,l[3],l[0]),t(n,i,l[1],l[2])],[t(n,i,l[3],l[0]),t(n,i,l[3],l[2]),t(n,i,l[1],l[2])]);break;case 11:s.push([t(n,i,l[1],l[2]),t(n,i,l[0],l[2]),t(n,i,l[3],l[2])]);break;case 12:s.push([t(n,i,l[3],l[0]),t(n,i,l[2],l[0]),t(n,i,l[2],l[1])],[t(n,i,l[3],l[1]),t(n,i,l[3],l[0]),t(n,i,l[2],l[1])]);break;case 13:s.push([t(n,i,l[0],l[1]),t(n,i,l[2],l[1]),t(n,i,l[3],l[1])]);break;case 14:s.push([t(n,i,l[2],l[0]),t(n,i,l[1],l[0]),t(n,i,l[3],l[0])])}}else if(3===c){if(0===(g=(r[l[0]]|0)+(r[l[1]]<<1)+(r[l[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:s.push([t(n,i,l[0],l[2]),t(n,i,l[0],l[1])]);break;case 2:s.push([t(n,i,l[1],l[0]),t(n,i,l[1],l[2])]);break;case 3:s.push([t(n,i,l[0],l[2]),t(n,i,l[1],l[2])]);break;case 4:s.push([t(n,i,l[2],l[1]),t(n,i,l[2],l[0])]);break;case 5:s.push([t(n,i,l[2],l[1]),t(n,i,l[0],l[1])]);break;case 6:s.push([t(n,i,l[1],l[0]),t(n,i,l[2],l[0])])}}else if(2===c){var g;if(0===(g=(r[l[0]]|0)+(r[l[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:s.push([t(n,i,l[0],l[1])]);break;case 2:s.push([t(n,i,l[1],l[0])])}}}return s}}]},6803:function(t,e,i){i(8828),i(1755),e.Fw=function(t,e){var i=t.length,n=t.length-e.length,r=Math.min;if(n)return n;switch(i){case 0:return 0;case 1:return t[0]-e[0];case 2:return(o=t[0]+t[1]-e[0]-e[1])||r(t[0],t[1])-r(e[0],e[1]);case 3:var a=t[0]+t[1],s=e[0]+e[1];if(o=a+t[2]-(s+e[2]))return o;var o,l=r(t[0],t[1]),c=r(e[0],e[1]);return(o=r(l,t[2])-r(c,e[2]))||r(l+t[2],a)-r(c+e[2],s);default:var g=t.slice(0);g.sort();var u=e.slice(0);u.sort();for(var d=0;d<i;++d)if(n=g[d]-u[d])return n;return 0}}},3105:function(t,e){function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,e|=i=((t>>>=e)>255)<<3,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=i,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},2014:function(t,e,i){var n=i(3105),r=i(4623);function a(t,e){var i=t.length,n=t.length-e.length,r=Math.min;if(n)return n;switch(i){case 0:return 0;case 1:return t[0]-e[0];case 2:return(o=t[0]+t[1]-e[0]-e[1])||r(t[0],t[1])-r(e[0],e[1]);case 3:var a=t[0]+t[1],s=e[0]+e[1];if(o=a+t[2]-(s+e[2]))return o;var o,l=r(t[0],t[1]),c=r(e[0],e[1]);return(o=r(l,t[2])-r(c,e[2]))||r(l+t[2],a)-r(c+e[2],s);default:var g=t.slice(0);g.sort();var u=e.slice(0);u.sort();for(var d=0;d<i;++d)if(n=g[d]-u[d])return n;return 0}}function s(t,e){return a(t[0],e[0])}function o(t,e){if(e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=[t[r],e[r]];n.sort(s);for(r=0;r<i;++r)t[r]=n[r][0],e[r]=n[r][1];return t}return t.sort(a),t}function l(t){if(0===t.length)return[];for(var e=1,i=t.length,n=1;n<i;++n){var r=t[n];if(a(r,t[n-1])){if(n===e){e++;continue}t[e++]=r}}return t.length=e,t}function c(t,e){for(var i=0,n=t.length-1,r=-1;i<=n;){var s=i+n>>1,o=a(t[s],e);o<=0?(0===o&&(r=s),i=s+1):o>0&&(n=s-1)}return r}function g(t,e){for(var i=new Array(t.length),r=0,s=i.length;r<s;++r)i[r]=[];for(var o=[],l=(r=0,e.length);r<l;++r)for(var g=e[r],u=g.length,d=1,h=1<<u;d<h;++d){o.length=n.popCount(d);for(var B=0,p=0;p<u;++p)d&1<<p&&(o[B++]=g[p]);var F=c(t,o);if(!(F<0))for(;i[F++].push(r),!(F>=t.length||0!==a(t[F],o)););}return i}function u(t,e){if(e<0)return[];for(var i=[],r=(1<<e+1)-1,a=0;a<t.length;++a)for(var s=t[a],l=r;l<1<<s.length;l=n.nextCombination(l)){for(var c=new Array(e+1),g=0,u=0;u<s.length;++u)l&1<<u&&(c[g++]=s[u]);i.push(c)}return o(i)}e.dimension=function(t){for(var e=0,i=Math.max,n=0,r=t.length;n<r;++n)e=i(e,t[n].length);return e-1},e.countVertices=function(t){for(var e=-1,i=Math.max,n=0,r=t.length;n<r;++n)for(var a=t[n],s=0,o=a.length;s<o;++s)e=i(e,a[s]);return e+1},e.cloneCells=function(t){for(var e=new Array(t.length),i=0,n=t.length;i<n;++i)e[i]=t[i].slice(0);return e},e.compareCells=a,e.normalize=o,e.unique=l,e.findCell=c,e.incidence=g,e.dual=function(t,e){if(!e)return g(l(u(t,0)),t);for(var i=new Array(e),n=0;n<e;++n)i[n]=[];n=0;for(var r=t.length;n<r;++n)for(var a=t[n],s=0,o=a.length;s<o;++s)i[a[s]].push(n);return i},e.explode=function(t){for(var e=[],i=0,n=t.length;i<n;++i)for(var r=t[i],a=0|r.length,s=1,l=1<<a;s<l;++s){for(var c=[],g=0;g<a;++g)s>>>g&1&&c.push(r[g]);e.push(c)}return o(e)},e.skeleton=u,e.boundary=function(t){for(var e=[],i=0,n=t.length;i<n;++i)for(var r=t[i],a=0,s=r.length;a<s;++a){for(var l=new Array(r.length-1),c=0,g=0;c<s;++c)c!==a&&(l[g++]=r[c]);e.push(l)}return o(e)},e.connectedComponents=function(t,e){return e?function(t,e){for(var i=new r(e),n=0;n<t.length;++n)for(var a=t[n],s=0;s<a.length;++s)for(var o=s+1;o<a.length;++o)i.link(a[s],a[o]);var l=[],c=i.ranks;for(n=0;n<c.length;++n)c[n]=-1;for(n=0;n<t.length;++n){var g=i.find(t[n][0]);c[g]<0?(c[g]=l.length,l.push([t[n].slice(0)])):l[c[g]].push(t[n].slice(0))}return l}(t,e):function(t){for(var e=l(o(u(t,0))),i=new r(e.length),n=0;n<t.length;++n)for(var a=t[n],s=0;s<a.length;++s)for(var g=c(e,[a[s]]),d=s+1;d<a.length;++d)i.link(g,c(e,[a[d]]));var h=[],B=i.ranks;for(n=0;n<B.length;++n)B[n]=-1;for(n=0;n<t.length;++n){var p=i.find(c(e,[t[n][0]]));B[p]<0?(B[p]=h.length,h.push([t[n].slice(0)])):h[B[p]].push(t[n].slice(0))}return h}(t)}},4623:function(t){function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},e.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var i=e[t];e[t]=e[i],t=i}return t},e.prototype.link=function(t,e){var i=this.find(t),n=this.find(e);if(i!==n){var r=this.ranks,a=this.roots,s=r[i],o=r[n];s<o?a[i]=n:o<s?a[n]=i:(a[n]=i,++r[i])}}},5878:function(t,e,i){t.exports=function(t,e,i){for(var a=e.length,s=t.length,o=new Array(a),l=new Array(a),c=new Array(a),g=new Array(a),u=0;u<a;++u)o[u]=l[u]=-1,c[u]=1/0,g[u]=!1;for(u=0;u<s;++u){var d=t[u];if(2!==d.length)throw new Error("Input must be a graph");var h=d[1],B=d[0];-1!==l[B]?l[B]=-2:l[B]=h,-1!==o[h]?o[h]=-2:o[h]=B}function p(t){if(g[t])return 1/0;var i=o[t],r=l[t];return i<0||r<0?1/0:function(t,e,i){var r=Math.abs(n(t,e,i)),a=Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2));return r/a}(e[t],e[i],e[r])}function F(t,e){var i=x[t],n=x[e];x[t]=n,x[e]=i,v[i]=e,v[n]=t}function f(t){return c[x[t]]}function Q(t){return 1&t?t-1>>1:(t>>1)-1}function I(t){for(var e=f(t);;){var i=e,n=2*t+1,r=2*(t+1),a=t;if(n<C){var s=f(n);s<i&&(a=n,i=s)}if(r<C)f(r)<i&&(a=r);if(a===t)return t;F(t,a),t=a}}function U(t){for(var e=f(t);t>0;){var i=Q(t);if(i>=0)if(e<f(i)){F(t,i),t=i;continue}return t}}function b(){if(C>0){var t=x[0];return F(0,C-1),C-=1,I(0),t}return-1}function y(t,e){var i=x[t];return c[i]===e?t:(c[i]=-1/0,U(t),b(),c[i]=e,U((C+=1)-1))}function m(t){if(!g[t]){g[t]=!0;var e=o[t],i=l[t];o[i]>=0&&(o[i]=e),l[e]>=0&&(l[e]=i),v[e]>=0&&y(v[e],p(e)),v[i]>=0&&y(v[i],p(i))}}var x=[],v=new Array(a);for(u=0;u<a;++u){(c[u]=p(u))<1/0?(v[u]=x.length,x.push(u)):v[u]=-1}var C=x.length;for(u=C>>1;u>=0;--u)I(u);for(;;){var A=b();if(A<0||c[A]>i)break;m(A)}var L=[];for(u=0;u<a;++u)g[u]||(v[u]=L.length,L.push(e[u].slice()));function G(t,e){if(t[e]<0)return e;var i=e,n=e;do{var r=t[n];if(!g[n]||r<0||r===n)break;if(r=t[n=r],!g[n]||r<0||r===n)break;n=r,i=t[i]}while(i!==n);for(var a=e;a!==n;a=t[a])t[a]=n;return n}L.length;var R=[];return t.forEach((function(t){var e=G(o,t[0]),i=G(l,t[1]);if(e>=0&&i>=0&&e!==i){var n=v[e],r=v[i];n!==r&&R.push([n,r])}})),r.unique(r.normalize(R)),{positions:L,edges:R}};var n=i(3250),r=i(2014)},1303:function(t,e,i){t.exports=function(t,e){var i,a,s,o;if(e[0][0]<e[1][0])i=e[0],a=e[1];else{if(!(e[0][0]>e[1][0]))return r(e,t);i=e[1],a=e[0]}if(t[0][0]<t[1][0])s=t[0],o=t[1];else{if(!(t[0][0]>t[1][0]))return-r(t,e);s=t[1],o=t[0]}var l=n(i,a,o),c=n(i,a,s);if(l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;if(l=n(o,s,a),c=n(o,s,i),l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;return a[0]-o[0]};var n=i(3250);function r(t,e){var i,r,a,s;if(e[0][0]<e[1][0])i=e[0],r=e[1];else{if(!(e[0][0]>e[1][0])){var o=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),c=Math.min(e[0][1],e[1][1]),g=Math.max(e[0][1],e[1][1]);return l<c?l-c:o>g?o-g:l-g}i=e[1],r=e[0]}t[0][1]<t[1][1]?(a=t[0],s=t[1]):(a=t[1],s=t[0]);var u=n(r,i,a);return u||((u=n(r,i,s))||s-r)}},4209:function(t,e,i){t.exports=function(t){for(var e=t.length,i=2*e,n=new Array(i),a=0;a<e;++a){var l=t[a],c=l[0][0]<l[1][0];n[2*a]=new u(l[0][0],l,c,a),n[2*a+1]=new u(l[1][0],l,!c,a)}n.sort((function(t,e){var i=t.x-e.x;return i||((i=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1]))}));var d=r(s),h=[],B=[],p=[];for(a=0;a<i;){for(var F=n[a].x,f=[];a<i;){var Q=n[a];if(Q.x!==F)break;a+=1,Q.segment[0][0]===Q.x&&Q.segment[1][0]===Q.x?Q.create&&(Q.segment[0][1]<Q.segment[1][1]?(f.push(new g(Q.segment[0][1],Q.index,!0,!0)),f.push(new g(Q.segment[1][1],Q.index,!1,!1))):(f.push(new g(Q.segment[1][1],Q.index,!0,!1)),f.push(new g(Q.segment[0][1],Q.index,!1,!0)))):d=Q.create?d.insert(Q.segment,Q.index):d.remove(Q.segment)}h.push(d.root),B.push(F),p.push(f)}return new o(h,B,p)};var n=i(2478),r=i(3840),a=i(3250),s=i(1303);function o(t,e,i){this.slabs=t,this.coordinates=e,this.horizontal=i}function l(t,e){return t.y-e}function c(t,e){for(var i=null;t;){var n,r,s=t.key;s[0][0]<s[1][0]?(n=s[0],r=s[1]):(n=s[1],r=s[0]);var o=a(n,r,e);if(o<0)t=t.left;else if(o>0)if(e[0]!==s[1][0])i=t,t=t.right;else{if(l=c(t.right,e))return l;t=t.left}else{if(e[0]!==s[1][0])return t;var l;if(l=c(t.right,e))return l;t=t.left}}return i}function g(t,e,i,n){this.y=t,this.index=e,this.start=i,this.closed=n}function u(t,e,i,n){this.x=t,this.segment=e,this.create=i,this.index=n}o.prototype.castUp=function(t){var e=n.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var i=c(this.slabs[e],t),r=-1;if(i&&(r=i.value),this.coordinates[e]===t[0]){var o=null;if(i&&(o=i.key),e>0){var g=c(this.slabs[e-1],t);g&&(o?s(g.key,o)>0&&(o=g.key,r=g.value):(r=g.value,o=g.key))}var u=this.horizontal[e];if(u.length>0){var d=n.ge(u,t[1],l);if(d<u.length){var h=u[d];if(t[1]===h.y){if(h.closed)return h.index;for(;d<u.length-1&&u[d+1].y===t[1];)if((h=u[d+=1]).closed)return h.index;if(h.y===t[1]&&!h.start){if((d+=1)>=u.length)return r;h=u[d]}}if(h.start)if(o){var B=a(o[0],o[1],[t[0],h.y]);o[0][0]>o[1][0]&&(B=-B),B>0&&(r=h.index)}else r=h.index;else h.y!==t[1]&&(r=h.index)}}}return r}},5202:function(t,e,i){var n=i(1944),r=i(8210);function a(t,e){var i=r(n(t,e),[e[e.length-1]]);return i[i.length-1]}function s(t,e,i,n){var r=-e/(n-e);r<0?r=0:r>1&&(r=1);for(var a=1-r,s=t.length,o=new Array(s),l=0;l<s;++l)o[l]=r*t[l]+a*i[l];return o}t.exports=function(t,e){for(var i=[],n=[],r=a(t[t.length-1],e),o=t[t.length-1],l=t[0],c=0;c<t.length;++c,o=l){var g=a(l=t[c],e);if(r<0&&g>0||r>0&&g<0){var u=s(o,g,l,r);i.push(u),n.push(u.slice())}g<0?n.push(l.slice()):g>0?i.push(l.slice()):(i.push(l.slice()),n.push(l.slice())),r=g}return{positive:i,negative:n}},t.exports.positive=function(t,e){for(var i=[],n=a(t[t.length-1],e),r=t[t.length-1],o=t[0],l=0;l<t.length;++l,r=o){var c=a(o=t[l],e);(n<0&&c>0||n>0&&c<0)&&i.push(s(r,c,o,n)),c>=0&&i.push(o.slice()),n=c}return i},t.exports.negative=function(t,e){for(var i=[],n=a(t[t.length-1],e),r=t[t.length-1],o=t[0],l=0;l<t.length;++l,r=o){var c=a(o=t[l],e);(n<0&&c>0||n>0&&c<0)&&i.push(s(r,c,o,n)),c<=0&&i.push(o.slice()),n=c}return i}},3387:function(t,e,i){var n;!function(){var r={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(t){return function(t,e){var i,n,s,o,l,c,g,u,d,h=1,B=t.length,p="";for(n=0;n<B;n++)if("string"==typeof t[n])p+=t[n];else if("object"==typeof t[n]){if((o=t[n]).keys)for(i=e[h],s=0;s<o.keys.length;s++){if(null==i)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',o.keys[s],o.keys[s-1]));i=i[o.keys[s]]}else i=o.param_no?e[o.param_no]:e[h++];if(r.not_type.test(o.type)&&r.not_primitive.test(o.type)&&i instanceof Function&&(i=i()),r.numeric_arg.test(o.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(a("[sprintf] expecting number but found %T",i));switch(r.number.test(o.type)&&(u=i>=0),o.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,o.width?parseInt(o.width):0);break;case"e":i=o.precision?parseFloat(i).toExponential(o.precision):parseFloat(i).toExponential();break;case"f":i=o.precision?parseFloat(i).toFixed(o.precision):parseFloat(i);break;case"g":i=o.precision?String(Number(i.toPrecision(o.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=o.precision?i.substring(0,o.precision):i;break;case"t":i=String(!!i),i=o.precision?i.substring(0,o.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=o.precision?i.substring(0,o.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=o.precision?i.substring(0,o.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}r.json.test(o.type)?p+=i:(!r.number.test(o.type)||u&&!o.sign?d="":(d=u?"+":"-",i=i.toString().replace(r.sign,"")),c=o.pad_char?"0"===o.pad_char?"0":o.pad_char.charAt(1):" ",g=o.width-(d+i).length,l=o.width&&g>0?c.repeat(g):"",p+=o.align?d+i+l:"0"===c?d+l+i:l+d+i)}return p}(function(t){if(o[t])return o[t];var e,i=t,n=[],a=0;for(;i;){if(null!==(e=r.text.exec(i)))n.push(e[0]);else if(null!==(e=r.modulo.exec(i)))n.push("%");else{if(null===(e=r.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){a|=1;var s=[],l=e[2],c=[];if(null===(c=r.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=r.key_access.exec(l)))s.push(c[1]);else{if(null===(c=r.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1])}e[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}i=i.substring(e[0].length)}return o[t]=n}(t),arguments)}function s(t,e){return a.apply(null,[t].concat(e||[]))}var o=Object.create(null);e.sprintf=a,e.vsprintf=s,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=s,void 0===(n=function(){return{sprintf:a,vsprintf:s}}.call(e,i,e,t))||(t.exports=n))}()},3711:function(t,e,i){t.exports=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var i=r(t,e),n=i.length,a=new Array(n),s=new Array(n),o=0;o<n;++o)a[o]=[i[o]],s[o]=[o];return{positions:a,cells:s}}(t,e);var i=t.order.join()+"-"+t.dtype,o=s[i];e=+e||0;o||(o=s[i]=function(t,e){var i=t.length+"d",r=a[i];if(r)return r(n,t,e)}(t.order,t.dtype));return o(t,e)};var n=i(2640),r=i(781),a={"2d":function(t,e,i){var n=t({order:e,scalarArguments:3,getters:"generic"===i?[0]:void 0,phase:function(t,e,i,n){return t>n|0},vertex:function(t,e,i,n,r,a,s,o,l,c,g,u,d){var h=(s|0)+(o<<1)+(l<<2)+(c<<3)|0;if(0!==h&&15!==h)switch(h){case 0:case 15:g.push([t-.5,e-.5]);break;case 1:g.push([t-.25-.25*(n+i-2*d)/(i-n),e-.25-.25*(r+i-2*d)/(i-r)]);break;case 2:g.push([t-.75-.25*(-n-i+2*d)/(n-i),e-.25-.25*(a+n-2*d)/(n-a)]);break;case 3:g.push([t-.5,e-.5-.5*(r+i+a+n-4*d)/(i-r+n-a)]);break;case 4:g.push([t-.25-.25*(a+r-2*d)/(r-a),e-.75-.25*(-r-i+2*d)/(r-i)]);break;case 5:g.push([t-.5-.5*(n+i+a+r-4*d)/(i-n+r-a),e-.5]);break;case 6:g.push([t-.5-.25*(-n-i+a+r)/(n-i+r-a),e-.5-.25*(-r-i+a+n)/(r-i+n-a)]);break;case 7:g.push([t-.75-.25*(a+r-2*d)/(r-a),e-.75-.25*(a+n-2*d)/(n-a)]);break;case 8:g.push([t-.75-.25*(-a-r+2*d)/(a-r),e-.75-.25*(-a-n+2*d)/(a-n)]);break;case 9:g.push([t-.5-.25*(n+i+-a-r)/(i-n+a-r),e-.5-.25*(r+i+-a-n)/(i-r+a-n)]);break;case 10:g.push([t-.5-.5*(-n-i-a-r+4*d)/(n-i+a-r),e-.5]);break;case 11:g.push([t-.25-.25*(-a-r+2*d)/(a-r),e-.75-.25*(r+i-2*d)/(i-r)]);break;case 12:g.push([t-.5,e-.5-.5*(-r-i-a-n+4*d)/(r-i+a-n)]);break;case 13:g.push([t-.75-.25*(n+i-2*d)/(i-n),e-.25-.25*(-a-n+2*d)/(a-n)]);break;case 14:g.push([t-.25-.25*(-n-i+2*d)/(n-i),e-.25-.25*(-r-i+2*d)/(r-i)])}},cell:function(t,e,i,n,r,a,s,o,l){r?o.push([t,e]):o.push([e,t])}});return function(t,e){var i=[],r=[];return n(t,i,r,e),{positions:i,cells:r}}}};var s={}},665:function(t,e,i){var n=i(3202);t.exports=s;var r=96;function a(t,e){var i=n(getComputedStyle(t).getPropertyValue(e));return i[0]*s(i[1],t)}function s(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return function(t,e){var i=document.createElement("div");i.style["font-size"]="128"+t,e.appendChild(i);var n=a(i,"font-size")/128;return e.removeChild(i),n}(t,e);case"em":return a(e,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},7261:function(t,e,i){t.exports=function(t){var e=(t=t||{}).center||[0,0,0],i=t.up||[0,1,0],n=t.right||u(i),r=t.radius||1,a=t.theta||0,g=t.phi||0;if(e=[].slice.call(e,0,3),i=[].slice.call(i,0,3),o(i,i),n=[].slice.call(n,0,3),o(n,n),"eye"in t){var h=t.eye,B=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];s(n,B,i),c(n[0],n[1],n[2])<1e-6?n=u(i):o(n,n),r=c(B[0],B[1],B[2]);var p=l(i,B)/r,F=l(n,B)/r;g=Math.acos(p),a=Math.acos(F)}return r=Math.log(r),new d(t.zoomMin,t.zoomMax,e,i,n,r,a,g)};var n=i(9215),r=i(7608),a=i(6079),s=i(5911),o=i(3536),l=i(244);function c(t,e,i){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(i,2))}function g(t){return Math.min(1,Math.max(-1,t))}function u(t){var e=Math.abs(t[0]),i=Math.abs(t[1]),n=Math.abs(t[2]),r=[0,0,0];e>Math.max(i,n)?r[2]=1:i>Math.max(e,n)?r[0]=1:r[1]=1;for(var a=0,s=0,l=0;l<3;++l)a+=t[l]*t[l],s+=r[l]*t[l];for(l=0;l<3;++l)r[l]-=s/a*t[l];return o(r,r),r}function d(t,e,i,r,a,s,o,l){this.center=n(i),this.up=n(r),this.right=n(a),this.radius=n([s]),this.angle=n([o,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var c=0;c<16;++c)this.computedMatrix[c]=.5;this.recalcMatrix(0)}var h=d.prototype;h.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},h.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},h.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,i=this.computedRight,n=0,r=0,a=0;a<3;++a)r+=e[a]*i[a],n+=e[a]*e[a];var l=Math.sqrt(n),g=0;for(a=0;a<3;++a)i[a]-=e[a]*r/n,g+=i[a]*i[a],e[a]/=l;var u=Math.sqrt(g);for(a=0;a<3;++a)i[a]/=u;var d=this.computedToward;s(d,e,i),o(d,d);var h=Math.exp(this.computedRadius[0]),B=this.computedAngle[0],p=this.computedAngle[1],F=Math.cos(B),f=Math.sin(B),Q=Math.cos(p),I=Math.sin(p),U=this.computedCenter,b=F*Q,y=f*Q,m=I,x=-F*I,v=-f*I,C=Q,A=this.computedEye,L=this.computedMatrix;for(a=0;a<3;++a){var G=b*i[a]+y*d[a]+m*e[a];L[4*a+1]=x*i[a]+v*d[a]+C*e[a],L[4*a+2]=G,L[4*a+3]=0}var R=L[1],S=L[5],w=L[9],V=L[2],E=L[6],Z=L[10],N=S*Z-w*E,D=w*V-R*Z,X=R*E-S*V,H=c(N,D,X);N/=H,D/=H,X/=H,L[0]=N,L[4]=D,L[8]=X;for(a=0;a<3;++a)A[a]=U[a]+L[2+4*a]*h;for(a=0;a<3;++a){g=0;for(var W=0;W<3;++W)g+=L[a+4*W]*A[W];L[12+a]=-g}L[15]=1},h.getMatrix=function(t,e){this.recalcMatrix(t);var i=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=i[n];return e}return i};var B=[0,0,0];h.rotate=function(t,e,i,n){if(this.angle.move(t,e,i),n){this.recalcMatrix(t);var r=this.computedMatrix;B[0]=r[2],B[1]=r[6],B[2]=r[10];for(var s=this.computedUp,o=this.computedRight,l=this.computedToward,c=0;c<3;++c)r[4*c]=s[c],r[4*c+1]=o[c],r[4*c+2]=l[c];a(r,r,n,B);for(c=0;c<3;++c)s[c]=r[4*c],o[c]=r[4*c+1];this.up.set(t,s[0],s[1],s[2]),this.right.set(t,o[0],o[1],o[2])}},h.pan=function(t,e,i,n){e=e||0,i=i||0,n=n||0,this.recalcMatrix(t);var r=this.computedMatrix;Math.exp(this.computedRadius[0]);var a=r[1],s=r[5],o=r[9],l=c(a,s,o);a/=l,s/=l,o/=l;var g=r[0],u=r[4],d=r[8],h=g*a+u*s+d*o,B=c(g-=a*h,u-=s*h,d-=o*h),p=(g/=B)*e+a*i,F=(u/=B)*e+s*i,f=(d/=B)*e+o*i;this.center.move(t,p,F,f);var Q=Math.exp(this.computedRadius[0]);Q=Math.max(1e-4,Q+n),this.radius.set(t,Math.log(Q))},h.translate=function(t,e,i,n){this.center.move(t,e||0,i||0,n||0)},h.setMatrix=function(t,e,i,n){var a=1;"number"==typeof i&&(a=0|i),(a<0||a>3)&&(a=1);var s=(a+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var o=e[a],l=e[a+4],u=e[a+8];if(n){var d=Math.abs(o),h=Math.abs(l),B=Math.abs(u),p=Math.max(d,h,B);d===p?(o=o<0?-1:1,l=u=0):B===p?(u=u<0?-1:1,o=l=0):(l=l<0?-1:1,o=u=0)}else{var F=c(o,l,u);o/=F,l/=F,u/=F}var f,Q,I=e[s],U=e[s+4],b=e[s+8],y=I*o+U*l+b*u,m=c(I-=o*y,U-=l*y,b-=u*y),x=l*(b/=m)-u*(U/=m),v=u*(I/=m)-o*b,C=o*U-l*I,A=c(x,v,C);if(x/=A,v/=A,C/=A,this.center.jump(t,Y,J,_),this.radius.idle(t),this.up.jump(t,o,l,u),this.right.jump(t,I,U,b),2===a){var L=e[1],G=e[5],R=e[9],S=L*I+G*U+R*b,w=L*x+G*v+R*C;f=N<0?-Math.PI/2:Math.PI/2,Q=Math.atan2(w,S)}else{var V=e[2],E=e[6],Z=e[10],N=V*o+E*l+Z*u,D=V*I+E*U+Z*b,X=V*x+E*v+Z*C;f=Math.asin(g(N)),Q=Math.atan2(X,D)}this.angle.jump(t,Q,f),this.recalcMatrix(t);var H=e[2],W=e[6],k=e[10],M=this.computedMatrix;r(M,e);var T=M[15],Y=M[12]/T,J=M[13]/T,_=M[14]/T,z=Math.exp(this.computedRadius[0]);this.center.jump(t,Y-H*z,J-W*z,_-k*z)},h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},h.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},h.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},h.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},h.lookAt=function(t,e,i,n){this.recalcMatrix(t),e=e||this.computedEye,i=i||this.computedCenter;var r=(n=n||this.computedUp)[0],a=n[1],s=n[2],o=c(r,a,s);if(!(o<1e-6)){r/=o,a/=o,s/=o;var l=e[0]-i[0],u=e[1]-i[1],d=e[2]-i[2],h=c(l,u,d);if(!(h<1e-6)){l/=h,u/=h,d/=h;var B=this.computedRight,p=B[0],F=B[1],f=B[2],Q=r*p+a*F+s*f,I=c(p-=Q*r,F-=Q*a,f-=Q*s);if(!(I<.01&&(I=c(p=a*d-s*u,F=s*l-r*d,f=r*u-a*l))<1e-6)){p/=I,F/=I,f/=I,this.up.set(t,r,a,s),this.right.set(t,p,F,f),this.center.set(t,i[0],i[1],i[2]),this.radius.set(t,Math.log(h));var U=a*f-s*F,b=s*p-r*f,y=r*F-a*p,m=c(U,b,y),x=r*l+a*u+s*d,v=p*l+F*u+f*d,C=(U/=m)*l+(b/=m)*u+(y/=m)*d,A=Math.asin(g(x)),L=Math.atan2(C,v),G=this.angle._state,R=G[G.length-1],S=G[G.length-2];R%=2*Math.PI;var w=Math.abs(R+2*Math.PI-L),V=Math.abs(R-L),E=Math.abs(R-2*Math.PI-L);w<V&&(R+=2*Math.PI),E<V&&(R-=2*Math.PI),this.angle.jump(this.angle.lastT(),R,S),this.angle.set(t,L,A)}}}}},5250:function(t){t.exports=function(t,i,n){var r=t*i,a=e*t,s=a-t,o=a-s,l=t-o,c=e*i,g=c-i,u=c-g,d=i-u,h=r-o*u,B=l*d-(h-l*u-o*d);if(n)return n[0]=B,n[1]=r,n;return[B,r]};var e=+(Math.pow(2,27)+1)},9362:function(t){t.exports=function(t,e,i){var n=t+e,r=n-t,a=n-r,s=e-r,o=t-a;if(i)return i[0]=o+s,i[1]=n,i;return[o+s,n]}},1888:function(t,e,i){var n=i(8828),r=i(1338),a=i(4793).hp;i.g.__TYPEDARRAY_POOL||(i.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var s="undefined"!=typeof Uint8ClampedArray,o="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=i.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=r([32,0])),c.BIGUINT64||(c.BIGUINT64=r([32,0])),c.BIGINT64||(c.BIGINT64=r([32,0])),c.BUFFER||(c.BUFFER=r([32,0]));var g=c.DATA,u=c.BUFFER;function d(t){if(t){var e=t.length||t.byteLength,i=n.log2(e);g[i].push(t)}}function h(t){t=n.nextPow2(t);var e=n.log2(t),i=g[e];return i.length>0?i.pop():new ArrayBuffer(t)}function B(t){return new Uint8Array(h(t),0,t)}function p(t){return new Uint16Array(h(2*t),0,t)}function F(t){return new Uint32Array(h(4*t),0,t)}function f(t){return new Int8Array(h(t),0,t)}function Q(t){return new Int16Array(h(2*t),0,t)}function I(t){return new Int32Array(h(4*t),0,t)}function U(t){return new Float32Array(h(4*t),0,t)}function b(t){return new Float64Array(h(8*t),0,t)}function y(t){return s?new Uint8ClampedArray(h(t),0,t):B(t)}function m(t){return o?new BigUint64Array(h(8*t),0,t):null}function x(t){return l?new BigInt64Array(h(8*t),0,t):null}function v(t){return new DataView(h(t),0,t)}function C(t){t=n.nextPow2(t);var e=n.log2(t),i=u[e];return i.length>0?i.pop():new a(t)}e.free=function(t){if(a.isBuffer(t))u[n.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,i=0|n.log2(e);g[i].push(t)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeBigUint64=e.freeInt8=e.freeInt16=e.freeInt32=e.freeBigInt64=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(t){d(t.buffer)},e.freeArrayBuffer=d,e.freeBuffer=function(t){u[n.log2(t.length)].push(t)},e.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return h(t);switch(e){case"uint8":return B(t);case"uint16":return p(t);case"uint32":return F(t);case"int8":return f(t);case"int16":return Q(t);case"int32":return I(t);case"float":case"float32":return U(t);case"double":case"float64":return b(t);case"uint8_clamped":return y(t);case"bigint64":return x(t);case"biguint64":return m(t);case"buffer":return C(t);case"data":case"dataview":return v(t);default:return null}return null},e.mallocArrayBuffer=h,e.mallocUint8=B,e.mallocUint16=p,e.mallocUint32=F,e.mallocInt8=f,e.mallocInt16=Q,e.mallocInt32=I,e.mallocFloat32=e.mallocFloat=U,e.mallocFloat64=e.mallocDouble=b,e.mallocUint8Clamped=y,e.mallocBigUint64=m,e.mallocBigInt64=x,e.mallocDataView=v,e.mallocBuffer=C,e.clearCache=function(){for(var t=0;t<32;++t)c.UINT8[t].length=0,c.UINT16[t].length=0,c.UINT32[t].length=0,c.INT8[t].length=0,c.INT16[t].length=0,c.INT32[t].length=0,c.FLOAT[t].length=0,c.DOUBLE[t].length=0,c.BIGUINT64[t].length=0,c.BIGINT64[t].length=0,c.UINT8C[t].length=0,g[t].length=0,u[t].length=0}},1755:function(t){function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e;var i=e.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},i.find=function(t){for(var e=t,i=this.roots;i[t]!==t;)t=i[t];for(;i[e]!==t;){var n=i[e];i[e]=t,e=n}return t},i.link=function(t,e){var i=this.find(t),n=this.find(e);if(i!==n){var r=this.ranks,a=this.roots,s=r[i],o=r[n];s<o?a[i]=n:o<s?a[n]=i:(a[n]=i,++r[i])}}},1682:function(t){t.exports=function(t,e,i){return 0===t.length?t:e?(i||t.sort(e),function(t,e){for(var i=1,n=t.length,r=t[0],a=t[0],s=1;s<n;++s)if(a=r,e(r=t[s],a)){if(s===i){i++;continue}t[i++]=r}return t.length=i,t}(t,e)):(i||t.sort(),function(t){for(var e=1,i=t.length,n=t[0],r=t[0],a=1;a<i;++a,r=n)if(r=n,(n=t[a])!==r){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}(t))}},4359:function(t,e,i){t.exports=function(t,e){"object"==typeof e&&null!==e||(e={});return n(t,e.canvas||r,e.context||a,e)};var n=i(7718),r=null,a=null;"undefined"!=typeof document&&((r=document.createElement("canvas")).width=8192,r.height=1024,a=r.getContext("2d"))},7718:function(t,e,i){t.exports=function(t,e,i,n){var a=64,s=1.25,o={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};n&&(n.size&&n.size>0&&(a=n.size),n.lineSpacing&&n.lineSpacing>0&&(s=n.lineSpacing),n.styletags&&n.styletags.breaklines&&(o.breaklines=!!n.styletags.breaklines),n.styletags&&n.styletags.bolds&&(o.bolds=!!n.styletags.bolds),n.styletags&&n.styletags.italics&&(o.italics=!!n.styletags.italics),n.styletags&&n.styletags.subscripts&&(o.subscripts=!!n.styletags.subscripts),n.styletags&&n.styletags.superscripts&&(o.superscripts=!!n.styletags.superscripts));i.font=[n.fontStyle,n.fontVariant,n.fontWeight,a+"px",n.font].filter((function(t){return t})).join(" "),i.textAlign="start",i.textBaseline="alphabetic",i.direction="ltr";var l=function(t,e,i,n,a,s){i=i.replace(/\n/g,""),i=!0===s.breaklines?i.replace(/\<br\>/g,"\n"):i.replace(/\<br\>/g," ");var o="",l=[];for(m=0;m<i.length;++m)l[m]=o;!0===s.bolds&&(l=I(c,g,i,l));!0===s.italics&&(l=I(u,d,i,l));!0===s.superscripts&&(l=I(h,p,i,l));!0===s.subscripts&&(l=I(F,Q,i,l));var U=[],b="";for(m=0;m<i.length;++m)null!==l[m]&&(b+=i[m],U.push(l[m]));var y,m,x,v,C,A=b.split("\n"),L=A.length,G=Math.round(a*n),R=n,S=2*n,w=0,V=L*G+S;t.height<V&&(t.height=V);e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff";var E=0,Z="";function N(){if(""!==Z){var t=e.measureText(Z).width;e.fillText(Z,R+x,S+v),x+=t}}function D(){return Math.round(C)+"px "}function X(t,i){var n=""+e.font;if(!0===s.subscripts){var r=t.indexOf(f),a=i.indexOf(f),o=r>-1?parseInt(t[1+r]):0,l=a>-1?parseInt(i[1+a]):0;o!==l&&(n=n.replace(D(),"?px "),C*=Math.pow(.75,l-o),n=n.replace("?px ",D())),v+=.25*G*(l-o)}if(!0===s.superscripts){var c=t.indexOf(B),u=i.indexOf(B),h=c>-1?parseInt(t[1+c]):0,p=u>-1?parseInt(i[1+u]):0;h!==p&&(n=n.replace(D(),"?px "),C*=Math.pow(.75,p-h),n=n.replace("?px ",D())),v-=.25*G*(p-h)}if(!0===s.bolds){var F=t.indexOf(g)>-1,Q=i.indexOf(g)>-1;!F&&Q&&(n=I?n.replace("italic ","italic bold "):"bold "+n),F&&!Q&&(n=n.replace("bold ",""))}if(!0===s.italics){var I=t.indexOf(d)>-1,U=i.indexOf(d)>-1;!I&&U&&(n="italic "+n),I&&!U&&(n=n.replace("italic ",""))}e.font=n}for(y=0;y<L;++y){var H=A[y]+"\n";for(x=0,v=y*G,C=n,Z="",m=0;m<H.length;++m){var W=m+E<U.length?U[m+E]:U[U.length-1];o===W?Z+=H[m]:(N(),Z=H[m],void 0!==W&&(X(o,W),o=W))}N(),E+=H.length;var k=0|Math.round(x+2*R);w<k&&(w=k)}var M=w,T=S+G*L,Y=r(e.getImageData(0,0,M,T).data,[T,M,4]);return Y.pick(-1,-1,0).transpose(1,0)}(e,i,t,a,s,o);return y(l,n,a)},t.exports.processPixels=y;var n=i(3711),r=i(9618),a=i(5878),s=i(332),o=i(2538),l=i(2095),c="b",g="b|",u="i",d="i|",h="sup",B="+",p="+1",F="sub",f="-",Q="-1";function I(t,e,i,n){for(var r="<"+t+">",a="</"+t+">",s=r.length,o=a.length,l=e[0]===B||e[0]===f,c=0,g=-o;c>-1&&-1!==(c=i.indexOf(r,c))&&-1!==(g=i.indexOf(a,c+s))&&!(g<=c);){for(var u=c;u<g+o;++u)if(u<c+s||u>=g)n[u]=null,i=i.substr(0,u)+" "+i.substr(u+1);else if(null!==n[u]){var d=n[u].indexOf(e[0]);-1===d?n[u]+=e:l&&(n[u]=n[u].substr(0,d+1)+(1+parseInt(n[u][d+1]))+n[u].substr(d+2))}var h=c+s,p=i.substr(h,g-h).indexOf(r);c=-1!==p?p:g+o}return n}function U(t,e){var i=n(t,128);return e?a(i.cells,i.positions,.25):{edges:i.cells,positions:i.positions}}function b(t,e,i,n){var r=U(t,n),a=function(t,e,i){for(var n=e.textAlign||"start",r=e.textBaseline||"alphabetic",a=[1<<30,1<<30],s=[0,0],o=t.length,l=0;l<o;++l)for(var c=t[l],g=0;g<2;++g)a[g]=0|Math.min(a[g],c[g]),s[g]=0|Math.max(s[g],c[g]);var u=0;switch(n){case"center":u=-.5*(a[0]+s[0]);break;case"right":case"end":u=-s[0];break;case"left":case"start":u=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var d=0;switch(r){case"hanging":case"top":d=-a[1];break;case"middle":d=-.5*(a[1]+s[1]);break;case"alphabetic":case"ideographic":d=-3*i;break;case"bottom":d=-s[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+r+"'")}var h=1/i;return"lineHeight"in e?h*=+e.lineHeight:"width"in e?h=e.width/(s[0]-a[0]):"height"in e&&(h=e.height/(s[1]-a[1])),t.map((function(t){return[h*(t[0]+u),h*(t[1]+d)]}))}(r.positions,e,i),c=r.edges,g="ccw"===e.orientation;if(s(a,c),e.polygons||e.polygon||e.polyline){for(var u=l(c,a),d=new Array(u.length),h=0;h<u.length;++h){for(var B=u[h],p=new Array(B.length),F=0;F<B.length;++F){for(var f=B[F],Q=new Array(f.length),I=0;I<f.length;++I)Q[I]=a[f[I]].slice();g&&Q.reverse(),p[F]=Q}d[h]=p}return d}return e.triangles||e.triangulate||e.triangle?{cells:o(a,c,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:c,positions:a}}function y(t,e,i){try{return b(t,e,i,!0)}catch(t){}try{return b(t,e,i,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(t){!function(){if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=F);var e=!1;if("function"==typeof WeakMap){var i=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var n=new i,r=Object.freeze({});if(n.set(r,1),1===n.get(r))return void(t.exports=WeakMap);e=!0}}var a=Object.getOwnPropertyNames,s=Object.defineProperty,o=Object.isExtensible,l="weakmap:",c=l+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var g=new ArrayBuffer(25),u=new Uint8Array(g);crypto.getRandomValues(u),c=l+"rand:"+Array.prototype.map.call(u,(function(t){return(t%36).toString(36)})).join("")+"___"}if(s(Object,"getOwnPropertyNames",{value:function(t){return a(t).filter(f)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;s(Object,"getPropertyNames",{value:function(t){return d(t).filter(f)}})}!function(){var t=Object.freeze;s(Object,"freeze",{value:function(e){return Q(e),t(e)}});var e=Object.seal;s(Object,"seal",{value:function(t){return Q(t),e(t)}});var i=Object.preventExtensions;s(Object,"preventExtensions",{value:function(t){return Q(t),i(t)}})}();var h=!1,B=0,p=function(){this instanceof p||U();var t=[],e=[],i=B++;return Object.create(p.prototype,{get___:{value:I((function(n,r){var a,s=Q(n);return s?i in s?s[i]:r:(a=t.indexOf(n))>=0?e[a]:r}))},has___:{value:I((function(e){var n=Q(e);return n?i in n:t.indexOf(e)>=0}))},set___:{value:I((function(n,r){var a,s=Q(n);return s?s[i]=r:(a=t.indexOf(n))>=0?e[a]=r:(a=t.length,e[a]=r,t[a]=n),this}))},delete___:{value:I((function(n){var r,a,s=Q(n);return s?i in s&&delete s[i]:!((r=t.indexOf(n))<0)&&(a=t.length-1,t[r]=void 0,e[r]=e[a],t[r]=t[a],t.length=a,e.length=a,!0)}))}})};p.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof i?function(){function n(){this instanceof p||U();var t,n=new i,r=void 0,a=!1;return t=e?function(t,e){return n.set(t,e),n.has(t)||(r||(r=new p),r.set(t,e)),this}:function(t,e){if(a)try{n.set(t,e)}catch(i){r||(r=new p),r.set___(t,e)}else n.set(t,e);return this},Object.create(p.prototype,{get___:{value:I((function(t,e){return r?n.has(t)?n.get(t):r.get___(t,e):n.get(t,e)}))},has___:{value:I((function(t){return n.has(t)||!!r&&r.has___(t)}))},set___:{value:I(t)},delete___:{value:I((function(t){var e=!!n.delete(t);return r&&r.delete___(t)||e}))},permitHostObjects___:{value:I((function(t){if(t!==F)throw new Error("bogus call to permitHostObjects___");a=!0}))}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=p.prototype,t.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=p)}function F(t){t.permitHostObjects___&&t.permitHostObjects___(F)}function f(t){return!(t.substr(0,8)==l&&"___"===t.substr(t.length-3))}function Q(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[c];if(e&&e.key===t)return e;if(o(t)){e={key:t};try{return s(t,c,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function I(t){return t.prototype=null,Object.freeze(t)}function U(){h||"undefined"==typeof console||(h=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},236:function(t,e,i){var n=i(8284);t.exports=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var i=e.valueOf(t);return i&&i.identity===t?i:n(e,t)}}},8284:function(t){t.exports=function(t,e){var i={identity:e},n=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?n.apply(this,arguments):i},writable:!0}),i}},606:function(t,e,i){var n=i(236);t.exports=function(){var t=n();return{get:function(e,i){var n=t(e);return n.hasOwnProperty("value")?n.value:i},set:function(e,i){return t(e).value=i,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}},3349:function(t){var e,i=function(){return function(t,e,i,n,r,a){var s=t[0],o=i[0],l=[0],c=o;n|=0;var g=0,u=o;for(g=0;g<s;++g){var d=e[n]-a,h=e[n+c]-a;d>=0!=h>=0&&r.push(l[0]+.5+.5*(d+h)/(d-h)),n+=u,++l[0]}}};t.exports=(e={funcName:{funcName:"zeroCrossings"}.funcName},function(t){var e={};return function(i,n,r){var a=i.dtype,s=i.order,o=[a,s.join()].join(),l=e[o];return l||(e[o]=l=t([a,s])),l(i.shape.slice(0),i.data,i.stride,0|i.offset,n,r)}}(i.bind(void 0,e)))},781:function(t,e,i){t.exports=function(t,e){var i=[];return e=+e||0,n(t.hi(t.shape[0]-1),i,e),i};var n=i(3349)},7790:function(){}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var n=i(1964);E_.exports=n}();var Z_=E_.exports,N_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},D_=function(t){var e,i,n=[],r=1;if("string"==typeof t)if(t=t.toLowerCase(),N_[t])n=N_[t].slice(),i="rgb";else if("transparent"===t)r=0,i="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var a=t.slice(1);r=1,(l=a.length)<=4?(n=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===l&&(r=parseInt(a[3]+a[3],16)/255)):(n=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===l&&(r=parseInt(a[6]+a[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var s=e[1],o="rgb"===s;i=a=s.replace(/a$/,"");var l="cmyk"===a?4:"gray"===a?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(t,e){if(/%$/.test(t))return e===l?parseFloat(t)/100:"rgb"===a?255*parseFloat(t)/100:parseFloat(t);if("h"===a[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==X_[t])return X_[t]}return parseFloat(t)})),s===a&&n.push(1),r=o||void 0===n[l]?1:n[l],n=n.slice(0,l)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(n=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),i=t.match(/([a-z])/gi).join("").toLowerCase());else isNaN(t)?Array.isArray(t)||t.length?(n=[t[0],t[1],t[2]],i="rgb",r=4===t.length?t[3]:1):t instanceof Object&&(null!=t.r||null!=t.red||null!=t.R?(i="rgb",n=[t.r||t.red||t.R||0,t.g||t.green||t.G||0,t.b||t.blue||t.B||0]):(i="hsl",n=[t.h||t.hue||t.H||0,t.s||t.saturation||t.S||0,t.l||t.lightness||t.L||t.b||t.brightness]),r=t.a||t.alpha||t.opacity||1,null!=t.opacity&&(r/=100)):(i="rgb",n=[t>>>16,(65280&t)>>>8,255&t]);return{space:i,values:n,alpha:r}},X_={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var H_=D_;var W_=function(t,e,i){return e<i?t<e?e:t>i?i:t:t<i?i:t>e?e:t};var k_=function(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw.apply(null,arguments));var i=H_(t);if(!i.space)return[];var n=[0,0,0],r="h"===i.space[0]?[360,100,100]:[255,255,255];return(e=Array(3))[0]=Math.min(Math.max(i.values[0],n[0]),r[0]),e[1]=Math.min(Math.max(i.values[1],n[1]),r[1]),e[2]=Math.min(Math.max(i.values[2],n[2]),r[2]),"h"===i.space[0]&&(e=function(t){var e,i,n,r,a,s=t[0]/360,o=t[1]/100,l=t[2]/100,c=0;if(0===o)return a=255*l,[a,a,a];for(e=2*l-(i=l<.5?l*(1+o):l+o-l*o),r=[0,0,0];c<3;)(n=s+1/3*-(c-1))<0?n++:n>1&&n--,a=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,r[c++]=255*a;return r}(e)),e.push(Math.min(Math.max(i.alpha,0),1)),e},M_=W_,T_=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},Y_=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var i=new(T_(e))(4),n="uint8"!==e&&"uint8_clamped"!==e;return t.length&&"string"!=typeof t||((t=k_(t))[0]/=255,t[1]/=255,t[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1))}(t)?(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=null!=t[3]?t[3]:255,n&&(i[0]/=255,i[1]/=255,i[2]/=255,i[3]/=255),i):(n?(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=null!=t[3]?t[3]:1):(i[0]=M_(Math.floor(255*t[0]),0,255),i[1]=M_(Math.floor(255*t[1]),0,255),i[2]=M_(Math.floor(255*t[2]),0,255),i[3]=null==t[3]?255:M_(Math.floor(255*t[3]),0,255)),i)};var J_=$c,__=kg,z_=Y_,O_=DQ,K_=uu.defaultLine,P_=eg.isArrayOrTypedArray,j_=z_(K_),q_=1;function $_(t,e){var i=t;return i[3]*=e,i}function tz(t){if(J_(t))return j_;var e=z_(t);return e.length?e:j_}function ez(t){return J_(t)?t:q_}var iz=function(t,e,i){var n=t.color;n&&n._inputArray&&(n=n._inputArray);var r,a,s,o,l,c=P_(n),g=P_(e),u=O_.extractOpts(t),d=[];if(r=void 0!==u.colorscale?O_.makeColorScaleFuncFromTrace(t):tz,a=c?function(t,e){return void 0===t[e]?j_:z_(r(t[e]))}:tz,s=g?function(t,e){return void 0===t[e]?q_:ez(t[e])}:ez,c||g)for(var h=0;h<i;h++)o=a(n,h),l=s(e,h),d[h]=$_(o,l);else d=$_(z_(n),e);return d},nz=function(t){var e=O_.extractOpts(t),i=e.colorscale;return e.reversescale&&(i=O_.flipScale(e.colorscale)),i.map((function(t){var e=t[0],i=__(t[1]).toRgb();return{index:e,rgb:[i.r,i.g,i.b,i.a]}}))},rz=Y_;var az=function(t){return t?rz(t):[0,0,0,1]},sz=Z_.gl_mesh3d,oz=nz,lz=_B.isArrayOrTypedArray,cz=az,gz=DQ.extractOpts,uz=function(t,e,i,n){n=n||t.length;for(var r=new Array(n),a=0;a<n;a++)r[a]=[t[a],e[a],i[a]];return r},dz=function(t,e){for(var i=e.length-1;i>0;i--){var n=Math.min(e[i],e[i-1]),r=Math.max(e[i],e[i-1]);if(r>n&&n<t&&t<=r)return{id:i,distRatio:(r-t)/(r-n)}}return{id:0,distRatio:0}};function hz(t,e,i){this.scene=t,this.uid=i,this.mesh=e,this.name="",this.data=null,this.showContour=!1}var Bz=hz.prototype;Bz.handlePick=function(t){if(t.object===this.mesh){var e=t.data.index,i=this.data._meshX[e],n=this.data._meshY[e],r=this.data._meshZ[e],a=this.data._Ys.length,s=this.data._Zs.length,o=dz(i,this.data._Xs).id,l=dz(n,this.data._Ys).id,c=dz(r,this.data._Zs).id,g=t.index=c+s*l+s*a*o;t.traceCoordinate=[this.data._meshX[g],this.data._meshY[g],this.data._meshZ[g],this.data._value[g]];var u=this.data.hovertext||this.data.text;return lz(u)&&void 0!==u[g]?t.textLabel=u[g]:u&&(t.textLabel=u),!0}},Bz.update=function(t){var e=this.scene,i=e.fullSceneLayout;function n(t,e,i,n){return e.map((function(e){return t.d2l(e,0,n)*i}))}this.data=function(t){t._meshI=[],t._meshJ=[],t._meshK=[];var e,i,n,r,a,s,o,l=t.surface.show,c=t.spaceframe.show,g=t.surface.fill,u=t.spaceframe.fill,d=!1,h=!1,B=0,p=t._Xs,F=t._Ys,f=t._Zs,Q=p.length,I=F.length,U=f.length,b=pz.indexOf(t._gridFill.replace(/-/g,"").replace(/\+/g,"")),y=function(t,e,i){switch(b){case 5:return i+U*e+U*I*t;case 4:return i+U*t+U*Q*e;case 3:return e+I*i+I*U*t;case 2:return e+I*t+I*Q*i;case 1:return t+Q*i+Q*U*e;default:return t+Q*e+Q*I*i}},m=t._minValues,x=t._maxValues,v=t._vMin,C=t._vMax;function A(t,e,o){for(var l=s.length,c=i;c<l;c++)if(t===n[c]&&e===r[c]&&o===a[c])return c;return-1}function L(){i=e}function G(){n=[],r=[],a=[],s=[],e=0,L()}function R(t,i,o,l){return n.push(t),r.push(i),a.push(o),s.push(l),++e-1}function S(e,i,n){return t._meshI.push(e),t._meshJ.push(i),t._meshK.push(n),++B-1}function w(t,e,i){for(var n=[],r=0;r<t.length;r++)n[r]=(t[r]+e[r]+i[r])/3;return n}function V(t,e,i){for(var n=[],r=0;r<t.length;r++)n[r]=t[r]*(1-i)+i*e[r];return n}function E(t){o=t}function Z(t,e){var i=t[0],n=t[1],r=t[2],a=w(i,n,r),s=Math.sqrt(1-o),l=V(a,i,s),c=V(a,n,s),g=V(a,r,s),u=e[0],d=e[1],h=e[2];return{xyzv:[[i,n,c],[c,l,i],[n,r,g],[g,c,n],[r,i,l],[l,g,r]],abc:[[u,d,-1],[-1,-1,u],[d,h,-1],[-1,-1,d],[h,u,-1],[-1,-1,h]]}}function N(t,e){return"all"===t||null===t||t.indexOf(e)>-1}function D(t,e){return null===t?e:t}function X(t,e,i){L();var n=[e],r=[i];if(o>=1)n=[e],r=[i];else if(o>0){var a=Z(e,i);n=a.xyzv,r=a.abc}for(var s=0;s<n.length;s++){e=n[s],i=r[s];for(var l=[],c=0;c<3;c++){var g=e[c][0],u=e[c][1],d=e[c][2],h=e[c][3],B=i[c]>-1?i[c]:A(g,u,d);l[c]=B>-1?B:R(g,u,d,D(t,h))}S(l[0],l[1],l[2])}}function H(t,e,i){var n=function(n,r,a){X(t,[e[n],e[r],e[a]],[i[n],i[r],i[a]])};n(0,1,2),n(2,3,0)}function W(t,e,i){var n=function(n,r,a){X(t,[e[n],e[r],e[a]],[i[n],i[r],i[a]])};n(0,1,2),n(3,0,1),n(2,3,0),n(1,2,3)}function k(t,e,i,n){var r=t[3];r<i&&(r=i),r>n&&(r=n);for(var a=(t[3]-r)/(t[3]-e[3]+1e-9),s=[],o=0;o<4;o++)s[o]=(1-a)*t[o]+a*e[o];return s}function M(t,e,i){return t>=e&&t<=i}function T(t){var e=.001*(C-v);return t>=v-e&&t<=C+e}function Y(e){for(var i=[],n=0;n<4;n++){var r=e[n];i.push([t._x[r],t._y[r],t._z[r],t._value[r]])}return i}var J=3;function _(t,e,i,n,r,a){a||(a=1),i=[-1,-1,-1];var s=!1,o=[M(e[0][3],n,r),M(e[1][3],n,r),M(e[2][3],n,r)];if(!o[0]&&!o[1]&&!o[2])return!1;var l=function(t,e,i){return T(e[0][3])&&T(e[1][3])&&T(e[2][3])?(X(t,e,i),!0):a<J&&_(t,e,i,v,C,++a)};if(o[0]&&o[1]&&o[2])return l(t,e,i)||s;var c=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach((function(a){if(o[a[0]]&&o[a[1]]&&!o[a[2]]){var g=e[a[0]],u=e[a[1]],d=e[a[2]],h=k(d,g,n,r),B=k(d,u,n,r);s=l(t,[B,h,g],[-1,-1,i[a[0]]])||s,s=l(t,[g,u,B],[i[a[0]],i[a[1]],-1])||s,c=!0}})),c||[[0,1,2],[1,2,0],[2,0,1]].forEach((function(a){if(o[a[0]]&&!o[a[1]]&&!o[a[2]]){var g=e[a[0]],u=e[a[1]],d=e[a[2]],h=k(u,g,n,r),B=k(d,g,n,r);s=l(t,[B,h,g],[-1,-1,i[a[0]]])||s,c=!0}})),s}function z(t,e,i,n){var r=!1,a=Y(e),s=[M(a[0][3],i,n),M(a[1][3],i,n),M(a[2][3],i,n),M(a[3][3],i,n)];if(!(s[0]||s[1]||s[2]||s[3]))return r;if(s[0]&&s[1]&&s[2]&&s[3])return h&&(r=W(t,a,e)||r),r;var o=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach((function(l){if(s[l[0]]&&s[l[1]]&&s[l[2]]&&!s[l[3]]){var c=a[l[0]],g=a[l[1]],u=a[l[2]],d=a[l[3]];if(h)r=X(t,[c,g,u],[e[l[0]],e[l[1]],e[l[2]]])||r;else{var B=k(d,c,i,n),p=k(d,g,i,n),F=k(d,u,i,n);r=X(null,[B,p,F],[-1,-1,-1])||r}o=!0}})),o?r:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach((function(l){if(s[l[0]]&&s[l[1]]&&!s[l[2]]&&!s[l[3]]){var c=a[l[0]],g=a[l[1]],u=a[l[2]],d=a[l[3]],B=k(u,c,i,n),p=k(u,g,i,n),F=k(d,g,i,n),f=k(d,c,i,n);h?(r=X(t,[c,f,B],[e[l[0]],-1,-1])||r,r=X(t,[g,p,F],[e[l[1]],-1,-1])||r):r=H(null,[B,p,F,f],[-1,-1,-1,-1])||r,o=!0}})),o||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach((function(l){if(s[l[0]]&&!s[l[1]]&&!s[l[2]]&&!s[l[3]]){var c=a[l[0]],g=a[l[1]],u=a[l[2]],d=a[l[3]],B=k(g,c,i,n),p=k(u,c,i,n),F=k(d,c,i,n);h?(r=X(t,[c,B,p],[e[l[0]],-1,-1])||r,r=X(t,[c,p,F],[e[l[0]],-1,-1])||r,r=X(t,[c,F,B],[e[l[0]],-1,-1])||r):r=X(null,[B,p,F],[-1,-1,-1])||r,o=!0}})),r)}function O(t,e,i,n,r,a,s,o,l,c,g){var u=!1;return d&&(N(t,"A")&&(u=z(null,[e,i,n,a],c,g)||u),N(t,"B")&&(u=z(null,[i,n,r,l],c,g)||u),N(t,"C")&&(u=z(null,[i,a,s,l],c,g)||u),N(t,"D")&&(u=z(null,[n,a,o,l],c,g)||u),N(t,"E")&&(u=z(null,[i,n,a,l],c,g)||u)),h&&(u=z(t,[i,n,a,l],c,g)||u),u}function K(t,e,i,n,r,a,s,o){return[!0===o[0]||_(t,Y([e,i,n]),[e,i,n],a,s),!0===o[1]||_(t,Y([n,r,e]),[n,r,e],a,s)]}function P(t,e,i,n,r,a,s,o,l){return o?K(t,e,i,r,n,a,s,l):K(t,i,r,n,e,a,s,l)}function j(t,e,i,n,r,a,s){var o,l,c,g,u=!1,d=function(){u=_(t,[o,l,c],[-1,-1,-1],r,a)||u,u=_(t,[c,g,o],[-1,-1,-1],r,a)||u},h=s[0],B=s[1],p=s[2];return h&&(o=V(Y([y(e,i-0,n-0)])[0],Y([y(e-1,i-0,n-0)])[0],h),l=V(Y([y(e,i-0,n-1)])[0],Y([y(e-1,i-0,n-1)])[0],h),c=V(Y([y(e,i-1,n-1)])[0],Y([y(e-1,i-1,n-1)])[0],h),g=V(Y([y(e,i-1,n-0)])[0],Y([y(e-1,i-1,n-0)])[0],h),d()),B&&(o=V(Y([y(e-0,i,n-0)])[0],Y([y(e-0,i-1,n-0)])[0],B),l=V(Y([y(e-0,i,n-1)])[0],Y([y(e-0,i-1,n-1)])[0],B),c=V(Y([y(e-1,i,n-1)])[0],Y([y(e-1,i-1,n-1)])[0],B),g=V(Y([y(e-1,i,n-0)])[0],Y([y(e-1,i-1,n-0)])[0],B),d()),p&&(o=V(Y([y(e-0,i-0,n)])[0],Y([y(e-0,i-0,n-1)])[0],p),l=V(Y([y(e-0,i-1,n)])[0],Y([y(e-0,i-1,n-1)])[0],p),c=V(Y([y(e-1,i-1,n)])[0],Y([y(e-1,i-1,n-1)])[0],p),g=V(Y([y(e-1,i-0,n)])[0],Y([y(e-1,i-0,n-1)])[0],p),d()),u}function q(t,e,i,n,r,a,s,o,l,c,g,u){var h=t;return u?(d&&"even"===t&&(h=null),O(h,e,i,n,r,a,s,o,l,c,g)):(d&&"odd"===t&&(h=null),O(h,l,o,s,a,r,n,i,e,c,g))}function $(t,e,i,n,r){for(var a=[],s=0,o=0;o<e.length;o++)for(var l=e[o],c=1;c<U;c++)for(var g=1;g<I;g++)a.push(P(t,y(l,g-1,c-1),y(l,g-1,c),y(l,g,c-1),y(l,g,c),i,n,(l+g+c)%2,r&&r[s]?r[s]:[])),s++;return a}function tt(t,e,i,n,r){for(var a=[],s=0,o=0;o<e.length;o++)for(var l=e[o],c=1;c<Q;c++)for(var g=1;g<U;g++)a.push(P(t,y(c-1,l,g-1),y(c,l,g-1),y(c-1,l,g),y(c,l,g),i,n,(c+l+g)%2,r&&r[s]?r[s]:[])),s++;return a}function et(t,e,i,n,r){for(var a=[],s=0,o=0;o<e.length;o++)for(var l=e[o],c=1;c<I;c++)for(var g=1;g<Q;g++)a.push(P(t,y(g-1,c-1,l),y(g-1,c,l),y(g,c-1,l),y(g,c,l),i,n,(g+c+l)%2,r&&r[s]?r[s]:[])),s++;return a}function it(t,e,i){for(var n=1;n<U;n++)for(var r=1;r<I;r++)for(var a=1;a<Q;a++)q(t,y(a-1,r-1,n-1),y(a-1,r-1,n),y(a-1,r,n-1),y(a-1,r,n),y(a,r-1,n-1),y(a,r-1,n),y(a,r,n-1),y(a,r,n),e,i,(a+r+n)%2)}function nt(t,e,i){h=!0,it(t,e,i),h=!1}function rt(t,e,i){d=!0,it(t,e,i),d=!1}function at(t,e,i,n,r,a){for(var s=[],o=0,l=0;l<e.length;l++)for(var c=e[l],g=1;g<U;g++)for(var u=1;u<I;u++)s.push(j(t,c,u,g,i,n,r[l],a&&a[o]?a[o]:[])),o++;return s}function st(t,e,i,n,r,a){for(var s=[],o=0,l=0;l<e.length;l++)for(var c=e[l],g=1;g<Q;g++)for(var u=1;u<U;u++)s.push(j(t,g,c,u,i,n,r[l],a&&a[o]?a[o]:[])),o++;return s}function ot(t,e,i,n,r,a){for(var s=[],o=0,l=0;l<e.length;l++)for(var c=e[l],g=1;g<I;g++)for(var u=1;u<Q;u++)s.push(j(t,u,g,c,i,n,r[l],a&&a[o]?a[o]:[])),o++;return s}function lt(t,e){for(var i=[],n=t;n<e;n++)i.push(n);return i}function ct(){for(var e=0;e<Q;e++)for(var i=0;i<I;i++)for(var n=0;n<U;n++){var r=y(e,i,n);R(t._x[r],t._y[r],t._z[r],t._value[r])}}function gt(){G(),ct();var e=null;if(c&&u&&(E(u),nt(e,v,C)),l&&g){E(g);for(var i=t.surface.pattern,o=t.surface.count,d=0;d<o;d++){var h=1===o?.5:d/(o-1),b=(1-h)*v+h*C,y=Math.abs(b-m)>Math.abs(b-x)?[m,b]:[b,x];rt(i,y[0],y[1])}}var A=[[Math.min(v,x),Math.max(v,x)],[Math.min(m,C),Math.max(m,C)]];["x","y","z"].forEach((function(i){for(var n=[],r=0;r<A.length;r++){var a=0,s=A[r][0],o=A[r][1],l=t.slices[i];if(l.show&&l.fill){E(l.fill);var c=[],g=[],u=[];if(l.locations.length)for(var d=0;d<l.locations.length;d++){var h=dz(l.locations[d],"x"===i?p:"y"===i?F:f);0===h.distRatio?c.push(h.id):h.id>0&&(g.push(h.id),"x"===i?u.push([h.distRatio,0,0]):"y"===i?u.push([0,h.distRatio,0]):u.push([0,0,h.distRatio]))}else c=lt(1,"x"===i?Q-1:"y"===i?I-1:U-1);g.length>0&&(n[a]="x"===i?at(e,g,s,o,u,n[a]):"y"===i?st(e,g,s,o,u,n[a]):ot(e,g,s,o,u,n[a]),a++),c.length>0&&(n[a]="x"===i?$(e,c,s,o,n[a]):"y"===i?tt(e,c,s,o,n[a]):et(e,c,s,o,n[a]),a++)}var B=t.caps[i];B.show&&B.fill&&(E(B.fill),n[a]="x"===i?$(e,[0,Q-1],s,o,n[a]):"y"===i?tt(e,[0,I-1],s,o,n[a]):et(e,[0,U-1],s,o,n[a]),a++)}})),0===B&&G(),t._meshX=n,t._meshY=r,t._meshZ=a,t._meshIntensity=s,t._Xs=p,t._Ys=F,t._Zs=f}return gt(),t}(t);var r={positions:uz(n(i.xaxis,t._meshX,e.dataScale[0],t.xcalendar),n(i.yaxis,t._meshY,e.dataScale[1],t.ycalendar),n(i.zaxis,t._meshZ,e.dataScale[2],t.zcalendar)),cells:uz(t._meshI,t._meshJ,t._meshK),lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:cz(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading},a=gz(t);r.vertexIntensity=t._meshIntensity,r.vertexIntensityBounds=[a.min,a.max],r.colormap=oz(t),this.mesh.update(r)},Bz.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var pz=["xyz","xzy","yxz","yzx","zxy","zyx"];var Fz={createIsosurfaceTrace:function(t,e){var i=t.glplot.gl,n=sz({gl:i}),r=new hz(t,n,e.uid);return n._trace=r,r.update(e),t.glplot.add(n),r}},fz={},Qz=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var i=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(i.width=e.width);"number"==typeof e.height&&(i.height=e.height);var n,r=e;try{var a=[t];0===t.indexOf("webgl")&&a.push("experimental-"+t);for(var s=0;s<a.length;s++)if(n=i.getContext(a[s],r))return n}catch(t){n=null}return n||null};var Iz,Uz,bz,yz,mz,xz,vz,Cz,Az=Qz;var Lz,Gz,Rz=Z_.gl_plot3d,Sz=Rz.createCamera,wz=Rz.createScene,Vz=function(t){return Az("webgl",t)},Ez=Nu,Zz=_B,Nz=Zz.preserveDrawingBuffer(),Dz=Vy,Xz=Wv,Hz=az,Wz=function(){if(Uz)return Iz;Uz=1;var t=Uu,e=function(){};return Iz=function(i){for(var n in i)"function"==typeof i[n]&&(i[n]=e);i.destroy=function(){i.container.parentNode.removeChild(i.container)};var r=document.createElement("div");r.className="no-webgl",r.style.cursor="pointer",r.style.fontSize="24px",r.style.color=t.defaults[0],r.style.position="absolute",r.style.left=r.style.top="0px",r.style.width=r.style.height="100%",r.style["background-color"]=t.lightLine,r.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",r.appendChild(a),i.container.appendChild(r),i.container.style.background="#FFFFFF",i.container.onclick=function(){window.open("https://get.webgl.org")},!1},Iz}(),kz=jD,Mz=function(){if(yz)return bz;yz=1;var t=az,e=_B,i=["xaxis","yaxis","zaxis"];function n(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}return n.prototype.merge=function(n,r){for(var a=this,s=0;s<3;++s){var o=r[i[s]];o.visible?(a.labels[s]=n._meta?e.templateString(o.title.text,n._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(a.labelColor[s]=t(o.title.font.color)),o.title.font.family&&(a.labelFont[s]=o.title.font.family),o.title.font.size&&(a.labelSize[s]=o.title.font.size),o.title.font.weight&&(a.labelFontWeight[s]=o.title.font.weight),o.title.font.style&&(a.labelFontStyle[s]=o.title.font.style),o.title.font.variant&&(a.labelFontVariant[s]=o.title.font.variant)),"showline"in o&&(a.lineEnable[s]=o.showline),"linecolor"in o&&(a.lineColor[s]=t(o.linecolor)),"linewidth"in o&&(a.lineWidth[s]=o.linewidth),"showgrid"in o&&(a.gridEnable[s]=o.showgrid),"gridcolor"in o&&(a.gridColor[s]=t(o.gridcolor)),"gridwidth"in o&&(a.gridWidth[s]=o.gridwidth),"log"===o.type?a.zeroEnable[s]=!1:"zeroline"in o&&(a.zeroEnable[s]=o.zeroline),"zerolinecolor"in o&&(a.zeroLineColor[s]=t(o.zerolinecolor)),"zerolinewidth"in o&&(a.zeroLineWidth[s]=o.zerolinewidth),"ticks"in o&&o.ticks?a.lineTickEnable[s]=!0:a.lineTickEnable[s]=!1,"ticklen"in o&&(a.lineTickLength[s]=a._defaultLineTickLength[s]=o.ticklen),"tickcolor"in o&&(a.lineTickColor[s]=t(o.tickcolor)),"tickwidth"in o&&(a.lineTickWidth[s]=o.tickwidth),"tickangle"in o&&(a.tickAngle[s]="auto"===o.tickangle?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(a.tickEnable[s]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(a.tickColor[s]=t(o.tickfont.color)),o.tickfont.family&&(a.tickFont[s]=o.tickfont.family),o.tickfont.size&&(a.tickSize[s]=o.tickfont.size),o.tickfont.weight&&(a.tickFontWeight[s]=o.tickfont.weight),o.tickfont.style&&(a.tickFontStyle[s]=o.tickfont.style),o.tickfont.variant&&(a.tickFontVariant[s]=o.tickfont.variant)),"mirror"in o?-1!==["ticks","all","allticks"].indexOf(o.mirror)?(a.lineTickMirror[s]=!0,a.lineMirror[s]=!0):!0===o.mirror?(a.lineTickMirror[s]=!1,a.lineMirror[s]=!0):(a.lineTickMirror[s]=!1,a.lineMirror[s]=!1):a.lineMirror[s]=!1,"showbackground"in o&&!1!==o.showbackground?(a.backgroundEnable[s]=!0,a.backgroundColor[s]=t(o.backgroundcolor)):a.backgroundEnable[s]=!1):(a.tickEnable[s]=!1,a.labelEnable[s]=!1,a.lineEnable[s]=!1,a.lineTickEnable[s]=!1,a.gridEnable[s]=!1,a.zeroEnable[s]=!1,a.backgroundEnable[s]=!1)}},bz=function(t,e){var i=new n;return i.merge(t,e),i}}(),Tz=function(){if(xz)return mz;xz=1;var t=az,e=["xaxis","yaxis","zaxis"];function i(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}return i.prototype.merge=function(i){for(var n=0;n<3;++n){var r=i[e[n]];r.visible?(this.enabled[n]=r.showspikes,this.colors[n]=t(r.spikecolor),this.drawSides[n]=r.spikesides,this.lineWidth[n]=r.spikethickness):(this.enabled[n]=!1,this.drawSides[n]=!1)}},mz=function(t){var e=new i;return e.merge(t),e}}(),Yz=function(){if(Cz)return vz;Cz=1,vz=function(n){for(var r=n.axesOptions,a=n.glplot.axesPixels,s=n.fullSceneLayout,o=[[],[],[]],l=0;l<3;++l){var c=s[i[l]];if(c._length=(a[l].hi-a[l].lo)*a[l].pixelsPerDataUnit/n.dataScale[l],Math.abs(c._length)===1/0||isNaN(c._length))o[l]=[];else{c._input_range=c.range.slice(),c.range[0]=a[l].lo/n.dataScale[l],c.range[1]=a[l].hi/n.dataScale[l],c._m=1/(n.dataScale[l]*a[l].pixelsPerDataUnit),c.range[0]===c.range[1]&&(c.range[0]-=1,c.range[1]+=1);var g=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var u=c.nticks||e.constrain(c._length/40,4,9);t.autoTicks(c,Math.abs(c.range[1]-c.range[0])/u)}for(var d=t.calcTicks(c,{msUTC:!0}),h=0;h<d.length;++h)d[h].x=d[h].x*n.dataScale[l],"date"===c.type&&(d[h].text=d[h].text.replace(/\<br\>/g," "));o[l]=d,c.tickmode=g}}r.ticks=o;for(l=0;l<3;++l){n.glplot.bounds[0][l],n.glplot.bounds[1][l];for(h=0;h<2;++h)r.bounds[h][l]=n.glplot.bounds[h][l]}n.contourLevels=function(t){for(var e=new Array(3),i=0;i<3;++i){for(var n=t[i],r=new Array(n.length),a=0;a<n.length;++a)r[a]=n[a].x;e[i]=r}return e}(o)};var t=Vy,e=_B,i=["xaxis","yaxis","zaxis"];return vz}(),Jz=KU().applyAutorangeOptions,_z=!1;function zz(t,e){var i=document.createElement("div"),n=t.container;this.graphDiv=t.graphDiv;var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",r.style["z-index"]=20,r.style["pointer-events"]="none",i.appendChild(r),this.svgContainer=r,i.id=t.id,i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",n.appendChild(i),this.fullLayout=e,this.id=t.id||"scene",this.fullSceneLayout=e[this.id],this.plotArgs=[[],{},{}],this.axesOptions=Mz(e,e[this.id]),this.spikeOptions=Tz(e[this.id]),this.container=i,this.staticMode=!!t.staticPlot,this.pixelRatio=this.pixelRatio||t.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=Ez.getComponentMethod("annotations3d","convert"),this.drawAnnotations=Ez.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var Oz=zz.prototype;Oz.prepareOptions=function(){var t=this,e={canvas:t.canvas,gl:t.gl,glOptions:{preserveDrawingBuffer:Nz,premultipliedAlpha:!0,antialias:!0},container:t.container,axes:t.axesOptions,spikes:t.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:t.camera,pixelRatio:t.pixelRatio};if(t.staticMode){if(!(Gz||(Lz=document.createElement("canvas"),Gz=Vz({canvas:Lz,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");e.gl=Gz,e.canvas=Lz}return e};var Kz=!0;Oz.tryCreatePlot=function(){var t=this,e=t.prepareOptions(),i=!0;try{t.glplot=wz(e)}catch(n){if(t.staticMode||!Kz||Nz)i=!1;else{Zz.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{Nz=e.glOptions.preserveDrawingBuffer=!0,t.glplot=wz(e)}catch(t){Nz=e.glOptions.preserveDrawingBuffer=!1,i=!1}}}return Kz=!1,i},Oz.initializeGLCamera=function(){var t=this,e=t.fullSceneLayout.camera,i="orthographic"===e.projection.type;t.camera=Sz(t.container,{center:[e.center.x,e.center.y,e.center.z],eye:[e.eye.x,e.eye.y,e.eye.z],up:[e.up.x,e.up.y,e.up.z],_ortho:i,zoomMin:.01,zoomMax:100,mode:"orbit"})},Oz.initializeGLPlot=function(){var t=this;if(t.initializeGLCamera(),!t.tryCreatePlot())return Wz(t);t.traces={},t.make4thDimension();var e=t.graphDiv,i=e.layout,n=function(){var e={};return t.isCameraChanged(i)&&(e[t.id+".camera"]=t.getCamera()),t.isAspectChanged(i)&&(e[t.id+".aspectratio"]=t.glplot.getAspectratio(),"manual"!==i[t.id].aspectmode&&(t.fullSceneLayout.aspectmode=i[t.id].aspectmode=e[t.id+".aspectmode"]="manual")),e},r=function(t){if(!1!==t.fullSceneLayout.dragmode){var e=n();t.saveLayout(i),t.graphDiv.emit("plotly_relayout",e)}};return t.glplot.canvas&&(t.glplot.canvas.addEventListener("mouseup",(function(){r(t)})),t.glplot.canvas.addEventListener("touchstart",(function(){_z=!0})),t.glplot.canvas.addEventListener("wheel",(function(i){if(e._context._scrollZoom.gl3d){if(t.camera._ortho){var n=i.deltaX>i.deltaY?1.1:1/1.1,a=t.glplot.getAspectratio();t.glplot.setAspectratio({x:n*a.x,y:n*a.y,z:n*a.z})}r(t)}}),!1),t.glplot.canvas.addEventListener("mousemove",(function(){if(!1!==t.fullSceneLayout.dragmode&&0!==t.camera.mouseListener.buttons){var e=n();t.graphDiv.emit("plotly_relayouting",e)}})),t.staticMode||t.glplot.canvas.addEventListener("webglcontextlost",(function(i){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:i,layer:t.id})}),!1)),t.glplot.oncontextloss=function(){t.recoverContext()},t.glplot.onrender=function(){t.render()},!0},Oz.render=function(){var t,e=this,i=e.graphDiv,n=e.svgContainer,r=e.container.getBoundingClientRect();i._fullLayout._calcInverseTransform(i);var a=i._fullLayout._invScaleX,s=i._fullLayout._invScaleY,o=r.width*a,l=r.height*s;n.setAttributeNS(null,"viewBox","0 0 "+o+" "+l),n.setAttributeNS(null,"width",o),n.setAttributeNS(null,"height",l),Yz(e),e.glplot.axes.update(e.axesOptions);for(var c=Object.keys(e.traces),g=null,u=e.glplot.selection,d=0;d<c.length;++d)"skip"!==(t=e.traces[c[d]]).data.hoverinfo&&t.handlePick(u)&&(g=t),t.setContourLevels&&t.setContourLevels();function h(t,i,n){var r=e.fullSceneLayout[t+"axis"];return"log"!==r.type&&(i=r.d2l(i)),Dz.hoverLabelText(r,i,n)}if(null!==g){var B=kz(e.glplot.cameraParams,u.dataCoordinate);t=g.data;var p,F=i._fullData[t.index],f=u.index,Q={xLabel:h("x",u.traceCoordinate[0],t.xhoverformat),yLabel:h("y",u.traceCoordinate[1],t.yhoverformat),zLabel:h("z",u.traceCoordinate[2],t.zhoverformat)},I=Xz.castHoverinfo(F,e.fullLayout,f),U=(I||"").split("+"),b=I&&"all"===I;F.hovertemplate||b||(-1===U.indexOf("x")&&(Q.xLabel=void 0),-1===U.indexOf("y")&&(Q.yLabel=void 0),-1===U.indexOf("z")&&(Q.zLabel=void 0),-1===U.indexOf("text")&&(u.textLabel=void 0),-1===U.indexOf("name")&&(g.name=void 0));var y=[];"cone"===t.type||"streamtube"===t.type?(Q.uLabel=h("x",u.traceCoordinate[3],t.uhoverformat),(b||-1!==U.indexOf("u"))&&y.push("u: "+Q.uLabel),Q.vLabel=h("y",u.traceCoordinate[4],t.vhoverformat),(b||-1!==U.indexOf("v"))&&y.push("v: "+Q.vLabel),Q.wLabel=h("z",u.traceCoordinate[5],t.whoverformat),(b||-1!==U.indexOf("w"))&&y.push("w: "+Q.wLabel),Q.normLabel=u.traceCoordinate[6].toPrecision(3),(b||-1!==U.indexOf("norm"))&&y.push("norm: "+Q.normLabel),"streamtube"===t.type&&(Q.divergenceLabel=u.traceCoordinate[7].toPrecision(3),(b||-1!==U.indexOf("divergence"))&&y.push("divergence: "+Q.divergenceLabel)),u.textLabel&&y.push(u.textLabel),p=y.join("<br>")):"isosurface"===t.type||"volume"===t.type?(Q.valueLabel=Dz.hoverLabelText(e._mockAxis,e._mockAxis.d2l(u.traceCoordinate[3]),t.valuehoverformat),y.push("value: "+Q.valueLabel),u.textLabel&&y.push(u.textLabel),p=y.join("<br>")):p=u.textLabel;var m={x:u.traceCoordinate[0],y:u.traceCoordinate[1],z:u.traceCoordinate[2],data:F._input,fullData:F,curveNumber:F.index,pointNumber:f};Xz.appendArrayPointValue(m,F,f),t._module.eventData&&(m=F._module.eventData(m,u,F,{},f));var x={points:[m]};if(e.fullSceneLayout.hovermode){var v=[];Xz.loneHover({trace:F,x:(.5+.5*B[0]/B[3])*o,y:(.5-.5*B[1]/B[3])*l,xLabel:Q.xLabel,yLabel:Q.yLabel,zLabel:Q.zLabel,text:p,name:g.name,color:Xz.castHoverOption(F,f,"bgcolor")||g.color,borderColor:Xz.castHoverOption(F,f,"bordercolor"),fontFamily:Xz.castHoverOption(F,f,"font.family"),fontSize:Xz.castHoverOption(F,f,"font.size"),fontColor:Xz.castHoverOption(F,f,"font.color"),nameLength:Xz.castHoverOption(F,f,"namelength"),textAlign:Xz.castHoverOption(F,f,"align"),hovertemplate:Zz.castOption(F,f,"hovertemplate"),hovertemplateLabels:Zz.extendFlat({},m,Q),eventData:[m]},{container:n,gd:i,inOut_bbox:v}),m.bbox=v[0]}u.distance<5&&(u.buttons||_z)?i.emit("plotly_click",x):i.emit("plotly_hover",x),this.oldEventData=x}else Xz.loneUnhover(n),this.oldEventData&&i.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;e.drawAnnotations(e)},Oz.recoverContext=function(){var t=this;t.glplot.dispose();var e=function(){t.glplot.gl.isContextLost()?requestAnimationFrame(e):t.initializeGLPlot()?t.plot.apply(t,t.plotArgs):Zz.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(e)};var Pz=["xaxis","yaxis","zaxis"];function jz(t,e,i){for(var n=t.fullSceneLayout,r=0;r<3;r++){var a=Pz[r],s=a.charAt(0),o=n[a],l=e[s],c=e[s+"calendar"],g=e["_"+s+"length"];if(Zz.isArrayOrTypedArray(l))for(var u,d=0;d<(g||l.length);d++)if(Zz.isArrayOrTypedArray(l[d]))for(var h=0;h<l[d].length;++h)u=o.d2l(l[d][h],0,c),!isNaN(u)&&isFinite(u)&&(i[0][r]=Math.min(i[0][r],u),i[1][r]=Math.max(i[1][r],u));else u=o.d2l(l[d],0,c),!isNaN(u)&&isFinite(u)&&(i[0][r]=Math.min(i[0][r],u),i[1][r]=Math.max(i[1][r],u));else i[0][r]=Math.min(i[0][r],0),i[1][r]=Math.max(i[1][r],g-1)}}Oz.plot=function(t,e,i){var n=this;if(n.plotArgs=[t,e,i],!n.glplot.contextLost){var r,a,s,o,l,c,g=e[n.id],u=i[n.id];n.fullLayout=e,n.fullSceneLayout=g,n.axesOptions.merge(e,g),n.spikeOptions.merge(g),n.setViewport(g),n.updateFx(g.dragmode,g.hovermode),n.camera.enableWheel=n.graphDiv._context._scrollZoom.gl3d,n.glplot.setClearColor(Hz(g.bgcolor)),n.setConvert(l),t?Array.isArray(t)||(t=[t]):t=[];var d=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(s=0;s<t.length;++s)!0===(r=t[s]).visible&&0!==r._length&&jz(this,r,d);!function(t,e){for(var i=t.fullSceneLayout,n=i.annotations||[],r=0;r<3;r++)for(var a=Pz[r],s=a.charAt(0),o=i[a],l=0;l<n.length;l++){var c=n[l];if(c.visible){var g=o.r2l(c[s]);!isNaN(g)&&isFinite(g)&&(e[0][r]=Math.min(e[0][r],g),e[1][r]=Math.max(e[1][r],g))}}}(this,d);var h=[1,1,1];for(o=0;o<3;++o)d[1][o]===d[0][o]?h[o]=1:h[o]=1/(d[1][o]-d[0][o]);for(n.dataScale=h,n.convertAnnotations(this),s=0;s<t.length;++s)!0===(r=t[s]).visible&&0!==r._length&&((a=n.traces[r.uid])?a.data.type===r.type?a.update(r):(a.dispose(),a=r._module.plot(this,r),n.traces[r.uid]=a):(a=r._module.plot(this,r),n.traces[r.uid]=a),a.name=r.name);var B=Object.keys(n.traces);t:for(s=0;s<B.length;++s){for(o=0;o<t.length;++o)if(t[o].uid===B[s]&&!0===t[o].visible&&0!==t[o]._length)continue t;(a=n.traces[B[s]]).dispose(),delete n.traces[B[s]]}n.glplot.objects.sort((function(t,e){return t._trace.data.index-e._trace.data.index}));var p,F=[[0,0,0],[0,0,0]],f={};for(s=0;s<3;++s){var Q;if((c=(l=g[Pz[s]]).type)in f?(f[c].acc*=h[s],f[c].count+=1):f[c]={acc:h[s],count:1},l.autorange){F[0][s]=1/0,F[1][s]=-1/0;var I=n.glplot.objects,U=n.fullSceneLayout.annotations||[],b=l._name.charAt(0);for(o=0;o<I.length;o++){var y=I[o],m=y.bounds,x=y._trace.data._pad||0;"ErrorBars"===y.constructor.name&&l._lowerLogErrorBound?F[0][s]=Math.min(F[0][s],l._lowerLogErrorBound):F[0][s]=Math.min(F[0][s],m[0][s]/h[s]-x),F[1][s]=Math.max(F[1][s],m[1][s]/h[s]+x)}for(o=0;o<U.length;o++){var v=U[o];if(v.visible){var C=l.r2l(v[b]);F[0][s]=Math.min(F[0][s],C),F[1][s]=Math.max(F[1][s],C)}}if("rangemode"in l&&"tozero"===l.rangemode&&(F[0][s]=Math.min(F[0][s],0),F[1][s]=Math.max(F[1][s],0)),F[0][s]>F[1][s])F[0][s]=-1,F[1][s]=1;else{var A=F[1][s]-F[0][s];F[0][s]-=A/32,F[1][s]+=A/32}if(Q=[F[0][s],F[1][s]],Q=Jz(Q,l),F[0][s]=Q[0],F[1][s]=Q[1],l.isReversed()){var L=F[0][s];F[0][s]=F[1][s],F[1][s]=L}}else Q=l.range,F[0][s]=l.r2l(Q[0]),F[1][s]=l.r2l(Q[1]);F[0][s]===F[1][s]&&(F[0][s]-=1,F[1][s]+=1),l.range=[F[0][s],F[1][s]],l.limitRange(),n.glplot.setBounds(s,{min:l.range[0]*h[s],max:l.range[1]*h[s]})}var G=g.aspectmode;if("cube"===G)p=[1,1,1];else if("manual"===G){var R=g.aspectratio;p=[R.x,R.y,R.z]}else{if("auto"!==G&&"data"!==G)throw new Error("scene.js aspectRatio was not one of the enumerated types");var S=[1,1,1];for(s=0;s<3;++s){var w=f[c=(l=g[Pz[s]]).type];S[s]=Math.pow(w.acc,1/w.count)/h[s]}p="data"===G||Math.max.apply(null,S)/Math.min.apply(null,S)<=4?S:[1,1,1]}g.aspectratio.x=u.aspectratio.x=p[0],g.aspectratio.y=u.aspectratio.y=p[1],g.aspectratio.z=u.aspectratio.z=p[2],n.glplot.setAspectratio(g.aspectratio),n.viewInitial.aspectratio||(n.viewInitial.aspectratio={x:g.aspectratio.x,y:g.aspectratio.y,z:g.aspectratio.z}),n.viewInitial.aspectmode||(n.viewInitial.aspectmode=g.aspectmode);var V=g.domain||null,E=e._size||null;if(V&&E){var Z=n.container.style;Z.position="absolute",Z.left=E.l+V.x[0]*E.w+"px",Z.top=E.t+(1-V.y[1])*E.h+"px",Z.width=E.w*(V.x[1]-V.x[0])+"px",Z.height=E.h*(V.y[1]-V.y[0])+"px"}n.glplot.redraw()}},Oz.destroy=function(){var t=this;t.glplot&&(t.camera.mouseListener.enabled=!1,t.container.removeEventListener("wheel",t.camera.wheelListener),t.camera=null,t.glplot.dispose(),t.container.parentNode.removeChild(t.container),t.glplot=null)},Oz.getCamera=function(){var t,e=this;return e.camera.view.recalcMatrix(e.camera.view.lastT()),{up:{x:(t=e.camera).up[0],y:t.up[1],z:t.up[2]},center:{x:t.center[0],y:t.center[1],z:t.center[2]},eye:{x:t.eye[0],y:t.eye[1],z:t.eye[2]},projection:{type:!0===t._ortho?"orthographic":"perspective"}}},Oz.setViewport=function(t){var e,i=this,n=t.camera;i.camera.lookAt.apply(this,[[(e=n).eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]),i.glplot.setAspectratio(t.aspectratio),"orthographic"===n.projection.type!==i.camera._ortho&&(i.glplot.redraw(),i.glplot.clearRGBA(),i.glplot.dispose(),i.initializeGLPlot())},Oz.isCameraChanged=function(t){var e=this.getCamera(),i=Zz.nestedProperty(t,this.id+".camera").get();function n(t,e,i,n){var r=["up","center","eye"],a=["x","y","z"];return e[r[i]]&&t[r[i]][a[n]]===e[r[i]][a[n]]}var r=!1;if(void 0===i)r=!0;else{for(var a=0;a<3;a++)for(var s=0;s<3;s++)if(!n(e,i,a,s)){r=!0;break}(!i.projection||e.projection&&e.projection.type!==i.projection.type)&&(r=!0)}return r},Oz.isAspectChanged=function(t){var e=this.glplot.getAspectratio(),i=Zz.nestedProperty(t,this.id+".aspectratio").get();return void 0===i||i.x!==e.x||i.y!==e.y||i.z!==e.z},Oz.saveLayout=function(t){var e,i,n,r,a,s,o=this,l=o.fullLayout,c=o.isCameraChanged(t),g=o.isAspectChanged(t),u=c||g;if(u){var d={};if(c&&(e=o.getCamera(),n=(i=Zz.nestedProperty(t,o.id+".camera")).get(),d[o.id+".camera"]=n),g&&(r=o.glplot.getAspectratio(),s=(a=Zz.nestedProperty(t,o.id+".aspectratio")).get(),d[o.id+".aspectratio"]=s),Ez.call("_storeDirectGUIEdit",t,l._preGUI,d),c)i.set(e),Zz.nestedProperty(l,o.id+".camera").set(e);if(g)a.set(r),Zz.nestedProperty(l,o.id+".aspectratio").set(r),o.glplot.redraw()}return u},Oz.updateFx=function(t,e){var i=this,n=i.camera;if(n)if("orbit"===t)n.mode="orbit",n.keyBindingMode="rotate";else if("turntable"===t){n.up=[0,0,1],n.mode="turntable",n.keyBindingMode="rotate";var r=i.graphDiv,a=r._fullLayout,s=i.fullSceneLayout.camera,o=s.up.x,l=s.up.y,c=s.up.z;if(c/Math.sqrt(o*o+l*l+c*c)<.999){var g=i.id+".camera.up",u={x:0,y:0,z:1},d={};d[g]=u;var h=r.layout;Ez.call("_storeDirectGUIEdit",h,a._preGUI,d),s.up=u,Zz.nestedProperty(h,g).set(u)}}else n.keyBindingMode=t;i.fullSceneLayout.hovermode=e},Oz.toImage=function(t){var e=this;t||(t="png"),e.staticMode&&e.container.appendChild(Lz),e.glplot.redraw();var i=e.glplot.gl,n=i.drawingBufferWidth,r=i.drawingBufferHeight;i.bindFramebuffer(i.FRAMEBUFFER,null);var a=new Uint8Array(n*r*4);i.readPixels(0,0,n,r,i.RGBA,i.UNSIGNED_BYTE,a),function(t,e,i){for(var n=0,r=i-1;n<r;++n,--r)for(var a=0;a<e;++a)for(var s=0;s<4;++s){var o=4*(e*n+a)+s,l=4*(e*r+a)+s,c=t[o];t[o]=t[l],t[l]=c}}(a,n,r),function(t,e,i){for(var n=0;n<i;++n)for(var r=0;r<e;++r){var a=4*(e*n+r),s=t[a+3];if(s>0)for(var o=255/s,l=0;l<3;++l)t[a+l]=Math.min(o*t[a+l],255)}}(a,n,r);var s=document.createElement("canvas");s.width=n,s.height=r;var o,l=s.getContext("2d",{willReadFrequently:!0}),c=l.createImageData(n,r);switch(c.data.set(a),l.putImageData(c,0,0),t){case"jpeg":o=s.toDataURL("image/jpeg");break;case"webp":o=s.toDataURL("image/webp");break;default:o=s.toDataURL("image/png")}return e.staticMode&&e.container.removeChild(Lz),o},Oz.setConvert=function(){for(var t=0;t<3;t++){var e=this.fullSceneLayout[Pz[t]];Dz.setConvert(e,this.fullLayout),e.setScale=Zz.noop}},Oz.make4thDimension=function(){var t=this,e=t.graphDiv._fullLayout;t._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},Dz.setConvert(t._mockAxis,e)};var qz,$z,tO,eO,iO,nO,rO,aO,sO,oO,lO,cO,gO=zz;function uO(){if(eO)return tO;eO=1;var t=Uu,e=If,i=Mg.extendFlat,n=wd.overrideAll;return tO=n({visible:e.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:t.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:e.color,categoryorder:e.categoryorder,categoryarray:e.categoryarray,title:{text:e.title.text,font:e.title.font},type:i({},e.type,{values:["-","linear","log","date","category"]}),autotypenumbers:e.autotypenumbers,autorange:e.autorange,autorangeoptions:{minallowed:e.autorangeoptions.minallowed,maxallowed:e.autorangeoptions.maxallowed,clipmin:e.autorangeoptions.clipmin,clipmax:e.autorangeoptions.clipmax,include:e.autorangeoptions.include,editType:"plot"},rangemode:e.rangemode,minallowed:e.minallowed,maxallowed:e.maxallowed,range:i({},e.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:e.minor.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,mirror:e.mirror,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,labelalias:e.labelalias,tickfont:e.tickfont,tickangle:e.tickangle,tickprefix:e.tickprefix,showtickprefix:e.showtickprefix,ticksuffix:e.ticksuffix,showticksuffix:e.showticksuffix,showexponent:e.showexponent,exponentformat:e.exponentformat,minexponent:e.minexponent,separatethousands:e.separatethousands,tickformat:e.tickformat,tickformatstops:e.tickformatstops,hoverformat:e.hoverformat,showline:e.showline,linecolor:e.linecolor,linewidth:e.linewidth,showgrid:e.showgrid,gridcolor:i({},e.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:e.gridwidth,zeroline:e.zeroline,zerolinecolor:e.zerolinecolor,zerolinewidth:e.zerolinewidth},"plot","from-root")}function dO(){if(nO)return iO;nO=1;var t=uO(),e=Ek.attributes,i=Mg.extendFlat,n=_B.counterRegex;function r(t,e,i){return{x:{valType:"number",dflt:t,editType:"camera"},y:{valType:"number",dflt:e,editType:"camera"},z:{valType:"number",dflt:i,editType:"camera"},editType:"camera"}}return iO={_arrayAttrRegexps:[n("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:i(r(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:i(r(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:i(r(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:e({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:t,yaxis:t,zaxis:t,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot"}}var hO=wd.overrideAll,BO=jg,pO=gO,FO=Hp.getSubplotData,fO=_B,QO=vF,IO="gl3d",UO="scene";fz.name=IO,fz.attr=UO,fz.idRoot=UO,fz.idRegex=fz.attrRegex=fO.counterRegex("scene"),fz.attributes=$z?qz:($z=1,qz={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}}),fz.layoutAttributes=dO(),fz.baseLayoutAttrOverrides=hO({hoverlabel:BO.hoverlabel},"plot","nested"),fz.supplyLayoutDefaults=function(){if(cO)return lO;cO=1;var t=_B,e=Uu,i=Nu,n=function(){if(aO)return rO;aO=1;var t=_B,e=Ap,i=Ek.defaults;return rO=function(n,r,a,s){var o,l,c=s.type,g=s.attributes,u=s.handleDefaults,d=s.partition||"x",h=r._subplots[c],B=h.length,p=B&&h[0].replace(/\d+$/,"");function F(e,i){return t.coerce(o,l,g,e,i)}for(var f=0;f<B;f++){var Q=h[f];o=n[Q]?n[Q]:n[Q]={},l=e.newContainer(r,Q,p),s.noUirevision||F("uirevision",r.uirevision);var I={};I[d]=[f/B,(f+1)/B],i(l,r,F,I),s.id=Q,u(o,l,F,s)}},rO}(),r=function(){if(oO)return sO;oO=1;var t=kg.mix,e=_B,i=Ap,n=uO(),r=OZ(),a=pN,s=["xaxis","yaxis","zaxis"],o=13600/187;return sO=function(l,c,g){var u,d;function h(t,i){return e.coerce(u,d,n,t,i)}for(var B=0;B<s.length;B++){var p=s[B];u=l[p]||{},(d=i.newContainer(c,p))._id=p[0]+g.scene,d._name=p,r(u,d,h,g),a(u,d,h,{font:g.font,letter:p[0],data:g.data,showGrid:!0,noAutotickangles:!0,noTicklabelindex:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:g.bgColor,calendar:g.calendar},g.fullLayout),h("gridcolor",t(d.color,g.bgColor,o).toRgbString()),h("title.text",p[0]),d.setScale=e.noop,h("showspikes")&&(h("spikesides"),h("spikethickness"),h("spikecolor",d.color)),h("showaxeslabels"),h("showbackground")&&h("backgroundcolor")}},sO}(),a=dO(),s=Hp.getSubplotData,o="gl3d";function l(t,n,a,l){for(var c=a("bgcolor"),g=e.combine(c,l.paper_bgcolor),u=["up","center","eye"],d=0;d<u.length;d++)a("camera."+u[d]+".x"),a("camera."+u[d]+".y"),a("camera."+u[d]+".z");a("camera.projection.type");var h=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),B=a("aspectmode",h?"manual":"auto");h||(t.aspectratio=n.aspectratio={x:1,y:1,z:1},"manual"===B&&(n.aspectmode="auto"),t.aspectmode=n.aspectmode);var p=s(l.fullData,o,l.id);r(t,n,{font:l.font,scene:l.id,data:p,bgColor:g,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),i.getComponentMethod("annotations3d","handleDefaults")(t,n,l);var F=l.getDfltFromLayout("dragmode");if(!1!==F&&!F)if(F="orbit",t.camera&&t.camera.up){var f=t.camera.up.x,Q=t.camera.up.y,I=t.camera.up.z;0!==I&&(f&&Q&&I?I/Math.sqrt(f*f+Q*Q+I*I)>.999&&(F="turntable"):F="turntable")}else F="turntable";a("dragmode",F),a("hovermode",l.getDfltFromLayout("hovermode"))}return lO=function(e,i,r){var s=i._basePlotModules.length>1;n(e,i,r,{type:o,attributes:a,handleDefaults:l,fullLayout:i,font:i.font,fullData:r,getDfltFromLayout:function(i){if(!s)return t.validate(e[i],a[i])?e[i]:void 0},autotypenumbersDflt:i.autotypenumbers,paper_bgcolor:i.paper_bgcolor,calendar:i.calendar})}}(),fz.plot=function(t){for(var e=t._fullLayout,i=t._fullData,n=e._subplots[IO],r=0;r<n.length;r++){var a=n[r],s=FO(i,IO,a),o=e[a],l=o.camera,c=o._scene;c||(c=new pO({id:a,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},e),o._scene=c),c.viewInitial||(c.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),c.plot(s,e,t.layout)}},fz.clean=function(t,e,i,n){for(var r=n._subplots[IO]||[],a=0;a<r.length;a++){var s=r[a];!e[s]&&n[s]._scene&&(n[s]._scene.destroy(),n._infolayer&&n._infolayer.selectAll(".annotation-"+s).remove())}},fz.toSVG=function(t){for(var e=t._fullLayout,i=e._subplots[IO],n=e._size,r=0;r<i.length;r++){var a=e[i[r]],s=a.domain,o=a._scene,l=o.toImage("png");e._glimages.append("svg:image").attr({xmlns:QO.svg,"xlink:href":l,x:n.l+n.w*s.x[0],y:n.t+n.h*(1-s.y[1]),width:n.w*(s.x[1]-s.x[0]),height:n.h*(s.y[1]-s.y[0]),preserveAspectRatio:"none"}),o.destroy()}},fz.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var e=t.substr(5);return"1"===e&&(e=""),UO+e}},fz.updateFx=function(t){for(var e=t._fullLayout,i=e._subplots[IO],n=0;n<i.length;n++){e[i[n]]._scene.updateFx(e.dragmode,e.hovermode)}};var bO={attributes:b_,supplyDefaults:C_.supplyDefaults,calc:function(t,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=V_(e.x,e._len),e._y=V_(e.y,e._len),e._z=V_(e.z,e._len),e._value=V_(e.value,e._len);var i=w_(e);e._gridFill=i.fill,e._Xs=i.Xs,e._Ys=i.Ys,e._Zs=i.Zs,e._len=i.len;for(var n=1/0,r=-1/0,a=0;a<e._len;a++){var s=e._value[a];n=Math.min(n,s),r=Math.max(r,s)}e._minValues=n,e._maxValues=r,e._vMin=void 0===e.isomin||null===e.isomin?n:e.isomin,e._vMax=void 0===e.isomax||null===e.isomax?r:e.isomax,S_(t,e,{vals:[e._vMin,e._vMax],containerStr:""})},colorbar:{min:"cmin",max:"cmax"},plot:Fz.createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:fz,categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}},yO=bO,mO=t({__proto__:null,default:Ds(yO)},[yO]),xO={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},vO={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"},CO=Nu;function AO(t,e,i,n){if(!e||!e.visible)return null;for(var r=CO.getComponentMethod("errorbars","makeComputeError")(e),a=new Array(t.length),s=0;s<t.length;s++){var o=r(+t[s],s);if("log"===n.type){var l=n.c2l(t[s]),c=t[s]-o[0],g=t[s]+o[1];if(a[s]=[(n.c2l(c,!0)-l)*i,(n.c2l(g,!0)-l)*i],c>0){var u=n.c2l(c);n._lowerLogErrorBound||(n._lowerLogErrorBound=u),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,u)}}else a[s]=[-o[0]*i,o[1]*i]}return a}var LO=function(t,e,i){var n=[AO(t.x,t.error_x,e[0],i.xaxis),AO(t.y,t.error_y,e[1],i.yaxis),AO(t.z,t.error_z,e[2],i.zaxis)],r=function(t){for(var e=0;e<t.length;e++)if(t[e])return t[e].length;return 0}(n);if(0===r)return null;for(var a=new Array(r),s=0;s<r;s++){for(var o=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(n[l])for(var c=0;c<2;c++)o[c][l]=n[l][s][c];a[s]=o}return a},GO=Z_.gl_line3d,RO=Z_.gl_scatter3d,SO=Z_.gl_error3d,wO=Z_.gl_mesh3d,VO=Z_.delaunay_triangulate,EO=_B,ZO=az,NO=iz,DO=MQ,XO=xO,HO=vO,WO=Vy,kO=TQ.appendArrayPointValue,MO=LO;function TO(t,e){this.scene=t,this.uid=e,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var YO=TO.prototype;function JO(t){return null==t?0:t.indexOf("left")>-1?-1:t.indexOf("right")>-1?1:0}function _O(t){return null==t?0:t.indexOf("top")>-1?-1:t.indexOf("bottom")>-1?1:0}function zO(t,e){return e(4*t)}function OO(t){return HO[t]}function KO(t,e,i,n,r){var a=null;if(EO.isArrayOrTypedArray(t)){a=[];for(var s=0;s<e;s++)void 0===t[s]?a[s]=n:a[s]=i(t[s],r)}else a=i(t,EO.identity);return a}function PO(t,e){var i,n,r,a,s,o,l=[],c=t.fullSceneLayout,g=t.dataScale,u=c.xaxis,d=c.yaxis,h=c.zaxis,B=e.marker,p=e.line,F=e.x||[],f=e.y||[],Q=e.z||[],I=F.length,U=e.xcalendar,b=e.ycalendar,y=e.zcalendar;for(s=0;s<I;s++)i=u.d2l(F[s],0,U)*g[0],n=d.d2l(f[s],0,b)*g[1],r=h.d2l(Q[s],0,y)*g[2],l[s]=[i,n,r];if(Array.isArray(e.text))o=e.text;else if(EO.isTypedArray(e.text))o=Array.from(e.text);else if(void 0!==e.text)for(o=new Array(I),s=0;s<I;s++)o[s]=e.text;function m(t,e){var i=c[t];return WO.tickText(i,i.d2l(e),!0).text}var x=e.texttemplate;if(x){var v=t.fullLayout._d3locale,C=Array.isArray(x),A=C?Math.min(x.length,I):I,L=C?function(t){return x[t]}:function(){return x};for(o=new Array(A),s=0;s<A;s++){var G={x:F[s],y:f[s],z:Q[s]},R={xLabel:m("xaxis",F[s]),yLabel:m("yaxis",f[s]),zLabel:m("zaxis",Q[s])},S={};kO(S,e,s);var w=e._meta||{};o[s]=EO.texttemplateString(L(s),R,v,S,G,w)}}if(a={position:l,mode:e.mode,text:o},"line"in e&&(a.lineColor=NO(p,1,I),a.lineWidth=p.width,a.lineDashes=p.dash),"marker"in e){var V=DO(e);a.scatterColor=NO(B,1,I),a.scatterSize=KO(B.size,I,zO,20,V),a.scatterMarker=KO(B.symbol,I,OO,"●"),a.scatterLineWidth=B.line.width,a.scatterLineColor=NO(B.line,1,I),a.scatterAngle=0}"textposition"in e&&(a.textOffset=function(t){var e=[0,0];if(Array.isArray(t))for(var i=0;i<t.length;i++)e[i]=[0,0],t[i]&&(e[i][0]=JO(t[i]),e[i][1]=_O(t[i]));else e[0]=JO(t),e[1]=_O(t);return e}(e.textposition),a.textColor=NO(e.textfont,1,I),a.textSize=KO(e.textfont.size,I,EO.identity,12),a.textFontFamily=e.textfont.family,a.textFontWeight=e.textfont.weight,a.textFontStyle=e.textfont.style,a.textFontVariant=e.textfont.variant,a.textAngle=0);var E=["x","y","z"];for(a.project=[!1,!1,!1],a.projectScale=[1,1,1],a.projectOpacity=[1,1,1],s=0;s<3;++s){var Z=e.projection[E[s]];(a.project[s]=Z.show)&&(a.projectOpacity[s]=Z.opacity,a.projectScale[s]=Z.scale)}a.errorBounds=MO(e,g,c);var N=function(t){for(var e=[0,0,0],i=[[0,0,0],[0,0,0],[0,0,0]],n=[1,1,1],r=0;r<3;r++){var a=t[r];a&&!1!==a.copy_zstyle&&!1!==t[2].visible&&(a=t[2]),a&&a.visible&&(e[r]=a.width/2,i[r]=ZO(a.color),n[r]=a.thickness)}return{capSize:e,color:i,lineWidth:n}}([e.error_x,e.error_y,e.error_z]);return a.errorColor=N.color,a.errorLineWidth=N.lineWidth,a.errorCapSize=N.capSize,a.delaunayAxis=e.surfaceaxis,a.delaunayColor=ZO(e.surfacecolor),a}function jO(t){if(EO.isArrayOrTypedArray(t)){var e=t[0];return EO.isArrayOrTypedArray(e)&&(t=e),"rgb("+t.slice(0,3).map((function(t){return Math.round(255*t)}))+")"}return null}function qO(t){return EO.isArrayOrTypedArray(t)?4===t.length&&"number"==typeof t[0]?jO(t):t.map(jO):null}YO.handlePick=function(t){if(t.object&&(t.object===this.linePlot||t.object===this.delaunayMesh||t.object===this.textMarkers||t.object===this.scatterPlot)){var e=t.index=t.data.index;return t.object.highlight&&t.object.highlight(null),this.scatterPlot&&(t.object=this.scatterPlot,this.scatterPlot.highlight(t.data)),t.textLabel="",this.textLabels&&(EO.isArrayOrTypedArray(this.textLabels)?(this.textLabels[e]||0===this.textLabels[e])&&(t.textLabel=this.textLabels[e]):t.textLabel=this.textLabels),t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]],!0}},YO.update=function(t){var e,i,n,r,a=this.scene.glplot.gl,s=XO.solid;this.data=t;var o=PO(this.scene,t);"mode"in o&&(this.mode=o.mode),"lineDashes"in o&&o.lineDashes in XO&&(s=XO[o.lineDashes]),this.color=qO(o.scatterColor)||qO(o.lineColor),this.dataPoints=o.position,e={gl:this.scene.glplot.gl,position:o.position,color:o.lineColor,lineWidth:o.lineWidth||1,dashes:s[0],dashScale:s[1],opacity:t.opacity,connectGaps:t.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(e):(this.linePlot=GO(e),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=t.opacity;if(t.marker&&void 0!==t.marker.opacity&&(l*=t.marker.opacity),i={gl:this.scene.glplot.gl,position:o.position,color:o.scatterColor,size:o.scatterSize,glyph:o.scatterMarker,opacity:l,orthographic:!0,lineWidth:o.scatterLineWidth,lineColor:o.scatterLineColor,project:o.project,projectScale:o.projectScale,projectOpacity:o.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(i):(this.scatterPlot=RO(i),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),r={gl:this.scene.glplot.gl,position:o.position,glyph:o.text,color:o.textColor,size:o.textSize,angle:o.textAngle,alignment:o.textOffset,font:o.textFontFamily,fontWeight:o.textFontWeight,fontStyle:o.textFontStyle,fontVariant:o.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:t.opacity},this.textLabels=t.hovertext||t.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(r):(this.textMarkers=RO(r),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:o.position,color:o.errorColor,error:o.errorBounds,lineWidth:o.errorLineWidth,capSize:o.errorCapSize,opacity:t.opacity},this.errorBars?o.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):o.errorBounds&&(this.errorBars=SO(n),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),o.delaunayAxis>=0){var c=function(t,e,i){var n,r=(i+1)%3,a=(i+2)%3,s=[],o=[];for(n=0;n<t.length;++n){var l=t[n];!isNaN(l[r])&&isFinite(l[r])&&!isNaN(l[a])&&isFinite(l[a])&&(s.push([l[r],l[a]]),o.push(n))}var c=VO(s);for(n=0;n<c.length;++n)for(var g=c[n],u=0;u<g.length;++u)g[u]=o[g[u]];return{positions:t,cells:c,meshColor:e}}(o.position,o.delaunayColor,o.delaunayAxis);c.opacity=t.opacity,this.delaunayMesh?this.delaunayMesh.update(c):(c.gl=a,this.delaunayMesh=wO(c),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},YO.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};var $O=function(t,e){var i=new TO(t,e.uid);return i.update(e),i},tK={exports:{}},eK=qR,iK=_g(),nK=Gf,rK=_F,aK=Dd.hovertemplateAttrs,sK=Dd.texttemplateAttrs,oK=ru,lK=xO,cK=vO,gK=Mg.extendFlat,uK=wd.overrideAll,dK=mh,hK=eK.line,BK=eK.marker,pK=BK.line,FK=gK({width:hK.width,dash:{valType:"enumerated",values:dK(lK),dflt:"solid",description:"Sets the dash style of the lines."}},nK("line"));function fK(t){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",t,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var QK=tK.exports=uK({x:eK.x,y:eK.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:gK({},eK.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:sK({},{}),hovertext:gK({},eK.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:aK(),xhoverformat:rK("x"),yhoverformat:rK("y"),zhoverformat:rK("z"),mode:gK({},eK.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:fK("x"),y:fK("y"),z:fK("z")},connectgaps:eK.connectgaps,line:FK,marker:gK({symbol:{valType:"enumerated",values:dK(cK),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:gK({},BK.size,{dflt:8}),sizeref:BK.sizeref,sizemin:BK.sizemin,sizemode:BK.sizemode,opacity:gK({},BK.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:BK.colorbar,line:gK({width:gK({},pK.width,{arrayOk:!1})},nK("marker.line"))},nK("marker")),textposition:gK({},eK.textposition,{dflt:"top center"}),textfont:iK({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"],description:"Sets the text font."}),opacity:oK.opacity,hoverinfo:gK({},oK.hoverinfo)},"calc","nested");QK.x.editType=QK.y.editType=QK.z.editType="calc+clearAxisTypes";var IK=tK.exports,UK=Nu,bK=_B,yK=WQ,mK=VV,xK=DV,vK=HV,CK=IK;var AK=IE,LK=fE,GK={plot:$O,attributes:IK,markerSymbols:vO,supplyDefaults:function(t,e,i,n){function r(i,n){return bK.coerce(t,e,CK,i,n)}var a=function(t,e,i,n){var r=0,a=i("x"),s=i("y"),o=i("z");UK.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],n),a&&s&&o&&(r=Math.min(a.length,s.length,o.length),e._length=e._xlength=e._ylength=e._zlength=r);return r}(t,e,r,n);if(a){r("text"),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),r("mode"),yK.hasMarkers(e)&&mK(t,e,i,n,r,{noSelect:!0,noAngle:!0}),yK.hasLines(e)&&(r("connectgaps"),xK(t,e,i,n,r)),yK.hasText(e)&&(r("texttemplate"),vK(t,e,n,r,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var s=(e.line||{}).color,o=(e.marker||{}).color;r("surfaceaxis")>=0&&r("surfacecolor",s||o);for(var l=["x","y","z"],c=0;c<3;++c){var g="projection."+l[c];r(g+".show")&&(r(g+".opacity"),r(g+".scale"))}var u=UK.getComponentMethod("errorbars","supplyDefaults");u(t,e,s||o||i,{axis:"z"}),u(t,e,s||o||i,{axis:"y",inherit:"z"}),u(t,e,s||o||i,{axis:"x",inherit:"z"})}else e.visible=!1},colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:function(t,e){var i=[{x:!1,y:!1,trace:e,t:{}}];return AK(i,e),LK(t,e),i},moduleType:"trace",name:"scatter3d",basePlotModule:fz,categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}},RK=GK,SK=t({__proto__:null,default:Ds(RK)},[RK]);$M.register([mO,SK]);class wK extends(La(Ga)){static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:Boolean,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.point=!0,this.updateable=!1,this.GAMBLE=0,this.SURE=1,this.NR=.25,this.DEFAULT=.75,this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response=this.DEFAULT,this.range={},this.range.a={start:1e-4,stop:1,step:.05},this.range.l={start:0,stop:10,step:.5},this.range.g={start:0,stop:1,step:.05},this.parameterSpace=[],this.alignState()}alignState(){this.updateable&&(this.response=Vs.xal2v(this.xw,this.a,this.l)*Vs.pg2w(this.pw,this.g)+Vs.xal2v(this.xl,this.a,this.l)*(1-Vs.pg2w(this.pw,this.g))>Vs.xal2v(this.xs,this.a,this.l)?this.GAMBLE:this.SURE),this.parameterSpace={a:[],l:[],g:[],uDiff:[]},It(this.range.a.start,this.range.a.stop+.01,this.range.a.step).forEach((t=>{It(this.range.l.start,this.range.l.stop+.01,this.range.l.step).forEach((e=>{It(this.range.g.start,this.range.g.stop+.01,this.range.g.step).forEach((i=>{this.parameterSpace.a.push(t),this.parameterSpace.l.push(e),this.parameterSpace.g.push(i);const n=Vs.xal2v(this.xw,t,e)*Vs.pg2w(this.pw,i)+Vs.xal2v(this.xl,t,e)*(1-Vs.pg2w(this.pw,i))-Vs.xal2v(this.xs,t,e);this.parameterSpace.uDiff.push(n)}))}))}))}static get styles(){return[super.styles,MJ,o`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .plotly {
          height: 100%;

          cursor: grab;
        }

        /* Plotly modebar styles */
        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */
        .plotly:hover .modebar .modebar-group {
          background-color: rgba(255, 255, 255, 0.5);
        }

        .modebar-btn .icon path {
          fill: rgba(68, 68, 68, 0.3);
        }

        .modebar-btn:hover .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }

        .modebar-btn.active .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }
      `]}render(){return Y`
      <div class="plotly"></div>
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.getComputedStyleValue("---color-text"),i=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),r=this.getComputedStyleValue("---color-element-emphasis"),a=this.getComputedStyleValue("---color-worse"),s=this.getComputedStyleValue("---color-better"),o=this.getComputedStyleValue("---color-nr"),l=[];this.surface&&l.push({name:"Decision Boundary",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.a.stop]},y:{show:!0,locations:[this.range.l.stop]},z:{show:!0,locations:[this.range.g.start]}},surface:{show:!1}}),this.point&&l.push({name:"Current Decision",type:"scatter3d",x:[this.a],y:[this.l],z:[this.g],mode:"markers",marker:{color:[this.response],coloraxis:"coloraxis2",line:{color:r,width:2},size:6}});const c={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,a],[.01,a],[.24,o],[.26,o],[.74,r],[.76,r],[.99,s],[1,s]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:e},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[Math.round(this.range.a.start),this.range.a.stop],title:{text:"alpha",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.l.start,this.range.l.stop],title:{text:"lambda",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.g.start,this.range.g.stop],title:{text:"gamma",font:{size:1.125*this.rem}}}},uirevision:!0};$M.react(this.shadowRoot.querySelector(".plotly"),l,c,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}customElements.define("cpt-space",wK);class VK extends(La(Ga)){static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.a=.5,this.l=2,this.x=null,this.label="",this.function="default",this.functions=[{name:"default",a:this.a,l:this.l}],this.values=[{name:"default",x:this.x,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.alignState()}alignState(){this.functions[0].a=this.a,this.functions[0].l=this.l,this.values[0].x=this.x,this.values[0].label=this.label,this.values[0].function=this.function,this.values.forEach((t=>{const e=this.functions.find((e=>e.name===t.function));t.v=Vs.xal2v(t.x,e.a,e.l)})),this.v=this.values[0].v}trial(t,e,i,n,r,a){this.trialCount&&this.removeValue(`${this.trialCount}-w`),this.trialCount&&this.removeValue(`${this.trialCount}-s`),this.xl=t,this.xw=e,this.pw=i,this.xs=n,this.trialCount=r,this.response=a,this.setValue(this.xw,`${this.trialCount}-w`,"g","default",!0),this.setValue(this.xs,`${this.trialCount}-s`,"s","default",!0)}pauseTrial(){const t=je(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum((t=>(t.paused=!0,t)))}resumeTrial(){je(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((t=>(t.paused=!1,t))),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearValues(){this.values.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearValues()}removeFunction(t){this.functions=this.functions.filter((e=>e.name!==t)),this.requestUpdate()}removeValue(t){this.values=this.values.filter((e=>e.name!==t)),this.requestUpdate()}remove(t){this.removeFunction(t),this.removeValue(t)}getFunction(t="default"){return this.functions.find((e=>e.name===t))}getValue(t="default"){return this.values.find((e=>e.name===t))}get(t="default"){return{...this.getFunction(t),...this.getValue(t)}}setFunction(t,e,i="default"){"default"===i&&(this.a=t,this.l=e);const n=this.functions.find((t=>t.name===i));void 0===n?this.functions.push({name:i,a:t,l:e}):(n.a=t,n.l=e),this.requestUpdate()}setValue(t,e="default",i="",n=e,r=!1){"default"===e&&(this.x=t,this.label=i);const a=this.values.find((t=>t.name===e));void 0===a?this.values.push({name:e,x:t,label:i,function:n,trial:r,new:r}):(a.x=t,a.label=i,a.function=n),this.requestUpdate()}set(t,e,i,n="default",r="",a=n){this.setFunction(e,i,a),this.setValue(t,n,r,a)}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve-p.interactive,
        .curve-n.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve-p.interactive:hover,
        .curve-n.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve-p.interactive:active,
        .curve-n.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve-p.interactive:focus,
        :host(.keyboard) .curve-n.interactive:focus {
          filter: url("#shadow-8");
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        /* Make a larger target for touch users */
        @media (pointer: coarse) {
          .point.interactive .circle {
            stroke: #000000;
            stroke-opacity: 0;
            stroke-width: 12px;
          }
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .axis-x,
        .axis-y {
          stroke: var(---color-element-border);
          shape-rendering: crispEdges;
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve-p,
        .curve-n {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-x,
        .line-v {
          fill: none;
          stroke-width: 2;
        }

        .line-x {
          stroke: var(---color-x);
        }

        .line-v {
          stroke: var(---color-v);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }
      `]}render(){return Y`
      ${Ga.svgFilters}
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,i=this.height,n=Math.min(e,i),r=2*this.rem,a=3*this.rem,s=3*this.rem,o=n-(r+a),l=n-(s+2*this.rem),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),g=20,u=zr().domain([-20,g]).range([0,l]);this.xScale=u;const d=zr().domain([g,-20]).range([0,o]);this.yScale=d;const h=ci().subject(((t,e)=>({x:t.x,y:this.yScale(Vs.xal2v(this.xScale.invert(t.x),e.a,e.l))}))).on("start",(t=>{je(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const i=this.xScale.invert(t.x),n=this.yScale.invert(t.y),r=Vs.xlv2a(i,e.l,n);e.a=Number.isNaN(r)||r<0||r>1||i<0||n<0?i>n?0:1:r,"default"===e.name&&(this.a=e.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{je(t.currentTarget).classed("dragging",!1)})),B=ci().subject(((t,e)=>({x:t.x,y:this.yScale(Vs.xal2v(this.xScale.invert(t.x),e.a,e.l))}))).on("start",(t=>{je(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const i=this.xScale.invert(t.x),n=this.yScale.invert(t.y),r=Vs.xav2l(i,e.a,n);e.l=Number.isNaN(r)||r<0||r>100||i>0||n>0?i>n?100:0:r,"default"===e.name&&(this.l=e.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))})).on("end",(t=>{je(t.currentTarget).classed("dragging",!1)})),p=ci().subject(((t,e)=>({x:this.xScale(e.x),y:this.yScale(e.v)}))).on("start",(t=>{je(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const i=this.xScale.invert(t.x);e.x=i<-20?-20:i>g?g:i,"default"===e.name&&(this.x=e.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,v:e.v,label:e.label,a:this.getFunction(e.function).a,l:this.getFunction(e.function).l},bubbles:!0}))})).on("end",(t=>{je(t.currentTarget).classed("dragging",!1)})),F=ba().x((t=>u(t.x))).y((t=>d(t.v))),f=je(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),Q=f.enter().append("svg").classed("main",!0),I=Q.merge(f).attr("viewBox",`0 0 ${n} ${n}`),U=Q.append("g").classed("plot",!0),b=I.select(".plot").attr("transform",`translate(${s}, ${r})`);U.append("clipPath").attr("id","clip-cpt-value").append("rect"),b.select("clipPath rect").attr("height",o+1).attr("width",l+1);const y=U.append("g").classed("underlayer",!0),m=b.select(".underlayer");y.append("rect").classed("background",!0),m.select(".background").attr("height",o).attr("width",l),y.append("g").classed("scale-x",!0);m.select(".scale-x").attr("transform",`translate(0, ${d(-20)})`).transition().duration(2*c).ease(hr).call(wt(u)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),y.append("line").classed("axis-x",!0),m.select(".axis-x").transition().duration(c).ease(hr).attr("x1",u(-20)).attr("x2",u(g)).attr("y1",d(0)).attr("y2",d(0));const x=y.append("text").classed("title-x",!0).attr("text-anchor","middle");x.append("tspan").classed("name",!0).text("Objective Value ("),x.append("tspan").classed("math-var x",!0).text("x"),x.append("tspan").classed("name",!0).text(")"),m.select(".title-x").attr("transform",`translate(${l/2}, ${o+2.25*this.rem})`),y.append("g").classed("scale-y",!0);m.select(".scale-y").transition().duration(2*c).ease(hr).call(Vt(d)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),y.append("line").classed("axis-y",!0),m.select(".axis-y").transition().duration(c).ease(hr).attr("x1",u(0)).attr("x2",u(0)).attr("y1",d(g)).attr("y2",d(-20));const v=y.append("text").classed("title-y",!0).attr("text-anchor","middle");v.append("tspan").classed("name",!0).text("Subjective Value ("),v.append("tspan").classed("math-var v",!0).text("v"),v.append("tspan").classed("name",!0).text(")"),m.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${o/2})rotate(-90)`),y.append("line").classed("diagonal",!0),m.select(".diagonal").transition().duration(2*c).ease(hr).attr("x1",u(-20)).attr("y1",d(-20)).attr("x2",u(g)).attr("y2",d(g)),U.append("g").classed("content",!0);const C=b.select(".content"),A=C.selectAll(".lines").data(this.values.filter((t=>null!=t.x)),(t=>t.name)),L=A.enter().append("g").classed("lines",!0);L.each(((t,e,i)=>{const n=je(i[e]);n.append("line").classed("line-x above",!0),n.append("line").classed("line-x below",!0),n.append("line").classed("line-v before",!0),n.append("line").classed("line-v after",!0)})),L.filter((t=>t.new)).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each(((t,e,i)=>{const n=je(i[e]);n.select(".line-x.above").attr("x1",u(t.x)).attr("x2",u(t.x)).attr("y1",d(g)).attr("y2",d(g)),n.select(".line-x.below").attr("x1",u(t.x)).attr("x2",u(t.x)).attr("y1",d(-20)).attr("y2",d(-20)),n.select(".line-v.before").attr("x1",u(t.x)).attr("x2",u(t.x)).attr("y1",d(t.v)).attr("y2",d(t.v)),n.select(".line-v.after").attr("x1",u(t.x)).attr("x2",u(t.x)).attr("y1",d(t.v)).attr("y2",d(t.v))}));const G=L.merge(A),R=G.filter((t=>t.new&&!t.paused));if(!R.empty()){const t=R.attr("data-animating-ease-time-1"),e=R.attr("data-animating-ease-time-2"),i=e=>zr().domain([0,1]).range([t,1])(e),n=e=>zr().range([0,1]).domain([t,1])(e),r=t=>zr().domain([0,1]).range([e,1])(t),a=t=>zr().range([0,1]).domain([e,1])(t),s=e=>i=>zr().domain([e(t),1]).range([0,1])(e(i)),o=t=>i=>zr().domain([t(e),1]).range([0,1])(t(i));R.transition("new-1").duration((()=>Math.floor(c*(1-t)))).ease(i).attr("data-animating-ease-time-1",1).tween("animating",((t,e,i)=>{const r=i[e],a=je(r),o=nn(void 0!==r.x?r.x:t.x,t.x),l=nn(void 0!==r.a?r.a:this.getFunction(t.function).a,this.getFunction(t.function).a),c=nn(void 0!==r.l?r.l:this.getFunction(t.function).l,this.getFunction(t.function).l),h=nn(d.invert(a.select(".line-x.above").attr("y1")),t.v),B=nn(d.invert(a.select(".line-x.below").attr("y1")),t.v);return t=>{r.x=o(hr(n(t))),r.a=l(hr(n(t))),r.l=c(hr(n(t))),r.v=Vs.xal2v(r.x,r.a,r.l),a.select(".line-x.above").attr("x1",u(r.x)).attr("x2",u(r.x)).attr("y1",d(h(s(dr)(t)))).attr("y2",d(g)),a.select(".line-x.below").attr("x1",u(r.x)).attr("x2",u(r.x)).attr("y1",d(B(s(dr)(t)))).attr("y2",d(-20))}})).transition("new-2").duration((()=>Math.floor(c*(1-e)))).ease(r).attr("data-animating-ease-time-2",1).tween("animating",((t,e,i)=>{const n=i[e],r=je(n),s=nn(void 0!==n.x?n.x:t.x,t.x),l=nn(void 0!==n.a?n.a:this.getFunction(t.function).a,this.getFunction(t.function).a),c=nn(void 0!==n.l?n.l:this.getFunction(t.function).l,this.getFunction(t.function).l),h=nn(u.invert(r.select(".line-v.before").attr("x1")),-20),B=nn(u.invert(r.select(".line-v.after").attr("x1")),g);return t=>{n.x=s(hr(a(t))),n.a=l(hr(a(t))),n.l=c(hr(a(t))),n.v=Vs.xal2v(n.x,n.a,n.l),r.select(".line-v.before").attr("x1",u(h(o(hr)(t)))).attr("x2",u(n.x)).attr("y1",d(n.v)).attr("y2",d(n.v)),r.select(".line-v.after").attr("x1",u(B(o(hr)(t)))).attr("x2",u(n.x)).attr("y1",d(n.v)).attr("y2",d(n.v))}})).on("end",((t,e,i)=>{const n=i[e];n.removeAttribute("data-animating-ease-time-1"),n.removeAttribute("data-animating-ease-time-2"),t.new=!1,this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))}))}const S=G.filter((t=>t.new&&t.paused));if(!S.empty()){const t=S.attr("data-animating-ease-time-1"),e=S.attr("data-animating-ease-time-2");S.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).tween("paused",((i,n,r)=>{const a=r[n],s=je(a),o=nn(void 0!==a.x?a.x:i.x,i.x),l=nn(void 0!==a.a?a.a:this.getFunction(i.function).a,this.getFunction(i.function).a),c=nn(void 0!==a.l?a.l:this.getFunction(i.function).l,this.getFunction(i.function).l),h=nn(g,i.v),B=nn(-20,i.v),p=nn(i.x,-20),F=nn(i.x,g);return i=>{a.x=o(i),a.a=l(i),a.l=c(i),a.v=Vs.xal2v(a.x,a.a,a.l),s.select(".line-x.above").attr("x1",u(a.x)).attr("x2",u(a.x)).attr("y1",d(h(dr(t)))).attr("y2",d(g)),s.select(".line-x.below").attr("x1",u(a.x)).attr("x2",u(a.x)).attr("y1",d(B(dr(t)))).attr("y2",d(-20)),s.select(".line-v.before").attr("x1",u(p(hr(e)))).attr("x2",u(a.x)).attr("y1",d(a.v)).attr("y2",d(a.v)),s.select(".line-v.after").attr("x1",u(F(hr(e)))).attr("x2",u(a.x)).attr("y1",d(a.v)).attr("y2",d(a.v))}}))}G.filter((t=>!t.new)).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).tween("non-animating",((t,e,i)=>{const n=i[e],r=je(n),a=nn(void 0!==n.x?n.x:t.x,t.x),s=nn(void 0!==n.a?n.a:this.getFunction(t.function).a,this.getFunction(t.function).a),o=nn(void 0!==n.l?n.l:this.getFunction(t.function).l,this.getFunction(t.function).l);return t=>{n.x=a(t),n.a=s(t),n.l=o(t),n.v=Vs.xal2v(n.x,n.a,n.l),r.select(".line-x.above").attr("x1",u(n.x)).attr("x2",u(n.x)).attr("y1",d(n.v)).attr("y2",d(g)),r.select(".line-x.below").attr("x1",u(n.x)).attr("x2",u(n.x)).attr("y1",d(n.v)).attr("y2",d(-20)),r.select(".line-v.before").attr("x1",u(-20)).attr("x2",u(n.x)).attr("y1",d(n.v)).attr("y2",d(n.v)),r.select(".line-v.after").attr("x1",u(g)).attr("x2",u(n.x)).attr("y1",d(n.v)).attr("y2",d(n.v))}})),A.exit().remove();const w=C.selectAll(".curve-p").data(this.functions,(t=>t.name)),V=w.enter().append("path").classed("curve-p",!0).attr("clip-path","url(#clip-cpt-value)").merge(w);(this.firstUpdate||t.has("interactive"))&&(this.interactive?V.attr("tabindex",0).classed("interactive",!0).call(h).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let i=e.a;switch(t.key){case"ArrowUp":case"ArrowLeft":i+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":i-=t.shiftKey?.01:.05}i=i<0?0:i>1?1:i,i!==e.a&&(e.a=i,"default"===e.name&&(this.a=e.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):V.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),V.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).attrTween("d",((t,e,i)=>{const n=i[e],r=nn(void 0!==n.a?n.a:t.a,t.a),a=nn(void 0!==n.l?n.l:t.l,t.l);return t=>{n.a=r(t),n.l=a(t);const e=It(u(0),u.range()[1]+1,1).map((t=>({x:u.invert(t),v:Vs.xal2v(u.invert(t),n.a,n.l)})));return F(e)}})),w.exit().remove();const E=C.selectAll(".curve-n").data(this.functions,(t=>t.name)),Z=E.enter().append("path").classed("curve-n",!0).attr("clip-path","url(#clip-cpt-value)").merge(E);(this.firstUpdate||t.has("interactive"))&&(this.interactive?Z.attr("tabindex",0).classed("interactive",!0).call(B).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let i=e.l;switch(t.key){case"ArrowUp":case"ArrowLeft":i-=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":i+=t.shiftKey?.01:.05}i=i<0?0:i>100?100:i,i!==e.l&&(e.l=i,"default"===e.name&&(this.l=e.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(e.name),bubbles:!0}))),t.preventDefault()}})):Z.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),Z.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).attrTween("d",((t,e,i)=>{const n=i[e],r=nn(void 0!==n.a?n.a:t.a,t.a),a=nn(void 0!==n.l?n.l:t.l,t.l);return t=>{n.a=r(t),n.l=a(t);const e=It(u.range()[0],u(0)+1,1).map((t=>({x:u.invert(t),v:Vs.xal2v(u.invert(t),n.a,n.l)})));return F(e)}})),E.exit().remove();const N=C.selectAll(".point").data(this.values.filter((t=>null!=t.x)),(t=>t.name)),D=N.enter().append("g").classed("point",!0);D.append("circle").classed("circle",!0),D.append("text").classed("label",!0);const X=D.merge(N);X.select("text").text((t=>t.label)),X.filter((e=>(this.firstUpdate||t.has("interactive"))&&this.interactive&&!e.trial)).attr("tabindex",0).classed("interactive",!0).call(p).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let i=e.x;switch(t.key){case"ArrowUp":case"ArrowRight":i+=t.shiftKey?.2:1;break;case"ArrowDown":case"ArrowLeft":i-=t.shiftKey?.2:1}i=i<-20?-20:i>g?g:i,i!==e.x&&(e.x=i,"default"===e.name&&(this.x=e.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,v:e.v,label:e.label,a:this.getFunction(e.function).a,l:this.getFunction(e.function).l},bubbles:!0}))),t.preventDefault()}})),X.filter((e=>(this.firstUpdate||t.has("interactive"))&&!this.interactive||e.trial)).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),X.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(hr).attrTween("transform",((t,e,i)=>{const n=i[e],r=nn(void 0!==n.x?n.x:t.x,t.x),a=nn(void 0!==n.a?n.a:this.getFunction(t.function).a,this.getFunction(t.function).a),s=nn(void 0!==n.l?n.l:this.getFunction(t.function).l,this.getFunction(t.function).l);return t=>(n.x=r(t),n.a=a(t),n.l=s(t),`translate(\n            ${u(n.x)},\n            ${d(Vs.xal2v(n.x,n.a,n.l))}\n          )`)})),N.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-value",VK),$M.register([mO,SK]);class EK extends(La(Ga)){static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:String,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.points=["all","first","rest","none"],this.point="first",this.updateable=!1,this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response="",this.label="",this.choices=[{name:"default",xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,label:""}],this.GAMBLE=0,this.SURE=1,this.NR=.25,this.DEFAULT=.75,this.pointList=[],this.range={},this.range.xs={start:5,stop:15,step:.5},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:0,stop:1,step:.05},this.decisionSpace=[],this.alignState()}alignState(){this.choices[0].name="default",this.choices[0].xw=this.xw,this.choices[0].pw=this.pw,this.choices[0].xs=this.xs,this.choices[0].response=this.response,this.choices[0].label=this.label,this.updateable&&(this.choices.forEach((t=>{t.response=Vs.xal2v(t.xw,this.a,this.l)*Vs.pg2w(t.pw,this.g)+Vs.xal2v(this.xl,this.a,this.l)*(1-Vs.pg2w(t.pw,this.g))>Vs.xal2v(t.xs,this.a,this.l)?"gamble":"sure"})),this.response=this.choices[0].response),this.pointList={xw:[],pw:[],xs:[],response:[],label:[]},this.choices.forEach(((t,e)=>{(0===e&&("first"===this.point||"all"===this.point)||e>0&&("rest"===this.point||"all"===this.point))&&(this.pointList.xw.push(t.xw),this.pointList.pw.push(t.pw),this.pointList.xs.push(t.xs),this.pointList.response.push("gamble"===t.response?this.GAMBLE:"sure"===t.response?this.SURE:"nr"===t.response?this.NR:this.DEFAULT),this.pointList.label.push(t.label))})),this.decisionSpace={xs:[],xw:[],pw:[],uDiff:[]},It(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).forEach((t=>{It(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).forEach((e=>{It(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step).forEach((i=>{this.decisionSpace.xs.push(t),this.decisionSpace.xw.push(e),this.decisionSpace.pw.push(i);const n=Vs.xal2v(e,this.a,this.l)*Vs.pg2w(i,this.g)+Vs.xal2v(this.xl,this.a,this.l)*(1-Vs.pg2w(i,this.g))-Vs.xal2v(t,this.a,this.l);this.decisionSpace.uDiff.push(n)}))}))}))}clear(){this.choices=[{}],this.requestUpdate()}get(t="default"){const e=this.choices.find((e=>e.name===t));return void 0===e?null:e}set(t,e,i,n,r="default",a=""){"default"===r&&(this.xw=t,this.pw=e,this.xs=i,this.response=n,this.label=a);const s=this.choices.find((t=>t.name===r));void 0===s?this.choices.push({name:r,xw:t,pw:e,xs:i,response:n,label:a}):(s.xw=t,s.pw=e,s.xs=i,s.response=n,s.label=a),this.requestUpdate()}static get styles(){return[super.styles,MJ,o`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .plotly {
          height: 100%;

          cursor: grab;
        }

        /* Plotly modebar styles */
        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */
        .plotly:hover .modebar .modebar-group {
          background-color: rgba(255, 255, 255, 0.5);
        }

        .modebar-btn .icon path {
          fill: rgba(68, 68, 68, 0.3);
        }

        .modebar-btn:hover .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }

        .modebar-btn.active .icon path {
          fill: rgba(68, 68, 68, 0.7);
        }
      `]}render(){return Y`
      <div class="plotly"></div>
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.getComputedStyleValue("---color-text"),i=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),r=this.getComputedStyleValue("---color-element-emphasis"),a=this.getComputedStyleValue("---color-worse"),s=this.getComputedStyleValue("---color-better"),o=this.getComputedStyleValue("---color-nr"),l=[];this.surface&&l.push({name:"Decision Boundary",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.xs.stop]},y:{show:!0,locations:[this.range.xw.stop]},z:{show:!0,locations:[this.range.pw.start]}},surface:{show:!1}}),l.push({name:"Current Decision",type:"scatter3d",x:this.pointList.xs,y:this.pointList.xw,z:this.pointList.pw,mode:"markers",marker:{color:this.pointList.response,coloraxis:"coloraxis2",line:{color:r,width:2},size:6}});const c={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,a],[.01,a],[.24,o],[.26,o],[.74,r],[.76,r],[.99,s],[1,s]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:e},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.xs.start,this.range.xs.stop],title:{text:"Sure Value",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.xw.start,this.range.xw.stop],title:{text:"Win Value",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.pw.start,this.range.pw.stop],title:{text:"Win Probability",font:{size:1.125*this.rem}}}},uirevision:!0};$M.react(this.shadowRoot.querySelector(".plotly"),l,c,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}customElements.define("decision-space",EK);class ZK extends Ga{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.duration=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("prospectable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("prospectable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("prospectable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("prospectable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("prospectable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `]}render(){return Y`
      <div class="holder">
        ${this.trials?Y`<decidables-slider min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:Y``}
        ${this.duration?Y`<decidables-slider min="10" max="4000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:Y``}
        ${this.run||this.pause||this.reset?Y`
            <div class="buttons">
              ${this.run?Y`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:Y``}
              ${this.pause?Y`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:Y``}
              ${this.reset?Y`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:Y``}
            </div>
            `:Y``}
      </div>`}}customElements.define("prospectable-control",ZK);class NK extends Ga{static get properties(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.feedbacks=["none","outcome"],this.feedback="none",this.trial=!1,this.payoffs=["none","selection","both"],this.payoff="none",this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.gamblePayoff=0,this.surePayoff=0,this.nrPayoff=0,this.betters=["gamble","sure","even"],this.better=void 0,this.responses=["gamble","sure","nr"],this.response=void 0,this.outcomes=["better","worse","even","nr"],this.outcome=void 0}get trialPayoff(){switch(this.response){case"gamble":return this.gamblePayoff;case"sure":return this.surePayoff;case"nr":return this.nrPayoff;default:return}}start(t,e,i,n,r,a,s,o){this.state="waiting",this.xl=t,this.xw=e,this.pw=i,this.xs=n,this.gamblePayoff=r,this.surePayoff=a,this.better=s,this.trialCount=o,this.response=void 0,this.outcome=void 0}stop(){this.state="feedback",void 0===this.response&&(this.outcome="nr")}gamble(){this.responded("gamble")}sure(){this.responded("sure")}responded(t){this.state="feedback",this.response=t,this.outcome="even"===this.better?"even":this.better===this.response?"better":"worse",this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,outcome:this.outcome,payoff:this.trialPayoff},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.better=void 0,this.gamblePayoff=0,this.surePayoff=0,this.response=void 0,this.outcome=void 0}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Trial messages */
        .trials {
          display: flex;

          flex-direction: column;

          justify-content: center;
        }

        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          width: 5.25rem;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="gamble"] {
          --decidables-button-background-color: var(---color-worse);
        }

        .selected[disabled][name="sure"] {
          --decidables-button-background-color: var(---color-better);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: row;

          justify-content: center;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 5.25rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        .feedback.better {
          background-color: var(---color-better-light);
        }

        .feedback.worse {
          background-color: var(---color-worse-light);
        }

        .feedback.even {
          background-color: var(---color-even-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }

        .feedback .outcome {
          font-weight: 600;
          line-height: 1.15;
        }

        :host([payoff="selection"]) .feedback,
        :host([payoff="both"]) .feedback {
          height: 4rem;
        }

        /* Payoff feedback */
        .payoff {
          text-align: center;
        }

        .payoff .label {
          font-weight: 600;
        }
      `]}render(){return Y`
      <div class="holder">
        ${this.trial?Y`
            <div class="trials">
              <div class="trial">
                <span class="label">Trial: </span><span class="count">${this.trialCount}</span><span class="of"> of </span><span class="total">${this.trialTotal}</span>
              </div>
            </div>`:Y``}
        <div class="responses">
          <decidables-button name="gamble" class="response ${"feedback"===this.state&&"gamble"===this.response?"selected":"waiting"===this.state?"waiting":""}" ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.gamble.bind(this)}>Gamble</decidables-button>
          <decidables-button name="sure" class="response ${"feedback"===this.state&&"sure"===this.response?"selected":"waiting"===this.state?"waiting":""}" ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.sure.bind(this)}>Sure</decidables-button>
        </div>
        ${"none"!==this.feedback||"none"!==this.payoff?Y`
            <div class="feedbacks">
              <div class="feedback gamble
                ${"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?this.outcome:""}">
                ${"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?"better"===this.outcome?Y`<span class="outcome">Better</span>`:"worse"===this.outcome?Y`<span class="outcome">Worse</span>`:"even"===this.outcome?Y`<span class="outcome">Even</span>`:Y`<span class="outcome">No<br>Response</span>`:""}
                ${"both"===this.payoff||"selection"===this.payoff&&"gamble"===this.response?Y`<span class="payoff">${"gamble"===this.response?"Win:":"Miss:"} $${this.gamblePayoff}</span>`:Y``}
              </div>
              <div class="feedback sure
                ${"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?this.outcome:""}">
                ${"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?"better"===this.outcome?Y`<span class="outcome">Better</span>`:"worse"===this.outcome?Y`<span class="outcome">Worse</span>`:"even"===this.outcome?Y`<span class="outcome">Even</span>`:Y`<span class="outcome">No<br>Response</span>`:""}
                ${"both"===this.payoff||"selection"===this.payoff&&"sure"===this.response?Y`<span class="payoff">${"sure"===this.response?"Win:":"Miss:"} $${this.surePayoff}</span>`:Y``}
              </div>
            </div>`:Y``}
      </div>`}}customElements.define("prospectable-response",NK);class DK extends(La(Ga)){static get styles(){return[super.styles,o`
        :host {
          --decidables-spinner-font-size: 1.75rem;
          --decidables-spinner-input-width: 4rem;
          --decidables-spinner-prefix: "$";

          display: inline-block;

          width: 10rem;
          height: 10rem;
        }

        .main {
          width: 100%;
          height: 100%;
          overflow: visible;
        }

        .outline {
          fill: var(---color-element-background);
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc {
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc.interactive {
          cursor: ns-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .arc.interactive:hover {
          filter: url("#shadow-4");
        }

        .arc.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .arc.interactive:focus {
          filter: url("#shadow-8");
        }

        .arc.win {
          fill: var(---color-better-light);
        }

        .arc.loss {
          fill: var(---color-worse-light);
        }

        .arc.sure {
          fill: var(---color-even-light);
        }

        .label.static {
          font-size: 1.75rem;

          user-select: none;

          dominant-baseline: middle;
          text-anchor: middle;
        }

        .label.interactive {
          width: var(--decidables-spinner-input-width);
          height: calc(var(--decidables-spinner-font-size) * 1.5);
          overflow: visible;
        }

        /* HACK: Get Safari to work with SVG foreignObject */
        /* https://stackoverflow.com/questions/51313873/svg-foreignobject-not-working-properly-on-safari */
        /* https://bugs.webkit.org/show_bug.cgi?id=23113 */
        .label.interactive decidables-spinner {
          position: fixed;
        }

        .label.interactive.win decidables-spinner {
          background-color: var(---color-better-light);
        }

        .label.interactive.loss decidables-spinner {
          background-color: var(---color-worse-light);
        }

        .label.interactive.sure decidables-spinner {
          background-color: var(---color-even-light);
        }
      `]}render(){return Y`
      ${Ga.svgFilters}
      <slot></slot>
    `}connectedCallback(){super.connectedCallback(),this.mutationObserver=new MutationObserver((t=>{t.some((t=>"childList"===t.type||"attributes"===t.type&&t.target!==this))&&this.requestUpdate()})),this.mutationObserver.observe(this,{subtree:!0,childList:!0,attributes:!0})}disconnectedCallback(){this.mutationObserver.disconnect(),super.disconnectedCallback()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,i=this.height,n=Math.min(e,i),r=n-(0+0),a=n-(0+0),s=this.querySelectorAll("risky-outcome"),o=s.length?-s[0].p:0,l=function(){var t=ma,e=ya,i=null,n=Kr(0),r=Kr(sa),a=Kr(0);function s(s){var o,l,c,g,u,d=(s=Fa(s)).length,h=0,B=new Array(d),p=new Array(d),F=+n.apply(this,arguments),f=Math.min(sa,Math.max(-sa,r.apply(this,arguments)-F)),Q=Math.min(Math.abs(f)/d,a.apply(this,arguments)),I=Q*(f<0?-1:1);for(o=0;o<d;++o)(u=p[B[o]=o]=+t(s[o],o,s))>0&&(h+=u);for(null!=e?B.sort((function(t,i){return e(p[t],p[i])})):null!=i&&B.sort((function(t,e){return i(s[t],s[e])})),o=0,c=h?(f-d*I)/h:0;o<d;++o,F=g)l=B[o],g=F+((u=p[l])>0?u*c:0)+I,p[l]={data:s[l],index:o,value:u,startAngle:F,endAngle:g,padAngle:Q};return p}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:Kr(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,i=null,s):e},s.sort=function(t){return arguments.length?(i=t,e=null,s):i},s.startAngle=function(t){return arguments.length?(n="function"==typeof t?t:Kr(+t),s):n},s.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Kr(+t),s):r},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Kr(+t),s):a},s}().startAngle(o*Math.PI-Math.PI).endAngle(o*Math.PI+Math.PI).sortValues(null).value((t=>t.p))(s),c=l.filter((t=>!t.data.interactive)),g=l.filter((t=>t.data.interactive));function u(t){const e=(t+2*Math.PI)%(2*Math.PI);return e>Math.PI?e-2*Math.PI:e<-Math.PI?e+2*Math.PI:e}const d=ci().subject(((t,e)=>{const i=u((e.endAngle+e.startAngle)/2),n=u(Math.atan2(t.y,t.x)+Math.PI/2);return s.forEach((t=>{t.startP=t.p})),{arcAngle:i,startAngle:u(n-i)}})).on("start",((t,e)=>{if(!e.data.interactive)return;je(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{if(!e.data.interactive)return;const i=u(Math.atan2(t.y,t.x)+Math.PI/2),n=u(i-t.subject.arcAngle),r=u(t.subject.startAngle>0?n-t.subject.startAngle:t.subject.startAngle-n)/Math.PI,a=e.data.startP+r,o=a>.99?.99:a<.01?.01:a;s.forEach((t=>{t.p=t===e.data?o:t.startP/(1-e.data.startP)*(1-o)})),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0}))})).on("end",((t,e)=>{if(!e.data.interactive)return;je(t.currentTarget).classed("dragging",!1)})),h=je(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),B=h.enter().append("svg").classed("main",!0),p=B.merge(h).attr("viewBox",`0 0 ${n} ${n}`),F=B.append("g").classed("pie",!0),f=p.select(".pie").attr("transform",`translate(${a/2}, ${r/2})`);F.append("circle").classed("outline",!0),f.select(".outline").attr("r",Math.min(a,r)/2-1);const Q=f.selectAll(".arc").data(l),I=Q.enter().append("path").call(d).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown"].includes(t.key)){const i=e.data.p;let n=e.data.p;switch(t.key){case"ArrowUp":n-=t.shiftKey?.01:.05;break;case"ArrowDown":n+=t.shiftKey?.01:.05}const r=n>.99?.99:n<.01?.01:n;s.forEach((t=>{t.p=t===e.data?r:t.p/(1-i)*(1-r)})),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0})),t.preventDefault()}}));I.merge(Q).attr("tabindex",(t=>g.includes(t)&&l.length>1?0:null)).attr("class",(t=>`arc ${t.data.name}`)).classed("interactive",(t=>g.includes(t)&&l.length>1)).attr("d",pa().innerRadius(0).outerRadius(Math.min(a,r)/2-1)),Q.exit().remove();const U=f.selectAll(".label.static").data(c),b=f.selectAll(".label.interactive").data(g),y=U.enter().append("text"),m=b.enter().append("foreignObject");m.append("xhtml:decidables-spinner").on("input",((t,e)=>{e.data.x=parseFloat(t.target.value),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0}))})),y.merge(U).attr("class",(t=>`label static ${t.data.name}`)).attr("transform",(t=>{if(1===l.length)return"translate(0, 0)";const e=Math.min(a,r)/2*.6;return`translate(${pa().innerRadius(e).outerRadius(e).centroid(t)})`})).text((t=>`$${t.data.x.toFixed(0)}`));const x=m.merge(b).attr("class",(t=>`label interactive ${t.data.name}`)).attr("transform",(t=>{const e=parseFloat(this.getComputedStyleValue("--decidables-spinner-input-width")),i=parseFloat(this.getComputedStyleValue("--decidables-spinner-font-size")),n=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10),s=e*n/-2,o=i*n*1.5/-2;if(1===l.length)return`translate(${s}, ${o})`;const c=Math.min(a,r)/2*.6,g=pa().innerRadius(c).outerRadius(c);return`translate(${g.centroid(t)[0]+s}, ${g.centroid(t)[1]+o})`}));x.select("decidables-spinner").attr("value",(t=>`${t.data.x.toFixed(0)}`)),U.exit().remove(),b.exit().remove()}}customElements.define("risky-option",DK);class XK extends Ga{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},name:{attribute:"name",type:String,reflect:!0}}}constructor(){super(),this.x=0,this.p=0,this.name=""}static get styles(){return[o`
        :host {
          display: none;
        }
      `]}render(){return Y``}}customElements.define("risky-outcome",XK);class HK extends Ga{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.xl=0,this.xw=100,this.pw=.75,this.xs=50}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }

        .holder {
          user-select: none;
        }

        .holder > * {
          vertical-align: middle;
        }

        .query {
          margin: 0 0.5rem;

          font-family: var(--font-family-code);
          font-size: 1.75rem;
        }

        risky-option {
          width: 10rem;
          height: 10rem;
        }
      `]}sendEvent(){this.dispatchEvent(new CustomEvent("risky-choice-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs},bubbles:!0}))}winChange(t){this.xw=parseFloat(t.detail.x),this.pw=parseFloat(t.detail.p),this.sendEvent()}sureChange(t){this.xs=parseFloat(t.detail.x),this.sendEvent()}render(){return Y`
      <div class="holder">
        <risky-option class="gamble" ?interactive=${this.interactive} @risky-outcome-change=${this.winChange.bind(this)}>
          ${"choice"===this.state?Y`
              <risky-outcome probability="${1-this.pw}" value="${this.xl}" name="loss"></risky-outcome>
              <risky-outcome ?interactive=${this.interactive} probability="${this.pw}" value="${this.xw}" name="win"></risky-outcome>`:""}
        </risky-option><span class="query"
         >${"choice"===this.state?"?":"fixation"===this.state?"+":Y`∙`}</span
        ><risky-option class="sure" ?interactive=${this.interactive} @risky-outcome-change=${this.sureChange.bind(this)}>
          ${"choice"===this.state?Y`
              <risky-outcome ?interactive=${this.interactive} probability="1" value="${this.xs}" name="sure"></risky-outcome>`:""}
        </risky-option>
      </div>`}}customElements.define("risky-choice",HK);class WK extends Ga{static get properties(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.duration=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.states=["resetted","iti","stimulus","ended"],this.state="resetted",this.range={},this.range.xl={start:0,stop:0,step:1},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:.1,stop:.9,step:.1},this.range.xs={start:5,stop:15,step:1},this.range.xl.values=It(this.range.xl.start,this.range.xl.stop+.01,this.range.xl.step),this.range.xw.values=It(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step),this.range.pw.values=It(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step),this.range.xs.values=It(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step),this.firstUpdate=!0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.trial=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.runner=void 0}static get styles(){return[super.styles,o`
        :host {
          display: inline-block;
        }
      `]}render(){return Y`
      <div class="holder">
        <risky-choice state="${"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank"}" probability="${this.pw}" win="${this.xw}" loss="${this.xl}" sure="${this.xs}"></risky-choice>
      </div>`}update(t){super.update(t),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=mn()-this.pauseTime,this.pauseTime=0),this.runner=function(t,e,i){var n=new vn,r=e;return n._restart=n.restart,n.restart=function(t,e,i){e=+e,i=null==i?mn():+i,n._restart((function a(s){s+=r,n._restart(a,r+=e,i),t(s)}),e,i)},n.restart(t,e,i),n}(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=mn())),this.firstUpdate=!1}reset(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}run(){const t=mn(),e=this.baseTime?t-this.baseTime:0,i=this.baseTime?e-this.startTime:0;this.lastTime=e,"resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("risky-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&i>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=e,this.xl=this.range.xl.values[Math.floor(Math.random()*this.range.xl.values.length)],this.xw=this.range.xw.values[Math.floor(Math.random()*this.range.xw.values.length)],this.pw=this.range.pw.values[Math.floor(Math.random()*this.range.pw.values.length)],this.xs=this.range.xs.values[Math.floor(Math.random()*this.range.xs.values.length)],this.vDiff=this.xw*this.pw+this.xl*(1-this.pw)-this.xs,this.gamblePayoff=Math.random()<this.pw?this.xw:this.xl,this.surePayoff=this.xs,this.better=this.vDiff>0?"gamble":this.vDiff<0?"sure":"equal",this.dispatchEvent(new CustomEvent("risky-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0}))):"stimulus"===this.state&&i>=this.duration&&(this.dispatchEvent(new CustomEvent("risky-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("risky-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=e))}}customElements.define("risky-task",WK);class kK extends Es{static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.p=.75,this.g=.5,this.alignState()}alignState(){this.w=Vs.pg2w(this.p,this.g)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-pg2w-change",{detail:{p:this.p,g:this.g,w:this.w},bubbles:!0}))}pInput(t){this.p=parseFloat(t.target.value),this.alignState(),this.sendEvent()}gInput(t){this.g=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,e,i;this.numeric?(t=Y`<decidables-spinner class="p bottom" ?disabled=${!this.interactive} min="0" max="1" step="0.01" .value="${this.p}" @input=${this.pInput.bind(this)}>
          <var class="math-var">p</var>
        </decidables-spinner>`,e=Y`<decidables-spinner class="g bottom" ?disabled=${!this.interactive} min="0" max="1" step="0.01" .value="${this.g}" @input=${this.gInput.bind(this)}>
          <var class="math-var">γ</var>
        </decidables-spinner>`,i=Y`<decidables-spinner class="w bottom" disabled min="0" max="1" step=".01" .value="${+this.w.toFixed(2)}">
          <var class="math-var">w</var>
        </decidables-spinner>`):(t=Y`<var class="math-var p">p</var>`,e=Y`<var class="math-var g">γ</var>`,i=Y`<var class="math-var w">w</var>`);const n=Y`
      <tr>
        <td rowspan="2">
          ${i}<span class="equals">=</span>
        </td>
        <td class="underline">
          ${t}<sup class="exp">${e}</sup>
        </td>
      </tr>
      <tr>
        <td>
          <span class="bracket tight">[</span>${t}<sup class="exp">${e}</sup><span class="plus">+</span><span class="paren tight">(</span>1<span class="minus">−</span>${t}<span class="paren tight">)</span><sup class="exp">${e}</sup><span class="bracket tight">]</span><sup class="exp">1/${e}</sup>
        </td>
      </tr>`;return Y`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${n}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-pg2w",kK);class MK extends Es{static get properties(){return{v:{attribute:"value",converter:Aa,reflect:!0},w:{attribute:"weight",converter:Aa,reflect:!0},n:{attribute:"outcomes",type:Number,reflect:!0},u:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.v=[10,0],this.w=[.75,.25],this.n=2,this.nMax=4,this.vMax=new Array(this.nMax).fill(0),this.wMax=new Array(this.nMax).fill(0),this.alignState()}alignState(){this.v=this.v.length<this.n?this.v.concat(this.vMax.slice(this.v.length,this.n)):this.v.length>this.n?this.v.slice(0,this.n):this.v,this.w=this.w.length<this.n?this.w.concat(this.wMax.slice(this.w.length,this.n)):this.w.length>this.n?this.w.slice(0,this.n):this.w,this.v.forEach(((t,e)=>{this.vMax[e]=t})),this.w.forEach(((t,e)=>{this.wMax[e]=t})),this.u=this.v.reduce(((t,e,i)=>t+e*this.w[i]),0)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-vw2u-change",{detail:{v:this.v,w:this.w,n:this.n,u:this.u},bubbles:!0}))}vInput(t,e){this.v[t]=parseFloat(e.target.value),this.alignState(),this.sendEvent()}wInput(t,e){this.w[t]=parseFloat(e.target.value),this.alignState(),this.sendEvent()}nInput(t){this.n=parseFloat(t.target.value),this.alignState(),this.sendEvent()}vTemplate(t="",e="",i=!1){let n;if(i){const i=Number.parseInt(t,10)-1;n=Y`<decidables-spinner class="v" ?disabled=${!this.interactive} .value="${this.v[i]}" @input=${this.vInput.bind(this,i)}>
          <var class="math-var">v<sub class="subscript ${e}">${t}</sub></var>
        </decidables-spinner>`}else n=Y`<var class="math-var v">v<sub class="subscript ${e}">${t}</sub></var>`;return n}wTemplate(t="",e="",i=!1){let n;if(i){const i=Number.parseInt(t,10)-1;n=Y`<decidables-spinner class="w" ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${this.w[i]}" @input=${this.wInput.bind(this,i)}>
          <var class="math-var">w<sub class="subscript ${e}">${t}</sub></var>
        </decidables-spinner>`}else n=Y`<var class="math-var w">w<sub class="subscript ${e}">${t}</sub></var>`;return n}willUpdate(){this.alignState()}render(){let t,e;this.numeric?(t=Y`<decidables-spinner class="u" disabled .value="${+this.u.toFixed(3)}">
          <var class="math-var">U</var>
        </decidables-spinner>`,e=Y`<decidables-spinner class="n" ?disabled=${!this.interactive} min="1" max="4" step="1" .value="${this.n}" @input=${this.nInput.bind(this)}>
          <var class="math-var">n</var>
        </decidables-spinner>`):(t=Y`<var class="math-var u">U</var>`,e=Y`<var class="math-var subscript">n</var>`);const i=Y`
      <tr>
        <td>
          ${t}<span class="equals">=</span>
        </td>
        <td>
          <div class="summation">
            <span class="tight">${e}</span>
            <span class="tight"><var class="math-greek sigma">Σ</var></span>
            <span class="tight"><var class="math-var subscript tight">i</var><span class="equals subscript">=</span><span class="subscript tight">1</span></span>
          </div>
        </td>
        <td>
          ${this.vTemplate("i","math-var",!1)}&nbsp;${this.wTemplate("i","math-var",!1)}<span class="equals">=</span>
        </td>
        <td>
          ${this.numeric?Array(this.nMax).fill().map(((t,e)=>e<this.n?Y`<span class="addend tight" ${ws({in:xs,out:xs})}>${0!==e?Y`<span class="plus">+</span>`:Y``}${this.vTemplate(e+1,"math-num",!0)}&nbsp;${this.wTemplate(e+1,"math-num",!0)}</span>`:null)):Y`${this.vTemplate("1","math-num",!1)}&nbsp;${this.wTemplate("1","math-num",!1)}<span class="plus">+</span><span class="ellipsis">…</span><span class="plus">+</span>${this.vTemplate("n","math-var",!1)}&nbsp;${this.wTemplate("n","math-var",!1)}`}
        </td>
      </tr>`;return Y`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-vw2u",MK);class TK extends Es{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.x=10,this.a=.5,this.l=2,this.alignState()}alignState(){this.v=Vs.xal2v(this.x,this.a,this.l)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-xal2v-change",{detail:{x:this.x,a:this.a,l:this.l,v:this.v},bubbles:!0}))}xInput(t){this.x=parseFloat(t.target.value),this.alignState(),this.sendEvent()}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}lInput(t){this.l=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,e,i,n;this.numeric?(t=Y`<decidables-spinner class="x bottom" ?disabled=${!this.interactive} step="1" .value="${this.x}" @input=${this.xInput.bind(this)}>
          <var class="math-var">x</var>
        </decidables-spinner>`,e=Y`<decidables-spinner class="a bottom" ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${this.a}" @input=${this.aInput.bind(this)}>
          <var class="math-var">α</var>
        </decidables-spinner>`,i=Y`<decidables-spinner class="l bottom" ?disabled=${!this.interactive} min="0" step=".001" .value="${this.l}" @input=${this.lInput.bind(this)}>
          <var class="math-var">λ</var>
        </decidables-spinner>`,n=Y`<decidables-spinner class="v bottom" disabled step=".001" .value="${+this.v.toFixed(3)}">
          <var class="math-var">v</var>
        </decidables-spinner>`):(t=Y`<var class="math-var x">x</var>`,e=Y`<var class="math-var a">α</var>`,i=Y`<var class="math-var l">λ</var>`,n=Y`<var class="math-var v">v</var>`);const r=Y`
      <tr>
        <td rowspan="2">
          ${n}<span class="equals">=</span><span class="brace tight">{</span>
        </td>
        <td class="left">
          ${t}<sup class="exp">${e}</sup>,&emsp;if ${t}<span class="equals">&ge;</span>0
        </td>
      </tr>
      <tr>
        <td class="left">
          <span class="minus tight">−</span>${i}<span class="paren tight">(</span><span class="minus tight">−</span>${t}<span class="paren tight">)</span><sup class="exp">${e}</sup>,&emsp;if ${t}<span class="equals">&lt;</span>0
        </td>
      </tr>`;return Y`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${r}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-xal2v",TK);class YK extends Ga{static get styles(){return[super.styles,o`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `]}render(){return Y`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("cpt-example",YK);class JK extends YK{connectedCallback(){super.connectedCallback(),this.cptFit=this.querySelector("cpt-fit"),this.prospectableControl=this.querySelector("prospectable-control"),this.riskyTask=this.querySelector("risky-task"),this.prospectableResponse=this.querySelector("prospectable-response"),this.decisionSpace=this.querySelector("decision-space"),this.cptProbability=this.querySelector("cpt-probability"),this.cptValue=this.querySelector("cpt-value"),this.cptFit&&this.cptFit.addEventListener("cpt-fit-update",(t=>{this.cptProbability&&(this.cptProbability.g=t.detail.g),this.cptValue&&(this.cptValue.a=t.detail.a,this.cptValue.l=t.detail.l),this.decisionSpace&&(this.decisionSpace.a=t.detail.a,this.decisionSpace.l=t.detail.l,this.decisionSpace.g=t.detail.g)})),this.prospectableControl&&(this.prospectableControl.hasAttribute("trials")&&this.prospectableControl.addEventListener("prospectable-control-trials",(t=>{this.riskyTask&&(this.riskyTask.trials=t.detail.trials),this.prospectableResponse&&(this.prospectableResponse.trialTotal=t.detail.trials)})),this.prospectableControl.hasAttribute("duration")&&this.prospectableControl.addEventListener("prospectable-control-duration",(t=>{this.riskyTask&&(this.riskyTask.duration=t.detail.duration,this.riskyTask.iti=t.detail.duration)})),this.prospectableControl.hasAttribute("run")&&this.prospectableControl.addEventListener("prospectable-control-run",(()=>{this.riskyTask&&(this.riskyTask.running=!0)})),this.prospectableControl.hasAttribute("pause")&&this.prospectableControl.addEventListener("prospectable-control-pause",(()=>{this.riskyTask&&(this.riskyTask.running=!1)})),this.prospectableControl.hasAttribute("reset")&&this.prospectableControl.addEventListener("prospectable-control-reset",(()=>{this.riskyTask&&this.riskyTask.reset(),this.prospectableResponse&&this.prospectableResponse.reset(),this.decisionSpace&&this.decisionSpace.clear(),this.cptFit&&this.cptFit.clear()}))),this.riskyTask&&(this.prospectableResponse&&(this.prospectableResponse.trialTotal=this.riskyTask.trials),this.riskyTask.addEventListener("risky-trial-start",(t=>{this.prospectableResponse&&this.prospectableResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial)})),this.riskyTask.addEventListener("risky-trial-end",(()=>{this.prospectableResponse&&this.prospectableResponse.stop()})),this.riskyTask.addEventListener("risky-block-end",(()=>{this.prospectableControl&&this.prospectableControl.complete()}))),this.prospectableResponse&&this.prospectableResponse.addEventListener("prospectable-response",(t=>{this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString()),this.cptFit&&this.cptFit.set(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))}}customElements.define("cpt-example-human",JK);class _K extends YK{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptProbability=null,this.cptSpace=null,this.cptValue=null,this.riskyChoice=null,this.decisionSpace=null}connectedCallback(){super.connectedCallback(),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.riskyChoice=this.querySelector("risky-choice"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation&&this.cptCalculation.addEventListener("cpt-calculation-change",(t=>{this.a=t.detail.a,this.l=t.detail.l,this.g=t.detail.g,this.xl=t.detail.xl,this.xw=t.detail.xw,this.pw=t.detail.pw,this.xs=t.detail.xs})),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(t=>{this.g=t.detail.g,this.pw=t.detail.p})),this.cptProbability.set(this.pw,this.g,"default","")),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(t=>{this.a=t.detail.a,this.l=t.detail.l,"default"===t.detail.name?this.xs=t.detail.x:"gamble"===t.detail.name&&(this.xw=t.detail.x)})),this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.riskyChoice&&this.riskyChoice.addEventListener("risky-choice-change",(t=>{this.xl=t.detail.xl,this.xw=t.detail.xw,this.pw=t.detail.pw,this.xs=t.detail.xs})),this.requestUpdate()}update(t){super.update(t),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g,this.cptCalculation.xl=this.xl,this.cptCalculation.xw=this.xw,this.cptCalculation.pw=this.pw,this.cptCalculation.xs=this.xs),this.cptProbability&&this.cptProbability.set(this.pw,this.g,"default",""),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g,this.cptSpace.xl=this.xl,this.cptSpace.xw=this.xw,this.cptSpace.pw=this.pw,this.cptSpace.xs=this.xs),this.cptValue&&(this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.riskyChoice&&(this.riskyChoice.xl=this.xl,this.riskyChoice.xw=this.xw,this.riskyChoice.pw=this.pw,this.riskyChoice.xs=this.xs),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g,this.decisionSpace.xl=this.xl,this.decisionSpace.xw=this.xw,this.decisionSpace.pw=this.pw,this.decisionSpace.xs=this.xs)}}customElements.define("cpt-example-interactive",_K);class zK extends YK{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.a=.8,this.l=1.2,this.g=.8,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptProbability=null,this.cptValue=null,this.prospectableControl=null,this.prospectableResponse=null,this.decisionSpace=null,this.riskyTask=null}connectedCallback(){super.connectedCallback(),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptValue=this.querySelector("cpt-value"),this.prospectableControl=this.querySelector("prospectable-control"),this.prospectableResponse=this.querySelector("prospectable-response"),this.decisionSpace=this.querySelector("decision-space"),this.riskyTask=this.querySelector("risky-task"),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(t=>{this.g=t.detail.g})),this.cptProbability.addEventListener("prospectable-response",(t=>{this.prospectableResponse&&this.prospectableResponse.responded(t.detail.response),this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(t=>{this.a=t.detail.a,this.l=t.detail.l})),this.cptProbability||this.cptValue.addEventListener("prospectable-response",(t=>{this.prospectableResponse&&this.prospectableResponse.responded(t.detail.response),this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))),this.prospectableControl&&(this.prospectableControl.hasAttribute("trials")&&this.prospectableControl.addEventListener("prospectable-control-trials",(t=>{this.riskyTask&&(this.riskyTask.trials=t.detail.trials),this.prospectableResponse&&(this.prospectableResponse.trialTotal=t.detail.trials)})),this.prospectableControl.hasAttribute("duration")&&this.prospectableControl.addEventListener("prospectable-control-duration",(t=>{this.riskyTask&&(this.riskyTask.duration=t.detail.duration,this.riskyTask.iti=t.detail.duration)})),this.prospectableControl.hasAttribute("run")&&this.prospectableControl.addEventListener("prospectable-control-run",(()=>{this.cptProbability&&this.cptProbability.resumeTrial(),this.cptValue&&this.cptValue.resumeTrial(),this.riskyTask&&(this.riskyTask.running=!0)})),this.prospectableControl.hasAttribute("pause")&&this.prospectableControl.addEventListener("prospectable-control-pause",(()=>{this.cptProbability&&this.cptProbability.pauseTrial(),this.cptValue&&this.cptValue.pauseTrial(),this.riskyTask&&(this.riskyTask.running=!1)})),this.prospectableControl.hasAttribute("reset")&&this.prospectableControl.addEventListener("prospectable-control-reset",(()=>{this.cptProbability&&this.cptProbability.clear(),this.cptValue&&this.cptValue.clear(),this.riskyTask&&this.riskyTask.reset(),this.prospectableResponse&&this.prospectableResponse.reset(),this.decisionSpace&&this.decisionSpace.clear()}))),this.riskyTask&&(this.prospectableResponse&&(this.prospectableResponse.trialTotal=this.riskyTask.trials),this.riskyTask.addEventListener("risky-trial-start",(t=>{this.prospectableResponse&&this.prospectableResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial),this.vw=Vs.xal2v(this.xw,this.a,this.l),this.vl=Vs.xal2v(this.xl,this.a,this.l),this.ww=Vs.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=Vs.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs;const e=Vs.xal2v(t.detail.xw,this.a,this.l)*Vs.pg2w(t.detail.pw,this.g)+Vs.xal2v(t.detail.xl,this.a,this.l)*(1-Vs.pg2w(t.detail.pw,this.g))>Vs.xal2v(t.detail.xs,this.a,this.l)?"gamble":"sure";this.cptProbability&&this.cptProbability.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,e),this.cptValue&&this.cptValue.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,e)})),this.riskyTask.addEventListener("risky-trial-end",(()=>{this.prospectableResponse&&this.prospectableResponse.stop()})),this.riskyTask.addEventListener("risky-block-end",(()=>{this.prospectableControl&&this.prospectableControl.complete()}))),this.requestUpdate()}update(t){super.update(t),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g),this.cptProbability&&(this.cptProbability.g=this.g),this.cptValue&&(this.cptValue.a=this.a,this.cptValue.l=this.l),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g)}}customElements.define("cpt-example-model",zK);export{Zs as CPTCalculation,kK as CPTEquationPG2W,MK as CPTEquationVW2U,TK as CPTEquationXAL2V,JK as CPTExampleHuman,_K as CPTExampleInteractive,zK as CPTExampleModel,TJ as CPTFit,YJ as CPTProbability,wK as CPTSpace,VK as CPTValue,EK as DecisionSpace,ZK as ProspectableControl,Ga as ProspectableElement,NK as ProspectableResponse,HK as RiskyChoice,DK as RiskyOption,XK as RiskyOutcome,WK as RiskyTask};
//# sourceMappingURL=prospectableElements.esm.min.js.map
