function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,n){return f=h()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&g(r,n.prototype),r},f.apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return f(e,arguments,d(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),g(i,e)},p(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function b(e){var t=h();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return v(this,n)}}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=y(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},I.apply(this,arguments)}function C(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Q(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=A(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var U,w,G=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,R=Symbol(),L=new Map,S=function(){function e(t,n){if(o(this,e),this._$cssResult$=!0,n!==R)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}return l(e,[{key:"styleSheet",get:function(){var e=L.get(this.cssText);return G&&void 0===e&&(L.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}},{key:"toString",value:function(){return this.cssText}}]),e}(),V=function(e){return new S("string"==typeof e?e:e+"",R)},Z=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=1===e.length?e[0]:n.reduce((function(t,n,i){return t+function(e){if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")}(n)+e[i+1]}),e[0]);return new S(r,R)},k=G?function(e){return e}:function(e){return e instanceof CSSStyleSheet?function(e){var t,n="",i=Q(e.cssRules);try{for(i.s();!(t=i.n()).done;){n+=t.value.cssText}}catch(e){i.e(e)}finally{i.f()}return V(n)}(e):e},E=window.trustedTypes,X=E?E.emptyScript:"",N=window.reactiveElementPolyfillSupport,W={toAttribute:function(e,t){switch(t){case Boolean:e=e?X:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){var n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},_=function(e,t){return t!==e&&(t==t||e==e)},T={attribute:!0,type:String,converter:W,reflect:!1,hasChanged:_},M=function(e){u(r,p(HTMLElement));var t,n=b(r);function r(){var e;return o(this,r),(e=n.call(this))._$Et=new Map,e.isUpdatePending=!1,e.hasUpdated=!1,e._$Ei=null,e.o(),e}return l(r,[{key:"o",value:function(){var e,t=this;this._$Ep=new Promise((function(e){return t.enableUpdating=e})),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach((function(e){return e(t)}))}},{key:"addController",value:function(e){var t,n;(null!==(t=this._$Eg)&&void 0!==t?t:this._$Eg=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}},{key:"removeController",value:function(e){var t;null===(t=this._$Eg)||void 0===t||t.splice(this._$Eg.indexOf(e)>>>0,1)}},{key:"_$Em",value:function(){var e=this;this.constructor.elementProperties.forEach((function(t,n){e.hasOwnProperty(n)&&(e._$Et.set(n,e[n]),delete e[n])}))}},{key:"createRenderRoot",value:function(){var e,t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return function(e,t){G?e.adoptedStyleSheets=t.map((function(e){return e instanceof CSSStyleSheet?e:e.styleSheet})):t.forEach((function(t){var n=document.createElement("style"),i=window.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=t.cssText,e.appendChild(n)}))}(t,this.constructor.elementStyles),t}},{key:"connectedCallback",value:function(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$Eg)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}},{key:"enableUpdating",value:function(e){}},{key:"disconnectedCallback",value:function(){var e;null===(e=this._$Eg)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}},{key:"attributeChangedCallback",value:function(e,t,n){this._$AK(e,n)}},{key:"_$ES",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T,a=this.constructor._$Eh(e,r);if(void 0!==a&&!0===r.reflect){var o=(null!==(i=null===(n=r.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==i?i:W.toAttribute)(t,r.type);this._$Ei=e,null==o?this.removeAttribute(a):this.setAttribute(a,o),this._$Ei=null}}},{key:"_$AK",value:function(e,t){var n,i,r,a=this.constructor,o=a._$Eu.get(e);if(void 0!==o&&this._$Ei!==o){var s=a.getPropertyOptions(o),l=s.converter,c=null!==(r=null!==(i=null===(n=l)||void 0===n?void 0:n.fromAttribute)&&void 0!==i?i:"function"==typeof l?l:null)&&void 0!==r?r:W.fromAttribute;this._$Ei=o,this[o]=c(t,s.type),this._$Ei=null}}},{key:"requestUpdate",value:function(e,t,n){var i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||_)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$Ei!==e&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$Ep=this._$EC())}},{key:"_$EC",value:(t=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isUpdatePending=!0,e.prev=1,e.next=4,this._$Ep;case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Promise.reject(e.t0);case 9:if(t=this.scheduleUpdate(),e.t1=null!=t,!e.t1){e.next=14;break}return e.next=14,t;case 14:return e.abrupt("return",!this.isUpdatePending);case 15:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return t.apply(this,arguments)})},{key:"scheduleUpdate",value:function(){return this.performUpdate()}},{key:"performUpdate",value:function(){var e,t=this;if(this.isUpdatePending){this.hasUpdated,this._$Et&&(this._$Et.forEach((function(e,n){return t[n]=e})),this._$Et=void 0);var n=!1,i=this._$AL;try{(n=this.shouldUpdate(i))?(this.willUpdate(i),null===(e=this._$Eg)||void 0===e||e.forEach((function(e){var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$EU()}catch(e){throw n=!1,this._$EU(),e}n&&this._$AE(i)}}},{key:"willUpdate",value:function(e){}},{key:"_$AE",value:function(e){var t;null===(t=this._$Eg)||void 0===t||t.forEach((function(e){var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}},{key:"_$EU",value:function(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._$Ep}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;void 0!==this._$E_&&(this._$E_.forEach((function(e,n){return t._$ES(n,t[n],e)})),this._$E_=void 0),this._$EU()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"addInitializer",value:function(e){var t;null!==(t=this.l)&&void 0!==t||(this.l=[]),this.l.push(e)}},{key:"observedAttributes",get:function(){var e=this;this.finalize();var t=[];return this.elementProperties.forEach((function(n,i){var r=e._$Eh(i,n);void 0!==r&&(e._$Eu.set(r,i),t.push(r))})),t}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){var n="symbol"==i(e)?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}},{key:"getPropertyDescriptor",value:function(e,t,n){return{get:function(){return this[t]},set:function(i){var r=this[e];this[t]=i,this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){return this.elementProperties.get(e)||T}},{key:"finalize",value:function(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;var e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){var t,n=this.properties,i=Q([].concat(B(Object.getOwnPropertyNames(n)),B(Object.getOwnPropertySymbols(n))));try{for(i.s();!(t=i.n()).done;){var r=t.value;this.createProperty(r,n[r])}}catch(e){i.e(e)}finally{i.f()}}return this.elementStyles=this.finalizeStyles(this.styles),!0}},{key:"finalizeStyles",value:function(e){var t=[];if(Array.isArray(e)){var n,i=Q(new Set(e.flat(1/0).reverse()));try{for(i.s();!(n=i.n()).done;){var r=n.value;t.unshift(k(r))}}catch(e){i.e(e)}finally{i.f()}}else void 0!==e&&t.push(k(e));return t}},{key:"_$Eh",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}}]),r}();M.finalized=!0,M.elementProperties=new Map,M.elementStyles=[],M.shadowRootOptions={mode:"open"},null==N||N({ReactiveElement:M}),(null!==(U=globalThis.reactiveElementVersions)&&void 0!==U?U:globalThis.reactiveElementVersions=[]).push("1.1.2");var H=globalThis.trustedTypes,Y=H?H.createPolicy("lit-html",{createHTML:function(e){return e}}):void 0,D="lit$".concat((Math.random()+"").slice(9),"$"),z="?"+D,O="<".concat(z,">"),J=document,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return J.createComment(e)},P=function(e){return null===e||"object"!=i(e)&&"function"!=typeof e},K=Array.isArray,q=function(e){var t;return K(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},$=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ee=/-->/g,te=/>/g,ne=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,ie=/'/g,re=/"/g,ae=/^(?:script|style|textarea)$/i,oe=function(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return{_$litType$:e,strings:t,values:i}}},se=oe(1),le=oe(2),ce=Symbol.for("lit-noChange"),ue=Symbol.for("lit-nothing"),de=new WeakMap,ge=J.createTreeWalker(J,129,null,!1),he=function(e,t){for(var n,i=e.length-1,r=[],a=2===t?"<svg>":"",o=$,s=0;s<i;s++){for(var l=e[s],c=void 0,u=void 0,d=-1,g=0;g<l.length&&(o.lastIndex=g,null!==(u=o.exec(l)));)g=o.lastIndex,o===$?"!--"===u[1]?o=ee:void 0!==u[1]?o=te:void 0!==u[2]?(ae.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=ne):void 0!==u[3]&&(o=ne):o===ne?">"===u[0]?(o=null!=n?n:$,d=-1):void 0===u[1]?d=-2:(d=o.lastIndex-u[2].length,c=u[1],o=void 0===u[3]?ne:'"'===u[3]?re:ie):o===re||o===ie?o=ne:o===ee||o===te?o=$:(o=ne,n=void 0);var h=o===ne&&e[s+1].startsWith("/>")?" ":"";a+=o===$?l+O:d>=0?(r.push(c),l.slice(0,d)+"$lit$"+l.slice(d)+D+h):l+D+(-2===d?(r.push(void 0),s):h)}var f=a+(e[i]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==Y?Y.createHTML(f):f,r]},fe=function(){function e(t,n){var i,r=t.strings,a=t._$litType$;o(this,e),this.parts=[];var s=0,l=0,c=r.length-1,u=this.parts,d=x(he(r,a),2),g=d[0],h=d[1];if(this.el=e.createElement(g,n),ge.currentNode=this.el.content,2===a){var f=this.el.content,p=f.firstChild;p.remove(),f.append.apply(f,B(p.childNodes))}for(;null!==(i=ge.nextNode())&&u.length<c;){if(1===i.nodeType){if(i.hasAttributes()){var m,v=[],b=Q(i.getAttributeNames());try{for(b.s();!(m=b.n()).done;){var y=m.value;if(y.endsWith("$lit$")||y.startsWith(D)){var I=h[l++];if(v.push(y),void 0!==I){var C=i.getAttribute(I.toLowerCase()+"$lit$").split(D),A=/([.?@])?(.*)/.exec(I);u.push({type:1,index:s,name:A[2],strings:C,ctor:"."===A[1]?Ce:"?"===A[1]?Be:"@"===A[1]?Ae:Ie})}else u.push({type:6,index:s})}}}catch(e){b.e(e)}finally{b.f()}for(var F=0,U=v;F<U.length;F++){var w=U[F];i.removeAttribute(w)}}if(ae.test(i.tagName)){var G=i.textContent.split(D),R=G.length-1;if(R>0){i.textContent=H?H.emptyScript:"";for(var L=0;L<R;L++)i.append(G[L],j()),ge.nextNode(),u.push({type:2,index:++s});i.append(G[R],j())}}}else if(8===i.nodeType)if(i.data===z)u.push({type:2,index:s});else for(var S=-1;-1!==(S=i.data.indexOf(D,S+1));)u.push({type:7,index:s}),S+=D.length-1;s++}}return l(e,null,[{key:"createElement",value:function(e,t){var n=J.createElement("template");return n.innerHTML=e,n}}]),e}();function pe(e,t){var n,i,r,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3?arguments[3]:void 0;if(t===ce)return t;var l=void 0!==s?null===(n=o._$Cl)||void 0===n?void 0:n[s]:o._$Cu,c=P(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(i=null==l?void 0:l._$AO)||void 0===i||i.call(l,!1),void 0===c?l=void 0:(l=new c(e))._$AT(e,o,s),void 0!==s?(null!==(r=(a=o)._$Cl)&&void 0!==r?r:a._$Cl=[])[s]=l:o._$Cu=l),void 0!==l&&(t=pe(e,l._$AS(e,t.values),l,s)),t}var me,ve,be=function(){function e(t,n){o(this,e),this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}return l(e,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"p",value:function(e){var t,n=this._$AD,i=n.el.content,r=n.parts,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:J).importNode(i,!0);ge.currentNode=a;for(var o=ge.nextNode(),s=0,l=0,c=r[0];void 0!==c;){if(s===c.index){var u=void 0;2===c.type?u=new ye(o,o.nextSibling,this,e):1===c.type?u=new c.ctor(o,c.name,c.strings,this,e):6===c.type&&(u=new Fe(o,this,e)),this.v.push(u),c=r[++l]}s!==(null==c?void 0:c.index)&&(o=ge.nextNode(),s++)}return a}},{key:"m",value:function(e){var t,n=0,i=Q(this.v);try{for(i.s();!(t=i.n()).done;){var r=t.value;void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}catch(e){i.e(e)}finally{i.f()}}}]),e}(),ye=function(){function e(t,n,i,r){var a;o(this,e),this.type=2,this._$AH=ue,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=i,this.options=r,this._$Cg=null===(a=null==r?void 0:r.isConnected)||void 0===a||a}return l(e,[{key:"_$AU",get:function(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cg}},{key:"parentNode",get:function(){var e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;e=pe(this,e,t),P(e)?e===ue||null==e||""===e?(this._$AH!==ue&&this._$AR(),this._$AH=ue):e!==this._$AH&&e!==ce&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.S(e):q(e)?this.A(e):this.$(e)}},{key:"M",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._$AB;return this._$AA.parentNode.insertBefore(e,t)}},{key:"S",value:function(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}},{key:"$",value:function(e){this._$AH!==ue&&P(this._$AH)?this._$AA.nextSibling.data=e:this.S(J.createTextNode(e)),this._$AH=e}},{key:"T",value:function(e){var t,n=e.values,i=e._$litType$,r="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=fe.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.m(n);else{var a=new be(r,this),o=a.p(this.options);a.m(n),this.S(o),this._$AH=a}}},{key:"_$AC",value:function(e){var t=de.get(e.strings);return void 0===t&&de.set(e.strings,t=new fe(e)),t}},{key:"A",value:function(t){K(this._$AH)||(this._$AH=[],this._$AR());var n,i,r=this._$AH,a=0,o=Q(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;a===r.length?r.push(n=new e(this.M(j()),this.M(j()),this,this.options)):n=r[a],n._$AI(s),a++}}catch(e){o.e(e)}finally{o.f()}a<r.length&&(this._$AR(n&&n._$AB.nextSibling,a),r.length=a)}},{key:"_$AR",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,n=arguments.length>1?arguments[1]:void 0;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,n);t&&t!==this._$AB;){var i=t.nextSibling;t.remove(),t=i}}},{key:"setConnected",value:function(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}]),e}(),Ie=function(){function e(t,n,i,r,a){o(this,e),this.type=1,this._$AH=ue,this._$AN=void 0,this.element=t,this.name=n,this._$AM=r,this.options=a,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ue}return l(e,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=this.strings,a=!1;if(void 0===r)e=pe(this,e,t,0),(a=!P(e)||e!==this._$AH&&e!==ce)&&(this._$AH=e);else{var o,s,l=e;for(e=r[0],o=0;o<r.length-1;o++)(s=pe(this,l[n+o],t,o))===ce&&(s=this._$AH[o]),a||(a=!P(s)||s!==this._$AH[o]),s===ue?e=ue:e!==ue&&(e+=(null!=s?s:"")+r[o+1]),this._$AH[o]=s}a&&!i&&this.k(e)}},{key:"k",value:function(e){e===ue?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}]),e}(),Ce=function(e){u(n,Ie);var t=b(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).type=3,e}return l(n,[{key:"k",value:function(e){this.element[this.name]=e===ue?void 0:e}}]),n}(),xe=H?H.emptyScript:"",Be=function(e){u(n,Ie);var t=b(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).type=4,e}return l(n,[{key:"k",value:function(e){e&&e!==ue?this.element.setAttribute(this.name,xe):this.element.removeAttribute(this.name)}}]),n}(),Ae=function(e){u(n,Ie);var t=b(n);function n(e,i,r,a,s){var l;return o(this,n),(l=t.call(this,e,i,r,a,s)).type=5,l}return l(n,[{key:"_$AI",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if((e=null!==(t=pe(this,e,n,0))&&void 0!==t?t:ue)!==ce){var i=this._$AH,r=e===ue&&i!==ue||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==ue&&(i===ue||r);r&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}}},{key:"handleEvent",value:function(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}]),n}(),Fe=function(){function e(t,n,i){o(this,e),this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}return l(e,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){pe(this,e)}}]),e}(),Qe=window.litHtmlPolyfillSupport;null==Qe||Qe(fe,ye),(null!==(w=globalThis.litHtmlVersions)&&void 0!==w?w:globalThis.litHtmlVersions=[]).push("2.1.1");var Ue=function(e){u(n,M);var t=b(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).renderOptions={host:m(e)},e._$Dt=void 0,e}return l(n,[{key:"createRenderRoot",value:function(){var e,t,i=I(d(n.prototype),"createRenderRoot",this).call(this);return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}},{key:"update",value:function(e){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),I(d(n.prototype),"update",this).call(this,e),this._$Dt=function(e,t,n){var i,r,a=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t,o=a._$litPart$;if(void 0===o){var s=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null;a._$litPart$=o=new ye(t.insertBefore(j(),s),s,void 0,null!=n?n:{})}return o._$AI(e),o}(t,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function(){var e;I(d(n.prototype),"connectedCallback",this).call(this),null===(e=this._$Dt)||void 0===e||e.setConnected(!0)}},{key:"disconnectedCallback",value:function(){var e;I(d(n.prototype),"disconnectedCallback",this).call(this),null===(e=this._$Dt)||void 0===e||e.setConnected(!1)}},{key:"render",value:function(){return ce}}]),n}();Ue.finalized=!0,Ue._$litElement$=!0,null===(me=globalThis.litElementHydrateSupport)||void 0===me||me.call(globalThis,{LitElement:Ue});var we=globalThis.litElementPolyfillSupport;function Ge(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Re(e){var t=e,n=e,i=e;function r(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(r<a){if(0!==n(t,t))return a;do{var o=r+a>>>1;i(e[o],t)<0?r=o+1:a=o}while(r<a)}return r}return 2!==e.length&&(t=function(t,n){return e(t)-n},n=Ge,i=function(t,n){return Ge(e(t),n)}),{left:r,center:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=r(e,n,i,a-1);return o>i&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(r<a){if(0!==n(t,t))return a;do{var o=r+a>>>1;i(e[o],t)<=0?r=o+1:a=o}while(r<a)}return r}}}null==we||we({LitElement:Ue}),(null!==(ve=globalThis.litElementVersions)&&void 0!==ve?ve:globalThis.litElementVersions=[]).push("3.1.1");var Le=Re(Ge).right;Re((function(e){return null===e?NaN:+e})).center;var Se=Le,Ve=Math.sqrt(50),Ze=Math.sqrt(10),ke=Math.sqrt(2);function Ee(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=Ve?10:a>=Ze?5:a>=ke?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=Ve?10:a>=Ze?5:a>=ke?2:1)}function Xe(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(r);++i<r;)a[i]=e+i*n;return a}function Ne(e){return e}function We(e){return"translate("+e+",0)"}function _e(e){return"translate(0,"+e+")"}function Te(e){return function(t){return+e(t)}}function Me(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function He(){return!this.__axis}function Ye(e,t){var n=[],i=null,r=null,a=6,o=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===e||4===e?-1:1,u=4===e||2===e?"x":"y",d=1===e||3===e?We:_e;function g(g){var h=null==i?t.ticks?t.ticks.apply(t,n):t.domain():i,f=null==r?t.tickFormat?t.tickFormat.apply(t,n):Ne:r,p=Math.max(a,0)+s,m=t.range(),v=+m[0]+l,b=+m[m.length-1]+l,y=(t.bandwidth?Me:Te)(t.copy(),l),I=g.selection?g.selection():g,C=I.selectAll(".domain").data([null]),x=I.selectAll(".tick").data(h,t).order(),B=x.exit(),A=x.enter().append("g").attr("class","tick"),F=x.select("line"),Q=x.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(A),F=F.merge(A.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),Q=Q.merge(A.append("text").attr("fill","currentColor").attr(u,c*p).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),g!==I&&(C=C.transition(g),x=x.transition(g),F=F.transition(g),Q=Q.transition(g),B=B.transition(g).attr("opacity",1e-6).attr("transform",(function(e){return isFinite(e=y(e))?d(e+l):this.getAttribute("transform")})),A.attr("opacity",1e-6).attr("transform",(function(e){var t=this.parentNode.__axis;return d((t&&isFinite(t=t(e))?t:y(e))+l)}))),B.remove(),C.attr("d",4===e||2===e?o?"M"+c*o+","+v+"H"+l+"V"+b+"H"+c*o:"M"+l+","+v+"V"+b:o?"M"+v+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+v+","+l+"H"+b),x.attr("opacity",1).attr("transform",(function(e){return d(y(e)+l)})),F.attr(u+"2",c*a),Q.attr(u,c*p).text(f),I.filter(He).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),I.each((function(){this.__axis=y}))}return g.scale=function(e){return arguments.length?(t=e,g):t},g.ticks=function(){return n=Array.from(arguments),g},g.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),g):n.slice()},g.tickValues=function(e){return arguments.length?(i=null==e?null:Array.from(e),g):i&&i.slice()},g.tickFormat=function(e){return arguments.length?(r=e,g):r},g.tickSize=function(e){return arguments.length?(a=o=+e,g):a},g.tickSizeInner=function(e){return arguments.length?(a=+e,g):a},g.tickSizeOuter=function(e){return arguments.length?(o=+e,g):o},g.tickPadding=function(e){return arguments.length?(s=+e,g):s},g.offset=function(e){return arguments.length?(l=+e,g):l},g}function De(e){return Ye(3,e)}function ze(e){return Ye(4,e)}var Oe={value:function(){}};function Je(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new je(i)}function je(e){this._=e}function Pe(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Ke(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function qe(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Oe,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}je.prototype=Je.prototype={constructor:je,on:function(e,t){var n,i=this._,r=Pe(e+"",i),a=-1,o=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=r[a]).type)i[n]=qe(i[n],e.name,t);else if(null==t)for(n in i)i[n]=qe(i[n],e.name,null);return this}for(;++a<o;)if((n=(e=r[a]).type)&&(n=Ke(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new je(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(i=this._[e]).length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};var $e="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:$e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tt(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),et.hasOwnProperty(t)?{space:et[t],local:e}:e}function nt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$e&&t.documentElement.namespaceURI===$e?t.createElement(e):t.createElementNS(n,e)}}function it(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rt(e){var t=tt(e);return(t.local?it:nt)(t)}function at(){}function ot(e){return null==e?at:function(){return this.querySelector(e)}}function st(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function lt(){return[]}function ct(e){return null==e?lt:function(){return this.querySelectorAll(e)}}function ut(e){return function(){return this.matches(e)}}function dt(e){return function(t){return t.matches(e)}}var gt=Array.prototype.find;function ht(){return this.firstElementChild}var ft=Array.prototype.filter;function pt(){return Array.from(this.children)}function mt(e){return new Array(e.length)}function vt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function bt(e){return function(){return e}}function yt(e,t,n,i,r,a){for(var o,s=0,l=t.length,c=a.length;s<c;++s)(o=t[s])?(o.__data__=a[s],i[s]=o):n[s]=new vt(e,a[s]);for(;s<l;++s)(o=t[s])&&(r[s]=o)}function It(e,t,n,i,r,a,o){var s,l,c,u=new Map,d=t.length,g=a.length,h=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(h[s]=c=o.call(l,l.__data__,s,t)+"",u.has(c)?r[s]=l:u.set(c,l));for(s=0;s<g;++s)c=o.call(e,a[s],s,a)+"",(l=u.get(c))?(i[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new vt(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(h[s])===l&&(r[s]=l)}function Ct(e){return e.__data__}function xt(e){return"object"===i(e)&&"length"in e?e:Array.from(e)}function Bt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function At(e){return function(){this.removeAttribute(e)}}function Ft(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qt(e,t){return function(){this.setAttribute(e,t)}}function Ut(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wt(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Gt(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lt(e){return function(){this.style.removeProperty(e)}}function St(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Vt(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Zt(e,t){return e.style.getPropertyValue(t)||Rt(e).getComputedStyle(e,null).getPropertyValue(t)}function kt(e){return function(){delete this[e]}}function Et(e,t){return function(){this[e]=t}}function Xt(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Nt(e){return e.trim().split(/^|\s+/)}function Wt(e){return e.classList||new _t(e)}function _t(e){this._node=e,this._names=Nt(e.getAttribute("class")||"")}function Tt(e,t){for(var n=Wt(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Mt(e,t){for(var n=Wt(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Ht(e){return function(){Tt(this,e)}}function Yt(e){return function(){Mt(this,e)}}function Dt(e,t){return function(){(t.apply(this,arguments)?Tt:Mt)(this,e)}}function zt(){this.textContent=""}function Ot(e){return function(){this.textContent=e}}function Jt(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function jt(){this.innerHTML=""}function Pt(e){return function(){this.innerHTML=e}}function Kt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function qt(){this.nextSibling&&this.parentNode.appendChild(this)}function $t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function en(){return null}function tn(){var e=this.parentNode;e&&e.removeChild(this)}function nn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function an(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function on(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,a=t.length;i<a;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function sn(e,t,n){return function(){var i,r=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),void(i.value=t);this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function ln(e,t,n){var i=Rt(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function cn(e,t){return function(){return ln(this,e,t)}}function un(e,t){return function(){return ln(this,e,t.apply(this,arguments))}}vt.prototype={constructor:vt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},_t.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var dn=regeneratorRuntime.mark(gn);function gn(){var e,t,n,i,r,a,o;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){s.next=13;break}i=e[t],r=0,a=i.length;case 3:if(!(r<a)){s.next=10;break}if(!(o=i[r])){s.next=7;break}return s.next=7,o;case 7:++r,s.next=3;break;case 10:++t,s.next=1;break;case 13:case"end":return s.stop()}}),dn,this)}var hn=[null];function fn(e,t){this._groups=e,this._parents=t}function pn(){return new fn([[document.documentElement]],hn)}function mn(e){return"string"==typeof e?new fn([[document.querySelector(e)]],[document.documentElement]):new fn([[e]],hn)}function vn(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}fn.prototype=pn.prototype=c({constructor:fn,select:function(e){"function"!=typeof e&&(e=ot(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=t[r],l=s.length,c=i[r]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=e.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new fn(i,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return st(e.apply(this,arguments))}}(e):ct(e);for(var t=this._groups,n=t.length,i=[],r=[],a=0;a<n;++a)for(var o,s=t[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(i.push(e.call(o,o.__data__,c,s)),r.push(o));return new fn(i,r)},selectChild:function(e){return this.select(null==e?ht:function(e){return function(){return gt.call(this.children,e)}}("function"==typeof e?e:dt(e)))},selectChildren:function(e){return this.selectAll(null==e?pt:function(e){return function(){return ft.call(this.children,e)}}("function"==typeof e?e:dt(e)))},filter:function(e){"function"!=typeof e&&(e=ut(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,o=t[r],s=o.length,l=i[r]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new fn(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Ct);var n=t?It:yt,i=this._parents,r=this._groups;"function"!=typeof e&&(e=bt(e));for(var a=r.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=i[c],d=r[c],g=d.length,h=xt(e.call(u,u&&u.__data__,c,i)),f=h.length,p=s[c]=new Array(f),m=o[c]=new Array(f),v=l[c]=new Array(g);n(u,d,p,m,v,h,t);for(var b,y,I=0,C=0;I<f;++I)if(b=p[I]){for(I>=C&&(C=I+1);!(y=m[C])&&++C<f;);b._next=y||null}}return(o=new fn(o,i))._enter=s,o._exit=l,o},enter:function(){return new fn(this._enter||this._groups.map(mt),this._parents)},exit:function(){return new fn(this._exit||this._groups.map(mt),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,a=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,a=i.length,o=Math.min(r,a),s=new Array(r),l=0;l<o;++l)for(var c,u=n[l],d=i[l],g=u.length,h=s[l]=new Array(g),f=0;f<g;++f)(c=u[f]||d[f])&&(h[f]=c);for(;l<r;++l)s[l]=n[l];return new fn(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Bt);for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o,s=n[a],l=s.length,c=r[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(t)}return new fn(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){var e,t=0,n=Q(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(e){n.e(e)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,a=t[n],o=0,s=a.length;o<s;++o)(r=a[o])&&e.call(r,r.__data__,o,a);return this},attr:function(e,t){var n=tt(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?Ft:At:"function"==typeof t?n.local?Gt:wt:n.local?Ut:Qt)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Lt:"function"==typeof t?Vt:St)(e,t,null==n?"":n)):Zt(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?kt:"function"==typeof t?Xt:Et)(e,t)):this.node()[e]},classed:function(e,t){var n=Nt(e+"");if(arguments.length<2){for(var i=Wt(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?Dt:t?Ht:Yt)(n,t))},text:function(e){return arguments.length?this.each(null==e?zt:("function"==typeof e?Jt:Ot)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?jt:("function"==typeof e?Kt:Pt)(e)):this.node().innerHTML},raise:function(){return this.each(qt)},lower:function(){return this.each($t)},append:function(e){var t="function"==typeof e?e:rt(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:rt(e),i=null==t?en:"function"==typeof t?t:ot(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(tn)},clone:function(e){return this.select(e?rn:nn)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,a=an(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?sn:on,i=0;i<o;++i)this.each(s(a[i],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(i=0,l=s[c];i<o;++i)if((r=a[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?un:cn)(e,t))}},Symbol.iterator,gn);var bn={passive:!1},yn={capture:!0,passive:!1};function In(e){e.stopImmediatePropagation()}function Cn(e){e.preventDefault(),e.stopImmediatePropagation()}var xn=function(e){return function(){return e}};function Bn(e,t){var n=t.sourceEvent,i=t.subject,r=t.target,a=t.identifier,o=t.active,s=t.x,l=t.y,c=t.dx,u=t.dy,d=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}function An(e){return!e.ctrlKey&&!e.button}function Fn(){return this.parentNode}function Qn(e,t){return null==t?{x:e.x,y:e.y}:t}function Un(){return navigator.maxTouchPoints||"ontouchstart"in this}function wn(){var e,t,n,i,r=An,a=Fn,o=Qn,s=Un,l={},c=Je("start","drag","end"),u=0,d=0;function g(e){e.on("mousedown.drag",h).filter(s).on("touchstart.drag",m).on("touchmove.drag",v,bn).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(o,s){if(!i&&r.call(this,o,s)){var l=y(this,a.call(this,o,s),o,s,"mouse");l&&(mn(o.view).on("mousemove.drag",f,yn).on("mouseup.drag",p,yn),function(e){var t=e.document.documentElement,n=mn(e).on("dragstart.drag",Cn,yn);"onselectstart"in t?n.on("selectstart.drag",Cn,yn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(o.view),In(o),n=!1,e=o.clientX,t=o.clientY,l("start",o))}}function f(i){if(Cn(i),!n){var r=i.clientX-e,a=i.clientY-t;n=r*r+a*a>d}l.mouse("drag",i)}function p(e){mn(e.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,i=mn(e).on("dragstart.drag",null);t&&(i.on("click.drag",Cn,yn),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,n),Cn(e),l.mouse("end",e)}function m(e,t){if(r.call(this,e,t)){var n,i,o=e.changedTouches,s=a.call(this,e,t),l=o.length;for(n=0;n<l;++n)(i=y(this,s,e,t,o[n].identifier,o[n]))&&(In(e),i("start",e,o[n]))}}function v(e){var t,n,i=e.changedTouches,r=i.length;for(t=0;t<r;++t)(n=l[i[t].identifier])&&(Cn(e),n("drag",e,i[t]))}function b(e){var t,n,r=e.changedTouches,a=r.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),t=0;t<a;++t)(n=l[r[t].identifier])&&(In(e),n("end",e,r[t]))}function y(e,t,n,i,r,a){var s,d,h,f=c.copy(),p=vn(a||n,t);if(null!=(h=o.call(e,new Bn("beforestart",{sourceEvent:n,target:g,identifier:r,active:u,x:p[0],y:p[1],dx:0,dy:0,dispatch:f}),i)))return s=h.x-p[0]||0,d=h.y-p[1]||0,function n(a,o,c){var m,v=p;switch(a){case"start":l[r]=n,m=u++;break;case"end":delete l[r],--u;case"drag":p=vn(c||o,t),m=u}f.call(a,e,new Bn(a,{sourceEvent:o,subject:h,target:g,identifier:r,active:m,x:p[0]+s,y:p[1]+d,dx:p[0]-v[0],dy:p[1]-v[1],dispatch:f}),i)}}return g.filter=function(e){return arguments.length?(r="function"==typeof e?e:xn(!!e),g):r},g.container=function(e){return arguments.length?(a="function"==typeof e?e:xn(e),g):a},g.subject=function(e){return arguments.length?(o="function"==typeof e?e:xn(e),g):o},g.touchable=function(e){return arguments.length?(s="function"==typeof e?e:xn(!!e),g):s},g.on=function(){var e=c.on.apply(c,arguments);return e===c?g:e},g.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,g):Math.sqrt(d)},g}function Gn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rn(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ln(){}Bn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Sn=1/.7,Vn="\\s*([+-]?\\d+)\\s*",Zn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",kn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",En=/^#([0-9a-f]{3,8})$/,Xn=new RegExp("^rgb\\("+[Vn,Vn,Vn]+"\\)$"),Nn=new RegExp("^rgb\\("+[kn,kn,kn]+"\\)$"),Wn=new RegExp("^rgba\\("+[Vn,Vn,Vn,Zn]+"\\)$"),_n=new RegExp("^rgba\\("+[kn,kn,kn,Zn]+"\\)$"),Tn=new RegExp("^hsl\\("+[Zn,kn,kn]+"\\)$"),Mn=new RegExp("^hsla\\("+[Zn,kn,kn,Zn]+"\\)$"),Hn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yn(){return this.rgb().formatHex()}function Dn(){return this.rgb().formatRgb()}function zn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=En.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?On(t):3===n?new Kn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Jn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Jn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Xn.exec(e))?new Kn(t[1],t[2],t[3],1):(t=Nn.exec(e))?new Kn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Wn.exec(e))?Jn(t[1],t[2],t[3],t[4]):(t=_n.exec(e))?Jn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Tn.exec(e))?ti(t[1],t[2]/100,t[3]/100,1):(t=Mn.exec(e))?ti(t[1],t[2]/100,t[3]/100,t[4]):Hn.hasOwnProperty(e)?On(Hn[e]):"transparent"===e?new Kn(NaN,NaN,NaN,0):null}function On(e){return new Kn(e>>16&255,e>>8&255,255&e,1)}function Jn(e,t,n,i){return i<=0&&(e=t=n=NaN),new Kn(e,t,n,i)}function jn(e){return e instanceof Ln||(e=zn(e)),e?new Kn((e=e.rgb()).r,e.g,e.b,e.opacity):new Kn}function Pn(e,t,n,i){return 1===arguments.length?jn(e):new Kn(e,t,n,null==i?1:i)}function Kn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function qn(){return"#"+ei(this.r)+ei(this.g)+ei(this.b)}function $n(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function ei(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ti(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ii(e,t,n,i)}function ni(e){if(e instanceof ii)return new ii(e.h,e.s,e.l,e.opacity);if(e instanceof Ln||(e=zn(e)),!e)return new ii;if(e instanceof ii)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,s=a-r,l=(a+r)/2;return s?(o=t===a?(n-i)/s+6*(n<i):n===a?(i-t)/s+2:(t-n)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new ii(o,s,l,e.opacity)}function ii(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function ri(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Gn(Ln,zn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Yn,formatHex:Yn,formatHsl:function(){return ni(this).formatHsl()},formatRgb:Dn,toString:Dn}),Gn(Kn,Pn,Rn(Ln,{brighter:function(e){return e=null==e?Sn:Math.pow(Sn,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qn,formatHex:qn,formatRgb:$n,toString:$n})),Gn(ii,(function(e,t,n,i){return 1===arguments.length?ni(e):new ii(e,t,n,null==i?1:i)}),Rn(Ln,{brighter:function(e){return e=null==e?Sn:Math.pow(Sn,e),new ii(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new ii(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Kn(ri(e>=240?e-240:e+120,r,i),ri(e,r,i),ri(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var ai=function(e){return function(){return e}};function oi(e){return 1==(e=+e)?si:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):ai(isNaN(t)?n:t)}}function si(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):ai(isNaN(e)?t:e)}var li=function e(t){var n=oi(t);function i(e,t){var i=n((e=Pn(e)).r,(t=Pn(t)).r),r=n(e.g,t.g),a=n(e.b,t.b),o=si(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=a(t),e.opacity=o(t),e+""}}return i.gamma=e,i}(1);function ci(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(a){for(n=0;n<i;++n)r[n]=e[n]*(1-a)+t[n]*a;return r}}function ui(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=vi(e[n],t[n]);for(;n<i;++n)o[n]=t[n];return function(e){for(n=0;n<r;++n)o[n]=a[n](e);return o}}function di(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function gi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hi(e,t){var n,r={},a={};for(n in null!==e&&"object"===i(e)||(e={}),null!==t&&"object"===i(t)||(t={}),t)n in e?r[n]=vi(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pi=new RegExp(fi.source,"g");function mi(e,t){var n,i,r,a=fi.lastIndex=pi.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=fi.exec(e))&&(i=pi.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:gi(n,i)})),a=pi.lastIndex;return a<t.length&&(r=t.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function vi(e,t){var n,r=i(t);return null==t||"boolean"===r?ai(t):("number"===r?gi:"string"===r?(n=zn(t))?(t=n,li):mi:t instanceof zn?li:t instanceof Date?di:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?ci:Array.isArray(t)?ui:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?hi:gi)(e,t)}function bi(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var yi,Ii=180/Math.PI,Ci={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xi(e,t,n,i,r,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*Ii,skewX:Math.atan(l)*Ii,scaleX:o,scaleY:s}}function Bi(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],l=[];return a=e(a),o=e(o),function(e,i,r,a,o,s){if(e!==r||i!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:gi(e,r)},{i:l-2,x:gi(i,a)})}else(r||a)&&o.push("translate("+r+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:gi(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(a.rotate,o.rotate,s,l),function(e,t,n,a){e!==t?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:gi(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(a.skewX,o.skewX,s,l),function(e,t,n,i,a,o){if(e!==n||t!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:gi(e,n)},{i:s-2,x:gi(t,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(e){for(var t,n=-1,i=l.length;++n<i;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var Ai,Fi,Qi=Bi((function(e){var t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ci:xi(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Ui=Bi((function(e){return null==e?Ci:(yi||(yi=document.createElementNS("http://www.w3.org/2000/svg","g")),yi.setAttribute("transform",e),(e=yi.transform.baseVal.consolidate())?xi((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ci)}),", ",")",")"),wi=0,Gi=0,Ri=0,Li=0,Si=0,Vi=0,Zi="object"===("undefined"==typeof performance?"undefined":i(performance))&&performance.now?performance:Date,ki="object"===("undefined"==typeof window?"undefined":i(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ei(){return Si||(ki(Xi),Si=Zi.now()+Vi)}function Xi(){Si=0}function Ni(){this._call=this._time=this._next=null}function Wi(e,t,n){var i=new Ni;return i.restart(e,t,n),i}function _i(){Si=(Li=Zi.now())+Vi,wi=Gi=0;try{!function(){Ei(),++wi;for(var e,t=Ai;t;)(e=Si-t._time)>=0&&t._call.call(void 0,e),t=t._next;--wi}()}finally{wi=0,function(){var e,t,n=Ai,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ai=t);Fi=e,Mi(i)}(),Si=0}}function Ti(){var e=Zi.now(),t=e-Li;t>1e3&&(Vi-=t,Li=e)}function Mi(e){wi||(Gi&&(Gi=clearTimeout(Gi)),e-Si>24?(e<1/0&&(Gi=setTimeout(_i,e-Zi.now()-Vi)),Ri&&(Ri=clearInterval(Ri))):(Ri||(Li=Zi.now(),Ri=setInterval(Ti,1e3)),wi=1,ki(_i)))}function Hi(e,t,n){var i=new Ni;return t=null==t?0:+t,i.restart((function(n){i.stop(),e(n+t)}),t,n),i}Ni.prototype=Wi.prototype={constructor:Ni,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Ei():+n)+(null==t?0:+t),this._next||Fi===this||(Fi?Fi._next=this:Ai=this,Fi=this),this._call=e,this._time=n,Mi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mi())}};var Yi=Je("start","end","cancel","interrupt"),Di=[];function zi(e,t,n,i,r,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var c,u,d,g;if(1!==n.state)return l();for(c in r)if((g=r[c]).name===n.name){if(3===g.state)return Hi(o);4===g.state?(g.state=6,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=6,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(Hi((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=g);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=Wi(a,0,n.time)}(e,n,{name:t,index:i,group:r,on:Yi,tween:Di,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function Oi(e,t){var n=ji(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ji(e,t){var n=ji(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ji(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Pi(e,t){var n,i;return function(){var r=Ji(this,e),a=r.tween;if(a!==n)for(var o=0,s=(i=n=a).length;o<s;++o)if(i[o].name===t){(i=i.slice()).splice(o,1);break}r.tween=i}}function Ki(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=Ji(this,e),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}a.tween=r}}function qi(e,t,n){var i=e._id;return e.each((function(){var e=Ji(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ji(e,i).value[t]}}function $i(e,t){var n;return("number"==typeof t?gi:t instanceof zn?li:(n=zn(t))?(t=n,li):mi)(e,t)}function er(e){return function(){this.removeAttribute(e)}}function tr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nr(e,t,n){var i,r,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===i?r:r=t(i=o,n)}}function ir(e,t,n){var i,r,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===i?r:r=t(i=o,n)}}function rr(e,t,n){var i,r,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(e))===(s=l+"")?null:o===i&&s===r?a:(r=s,a=t(i=o,l));this.removeAttribute(e)}}function ar(e,t,n){var i,r,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===i&&s===r?a:(r=s,a=t(i=o,l));this.removeAttributeNS(e.space,e.local)}}function or(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sr(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lr(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&sr(e,r)),n}return r._value=t,r}function cr(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&or(e,r)),n}return r._value=t,r}function ur(e,t){return function(){Oi(this,e).delay=+t.apply(this,arguments)}}function dr(e,t){return t=+t,function(){Oi(this,e).delay=t}}function gr(e,t){return function(){Ji(this,e).duration=+t.apply(this,arguments)}}function hr(e,t){return t=+t,function(){Ji(this,e).duration=t}}function fr(e,t){if("function"!=typeof t)throw new Error;return function(){Ji(this,e).ease=t}}function pr(e,t,n){var i,r,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Oi:Ji;return function(){var o=a(this,e),s=o.on;s!==i&&(r=(i=s).copy()).on(t,n),o.on=r}}var mr=pn.prototype.constructor;function vr(e){return function(){this.style.removeProperty(e)}}function br(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function yr(e,t,n){var i,r;function a(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&br(e,a,n)),i}return a._value=t,a}function Ir(e){return function(t){this.textContent=e.call(this,t)}}function Cr(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ir(i)),t}return i._value=e,i}var xr=0;function Br(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Ar(){return++xr}var Fr=pn.prototype;function Qr(e){return e*e*e}function Ur(e){return--e*e*e+1}Br.prototype=c({constructor:Br,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ot(e));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,l,c=i[o],u=c.length,d=a[o]=new Array(u),g=0;g<u;++g)(s=c[g])&&(l=e.call(s,s.__data__,g,c))&&("__data__"in s&&(l.__data__=s.__data__),d[g]=l,zi(d[g],t,n,g,d,ji(s,n)));return new Br(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ct(e));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var l,c=i[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var g,h=e.call(l,l.__data__,d,c),f=ji(l,n),p=0,m=h.length;p<m;++p)(g=h[p])&&zi(g,t,n,p,h,f);a.push(h),o.push(l)}return new Br(a,o,t,n)},selectChild:Fr.selectChild,selectChildren:Fr.selectChildren,filter:function(e){"function"!=typeof e&&(e=ut(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,o=t[r],s=o.length,l=i[r]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new Br(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,c=t[s],u=n[s],d=c.length,g=o[s]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(g[h]=l);for(;s<i;++s)o[s]=t[s];return new Br(o,this._parents,this._name,this._id)},selection:function(){return new mr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Ar(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=ji(o,t);zi(o,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Br(i,this._parents,e,n)},call:Fr.call,nodes:Fr.nodes,node:Fr.node,size:Fr.size,empty:Fr.empty,each:Fr.each,on:function(e,t){var n=this._id;return arguments.length<2?ji(this.node(),n).on.on(e):this.each(pr(n,e,t))},attr:function(e,t){var n=tt(e),i="transform"===n?Ui:$i;return this.attrTween(e,"function"==typeof t?(n.local?ar:rr)(n,i,qi(this,"attr."+e,t)):null==t?(n.local?tr:er)(n):(n.local?ir:nr)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=tt(e);return this.tween(n,(i.local?lr:cr)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?Qi:$i;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var a=Zt(this,e),o=(this.style.removeProperty(e),Zt(this,e));return a===o?null:a===n&&o===i?r:r=t(n=a,i=o)}}(e,i)).on("end.style."+e,vr(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,r,a;return function(){var o=Zt(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Zt(this,e)),o===l?null:o===i&&l===r?a:(r=l,a=t(i=o,s))}}(e,i,qi(this,"style."+e,t))).each(function(e,t){var n,i,r,a,o="style."+t,s="end."+o;return function(){var l=Ji(this,e),c=l.on,u=null==l.value[o]?a||(a=vr(t)):void 0;c===n&&r===u||(i=(n=c).copy()).on(s,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,a=n+"";return function(){var o=Zt(this,e);return o===a?null:o===i?r:r=t(i=o,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,yr(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(qi(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Cr(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=ji(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((null==t?Pi:Ki)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ur:dr)(t,e)):ji(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?gr:hr)(t,e)):ji(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(fr(t,e)):ji(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Ji(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--r&&a()}};n.each((function(){var n=Ji(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===r&&a()}))}},Symbol.iterator,Fr[Symbol.iterator]);var wr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Gr(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}pn.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,i,r,a=e.__transition,o=!0;if(a){for(r in t=null==t?null:t+"",a)(n=a[r]).name===t?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete e.__transition}}(this,e)}))},pn.prototype.transition=function(e){var t,n;e instanceof Br?(t=e._id,e=e._name):(t=Ar(),(n=wr).time=Ei(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,c=0;c<l;++c)(o=s[c])&&zi(o,e,t,c,s,n||Gr(o,t));return new Br(i,this._parents,e,t)};var Rr=Math.PI,Lr=2*Rr,Sr=Lr-1e-6;function Vr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zr(){return new Vr}function kr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Er(e){return(e=kr(Math.abs(e)))?e[1]:NaN}Vr.prototype=Zr.prototype={constructor:Vr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-e,l=i-t,c=a-e,u=o-t,d=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>1e-6)if(Math.abs(u*s-l*c)>1e-6&&r){var g=n-a,h=i-o,f=s*s+l*l,p=g*g+h*h,m=Math.sqrt(f),v=Math.sqrt(d),b=r*Math.tan((Rr-Math.acos((f+d-p)/(2*m*v)))/2),y=b/v,I=b/m;Math.abs(y-1)>1e-6&&(this._+="L"+(e+y*c)+","+(t+y*u)),this._+="A"+r+","+r+",0,0,"+ +(u*g>c*h)+","+(this._x1=e+I*s)+","+(this._y1=t+I*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,i,r,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=e+o,c=t+s,u=1^a,d=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%Lr+Lr),d>Sr?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>1e-6&&(this._+="A"+n+","+n+",0,"+ +(d>=Rr)+","+u+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Xr,Nr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wr(e){if(!(t=Nr.exec(e)))throw new Error("invalid format: "+e);var t;return new _r({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function _r(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Tr(e,t){var n=kr(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Wr.prototype=_r.prototype,_r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Mr={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Tr(100*e,t)},r:Tr,s:function(e,t){var n=kr(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(Xr=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+kr(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Hr(e){return e}var Yr,Dr,zr,Or=Array.prototype.map,Jr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jr(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Hr:(t=Or.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,a=[],o=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),a.push(e.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Hr:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Or.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Wr(e)).fill,n=e.align,d=e.sign,g=e.symbol,h=e.zero,f=e.width,p=e.comma,m=e.precision,v=e.trim,b=e.type;"n"===b?(p=!0,b="g"):Mr[b]||(void 0===m&&(m=12),v=!0,b="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var y="$"===g?r:"#"===g&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",I="$"===g?a:/[%p]/.test(b)?l:"",C=Mr[b],x=/[defgprs%]/.test(b);function B(e){var r,a,l,g=y,B=I;if("c"===b)B=C(e)+B,e="";else{var A=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:C(Math.abs(e),m),v&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),A&&0==+e&&"+"!==d&&(A=!1),g=(A?"("===d?d:c:"-"===d||"("===d?"":d)+g,B=("s"===b?Jr[8+Xr/3]:"")+B+(A&&"("===d?")":""),x)for(r=-1,a=e.length;++r<a;)if(48>(l=e.charCodeAt(r))||l>57){B=(46===l?o+e.slice(r+1):e.slice(r))+B,e=e.slice(0,r);break}}p&&!h&&(e=i(e,1/0));var F=g.length+e.length+B.length,Q=F<f?new Array(f-F+1).join(t):"";switch(p&&h&&(e=i(Q+e,Q.length?f-B.length:1/0),Q=""),n){case"<":e=g+e+B+Q;break;case"=":e=g+Q+e+B;break;case"^":e=Q.slice(0,F=Q.length>>1)+g+e+B+Q.slice(F);break;default:e=Q+g+e+B}return s(e)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),B.toString=function(){return e+""},B}return{format:d,formatPrefix:function(e,t){var n=d(((e=Wr(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Er(t)/3))),r=Math.pow(10,-i),a=Jr[8+i/3];return function(e){return n(r*e)+a}}}}function Pr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Kr(e){return+e}Yr=jr({thousands:",",grouping:[3],currency:["$",""]}),Dr=Yr.format,zr=Yr.formatPrefix;var qr=[0,1];function $r(e){return e}function ea(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function ta(e,t,n){var i=e[0],r=e[1],a=t[0],o=t[1];return r<i?(i=ea(r,i),a=n(o,a)):(i=ea(i,r),a=n(a,o)),function(e){return a(i(e))}}function na(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=ea(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Se(e,t,1,i)-1;return a[n](r[n](t))}}function ia(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ra(){var e,t,n,i,r,a,o=qr,s=qr,l=vi,c=$r;function u(){var e=Math.min(o.length,s.length);return c!==$r&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),i=e>2?na:ta,r=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(r||(r=i(o.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=i(s,o.map(e),gi)))(n)))},d.domain=function(e){return arguments.length?(o=Array.from(e,Kr),u()):o.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=bi,u()},d.clamp=function(e){return arguments.length?(c=!!e||$r,u()):c!==$r},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,i){return e=n,t=i,u()}}function aa(){return ra()($r,$r)}function oa(e,t,n,i){var r,a=function(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=Ve?r*=10:a>=Ze?r*=5:a>=ke&&(r*=2),t<e?-r:r}(e,t,n);switch((i=Wr(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Er(t)/3)))-Er(Math.abs(e)))}(a,o))||(i.precision=r),zr(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Er(t)-Er(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(e){return Math.max(0,-Er(Math.abs(e)))}(a))||(i.precision=r-2*("%"===i.type))}return Dr(i)}function sa(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var i,r,a,o,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(o=Ee(e,t,n))||!isFinite(o))return[];if(o>0){var l=Math.round(e/o),c=Math.round(t/o);for(l*o<e&&++l,c*o>t&&--c,a=new Array(r=c-l+1);++s<r;)a[s]=(l+s)*o}else{o=-o;var u=Math.round(e*o),d=Math.round(t*o);for(u/o<e&&++u,d/o>t&&--d,a=new Array(r=d-u+1);++s<r;)a[s]=(u+s)/o}return i&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return oa(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,a=t(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(r=l,l=c,c=r,r=o,o=s,s=r);u-- >0;){if((r=Ee(l,c,n))===i)return a[o]=l,a[s]=c,t(a);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return e},e}function la(){var e=aa();return e.copy=function(){return ia(e,la())},Pr.apply(e,arguments),sa(e)}var ca=function(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");function ua(e){return function(){return e}}var da,ga,ha,fa,pa,ma,va,ba,ya,Ia=Math.abs,Ca=Math.atan2,xa=Math.cos,Ba=Math.max,Aa=Math.min,Fa=Math.sin,Qa=Math.sqrt,Ua=Math.PI,wa=Ua/2,Ga=2*Ua;function Ra(e){return e>1?0:e<-1?Ua:Math.acos(e)}function La(e){return e>=1?wa:e<=-1?-wa:Math.asin(e)}function Sa(e){return e.innerRadius}function Va(e){return e.outerRadius}function Za(e){return e.startAngle}function ka(e){return e.endAngle}function Ea(e){return e&&e.padAngle}function Xa(e,t,n,i,r,a,o,s){var l=n-e,c=i-t,u=o-r,d=s-a,g=d*l-u*c;if(!(g*g<1e-12))return[e+(g=(u*(t-a)-d*(e-r))/g)*l,t+g*c]}function Na(e,t,n,i,r,a,o){var s=e-n,l=t-i,c=(o?a:-a)/Qa(s*s+l*l),u=c*l,d=-c*s,g=e+u,h=t+d,f=n+u,p=i+d,m=(g+f)/2,v=(h+p)/2,b=f-g,y=p-h,I=b*b+y*y,C=r-a,x=g*p-f*h,B=(y<0?-1:1)*Qa(Ba(0,C*C*I-x*x)),A=(x*y-b*B)/I,F=(-x*b-y*B)/I,Q=(x*y+b*B)/I,U=(-x*b+y*B)/I,w=A-m,G=F-v,R=Q-m,L=U-v;return w*w+G*G>R*R+L*L&&(A=Q,F=U),{cx:A,cy:F,x01:-u,y01:-d,x11:A*(r/C-1),y11:F*(r/C-1)}}function Wa(){var e=Sa,t=Va,n=ua(0),i=null,r=Za,a=ka,o=Ea,s=null;function l(){var l,c,u=+e.apply(this,arguments),d=+t.apply(this,arguments),g=r.apply(this,arguments)-wa,h=a.apply(this,arguments)-wa,f=Ia(h-g),p=h>g;if(s||(s=l=Zr()),d<u&&(c=d,d=u,u=c),d>1e-12)if(f>Ga-1e-12)s.moveTo(d*xa(g),d*Fa(g)),s.arc(0,0,d,g,h,!p),u>1e-12&&(s.moveTo(u*xa(h),u*Fa(h)),s.arc(0,0,u,h,g,p));else{var m,v,b=g,y=h,I=g,C=h,x=f,B=f,A=o.apply(this,arguments)/2,F=A>1e-12&&(i?+i.apply(this,arguments):Qa(u*u+d*d)),Q=Aa(Ia(d-u)/2,+n.apply(this,arguments)),U=Q,w=Q;if(F>1e-12){var G=La(F/u*Fa(A)),R=La(F/d*Fa(A));(x-=2*G)>1e-12?(I+=G*=p?1:-1,C-=G):(x=0,I=C=(g+h)/2),(B-=2*R)>1e-12?(b+=R*=p?1:-1,y-=R):(B=0,b=y=(g+h)/2)}var L=d*xa(b),S=d*Fa(b),V=u*xa(C),Z=u*Fa(C);if(Q>1e-12){var k,E=d*xa(y),X=d*Fa(y),N=u*xa(I),W=u*Fa(I);if(f<Ua&&(k=Xa(L,S,N,W,E,X,V,Z))){var _=L-k[0],T=S-k[1],M=E-k[0],H=X-k[1],Y=1/Fa(Ra((_*M+T*H)/(Qa(_*_+T*T)*Qa(M*M+H*H)))/2),D=Qa(k[0]*k[0]+k[1]*k[1]);U=Aa(Q,(u-D)/(Y-1)),w=Aa(Q,(d-D)/(Y+1))}}B>1e-12?w>1e-12?(m=Na(N,W,L,S,d,w,p),v=Na(E,X,V,Z,d,w,p),s.moveTo(m.cx+m.x01,m.cy+m.y01),w<Q?s.arc(m.cx,m.cy,w,Ca(m.y01,m.x01),Ca(v.y01,v.x01),!p):(s.arc(m.cx,m.cy,w,Ca(m.y01,m.x01),Ca(m.y11,m.x11),!p),s.arc(0,0,d,Ca(m.cy+m.y11,m.cx+m.x11),Ca(v.cy+v.y11,v.cx+v.x11),!p),s.arc(v.cx,v.cy,w,Ca(v.y11,v.x11),Ca(v.y01,v.x01),!p))):(s.moveTo(L,S),s.arc(0,0,d,b,y,!p)):s.moveTo(L,S),u>1e-12&&x>1e-12?U>1e-12?(m=Na(V,Z,E,X,u,-U,p),v=Na(L,S,N,W,u,-U,p),s.lineTo(m.cx+m.x01,m.cy+m.y01),U<Q?s.arc(m.cx,m.cy,U,Ca(m.y01,m.x01),Ca(v.y01,v.x01),!p):(s.arc(m.cx,m.cy,U,Ca(m.y01,m.x01),Ca(m.y11,m.x11),!p),s.arc(0,0,u,Ca(m.cy+m.y11,m.cx+m.x11),Ca(v.cy+v.y11,v.cx+v.x11),p),s.arc(v.cx,v.cy,U,Ca(v.y11,v.x11),Ca(v.y01,v.x01),!p))):s.arc(0,0,u,C,I,p):s.lineTo(V,Z)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Ua/2;return[xa(i)*n,Fa(i)*n]},l.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:ua(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:ua(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:ua(+e),l):n},l.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:ua(+e),l):i},l.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:ua(+e),l):r},l.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:ua(+e),l):a},l.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:ua(+e),l):o},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}function _a(e){return"object"===i(e)&&"length"in e?e:Array.from(e)}function Ta(e){this._context=e}function Ma(e){return new Ta(e)}function Ha(e){return e[0]}function Ya(e){return e[1]}function Da(e,t){var n=ua(!0),i=null,r=Ma,a=null;function o(o){var s,l,c,u=(o=_a(o)).length,d=!1;for(null==i&&(a=r(c=Zr())),s=0;s<=u;++s)!(s<u&&n(l=o[s],s,o))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(l,s,o),+t(l,s,o));if(c)return a=null,c+""||null}return e="function"==typeof e?e:void 0===e?Ha:ua(e),t="function"==typeof t?t:void 0===t?Ya:ua(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:ua(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:ua(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:ua(!!e),o):n},o.curve=function(e){return arguments.length?(r=e,null!=i&&(a=r(i)),o):r},o.context=function(e){return arguments.length?(null==e?i=a=null:a=r(i=e),o):i},o}function za(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Oa(e){return e}Ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var Ja,ja,Pa=function(e){u(n,Ue);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).uniqueId="decidable-".concat(n.uniqueId),e}return l(n,[{key:"getComputedStyleValue",value:function(e){return window.ShadyCSS?window.ShadyCSS.getComputedStyleValue(this,e):getComputedStyle(this).getPropertyValue(e)}},{key:"firstUpdated",value:function(e){I(d(n.prototype),"firstUpdated",this).call(this,e),mn(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",(function(e){mn(e.currentTarget.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)})).on("keydown.keyboard",(function(e){mn(e.currentTarget.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)}))}}],[{key:"uniqueId",get:function(){return n.ID+=1,n.ID}},{key:"greys",get:function(){var e="#999999",t={white:"#ffffff"};return t.light75=li(e,"#ffffff")(.75),t.light50=li(e,"#ffffff")(.5),t.light25=li(e,"#ffffff")(.25),t.grey=e,t.dark25=li(e,"#000000")(.25),t.dark50=li(e,"#000000")(.5),t.dark75=li(e,"#000000")(.75),t.black="#000000",t}},{key:"shadows",get:function(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}},{key:"cssBoxShadow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.shadows.opacityUmbra+this.shadows.opacityBoost,r=this.shadows.opacityPenumbra+this.shadows.opacityBoost,a=this.shadows.opacityAmbient+this.shadows.opacityBoost,o=n?"rgba(".concat(this.shadows.inverseBaselineColorString,", ").concat(i,")"):"rgba(".concat(this.shadows.baselineColorString,", ").concat(i,")"),s=n?"rgba(".concat(this.shadows.inverseBaselineColorString,", ").concat(r,")"):"rgba(".concat(this.shadows.baselineColorString,", ").concat(r,")"),l=n?"rgba(".concat(this.shadows.inverseBaselineColorString,", ").concat(a,")"):"rgba(".concat(this.shadows.baselineColorString,", ").concat(a,")"),c=this.shadows.mapUmbra[e],u=this.shadows.mapPenumbra[e],d=this.shadows.mapAmbient[e],g=t?"".concat(-c.y,"px ").concat(c.y/2,"px ").concat(c.b,"px ").concat(c.s,"px"):"".concat(c.y/2,"px ").concat(c.y,"px ").concat(c.b,"px ").concat(c.s,"px"),h=t?"".concat(-u.y,"px ").concat(u.y/2,"px ").concat(u.b,"px ").concat(u.s,"px"):"".concat(u.y/2,"px ").concat(u.y,"px ").concat(u.b,"px ").concat(u.s,"px"),f=t?"".concat(-d.y,"px ").concat(d.y/2,"px ").concat(d.b,"px ").concat(d.s,"px"):"".concat(d.y/2,"px ").concat(d.y,"px ").concat(d.b,"px ").concat(d.s,"px");return"".concat(g," ").concat(o,", ").concat(h," ").concat(s,", ").concat(f," ").concat(l)}},{key:"svgFilters",get:function(){var e=n.shadows,t=e.elevations.map((function(t){return le(da||(da=C(["\n        <filter id=",' x="-250%" y="-250%" width="600%" height="600%">\n          <feComponentTransfer in="SourceAlpha" result="solid">\n            <feFuncA  type="table" tableValues="0 1 1"/>\n          </feComponentTransfer>\n          <feOffset in="solid" result="offU" dx='," dy=",' />\n          <feOffset in="solid" result="offP" dx='," dy=",' />\n          <feOffset in="solid" result="offA" dx='," dy="," />\n          ","\n          ","\n          ","\n          <feGaussianBlur in=",' result="blurU" stdDeviation='," />\n          <feGaussianBlur in=",' result="blurP" stdDeviation='," />\n          <feGaussianBlur in=",' result="blurA" stdDeviation=',' />\n          <feFlood in="SourceGraphic" result="opU" flood-color='," flood-opacity=",' />\n          <feFlood in="SourceGraphic" result="opP" flood-color='," flood-opacity=",' />\n          <feFlood in="SourceGraphic" result="opA" flood-color='," flood-opacity=",' />\n          <feComposite in="opU" in2="blurU" result="shU" operator="in" />\n          <feComposite in="opP" in2="blurP" result="shP" operator="in" />\n          <feComposite in="opA" in2="blurA" result="shA" operator="in" />\n          \x3c!-- HACK Edge: Using a dynamic value for erode radius stops Edge from corrupting the "radius" value! --\x3e\n          <feMorphology in="solid" result="smaller" operator="erode" radius=',' />\n          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />\n          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />\n          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />\n          <feMerge>\n            <feMergeNode in="finalU" />\n            <feMergeNode in="finalP" />\n            <feMergeNode in="finalA" />\n            <feMergeNode in="SourceGraphic" />\n          </feMerge>\n        </filter>'])),"shadow-".concat(t),e.mapUmbra[t].y/2,e.mapUmbra[t].y,e.mapPenumbra[t].y/2,e.mapPenumbra[t].y,e.mapAmbient[t].y/2,e.mapAmbient[t].y,0===e.mapUmbra[t].s?le(ga||(ga=C([""]))):le(ha||(ha=C(['<feMorphology in="offU" result="spreadU" operator='," radius="," />"])),e.mapUmbra[t].s>0?"dilate":"erode",Math.abs(e.mapUmbra[t].s)),0===e.mapPenumbra[t].s?le(fa||(fa=C([""]))):le(pa||(pa=C(['<feMorphology in="offP" result="spreadP" operator='," radius="," />"])),e.mapPenumbra[t].s>0?"dilate":"erode",Math.abs(e.mapPenumbra[t].s)),0===e.mapAmbient[t].s?le(ma||(ma=C([""]))):le(va||(va=C(['<feMorphology in="offA" result="spreadA" operator='," radius="," />"])),e.mapAmbient[t].s>0?"dilate":"erode",Math.abs(e.mapAmbient[t].s)),0===e.mapUmbra[t].s?"offU":"spreadU",e.mapUmbra[t].b/2,0===e.mapPenumbra[t].s?"offP":"spreadP",e.mapPenumbra[t].b/2,0===e.mapAmbient[t].s?"offA":"spreadA",e.mapAmbient[t].b/2,e.baselineColor,e.opacityUmbra+e.opacityBoost,e.baselineColor,e.opacityPenumbra+e.opacityBoost,e.baselineColor,e.opacityAmbient+e.opacityBoost,1)}));return le(ba||(ba=C(['\n      <svg class="defs">\n        <defs>\n          ',"\n        </defs>\n      </svg>\n    "])),t)}},{key:"styles",get:function(){return Z(ya||(ya=C(["\n      :host {\n        ---shadow-0: var(--shadow-0, ",");\n        ---shadow-2: var(--shadow-2, ",");\n        ---shadow-4: var(--shadow-4, ",");\n        ---shadow-8: var(--shadow-8, ",");\n\n        ---color-background: var(--color-background, ",");\n        ---color-border: var(--color-border, ",");\n        ---color-text: var(--color-text, ",");\n        ---color-text-inverse: var(--color-text-inverse, ",");\n        ---color-link: var(--color-link, ",");\n        ---color-element-background: var(--color-element-background, ",");\n        ---color-element-disabled: var(--color-element-disabled, ",");\n        ---color-element-enabled: var(--color-element-enabled, ",");\n        ---color-element-selected: var(--color-element-selected, ",");\n        ---color-element-border: var(--color-element-border, ",");\n        ---color-element-emphasis: var(--color-element-emphasis, ",');\n\n        ---font-family-base: var(--font-family-base, "Source Sans", sans-serif);\n        ---font-family-math: var(--font-family-math, "Source Serif", serif);\n\n        ---transition-duration: var(--transition-duration, 500ms);\n\n        font-family: var(---font-family-base);\n      }\n\n      :host,\n      :host *,\n      :host *::before,\n      :host *::after {\n        box-sizing: border-box;\n      }\n\n      .math-greek {\n        font-family: var(---font-family-math);\n        font-style: normal;\n      }\n\n      .math-num {\n        font-family: var(---font-family-base);\n        font-style: normal;\n      }\n\n      .math-var {\n        font-family: var(---font-family-math);\n        font-style: italic;\n      }\n\n      .defs {\n        display: block;\n\n        width: 0;\n        height: 0;\n      }\n    '])),V(this.cssBoxShadow(0)),V(this.cssBoxShadow(2)),V(this.cssBoxShadow(4)),V(this.cssBoxShadow(8)),V(this.greys.white),V(this.greys.light75),V(this.greys.dark75),V(this.greys.white),V(this.greys.dark25),V(this.greys.light75),V(this.greys.light50),V(this.greys.grey),V(this.greys.dark25),V(this.greys.dark50),V(this.greys.dark75))}}]),n}();Pa.ID=0;var Ka=function(e){u(n,Pa);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).disabled=!1,e}return l(n,[{key:"render",value:function(){return se(Ja||(Ja=C(["\n      <button ?disabled=",">\n        <slot></slot>\n      </button>\n    "])),this.disabled)}}],[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(ja||(ja=C(["\n        :host {\n          margin: 0.25rem;\n        }\n\n        button {\n          width: 100%;\n          height: 100%;\n          padding: 0.375rem 0.75rem;\n\n          font-family: var(---font-family-base);\n          font-size: 1.125rem;\n          line-height: 1.5;\n          color: var(---color-text-inverse);\n\n          border: 0;\n          border-radius: 0.25rem;\n          outline: none;\n        }\n\n        button:disabled {\n          background-color: var(--decidable-button-background-color, var(---color-element-disabled));\n          outline: none;\n          box-shadow: none;\n        }\n\n        button:enabled {\n          cursor: pointer;\n\n          background-color: var(--decidable-button-background-color, var(---color-element-enabled));\n          outline: none;\n          box-shadow: var(---shadow-2);\n        }\n\n        button:enabled:hover {\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        button:enabled:active {\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n\n        :host(.keyboard) button:enabled:focus {\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) button:enabled:focus:active {\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n      "])))]}}]),n}();customElements.define("decidable-button",Ka);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var qa,$a,eo,to,no=function(e){return null!=e?e:ue},io=function(e){u(n,Pa);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).disabled=!1,e.max=void 0,e.min=void 0,e.step=void 0,e.value=void 0,e}return l(n,[{key:"changed",value:function(e){this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"inputted",value:function(e){this.value=e.target.value}},{key:"render",value:function(){return se(qa||(qa=C(["\n      <label for=",'>\n        <slot></slot>\n      </label>\n      <div class="range">\n        <input type="range" id='," min="," max="," step="," .value="," @change="," @input=",">\n      </div>\n      <decidable-spinner min="," max="," step="," .value="," @input=","></decidable-spinner>\n    "])),"".concat(this.uniqueId,"-slider"),"".concat(this.uniqueId,"-slider"),no(this.min),no(this.max),no(this.step),this.value,this.changed.bind(this),this.inputted.bind(this),no(this.min),no(this.max),no(this.step),this.value,this.inputted.bind(this))}}],[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z($a||($a=C(["\n        :host {\n          ---shadow-2-rotate: var(--shadow-2-rotate, ",");\n          ---shadow-4-rotate: var(--shadow-4-rotate, ",");\n          ---shadow-8-rotate: var(--shadow-8-rotate, ",");\n\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n        }\n\n        label {\n          margin: 0.25rem 0.25rem 0;\n        }\n\n        .range {\n          display: inline-block;\n\n          width: 3.5rem;\n          height: 4.75rem;\n          margin: 0 0.25rem 0.25rem;\n        }\n\n        decidable-spinner {\n          --decidable-spinner-input-width: 3.5rem;\n\n          margin: 0 0.25rem 0.25rem;\n        }\n\n        /* Adapted from http://danielstern.ca/range.css/#/ */\n        /* Overall */\n        input[type=range] {\n          width: 4.75rem;\n          height: 3.5rem;\n          padding: 0;\n          margin: 0;\n\n          background-color: unset;\n\n          transform: rotate(-90deg);\n          transform-origin: 2.375rem 2.375rem;\n\n          /* stylelint-disable-next-line property-no-vendor-prefix */\n          -webkit-appearance: none;\n        }\n\n        input[type=range]:enabled {\n          cursor: ns-resize;\n        }\n\n        input[type=range]:focus {\n          outline: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-tooltip {\n          display: none;\n        }\n\n        /* Track */\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-webkit-slider-runnable-track {\n          width: 100%;\n          height: 4px;\n\n          background: var(---color-element-disabled);\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        input[type=range]:focus::-webkit-slider-runnable-track {\n          background: var(---color-element-disabled);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-moz-range-track {\n          width: 100%;\n          height: 4px;\n\n          background: var(---color-element-disabled);\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-track {\n          width: 100%;\n          height: 4px;\n\n          color: transparent;\n\n          background: transparent;\n          border-color: transparent;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-fill-lower {\n          background: #cccccc;\n          /* background: var(---color-element-disabled); */\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-fill-upper {\n          background: #cccccc;\n          /* background: var(---color-element-disabled); */\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:focus::-ms-fill-lower {\n          background: var(---color-element-disabled);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:focus::-ms-fill-upper {\n          background: var(---color-element-disabled);\n        }\n\n        /* Thumb */\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-webkit-slider-thumb {\n          width: 10px;\n          height: 20px;\n          margin-top: -8px;\n\n          border: 0;\n          border-radius: 4px;\n\n          /* stylelint-disable-next-line property-no-vendor-prefix */\n          -webkit-appearance: none;\n        }\n\n        input[type=range]:disabled::-webkit-slider-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        input[type=range]:enabled::-webkit-slider-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        input[type=range]:enabled:hover::-webkit-slider-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        input[type=range]:enabled:active::-webkit-slider-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-moz-range-thumb {\n          width: 10px;\n          height: 20px;\n\n          border: 0;\n          border-radius: 4px;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:disabled::-moz-range-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled::-moz-range-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:hover::-moz-range-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:active::-moz-range-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-thumb {\n          width: 10px;\n          height: 20px;\n          margin-top: 0;\n\n          background: #999999;\n          /* background: var(---color-element-enabled); */\n          border: 0;\n          border-radius: 4px;\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:disabled::-ms-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled::-ms-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:hover::-ms-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:active::-ms-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n      "])),V(this.cssBoxShadow(2,!0,!1)),V(this.cssBoxShadow(4,!0,!1)),V(this.cssBoxShadow(8,!0,!1)))]}}]),n}();customElements.define("decidable-slider",io);var ro,ao,oo=function(e){u(n,Pa);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).disabled=!1,e.max=void 0,e.min=void 0,e.step=void 0,e.value=void 0,e}return l(n,[{key:"inputted",value:function(e){this.value=e.target.value}},{key:"render",value:function(){return se(eo||(eo=C(["\n      <label>\n        <slot></slot>\n        <input ?disabled=",' type="number" min='," max="," step="," .value="," @input=",">\n      </label>\n    "])),this.disabled,no(this.min),no(this.max),no(this.step),this.value,this.inputted.bind(this))}}],[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(to||(to=C(['\n        :host {\n          ---decidable-spinner-font-size: var(--decidable-spinner-font-size, 1.125rem);\n          ---decidable-spinner-input-width: var(--decidable-spinner-input-width, 4rem);\n          ---decidable-spinner-prefix: var(--decidable-spinner-prefix, "");\n\n          display: block;\n        }\n\n        label {\n          position: relative;\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n\n          margin: 0;\n\n          font-size: 0.75rem;\n        }\n\n        label::before {\n          position: absolute;\n          bottom: 1px;\n          left: calc(50% - var(---decidable-spinner-input-width) / 2 + 0.25rem);\n\n          font-size: var(---decidable-spinner-font-size);\n          line-height: normal;\n\n          content: var(---decidable-spinner-prefix);\n        }\n\n        input[type=number] {\n          width: var(---decidable-spinner-input-width);\n\n          font-family: var(---font-family-base);\n          font-size: var(---decidable-spinner-font-size);\n          color: inherit;\n          text-align: right;\n\n          background: none;\n          border: 0;\n          border-radius: 0;\n          outline: none;\n          box-shadow: var(---shadow-2);\n\n          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */\n        }\n\n        input[type=number]:hover {\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=number]:focus,\n        input[type=number]:active {\n          box-shadow: var(---shadow-8);\n        }\n\n        input[type=number]:disabled {\n          color: var(---color-text);\n\n          border: 0;\n          box-shadow: none;\n\n          /* HACK: Use correct text color in Safari */\n          -webkit-opacity: 1;\n          /* HACK: Hide spinners in disabled input for Firefox and Safari */\n          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */\n          /* HACK: Use correct text color in Safari */\n          -webkit-text-fill-color: var(---color-text);\n        }\n\n        /* HACK: Hide spinners in disabled input for Firefox and Safari */\n        input[type=number]:disabled::-webkit-outer-spin-button,\n        input[type=number]:disabled::-webkit-inner-spin-button {\n          margin: 0;\n          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */\n        }\n      '])))]}}]),n}();customElements.define("decidable-spinner",oo);var so,lo,co=function(e){u(n,Pa);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).checked=!1,e.disabled=!1,e}return l(n,[{key:"changed",value:function(e){this.checked=e.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}},{key:"render",value:function(){return se(ro||(ro=C(['\n      <input type="checkbox" id='," ?checked="," ?disabled="," @change=",">\n      <label for=",'>\n        <slot name="off-label"></slot>\n      </label>\n      <label for=',">\n        <slot></slot>\n      </label>\n    "])),"".concat(this.uniqueId,"-checkbox"),this.checked,this.disabled,this.changed.bind(this),"".concat(this.uniqueId,"-checkbox"),"".concat(this.uniqueId,"-checkbox"))}}],[{key:"properties",get:function(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(ao||(ao=C(['\n        :host {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n        }\n\n        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */\n        input[type=checkbox] {\n          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */\n          position: absolute;\n\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0 0 0 0);\n\n          white-space: nowrap;\n\n          border: 0;\n          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */\n        }\n\n        input[type=checkbox] + label {\n          order: 1;\n\n          margin: 0 0.25rem 0.25rem;\n\n          font-weight: 400;\n        }\n\n        input[type=checkbox] + label + label {\n          position: relative;\n\n          min-width: 24px;\n          padding: 0 0 36px;\n          margin: 0.25rem 0.25rem 0;\n\n          font-weight: 400;\n\n          outline: none;\n        }\n\n        input[type=checkbox] + label + label::before,\n        input[type=checkbox] + label + label::after {\n          position: absolute;\n\n          left: 50%;\n\n          margin: 0;\n\n          content: "";\n\n          outline: 0;\n\n          transition: all var(---transition-duration) ease;\n          transform: translate(-50%, 0);\n        }\n\n        input[type=checkbox] + label + label::before {\n          bottom: 1px;\n\n          width: 8px;\n          height: 34px;\n\n          background-color: var(---color-element-disabled);\n          border-radius: 4px;\n        }\n\n        input[type=checkbox] + label + label::after {\n          bottom: 0;\n\n          width: 18px;\n          height: 18px;\n\n          background-color: var(---color-element-enabled);\n          border-radius: 50%;\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=checkbox]:checked + label + label::after {\n          transform: translate(-50%, -100%);\n        }\n\n        input[type=checkbox]:disabled + label + label::after {\n          background-color: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        input[type=checkbox]:enabled + label,\n        input[type=checkbox]:enabled + label + label {\n          cursor: pointer;\n        }\n\n        input[type=checkbox]:enabled + label:hover + label::after,\n        input[type=checkbox]:enabled + label + label:hover::after {\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=checkbox]:enabled + label:active + label::after,\n        input[type=checkbox]:enabled + label + label:active::after {\n          box-shadow: var(---shadow-8);\n        }\n\n        /* stylelint-disable-next-line selector-max-compound-selectors */\n        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {\n          box-shadow: var(---shadow-4);\n        }\n\n        /* stylelint-disable-next-line selector-max-compound-selectors */\n        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,\n        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {\n          box-shadow: var(---shadow-8);\n        }\n      '])))]}}]),n}();customElements.define("decidable-switch",co);var uo,go,ho=function(e){u(n,Pa);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).disabled=!1,e}return l(n,[{key:"render",value:function(){return se(so||(so=C(["\n      <fieldset ?disabled=",'>\n        <legend><slot name="label"></slot></legend>\n        <slot></slot>\n      </fieldset>\n    '])),this.disabled)}}],[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(lo||(lo=C(["\n        fieldset {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: stretch;\n          justify-content: center;\n\n          margin: 0.25rem;\n\n          border: 0;\n        }\n\n        legend {\n          text-align: center;\n        }\n      "])))]}}]),n}();customElements.define("decidable-toggle",ho);var fo=function(e){u(n,Pa);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).checked=!1,e.disabled=!1,e.name=void 0,e.value=void 0,e}return l(n,[{key:"changed",value:function(e){this.checked=e.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}},{key:"render",value:function(){return se(uo||(uo=C(['\n      <input type="radio" id='," name="," value="," .checked="," @change=",">\n      <label for=",">\n        <slot></slot>\n      </label>\n    "])),"".concat(this.uniqueId,"-radio"),this.name,this.value,this.checked,this.changed.bind(this),"".concat(this.uniqueId,"-radio"))}}],[{key:"properties",get:function(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(go||(go=C(["\n        :host {\n          display: flex;\n        }\n\n        input[type=radio] {\n          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */\n          position: absolute;\n\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0 0 0 0);\n\n          white-space: nowrap;\n\n          border: 0;\n          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */\n        }\n\n        input[type=radio] + label {\n          width: 100%;\n          padding: 0.375rem 0.75rem;\n\n          font-family: var(---font-family-base);\n          font-size: 1.125rem;\n          line-height: 1.5;\n          color: var(---color-text-inverse);\n          text-align: center;\n\n          cursor: pointer;\n\n          background-color: var(---color-element-enabled);\n          border: 0;\n          border-radius: 0;\n          outline: none;\n\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=radio]:checked + label {\n          background-color: var(---color-element-selected);\n          outline: none;\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=radio] + label:hover {\n          z-index: 1;\n\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=radio] + label:active {\n          z-index: 2;\n\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n\n        :host(:first-of-type) input[type=radio] + label {\n          border-top-left-radius: 0.25rem;\n          border-top-right-radius: 0.25rem;\n        }\n\n        :host(:last-of-type) input[type=radio] + label {\n          border-bottom-right-radius: 0.25rem;\n          border-bottom-left-radius: 0.25rem;\n        }\n\n        :host(.keyboard) input[type=radio]:focus + label {\n          z-index: 1;\n\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) input[type=radio]:focus:checked + label {\n          z-index: 1;\n\n          background-color: var(---color-element-selected);\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) input[type=radio]:focus + label:active {\n          z-index: 2;\n\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n      "])))]}}]),n}();customElements.define("decidable-toggle-option",fo);var po,mo={fromAttribute:function(e){return e.split(/\s+/).map((function(e){return Number.parseFloat(e)}))},toAttribute:function(e){return e.length?e.map((function(e){return e.toFixed(3)})).join(" "):null}},vo=function(e){u(n,Pa);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).interactive=!1,e}return l(n,null,[{key:"properties",get:function(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}},{key:"colors",get:function(){return{x:ca[0],a:ca[4],l:ca[5],v:ca[7],p:ca[1],g:ca[2],w:ca[3],u:ca[6],chosen:ca[8],better:"#4545d0",worse:"#f032e6",even:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}}},{key:"lights",get:function(){return Object.keys(n.colors).reduce((function(e,t){return e[t]=li(n.colors[t],"#ffffff")(.5),e}),{})}},{key:"darks",get:function(){return Object.keys(n.colors).reduce((function(e,t){return e[t]=li(n.colors[t],"#000000")(.5),e}),{})}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(po||(po=C(["\n        :host {\n          ---color-x: var(--color-x, ",");\n          ---color-a: var(--color-a, ",");\n          ---color-l: var(--color-l, ",");\n          ---color-v: var(--color-v, ",");\n          ---color-p: var(--color-p, ",");\n          ---color-g: var(--color-g, ",");\n          ---color-w: var(--color-w, ",");\n          ---color-u: var(--color-u, ",");\n          ---color-chosen: var(--color-chosen, ",");\n          ---color-better: var(--color-better, ",");\n          ---color-worse: var(--color-worse, ",");\n          ---color-even: var(--color-even, ",");\n          ---color-correct: var(--color-correct, ",");\n          ---color-error: var(--color-error, ",");\n          ---color-nr: var(--color-nr, ",");\n\n          ---color-x-light: var(--color-x-light, ",");\n          ---color-a-light: var(--color-a-light, ",");\n          ---color-l-light: var(--color-l-light, ",");\n          ---color-v-light: var(--color-v-light, ",");\n          ---color-p-light: var(--color-p-light, ",");\n          ---color-g-light: var(--color-g-light, ",");\n          ---color-w-light: var(--color-w-light, ",");\n          ---color-u-light: var(--color-u-light, ",");\n          ---color-chosen-light: var(--color-chosen-light, ",");\n          ---color-better-light: var(--color-better-light, ",");\n          ---color-worse-light: var(--color-worse-light, ",");\n          ---color-even-light: var(--color-even-light, ",");\n          ---color-correct-light: var(--color-correct-light, ",");\n          ---color-error-light: var(--color-error-light, ",");\n          ---color-nr-light: var(--color-nr-light, ",");\n\n          ---color-x-dark: var(--color-x-dark, ",");\n          ---color-a-dark: var(--color-a-dark, ",");\n          ---color-l-dark: var(--color-l-dark, ",");\n          ---color-v-dark: var(--color-v-dark, ",");\n          ---color-p-dark: var(--color-p-dark, ",");\n          ---color-g-dark: var(--color-g-dark, ",");\n          ---color-w-dark: var(--color-w-dark, ",");\n          ---color-u-dark: var(--color-u-dark, ",");\n          ---color-chosen-dark: var(--color-chosen-dark, ",");\n          ---color-better-dark: var(--color-better-dark, ",");\n          ---color-worse-dark: var(--color-worse-dark, ",");\n          ---color-even-dark: var(--color-even-dark, ",");\n          ---color-correct-dark: var(--color-correct-dark, ",");\n          ---color-error-dark: var(--color-error-dark, ",");\n          ---color-nr-dark: var(--color-nr-dark, ",");\n        }\n      "])),V(this.colors.x),V(this.colors.a),V(this.colors.l),V(this.colors.v),V(this.colors.p),V(this.colors.g),V(this.colors.w),V(this.colors.u),V(this.colors.chosen),V(this.colors.better),V(this.colors.worse),V(this.colors.even),V(this.colors.correct),V(this.colors.error),V(this.colors.nr),V(this.lights.x),V(this.lights.a),V(this.lights.l),V(this.lights.v),V(this.lights.p),V(this.lights.g),V(this.lights.w),V(this.lights.u),V(this.lights.chosen),V(this.lights.better),V(this.lights.worse),V(this.lights.even),V(this.lights.correct),V(this.lights.error),V(this.lights.nr),V(this.darks.x),V(this.darks.a),V(this.darks.l),V(this.darks.v),V(this.darks.p),V(this.darks.g),V(this.darks.w),V(this.darks.u),V(this.darks.chosen),V(this.darks.better),V(this.darks.worse),V(this.darks.even),V(this.darks.correct),V(this.darks.error),V(this.darks.nr))]}}]),n}(),bo=2,yo=function(){function e(t){o(this,e)}return l(e,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AT",value:function(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}},{key:"_$AS",value:function(e,t){return this.update(e,t)}},{key:"update",value:function(e,t){return this.render.apply(this,B(t))}}]),e}(),Io=function e(t,n){var i,r,a=t._$AN;if(void 0===a)return!1;var o,s=Q(a);try{for(s.s();!(o=s.n()).done;){var l=o.value;null===(r=(i=l)._$AO)||void 0===r||r.call(i,n,!1),e(l,n)}}catch(e){s.e(e)}finally{s.f()}return!0},Co=function(e){var t,n;do{if(void 0===(t=e._$AM))break;(n=t._$AN).delete(e),e=t}while(0===(null==n?void 0:n.size))},xo=function(e){for(var t;t=e._$AM;e=t){var n=t._$AN;if(void 0===n)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),ns(t)}};function Bo(e){void 0!==this._$AN?(Co(this),this._$AM=e,xo(this)):this._$AM=e}function Ao(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(t)if(Array.isArray(i))for(var a=n;a<i.length;a++)Io(i[a],!1),Co(i[a]);else null!=i&&(Io(i,!1),Co(i));else Io(this,e)}var Fo,Qo,Uo,wo,Go,Ro,Lo,So,Vo,Zo,ko,Eo,Xo,No,Wo,_o,To,Mo,Ho,Yo,Do,zo,Oo,Jo,jo,Po,Ko,qo,$o,es,ts,ns=function(e){var t,n,i,r;e.type==bo&&(null!==(t=(i=e)._$AP)&&void 0!==t||(i._$AP=Ao),null!==(n=(r=e)._$AQ)&&void 0!==n||(r._$AQ=Bo))},is=function(e){u(n,yo);var t=b(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments))._$AN=void 0,e}return l(n,[{key:"_$AT",value:function(e,t,i){I(d(n.prototype),"_$AT",this).call(this,e,t,i),xo(this),this.isConnected=e._$AU}},{key:"_$AO",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e!==this.isConnected&&(this.isConnected=e,e?null===(t=this.reconnected)||void 0===t||t.call(this):null===(n=this.disconnected)||void 0===n||n.call(this)),i&&(Io(this,e),Co(this))}},{key:"setValue",value:function(e){if(function(e){return void 0===e.strings}(this._$Ct))this._$Ct._$AI(e,this);else{var t=B(this._$Ct._$AH);t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}},{key:"disconnected",value:function(){}},{key:"reconnected",value:function(){}}]),n}(),rs=new WeakMap,as=0,os=new Map,ss=new WeakSet,ls=function(){return new Promise((function(e){return requestAnimationFrame(e)}))},cs=[{transform:"translateX(-100%) scale(0)",opacity:0}],us=[{opacity:0},{opacity:1}],ds=function(e,t){var n=e-t;return 0===n?void 0:n},gs=function(e,t){var n=e/t;return 1===n?void 0:n},hs={left:function(e,t){var n=ds(e,t);return{value:n,transform:n&&"translateX(".concat(n,"px)")}},top:function(e,t){var n=ds(e,t);return{value:n,transform:n&&"translateY(".concat(n,"px)")}},width:function(e,t){var n=gs(e,t);return{value:n,transform:n&&"scaleX(".concat(n,")")}},height:function(e,t){var n=gs(e,t);return{value:n,transform:n&&"scaleY(".concat(n,")")}}},fs={duration:333,easing:"ease-in-out"},ps=["left","top","width","height","opacity","color","background"],ms=new WeakMap,vs=function(e){u(d,is);var t,i,r,s,c=b(d);function d(e){var t;if(o(this,d),(t=c.call(this,e)).t=null,t.i=null,t.o=!0,t.shouldLog=!1,e.type===bo)throw Error("The `animate` directive must be used in attribute position.");return t.createFinished(),v(t)}return l(d,[{key:"createFinished",value:function(){var e,t=this;null===(e=this.resolveFinished)||void 0===e||e.call(this),this.finished=new Promise((function(e){t.h=e}))}},{key:"resolveFinished",value:(s=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this.h)||void 0===t||t.call(this),this.h=void 0;case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"render",value:function(e){return ue}},{key:"getController",value:function(){return rs.get(this.l)}},{key:"isDisabled",value:function(){var e;return this.options.disabled||(null===(e=this.getController())||void 0===e?void 0:e.disabled)}},{key:"update",value:function(e,t){var n,i=x(t,1)[0],r=void 0===this.l;return r&&(this.l=null===(n=e.options)||void 0===n?void 0:n.host,this.l.addController(this),this.element=e.element,ms.set(this.element,this)),this.optionsOrCallback=i,(r||"function"!=typeof i)&&this.u(i),this.render(i)}},{key:"u",value:function(e){var t,i;e=null!=e?e:{};var r=this.getController();void 0!==r&&((e=n(n({},r.defaultOptions),e)).keyframeOptions=n(n({},r.defaultOptions.keyframeOptions),e.keyframeOptions)),null!==(t=(i=e).properties)&&void 0!==t||(i.properties=ps),this.options=e}},{key:"v",value:function(){var e={},t=this.element.getBoundingClientRect(),n=getComputedStyle(this.element);return this.options.properties.forEach((function(i){var r,a=null!==(r=t[i])&&void 0!==r?r:hs[i]?void 0:n[i],o=Number(a);e[i]=isNaN(o)?a+"":o})),e}},{key:"p",value:function(){var e,t=!0;return this.options.guard&&(t=function(e,t){if(Array.isArray(e)){if(Array.isArray(t)&&t.length===e.length&&e.every((function(e,n){return e===t[n]})))return!1}else if(t===e)return!1;return!0}(e=this.options.guard(),this.m)),this.o=this.l.hasUpdated&&!this.isDisabled()&&!this.isAnimating()&&t&&this.element.isConnected,this.o&&(this.m=Array.isArray(e)?Array.from(e):e),this.o}},{key:"hostUpdate",value:function(){var e;"function"==typeof this.optionsOrCallback&&this.u(this.optionsOrCallback()),this.p()&&(this.g=this.v(),this.t=null!==(e=this.t)&&void 0!==e?e:this.element.parentNode,this.i=this.element.nextSibling)}},{key:"hostUpdated",value:(r=a(regeneratorRuntime.mark((function e(){var t,i,r,a,o,s,l,c,u,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.o&&this.element.isConnected&&(!this.options.skipInitial||this.isHostRendered)){e.next=2;break}return e.abrupt("return");case 2:return this.prepare(),e.next=5,ls;case 5:i=this.A(),r=this._(this.options.keyframeOptions,i),a=this.v(),void 0!==this.g?(o=this.j(this.g,a,i),s=o.from,l=o.to,this.log("measured",[this.g,a,s,l]),t=this.calculateKeyframes(s,l)):(c=os.get(this.options.inId))?(os.delete(this.options.inId),u=this.j(c,a,i),d=u.from,g=u.to,t=this.calculateKeyframes(d,g),t=this.options.in?[n(n({},this.options.in[0]),t[0])].concat(B(this.options.in.slice(1)),[t[1]]):t,as++,t.forEach((function(e){return e.zIndex=as}))):this.options.in&&(t=[].concat(B(this.options.in),[{}])),this.animate(t,r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"resetStyles",value:function(){var e;void 0!==this.S&&(this.element.setAttribute("style",null!==(e=this.S)&&void 0!==e?e:""),this.S=void 0)}},{key:"commitStyles",value:function(){var e,t;this.S=this.element.getAttribute("style"),null===(e=this.webAnimation)||void 0===e||e.commitStyles(),null===(t=this.webAnimation)||void 0===t||t.cancel()}},{key:"reconnected",value:function(){}},{key:"disconnected",value:(i=a(regeneratorRuntime.mark((function e(){var t,n,i,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.o){e.next=2;break}return e.abrupt("return");case 2:if(void 0!==this.options.id&&os.set(this.options.id,this.g),void 0!==this.options.out){e.next=4;break}return e.abrupt("return");case 4:return this.prepare(),e.next=7,ls();case 7:if(!(null===(t=this.t)||void 0===t?void 0:t.isConnected)){e.next=10;break}n=this.i&&this.i.parentNode===this.t?this.i:null,this.t.insertBefore(this.element,n),this.options.stabilizeOut&&(i=this.v(),this.log("stabilizing out"),r=this.g.left-i.left,a=this.g.top-i.top,!("static"===getComputedStyle(this.element).position)||0===r&&0===a||(this.element.style.position="relative"),0!==r&&(this.element.style.left=r+"px"),0!==a&&(this.element.style.top=a+"px"));case 10:return o=this._(this.options.keyframeOptions),e.next=13,this.animate(this.options.out,o);case 13:this.element.remove();case 14:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"prepare",value:function(){this.createFinished()}},{key:"start",value:function(){var e,t;null===(t=(e=this.options).onStart)||void 0===t||t.call(e,this)}},{key:"didFinish",value:function(e){var t,n;e&&(null===(n=(t=this.options).onComplete)||void 0===n||n.call(t,this)),this.g=void 0,this.animatingProperties=void 0,this.frames=void 0,this.resolveFinished()}},{key:"A",value:function(){for(var e=[],t=this.element.parentNode;t;t=null==t?void 0:t.parentNode){var n=ms.get(t);n&&!n.isDisabled()&&n&&e.push(n)}return e}},{key:"isHostRendered",get:function(){var e=this,t=ss.has(this.l);return t||this.l.updateComplete.then((function(){ss.add(e.l)})),t}},{key:"_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.A(),i=n({},fs);return t.forEach((function(e){return Object.assign(i,e.options.keyframeOptions)})),Object.assign(i,e),i}},{key:"j",value:function(e,t,i){e=n({},e),t=n({},t);var r=i.map((function(e){return e.animatingProperties})).filter((function(e){return void 0!==e})),a=1,o=1;return void 0!==r&&(r.forEach((function(e){e.width&&(a/=e.width),e.height&&(o/=e.height)})),void 0!==e.left&&void 0!==t.left&&(e.left=a*e.left,t.left=a*t.left),void 0!==e.top&&void 0!==t.top&&(e.top=o*e.top,t.top=o*t.top)),{from:e,to:t}}},{key:"calculateKeyframes",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={},a={},o=!1,s={};for(var l in t){var c=e[l],u=t[l];if(l in hs){var d=hs[l];if(void 0===c||void 0===u)continue;var g=d(c,u);void 0!==g.transform&&(s[l]=g.value,o=!0,r.transform="".concat(null!==(n=r.transform)&&void 0!==n?n:""," ").concat(g.transform))}else c!==u&&void 0!==c&&void 0!==u&&(o=!0,r[l]=c,a[l]=u)}return r.transformOrigin=a.transformOrigin=i?"center center":"top left",this.animatingProperties=s,o?[r,a]:void 0}},{key:"animate",value:(t=a(regeneratorRuntime.mark((function e(t){var n,i,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:this.options.keyframeOptions,this.start(),this.frames=t,i=!1,this.isAnimating()||this.isDisabled()||(this.options.onFrames&&(this.frames=t=this.options.onFrames(this),this.log("modified frames",t)),void 0===t)){e.next=15;break}return this.log("animate",[t,n]),i=!0,this.webAnimation=this.element.animate(t,n),null==(r=this.getController())||r.add(this),e.prev=7,e.next=10,this.webAnimation.finished;case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(7);case 14:null==r||r.remove(this);case 15:return e.abrupt("return",(this.didFinish(i),i));case 16:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(e){return t.apply(this,arguments)})},{key:"isAnimating",value:function(){var e,t;return"running"===(null===(e=this.webAnimation)||void 0===e?void 0:e.playState)||(null===(t=this.webAnimation)||void 0===t?void 0:t.pending)}},{key:"log",value:function(e,t){this.shouldLog&&!this.isDisabled()&&console.log(e,this.options.id,t)}}]),d}(),bs=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return{_$litDirective$:e,values:n}}}(vs),ys=function(){function e(){o(this,e)}return l(e,null,[{key:"xal2v",value:function(e,t,n){return e>=0?Math.pow(e,t):-n*Math.pow(-e,t)}},{key:"xlv2a",value:function(e,t,n){return e>=0?Math.log(n)/Math.log(e):(Math.log(-n)-Math.log(t))/Math.log(-e)}},{key:"xav2l",value:function(e,t,n){return e>=0?1:-n/Math.pow(-e,t)}},{key:"pg2w",value:function(e,t){return Math.pow(e,t)/Math.pow(Math.pow(e,t)+Math.pow(1-e,t),1/t)}}]),e}(),Is=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).numeric=!1,e}return l(n,null,[{key:"properties",get:function(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(Fo||(Fo=C(["\n        :host {\n          display: block;\n\n          margin: 1rem;\n        }\n\n        /* Containing <div> */\n        .holder {\n          display: flex;\n\n          flex-direction: row;\n\n          justify-content: left;\n        }\n\n        /* Overall <table> */\n        .equation {\n          text-align: center;\n\n          border-collapse: collapse;\n\n          border: 0;\n        }\n\n        /* Modifies <td> */\n        .underline {\n          border-bottom: 1px solid var(---color-text);\n        }\n\n        /* Basic <span> and <var> w/modifiers */\n        span,\n        var {\n          padding: 0 0.25rem;\n\n          font-style: normal;\n        }\n\n        .tight {\n          padding: 0;\n        }\n\n        .paren {\n          font-size: 150%;\n        }\n\n        .bracket {\n          font-size: 175%;\n        }\n\n        .brace {\n          font-size: 200%;\n        }\n\n        .addend {\n          position: relative;\n          display: inline-block;\n        }\n\n        .comparison {\n          position: relative;\n          display: inline-block;\n\n          font-size: 125%;\n          font-weight: 600;\n        }\n\n        .function {\n          display: inline-block;\n        }\n\n        :host([numeric]) .function {\n          padding: 0.25rem;\n        }\n\n        .exp {\n          display: inline-block;\n\n          font-size: 0.75rem;\n        }\n\n        .subscript {\n          display: inline-block;\n\n          font-size: 66.667%;\n        }\n\n        .summation {\n          display: flex;\n\n          flex-direction: column;\n\n          line-height: 0.8;\n        }\n\n        .sigma {\n          display: inline-block;\n\n          font-size: 200%;\n        }\n\n        /* Input wrapping <label> */\n        decidable-spinner {\n          --decidable-spinner-input-width: 4rem;\n\n          display: inline-block;\n\n          padding: 0.125rem 0.375rem 0.375rem;\n\n          line-height: 1.5;\n          vertical-align: middle;\n        }\n\n        .n {\n          --decidable-spinner-input-width: 2rem;\n        }\n\n        .left {\n          text-align: left;\n        }\n\n        .right {\n          text-align: right;\n        }\n\n        .bottom {\n          vertical-align: bottom;\n        }\n\n        .top {\n          vertical-align: top;\n        }\n\n        /* Color scheme */\n        /* .win {\n          background: var(---color-better);\n        }\n\n        .loss {\n          background: var(---color-worse);\n        }\n\n        .sure {\n          background: var(---color-even);\n        } */\n\n        .x {\n          background: var(---color-x-light);\n        }\n\n        .a {\n          background: var(---color-a-light);\n        }\n\n        .l {\n          background: var(---color-l-light);\n        }\n\n        .v {\n          background: var(---color-v-light);\n        }\n\n        .p {\n          background: var(---color-p-light);\n        }\n\n        .g {\n          background: var(---color-g-light);\n        }\n\n        .w {\n          background: var(---color-w-light);\n        }\n\n        .u {\n          background: var(---color-u-light);\n        }\n      "])))]}}]),n}(),Cs=function(e){u(n,Is);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).numeric=!1,e.xl=0,e.xw=100,e.pw=.75,e.xs=50,e.a=.8,e.l=1.2,e.g=.8,e.alignState(),e}return l(n,[{key:"alignState",value:function(){this.vw=ys.xal2v(this.xw,this.a,this.l),this.vl=ys.xal2v(this.xl,this.a,this.l),this.ww=ys.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=ys.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs,this.uDiff=this.ug-this.us}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-calculation-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,a:this.a,l:this.l,g:this.g},bubbles:!0}))}},{key:"xwInput",value:function(e){this.xw=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"pwInput",value:function(e){this.pw=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"xsInput",value:function(e){this.xs=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"aInput",value:function(e){this.a=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"lInput",value:function(e){this.l=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"gInput",value:function(e){this.g=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var e,t,n,i,r,a,o,s,l,c,u,d;this.alignState(),this.numeric?(e=se(Qo||(Qo=C(['<decidable-spinner class="x" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">x<sub class="subscript win">win</sub></var>\n        </decidable-spinner>'])),!this.interactive,this.xw,this.xwInput.bind(this)),t=se(Uo||(Uo=C(['<decidable-spinner class="x" disabled .value="','">\n          <var class="math-var">x<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>'])),this.xl),n=se(wo||(wo=C(['<decidable-spinner class="p" ?disabled=',' min="0" max="1" step=".01" .value="','" @input=','>\n          <var class="math-var">p<sub class="subscript win">win</sub></var>\n        </decidable-spinner>'])),!this.interactive,+this.pw.toFixed(2),this.pwInput.bind(this)),i=se(Go||(Go=C(['<decidable-spinner class="x" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">x<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>'])),!this.interactive,this.xs,this.xsInput.bind(this)),r=se(Ro||(Ro=C(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript win">win</sub></var>\n        </decidable-spinner>'])),+this.vw.toFixed(1)),a=se(Lo||(Lo=C(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>'])),+this.vl.toFixed(1)),o=se(So||(So=C(['<decidable-spinner class="w" disabled .value="','">\n          <var class="math-var">w<sub class="subscript win">win</sub></var>\n        </decidable-spinner>'])),+this.ww.toFixed(2)),s=se(Vo||(Vo=C(['<decidable-spinner class="w" disabled .value="','">\n          <var class="math-var">w<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>'])),+this.wl.toFixed(2)),l=se(Zo||(Zo=C(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>'])),+this.vs.toFixed(1)),c=se(ko||(ko=C(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U<sub class="subscript gamble">gamble</sub></var>\n        </decidable-spinner>'])),+this.ug.toFixed(1)),u=se(Eo||(Eo=C(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>'])),+this.us.toFixed(1)),d=se(Xo||(Xo=C(["",""])),this.uDiff>0?se(No||(No=C(['<span class="comparison" ',">&gt;</span>"])),bs({in:us})):this.uDiff<0?se(Wo||(Wo=C(['<span class="comparison" ',">&lt;</span>"])),bs({in:us})):se(_o||(_o=C(['<span class="comparison" ',">=</span>"])),bs({in:us})))):(e=se(To||(To=C(['<var class="math-var x">x<sub class="subscript win">win</sub></var>']))),t=se(Mo||(Mo=C(['<var class="math-var x">x<sub class="subscript loss">loss</sub></var>']))),n=se(Ho||(Ho=C(['<var class="math-var p">p<sub class="subscript win">win</sub></var>']))),i=se(Yo||(Yo=C(['<var class="math-var x">x<sub class="subscript sure">sure</sub></var>']))),r=se(Do||(Do=C(['<var class="math-var v">v<sub class="subscript win">win</sub></var>']))),a=se(zo||(zo=C(['<var class="math-var v">v<sub class="subscript loss">loss</sub></var>']))),o=se(Oo||(Oo=C(['<var class="math-var w">w<sub class="subscript win">win</sub></var>']))),s=se(Jo||(Jo=C(['<var class="math-var w">w<sub class="subscript loss">loss</sub></var>']))),l=se(jo||(jo=C(['<var class="math-var v">v<sub class="subscript sure">sure</sub></var>']))),c=se(Po||(Po=C(['<var class="math-var u">U<sub class="subscript gamble">gamble</sub></var>']))),u=se(Ko||(Ko=C(['<var class="math-var u">U<sub class="subscript sure">sure</sub></var>']))),d=se(qo||(qo=C(['<span class="comparison"></span>']))));var g=se($o||($o=C(['\n      <tr>\n        <td class="right">\n          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>&nbsp;<span class="function w"><var class="math-var w tight">w</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span><span class="plus">+</span><span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>&nbsp;<span class="bracket tight">[</span><span class="tight">1</span><span class="minus"></span><span class="function w"><var class="math-var w">w</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span><span class="bracket tight">]</span>\n        </td>\n        <td>\n          ','\n        </td>\n        <td class="left">\n          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>\n        </td>\n      </tr>\n      <tr>\n        <td class="right">\n          ',"&nbsp;",'<span class="plus">+</span>',"&nbsp;","\n        </td>\n        <td>\n          ",'\n        </td>\n        <td class="left">\n          ','\n        </td>\n      </tr>\n      <tr>\n        <td class="right">\n          ',"\n        </td>\n        <td>\n          ",'\n        </td>\n        <td class="left">\n          ',"\n        </td>\n      </tr>"])),e,n,t,n,d,i,r,o,a,s,d,l,c,d,u);return se(es||(es=C(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"])),g)}}],[{key:"properties",get:function(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(ts||(ts=C(["\n        /* :host {\n          display: inline-block;\n        } */\n      "])))]}}]),n}();customElements.define("cpt-calculation",Cs);var xs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Bs(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}function As(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fs,Qs={},Us={version:"2.9.0"};Fs={exports:{}},function(e,t,n){t[e]=t[e]||n(),Fs.exports&&(Fs.exports=t[e])}("Promise",xs,(function(){var e,t,n,r=Object.prototype.toString,a="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,i){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(t){e=function(e,t,n){return e[t]=n,e}}function o(e,i){n.add(e,i),t||(t=a(n.drain))}function s(e){var t,n=i(e);return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function l(){for(var e=0;e<this.chain.length;e++)c(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function c(e,t,n){var i,r;try{!1===t?n.reject(e.msg):(i=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(r=s(i))?r.call(i,n.resolve,n.reject):n.resolve(i)}catch(e){n.reject(e)}}function u(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=s(e))?o((function(){var i=new h(n);try{t.call(e,(function(){u.apply(i,arguments)}),(function(){d.apply(i,arguments)}))}catch(e){d.call(i,e)}})):(n.msg=e,n.state=1,n.chain.length>0&&o(l,n))}catch(e){d.call(new h(n),e)}}}function d(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(l,t))}function g(e,t,n,i){for(var r=0;r<t.length;r++)!function(r){e.resolve(t[r]).then((function(e){n(r,e)}),i)}(r)}function h(e){this.def=e,this.triggered=!1}function f(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new f(this);this.then=function(e,n){var i={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return i.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");i.resolve=e,i.reject=t})),t.chain.push(i),0!==t.state&&o(l,t),i.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){u.call(t,e)}),(function(e){d.call(t,e)}))}catch(e){d.call(t,e)}}n=function(){var e,n,i;function r(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,a){i=new r(t,a),n?n.next=i:e=i,n=i,i=void 0},drain:function(){var i=e;for(e=n=t=void 0;i;)i.fn.call(i.self),i=i.next}}}();var m=e({},"constructor",p,!1);return p.prototype=m,e(m,"__NPO__",0,!1),e(p,"resolve",(function(e){return e&&"object"==i(e)&&1===e.__NPO__?e:new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)}))})),e(p,"reject",(function(e){return new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)}))})),e(p,"all",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var r=e.length,a=Array(r),o=0;g(t,e,(function(e,t){a[e]=t,++o===r&&n(a)}),i)}))})),e(p,"race",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");g(t,e,(function(e,t){n(t)}),i)}))})),p}));var ws={exports:{}},Gs={exports:{}};!function(e){(function(){var t={version:"3.8.0"},n=[].slice,r=function(e){return n.call(e)},a=self.document;function o(e){return e&&(e.ownerDocument||e.document||e).documentElement}function s(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(a)try{r(a.documentElement.childNodes)[0].nodeType}catch(e){r=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),a)try{a.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var l=this.Element.prototype,c=l.setAttribute,u=l.setAttributeNS,d=this.CSSStyleDeclaration.prototype,g=d.setProperty;l.setAttribute=function(e,t){c.call(this,e,t+"")},l.setAttributeNS=function(e,t,n){u.call(this,e,t,n+"")},d.setProperty=function(e,t,n){g.call(this,e,t+"",n)}}function h(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function f(e){return null===e?NaN:+e}function p(e){return!isNaN(e)}function m(e){return{left:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);i<r;){var a=i+r>>>1;e(t[a],n)<0?i=a+1:r=a}return i},right:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);i<r;){var a=i+r>>>1;e(t[a],n)>0?r=a:i=a+1}return i}}}t.ascending=h,t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},t.min=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},t.max=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=t.call(e,e[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},t.extent=function(e,t){var n,i,r,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=e[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e[a])&&(n>i&&(n=i),r<i&&(r=i))}else{for(;++a<o;)if(null!=(i=t.call(e,e[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t.call(e,e[a],a))&&(n>i&&(n=i),r<i&&(r=i))}return[n,r]},t.sum=function(e,t){var n,i=0,r=e.length,a=-1;if(1===arguments.length)for(;++a<r;)p(n=+e[a])&&(i+=n);else for(;++a<r;)p(n=+t.call(e,e[a],a))&&(i+=n);return i},t.mean=function(e,t){var n,i=0,r=e.length,a=-1,o=r;if(1===arguments.length)for(;++a<r;)p(n=f(e[a]))?i+=n:--o;else for(;++a<r;)p(n=f(t.call(e,e[a],a)))?i+=n:--o;if(o)return i/o},t.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],a=n-i;return a?r+a*(e[i]-r):r},t.median=function(e,n){var i,r=[],a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)p(i=f(e[o]))&&r.push(i);else for(;++o<a;)p(i=f(n.call(e,e[o],o)))&&r.push(i);if(r.length)return t.quantile(r.sort(h),.5)},t.variance=function(e,t){var n,i,r=e.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<r;)p(n=f(e[s]))&&(o+=(i=n-a)*(n-(a+=i/++l)));else for(;++s<r;)p(n=f(t.call(e,e[s],s)))&&(o+=(i=n-a)*(n-(a+=i/++l)));if(l>1)return o/(l-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var v=m(h);function b(e){return e.length}t.bisectLeft=v.left,t.bisect=t.bisectRight=v.right,t.bisector=function(e){return m(1===e.length?function(t,n){return h(e(t),n)}:e)},t.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var i,r,a=n-t;a;)r=Math.random()*a--|0,i=e[a+t],e[a+t]=e[r+t],e[r+t]=i;return e},t.permute=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},t.pairs=function(e){for(var t=0,n=e.length-1,i=e[0],r=new Array(n<0?0:n);t<n;)r[t]=[i,i=e[++t]];return r},t.transpose=function(e){if(!(a=e.length))return[];for(var n=-1,i=t.min(e,b),r=new Array(i);++n<i;)for(var a,o=-1,s=r[n]=new Array(a);++o<a;)s[o]=e[o][n];return r},t.zip=function(){return t.transpose(arguments)},t.keys=function(e){var t=[];for(var n in e)t.push(n);return t},t.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},t.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},t.merge=function(e){for(var t,n,i,r=e.length,a=-1,o=0;++a<r;)o+=e[a].length;for(n=new Array(o);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--o]=i[t];return n};var y=Math.abs;function I(e){for(var t=1;e*t%1;)t*=10;return t}function C(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function x(){this._=Object.create(null)}t.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var i,r=[],a=I(y(n)),o=-1;if(e*=a,t*=a,(n*=a)<0)for(;(i=e+n*++o)>t;)r.push(i/a);else for(;(i=e+n*++o)<t;)r.push(i/a);return r},t.map=function(e,t){var n=new x;if(e instanceof x)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var i,r=-1,a=e.length;if(1===arguments.length)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t.call(e,i=e[r],r),i)}else for(var o in e)n.set(o,e[o]);return n};function B(e){return"__proto__"==(e+="")||"\0"===e[0]?"\0"+e:e}function A(e){return"\0"===(e+="")[0]?e.slice(1):e}function F(e){return B(e)in this._}function Q(e){return(e=B(e))in this._&&delete this._[e]}function U(){var e=[];for(var t in this._)e.push(A(t));return e}function w(){var e=0;for(var t in this._)++e;return e}function G(){for(var e in this._)return!1;return!0}function R(){this._=Object.create(null)}function L(e){return e}function S(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function V(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,i=Z.length;n<i;++n){var r=Z[n]+t;if(r in e)return r}}C(x,{has:F,get:function(e){return this._[B(e)]},set:function(e,t){return this._[B(e)]=t},remove:Q,keys:U,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:A(t),value:this._[t]});return e},size:w,empty:G,forEach:function(e){for(var t in this._)e.call(this,A(t),this._[t])}}),t.nest=function(){var e,n,i={},r=[],a=[];function o(t,a,s){if(s>=r.length)return n?n.call(i,a):e?a.sort(e):a;for(var l,c,u,d,g=-1,h=a.length,f=r[s++],p=new x;++g<h;)(d=p.get(l=f(c=a[g])))?d.push(c):p.set(l,[c]);return t?(c=t(),u=function(e,n){c.set(e,o(t,n,s))}):(c={},u=function(e,n){c[e]=o(t,n,s)}),p.forEach(u),c}function s(e,t){if(t>=r.length)return e;var n=[],i=a[t++];return e.forEach((function(e,i){n.push({key:e,values:s(i,t)})})),i?n.sort((function(e,t){return i(e.key,t.key)})):n}return i.map=function(e,t){return o(t,e,0)},i.entries=function(e){return s(o(t.map,e,0),0)},i.key=function(e){return r.push(e),i},i.sortKeys=function(e){return a[r.length-1]=e,i},i.sortValues=function(t){return e=t,i},i.rollup=function(e){return n=e,i},i},t.set=function(e){var t=new R;if(e)for(var n=0,i=e.length;n<i;++n)t.add(e[n]);return t},C(R,{has:F,add:function(e){return this._[B(e+="")]=!0,e},remove:Q,values:U,size:w,empty:G,forEach:function(e){for(var t in this._)e.call(this,A(t))}}),t.behavior={},t.rebind=function(e,t){for(var n,i=1,r=arguments.length;++i<r;)e[n=arguments[i]]=S(e,t,t[n]);return e};var Z=["webkit","ms","moz","Moz","o","O"];function k(){}function E(){}function X(e){var t=[],n=new x;function i(){for(var n,i=t,r=-1,a=i.length;++r<a;)(n=i[r].on)&&n.apply(this,arguments);return e}return i.on=function(i,r){var a,o=n.get(i);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,a=t.indexOf(o)).concat(t.slice(a+1)),n.remove(i)),r&&t.push(n.set(i,{on:r})),e)},i}function N(){t.event.preventDefault()}function W(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function _(e){for(var n=new E,i=0,r=arguments.length;++i<r;)n[arguments[i]]=X(n);return n.of=function(i,r){return function(a){try{var o=a.sourceEvent=t.event;a.target=e,t.event=a,n[a.type].apply(i,r)}finally{t.event=o}}},n}t.dispatch=function(){for(var e=new E,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=X(e);return e},E.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},t.event=null,t.requote=function(e){return e.replace(T,"\\$&")};var T=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,M=function(e,t){for(var n in t)e[n]=t[n]};function H(e){return M(e,O),e}var Y=function(e,t){return t.querySelector(e)},D=function(e,t){return t.querySelectorAll(e)},z=function(e,t){var n=e.matches||e[V(e,"matchesSelector")];return z=function(e,t){return n.call(e,t)},z(e,t)};"function"==typeof Sizzle&&(Y=function(e,t){return Sizzle(e,t)[0]||null},D=Sizzle,z=Sizzle.matchesSelector),t.selection=function(){return t.select(a.documentElement)};var O=t.selection.prototype=[];function J(e){return"function"==typeof e?e:function(){return Y(e,this)}}function j(e){return"function"==typeof e?e:function(){return D(e,this)}}O.select=function(e){var t,n,i,r,a=[];e=J(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(i=this[o]).parentNode;for(var l=-1,c=i.length;++l<c;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return H(a)},O.selectAll=function(e){var t,n,i=[];e=j(e);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],l=-1,c=s.length;++l<c;)(n=s[l])&&(i.push(t=r(e.call(n,n.__data__,l,a))),t.parentNode=n);return H(i)};var P="http://www.w3.org/1999/xhtml",K={svg:"http://www.w3.org/2000/svg",xhtml:P,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q(e,n){return e=t.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function $(e){return e.trim().replace(/\s+/g," ")}function ee(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function te(e){return(e+"").trim().split(/^|\s+/)}function ne(e,t){var n=(e=te(e).map(ie)).length;return"function"==typeof t?function(){for(var i=-1,r=t.apply(this,arguments);++i<n;)e[i](this,r)}:function(){for(var i=-1;++i<n;)e[i](this,t)}}function ie(e){var t=ee(e);return function(n,i){if(r=n.classList)return i?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";i?(t.lastIndex=0,t.test(r)||n.setAttribute("class",$(r+" "+e))):n.setAttribute("class",$(r.replace(t," ")))}}function re(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}:function(){this.style.setProperty(e,t,n)}}function ae(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function oe(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===P&&t.documentElement.namespaceURI===P?t.createElement(e):t.createElementNS(n,e)}}function se(){var e=this.parentNode;e&&e.removeChild(this)}function le(e){return{__data__:e}}function ce(e){return function(){return z(this,e)}}function ue(e){return arguments.length||(e=h),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function de(e,t){for(var n=0,i=e.length;n<i;n++)for(var r,a=e[n],o=0,s=a.length;o<s;o++)(r=a[o])&&t(r,o,n);return e}function ge(e){return M(e,he),e}t.ns={prefix:K,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),K.hasOwnProperty(n)?{space:K[n],local:e}:e}},O.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var i=this.node();return(e=t.ns.qualify(e)).local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}for(n in e)this.each(q(n,e[n]));return this}return this.each(q(e,n))},O.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),i=(e=te(e)).length,r=-1;if(t=n.classList){for(;++r<i;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");++r<i;)if(!ee(e[r]).test(t))return!1;return!0}for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))},O.style=function(e,t,n){var i=arguments.length;if(i<3){if("string"!=typeof e){for(n in i<2&&(t=""),e)this.each(re(n,e[n],t));return this}if(i<2){var r=this.node();return s(r).getComputedStyle(r,null).getPropertyValue(e)}n=""}return this.each(re(e,t,n))},O.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ae(t,e[t]));return this}return this.each(ae(e,t))},O.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},O.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},O.append=function(e){return e=oe(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},O.insert=function(e,t){return e=oe(e),t=J(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},O.remove=function(){return this.each(se)},O.data=function(e,t){var n,i,r=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(n=this[0]).length);++r<a;)(i=n[r])&&(e[r]=i.__data__);return e}function o(e,n){var i,r,a,o=e.length,u=n.length,d=Math.min(o,u),g=new Array(u),h=new Array(u),f=new Array(o);if(t){var p,m=new x,v=new Array(o);for(i=-1;++i<o;)(r=e[i])&&(m.has(p=t.call(r,r.__data__,i))?f[i]=r:m.set(p,r),v[i]=p);for(i=-1;++i<u;)(r=m.get(p=t.call(n,a=n[i],i)))?!0!==r&&(g[i]=r,r.__data__=a):h[i]=le(a),m.set(p,!0);for(i=-1;++i<o;)i in v&&!0!==m.get(v[i])&&(f[i]=e[i])}else{for(i=-1;++i<d;)r=e[i],a=n[i],r?(r.__data__=a,g[i]=r):h[i]=le(a);for(;i<u;++i)h[i]=le(n[i]);for(;i<o;++i)f[i]=e[i]}h.update=g,h.parentNode=g.parentNode=f.parentNode=e.parentNode,s.push(h),l.push(g),c.push(f)}var s=ge([]),l=H([]),c=H([]);if("function"==typeof e)for(;++r<a;)o(n=this[r],e.call(n,n.parentNode.__data__,r));else for(;++r<a;)o(n=this[r],e);return l.enter=function(){return s},l.exit=function(){return c},l},O.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},O.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=ce(e));for(var a=0,o=this.length;a<o;a++){r.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(i=n[s])&&e.call(i,i.__data__,s,a)&&t.push(i)}return H(r)},O.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},O.sort=function(e){e=ue.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},O.each=function(e){return de(this,(function(t,n,i){e.call(t,t.__data__,n,i)}))},O.call=function(e){var t=r(arguments);return e.apply(t[0]=this,t),this},O.empty=function(){return!this.node()},O.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],i=0,r=n.length;i<r;i++){var a=n[i];if(a)return a}return null},O.size=function(){var e=0;return de(this,(function(){++e})),e};var he=[];function fe(e){var t,n;return function(i,r,a){var o,s=e[a].update,l=s.length;for(a!=n&&(n=a,t=0),r>=t&&(t=r+1);!(o=s[t])&&++t<l;);return o}}function pe(e,n,i){var a="__on"+e,o=e.indexOf("."),s=ve;o>0&&(e=e.slice(0,o));var l=me.get(e);function c(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}return l&&(e=l,s=be),o?n?function(){var t=s(n,r(arguments));c.call(this),this.addEventListener(e,this[a]=t,t.$=i),t._=n}:c:n?k:function(){var n,i=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var r in this)if(n=r.match(i)){var a=this[r];this.removeEventListener(n[1],a,a.$),delete this[r]}}}t.selection.enter=ge,t.selection.enter.prototype=he,he.append=O.append,he.empty=O.empty,he.node=O.node,he.call=O.call,he.size=O.size,he.select=function(e){for(var t,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(t=[]),t.parentNode=r.parentNode;for(var c=-1,u=r.length;++c<u;)(a=r[c])?(t.push(i[c]=n=e.call(r.parentNode,a.__data__,c,s)),n.__data__=a.__data__):t.push(null)}return H(o)},he.insert=function(e,t){return arguments.length<2&&(t=fe(this)),O.insert.call(this,e,t)},t.select=function(e){var t;return"string"==typeof e?(t=[Y(e,a)]).parentNode=a.documentElement:(t=[e]).parentNode=o(e),H([t])},t.selectAll=function(e){var t;return"string"==typeof e?(t=r(D(e,a))).parentNode=a.documentElement:(t=r(e)).parentNode=null,H([t])},O.on=function(e,t,n){var i=arguments.length;if(i<3){if("string"!=typeof e){for(n in i<2&&(t=!1),e)this.each(pe(n,e[n],t));return this}if(i<2)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(pe(e,t,n))};var me=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ve(e,n){return function(i){var r=t.event;t.event=i,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=r}}}function be(e,t){var n=ve(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}a&&me.forEach((function(e){"on"+e in a&&me.remove(e)}));var ye,Ie=0;function Ce(e){var n=".dragsuppress-"+ ++Ie,i="click"+n,r=t.select(s(e)).on("touchmove"+n,N).on("dragstart"+n,N).on("selectstart"+n,N);if(null==ye&&(ye=!("onselectstart"in e)&&V(e.style,"userSelect")),ye){var a=o(e).style,l=a[ye];a[ye]="none"}return function(e){if(r.on(n,null),ye&&(a[ye]=l),e){var t=function(){r.on(i,null)};r.on(i,(function(){N(),t()}),!0),setTimeout(t,0)}}}t.mouse=function(e){return Be(e,W())};var xe=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Be(e,n){n.changedTouches&&(n=n.changedTouches[0]);var i=e.ownerSVGElement||e;if(i.createSVGPoint){var r=i.createSVGPoint();if(xe<0){var a=s(e);if(a.scrollX||a.scrollY){var o=(i=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xe=!(o.f||o.e),i.remove()}}return xe?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var l=e.getBoundingClientRect();return[n.clientX-l.left-e.clientLeft,n.clientY-l.top-e.clientTop]}function Ae(){return t.event.changedTouches[0].identifier}t.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=W().changedTouches),t)for(var i,r=0,a=t.length;r<a;++r)if((i=t[r]).identifier===n)return Be(e,i)},t.behavior.drag=function(){var e=_(a,"drag","dragstart","dragend"),n=null,i=o(k,t.mouse,s,"mousemove","mouseup"),r=o(Ae,t.touch,L,"touchmove","touchend");function a(){this.on("mousedown.drag",i).on("touchstart.drag",r)}function o(i,r,a,o,s){return function(){var l,c=this,u=t.event.target.correspondingElement||t.event.target,d=c.parentNode,g=e.of(c,arguments),h=0,f=i(),p=".drag"+(null==f?"":"-"+f),m=t.select(a(u)).on(o+p,y).on(s+p,I),v=Ce(u),b=r(d,f);function y(){var e,t,n=r(d,f);n&&(e=n[0]-b[0],t=n[1]-b[1],h|=e|t,b=n,g({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:e,dy:t}))}function I(){r(d,f)&&(m.on(o+p,null).on(s+p,null),v(h),g({type:"dragend"}))}l=n?[(l=n.apply(c,arguments)).x-b[0],l.y-b[1]]:[0,0],g({type:"dragstart"})}}return a.origin=function(e){return arguments.length?(n=e,a):n},t.rebind(a,e,"on")},t.touches=function(e,t){return arguments.length<2&&(t=W().touches),t?r(t).map((function(t){var n=Be(e,t);return n.identifier=t.identifier,n})):[]};var Fe=1e-6,Qe=Math.PI,Ue=2*Qe,we=Ue-Fe,Ge=Qe/2,Re=Qe/180,Le=180/Qe;function Se(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Ve(e){return e>1?Ge:e<-1?-Ge:Math.asin(e)}function Ze(e){return((e=Math.exp(e))+1/e)/2}var ke=Math.SQRT2;t.interpolateZoom=function(e,t){var n,i,r=e[0],a=e[1],o=e[2],s=t[0],l=t[1],c=t[2],u=s-r,d=l-a,g=u*u+d*d;if(g<1e-12)i=Math.log(c/o)/ke,n=function(e){return[r+e*u,a+e*d,o*Math.exp(ke*e*i)]};else{var h=Math.sqrt(g),f=(c*c-o*o+4*g)/(2*o*2*h),p=(c*c-o*o-4*g)/(2*c*2*h),m=Math.log(Math.sqrt(f*f+1)-f),v=Math.log(Math.sqrt(p*p+1)-p);i=(v-m)/ke,n=function(e){var t=e*i,n=Ze(m),s=o/(2*h)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(ke*t+m)-function(e){return((e=Math.exp(e))-1/e)/2}(m));return[r+s*u,a+s*d,o*n/Ze(ke*t+m)]}}return n.duration=1e3*i,n},t.behavior.zoom=function(){var e,n,i,r,o,l,c,u,d,g={x:0,y:0,k:1},h=[960,500],f=Ne,p=250,m=0,v="mousedown.zoom",b="mousemove.zoom",y="mouseup.zoom",I="touchstart.zoom",C=_(x,"zoomstart","zoom","zoomend");function x(e){e.on(v,L).on(Xe+".zoom",V).on("dblclick.zoom",Z).on(I,S)}function B(e){return[(e[0]-g.x)/g.k,(e[1]-g.y)/g.k]}function A(e){g.k=Math.max(f[0],Math.min(f[1],e))}function F(e,t){t=function(e){return[e[0]*g.k+g.x,e[1]*g.k+g.y]}(t),g.x+=e[0]-t[0],g.y+=e[1]-t[1]}function Q(e,i,r,a){e.__chart__={x:g.x,y:g.y,k:g.k},A(Math.pow(2,a)),F(n=i,r),e=t.select(e),p>0&&(e=e.transition().duration(p)),e.call(x.event)}function U(){c&&c.domain(l.range().map((function(e){return(e-g.x)/g.k})).map(l.invert)),d&&d.domain(u.range().map((function(e){return(e-g.y)/g.k})).map(u.invert))}function w(e){m++||e({type:"zoomstart"})}function G(e){U(),e({type:"zoom",scale:g.k,translate:[g.x,g.y]})}function R(e){--m||(e({type:"zoomend"}),n=null)}function L(){var e=this,n=C.of(e,arguments),i=0,r=t.select(s(e)).on(b,l).on(y,c),a=B(t.mouse(e)),o=Ce(e);function l(){i=1,F(t.mouse(e),a),G(n)}function c(){r.on(b,null).on(y,null),o(i),R(n)}qr.call(e),w(n)}function S(){var e,n=this,i=C.of(n,arguments),r={},a=0,s=".zoom-"+t.event.changedTouches[0].identifier,l="touchmove"+s,c="touchend"+s,u=[],d=t.select(n),h=Ce(n);function f(){var i=t.touches(n);return e=g.k,i.forEach((function(e){e.identifier in r&&(r[e.identifier]=B(e))})),i}function p(){var e=t.event.target;t.select(e).on(l,m).on(c,b),u.push(e);for(var i=t.event.changedTouches,s=0,d=i.length;s<d;++s)r[i[s].identifier]=null;var h=f(),p=Date.now();if(1===h.length){if(p-o<500){var v=h[0];Q(n,v,r[v.identifier],Math.floor(Math.log(g.k)/Math.LN2)+1),N()}o=p}else if(h.length>1){v=h[0];var y=h[1],I=v[0]-y[0],C=v[1]-y[1];a=I*I+C*C}}function m(){var s,l,c,u,d=t.touches(n);qr.call(n);for(var g=0,h=d.length;g<h;++g,u=null)if(c=d[g],u=r[c.identifier]){if(l)break;s=c,l=u}if(u){var f=(f=c[0]-s[0])*f+(f=c[1]-s[1])*f,p=a&&Math.sqrt(f/a);s=[(s[0]+c[0])/2,(s[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],A(p*e)}o=null,F(s,l),G(i)}function b(){if(t.event.touches.length){for(var e=t.event.changedTouches,n=0,a=e.length;n<a;++n)delete r[e[n].identifier];for(var o in r)return void f()}t.selectAll(u).on(s,null),d.on(v,L).on(I,S),h(),R(i)}p(),w(i),d.on(v,null).on(I,p)}function V(){var a=C.of(this,arguments);r?clearTimeout(r):(qr.call(this),e=B(n=i||t.mouse(this)),w(a)),r=setTimeout((function(){r=null,R(a)}),50),N(),A(Math.pow(2,.002*Ee())*g.k),F(n,e),G(a)}function Z(){var e=t.mouse(this),n=Math.log(g.k)/Math.LN2;Q(this,e,B(e),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Xe||(Xe="onwheel"in a?(Ee=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in a?(Ee=function(){return t.event.wheelDelta},"mousewheel"):(Ee=function(){return-t.event.detail},"MozMousePixelScroll")),x.event=function(e){e.each((function(){var e=C.of(this,arguments),i=g;ta?t.select(this).transition().each("start.zoom",(function(){g=this.__chart__||{x:0,y:0,k:1},w(e)})).tween("zoom:zoom",(function(){var r=h[0],a=h[1],o=n?n[0]:r/2,s=n?n[1]:a/2,l=t.interpolateZoom([(o-g.x)/g.k,(s-g.y)/g.k,r/g.k],[(o-i.x)/i.k,(s-i.y)/i.k,r/i.k]);return function(t){var n=l(t),i=r/n[2];this.__chart__=g={x:o-n[0]*i,y:s-n[1]*i,k:i},G(e)}})).each("interrupt.zoom",(function(){R(e)})).each("end.zoom",(function(){R(e)})):(this.__chart__=g,w(e),G(e),R(e))}))},x.translate=function(e){return arguments.length?(g={x:+e[0],y:+e[1],k:g.k},U(),x):[g.x,g.y]},x.scale=function(e){return arguments.length?(g={x:g.x,y:g.y,k:null},A(+e),U(),x):g.k},x.scaleExtent=function(e){return arguments.length?(f=null==e?Ne:[+e[0],+e[1]],x):f},x.center=function(e){return arguments.length?(i=e&&[+e[0],+e[1]],x):i},x.size=function(e){return arguments.length?(h=e&&[+e[0],+e[1]],x):h},x.duration=function(e){return arguments.length?(p=+e,x):p},x.x=function(e){return arguments.length?(c=e,l=e.copy(),g={x:0,y:0,k:1},x):c},x.y=function(e){return arguments.length?(d=e,u=e.copy(),g={x:0,y:0,k:1},x):d},t.rebind(x,C,"on")};var Ee,Xe,Ne=[0,1/0];function We(){}function _e(e,t,n){return this instanceof _e?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof _e?new _e(e.h,e.s,e.l):st(""+e,lt,_e):new _e(e,t,n)}t.color=We,We.prototype.toString=function(){return this.rgb()+""},t.hsl=_e;var Te=_e.prototype=new We;function Me(e,t,n){var i,r;function a(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?i+(r-i)*e/60:e<180?r:e<240?i+(r-i)*(240-e)/60:i}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,i=2*(n=n<0?0:n>1?1:n)-(r=n<=.5?n*(1+t):n+t-n*t),new nt(a(e+120),a(e),a(e-120))}function He(e,n,i){return this instanceof He?(this.h=+e,this.c=+n,void(this.l=+i)):arguments.length<2?e instanceof He?new He(e.h,e.c,e.l):qe(e instanceof ze?e.l:(e=ct((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new He(e,n,i)}Te.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new _e(this.h,this.s,this.l/e)},Te.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new _e(this.h,this.s,e*this.l)},Te.rgb=function(){return Me(this.h,this.s,this.l)},t.hcl=He;var Ye=He.prototype=new We;function De(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ze(n,Math.cos(e*=Re)*t,Math.sin(e)*t)}function ze(e,t,n){return this instanceof ze?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof ze?new ze(e.l,e.a,e.b):e instanceof He?De(e.h,e.c,e.l):ct((e=nt(e)).r,e.g,e.b):new ze(e,t,n)}Ye.brighter=function(e){return new He(this.h,this.c,Math.min(100,this.l+Oe*(arguments.length?e:1)))},Ye.darker=function(e){return new He(this.h,this.c,Math.max(0,this.l-Oe*(arguments.length?e:1)))},Ye.rgb=function(){return De(this.h,this.c,this.l).rgb()},t.lab=ze;var Oe=18,Je=.95047,je=1.08883,Pe=ze.prototype=new We;function Ke(e,t,n){var i=(e+16)/116,r=i+t/500,a=i-n/200;return new nt(tt(3.2404542*(r=$e(r)*Je)-1.5371385*(i=1*$e(i))-.4985314*(a=$e(a)*je)),tt(-.969266*r+1.8760108*i+.041556*a),tt(.0556434*r-.2040259*i+1.0572252*a))}function qe(e,t,n){return e>0?new He(Math.atan2(n,t)*Le,Math.sqrt(t*t+n*n),e):new He(NaN,NaN,e)}function $e(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function et(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function tt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function nt(e,t,n){return this instanceof nt?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof nt?new nt(e.r,e.g,e.b):st(""+e,nt,Me):new nt(e,t,n)}function it(e){return new nt(e>>16,e>>8&255,255&e)}function rt(e){return it(e)+""}Pe.brighter=function(e){return new ze(Math.min(100,this.l+Oe*(arguments.length?e:1)),this.a,this.b)},Pe.darker=function(e){return new ze(Math.max(0,this.l-Oe*(arguments.length?e:1)),this.a,this.b)},Pe.rgb=function(){return Ke(this.l,this.a,this.b)},t.rgb=nt;var at=nt.prototype=new We;function ot(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function st(e,t,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(dt(r[0]),dt(r[1]),dt(r[2]))}return(a=gt.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function lt(e,t,n){var i,r,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(r=l<.5?s/(o+a):s/(2-o-a),i=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,i*=60):(i=NaN,r=l>0&&l<1?0:i),new _e(i,r,l)}function ct(e,t,n){var i=et((.4124564*(e=ut(e))+.3575761*(t=ut(t))+.1804375*(n=ut(n)))/Je),r=et((.2126729*e+.7151522*t+.072175*n)/1);return ze(116*r-16,500*(i-r),200*(r-et((.0193339*e+.119192*t+.9503041*n)/je)))}function ut(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function dt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}at.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&t<r&&(t=r),n&&n<r&&(n=r),i&&i<r&&(i=r),new nt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,i/e))):new nt(r,r,r)},at.darker=function(e){return new nt((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},at.hsl=function(){return lt(this.r,this.g,this.b)},at.toString=function(){return"#"+ot(this.r)+ot(this.g)+ot(this.b)};var gt=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ht(e){return"function"==typeof e?e:function(){return e}}function ft(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),pt(t,n,e,i)}}function pt(e,n,i,a){var o={},s=t.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function d(){var e,t=c.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(c)||t>=200&&t<300||304===t){try{e=i.call(o,c)}catch(e){return void s.error.call(o,e)}s.load.call(o,e)}else s.error.call(o,c)}return self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(e)&&(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=d:c.onreadystatechange=function(){c.readyState>3&&d()},c.onprogress=function(e){var n=t.event;t.event=e;try{s.progress.call(o,c)}finally{t.event=n}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(n=null==e?null:e+"",o):n},o.responseType=function(e){return arguments.length?(u=e,o):u},o.response=function(e){return i=e,o},["get","post"].forEach((function(e){o[e]=function(){return o.send.apply(o,[e].concat(r(arguments)))}})),o.send=function(t,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),c.open(t,e,!0),null==n||"accept"in l||(l.accept=n+",*/*"),c.setRequestHeader)for(var a in l)c.setRequestHeader(a,l[a]);return null!=n&&c.overrideMimeType&&c.overrideMimeType(n),null!=u&&(c.responseType=u),null!=r&&o.on("error",r).on("load",(function(e){r(null,e)})),s.beforesend.call(o,c),c.send(null==i?null:i),o},o.abort=function(){return c.abort(),o},t.rebind(o,s,"on"),null==a?o:o.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(a))}gt.forEach((function(e,t){gt.set(e,it(t))})),t.functor=ht,t.xhr=ft(L),t.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),i=e.charCodeAt(0);function r(e,n,i){arguments.length<3&&(i=n,n=null);var r=pt(e,t,null==n?a:o(n),i);return r.row=function(e){return arguments.length?r.response(null==(n=e)?a:o(e)):n},r}function a(e){return r.parse(e.responseText)}function o(e){return function(t){return r.parse(t.responseText,e)}}function s(t){return t.map(l).join(e)}function l(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return r.parse=function(e,t){var n;return r.parseRows(e,(function(e,i){if(n)return n(e,i-1);var r=function(t){for(var n={},i=e.length,r=0;r<i;++r)n[e[r]]=t[r];return n};n=t?function(e,n){return t(r(e),n)}:r}))},r.parseRows=function(e,t){var n,r,a={},o={},s=[],l=e.length,c=0,u=0;function d(){if(c>=l)return o;if(r)return r=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return c=n+2,13===(s=e.charCodeAt(n+1))?(r=!0,10===e.charCodeAt(n+2)&&++c):10===s&&(r=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=e.charCodeAt(c++)))r=!0;else if(13===s)r=!0,10===e.charCodeAt(c)&&(++c,++u);else if(s!==i)continue;return e.slice(t,c-u)}return e.slice(t)}for(;(n=d())!==o;){for(var g=[];n!==a&&n!==o;)g.push(n),n=d();t&&null==(g=t(g,u++))||s.push(g)}return s},r.format=function(t){if(Array.isArray(t[0]))return r.formatRows(t);var n=new R,i=[];return t.forEach((function(e){for(var t in e)n.has(t)||i.push(n.add(t))})),[i.map(l).join(e)].concat(t.map((function(t){return i.map((function(e){return l(t[e])})).join(e)}))).join("\n")},r.formatRows=function(e){return e.map(s).join("\n")},r},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var mt,vt,bt,yt,It=this[V(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Ct(e,t,n){var i=arguments.length;i<2&&(t=0),i<3&&(n=Date.now());var r=n+t,a={c:e,t:r,n:null};return vt?vt.n=a:mt=a,vt=a,bt||(yt=clearTimeout(yt),bt=1,It(xt)),a}function xt(){var e=Bt(),t=At()-e;t>24?(isFinite(t)&&(clearTimeout(yt),yt=setTimeout(xt,t)),bt=0):(bt=1,It(xt))}function Bt(){for(var e=Date.now(),t=mt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function At(){for(var e,t=mt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:mt=t.n;return vt=e,n}function Ft(e){return e[0]}function Qt(e){return e[1]}function Ut(e){for(var t=e.length,n=[0,1],i=2,r=2;r<t;r++){for(;i>1&&Se(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function wt(e,t){return e[0]-t[0]||e[1]-t[1]}t.timer=function(){Ct.apply(this,arguments)},t.timer.flush=function(){Bt(),At()},t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},t.geom={},t.geom.hull=function(e){var t=Ft,n=Qt;if(arguments.length)return i(e);function i(e){if(e.length<3)return[];var i,r=ht(t),a=ht(n),o=e.length,s=[],l=[];for(i=0;i<o;i++)s.push([+r.call(this,e[i],i),+a.call(this,e[i],i),i]);for(s.sort(wt),i=0;i<o;i++)l.push([s[i][0],-s[i][1]]);var c=Ut(s),u=Ut(l),d=u[0]===c[0],g=u[u.length-1]===c[c.length-1],h=[];for(i=c.length-1;i>=0;--i)h.push(e[s[c[i]][2]]);for(i=+d;i<u.length-g;++i)h.push(e[s[u[i]][2]]);return h}return i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i},t.geom.polygon=function(e){return M(e,Gt),e};var Gt=t.geom.polygon.prototype=[];function Rt(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Lt(e,t,n,i){var r=e[0],a=n[0],o=t[0]-r,s=i[0]-a,l=e[1],c=n[1],u=t[1]-l,d=i[1]-c,g=(s*(l-c)-d*(r-a))/(d*o-s*u);return[r+g*o,l+g*u]}function St(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}Gt.area=function(){for(var e,t=-1,n=this.length,i=this[n-1],r=0;++t<n;)e=i,i=this[t],r+=e[1]*i[0]-e[0]*i[1];return.5*r},Gt.centroid=function(e){var t,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(e=-1/(6*this.area()));++i<r;)t=s,s=this[i],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},Gt.clip=function(e){for(var t,n,i,r,a,o,s=St(e),l=-1,c=this.length-St(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,r=this[l],a=t[(i=t.length-s)-1],n=-1;++n<i;)Rt(o=t[n],u,r)?(Rt(a,u,r)||e.push(Lt(a,o,u,r)),e.push(o)):Rt(a,u,r)&&e.push(Lt(a,o,u,r)),a=o;s&&e.push(e[0]),u=r}return e};var Vt,Zt,kt,Et,Xt,Nt=[],Wt=[];function _t(){on(this),this.edge=this.site=this.circle=null}function Tt(e){var t=Nt.pop()||new _t;return t.site=e,t}function Mt(e){Kt(e),kt.remove(e),Nt.push(e),on(e)}function Ht(e){var t=e.circle,n=t.x,i=t.cy,r={x:n,y:i},a=e.P,o=e.N,s=[e];Mt(e);for(var l=a;l.circle&&y(n-l.circle.x)<Fe&&y(i-l.circle.cy)<Fe;)a=l.P,s.unshift(l),Mt(l),l=a;s.unshift(l),Kt(l);for(var c=o;c.circle&&y(n-c.circle.x)<Fe&&y(i-c.circle.cy)<Fe;)o=c.N,s.push(c),Mt(c),c=o;s.push(c),Kt(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],nn(c.edge,l.site,c.site,r);l=s[0],(c=s[d-1]).edge=en(l.site,c.site,null,r),Pt(l),Pt(c)}function Yt(e){for(var t,n,i,r,a=e.x,o=e.y,s=kt._;s;)if((i=Dt(s,o)-a)>Fe)s=s.L;else{if(!((r=a-zt(s,o))>Fe)){i>-Fe?(t=s.P,n=s):r>-Fe?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Tt(e);if(kt.insert(t,l),t||n){if(t===n)return Kt(t),n=Tt(t.site),kt.insert(l,n),l.edge=n.edge=en(t.site,l.site),Pt(t),void Pt(n);if(n){Kt(t),Kt(n);var c=t.site,u=c.x,d=c.y,g=e.x-u,h=e.y-d,f=n.site,p=f.x-u,m=f.y-d,v=2*(g*m-h*p),b=g*g+h*h,y=p*p+m*m,I={x:(m*b-h*y)/v+u,y:(g*y-p*b)/v+d};nn(n.edge,c,f,I),l.edge=en(c,e,null,I),n.edge=en(e,f,null,I),Pt(t),Pt(n)}else l.edge=en(t.site,l.site)}}function Dt(e,t){var n=e.site,i=n.x,r=n.y,a=r-t;if(!a)return i;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,c=l-t;if(!c)return s;var u=s-i,d=1/a-1/c,g=u/c;return d?(-g+Math.sqrt(g*g-2*d*(u*u/(-2*c)-l+c/2+r-a/2)))/d+i:(i+s)/2}function zt(e,t){var n=e.N;if(n)return Dt(n,t);var i=e.site;return i.y===t?i.x:1/0}function Ot(e){this.site=e,this.edges=[]}function Jt(e,t){return t.angle-e.angle}function jt(){on(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pt(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,a=n.site;if(i!==a){var o=r.x,s=r.y,l=i.x-o,c=i.y-s,u=a.x-o,d=2*(l*(m=a.y-s)-c*u);if(!(d>=-1e-12)){var g=l*l+c*c,h=u*u+m*m,f=(m*g-c*h)/d,p=(l*h-u*g)/d,m=p+s,v=Wt.pop()||new jt;v.arc=e,v.site=r,v.x=f+o,v.y=m+Math.sqrt(f*f+p*p),v.cy=m,e.circle=v;for(var b=null,y=Xt._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}Xt.insert(b,v),b||(Et=v)}}}}function Kt(e){var t=e.circle;t&&(t.P||(Et=t.N),Xt.remove(t),Wt.push(t),on(t),e.circle=null)}function qt(e,t){var n=e.b;if(n)return!0;var i,r,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,g=u.x,h=u.y,f=d.x,p=d.y,m=(g+f)/2,v=(h+p)/2;if(p===h){if(m<o||m>=s)return;if(g>f){if(a){if(a.y>=c)return}else a={x:m,y:l};n={x:m,y:c}}else{if(a){if(a.y<l)return}else a={x:m,y:c};n={x:m,y:l}}}else if(r=v-(i=(g-f)/(p-h))*m,i<-1||i>1)if(g>f){if(a){if(a.y>=c)return}else a={x:(l-r)/i,y:l};n={x:(c-r)/i,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-r)/i,y:c};n={x:(l-r)/i,y:l}}else if(h<p){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return e.a=a,e.b=n,!0}function $t(e,t){this.l=e,this.r=t,this.a=this.b=null}function en(e,t,n,i){var r=new $t(e,t);return Vt.push(r),n&&nn(r,e,t,n),i&&nn(r,t,e,i),Zt[e.i].edges.push(new rn(r,e,t)),Zt[t.i].edges.push(new rn(r,t,e)),r}function tn(e,t,n){var i=new $t(e,null);return i.a=t,i.b=n,Vt.push(i),i}function nn(e,t,n,i){e.a||e.b?e.l===n?e.b=i:e.a=i:(e.a=i,e.l=t,e.r=n)}function rn(e,t,n){var i=e.a,r=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function an(){this._=null}function on(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function sn(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ln(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function cn(e){for(;e.L;)e=e.L;return e}function un(e,t){var n,i,r,a=e.sort(dn).pop();for(Vt=[],Zt=new Array(e.length),kt=new an,Xt=new an;;)if(r=Et,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))a.x===n&&a.y===i||(Zt[a.i]=new Ot(a),Yt(a),n=a.x,i=a.y),a=e.pop();else{if(!r)break;Ht(r.arc)}t&&(function(e){for(var t,n,i,r,a,o=Vt,s=(n=e[0][0],i=e[0][1],r=e[1][0],a=e[1][1],function(e){var t,o=e.a,s=e.b,l=o.x,c=o.y,u=0,d=1,g=s.x-l,h=s.y-c;if(t=n-l,g||!(t>0)){if(t/=g,g<0){if(t<u)return;t<d&&(d=t)}else if(g>0){if(t>d)return;t>u&&(u=t)}if(t=r-l,g||!(t<0)){if(t/=g,g<0){if(t>d)return;t>u&&(u=t)}else if(g>0){if(t<u)return;t<d&&(d=t)}if(t=i-c,h||!(t>0)){if(t/=h,h<0){if(t<u)return;t<d&&(d=t)}else if(h>0){if(t>d)return;t>u&&(u=t)}if(t=a-c,h||!(t<0)){if(t/=h,h<0){if(t>d)return;t>u&&(u=t)}else if(h>0){if(t<u)return;t<d&&(d=t)}return u>0&&(e.a={x:l+u*g,y:c+u*h}),d<1&&(e.b={x:l+d*g,y:c+d*h}),e}}}}}),l=o.length;l--;)(!qt(t=o[l],e)||!s(t)||y(t.a.x-t.b.x)<Fe&&y(t.a.y-t.b.y)<Fe)&&(t.a=t.b=null,o.splice(l,1))}(t),function(e){for(var t,n,i,r,a,o,s,l,c,u,d=e[0][0],g=e[1][0],h=e[0][1],f=e[1][1],p=Zt,m=p.length;m--;)if((a=p[m])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)i=(u=s[o].end()).x,r=u.y,t=(c=s[++o%l].start()).x,n=c.y,(y(i-t)>Fe||y(r-n)>Fe)&&(s.splice(o,0,new rn(tn(a.site,u,y(i-d)<Fe&&f-r>Fe?{x:d,y:y(t-d)<Fe?n:f}:y(r-f)<Fe&&g-i>Fe?{x:y(n-f)<Fe?t:g,y:f}:y(i-g)<Fe&&r-h>Fe?{x:g,y:y(t-g)<Fe?n:h}:y(r-h)<Fe&&i-d>Fe?{x:y(n-h)<Fe?t:d,y:h}:null),a.site,null)),++l)}(t));var o={cells:Zt,edges:Vt};return kt=Xt=Vt=Zt=null,o}function dn(e,t){return t.y-e.y||t.x-e.x}Ot.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Jt),t.length},rn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},an.prototype={insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=cn(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(sn(this,n),n=(e=n).U),n.C=!1,i.C=!0,ln(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(ln(this,n),n=(e=n).U),n.C=!1,i.C=!0,sn(this,i)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,a=e.L,o=e.R;if(n=a?o?cn(o):a:o,r?r.L===e?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=o,o.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,sn(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ln(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,sn(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,ln(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,sn(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,ln(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}},t.geom.voronoi=function(e){var t=Ft,n=Qt,i=t,r=n,a=gn;if(e)return o(e);function o(e){var t=new Array(e.length),n=a[0][0],i=a[0][1],r=a[1][0],o=a[1][1];return un(s(e),a).cells.forEach((function(a,s){var l=a.edges,c=a.site,u=t[s]=l.length?l.map((function(e){var t=e.start();return[t.x,t.y]})):c.x>=n&&c.x<=r&&c.y>=i&&c.y<=o?[[n,o],[r,o],[r,i],[n,i]]:[];u.point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(i(e,t)/Fe)*Fe,y:Math.round(r(e,t)/Fe)*Fe,i:t}}))}return o.links=function(e){return un(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},o.triangles=function(e){var t=[];return un(s(e)).cells.forEach((function(n,i){for(var r,a=n.site,o=n.edges.sort(Jt),s=-1,l=o.length,c=o[l-1].edge,u=c.l===a?c.r:c.l;++s<l;)r=u,u=(c=o[s].edge).l===a?c.r:c.l,i<r.i&&i<u.i&&hn(a,r,u)<0&&t.push([e[i],e[r.i],e[u.i]])})),t},o.x=function(e){return arguments.length?(i=ht(t=e),o):t},o.y=function(e){return arguments.length?(r=ht(n=e),o):n},o.clipExtent=function(e){return arguments.length?(a=null==e?gn:e,o):a===gn?null:a},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):a===gn?null:a&&a[1]},o};var gn=[[-1e6,-1e6],[1e6,1e6]];function hn(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function fn(e){return e.x}function pn(e){return e.y}function mn(e,t,n,i,r,a){if(!e(t,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),l=t.nodes;l[0]&&mn(e,l[0],n,i,o,s),l[1]&&mn(e,l[1],o,i,r,s),l[2]&&mn(e,l[2],n,s,o,a),l[3]&&mn(e,l[3],o,s,r,a)}}function vn(e,t,n,i,r,a,o){var s,l=1/0;return function e(c,u,d,g,h){if(!(u>a||d>o||g<i||h<r)){if(f=c.point){var f,p=t-c.x,m=n-c.y,v=p*p+m*m;if(v<l){var b=Math.sqrt(l=v);i=t-b,r=n-b,a=t+b,o=n+b,s=f}}for(var y=c.nodes,I=.5*(u+g),C=.5*(d+h),x=(n>=C)<<1|t>=I,B=x+4;x<B;++x)if(c=y[3&x])switch(3&x){case 0:e(c,u,d,I,C);break;case 1:e(c,I,d,g,C);break;case 2:e(c,u,C,I,h);break;case 3:e(c,I,C,g,h)}}}(e,i,r,a,o),s}function bn(e,n){e=t.rgb(e),n=t.rgb(n);var i=e.r,r=e.g,a=e.b,o=n.r-i,s=n.g-r,l=n.b-a;return function(e){return"#"+ot(Math.round(i+o*e))+ot(Math.round(r+s*e))+ot(Math.round(a+l*e))}}function yn(e,t){var n,i={},r={};for(n in e)n in t?i[n]=An(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}}function In(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cn(e,t){var n,i,r,a=xn.lastIndex=Bn.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=xn.exec(e))&&(i=Bn.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:In(n,i)})),a=Bn.lastIndex;return a<t.length&&(r=t.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,i=0;i<t;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(e,t,n,i,r){var a,o=Ft,s=Qt;if(a=arguments.length)return o=fn,s=pn,3===a&&(r=n,i=t,n=t=0),l(e);function l(e){var l,c,u,d,g,h,f,p,m,v=ht(o),b=ht(s);if(null!=t)h=t,f=n,p=i,m=r;else if(p=m=-(h=f=1/0),c=[],u=[],g=e.length,a)for(d=0;d<g;++d)(l=e[d]).x<h&&(h=l.x),l.y<f&&(f=l.y),l.x>p&&(p=l.x),l.y>m&&(m=l.y),c.push(l.x),u.push(l.y);else for(d=0;d<g;++d){var I=+v(l=e[d],d),C=+b(l,d);I<h&&(h=I),C<f&&(f=C),I>p&&(p=I),C>m&&(m=C),c.push(I),u.push(C)}var x=p-h,B=m-f;function A(e,t,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(y(l-n)+y(c-i)<.01)F(e,t,n,i,r,a,o,s);else{var u=e.point;e.x=e.y=e.point=null,F(e,u,l,c,r,a,o,s),F(e,t,n,i,r,a,o,s)}else e.x=n,e.y=i,e.point=t}else F(e,t,n,i,r,a,o,s)}function F(e,t,n,i,r,a,o,s){var l=.5*(r+o),c=.5*(a+s),u=n>=l,d=i>=c,g=d<<1|u;e.leaf=!1,u?r=l:o=l,d?a=c:s=c,A(e=e.nodes[g]||(e.nodes[g]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,i,r,a,o,s)}x>B?m=f+x:p=h+B;var Q={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){A(Q,e,+v(e,++d),+b(e,d),h,f,p,m)},visit:function(e){mn(e,Q,h,f,p,m)},find:function(e){return vn(Q,e[0],e[1],h,f,p,m)}};if(d=-1,null==t){for(;++d<g;)A(Q,e[d],c[d],u[d],h,f,p,m);--d}else e.forEach(Q.add);return c=u=e=l=null,Q}return l.x=function(e){return arguments.length?(o=e,l):o},l.y=function(e){return arguments.length?(s=e,l):s},l.extent=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),l):null==t?null:[[t,n],[i,r]]},l.size=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=n=0,i=+e[0],r=+e[1]),l):null==t?null:[i-t,r-n]},l},t.interpolateRgb=bn,t.interpolateObject=yn,t.interpolateNumber=In,t.interpolateString=Cn;var xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bn=new RegExp(xn.source,"g");function An(e,n){for(var i,r=t.interpolators.length;--r>=0&&!(i=t.interpolators[r](e,n)););return i}function Fn(e,t){var n,i=[],r=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)i.push(An(e[n],t[n]));for(;n<a;++n)r[n]=e[n];for(;n<o;++n)r[n]=t[n];return function(e){for(n=0;n<s;++n)r[n]=i[n](e);return r}}t.interpolate=An,t.interpolators=[function(e,t){var n=i(t);return("string"===n?gt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?bn:Cn:t instanceof We?bn:Array.isArray(t)?Fn:"object"===n&&isNaN(t)?yn:In)(e,t)}],t.interpolateArray=Fn;var Qn=function(){return L},Un=t.map({linear:Qn,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Sn},cubic:function(){return Vn},sin:function(){return kn},exp:function(){return En},circle:function(){return Xn},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/Ue*Math.asin(1/e):(e=1,n=t/4);return function(i){return 1+e*Math.pow(2,-10*i)*Math.sin((i-n)*Ue/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return Nn}}),wn=t.map({in:L,out:Rn,"in-out":Ln,"out-in":function(e){return Ln(Rn(e))}});function Gn(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Rn(e){return function(t){return 1-e(1-t)}}function Ln(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Sn(e){return e*e}function Vn(e){return e*e*e}function Zn(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function kn(e){return 1-Math.cos(e*Ge)}function En(e){return Math.pow(2,10*(e-1))}function Xn(e){return 1-Math.sqrt(1-e*e)}function Nn(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Wn(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function _n(e){var t=[e.a,e.b],n=[e.c,e.d],i=Mn(t),r=Tn(t,n),a=Mn(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Le,this.translate=[e.e,e.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*Le:0}function Tn(e,t){return e[0]*t[0]+e[1]*t[1]}function Mn(e){var t=Math.sqrt(Tn(e,e));return t&&(e[0]/=t,e[1]/=t),t}t.ease=function(e){var t=e.indexOf("-"),i=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return i=Un.get(i)||Qn,Gn((r=wn.get(r)||L)(i.apply(null,n.call(arguments,1))))},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var i=e.h,r=e.c,a=e.l,o=n.h-i,s=n.c-r,l=n.l-a;isNaN(s)&&(s=0,r=isNaN(r)?n.c:r);isNaN(o)?(o=0,i=isNaN(i)?n.h:i):o>180?o-=360:o<-180&&(o+=360);return function(e){return De(i+o*e,r+s*e,a+l*e)+""}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var i=e.h,r=e.s,a=e.l,o=n.h-i,s=n.s-r,l=n.l-a;isNaN(s)&&(s=0,r=isNaN(r)?n.s:r);isNaN(o)?(o=0,i=isNaN(i)?n.h:i):o>180?o-=360:o<-180&&(o+=360);return function(e){return Me(i+o*e,r+s*e,a+l*e)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var i=e.l,r=e.a,a=e.b,o=n.l-i,s=n.a-r,l=n.b-a;return function(e){return Ke(i+o*e,r+s*e,a+l*e)+""}},t.interpolateRound=Wn,t.transform=function(e){var n=a.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){if(null!=e){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new _n(t?t.matrix:Hn)})(e)},_n.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Hn={a:1,b:0,c:0,d:1,e:0,f:0};function Yn(e){return e.length?e.pop()+",":""}function Dn(e,n){var i=[],r=[];return e=t.transform(e),n=t.transform(n),function(e,t,n,i){if(e[0]!==t[0]||e[1]!==t[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:In(e[0],t[0])},{i:r-2,x:In(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,n.translate,i,r),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(Yn(n)+"rotate(",null,")")-2,x:In(e,t)})):t&&n.push(Yn(n)+"rotate("+t+")")}(e.rotate,n.rotate,i,r),function(e,t,n,i){e!==t?i.push({i:n.push(Yn(n)+"skewX(",null,")")-2,x:In(e,t)}):t&&n.push(Yn(n)+"skewX("+t+")")}(e.skew,n.skew,i,r),function(e,t,n,i){if(e[0]!==t[0]||e[1]!==t[1]){var r=n.push(Yn(n)+"scale(",null,",",null,")");i.push({i:r-4,x:In(e[0],t[0])},{i:r-2,x:In(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(Yn(n)+"scale("+t+")")}(e.scale,n.scale,i,r),e=n=null,function(e){for(var t,n=-1,a=r.length;++n<a;)i[(t=r[n]).i]=t.x(e);return i.join("")}}function zn(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function On(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Jn(e){for(var t=e.source,n=e.target,i=function(e,t){if(e===t)return e;var n=jn(e),i=jn(t),r=n.pop(),a=i.pop(),o=null;for(;r===a;)o=r,r=n.pop(),a=i.pop();return o}(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function jn(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Pn(e){e.fixed|=2}function Kn(e){e.fixed&=-7}function qn(e){e.fixed|=4,e.px=e.x,e.py=e.y}function $n(e){e.fixed&=-5}function ei(e,t,n){var i=0,r=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)null!=(a=o[l])&&(ei(a,t,n),e.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=t*n[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,r+=c*e.point.y}e.cx=i/e.charge,e.cy=r/e.charge}t.interpolateTransform=Dn,t.layout={},t.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(Jn(e[n]));return t}},t.layout.chord=function(){var e,n,i,r,a,o,s,l={},c=0;function u(){var l,u,g,h,f,p={},m=[],v=t.range(r),b=[];for(e=[],n=[],l=0,h=-1;++h<r;){for(u=0,f=-1;++f<r;)u+=i[h][f];m.push(u),b.push(t.range(r)),l+=u}for(a&&v.sort((function(e,t){return a(m[e],m[t])})),o&&b.forEach((function(e,t){e.sort((function(e,n){return o(i[t][e],i[t][n])}))})),l=(Ue-c*r)/l,u=0,h=-1;++h<r;){for(g=u,f=-1;++f<r;){var y=v[h],I=b[y][f],C=i[y][I],x=u,B=u+=C*l;p[y+"-"+I]={index:y,subindex:I,startAngle:x,endAngle:B,value:C}}n[y]={index:y,startAngle:g,endAngle:u,value:m[y]},u+=c}for(h=-1;++h<r;)for(f=h-1;++f<r;){var A=p[h+"-"+f],F=p[f+"-"+h];(A.value||F.value)&&e.push(A.value<F.value?{source:F,target:A}:{source:A,target:F})}s&&d()}function d(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return l.matrix=function(t){return arguments.length?(r=(i=t)&&i.length,e=n=null,l):i},l.padding=function(t){return arguments.length?(c=t,e=n=null,l):c},l.sortGroups=function(t){return arguments.length?(a=t,e=n=null,l):a},l.sortSubgroups=function(t){return arguments.length?(o=t,e=null,l):o},l.sortChords=function(t){return arguments.length?(s=t,e&&d(),l):s},l.chords=function(){return e||u(),e},l.groups=function(){return n||u(),n},l},t.layout.force=function(){var e,n,i,r,a,o,s={},l=t.dispatch("start","tick","end"),c=[1,1],u=.9,d=ti,g=ni,h=-30,f=ii,p=.1,m=.64,v=[],b=[];function y(e){return function(t,n,i,r){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=r-n,l=a*a+o*o;if(s*s/m<l){if(l<f){var c=t.charge/l;e.px-=a*c,e.py-=o*c}return!0}if(t.point&&l&&l<f){c=t.pointCharge/l;e.px-=a*c,e.py-=o*c}}return!t.charge}}function I(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((i*=.99)<.005)return e=null,l.end({type:"end",alpha:i=0}),!0;var n,s,d,g,f,m,I,C,x,B=v.length,A=b.length;for(s=0;s<A;++s)g=(d=b[s]).source,(m=(C=(f=d.target).x-g.x)*C+(x=f.y-g.y)*x)&&(C*=m=i*a[s]*((m=Math.sqrt(m))-r[s])/m,x*=m,f.x-=C*(I=g.weight+f.weight?g.weight/(g.weight+f.weight):.5),f.y-=x*I,g.x+=C*(I=1-I),g.y+=x*I);if((I=i*p)&&(C=c[0]/2,x=c[1]/2,s=-1,I))for(;++s<B;)(d=v[s]).x+=(C-d.x)*I,d.y+=(x-d.y)*I;if(h)for(ei(n=t.geom.quadtree(v),i,o),s=-1;++s<B;)(d=v[s]).fixed||n.visit(y(d));for(s=-1;++s<B;)(d=v[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);l.tick({type:"tick",alpha:i})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(b=e,s):b},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(g="function"==typeof e?e:+e,s):g},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.chargeDistance=function(e){return arguments.length?(f=e*e,s):Math.sqrt(f)},s.gravity=function(e){return arguments.length?(p=+e,s):p},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:i=0})):t>0&&(l.start({type:"start",alpha:i=t}),e=Ct(s.tick)),s):i},s.start=function(){var e,t,n,i=v.length,l=b.length,u=c[0],f=c[1];for(e=0;e<i;++e)(n=v[e]).index=e,n.weight=0;for(e=0;e<l;++e)"number"==typeof(n=b[e]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<i;++e)n=v[e],isNaN(n.x)&&(n.x=p("x",u)),isNaN(n.y)&&(n.y=p("y",f)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof d)for(e=0;e<l;++e)r[e]=+d.call(this,b[e],e);else for(e=0;e<l;++e)r[e]=d;if(a=[],"function"==typeof g)for(e=0;e<l;++e)a[e]=+g.call(this,b[e],e);else for(e=0;e<l;++e)a[e]=g;if(o=[],"function"==typeof h)for(e=0;e<i;++e)o[e]=+h.call(this,v[e],e);else for(e=0;e<i;++e)o[e]=h;function p(n,r){if(!t){for(t=new Array(i),c=0;c<i;++c)t[c]=[];for(c=0;c<l;++c){var a=b[c];t[a.source.index].push(a.target),t[a.target.index].push(a.source)}}for(var o,s=t[e],c=-1,u=s.length;++c<u;)if(!isNaN(o=s[c][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=t.behavior.drag().origin(L).on("dragstart.force",Pn).on("drag.force",I).on("dragend.force",Kn)),!arguments.length)return n;this.on("mouseover.force",qn).on("mouseout.force",$n).call(n)},t.rebind(s,l,"on")};var ti=20,ni=1,ii=1/0;function ri(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=ui,e}function ai(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(r=e.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function oi(e,t){for(var n=[e],i=[];null!=(e=n.pop());)if(i.push(e),(a=e.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(e=i.pop());)t(e)}function si(e){return e.children}function li(e){return e.value}function ci(e,t){return t.value-e.value}function ui(e){return t.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}t.layout.hierarchy=function(){var e=ci,t=si,n=li;function i(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(c=t.call(i,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;n&&(a.value=0),a.children=c}else n&&(a.value=+n.call(i,a,a.depth)||0),delete a.children;return oi(r,(function(t){var i,r;e&&(i=t.children)&&i.sort(e),n&&(r=t.parent)&&(r.value+=t.value)})),s}return i.sort=function(t){return arguments.length?(e=t,i):e},i.children=function(e){return arguments.length?(t=e,i):t},i.value=function(e){return arguments.length?(n=e,i):n},i.revalue=function(e){return n&&(ai(e,(function(e){e.children&&(e.value=0)})),oi(e,(function(e){var t;e.children||(e.value=+n.call(i,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},i},t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function i(e,t,n,r){var a=e.children;if(e.x=t,e.y=e.depth*r,e.dx=n,e.dy=r,a&&(o=a.length)){var o,s,l,c=-1;for(n=e.value?n/e.value:0;++c<o;)i(s=a[c],t,l=s.value*n,r),t+=l}}function r(e){var t=e.children,n=0;if(t&&(i=t.length))for(var i,a=-1;++a<i;)n=Math.max(n,r(t[a]));return 1+n}function a(t,a){var o=e.call(this,t,a);return i(o[0],0,n[0],n[1]/r(o[0])),o}return a.size=function(e){return arguments.length?(n=e,a):n},ri(a,e)},t.layout.pie=function(){var e=Number,n=di,i=0,r=Ue,a=0;function o(s){var l,c=s.length,u=s.map((function(t,n){return+e.call(o,t,n)})),d=+("function"==typeof i?i.apply(this,arguments):i),g=("function"==typeof r?r.apply(this,arguments):r)-d,h=Math.min(Math.abs(g)/c,+("function"==typeof a?a.apply(this,arguments):a)),f=h*(g<0?-1:1),p=t.sum(u),m=p?(g-c*f)/p:0,v=t.range(c),b=[];return null!=n&&v.sort(n===di?function(e,t){return u[t]-u[e]}:function(e,t){return n(s[e],s[t])}),v.forEach((function(e){b[e]={data:s[e],value:l=u[e],startAngle:d,endAngle:d+=l*m+f,padAngle:h}})),b}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(n=e,o):n},o.startAngle=function(e){return arguments.length?(i=e,o):i},o.endAngle=function(e){return arguments.length?(r=e,o):r},o.padAngle=function(e){return arguments.length?(a=e,o):a},o};var di={};function gi(e){return e.x}function hi(e){return e.y}function fi(e,t,n){e.y0=t,e.y=n}t.layout.stack=function(){var e=L,n=vi,i=bi,r=fi,a=gi,o=hi;function s(l,c){if(!(h=l.length))return l;var u=l.map((function(t,n){return e.call(s,t,n)})),d=u.map((function(e){return e.map((function(e,t){return[a.call(s,e,t),o.call(s,e,t)]}))})),g=n.call(s,d,c);u=t.permute(u,g),d=t.permute(d,g);var h,f,p,m,v=i.call(s,d,c),b=u[0].length;for(p=0;p<b;++p)for(r.call(s,u[0][p],m=v[p],d[0][p][1]),f=1;f<h;++f)r.call(s,u[f][p],m+=d[f-1][p][1],d[f][p][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(n="function"==typeof e?e:pi.get(e)||vi,s):n},s.offset=function(e){return arguments.length?(i="function"==typeof e?e:mi.get(e)||bi,s):i},s.x=function(e){return arguments.length?(a=e,s):a},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(r=e,s):r},s};var pi=t.map({"inside-out":function(e){var n,i,r=e.length,a=e.map(yi),o=e.map(Ii),s=t.range(r).sort((function(e,t){return a[e]-a[t]})),l=0,c=0,u=[],d=[];for(n=0;n<r;++n)i=s[n],l<c?(l+=o[i],u.push(i)):(c+=o[i],d.push(i));return d.reverse().concat(u)},reverse:function(e){return t.range(e.length).reverse()},default:vi}),mi=t.map({silhouette:function(e){var t,n,i,r=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(t=0,i=0;t<r;t++)i+=e[t][n][1];i>s&&(s=i),o.push(i)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,i,r,a,o,s,l,c,u=e.length,d=e[0],g=d.length,h=[];for(h[0]=l=c=0,n=1;n<g;++n){for(t=0,r=0;t<u;++t)r+=e[t][n][1];for(t=0,a=0,s=d[n][0]-d[n-1][0];t<u;++t){for(i=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);i<t;++i)o+=(e[i][n][1]-e[i][n-1][1])/s;a+=o*e[t][n][1]}h[n]=l-=r?a/r*s:0,l<c&&(c=l)}for(n=0;n<g;++n)h[n]-=c;return h},expand:function(e){var t,n,i,r=e.length,a=e[0].length,o=1/r,s=[];for(n=0;n<a;++n){for(t=0,i=0;t<r;t++)i+=e[t][n][1];if(i)for(t=0;t<r;t++)e[t][n][1]/=i;else for(t=0;t<r;t++)e[t][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:bi});function vi(e){return t.range(e.length)}function bi(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function yi(e){for(var t,n=1,i=0,r=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function Ii(e){return e.reduce(Ci,0)}function Ci(e,t){return e+t[1]}function xi(e,t){return Bi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Bi(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,a=[];++n<=t;)a[n]=r*n+i;return a}function Ai(e){return[t.min(e),t.max(e)]}function Fi(e,t){return e.value-t.value}function Qi(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ui(e,t){e._pack_next=t,t._pack_prev=e}function wi(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+i*i}function Gi(e){if((t=e.children)&&(l=t.length)){var t,n,i,r,a,o,s,l,c=1/0,u=-1/0,d=1/0,g=-1/0;if(t.forEach(Ri),(n=t[0]).x=-n.r,n.y=0,y(n),l>1&&((i=t[1]).x=i.r,i.y=0,y(i),l>2))for(Vi(n,i,r=t[2]),y(r),Qi(n,r),n._pack_prev=r,Qi(r,i),i=n._pack_next,a=3;a<l;a++){Vi(n,i,r=t[a]);var h=0,f=1,p=1;for(o=i._pack_next;o!==i;o=o._pack_next,f++)if(wi(o,r)){h=1;break}if(1==h)for(s=n._pack_prev;s!==o._pack_prev&&!wi(s,r);s=s._pack_prev,p++);h?(f<p||f==p&&i.r<n.r?Ui(n,i=o):Ui(n=s,i),a--):(Qi(n,r),i=r,y(r))}var m=(c+u)/2,v=(d+g)/2,b=0;for(a=0;a<l;a++)(r=t[a]).x-=m,r.y-=v,b=Math.max(b,r.r+Math.sqrt(r.x*r.x+r.y*r.y));e.r=b,t.forEach(Li)}function y(e){c=Math.min(e.x-e.r,c),u=Math.max(e.x+e.r,u),d=Math.min(e.y-e.r,d),g=Math.max(e.y+e.r,g)}}function Ri(e){e._pack_next=e._pack_prev=e}function Li(e){delete e._pack_next,delete e._pack_prev}function Si(e,t,n,i){var r=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,r)for(var a=-1,o=r.length;++a<o;)Si(r[a],t,n,i)}function Vi(e,t,n){var i=e.r+n.r,r=t.x-e.x,a=t.y-e.y;if(i&&(r||a)){var o=t.r+n.r,s=r*r+a*a,l=.5+((i*=i)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=e.x+l*r+c*a,n.y=e.y+l*a-c*r}else n.x=e.x+i,n.y=e.y}function Zi(e,t){return e.parent==t.parent?1:2}function ki(e){var t=e.children;return t.length?t[0]:e.t}function Ei(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Xi(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Ni(e,t,n){return e.a.parent===t.parent?e.a:n}function Wi(e){var t=e.children;return t&&t.length?Wi(t[0]):e}function _i(e){var t,n=e.children;return n&&(t=n.length)?_i(n[t-1]):e}function Ti(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Mi(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return r<0&&(n+=r/2,r=0),a<0&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Hi(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Yi(e){return e.rangeExtent?e.rangeExtent():Hi(e.range())}function Di(e,t,n,i){var r=n(e[0],e[1]),a=i(t[0],t[1]);return function(e){return a(r(e))}}function zi(e,t){var n,i=0,r=e.length-1,a=e[i],o=e[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),e[i]=t.floor(a),e[r]=t.ceil(o),e}function Oi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Ji}t.layout.histogram=function(){var e=!0,n=Number,i=Ai,r=xi;function a(a,o){for(var s,l,c=[],u=a.map(n,this),d=i.call(this,u,o),g=r.call(this,d,u,o),h=(o=-1,u.length),f=g.length-1,p=e?1:1/h;++o<f;)(s=c[o]=[]).dx=g[o+1]-(s.x=g[o]),s.y=0;if(f>0)for(o=-1;++o<h;)(l=u[o])>=d[0]&&l<=d[1]&&((s=c[t.bisect(g,l,1,f)-1]).y+=p,s.push(a[o]));return c}return a.value=function(e){return arguments.length?(n=e,a):n},a.range=function(e){return arguments.length?(i=ht(e),a):i},a.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return Bi(t,e)}:ht(e),a):r},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a},t.layout.pack=function(){var e,n=t.layout.hierarchy().sort(Fi),i=0,r=[1,1];function a(t,a){var o=n.call(this,t,a),s=o[0],l=r[0],c=r[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,oi(s,(function(e){e.r=+u(e.value)})),oi(s,Gi),i){var d=i*(e?1:Math.max(2*s.r/l,2*s.r/c))/2;oi(s,(function(e){e.r+=d})),oi(s,Gi),oi(s,(function(e){e.r-=d}))}return Si(s,l/2,c/2,e?1:1/Math.max(2*s.r/l,2*s.r/c)),o}return a.size=function(e){return arguments.length?(r=e,a):r},a.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,a):e},a.padding=function(e){return arguments.length?(i=+e,a):i},ri(a,n)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=Zi,i=[1,1],r=null;function a(t,a){var c=e.call(this,t,a),u=c[0],d=function(e){var t,n={A:null,children:[e]},i=[n];for(;null!=(t=i.pop());)for(var r,a=t.children,o=0,s=a.length;o<s;++o)i.push((a[o]=r={_:a[o],parent:t,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}(u);if(oi(d,o),d.parent.m=-d.z,ai(d,s),r)ai(u,l);else{var g=u,h=u,f=u;ai(u,(function(e){e.x<g.x&&(g=e),e.x>h.x&&(h=e),e.depth>f.depth&&(f=e)}));var p=n(g,h)/2-g.x,m=i[0]/(h.x+n(h,g)/2+p),v=i[1]/(f.depth||1);ai(u,(function(e){e.x=(e.x+p)*m,e.y=e.depth*v}))}return c}function o(e){var t=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(t.length){!function(e){var t,n=0,i=0,r=e.children,a=r.length;for(;--a>=0;)(t=r[a]).z+=n,t.m+=n,n+=t.s+(i+=t.c)}(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+n(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+n(e._,r._));e.parent.A=function(e,t,i){if(t){for(var r,a=e,o=e,s=t,l=a.parent.children[0],c=a.m,u=o.m,d=s.m,g=l.m;s=Ei(s),a=ki(a),s&&a;)l=ki(l),(o=Ei(o)).a=e,(r=s.z+d-a.z-c+n(s._,a._))>0&&(Xi(Ni(s,e,i),e,r),c+=r,u+=r),d+=s.m,c+=a.m,g+=l.m,u+=o.m;s&&!Ei(o)&&(o.t=s,o.m+=d-u),a&&!ki(l)&&(l.t=a,l.m+=c-g,i=e)}return i}(e,r,e.parent.A||i[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=i[0],e.y=e.depth*i[1]}return a.separation=function(e){return arguments.length?(n=e,a):n},a.size=function(e){return arguments.length?(r=null==(i=e)?l:null,a):r?null:i},a.nodeSize=function(e){return arguments.length?(r=null==(i=e)?null:l,a):r?i:null},ri(a,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=Zi,i=[1,1],r=!1;function a(a,o){var s,l=e.call(this,a,o),c=l[0],u=0;oi(c,(function(e){var i=e.children;i&&i.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(i),e.y=function(e){return 1+t.max(e,(function(e){return e.y}))}(i)):(e.x=s?u+=n(e,s):0,e.y=0,s=e)}));var d=Wi(c),g=_i(c),h=d.x-n(d,g)/2,f=g.x+n(g,d)/2;return oi(c,r?function(e){e.x=(e.x-c.x)*i[0],e.y=(c.y-e.y)*i[1]}:function(e){e.x=(e.x-h)/(f-h)*i[0],e.y=(1-(c.y?e.y/c.y:1))*i[1]}),l}return a.separation=function(e){return arguments.length?(n=e,a):n},a.size=function(e){return arguments.length?(r=null==(i=e),a):r?null:i},a.nodeSize=function(e){return arguments.length?(r=null!=(i=e),a):r?i:null},ri(a,e)},t.layout.treemap=function(){var e,n=t.layout.hierarchy(),r=Math.round,a=[1,1],o=null,s=Ti,l=!1,c="squarify",u=.5*(1+Math.sqrt(5));function d(e,t){for(var n,i,r=-1,a=e.length;++r<a;)i=(n=e[r]).value*(t<0?0:t),n.area=isNaN(i)||i<=0?0:i}function g(e){var t=e.children;if(t&&t.length){var n,i,r,a=s(e),o=[],l=t.slice(),u=1/0,h="slice"===c?a.dx:"dice"===c?a.dy:"slice-dice"===c?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(d(l,a.dx*a.dy/e.value),o.area=0;(r=l.length)>0;)o.push(n=l[r-1]),o.area+=n.area,"squarify"!==c||(i=f(o,h))<=u?(l.pop(),u=i):(o.area-=o.pop().area,p(o,h,a,!1),h=Math.min(a.dx,a.dy),o.length=o.area=0,u=1/0);o.length&&(p(o,h,a,!0),o.length=o.area=0),t.forEach(g)}}function h(e){var t=e.children;if(t&&t.length){var n,i=s(e),r=t.slice(),a=[];for(d(r,i.dx*i.dy/e.value),a.area=0;n=r.pop();)a.push(n),a.area+=n.area,null!=n.z&&(p(a,n.z?i.dx:i.dy,i,!r.length),a.length=a.area=0);t.forEach(h)}}function f(e,t){for(var n,i=e.area,r=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<a&&(a=n),n>r&&(r=n));return t*=t,(i*=i)?Math.max(t*r*u/i,i/(t*a*u)):1/0}function p(e,t,n,i){var a,o=-1,s=e.length,l=n.x,c=n.y,u=t?r(e.area/t):0;if(t==n.dx){for((i||u>n.dy)&&(u=n.dy);++o<s;)(a=e[o]).x=l,a.y=c,a.dy=u,l+=a.dx=Math.min(n.x+n.dx-l,u?r(a.area/u):0);a.z=!0,a.dx+=n.x+n.dx-l,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++o<s;)(a=e[o]).x=l,a.y=c,a.dx=u,c+=a.dy=Math.min(n.y+n.dy-c,u?r(a.area/u):0);a.z=!1,a.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function m(t){var i=e||n(t),r=i[0];return r.x=r.y=0,r.value?(r.dx=a[0],r.dy=a[1]):r.dx=r.dy=0,e&&n.revalue(r),d([r],r.dx*r.dy/r.value),(e?h:g)(r),l&&(e=i),i}return m.size=function(e){return arguments.length?(a=e,m):a},m.padding=function(e){if(!arguments.length)return o;function t(t){var n=e.call(m,t,t.depth);return null==n?Ti(t):Mi(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Mi(t,e)}var r;return s=null==(o=e)?Ti:"function"===(r=i(e))?t:"number"===r?(e=[e,e,e,e],n):n,m},m.round=function(e){return arguments.length?(r=e?Math.round:Number,m):r!=Number},m.sticky=function(t){return arguments.length?(l=t,e=null,m):l},m.ratio=function(e){return arguments.length?(u=e,m):u},m.mode=function(e){return arguments.length?(c=e+"",m):c},ri(m,n)},t.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,i,r;do{r=(n=2*Math.random()-1)*n+(i=2*Math.random()-1)*i}while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},t.scale={};var Ji={floor:L,ceil:L};function ji(e,n,i,r){var a=[],o=[],s=0,l=Math.min(e.length,n.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<=l;)a.push(i(e[s-1],e[s])),o.push(r(n[s-1],n[s]));return function(n){var i=t.bisect(e,n,1,l)-1;return o[i](a[i](n))}}function Pi(e,t,n,i){var r,a;function o(){var o=Math.min(e.length,t.length)>2?ji:Di,l=i?On:zn;return r=o(e,t,l,n),a=o(t,e,l,An),s}function s(e){return r(e)}return s.invert=function(e){return a(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},s.range=function(e){return arguments.length?(t=e,o()):t},s.rangeRound=function(e){return s.range(e).interpolate(Wn)},s.clamp=function(e){return arguments.length?(i=e,o()):i},s.interpolate=function(e){return arguments.length?(n=e,o()):n},s.ticks=function(t){return er(e,t)},s.tickFormat=function(t,n){return d3_scale_linearTickFormat(e,t,n)},s.nice=function(t){return qi(e,t),o()},s.copy=function(){return Pi(e,t,n,i)},o()}function Ki(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function qi(e,t){return zi(e,Oi($i(e,t)[2])),zi(e,Oi($i(e,t)[2])),e}function $i(e,t){null==t&&(t=10);var n=Hi(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),a=t/i*r;return a<=.15?r*=10:a<=.35?r*=5:a<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function er(e,n){return t.range.apply(t,$i(e,n))}function tr(e,t,n,i){function r(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(r(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((i=t.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(t=+n,e.domain(i.map(r)),o):t},o.nice=function(){var t=zi(i.map(r),n?Math:nr);return e.domain(t),i=t.map(a),o},o.ticks=function(){var e=Hi(i),o=[],s=e[0],l=e[1],c=Math.floor(r(s)),u=Math.ceil(r(l)),d=t%1?2:t;if(isFinite(u-c)){if(n){for(;c<u;c++)for(var g=1;g<d;g++)o.push(a(c)*g);o.push(a(c))}else for(o.push(a(c));c++<u;)for(g=d-1;g>0;g--)o.push(a(c)*g);for(c=0;o[c]<s;c++);for(u=o.length;o[u-1]>l;u--);o=o.slice(c,u)}return o},o.copy=function(){return tr(e.copy(),t,n,i)},Ki(o,e)}t.scale.linear=function(){return Pi([0,1],[0,1],An,!1)},t.scale.log=function(){return tr(t.scale.linear().domain([0,1]),10,!0,[1,10])};var nr={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function ir(e,t,n){var i=rr(t),r=rr(1/t);function a(t){return e(i(t))}return a.invert=function(t){return r(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),a):n},a.ticks=function(e){return er(n,e)},a.tickFormat=function(e,t){return d3_scale_linearTickFormat(n,e,t)},a.nice=function(e){return a.domain(qi(n,e))},a.exponent=function(o){return arguments.length?(i=rr(t=o),r=rr(1/t),e.domain(n.map(i)),a):t},a.copy=function(){return ir(e.copy(),t,n)},Ki(a,e)}function rr(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ar(e,n){var i,r,a;function o(t){return r[((i.get(t)||("range"===n.t?i.set(t,e.push(t)):NaN))-1)%r.length]}function s(n,i){return t.range(e.length).map((function(e){return n+i*e}))}return o.domain=function(t){if(!arguments.length)return e;e=[],i=new x;for(var r,a=-1,s=t.length;++a<s;)i.has(r=t[a])||i.set(r,e.push(r));return o[n.t].apply(o,n.a)},o.range=function(e){return arguments.length?(r=e,a=0,n={t:"range",a:arguments},o):r},o.rangePoints=function(t,i){arguments.length<2&&(i=0);var l=t[0],c=t[1],u=e.length<2?(l=(l+c)/2,0):(c-l)/(e.length-1+i);return r=s(l+u*i/2,u),a=0,n={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(t,i){arguments.length<2&&(i=0);var l=t[0],c=t[1],u=e.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(e.length-1+i)|0;return r=s(l+Math.round(u*i/2+(c-l-(e.length-1+i)*u)/2),u),a=0,n={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(t,i,l){arguments.length<2&&(i=0),arguments.length<3&&(l=i);var c=t[1]<t[0],u=t[c-0],d=t[1-c],g=(d-u)/(e.length-i+2*l);return r=s(u+g*l,g),c&&r.reverse(),a=g*(1-i),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(t,i,l){arguments.length<2&&(i=0),arguments.length<3&&(l=i);var c=t[1]<t[0],u=t[c-0],d=t[1-c],g=Math.floor((d-u)/(e.length-i+2*l));return r=s(u+Math.round((d-u-(e.length-i)*g)/2),g),c&&r.reverse(),a=Math.round(g*(1-i)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return a},o.rangeExtent=function(){return Hi(n.a[0])},o.copy=function(){return ar(e,n)},o.domain(e)}t.scale.pow=function(){return ir(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return ar([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(or)},t.scale.category20=function(){return t.scale.ordinal().range(sr)},t.scale.category20b=function(){return t.scale.ordinal().range(lr)},t.scale.category20c=function(){return t.scale.ordinal().range(cr)};var or=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(rt),sr=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(rt),lr=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(rt),cr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(rt);function ur(e,n){var i;function r(){var r=0,o=n.length;for(i=[];++r<o;)i[r-1]=t.quantile(e,r/o);return a}function a(e){if(!isNaN(e=+e))return n[t.bisect(i,e)]}return a.domain=function(t){return arguments.length?(e=t.map(f).filter(p).sort(h),r()):e},a.range=function(e){return arguments.length?(n=e,r()):n},a.quantiles=function(){return i},a.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:e[0],t<i.length?i[t]:e[e.length-1]]},a.copy=function(){return ur(e,n)},r()}function dr(e,t,n){var i,r;function a(t){return n[Math.max(0,Math.min(r,Math.floor(i*(t-e))))]}function o(){return i=n.length/(t-e),r=n.length-1,a}return a.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},a.range=function(e){return arguments.length?(n=e,o()):n},a.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/i+e,t+1/i]},a.copy=function(){return dr(e,t,n)},o()}function gr(e,n){function i(i){if(i<=i)return n[t.bisect(e,i)]}return i.domain=function(t){return arguments.length?(e=t,i):e},i.range=function(e){return arguments.length?(n=e,i):n},i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},i.copy=function(){return gr(e,n)},i}function hr(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return er(e,t)},t.tickFormat=function(t,n){return d3_scale_linearTickFormat(e,t,n)},t.copy=function(){return hr(e)},t}function fr(){return 0}t.scale.quantile=function(){return ur([],[])},t.scale.quantize=function(){return dr(0,1,[0,1])},t.scale.threshold=function(){return gr([.5],[0,1])},t.scale.identity=function(){return hr([0,1])},t.svg={},t.svg.arc=function(){var e=mr,t=vr,n=fr,i=pr,r=br,a=yr,o=Ir;function s(){var s=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+t.apply(this,arguments)),u=r.apply(this,arguments)-Ge,d=a.apply(this,arguments)-Ge,g=Math.abs(d-u),h=u>d?0:1;if(c<s&&(f=c,c=s,s=f),g>=we)return l(c,h)+(s?l(s,1-h):"")+"Z";var f,p,m,v,b,y,I,C,x,B,A,F,Q=0,U=0,w=[];if((v=(+o.apply(this,arguments)||0)/2)&&(m=i===pr?Math.sqrt(s*s+c*c):+i.apply(this,arguments),h||(U*=-1),c&&(U=Ve(m/c*Math.sin(v))),s&&(Q=Ve(m/s*Math.sin(v)))),c){b=c*Math.cos(u+U),y=c*Math.sin(u+U),I=c*Math.cos(d-U),C=c*Math.sin(d-U);var G=Math.abs(d-u-2*U)<=Qe?0:1;if(U&&Cr(b,y,I,C)===h^G){var R=(u+d)/2;b=c*Math.cos(R),y=c*Math.sin(R),I=C=null}}else b=y=0;if(s){x=s*Math.cos(d-Q),B=s*Math.sin(d-Q),A=s*Math.cos(u+Q),F=s*Math.sin(u+Q);var L=Math.abs(u-d+2*Q)<=Qe?0:1;if(Q&&Cr(x,B,A,F)===1-h^L){var S=(u+d)/2;x=s*Math.cos(S),B=s*Math.sin(S),A=F=null}}else x=B=0;if(g>Fe&&(f=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){p=s<c^h?0:1;var V=f,Z=f;if(g<Qe){var k=null==A?[x,B]:null==I?[b,y]:Lt([b,y],[A,F],[I,C],[x,B]),E=b-k[0],X=y-k[1],N=I-k[0],W=C-k[1],_=1/Math.sin(Math.acos((E*N+X*W)/(Math.sqrt(E*E+X*X)*Math.sqrt(N*N+W*W)))/2),T=Math.sqrt(k[0]*k[0]+k[1]*k[1]);Z=Math.min(f,(s-T)/(_-1)),V=Math.min(f,(c-T)/(_+1))}if(null!=I){var M=xr(null==A?[x,B]:[A,F],[b,y],c,V,h),H=xr([I,C],[x,B],c,V,h);f===V?w.push("M",M[0],"A",V,",",V," 0 0,",p," ",M[1],"A",c,",",c," 0 ",1-h^Cr(M[1][0],M[1][1],H[1][0],H[1][1]),",",h," ",H[1],"A",V,",",V," 0 0,",p," ",H[0]):w.push("M",M[0],"A",V,",",V," 0 1,",p," ",H[0])}else w.push("M",b,",",y);if(null!=A){var Y=xr([b,y],[A,F],s,-Z,h),D=xr([x,B],null==I?[b,y]:[I,C],s,-Z,h);f===Z?w.push("L",D[0],"A",Z,",",Z," 0 0,",p," ",D[1],"A",s,",",s," 0 ",h^Cr(D[1][0],D[1][1],Y[1][0],Y[1][1]),",",1-h," ",Y[1],"A",Z,",",Z," 0 0,",p," ",Y[0]):w.push("L",D[0],"A",Z,",",Z," 0 0,",p," ",Y[0])}else w.push("L",x,",",B)}else w.push("M",b,",",y),null!=I&&w.push("A",c,",",c," 0 ",G,",",h," ",I,",",C),w.push("L",x,",",B),null!=A&&w.push("A",s,",",s," 0 ",L,",",1-h," ",A,",",F);return w.push("Z"),w.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=ht(t),s):e},s.outerRadius=function(e){return arguments.length?(t=ht(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=ht(e),s):n},s.padRadius=function(e){return arguments.length?(i=e==pr?pr:ht(e),s):i},s.startAngle=function(e){return arguments.length?(r=ht(e),s):r},s.endAngle=function(e){return arguments.length?(a=ht(e),s):a},s.padAngle=function(e){return arguments.length?(o=ht(e),s):o},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Ge;return[Math.cos(i)*n,Math.sin(i)*n]},s};var pr="auto";function mr(e){return e.innerRadius}function vr(e){return e.outerRadius}function br(e){return e.startAngle}function yr(e){return e.endAngle}function Ir(e){return e&&e.padAngle}function Cr(e,t,n,i){return(e-n)*t-(t-i)*e>0?0:1}function xr(e,t,n,i,r){var a=e[0]-t[0],o=e[1]-t[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=e[0]+l,d=e[1]+c,g=t[0]+l,h=t[1]+c,f=(u+g)/2,p=(d+h)/2,m=g-u,v=h-d,b=m*m+v*v,y=n-i,I=u*h-g*d,C=(v<0?-1:1)*Math.sqrt(Math.max(0,y*y*b-I*I)),x=(I*v-m*C)/b,B=(-I*m-v*C)/b,A=(I*v+m*C)/b,F=(-I*m+v*C)/b,Q=x-f,U=B-p,w=A-f,G=F-p;return Q*Q+U*U>w*w+G*G&&(x=A,B=F),[[x-l,B-c],[x*n/y,B*n/y]]}function Br(){return!0}function Ar(e){var t=Ft,n=Qt,i=Br,r=Qr,a=r.key,o=.7;function s(a){var s,l=[],c=[],u=-1,d=a.length,g=ht(t),h=ht(n);function f(){l.push("M",r(e(c),o))}for(;++u<d;)i.call(this,s=a[u],u)?c.push([+g.call(this,s,u),+h.call(this,s,u)]):c.length&&(f(),c=[]);return c.length&&f(),l.length?l.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(i=e,s):i},s.interpolate=function(e){return arguments.length?(a="function"==typeof e?r=e:(r=Fr.get(e)||Qr).key,s):a},s.tension=function(e){return arguments.length?(o=e,s):o},s}t.svg.line=function(){return Ar(L)};var Fr=t.map({linear:Qr,"linear-closed":Ur,step:function(e){var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];for(;++t<n;)r.push("H",(i[0]+(i=e[t])[0])/2,"V",i[1]);n>1&&r.push("H",i[0]);return r.join("")},"step-before":wr,"step-after":Gr,basis:Sr,"basis-open":function(e){if(e.length<4)return Qr(e);var t,n=[],i=-1,r=e.length,a=[0],o=[0];for(;++i<3;)t=e[i],a.push(t[0]),o.push(t[1]);n.push(Vr(Er,a)+","+Vr(Er,o)),--i;for(;++i<r;)t=e[i],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Xr(n,a,o);return n.join("")},"basis-closed":function(e){var t,n,i=-1,r=e.length,a=r+4,o=[],s=[];for(;++i<4;)n=e[i%r],o.push(n[0]),s.push(n[1]);t=[Vr(Er,o),",",Vr(Er,s)],--i;for(;++i<a;)n=e[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Xr(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var i,r,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,c=-1;++c<=n;)i=e[c],r=c/n,i[0]=t*i[0]+(1-t)*(a+r*s),i[1]=t*i[1]+(1-t)*(o+r*l);return Sr(e)},cardinal:function(e,t){return e.length<3?Qr(e):e[0]+Rr(e,Lr(e,t))},"cardinal-open":function(e,t){return e.length<4?Qr(e):e[1]+Rr(e.slice(1,-1),Lr(e,t))},"cardinal-closed":function(e,t){return e.length<3?Ur(e):e[0]+Rr((e.push(e[0]),e),Lr([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Qr(e):e[0]+Rr(e,function(e){var t,n,i,r,a=[],o=function(e){var t=0,n=e.length-1,i=[],r=e[0],a=e[1],o=i[0]=Nr(r,a);for(;++t<n;)i[t]=(o+(o=Nr(r=a,a=e[t+1])))/2;return i[t]=o,i}(e),s=-1,l=e.length-1;for(;++s<l;)t=Nr(e[s],e[s+1]),y(t)<Fe?o[s]=o[s+1]=0:(r=(n=o[s]/t)*n+(i=o[s+1]/t)*i)>9&&(r=3*t/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i);s=-1;for(;++s<=l;)r=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}(e))}});function Qr(e){return e.length>1?e.join("L"):e+"Z"}function Ur(e){return e.join("L")+"Z"}function wr(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function Gr(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function Rr(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Qr(e);var n=e.length!=t.length,i="",r=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<t.length;c++,l++)a=e[l],s=t[c],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=e[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return i}function Lr(e,t){for(var n,i=[],r=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Sr(e){if(e.length<3)return Qr(e);var t=1,n=e.length,i=e[0],r=i[0],a=i[1],o=[r,r,r,(i=e[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",Vr(Er,o),",",Vr(Er,s)];for(e.push(e[n-1]);++t<=n;)i=e[t],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Xr(l,o,s);return e.pop(),l.push("L",i),l.join("")}function Vr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}Fr.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var Zr=[0,2/3,1/3,0],kr=[0,1/3,2/3,0],Er=[0,1/6,2/3,1/6];function Xr(e,t,n){e.push("C",Vr(Zr,t),",",Vr(Zr,n),",",Vr(kr,t),",",Vr(kr,n),",",Vr(Er,t),",",Vr(Er,n))}function Nr(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Wr(e){for(var t,n,i,r=-1,a=e.length;++r<a;)n=(t=e[r])[0],i=t[1]-Ge,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function _r(e){var t=Ft,n=Ft,i=0,r=Qt,a=Br,o=Qr,s=o.key,l=o,c="L",u=.7;function d(s){var d,g,h,f=[],p=[],m=[],v=-1,b=s.length,y=ht(t),I=ht(i),C=t===n?function(){return g}:ht(n),x=i===r?function(){return h}:ht(r);function B(){f.push("M",o(e(m),u),c,l(e(p.reverse()),u),"Z")}for(;++v<b;)a.call(this,d=s[v],v)?(p.push([g=+y.call(this,d,v),h=+I.call(this,d,v)]),m.push([+C.call(this,d,v),+x.call(this,d,v)])):p.length&&(B(),p=[],m=[]);return p.length&&B(),f.length?f.join(""):null}return d.x=function(e){return arguments.length?(t=n=e,d):n},d.x0=function(e){return arguments.length?(t=e,d):t},d.x1=function(e){return arguments.length?(n=e,d):n},d.y=function(e){return arguments.length?(i=r=e,d):r},d.y0=function(e){return arguments.length?(i=e,d):i},d.y1=function(e){return arguments.length?(r=e,d):r},d.defined=function(e){return arguments.length?(a=e,d):a},d.interpolate=function(e){return arguments.length?(s="function"==typeof e?o=e:(o=Fr.get(e)||Qr).key,l=o.reverse||o,c=o.closed?"M":"L",d):s},d.tension=function(e){return arguments.length?(u=e,d):u},d}function Tr(e){return e.source}function Mr(e){return e.target}function Hr(e){return e.radius}function Yr(e){return[e.x,e.y]}function Dr(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]-Ge;return[n*Math.cos(i),n*Math.sin(i)]}}function zr(){return 64}function Or(){return"circle"}function Jr(e){var t=Math.sqrt(e/Qe);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}t.svg.line.radial=function(){var e=Ar(Wr);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},wr.reverse=Gr,Gr.reverse=wr,t.svg.area=function(){return _r(L)},t.svg.area.radial=function(){var e=_r(Wr);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},t.svg.chord=function(){var e=Tr,t=Mr,n=Hr,i=br,r=yr;function a(n,i){var r=o(this,e,n,i),a=o(this,t,n,i);return"M"+r.p0+s(r.r,r.p1,r.a1-r.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(r,a)?l(r.r,r.p1,r.r,r.p0):l(r.r,r.p1,a.r,a.p0)+s(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,r.r,r.p0))+"Z"}function o(e,t,a,o){var s=t.call(e,a,o),l=n.call(e,s,o),c=i.call(e,s,o)-Ge,u=r.call(e,s,o)-Ge;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Qe)+",1 "+t}function l(e,t,n,i){return"Q 0,0 "+i}return a.radius=function(e){return arguments.length?(n=ht(e),a):n},a.source=function(t){return arguments.length?(e=ht(t),a):e},a.target=function(e){return arguments.length?(t=ht(e),a):t},a.startAngle=function(e){return arguments.length?(i=ht(e),a):i},a.endAngle=function(e){return arguments.length?(r=ht(e),a):r},a},t.svg.diagonal=function(){var e=Tr,t=Mr,n=Yr;function i(i,r){var a=e.call(this,i,r),o=t.call(this,i,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return i.source=function(t){return arguments.length?(e=ht(t),i):e},i.target=function(e){return arguments.length?(t=ht(e),i):t},i.projection=function(e){return arguments.length?(n=e,i):n},i},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=Yr,i=e.projection;return e.projection=function(e){return arguments.length?i(Dr(n=e)):n},e},t.svg.symbol=function(){var e=Or,t=zr;function n(n,i){return(jr.get(e.call(this,n,i))||Jr)(t.call(this,n,i))}return n.type=function(t){return arguments.length?(e=ht(t),n):e},n.size=function(e){return arguments.length?(t=ht(e),n):t},n};var jr=t.map({circle:Jr,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Kr)),n=t*Kr;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Pr),n=t*Pr/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Pr),n=t*Pr/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});t.svg.symbolTypes=jr.keys();var Pr=Math.sqrt(3),Kr=Math.tan(30*Re);O.transition=function(e){for(var t,n,i=ta||++ra,r=sa(e),a=[],o=na||{time:Date.now(),ease:Zn,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&la(n,u,r,i,o),t.push(n)}return ea(a,r,i)},O.interrupt=function(e){return this.each(null==e?qr:$r(sa(e)))};var qr=$r(sa());function $r(e){return function(){var t,n,i;(t=this[e])&&(i=t[n=t.active])&&(i.timer.c=null,i.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function ea(e,t,n){return M(e,ia),e.namespace=t,e.id=n,e}var ta,na,ia=[],ra=0;function aa(e,t,n,i){var r=e.id,a=e.namespace;return de(e,"function"==typeof n?function(e,o,s){e[a][r].tween.set(t,i(n.call(e,e.__data__,o,s)))}:(n=i(n),function(e){e[a][r].tween.set(t,n)}))}function oa(e){return null==e&&(e=""),function(){this.textContent=e}}function sa(e){return null==e?"__transition__":"__transition_"+e+"__"}function la(e,t,n,i,r){var a,o,s,l,c,u=e[n]||(e[n]={active:0,count:0}),d=u[i];function g(n){var r=u.active,g=u[r];for(var f in g&&(g.timer.c=null,g.timer.t=NaN,--u.count,delete u[r],g.event&&g.event.interrupt.call(e,e.__data__,g.index)),u)if(+f<i){var p=u[f];p.timer.c=null,p.timer.t=NaN,--u.count,delete u[f]}o.c=h,Ct((function(){return o.c&&h(n||1)&&(o.c=null,o.t=NaN),1}),0,a),u.active=i,d.event&&d.event.start.call(e,e.__data__,t),c=[],d.tween.forEach((function(n,i){(i=i.call(e,e.__data__,t))&&c.push(i)})),l=d.ease,s=d.duration}function h(r){for(var a=r/s,o=l(a),g=c.length;g>0;)c[--g].call(e,o);if(a>=1)return d.event&&d.event.end.call(e,e.__data__,t),--u.count?delete u[i]:delete e[n],1}d||(a=r.time,o=Ct((function(e){var t=d.delay;if(o.t=t+a,t<=e)return g(e-t);o.c=g}),0,a),d=u[i]={tween:new x,time:a,timer:o,delay:r.delay,duration:r.duration,ease:r.ease,index:t},r=null,++u.count)}ia.call=O.call,ia.empty=O.empty,ia.node=O.node,ia.size=O.size,t.transition=function(e,n){return e&&e.transition?ta?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=ia,ia.select=function(e){var t,n,i,r=this.id,a=this.namespace,o=[];e=J(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(i=c[u])&&(n=e.call(i,i.__data__,u,s))?("__data__"in i&&(n.__data__=i.__data__),la(n,u,a,r,i[a][r]),t.push(n)):t.push(null)}return ea(o,a,r)},ia.selectAll=function(e){var t,n,i,r,a,o=this.id,s=this.namespace,l=[];e=j(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],g=-1,h=d.length;++g<h;)if(i=d[g]){a=i[s][o],n=e.call(i,i.__data__,g,c),l.push(t=[]);for(var f=-1,p=n.length;++f<p;)(r=n[f])&&la(r,f,s,o,a),t.push(r)}return ea(l,s,o)},ia.filter=function(e){var t,n,i=[];"function"!=typeof e&&(e=ce(e));for(var r=0,a=this.length;r<a;r++){i.push(t=[]);for(var o,s=0,l=(o=this[r]).length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,r)&&t.push(n)}return ea(i,this.namespace,this.id)},ia.tween=function(e,t){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(e):de(this,null==t?function(t){t[i][n].tween.remove(e)}:function(r){r[i][n].tween.set(e,t)})},ia.attr=function(e,n){if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var i="transform"==e?Dn:An,r=t.ns.qualify(e);function a(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}function s(e){return null==e?a:(e+="",function(){var t,n=this.getAttribute(r);return n!==e&&(t=i(n,e),function(e){this.setAttribute(r,t(e))})})}function l(e){return null==e?o:(e+="",function(){var t,n=this.getAttributeNS(r.space,r.local);return n!==e&&(t=i(n,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}return aa(this,"attr."+e,n,r.local?l:s)},ia.attrTween=function(e,n){var i=t.ns.qualify(e);return this.tween("attr."+e,i.local?function(e,t){var r=n.call(this,e,t,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}:function(e,t){var r=n.call(this,e,t,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}})},ia.style=function(e,t,n){var i=arguments.length;if(i<3){if("string"!=typeof e){for(n in i<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function r(){this.style.removeProperty(e)}function a(t){return null==t?r:(t+="",function(){var i,r=s(this).getComputedStyle(this,null).getPropertyValue(e);return r!==t&&(i=An(r,t),function(t){this.style.setProperty(e,i(t),n)})})}return aa(this,"style."+e,t,a)},ia.styleTween=function(e,t,n){function i(i,r){var a=t.call(this,i,r,s(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,i)},ia.text=function(e){return aa(this,"text",e,oa)},ia.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},ia.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),de(this,(function(t){t[i][n].ease=e})))},ia.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:de(this,"function"==typeof e?function(i,r,a){i[n][t].delay=+e.call(i,i.__data__,r,a)}:(e=+e,function(i){i[n][t].delay=e}))},ia.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:de(this,"function"==typeof e?function(i,r,a){i[n][t].duration=Math.max(1,e.call(i,i.__data__,r,a))}:(e=Math.max(1,e),function(i){i[n][t].duration=e}))},ia.each=function(e,n){var i=this.id,r=this.namespace;if(arguments.length<2){var a=na,o=ta;try{ta=i,de(this,(function(t,n,a){na=t[r][i],e.call(t,t.__data__,n,a)}))}finally{na=a,ta=o}}else de(this,(function(a){var o=a[r][i];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,n)}));return this},ia.transition=function(){for(var e,t,n,i=this.id,r=++ra,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&la(t,u,a,r,{time:(n=t[a][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return ea(o,a,r)},t.svg.axis=function(){var e,n=t.scale.linear(),i=ca,a=6,o=6,s=3,l=[10],c=null;function u(r){r.each((function(){var r,u=t.select(this),d=this.__chart__||n,g=this.__chart__=n.copy(),h=null==c?g.ticks?g.ticks.apply(g,l):g.domain():c,f=null==e?g.tickFormat?g.tickFormat.apply(g,l):L:e,p=u.selectAll(".tick").data(h,g),m=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Fe),v=t.transition(p.exit()).style("opacity",Fe).remove(),b=t.transition(p.order()).style("opacity",1),y=Math.max(a,0)+s,I=Yi(g),C=u.selectAll(".domain").data([0]),x=(C.enter().append("path").attr("class","domain"),t.transition(C));m.append("line"),m.append("text");var B,A,F,Q,U=m.select("line"),w=b.select("line"),G=p.select("text").text(f),R=m.select("text"),S=b.select("text"),V="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(r=da,B="x",F="y",A="x2",Q="y2",G.attr("dy",V<0?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+I[0]+","+V*o+"V0H"+I[1]+"V"+V*o)):(r=ga,B="y",F="x",A="y2",Q="x2",G.attr("dy",".32em").style("text-anchor",V<0?"end":"start"),x.attr("d","M"+V*o+","+I[0]+"H0V"+I[1]+"H"+V*o)),U.attr(Q,V*a),R.attr(F,V*y),w.attr(A,0).attr(Q,V*a),S.attr(B,0).attr(F,V*y),g.rangeBand){var Z=g,k=Z.rangeBand()/2;d=g=function(e){return Z(e)+k}}else d.rangeBand?d=g:v.call(r,g,d);m.call(r,d,g),b.call(r,g,g)}))}return u.scale=function(e){return arguments.length?(n=e,u):n},u.orient=function(e){return arguments.length?(i=e in ua?e+"":ca,u):i},u.ticks=function(){return arguments.length?(l=r(arguments),u):l},u.tickValues=function(e){return arguments.length?(c=e,u):c},u.tickFormat=function(t){return arguments.length?(e=t,u):e},u.tickSize=function(e){var t=arguments.length;return t?(a=+e,o=+arguments[t-1],u):a},u.innerTickSize=function(e){return arguments.length?(a=+e,u):a},u.outerTickSize=function(e){return arguments.length?(o=+e,u):o},u.tickPadding=function(e){return arguments.length?(s=+e,u):s},u.tickSubdivide=function(){return arguments.length&&u},u};var ca="bottom",ua={top:1,right:1,bottom:1,left:1};function da(e,t,n){e.attr("transform",(function(e){var i=t(e);return"translate("+(isFinite(i)?i:n(e))+",0)"}))}function ga(e,t,n){e.attr("transform",(function(e){var i=t(e);return"translate(0,"+(isFinite(i)?i:n(e))+")"}))}t.svg.brush=function(){var e,n,i=_(g,"brushstart","brush","brushend"),r=null,a=null,o=[0,0],l=[0,0],c=!0,u=!0,d=fa[0];function g(e){e.each((function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=e.selectAll(".resize").data(d,L);i.exit().remove(),i.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return ha[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),i.style("display",g.empty()?"none":null);var o,s=t.transition(e),l=t.transition(n);r&&(o=Yi(r),l.attr("x",o[0]).attr("width",o[1]-o[0]),f(s)),a&&(o=Yi(a),l.attr("y",o[0]).attr("height",o[1]-o[0]),p(s)),h(s)}))}function h(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+o[+/e$/.test(e)]+","+l[+/^s/.test(e)]+")"}))}function f(e){e.select(".extent").attr("x",o[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function p(e){e.select(".extent").attr("y",l[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function m(){var d,m,v=this,b=t.select(t.event.target),y=i.of(v,arguments),I=t.select(v),C=b.datum(),x=!/^(n|s)$/.test(C)&&r,B=!/^(e|w)$/.test(C)&&a,A=b.classed("extent"),F=Ce(v),Q=t.mouse(v),U=t.select(s(v)).on("keydown.brush",R).on("keyup.brush",L);if(t.event.changedTouches?U.on("touchmove.brush",S).on("touchend.brush",Z):U.on("mousemove.brush",S).on("mouseup.brush",Z),I.interrupt().selectAll("*").interrupt(),A)Q[0]=o[0]-Q[0],Q[1]=l[0]-Q[1];else if(C){var w=+/w$/.test(C),G=+/^n/.test(C);m=[o[1-w]-Q[0],l[1-G]-Q[1]],Q[0]=o[w],Q[1]=l[G]}else t.event.altKey&&(d=Q.slice());function R(){32==t.event.keyCode&&(A||(d=null,Q[0]-=o[1],Q[1]-=l[1],A=2),N())}function L(){32==t.event.keyCode&&2==A&&(Q[0]+=o[1],Q[1]+=l[1],A=0,N())}function S(){var e=t.mouse(v),n=!1;m&&(e[0]+=m[0],e[1]+=m[1]),A||(t.event.altKey?(d||(d=[(o[0]+o[1])/2,(l[0]+l[1])/2]),Q[0]=o[+(e[0]<d[0])],Q[1]=l[+(e[1]<d[1])]):d=null),x&&V(e,r,0)&&(f(I),n=!0),B&&V(e,a,1)&&(p(I),n=!0),n&&(h(I),y({type:"brush",mode:A?"move":"resize"}))}function V(t,i,r){var a,s,g=Yi(i),h=g[0],f=g[1],p=Q[r],m=r?l:o,v=m[1]-m[0];if(A&&(h-=p,f-=v+p),a=(r?u:c)?Math.max(h,Math.min(f,t[r])):t[r],A?s=(a+=p)+v:(d&&(p=Math.max(h,Math.min(f,2*d[r]-a))),p<a?(s=a,a=p):s=p),m[0]!=a||m[1]!=s)return r?n=null:e=null,m[0]=a,m[1]=s,!0}function Z(){S(),I.style("pointer-events","all").selectAll(".resize").style("display",g.empty()?"none":null),t.select("body").style("cursor",null),U.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),F(),y({type:"brushend"})}I.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",b.style("cursor")),y({type:"brushstart"}),S()}return g.event=function(r){r.each((function(){var r=i.of(this,arguments),a={x:o,y:l,i:e,j:n},s=this.__chart__||a;this.__chart__=a,ta?t.select(this).transition().each("start.brush",(function(){e=s.i,n=s.j,o=s.x,l=s.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var t=Fn(o,a.x),i=Fn(l,a.y);return e=n=null,function(e){o=a.x=t(e),l=a.y=i(e),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=a.i,n=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},g.x=function(e){return arguments.length?(d=fa[!(r=e)<<1|!a],g):r},g.y=function(e){return arguments.length?(d=fa[!r<<1|!(a=e)],g):a},g.clamp=function(e){return arguments.length?(r&&a?(c=!!e[0],u=!!e[1]):r?c=!!e:a&&(u=!!e),g):r&&a?[c,u]:r?c:a?u:null},g.extent=function(t){var i,s,c,u,d;return arguments.length?(r&&(i=t[0],s=t[1],a&&(i=i[0],s=s[0]),e=[i,s],r.invert&&(i=r(i),s=r(s)),s<i&&(d=i,i=s,s=d),i==o[0]&&s==o[1]||(o=[i,s])),a&&(c=t[0],u=t[1],r&&(c=c[1],u=u[1]),n=[c,u],a.invert&&(c=a(c),u=a(u)),u<c&&(d=c,c=u,u=d),c==l[0]&&u==l[1]||(l=[c,u])),g):(r&&(e?(i=e[0],s=e[1]):(i=o[0],s=o[1],r.invert&&(i=r.invert(i),s=r.invert(s)),s<i&&(d=i,i=s,s=d))),a&&(n?(c=n[0],u=n[1]):(c=l[0],u=l[1],a.invert&&(c=a.invert(c),u=a.invert(u)),u<c&&(d=c,c=u,u=d))),r&&a?[[i,c],[s,u]]:r?[i,s]:a&&[c,u])},g.clear=function(){return g.empty()||(o=[0,0],l=[0,0],e=n=null),g},g.empty=function(){return!!r&&o[0]==o[1]||!!a&&l[0]==l[1]},t.rebind(g,i,"on")};var ha={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fa=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function pa(e){return JSON.parse(e.responseText)}function ma(e){var t=a.createRange();return t.selectNode(a.body),t.createContextualFragment(e.responseText)}t.text=ft((function(e){return e.responseText})),t.json=function(e,t){return pt(e,"application/json",pa,t)},t.html=function(e,t){return pt(e,"text/html",ma,t)},t.xml=ft((function(e){return e.responseXML})),e.exports?e.exports=t:this.d3=t}).apply(self)}(Gs);var Rs=new Date,Ls=new Date;function Ss(e,t,n,i){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=function(t){return e(t=new Date(+t)),t},r.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},r.round=function(e){var t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return s;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<i);return s},r.filter=function(n){return Ss((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}))},n&&(r.count=function(t,i){return Rs.setTime(+t),Ls.setTime(+i),e(Rs),e(Ls),Math.floor(n(Rs,Ls))},r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?function(t){return i(t)%e==0}:function(t){return r.count(0,t)%e==0}):r:null}),r}var Vs=Ss((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Vs.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ss((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Vs:null};var Zs=Vs,ks=Vs.range,Es=Ss((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()})),Xs=Es,Ns=Es.range,Ws=Ss((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()})),_s=Ws,Ts=Ws.range,Ms=Ss((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()})),Hs=Ms,Ys=Ms.range,Ds=Ss((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1})),zs=Ds,Os=Ds.range;function Js(e){return Ss((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}var js=Js(0),Ps=Js(1),Ks=Js(2),qs=Js(3),$s=Js(4),el=Js(5),tl=Js(6),nl=js.range,il=Ps.range,rl=Ks.range,al=qs.range,ol=$s.range,sl=el.range,ll=tl.range,cl=Ss((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),ul=cl,dl=cl.range,hl=Ss((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));hl.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ss((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var fl=hl,pl=hl.range,ml=Ss((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getUTCMinutes()})),vl=ml,bl=ml.range,yl=Ss((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()})),Il=yl,Cl=yl.range,xl=Ss((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1})),Bl=xl,Al=xl.range;function Fl(e){return Ss((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}var Ql=Fl(0),Ul=Fl(1),wl=Fl(2),Gl=Fl(3),Rl=Fl(4),Ll=Fl(5),Sl=Fl(6),Vl=Ql.range,Zl=Ul.range,kl=wl.range,El=Gl.range,Xl=Rl.range,Nl=Ll.range,Wl=Sl.range,_l=Ss((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),Tl=_l,Ml=_l.range,Hl=Ss((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Hl.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ss((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Yl=Hl,Dl=Hl.range,zl=Object.freeze({__proto__:null,timeInterval:Ss,timeMillisecond:Zs,timeMilliseconds:ks,utcMillisecond:Zs,utcMilliseconds:ks,timeSecond:Xs,timeSeconds:Ns,utcSecond:Xs,utcSeconds:Ns,timeMinute:_s,timeMinutes:Ts,timeHour:Hs,timeHours:Ys,timeDay:zs,timeDays:Os,timeWeek:js,timeWeeks:nl,timeSunday:js,timeSundays:nl,timeMonday:Ps,timeMondays:il,timeTuesday:Ks,timeTuesdays:rl,timeWednesday:qs,timeWednesdays:al,timeThursday:$s,timeThursdays:ol,timeFriday:el,timeFridays:sl,timeSaturday:tl,timeSaturdays:ll,timeMonth:ul,timeMonths:dl,timeYear:fl,timeYears:pl,utcMinute:vl,utcMinutes:bl,utcHour:Il,utcHours:Cl,utcDay:Bl,utcDays:Al,utcWeek:Ql,utcWeeks:Vl,utcSunday:Ql,utcSundays:Vl,utcMonday:Ul,utcMondays:Zl,utcTuesday:wl,utcTuesdays:kl,utcWednesday:Gl,utcWednesdays:El,utcThursday:Rl,utcThursdays:Xl,utcFriday:Ll,utcFridays:Nl,utcSaturday:Sl,utcSaturdays:Wl,utcMonth:Tl,utcMonths:Ml,utcYear:Yl,utcYears:Dl});function Ol(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jl(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function jl(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Pl(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=lc(r),u=cc(r),d=lc(a),g=cc(a),h=lc(o),f=cc(o),p=lc(s),m=cc(s),v=lc(l),b=cc(l),y={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Rc,e:Rc,f:kc,g:zc,G:Jc,H:Lc,I:Sc,j:Vc,L:Zc,m:Ec,M:Xc,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:vu,s:bu,S:Nc,u:Wc,U:_c,V:Mc,w:Hc,W:Yc,x:null,X:null,y:Dc,Y:Oc,Z:jc,"%":mu},I={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Pc,e:Pc,f:tu,g:gu,G:fu,H:Kc,I:qc,j:$c,L:eu,m:nu,M:iu,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:vu,s:bu,S:ru,u:au,U:ou,V:lu,w:cu,W:uu,x:null,X:null,y:du,Y:hu,Z:pu,"%":mu},C={a:function(e,t,n){var i=h.exec(t.slice(n));return i?(e.w=f[i[0].toLowerCase()],n+i[0].length):-1},A:function(e,t,n){var i=d.exec(t.slice(n));return i?(e.w=g[i[0].toLowerCase()],n+i[0].length):-1},b:function(e,t,n){var i=v.exec(t.slice(n));return i?(e.m=b[i[0].toLowerCase()],n+i[0].length):-1},B:function(e,t,n){var i=p.exec(t.slice(n));return i?(e.m=m[i[0].toLowerCase()],n+i[0].length):-1},c:function(e,n,i){return A(e,t,n,i)},d:Ic,e:Ic,f:Qc,g:mc,G:pc,H:xc,I:xc,j:Cc,L:Fc,m:yc,M:Bc,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=u[i[0].toLowerCase()],n+i[0].length):-1},q:bc,Q:wc,s:Gc,S:Ac,u:dc,U:gc,V:hc,w:uc,W:fc,x:function(e,t,i){return A(e,n,t,i)},X:function(e,t,n){return A(e,i,t,n)},y:mc,Y:pc,Z:vc,"%":Uc};function x(e,t){return function(n){var i,r,a,o=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(r=nc[i=e.charAt(++s)])?i=e.charAt(++s):r="e"===i?" ":"0",(a=t[i])&&(i=a(n,r)),o.push(i),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function B(e,t){return function(n){var i,r,a=jl(1900,void 0,1);if(A(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(r=(i=Jl(jl(a.y,0,1))).getUTCDay(),i=r>4||0===r?Ul.ceil(i):Ul(i),i=Bl.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(r=(i=Ol(jl(a.y,0,1))).getDay(),i=r>4||0===r?Ps.ceil(i):Ps(i),i=zs.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?Jl(jl(a.y,0,1)).getUTCDay():Ol(jl(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Jl(a)):Ol(a)}}function A(e,t,n,i){for(var r,a,o=0,s=t.length,l=n.length;o<s;){if(i>=l)return-1;if(37===(r=t.charCodeAt(o++))){if(r=t.charAt(o++),!(a=C[r in nc?t.charAt(o++):r])||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return y.x=x(n,y),y.X=x(i,y),y.c=x(t,y),I.x=x(n,I),I.X=x(i,I),I.c=x(t,I),{format:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=B(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",I);return t.toString=function(){return e},t},utcParse:function(e){var t=B(e+="",!0);return t.toString=function(){return e},t}}}var Kl,ql,$l,ec,tc,nc={"-":"",_:" ",0:"0"},ic=/^\s*\d+/,rc=/^%/,ac=/[\\^$*+?|[\]().{}]/g;function oc(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function sc(e){return e.replace(ac,"\\$&")}function lc(e){return new RegExp("^(?:"+e.map(sc).join("|")+")","i")}function cc(e){for(var t={},n=-1,i=e.length;++n<i;)t[e[n].toLowerCase()]=n;return t}function uc(e,t,n){var i=ic.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function dc(e,t,n){var i=ic.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function gc(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function hc(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function fc(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function pc(e,t,n){var i=ic.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function mc(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function vc(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function bc(e,t,n){var i=ic.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function yc(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Ic(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Cc(e,t,n){var i=ic.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function xc(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Bc(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Ac(e,t,n){var i=ic.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Fc(e,t,n){var i=ic.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Qc(e,t,n){var i=ic.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Uc(e,t,n){var i=rc.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function wc(e,t,n){var i=ic.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Gc(e,t,n){var i=ic.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Rc(e,t){return oc(e.getDate(),t,2)}function Lc(e,t){return oc(e.getHours(),t,2)}function Sc(e,t){return oc(e.getHours()%12||12,t,2)}function Vc(e,t){return oc(1+zs.count(fl(e),e),t,3)}function Zc(e,t){return oc(e.getMilliseconds(),t,3)}function kc(e,t){return Zc(e,t)+"000"}function Ec(e,t){return oc(e.getMonth()+1,t,2)}function Xc(e,t){return oc(e.getMinutes(),t,2)}function Nc(e,t){return oc(e.getSeconds(),t,2)}function Wc(e){var t=e.getDay();return 0===t?7:t}function _c(e,t){return oc(js.count(fl(e)-1,e),t,2)}function Tc(e){var t=e.getDay();return t>=4||0===t?$s(e):$s.ceil(e)}function Mc(e,t){return e=Tc(e),oc($s.count(fl(e),e)+(4===fl(e).getDay()),t,2)}function Hc(e){return e.getDay()}function Yc(e,t){return oc(Ps.count(fl(e)-1,e),t,2)}function Dc(e,t){return oc(e.getFullYear()%100,t,2)}function zc(e,t){return oc((e=Tc(e)).getFullYear()%100,t,2)}function Oc(e,t){return oc(e.getFullYear()%1e4,t,4)}function Jc(e,t){var n=e.getDay();return oc((e=n>=4||0===n?$s(e):$s.ceil(e)).getFullYear()%1e4,t,4)}function jc(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+oc(t/60|0,"0",2)+oc(t%60,"0",2)}function Pc(e,t){return oc(e.getUTCDate(),t,2)}function Kc(e,t){return oc(e.getUTCHours(),t,2)}function qc(e,t){return oc(e.getUTCHours()%12||12,t,2)}function $c(e,t){return oc(1+Bl.count(Yl(e),e),t,3)}function eu(e,t){return oc(e.getUTCMilliseconds(),t,3)}function tu(e,t){return eu(e,t)+"000"}function nu(e,t){return oc(e.getUTCMonth()+1,t,2)}function iu(e,t){return oc(e.getUTCMinutes(),t,2)}function ru(e,t){return oc(e.getUTCSeconds(),t,2)}function au(e){var t=e.getUTCDay();return 0===t?7:t}function ou(e,t){return oc(Ql.count(Yl(e)-1,e),t,2)}function su(e){var t=e.getUTCDay();return t>=4||0===t?Rl(e):Rl.ceil(e)}function lu(e,t){return e=su(e),oc(Rl.count(Yl(e),e)+(4===Yl(e).getUTCDay()),t,2)}function cu(e){return e.getUTCDay()}function uu(e,t){return oc(Ul.count(Yl(e)-1,e),t,2)}function du(e,t){return oc(e.getUTCFullYear()%100,t,2)}function gu(e,t){return oc((e=su(e)).getUTCFullYear()%100,t,2)}function hu(e,t){return oc(e.getUTCFullYear()%1e4,t,4)}function fu(e,t){var n=e.getUTCDay();return oc((e=n>=4||0===n?Rl(e):Rl.ceil(e)).getUTCFullYear()%1e4,t,4)}function pu(){return"+0000"}function mu(){return"%"}function vu(e){return+e}function bu(e){return Math.floor(+e/1e3)}function yu(e){return Kl=Pl(e),ql=Kl.format,$l=Kl.parse,ec=Kl.utcFormat,tc=Kl.utcParse,Kl}yu({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Iu=Date.prototype.toISOString?function(e){return e.toISOString()}:ec("%Y-%m-%dT%H:%M:%S.%LZ"),Cu=Iu;var xu=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:tc("%Y-%m-%dT%H:%M:%S.%LZ"),Bu=xu,Au=Bs(Object.freeze({__proto__:null,timeFormatDefaultLocale:yu,get timeFormat(){return ql},get timeParse(){return $l},get utcFormat(){return ec},get utcParse(){return tc},timeFormatLocale:Pl,isoFormat:Cu,isoParse:Bu}));function Fu(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Qu(e){return(e=Fu(Math.abs(e)))?e[1]:NaN}var Uu,wu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gu(e){if(!(t=wu.exec(e)))throw new Error("invalid format: "+e);var t;return new Ru({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Ru(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Lu(e,t){var n=Fu(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Gu.prototype=Ru.prototype,Ru.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Su={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Lu(100*e,t)},r:Lu,s:function(e,t){var n=Fu(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(Uu=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Fu(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Vu(e){return e}var Zu,ku,Eu,Xu=Array.prototype.map,Nu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Wu(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Vu:(t=Xu.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,a=[],o=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),a.push(e.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Vu:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Xu.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Gu(e)).fill,n=e.align,d=e.sign,g=e.symbol,h=e.zero,f=e.width,p=e.comma,m=e.precision,v=e.trim,b=e.type;"n"===b?(p=!0,b="g"):Su[b]||(void 0===m&&(m=12),v=!0,b="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var y="$"===g?r:"#"===g&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",I="$"===g?a:/[%p]/.test(b)?l:"",C=Su[b],x=/[defgprs%]/.test(b);function B(e){var r,a,l,g=y,B=I;if("c"===b)B=C(e)+B,e="";else{var A=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:C(Math.abs(e),m),v&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),A&&0==+e&&"+"!==d&&(A=!1),g=(A?"("===d?d:c:"-"===d||"("===d?"":d)+g,B=("s"===b?Nu[8+Uu/3]:"")+B+(A&&"("===d?")":""),x)for(r=-1,a=e.length;++r<a;)if(48>(l=e.charCodeAt(r))||l>57){B=(46===l?o+e.slice(r+1):e.slice(r))+B,e=e.slice(0,r);break}}p&&!h&&(e=i(e,1/0));var F=g.length+e.length+B.length,Q=F<f?new Array(f-F+1).join(t):"";switch(p&&h&&(e=i(Q+e,Q.length?f-B.length:1/0),Q=""),n){case"<":e=g+e+B+Q;break;case"=":e=g+Q+e+B;break;case"^":e=Q.slice(0,F=Q.length>>1)+g+e+B+Q.slice(F);break;default:e=Q+g+e+B}return s(e)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),B.toString=function(){return e+""},B}return{format:d,formatPrefix:function(e,t){var n=d(((e=Gu(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Qu(t)/3))),r=Math.pow(10,-i),a=Nu[8+i/3];return function(e){return n(r*e)+a}}}}function _u(e){return Zu=Wu(e),ku=Zu.format,Eu=Zu.formatPrefix,Zu}_u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Tu=Object.freeze({__proto__:null,formatDefaultLocale:_u,get format(){return ku},get formatPrefix(){return Eu},formatLocale:Wu,formatSpecifier:Gu,FormatSpecifier:Ru,precisionFixed:function(e){return Math.max(0,-Qu(Math.abs(e)))},precisionPrefix:function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qu(t)/3)))-Qu(Math.abs(e)))},precisionRound:function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qu(t)-Qu(e))+1}}),Mu=Bs(Tu),Hu=function(e){for(var t,n=e.length,i=0;i<n;i++)if(((t=e.charCodeAt(i))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0},Yu=function(e){var t=i(e);if("string"===t){var n=e;if(0===(e=+e)&&Hu(n))return!1}else if("number"!==t)return!1;return e-e<1},Du={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""},zu={},Ou=Array.isArray,Ju=ArrayBuffer,ju=DataView;function Pu(e){return Ju.isView(e)&&!(e instanceof ju)}function Ku(e){return Ou(e)||Pu(e)}function qu(e,t,n){if(Ku(e)){if(Ku(e[0])){for(var i=n,r=0;r<e.length;r++)i=t(i,e[r].length);return i}return e.length}return 0}zu.isTypedArray=Pu,zu.isArrayOrTypedArray=Ku,zu.isArray1D=function(e){return!Ku(e[0])},zu.ensureArray=function(e,t){return Ou(e)||(e=[]),e.length=t,e},zu.concat=function(){var e,t,n,i,r,a,o,s,l=[],c=!0,u=0;for(n=0;n<arguments.length;n++)(a=(i=arguments[n]).length)&&(t?l.push(i):(t=i,r=a),Ou(i)?e=!1:(c=!1,u?e!==i.constructor&&(e=!1):e=i.constructor),u+=a);if(!u)return[];if(!l.length)return t;if(c)return t.concat.apply(t,l);if(e){for((o=new e(u)).set(t),n=0;n<l.length;n++)i=l[n],o.set(i,r),r+=i.length;return o}for(o=new Array(u),s=0;s<t.length;s++)o[s]=t[s];for(n=0;n<l.length;n++){for(i=l[n],s=0;s<i.length;s++)o[r+s]=i[s];r+=s}return o},zu.maxRowLength=function(e){return qu(e,Math.max,0)},zu.minRowLength=function(e){return qu(e,Math.min,1/0)};var $u=Yu,ed=zu.isArrayOrTypedArray,td=function(e,t){if($u(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,a,o=0,s=t.split(".");o<s.length;){if(n=String(s[o]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])s[o]=n[1];else{if(0!==o)throw"bad property string";s.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),a=0;a<r.length;a++)o++,s.splice(o,0,Number(r[a]))}o++}return"object"!==i(e)?function(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}(e,t,s):{set:ad(e,s,t),get:nd(e,s),astr:t,parts:s,obj:e}};function nd(e,t){return function(){var n,r,a,o,s,l=e;for(o=0;o<t.length-1;o++){if(-1===(n=t[o])){for(r=!0,a=[],s=0;s<l.length;s++)a[s]=nd(l[s],t.slice(o+1))(),a[s]!==a[0]&&(r=!1);return r?a[0]:a}if("number"==typeof n&&!ed(l))return;if("object"!==i(l=l[n])||null===l)return}if("object"===i(l)&&null!==l&&null!==(a=l[t[o]]))return a}}var id=/(^|\.)args\[/;function rd(e,t){return void 0===e||null===e&&!t.match(id)}function ad(e,t,n){return function(r){var a,o,s=e,l="",c=rd(r,n);for(o=0;o<t.length-1;o++){if("number"==typeof(a=t[o])&&!ed(s))throw"array index but container is not an array";if(-1===a){if(c=!sd(s,t.slice(o+1),r,n))break;return}if(!ld(s,a,t[o+1],c))break;if("object"!==i(s=s[a])||null===s)throw"container is not an object";l=od(l,a)}if(c){if(o===t.length-1&&(delete s[t[o]],Array.isArray(s)&&+t[o]==s.length-1))for(;s.length&&void 0===s[s.length-1];)s.pop()}else s[t[o]]=r}}function od(e,t){var n=t;return $u(t)?n="["+t+"]":e&&(n="."+t),e+n}function sd(e,t,n,i){var r,a=ed(n),o=!0,s=n,l=i.replace("-1",0),c=!a&&rd(n,l),u=t[0];for(r=0;r<e.length;r++)l=i.replace("-1",r),a&&(c=rd(s=n[r%n.length],l)),c&&(o=!1),ld(e,r,u,c)&&ad(e[r],t,i.replace("-1",r))(s);return o}function ld(e,t,n,i){if(void 0===e[t]){if(i)return!1;e[t]="number"==typeof n?[]:{}}return!0}var cd=td,ud=/^\w*$/,dd=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,gd=/^[^\.\[\]]+$/,hd=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")},fd=Yu,pd=function(e,t){if(e>0)return Math.log(e)/Math.LN10;var n=Math.log(Math.min(t[0],t[1]))/Math.LN10;return fd(n)||(n=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),n},md=zu.isArrayOrTypedArray,vd=hd;var bd={mod:function(e,t){var n=e%t;return n<0?n+t:n},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}},yd={},Id={exports:{}};!function(e){!function(t){var n=/^\s+/,r=/\s+$/,a=0,o=t.round,s=t.min,l=t.max,c=t.random;function u(e,c){if(c=c||{},(e=e||"")instanceof u)return e;if(!(this instanceof u))return new u(e,c);var d=function(e){var a={r:0,g:0,b:0},o=1,c=null,u=null,d=null,g=!1,h=!1;"string"==typeof e&&(e=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,i=!1;if(w[e])e=w[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=T.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=T.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=T.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=T.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=T.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=T.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=T.hex8.exec(e))return{r:V(t[1]),g:V(t[2]),b:V(t[3]),a:X(t[4]),format:i?"name":"hex8"};if(t=T.hex6.exec(e))return{r:V(t[1]),g:V(t[2]),b:V(t[3]),format:i?"name":"hex"};if(t=T.hex4.exec(e))return{r:V(t[1]+""+t[1]),g:V(t[2]+""+t[2]),b:V(t[3]+""+t[3]),a:X(t[4]+""+t[4]),format:i?"name":"hex8"};if(t=T.hex3.exec(e))return{r:V(t[1]+""+t[1]),g:V(t[2]+""+t[2]),b:V(t[3]+""+t[3]),format:i?"name":"hex"};return!1}(e));"object"==i(e)&&(M(e.r)&&M(e.g)&&M(e.b)?(a=function(e,t,n){return{r:255*L(e,255),g:255*L(t,255),b:255*L(n,255)}}(e.r,e.g,e.b),g=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):M(e.h)&&M(e.s)&&M(e.v)?(c=k(e.s),u=k(e.v),a=function(e,n,i){e=6*L(e,360),n=L(n,100),i=L(i,100);var r=t.floor(e),a=e-r,o=i*(1-n),s=i*(1-a*n),l=i*(1-(1-a)*n),c=r%6;return{r:255*[i,s,o,o,l,i][c],g:255*[l,i,i,s,o,o][c],b:255*[o,o,l,i,i,s][c]}}(e.h,c,u),g=!0,h="hsv"):M(e.h)&&M(e.s)&&M(e.l)&&(c=k(e.s),d=k(e.l),a=function(e,t,n){var i,r,a;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=L(e,360),t=L(t,100),n=L(n,100),0===t)i=r=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=o(l,s,e+1/3),r=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*i,g:255*r,b:255*a}}(e.h,c,d),g=!0,h="hsl"),e.hasOwnProperty("a")&&(o=e.a));return o=R(o),{ok:g,format:e.format||h,r:s(255,l(a.r,0)),g:s(255,l(a.g,0)),b:s(255,l(a.b,0)),a:o}}(e);this._originalInput=e,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=o(100*this._a)/100,this._format=c.format||d.format,this._gradientType=c.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=d.ok,this._tc_id=a++}function d(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var i,r,a=l(e,t,n),o=s(e,t,n),c=(a+o)/2;if(a==o)i=r=0;else{var u=a-o;switch(r=c>.5?u/(2-a-o):u/(a+o),a){case e:i=(t-n)/u+(t<n?6:0);break;case t:i=(n-e)/u+2;break;case n:i=(e-t)/u+4}i/=6}return{h:i,s:r,l:c}}function g(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var i,r,a=l(e,t,n),o=s(e,t,n),c=a,u=a-o;if(r=0===a?0:u/a,a==o)i=0;else{switch(a){case e:i=(t-n)/u+(t<n?6:0);break;case t:i=(n-e)/u+2;break;case n:i=(e-t)/u+4}i/=6}return{h:i,s:r,v:c}}function h(e,t,n,i){var r=[Z(o(e).toString(16)),Z(o(t).toString(16)),Z(o(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function f(e,t,n,i){return[Z(E(i)),Z(o(e).toString(16)),Z(o(t).toString(16)),Z(o(n).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s-=t/100,n.s=S(n.s),u(n)}function m(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s+=t/100,n.s=S(n.s),u(n)}function v(e){return u(e).desaturate(100)}function b(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l+=t/100,n.l=S(n.l),u(n)}function y(e,t){t=0===t?0:t||10;var n=u(e).toRgb();return n.r=l(0,s(255,n.r-o(-t/100*255))),n.g=l(0,s(255,n.g-o(-t/100*255))),n.b=l(0,s(255,n.b-o(-t/100*255))),u(n)}function I(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l-=t/100,n.l=S(n.l),u(n)}function C(e,t){var n=u(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,u(n)}function x(e){var t=u(e).toHsl();return t.h=(t.h+180)%360,u(t)}function B(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+120)%360,s:t.s,l:t.l}),u({h:(n+240)%360,s:t.s,l:t.l})]}function A(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+90)%360,s:t.s,l:t.l}),u({h:(n+180)%360,s:t.s,l:t.l}),u({h:(n+270)%360,s:t.s,l:t.l})]}function F(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+72)%360,s:t.s,l:t.l}),u({h:(n+216)%360,s:t.s,l:t.l})]}function Q(e,t,n){t=t||6,n=n||30;var i=u(e).toHsl(),r=360/n,a=[u(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,a.push(u(i));return a}function U(e,t){t=t||6;for(var n=u(e).toHsv(),i=n.h,r=n.s,a=n.v,o=[],s=1/t;t--;)o.push(u({h:i,s:r,v:a})),a=(a+s)%1;return o}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,i,r=this.toRgb();return e=r.r/255,n=r.g/255,i=r.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:t.pow((i+.055)/1.055,2.4))},setAlpha:function(e){return this._a=R(e),this._roundA=o(100*this._a)/100,this},toHsv:function(){var e=g(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=g(this._r,this._g,this._b),t=o(360*e.h),n=o(100*e.s),i=o(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=d(this._r,this._g,this._b),t=o(360*e.h),n=o(100*e.s),i=o(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return h(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,i,r){var a=[Z(o(e).toString(16)),Z(o(t).toString(16)),Z(o(n).toString(16)),Z(E(i))];if(r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*L(this._r,255))+"%",g:o(100*L(this._g,255))+"%",b:o(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*L(this._r,255))+"%, "+o(100*L(this._g,255))+"%, "+o(100*L(this._b,255))+"%)":"rgba("+o(100*L(this._r,255))+"%, "+o(100*L(this._g,255))+"%, "+o(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(G[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+f(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=u(e);n="#"+f(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(I,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Q,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(U,arguments)},splitcomplement:function(){return this._applyCombination(F,arguments)},triad:function(){return this._applyCombination(B,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},u.fromRatio=function(e,t){if("object"==i(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:k(e[r]));e=n}return u(e,t)},u.equals=function(e,t){return!(!e||!t)&&u(e).toRgbString()==u(t).toRgbString()},u.random=function(){return u.fromRatio({r:c(),g:c(),b:c()})},u.mix=function(e,t,n){n=0===n?0:n||50;var i=u(e).toRgb(),r=u(t).toRgb(),a=n/100;return u({r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a})},u.readability=function(e,n){var i=u(e),r=u(n);return(t.max(i.getLuminance(),r.getLuminance())+.05)/(t.min(i.getLuminance(),r.getLuminance())+.05)},u.isReadable=function(e,t,n){var i,r,a=u.readability(e,t);switch(r=!1,(i=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},u.mostReadable=function(e,t,n){var i,r,a,o,s=null,l=0;r=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var c=0;c<t.length;c++)(i=u.readability(e,t[c]))>l&&(l=i,s=u(t[c]));return u.isReadable(e,s,{level:a,size:o})||!r?s:(n.includeFallbackColors=!1,u.mostReadable(e,["#fff","#000"],n))};var w=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},G=u.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(w);function R(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function L(e,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=s(n,l(0,parseFloat(e))),i&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function S(e){return s(1,l(0,e))}function V(e){return parseInt(e,16)}function Z(e){return 1==e.length?"0"+e:""+e}function k(e){return e<=1&&(e=100*e+"%"),e}function E(e){return t.round(255*parseFloat(e)).toString(16)}function X(e){return V(e)/255}var N,W,_,T=(W="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",_="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+W),rgba:new RegExp("rgba"+_),hsl:new RegExp("hsl"+W),hsla:new RegExp("hsla"+_),hsv:new RegExp("hsv"+W),hsva:new RegExp("hsva"+_),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function M(e){return!!T.CSS_UNIT.exec(e)}e.exports?e.exports=u:window.tinycolor=u}(Math)}(Id);var Cd=function(e){var t=e.editType,n=e.colorEditType;void 0===n&&(n=t);var i={family:{valType:"string",noBlank:!0,strict:!0,editType:t,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n},editType:t,description:""+(e.description||"")};return e.autoSize&&(i.size.dflt="auto"),e.autoColor&&(i.color.dflt="auto"),e.arrayOk&&(i.family.arrayOk=!0,i.size.arrayOk=!0,i.color.arrayOk=!0),i},xd={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},Bd=xd,Ad=Cd,Fd=Ad({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});Fd.family.dflt=Bd.HOVERFONT,Fd.size.dflt=Bd.HOVERFONTSIZE;var Qd={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:Fd,grouptitlefont:Ad({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}},Ud={},wd=hd,Gd=Array.isArray;function Rd(e,t,n,r){var a,o,s,l,c,u,d,g=e[0],h=e.length;if(2===h&&Gd(g)&&Gd(e[1])&&0===g.length){if(d=function(e,t){var n,r;for(n=0;n<e.length;n++){if(null!==(r=e[n])&&"object"===i(r))return!1;void 0!==r&&(t[n]=r)}return!0}(e[1],g),d)return g;g.splice(0,g.length)}for(var f=1;f<h;f++)for(o in a=e[f])s=g[o],l=a[o],r&&Gd(l)?g[o]=l:t&&l&&(wd(l)||(c=Gd(l)))?(c?(c=!1,u=s&&Gd(s)?s:[]):u=s&&wd(s)?s:{},g[o]=Rd([u,l],t,n,r)):(void 0!==l||n)&&(g[o]=l);return g}Ud.extendFlat=function(){return Rd(arguments,!1,!1,!1)},Ud.extendDeep=function(){return Rd(arguments,!0,!1,!1)},Ud.extendDeepAll=function(){return Rd(arguments,!0,!0,!1)},Ud.extendDeepNoArrays=function(){return Rd(arguments,!0,!1,!0)};var Ld=Cd,Sd=Qd.hoverlabel,Vd=Ud.extendFlat,Zd={hoverlabel:{bgcolor:Vd({},Sd.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:Vd({},Sd.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:Ld({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:Vd({},Sd.align,{arrayOk:!0}),namelength:Vd({},Sd.namelength,{arrayOk:!0}),editType:"none"}},kd=Cd,Ed=Zd,Xd={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:kd({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with `*reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appear as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:Ed.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc",description:["WARNING: All transforms are deprecated and may be removed from the API in next major version.","An array of operations that manipulate the trace data,","for example filtering or sorting the data arrays."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}},Nd=Id.exports,Wd={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},_d=Wd.RdBu;function Td(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var i=e[n];if(2!==i.length||+i[0]<t||!Nd(i[1]).isValid())return!1;t=+i[0]}return!0}var Md={scales:Wd,defaultScale:_d,get:function(e,t){if(t||(t=_d),!e)return t;function n(){try{e=Wd[e]||JSON.parse(e)}catch(n){e=t}}return"string"==typeof e&&(n(),"string"==typeof e&&n()),Td(e)?e:t},isValid:function(e){return void 0!==Wd[e]||Td(e)}},Hd={exports:{}},Yd={defaults:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],defaultLine:"#444",lightLine:"#eee",background:"#fff",borderLine:"#BEC8D9",lightFraction:1e3/11},Dd=Id.exports,zd=Yu,Od=zu.isTypedArray,Jd=Hd.exports={},jd=Yd;Jd.defaults=jd.defaults;var Pd=Jd.defaultLine=jd.defaultLine;Jd.lightLine=jd.lightLine;var Kd=Jd.background=jd.background;function qd(e){if(zd(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var i=n[1].trim().split(/\s*[\s,]\s*/),r="a"===t.charAt(3)&&4===i.length;if(!r&&3!==i.length)return e;for(var a=0;a<i.length;a++){if(!i[a].length)return e;if(i[a]=Number(i[a]),!(i[a]>=0))return e;if(3===a)i[a]>1&&(i[a]=1);else if(i[a]>=1)return e}var o=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return r?"rgba("+o+", "+i[3]+")":"rgb("+o+")"}Jd.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},Jd.rgb=function(e){return Jd.tinyRGB(Dd(e))},Jd.opacity=function(e){return e?Dd(e).getAlpha():0},Jd.addOpacity=function(e,t){var n=Dd(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},Jd.combine=function(e,t){var n=Dd(e).toRgb();if(1===n.a)return Dd(e).toRgbString();var i=Dd(t||Kd).toRgb(),r=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},a={r:r.r*(1-n.a)+n.r*n.a,g:r.g*(1-n.a)+n.g*n.a,b:r.b*(1-n.a)+n.b*n.a};return Dd(a).toRgbString()},Jd.contrast=function(e,t,n){var i=Dd(e);return 1!==i.getAlpha()&&(i=Dd(Jd.combine(e,Kd))),(i.isDark()?t?i.lighten(t):Kd:n?i.darken(n):Pd).toString()},Jd.stroke=function(e,t){var n=Dd(t);e.style({stroke:Jd.tinyRGB(n),"stroke-opacity":n.getAlpha()})},Jd.fill=function(e,t){var n=Dd(t);e.style({fill:Jd.tinyRGB(n),"fill-opacity":n.getAlpha()})},Jd.clean=function(e){if(e&&"object"===i(e)){var t,n,r,a,o=Object.keys(e);for(t=0;t<o.length;t++)if(a=e[r=o[t]],"color"===r.substr(r.length-5))if(Array.isArray(a))for(n=0;n<a.length;n++)a[n]=qd(a[n]);else e[r]=qd(a);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(a))for(n=0;n<a.length;n++)Array.isArray(a[n])&&(a[n][1]=qd(a[n][1]));else if(Array.isArray(a)){var s=a[0];if(!Array.isArray(s)&&s&&"object"===i(s))for(n=0;n<a.length;n++)Jd.clean(a[n])}else a&&"object"===i(a)&&!Od(a)&&Jd.clean(a)}};var $d={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2},eg={counter:function(e,t,n,i){var r=(t||"")+(n?"":"$"),a=!1===i?"":"^";return"xy"===e?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+r):new RegExp(a+e+"([2-9]|[1-9][0-9]+)?"+r)}};!function(e){var t=Yu,n=Id.exports,i=Xd,r=Md,a=Hd.exports,o=$d.DESELECTDIM,s=td,l=eg.counter,c=bd.modHalf,u=zu.isArrayOrTypedArray;function d(t,n){var i=e.valObjectMeta[n.valType];if(n.arrayOk&&u(t))return!0;if(i.validateFunction)return i.validateFunction(t,n);var r={},a=r,o={set:function(e){a=e}};return i.coerceFunction(t,o,r,n),a!==r}e.valObjectMeta={data_array:{description:["An {array} of data.","The value MUST be an {array}, or we ignore it.","Note that typed arrays (e.g. Float32Array) are supported."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){u(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(e,t,n,i){i.coerceNumber&&(e=+e),-1===i.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,i=0;i<n.length;i++){var r=String(n[i]);if("/"===r.charAt(0)&&"/"===r.charAt(r.length-1)){if(new RegExp(r.substr(1,r.length-2)).test(e))return!0}else if(e===n[i])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(e,n,i,r){!t(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?n.set(i):n.set(+e)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(e,n,i,r){e%1||!t(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?n.set(i):n.set(+e)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(e,t,n,i){if("string"!=typeof e){var r="number"==typeof e;!0!==i.strict&&r?t.set(String(e)):t.set(n)}else i.noBlank&&!e?t.set(n):t.set(e)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(e,t,i){n(e).isValid()?t.set(e):t.set(i)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,i){Array.isArray(e)&&e.length&&e.every((function(e){return n(e).isValid()}))?t.set(e):t.set(i)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(r.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,t,n){t.set(r.get(e,n))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(e,n,i){"auto"===e?n.set("auto"):t(e)?n.set(c(+e,360)):n.set(i)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(e,t,n,i){var r=i.regex||l(n);"string"==typeof e&&r.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){var n=t.dflt;return e===n||"string"==typeof e&&!!l(n).test(e)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(e,t,n,i){if("string"==typeof e)if(-1===(i.extras||[]).indexOf(e)){for(var r=e.split("+"),a=0;a<r.length;){var o=r[a];-1===i.flags.indexOf(o)||r.indexOf(o)<a?r.splice(a,1):a++}r.length?t.set(r.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(t,n,i,r){function a(t,n,i){var r,a={set:function(e){r=e}};return void 0===i&&(i=n.dflt),e.valObjectMeta[n.valType].coerceFunction(t,a,i,n),r}var o=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var s,l,c,u,d,g,h=r.items,f=[],p=Array.isArray(h),m=p&&o&&Array.isArray(h[0]),v=o&&p&&!m,b=p&&!v?h.length:t.length;if(i=Array.isArray(i)?i:[],o)for(s=0;s<b;s++)for(f[s]=[],c=Array.isArray(t[s])?t[s]:[],d=v?h.length:p?h[s].length:c.length,l=0;l<d;l++)u=v?h[l]:p?h[s][l]:h,void 0!==(g=a(c[l],u,(i[s]||[])[l]))&&(f[s][l]=g);else for(s=0;s<b;s++)void 0!==(g=a(t[s],p?h[s]:h,i[s]))&&(f[s]=g);n.set(f)}else n.set(i)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,i=Array.isArray(n),r=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var a=0;a<e.length;a++)if(r){if(!Array.isArray(e[a])||!t.freeLength&&e[a].length!==n[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!d(e[a][o],i?n[a][o]:n))return!1}else if(!d(e[a],i?n[a]:n))return!1;return!0}}},e.coerce=function(t,n,i,r,a){var o=s(i,r).get(),l=s(t,r),c=s(n,r),g=l.get(),h=n._template;if(void 0===g&&h&&(g=s(h,r).get(),h=0),void 0===a&&(a=o.dflt),o.arrayOk&&u(g))return c.set(g),g;var f=e.valObjectMeta[o.valType].coerceFunction;f(g,c,a,o);var p=c.get();return h&&p===a&&!d(g,o)&&(f(g=s(h,r).get(),c,a,o),p=c.get()),p},e.coerce2=function(t,n,i,r,a){var o=s(t,r),l=e.coerce(t,n,i,r,a),c=o.get();return null!=c&&l},e.coerceFont=function(e,t,n){var i={};return n=n||{},i.family=e(t+".family",n.family),i.size=e(t+".size",n.size),i.color=e(t+".color",n.color),i},e.coercePattern=function(e,t,n,i){if(e(t+".shape")){e(t+".solidity"),e(t+".size");var r="overlay"===e(t+".fillmode");if(!i){var o=e(t+".bgcolor",r?n:void 0);e(t+".fgcolor",r?a.contrast(o):n)}e(t+".fgopacity",r?.5:1)}},e.coerceHoverinfo=function(t,n,r){var a,o=n._module.attributes,s=o.hoverinfo?o:i,l=s.hoverinfo;if(1===r._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),a=c.join("+")}return e.coerce(t,n,s,"hoverinfo",a)},e.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var n,i,r=e.marker.opacity;if(void 0!==r)u(r)||e.selected||e.unselected||(n=r,i=o*r),t("selected.marker.opacity",n),t("unselected.marker.opacity",i)}},e.validate=d}(yd);var tg={},ng={exports:{}},ig={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo and mapbox subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo and mapbox) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export.","This config option was formerly named `plot3dPixelRatio`","which is now deprecated."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},globalTransforms:{valType:"any",dflt:[],description:["Set global transform to be applied to all traces with no","specification needed"].join(" ")},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},rg={};!function e(t,n){for(var i in t){var r=t[i];r.valType?n[i]=r.dflt:(n[i]||(n[i]={}),e(r,n[i]))}}(ig,rg);var ag={configAttributes:ig,dfltConfig:rg},og=Gs.exports,sg=Yu,lg=[],cg=function(e,t){if(-1===lg.indexOf(e)){lg.push(e);var n=1e3;sg(t)?n=t:"long"===t&&(n=3e3);var i=og.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0),i.selectAll(".notifier-note").data(lg).enter().append("div").classed("notifier-note",!0).style("opacity",0).each((function(e){var i=og.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",(function(){i.transition().call(r)}));for(var a=i.append("p"),o=e.split(/<br\s*\/?>/g),s=0;s<o.length;s++)s&&a.append("br"),a.append("span").text(o[s]);"stick"===t?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(n).call(r)}))}function r(e){e.duration(700).style("opacity",0).each("end",(function(e){var t=lg.indexOf(e);-1!==t&&lg.splice(t,1),og.select(this).remove()}))}},ug=ag.dfltConfig,dg=cg,gg=ng.exports={};gg.log=function(){var e;if(ug.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(ug.notifyOnLogging>1){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);dg(n.join("<br>"),"long")}},gg.warn=function(){var e;if(ug.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(ug.notifyOnLogging>0){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);dg(n.join("<br>"),"stick")}},gg.error=function(){var e;if(ug.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(ug.notifyOnLogging>0){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);dg(n.join("<br>"),"stick")}};var hg={},fg=function(){},pg=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),i=0;i<e.length;i++)if(e[i]instanceof RegExp&&e[i].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e},mg={};var vg=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};var bg=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};var yg=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var Ig=function(e,t){if(e===t){var n=t[1],i=t[2],r=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=r,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e};var Cg=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],g=t[10],h=t[11],f=t[12],p=t[13],m=t[14],v=t[15],b=n*s-i*o,y=n*l-r*o,I=n*c-a*o,C=i*l-r*s,x=i*c-a*s,B=r*c-a*l,A=u*p-d*f,F=u*m-g*f,Q=u*v-h*f,U=d*m-g*p,w=d*v-h*p,G=g*v-h*m,R=b*G-y*w+I*U+C*Q-x*F+B*A;if(!R)return null;return R=1/R,e[0]=(s*G-l*w+c*U)*R,e[1]=(r*w-i*G-a*U)*R,e[2]=(p*B-m*x+v*C)*R,e[3]=(g*x-d*B-h*C)*R,e[4]=(l*Q-o*G-c*F)*R,e[5]=(n*G-r*Q+a*F)*R,e[6]=(m*I-f*B-v*y)*R,e[7]=(u*B-g*I+h*y)*R,e[8]=(o*w-s*Q+c*A)*R,e[9]=(i*Q-n*w-a*A)*R,e[10]=(f*x-p*I+v*b)*R,e[11]=(d*I-u*x-h*b)*R,e[12]=(s*F-o*U-l*A)*R,e[13]=(n*U-i*F+r*A)*R,e[14]=(p*y-f*C-m*b)*R,e[15]=(u*C-d*y+g*b)*R,e};var xg=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],g=t[10],h=t[11],f=t[12],p=t[13],m=t[14],v=t[15];return e[0]=s*(g*v-h*m)-d*(l*v-c*m)+p*(l*h-c*g),e[1]=-(i*(g*v-h*m)-d*(r*v-a*m)+p*(r*h-a*g)),e[2]=i*(l*v-c*m)-s*(r*v-a*m)+p*(r*c-a*l),e[3]=-(i*(l*h-c*g)-s*(r*h-a*g)+d*(r*c-a*l)),e[4]=-(o*(g*v-h*m)-u*(l*v-c*m)+f*(l*h-c*g)),e[5]=n*(g*v-h*m)-u*(r*v-a*m)+f*(r*h-a*g),e[6]=-(n*(l*v-c*m)-o*(r*v-a*m)+f*(r*c-a*l)),e[7]=n*(l*h-c*g)-o*(r*h-a*g)+u*(r*c-a*l),e[8]=o*(d*v-h*p)-u*(s*v-c*p)+f*(s*h-c*d),e[9]=-(n*(d*v-h*p)-u*(i*v-a*p)+f*(i*h-a*d)),e[10]=n*(s*v-c*p)-o*(i*v-a*p)+f*(i*c-a*s),e[11]=-(n*(s*h-c*d)-o*(i*h-a*d)+u*(i*c-a*s)),e[12]=-(o*(d*m-g*p)-u*(s*m-l*p)+f*(s*g-l*d)),e[13]=n*(d*m-g*p)-u*(i*m-r*p)+f*(i*g-r*d),e[14]=-(n*(s*m-l*p)-o*(i*m-r*p)+f*(i*l-r*s)),e[15]=n*(s*g-l*d)-o*(i*g-r*d)+u*(i*l-r*s),e};var Bg=function(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],g=e[11],h=e[12],f=e[13],p=e[14],m=e[15];return(t*o-n*a)*(d*m-g*p)-(t*s-i*a)*(u*m-g*f)+(t*l-r*a)*(u*p-d*f)+(n*s-i*o)*(c*m-g*h)-(n*l-r*o)*(c*p-d*h)+(i*l-r*s)*(c*f-u*h)};var Ag=function(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],g=t[9],h=t[10],f=t[11],p=t[12],m=t[13],v=t[14],b=t[15],y=n[0],I=n[1],C=n[2],x=n[3];return e[0]=y*i+I*s+C*d+x*p,e[1]=y*r+I*l+C*g+x*m,e[2]=y*a+I*c+C*h+x*v,e[3]=y*o+I*u+C*f+x*b,y=n[4],I=n[5],C=n[6],x=n[7],e[4]=y*i+I*s+C*d+x*p,e[5]=y*r+I*l+C*g+x*m,e[6]=y*a+I*c+C*h+x*v,e[7]=y*o+I*u+C*f+x*b,y=n[8],I=n[9],C=n[10],x=n[11],e[8]=y*i+I*s+C*d+x*p,e[9]=y*r+I*l+C*g+x*m,e[10]=y*a+I*c+C*h+x*v,e[11]=y*o+I*u+C*f+x*b,y=n[12],I=n[13],C=n[14],x=n[15],e[12]=y*i+I*s+C*d+x*p,e[13]=y*r+I*l+C*g+x*m,e[14]=y*a+I*c+C*h+x*v,e[15]=y*o+I*u+C*f+x*b,e};var Fg=function(e,t,n){var i,r,a,o,s,l,c,u,d,g,h,f,p=n[0],m=n[1],v=n[2];t===e?(e[12]=t[0]*p+t[4]*m+t[8]*v+t[12],e[13]=t[1]*p+t[5]*m+t[9]*v+t[13],e[14]=t[2]*p+t[6]*m+t[10]*v+t[14],e[15]=t[3]*p+t[7]*m+t[11]*v+t[15]):(i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],g=t[9],h=t[10],f=t[11],e[0]=i,e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=g,e[10]=h,e[11]=f,e[12]=i*p+s*m+d*v+t[12],e[13]=r*p+l*m+g*v+t[13],e[14]=a*p+c*m+h*v+t[14],e[15]=o*p+u*m+f*v+t[15]);return e};var Qg=function(e,t,n){var i=n[0],r=n[1],a=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};var Ug=function(e,t,n,i){var r,a,o,s,l,c,u,d,g,h,f,p,m,v,b,y,I,C,x,B,A,F,Q,U,w=i[0],G=i[1],R=i[2],L=Math.sqrt(w*w+G*G+R*R);if(Math.abs(L)<1e-6)return null;w*=L=1/L,G*=L,R*=L,r=Math.sin(n),a=Math.cos(n),o=1-a,s=t[0],l=t[1],c=t[2],u=t[3],d=t[4],g=t[5],h=t[6],f=t[7],p=t[8],m=t[9],v=t[10],b=t[11],y=w*w*o+a,I=G*w*o+R*r,C=R*w*o-G*r,x=w*G*o-R*r,B=G*G*o+a,A=R*G*o+w*r,F=w*R*o+G*r,Q=G*R*o-w*r,U=R*R*o+a,e[0]=s*y+d*I+p*C,e[1]=l*y+g*I+m*C,e[2]=c*y+h*I+v*C,e[3]=u*y+f*I+b*C,e[4]=s*x+d*B+p*A,e[5]=l*x+g*B+m*A,e[6]=c*x+h*B+v*A,e[7]=u*x+f*B+b*A,e[8]=s*F+d*Q+p*U,e[9]=l*F+g*Q+m*U,e[10]=c*F+h*Q+v*U,e[11]=u*F+f*Q+b*U,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e};var wg=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],g=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*r+c*i,e[5]=o*r+u*i,e[6]=s*r+d*i,e[7]=l*r+g*i,e[8]=c*r-a*i,e[9]=u*r-o*i,e[10]=d*r-s*i,e[11]=g*r-l*i,e};var Gg=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],g=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*r-c*i,e[1]=o*r-u*i,e[2]=s*r-d*i,e[3]=l*r-g*i,e[8]=a*i+c*r,e[9]=o*i+u*r,e[10]=s*i+d*r,e[11]=l*i+g*r,e};var Rg=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],g=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*r+c*i,e[1]=o*r+u*i,e[2]=s*r+d*i,e[3]=l*r+g*i,e[4]=c*r-a*i,e[5]=u*r-o*i,e[6]=d*r-s*i,e[7]=g*r-l*i,e};var Lg=function(e,t,n){var i,r,a,o=n[0],s=n[1],l=n[2],c=Math.sqrt(o*o+s*s+l*l);if(Math.abs(c)<1e-6)return null;return o*=c=1/c,s*=c,l*=c,i=Math.sin(t),r=Math.cos(t),a=1-r,e[0]=o*o*a+r,e[1]=s*o*a+l*i,e[2]=l*o*a-s*i,e[3]=0,e[4]=o*s*a-l*i,e[5]=s*s*a+r,e[6]=l*s*a+o*i,e[7]=0,e[8]=o*l*a+s*i,e[9]=s*l*a-o*i,e[10]=l*l*a+r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var Sg=function(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=i+i,l=r+r,c=a+a,u=i*s,d=i*l,g=i*c,h=r*l,f=r*c,p=a*c,m=o*s,v=o*l,b=o*c;return e[0]=1-(h+p),e[1]=d+b,e[2]=g-v,e[3]=0,e[4]=d-b,e[5]=1-(u+p),e[6]=f+m,e[7]=0,e[8]=g+v,e[9]=f-m,e[10]=1-(u+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e};var Vg=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var Zg=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e};var kg=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var Eg=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var Xg=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var Ng=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n+n,s=i+i,l=r+r,c=n*o,u=i*o,d=i*s,g=r*o,h=r*s,f=r*l,p=a*o,m=a*s,v=a*l;return e[0]=1-d-f,e[1]=u+v,e[2]=g-m,e[3]=0,e[4]=u-v,e[5]=1-c-f,e[6]=h+p,e[7]=0,e[8]=g+m,e[9]=h-p,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var Wg=function(e,t,n,i,r,a,o){var s=1/(n-t),l=1/(r-i),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+i)*l,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e};var _g=function(e,t,n,i,r){var a=1/Math.tan(t/2),o=1/(i-r);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+i)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*i*o,e[15]=0,e};var Tg=function(e,t,n,i,r,a,o){var s=1/(t-n),l=1/(i-r),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(o+a)*c,e[15]=1,e};var Mg=yg,Hg=function(e,t,n,i){var r,a,o,s,l,c,u,d,g,h,f=t[0],p=t[1],m=t[2],v=i[0],b=i[1],y=i[2],I=n[0],C=n[1],x=n[2];if(Math.abs(f-I)<1e-6&&Math.abs(p-C)<1e-6&&Math.abs(m-x)<1e-6)return Mg(e);u=f-I,d=p-C,g=m-x,h=1/Math.sqrt(u*u+d*d+g*g),r=b*(g*=h)-y*(d*=h),a=y*(u*=h)-v*g,o=v*d-b*u,(h=Math.sqrt(r*r+a*a+o*o))?(r*=h=1/h,a*=h,o*=h):(r=0,a=0,o=0);s=d*o-g*a,l=g*r-u*o,c=u*a-d*r,(h=Math.sqrt(s*s+l*l+c*c))?(s*=h=1/h,l*=h,c*=h):(s=0,l=0,c=0);return e[0]=r,e[1]=s,e[2]=u,e[3]=0,e[4]=a,e[5]=l,e[6]=d,e[7]=0,e[8]=o,e[9]=c,e[10]=g,e[11]=0,e[12]=-(r*f+a*p+o*m),e[13]=-(s*f+l*p+c*m),e[14]=-(u*f+d*p+g*m),e[15]=1,e};var Yg=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"};var Dg={create:function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:vg,copy:bg,identity:yg,transpose:Ig,invert:Cg,adjoint:xg,determinant:Bg,multiply:Ag,translate:Fg,scale:Qg,rotate:Ug,rotateX:wg,rotateY:Gg,rotateZ:Rg,fromRotation:Lg,fromRotationTranslation:Sg,fromScaling:Vg,fromTranslation:Zg,fromXRotation:kg,fromYRotation:Eg,fromZRotation:Xg,fromQuat:Ng,frustum:Wg,perspective:_g,perspectiveFromFieldOfView:function(e,t,n,i){var r=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(r+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(r-a)*c*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e},ortho:Tg,lookAt:Hg,str:Yg};!function(e){var t=Dg;e.init2dArray=function(e,t){for(var n=new Array(e),i=0;i<e;i++)n[i]=new Array(t);return n},e.transposeRagged=function(e){var t,n,i=0,r=e.length;for(t=0;t<r;t++)i=Math.max(i,e[t].length);var a=new Array(i);for(t=0;t<i;t++)for(a[t]=new Array(r),n=0;n<r;n++)a[t][n]=e[n][t];return a},e.dot=function(t,n){if(!t.length||!n.length||t.length!==n.length)return null;var i,r,a=t.length;if(t[0].length)for(i=new Array(a),r=0;r<a;r++)i[r]=e.dot(t[r],n);else if(n[0].length){var o=e.transposeRagged(n);for(i=new Array(o.length),r=0;r<o.length;r++)i[r]=e.dot(t,o[r])}else for(i=0,r=0;r<a;r++)i+=t[r]*n[r];return i},e.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},e.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},e.rotationXYMatrix=function(t,n,i){return e.dot(e.dot(e.translationMatrix(n,i),e.rotationMatrix(t)),e.translationMatrix(-n,-i))},e.apply3DTransform=function(t){return function(){var n=arguments,i=1===arguments.length?n[0]:[n[0],n[1],n[2]||0];return e.dot(t,[i[0],i[1],i[2],1]).slice(0,3)}},e.apply2DTransform=function(t){return function(){var n=arguments;3===n.length&&(n=n[0]);var i=1===arguments.length?n[0]:[n[0],n[1]];return e.dot(t,[i[0],i[1],1]).slice(0,2)}},e.apply2DTransform2=function(t){var n=e.apply2DTransform(t);return function(e){return n(e.slice(0,2)).concat(n(e.slice(2,4)))}},e.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.inverseTransformMatrix=function(e){var n=[];return t.invert(n,e),[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}}(mg);var zg=Gs.exports,Og=ng.exports,Jg=mg,jg=Dg;function Pg(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function Kg(e,t,n){var i="plotly.js-style-"+e,r=document.getElementById(i);r||((r=document.createElement("style")).setAttribute("id",i),r.appendChild(document.createTextNode("")),document.head.appendChild(r));var a=r.sheet;a.insertRule?a.insertRule(t+"{"+n+"}",0):a.addRule?a.addRule(t,n,0):Og.warn("addStyleRule failed")}function qg(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return"none"===n?null:n.replace("matrix","").replace("3d","").slice(1,-1).split(",").map((function(e){return+e}))}function $g(e){for(var t=[];eh(e);)t.push(e),e=e.parentNode;return t}function eh(e){return e&&(e instanceof Element||e instanceof HTMLElement)}var th={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){var t=zg.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},removeElement:Pg,addStyleRule:function(e,t){Kg("global",e,t)},addRelatedStyleRule:Kg,deleteRelatedStyleRule:function(e){var t="plotly.js-style-"+e,n=document.getElementById(t);n&&Pg(n)},getFullTransformMatrix:function(e){var t=$g(e),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(e){var t=qg(e);if(t){var i=Jg.convertCssMatrix(t);n=jg.multiply(n,n,i)}})),n},getElementTransformMatrix:qg,getElementAndAncestors:$g,equalDomRects:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}},nh={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}},ih={};ih.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")},ih.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")};var rh=ih.dash,ah=Ud.extendFlat,oh={newshape:{line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,editType:"none",description:"Sets the line width (in px)."},dash:ah({},rh,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none",description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none",description:"Specifies whether new shapes are drawn below or above traces."},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active shape."},editType:"none"}},sh=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:t,description:"The amount of padding (in px) on the left side of the component."},editType:t}},lh=Cd,ch=nh,uh=Yd,dh=oh,gh=sh,hh=Ud.extendFlat,fh=lh({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});fh.family.dflt='"Open Sans", verdana, arial, sans-serif',fh.size.dflt=12,fh.color.dflt=uh.defaultLine;var ph={font:fh,title:{text:{valType:"string",editType:"layoutstyle",description:["Sets the plot's title.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:lh({editType:"layoutstyle",description:["Sets the title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:hh(gh({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:uh.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:uh.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:uh.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:dh.newshape,activeshape:dh.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:hh({},ch.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the contents of the title, please use `title.text` now."].join(" ")},titlefont:lh({editType:"layoutstyle",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}};!function(e){var t=ng.exports,n=fg,r=pg,a=hd,o=th.addStyleRule,s=Ud,l=Xd,c=ph,u=s.extendFlat,d=s.extendDeepAll;function g(n){var r=n.name,a=n.categories,s=n.meta;if(e.modules[r])t.log("Type "+r+" already registered");else{e.subplotsRegistry[n.basePlotModule.name]||function(n){var i=n.name;if(e.subplotsRegistry[i])return void t.log("Plot type "+i+" already registered.");for(var r in m(n),e.subplotsRegistry[i]=n,e.componentsRegistry)y(r,n.name)}(n.basePlotModule);for(var l={},c=0;c<a.length;c++)l[a[c]]=!0,e.allCategories[a[c]]=!0;for(var d in e.modules[r]={_module:n,categories:l},s&&Object.keys(s).length&&(e.modules[r].meta=s),e.allTypes.push(r),e.componentsRegistry)v(d,r);n.layoutAttributes&&u(e.traceLayoutAttributes,n.layoutAttributes);var g=n.basePlotModule,h=g.name;if("mapbox"===h){var f=g.constants.styleRules;for(var p in f)o(".js-plotly-plot .plotly .mapboxgl-"+p,f[p])}"geo"!==h&&"mapbox"!==h||void 0===("undefined"==typeof window?"undefined":i(window))||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function h(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var n=t.name;for(var i in e.componentsRegistry[n]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&r(e.layoutArrayContainers,n),m(t)),e.modules)v(n,i);for(var a in e.subplotsRegistry)y(n,a);for(var o in e.transformsRegistry)b(n,o);t.schema&&t.schema.layout&&d(c,t.schema.layout)}function f(n){if("string"!=typeof n.name)throw new Error("Transform module *name* must be a string.");var i="Transform module "+n.name,r="function"==typeof n.transform,o="function"==typeof n.calcTransform;if(!r&&!o)throw new Error(i+" is missing a *transform* or *calcTransform* method.");for(var s in r&&o&&t.log([i+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),a(n.attributes)||t.log(i+" registered without an *attributes* object."),"function"!=typeof n.supplyDefaults&&t.log(i+" registered without a *supplyDefaults* method."),e.transformsRegistry[n.name]=n,e.componentsRegistry)b(s,n.name)}function p(t){var n=t.name,i=n.split("-")[0],r=t.dictionary,a=t.format,o=r&&Object.keys(r).length,s=a&&Object.keys(a).length,l=e.localeRegistry,c=l[n];if(c||(l[n]=c={}),i!==n){var u=l[i];u||(l[i]=u={}),o&&u.dictionary===c.dictionary&&(u.dictionary=r),s&&u.format===c.format&&(u.format=a)}o&&(c.dictionary=r),s&&(c.format=a)}function m(t){if(t.layoutAttributes){var n=t.layoutAttributes._arrayAttrRegexps;if(n)for(var i=0;i<n.length;i++)r(e.layoutArrayRegexes,n[i])}}function v(t,n){var i=e.componentsRegistry[t].schema;if(i&&i.traces){var r=i.traces[n];r&&d(e.modules[n]._module.attributes,r)}}function b(t,n){var i=e.componentsRegistry[t].schema;if(i&&i.transforms){var r=i.transforms[n];r&&d(e.transformsRegistry[n].attributes,r)}}function y(t,n){var i=e.componentsRegistry[t].schema;if(i&&i.subplots){var r=e.subplotsRegistry[n],a=r.layoutAttributes,o="subplot"===r.attr?r.name:r.attr;Array.isArray(o)&&(o=o[0]);var s=i.subplots[o];a&&s&&d(a,s)}}function I(e){return"object"===i(e)&&(e=e.type),e}e.modules={},e.allCategories={},e.allTypes=[],e.subplotsRegistry={},e.transformsRegistry={},e.componentsRegistry={},e.layoutArrayContainers=[],e.layoutArrayRegexes=[],e.traceLayoutAttributes={},e.localeRegistry={},e.apiMethodRegistry={},e.collectableSubplotTypes=null,e.register=function(t){if(e.collectableSubplotTypes=null,!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if(!i)throw new Error("Invalid module was attempted to be registered!");switch(i.moduleType){case"trace":g(i);break;case"transform":f(i);break;case"component":h(i);break;case"locale":p(i);break;case"apiMethod":var r=i.name;e.apiMethodRegistry[r]=i.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},e.getModule=function(t){var n=e.modules[I(t)];return!!n&&n._module},e.traceIs=function(n,i){if("various"===(n=I(n)))return!1;var r=e.modules[n];return r||(n&&t.log("Unrecognized trace type "+n+"."),r=e.modules[l.type.dflt]),!!r.categories[i]},e.getTransformIndices=function(e,t){for(var n=[],i=e.transforms||[],r=0;r<i.length;r++)i[r].type===t&&n.push(r);return n},e.hasTransform=function(e,t){for(var n=e.transforms||[],i=0;i<n.length;i++)if(n[i].type===t)return!0;return!1},e.getComponentMethod=function(t,i){var r=e.componentsRegistry[t];return r&&r[i]||n},e.call=function(){var t=arguments[0],n=[].slice.call(arguments,1);return e.apiMethodRegistry[t].apply(null,n)}}(hg),function(e){var t,n,r=Au.timeFormat,a=Yu,o=ng.exports,s=bd.mod,l=Du.BADNUM,c=Du.ONEDAY,u=Du.ONEHOUR,d=Du.ONEMIN,g=Du.ONESEC,h=Du.EPOCHJD,f=hg,p=Au.utcFormat,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=(new Date).getFullYear()-70;function y(e){return e&&f.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function I(e,t){return String(e+Math.pow(10,t)).substr(1)}e.dateTick0=function(t,n){var i=function(e,t){return y(e)?t?f.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:f.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}(t,!!n);if(n<2)return i;var r=e.dateTime2ms(i,t);return r+=c*(n-1),e.ms2DateTime(r,0,t)},e.dfltRange=function(e){return y(e)?f.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},e.isJSDate=function(e){return"object"===i(e)&&null!==e&&"function"==typeof e.getTime},e.dateTime2ms=function(i,r){if(e.isJSDate(i)){var a=i.getTimezoneOffset()*d,o=(i.getUTCMinutes()-i.getMinutes())*d+(i.getUTCSeconds()-i.getSeconds())*g+(i.getUTCMilliseconds()-i.getMilliseconds());if(o){var p=3*d;a=a-p/2+s(o-a+p/2,p)}return(i=Number(i)-a)>=t&&i<=n?i:l}if("string"!=typeof i&&"number"!=typeof i)return l;i=String(i);var I=y(r),C=i.charAt(0);!I||"G"!==C&&"g"!==C||(i=i.substr(1),r="");var x=I&&"chinese"===r.substr(0,7),B=i.match(x?v:m);if(!B)return l;var A=B[1],F=B[3]||"1",Q=Number(B[5]||1),U=Number(B[7]||0),w=Number(B[9]||0),G=Number(B[11]||0);if(I){if(2===A.length)return l;var R;A=Number(A);try{var L=f.getComponentMethod("calendars","getCal")(r);if(x){var S="i"===F.charAt(F.length-1);F=parseInt(F,10),R=L.newDate(A,L.toMonthIndex(A,F,S),Q)}else R=L.newDate(A,Number(F),Q)}catch(e){return l}return R?(R.toJD()-h)*c+U*u+w*d+G*g:l}A=2===A.length?(Number(A)+2e3-b)%100+b:Number(A),F-=1;var V=new Date(Date.UTC(2e3,F,Q,U,w));return V.setUTCFullYear(A),V.getUTCMonth()!==F||V.getUTCDate()!==Q?l:V.getTime()+G*g},t=e.MIN_MS=e.dateTime2ms("-9999"),n=e.MAX_MS=e.dateTime2ms("9999-12-31 23:59:59.9999"),e.isDateTime=function(t,n){return e.dateTime2ms(t,n)!==l};var C=90*c,x=3*u,B=5*d;function A(e,t,n,i,r){if((t||n||i||r)&&(e+=" "+I(t,2)+":"+I(n,2),(i||r)&&(e+=":"+I(i,2),r))){for(var a=4;r%10==0;)a-=1,r/=10;e+="."+I(r,a)}return e}e.ms2DateTime=function(e,i,r){if("number"!=typeof e||!(e>=t&&e<=n))return l;i||(i=0);var a,o,m,v,b,I,F=Math.floor(10*s(e+.05,1)),Q=Math.round(e-F/10);if(y(r)){var U=Math.floor(Q/c)+h,w=Math.floor(s(e,c));try{a=f.getComponentMethod("calendars","getCal")(r).fromJD(U).formatDate("yyyy-mm-dd")}catch(e){a=p("G%Y-%m-%d")(new Date(Q))}if("-"===a.charAt(0))for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=i<C?Math.floor(w/u):0,m=i<C?Math.floor(w%u/d):0,v=i<x?Math.floor(w%d/g):0,b=i<B?w%g*10+F:0}else I=new Date(Q),a=p("%Y-%m-%d")(I),o=i<C?I.getUTCHours():0,m=i<C?I.getUTCMinutes():0,v=i<x?I.getUTCSeconds():0,b=i<B?10*I.getUTCMilliseconds()+F:0;return A(a,o,m,v,b)},e.ms2DateTimeLocal=function(e){if(!(e>=t+c&&e<=n-c))return l;var i=Math.floor(10*s(e+.05,1)),a=new Date(Math.round(e-i/10));return A(r("%Y-%m-%d")(a),a.getHours(),a.getMinutes(),a.getSeconds(),10*a.getUTCMilliseconds()+i)},e.cleanDate=function(t,n,i){if(t===l)return n;if(e.isJSDate(t)||"number"==typeof t&&isFinite(t)){if(y(i))return o.error("JS Dates and milliseconds are incompatible with world calendars",t),n;if(!(t=e.ms2DateTimeLocal(+t))&&void 0!==n)return n}else if(!e.isDateTime(t,i))return o.error("unrecognized date",t),n;return t};var F=/%\d?f/g,Q=/%h/g,U={1:"1",2:"1",3:"2",4:"2"};function w(e,t,n,i){e=e.replace(F,(function(e){var n=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"}));var r=new Date(Math.floor(t+.05));if(e=e.replace(Q,(function(){return U[n("%q")(r)]})),y(i))try{e=f.getComponentMethod("calendars","worldCalFmt")(e,t,i)}catch(e){return"Invalid"}return n(e)(r)}var G=[59,59.9,59.99,59.999,59.9999];e.formatDate=function(e,t,n,i,r,o){if(r=y(r)&&r,!t)if("y"===n)t=o.year;else if("m"===n)t=o.month;else{if("d"!==n)return function(e,t){var n=s(e+.05,c),i=I(Math.floor(n/u),2)+":"+I(s(Math.floor(n/d),60),2);if("M"!==t){a(t)||(t=0);var r=(100+Math.min(s(e/g,60),G[t])).toFixed(t).substr(1);t>0&&(r=r.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+r}return i}(e,n)+"\n"+w(o.dayMonthYear,e,i,r);t=o.dayMonth+"\n"+o.year}return w(t,e,i,r)};var R=3*c;e.incrementMonth=function(e,t,n){n=y(n)&&n;var i=s(e,c);if(e=Math.round(e-i),n)try{var r=Math.round(e/c)+h,a=f.getComponentMethod("calendars","getCal")(n),l=a.fromJD(r);return t%12?a.add(l,t,"m"):a.add(l,t/12,"y"),(l.toJD()-h)*c+i}catch(t){o.error("invalid ms "+e+" in calendar "+n)}var u=new Date(e+R);return u.setUTCMonth(u.getUTCMonth()+t)+i-R},e.findExactDates=function(e,t){for(var n,i,r=0,o=0,s=0,l=0,u=y(t)&&f.getComponentMethod("calendars","getCal")(t),d=0;d<e.length;d++)if(i=e[d],a(i)){if(!(i%c))if(u)try{1===(n=u.fromJD(i/c+h)).day()?1===n.month()?r++:o++:s++}catch(e){}else 1===(n=new Date(i)).getUTCDate()?0===n.getUTCMonth()?r++:o++:s++}else l++;s+=o+=r;var g=e.length-l;return{exactYears:r/g,exactMonths:o/g,exactDays:s/g}}}(tg);var mh={},vh=function(e){return e};!function(e){var t=Yu,n=ng.exports,i=vh,r=Du.BADNUM,a=1e-9;function o(e,t){return e<t}function s(e,t){return e<=t}function l(e,t){return e>t}function c(e,t){return e>=t}e.findBin=function(e,i,r){if(t(i.start))return r?Math.ceil((e-i.start)/i.size-a)-1:Math.floor((e-i.start)/i.size+a);var u,d,g=0,h=i.length,f=0,p=h>1?(i[h-1]-i[0])/(h-1):1;for(d=p>=0?r?o:s:r?c:l,e+=p*a*(r?-1:1)*(p>=0?1:-1);g<h&&f++<100;)d(i[u=Math.floor((g+h)/2)],e)?g=u+1:h=u;return f>90&&n.log("Long binary search..."),g-1},e.sorterAsc=function(e,t){return e-t},e.sorterDes=function(e,t){return t-e},e.distinctVals=function(t){var n,i=t.slice();for(i.sort(e.sorterAsc),n=i.length-1;n>-1&&i[n]===r;n--);for(var a,o=i[n]-i[0]||1,s=o/(n||1)/1e4,l=[],c=0;c<=n;c++){var u=i[c],d=u-a;void 0===a?(l.push(u),a=u):d>s&&(o=Math.min(o,d),l.push(u),a=u)}return{vals:l,minDiff:o}},e.roundUp=function(e,t,n){for(var i,r=0,a=t.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;r<a&&o++<100;)t[i=c((r+a)/2)]<=e?r=i+s:a=i-l;return t[r]},e.sort=function(e,t){for(var n=0,i=0,r=1;r<e.length;r++){var a=t(e[r],e[r-1]);if(a<0?n=1:a>0&&(i=1),n&&i)return e.sort(t)}return i?e:e.reverse()},e.findIndexOfMin=function(e,t){t=t||i;for(var n,r=1/0,a=0;a<e.length;a++){var o=t(e[a]);o<r&&(r=o,n=a)}return n}}(mh);var bh=function(e){return Object.keys(e).sort()},yh={};!function(e){var t=Yu,n=zu.isArrayOrTypedArray;e.aggNums=function(i,r,a,o){var s,l;if((!o||o>a.length)&&(o=a.length),t(r)||(r=!1),n(a[0])){for(l=new Array(o),s=0;s<o;s++)l[s]=e.aggNums(i,r,a[s]);a=l}for(s=0;s<o;s++)t(r)?t(a[s])&&(r=i(+r,+a[s])):r=a[s];return r},e.len=function(t){return e.aggNums((function(e){return e+1}),0,t)},e.mean=function(t,n){return n||(n=e.len(t)),e.aggNums((function(e,t){return e+t}),0,t)/n},e.midRange=function(t){if(void 0!==t&&0!==t.length)return(e.aggNums(Math.max,null,t)+e.aggNums(Math.min,null,t))/2},e.variance=function(n,i,r){return i||(i=e.len(n)),t(r)||(r=e.mean(n,i)),e.aggNums((function(e,t){return e+Math.pow(t-r,2)}),0,n)/i},e.stdev=function(t,n,i){return Math.sqrt(e.variance(t,n,i))},e.median=function(t){var n=t.slice().sort();return e.interp(n,.5)},e.interp=function(e,n){if(!t(n))throw"n should be a finite number";if((n=n*e.length-.5)<0)return e[0];if(n>e.length-1)return e[e.length-1];var i=n%1;return i*e[Math.ceil(n)]+(1-i)*e[Math.floor(n)]}}(yh);var Ih=bd.mod,Ch=bd.modHalf,xh=Math.PI,Bh=2*xh;function Ah(e){return Math.abs(e[1]-e[0])>Bh-1e-14}function Fh(e,t){return Ch(t-e,Bh)}function Qh(e,t){if(Ah(t))return!0;var n,i;t[0]<t[1]?(n=t[0],i=t[1]):(n=t[1],i=t[0]),(n=Ih(n,Bh))>(i=Ih(i,Bh))&&(i+=Bh);var r=Ih(e,Bh),a=r+Bh;return r>=n&&r<=i||a>=n&&a<=i}function Uh(e,t,n,i,r,a,o){r=r||0,a=a||0;var s,l,c,u,d,g=Ah([n,i]);function h(e,t){return[e*Math.cos(t)+r,a-e*Math.sin(t)]}g?(s=0,l=xh,c=Bh):n<i?(s=n,c=i):(s=i,c=n),e<t?(u=e,d=t):(u=t,d=e);var f,p=Math.abs(c-s)<=xh?0:1;function m(e,t,n){return"A"+[e,e]+" "+[0,p,n]+" "+h(e,t)}return g?f=null===u?"M"+h(d,s)+m(d,l,0)+m(d,c,0)+"Z":"M"+h(u,s)+m(u,l,0)+m(u,c,0)+"ZM"+h(d,s)+m(d,l,1)+m(d,c,1)+"Z":null===u?(f="M"+h(d,s)+m(d,c,0),o&&(f+="L0,0Z")):f="M"+h(u,s)+"L"+h(d,s)+m(d,c,0)+"L"+h(u,c)+m(u,s,1)+"Z",f}var wh,Gh,Rh,Lh={deg2rad:function(e){return e/180*xh},rad2deg:function(e){return e/xh*180},angleDelta:Fh,angleDist:function(e,t){return Math.abs(Fh(e,t))},isFullCircle:Ah,isAngleInsideSector:Qh,isPtInsideSector:function(e,t,n,i){return!!Qh(t,i)&&(n[0]<n[1]?(r=n[0],a=n[1]):(r=n[1],a=n[0]),e>=r&&e<=a);var r,a},pathArc:function(e,t,n,i,r){return Uh(null,e,t,n,i,r,0)},pathSector:function(e,t,n,i,r){return Uh(null,e,t,n,i,r,1)},pathAnnulus:function(e,t,n,i,r,a){return Uh(e,t,n,i,r,a,1)}},Sh={isLeftAnchor:function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},isCenterAnchor:function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},isRightAnchor:function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},isTopAnchor:function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},isMiddleAnchor:function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},isBottomAnchor:function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},Vh={},Zh=bd.mod;function kh(e,t,n,i,r,a,o,s){var l=n-e,c=r-e,u=o-r,d=i-t,g=a-t,h=s-a,f=l*h-u*d;if(0===f)return null;var p=(c*h-u*g)/f,m=(c*d-l*g)/f;return m<0||m>1||p<0||p>1?null:{x:e+l*p,y:t+d*p}}function Eh(e,t,n,i,r){var a=i*e+r*t;if(a<0)return i*i+r*r;if(a>n){var o=i-e,s=r-t;return o*o+s*s}var l=i*t-r*e;return l*l/n}Vh.segmentsIntersect=kh,Vh.segmentDistance=function(e,t,n,i,r,a,o,s){if(kh(e,t,n,i,r,a,o,s))return 0;var l=n-e,c=i-t,u=o-r,d=s-a,g=l*l+c*c,h=u*u+d*d,f=Math.min(Eh(l,c,g,r-e,a-t),Eh(l,c,g,o-e,s-t),Eh(u,d,h,e-r,t-a),Eh(u,d,h,n-r,i-a));return Math.sqrt(f)},Vh.getTextLocation=function(e,t,n,i){if(e===Gh&&i===Rh||(wh={},Gh=e,Rh=i),wh[n])return wh[n];var r=e.getPointAtLength(Zh(n-i/2,t)),a=e.getPointAtLength(Zh(n+i/2,t)),o=Math.atan((a.y-r.y)/(a.x-r.x)),s=e.getPointAtLength(Zh(n,t)),l={x:(4*s.x+r.x+a.x)/6,y:(4*s.y+r.y+a.y)/6,theta:o};return wh[n]=l,l},Vh.clearLocationCache=function(){Gh=null},Vh.getVisibleSegment=function(e,t,n){var i,r,a=t.left,o=t.right,s=t.top,l=t.bottom,c=0,u=e.getTotalLength(),d=u;function g(t){var n=e.getPointAtLength(t);0===t?i=n:t===u&&(r=n);var c=n.x<a?a-n.x:n.x>o?n.x-o:0,d=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(c*c+d*d)}for(var h=g(c);h;){if((c+=h+n)>d)return;h=g(c)}for(h=g(d);h;){if(c>(d-=h+n))return;h=g(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(i.x-r.x)<.1&&Math.abs(i.y-r.y)<.1}},Vh.findPointOnPath=function(e,t,n,i){for(var r,a,o,s=(i=i||{}).pathLength||e.getTotalLength(),l=i.tolerance||.001,c=i.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,g=0,h=s;d<c;){if(r=(g+h)/2,o=(a=e.getPointAtLength(r))[n]-t,Math.abs(o)<l)return a;u*o>0?h=r:g=r,d++}return a};var Xh={};!function(e){var t={};function n(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}e.throttle=function(e,i,r){var a=t[e],o=Date.now();if(!a){for(var s in t)t[s].ts<o-6e4&&delete t[s];a=t[e]={ts:0,timer:null}}function l(){r(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}n(a),o>a.ts+i?l():a.timer=setTimeout((function(){l(),a.timer=null}),i)},e.done=function(e){var n=t[e];return n&&n.timer?new Promise((function(e){var t=n.onDone;n.onDone=function(){t&&t(),e(),n.onDone=null}})):Promise.resolve()},e.clear=function(i){if(i)n(t[i]),delete t[i];else for(var r in t)e.clear(r)}}(Xh);var Nh={exports:{}};Nh.exports=Th,Nh.exports.isMobile=Th,Nh.exports.default=Th;var Wh=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,_h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function Th(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var n=e.tablet?_h.test(t):Wh.test(t);return!n&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(n=!0),n}var Mh=Yu,Hh=Nh.exports;var Yh=Gs.exports,Dh=hg;function zh(e){return!0===e.visible}function Oh(e){var t=e[0].trace;return!0===t.visible&&0!==t._length}var Jh=Yu,jh=Du.BADNUM,Ph=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,Kh=Gs.exports,qh=Au.utcFormat,$h=Mu.format,ef=Yu,tf=Du.FP_SAFE,nf=-tf,rf=Du.BADNUM,af=ws.exports={};af.adjustFormat=function(e){return!e||/^\d[.]\df/.test(e)||/[.]\d%/.test(e)?e:"0.f"===e?"~f":/^\d%/.test(e)?"~%":/^\ds/.test(e)?"~s":!/^[~,.0$]/.test(e)&&/[&fps]/.test(e)?"~"+e:e};var of={};af.warnBadFormat=function(e){var t=String(e);of[t]||(of[t]=1,af.warn('encountered bad format: "'+t+'"'))},af.noFormat=function(e){return String(e)},af.numberFormat=function(e){var t;try{t=$h(af.adjustFormat(e))}catch(t){return af.warnBadFormat(e),af.noFormat}return t},af.nestedProperty=td,af.keyedContainer=function(e,t,n,i){var r,a,o;n=n||"name",i=i||"value";var s={};t&&t.length?(o=cd(e,t),a=o.get()):a=e,t=t||"";var l={};if(a)for(r=0;r<a.length;r++)l[a[r][n]]=r;var c=ud.test(i),u={set:function(e,t){var r=null===t?4:0;if(!a){if(!o||4===r)return;a=[],o.set(a)}var d=l[e];if(void 0===d){if(4===r)return;r|=3,d=a.length,l[e]=d}else t!==(c?a[d][i]:cd(a[d],i).get())&&(r|=2);var g=a[d]=a[d]||{};return g[n]=e,c?g[i]=t:cd(g,i).set(t),null!==t&&(r&=-5),s[d]=s[d]|r,u},get:function(e){if(a){var t=l[e];return void 0===t?void 0:c?a[t][i]:cd(a[t],i).get()}},rename:function(e,t){var i=l[e];return void 0===i||(s[i]=1|s[i],l[t]=i,delete l[e],a[i][n]=t),u},remove:function(e){var t=l[e];if(void 0===t)return u;var o=a[t];if(Object.keys(o).length>2)return s[t]=2|s[t],u.set(e,null);if(c){for(r=t;r<a.length;r++)s[r]=3|s[r];for(r=t;r<a.length;r++)l[a[r][n]]--;a.splice(t,1),delete l[e]}else cd(o,i).set(null),s[t]=6|s[t];return u},constructUpdate:function(){for(var e,r,o={},l=Object.keys(s),u=0;u<l.length;u++)r=l[u],e=t+"["+r+"]",a[r]?(1&s[r]&&(o[e+"."+n]=a[r][n]),2&s[r]&&(o[e+"."+i]=c?4&s[r]?null:a[r][i]:4&s[r]?null:cd(a[r],i).get())):o[e]=null;return o}};return u},af.relativeAttr=function(e,t){for(;t;){var n=e.match(dd);if(n)e=n[1];else{if(!e.match(gd))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t},af.isPlainObject=hd,af.toLogRange=pd,af.relinkPrivateKeys=function e(t,n){for(var i in n){var r=n[i],a=t[i];if(a!==r)if("_"===i.charAt(0)||"function"==typeof r){if(i in t)continue;t[i]=r}else if(md(r)&&md(a)&&vd(r[0])){if("customdata"===i||"ids"===i)continue;for(var o=Math.min(r.length,a.length),s=0;s<o;s++)a[s]!==r[s]&&vd(r[s])&&vd(a[s])&&e(a[s],r[s])}else vd(r)&&vd(a)&&(e(a,r),Object.keys(a).length||delete t[i])}};var sf=zu;af.isTypedArray=sf.isTypedArray,af.isArrayOrTypedArray=sf.isArrayOrTypedArray,af.isArray1D=sf.isArray1D,af.ensureArray=sf.ensureArray,af.concat=sf.concat,af.maxRowLength=sf.maxRowLength,af.minRowLength=sf.minRowLength;var lf=bd;af.mod=lf.mod,af.modHalf=lf.modHalf;var cf=yd;af.valObjectMeta=cf.valObjectMeta,af.coerce=cf.coerce,af.coerce2=cf.coerce2,af.coerceFont=cf.coerceFont,af.coercePattern=cf.coercePattern,af.coerceHoverinfo=cf.coerceHoverinfo,af.coerceSelectionMarkerOpacity=cf.coerceSelectionMarkerOpacity,af.validate=cf.validate;var uf=tg;af.dateTime2ms=uf.dateTime2ms,af.isDateTime=uf.isDateTime,af.ms2DateTime=uf.ms2DateTime,af.ms2DateTimeLocal=uf.ms2DateTimeLocal,af.cleanDate=uf.cleanDate,af.isJSDate=uf.isJSDate,af.formatDate=uf.formatDate,af.incrementMonth=uf.incrementMonth,af.dateTick0=uf.dateTick0,af.dfltRange=uf.dfltRange,af.findExactDates=uf.findExactDates,af.MIN_MS=uf.MIN_MS,af.MAX_MS=uf.MAX_MS;var df=mh;af.findBin=df.findBin,af.sorterAsc=df.sorterAsc,af.sorterDes=df.sorterDes,af.distinctVals=df.distinctVals,af.roundUp=df.roundUp,af.sort=df.sort,af.findIndexOfMin=df.findIndexOfMin,af.sortObjectKeys=bh;var gf=yh;af.aggNums=gf.aggNums,af.len=gf.len,af.mean=gf.mean,af.median=gf.median,af.midRange=gf.midRange,af.variance=gf.variance,af.stdev=gf.stdev,af.interp=gf.interp;var hf=mg;af.init2dArray=hf.init2dArray,af.transposeRagged=hf.transposeRagged,af.dot=hf.dot,af.translationMatrix=hf.translationMatrix,af.rotationMatrix=hf.rotationMatrix,af.rotationXYMatrix=hf.rotationXYMatrix,af.apply3DTransform=hf.apply3DTransform,af.apply2DTransform=hf.apply2DTransform,af.apply2DTransform2=hf.apply2DTransform2,af.convertCssMatrix=hf.convertCssMatrix,af.inverseTransformMatrix=hf.inverseTransformMatrix;var ff=Lh;af.deg2rad=ff.deg2rad,af.rad2deg=ff.rad2deg,af.angleDelta=ff.angleDelta,af.angleDist=ff.angleDist,af.isFullCircle=ff.isFullCircle,af.isAngleInsideSector=ff.isAngleInsideSector,af.isPtInsideSector=ff.isPtInsideSector,af.pathArc=ff.pathArc,af.pathSector=ff.pathSector,af.pathAnnulus=ff.pathAnnulus;var pf=Sh;af.isLeftAnchor=pf.isLeftAnchor,af.isCenterAnchor=pf.isCenterAnchor,af.isRightAnchor=pf.isRightAnchor,af.isTopAnchor=pf.isTopAnchor,af.isMiddleAnchor=pf.isMiddleAnchor,af.isBottomAnchor=pf.isBottomAnchor;var mf=Vh;af.segmentsIntersect=mf.segmentsIntersect,af.segmentDistance=mf.segmentDistance,af.getTextLocation=mf.getTextLocation,af.clearLocationCache=mf.clearLocationCache,af.getVisibleSegment=mf.getVisibleSegment,af.findPointOnPath=mf.findPointOnPath;var vf=Ud;af.extendFlat=vf.extendFlat,af.extendDeep=vf.extendDeep,af.extendDeepAll=vf.extendDeepAll,af.extendDeepNoArrays=vf.extendDeepNoArrays;var bf=ng.exports;af.log=bf.log,af.warn=bf.warn,af.error=bf.error;var yf=eg;af.counterRegex=yf.counter;var If=Xh;af.throttle=If.throttle,af.throttleDone=If.done,af.clearThrottle=If.clear;var Cf=th;function xf(e){var t={};for(var n in e)for(var i=e[n],r=0;r<i.length;r++)t[i[r]]=+n;return t}af.getGraphDiv=Cf.getGraphDiv,af.isPlotDiv=Cf.isPlotDiv,af.removeElement=Cf.removeElement,af.addStyleRule=Cf.addStyleRule,af.addRelatedStyleRule=Cf.addRelatedStyleRule,af.deleteRelatedStyleRule=Cf.deleteRelatedStyleRule,af.getFullTransformMatrix=Cf.getFullTransformMatrix,af.getElementTransformMatrix=Cf.getElementTransformMatrix,af.getElementAndAncestors=Cf.getElementAndAncestors,af.equalDomRects=Cf.equalDomRects,af.clearResponsive=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)},af.preserveDrawingBuffer=function(e){var t;if("string"!=typeof(t=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;"undefined"!=typeof navigator&&(e=navigator.userAgent);e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return e}()))return!0;var n=Hh({ua:{headers:{"user-agent":t}},tablet:!0,featureDetect:!1});if(!n)for(var i=t.split(" "),r=1;r<i.length;r++){if(-1!==i[r].indexOf("Safari"))for(var a=r-1;a>-1;a--){var o=i[a];if("Version/"===o.substr(0,8)){var s=o.substr(8).split(".")[0];if(Mh(s)&&(s=+s),s>=13)return!0}}}return n},af.makeTraceGroups=function(e,t,n){var i=e.selectAll("g."+n.replace(/\s/g,".")).data(t,(function(e){return e[0].trace.uid}));i.exit().remove(),i.enter().append("g").attr("class",n),i.order();var r=e.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each((function(e){e[0][r]=Yh.select(this)})),i},af._=function(e,t){for(var n=e._context.locale,i=0;i<2;i++){for(var r=e._context.locales,a=0;a<2;a++){var o=(r[n]||{}).dictionary;if(o){var s=o[t];if(s)return s}r=Dh.localeRegistry}var l=n.split("-")[0];if(l===n)break;n=l}return t},af.notifier=cg,af.filterUnique=function(e){for(var t={},n=[],i=0,r=0;r<e.length;r++){var a=e[r];1!==t[a]&&(t[a]=1,n[i++]=a)}return n},af.filterVisible=function(e){for(var t,n=(t=e,Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?Oh:zh),i=[],r=0;r<e.length;r++){var a=e[r];n(a)&&i.push(a)}return i},af.pushUnique=pg,af.increment=function(e,t){if(!t)return e;var n=1/Math.abs(t),i=n>1?(n*e+n*t)/n:e+t,r=String(i).length;if(r>16){var a=String(t).length;if(r>=String(e).length+a){var o=parseFloat(i).toPrecision(12);-1===o.indexOf("e+")&&(i=+o)}}return i},af.cleanNumber=function(e){return"string"==typeof e&&(e=e.replace(Ph,"")),Jh(e)?Number(e):jh},af.ensureNumber=function(e){return ef(e)?(e=Number(e))>tf||e<nf?rf:e:rf},af.isIndex=function(e,t){return!(void 0!==t&&e>=t)&&(ef(e)&&e>=0&&e%1==0)},af.noop=fg,af.identity=vh,af.repeat=function(e,t){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n},af.swapAttrs=function(e,t,n,i){n||(n="x"),i||(i="y");for(var r=0;r<t.length;r++){var a=t[r],o=af.nestedProperty(e,a.replace("?",n)),s=af.nestedProperty(e,a.replace("?",i)),l=o.get();o.set(s.get()),s.set(l)}},af.raiseToTop=function(e){e.parentNode.appendChild(e)},af.cancelTransition=function(e){return e.transition().duration(0)},af.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},af.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},af.simpleMap=function(e,t,n,i,r){for(var a=e.length,o=new Array(a),s=0;s<a;s++)o[s]=t(e[s],n,i,r);return o},af.randstr=function e(t,n,i,r){if(i||(i=16),void 0===n&&(n=24),n<=0)return"0";var a,o,s=Math.log(Math.pow(2,n))/Math.log(i),l="";for(a=2;s===1/0;a*=2)s=Math.log(Math.pow(2,n/a))/Math.log(i)*a;var c=s-Math.floor(s);for(a=0;a<Math.floor(s);a++)l=Math.floor(Math.random()*i).toString(i)+l;c&&(o=Math.pow(i,c),l=Math.floor(Math.random()*o).toString(i)+l);var u=parseInt(l,i);return t&&t[l]||u!==1/0&&u>=Math.pow(2,n)?r>10?(af.warn("randstr failed uniqueness"),l):e(t,n,i,(r||0)+1):l},af.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={optionList:[],_newoption:function(i){i[t]=e,n[i.name]=i,n.optionList.push(i)}};return n["_"+t]=e,n},af.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var n,i,r,a,o=e.length,s=2*o,l=2*t-1,c=new Array(l),u=new Array(o);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;n<o;n++){for(a=0,i=0;i<l;i++)(r=n+i+1-t)<-o?r-=s*Math.round(r/s):r>=s&&(r-=s*Math.floor(r/s)),r<0?r=-1-r:r>=o&&(r=s-1-r),a+=e[r]*c[i];u[n]=a}return u},af.syncOrAsync=function(e,t,n){var i;function r(){return af.syncOrAsync(e,t,n)}for(;e.length;)if((i=(0,e.splice(0,1)[0])(t))&&i.then)return i.then(r);return n&&n(t)},af.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},af.noneOrAll=function(e,t,n){if(e){var i,r=!1,a=!0;for(i=0;i<n.length;i++)null!=e[n[i]]?r=!0:a=!1;if(r&&!a)for(i=0;i<n.length;i++)e[n[i]]=t[n[i]]}},af.mergeArray=function(e,t,n,i){var r="function"==typeof i;if(af.isArrayOrTypedArray(e))for(var a=Math.min(e.length,t.length),o=0;o<a;o++){var s=e[o];t[o][n]=r?i(s):s}},af.mergeArrayCastPositive=function(e,t,n){return af.mergeArray(e,t,n,(function(e){var t=+e;return isFinite(t)&&t>0?t:0}))},af.fillArray=function(e,t,n,i){if(i=i||af.identity,af.isArrayOrTypedArray(e))for(var r=0;r<t.length;r++)t[r][n]=i(e[r])},af.castOption=function(e,t,n,i){i=i||af.identity;var r=af.nestedProperty(e,n).get();return af.isArrayOrTypedArray(r)?Array.isArray(t)&&af.isArrayOrTypedArray(r[t[0]])?i(r[t[0]][t[1]]):i(r[t]):r},af.extractOption=function(e,t,n,i){if(n in e)return e[n];var r=af.nestedProperty(t,i).get();return Array.isArray(r)?void 0:r},af.tagSelected=function(e,t,n){var i,r=t.selectedpoints,a=t._indexToPoints;function o(t){return void 0!==t&&t<e.length}a&&(i=xf(a));for(var s=0;s<r.length;s++){var l=r[s];if(af.isIndex(l)||af.isArrayOrTypedArray(l)&&af.isIndex(l[0])&&af.isIndex(l[1])){var c=i?i[l]:l,u=n?n[c]:c;o(u)&&(e[u].selected=1)}}},af.selIndices2selPoints=function(e){var t=e.selectedpoints,n=e._indexToPoints;if(n){for(var i=xf(n),r=[],a=0;a<t.length;a++){var o=t[a];if(af.isIndex(o)){var s=i[o];af.isIndex(s)&&r.push(s)}}return r}return t},af.getTargetArray=function(e,t){var n=t.target;if("string"==typeof n&&n){var i=af.nestedProperty(e,n).get();return!!Array.isArray(i)&&i}return!!Array.isArray(n)&&n},af.minExtend=function(e,t){var n={};"object"!==i(t)&&(t={});var r,a,o,s=Object.keys(e);for(r=0;r<s.length;r++)o=e[a=s[r]],"_"!==a.charAt(0)&&"function"!=typeof o&&("module"===a?n[a]=o:Array.isArray(o)?n[a]="colorscale"===a?o.slice():o.slice(0,3):af.isTypedArray(o)?n[a]=o.subarray(0,3):o&&"object"===i(o)?n[a]=af.minExtend(e[a],t[a]):n[a]=o);for(s=Object.keys(t),r=0;r<s.length;r++)"object"===i(o=t[a=s[r]])&&a in n&&"object"===i(n[a])||(n[a]=o);return n},af.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},af.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},af.isIE=function(){return void 0!==window.navigator.msSaveBlob};var Bf=/Version\/[\d\.]+.*Safari/;af.isSafari=function(){return Bf.test(window.navigator.userAgent)};var Af=/iPad|iPhone|iPod/;af.isIOS=function(){return Af.test(window.navigator.userAgent)};var Ff=/Firefox\/(\d+)\.\d+/;af.getFirefoxVersion=function(){var e=Ff.exec(window.navigator.userAgent);if(e&&2===e.length){var t=parseInt(e[1]);if(!isNaN(t))return t}return null},af.isD3Selection=function(e){return e instanceof Kh.selection},af.ensureSingle=function(e,t,n,i){var r=e.select(t+(n?"."+n:""));if(r.size())return r;var a=e.append(t);return n&&a.classed(n,!0),i&&a.call(i),a},af.ensureSingleById=function(e,t,n,i){var r=e.select(t+"#"+n);if(r.size())return r;var a=e.append(t).attr("id",n);return i&&a.call(i),a},af.objectFromPath=function(e,t){for(var n,i=e.split("."),r=n={},a=0;a<i.length;a++){var o=i[a],s=null,l=i[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],n=n[o]=[],a===i.length-1?n[s]=t:n[s]={},n=n[s]):(a===i.length-1?n[o]=t:n[o]={},n=n[o])}return r};var Qf=/^([^\[\.]+)\.(.+)?/,Uf=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;af.expandObjectPaths=function(e){var t,n,r,a,o,s,l;if("object"===i(e)&&!Array.isArray(e))for(n in e)e.hasOwnProperty(n)&&((t=n.match(Qf))?(a=e[n],r=t[1],delete e[n],e[r]=af.extendDeepNoArrays(e[r]||{},af.objectFromPath(n,af.expandObjectPaths(a))[r])):(t=n.match(Uf))?(a=e[n],r=t[1],o=parseInt(t[2]),delete e[n],e[r]=e[r]||[],"."===t[3]?(l=t[4],s=e[r][o]=e[r][o]||{},af.extendDeepNoArrays(s,af.objectFromPath(l,af.expandObjectPaths(a)))):e[r][o]=af.expandObjectPaths(a)):e[n]=af.expandObjectPaths(e[n]));return e},af.numSeparate=function(e,t,n){if(n||(n=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var i=/(\d+)(\d{3})/,r=t.charAt(0),a=t.charAt(1),o=e.split("."),s=o[0],l=o.length>1?r+o[1]:"";if(a&&(o.length>1||s.length>4||n))for(;i.test(s);)s=s.replace(i,"$1"+a+"$2");return s+l},af.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var wf=/^\w*$/;af.templateString=function(e,t){var n={};return e.replace(af.TEMPLATE_STRING_REGEX,(function(e,i){var r;return wf.test(i)?r=t[i]:(n[i]=n[i]||af.nestedProperty(t,i).get,r=n[i]()),af.isValidTextValue(r)?r:""}))};var Gf={max:10,count:0,name:"hovertemplate"};af.hovertemplateString=function(){return Sf.apply(Gf,arguments)};var Rf={max:10,count:0,name:"texttemplate"};af.texttemplateString=function(){return Sf.apply(Rf,arguments)};var Lf=/^[:|\|]/;function Sf(e,t,n){var i=this,r=arguments;t||(t={});var a={};return e.replace(af.TEMPLATE_STRING_REGEX,(function(e,o,s){var l,c,u,d="_xother"===o||"_yother"===o,g="_xother_"===o||"_yother_"===o,h="xother_"===o||"yother_"===o,f="xother"===o||"yother"===o||d||h||g,p=o;if((d||g)&&(p=p.substring(1)),(h||g)&&(p=p.substring(0,p.length-1)),f){if(void 0===(l=t[p]))return""}else for(u=3;u<r.length;u++)if(c=r[u]){if(c.hasOwnProperty(p)){l=c[p];break}if(wf.test(p)||(l=af.nestedProperty(c,p).get(),(l=a[p]||af.nestedProperty(c,p).get())&&(a[p]=l)),void 0!==l)break}if(void 0===l&&i)return i.count<i.max&&(af.warn("Variable '"+p+"' in "+i.name+" could not be found!"),l=e),i.count===i.max&&af.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,e;if(s){var m;if(":"===s[0]&&(l=(m=n?n.numberFormat:af.numberFormat)(s.replace(Lf,""))(l)),"|"===s[0]){m=n?n.timeFormat:qh;var v=af.dateTime2ms(l);l=af.formatDate(v,s.replace(Lf,""),!1,m)}}else{var b=p+"Label";t.hasOwnProperty(b)&&(l=t[b])}return f&&(l="("+l+")",(d||g)&&(l=" "+l),(h||g)&&(l+=" ")),l}))}af.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,i=0,r=0,a=0;a<n;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=o>=48&&o<=57,c=s>=48&&s<=57;if(l&&(i=10*i+o-48),c&&(r=10*r+s-48),!l||!c){if(i!==r)return i-r;if(o!==s)return o-s}}return r-i};var Vf=2e9;af.seedPseudoRandom=function(){Vf=2e9},af.pseudoRandom=function(){var e=Vf;return Vf=(69069*Vf+1)%4294967296,Math.abs(Vf-e)<429496729?af.pseudoRandom():Vf/4294967296},af.fillText=function(e,t,n){var i=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},r=af.extractOption(e,t,"htx","hovertext");if(af.isValidTextValue(r))return i(r);var a=af.extractOption(e,t,"tx","text");return af.isValidTextValue(a)?i(a):void 0},af.isValidTextValue=function(e){return e||0===e},af.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",i=0;i<t;i++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},af.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||"none"===t},af.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},af.strRotate=function(e){return e?"rotate("+e+")":""},af.strScale=function(e){return 1!==e?"scale("+e+")":""},af.getTextTransform=function(e){var t=e.noCenter,n=e.textX,i=e.textY,r=e.targetX,a=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,c=e.scale;return c?c>1&&(c=1):c=0,af.strTranslate(r-c*(n+o),a-c*(i+s))+af.strScale(c)+(l?"rotate("+l+(t?"":" "+n+" "+i)+")":"")},af.ensureUniformFontSize=function(e,t){var n=af.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},af.join2=function(e,t,n){var i=e.length;return i>1?e.slice(0,-1).join(t)+n+e[i-1]:e.join(t)},af.bigFont=function(e){return Math.round(1.2*e)};var Zf=af.getFirefoxVersion(),kf=null!==Zf&&Zf<86;af.getPositionFromD3Event=function(){return kf?[Kh.event.layerX,Kh.event.layerY]:[Kh.event.offsetX,Kh.event.offsetY]};var Ef=ws.exports,Xf={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var Nf in Xf){var Wf=Nf.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");Ef.addStyleRule(Wf,Xf[Nf])}var _f,Tf={},Mf={},Hf="function"==typeof xs.matchMedia&&!xs.matchMedia("(hover: none)").matches,Yf={exports:{}},Df="object"===("undefined"==typeof Reflect?"undefined":i(Reflect))?Reflect:null,zf=Df&&"function"==typeof Df.apply?Df.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};_f=Df&&"function"==typeof Df.ownKeys?Df.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Of=Number.isNaN||function(e){return e!=e};function Jf(){Jf.init.call(this)}Yf.exports=Jf,Yf.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}rp(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&rp(e,"error",t,n)}(e,r,{once:!0})}))},Jf.EventEmitter=Jf,Jf.prototype._events=void 0,Jf.prototype._eventsCount=0,Jf.prototype._maxListeners=void 0;var jf=10;function Pf(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+i(e))}function Kf(e){return void 0===e._maxListeners?Jf.defaultMaxListeners:e._maxListeners}function qf(e,t,n,i){var r,a,o,s;if(Pf(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=Kf(e))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return e}function $f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ep(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=$f.bind(i);return r.listener=n,i.wrapFn=r,r}function tp(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):ip(r,r.length)}function np(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function ip(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function rp(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+i(e));e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(Jf,"defaultMaxListeners",{enumerable:!0,get:function(){return jf},set:function(e){if("number"!=typeof e||e<0||Of(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");jf=e}}),Jf.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Jf.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Of(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Jf.prototype.getMaxListeners=function(){return Kf(this)},Jf.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=r[e];if(void 0===s)return!1;if("function"==typeof s)zf(s,this,t);else{var l=s.length,c=ip(s,l);for(n=0;n<l;++n)zf(c[n],this,t)}return!0},Jf.prototype.addListener=function(e,t){return qf(this,e,t,!1)},Jf.prototype.on=Jf.prototype.addListener,Jf.prototype.prependListener=function(e,t){return qf(this,e,t,!0)},Jf.prototype.once=function(e,t){return Pf(t),this.on(e,ep(this,e,t)),this},Jf.prototype.prependOnceListener=function(e,t){return Pf(t),this.prependListener(e,ep(this,e,t)),this},Jf.prototype.removeListener=function(e,t){var n,i,r,a,o;if(Pf(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},Jf.prototype.off=Jf.prototype.removeListener,Jf.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},Jf.prototype.listeners=function(e){return tp(this,e,!0)},Jf.prototype.rawListeners=function(e){return tp(this,e,!1)},Jf.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):np.call(e,t)},Jf.prototype.listenerCount=np,Jf.prototype.eventNames=function(){return this._eventsCount>0?_f(this._events):[]};var ap=Yf.exports.EventEmitter,op={init:function(e){if(e._ev instanceof ap)return e;var t=new ap,n=new ap;return e._ev=t,e._internalEv=n,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=n.on.bind(n),e._internalOnce=n.once.bind(n),e._removeInternalListener=n.removeListener.bind(n),e._removeAllInternalListeners=n.removeAllListeners.bind(n),e.emit=function(i,r){"undefined"!=typeof jQuery&&jQuery(e).trigger(i,r),t.emit(i,r),n.emit(i,r)},e},triggerHandler:function(e,t,n){var i,r;"undefined"!=typeof jQuery&&(i=jQuery(e).triggerHandler(t,n));var a=e._ev;if(!a)return i;var o,s=a._events[t];if(!s)return i;function l(e){return e.listener?(a.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(a,[n]))):e.apply(a,[n])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)l(s[o]);return r=l(s[o]),void 0!==i?i:r},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}},sp=op,lp=ws.exports,cp=ag.dfltConfig;var up={add:function(e,t,n,i,r){var a,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,a),e.undoQueue.index+=1):a=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(n),a.redo.calls.push(i),a.redo.args.push(r)),e.undoQueue.queue.length>cp.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)up.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)up.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};up.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,r=[],a=0;a<t.length;a++)(n=t[a])===e?r[a]=n:"object"===i(n)?r[a]=Array.isArray(n)?lp.extendDeep([],n):lp.extendDeepAll({},n):r[a]=n;return r}(e,n),t.apply(null,n)};var dp=up,gp={},hp={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}},fp=ws.exports,pp=fp.extendFlat,mp=fp.isPlainObject,vp={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},bp={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},yp=vp.flags.slice().concat(["fullReplot"]),Ip=bp.flags.slice().concat("layoutReplot"),Cp={traces:vp,layout:bp,traceFlags:function(){return xp(yp)},layoutFlags:function(){return xp(Ip)},update:function(e,t){var n=t.editType;if(n&&"none"!==n)for(var i=n.split("+"),r=0;r<i.length;r++)e[i[r]]=!0},overrideAll:Bp};function xp(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function Bp(e,t,n){var i=pp({},e);for(var r in i){var a=i[r];mp(a)&&(i[r]=Ap(a,t,n,r))}return"from-root"===n&&(i.editType=t),i}function Ap(e,t,n,i){if(e.valType){var r=pp({},e);if(r.editType=t,Array.isArray(e.items)){r.items=new Array(e.items.length);for(var a=0;a<e.items.length;a++)r.items[a]=Ap(e.items[a],t)}return r}return Bp(e,t,"_"===i.charAt(0)?"nested":"from-root")}!function(e){var t=hg,n=ws.exports,i=Xd,r=ph,a=hp,o=nh,s=ag.configAttributes,l=Cp,c=n.extendDeepAll,u=n.isPlainObject,d=n.isArrayOrTypedArray,g=n.nestedProperty,h=n.valObjectMeta,f="_isSubplotObj",p="_isLinkedToArray",m="_deprecated",v=[f,p,"_arrayAttrRegexps",m];function b(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(y(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var i=e[t[n]];if(!u(i))break;if(e=i,n===t.length-1)break;if(e._isLinkedToArray){if(!y(t[++n]))return!1}else if("info_array"===e.valType){var r=t[++n];if(!y(r))return!1;var a=e.items;if(Array.isArray(a)){if(r>=a.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;var o=t[n];if(!y(o))return!1;e=a[r][o]}else e=a[r]}else e=a}}return e}function y(e){return e===Math.round(e)&&e>=0}function I(){var e,n,i={};for(e in c(i,r),t.subplotsRegistry){if((n=t.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(n.attr))for(var a=0;a<n.attr.length;a++)B(i,n,n.attr[a]);else B(i,n,"subplot"===n.attr?n.name:n.attr)}for(e in t.componentsRegistry){var o=(n=t.componentsRegistry[e]).schema;if(o&&(o.subplots||o.layout)){var s=o.subplots;if(s&&s.xaxis&&!s.yaxis)for(var l in s.xaxis)delete i.yaxis[l]}else"colorscale"===n.name?c(i,n.layoutAttributes):n.layoutAttributes&&A(i,n.layoutAttributes,n.name)}return{layoutAttributes:x(i)}}function C(){var e={frames:c({},a)};return x(e),e.frames}function x(t){return function(t){function n(e){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+e+"`.",editType:"none"}}function i(t,i,r){e.isValObject(t)?!0!==t.arrayOk&&"data_array"!==t.valType||(r[i+"src"]=n(i)):u(t)&&(t.role="object")}e.crawl(t,i)}(t),function(t){function n(e,t,n){if(e){var i=e._isLinkedToArray;i&&(delete e._isLinkedToArray,n[t]={items:{}},n[t].items[i]=e,n[t].role="object")}}e.crawl(t,n)}(t),function(e){function t(e){for(var n in e)if(u(e[n]))t(e[n]);else if(Array.isArray(e[n]))for(var i=0;i<e[n].length;i++)t(e[n][i]);else e[n]instanceof RegExp&&(e[n]=e[n].toString())}t(e)}(t),t}function B(e,t,n){var i=g(e,n),r=c({},t.layoutAttributes);r._isSubplotObj=!0,i.set(r)}function A(e,t,n){var i=g(e,n);i.set(c(i.get()||{},t))}e.IS_SUBPLOT_OBJ=f,e.IS_LINKED_TO_ARRAY=p,e.DEPRECATED=m,e.UNDERSCORE_ATTRS=v,e.get=function(){var n={};t.allTypes.forEach((function(r){n[r]=function(n){var r,a;r=t.modules[n]._module,a=r.basePlotModule;var o={type:null},s=c({},i),l=c({},r.attributes);e.crawl(l,(function(e,t,n,i,r){g(s,r).set(void 0),void 0===e&&g(l,r).set(void 0)})),c(o,s),t.traceIs(n,"noOpacity")&&delete o.opacity;t.traceIs(n,"showLegend")||(delete o.showlegend,delete o.legendgroup);t.traceIs(n,"noHover")&&(delete o.hoverinfo,delete o.hoverlabel);r.selectPoints||delete o.selectedpoints;c(o,l),a.attributes&&c(o,a.attributes);o.type=n;var u={meta:r.meta||{},categories:r.categories||{},animatable:Boolean(r.animatable),type:n,attributes:x(o)};if(r.layoutAttributes){var d={};c(d,r.layoutAttributes),u.layoutAttributes=x(d)}r.animatable||e.crawl(u,(function(t){e.isValObject(t)&&"anim"in t&&delete t.anim}));return u}(r)}));var r={};return Object.keys(t.transformsRegistry).forEach((function(e){r[e]=function(e){var n=t.transformsRegistry[e],i=c({},n.attributes);return Object.keys(t.componentsRegistry).forEach((function(n){var r=t.componentsRegistry[n];r.schema&&r.schema.transforms&&r.schema.transforms[e]&&Object.keys(r.schema.transforms[e]).forEach((function(t){A(i,r.schema.transforms[e][t],t)}))})),{attributes:x(i)}}(e)})),{defs:{valObjects:h,metaKeys:v.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:n,layout:I(),transforms:r,frames:C(),animation:x(o),config:x(s)}},e.crawl=function(t,n,i,r){var a=i||0;r=r||"",Object.keys(t).forEach((function(i){var o=t[i];if(-1===v.indexOf(i)){var s=(r?r+".":"")+i;n(o,i,t,a,s),e.isValObject(o)||u(o)&&"impliedEdits"!==i&&e.crawl(o,n,a+1,s)}}))},e.isValObject=function(e){return e&&void 0!==e.valType},e.findArrayAttributes=function(t){var n,r,a=[],o=[],s=[];function l(e,t,i,r){o=o.slice(0,r).concat([t]),s=s.slice(0,r).concat([e&&e._isLinkedToArray]),e&&("data_array"===e.valType||!0===e.arrayOk)&&!("colorbar"===o[r-1]&&("ticktext"===t||"tickvals"===t))&&c(n,0,"")}function c(e,t,n){var i=e[o[t]],l=n+o[t];if(t===o.length-1)d(i)&&a.push(r+l);else if(s[t]){if(Array.isArray(i))for(var g=0;g<i.length;g++)u(i[g])&&c(i[g],t+1,l+"["+g+"].")}else u(i)&&c(i,t+1,l+".")}n=t,r="",e.crawl(i,l),t._module&&t._module.attributes&&e.crawl(t._module.attributes,l);var g=t.transforms;if(g)for(var h=0;h<g.length;h++){var f=g[h],p=f._module;p&&(r="transforms["+h+"].",n=f,e.crawl(p.attributes,l))}return a},e.getTraceValObject=function(e,n){var r,a,o=n[0],s=1;if("transforms"===o){if(1===n.length)return i.transforms;var l=e.transforms;if(!Array.isArray(l)||!l.length)return!1;var c=n[1];if(!y(c)||c>=l.length)return!1;a=(r=(t.transformsRegistry[l[c].type]||{}).attributes)&&r[n[2]],s=3}else{var u=e._module;if(u||(u=(t.modules[e.type||i.type.dflt]||{})._module),!u)return!1;if(!(a=(r=u.attributes)&&r[o])){var d=u.basePlotModule;d&&d.attributes&&(a=d.attributes[o])}a||(a=i[o])}return b(a,n,s)},e.getLayoutValObject=function(e,n){var i=function(e,n){var i,a,o,s,l=e._basePlotModules;if(l){var c;for(i=0;i<l.length;i++){if((o=l[i]).attrRegex&&o.attrRegex.test(n)){if(o.layoutAttrOverrides)return o.layoutAttrOverrides;!c&&o.layoutAttributes&&(c=o.layoutAttributes)}var u=o.baseLayoutAttrOverrides;if(u&&n in u)return u[n]}if(c)return c}var d=e._modules;if(d)for(i=0;i<d.length;i++)if((s=d[i].layoutAttributes)&&n in s)return s[n];for(a in t.componentsRegistry){if("colorscale"===(o=t.componentsRegistry[a]).name&&0===n.indexOf("coloraxis"))return o.layoutAttributes[n];if(!o.schema&&n===o.name)return o.layoutAttributes}return n in r&&r[n]}(e,n[0]);return b(i,n,1)}}(gp);var Fp={exports:{}},Qp={},Up=ws.exports,wp=Xd,Gp={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};function Rp(e){return e&&"string"==typeof e}function Lp(e){var t=e.length-1;return"s"!==e.charAt(t)&&Up.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}Gp.templateitemname={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")},Qp.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=Gp.name,t.templateitemname=Gp.templateitemname,t},Qp.traceTemplater=function(e){var t,n,i={};for(t in e)n=e[t],Array.isArray(n)&&n.length&&(i[t]=0);return{newTrace:function(r){var a={type:t=Up.coerce(r,{},wp,"type"),_template:null};if(t in i){n=e[t];var o=i[t]%n.length;i[t]++,a._template=n[o]}return a}}},Qp.newContainer=function(e,t,n){var i=e._template,r=i&&(i[t]||n&&i[n]);return Up.isPlainObject(r)||(r=null),e[t]={_template:r}},Qp.arrayTemplater=function(e,t,n){var i=e._template,r=i&&i[Lp(t)],a=i&&i[t];Array.isArray(a)&&a.length||(a=[]);var o={};return{newItem:function(e){var t={name:e.name,_input:e},i=t.templateitemname=e.templateitemname;if(!Rp(i))return t._template=r,t;for(var s=0;s<a.length;s++){var l=a[s];if(l.name===i)return o[i]=1,t._template=l,t}return t[n]=e[n]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<a.length;t++){var n=a[t],i=n.name;if(Rp(i)&&!o[i]){var r={_template:n,name:i,_input:{_templateitemname:i}};r.templateitemname=n.templateitemname,e.push(r),o[i]=1}}return e}}},Qp.arrayDefaultKey=Lp,Qp.arrayEditor=function(e,t,n){var i=(Up.nestedProperty(e,t).get()||[]).length,r=n._index,a=r>=i&&(n._input||{})._templateitemname;a&&(r=i);var o,s=t+"["+r+"]";function l(){o={},a&&(o[s]={},o[s].templateitemname=a)}function c(e,t){a?Up.nestedProperty(o[s],e).set(t):o[s+"."+e]=t}function u(){var e=o;return l(),e}return l(),{modifyBase:function(e,t){o[e]=t},modifyItem:c,getUpdateObj:u,applyUpdate:function(t,n){t&&c(t,n);var i=u();for(var r in i)Up.nestedProperty(e,r).set(i[r])}}};var Sp={},Vp=eg.counter,Zp={idRegex:{x:Vp("x","( domain)?"),y:Vp("y","( domain)?")},attrRegex:Vp("[xy]axis"),xAxisMatch:Vp("xaxis"),yAxisMatch:Vp("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}};!function(e){var t=hg,n=Zp;function i(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}e.id2name=function(e){if("string"==typeof e&&e.match(n.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},e.name2id=function(e){if(e.match(n.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},e.cleanId=function(e,t,i){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(n.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!r||i)){var a=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),e.charAt(0)+a+(r&&i?" domain":"")}},e.list=function(t,n,i){var r=t._fullLayout;if(!r)return[];var a,o=e.listIds(t,n),s=new Array(o.length);for(a=0;a<o.length;a++){var l=o[a];s[a]=r[l.charAt(0)+"axis"+l.substr(1)]}if(!i){var c=r._subplots.gl3d||[];for(a=0;a<c.length;a++){var u=r[c[a]];n?s.push(u[n+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},e.listIds=function(e,t){var n=e._fullLayout;if(!n)return[];var i=n._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)},e.getFromId=function(t,n,i){var r=t._fullLayout;return n=void 0===n||"string"!=typeof n?n:n.replace(" domain",""),"x"===i?n=n.replace(/y[0-9]*/,""):"y"===i&&(n=n.replace(/x[0-9]*/,"")),r[e.id2name(n)]},e.getFromTrace=function(n,i,r){var a=n._fullLayout,o=null;if(t.traceIs(i,"gl3d")){var s=i.scene;"scene"===s.substr(0,5)&&(o=a[s][r+"axis"])}else o=e.getFromId(n,i[r+"axis"]||r);return o},e.idSort=function(e,t){var n=e.charAt(0),i=t.charAt(0);return n!==i?n>i?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},e.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},e.isLinked=function(e,t){return i(t,e._axisMatchGroups)||i(t,e._axisConstraintGroups)}}(Sp);var kp={clearOutlineControllers:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()},clearSelect:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._drawing=!1}},Ep={},Xp=hg,Np=Zp.SUBPLOT_PATTERN;Ep.getSubplotCalcData=function(e,t,n){var i=Xp.subplotsRegistry[t];if(!i)return[];for(var r=i.attr,a=[],o=0;o<e.length;o++){var s=e[o];s[0].trace[r]===n&&a.push(s)}return a},Ep.getModuleCalcData=function(e,t){var n,i=[],r=[];if(!(n="string"==typeof t?Xp.getModule(t).plot:"function"==typeof t?t:t.plot))return[i,e];for(var a=0;a<e.length;a++){var o=e[a],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===n?i.push(o):r.push(o))}return[i,r]},Ep.getSubplotData=function(e,t,n){if(!Xp.subplotsRegistry[t])return[];var i,r,a,o=Xp.subplotsRegistry[t].attr,s=[];if("gl2d"===t){var l=n.match(Np);r="x"+l[1],a="y"+l[2]}for(var c=0;c<e.length;c++)i=e[c],"gl2d"===t&&Xp.traceIs(i,"gl2d")?i[o[0]]===r&&i[o[1]]===a&&s.push(i):i[o]===n&&s.push(i);return s};var Wp={};!function(e){var t=hg,n=ws.exports;function r(e,t,i){var r,a,o,s=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return a=n.nestedProperty(r,t.prop).get(),(o=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&o[t.prop]!==a&&(s=!0),o[t.prop]=a,{changed:s,value:a}}function a(e,t){var i=[],r=t[0],a={};if("string"==typeof r)a[r]=t[1];else{if(!n.isPlainObject(r))return i;a=r}return s(a,(function(e,t,n){i.push({type:"layout",prop:e,value:n})}),"",0),i}function o(e,t){var i,r,a,o,l=[];if(r=t[0],a=t[1],i=t[2],o={},"string"==typeof r)o[r]=a;else{if(!n.isPlainObject(r))return l;o=r,void 0===i&&(i=a)}return void 0===i&&(i=null),s(o,(function(t,n,r){var a,o;if(Array.isArray(r)){o=r.slice();var s=Math.min(o.length,e.data.length);i&&(s=Math.min(s,i.length)),a=[];for(var c=0;c<s;c++)a[c]=i?i[c]:c}else o=r,a=i?i.slice():null;if(null===a)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(a)){if(!Array.isArray(o)){var u=o;o=[];for(var d=0;d<a.length;d++)o[d]=u}o.length=Math.min(a.length,o.length)}l.push({type:"data",prop:t,traces:a,value:o})}),"",0),l}function s(e,t,i,r){Object.keys(e).forEach((function(a){var o=e[a];if("_"!==a[0]){var l=i+(r>0?".":"")+a;n.isPlainObject(o)?s(o,t,l,r+1):t(l,a,o)}}))}e.manageCommandObserver=function(t,i,a,o){var s={},l=!0;i&&i._commandObserver&&(s=i._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=e.hasSimpleAPICommandBindings(t,a,s.lookupTable);if(i&&i._commandObserver){if(c)return s;if(i._commandObserver.remove)return i._commandObserver.remove(),i._commandObserver=null,s}if(c){r(t,c,s.cache),s.check=function(){if(l){var e=r(t,c,s.cache);return e.changed&&o&&void 0!==s.lookupTable[e.value]&&(s.disable(),Promise.resolve(o({value:e.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[e.value]})).then(s.enable,s.enable)),e.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<u.length;d++)t._internalOn(u[d],s.check);s.remove=function(){for(var e=0;e<u.length;e++)t._removeInternalListener(u[e],s.check)}}else n.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},i&&(i._commandObserver=s),s},e.hasSimpleAPICommandBindings=function(t,n,i){var r,a,o=n.length;for(r=0;r<o;r++){var s,l=n[r],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var d=e.computeAPICommandBindings(t,c,u);if(1!==d.length)return!1;if(a){if((s=d[0]).type!==a.type)return!1;if(s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var g=0;g<a.traces.length;g++)if(a.traces[g]!==s.traces[g])return!1}else if(s.prop!==a.prop)return!1}else a=d[0],Array.isArray(a.traces)&&a.traces.sort();var h=(s=d[0]).value;if(Array.isArray(h)){if(1!==h.length)return!1;h=h[0]}i&&(i[h]=r)}return a},e.executeAPICommand=function(e,i,r){if("skip"===i)return Promise.resolve();var a=t.apiMethodRegistry[i],o=[e];Array.isArray(r)||(r=[]);for(var s=0;s<r.length;s++)o.push(r[s]);return a.apply(null,o).catch((function(e){return n.warn("API call to Plotly."+i+" rejected.",e),Promise.reject(e)}))},e.computeAPICommandBindings=function(e,t,n){var r;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=o(e,n);break;case"relayout":r=a(e,n);break;case"update":r=o(e,[n[0],n[2]]).concat(a(e,[n[1]]));break;case"animate":r=function(e,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(i(t[0][0]))?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}(0,n);break;default:r=[]}return r}}(Wp);var _p=Gs.exports,Tp=Au.timeFormatLocale,Mp=Mu.formatLocale,Hp=Yu,Yp=hg,Dp=gp,zp=Qp,Op=ws.exports,Jp=Hd.exports,jp=Du.BADNUM,Pp=Sp,Kp=kp.clearSelect,qp=nh,$p=hp,em=Ep.getModuleCalcData,tm=Op.relinkPrivateKeys,nm=Op._,im=Fp.exports={};Op.extendFlat(im,Yp),im.attributes=Xd,im.attributes.type.values=im.allTypes,im.fontAttrs=Cd,im.layoutAttributes=ph,im.fontWeight="normal";var rm=im.transformsRegistry,am=Wp;im.executeAPICommand=am.executeAPICommand,im.computeAPICommandBindings=am.computeAPICommandBindings,im.manageCommandObserver=am.manageCommandObserver,im.hasSimpleAPICommandBindings=am.hasSimpleAPICommandBindings,im.redrawText=function(e){return e=Op.getGraphDiv(e),new Promise((function(t){setTimeout((function(){e._fullLayout&&(Yp.getComponentMethod("annotations","draw")(e),Yp.getComponentMethod("legend","draw")(e),Yp.getComponentMethod("colorbar","draw")(e),t(im.previousPromises(e)))}),300)}))},im.resize=function(e){var t;e=Op.getGraphDiv(e);var n=new Promise((function(n,i){e&&!Op.isHidden(e)||i(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=n,e._redrawTimer=setTimeout((function(){if(!e.layout||e.layout.width&&e.layout.height||Op.isHidden(e))n(e);else{delete e.layout.width,delete e.layout.height;var t=e.changed;e.autoplay=!0,Yp.call("relayout",e,{autosize:!0}).then((function(){e.changed=t,e._resolveResize===n&&(delete e._resolveResize,n(e))}))}}),100)}));return t&&t(n),n},im.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then((function(){e._promises=[]}))},im.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,n=Op.ensureSingle(t._paper,"text","js-plot-link-container",(function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:Jp.defaultLine,"pointer-events":"all"}).each((function(){var e=_p.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)}))})),i=n.node(),r={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(r["text-anchor"]="start",r.x=5):(r["text-anchor"]="end",r.x=t._paper.attr("width")-7),n.attr(r);var a=n.select(".js-link-to-tool"),o=n.select(".js-link-spacer"),s=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",(function(){im.sendDataToCloud(e)}));else{var i=window.location.pathname.split("/"),r=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+r})}}(e,a),o.text(a.text()&&s.text()?" - ":"")}},im.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var n=_p.select(e).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return i.append("input").attr({type:"text",name:"data"}).node().value=im.graphJson(e,!1,"keepdata"),i.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var om=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],sm=["year","month","dayMonth","dayMonthYear"];function lm(e,t){var n=e._context.locale;n||(n="en-US");var i=!1,r={};function a(e){for(var n=!0,a=0;a<t.length;a++){var o=t[a];r[o]||(e[o]?r[o]=e[o]:n=!1)}n&&(i=!0)}for(var o=0;o<2;o++){for(var s=e._context.locales,l=0;l<2;l++){var c=(s[n]||{}).format;if(c&&(a(c),i))break;s=Yp.localeRegistry}var u=n.split("-")[0];if(i||u===n)break;n=u}return i||a(Yp.localeRegistry.en.format),r}function cm(e,t){var n={_fullLayout:t},i="x"===e._id.charAt(0),r=e._mainAxis._anchorAxis,a="",o="",s="";if(r&&(s=r._mainAxis._id,a=i?e._id+s:s+e._id),!a||!t._plots[a]){a="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],d=i?e._id+u:u+e._id;o||(o=d);var g=Pp.getFromId(n,u);if(s&&g.overlaying===s){a=d;break}}}return a||o}function um(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var i=t[n],r=i._module||rm[i.type];if(r&&r.makesData)return!0}return!1}function dm(e,t,n,i){for(var r=e.transforms,a=[e],o=0;o<r.length;o++){var s=r[o],l=rm[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:i,transformIndex:o}))}return a}function gm(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function hm(e){var t=e.margin;if(!e._size){var n=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};n.w=Math.round(e.width)-n.l-n.r,n.h=Math.round(e.height)-n.t-n.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}im.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults)delete i._skipDefaults;else{var r,a=e._fullLayout={},o=e.layout||{},s=e._fullData||[],l=e._fullData=[],c=e.data||[],u=e.calcdata||[],d=e._context||{};e._transitionData||im.createTransitionData(e),a._dfltTitle={plot:nm(e,"Click to enter Plot title"),x:nm(e,"Click to enter X axis title"),y:nm(e,"Click to enter Y axis title"),colorbar:nm(e,"Click to enter Colorscale title"),annotation:nm(e,"new text")},a._traceWord=nm(e,"trace");var g=lm(e,om);if(a._mapboxAccessToken=d.mapboxAccessToken,i._initialAutoSizeIsDone){var h=i.width,f=i.height;im.supplyLayoutGlobalDefaults(o,a,g),o.width||(a.width=h),o.height||(a.height=f),im.sanitizeMargins(a)}else{im.supplyLayoutGlobalDefaults(o,a,g);var p=!o.width||!o.height,m=a.autosize,v=d.autosizable;p&&(m||v)?im.plotAutoSize(e,o,a):p&&im.sanitizeMargins(a),!m&&p&&(o.width=a.width,o.height=a.height)}a._d3locale=function(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(t){try{t=Mp(e).format(Op.adjustFormat(t))}catch(e){return Op.warnBadFormat(t),Op.noFormat}return t},timeFormat:Tp(e).utcFormat}}(g,a.separators),a._extraFormat=lm(e,sm),a._initialAutoSizeIsDone=!0,a._dataLength=c.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var b=a._subplots=function(){var e,t,n=Yp.collectableSubplotTypes,i={};if(!n){n=[];var r=Yp.subplotsRegistry;for(var a in r){var o=r[a].attr;if(o&&(n.push(a),Array.isArray(o)))for(t=0;t<o.length;t++)Op.pushUnique(n,o[t])}}for(e=0;e<n.length;e++)i[n[e]]=[];return i}(),y=a._splomAxes={x:{},y:{}},I=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=function(e,t){var n,i,r=t.length,a=[];for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==i&&a.push(o),i=o}var s=a.length,l=new Array(r),c={};function u(e,t){l[t]=e,c[e]=1}function d(e,t){if(e&&"string"==typeof e&&!c[e])return u(e,t),!0}for(n=0;n<r;n++){var g=t[n].uid;"number"==typeof g&&(g=String(g)),d(g,n)||(n<s&&d(a[n].uid,n)||u(Op.randstr(c),n))}return l}(s,c),a._globalTransforms=(e._context||{}).globalTransforms,im.supplyDataDefaults(c,l,o,a);var C=Object.keys(y.x),x=Object.keys(y.y);if(C.length>1&&x.length>1){for(Yp.getComponentMethod("grid","sizeDefaults")(o,a),r=0;r<C.length;r++)Op.pushUnique(b.xaxis,C[r]);for(r=0;r<x.length;r++)Op.pushUnique(b.yaxis,x[r]);for(var B in I)Op.pushUnique(b.cartesian,B)}if(a._has=im._hasPlotType.bind(a),s.length===l.length)for(r=0;r<l.length;r++)tm(l[r],s[r]);im.supplyLayoutModuleDefaults(o,a,l,e._transitionData);var A=a._visibleModules,F=[];for(r=0;r<A.length;r++){var Q=A[r].crossTraceDefaults;Q&&Op.pushUnique(F,Q)}for(r=0;r<F.length;r++)F[r](l,a);a._hasOnlyLargeSploms=1===a._basePlotModules.length&&"splom"===a._basePlotModules[0].name&&C.length>15&&x.length>15&&0===a.shapes.length&&0===a.images.length,im.linkSubplots(l,a,s,i),im.cleanPlot(l,a,s,i);var U=!(!i._has||!i._has("gl2d")),w=!(!a._has||!a._has("gl2d")),G=!(!i._has||!i._has("cartesian"))||U,R=!(!a._has||!a._has("cartesian"))||w;G&&!R?i._bgLayer.remove():R&&!G&&(a._shouldCreateBgLayer=!0),i._zoomlayer&&!e._dragging&&Kp({_fullLayout:i}),function(e,t){var n,i=[];t.meta&&(n=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var r=0;r<e.length;r++){var a=e[r];a.meta?i[a.index]=a._meta={meta:a.meta}:t.meta&&(a._meta={meta:t.meta}),t.meta&&(a._meta.layout={meta:t.meta})}i.length&&(n||(n=t._meta={}),n.data=i)}(l,a),tm(a,i),Yp.getComponentMethod("colorscale","crossTraceDefaults")(l,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var L,S=a._tracePreGUI,V={};for(L in S)V[L]="old";for(r=0;r<l.length;r++)V[L=l[r]._fullInput.uid]||(S[L]={}),V[L]="new";for(L in V)"old"===V[L]&&delete S[L];hm(a),Yp.getComponentMethod("rangeslider","makeData")(a),n||u.length!==l.length||im.supplyDefaultsUpdateCalc(u,l)}},im.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=(e[n]||[])[0];if(r&&r.trace){var a=r.trace;if(a._hasCalcTransform){var o,s,l,c=a._arrayAttrs;for(o=0;o<c.length;o++)s=c[o],l=Op.nestedProperty(a,s).get().slice(),Op.nestedProperty(i,s).set(l)}r.trace=i}}},im.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},im._hasPlotType=function(e){var t,n=this._basePlotModules||[];for(t=0;t<n.length;t++)if(n[t].name===e)return!0;var i=this._modules||[];for(t=0;t<i.length;t++){var r=i[t].name;if(r===e)return!0;var a=Yp.modules[r];if(a&&a.categories[e])return!0}return!1},im.cleanPlot=function(e,t,n,i){var r,a,o=i._basePlotModules||[];for(r=0;r<o.length;r++){var s=o[r];s.clean&&s.clean(e,t,n,i)}var l=i._has&&i._has("gl"),c=t._has&&t._has("gl");l&&!c&&void 0!==i._glcontainer&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var u=!!i._infolayer;e:for(r=0;r<n.length;r++){var d=n[r].uid;for(a=0;a<e.length;a++){if(d===e[a].uid)continue e}u&&i._infolayer.select(".cb"+d).remove()}},im.linkSubplots=function(e,t,n,i){var r,a,o=i._plots||{},s=t._plots={},l=t._subplots,c={_fullData:e,_fullLayout:t},u=l.cartesian.concat(l.gl2d||[]);for(r=0;r<u.length;r++){var d,g=u[r],h=o[g],f=Pp.getFromId(c,g,"x"),p=Pp.getFromId(c,g,"y");for(h?d=s[g]=h:(d=s[g]={}).id=g,f._counterAxes.push(p._id),p._counterAxes.push(f._id),f._subplotsWith.push(g),p._subplotsWith.push(g),d.xaxis=f,d.yaxis=p,d._hasClipOnAxisFalse=!1,a=0;a<e.length;a++){var m=e[a];if(m.xaxis===d.xaxis._id&&m.yaxis===d.yaxis._id&&!1===m.cliponaxis){d._hasClipOnAxisFalse=!0;break}}}var v,b=Pp.list(c,null,!0);for(r=0;r<b.length;r++){var y=null;(v=b[r]).overlaying&&(y=Pp.getFromId(c,v.overlaying))&&y.overlaying&&(v.overlaying=!1,y=null),v._mainAxis=y||v,y&&(v.domain=y.domain.slice()),v._anchorAxis="free"===v.anchor?null:Pp.getFromId(c,v.anchor)}for(r=0;r<b.length;r++)if((v=b[r])._counterAxes.sort(Pp.idSort),v._subplotsWith.sort(Op.subplotSort),v._mainSubplot=cm(v,t),v._counterAxes.length&&(v.spikemode&&-1!==v.spikemode.indexOf("across")||v.automargin&&v.mirror&&"free"!==v.anchor||Yp.getComponentMethod("rangeslider","isVisible")(v))){var I=1,C=0;for(a=0;a<v._counterAxes.length;a++){var x=Pp.getFromId(c,v._counterAxes[a]);I=Math.min(I,x.domain[0]),C=Math.max(C,x.domain[1])}I<C&&(v._counterDomainMin=I,v._counterDomainMax=C)}},im.clearExpandedTraceDefaultColors=function(e){var t,n,i;for(n=[],(t=e._module._colorAttrs)||(e._module._colorAttrs=t=[],Dp.crawl(e._module.attributes,(function(e,i,r,a){n[a]=i,n.length=a+1,"color"===e.valType&&void 0===e.dflt&&t.push(n.join("."))}))),i=0;i<t.length;i++){Op.nestedProperty(e,"_input."+t[i]).get()||Op.nestedProperty(e,t[i]).set(null)}},im.supplyDataDefaults=function(e,t,n,i){var r,a,o,s=i._modules,l=i._visibleModules,c=i._basePlotModules,u=0,d=0;function g(e){t.push(e);var n=e._module;n&&(Op.pushUnique(s,n),!0===e.visible&&Op.pushUnique(l,n),Op.pushUnique(c,e._module.basePlotModule),u++,!1!==e._input.visible&&d++)}i._transformModules=[];var h={},f=[],p=(n.template||{}).data||{},m=zp.traceTemplater(p);for(r=0;r<e.length;r++){if(o=e[r],(a=m.newTrace(o)).uid=i._traceUids[r],im.supplyTraceDefaults(o,a,d,i,r),a.index=r,a._input=o,a._expandedIndex=u,a.transforms&&a.transforms.length)for(var v=!1!==o.visible&&!1===a.visible,b=dm(a,t,n,i),y=0;y<b.length;y++){var I=b[y],C={_template:a._template,type:a.type,uid:a.uid+y};v&&!1===I.visible&&delete I.visible,im.supplyTraceDefaults(I,C,u,i,r),tm(C,I),C.index=r,C._input=o,C._fullInput=a,C._expandedIndex=u,C._expandedInput=I,g(C)}else a._fullInput=a,a._expandedInput=a,g(a);Yp.traceIs(a,"carpetAxis")&&(h[a.carpet]=a),Yp.traceIs(a,"carpetDependent")&&f.push(r)}for(r=0;r<f.length;r++)if((a=t[f[r]]).visible){var x=h[a.carpet];a._carpet=x,x&&x.visible?(a.xaxis=x.xaxis,a.yaxis=x.yaxis):a.visible=!1}},im.supplyAnimationDefaults=function(e){var t;e=e||{};var n={};function i(t,i){return Op.coerce(e||{},n,qp,t,i)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(n.frame=[],t=0;t<e.frame.length;t++)n.frame[t]=im.supplyAnimationFrameDefaults(e.frame[t]||{});else n.frame=im.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(n.transition=[],t=0;t<e.transition.length;t++)n.transition[t]=im.supplyAnimationTransitionDefaults(e.transition[t]||{});else n.transition=im.supplyAnimationTransitionDefaults(e.transition||{});return n},im.supplyAnimationFrameDefaults=function(e){var t={};function n(n,i){return Op.coerce(e||{},t,qp.frame,n,i)}return n("duration"),n("redraw"),t},im.supplyAnimationTransitionDefaults=function(e){var t={};function n(n,i){return Op.coerce(e||{},t,qp.transition,n,i)}return n("duration"),n("easing"),t},im.supplyFrameDefaults=function(e){var t={};function n(n,i){return Op.coerce(e,t,$p,n,i)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),t},im.supplyTraceDefaults=function(e,t,n,i,r){var a,o=i.colorway||Jp.defaults,s=o[n%o.length];function l(n,i){return Op.coerce(e,t,im.attributes,n,i)}var c=l("visible");l("type"),l("name",i._traceWord+" "+r),l("uirevision",i.uirevision);var u=im.getModule(t);if(t._module=u,u){var d=u.basePlotModule,g=d.attr,h=d.attributes;if(g&&h){var f=i._subplots,p="";if(c||"gl2d"!==d.name){if(Array.isArray(g))for(a=0;a<g.length;a++){var m=g[a],v=Op.coerce(e,t,h,m);f[m]&&Op.pushUnique(f[m],v),p+=v}else p=Op.coerce(e,t,h,g);f[d.name]&&Op.pushUnique(f[d.name],p)}}}return c&&(l("customdata"),l("ids"),l("meta"),Yp.traceIs(t,"showLegend")?(Op.coerce(e,t,u.attributes.showlegend?u.attributes:im.attributes,"showlegend"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,u&&u.supplyDefaults(e,t,s,i),Yp.traceIs(t,"noOpacity")||l("opacity"),Yp.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),Yp.traceIs(t,"noHover")||(t.hovertemplate||Op.coerceHoverinfo(e,t,i),"parcats"!==t.type&&Yp.getComponentMethod("fx","supplyDefaults")(e,t,s,i)),u&&u.selectPoints&&l("selectedpoints"),im.supplyTransformDefaults(e,t,i)),t},im.hasMakesDataTransform=um,im.supplyTransformDefaults=function(e,t,n){if(t._length||um(e)){var i=n._globalTransforms||[],r=n._transformModules||[];if(Array.isArray(e.transforms)||0!==i.length)for(var a=e.transforms||[],o=i.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var c,u=o[l],d=u.type,g=rm[d],h=!(u._module&&u._module===g),f=g&&"function"==typeof g.transform;g||Op.warn("Unrecognized transform type "+d+"."),g&&g.supplyDefaults&&(h||f)?((c=g.supplyDefaults(u,t,n,e)).type=d,c._module=g,Op.pushUnique(r,g)):c=Op.extendFlat({},u),s.push(c)}}},im.supplyLayoutGlobalDefaults=function(e,t,n){function i(n,i){return Op.coerce(e,t,im.layoutAttributes,n,i)}var r=e.template;Op.isPlainObject(r)&&(t.template=r,t._template=r.layout,t._dataTemplate=r.data),i("autotypenumbers");var a=Op.coerceFont(i,"font"),o=a.size;Op.coerceFont(i,"title.font",Op.extendFlat({},a,{size:Math.round(1.4*o)})),i("title.text",t._dfltTitle.plot),i("title.xref"),i("title.yref"),i("title.x"),i("title.y"),i("title.xanchor"),i("title.yanchor"),i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l"),i("uniformtext.mode")&&i("uniformtext.minsize"),i("autosize",!(e.width&&e.height)),i("width"),i("height"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),e.width&&e.height&&im.sanitizeMargins(t),Yp.getComponentMethod("grid","sizeDefaults")(e,t),i("paper_bgcolor"),i("separators",n.decimal+n.thousands),i("hidesources"),i("colorway"),i("datarevision");var s=i("uirevision");i("editrevision",s),i("selectionrevision",s),Yp.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),Yp.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,i),i("meta"),Op.isPlainObject(e.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),Yp.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),Yp.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,i)},im.plotAutoSize=function(e,t,n){var i,r,a=e._context||{},o=a.frameMargins,s=Op.isPlotDiv(e);if(s&&e.emit("plotly_autosize"),a.fillFrame)i=window.innerWidth,r=window.innerHeight,document.body.style.overflow="hidden";else{var l=s?window.getComputedStyle(e):{};if(i=gm(l.width)||gm(l.maxWidth)||n.width,r=gm(l.height)||gm(l.maxHeight)||n.height,Hp(o)&&o>0){var c=1-2*o;i=Math.round(c*i),r=Math.round(c*r)}}var u=im.layoutAttributes.width.min,d=im.layoutAttributes.height.min;i<u&&(i=u),r<d&&(r=d);var g=!t.width&&Math.abs(n.width-i)>1,h=!t.height&&Math.abs(n.height-r)>1;(h||g)&&(g&&(n.width=i),h&&(n.height=r)),e._initialAutoSize||(e._initialAutoSize={width:i,height:r}),im.sanitizeMargins(n)},im.supplyLayoutModuleDefaults=function(e,t,n,i){var r,a,o,s=Yp.componentsRegistry,l=t._basePlotModules,c=Yp.subplotsRegistry.cartesian;for(r in s)(o=s[r]).includeBasePlot&&o.includeBasePlot(e,t);for(var u in l.length||l.push(c),t._has("cartesian")&&(Yp.getComponentMethod("grid","contentDefaults")(e,t),c.finalizeSubplots(e,t)),t._subplots)t._subplots[u].sort(Op.subplotSort);for(a=0;a<l.length;a++)(o=l[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n);var d=t._modules;for(a=0;a<d.length;a++)(o=d[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n);var g=t._transformModules;for(a=0;a<g.length;a++)(o=g[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n,i);for(r in s)(o=s[r]).supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n)},im.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),Op.clearThrottle(),Op.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},im.style=function(e){var t,n=e._fullLayout._visibleModules,i=[];for(t=0;t<n.length;t++){var r=n[t];r.style&&Op.pushUnique(i,r.style)}for(t=0;t<i.length;t++)i[t](e)},im.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,i=e.height,r=e.margin,a=n-(r.l+r.r),o=i-(r.t+r.b);a<0&&(t=(n-1)/(r.l+r.r),r.l=Math.floor(t*r.l),r.r=Math.floor(t*r.r)),o<0&&(t=(i-1)/(r.t+r.b),r.t=Math.floor(t*r.t),r.b=Math.floor(t*r.b))}},im.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},im.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};im.autoMargin=function(e,t,n){var i=e._fullLayout,r=i.width,a=i.height,o=i.margin,s=Op.constrain(r-o.l-o.r,2,64),l=Op.constrain(a-o.t-o.b,2,64),c=Math.max(0,r-s),u=Math.max(0,a-l),d=i._pushmargin,g=i._pushmarginIds;if(!1!==o.autoexpand){if(n){var h=n.pad;if(void 0===h&&(h=Math.min(12,o.l,o.r,o.t,o.b)),c){var f=(n.l+n.r)/c;f>1&&(n.l/=f,n.r/=f)}if(u){var p=(n.t+n.b)/u;p>1&&(n.t/=p,n.b/=p)}var m=void 0!==n.xl?n.xl:n.x,v=void 0!==n.xr?n.xr:n.x,b=void 0!==n.yt?n.yt:n.y,y=void 0!==n.yb?n.yb:n.y;d[t]={l:{val:m,size:n.l+h},r:{val:v,size:n.r+h},b:{val:y,size:n.b+h},t:{val:b,size:n.t+h}},g[t]=1}else delete d[t],delete g[t];if(!i._replotting)return im.doAutoMargin(e)}},im.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,i=t.height;t._size||(t._size={}),hm(t);var r=t._size,a=t.margin,o=Op.extendFlat({},r),s=a.l,l=a.r,c=a.t,u=a.b,d=t._pushmargin,g=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var h in d)g[h]||delete d[h];for(var f in d.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}},d){var p=d[f].l||{},m=d[f].b||{},v=p.val,b=p.size,y=m.val,I=m.size;for(var C in d){if(Hp(b)&&d[C].r){var x=d[C].r.val,B=d[C].r.size;if(x>v){var A=(b*x+(B-n)*v)/(x-v),F=(B*(1-v)+(b-n)*(1-x))/(x-v);A+F>s+l&&(s=A,l=F)}}if(Hp(I)&&d[C].t){var Q=d[C].t.val,U=d[C].t.size;if(Q>y){var w=(I*Q+(U-i)*y)/(Q-y),G=(U*(1-y)+(I-i)*(1-Q))/(Q-y);w+G>u+c&&(u=w,c=G)}}}}}var R=Op.constrain(n-a.l-a.r,2,64),L=Op.constrain(i-a.t-a.b,2,64),S=Math.max(0,n-R),V=Math.max(0,i-L);if(S){var Z=(s+l)/S;Z>1&&(s/=Z,l/=Z)}if(V){var k=(u+c)/V;k>1&&(u/=k,c/=k)}if(r.l=Math.round(s),r.r=Math.round(l),r.t=Math.round(c),r.b=Math.round(u),r.p=Math.round(a.pad),r.w=Math.round(n)-r.l-r.r,r.h=Math.round(i)-r.t-r.b,!t._replotting&&im.didMarginChange(o,r)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var E=3*(1+Object.keys(g).length);if(t._redrawFromAutoMarginCount<E)return Yp.call("_doPlot",e);t._size=o,Op.warn("Too many auto-margin redraws.")}!function(e){var t=Pp.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach((function(e){for(var n=0;n<t.length;n++){var i=t[n][e];i&&i()}}))}(e)};var fm=["l","r","t","b","p","w","h"];function pm(e,t,n){var i=!1;var r=[im.previousPromises,function(){if(e._transitionData)return e._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(e._transitionData._interruptCallbacks)},n.prepareFn,im.rehover,function(){return e.emit("plotly_transitioning",[]),new Promise((function(r){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push((function(){i=!0})),n.redraw&&e._transitionData._interruptCallbacks.push((function(){return Yp.call("redraw",e)})),e._transitionData._interruptCallbacks.push((function(){e.emit("plotly_transitioninterrupted",[])}));var a=0,o=0;function s(){return a++,function(){o++,i||o!==a||function(t){if(!e._transitionData)return;(function(e){if(e)for(;e.length;)e.shift()})(e._transitionData._interruptCallbacks),Promise.resolve().then((function(){if(n.redraw)return Yp.call("redraw",e)})).then((function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])})).then(t)}(r)}}n.runFn(s),setTimeout(s())}))}],a=Op.syncOrAsync(r,e);return a&&a.then||(a=Promise.resolve()),a.then((function(){return e}))}im.didMarginChange=function(e,t){for(var n=0;n<fm.length;n++){var i=fm[n],r=e[i],a=t[i];if(!Hp(r)||Math.abs(a-r)>1)return!0}return!1},im.graphJson=function(e,t,n,i,r,a){(r&&t&&!e._fullData||r&&!t&&!e._fullLayout)&&im.supplyDefaults(e);var o=r?e._fullData:e.data,s=r?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function c(e,t){if("function"==typeof e)return t?"_function_":null;if(Op.isPlainObject(e)){var i,r={};return Object.keys(e).sort().forEach((function(a){if(-1===["_","["].indexOf(a.charAt(0)))if("function"!=typeof e[a]){if("keepdata"===n){if("src"===a.substr(a.length-3))return}else if("keepstream"===n){if("string"==typeof(i=e[a+"src"])&&i.indexOf(":")>0&&!Op.isPlainObject(e.stream))return}else if("keepall"!==n&&"string"==typeof(i=e[a+"src"])&&i.indexOf(":")>0)return;r[a]=c(e[a],t)}else t&&(r[a]="_function")})),r}return Array.isArray(e)?e.map((function(e){return c(e,t)})):Op.isTypedArray(e)?Op.simpleMap(e,Op.identity):Op.isJSDate(e)?Op.ms2DateTimeLocal(+e):e}var u={data:(o||[]).map((function(e){var n=c(e);return t&&delete n.fit,n}))};if(!t&&(u.layout=c(s),r)){var d=s._size;u.layout.computed={margin:{b:d.b,l:d.l,r:d.r,t:d.t}}}return l&&(u.frames=c(l)),a&&(u.config=c(e._context,!0)),"object"===i?u:JSON.stringify(u)},im.modifyFrames=function(e,t){var n,i,r,a=e._transitionData._frames,o=e._transitionData._frameHash;for(n=0;n<t.length;n++)switch((i=t[n]).type){case"replace":r=i.value;var s=(a[i.index]||{}).name,l=r.name;a[i.index]=o[l]=r,l!==s&&(delete o[s],o[l]=r);break;case"insert":o[(r=i.value).name]=r,a.splice(i.index,0,r);break;case"delete":delete o[(r=a[i.index]).name],a.splice(i.index,1)}return Promise.resolve()},im.computeFrame=function(e,t){var n,i,r,a,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=im.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(i=s.traces))for(i=[],n=0;n<s.data.length;n++)i[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(r=i[n])&&(-1===(a=u.traces.indexOf(r))&&(a=u.data.length,u.traces[a]=r),u.data[a]=im.extendTrace(u.data[a],s.data[n]))}return u},im.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,i=0;i<n.length;i++){var r=n[i];r&&r.name&&(t[r.name]=r)}},im.extendObjectWithContainers=function(e,t,n){var i,r,a,o,s,l,c,u=Op.extendDeepNoArrays({},t||{}),d=Op.expandObjectPaths(u),g={};if(n&&n.length)for(a=0;a<n.length;a++)void 0===(r=(i=Op.nestedProperty(d,n[a])).get())?Op.nestedProperty(g,n[a]).set(null):(i.set(null),Op.nestedProperty(g,n[a]).set(r));if(e=Op.extendDeepNoArrays(e||{},d),n&&n.length)for(a=0;a<n.length;a++)if(l=Op.nestedProperty(g,n[a]).get()){for(c=(s=Op.nestedProperty(e,n[a])).get(),Array.isArray(c)||(c=[],s.set(c)),o=0;o<l.length;o++){var h=l[o];c[o]=null===h?null:im.extendObjectWithContainers(c[o],h)}s.set(c)}return e},im.dataArrayContainers=["transforms","dimensions"],im.layoutArrayContainers=Yp.layoutArrayContainers,im.extendTrace=function(e,t){return im.extendObjectWithContainers(e,t,im.dataArrayContainers)},im.extendLayout=function(e,t){return im.extendObjectWithContainers(e,t,im.layoutArrayContainers)},im.transition=function(e,t,n,i,r,a){var o={redraw:r.redraw},s={},l=[];return o.prepareFn=function(){for(var r=Array.isArray(t)?t.length:0,a=i.slice(0,r),o=0;o<a.length;o++){var c=a[o],u=e._fullData[c]._module;if(u){if(u.animatable){var d=u.basePlotModule.name;s[d]||(s[d]=[]),s[d].push(c)}e.data[a[o]]=im.extendTrace(e.data[a[o]],t[o])}}var g=Op.expandObjectPaths(Op.extendDeepNoArrays({},n)),h=/^[xy]axis[0-9]*$/;for(var f in g)h.test(f)&&delete g[f].range;im.extendLayout(e.layout,g),delete e.calcdata,im.supplyDefaults(e),im.doCalcdata(e);var p=Op.expandObjectPaths(n);if(p){var m=e._fullLayout._plots;for(var v in m){var b=m[v],y=b.xaxis,I=b.yaxis,C=y.range.slice(),x=I.range.slice(),B=null,A=null,F=null,Q=null;Array.isArray(p[y._name+".range"])?B=p[y._name+".range"].slice():Array.isArray((p[y._name]||{}).range)&&(B=p[y._name].range.slice()),Array.isArray(p[I._name+".range"])?A=p[I._name+".range"].slice():Array.isArray((p[I._name]||{}).range)&&(A=p[I._name].range.slice()),C&&B&&(y.r2l(C[0])!==y.r2l(B[0])||y.r2l(C[1])!==y.r2l(B[1]))&&(F={xr0:C,xr1:B}),x&&A&&(I.r2l(x[0])!==I.r2l(A[0])||I.r2l(x[1])!==I.r2l(A[1]))&&(Q={yr0:x,yr1:A}),(F||Q)&&l.push(Op.extendFlat({plotinfo:b},F,Q))}}return Promise.resolve()},o.runFn=function(t){var i,r,o=e._fullLayout._basePlotModules,c=l.length;if(n)for(r=0;r<o.length;r++)o[r].transitionAxes&&o[r].transitionAxes(e,l,a,t);for(var u in c?((i=Op.extendFlat({},a)).duration=0,delete s.cartesian):i=a,s){var d=s[u];e._fullData[d[0]]._module.basePlotModule.plot(e,d,i,t)}},pm(e,a,o)},im.transitionFromReact=function(e,t,n,i){var r=e._fullLayout,a=r.transition,o={},s=[];return o.prepareFn=function(){var e=r._plots;for(var a in o.redraw=!1,"some"===t.anim&&(o.redraw=!0),"some"===n.anim&&(o.redraw=!0),e){var l=e[a],c=l.xaxis,u=l.yaxis,d=i[c._name].range.slice(),g=i[u._name].range.slice(),h=c.range.slice(),f=u.range.slice();c.setScale(),u.setScale();var p=null,m=null;c.r2l(d[0])===c.r2l(h[0])&&c.r2l(d[1])===c.r2l(h[1])||(p={xr0:d,xr1:h}),u.r2l(g[0])===u.r2l(f[0])&&u.r2l(g[1])===u.r2l(f[1])||(m={yr0:g,yr1:f}),(p||m)&&s.push(Op.extendFlat({plotinfo:l},p,m))}return Promise.resolve()},o.runFn=function(n){for(var i,r,o,l=e._fullData,c=e._fullLayout._basePlotModules,u=[],d=0;d<l.length;d++)u.push(d);function g(){if(e._fullLayout)for(var t=0;t<c.length;t++)c[t].transitionAxes&&c[t].transitionAxes(e,s,i,n)}function h(){if(e._fullLayout)for(var t=0;t<c.length;t++)c[t].plot(e,o,r,n)}s.length&&t.anim?"traces first"===a.ordering?(i=Op.extendFlat({},a,{duration:0}),o=u,r=a,setTimeout(g,a.duration),h()):(i=a,o=null,r=Op.extendFlat({},a,{duration:0}),setTimeout(h,i.duration),g()):s.length?(i=a,g()):t.anim&&(o=u,r=a,h())},pm(e,a,o)},im.doCalcdata=function(e,t){var n,i,r,a,o=Pp.list(e),s=e._fullData,l=e._fullLayout,c=new Array(s.length),u=(e.calcdata||[]).slice();for(e.calcdata=c,l._numBoxes=0,l._numViolins=0,l._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,l._piecolormap={},l._sunburstcolormap={},l._treemapcolormap={},l._iciclecolormap={},l._funnelareacolormap={},r=0;r<s.length;r++)Array.isArray(t)&&-1===t.indexOf(r)&&(c[r]=u[r]);for(r=0;r<s.length;r++)(n=s[r])._arrayAttrs=Dp.findArrayAttributes(n),n._extremes={};var d=l._subplots.polar||[];for(r=0;r<d.length;r++)o.push(l[d[r]].radialaxis,l[d[r]].angularaxis);for(var g in l._colorAxes){var h=l[g];!1!==h.cauto&&(delete h.cmin,delete h.cmax)}var f=!1;function p(t){if(n=s[t],i=n._module,!0===n.visible&&n.transforms){if(i&&i.calc){var r=i.calc(e,n);r[0]&&r[0].t&&r[0].t._scene&&delete r[0].t._scene.dirty}for(a=0;a<n.transforms.length;a++){var o=n.transforms[a];(i=rm[o.type])&&i.calcTransform&&(n._hasCalcTransform=!0,f=!0,i.calcTransform(e,n,o))}}}function m(t,r){if(n=s[t],!!(i=n._module).isContainer===r){var o=[];if(!0===n.visible&&0!==n._length){delete n._indexToPoints;var l=n.transforms||[];for(a=l.length-1;a>=0;a--)if(l[a].enabled){n._indexToPoints=l[a]._indexToPoints;break}i&&i.calc&&(o=i.calc(e,n))}Array.isArray(o)&&o[0]||(o=[{x:jp,y:jp}]),o[0].t||(o[0].t={}),o[0].trace=n,c[t]=o}}for(vm(o,s,l),r=0;r<s.length;r++)m(r,!0);for(r=0;r<s.length;r++)p(r);for(f&&vm(o,s,l),r=0;r<s.length;r++)m(r,!0);for(r=0;r<s.length;r++)m(r,!1);bm(e);var v=function(e,t){var n,i,r,a,o,s=[];function l(e,n,i){var r=n._id.charAt(0);if("histogram2dcontour"===e){var a=n._counterAxes[0],o=Pp.getFromId(t,a),s="x"===r||"x"===a&&"category"===o.type,l="y"===r||"y"===a&&"category"===o.type;return function(e,t){return 0===e||0===t||s&&e===i[t].length-1||l&&t===i.length-1?-1:("y"===r?t:e)-1}}return function(e,t){return"y"===r?t:e}}var c={min:function(e){return Op.aggNums(Math.min,null,e)},max:function(e){return Op.aggNums(Math.max,null,e)},sum:function(e){return Op.aggNums((function(e,t){return e+t}),null,e)},total:function(e){return Op.aggNums((function(e,t){return e+t}),null,e)},mean:function(e){return Op.mean(e)},median:function(e){return Op.median(e)}};for(n=0;n<e.length;n++){var u=e[n];if("category"===u.type){var d=u.categoryorder.match(mm);if(d){var g=d[1],h=d[2],f=u._id.charAt(0),p="x"===f,m=[];for(i=0;i<u._categories.length;i++)m.push([u._categories[i],[]]);for(i=0;i<u._traceIndices.length;i++){var v=u._traceIndices[i],b=t._fullData[v];if(!0===b.visible){var y=b.type;Yp.traceIs(b,"histogram")&&(delete b._xautoBinFinished,delete b._yautoBinFinished);var I="splom"===y,C="scattergl"===y,x=t.calcdata[v];for(r=0;r<x.length;r++){var B,A,F=x[r];if(I){var Q=b._axesDim[u._id];if(!p){var U=b._diag[Q][0];U&&(u=t._fullLayout[Pp.id2name(U)])}var w=F.trace.dimensions[Q].values;for(a=0;a<w.length;a++)for(B=u._categoriesMap[w[a]],o=0;o<F.trace.dimensions.length;o++)if(o!==Q){var G=F.trace.dimensions[o];m[B][1].push(G.values[a])}}else if(C){for(a=0;a<F.t.x.length;a++)p?(B=F.t.x[a],A=F.t.y[a]):(B=F.t.y[a],A=F.t.x[a]),m[B][1].push(A);F.t&&F.t._scene&&delete F.t._scene.dirty}else if(F.hasOwnProperty("z")){A=F.z;var R=l(b.type,u,A);for(a=0;a<A.length;a++)for(o=0;o<A[a].length;o++)(B=R(o,a))+1&&m[B][1].push(A[a][o])}else for(void 0===(B=F.p)&&(B=F[f]),void 0===(A=F.s)&&(A=F.v),void 0===A&&(A=p?F.y:F.x),Array.isArray(A)||(A=void 0===A?[]:[A]),a=0;a<A.length;a++)m[B][1].push(A[a])}}}u._categoriesValue=m;var L=[];for(i=0;i<m.length;i++)L.push([m[i][0],c[g](m[i][1])]);L.sort((function(e,t){return e[1]-t[1]})),u._categoriesAggregatedValue=L,u._initialCategories=L.map((function(e){return e[0]})),"descending"===h&&u._initialCategories.reverse(),s=s.concat(u.sortByInitialCategories())}}}return s}(o,e);if(v.length){for(l._numBoxes=0,l._numViolins=0,r=0;r<v.length;r++)m(v[r],!0);for(r=0;r<v.length;r++)m(v[r],!1);bm(e)}Yp.getComponentMethod("fx","calc")(e),Yp.getComponentMethod("errorbars","calc")(e)};var mm=/(total|sum|min|max|mean|median) (ascending|descending)/;function vm(e,t,n){var i={};function r(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),i[e._id]=1}Op.simpleMap(e,r);for(var a=n._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])i[s]||r(n[Pp.id2name(s)])}function bm(e){var t,n,i,r=e._fullLayout,a=r._visibleModules,o={};for(n=0;n<a.length;n++){var s=a[n],l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;o[c]?Op.pushUnique(o[c],l):o[c]=[l]}}for(i in o){var u=o[i],d=r._subplots[i];if(Array.isArray(d))for(t=0;t<d.length;t++){var g=d[t],h="cartesian"===i?r._plots[g]:r[g];for(n=0;n<u.length;n++)u[n](e,h,g)}else for(n=0;n<u.length;n++)u[n](e)}}im.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},im.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},im.generalUpdatePerTraceModule=function(e,t,n,i){var r,a=t.traceHash,o={};for(r=0;r<n.length;r++){var s=n[r],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var c in a)if(!o[c]){var u=a[c][0];u[0].trace.visible=!1,o[c]=[u]}for(var d in o){var g=o[d];g[0][0].trace._module.plot(e,t,Op.filterVisible(g),i)}t.traceHash=o},im.plotBasePlot=function(e,t,n,i,r){var a=Yp.getModule(e),o=em(t.calcdata,a)[0];a.plot(t,o,i,r)},im.cleanBasePlot=function(e,t,n,i,r){var a=r._has&&r._has(e),o=n._has&&n._has(e);a&&!o&&r["_"+e+"layer"].selectAll("g.trace").remove()};var ym,Im={exports:{}},Cm={},xm={};(ym=xm).xmlns="http://www.w3.org/2000/xmlns/",ym.svg="http://www.w3.org/2000/svg",ym.xlink="http://www.w3.org/1999/xlink",ym.svgAttrs={xmlns:ym.svg,"xmlns:xlink":ym.xlink};var Bm={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}};!function(e){var t=Gs.exports,n=ws.exports,i=n.strTranslate,r=xm,a=Bm.LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;e.convertToTspans=function(h,A,F){var w=h.text(),G=!h.attr("data-notex")&&"undefined"!=typeof MathJax&&w.match(o),R=t.select(h.node().parentNode);if(!R.empty()){var L=h.attr("class")?h.attr("class").split(" ")[0]:"text";return L+="-math",R.selectAll("svg."+L).remove(),R.selectAll("g."+L+"-group").remove(),h.style("display",null).attr({"data-unformatted":w,"data-math":"N"}),G?(A&&A._promises||[]).push(new Promise((function(e){h.style("display","none");var r=parseInt(h.node().style.fontSize,10),a={fontSize:r};!function(e,i,r){var a,o,c,u;MathJax.Hub.Queue((function(){return o=n.extendDeepAll({},MathJax.Hub.config),c=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})}),(function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")}),(function(){var r="math-output-"+n.randstr({},64);return u=t.select("body").append("div").attr({id:r}).style({visibility:"hidden",position:"absolute"}).style({"font-size":i.fontSize+"px"}).text(function(e){return e.replace(s,"\\lt ").replace(l,"\\gt ")}(e)),MathJax.Hub.Typeset(u.node())}),(function(){var i=t.select("body").select("#MathJax_SVG_glyphs");if(u.select(".MathJax_SVG").empty()||!u.select("svg").node())n.log("There was an error in the tex syntax.",e),r();else{var o=u.select("svg").node().getBoundingClientRect();r(u.select(".MathJax_SVG"),i,o)}if(u.remove(),"SVG"!==a)return MathJax.Hub.setRenderer(a)}),(function(){return void 0!==c&&(MathJax.Hub.processSectionDelay=c),MathJax.Hub.Config(o)}))}(G[2],a,(function(t,n,a){R.selectAll("svg."+L).remove(),R.selectAll("g."+L+"-group").remove();var o=t&&t.select("svg");if(!o||!o.node())return S(),void e();var s=R.append("g").classed(L+"-group",!0).attr({"pointer-events":"none","data-unformatted":w,"data-math":"Y"});s.node().appendChild(o.node()),n&&n.node()&&o.node().insertBefore(n.node().cloneNode(!0),o.node().firstChild);var l=a.width,c=a.height;o.attr({class:L,height:c,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var u=h.node().style.fill||"black",d=o.select("g");d.attr({fill:u,stroke:u});var g=d.node().getBoundingClientRect(),f=g.width,p=g.height;(f>l||p>c)&&(o.style("overflow","hidden"),f=(g=o.node().getBoundingClientRect()).width,p=g.height);var m=+h.attr("x"),v=+h.attr("y"),b=-(r||h.node().getBoundingClientRect().height)/4;if("y"===L[0])s.attr({transform:"rotate("+[-90,m,v]+")"+i(-f/2,b-p/2)});else if("l"===L[0])v=b-p/2;else if("a"===L[0]&&0!==L.indexOf("atitle"))m=0,v=b;else{var y=h.attr("text-anchor");m-=f*("middle"===y?.5:"end"===y?1:0),v=v+b-p/2}o.attr({x:m,y:v}),F&&F.call(h,s),e(s)}))}))):S(),h}function S(){R.empty()||(L=h.attr("class")+"-math",R.select("svg."+L).remove()),h.text("").style("white-space","pre");var i=function(e,i){i=i.replace(f," ");var o,s=!1,l=[],h=-1;function A(){h++;var n=document.createElementNS(r.svg,"tspan");t.select(n).attr({class:"line",dy:h*a+"em"}),e.appendChild(n),o=n;var i=l;if(l=[{node:n}],i.length>1)for(var s=1;s<i.length;s++)F(i[s])}function F(e){var n,i=e.type,a={};if("a"===i){n="a";var s=e.target,c=e.href,h=e.popup;c&&(a={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":c},h&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+h+'");return false;'))}else n="tspan";e.style&&(a.style=e.style);var f=document.createElementNS(r.svg,n);if("sup"===i||"sub"===i){w(o,g),o.appendChild(f);var p=document.createElementNS(r.svg,"tspan");w(p,g),t.select(p).attr("dy",d[i]),a.dy=u[i],o.appendChild(f),o.appendChild(p)}else o.appendChild(f);t.select(f).attr(a),o=e.node=f,l.push(e)}function w(e,t){e.appendChild(document.createTextNode(t))}function G(e){if(1!==l.length){var t=l.pop();e!==t.type&&n.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",i),o=l[l.length-1].node}else n.log("Ignoring unexpected end tag </"+e+">.",i)}v.test(i)?A():(o=e,l=[{node:e}]);for(var R=i.split(p),L=0;L<R.length;L++){var S=R[L],V=S.match(m),Z=V&&V[2].toLowerCase(),k=c[Z];if("br"===Z)A();else if(void 0===k)w(o,Q(S));else if(V[1])G(Z);else{var E=V[4],X={type:Z},N=x(E,b);if(N?(N=N.replace(B,"$1 fill:"),k&&(N+=";"+k)):k&&(N=k),N&&(X.style=N),"a"===Z){s=!0;var W=x(E,y);if(W){var _=U(W);_&&(X.href=_,X.target=x(E,I)||"_blank",X.popup=x(E,C))}}F(X)}}return s}(h.node(),w);i&&h.style("pointer-events","all"),e.positionText(h),F&&F.call(h)}};var s=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g;var c={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},g="",h=["http:","https:","mailto:","",void 0,":"],f=e.NEWLINES=/(\r\n?|\n)/g,p=/(<[^<>]*>)/,m=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;e.BR_TAG_ALL=/<br(\s+.*)?>/gi;var b=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,I=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,C=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function x(e,t){if(!e)return null;var n=e.match(t),i=n&&(n[3]||n[4]);return i&&Q(i)}var B=/(^|;)\s*color:/;e.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,i=void 0!==t.allowedTags?t.allowedTags:["br"],r="...".length,a=e.split(p),o=[],s="",l=0,c=0;c<a.length;c++){var u=a[c],d=u.match(m),g=d&&d[2].toLowerCase();if(g)-1!==i.indexOf(g)&&(o.push(u),s=g);else{var h=u.length;if(l+h<n)o.push(u),l+=h;else if(l<n){var f=n-l;s&&("br"!==s||f<=r||h<=r)&&o.pop(),n>r?o.push(u.substr(0,f-r)+"..."):o.push(u.substr(0,f));break}s=""}}return o.join("")};var A={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},F=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function Q(e){return e.replace(F,(function(e,t){var n;return n="#"===t.charAt(0)?function(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var n=String.fromCharCode;return e<=65535?n(e):n(55232+(e>>10),e%1024+56320)}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):A[t],n||e}))}function U(e){var t=encodeURI(decodeURI(e)),n=document.createElement("a"),i=document.createElement("a");n.href=e,i.href=t;var r=n.protocol,a=i.protocol;return-1!==h.indexOf(r)&&-1!==h.indexOf(a)?t:""}function w(e,t,i){var r,a,o,s=i.horizontalAlign,l=i.verticalAlign||"top",c=e.node().getBoundingClientRect(),u=t.node().getBoundingClientRect();return a="bottom"===l?function(){return c.bottom-r.height}:"middle"===l?function(){return c.top+(c.height-r.height)/2}:function(){return c.top},o="right"===s?function(){return c.right-r.width}:"center"===s?function(){return c.left+(c.width-r.width)/2}:function(){return c.left},function(){r=this.node().getBoundingClientRect();var e=o()-u.left,t=a()-u.top,s=i.gd||{};if(i.gd){s._fullLayout._calcInverseTransform(s);var l=n.apply3DTransform(s._fullLayout._invTransform)(e,t);e=l[0],t=l[1]}return this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}e.convertEntities=Q,e.sanitizeHTML=function(e){e=e.replace(f," ");for(var n=document.createElement("p"),i=n,r=[],a=e.split(p),o=0;o<a.length;o++){var s=a[o],l=s.match(m),u=l&&l[2].toLowerCase();if(u in c)if(l[1])r.length&&(i=r.pop());else{var d=l[4],g=x(d,b),h=g?{style:g}:{};if("a"===u){var v=x(d,y);if(v){var C=U(v);if(C){h.href=C;var B=x(d,I);B&&(h.target=B)}}}var A=document.createElement(u);i.appendChild(A),t.select(A).attr(h),i=A,r.push(A)}else i.appendChild(document.createTextNode(Q(s)))}return n.innerHTML},e.lineCount=function(e){return e.selectAll("tspan.line").size()||1},e.positionText=function(e,n,i){return e.each((function(){var e=t.select(this);function r(t,n){return void 0===n?null===(n=e.attr(t))&&(e.attr(t,0),n=0):e.attr(t,n),n}var a=r("x",n),o=r("y",i);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:a,y:o})}))};var G="1px ";e.makeTextShadow=function(e){return G+G+G+e+", -"+G+"-"+G+G+e+", "+G+"-"+G+G+e+", -"+G+G+G+e},e.makeEditable=function(e,n){var i=n.gd,r=n.delegate,a=t.dispatch("edit","input","cancel"),o=r||e;if(e.style({"pointer-events":r?"none":"all"}),1!==e.size())throw new Error("boo");function s(){!function(){var r=t.select(i).select(".svg-container"),o=r.append("div"),s=e.node().style,c=parseFloat(s.fontSize||12),u=n.text;void 0===u&&(u=e.attr("data-unformatted"));o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":c,color:n.fill||s.fill||"black",opacity:1,"background-color":n.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(u).call(w(e,r,n)).on("blur",(function(){i._editing=!1,e.text(this.textContent).style({opacity:1});var n,r=t.select(this).attr("class");(n=r?"."+r.split(" ")[0]+"-math-group":"[class*=-math-group]")&&t.select(e.node().parentNode).select(n).style({opacity:0});var o=this.textContent;t.select(this).transition().duration(0).remove(),t.select(document).on("mouseup",null),a.edit.call(e,o)})).on("focus",(function(){var e=this;i._editing=!0,t.select(document).on("mouseup",(function(){if(t.event.target===e)return!1;document.activeElement===o.node()&&o.node().blur()}))})).on("keyup",(function(){27===t.event.which?(i._editing=!1,e.style({opacity:1}),t.select(this).style({opacity:0}).on("blur",(function(){return!1})).transition().remove(),a.cancel.call(e,this.textContent)):(a.input.call(e,this.textContent),t.select(this).call(w(e,r,n)))})).on("keydown",(function(){13===t.event.which&&this.blur()})).call(l)}(),e.style({opacity:0});var r,s=o.attr("class");(r=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&t.select(e.node().parentNode).select(r).style({opacity:0})}function l(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var i=window.getSelection();i.removeAllRanges(),i.addRange(n),t.focus()}return n.immediate?s():o.on("click",s),t.rebind(e,a,"on")}}(Cm);var Am={exports:{}},Fm=Gs.exports,Qm=Id.exports,Um=Yu,wm=ws.exports,Gm=Hd.exports,Rm=Md.isValid;var Lm=["showscale","autocolorscale","colorscale","reversescale","colorbar"],Sm=["min","max","mid","auto"];function Vm(e){var t,n,i,r=e._colorAx,a=r||e,o={};for(n=0;n<Lm.length;n++)o[i=Lm[n]]=a[i];if(r)for(t="c",n=0;n<Sm.length;n++)o[i=Sm[n]]=a["c"+i];else{var s;for(n=0;n<Sm.length;n++)((s="c"+(i=Sm[n]))in a||(s="z"+i)in a)&&(o[i]=a[s]);t=s.charAt(0)}return o._sync=function(e,n){var i=-1!==Sm.indexOf(e)?t+e:e;a[i]=a["_"+i]=n},o}function Zm(e){for(var t=Vm(e),n=t.min,i=t.max,r=t.reversescale?km(t.colorscale):t.colorscale,a=r.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var c=r[l];o[l]=n+c[0]*(i-n),s[l]=c[1]}return{domain:o,range:s}}function km(e){for(var t=e.length,n=new Array(t),i=t-1,r=0;i>=0;i--,r++){var a=e[i];n[r]=[1-a[0],a[1]]}return n}function Em(e,t){t=t||{};for(var n=e.domain,i=e.range,r=i.length,a=new Array(r),o=0;o<r;o++){var s=Qm(i[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l,c=Fm.scale.linear().domain(n).range(a).clamp(!0),u=t.noNumericCheck,d=t.returnArray;return l=u&&d?c:u?function(e){return Xm(c(e))}:d?function(e){return Um(e)?c(e):Qm(e).isValid()?e:Gm.defaultLine}:function(e){return Um(e)?Xm(c(e)):Qm(e).isValid()?e:Gm.defaultLine},l.domain=c.domain,l.range=function(){return i},l}function Xm(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return Qm(t).toRgbString()}var Nm={hasColorscale:function(e,t,n){var i=t?wm.nestedProperty(e,t).get()||{}:e,r=i[n||"color"],a=!1;if(wm.isArrayOrTypedArray(r))for(var o=0;o<r.length;o++)if(Um(r[o])){a=!0;break}return wm.isPlainObject(i)&&(a||!0===i.showscale||Um(i.cmin)&&Um(i.cmax)||Rm(i.colorscale)||wm.isPlainObject(i.colorbar))},extractOpts:Vm,extractScale:Zm,flipScale:km,makeColorScaleFunc:Em,makeColorScaleFuncFromTrace:function(e,t){return Em(Zm(e),t)}},Wm={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"},_m=Wm.FORMAT_LINK,Tm=Wm.DATE_FORMAT_LINK;function Mm(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+_m+"."].join(" ")}function Hm(e,t){return Mm(e,t)+[" And for dates see: "+Tm+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}var Ym=function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?Mm:Hm)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},Dm=Hm,zm=Cd,Om=Yd,Jm=ih.dash,jm=Ud.extendFlat,Pm=Qp.templatedArray,Km=Dm,qm=Du.ONEDAY,$m=Zp,ev=$m.HOUR_PATTERN,tv=$m.WEEKDAY_PATTERN,nv={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:Om.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:zm({editType:"ticks",description:["Sets this axis' title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},scaleanchor:{valType:"enumerated",values:[$m.idRegex.x.toString(),$m.idRegex.y.toString()],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[$m.idRegex.x.toString(),$m.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:Pm("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[tv,ev,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+tv+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+ev+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+tv+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+ev+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:qm,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks",description:["Sets the spacing between tick labels as compared to the spacing between ticks.","A value of 1 (default) means each tick gets a label.","A value of 2 means shows every 2nd label.","A larger value n means only every nth tick is labeled.","`tick0` determines which labels are shown.","Not implemented for axes with `type` *log* or *multicategory*, or when `tickmode` is *array*."].join(" ")},tickvals:{valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks",description:"Sets the tick length (in px)."},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks",description:"Sets the tick width (in px)."},tickcolor:{valType:"color",dflt:Om.defaultLine,editType:"ticks",description:"Sets the tick color."},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},automargin:{valType:"boolean",dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:jm({},Jm,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:zm({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:Km("tick label")},tickformatstops:Pm("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:Km("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:Om.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:{valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},gridcolor:{valType:"color",dflt:Om.lightLine,editType:"ticks",description:"Sets the color of the grid lines."},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks",description:"Sets the width (in px) of the grid lines."},zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:Om.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:Om.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",$m.idRegex.x.toString(),$m.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",$m.idRegex.x.toString(),$m.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")},title:{valType:"string",editType:"ticks",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the axis' title, please use `title.text` now."].join(" ")},titlefont:zm({editType:"ticks",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}},iv=nv,rv=Cd,av=Ud.extendFlat,ov=(0,Cp.overrideAll)({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,description:["Sets the x position of the color bar (in plot fraction).","Defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",min:-2,max:3,description:["Sets the y position of the color bar (in plot fraction).","Defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:iv.linecolor,outlinewidth:iv.linewidth,bordercolor:iv.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:iv.tickmode,nticks:iv.nticks,tick0:iv.tick0,dtick:iv.dtick,tickvals:iv.tickvals,ticktext:iv.ticktext,ticks:av({},iv.ticks,{dflt:""}),ticklabeloverflow:av({},iv.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:iv.ticklen,tickwidth:iv.tickwidth,tickcolor:iv.tickcolor,ticklabelstep:iv.ticklabelstep,showticklabels:iv.showticklabels,tickfont:rv({description:"Sets the color bar's tick label font"}),tickangle:iv.tickangle,tickformat:iv.tickformat,tickformatstops:iv.tickformatstops,tickprefix:iv.tickprefix,showtickprefix:iv.showtickprefix,ticksuffix:iv.ticksuffix,showticksuffix:iv.showticksuffix,separatethousands:iv.separatethousands,exponentformat:iv.exponentformat,minexponent:iv.minexponent,showexponent:iv.showexponent,title:{text:{valType:"string",description:["Sets the title of the color bar.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:rv({description:["Sets this color bar's title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*.","Note that the title's location used to be set","by the now deprecated `titleside` attribute."].join(" ")}},_deprecated:{title:{valType:"string",description:["Deprecated in favor of color bar's `title.text`.","Note that value of color bar's `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:rv({description:"Deprecated in favor of color bar's `title.font`."}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top",description:"Deprecated in favor of color bar's `title.side`."}}},"colorbars","from-root"),sv=ov,lv=eg.counter,cv=Md.scales,uv=bh(cv);function dv(e){return"`"+e+"`"}var gv=function(e,t){e=e||"";var n,i,r=(t=t||{}).cLetter||"c",a="onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),o="noScale"in t?t.noScale:"marker.line"===e,s="showScaleDflt"in t?t.showScaleDflt:"z"===r,l="string"==typeof t.colorscaleDflt?cv[t.colorscaleDflt]:null,c=t.editTypeOverride||"",u=e?e+".":"";"colorAttr"in t?(n=t.colorAttr,i=t.colorAttr):i="in "+dv(u+(n={z:"z",c:"color"}[r]));var d=a?" Has an effect only if "+i+"is set to a numerical array.":"",g=r+"auto",h=r+"min",f=r+"max",p=r+"mid",m=dv(u+g),v=dv(u+h),b=dv(u+f),y=v+" and "+b,I={};I[h]=I[f]=void 0;var C={};C[g]=!1;var x={};return"color"===n&&(x.color={valType:"color",arrayOk:!0,editType:c||"style",description:["Sets the",e,"color."," It accepts either a specific color"," or an array of numbers that are mapped to the colorscale"," relative to the max and min values of the array or relative to"," "+y+" if set."].join("")},t.anim&&(x.color.anim=!0)),x[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:I,description:["Determines whether or not the color domain is computed"," with respect to the input data (here "+i+") or the bounds set in"," ",y," ",d," Defaults to `false` when ",y," are set by the user."].join("")},x[h]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:C,description:["Sets the lower bound of the color domain.",d," Value should have the same units as ",i," and if set, ",b," must be set as well."].join("")},x[f]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:C,description:["Sets the upper bound of the color domain.",d," Value should have the same units as ",i," and if set, ",v," must be set as well."].join("")},x[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:I,description:["Sets the mid-point of the color domain by scaling ",v," and/or ",b," to be equidistant to this point.",d," Value should have the same units as ",i,". ","Has no effect when ",m," is `false`."].join("")},x.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale.",d," The colorscale must be an array containing"," arrays mapping a normalized value to an"," rgb, rgba, hex, hsl, hsv, or named color string."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`."," To control the bounds of the colorscale in color space,"," use",y,"."," Alternatively, `colorscale` may be a palette name string"," of the following list: "+uv+"."].join("")},x.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)"," or the palette determined by ",dv(u+"colorscale"),".",d," In case `colorscale` is unspecified or `autocolorscale` is true, the default "," palette will be chosen according to whether numbers in the `color` array are"," all positive, all negative or mixed."].join("")},x.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true.",d," If true, ",v," will correspond to the last color"," in the array and ",b," will correspond to the first color."].join("")},o||(x.showscale={valType:"boolean",dflt:s,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace.",d].join("")},x.colorbar=sv),t.noColorAxis||(x.coloraxis={valType:"subplotid",regex:lv("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),x},hv=Ud.extendFlat,fv=gv,pv=Md.scales,mv="Note that `autocolorscale` must be true for this attribute to work.",vv={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:pv.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",mv].join(" ")},sequentialminus:{valType:"colorscale",dflt:pv.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",mv].join(" ")},diverging:{valType:"colorscale",dflt:pv.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",mv].join(" ")}},coloraxis:hv({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},fv("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))},bv=ws.exports,yv=function(e){return bv.isPlainObject(e.colorbar)},Iv={},Cv=Yu,xv=ws.exports,Bv=Du.ONEDAY,Av=Du.ONEWEEK;Iv.dtick=function(e,t){var n="log"===t,i="date"===t,r="category"===t,a=i?Bv:1;if(!e)return a;if(Cv(e))return(e=Number(e))<=0?a:r?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if("string"!=typeof e||!i&&!n)return a;var o=e.charAt(0),s=e.substr(1);return(s=Cv(s)?Number(s):0)<=0||!(i&&"M"===o&&s===Math.round(s)||n&&"L"===o||n&&"D"===o&&(1===s||2===s))?a:e},Iv.tick0=function(e,t,n,i){return"date"===t?xv.cleanDate(e,xv.dateTick0(n,i%Av==0?1:0)):"D1"!==i&&"D2"!==i?Cv(e)?Number(e):0:void 0};var Fv=Iv,Qv=ws.exports.isArrayOrTypedArray,Uv=function(e,t,n,i){function r(n){var i=e[n];return void 0!==i?i:(t._template||{})[n]}var a=r("tick0"),o=r("dtick"),s=r("tickvals"),l=n("tickmode",Qv(s)?"array":o?"linear":"auto");if("auto"===l)n("nticks");else if("linear"===l){var c=t.dtick=Fv.dtick(o,i);t.tick0=Fv.tick0(a,i,t.calendar,c)}else if("multicategory"!==i){void 0===n("tickvals")?t.tickmode="auto":n("ticktext")}},wv=ws.exports,Gv=nv,Rv=function(e,t,n,i){var r=wv.coerce2(e,t,Gv,"ticklen"),a=wv.coerce2(e,t,Gv,"tickwidth"),o=wv.coerce2(e,t,Gv,"tickcolor",t.color);n("ticks",i.outerTicks||r||a||o?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)},Lv=function(e){var t=["showexponent","showtickprefix","showticksuffix"].filter((function(t){return void 0!==e[t]}));if(t.every((function(n){return e[n]===e[t[0]]}))||1===t.length)return e[t[0]]},Sv=ws.exports,Vv=Qp,Zv=function(e,t,n){var i,r,a=n.name,o=n.inclusionAttr||"visible",s=t[a],l=Sv.isArrayOrTypedArray(e[a])?e[a]:[],c=t[a]=[],u=Vv.arrayTemplater(t,a,o);for(i=0;i<l.length;i++){var d=l[i];Sv.isPlainObject(d)?r=u.newItem(d):(r=u.newItem({}))[o]=!1,r._index=i,!1!==r[o]&&n.handleItemDefaults(d,r,t,n),c.push(r)}var g=u.defaultItems();for(i=0;i<g.length;i++)(r=g[i])._index=c.length,n.handleItemDefaults({},r,t,n,{}),c.push(r);if(Sv.isArrayOrTypedArray(s)){var h=Math.min(s.length,c.length);for(i=0;i<h;i++)Sv.relinkPrivateKeys(c[i],s[i])}return c},kv=ws.exports,Ev=Hd.exports.contrast,Xv=nv,Nv=Lv,Wv=Zv,_v=function(e,t,n,i,r){r||(r={});var a=Nv(e);if(n("showticklabels")){var o=r.font||{},s=t.color,l=-1!==(t.ticklabelposition||"").indexOf("inside")?Ev(r.bgColor):s&&s!==Xv.color.dflt?s:o.color;if(kv.coerceFont(n,"tickfont",{family:o.family,size:o.size,color:l}),r.noTicklabelstep||"multicategory"===i||"log"===i||n("ticklabelstep"),r.noAng||n("tickangle"),"category"!==i){var c=n("tickformat");Wv(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:Tv}),t.tickformatstops.length||delete t.tickformatstops,r.noExp||c||"date"===i||(n("showexponent",a),n("exponentformat"),n("minexponent"),n("separatethousands"))}}};function Tv(e,t){function n(n,i){return kv.coerce(e,t,Xv.tickformatstops,n,i)}n("enabled")&&(n("dtickrange"),n("value"))}var Mv=Lv,Hv=function(e,t,n,i,r){r||(r={});var a=r.tickSuffixDflt,o=Mv(e);n("tickprefix")&&n("showtickprefix",o),n("ticksuffix",a)&&n("showticksuffix",o)},Yv=ws.exports,Dv=Qp,zv=Uv,Ov=Rv,Jv=_v,jv=Hv,Pv=ov,Kv=function(e,t,n){var i=Dv.newContainer(t,"colorbar"),r=e.colorbar||{};function a(e,t){return Yv.coerce(r,i,Pv,e,t)}var o=n.margin||{t:0,b:0,l:0,r:0},s=n.width-o.l-o.r,l=n.height-o.t-o.b,c="v"===a("orientation"),u=a("thicknessmode");a("thickness","fraction"===u?30/(c?s:l):30);var d=a("lenmode");a("len","fraction"===d?1:c?l:s),a("x",c?1.02:.5),a("xanchor",c?"left":"center"),a("xpad"),a("y",c?.5:1.02),a("yanchor",c?"middle":"bottom"),a("ypad"),Yv.noneOrAll(r,i,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");var g=Yv.coerce(r,i,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");a("ticklabeloverflow",-1!==g.indexOf("inside")?"hide past domain":"hide past div"),zv(r,i,a,"linear");var h=n.font,f={outerTicks:!1,font:h};-1!==g.indexOf("inside")&&(f.bgColor="black"),jv(r,i,a,"linear",f),Jv(r,i,a,"linear",f),Ov(r,i,a,"linear"),a("title.text",n._dfltTitle.colorbar);var p=i.tickfont,m=Yv.extendFlat({},p,{color:h.color,size:Yv.bigFont(p.size)});Yv.coerceFont(a,"title.font",m),a("title.side",c?"top":"right")},qv=Yu,$v=ws.exports,eb=yv,tb=Kv,nb=Md.isValid,ib=hg.traceIs;function rb(e,t){var n=t.slice(0,t.length-1);return t?$v.nestedProperty(e,n).get()||{}:e}var ab=function e(t,n,i,r,a){var o=a.prefix,s=a.cLetter,l="_module"in n,c=rb(t,o),u=rb(n,o),d=rb(n._template||{},o)||{},g=function(){return delete t.coloraxis,delete n.coloraxis,e(t,n,i,r,a)};if(l){var h=i._colorAxes||{},f=r(o+"coloraxis");if(f){var p=ib(n,"contour")&&$v.nestedProperty(n,"contours.coloring").get()||"heatmap",m=h[f];return void(m?(m[2].push(g),m[0]!==p&&(m[0]=!1,$v.warn(["Ignoring coloraxis:",f,"setting","as it is linked to incompatible colorscales."].join(" ")))):h[f]=[p,n,[g]])}}var v=c[s+"min"],b=c[s+"max"],y=qv(v)&&qv(b)&&v<b;r(o+s+"auto",!y)?r(o+s+"mid"):(r(o+s+"min"),r(o+s+"max"));var I,C,x=c.colorscale,B=d.colorscale;(void 0!==x&&(I=!nb(x)),void 0!==B&&(I=!nb(B)),r(o+"autocolorscale",I),r(o+"colorscale"),r(o+"reversescale"),"marker.line."!==o)&&(o&&l&&(C=eb(c)),r(o+"showscale",C)&&(o&&d&&(u._template=d),tb(c,u,i)))},ob=ws.exports,sb=Qp,lb=vv,cb=ab,ub=ws.exports,db=Nm.hasColorscale,gb=Nm.extractOpts,hb=Yu,fb=ws.exports,pb=Nm.extractOpts,mb=function(e,t,n){var i,r=e._fullLayout,a=n.vals,o=n.containerStr,s=o?fb.nestedProperty(t,o).get():t,l=pb(s),c=!1!==l.auto,u=l.min,d=l.max,g=l.mid,h=function(){return fb.aggNums(Math.min,null,a)},f=function(){return fb.aggNums(Math.max,null,a)};(void 0===u?u=h():c&&(u=s._colorAx&&hb(u)?Math.min(u,h()):h()),void 0===d?d=f():c&&(d=s._colorAx&&hb(d)?Math.max(d,f()):f()),c&&void 0!==g&&(d-g>g-u?u=g-(d-g):d-g<g-u&&(d=g+(g-u))),u===d&&(u-=.5,d+=.5),l._sync("min",u),l._sync("max",d),l.autocolorscale)&&(i=u*d<0?r.colorscale.diverging:u>=0?r.colorscale.sequential:r.colorscale.sequentialminus,l._sync("colorscale",i))},vb={moduleType:"component",name:"colorscale",attributes:gv,layoutAttributes:vv,supplyLayoutDefaults:function(e,t){function n(n,i){return ob.coerce(e,t,lb,n,i)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var i,r,a=t._colorAxes;function o(e,t){return ob.coerce(i,r,lb.coloraxis,e,t)}for(var s in a){var l=a[s];if(l[0])i=e[s]||{},(r=sb.newContainer(t,s,"coloraxis"))._name=s,cb(i,r,t,o,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete t._colorAxes[s]}}},handleDefaults:ab,crossTraceDefaults:function(e,t){function n(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function i(e,i){var r=i.container?ub.nestedProperty(e,i.container).get():e;if(r)if(r.coloraxis)r._colorAx=t[r.coloraxis];else{var a=gb(r),o=a.auto;(o||void 0===a.min)&&n(r,i.min),(o||void 0===a.max)&&n(r,i.max),a.autocolorscale&&n(r,"colorscale")}}for(var r=0;r<e.length;r++){var a=e[r],o=a._module.colorbar;if(o)if(Array.isArray(o))for(var s=0;s<o.length;s++)i(a,o[s]);else i(a,o);db(a,"marker.line")&&i(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var l in t._colorAxes)i(t[l],{min:"cmin",max:"cmax"})},calc:mb,scales:Md.scales,defaultScale:Md.defaultScale,getScale:Md.get,isValidScale:Md.isValid,hasColorscale:Nm.hasColorscale,extractOpts:Nm.extractOpts,extractScale:Nm.extractScale,flipScale:Nm.flipScale,makeColorScaleFunc:Nm.makeColorScaleFunc,makeColorScaleFuncFromTrace:Nm.makeColorScaleFuncFromTrace},bb=ws.exports,yb={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return bb.isPlainObject(e.marker)&&bb.isArrayOrTypedArray(e.marker.size)}},Ib=Yu,Cb=function(e,t){t||(t=2);var n=e.marker,i=n.sizeref||1,r=n.sizemin||0,a="area"===n.sizemode?function(e){return Math.sqrt(e/i)}:function(e){return e/i};return function(e){var n=a(e/t);return Ib(n)&&n>0?Math.max(n,r):0}},xb={};!function(e){var t=ws.exports;e.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},e.isTraceInSubplots=function(t,n){if("splom"===t.type){for(var i=t.xaxes||[],r=t.yaxes||[],a=0;a<i.length;a++)for(var o=0;o<r.length;o++)if(-1!==n.indexOf(i[a]+r[o]))return!0;return!1}return-1!==n.indexOf(e.getSubplot(t))},e.flat=function(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)n[i]=t;return n},e.p2c=function(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)n[i]=e[i].p2c(t);return n},e.getDistanceFunction=function(t,n,i,r){return"closest"===t?r||e.quadrature(n,i):"x"===t.charAt(0)?n:i},e.getClosest=function(e,t,n){if(!1!==n.index)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var i=0;i<e.length;i++){var r=t(e[i]);r<=n.distance&&(n.index=i,n.distance=r)}return n},e.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},e.quadrature=function(e,t){return function(n){var i=e(n),r=t(n);return Math.sqrt(i*i+r*r)}},e.makeEventData=function(t,n,i){var r="index"in t?t.index:t.pointNumber,a={data:n._input,fullData:n,curveNumber:n.index,pointNumber:r};if(n._indexToPoints){var o=n._indexToPoints[r];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=r;return n._module.eventData?a=n._module.eventData(a,t,n,i,r):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),e.appendArrayPointValue(a,n,r),a},e.appendArrayPointValue=function(e,n,a){var o=n._arrayAttrs;if(o)for(var s=0;s<o.length;s++){var l=o[s],c=i(l);if(void 0===e[c]){var u=r(t.nestedProperty(n,l).get(),a);void 0!==u&&(e[c]=u)}}},e.appendArrayMultiPointValues=function(e,n,a){var o=n._arrayAttrs;if(o)for(var s=0;s<o.length;s++){var l=o[s],c=i(l);if(void 0===e[c]){for(var u=t.nestedProperty(n,l).get(),d=new Array(a.length),g=0;g<a.length;g++)d[g]=r(u,a[g]);e[c]=d}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function i(e){return n[e]||e}function r(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var a={x:!0,y:!0},o={"x unified":!0,"y unified":!0};e.isUnifiedHover=function(e){return"string"==typeof e&&!!o[e]},e.isXYhover=function(e){return"string"==typeof e&&!!a[e]}}(xb);var Bb=Gs.exports,Ab={circle:{n:0,f:function(e){var t=Bb.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=Bb.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=Bb.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=Bb.round(.4*e,2),n=Bb.round(1.2*e,2);return"M"+n+","+t+"H"+t+"V"+n+"H-"+t+"V"+t+"H-"+n+"V-"+t+"H-"+t+"V-"+n+"H"+t+"V-"+t+"H"+n+"Z"}},x:{n:4,f:function(e){var t=Bb.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,i="l"+t+",-"+t,r="l-"+t+",-"+t,a="l-"+t+","+t;return"M0,"+t+n+i+r+i+r+a+r+a+n+a+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=Bb.round(2*e/Math.sqrt(3),2);return"M-"+t+","+Bb.round(e/2,2)+"H"+t+"L0,-"+Bb.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=Bb.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+Bb.round(e/2,2)+"H"+t+"L0,"+Bb.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=Bb.round(2*e/Math.sqrt(3),2);return"M"+Bb.round(e/2,2)+",-"+t+"V"+t+"L-"+Bb.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=Bb.round(2*e/Math.sqrt(3),2);return"M-"+Bb.round(e/2,2)+",-"+t+"V"+t+"L"+Bb.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=Bb.round(.6*e,2),n=Bb.round(1.2*e,2);return"M-"+n+",-"+t+"H"+t+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var t=Bb.round(.6*e,2),n=Bb.round(1.2*e,2);return"M"+t+",-"+n+"V"+t+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var t=Bb.round(.6*e,2),n=Bb.round(1.2*e,2);return"M"+n+","+t+"H-"+t+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var t=Bb.round(.6*e,2),n=Bb.round(1.2*e,2);return"M-"+t+","+n+"V-"+t+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var t=Bb.round(.951*e,2),n=Bb.round(.588*e,2),i=Bb.round(-e,2),r=Bb.round(-.309*e,2);return"M"+t+","+r+"L"+n+","+Bb.round(.809*e,2)+"H-"+n+"L-"+t+","+r+"L0,"+i+"Z"}},hexagon:{n:14,f:function(e){var t=Bb.round(e,2),n=Bb.round(e/2,2),i=Bb.round(e*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+t+"L-"+i+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=Bb.round(e,2),n=Bb.round(e/2,2),i=Bb.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+t+",0L"+n+",-"+i+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=Bb.round(.924*e,2),n=Bb.round(.383*e,2);return"M-"+n+",-"+t+"H"+n+"L"+t+",-"+n+"V"+n+"L"+n+","+t+"H-"+n+"L-"+t+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=Bb.round(.225*t,2),i=Bb.round(.951*t,2),r=Bb.round(.363*t,2),a=Bb.round(.588*t,2),o=Bb.round(-t,2),s=Bb.round(-.309*t,2),l=Bb.round(.118*t,2),c=Bb.round(.809*t,2);return"M"+n+","+s+"H"+i+"L"+r+","+l+"L"+a+","+c+"L0,"+Bb.round(.382*t,2)+"L-"+a+","+c+"L-"+r+","+l+"L-"+i+","+s+"H-"+n+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=Bb.round(.66*e,2),n=Bb.round(.38*e,2),i=Bb.round(.76*e,2);return"M-"+i+",0l-"+n+",-"+t+"h"+i+"l"+n+",-"+t+"l"+n+","+t+"h"+i+"l-"+n+","+t+"l"+n+","+t+"h-"+i+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=Bb.round(e*Math.sqrt(3)*.8,2),n=Bb.round(.8*e,2),i=Bb.round(1.6*e,2),r=Bb.round(4*e,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+t+","+n+a+t+","+n+a+"0,-"+i+a+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=Bb.round(e*Math.sqrt(3)*.8,2),n=Bb.round(.8*e,2),i=Bb.round(1.6*e,2),r=Bb.round(4*e,2),a="A "+r+","+r+" 0 0 1 ";return"M"+t+",-"+n+a+"-"+t+",-"+n+a+"0,"+i+a+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=Bb.round(1.1*e,2),n=Bb.round(2*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",-"+t+i+"-"+t+","+t+i+t+","+t+i+t+",-"+t+i+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=Bb.round(1.4*e,2),n=Bb.round(1.9*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",0"+i+"0,"+t+i+t+",0"+i+"0,-"+t+i+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=Bb.round(.7*e,2),n=Bb.round(1.4*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=Bb.round(1.4*e,2),n=Bb.round(.7*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=Bb.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=Bb.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=Bb.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=Bb.round(e,2),n=Bb.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=Bb.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=Bb.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=Bb.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=Bb.round(1.3*e,2),n=Bb.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=Bb.round(1.4*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){var t=Bb.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=Bb.round(1.2*e,2),n=Bb.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=Bb.round(e/2,2),n=Bb.round(e,2);return"M"+t+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+t+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=Bb.round(1.2*e,2),n=Bb.round(1.6*e,2),i=Bb.round(.8*e,2);return"M-"+t+","+i+"L0,0M"+t+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=Bb.round(1.2*e,2),n=Bb.round(1.6*e,2),i=Bb.round(.8*e,2);return"M-"+t+",-"+i+"L0,0M"+t+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=Bb.round(1.2*e,2),n=Bb.round(1.6*e,2),i=Bb.round(.8*e,2);return"M"+i+","+t+"L0,0M"+i+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=Bb.round(1.2*e,2),n=Bb.round(1.6*e,2),i=Bb.round(.8*e,2);return"M-"+i+","+t+"L0,0M-"+i+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){var t=Bb.round(1.4*e,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){var t=Bb.round(1.4*e,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){var t=Bb.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){var t=Bb.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e){var t=Bb.round(e,2);return"M0,0L-"+t+","+Bb.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-down":{n:46,f:function(e){var t=Bb.round(e,2);return"M0,0L-"+t+",-"+Bb.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-left":{n:47,f:function(e){var t=Bb.round(2*e,2),n=Bb.round(e,2);return"M0,0L"+t+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-right":{n:48,f:function(e){var t=Bb.round(2*e,2),n=Bb.round(e,2);return"M0,0L-"+t+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(e){var t=Bb.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+Bb.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e){var t=Bb.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+Bb.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e){var t=Bb.round(2*e,2),n=Bb.round(e,2);return"M0,-"+n+"V"+n+"M0,0L"+t+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e){var t=Bb.round(2*e,2),n=Bb.round(e,2);return"M0,-"+n+"V"+n+"M0,0L-"+t+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0}},Fb=Gs.exports,Qb=ws.exports,Ub=Qb.numberFormat,wb=Yu,Gb=Id.exports,Rb=hg,Lb=Hd.exports,Sb=vb,Vb=Qb.strTranslate,Zb=Cm,kb=xm,Eb=Bm.LINE_SPACING,Xb=$d.DESELECTDIM,Nb=yb,Wb=Cb,_b=xb.appendArrayPointValue,Tb=Am.exports={};Tb.font=function(e,t,n,i){Qb.isPlainObject(t)&&(i=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),i&&e.call(Lb.fill,i)},Tb.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},Tb.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},Tb.setRect=function(e,t,n,i,r){e.call(Tb.setPosition,t,n).call(Tb.setSize,i,r)},Tb.translatePoint=function(e,t,n,i){var r=n.c2p(e.x),a=i.c2p(e.y);return!!(wb(r)&&wb(a)&&t.node())&&("text"===t.node().nodeName?t.attr("x",r).attr("y",a):t.attr("transform",Vb(r,a)),!0)},Tb.translatePoints=function(e,t,n){e.each((function(e){var i=Fb.select(this);Tb.translatePoint(e,i,t,n)}))},Tb.hideOutsideRangePoint=function(e,t,n,i,r,a){t.attr("display",n.isPtWithinRange(e,r)&&i.isPtWithinRange(e,a)?null:"none")},Tb.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var n=t.xaxis,i=t.yaxis;e.each((function(t){var r=t[0].trace,a=r.xcalendar,o=r.ycalendar,s=Rb.traceIs(r,"bar-like")?".bartext":".point,.textpoint";e.selectAll(s).each((function(e){Tb.hideOutsideRangePoint(e,Fb.select(this),n,i,a,o)}))}))}},Tb.crispRound=function(e,t,n){return t&&wb(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},Tb.singleLineStyle=function(e,t,n,i,r){t.style("fill","none");var a=(((e||[])[0]||{}).trace||{}).line||{},o=n||a.width||0,s=r||a.dash||"";Lb.stroke(t,i||a.color),Tb.dashLine(t,s,o)},Tb.lineGroupStyle=function(e,t,n,i){e.style("fill","none").each((function(e){var r=(((e||[])[0]||{}).trace||{}).line||{},a=t||r.width||0,o=i||r.dash||"";Fb.select(this).call(Lb.stroke,n||r.color).call(Tb.dashLine,o,a)}))},Tb.dashLine=function(e,t,n){n=+n||0,t=Tb.dashStyle(t,n),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},Tb.dashStyle=function(e,t){t=+t||1;var n=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=n+"px,"+n+"px":"dash"===e?e=3*n+"px,"+3*n+"px":"longdash"===e?e=5*n+"px,"+5*n+"px":"dashdot"===e?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===e&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e},Tb.singleFillStyle=function(e){var t=(((Fb.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(Lb.fill,t)},Tb.fillGroupStyle=function(e){e.style("stroke-width",0).each((function(e){var t=Fb.select(this);e[0].trace&&t.call(Lb.fill,e[0].trace.fillcolor)}))};var Mb=Ab;Tb.symbolNames=[],Tb.symbolFuncs=[],Tb.symbolNeedLines={},Tb.symbolNoDot={},Tb.symbolNoFill={},Tb.symbolList=[],Object.keys(Mb).forEach((function(e){var t=Mb[e],n=t.n;Tb.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),Tb.symbolNames[n]=e,Tb.symbolFuncs[n]=t.f,t.needLine&&(Tb.symbolNeedLines[n]=!0),t.noDot?Tb.symbolNoDot[n]=!0:Tb.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(Tb.symbolNoFill[n]=!0)}));var Hb=Tb.symbolNames.length;function Yb(e,t){var n=e%100;return Tb.symbolFuncs[n](t)+(e>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}Tb.symbolNumber=function(e){if(wb(e))e=+e;else if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),(e=Tb.symbolNames.indexOf(e))>=0&&(e+=t)}return e%100>=Hb||e>=400?0:Math.floor(Math.max(e,0))};var Db={x1:1,x2:0,y1:0,y2:0},zb={x1:0,x2:0,y1:1,y2:0},Ob=Ub("~f"),Jb={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:Db},horizontalreversed:{node:"linearGradient",attrs:Db,reversed:!0},vertical:{node:"linearGradient",attrs:zb},verticalreversed:{node:"linearGradient",attrs:zb,reversed:!0}};Tb.gradient=function(e,t,n,i,r,a){for(var o=r.length,s=Jb[i],l=new Array(o),c=0;c<o;c++)s.reversed?l[o-1-c]=[Ob(100*(1-r[c][0])),r[c][1]]:l[c]=[Ob(100*r[c][0]),r[c][1]];var u=t._fullLayout,d="g"+u._uid+"-"+n,g=u._defs.select(".gradients").selectAll("#"+d).data([i+l.join(";")],Qb.identity);g.exit().remove(),g.enter().append(s.node).each((function(){var e=Fb.select(this);s.attrs&&e.attr(s.attrs),e.attr("id",d);var t=e.selectAll("stop").data(l);t.exit().remove(),t.enter().append("stop"),t.each((function(e){var t=Gb(e[1]);Fb.select(this).attr({offset:e[0]+"%","stop-color":Lb.tinyRGB(t),"stop-opacity":t.getAlpha()})}))})),e.style(a,iy(d,t)).style(a+"-opacity",null);var h=function(e){return"."+e.attr("class").replace(/\s/g,".")},f=h(Fb.select(e.node().parentNode))+">"+h(e);u._gradientUrlQueryParts[f]=1},Tb.pattern=function(e,t,n,i,r,a,o,s,l,c,u,d){var g="legend"===t;s&&("overlay"===l?(c=s,u=Lb.contrast(c)):(c=void 0,u=s));var h,f,p,m,v,b,y=n._fullLayout,I="p"+y._uid+"-"+i,C={};switch(r){case"/":h=a*Math.sqrt(2),f=a*Math.sqrt(2),b="path",C={d:p="M-"+h/4+","+f/4+"l"+h/2+",-"+f/2+"M0,"+f+"L"+h+",0M"+h/4*3+","+f/4*5+"l"+h/2+",-"+f/2,opacity:d,stroke:u,"stroke-width":(m=o*a)+"px"};break;case"\\":h=a*Math.sqrt(2),f=a*Math.sqrt(2),b="path",C={d:p="M"+h/4*3+",-"+f/4+"l"+h/2+","+f/2+"M0,0L"+h+","+f+"M-"+h/4+","+f/4*3+"l"+h/2+","+f/2,opacity:d,stroke:u,"stroke-width":(m=o*a)+"px"};break;case"x":h=a*Math.sqrt(2),f=a*Math.sqrt(2),p="M-"+h/4+","+f/4+"l"+h/2+",-"+f/2+"M0,"+f+"L"+h+",0M"+h/4*3+","+f/4*5+"l"+h/2+",-"+f/2+"M"+h/4*3+",-"+f/4+"l"+h/2+","+f/2+"M0,0L"+h+","+f+"M-"+h/4+","+f/4*3+"l"+h/2+","+f/2,m=a-a*Math.sqrt(1-o),b="path",C={d:p,opacity:d,stroke:u,"stroke-width":m+"px"};break;case"|":b="path",b="path",C={d:p="M"+(h=a)/2+",0L"+h/2+","+(f=a),opacity:d,stroke:u,"stroke-width":(m=o*a)+"px"};break;case"-":b="path",b="path",C={d:p="M0,"+(f=a)/2+"L"+(h=a)+","+f/2,opacity:d,stroke:u,"stroke-width":(m=o*a)+"px"};break;case"+":b="path",p="M"+(h=a)/2+",0L"+h/2+","+(f=a)+"M0,"+f/2+"L"+h+","+f/2,m=a-a*Math.sqrt(1-o),b="path",C={d:p,opacity:d,stroke:u,"stroke-width":m+"px"};break;case".":h=a,f=a,v=o<Math.PI/4?Math.sqrt(o*a*a/Math.PI):function(e,t,n,i,r){return i+(r-i)*(e-t)/(n-t)}(o,Math.PI/4,1,a/2,a/Math.sqrt(2)),b="circle",C={cx:h/2,cy:f/2,r:v,opacity:d,fill:u}}var x=[r||"noSh",c||"noBg",u||"noFg",a,o].join(";"),B=y._defs.select(".patterns").selectAll("#"+I).data([x],Qb.identity);B.exit().remove(),B.enter().append("pattern").each((function(){var e=Fb.select(this);if(e.attr({id:I,width:h+"px",height:f+"px",patternUnits:"userSpaceOnUse",patternTransform:g?"scale(0.8)":""}),c){var t=e.selectAll("rect").data([0]);t.exit().remove(),t.enter().append("rect").attr({width:h+"px",height:f+"px",fill:c})}var n=e.selectAll(b).data([0]);n.exit().remove(),n.enter().append(b).attr(C)})),e.style("fill",iy(I,n)).style("fill-opacity",null),e.classed("pattern_filled",!0);var A=function(e){return"."+e.attr("class").replace(/\s/g,".")}(Fb.select(e.node().parentNode))+">.pattern_filled";y._patternUrlQueryParts[A]=1},Tb.initGradients=function(e){var t=e._fullLayout;Qb.ensureSingle(t._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),t._gradientUrlQueryParts={}},Tb.initPatterns=function(e){var t=e._fullLayout;Qb.ensureSingle(t._defs,"g","patterns").selectAll("pattern").remove(),t._patternUrlQueryParts={}},Tb.getPatternAttr=function(e,t,n){return e&&Qb.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},Tb.pointStyle=function(e,t,n){if(e.size()){var i=Tb.makePointStyleFns(t);e.each((function(e){Tb.singlePointStyle(e,Fb.select(this),t,i,n)}))}},Tb.singlePointStyle=function(e,t,n,i,r){var a=n.marker,o=a.line;if(t.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):void 0===e.mo?a.opacity:e.mo),i.ms2mrc){var s;s="various"===e.ms||"various"===a.size?3:i.ms2mrc(e.ms),e.mrc=s,i.selectedSizeFn&&(s=e.mrc=i.selectedSizeFn(e));var l=Tb.symbolNumber(e.mx||a.symbol)||0;e.om=l%200>=100,t.attr("d",Yb(l,s))}var c,u,d,g=!1;if(e.so)d=o.outlierwidth,u=o.outliercolor,c=a.outliercolor;else{var h=(o||{}).width;d=(e.mlw+1||h+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,u="mlc"in e?e.mlcc=i.lineScale(e.mlc):Qb.isArrayOrTypedArray(o.color)?Lb.defaultLine:o.color,Qb.isArrayOrTypedArray(a.color)&&(c=Lb.defaultLine,g=!0),c="mc"in e?e.mcc=i.markerScale(e.mc):a.color||"rgba(0,0,0,0)",i.selectedColorFn&&(c=i.selectedColorFn(e))}if(e.om)t.call(Lb.stroke,c).style({"stroke-width":(d||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:d)+"px");var f=a.gradient,p=e.mgt;p?g=!0:p=f&&f.type,Qb.isArrayOrTypedArray(p)&&(p=p[0],Jb[p]||(p=0));var m=a.pattern,v=m&&Tb.getPatternAttr(m.shape,e.i,"");if(p&&"none"!==p){var b=e.mgc;b?g=!0:b=f.color;var y=n.uid;g&&(y+="-"+e.i),Tb.gradient(t,r,y,p,[[0,b],[1,c]],"fill")}else if(v){var I=Tb.getPatternAttr(m.bgcolor,e.i,null),C=Tb.getPatternAttr(m.fgcolor,e.i,null),x=m.fgopacity,B=Tb.getPatternAttr(m.size,e.i,8),A=Tb.getPatternAttr(m.solidity,e.i,.3),F=e.mcc||Qb.isArrayOrTypedArray(m.shape)||Qb.isArrayOrTypedArray(m.bgcolor)||Qb.isArrayOrTypedArray(m.size)||Qb.isArrayOrTypedArray(m.solidity),Q=n.uid;F&&(Q+="-"+e.i),Tb.pattern(t,"point",r,Q,v,B,A,e.mcc,m.fillmode,I,C,x)}else Lb.fill(t,c);d&&Lb.stroke(t,u)}},Tb.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=Tb.tryColorscale(n,""),t.lineScale=Tb.tryColorscale(n,"line"),Rb.traceIs(e,"symbols")&&(t.ms2mrc=Nb.isBubble(e)?Wb(e):function(){return(n.size||6)/2}),e.selectedpoints&&Qb.extendFlat(t,Tb.makeSelectedPointStyleFns(e)),t},Tb.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},i=e.unselected||{},r=e.marker||{},a=n.marker||{},o=i.marker||{},s=r.opacity,l=a.opacity,c=o.opacity,u=void 0!==l,d=void 0!==c;(Qb.isArrayOrTypedArray(s)||u||d)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?r.opacity:e.mo;return e.selected?u?l:t:d?c:Xb*t});var g=r.color,h=a.color,f=o.color;(h||f)&&(t.selectedColorFn=function(e){var t=e.mcc||g;return e.selected?h||t:f||t});var p=r.size,m=a.size,v=o.size,b=void 0!==m,y=void 0!==v;return Rb.traceIs(e,"symbols")&&(b||y)&&(t.selectedSizeFn=function(e){var t=e.mrc||p/2;return e.selected?b?m/2:t:y?v/2:t}),t},Tb.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},i=e.unselected||{},r=e.textfont||{},a=n.textfont||{},o=i.textfont||{},s=r.color,l=a.color,c=o.color;return t.selectedTextColorFn=function(e){var t=e.tc||s;return e.selected?l||t:c||(l?t:Lb.addOpacity(t,Xb))},t},Tb.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=Tb.makeSelectedPointStyleFns(t),i=t.marker||{},r=[];n.selectedOpacityFn&&r.push((function(e,t){e.style("opacity",n.selectedOpacityFn(t))})),n.selectedColorFn&&r.push((function(e,t){Lb.fill(e,n.selectedColorFn(t))})),n.selectedSizeFn&&r.push((function(e,t){var r=t.mx||i.symbol||0,a=n.selectedSizeFn(t);e.attr("d",Yb(Tb.symbolNumber(r),a)),t.mrc2=a})),r.length&&e.each((function(e){for(var t=Fb.select(this),n=0;n<r.length;n++)r[n](t,e)}))}},Tb.tryColorscale=function(e,t){var n=t?Qb.nestedProperty(e,t).get():e;if(n){var i=n.color;if((n.colorscale||n._colorAx)&&Qb.isArrayOrTypedArray(i))return Sb.makeColorScaleFuncFromTrace(n)}return Qb.identity};var jb={start:1,end:-1,middle:0,bottom:1,top:-1};function Pb(e,t,n,i,r){var a=Fb.select(e.node().parentNode),o=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",s=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",l=i?i/.8+1:0,c=(Zb.lineCount(e)-1)*Eb+1,u=jb[s]*l,d=.75*n+jb[o]*l+(jb[o]-1)*c*n/2;e.attr("text-anchor",s),r||a.attr("transform",Vb(u,d))}function Kb(e,t){var n=e.ts||t.textfont.size;return wb(n)&&n>0?n:0}Tb.textPointStyle=function(e,t,n){if(e.size()){var i;if(t.selectedpoints){var r=Tb.makeSelectedTextStyleFns(t);i=r.selectedTextColorFn}var a=t.texttemplate,o=n._fullLayout;e.each((function(e){var r=Fb.select(this),s=a?Qb.extractOption(e,t,"txt","texttemplate"):Qb.extractOption(e,t,"tx","text");if(s||0===s){if(a){var l=t._module.formatLabels,c=l?l(e,t,o):{},u={};_b(u,t,e.i);var d=t._meta||{};s=Qb.texttemplateString(s,c,o._d3locale,u,e,d)}var g=e.tp||t.textposition,h=Kb(e,t),f=i?i(e):e.tc||t.textfont.color;r.call(Tb.font,e.tf||t.textfont.family,h,f).text(s).call(Zb.convertToTspans,n).call(Pb,g,h,e.mrc)}else r.remove()}))}},Tb.selectedTextStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=Tb.makeSelectedTextStyleFns(t);e.each((function(e){var i=Fb.select(this),r=n.selectedTextColorFn(e),a=e.tp||t.textposition,o=Kb(e,t);Lb.fill(i,r);var s=Rb.traceIs(t,"bar-like");Pb(i,a,o,e.mrc2||e.mrc,s)}))}};function qb(e,t,n,i){var r=e[0]-t[0],a=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],l=Math.pow(r*r+a*a,.25),c=Math.pow(o*o+s*s,.25),u=(c*c*r-l*l*o)*i,d=(c*c*a-l*l*s)*i,g=3*c*(l+c),h=3*l*(l+c);return[[Fb.round(t[0]+(g&&u/g),2),Fb.round(t[1]+(g&&d/g),2)],[Fb.round(t[0]-(h&&u/h),2),Fb.round(t[1]-(h&&d/h),2)]]}Tb.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,i="M"+e[0],r=[];for(n=1;n<e.length-1;n++)r.push(qb(e[n-1],e[n],e[n+1],t));for(i+="Q"+r[0][0]+" "+e[1],n=2;n<e.length-1;n++)i+="C"+r[n-2][1]+" "+r[n-1][0]+" "+e[n];return i+="Q"+r[e.length-3][1]+" "+e[e.length-1]},Tb.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,i="M"+e[0],r=e.length-1,a=[qb(e[r],e[0],e[1],t)];for(n=1;n<r;n++)a.push(qb(e[n-1],e[n],e[n+1],t));for(a.push(qb(e[r-1],e[r],e[0],t)),n=1;n<=r;n++)i+="C"+a[n-1][1]+" "+a[n][0]+" "+e[n];return i+="C"+a[r][1]+" "+a[0][0]+" "+e[0]+"Z"};var $b={hv:function(e,t){return"H"+Fb.round(t[0],2)+"V"+Fb.round(t[1],2)},vh:function(e,t){return"V"+Fb.round(t[1],2)+"H"+Fb.round(t[0],2)},hvh:function(e,t){return"H"+Fb.round((e[0]+t[0])/2,2)+"V"+Fb.round(t[1],2)+"H"+Fb.round(t[0],2)},vhv:function(e,t){return"V"+Fb.round((e[1]+t[1])/2,2)+"H"+Fb.round(t[0],2)+"V"+Fb.round(t[1],2)}},ey=function(e,t){return"L"+Fb.round(t[0],2)+","+Fb.round(t[1],2)};Tb.steps=function(e){var t=$b[e]||ey;return function(e){for(var n="M"+Fb.round(e[0][0],2)+","+Fb.round(e[0][1],2),i=1;i<e.length;i++)n+=t(e[i-1],e[i]);return n}},Tb.makeTester=function(){var e=Qb.ensureSingleById(Fb.select("body"),"svg","js-plotly-tester",(function(e){e.attr(kb.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})})),t=Qb.ensureSingle(e,"path","js-reference-point",(function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})}));Tb.tester=e,Tb.testref=t},Tb.savedBBoxes={};var ty=0;function ny(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function iy(e,t){if(!e)return null;var n=t._context,i=n._exportedPlot?"":n._baseUrl||"";return i?"url('"+i+"#"+e+"')":"url(#"+e+")"}Tb.bBox=function(e,t,n){var i,r,a;if(n||(n=ny(e)),n){if(i=Tb.savedBBoxes[n])return Qb.extendFlat({},i)}else if(1===e.childNodes.length){var o=e.childNodes[0];if(n=ny(o)){var s=+o.getAttribute("x")||0,l=+o.getAttribute("y")||0,c=o.getAttribute("transform");if(!c){var u=Tb.bBox(o,!1,n);return s&&(u.left+=s,u.right+=s),l&&(u.top+=l,u.bottom+=l),u}if(n+="~"+s+"~"+l+"~"+c,i=Tb.savedBBoxes[n])return Qb.extendFlat({},i)}}t?r=e:(a=Tb.tester.node(),r=e.cloneNode(!0),a.appendChild(r)),Fb.select(r).attr("transform",null).call(Zb.positionText,0,0);var d=r.getBoundingClientRect(),g=Tb.testref.node().getBoundingClientRect();t||a.removeChild(r);var h={height:d.height,width:d.width,left:d.left-g.left,top:d.top-g.top,right:d.right-g.left,bottom:d.bottom-g.top};return ty>=1e4&&(Tb.savedBBoxes={},ty=0),n&&(Tb.savedBBoxes[n]=h),ty++,Qb.extendFlat({},h)},Tb.setClipUrl=function(e,t,n){e.attr("clip-path",iy(t,n))},Tb.getTranslate=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,(function(e,t,n){return[t,n].join(" ")})).split(" ");return{x:+t[0]||0,y:+t[1]||0}},Tb.setTranslate=function(e,t,n){var i=e.attr?"attr":"getAttribute",r=e.attr?"attr":"setAttribute",a=e[i]("transform")||"";return t=t||0,n=n||0,a=a.replace(/(\btranslate\(.*?\);?)/,"").trim(),a=(a+=Vb(t,n)).trim(),e[r]("transform",a),a},Tb.getScale=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,(function(e,t,n){return[t,n].join(" ")})).split(" ");return{x:+t[0]||1,y:+t[1]||1}},Tb.setScale=function(e,t,n){var i=e.attr?"attr":"getAttribute",r=e.attr?"attr":"setAttribute",a=e[i]("transform")||"";return t=t||1,n=n||1,a=a.replace(/(\bscale\(.*?\);?)/,"").trim(),a=(a+="scale("+t+","+n+")").trim(),e[r]("transform",a),a};var ry=/\s*sc.*/;Tb.setPointGroupScale=function(e,t,n){if(t=t||1,n=n||1,e){var i=1===t&&1===n?"":"scale("+t+","+n+")";e.each((function(){var e=(this.getAttribute("transform")||"").replace(ry,"");e=(e+=i).trim(),this.setAttribute("transform",e)}))}};var ay=/translate\([^)]*\)\s*$/;Tb.setTextPointsScale=function(e,t,n){e&&e.each((function(){var e,i=Fb.select(this),r=i.select("text");if(r.node()){var a=parseFloat(r.attr("x")||0),o=parseFloat(r.attr("y")||0),s=(i.attr("transform")||"").match(ay);e=1===t&&1===n?[]:[Vb(a,o),"scale("+t+","+n+")",Vb(-a,-o)],s&&e.push(s),i.attr("transform",e.join(""))}}))};var oy=Gs.exports,sy=Yu,ly=Fp.exports,cy=hg,uy=ws.exports,dy=uy.strTranslate,gy=Am.exports,hy=Hd.exports,fy=Cm,py=$d,my=Bm.OPPOSITE_SIDE,vy=/ [XY][0-9]* /;var by={draw:function(e,t,n){var i,r=n.propContainer,a=n.propName,o=n.placeholder,s=n.traceIndex,l=n.avoid||{},c=n.attributes,u=n.transform,d=n.containerGroup,g=e._fullLayout,h=1,f=!1,p=r.title,m=(p&&p.text?p.text:"").trim(),v=p&&p.font?p.font:{},b=v.family,y=v.size,I=v.color;"title.text"===a?i="titleText":-1!==a.indexOf("axis")?i="axisTitleText":a.indexOf(!0)&&(i="colorbarTitleText");var C=e._context.edits[i];""===m?h=0:m.replace(vy," % ")===o.replace(vy," % ")&&(h=.2,f=!0,C||(m="")),n._meta?m=uy.templateString(m,n._meta):g._meta&&(m=uy.templateString(m,g._meta));var x,B=m||C;d||(d=uy.ensureSingle(g._infolayer,"g","g-"+t),x=g._hColorbarMoveTitle);var A=d.selectAll("text").data(B?[0]:[]);if(A.enter().append("text"),A.text(m).attr("class",t),A.exit().remove(),!B)return d;function F(e){uy.syncOrAsync([Q,U],e)}function Q(t){var n;return!u&&x&&(u={}),u?(n="",u.rotate&&(n+="rotate("+[u.rotate,c.x,c.y]+")"),(u.offset||x)&&(n+=dy(0,(u.offset||0)-(x||0)))):n=null,t.attr("transform",n),t.style({"font-family":b,"font-size":oy.round(y,2)+"px",fill:hy.rgb(I),opacity:h*hy.opacity(I),"font-weight":ly.fontWeight}).attr(c).call(fy.convertToTspans,e),ly.previousPromises(e)}function U(e){var t=oy.select(e.node().parentNode);if(l&&l.selection&&l.side&&m){t.attr("transform",null);var n=my[l.side],i="left"===l.side||"top"===l.side?-1:1,r=sy(l.pad)?l.pad:2,a=gy.bBox(t.node()),o={left:0,top:0,right:g.width,bottom:g.height},s=l.maxShift||i*(o[l.side]-a[l.side]),c=0;if(s<0)c=s;else{var u=l.offsetLeft||0,d=l.offsetTop||0;a.left-=u,a.right-=u,a.top-=d,a.bottom-=d,l.selection.each((function(){var e=gy.bBox(this);uy.bBoxIntersect(a,e,r)&&(c=Math.max(c,i*(e[l.side]-a[n])+r))})),c=Math.min(s,c)}if(c>0||s<0){var h={left:[-c,0],right:[c,0],top:[0,-c],bottom:[0,c]}[l.side];t.attr("transform",dy(h[0],h[1]))}}}return A.call(F),C&&(m?A.on(".opacity",null):(h=0,f=!0,A.text(o).on("mouseover.opacity",(function(){oy.select(this).transition().duration(py.SHOW_PLACEHOLDER).style("opacity",1)})).on("mouseout.opacity",(function(){oy.select(this).transition().duration(py.HIDE_PLACEHOLDER).style("opacity",0)}))),A.call(fy.makeEditable,{gd:e}).on("edit",(function(t){void 0!==s?cy.call("_guiRestyle",e,a,t,s):cy.call("_guiRelayout",e,a,t)})).on("cancel",(function(){this.text(this.attr("data-unformatted")).call(F)})).on("input",(function(e){this.text(e||" ").call(fy.positionText,c.x,c.y)}))),A.classed("js-placeholder",f),d}},yy=Gs.exports,Iy=Au.utcFormat,Cy=ws.exports,xy=Cy.numberFormat,By=Yu,Ay=Cy.cleanNumber,Fy=Cy.ms2DateTime,Qy=Cy.dateTime2ms,Uy=Cy.ensureNumber,wy=Cy.isArrayOrTypedArray,Gy=Du.FP_SAFE,Ry=Du.BADNUM,Ly=Du.LOG_CLIP,Sy=Du.ONEWEEK,Vy=Du.ONEDAY,Zy=Du.ONEHOUR,ky=Du.ONEMIN,Ey=Du.ONESEC,Xy=Sp,Ny=Zp,Wy=Ny.HOUR_PATTERN,_y=Ny.WEEKDAY_PATTERN;function Ty(e){return Math.pow(10,e)}function My(e){return null!=e}var Hy=function(e,t){t=t||{};var n=e._id||"x",i=n.charAt(0);function r(t,n){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&n&&e.range&&2===e.range.length){var i=e.range[0],r=e.range[1];return.5*(i+r-2*Ly*Math.abs(i-r))}return Ry}function a(t,n,i,r){if((r||{}).msUTC&&By(t))return+t;var a=Qy(t,i||e.calendar);if(a===Ry){if(!By(t))return Ry;t=+t;var o=Math.floor(10*Cy.mod(t+.05,1)),s=Math.round(t-o/10);a=Qy(new Date(s))+o/10}return a}function o(t,n,i){return Fy(t,n,i||e.calendar)}function s(t){return e._categories[Math.round(t)]}function l(t){if(My(t)){if(void 0===e._categoriesMap&&(e._categoriesMap={}),void 0!==e._categoriesMap[t])return e._categoriesMap[t];e._categories.push("number"==typeof t?String(t):t);var n=e._categories.length-1;return e._categoriesMap[t]=n,n}return Ry}function c(t){if(e._categoriesMap)return e._categoriesMap[t]}function u(e){var t=c(e);return void 0!==t?t:By(e)?+e:void 0}function d(e){return By(e)?+e:c(e)}function g(e,t,n){return yy.round(n+t*e,2)}function h(e,t,n){return(e-n)/t}var f=function(t){return By(t)?g(t,e._m,e._b):Ry},p=function(t){return h(t,e._m,e._b)};if(e.rangebreaks){var m="y"===i;f=function(t){if(!By(t))return Ry;var n=e._rangebreaks.length;if(!n)return g(t,e._m,e._b);var i=m;e.range[0]>e.range[1]&&(i=!i);for(var r=i?-1:1,a=r*t,o=0,s=0;s<n;s++){var l=r*e._rangebreaks[s].min,c=r*e._rangebreaks[s].max;if(a<l)break;if(!(a>c)){o=a<(l+c)/2?s:s+1;break}o=s+1}var u=e._B[o]||0;return isFinite(u)?g(t,e._m2,u):0},p=function(t){var n=e._rangebreaks.length;if(!n)return h(t,e._m,e._b);for(var i=0,r=0;r<n&&!(t<e._rangebreaks[r].pmin);r++)t>e._rangebreaks[r].pmax&&(i=r+1);return h(t,e._m2,e._B[i])}}e.c2l="log"===e.type?r:Uy,e.l2c="log"===e.type?Ty:Uy,e.l2p=f,e.p2l=p,e.c2p="log"===e.type?function(e,t){return f(r(e,t))}:f,e.p2c="log"===e.type?function(e){return Ty(p(e))}:p,-1!==["linear","-"].indexOf(e.type)?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=Ay,e.c2d=e.c2r=e.l2d=e.l2r=Uy,e.d2p=e.r2p=function(t){return e.l2p(Ay(t))},e.p2d=e.p2r=p,e.cleanPos=Uy):"log"===e.type?(e.d2r=e.d2l=function(e,t){return r(Ay(e),t)},e.r2d=e.r2c=function(e){return Ty(Ay(e))},e.d2c=e.r2l=Ay,e.c2d=e.l2r=Uy,e.c2r=r,e.l2d=Ty,e.d2p=function(t,n){return e.l2p(e.d2r(t,n))},e.p2d=function(e){return Ty(p(e))},e.r2p=function(t){return e.l2p(Ay(t))},e.p2r=p,e.cleanPos=Uy):"date"===e.type?(e.d2r=e.r2d=Cy.identity,e.d2c=e.r2c=e.d2l=e.r2l=a,e.c2d=e.c2r=e.l2d=e.l2r=o,e.d2p=e.r2p=function(t,n,i){return e.l2p(a(t,0,i))},e.p2d=e.p2r=function(e,t,n){return o(p(e),t,n)},e.cleanPos=function(t){return Cy.cleanDate(t,Ry,e.calendar)}):"category"===e.type?(e.d2c=e.d2l=l,e.r2d=e.c2d=e.l2d=s,e.d2r=e.d2l_noadd=u,e.r2c=function(t){var n=d(t);return void 0!==n?n:e.fraction2r(.5)},e.l2r=e.c2r=Uy,e.r2l=d,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return s(p(e))},e.r2p=e.d2p,e.p2r=p,e.cleanPos=function(e){return"string"==typeof e&&""!==e?e:Uy(e)}):"multicategory"===e.type&&(e.r2d=e.c2d=e.l2d=s,e.d2r=e.d2l_noadd=u,e.r2c=function(t){var n=u(t);return void 0!==n?n:e.fraction2r(.5)},e.r2c_just_indices=c,e.l2r=e.c2r=Uy,e.r2l=u,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return s(p(e))},e.r2p=e.d2p,e.p2r=p,e.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:Uy(e)},e.setupMultiCategory=function(r){var a,o,s=e._traceIndices,c=e._matchGroup;if(c&&0===e._categories.length)for(var u in c)if(u!==n){var d=t[Xy.id2name(u)];s=s.concat(d._traceIndices)}var g=[[0,{}],[0,{}]],h=[];for(a=0;a<s.length;a++){var f=r[s[a]];if(i in f){var p=f[i],m=f._length||Cy.minRowLength(p);if(wy(p[0])&&wy(p[1]))for(o=0;o<m;o++){var v=p[0][o],b=p[1][o];My(v)&&My(b)&&(h.push([v,b]),v in g[0][1]||(g[0][1][v]=g[0][0]++),b in g[1][1]||(g[1][1][b]=g[1][0]++))}}}for(h.sort((function(e,t){var n=g[0][1],i=n[e[0]]-n[t[0]];if(i)return i;var r=g[1][1];return r[e[1]]-r[t[1]]})),a=0;a<h.length;a++)l(h[a])}),e.fraction2r=function(t){var n=e.r2l(e.range[0]),i=e.r2l(e.range[1]);return e.l2r(n+t*(i-n))},e.r2fraction=function(t){var n=e.r2l(e.range[0]),i=e.r2l(e.range[1]);return(e.r2l(t)-n)/(i-n)},e.cleanRange=function(t,n){n||(n={}),t||(t="range");var r,a,o=Cy.nestedProperty(e,t).get();if(a=(a="date"===e.type?Cy.dfltRange(e.calendar):"y"===i?Ny.DFLTRANGEY:"realaxis"===e._name?[0,1]:n.dfltRange||Ny.DFLTRANGEX).slice(),"tozero"!==e.rangemode&&"nonnegative"!==e.rangemode||(a[0]=0),o&&2===o.length)for("date"!==e.type||e.autorange||(o[0]=Cy.cleanDate(o[0],Ry,e.calendar),o[1]=Cy.cleanDate(o[1],Ry,e.calendar)),r=0;r<2;r++)if("date"===e.type){if(!Cy.isDateTime(o[r],e.calendar)){e[t]=a;break}if(e.r2l(o[0])===e.r2l(o[1])){var s=Cy.constrain(e.r2l(o[0]),Cy.MIN_MS+1e3,Cy.MAX_MS-1e3);o[0]=e.l2r(s-1e3),o[1]=e.l2r(s+1e3);break}}else{if(!By(o[r])){if(!By(o[1-r])){e[t]=a;break}o[r]=o[1-r]*(r?10:.1)}if(o[r]<-Gy?o[r]=-Gy:o[r]>Gy&&(o[r]=Gy),o[0]===o[1]){var l=Math.max(1,Math.abs(1e-6*o[0]));o[0]-=l,o[1]+=l}}else Cy.nestedProperty(e,t).set(a)},e.setScale=function(n){var r=t._size;if(e.overlaying){var a=Xy.getFromId({_fullLayout:t},e.overlaying);e.domain=a.domain}var o=n&&e._r?"_r":"range",s=e.calendar;e.cleanRange(o);var l,c,u=e.r2l(e[o][0],s),d=e.r2l(e[o][1],s),g="y"===i;if((g?(e._offset=r.t+(1-e.domain[1])*r.h,e._length=r.h*(e.domain[1]-e.domain[0]),e._m=e._length/(u-d),e._b=-e._m*d):(e._offset=r.l+e.domain[0]*r.w,e._length=r.w*(e.domain[1]-e.domain[0]),e._m=e._length/(d-u),e._b=-e._m*u),e._rangebreaks=[],e._lBreaks=0,e._m2=0,e._B=[],e.rangebreaks)&&(e._rangebreaks=e.locateBreaks(Math.min(u,d),Math.max(u,d)),e._rangebreaks.length)){for(l=0;l<e._rangebreaks.length;l++)c=e._rangebreaks[l],e._lBreaks+=Math.abs(c.max-c.min);var h=g;u>d&&(h=!h),h&&e._rangebreaks.reverse();var p=h?-1:1;for(e._m2=p*e._length/(Math.abs(d-u)-e._lBreaks),e._B.push(-e._m2*(g?d:u)),l=0;l<e._rangebreaks.length;l++)c=e._rangebreaks[l],e._B.push(e._B[e._B.length-1]-p*e._m2*(c.max-c.min));for(l=0;l<e._rangebreaks.length;l++)(c=e._rangebreaks[l]).pmin=f(c.min),c.pmax=f(c.max)}if(!isFinite(e._m)||!isFinite(e._b)||e._length<0)throw t._replotting=!1,new Error("Something went wrong with axis scaling")},e.maskBreaks=function(t){var n,i,r,a,o,s=e.rangebreaks||[];s._cachedPatterns||(s._cachedPatterns=s.map((function(t){return t.enabled&&t.bounds?Cy.simpleMap(t.bounds,t.pattern?Ay:e.d2c):null}))),s._cachedValues||(s._cachedValues=s.map((function(t){return t.enabled&&t.values?Cy.simpleMap(t.values,e.d2c).sort(Cy.sorterAsc):null})));for(var l=0;l<s.length;l++){var c=s[l];if(c.enabled)if(c.bounds){var u=c.pattern;switch(i=(n=s._cachedPatterns[l])[0],r=n[1],u){case _y:a=(o=new Date(t)).getUTCDay(),i>r&&(r+=7,a<i&&(a+=7));break;case Wy:a=(o=new Date(t)).getUTCHours()+(o.getUTCMinutes()/60+o.getUTCSeconds()/3600+o.getUTCMilliseconds()/36e5),i>r&&(r+=24,a<i&&(a+=24));break;case"":a=t}if(a>=i&&a<r)return Ry}else for(var d=s._cachedValues[l],g=0;g<d.length;g++)if(r=(i=d[g])+c.dvalue,t>=i&&t<r)return Ry}return t},e.locateBreaks=function(t,n){var i,r,a,o,s=[];if(!e.rangebreaks)return s;var l=e.rangebreaks.slice().sort((function(e,t){return e.pattern===_y&&t.pattern===Wy?-1:t.pattern===_y&&e.pattern===Wy?1:0})),c=function(e,i){if((e=Cy.constrain(e,t,n))!==(i=Cy.constrain(i,t,n))){for(var r=!0,a=0;a<s.length;a++){var o=s[a];e<o.max&&i>=o.min&&(e<o.min&&(o.min=e),i>o.max&&(o.max=i),r=!1)}r&&s.push({min:e,max:i})}};for(i=0;i<l.length;i++){var u=l[i];if(u.enabled)if(u.bounds){var d=t,g=n;u.pattern&&(d=Math.floor(d)),a=(r=Cy.simpleMap(u.bounds,u.pattern?Ay:e.r2l))[0],o=r[1];var h,f,p=new Date(d);switch(u.pattern){case _y:f=Sy,h=(o-a+(o<a?7:0))*Vy,d+=a*Vy-(p.getUTCDay()*Vy+p.getUTCHours()*Zy+p.getUTCMinutes()*ky+p.getUTCSeconds()*Ey+p.getUTCMilliseconds());break;case Wy:f=Vy,h=(o-a+(o<a?24:0))*Zy,d+=a*Zy-(p.getUTCHours()*Zy+p.getUTCMinutes()*ky+p.getUTCSeconds()*Ey+p.getUTCMilliseconds());break;default:d=Math.min(r[0],r[1]),h=f=(g=Math.max(r[0],r[1]))-d}for(var m=d;m<g;m+=f)c(m,m+h)}else for(var v=Cy.simpleMap(u.values,e.d2c),b=0;b<v.length;b++)c(a=v[b],o=a+u.dvalue)}return s.sort((function(e,t){return e.min-t.min})),s},e.makeCalcdata=function(t,n,i){var r,a,o,s,l=e.type,u="date"===l&&t[n+"calendar"];if(n in t){if(r=t[n],s=t._length||Cy.minRowLength(r),Cy.isTypedArray(r)&&("linear"===l||"log"===l)){if(s===r.length)return r;if(r.subarray)return r.subarray(0,s)}if("multicategory"===l)return function(e,t){for(var n=new Array(t),i=0;i<t;i++){var r=(e[0]||[])[i],a=(e[1]||[])[i];n[i]=c([r,a])}return n}(r,s);for(a=new Array(s),o=0;o<s;o++)a[o]=e.d2c(r[o],0,u,i)}else{var d=n+"0"in t?e.d2c(t[n+"0"],0,u):0,g=t["d"+n]?Number(t["d"+n]):1;for(r=t[{x:"y",y:"x"}[n]],s=t._length||r.length,a=new Array(s),o=0;o<s;o++)a[o]=d+o*g}if(e.rangebreaks)for(o=0;o<s;o++)a[o]=e.maskBreaks(a[o]);return a},e.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&By(e.r2l(t[0]))&&By(e.r2l(t[1]))},e.isPtWithinRange=function(t,n){var r=e.c2l(t[i],null,n),a=e.r2l(e.range[0]),o=e.r2l(e.range[1]);return a<o?a<=r&&r<=o:o<=r&&r<=a},e._emptyCategories=function(){e._categories=[],e._categoriesMap={}},e.clearCalc=function(){var n=e._matchGroup;if(n){var i=null,r=null;for(var a in n){var o=t[Xy.id2name(a)];if(o._categories){i=o._categories,r=o._categoriesMap;break}}i&&r?(e._categories=i,e._categoriesMap=r):e._emptyCategories()}else e._emptyCategories();if(e._initialCategories)for(var s=0;s<e._initialCategories.length;s++)l(e._initialCategories[s])},e.sortByInitialCategories=function(){var i=[];if(e._emptyCategories(),e._initialCategories)for(var r=0;r<e._initialCategories.length;r++)l(e._initialCategories[r]);i=i.concat(e._traceIndices);var a=e._matchGroup;for(var o in a)if(n!==o){var s=t[Xy.id2name(o)];s._categories=e._categories,s._categoriesMap=e._categoriesMap,i=i.concat(s._traceIndices)}return i};var v=t._d3locale;"date"===e.type&&(e._dateFormat=v?v.timeFormat:Iy,e._extraFormat=t._extraFormat),e._separators=t.separators,e._numFormat=v?v.numberFormat:xy,delete e._minDtick,delete e._forceTick0},Yy=Yu,Dy=ws.exports,zy=Du.BADNUM,Oy=Dy.isArrayOrTypedArray,Jy=Dy.isDateTime,jy=Dy.cleanNumber,Py=Math.round,Ky=function(e,t,n){var r=e,a=n.noMultiCategory;if(Oy(r)&&!r.length)return"-";if(!a&&function(e){return Oy(e[0])&&Oy(e[1])}(r))return"multicategory";if(a&&Array.isArray(r[0])){for(var o=[],s=0;s<r.length;s++)if(Oy(r[s]))for(var l=0;l<r[s].length;l++)o.push(r[s][l]);r=o}if(function(e,t){for(var n=e.length,i=$y(n),r=0,a=0,o={},s=0;s<n;s+=i){var l=e[Py(s)],c=String(l);o[c]||(o[c]=1,Jy(l,t)&&r++,Yy(l)&&a++)}return r>2*a}(r,t))return"date";var c="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=$y(n),a=0,o=0,s={},l=0;l<n;l+=r){var c=e[Py(l)],u=String(c);if(!s[u]){s[u]=1;var d=i(c);"boolean"===d?o++:(t?jy(c)!==zy:"number"===d)?a++:"string"===d&&o++}}return o>2*a}(r,c)?"category":function(e,t){for(var n=e.length,i=0;i<n;i++)if(qy(e[i],t))return!0;return!1}(r,c)?"linear":"-"};function qy(e,t){return t?Yy(e):"number"==typeof e}function $y(e){return Math.max(1,(e-1)/1e3)}var eI=Gs.exports,tI=Yu,nI=ws.exports,iI=Du.FP_SAFE,rI=hg,aI=Am.exports,oI=Sp.getFromId,sI=Sp.isLinked,lI={getAutoRange:cI,makePadFn:dI,doAutoRange:function(e,t,n){if(t.setScale(),t.autorange){t.range=n?n.slice():cI(e,t),t._r=t.range.slice(),t._rl=nI.simpleMap(t._r,t.r2l);var i=t._input,r={};r[t._attr+".range"]=t.range,r[t._attr+".autorange"]=t.autorange,rI.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,r),i.range=t.range.slice(),i.autorange=t.autorange}var a=t._anchorAxis;if(a&&a.rangeslider){var o=a.rangeslider[t._name];o&&"auto"===o.rangemode&&(o.range=cI(e,t)),a._input.rangeslider[t._name]=nI.extendFlat({},o)}},findExtremes:function(e,t,n){n||(n={});e._m||e.setScale();var i,r,a,o,s,l,c,u,d,g=[],h=[],f=t.length,p=n.padded||!1,m=n.tozero&&("linear"===e.type||"-"===e.type),v="log"===e.type,b=!1,y=n.vpadLinearized||!1;function I(e){if(Array.isArray(e))return b=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}var C=I((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),x=I((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),B=I(n.vpadplus||n.vpad),A=I(n.vpadminus||n.vpad);if(!b){if(u=1/0,d=-1/0,v)for(i=0;i<f;i++)(r=t[i])<u&&r>0&&(u=r),r>d&&r<iI&&(d=r);else for(i=0;i<f;i++)(r=t[i])<u&&r>-iI&&(u=r),r>d&&r<iI&&(d=r);t=[u,d],f=2}var F={tozero:m,extrapad:p};function Q(n){a=t[n],tI(a)&&(l=C(n),c=x(n),y?(o=e.c2l(a)-A(n),s=e.c2l(a)+B(n)):(u=a-A(n),d=a+B(n),v&&u<d/10&&(u=d/10),o=e.c2l(u),s=e.c2l(d)),m&&(o=Math.min(0,o),s=Math.max(0,s)),mI(o)&&hI(g,o,c,F),mI(s)&&fI(h,s,l,F))}var U=Math.min(6,f);for(i=0;i<U;i++)Q(i);for(i=f-1;i>=U;i--)Q(i);return{min:g,max:h,opts:n}},concatExtremes:gI};function cI(e,t){var n,i,r=[],a=e._fullLayout,o=dI(a,t,0),s=dI(a,t,1),l=gI(e,t),c=l.min,u=l.max;if(0===c.length||0===u.length)return nI.simpleMap(t.range,t.r2l);var d=c[0].val,g=u[0].val;for(n=1;n<c.length&&d===g;n++)d=Math.min(d,c[n].val);for(n=1;n<u.length&&d===g;n++)g=Math.max(g,u[n].val);var h=!1;if(t.range){var f=nI.simpleMap(t.range,t.r2l);h=f[1]<f[0]}"reversed"===t.autorange&&(h=!0,t.autorange=!0);var p,m,v,b,y,I,C=t.rangemode,x="tozero"===C,B="nonnegative"===C,A=t._length,F=A/10,Q=0;for(n=0;n<c.length;n++)for(p=c[n],i=0;i<u.length;i++)(I=(m=u[i]).val-p.val-uI(t,p.val,m.val))>0&&((y=A-o(p)-s(m))>F?I/y>Q&&(v=p,b=m,Q=I/y):I/A>Q&&(v={val:p.val,nopad:1},b={val:m.val,nopad:1},Q=I/A));if(d===g){var U=d-1,w=d+1;if(x)if(0===d)r=[0,1];else{var G=(d>0?u:c).reduce((function(e,t){return Math.max(e,s(t))}),0),R=d/(1-Math.min(.5,G/A));r=d>0?[0,R]:[R,0]}else r=B?[Math.max(0,U),Math.max(1,w)]:[U,w]}else x?(v.val>=0&&(v={val:0,nopad:1}),b.val<=0&&(b={val:0,nopad:1})):B&&(v.val-Q*o(v)<0&&(v={val:0,nopad:1}),b.val<=0&&(b={val:1,nopad:1})),Q=(b.val-v.val-uI(t,p.val,m.val))/(A-o(v)-s(b)),r=[v.val-Q*o(v),b.val+Q*s(b)];return h&&r.reverse(),nI.simpleMap(r,t.l2r||Number)}function uI(e,t,n){var i=0;if(e.rangebreaks)for(var r=e.locateBreaks(t,n),a=0;a<r.length;a++){var o=r[a];i+=o.max-o.min}return i}function dI(e,t,n){var i=.05*t._length,r=t._anchorAxis||{};if(-1!==(t.ticklabelposition||"").indexOf("inside")||-1!==(r.ticklabelposition||"").indexOf("inside")){var a="reversed"===t.autorange;if(!a){var o=nI.simpleMap(t.range,t.r2l);a=o[1]<o[0]}a&&(n=!n)}var s=0;return sI(e,t._id)||(s=function(e,t,n){var i=0,r="x"===t._id.charAt(0);for(var a in e._plots){var o=e._plots[a];if(t._id===o.xaxis._id||t._id===o.yaxis._id){var s=(r?o.yaxis:o.xaxis)||{};if(-1!==(s.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===s.side||"bottom"===s.side)||n&&("top"===s.side||"right"===s.side))){if(s._vals){var l=nI.deg2rad(s._tickAngles[s._id+"tick"]||0),c=Math.abs(Math.cos(l)),u=Math.abs(Math.sin(l));if(!s._vals[0].bb){var d=s._id+"tick";s._selections[d].each((function(e){var t=eI.select(this);t.select(".text-math-group").empty()&&(e.bb=aI.bBox(t.node()))}))}for(var g=0;g<s._vals.length;g++){var h=s._vals[g].bb;if(h){var f=6+h.width,p=6+h.height;i=Math.max(i,r?Math.max(f*c,p*u):Math.max(p*c,f*u))}}}"inside"===s.ticks&&"inside"===s.ticklabelposition&&(i+=s.ticklen||0)}}}return i}(e,t,n)),i=Math.max(s,i),"domain"===t.constrain&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?i:s)}}function gI(e,t,n){var i,r,a,o=t._id,s=e._fullData,l=e._fullLayout,c=[],u=[];function d(e,t){for(i=0;i<t.length;i++){var n=e[t[i]],s=(n._extremes||{})[o];if(!0===n.visible&&s){for(r=0;r<s.min.length;r++)a=s.min[r],hI(c,a.val,a.pad,{extrapad:a.extrapad});for(r=0;r<s.max.length;r++)a=s.max[r],fI(u,a.val,a.pad,{extrapad:a.extrapad})}}}if(d(s,t._traceIndices),d(l.annotations||[],t._annIndices||[]),d(l.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var g in t._matchGroup)if(g!==t._id){var h=oI(e,g),f=gI(e,h,!0),p=t._length/h._length;for(r=0;r<f.min.length;r++)a=f.min[r],hI(c,a.val,a.pad*p,{extrapad:a.extrapad});for(r=0;r<f.max.length;r++)a=f.max[r],fI(u,a.val,a.pad*p,{extrapad:a.extrapad})}return{min:c,max:u}}function hI(e,t,n,i){pI(e,t,n,i,vI)}function fI(e,t,n,i){pI(e,t,n,i,bI)}function pI(e,t,n,i,r){for(var a=i.tozero,o=i.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(r(c.val,t)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}r(t,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(e.splice(l,1),l--)}if(s){var u=a&&0===t;e.push({val:t,pad:u?0:n,extrapad:!u&&o})}}function mI(e){return tI(e)&&Math.abs(e)<iI}function vI(e,t){return e<=t}function bI(e,t){return e>=t}var yI=Gs.exports,II=Yu,CI=Fp.exports,xI=hg,BI=ws.exports,AI=BI.strTranslate,FI=Cm,QI=by,UI=Hd.exports,wI=Am.exports,GI=nv,RI=Iv,LI=Du.ONEMAXYEAR,SI=Du.ONEAVGYEAR,VI=Du.ONEMINYEAR,ZI=Du.ONEMAXQUARTER,kI=Du.ONEAVGQUARTER,EI=Du.ONEMINQUARTER,XI=Du.ONEMAXMONTH,NI=Du.ONEAVGMONTH,WI=Du.ONEMINMONTH,_I=Du.ONEWEEK,TI=Du.ONEDAY,MI=TI/2,HI=Du.ONEHOUR,YI=Du.ONEMIN,DI=Du.ONESEC,zI=Du.MINUS_SIGN,OI=Du.BADNUM,JI={K:"zeroline"},jI={K:"gridline",L:"path"},PI={K:"tick",L:"path"},KI={K:"tick",L:"text"},qI=Bm.MID_SHIFT,$I=Bm.CAP_SHIFT,eC=Bm.LINE_SPACING,tC=Bm.OPPOSITE_SIDE,nC=Im.exports={};nC.setConvert=Hy;var iC=Ky,rC=Sp,aC=rC.idSort,oC=rC.isLinked;nC.id2name=rC.id2name,nC.name2id=rC.name2id,nC.cleanId=rC.cleanId,nC.list=rC.list,nC.listIds=rC.listIds,nC.getFromId=rC.getFromId,nC.getFromTrace=rC.getFromTrace;var sC=lI;nC.getAutoRange=sC.getAutoRange,nC.findExtremes=sC.findExtremes;function lC(e){var t=1e-4*(e[1]-e[0]);return[e[0]-t,e[1]+t]}nC.coerceRef=function(e,t,n,i,r,a){var o=i.charAt(i.length-1),s=n._fullLayout._subplots[o+"axis"],l=i+"ref",c={};return r||(r=s[0]||("string"==typeof a?a:a[0])),a||(a=r),s=s.concat(s.map((function(e){return e+" domain"}))),c[l]={valType:"enumerated",values:s.concat(a?"string"==typeof a?[a]:a:[]),dflt:r},BI.coerce(e,t,c,l)},nC.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},nC.coercePosition=function(e,t,n,i,r,a){var o,s;if("range"!==nC.getRefType(i))o=BI.ensureNumber,s=n(r,a);else{var l=nC.getFromId(t,i);s=n(r,a=l.fraction2r(a)),o=l.cleanPos}e[r]=o(s)},nC.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?BI.ensureNumber:nC.getFromId(t,n).cleanPos)(e)},nC.redrawComponents=function(e,t){t=t||nC.listIds(e);var n=e._fullLayout;function i(i,r,a,o){for(var s=xI.getComponentMethod(i,r),l={},c=0;c<t.length;c++)for(var u=n[nC.id2name(t[c])][a],d=0;d<u.length;d++){var g=u[d];if(!l[g]&&(s(e,g),l[g]=1,o))return}}i("annotations","drawOne","_annIndices"),i("shapes","drawOne","_shapeIndices"),i("images","draw","_imgIndices",!0)};var cC=nC.getDataConversions=function(e,t,n,i){var r,a="x"===n||"y"===n||"z"===n?n:i;if(Array.isArray(a)){if(r={type:iC(i,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},nC.setConvert(r),"category"===r.type)for(var o=0;o<i.length;o++)r.d2c(i[o])}else r=nC.getFromTrace(e,t,a);return r?{d2c:r.d2c,c2d:r.c2d}:"ids"===a?{d2c:dC,c2d:dC}:{d2c:uC,c2d:uC}};function uC(e){return+e}function dC(e){return String(e)}function gC(e){return+e.substring(1)}nC.getDataToCoordFunc=function(e,t,n,i){return cC(e,t,n,i).d2c},nC.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},nC.minDtick=function(e,t,n,i){-1===["log","category","multicategory"].indexOf(e.type)&&i?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},nC.saveRangeInitial=function(e,t){for(var n=nC.list(e,"",!0),i=!1,r=0;r<n.length;r++){var a=n[r],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||t&&s)&&(a._rangeInitial=a.range.slice(),i=!0)}return i},nC.saveShowSpikeInitial=function(e,t){for(var n=nC.list(e,"",!0),i=!1,r="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,i=!0),"on"!==r||o.showspikes||(r="off")}return e._fullLayout._cartesianSpikesEnabled=r,i},nC.autoBin=function(e,t,n,i,r,a){var o,s=BI.aggNums(Math.min,null,e),l=BI.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:l-s};if(r||(r=t.calendar),o="log"===t.type?{type:"linear",range:[s,l]}:{type:t.type,range:BI.simpleMap([s,l],t.c2r,0,r),calendar:r},nC.setConvert(o),a=a&&RI.dtick(a,o.type))o.dtick=a,o.tick0=RI.tick0(void 0,o.type,r);else{var c;if(n)c=(l-s)/n;else{var u=BI.distinctVals(e),d=Math.pow(10,Math.floor(Math.log(u.minDiff)/Math.LN10)),g=d*BI.roundUp(u.minDiff/d,[.9,1.9,4.9,9.9],!0);c=Math.max(g,2*BI.stdev(e)/Math.pow(e.length,i?.25:.4)),II(c)||(c=1)}nC.autoTicks(o,c)}var h,f=o.dtick,p=nC.tickIncrement(nC.tickFirst(o),f,"reverse",r);if("number"==typeof f)p=function(e,t,n,i,r){var a=0,o=0,s=0,l=0;function c(t){return(1+100*(t-e)/n.dtick)%100<2}for(var u=0;u<t.length;u++)t[u]%1==0?s++:II(t[u])||l++,c(t[u])&&a++,c(t[u]+n.dtick/2)&&o++;var d=t.length-l;if(s===d&&"date"!==n.type)n.dtick<1?e=i-.5*n.dtick:(e-=.5)+n.dtick<i&&(e+=n.dtick);else if(o<.1*d&&(a>.3*d||c(i)||c(r))){var g=n.dtick/2;e+=e+g<i?g:-g}return e}(p,e,o,s,l),h=p+(1+Math.floor((l-p)/f))*f;else for("M"===o.dtick.charAt(0)&&(p=function(e,t,n,i,r){var a=BI.findExactDates(t,r),o=.8;if(a.exactDays>o){var s=Number(n.substr(1));a.exactYears>o&&s%12==0?e=nC.tickIncrement(e,"M6","reverse")+1.5*TI:a.exactMonths>o?e=nC.tickIncrement(e,"M1","reverse")+15.5*TI:e-=MI;var l=nC.tickIncrement(e,n);if(l<=i)return l}return e}(p,e,f,s,r)),h=p,0;h<=l;)h=nC.tickIncrement(h,f,!1,r);return{start:t.c2r(p,0,r),end:t.c2r(h,0,r),size:f,_dataSpan:l-s}},nC.prepTicks=function(e,t){var n=BI.simpleMap(e.range,e.r2l,void 0,void 0,t);if(e._dtickInit=e.dtick,e._tick0Init=e.tick0,"auto"===e.tickmode||!e.dtick){var i,r=e.nticks;r||("category"===e.type||"multicategory"===e.type?(i=e.tickfont?BI.bigFont(e.tickfont.size||12):15,r=e._length/i):(i="y"===e._id.charAt(0)?40:80,r=BI.constrain(e._length/i,4,9)+1),"radialaxis"===e._name&&(r*=2)),"array"===e.tickmode&&(r*=100),e._roughDTick=Math.abs(n[1]-n[0])/r,nC.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}"period"===e.ticklabelmode&&function(e){var t;function n(){return!(II(e.dtick)||"M"!==e.dtick.charAt(0))}var i=n(),r=nC.getTickFormat(e);if(r){var a=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(r)||(/%[HI]/.test(r)?(t=HI,a&&!i&&e.dtick<HI&&(e.dtick=HI)):/%p/.test(r)?(t=MI,a&&!i&&e.dtick<MI&&(e.dtick=MI)):/%[Aadejuwx]/.test(r)?(t=TI,a&&!i&&e.dtick<TI&&(e.dtick=TI)):/%[UVW]/.test(r)?(t=_I,a&&!i&&e.dtick<_I&&(e.dtick=_I)):/%[Bbm]/.test(r)?(t=NI,a&&(i?gC(e.dtick)<1:e.dtick<WI)&&(e.dtick="M1")):/%[q]/.test(r)?(t=kI,a&&(i?gC(e.dtick)<3:e.dtick<EI)&&(e.dtick="M3")):/%[Yy]/.test(r)&&(t=SI,a&&(i?gC(e.dtick)<12:e.dtick<VI)&&(e.dtick="M12")))}(i=n())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0);e._definedDelta=t}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),CC(e)},nC.calcTicks=function(e,t){nC.prepTicks(e,t);var n=BI.simpleMap(e.range,e.r2l,void 0,void 0,t);if("array"===e.tickmode)return function(e){var t=e.tickvals,n=e.ticktext,i=new Array(t.length),r=lC(BI.simpleMap(e.range,e.r2l)),a=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]),s=0;Array.isArray(n)||(n=[]);var l="category"===e.type?e.d2l_noadd:e.d2l;"log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var c=0;c<t.length;c++){var u=l(t[c]);u>a&&u<o&&(void 0===n[c]?i[s]=nC.tickText(e,u):i[s]=xC(e,u,String(n[c])),s++)}s<t.length&&i.splice(s,t.length-s);e.rangebreaks&&(i=i.filter((function(t){return e.maskBreaks(t.x)!==OI})));return i}(e);var i=lC(n),r=i[0],a=i[1],o=n[1]<n[0],s=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]),c=II(e.dtick),u="log"===e.type&&!(c||"L"===e.dtick.charAt(0)),d="period"===e.ticklabelmode;if(e._tmin=nC.tickFirst(e,t),e._tmin<r!==o)return[];"category"!==e.type&&"multicategory"!==e.type||(a=o?Math.max(-.5,a):Math.min(e._categories.length-.5,a));var g=e._tmin;e.rangebreaks&&e._tick0Init!==e.tick0&&(g=_C(g,e),o||(g=nC.tickIncrement(g,e.dtick,!o,e.calendar))),d&&(g=nC.tickIncrement(g,e.dtick,!o,e.calendar));var h,f=e.ticklabelstep,p=Math.max(1e3,e._length||0),m=[],v=null;c?h=e.dtick:"date"===e.type?"string"==typeof e.dtick&&"M"===e.dtick.charAt(0)&&(h=NI*e.dtick.substring(1)):h=e._roughDTick;for(var b,y,I=Math.round((e.r2l(g)-e.r2l(e.tick0))/h)-1;o?g>=a:g<=a;g=nC.tickIncrement(g,e.dtick,o,e.calendar)){if(I++,e.rangebreaks&&!o){if(g<r)continue;if(e.maskBreaks(g)===OI&&_C(g,e)>=l)break}if(m.length>p||g===v)break;v=g;var C=!1;u&&g!==(0|g)&&(C=!0);var x={minor:C,value:g};f>1&&I%f&&(x.skipLabel=!0),m.push(x)}if(d&&function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i].value,a=i,o=i+1;i<e.length-1?(a=i,o=i+1):i>0?(a=i-1,o=i):(a=i,o=i);var s,l=e[a].value,c=e[o].value,u=Math.abs(c-l),d=n||u,g=0;d>=VI?g=u>=VI&&u<=LI?u:SI:n===kI&&d>=EI?g=u>=EI&&u<=ZI?u:kI:d>=WI?g=u>=WI&&u<=XI?u:NI:n===_I&&d>=_I?g=_I:d>=TI?g=TI:n===MI&&d>=MI?g=MI:n===HI&&d>=HI&&(g=HI),g>=u&&(g=u,s=!0);var h=r+g;if(t.rangebreaks&&g>0){for(var f=0,p=0;p<84;p++){var m=(p+.5)/84;t.maskBreaks(r*(1-m)+m*h)!==OI&&f++}(g*=f/84)||(e[i].drop=!0),s&&u>_I&&(g=u)}(g>0||0===i)&&(e[i].periodX=r+g/2)}}(m,e,e._definedDelta),e.rangebreaks){var B="y"===e._id.charAt(0),A=1;"auto"===e.tickmode&&(A=e.tickfont?e.tickfont.size:12);var F=NaN;for(b=m.length-1;b>-1;b--)if(m[b].drop)m.splice(b,1);else{m[b].value=_C(m[b].value,e);var Q=e.c2p(m[b].value);(B?F>Q-A:F<Q+A)?m.splice(o?b+1:b,1):F=Q}}WC(e)&&360===Math.abs(n[1]-n[0])&&m.pop(),e._tmax=(m[m.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0;var U,w,G=function(t){t.text=" ",e._prevDateHead=y},R=[];for(b=0;b<m.length;b++){var L=m[b].minor,S=m[b].value;y=e._prevDateHead,U=nC.tickText(e,S,!1,L),void 0!==(w=m[b].periodX)&&(U.periodX=w,(w>l||w<s)&&(w>l&&(U.periodX=l),w<s&&(U.periodX=s),G(U))),m[b].skipLabel&&G(U),R.push(U)}return e._inCalcTicks=!1,R};var hC=[2,5,10],fC=[1,2,3,6,12],pC=[1,2,5,10,15,30],mC=[1,2,3,7,14],vC=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],bC=[-.301,0,.301,.699,1],yC=[15,30,45,90,180];function IC(e,t,n){return t*BI.roundUp(e/t,n)}function CC(e){var t=e.dtick;if(e._tickexponent=0,II(t)||"string"==typeof t||(t=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type){var n=e.r2l(e.tick0),i=e.l2r(n).replace(/(^-|i)/g,""),r=i.length;if("M"===String(t).charAt(0))r>10||"01-01"!==i.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m";else if(t>=TI&&r<=10||t>=15*TI)e._tickround="d";else if(t>=YI&&r<=16||t>=HI)e._tickround="M";else if(t>=DI&&r<=19||t>=YI)e._tickround="S";else{var a=e.l2r(n+t).replace(/^-/,"").length;e._tickround=Math.max(r,a)-20,e._tickround<0&&(e._tickround=4)}}else if(II(t)||"L"===t.charAt(0)){var o=e.range.map(e.r2d||Number);II(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1])),l=Math.floor(Math.log(s)/Math.LN10+.01),c=void 0===e.minexponent?3:e.minexponent;Math.abs(l)>c&&(AC(e.exponentformat)&&!FC(l)?e._tickexponent=3*Math.round((l-1)/3):e._tickexponent=l)}else e._tickround=null}function xC(e,t,n){var i=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:i.size,font:i.family,fontColor:i.color}}nC.autoTicks=function(e,t){var n;function i(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type){e.tick0=BI.dateTick0(e.calendar,0);var r=2*t;if(r>SI)t/=SI,n=i(10),e.dtick="M"+12*IC(t,n,hC);else if(r>NI)t/=NI,e.dtick="M"+IC(t,1,fC);else if(r>TI){e.dtick=IC(t,TI,e._hasDayOfWeekBreaks?[1,2,7,14]:mC);var a=nC.getTickFormat(e),o="period"===e.ticklabelmode;o&&(e._rawTick0=e.tick0),/%[uVW]/.test(a)?e.tick0=BI.dateTick0(e.calendar,2):e.tick0=BI.dateTick0(e.calendar,1),o&&(e._dowTick0=e.tick0)}else r>HI?e.dtick=IC(t,HI,fC):r>YI?e.dtick=IC(t,YI,pC):r>DI?e.dtick=IC(t,DI,pC):(n=i(10),e.dtick=IC(t,n,hC))}else if("log"===e.type){e.tick0=0;var s=BI.simpleMap(e.range,e.r2l);if(t>.7)e.dtick=Math.ceil(t);else if(Math.abs(s[1]-s[0])<1){var l=1.5*Math.abs((s[1]-s[0])/t);t=Math.abs(Math.pow(10,s[1])-Math.pow(10,s[0]))/l,n=i(10),e.dtick="L"+IC(t,n,hC)}else e.dtick=t>.3?"D2":"D1"}else"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):WC(e)?(e.tick0=0,n=1,e.dtick=IC(t,n,yC)):(e.tick0=0,n=i(10),e.dtick=IC(t,n,hC));if(0===e.dtick&&(e.dtick=1),!II(e.dtick)&&"string"!=typeof e.dtick){var c=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(c)}},nC.tickIncrement=function(e,t,n,i){var r=n?-1:1;if(II(t))return BI.increment(e,r*t);var a=t.charAt(0),o=r*Number(t.substr(1));if("M"===a)return BI.incrementMonth(e,o,i);if("L"===a)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"===a){var s="D2"===t?bC:vC,l=e+.01*r,c=BI.roundUp(BI.mod(l,1),s,n);return Math.floor(l)+Math.log(yI.round(Math.pow(10,c),1))/Math.LN10}throw"unrecognized dtick "+String(t)},nC.tickFirst=function(e,t){var n=e.r2l||Number,i=BI.simpleMap(e.range,n,void 0,void 0,t),r=i[1]<i[0],a=r?Math.floor:Math.ceil,o=lC(i)[0],s=e.dtick,l=n(e.tick0);if(II(s)){var c=a((o-l)/s)*s+l;return"category"!==e.type&&"multicategory"!==e.type||(c=BI.constrain(c,0,e._categories.length-1)),c}var u=s.charAt(0),d=Number(s.substr(1));if("M"===u){for(var g,h,f,p=0,m=l;p<10;){if(((g=nC.tickIncrement(m,s,r,e.calendar))-o)*(m-o)<=0)return r?Math.min(m,g):Math.max(m,g);h=(o-(m+g)/2)/(g-m),f=u+(Math.abs(Math.round(h))||1)*d,m=nC.tickIncrement(m,f,h<0?!r:r,e.calendar),p++}return BI.error("tickFirst did not converge",e),m}if("L"===u)return Math.log(a((Math.pow(10,o)-l)/d)*d+l)/Math.LN10;if("D"===u){var v="D2"===s?bC:vC,b=BI.roundUp(BI.mod(o,1),v,r);return Math.floor(o)+Math.log(yI.round(Math.pow(10,b),1))/Math.LN10}throw"unrecognized dtick "+String(s)},nC.tickText=function(e,t,n,i){var r,a=xC(e,t),o="array"===e.tickmode,s=n||o,l=e.type,c="category"===l?e.d2l_noadd:e.d2l;if(o&&Array.isArray(e.ticktext)){var u=BI.simpleMap(e.range,e.r2l),d=(Math.abs(u[1]-u[0])-(e._lBreaks||0))/1e4;for(r=0;r<e.ticktext.length&&!(Math.abs(t-c(e.tickvals[r]))<d);r++);if(r<e.ticktext.length)return a.text=String(e.ticktext[r]),a}function g(i){if(void 0===i)return!0;if(n)return"none"===i;var r={first:e._tmin,last:e._tmax}[i];return"all"!==i&&t!==r}var h=n?"never":"none"!==e.exponentformat&&g(e.showexponent)?"hide":"";if("date"===l?function(e,t,n,i){var r=e._tickround,a=n&&e.hoverformat||nC.getTickFormat(e);i&&(r=II(r)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[r]);var o,s=BI.formatDate(t.x,a,r,e._dateFormat,e.calendar,e._extraFormat),l=s.indexOf("\n");-1!==l&&(o=s.substr(l+1),s=s.substr(0,l));i&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,"")));if(o)if(n)"d"===r?s+=", "+o:s=o+(s?", "+s:"");else if(e._inCalcTicks&&e._prevDateHead===o){var c=TC(e),u=e._trueSide||e.side;(!c&&"top"===u||c&&"bottom"===u)&&(s+="<br> ")}else e._prevDateHead=o,s+="<br>"+o;t.text=s}(e,a,n,s):"log"===l?function(e,t,n,i,r){var a=e.dtick,o=t.x,s=e.tickformat,l="string"==typeof a&&a.charAt(0);"never"===r&&(r="");i&&"L"!==l&&(a="L3",l="L");if(s||"L"===l)t.text=QC(Math.pow(10,o),e,r,i);else if(II(a)||"D"===l&&BI.mod(o+.01,1)<.1){var c=Math.round(o),u=Math.abs(c),d=e.exponentformat;"power"===d||AC(d)&&FC(c)?(t.text=0===c?1:1===c?"10":"10<sup>"+(c>1?"":zI)+u+"</sup>",t.fontSize*=1.25):("e"===d||"E"===d)&&u>2?t.text="1"+d+(c>0?"+":zI)+u:(t.text=QC(Math.pow(10,o),e,"","fakehover"),"D1"===a&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==l)throw"unrecognized dtick "+String(a);t.text=String(Math.round(Math.pow(10,BI.mod(o,1)))),t.fontSize*=.75}if("D1"===e.dtick){var g=String(t.text).charAt(0);"0"!==g&&"1"!==g||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)))}}(e,a,0,s,h):"category"===l?function(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n="");t.text=String(n)}(e,a):"multicategory"===l?function(e,t,n){var i=Math.round(t.x),r=e._categories[i]||[],a=void 0===r[1]?"":String(r[1]),o=void 0===r[0]?"":String(r[0]);n?t.text=o+" - "+a:(t.text=a,t.text2=o)}(e,a,n):WC(e)?function(e,t,n,i,r){if("radians"!==e.thetaunit||n)t.text=QC(t.x,e,r,i);else{var a=t.x/180;if(0===a)t.text="0";else{var o=function(e){function t(e,t){return Math.abs(e-t)<=1e-6}function n(e,i){return t(i,0)?e:n(i,e%i)}function i(e){for(var n=1;!t(Math.round(e*n)/n,e);)n*=10;return n}var r=i(e),a=e*r,o=Math.abs(n(a,r));return[Math.round(a/o),Math.round(r/o)]}(a);if(o[1]>=100)t.text=QC(BI.deg2rad(t.x),e,r,i);else{var s=t.x<0;1===o[1]?1===o[0]?t.text="":t.text=o[0]+"":t.text=["<sup>",o[0],"</sup>","","<sub>",o[1],"</sub>",""].join(""),s&&(t.text=zI+t.text)}}}}(e,a,n,s,h):function(e,t,n,i,r){"never"===r?r="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(r="hide");t.text=QC(t.x,e,r,i)}(e,a,0,s,h),i||(e.tickprefix&&!g(e.showtickprefix)&&(a.text=e.tickprefix+a.text),e.ticksuffix&&!g(e.showticksuffix)&&(a.text+=e.ticksuffix)),"boundaries"===e.tickson||e.showdividers){var f=function(t){var n=e.l2p(t);return n>=0&&n<=e._length?t:null};a.xbnd=[f(a.x-.5),f(a.x+e.dtick-.5)]}return a},nC.hoverLabelText=function(e,t,n){n&&(e=BI.extendFlat({},e,{hoverformat:n}));var i=Array.isArray(t)?t[0]:t,r=Array.isArray(t)?t[1]:void 0;if(void 0!==r&&r!==i)return nC.hoverLabelText(e,i,n)+" - "+nC.hoverLabelText(e,r,n);var a="log"===e.type&&i<=0,o=nC.tickText(e,e.c2l(a?-i:i),"hover").text;return a?0===i?"0":zI+o:o};var BC=["f","p","n","","m","","k","M","G","T"];function AC(e){return"SI"===e||"B"===e}function FC(e){return e>14||e<-15}function QC(e,t,n,i){var r=e<0,a=t._tickround,o=n||t.exponentformat||"B",s=t._tickexponent,l=nC.getTickFormat(t),c=t.separatethousands;if(i){var u={exponentformat:o,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:II(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};CC(u),a=(Number(u._tickround)||0)+4,s=u._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return t._numFormat(l)(e).replace(/-/g,zI);var d,g=Math.pow(10,-a)/2;if("none"===o&&(s=0),(e=Math.abs(e))<g)e="0",r=!1;else{if(e+=g,s&&(e*=Math.pow(10,-s),a+=s),0===a)e=String(Math.floor(e));else if(a<0){e=(e=String(Math.round(e))).substr(0,e.length+a);for(var h=a;h<0;h++)e+="0"}else{var f=(e=String(e)).indexOf(".")+1;f&&(e=e.substr(0,f+a).replace(/\.?0+$/,""))}e=BI.numSeparate(e,t._separators,c)}s&&"hide"!==o&&(AC(o)&&FC(s)&&(o="power"),d=s<0?zI+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?e+=o+d:"power"===o?e+="10<sup>"+d+"</sup>":"B"===o&&9===s?e+="B":AC(o)&&(e+=BC[s/3+5]));return r?zI+e:e}function UC(e,t){for(var n=[],i={},r=0;r<t.length;r++){var a=t[r];i[a.text2]?i[a.text2].push(a.x):i[a.text2]=[a.x]}for(var o in i)n.push(xC(e,BI.interp(i[o],.5),o));return n}function wC(e){return void 0!==e.periodX?e.periodX:e.x}function GC(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function RC(e){var t=e.title.font.size,n=(e.title.text.match(FI.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?n?t*($I+n*eC):t*$I:n?t*(n+1)*eC:t}function LC(e,t){var n=e.l2p(t);return n>1&&n<e._length-1}function SC(e){var t=yI.select(e),n=t.select(".text-math-group");return n.empty()?t.select("text"):n}function VC(e){return e._id+".automargin"}function ZC(e){return VC(e)+".mirror"}function kC(e){return e._id+".rangeslider"}function EC(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function XC(e,t,n){var i,r,a=[],o=[],s=e.layout;for(i=0;i<t.length;i++)a.push(nC.getFromId(e,t[i]));for(i=0;i<n.length;i++)o.push(nC.getFromId(e,n[i]));var l=Object.keys(GI),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(i=0;i<l.length;i++){var d=l[i],g=a[0][d],h=o[0][d],f=!0,p=!1,m=!1;if("_"!==d.charAt(0)&&"function"!=typeof g&&-1===c.indexOf(d)){for(r=1;r<a.length&&f;r++){var v=a[r][d];"type"===d&&-1!==u.indexOf(g)&&-1!==u.indexOf(v)&&g!==v?p=!0:v!==g&&(f=!1)}for(r=1;r<o.length&&f;r++){var b=o[r][d];"type"===d&&-1!==u.indexOf(h)&&-1!==u.indexOf(b)&&h!==b?m=!0:o[r][d]!==h&&(f=!1)}f&&(p&&(s[a[0]._name].type="linear"),m&&(s[o[0]._name].type="linear"),NC(s,d,a,o,e._fullLayout._dfltTitle))}}for(i=0;i<e._fullLayout.annotations.length;i++){var y=e._fullLayout.annotations[i];-1!==t.indexOf(y.xref)&&-1!==n.indexOf(y.yref)&&BI.swapAttrs(s.annotations[i],["?"])}}function NC(e,t,n,i,r){var a,o=BI.nestedProperty,s=o(e[n[0]._name],t).get(),l=o(e[i[0]._name],t).get();for("title"===t&&(s&&s.text===r.x&&(s.text=r.y),l&&l.text===r.y&&(l.text=r.x)),a=0;a<n.length;a++)o(e,n[a]._name+"."+t).set(l);for(a=0;a<i.length;a++)o(e,i[a]._name+"."+t).set(s)}function WC(e){return"angularaxis"===e._id}function _C(e,t){for(var n=t._rangebreaks.length,i=0;i<n;i++){var r=t._rangebreaks[i];if(e>=r.min&&e<r.max)return r.max}return e}function TC(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function MC(e,t){TC(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}nC.getTickFormat=function(e){var t,n,r;function a(e){return"string"!=typeof e?e:Number(e.replace("M",""))*NI}function o(e,t){var n=["L","D"];if(i(e)===i(t)){if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),a=n.indexOf(t.charAt(0));return r===a?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-a}return"number"==typeof e?1:-1}function s(e,t,n){var i=n||function(e){return e},r=t[0],a=t[1];return(!r&&"number"!=typeof r||i(r)<=i(e))&&(!a&&"number"!=typeof a||i(a)>=i(e))}function l(e,t){var n=null===t[0],i=null===t[1],r=o(e,t[0])>=0,a=o(e,t[1])<=0;return(n||r)&&(i||a)}if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&s(e.dtick,r.dtickrange,a)){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&l(e.dtick,r.dtickrange)){n=r;break}}return n?n.value:e.tickformat},nC.getSubplots=function(e,t){var n=e._fullLayout._subplots,i=n.cartesian.concat(n.gl2d||[]),r=t?nC.findSubplotsWithAxis(i,t):i;return r.sort((function(e,t){var n=e.substr(1).split("y"),i=t.substr(1).split("y");return n[0]===i[0]?+n[1]-+i[1]:+n[0]-+i[0]})),r},nC.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),i=[],r=0;r<e.length;r++){var a=e[r];n.test(a)&&i.push(a)}return i},nC.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var n,i,r={_offset:0,_length:t.width,_id:""},a={_offset:0,_length:t.height,_id:""},o=nC.list(e,"x",!0),s=nC.list(e,"y",!0),l=[];for(n=0;n<o.length;n++)for(l.push({x:o[n],y:a}),i=0;i<s.length;i++)0===n&&l.push({x:r,y:s[i]}),l.push({x:o[n],y:s[i]});var c=t._clips.selectAll(".axesclip").data(l,(function(e){return e.x._id+e.y._id}));c.enter().append("clipPath").classed("axesclip",!0).attr("id",(function(e){return"clip"+t._uid+e.x._id+e.y._id})).append("rect"),c.exit().remove(),c.each((function(e){yI.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})}))}},nC.draw=function(e,t,n){var i=e._fullLayout;"redraw"===t&&i._paper.selectAll("g.subplot").each((function(e){var t=e[0],n=i._plots[t];if(n){var r=n.xaxis,a=n.yaxis;n.xaxislayer.selectAll("."+r._id+"tick").remove(),n.yaxislayer.selectAll("."+a._id+"tick").remove(),n.xaxislayer.selectAll("."+r._id+"tick2").remove(),n.yaxislayer.selectAll("."+a._id+"tick2").remove(),n.xaxislayer.selectAll("."+r._id+"divider").remove(),n.yaxislayer.selectAll("."+a._id+"divider").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+r._id+"title").remove(),i._infolayer.select(".g-"+a._id+"title").remove()}}));var r=t&&"redraw"!==t?t:nC.listIds(e);return BI.syncOrAsync(r.map((function(t){return function(){if(t){var i=nC.getFromId(e,t),r=nC.drawOne(e,i,n);return i._r=i.range.slice(),i._rl=BI.simpleMap(i._r,i.r2l),r}}})))},nC.drawOne=function(e,t,n){var i,r,a;n=n||{},t.setScale();var o=e._fullLayout,s=t._id,l=s.charAt(0),c=nC.counterLetter(s),u=o._plots[t._mainSubplot];if(u){var d=u[l+"axislayer"],g=t._mainLinePosition,h=t._mainMirrorPosition,f=t._vals=nC.calcTicks(t),p=[t.mirror,g,h].join("_");for(i=0;i<f.length;i++)f[i].axInfo=p;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var m={};if(t.visible){var v,b,y=nC.makeTransTickFn(t),I=nC.makeTransTickLabelFn(t),C="inside"===t.ticks,x="outside"===t.ticks;if("boundaries"===t.tickson){var B=function(e,t){var n,i=[],r=function(e,t){var n=e.xbnd[t];null!==n&&i.push(BI.extendFlat({},e,{x:n}))};if(t.length){for(n=0;n<t.length;n++)r(t[n],0);r(t[n-1],1)}return i}(0,f);b=nC.clipEnds(t,B),v=C?b:B}else b=nC.clipEnds(t,f),v=C&&"period"!==t.ticklabelmode?b:f;var A=t._gridVals=b,F=function(e,t){var n,i,r=[],a=t.length&&t[t.length-1].x<t[0].x,o=function(e,t){var n=e.xbnd[t];null!==n&&r.push(BI.extendFlat({},e,{x:n}))};if(e.showdividers&&t.length){for(n=0;n<t.length;n++){var s=t[n];s.text2!==i&&o(s,a?1:0),i=s.text2}o(t[n-1],a?0:1)}return r}(t,f);if(!o._hasOnlyLargeSploms){var Q=t._subplotsWith,U={};for(i=0;i<Q.length;i++){r=Q[i];var w=(a=o._plots[r])[c+"axis"],G=w._mainAxis._id;if(!U[G]){U[G]=1;var R="x"===l?"M0,"+w._offset+"v"+w._length:"M"+w._offset+",0h"+w._length;nC.drawGrid(e,t,{vals:A,counterAxis:w,layer:a.gridlayer.select("."+s),path:R,transFn:y}),nC.drawZeroLine(e,t,{counterAxis:w,layer:a.zerolinelayer,path:R,transFn:y})}}}var L=nC.getTickSigns(t),S=[];if(t.ticks){var V,Z,k,E=nC.makeTickPath(t,g,L[2]);if(t._anchorAxis&&t.mirror&&!0!==t.mirror?(V=nC.makeTickPath(t,h,L[3]),Z=E+V):(V="",Z=E),t.showdividers&&x&&"boundaries"===t.tickson){var X={};for(i=0;i<F.length;i++)X[F[i].x]=1;k=function(e){return X[e.x]?V:Z}}else k=Z;nC.drawTicks(e,t,{vals:v,layer:d,path:k,transFn:y}),"allticks"===t.mirror&&(S=Object.keys(t._linepositions||{}))}for(i=0;i<S.length;i++){r=S[i],a=o._plots[r];var N=t._linepositions[r]||[],W=nC.makeTickPath(t,N[0],L[0])+nC.makeTickPath(t,N[1],L[1]);nC.drawTicks(e,t,{vals:v,layer:a[l+"axislayer"],path:W,transFn:y})}var _=[];if(_.push((function(){return nC.drawLabels(e,t,{vals:f,layer:d,plotinfo:a,transFn:I,labelFns:nC.makeLabelFns(t,g)})})),"multicategory"===t.type){var T={x:2,y:10}[l];_.push((function(){var n={x:"height",y:"width"}[l],i=H()[n]+T+(t._tickAngles[s+"tick"]?t.tickfont.size*eC:0);return nC.drawLabels(e,t,{vals:UC(t,f),layer:d,cls:s+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:y,labelFns:nC.makeLabelFns(t,g+i*L[4])})})),_.push((function(){return t._depth=L[4]*(H("tick2")[t.side]-g),function(e,t,n){var i=t._id+"divider",r=n.vals,a=n.layer.selectAll("path."+i).data(r,GC);a.exit().remove(),a.enter().insert("path",":first-child").classed(i,1).classed("crisp",1).call(UI.stroke,t.dividercolor).style("stroke-width",wI.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)}(e,t,{vals:F,layer:d,path:nC.makeTickPath(t,g,L[4],t._depth),transFn:y})}))}else t.title.hasOwnProperty("standoff")&&_.push((function(){t._depth=L[4]*(H()[t.side]-g)}));var M=xI.getComponentMethod("rangeslider","isVisible")(t);return _.push((function(){var n,i,r,a,s=t.side.charAt(0),u=tC[t.side].charAt(0),d=nC.getPxPosition(e,t),g=x?t.ticklen:0;if((t.automargin||M)&&("multicategory"===t.type?n=H("tick2"):(n=H(),"x"===l&&"b"===s&&(t._depth=Math.max(n.width>0?n.bottom-d:0,g)))),t.automargin){i={x:0,y:0,r:0,l:0,t:0,b:0};var h=[0,1];if("x"===l){if("b"===s?i[s]=t._depth:(i[s]=t._depth=Math.max(n.width>0?d-n.top:0,g),h.reverse()),n.width>0){var f=n.right-(t._offset+t._length);f>0&&(i.xr=1,i.r=f);var p=t._offset-n.left;p>0&&(i.xl=0,i.l=p)}}else if("l"===s?i[s]=t._depth=Math.max(n.height>0?d-n.left:0,g):(i[s]=t._depth=Math.max(n.height>0?n.right-d:0,g),h.reverse()),n.height>0){var m=n.bottom-(t._offset+t._length);m>0&&(i.yb=0,i.b=m);var v=t._offset-n.top;v>0&&(i.yt=1,i.t=v)}i[c]="free"===t.anchor?t.position:t._anchorAxis.domain[h[0]],t.title.text!==o._dfltTitle[l]&&(i[s]+=RC(t)+(t.title.standoff||0)),t.mirror&&"free"!==t.anchor&&((r={x:0,y:0,r:0,l:0,t:0,b:0})[u]=t.linewidth,t.mirror&&!0!==t.mirror&&(r[u]+=g),!0===t.mirror||"ticks"===t.mirror?r[c]=t._anchorAxis.domain[h[1]]:"all"!==t.mirror&&"allticks"!==t.mirror||(r[c]=[t._counterDomainMin,t._counterDomainMax][h[1]]))}M&&(a=xI.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),CI.autoMargin(e,VC(t),i),CI.autoMargin(e,ZC(t),r),CI.autoMargin(e,kC(t),a)})),n.skipTitle||M&&"bottom"===t.side||_.push((function(){return function(e,t){var n,i=e._fullLayout,r=t._id,a=r.charAt(0),o=t.title.font.size;if(t.title.hasOwnProperty("standoff"))n=t._depth+t.title.standoff+RC(t);else{var s=TC(t);if("multicategory"===t.type)n=t._depth;else{var l=1.5*o;s&&(l=.5*o,"outside"===t.ticks&&(l+=t.ticklen)),n=10+l+(t.linewidth?t.linewidth-1:0)}s||(n+="x"===a?"top"===t.side?o*(t.showticklabels?1:0):o*(t.showticklabels?1.5:.5):"right"===t.side?o*(t.showticklabels?1:.5):o*(t.showticklabels?.5:0))}var c,u,d,g,h=nC.getPxPosition(e,t);"x"===a?(u=t._offset+t._length/2,d="top"===t.side?h-n:h+n):(d=t._offset+t._length/2,u="right"===t.side?h+n:h-n,c={rotate:"-90",offset:0});if("multicategory"!==t.type){var f=t._selections[t._id+"tick"];if(g={selection:f,side:t.side},f&&f.node()&&f.node().parentNode){var p=wI.getTranslate(f.node().parentNode);g.offsetLeft=p.x,g.offsetTop=p.y}t.title.hasOwnProperty("standoff")&&(g.pad=0)}return QI.draw(e,r+"title",{propContainer:t,propName:t._name+".title.text",placeholder:i._dfltTitle[a],avoid:g,transform:c,attributes:{x:u,y:d,"text-anchor":"middle"}})}(e,t)})),BI.syncOrAsync(_)}}function H(e){var n=s+(e||"tick");return m[n]||(m[n]=function(e,t){var n,i,r,a;e._selections[t].size()?(n=1/0,i=-1/0,r=1/0,a=-1/0,e._selections[t].each((function(){var e=SC(this),t=wI.bBox(e.node().parentNode);n=Math.min(n,t.top),i=Math.max(i,t.bottom),r=Math.min(r,t.left),a=Math.max(a,t.right)}))):(n=0,i=0,r=0,a=0);return{top:n,bottom:i,left:r,right:a,height:i-n,width:a-r}}(t,n)),m[n]}},nC.getTickSigns=function(e){var t=e._id.charAt(0),n={x:"top",y:"right"}[t],i=e.side===n?1:-1,r=[-1,1,i,-i];return"inside"!==e.ticks==("x"===t)&&(r=r.map((function(e){return-e}))),e.side&&r.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),r},nC.makeTransTickFn=function(e){return"x"===e._id.charAt(0)?function(t){return AI(e._offset+e.l2p(t.x),0)}:function(t){return AI(0,e._offset+e.l2p(t.x))}},nC.makeTransTickLabelFn=function(e){var t=function(e){var t=e.ticklabelposition||"",n=function(e){return-1!==t.indexOf(e)},i=n("top"),r=n("left"),a=n("right"),o=n("bottom"),s=n("inside"),l=o||r||i||a;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,d=3,g=e.tickfont?e.tickfont.size:12;(o||i)&&(u+=g*$I,d+=(e.linewidth||0)/2);(r||a)&&(u+=(e.linewidth||0)/2,d+=3);s&&"top"===c&&(d-=g*(1-$I));(r||i)&&(u=-u);"bottom"!==c&&"right"!==c||(d=-d);return[l?u:0,s?d:0]}(e),n=t[0],i=t[1];return"x"===e._id.charAt(0)?function(t){return AI(n+e._offset+e.l2p(wC(t)),i)}:function(t){return AI(i,n+e._offset+e.l2p(wC(t)))}},nC.makeTickPath=function(e,t,n,i){i=void 0!==i?i:e.ticklen;var r=e._id.charAt(0),a=(e.linewidth||1)/2;return"x"===r?"M0,"+(t+a*n)+"v"+i*n:"M"+(t+a*n)+",0h"+i*n},nC.makeLabelFns=function(e,t,n){var i=e.ticklabelposition||"",r=function(e){return-1!==i.indexOf(e)},a=r("top"),o=r("left"),s=r("right"),l=r("bottom")||o||a||s,c=r("inside"),u="inside"===i&&"inside"===e.ticks||!c&&"outside"===e.ticks&&"boundaries"!==e.tickson,d=0,g=0,h=u?e.ticklen:0;if(c?h*=-1:l&&(h=0),u&&(d+=h,n)){var f=BI.deg2rad(n);d=h*Math.cos(f)+1,g=h*Math.sin(f)}e.showticklabels&&(u||e.showline)&&(d+=.2*e.tickfont.size);var p,m,v,b,y,I={labelStandoff:d+=(e.linewidth||1)/2*(c?-1:1),labelShift:g},C=0,x=e.side,B=e._id.charAt(0),A=e.tickangle;if("x"===B)b=(y=!c&&"bottom"===x||c&&"top"===x)?1:-1,c&&(b*=-1),p=g*b,m=t+d*b,v=y?1:-.2,90===Math.abs(A)&&(c?v+=qI:v=-90===A&&"bottom"===x?$I:90===A&&"top"===x?qI:.5,C=qI/2*(A/90)),I.xFn=function(e){return e.dx+p+C*e.fontSize},I.yFn=function(e){return e.dy+m+e.fontSize*v},I.anchorFn=function(e,t){if(l){if(o)return"end";if(s)return"start"}return II(t)&&0!==t&&180!==t?t*b<0!==c?"end":"start":"middle"},I.heightFn=function(t,n,i){return n<-60||n>60?-.5*i:"top"===e.side!==c?-i:0};else if("y"===B){if(b=(y=!c&&"left"===x||c&&"right"===x)?1:-1,c&&(b*=-1),p=d,m=g*b,v=0,c||90!==Math.abs(A)||(v=-90===A&&"left"===x||90===A&&"right"===x?$I:.5),c){var F=II(A)?+A:0;if(0!==F){var Q=BI.deg2rad(F);C=Math.abs(Math.sin(Q))*$I*b,v=0}}I.xFn=function(e){return e.dx+t-(p+e.fontSize*v)*b+C*e.fontSize},I.yFn=function(e){return e.dy+m+e.fontSize*qI},I.anchorFn=function(e,t){return II(t)&&90===Math.abs(t)?"middle":y?"end":"start"},I.heightFn=function(t,n,i){return"right"===e.side&&(n*=-1),n<-30?-i:n<30?-.5*i:0}}return I},nC.drawTicks=function(e,t,n){n=n||{};var i=t._id+"tick",r=n.vals;"period"===t.ticklabelmode&&(r=r.slice()).shift();var a=n.layer.selectAll("path."+i).data(t.ticks?r:[],GC);a.exit().remove(),a.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(UI.stroke,t.tickcolor).style("stroke-width",wI.crispRound(e,t.tickwidth,1)+"px").attr("d",n.path).style("display",null),MC(t,[PI]),a.attr("transform",n.transFn)},nC.drawGrid=function(e,t,n){n=n||{};var i=t._id+"grid",r=n.vals,a=n.counterAxis;if(!1===t.showgrid)r=[];else if(a&&nC.shouldShowZeroLine(e,t,a))for(var o="array"===t.tickmode,s=0;s<r.length;s++){var l=r[s].x;if(o?!l:Math.abs(l)<t.dtick/100){if(r=r.slice(0,s).concat(r.slice(s+1)),!o)break;s--}}var c=n.layer.selectAll("path."+i).data(r,GC);c.exit().remove(),c.enter().append("path").classed(i,1).classed("crisp",!1!==n.crisp),t._gw=wI.crispRound(e,t.gridwidth,1),c.attr("transform",n.transFn).attr("d",n.path).call(UI.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null),MC(t,[jI]),"function"==typeof n.path&&c.attr("d",n.path)},nC.drawZeroLine=function(e,t,n){n=n||n;var i=t._id+"zl",r=nC.shouldShowZeroLine(e,t,n.counterAxis),a=n.layer.selectAll("path."+i).data(r?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",!1!==n.crisp).each((function(){n.layer.selectAll("path").sort((function(e,t){return aC(e.id,t.id)}))})),a.attr("transform",n.transFn).attr("d",n.path).call(UI.stroke,t.zerolinecolor||UI.defaultLine).style("stroke-width",wI.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),MC(t,[JI])},nC.drawLabels=function(e,t,n){n=n||{};var i=e._fullLayout,r=t._id,a=r.charAt(0),o=n.cls||r+"tick",s=n.vals,l=n.labelFns,c=n.secondary?0:t.tickangle,u=(t._prevTickAngles||{})[o],d=n.layer.selectAll("g."+o).data(t.showticklabels?s:[],GC),g=[];function h(e,i){e.each((function(e){var r=yI.select(this),a=r.select(".text-math-group"),o=l.anchorFn(e,i),s=n.transFn.call(r.node(),e)+(II(i)&&0!=+i?" rotate("+i+","+l.xFn(e)+","+(l.yFn(e)-e.fontSize/2)+")":""),c=FI.lineCount(r),u=eC*e.fontSize,d=l.heightFn(e,II(i)?+i:0,(c-1)*u);if(d&&(s+=AI(0,d)),a.empty()){var g=r.select("text");g.attr({transform:s,"text-anchor":o}),g.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var h=wI.bBox(a.node()).width*{end:-.5,start:.5}[o];a.attr("transform",s+AI(h,0))}}))}d.enter().append("g").classed(o,1).append("text").attr("text-anchor","middle").each((function(t){var n=yI.select(this),i=e._promises.length;n.call(FI.positionText,l.xFn(t),l.yFn(t)).call(wI.font,t.font,t.fontSize,t.fontColor).text(t.text).call(FI.convertToTspans,e),e._promises[i]?g.push(e._promises.pop().then((function(){h(n,c)}))):h(n,c)})),MC(t,[KI]),d.exit().remove(),n.repositionOnUpdate&&d.each((function(e){yI.select(this).select("text").call(FI.positionText,l.xFn(e),l.yFn(e))})),t._adjustTickLabelsOverflow=function(){var n=t.ticklabeloverflow;if(n&&"allow"!==n){var r=-1!==n.indexOf("hide"),a="x"===t._id.charAt(0),o=0,s=a?e._fullLayout.width:e._fullLayout.height;if(-1!==n.indexOf("domain")){var l=BI.simpleMap(t.range,t.r2l);o=t.l2p(l[0])+t._offset,s=t.l2p(l[1])+t._offset}var c=Math.min(o,s),u=Math.max(o,s),g=t.side,h=1/0,f=-1/0;for(var p in d.each((function(e){var n=yI.select(this);if(n.select(".text-math-group").empty()){var i=wI.bBox(n.node()),o=0;a?(i.right>u||i.left<c)&&(o=1):(i.bottom>u||i.top+(t.tickangle?0:e.fontSize/4)<c)&&(o=1);var s=n.select("text");o?r&&s.style("opacity",0):(s.style("opacity",1),h="bottom"===g||"right"===g?Math.min(h,a?i.top:i.left):-1/0,f="top"===g||"left"===g?Math.max(f,a?i.bottom:i.right):1/0)}})),i._plots){var m=i._plots[p];if(t._id===m.xaxis._id||t._id===m.yaxis._id){var v=a?m.yaxis:m.xaxis;v&&(v["_visibleLabelMin_"+t._id]=h,v["_visibleLabelMax_"+t._id]=f)}}}},t._hideCounterAxisInsideTickLabels=function(e){var n="x"===t._id.charAt(0),r=[];for(var a in i._plots){var o=i._plots[a];t._id!==o.xaxis._id&&t._id!==o.yaxis._id||r.push(n?o.yaxis:o.xaxis)}r.forEach((function(n,r){n&&TC(n)&&(e||[JI,jI,PI,KI]).forEach((function(e){var a="tick"===e.K&&"text"===e.L&&"period"===t.ticklabelmode,o=i._plots[t._mainSubplot];(e.K===JI.K?o.zerolinelayer.selectAll("."+t._id+"zl"):e.K===jI.K?o.gridlayer.selectAll("."+t._id):o[t._id.charAt(0)+"axislayer"]).each((function(){var i=yI.select(this);e.L&&(i=i.selectAll(e.L)),i.each((function(i){var o=t.l2p(a?wC(i):i.x)+t._offset,s=yI.select(this);o<t["_visibleLabelMax_"+n._id]&&o>t["_visibleLabelMin_"+n._id]?s.style("display","none"):"tick"!==e.K||r||s.style("display",null)}))}))}))}))},h(d,u+1?u:c);var f=null;t._selections&&(t._selections[o]=d);var p=[function(){return g.length&&Promise.all(g)}];t.automargin&&i._redrawFromAutoMarginCount&&90===u?(f=90,p.push((function(){h(d,u)}))):p.push((function(){if(h(d,c),s.length&&"x"===a&&!II(c)&&("log"!==t.type||"D"!==String(t.dtick).charAt(0))){f=0;var e,i=0,r=[];if(d.each((function(e){i=Math.max(i,e.fontSize);var n=t.l2p(e.x),a=SC(this),o=wI.bBox(a.node());r.push({top:0,bottom:10,height:10,left:n-o.width/2,right:n+o.width/2+2,width:o.width+2})})),"boundaries"!==t.tickson&&!t.showdividers||n.secondary){var o=s.length,l=Math.abs((s[o-1].x-s[0].x)*t._m)/(o-1),u=t.ticklabelposition||"",g=function(e){return-1!==u.indexOf(e)},p=g("top"),m=g("left"),v=g("right"),b=g("bottom")||m||p||v?(t.tickwidth||0)+6:0,y=l<2.5*i||"multicategory"===t.type||"realaxis"===t._name;for(e=0;e<r.length-1;e++)if(BI.bBoxIntersect(r[e],r[e+1],b)){f=y?90:30;break}}else{var I=2;for(t.ticks&&(I+=t.tickwidth/2),e=0;e<r.length;e++){var C=s[e].xbnd,x=r[e];if(null!==C[0]&&x.left-t.l2p(C[0])<I||null!==C[1]&&t.l2p(C[1])-x.right<I){f=90;break}}}f&&h(d,f)}})),t._tickAngles&&p.push((function(){t._tickAngles[o]=null===f?II(c)?c:0:f}));var m=t._anchorAxis;m&&m.autorange&&TC(t)&&!oC(i,t._id)&&(i._insideTickLabelsAutorange||(i._insideTickLabelsAutorange={}),i._insideTickLabelsAutorange[m._name+".autorange"]=m.autorange,p.push((function(){d.each((function(e,n){var i=SC(this);i.select(".text-math-group").empty()&&(t._vals[n].bb=wI.bBox(i.node()))}))})));var v=BI.syncOrAsync(p);return v&&v.then&&e._promises.push(v),v},nC.getPxPosition=function(e,t){var n,i=e._fullLayout._size,r=t._id.charAt(0),a=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===r?n={_offset:i.t+(1-(t.position||0))*i.h,_length:0}:"y"===r&&(n={_offset:i.l+(t.position||0)*i.w,_length:0}),"top"===a||"left"===a?n._offset:"bottom"===a||"right"===a?n._offset+n._length:void 0},nC.shouldShowZeroLine=function(e,t,n){var i=BI.simpleMap(t.range,t.r2l);return i[0]*i[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===OI)&&(LC(t,0)||!function(e,t,n,i){var r=n._mainAxis;if(!r)return;var a=e._fullLayout,o=t._id.charAt(0),s=nC.counterLetter(t._id),l=t._offset+(Math.abs(i[0])<Math.abs(i[1])==("x"===o)?0:t._length);function c(e){if(!e.showline||!e.linewidth)return!1;var n=Math.max((e.linewidth+t.zerolinewidth)/2,1);function i(e){return"number"==typeof e&&Math.abs(e-l)<n}if(i(e._mainLinePosition)||i(e._mainMirrorPosition))return!0;var r=e._linepositions||{};for(var a in r)if(i(r[a][0])||i(r[a][1]))return!0}var u=a._plots[n._mainSubplot];if(!(u.mainplotinfo||u).overlays.length)return c(n);for(var d=nC.list(e,s),g=0;g<d.length;g++){var h=d[g];if(h._mainAxis===r&&c(h))return!0}}(e,t,n,i)||function(e,t){for(var n=e._fullData,i=t._mainSubplot,r=t._id.charAt(0),a=0;a<n.length;a++){var o=n[a];if(!0===o.visible&&o.xaxis+o.yaxis===i){if(xI.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[r])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===r)return!0}}return!1}(e,t))},nC.clipEnds=function(e,t){return t.filter((function(t){return LC(e,t.x)}))},nC.allowAutoMargin=function(e){for(var t=nC.list(e,"",!0),n=0;n<t.length;n++){var i=t[n];i.automargin&&(CI.allowAutoMargin(e,VC(i)),i.mirror&&CI.allowAutoMargin(e,ZC(i))),xI.getComponentMethod("rangeslider","isVisible")(i)&&CI.allowAutoMargin(e,kC(i))}},nC.swap=function(e,t){for(var n=function(e,t){var n,i,r=[];for(n=0;n<t.length;n++){var a=[],o=e._fullData[t[n]].xaxis,s=e._fullData[t[n]].yaxis;if(o&&s){for(i=0;i<r.length;i++)-1===r[i].x.indexOf(o)&&-1===r[i].y.indexOf(s)||a.push(i);if(a.length){var l,c=r[a[0]];if(a.length>1)for(i=1;i<a.length;i++)l=r[a[i]],EC(c.x,l.x),EC(c.y,l.y);EC(c.x,[o]),EC(c.y,[s])}else r.push({x:[o],y:[s]})}}return r}(e,t),i=0;i<n.length;i++)XC(e,n[i].x,n[i].y)};var HC={},YC={exports:{}},DC={left:0,top:0},zC=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var i=e.clientX||0,r=e.clientY||0,a=(o=t,o===window||o===document||o===document.body?DC:o.getBoundingClientRect());var o;return n[0]=i-a.left,n[1]=r-a.top,n};var OC=ws.exports,JC=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],jC={exports:{}},PC=sp,KC=Xh,qC=th.getGraphDiv,$C=xd,ex=jC.exports={};ex.wrapped=function(e,t,n){(e=qC(e))._fullLayout&&KC.clear(e._fullLayout._uid+$C.HOVERID),ex.raw(e,t,n)},ex.raw=function(e,t){var n=e._fullLayout,i=e._hoverdata;t||(t={}),t.target&&!e._dragged&&!1===PC.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&i&&e.emit("plotly_unhover",{event:t,points:i}))};var tx=zC,nx=Hf,ix=ws.exports.removeElement,rx=Zp,ax=YC.exports={};ax.align=function(e,t,n,i,r){var a=(e-n)/(i-n),o=a+t/(i-n),s=(a+o)/2;return"left"===r||"bottom"===r?a:"center"===r||"middle"===r?s:"right"===r||"top"===r?o:a<2/3-s?a:o>4/3-s?o:s},ax.getCursor=function(e,t,n,i){return e="left"===n?0:"center"===n?1:"right"===n?2:OC.constrain(Math.floor(3*e),0,2),t="bottom"===i?0:"middle"===i?1:"top"===i?2:OC.constrain(Math.floor(3*t),0,2),JC[t][e]};var ox=jC.exports;function sx(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function lx(e){return tx(e.changedTouches?e.changedTouches[0]:e,document.body)}ax.unhover=ox.wrapped,ax.unhoverRaw=ox.raw,ax.init=function(e){var t,n,i,r,a,o,s,l,c=e.gd,u=1,d=c._context.doubleClickDelay,g=e.element;c._mouseDownTime||(c._mouseDownTime=0),g.style.pointerEvents="all",g.onmousedown=f,g.ontouchstart=f;var h=e.clampFn||function(e,t,n){return Math.abs(e)<n&&(e=0),Math.abs(t)<n&&(t=0),[e,t]};function f(h){c._dragged=!1,c._dragging=!0;var f=lx(h);t=f[0],n=f[1],s=h.target,o=h,l=2===h.buttons||h.ctrlKey,void 0===h.clientX&&void 0===h.clientY&&(h.clientX=t,h.clientY=n),(i=(new Date).getTime())-c._mouseDownTime<d?u+=1:(u=1,c._mouseDownTime=i),e.prepFn&&e.prepFn(h,t,n),nx&&!l?(a=sx()).style.cursor=window.getComputedStyle(g).cursor:nx||(a=document,r=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(g).cursor),document.addEventListener("mouseup",m),document.addEventListener("touchend",m),!1!==e.dragmode&&(h.preventDefault(),document.addEventListener("mousemove",p),document.addEventListener("touchmove",p,{passive:!1}))}function p(i){i.preventDefault();var r=lx(i),a=e.minDrag||rx.MINDRAG,o=h(r[0]-t,r[1]-n,a),s=o[0],u=o[1];(s||u)&&(c._dragged=!0,ax.unhover(c,i)),c._dragged&&e.moveFn&&!l&&(c._dragdata={element:g,dx:s,dy:u},e.moveFn(s,u))}function m(t){if(delete c._dragdata,!1!==e.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("touchmove",p)),document.removeEventListener("mouseup",m),document.removeEventListener("touchend",m),nx?ix(a):r&&(a.documentElement.style.cursor=r,r=null),c._dragging){if(c._dragging=!1,(new Date).getTime()-c._mouseDownTime>d&&(u=Math.max(u-1,1)),c._dragged)e.doneFn&&e.doneFn();else if(e.clickFn&&e.clickFn(u,o),!l){var n;try{n=new MouseEvent("click",t)}catch(e){var i=lx(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,i[0],i[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}s.dispatchEvent(n)}c._dragging=!1,c._dragged=!1}else c._dragged=!1}},ax.coverSlip=sx;var cx={},ux=function(e,t){(e.attr("class")||"").split(" ").forEach((function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)})),t&&e.classed("cursor-"+t,!0)},dx=ux,gx="data-savedcursor",hx=Cd,fx=Yd,px={bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:fx.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:hx({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:hx({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the x position (in normalized coordinates) of the legend.","Defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the y position (in normalized coordinates) of the legend.","Defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:hx({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"},mx={isGrouped:function(e){return-1!==(e.traceorder||"").indexOf("grouped")},isVertical:function(e){return"h"!==e.orientation},isReversed:function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},vx=hg,bx=ws.exports,yx=Qp,Ix=Xd,Cx=px,xx=ph,Bx=mx,Ax=function(e,t,n){var i,r=e.legend||{},a=yx.newContainer(t,"legend");function o(e,t){return bx.coerce(r,a,Cx,e,t)}for(var s=function(e,t){var n=i._input,r=i;return bx.coerce(n,r,Ix,e,t)},l=t.font||{},c=bx.coerceFont(o,"grouptitlefont",bx.extendFlat({},l,{size:Math.round(1.1*l.size)})),u=0,d=!1,g="normal",h=0;h<n.length;h++)(i=n[h]).visible&&((i.showlegend||i._dfltShowLegend&&!(i._module&&i._module.attributes&&i._module.attributes.showlegend&&!1===i._module.attributes.showlegend.dflt))&&(u++,i.showlegend&&(d=!0,(vx.traceIs(i,"pie-like")||!0===i._input.showlegend)&&u++),bx.coerceFont(s,"legendgrouptitle.font",c)),(vx.traceIs(i,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(i.fill))&&(g=Bx.isGrouped({traceorder:g})?"grouped+reversed":"reversed"),void 0!==i.legendgroup&&""!==i.legendgroup&&(g=Bx.isReversed({traceorder:g})?"reversed+grouped":"grouped"));var f=bx.coerce(e,t,xx,"showlegend",d&&u>1);if(!1===f&&(t.legend=void 0),(!1!==f||r.uirevision)&&(o("uirevision",t.uirevision),!1!==f)){o("bgcolor",t.paper_bgcolor),o("bordercolor"),o("borderwidth");var p,m,v,b=bx.coerceFont(o,"font",t.font),y="h"===o("orientation");if(y?(p=0,vx.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(m=1.1,v="bottom"):(m=-.1,v="top")):(p=1.02,m=1,v="auto"),o("traceorder",g),Bx.isGrouped(t.legend)&&o("tracegroupgap"),o("itemsizing"),o("itemwidth"),o("itemclick"),o("itemdoubleclick"),o("groupclick"),o("x",p),o("xanchor"),o("y",m),o("yanchor",v),o("valign"),bx.noneOrAll(r,a,["x","y"]),o("title.text")){o("title.side",y?"left":"top");var I=bx.extendFlat({},b,{size:bx.bigFont(b.size)});bx.coerceFont(o,"title.font",I)}}},Fx=ws.exports,Qx=hg,Ux=!0,wx={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5},Gx=hg,Rx=mx,Lx={};!function(e){var t=ws.exports;function n(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}e.formatPiePercent=function(e,i){var r=n((100*e).toPrecision(3));return t.numSeparate(r,i)+"%"},e.formatPieValue=function(e,i){var r=n(e.toPrecision(10));return t.numSeparate(r,i)},e.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var i=e[t[n]];if(i||0===i||""===i)return i}},e.castOption=function(t,n){return Array.isArray(t)?e.getFirstFilled(t,n):t||void 0},e.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}}(Lx);var Sx=Hd.exports,Vx=Lx.castOption,Zx=Gs.exports,kx=hg,Ex=ws.exports,Xx=Ex.strTranslate,Nx=Am.exports,Wx=Hd.exports,_x=Nm.extractOpts,Tx=yb,Mx=function(e,t,n){var i=n.marker.line,r=Vx(i.color,t.pts)||Sx.defaultLine,a=Vx(i.width,t.pts)||0;e.style("stroke-width",a).call(Sx.fill,t.color).call(Sx.stroke,r)},Hx=Lx.castOption,Yx=wx,Dx=function(e,t,n){var i=t._fullLayout;n||(n=i.legend);var r="constant"===n.itemsizing,a=n.itemwidth,o=Xx((a+2*Yx.itemGap)/2,0),s=function(e,t,n,i){var a;if(e+1)a=e;else{if(!(t&&t.width>0))return 0;a=t.width}return r?i:Math.min(a,n)};function l(e,i,r){var a=e[0].trace,l=a.marker||{},c=l.line||{},u=r?a.visible&&a.type===r:kx.traceIs(a,"bar"),d=Zx.select(i).select("g.legendpoints").selectAll("path.legend"+r).data(u?[e]:[]);d.enter().append("path").classed("legend"+r,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",o),d.exit().remove(),d.each((function(e){var i=Zx.select(this),r=e[0],o=s(r.mlw,l.line,5,2);i.style("stroke-width",o+"px");var u=r.mcc;if(!n._inHover&&"mc"in r){var d=_x(l),g=d.mid;void 0===g&&(g=(d.max+d.min)/2),u=Nx.tryColorscale(l,"")(g)}var h=u||r.mc||l.color,f=l.pattern,p=f&&Nx.getPatternAttr(f.shape,0,"");if(p){var m=Nx.getPatternAttr(f.bgcolor,0,null),v=Nx.getPatternAttr(f.fgcolor,0,null),b=f.fgopacity,y=Jx(f.size,8,10),I=Jx(f.solidity,.5,1),C="legend-"+a.uid;i.call(Nx.pattern,"legend",t,C,p,y,I,u,f.fillmode,m,v,b)}else i.call(Wx.fill,h);o&&Wx.stroke(i,r.mlc||c.color)}))}function c(e,t,n){var i=e[0],r=i.trace,a=n?r.visible&&r.type===n:kx.traceIs(r,n),l=Zx.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(a?[e]:[]);if(l.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",o),l.exit().remove(),l.size()){var c=(r.marker||{}).line,u=s(Hx(c.width,i.pts),c,5,2),d=Ex.minExtend(r,{marker:{line:{width:u}}});d.marker.line.color=c.color;var g=Ex.minExtend(i,{trace:d});Mx(l,g,d)}}e.each((function(e){var t=Zx.select(this),i=Ex.ensureSingle(t,"g","layers");i.style("opacity",e[0].trace.opacity);var r=n.valign,a=e[0].lineHeight,o=e[0].height;if("middle"!==r&&a&&o){var s={top:1,bottom:-1}[r]*(.5*(a-o+3));i.attr("transform",Xx(0,s))}else i.attr("transform",null);i.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),i.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var l=i.selectAll("g.legendsymbols").data([e]);l.enter().append("g").classed("legendsymbols",!0),l.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)})).each((function(e){var n,i=e[0].trace,r=[];if(i.visible)switch(i.type){case"histogram2d":case"heatmap":r=[["M-15,-2V4H15V-2Z"]],n=!0;break;case"choropleth":case"choroplethmapbox":r=[["M-6,-6V6H6V-6Z"]],n=!0;break;case"densitymapbox":r=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],n="radial";break;case"cone":r=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],n=!1;break;case"streamtube":r=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],n=!1;break;case"surface":r=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],n=!0;break;case"mesh3d":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!1;break;case"volume":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!0;break;case"isosurface":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],n=!1}var a=Zx.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(r);a.enter().append("path").classed("legend3dandfriends",!0).attr("transform",o).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(e,r){var a,o=Zx.select(this),s=_x(i),l=s.colorscale,c=s.reversescale;if(l){if(!n){var u=l.length;a=0===r?l[c?u-1:0][1]:1===r?l[c?0:u-1][1]:l[Math.floor((u-1)/2)][1]}}else{var d=i.vertexcolor||i.facecolor||i.color;a=Ex.isArrayOrTypedArray(d)?d[r]||d[0]:d}o.attr("d",e[0]),a?o.call(Wx.fill,a):o.call((function(e){if(e.size()){var r="legendfill-"+i.uid;Nx.gradient(e,t,r,zx(c,"radial"===n),l,"fill")}}))}))})).each((function(e){var t=e[0].trace,n="waterfall"===t.type;if(e[0]._distinct&&n){var i=e[0].trace[e[0].dir].marker;return e[0].mc=i.color,e[0].mlw=i.line.width,e[0].mlc=i.line.color,l(e,this,"waterfall")}var r=[];t.visible&&n&&(r=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var a=Zx.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(r);a.enter().append("path").classed("legendwaterfall",!0).attr("transform",o).style("stroke-miterlimit",1),a.exit().remove(),a.each((function(e){var n=Zx.select(this),i=t[e[0]].marker,r=s(void 0,i.line,5,2);n.attr("d",e[1]).style("stroke-width",r+"px").call(Wx.fill,i.color),r&&n.call(Wx.stroke,i.line.color)}))})).each((function(e){l(e,this,"funnel")})).each((function(e){l(e,this)})).each((function(e){var n=e[0].trace,i=Zx.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&kx.traceIs(n,"box-violin")?[e]:[]);i.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",o),i.exit().remove(),i.each((function(){var e=Zx.select(this);if("all"!==n.boxpoints&&"all"!==n.points||0!==Wx.opacity(n.fillcolor)||0!==Wx.opacity((n.line||{}).color)){var a=s(void 0,n.line,5,2);e.style("stroke-width",a+"px").call(Wx.fill,n.fillcolor),a&&Wx.stroke(e,n.line.color)}else{var o=Ex.minExtend(n,{marker:{size:r?12:Ex.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});i.call(Nx.pointStyle,o,t)}}))})).each((function(e){c(e,this,"funnelarea")})).each((function(e){c(e,this,"pie")})).each((function(e){var n,i,r=Ox(e),o=r.showFill,l=r.showLine,c=r.showGradientLine,u=r.showGradientFill,d=r.anyFill,g=r.anyLine,h=e[0],f=h.trace,p=_x(f),m=p.colorscale,v=p.reversescale,b=function(e){if(e.size()){var n="legendfill-"+f.uid;Nx.gradient(e,t,n,zx(v),m,"fill")}},y=Tx.hasMarkers(f)||!d?"M5,0":g?"M5,-2":"M5,-3",I=Zx.select(this),C=I.select(".legendfill").selectAll("path").data(o||u?[e]:[]);if(C.enter().append("path").classed("js-fill",!0),C.exit().remove(),C.attr("d",y+"h"+a+"v6h-"+a+"z").call(o?Nx.fillGroupStyle:b),l||c){var x=s(void 0,f.line,10,5);i=Ex.minExtend(f,{line:{width:x}}),n=[Ex.minExtend(h,{trace:i})]}var B=I.select(".legendlines").selectAll("path").data(l||c?[n]:[]);B.enter().append("path").classed("js-line",!0),B.exit().remove(),B.attr("d",y+(c?"l"+a+",0.0001":"h"+a)).call(l?Nx.lineGroupStyle:function(e){if(e.size()){var n="legendline-"+f.uid;Nx.lineGroupStyle(e),Nx.gradient(e,t,n,zx(v),m,"stroke")}})})).each((function(e){var n,i,a=Ox(e),s=a.anyFill,l=a.anyLine,c=a.showLine,u=a.showMarker,d=e[0],g=d.trace,h=!u&&!l&&!s&&Tx.hasText(g);function f(e,t,n,i){var a=Ex.nestedProperty(g,e).get(),o=Ex.isArrayOrTypedArray(a)&&t?t(a):a;if(r&&o&&void 0!==i&&(o=i),n){if(o<n[0])return n[0];if(o>n[1])return n[1]}return o}function p(e){return d._distinct&&d.index&&e[d.index]?e[d.index]:e[0]}if(u||h||c){var m={},v={};if(u){m.mc=f("marker.color",p),m.mx=f("marker.symbol",p),m.mo=f("marker.opacity",Ex.mean,[.2,1]),m.mlc=f("marker.line.color",p),m.mlw=f("marker.line.width",Ex.mean,[0,5],2),v.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var b=f("marker.size",Ex.mean,[2,16],12);m.ms=b,v.marker.size=b}c&&(v.line={width:f("line.width",p,[0,10],5)}),h&&(m.tx="Aa",m.tp=f("textposition",p),m.ts=10,m.tc=f("textfont.color",p),m.tf=f("textfont.family",p)),n=[Ex.minExtend(d,m)],(i=Ex.minExtend(g,v)).selectedpoints=null,i.texttemplate=null}var y=Zx.select(this).select("g.legendpoints"),I=y.selectAll("path.scatterpts").data(u?n:[]);I.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",o),I.exit().remove(),I.call(Nx.pointStyle,i,t),u&&(n[0].mrc=3);var C=y.selectAll("g.pointtext").data(h?n:[]);C.enter().append("g").classed("pointtext",!0).append("text").attr("transform",o),C.exit().remove(),C.selectAll("text").call(Nx.textPointStyle,i,t)})).each((function(e){var t=e[0].trace,n=Zx.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.visible&&"candlestick"===t.type?[e,e]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",(function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"})).attr("transform",o).style("stroke-miterlimit",1),n.exit().remove(),n.each((function(e,n){var i=Zx.select(this),r=t[n?"increasing":"decreasing"],a=s(void 0,r.line,5,2);i.style("stroke-width",a+"px").call(Wx.fill,r.fillcolor),a&&Wx.stroke(i,r.line.color)}))})).each((function(e){var t=e[0].trace,n=Zx.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.visible&&"ohlc"===t.type?[e,e]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",(function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"})).attr("transform",o).style("stroke-miterlimit",1),n.exit().remove(),n.each((function(e,n){var i=Zx.select(this),r=t[n?"increasing":"decreasing"],a=s(void 0,r.line,5,2);i.style("fill","none").call(Nx.dashLine,r.line.dash,a),a&&Wx.stroke(i,r.line.color)}))}))};function zx(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function Ox(e){var t=e[0].trace,n=t.contours,i=Tx.hasLines(t),r=Tx.hasMarkers(t),a=t.visible&&t.fill&&"none"!==t.fill,o=!1,s=!1;if(n){var l=n.coloring;"lines"===l?o=!0:i="none"===l||"heatmap"===l||n.showlines,"constraint"===n.type?a="="!==n._operation:"fill"!==l&&"heatmap"!==l||(s=!0)}return{showMarker:r,showLine:i,showFill:a,showGradientLine:o,showGradientFill:s,anyLine:i||o,anyFill:a||s}}function Jx(e,t,n){return e&&Ex.isArrayOrTypedArray(e)?t:e>n?n:e}var jx=Gs.exports,Px=ws.exports,Kx=Fp.exports,qx=hg,$x=sp,eB=YC.exports,tB=Am.exports,nB=Hd.exports,iB=Cm,rB=function(e,t,n){var i=t._fullLayout;if(!t._dragged&&!t._editing){var r,a=i.legend.itemclick,o=i.legend.itemdoubleclick,s=i.legend.groupclick;if(1===n&&"toggle"===a&&"toggleothers"===o&&Ux&&t.data&&t._context.showTips?(Fx.notifier(Fx._(t,"Double-click on legend to isolate one trace"),"long"),Ux=!1):Ux=!1,1===n?r=a:2===n&&(r=o),r){var l="togglegroup"===s,c=i.hiddenlabels?i.hiddenlabels.slice():[],u=e.data()[0][0];if(!u.groupTitle||!u.noClick){var d,g,h,f,p,m=t._fullData,v=u.trace,b=v.legendgroup,y={},I=[],C=[],x=[];if(Qx.traceIs(v,"pie-like")){var B=u.label,A=c.indexOf(B);"toggle"===r?-1===A?c.push(B):c.splice(A,1):"toggleothers"===r&&(c=[],t.calcdata[0].forEach((function(e){B!==e.label&&c.push(e.label)})),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===c.length&&-1===A&&(c=[])),Qx.call("_guiRelayout",t,"hiddenlabels",c)}else{var F,Q=b&&b.length,U=[];if(Q)for(d=0;d<m.length;d++)(F=m[d]).visible&&F.legendgroup===b&&U.push(d);if("toggle"===r){var w;switch(v.visible){case!0:w="legendonly";break;case!1:w=!1;break;case"legendonly":w=!0}if(Q)if(l)for(d=0;d<m.length;d++)!1!==m[d].visible&&m[d].legendgroup===b&&X(m[d],w);else X(v,w);else X(v,w)}else if("toggleothers"===r){var G,R,L,S,V=!0;for(d=0;d<m.length;d++)if(G=m[d]===v,L=!0!==m[d].showlegend,!(G||L||(R=Q&&m[d].legendgroup===b)||!0!==m[d].visible||Qx.traceIs(m[d],"notLegendIsolatable"))){V=!1;break}for(d=0;d<m.length;d++)if(!1!==m[d].visible&&!Qx.traceIs(m[d],"notLegendIsolatable"))switch(v.visible){case"legendonly":X(m[d],!0);break;case!0:S=!!V||"legendonly",G=m[d]===v,L=!0!==m[d].showlegend&&!m[d].legendgroup,R=G||Q&&m[d].legendgroup===b,X(m[d],!(!R&&!L)||S)}}for(d=0;d<C.length;d++)if(h=C[d]){var Z=h.constructUpdate(),k=Object.keys(Z);for(g=0;g<k.length;g++)f=k[g],(y[f]=y[f]||[])[x[d]]=Z[f]}for(p=Object.keys(y),d=0;d<p.length;d++)for(f=p[d],g=0;g<I.length;g++)y[f].hasOwnProperty(g)||(y[f][g]=void 0);Qx.call("_guiRestyle",t,y,I)}}}}function E(e,t,n){var i=I.indexOf(e),r=y[t];return r||(r=y[t]=[]),-1===I.indexOf(e)&&(I.push(e),i=I.length-1),r[i]=n,i}function X(e,t){if(!u.groupTitle||l){var n=e._fullInput;if(Qx.hasTransform(n,"groupby")){var i=C[n.index];if(!i){var r=Qx.getTransformIndices(n,"groupby"),a=r[r.length-1];i=Fx.keyedContainer(n,"transforms["+a+"].styles","target","value.visible"),C[n.index]=i}var o=i.get(e._group);void 0===o&&(o=!0),!1!==o&&i.set(e._group,t),x[n.index]=E(n.index,"visible",!1!==n.visible)}else{var s=!1!==n.visible&&t;E(n.index,"visible",s)}}}},aB=wx,oB=Bm.LINE_SPACING,sB=Bm.FROM_TL,lB=Bm.FROM_BR,cB=function(e,t){var n,i,r=t._inHover,a=Rx.isGrouped(t),o=Rx.isReversed(t),s={},l=[],c=!1,u={},d=0,g=0;function h(e,n){if(""!==e&&Rx.isGrouped(t))-1===l.indexOf(e)?(l.push(e),c=!0,s[e]=[n]):s[e].push(n);else{var i="~~i"+d;l.push(i),s[i]=[n],d++}}for(n=0;n<e.length;n++){var f=e[n],p=f[0],m=p.trace,v=m.legendgroup;if(r||m.visible&&m.showlegend)if(Gx.traceIs(m,"pie-like"))for(u[v]||(u[v]={}),i=0;i<f.length;i++){var b=f[i].label;u[v][b]||(h(v,{label:b,color:f[i].color,i:f[i].i,trace:m,pts:f[i].pts}),u[v][b]=!0,g=Math.max(g,(b||"").length))}else h(v,p),g=Math.max(g,(m.name||"").length)}if(!l.length)return[];var y=!c||!a,I=[];for(n=0;n<l.length;n++){var C=s[l[n]];y?I.push(C[0]):I.push(C)}for(y&&(I=[I]),n=0;n<I.length;n++){var x=1/0;for(i=0;i<I[n].length;i++){var B=I[n][i].trace.legendrank;x>B&&(x=B)}I[n][0]._groupMinRank=x,I[n][0]._preGroupSort=n}var A=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};for(I.forEach((function(e,t){e[0]._preGroupSort=t})),I.sort((function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort})),n=0;n<I.length;n++){I[n].forEach((function(e,t){e._preSort=t})),I[n].sort(A);var F=I[n][0].trace,Q=null;for(i=0;i<I[n].length;i++){var U=I[n][i].trace.legendgrouptitle;if(U&&U.text){Q=U,r&&(U.font=t._groupTitleFont);break}}if(o&&I[n].reverse(),Q){var w=!1;for(i=0;i<I[n].length;i++)if(Gx.traceIs(I[n][i].trace,"pie-like")){w=!0;break}I[n].unshift({i:-1,groupTitle:Q,noClick:w,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:"toggleitem"===t.groupclick||F.visible}})}for(i=0;i<I[n].length;i++)I[n][i]=[I[n][i]]}return t._lgroupsLength=I.length,t._maxNameLength=g,I},uB=Dx,dB=mx,gB=function(e,t){return t||(t=e._fullLayout.legend||{}),function(e,t){var n,i,r=e._fullLayout,a="legend"+r._uid,o=t._inHover;o?(n=t.layer,a+="-hover"):n=r._infolayer;if(!n)return;e._legendMouseDownTime||(e._legendMouseDownTime=0);if(o){if(!t.entries)return;i=cB(t.entries,t)}else{if(!e.calcdata)return;i=r.showlegend&&cB(e.calcdata,t)}var s=r.hiddenlabels||[];if(!(o||r.showlegend&&i.length))return n.selectAll(".legend").remove(),r._topdefs.select("#"+a).remove(),Kx.autoMargin(e,"legend");var l=Px.ensureSingle(n,"g","legend",(function(e){o||e.attr("pointer-events","all")})),c=Px.ensureSingleById(r._topdefs,"clipPath",a,(function(e){e.append("rect")})),u=Px.ensureSingle(l,"rect","bg",(function(e){e.attr("shape-rendering","crispEdges")}));u.call(nB.stroke,t.bordercolor).call(nB.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");var d=Px.ensureSingle(l,"g","scrollbox"),g=t.title;if(t._titleWidth=0,t._titleHeight=0,g.text){var h=Px.ensureSingle(d,"text","legendtitletext");h.attr("text-anchor","start").call(tB.font,g.font).text(g.text),vB(h,d,e,t,1)}else d.selectAll(".legendtitletext").remove();var f=Px.ensureSingle(l,"rect","scrollbar",(function(e){e.attr(aB.scrollBarEnterAttrs).call(nB.fill,aB.scrollBarColor)})),p=d.selectAll("g.groups").data(i);p.enter().append("g").attr("class","groups"),p.exit().remove();var m=p.selectAll("g.traces").data(Px.identity);m.enter().append("g").attr("class","traces"),m.exit().remove(),m.style("opacity",(function(e){var t=e[0].trace;return qx.traceIs(t,"pie-like")?-1!==s.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1})).each((function(){jx.select(this).call(fB,e,t)})).call(uB,e,t).each((function(){o||jx.select(this).call(mB,e)})),Px.syncOrAsync([Kx.previousPromises,function(){return function(e,t,n,i){var r=e._fullLayout;i||(i=r.legend);var a=r._size,o=dB.isVertical(i),s=dB.isGrouped(i),l=i.borderwidth,c=2*l,u=aB.itemGap,d=i.itemwidth+2*u,g=2*(l+u),h=yB(i),f=i.y<0||0===i.y&&"top"===h,p=i.y>1||1===i.y&&"bottom"===h,m=i.tracegroupgap;i._maxHeight=Math.max(f||p?r.height/2:a.h,30);var v=0;i._width=0,i._height=0;var b=function(e){var t=0,n=0,i=e.title.side;i&&(-1!==i.indexOf("left")&&(t=e._titleWidth),-1!==i.indexOf("top")&&(n=e._titleHeight));return[t,n]}(i);if(o)n.each((function(e){var t=e[0].height;tB.setTranslate(this,l+b[0],l+b[1]+i._height+t/2+u),i._height+=t,i._width=Math.max(i._width,e[0].width)})),v=d+i._width,i._width+=u+d+c,i._height+=g,s&&(t.each((function(e,t){tB.setTranslate(this,0,t*i.tracegroupgap)})),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var y=bB(i),I=i.x<0||0===i.x&&"right"===y,C=i.x>1||1===i.x&&"left"===y,x=p||f,B=r.width/2;i._maxWidth=Math.max(I?x&&"left"===y?a.l+a.w:B:C?x&&"right"===y?a.r+a.w:B:a.w,2*d);var A=0,F=0;n.each((function(e){var t=e[0].width+d;A=Math.max(A,t),F+=t})),v=null;var Q=0;if(s){var U=0,w=0,G=0;t.each((function(){var e=0,t=0;jx.select(this).selectAll("g.traces").each((function(n){var i=n[0].width,r=n[0].height;tB.setTranslate(this,b[0],b[1]+l+u+r/2+t),t+=r,e=Math.max(e,d+i)}));var n=e+u;w>0&&n+l+w>i._maxWidth?(Q=Math.max(Q,w),w=0,G+=U+m,U=t):U=Math.max(U,t),tB.setTranslate(this,w,G),w+=n})),i._width=Math.max(Q,w)+l,i._height=G+U+g}else{var R=n.size(),L=F+c+(R-1)*u<i._maxWidth,S=0,V=0,Z=0,k=0;n.each((function(e){var t=e[0].height,n=d+e[0].width,r=(L?n:A)+u;r+l+V-u>=i._maxWidth&&(Q=Math.max(Q,k),V=0,Z+=S,i._height+=S,S=0),tB.setTranslate(this,b[0]+l+V,b[1]+l+Z+t/2+u),k=V+n+u,V+=r,S=Math.max(S,t)})),L?(i._width=V+c,i._height=S+g):(i._width=Math.max(Q,k)+c,i._height+=S+g)}}i._width=Math.ceil(Math.max(i._width+b[0],i._titleWidth+2*(l+aB.titlePad))),i._height=Math.ceil(Math.max(i._height+b[1],i._titleHeight+2*(l+aB.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var E=e._context.edits,X=E.legendText||E.legendPosition;n.each((function(e){var t=jx.select(this).select(".legendtoggle"),n=e[0].height,i=X?d:v||d+e[0].width;o||(i+=u/2),tB.setRect(t,0,-n/2,i,n)}))}(e,p,m,t)},function(){var i,s,g,h,p=r._size,m=t.borderwidth;if(!o){var v=function(e){var t=e._fullLayout.legend,n=bB(t),i=yB(t);return Kx.autoMargin(e,"legend",{x:t.x,y:t.y,l:t._width*sB[n],r:t._width*lB[n],b:t._effHeight*lB[i],t:t._effHeight*sB[i]})}(e);if(v)return;var b=p.l+p.w*t.x-sB[bB(t)]*t._width,y=p.t+p.h*(1-t.y)-sB[yB(t)]*t._effHeight;if(r.margin.autoexpand){var I=b,C=y;b=Px.constrain(b,0,r.width-t._width),y=Px.constrain(y,0,r.height-t._effHeight),b!==I&&Px.log("Constrain legend.x to make legend fit inside graph"),y!==C&&Px.log("Constrain legend.y to make legend fit inside graph")}tB.setTranslate(l,b,y)}if(f.on(".drag",null),l.on("wheel",null),o||t._height<=t._maxHeight||e._context.staticPlot){var x=t._effHeight;o&&(x=t._height),u.attr({width:t._width-m,height:x-m,x:m/2,y:m/2}),tB.setTranslate(d,0,0),c.select("rect").attr({width:t._width-2*m,height:x-2*m,x:m,y:m}),tB.setClipUrl(d,a,e),tB.setRect(f,0,0,0,0),delete t._scrollY}else{var B,A,F,Q=Math.max(aB.scrollBarMinHeight,t._effHeight*t._effHeight/t._height),U=t._effHeight-Q-2*aB.scrollBarMargin,w=t._height-t._effHeight,G=U/w,R=Math.min(t._scrollY||0,w);u.attr({width:t._width-2*m+aB.scrollBarWidth+aB.scrollBarMargin,height:t._effHeight-m,x:m/2,y:m/2}),c.select("rect").attr({width:t._width-2*m+aB.scrollBarWidth+aB.scrollBarMargin,height:t._effHeight-2*m,x:m,y:m+R}),tB.setClipUrl(d,a,e),k(R,Q,G),l.on("wheel",(function(){k(R=Px.constrain(t._scrollY+jx.event.deltaY/U*w,0,w),Q,G),0!==R&&R!==w&&jx.event.preventDefault()}));var L=function(e,t,n){var i=(n-t)/G+e;return Px.constrain(i,0,w)},S=function(e,t,n){var i=(t-n)/G+e;return Px.constrain(i,0,w)},V=jx.behavior.drag().on("dragstart",(function(){var e=jx.event.sourceEvent;B="touchstart"===e.type?e.changedTouches[0].clientY:e.clientY,F=R})).on("drag",(function(){var e=jx.event.sourceEvent;2===e.buttons||e.ctrlKey||(A="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,k(R=L(F,B,A),Q,G))}));f.call(V);var Z=jx.behavior.drag().on("dragstart",(function(){var e=jx.event.sourceEvent;"touchstart"===e.type&&(B=e.changedTouches[0].clientY,F=R)})).on("drag",(function(){var e=jx.event.sourceEvent;"touchmove"===e.type&&(A=e.changedTouches[0].clientY,k(R=S(F,B,A),Q,G))}));d.call(Z)}function k(n,i,r){t._scrollY=e._fullLayout.legend._scrollY=n,tB.setTranslate(d,0,-n),tB.setRect(f,t._width,aB.scrollBarMargin+n*r,aB.scrollBarWidth,i),c.select("rect").attr("y",m+n)}e._context.edits.legendPosition&&(l.classed("cursor-move",!0),eB.init({element:l.node(),gd:e,prepFn:function(){var e=tB.getTranslate(l);g=e.x,h=e.y},moveFn:function(e,n){var r=g+e,a=h+n;tB.setTranslate(l,r,a),i=eB.align(r,0,p.l,p.l+p.w,t.xanchor),s=eB.align(a,0,p.t+p.h,p.t,t.yanchor)},doneFn:function(){void 0!==i&&void 0!==s&&qx.call("_guiRelayout",e,{"legend.x":i,"legend.y":s})},clickFn:function(t,i){var r=n.selectAll("g.traces").filter((function(){var e=this.getBoundingClientRect();return i.clientX>=e.left&&i.clientX<=e.right&&i.clientY>=e.top&&i.clientY<=e.bottom}));r.size()>0&&hB(e,l,r,t,i)}}))}],e)}(e,t)};function hB(e,t,n,i,r){var a=n.data()[0][0].trace,o={event:r,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(a._group&&(o.group=a._group),qx.traceIs(a,"pie-like")&&(o.label=n.datum()[0].label),!1!==$x.triggerHandler(e,"plotly_legendclick",o))if(1===i)t._clickTimeout=setTimeout((function(){e._fullLayout&&rB(n,e,i)}),e._context.doubleClickDelay);else if(2===i){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==$x.triggerHandler(e,"plotly_legenddoubleclick",o)&&rB(n,e,i)}}function fB(e,t,n){var i,r,a=e.data()[0][0],o=a.trace,s=qx.traceIs(o,"pie-like"),l=!n._inHover&&t._context.edits.legendText&&!s,c=n._maxNameLength;a.groupTitle?(i=a.groupTitle.text,r=a.groupTitle.font):(r=n.font,n.entries?i=a.text:(i=s?a.label:o.name,o._meta&&(i=Px.templateString(i,o._meta))));var u=Px.ensureSingle(e,"text","legendtext");u.attr("text-anchor","start").call(tB.font,r).text(l?pB(i,c):i);var d=n.itemwidth+2*aB.itemGap;iB.positionText(u,d,0),l?u.call(iB.makeEditable,{gd:t,text:i}).call(vB,e,t,n).on("edit",(function(i){this.text(pB(i,c)).call(vB,e,t,n);var r=a.trace._fullInput||{},s={};if(qx.hasTransform(r,"groupby")){var l=qx.getTransformIndices(r,"groupby"),u=l[l.length-1],d=Px.keyedContainer(r,"transforms["+u+"].styles","target","value.name");d.set(a.trace._group,i),s=d.constructUpdate()}else s.name=i;return qx.call("_guiRestyle",t,s,o.index)})):vB(u,e,t,n)}function pB(e,t){var n=Math.max(4,t);if(e&&e.trim().length>=n/2)return e;for(var i=n-(e=e||"").length;i>0;i--)e+=" ";return e}function mB(e,t){var n,i=t._context.doubleClickDelay,r=1,a=Px.ensureSingle(e,"rect","legendtoggle",(function(e){t._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(nB.fill,"rgba(0,0,0,0)")}));t._context.staticPlot||(a.on("mousedown",(function(){(n=(new Date).getTime())-t._legendMouseDownTime<i?r+=1:(r=1,t._legendMouseDownTime=n)})),a.on("mouseup",(function(){if(!t._dragged&&!t._editing){var n=t._fullLayout.legend;(new Date).getTime()-t._legendMouseDownTime>i&&(r=Math.max(r-1,1)),hB(t,n,e,r,jx.event)}})))}function vB(e,t,n,i,r){i._inHover&&e.attr("data-notex",!0),iB.convertToTspans(e,n,(function(){!function(e,t,n,i){var r=e.data()[0][0];if(!n._inHover&&r&&!r.trace.showlegend)return void e.remove();var a=e.select("g[class*=math-group]"),o=a.node();n||(n=t._fullLayout.legend);var s,l=n.borderwidth;s=1===i?n.title.font:r.groupTitle?r.groupTitle.font:n.font;var c,u,d=s.size*oB;if(o){var g=tB.bBox(o);c=g.height,u=g.width,1===i?tB.setTranslate(a,l,l+.75*c):tB.setTranslate(a,0,.25*c)}else{var h=e.select(1===i?".legendtitletext":".legendtext"),f=iB.lineCount(h),p=h.node();if(c=d*f,u=p?tB.bBox(p).width:0,1===i)"left"===n.title.side&&(u+=2*aB.itemGap),iB.positionText(h,l+aB.titlePad,l+d);else{var m=2*aB.itemGap+n.itemwidth;r.groupTitle&&(m=aB.itemGap,u-=n.itemwidth),iB.positionText(h,m,-d*((f-1)/2-.3))}}1===i?(n._titleWidth=u,n._titleHeight=c):(r.lineHeight=d,r.height=Math.max(c,16)+3,r.width=u)}(t,n,i,r)}))}function bB(e){return Px.isRightAnchor(e)?"right":Px.isCenterAnchor(e)?"center":"left"}function yB(e){return Px.isBottomAnchor(e)?"bottom":Px.isMiddleAnchor(e)?"middle":"top"}var IB=Gs.exports,CB=Yu,xB=Id.exports,BB=ws.exports,AB=BB.strTranslate,FB=BB.strRotate,QB=sp,UB=Cm,wB=function(e,t){var n=e.attr(gx);if(t){if(!n){for(var i=(e.attr("class")||"").split(" "),r=0;r<i.length;r++){var a=i[r];0===a.indexOf("cursor-")&&e.attr(gx,a.substr(7)).classed(a,!1)}e.attr(gx)||e.attr(gx,"!!")}dx(e,t)}else n&&(e.attr(gx,null),"!!"===n?dx(e):dx(e,n))},GB=Am.exports,RB=Hd.exports,LB=YC.exports,SB=Im.exports,VB=hg,ZB=xb,kB=xd,EB=Ax,XB=gB,NB=kB.YANGLE,WB=Math.PI*NB/180,_B=1/Math.sin(WB),TB=Math.cos(WB),MB=Math.sin(WB),HB=kB.HOVERARROWSIZE,YB=kB.HOVERTEXTPAD,DB={box:!0,ohlc:!0,violin:!0,candlestick:!0},zB={scatter:!0,scattergl:!0,splom:!0};function OB(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}cx.hover=function(e,t,n,i){e=BB.getGraphDiv(e);var r=t.target;BB.throttle(e._fullLayout._uid+kB.HOVERID,kB.HOVERMINTIME,(function(){!function(e,t,n,i,r){n||(n="xy");var a=Array.isArray(n)?n:[n],o=e._fullLayout,s=o._plots||[],l=s[n],c=o._has("cartesian");if(l){var u=l.overlays.map((function(e){return e.id}));a=a.concat(u)}for(var d=a.length,g=new Array(d),h=new Array(d),f=!1,p=0;p<d;p++){var m=a[p];if(s[m])f=!0,g[p]=s[m].xaxis,h[p]=s[m].yaxis;else{if(!o[m]||!o[m]._subplot)return void BB.warn("Unrecognized subplot: "+m);var v=o[m]._subplot;g[p]=v.xaxis,h[p]=v.yaxis}}var b=t.hovermode||o.hovermode;b&&!f&&(b="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(b)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return LB.unhoverRaw(e,t);var y=o.hoverdistance;-1===y&&(y=1/0);var I=o.spikedistance;-1===I&&(I=1/0);var C,x,B,A,F,Q,U,w,G,R,L,S,V,Z=[],k=[],E={hLinePoint:null,vLinePoint:null},X=!1;if(Array.isArray(t))for(b="array",B=0;B<t.length;B++)(F=e.calcdata[t[B].curveNumber||0])&&(Q=F[0].trace,"skip"!==F[0].trace.hoverinfo&&(k.push(F),"h"===Q.orientation&&(X=!0)));else{for(A=0;A<e.calcdata.length;A++)F=e.calcdata[A],"skip"!==(Q=F[0].trace).hoverinfo&&ZB.isTraceInSubplots(Q,a)&&(k.push(F),"h"===Q.orientation&&(X=!0));var N,W;if(!r)N="xpx"in t?t.xpx:g[0]._length/2,W="ypx"in t?t.ypx:h[0]._length/2;else{if(!1===QB.triggerHandler(e,"plotly_beforehover",t))return;var _=r.getBoundingClientRect();N=t.clientX-_.left,W=t.clientY-_.top,o._calcInverseTransform(e);var T=BB.apply3DTransform(o._invTransform)(N,W);if(N=T[0],W=T[1],N<0||N>g[0]._length||W<0||W>h[0]._length)return LB.unhoverRaw(e,t)}if(t.pointerX=N+g[0]._offset,t.pointerY=W+h[0]._offset,C="xval"in t?ZB.flat(a,t.xval):ZB.p2c(g,N),x="yval"in t?ZB.flat(a,t.yval):ZB.p2c(h,W),!CB(C[0])||!CB(x[0]))return BB.warn("Fx.hover failed",t,e),LB.unhoverRaw(e,t)}var M=1/0;function H(e,n){for(A=0;A<k.length;A++)if((F=k[A])&&F[0]&&F[0].trace&&!0===(Q=F[0].trace).visible&&0!==Q._length&&-1===["carpet","contourcarpet"].indexOf(Q._module.name)){if("splom"===Q.type?U=a[w=0]:(U=ZB.getSubplot(Q),w=a.indexOf(U)),G=b,ZB.isUnifiedHover(G)&&(G=G.charAt(0)),S={cd:F,trace:Q,xa:g[w],ya:h[w],maxHoverDistance:y,maxSpikeDistance:I,index:!1,distance:Math.min(M,y),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:RB.defaultLine,name:Q.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},o[U]&&(S.subplot=o[U]._subplot),o._splomScenes&&o._splomScenes[Q.uid]&&(S.scene=o._splomScenes[Q.uid]),V=Z.length,"array"===G){var i=t[A];"pointNumber"in i?(S.index=i.pointNumber,G="closest"):(G="","xval"in i&&(R=i.xval,G="x"),"yval"in i&&(L=i.yval,G=G?"closest":"y"))}else void 0!==e&&void 0!==n?(R=e,L=n):(R=C[w],L=x[w]);if(0!==y)if(Q._module&&Q._module.hoverPoints){var r=Q._module.hoverPoints(S,R,L,G,{finiteRange:!0,hoverLayer:o._hoverlayer});if(r)for(var s,l=0;l<r.length;l++)s=r[l],CB(s.x0)&&CB(s.y0)&&Z.push(qB(s,b))}else BB.log("Unrecognized trace type in hover:",Q);if("closest"===b&&Z.length>V&&(Z.splice(0,V),M=Z[0].distance),c&&0!==I&&0===Z.length){S.distance=I,S.index=!1;var u=Q._module.hoverPoints(S,R,L,"closest",{hoverLayer:o._hoverlayer});if(u&&(u=u.filter((function(e){return e.spikeDistance<=I}))),u&&u.length){var d,f=u.filter((function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap}));if(f.length){var p=f[0];CB(p.x0)&&CB(p.y0)&&(d=D(p),(!E.vLinePoint||E.vLinePoint.spikeDistance>d.spikeDistance)&&(E.vLinePoint=d))}var m=u.filter((function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap}));if(m.length){var v=m[0];CB(v.x0)&&CB(v.y0)&&(d=D(v),(!E.hLinePoint||E.hLinePoint.spikeDistance>d.spikeDistance)&&(E.hLinePoint=d))}}}}}function Y(e,t,n){for(var i,r=null,a=1/0,o=0;o<e.length;o++)i=e[o].spikeDistance,n&&0===o&&(i=-1/0),i<=a&&i<=t&&(r=e[o],a=i);return r}function D(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}H();var z={fullLayout:o,container:o._hoverlayer,event:t},O=e._spikepoints,J={vLinePoint:E.vLinePoint,hLinePoint:E.hLinePoint};e._spikepoints=J;var j=function(){Z.sort((function(e,t){return e.distance-t.distance})),Z=function(e,t){for(var n=t.charAt(0),i=[],r=[],a=[],o=0;o<e.length;o++){var s=e[o];VB.traceIs(s.trace,"bar-like")||VB.traceIs(s.trace,"box-violin")?a.push(s):s.trace[n+"period"]?r.push(s):i.push(s)}return i.concat(r).concat(a)}(Z,b)};j();var P=b.charAt(0),K=("x"===P||"y"===P)&&Z[0]&&zB[Z[0].trace.type];if(c&&0!==I&&0!==Z.length){var q=Y(Z.filter((function(e){return e.ya.showspikes})),I,K);E.hLinePoint=D(q);var $=Y(Z.filter((function(e){return e.xa.showspikes})),I,K);E.vLinePoint=D($)}if(0===Z.length){var ee=LB.unhoverRaw(e,t);return!c||null===E.hLinePoint&&null===E.vLinePoint||eA(O)&&$B(e,E,z),ee}c&&eA(O)&&$B(e,E,z);if(ZB.isXYhover(G)&&0!==Z[0].length&&"splom"!==Z[0].trace.type){var te=Z[0];Z=DB[te.trace.type]?Z.filter((function(e){return e.trace.index===te.trace.index})):[te];var ne=Z.length;H(nA("x",te,o),nA("y",te,o));var ie,re=[],ae={},oe=0,se=function(e){var t=DB[e.trace.type]?OB(e):e.trace.index;if(ae[t]){var n=ae[t]-1,i=re[n];n>0&&Math.abs(e.distance)<Math.abs(i.distance)&&(re[n]=e)}else oe++,ae[t]=oe,re.push(e)};for(ie=0;ie<ne;ie++)se(Z[ie]);for(ie=Z.length-1;ie>ne-1;ie--)se(Z[ie]);Z=re,j()}var le=e._hoverdata,ce=[],ue=iA(e),de=rA(e);for(B=0;B<Z.length;B++){var ge=Z[B],he=ZB.makeEventData(ge,ge.trace,ge.cd);if(!1!==ge.hovertemplate){var fe=!1;ge.cd[ge.index]&&ge.cd[ge.index].ht&&(fe=ge.cd[ge.index].ht),ge.hovertemplate=fe||ge.trace.hovertemplate||!1}if(ge.xa&&ge.ya){var pe=ge.x0+ge.xa._offset,me=ge.x1+ge.xa._offset,ve=ge.y0+ge.ya._offset,be=ge.y1+ge.ya._offset,ye=Math.min(pe,me),Ie=Math.max(pe,me),Ce=Math.min(ve,be),xe=Math.max(ve,be);he.bbox={x0:ye+de,x1:Ie+de,y0:Ce+ue,y1:xe+ue}}ge.eventData=[he],ce.push(he)}e._hoverdata=ce;var Be="y"===b&&(k.length>1||Z.length>1)||"closest"===b&&X&&Z.length>1,Ae=RB.combine(o.plot_bgcolor||RB.background,o.paper_bgcolor),Fe=jB(Z,{gd:e,hovermode:b,rotateLabels:Be,bgColor:Ae,container:o._hoverlayer,outerContainer:o._paper.node(),commonLabelOpts:o.hoverlabel,hoverdistance:o.hoverdistance});ZB.isUnifiedHover(b)||(!function(e,t,n){var i,r,a,o,s,l,c,u=0,d=1,g=e.size(),h=new Array(g),f=0;function p(e){var t=e[0],n=e[e.length-1];if(r=t.pmin-t.pos-t.dp+t.size,a=n.pos+n.dp+n.size-t.pmax,r>.01){for(s=e.length-1;s>=0;s--)e[s].dp+=r;i=!1}if(!(a<.01)){if(r<-.01){for(s=e.length-1;s>=0;s--)e[s].dp-=a;i=!1}if(i){var c=0;for(o=0;o<e.length;o++)(l=e[o]).pos+l.dp+l.size>t.pmax&&c++;for(o=e.length-1;o>=0&&!(c<=0);o--)(l=e[o]).pos>t.pmax-1&&(l.del=!0,c--);for(o=0;o<e.length&&!(c<=0);o++)if((l=e[o]).pos<t.pmin+1)for(l.del=!0,c--,a=2*l.size,s=e.length-1;s>=0;s--)e[s].dp-=a;for(o=e.length-1;o>=0&&!(c<=0);o--)(l=e[o]).pos+l.dp+l.size>t.pmax&&(l.del=!0,c--)}}}e.each((function(e){var i=e[t],r="x"===i._id.charAt(0),a=i.range;0===f&&a&&a[0]>a[1]!==r&&(d=-1),h[f++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(r?_B:1)/2,pmin:0,pmax:r?n.width:n.height}]})),h.sort((function(e,t){return e[0].posref-t[0].posref||d*(t[0].traceIndex-e[0].traceIndex)}));for(;!i&&u<=g;){for(u++,i=!0,o=0;o<h.length-1;){var m=h[o],v=h[o+1],b=m[m.length-1],y=v[0];if((r=b.pos+b.dp+b.size-y.pos-y.dp+y.size)>.01&&b.pmin===y.pmin&&b.pmax===y.pmax){for(s=v.length-1;s>=0;s--)v[s].dp+=r;for(m.push.apply(m,v),h.splice(o+1,1),c=0,s=m.length-1;s>=0;s--)c+=m[s].dp;for(a=c/m.length,s=m.length-1;s>=0;s--)m[s].dp-=a;i=!1}else o++}h.forEach(p)}for(o=h.length-1;o>=0;o--){var I=h[o];for(s=I.length-1;s>=0;s--){var C=I[s],x=C.datum;x.offset=C.dp,x.del=C.del}}}(Fe,Be?"xa":"ya",o),KB(Fe,Be,o._invScaleX,o._invScaleY));if(r&&r.tagName){var Qe=VB.getComponentMethod("annotations","hasClickToShow")(e,ce);wB(IB.select(r),Qe?"pointer":"")}if(!r||i||!function(e,t,n){if(!n||n.length!==e._hoverdata.length)return!0;for(var i=n.length-1;i>=0;i--){var r=n[i],a=e._hoverdata[i];if(r.curveNumber!==a.curveNumber||String(r.pointNumber)!==String(a.pointNumber)||String(r.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(e,0,le))return;le&&e.emit("plotly_unhover",{event:t,points:le});e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:g,yaxes:h,xvals:C,yvals:x})}(e,t,n,i,r)}))},cx.loneHover=function(e,t){var n=!0;Array.isArray(e)||(n=!1,e=[e]);var i=t.gd,r=iA(i),a=rA(i),o=jB(e.map((function(e){var n=e._x0||e.x0||e.x||0,o=e._x1||e.x1||e.x||0,s=e._y0||e.y0||e.y||0,l=e._y1||e.y1||e.y||0,c=e.eventData;if(c){var u=Math.min(n,o),d=Math.max(n,o),g=Math.min(s,l),h=Math.max(s,l),f=e.trace;if(VB.traceIs(f,"gl3d")){var p=i._fullLayout[f.scene]._scene.container,m=p.offsetLeft,v=p.offsetTop;u+=m,d+=m,g+=v,h+=v}c.bbox={x0:u+a,x1:d+a,y0:g+r,y1:h+r},t.inOut_bbox&&t.inOut_bbox.push(c.bbox)}else c=!1;return{color:e.color||RB.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,hovertemplateLabels:e.hovertemplateLabels||!1,eventData:c}})),{gd:i,hovermode:"closest",rotateLabels:false,bgColor:t.bgColor||RB.background,container:IB.select(t.container),outerContainer:t.outerContainer||t.container}),s=0,l=0;return o.sort((function(e,t){return e.y0-t.y0})).each((function(e,n){var i=e.y0-e.by/2;e.offset=i-5<s?s-i+5:0,s=i+e.by+e.offset,n===t.anchorIndex&&(l=e.offset)})).each((function(e){e.offset-=l})),KB(o,false,i._fullLayout._invScaleX,i._fullLayout._invScaleY),n?o:o.node()};var JB=/<extra>([\s\S]*)<\/extra>/;function jB(e,t){var n=t.gd,i=n._fullLayout,r=t.hovermode,a=t.rotateLabels,o=t.bgColor,s=t.container,l=t.outerContainer,c=t.commonLabelOpts||{};if(0===e.length)return[[]];var u=t.fontFamily||kB.HOVERFONT,d=t.fontSize||kB.HOVERFONTSIZE,g=e[0],h=g.xa,f=g.ya,p=r.charAt(0),m=g[p+"Label"],v=aA(n,l),b=v.top,y=v.width,I=v.height,C=void 0!==m&&g.distance<=t.hoverdistance&&("x"===r||"y"===r);if(C){var x,B,A=!0;for(x=0;x<e.length;x++)if(A&&void 0===e[x].zLabel&&(A=!1),B=e[x].hoverinfo||e[x].trace.hoverinfo){var F=Array.isArray(B)?B:B.split("+");if(-1===F.indexOf("all")&&-1===F.indexOf(r)){C=!1;break}}A&&(C=!1)}var Q=s.selectAll("g.axistext").data(C?[0]:[]);if(Q.enter().append("g").classed("axistext",!0),Q.exit().remove(),Q.each((function(){var e=IB.select(this),t=BB.ensureSingle(e,"path","",(function(e){e.style({"stroke-width":"1px"})})),a=BB.ensureSingle(e,"text","",(function(e){e.attr("data-notex",1)})),o=c.bgcolor||RB.defaultLine,s=c.bordercolor||RB.contrast(o),l=RB.contrast(o),p={family:c.font.family||u,size:c.font.size||d,color:c.font.color||l};t.style({fill:o,stroke:s}),a.text(m).call(GB.font,p).call(UB.positionText,0,0).call(UB.convertToTspans,n),e.attr("transform","");var v,y,I=aA(n,a.node());if("x"===r){var C="top"===h.side?"-":"";a.attr("text-anchor","middle").call(UB.positionText,0,"top"===h.side?b-I.bottom-HB-YB:b-I.top+HB+YB),v=h._offset+(g.x0+g.x1)/2,y=f._offset+("top"===h.side?0:f._length);var x=I.width/2+YB;v<x?(v=x,t.attr("d","M-"+(x-HB)+",0L-"+(x-2*HB)+","+C+HB+"H"+(YB+I.width/2)+"v"+C+(2*YB+I.height)+"H-"+x+"V"+C+HB+"Z")):v>i.width-x?(v=i.width-x,t.attr("d","M"+(x-HB)+",0L"+x+","+C+HB+"v"+C+(2*YB+I.height)+"H-"+x+"V"+C+HB+"H"+(x-2*HB)+"Z")):t.attr("d","M0,0L"+HB+","+C+HB+"H"+(YB+I.width/2)+"v"+C+(2*YB+I.height)+"H-"+(YB+I.width/2)+"V"+C+HB+"H-"+HB+"Z")}else{var B,A,F;"right"===f.side?(B="start",A=1,F="",v=h._offset+h._length):(B="end",A=-1,F="-",v=h._offset),y=f._offset+(g.y0+g.y1)/2,a.attr("text-anchor",B),t.attr("d","M0,0L"+F+HB+","+HB+"V"+(YB+I.height/2)+"h"+F+(2*YB+I.width)+"V-"+(YB+I.height/2)+"H"+F+HB+"V-"+HB+"Z");var Q,U=I.height/2,w=b-I.top-U,G="clip"+i._uid+"commonlabel"+f._id;if(v<I.width+2*YB+HB){Q="M-"+(HB+YB)+"-"+U+"h-"+(I.width-YB)+"V"+U+"h"+(I.width-YB)+"Z";var R=I.width-v+YB;UB.positionText(a,R,w),"end"===B&&a.selectAll("tspan").each((function(){var e=IB.select(this),t=GB.tester.append("text").text(e.text()).call(GB.font,p),i=aA(n,t.node());Math.round(i.width)<Math.round(I.width)&&e.attr("x",R-i.width),t.remove()}))}else UB.positionText(a,A*(YB+HB),w),Q=null;var L=i._topclips.selectAll("#"+G).data(Q?[0]:[]);L.enter().append("clipPath").attr("id",G).append("path"),L.exit().remove(),L.select("path").attr("d",Q),GB.setClipUrl(a,Q?G:null,n)}e.attr("transform",AB(v,y))})),ZB.isUnifiedHover(r)){s.selectAll("g.hovertext").remove();var U=e.filter((function(e){return"none"!==e.hoverinfo}));if(0===U.length)return;var w=i.hoverlabel,G=w.font,R={showlegend:!0,legend:{title:{text:m,font:G},font:G,bgcolor:w.bgcolor,bordercolor:w.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},L={font:G};EB(R,L,n._fullData);var S=L.legend;S.entries=[];for(var V=0;V<U.length;V++){var Z=U[V];if("none"!==Z.hoverinfo){var k=PB(Z,!0,r,i,m),E=k[0],X=k[1];Z.name=X,Z.text=""!==X?X+" : "+E:E;var N=Z.cd[Z.index];N&&(N.mc&&(Z.mc=N.mc),N.mcc&&(Z.mc=N.mcc),N.mlc&&(Z.mlc=N.mlc),N.mlcc&&(Z.mlc=N.mlcc),N.mlw&&(Z.mlw=N.mlw),N.mrc&&(Z.mrc=N.mrc),N.dir&&(Z.dir=N.dir)),Z._distinct=!0,S.entries.push([Z])}}S.entries.sort((function(e,t){return e[0].trace.index-t[0].trace.index})),S.layer=s,S._inHover=!0,S._groupTitleFont=w.grouptitlefont,XB(n,S);var W,_,T,M,H=s.select("g.legend"),Y=aA(n,H.node()),D=Y.width+2*YB,z=Y.height+2*YB,O=U[0],J=(O.x0+O.x1)/2,j=(O.y0+O.y1)/2,P=!(VB.traceIs(O.trace,"bar-like")||VB.traceIs(O.trace,"box-violin"));"y"===p?P?(_=j-YB,W=j+YB):(_=Math.min.apply(null,U.map((function(e){return Math.min(e.y0,e.y1)}))),W=Math.max.apply(null,U.map((function(e){return Math.max(e.y0,e.y1)})))):_=W=BB.mean(U.map((function(e){return(e.y0+e.y1)/2})))-z/2,"x"===p?P?(T=J+YB,M=J-YB):(T=Math.max.apply(null,U.map((function(e){return Math.max(e.x0,e.x1)}))),M=Math.min.apply(null,U.map((function(e){return Math.min(e.x0,e.x1)})))):T=M=BB.mean(U.map((function(e){return(e.x0+e.x1)/2})))-D/2;var K,q,$=h._offset,ee=f._offset;return M+=$-D,_+=ee-z,K=(T+=$)+D<y&&T>=0?T:M+D<y&&M>=0?M:$+D<y?$:T-J<J-M+D?y-D:0,K+=YB,q=(W+=ee)+z<I&&W>=0?W:_+z<I&&_>=0?_:ee+z<I?ee:W-j<j-_+z?I-z:0,q+=YB,H.attr("transform",AB(K-1,q-1)),H}var te=s.selectAll("g.hovertext").data(e,(function(e){return OB(e)}));return te.enter().append("g").classed("hovertext",!0).each((function(){var e=IB.select(this);e.append("rect").call(RB.fill,RB.addOpacity(o,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(GB.font,u,d)})),te.exit().remove(),te.each((function(e){var t=IB.select(this).attr("transform",""),s=e.color;Array.isArray(s)&&(s=s[e.eventData[0].pointNumber]);var l=e.bgcolor||s,c=RB.combine(RB.opacity(l)?l:RB.defaultLine,o),g=RB.combine(RB.opacity(s)?s:RB.defaultLine,o),h=e.borderColor||RB.contrast(c),f=PB(e,C,r,i,m,t),p=f[0],v=f[1],x=t.select("text.nums").call(GB.font,e.fontFamily||u,e.fontSize||d,e.fontColor||h).text(p).attr("data-notex",1).call(UB.positionText,0,0).call(UB.convertToTspans,n),B=t.select("text.name"),A=0,F=0;if(v&&v!==p){B.call(GB.font,e.fontFamily||u,e.fontSize||d,g).text(v).attr("data-notex",1).call(UB.positionText,0,0).call(UB.convertToTspans,n);var Q=aA(n,B.node());A=Q.width+2*YB,F=Q.height+2*YB}else B.remove(),t.select("rect").remove();t.select("path").style({fill:c,stroke:h});var U=e.xa._offset+(e.x0+e.x1)/2,w=e.ya._offset+(e.y0+e.y1)/2,G=Math.abs(e.x1-e.x0),R=Math.abs(e.y1-e.y0),L=aA(n,x.node()),S=L.width/i._invScaleX,V=L.height/i._invScaleY;e.ty0=(b-L.top)/i._invScaleY,e.bx=S+2*YB,e.by=Math.max(V+2*YB,F),e.anchor="start",e.txwidth=S,e.tx2width=A,e.offset=0;var Z,k,E=(S+HB+YB+A)*i._invScaleX;if(a)e.pos=U,Z=w+R/2+E<=I,k=w-R/2-E>=0,"top"!==e.idealAlign&&Z||!k?Z?(w+=R/2,e.anchor="start"):e.anchor="middle":(w-=R/2,e.anchor="end");else if(e.pos=w,Z=U+G/2+E<=y,k=U-G/2-E>=0,"left"!==e.idealAlign&&Z||!k)if(Z)U+=G/2,e.anchor="start";else{e.anchor="middle";var X=E/2,N=U+X-y,W=U-X;N>0&&(U-=N),W<0&&(U+=-W)}else U-=G/2,e.anchor="end";x.attr("text-anchor",e.anchor),A&&B.attr("text-anchor",e.anchor),t.attr("transform",AB(U,w)+(a?FB(NB):""))})),te}function PB(e,t,n,i,r,a){var o="",s="";void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=BB.templateString(e.name,e.trace._meta)),o=tA(e.name,e.nameLength));var l=n.charAt(0),c="x"===l?"y":"x";void 0!==e.zLabel?(void 0!==e.xLabel&&(s+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(s+="y: "+e.yLabel+"<br>"),"choropleth"!==e.trace.type&&"choroplethmapbox"!==e.trace.type&&(s+=(s?"z: ":"")+e.zLabel)):t&&e[l+"Label"]===r?s=e[c+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&"scattercarpet"!==e.trace.type&&(s=e.yLabel):s=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",!e.text&&0!==e.text||Array.isArray(e.text)||(s+=(s?"<br>":"")+e.text),void 0!==e.extraText&&(s+=(s?"<br>":"")+e.extraText),a&&""===s&&!e.hovertemplate&&(""===o&&a.remove(),s=o);var u=e.hovertemplate||!1;if(u){var d=e.hovertemplateLabels||e;e[l+"Label"]!==r&&(d[l+"other"]=d[l+"Val"],d[l+"otherLabel"]=d[l+"Label"]),s=(s=BB.hovertemplateString(u,d,i._d3locale,e.eventData[0]||{},e.trace._meta)).replace(JB,(function(t,n){return o=tA(n,e.nameLength),""}))}return[s,o]}function KB(e,t,n,i){var r=function(e){return e*n},a=function(e){return e*i};e.each((function(e){var n=IB.select(this);if(e.del)return n.remove();var i=n.select("text.nums"),o=e.anchor,s="end"===o?-1:1,l={start:1,end:-1,middle:0}[o],c=l*(HB+YB),u=c+l*(e.txwidth+YB),d=0,g=e.offset,h="middle"===o;h&&(c-=e.tx2width/2,u+=e.txwidth/2+YB),t&&(g*=-MB,d=e.offset*TB),n.select("path").attr("d",h?"M-"+r(e.bx/2+e.tx2width/2)+","+a(g-e.by/2)+"h"+r(e.bx)+"v"+a(e.by)+"h-"+r(e.bx)+"Z":"M0,0L"+r(s*HB+d)+","+a(HB+g)+"v"+a(e.by/2-HB)+"h"+r(s*e.bx)+"v-"+a(e.by)+"H"+r(s*HB+d)+"V"+a(g-HB)+"Z");var f=d+c,p=g+e.ty0-e.by/2+YB,m=e.textAlign||"auto";"auto"!==m&&("left"===m&&"start"!==o?(i.attr("text-anchor","start"),f=h?-e.bx/2-e.tx2width/2+YB:-e.bx-YB):"right"===m&&"end"!==o&&(i.attr("text-anchor","end"),f=h?e.bx/2-e.tx2width/2-YB:e.bx+YB)),i.call(UB.positionText,r(f),a(p)),e.tx2width&&(n.select("text.name").call(UB.positionText,r(u+l*YB+d),a(g+e.ty0-e.by/2+YB)),n.select("rect").call(GB.setRect,r(u+(l-1)*e.tx2width/2+d),a(g-e.by/2-1),r(e.tx2width),a(e.by+2)))}))}function qB(e,t){var n=e.index,i=e.trace||{},r=e.cd[0],a=e.cd[n]||{};function o(e){return e||CB(e)&&0===e}var s=Array.isArray(n)?function(e,t){var a=BB.castOption(r,n,e);return o(a)?a:BB.extractOption({},i,"",t)}:function(e,t){return BB.extractOption(a,i,e,t)};function l(t,n,i){var r=s(n,i);o(r)&&(e[t]=r)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),e.posref="y"===t||"closest"===t&&"h"===i.orientation?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=BB.constrain(e.x0,0,e.xa._length),e.x1=BB.constrain(e.x1,0,e.xa._length),e.y0=BB.constrain(e.y0,0,e.ya._length),e.y1=BB.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:SB.hoverLabelText(e.xa,e.xLabelVal,i.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:SB.hoverLabelText(e.ya,e.yLabelVal,i.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0)){var c=SB.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+c+" / -"+SB.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+="  "+c,"x"===t&&(e.distance+=1)}if(!(isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0)){var u=SB.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+u+" / -"+SB.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+="  "+u,"y"===t&&(e.distance+=1)}var d=e.hoverinfo||e.trace.hoverinfo;return d&&"all"!==d&&(-1===(d=Array.isArray(d)?d:d.split("+")).indexOf("x")&&(e.xLabel=void 0),-1===d.indexOf("y")&&(e.yLabel=void 0),-1===d.indexOf("z")&&(e.zLabel=void 0),-1===d.indexOf("text")&&(e.text=void 0),-1===d.indexOf("name")&&(e.name=void 0)),e}function $B(e,t,n){var i,r,a=n.container,o=n.fullLayout,s=o._size,l=n.event,c=!!t.hLinePoint,u=!!t.vLinePoint;if(a.selectAll(".spikeline").remove(),u||c){var d=RB.combine(o.plot_bgcolor,o.paper_bgcolor);if(c){var g,h,f=t.hLinePoint;i=f&&f.xa,"cursor"===(r=f&&f.ya).spikesnap?(g=l.pointerX,h=l.pointerY):(g=i._offset+f.x,h=r._offset+f.y);var p,m,v=xB.readability(f.color,d)<1.5?RB.contrast(d):f.color,b=r.spikemode,y=r.spikethickness,I=r.spikecolor||v,C=SB.getPxPosition(e,r);if(-1!==b.indexOf("toaxis")||-1!==b.indexOf("across")){if(-1!==b.indexOf("toaxis")&&(p=C,m=g),-1!==b.indexOf("across")){var x=r._counterDomainMin,B=r._counterDomainMax;"free"===r.anchor&&(x=Math.min(x,r.position),B=Math.max(B,r.position)),p=s.l+x*s.w,m=s.l+B*s.w}a.insert("line",":first-child").attr({x1:p,x2:m,y1:h,y2:h,"stroke-width":y,stroke:I,"stroke-dasharray":GB.dashStyle(r.spikedash,y)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:p,x2:m,y1:h,y2:h,"stroke-width":y+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==b.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:C+("right"!==r.side?y:-y),cy:h,r:y,fill:I}).classed("spikeline",!0)}if(u){var A,F,Q=t.vLinePoint;i=Q&&Q.xa,r=Q&&Q.ya,"cursor"===i.spikesnap?(A=l.pointerX,F=l.pointerY):(A=i._offset+Q.x,F=r._offset+Q.y);var U,w,G=xB.readability(Q.color,d)<1.5?RB.contrast(d):Q.color,R=i.spikemode,L=i.spikethickness,S=i.spikecolor||G,V=SB.getPxPosition(e,i);if(-1!==R.indexOf("toaxis")||-1!==R.indexOf("across")){if(-1!==R.indexOf("toaxis")&&(U=V,w=F),-1!==R.indexOf("across")){var Z=i._counterDomainMin,k=i._counterDomainMax;"free"===i.anchor&&(Z=Math.min(Z,i.position),k=Math.max(k,i.position)),U=s.t+(1-k)*s.h,w=s.t+(1-Z)*s.h}a.insert("line",":first-child").attr({x1:A,x2:A,y1:U,y2:w,"stroke-width":L,stroke:S,"stroke-dasharray":GB.dashStyle(i.spikedash,L)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:A,x2:A,y1:U,y2:w,"stroke-width":L+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)}-1!==R.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:A,cy:V-("top"!==i.side?L:-L),r:L,fill:S}).classed("spikeline",!0)}}}function eA(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function tA(e,t){return UB.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function nA(e,t,n){var i=t[e+"a"],r=t[e+"Val"],a=t.cd[0];if("category"===i.type)r=i._categoriesMap[r];else if("date"===i.type){var o=t.trace[e+"periodalignment"];if(o){var s=t.cd[t.index],l=s[e+"Start"];void 0===l&&(l=s[e]);var c=s[e+"End"];void 0===c&&(c=s[e]);var u=c-l;"end"===o?r+=u:"middle"===o&&(r+=u/2)}r=i.d2c(r)}return a&&a.t&&a.t.posLetter===i._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(r+=a.t.dPos)),r}function iA(e){return e.offsetTop+e.clientTop}function rA(e){return e.offsetLeft+e.clientLeft}function aA(e,t){var n=e._fullLayout,i=t.getBoundingClientRect(),r=i.x,a=i.y,o=r+i.width,s=a+i.height,l=BB.apply3DTransform(n._invTransform)(r,a),c=BB.apply3DTransform(n._invTransform)(o,s),u=l[0],d=l[1],g=c[0],h=c[1];return{x:u,y:d,width:g-u,height:h-d,top:Math.min(d,h),left:Math.min(u,g),right:Math.max(u,g),bottom:Math.max(d,h)}}var oA=ws.exports,sA=Hd.exports,lA=xb.isUnifiedHover,cA=function(e,t,n,i){i=i||{};var r=t.legend;function a(e){i.font[e]||(i.font[e]=r?t.legend.font[e]:t.font[e])}t&&lA(t.hovermode)&&(i.font||(i.font={}),a("size"),a("family"),a("color"),r?(i.bgcolor||(i.bgcolor=sA.combine(t.legend.bgcolor,t.paper_bgcolor)),i.bordercolor||(i.bordercolor=t.legend.bordercolor)):i.bgcolor||(i.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",i.bgcolor),n("hoverlabel.bordercolor",i.bordercolor),n("hoverlabel.namelength",i.namelength),oA.coerceFont(n,"hoverlabel.font",i.font),n("hoverlabel.align",i.align)},uA=ws.exports,dA=cA,gA=Qd,hA=ws.exports,fA=Zd,pA=cA,mA=ws.exports,vA=Qd,bA=function(e,t){function n(n,i){return void 0!==t[n]?t[n]:mA.coerce(e,t,vA,n,i)}return n("clickmode"),n("hovermode")},yA=ws.exports,IA=Qd,CA=bA,xA=cA,BA=ws.exports,AA=hg;function FA(e,t,n,i){i=i||BA.identity,Array.isArray(e)&&(t[0][n]=i(e))}var QA=hg,UA=cx.hover,wA=Gs.exports,GA=ws.exports,RA=YC.exports,LA=cx,SA={moduleType:"component",name:"fx",constants:xd,schema:{layout:Qd},attributes:Zd,layoutAttributes:Qd,supplyLayoutGlobalDefaults:function(e,t){dA(e,t,(function(n,i){return uA.coerce(e,t,gA,n,i)}))},supplyDefaults:function(e,t,n,i){var r=hA.extendFlat({},i.hoverlabel);t.hovertemplate&&(r.namelength=-1),pA(e,t,(function(n,i){return hA.coerce(e,t,fA,n,i)}),r)},supplyLayoutDefaults:function(e,t){function n(n,i){return yA.coerce(e,t,IA,n,i)}CA(e,t)&&(n("hoverdistance"),n("spikedistance")),"select"===n("dragmode")&&n("selectdirection");var i=t._has("mapbox"),r=t._has("geo"),a=t._basePlotModules.length;"zoom"===t.dragmode&&((i||r)&&1===a||i&&r&&2===a)&&(t.dragmode="pan"),xA(e,t,n),yA.coerceFont(n,"hoverlabel.grouptitlefont",t.hoverlabel.font)},calc:function(e){var t=e.calcdata,n=e._fullLayout;function i(e){return function(t){return BA.coerceHoverinfo({hoverinfo:t},{_module:e._module},n)}}for(var r=0;r<t.length;r++){var a=t[r],o=a[0].trace;if(!AA.traceIs(o,"pie-like")){var s=AA.traceIs(o,"2dMap")?FA:BA.fillArray;s(o.hoverinfo,a,"hi",i(o)),o.hovertemplate&&s(o.hovertemplate,a,"ht"),o.hoverlabel&&(s(o.hoverlabel.bgcolor,a,"hbg"),s(o.hoverlabel.bordercolor,a,"hbc"),s(o.hoverlabel.font.size,a,"hts"),s(o.hoverlabel.font.color,a,"htc"),s(o.hoverlabel.font.family,a,"htf"),s(o.hoverlabel.namelength,a,"hnl"),s(o.hoverlabel.align,a,"hta"))}}},getDistanceFunction:xb.getDistanceFunction,getClosest:xb.getClosest,inbox:xb.inbox,quadrature:xb.quadrature,appendArrayPointValue:xb.appendArrayPointValue,castHoverOption:function(e,t,n){return GA.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(e,t,n){return GA.castOption(e,n,"hoverinfo",(function(n){return GA.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)}))},hover:LA.hover,unhover:RA.unhover,loneHover:LA.loneHover,loneUnhover:function(e){var t=GA.isD3Selection(e)?e:wA.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:function(e,t,n){var i=QA.getComponentMethod("annotations","onClick")(e,e._hoverdata);function r(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&UA(e,t,n,!0),e._hoverdata&&t&&t.target&&(i&&i.then?i.then(r):r(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}};var VA={};!function(e){e.selectMode=function(e){return"lasso"===e||"select"===e},e.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},e.openMode=function(e){return"drawline"===e||"drawopenpath"===e},e.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},e.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},e.selectingOrDrawing=function(t){return e.freeMode(t)||e.rectMode(t)}}(VA);var ZA=function(e){var t=e._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each((function(e){e.regl&&e.regl.clear({color:!0,depth:!0})}))},kA={},EA={exports:{}},XA={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}},NA={},WA=function(e){var t=[];return e.replace(TA,(function(e,n,i){var r=n.toLowerCase();for(i=function(e){var t=e.match(MA);return t?t.map(Number):[]}(i),"m"==r&&i.length>2&&(t.push([n].concat(i.splice(0,2))),r="l",n="m"==n?"l":"L");;){if(i.length==_A[r])return i.unshift(n),t.push(i);if(i.length<_A[r])throw new Error("malformed path data");t.push([n].concat(i.splice(0,_A[r])))}})),t},_A={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},TA=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var MA=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;var HA={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)},YA=ws.exports.strTranslate;function DA(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}var zA={p2r:DA,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(e){var t="y"===e._id.charAt(0)?1:0;return function(n){return DA(e,n[t])}},getTransform:function(e){return YA(e.xaxis._offset,e.yaxis._offset)}};!function(e){var t=WA,n=HA.CIRCLE_SIDES,i=HA.SQRT2,r=zA.p2r,a=zA.r2p,o=[0,3,4,5,6,1,2],s=[0,3,4,1,2];function l(e,t){return Math.abs(e-t)<=1e-6}function c(e,t){var n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+i*i)}e.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",i=0;i<t;i++)for(var r=e[i].length,a=0;a<r;a++){var l=e[i][a][0];if("Z"===l)n+="Z";else for(var c=e[i][a].length,u=0;u<c;u++){var d=u;"Q"===l||"S"===l?d=s[u]:"C"===l&&(d=o[u]),n+=e[i][a][d],u>0&&u<c-1&&(n+=",")}}return n},e.readPaths=function(e,i,o,s){var l,c,u,d=t(e),g=[],h=-1,f=0,p=0,m=function(){c=f,u=p};m();for(var v=0;v<d.length;v++){var b,y,I,C,x=[],B=d[v][0],A=B;switch(B){case"M":h++,g[h]=[],f=+d[v][1],p=+d[v][2],x.push([A,f,p]),m();break;case"Q":case"S":b=+d[v][1],I=+d[v][2],f=+d[v][3],p=+d[v][4],x.push([A,f,p,b,I]);break;case"C":b=+d[v][1],I=+d[v][2],y=+d[v][3],C=+d[v][4],f=+d[v][5],p=+d[v][6],x.push([A,f,p,b,I,y,C]);break;case"T":case"L":f=+d[v][1],p=+d[v][2],x.push([A,f,p]);break;case"H":A="L",f=+d[v][1],x.push([A,f,p]);break;case"V":A="L",p=+d[v][1],x.push([A,f,p]);break;case"A":A="L";var F=+d[v][1],Q=+d[v][2];+d[v][4]||(F=-F,Q=-Q);var U=f-F,w=p;for(l=1;l<=n/2;l++){var G=2*Math.PI*l/n;x.push([A,U+F*Math.cos(G),w+Q*Math.sin(G)])}break;case"Z":f===c&&p===u||(f=c,p=u,x.push([A,f,p]))}for(var R=(o||{}).domain,L=i._fullLayout._size,S=o&&"pixel"===o.xsizemode,V=o&&"pixel"===o.ysizemode,Z=!1===s,k=0;k<x.length;k++){for(l=0;l+2<7;l+=2){var E=x[k][l+1],X=x[k][l+2];void 0!==E&&void 0!==X&&(f=E,p=X,o&&(o.xaxis&&o.xaxis.p2r?(Z&&(E-=o.xaxis._offset),E=S?a(o.xaxis,o.xanchor)+E:r(o.xaxis,E)):(Z&&(E-=L.l),R?E=R.x[0]+E/L.w:E/=L.w),o.yaxis&&o.yaxis.p2r?(Z&&(X-=o.yaxis._offset),X=V?a(o.yaxis,o.yanchor)-X:r(o.yaxis,X)):(Z&&(X-=L.t),X=R?R.y[1]-X/L.h:1-X/L.h)),x[k][l+1]=E,x[k][l+2]=X)}g[h].push(x[k].slice())}}return g},e.pointsShapeRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!l(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!l(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!l(e[0][1],e[1][1])&&!l(e[0][1],e[3][1]))&&!!(c(e[0],e[1])*c(e[0],e[3]))},e.pointsShapeEllipse=function(e){var t=e.length;if(t!==n+1)return!1;t=n;for(var i=0;i<t;i++){var r=(2*t-i)%t,a=(t/2+r)%t,o=(t/2+i)%t;if(!l(c(e[i],e[o]),c(e[r],e[a])))return!1}return!0},e.handleEllipse=function(t,r,a){if(!t)return[r,a];var o=e.ellipseOver({x0:r[0],y0:r[1],x1:a[0],y1:a[1]}),s=(o.x1+o.x0)/2,l=(o.y1+o.y0)/2,c=(o.x1-o.x0)/2,u=(o.y1-o.y0)/2;c||(c=u/=i),u||(u=c/=i);for(var d=[],g=0;g<n;g++){var h=2*g*Math.PI/n;d.push([s+c*Math.cos(h),l+u*Math.sin(h)])}return d},e.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,a=e.y1,o=r-t,s=a-n,l=((t-=o)+r)/2,c=((n-=s)+a)/2;return{x0:l-(o*=i),y0:c-(s*=i),x1:l+o,y1:c+s}}}(NA);var OA=VA.drawMode,JA=VA.openMode,jA=HA.i000,PA=HA.i090,KA=HA.i180,qA=HA.i270,$A=HA.cos45,eF=HA.sin45,tF=zA.p2r,nF=zA.r2p,iF=kp.clearSelect,rF=NA.readPaths,aF=NA.writePaths,oF=NA.ellipseOver,sF=function(e,t){if(e.length){var n=e[0][0];if(n){var i=n.getAttribute("d"),r=t.gd,a=r._fullLayout.newshape,o=t.plotinfo,s=o.xaxis,l=o.yaxis,c=!!o.domain||!o.xaxis,u=!!o.domain||!o.yaxis,d=t.isActiveShape,g=t.dragmode,h=(r.layout||{}).shapes||[];if(!OA(g)&&void 0!==d){var f=r._fullLayout._activeShapeIndex;if(f<h.length)switch(r._fullLayout.shapes[f].type){case"rect":g="drawrect";break;case"circle":g="drawcircle";break;case"line":g="drawline";break;case"path":var p=h[f].path||"";g="Z"===p[p.length-1]?"drawclosedpath":"drawopenpath"}}var m,v=JA(g),b=rF(i,r,o,d),y={editable:!0,xref:c?"paper":s._id,yref:u?"paper":l._id,layer:a.layer,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};if(v||(y.fillcolor=a.fillcolor,y.fillrule=a.fillrule),1===b.length&&(m=b[0]),m&&"drawrect"===g)y.type="rect",y.x0=m[0][1],y.y0=m[0][2],y.x1=m[2][1],y.y1=m[2][2];else if(m&&"drawline"===g)y.type="line",y.x0=m[0][1],y.y0=m[0][2],y.x1=m[1][1],y.y1=m[1][2];else if(m&&"drawcircle"===g){y.type="circle";var I=m[jA][1],C=m[PA][1],x=m[KA][1],B=m[qA][1],A=m[jA][2],F=m[PA][2],Q=m[KA][2],U=m[qA][2],w=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),G=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type);w&&(I=nF(o.xaxis,I),C=nF(o.xaxis,C),x=nF(o.xaxis,x),B=nF(o.xaxis,B)),G&&(A=nF(o.yaxis,A),F=nF(o.yaxis,F),Q=nF(o.yaxis,Q),U=nF(o.yaxis,U));var R=(C+B)/2,L=(A+Q)/2,S=oF({x0:R,y0:L,x1:R+(B-C+x-I)/2*$A,y1:L+(U-F+Q-A)/2*eF});w&&(S.x0=tF(o.xaxis,S.x0),S.x1=tF(o.xaxis,S.x1)),G&&(S.y0=tF(o.yaxis,S.y0),S.y1=tF(o.yaxis,S.y1)),y.x0=S.x0,y.y0=S.y0,y.x1=S.x1,y.y1=S.y1}else y.type="path",s&&l&&function(e,t,n){var i="date"===t.type,r="date"===n.type;if(!i&&!r)return e;for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)for(var s=0;s+2<e[a][o].length;s+=2)i&&(e[a][o][s+1]=e[a][o][s+1].replace(" ","_")),r&&(e[a][o][s+2]=e[a][o][s+2].replace(" ","_"))}(b,s,l),y.path=aF(b),m=null;iF(r);for(var V=t.editHelpers,Z=(V||{}).modifyItem,k=[],E=0;E<h.length;E++){var X=r._fullLayout.shapes[E];if(k[E]=X._input,void 0!==d&&E===r._fullLayout._activeShapeIndex){var N=y;switch(X.type){case"line":case"rect":case"circle":Z("x0",N.x0),Z("x1",N.x1),Z("y0",N.y0),Z("y1",N.y1);break;case"path":Z("path",N.path)}}}return void 0===d?(k.push(y),k):V?V.getUpdateObj():{}}}};var lF=YC.exports,cF=VA.drawMode,uF=hg,dF=HA.i000,gF=HA.i090,hF=HA.i180,fF=HA.i270,pF=kp.clearOutlineControllers,mF=NA.pointsShapeRectangle,vF=NA.pointsShapeEllipse,bF=NA.writePaths,yF=sF,IF=function e(t,n,i,r){r||(r=0);var a=i.gd;function o(){e(t,n,i,r++),vF(t[0])&&s({redrawing:!0})}function s(e){i.isActiveShape=!1;var t=yF(n,i);Object.keys(t).length&&uF.call((e||{}).redrawing?"relayout":"_guiRelayout",a,t)}var l,c,u,d,g,h=i.isActiveShape,f=a._fullLayout._zoomlayer,p=i.dragmode;(cF(p)?a._fullLayout._drawing=!0:a._fullLayout._activeShapeIndex>=0&&pF(a),n.attr("d",bF(t)),h&&!r)&&(g=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e[n]=[];for(var r=0;r<i.length;r++){e[n][r]=[];for(var a=0;a<i[r].length;a++)e[n][r][a]=i[r][a]}}return e}([],t),function(e){l=[];for(var n=0;n<t.length;n++){var i=t[n],r=!mF(i)&&vF(i);l[n]=[];for(var o=0;o<i.length;o++)if("Z"!==i[o][0]&&(!r||o===dF||o===gF||o===hF||o===fF)){var s=i[o][1],c=i[o][2],u=e.append("circle").classed("cursor-grab",!0).attr("data-i",n).attr("data-j",o).attr("cx",s).attr("cy",c).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});l[n][o]={element:u.node(),gd:a,prepFn:m,doneFn:b,clickFn:y},lF.init(l[n][o])}}}(f.append("g").attr("class","outline-controllers")),function(){if(c=[],!t.length)return;var e=0;c[e]={element:n[0][0],gd:a,prepFn:C,doneFn:x},lF.init(c[e])}());function m(e){u=+e.srcElement.getAttribute("data-i"),d=+e.srcElement.getAttribute("data-j"),l[u][d].moveFn=v}function v(e,n){if(t.length){var i=g[u][d][1],r=g[u][d][2],a=t[u],s=a.length;if(mF(a)){for(var l=0;l<s;l++)if(l!==d){var c=a[l];c[1]===a[d][1]&&(c[1]=i+e),c[2]===a[d][2]&&(c[2]=r+n)}if(a[d][1]=i+e,a[d][2]=r+n,!mF(a))for(var h=0;h<s;h++)for(var f=0;f<a[h].length;f++)a[h][f]=g[u][h][f]}else a[d][1]=i+e,a[d][2]=r+n;o()}}function b(){s()}function y(e,n){if(2===e){u=+n.srcElement.getAttribute("data-i"),d=+n.srcElement.getAttribute("data-j");var i=t[u];mF(i)||vF(i)||function(){if(t.length&&t[u]&&t[u].length){for(var e=[],n=0;n<t[u].length;n++)n!==d&&e.push(t[u][n]);e.length>1&&(2!==e.length||"Z"!==e[1][0])&&(0===d&&(e[0][0]="M"),t[u]=e,o(),s())}}()}}function I(e,n){!function(e,n){if(t.length)for(var i=0;i<t.length;i++)for(var r=0;r<t[i].length;r++)for(var a=0;a+2<t[i][r].length;a+=2)t[i][r][a+1]=g[i][r][a+1]+e,t[i][r][a+2]=g[i][r][a+2]+n}(e,n),o()}function C(e){(u=+e.srcElement.getAttribute("data-i"))||(u=0),c[u].moveFn=I}function x(){s()}};var CF={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},xF={};!function(e){var t=CF,n=ws.exports;e.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},e.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},e.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},e.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},e.extractPathCoords=function(e,i){var r=[];return e.match(t.segmentRE).forEach((function(e){var a=i[e.charAt(0)].drawn;if(void 0!==a){var o=e.substr(1).match(t.paramRE);!o||o.length<a||r.push(n.cleanNumber(o[a]))}})),r},e.getDataToPixel=function(t,n,i,r){var a,o=t._fullLayout._size;if(n)if("domain"===r)a=function(e){return n._length*(i?1-e:e)+n._offset};else{var s=e.shapePositionToRange(n);a=function(e){return n._offset+n.r2p(s(e,!0))},"date"===n.type&&(a=e.decodeDate(a))}else a=i?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e};return a},e.getPixelToData=function(t,n,i,r){var a,o=t._fullLayout._size;if(n)if("domain"===r)a=function(e){var t=(e-n._offset)/n._length;return i?1-t:t};else{var s=e.rangeToShapePosition(n);a=function(e){return s(n.p2r(e-n._offset))}}else a=i?function(e){return 1-(e-o.t)/o.h}:function(e){return(e-o.l)/o.w};return a},e.roundPositionForSharpStrokeRendering=function(e,t){var n=1===Math.round(t%2),i=Math.round(e);return n?i+.5:i},e.makeOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},i=e._fullLayout._plots[n.xref+n.yref];return!!i?i._hadPlotinfo=!0:(i={},n.xref&&"paper"!==n.xref&&(i.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(i.yaxis=e._fullLayout[n.yref+"axis"])),i.xsizemode=n.xsizemode,i.ysizemode=n.ysizemode,i.xanchor=n.xanchor,i.yanchor=n.yanchor,{options:n,plotinfo:i}}}(xF);var BF=hg,AF=ws.exports,FF=Im.exports,QF=NA.readPaths,UF=IF,wF=kp.clearOutlineControllers,GF=Hd.exports,RF=Am.exports,LF=Qp.arrayEditor,SF=YC.exports,VF=ux,ZF=CF,kF=xF,EF={draw:XF,drawOne:_F,eraseActiveShape:function(e){if(!WF(e))return;wF(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var i=[],r=0;r<n.length;r++)r!==t&&i.push(n[r]);delete e._fullLayout._activeShapeIndex,BF.call("_guiRelayout",e,{shapes:i})}}};function XF(e){var t=e._fullLayout;for(var n in t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._plots){var i=t._plots[n].shapelayer;i&&i.selectAll("path").remove()}for(var r=0;r<t.shapes.length;r++)t.shapes[r].visible&&_F(e,r)}function NF(e){return!!e._fullLayout._drawing}function WF(e){return!e._context.edits.shapePosition}function _F(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var n=kF.makeOptionsAndPlotinfo(e,t),i=n.options,r=n.plotinfo;if(i._input&&!1!==i.visible)if("below"!==i.layer)a(e._fullLayout._shapeUpperLayer);else if("paper"===i.xref||"paper"===i.yref)a(e._fullLayout._shapeLowerLayer);else{if(r._hadPlotinfo)a((r.mainplotinfo||r).shapelayer);else a(e._fullLayout._shapeLowerLayer)}function a(n){var a=MF(e,i),o={"data-index":t,"fill-rule":i.fillrule,d:a},s=i.opacity,l=i.fillcolor,c=i.line.width?i.line.color:"rgba(0,0,0,0)",u=i.line.width,d=i.line.dash;u||!0!==i.editable||(u=5,d="solid");var g="Z"!==a[a.length-1],h=WF(e)&&i.editable&&e._fullLayout._activeShapeIndex===t;h&&(l=g?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,s=e._fullLayout.activeshape.opacity);var f,p=n.append("path").attr(o).style("opacity",s).call(GF.stroke,c).call(GF.fill,l).call(RF.dashLine,d,u);if(TF(p,e,i),(h||e._context.edits.shapePosition)&&(f=LF(e.layout,"shapes",i)),h){p.style({cursor:"move"});var m={element:p.node(),plotinfo:r,gd:e,editHelpers:f,isActiveShape:!0},v=QF(a,e);UF(v,p,m)}else e._context.edits.shapePosition?function(e,t,n,i,r,a){var o,s,l,c,u,d,g,h,f,p,m,v,b,y,I,C,x=10,B=10,A="pixel"===n.xsizemode,F="pixel"===n.ysizemode,Q="line"===n.type,U="path"===n.type,w=a.modifyItem,G=FF.getFromId(e,n.xref),R=FF.getRefType(n.xref),L=FF.getFromId(e,n.yref),S=FF.getRefType(n.yref),V=kF.getDataToPixel(e,G,!1,R),Z=kF.getDataToPixel(e,L,!0,S),k=kF.getPixelToData(e,G,!1,R),E=kF.getPixelToData(e,L,!0,S),X=W(),N={element:X.node(),gd:e,prepFn:M,doneFn:H,clickFn:Y};function W(){return Q?_():t}function _(){var e=10,a=Math.max(n.line.width,e),o=r.append("g").attr("data-index",i);o.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":a,"stroke-opacity":"0"});var s={"fill-opacity":"0"},l=Math.max(a/2,e);return o.append("circle").attr({"data-line-point":"start-point",cx:A?V(n.xanchor)+n.x0:V(n.x0),cy:F?Z(n.yanchor)-n.y0:Z(n.y0),r:l}).style(s).classed("cursor-grab",!0),o.append("circle").attr({"data-line-point":"end-point",cx:A?V(n.xanchor)+n.x1:V(n.x1),cy:F?Z(n.yanchor)-n.y1:Z(n.y1),r:l}).style(s).classed("cursor-grab",!0),o}function T(n){if(NF(e))C=null;else if(Q)C="path"===n.target.tagName?"move":"start-point"===n.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var i=N.element.getBoundingClientRect(),r=i.right-i.left,a=i.bottom-i.top,o=n.clientX-i.left,s=n.clientY-i.top,l=!U&&r>x&&a>B&&!n.shiftKey?SF.getCursor(o/r,1-s/a):"move";VF(t,l),C=l.split("-")[0]}}function M(i){NF(e)||(A&&(u=V(n.xanchor)),F&&(d=Z(n.yanchor)),"path"===n.type?I=n.path:(o=A?n.x0:V(n.x0),s=F?n.y0:Z(n.y0),l=A?n.x1:V(n.x1),c=F?n.y1:Z(n.y1)),o<l?(f=o,b="x0",p=l,y="x1"):(f=l,b="x1",p=o,y="x0"),!F&&s<c||F&&s>c?(g=s,m="y0",h=c,v="y1"):(g=c,m="y1",h=s,v="y0"),T(i),O(r,n),j(t,n,e),N.moveFn="move"===C?D:z,N.altKey=i.altKey)}function H(){NF(e)||(VF(t),J(r),TF(t,e,n),BF.call("_guiRelayout",e,a.getUpdateObj()))}function Y(){NF(e)||J(r)}function D(i,a){if("path"===n.type){var g=function(e){return e},h=g,f=g;A?w("xanchor",n.xanchor=k(u+i)):(h=function(e){return k(V(e)+i)},G&&"date"===G.type&&(h=kF.encodeDate(h))),F?w("yanchor",n.yanchor=E(d+a)):(f=function(e){return E(Z(e)+a)},L&&"date"===L.type&&(f=kF.encodeDate(f))),w("path",n.path=HF(I,h,f))}else A?w("xanchor",n.xanchor=k(u+i)):(w("x0",n.x0=k(o+i)),w("x1",n.x1=k(l+i))),F?w("yanchor",n.yanchor=E(d+a)):(w("y0",n.y0=E(s+a)),w("y1",n.y1=E(c+a)));t.attr("d",MF(e,n)),O(r,n)}function z(i,a){if(U){var R=function(e){return e},S=R,X=R;A?w("xanchor",n.xanchor=k(u+i)):(S=function(e){return k(V(e)+i)},G&&"date"===G.type&&(S=kF.encodeDate(S))),F?w("yanchor",n.yanchor=E(d+a)):(X=function(e){return E(Z(e)+a)},L&&"date"===L.type&&(X=kF.encodeDate(X))),w("path",n.path=HF(I,S,X))}else if(Q){if("resize-over-start-point"===C){var N=o+i,W=F?s-a:s+a;w("x0",n.x0=A?N:k(N)),w("y0",n.y0=F?W:E(W))}else if("resize-over-end-point"===C){var _=l+i,T=F?c-a:c+a;w("x1",n.x1=A?_:k(_)),w("y1",n.y1=F?T:E(T))}}else{var M=function(e){return-1!==C.indexOf(e)},H=M("n"),Y=M("s"),D=M("w"),z=M("e"),J=H?g+a:g,j=Y?h+a:h,P=D?f+i:f,K=z?p+i:p;F&&(H&&(J=g-a),Y&&(j=h-a)),(!F&&j-J>B||F&&J-j>B)&&(w(m,n[m]=F?J:E(J)),w(v,n[v]=F?j:E(j))),K-P>x&&(w(b,n[b]=A?P:k(P)),w(y,n[y]=A?K:k(K)))}t.attr("d",MF(e,n)),O(r,n)}function O(e,t){function n(){var n="path"!==t.type,i=e.selectAll(".visual-cue").data([0]),r=1;i.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":r}).classed("visual-cue",!0);var a=V(A?t.xanchor:AF.midRange(n?[t.x0,t.x1]:kF.extractPathCoords(t.path,ZF.paramIsX))),o=Z(F?t.yanchor:AF.midRange(n?[t.y0,t.y1]:kF.extractPathCoords(t.path,ZF.paramIsY)));if(a=kF.roundPositionForSharpStrokeRendering(a,r),o=kF.roundPositionForSharpStrokeRendering(o,r),A&&F){var s="M"+(a-1-r)+","+(o-1-r)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";i.attr("d",s)}else if(A){var l="M"+(a-1-r)+","+(o-9-r)+"v18 h2 v-18 Z";i.attr("d",l)}else{var c="M"+(a-9-r)+","+(o-1-r)+"h18 v2 h-18 Z";i.attr("d",c)}}(A||F)&&n()}function J(e){e.selectAll(".visual-cue").remove()}function j(e,t,n){var i=t.xref,r=t.yref,a=FF.getFromId(n,i),o=FF.getFromId(n,r),s="";"paper"===i||a.autorange||(s+=i),"paper"===r||o.autorange||(s+=r),RF.setClipUrl(e,s?"clip"+n._fullLayout._uid+s:null,n)}SF.init(N),X.node().onmousemove=T}(e,p,i,t,n,f):!0===i.editable&&p.style("pointer-events",g||GF.opacity(l)*s<=.5?"stroke":"all");p.node().addEventListener("click",(function(){return function(e,t){if(!WF(e))return;var n=+t.node().getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeShapeIndex)return void YF(e);e._fullLayout._activeShapeIndex=n,e._fullLayout._deactivateShape=YF,XF(e)}}(e,p)}))}}function TF(e,t,n){var i=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");RF.setClipUrl(e,i?"clip"+t._fullLayout._uid+i:null,t)}function MF(e,t){var n,i,r,a,o,s,l,c,u=t.type,d=FF.getRefType(t.xref),g=FF.getRefType(t.yref),h=FF.getFromId(e,t.xref),f=FF.getFromId(e,t.yref),p=e._fullLayout._size;if(h?"domain"===d?i=function(e){return h._offset+h._length*e}:(n=kF.shapePositionToRange(h),i=function(e){return h._offset+h.r2p(n(e,!0))}):i=function(e){return p.l+p.w*e},f?"domain"===g?a=function(e){return f._offset+f._length*(1-e)}:(r=kF.shapePositionToRange(f),a=function(e){return f._offset+f.r2p(r(e,!0))}):a=function(e){return p.t+p.h*(1-e)},"path"===u)return h&&"date"===h.type&&(i=kF.decodeDate(i)),f&&"date"===f.type&&(a=kF.decodeDate(a)),function(e,t,n){var i=e.path,r=e.xsizemode,a=e.ysizemode,o=e.xanchor,s=e.yanchor;return i.replace(ZF.segmentRE,(function(e){var i=0,l=e.charAt(0),c=ZF.paramIsX[l],u=ZF.paramIsY[l],d=ZF.numParams[l],g=e.substr(1).replace(ZF.paramRE,(function(e){return c[i]?e="pixel"===r?t(o)+Number(e):t(e):u[i]&&(e="pixel"===a?n(s)-Number(e):n(e)),++i>d&&(e="X"),e}));return i>d&&(g=g.replace(/[\s,]*X.*/,""),AF.log("Ignoring extra params in segment "+e)),l+g}))}(t,i,a);if("pixel"===t.xsizemode){var m=i(t.xanchor);o=m+t.x0,s=m+t.x1}else o=i(t.x0),s=i(t.x1);if("pixel"===t.ysizemode){var v=a(t.yanchor);l=v-t.y0,c=v-t.y1}else l=a(t.y0),c=a(t.y1);if("line"===u)return"M"+o+","+l+"L"+s+","+c;if("rect"===u)return"M"+o+","+l+"H"+s+"V"+c+"H"+o+"Z";var b=(o+s)/2,y=(l+c)/2,I=Math.abs(b-o),C=Math.abs(y-l),x="A"+I+","+C,B=b+I+","+y;return"M"+B+x+" 0 1,1 "+(b+","+(y-C))+x+" 0 0,1 "+B+"Z"}function HF(e,t,n){return e.replace(ZF.segmentRE,(function(e){var i=0,r=e.charAt(0),a=ZF.paramIsX[r],o=ZF.paramIsY[r],s=ZF.numParams[r];return r+e.substr(1).replace(ZF.paramRE,(function(e){return i>=s||(a[i]?e=t(e):o[i]&&(e=n(e)),i++),e}))}))}function YF(e){WF(e)&&(e._fullLayout._activeShapeIndex>=0&&(wF(e),delete e._fullLayout._activeShapeIndex,XF(e)))}var DF=hg,zF=Fp.exports,OF=Sp,JF=XA,jF=EF.eraseActiveShape,PF=ws.exports,KF=PF._,qF=EA.exports={};function $F(e,t){var n,i,r=t.currentTarget,a=r.getAttribute("data-attr"),o=r.getAttribute("data-val")||!0,s=e._fullLayout,l={},c=OF.list(e,null,!0),u=s._cartesianSpikesEnabled;if("zoom"===a){var d,g="in"===o?.5:2,h=(1+g)/2,f=(1-g)/2;for(i=0;i<c.length;i++)if(!(n=c[i]).fixedrange)if(d=n._name,"auto"===o)l[d+".autorange"]=!0;else if("reset"===o){if(void 0===n._rangeInitial)l[d+".autorange"]=!0;else{var p=n._rangeInitial.slice();l[d+".range[0]"]=p[0],l[d+".range[1]"]=p[1]}void 0!==n._showSpikeInitial&&(l[d+".showspikes"]=n._showSpikeInitial,"on"!==u||n._showSpikeInitial||(u="off"))}else{var m=[n.r2l(n.range[0]),n.r2l(n.range[1])],v=[h*m[0]+f*m[1],h*m[1]+f*m[0]];l[d+".range[0]"]=n.l2r(v[0]),l[d+".range[1]"]=n.l2r(v[1])}}else"hovermode"!==a||"x"!==o&&"y"!==o||(o=s._isHoriz?"y":"x",r.setAttribute("data-val",o)),l[a]=o;s._cartesianSpikesEnabled=u,DF.call("_guiRelayout",e,l)}function eQ(e,t){for(var n=t.currentTarget,i=n.getAttribute("data-attr"),r=n.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],o={},s=i.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=r;var c="pan"===r?r:"zoom";o.dragmode=c,DF.call("_guiRelayout",e,o)}function tQ(e,t){for(var n=t.currentTarget.getAttribute("data-attr"),i="resetLastSave"===n,r="resetDefault"===n,a=e._fullLayout,o=a._subplots.gl3d||[],s={},l=0;l<o.length;l++){var c,u=o[l],d=u+".camera",g=u+".aspectratio",h=u+".aspectmode",f=a[u]._scene;i?(s[d+".up"]=f.viewInitial.up,s[d+".eye"]=f.viewInitial.eye,s[d+".center"]=f.viewInitial.center,c=!0):r&&(s[d+".up"]=null,s[d+".eye"]=null,s[d+".center"]=null,c=!0),c&&(s[g+".x"]=f.viewInitial.aspectratio.x,s[g+".y"]=f.viewInitial.aspectratio.y,s[g+".z"]=f.viewInitial.aspectratio.z,s[h]=f.viewInitial.aspectmode)}DF.call("_guiRelayout",e,s)}function nQ(e,t){var n=t.currentTarget,i=n._previousVal,r=e._fullLayout,a=r._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(i)l=i,n._previousVal=null;else{for(var c=0;c<a.length;c++){var u=a[c],d=r[u],g=u+".hovermode";s[g]=d.hovermode,l[g]=!1;for(var h=0;h<3;h++){var f=o[h],p=u+"."+f+".showspikes";l[p]=!1,s[p]=d[f].showspikes}}n._previousVal=s}return l}function iQ(e,t){for(var n=t.currentTarget,i=n.getAttribute("data-attr"),r=n.getAttribute("data-val")||!0,a=e._fullLayout,o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],c=a[l];if("zoom"===i){var u=c.projection.scale,d="in"===r?2*u:.5*u;DF.call("_guiRelayout",e,l+".projection.scale",d)}}"reset"===i&&sQ(e,"geo")}function rQ(e){var t=e._fullLayout;return!t.hovermode&&(t._has("cartesian")?t._isHoriz?"y":"x":"closest")}function aQ(e){var t=rQ(e);DF.call("_guiRelayout",e,"hovermode",t)}function oQ(e,t){for(var n=t.currentTarget.getAttribute("data-val"),i=e._fullLayout,r=i._subplots.mapbox||[],a={},o=0;o<r.length;o++){var s=r[o],l=i[s].zoom,c="in"===n?1.05*l:l/1.05;a[s+".zoom"]=c}DF.call("_guiRelayout",e,a)}function sQ(e,t){for(var n=e._fullLayout,i=n._subplots[t]||[],r={},a=0;a<i.length;a++)for(var o=i[a],s=n[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];r[o+"."+u]=s[u]}DF.call("_guiRelayout",e,r)}qF.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return KF(e,"png"===t?"Download plot as a png":"Download plot")},icon:JF.camera,click:function(e){var t=e._context.toImageButtonOptions,n={format:t.format||"png"};PF.notifier(KF(e,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&PF.isIE()&&(PF.notifier(KF(e,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach((function(e){e in t&&(n[e]=t[e])})),DF.call("downloadImage",e,n).then((function(t){PF.notifier(KF(e,"Snapshot succeeded")+" - "+t,"long")})).catch((function(){PF.notifier(KF(e,"Sorry, there was a problem downloading your snapshot!"),"long")}))}},qF.sendDataToCloud={name:"sendDataToCloud",title:function(e){return KF(e,"Edit in Chart Studio")},icon:JF.disk,click:function(e){zF.sendDataToCloud(e)}},qF.editInChartStudio={name:"editInChartStudio",title:function(e){return KF(e,"Edit in Chart Studio")},icon:JF.pencil,click:function(e){zF.sendDataToCloud(e)}},qF.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return KF(e,"Zoom")},attr:"dragmode",val:"zoom",icon:JF.zoombox,click:$F},qF.pan2d={name:"pan2d",_cat:"pan",title:function(e){return KF(e,"Pan")},attr:"dragmode",val:"pan",icon:JF.pan,click:$F},qF.select2d={name:"select2d",_cat:"select",title:function(e){return KF(e,"Box Select")},attr:"dragmode",val:"select",icon:JF.selectbox,click:$F},qF.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return KF(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:JF.lasso,click:$F},qF.drawclosedpath={name:"drawclosedpath",title:function(e){return KF(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:JF.drawclosedpath,click:$F},qF.drawopenpath={name:"drawopenpath",title:function(e){return KF(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:JF.drawopenpath,click:$F},qF.drawline={name:"drawline",title:function(e){return KF(e,"Draw line")},attr:"dragmode",val:"drawline",icon:JF.drawline,click:$F},qF.drawrect={name:"drawrect",title:function(e){return KF(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:JF.drawrect,click:$F},qF.drawcircle={name:"drawcircle",title:function(e){return KF(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:JF.drawcircle,click:$F},qF.eraseshape={name:"eraseshape",title:function(e){return KF(e,"Erase active shape")},icon:JF.eraseshape,click:jF},qF.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return KF(e,"Zoom in")},attr:"zoom",val:"in",icon:JF.zoom_plus,click:$F},qF.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return KF(e,"Zoom out")},attr:"zoom",val:"out",icon:JF.zoom_minus,click:$F},qF.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return KF(e,"Autoscale")},attr:"zoom",val:"auto",icon:JF.autoscale,click:$F},qF.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return KF(e,"Reset axes")},attr:"zoom",val:"reset",icon:JF.home,click:$F},qF.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return KF(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:JF.tooltip_basic,gravity:"ne",click:$F},qF.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return KF(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:JF.tooltip_compare,gravity:"ne",click:$F},qF.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return KF(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:JF.zoombox,click:eQ},qF.pan3d={name:"pan3d",_cat:"pan",title:function(e){return KF(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:JF.pan,click:eQ},qF.orbitRotation={name:"orbitRotation",title:function(e){return KF(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:JF["3d_rotate"],click:eQ},qF.tableRotation={name:"tableRotation",title:function(e){return KF(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:JF["z-axis"],click:eQ},qF.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return KF(e,"Reset camera to default")},attr:"resetDefault",icon:JF.home,click:tQ},qF.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return KF(e,"Reset camera to last save")},attr:"resetLastSave",icon:JF.movie,click:tQ},qF.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return KF(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:JF.tooltip_basic,gravity:"ne",click:function(e,t){var n=nQ(e,t);DF.call("_guiRelayout",e,n)}},qF.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return KF(e,"Zoom in")},attr:"zoom",val:"in",icon:JF.zoom_plus,click:iQ},qF.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return KF(e,"Zoom out")},attr:"zoom",val:"out",icon:JF.zoom_minus,click:iQ},qF.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return KF(e,"Reset")},attr:"reset",val:null,icon:JF.autoscale,click:iQ},qF.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return KF(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:JF.tooltip_basic,gravity:"ne",click:aQ},qF.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return KF(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:JF.tooltip_basic,gravity:"ne",click:aQ},qF.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return KF(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:JF.tooltip_basic,gravity:"ne",click:aQ},qF.resetViewSankey={name:"resetSankeyGroup",title:function(e){return KF(e,"Reset view")},icon:JF.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var i=e._fullData[n]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}DF.call("restyle",e,t)}},qF.toggleHover={name:"toggleHover",title:function(e){return KF(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:JF.tooltip_basic,gravity:"ne",click:function(e,t){var n=nQ(e,t);n.hovermode=rQ(e),DF.call("_guiRelayout",e,n)}},qF.resetViews={name:"resetViews",title:function(e){return KF(e,"Reset views")},icon:JF.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),$F(e,t),n.setAttribute("data-attr","resetLastSave"),tQ(e,t),sQ(e,"geo"),sQ(e,"mapbox")}},qF.toggleSpikelines={name:"toggleSpikelines",title:function(e){return KF(e,"Toggle Spike Lines")},icon:JF.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",DF.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=OF.list(e,null,!0),i={},r=0;r<n.length;r++){var a=n[r];i[a._name+".showspikes"]=!!t||a._showSpikeInitial}return i}(e))}},qF.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return KF(e,"Reset view")},attr:"reset",icon:JF.home,click:function(e){sQ(e,"mapbox")}},qF.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return KF(e,"Zoom in")},attr:"zoom",val:"in",icon:JF.zoom_plus,click:oQ},qF.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return KF(e,"Zoom out")},attr:"zoom",val:"out",icon:JF.zoom_minus,click:oQ};var lQ=EA.exports,cQ=Object.keys(lQ),uQ=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],dQ=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(uQ),gQ=[];cQ.forEach((function(e){!function(e){if(-1===dQ.indexOf(e._cat||e.name)){var t=e.name,n=(e._cat||e.name).toLowerCase();-1===gQ.indexOf(t)&&gQ.push(t),-1===gQ.indexOf(n)&&gQ.push(n)}}(lQ[e])})),gQ.sort();var hQ={DRAW_MODES:uQ,backButtons:dQ,foreButtons:gQ},fQ=hQ,pQ={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+fQ.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+fQ.foreButtons.join("*, *")+"*."].join(" ")}},mQ=ws.exports,vQ=Hd.exports,bQ=Qp,yQ=pQ,IQ=Gs.exports,CQ=Yu,xQ=ws.exports,BQ=XA,AQ=Us.version,FQ=new DOMParser;function QQ(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var UQ=QQ.prototype;UQ.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,i=this.graphInfo._fullLayout,r="modebar-"+i._uid;this.element.setAttribute("id",r),this._uid=r,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===i.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse());var a=i.modebar,o="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";xQ.deleteRelatedStyleRule(r),xQ.addRelatedStyleRule(r,o+"#"+r+" .modebar-group","background-color: "+a.bgcolor),xQ.addRelatedStyleRule(r,"#"+r+" .modebar-btn .icon path","fill: "+a.color),xQ.addRelatedStyleRule(r,"#"+r+" .modebar-btn:hover .icon path","fill: "+a.activecolor),xQ.addRelatedStyleRule(r,"#"+r+" .modebar-btn.active .icon path","fill: "+a.activecolor);var s=!this.hasButtons(t),l=this.hasLogo!==n.displaylogo,c=this.locale!==n.locale;if(this.locale=n.locale,(s||l||c)&&(this.removeAllButtons(),this.updateButtons(t),n.watermark||n.displaylogo)){var u=this.getLogo();n.watermark&&(u.className=u.className+" watermark"),"v"===i.modebar.orientation?this.element.insertBefore(u,this.element.childNodes[0]):this.element.appendChild(u),this.hasLogo=!0}this.updateActiveButton()},UQ.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach((function(e){var n=t.createGroup();e.forEach((function(e){var i=e.name;if(!i)throw new Error("must provide button 'name' in button config");if(-1!==t.buttonsNames.indexOf(i))throw new Error("button name '"+i+"' is taken");t.buttonsNames.push(i);var r=t.createButton(e);t.buttonElements.push(r),n.appendChild(r)})),t.element.appendChild(n)}))},UQ.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},UQ.createButton=function(e){var t=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=e.title;void 0===i?i=e.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&n.setAttribute("data-title",i),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var r=e.val;if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),n.setAttribute("data-val",r)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",(function(n){e.click(t.graphInfo,n),t.updateActiveButton(n.currentTarget)})),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&IQ.select(n).classed("active",!0);var a=e.icon;return"function"==typeof a?n.appendChild(a()):n.appendChild(this.createIcon(a||BQ.question)),n.setAttribute("data-gravity",e.gravity||"n"),n},UQ.createIcon=function(e){var t,n=CQ(e.height)?Number(e.height):e.ascent-e.descent,i="http://www.w3.org/2000/svg";if(e.path){(t=document.createElementNS(i,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon");var r=document.createElementNS(i,"path");r.setAttribute("d",e.path),e.transform?r.setAttribute("transform",e.transform):void 0!==e.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(r)}e.svg&&(t=FQ.parseFromString(e.svg,"application/xml").childNodes[0]);return t.setAttribute("height","1em"),t.setAttribute("width","1em"),t},UQ.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach((function(e){var i=e.getAttribute("data-val")||!0,r=e.getAttribute("data-attr"),a="true"===e.getAttribute("data-toggle"),o=IQ.select(e);if(a)r===n&&o.classed("active",!o.classed("active"));else{var s=null===r?r:xQ.nestedProperty(t,r).get();o.classed("active",s===i)}}))},UQ.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var i=0;i<e[n].length;i++)if(e[n][i].name!==t[n][i].name)return!1}return!0},UQ.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",function(e){return e+" (v"+AQ+")"}(xQ._(this.graphInfo,"Produced with Plotly.js"))),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(BQ.newplotlylogo)),e.appendChild(t),e},UQ.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},UQ.destroy=function(){xQ.removeElement(this.container.querySelector(".modebar")),xQ.deleteRelatedStyleRule(this._uid)};var wQ=function(e,t){var n=e._fullLayout,i=new QQ({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&IQ.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i},GQ=Sp,RQ=yb,LQ=hg,SQ=xb.isUnifiedHover,VQ=wQ,ZQ=EA.exports,kQ=hQ.DRAW_MODES;var EQ={moduleType:"component",name:"modebar",layoutAttributes:pQ,supplyLayoutDefaults:function(e,t){var n=e.modebar||{},i=bQ.newContainer(t,"modebar");function r(e,t){return mQ.coerce(n,i,yQ,e,t)}r("orientation"),r("bgcolor",vQ.addOpacity(t.paper_bgcolor,.5));var a=vQ.contrast(vQ.rgb(t.modebar.bgcolor));r("color",vQ.addOpacity(a,.3)),r("activecolor",vQ.addOpacity(a,.7)),r("uirevision",t.uirevision),r("add"),r("remove")},manage:function(e){var t=e._fullLayout,n=e._context,i=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var r,a=n.modeBarButtons;r=Array.isArray(a)&&a.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],i=0;i<n.length;i++){var r=n[i];if("string"==typeof r){if(void 0===ZQ[r])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][i]=ZQ[r]}}return e}(a):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,i=e._context;function r(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return!0}else{var n=t.name,i=t._cat||t.name;if(n===e||i===e.toLowerCase())return!0}return!1}var a=t.modebar.add;"string"==typeof a&&(a=[a]);var o=t.modebar.remove;"string"==typeof o&&(o=[o]);var s=i.modeBarButtonsToAdd.concat(a.filter((function(e){for(var t=0;t<i.modeBarButtonsToRemove.length;t++)if(r(e,i.modeBarButtonsToRemove[t]))return!1;return!0}))),l=i.modeBarButtonsToRemove.concat(o.filter((function(e){for(var t=0;t<i.modeBarButtonsToAdd.length;t++)if(r(e,i.modeBarButtonsToAdd[t]))return!1;return!0}))),c=t._has("cartesian"),u=t._has("gl3d"),d=t._has("geo"),g=t._has("pie"),h=t._has("funnelarea"),f=t._has("gl2d"),p=t._has("ternary"),m=t._has("mapbox"),v=t._has("polar"),b=t._has("smith"),y=t._has("sankey"),I=function(e){for(var t=GQ.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),C=SQ(t.hovermode),x=[];function B(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var i=e[n],r=ZQ[i],a=r.name.toLowerCase(),o=(r._cat||r.name).toLowerCase(),s=!1,c=0;c<l.length;c++){var u=l[c].toLowerCase();if(u===a||u===o){s=!0;break}}s||t.push(ZQ[i])}x.push(t)}}var A=["toImage"];i.showEditInChartStudio?A.push("editInChartStudio"):i.showSendToCloud&&A.push("sendDataToCloud");B(A);var F=[],Q=[],U=[],w=[];(c||f||g||h||p)+d+u+m+v+b>1?(Q=["toggleHover"],U=["resetViews"]):d?(F=["zoomInGeo","zoomOutGeo"],Q=["hoverClosestGeo"],U=["resetGeo"]):u?(Q=["hoverClosest3d"],U=["resetCameraDefault3d","resetCameraLastSave3d"]):m?(F=["zoomInMapbox","zoomOutMapbox"],Q=["toggleHover"],U=["resetViewMapbox"]):f?Q=["hoverClosestGl2d"]:g?Q=["hoverClosestPie"]:y?(Q=["hoverClosestCartesian","hoverCompareCartesian"],U=["resetViewSankey"]):Q=["toggleHover"];c&&(Q=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(e){for(var t=0;t<e.length;t++)if(!LQ.traceIs(e[t],"noHover"))return!1;return!0}(n)||C)&&(Q=[]);!c&&!f||I||(F=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==U[0]&&(U=["resetScale2d"]));u?w=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||f)&&!I||p?w=["zoom2d","pan2d"]:m||d?w=["pan2d"]:v&&(w=["zoom2d"]);(function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var i=e[n];i._module&&i._module.selectPoints&&(LQ.traceIs(i,"scatter-like")?(RQ.hasMarkers(i)||RQ.hasText(i))&&(t=!0):LQ.traceIs(i,"box-violin")&&"all"!==i.boxpoints&&"all"!==i.points||(t=!0))}return t})(n)&&w.push("select2d","lasso2d");var G=[],R=function(e){-1===G.indexOf(e)&&-1!==Q.indexOf(e)&&G.push(e)};if(Array.isArray(s)){for(var L=[],S=0;S<s.length;S++){var V=s[S];"string"==typeof V?(V=V.toLowerCase(),-1!==kQ.indexOf(V)?(t._has("mapbox")||t._has("cartesian"))&&w.push(V):"togglespikelines"===V?R("toggleSpikelines"):"togglehover"===V?R("toggleHover"):"hovercompare"===V?R("hoverCompareCartesian"):"hoverclosest"===V?(R("hoverClosestCartesian"),R("hoverClosestGeo"),R("hoverClosest3d"),R("hoverClosestGl2d"),R("hoverClosestPie")):"v1hovermode"===V&&(R("toggleHover"),R("hoverClosestCartesian"),R("hoverCompareCartesian"),R("hoverClosestGeo"),R("hoverClosest3d"),R("hoverClosestGl2d"),R("hoverClosestPie"))):L.push(V)}s=L}return B(w),B(F.concat(U)),B(G),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(x,s)}(e),i?i.update(e,r):t._modeBar=VQ(e,r)}else i&&(i.destroy(),delete t._modeBar)}},XQ={},NQ=Bm.FROM_BL,WQ=function(e,t,n){void 0===n&&(n=NQ[e.constraintoward||"center"]);var i=[e.r2l(e.range[0]),e.r2l(e.range[1])],r=i[0]+(i[1]-i[0])*n;e.range=e._input.range=[e.l2r(r+(i[0]-r)*t),e.l2r(r+(i[1]-r)*t)],e.setScale()},_Q=ws.exports,TQ=lI,MQ=Sp.id2name,HQ=nv,YQ=WQ,DQ=Hy,zQ=Du.ALMOST_EQUAL,OQ=Bm.FROM_BL;function JQ(e,t,n){var i=n.axIds,r=n.layoutOut,a=n.hasImage,o=r._axisConstraintGroups,s=r._axisMatchGroups,l=t._id,c=l.charAt(0),u=((r._splomAxes||{})[c]||{})[l]||{},d=t._id,g="x"===d.charAt(0);function h(n,i){return _Q.coerce(e,t,HQ,n,i)}t._matchGroup=null,t._constraintGroup=null,h("constrain",a?"domain":"range"),_Q.coerce(e,t,{constraintoward:{valType:"enumerated",values:g?["left","center","right"]:["bottom","middle","top"],dflt:g?"center":"middle"}},"constraintoward");var f,p,m=t.type,v=[];for(f=0;f<i.length;f++){if((p=i[f])!==d)r[MQ(p)].type===m&&v.push(p)}var b=PQ(o,d);if(b){var y=[];for(f=0;f<v.length;f++)b[p=v[f]]||y.push(p);v=y}var I,C,x=v.length;x&&(e.matches||u.matches)&&(I=_Q.coerce(e,t,{matches:{valType:"enumerated",values:v,dflt:-1!==v.indexOf(u.matches)?u.matches:void 0}},"matches"));var B=a&&!g?t.anchor:void 0;if(x&&!I&&(e.scaleanchor||B)&&(C=_Q.coerce(e,t,{scaleanchor:{valType:"enumerated",values:v}},"scaleanchor",B)),I){t._matchGroup=KQ(s,d,I,1);var A=r[MQ(I)],F=jQ(r,t)/jQ(r,A);g!==("x"===I.charAt(0))&&(F=(g?"x":"y")+F),KQ(o,d,I,F)}else e.matches&&-1!==i.indexOf(e.matches)&&_Q.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(C){var Q=h("scaleratio");Q||(Q=t.scaleratio=1),KQ(o,d,C,Q)}else e.scaleanchor&&-1!==i.indexOf(e.scaleanchor)&&_Q.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function jQ(e,t){var n=t.domain;return n||(n=e[MQ(t.overlaying)].domain),n[1]-n[0]}function PQ(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function KQ(e,t,n,i){var r,a,o,s,l,c=PQ(e,t);null===c?((c={})[t]=1,l=e.length,e.push(c)):l=e.indexOf(c);var u=Object.keys(c);for(r=0;r<e.length;r++)if(o=e[r],r!==l&&o[n]){var d=o[n];for(a=0;a<u.length;a++)o[s=u[a]]=qQ(d,qQ(i,c[s]));return void e.splice(l,1)}if(1!==i)for(a=0;a<u.length;a++){var g=u[a];c[g]=qQ(i,c[g])}c[n]=1}function qQ(e,t){var n,i,r="",a="";"string"==typeof e&&(n=(r=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(i=(a=t.match(/^[xy]*/)[0]).length,t=+t.substr(i));var o=e*t;return n||i?n&&i&&r.charAt(0)!==a.charAt(0)?n===i?o:(n>i?r.substr(i):a.substr(n))+o:r+a+e*t:o}function $Q(e,t){for(var n=t._size,i=n.h/n.w,r={},a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],l=e[s];if("string"==typeof l){var c=l.match(/^[xy]*/)[0],u=c.length;l=+l.substr(u);for(var d="y"===c.charAt(0)?i:1/i,g=0;g<u;g++)l*=d}r[s]=l}return r}function eU(e,t){var n=e._inputDomain,i=OQ[e.constraintoward],r=n[0]+(n[1]-n[0])*i;e.domain=e._input.domain=[r+(n[0]-r)/t,r+(n[1]-r)/t],e.setScale()}XQ.handleDefaults=function(e,t,n){var i,r,a,o,s,l,c,u,d=n.axIds,g=n.axHasImage,h=t._axisConstraintGroups=[],f=t._axisMatchGroups=[];for(i=0;i<d.length;i++)JQ(s=e[o=MQ(d[i])],l=t[o],{axIds:d,layoutOut:t,hasImage:g[o]});function p(e,n){for(i=0;i<e.length;i++)for(a in r=e[i])t[MQ(a)][n]=r}for(p(f,"_matchGroup"),i=0;i<h.length;i++)for(a in r=h[i])if((l=t[MQ(a)]).fixedrange){for(var m in r){var v=MQ(m);!1===(e[v]||{}).fixedrange&&_Q.warn("fixedrange was specified as false for axis "+v+" but was overridden because another axis in its constraint group has fixedrange true"),t[v].fixedrange=!0}break}for(i=0;i<h.length;){for(a in r=h[i]){(l=t[MQ(a)])._matchGroup&&Object.keys(l._matchGroup).length===Object.keys(r).length&&(h.splice(i,1),i--);break}i++}p(h,"_constraintGroup");var b=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],y=!1,I=!1;function C(){u=l[c],"rangebreaks"===c&&(I=l._hasDayOfWeekBreaks)}for(i=0;i<f.length;i++){r=f[i];for(var x=0;x<b.length;x++){var B;for(a in c=b[x],u=null,r)if(s=e[o=MQ(a)],l=t[o],c in l){if(!l.matches&&(B=l,c in s)){C();break}null===u&&c in s&&C()}if("range"===c&&u&&(y=!0),"autorange"===c&&null===u&&y&&(u=!1),null===u&&c in B&&(u=B[c]),null!==u)for(a in r)(l=t[MQ(a)])[c]="range"===c?u.slice():u,"rangebreaks"===c&&(l._hasDayOfWeekBreaks=I,DQ(l,t))}}},XQ.enforce=function(e){var t,n,i,r,a,o,s,l,c=e._fullLayout,u=c._axisConstraintGroups||[];for(t=0;t<u.length;t++){i=$Q(u[t],c);var d=Object.keys(i),g=1/0,h=0,f=1/0,p={},m={},v=!1;for(n=0;n<d.length;n++)m[r=d[n]]=a=c[MQ(r)],a._inputDomain?a.domain=a._inputDomain.slice():a._inputDomain=a.domain.slice(),a._inputRange||(a._inputRange=a.range.slice()),a.setScale(),p[r]=o=Math.abs(a._m)/i[r],g=Math.min(g,o),"domain"!==a.constrain&&a._constraintShrinkable||(f=Math.min(f,o)),delete a._constraintShrinkable,h=Math.max(h,o),"domain"===a.constrain&&(v=!0);if(!(g>zQ*h)||v)for(n=0;n<d.length;n++)if(o=p[r=d[n]],s=(a=m[r]).constrain,o!==f||"domain"===s)if(l=o/f,"range"===s)YQ(a,l);else{var b=a._inputDomain,y=(a.domain[1]-a.domain[0])/(b[1]-b[0]),I=(a.r2l(a.range[1])-a.r2l(a.range[0]))/(a.r2l(a._inputRange[1])-a.r2l(a._inputRange[0]));if((l/=y)*I<1){a.domain=a._input.domain=b.slice(),YQ(a,l);continue}if(I<1&&(a.range=a._input.range=a._inputRange.slice(),l*=I),a.autorange){var C=a.r2l(a.range[0]),x=a.r2l(a.range[1]),B=(C+x)/2,A=B,F=B,Q=Math.abs(x-B),U=B-Q*l*1.0001,w=B+Q*l*1.0001,G=TQ.makePadFn(c,a,0),R=TQ.makePadFn(c,a,1);eU(a,l);var L,S,V=Math.abs(a._m),Z=TQ.concatExtremes(e,a),k=Z.min,E=Z.max;for(S=0;S<k.length;S++)(L=k[S].val-G(k[S])/V)>U&&L<A&&(A=L);for(S=0;S<E.length;S++)(L=E[S].val+R(E[S])/V)<w&&L>F&&(F=L);l/=(F-A)/(2*Q),A=a.l2r(A),F=a.l2r(F),a.range=a._input.range=C<x?[A,F]:[F,A]}eU(a,l)}}},XQ.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,i=0;i<n.length;i++){if(n[i][t])return"g"+i}return t},XQ.clean=function(e,t){if(t._inputDomain){for(var n=!1,i=t._id,r=e._fullLayout._axisConstraintGroups,a=0;a<r.length;a++)if(r[a][i]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}},function(e){var t=Gs.exports,n=hg,i=Fp.exports,r=ws.exports,a=ZA,o=Hd.exports,s=Am.exports,l=by,c=EQ,u=Im.exports,d=Bm,g=XQ,h=g.enforce,f=g.clean,p=lI.doAutoRange,m="start",v="middle",b="end";function y(e,t,n){for(var i=0;i<n.length;i++){var r=n[i][0],a=n[i][1];if(!(r[0]>=e[1]||r[1]<=e[0])&&(a[0]<t[1]&&a[1]>t[0]))return!0}return!1}function I(n){var a,l,g,h,f,p,m=n._fullLayout,v=m._size,b=v.p,I=u.list(n,"",!0);if(m._paperdiv.style({width:n._context.responsive&&m.autosize&&!n._context._hasZeroWidth&&!n.layout.width?"100%":m.width+"px",height:n._context.responsive&&m.autosize&&!n._context._hasZeroHeight&&!n.layout.height?"100%":m.height+"px"}).selectAll(".main-svg").call(s.setSize,m.width,m.height),n._context.setBackground(n,m.paper_bgcolor),e.drawMainTitle(n),c.manage(n),!m._has("cartesian"))return i.previousPromises(n);function x(e,t,n){var i=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-b-i:t._offset+t._length+b+i:v.t+v.h*(1-(e.position||0))+i%1:t?"right"===n?t._offset+t._length+b+i:t._offset-b-i:v.l+v.w*(e.position||0)+i%1}for(a=0;a<I.length;a++){var A=(h=I[a])._anchorAxis;h._linepositions={},h._lw=s.crispRound(n,h.linewidth,1),h._mainLinePosition=x(h,A,h.side),h._mainMirrorPosition=h.mirror&&A?x(h,A,d.OPPOSITE_SIDE[h.side]):null}var F=[],Q=[],U=[],w=1===o.opacity(m.paper_bgcolor)&&1===o.opacity(m.plot_bgcolor)&&m.paper_bgcolor===m.plot_bgcolor;for(l in m._plots)if((g=m._plots[l]).mainplot)g.bg&&g.bg.remove(),g.bg=void 0;else{var G=g.xaxis.domain,R=g.yaxis.domain,L=g.plotgroup;if(y(G,R,U)){var S=L.node(),V=g.bg=r.ensureSingle(L,"rect","bg");S.insertBefore(V.node(),S.childNodes[0]),Q.push(l)}else L.select("rect.bg").remove(),U.push([G,R]),w||(F.push(l),Q.push(l))}var Z,k,E,X,N,W,_,T,M,H,Y,D,z,O=m._bgLayer.selectAll(".bg").data(F);for(O.enter().append("rect").classed("bg",!0),O.exit().remove(),O.each((function(e){m._plots[e].bg=t.select(this)})),a=0;a<Q.length;a++)g=m._plots[Q[a]],f=g.xaxis,p=g.yaxis,g.bg&&void 0!==f._offset&&void 0!==p._offset&&g.bg.call(s.setRect,f._offset-b,p._offset-b,f._length+2*b,p._length+2*b).call(o.fill,m.plot_bgcolor).style("stroke-width",0);if(!m._hasOnlyLargeSploms)for(l in m._plots){g=m._plots[l],f=g.xaxis,p=g.yaxis;var J,j,P=g.clipId="clip"+m._uid+l+"plot",K=r.ensureSingleById(m._clips,"clipPath",P,(function(e){e.classed("plotclip",!0).append("rect")}));g.clipRect=K.select("rect").attr({width:f._length,height:p._length}),s.setTranslate(g.plot,f._offset,p._offset),g._hasClipOnAxisFalse?(J=null,j=P):(J=P,j=null),s.setClipUrl(g.plot,J,n),g.layerClipId=j}function q(e){return"M"+Z+","+e+"H"+k}function $(e){return"M"+f._offset+","+e+"h"+f._length}function ee(e){return"M"+e+","+T+"V"+_}function te(e){return"M"+e+","+p._offset+"v"+p._length}function ne(e,t,n){if(!e.showline||l!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var i=t(e._mainLinePosition);return e.mirror&&(i+=t(e._mainMirrorPosition)),i}for(l in m._plots){g=m._plots[l],f=g.xaxis,p=g.yaxis;var ie="M0,0";C(f,l)&&(N=B(f,"left",p,I),Z=f._offset-(N?b+N:0),W=B(f,"right",p,I),k=f._offset+f._length+(W?b+W:0),E=x(f,p,"bottom"),X=x(f,p,"top"),!(z=!f._anchorAxis||l!==f._mainSubplot)||"allticks"!==f.mirror&&"all"!==f.mirror||(f._linepositions[l]=[E,X]),ie=ne(f,q,$),z&&f.showline&&("all"===f.mirror||"allticks"===f.mirror)&&(ie+=q(E)+q(X)),g.xlines.style("stroke-width",f._lw+"px").call(o.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)")),g.xlines.attr("d",ie);var re="M0,0";C(p,l)&&(Y=B(p,"bottom",f,I),_=p._offset+p._length+(Y?b:0),D=B(p,"top",f,I),T=p._offset-(D?b:0),M=x(p,f,"left"),H=x(p,f,"right"),!(z=!p._anchorAxis||l!==p._mainSubplot)||"allticks"!==p.mirror&&"all"!==p.mirror||(p._linepositions[l]=[M,H]),re=ne(p,ee,te),z&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(re+=ee(M)+ee(H)),g.ylines.style("stroke-width",p._lw+"px").call(o.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),g.ylines.attr("d",re)}return u.makeClipPaths(n),i.previousPromises(n)}function C(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function x(e,t,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var i=n._anchorAxis;if(!i)return!1;var r=d.FROM_BL[t];return n.side===t?i.domain[r]===e.domain[r]:n.mirror&&i.domain[1-r]===e.domain[1-r]}function B(e,t,n,i){if(x(e,t,n))return n._lw;for(var r=0;r<i.length;r++){var a=i[r];if(a._mainAxis===n._mainAxis&&x(e,t,a))return a._lw}return 0}function A(e,t){var n=e.title,i=e._size,r=0;return t===m?r=n.pad.l:t===b&&(r=-n.pad.r),"paper"===n.xref?i.l+i.w*n.x+r:e.width*n.x+r}function F(e,t){var n=e.title,i=e._size,r=0;return"0em"!==t&&t?t===d.CAP_SHIFT+"em"&&(r=n.pad.t):r=-n.pad.b,"auto"===n.y?i.t/2:"paper"===n.yref?i.t+i.h-i.h*n.y+r:e.height-e.height*n.y+r}e.layoutStyles=function(e){return r.syncOrAsync([i.doAutoMargin,I],e)},e.drawMainTitle=function(e){var t=e._fullLayout,n=function(e){var t=e.title,n=v;r.isRightAnchor(t)?n=b:r.isLeftAnchor(t)&&(n=m);return n}(t),i=function(e){var t=e.title,n="0em";r.isTopAnchor(t)?n=d.CAP_SHIFT+"em":r.isMiddleAnchor(t)&&(n=d.MID_SHIFT+"em");return n}(t);l.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:A(t,n),y:F(t,i),"text-anchor":n,dy:i}})},e.doTraceStyle=function(t){var r,o=t.calcdata,s=[];for(r=0;r<o.length;r++){var l=o[r],c=l[0]||{},u=c.trace||{},d=u._module||{},g=d.arraysToCalcdata;g&&g(l,u);var h=d.editStyle;h&&s.push({fn:h,cd0:c})}if(s.length){for(r=0;r<s.length;r++){var f=s[r];f.fn(t,f.cd0)}a(t),e.redrawReglTraces(t)}return i.style(t),n.getComponentMethod("legend","draw")(t),i.previousPromises(t)},e.doColorBars=function(e){return n.getComponentMethod("colorbar","draw")(e),i.previousPromises(e)},e.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,n.call("_doPlot",e,"",t)},e.doLegend=function(e){return n.getComponentMethod("legend","draw")(e),i.previousPromises(e)},e.doTicksRelayout=function(t){return u.draw(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(n.subplotsRegistry.splom.updateGrid(t),a(t),e.redrawReglTraces(t)),e.drawMainTitle(t),i.previousPromises(t)},e.doModeBar=function(e){var t=e._fullLayout;c.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return i.previousPromises(e)},e.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,i=0;i<n.length;i++){var r=t[n[i]];r._scene.setViewport(r)}},e.drawData=function(t){var r=t._fullLayout;a(t);for(var o=r._basePlotModules,s=0;s<o.length;s++)o[s].plot(t);return e.redrawReglTraces(t),i.style(t),n.getComponentMethod("shapes","draw")(t),n.getComponentMethod("annotations","draw")(t),n.getComponentMethod("images","draw")(t),r._replotting=!1,i.previousPromises(t)},e.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,i,a=e._fullData,o=[],s=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<a.length;n++){var l=a[n];!0===l.visible&&0!==l._length&&("splom"===l.type?t._splomScenes[l.uid].draw():"scattergl"===l.type?r.pushUnique(o,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&r.pushUnique(s,l.subplot))}for(n=0;n<o.length;n++)(i=t._plots[o[n]])._scene&&i._scene.draw();for(n=0;n<s.length;n++)(i=t[s[n]]._subplot)._scene&&i._scene.draw()}},e.doAutoRangeAndConstraints=function(e){for(var t,n=u.list(e,"",!0),i={},r=0;r<n.length;r++)if(!i[(t=n[r])._id]){i[t._id]=1,f(e,t),p(e,t);var a=t._matchGroup;if(a)for(var o in a){var s=u.getFromId(e,o);p(e,s,t.range),i[o]=1}}h(e)},e.finalDraw=function(e){n.getComponentMethod("rangeslider","draw")(e),n.getComponentMethod("rangeselector","draw")(e)},e.drawMarginPushers=function(e){n.getComponentMethod("legend","draw")(e),n.getComponentMethod("rangeselector","draw")(e),n.getComponentMethod("sliders","draw")(e),n.getComponentMethod("updatemenus","draw")(e),n.getComponentMethod("colorbar","draw")(e)}}(kA);var tU=function(){var e,t=0,n=!1;function i(t,n){return e.list.push({type:t,data:n?JSON.parse(JSON.stringify(n)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return i("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return i("div_seg",{seg:e,pt:t}),i("chop",{seg:e,pt:t})},statusRemove:function(e){return i("pop_seg",{seg:e})},segmentUpdate:function(e){return i("seg_update",{seg:e})},segmentNew:function(e,t){return i("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return i("rem_seg",{seg:e})},tempStatus:function(e,t,n){return i("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return i("rewind",{seg:e})},status:function(e,t,n){return i("status",{seg:e,above:t,below:n})},vert:function(t){return t===n?e:(n=t,i("vert",{x:t}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),i("log",{txt:e})},reset:function(){return i("reset")},selected:function(e){return i("selected",{segs:e})},chainStart:function(e){return i("chain_start",{seg:e})},chainRemoveHead:function(e,t){return i("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return i("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return i("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return i("chain_match",{index:e})},chainClose:function(e){return i("chain_close",{index:e})},chainAddHead:function(e,t){return i("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return i("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return i("chain_con",{index1:e,index2:t})},chainReverse:function(e){return i("chain_rev",{index:e})},chainJoin:function(e,t){return i("chain_join",{index1:e,index2:t})},done:function(){return i("done")}},e};var nU=function(e){"number"!=typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"==typeof t&&(e=t),e},pointAboveOrOnLine:function(t,n,i){var r=n[0],a=n[1],o=i[0],s=i[1],l=t[0];return(o-r)*(t[1]-a)-(s-a)*(l-r)>=-e},pointBetween:function(t,n,i){var r=t[1]-n[1],a=i[0]-n[0],o=t[0]-n[0],s=i[1]-n[1],l=o*a+r*s;return!(l<e)&&!(l-(a*a+s*s)>-e)},pointsSameX:function(t,n){return Math.abs(t[0]-n[0])<e},pointsSameY:function(t,n){return Math.abs(t[1]-n[1])<e},pointsSame:function(e,n){return t.pointsSameX(e,n)&&t.pointsSameY(e,n)},pointsCompare:function(e,n){return t.pointsSameX(e,n)?t.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1},pointsCollinear:function(t,n,i){var r=t[0]-n[0],a=t[1]-n[1],o=n[0]-i[0],s=n[1]-i[1];return Math.abs(r*s-o*a)<e},linesIntersect:function(t,n,i,r){var a=n[0]-t[0],o=n[1]-t[1],s=r[0]-i[0],l=r[1]-i[1],c=a*l-o*s;if(Math.abs(c)<e)return!1;var u=t[0]-i[0],d=t[1]-i[1],g=(s*d-l*u)/c,h=(a*d-o*u)/c,f={alongA:0,alongB:0,pt:[t[0]+g*a,t[1]+g*o]};return f.alongA=g<=-e?-2:g<e?-1:g-1<=-e?0:g-1<e?1:2,f.alongB=h<=-e?-2:h<e?-1:h-1<=-e?0:h-1<e?1:2,f},pointInsideRegion:function(t,n){for(var i=t[0],r=t[1],a=n[n.length-1][0],o=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-r>e!=o-r>e&&(a-c)*(r-u)/(o-u)+c-i>e&&(s=!s),a=c,o=u}return s}};return t},iU={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,n){for(var i=e.root,r=e.root.next;null!==r;){if(n(r))return t.prev=r.prev,t.next=r,r.prev.next=t,void(r.prev=t);i=r,r=r.next}i.next=t,t.prev=i,t.next=null},findTransition:function(t){for(var n=e.root,i=e.root.next;null!==i&&!t(i);)n=i,i=i.next;return{before:n===e.root?null:n,after:i,insert:function(e){return e.prev=n,e.next=i,n.next=e,null!==i&&(i.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}};var rU=function(e,t,n){function i(e,t){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function r(e,t,i){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var a=iU.create();function o(e,n){a.insertBefore(e,(function(i){return function(e,n,i,r,a,o){var s=t.pointsCompare(n,a);return 0!==s?s:t.pointsSame(i,o)?0:e!==r?e?1:-1:t.pointAboveOrOnLine(i,r?a:o,r?o:a)?1:-1}(e.isStart,e.pt,n,i.isStart,i.pt,i.other.pt)<0}))}function s(e,t){var n=function(e,t){var n=iU.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return o(n,e.end),n}(e,t);return function(e,t,n){var i=iU.node({isStart:!1,pt:t.end,seg:t,primary:n,other:e,status:null});e.other=i,o(i,e.pt)}(n,e,t),n}function l(e,t){var i=r(t,e.seg.end,e.seg);return function(e,t){n&&n.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,o(e.other,e.pt)}(e,t),s(i,e.primary)}function c(i,r){var o=iU.create();function s(e){return o.findTransition((function(n){var i,r,a,o,s,l;return(i=e,r=n.ev,a=i.seg.start,o=i.seg.end,s=r.seg.start,l=r.seg.end,t.pointsCollinear(a,s,l)?t.pointsCollinear(o,s,l)||t.pointAboveOrOnLine(o,s,l)?1:-1:t.pointAboveOrOnLine(a,s,l)?1:-1)>0}))}function c(e,i){var r=e.seg,a=i.seg,o=r.start,s=r.end,c=a.start,u=a.end;n&&n.checkIntersection(r,a);var d=t.linesIntersect(o,s,c,u);if(!1===d){if(!t.pointsCollinear(o,s,c))return!1;if(t.pointsSame(o,u)||t.pointsSame(s,c))return!1;var g=t.pointsSame(o,c),h=t.pointsSame(s,u);if(g&&h)return i;var f=!g&&t.pointBetween(o,c,u),p=!h&&t.pointBetween(s,c,u);if(g)return p?l(i,s):l(e,u),i;f&&(h||(p?l(i,s):l(e,u)),l(i,o))}else 0===d.alongA&&(-1===d.alongB?l(e,c):0===d.alongB?l(e,d.pt):1===d.alongB&&l(e,u)),0===d.alongB&&(-1===d.alongA?l(i,o):0===d.alongA?l(i,d.pt):1===d.alongA&&l(i,s));return!1}for(var u=[];!a.isEmpty();){var d=a.getHead();if(n&&n.vert(d.pt[0]),d.isStart){n&&n.segmentNew(d.seg,d.primary);var g=s(d),h=g.before?g.before.ev:null,f=g.after?g.after.ev:null;n&&n.tempStatus(d.seg,!!h&&h.seg,!!f&&f.seg);var p,m=function(){if(h){var e=c(d,h);if(e)return e}return!!f&&c(d,f)}();if(m){var v;if(e)(v=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(m.seg.myFill.above=!m.seg.myFill.above);else m.seg.otherFill=d.seg.myFill;n&&n.segmentUpdate(m.seg),d.other.remove(),d.remove()}if(a.getHead()!==d){n&&n.rewind(d.seg);continue}if(e)v=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=f?f.seg.myFill.above:i,d.seg.myFill.above=v?!d.seg.myFill.below:d.seg.myFill.below;else if(null===d.seg.otherFill)p=f?d.primary===f.primary?f.seg.otherFill.above:f.seg.myFill.above:d.primary?r:i,d.seg.otherFill={above:p,below:p};n&&n.status(d.seg,!!h&&h.seg,!!f&&f.seg),d.other.status=g.insert(iU.node({ev:d}))}else{var b=d.status;if(null===b)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(b.prev)&&o.exists(b.next)&&c(b.prev.ev,b.next.ev),n&&n.statusRemove(b.ev.seg),b.remove(),!d.primary){var y=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=y}u.push(d.seg)}a.getHead().remove()}return n&&n.done(),u}return e?{addRegion:function(e){for(var n,r=e[e.length-1],a=0;a<e.length;a++){n=r,r=e[a];var o=t.pointsCompare(n,r);0!==o&&s(i(o<0?n:r,o<0?r:n),!0)}},calculate:function(e){return c(e,!1)}}:{calculate:function(e,t,n,i){return e.forEach((function(e){s(r(e.start,e.end,e),!0)})),n.forEach((function(e){s(r(e.start,e.end,e),!1)})),c(t,i)}}};var aU=function(e,t,n){var i=[],r=[];return e.forEach((function(e){var a=e.start,o=e.end;if(t.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(e);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<i.length;u++){var d=(m=i[u])[0];m[1];var g=m[m.length-1];if(m[m.length-2],t.pointsSame(d,a)){if(A(u,!0,!0))break}else if(t.pointsSame(d,o)){if(A(u,!0,!1))break}else if(t.pointsSame(g,a)){if(A(u,!1,!0))break}else if(t.pointsSame(g,o)&&A(u,!1,!1))break}if(c===s)return i.push([a,o]),void(n&&n.chainNew(a,o));if(c===l){n&&n.chainMatch(s.index);var h=s.index,f=s.matches_pt1?o:a,p=s.matches_head,m=i[h],v=p?m[0]:m[m.length-1],b=p?m[1]:m[m.length-2],y=p?m[m.length-1]:m[0],I=p?m[m.length-2]:m[1];return t.pointsCollinear(b,v,f)&&(p?(n&&n.chainRemoveHead(s.index,f),m.shift()):(n&&n.chainRemoveTail(s.index,f),m.pop()),v=b),t.pointsSame(y,f)?(i.splice(h,1),t.pointsCollinear(I,y,v)&&(p?(n&&n.chainRemoveTail(s.index,v),m.pop()):(n&&n.chainRemoveHead(s.index,v),m.shift())),n&&n.chainClose(s.index),void r.push(m)):void(p?(n&&n.chainAddHead(s.index,f),m.unshift(f)):(n&&n.chainAddTail(s.index,f),m.push(f)))}var C=s.index,x=l.index;n&&n.chainConnect(C,x);var B=i[C].length<i[x].length;s.matches_head?l.matches_head?B?(F(C),Q(C,x)):(F(x),Q(x,C)):Q(x,C):l.matches_head?Q(C,x):B?(F(C),Q(x,C)):(F(x),Q(C,x))}function A(e,t,n){return c.index=e,c.matches_head=t,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function F(e){n&&n.chainReverse(e),i[e].reverse()}function Q(e,r){var a=i[e],o=i[r],s=a[a.length-1],l=a[a.length-2],c=o[0],u=o[1];t.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(e,s),a.pop(),s=l),t.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(r,c),o.shift()),n&&n.chainJoin(e,r),i[e]=a.concat(o),i.splice(r,1)}})),r};function oU(e,t,n){var i=[];return e.forEach((function(e){var r=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[r]&&i.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[r],below:2===t[r]},otherFill:null})})),n&&n.selected(i),i}var sU,lU={union:function(e,t){return oU(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return oU(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return oU(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return oU(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return oU(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}},cU={toPolygon:function(e,t){function n(t){if(t.length<=0)return e.segments({inverted:!1,regions:[]});function n(t){var n=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[n]})}for(var i=n(t[0]),r=1;r<t.length;r++)i=e.selectDifference(e.combine(i,n(t[r])));return i}if("Polygon"===t.type)return e.polygon(n(t.coordinates));if("MultiPolygon"===t.type){for(var i=e.segments({inverted:!1,regions:[]}),r=0;r<t.coordinates.length;r++)i=e.selectUnion(e.combine(i,n(t.coordinates[r])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,n){function i(e,n){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],n)}function r(e){return{region:e,children:[]}}n=e.polygon(e.segments(n));var a=r(null);function o(e,t){for(var n=0;n<e.children.length;n++){if(i(t,(s=e.children[n]).region))return void o(s,t)}var a=r(t);for(n=0;n<e.children.length;n++){var s;i((s=e.children[n]).region,t)&&(a.children.push(s),e.children.splice(n,1),n--)}e.children.push(a)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||o(a,l)}function c(e,t){for(var n=0,i=e[e.length-1][0],r=e[e.length-1][1],a=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];a.push([s,l]),n+=l*i-s*r,i=s,r=l}return n<0!==t&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var u=[];function d(e){var t=[c(e.region,!1)];u.push(t);for(var n=0;n<e.children.length;n++)t.push(g(e.children[n]))}function g(e){for(var t=0;t<e.children.length;t++)d(e.children[t]);return c(e.region,!0)}for(s=0;s<a.children.length;s++)d(a.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}},uU=tU,dU=rU,gU=aU,hU=lU,fU=cU,pU=!1,mU=nU();function vU(e,t,n){var i=sU.segments(e),r=sU.segments(t),a=n(sU.combine(i,r));return sU.polygon(a)}sU={buildLog:function(e){return!0===e?pU=uU():!1===e&&(pU=!1),!1!==pU&&pU.list},epsilon:function(e){return mU.epsilon(e)},segments:function(e){var t=dU(!0,mU,pU);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:dU(!1,mU,pU).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:hU.union(e.combined,pU),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:hU.intersect(e.combined,pU),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:hU.difference(e.combined,pU),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:hU.differenceRev(e.combined,pU),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:hU.xor(e.combined,pU),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:gU(e.segments,mU,pU),inverted:e.inverted}},polygonFromGeoJSON:function(e){return fU.toPolygon(sU,e)},polygonToGeoJSON:function(e){return fU.fromPolygon(sU,mU,e)},union:function(e,t){return vU(e,t,sU.selectUnion)},intersect:function(e,t){return vU(e,t,sU.selectIntersect)},difference:function(e,t){return vU(e,t,sU.selectDifference)},differenceRev:function(e,t){return vU(e,t,sU.selectDifferenceRev)},xor:function(e,t){return vU(e,t,sU.selectXor)}},"object"===("undefined"==typeof window?"undefined":i(window))&&(window.PolyBool=sU);var bU=sU,yU={exports:{}},IU=mg.dot,CU=Du.BADNUM,xU=yU.exports={};xU.tester=function(e){var t,n=e.slice(),i=n[0][0],r=i,a=n[0][1],o=a;for(n.push(n[0]),t=1;t<n.length;t++)i=Math.min(i,n[t][0]),r=Math.max(r,n[t][0]),a=Math.min(a,n[t][1]),o=Math.max(o,n[t][1]);var s,l=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(l=!0,s=function(e){return e[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(l=!0,s=function(e){return e[1]===n[0][1]}));var c=!0,u=n[0];for(t=1;t<n.length;t++)if(u[0]!==n[t][0]||u[1]!==n[t][1]){c=!1;break}return{xmin:i,xmax:r,ymin:a,ymax:o,pts:n,contains:l?function(e,t){var n=e[0],l=e[1];return!(n===CU||n<i||n>r||l===CU||l<a||l>o)&&(!t||!s(e))}:function(e,t){var s=e[0],l=e[1];if(s===CU||s<i||s>r||l===CU||l<a||l>o)return!1;var c,u,d,g,h,f=n.length,p=n[0][0],m=n[0][1],v=0;for(c=1;c<f;c++)if(u=p,d=m,p=n[c][0],m=n[c][1],!(s<(g=Math.min(u,p))||s>Math.max(u,p)||l>Math.max(d,m)))if(l<Math.min(d,m))s!==g&&v++;else{if(l===(h=p===u?l:d+(s-u)*(m-d)/(p-u)))return 1!==c||!t;l<=h&&s!==g&&v++}return v%2==1},isRect:l,degenerate:c}},xU.isSegmentBent=function(e,t,n,i){var r,a,o,s=e[t],l=[e[n][0]-s[0],e[n][1]-s[1]],c=IU(l,l),u=Math.sqrt(c),d=[-l[1]/u,l[0]/u];for(r=t+1;r<n;r++)if(a=[e[r][0]-s[0],e[r][1]-s[1]],(o=IU(a,l))<0||o>c||Math.abs(IU(a,d))>i)return!0;return!1},xU.filter=function(e,t){var n=[e[0]],i=0,r=0;function a(a){e.push(a);var o=n.length,s=i;n.splice(r+1);for(var l=s+1;l<e.length;l++)(l===e.length-1||xU.isSegmentBent(e,s,l+1,t))&&(n.push(e[l]),n.length<o-2&&(i=l,r=n.length-1),s=l)}e.length>1&&a(e.pop());return{addPt:a,raw:e,filtered:n}};var BU=bU,AU=hg,FU=Am.exports.dashStyle,QU=Hd.exports,UU=SA,wU=xb.makeEventData,GU=VA.freeMode,RU=VA.rectMode,LU=VA.drawMode,SU=VA.openMode,VU=VA.selectMode,ZU=IF,kU=NA.handleEllipse,EU=sF,XU=ws.exports,NU=yU.exports,WU=Xh,_U=Sp.getFromId,TU=ZA,MU=kA.redrawReglTraces,HU=Zp,YU=HU.MINSELECT,DU=NU.filter,zU=NU.tester,OU=kp.clearSelect,JU=zA.p2r,jU=zA.axValue,PU=zA.getTransform;function KU(e,t,n,i,r,a,o){var s,l,c,u,d,g,h,f,p,m=t._hoverdata,v=t._fullLayout.clickmode.indexOf("event")>-1,b=[];if(function(e){return e&&Array.isArray(e)&&!0!==e[0].hoverOnBox}(m)){tw(e,t,a);var y=function(e,t){var n,i,r=e[0],a=-1,o=[];for(i=0;i<t.length;i++)if(n=t[i],r.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===r.hoverOnBox)break;void 0!==r.pointNumber?a=r.pointNumber:void 0!==r.binNumber&&(a=r.binNumber,o=r.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(m,s=iw(t,n,i,r));if(y.pointNumbers.length>0?function(e,t){var n,i,r,a=[];for(r=0;r<e.length;r++)(n=e[r]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&a.push(n);if(1===a.length&&a[0]===t.searchInfo&&(i=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(r=0;r<t.pointNumbers.length;r++)if(i.selectedpoints.indexOf(t.pointNumbers[r])<0)return!1;return!0}return!1}(s,y):function(e){var t,n,i=0;for(n=0;n<e.length;n++)if((t=e[n].cd[0].trace).selectedpoints){if(t.selectedpoints.length>1)return!1;if((i+=t.selectedpoints.length)>1)return!1}return 1===i}(s)&&(g=rw(y))){for(o&&o.remove(),p=0;p<s.length;p++)(l=s[p])._module.selectPoints(l,!1);aw(t,s),nw(a),v&&t.emit("plotly_deselect",null)}else{for(h=e.shiftKey&&(void 0!==g?g:rw(y)),c=function(e,t,n){return{pointNumber:e,searchInfo:t,subtract:n}}(y.pointNumber,y.searchInfo,h),u=ew(a.selectionDefs.concat([c])),p=0;p<s.length;p++)if(d=ow(s[p]._module.selectPoints(s[p],u),s[p]),b.length)for(var I=0;I<d.length;I++)b.push(d[I]);else b=d;if(aw(t,s,f={points:b}),c&&a&&a.selectionDefs.push(c),o){var C=a.mergedPolygons,x=SU(a.dragmode);ZU(sw(C,x),o,a)}v&&t.emit("plotly_selected",f)}}}function qU(e){return"pointNumber"in e&&"searchInfo"in e}function $U(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,n,i,r){var a=e.searchInfo.cd[0].trace._expandedIndex;return r.cd[0].trace._expandedIndex===a&&i===e.pointNumber},isRect:!1,degenerate:!1,subtract:e.subtract}}function ew(e){for(var t=[],n=qU(e[0])?0:e[0][0][0],i=n,r=qU(e[0])?0:e[0][0][1],a=r,o=0;o<e.length;o++)if(qU(e[o]))t.push($U(e[o]));else{var s=NU.tester(e[o]);s.subtract=e[o].subtract,t.push(s),n=Math.min(n,s.xmin),i=Math.max(i,s.xmax),r=Math.min(r,s.ymin),a=Math.max(a,s.ymax)}return{xmin:n,xmax:i,ymin:r,ymax:a,pts:[],contains:function(e,n,i,r){for(var a=!1,o=0;o<t.length;o++)t[o].contains(e,n,i,r)&&(a=!1===t[o].subtract);return a},isRect:!1,degenerate:!1}}function tw(e,t,n){t._fullLayout._drawing=!1;var i=t._fullLayout,r=n.plotinfo,a=n.dragmode,o=i._lastSelectedSubplot&&i._lastSelectedSubplot===r.id,s=(e.shiftKey||e.altKey)&&!(LU(a)&&SU(a));o&&s&&r.selection&&r.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=r.selection.selectionDefs,n.mergedPolygons=r.selection.mergedPolygons):s&&r.selection||nw(n),o||(OU(t),i._lastSelectedSubplot=r.id)}function nw(e){var t=e.dragmode,n=e.plotinfo,i=e.gd;if(i._fullLayout._activeShapeIndex>=0&&i._fullLayout._deactivateShape(i),LU(t)){var r=i._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id);if(r&&i._fullLayout._drawing){var a=EU(r,e);a&&AU.call("_guiRelayout",i,{shapes:a}),i._fullLayout._drawing=!1}}n.selection={},n.selection.selectionDefs=e.selectionDefs=[],n.selection.mergedPolygons=e.mergedPolygons=[]}function iw(e,t,n,i){var r,a,o,s=[],l=t.map((function(e){return e._id})),c=n.map((function(e){return e._id}));for(o=0;o<e.calcdata.length;o++)if(!0===(a=(r=e.calcdata[o])[0].trace).visible&&a._module&&a._module.selectPoints)if(!i||a.subplot!==i&&a.geo!==i)if("splom"===a.type&&a._xaxes[l[0]]&&a._yaxes[c[0]]){var u=g(a._module,r,t[0],n[0]);u.scene=e._fullLayout._splomScenes[a.uid],s.push(u)}else if("sankey"===a.type){var d=g(a._module,r,t[0],n[0]);s.push(d)}else{if(-1===l.indexOf(a.xaxis))continue;if(-1===c.indexOf(a.yaxis))continue;s.push(g(a._module,r,_U(e,a.xaxis),_U(e,a.yaxis)))}else s.push(g(a._module,r,t[0],n[0]));return s;function g(e,t,n,i){return{_module:e,cd:t,xaxis:n,yaxis:i}}}function rw(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,i=e.pointNumbers,r=i.length>0?i[0]:n;return!!t.selectedpoints&&t.selectedpoints.indexOf(r)>-1}function aw(e,t,n){var i,r,a,o;for(i=0;i<t.length;i++){var s=t[i].cd[0].trace._fullInput,l=e._fullLayout._tracePreGUI[s.uid]||{};void 0===l.selectedpoints&&(l.selectedpoints=s._input.selectedpoints||null)}if(n){var c=n.points||[];for(i=0;i<t.length;i++)(o=t[i].cd[0].trace)._input.selectedpoints=o._fullInput.selectedpoints=[],o._fullInput!==o&&(o.selectedpoints=[]);for(i=0;i<c.length;i++){var u=c[i],d=u.data,g=u.fullData;u.pointIndices?([].push.apply(d.selectedpoints,u.pointIndices),o._fullInput!==o&&[].push.apply(g.selectedpoints,u.pointIndices)):(d.selectedpoints.push(u.pointIndex),o._fullInput!==o&&g.selectedpoints.push(u.pointIndex))}}else for(i=0;i<t.length;i++)delete(o=t[i].cd[0].trace).selectedpoints,delete o._input.selectedpoints,o._fullInput!==o&&delete o._fullInput.selectedpoints;var h=!1;for(i=0;i<t.length;i++){o=(a=(r=t[i]).cd)[0].trace,AU.traceIs(o,"regl")&&(h=!0);var f=r._module,p=f.styleOnSelect||f.style;p&&(p(e,a,a[0].node3),a[0].nodeRangePlot3&&p(e,a,a[0].nodeRangePlot3))}h&&(TU(e),MU(e))}function ow(e,t){if(Array.isArray(e))for(var n=t.cd,i=t.cd[0].trace,r=0;r<e.length;r++)e[r]=wU(e[r],i,n);return e}function sw(e,t){for(var n=[],i=0;i<e.length;i++){n[i]=[];for(var r=0;r<e[i].length;r++){n[i][r]=[],n[i][r][0]=r?"L":"M";for(var a=0;a<e[i][r].length;a++)n[i][r].push(e[i][r][a])}t||n[i].push(["Z",n[i][0][1],n[i][0][2]])}return n}var lw={prepSelect:function(e,t,n,i,r){var a=GU(r),o=RU(r),s=SU(r),l=LU(r),c=VU(r),u="drawcircle"===r,d="drawline"===r||u,g=i.gd,h=g._fullLayout,f=h._zoomlayer,p=i.element.getBoundingClientRect(),m=i.plotinfo,v=PU(m),b=t-p.left,y=n-p.top;h._calcInverseTransform(g);var I=XU.apply3DTransform(h._invTransform)(b,y);b=I[0],y=I[1];var C,x,B,A,F,Q,U,w=h._invScaleX,G=h._invScaleY,R=b,L=y,S="M"+b+","+y,V=i.xaxes[0]._length,Z=i.yaxes[0]._length,k=i.xaxes.concat(i.yaxes),E=e.altKey&&!(LU(r)&&s);tw(e,g,i),a&&(C=DU([[b,y]],HU.BENDPX));var X=f.selectAll("path.select-outline-"+m.id).data(l?[0]:[1,2]),N=h.newshape;X.enter().append("path").attr("class",(function(e){return"select-outline select-outline-"+e+" select-outline-"+m.id})).style(l?{opacity:N.opacity/2,fill:s?void 0:N.fillcolor,stroke:N.line.color,"stroke-dasharray":FU(N.line.dash,N.line.width),"stroke-width":N.line.width+"px"}:{}).attr("fill-rule",N.fillrule).classed("cursor-move",!!l).attr("transform",v).attr("d",S+"Z");var W,_=f.append("path").attr("class","zoombox-corners").style({fill:QU.background,stroke:QU.defaultLine,"stroke-width":1}).attr("transform",v).attr("d","M0,0Z"),T=h._uid+HU.SELECTID,M=[],H=iw(g,i.xaxes,i.yaxes,i.subplot);function Y(e,t){return e-t}W=m.fillRangeItems?m.fillRangeItems:o?function(e,t){var n=e.range={};for(F=0;F<k.length;F++){var i=k[F],r=i._id.charAt(0);n[i._id]=[JU(i,t[r+"min"]),JU(i,t[r+"max"])].sort(Y)}}:function(e,t,n){var i=e.lassoPoints={};for(F=0;F<k.length;F++){var r=k[F];i[r._id]=n.filtered.map(jU(r))}},i.moveFn=function(e,t){R=Math.max(0,Math.min(V,w*e+b)),L=Math.max(0,Math.min(Z,G*t+y));var n=Math.abs(R-b),r=Math.abs(L-y);if(o){var f,p,m;if(c){var v=h.selectdirection;switch(f="any"===v?r<Math.min(.6*n,YU)?"h":n<Math.min(.6*r,YU)?"v":"d":v){case"h":p=u?Z/2:0,m=Z;break;case"v":p=u?V/2:0,m=V}}if(l)switch(h.newshape.drawdirection){case"vertical":f="h",p=u?Z/2:0,m=Z;break;case"horizontal":f="v",p=u?V/2:0,m=V;break;case"ortho":n<r?(f="h",p=y,m=L):(f="v",p=b,m=R);break;default:f="d"}"h"===f?((A=d?kU(u,[R,p],[R,m]):[[b,p],[b,m],[R,m],[R,p]]).xmin=d?R:Math.min(b,R),A.xmax=d?R:Math.max(b,R),A.ymin=Math.min(p,m),A.ymax=Math.max(p,m),_.attr("d","M"+A.xmin+","+(y-YU)+"h-4v"+2*YU+"h4ZM"+(A.xmax-1)+","+(y-YU)+"h4v"+2*YU+"h-4Z")):"v"===f?((A=d?kU(u,[p,L],[m,L]):[[p,y],[p,L],[m,L],[m,y]]).xmin=Math.min(p,m),A.xmax=Math.max(p,m),A.ymin=d?L:Math.min(y,L),A.ymax=d?L:Math.max(y,L),_.attr("d","M"+(b-YU)+","+A.ymin+"v-4h"+2*YU+"v4ZM"+(b-YU)+","+(A.ymax-1)+"v4h"+2*YU+"v-4Z")):"d"===f&&((A=d?kU(u,[b,y],[R,L]):[[b,y],[b,L],[R,L],[R,y]]).xmin=Math.min(b,R),A.xmax=Math.max(b,R),A.ymin=Math.min(y,L),A.ymax=Math.max(y,L),_.attr("d","M0,0Z"))}else a&&(C.addPt([R,L]),A=C.filtered);i.selectionDefs&&i.selectionDefs.length?(B=function(e,t,n){if(n)return BU.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions;return BU.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(i.mergedPolygons,A,E),A.subtract=E,x=ew(i.selectionDefs.concat([A]))):(B=[A],x=zU(A)),ZU(sw(B,s),X,i),c&&WU.throttle(T,HU.SELECTDELAY,(function(){var e;for(M=[],F=0;F<H.length;F++)if(e=ow((Q=H[F])._module.selectPoints(Q,x),Q),M.length)for(var t=0;t<e.length;t++)M.push(e[t]);else M=e;aw(g,H,U={points:M}),W(U,A,C),i.gd.emit("plotly_selecting",U)}))},i.clickFn=function(e,t){if(_.remove(),g._fullLayout._activeShapeIndex>=0)g._fullLayout._deactivateShape(g);else if(!l){var n=h.clickmode;WU.done(T).then((function(){if(WU.clear(T),2===e){for(X.remove(),F=0;F<H.length;F++)(Q=H[F])._module.selectPoints(Q,!1);aw(g,H),nw(i),g.emit("plotly_deselect",null)}else n.indexOf("select")>-1&&KU(t,g,i.xaxes,i.yaxes,i.subplot,i,X),"event"===n&&g.emit("plotly_selected",void 0);UU.click(g,t)})).catch(XU.error)}},i.doneFn=function(){_.remove(),WU.done(T).then((function(){WU.clear(T),i.gd.emit("plotly_selected",U),A&&i.selectionDefs&&(A.subtract=E,i.selectionDefs.push(A),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,B)),i.doneFnCompleted&&i.doneFnCompleted(M)})).catch(XU.error),l&&nw(i)}},clearSelect:OU,clearSelectionsCache:nw,selectOnClick:KU},cw=Gs.exports,uw=ws.exports,dw=uw.numberFormat,gw=Id.exports,hw=hg,fw=uw.strTranslate,pw=Cm,mw=Hd.exports,vw=Am.exports,bw=SA,yw=Im.exports,Iw=ux,Cw=YC.exports,xw=VA.selectingOrDrawing,Bw=VA.freeMode,Aw=Bm.FROM_TL,Fw=ZA,Qw=kA.redrawReglTraces,Uw=Fp.exports,ww=Sp.getFromId,Gw=lw.prepSelect,Rw=lw.clearSelect,Lw=lw.selectOnClick,Sw=WQ,Vw=Zp,Zw=Vw.MINDRAG,kw=Vw.MINZOOM,Ew=!0;function Xw(e,t,n,i){var r=uw.ensureSingle(e.draglayer,t,n,(function(t){t.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)}));return r.call(Iw,i),r.node()}function Nw(e,t,n,i,r,a,o){var s=Xw(e,"rect",t,n);return cw.select(s).call(vw.setRect,i,r,a,o),s}function Ww(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function _w(e,t,n,i,r){for(var a=0;a<e.length;a++){var o=e[a];if(!o.fixedrange)if(o.rangebreaks){var s="y"===o._id.charAt(0),l=s?1-t:t,c=s?1-n:n;i[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length)),i[o._name+".range[1]"]=o.l2r(o.p2l(c*o._length))}else{var u=o._rl[0],d=o._rl[1]-u;i[o._name+".range[0]"]=o.l2r(u+d*t),i[o._name+".range[1]"]=o.l2r(u+d*n)}}if(r&&r.length){var g=(t+(1-n))/2;_w(r,g,1-g,i,[])}}function Tw(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(!i.fixedrange)if(i.rangebreaks){var r=i._length,a=(i.p2l(0+t)-i.p2l(0)+(i.p2l(r+t)-i.p2l(r)))/2;i.range=[i.l2r(i._rl[0]-a),i.l2r(i._rl[1]-a)]}else i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)]}}function Mw(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function Hw(e,t,n,i,r){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",fw(n,i)).attr("d",r+"Z")}function Yw(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:mw.background,stroke:mw.defaultLine,"stroke-width":1,opacity:0}).attr("transform",fw(t,n)).attr("d","M0,0Z")}function Dw(e,t,n,i,r,a){e.attr("d",i+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),zw(e,t,r,a)}function zw(e,t,n,i){n||(e.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function Ow(e){cw.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Jw(e){Ew&&e.data&&e._context.showTips&&(uw.notifier(uw._(e,"Double-click to zoom back out"),"long"),Ew=!1)}function jw(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,kw)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Pw(e,t,n,i,r){for(var a,o,s,l,c=!1,u={},d={},g=(r||{}).xaHash,h=(r||{}).yaHash,f=0;f<t.length;f++){var p=t[f];for(a in n)if(p[a]){for(s in p)r&&(g[s]||h[s])||("x"===s.charAt(0)?n:i)[s]||(u[s]=a);for(o in i)r&&(g[o]||h[o])||!p[o]||(c=!0)}for(o in i)if(p[o])for(l in p)r&&(g[l]||h[l])||("x"===l.charAt(0)?n:i)[l]||(d[l]=o)}c&&(uw.extendFlat(u,d),d={});var m={},v=[];for(s in u){var b=ww(e,s);v.push(b),m[b._id]=b}var y={},I=[];for(l in d){var C=ww(e,l);I.push(C),y[C._id]=C}return{xaHash:m,yaHash:y,xaxes:v,yaxes:I,xLinks:u,yLinks:d,isSubplotConstrained:c}}function Kw(e,t){void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function qw(e){var t=[];for(var n in e)t.push(e[n]);return t}var $w=function(e,t,n,i,r,a,o,s){var l,c,u,d,g,h,f,p,m,v,b,y,I,C,x,B,A,F,Q,U,w,G,R,L=e._fullLayout._zoomlayer,S=o+s==="nsew",V=1===(o+s).length;function Z(){if(l=t.xaxis,c=t.yaxis,m=l._length,v=c._length,f=l._offset,p=c._offset,(u={})[l._id]=l,(d={})[c._id]=c,o&&s)for(var n=t.overlays,i=0;i<n.length;i++){var r=n[i].xaxis;u[r._id]=r;var a=n[i].yaxis;d[a._id]=a}g=qw(u),h=qw(d),I=Ww(g,s),C=Ww(h,o),x=!C&&!I,y=Pw(e,e._fullLayout._axisMatchGroups,u,d);var w=(b=Pw(e,e._fullLayout._axisConstraintGroups,u,d,y)).isSubplotConstrained||y.isSubplotConstrained;B=s||w,A=o||w;var G=e._fullLayout;F=G._has("scattergl"),Q=G._has("splom"),U=G._has("svg")}Z();var k=function(e,t,n){if(!e)return"pointer";if("nsew"===e)return n?"":"pan"===t?"move":"crosshair";return e.toLowerCase()+"-resize"}(C+I,e._fullLayout.dragmode,S),E=Nw(t,o+s+"drag",k,n,i,r,a);if(x&&!S)return E.onmousedown=null,E.style.pointerEvents="none",E;var X,N,W,_,T,M,H,Y,D,z,O={element:E,gd:e,plotinfo:t};function J(){O.plotinfo.selection=!1,Rw(e)}function j(e,n){var i=O.gd;if(i._fullLayout._activeShapeIndex>=0)i._fullLayout._deactivateShape(i);else{var r=i._fullLayout.clickmode;if(Ow(i),2!==e||V||oe(),S)r.indexOf("select")>-1&&Lw(n,i,g,h,t.id,O),r.indexOf("event")>-1&&bw.click(i,n,t.id);else if(1===e&&V){var a=o?c:l,u="s"===o||"w"===s?0:1,d=a._name+".range["+u+"]",f=function(e,t){var n,i=e.range[t],r=Math.abs(i-e.range[1-t]);return"date"===e.type?i:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(r)/Math.LN10))+3,dw("."+n+"g")(Math.pow(10,i))):(n=Math.floor(Math.log(Math.abs(i))/Math.LN10)-Math.floor(Math.log(r)/Math.LN10)+4,dw("."+String(n)+"g")(i))}(a,u),p="left",m="middle";if(a.fixedrange)return;o?(m="n"===o?"top":"bottom","right"===a.side&&(p="right")):"e"===s&&(p="right"),i._context.showAxisRangeEntryBoxes&&cw.select(E).call(pw.makeEditable,{gd:i,immediate:!0,background:i._fullLayout.paper_bgcolor,text:String(f),fill:a.tickfont?a.tickfont.color:"#444",horizontalAlign:p,verticalAlign:m}).on("edit",(function(e){var t=a.d2r(e);void 0!==t&&hw.call("_guiRelayout",i,d,t)}))}}}function P(t,n){if(e._transitioningWithDuration)return!1;var i=Math.max(0,Math.min(m,G*t+X)),r=Math.max(0,Math.min(v,R*n+N)),a=Math.abs(i-X),o=Math.abs(r-N);function s(){H="",W.r=W.l,W.t=W.b,D.attr("d","M0,0Z")}if(W.l=Math.min(X,i),W.r=Math.max(X,i),W.t=Math.min(N,r),W.b=Math.max(N,r),b.isSubplotConstrained)a>kw||o>kw?(H="xy",a/m>o/v?(o=a*v/m,N>r?W.t=N-o:W.b=N+o):(a=o*m/v,X>i?W.l=X-a:W.r=X+a),D.attr("d",jw(W))):s();else if(y.isSubplotConstrained)if(a>kw||o>kw){H="xy";var l=Math.min(W.l/m,(v-W.b)/v),c=Math.max(W.r/m,(v-W.t)/v);W.l=l*m,W.r=c*m,W.b=(1-l)*v,W.t=(1-c)*v,D.attr("d",jw(W))}else s();else!C||o<Math.min(Math.max(.6*a,Zw),kw)?a<Zw||!I?s():(W.t=0,W.b=v,H="x",D.attr("d",function(e,t){return"M"+(e.l-.5)+","+(t-kw-.5)+"h-3v"+(2*kw+1)+"h3ZM"+(e.r+.5)+","+(t-kw-.5)+"h3v"+(2*kw+1)+"h-3Z"}(W,N))):!I||a<Math.min(.6*o,kw)?(W.l=0,W.r=m,H="y",D.attr("d",function(e,t){return"M"+(t-kw-.5)+","+(e.t-.5)+"v-3h"+(2*kw+1)+"v3ZM"+(t-kw-.5)+","+(e.b+.5)+"v3h"+(2*kw+1)+"v-3Z"}(W,X))):(H="xy",D.attr("d",jw(W)));W.w=W.r-W.l,W.h=W.b-W.t,H&&(z=!0),e._dragged=z,Dw(Y,D,W,T,M,_),K(),e.emit("plotly_relayouting",w),M=!0}function K(){w={},"xy"!==H&&"x"!==H||(_w(g,W.l/m,W.r/m,w,b.xaxes),re("x",w)),"xy"!==H&&"y"!==H||(_w(h,(v-W.b)/v,(v-W.t)/v,w,b.yaxes),re("y",w))}function q(){K(),Ow(e),se(),Jw(e)}O.prepFn=function(t,n,i){var r=O.dragmode,a=e._fullLayout.dragmode;a!==r&&(O.dragmode=a),Z(),G=e._fullLayout._invScaleX,R=e._fullLayout._invScaleY,x||(S?t.shiftKey?"pan"===a?a="zoom":xw(a)||(a="pan"):t.ctrlKey&&(a="pan"):a="pan"),Bw(a)?O.minDrag=1:O.minDrag=void 0,xw(a)?(O.xaxes=g,O.yaxes=h,Gw(t,n,i,O,a)):(O.clickFn=j,xw(r)&&J(),x||("zoom"===a?(O.moveFn=P,O.doneFn=q,O.minDrag=1,function(t,n,i){var r=E.getBoundingClientRect();X=n-r.left,N=i-r.top,e._fullLayout._calcInverseTransform(e);var a=uw.apply3DTransform(e._fullLayout._invTransform)(X,N);X=a[0],N=a[1],W={l:X,r:X,w:0,t:N,b:N,h:0},_=e._hmpixcount?e._hmlumcount/e._hmpixcount:gw(e._fullLayout.plot_bgcolor).getLuminance(),M=!1,H="xy",z=!1,Y=Hw(L,_,f,p,T="M0,0H"+m+"V"+v+"H0V0"),D=Yw(L,f,p)}(0,n,i)):"pan"===a&&(O.moveFn=ie,O.doneFn=se))),e._fullLayout._redrag=function(){var t=e._dragdata;if(t&&t.element===E){var n=e._fullLayout.dragmode;xw(n)||(Z(),le([0,0,m,v]),O.moveFn(t.dx,t.dy))}}},Cw.init(O);var $=[0,0,m,v],ee=null,te=Vw.REDRAWDELAY,ne=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function ie(t,n){if(t*=G,n*=R,!e._transitioningWithDuration){if(e._fullLayout._replotting=!0,"ew"===I||"ns"===C){var i=I?-t:0,r=C?-n:0;if(y.isSubplotConstrained){if(I&&C){var a=(t/m-n/v)/2;i=-(t=a*m),r=-(n=-a*v)}C?i=-r*m/v:r=-i*v/m}return I&&(Tw(g,t),re("x")),C&&(Tw(h,n),re("y")),le([i,r,m,v]),ae(),void e.emit("plotly_relayouting",w)}var o,s,l="w"===I==("n"===C)?1:-1;if(I&&C&&(b.isSubplotConstrained||y.isSubplotConstrained)){var c=(t/m+l*n/v)/2;t=c*m,n=l*c*v}if("w"===I?t=p(g,0,t):"e"===I?t=p(g,1,-t):I||(t=0),"n"===C?n=p(h,1,n):"s"===C?n=p(h,0,-n):C||(n=0),o="w"===I?t:0,s="n"===C?n:0,b.isSubplotConstrained&&!y.isSubplotConstrained||y.isSubplotConstrained&&I&&C&&l>0){var u;if(y.isSubplotConstrained||!I&&1===C.length){for(u=0;u<g.length;u++)g[u].range=g[u]._r.slice(),Sw(g[u],1-n/v);o=(t=n*m/v)/2}if(y.isSubplotConstrained||!C&&1===I.length){for(u=0;u<h.length;u++)h[u].range=h[u]._r.slice(),Sw(h[u],1-t/m);s=(n=t*v/m)/2}}y.isSubplotConstrained&&C||re("x"),y.isSubplotConstrained&&I||re("y");var d=m-t,f=v-n;!y.isSubplotConstrained||I&&C||(I?(s=o?0:t*v/m,f=d*v/m):(o=s?0:n*m/v,d=f*m/v)),le([o,s,d,f]),ae(),e.emit("plotly_relayouting",w)}function p(e,t,n){for(var i,r,a=1-t,o=0;o<e.length;o++){var s=e[o];if(!s.fixedrange){i=s,r=s._rl[a]+(s._rl[t]-s._rl[a])/Mw(n/s._length);var l=s.l2r(r);!1!==l&&void 0!==l&&(s.range[t]=l)}}return i._length*(i._rl[t]-r)/(i._rl[t]-i._rl[a])}}function re(e,t){for(var n=y.isSubplotConstrained?{x:h,y:g}[e]:y[e+"axes"],i=y.isSubplotConstrained?{x:g,y:h}[e]:[],r=0;r<n.length;r++){var a=n[r],o=a._id,s=y.xLinks[o]||y.yLinks[o],l=i[0]||u[s]||d[s];l&&(t?(t[a._name+".range[0]"]=t[l._name+".range[0]"],t[a._name+".range[1]"]=t[l._name+".range[1]"]):a.range=l.range.slice())}}function ae(){var t,n=[];function i(e){for(t=0;t<e.length;t++)e[t].fixedrange||n.push(e[t]._id)}for(B&&(i(g),i(b.xaxes),i(y.xaxes)),A&&(i(h),i(b.yaxes),i(y.yaxes)),w={},t=0;t<n.length;t++){var r=n[t],a=ww(e,r);yw.drawOne(e,a,{skipTitle:!0}),w[a._name+".range[0]"]=a.range[0],w[a._name+".range[1]"]=a.range[1]}yw.redrawComponents(e,n)}function oe(){if(!e._transitioningWithDuration){var t=e._context.doubleClick,n=[];I&&(n=n.concat(g)),C&&(n=n.concat(h)),y.xaxes&&(n=n.concat(y.xaxes)),y.yaxes&&(n=n.concat(y.yaxes));var i,r,a,o={};if("reset+autosize"===t)for(t="autosize",r=0;r<n.length;r++)if((i=n[r])._rangeInitial&&(i.range[0]!==i._rangeInitial[0]||i.range[1]!==i._rangeInitial[1])||!i._rangeInitial&&!i.autorange){t="reset";break}if("autosize"===t)for(r=0;r<n.length;r++)(i=n[r]).fixedrange||(o[i._name+".autorange"]=!0);else if("reset"===t)for((I||b.isSubplotConstrained)&&(n=n.concat(b.xaxes)),C&&!b.isSubplotConstrained&&(n=n.concat(b.yaxes)),b.isSubplotConstrained&&(I?C||(n=n.concat(h)):n=n.concat(g)),r=0;r<n.length;r++)(i=n[r]).fixedrange||(i._rangeInitial?(a=i._rangeInitial,o[i._name+".range[0]"]=a[0],o[i._name+".range[1]"]=a[1]):o[i._name+".autorange"]=!0);e.emit("plotly_doubleclick",null),hw.call("_guiRelayout",e,o)}}function se(){le([0,0,m,v]),uw.syncOrAsync([Uw.previousPromises,function(){e._fullLayout._replotting=!1,hw.call("_guiRelayout",e,w)}],e)}function le(t){var n,i,r,a,g=e._fullLayout,h=g._plots,f=g._subplots.cartesian;if(Q&&hw.subplotsRegistry.splom.drag(e),F)for(n=0;n<f.length;n++)if(r=(i=h[f[n]]).xaxis,a=i.yaxis,i._scene){var p=uw.simpleMap(r.range,r.r2l),m=uw.simpleMap(a.range,a.r2l);i._scene.update({range:[p[0],m[0],p[1],m[1]]})}if((Q||F)&&(Fw(e),Qw(e)),U){var v=t[2]/l._length,b=t[3]/c._length;for(n=0;n<f.length;n++){r=(i=h[f[n]]).xaxis,a=i.yaxis;var x,w,G,R,L=(B||y.isSubplotConstrained)&&!r.fixedrange&&u[r._id],S=(A||y.isSubplotConstrained)&&!a.fixedrange&&d[a._id];if(L?(x=v,G=s||y.isSubplotConstrained?t[0]:de(r,x)):y.xaHash[r._id]?(x=v,G=t[0]*r._length/l._length):y.yaHash[r._id]?(x=b,G="ns"===C?-t[1]*r._length/c._length:de(r,x,{n:"top",s:"bottom"}[C])):G=ue(r,x=ce(r,v,b)),S?(w=b,R=o||y.isSubplotConstrained?t[1]:de(a,w)):y.yaHash[a._id]?(w=b,R=t[1]*a._length/c._length):y.xaHash[a._id]?(w=v,R="ew"===I?-t[0]*a._length/l._length:de(a,w,{e:"right",w:"left"}[I])):R=ue(a,w=ce(a,v,b)),x||w){x||(x=1),w||(w=1);var V=r._offset-G/x,Z=a._offset-R/w;i.clipRect.call(vw.setTranslate,G,R).call(vw.setScale,x,w),i.plot.call(vw.setTranslate,V,Z).call(vw.setScale,1/x,1/w),x===i.xScaleFactor&&w===i.yScaleFactor||(vw.setPointGroupScale(i.zoomScalePts,x,w),vw.setTextPointsScale(i.zoomScaleTxt,x,w)),vw.hideOutsideRangePoints(i.clipOnAxisFalseTraces,i),i.xScaleFactor=x,i.yScaleFactor=w}}}}function ce(e,t,n){return e.fixedrange?0:B&&b.xaHash[e._id]?t:A&&(b.isSubplotConstrained?b.xaHash:b.yaHash)[e._id]?n:0}function ue(e,t){return t?(e.range=e._r.slice(),Sw(e,t),de(e,t)):0}function de(e,t,n){return e._length*(1-t)*Aw[n||e.constraintoward||"middle"]}return o.length*s.length!=1&&Kw(E,(function(t){if(e._context._scrollZoom.cartesian||e._fullLayout._enablescrollzoom){if(J(),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();Z(),clearTimeout(ee);var n=-t.deltaY;if(isFinite(n)||(n=t.wheelDelta/10),isFinite(n)){var i,r=Math.exp(-Math.min(Math.max(n,-20),20)/200),a=ne.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(t.clientX-a.left)/a.width,c=(a.bottom-t.clientY)/a.height;if(B){for(s||(l=.5),i=0;i<g.length;i++)u(g[i],l,r);re("x"),$[2]*=r,$[0]+=$[2]*l*(1/r-1)}if(A){for(o||(c=.5),i=0;i<h.length;i++)u(h[i],c,r);re("y"),$[3]*=r,$[1]+=$[3]*(1-c)*(1/r-1)}le($),ae(),e.emit("plotly_relayouting",w),ee=setTimeout((function(){e._fullLayout&&($=[0,0,m,v],se())}),te),t.preventDefault()}else uw.log("Did not find wheel motion attributes: ",t)}function u(e,t,n){if(!e.fixedrange){var i=uw.simpleMap(e.range,e.r2l),r=i[0]+(i[1]-i[0])*t;e.range=i.map((function(t){return e.l2r(r+(t-r)*n)}))}}})),E};!function(e){var t=Gs.exports,n=SA,i=YC.exports,r=ux,a=$w,o=Zp.DRAGGERSIZE;e.initInteractions=function(r){var s=r._fullLayout;if(r._context.staticPlot)t.select(r).selectAll(".drag").remove();else if(s._has("cartesian")||s._has("splom")){var l=Object.keys(s._plots||{}).sort((function(e,t){if((s._plots[e].mainplot&&!0)===(s._plots[t].mainplot&&!0)){var n=e.split("y"),i=t.split("y");return n[0]===i[0]?Number(n[1]||1)-Number(i[1]||1):Number(n[0]||1)-Number(i[0]||1)}return s._plots[e].mainplot?1:-1}));l.forEach((function(e){var t=s._plots[e],l=t.xaxis,c=t.yaxis;if(!t.mainplot){var u=a(r,t,l._offset,c._offset,l._length,c._length,"ns","ew");u.onmousemove=function(t){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===e&&r._fullLayout._plots[e]&&n.hover(r,t,e)},n.hover(r,t,e),r._fullLayout._lasthover=u,r._fullLayout._hoversubplot=e},u.onmouseout=function(e){r._dragging||(r._fullLayout._hoversubplot=null,i.unhover(r,e))},r._context.showAxisDragHandles&&(a(r,t,l._offset-o,c._offset-o,o,o,"n","w"),a(r,t,l._offset+l._length,c._offset-o,o,o,"n","e"),a(r,t,l._offset-o,c._offset+c._length,o,o,"s","w"),a(r,t,l._offset+l._length,c._offset+c._length,o,o,"s","e"))}if(r._context.showAxisDragHandles){if(e===l._mainSubplot){var d=l._mainLinePosition;"top"===l.side&&(d-=o),a(r,t,l._offset+.1*l._length,d,.8*l._length,o,"","ew"),a(r,t,l._offset,d,.1*l._length,o,"","w"),a(r,t,l._offset+.9*l._length,d,.1*l._length,o,"","e")}if(e===c._mainSubplot){var g=c._mainLinePosition;"right"!==c.side&&(g-=o),a(r,t,g,c._offset+.1*c._length,o,.8*c._length,"ns",""),a(r,t,g,c._offset+.9*c._length,o,.1*c._length,"s",""),a(r,t,g,c._offset,o,.1*c._length,"n","")}}}));var c=s._hoverlayer.node();c.onmousemove=function(e){e.target=r._fullLayout._lasthover,n.hover(r,e,s._hoversubplot)},c.onclick=function(e){e.target=r._fullLayout._lasthover,n.click(r,e)},c.onmousedown=function(e){r._fullLayout._lasthover.onmousedown(e)},e.updateFx(r)}},e.updateFx=function(e){var t=e._fullLayout,n="pan"===t.dragmode?"move":"crosshair";r(t._draggers,n)}}(HC);var eG={},tG=hg,nG=hd,iG=fg,rG=ng.exports,aG=mh.sorterAsc,oG=hg;eG.containerArrayMatch=function(e){for(var t,n,i=tG.layoutArrayContainers,r=tG.layoutArrayRegexes,a=e.split("[")[0],o=0;o<r.length;o++)if((n=e.match(r[o]))&&0===n.index){t=n[0];break}if(t||(t=i[i.indexOf(a)]),!t)return!1;var s=e.substr(t.length);return s?!!(n=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}};var sG=eG.isAddVal=function(e){return"add"===e||nG(e)},lG=eG.isRemoveVal=function(e){return null===e||"remove"===e};eG.applyContainerArrayChanges=function(e,t,n,i,r){var a=t.astr,o=oG.getComponentMethod(a,"supplyLayoutDefaults"),s=oG.getComponentMethod(a,"draw"),l=oG.getComponentMethod(a,"drawOne"),c=i.replot||i.recalc||o===iG||s===iG,u=e.layout,d=e._fullLayout;if(n[""]){Object.keys(n).length>1&&rG.warn("Full array edits are incompatible with other edits",a);var g=n[""][""];if(lG(g))t.set(null);else{if(!Array.isArray(g))return rG.warn("Unrecognized full array edit value",a,g),!0;t.set(g)}return!c&&(o(u,d),s(e),!0)}var h,f,p,m,v,b,y,I,C=Object.keys(n).map(Number).sort(aG),x=t.get(),B=x||[],A=r(d,a).get(),F=[],Q=-1,U=B.length;for(h=0;h<C.length;h++)if(m=n[p=C[h]],v=Object.keys(m),b=m[""],y=sG(b),p<0||p>B.length-(y?0:1))rG.warn("index out of range",a,p);else if(void 0!==b)v.length>1&&rG.warn("Insertion & removal are incompatible with edits to the same index.",a,p),lG(b)?F.push(p):y?("add"===b&&(b={}),B.splice(p,0,b),A&&A.splice(p,0,{})):rG.warn("Unrecognized full object edit value",a,p,b),-1===Q&&(Q=p);else for(f=0;f<v.length;f++)I=a+"["+p+"].",r(B[p],v[f],I).set(m[v[f]]);for(h=F.length-1;h>=0;h--)B.splice(F[h],1),A&&A.splice(F[h],1);if(B.length?x||t.set(B):t.set(null),c)return!1;if(o(u,d),l!==iG){var w;if(-1===Q)w=C;else{for(U=Math.max(B.length,U),w=[],h=0;h<C.length&&!((p=C[h])>=Q);h++)w.push(p);for(h=Q;h<U;h++)w.push(h)}for(h=0;h<w.length;h++)l(e,w[h])}else s(e);return!0};var cG={};!function(e){var t=Yu,n=Ng,r=hg,a=ws.exports,o=Fp.exports,s=Sp,l=Hd.exports,c=s.cleanId,u=s.getFromTrace,d=r.traceIs;function g(e,t){var n=e[t],i=t.charAt(0);n&&"paper"!==n&&(e[t]=c(n,i,!0))}function h(e){function t(t,n){var i=e[t],r=e.title&&e.title[n];i&&!r&&(e.title||(e.title={}),e.title[n]=e[t],delete e[t])}e&&("string"!=typeof e.title&&"number"!=typeof e.title||(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"))}function f(e){if(!a.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function p(e,t,n,i){if(n&&!i)return e;if(i&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var r,a=Math.min(e.length,t.length);for(r=0;r<a&&e.charAt(r)===t.charAt(r);r++);return e.substr(0,r).trim()}function m(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function v(e,t){return t in e&&"object"===i(e[t])&&0===Object.keys(e[t]).length}e.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&a.log("Clearing previous rejected promises from queue."),e._promises=[]},e.cleanLayout=function(t){var i,r;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var s=(o.subplotsRegistry.cartesian||{}).attrRegex,u=(o.subplotsRegistry.polar||{}).attrRegex,d=(o.subplotsRegistry.ternary||{}).attrRegex,f=(o.subplotsRegistry.gl3d||{}).attrRegex,p=Object.keys(t);for(i=0;i<p.length;i++){var m=p[i];if(s&&s.test(m)){var b=t[m];b.anchor&&"free"!==b.anchor&&(b.anchor=c(b.anchor)),b.overlaying&&(b.overlaying=c(b.overlaying)),b.type||(b.isdate?b.type="date":b.islog?b.type="log":!1===b.isdate&&!1===b.islog&&(b.type="linear")),"withzero"!==b.autorange&&"tozero"!==b.autorange||(b.autorange=!0,b.rangemode="tozero"),delete b.islog,delete b.isdate,delete b.categories,v(b,"domain")&&delete b.domain,void 0!==b.autotick&&(void 0===b.tickmode&&(b.tickmode=b.autotick?"auto":"linear"),delete b.autotick),h(b)}else if(u&&u.test(m)){h(t[m].radialaxis)}else if(d&&d.test(m)){var y=t[m];h(y.aaxis),h(y.baxis),h(y.caxis)}else if(f&&f.test(m)){var I=t[m],C=I.cameraposition;if(Array.isArray(C)&&4===C[0].length){var x=C[0],B=C[1],A=C[2],F=n([],x),Q=[];for(r=0;r<3;++r)Q[r]=B[r]+A*F[2+4*r];I.camera={eye:{x:Q[0],y:Q[1],z:Q[2]},center:{x:B[0],y:B[1],z:B[2]},up:{x:0,y:0,z:1}},delete I.cameraposition}h(I.xaxis),h(I.yaxis),h(I.zaxis)}}var U=Array.isArray(t.annotations)?t.annotations.length:0;for(i=0;i<U;i++){var w=t.annotations[i];a.isPlainObject(w)&&(w.ref&&("paper"===w.ref?(w.xref="paper",w.yref="paper"):"data"===w.ref&&(w.xref="x",w.yref="y"),delete w.ref),g(w,"xref"),g(w,"yref"))}var G=Array.isArray(t.shapes)?t.shapes.length:0;for(i=0;i<G;i++){var R=t.shapes[i];a.isPlainObject(R)&&(g(R,"xref"),g(R,"yref"))}var L=Array.isArray(t.images)?t.images.length:0;for(i=0;i<L;i++){var S=t.images[i];a.isPlainObject(S)&&(g(S,"xref"),g(S,"yref"))}var V=t.legend;return V&&(V.x>3?(V.x=1.02,V.xanchor="left"):V.x<-2&&(V.x=-.02,V.xanchor="right"),V.y>3?(V.y=1.02,V.yanchor="bottom"):V.y<-2&&(V.y=-.02,V.yanchor="top")),h(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),l.clean(t),t.template&&t.template.layout&&e.cleanLayout(t.template.layout),t},e.cleanData=function(t){for(var n=0;n<t.length;n++){var i,s=t[n];if("histogramy"===s.type&&"xbins"in s&&!("ybins"in s)&&(s.ybins=s.xbins,delete s.xbins),s.error_y&&"opacity"in s.error_y){var u=l.defaults,g=s.error_y.color||(d(s,"bar")?l.defaultLine:u[n%u.length]);s.error_y.color=l.addOpacity(l.rgb(g),l.opacity(g)*s.error_y.opacity),delete s.error_y.opacity}if("bardir"in s&&("h"!==s.bardir||!d(s,"bar")&&"histogram"!==s.type.substr(0,9)||(s.orientation="h",e.swapXYData(s)),delete s.bardir),"histogramy"===s.type&&e.swapXYData(s),"histogramx"!==s.type&&"histogramy"!==s.type||(s.type="histogram"),"scl"in s&&!("colorscale"in s)&&(s.colorscale=s.scl,delete s.scl),"reversescl"in s&&!("reversescale"in s)&&(s.reversescale=s.reversescl,delete s.reversescl),s.xaxis&&(s.xaxis=c(s.xaxis,"x")),s.yaxis&&(s.yaxis=c(s.yaxis,"y")),d(s,"gl3d")&&s.scene&&(s.scene=o.subplotsRegistry.gl3d.cleanId(s.scene)),!d(s,"pie-like")&&!d(s,"bar-like"))if(Array.isArray(s.textposition))for(i=0;i<s.textposition.length;i++)s.textposition[i]=m(s.textposition[i]);else s.textposition&&(s.textposition=m(s.textposition));var b=r.getModule(s);if(b&&b.colorbar){var y=b.colorbar.container,I=y?s[y]:s;I&&I.colorscale&&("YIGnBu"===I.colorscale&&(I.colorscale="YlGnBu"),"YIOrRd"===I.colorscale&&(I.colorscale="YlOrRd"))}if("surface"===s.type&&a.isPlainObject(s.contours)){var C=["x","y","z"];for(i=0;i<C.length;i++){var x=s.contours[C[i]];a.isPlainObject(x)&&(x.highlightColor&&(x.highlightcolor=x.highlightColor,delete x.highlightColor),x.highlightWidth&&(x.highlightwidth=x.highlightWidth,delete x.highlightWidth))}}if("candlestick"===s.type||"ohlc"===s.type){var B=!1!==(s.increasing||{}).showlegend,A=!1!==(s.decreasing||{}).showlegend,F=f(s.increasing),Q=f(s.decreasing);if(!1!==F&&!1!==Q){var U=p(F,Q,B,A);U&&(s.name=U)}else!F&&!Q||s.name||(s.name=F||Q)}if(Array.isArray(s.transforms)){var w=s.transforms;for(i=0;i<w.length;i++){var G=w[i];if(a.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var R=G.styles,L=Object.keys(R);G.styles=[];for(var S=0;S<L.length;S++)G.styles.push({target:L[S],value:R[L[S]]})}}}}v(s,"line")&&delete s.line,"marker"in s&&(v(s.marker,"line")&&delete s.marker.line,v(s,"marker")&&delete s.marker),l.clean(s),s.autobinx&&(delete s.autobinx,delete s.xbins),s.autobiny&&(delete s.autobiny,delete s.ybins),h(s),s.colorbar&&h(s.colorbar),s.marker&&s.marker.colorbar&&h(s.marker.colorbar),s.line&&s.line.colorbar&&h(s.line.colorbar),s.aaxis&&h(s.aaxis),s.baxis&&h(s.baxis)}},e.swapXYData=function(e){var t;if(a.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,i="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);a.swapAttrs(e,["error_?.copy_ystyle"]),i&&a.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof e.hoverinfo){var r=e.hoverinfo.split("+");for(t=0;t<r.length;t++)"x"===r[t]?r[t]="y":"y"===r[t]&&(r[t]="x");e.hoverinfo=r.join("+")}},e.coerceTraceIndices=function(e,n){if(t(n))return[n];if(!Array.isArray(n)||!n.length)return e.data.map((function(e,t){return t}));if(Array.isArray(n)){for(var i=[],r=0;r<n.length;r++)a.isIndex(n[r],e.data.length)?i.push(n[r]):a.warn("trace index (",n[r],") is not a number or is out of bounds");return i}return n},e.manageArrayContainers=function(e,n,i){var r=e.obj,o=e.parts,s=o.length,l=o[s-1],c=t(l);if(c&&null===n){var u=o.slice(0,s-1).join(".");a.nestedProperty(r,u).get().splice(l,1)}else c&&void 0===e.get()?(void 0===e.get()&&(i[e.astr]=null),e.set(n)):e.set(n)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function y(e){var t=e.search(b);if(t>0)return e.substr(0,t)}e.hasParent=function(e,t){for(var n=y(t);n;){if(n in e)return!0;n=y(n)}return!1};var I=["x","y","z"];e.clearAxisTypes=function(e,t,n){for(var i=0;i<t.length;i++)for(var r=e._fullData[i],o=0;o<3;o++){var s=u(e,r,I[o]);if(s&&"log"!==s.type){var l=s._name,c=s._id.substr(1);if("scene"===c.substr(0,5)){if(void 0!==n[c])continue;l=c+"."+l}var d=l+".type";void 0===n[l]&&void 0===n[d]&&a.nestedProperty(e.layout,d).set(null)}}}}(cG),function(e){var t=Gs.exports,n=Yu,r=Hf,a=ws.exports,o=a.nestedProperty,s=sp,l=dp,c=hg,u=gp,d=Fp.exports,g=Im.exports,h=Am.exports,f=Hd.exports,p=HC.initInteractions,m=xm,v=lw.clearSelect,b=ag.dfltConfig,y=eG,I=cG,C=kA,x=Cp,B=Zp.AX_NAME_PATTERN,A=0;function F(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function Q(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){a.error(e)}}function U(e,t){Q(e,f.combine(t,"white"))}function w(e,n){if(!e._context){e._context=a.extendDeep({},b);var i=t.select("base");e._context._baseUrl=i.size()&&i.attr("href")?window.location.href.split("#")[0]:""}var o,s,l,c=e._context;if(n){for(s=Object.keys(n),o=0;o<s.length;o++)"editable"!==(l=s[o])&&"edits"!==l&&l in c&&("setBackground"===l&&"opaque"===n[l]?c[l]=U:c[l]=n[l]);n.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio);var u=n.editable;if(void 0!==u)for(c.editable=u,s=Object.keys(c.edits),o=0;o<s.length;o++)c.edits[s[o]]=u;if(n.edits)for(s=Object.keys(n.edits),o=0;o<s.length;o++)(l=s[o])in c.edits&&(c.edits[l]=n.edits[l]);c._exportedPlot=n._exportedPlot}c.staticPlot&&(c.editable=!1,c.edits={},c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1),"hover"!==c.displayModeBar||r||(c.displayModeBar=!0),"transparent"!==c.setBackground&&"function"==typeof c.setBackground||(c.setBackground=Q),c._hasZeroHeight=c._hasZeroHeight||0===e.clientHeight,c._hasZeroWidth=c._hasZeroWidth||0===e.clientWidth;var d=c.scrollZoom,g=c._scrollZoom={};if(!0===d)g.cartesian=1,g.gl3d=1,g.geo=1,g.mapbox=1;else if("string"==typeof d){var h=d.split("+");for(o=0;o<h.length;o++)g[h[o]]=1}else!1!==d&&(g.gl3d=1,g.geo=1,g.mapbox=1)}function G(e,t){var n,i,r=t+1,a=[];for(n=0;n<e.length;n++)(i=e[n])<0?a.push(r+i):a.push(i);return a}function R(e,t,n){var i,r;for(i=0;i<t.length;i++){if((r=t[i])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=e.data.length||r<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(r,i+1)>-1||r>=0&&t.indexOf(-e.data.length+r)>-1||r<0&&t.indexOf(e.data.length+r)>-1)throw new Error("each index in "+n+" must be unique.")}}function L(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),R(e,t,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&R(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function S(e,t,i,r,s){!function(e,t,n,i){var r=a.isPlainObject(i);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!a.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var o in R(e,n,"indices"),t){if(!Array.isArray(t[o])||t[o].length!==n.length)throw new Error("attribute "+o+" must be an array of length equal to indices array length");if(r&&(!(o in i)||!Array.isArray(i[o])||i[o].length!==t[o].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,i,r);for(var l=function(e,t,i,r){var s,l,c,u,d,g=a.isPlainObject(r),h=[];for(var f in Array.isArray(i)||(i=[i]),i=G(i,e.data.length-1),t)for(var p=0;p<i.length;p++){if(s=e.data[i[p]],l=(c=o(s,f)).get(),u=t[f][p],!a.isArrayOrTypedArray(u))throw new Error("attribute: "+f+" index: "+p+" must be an array");if(!a.isArrayOrTypedArray(l))throw new Error("cannot extend missing or non-array attribute: "+f);if(l.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+f);d=g?r[f][p]:r,n(d)||(d=-1),h.push({prop:c,target:l,insert:u,maxp:Math.floor(d)})}return h}(e,t,i,r),c={},u={},d=0;d<l.length;d++){var g=l[d].prop,h=l[d].maxp,f=s(l[d].target,l[d].insert,h);g.set(f[0]),Array.isArray(c[g.astr])||(c[g.astr]=[]),c[g.astr].push(f[1]),Array.isArray(u[g.astr])||(u[g.astr]=[]),u[g.astr].push(l[d].target.length)}return{update:c,maxPoints:u}}function V(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Z(t,n,i,r){t=a.getGraphDiv(t),I.clearPromiseQueue(t);var o={};if("string"==typeof n)o[n]=i;else{if(!a.isPlainObject(n))return a.warn("Restyle fail.",n,i,r),Promise.reject();o=a.extendFlat({},n),void 0===r&&(r=i)}Object.keys(o).length&&(t.changed=!0);var s=I.coerceTraceIndices(t,r),c=N(t,o,s),u=c.flags;u.calc&&(t.calcdata=void 0),u.clearAxisTypes&&I.clearAxisTypes(t,s,{});var g=[];u.fullReplot?g.push(e._doPlot):(g.push(d.previousPromises),d.supplyDefaults(t),u.markerSize&&(d.doCalcdata(t),M(g)),u.style&&g.push(C.doTraceStyle),u.colorbars&&g.push(C.doColorBars),g.push(F)),g.push(d.rehover,d.redrag),l.add(t,Z,[t,c.undoit,c.traces],Z,[t,c.redoit,c.traces]);var h=a.syncOrAsync(g,t);return h&&h.then||(h=Promise.resolve()),h.then((function(){return t.emit("plotly_restyle",c.eventData),t}))}function k(e){return void 0===e?null:e}function E(e,t){return t?function(t,n,i){var r=o(t,n),a=r.set;return r.set=function(t){X((i||"")+n,r.get(),t,e),a(t)},r}:o}function X(e,t,n,i){if(Array.isArray(t)||Array.isArray(n))for(var r=Array.isArray(t)?t:[],o=Array.isArray(n)?n:[],s=Math.max(r.length,o.length),l=0;l<s;l++)X(e+"["+l+"]",r[l],o[l],i);else if(a.isPlainObject(t)||a.isPlainObject(n)){var c=a.isPlainObject(t)?t:{},u=a.isPlainObject(n)?n:{},d=a.extendFlat({},c,u);for(var g in d)X(e+"."+g,c[g],u[g],i)}else void 0===i[e]&&(i[e]=k(t))}function N(e,t,n){var i,r=e._fullLayout,s=e._fullData,l=e.data,h=r._guiEditing,f=E(r._preGUI,h),p=a.extendDeepAll({},t);W(t);var m,v=x.traceFlags(),b={},y={};function C(){return n.map((function(){}))}function B(e){var t=g.id2name(e);-1===m.indexOf(t)&&m.push(t)}function A(e){return"LAYOUT"+e+".autorange"}function F(e){return"LAYOUT"+e+".range"}function Q(e){for(var t=e;t<s.length;t++)if(s[t]._input===l[e])return s[t]}function U(i,a,o){if(Array.isArray(i))i.forEach((function(e){U(e,a,o)}));else if(!(i in t)&&!I.hasParent(t,i)){var s;if("LAYOUT"===i.substr(0,6))s=f(e.layout,i.replace("LAYOUT",""));else{var c=n[o];s=E(r._tracePreGUI[Q(c)._fullInput.uid],h)(l[c],i)}i in y||(y[i]=C()),void 0===y[i][o]&&(y[i][o]=k(s.get())),void 0!==a&&s.set(a)}}function w(e){return function(t){return s[t][e]}}function G(e){return function(t,i){return!1===t?s[n[i]][e]:null}}for(var R in t){if(I.hasParent(t,R))throw new Error("cannot set "+R+" and a parent attribute simultaneously");var L,S,V,Z,X,N,_=t[R];if("autobinx"!==R&&"autobiny"!==R||(R=R.charAt(R.length-1)+"bins",_=Array.isArray(_)?_.map(G(R)):!1===_?n.map(w(R)):null),b[R]=_,"LAYOUT"!==R.substr(0,6)){for(y[R]=C(),i=0;i<n.length;i++){if(L=l[n[i]],S=Q(n[i]),Z=(V=E(r._tracePreGUI[S._fullInput.uid],h)(L,R)).get(),void 0!==(X=Array.isArray(_)?_[i%_.length]:_)){var T=V.parts[V.parts.length-1],M=R.substr(0,R.length-T.length-1),H=M?M+".":"",Y=M?o(S,M).get():S;if((N=u.getTraceValObject(S,V.parts))&&N.impliedEdits&&null!==X)for(var D in N.impliedEdits)U(a.relativeAttr(R,D),N.impliedEdits[D],i);else if("thicknessmode"!==T&&"lenmode"!==T||Z===X||"fraction"!==X&&"pixels"!==X||!Y){if("type"===R&&("pie"===X!=("pie"===Z)||"funnelarea"===X!=("funnelarea"===Z))){var z="x",O="y";"bar"!==X&&"bar"!==Z||"h"!==L.orientation||(z="y",O="x"),a.swapAttrs(L,["?","?src"],"labels",z),a.swapAttrs(L,["d?","?0"],"label",z),a.swapAttrs(L,["?","?src"],"values",O),"pie"===Z||"funnelarea"===Z?(o(L,"marker.color").set(o(L,"marker.colors").get()),r._pielayer.selectAll("g.trace").remove()):c.traceIs(L,"cartesian")&&o(L,"marker.colors").set(o(L,"marker.color").get())}}else{var J=r._size,j=Y.orient,P="top"===j||"bottom"===j;if("thicknessmode"===T){var K=P?J.h:J.w;U(H+"thickness",Y.thickness*("fraction"===X?1/K:K),i)}else{var q=P?J.w:J.h;U(H+"len",Y.len*("fraction"===X?1/q:q),i)}}y[R][i]=k(Z);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(R)){if("orientation"===R){V.set(X);var $=L.x&&!L.y?"h":"v";if((V.get()||$)===S.orientation)continue}else"orientationaxes"===R&&(L.orientation={v:"h",h:"v"}[S.orientation]);I.swapXYData(L),v.calc=v.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(V.parts[0])?(I.manageArrayContainers(V,X,y),v.calc=!0):(N?N.arrayOk&&!c.traceIs(S,"regl")&&(a.isArrayOrTypedArray(X)||a.isArrayOrTypedArray(Z))?v.calc=!0:x.update(v,N):v.calc=!0,V.set(X))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(R)&&g.swap(e,n),"orientationaxes"===R){var ee=o(e.layout,"hovermode"),te=ee.get();"x"===te?ee.set("y"):"y"===te?ee.set("x"):"x unified"===te?ee.set("y unified"):"y unified"===te&&ee.set("x unified")}if(-1!==["orientation","type"].indexOf(R)){for(m=[],i=0;i<n.length;i++){var ne=l[n[i]];c.traceIs(ne,"cartesian")&&(B(ne.xaxis||"x"),B(ne.yaxis||"y"))}U(m.map(A),!0,0),U(m.map(F),[0,1],0)}}else V=f(e.layout,R.replace("LAYOUT","")),y[R]=[k(V.get())],V.set(Array.isArray(_)?_[0]:_),v.calc=!0}return(v.calc||v.plot)&&(v.fullReplot=!0),{flags:v,undoit:y,redoit:b,traces:n,eventData:a.extendDeepNoArrays([],[p,n])}}function W(e){var t,n,i,r=a.counterRegex("axis",".title",!1,!1),o=/colorbar\.title$/,s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],i=e[n],"title"!==n&&!r.test(n)&&!o.test(n)||"string"!=typeof i&&"number"!=typeof i?n.indexOf("titlefont")>-1&&-1===n.indexOf("grouptitlefont")?l(n,n.replace("titlefont","title.font")):n.indexOf("titleposition")>-1?l(n,n.replace("titleposition","title.position")):n.indexOf("titleside")>-1?l(n,n.replace("titleside","title.side")):n.indexOf("titleoffset")>-1&&l(n,n.replace("titleoffset","title.offset")):l(n,n.replace("title","title.text"));function l(t,n){e[n]=e[t],delete e[t]}}function _(e,t,n){e=a.getGraphDiv(e),I.clearPromiseQueue(e);var i={};if("string"==typeof t)i[t]=n;else{if(!a.isPlainObject(t))return a.warn("Relayout fail.",t,n),Promise.reject();i=a.extendFlat({},t)}Object.keys(i).length&&(e.changed=!0);var r=z(e,i),o=r.flags;o.calc&&(e.calcdata=void 0);var s=[d.previousPromises];o.layoutReplot?s.push(C.layoutReplot):Object.keys(i).length&&(T(e,o,r)||d.supplyDefaults(e),o.legend&&s.push(C.doLegend),o.layoutstyle&&s.push(C.layoutStyles),o.axrange&&M(s,r.rangesAltered),o.ticks&&s.push(C.doTicksRelayout),o.modebar&&s.push(C.doModeBar),o.camera&&s.push(C.doCamera),o.colorbars&&s.push(C.doColorBars),s.push(F)),s.push(d.rehover,d.redrag),l.add(e,_,[e,r.undoit],_,[e,r.redoit]);var c=a.syncOrAsync(s,e);return c&&c.then||(c=Promise.resolve(e)),c.then((function(){return e.emit("plotly_relayout",r.eventData),e}))}function T(e,t,n){var i=e._fullLayout;if(!t.axrange)return!1;for(var r in t)if("axrange"!==r&&t[r])return!1;for(var a in n.rangesAltered){var o=g.id2name(a),s=e.layout[o],l=i[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)if(c!==a){var u=i[g.id2name(c)];u.autorange=l.autorange,u.range=l.range.slice(),u._input.range=l.range.slice()}}return!0}function M(e,t){var n=t?function(e){var n=[],i=!0;for(var r in t){var a=g.getFromId(e,r);if(n.push(r),-1!==(a.ticklabelposition||"").indexOf("inside")&&a._anchorAxis&&n.push(a._anchorAxis._id),a._matchGroup)for(var o in a._matchGroup)t[o]||n.push(o);a.automargin&&(i=!1)}return g.draw(e,n,{skipTitle:i})}:function(e){return g.draw(e,"redraw")};e.push(v,C.doAutoRangeAndConstraints,n,C.drawData,C.finalDraw)}var H=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Y=/^[xyz]axis[0-9]*\.autorange$/,D=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function z(e,t){var n,i,r,s=e.layout,l=e._fullLayout,d=l._guiEditing,h=E(l._preGUI,d),f=Object.keys(t),p=g.list(e),m=a.extendDeepAll({},t),v={};for(W(t),f=Object.keys(t),i=0;i<f.length;i++)if(0===f[i].indexOf("allaxes")){for(r=0;r<p.length;r++){var b=p[r]._id.substr(1),C=-1!==b.indexOf("scene")?b+".":"",A=f[i].replace("allaxes",C+p[r]._name);t[A]||(t[A]=t[f[i]])}delete t[f[i]]}var F=x.layoutFlags(),Q={},U={};function w(e,n){if(Array.isArray(e))e.forEach((function(e){w(e,n)}));else if(!(e in t)&&!I.hasParent(t,e)){var i=h(s,e);e in U||(U[e]=k(i.get())),void 0!==n&&i.set(n)}}var G,R={};function L(e){var t=g.name2id(e.split(".")[0]);return R[t]=1,t}for(var S in t){if(I.hasParent(t,S))throw new Error("cannot set "+S+" and a parent attribute simultaneously");for(var V=h(s,S),Z=t[S],X=V.parts.length-1;X>0&&"string"!=typeof V.parts[X];)X--;var N=V.parts[X],_=V.parts[X-1]+"."+N,T=V.parts.slice(0,X).join("."),M=o(e.layout,T).get(),z=o(l,T).get(),J=V.get();if(void 0!==Z){Q[S]=Z,U[S]="reverse"===N?Z:k(J);var j=u.getLayoutValObject(l,V.parts);if(j&&j.impliedEdits&&null!==Z)for(var P in j.impliedEdits)w(a.relativeAttr(S,P),j.impliedEdits[P]);if(-1!==["width","height"].indexOf(S))if(Z){w("autosize",null);var K="height"===S?"width":"height";w(K,l[K])}else l[S]=e._initialAutoSize[S];else if("autosize"===S)w("width",Z?null:l.width),w("height",Z?null:l.height);else if(_.match(H))L(_),o(l,T+"._inputRange").set(null);else if(_.match(Y)){L(_),o(l,T+"._inputRange").set(null);var q=o(l,T).get();q._inputDomain&&(q._input.domain=q._inputDomain.slice())}else _.match(D)&&o(l,T+"._inputDomain").set(null);if("type"===N){G=M;var $="linear"===z.type&&"log"===Z,ee="log"===z.type&&"linear"===Z;if($||ee){if(G&&G.range)if(z.autorange)$&&(G.range=G.range[1]>G.range[0]?[1,2]:[2,1]);else{var te=G.range[0],ne=G.range[1];$?(te<=0&&ne<=0&&w(T+".autorange",!0),te<=0?te=ne/1e6:ne<=0&&(ne=te/1e6),w(T+".range[0]",Math.log(te)/Math.LN10),w(T+".range[1]",Math.log(ne)/Math.LN10)):(w(T+".range[0]",Math.pow(10,te)),w(T+".range[1]",Math.pow(10,ne)))}else w(T+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[V.parts[0]]&&"radialaxis"===V.parts[1]&&delete l[V.parts[0]]._subplot.viewInitial["radialaxis.range"],c.getComponentMethod("annotations","convertCoords")(e,z,Z,w),c.getComponentMethod("images","convertCoords")(e,z,Z,w)}else w(T+".autorange",!0),w(T+".range",null);o(l,T+"._inputRange").set(null)}else if(N.match(B)){var ie=o(l,S).get(),re=(Z||{}).type;re&&"-"!==re||(re="linear"),c.getComponentMethod("annotations","convertCoords")(e,ie,re,w),c.getComponentMethod("images","convertCoords")(e,ie,re,w)}var ae=y.containerArrayMatch(S);if(ae){n=ae.array,i=ae.index;var oe=ae.property,se=j||{editType:"calc"};""!==i&&""===oe&&(y.isAddVal(Z)?U[S]=null:y.isRemoveVal(Z)?U[S]=(o(s,n).get()||[])[i]:a.warn("unrecognized full object value",t)),x.update(F,se),v[n]||(v[n]={});var le=v[n][i];le||(le=v[n][i]={}),le[oe]=Z,delete t[S]}else"reverse"===N?(M.range?M.range.reverse():(w(T+".autorange",!0),M.range=[1,0]),z.autorange?F.calc=!0:F.plot=!0):(l._has("scatter-like")&&l._has("regl")&&"dragmode"===S&&("lasso"===Z||"select"===Z)&&"lasso"!==J&&"select"!==J||l._has("gl2d")?F.plot=!0:j?x.update(F,j):F.calc=!0,V.set(Z))}}for(n in v){y.applyContainerArrayChanges(e,h(s,n),v[n],F,h)||(F.plot=!0)}for(var ce in R){var ue=(G=g.getFromId(e,ce))&&G._constraintGroup;if(ue)for(var de in F.calc=!0,ue)R[de]||(g.getFromId(e,de)._constraintShrinkable=!0)}return(O(e)||t.height||t.width)&&(F.plot=!0),(F.plot||F.calc)&&(F.layoutReplot=!0),{flags:F,rangesAltered:R,undoit:U,redoit:Q,eventData:m}}function O(e){var t=e._fullLayout,n=t.width,i=t.height;return e.layout.autosize&&d.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==i}function J(t,n,i,r){t=a.getGraphDiv(t),I.clearPromiseQueue(t),a.isPlainObject(n)||(n={}),a.isPlainObject(i)||(i={}),Object.keys(n).length&&(t.changed=!0),Object.keys(i).length&&(t.changed=!0);var o=I.coerceTraceIndices(t,r),s=N(t,a.extendFlat({},n),o),c=s.flags,u=z(t,a.extendFlat({},i)),g=u.flags;(c.calc||g.calc)&&(t.calcdata=void 0),c.clearAxisTypes&&I.clearAxisTypes(t,o,i);var h=[];g.layoutReplot?h.push(C.layoutReplot):c.fullReplot?h.push(e._doPlot):(h.push(d.previousPromises),T(t,g,u)||d.supplyDefaults(t),c.style&&h.push(C.doTraceStyle),(c.colorbars||g.colorbars)&&h.push(C.doColorBars),g.legend&&h.push(C.doLegend),g.layoutstyle&&h.push(C.layoutStyles),g.axrange&&M(h,u.rangesAltered),g.ticks&&h.push(C.doTicksRelayout),g.modebar&&h.push(C.doModeBar),g.camera&&h.push(C.doCamera),h.push(F)),h.push(d.rehover,d.redrag),l.add(t,J,[t,s.undoit,u.undoit,s.traces],J,[t,s.redoit,u.redoit,s.traces]);var f=a.syncOrAsync(h,t);return f&&f.then||(f=Promise.resolve(t)),f.then((function(){return t.emit("plotly_update",{data:s.eventData,layout:u.eventData}),t}))}function j(e){return function(t){t._fullLayout._guiEditing=!0;var n=e.apply(null,arguments);return t._fullLayout._guiEditing=!1,n}}var P=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],K=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function q(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=e.match(i.pattern);if(r){var a=r[1]||"";return{head:a,tail:e.substr(a.length+1),attr:i.attr}}}}function $(e,t){var n=o(t,e).get();if(void 0!==n)return n;var i=e.split(".");for(i.pop();i.length>1;)if(i.pop(),void 0!==(n=o(t,i.join(".")+".uirevision").get()))return n;return t.uirevision}function ee(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}function te(e,t,n){for(var i=0;i<t.length;i++)if(t[i].uid===e)return i;return!t[n]||t[n].uid?-1:n}function ne(e,t){var n=a.isPlainObject(e),i=Array.isArray(e);return n||i?(n&&a.isPlainObject(t)||i&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function ie(e,t,n,i){var r,s,l,c=i.getValObject,u=i.flags,d=i.immutable,g=i.inArray,h=i.arrayIndex;function f(){var e=r.editType;g&&-1!==e.indexOf("arraydraw")?a.pushUnique(u.arrays[g],h):(x.update(u,r),"none"!==e&&u.nChanges++,i.transition&&r.anim&&u.nChangesAnim++,(H.test(l)||Y.test(l))&&(u.rangesAltered[n[0]]=1),D.test(l)&&o(t,"_inputDomain").set(null),"datarevision"===s&&(u.newDataRevision=1))}function p(e){return"data_array"===e.valType||e.arrayOk}for(s in e){if(u.calc&&!i.transition)return;var m=e[s],v=t[s],b=n.concat(s);if(l=b.join("."),"_"!==s.charAt(0)&&"function"!=typeof m&&m!==v){if(("tick0"===s||"dtick"===s)&&"geo"!==n[0]){var y=t.tickmode;if("auto"===y||"array"===y||!y)continue}if(("range"!==s||!t.autorange)&&("zmin"!==s&&"zmax"!==s||"contourcarpet"!==t.type)&&(r=c(b))&&(!r._compareAsJSON||JSON.stringify(m)!==JSON.stringify(v))){var I,C=r.valType,B=p(r),A=Array.isArray(m),F=Array.isArray(v);if(A&&F){var Q="_input_"+s,U=e[Q],w=t[Q];if(Array.isArray(U)&&U===w)continue}if(void 0===v)B&&A?u.calc=!0:f();else if(r._isLinkedToArray){var G=[],R=!1;g||(u.arrays[s]=G);var L=Math.min(m.length,v.length),S=Math.max(m.length,v.length);if(L!==S){if("arraydraw"!==r.editType){f();continue}R=!0}for(I=0;I<L;I++)ie(m[I],v[I],b.concat(I),a.extendFlat({inArray:s,arrayIndex:I},i));if(R)for(I=L;I<S;I++)G.push(I)}else!C&&a.isPlainObject(m)?ie(m,v,b,i):B?A&&F?(d&&(u.calc=!0),(d||i.newDataRevision)&&f()):A!==F?u.calc=!0:f():A&&F&&m.length===v.length&&String(m)===String(v)||f()}}}for(s in t)if(!(s in e)&&"_"!==s.charAt(0)&&"function"!=typeof t[s]){if(p(r=c(n.concat(s)))&&Array.isArray(t[s]))return void(u.calc=!0);f()}}function re(e,t){var n;for(n in e)if("_"!==n.charAt(0)){var i=e[n],r=t[n];if(i!==r)if(a.isPlainObject(i)&&a.isPlainObject(r)){if(re(i,r))return!0}else{if(!Array.isArray(i)||!Array.isArray(r))return!0;if(i.length!==r.length)return!0;for(var o=0;o<i.length;o++)if(i[o]!==r[o]){if(!a.isPlainObject(i[o])||!a.isPlainObject(r[o]))return!0;if(re(i[o],r[o]))return!0}}}}function ae(e){var t=e._fullLayout,n=e.getBoundingClientRect();if(!a.equalDomRects(n,t._lastBBox)){var i=t._invTransform=a.inverseTransformMatrix(a.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(i[0][0]*i[0][0]+i[0][1]*i[0][1]+i[0][2]*i[0][2]),t._invScaleY=Math.sqrt(i[1][0]*i[1][0]+i[1][1]*i[1][1]+i[1][2]*i[1][2]),t._lastBBox=n}}e.animate=function(e,t,n){if(e=a.getGraphDiv(e),!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var r=e._transitionData;r._frameQueue||(r._frameQueue=[]);var o=(n=d.supplyAnimationDefaults(n)).transition,s=n.frame;function l(e){return Array.isArray(o)?e>=o.length?o[0]:o[e]:o}function c(e){return Array.isArray(s)?e>=s.length?s[0]:s[e]:s}function u(e,t){var n=0;return function(){if(e&&++n===t)return e()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise((function(s,g){function h(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var t=r._currentFrame=r._frameQueue.shift();if(t){var n=t.name?t.name.toString():null;e._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=t.frameOpts.duration,d.transition(e,t.frame.data,t.frame.layout,I.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then((function(){t.onComplete&&t.onComplete()})),e.emit("plotly_animatingframe",{name:n,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else e.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}function f(){e.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null;!function e(){r._animationRaf=window.requestAnimationFrame(e),Date.now()-r._lastFrameAt>r._timeToNext&&h()}()}var p,m,v=0;function b(e){return Array.isArray(o)?v>=o.length?e.transitionOpts=o[v]:e.transitionOpts=o[0]:e.transitionOpts=o,v++,e}var y=[],C=null==t,x=Array.isArray(t);if(!C&&!x&&a.isPlainObject(t))y.push({type:"object",data:b(a.extendFlat({},t))});else if(C||-1!==["string","number"].indexOf(i(t)))for(p=0;p<r._frames.length;p++)(m=r._frames[p])&&(C||String(m.group)===String(t))&&y.push({type:"byname",name:String(m.name),data:b({name:m.name})});else if(x)for(p=0;p<t.length;p++){var B=t[p];-1!==["number","string"].indexOf(i(B))?(B=String(B),y.push({type:"byname",name:B,data:b({name:B})})):a.isPlainObject(B)&&y.push({type:"object",data:b(a.extendFlat({},B))})}for(p=0;p<y.length;p++)if("byname"===(m=y[p]).type&&!r._frameHash[m.data.name])return a.warn('animate failure: frame not found: "'+m.data.name+'"'),void g();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var t=r._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&y.reverse();var A=e._fullLayout._currentFrame;if(A&&n.fromcurrent){var F=-1;for(p=0;p<y.length;p++)if("byname"===(m=y[p]).type&&m.name===A){F=p;break}if(F>0&&F<y.length-1){var Q=[];for(p=0;p<y.length;p++)m=y[p],("byname"!==y[p].type||p>F)&&Q.push(m);y=Q}}y.length>0?function(t){if(0!==t.length){for(var i=0;i<t.length;i++){var a;a="byname"===t[i].type?d.computeFrame(e,t[i].name):t[i].data;var o=c(i),h=l(i);h.duration=Math.min(h.duration,o.duration);var p={frame:a,name:t[i].name,frameOpts:o,transitionOpts:h};i===t.length-1&&(p.onComplete=u(s,2),p.onInterrupt=g),r._frameQueue.push(p)}"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||f()}}(y):(e.emit("plotly_animated"),s())}))},e.addFrames=function(e,t,n){if(e=a.getGraphDiv(e),null==t)return Promise.resolve();if(!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var i,r,o,s,c=e._transitionData._frames,u=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var g=c.length+2*t.length,h=[],f={};for(i=t.length-1;i>=0;i--)if(a.isPlainObject(t[i])){var p=t[i].name,m=(u[p]||f[p]||{}).name,v=t[i].name,b=u[m]||f[m];m&&v&&"number"==typeof v&&b&&A<5&&(A++,a.warn('addFrames: overwriting frame "'+(u[m]||f[m]).name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===A&&a.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),f[p]={name:p},h.push({frame:d.supplyFrameDefaults(t[i]),index:n&&void 0!==n[i]&&null!==n[i]?n[i]:g+i})}h.sort((function(e,t){return e.index>t.index?-1:e.index<t.index?1:0}));var y=[],I=[],C=c.length;for(i=h.length-1;i>=0;i--){if("number"==typeof(r=h[i].frame).name&&a.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;u[r.name="frame "+e._transitionData._counter++];);if(u[r.name]){for(o=0;o<c.length&&(c[o]||{}).name!==r.name;o++);y.push({type:"replace",index:o,value:r}),I.unshift({type:"replace",index:o,value:c[o]})}else s=Math.max(0,Math.min(h[i].index,C)),y.push({type:"insert",index:s,value:r}),I.unshift({type:"delete",index:s}),C++}var x=d.modifyFrames,B=d.modifyFrames,F=[e,I],Q=[e,y];return l&&l.add(e,x,F,B,Q),d.modifyFrames(e,y)},e.deleteFrames=function(e,t){if(e=a.getGraphDiv(e),!a.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,i,r=e._transitionData._frames,o=[],s=[];if(!t)for(t=[],n=0;n<r.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;n>=0;n--)i=t[n],o.push({type:"delete",index:i}),s.unshift({type:"insert",index:i,value:r[i]});var c=d.modifyFrames,u=d.modifyFrames,g=[e,s],h=[e,o];return l&&l.add(e,c,g,u,h),d.modifyFrames(e,o)},e.addTraces=function t(n,r,o){n=a.getGraphDiv(n);var s,c,u=[],d=e.deleteTraces,g=t,h=[n,u],f=[n,r];for(function(e,t,n){var r,a;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!==i(a=t[r])||Array.isArray(a)||null===a)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(n,r,o),Array.isArray(r)||(r=[r]),r=r.map((function(e){return a.extendFlat({},e)})),I.cleanData(r),s=0;s<r.length;s++)n.data.push(r[s]);for(s=0;s<r.length;s++)u.push(-r.length+s);if(void 0===o)return c=e.redraw(n),l.add(n,d,h,g,f),c;Array.isArray(o)||(o=[o]);try{L(n,u,o)}catch(e){throw n.data.splice(n.data.length-r.length,r.length),e}return l.startSequence(n),l.add(n,d,h,g,f),c=e.moveTraces(n,u,o),l.stopSequence(n),c},e.deleteTraces=function t(n,i){n=a.getGraphDiv(n);var r,o,s=[],c=e.addTraces,u=t,d=[n,s,i],g=[n,i];if(void 0===i)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(i)||(i=[i]),R(n,i,"indices"),(i=G(i,n.data.length-1)).sort(a.sorterDes),r=0;r<i.length;r+=1)o=n.data.splice(i[r],1)[0],s.push(o);var h=e.redraw(n);return l.add(n,c,d,u,g),h},e.extendTraces=function t(n,i,r,o){function s(e,t,n){var i,r;if(a.isTypedArray(e))if(n<0){var o=new e.constructor(0),s=V(e,t);n<0?(i=s,r=o):(i=o,r=s)}else if(i=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length)i.set(t),r.set(e);else if(n<t.length){var l=t.length-n;i.set(t.subarray(l)),r.set(e),r.set(t.subarray(0,l),e.length)}else{var c=n-t.length,u=e.length-c;i.set(e.subarray(u)),i.set(t,c),r.set(e.subarray(0,u))}else i=e.concat(t),r=n>=0&&n<i.length?i.splice(0,i.length-n):[];return[i,r]}var c=S(n=a.getGraphDiv(n),i,r,o,s),u=e.redraw(n),d=[n,c.update,r,c.maxPoints];return l.add(n,e.prependTraces,d,t,arguments),u},e.moveTraces=function t(n,i,r){var o,s=[],c=[],u=t,d=t,g=[n=a.getGraphDiv(n),r,i],h=[n,i,r];if(L(n,i,r),i=Array.isArray(i)?i:[i],void 0===r)for(r=[],o=0;o<i.length;o++)r.push(-i.length+o);for(r=Array.isArray(r)?r:[r],i=G(i,n.data.length-1),r=G(r,n.data.length-1),o=0;o<n.data.length;o++)-1===i.indexOf(o)&&s.push(n.data[o]);for(o=0;o<i.length;o++)c.push({newIndex:r[o],trace:n.data[i[o]]});for(c.sort((function(e,t){return e.newIndex-t.newIndex})),o=0;o<c.length;o+=1)s.splice(c[o].newIndex,0,c[o].trace);n.data=s;var f=e.redraw(n);return l.add(n,u,g,d,h),f},e.prependTraces=function t(n,i,r,o){function s(e,t,n){var i,r;if(a.isTypedArray(e))if(n<=0){var o=new e.constructor(0),s=V(t,e);n<0?(i=s,r=o):(i=o,r=s)}else if(i=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length)i.set(t),r.set(e);else if(n<t.length){var l=t.length-n;i.set(t.subarray(0,l)),r.set(t.subarray(l)),r.set(e,l)}else{var c=n-t.length;i.set(t),i.set(e.subarray(0,c),t.length),r.set(e.subarray(c))}else i=t.concat(e),r=n>=0&&n<i.length?i.splice(n,i.length):[];return[i,r]}var c=S(n=a.getGraphDiv(n),i,r,o,s),u=e.redraw(n),d=[n,c.update,r,c.maxPoints];return l.add(n,e.extendTraces,d,t,arguments),u},e.newPlot=function(t,n,i,r){return t=a.getGraphDiv(t),d.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),d.purge(t),e._doPlot(t,n,i,r)},e._doPlot=function(n,i,r,o){var l;if(n=a.getGraphDiv(n),s.init(n),a.isPlainObject(i)){var u=i;i=u.data,r=u.layout,o=u.config,l=u.frames}if(!1===s.triggerHandler(n,"plotly_beforeplot",[i,r,o]))return Promise.reject();i||r||a.isPlotDiv(n)||a.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",n),w(n,o),r||(r={}),t.select(n).classed("js-plotly-plot",!0),h.makeTester(),Array.isArray(n._promises)||(n._promises=[]);var f=0===(n.data||[]).length&&Array.isArray(i);Array.isArray(i)&&(I.cleanData(i),f?n.data=i:n.data.push.apply(n.data,i),n.empty=!1),n.layout&&!f||(n.layout=I.cleanLayout(r)),d.supplyDefaults(n);var v=n._fullLayout,b=v._has("cartesian");v._replotting=!0,(f||v._shouldCreateBgLayer)&&(!function(e){var n=t.select(e),i=e._fullLayout;if(i._calcInverseTransform=ae,i._calcInverseTransform(e),i._container=n.selectAll(".plot-container").data([0]),i._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),i._paperdiv=i._container.selectAll(".svg-container").data([0]),i._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),i._glcontainer=i._paperdiv.selectAll(".gl-container").data([{}]),i._glcontainer.enter().append("div").classed("gl-container",!0),i._paperdiv.selectAll(".main-svg").remove(),i._paperdiv.select(".modebar-container").remove(),i._paper=i._paperdiv.insert("svg",":first-child").classed("main-svg",!0),i._toppaper=i._paperdiv.append("svg").classed("main-svg",!0),i._modebardiv=i._paperdiv.append("div"),delete i._modeBar,i._hoverpaper=i._paperdiv.append("svg").classed("main-svg",!0),!i._uid){var r={};t.selectAll("defs").each((function(){this.id&&(r[this.id.split("-")[1]]=1)})),i._uid=a.randstr(r)}i._paperdiv.selectAll(".main-svg").attr(m.svgAttrs),i._defs=i._paper.append("defs").attr("id","defs-"+i._uid),i._clips=i._defs.append("g").classed("clips",!0),i._topdefs=i._toppaper.append("defs").attr("id","topdefs-"+i._uid),i._topclips=i._topdefs.append("g").classed("clips",!0),i._bgLayer=i._paper.append("g").classed("bglayer",!0),i._draggers=i._paper.append("g").classed("draglayer",!0);var o=i._paper.append("g").classed("layer-below",!0);i._imageLowerLayer=o.append("g").classed("imagelayer",!0),i._shapeLowerLayer=o.append("g").classed("shapelayer",!0),i._cartesianlayer=i._paper.append("g").classed("cartesianlayer",!0),i._polarlayer=i._paper.append("g").classed("polarlayer",!0),i._smithlayer=i._paper.append("g").classed("smithlayer",!0),i._ternarylayer=i._paper.append("g").classed("ternarylayer",!0),i._geolayer=i._paper.append("g").classed("geolayer",!0),i._funnelarealayer=i._paper.append("g").classed("funnelarealayer",!0),i._pielayer=i._paper.append("g").classed("pielayer",!0),i._iciclelayer=i._paper.append("g").classed("iciclelayer",!0),i._treemaplayer=i._paper.append("g").classed("treemaplayer",!0),i._sunburstlayer=i._paper.append("g").classed("sunburstlayer",!0),i._indicatorlayer=i._toppaper.append("g").classed("indicatorlayer",!0),i._glimages=i._paper.append("g").classed("glimages",!0);var s=i._toppaper.append("g").classed("layer-above",!0);i._imageUpperLayer=s.append("g").classed("imagelayer",!0),i._shapeUpperLayer=s.append("g").classed("shapelayer",!0),i._infolayer=i._toppaper.append("g").classed("infolayer",!0),i._menulayer=i._toppaper.append("g").classed("menulayer",!0),i._zoomlayer=i._toppaper.append("g").classed("zoomlayer",!0),i._hoverlayer=i._hoverpaper.append("g").classed("hoverlayer",!0),i._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(n),v._shouldCreateBgLayer&&delete v._shouldCreateBgLayer),h.initGradients(n),h.initPatterns(n),f&&g.saveShowSpikeInitial(n);var y=!n.calcdata||n.calcdata.length!==(n._fullData||[]).length;y&&d.doCalcdata(n);for(var x=0;x<n.calcdata.length;x++)n.calcdata[x][0].trace=n._fullData[x];n._context.responsive?n._responsiveChartHandler||(n._responsiveChartHandler=function(){a.isHidden(n)||d.resize(n)},window.addEventListener("resize",n._responsiveChartHandler)):a.clearResponsive(n);var B=a.extendFlat({},v._size),A=0;function Q(){if(d.clearAutoMarginIds(n),C.drawMarginPushers(n),g.allowAutoMargin(n),v._has("pie"))for(var e=n._fullData,t=0;t<e.length;t++){var i=e[t];"pie"===i.type&&i.automargin&&d.allowAutoMargin(n,"pie."+i.uid+".automargin")}return d.doAutoMargin(n),d.previousPromises(n)}function U(){n._transitioning||(C.doAutoRangeAndConstraints(n),f&&g.saveRangeInitial(n),c.getComponentMethod("rangeslider","calcAutorange")(n))}var G=[d.previousPromises,function(){if(l)return e.addFrames(n,l)},function e(){for(var t=v._basePlotModules,i=0;i<t.length;i++)t[i].drawFramework&&t[i].drawFramework(n);!v._glcanvas&&v._has("gl")&&(v._glcanvas=v._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],(function(e){return e.key})),v._glcanvas.enter().append("canvas").attr("class",(function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var r=n._context.plotGlPixelRatio;if(v._glcanvas){v._glcanvas.attr("width",v.width*r).attr("height",v.height*r).style("width",v.width+"px").style("height",v.height+"px");var o=v._glcanvas.data()[0].regl;if(o&&(Math.floor(v.width*r)!==o._gl.drawingBufferWidth||Math.floor(v.height*r)!==o._gl.drawingBufferHeight)){var s="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!A)return a.log(s+" Clearing graph and plotting again."),d.cleanPlot([],{},n._fullData,v),d.supplyDefaults(n),v=n._fullLayout,d.doCalcdata(n),A++,e();a.error(s)}}return"h"===v.modebar.orientation?v._modebardiv.style("height",null).style("width","100%"):v._modebardiv.style("width",null).style("height",v.height+"px"),d.previousPromises(n)},Q,function(){if(d.didMarginChange(B,v._size))return a.syncOrAsync([Q,C.layoutStyles],n)}];b&&G.push((function(){if(y)return a.syncOrAsync([c.getComponentMethod("shapes","calcAutorange"),c.getComponentMethod("annotations","calcAutorange"),U],n);U()})),G.push(C.layoutStyles),b&&G.push((function(){return g.draw(n,f?"":"redraw")}),(function(e){e._fullLayout._insideTickLabelsAutorange&&_(e,e._fullLayout._insideTickLabelsAutorange).then((function(){e._fullLayout._insideTickLabelsAutorange=void 0}))})),G.push(C.drawData,C.finalDraw,p,d.addLinks,d.rehover,d.redrag,d.doAutoMargin,(function(e){e._fullLayout._insideTickLabelsAutorange&&f&&g.saveRangeInitial(e,!0)}),d.previousPromises);var R=a.syncOrAsync(G,n);return R&&R.then||(R=Promise.resolve()),R.then((function(){return F(n),n}))},e.purge=function(e){var t=(e=a.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return d.cleanPlot([],{},n,t),d.purge(e),s.purge(e),t._container&&t._container.remove(),delete e._context,e},e.react=function(t,n,i,r){var s,l;t=a.getGraphDiv(t),I.clearPromiseQueue(t);var g=t._fullData,h=t._fullLayout;if(a.isPlotDiv(t)&&g&&h){if(a.isPlainObject(n)){var f=n;n=f.data,i=f.layout,r=f.config,s=f.frames}var p=!1;if(r){var m=a.extendDeep({},t._context);t._context=void 0,w(t,r),p=re(m,t._context)}t.data=n||[],I.cleanData(t.data),t.layout=i||{},I.cleanLayout(t.layout),function(e,t,n,i){var r,s,l,c,u,d,g,h,f,p,m=i._preGUI,v=[],b={},y={};for(r in m){if(u=q(r,P)){if(f=u.head,p=u.tail,s=u.attr||f+".uirevision",(c=(l=o(i,s).get())&&$(s,t))&&c===l){if(null===(d=m[r])&&(d=void 0),ne(h=(g=o(t,r)).get(),d)){void 0===h&&"autorange"===p&&v.push(f),g.set(k(o(i,r).get()));continue}if("autorange"===p||"range["===p.substr(0,6)){var I=m[f+".range[0]"],C=m[f+".range[1]"],x=m[f+".autorange"];if(x||null===x&&null===I&&null===C){if(!(f in b)){var B=o(t,f).get();b[f]=B&&(B.autorange||!1!==B.autorange&&(!B.range||2!==B.range.length))}if(b[f]){g.set(k(o(i,r).get()));continue}}}}}else a.warn("unrecognized GUI edit: "+r);delete m[r],u&&"range["===u.tail.substr(0,6)&&(y[u.head]=1)}for(var A=0;A<v.length;A++){var F=v[A];if(y[F]){var Q=o(t,F).get();Q&&delete Q.autorange}}var U=i._tracePreGUI;for(var w in U){var G,R=U[w],L=null;for(r in R){if(!L){var S=ee(w,n);if(S<0){delete U[w];break}var V=te(w,e,(G=n[S]._fullInput).index);if(V<0){delete U[w];break}L=e[V]}if(u=q(r,K)){if(u.attr?c=(l=o(i,u.attr).get())&&$(u.attr,t):(l=G.uirevision,void 0===(c=L.uirevision)&&(c=t.uirevision)),c&&c===l&&(null===(d=R[r])&&(d=void 0),ne(h=(g=o(L,r)).get(),d))){g.set(k(o(G,r).get()));continue}}else a.warn("unrecognized GUI edit: "+r+" in trace uid "+w);delete R[r]}}}(t.data,t.layout,g,h),d.supplyDefaults(t,{skipUpdateCalc:!0});var v=t._fullData,b=t._fullLayout,y=void 0===b.datarevision,B=b.transition,A=function(e,t,n,i,r){var a=x.layoutFlags();function o(e){return u.getLayoutValObject(n,e)}a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,ie(t,n,[],{getValObject:o,flags:a,immutable:i,transition:r,gd:e}),(a.plot||a.calc)&&(a.layoutReplot=!0);r&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(t,h,b,y,B),Q=A.newDataRevision,U=function(e,t,n,i,r,a){var o=t.length===n.length;if(!r&&!o)return{fullReplot:!0,calc:!0};var s,l,c=x.traceFlags();function g(e){var t=u.getTraceValObject(l,e);return!l._module.animatable&&t.anim&&(t.anim=!1),t}c.arrays={},c.nChanges=0,c.nChangesAnim=0;var h={getValObject:g,flags:c,immutable:i,transition:r,newDataRevision:a,gd:e},f={};for(s=0;s<t.length;s++)if(n[s]){if(l=n[s]._fullInput,d.hasMakesDataTransform(l)&&(l=n[s]),f[l.uid])continue;f[l.uid]=1,ie(t[s]._fullInput,l,[],h)}(c.calc||c.plot)&&(c.fullReplot=!0);r&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some");return c}(t,g,v,y,B,Q);if(O(t)&&(A.layoutReplot=!0),U.calc||A.calc){t.calcdata=void 0;for(var G=Object.getOwnPropertyNames(b),R=0;R<G.length;R++){var L=G[R],S=L.substring(0,5);if("xaxis"===S||"yaxis"===S){var V=b[L]._emptyCategories;V&&V()}}}else d.supplyDefaultsUpdateCalc(t.calcdata,v);var Z=[];if(s&&(t._transitionData={},d.createTransitionData(t),Z.push((function(){return e.addFrames(t,s)}))),b.transition&&!p&&(U.anim||A.anim))A.ticks&&Z.push(C.doTicksRelayout),d.doCalcdata(t),C.doAutoRangeAndConstraints(t),Z.push((function(){return d.transitionFromReact(t,U,A,h)}));else if(U.fullReplot||A.layoutReplot||p)t._fullLayout._skipDefaults=!0,Z.push(e._doPlot);else{for(var E in A.arrays){var X=A.arrays[E];if(X.length){var N=c.getComponentMethod(E,"drawOne");if(N!==a.noop)for(var W=0;W<X.length;W++)N(t,X[W]);else{var _=c.getComponentMethod(E,"draw");if(_===a.noop)throw new Error("cannot draw components: "+E);_(t)}}}Z.push(d.previousPromises),U.style&&Z.push(C.doTraceStyle),(U.colorbars||A.colorbars)&&Z.push(C.doColorBars),A.legend&&Z.push(C.doLegend),A.layoutstyle&&Z.push(C.layoutStyles),A.axrange&&M(Z),A.ticks&&Z.push(C.doTicksRelayout),A.modebar&&Z.push(C.doModeBar),A.camera&&Z.push(C.doCamera),Z.push(F)}Z.push(d.rehover,d.redrag),(l=a.syncOrAsync(Z,t))&&l.then||(l=Promise.resolve(t))}else l=e.newPlot(t,n,i,r);return l.then((function(){return t.emit("plotly_react",{data:n,layout:i}),t}))},e.redraw=function(t){if(t=a.getGraphDiv(t),!a.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return I.cleanData(t.data),I.cleanLayout(t.layout),t.calcdata=void 0,e._doPlot(t).then((function(){return t.emit("plotly_redraw"),t}))},e.relayout=_,e.restyle=Z,e.setPlotConfig=function(e){return a.extendFlat(b,e)},e.update=J,e._guiRelayout=j(_),e._guiRestyle=j(Z),e._guiUpdate=j(J),e._storeDirectGUIEdit=function(e,t,n){for(var i in n){X(i,o(e,i).get(),n[i],t)}}}(Mf);var uG={},dG=hg;uG.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},uG.getRedrawFunc=function(e){return function(){dG.getComponentMethod("colorbar","draw")(e)}},uG.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},uG.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var gG=window.URL||window.webkitURL;uG.createObjectURL=function(e){return gG.createObjectURL(e)},uG.revokeObjectURL=function(e){return gG.revokeObjectURL(e)},uG.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});var n=function(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n),r=0;r<t;r++)i[r]=e.charCodeAt(r);return n}(window.atob(e));return new window.Blob([n],{type:"image/"+t})},uG.octetStream=function(e){document.location.href="data:application/octet-stream"+e},uG.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,uG.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.";var hG=Gs.exports,fG=ws.exports,pG=Am.exports,mG=Hd.exports,vG=xm,bG=/"/g,yG=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");var IG=function(e,t,n){var i,r,a=e._fullLayout,o=a._paper,s=a._toppaper,l=a.width,c=a.height;o.insert("rect",":first-child").call(pG.setRect,0,0,l,c).call(mG.fill,a.paper_bgcolor);var u=a._basePlotModules||[];for(i=0;i<u.length;i++){var d=u[i];d.toSVG&&d.toSVG(e)}if(s){var g=s.node().childNodes,h=Array.prototype.slice.call(g);for(i=0;i<h.length;i++){var f=h[i];f.childNodes.length&&o.node().appendChild(f)}}a._draggers&&a._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var e=hG.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var t=this.style.fontFamily;t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(bG,"TOBESTRIPPED"))}else e.remove()}));var p=[];if(a._gradientUrlQueryParts)for(r in a._gradientUrlQueryParts)p.push(r);if(a._patternUrlQueryParts)for(r in a._patternUrlQueryParts)p.push(r);p.length&&o.selectAll(p.join(",")).each((function(){var e=hG.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(bG,"TOBESTRIPPED"));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&e.style("stroke",n.replace(bG,"TOBESTRIPPED"))})),"pdf"!==t&&"eps"!==t||o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(vG.xmlns,"xmlns",vG.svg),o.node().setAttributeNS(vG.xmlns,"xmlns:xlink",vG.xlink),"svg"===t&&n&&(o.attr("width",n*l),o.attr("height",n*c),o.attr("viewBox","0 0 "+l+" "+c));var m=(new window.XMLSerializer).serializeToString(o.node());return m=function(e){var t=hG.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,(function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":t.html(e).text()}));return t.remove(),n}(m),m=function(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}(m),m=m.replace(yG,"'"),fG.isIE()&&(m=(m=(m=m.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),m},CG=ws.exports,xG=Yf.exports.EventEmitter,BG=uG;var AG=function(e){var t=e.emitter||new xG,n=new Promise((function(i,r){var a=window.Image,o=e.svg,s=e.format||"png";if(CG.isIE()&&"svg"!==s){var l=new Error(BG.MSG_IE_BAD_FORMAT);return r(l),e.promise?n:t.emit("error",l)}var c,u,d=e.canvas,g=e.scale||1,h=e.width||300,f=e.height||150,p=g*h,m=g*f,v=d.getContext("2d"),b=new a;"svg"===s||CG.isSafari()?u=BG.encodeSVG(o):(c=BG.createBlob(o,"svg"),u=BG.createObjectURL(c)),d.width=p,d.height=m,b.onload=function(){var n;switch(c=null,BG.revokeObjectURL(u),"svg"!==s&&v.drawImage(b,0,0,p,m),s){case"jpeg":n=d.toDataURL("image/jpeg");break;case"png":n=d.toDataURL("image/png");break;case"webp":n=d.toDataURL("image/webp");break;case"svg":n=u;break;default:var a="Image format is not jpeg, png, svg or webp.";if(r(new Error(a)),!e.promise)return t.emit("error",a)}i(n),e.promise||t.emit("success",n)},b.onerror=function(n){if(c=null,BG.revokeObjectURL(u),r(n),!e.promise)return t.emit("error",n)},b.src=u}));return e.promise?n:t},FG=Yu,QG=Mf,UG=Fp.exports,wG=ws.exports,GG=uG,RG=IG,LG=AG,SG=Us.version,VG={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};var ZG=function(e,t){var n,i,r,a;function o(e){return!(e in t)||wG.validate(t[e],VG[e])}if(t=t||{},wG.isPlainObject(e)?(n=e.data||[],i=e.layout||{},r=e.config||{},a={}):(e=wG.getGraphDiv(e),n=wG.extendDeep([],e.data),i=wG.extendDeep({},e.layout),r=e._context,a=e._fullLayout||{}),!o("width")&&null!==t.width||!o("height")&&null!==t.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+wG.join2(VG.format.values,", "," or ")+".");var s={};function l(e,n){return wG.coerce(t,s,VG,e,n)}var c=l("format"),u=l("width"),d=l("height"),g=l("scale"),h=l("setBackground"),f=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var m=wG.extendFlat({},i);u?m.width=u:null===t.width&&FG(a.width)&&(m.width=a.width),d?m.height=d:null===t.height&&FG(a.height)&&(m.height=a.height);var v=wG.extendFlat({},r,{_exportedPlot:!0,staticPlot:!0,setBackground:h}),b=GG.getRedrawFunc(p);function y(){return new Promise((function(e){setTimeout(e,GG.getDelay(p._fullLayout))}))}function I(){return new Promise((function(e,t){var n=RG(p,c,g),i=p._fullLayout.width,r=p._fullLayout.height;function a(){QG.purge(p),document.body.removeChild(p)}if("full-json"===c){var o=UG.graphJson(p,!1,"keepdata","object",!0,!0);return o.version=SG,o=JSON.stringify(o),a(),e(f?o:GG.encodeJSON(o))}if(a(),"svg"===c)return e(f?n:GG.encodeSVG(n));var s=document.createElement("canvas");s.id=wG.randstr(),LG({format:c,width:i,height:r,scale:g,canvas:s,svg:n,promise:!0}).then(e).catch(t)}))}return new Promise((function(e,t){QG.newPlot(p,n,m,v).then(b).then(y).then(I).then((function(t){e(function(e){return f?e.replace(GG.IMAGE_URL_PREFIX,""):e}(t))})).catch((function(e){t(e)}))}))},kG=ws.exports,EG=Fp.exports,XG=gp,NG=ag.dfltConfig,WG=kG.isPlainObject,_G=Array.isArray,TG=kG.isArrayOrTypedArray;function MG(e,t,n,i,r,a){a=a||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=a.slice();c.push(l);var u=e[l],d=t[l],g=JG(n,l),h=(g||{}).valType,f="info_array"===h,p="colorscale"===h,m=(g||{}).items;if(OG(n,l))if(WG(u)&&WG(d)&&"any"!==h)MG(u,d,g,i,r,c);else if(f&&_G(u)){u.length>d.length&&i.push(zG("unused",r,c.concat(d.length)));var v,b,y,I,C,x=d.length,B=Array.isArray(m);if(B&&(x=Math.min(x,m.length)),2===g.dimensions)for(b=0;b<x;b++)if(_G(u[b])){u[b].length>d[b].length&&i.push(zG("unused",r,c.concat(b,d[b].length)));var A=d[b].length;for(v=0;v<(B?Math.min(A,m[b].length):A);v++)y=B?m[b][v]:m,I=u[b][v],C=d[b][v],kG.validate(I,y)?C!==I&&C!==+I&&i.push(zG("dynamic",r,c.concat(b,v),I,C)):i.push(zG("value",r,c.concat(b,v),I))}else i.push(zG("array",r,c.concat(b),u[b]));else for(b=0;b<x;b++)y=B?m[b]:m,I=u[b],C=d[b],kG.validate(I,y)?C!==I&&C!==+I&&i.push(zG("dynamic",r,c.concat(b),I,C)):i.push(zG("value",r,c.concat(b),I))}else if(g.items&&!f&&_G(u)){var F,Q,U=m[Object.keys(m)[0]],w=[];for(F=0;F<d.length;F++){var G=d[F]._index||F;if((Q=c.slice()).push(G),WG(u[G])&&WG(d[F])){w.push(G);var R=u[G],L=d[F];WG(R)&&!1!==R.visible&&!1===L.visible?i.push(zG("invisible",r,Q)):MG(R,L,U,i,r,Q)}}for(F=0;F<u.length;F++)(Q=c.slice()).push(F),WG(u[F])?-1===w.indexOf(F)&&i.push(zG("unused",r,Q)):i.push(zG("object",r,Q,u[F]))}else!WG(u)&&WG(d)?i.push(zG("object",r,c,u)):TG(u)||!TG(d)||f||p?l in t?kG.validate(u,g)?"enumerated"===g.valType&&(g.coerceNumber&&u!==+d||u!==d)&&i.push(zG("dynamic",r,c,u,d)):i.push(zG("value",r,c,u)):i.push(zG("unused",r,c,u)):i.push(zG("array",r,c,u));else i.push(zG("schema",r,c))}}return i}function HG(e,t){for(var n=e.layout.layoutAttributes,i=0;i<t.length;i++){var r=t[i],a=e.traces[r.type],o=a.layoutAttributes;o&&(r.subplot?kG.extendFlat(n[a.attributes.subplot.dflt],o):kG.extendFlat(n,o))}return n}var YG={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":DG(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":DG(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return DG(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var i=WG(n)?"container":"key";return DG(e)+i+" "+t+" did not get coerced"},dynamic:function(e,t,n,i){return[DG(e)+"key",t,"(set to '"+n+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?DG(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[DG(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function DG(e){return _G(e)?"In data trace "+e[1]+", ":"In "+e+", "}function zG(e,t,n,i,r){var a,o;n=n||"",_G(t)?(a=t[0],o=t[1]):(a=t,o=null);var s=function(e){if(!_G(e))return String(e);for(var t="",n=0;n<e.length;n++){var i=e[n];"number"==typeof i?t=t.substr(0,t.length-1)+"["+i+"]":t+=i,n<e.length-1&&(t+=".")}return t}(n),l=YG[e](t,s,i,r);return kG.log(l),{code:e,container:a,trace:o,path:n,astr:s,msg:l}}function OG(e,t){var n=PG(t),i=n.keyMinusId,r=n.id;return!!(i in e&&e[i]._isSubplotObj&&r)||t in e}function JG(e,t){return t in e?e[t]:e[PG(t).keyMinusId]}var jG=kG.counterRegex("([a-z]+)");function PG(e){var t=e.match(jG);return{keyMinusId:t&&t[1],id:t&&t[2]}}var KG=ws.exports,qG=uG;var $G=function(e,t,n){var i=document.createElement("a"),r="download"in i;return new Promise((function(a,o){var s,l;if(KG.isIE())return s=qG.createBlob(e,"svg"),window.navigator.msSaveBlob(s,t),s=null,a(t);if(r)return s=qG.createBlob(e,n),l=qG.createObjectURL(s),i.href=l,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),qG.revokeObjectURL(l),s=null,a(t);if(KG.isSafari()){var c="svg"===n?",":";base64,";return qG.octetStream(c+encodeURIComponent(e)),a(t)}o(new Error("download error"))}))},eR=ws.exports,tR=ZG,nR=$G,iR=uG;var rR=function(e,t){var n;return eR.isPlainObject(e)||(n=eR.getGraphDiv(e)),(t=t||{}).format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise((function(i,r){n&&n._snapshotInProgress&&r(new Error("Snapshotting already in progress.")),eR.isIE()&&"svg"!==t.format&&r(new Error(iR.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var a=tR(e,t),o=t.filename||e.fn||"newplot";o+="."+t.format.replace("-","."),a.then((function(e){return n&&(n._snapshotInProgress=!1),nR(e,o,t.format)})).then((function(e){i(e)})).catch((function(e){n&&(n._snapshotInProgress=!1),r(e)}))}))},aR={},oR=ws.exports,sR=oR.isPlainObject,lR=gp,cR=Fp.exports,uR=Xd,dR=Qp,gR=ag.dfltConfig;function hR(e,t){e=oR.extendDeep({},e);var n,i,r=Object.keys(e).sort();function a(t,n,r){if(sR(n)&&sR(t))hR(t,n);else if(Array.isArray(n)&&Array.isArray(t)){var a=dR.arrayTemplater({_template:e},r);for(i=0;i<n.length;i++){var o=n[i],s=a.newItem(o)._template;s&&hR(s,o)}var l=a.defaultItems();for(i=0;i<l.length;i++)n.push(l[i]._template);for(i=0;i<n.length;i++)delete n[i].templateitemname}}for(n=0;n<r.length;n++){var o=r[n],s=e[o];if(o in t?a(s,t[o],o):t[o]=s,fR(o)===o)for(var l in t){var c=fR(l);l===c||c!==o||l in e||a(s,t[l],o)}}}function fR(e){return e.replace(/[0-9]+$/,"")}function pR(e,t,n,i,r){var a=r&&n(r);for(var o in e){var s=e[o],l=bR(e,o,i),c=bR(e,o,r),u=n(c);if(!u){var d=fR(o);d!==o&&(u=n(c=bR(e,d,r)))}if((!a||a!==u)&&!(!u||u._noTemplating||"data_array"===u.valType||u.arrayOk&&Array.isArray(s)))if(!u.valType&&sR(s))pR(s,t,n,l,c);else if(u._isLinkedToArray&&Array.isArray(s))for(var g=!1,h=0,f={},p=0;p<s.length;p++){var m=s[p];if(sR(m)){var v=m.name;if(v)f[v]||(pR(m,t,n,bR(s,h,l),bR(s,h,c)),h++,f[v]=1);else if(!g){var b=bR(e,dR.arrayDefaultKey(o),i),y=bR(s,h,l);pR(m,t,n,y,bR(s,h,c));var I=oR.nestedProperty(t,y);oR.nestedProperty(t,b).set(I.get()),I.set(null),g=!0}}}else{oR.nestedProperty(t,l).set(s)}}}function mR(e,t){return lR.getLayoutValObject(e,oR.nestedProperty({},t).parts)}function vR(e,t){return lR.getTraceValObject(e,oR.nestedProperty({},t).parts)}function bR(e,t,n){return n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t}function yR(e){for(var t=0;t<e.length;t++)if(sR(e[t]))return!0}function IR(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}aR.makeTemplate=function(e){e=oR.isPlainObject(e)?e:oR.getGraphDiv(e),e=oR.extendDeep({_context:gR},{data:e.data,layout:e.layout}),cR.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach((function(e){var t={};pR(e,t,vR.bind(null,e));var n=oR.coerce(e,{},uR,"type"),r=i.data[n];r||(r=i.data[n]=[]),r.push(t)})),pR(n,i.layout,mR.bind(null,n)),delete i.layout.template;var r=n.template;if(sR(r)){var a,o,s,l,c,u,d=r.layout;sR(d)&&hR(d,i.layout);var g=r.data;if(sR(g)){for(o in i.data)if(s=g[o],Array.isArray(s)){for(u=(c=i.data[o]).length,l=s.length,a=0;a<u;a++)hR(s[a%l],c[a]);for(a=u;a<l;a++)c.push(oR.extendDeep({},s[a]))}for(o in g)o in i.data||(i.data[o]=oR.extendDeep([],g[o]))}}return i},aR.validateTemplate=function(e,t){var n=oR.extendDeep({},{_context:gR,data:e.data,layout:e.layout}),i=n.layout||{};sR(t)||(t=i.template||{});var r=t.layout,a=t.data,o=[];n.layout=i,n.layout.template=t,cR.supplyDefaults(n);var s=n._fullLayout,l=n._fullData,c={};if(sR(r)?(!function e(t,n){for(var i in t)if("_"!==i.charAt(0)&&sR(t[i])){var r,a=fR(i),o=[];for(r=0;r<n.length;r++)o.push(bR(t,i,n[r])),a!==i&&o.push(bR(t,a,n[r]));for(r=0;r<o.length;r++)c[o[r]]=1;e(t[i],o)}}(s,["layout"]),function e(t,n){for(var i in t)if(-1===i.indexOf("defaults")&&sR(t[i])){var r=bR(t,i,n);c[r]?e(t[i],r):o.push({code:"unused",path:r})}}(r,"layout")):o.push({code:"layout"}),sR(a)){for(var u,d={},g=0;g<l.length;g++){var h=l[g];d[u=h.type]=(d[u]||0)+1,h._fullInput._template||o.push({code:"missing",index:h._fullInput.index,traceType:u})}for(u in a){var f=a[u].length,p=d[u]||0;f>p?o.push({code:"unused",traceType:u,templateCount:f,dataCount:p}):p>f&&o.push({code:"reused",traceType:u,templateCount:f,dataCount:p})}}else o.push({code:"data"});if(function e(t,n){for(var i in t)if("_"!==i.charAt(0)){var r=t[i],a=bR(t,i,n);sR(r)?(Array.isArray(t)&&!1===r._template&&r.templateitemname&&o.push({code:"missing",path:a,templateitemname:r.templateitemname}),e(r,a)):Array.isArray(r)&&yR(r)&&e(r,a)}}({data:l,layout:s},""),o.length)return o.map(IR)};var CR=Mf;Tf._doPlot=CR._doPlot,Tf.newPlot=CR.newPlot,Tf.restyle=CR.restyle,Tf.relayout=CR.relayout,Tf.redraw=CR.redraw,Tf.update=CR.update,Tf._guiRestyle=CR._guiRestyle,Tf._guiRelayout=CR._guiRelayout,Tf._guiUpdate=CR._guiUpdate,Tf._storeDirectGUIEdit=CR._storeDirectGUIEdit,Tf.react=CR.react,Tf.extendTraces=CR.extendTraces,Tf.prependTraces=CR.prependTraces,Tf.addTraces=CR.addTraces,Tf.deleteTraces=CR.deleteTraces,Tf.moveTraces=CR.moveTraces,Tf.purge=CR.purge,Tf.addFrames=CR.addFrames,Tf.deleteFrames=CR.deleteFrames,Tf.animate=CR.animate,Tf.setPlotConfig=CR.setPlotConfig,Tf.toImage=ZG,Tf.validate=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n,i,r=XG.get(),a=[],o={_context:kG.extendFlat({},NG)};_G(e)?(o.data=kG.extendDeep([],e),n=e):(o.data=[],n=[],a.push(zG("array","data"))),WG(t)?(o.layout=kG.extendDeep({},t),i=t):(o.layout={},i={},arguments.length>1&&a.push(zG("object","layout"))),EG.supplyDefaults(o);for(var s=o._fullData,l=n.length,c=0;c<l;c++){var u=n[c],d=["data",c];if(WG(u)){var g=s[c],h=g.type,f=r.traces[h].attributes;f.type={valType:"enumerated",values:[h]},!1===g.visible&&!1!==u.visible&&a.push(zG("invisible",d)),MG(u,g,f,a,d);var p=u.transforms,m=g.transforms;if(p){_G(p)||a.push(zG("array",d,["transforms"])),d.push("transforms");for(var v=0;v<p.length;v++){var b=["transforms",v],y=p[v].type;if(WG(p[v])){var I=r.transforms[y]?r.transforms[y].attributes:{};I.type={valType:"enumerated",values:Object.keys(r.transforms)},MG(p[v],m[v],I,a,d,b)}else a.push(zG("object",d,b))}}}else a.push(zG("object",d))}var C=o._fullLayout,x=HG(r,s);return MG(i,C,x,a,"layout"),0===a.length?void 0:a},Tf.downloadImage=rR;var xR=aR;Tf.makeTemplate=xR.makeTemplate,Tf.validateTemplate=xR.validateTemplate;var BR={},AR=Wm.FORMAT_LINK,FR=Wm.DATE_FORMAT_LINK;function QR(e){return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(e&&e.supportOther?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',AR,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',FR,"for details on the date formatting syntax."].join(" ")}function UR(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(n.length>0){for(var i=[],r=0;r<n.length;r++)i[r]="`"+n[r]+"`";t+="Finally, the template string has access to ",t=1===n.length?"variable "+i[0]:"variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return t}BR.hovertemplateAttrs=function(e,t){e=e||{};var n=UR(t=t||{}),i={valType:"string",dflt:"",editType:e.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",QR({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",n,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return!1!==e.arrayOk&&(i.arrayOk=!0),i},BR.texttemplateAttrs=function(e,t){e=e||{};var n=UR(t=t||{}),i={valType:"string",dflt:"",editType:e.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",QR(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",n].join(" ")};return!1!==e.arrayOk&&(i.arrayOk=!0),i};var wR={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]},GR=Ym,RR=BR.texttemplateAttrs,LR=BR.hovertemplateAttrs,SR=gv,VR=Cd,ZR=ih.dash,kR=Am.exports,ER=wR,XR=Ud.extendFlat;function NR(e){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+e+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function WR(e){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+e+" axis.","When `"+e+"period` is round number of weeks,","the `"+e+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function _R(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+e+" axis."].join(" ")}}var TR={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:NR("x"),yperiod:NR("y"),xperiod0:WR("x0"),yperiod0:WR("y0"),xperiodalignment:_R("x"),yperiodalignment:_R("y"),xhoverformat:GR("x"),yhoverformat:GR("y"),stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:RR({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+ER.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:LR({},{keys:ER.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:XR({},ZR,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},marker:XR({symbol:{valType:"enumerated",values:kR.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:XR({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},SR("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},SR("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:VR({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."})},MR=ws.exports,HR=hg,YR=function(e,t,n,i){var r,a=i("x"),o=i("y");if(HR.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),a){var s=MR.minRowLength(a);o?r=Math.min(s,MR.minRowLength(o)):(r=s,i("y0"),i("dy"))}else{if(!o)return 0;r=MR.minRowLength(o),i("x0"),i("dx")}return t._length=r,r},DR=ws.exports.dateTick0,zR=Du.ONEWEEK;function OR(e,t){return DR(t,e%zR==0?1:0)}var JR=function(e,t,n,i,r){if(r||(r={x:!0,y:!0}),r.x){var a=i("xperiod");a&&(i("xperiod0",OR(a,t.xcalendar)),i("xperiodalignment"))}if(r.y){var o=i("yperiod");o&&(i("yperiod0",OR(o,t.ycalendar)),i("yperiodalignment"))}},jR=["orientation","groupnorm","stackgaps"],PR=Hd.exports,KR=Nm.hasColorscale,qR=ab,$R=yb,eL=function(e,t,n,i,r,a){var o=$R.isBubble(e),s=(e.line||{}).color;(a=a||{},s&&(n=s),r("marker.symbol"),r("marker.opacity",o?.7:1),r("marker.size"),r("marker.color",n),KR(e,"marker")&&qR(e,t,i,r,{prefix:"marker.",cLetter:"c"}),a.noSelect||(r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size")),a.noLine||(r("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:o?PR.background:PR.defaultLine),KR(e,"marker.line")&&qR(e,t,i,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width",o?1:0)),o&&(r("marker.sizeref"),r("marker.sizemin"),r("marker.sizemode")),a.gradient)&&("none"!==r("marker.gradient.type")&&r("marker.gradient.color"))},tL=ws.exports.isArrayOrTypedArray,nL=Nm.hasColorscale,iL=ab,rL=function(e,t,n,i,r,a){var o=(e.marker||{}).color;(r("line.color",n),nL(e,"line"))?iL(e,t,i,r,{prefix:"line.",cLetter:"c"}):r("line.color",!tL(o)&&o||n);r("line.width"),(a||{}).noDash||r("line.dash")},aL=ws.exports,oL=function(e,t,n,i,r){r=r||{},i("textposition"),aL.coerceFont(i,"textfont",n.font),r.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))},sL=Hd.exports,lL=ws.exports.isArrayOrTypedArray,cL=ws.exports,uL=hg,dL=TR,gL=wR,hL=yb,fL=YR,pL=JR,mL=function(e,t,n,i){var r=n._scatterStackOpts,a=i("stackgroup");if(a){var o=t.xaxis+t.yaxis,s=r[o];s||(s=r[o]={});var l=s[a],c=!1;l?l.traces.push(t):(l=s[a]={traceIndices:[],traces:[t]},c=!0);for(var u={orientation:t.x&&!t.y?"h":"v"},d=0;d<jR.length;d++){var g=jR[d],h=g+"Found";if(!l[h]){var f=void 0!==e[g],p="orientation"===g;if((f||c)&&(l[g]=i(g,u[g]),p&&(l.fillDflt="h"===l[g]?"tonextx":"tonexty"),f&&(l[h]=!0,!c&&(delete l.traces[0][g],p))))for(var m=0;m<l.traces.length-1;m++){var v=l.traces[m];v._input.fill!==v.fill&&(v.fill=l.fillDflt)}}}return l}},vL=eL,bL=rL,yL=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")},IL=oL,CL=function(e,t,n,i){var r=!1;if(t.marker){var a=t.marker.color,o=(t.marker.line||{}).color;a&&!lL(a)?r=a:o&&!lL(o)&&(r=o)}i("fillcolor",sL.addOpacity((t.line||{}).color||r||n,.5))},xL=Yu,BL=ws.exports,AL=BL.dateTime2ms,FL=BL.incrementMonth,QL=Du.ONEAVGMONTH,UL=Nm.hasColorscale,wL=mb,GL=yb,RL=function(e,t){GL.hasLines(t)&&UL(t,"line")&&wL(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),GL.hasMarkers(t)&&(UL(t,"marker")&&wL(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),UL(t,"marker.line")&&wL(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))},LL=ws.exports,SL=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;LL.mergeArray(t.text,e,"tx"),LL.mergeArray(t.texttemplate,e,"txt"),LL.mergeArray(t.hovertext,e,"htx"),LL.mergeArray(t.customdata,e,"data"),LL.mergeArray(t.textposition,e,"tp"),t.textfont&&(LL.mergeArrayCastPositive(t.textfont.size,e,"ts"),LL.mergeArray(t.textfont.color,e,"tc"),LL.mergeArray(t.textfont.family,e,"tf"));var i=t.marker;if(i){LL.mergeArrayCastPositive(i.size,e,"ms"),LL.mergeArrayCastPositive(i.opacity,e,"mo"),LL.mergeArray(i.symbol,e,"mx"),LL.mergeArray(i.color,e,"mc");var r=i.line;i.line&&(LL.mergeArray(r.color,e,"mlc"),LL.mergeArrayCastPositive(r.width,e,"mlw"));var a=i.gradient;a&&"none"!==a.type&&(LL.mergeArray(a.type,e,"mgt"),LL.mergeArray(a.color,e,"mgc"))}},VL=ws.exports,ZL=Yu,kL=ws.exports,EL=Im.exports,XL=function(e,t,n,i){if("date"!==t.type)return{vals:i};var r=e[n+"periodalignment"];if(!r)return{vals:i};var a,o=e[n+"period"];if(xL(o)){if((o=+o)<=0)return{vals:i}}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(s>0&&Math.round(s)===s))return{vals:i};a=s}for(var l=t.calendar,c="start"===r,u="end"===r,d=e[n+"period0"],g=AL(d,l)||0,h=[],f=[],p=[],m=i.length,v=0;v<m;v++){var b,y,I,C=i[v];if(a){for(b=Math.round((C-g)/(a*QL)),I=FL(g,a*b,l);I>C;)I=FL(I,-a,l);for(;I<=C;)I=FL(I,a,l);y=FL(I,-a,l)}else{for(I=g+(b=Math.round((C-g)/o))*o;I>C;)I-=o;for(;I<=C;)I+=o;y=I-o}h[v]=c?y:u?I:(y+I)/2,f[v]=y,p[v]=I}return{vals:h,starts:f,ends:p}},NL=Du.BADNUM,WL=yb,_L=RL,TL=SL,ML=function(e,t){VL.isArrayOrTypedArray(t.selectedpoints)&&VL.tagSelected(e,t)};function HL(e,t,n,i,r,a,o){var s=t._length,l=e._fullLayout,c=n._id,u=i._id,d=l._firstScatter[zL(t)]===t.uid,g=(OL(t,l,n,i)||{}).orientation,h=t.fill;n._minDtick=0,i._minDtick=0;var f={padded:!0},p={padded:!0};o&&(f.ppad=p.ppad=o);var m=s<2||r[0]!==r[s-1]||a[0]!==a[s-1];m&&("tozerox"===h||"tonextx"===h&&(d||"h"===g))?f.tozero=!0:(t.error_y||{}).visible||"tonexty"!==h&&"tozeroy"!==h&&(WL.hasMarkers(t)||WL.hasText(t))||(f.padded=!1,f.ppad=0),m&&("tozeroy"===h||"tonexty"===h&&(d||"v"===g))?p.tozero=!0:"tonextx"!==h&&"tozerox"!==h||(p.padded=!1),c&&(t._extremes[c]=EL.findExtremes(n,r,f)),u&&(t._extremes[u]=EL.findExtremes(i,a,p))}function YL(e,t){if(WL.hasMarkers(e)){var n,i=e.marker,r=1.6*(e.marker.sizeref||1);if(n="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/r),3)}:function(e){return Math.max((e||0)/r,3)},kL.isArrayOrTypedArray(i.size)){var a={type:"linear"};EL.setConvert(a);for(var o=a.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=n(o[l]);return s}return n(i.size)}}function DL(e,t){var n=zL(t),i=e._firstScatter;i[n]||(i[n]=t.uid)}function zL(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function OL(e,t,n,i){var r=e.stackgroup;if(r){var a=t._scatterStackOpts[n._id+i._id][r],o="v"===a.orientation?i:n;return"linear"===o.type||"log"===o.type?a:void 0}}var JL={calc:function(e,t){var n,i,r,a,o,s,l=e._fullLayout,c=EL.getFromId(e,t.xaxis||"x"),u=EL.getFromId(e,t.yaxis||"y"),d=c.makeCalcdata(t,"x"),g=u.makeCalcdata(t,"y"),h=XL(t,c,"x",d),f=XL(t,u,"y",g),p=h.vals,m=f.vals,v=t._length,b=new Array(v),y=t.ids,I=OL(t,l,c,u),C=!1;DL(l,t);var x,B="x",A="y";I?(kL.pushUnique(I.traceIndices,t._expandedIndex),(n="v"===I.orientation)?(A="s",x="x"):(B="s",x="y"),o="interpolate"===I.stackgaps):HL(e,t,c,u,p,m,YL(t,v));var F=!!t.xperiodalignment,Q=!!t.yperiodalignment;for(i=0;i<v;i++){var U=b[i]={},w=ZL(p[i]),G=ZL(m[i]);w&&G?(U[B]=p[i],U[A]=m[i],F&&(U.orig_x=d[i],U.xEnd=h.ends[i],U.xStart=h.starts[i]),Q&&(U.orig_y=g[i],U.yEnd=f.ends[i],U.yStart=f.starts[i])):I&&(n?w:G)?(U[x]=n?p[i]:m[i],U.gap=!0,o?(U.s=NL,C=!0):U.s=0):U[B]=U[A]=NL,y&&(U.id=String(y[i]))}if(TL(b,t),_L(e,t),ML(b,t),I){for(i=0;i<b.length;)b[i][x]===NL?b.splice(i,1):i++;if(kL.sort(b,(function(e,t){return e[x]-t[x]||e.i-t.i})),C){for(i=0;i<b.length-1&&b[i].gap;)i++;for((s=b[i].s)||(s=b[i].s=0),r=0;r<i;r++)b[r].s=s;for(a=b.length-1;a>i&&b[a].gap;)a--;for(s=b[a].s,r=b.length-1;r>a;r--)b[r].s=s;for(;i<a;)if(b[++i].gap){for(r=i+1;b[r].gap;)r++;for(var R=b[i-1][x],L=b[i-1].s,S=(b[r].s-L)/(b[r][x]-R);i<r;)b[i].s=L+(b[i][x]-R)*S,i++}}}return b},calcMarkerSize:YL,calcAxisExpansion:HL,setFirstScatter:DL,getStackOpts:OL},jL=JL;function PL(e,t,n,i,r,a,o){r[i]=!0;var s={i:null,gap:!0,s:0};if(s[o]=n,e.splice(t,0,s),t&&n===e[t-1][o]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=function(e,t,n,i){var r=e[t-1],a=e[t+1];return a?r?r.s+(a.s-r.s)*(n-r[i])/(a[i]-r[i]):a.s:r.s}(e,t,n,o));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}var KL=Du.BADNUM,qL=Du.LOG_CLIP,$L=qL+.5,eS=qL-.5,tS=ws.exports,nS=tS.segmentsIntersect,iS=tS.constrain,rS=wR,aS={tonextx:1,tonexty:1,tonext:1},oS=Gs.exports,sS=hg,lS=ws.exports,cS=lS.ensureSingle,uS=lS.identity,dS=Am.exports,gS=yb,hS=function(e,t){var n,i,r,a,o,s,l,c,u,d,g,h,f,p,m,v,b,y,I=t.xaxis,C=t.yaxis,x="log"===I.type,B="log"===C.type,A=I._length,F=C._length,Q=t.connectGaps,U=t.baseTolerance,w=t.shape,G="linear"===w,R=t.fill&&"none"!==t.fill,L=[],S=rS.minTolerance,V=e.length,Z=new Array(V),k=0;function E(n){var i=e[n];if(!i)return!1;var r=t.linearized?I.l2p(i.x):I.c2p(i.x),a=t.linearized?C.l2p(i.y):C.c2p(i.y);if(r===KL){if(x&&(r=I.c2p(i.x,!0)),r===KL)return!1;B&&a===KL&&(r*=Math.abs(I._m*F*(I._m>0?$L:eS)/(C._m*A*(C._m>0?$L:eS)))),r*=1e3}if(a===KL){if(B&&(a=C.c2p(i.y,!0)),a===KL)return!1;a*=1e3}return[r,a]}function X(e,t,n,i){var r=n-e,a=i-t,o=.5-e,s=.5-t,l=r*r+a*a,c=r*o+a*s;if(c>0&&c<l){var u=o*a-s*r;if(u*u<l)return!0}}function N(e,t){var n=e[0]/A,i=e[1]/F,r=Math.max(0,-n,n-1,-i,i-1);return r&&void 0!==b&&X(n,i,b,y)&&(r=0),r&&t&&X(n,i,t[0]/A,t[1]/F)&&(r=0),(1+rS.toleranceGrowth*r)*U}function W(e,t){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)}var _,T,M,H,Y,D,z,O=rS.maxScreensAway,J=-A*O,j=A*(1+O),P=-F*O,K=F*(1+O),q=[[J,P,j,P],[j,P,j,K],[j,K,J,K],[J,K,J,P]];function $(e){if(e[0]<J||e[0]>j||e[1]<P||e[1]>K)return[iS(e[0],J,j),iS(e[1],P,K)]}function ee(e,t){return e[0]===t[0]&&(e[0]===J||e[0]===j)||(e[1]===t[1]&&(e[1]===P||e[1]===K)||void 0)}function te(e,t,n){return function(i,r){var a=$(i),o=$(r),s=[];if(a&&o&&ee(a,o))return s;a&&s.push(a),o&&s.push(o);var l=2*tS.constrain((i[e]+r[e])/2,t,n)-((a||i)[e]+(o||r)[e]);l&&((a&&o?l>0==a[e]>o[e]?a:o:a||o)[e]+=l);return s}}function ne(e){var t=e[0],n=e[1],i=t===Z[k-1][0],r=n===Z[k-1][1];if(!i||!r)if(k>1){var a=t===Z[k-2][0],o=n===Z[k-2][1];i&&(t===J||t===j)&&a?o?k--:Z[k-1]=e:r&&(n===P||n===K)&&o?a?k--:Z[k-1]=e:Z[k++]=e}else Z[k++]=e}function ie(e){Z[k-1][0]!==e[0]&&Z[k-1][1]!==e[1]&&ne([M,H]),ne(e),Y=null,M=H=0}function re(e){if(b=e[0]/A,y=e[1]/F,_=e[0]<J?J:e[0]>j?j:0,T=e[1]<P?P:e[1]>K?K:0,_||T){if(k)if(Y){var t=z(Y,e);t.length>1&&(ie(t[0]),Z[k++]=t[1])}else D=z(Z[k-1],e)[0],Z[k++]=D;else Z[k++]=[_||e[0],T||e[1]];var n=Z[k-1];_&&T&&(n[0]!==_||n[1]!==T)?(Y&&(M!==_&&H!==T?ne(M&&H?function(e,t){var n=t[0]-e[0],i=(t[1]-e[1])/n;return(e[1]*t[0]-t[1]*e[0])/n>0?[i>0?J:j,K]:[i>0?j:J,P]}(Y,e):[M||_,H||T]):M&&H&&ne([M,H])),ne([_,T])):M-_&&H-T&&ne([_||M,T||H]),Y=e,M=_,H=T}else Y&&ie(z(Y,e)[0]),Z[k++]=e}for("linear"===w||"spline"===w?z=function(e,t){for(var n=[],i=0,r=0;r<4;r++){var a=q[r],o=nS(e[0],e[1],t[0],t[1],a[0],a[1],a[2],a[3]);o&&(!i||Math.abs(o.x-n[0][0])>1||Math.abs(o.y-n[0][1])>1)&&(o=[o.x,o.y],i&&W(o,e)<W(n[0],e)?n.unshift(o):n.push(o),i++)}return n}:"hv"===w||"vh"===w?z=function(e,t){var n=[],i=$(e),r=$(t);return i&&r&&ee(i,r)||(i&&n.push(i),r&&n.push(r)),n}:"hvh"===w?z=te(0,J,j):"vhv"===w&&(z=te(1,P,K)),n=0;n<V;n++)if(i=E(n)){for(k=0,Y=null,re(i),n++;n<V;n++){if(!(a=E(n))){if(Q)continue;break}if(G&&t.simplify){var ae=E(n+1);if(d=W(a,i),R&&(0===k||k===V-1)||!(d<N(a,ae)*S)){for(c=[(a[0]-i[0])/d,(a[1]-i[1])/d],o=i,g=d,h=p=m=0,l=!1,r=a,n++;n<e.length;n++){if(s=ae,ae=E(n+1),!s){if(Q)continue;break}if(v=(u=[s[0]-i[0],s[1]-i[1]])[0]*c[1]-u[1]*c[0],p=Math.min(p,v),(m=Math.max(m,v))-p>N(s,ae))break;r=s,(f=u[0]*c[0]+u[1]*c[1])>g?(g=f,a=s,l=!1):f<h&&(h=f,o=s,l=!0)}if(l?(re(a),r!==o&&re(o)):(o!==i&&re(o),r!==a&&re(a)),re(r),n>=e.length||!s)break;re(s),i=s}}else re(a)}Y&&ne([M||Y[0],H||Y[1]]),L.push(Z.slice(0,k))}return L},fS=function(e,t,n){var i,r,a,o,s,l={},c=!1,u=-1,d=0,g=-1;for(r=0;r<n.length;r++)(a=(i=n[r][0].trace).stackgroup||"")?a in l?s=l[a]:(s=l[a]=d,d++):i.fill in aS&&g>=0?s=g:(s=g=d,d++),s<u&&(c=!0),i._groupIndex=u=s;var h=n.slice();c&&h.sort((function(e,t){var n=e[0].trace,i=t[0].trace;return n._groupIndex-i._groupIndex||n.index-i.index}));var f={};for(r=0;r<h.length;r++)a=(i=h[r][0].trace).stackgroup||"",!0===i.visible?(i._nexttrace=null,i.fill in aS&&(o=f[a],i._prevtrace=o||null,o&&(o._nexttrace=i)),i._ownfill=i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace),f[a]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return h},pS=yU.exports.tester;function mS(e,t,n,i,r,a,o){var s;!function(e,t,n,i,r){var a=n.xaxis,o=n.yaxis,s=oS.extent(lS.simpleMap(a.range,a.r2c)),l=oS.extent(lS.simpleMap(o.range,o.r2c)),c=i[0].trace;if(!gS.hasMarkers(c))return;var u=c.marker.maxdisplayed;if(0===u)return;var d=i.filter((function(e){return e.x>=s[0]&&e.x<=s[1]&&e.y>=l[0]&&e.y<=l[1]})),g=Math.ceil(d.length/u),h=0;r.forEach((function(e,n){var i=e[0].trace;gS.hasMarkers(i)&&i.marker.maxdisplayed>0&&n<t&&h++}));var f=Math.round(h*g/3+Math.floor(h/3)*g/7.1);i.forEach((function(e){delete e.vis})),d.forEach((function(e,t){0===Math.round((t+f)%g)&&(e.vis=!0)}))}(0,t,n,i,r);var l=!!o&&o.duration>0;function c(e){return l?e.transition():e}var u=n.xaxis,d=n.yaxis,g=i[0].trace,h=g.line,f=oS.select(a),p=cS(f,"g","errorbars"),m=cS(f,"g","lines"),v=cS(f,"g","points"),b=cS(f,"g","text");if(sS.getComponentMethod("errorbars","plot")(e,p,n,o),!0===g.visible){var y,I;c(f).style("opacity",g.opacity);var C=g.fill.charAt(g.fill.length-1);"x"!==C&&"y"!==C&&(C=""),i[0][n.isRangePlot?"nodeRangePlot3":"node3"]=f;var x,B,A="",F=[],Q=g._prevtrace;Q&&(A=Q._prevRevpath||"",I=Q._nextFill,F=Q._polygons);var U,w,G,R,L,S,V,Z="",k="",E=[],X=lS.noop;if(y=g._ownFill,gS.hasLines(g)||"none"!==g.fill){for(I&&I.datum(i),-1!==["hv","vh","hvh","vhv"].indexOf(h.shape)?(U=dS.steps(h.shape),w=dS.steps(h.shape.split("").reverse().join(""))):U=w="spline"===h.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?dS.smoothclosed(e.slice(1),h.smoothing):dS.smoothopen(e,h.smoothing)}:function(e){return"M"+e.join("L")},G=function(e){return w(e.reverse())},E=hS(i,{xaxis:u,yaxis:d,connectGaps:g.connectgaps,baseTolerance:Math.max(h.width||1,3)/4,shape:h.shape,simplify:h.simplify,fill:g.fill}),V=g._polygons=new Array(E.length),s=0;s<E.length;s++)g._polygons[s]=pS(E[s]);E.length&&(R=E[0][0],S=(L=E[E.length-1])[L.length-1]),X=function(e){return function(t){if(x=U(t),B=G(t),Z?C?(Z+="L"+x.substr(1),k=B+"L"+k.substr(1)):(Z+="Z"+x,k=B+"Z"+k):(Z=x,k=B),gS.hasLines(g)&&t.length>1){var n=oS.select(this);if(n.datum(i),e)c(n.style("opacity",0).attr("d",x).call(dS.lineGroupStyle)).style("opacity",1);else{var r=c(n);r.attr("d",x),dS.singleLineStyle(i,r)}}}}}var N=m.selectAll(".js-line").data(E);c(N.exit()).style("opacity",0).remove(),N.each(X(!1)),N.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(dS.lineGroupStyle).each(X(!0)),dS.setClipUrl(N,n.layerClipId,e),E.length?(y?(y.datum(i),R&&S&&(C?("y"===C?R[1]=S[1]=d.c2p(0,!0):"x"===C&&(R[0]=S[0]=u.c2p(0,!0)),c(y).attr("d","M"+S+"L"+R+"L"+Z.substr(1)).call(dS.singleFillStyle)):c(y).attr("d",Z+"Z").call(dS.singleFillStyle))):I&&("tonext"===g.fill.substr(0,6)&&Z&&A?("tonext"===g.fill?c(I).attr("d",Z+"Z"+A+"Z").call(dS.singleFillStyle):c(I).attr("d",Z+"L"+A.substr(1)+"Z").call(dS.singleFillStyle),g._polygons=g._polygons.concat(F)):(_(I),g._polygons=null)),g._prevRevpath=k,g._prevPolygons=V):(y?_(y):I&&_(I),g._polygons=g._prevRevpath=g._prevPolygons=null),v.datum(i),b.datum(i),function(t,i,r){var a,o=r[0].trace,s=gS.hasMarkers(o),g=gS.hasText(o),h=D(o),f=z,p=z;if(s||g){var m=uS,v=o.stackgroup,b=v&&"infer zero"===e._fullLayout._scatterStackOpts[u._id+d._id][v].stackgaps;o.marker.maxdisplayed||o._needsCull?m=b?M:T:v&&!b&&(m=H),s&&(f=m),g&&(p=m)}var y,I=(a=t.selectAll("path.point").data(f,h)).enter().append("path").classed("point",!0);l&&I.call(dS.pointStyle,o,e).call(dS.translatePoints,u,d).style("opacity",0).transition().style("opacity",1),a.order(),s&&(y=dS.makePointStyleFns(o)),a.each((function(t){var i=oS.select(this),r=c(i);dS.translatePoint(t,r,u,d)?(dS.singlePointStyle(t,r,o,y,e),n.layerClipId&&dS.hideOutsideRangePoint(t,r,u,d,o.xcalendar,o.ycalendar),o.customdata&&i.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):r.remove()})),l?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=i.selectAll("g").data(p,h)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each((function(e){var t=oS.select(this),i=c(t.select("text"));dS.translatePoint(e,i,u,d)?n.layerClipId&&dS.hideOutsideRangePoint(e,t,u,d,o.xcalendar,o.ycalendar):t.remove()})),a.selectAll("text").call(dS.textPointStyle,o,e).each((function(e){var t=u.c2p(e.x),n=d.c2p(e.y);oS.select(this).selectAll("tspan.line").each((function(){c(oS.select(this)).attr({x:t,y:n})}))})),a.exit().remove()}(v,b,i);var W=!1===g.cliponaxis?null:n.layerClipId;dS.setClipUrl(v,W,e),dS.setClipUrl(b,W,e)}function _(e){c(e).attr("d","M0,0Z")}function T(e){return e.filter((function(e){return!e.gap&&e.vis}))}function M(e){return e.filter((function(e){return e.vis}))}function H(e){return e.filter((function(e){return!e.gap}))}function Y(e){return e.id}function D(e){if(e.ids)return Y}function z(){return!1}}var vS={container:"marker",min:"cmin",max:"cmax"},bS=Im.exports,yS=Gs.exports,IS=Am.exports,CS=hg;function xS(e,t,n){IS.pointStyle(e.selectAll("path.point"),t,n)}function BS(e,t,n){IS.textPointStyle(e.selectAll("text"),t,n)}var AS={style:function(e){var t=yS.select(e).selectAll("g.trace.scatter");t.style("opacity",(function(e){return e[0].trace.opacity})),t.selectAll("g.points").each((function(t){xS(yS.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.text").each((function(t){BS(yS.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.trace path.js-line").call(IS.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(IS.fillGroupStyle),CS.getComponentMethod("errorbars","style")(t)},stylePoints:xS,styleText:BS,styleOnSelect:function(e,t,n){var i=t[0].trace;i.selectedpoints?(IS.selectedPointStyle(n.selectAll("path.point"),i),IS.selectedTextStyle(n.selectAll("text"),i)):(xS(n,i,e),BS(n,i,e))}},FS=Hd.exports,QS=yb,US=ws.exports,wS=SA,GS=hg,RS=function(e,t){var n,i;if("lines"===e.mode)return(n=e.line.color)&&FS.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var r=t.mcc||(e.marker||{}).color,a=t.mlcc||((e.marker||{}).line||{}).color;return(i=r&&FS.opacity(r)?r:a&&FS.opacity(a)&&(t.mlw||((e.marker||{}).line||{}).width)?a:"")?FS.opacity(i)<.3?FS.addOpacity(i,.3):i:(n=(e.line||{}).color)&&FS.opacity(n)&&QS.hasLines(e)&&e.line.width?n:e.fillcolor},LS=Hd.exports,SS=US.fillText,VS=yb,ZS={},kS={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}},ES=hg.traceIs,XS=Ky,NS=function(e,t,n,i){n("autotypenumbers",i.autotypenumbersDflt),"-"===n("type",(i.splomStash||{}).type)&&(!function(e,t){if("-"!==e.type)return;var n,i=e._id,r=i.charAt(0);-1!==i.indexOf("scene")&&(i=r);var a=function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i];if("splom"===r.type&&r._length>0&&(r["_"+n+"axes"]||{})[t])return r;if((r[n+"axis"]||n)===t){if(_S(r,n))return r;if((r[n]||[]).length||r[n+"0"])return r}}}(t,i,r);if(!a)return;if("histogram"===a.type&&r==={v:"y",h:"x"}[a.orientation||"v"])return void(e.type="linear");var o=r+"calendar",s=a[o],l={noMultiCategory:!ES(a,"cartesian")||ES(a,"noMultiCategory")};"box"===a.type&&a._hasPreCompStats&&r==={h:"x",v:"y"}[a.orientation||"v"]&&(l.noMultiCategory=!0);if(l.autotypenumbers=e.autotypenumbers,_S(a,r)){var c=WS(a),u=[];for(n=0;n<t.length;n++){var d=t[n];ES(d,"box-violin")&&(d[r+"axis"]||r)===i&&(void 0!==d[c]?u.push(d[c][0]):void 0!==d.name?u.push(d.name):u.push("text"),d[o]!==s&&(s=void 0))}e.type=XS(u,s,l)}else if("splom"===a.type){var g=a.dimensions[a._axesDim[i]];g.visible&&(e.type=XS(g.values,s,l))}else e.type=XS(a[r]||[a[r+"0"]],s,l)}(t,i.data),"-"===t.type?t.type="linear":e.type=t.type)};function WS(e){return{v:"x",h:"y"}[e.orientation||"v"]}function _S(e,t){var n=WS(e),i=ES(e,"box-violin"),r=ES(e._fullInput||{},"candlestick");return i&&!r&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}var TS=Id.exports.mix,MS=Yd.lightFraction,HS=ws.exports,YS=Yu,DS=hg,zS=ws.exports,OS=Zv,JS=nv,jS=Uv,PS=Rv,KS=_v,qS=Hv,$S=function(e,t,n,i){if("category"===t.type){var r,a=e.categoryarray,o=Array.isArray(a)&&a.length>0;o&&(r="array");var s,l=n("categoryorder",r);"array"===l&&(s=n("categoryarray")),o||"array"!==l||(l=t.categoryorder="trace"),"trace"===l?t._initialCategories=[]:"array"===l?t._initialCategories=s.slice():(s=function(e,t){var n,i,r,a=t.dataAttr||e._id.charAt(0),o={};if(t.axData)n=t.axData;else for(n=[],i=0;i<t.data.length;i++){var s=t.data[i];s[a+"axis"]===e._id&&n.push(s)}for(i=0;i<n.length;i++){var l=n[i][a];for(r=0;r<l.length;r++){var c=l[r];null!=c&&(o[c]=1)}}return Object.keys(o)}(t,i).sort(),"category ascending"===l?t._initialCategories=s:"category descending"===l&&(t._initialCategories=s.reverse()))}},eV=function(e,t,n,i){var r=(i=i||{}).dfltColor;function a(n,r){return HS.coerce2(e,t,i.attributes,n,r)}var o=a("linecolor",r),s=a("linewidth");n("showline",i.showLine||!!o||!!s)||(delete t.linecolor,delete t.linewidth);var l=a("gridcolor",TS(r,i.bgColor,i.blend||MS).toRgbString()),c=a("gridwidth");if(n("showgrid",i.showGrid||!!l||!!c)||(delete t.gridcolor,delete t.gridwidth),!i.noZeroLine){var u=a("zerolinecolor",r),d=a("zerolinewidth");n("zeroline",i.showGrid||!!u||!!d)||(delete t.zerolinecolor,delete t.zerolinewidth)}},tV=Hy,nV=Zp.WEEKDAY_PATTERN,iV=Zp.HOUR_PATTERN,rV=function(e,t,n,i,r){var a,o=i.letter,s=i.font||{},l=i.splomStash||{},c=n("visible",!i.visibleDflt),u=t._template||{},d=t.type||u.type||"-";"date"===d&&(DS.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",i.calendar),i.noTicklabelmode||(a=n("ticklabelmode")));var g="";i.noTicklabelposition&&"multicategory"!==d||(g=zS.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===a?["outside","inside"]:"x"===o?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),i.noTicklabeloverflow||n("ticklabeloverflow",-1!==g.indexOf("inside")?"hide past domain":"category"===d||"multicategory"===d?"allow":"hide past div"),tV(t,r);var h=!t.isValidRange(e.range);h&&i.reverseDflt&&(h="reversed"),!n("autorange",h)||"linear"!==d&&"-"!==d||n("rangemode"),n("range"),t.cleanRange(),$S(e,t,n,i),"category"===d||i.noHover||n("hoverformat");var f=n("color"),p=f!==JS.color.dflt?f:s.color,m=l.label||r._dfltTitle[o];if(qS(e,t,n,d,i),!c)return t;n("title.text",m),zS.coerceFont(n,"title.font",{family:s.family,size:zS.bigFont(s.size),color:p}),jS(e,t,n,d),KS(e,t,n,d,i),PS(e,t,n,i),eV(e,t,n,{dfltColor:f,bgColor:i.bgColor,showGrid:i.showGrid,attributes:JS}),(t.showline||t.ticks)&&n("mirror"),i.automargin&&n("automargin");var v,b="multicategory"===d;i.noTickson||"category"!==d&&!b||!t.ticks&&!t.showgrid||(b&&(v="boundaries"),"boundaries"===n("tickson",v)&&delete t.ticklabelposition);b&&(n("showdividers")&&(n("dividercolor"),n("dividerwidth")));if("date"===d)if(OS(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:aV}),t.rangebreaks.length){for(var y=0;y<t.rangebreaks.length;y++)if(t.rangebreaks[y].pattern===nV){t._hasDayOfWeekBreaks=!0;break}if(tV(t,r),r._has("scattergl")||r._has("splom"))for(var I=0;I<i.data.length;I++){var C=i.data[I];"scattergl"!==C.type&&"splom"!==C.type||(C.visible=!1,zS.warn(C.type+" traces do not work on axes with rangebreaks. Setting trace "+C.index+" to `visible: false`."))}}else delete t.rangebreaks;return t};function aV(e,t,n){function i(n,i){return zS.coerce(e,t,JS.rangebreaks,n,i)}if(i("enabled")){var r=i("bounds");if(r&&r.length>=2){var a,o,s="";if(2===r.length)for(a=0;a<2;a++)if(o=sV(r[a])){s=nV;break}var l=i("pattern",s);if(l===nV)for(a=0;a<2;a++)(o=sV(r[a]))&&(t.bounds[a]=r[a]=o-1);if(l)for(a=0;a<2;a++)switch(o=r[a],l){case nV:if(!YS(o))return void(t.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||o>=7)return void(t.enabled=!1);t.bounds[a]=r[a]=o;break;case iV:if(!YS(o))return void(t.enabled=!1);if((o=+o)<0||o>24)return void(t.enabled=!1);t.bounds[a]=r[a]=o}if(!1===n.autorange){var c=n.range;if(c[0]<c[1]){if(r[0]<c[0]&&r[1]>c[1])return void(t.enabled=!1)}else if(r[0]>c[0]&&r[1]<c[1])return void(t.enabled=!1)}}else{var u=i("values");if(!u||!u.length)return void(t.enabled=!1);i("dvalue")}}}var oV={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function sV(e){if("string"==typeof e)return oV[e.substr(0,3).toLowerCase()]}var lV=Yu,cV=ws.exports,uV=function(e,t,n,i){var r,a,o,s,l=i.counterAxes||[],c=i.overlayableAxes||[],u=i.letter,d=i.grid;d&&(a=d._domains[u][d._axisMap[t._id]],r=d._anchors[t._id],a&&(o=d[u+"side"].split(" ")[0],s=d.domain[u]["right"===o||"top"===o?1:0])),a=a||[0,1],r=r||(lV(e.position)?"free":l[0]||"free"),o=o||("x"===u?"bottom":"left"),s=s||0,"free"===cV.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:r}},"anchor")&&n("position",s),cV.coerce(e,t,{side:{valType:"enumerated",values:"x"===u?["bottom","top"]:["left","right"],dflt:o}},"side");var g=!1;if(c.length&&(g=cV.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!g){var h=n("domain",a);h[0]>h[1]-1/4096&&(t.domain=a),cV.noneOrAll(e.domain,t.domain,a)}return n("layer"),t},dV=ws.exports,gV=Hd.exports,hV=xb.isUnifiedHover,fV=bA,pV=Qp,mV=ph,vV=nv,bV=NS,yV=rV,IV=XQ,CV=uV,xV=Sp,BV=xV.id2name,AV=xV.name2id,FV=Zp.AX_ID_PATTERN,QV=hg.traceIs,UV=hg.getComponentMethod;function wV(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}var GV=Gs.exports,RV=hg,LV=ws.exports,SV=Am.exports,VV=Im.exports,ZV=Gs.exports,kV=hg,EV=ws.exports,XV=Fp.exports,NV=Am.exports,WV=Ep.getModuleCalcData,_V=Sp,TV=Zp,MV=xm,HV=EV.ensureSingle;function YV(e,t,n){return EV.ensureSingle(e,t,n,(function(e){e.datum(n)}))}function DV(e,t,n,i,r){for(var a,o,s,l=TV.traceLayerClasses,c=e._fullLayout,u=c._modules,d=[],g=[],h=0;h<u.length;h++){var f=(a=u[h]).name,p=kV.modules[f].categories;if(p.svg){var m=a.layerName||f+"layer",v=a.plot;s=(o=WV(n,v))[0],n=o[1],s.length&&d.push({i:l.indexOf(m),className:m,plotMethod:v,cdModule:s}),p.zoomScale&&g.push("."+m)}}d.sort((function(e,t){return e.i-t.i}));var b=t.plot.selectAll("g.mlayer").data(d,(function(e){return e.className}));if(b.enter().append("g").attr("class",(function(e){return e.className})).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),b.exit().remove(),b.order(),b.each((function(n){var a=ZV.select(this),o=n.className;n.plotMethod(e,t,n.cdModule,a,i,r),-1===TV.clipOnAxisFalseQuery.indexOf("."+o)&&NV.setClipUrl(a,t.layerClipId,e)})),c._has("scattergl")&&(a=kV.getModule("scattergl"),s=WV(n,a)[0],a.plot(e,t,s)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(TV.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),g.length)){var y=t.plot.selectAll(g.join(",")).selectAll(".trace");t.zoomScalePts=y.selectAll("path.point"),t.zoomScaleTxt=y.selectAll(".textpoint")}}function zV(e,t){var n=t.plotgroup,i=t.id,r=TV.layerValue2layerClass[t.xaxis.layer],a=TV.layerValue2layerClass[t.yaxis.layer],o=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var s=t.mainplotinfo,l=s.plotgroup,c=i+"-x",u=i+"-y";t.gridlayer=s.gridlayer,t.zerolinelayer=s.zerolinelayer,HV(s.overlinesBelow,"path",c),HV(s.overlinesBelow,"path",u),HV(s.overaxesBelow,"g",c),HV(s.overaxesBelow,"g",u),t.plot=HV(s.overplot,"g",i),HV(s.overlinesAbove,"path",c),HV(s.overlinesAbove,"path",u),HV(s.overaxesAbove,"g",c),HV(s.overaxesAbove,"g",u),t.xlines=l.select(".overlines-"+r).select("."+c),t.ylines=l.select(".overlines-"+a).select("."+u),t.xaxislayer=l.select(".overaxes-"+r).select("."+c),t.yaxislayer=l.select(".overaxes-"+a).select("."+u)}else if(o)t.xlines=HV(n,"path","xlines-above"),t.ylines=HV(n,"path","ylines-above"),t.xaxislayer=HV(n,"g","xaxislayer-above"),t.yaxislayer=HV(n,"g","yaxislayer-above");else{var d=HV(n,"g","layer-subplot");t.shapelayer=HV(d,"g","shapelayer"),t.imagelayer=HV(d,"g","imagelayer"),t.gridlayer=HV(n,"g","gridlayer"),t.zerolinelayer=HV(n,"g","zerolinelayer"),HV(n,"path","xlines-below"),HV(n,"path","ylines-below"),t.overlinesBelow=HV(n,"g","overlines-below"),HV(n,"g","xaxislayer-below"),HV(n,"g","yaxislayer-below"),t.overaxesBelow=HV(n,"g","overaxes-below"),t.plot=HV(n,"g","plot"),t.overplot=HV(n,"g","overplot"),t.xlines=HV(n,"path","xlines-above"),t.ylines=HV(n,"path","ylines-above"),t.overlinesAbove=HV(n,"g","overlines-above"),HV(n,"g","xaxislayer-above"),HV(n,"g","yaxislayer-above"),t.overaxesAbove=HV(n,"g","overaxes-above"),t.xlines=n.select(".xlines-"+r),t.ylines=n.select(".ylines-"+a),t.xaxislayer=n.select(".xaxislayer-"+r),t.yaxislayer=n.select(".yaxislayer-"+a)}o||(YV(t.gridlayer,"g",t.xaxis._id),YV(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map((function(e){return e[0]})).sort(_V.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function OV(e,t){if(e){var n={};for(var i in e.each((function(e){var i=e[0];ZV.select(this).remove(),JV(i,t),n[i]=!0})),t._plots)for(var r=t._plots[i].overlays||[],a=0;a<r.length;a++){var o=r[a];n[o.id]&&o.plot.selectAll(".trace").remove()}}}function JV(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}ZS.name="cartesian",ZS.attr=["xaxis","yaxis"],ZS.idRoot=["x","y"],ZS.idRegex=TV.idRegex,ZS.attrRegex=TV.attrRegex,ZS.attributes=kS,ZS.layoutAttributes=nv,ZS.supplyLayoutDefaults=function(e,t,n){var i,r,a=t.autotypenumbers,o={},s={},l={},c={},u={},d={},g={},h={},f={},p={};for(i=0;i<n.length;i++){var m=n[i];if(QV(m,"cartesian")||QV(m,"gl2d")){var v,b;if(m.xaxis)v=BV(m.xaxis),wV(o,v,m);else if(m.xaxes)for(r=0;r<m.xaxes.length;r++)wV(o,BV(m.xaxes[r]),m);if(m.yaxis)b=BV(m.yaxis),wV(o,b,m);else if(m.yaxes)for(r=0;r<m.yaxes.length;r++)wV(o,BV(m.yaxes[r]),m);if("funnel"===m.type?"h"===m.orientation?(v&&(s[v]=!0),b&&(g[b]=!0)):b&&(l[b]=!0):"image"===m.type?(b&&(h[b]=!0),v&&(h[v]=!0)):(b&&(u[b]=!0,d[b]=!0),QV(m,"carpet")&&("carpet"!==m.type||m._cheater)||v&&(c[v]=!0)),"carpet"===m.type&&m._cheater&&v&&(s[v]=!0),QV(m,"2dMap")&&(f[v]=!0,f[b]=!0),QV(m,"oriented"))p["h"===m.orientation?b:v]=!0}}var y=t._subplots,I=y.xaxis,C=y.yaxis,x=dV.simpleMap(I,BV),B=dV.simpleMap(C,BV),A=x.concat(B),F=gV.background;I.length&&C.length&&(F=dV.coerce(e,t,mV,"plot_bgcolor"));var Q,U,w,G,R,L=gV.combine(F,t.paper_bgcolor);function S(){var e=o[Q]||[];R._traceIndices=e.map((function(e){return e._expandedIndex})),R._annIndices=[],R._shapeIndices=[],R._imgIndices=[],R._subplotsWith=[],R._counterAxes=[],R._name=R._attr=Q,R._id=U}function V(e,t){return dV.coerce(G,R,vV,e,t)}function Z(e,t){return dV.coerce2(G,R,vV,e,t)}function k(e){return"x"===e?C:I}function E(t,n){for(var i="x"===t?x:B,r=[],a=0;a<i.length;a++){var o=i[a];o===n||(e[o]||{}).overlaying||r.push(AV(o))}return r}var X={x:k("x"),y:k("y")},N=X.x.concat(X.y),W={},_=[];function T(){var e=G.matches;FV.test(e)&&-1===N.indexOf(e)&&(W[e]=G.type,_=Object.keys(W))}var M=fV(e,t),H=hV(M);for(i=0;i<A.length;i++){Q=A[i],U=AV(Q),w=Q.charAt(0),dV.isPlainObject(e[Q])||(e[Q]={}),G=e[Q],R=pV.newContainer(t,Q,w+"axis"),S();var Y="x"===w&&!c[Q]&&s[Q]||"y"===w&&!u[Q]&&l[Q],D="y"===w&&(!d[Q]&&g[Q]||h[Q]),z={letter:w,font:t.font,outerTicks:f[Q],showGrid:!p[Q],data:o[Q]||[],bgColor:L,calendar:t.calendar,automargin:!0,visibleDflt:Y,reverseDflt:D,autotypenumbersDflt:a,splomStash:((t._splomAxes||{})[w]||{})[U]};V("uirevision",t.uirevision),bV(G,R,V,z),yV(G,R,V,z,t);var O=H&&w===M.charAt(0),J=Z("spikecolor",H?R.color:void 0),j=Z("spikethickness",H?1.5:void 0),P=Z("spikedash",H?"dot":void 0),K=Z("spikemode",H?"across":void 0),q=Z("spikesnap");V("showspikes",!!(O||J||j||P||K||q))||(delete R.spikecolor,delete R.spikethickness,delete R.spikedash,delete R.spikemode,delete R.spikesnap),CV(G,R,V,{letter:w,counterAxes:X[w],overlayableAxes:E(w,Q),grid:t.grid}),V("title.standoff"),T(),R._input=G}for(i=0;i<_.length;){U=_[i++],w=(Q=BV(U)).charAt(0),dV.isPlainObject(e[Q])||(e[Q]={}),G=e[Q],R=pV.newContainer(t,Q,w+"axis"),S();var $={letter:w,font:t.font,outerTicks:f[Q],showGrid:!p[Q],data:[],bgColor:L,calendar:t.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:a,splomStash:((t._splomAxes||{})[w]||{})[U]};V("uirevision",t.uirevision),R.type=W[U]||"linear",yV(G,R,V,$,t),CV(G,R,V,{letter:w,counterAxes:X[w],overlayableAxes:E(w,Q),grid:t.grid}),V("fixedrange"),T(),R._input=G}var ee=UV("rangeslider","handleDefaults"),te=UV("rangeselector","handleDefaults");for(i=0;i<x.length;i++)Q=x[i],G=e[Q],R=t[Q],ee(e,t,Q),"date"===R.type&&te(G,R,t,B,R.calendar),V("fixedrange");for(i=0;i<B.length;i++){Q=B[i],G=e[Q],R=t[Q];var ne=t[BV(R.anchor)];V("fixedrange",UV("rangeslider","isVisible")(ne))}IV.handleDefaults(e,t,{axIds:N.concat(_).sort(xV.idSort),axHasImage:h})},ZS.transitionAxes=function(e,t,n,i){var r=e._fullLayout;if(0!==t.length){var a,o,s,l;i&&(a=i());var c=GV.ease(n.easing);return e._transitionData._interruptCallbacks.push((function(){return window.cancelAnimationFrame(l),l=null,function(){for(var n={},i=0;i<t.length;i++){var r=t[i],a=r.plotinfo.xaxis,o=r.plotinfo.yaxis;r.xr0&&(n[a._name+".range"]=r.xr0.slice()),r.yr0&&(n[o._name+".range"]=r.yr0.slice())}return RV.call("relayout",e,n).then((function(){for(var e=0;e<t.length;e++)u(t[e].plotinfo)}))}()})),o=Date.now(),l=window.requestAnimationFrame((function i(){s=Date.now();for(var r=Math.min(1,(s-o)/n.duration),g=c(r),h=0;h<t.length;h++)d(t[h],g);s-o>n.duration?(!function(){for(var n={},i=0;i<t.length;i++){var r=t[i],o=r.plotinfo.xaxis,s=r.plotinfo.yaxis;r.xr1&&(n[o._name+".range"]=r.xr1.slice()),r.yr1&&(n[s._name+".range"]=r.yr1.slice())}a&&a(),RV.call("relayout",e,n).then((function(){for(var e=0;e<t.length;e++)u(t[e].plotinfo)}))}(),l=window.cancelAnimationFrame(i)):l=window.requestAnimationFrame(i)})),Promise.resolve()}function u(e){var t=e.xaxis,n=e.yaxis;r._defs.select("#"+e.clipId+"> rect").call(SV.setTranslate,0,0).call(SV.setScale,1,1),e.plot.call(SV.setTranslate,t._offset,n._offset).call(SV.setScale,1,1);var i=e.plot.selectAll(".scatterlayer .trace");i.selectAll(".point").call(SV.setPointGroupScale,1,1),i.selectAll(".textpoint").call(SV.setTextPointsScale,1,1),i.call(SV.hideOutsideRangePoints,e)}function d(t,n){var i=t.plotinfo,r=i.xaxis,a=i.yaxis,o=r._length,s=a._length,l=!!t.xr1,c=!!t.yr1,u=[];if(l){var d=LV.simpleMap(t.xr0,r.r2l),g=LV.simpleMap(t.xr1,r.r2l),h=d[1]-d[0],f=g[1]-g[0];u[0]=(d[0]*(1-n)+n*g[0]-d[0])/(d[1]-d[0])*o,u[2]=o*(1-n+n*f/h),r.range[0]=r.l2r(d[0]*(1-n)+n*g[0]),r.range[1]=r.l2r(d[1]*(1-n)+n*g[1])}else u[0]=0,u[2]=o;if(c){var p=LV.simpleMap(t.yr0,a.r2l),m=LV.simpleMap(t.yr1,a.r2l),v=p[1]-p[0],b=m[1]-m[0];u[1]=(p[1]*(1-n)+n*m[1]-p[1])/(p[0]-p[1])*s,u[3]=s*(1-n+n*b/v),a.range[0]=r.l2r(p[0]*(1-n)+n*m[0]),a.range[1]=a.l2r(p[1]*(1-n)+n*m[1])}else u[1]=0,u[3]=s;VV.drawOne(e,r,{skipTitle:!0}),VV.drawOne(e,a,{skipTitle:!0}),VV.redrawComponents(e,[r._id,a._id]);var y=l?o/u[2]:1,I=c?s/u[3]:1,C=l?u[0]:0,x=c?u[1]:0,B=l?u[0]/u[2]*o:0,A=c?u[1]/u[3]*s:0,F=r._offset-B,Q=a._offset-A;i.clipRect.call(SV.setTranslate,C,x).call(SV.setScale,1/y,1/I),i.plot.call(SV.setTranslate,F,Q).call(SV.setScale,y,I),SV.setPointGroupScale(i.zoomScalePts,1/y,1/I),SV.setTextPointsScale(i.zoomScaleTxt,1/y,1/I)}VV.redrawComponents(e)},ZS.finalizeSubplots=function(e,t){var n,i,r,a=t._subplots,o=a.xaxis,s=a.yaxis,l=a.cartesian,c=l.concat(a.gl2d||[]),u={},d={};for(n=0;n<c.length;n++){var g=c[n].split("y");u[g[0]]=1,d["y"+g[1]]=1}for(n=0;n<o.length;n++)u[i=o[n]]||(r=(e[_V.id2name(i)]||{}).anchor,TV.idRegex.y.test(r)||(r="y"),l.push(i+r),c.push(i+r),d[r]||(d[r]=1,EV.pushUnique(s,r)));for(n=0;n<s.length;n++)d[r=s[n]]||(i=(e[_V.id2name(r)]||{}).anchor,TV.idRegex.x.test(i)||(i="x"),l.push(i+r),c.push(i+r),u[i]||(u[i]=1,EV.pushUnique(o,i)));if(!c.length){for(var h in i="",r="",e){if(TV.attrRegex.test(h))"x"===h.charAt(0)?(!i||+h.substr(5)<+i.substr(5))&&(i=h):(!r||+h.substr(5)<+r.substr(5))&&(r=h)}i=i?_V.name2id(i):"x",r=r?_V.name2id(r):"y",o.push(i),s.push(r),l.push(i+r)}},ZS.plot=function(e,t,n,i){var r,a=e._fullLayout,o=a._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],r=0;r<s.length;r++)t.push(r);for(r=0;r<o.length;r++){for(var l,c=o[r],u=a._plots[c],d=[],g=0;g<s.length;g++){var h=s[g],f=h[0].trace;f.xaxis+f.yaxis===c&&((-1!==t.indexOf(f.index)||f.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(f.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(h)),l=h)}DV(e,u,d,n,i)}},ZS.clean=function(e,t,n,i){var r,a,o,s=i._plots||{},l=t._plots||{},c=i._subplots||{};if(i._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(o in s)(r=s[o]).plotgroup&&r.plotgroup.remove();var u=i._has&&i._has("gl"),d=t._has&&t._has("gl");if(u&&!d)for(o in s)(r=s[o])._scene&&r._scene.destroy();if(c.xaxis&&c.yaxis){var g=_V.listIds({_fullLayout:i});for(a=0;a<g.length;a++){var h=g[a];t[_V.id2name(h)]||i._infolayer.selectAll(".g-"+h+"title").remove()}}var f=i._has&&i._has("cartesian"),p=t._has&&t._has("cartesian");if(f&&!p)OV(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups,delete i._axisMatchGroups;else if(c.cartesian)for(a=0;a<c.cartesian.length;a++){var m=c.cartesian[a];if(!l[m]){var v="."+m+",."+m+"-x,."+m+"-y";i._cartesianlayer.selectAll(v).remove(),JV(m,i)}}},ZS.drawFramework=function(e){var t=e._fullLayout,n=function(e){var t,n,i,r,a,o,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){i=l[t],a=(r=s._plots[i]).xaxis,o=r.yaxis;var g=a._mainAxis,h=o._mainAxis,f=g._id+h._id,p=s._plots[f];r.overlays=[],f!==i&&p?(r.mainplot=f,r.mainplotinfo=p,d.push(i)):(r.mainplot=void 0,r.mainplotinfo=void 0,u.push(i))}for(t=0;t<d.length;t++)i=d[t],(r=s._plots[i]).mainplotinfo.overlays.push(r);var m=u.concat(d),v=new Array(c);for(t=0;t<c;t++){i=m[t],a=(r=s._plots[i]).xaxis,o=r.yaxis;var b=[i,a.layer,o.layer,a.overlaying||"",o.overlaying||""];for(n=0;n<r.overlays.length;n++)b.push(r.overlays[n].id);v[t]=b}return v}(e),i=t._cartesianlayer.selectAll(".subplot").data(n,String);i.enter().append("g").attr("class",(function(e){return"subplot "+e[0]})),i.order(),i.exit().call(OV,t),i.each((function(n){var i=n[0],r=t._plots[i];r.plotgroup=ZV.select(this),zV(e,r),r.draglayer=HV(t._draggers,"g",i)}))},ZS.rangePlot=function(e,t,n){zV(e,t),DV(e,t,n),XV.style(e)},ZS.toSVG=function(e){var t=e._fullLayout._glimages,n=ZV.select(e).selectAll(".svg-container"),i=n.filter((function(e,t){return t===n.size()-1})).selectAll(".gl-canvas-context, .gl-canvas-focus");i.each((function(){var e=this,n=e.toDataURL("image/png");t.append("svg:image").attr({xmlns:MV.svg,"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}))},ZS.updateFx=HC.updateFx;var jV={hasLines:yb.hasLines,hasMarkers:yb.hasMarkers,hasText:yb.hasText,isBubble:yb.isBubble,attributes:TR,supplyDefaults:function(e,t,n,i){function r(n,i){return cL.coerce(e,t,dL,n,i)}var a=fL(e,t,i,r);if(a||(t.visible=!1),t.visible){pL(e,t,i,r),r("xhoverformat"),r("yhoverformat");var o=mL(e,t,i,r),s=!o&&a<gL.PTS_LINESONLY?"lines+markers":"lines";r("text"),r("hovertext"),r("mode",s),hL.hasLines(t)&&(bL(e,t,n,i,r),yL(e,t,r),r("connectgaps"),r("line.simplify")),hL.hasMarkers(t)&&vL(e,t,n,i,r,{gradient:!0}),hL.hasText(t)&&(r("texttemplate"),IL(e,t,i,r));var l=[];(hL.hasMarkers(t)||hL.hasText(t))&&(r("cliponaxis"),r("marker.maxdisplayed"),l.push("points")),r("fill",o?o.fillDflt:"none"),"none"!==t.fill&&(CL(e,t,n,r),hL.hasLines(t)||yL(e,t,r));var c=(t.line||{}).color,u=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||l.push("fills"),r("hoveron",l.join("+")||"points"),"fills"!==t.hoveron&&r("hovertemplate");var d=uL.getComponentMethod("errorbars","supplyDefaults");d(e,t,c||u||n,{axis:"y"}),d(e,t,c||u||n,{axis:"x",inherit:"y"}),cL.coerceSelectionMarkerOpacity(t,r)}},crossTraceDefaults:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var i=n.fill;if("none"!==i&&"toself"!==i&&(n.opacity=void 0,"tonexty"===i||"tonextx"===i))for(var r=t-1;r>=0;r--){var a=e[r];if("scatter"===a.type&&a.xaxis===n.xaxis&&a.yaxis===n.yaxis){a.opacity=void 0;break}}}}},calc:JL.calc,crossTraceCalc:function(e,t){var n=t.xaxis,i=t.yaxis,r=n._id+i._id,a=e._fullLayout._scatterStackOpts[r];if(a){var o,s,l,c,u,d,g,h,f,p,m,v,b,y,I,C=e.calcdata;for(var x in a){var B=(p=a[x]).traceIndices;if(B.length){for(m="interpolate"===p.stackgaps,v=p.groupnorm,"v"===p.orientation?(b="x",y="y"):(b="y",y="x"),I=new Array(B.length),o=0;o<I.length;o++)I[o]=!1;d=C[B[0]];var A=new Array(d.length);for(o=0;o<d.length;o++)A[o]=d[o][b];for(o=1;o<B.length;o++){for(u=C[B[o]],s=l=0;s<u.length;s++){for(g=u[s][b];g>A[l]&&l<A.length;l++)PL(u,s,A[l],o,I,m,b),s++;if(g!==A[l]){for(c=0;c<o;c++)PL(C[B[c]],l,g,c,I,m,b);A.splice(l,0,g)}l++}for(;l<A.length;l++)PL(u,s,A[l],o,I,m,b),s++}var F=A.length;for(s=0;s<d.length;s++){for(h=d[s][y]=d[s].s,o=1;o<B.length;o++)(u=C[B[o]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=F,h+=u[s].s,u[s][y]=h;if(v)for(f=("fraction"===v?h:h/100)||1,o=0;o<B.length;o++){var Q=C[B[o]][s];Q[y]/=f,Q.sNorm=Q.s/f}}for(o=0;o<B.length;o++){var U=(u=C[B[o]])[0].trace,w=jL.calcMarkerSize(U,U._rawLength),G=Array.isArray(w);if(w&&I[o]||G){var R=w;for(w=new Array(F),s=0;s<F;s++)w[s]=u[s].gap?0:G?R[u[s].i]:R}var L=new Array(F),S=new Array(F);for(s=0;s<F;s++)L[s]=u[s].x,S[s]=u[s].y;jL.calcAxisExpansion(e,U,n,i,L,S,w),u[0].t.orientation=p.orientation}}}}},arraysToCalcdata:SL,plot:function(e,t,n,i,r,a){var o,s,l=!r,c=!!r&&r.duration>0,u=fS(e,t,n);(o=i.selectAll("g.trace").data(u,(function(e){return e[0].trace.uid})),o.enter().append("g").attr("class",(function(e){return"trace scatter trace"+e[0].trace.uid})).style("stroke-miterlimit",2),o.order(),function(e,t,n){t.each((function(t){var i=cS(oS.select(this),"g","fills");dS.setClipUrl(i,n.layerClipId,e);var r=t[0].trace,a=[];r._ownfill&&a.push("_ownFill"),r._nexttrace&&a.push("_nextFill");var o=i.selectAll("g").data(a,uS);o.enter().append("g"),o.exit().each((function(e){r[e]=null})).remove(),o.order().each((function(e){r[e]=cS(oS.select(this),"path","js-fill")}))}))}(e,o,t),c)?(a&&(s=a()),oS.transition().duration(r.duration).ease(r.easing).each("end",(function(){s&&s()})).each("interrupt",(function(){s&&s()})).each((function(){i.selectAll("g.trace").each((function(n,i){mS(e,i,t,n,u,this,r)}))}))):o.each((function(n,i){mS(e,i,t,n,u,this,r)}));l&&o.exit().remove(),i.selectAll("path:not([d])").remove()},colorbar:vS,formatLabels:function(e,t,n){var i={},r={_fullLayout:n},a=bS.getFromTrace(r,t,"x"),o=bS.getFromTrace(r,t,"y");return i.xLabel=bS.tickText(a,a.c2l(e.x),!0).text,i.yLabel=bS.tickText(o,o.c2l(e.y),!0).text,i},style:AS.style,styleOnSelect:AS.styleOnSelect,hoverPoints:function(e,t,n,i){var r=e.cd,a=r[0].trace,o=e.xa,s=e.ya,l=o.c2p(t),c=s.c2p(n),u=[l,c],d=a.hoveron||"",g=-1!==a.mode.indexOf("markers")?3:.5,h=!!a.xperiodalignment,f=!!a.yperiodalignment;if(-1!==d.indexOf("points")){var p=function(e){var t=Math.max(g,e.mrc||0),n=o.c2p(e.x)-l,i=s.c2p(e.y)-c;return Math.max(Math.sqrt(n*n+i*i)-t,1-g/t)},m=wS.getDistanceFunction(i,(function(e){if(h){var t=o.c2p(e.xStart),n=o.c2p(e.xEnd);return l>=Math.min(t,n)&&l<=Math.max(t,n)?0:1/0}var i=Math.max(3,e.mrc||0),r=1-1/i,a=Math.abs(o.c2p(e.x)-l);return a<i?r*a/i:a-i+r}),(function(e){if(f){var t=s.c2p(e.yStart),n=s.c2p(e.yEnd);return c>=Math.min(t,n)&&c<=Math.max(t,n)?0:1/0}var i=Math.max(3,e.mrc||0),r=1-1/i,a=Math.abs(s.c2p(e.y)-c);return a<i?r*a/i:a-i+r}),p);if(wS.getClosest(r,m,e),!1!==e.index){var v=r[e.index],b=o.c2p(v.x,!0),y=s.c2p(v.y,!0),I=v.mrc||1;e.index=v.i;var C=r[0].t.orientation,x=C&&(v.sNorm||v.s),B="h"===C?x:void 0!==v.orig_x?v.orig_x:v.x,A="v"===C?x:void 0!==v.orig_y?v.orig_y:v.y;return US.extendFlat(e,{color:RS(a,v),x0:b-I,x1:b+I,xLabelVal:B,y0:y-I,y1:y+I,yLabelVal:A,spikeDistance:p(v),hovertemplate:a.hovertemplate}),SS(v,a,e),GS.getComponentMethod("errorbars","hoverInfo")(v,a,e),[e]}}if(-1!==d.indexOf("fills")&&a._polygons){var F,Q,U,w,G,R,L,S,V,Z=a._polygons,k=[],E=!1,X=1/0,N=-1/0,W=1/0,_=-1/0;for(F=0;F<Z.length;F++)(U=Z[F]).contains(u)&&(E=!E,k.push(U),W=Math.min(W,U.ymin),_=Math.max(_,U.ymax));if(E){var T=((W=Math.max(W,0))+(_=Math.min(_,s._length)))/2;for(F=0;F<k.length;F++)for(w=k[F].pts,Q=1;Q<w.length;Q++)(S=w[Q-1][1])>T!=(V=w[Q][1])>=T&&(R=w[Q-1][0],L=w[Q][0],V-S&&(G=R+(L-R)*(T-S)/(V-S),X=Math.min(X,G),N=Math.max(N,G)));X=Math.max(X,0),N=Math.min(N,o._length);var M=LS.defaultLine;return LS.opacity(a.fillcolor)?M=a.fillcolor:LS.opacity((a.line||{}).color)&&(M=a.line.color),US.extendFlat(e,{distance:e.maxHoverDistance,x0:X,x1:N,y0:T,y1:T,color:M,hovertemplate:!1}),delete e.index,a.text&&!Array.isArray(a.text)?e.text=String(a.text):e.text=a.name,[e]}}},selectPoints:function(e,t){var n,i,r,a,o=e.cd,s=e.xaxis,l=e.yaxis,c=[],u=o[0].trace;if(!VS.hasMarkers(u)&&!VS.hasText(u))return[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)i=o[n],r=s.c2p(i.x),a=l.c2p(i.y),null!==i.i&&t.contains([r,a],!1,n,e)?(c.push({pointNumber:i.i,x:s.c2d(i.x),y:l.c2d(i.y)}),i.selected=1):i.selected=0;return c},animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:ZS,categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},PV={moduleType:"component",name:"legend",layoutAttributes:px,supplyLayoutDefaults:Ax,draw:gB,style:Dx},KV=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],qV=Gs.exports,$V=Hd.exports,eZ=KV,tZ=ws.exports,nZ=tZ.strScale,iZ=tZ.strRotate,rZ=tZ.strTranslate,aZ=Gs.exports,oZ=hg,sZ=Fp.exports,lZ=ws.exports,cZ=lZ.strTranslate,uZ=Im.exports,dZ=Hd.exports,gZ=Am.exports,hZ=SA,fZ=Cm,pZ=ux,mZ=YC.exports,vZ=Qp.arrayEditor,bZ=function(e,t,n){var i,r,a,o,s=e.node(),l=eZ[n.arrowhead||0],c=eZ[n.startarrowhead||0],u=(n.arrowwidth||1)*(n.arrowsize||1),d=(n.arrowwidth||1)*(n.startarrowsize||1),g=t.indexOf("start")>=0,h=t.indexOf("end")>=0,f=l.backoff*u+n.standoff,p=c.backoff*d+n.startstandoff;if("line"===s.nodeName){i={x:+e.attr("x1"),y:+e.attr("y1")},r={x:+e.attr("x2"),y:+e.attr("y2")};var m=i.x-r.x,v=i.y-r.y;if(o=(a=Math.atan2(v,m))+Math.PI,f&&p&&f+p>Math.sqrt(m*m+v*v))return void w();if(f){if(f*f>m*m+v*v)return void w();var b=f*Math.cos(a),y=f*Math.sin(a);r.x+=b,r.y+=y,e.attr({x2:r.x,y2:r.y})}if(p){if(p*p>m*m+v*v)return void w();var I=p*Math.cos(a),C=p*Math.sin(a);i.x-=I,i.y-=C,e.attr({x1:i.x,y1:i.y})}}else if("path"===s.nodeName){var x=s.getTotalLength(),B="";if(x<f+p)return void w();var A=s.getPointAtLength(0),F=s.getPointAtLength(.1);a=Math.atan2(A.y-F.y,A.x-F.x),i=s.getPointAtLength(Math.min(p,x)),B="0px,"+p+"px,";var Q=s.getPointAtLength(x),U=s.getPointAtLength(x-.1);o=Math.atan2(Q.y-U.y,Q.x-U.x),r=s.getPointAtLength(Math.max(0,x-f)),B+=x-(B?p+f:f)+"px,"+x+"px",e.style("stroke-dasharray",B)}function w(){e.style("stroke-dasharray","0px,100px")}function G(t,i,r,a){t.path&&(t.noRotate&&(r=0),qV.select(s.parentNode).append("path").attr({class:e.attr("class"),d:t.path,transform:rZ(i.x,i.y)+iZ(180*r/Math.PI)+nZ(a)}).style({fill:$V.rgb(n.arrowcolor),"stroke-width":0}))}g&&G(c,i,a,d),h&&G(l,r,o,u)},yZ={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&IZ(e,n);return sZ.previousPromises(e)},drawOne:IZ,drawRaw:xZ};function IZ(e,t){var n=e._fullLayout.annotations[t]||{},i=uZ.getFromId(e,n.xref),r=uZ.getFromId(e,n.yref);i&&i.setScale(),r&&r.setScale(),xZ(e,n,t,!1,i,r)}function CZ(e,t,n,i,r){var a=r[n],o=r[n+"ref"],s=-1!==n.indexOf("y"),l="domain"===uZ.getRefType(o),c=s?i.h:i.w;return e?l?a+(s?-t:t)/e._length:e.p2r(e.r2p(a)+t):a+(s?-t:t)/c}function xZ(e,t,n,i,r,a){var o,s,l=e._fullLayout,c=e._fullLayout._size,u=e._context.edits;i?(o="annotation-"+i,s=i+".annotations"):(o="annotation",s="annotations");var d=vZ(e.layout,s,t),g=d.modifyBase,h=d.modifyItem,f=d.getUpdateObj;l._infolayer.selectAll("."+o+'[data-index="'+n+'"]').remove();var p="clip"+l._uid+"_ann"+n;if(t._input&&!1!==t.visible){var m={x:{},y:{}},v=+t.textangle||0,b=l._infolayer.append("g").classed(o,!0).attr("data-index",String(n)).style("opacity",t.opacity),y=b.append("g").classed("annotation-text-g",!0),I=u[t.showarrow?"annotationTail":"annotationPosition"],C=t.captureevents||u.annotationText||I,x=y.append("g").style("pointer-events",C?"all":null).call(pZ,"pointer").on("click",(function(){e._dragging=!1,e.emit("plotly_clickannotation",S(aZ.event))}));t.hovertext&&x.on("mouseover",(function(){var n=t.hoverlabel,i=n.font,r=this.getBoundingClientRect(),a=e.getBoundingClientRect();hZ.loneHover({x0:r.left-a.left,x1:r.right-a.left,y:(r.top+r.bottom)/2-a.top,text:t.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:i.family,fontSize:i.size,fontColor:i.color},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:e})})).on("mouseout",(function(){hZ.loneUnhover(l._hoverlayer.node())}));var B=t.borderwidth,A=t.borderpad,F=B+A,Q=x.append("rect").attr("class","bg").style("stroke-width",B+"px").call(dZ.stroke,t.bordercolor).call(dZ.fill,t.bgcolor),U=t.width||t.height,w=l._topclips.selectAll("#"+p).data(U?[0]:[]);w.enter().append("clipPath").classed("annclip",!0).attr("id",p).append("rect"),w.exit().remove();var G=t.font,R=l._meta?lZ.templateString(t.text,l._meta):t.text,L=x.append("text").classed("annotation-text",!0).text(R);u.annotationText?L.call(fZ.makeEditable,{delegate:x,gd:e}).call(V).on("edit",(function(n){t.text=n,this.call(V),h("text",n),r&&r.autorange&&g(r._name+".autorange",!0),a&&a.autorange&&g(a._name+".autorange",!0),oZ.call("_guiRelayout",e,f())})):L.call(V)}else aZ.selectAll("#"+p).remove();function S(e){var r={index:n,annotation:t._input,fullAnnotation:t,event:e};return i&&(r.subplotId=i),r}function V(n){return n.call(gZ.font,G).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),fZ.convertToTspans(n,e,Z),n}function Z(){var n=L.selectAll("a");1===n.size()&&n.text()===L.text()&&x.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Q.node());var o=x.select(".annotation-text-math-group"),s=!o.empty(),d=gZ.bBox((s?o:L).node()),C=d.width,A=d.height,G=t.width||C,R=t.height||A,V=Math.round(G+2*F),Z=Math.round(R+2*F);function k(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}for(var E=!1,X=["x","y"],N=0;N<X.length;N++){var W,_,T,M,H,Y=X[N],D=t[Y+"ref"]||Y,z=t["a"+Y+"ref"],O={x:r,y:a}[Y],J=(v+("x"===Y?0:-90))*Math.PI/180,j=V*Math.cos(J),P=Z*Math.sin(J),K=Math.abs(j)+Math.abs(P),q=t[Y+"anchor"],$=t[Y+"shift"]*("x"===Y?1:-1),ee=m[Y],te=uZ.getRefType(D);if(O&&"domain"!==te){var ne=O.r2fraction(t[Y]);(ne<0||ne>1)&&(z===D?((ne=O.r2fraction(t["a"+Y]))<0||ne>1)&&(E=!0):E=!0),W=O._offset+O.r2p(t[Y]),M=.5}else{var ie="domain"===te;"x"===Y?(T=t[Y],W=ie?O._offset+O._length*T:W=c.l+c.w*T):(T=1-t[Y],W=ie?O._offset+O._length*T:W=c.t+c.h*T),M=t.showarrow?.5:T}if(t.showarrow){ee.head=W;var re=t["a"+Y];if(H=j*k(.5,t.xanchor)-P*k(.5,t.yanchor),z===D){var ae=uZ.getRefType(z);"domain"===ae?("y"===Y&&(re=1-re),ee.tail=O._offset+O._length*re):"paper"===ae?"y"===Y?(re=1-re,ee.tail=c.t+c.h*re):ee.tail=c.l+c.w*re:ee.tail=O._offset+O.r2p(re),_=H}else ee.tail=W+re,_=H+re;ee.text=ee.tail+H;var oe=l["x"===Y?"width":"height"];if("paper"===D&&(ee.head=lZ.constrain(ee.head,1,oe-1)),"pixel"===z){var se=-Math.max(ee.tail-3,ee.text),le=Math.min(ee.tail+3,ee.text)-oe;se>0?(ee.tail+=se,ee.text+=se):le>0&&(ee.tail-=le,ee.text-=le)}ee.tail+=$,ee.head+=$}else _=H=K*k(M,q),ee.text=W+H;ee.text+=$,H+=$,_+=$,t["_"+Y+"padplus"]=K/2+_,t["_"+Y+"padminus"]=K/2-_,t["_"+Y+"size"]=K,t["_"+Y+"shift"]=H}if(E)x.remove();else{var ce=0,ue=0;if("left"!==t.align&&(ce=(G-C)*("center"===t.align?.5:1)),"top"!==t.valign&&(ue=(R-A)*("middle"===t.valign?.5:1)),s)o.select("svg").attr({x:F+ce-1,y:F+ue}).call(gZ.setClipUrl,U?p:null,e);else{var de=F+ue-d.top,ge=F+ce-d.left;L.call(fZ.positionText,ge,de).call(gZ.setClipUrl,U?p:null,e)}w.select("rect").call(gZ.setRect,F,F,G,R),Q.call(gZ.setRect,B/2,B/2,V-B,Z-B),x.call(gZ.setTranslate,Math.round(m.x.text-V/2),Math.round(m.y.text-Z/2)),y.attr({transform:"rotate("+v+","+m.x.text+","+m.y.text+")"});var he,fe=function(n,o){b.selectAll(".annotation-arrow-g").remove();var s=m.x.head,l=m.y.head,d=m.x.tail+n,p=m.y.tail+o,I=m.x.text+n,C=m.y.text+o,B=lZ.rotationXYMatrix(v,I,C),A=lZ.apply2DTransform(B),F=lZ.apply2DTransform2(B),U=+Q.attr("width"),w=+Q.attr("height"),G=I-.5*U,R=G+U,L=C-.5*w,S=L+w,V=[[G,L,G,S],[G,S,R,S],[R,S,R,L],[R,L,G,L]].map(F);if(!V.reduce((function(e,t){return e^!!lZ.segmentsIntersect(s,l,s+1e6,l+1e6,t[0],t[1],t[2],t[3])}),!1)){V.forEach((function(e){var t=lZ.segmentsIntersect(d,p,s,l,e[0],e[1],e[2],e[3]);t&&(d=t.x,p=t.y)}));var Z=t.arrowwidth,k=t.arrowcolor,E=t.arrowside,X=b.append("g").style({opacity:dZ.opacity(k)}).classed("annotation-arrow-g",!0),N=X.append("path").attr("d","M"+d+","+p+"L"+s+","+l).style("stroke-width",Z+"px").call(dZ.stroke,dZ.rgb(k));if(bZ(N,E,t),u.annotationPosition&&N.node().parentNode&&!i){var W=s,_=l;if(t.standoff){var T=Math.sqrt(Math.pow(s-d,2)+Math.pow(l-p,2));W+=t.standoff*(d-s)/T,_+=t.standoff*(p-l)/T}var M,H,Y=X.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-W)+","+(p-_),transform:cZ(W,_)}).style("stroke-width",Z+6+"px").call(dZ.stroke,"rgba(0,0,0,0)").call(dZ.fill,"rgba(0,0,0,0)");mZ.init({element:Y.node(),gd:e,prepFn:function(){var e=gZ.getTranslate(x);M=e.x,H=e.y,r&&r.autorange&&g(r._name+".autorange",!0),a&&a.autorange&&g(a._name+".autorange",!0)},moveFn:function(e,n){var i=A(M,H),o=i[0]+e,s=i[1]+n;x.call(gZ.setTranslate,o,s),h("x",CZ(r,e,"x",c,t)),h("y",CZ(a,n,"y",c,t)),t.axref===t.xref&&h("ax",CZ(r,e,"ax",c,t)),t.ayref===t.yref&&h("ay",CZ(a,n,"ay",c,t)),X.attr("transform",cZ(e,n)),y.attr({transform:"rotate("+v+","+o+","+s+")"})},doneFn:function(){oZ.call("_guiRelayout",e,f());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};if(t.showarrow&&fe(0,0),I)mZ.init({element:x.node(),gd:e,prepFn:function(){he=y.attr("transform")},moveFn:function(e,n){var o="pointer";if(t.showarrow)t.axref===t.xref?h("ax",CZ(r,e,"ax",c,t)):h("ax",t.ax+e),t.ayref===t.yref?h("ay",CZ(a,n,"ay",c.w,t)):h("ay",t.ay+n),fe(e,n);else{if(i)return;var s,l;if(r)s=CZ(r,e,"x",c,t);else{var u=t._xsize/c.w,d=t.x+(t._xshift-t.xshift)/c.w-u/2;s=mZ.align(d+e/c.w,u,0,1,t.xanchor)}if(a)l=CZ(a,n,"y",c,t);else{var g=t._ysize/c.h,f=t.y-(t._yshift+t.yshift)/c.h-g/2;l=mZ.align(f-n/c.h,g,0,1,t.yanchor)}h("x",s),h("y",l),r&&a||(o=mZ.getCursor(r?.5:s,a?.5:l,t.xanchor,t.yanchor))}y.attr({transform:cZ(e,n)+he}),pZ(x,o)},clickFn:function(n,i){t.captureevents&&e.emit("plotly_clickannotation",S(i))},doneFn:function(){pZ(x),oZ.call("_guiRelayout",e,f());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}}var BZ=ws.exports,AZ=hg,FZ=Qp.arrayEditor,QZ={hasClickToShow:function(e,t){var n=UZ(e,t);return n.on.length>0||n.explicitOff.length>0},onClick:function(e,t){var n,i,r=UZ(e,t),a=r.on,o=r.off.concat(r.explicitOff),s={},l=e._fullLayout.annotations;if(!a.length&&!o.length)return;for(n=0;n<a.length;n++)(i=FZ(e.layout,"annotations",l[a[n]])).modifyItem("visible",!0),BZ.extendFlat(s,i.getUpdateObj());for(n=0;n<o.length;n++)(i=FZ(e.layout,"annotations",l[o[n]])).modifyItem("visible",!1),BZ.extendFlat(s,i.getUpdateObj());return AZ.call("update",e,{},s)}};function UZ(e,t){var n,i,r,a,o,s,l,c=e._fullLayout.annotations,u=[],d=[],g=[],h=(t||[]).length;for(n=0;n<c.length;n++)if(a=(r=c[n]).clicktoshow){for(i=0;i<h;i++)if(s=(o=t[i]).xaxis,l=o.yaxis,s._id===r.xref&&l._id===r.yref&&s.d2r(o.x)===wZ(r._xclick,s)&&l.d2r(o.y)===wZ(r._yclick,l)){(r.visible?"onout"===a?d:g:u).push(n);break}i===h&&r.visible&&"onout"===a&&d.push(n)}return{on:u,off:d,explicitOff:g}}function wZ(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}var GZ={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}},RZ=KV,LZ=Cd,SZ=Zp,VZ=GZ;function ZZ(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function kZ(e,t,n){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",n,"to",t,"("+t,"to",n+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}var EZ=(0,Qp.templatedArray)("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:LZ({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:RZ.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:RZ.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[kZ("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[kZ("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",SZ.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",VZ.axisRefDescription("ax","left","right"),ZZ("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",SZ.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",VZ.axisRefDescription("ay","bottom","top"),ZZ("y")].join(" ")},xref:{valType:"enumerated",values:["paper",SZ.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",VZ.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",SZ.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",VZ.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:LZ({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}}),XZ=ws.exports,NZ=Hd.exports,WZ=function(e,t,n,i){i("opacity");var r=i("bgcolor"),a=i("bordercolor"),o=NZ.opacity(a);i("borderpad");var s=i("borderwidth"),l=i("showarrow");if(i("text",l?" ":n._dfltTitle.annotation),i("textangle"),XZ.coerceFont(i,"font",n.font),i("width"),i("align"),i("height")&&i("valign"),l){var c,u,d=i("arrowside");-1!==d.indexOf("end")&&(c=i("arrowhead"),u=i("arrowsize")),-1!==d.indexOf("start")&&(i("startarrowhead",c),i("startarrowsize",u)),i("arrowcolor",o?t.bordercolor:NZ.defaultLine),i("arrowwidth",2*(o&&s||1)),i("standoff"),i("startstandoff")}var g=i("hovertext"),h=n.hoverlabel||{};if(g){var f=i("hoverlabel.bgcolor",h.bgcolor||(NZ.opacity(r)?NZ.rgb(r):NZ.defaultLine)),p=i("hoverlabel.bordercolor",h.bordercolor||NZ.contrast(f));XZ.coerceFont(i,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||p})}i("captureevents",!!g)},_Z=ws.exports,TZ=Im.exports,MZ=Zv,HZ=WZ,YZ=EZ;function DZ(e,t,n){function i(n,i){return _Z.coerce(e,t,YZ,n,i)}var r=i("visible"),a=i("clicktoshow");if(r||a){HZ(e,t,n,i);for(var o=t.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:n},u=0;u<2;u++){var d=s[u],g=TZ.coerceRef(e,t,c,d,"","paper");if("paper"!==g)TZ.getFromId(c,g)._annIndices.push(t._index);if(TZ.coercePosition(t,c,i,g,d,.5),o){var h="a"+d,f=TZ.coerceRef(e,t,c,h,"pixel",["pixel","paper"]);"pixel"!==f&&f!==g&&(f=t[h]="pixel");var p="pixel"===f?l[u]:.4;TZ.coercePosition(t,c,i,f,h,p)}i(d+"anchor"),i(d+"shift")}if(_Z.noneOrAll(e,t,["x","y"]),o&&_Z.noneOrAll(e,t,["ax","ay"]),a){var m=i("xclick"),v=i("yclick");t._xclick=void 0===m?t.x:TZ.cleanPosition(m,c,t.xref),t._yclick=void 0===v?t.y:TZ.cleanPosition(v,c,t.yref)}}}var zZ=hg,OZ=ws.exports,JZ=Sp,jZ=function(e){return function(t,n){var i=t[e];if(Array.isArray(i))for(var r=zZ.subplotsRegistry.cartesian,a=r.idRegex,o=n._subplots,s=o.xaxis,l=o.yaxis,c=o.cartesian,u=n._has("cartesian")||n._has("gl2d"),d=0;d<i.length;d++){var g=i[d];if(OZ.isPlainObject(g)){var h=JZ.cleanId(g.xref,"x",!1),f=JZ.cleanId(g.yref,"y",!1),p=a.x.test(h),m=a.y.test(f);if(p||m){u||OZ.pushUnique(n._basePlotModules,r);var v=!1;p&&-1===s.indexOf(h)&&(s.push(h),v=!0),m&&-1===l.indexOf(f)&&(l.push(f),v=!0),v&&p&&m&&c.push(h+f)}}}}},PZ=ws.exports,KZ=Im.exports,qZ=yZ.draw;function $Z(e){var t=e._fullLayout;PZ.filterVisible(t.annotations).forEach((function(t){var n=KZ.getFromId(e,t.xref),i=KZ.getFromId(e,t.yref),r=KZ.getRefType(t.xref),a=KZ.getRefType(t.yref);t._extremes={},"range"===r&&ek(t,n),"range"===a&&ek(t,i)}))}function ek(e,t){var n,i=t._id,r=i.charAt(0),a=e[r],o=e["a"+r],s=e[r+"ref"],l=e["a"+r+"ref"],c=e["_"+r+"padplus"],u=e["_"+r+"padminus"],d={x:1,y:-1}[r]*e[r+"shift"],g=3*e.arrowsize*e.arrowwidth||0,h=g+d,f=g-d,p=3*e.startarrowsize*e.arrowwidth||0,m=p+d,v=p-d;if(l===s){var b=KZ.findExtremes(t,[t.r2c(a)],{ppadplus:h,ppadminus:f}),y=KZ.findExtremes(t,[t.r2c(o)],{ppadplus:Math.max(c,m),ppadminus:Math.max(u,v)});n={min:[b.min[0],y.min[0]],max:[b.max[0],y.max[0]]}}else m=o?m+o:m,v=o?v-o:v,n=KZ.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(c,h,m),ppadminus:Math.max(u,f,v)});e._extremes[i]=n}var tk=Yu,nk=pd,ik=yZ,rk=QZ,ak={moduleType:"component",name:"annotations",layoutAttributes:EZ,supplyLayoutDefaults:function(e,t){MZ(e,t,{name:"annotations",handleItemDefaults:DZ})},includeBasePlot:jZ("annotations"),calcAutorange:function(e){var t=e._fullLayout;if(PZ.filterVisible(t.annotations).length&&e._fullData.length)return PZ.syncOrAsync([qZ,$Z],e)},draw:ik.draw,drawOne:ik.drawOne,drawRaw:ik.drawRaw,hasClickToShow:rk.hasClickToShow,onClick:rk.onClick,convertCoords:function(e,t,n,i){t=t||{};var r="log"===n&&"linear"===t.type,a="linear"===n&&"log"===t.type;if(r||a)for(var o,s,l=e._fullLayout.annotations,c=t._id.charAt(0),u=0;u<l.length;u++)o=l[u],s="annotations["+u+"].",o[c+"ref"]===t._id&&d(c),o["a"+c+"ref"]===t._id&&d("a"+c);function d(e){var n=o[e],a=null;a=r?nk(n,t.range):Math.pow(10,n),tk(a)||(a=null),i(s+e,a)}}},ok=EZ,sk=(0,Cp.overrideAll)((0,Qp.templatedArray)("annotation",{visible:ok.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:ok.xanchor,xshift:ok.xshift,yanchor:ok.yanchor,yshift:ok.yshift,text:ok.text,textangle:ok.textangle,font:ok.font,width:ok.width,height:ok.height,opacity:ok.opacity,align:ok.align,valign:ok.valign,bgcolor:ok.bgcolor,bordercolor:ok.bordercolor,borderpad:ok.borderpad,borderwidth:ok.borderwidth,showarrow:ok.showarrow,arrowcolor:ok.arrowcolor,arrowhead:ok.arrowhead,startarrowhead:ok.startarrowhead,arrowside:ok.arrowside,arrowsize:ok.arrowsize,startarrowsize:ok.startarrowsize,arrowwidth:ok.arrowwidth,standoff:ok.standoff,startstandoff:ok.startstandoff,hovertext:ok.hovertext,hoverlabel:ok.hoverlabel,captureevents:ok.captureevents}),"calc","from-root"),lk=ws.exports,ck=Im.exports,uk=Zv,dk=WZ,gk=sk;function hk(e,t,n,i){function r(n,i){return lk.coerce(e,t,gk,n,i)}function a(e){var i=e+"axis",a={_fullLayout:{}};return a._fullLayout[i]=n[i],ck.coercePosition(t,a,r,e,e,.5)}r("visible")&&(dk(e,t,i.fullLayout,r),a("x"),a("y"),a("z"),lk.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",r("xanchor"),r("yanchor"),r("xshift"),r("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",r("ax",-10),r("ay",-30),lk.noneOrAll(e,t,["ax","ay"])))}var fk=ws.exports,pk=Im.exports;function mk(e,t){var n=t.fullSceneLayout.domain,i=t.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},fk.extendFlat(e._xa,r),pk.setConvert(e._xa),e._xa._offset=i.l+n.x[0]*i.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*i.w*(n.x[1]-n.x[0])},e._ya={},fk.extendFlat(e._ya,r),pk.setConvert(e._ya),e._ya._offset=i.t+(1-n.y[1])*i.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*i.h*(n.y[1]-n.y[0])}}function vk(e,t){var n,i,r=[0,0,0,0];for(n=0;n<4;++n)for(i=0;i<4;++i)r[i]+=e[4*n+i]*t[n];return r}var bk=function(e,t){return vk(e.projection,vk(e.view,vk(e.model,[t[0],t[1],t[2],1])))},yk=yZ.drawRaw,Ik=bk,Ck=["x","y","z"],xk=hg,Bk=ws.exports,Ak={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:sk}}},layoutAttributes:sk,handleDefaults:function(e,t,n){uk(e,t,{name:"annotations",handleItemDefaults:hk,fullLayout:n.fullLayout})},includeBasePlot:function(e,t){var n=xk.subplotsRegistry.gl3d;if(!n)return;for(var i=n.attrRegex,r=Object.keys(e),a=0;a<r.length;a++){var o=r[a];i.test(o)&&(e[o].annotations||[]).length&&(Bk.pushUnique(t._basePlotModules,n),Bk.pushUnique(t._subplots.gl3d,o))}},convert:function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)mk(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()},draw:function(e){for(var t=e.fullSceneLayout,n=e.dataScale,i=t.annotations,r=0;r<i.length;r++){for(var a=i[r],o=!1,s=0;s<3;s++){var l=Ck[s],c=a[l],u=t[l+"axis"].r2fraction(c);if(u<0||u>1){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+r+'"]').remove():(a._pdata=Ik(e.glplot.cameraParams,[t.xaxis.r2l(a.x)*n[0],t.yaxis.r2l(a.y)*n[1],t.zaxis.r2l(a.z)*n[2]]),yk(e.graphDiv,a,r,e.id,a._xa,a._ya))}}};var Fk=EZ,Qk=TR.line,Uk=ih.dash,wk=Ud.extendFlat,Gk=GZ,Rk=(0,Qp.templatedArray)("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this shape is visible."].join(" ")},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:wk({},Fk.xref,{description:["Sets the shape's x coordinate axis.",Gk.axisRefDescription("x","left","right"),"If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, then you must convert","the date to unix time in milliseconds."].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},yref:wk({},Fk.yref,{description:["Sets the annotation's y coordinate axis.",Gk.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:wk({},Qk.color,{editType:"arraydraw"}),width:wk({},Qk.width,{editType:"calc+arraydraw"}),dash:wk({},Uk,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},editType:"arraydraw"}),Lk=ws.exports,Sk=Im.exports,Vk=Zv,Zk=Rk,kk=xF;function Ek(e,t,n){function i(n,i){return Lk.coerce(e,t,Zk,n,i)}if(i("visible")){var r=i("path"),a=i("type",r?"path":"rect");"path"!==t.type&&delete t.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule"),i("line.width")&&(i("line.color"),i("line.dash"));for(var o=i("xsizemode"),s=i("ysizemode"),l=["x","y"],c=0;c<2;c++){var u,d,g,h=l[c],f=h+"anchor",p="x"===h?o:s,m={_fullLayout:n},v=Sk.coerceRef(e,t,m,h,void 0,"paper");if("range"===Sk.getRefType(v)?((u=Sk.getFromId(m,v))._shapeIndices.push(t._index),g=kk.rangeToShapePosition(u),d=kk.shapePositionToRange(u)):d=g=Lk.identity,"path"!==a){var b=h+"0",y=h+"1",I=e[b],C=e[y];e[b]=d(e[b],!0),e[y]=d(e[y],!0),"pixel"===p?(i(b,0),i(y,10)):(Sk.coercePosition(t,m,i,v,b,.25),Sk.coercePosition(t,m,i,v,y,.75)),t[b]=g(t[b]),t[y]=g(t[y]),e[b]=I,e[y]=C}if("pixel"===p){var x=e[f];e[f]=d(e[f],!0),Sk.coercePosition(t,m,i,v,f,.25),t[f]=g(t[f]),e[f]=x}}"path"===a?i("path"):Lk.noneOrAll(e,t,["x0","x1","y0","y1"])}}var Xk=Hd.exports,Nk=ws.exports,Wk=Im.exports,_k=CF,Tk=xF;function Mk(e){return Yk(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function Hk(e){return Yk(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function Yk(e,t,n,i,r,a){var o=e/2,s=a;if("pixel"===t){var l=r?Tk.extractPathCoords(r,a?_k.paramIsY:_k.paramIsX):[n,i],c=Nk.aggNums(Math.max,null,l),u=Nk.aggNums(Math.min,null,l),d=u<0?Math.abs(u)+o:o,g=c>0?c+o:o;return{ppad:o,ppadplus:s?d:g,ppadminus:s?g:d}}return{ppad:o}}function Dk(e,t,n,i,r){var a="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[a(t),a(n)];if(i){var o,s,l,c,u=1/0,d=-1/0,g=i.match(_k.segmentRE);for("date"===e.type&&(a=Tk.decodeDate(a)),o=0;o<g.length;o++)void 0!==(s=r[g[o].charAt(0)].drawn)&&(!(l=g[o].substr(1).match(_k.paramRE))||l.length<s||((c=a(l[s]))<u&&(u=c),c>d&&(d=c)));return d>=u?[u,d]:void 0}}var zk=EF,Ok={moduleType:"component",name:"shapes",layoutAttributes:Rk,supplyLayoutDefaults:function(e,t){Vk(e,t,{name:"shapes",handleItemDefaults:Ek})},supplyDrawNewShapeDefaults:function(e,t,n){if(n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")){var i=(e||{}).plot_bgcolor||"#FFF";n("newshape.line.color",Xk.contrast(i)),n("newshape.line.dash")}n("activeshape.fillcolor"),n("activeshape.opacity")},includeBasePlot:jZ("shapes"),calcAutorange:function(e){var t=e._fullLayout,n=Nk.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var i=0;i<n.length;i++){var r,a,o=n[i];o._extremes={};var s=Wk.getRefType(o.xref),l=Wk.getRefType(o.yref);if("paper"!==o.xref&&"domain"!==s){var c="pixel"===o.xsizemode?o.xanchor:o.x0,u="pixel"===o.xsizemode?o.xanchor:o.x1;(a=Dk(r=Wk.getFromId(e,o.xref),c,u,o.path,_k.paramIsX))&&(o._extremes[r._id]=Wk.findExtremes(r,a,Mk(o)))}if("paper"!==o.yref&&"domain"!==l){var d="pixel"===o.ysizemode?o.yanchor:o.y0,g="pixel"===o.ysizemode?o.yanchor:o.y1;(a=Dk(r=Wk.getFromId(e,o.yref),d,g,o.path,_k.paramIsY))&&(o._extremes[r._id]=Wk.findExtremes(r,a,Hk(o)))}}},draw:zk.draw,drawOne:zk.drawOne},Jk=Zp,jk=GZ,Pk=(0,Qp.templatedArray)("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",Jk.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",jk.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",Jk.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",jk.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"}),Kk=ws.exports,qk=Im.exports,$k=Zv,eE=Pk;function tE(e,t,n){function i(n,i){return Kk.coerce(e,t,eE,n,i)}var r=i("source");if(!i("visible",!!r))return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var a={_fullLayout:n},o=["x","y"],s=0;s<2;s++){var l=o[s],c=qk.coerceRef(e,t,a,l,"paper",void 0);if("paper"!==c)qk.getFromId(a,c)._imgIndices.push(t._index);qk.coercePosition(t,a,i,c,l,0)}return t}var nE=Gs.exports,iE=Am.exports,rE=Im.exports,aE=Sp,oE=xm,sE=Yu,lE=pd,cE={moduleType:"component",name:"images",layoutAttributes:Pk,supplyLayoutDefaults:function(e,t){$k(e,t,{name:"images",handleItemDefaults:tE})},includeBasePlot:jZ("images"),draw:function(e){var t,n,i=e._fullLayout,r=[],a={},o=[];for(n=0;n<i.images.length;n++){var s=i.images[n];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){t=aE.ref2id(s.xref)+aE.ref2id(s.yref);var l=i._plots[t];if(!l){o.push(s);continue}l.mainplot&&(t=l.mainplot.id),a[t]||(a[t]=[]),a[t].push(s)}else"above"===s.layer?r.push(s):o.push(s)}var c={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},u={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function d(t){var n=nE.select(this);if(this._imgSrc!==t.source)if(n.attr("xmlns",oE.svg),t.source&&"data:"===t.source.slice(0,5))n.attr("xlink:href",t.source),this._imgSrc=t.source;else{var i=new Promise(function(e){var i=new Image;function r(){n.remove(),e()}this.img=i,i.setAttribute("crossOrigin","anonymous"),i.onerror=r,i.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.getContext("2d").drawImage(this,0,0);var i=t.toDataURL("image/png");n.attr("xlink:href",i),e()},n.on("error",r),i.src=t.source,this._imgSrc=t.source}.bind(this));e._promises.push(i)}}function g(t){var n,r,a=nE.select(this),o=rE.getFromId(e,t.xref),s=rE.getFromId(e,t.yref),l="domain"===rE.getRefType(t.xref),d="domain"===rE.getRefType(t.yref),g=i._size;n=void 0!==o?"string"==typeof t.xref&&l?o._length*t.sizex:Math.abs(o.l2p(t.sizex)-o.l2p(0)):t.sizex*g.w,r=void 0!==s?"string"==typeof t.yref&&d?s._length*t.sizey:Math.abs(s.l2p(t.sizey)-s.l2p(0)):t.sizey*g.h;var h,f,p=n*c[t.xanchor].offset,m=r*u[t.yanchor].offset,v=c[t.xanchor].sizing+u[t.yanchor].sizing;switch(h=void 0!==o?"string"==typeof t.xref&&l?o._length*t.x+o._offset:o.r2p(t.x)+o._offset:t.x*g.w+g.l,h+=p,f=void 0!==s?"string"==typeof t.yref&&d?s._length*(1-t.y)+s._offset:s.r2p(t.y)+s._offset:g.h-t.y*g.h+g.t,f+=m,t.sizing){case"fill":v+=" slice";break;case"stretch":v="none"}a.attr({x:h,y:f,width:n,height:r,preserveAspectRatio:v,opacity:t.opacity});var b=(o&&"domain"!==rE.getRefType(t.xref)?o._id:"")+(s&&"domain"!==rE.getRefType(t.yref)?s._id:"");iE.setClipUrl(a,b?"clip"+i._uid+b:null,e)}var h=i._imageLowerLayer.selectAll("image").data(o),f=i._imageUpperLayer.selectAll("image").data(r);h.enter().append("image"),f.enter().append("image"),h.exit().remove(),f.exit().remove(),h.each((function(e){d.bind(this)(e),g.bind(this)(e)})),f.each((function(e){d.bind(this)(e),g.bind(this)(e)}));var p=Object.keys(i._plots);for(n=0;n<p.length;n++){t=p[n];var m=i._plots[t];if(m.imagelayer){var v=m.imagelayer.selectAll("image").data(a[t]||[]);v.enter().append("image"),v.exit().remove(),v.each((function(e){d.bind(this)(e),g.bind(this)(e)}))}}},convertCoords:function(e,t,n,i){t=t||{};var r="log"===n&&"linear"===t.type,a="linear"===n&&"log"===t.type;if(r||a)for(var o,s,l=e._fullLayout.images,c=t._id.charAt(0),u=0;u<l.length;u++)if(s="images["+u+"].",(o=l[u])[c+"ref"]===t._id){var d=o[c],g=o["size"+c],h=null,f=null;if(r){h=lE(d,t.range);var p=g/Math.pow(10,h)/2;f=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10}else f=(h=Math.pow(10,d))*(Math.pow(10,g/2)-Math.pow(10,-g/2));sE(h)?sE(f)||(f=null):(h=null,f=null),i(s+c,h),i(s+"size"+c,f)}}},uE={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}},dE=Cd,gE=Yd,hE=Ud.extendFlat,fE=Cp.overrideAll,pE=sh,mE=Qp.templatedArray,vE=mE("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),bE=fE(mE("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:vE,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:hE(pE({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:dE({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:gE.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root"),yE=ws.exports,IE=Zv,CE=bE,xE=uE.name,BE=CE.buttons;function AE(e,t,n){function i(n,i){return yE.coerce(e,t,CE,n,i)}i("visible",IE(e,t,{name:"buttons",handleItemDefaults:FE}).length>0)&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),yE.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),yE.coerceFont(i,"font",n.font),i("bgcolor",n.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function FE(e,t){function n(n,i){return yE.coerce(e,t,BE,n,i)}n("visible","skip"===e.method||Array.isArray(e.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}var QE=LE,UE=Gs.exports,wE=Hd.exports,GE=Am.exports,RE=ws.exports;function LE(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}LE.barWidth=2,LE.barLength=20,LE.barRadius=2,LE.barPad=1,LE.barColor="#808BA4",LE.prototype.enable=function(e,t,n){var i=this.gd._fullLayout,r=i.width,a=i.height;this.position=e;var o,s,l,c,u=this.position.l,d=this.position.w,g=this.position.t,h=this.position.h,f=this.position.direction,p="down"===f,m="left"===f,v="up"===f,b=d,y=h;p||m||"right"===f||v||(this.position.direction="down",p=!0),p||v?(s=(o=u)+b,p?(l=g,y=(c=Math.min(l+y,a))-l):y=(c=g+y)-(l=Math.max(c-y,0))):(c=(l=g)+y,m?b=(s=u+b)-(o=Math.max(s-b,0)):(o=u,b=(s=Math.min(o+b,r))-o)),this._box={l:o,t:l,w:b,h:y};var I=d>b,C=LE.barLength+2*LE.barPad,x=LE.barWidth+2*LE.barPad,B=u,A=g+h;A+x>a&&(A=a-x);var F=this.container.selectAll("rect.scrollbar-horizontal").data(I?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-horizontal",!0).call(wE.fill,LE.barColor),I?(this.hbar=F.attr({rx:LE.barRadius,ry:LE.barRadius,x:B,y:A,width:C,height:x}),this._hbarXMin=B+C/2,this._hbarTranslateMax=b-C):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var Q=h>y,U=LE.barWidth+2*LE.barPad,w=LE.barLength+2*LE.barPad,G=u+d,R=g;G+U>r&&(G=r-U);var L=this.container.selectAll("rect.scrollbar-vertical").data(Q?[0]:[]);L.exit().on(".drag",null).remove(),L.enter().append("rect").classed("scrollbar-vertical",!0).call(wE.fill,LE.barColor),Q?(this.vbar=L.attr({rx:LE.barRadius,ry:LE.barRadius,x:G,y:R,width:U,height:w}),this._vbarYMin=R+w/2,this._vbarTranslateMax=y-w):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var S=this.id,V=o-.5,Z=Q?s+U+.5:s+.5,k=l-.5,E=I?c+x+.5:c+.5,X=i._topdefs.selectAll("#"+S).data(I||Q?[0]:[]);if(X.exit().remove(),X.enter().append("clipPath").attr("id",S).append("rect"),I||Q?(this._clipRect=X.select("rect").attr({x:Math.floor(V),y:Math.floor(k),width:Math.ceil(Z)-Math.floor(V),height:Math.ceil(E)-Math.floor(k)}),this.container.call(GE.setClipUrl,S,this.gd),this.bg.attr({x:u,y:g,width:d,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(GE.setClipUrl,null),delete this._clipRect),I||Q){var N=UE.behavior.drag().on("dragstart",(function(){UE.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(N);var W=UE.behavior.drag().on("dragstart",(function(){UE.event.sourceEvent.preventDefault(),UE.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));I&&this.hbar.on(".drag",null).call(W),Q&&this.vbar.on(".drag",null).call(W)}this.setTranslate(t,n)},LE.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(GE.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},LE.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=UE.event.dx),this.vbar&&(t-=UE.event.dy),this.setTranslate(e,t)},LE.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=UE.event.deltaY),this.vbar&&(t+=UE.event.deltaY),this.setTranslate(e,t)},LE.prototype._onBarDrag=function(){var e=this.translateX,t=this.translateY;if(this.hbar){var n=e+this._hbarXMin,i=n+this._hbarTranslateMax;e=(RE.constrain(UE.event.x,n,i)-n)/(i-n)*(this.position.w-this._box.w)}if(this.vbar){var r=t+this._vbarYMin,a=r+this._vbarTranslateMax;t=(RE.constrain(UE.event.y,r,a)-r)/(a-r)*(this.position.h-this._box.h)}this.setTranslate(e,t)},LE.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,i=this.position.h-this._box.h;if(e=RE.constrain(e||0,0,n),t=RE.constrain(t||0,0,i),this.translateX=e,this.translateY=t,this.container.call(GE.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var r=e/n;this.hbar.call(GE.setTranslate,e+r*this._hbarTranslateMax,t)}if(this.vbar){var a=t/i;this.vbar.call(GE.setTranslate,e,t+a*this._vbarTranslateMax)}};var SE=Gs.exports,VE=Fp.exports,ZE=Hd.exports,kE=Am.exports,EE=ws.exports,XE=Cm,NE=Qp.arrayEditor,WE=Bm.LINE_SPACING,_E=uE,TE=QE;function ME(e){return e._index}function HE(e,t){return+e.attr(_E.menuIndexAttrName)===t._index}function YE(e,t,n,i,r,a,o,s){t.active=o,NE(e.layout,_E.name,t).applyUpdate("active",o),"buttons"===t.type?zE(e,i,null,null,t):"dropdown"===t.type&&(r.attr(_E.menuIndexAttrName,"-1"),DE(e,i,r,a,t),s||zE(e,i,r,a,t))}function DE(e,t,n,i,r){var a=EE.ensureSingle(t,"g",_E.headerClassName,(function(e){e.style("pointer-events","all")})),o=r._dims,s=r.active,l=r.buttons[s]||_E.blankHeaderOpts,c={y:r.pad.t,yPad:0,x:r.pad.l,xPad:0,index:0},u={width:o.headerWidth,height:o.headerHeight};a.call(OE,r,l,e).call(tX,r,c,u);var d=EE.ensureSingle(t,"text",_E.headerArrowClassName,(function(e){e.attr("text-anchor","end").call(kE.font,r.font).text(_E.arrowSymbol[r.direction])}));d.attr({x:o.headerWidth-_E.arrowOffsetX+r.pad.l,y:o.headerHeight/2+_E.textOffsetY+r.pad.t}),a.on("click",(function(){n.call(nX,String(HE(n,r)?-1:r._index)),zE(e,t,n,i,r)})),a.on("mouseover",(function(){a.call(KE)})),a.on("mouseout",(function(){a.call(qE,r)})),kE.setTranslate(t,o.lx,o.ly)}function zE(e,t,n,i,r){n||(n=t).attr("pointer-events","all");var a=function(e){return-1==+e.attr(_E.menuIndexAttrName)}(n)&&"buttons"!==r.type?[]:r.buttons,o="dropdown"===r.type?_E.dropdownButtonClassName:_E.buttonClassName,s=n.selectAll("g."+o).data(EE.filterVisible(a)),l=s.enter().append("g").classed(o,!0),c=s.exit();"dropdown"===r.type?(l.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var u=0,d=0,g=r._dims,h=-1!==["up","down"].indexOf(r.direction);"dropdown"===r.type&&(h?d=g.headerHeight+_E.gapButtonHeader:u=g.headerWidth+_E.gapButtonHeader),"dropdown"===r.type&&"up"===r.direction&&(d=-_E.gapButtonHeader+_E.gapButton-g.openHeight),"dropdown"===r.type&&"left"===r.direction&&(u=-_E.gapButtonHeader+_E.gapButton-g.openWidth);var f={x:g.lx+u+r.pad.l,y:g.ly+d+r.pad.t,yPad:_E.gapButton,xPad:_E.gapButton,index:0},p={l:f.x+r.borderwidth,t:f.y+r.borderwidth};s.each((function(a,o){var l=SE.select(this);l.call(OE,r,a,e).call(tX,r,f),l.on("click",(function(){SE.event.defaultPrevented||(a.execute&&(a.args2&&r.active===o?(YE(e,r,0,t,n,i,-1),VE.executeAPICommand(e,a.method,a.args2)):(YE(e,r,0,t,n,i,o),VE.executeAPICommand(e,a.method,a.args))),e.emit("plotly_buttonclicked",{menu:r,button:a,active:r.active}))})),l.on("mouseover",(function(){l.call(KE)})),l.on("mouseout",(function(){l.call(qE,r),s.call(PE,r)}))})),s.call(PE,r),h?(p.w=Math.max(g.openWidth,g.headerWidth),p.h=f.y-p.t):(p.w=f.x-p.l,p.h=Math.max(g.openHeight,g.headerHeight)),p.direction=r.direction,i&&(s.size()?function(e,t,n,i,r,a){var o,s,l,c=r.direction,u="up"===c||"down"===c,d=r._dims,g=r.active;if(u)for(s=0,l=0;l<g;l++)s+=d.heights[l]+_E.gapButton;else for(o=0,l=0;l<g;l++)o+=d.widths[l]+_E.gapButton;i.enable(a,o,s),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1");i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,i,r,p):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",(function(){t=!1,n||e.disable()}));n&&e.vbar.transition().attr("opacity","0").each("end",(function(){n=!1,t||e.disable()}))}(i))}function OE(e,t,n,i){e.call(JE,t).call(jE,t,n,i)}function JE(e,t){var n=EE.ensureSingle(e,"rect",_E.itemRectClassName,(function(e){e.attr({rx:_E.rx,ry:_E.ry,"shape-rendering":"crispEdges"})}));n.call(ZE.stroke,t.bordercolor).call(ZE.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function jE(e,t,n,i){var r=EE.ensureSingle(e,"text",_E.itemTextClassName,(function(e){e.attr({"text-anchor":"start","data-notex":1})})),a=n.label,o=i._fullLayout._meta;o&&(a=EE.templateString(a,o)),r.call(kE.font,t.font).text(a).call(XE.convertToTspans,i)}function PE(e,t){var n=t.active;e.each((function(e,i){var r=SE.select(this);i===n&&t.showactive&&r.select("rect."+_E.itemRectClassName).call(ZE.fill,_E.activeColor)}))}function KE(e){e.select("rect."+_E.itemRectClassName).call(ZE.fill,_E.hoverColor)}function qE(e,t){e.select("rect."+_E.itemRectClassName).call(ZE.fill,t.bgcolor)}function $E(e,t){var n=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=kE.tester.selectAll("g."+_E.dropdownButtonClassName).data(EE.filterVisible(t.buttons));i.enter().append("g").classed(_E.dropdownButtonClassName,!0);var r=-1!==["up","down"].indexOf(t.direction);i.each((function(i,a){var o=SE.select(this);o.call(OE,t,i,e);var s=o.select("."+_E.itemTextClassName),l=s.node()&&kE.bBox(s.node()).width,c=Math.max(l+_E.textPadX,_E.minWidth),u=t.font.size*WE,d=XE.lineCount(s),g=Math.max(u*d,_E.minHeight)+_E.textOffsetY;g=Math.ceil(g),c=Math.ceil(c),n.widths[a]=c,n.heights[a]=g,n.height1=Math.max(n.height1,g),n.width1=Math.max(n.width1,c),r?(n.totalWidth=Math.max(n.totalWidth,c),n.openWidth=n.totalWidth,n.totalHeight+=g+_E.gapButton,n.openHeight+=g+_E.gapButton):(n.totalWidth+=c+_E.gapButton,n.openWidth+=c+_E.gapButton,n.totalHeight=Math.max(n.totalHeight,g),n.openHeight=n.totalHeight)})),r?n.totalHeight-=_E.gapButton:n.totalWidth-=_E.gapButton,n.headerWidth=n.width1+_E.arrowPadX,n.headerHeight=n.height1,"dropdown"===t.type&&(r?(n.width1+=_E.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=_E.arrowPadX),i.remove();var a=n.totalWidth+t.pad.l+t.pad.r,o=n.totalHeight+t.pad.t+t.pad.b,s=e._fullLayout._size;n.lx=s.l+s.w*t.x,n.ly=s.t+s.h*(1-t.y);var l="left";EE.isRightAnchor(t)&&(n.lx-=a,l="right"),EE.isCenterAnchor(t)&&(n.lx-=a/2,l="center");var c="top";EE.isBottomAnchor(t)&&(n.ly-=o,c="bottom"),EE.isMiddleAnchor(t)&&(n.ly-=o/2,c="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),VE.autoMargin(e,eX(t),{x:t.x,y:t.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:o*({top:1,middle:.5}[c]||0),t:o*({bottom:1,middle:.5}[c]||0)})}function eX(e){return _E.autoMarginIdRoot+e._index}function tX(e,t,n,i){i=i||{};var r=e.select("."+_E.itemRectClassName),a=e.select("."+_E.itemTextClassName),o=t.borderwidth,s=n.index,l=t._dims;kE.setTranslate(e,o+n.x,o+n.y);var c=-1!==["up","down"].indexOf(t.direction),u=i.height||(c?l.heights[s]:l.height1);r.attr({x:0,y:0,width:i.width||(c?l.width1:l.widths[s]),height:u});var d=t.font.size*WE,g=(XE.lineCount(a)-1)*d/2;XE.positionText(a,_E.textOffsetX,u/2-g+_E.textOffsetY),c?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function nX(e,t){e.attr(_E.menuIndexAttrName,t||"-1").selectAll("g."+_E.dropdownButtonClassName).remove()}var iX={moduleType:"component",name:uE.name,layoutAttributes:bE,supplyLayoutDefaults:function(e,t){IE(e,t,{name:xE,handleItemDefaults:AE})},draw:function(e){var t=e._fullLayout,n=EE.filterVisible(t[_E.name]);function i(t){VE.autoMargin(e,eX(t))}var r=t._menulayer.selectAll("g."+_E.containerClassName).data(n.length>0?[0]:[]);if(r.enter().append("g").classed(_E.containerClassName,!0).style("cursor","pointer"),r.exit().each((function(){SE.select(this).selectAll("g."+_E.headerGroupClassName).each(i)})).remove(),0!==n.length){var a=r.selectAll("g."+_E.headerGroupClassName).data(n,ME);a.enter().append("g").classed(_E.headerGroupClassName,!0);for(var o=EE.ensureSingle(r,"g",_E.dropdownButtonGroupClassName,(function(e){e.style("pointer-events","all")})),s=0;s<n.length;s++){var l=n[s];$E(e,l)}var c="updatemenus"+t._uid,u=new TE(e,o,c);a.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(nX)),a.exit().each((function(e){o.call(nX),i(e)})).remove(),a.each((function(t){var n=SE.select(this),i="dropdown"===t.type?o:null;VE.manageCommandObserver(e,t,t.buttons,(function(r){YE(e,t,t.buttons[r.index],n,i,u,r.index,!0)})),"dropdown"===t.type?(DE(e,n,o,u,t),HE(o,t)&&zE(e,n,o,u,t)):zE(e,n,null,null,t)}))}}},rX={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},aX=Cd,oX=sh,sX=Ud.extendDeepAll,lX=Cp.overrideAll,cX=nh,uX=Qp.templatedArray,dX=rX,gX=uX("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),hX=lX(uX("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:gX,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:sX(oX({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:cX.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:aX({description:"Sets the font of the current value label text."})},font:aX({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:dX.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:dX.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:dX.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:dX.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:dX.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:dX.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:dX.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root"),fX=ws.exports,pX=Zv,mX=hX,vX=rX.name,bX=mX.steps;function yX(e,t,n){function i(n,i){return fX.coerce(e,t,mX,n,i)}for(var r=pX(e,t,{name:"steps",handleItemDefaults:IX}),a=0,o=0;o<r.length;o++)r[o].visible&&a++;if(a<2?t.visible=!1:i("visible")){t._stepCount=a;var s=t._visibleSteps=fX.filterVisible(r);(r[i("active")]||{}).visible||(t.active=s[0]._index),i("x"),i("y"),fX.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),fX.coerceFont(i,"font",n.font),i("currentvalue.visible")&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),fX.coerceFont(i,"currentvalue.font",t.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function IX(e,t){function n(n,i){return fX.coerce(e,t,bX,n,i)}if("skip"===e.method||Array.isArray(e.args)?n("visible"):t.visible=!1){n("method"),n("args");var i=n("label","step-"+t._index);n("value",i),n("execute")}}var CX=Gs.exports,xX=Fp.exports,BX=Hd.exports,AX=Am.exports,FX=ws.exports,QX=FX.strTranslate,UX=Cm,wX=Qp.arrayEditor,GX=rX,RX=Bm.LINE_SPACING,LX=Bm.FROM_TL,SX=Bm.FROM_BR;function VX(e){return GX.autoMarginIdRoot+e._index}function ZX(e){return e._index}function kX(e,t){var n=AX.tester.selectAll("g."+GX.labelGroupClass).data(t._visibleSteps);n.enter().append("g").classed(GX.labelGroupClass,!0);var i=0,r=0;n.each((function(e){var n=NX(CX.select(this),{step:e},t).node();if(n){var a=AX.bBox(n);r=Math.max(r,a.height),i=Math.max(i,a.width)}})),n.remove();var a=t._dims={};a.inputAreaWidth=Math.max(GX.railWidth,GX.gripHeight);var o=e._fullLayout._size;a.lx=o.l+o.w*t.x,a.ly=o.t+o.h*(1-t.y),"fraction"===t.lenmode?a.outerLength=Math.round(o.w*t.len):a.outerLength=t.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-t.pad.l-t.pad.r);var s=(a.inputAreaLength-2*GX.stepInset)/(t._stepCount-1),l=i+GX.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(l/s)),a.labelHeight=r,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,t.currentvalue.visible){var c=AX.tester.append("g");n.each((function(e){var n=EX(c,t,e.label),i=n.node()&&AX.bBox(n.node())||{width:0,height:0},r=UX.lineCount(n);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(i.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(i.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,r)})),a.currentValueTotalHeight=a.currentValueHeight+t.currentvalue.offset,c.remove()}a.height=a.currentValueTotalHeight+GX.tickOffset+t.ticklen+GX.labelOffset+a.labelHeight+t.pad.t+t.pad.b;var u="left";FX.isRightAnchor(t)&&(a.lx-=a.outerLength,u="right"),FX.isCenterAnchor(t)&&(a.lx-=a.outerLength/2,u="center");var d="top";FX.isBottomAnchor(t)&&(a.ly-=a.height,d="bottom"),FX.isMiddleAnchor(t)&&(a.ly-=a.height/2,d="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);var g={y:t.y,b:a.height*SX[d],t:a.height*LX[d]};"fraction"===t.lenmode?(g.l=0,g.xl=t.x-t.len*LX[u],g.r=0,g.xr=t.x+t.len*SX[u]):(g.x=t.x,g.l=a.outerLength*LX[u],g.r=a.outerLength*SX[u]),xX.autoMargin(e,VX(t),g)}function EX(e,t,n){if(t.currentvalue.visible){var i,r,a=t._dims;switch(t.currentvalue.xanchor){case"right":i=a.inputAreaLength-GX.currentValueInset-a.currentValueMaxWidth,r="left";break;case"center":i=.5*a.inputAreaLength,r="middle";break;default:i=GX.currentValueInset,r="left"}var o=FX.ensureSingle(e,"text",GX.labelClass,(function(e){e.attr({"text-anchor":r,"data-notex":1})})),s=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"==typeof n)s+=n;else{var l=t.steps[t.active].label,c=t._gd._fullLayout._meta;c&&(l=FX.templateString(l,c)),s+=l}t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(AX.font,t.currentvalue.font).text(s).call(UX.convertToTspans,t._gd);var u=UX.lineCount(o),d=(a.currentValueMaxLines+1-u)*t.currentvalue.font.size*RX;return UX.positionText(o,i,d),o}}function XX(e,t,n){var i=FX.ensureSingle(e,"rect",GX.gripRectClass,(function(i){i.call(MX,t,e,n).style("pointer-events","all")}));i.attr({width:GX.gripWidth,height:GX.gripHeight,rx:GX.gripRadius,ry:GX.gripRadius}).call(BX.stroke,n.bordercolor).call(BX.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function NX(e,t,n){var i=FX.ensureSingle(e,"text",GX.labelClass,(function(e){e.attr({"text-anchor":"middle","data-notex":1})})),r=t.step.label,a=n._gd._fullLayout._meta;return a&&(r=FX.templateString(r,a)),i.call(AX.font,n.font).text(r).call(UX.convertToTspans,n._gd),i}function WX(e,t){var n=FX.ensureSingle(e,"g",GX.labelsClass),i=t._dims,r=n.selectAll("g."+GX.labelGroupClass).data(i.labelSteps);r.enter().append("g").classed(GX.labelGroupClass,!0),r.exit().remove(),r.each((function(e){var n=CX.select(this);n.call(NX,e,t),AX.setTranslate(n,DX(t,e.fraction),GX.tickOffset+t.ticklen+t.font.size*RX+GX.labelOffset+i.currentValueTotalHeight)}))}function _X(e,t,n,i,r){var a=Math.round(i*(n._stepCount-1)),o=n._visibleSteps[a]._index;o!==n.active&&TX(e,t,n,o,!0,r)}function TX(e,t,n,i,r,a){var o=n.active;n.active=i,wX(e.layout,GX.name,n).applyUpdate("active",i);var s=n.steps[n.active];t.call(YX,n,a),t.call(EX,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:r,previousActive:o}),s&&s.method&&r&&(t._nextMethod?(t._nextMethod.step=s,t._nextMethod.doCallback=r,t._nextMethod.doTransition=a):(t._nextMethod={step:s,doCallback:r,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame((function(){var n=t._nextMethod.step;n.method&&(n.execute&&xX.executeAPICommand(e,n.method,n.args),t._nextMethod=null,t._nextMethodRaf=null)}))))}function MX(e,t,n){var i=n.node(),r=CX.select(t);function a(){return n.data()[0]}function o(){var e=a();t.emit("plotly_sliderstart",{slider:e});var o=n.select("."+GX.gripRectClass);CX.event.stopPropagation(),CX.event.preventDefault(),o.call(BX.fill,e.activebgcolor);var s=zX(e,CX.mouse(i)[0]);function l(){var e=a(),r=zX(e,CX.mouse(i)[0]);_X(t,n,e,r,!1)}function c(){var e=a();e._dragging=!1,o.call(BX.fill,e.bgcolor),r.on("mouseup",null),r.on("mousemove",null),r.on("touchend",null),r.on("touchmove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})}_X(t,n,e,s,!0),e._dragging=!0,r.on("mousemove",l),r.on("touchmove",l),r.on("mouseup",c),r.on("touchend",c)}e.on("mousedown",o),e.on("touchstart",o)}function HX(e,t){var n=e.selectAll("rect."+GX.tickRectClass).data(t._visibleSteps),i=t._dims;n.enter().append("rect").classed(GX.tickRectClass,!0),n.exit().remove(),n.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),n.each((function(e,n){var r=n%i.labelStride==0,a=CX.select(this);a.attr({height:r?t.ticklen:t.minorticklen}).call(BX.fill,t.tickcolor),AX.setTranslate(a,DX(t,n/(t._stepCount-1))-.5*t.tickwidth,(r?GX.tickOffset:GX.minorTickOffset)+i.currentValueTotalHeight)}))}function YX(e,t,n){for(var i=e.select("rect."+GX.gripRectClass),r=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){r=a;break}var o=DX(t,r/(t._stepCount-1));if(!t._invokingCommand){var s=i;n&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform",QX(o-.5*GX.gripWidth,t._dims.currentValueTotalHeight))}}function DX(e,t){var n=e._dims;return n.inputAreaStart+GX.stepInset+(n.inputAreaLength-2*GX.stepInset)*Math.min(1,Math.max(0,t))}function zX(e,t){var n=e._dims;return Math.min(1,Math.max(0,(t-GX.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*GX.stepInset-2*n.inputAreaStart)))}function OX(e,t,n){var i=n._dims,r=FX.ensureSingle(e,"rect",GX.railTouchRectClass,(function(i){i.call(MX,t,e,n).style("pointer-events","all")}));r.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,GX.tickOffset+n.ticklen+i.labelHeight)}).call(BX.fill,n.bgcolor).attr("opacity",0),AX.setTranslate(r,0,i.currentValueTotalHeight)}function JX(e,t){var n=t._dims,i=n.inputAreaLength-2*GX.railInset,r=FX.ensureSingle(e,"rect",GX.railRectClass);r.attr({width:i,height:GX.railWidth,rx:GX.railRadius,ry:GX.railRadius,"shape-rendering":"crispEdges"}).call(BX.stroke,t.bordercolor).call(BX.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),AX.setTranslate(r,GX.railInset,.5*(n.inputAreaWidth-GX.railWidth)+n.currentValueTotalHeight)}var jX={moduleType:"component",name:rX.name,layoutAttributes:hX,supplyLayoutDefaults:function(e,t){pX(e,t,{name:vX,handleItemDefaults:yX})},draw:function(e){var t=e._fullLayout,n=function(e,t){for(var n=e[GX.name],i=[],r=0;r<n.length;r++){var a=n[r];a.visible&&(a._gd=t,i.push(a))}return i}(t,e),i=t._infolayer.selectAll("g."+GX.containerClassName).data(n.length>0?[0]:[]);function r(t){t._commandObserver&&(t._commandObserver.remove(),delete t._commandObserver),xX.autoMargin(e,VX(t))}if(i.enter().append("g").classed(GX.containerClassName,!0).style("cursor","ew-resize"),i.exit().each((function(){CX.select(this).selectAll("g."+GX.groupClassName).each(r)})).remove(),0!==n.length){var a=i.selectAll("g."+GX.groupClassName).data(n,ZX);a.enter().append("g").classed(GX.groupClassName,!0),a.exit().each(r).remove();for(var o=0;o<n.length;o++){var s=n[o];kX(e,s)}a.each((function(t){var n=CX.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,i=0;i<n;i+=t.labelStride)t.labelSteps.push({fraction:i/(n-1),step:e._visibleSteps[i]})}(t),xX.manageCommandObserver(e,t,t._visibleSteps,(function(t){var i=n.data()[0];i.active!==t.index&&(i._dragging||TX(e,n,i,t.index,!1,!0))})),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index);t.call(EX,n).call(JX,n).call(WX,n).call(HX,n).call(OX,e,n).call(XX,e,n);var i=n._dims;AX.setTranslate(t,i.lx+n.pad.l,i.ly+n.pad.t),t.call(YX,n,!1),t.call(EX,n)}(e,CX.select(this),t)}))}}},PX=Yd,KX={bgcolor:{valType:"color",dflt:PX.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:PX.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"},qX={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"},$X={},eN={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},tN=Sp,nN=Cm,iN=eN,rN=Bm.LINE_SPACING,aN=iN.name;function oN(e){var t=e&&e[aN];return t&&t.visible}$X.isVisible=oN,$X.makeData=function(e){var t=tN.list({_fullLayout:e},"x",!0),n=e.margin,i=[];if(!e._has("gl2d"))for(var r=0;r<t.length;r++){var a=t[r];if(oN(a)){i.push(a);var o=a[aN];o._id=aN+a._id,o._height=(e.height-n.b-n.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}e._rangeSliderData=i},$X.autoMarginOpts=function(e,t){var n=e._fullLayout,i=t[aN],r=t._id.charAt(0),a=0,o=0;"bottom"===t.side&&(a=t._depth,t.title.text!==n._dfltTitle[r]&&(o=1.5*t.title.font.size+10+i._offsetShift,o+=(t.title.text.match(nN.BR_TAG_ALL)||[]).length*t.title.font.size*rN));return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:i._height+a+Math.max(n.margin.b,o),pad:iN.extraPad+2*i._offsetShift}};var sN=ws.exports,lN=Qp,cN=Sp,uN=KX,dN=qX,gN=Sp.list,hN=lI.getAutoRange,fN=eN,pN=Gs.exports,mN=hg,vN=Fp.exports,bN=ws.exports,yN=bN.strTranslate,IN=Am.exports,CN=Hd.exports,xN=by,BN=ZS,AN=Sp,FN=YC.exports,QN=ux,UN=eN;function wN(e,t,n,i){var r=bN.ensureSingle(e,"rect",UN.bgClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})})),a=i.borderwidth%2==0?i.borderwidth:i.borderwidth-1,o=-i._offsetShift,s=IN.crispRound(t,i.borderwidth);r.attr({width:i._width+a,height:i._height+a,transform:yN(o,o),fill:i.bgcolor,stroke:i.bordercolor,"stroke-width":s})}function GN(e,t,n,i){var r=t._fullLayout,a=bN.ensureSingleById(r._topdefs,"clipPath",i._clipId,(function(e){e.append("rect").attr({x:0,y:0})}));a.select("rect").attr({width:i._width,height:i._height})}function RN(e,t,n,i){var r,a=t.calcdata,o=e.selectAll("g."+UN.rangePlotClassName).data(n._subplotsWith,bN.identity);o.enter().append("g").attr("class",(function(e){return UN.rangePlotClassName+" "+e})).call(IN.setClipUrl,i._clipId,t),o.order(),o.exit().remove(),o.each((function(e,o){var s=pN.select(this),l=0===o,c=AN.getFromId(t,e,"y"),u=c._name,d=i[u],g={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};n.rangebreaks&&(g.layout.xaxis.rangebreaks=n.rangebreaks),g.layout[u]={type:c.type,domain:[0,1],range:"match"!==d.rangemode?d.range.slice():c.range.slice(),calendar:c.calendar},c.rangebreaks&&(g.layout[u].rangebreaks=c.rangebreaks),vN.supplyDefaults(g);var h=g._fullLayout.xaxis,f=g._fullLayout[u];h.clearCalc(),h.setScale(),f.clearCalc(),f.setScale();var p={id:e,plotgroup:s,xaxis:h,yaxis:f,isRangePlot:!0};l?r=p:(p.mainplot="xy",p.mainplotinfo=r),BN.rangePlot(t,p,function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i],a=r[0].trace;a.xaxis+a.yaxis===t&&n.push(r)}return n}(a,e))}))}function LN(e,t,n,i,r){var a=bN.ensureSingle(e,"rect",UN.maskMinClassName,(function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}));a.attr("height",i._height).call(CN.fill,UN.maskColor);var o=bN.ensureSingle(e,"rect",UN.maskMaxClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));if(o.attr("height",i._height).call(CN.fill,UN.maskColor),"match"!==r.rangemode){var s=bN.ensureSingle(e,"rect",UN.maskMinOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));s.attr("width",i._width).call(CN.fill,UN.maskOppAxisColor);var l=bN.ensureSingle(e,"rect",UN.maskMaxOppAxisClassName,(function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}));l.attr("width",i._width).style("border-top",UN.maskOppBorder).call(CN.fill,UN.maskOppAxisColor)}}function SN(e,t,n,i){if(!t._context.staticPlot){var r=bN.ensureSingle(e,"rect",UN.slideBoxClassName,(function(e){e.attr({y:0,cursor:UN.slideBoxCursor,"shape-rendering":"crispEdges"})}));r.attr({height:i._height,fill:UN.slideBoxFill})}}function VN(e,t,n,i){var r=bN.ensureSingle(e,"g",UN.grabberMinClassName),a=bN.ensureSingle(e,"g",UN.grabberMaxClassName),o={x:0,width:UN.handleWidth,rx:UN.handleRadius,fill:CN.background,stroke:CN.defaultLine,"stroke-width":UN.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(i._height/4),height:Math.round(i._height/2)},l=bN.ensureSingle(r,"rect",UN.handleMinClassName,(function(e){e.attr(o)}));l.attr(s);var c=bN.ensureSingle(a,"rect",UN.handleMaxClassName,(function(e){e.attr(o)}));c.attr(s);var u={width:UN.grabAreaWidth,x:0,y:0,fill:UN.grabAreaFill,cursor:t._context.staticPlot?void 0:UN.grabAreaCursor},d=bN.ensureSingle(r,"rect",UN.grabAreaMinClassName,(function(e){e.attr(u)}));d.attr("height",i._height);var g=bN.ensureSingle(a,"rect",UN.grabAreaMaxClassName,(function(e){e.attr(u)}));g.attr("height",i._height)}var ZN=KX,kN=qX,EN=$X,XN={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:ws.exports.extendFlat({},ZN,{yaxis:kN})}}},layoutAttributes:KX,handleDefaults:function(e,t,n){var i=e[n],r=t[n];if(i.rangeslider||t._requestRangeslider[r._id]){sN.isPlainObject(i.rangeslider)||(i.rangeslider={});var a,o,s=i.rangeslider,l=lN.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",t.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(s.range)),m("range");var c=t._subplots;if(c)for(var u=c.cartesian.filter((function(e){return e.substr(0,e.indexOf("y"))===cN.name2id(n)})).map((function(e){return e.substr(e.indexOf("y"),e.length)})),d=sN.simpleMap(u,cN.id2name),g=0;g<d.length;g++){var h=d[g];a=s[h]||{},o=lN.newContainer(l,h,"yaxis");var f,p=t[h];a.range&&p.isValidRange(a.range)&&(f="fixed"),"match"!==v("rangemode",f)&&v("range",p.range.slice())}l._input=s}}function m(e,t){return sN.coerce(s,l,uN,e,t)}function v(e,t){return sN.coerce(a,o,dN,e,t)}},calcAutorange:function(e){for(var t=gN(e,"x",!0),n=0;n<t.length;n++){var i=t[n],r=i[fN.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=hN(e,i))}},draw:function(e){for(var t=e._fullLayout,n=t._rangeSliderData,i=0;i<n.length;i++){var r=n[i][UN.name];r._clipId=r._id+"-"+t._uid}var a=t._infolayer.selectAll("g."+UN.containerClassName).data(n,(function(e){return e._name}));a.exit().each((function(e){var n=e[UN.name];t._topdefs.select("#"+n._clipId).remove()})).remove(),0!==n.length&&(a.enter().append("g").classed(UN.containerClassName,!0).attr("pointer-events","all"),a.each((function(n){var i=pN.select(this),r=n[UN.name],a=t[AN.id2name(n.anchor)],o=r[AN.id2name(n.anchor)];if(r.range){var s,l=bN.simpleMap(r.range,n.r2l),c=bN.simpleMap(n.range,n.r2l);s=c[0]<c[1]?[Math.min(l[0],c[0]),Math.max(l[1],c[1])]:[Math.max(l[0],c[0]),Math.min(l[1],c[1])],r.range=r._input.range=bN.simpleMap(s,n.l2r)}n.cleanRange("rangeslider.range");var u=t._size,d=n.domain;r._width=u.w*(d[1]-d[0]);var g=Math.round(u.l+u.w*d[0]),h=Math.round(u.t+u.h*(1-n._counterDomainMin)+("bottom"===n.side?n._depth:0)+r._offsetShift+UN.extraPad);i.attr("transform",yN(g,h)),r._rl=bN.simpleMap(r.range,n.r2l);var f=r._rl[0],p=r._rl[1],m=p-f;if(r.p2d=function(e){return e/r._width*m+f},r.d2p=function(e){return(e-f)/m*r._width},n.rangebreaks){var v=n.locateBreaks(f,p);if(v.length){var b,y,I=0;for(b=0;b<v.length;b++)I+=(y=v[b]).max-y.min;var C=r._width/(p-f-I),x=[-C*f];for(b=0;b<v.length;b++)y=v[b],x.push(x[x.length-1]-C*(y.max-y.min));for(r.d2p=function(e){for(var t=x[0],n=0;n<v.length;n++){var i=v[n];if(e>=i.max)t=x[n+1];else if(e<i.min)break}return t+C*e},b=0;b<v.length;b++)(y=v[b]).pmin=r.d2p(y.min),y.pmax=r.d2p(y.max);r.p2d=function(e){for(var t=x[0],n=0;n<v.length;n++){var i=v[n];if(e>=i.pmax)t=x[n+1];else if(e<i.pmin)break}return(e-t)/C}}}if("match"!==o.rangemode){var B=a.r2l(o.range[0]),A=a.r2l(o.range[1])-B;r.d2pOppAxis=function(e){return(e-B)/A*r._height}}i.call(wN,e,n,r).call(GN,e,n,r).call(RN,e,n,r).call(LN,e,n,r,o).call(SN,e,n,r).call(VN,e,n,r),function(e,t,n,i){if(t._context.staticPlot)return;var r=e.select("rect."+UN.slideBoxClassName).node(),a=e.select("rect."+UN.grabAreaMinClassName).node(),o=e.select("rect."+UN.grabAreaMaxClassName).node();function s(){var s=pN.event,l=s.target,c=s.clientX||s.touches[0].clientX,u=c-e.node().getBoundingClientRect().left,d=i.d2p(n._rl[0]),g=i.d2p(n._rl[1]),h=FN.coverSlip();function f(e){var s,f,p,m=+(e.clientX||e.touches[0].clientX)-c;switch(l){case r:p="ew-resize",s=d+m,f=g+m;break;case a:p="col-resize",s=d+m,f=g;break;case o:p="col-resize",s=d,f=g+m;break;default:p="ew-resize",s=u,f=u+m}if(f<s){var v=f;f=s,s=v}i._pixelMin=s,i._pixelMax=f,QN(pN.select(h),p),function(e,t,n,i){function r(e){return n.l2r(bN.constrain(e,i._rl[0],i._rl[1]))}var a=r(i.p2d(i._pixelMin)),o=r(i.p2d(i._pixelMax));window.requestAnimationFrame((function(){mN.call("_guiRelayout",t,n._name+".range",[a,o])}))}(0,t,n,i)}function p(){h.removeEventListener("mousemove",f),h.removeEventListener("mouseup",p),this.removeEventListener("touchmove",f),this.removeEventListener("touchend",p),bN.removeElement(h)}this.addEventListener("touchmove",f),this.addEventListener("touchend",p),h.addEventListener("mousemove",f),h.addEventListener("mouseup",p)}e.on("mousedown",s),e.on("touchstart",s)}(i,e,n,r),function(e,t,n,i,r,a){var o=UN.handleWidth/2;function s(e){return bN.constrain(e,0,i._width)}function l(e){return bN.constrain(e,0,i._height)}function c(e){return bN.constrain(e,-o,i._width+o)}var u=s(i.d2p(n._rl[0])),d=s(i.d2p(n._rl[1]));if(e.select("rect."+UN.slideBoxClassName).attr("x",u).attr("width",d-u),e.select("rect."+UN.maskMinClassName).attr("width",u),e.select("rect."+UN.maskMaxClassName).attr("x",d).attr("width",i._width-d),"match"!==a.rangemode){var g=i._height-l(i.d2pOppAxis(r._rl[1])),h=i._height-l(i.d2pOppAxis(r._rl[0]));e.select("rect."+UN.maskMinOppAxisClassName).attr("x",u).attr("height",g).attr("width",d-u),e.select("rect."+UN.maskMaxOppAxisClassName).attr("x",u).attr("y",h).attr("height",i._height-h).attr("width",d-u),e.select("rect."+UN.slideBoxClassName).attr("y",g).attr("height",h-g)}var f=.5,p=Math.round(c(u-o))-f,m=Math.round(c(d-o))+f;e.select("g."+UN.grabberMinClassName).attr("transform",yN(p,f)),e.select("g."+UN.grabberMaxClassName).attr("transform",yN(m,f))}(i,0,n,r,a,o),"bottom"===n.side&&xN.draw(e,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:t._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:h+r._height+r._offsetShift+10+1.5*n.title.font.size,"text-anchor":"middle"}})})))},isVisible:EN.isVisible,makeData:EN.makeData,autoMarginOpts:EN.autoMarginOpts},NN=Cd,WN=Yd,_N=(0,Qp.templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),TN={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:_N,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:NN({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:WN.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:WN.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"},MN={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10},HN=ws.exports,YN=Hd.exports,DN=Qp,zN=Zv,ON=TN,JN=MN;function jN(e,t,n,i){var r=i.calendar;function a(n,i){return HN.coerce(e,t,ON.buttons,n,i)}if(a("visible")){var o=a("step");"all"!==o&&(!r||"gregorian"===r||"month"!==o&&"year"!==o?a("stepmode"):t.stepmode="backward",a("count")),a("label")}}var PN=Bs(zl),KN=ws.exports.titleCase;var qN=Gs.exports,$N=hg,eW=Fp.exports,tW=Hd.exports,nW=Am.exports,iW=ws.exports,rW=iW.strTranslate,aW=Cm,oW=Sp,sW=Bm.LINE_SPACING,lW=Bm.FROM_TL,cW=Bm.FROM_BR,uW=MN,dW=function(e,t){var n=e._name,i={};if("all"===t.step)i[n+".autorange"]=!0;else{var r=function(e,t){var n,i=e.range,r=new Date(e.r2l(i[1])),a=t.step,o=PN["utc"+KN(a)],s=t.count;switch(t.stepmode){case"backward":n=e.l2r(+o.offset(r,-s));break;case"todate":var l=o.offset(r,-s);n=e.l2r(+o.ceil(l))}var c=i[1];return[n,c]}(e,t);i[n+".range[0]"]=r[0],i[n+".range[1]"]=r[1]}return i};function gW(e){return e._id}function hW(e,t,n){var i=iW.ensureSingle(e,"rect","selector-rect",(function(e){e.attr("shape-rendering","crispEdges")}));i.attr({rx:uW.rx,ry:uW.ry}),i.call(tW.stroke,t.bordercolor).call(tW.fill,function(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}(t,n)).style("stroke-width",t.borderwidth+"px")}function fW(e,t,n,i){var r=iW.ensureSingle(e,"text","selector-text",(function(e){e.attr("text-anchor","middle")}));r.call(nW.font,t.font).text(function(e,t){if(e.label)return t?iW.templateString(e.label,t):e.label;return"all"===e.step?"all":e.count+e.step.charAt(0)}(n,i._fullLayout._meta)).call((function(e){aW.convertToTspans(e,i)}))}var pW={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:TN}}},layoutAttributes:TN,handleDefaults:function(e,t,n,i,r){var a=e.rangeselector||{},o=DN.newContainer(t,"rangeselector");function s(e,t){return HN.coerce(a,o,ON,e,t)}if(s("visible",zN(a,o,{name:"buttons",handleItemDefaults:jN,calendar:r}).length>0)){var l=function(e,t,n){for(var i=n.filter((function(n){return t[n].anchor===e._id})),r=0,a=0;a<i.length;a++){var o=t[i[a]].domain;o&&(r=Math.max(o[1],r))}return[e.domain[0],r+JN.yPad]}(t,n,i);s("x",l[0]),s("y",l[1]),HN.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),HN.coerceFont(s,"font",n.font);var c=s("bgcolor");s("activecolor",YN.contrast(c,JN.lightAmount,JN.darkAmount)),s("bordercolor"),s("borderwidth")}},draw:function(e){var t=e._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=oW.list(e,"x",!0),n=[],i=0;i<t.length;i++){var r=t[i];r.rangeselector&&r.rangeselector.visible&&n.push(r)}return n}(e),gW);t.enter().append("g").classed("rangeselector",!0),t.exit().remove(),t.style({cursor:"pointer","pointer-events":"all"}),t.each((function(t){var n=qN.select(this),i=t,r=i.rangeselector,a=n.selectAll("g.button").data(iW.filterVisible(r.buttons));a.enter().append("g").classed("button",!0),a.exit().remove(),a.each((function(t){var n=qN.select(this),a=dW(i,t);t._isActive=function(e,t,n){if("all"===t.step)return!0===e.autorange;var i=Object.keys(n);return e.range[0]===n[i[0]]&&e.range[1]===n[i[1]]}(i,t,a),n.call(hW,r,t),n.call(fW,r,t,e),n.on("click",(function(){e._dragged||$N.call("_guiRelayout",e,a)})),n.on("mouseover",(function(){t._isHovered=!0,n.call(hW,r,t)})),n.on("mouseout",(function(){t._isHovered=!1,n.call(hW,r,t)}))})),function(e,t,n,i,r){var a=0,o=0,s=n.borderwidth;t.each((function(){var e=qN.select(this).select(".selector-text"),t=n.font.size*sW,i=Math.max(t*aW.lineCount(e),16)+3;o=Math.max(o,i)})),t.each((function(){var e=qN.select(this),t=e.select(".selector-rect"),i=e.select(".selector-text"),r=i.node()&&nW.bBox(i.node()).width,l=n.font.size*sW,c=aW.lineCount(i),u=Math.max(r+10,uW.minButtonWidth);e.attr("transform",rW(s+a,s)),t.attr({x:0,y:0,width:u,height:o}),aW.positionText(i,u/2,o/2-(c-1)*l/2+3),a+=u+5}));var l=e._fullLayout._size,c=l.l+l.w*n.x,u=l.t+l.h*(1-n.y),d="left";iW.isRightAnchor(n)&&(c-=a,d="right");iW.isCenterAnchor(n)&&(c-=a/2,d="center");var g="top";iW.isBottomAnchor(n)&&(u-=o,g="bottom");iW.isMiddleAnchor(n)&&(u-=o/2,g="middle");a=Math.ceil(a),o=Math.ceil(o),c=Math.round(c),u=Math.round(u),eW.autoMargin(e,i+"-range-selector",{x:n.x,y:n.y,l:a*lW[d],r:a*cW[d],b:o*cW[g],t:o*lW[g]}),r.attr("transform",rW(c,u))}(e,a,r,i._name,n)}))}},mW={},vW=Ud.extendFlat;mW.attributes=function(e,t){t=t||{};var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",r=e.trace?"trace ":"subplot ",a=t.description?" "+t.description:"",o={x:vW({},n,{description:["Sets the horizontal domain of this ",i,r,"(in plot fraction).",a].join("")}),y:vW({},n,{description:["Sets the vertical domain of this ",i,r,"(in plot fraction).",a].join("")}),editType:e.editType};return e.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",i,r,".",a].join("")},o.column={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",i,r,".",a].join("")}),o},mW.defaults=function(e,t,n,i){var r=i&&i.x||[0,1],a=i&&i.y||[0,1],o=t.grid;if(o){var s=n("domain.column");void 0!==s&&(s<o.columns?r=o._domains.x[s]:delete e.domain.column);var l=n("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete e.domain.row)}var c=n("domain.x",r),u=n("domain.y",a);c[0]<c[1]||(e.domain.x=r.slice()),u[0]<u[1]||(e.domain.y=a.slice())};var bW=ws.exports,yW=eg.counter,IW=mW.attributes,CW=Zp.idRegex,xW=Qp,BW={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[yW("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[CW.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[CW.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:IW({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function AW(e,t,n){var i=t[n+"axes"],r=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(i)?i:r.length?r:void 0}function FW(e,t,n,i,r,a){var o=t(e+"gap",n),s=t("domain."+e);t(e+"side",i);for(var l=new Array(r),c=s[0],u=(s[1]-c)/(r-o),d=u*(1-o),g=0;g<r;g++){var h=c+u*g;l[a?r-1-g:g]=[h,h+d]}return l}function QW(e,t,n,i,r){var a,o=new Array(n);function s(e,n){-1!==t.indexOf(n)&&void 0===i[n]?(o[e]=n,i[n]=e):o[e]=""}if(Array.isArray(e))for(a=0;a<n;a++)s(a,e[a]);else for(s(0,r),a=1;a<n;a++)s(a,r+(a+1));return o}var UW={moduleType:"component",name:"grid",schema:{layout:{grid:BW}},layoutAttributes:BW,sizeDefaults:function(e,t){var n=e.grid||{},i=AW(t,n,"x"),r=AW(t,n,"y");if(e.grid||i||r){var a,o,s=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),l=Array.isArray(i),c=Array.isArray(r),u=l&&i!==n.xaxes&&c&&r!==n.yaxes;s?(a=n.subplots.length,o=n.subplots[0].length):(c&&(a=r.length),l&&(o=i.length));var d=xW.newContainer(t,"grid"),g=y("rows",a),h=y("columns",o);if(g*h>1){if(!s&&!l&&!c)"independent"===y("pattern")&&(s=!0);d._hasSubplotGrid=s;var f,p,m="top to bottom"===y("roworder"),v=s?.2:.1,b=s?.3:.1;u&&t._splomGridDflt&&(f=t._splomGridDflt.xside,p=t._splomGridDflt.yside),d._domains={x:FW("x",y,v,f,h),y:FW("y",y,b,p,g,m)}}else delete t.grid}function y(e,t){return bW.coerce(n,d,BW,e,t)}},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var i,r,a,o,s,l,c,u=e.grid||{},d=t._subplots,g=n._hasSubplotGrid,h=n.rows,f=n.columns,p="independent"===n.pattern,m=n._axisMap={};if(g){var v=u.subplots||[];l=n.subplots=new Array(h);var b=1;for(i=0;i<h;i++){var y=l[i]=new Array(f),I=v[i]||[];for(r=0;r<f;r++)if(p?(s=1===b?"xy":"x"+b+"y"+b,b++):s=I[r],y[r]="",-1!==d.cartesian.indexOf(s)){if(c=s.indexOf("y"),a=s.slice(0,c),o=s.slice(c),void 0!==m[a]&&m[a]!==r||void 0!==m[o]&&m[o]!==i)continue;y[r]=s,m[a]=r,m[o]=i}}}else{var C=AW(t,u,"x"),x=AW(t,u,"y");n.xaxes=QW(C,d.xaxis,f,m,"x"),n.yaxes=QW(x,d.yaxis,h,m,"y")}var B=n._anchors={},A="top to bottom"===n.roworder;for(var F in m){var Q,U,w,G=F.charAt(0),R=n[G+"side"];if(R.length<8)B[F]="free";else if("x"===G){if("t"===R.charAt(0)===A?(Q=0,U=1,w=h):(Q=h-1,U=-1,w=-1),g){var L=m[F];for(i=Q;i!==w;i+=U)if((s=l[i][L])&&(c=s.indexOf("y"),s.slice(0,c)===F)){B[F]=s.slice(c);break}}else for(i=Q;i!==w;i+=U)if(o=n.yaxes[i],-1!==d.cartesian.indexOf(F+o)){B[F]=o;break}}else if("l"===R.charAt(0)?(Q=0,U=1,w=f):(Q=f-1,U=-1,w=-1),g){var S=m[F];for(i=Q;i!==w;i+=U)if((s=l[S][i])&&(c=s.indexOf("y"),s.slice(c)===F)){B[F]=s.slice(0,c);break}}else for(i=Q;i!==w;i+=U)if(a=n.xaxes[i],-1!==d.cartesian.indexOf(a+F)){B[F]=a;break}}}}},wW={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}},GW=Yu,RW=hg,LW=ws.exports,SW=Qp,VW=wW,ZW=function(e){var t=e.type,n=e.symmetric;if("data"===t){var i=e.array||[];if(n)return function(e,t){var n=+i[t];return[n,n]};var r=e.arrayminus||[];return function(e,t){var n=+i[t],a=+r[t];return isNaN(n)&&isNaN(a)?[NaN,NaN]:[a||0,n||0]}}var a=kW(t,e.value),o=kW(t,e.valueminus);return n||void 0===e.valueminus?function(e){var t=a(e);return[t,t]}:function(e){return[o(e),a(e)]}};function kW(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}var EW=Yu,XW=hg,NW=Im.exports,WW=ws.exports,_W=ZW;function TW(e,t,n,i){var r=t["error_"+i]||{},a=[];if(r.visible&&-1!==["linear","log"].indexOf(n.type)){for(var o=_W(r),s=0;s<e.length;s++){var l=e[s],c=l.i;if(void 0===c)c=s;else if(null===c)continue;var u=l[i];if(EW(n.c2l(u))){var d=o(u,c);if(EW(d[0])&&EW(d[1])){var g=l[i+"s"]=u-d[0],h=l[i+"h"]=u+d[1];a.push(g,h)}}}var f=n._id,p=t._extremes[f],m=NW.findExtremes(n,a,WW.extendFlat({tozero:p.opts.tozero},{padded:!0}));p.min=p.min.concat(m.min),p.max=p.max.concat(m.max)}}var MW=Gs.exports,HW=Yu,YW=Am.exports,DW=yb;var zW=Gs.exports,OW=Hd.exports,JW=ws.exports,jW=Cp.overrideAll,PW=wW,KW={error_x:JW.extendFlat({},PW),error_y:JW.extendFlat({},PW)};delete KW.error_x.copy_zstyle,delete KW.error_y.copy_zstyle,delete KW.error_y.copy_ystyle;var qW={error_x:JW.extendFlat({},PW),error_y:JW.extendFlat({},PW),error_z:JW.extendFlat({},PW)};delete qW.error_x.copy_ystyle,delete qW.error_y.copy_ystyle,delete qW.error_z.copy_ystyle,delete qW.error_z.copy_zstyle;var $W={moduleType:"component",name:"errorbars",schema:{traces:{scatter:KW,bar:KW,histogram:KW,scatter3d:jW(qW,"calc","nested"),scattergl:jW(KW,"calc","nested")}},supplyDefaults:function(e,t,n,i){var r="error_"+i.axis,a=SW.newContainer(t,r),o=e[r]||{};function s(e,t){return LW.coerce(o,a,VW,e,t)}if(!1!==s("visible",void 0!==o.array||void 0!==o.value||"sqrt"===o.type)){var l=s("type","array"in o?"data":"percent"),c=!0;"sqrt"!==l&&(c=s("symmetric",!(("data"===l?"arrayminus":"valueminus")in o))),"data"===l?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):"percent"!==l&&"constant"!==l||(s("value"),c||s("valueminus"));var u="copy_"+i.inherit+"style";if(i.inherit)(t["error_"+i.inherit]||{}).visible&&s(u,!(o.color||GW(o.thickness)||GW(o.width)));i.inherit&&a[u]||(s("color",n),s("thickness"),s("width",RW.traceIs(t,"gl3d")?0:4))}},calc:function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var i=t[n],r=i[0].trace;if(!0===r.visible&&XW.traceIs(r,"errorBarsOK")){var a=NW.getFromId(e,r.xaxis),o=NW.getFromId(e,r.yaxis);TW(i,r,a,"x"),TW(i,r,o,"y")}}},makeComputeError:ZW,plot:function(e,t,n,i){var r=n.xaxis,a=n.yaxis,o=i&&i.duration>0;t.each((function(t){var s,l=t[0].trace,c=l.error_x||{},u=l.error_y||{};l.ids&&(s=function(e){return e.id});var d=DW.hasMarkers(l)&&l.marker.maxdisplayed>0;u.visible||c.visible||(t=[]);var g=MW.select(this).selectAll("g.errorbar").data(t,s);if(g.exit().remove(),t.length){c.visible||g.selectAll("path.xerror").remove(),u.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var h=g.enter().append("g").classed("errorbar",!0);o&&h.style("opacity",0).transition().duration(i.duration).style("opacity",1),YW.setClipUrl(g,n.layerClipId,e),g.each((function(e){var t=MW.select(this),n=function(e,t,n){var i={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(i.yh=n.c2p(e.yh),i.ys=n.c2p(e.ys),HW(i.ys)||(i.noYS=!0,i.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(i.xh=t.c2p(e.xh),i.xs=t.c2p(e.xs),HW(i.xs)||(i.noXS=!0,i.xs=t.c2p(e.xs,!0)));return i}(e,r,a);if(!d||e.vis){var s,l=t.select("path.yerror");if(u.visible&&HW(n.x)&&HW(n.yh)&&HW(n.ys)){var g=u.width;s="M"+(n.x-g)+","+n.yh+"h"+2*g+"m-"+g+",0V"+n.ys,n.noYS||(s+="m-"+g+",0h"+2*g),!l.size()?l=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):o&&(l=l.transition().duration(i.duration).ease(i.easing)),l.attr("d",s)}else l.remove();var h=t.select("path.xerror");if(c.visible&&HW(n.y)&&HW(n.xh)&&HW(n.xs)){var f=(c.copy_ystyle?u:c).width;s="M"+n.xh+","+(n.y-f)+"v"+2*f+"m0,-"+f+"H"+n.xs,n.noXS||(s+="m0,-"+f+"v"+2*f),!h.size()?h=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):o&&(h=h.transition().duration(i.duration).ease(i.easing)),h.attr("d",s)}else h.remove()}}))}}))},style:function(e){e.each((function(e){var t=e[0].trace,n=t.error_y||{},i=t.error_x||{},r=zW.select(this);r.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(OW.stroke,n.color),i.copy_ystyle&&(i=n),r.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(OW.stroke,i.color)}))},hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}};var e_=Gs.exports,t_=Id.exports,n_=Fp.exports,i_=hg,r_=Im.exports,a_=YC.exports,o_=ws.exports,s_=o_.strTranslate,l_=Ud.extendFlat,c_=ux,u_=Am.exports,d_=Hd.exports,g_=by,h_=Cm,f_=Nm.flipScale,p_=rV,m_=uV,v_=nv,b_=Bm.LINE_SPACING,y_=Bm.FROM_TL,I_=Bm.FROM_BR,C_={colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"};var x_={draw:function(e){var t=e._fullLayout._infolayer.selectAll("g."+C_.colorbar).data(function(e){var t,n,i,r,a=e._fullLayout,o=e.calcdata,s=[];function l(e){return l_(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof r.calc?r.calc(e,i,t):(t._fillgradient=n.reversescale?f_(n.colorscale):n.colorscale,t._zrange=[n[r.min],n[r.max]])}for(var u=0;u<o.length;u++){var d=o[u],g=(i=d[0].trace)._module.colorbar;if(!0===i.visible&&g)for(var h=Array.isArray(g),f=h?g:[g],p=0;p<f.length;p++){var m=(r=f[p]).container;(n=m?i[m]:i)&&n.showscale&&((t=l(n.colorbar))._id="cb"+i.uid+(h&&m?"-"+m:""),t._traceIndex=i.index,t._propPrefix=(m?m+".":"")+"colorbar.",t._meta=i._meta,c(),s.push(t))}}for(var v in a._colorAxes)if((n=a[v]).showscale){var b=a._colorAxes[v];(t=l(n.colorbar))._id="cb"+v,t._propPrefix=v+".colorbar.",t._meta=a._meta,r={min:"cmin",max:"cmax"},"heatmap"!==b[0]&&(i=b[1],r.calc=i._module.colorbar.calc),c(),s.push(t)}return s}(e),(function(e){return e._id}));t.enter().append("g").attr("class",(function(e){return e._id})).classed(C_.colorbar,!0),t.each((function(t){var n=e_.select(this);o_.ensureSingle(n,"rect",C_.cbbg),o_.ensureSingle(n,"g",C_.cbfills),o_.ensureSingle(n,"g",C_.cblines),o_.ensureSingle(n,"g",C_.cbaxis,(function(e){e.classed(C_.crisp,!0)})),o_.ensureSingle(n,"g",C_.cbtitleunshift,(function(e){e.append("g").classed(C_.cbtitle,!0)})),o_.ensureSingle(n,"rect",C_.cboutline);var i=function(e,t,n){var i="v"===t.orientation,r=t.len,a=t.lenmode,o=t.thickness,s=t.thicknessmode,l=t.outlinewidth,c=t.borderwidth,u=t.bgcolor,d=t.xanchor,g=t.yanchor,h=t.xpad,f=t.ypad,p=t.x,m=i?t.y:1-t.y,v=n._fullLayout,b=v._size,y=t._fillcolor,I=t._line,C=t.title,x=C.side,B=t._zrange||e_.extent(("function"==typeof y?y:I.color).domain()),A="function"==typeof I.color?I.color:function(){return I.color},F="function"==typeof y?y:function(){return y},Q=t._levels,U=function(e,t,n){var i,r,a=t._levels,o=[],s=[],l=a.end+a.size/100,c=a.size,u=1.001*n[0]-.001*n[1],d=1.001*n[1]-.001*n[0];for(r=0;r<1e5&&(i=a.start+r*c,!(c>0?i>=l:i<=l));r++)i>u&&i<d&&o.push(i);if(t._fillgradient)s=[0];else if("function"==typeof t._fillcolor){var g=t._filllevels;if(g)for(l=g.end+g.size/100,c=g.size,r=0;r<1e5&&(i=g.start+r*c,!(c>0?i>=l:i<=l));r++)i>n[0]&&i<n[1]&&s.push(i);else s=o.map((function(e){return e-a.size/2})),s.push(s[s.length-1]+a.size)}else t._fillcolor&&"string"==typeof t._fillcolor&&(s=[0]);a.size<0&&(o.reverse(),s.reverse());return{line:o,fill:s}}(0,t,B),w=U.fill,G=U.line,R=Math.round(o*("fraction"===s?i?b.w:b.h:1)),L=R/(i?b.w:b.h),S=Math.round(r*("fraction"===a?i?b.h:b.w:1)),V=S/(i?b.h:b.w),Z=Math.round(i?p*b.w+h:m*b.h+f),k={center:.5,right:1}[d]||0,E={top:1,middle:.5}[g]||0,X=i?p-k*L:m-E*L,N=i?m-E*V:p-k*V,W=Math.round(i?b.h*(1-N):b.w*N);t._lenFrac=V,t._thickFrac=L,t._uFrac=X,t._vFrac=N;var _=t._axis=function(e,t,n){var i=e._fullLayout,r="v"===t.orientation,a={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:r?"right":"bottom",position:1},o=r?"y":"x",s={type:"linear",_id:o+t._id},l={letter:o,font:i.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:i.calendar};function c(e,t){return o_.coerce(a,s,v_,e,t)}return p_(a,s,c,l,i),m_(a,s,c,l),s}(n,t,B);_.position=L+(i?p+h/b.w:m+f/b.h);var T=-1!==["top","bottom"].indexOf(x);i&&T&&(_.title.side=x,_.titlex=p+h/b.w,_.titley=N+("top"===C.side?V-f/b.h:f/b.h));i||T||(_.title.side=x,_.titley=m+f/b.h,_.titlex=N+h/b.w);if(I.color&&"auto"===t.tickmode){_.tickmode="linear",_.tick0=Q.start;var M=Q.size,H=o_.constrain(S/50,4,15)+1,Y=(B[1]-B[0])/((t.nticks||H)*M);if(Y>1){var D=Math.pow(10,Math.floor(Math.log(Y)/Math.LN10));M*=D*o_.roundUp(Y/D,[2,5,10]),(Math.abs(Q.start)/Q.size+1e-6)%1<2e-6&&(_.tick0=0)}_.dtick=M}_.domain=i?[N+f/b.h,N+V-f/b.h]:[N+h/b.w,N+V-h/b.w],_.setScale(),e.attr("transform",s_(Math.round(b.l),Math.round(b.t)));var z,O=e.select("."+C_.cbtitleunshift).attr("transform",s_(-Math.round(b.l),-Math.round(b.t))),J=_.ticklabelposition,j=_.title.font.size,P=e.select("."+C_.cbaxis),K=0,q=0;function $(i,r){var a={propContainer:_,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:v._dfltTitle.colorbar,containerGroup:e.select("."+C_.cbtitle)},o="h"===i.charAt(0)?i.substr(1):"h"+i;e.selectAll("."+o+",."+o+"-math-group").remove(),g_.draw(n,i,l_(a,r||{}))}function ee(){var e,t;(i&&T||!i&&!T)&&("top"===x&&(e=h+b.l+b.w*p,t=f+b.t+b.h*(1-N-V)+3+.75*j),"bottom"===x&&(e=h+b.l+b.w*p,t=f+b.t+b.h*(1-N)-3-.25*j),"right"===x&&(t=f+b.t+b.h*m+3+.75*j,e=h+b.l+b.w*N),$(_._id+"title",{attributes:{x:e,y:t,"text-anchor":i?"start":"middle"}}))}function te(){if(i&&!T||!i&&T){var e,r,a=_.position||0,o=_._offset+_._length/2;if("right"===x)r=o,e=b.l+b.w*a+10+j*(_.showticklabels?1:.5);else if(e=o,"bottom"===x&&(r=b.t+b.h*a+10+(-1===J.indexOf("inside")?_.tickfont.size:0)+("intside"!==_.ticks&&t.ticklen||0)),"top"===x){var s=C.text.split("<br>").length;r=b.t+b.h*a+10-R-b_*j*s}$((i?"h":"v")+_._id+"title",{avoid:{selection:e_.select(n).selectAll("g."+_._id+"tick"),side:x,offsetTop:i?0:b.t,offsetLeft:i?b.l:0,maxShift:i?v.width:v.height},attributes:{x:e,y:r,"text-anchor":"middle"},transform:{rotate:i?-90:0,offset:0}})}}function ne(){if(!i&&!T||i&&T){var r,a=e.select("."+C_.cbtitle),o=a.select("text"),s=[-l/2,l/2],c=a.select(".h"+_._id+"title-math-group").node(),u=15.6;if(o.node()&&(u=parseInt(o.node().style.fontSize,10)*b_),c?(r=u_.bBox(c),q=r.width,(K=r.height)>u&&(s[1]-=(K-u)/2)):o.node()&&!o.classed(C_.jsPlaceholder)&&(r=u_.bBox(o.node()),q=r.width,K=r.height),i){if(K){if(K+=5,"top"===x)_.domain[1]-=K/b.h,s[1]*=-1;else{_.domain[0]+=K/b.h;var d=h_.lineCount(o);s[1]+=(1-d)*u}a.attr("transform",s_(s[0],s[1])),_.setScale()}}else q&&("right"===x&&(_.domain[0]+=(q+j/2)/b.w),a.attr("transform",s_(s[0],s[1])),_.setScale())}e.selectAll("."+C_.cbfills+",."+C_.cblines).attr("transform",i?s_(0,Math.round(b.h*(1-_.domain[1]))):s_(Math.round(b.w*_.domain[0]),0)),P.attr("transform",i?s_(0,Math.round(-b.t)):s_(Math.round(-b.l),0));var g=e.select("."+C_.cbfills).selectAll("rect."+C_.cbfill).attr("style","").data(w);g.enter().append("rect").classed(C_.cbfill,!0).style("stroke","none"),g.exit().remove();var h=B.map(_.c2p).map(Math.round).sort((function(e,t){return e-t}));g.each((function(e,r){var a=[0===r?B[0]:(w[r]+w[r-1])/2,r===w.length-1?B[1]:(w[r]+w[r+1])/2].map(_.c2p).map(Math.round);i&&(a[1]=o_.constrain(a[1]+(a[1]>a[0])?1:-1,h[0],h[1]));var o=e_.select(this).attr(i?"x":"y",Z).attr(i?"y":"x",e_.min(a)).attr(i?"width":"height",Math.max(R,2)).attr(i?"height":"width",Math.max(e_.max(a)-e_.min(a),2));if(t._fillgradient)u_.gradient(o,n,t._id,i?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var s=F(e).replace("e-","");o.attr("fill",t_(s).toHexString())}}));var f=e.select("."+C_.cblines).selectAll("path."+C_.cbline).data(I.color&&I.width?G:[]);f.enter().append("path").classed(C_.cbline,!0),f.exit().remove(),f.each((function(e){var t=Z,n=Math.round(_.c2p(e))+I.width/2%1;e_.select(this).attr("d","M"+(i?t+","+n:n+","+t)+(i?"h":"v")+R).call(u_.lineGroupStyle,I.width,A(e),I.dash)})),P.selectAll("g."+_._id+"tick,path").remove();var p=Z+R+(l||0)/2-("outside"===t.ticks?1:0),m=r_.calcTicks(_),v=r_.getTickSigns(_)[2];return r_.drawTicks(n,_,{vals:"inside"===_.ticks?r_.clipEnds(_,m):m,layer:P,path:r_.makeTickPath(_,p,v),transFn:r_.makeTransTickFn(_)}),r_.drawLabels(n,_,{vals:m,layer:P,transFn:r_.makeTransTickLabelFn(_),labelFns:r_.makeLabelFns(_,p)})}function ie(){var y,I=R+l/2;-1===J.indexOf("inside")&&(y=u_.bBox(P.node()),I+=i?y.width:y.height),z=O.select("text");var B=0,A=i&&"top"===x,F=!i&&"right"===x,Q=0;if(z.node()&&!z.classed(C_.jsPlaceholder)){var U,w=O.select(".h"+_._id+"title-math-group").node();w&&(i&&T||!i&&!T)?(B=(y=u_.bBox(w)).width,U=y.height):(B=(y=u_.bBox(O.node())).right-b.l-(i?Z:W),U=y.bottom-b.t-(i?W:Z),i||"top"!==x||(I+=y.height,Q=y.height)),F&&(z.attr("transform",s_(B/2+j/2,0)),B*=2),I=Math.max(I,i?B:U)}var G=2*(i?h:f)+I+c+l/2,L=0;!i&&C.text&&"bottom"===g&&m<=0&&(G+=L=G/2,Q+=L),v._hColorbarMoveTitle=L,v._hColorbarMoveCBTitle=Q;var V=c+l;e.select("."+C_.cbbg).attr("x",(i?Z:W)-V/2-(i?h:0)).attr("y",(i?W:Z)-(i?S:f+Q-L)).attr(i?"width":"height",Math.max(G-L,2)).attr(i?"height":"width",Math.max(S+V,2)).call(d_.fill,u).call(d_.stroke,t.bordercolor).style("stroke-width",c);var X=F?Math.max(B-10,0):0;if(e.selectAll("."+C_.cboutline).attr("x",(i?Z:W+h)+X).attr("y",(i?W+f-S:Z)+(A?K:0)).attr(i?"width":"height",Math.max(R,2)).attr(i?"height":"width",Math.max(S-(i?2*f+K:2*h+X),2)).call(d_.stroke,t.outlinecolor).style({fill:"none","stroke-width":l}),e.attr("transform",s_(b.l-(i?k*G:0),b.t-(i?0:(1-E)*G-Q))),!i&&(c||t_(u).getAlpha()&&!t_.equals(v.paper_bgcolor,u))){var N=P.selectAll("text"),M=N[0].length,H=e.select("."+C_.cbbg).node(),Y=u_.bBox(H),D=u_.getTranslate(e),q=2;N.each((function(e,t){var n=0,i=M-1;if(t===n||t===i){var r,a=u_.bBox(this),o=u_.getTranslate(this);if(t===i){var s=a.right+o.x;(r=Y.right+D.x+W-c-q+p-s)>0&&(r=0)}else if(t===n){var l=a.left+o.x;(r=Y.left+D.x+W+c+q-l)<0&&(r=0)}r&&(M<3?this.setAttribute("transform","translate("+r+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}}))}var $={},ee=y_[d],te=I_[d],ne=y_[g],ie=I_[g],re=G-R;i?("pixels"===a?($.y=m,$.t=S*ne,$.b=S*ie):($.t=$.b=0,$.yt=m+r*ne,$.yb=m-r*ie),"pixels"===s?($.x=p,$.l=G*ee,$.r=G*te):($.l=re*ee,$.r=re*te,$.xl=p-o*ee,$.xr=p+o*te)):("pixels"===a?($.x=p,$.l=S*ee,$.r=S*te):($.l=$.r=0,$.xl=p+r*ee,$.xr=p-r*te),"pixels"===s?($.y=1-m,$.t=G*ne,$.b=G*ie):($.t=re*ne,$.b=re*ie,$.yt=m-o*ne,$.yb=m+o*ie)),n_.autoMargin(n,t._id,$)}return o_.syncOrAsync([n_.previousPromises,ee,ne,te,n_.previousPromises,ie],n)}(n,t,e);i&&i.then&&(e._promises||[]).push(i),e._context.edits.colorbarPosition&&function(e,t,n){var i,r,a,o="v"===t.orientation,s=n._fullLayout._size;a_.init({element:e.node(),gd:n,prepFn:function(){i=e.attr("transform"),c_(e)},moveFn:function(n,l){e.attr("transform",i+s_(n,l)),r=a_.align((o?t._uFrac:t._vFrac)+n/s.w,o?t._thickFrac:t._lenFrac,0,1,t.xanchor),a=a_.align((o?t._vFrac:1-t._uFrac)-l/s.h,o?t._lenFrac:t._thickFrac,0,1,t.yanchor);var c=a_.getCursor(r,a,t.xanchor,t.yanchor);c_(e,c)},doneFn:function(){if(c_(e),void 0!==r&&void 0!==a){var i={};i[t._propPrefix+"x"]=r,i[t._propPrefix+"y"]=a,void 0!==t._traceIndex?i_.call("_guiRestyle",n,i,t._traceIndex):i_.call("_guiRelayout",n,i)}}})}(n,t,e)})),t.exit().each((function(t){n_.autoMargin(e,t._id)})).remove(),t.order()}},B_={moduleType:"component",name:"colorbar",attributes:ov,supplyDefaults:Kv,draw:x_.draw,hasColorbar:yv},A_={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},F_={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}},Q_=hg,U_=ws.exports,w_=U_.extendFlat,G_=U_.extendDeep;function R_(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}var L_=function(e,t){var n,i,r=e.data,a=e.layout,o=G_([],r),s=G_({},a,R_(t.tileClass)),l=e._context||{};if(t.width&&(s.width=t.width),t.height&&(s.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){s.annotations=[];var c=Object.keys(s);for(n=0;n<c.length;n++)i=c[n],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(s[c[n]].title={text:""});for(n=0;n<o.length;n++){var u=o[n];u.showscale=!1,u.marker&&(u.marker.showscale=!1),Q_.traceIs(u,"pie-like")&&(u.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)s.annotations.push(t.annotations[n]);var d=Object.keys(s).filter((function(e){return e.match(/^scene\d*$/)}));if(d.length){var g={};for("thumbnail"===t.tileClass&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<d.length;n++){var h=s[d[n]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),w_(h.xaxis,g),w_(h.yaxis,g),w_(h.zaxis,g),h._scene=null}}var f=document.createElement("div");t.tileClass&&(f.className=t.tileClass);var p={gd:f,td:f,layout:s,data:o,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return"transparent"!==t.setBackground&&(p.config.setBackground=t.setBackground||"opaque"),p.gd.defaultLayout=R_(t.tileClass),p},S_=Yf.exports.EventEmitter,V_=hg,Z_=ws.exports,k_=uG,E_=L_,X_=IG,N_=AG;var W_=function(e,t){var n=new S_,i=E_(e,{format:"png"}),r=i.gd;r.style.position="absolute",r.style.left="-5000px",document.body.appendChild(r);var a=k_.getRedrawFunc(r);return V_.call("_doPlot",r,i.data,i.layout,i.config).then(a).then((function(){var e=k_.getDelay(r._fullLayout);setTimeout((function(){var e=X_(r),i=document.createElement("canvas");i.id=Z_.randstr(),(n=N_({format:t.format,width:r._fullLayout.width,height:r._fullLayout.height,canvas:i,emitter:n,svg:e})).clean=function(){r&&document.body.removeChild(r)}}),e)})).catch((function(e){n.emit("error",e)})),n},__=uG,T_={getDelay:__.getDelay,getRedrawFunc:__.getRedrawFunc,clone:L_,toSVG:IG,svgToImg:AG,toImage:W_,downloadImage:rR};!function(e){e.version=Us.version;for(var t=hg,n=e.register=t.register,i=Tf,r=Object.keys(i),a=0;a<r.length;a++){var o=r[a];"_"!==o.charAt(0)&&(e[o]=i[o]),n({moduleType:"apiMethod",name:o,fn:i[o]})}n(jV),n([PV,SA,ak,Ak,Ok,cE,iX,jX,XN,pW,UW,$W,vb,B_,EQ]),n([A_,F_]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(n(window.PlotlyLocales),delete window.PlotlyLocales),e.Icons=XA;var s=SA,l=Fp.exports;e.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},e.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},e.Snapshot=T_,e.PlotSchema=gp}(Qs);var M_=Qs,H_={TEXTPAD:3,eventDataKeys:["value","label"]},Y_=TR,D_=Ym,z_=BR.hovertemplateAttrs,O_=BR.texttemplateAttrs,J_=gv,j_=Cd,P_=H_,K_=ih.pattern,q_=Ud.extendFlat,$_=j_({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),eT=q_({},Y_.marker.line.width,{dflt:0}),tT=q_({width:eT,editType:"calc"},J_("marker.line")),nT=q_({line:tT,editType:"calc"},J_("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:K_}),iT={x:Y_.x,x0:Y_.x0,dx:Y_.dx,y:Y_.y,y0:Y_.y0,dy:Y_.dy,xperiod:Y_.xperiod,yperiod:Y_.yperiod,xperiod0:Y_.xperiod0,yperiod0:Y_.yperiod0,xperiodalignment:Y_.xperiodalignment,yperiodalignment:Y_.yperiodalignment,xhoverformat:D_("x"),yhoverformat:D_("y"),text:Y_.text,texttemplate:O_({editType:"plot"},{keys:P_.eventDataKeys}),hovertext:Y_.hovertext,hovertemplate:z_({},{keys:P_.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:q_({},$_,{description:"Sets the font used for `text`."}),insidetextfont:q_({},$_,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:q_({},$_,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:q_({},Y_.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:nT,offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},selected:{marker:{opacity:Y_.selected.marker.opacity,color:Y_.selected.marker.color,editType:"style"},textfont:Y_.selected.textfont,editType:"style"},unselected:{marker:{opacity:Y_.unselected.marker.opacity,color:Y_.unselected.marker.color,editType:"style"},textfont:Y_.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}},rT=iT,aT=Ym,oT=BR.hovertemplateAttrs,sT=BR.texttemplateAttrs,lT=Cd,cT=function(e,t){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",e,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",t?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",e,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",e,"axis bin.","Default behavior: If `nbins"+e+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+e+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",t?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}},uT={eventDataKeys:["binNumber"]},dT=Ud.extendFlat,gT={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:aT("x"),yhoverformat:aT("y"),text:dT({},rT.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:dT({},rT.hovertext,{description:"Same as `text`."}),orientation:rT.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:cT("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:cT("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:oT({},{keys:uT.eventDataKeys}),texttemplate:sT({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:dT({},rT.textposition,{arrayOk:!1}),textfont:lT({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:lT({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:lT({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:rT.insidetextanchor,textangle:rT.textangle,cliponaxis:rT.cliponaxis,constraintext:rT.constraintext,marker:rT.marker,offsetgroup:rT.offsetgroup,alignmentgroup:rT.alignmentgroup,selected:rT.selected,unselected:rT.unselected,_deprecated:{bardir:rT._deprecated.bardir}},hT={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}},fT=Hd.exports,pT=Nm.hasColorscale,mT=ab,vT=ws.exports.coercePattern,bT=function(e,t,n,i,r){var a=n("marker.color",i),o=pT(e,"marker");o&&mT(e,t,r,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",fT.defaultLine),pT(e,"marker.line")&&mT(e,t,r,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),vT(n,"marker.pattern",a,o),n("selected.marker.color"),n("unselected.marker.color")},yT=ws.exports,IT=(Hd.exports,XQ.getAxisGroup),CT=yT.coerceFont;function xT(e,t,n,i){var r=t.orientation,a=t[{v:"x",h:"y"}[r]+"axis"],o=IT(n,a)+r,s=n._alignmentOpts||{},l=i("alignmentgroup"),c=s[o];c||(c=s[o]={});var u=c[l];u?u.traces.push(t):u=c[l]={traces:[t],alignmentIndex:Object.keys(c).length,offsetGroups:{}};var d=i("offsetgroup"),g=u.offsetGroups,h=g[d];d&&(h||(h=g[d]={offsetIndex:Object.keys(g).length}),t._offsetIndex=h.offsetIndex)}function BT(e,t,n,i,r,a){var o=!(!1===(a=a||{}).moduleHasSelected),s=!(!1===a.moduleHasUnselected),l=!(!1===a.moduleHasConstrain),c=!(!1===a.moduleHasCliponaxis),u=!(!1===a.moduleHasTextangle),d=!(!1===a.moduleHasInsideanchor),g=!!a.hasPathbar,h=Array.isArray(r)||"auto"===r,f=h||"inside"===r,p=h||"outside"===r;if(f||p){var m=CT(i,"textfont",n.font),v=yT.extendFlat({},m),b=!(e.textfont&&e.textfont.color);if(b&&delete v.color,CT(i,"insidetextfont",v),g){var y=yT.extendFlat({},m);b&&delete y.color,CT(i,"pathbar.textfont",y)}p&&CT(i,"outsidetextfont",m),o&&i("selected.textfont.color"),s&&i("unselected.textfont.color"),l&&i("constraintext"),c&&i("cliponaxis"),u&&i("textangle"),i("texttemplate")}f&&d&&i("insidetextanchor")}var AT=xT,FT=BT,QT=hg,UT=ws.exports,wT=Hd.exports,GT=FT,RT=bT,LT=gT,ST=ws.exports,VT=Sp,ZT=hg.traceIs,kT=AT,ET=ST.nestedProperty,XT=XQ.getAxisGroup,NT=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],WT=["x","y"],_T=hg,TT=Im.exports,MT=ws.exports,HT=hT,YT=ws.exports,DT=Yu,zT={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,i){var r=i[t];return DT(r)?(r=Number(r),n[e]+=r,r):0},avg:function(e,t,n,i,r){var a=i[t];return DT(a)&&(a=Number(a),n[e]+=a,r[e]++),0},min:function(e,t,n,i){var r=i[t];if(DT(r)){if(r=Number(r),!DT(n[e]))return n[e]=r,r;if(n[e]>r){var a=r-n[e];return n[e]=r,a}}return 0},max:function(e,t,n,i){var r=i[t];if(DT(r)){if(r=Number(r),!DT(n[e]))return n[e]=r,r;if(n[e]<r){var a=r-n[e];return n[e]=r,a}}return 0}},OT=Du.ONEAVGYEAR,JT=Du.ONEAVGMONTH,jT=Du.ONEDAY,PT=Du.ONEHOUR,KT=Du.ONEMIN,qT=Du.ONESEC,$T=Im.exports.tickIncrement;function eM(e,t,n,i){if(e*t<=0)return 1/0;for(var r=Math.abs(t-e),a="date"===n.type,o=tM(r,a),s=0;s<10;s++){var l=tM(80*o,a);if(o===l)break;if(!nM(l,e,t,a,n,i))break;o=l}return o}function tM(e,t){return t&&e>qT?e>jT?e>1.1*OT?OT:e>1.1*JT?JT:jT:e>PT?PT:e>KT?KT:qT:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function nM(e,t,n,i,r,a){if(i&&e>jT){var o=iM(t,r,a),s=iM(n,r,a),l=e===OT?0:1;return o[l]!==s[l]}return Math.floor(n/e)-Math.floor(t/e)>.1}function iM(e,t,n){var i=t.c2d(e,OT,n).split("-");return""===i[0]&&(i.unshift(),i[0]="-"+i[0]),i}var rM=Yu,aM=ws.exports,oM=hg,sM=Im.exports,lM=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;YT.mergeArray(t.text,e,"tx"),YT.mergeArray(t.hovertext,e,"htx");var i=t.marker;if(i){YT.mergeArray(i.opacity,e,"mo",!0),YT.mergeArray(i.color,e,"mc");var r=i.line;r&&(YT.mergeArray(r.color,e,"mlc"),YT.mergeArrayCastPositive(r.width,e,"mlw"))}},cM=zT,uM={percent:function(e,t){for(var n=e.length,i=100/t,r=0;r<n;r++)e[r]*=i},probability:function(e,t){for(var n=e.length,i=0;i<n;i++)e[i]/=t},density:function(e,t,n,i){var r=e.length;i=i||1;for(var a=0;a<r;a++)e[a]*=n[a]*i},"probability density":function(e,t,n,i){var r=e.length;i&&(t/=i);for(var a=0;a<r;a++)e[a]*=n[a]/t}},dM=function(e,t){for(var n=e.length,i=0,r=0;r<n;r++)t[r]?(e[r]/=t[r],i+=e[r]):e[r]=null;return i},gM=function(e,t,n,i,r){var a,o,s=-1.1*t,l=-.1*t,c=e-l,u=n[0],d=n[1],g=Math.min(eM(u+l,u+c,i,r),eM(d+l,d+c,i,r)),h=Math.min(eM(u+s,u+l,i,r),eM(d+s,d+l,i,r));if(g>h&&h<Math.abs(d-u)/4e3?(a=g,o=!1):(a=Math.min(g,h),o=!0),"date"===i.type&&a>jT){var f=a===OT?1:6,p=a===OT?"M12":"M1";return function(t,n){var a=i.c2d(t,OT,r),s=a.indexOf("-",f);s>0&&(a=a.substr(0,s));var l=i.d2c(a,0,r);if(l<t){var c=$T(l,p,!1,r);(l+c)/2<t+e&&(l=c)}return n&&o?$T(l,p,!0,r):l}}return function(t,n){var i=a*Math.round(t/a);return i+a/10<t&&i+.9*a<t+e&&(i+=a),n&&o&&(i-=a),i}};function hM(e,t,n,i,r){var a,o,s,l,c,u,d,g=i+"bins",h=e._fullLayout,f=t["_"+i+"bingroup"],p=h._histogramBinOpts[f],m="overlay"===h.barmode,v=function(e){return n.r2c(e,0,l)},b=function(e){return n.c2r(e,0,l)},y="date"===n.type?function(e){return e||0===e?aM.cleanDate(e,null,l):null}:function(e){return rM(e)?Number(e):null};function I(e,t,n){t[e+"Found"]?(t[e]=y(t[e]),null===t[e]&&(t[e]=n[e])):(u[e]=t[e]=n[e],aM.nestedProperty(o[0],g+"."+e).set(n[e]))}if(t["_"+i+"autoBinFinished"])delete t["_"+i+"autoBinFinished"];else{o=p.traces;var C=[],x=!0,B=!1,A=!1;for(a=0;a<o.length;a++)if((s=o[a]).visible){var F=p.dirs[a];c=s["_"+F+"pos0"]=n.makeCalcdata(s,F),C=aM.concat(C,c),delete s["_"+i+"autoBinFinished"],!0===t.visible&&(x?x=!1:(delete s._autoBin,s["_"+i+"autoBinFinished"]=1),oM.traceIs(s,"2dMap")&&(B=!0),"histogram2dcontour"===s.type&&(A=!0))}l=o[0][i+"calendar"];var Q=sM.autoBin(C,n,p.nbins,B,l,p.sizeFound&&p.size),U=o[0]._autoBin={};if(u=U[p.dirs[0]]={},A&&(p.size||(Q.start=b(sM.tickIncrement(v(Q.start),Q.size,!0,l))),void 0===p.end&&(Q.end=b(sM.tickIncrement(v(Q.end),Q.size,!1,l)))),m&&!oM.traceIs(t,"2dMap")&&0===Q._dataSpan&&"category"!==n.type&&"multicategory"!==n.type){if(r)return[Q,c,!0];Q=function(e,t,n,i,r){var a,o,s,l=e._fullLayout,c=function(e,t){for(var n=t.xaxis,i=t.yaxis,r=t.orientation,a=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===r&&l.xaxis===n&&l.yaxis===i&&a.push(l)}return a}(e,t),u=!1,d=1/0,g=[t];for(a=0;a<c.length;a++)if((o=c[a])===t)u=!0;else if(u){var h=hM(e,o,n,i,!0),f=h[0],p=h[2];o["_"+i+"autoBinFinished"]=1,o["_"+i+"pos0"]=h[1],p?g.push(o):d=Math.min(d,f.size)}else s=l._histogramBinOpts[o["_"+i+"bingroup"]],d=Math.min(d,s.size||o[r].size);var m=new Array(g.length);for(a=0;a<g.length;a++)for(var v=g[a]["_"+i+"pos0"],b=0;b<v.length;b++)if(void 0!==v[b]){m[a]=v[b];break}isFinite(d)||(d=aM.distinctVals(m).minDiff);for(a=0;a<g.length;a++){var y=(o=g[a])[i+"calendar"],I={start:n.c2r(m[a]-d/2,0,y),end:n.c2r(m[a]+d/2,0,y),size:d};o._input[r]=o[r]=I,(s=l._histogramBinOpts[o["_"+i+"bingroup"]])&&aM.extendFlat(s,I)}return t[r]}(e,t,n,i,g)}(d=s.cumulative||{}).enabled&&"include"!==d.currentbin&&("decreasing"===d.direction?Q.start=b(sM.tickIncrement(v(Q.start),Q.size,!0,l)):Q.end=b(sM.tickIncrement(v(Q.end),Q.size,!1,l))),p.size=Q.size,p.sizeFound||(u.size=Q.size,aM.nestedProperty(o[0],g+".size").set(Q.size)),I("start",p,Q),I("end",p,Q)}c=t["_"+i+"pos0"],delete t["_"+i+"pos0"];var w=t._input[g]||{},G=aM.extendFlat({},p),R=p.start,L=n.r2l(w.start),S=void 0!==L;if((p.startFound||S)&&L!==n.r2l(R)){var V=S?L:aM.aggNums(Math.min,null,c),Z={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:p.size,tick0:R,calendar:l,range:[V,sM.tickIncrement(V,p.size,!1,l)].map(n.l2r)},k=sM.tickFirst(Z);k>n.r2l(V)&&(k=sM.tickIncrement(k,p.size,!0,l)),G.start=n.l2r(k),S||aM.nestedProperty(t,g+".start").set(G.start)}var E=p.end,X=n.r2l(w.end),N=void 0!==X;if((p.endFound||N)&&X!==n.r2l(E)){var W=N?X:aM.aggNums(Math.max,null,c);G.end=n.l2r(W),N||aM.nestedProperty(t,g+".start").set(G.end)}var _="autobin"+i;return!1===t._input[_]&&(t._input[g]=aM.extendFlat({},t[g]||{}),delete t._input[_],delete t[_]),[G,c]}var fM={calc:function(e,t){var n,i,r,a,o=[],s=[],l="h"===t.orientation,c=sM.getFromId(e,l?t.yaxis:t.xaxis),u=l?"y":"x",d={x:"y",y:"x"}[u],g=t[u+"calendar"],h=t.cumulative,f=hM(e,t,c,u),p=f[0],m=f[1],v="string"==typeof p.size,b=[],y=v?b:p,I=[],C=[],x=[],B=0,A=t.histnorm,F=t.histfunc,Q=-1!==A.indexOf("density");h.enabled&&Q&&(A=A.replace(/ ?density$/,""),Q=!1);var U,w="max"===F||"min"===F?null:0,G=cM.count,R=uM[A],L=!1,S=function(e){return c.r2c(e,0,g)};for(aM.isArrayOrTypedArray(t[d])&&"count"!==F&&(U=t[d],L="avg"===F,G=cM[F]),n=S(p.start),r=S(p.end)+(n-sM.tickIncrement(n,p.size,!1,g))/1e6;n<r&&o.length<1e6&&(i=sM.tickIncrement(n,p.size,!1,g),o.push((n+i)/2),s.push(w),x.push([]),b.push(n),Q&&I.push(1/(i-n)),L&&C.push(0),!(i<=n));)n=i;b.push(n),v||"date"!==c.type||(y={start:S(y.start),end:S(y.end),size:y.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var V=t["_"+u+"bingroup"],Z={leftGap:1/0,rightGap:1/0};V&&(e._fullLayout._roundFnOpts[V]||(e._fullLayout._roundFnOpts[V]=Z),Z=e._fullLayout._roundFnOpts[V]);var k,E=s.length,X=!0,N=Z.leftGap,W=Z.rightGap,_={};for(n=0;n<m.length;n++){var T=m[n];(a=aM.findBin(T,y))>=0&&a<E&&(B+=G(a,n,s,U,C),X&&x[a].length&&T!==m[x[a][0]]&&(X=!1),x[a].push(n),_[n]=a,N=Math.min(N,T-b[a]),W=Math.min(W,b[a+1]-T))}Z.leftGap=N,Z.rightGap=W,X||(k=function(t,n){return function(){var i=e._fullLayout._roundFnOpts[V];return gM(i.leftGap,i.rightGap,b,c,g)(t,n)}}),L&&(B=dM(s,C)),R&&R(s,B,I),h.enabled&&function(e,t,n){var i,r,a;function o(t){a=e[t],e[t]/=2}function s(t){r=e[t],e[t]=a+r/2,a+=r}if("half"===n)if("increasing"===t)for(o(0),i=1;i<e.length;i++)s(i);else for(o(e.length-1),i=e.length-2;i>=0;i--)s(i);else if("increasing"===t){for(i=1;i<e.length;i++)e[i]+=e[i-1];"exclude"===n&&(e.unshift(0),e.pop())}else{for(i=e.length-2;i>=0;i--)e[i]+=e[i+1];"exclude"===n&&(e.push(0),e.shift())}}(s,h.direction,h.currentbin);var M=Math.min(o.length,s.length),H=[],Y=0,D=M-1;for(n=0;n<M;n++)if(s[n]){Y=n;break}for(n=M-1;n>=Y;n--)if(s[n]){D=n;break}for(n=Y;n<=D;n++)if(rM(o[n])&&rM(s[n])){var z={p:o[n],s:s[n],b:0};h.enabled||(z.pts=x[n],X?z.ph0=z.ph1=x[n].length?m[x[n][0]]:o[n]:(t._computePh=!0,z.ph0=k(b[n]),z.ph1=k(b[n+1],!0))),H.push(z)}return 1===H.length&&(H[0].width1=sM.tickIncrement(H[0].p,p.size,!1,g)-H[0].p),lM(H,t),aM.isArrayOrTypedArray(t.selectedpoints)&&aM.tagSelected(H,t,_),H},calcAllAutoBins:hM},pM=bM,mM=ws.exports.distinctVals,vM=Du.BADNUM;function bM(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,i=[],r=0;r<e.length;r++){for(var a=e[r],o=0;o<a.length;o++){var s=a[o];s.p!==vM&&i.push(s.p)}a[0]&&a[0].width1&&(n=Math.min(a[0].width1,n))}this.positions=i;var l=mM(i);this.distinctPositions=l.vals,1===l.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(l.minDiff,n);var c=(t.posAxis||{}).type;"category"!==c&&"multicategory"!==c||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}bM.prototype.put=function(e,t){var n=this.getLabel(e,t),i=this.bins[n]||0;return this.bins[n]=i+t,i},bM.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},bM.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))};var yM=Yu,IM=ws.exports.isArrayOrTypedArray,CM=Du.BADNUM,xM=hg,BM=Im.exports,AM=XQ.getAxisGroup,FM=pM;function QM(e,t,n,i,r){if(i.length){var a,o,s,l;switch(function(e,t){var n,i;for(n=0;n<t.length;n++){var r,a=t[n],o=a[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,c="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(IM(s)){for(i=0;i<Math.min(s.length,a.length);i++)r=c(s[i],0,l),yM(r)?(a[i].b=+r,a[i].hasB=1):a[i].b=0;for(;i<a.length;i++)a[i].b=0}else{r=c(s,0,l);var u=yM(r);for(r=u?r:0,i=0;i<a.length;i++)a[i].b=r,u&&(a[i].hasB=1)}}}(n,i),r.mode){case"overlay":UM(t,n,i,r);break;case"group":for(a=[],o=[],s=0;s<i.length;s++)void 0===(l=i[s])[0].trace.offset?o.push(l):a.push(l);o.length&&function(e,t,n,i,r){var a=new FM(i,{posAxis:t,sepNegVal:!1,overlapNoMerge:!r.norm});(function(e,t,n,i){for(var r=e._fullLayout,a=n.positions,o=n.distinctPositions,s=n.minDiff,l=n.traces,c=l.length,u=a.length!==o.length,d=s*(1-i.gap),g=AM(r,t._id)+l[0][0].trace.orientation,h=r._alignmentOpts[g]||{},f=0;f<c;f++){var p,m,v=l[f],b=v[0].trace,y=h[b.alignmentgroup]||{},I=Object.keys(y.offsetGroups||{}).length,C=(p=I?d/I:u?d/c:d)*(1-(i.groupgap||0));m=I?((2*b._offsetIndex+1-I)*p-C)/2:u?((2*f+1-c)*p-C)/2:-C/2;var x=v[0].t;x.barwidth=C,x.poffset=m,x.bargroupwidth=d,x.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,GM(n),RM(t,n),LM(t,n,u)})(e,t,a,r),function(e,t){for(var n=e.traces,i=0;i<n.length;i++){var r=n[i];if(void 0===r[0].trace.base)for(var a=new FM([r],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<r.length;o++){var s=r[o];if(s.p!==CM){var l=a.put(s.p,s.b+s.s);l&&(s.b=l)}}}}(a,t),r.norm?(VM(a),ZM(n,a,r)):SM(n,a)}(e,t,n,o,r),a.length&&UM(t,n,a,r);break;case"stack":case"relative":for(a=[],o=[],s=0;s<i.length;s++)void 0===(l=i[s])[0].trace.base?o.push(l):a.push(l);o.length&&function(e,t,n,i,r){var a=new FM(i,{posAxis:t,sepNegVal:"relative"===r.mode,overlapNoMerge:!(r.norm||"stack"===r.mode||"relative"===r.mode)});wM(t,a,r),function(e,t,n){var i,r,a,o,s,l,c=kM(e),u=t.traces;for(o=0;o<u.length;o++)if("funnel"===(r=(i=u[o])[0].trace).type)for(s=0;s<i.length;s++)(l=i[s]).s!==CM&&t.put(l.p,-.5*l.s);for(o=0;o<u.length;o++){a="funnel"===(r=(i=u[o])[0].trace).type;var d=[];for(s=0;s<i.length;s++)if((l=i[s]).s!==CM){var g;g=a?l.s:l.s+l.b;var h=t.put(l.p,g),f=h+g;l.b=h,l[c]=f,n.norm||(d.push(f),l.hasB&&d.push(h))}n.norm||(r._extremes[e._id]=BM.findExtremes(e,d,{tozero:!0,padded:!0}))}}(n,a,r);for(var o=0;o<i.length;o++)for(var s=i[o],l=0;l<s.length;l++){var c=s[l];if(c.s!==CM)c.b+c.s===a.get(c.p,c.s)&&(c._outmost=!0)}r.norm&&ZM(n,a,r)}(0,t,n,o,r),a.length&&UM(t,n,a,r)}!function(e,t){var n,i,r,a=kM(t),o={},s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(r=e[n],i=0;i<r.length;i++){var c=r[i].p;yM(c)&&(s=Math.min(s,c),l=Math.max(l,c))}var u=1e4/(l-s),d=o.round=function(e){return String(Math.round(u*(e-s)))};for(n=0;n<e.length;n++){(r=e[n])[0].t.extents=o;var g=r[0].t.poffset,h=Array.isArray(g);for(i=0;i<r.length;i++){var f=r[i],p=f[a]-f.w/2;if(yM(p)){var m=f[a]+f.w/2,v=d(f.p);o[v]?o[v]=[Math.min(p,o[v][0]),Math.max(m,o[v][1])]:o[v]=[p,m]}f.p0=f.p+(h?g[i]:g),f.p1=f.p0+f.w,f.s0=f.b,f.s1=f.s0+f.s}}}(i,t)}}function UM(e,t,n,i){for(var r=0;r<n.length;r++){var a=n[r],o=new FM([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!i.norm});wM(e,o,i),i.norm?(VM(o),ZM(t,o,i)):SM(t,o)}}function wM(e,t,n){for(var i=t.minDiff,r=t.traces,a=i*(1-n.gap),o=a*(1-(n.groupgap||0)),s=-o/2,l=0;l<r.length;l++){var c=r[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=a,c.bardelta=i}t.binWidth=r[0][0].t.barwidth/100,GM(t),RM(e,t),LM(e,t)}function GM(e){var t,n,i=e.traces;for(t=0;t<i.length;t++){var r,a=i[t],o=a[0],s=o.trace,l=o.t,c=s._offset||s.offset,u=l.poffset;if(IM(c)){for(r=Array.prototype.slice.call(c,0,a.length),n=0;n<r.length;n++)yM(r[n])||(r[n]=u);for(n=r.length;n<a.length;n++)r.push(u);l.poffset=r}else void 0!==c&&(l.poffset=c);var d=s._width||s.width,g=l.barwidth;if(IM(d)){var h=Array.prototype.slice.call(d,0,a.length);for(n=0;n<h.length;n++)yM(h[n])||(h[n]=g);for(n=h.length;n<a.length;n++)h.push(g);if(l.barwidth=h,void 0===c){for(r=[],n=0;n<a.length;n++)r.push(u+(g-h[n])/2);l.poffset=r}}else void 0!==d&&(l.barwidth=d,void 0===c&&(l.poffset=u+(g-d)/2))}}function RM(e,t){for(var n=t.traces,i=kM(e),r=0;r<n.length;r++)for(var a=n[r],o=a[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<a.length;d++){var g=a[d],h=g.w=u?c[d]:c;g[i]=g.p+(l?s[d]:s)+h/2}}function LM(e,t,n){var i=t.traces,r=t.minDiff/2;BM.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var a=0;a<i.length;a++){var o,s,l,c,u=i[a],d=u[0],g=d.trace,h=[];for(c=0;c<u.length;c++)s=(o=u[c]).p-r,l=o.p+r,h.push(s,l);if(g.width||g.offset){var f=d.t,p=f.poffset,m=f.barwidth,v=Array.isArray(p),b=Array.isArray(m);for(c=0;c<u.length;c++){o=u[c];var y=v?p[c]:p,I=b?m[c]:m;l=(s=o.p+y)+I,h.push(s,l)}}g._extremes[e._id]=BM.findExtremes(e,h,{padded:!1})}}function SM(e,t){for(var n=t.traces,i=kM(e),r=0;r<n.length;r++){for(var a=n[r],o=a[0].trace,s=[],l=!1,c=0;c<a.length;c++){var u=a[c],d=u.b,g=d+u.s;u[i]=g,s.push(g),u.hasB&&s.push(d),u.hasB&&u.b||(l=!0)}o._extremes[e._id]=BM.findExtremes(e,s,{tozero:l,padded:!0})}}function VM(e){for(var t=e.traces,n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;r++){var a=i[r];a.s!==CM&&e.put(a.p,a.b+a.s)}}function ZM(e,t,n){var i=t.traces,r=kM(e),a="fraction"===n.norm?1:100,o=a/1e9,s=e.l2c(e.c2l(0)),l="stack"===n.mode?a:s;function c(t){return yM(e.c2l(t))&&(t<s-o||t>l+o||!yM(s))}for(var u=0;u<i.length;u++){for(var d=i[u],g=d[0].trace,h=[],f=!1,p=!1,m=0;m<d.length;m++){var v=d[m];if(v.s!==CM){var b=Math.abs(a/t.get(v.p,v.s));v.b*=b,v.s*=b;var y=v.b,I=y+v.s;v[r]=I,h.push(I),p=p||c(I),v.hasB&&(h.push(y),p=p||c(y)),v.hasB&&v.b||(f=!0)}}g._extremes[e._id]=BM.findExtremes(e,h,{tozero:f,padded:p})}}function kM(e){return e._id.charAt(0)}var EM={crossTraceCalc:function(e,t){for(var n=t.xaxis,i=t.yaxis,r=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],c=0;c<a.length;c++){var u=a[c];if(!0===u.visible&&xM.traceIs(u,"bar")&&u.xaxis===n._id&&u.yaxis===i._id&&("h"===u.orientation?s.push(o[c]):l.push(o[c]),u._computePh))for(var d=e.calcdata[c],g=0;g<d.length;g++)"function"==typeof d[g].ph0&&(d[g].ph0=d[g].ph0()),"function"==typeof d[g].ph1&&(d[g].ph1=d[g].ph1())}var h={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===i.type||"multicategory"===i.type,mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap};QM(e,n,i,l,h),QM(e,i,n,s,h)},setGroupPositions:QM},XM=Gs.exports,NM=ws.exports;function WM(e){return"_"+e+"Text_minsize"}var _M={recordMinTextSize:function(e,t,n){if(n.uniformtext.mode){var i=WM(e),r=n.uniformtext.minsize,a=t.scale*t.fontSize;t.hide=a<r,n[i]=n[i]||1/0,t.hide||(n[i]=Math.min(n[i],Math.max(a,r)))}},clearMinTextSize:function(e,t){t[WM(e)]=void 0},resizeText:function(e,t,n){var i=e._fullLayout,r=i["_"+n+"Text_minsize"];if(r){var a,o="hide"===i.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}t.selectAll(a).each((function(e){var t=e.transform;t&&(t.scale=o&&t.hide?0:r/t.fontSize,XM.select(this).select("text").attr("transform",NM.getTextTransform(t)))}))}}},TM={},MM=Yu,HM=Id.exports,YM=ws.exports.isArrayOrTypedArray;TM.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},TM.coerceNumber=function(e,t,n){if(MM(t)){t=+t;var i=e.min,r=e.max;if(!(void 0!==i&&t<i||void 0!==r&&t>r))return t}return void 0!==n?n:e.dflt},TM.coerceColor=function(e,t,n){return HM(t).isValid()?t:void 0!==n?n:e.dflt},TM.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},TM.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n},TM.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:YM(e.marker.line.width)?0:e.marker.line.width};var DM=Gs.exports,zM=Hd.exports,OM=Am.exports,JM=ws.exports,jM=hg,PM=_M.resizeText,KM=iT.textfont,qM=iT.insidetextfont,$M=iT.outsidetextfont,eH=TM;function tH(e,t,n){OM.pointStyle(e.selectAll("path"),t,n),nH(e,t,n)}function nH(e,t,n){e.selectAll("text").each((function(e){var i=DM.select(this),r=JM.ensureUniformFontSize(n,iH(i,e,t,n));OM.font(i,r)}))}function iH(e,t,n,i){var r=i._fullLayout.font,a=n.textfont;if(e.classed("bartext-inside")){var o=lH(t,n);a=aH(n,t.i,r,o)}else e.classed("bartext-outside")&&(a=oH(n,t.i,r));return a}function rH(e,t,n){return sH(KM,e.textfont,t,n)}function aH(e,t,n,i){var r=rH(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(r={color:zM.contrast(i),family:r.family,size:r.size}),sH(qM,e.insidetextfont,t,r)}function oH(e,t,n){var i=rH(e,t,n);return sH($M,e.outsidetextfont,t,i)}function sH(e,t,n,i){t=t||{};var r=eH.getValue(t.family,n),a=eH.getValue(t.size,n),o=eH.getValue(t.color,n);return{family:eH.coerceString(e.family,r,i.family),size:eH.coerceNumber(e.size,a,i.size),color:eH.coerceColor(e.color,o,i.color)}}function lH(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}var cH={style:function(e){var t=DM.select(e).selectAll("g.barlayer").selectAll("g.trace");PM(e,t,"bar");var n=t.size(),i=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===i.barmode&&n>1||0===i.bargap&&0===i.bargroupgap&&!e[0].trace.marker.line.width)&&DM.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){tH(DM.select(this),t[0].trace,e)})),jM.getComponentMethod("errorbars","style")(t)},styleTextPoints:nH,styleOnSelect:function(e,t,n){var i=t[0].trace;i.selectedpoints?function(e,t,n){OM.selectedPointStyle(e.selectAll("path"),t),function(e,t,n){e.each((function(e){var i,r=DM.select(this);if(e.selected){i=JM.ensureUniformFontSize(n,iH(r,e,t,n));var a=t.selected.textfont&&t.selected.textfont.color;a&&(i.color=a),OM.font(r,i)}else OM.selectedTextStyle(r,t)}))}(e.selectAll("text"),t,n)}(n,i,e):(tH(n,i,e),jM.getComponentMethod("errorbars","style")(n))},getInsideTextFont:aH,getOutsideTextFont:oH,getBarColor:lH,resizeText:PM},uH=Gs.exports,dH=Yu,gH=ws.exports,hH=Cm,fH=Hd.exports,pH=Am.exports,mH=hg,vH=Im.exports.tickText,bH=_M.recordMinTextSize,yH=_M.clearMinTextSize,IH=cH,CH=TM,xH=iT.text,BH=iT.textposition,AH=xb.appendArrayPointValue,FH=H_.TEXTPAD;function QH(e){return e.id}function UH(e){if(e.ids)return QH}function wH(e,t){return e<t?1:-1}function GH(e,t,n,i){var r;return!t.uniformtext.mode&&RH(n)?(i&&(r=i()),e.transition().duration(n.duration).ease(n.easing).each("end",(function(){r&&r()})).each("interrupt",(function(){r&&r()}))):e}function RH(e){return e&&e.duration>0}function LH(e){return"auto"===e?0:e}function SH(e,t){var n=Math.PI/180*t,i=Math.abs(Math.sin(n)),r=Math.abs(Math.cos(n));return{x:e.width*r+e.height*i,y:e.width*i+e.height*r}}function VH(e,t,n,i,r,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,c=a.anchor||"end",u="end"===c,d="start"===c,g=((a.leftToRight||0)+1)/2,h=1-g,f=r.width,p=r.height,m=Math.abs(t-e),v=Math.abs(i-n),b=m>2*FH&&v>2*FH?FH:0;m-=2*b,v-=2*b;var y=LH(l);"auto"!==l||f<=m&&p<=v||!(f>m||p>v)||(f>v||p>m)&&f<p==m<v||(y+=90);var I=SH(r,y),C=1;s&&(C=Math.min(1,m/I.x,v/I.y));var x=r.left*h+r.right*g,B=(r.top+r.bottom)/2,A=(e+FH)*h+(t-FH)*g,F=(n+i)/2,Q=0,U=0;if(d||u){var w=(o?I.x:I.y)/2,G=o?wH(e,t):wH(n,i);o?d?(A=e+G*b,Q=-G*w):(A=t-G*b,Q=G*w):d?(F=n+G*b,U=-G*w):(F=i-G*b,U=G*w)}return{textX:x,textY:B,targetX:A,targetY:F,anchorX:Q,anchorY:U,scale:C,rotate:y}}var ZH={plot:function(e,t,n,i,r,a){var o=t.xaxis,s=t.yaxis,l=e._fullLayout;r||(r={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},yH("bar",l));var c=gH.makeTraceGroups(i,n,"trace bars").each((function(n){var i=uH.select(this),c=n[0].trace,u="waterfall"===c.type,d="funnel"===c.type,g="bar"===c.type||d,h=0;u&&c.connector.visible&&"between"===c.connector.mode&&(h=c.connector.line.width/2);var f="h"===c.orientation,p=RH(r),m=gH.ensureSingle(i,"g","points"),v=UH(c),b=m.selectAll("g.point").data(gH.identity,v);b.enter().append("g").classed("point",!0),b.exit().remove(),b.each((function(i,u){var d,m,v=uH.select(this),b=function(e,t,n,i){var r=[],a=[],o=i?t:n,s=i?n:t;return r[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),r[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),i?[r,a]:[a,r]}(i,o,s,f),y=b[0][0],I=b[0][1],C=b[1][0],x=b[1][1],B=0==(f?I-y:x-C);if(B&&g&&CH.getLineWidth(c,i)&&(B=!1),B||(B=!(dH(y)&&dH(I)&&dH(C)&&dH(x))),i.isBlank=B,B&&(f?I=y:x=C),h&&!B&&(f?(y-=wH(y,I)*h,I+=wH(y,I)*h):(C-=wH(C,x)*h,x+=wH(C,x)*h)),"waterfall"===c.type){if(!B){var A=c[i.dir].marker;d=A.line.width,m=A.color}}else d=CH.getLineWidth(c,i),m=i.mc||c.marker.color;function F(e){var t=uH.round(d/2%1,2);return 0===r.gap&&0===r.groupgap?uH.round(Math.round(e)-t,2):e}if(!e._context.staticPlot){var Q=fH.opacity(m)<1||d>.01?F:function(e,t,n){return n&&e===t?e:Math.abs(e-t)>=2?F(e):e>t?Math.ceil(e):Math.floor(e)};y=Q(y,I,f),I=Q(I,y,f),C=Q(C,x,!f),x=Q(x,C,!f)}var U=GH(gH.ensureSingle(v,"path"),l,r,a);if(U.style("vector-effect","non-scaling-stroke").attr("d",isNaN((I-y)*(x-C))||B&&e._context.staticPlot?"M0,0Z":"M"+y+","+C+"V"+x+"H"+I+"V"+C+"Z").call(pH.setClipUrl,t.layerClipId,e),!l.uniformtext.mode&&p){var w=pH.makePointStyleFns(c);pH.singlePointStyle(i,U,c,w,e)}!function(e,t,n,i,r,a,o,s,l,c,u){var d,g=t.xaxis,h=t.yaxis,f=e._fullLayout;function p(t,n,i){return gH.ensureSingle(t,"text").text(n).attr({class:"bartext bartext-"+d,"text-anchor":"middle","data-notex":1}).call(pH.font,i).call(hH.convertToTspans,e)}var m=i[0].trace,v="h"===m.orientation,b=function(e,t,n,i,r){var a,o=t[0].trace;a=o.texttemplate?function(e,t,n,i,r){var a=t[0].trace,o=gH.castOption(a,n,"texttemplate");if(!o)return"";var s,l,c,u,d="histogram"===a.type,g="waterfall"===a.type,h="funnel"===a.type,f="h"===a.orientation;f?(s="y",l=r,c="x",u=i):(s="x",l=i,c="y",u=r);function p(e){return vH(l,l.c2l(e),!0).text}function m(e){return vH(u,u.c2l(e),!0).text}var v=t[n],b={};b.label=v.p,b.labelLabel=b[s+"Label"]=p(v.p);var y=gH.castOption(a,v.i,"text");(0===y||y)&&(b.text=y);b.value=v.s,b.valueLabel=b[c+"Label"]=m(v.s);var I={};AH(I,a,v.i),(d||void 0===I.x)&&(I.x=f?b.value:b.label);(d||void 0===I.y)&&(I.y=f?b.label:b.value);(d||void 0===I.xLabel)&&(I.xLabel=f?b.valueLabel:b.labelLabel);(d||void 0===I.yLabel)&&(I.yLabel=f?b.labelLabel:b.valueLabel);g&&(b.delta=+v.rawS||v.s,b.deltaLabel=m(b.delta),b.final=v.v,b.finalLabel=m(b.final),b.initial=b.final-b.delta,b.initialLabel=m(b.initial));h&&(b.value=v.s,b.valueLabel=m(b.value),b.percentInitial=v.begR,b.percentInitialLabel=gH.formatPercent(v.begR),b.percentPrevious=v.difR,b.percentPreviousLabel=gH.formatPercent(v.difR),b.percentTotal=v.sumR,b.percenTotalLabel=gH.formatPercent(v.sumR));var C=gH.castOption(a,v.i,"customdata");C&&(b.customdata=C);return gH.texttemplateString(o,b,e._d3locale,I,b,a._meta||{})}(e,t,n,i,r):o.textinfo?function(e,t,n,i){var r=e[0].trace,a="h"===r.orientation,o="waterfall"===r.type,s="funnel"===r.type;function l(e){return vH(a?i:n,e,!0).text}function c(e){return vH(a?n:i,+e,!0).text}var u,d=r.textinfo,g=e[t],h=d.split("+"),f=[],p=function(e){return-1!==h.indexOf(e)};p("label")&&f.push(l(e[t].p));p("text")&&(0===(u=gH.castOption(r,g.i,"text"))||u)&&f.push(u);if(o){var m=+g.rawS||g.s,v=g.v,b=v-m;p("initial")&&f.push(c(b)),p("delta")&&f.push(c(m)),p("final")&&f.push(c(v))}if(s){p("value")&&f.push(c(g.s));var y=0;p("percent initial")&&y++,p("percent previous")&&y++,p("percent total")&&y++;var I=y>1;p("percent initial")&&(u=gH.formatPercent(g.begR),I&&(u+=" of initial"),f.push(u)),p("percent previous")&&(u=gH.formatPercent(g.difR),I&&(u+=" of previous"),f.push(u)),p("percent total")&&(u=gH.formatPercent(g.sumR),I&&(u+=" of total"),f.push(u))}return f.join("<br>")}(t,n,i,r):CH.getValue(o.text,n);return CH.coerceString(xH,a)}(f,i,r,g,h);d=function(e,t){var n=CH.getValue(e.textposition,t);return CH.coerceEnumerated(BH,n)}(m,r);var y="stack"===c.mode||"relative"===c.mode,I=i[r],C=!y||I._outmost;if(!b||"none"===d||(I.isBlank||a===o||s===l)&&("auto"===d||"inside"===d))return void n.select("text").remove();var x=f.font,B=IH.getBarColor(i[r],m),A=IH.getInsideTextFont(m,r,x,B),F=IH.getOutsideTextFont(m,r,x),Q=n.datum();v?"log"===g.type&&Q.s0<=0&&(a=g.range[0]<g.range[1]?0:g._length):"log"===h.type&&Q.s0<=0&&(s=h.range[0]<h.range[1]?h._length:0);var U,w,G,R,L,S=Math.abs(o-a)-2*FH,V=Math.abs(l-s)-2*FH;"outside"===d&&(C||I.hasB||(d="inside"));if("auto"===d){if(C)d="inside",U=p(n,b,L=gH.ensureUniformFontSize(e,A)),G=(w=pH.bBox(U.node())).width,R=w.height,G>0&&R>0&&(G<=S&&R<=V||G<=V&&R<=S||(v?S>=G*(V/R):V>=R*(S/G)))?d="inside":(d="outside",U.remove(),U=null);else d="inside"}if(!U){var Z=(U=p(n,b,L=gH.ensureUniformFontSize(e,"outside"===d?F:A))).attr("transform");if(U.attr("transform",""),G=(w=pH.bBox(U.node())).width,R=w.height,U.attr("transform",Z),G<=0||R<=0)return void U.remove()}var k,E=m.textangle;k="outside"===d?function(e,t,n,i,r,a){var o,s=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,u=r.width,d=r.height,g=Math.abs(t-e),h=Math.abs(i-n);o=s?h>2*FH?FH:0:g>2*FH?FH:0;var f=1;l&&(f=s?Math.min(1,h/d):Math.min(1,g/u));var p=LH(c),m=SH(r,p),v=(s?m.x:m.y)/2,b=(r.left+r.right)/2,y=(r.top+r.bottom)/2,I=(e+t)/2,C=(n+i)/2,x=0,B=0,A=s?wH(t,e):wH(n,i);s?(I=t-A*o,x=A*v):(C=i+A*o,B=-A*v);return{textX:b,textY:y,targetX:I,targetY:C,anchorX:x,anchorY:B,scale:f,rotate:p}}(a,o,s,l,w,{isHorizontal:v,constrained:"both"===m.constraintext||"outside"===m.constraintext,angle:E}):VH(a,o,s,l,w,{isHorizontal:v,constrained:"both"===m.constraintext||"inside"===m.constraintext,angle:E,anchor:m.insidetextanchor});k.fontSize=L.size,bH("histogram"===m.type?"bar":m.type,k,f),I.transform=k,GH(U,f,c,u).attr("transform",gH.getTextTransform(k))}(e,t,v,n,u,y,I,C,x,r,a),t.layerClipId&&pH.hideOutsideRangePoint(i,v.select("text"),o,s,c.xcalendar,c.ycalendar)}));var y=!1===c.cliponaxis;pH.setClipUrl(i,y?null:t.layerClipId,e)}));mH.getComponentMethod("errorbars","plot")(e,c,t,r)},toMoveInsideBar:VH},kH=SA,EH=hg,XH=Hd.exports,NH=ws.exports.fillText,WH=TM.getLineWidth,_H=Im.exports.hoverLabelText,TH=Du.BADNUM;function MH(e,t,n,i,r){var a,o,s,l,c,u,d,g=e.cd,h=g[0].trace,f=g[0].t,p="closest"===i,m="waterfall"===h.type,v=e.maxHoverDistance,b=e.maxSpikeDistance;"h"===h.orientation?(a=n,o=t,s="y",l="x",c=R,u=w):(a=t,o=n,s="x",l="y",u=R,c=w);var y=h[s+"period"],I=p||y;function C(e){return B(e,-1)}function x(e){return B(e,1)}function B(e,t){var n=e.w;return e[s]+t*n/2}function A(e){return e[s+"End"]-e[s+"Start"]}var F=p?C:y?function(e){return e.p-A(e)/2}:function(e){return Math.min(C(e),e.p-f.bardelta/2)},Q=p?x:y?function(e){return e.p+A(e)/2}:function(e){return Math.max(x(e),e.p+f.bardelta/2)};function U(e,t,n){return r.finiteRange&&(n=0),kH.inbox(e-a,t-a,n+Math.min(1,Math.abs(t-e)/d)-1)}function w(e){return U(F(e),Q(e),v)}function G(e){var t=e[l];if(m){var n=Math.abs(e.rawS)||0;o>0?t+=n:o<0&&(t-=n)}return t}function R(e){var t=o,n=e.b,i=G(e);return kH.inbox(n-t,i-t,v+(i-t)/(i-n)-1)}var L=e[s+"a"],S=e[l+"a"];d=Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0]));var V=kH.getDistanceFunction(i,c,u,(function(e){return(c(e)+u(e))/2}));if(kH.getClosest(g,V,e),!1!==e.index&&g[e.index].p!==TH){I||(F=function(e){return Math.min(C(e),e.p-f.bargroupwidth/2)},Q=function(e){return Math.max(x(e),e.p+f.bargroupwidth/2)});var Z=g[e.index],k=h.base?Z.b+Z.s:Z.s;e[l+"0"]=e[l+"1"]=S.c2p(Z[l],!0),e[l+"LabelVal"]=k;var E=f.extents[f.extents.round(Z.p)];e[s+"0"]=L.c2p(p?F(Z):E[0],!0),e[s+"1"]=L.c2p(p?Q(Z):E[1],!0);var X=void 0!==Z.orig_p;return e[s+"LabelVal"]=X?Z.orig_p:Z.p,e.labelLabel=_H(L,e[s+"LabelVal"],h[s+"hoverformat"]),e.valueLabel=_H(S,e[l+"LabelVal"],h[l+"hoverformat"]),e.baseLabel=_H(S,Z.b,h[l+"hoverformat"]),e.spikeDistance=(function(e){var t=o,n=e.b,i=G(e);return kH.inbox(n-t,i-t,b+(i-t)/(i-n)-1)}(Z)+function(e){return U(C(e),x(e),b)}(Z))/2,e[s+"Spike"]=L.c2p(Z.p,!0),NH(Z,h,e),e.hovertemplate=h.hovertemplate,e}}function HH(e,t){var n=t.mcc||e.marker.color,i=t.mlcc||e.marker.line.color,r=WH(e,t);return XH.opacity(n)?n:XH.opacity(i)&&r?i:void 0}var YH=function(e,t,n,i,r){var a=MH(e,t,n,i,r);if(a){var o=a.cd,s=o[0].trace,l=o[a.index];return a.color=HH(s,l),EH.getComponentMethod("errorbars","hoverInfo")(l,s,a),[a]}},DH=YH,zH=Im.exports.hoverLabelText;function OH(e,t,n,i,r){var a=t.c2p(i?e.s0:e.p0,!0),o=t.c2p(i?e.s1:e.p1,!0),s=n.c2p(i?e.p0:e.s0,!0),l=n.c2p(i?e.p1:e.s1,!0);return r?[(a+o)/2,(s+l)/2]:i?[o,(s+l)/2]:[(a+o)/2,l]}var JH={attributes:gT,layoutAttributes:hT,supplyDefaults:function(e,t,n,i){function r(n,i){return UT.coerce(e,t,LT,n,i)}var a=r("x"),o=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var s=r("textposition");GT(e,t,i,r,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var l=r("orientation",o&&!a?"h":"v"),c="v"===l?"x":"y",u="v"===l?"y":"x",d=a&&o?Math.min(UT.minRowLength(a)&&UT.minRowLength(o)):UT.minRowLength(t[c]||[]);if(d){t._length=d,QT.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],i),t[u]&&r("histfunc"),r("histnorm"),r("autobin"+c),RT(e,t,r,n,i),UT.coerceSelectionMarkerOpacity(t,r);var g=(t.marker.line||{}).color,h=QT.getComponentMethod("errorbars","supplyDefaults");h(e,t,g||wT.defaultLine,{axis:"y"}),h(e,t,g||wT.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1},crossTraceDefaults:function(e,t){var n,i,r,a,o,s,l,c=t._histogramBinOpts={},u=[],d={},g=[];function h(e,t){return ST.coerce(n._input,n,n._module.attributes,e,t)}function f(e){return"v"===e.orientation?"x":"y"}function p(e,n,i){var r=e.uid+"__"+i;n||(n=r);var a=function(e,n){return VT.getFromTrace({_fullLayout:t},e,n).type}(e,i),o=e[i+"calendar"]||"",s=c[n],l=!0;s&&(a===s.axType&&o===s.calendar?(l=!1,s.traces.push(e),s.dirs.push(i)):(n=r,a!==s.axType&&ST.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+a,"axis","with bins on","type:"+s.axType,"axis."].join(" ")),o!==s.calendar&&ST.warn(["Attempted to group the bins of trace",e.index,"set with a",o,"calendar","with bins",s.calendar?"on a "+s.calendar+" calendar":"w/o a set calendar"].join(" ")))),l&&(c[n]={traces:[e],dirs:[i],axType:a,calendar:e[i+"calendar"]||""}),e["_"+i+"bingroup"]=n}for(o=0;o<e.length;o++)n=e[o],ZT(n,"histogram")&&(u.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,ZT(n,"2dMap")||kT(n._input,n,t,h));var m=t._alignmentOpts||{};for(o=0;o<u.length;o++){if(n=u[o],r="",!ZT(n,"2dMap")){if(a=f(n),"group"===t.barmode&&n.alignmentgroup){var v=n[a+"axis"],b=XT(t,v)+n.orientation;(m[b]||{})[n.alignmentgroup]&&(r=b)}r||"overlay"===t.barmode||(r=XT(t,n.xaxis)+XT(t,n.yaxis)+f(n))}r?(d[r]||(d[r]=[]),d[r].push(n)):g.push(n)}for(r in d)if(1!==(i=d[r]).length){var y=!1;for(i.length&&(n=i[0],y=h("bingroup")),r=y||r,o=0;o<i.length;o++){var I=(n=i[o])._input.bingroup;I&&I!==r&&ST.warn(["Trace",n.index,"must match","within bingroup",r+".","Ignoring its bingroup:",I,"setting."].join(" ")),n.bingroup=r,p(n,r,f(n))}}else g.push(i[0]);for(o=0;o<g.length;o++){n=g[o];var C=h("bingroup");if(ZT(n,"2dMap"))for(l=0;l<2;l++){var x=h((a=WT[l])+"bingroup",C?C+"__"+a:null);p(n,x,a)}else p(n,C,f(n))}for(r in c){var B=c[r];for(i=B.traces,s=0;s<NT.length;s++){var A,F,Q=NT[s],U=Q.name;if("nbins"!==U||!B.sizeFound){for(o=0;o<i.length;o++){if(n=i[o],a=B.dirs[o],A=Q.aStr[a],void 0!==ET(n._input,A).get()){B[U]=h(A),B[U+"Found"]=!0;break}(F=(n._autoBin||{})[a]||{})[U]&&ET(n,A).set(F[U])}if("start"===U||"end"===U)for(;o<i.length;o++)(n=i[o])["_"+a+"bingroup"]&&h(A,(F=(n._autoBin||{})[a]||{})[U]);"nbins"!==U||B.sizeFound||B.nbinsFound||(n=i[0],B[U]=h(A))}}}},supplyLayoutDefaults:function(e,t,n){function i(n,i){return MT.coerce(e,t,HT,n,i)}for(var r=!1,a=!1,o=!1,s={},l=i("barmode"),c=0;c<n.length;c++){var u=n[c];if(_T.traceIs(u,"bar")&&u.visible){if(r=!0,"group"===l){var d=u.xaxis+u.yaxis;s[d]&&(o=!0),s[d]=!0}if(u.visible&&"histogram"===u.type)"category"!==TT.getFromId({_fullLayout:t},u["v"===u.orientation?"xaxis":"yaxis"]).type&&(a=!0)}}r?("overlay"!==l&&i("barnorm"),i("bargap",a&&!o?0:.2),i("bargroupgap")):delete t.barmode},calc:fM.calc,crossTraceCalc:EM.crossTraceCalc,plot:ZH.plot,layerName:"barlayer",style:cH.style,styleOnSelect:cH.styleOnSelect,colorbar:vS,hoverPoints:function(e,t,n,i,r){var a=DH(e,t,n,i,r);if(a){var o=(e=a[0]).cd[e.index],s=e.cd[0].trace;if(!s.cumulative.enabled){var l="h"===s.orientation?"y":"x";e[l+"Label"]=zH(e[l+"a"],[o.ph0,o.ph1],s[l+"hoverformat"])}return a}},selectPoints:function(e,t){var n,i=e.cd,r=e.xaxis,a=e.yaxis,o=i[0].trace,s="funnel"===o.type,l="h"===o.orientation,c=[];if(!1===t)for(n=0;n<i.length;n++)i[n].selected=0;else for(n=0;n<i.length;n++){var u=i[n],d="ct"in u?u.ct:OH(u,r,a,l,s);t.contains(d,!1,n,e)?(c.push({pointNumber:n,x:r.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0}return c},eventData:function(e,t,n,i,r){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var a,o=Array.isArray(r)?i[0].pts[r[0]][r[1]]:i[r].pts;if(e.pointNumbers=o,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,n._indexToPoints){a=[];for(var s=0;s<o.length;s++)a=a.concat(n._indexToPoints[o[s]])}else a=o;e.pointIndices=a}return e},moduleType:"trace",name:"histogram",basePlotModule:ZS,categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}},jH=JH,PH=Object.freeze(e({__proto__:null,default:jH},[jH]));function KH(e,t,n){var i=void 0===t?null:t,r=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),r=0,a=n.length;r<a;++r)i[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),a=r.indexOf("\n",10)+1,o=r.substring(a)+(i?"//# sourceMappingURL="+i:""),s=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(s)}var qH,$H,eY,tY,nY,iY,rY,aY=(qH="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICJAYmFiZWwvaGVscGVycyAtIHR5cGVvZiI7CgogICAgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsKICAgICAgcmV0dXJuIHR5cGVvZiBvYmo7CiAgICB9IDogZnVuY3Rpb24gKG9iaikgewogICAgICByZXR1cm4gb2JqICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7CiAgICB9LCBfdHlwZW9mKG9iaik7CiAgfQoKICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgInByb3RvdHlwZSIsIHsKICAgICAgd3JpdGFibGU6IGZhbHNlCiAgICB9KTsKICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICB9CgogIGZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsKICAgIGlmICghbykgcmV0dXJuOwogICAgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7CiAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7CiAgICBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsKICAgIGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7CiAgICBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOwogIH0KCiAgZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsKICAgIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOwoKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsKCiAgICByZXR1cm4gYXJyMjsKICB9CgogIGZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7CiAgICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1siQEBpdGVyYXRvciJdOwoKICAgIGlmICghaXQpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsKICAgICAgICBpZiAoaXQpIG8gPSBpdDsKICAgICAgICB2YXIgaSA9IDA7CgogICAgICAgIHZhciBGID0gZnVuY3Rpb24gKCkge307CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzOiBGLAogICAgICAgICAgbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsKICAgICAgICAgICAgICBkb25lOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgZG9uZTogZmFsc2UsCiAgICAgICAgICAgICAgdmFsdWU6IG9baSsrXQogICAgICAgICAgICB9OwogICAgICAgICAgfSwKICAgICAgICAgIGU6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICB9LAogICAgICAgICAgZjogRgogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsKICAgIH0KCiAgICB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsCiAgICAgICAgZGlkRXJyID0gZmFsc2UsCiAgICAgICAgZXJyOwogICAgcmV0dXJuIHsKICAgICAgczogZnVuY3Rpb24gKCkgewogICAgICAgIGl0ID0gaXQuY2FsbChvKTsKICAgICAgfSwKICAgICAgbjogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBzdGVwID0gaXQubmV4dCgpOwogICAgICAgIG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7CiAgICAgICAgcmV0dXJuIHN0ZXA7CiAgICAgIH0sCiAgICAgIGU6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZGlkRXJyID0gdHJ1ZTsKICAgICAgICBlcnIgPSBlOwogICAgICB9LAogICAgICBmOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChkaWRFcnIpIHRocm93IGVycjsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfQoKICB2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTsKCiAgdmFyIHJ1bnRpbWUgPSB7ZXhwb3J0czoge319OwoKICAoZnVuY3Rpb24gKG1vZHVsZSkgewogICAgdmFyIHJ1bnRpbWUgPSBmdW5jdGlvbiAoZXhwb3J0cykgewoKICAgICAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTsKICAgICAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5OwogICAgICB2YXIgdW5kZWZpbmVkJDE7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLgoKICAgICAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iID8gU3ltYm9sIDoge307CiAgICAgIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgIkBAaXRlcmF0b3IiOwogICAgICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCAiQEBhc3luY0l0ZXJhdG9yIjsKICAgICAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCAiQEB0b1N0cmluZ1RhZyI7CgogICAgICBmdW5jdGlvbiBkZWZpbmUob2JqLCBrZXksIHZhbHVlKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gb2JqW2tleV07CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgLy8gSUUgOCBoYXMgYSBicm9rZW4gT2JqZWN0LmRlZmluZVByb3BlcnR5IHRoYXQgb25seSB3b3JrcyBvbiBET00gb2JqZWN0cy4KICAgICAgICBkZWZpbmUoe30sICIiKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgZGVmaW5lID0gZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkgewogICAgICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLgogICAgICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yOwogICAgICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7CiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7IC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCwKICAgICAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuCgogICAgICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTsKICAgICAgICByZXR1cm4gZ2VuZXJhdG9yOwogICAgICB9CgogICAgICBleHBvcnRzLndyYXAgPSB3cmFwOyAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb24KICAgICAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkCiAgICAgIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZQogICAgICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlCiAgICAgIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWQKICAgICAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZwogICAgICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZQogICAgICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGUKICAgICAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaAogICAgICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuCgogICAgICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogIm5vcm1hbCIsCiAgICAgICAgICAgIGFyZzogZm4uY2FsbChvYmosIGFyZykKICAgICAgICAgIH07CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0eXBlOiAidGhyb3ciLAogICAgICAgICAgICBhcmc6IGVycgogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gInN1c3BlbmRlZFN0YXJ0IjsKICAgICAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSAic3VzcGVuZGVkWWllbGQiOwogICAgICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSAiZXhlY3V0aW5nIjsKICAgICAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gImNvbXBsZXRlZCI7IC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXMKICAgICAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LgoKICAgICAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTsgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kCiAgICAgIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvcgogICAgICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91cgogICAgICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLgoKICAgICAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge30KCiAgICAgIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge30KCiAgICAgIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge30gLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdAogICAgICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LgoKCiAgICAgIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9OwogICAgICBkZWZpbmUoSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0pOwogICAgICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7CiAgICAgIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTsKCiAgICAgIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJiBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiYgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkgewogICAgICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkCiAgICAgICAgLy8gb2YgdGhlIHBvbHlmaWxsLgogICAgICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7CiAgICAgIH0KCiAgICAgIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9IEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTsKICAgICAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7CiAgICAgIGRlZmluZShHcCwgImNvbnN0cnVjdG9yIiwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpOwogICAgICBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsICJjb25zdHJ1Y3RvciIsIEdlbmVyYXRvckZ1bmN0aW9uKTsKICAgICAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIHRvU3RyaW5nVGFnU3ltYm9sLCAiR2VuZXJhdG9yRnVuY3Rpb24iKTsgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGUKICAgICAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC4KCiAgICAgIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHsKICAgICAgICBbIm5leHQiLCAidGhyb3ciLCAicmV0dXJuIl0uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uIChhcmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24gKGdlbkZ1bikgewogICAgICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gImZ1bmN0aW9uIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7CiAgICAgICAgcmV0dXJuIGN0b3IgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fCAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuCiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LgogICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09ICJHZW5lcmF0b3JGdW5jdGlvbiIgOiBmYWxzZTsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uIChnZW5GdW4pIHsKICAgICAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7CiAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTsKICAgICAgICAgIGRlZmluZShnZW5GdW4sIHRvU3RyaW5nVGFnU3ltYm9sLCAiR2VuZXJhdG9yRnVuY3Rpb24iKTsKICAgICAgICB9CgogICAgICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTsKICAgICAgICByZXR1cm4gZ2VuRnVuOwogICAgICB9OyAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG8KICAgICAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3QKICAgICAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCAiX19hd2FpdCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXMKICAgICAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC4KCgogICAgICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24gKGFyZykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBfX2F3YWl0OiBhcmcKICAgICAgICB9OwogICAgICB9OwoKICAgICAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7CiAgICAgICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpOwoKICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gInRocm93IikgewogICAgICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZzsKICAgICAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlOwoKICAgICAgICAgICAgaWYgKHZhbHVlICYmIF90eXBlb2YodmFsdWUpID09PSAib2JqZWN0IiAmJiBoYXNPd24uY2FsbCh2YWx1ZSwgIl9fYXdhaXQiKSkgewogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpbnZva2UoIm5leHQiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBpbnZva2UoInRocm93IiwgZXJyLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAodW53cmFwcGVkKSB7CiAgICAgICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXMKICAgICAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGUKICAgICAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi4KICAgICAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7CiAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFjawogICAgICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS4KICAgICAgICAgICAgICByZXR1cm4gaW52b2tlKCJ0aHJvdyIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBwcmV2aW91c1Byb21pc2U7CgogICAgICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHsKICAgICAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPSAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsCiAgICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSwKICAgICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWYKICAgICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvCiAgICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSwKICAgICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvCiAgICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5CiAgICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0cwogICAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHkKICAgICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlCiAgICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseQogICAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLgogICAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyCiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuCiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZykgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpOwogICAgICAgIH0gLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCwKICAgICAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS4KCgogICAgICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7CiAgICAgIH0KCiAgICAgIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7CiAgICAgIGRlZmluZShBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSwgYXN5bmNJdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9KTsKICAgICAgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjsgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZgogICAgICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2YKICAgICAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuCgogICAgICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24gKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkgewogICAgICAgIGlmIChQcm9taXNlSW1wbCA9PT0gdm9pZCAwKSBQcm9taXNlSW1wbCA9IFByb21pc2U7CiAgICAgICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcih3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSwgUHJvbWlzZUltcGwpOwogICAgICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbikgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci4KICAgICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHsKICAgICAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0OwogICAgICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHsKICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkgewogICAgICAgICAgICBpZiAobWV0aG9kID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgdGhyb3cgYXJnOwogICAgICAgICAgICB9IC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6CiAgICAgICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWUKCgogICAgICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kOwogICAgICAgICAgY29udGV4dC5hcmcgPSBhcmc7CgogICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTsKCiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZSkgewogICAgICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpOwoKICAgICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHsKICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09ICJuZXh0IikgewogICAgICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwncwogICAgICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uCiAgICAgICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7CiAgICAgICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkOwogICAgICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gInJldHVybiIpIHsKICAgICAgICAgICAgICBjb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5hcmcpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nOwogICAgICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7CgogICAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJub3JtYWwiKSB7CiAgICAgICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PQogICAgICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi4KICAgICAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZSA/IEdlblN0YXRlQ29tcGxldGVkIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDsKCiAgICAgICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLAogICAgICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gInRocm93IikgewogICAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7IC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGUKICAgICAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLgoKICAgICAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJ0aHJvdyI7CiAgICAgICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGUKICAgICAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZQogICAgICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZywKICAgICAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuCgoKICAgICAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkgewogICAgICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07CgogICAgICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCQxKSB7CiAgICAgICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3cKICAgICAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuCiAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDsKCiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgLy8gTm90ZTogWyJyZXR1cm4iXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuCiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvclsicmV0dXJuIl0pIHsKICAgICAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhCiAgICAgICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLgogICAgICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gInJldHVybiI7CiAgICAgICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQkMTsKICAgICAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTsKCiAgICAgICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbQogICAgICAgICAgICAgICAgLy8gInJldHVybiIgdG8gInRocm93IiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy4KICAgICAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29udGV4dC5tZXRob2QgPSAidGhyb3ciOwogICAgICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICB9CgogICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7CgogICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gInRocm93IikgewogICAgICAgICAgY29udGV4dC5tZXRob2QgPSAidGhyb3ciOwogICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnOwogICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7CiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICB9CgogICAgICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZzsKCiAgICAgICAgaWYgKCFpbmZvKSB7CiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJ0aHJvdyI7CiAgICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0Iik7CiAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDsKICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgICAgIH0KCiAgICAgICAgaWYgKGluZm8uZG9uZSkgewogICAgICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnkKICAgICAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuCiAgICAgICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTsgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLgoKICAgICAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7IC8vIElmIGNvbnRleHQubWV0aG9kIHdhcyAidGhyb3ciIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGUKICAgICAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWYKICAgICAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyAibmV4dCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlbgogICAgICAgICAgLy8gImNvbnN1bWVkIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhcwogICAgICAgICAgLy8gInJldHVybiIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlCiAgICAgICAgICAvLyBvdXRlciBnZW5lcmF0b3IuCgogICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSAicmV0dXJuIikgewogICAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJuZXh0IjsKICAgICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQkMTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLgogICAgICAgICAgcmV0dXJuIGluZm87CiAgICAgICAgfSAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aAogICAgICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuCgoKICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDsKICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgfSAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZQogICAgICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuCgoKICAgICAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTsKICAgICAgZGVmaW5lKEdwLCB0b1N0cmluZ1RhZ1N5bWJvbCwgIkdlbmVyYXRvciIpOyAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZQogICAgICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZQogICAgICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvcgogICAgICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi4KICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuCgogICAgICBkZWZpbmUoR3AsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0pOwogICAgICBkZWZpbmUoR3AsICJ0b1N0cmluZyIsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gIltvYmplY3QgR2VuZXJhdG9yXSI7CiAgICAgIH0pOwoKICAgICAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHsKICAgICAgICB2YXIgZW50cnkgPSB7CiAgICAgICAgICB0cnlMb2M6IGxvY3NbMF0KICAgICAgICB9OwoKICAgICAgICBpZiAoMSBpbiBsb2NzKSB7CiAgICAgICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07CiAgICAgICAgfQoKICAgICAgICBpZiAoMiBpbiBsb2NzKSB7CiAgICAgICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTsKICAgICAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTsKICAgICAgICB9CgogICAgICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkgewogICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9OwogICAgICAgIHJlY29yZC50eXBlID0gIm5vcm1hbCI7CiAgICAgICAgZGVsZXRlIHJlY29yZC5hcmc7CiAgICAgICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkgewogICAgICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaAogICAgICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb20KICAgICAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuCiAgICAgICAgdGhpcy50cnlFbnRyaWVzID0gW3sKICAgICAgICAgIHRyeUxvYzogInJvb3QiCiAgICAgICAgfV07CiAgICAgICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpOwogICAgICAgIHRoaXMucmVzZXQodHJ1ZSk7CiAgICAgIH0KCiAgICAgIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uIChvYmplY3QpIHsKICAgICAgICB2YXIga2V5cyA9IFtdOwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7CiAgICAgICAgICBrZXlzLnB1c2goa2V5KTsKICAgICAgICB9CgogICAgICAgIGtleXMucmV2ZXJzZSgpOyAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcAogICAgICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuCgogICAgICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpOwoKICAgICAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHsKICAgICAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5OwogICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlOwogICAgICAgICAgICAgIHJldHVybiBuZXh0OwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZQogICAgICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXMKICAgICAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLgoKCiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgICAgfTsKICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkgewogICAgICAgIGlmIChpdGVyYWJsZSkgewogICAgICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdOwoKICAgICAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkgewogICAgICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVyYWJsZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHsKICAgICAgICAgICAgdmFyIGkgPSAtMSwKICAgICAgICAgICAgICAgIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHsKICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldOwogICAgICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTsKICAgICAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0OwogICAgICAgICAgfQogICAgICAgIH0gLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLgoKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG5leHQ6IGRvbmVSZXN1bHQKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlczsKCiAgICAgIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQkMSwKICAgICAgICAgIGRvbmU6IHRydWUKICAgICAgICB9OwogICAgICB9CgogICAgICBDb250ZXh0LnByb3RvdHlwZSA9IHsKICAgICAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCwKICAgICAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoc2tpcFRlbXBSZXNldCkgewogICAgICAgICAgdGhpcy5wcmV2ID0gMDsKICAgICAgICAgIHRoaXMubmV4dCA9IDA7IC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzCiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLgoKICAgICAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQkMTsKICAgICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlOwogICAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7CiAgICAgICAgICB0aGlzLm1ldGhvZCA9ICJuZXh0IjsKICAgICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTsKCiAgICAgICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHsKICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7CiAgICAgICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczoKICAgICAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09ICJ0IiAmJiBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJiAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7CiAgICAgICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzdG9wOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTsKICAgICAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07CiAgICAgICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uOwoKICAgICAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRoaXMucnZhbDsKICAgICAgICB9LAogICAgICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbiBkaXNwYXRjaEV4Y2VwdGlvbihleGNlcHRpb24pIHsKICAgICAgICAgIGlmICh0aGlzLmRvbmUpIHsKICAgICAgICAgICAgdGhyb3cgZXhjZXB0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpczsKCiAgICAgICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHsKICAgICAgICAgICAgcmVjb3JkLnR5cGUgPSAidGhyb3ciOwogICAgICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uOwogICAgICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7CgogICAgICAgICAgICBpZiAoY2F1Z2h0KSB7CiAgICAgICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jaywKICAgICAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LgogICAgICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gIm5leHQiOwogICAgICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAhIWNhdWdodDsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247CgogICAgICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSAicm9vdCIpIHsKICAgICAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZQogICAgICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0bwogICAgICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uCiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZSgiZW5kIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7CiAgICAgICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksICJjYXRjaExvYyIpOwogICAgICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksICJmaW5hbGx5TG9jIik7CgogICAgICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykgewogICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhYnJ1cHQ6IGZ1bmN0aW9uIGFicnVwdCh0eXBlLCBhcmcpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgICAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldOwoKICAgICAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiYgaGFzT3duLmNhbGwoZW50cnksICJmaW5hbGx5TG9jIikgJiYgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykgewogICAgICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChmaW5hbGx5RW50cnkgJiYgKHR5cGUgPT09ICJicmVhayIgfHwgdHlwZSA9PT0gImNvbnRpbnVlIikgJiYgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiYgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7CiAgICAgICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGEKICAgICAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLgogICAgICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9OwogICAgICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlOwogICAgICAgICAgcmVjb3JkLmFyZyA9IGFyZzsKCiAgICAgICAgICBpZiAoZmluYWxseUVudHJ5KSB7CiAgICAgICAgICAgIHRoaXMubWV0aG9kID0gIm5leHQiOwogICAgICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYzsKICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTsKICAgICAgICB9LAogICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZShyZWNvcmQsIGFmdGVyTG9jKSB7CiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgdGhyb3cgcmVjb3JkLmFyZzsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJicmVhayIgfHwgcmVjb3JkLnR5cGUgPT09ICJjb250aW51ZSIpIHsKICAgICAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZzsKICAgICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09ICJyZXR1cm4iKSB7CiAgICAgICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZzsKICAgICAgICAgICAgdGhpcy5tZXRob2QgPSAicmV0dXJuIjsKICAgICAgICAgICAgdGhpcy5uZXh0ID0gImVuZCI7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSAibm9ybWFsIiAmJiBhZnRlckxvYykgewogICAgICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYzsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICB9LAogICAgICAgIGZpbmlzaDogZnVuY3Rpb24gZmluaXNoKGZpbmFsbHlMb2MpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgICAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldOwoKICAgICAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTsKICAgICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTsKICAgICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgImNhdGNoIjogZnVuY3Rpb24gX2NhdGNoKHRyeUxvYykgewogICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07CgogICAgICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHsKICAgICAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjsKCiAgICAgICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZzsKICAgICAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIHRocm93bjsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb24KICAgICAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay4KCgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKTsKICAgICAgICB9LAogICAgICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uIGRlbGVnYXRlWWllbGQoaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHsKICAgICAgICAgIHRoaXMuZGVsZWdhdGUgPSB7CiAgICAgICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLAogICAgICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLAogICAgICAgICAgICBuZXh0TG9jOiBuZXh0TG9jCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gIm5leHQiKSB7CiAgICAgICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0CiAgICAgICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS4KICAgICAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQkMTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICB9CiAgICAgIH07IC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUKICAgICAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlCiAgICAgIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZQogICAgICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLgoKICAgICAgcmV0dXJuIGV4cG9ydHM7CiAgICB9KCAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0cwogICAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHkKICAgIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemUKICAgIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuCiAgICBtb2R1bGUuZXhwb3J0cyApOwoKICAgIHRyeSB7CiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7CiAgICB9IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkgewogICAgICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZQogICAgICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3QKICAgICAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCBpbiBtb2Rlcm4gZW5naW5lcwogICAgICAvLyB3ZSBjYW4gZXhwbGljaXRseSBhY2Nlc3MgZ2xvYmFsVGhpcy4gSW4gb2xkZXIgZW5naW5lcyB3ZSBjYW4gZXNjYXBlCiAgICAgIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbAogICAgICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2UKICAgICAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWYKICAgICAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGEKICAgICAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlCiAgICAgIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLgogICAgICBpZiAoKHR5cGVvZiBnbG9iYWxUaGlzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihnbG9iYWxUaGlzKSkgPT09ICJvYmplY3QiKSB7CiAgICAgICAgZ2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lOwogICAgICB9IGVsc2UgewogICAgICAgIEZ1bmN0aW9uKCJyIiwgInJlZ2VuZXJhdG9yUnVudGltZSA9IHIiKShydW50aW1lKTsKICAgICAgfQogICAgfQogIH0pKHJ1bnRpbWUpOwoKICB2YXIgZGlzdHJpYnV0aW9ucyA9IHtleHBvcnRzOiB7fX07CgogIChmdW5jdGlvbiAobW9kdWxlKSB7CiAgICAvLyBzaG91bGQgbWF0Y2ggUidzLCBleGNlcHQgZm9yIHRoYXQgYWxsIGZ1bmN0aW9ucyByZXNpZGUgaW4gYW4gbGQgb2JqZWN0ICgKICAgIC8vIGFzIGluICJsb2cgZGVuc2l0eSIpLCBzbyB0byBnZXQgYSBub3JtYWwgbG9nIGRlbnNpdHkgeW91IHdvdWxkIHdyaXRlCiAgICAvLyBsZC5ub3JtKC4uLikuCiAgICAvLyBNb3N0IG9mIHRoZSBjb2RlIGJlbG93IGlzIGRpcmVjdGx5IHRha2VuIGZyb20gdGhlIGdyZWF0IEpzdGF0IHByb2plY3QKICAgIC8vIChodHRwczovL2dpdGh1Yi5jb20vanN0YXQvKSB3aGljaCBpbmNsdWRlcyBQREYgZm9yIG1hbnkgY29tbW9uIHByb2JhYmlsaXR5CiAgICAvLyBkaXN0cmlidXRpb25zLiBXaGF0IEkgaGF2ZSBkb25lIGlzIG9ubHkgdG8gY29udmVydCB0aGVzZSB0byBsb2cgUERGcy4KCiAgICAvKgogICAgT3JpZ2luYWwgd29yayBDb3B5cmlnaHQgKGMpIDIwMTMgalN0YXQKICAgIE1vZGlmaWVkIHdvcmsgQ29weXJpZ2h0IChjKSAyMDE1IFJhc211cyBCw6XDpXRoIAogICAgCiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CiAgICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAogICAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwogICAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAogICAgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiAgICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAgCiAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogICAgYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCiAgICAKICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAgICBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICAgIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQogICAgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgogICAgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKICAgIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KICAgIFRIRSBTT0ZUV0FSRS4KICAgIAogICAgKi8KICAgIC8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOgogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qcwogICAgLy8gSXQgc2hvdWxkIG1ha2Ugc2h1cmUgdGhhdCBtb2R1bGUgY2FuIGJlIGltcG9ydGVkIGJvdGggaW4gdGhlIGJyb3dzZXIsCiAgICAvLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC4KICAgIC8vIElmIHRoaXMgbW9kdWxlIGlzIGxvYWRlZCBpbiB0aGUgYnJvd3NlciBpdCB3aWxsIGNyZWF0ZWQgdGhlIGdsb2JhbAogICAgLy8gb2JqZWN0IGxkIC4KCiAgICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCiAgICAgICAgLy8gbGlrZSBOb2RlLgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTsKICAgICAgfQogICAgfSkoY29tbW9uanNHbG9iYWwsIGZ1bmN0aW9uICgpIHsKICAgICAgLy8gT2JqZWN0IHRvIGhvbGQgdGhlIGZ1bmN0aW9ucyB0byBiZSBleHBvcnRlZC4KICAgICAgdmFyIGxkID0ge307IC8vLy8vLy8vLy8gSGVscGVyIGZ1bmN0aW9ucyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICB2YXIgbGdhbW1hID0gZnVuY3Rpb24gbGdhbW1hKHgpIHsKICAgICAgICB2YXIgaiA9IDA7CiAgICAgICAgdmFyIGNvZiA9IFs3Ni4xODAwOTE3Mjk0NzE0NiwgLTg2LjUwNTMyMDMyOTQxNjc3LCAyNC4wMTQwOTgyNDA4MzA5MSwgLTEuMjMxNzM5NTcyNDUwMTU1LCAwLjEyMDg2NTA5NzM4NjYxNzllLTIsIC0wLjUzOTUyMzkzODQ5NTNlLTVdOwogICAgICAgIHZhciBzZXIgPSAxLjAwMDAwMDAwMDE5MDAxNTsKICAgICAgICB2YXIgeHgsIHksIHRtcDsKICAgICAgICB0bXAgPSAoeSA9IHh4ID0geCkgKyA1LjU7CiAgICAgICAgdG1wIC09ICh4eCArIDAuNSkgKiBsb2codG1wKTsKCiAgICAgICAgZm9yICg7IGogPCA2OyBqKyspIHsKICAgICAgICAgIHNlciArPSBjb2Zbal0gLyArK3k7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbG9nKDIuNTA2NjI4Mjc0NjMxMDAwNSAqIHNlciAvIHh4KSAtIHRtcDsKICAgICAgfTsKCiAgICAgIGxkLmxnYW1tYSA9IGxnYW1tYTsKCiAgICAgIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24gbGZhY3RvcmlhbChuKSB7CiAgICAgICAgcmV0dXJuIG4gPCAwID8gTmFOIDogbGdhbW1hKG4gKyAxKTsKICAgICAgfTsKCiAgICAgIGxkLmxmYWN0b3JpYWwgPSBsZmFjdG9yaWFsOwoKICAgICAgdmFyIGxjaG9vc2UgPSBmdW5jdGlvbiBsY2hvb3NlKG4sIGspIHsKICAgICAgICByZXR1cm4gbGZhY3RvcmlhbChuKSAtIGxmYWN0b3JpYWwoaykgLSBsZmFjdG9yaWFsKG4gLSBrKTsKICAgICAgfTsKCiAgICAgIGxkLmxjaG9vc2UgPSBsY2hvb3NlOwoKICAgICAgdmFyIGxiZXRhID0gZnVuY3Rpb24gbGJldGEoYSwgYikgewogICAgICAgIHJldHVybiBsZ2FtbWEoYSkgKyBsZ2FtbWEoYikgLSBsZ2FtbWEoYSArIGIpOwogICAgICB9OwoKICAgICAgbGQubGJldGEgPSBsYmV0YTsKICAgICAgdmFyIGxvZyA9IE1hdGgubG9nOwogICAgICB2YXIgZXhwID0gTWF0aC5leHA7CiAgICAgIHZhciBhYnMgPSBNYXRoLmFiczsKICAgICAgdmFyIHBvdyA9IE1hdGgucG93OwogICAgICB2YXIgc3FydCA9IE1hdGguc3FydDsKICAgICAgdmFyIHBpID0gTWF0aC5QSTsgLy8vLy8vLy8vLyBDb250aW5vdXMgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgbGQuYmV0YSA9IGZ1bmN0aW9uICh4LCBzaGFwZTEsIHNoYXBlMikgewogICAgICAgIGlmICh4ID4gMSB8fCB4IDwgMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CgogICAgICAgIGlmIChzaGFwZTEgPT09IDEgJiYgc2hhcGUyID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIChzaGFwZTEgLSAxKSAqIGxvZyh4KSArIChzaGFwZTIgLSAxKSAqIGxvZygxIC0geCkgLSBsYmV0YShzaGFwZTEsIHNoYXBlMik7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgbGQuY2F1Y2h5ID0gZnVuY3Rpb24gKHgsIGxvY2F0aW9uLCBzY2FsZSkgewogICAgICAgIHJldHVybiBsb2coc2NhbGUpIC0gbG9nKHBvdyh4IC0gbG9jYXRpb24sIDIpICsgcG93KHNjYWxlLCAyKSkgLSBsb2cocGkpOwogICAgICB9OwoKICAgICAgbGQubm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCkgewogICAgICAgIHJldHVybiAtMC41ICogbG9nKDIgKiBwaSkgLSBsb2coc2QpIC0gcG93KHggLSBtZWFuLCAyKSAvICgyICogc2QgKiBzZCk7CiAgICAgIH07IC8vIEEgYml2YXJpYXRlIE5vcm1hbCBkaXN0cmlidXRpb24gcGFyYW1ldGVyaXplZCBieSBhcnJheXMgb2YgdHdvIG1lYW5zIGFuZCBTRHMsIGFuZCAKICAgICAgLy8gdGhlIGNvcnJlbGF0aW9uLgoKCiAgICAgIGxkLmJpdmFybm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCwgY29ycikgewogICAgICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgKyBwb3coeFsxXSAtIG1lYW5bMV0sIDIpIC8gcG93KHNkWzFdLCAyKSAtIDIgKiBjb3JyICogKHhbMF0gLSBtZWFuWzBdKSAqICh4WzFdIC0gbWVhblsxXSkgLyAoc2RbMF0gKiBzZFsxXSk7CiAgICAgICAgdmFyIG5vcm1hbGl6aW5nX2ZhY3RvciA9IC0obG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgMC41ICogbG9nKDEgLSBwb3coY29yciwgMikpKTsKICAgICAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSkpOwogICAgICAgIHJldHVybiBiaXZhcl9sb2dfZGVuczsKICAgICAgfTsKCiAgICAgIGxkLmxhcGxhY2UgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CiAgICAgICAgcmV0dXJuIC1hYnMoeCAtIGxvY2F0aW9uKSAvIHNjYWxlIC0gbG9nKDIgKiBzY2FsZSk7CiAgICAgIH07CgogICAgICBsZC5kZXhwID0gbGQubGFwbGFjZTsKCiAgICAgIGxkLmdhbW1hID0gZnVuY3Rpb24gKHgsIHNoYXBlLCByYXRlKSB7CiAgICAgICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7CgogICAgICAgIGlmICh4IDwgMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CgogICAgICAgIGlmICh4ID09PSAwICYmIHNoYXBlID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gLWxvZyhzY2FsZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAoc2hhcGUgLSAxKSAqIGxvZyh4KSAtIHggLyBzY2FsZSAtIGxnYW1tYShzaGFwZSkgLSBzaGFwZSAqIGxvZyhzY2FsZSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHNjYWxlKSB7CiAgICAgICAgaWYgKHggPD0gMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAtKHNoYXBlICsgMSkgKiBsb2coeCkgLSBzY2FsZSAvIHggLSBsZ2FtbWEoc2hhcGUpICsgc2hhcGUgKiBsb2coc2NhbGUpOwogICAgICB9OwoKICAgICAgbGQubG5vcm0gPSBmdW5jdGlvbiAoeCwgbWVhbmxvZywgc2Rsb2cpIHsKICAgICAgICBpZiAoeCA8PSAwKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIC1sb2coeCkgLSAwLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZGxvZykgLSBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpOwogICAgICB9OwoKICAgICAgbGQucGFyZXRvID0gZnVuY3Rpb24gKHgsIHNjYWxlLCBzaGFwZSkgewogICAgICAgIGlmICh4IDwgc2NhbGUpIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbG9nKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKSAtIChzaGFwZSArIDEpICogbG9nKHgpOwogICAgICB9OwoKICAgICAgbGQudCA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUsIGRmKSB7CiAgICAgICAgZGYgPSBkZiA+IDFlMTAwID8gMWUxMDAgOiBkZjsKICAgICAgICByZXR1cm4gbGdhbW1hKChkZiArIDEpIC8gMikgLSBsZ2FtbWEoZGYgLyAyKSAtIGxvZyhzcXJ0KHBpICogZGYpICogc2NhbGUpICsgbG9nKHBvdygxICsgMSAvIGRmICogcG93KCh4IC0gbG9jYXRpb24pIC8gc2NhbGUsIDIpLCAtKGRmICsgMSkgLyAyKSk7CiAgICAgIH07IC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGUKICAgICAgLy8gdGhlIGxvZyBkZW5zaXR5IG9mIGEgd2VpYnVsbCBkaXN0cmlidXRpb246IAogICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2NoL3Itc291cmNlL2Jsb2IvYjE1NmUzYTcxMTk2N2Y1ODEzMWUyM2MxYjFkYzFlYTkwZTJmMGM0My9zcmMvbm1hdGgvZHdlaWJ1bGwuYwoKCiAgICAgIGxkLndlaWJ1bGwgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHNjYWxlKSB7CiAgICAgICAgaWYgKHggPCAwKSByZXR1cm4gLUluZmluaXR5OwogICAgICAgIGlmICh4ID09PSAwICYmIHNoYXBlIDwgMSkgcmV0dXJuIEluZmluaXR5OwogICAgICAgIHZhciB0bXAxID0gcG93KHggLyBzY2FsZSwgc2hhcGUgLSAxKTsKICAgICAgICB2YXIgdG1wMiA9IHRtcDEgKiAoeCAvIHNjYWxlKTsKICAgICAgICByZXR1cm4gLXRtcDIgKyBsb2coc2hhcGUgKiB0bXAxIC8gc2NhbGUpOwogICAgICB9OyAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlCiAgICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIGxvZ2lzdGljIGRpc3RyaWJ1dGlvbjogCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kbG9naXMuYwoKCiAgICAgIGxkLmxvZ2lzID0gZnVuY3Rpb24gKHgsIGxvY2F0aW9uLCBzY2FsZSkgewogICAgICAgIHggPSBhYnMoKHggLSBsb2NhdGlvbikgLyBzY2FsZSk7CiAgICAgICAgdmFyIGUgPSBleHAoLXgpOwogICAgICAgIHZhciBmID0gMS4wICsgZTsKICAgICAgICByZXR1cm4gLSh4ICsgbG9nKHNjYWxlICogZiAqIGYpKTsKICAgICAgfTsKCiAgICAgIGxkLmRpcmljaGxldCA9IGZ1bmN0aW9uICh4LCBhbHBoYSkgewogICAgICAgIHZhciBzdW1fYWxwaGEgPSAwOwogICAgICAgIHZhciBzdW1fbGdhbW1hX2FscGhhID0gMDsKICAgICAgICB2YXIgc3VtX2FscGhhX3N1Yl8xX2xvZ194ID0gMDsKICAgICAgICB2YXIgbiA9IGFscGhhLmxlbmd0aDsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIHN1bV9hbHBoYSArPSBhbHBoYVtpXTsKICAgICAgICAgIHN1bV9sZ2FtbWFfYWxwaGEgKz0gbGdhbW1hKGFscGhhW2ldKTsKICAgICAgICAgIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCArPSAoYWxwaGFbaV0gLSAxKSAqIGxvZyh4W2ldKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBsZ2FtbWEoc3VtX2FscGhhKSAtIHN1bV9sZ2FtbWFfYWxwaGEgKyBzdW1fYWxwaGFfc3ViXzFfbG9nX3g7CiAgICAgIH07CgogICAgICBsZC5leHAgPSBmdW5jdGlvbiAoeCwgcmF0ZSkgewogICAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhyYXRlKSAtIHJhdGUgKiB4OwogICAgICB9OwoKICAgICAgbGQudW5pZiA9IGZ1bmN0aW9uICh4LCBtaW4sIG1heCkgewogICAgICAgIHJldHVybiB4IDwgbWluIHx8IHggPiBtYXggPyAtSW5maW5pdHkgOiBsb2coMSAvIChtYXggLSBtaW4pKTsKICAgICAgfTsgLy8vLy8vLy8vLyBEaXNjcmV0ZSBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy8KICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgogICAgICBsZC5iZXJuID0gZnVuY3Rpb24gKHgsIHByb2IpIHsKICAgICAgICByZXR1cm4gISh4ID09PSAwIHx8IHggPT09IDEpID8gLUluZmluaXR5IDogbG9nKHggKiBwcm9iICsgKDEgLSB4KSAqICgxIC0gcHJvYikpOwogICAgICB9OwoKICAgICAgbGQuY2F0ID0gZnVuY3Rpb24gKHgsIHByb2JzKSB7CiAgICAgICAgaWYgKHggPCAxIHx8IHggPiBwcm9icy5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBsb2cocHJvYnNbeCAtIDFdKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBsZC5iaW5vbSA9IGZ1bmN0aW9uICh4LCBzaXplLCBwcm9iKSB7CiAgICAgICAgaWYgKHggPiBzaXplIHx8IHggPCAwKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHByb2IgPT09IDAgfHwgcHJvYiA9PT0gMSkgewogICAgICAgICAgcmV0dXJuIHNpemUgKiBwcm9iID09PSB4ID8gMCA6IC1JbmZpbml0eTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBsY2hvb3NlKHNpemUsIHgpICsgeCAqIGxvZyhwcm9iKSArIChzaXplIC0geCkgKiBsb2coMSAtIHByb2IpOwogICAgICB9OwoKICAgICAgbGQubmJpbm9tID0gZnVuY3Rpb24gKHgsIHNpemUsIHByb2IpIHsKICAgICAgICBpZiAoeCA8IDApIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbGNob29zZSh4ICsgc2l6ZSAtIDEsIHNpemUgLSAxKSArIHggKiBsb2coMSAtIHByb2IpICsgc2l6ZSAqIGxvZyhwcm9iKTsKICAgICAgfTsKCiAgICAgIGxkLmh5cGVyID0gZnVuY3Rpb24gKHgsIG0sIG4sIGspIHsKICAgICAgICBpZiAoeCA8IDAgfHwgeCA+IGspIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBsY2hvb3NlKG0sIHgpICsgbGNob29zZShuLCBrIC0geCkgLSBsY2hvb3NlKG0gKyBuLCBrKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBsZC5wb2lzID0gZnVuY3Rpb24gKHgsIGxhbWJkYSkgewogICAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhsYW1iZGEpICogeCAtIGxhbWJkYSAtIGxmYWN0b3JpYWwoeCk7CiAgICAgIH07CgogICAgICByZXR1cm4gbGQ7CiAgICB9KTsKICB9KShkaXN0cmlidXRpb25zKTsKCiAgdmFyIG1jbWMgPSB7ZXhwb3J0czoge319OwoKICAoZnVuY3Rpb24gKG1vZHVsZSkgewogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qcwogICAgLy8gSXQgc2hvdWxkIG1ha2Ugc2h1cmUgdGhhdCBtb2R1bGUgY2FuIGJlIGltcG9ydGVkIGJvdGggaW4gdGhlIGJyb3dzZXIsCiAgICAvLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC4KICAgIC8vIElmIHRoaXMgbW9kdWxlIGlzIGxvYWRlZCBpbiB0aGUgYnJvd3NlciBpdCB3aWxsIGNyZWF0ZWQgdGhlIGdsb2JhbAogICAgLy8gb2JqZWN0IG1jbWMgLgoKICAgIChmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICAgICBpZiAobW9kdWxlLmV4cG9ydHMpIHsKICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXQKICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cywKICAgICAgICAvLyBsaWtlIE5vZGUuCiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdykKICAgICAgICByb290Lm1jbWMgPSBmYWN0b3J5KCk7CiAgICAgIH0KICAgIH0pKGNvbW1vbmpzR2xvYmFsLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vLyBUaGUgYWN0dWFsIG1vZHVsZSBjb2RlIHN0YXJ0cyBoZXJlIC8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gIAogICAgICAvLy8vLy8vLy8vIEhlbHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqLwogICAgICB2YXIgcnVuaWYgPSBmdW5jdGlvbiBydW5pZihtaW4sIG1heCkgewogICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47CiAgICAgIH07CiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqLwoKCiAgICAgIHZhciBydW5pZl9kaXNjcmV0ZSA9IGZ1bmN0aW9uIHJ1bmlmX2Rpc2NyZXRlKG1pbiwgbWF4KSB7CiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47CiAgICAgIH07CiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkCiAgICAgICAqICBieSBtZWFuIGFuZCBzZC4gCiAgICAgICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovCgoKICAgICAgdmFyIHJub3JtID0gZnVuY3Rpb24gcm5vcm0obWVhbiwgc2QpIHsKICAgICAgICB2YXIgdSwgdiwgeCwgeSwgcTsKCiAgICAgICAgZG8gewogICAgICAgICAgdSA9IE1hdGgucmFuZG9tKCk7CiAgICAgICAgICB2ID0gMS43MTU2ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpOwogICAgICAgICAgeCA9IHUgLSAwLjQ0OTg3MTsKICAgICAgICAgIHkgPSBNYXRoLmFicyh2KSArIDAuMzg2NTk1OwogICAgICAgICAgcSA9IHggKiB4ICsgeSAqICgwLjE5NjAwICogeSAtIDAuMjU0NzIgKiB4KTsKICAgICAgICB9IHdoaWxlIChxID4gMC4yNzU5NyAmJiAocSA+IDAuMjc4NDYgfHwgdiAqIHYgPiAtNCAqIE1hdGgubG9nKHUpICogdSAqIHUpKTsKCiAgICAgICAgcmV0dXJuIHYgLyB1ICogc2QgKyBtZWFuOwogICAgICB9OwogICAgICAvKiogUmV0dXJucyBhIGRlZXAgY2xvbmUgb2Ygc3JjLCBzb3J0IG9mLi4uIEl0IG9ubHkgY29waWVzIGEgbGltaXRlZAogICAgICAgKiBudW1iZXIgb2YgdHlwZXMgYW5kLCBmb3IgZXhhbXBsZSwgZnVuY3Rpb24gYXJlIG5vdCBjb3BpZWQuIAogICAgICAgKiBGcm9tIGh0dHA6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1jbG9uZQogICAgICAgKi8KCgogICAgICB2YXIgZGVlcF9jbG9uZSA9IGZ1bmN0aW9uIGRlZXBfY2xvbmUoc3JjKSB7CiAgICAgICAgZnVuY3Rpb24gbWl4aW4oZGVzdCwgc291cmNlLCBjb3B5RnVuYykgewogICAgICAgICAgdmFyIG5hbWUsCiAgICAgICAgICAgICAgcywKICAgICAgICAgICAgICBlbXB0eSA9IHt9OwoKICAgICAgICAgIGZvciAobmFtZSBpbiBzb3VyY2UpIHsKICAgICAgICAgICAgLy8gdGhlICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSBjb25kaXRpb24gYXZvaWRzIGNvcHlpbmcgcHJvcGVydGllcyBpbiAic291cmNlIgogICAgICAgICAgICAvLyBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlLgkgRm9yIGV4YW1wbGUsIGlmIGRlc3QgaGFzIGEgY3VzdG9tIHRvU3RyaW5nKCkgbWV0aG9kLAogICAgICAgICAgICAvLyBkb24ndCBvdmVyd3JpdGUgaXQgd2l0aCB0aGUgdG9TdHJpbmcoKSBtZXRob2QgdGhhdCBzb3VyY2UgaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZQogICAgICAgICAgICBzID0gc291cmNlW25hbWVdOwoKICAgICAgICAgICAgaWYgKCEobmFtZSBpbiBkZXN0KSB8fCBkZXN0W25hbWVdICE9PSBzICYmICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSkgewogICAgICAgICAgICAgIGRlc3RbbmFtZV0gPSBjb3B5RnVuYyA/IGNvcHlGdW5jKHMpIDogczsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0KCiAgICAgICAgaWYgKCFzcmMgfHwgX3R5cGVvZihzcmMpICE9ICJvYmplY3QiIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpID09PSAiW29iamVjdCBGdW5jdGlvbl0iKSB7CiAgICAgICAgICAvLyBudWxsLCB1bmRlZmluZWQsIGFueSBub24tb2JqZWN0LCBvciBmdW5jdGlvbgogICAgICAgICAgcmV0dXJuIHNyYzsgLy8gYW55dGhpbmcKICAgICAgICB9CgogICAgICAgIGlmIChzcmMubm9kZVR5cGUgJiYgImNsb25lTm9kZSIgaW4gc3JjKSB7CiAgICAgICAgICAvLyBET00gTm9kZQogICAgICAgICAgcmV0dXJuIHNyYy5jbG9uZU5vZGUodHJ1ZSk7IC8vIE5vZGUKICAgICAgICB9CgogICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBEYXRlKSB7CiAgICAgICAgICAvLyBEYXRlCiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoc3JjLmdldFRpbWUoKSk7IC8vIERhdGUKICAgICAgICB9CgogICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgIC8vIFJlZ0V4cAogICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc3JjKTsgLy8gUmVnRXhwCiAgICAgICAgfQoKICAgICAgICB2YXIgciwgaSwgbDsKCiAgICAgICAgaWYgKHNyYyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAvLyBhcnJheQogICAgICAgICAgciA9IFtdOwoKICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICAgICAgICAgIGlmIChpIGluIHNyYykgewogICAgICAgICAgICAgIHIucHVzaChkZWVwX2Nsb25lKHNyY1tpXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGdlbmVyaWMgb2JqZWN0cwogICAgICAgICAgciA9IHNyYy5jb25zdHJ1Y3RvciA/IG5ldyBzcmMuY29uc3RydWN0b3IoKSA6IHt9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG1peGluKHIsIHNyYywgZGVlcF9jbG9uZSk7CiAgICAgIH07CiAgICAgIC8qKiBTcGVjaWFsaXplZCBjbG9uZSBmdW5jdGlvbiB0aGF0IG9ubHkgY2xvbmVzIHNjYWxhcnMgYW5kIG5lc3RlZCBhcnJheXMgd2hlcmUKICAgICAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvbgogICAgICAgKiBpcyBtZWFudCBhcyBhIGZhc3Qgd2F5IG9mIGNsb25pbmcgcGFyYW1ldGVyIGRyYXdzIHdpdGhpbiB0aGUgbWNtYyBzYW1wbGluZwogICAgICAgKiBsb29wLgogICAgICAgKi8KCgogICAgICB2YXIgY2xvbmVfcGFyYW1fZHJhdyA9IGZ1bmN0aW9uIGNsb25lX3BhcmFtX2RyYXcoeCkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHgpKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4WzBdKSkgewogICAgICAgICAgICAvLyB4IGlzIGFuIGFycmF5IG9mIGFycmF5cyBzbyB3ZSBuZWVkIHRvIGNsb25lIGl0IHJlY3Vyc2l2ZWx5CiAgICAgICAgICAgIHZhciB4X2NvcHkgPSBbXTsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSB4Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgeF9jb3B5LnB1c2goY2xvbmVfcGFyYW1fZHJhdyh4W2ldKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB4X2NvcHk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBXZSdsbCBhc3N1bWUgeCBpcyBhIGFycmF5cyBvZiBzY2FsYXJzCiAgICAgICAgICAgIHJldHVybiB4LnNsaWNlKDApOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBXZSdsbCBhc3N1bWUgeCBpcyBhIHNjYWxhcgogICAgICAgICAgcmV0dXJuIHg7CiAgICAgICAgfQogICAgICB9OwogICAgICAvKiogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIG51bWJlci4KICAgICAgICovCgoKICAgICAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uIGlzX251bWJlcihvYmplY3QpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PSAibnVtYmVyIiB8fCBfdHlwZW9mKG9iamVjdCkgPT0gIm9iamVjdCIgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBOdW1iZXI7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIChwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsL25lc3RlZCkgYXJyYXkuCiAgICAgICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLAogICAgICAgKiAgIFs1XSB3b3VsZCB5aWVsZCBhIDUgZWxlbWVudCBhcnJheSwgYW5kIFszLDNdIHdvdWxkIHlpZWxkIGEgMyBieSAzIG1hdHJpeC4KICAgICAgICogQHBhcmFtIGluaXQgLSBBIHZhbHVlIG9yIGEgZnVuY3Rpb24gdXNlZCB0byBmaWxsIGluIHRoZSBlYWNoIGVsZW1lbnQgaW4KICAgICAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIAogICAgICAgKiAgIGV2YWx1YXRlZCBvbmNlIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBpdCdzIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWQgdG8KICAgICAgICogICBmaWxsIGluIGVhY2ggZWxlbWVudC4KICAgICAgICogQGV4YW1wbGUgCiAgICAgICAqIC8vIFRoZSBmb2xsb3dpbmcgd291bGQgcmV0dXJuIFtbMSwxXSxbMSwxXSxbMSwxXV0KICAgICAgICogY3JlYXRlX2FycmF5KFsyLDNdLCAxKQogICAgICAgKi8KCgogICAgICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24gY3JlYXRlX2FycmF5KGRpbSwgaW5pdCkgewogICAgICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoZGltWzBdKTsKICAgICAgICB2YXIgaTsKCiAgICAgICAgaWYgKGRpbS5sZW5ndGggPT0gMSkgewogICAgICAgICAgLy8gRmlsbCBpdCB1cCB3aXRoIGluaXQKICAgICAgICAgIGlmICh0eXBlb2YgaW5pdCA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKICAgICAgICAgICAgICBhcnJbaV0gPSBpbml0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICAgIGFycltpXSA9IGluaXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGRpbS5sZW5ndGggPiAxKSB7CiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKICAgICAgICAgICAgYXJyW2ldID0gY3JlYXRlX2FycmF5KGRpbS5zbGljZSgxKSwgaW5pdCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93ICJjcmVhdGVfYXJyYXkgY2FuJ3QgY3JlYXRlIGEgZGltZW5zaW9ubGVzcyBhcnJheSI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYXJyOwogICAgICB9OwogICAgICAvKioKICAgICAgICogUmV0dXJuIHRoZSBkaW1lbnNpb25zIG9mIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGFzIGFuIGFycmF5LiBGb3IgCiAgICAgICAqIGV4YW1wbGUsIGFycmF5X2RpbSggW1sxLCAyXSwgWzEsIDJdXSApIHNob3VsZCByZXR1cm4gWzIsIDJdCiAgICAgICAqIEFzc3VtZXMgdGhhdCBhbGwgYXJyYXlzIGluc2lkZSBhbm90aGVyIGFycmF5IGFyZSBvZiB0aGUgc2FtZSBsZW5ndGguCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIFNob3VsZCByZXR1cm4gWzQsIDIsIDFdCiAgICAgICAqIGFycmF5X2RpbShjcmVhdGVfYXJyYXkoWzQsIDIsIDFdLCAwKSkKICAgICAgICovCgoKICAgICAgdmFyIGFycmF5X2RpbSA9IGZ1bmN0aW9uIGFycmF5X2RpbShhKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYVswXSkpIHsKICAgICAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gW2EubGVuZ3RoXTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBDaGVja3MgaWYgdHdvIGFycmF5cyBhcmUgZXF1YWwgaW4gdGhlIHNlbnNlIHRoYXQgdGhleSBjb250YWluIHRoZSBzYW1lIGVsZW1lbnRzCiAgICAgICAqIGFzIGp1ZGdlZCBieSB0aGUgIj09IiBvcGVyYXRvci4gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgogICAgICAgKiBBZGFwdGVkIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTQ4NTM5NzQvMTAwMTg0OAogICAgICAgKi8KCgogICAgICB2YXIgYXJyYXlfZXF1YWwgPSBmdW5jdGlvbiBhcnJheV9lcXVhbChhMSwgYTIpIHsKICAgICAgICBpZiAoYTEubGVuZ3RoICE9IGEyLmxlbmd0aCkgcmV0dXJuIGZhbHNlOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGExLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIG5lc3RlZCBhcnJheXMKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGExW2ldKSAmJiBBcnJheS5pc0FycmF5KGEyW2ldKSkgewogICAgICAgICAgICAvLyByZWN1cnNlIGludG8gdGhlIG5lc3RlZCBhcnJheXMKICAgICAgICAgICAgaWYgKCFhcnJheV9lcXVhbChhMVtpXSwgYTJbaV0pKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgaWYgKGExW2ldICE9IGEyW2ldKSB7CiAgICAgICAgICAgIC8vIFdhcm5pbmcgLSB0d28gZGlmZmVyZW50IG9iamVjdCBpbnN0YW5jZXMgd2lsbCBuZXZlciBiZSBlcXVhbDoge3g6MjB9ICE9IHt4OjIwfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIFRyYXZlcnNlcyBhIHBvc3NpYmx5IG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgImxlYWYgbm9kZXMiLCAKICAgICAgICogdGhhdCBpcywgdmFsdWVzIHRoYXQgYXJlIG5vdCBhcnJheXMuIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHNhbWUgc2l6ZSBhcwogICAgICAgKiBhLgogICAgICAgKi8KCgogICAgICB2YXIgbmVzdGVkX2FycmF5X2FwcGx5ID0gZnVuY3Rpb24gbmVzdGVkX2FycmF5X2FwcGx5KGEsIGZ1bikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGEubGVuZ3RoKTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVzdWx0W2ldID0gbmVzdGVkX2FycmF5X2FwcGx5KGFbaV0sIGZ1bik7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZ1bihhKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKiBSYW5kb21pemluZyB0aGUgYXJyYXkgZWxlbWVudCBvcmRlciBpbi1wbGFjZS4gVXNpbmcgRHVyc3RlbmZlbGQKICAgICAgICogc2h1ZmZsZSBhbGdvcml0aG0uIEFkYXB0ZWQgZnJvbSBoZXJlOiAKICAgICAgICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTI2NDY4NjQvMTAwMTg0OAogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBzaHVmZmxlX2FycmF5KGFycmF5KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7CiAgICAgICAgICB2YXIgdGVtcCA9IGFycmF5W2ldOwogICAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTsKICAgICAgICAgIGFycmF5W2pdID0gdGVtcDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhcnJheTsKICAgICAgfQogICAgICAvKioKICAgICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5CiAgICAgICAqIG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgImxlYWYgbm9kZXMiIGFuZCByZXR1cm5zIGFuIGFycmF5IAogICAgICAgKiBvZiB0aGUgc2FtZSBzaXplIGFzIGEuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseQogICAgICAgKiBicmFuY2hlcyByYW5kb21seS4KICAgICAgICovCgoKICAgICAgdmFyIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkgPSBmdW5jdGlvbiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KGEsIGZ1bikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgICB2YXIgbGVuID0gYS5sZW5ndGg7CiAgICAgICAgICB2YXIgaTsKICAgICAgICAgIHZhciBhcnJheV9pcyA9IFtdOwoKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICBhcnJheV9pc1tpXSA9IGk7CiAgICAgICAgICB9CgogICAgICAgICAgc2h1ZmZsZV9hcnJheShhcnJheV9pcyk7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gW107CgogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhcnJheV9pID0gYXJyYXlfaXNbaV07CiAgICAgICAgICAgIHJlc3VsdFthcnJheV9pXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2FycmF5X2ldLCBmdW4pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmdW4oYSk7CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioKICAgICAgICogQWxsb3dzIGEgcHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmdWx0cyBjYW4gYmUKICAgICAgICogb3ZlcnJpZGRlbiBieSBhbiBvcHRpb25zIG9iamVjdC4KICAgICAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmcKICAgICAgICogIEBwYXJhbSBteV9vcHRpb25zIC0gYW4gb3B0aW9uIG9iamVjdCB0aGF0IGNvdWxkIGhhdmUgb3B0aW9uX25hbWUgCiAgICAgICAqICAgIGFzIGEgbWVtYmVyLgogICAgICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgCiAgICAgICAqICAgaXMgbm90IGRlZmluZWQgaW4gbXlfb3B0aW9ucy4KICAgICAgICogQGV4YW1wbGUKICAgICAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9CiAgICAgICAqIHZhciBwaSA9IGdldF9vcHRpb24oInBpIiwgbXlfb3B0aW9ucywgMy4xNCkKICAgICAgICovCiAgICAgIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuCiAgICAgIC8vIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LiBGb3IgZXhhbXBsZToKICAgICAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbigicGkiLCBteV9vcHRpb25zLCAzLjE0KQoKCiAgICAgIHZhciBnZXRfb3B0aW9uID0gZnVuY3Rpb24gZ2V0X29wdGlvbihvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7CiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uX25hbWUpICYmIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSB1bmRlZmluZWQgJiYgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IG51bGwgPyBvcHRpb25zW29wdGlvbl9uYW1lXSA6IGRlZmF1bF92YWx1ZTsKICAgICAgfTsKICAgICAgLyoqIFZlcnNpb24gb2YgZ2V0X29wdGlvbiB3aGVyZSB0aGUgb3B0aW9uIHNob3VsZCBiZSBhIG9uZSBvciBtdWx0aS1kaW1lbnNpb25hbAogICAgICAgKiBhcnJheSBhbmQgd2hlcmUgdGhlIGRlZmF1bHQgY2FuIGJlIG92ZXJyaWRkZW4gZWl0aGVyIGJ5IGEgc2NhbGFyIG9yIGJ5IGFuIGFycmF5LgogICAgICAgKiBJZiBpdCdzIGEgc2NhbGFyIHRoZSB0aGF0IHNjYWxhciBpcyB1c2VkIHRvIGluaXRpYWxpemUgYW4gYXJyYXkgd2l0aCAKICAgICAgICogZGltIGRpbWVuc2lvbnMuCiAgICAgICAqIAogICAgICAgKi8KCgogICAgICB2YXIgZ2V0X211bHRpZGltX29wdGlvbiA9IGZ1bmN0aW9uIGdldF9tdWx0aWRpbV9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRpbSwgZGVmYXVsX3ZhbHVlKSB7CiAgICAgICAgdmFyIHZhbHVlID0gZ2V0X29wdGlvbihvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKTsKCiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgdmFsdWUgPSBjcmVhdGVfYXJyYXkoZGltLCB2YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWFycmF5X2VxdWFsKGFycmF5X2RpbSh2YWx1ZSksIGRpbSkpIHsKICAgICAgICAgIHRocm93ICJUaGUgb3B0aW9uICIgKyBvcHRpb25fbmFtZSArICIgaXMgb2YgZGltZW5zaW9uIFsiICsgYXJyYXlfZGltKHZhbHVlKSArICJdIGJ1dCBzaG91bGQgYmUgWyIgKyBkaW0gKyAiXS4iOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9OyAvLy8vLy8vLy8vIEZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIG9iamVjdHMgLy8vLy8vLy8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgLyoqCiAgICAgICAqIFJldHVybnMgYSBmaXhlZCAoc2FtZSBldmVyeSB0aW1lKSBudW1iZXIgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIGluaXRpYWxpemUKICAgICAgICogYSBwYXJhbWV0ZXIgb2YgYSBjZXJ0YWluIHR5cGUsIHBvc3NpYmx5IHdpdGggbG93ZXIgYW5kIHVwcGVyIGJvdW5kcy4KICAgICAgICogVGhlIHBvc3NpbGUgdHlwZXMgYXJlICJyZWFsIiwgImludCIsIGFuZCAiYmluYXJ5Ii4KICAgICAgICovCgoKICAgICAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbiBwYXJhbV9pbml0X2ZpeGVkKHR5cGUsIGxvd2VyLCB1cHBlcikgewogICAgICAgIGlmIChsb3dlciA+IHVwcGVyKSB7CiAgICAgICAgICB0aHJvdyAiQ2FuIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciB3aGVyZSBsb3dlciBib3VuZCA+IHVwcGVyIGJvdW5kIjsKICAgICAgICB9CgogICAgICAgIGlmICh0eXBlID09PSAicmVhbCIpIHsKICAgICAgICAgIGlmIChsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gMC41OwogICAgICAgICAgfSBlbHNlIGlmIChsb3dlciA9PT0gLUluZmluaXR5KSB7CiAgICAgICAgICAgIHJldHVybiB1cHBlciAtIDAuNTsKICAgICAgICAgIH0gZWxzZSBpZiAodXBwZXIgPT09IEluZmluaXR5KSB7CiAgICAgICAgICAgIHJldHVybiBsb3dlciArIDAuNTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPD0gdXBwZXIpIHsKICAgICAgICAgICAgcmV0dXJuIChsb3dlciArIHVwcGVyKSAvIDI7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiaW50IikgewogICAgICAgICAgaWYgKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgfSBlbHNlIGlmIChsb3dlciA9PT0gLUluZmluaXR5KSB7CiAgICAgICAgICAgIHJldHVybiB1cHBlciAtIDE7CiAgICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gbG93ZXIgKyAxOwogICAgICAgICAgfSBlbHNlIGlmIChsb3dlciA8PSB1cHBlcikgewogICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgobG93ZXIgKyB1cHBlcikgLyAyKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJiaW5hcnkiKSB7CiAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CgogICAgICAgIHRocm93ICJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSAiICsgdHlwZSArICJbIiArIGxvd2VyICsgIiwgIiArIHVwcGVyICsgIl0iOwogICAgICB9OwogICAgICAvKioKICAgICAgICogQ29tcGxldGVzIHBhcmFtc190b19jb21wbGV0ZSwgYW4gb2JqZWN0IGNvbnRhaW5pbmcgcGFyYW1ldGVyIGRlc2NyaXB0aW9ucywgCiAgICAgICAqIGFuZCBpbml0aWFsaXplcyBub24taW5pdGlhbGl6ZWQgcGFyYW1ldGVycy4gVGhpcyBtb2RpZmllZCB2ZXJzaW9uIG9mCiAgICAgICAqIHBhcmFtc190b19jb21wbGV0ZSBpcyByZXR1cm5lZCBhcyBhIGRlZXAgY29weSBhbmQgbm90IG1vZGlmaWVkIGluIHBsYWNlLgogICAgICAgKiBJbml0aWFsaXphdGlvbiBpcyBkb25lIGJ5IHN1cHBseWluZyBhIHBhcmFtX2luaXQgZnVuY3Rpb24gd2l0aCBzaWduYXR1cmUKICAgICAgICogZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB0aGF0IHNob3VsZCByZXR1cm4gYSBzaW5nbGUgbnVtYmVyIAogICAgICAgKiAobGlrZSBwYXJhbV9pbml0X2ZpeGVkLCBmb3IgZXhhbXBsZSkuCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIHZhciBwYXJhbXMgPSB7ICJtdSI6IHsidHlwZSI6ICJyZWFsIn0gfQogICAgICAgKiBwYXJhbXMgPSBjb21wbGV0ZV9wYXJhbXMocGFyYW1zKTsKICAgICAgICogLy8gcGFyYW1zIHNob3VsZCBub3cgYmU6CiAgICAgICAqIC8vICB7Im11IjogeyAidHlwZSI6ICJyZWFsIiwgImRpbSI6IFsxXSwgInVwcGVyIjogSW5maW5pdHksCiAgICAgICAqIC8vICAgICAgICAgICAibG93ZXIiOiAtSW5maW5pdHksICJpbml0IjogMC41IH19CiAgICAgICAqLwoKCiAgICAgIHZhciBjb21wbGV0ZV9wYXJhbXMgPSBmdW5jdGlvbiBjb21wbGV0ZV9wYXJhbXMocGFyYW1zX3RvX2NvbXBsZXRlLCBwYXJhbV9pbml0KSB7CiAgICAgICAgdmFyIHBhcmFtcyA9IGRlZXBfY2xvbmUocGFyYW1zX3RvX2NvbXBsZXRlKTsKCiAgICAgICAgZm9yICh2YXIgcGFyYW1fbmFtZSBpbiBwYXJhbXMpIHsKICAgICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtX25hbWUpKSBjb250aW51ZTsKICAgICAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1twYXJhbV9uYW1lXTsKCiAgICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ0eXBlIikpIHsKICAgICAgICAgICAgcGFyYW0udHlwZSA9ICJyZWFsIjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJkaW0iKSkgewogICAgICAgICAgICBwYXJhbS5kaW0gPSBbMV07CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGlzX251bWJlcihwYXJhbS5kaW0pKSB7CiAgICAgICAgICAgIHBhcmFtLmRpbSA9IFtwYXJhbS5kaW1dOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwYXJhbS50eXBlID09ICJiaW5hcnkiKSB7CiAgICAgICAgICAgIHBhcmFtLnVwcGVyID0gMTsKICAgICAgICAgICAgcGFyYW0ubG93ZXIgPSAwOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghcGFyYW0uaGFzT3duUHJvcGVydHkoInVwcGVyIikpIHsKICAgICAgICAgICAgcGFyYW0udXBwZXIgPSBJbmZpbml0eTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJsb3dlciIpKSB7CiAgICAgICAgICAgIHBhcmFtLmxvd2VyID0gLUluZmluaXR5OwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwYXJhbS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpKSB7CiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMganVzdCBhIG51bWJlciBvciBhIG5lc3RlZCBhcnJheSB3ZSBsZWF2ZSBpdCBhbG9uZSwgYnV0IGlmLi4uCiAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAvLyBwYXJhbS5pbml0IGlzIGEgZnVuY3Rpb24sIHVzZSB0aGF0IHRvIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlci4KICAgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW0uaW5pdCgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHsKICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgd2hlcmUgdGhlIHBhcmFtLmluaXQgZXhpc3QgYnV0CiAgICAgICAgICAgICAgLy8gaXMgbm90IGFuIGFycmF5LiBUaGVuIGFzc3VtZSBpdCBpcyBhIG51bWJlciBvciBhIGZ1bmN0aW9uIGFuZCB1c2UKICAgICAgICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuCiAgICAgICAgICAgICAgcGFyYW0uaW5pdCA9IGNyZWF0ZV9hcnJheShwYXJhbS5kaW0sIHBhcmFtLmluaXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGRlZmF1bHQgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uCiAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcGFyYW1zOwogICAgICB9OyAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKgogICAgICAgKiBAaW50ZXJmYWNlCiAgICAgICAqIEEgU3RlcHBlciBpcyBhbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIHB1c2hpbmcgYXJvdW5kIG9uZQogICAgICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvbgogICAgICAgKiBkZWZpbmVkIGJ5IHRoZSBsb2cgcG9zdGVyaW9yLiBUaGlzIGRlZmluZXMgdGhlIFN0ZXBwZXIgImludGVyZmFjZSIsCiAgICAgICAqIHdoZXJlICJpbnRlcmZhY2UiIG1lYW5zIHRoYXQgU3RlcHBlciBkZWZpbmVzIGEgY2xhc3MgdGhhdCBpcyBuZXZlcgogICAgICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWQKICAgICAgICogc3RlcHBlciBmdW5jdGlvbnMuCiAgICAgICAqIEBpbnRlcmZhY2UKICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CiAgICAgICAqICAgeyJtdSI6IHsgInR5cGUiOiAicmVhbCIsICJkaW0iOiBbMV0sICJ1cHBlciI6IEluZmluaXR5LCAKICAgICAgICogICAibG93ZXIiOiAtSW5maW5pdHksICJpbml0IjogMC41IH19CiAgICAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgImNvbXBsZXRlIiwgdGhhdCBpcywKICAgICAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycyBpbiBwYXJhbXMKICAgICAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzCiAgICAgICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOgogICAgICAgKiAgIHttdTogMTAsIHNpZ21hOiA1LCBiZXRhOiBbMSwgMi41XX0KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGUKICAgICAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3QKICAgICAgICogICBzaG91bGQgY2hhbmdlIGlmIHRoZSB0aGUgdmFsdWVzIGluIHN0YXRlIGFyZSBjaGFuZ2VkLgogICAgICAKICAgICAgICovCgoKICAgICAgdmFyIFN0ZXBwZXIgPSBmdW5jdGlvbiBTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KSB7CiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgIHRoaXMubG9nX3Bvc3QgPSBsb2dfcG9zdDsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBTaG91bGQgcmV0dXJuIHRoZSBuZXcgc3RhdGUsCiAgICAgICAqIGJ1dCBpcyBtYWlubHkgY2FsbGVkIGZvciBpdCdzIHNpZGUgZWZmZWN0IG9mIG1ha2luZyBhIGNoYW5nZSBpbiB0aGUKICAgICAgICogc3RhdGUgb2JqZWN0LgogICAgICAgKi8KCgogICAgICBTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93ICJFdmVyeSBTdGVwcGVyIG5lZWQgdG8gaW1wbGVtZW50IHN0ZXAoKSI7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgYWRhcHQgd2hpbGUgc3RlcHBpbmcuCiAgICAgICAqLwoKCiAgICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7Ly8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyAKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBjZWFzZSBhZGFwdGluZyB3aGlsZSBzdGVwcGluZy4KICAgICAgICovCgoKICAgICAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgey8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gCiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluZyBpbmZvIHJlZ2FyZGluZyB0aGUgc3RlcHBlci4KICAgICAgICovCgoKICAgICAgU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHN0YXRlIG9mIHRoZSBzdGVwcGVyLgogICAgICAgIHJldHVybiB7fTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpbgogICAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgogICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLgogICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKQogICAgICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhCiAgICAgICAqIG51bWJlciBhbmQgbG9nX3NjYWxlIGRlZmluZXMgdGhlIHNjYWxlIG9mIHRoZSBwcm9wb3NhbCBzb21laG93LgogICAgICAqLwoKCiAgICAgIHZhciBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBnZW5lcmF0ZV9wcm9wb3NhbCkgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoICE9IDEpIHsKICAgICAgICAgIHRocm93ICJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIHBhcmFtZXRlci4iOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CiAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKCiAgICAgICAgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgIHRocm93ICJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIuIjsKICAgICAgICB9CgogICAgICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjsKICAgICAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7CiAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSA9IGdldF9vcHRpb24oInByb3BfbG9nX3NjYWxlIiwgb3B0aW9ucywgMCk7CiAgICAgICAgdGhpcy5iYXRjaF9zaXplID0gZ2V0X29wdGlvbigiYmF0Y2hfc2l6ZSIsIG9wdGlvbnMsIDUwKTsKICAgICAgICB0aGlzLm1heF9hZGFwdGF0aW9uID0gZ2V0X29wdGlvbigibWF4X2FkYXB0YXRpb24iLCBvcHRpb25zLCAwLjMzKTsKICAgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oImluaXRpYWxfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIDEuMCk7CiAgICAgICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUgPSBnZXRfb3B0aW9uKCJ0YXJnZXRfYWNjZXB0X3JhdGUiLCBvcHRpb25zLCAwLjQ0KTsKICAgICAgICB0aGlzLmlzX2FkYXB0aW5nID0gZ2V0X29wdGlvbigiaXNfYWRhcHRpbmciLCBvcHRpb25zLCB0cnVlKTsKICAgICAgICB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsID0gZ2VuZXJhdGVfcHJvcG9zYWw7CiAgICAgICAgdGhpcy5hY2NlcHRhbmNlX2NvdW50ID0gMDsKICAgICAgICB0aGlzLmJhdGNoX2NvdW50ID0gMDsKICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwOwogICAgICB9OwoKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHBhcmFtX3N0YXRlID0gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdOwogICAgICAgIHZhciBwYXJhbV9wcm9wb3NhbCA9IHRoaXMuZ2VuZXJhdGVfcHJvcG9zYWwocGFyYW1fc3RhdGUsIHRoaXMucHJvcF9sb2dfc2NhbGUpOwoKICAgICAgICBpZiAocGFyYW1fcHJvcG9zYWwgPCB0aGlzLmxvd2VyIHx8IHBhcmFtX3Byb3Bvc2FsID4gdGhpcy51cHBlcikgOyBlbHNlIHsKICAgICAgICAgIC8vIG1ha2UgYSBNZXRyb3BvbGlzIHN0ZXAKICAgICAgICAgIHZhciBjdXJyX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwogICAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gcGFyYW1fcHJvcG9zYWw7CiAgICAgICAgICB2YXIgcHJvcF9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTsKICAgICAgICAgIHZhciBhY2NlcHRfcHJvYiA9IE1hdGguZXhwKHByb3BfbG9nX2RlbnMgLSBjdXJyX2xvZ19kZW5zKTsKCiAgICAgICAgICBpZiAoYWNjZXB0X3Byb2IgPiBNYXRoLnJhbmRvbSgpKSB7CiAgICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWwKICAgICAgICAgICAgaWYgKHRoaXMuaXNfYWRhcHRpbmcpIHRoaXMuYWNjZXB0YW5jZV9jb3VudCsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbQogICAgICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9zdGF0ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmlzX2FkYXB0aW5nKSB7CiAgICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24rKzsKCiAgICAgICAgICBpZiAodGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID49IHRoaXMuYmF0Y2hfc2l6ZSkgewogICAgICAgICAgICAvLyB0aGVuIGFkYXB0CiAgICAgICAgICAgIHRoaXMuYmF0Y2hfY291bnQrKzsKICAgICAgICAgICAgdmFyIGxvZ19zZF9hZGp1c3RtZW50ID0gTWF0aC5taW4odGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gLyBNYXRoLnNxcnQodGhpcy5iYXRjaF9jb3VudCkpOwoKICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXB0YW5jZV9jb3VudCAvIHRoaXMuYmF0Y2hfc2l6ZSA+IHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlKSB7CiAgICAgICAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSArPSBsb2dfc2RfYWRqdXN0bWVudDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlIC09IGxvZ19zZF9hZGp1c3RtZW50OwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwOwogICAgICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXTsKICAgICAgfTsKCiAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSB0cnVlOwogICAgICB9OwoKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmlzX2FkYXB0aW5nID0gZmFsc2U7CiAgICAgIH07CgogICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcHJvcF9sb2dfc2NhbGU6IHRoaXMucHJvcF9sb2dfc2NhbGUsCiAgICAgICAgICBpc19hZGFwdGluZzogdGhpcy5pc19hZGFwdGluZywKICAgICAgICAgIGFjY2VwdGFuY2VfY291bnQ6IHRoaXMuYWNjZXB0YW5jZV9jb3VudCwKICAgICAgICAgIGl0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb246IHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiwKICAgICAgICAgIGJhdGNoX2NvdW50OiB0aGlzLmJhdGNoX2NvdW50CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIEZ1bmN0aW9uIHJldHVybmluZyBhIE5vcm1hbCBwcm9wb3NhbC4KICAgICAgICovCgoKICAgICAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIG5vcm1hbF9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKICAgICAgICByZXR1cm4gcm5vcm0ocGFyYW1fc3RhdGUsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBAY2xhc3MKICAgICAgICogQGF1Z21lbnRzIHtPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcn0KICAgICAgICogQSAic3ViY2xhc3MiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy4KICAgICAgICovCgoKICAgICAgdmFyIFJlYWxNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIFJlYWxNZXRyb3BvbGlzU3RlcHBlcihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIG5vcm1hbF9wcm9wb3NhbCk7CiAgICAgIH07CgogICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyOwogICAgICAvKioKICAgICAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2FsLgogICAgICAgKi8KCiAgICAgIHZhciBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbiBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwocGFyYW1fc3RhdGUsIHByb3BfbG9nX3NjYWxlKSB7CiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQocm5vcm0ocGFyYW1fc3RhdGUsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSkpOwogICAgICB9OwogICAgICAvKioKICAgICAgKiBAY2xhc3MKICAgICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfQogICAgICAqIEEgInN1YmNsYXNzIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2Fscy4KICAgICAgKi8KCgogICAgICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiBJbnRNZXRyb3BvbGlzU3RlcHBlcihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7CiAgICAgIH07CgogICAgICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEludE1ldHJvcG9saXNTdGVwcGVyOwogICAgICAvKioKICAgICAgICogQGNsYXNzCiAgICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQogICAgICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluCiAgICAgICAqIHRoZSBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUMiCiAgICAgICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkgZm9yIHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwgYXJyYXlzLiBUaGF0CiAgICAgICAqIGlzLCBpbnN0ZWFkIG9mIGp1c3QgdGFraW5nIGEgc3RlcCBmb3IgYSBvbmUtZGltZW5zaW9uYWwgcGFyYW1ldGVyIGxpa2UgCiAgICAgICAqIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLCB0aGlzIFN0ZXBwZXIgaXMgcmVzcG9uc2libGUgZm9yIHRha2luZyBzdGVwcyAKICAgICAgICogZm9yIGEgbXVsdGlkaW1lbnNpb25hbCBhcnJheS4gSXQncyBzdGlsbCBwcmV0dHkgZHVtYiBhbmQganVzdCB0YWtlcwogICAgICAgKiBvbmUtZGltZW5zaW9uYWwgc3RlcHMgZm9yIGVhY2ggcGFyYW1ldGVyIGNvbXBvbmVudCwgdGhvdWdoLgogICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgCiAgICAgICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICAqIEBwYXJhbSBTdWJTdGVwcGVyIC0gYSBjb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGUgb2Ygb25lIGRpbWVuc2lvbmFsIFN0ZXBwZXIgdG8gYXBwbHkgb24KICAgICAgICogICBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLgogICAgICAqLwoKICAgICAgdmFyIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBTdWJTdGVwcGVyKSB7CiAgICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKICAgICAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgogICAgICAgIGlmIChwYXJhbV9uYW1lcy5sZW5ndGggIT0gMSkgewogICAgICAgICAgdGhyb3cgIk11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLiI7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTsKICAgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwogICAgICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjsKICAgICAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7CiAgICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CiAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oInByb3BfbG9nX3NjYWxlIiwgb3B0aW9ucywgdGhpcy5kaW0sIDApOwogICAgICAgIHRoaXMuYmF0Y2hfc2l6ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oImJhdGNoX3NpemUiLCBvcHRpb25zLCB0aGlzLmRpbSwgNTApOwogICAgICAgIHRoaXMubWF4X2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJtYXhfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTsKICAgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9tdWx0aWRpbV9vcHRpb24oImluaXRpYWxfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAxLjApOwogICAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X211bHRpZGltX29wdGlvbigidGFyZ2V0X2FjY2VwdF9yYXRlIiwgb3B0aW9ucywgdGhpcy5kaW0sIDAuNDQpOwogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJpc19hZGFwdGluZyIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTsgLy8gVGhpcyBoYWNrIGJlbG93IGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBhcnJheSBvZiAKICAgICAgICAvLyBvbmUgZGltZW5zaW9uYWwgc3RlcHBlcnMgYWNjb3JkaW5nIHRvIGRpbS4KCiAgICAgICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IGZ1bmN0aW9uIGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0sIHN1YnN0YXRlLCBsb2dfcG9zdCwgcHJvcF9sb2dfc2NhbGUsIGJhdGNoX3NpemUsIG1heF9hZGFwdGF0aW9uLCBpbml0aWFsX2FkYXB0YXRpb24sIHRhcmdldF9hY2NlcHRfcmF0ZSwgaXNfYWRhcHRpbmcpIHsKICAgICAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdOwoKICAgICAgICAgIGlmIChkaW0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgc3Vib3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIHByb3BfbG9nX3NjYWxlOiBwcm9wX2xvZ19zY2FsZVtpXSwKICAgICAgICAgICAgICAgIGJhdGNoX3NpemU6IGJhdGNoX3NpemVbaV0sCiAgICAgICAgICAgICAgICBtYXhfYWRhcHRhdGlvbjogbWF4X2FkYXB0YXRpb25baV0sCiAgICAgICAgICAgICAgICBpbml0aWFsX2FkYXB0YXRpb246IGluaXRpYWxfYWRhcHRhdGlvbltpXSwKICAgICAgICAgICAgICAgIHRhcmdldF9hY2NlcHRfcmF0ZTogdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLAogICAgICAgICAgICAgICAgaXNfYWRhcHRpbmc6IGlzX2FkYXB0aW5nW2ldCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB2YXIgc3VicGFyYW0gPSB7fTsKICAgICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pOwogICAgICAgICAgICAgIHN1YnBhcmFtW2ldLmRpbSA9IFsxXTsgLy8gQXMgdGhpcyBzaG91bGQgbm93IGJlIGEgb25lLWRpbSBwYXJhbWV0ZXIKCiAgICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWQKCiAgICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgU3ViU3RlcHBlcihzdWJwYXJhbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBzdWJvcHRpb25zKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZVtpXSwgYmF0Y2hfc2l6ZVtpXSwgbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbltpXSwgdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZ1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gc3Vic3RlcHBlcnM7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0LCB0aGlzLnByb3BfbG9nX3NjYWxlLCB0aGlzLmJhdGNoX3NpemUsIHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uLCB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7CiAgICAgIH07CgogICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CgogICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLgogICAgICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CiAgICAgICAgICByZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgc3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CiAgICAgICAgICBzdWJzdGVwcGVyLnN0b3BfYWRhcHRhdGlvbigpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CiAgICAgICAgICByZXR1cm4gc3Vic3RlcHBlci5pbmZvKCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBAY2xhc3MKICAgICAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfQogICAgICAgKiBBICJzdWJjbGFzcyIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCiAgICAgICAqLwoKCiAgICAgIHZhciBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CiAgICAgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIpOwogICAgICB9OwoKICAgICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwogICAgICAvKioKICAgICAgICogQGNsYXNzCiAgICAgICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn0KICAgICAgICogQSAic3ViY2xhc3MiIG9mIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuCiAgICAgICAqLwoKICAgICAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CiAgICAgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBJbnRNZXRyb3BvbGlzU3RlcHBlcik7CiAgICAgIH07CgogICAgICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgIC8qKgogICAgICAgKiBAY2xhc3MKICAgICAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9CiAgICAgICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGEgc3RlcCBmb3IgYSBiaW5hcnkgcGFyYW1ldGVyLgogICAgICAgKiBUaGlzIGlzIGRvbmUgYnkgZXZhbHVhdGluZyB0aGUgbG9nIHBvc3RlcmlvciBmb3IgYm90aCBzdGF0ZXMgb2YgdGhlCiAgICAgICAqIHBhcmFtZXRlciBhbmQgdGhlbiBzZWxlY3RpbmcgYSBzdGF0ZSByYW5kb21seSB3aXRoIHByb2JhYmlsaXR5IHJlbGF0aXZlIAogICAgICAgKiB0byB0aGUgcG9zdGVyaW9yIG9mIGVhY2ggc3RhdGUuCiAgICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi4KICAgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgogICAgICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gCiAgICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KICAgICAgKi8KCiAgICAgIHZhciBCaW5hcnlTdGVwcGVyID0gZnVuY3Rpb24gQmluYXJ5U3RlcHBlcihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoID09IDEpIHsKICAgICAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyAiQmluYXJ5U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuIjsKICAgICAgICB9CiAgICAgIH07CgogICAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJpbmFyeVN0ZXBwZXI7CgogICAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7CiAgICAgICAgdmFyIHplcm9fbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTsKICAgICAgICB2YXIgb25lX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwogICAgICAgIHZhciBtYXhfbG9nX2RlbnMgPSBNYXRoLm1heCh6ZXJvX2xvZ19kZW5zLCBvbmVfbG9nX2RlbnMpOwogICAgICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zOwogICAgICAgIG9uZV9sb2dfZGVucyAtPSBtYXhfbG9nX2RlbnM7CiAgICAgICAgdmFyIHplcm9fcHJvYiA9IE1hdGguZXhwKHplcm9fbG9nX2RlbnMgLSBNYXRoLmxvZyhNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zKSArIE1hdGguZXhwKG9uZV9sb2dfZGVucykpKTsKCiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCB6ZXJvX3Byb2IpIHsKICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9IC8vIGVsc2Uga2VlcCB0aGUgcGFyYW0gYXQgMSAuCgoKICAgICAgICByZXR1cm4gMTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICogQGNsYXNzCiAgICAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9CiAgICAgICogSnVzdCBsaWtlIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgdGhpcyBTdGVwcGVyIHRha2VzIGEgc3RlcHMgZm9yCiAgICAgICogYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciBieSB1cGRhdGluZyBlYWNoIGNvbXBvbmVudCBpbiB0dXJuLiBUaGUgZGlmZmVyZW5jZQogICAgICAqIGlzIHRoYXQgdGhpcyBzdGVwcGVyIHdvcmtzIG9uIGJpbmFyeSBwYXJhbWV0ZXJzLgogICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSAKICAgICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLgogICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gCiAgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgogICAgICAqLwoKCiAgICAgIHZhciBCaW5hcnlDb21wb25lbnRTdGVwcGVyID0gZnVuY3Rpb24gQmluYXJ5Q29tcG9uZW50U3RlcHBlcihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoID09IDEpIHsKICAgICAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdOwogICAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKICAgICAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyAiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuIjsKICAgICAgICB9CgogICAgICAgIHZhciBjcmVhdGVfc3Vic3RlcHBlcnMgPSBmdW5jdGlvbiBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLCBzdWJzdGF0ZSwgbG9nX3Bvc3QpIHsKICAgICAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdOwogICAgICAgICAgdmFyIGk7CgogICAgICAgICAgaWYgKGRpbS5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHN1YnBhcmFtcyA9IHt9OwogICAgICAgICAgICAgIHN1YnBhcmFtc1tpXSA9IHBhcmFtOwogICAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IEJpbmFyeVN0ZXBwZXIoc3VicGFyYW1zLCBzdWJzdGF0ZSwgbG9nX3Bvc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKICAgICAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gc3Vic3RlcHBlcnM7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0KTsKICAgICAgfTsKCiAgICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjsKCiAgICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgc3Vic3RlcHBlcnMgaW4gYSByYW5kb20gb3JkZXIgYW5kIGNhbGwgc3RlcCgpIG9uIHRoZW0uCiAgICAgICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKICAgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogVGhpcyBzdGVwcGVyIGNhbiBiZSByZXNwb25zaWJsZSBmb3IgdGFraW5nIGEgc3RlcCBmb3Igb25lIG9yIG1vcmUgcGFyYW1ldGVycy4KICAgICAgICogRm9yIHJlYWwgYW5kIGludCBwYXJhbWV0ZXJzIGl0IHRha2VzIE1ldHJvcG9saXMgd2l0aGluIEdpYmJzIHN0ZXBzLCBhbmQgZm9yIAogICAgICAgKiBiaW5hcnkgcGFyYW1ldGVycyBpdCBkb2VzIGV2YWx1YXRlcyB0aGUgcG9zdGVyaW9yIGZvciBib3RoIHBhcmFtdGVyIHZhbHVlcyBhbmQKICAgICAgICogcmFuZG9tbHkgY2hhbmdlcyB0byBhIGNlcnRhaW4gdmFsdWUgcHJvcG9ydGlvbmFsbHkgdG8gdGhhdCB2YWx1ZSdzIHBvc3RlcmlvcgogICAgICAgKiAodGhpcyBpcyBhbHNvIGRvbmUgZm9yIGVhY2ggcGFyYW1ldGVyLCBzbyBhbHNvIGEgKiB3aXRoaW4gR2liYnMgYXBwcm9hY2gpLgogICAgICAgKiBUaGlzIHN0ZXBwZXIgaXMgYWxzbyBhZGFwdGl2ZSBhbmQgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVycwogICAgICAgKiBhcmUgbm90IHRvbyBoaWdoIGFuZCB0aGUgY29ycmVsYXRpb25zIGJldHdlZW4gcGFyYW1ldGVycyBhcmUgbG93LgogICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMKICAgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgogICAgICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gCiAgICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KICAgICAgKi8KCgogICAgICB2YXIgQW13Z1N0ZXBwZXIgPSBmdW5jdGlvbiBBbXdnU3RlcHBlcihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbV9uYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dOwogICAgICAgICAgdmFyIFNlbGVjdFN0ZXBwZXI7CgogICAgICAgICAgc3dpdGNoIChwYXJhbS50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgInJlYWwiOgogICAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiaW50IjoKICAgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJiaW5hcnkiOgogICAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0aHJvdyAiQW13Z1N0ZXBwZXIgY2FuJ3QgaGFuZGxlIHBhcmFtZXRlciAiICsgdGhpcy5wYXJhbV9uYW1lc1tpXSArICIgd2l0aCB0eXBlICIgKyBwYXJhbS50eXBlOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBwYXJhbV9vYmplY3Rfd3JhcCA9IHt9OwogICAgICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHBhcmFtX29wdGlvbnMgPSBvcHRpb25zLnBhcmFtcyAmJiBvcHRpb25zLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXSB8fCB7fTsKICAgICAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7CiAgICAgICAgICBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgPSBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgfHwgb3B0aW9ucy5iYXRjaF9zaXplOwogICAgICAgICAgcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiA9IHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gfHwgb3B0aW9ucy5tYXhfYWRhcHRhdGlvbjsKICAgICAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247CiAgICAgICAgICBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSA9IHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlIHx8IG9wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlOwogICAgICAgICAgcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyA9IHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgfHwgb3B0aW9ucy5pc19hZGFwdGluZzsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQW13Z1N0ZXBwZXI7CgogICAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3Vic3RlcHBlcnMpOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RlcCgpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7CiAgICAgIH07CgogICAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBpbmZvID0ge307CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaW5mb1t0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMuc3Vic3RlcHBlcnNbaV0uaW5mbygpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGluZm87CiAgICAgIH07IC8vLy8vLy8vLy8vIFNhbXBsZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8KICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgLyoqCiAgICAgICogQGludGVyZmFjZQogICAgICAqIFdoaWxlIHlvdSBjb3VsZCBmaXQgYSBtb2RlbCBieSBwYXN0aW5nIHRvZ2V0aGVyIFN0ZXBwZXJzLCBhCiAgICAgIC8vIFNhbXBsZXIgaXMgaGVyZSBpcyBhIGNvbnZlbmllbmNlIGNsYXNzIHdoZXJlIGFuIGluc3RhbmNlIG9mIFNhbXBsZXIKICAgICAgLy8gc2V0cyB1cCB0aGUgU3RlcHBlcnMsIGNoZWNrcyB0aGUgcGFyYW1ldGVyIGRlZmluaXRpb24sCiAgICAgIC8vIGFuZCBtYW5hZ2VzIHRoZSBzYW1wbGluZy4gVGhpcyBoZXJlIGRlZmluZXMgdGhlIFNhbXBsZXIgImludGVyZmFjZSIuCiAgICAgICogQGludGVyZmFjZQogICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOgogICAgICAqICAgeyJtdSI6IHsidHlwZSI6ICJyZWFsIn0sICJzaWdtYSI6IHsidHlwZSI6ICJyZWFsIiwgImxvd2VyIiA9IDB9fQogICAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgImNvbXBsZXRlIiBhbmQgcHJvcGVydGllcwogICAgICAqICAgbGVmdCBvdXQgKGxpa2UgbG93ZXIgYW5kIHVwcGVyKSB3aWxsIGJlIGZpbGxlZCBpbiBieSBkZWZhdWx0cy4KICAgICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlIGZ1bmN0aW9uKHN0YXRlLCBkYXRhKS4gSGVyZQogICAgICAqICAgc3RhdGUgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSB3aXRoIGVhY2ggcGFyYW1ldGVyIGFzIGEgCiAgICAgICogICBrZXkgYW5kIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGFzIG51bWJlcnMgb3IgYXJyYXlzLiBGb3IgZXhhbXBsZToKICAgICAgKiAgIHsibXUiOiAzLCAic2lnbWEiOiAxLjV9LiBUaGUgZGF0YSBhcmd1bWVudCB3aWxsIGJlIHRoZSBzYW1lIG9iamVjdCBhcyAKICAgICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LgogICAgICAqIEBwYXJhbSBkYXRhIC0gYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIGxvZ19wb3N0IGZ1bmN0aW9uCiAgICAgICogICB3aGVuIHNhbXBsaW5nLgogICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci4KICAgICAgKi8KCgogICAgICB2YXIgU2FtcGxlciA9IGZ1bmN0aW9uIFNhbXBsZXIocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykgewogICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOwogICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsgLy8gU2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgaWYgbm90IHBhc3NlZCB0aHJvdWdoIHRoZSBvcHRpb25zIG9iamVjdAoKICAgICAgICB0aGlzLnBhcmFtX2luaXRfZnVuID0gZ2V0X29wdGlvbigicGFyYW1faW5pdF9mdW4iLCBvcHRpb25zLCBwYXJhbV9pbml0X2ZpeGVkKTsKICAgICAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKCJ0aGluIiwgb3B0aW9ucywgMSk7CiAgICAgICAgdmFyIHBhcmFtc190b19tb25pdG9yID0gZ2V0X29wdGlvbigibW9uaXRvciIsIG9wdGlvbnMsIG51bGwpOwogICAgICAgIHRoaXMudGhpbih0aGlubmluZ19pbnRlcnZhbCk7CiAgICAgICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTsKICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOyAvLyBDb21wbGV0aW5nIHRoZSBwYXJhbXMgYW5kIGluaXRpYWxpemluZyB0aGUgc3RhdGUuCgogICAgICAgIHRoaXMucGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHRoaXMucGFyYW1zLCB0aGlzLnBhcmFtX2luaXRfZnVuKTsKICAgICAgICB2YXIgc3RhdGUgPSB7fTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxvZ19wb3N0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGxvZ19wb3N0KHN0YXRlLCBkYXRhKTsKICAgICAgICB9OyAvLyBSdW5uaW5nIHRoZSBsb2dfcG9zdCBmdW5jdGlvbiBvbmNlIGluIGNhc2UgaXQgZnVydGhlciBtb2RpZmllcyB0aGUgc3RhdGUKICAgICAgICAvLyBmb3IgZXhhbXBsZSBhZGRpbmcgZGVyaXZlZCBxdWFudGl0aWVzLgoKCiAgICAgICAgdGhpcy5sb2dfcG9zdCgpOwogICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICAgICAgICB0aGlzLnN0ZXBwZXJzID0gdGhpcy5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSh0aGlzLnBhcmFtcywgdGhpcy5zdGF0ZSwgdGhpcy5sb2dfcG9zdCwgdGhpcy5vcHRpb25zKTsKICAgICAgfTsKICAgICAgLyoqIFNob3VsZCByZXR1cm4gYSB2ZWN0b3Igb2Ygc3RlcHBlcnMgdGhhdCB3aGVuIGNhbGxlZCAKICAgICAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuCiAgICAgICAqLwoKCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlID0gZnVuY3Rpb24gKHN0YXRlLCBsb2dfcG9zdCkgewogICAgICAgIHRocm93ICJFdmVyeSBTYW1wbGVyIG5lZWRzIHRvIGltcGxlbWVudCBjcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSgpIjsKICAgICAgfTsKICAgICAgLyoqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIFNhbXBsZXIuCiAgICAgICAqLwoKCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLAogICAgICAgICAgdGhpbjogdGhpcy50aGluLAogICAgICAgICAgbW9uaXRvcjogdGhpcy5tb25pdG9yLAogICAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnMKICAgICAgICB9OwogICAgICB9OwogICAgICAvKiogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFJldHVybnMgdGhlIG5ldyBzcGFjZQogICAgICAgKiBidXQgYWxzbyBtb2RpZmllcyB0aGUgc3RhdGUgaW4gcGxhY2UuCiAgICAgICAqLwoKCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN0ZXBwZXJzKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0ZXAoKTsKICAgICAgICB9CgogICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5sZW5ndGggPiBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcykubGVuZ3RoKSB7CiAgICAgICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2UKICAgICAgICAgIC8vIG5lZWQgdG8gcnVuIHRoZSBsb2dfcG9zdCBvbmNlIG1vcmUgaW4gb3JkZXIgdG8gc2V0IHRoZSBkZXJpdmVkIHF1YW50aXRpZXMKICAgICAgICAgIC8vIGZvciB0aGUgZmluYWwgcGFyYW1ldGVyIHN0YXRlCiAgICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIFRha2VzIG5faXRlcmF0aW9ucyBzdGVwcyBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlIGFuZCByZXR1cm5zIHRoZW0KICAgICAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZToKICAgICAgICoge211OiBbMSwgLTEsIDIsIDMsIC4uLl0sIHNpZ21hOiBbMSwgMiwgMiwgMSwgLi4uXX0uCiAgICAgICAqIElmIHRoaW4gaXMgPiAxIHRoZW4gbl9pdGVyYXRpb25zIC8gdGhpbiBzYW1wbGVzIGFyZSByZXR1cm5lZC4KICAgICAgICovCgoKICAgICAgU2FtcGxlci5wcm90b3R5cGUuc2FtcGxlID0gZnVuY3Rpb24gKG5faXRlcmF0aW9ucykgewogICAgICAgIC8vIEluaXRpYWxpemluZyBjdXJyX3NhbXBsZSB3aGVyZSB0aGUgc2FtcGxlIGlzIGdvaW5nIHRvIGJlIHNhdmVkCiAgICAgICAgLy8gYXMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgb25lIGFycmF5IHBlciBwYXJhbWV0ZXIgdG8gYmUgbW9uaXRvcmVkLgogICAgICAgIHZhciBpLCBqLCBtb25pdG9yZWRfcGFyYW1zOwoKICAgICAgICBpZiAodGhpcy5tb25pdG9yZWRfcGFyYW1zID09PSBudWxsKSB7CiAgICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1vbml0b3JlZF9wYXJhbXMgPSB0aGlzLm1vbml0b3JlZF9wYXJhbXM7CiAgICAgICAgfQoKICAgICAgICB2YXIgY3Vycl9zYW1wbGUgPSB7fTsKCiAgICAgICAgZm9yIChqID0gMDsgaiA8IG1vbml0b3JlZF9wYXJhbXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGN1cnJfc2FtcGxlW21vbml0b3JlZF9wYXJhbXNbal1dID0gW107CiAgICAgICAgfQoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHsKICAgICAgICAgIGlmIChpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkgewogICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIHZhciBwYXJhbSA9IG1vbml0b3JlZF9wYXJhbXNbal07CiAgICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5zdGVwKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY3Vycl9zYW1wbGU7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBUYWtlcyBuX2l0ZXJhdGlvbiBzdGVwcyBpbiBwYXJhbWV0ZXIgc3BhY2UgYnV0IHJldHVybnMgbm90aGluZy4KICAgICAgICovCgoKICAgICAgU2FtcGxlci5wcm90b3R5cGUuYnVybiA9IGZ1bmN0aW9uIChuX2l0ZXJhdGlvbnMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXAoKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBTZXRzIHdoYXQgcGFyYW1ldGVycyBzaG91bGQgYmUgbW9uaXRvcmVkIGFuZCByZXR1cm5lZCB3aGVuIGNhbGxpbmcKICAgICAgICogc2FtcGxlLgogICAgICAgKi8KCgogICAgICBTYW1wbGVyLnByb3RvdHlwZS5tb25pdG9yID0gZnVuY3Rpb24gKHBhcmFtc190b19tb25pdG9yKSB7CiAgICAgICAgdGhpcy5tb25pdG9yZWRfcGFyYW1zID0gcGFyYW1zX3RvX21vbml0b3I7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBTZXRzIHRoZSB0aGlubmluZy4gRm9yIGV4YW1wbGUgdGhpbiA9PSAxMCBtZWFucyB0aGF0IGV2ZXJ5IDEwdGggcG9zdGVyaW9yCiAgICAgICAqIGRyYXcgd2lsbCBiZSBrZXB0LgogICAgICAgKi8KCgogICAgICBTYW1wbGVyLnByb3RvdHlwZS50aGluID0gZnVuY3Rpb24gKHRoaW5uaW5nX2ludGVydmFsKSB7CiAgICAgICAgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9IHRoaW5uaW5nX2ludGVydmFsOwogICAgICB9OwogICAgICAvKioKICAgICAgICogU2V0cyBhZGFwdGF0aW9uIG9uLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuCiAgICAgICAqLwoKCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKgogICAgICAqIFNldHMgYWRhcHRhdGlvbiBvZmYsIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy4KICAgICAgKi8KCgogICAgICBTYW1wbGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqCiAgICAgICogQGNsYXNzCiAgICAgICogQGltcGxlbWVudHMge1NhbXBsZXJ9CiAgICAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIAogICAgICAqIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiAiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQyIKICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLiBBbiBhZGl0aW9uIGlzIHRoYXQgaXQgaGFuZGxlcyBpbnQgcGFyYW1ldGVycwogICAgICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgCiAgICAgICogdmFsdWUgcHJvcG9ydGlvbmFsIHRvIHRoZSBwb3N0ZXJpb3Igb2YgdGhlIHR3byBwb3NzaWJsZSBzdGF0ZXMgb2YgdGhlCiAgICAgICogcGFyYW1ldGVyLiBUaGlzIHNhbXBsZXIgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVycwogICAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCiAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zCiAgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgogICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICovCgoKICAgICAgdmFyIEFtd2dTYW1wbGVyID0gZnVuY3Rpb24gQW13Z1NhbXBsZXIocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykgewogICAgICAgIFNhbXBsZXIuY2FsbCh0aGlzLCBwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKTsKICAgICAgfTsKCiAgICAgIEFtd2dTYW1wbGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU2FtcGxlci5wcm90b3R5cGUpOwogICAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjsKCiAgICAgIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIHJldHVybiBbbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKV07CiAgICAgIH07IC8vIFJldHVybmluZyB0aGUgZnVuY3Rpb25zIHRoYXQgc2hvdWxkIGJlIHB1YmxpY2x5IGV4cG9zZWQgYnkgdGhpcyBtb2R1bGUKCgogICAgICByZXR1cm4gewogICAgICAgIHJ1bmlmOiBydW5pZiwKICAgICAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsCiAgICAgICAgcm5vcm06IHJub3JtLAogICAgICAgIHBhcmFtX2luaXRfZml4ZWQ6IHBhcmFtX2luaXRfZml4ZWQsCiAgICAgICAgY29tcGxldGVfcGFyYW1zOiBjb21wbGV0ZV9wYXJhbXMsCiAgICAgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyOiBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIsCiAgICAgICAgSW50TWV0cm9wb2xpc1N0ZXBwZXI6IEludE1ldHJvcG9saXNTdGVwcGVyLAogICAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwKICAgICAgICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLAogICAgICAgIEJpbmFyeVN0ZXBwZXI6IEJpbmFyeVN0ZXBwZXIsCiAgICAgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlcjogQmluYXJ5Q29tcG9uZW50U3RlcHBlciwKICAgICAgICBBbXdnU3RlcHBlcjogQW13Z1N0ZXBwZXIsCiAgICAgICAgQW13Z1NhbXBsZXI6IEFtd2dTYW1wbGVyCiAgICAgIH07CiAgICB9KTsKICB9KShtY21jKTsKCiAgZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHsKICAgIHJldHVybiBhID09IG51bGwgfHwgYiA9PSBudWxsID8gTmFOIDogYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47CiAgfQoKICB2YXIgX21hcmtlZCA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhudW1iZXJzKTsKICBmdW5jdGlvbiBudW1iZXJzKHZhbHVlcywgdmFsdWVvZikgewogICAgdmFyIF9pdGVyYXRvciwgX3N0ZXAsIHZhbHVlLCBpbmRleCwgX2l0ZXJhdG9yMiwgX3N0ZXAyLCBfdmFsdWU7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIG51bWJlcnMkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoISh2YWx1ZW9mID09PSB1bmRlZmluZWQpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih2YWx1ZXMpOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKCiAgICAgICAgICAgIF9pdGVyYXRvci5zKCk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBpZiAoKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFsdWUgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgIGlmICghKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMzsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgyKTsKCiAgICAgICAgICAgIF9pdGVyYXRvci5lKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTY7CgogICAgICAgICAgICBfaXRlcmF0b3IuZigpOwoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgxNik7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICBpbmRleCA9IC0xOwogICAgICAgICAgICBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodmFsdWVzKTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDIzOwoKICAgICAgICAgICAgX2l0ZXJhdG9yMi5zKCk7CgogICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgaWYgKChfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3ZhbHVlID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgICAgaWYgKCEoKF92YWx1ZSA9IHZhbHVlb2YoX3ZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmIChfdmFsdWUgPSArX3ZhbHVlKSA+PSBfdmFsdWUpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzA7CiAgICAgICAgICAgIHJldHVybiBfdmFsdWU7CgogICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI1OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzNDsKICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dFsiY2F0Y2giXSgyMyk7CgogICAgICAgICAgICBfaXRlcmF0b3IyLmUoX2NvbnRleHQudDEpOwoKICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzNzsKCiAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgzNyk7CgogICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfbWFya2VkLCBudWxsLCBbWzIsIDEzLCAxNiwgMTldLCBbMjMsIDM0LCAzNywgNDBdXSk7CiAgfQoKICBmdW5jdGlvbiBjb21wYXJlRGVmaW5lZCgpIHsKICAgIHZhciBjb21wYXJlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBhc2NlbmRpbmc7CiAgICBpZiAoY29tcGFyZSA9PT0gYXNjZW5kaW5nKSByZXR1cm4gYXNjZW5kaW5nRGVmaW5lZDsKICAgIGlmICh0eXBlb2YgY29tcGFyZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IFR5cGVFcnJvcigiY29tcGFyZSBpcyBub3QgYSBmdW5jdGlvbiIpOwogICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHZhciB4ID0gY29tcGFyZShhLCBiKTsKICAgICAgaWYgKHggfHwgeCA9PT0gMCkgcmV0dXJuIHg7CiAgICAgIHJldHVybiAoY29tcGFyZShiLCBiKSA9PT0gMCkgLSAoY29tcGFyZShhLCBhKSA9PT0gMCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhc2NlbmRpbmdEZWZpbmVkKGEsIGIpIHsKICAgIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTsKICB9CgogIGZ1bmN0aW9uIG1heCh2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIHZhciBtYXg7CgogICAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodmFsdWVzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHZhbHVlID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKG1heCA8IHZhbHVlIHx8IG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkgewogICAgICAgICAgICBtYXggPSB2YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdmFyIGluZGV4ID0gLTE7CgogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHZhbHVlcyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX3ZhbHVlID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgIGlmICgoX3ZhbHVlID0gdmFsdWVvZihfdmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGwgJiYgKG1heCA8IF92YWx1ZSB8fCBtYXggPT09IHVuZGVmaW5lZCAmJiBfdmFsdWUgPj0gX3ZhbHVlKSkgewogICAgICAgICAgICBtYXggPSBfdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtYXg7CiAgfQoKICBmdW5jdGlvbiBtaW4odmFsdWVzLCB2YWx1ZW9mKSB7CiAgICB2YXIgbWluOwoKICAgIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHZhbHVlcyksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIChtaW4gPiB2YWx1ZSB8fCBtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpIHsKICAgICAgICAgICAgbWluID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBpbmRleCA9IC0xOwoKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih2YWx1ZXMpLAogICAgICAgICAgX3N0ZXAyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIF92YWx1ZSA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICBpZiAoKF92YWx1ZSA9IHZhbHVlb2YoX3ZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmIChtaW4gPiBfdmFsdWUgfHwgbWluID09PSB1bmRlZmluZWQgJiYgX3ZhbHVlID49IF92YWx1ZSkpIHsKICAgICAgICAgICAgbWluID0gX3ZhbHVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWluOwogIH0KCiAgLy8gSVNDIGxpY2Vuc2UsIENvcHlyaWdodCAyMDE4IFZsYWRpbWlyIEFnYWZvbmtpbi4KCiAgZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyYXksIGspIHsKICAgIHZhciBsZWZ0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwOwogICAgdmFyIHJpZ2h0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBhcnJheS5sZW5ndGggLSAxOwogICAgdmFyIGNvbXBhcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gNCA/IGFyZ3VtZW50c1s0XSA6IHVuZGVmaW5lZDsKICAgIGNvbXBhcmUgPSBjb21wYXJlID09PSB1bmRlZmluZWQgPyBhc2NlbmRpbmdEZWZpbmVkIDogY29tcGFyZURlZmluZWQoY29tcGFyZSk7CgogICAgd2hpbGUgKHJpZ2h0ID4gbGVmdCkgewogICAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7CiAgICAgICAgdmFyIG4gPSByaWdodCAtIGxlZnQgKyAxOwogICAgICAgIHZhciBtID0gayAtIGxlZnQgKyAxOwogICAgICAgIHZhciB6ID0gTWF0aC5sb2cobik7CiAgICAgICAgdmFyIHMgPSAwLjUgKiBNYXRoLmV4cCgyICogeiAvIDMpOwogICAgICAgIHZhciBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTsKICAgICAgICB2YXIgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7CiAgICAgICAgdmFyIG5ld1JpZ2h0ID0gTWF0aC5taW4ocmlnaHQsIE1hdGguZmxvb3IoayArIChuIC0gbSkgKiBzIC8gbiArIHNkKSk7CiAgICAgICAgcXVpY2tzZWxlY3QoYXJyYXksIGssIG5ld0xlZnQsIG5ld1JpZ2h0LCBjb21wYXJlKTsKICAgICAgfQoKICAgICAgdmFyIHQgPSBhcnJheVtrXTsKICAgICAgdmFyIGkgPSBsZWZ0OwogICAgICB2YXIgaiA9IHJpZ2h0OwogICAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTsKICAgICAgaWYgKGNvbXBhcmUoYXJyYXlbcmlnaHRdLCB0KSA+IDApIHN3YXAoYXJyYXksIGxlZnQsIHJpZ2h0KTsKCiAgICAgIHdoaWxlIChpIDwgaikgewogICAgICAgIHN3YXAoYXJyYXksIGksIGopLCArK2ksIC0tajsKCiAgICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbaV0sIHQpIDwgMCkgewogICAgICAgICAgKytpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbal0sIHQpID4gMCkgewogICAgICAgICAgLS1qOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpOwogICAgICBpZiAoaiA8PSBrKSBsZWZ0ID0gaiArIDE7CiAgICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7CiAgICB9CgogICAgcmV0dXJuIGFycmF5OwogIH0KCiAgZnVuY3Rpb24gc3dhcChhcnJheSwgaSwgaikgewogICAgdmFyIHQgPSBhcnJheVtpXTsKICAgIGFycmF5W2ldID0gYXJyYXlbal07CiAgICBhcnJheVtqXSA9IHQ7CiAgfQoKICBmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHsKICAgIHZhbHVlcyA9IEZsb2F0NjRBcnJheS5mcm9tKG51bWJlcnModmFsdWVzLCB2YWx1ZW9mKSk7CiAgICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkpIHJldHVybjsKICAgIGlmICgocCA9ICtwKSA8PSAwIHx8IG4gPCAyKSByZXR1cm4gbWluKHZhbHVlcyk7CiAgICBpZiAocCA+PSAxKSByZXR1cm4gbWF4KHZhbHVlcyk7CiAgICB2YXIgbiwKICAgICAgICBpID0gKG4gLSAxKSAqIHAsCiAgICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLAogICAgICAgIHZhbHVlMCA9IG1heChxdWlja3NlbGVjdCh2YWx1ZXMsIGkwKS5zdWJhcnJheSgwLCBpMCArIDEpKSwKICAgICAgICB2YWx1ZTEgPSBtaW4odmFsdWVzLnN1YmFycmF5KGkwICsgMSkpOwogICAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7CiAgfQoKICBmdW5jdGlvbiBtZWRpYW4odmFsdWVzLCB2YWx1ZW9mKSB7CiAgICByZXR1cm4gcXVhbnRpbGUodmFsdWVzLCAwLjUsIHZhbHVlb2YpOwogIH0KCiAgLy8gaW1wb3J0ICogYXMgalN0YXQgZnJvbSAnanN0YXQnOwoKICAvKgogICAgQ1BUTWF0aCBTdGF0aWMgQ2xhc3MgLSBOb3QgaW50ZW5kZWQgZm9yIGluc3RhbnRpYXRpb24hCgogICAgVmFyaWFibGVzOgogICAgICB4ID0gb2JqZWN0aXZlIHZhbHVlCiAgICAgIHYgPSBzdWJqZWN0aXZlIHZhbHVlL3V0aWxpdHkKICAgICAgcCA9IG9iamVjdGl2ZSBwcm9iYWJpbGl0eQogICAgICB3ID0gc3ViamVjdGl2ZSBwcm9iYWJpbGl0eS9kZWNpc2lvbiB3ZWlnaHQKICAgICAgViA9IGV4cGVjdGVkIHZhbHVlL3V0aWxpdHkKCiAgICAgIGEgPSBhbHBoYSAoY3VydmF0dXJlIGZvciB2YWx1ZSBmdW5jdGlvbikKICAgICAgbCA9IGxhbWJkYSAobG9zcyBhdmVyc2lvbiBmb3IgdmFsdWUgZnVuY3Rpb24pCiAgICAgIGcgPSBnYW1tYSAoc2Vuc2l0aXZpdHkgZm9yIGRlY2lzaW9uIHdlaWdodGluZyBmdW5jdGlvbikKCiAgICBFcXVhdGlvbnM6CiAgICAgIHYgPSB4XmEsIGlmIHggPj0gMDsgLWwgKiAteF5hLCBpZiB4IDwgMAogICAgICB3ID0gcF5nIC8gKHBeZyArICgxIC0gcCleZyleKDEgLyBnKQogICAgICBWID0gdiAqIHcKICAqLwogIHZhciBDUFRNYXRoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIENQVE1hdGgoKSB7CiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDUFRNYXRoKTsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoQ1BUTWF0aCwgbnVsbCwgW3sKICAgICAga2V5OiAieGFsMnYiLAogICAgICB2YWx1ZTogZnVuY3Rpb24geGFsMnYoeCwgYSwgbCkgewogICAgICAgIGlmICh4ID49IDApIHsKICAgICAgICAgIHJldHVybiBNYXRoLnBvdyh4LCBhKTsKICAgICAgICB9IC8vIGVsc2UgKHggPCAwKQoKCiAgICAgICAgcmV0dXJuIC1sICogTWF0aC5wb3coLXgsIGEpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogInhsdjJhIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHhsdjJhKHgsIGwsIHYpIHsKICAgICAgICBpZiAoeCA+PSAwKSB7CiAgICAgICAgICByZXR1cm4gTWF0aC5sb2codikgLyBNYXRoLmxvZyh4KTsKICAgICAgICB9IC8vIGVsc2UgKHggPCAwKQoKCiAgICAgICAgcmV0dXJuIChNYXRoLmxvZygtdikgLSBNYXRoLmxvZyhsKSkgLyBNYXRoLmxvZygteCk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAieGF2MmwiLAogICAgICB2YWx1ZTogZnVuY3Rpb24geGF2MmwoeCwgYSwgdikgewogICAgICAgIGlmICh4ID49IDApIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0gLy8gZWxzZSAoeCA8IDApCgoKICAgICAgICByZXR1cm4gLXYgLyBNYXRoLnBvdygteCwgYSk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAicGcydyIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwZzJ3KHAsIGcpIHsKICAgICAgICByZXR1cm4gTWF0aC5wb3cocCwgZykgLyBNYXRoLnBvdyhNYXRoLnBvdyhwLCBnKSArIE1hdGgucG93KDEgLSBwLCBnKSwgMSAvIGcpOwogICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIENQVE1hdGg7CiAgfSgpOwoKICAvLyBJbnRlcm5hbCBkZXBlbmRlbmNpZXMKCiAgLyogZXNsaW50IG5vLXJlc3RyaWN0ZWQtZ2xvYmFsczogWyJvZmYiLCAic2VsZiJdICovCgogIHNlbGYub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIgcGFyYW1zID0gewogICAgICBhbHBoYTogewogICAgICAgIHR5cGU6ICdyZWFsJywKICAgICAgICBsb3dlcjogMCwKICAgICAgICB1cHBlcjogMQogICAgICB9LAogICAgICBsYW1iZGE6IHsKICAgICAgICB0eXBlOiAncmVhbCcsCiAgICAgICAgbG93ZXI6IDAsCiAgICAgICAgdXBwZXI6IDEwCiAgICAgIH0sCiAgICAgIGdhbW1hOiB7CiAgICAgICAgdHlwZTogJ3JlYWwnLAogICAgICAgIGxvd2VyOiAwLAogICAgICAgIHVwcGVyOiAxCiAgICAgIH0sCiAgICAgIGx1Y2U6IHsKICAgICAgICB0eXBlOiAncmVhbCcsCiAgICAgICAgbG93ZXI6IDAsCiAgICAgICAgdXBwZXI6IDEwMAogICAgICB9CiAgICB9OwoKICAgIHZhciBsb2dQb3N0ID0gZnVuY3Rpb24gbG9nUG9zdChzdGF0ZSwgZGF0YSkgewogICAgICB2YXIgbHAgPSAwOyAvLyBQcmlvcnMKCiAgICAgIHZhciBhbHBoYU1lYW4gPSAwLjU7CiAgICAgIHZhciBhbHBoYVNhbXBsZVNpemUgPSAyLjU7CiAgICAgIGxwICs9IGRpc3RyaWJ1dGlvbnMuZXhwb3J0cy5iZXRhKHN0YXRlLmFscGhhLCBhbHBoYU1lYW4gKiBhbHBoYVNhbXBsZVNpemUsICgxIC0gYWxwaGFNZWFuKSAqIGFscGhhU2FtcGxlU2l6ZSk7IC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmFscGhhLCAwLCAxKTsKCiAgICAgIHZhciBsYW1iZGFNZWFuID0gMjsKICAgICAgdmFyIGxhbWJkYVNoYXBlID0gMzsKICAgICAgbHAgKz0gZGlzdHJpYnV0aW9ucy5leHBvcnRzLmdhbW1hKHN0YXRlLmxhbWJkYSwgbGFtYmRhU2hhcGUsIGxhbWJkYVNoYXBlIC8gbGFtYmRhTWVhbik7IC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmxhbWJkYSwgMCwgMTApOwoKICAgICAgdmFyIGdhbW1hTWVhbiA9IDAuNTsKICAgICAgdmFyIGdhbW1hU2FtcGxlU2l6ZSA9IDIuNTsKICAgICAgbHAgKz0gZGlzdHJpYnV0aW9ucy5leHBvcnRzLmJldGEoc3RhdGUuZ2FtbWEsIGdhbW1hTWVhbiAqIGdhbW1hU2FtcGxlU2l6ZSwgKDEgLSBnYW1tYU1lYW4pICogZ2FtbWFTYW1wbGVTaXplKTsgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuZ2FtbWEsIDAsIDEpOwoKICAgICAgdmFyIGx1Y2VNZWFuID0gMjsKICAgICAgdmFyIGx1Y2VTaGFwZSA9IDM7CiAgICAgIGxwICs9IGRpc3RyaWJ1dGlvbnMuZXhwb3J0cy5nYW1tYShzdGF0ZS5sdWNlLCBsdWNlU2hhcGUsIGx1Y2VTaGFwZSAvIGx1Y2VNZWFuKTsgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubHVjZSwgMCwgMTAwKTsKICAgICAgLy8gTGlrZWxpaG9vZAoKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChjaG9pY2UpIHsKICAgICAgICAvLyBWYWx1ZXMKICAgICAgICB2YXIgdmwgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54bCwgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7CiAgICAgICAgdmFyIHZ3ID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHcsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpOwogICAgICAgIHZhciB2cyA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnhzLCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTsgLy8gUHJvYmFiaWxpdGllcwoKICAgICAgICB2YXIgd3cgPSBDUFRNYXRoLnBnMncoY2hvaWNlLnB3LCBzdGF0ZS5nYW1tYSk7CiAgICAgICAgdmFyIHdsID0gMSAtIHd3OyAvLyBVdGlsaXRpZXMKCiAgICAgICAgdmFyIHVnID0gd2wgKiB2bCArIHd3ICogdnc7CiAgICAgICAgdmFyIHVzID0gdnM7IC8vIENob2ljZSBvZiBnYW1ibGUgb3Igc3VyZSBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uCiAgICAgICAgLy8gTHVjZSBjaG9pY2UgcnVsZSBpcyB1c2VkIHRvIGNvbXB1dGUgcHJvYmFiaWxpdHkgb2YgZ2FtYmxpbmchICgwID0gc3VyZSwgMSA9IGdhbWJsZSkKCiAgICAgICAgdmFyIGJpbnZhbCA9IDEgLyAoMSArIE1hdGguZXhwKHN0YXRlLmx1Y2UgKiAodXMgLSB1ZykpKTsgLy8gQWN0dWFsIHJlc3BvbnNlCgogICAgICAgIHZhciByZXNwb25zZSA9IGNob2ljZS5yZXNwb25zZSA9PT0gJ3N1cmUnID8gMCA6IDE7CiAgICAgICAgbHAgKz0gZGlzdHJpYnV0aW9ucy5leHBvcnRzLmJlcm4ocmVzcG9uc2UsIGJpbnZhbCk7CiAgICAgIH0pOwogICAgICByZXR1cm4gbHA7CiAgICB9OyAvLyBJbml0aWFsaXppbmcgdGhlIHNhbXBsZXIKCgogICAgdmFyIHNhbXBsZXIgPSBuZXcgbWNtYy5leHBvcnRzLkFtd2dTYW1wbGVyKHBhcmFtcywgbG9nUG9zdCwgZXZlbnQuZGF0YSk7IC8vIEJ1cm5pbmcgc29tZSBzYW1wbGVzIHRvIHRoZSBNQ01DIGdvZHMgYW5kIHNhbXBsaW5nIDUwMDAgZHJhd3MKCiAgICBzYW1wbGVyLmJ1cm4oMTAwMCk7CiAgICB2YXIgc2FtcGxlcyA9IHNhbXBsZXIuc2FtcGxlKDUwMDApOyAvLyBFeHRyYWN0IHN1bW1hcnkgc3RhdHMKCiAgICB2YXIgcmVzdWx0cyA9IHsKICAgICAgYWxwaGE6IG1lZGlhbihzYW1wbGVzLmFscGhhKSwKICAgICAgbGFtYmRhOiBtZWRpYW4oc2FtcGxlcy5sYW1iZGEpLAogICAgICBnYW1tYTogbWVkaWFuKHNhbXBsZXMuZ2FtbWEpLAogICAgICBsdWNlOiBtZWRpYW4oc2FtcGxlcy5sdWNlKQogICAgfTsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICByZXN1bHRzOiByZXN1bHRzLAogICAgICBzYW1wbGVzOiBzYW1wbGVzCiAgICB9KTsKICB9OwoKfSkoKTsKCg==",$H="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3B0LWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvYmF5ZXMuanMvZGlzdHJpYnV0aW9ucy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9iYXllcy5qcy9tY21jLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9hc2NlbmRpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL251bWJlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvc29ydC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbWF4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9taW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3F1aWNrc2VsZWN0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9xdWFudGlsZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbWVkaWFuLmpzIiwiLi4vcHJvc3BlY3RhYmxlLW1hdGgvc3JjL2NwdC1tYXRoLmpzIiwiLi4vcHJvc3BlY3RhYmxlLW1hdGgvc3JjL2luZGV4LmpzIiwic3JjL2NvbXBvbmVudHMvY3B0LWZpdC13b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG52YXIgcnVudGltZSA9IChmdW5jdGlvbiAoZXhwb3J0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgT3AgPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7XG4gIHZhciB1bmRlZmluZWQ7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLlxuICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCA6IHt9O1xuICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiO1xuICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiO1xuXG4gIGZ1bmN0aW9uIGRlZmluZShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBvYmpba2V5XTtcbiAgfVxuICB0cnkge1xuICAgIC8vIElFIDggaGFzIGEgYnJva2VuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB0aGF0IG9ubHkgd29ya3Mgb24gRE9NIG9iamVjdHMuXG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZGVmaW5lID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICByZXR1cm4gb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgZXhwb3J0cy53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgZGVmaW5lKEl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBkZWZpbmUoR3AsIFwiY29uc3RydWN0b3JcIiwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgR2VuZXJhdG9yRnVuY3Rpb24pO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShcbiAgICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICB0b1N0cmluZ1RhZ1N5bWJvbCxcbiAgICBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgKTtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBkZWZpbmUoZ2VuRnVuLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yLCBQcm9taXNlSW1wbCkge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIGRlZmluZShBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSwgYXN5bmNJdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KTtcbiAgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjtcblxuICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gIC8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZlxuICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci5cbiAgZXhwb3J0cy5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkge1xuICAgIGlmIChQcm9taXNlSW1wbCA9PT0gdm9pZCAwKSBQcm9taXNlSW1wbCA9IFByb21pc2U7XG5cbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCksXG4gICAgICBQcm9taXNlSW1wbFxuICAgICk7XG5cbiAgICByZXR1cm4gZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3dcbiAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgLy8gTm90ZTogW1wicmV0dXJuXCJdIG11c3QgYmUgdXNlZCBmb3IgRVMzIHBhcnNpbmcgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgaWYgKGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb21cbiAgICAgICAgICAgIC8vIFwicmV0dXJuXCIgdG8gXCJ0aHJvd1wiLCBsZXQgdGhhdCBvdmVycmlkZSB0aGUgVHlwZUVycm9yIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICBcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7XG5cbiAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZztcblxuICAgIGlmICghIGluZm8pIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIik7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmRvbmUpIHtcbiAgICAgIC8vIEFzc2lnbiB0aGUgcmVzdWx0IG9mIHRoZSBmaW5pc2hlZCBkZWxlZ2F0ZSB0byB0aGUgdGVtcG9yYXJ5XG4gICAgICAvLyB2YXJpYWJsZSBzcGVjaWZpZWQgYnkgZGVsZWdhdGUucmVzdWx0TmFtZSAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG5cbiAgICAgIC8vIFJlc3VtZSBleGVjdXRpb24gYXQgdGhlIGRlc2lyZWQgbG9jYXRpb24gKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7XG5cbiAgICAgIC8vIElmIGNvbnRleHQubWV0aG9kIHdhcyBcInRocm93XCIgYnV0IHRoZSBkZWxlZ2F0ZSBoYW5kbGVkIHRoZVxuICAgICAgLy8gZXhjZXB0aW9uLCBsZXQgdGhlIG91dGVyIGdlbmVyYXRvciBwcm9jZWVkIG5vcm1hbGx5LiBJZlxuICAgICAgLy8gY29udGV4dC5tZXRob2Qgd2FzIFwibmV4dFwiLCBmb3JnZXQgY29udGV4dC5hcmcgc2luY2UgaXQgaGFzIGJlZW5cbiAgICAgIC8vIFwiY29uc3VtZWRcIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhc1xuICAgICAgLy8gXCJyZXR1cm5cIiwgYWxsb3cgdGhlIG9yaWdpbmFsIC5yZXR1cm4gY2FsbCB0byBjb250aW51ZSBpbiB0aGVcbiAgICAgIC8vIG91dGVyIGdlbmVyYXRvci5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gXCJyZXR1cm5cIikge1xuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZS15aWVsZCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBkZWxlZ2F0ZSBtZXRob2QuXG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9XG5cbiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aFxuICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuXG4gICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgZGVmaW5lKEdwLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JcIik7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBkZWZpbmUoR3AsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG5cbiAgZGVmaW5lKEdwLCBcInRvU3RyaW5nXCIsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9KTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGVcbiAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlXG4gIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZVxuICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLlxuICByZXR1cm4gZXhwb3J0cztcblxufShcbiAgLy8gSWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlLCB1c2UgbW9kdWxlLmV4cG9ydHNcbiAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHlcbiAgLy8gb2JqZWN0LiBFaXRoZXIgd2F5LCB0aGUgcmVzdWx0aW5nIG9iamVjdCB3aWxsIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIHZhcmlhYmxlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlLlxuICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiID8gbW9kdWxlLmV4cG9ydHMgOiB7fVxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCBpbiBtb2Rlcm4gZW5naW5lc1xuICAvLyB3ZSBjYW4gZXhwbGljaXRseSBhY2Nlc3MgZ2xvYmFsVGhpcy4gSW4gb2xkZXIgZW5naW5lcyB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIpIHtcbiAgICBnbG9iYWxUaGlzLnJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG4gIH0gZWxzZSB7XG4gICAgRnVuY3Rpb24oXCJyXCIsIFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShydW50aW1lKTtcbiAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gQSBudW1iZXIgb2YgbG9nIHByb2JhYmlsaXR5IGRlbnNpdHkgZnVuY3Rpb25zIChQREYpLiBOYW1pbmcgYW5kIHBhcmFtZXRlcml6YXRpb25cbi8vIHNob3VsZCBtYXRjaCBSJ3MsIGV4Y2VwdCBmb3IgdGhhdCBhbGwgZnVuY3Rpb25zIHJlc2lkZSBpbiBhbiBsZCBvYmplY3QgKFxuLy8gYXMgaW4gXCJsb2cgZGVuc2l0eVwiKSwgc28gdG8gZ2V0IGEgbm9ybWFsIGxvZyBkZW5zaXR5IHlvdSB3b3VsZCB3cml0ZVxuLy8gbGQubm9ybSguLi4pLlxuLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0XG4vLyAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0Lykgd2hpY2ggaW5jbHVkZXMgUERGIGZvciBtYW55IGNvbW1vbiBwcm9iYWJpbGl0eVxuLy8gZGlzdHJpYnV0aW9ucy4gV2hhdCBJIGhhdmUgZG9uZSBpcyBvbmx5IHRvIGNvbnZlcnQgdGhlc2UgdG8gbG9nIFBERnMuXG5cbi8qXG5PcmlnaW5hbCB3b3JrIENvcHlyaWdodCAoYykgMjAxMyBqU3RhdFxuTW9kaWZpZWQgd29yayBDb3B5cmlnaHQgKGMpIDIwMTUgUmFzbXVzIELDpcOldGggXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cblxuXG4vLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanNcbi8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLFxuLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuXG4vLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWxcbi8vIG9iamVjdCBsZCAuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290LmxkID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuICAvLyBPYmplY3QgdG8gaG9sZCB0aGUgZnVuY3Rpb25zIHRvIGJlIGV4cG9ydGVkLlxuICB2YXIgbGQgID0ge307XG4gIFxuICAvLy8vLy8vLy8vIEhlbHBlciBmdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgdmFyIGxnYW1tYSA9IGZ1bmN0aW9uKHgpIHtcbiAgICB2YXIgaiA9IDA7XG4gICAgdmFyIGNvZiA9IFtcbiAgICAgIDc2LjE4MDA5MTcyOTQ3MTQ2LCAtODYuNTA1MzIwMzI5NDE2NzcsIDI0LjAxNDA5ODI0MDgzMDkxLFxuICAgICAgLTEuMjMxNzM5NTcyNDUwMTU1LCAwLjEyMDg2NTA5NzM4NjYxNzllLTIsIC0wLjUzOTUyMzkzODQ5NTNlLTVcbiAgICBdO1xuICAgIHZhciBzZXIgPSAxLjAwMDAwMDAwMDE5MDAxNTtcbiAgICB2YXIgeHgsIHksIHRtcDtcbiAgICB0bXAgPSAoeSA9IHh4ID0geCkgKyA1LjU7XG4gICAgdG1wIC09ICh4eCArIDAuNSkgKiBsb2codG1wKTtcbiAgICBmb3IgKDsgaiA8IDY7IGorKylcbiAgICAgIHNlciArPSBjb2Zbal0gLyArK3k7XG4gICAgcmV0dXJuIGxvZygyLjUwNjYyODI3NDYzMTAwMDUgKiBzZXIgLyB4eCkgLSB0bXA7XG4gIH07XG4gIGxkLmxnYW1tYSA9IGxnYW1tYTtcbiAgXG4gIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiBuIDwgMCA/IE5hTiA6IGxnYW1tYShuICsgMSk7XG4gIH07XG4gIGxkLmxmYWN0b3JpYWwgPSBsZmFjdG9yaWFsO1xuICBcbiAgdmFyIGxjaG9vc2UgPSBmdW5jdGlvbihuLCBrKXtcbiAgICByZXR1cm4gbGZhY3RvcmlhbChuKSAtIGxmYWN0b3JpYWwoaykgLSBsZmFjdG9yaWFsKG4gLSBrKTtcbiAgfTtcbiAgbGQubGNob29zZSA9IGxjaG9vc2U7XG4gIFxuICB2YXIgbGJldGEgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGxnYW1tYShhKSArIGxnYW1tYShiKSAtIGxnYW1tYShhICsgYik7XG4gIH07XG4gIGxkLmxiZXRhID0gbGJldGE7XG4gIFxuICB2YXIgbG9nICA9IE1hdGgubG9nO1xuICB2YXIgZXhwICA9IE1hdGguZXhwO1xuICB2YXIgYWJzICA9IE1hdGguYWJzO1xuICB2YXIgcG93ICA9IE1hdGgucG93O1xuICB2YXIgc3FydCA9IE1hdGguc3FydDtcbiAgdmFyIHBpICAgPSBNYXRoLlBJO1xuICBcbiAgLy8vLy8vLy8vLyBDb250aW5vdXMgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgbGQuYmV0YSA9IGZ1bmN0aW9uKHgsIHNoYXBlMSwgc2hhcGUyKSB7XG4gICAgaWYgKHggPiAxIHx8IHggPCAwKSB7XG4gICAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKHNoYXBlMSA9PT0gMSAmJiBzaGFwZTIgPT09IDEpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHNoYXBlMSAtIDEpICogbG9nKHgpICsgKHNoYXBlMiAtIDEpICogbG9nKDEgLSB4KSAtIGxiZXRhKHNoYXBlMSwgc2hhcGUyKTsgIFxuICAgIH1cbiAgfTtcbiAgXG4gIGxkLmNhdWNoeSA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHJldHVybiBsb2coc2NhbGUpIC0gbG9nKHBvdyh4IC0gbG9jYXRpb24sIDIpICsgcG93KHNjYWxlLCAyKSkgIC0gbG9nKHBpKTtcbiAgfTtcbiAgXG4gIGxkLm5vcm0gPSBmdW5jdGlvbih4LCBtZWFuLCBzZCkge1xuICAgICAgcmV0dXJuIC0wLjUgKiBsb2coMiAqIHBpKSAtbG9nKHNkKSAtIHBvdyh4IC0gbWVhbiwgMikgLyAoMiAqIHNkICogc2QpO1xuICB9O1xuXG4gIC8vIEEgYml2YXJpYXRlIE5vcm1hbCBkaXN0cmlidXRpb24gcGFyYW1ldGVyaXplZCBieSBhcnJheXMgb2YgdHdvIG1lYW5zIGFuZCBTRHMsIGFuZCBcbiAgLy8gdGhlIGNvcnJlbGF0aW9uLlxuICBsZC5iaXZhcm5vcm0gPSBmdW5jdGlvbih4LCBtZWFuLCBzZCwgY29ycikge1xuICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgK1xuICAgICAgICAgICAgcG93KHhbMV0gLSBtZWFuWzFdLCAyKSAvIHBvdyhzZFsxXSwgMikgLSBcbiAgICAgICAgICAgICgyICogY29yciAqICh4WzBdIC0gbWVhblswXSkgKiAoeFsxXSAtIG1lYW5bMV0pKSAvIChzZFswXSAqIHNkWzFdKTtcbiAgICB2YXIgbm9ybWFsaXppbmdfZmFjdG9yID0gLSggbG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuNSAqIGxvZygxIC0gcG93KGNvcnIsIDIpKSApOyBcbiAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSApICk7IFxuICAgIHJldHVybiBiaXZhcl9sb2dfZGVucztcbiAgfTtcbiAgXG5cbiAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHJldHVybiAoLWFicyh4IC0gbG9jYXRpb24pL3NjYWxlKSAtIGxvZygyICogc2NhbGUpO1xuICB9O1xuICBcbiAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7XG4gIFxuICBsZC5nYW1tYSA9IGZ1bmN0aW9uKHgsIHNoYXBlLCByYXRlKSB7XG4gICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7XG4gICAgaWYgKHggPCAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICBpZigoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgKSB7XG4gICAgICByZXR1cm4gLWxvZyhzY2FsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoc2hhcGUgLSAxKSAqIGxvZyh4KSAtIHggLyBzY2FsZSAtIGxnYW1tYShzaGFwZSkgLSBzaGFwZSAqIGxvZyhzY2FsZSk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbih4LCBzaGFwZSwgc2NhbGUpIHtcbiAgICAgIGlmICh4IDw9IDApIHtcbiAgICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtKHNoYXBlICsgMSkgKiBsb2coeCkgLSBzY2FsZSAvIHggLSBsZ2FtbWEoc2hhcGUpICsgc2hhcGUgKiBsb2coc2NhbGUpO1xuICAgIH07XG4gIFxuICBsZC5sbm9ybSA9ICBmdW5jdGlvbih4LCBtZWFubG9nLCBzZGxvZykge1xuICAgIGlmICh4IDw9IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiAtbG9nKHgpIC0gMC41ICogbG9nKDIgKiBwaSkgLSBsb2coc2Rsb2cpIC0gXG4gICAgICAgICAgICBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpO1xuICB9O1xuICBcbiAgbGQucGFyZXRvID0gZnVuY3Rpb24oeCwgc2NhbGUsIHNoYXBlKSB7XG4gICAgaWYgKHggPCBzY2FsZSkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTtcbiAgfTtcbiAgXG4gIGxkLnQgID0gIGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSwgZGYpIHtcbiAgICBkZiA9IGRmID4gMWUxMDAgPyAxZTEwMCA6IGRmO1xuICAgIHJldHVybiBsZ2FtbWEoKGRmICsgMSkvMikgLSBsZ2FtbWEoZGYvMikgLSBsb2coc3FydChwaSAqIGRmKSAqIHNjYWxlKSArXG4gICAgICAgICAgIGxvZyhwb3coMSArICgxL2RmKSAqIHBvdygoeCAtIGxvY2F0aW9uKS9zY2FsZSwgMiksIC0oZGYgKyAxKS8yKSk7XG4gIH07XG4gIFxuICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlXG4gIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIHdlaWJ1bGwgZGlzdHJpYnV0aW9uOiBcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmNcbiAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uKHgsIHNoYXBlLCBzY2FsZSkge1xuICAgIGlmICh4IDwgMCkgcmV0dXJuIC1JbmZpbml0eTtcbiAgICBpZih4ID09PSAwICYmIHNoYXBlIDwgMSkgcmV0dXJuIEluZmluaXR5O1xuICAgIHZhciB0bXAxID0gcG93KHggLyBzY2FsZSwgc2hhcGUgLSAxKTtcbiAgICB2YXIgdG1wMiA9IHRtcDEgKiAoeCAvIHNjYWxlKTtcblx0ICByZXR1cm4gLXRtcDIgKyBsb2coc2hhcGUgKiB0bXAxIC8gc2NhbGUpO1xuICB9O1xuICBcbiAgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZVxuICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSBsb2dpc3RpYyBkaXN0cmlidXRpb246IFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2NoL3Itc291cmNlL2Jsb2IvYjE1NmUzYTcxMTk2N2Y1ODEzMWUyM2MxYjFkYzFlYTkwZTJmMGM0My9zcmMvbm1hdGgvZGxvZ2lzLmNcbiAgbGQubG9naXMgPSBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUpIHtcbiAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpO1xuICAgIHZhciBlID0gZXhwKC14KTtcbiAgICB2YXIgZiA9IDEuMCArIGU7XG4gICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7ICAgIFxuICB9O1xuXG4gIGxkLmRpcmljaGxldCA9IGZ1bmN0aW9uKHgsIGFscGhhKSB7XG4gICAgdmFyIHN1bV9hbHBoYSA9IDA7XG4gICAgdmFyIHN1bV9sZ2FtbWFfYWxwaGEgPSAwO1xuICAgIHZhciBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggPSAwO1xuICAgIHZhciBuID0gYWxwaGEubGVuZ3RoO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIHN1bV9hbHBoYSArPSBhbHBoYVtpXTtcbiAgICAgIHN1bV9sZ2FtbWFfYWxwaGEgKz0gbGdhbW1hKGFscGhhW2ldKTtcbiAgICAgIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCArPSAoYWxwaGFbaV0gLSAxKSAqIGxvZyh4W2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGxnYW1tYShzdW1fYWxwaGEpIC0gc3VtX2xnYW1tYV9hbHBoYSArIHN1bV9hbHBoYV9zdWJfMV9sb2dfeDtcbiAgfTtcbiAgIFxuICAgIFxuICBsZC5leHAgPSBmdW5jdGlvbih4LCByYXRlKSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cocmF0ZSkgLXJhdGUgKiB4O1xuICB9O1xuICBcbiAgbGQudW5pZiA9IGZ1bmN0aW9uKHgsIG1pbiwgbWF4KSB7XG4gICAgICByZXR1cm4gKHggPCBtaW4gfHwgeCA+IG1heCkgPyAtSW5maW5pdHkgOiBsb2coMSAvIChtYXggLSBtaW4pKTtcbiAgfTtcbiAgXG4gIC8vLy8vLy8vLy8gRGlzY3JldGUgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBsZC5iZXJuID0gZnVuY3Rpb24oeCwgcHJvYikge1xuICAgICAgcmV0dXJuICEoeCA9PT0gMCB8fCB4ID09PSAxKSA/IC1JbmZpbml0eSA6IGxvZyh4ICogcHJvYiArICgxIC0geCkgKiAoMSAtIHByb2IpKTtcbiAgfTtcbiAgXG4gIGxkLmNhdCA9IGZ1bmN0aW9uKHgsIHByb2JzKSB7XG4gICAgaWYoeCA8IDEgfHwgeCA+IHByb2JzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxvZyggcHJvYnNbeCAtIDFdICk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQuYmlub20gPSBmdW5jdGlvbih4LCBzaXplLCBwcm9iKSB7XG4gICAgaWYoeCA+IHNpemUgfHwgeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKHByb2IgPT09IDAgfHwgcHJvYiA9PT0gMSkge1xuICAgICAgcmV0dXJuIChzaXplICogcHJvYikgPT09IHggPyAwIDogLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTtcbiAgfTtcbiAgXG4gIHZhciBtdWx0aW5vbSA9IGZ1bmN0aW9uKHgsIHByb2JzKSB7XG4gICAgdmFyIG4gPSB4Lmxlbmd0aDtcbiAgICB2YXIgc2l6ZSA9IDA7XG4gICAgdmFyIHRtcF90ZXJtID0gMDtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZihwcm9ic1tpXSA9PT0gMCkge1xuICAgICAgICBpZih4W2ldICE9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsgIFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaXplICs9IHhbaV07XG4gICAgICAgIHRtcF90ZXJtICs9IHhbaV0gKiBsb2cocHJvYnNbaV0pIC0gbGdhbW1hKHhbaV0gKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxnYW1tYShzaXplICsgMSkgKyB0bXBfdGVybSA7XG4gIH07XG4gIFxuICBsZC5uYmlub20gPSBmdW5jdGlvbih4LCBzaXplLCBwcm9iKSB7XG4gICAgaWYoeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpO1xuICB9O1xuICBcbiAgbGQuaHlwZXIgPSBmdW5jdGlvbih4LCBtLCBuLCBrKSB7XG4gICAgaWYoeCA8IDAgfHwgeCA+IGspIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2Uobiwgay14KSAtIGxjaG9vc2UobStuLCBrKTtcbiAgICB9XG4gIH07XG4gIFxuICBsZC5wb2lzID0gZnVuY3Rpb24oeCwgbGFtYmRhKSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cobGFtYmRhKSAqIHggLSBsYW1iZGEgLSBsZmFjdG9yaWFsKHgpO1xuICB9O1xuICBcbiAgcmV0dXJuIGxkO1xufSkpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanNcbi8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLFxuLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuXG4vLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWxcbi8vIG9iamVjdCBtY21jIC5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgIHJvb3QubWNtYyA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpe1xuXG4vLy8gVGhlIGFjdHVhbCBtb2R1bGUgY29kZSBzdGFydHMgaGVyZSAvLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgXG4gIFxuICAvLy8vLy8vLy8vIEhlbHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqL1xuICB2YXIgcnVuaWYgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKi9cbiAgdmFyIHJ1bmlmX2Rpc2NyZXRlID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkXG4gICAqICBieSBtZWFuIGFuZCBzZC4gXG4gICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovXG4gIHZhciBybm9ybSA9IGZ1bmN0aW9uKG1lYW4sIHNkKSB7XG4gICAgdmFyIHUsIHYsIHgsIHksIHE7XG4gICAgZG8ge1xuICAgICAgdSA9IE1hdGgucmFuZG9tKCk7XG4gICAgICB2ID0gMS43MTU2ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xuICAgICAgeCA9IHUgLSAwLjQ0OTg3MTtcbiAgICAgIHkgPSBNYXRoLmFicyh2KSArIDAuMzg2NTk1O1xuICAgICAgcSA9IHggKiB4ICsgeSAqICgwLjE5NjAwICogeSAtIDAuMjU0NzIgKiB4KTtcbiAgICB9IHdoaWxlIChxID4gMC4yNzU5NyAmJiAocSA+IDAuMjc4NDYgfHwgdiAqIHYgPiAtNCAqIE1hdGgubG9nKHUpICogdSAqIHUpKTtcbiAgICBcbiAgICByZXR1cm4gKHYgLyB1KSAqIHNkICsgbWVhbjtcbiAgfTtcbiAgXG4gIFxuICAvKiogUmV0dXJucyBhIGRlZXAgY2xvbmUgb2Ygc3JjLCBzb3J0IG9mLi4uIEl0IG9ubHkgY29waWVzIGEgbGltaXRlZFxuICAgKiBudW1iZXIgb2YgdHlwZXMgYW5kLCBmb3IgZXhhbXBsZSwgZnVuY3Rpb24gYXJlIG5vdCBjb3BpZWQuIFxuICAgKiBGcm9tIGh0dHA6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1jbG9uZVxuICAgKi9cbiAgdmFyIGRlZXBfY2xvbmUgPSBmdW5jdGlvbihzcmMpIHtcbiAgXHRmdW5jdGlvbiBtaXhpbihkZXN0LCBzb3VyY2UsIGNvcHlGdW5jKSB7XG4gIFx0XHR2YXIgbmFtZSwgcywgaSwgZW1wdHkgPSB7fTtcbiAgXHRcdGZvcihuYW1lIGluIHNvdXJjZSl7XG4gIFx0XHRcdC8vIHRoZSAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykgY29uZGl0aW9uIGF2b2lkcyBjb3B5aW5nIHByb3BlcnRpZXMgaW4gXCJzb3VyY2VcIlxuICBcdFx0XHQvLyBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlLlx0IEZvciBleGFtcGxlLCBpZiBkZXN0IGhhcyBhIGN1c3RvbSB0b1N0cmluZygpIG1ldGhvZCxcbiAgXHRcdFx0Ly8gZG9uJ3Qgb3ZlcndyaXRlIGl0IHdpdGggdGhlIHRvU3RyaW5nKCkgbWV0aG9kIHRoYXQgc291cmNlIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGVcbiAgXHRcdFx0cyA9IHNvdXJjZVtuYW1lXTtcbiAgXHRcdFx0aWYoIShuYW1lIGluIGRlc3QpIHx8IChkZXN0W25hbWVdICE9PSBzICYmICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSkpe1xuICBcdFx0XHRcdGRlc3RbbmFtZV0gPSBjb3B5RnVuYyA/IGNvcHlGdW5jKHMpIDogcztcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdFx0cmV0dXJuIGRlc3Q7XG4gIFx0fVxuICBcdGlmKCFzcmMgfHwgdHlwZW9mIHNyYyAhPSBcIm9iamVjdFwiIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpID09PSBcIltvYmplY3QgRnVuY3Rpb25dXCIpe1xuICBcdFx0Ly8gbnVsbCwgdW5kZWZpbmVkLCBhbnkgbm9uLW9iamVjdCwgb3IgZnVuY3Rpb25cbiAgXHRcdHJldHVybiBzcmM7XHQvLyBhbnl0aGluZ1xuICBcdH1cbiAgXHRpZihzcmMubm9kZVR5cGUgJiYgXCJjbG9uZU5vZGVcIiBpbiBzcmMpe1xuICBcdFx0Ly8gRE9NIE5vZGVcbiAgXHRcdHJldHVybiBzcmMuY2xvbmVOb2RlKHRydWUpOyAvLyBOb2RlXG4gIFx0fVxuICBcdGlmKHNyYyBpbnN0YW5jZW9mIERhdGUpe1xuICBcdFx0Ly8gRGF0ZVxuICBcdFx0cmV0dXJuIG5ldyBEYXRlKHNyYy5nZXRUaW1lKCkpO1x0Ly8gRGF0ZVxuICBcdH1cbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBSZWdFeHApe1xuICBcdFx0Ly8gUmVnRXhwXG4gIFx0XHRyZXR1cm4gbmV3IFJlZ0V4cChzcmMpOyAgIC8vIFJlZ0V4cFxuICBcdH1cbiAgXHR2YXIgciwgaSwgbDtcbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBBcnJheSl7XG4gIFx0XHQvLyBhcnJheVxuICBcdFx0ciA9IFtdO1xuICBcdFx0Zm9yKGkgPSAwLCBsID0gc3JjLmxlbmd0aDsgaSA8IGw7ICsraSl7XG4gIFx0XHRcdGlmKGkgaW4gc3JjKXtcbiAgXHRcdFx0XHRyLnB1c2goZGVlcF9jbG9uZShzcmNbaV0pKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHQvLyBnZW5lcmljIG9iamVjdHNcbiAgXHRcdHIgPSBzcmMuY29uc3RydWN0b3IgPyBuZXcgc3JjLmNvbnN0cnVjdG9yKCkgOiB7fTtcbiAgXHR9XG4gIFx0cmV0dXJuIG1peGluKHIsIHNyYywgZGVlcF9jbG9uZSk7XG4gIH07XG4gIFxuICAvKiogU3BlY2lhbGl6ZWQgY2xvbmUgZnVuY3Rpb24gdGhhdCBvbmx5IGNsb25lcyBzY2FsYXJzIGFuZCBuZXN0ZWQgYXJyYXlzIHdoZXJlXG4gICAqIGVhY2ggYXJyYXkgZWl0aGVyIGNvbnNpc3RzIG9mIGFsbCBhcnJheXMgb3IgYWxsIG51bWJlcnMuIFRoaXMgZnVuY3Rpb25cbiAgICogaXMgbWVhbnQgYXMgYSBmYXN0IHdheSBvZiBjbG9uaW5nIHBhcmFtZXRlciBkcmF3cyB3aXRoaW4gdGhlIG1jbWMgc2FtcGxpbmdcbiAgICogbG9vcC5cbiAgICovXG4gIHZhciBjbG9uZV9wYXJhbV9kcmF3ID0gZnVuY3Rpb24oeCkge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoeCkpIHtcbiAgICAgIGlmKEFycmF5LmlzQXJyYXkoeFswXSkpIHtcbiAgICAgICAgLy8geCBpcyBhbiBhcnJheSBvZiBhcnJheXMgc28gd2UgbmVlZCB0byBjbG9uZSBpdCByZWN1cnNpdmVseVxuICAgICAgICB2YXIgeF9jb3B5ID0gW107XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB4X2NvcHkucHVzaChjbG9uZV9wYXJhbV9kcmF3KHhbaV0pKTtcbiAgICAgICAgfSBcbiAgICAgICAgcmV0dXJuIHhfY29weTtcbiAgICAgIH0gZWxzZSB7IC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgYXJyYXlzIG9mIHNjYWxhcnNcbiAgICAgICAgcmV0dXJuIHguc2xpY2UoMCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHsgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXJcbiAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgbnVtYmVyLlxuICAgKi9cbiAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT0gXCJudW1iZXJcIiB8fCAodHlwZW9mIG9iamVjdCA9PSBcIm9iamVjdFwiICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIChwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsL25lc3RlZCkgYXJyYXkuXG4gICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLFxuICAgKiAgIFs1XSB3b3VsZCB5aWVsZCBhIDUgZWxlbWVudCBhcnJheSwgYW5kIFszLDNdIHdvdWxkIHlpZWxkIGEgMyBieSAzIG1hdHJpeC5cbiAgICogQHBhcmFtIGluaXQgLSBBIHZhbHVlIG9yIGEgZnVuY3Rpb24gdXNlZCB0byBmaWxsIGluIHRoZSBlYWNoIGVsZW1lbnQgaW5cbiAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIFxuICAgKiAgIGV2YWx1YXRlZCBvbmNlIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBpdCdzIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWQgdG9cbiAgICogICBmaWxsIGluIGVhY2ggZWxlbWVudC5cbiAgICogQGV4YW1wbGUgXG4gICAqIC8vIFRoZSBmb2xsb3dpbmcgd291bGQgcmV0dXJuIFtbMSwxXSxbMSwxXSxbMSwxXV1cbiAgICogY3JlYXRlX2FycmF5KFsyLDNdLCAxKVxuICAgKi9cbiAgdmFyIGNyZWF0ZV9hcnJheSA9IGZ1bmN0aW9uKGRpbSwgaW5pdCkge1xuICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoZGltWzBdKTtcbiAgICB2YXIgaTtcbiAgICBpZihkaW0ubGVuZ3RoID09IDEpIHsgLy8gRmlsbCBpdCB1cCB3aXRoIGluaXRcbiAgICAgIGlmKHR5cGVvZiBpbml0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBpbml0KCk7XG4gICAgICAgIH0gIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBpbml0O1xuICAgICAgICB9IFxuICAgICAgfVxuICAgIH0gZWxzZSBpZihkaW0ubGVuZ3RoID4gMSkge1xuICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gY3JlYXRlX2FycmF5KGRpbS5zbGljZSgxKSwgaW5pdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiY3JlYXRlX2FycmF5IGNhbid0IGNyZWF0ZSBhIGRpbWVuc2lvbmxlc3MgYXJyYXlcIjtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciBcbiAgICogZXhhbXBsZSwgYXJyYXlfZGltKCBbWzEsIDJdLCBbMSwgMl1dICkgc2hvdWxkIHJldHVybiBbMiwgMl1cbiAgICogQXNzdW1lcyB0aGF0IGFsbCBhcnJheXMgaW5zaWRlIGFub3RoZXIgYXJyYXkgYXJlIG9mIHRoZSBzYW1lIGxlbmd0aC5cbiAgICogQGV4YW1wbGVcbiAgICogLy8gU2hvdWxkIHJldHVybiBbNCwgMiwgMV1cbiAgICogYXJyYXlfZGltKGNyZWF0ZV9hcnJheShbNCwgMiwgMV0sIDApKVxuICAgKi9cbiAgdmFyIGFycmF5X2RpbSA9IGZ1bmN0aW9uKGEpIHtcbiAgICBpZihBcnJheS5pc0FycmF5KGFbMF0pKSB7XG4gICAgICByZXR1cm4gW2EubGVuZ3RoXS5jb25jYXQoYXJyYXlfZGltKGFbMF0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFthLmxlbmd0aF07XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0d28gYXJyYXlzIGFyZSBlcXVhbCBpbiB0aGUgc2Vuc2UgdGhhdCB0aGV5IGNvbnRhaW4gdGhlIHNhbWUgZWxlbWVudHNcbiAgICogYXMganVkZ2VkIGJ5IHRoZSBcIj09XCIgb3BlcmF0b3IuIFJldHVybnMgdHJ1ZSBvciBmYWxzZS5cbiAgICogQWRhcHRlZCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE0ODUzOTc0LzEwMDE4NDhcbiAgICovIFxuICB2YXIgYXJyYXlfZXF1YWwgPSBmdW5jdGlvbiAoYTEsIGEyKSB7XG4gICAgICBpZiAoYTEubGVuZ3RoICE9IGEyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhMS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5c1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGExW2ldKSAmJiBBcnJheS5pc0FycmF5KGEyW2ldKSkge1xuICAgICAgICAgICAgICAvLyByZWN1cnNlIGludG8gdGhlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgICAgICAgaWYgKCFhcnJheV9lcXVhbChhMVtpXSwgYTJbaV0pKSByZXR1cm4gZmFsc2U7ICAgICAgIFxuICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgIGVsc2UgaWYgKGExW2ldICE9IGEyW2ldKSB7IFxuICAgICAgICAgICAgICAvLyBXYXJuaW5nIC0gdHdvIGRpZmZlcmVudCBvYmplY3QgaW5zdGFuY2VzIHdpbGwgbmV2ZXIgYmUgZXF1YWw6IHt4OjIwfSAhPSB7eDoyMH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAgIFxuICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgfSAgICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRyYXZlcnNlcyBhIHBvc3NpYmx5IG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgXCJsZWFmIG5vZGVzXCIsIFxuICAgKiB0aGF0IGlzLCB2YWx1ZXMgdGhhdCBhcmUgbm90IGFycmF5cy4gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2FtZSBzaXplIGFzXG4gICAqIGEuXG4gICAqL1xuICB2YXIgbmVzdGVkX2FycmF5X2FwcGx5ID0gZnVuY3Rpb24oYSwgZnVuKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShhLmxlbmd0aCk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmdW4oYSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqIFJhbmRvbWl6aW5nIHRoZSBhcnJheSBlbGVtZW50IG9yZGVyIGluLXBsYWNlLiBVc2luZyBEdXJzdGVuZmVsZFxuICAgKiBzaHVmZmxlIGFsZ29yaXRobS4gQWRhcHRlZCBmcm9tIGhlcmU6IFxuICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4XG4gICAqL1xuICBmdW5jdGlvbiBzaHVmZmxlX2FycmF5KGFycmF5KSB7XG4gICAgICBmb3IgKHZhciBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTtcbiAgICAgICAgICBhcnJheVtpXSA9IGFycmF5W2pdO1xuICAgICAgICAgIGFycmF5W2pdID0gdGVtcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIERvZXMgdGhlIHNhbWUgdGhpbmcgYXMgbmVzdGVkX2FycmF5X2FwcGx5LCB0aGF0IGlzLCB0cmF2ZXJzZXMgYSBwb3NzaWJseVxuICAgKiBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsIFwibGVhZiBub2Rlc1wiIGFuZCByZXR1cm5zIGFuIGFycmF5IFxuICAgKiBvZiB0aGUgc2FtZSBzaXplIGFzIGEuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseVxuICAgKiBicmFuY2hlcyByYW5kb21seS5cbiAgICovXG4gIHZhciBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5ID0gZnVuY3Rpb24oYSwgZnVuKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgdmFyIGxlbiA9IGEubGVuZ3RoO1xuICAgICAgdmFyIGk7XG4gICAgICB2YXIgYXJyYXlfaXMgPSBbXTtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGFycmF5X2lzW2ldID0gaTtcbiAgICAgIH1cbiAgICAgIHNodWZmbGVfYXJyYXkoYXJyYXlfaXMpO1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgXG4gICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgYXJyYXlfaSA9IGFycmF5X2lzW2ldO1xuICAgICAgICByZXN1bHRbYXJyYXlfaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVthcnJheV9pXSwgZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmdW4oYSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIEFsbG93cyBhIHByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZnVsdHMgY2FuIGJlXG4gICAqIG92ZXJyaWRkZW4gYnkgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAqICBAcGFyYW0gb3B0aW9uX25hbWUgLSB0aGUgbmFtZSBvZiB0aGUgb3B0aW9uIGFzIGEgc3RyaW5nXG4gICAqICBAcGFyYW0gbXlfb3B0aW9ucyAtIGFuIG9wdGlvbiBvYmplY3QgdGhhdCBjb3VsZCBoYXZlIG9wdGlvbl9uYW1lIFxuICAgKiAgICBhcyBhIG1lbWJlci5cbiAgICogQHBhcmFtIGRlZmF1bF92YWx1ZSAtIGRlZnVsdCB2YWx1ZSB0aGF0IGlzIHJldHVybmVkIGlmIG9wdGlvbl9uYW1lIFxuICAgKiAgIGlzIG5vdCBkZWZpbmVkIGluIG15X29wdGlvbnMuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBteV9vcHRpb25zID0ge3BpOiAzLjE0MTU5fVxuICAgKiB2YXIgcGkgPSBnZXRfb3B0aW9uKFwicGlcIiwgbXlfb3B0aW9ucywgMy4xNClcbiAgICovXG4gIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuXG4gIC8vIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LiBGb3IgZXhhbXBsZTpcbiAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbihcInBpXCIsIG15X29wdGlvbnMsIDMuMTQpXG4gIHZhciBnZXRfb3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSkge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHJldHVybiBvcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbl9uYW1lKSAmJiBcbiAgICAgICAgICAgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IHVuZGVmaW5lZCAgJiYgXG4gICAgICAgICAgIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSBudWxsID8gb3B0aW9uc1tvcHRpb25fbmFtZV0gOiBkZWZhdWxfdmFsdWU7XG4gIH07XG4gIFxuICAvKiogVmVyc2lvbiBvZiBnZXRfb3B0aW9uIHdoZXJlIHRoZSBvcHRpb24gc2hvdWxkIGJlIGEgb25lIG9yIG11bHRpLWRpbWVuc2lvbmFsXG4gICAqIGFycmF5IGFuZCB3aGVyZSB0aGUgZGVmYXVsdCBjYW4gYmUgb3ZlcnJpZGRlbiBlaXRoZXIgYnkgYSBzY2FsYXIgb3IgYnkgYW4gYXJyYXkuXG4gICAqIElmIGl0J3MgYSBzY2FsYXIgdGhlIHRoYXQgc2NhbGFyIGlzIHVzZWQgdG8gaW5pdGlhbGl6ZSBhbiBhcnJheSB3aXRoIFxuICAgKiBkaW0gZGltZW5zaW9ucy5cbiAgICogXG4gICAqL1xuICB2YXIgZ2V0X211bHRpZGltX29wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkaW0sIGRlZmF1bF92YWx1ZSkge1xuICAgIHZhciB2YWx1ZSA9IGdldF9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSk7XG4gICAgIGlmKCEgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICB2YWx1ZSA9IGNyZWF0ZV9hcnJheShkaW0sIHZhbHVlKTtcbiAgICAgfSBcbiAgICAgaWYoISBhcnJheV9lcXVhbCggYXJyYXlfZGltKHZhbHVlKSwgZGltKSkge1xuICAgICAgIHRocm93IFwiVGhlIG9wdGlvbiBcIiArIG9wdGlvbl9uYW1lICsgXCIgaXMgb2YgZGltZW5zaW9uIFtcIiArIFxuICAgICAgICAgICAgIGFycmF5X2RpbSh2YWx1ZSkgKyBcIl0gYnV0IHNob3VsZCBiZSBbXCIgKyBkaW0gKyBcIl0uXCI7XG4gICAgfVxuICAgICByZXR1cm4gdmFsdWU7XG4gIH07XG4gIFxuICAvLy8vLy8vLy8vIEZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIG9iamVjdHMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgLyoqXG4gICAqIFJldHVybnMgYSBmaXhlZCAoc2FtZSBldmVyeSB0aW1lKSBudW1iZXIgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgICogYSBwYXJhbWV0ZXIgb2YgYSBjZXJ0YWluIHR5cGUsIHBvc3NpYmx5IHdpdGggbG93ZXIgYW5kIHVwcGVyIGJvdW5kcy5cbiAgICogVGhlIHBvc3NpbGUgdHlwZXMgYXJlIFwicmVhbFwiLCBcImludFwiLCBhbmQgXCJiaW5hcnlcIi5cbiAgICovXG4gIHZhciBwYXJhbV9pbml0X2ZpeGVkID0gZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB7XG4gICAgaWYobG93ZXIgPiB1cHBlcikge1xuICAgICAgdGhyb3cgXCJDYW4gbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIHdoZXJlIGxvd2VyIGJvdW5kID4gdXBwZXIgYm91bmRcIjtcbiAgICB9XG4gICAgaWYodHlwZSA9PT0gXCJyZWFsXCIpIHtcbiAgICAgIGlmKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiAwLjU7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gdXBwZXIgLSAwLjU7XG4gICAgICB9IGVsc2UgaWYodXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiBsb3dlciArIDAuNTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA8PSB1cHBlcikge1xuICAgICAgICByZXR1cm4gKGxvd2VyICsgdXBwZXIpIC8gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJpbnRcIikge1xuICAgICAgaWYobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gdXBwZXIgLSAxO1xuICAgICAgfSBlbHNlIGlmKHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gbG93ZXIgKyAxO1xuICAgICAgfSBlbHNlIGlmKGxvd2VyIDw9IHVwcGVyKXtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGxvd2VyICsgdXBwZXIpIC8gMik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiYmluYXJ5XCIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICB0aHJvdyBcIkNvdWxkIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciBvZiB0eXBlIFwiICsgdHlwZSArIFwiW1wiICsgbG93ZXIgKyBcIiwgXCIgKyB1cHBlciArIFwiXVwiO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIFxuICAgKiBhbmQgaW5pdGlhbGl6ZXMgbm9uLWluaXRpYWxpemVkIHBhcmFtZXRlcnMuIFRoaXMgbW9kaWZpZWQgdmVyc2lvbiBvZlxuICAgKiBwYXJhbXNfdG9fY29tcGxldGUgaXMgcmV0dXJuZWQgYXMgYSBkZWVwIGNvcHkgYW5kIG5vdCBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlXG4gICAqIGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikgdGhhdCBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIG51bWJlciBcbiAgICogKGxpa2UgcGFyYW1faW5pdF9maXhlZCwgZm9yIGV4YW1wbGUpLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcGFyYW1zID0geyBcIm11XCI6IHtcInR5cGVcIjogXCJyZWFsXCJ9IH1cbiAgICogcGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHBhcmFtcyk7XG4gICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOlxuICAgKiAvLyAge1wibXVcIjogeyBcInR5cGVcIjogXCJyZWFsXCIsIFwiZGltXCI6IFsxXSwgXCJ1cHBlclwiOiBJbmZpbml0eSxcbiAgICogLy8gICAgICAgICAgIFwibG93ZXJcIjogLUluZmluaXR5LCBcImluaXRcIjogMC41IH19XG4gICAqLyBcbiAgdmFyIGNvbXBsZXRlX3BhcmFtcyAgPSBmdW5jdGlvbihwYXJhbXNfdG9fY29tcGxldGUsIHBhcmFtX2luaXQpIHtcbiAgICB2YXIgcGFyYW1zID0gZGVlcF9jbG9uZShwYXJhbXNfdG9fY29tcGxldGUpO1xuICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7IGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtX25hbWUpKSBjb250aW51ZTtcbiAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1twYXJhbV9uYW1lXTtcbiAgICAgIGlmKCAhcGFyYW0uaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpKSB7XG4gICAgICAgIHBhcmFtLnR5cGUgPSBcInJlYWxcIjtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcImRpbVwiKSkge1xuICAgICAgICBwYXJhbS5kaW0gPSBbMV07XG4gICAgICB9XG4gICAgICBpZihpc19udW1iZXIocGFyYW0uZGltKSkge1xuICAgICAgICBwYXJhbS5kaW0gPSBbcGFyYW0uZGltXTtcbiAgICAgIH1cbiAgICAgIGlmKHBhcmFtLnR5cGUgPT0gXCJiaW5hcnlcIikge1xuICAgICAgICBwYXJhbS51cHBlciA9IDE7XG4gICAgICAgIHBhcmFtLmxvd2VyID0gMDtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcInVwcGVyXCIpKSB7XG4gICAgICAgIHBhcmFtLnVwcGVyID0gSW5maW5pdHk7XG4gICAgICB9XG4gICAgICBpZighcGFyYW0uaGFzT3duUHJvcGVydHkoXCJsb3dlclwiKSkge1xuICAgICAgICBwYXJhbS5sb3dlciA9IC1JbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYocGFyYW0uaGFzT3duUHJvcGVydHkoXCJpbml0XCIpKSB7XG4gICAgICAgIC8vIElmIHRoaXMgaXMganVzdCBhIG51bWJlciBvciBhIG5lc3RlZCBhcnJheSB3ZSBsZWF2ZSBpdCBhbG9uZSwgYnV0IGlmLi4uXG4gICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSAmJiB0eXBlb2YgcGFyYW0uaW5pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgLy8gcGFyYW0uaW5pdCBpcyBhIGZ1bmN0aW9uLCB1c2UgdGhhdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtLmluaXQoKTtcbiAgICAgICAgfSBlbHNlIGlmKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHtcbiAgICAgICAgLy8gV2UgaGF2ZSBhIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyIHdoZXJlIHRoZSBwYXJhbS5pbml0IGV4aXN0IGJ1dFxuICAgICAgICAvLyBpcyBub3QgYW4gYXJyYXkuIFRoZW4gYXNzdW1lIGl0IGlzIGEgbnVtYmVyIG9yIGEgZnVuY3Rpb24gYW5kIHVzZVxuICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBwYXJhbS5pbml0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gV2UgdXNlIHRoZSBkZWZhdWx0IGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLlxuICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbV9pbml0KHBhcmFtLnR5cGUsIHBhcmFtLmxvd2VyLCBwYXJhbS51cHBlcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfTtcbiAgXG4gIFxuICAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIFxuICAvKipcbiAgICogQGludGVyZmFjZVxuICAgKiBBIFN0ZXBwZXIgaXMgYW4gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBwdXNoaW5nIGFyb3VuZCBvbmVcbiAgICogb3IgbW9yZSBwYXJhbWV0ZXIgdmFsdWVzIGluIGEgc3RhdGUgYWNjb3JkaW5nIHRvIHRoZSBkaXN0cmlidXRpb25cbiAgICogZGVmaW5lZCBieSB0aGUgbG9nIHBvc3Rlcmlvci4gVGhpcyBkZWZpbmVzIHRoZSBTdGVwcGVyIFwiaW50ZXJmYWNlXCIsXG4gICAqIHdoZXJlIFwiaW50ZXJmYWNlXCIgbWVhbnMgdGhhdCBTdGVwcGVyIGRlZmluZXMgYSBjbGFzcyB0aGF0IGlzIG5ldmVyXG4gICAqIG1lYW50IHRvIGJlIGluc3RhbnRpYXRlZCwgYnV0IGp1c3QgdG8gYmUgc3ViY2xhc3NlZCBieSBzcGVjaWFsaXplZFxuICAgKiBzdGVwcGVyIGZ1bmN0aW9ucy5cbiAgICogQGludGVyZmFjZVxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiB7IFwidHlwZVwiOiBcInJlYWxcIiwgXCJkaW1cIjogWzFdLCBcInVwcGVyXCI6IEluZmluaXR5LCBcbiAgICogICBcImxvd2VyXCI6IC1JbmZpbml0eSwgXCJpbml0XCI6IDAuNSB9fVxuICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgYXJlIGV4cGVjdGVkIHRvIGJlIFwiY29tcGxldGVcIiwgdGhhdCBpcyxcbiAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycyBpbiBwYXJhbXNcbiAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzXG4gICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOlxuICAgKiAgIHttdTogMTAsIHNpZ21hOiA1LCBiZXRhOiBbMSwgMi41XX1cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGVcbiAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3RcbiAgICogICBzaG91bGQgY2hhbmdlIGlmIHRoZSB0aGUgdmFsdWVzIGluIHN0YXRlIGFyZSBjaGFuZ2VkLlxuICBcbiAgICovXG4gIHZhciBTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5sb2dfcG9zdCA9IGxvZ19wb3N0O1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBTaG91bGQgcmV0dXJuIHRoZSBuZXcgc3RhdGUsXG4gICAqIGJ1dCBpcyBtYWlubHkgY2FsbGVkIGZvciBpdCdzIHNpZGUgZWZmZWN0IG9mIG1ha2luZyBhIGNoYW5nZSBpbiB0aGVcbiAgICogc3RhdGUgb2JqZWN0LlxuICAgKi9cbiAgU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IFwiRXZlcnkgU3RlcHBlciBuZWVkIHRvIGltcGxlbWVudCBzdGVwKClcIjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgYWRhcHQgd2hpbGUgc3RlcHBpbmcuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gXG4gIH07XG4gIFxuICAvKipcbiAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGNlYXNlIGFkYXB0aW5nIHdoaWxlIHN0ZXBwaW5nLlxuICAgKi8gXG4gIFN0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gXG4gIH07XG4gIFxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmcgaW5mbyByZWdhcmRpbmcgdGhlIHN0ZXBwZXIuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIHN0ZXBwZXIuXG4gICAgcmV0dXJuIHt9O1xuICB9O1xuICBcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW5cbiAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiBcIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUNcIlxuICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKVxuICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhXG4gICAqIG51bWJlciBhbmQgbG9nX3NjYWxlIGRlZmluZXMgdGhlIHNjYWxlIG9mIHRoZSBwcm9wb3NhbCBzb21laG93LlxuICAqL1xuICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgZ2VuZXJhdGVfcHJvcG9zYWwpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggICE9IDEpIHtcbiAgICAgIHRocm93IFwiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgaWYoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgdGhyb3cgXCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjtcbiAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7XG4gICAgXG4gICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAgICAgPSBnZXRfb3B0aW9uKFwicHJvcF9sb2dfc2NhbGVcIiwgb3B0aW9ucywgMCk7XG4gICAgdGhpcy5iYXRjaF9zaXplICAgICAgICAgPSBnZXRfb3B0aW9uKFwiYmF0Y2hfc2l6ZVwiLCBvcHRpb25zLCA1MCk7XG4gICAgdGhpcy5tYXhfYWRhcHRhdGlvbiAgICAgPSBnZXRfb3B0aW9uKFwibWF4X2FkYXB0YXRpb25cIiwgb3B0aW9ucywgMC4zMyk7XG4gICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfb3B0aW9uKFwiaW5pdGlhbF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIDEuMCk7XG4gICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUgPSBnZXRfb3B0aW9uKFwidGFyZ2V0X2FjY2VwdF9yYXRlXCIsIG9wdGlvbnMsIDAuNDQpO1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgICAgICAgID0gZ2V0X29wdGlvbihcImlzX2FkYXB0aW5nXCIsIG9wdGlvbnMsIHRydWUpO1xuICAgIFxuICAgIHRoaXMuZ2VuZXJhdGVfcHJvcG9zYWwgPSBnZW5lcmF0ZV9wcm9wb3NhbDtcbiAgICBcbiAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwO1xuICAgIHRoaXMuYmF0Y2hfY291bnQgPSAwO1xuICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7ICBcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT25lZGltTWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtX3N0YXRlID0gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdO1xuICAgICAgdmFyIHBhcmFtX3Byb3Bvc2FsID0gdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgdGhpcy5wcm9wX2xvZ19zY2FsZSk7XG4gICAgICBpZihwYXJhbV9wcm9wb3NhbCA8IHRoaXMubG93ZXIgfHwgcGFyYW1fcHJvcG9zYWwgPiB0aGlzLnVwcGVyKSB7XG4gICAgICAgIC8vIE91dHNpZGUgb2YgbGltaXRzIG9mIHRoZSBwYXJhbWV0ZXIsIHJlamVjdCB0aGUgcHJvcG9zYWwgXG4gICAgICAgIC8vIGFuZCBzdGF5IGF0IHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAgfSBlbHNlIHsgLy8gbWFrZSBhIE1ldHJvcG9saXMgc3RlcFxuICAgICAgICB2YXIgY3Vycl9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gcGFyYW1fcHJvcG9zYWw7XG4gICAgICAgIHZhciBwcm9wX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgICAgICB2YXIgYWNjZXB0X3Byb2IgPSBNYXRoLmV4cChwcm9wX2xvZ19kZW5zIC0gY3Vycl9sb2dfZGVucyk7XG4gICAgICAgIGlmKGFjY2VwdF9wcm9iID4gTWF0aC5yYW5kb20oKSkge1xuICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWxcbiAgICAgICAgICBpZih0aGlzLmlzX2FkYXB0aW5nKSB0aGlzLmFjY2VwdGFuY2VfY291bnQrKyA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbVxuICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3N0YXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZih0aGlzLmlzX2FkYXB0aW5nKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiArKztcbiAgICAgICAgaWYodGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID49IHRoaXMuYmF0Y2hfc2l6ZSkgeyAvLyB0aGVuIGFkYXB0XG4gICAgICAgICAgdGhpcy5iYXRjaF9jb3VudCArKztcbiAgICAgICAgICB2YXIgbG9nX3NkX2FkanVzdG1lbnQgPSBcbiAgICAgICAgICAgIE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIFxuICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gLyBNYXRoLnNxcnQodGhpcy5iYXRjaF9jb3VudCkpO1xuICAgICAgICAgIGlmKHRoaXMuYWNjZXB0YW5jZV9jb3VudCAvIHRoaXMuYmF0Y2hfc2l6ZSA+IHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlICs9IGxvZ19zZF9hZGp1c3RtZW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlIC09IGxvZ19zZF9hZGp1c3RtZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwO1xuICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07XG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgPSB0cnVlO1xuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBmYWxzZTtcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BfbG9nX3NjYWxlOiB0aGlzLnByb3BfbG9nX3NjYWxlLFxuICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsXG4gICAgICBhY2NlcHRhbmNlX2NvdW50OiB0aGlzLmFjY2VwdGFuY2VfY291bnQsXG4gICAgICBpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uOiB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24sXG4gICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudFxuICAgIH07XG4gIH07XG4gIFxuICBcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHJldHVybmluZyBhIE5vcm1hbCBwcm9wb3NhbC5cbiAgICovXG4gIHZhciBub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHtcbiAgICByZXR1cm4gcm5vcm0ocGFyYW1fc3RhdGUgLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgUmVhbE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBub3JtYWxfcHJvcG9zYWwpO1xuICB9O1xuICBcbiAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICAvKipcbiAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2FsLlxuICAgKi9cbiAgdmFyIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHJub3JtKHBhcmFtX3N0YXRlICwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKSk7XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7XG4gIH07XG4gIFxuICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluXG4gICAqIHRoZSBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gXCJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DXCJcbiAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KSBmb3IgcG9zc2libHkgbXVsdGlkaW1lbnNpb25hbCBhcnJheXMuIFRoYXRcbiAgICogaXMsIGluc3RlYWQgb2YganVzdCB0YWtpbmcgYSBzdGVwIGZvciBhIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIgbGlrZSBcbiAgICogT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIsIHRoaXMgU3RlcHBlciBpcyByZXNwb25zaWJsZSBmb3IgdGFraW5nIHN0ZXBzIFxuICAgKiBmb3IgYSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5LiBJdCdzIHN0aWxsIHByZXR0eSBkdW1iIGFuZCBqdXN0IHRha2VzXG4gICAqIG9uZS1kaW1lbnNpb25hbCBzdGVwcyBmb3IgZWFjaCBwYXJhbWV0ZXIgY29tcG9uZW50LCB0aG91Z2guXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSBcbiAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgICogQHBhcmFtIFN1YlN0ZXBwZXIgLSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSBvZiBvbmUgZGltZW5zaW9uYWwgU3RlcHBlciB0byBhcHBseSBvblxuICAgKiAgIGFsbCB0aGUgY29tcG9uZW50cyBvZiB0aGUgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuXG4gICovXG4gIHZhciBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFN1YlN0ZXBwZXIpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggICE9IDEpIHtcbiAgICAgIHRocm93IFwiTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyO1xuICAgIHRoaXMudXBwZXIgPSBwYXJhbS51cHBlcjtcbiAgICB0aGlzLmRpbSA9IHBhcmFtLmRpbTtcbiAgXG4gICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwicHJvcF9sb2dfc2NhbGVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDApO1xuICAgIHRoaXMuYmF0Y2hfc2l6ZSAgICAgICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcImJhdGNoX3NpemVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDUwKTtcbiAgICB0aGlzLm1heF9hZGFwdGF0aW9uICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJtYXhfYWRhcHRhdGlvblwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMC4zMyk7XG4gICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiaW5pdGlhbF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAxLjApO1xuICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X211bHRpZGltX29wdGlvbihcInRhcmdldF9hY2NlcHRfcmF0ZVwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMC40NCk7XG4gICAgdGhpcy5pc19hZGFwdGluZyAgICAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiaXNfYWRhcHRpbmdcIiwgb3B0aW9ucywgdGhpcy5kaW0sIHRydWUpO1xuICAgIFxuICAgIC8vIFRoaXMgaGFjayBiZWxvdyBpcyBhIHJlY3Vyc2l2ZSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYW4gYXJyYXkgb2YgXG4gICAgLy8gb25lIGRpbWVuc2lvbmFsIHN0ZXBwZXJzIGFjY29yZGluZyB0byBkaW0uXG4gICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IFxuICAgICAgZnVuY3Rpb24oZGltLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlLCBiYXRjaF9zaXplLCBtYXhfYWRhcHRhdGlvbiwgaW5pdGlhbF9hZGFwdGF0aW9uLCB0YXJnZXRfYWNjZXB0X3JhdGUsIGlzX2FkYXB0aW5nKSB7XG4gICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTtcbiAgICAgIGlmKGRpbS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgdmFyIHN1Ym9wdGlvbnMgPSB7cHJvcF9sb2dfc2NhbGU6IHByb3BfbG9nX3NjYWxlW2ldLCBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLFxuICAgICAgICAgICAgbWF4X2FkYXB0YXRpb246IG1heF9hZGFwdGF0aW9uW2ldLCBpbml0aWFsX2FkYXB0YXRpb246IGluaXRpYWxfYWRhcHRhdGlvbltpXSxcbiAgICAgICAgICAgIHRhcmdldF9hY2NlcHRfcmF0ZTogdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZzogaXNfYWRhcHRpbmdbaV19O1xuICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307XG4gICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pO1xuICAgICAgICAgICAgc3VicGFyYW1baV0uZGltID0gWzFdOyAvLyBBcyB0aGlzIHNob3VsZCBub3cgYmUgYSBvbmUtZGltIHBhcmFtZXRlclxuICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWRcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBTdWJTdGVwcGVyKHN1YnBhcmFtLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHN1Ym9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCwgcHJvcF9sb2dfc2NhbGVbaV0sIFxuICAgICAgICAgICAgYmF0Y2hfc2l6ZVtpXSwgbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbltpXSwgdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZ1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdGVwcGVycztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBjcmVhdGVfc3Vic3RlcHBlcnModGhpcy5kaW0sIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSwgdGhpcy5sb2dfcG9zdCxcbiAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUsIHRoaXMuYmF0Y2hfc2l6ZSwgdGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24sXG4gICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7XG4gICAgXG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLlxuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtyZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7c3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtzdWJzdGVwcGVyLnN0b3BfYWRhcHRhdGlvbigpOyB9KTtcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtcbiAgICAgIHJldHVybiBzdWJzdGVwcGVyLmluZm8oKTsgXG4gICAgfSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgUmVhbE1ldHJvcG9saXNTdGVwcGVyKTtcbiAgfTtcbiAgXG4gIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqLyAgICBcbiAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgSW50TWV0cm9wb2xpc1N0ZXBwZXIpO1xuICB9O1xuICBcbiAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGEgc3RlcCBmb3IgYSBiaW5hcnkgcGFyYW1ldGVyLlxuICAgKiBUaGlzIGlzIGRvbmUgYnkgZXZhbHVhdGluZyB0aGUgbG9nIHBvc3RlcmlvciBmb3IgYm90aCBzdGF0ZXMgb2YgdGhlXG4gICAqIHBhcmFtZXRlciBhbmQgdGhlbiBzZWxlY3RpbmcgYSBzdGF0ZSByYW5kb21seSB3aXRoIHByb2JhYmlsaXR5IHJlbGF0aXZlIFxuICAgKiB0byB0aGUgcG9zdGVyaW9yIG9mIGVhY2ggc3RhdGUuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEJpbmFyeVN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgPT0gMSkge1xuICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiQmluYXJ5U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICB9O1xuICBcbiAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5U3RlcHBlcjtcbiAgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwO1xuICAgIHZhciB6ZXJvX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDE7XG4gICAgdmFyIG9uZV9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICB2YXIgbWF4X2xvZ19kZW5zID0gTWF0aC5tYXgoemVyb19sb2dfZGVucywgb25lX2xvZ19kZW5zKTtcbiAgICB6ZXJvX2xvZ19kZW5zIC09IG1heF9sb2dfZGVucztcbiAgICBvbmVfbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zO1xuICAgIHZhciB6ZXJvX3Byb2IgPSBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zIC0gTWF0aC5sb2coIE1hdGguZXhwKHplcm9fbG9nX2RlbnMpICsgTWF0aC5leHAob25lX2xvZ19kZW5zKSApICk7XG4gICAgaWYoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikge1xuICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC5cbiAgICByZXR1cm4gMTtcbiAgfTtcbiAgXG4gICAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogSnVzdCBsaWtlIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgdGhpcyBTdGVwcGVyIHRha2VzIGEgc3RlcHMgZm9yXG4gICAqIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgYnkgdXBkYXRpbmcgZWFjaCBjb21wb25lbnQgaW4gdHVybi4gVGhlIGRpZmZlcmVuY2VcbiAgICogaXMgdGhhdCB0aGlzIHN0ZXBwZXIgd29ya3Mgb24gYmluYXJ5IHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSBcbiAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgXG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgPT0gMSkge1xuICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdO1xuICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIFxuICAgIHZhciBjcmVhdGVfc3Vic3RlcHBlcnMgPSBcbiAgICAgIGZ1bmN0aW9uKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0KSB7XG4gICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTtcbiAgICAgIHZhciBpO1xuICAgICAgaWYoZGltLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTtcbiAgICAgICAgICBzdWJwYXJhbXNbaV0gPSBwYXJhbTtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBCaW5hcnlTdGVwcGVyKHN1YnBhcmFtcywgc3Vic3RhdGUsIGxvZ19wb3N0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdGVwcGVycztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBjcmVhdGVfc3Vic3RlcHBlcnModGhpcy5kaW0sIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSwgdGhpcy5sb2dfcG9zdCk7XG4gIH07XG4gIFxuICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyO1xuICBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLlxuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtyZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7IH0pO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogVGhpcyBzdGVwcGVyIGNhbiBiZSByZXNwb25zaWJsZSBmb3IgdGFraW5nIGEgc3RlcCBmb3Igb25lIG9yIG1vcmUgcGFyYW1ldGVycy5cbiAgICogRm9yIHJlYWwgYW5kIGludCBwYXJhbWV0ZXJzIGl0IHRha2VzIE1ldHJvcG9saXMgd2l0aGluIEdpYmJzIHN0ZXBzLCBhbmQgZm9yIFxuICAgKiBiaW5hcnkgcGFyYW1ldGVycyBpdCBkb2VzIGV2YWx1YXRlcyB0aGUgcG9zdGVyaW9yIGZvciBib3RoIHBhcmFtdGVyIHZhbHVlcyBhbmRcbiAgICogcmFuZG9tbHkgY2hhbmdlcyB0byBhIGNlcnRhaW4gdmFsdWUgcHJvcG9ydGlvbmFsbHkgdG8gdGhhdCB2YWx1ZSdzIHBvc3RlcmlvclxuICAgKiAodGhpcyBpcyBhbHNvIGRvbmUgZm9yIGVhY2ggcGFyYW1ldGVyLCBzbyBhbHNvIGEgKiB3aXRoaW4gR2liYnMgYXBwcm9hY2gpLlxuICAgKiBUaGlzIHN0ZXBwZXIgaXMgYWxzbyBhZGFwdGl2ZSBhbmQgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVyc1xuICAgKiBhcmUgbm90IHRvbyBoaWdoIGFuZCB0aGUgY29ycmVsYXRpb25zIGJldHdlZW4gcGFyYW1ldGVycyBhcmUgbG93LlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnNcbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEFtd2dTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgdGhpcy5zdWJzdGVwcGVycyA9IFtdO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV07XG4gICAgICB2YXIgU2VsZWN0U3RlcHBlcjtcbiAgICAgIHN3aXRjaCAocGFyYW0udHlwZSkge1xuICAgICAgICBjYXNlIFwicmVhbFwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImludFwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEludE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJiaW5hcnlcIjpcbiAgICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgXCJBbXdnU3RlcHBlciBjYW4ndCBoYW5kbGUgcGFyYW1ldGVyIFwiICsgdGhpcy5wYXJhbV9uYW1lc1tpXSAgK1wiIHdpdGggdHlwZSBcIiArIHBhcmFtLnR5cGU7IFxuICAgICAgfVxuICAgICAgdmFyIHBhcmFtX29iamVjdF93cmFwID0ge307XG4gICAgICBwYXJhbV9vYmplY3Rfd3JhcFt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHBhcmFtO1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB2YXIgcGFyYW1fb3B0aW9ucyA9IG9wdGlvbnMucGFyYW1zICYmIG9wdGlvbnMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dIHx8IHt9O1xuICAgICAgcGFyYW1fb3B0aW9ucy5wcm9wX2xvZ19zY2FsZSAgICAgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlICAgICB8fCBvcHRpb25zLnByb3BfbG9nX3NjYWxlOyBcbiAgICAgIHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSAgICAgICAgID0gcGFyYW1fb3B0aW9ucy5iYXRjaF9zaXplICAgICAgICAgfHwgb3B0aW9ucy5iYXRjaF9zaXplOyBcbiAgICAgIHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gICAgID0gcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiAgICAgfHwgb3B0aW9ucy5tYXhfYWRhcHRhdGlvbjtcbiAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247XG4gICAgICBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSA9IHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlIHx8IG9wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlOyBcbiAgICAgIHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgICAgICAgID0gcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyAgICAgICAgfHwgb3B0aW9ucy5pc19hZGFwdGluZzsgXG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldID0gbmV3IFNlbGVjdFN0ZXBwZXIocGFyYW1fb2JqZWN0X3dyYXAsIHN0YXRlLCBsb2dfcG9zdCwgcGFyYW1fb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU3RlcHBlcjtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGVwKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpO1xuICAgIH0gXG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmZvID0ge307XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGluZm9bdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnN1YnN0ZXBwZXJzW2ldLmluZm8oKTtcbiAgICB9XG4gICAgcmV0dXJuIGluZm87XG4gIH07XG4gIFxuICBcbiAgXG4gIC8vLy8vLy8vLy8vIFNhbXBsZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgXG4gICAvKipcbiAgICogQGludGVyZmFjZVxuICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYVxuICAvLyBTYW1wbGVyIGlzIGhlcmUgaXMgYSBjb252ZW5pZW5jZSBjbGFzcyB3aGVyZSBhbiBpbnN0YW5jZSBvZiBTYW1wbGVyXG4gIC8vIHNldHMgdXAgdGhlIFN0ZXBwZXJzLCBjaGVja3MgdGhlIHBhcmFtZXRlciBkZWZpbml0aW9uLFxuICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyIFwiaW50ZXJmYWNlXCIuXG4gICAqIEBpbnRlcmZhY2VcbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6XG4gICAqICAge1wibXVcIjoge1widHlwZVwiOiBcInJlYWxcIn0sIFwic2lnbWFcIjoge1widHlwZVwiOiBcInJlYWxcIiwgXCJsb3dlclwiID0gMH19XG4gICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgXCJjb21wbGV0ZVwiIGFuZCBwcm9wZXJ0aWVzXG4gICAqICAgbGVmdCBvdXQgKGxpa2UgbG93ZXIgYW5kIHVwcGVyKSB3aWxsIGJlIGZpbGxlZCBpbiBieSBkZWZhdWx0cy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmVcbiAgICogICBzdGF0ZSB3aWxsIGJlIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXRlIHdpdGggZWFjaCBwYXJhbWV0ZXIgYXMgYSBcbiAgICogICBrZXkgYW5kIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGFzIG51bWJlcnMgb3IgYXJyYXlzLiBGb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiAzLCBcInNpZ21hXCI6IDEuNX0uIFRoZSBkYXRhIGFyZ3VtZW50IHdpbGwgYmUgdGhlIHNhbWUgb2JqZWN0IGFzIFxuICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LlxuICAgKiBAcGFyYW0gZGF0YSAtIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBsb2dfcG9zdCBmdW5jdGlvblxuICAgKiAgIHdoZW4gc2FtcGxpbmcuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci5cbiAgICovXG4gIHZhciBTYW1wbGVyID0gZnVuY3Rpb24ocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykge1xuICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBcbiAgICAvLyBTZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyBpZiBub3QgcGFzc2VkIHRocm91Z2ggdGhlIG9wdGlvbnMgb2JqZWN0XG4gICAgdGhpcy5wYXJhbV9pbml0X2Z1biAgID0gZ2V0X29wdGlvbihcInBhcmFtX2luaXRfZnVuXCIsIG9wdGlvbnMsIHBhcmFtX2luaXRfZml4ZWQpO1xuICAgIHZhciB0aGlubmluZ19pbnRlcnZhbCA9IGdldF9vcHRpb24oXCJ0aGluXCIsIG9wdGlvbnMsIDEpO1xuICAgIHZhciBwYXJhbXNfdG9fbW9uaXRvciA9IGdldF9vcHRpb24oXCJtb25pdG9yXCIsIG9wdGlvbnMsIG51bGwpO1xuICAgIHRoaXMudGhpbih0aGlubmluZ19pbnRlcnZhbCk7XG4gICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIENvbXBsZXRpbmcgdGhlIHBhcmFtcyBhbmQgaW5pdGlhbGl6aW5nIHRoZSBzdGF0ZS5cbiAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7XG4gICAgdmFyIHN0YXRlID0ge307XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7XG4gICAgfVxuICAgIHRoaXMubG9nX3Bvc3QgPSBmdW5jdGlvbigpIHsgXG4gICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpO1xuICAgIH07XG4gICAgLy8gUnVubmluZyB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24gb25jZSBpbiBjYXNlIGl0IGZ1cnRoZXIgbW9kaWZpZXMgdGhlIHN0YXRlXG4gICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy5cbiAgICB0aGlzLmxvZ19wb3N0KCk7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpO1xuICB9O1xuICBcbiAgLyoqIFNob3VsZCByZXR1cm4gYSB2ZWN0b3Igb2Ygc3RlcHBlcnMgdGhhdCB3aGVuIGNhbGxlZCBcbiAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuXG4gICAqL1xuICBTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uKHN0YXRlLCBsb2dfcG9zdCl7XG4gICAgdGhyb3cgXCJFdmVyeSBTYW1wbGVyIG5lZWRzIHRvIGltcGxlbWVudCBjcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSgpXCI7XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgU2FtcGxlci5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtzdGF0ZTogdGhpcy5zdGF0ZSwgdGhpbjogdGhpcy50aGluLCBtb25pdG9yOiB0aGlzLm1vbml0b3IsXG4gICAgICAgICAgICBzdGVwcGVyczogdGhpcy5zdGVwcGVyc307XG4gIH07XG4gIFxuICAvKiogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFJldHVybnMgdGhlIG5ldyBzcGFjZVxuICAgKiBidXQgYWxzbyBtb2RpZmllcyB0aGUgc3RhdGUgaW4gcGxhY2UuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdGVwcGVycyk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RlcCgpO1xuICAgIH1cbiAgICBpZihPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5sZW5ndGggPiBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcykubGVuZ3RoKSB7XG4gICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2VcbiAgICAgIC8vIG5lZWQgdG8gcnVuIHRoZSBsb2dfcG9zdCBvbmNlIG1vcmUgaW4gb3JkZXIgdG8gc2V0IHRoZSBkZXJpdmVkIHF1YW50aXRpZXNcbiAgICAgIC8vIGZvciB0aGUgZmluYWwgcGFyYW1ldGVyIHN0YXRlXG4gICAgICB0aGlzLmxvZ19wb3N0KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIG5faXRlcmF0aW9ucyBzdGVwcyBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlIGFuZCByZXR1cm5zIHRoZW1cbiAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZTpcbiAgICoge211OiBbMSwgLTEsIDIsIDMsIC4uLl0sIHNpZ21hOiBbMSwgMiwgMiwgMSwgLi4uXX0uXG4gICAqIElmIHRoaW4gaXMgPiAxIHRoZW4gbl9pdGVyYXRpb25zIC8gdGhpbiBzYW1wbGVzIGFyZSByZXR1cm5lZC5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbihuX2l0ZXJhdGlvbnMpIHtcbiAgICAgIC8vIEluaXRpYWxpemluZyBjdXJyX3NhbXBsZSB3aGVyZSB0aGUgc2FtcGxlIGlzIGdvaW5nIHRvIGJlIHNhdmVkXG4gICAgICAvLyBhcyBhbiBvYmplY3QgY29udGFpbmluZyBvbmUgYXJyYXkgcGVyIHBhcmFtZXRlciB0byBiZSBtb25pdG9yZWQuXG4gICAgICB2YXIgaSwgaiwgbW9uaXRvcmVkX3BhcmFtcztcbiAgICAgIGlmKHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9PT0gbnVsbCkge1xuICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gdGhpcy5tb25pdG9yZWRfcGFyYW1zO1xuICAgICAgfVxuICAgICAgXG4gICAgICB2YXIgY3Vycl9zYW1wbGUgPSB7fTtcbiAgICAgIGZvcihqID0gMDsgaiA8IG1vbml0b3JlZF9wYXJhbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY3Vycl9zYW1wbGVbbW9uaXRvcmVkX3BhcmFtc1tqXV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZm9yKGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgaWYoaSAlIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPT09IDApIHtcbiAgICAgICAgICBmb3IoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBtb25pdG9yZWRfcGFyYW1zW2pdO1xuICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goIGNsb25lX3BhcmFtX2RyYXcodGhpcy5zdGF0ZVtwYXJhbV0pICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RlcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJfc2FtcGxlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIG5faXRlcmF0aW9uIHN0ZXBzIGluIHBhcmFtZXRlciBzcGFjZSBidXQgcmV0dXJucyBub3RoaW5nLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLmJ1cm4gPSBmdW5jdGlvbihuX2l0ZXJhdGlvbnMpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcCgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZXRzIHdoYXQgcGFyYW1ldGVycyBzaG91bGQgYmUgbW9uaXRvcmVkIGFuZCByZXR1cm5lZCB3aGVuIGNhbGxpbmdcbiAgICogc2FtcGxlLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbihwYXJhbXNfdG9fbW9uaXRvcikge1xuICAgICAgdGhpcy5tb25pdG9yZWRfcGFyYW1zID0gcGFyYW1zX3RvX21vbml0b3I7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyB0aGUgdGhpbm5pbmcuIEZvciBleGFtcGxlIHRoaW4gPT0gMTAgbWVhbnMgdGhhdCBldmVyeSAxMHRoIHBvc3RlcmlvclxuICAgKiBkcmF3IHdpbGwgYmUga2VwdC5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS50aGluID0gZnVuY3Rpb24odGhpbm5pbmdfaW50ZXJ2YWwpIHtcbiAgICB0aGlzLnRoaW5uaW5nX2ludGVydmFsID0gdGhpbm5pbmdfaW50ZXJ2YWw7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyBhZGFwdGF0aW9uIG9uLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBTZXRzIGFkYXB0YXRpb24gb2ZmLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1NhbXBsZXJ9XG4gICAqIFRoaXMgc2FtcGxlciB1c2VzIHRoZSBBbXdnU3RlcHBlciBhcyB0aGUgc3RlcHBlciBmdW5jdGlvbiB3aGljaCBpbXBsZW1lbnRzIHRoZSBcbiAgICogQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluIFwiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQ1wiXG4gICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkuIEFuIGFkaXRpb24gaXMgdGhhdCBpdCBoYW5kbGVzIGludCBwYXJhbWV0ZXJzXG4gICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgXG4gICAqIHZhbHVlIHByb3BvcnRpb25hbCB0byB0aGUgcG9zdGVyaW9yIG9mIHRoZSB0d28gcG9zc2libGUgc3RhdGVzIG9mIHRoZVxuICAgKiBwYXJhbWV0ZXIuIFRoaXMgc2FtcGxlciBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzXG4gICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIG9uZSBvciBtb3JlIHBhcmFtZXRlciBkZWZpbml0aW9uc1xuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQW13Z1NhbXBsZXIgPSBmdW5jdGlvbihwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7XG4gICAgU2FtcGxlci5jYWxsKHRoaXMsIHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpO1xuICB9O1xuICBcbiAgQW13Z1NhbXBsZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTYW1wbGVyLnByb3RvdHlwZSk7IFxuICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjtcbiAgXG4gIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKXtcbiAgICByZXR1cm4gWyBuZXcgQW13Z1N0ZXBwZXIocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIF07XG4gIH07XG4gIFxuICBcbiAgLy8gUmV0dXJuaW5nIHRoZSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgcHVibGljbHkgZXhwb3NlZCBieSB0aGlzIG1vZHVsZVxuICByZXR1cm4ge1xuICAgIHJ1bmlmOiBydW5pZixcbiAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsXG4gICAgcm5vcm06IHJub3JtLFxuICAgIHBhcmFtX2luaXRfZml4ZWQ6IHBhcmFtX2luaXRfZml4ZWQsIFxuICAgIGNvbXBsZXRlX3BhcmFtczogY29tcGxldGVfcGFyYW1zLCBcbiAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgSW50TWV0cm9wb2xpc1N0ZXBwZXI6IEludE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjogTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIEJpbmFyeVN0ZXBwZXI6IEJpbmFyeVN0ZXBwZXIsIFxuICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI6IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIsIFxuICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwgXG4gICAgQW13Z1NhbXBsZXI6IEFtd2dTYW1wbGVyXG4gIH07XG59KSk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA9PSBudWxsIHx8IGIgPT0gbnVsbCA/IE5hTiA6IGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbnVtYmVyKHgpIHtcbiAgcmV0dXJuIHggPT09IG51bGwgPyBOYU4gOiAreDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBudW1iZXJzKHZhbHVlcywgdmFsdWVvZikge1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmICh2YWx1ZSA9ICt2YWx1ZSkgPj0gdmFsdWUpIHtcbiAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgYXNjZW5kaW5nIGZyb20gXCIuL2FzY2VuZGluZy5qc1wiO1xuaW1wb3J0IHBlcm11dGUgZnJvbSBcIi4vcGVybXV0ZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzb3J0KHZhbHVlcywgLi4uRikge1xuICBpZiAodHlwZW9mIHZhbHVlc1tTeW1ib2wuaXRlcmF0b3JdICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWx1ZXMgaXMgbm90IGl0ZXJhYmxlXCIpO1xuICB2YWx1ZXMgPSBBcnJheS5mcm9tKHZhbHVlcyk7XG4gIGxldCBbZl0gPSBGO1xuICBpZiAoKGYgJiYgZi5sZW5ndGggIT09IDIpIHx8IEYubGVuZ3RoID4gMSkge1xuICAgIGNvbnN0IGluZGV4ID0gVWludDMyQXJyYXkuZnJvbSh2YWx1ZXMsIChkLCBpKSA9PiBpKTtcbiAgICBpZiAoRi5sZW5ndGggPiAxKSB7XG4gICAgICBGID0gRi5tYXAoZiA9PiB2YWx1ZXMubWFwKGYpKTtcbiAgICAgIGluZGV4LnNvcnQoKGksIGopID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIEYpIHtcbiAgICAgICAgICBjb25zdCBjID0gYXNjZW5kaW5nRGVmaW5lZChmW2ldLCBmW2pdKTtcbiAgICAgICAgICBpZiAoYykgcmV0dXJuIGM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmID0gdmFsdWVzLm1hcChmKTtcbiAgICAgIGluZGV4LnNvcnQoKGksIGopID0+IGFzY2VuZGluZ0RlZmluZWQoZltpXSwgZltqXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcGVybXV0ZSh2YWx1ZXMsIGluZGV4KTtcbiAgfVxuICByZXR1cm4gdmFsdWVzLnNvcnQoY29tcGFyZURlZmluZWQoZikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZURlZmluZWQoY29tcGFyZSA9IGFzY2VuZGluZykge1xuICBpZiAoY29tcGFyZSA9PT0gYXNjZW5kaW5nKSByZXR1cm4gYXNjZW5kaW5nRGVmaW5lZDtcbiAgaWYgKHR5cGVvZiBjb21wYXJlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjb21wYXJlIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICByZXR1cm4gKGEsIGIpID0+IHtcbiAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTtcbiAgICBpZiAoeCB8fCB4ID09PSAwKSByZXR1cm4geDtcbiAgICByZXR1cm4gKGNvbXBhcmUoYiwgYikgPT09IDApIC0gKGNvbXBhcmUoYSwgYSkgPT09IDApO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNjZW5kaW5nRGVmaW5lZChhLCBiKSB7XG4gIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1heCh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1heDtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbFxuICAgICAgICAgICYmIChtYXggPCB2YWx1ZSB8fCAobWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbFxuICAgICAgICAgICYmIChtYXggPCB2YWx1ZSB8fCAobWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pbih2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1pbjtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbFxuICAgICAgICAgICYmIChtaW4gPiB2YWx1ZSB8fCAobWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbFxuICAgICAgICAgICYmIChtaW4gPiB2YWx1ZSB8fCAobWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1pbjtcbn1cbiIsImltcG9ydCB7YXNjZW5kaW5nRGVmaW5lZCwgY29tcGFyZURlZmluZWR9IGZyb20gXCIuL3NvcnQuanNcIjtcblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvcXVpY2tzZWxlY3Rcbi8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBxdWlja3NlbGVjdChhcnJheSwgaywgbGVmdCA9IDAsIHJpZ2h0ID0gYXJyYXkubGVuZ3RoIC0gMSwgY29tcGFyZSkge1xuICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpO1xuXG4gIHdoaWxlIChyaWdodCA+IGxlZnQpIHtcbiAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7XG4gICAgICBjb25zdCBuID0gcmlnaHQgLSBsZWZ0ICsgMTtcbiAgICAgIGNvbnN0IG0gPSBrIC0gbGVmdCArIDE7XG4gICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7XG4gICAgICBjb25zdCBzID0gMC41ICogTWF0aC5leHAoMiAqIHogLyAzKTtcbiAgICAgIGNvbnN0IHNkID0gMC41ICogTWF0aC5zcXJ0KHogKiBzICogKG4gLSBzKSAvIG4pICogKG0gLSBuIC8gMiA8IDAgPyAtMSA6IDEpO1xuICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7XG4gICAgICBjb25zdCBuZXdSaWdodCA9IE1hdGgubWluKHJpZ2h0LCBNYXRoLmZsb29yKGsgKyAobiAtIG0pICogcyAvIG4gKyBzZCkpO1xuICAgICAgcXVpY2tzZWxlY3QoYXJyYXksIGssIG5ld0xlZnQsIG5ld1JpZ2h0LCBjb21wYXJlKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ID0gYXJyYXlba107XG4gICAgbGV0IGkgPSBsZWZ0O1xuICAgIGxldCBqID0gcmlnaHQ7XG5cbiAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTtcbiAgICBpZiAoY29tcGFyZShhcnJheVtyaWdodF0sIHQpID4gMCkgc3dhcChhcnJheSwgbGVmdCwgcmlnaHQpO1xuXG4gICAgd2hpbGUgKGkgPCBqKSB7XG4gICAgICBzd2FwKGFycmF5LCBpLCBqKSwgKytpLCAtLWo7XG4gICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtpXSwgdCkgPCAwKSArK2k7XG4gICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtqXSwgdCkgPiAwKSAtLWo7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtcbiAgICBlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpO1xuXG4gICAgaWYgKGogPD0gaykgbGVmdCA9IGogKyAxO1xuICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG5mdW5jdGlvbiBzd2FwKGFycmF5LCBpLCBqKSB7XG4gIGNvbnN0IHQgPSBhcnJheVtpXTtcbiAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgYXJyYXlbal0gPSB0O1xufVxuIiwiaW1wb3J0IG1heCBmcm9tIFwiLi9tYXguanNcIjtcbmltcG9ydCBtaW4gZnJvbSBcIi4vbWluLmpzXCI7XG5pbXBvcnQgcXVpY2tzZWxlY3QgZnJvbSBcIi4vcXVpY2tzZWxlY3QuanNcIjtcbmltcG9ydCBudW1iZXIsIHtudW1iZXJzfSBmcm9tIFwiLi9udW1iZXIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcXVhbnRpbGUodmFsdWVzLCBwLCB2YWx1ZW9mKSB7XG4gIHZhbHVlcyA9IEZsb2F0NjRBcnJheS5mcm9tKG51bWJlcnModmFsdWVzLCB2YWx1ZW9mKSk7XG4gIGlmICghKG4gPSB2YWx1ZXMubGVuZ3RoKSkgcmV0dXJuO1xuICBpZiAoKHAgPSArcCkgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gbWF4KHZhbHVlcyk7XG4gIHZhciBuLFxuICAgICAgaSA9IChuIC0gMSkgKiBwLFxuICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLFxuICAgICAgdmFsdWUwID0gbWF4KHF1aWNrc2VsZWN0KHZhbHVlcywgaTApLnN1YmFycmF5KDAsIGkwICsgMSkpLFxuICAgICAgdmFsdWUxID0gbWluKHZhbHVlcy5zdWJhcnJheShpMCArIDEpKTtcbiAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGlsZVNvcnRlZCh2YWx1ZXMsIHAsIHZhbHVlb2YgPSBudW1iZXIpIHtcbiAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpKSByZXR1cm47XG4gIGlmICgocCA9ICtwKSA8PSAwIHx8IG4gPCAyKSByZXR1cm4gK3ZhbHVlb2YodmFsdWVzWzBdLCAwLCB2YWx1ZXMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gK3ZhbHVlb2YodmFsdWVzW24gLSAxXSwgbiAtIDEsIHZhbHVlcyk7XG4gIHZhciBuLFxuICAgICAgaSA9IChuIC0gMSkgKiBwLFxuICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLFxuICAgICAgdmFsdWUwID0gK3ZhbHVlb2YodmFsdWVzW2kwXSwgaTAsIHZhbHVlcyksXG4gICAgICB2YWx1ZTEgPSArdmFsdWVvZih2YWx1ZXNbaTAgKyAxXSwgaTAgKyAxLCB2YWx1ZXMpO1xuICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTtcbn1cbiIsImltcG9ydCBxdWFudGlsZSBmcm9tIFwiLi9xdWFudGlsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZWRpYW4odmFsdWVzLCB2YWx1ZW9mKSB7XG4gIHJldHVybiBxdWFudGlsZSh2YWx1ZXMsIDAuNSwgdmFsdWVvZik7XG59XG4iLCJcbi8vIGltcG9ydCAqIGFzIGpTdGF0IGZyb20gJ2pzdGF0JztcblxuLypcbiAgQ1BUTWF0aCBTdGF0aWMgQ2xhc3MgLSBOb3QgaW50ZW5kZWQgZm9yIGluc3RhbnRpYXRpb24hXG5cbiAgVmFyaWFibGVzOlxuICAgIHggPSBvYmplY3RpdmUgdmFsdWVcbiAgICB2ID0gc3ViamVjdGl2ZSB2YWx1ZS91dGlsaXR5XG4gICAgcCA9IG9iamVjdGl2ZSBwcm9iYWJpbGl0eVxuICAgIHcgPSBzdWJqZWN0aXZlIHByb2JhYmlsaXR5L2RlY2lzaW9uIHdlaWdodFxuICAgIFYgPSBleHBlY3RlZCB2YWx1ZS91dGlsaXR5XG5cbiAgICBhID0gYWxwaGEgKGN1cnZhdHVyZSBmb3IgdmFsdWUgZnVuY3Rpb24pXG4gICAgbCA9IGxhbWJkYSAobG9zcyBhdmVyc2lvbiBmb3IgdmFsdWUgZnVuY3Rpb24pXG4gICAgZyA9IGdhbW1hIChzZW5zaXRpdml0eSBmb3IgZGVjaXNpb24gd2VpZ2h0aW5nIGZ1bmN0aW9uKVxuXG4gIEVxdWF0aW9uczpcbiAgICB2ID0geF5hLCBpZiB4ID49IDA7IC1sICogLXheYSwgaWYgeCA8IDBcbiAgICB3ID0gcF5nIC8gKHBeZyArICgxIC0gcCleZyleKDEgLyBnKVxuICAgIFYgPSB2ICogd1xuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENQVE1hdGgge1xuICBzdGF0aWMgeGFsMnYoeCwgYSwgbCkge1xuICAgIGlmICh4ID49IDApIHtcbiAgICAgIHJldHVybiB4ICoqIGE7XG4gICAgfVxuICAgIC8vIGVsc2UgKHggPCAwKVxuICAgIHJldHVybiAtbCAqICgoLXgpICoqIGEpO1xuICB9XG5cbiAgc3RhdGljIHhsdjJhKHgsIGwsIHYpIHtcbiAgICBpZiAoeCA+PSAwKSB7XG4gICAgICByZXR1cm4gTWF0aC5sb2codikgLyBNYXRoLmxvZyh4KTtcbiAgICB9XG4gICAgLy8gZWxzZSAoeCA8IDApXG4gICAgcmV0dXJuIChNYXRoLmxvZygtdikgLSBNYXRoLmxvZyhsKSkgLyBNYXRoLmxvZygteCk7XG4gIH1cblxuICBzdGF0aWMgeGF2MmwoeCwgYSwgdikge1xuICAgIGlmICh4ID49IDApIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICAvLyBlbHNlICh4IDwgMClcbiAgICByZXR1cm4gLXYgLyAoKC14KSAqKiBhKTtcbiAgfVxuXG4gIHN0YXRpYyBwZzJ3KHAsIGcpIHtcbiAgICByZXR1cm4gKHAgKiogZykgLyAoKChwICoqIGcpICsgKCgxIC0gcCkgKiogZykpICoqICgxIC8gZykpO1xuICB9XG59XG4iLCJcbi8vIEludGVybmFsIGRlcGVuZGVuY2llc1xuaW1wb3J0IENQVE1hdGggZnJvbSAnLi9jcHQtbWF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IENQVE1hdGg7XG4iLCIvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbXCJvZmZcIiwgXCJzZWxmXCJdICovXG5cbi8vIE5lZWRlZCBmb3IgZDMgaW4gV2ViV29ya2VyIVxuaW1wb3J0ICdyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUnO1xuXG5pbXBvcnQgKiBhcyBCYXllc0Rpc3RyaWJ1dGlvbnMgZnJvbSAnYmF5ZXMuanMvZGlzdHJpYnV0aW9ucyc7XG5pbXBvcnQgKiBhcyBCYXllc01jbWMgZnJvbSAnYmF5ZXMuanMvbWNtYyc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgQ1BUTWF0aCBmcm9tICdAZGVjaWRhYmxlcy9wcm9zcGVjdGFibGUtbWF0aCc7XG5cbnNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBhbHBoYToge3R5cGU6ICdyZWFsJywgbG93ZXI6IDAsIHVwcGVyOiAxfSxcbiAgICBsYW1iZGE6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiAwLCB1cHBlcjogMTB9LFxuICAgIGdhbW1hOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogMCwgdXBwZXI6IDF9LFxuICAgIGx1Y2U6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiAwLCB1cHBlcjogMTAwfSxcbiAgfTtcblxuICBjb25zdCBsb2dQb3N0ID0gKHN0YXRlLCBkYXRhKSA9PiB7XG4gICAgbGV0IGxwID0gMDtcblxuICAgIC8vIFByaW9yc1xuICAgIGNvbnN0IGFscGhhTWVhbiA9IDAuNTtcbiAgICBjb25zdCBhbHBoYVNhbXBsZVNpemUgPSAyLjU7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmJldGEoXG4gICAgICBzdGF0ZS5hbHBoYSxcbiAgICAgIGFscGhhTWVhbiAqIGFscGhhU2FtcGxlU2l6ZSxcbiAgICAgICgxIC0gYWxwaGFNZWFuKSAqIGFscGhhU2FtcGxlU2l6ZSxcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmFscGhhLCAwLCAxKTtcblxuICAgIGNvbnN0IGxhbWJkYU1lYW4gPSAyO1xuICAgIGNvbnN0IGxhbWJkYVNoYXBlID0gMztcbiAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuZ2FtbWEoXG4gICAgICBzdGF0ZS5sYW1iZGEsXG4gICAgICBsYW1iZGFTaGFwZSxcbiAgICAgIGxhbWJkYVNoYXBlIC8gbGFtYmRhTWVhbixcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmxhbWJkYSwgMCwgMTApO1xuXG4gICAgY29uc3QgZ2FtbWFNZWFuID0gMC41O1xuICAgIGNvbnN0IGdhbW1hU2FtcGxlU2l6ZSA9IDIuNTtcbiAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuYmV0YShcbiAgICAgIHN0YXRlLmdhbW1hLFxuICAgICAgZ2FtbWFNZWFuICogZ2FtbWFTYW1wbGVTaXplLFxuICAgICAgKDEgLSBnYW1tYU1lYW4pICogZ2FtbWFTYW1wbGVTaXplLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuZ2FtbWEsIDAsIDEpO1xuXG4gICAgY29uc3QgbHVjZU1lYW4gPSAyO1xuICAgIGNvbnN0IGx1Y2VTaGFwZSA9IDM7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmdhbW1hKFxuICAgICAgc3RhdGUubHVjZSxcbiAgICAgIGx1Y2VTaGFwZSxcbiAgICAgIGx1Y2VTaGFwZSAvIGx1Y2VNZWFuLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubHVjZSwgMCwgMTAwKTtcblxuICAgIC8vIExpa2VsaWhvb2RcbiAgICBkYXRhLmZvckVhY2goKGNob2ljZSkgPT4ge1xuICAgICAgLy8gVmFsdWVzXG4gICAgICBjb25zdCB2bCA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnhsLCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTtcbiAgICAgIGNvbnN0IHZ3ID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHcsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpO1xuICAgICAgY29uc3QgdnMgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54cywgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7XG5cbiAgICAgIC8vIFByb2JhYmlsaXRpZXNcbiAgICAgIGNvbnN0IHd3ID0gQ1BUTWF0aC5wZzJ3KGNob2ljZS5wdywgc3RhdGUuZ2FtbWEpO1xuICAgICAgY29uc3Qgd2wgPSAxIC0gd3c7XG5cbiAgICAgIC8vIFV0aWxpdGllc1xuICAgICAgY29uc3QgdWcgPSB3bCAqIHZsICsgd3cgKiB2dztcbiAgICAgIGNvbnN0IHVzID0gdnM7XG5cbiAgICAgIC8vIENob2ljZSBvZiBnYW1ibGUgb3Igc3VyZSBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uXG4gICAgICAvLyBMdWNlIGNob2ljZSBydWxlIGlzIHVzZWQgdG8gY29tcHV0ZSBwcm9iYWJpbGl0eSBvZiBnYW1ibGluZyEgKDAgPSBzdXJlLCAxID0gZ2FtYmxlKVxuICAgICAgY29uc3QgYmludmFsID0gMSAvICgxICsgTWF0aC5leHAoc3RhdGUubHVjZSAqICh1cyAtIHVnKSkpO1xuXG4gICAgICAvLyBBY3R1YWwgcmVzcG9uc2VcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gKGNob2ljZS5yZXNwb25zZSA9PT0gJ3N1cmUnKSA/IDAgOiAxO1xuXG4gICAgICBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMuYmVybihyZXNwb25zZSwgYmludmFsKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBscDtcbiAgfTtcblxuICAvLyBJbml0aWFsaXppbmcgdGhlIHNhbXBsZXJcbiAgY29uc3Qgc2FtcGxlciA9IG5ldyBCYXllc01jbWMuQW13Z1NhbXBsZXIocGFyYW1zLCBsb2dQb3N0LCBldmVudC5kYXRhKTtcbiAgLy8gQnVybmluZyBzb21lIHNhbXBsZXMgdG8gdGhlIE1DTUMgZ29kcyBhbmQgc2FtcGxpbmcgNTAwMCBkcmF3c1xuICBzYW1wbGVyLmJ1cm4oMTAwMCk7XG4gIGNvbnN0IHNhbXBsZXMgPSBzYW1wbGVyLnNhbXBsZSg1MDAwKTtcblxuICAvLyBFeHRyYWN0IHN1bW1hcnkgc3RhdHNcbiAgY29uc3QgcmVzdWx0cyA9IHtcbiAgICBhbHBoYTogZDMubWVkaWFuKHNhbXBsZXMuYWxwaGEpLFxuICAgIGxhbWJkYTogZDMubWVkaWFuKHNhbXBsZXMubGFtYmRhKSxcbiAgICBnYW1tYTogZDMubWVkaWFuKHNhbXBsZXMuZ2FtbWEpLFxuICAgIGx1Y2U6IGQzLm1lZGlhbihzYW1wbGVzLmx1Y2UpLFxuICB9O1xuXG4gIHNlbGYucG9zdE1lc3NhZ2Uoe3Jlc3VsdHM6IHJlc3VsdHMsIHNhbXBsZXM6IHNhbXBsZXN9KTtcbn07XG4iXSwibmFtZXMiOlsicnVudGltZSIsImV4cG9ydHMiLCJPcCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093biIsImhhc093blByb3BlcnR5IiwidW5kZWZpbmVkIiwiJFN5bWJvbCIsIlN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiaXRlcmF0b3IiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwidG9TdHJpbmdUYWciLCJkZWZpbmUiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZXJyIiwid3JhcCIsImlubmVyRm4iLCJvdXRlckZuIiwic2VsZiIsInRyeUxvY3NMaXN0IiwicHJvdG9HZW5lcmF0b3IiLCJHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJjcmVhdGUiLCJjb250ZXh0IiwiQ29udGV4dCIsIl9pbnZva2UiLCJtYWtlSW52b2tlTWV0aG9kIiwidHJ5Q2F0Y2giLCJmbiIsImFyZyIsInR5cGUiLCJjYWxsIiwiR2VuU3RhdGVTdXNwZW5kZWRTdGFydCIsIkdlblN0YXRlU3VzcGVuZGVkWWllbGQiLCJHZW5TdGF0ZUV4ZWN1dGluZyIsIkdlblN0YXRlQ29tcGxldGVkIiwiQ29udGludWVTZW50aW5lbCIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsInZhbHVlcyIsIkdwIiwiZGlzcGxheU5hbWUiLCJkZWZpbmVJdGVyYXRvck1ldGhvZHMiLCJmb3JFYWNoIiwibWV0aG9kIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsImdlbkZ1biIsImN0b3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJtYXJrIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJhd3JhcCIsIl9fYXdhaXQiLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJpbnZva2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVjb3JkIiwicmVzdWx0IiwidGhlbiIsInVud3JhcHBlZCIsImVycm9yIiwicHJldmlvdXNQcm9taXNlIiwiZW5xdWV1ZSIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwiYXN5bmMiLCJQcm9taXNlIiwiaXRlciIsIm5leHQiLCJkb25lIiwic3RhdGUiLCJFcnJvciIsImRvbmVSZXN1bHQiLCJkZWxlZ2F0ZSIsImRlbGVnYXRlUmVzdWx0IiwibWF5YmVJbnZva2VEZWxlZ2F0ZSIsInNlbnQiLCJfc2VudCIsImRpc3BhdGNoRXhjZXB0aW9uIiwiYWJydXB0IiwiVHlwZUVycm9yIiwiaW5mbyIsInJlc3VsdE5hbWUiLCJuZXh0TG9jIiwicHVzaFRyeUVudHJ5IiwibG9jcyIsImVudHJ5IiwidHJ5TG9jIiwiY2F0Y2hMb2MiLCJmaW5hbGx5TG9jIiwiYWZ0ZXJMb2MiLCJ0cnlFbnRyaWVzIiwicHVzaCIsInJlc2V0VHJ5RW50cnkiLCJjb21wbGV0aW9uIiwicmVzZXQiLCJrZXlzIiwib2JqZWN0IiwicmV2ZXJzZSIsImxlbmd0aCIsInBvcCIsIml0ZXJhYmxlIiwiaXRlcmF0b3JNZXRob2QiLCJpc05hTiIsImkiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsImNoYXJBdCIsInNsaWNlIiwic3RvcCIsInJvb3RFbnRyeSIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwibW9kdWxlIiwicmVnZW5lcmF0b3JSdW50aW1lIiwiYWNjaWRlbnRhbFN0cmljdE1vZGUiLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJyb290IiwiZmFjdG9yeSIsImxkIiwidGhpcyIsImxnYW1tYSIsIngiLCJqIiwiY29mIiwic2VyIiwieHgiLCJ5IiwidG1wIiwibG9nIiwibGZhY3RvcmlhbCIsIm4iLCJOYU4iLCJsY2hvb3NlIiwiayIsImxiZXRhIiwiYSIsImIiLCJNYXRoIiwiZXhwIiwiYWJzIiwicG93Iiwic3FydCIsInBpIiwiUEkiLCJiZXRhIiwic2hhcGUxIiwic2hhcGUyIiwiSW5maW5pdHkiLCJjYXVjaHkiLCJsb2NhdGlvbiIsInNjYWxlIiwibm9ybSIsIm1lYW4iLCJzZCIsImJpdmFybm9ybSIsImNvcnIiLCJ6Iiwibm9ybWFsaXppbmdfZmFjdG9yIiwiYml2YXJfbG9nX2RlbnMiLCJsYXBsYWNlIiwiZGV4cCIsImdhbW1hIiwic2hhcGUiLCJyYXRlIiwiaW52Z2FtbWEiLCJsbm9ybSIsIm1lYW5sb2ciLCJzZGxvZyIsInBhcmV0byIsInQiLCJkZiIsIndlaWJ1bGwiLCJ0bXAxIiwidG1wMiIsImxvZ2lzIiwiZSIsImYiLCJkaXJpY2hsZXQiLCJhbHBoYSIsInN1bV9hbHBoYSIsInN1bV9sZ2FtbWFfYWxwaGEiLCJzdW1fYWxwaGFfc3ViXzFfbG9nX3giLCJ1bmlmIiwibWluIiwibWF4IiwiYmVybiIsInByb2IiLCJjYXQiLCJwcm9icyIsImJpbm9tIiwic2l6ZSIsIm5iaW5vbSIsImh5cGVyIiwibSIsInBvaXMiLCJsYW1iZGEiLCJtY21jIiwicnVuaWYiLCJyYW5kb20iLCJydW5pZl9kaXNjcmV0ZSIsImZsb29yIiwicm5vcm0iLCJ1IiwidiIsInEiLCJkZWVwX2Nsb25lIiwic3JjIiwibWl4aW4iLCJkZXN0Iiwic291cmNlIiwiY29weUZ1bmMiLCJzIiwiZW1wdHkiLCJ0b1N0cmluZyIsIm5vZGVUeXBlIiwiY2xvbmVOb2RlIiwiRGF0ZSIsImdldFRpbWUiLCJSZWdFeHAiLCJyIiwibCIsIkFycmF5IiwiY2xvbmVfcGFyYW1fZHJhdyIsImlzQXJyYXkiLCJ4X2NvcHkiLCJpc19udW1iZXIiLCJOdW1iZXIiLCJjcmVhdGVfYXJyYXkiLCJkaW0iLCJpbml0IiwiYXJyIiwiYXJyYXlfZGltIiwiY29uY2F0IiwiYXJyYXlfZXF1YWwiLCJhMSIsImEyIiwibmVzdGVkX2FycmF5X2FwcGx5IiwiZnVuIiwic2h1ZmZsZV9hcnJheSIsImFycmF5IiwidGVtcCIsIm5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkiLCJsZW4iLCJhcnJheV9pcyIsImFycmF5X2kiLCJnZXRfb3B0aW9uIiwib3B0aW9uX25hbWUiLCJvcHRpb25zIiwiZGVmYXVsX3ZhbHVlIiwiZ2V0X211bHRpZGltX29wdGlvbiIsInBhcmFtX2luaXRfZml4ZWQiLCJsb3dlciIsInVwcGVyIiwicm91bmQiLCJjb21wbGV0ZV9wYXJhbXMiLCJwYXJhbXNfdG9fY29tcGxldGUiLCJwYXJhbV9pbml0IiwicGFyYW1zIiwicGFyYW1fbmFtZSIsInBhcmFtIiwiU3RlcHBlciIsImxvZ19wb3N0Iiwic3RlcCIsInN0YXJ0X2FkYXB0YXRpb24iLCJzdG9wX2FkYXB0YXRpb24iLCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciIsImdlbmVyYXRlX3Byb3Bvc2FsIiwicGFyYW1fbmFtZXMiLCJwcm9wX2xvZ19zY2FsZSIsImJhdGNoX3NpemUiLCJtYXhfYWRhcHRhdGlvbiIsImluaXRpYWxfYWRhcHRhdGlvbiIsInRhcmdldF9hY2NlcHRfcmF0ZSIsImlzX2FkYXB0aW5nIiwiYWNjZXB0YW5jZV9jb3VudCIsImJhdGNoX2NvdW50IiwiaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiIsInBhcmFtX3N0YXRlIiwicGFyYW1fcHJvcG9zYWwiLCJjdXJyX2xvZ19kZW5zIiwicHJvcF9sb2dfZGVucyIsImFjY2VwdF9wcm9iIiwibG9nX3NkX2FkanVzdG1lbnQiLCJub3JtYWxfcHJvcG9zYWwiLCJSZWFsTWV0cm9wb2xpc1N0ZXBwZXIiLCJkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwiLCJJbnRNZXRyb3BvbGlzU3RlcHBlciIsIk11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJTdWJTdGVwcGVyIiwiY3JlYXRlX3N1YnN0ZXBwZXJzIiwic3Vic3RhdGUiLCJzdWJzdGVwcGVycyIsInN1Ym9wdGlvbnMiLCJzdWJwYXJhbSIsInN1YnN0ZXBwZXIiLCJNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciIsIk11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJCaW5hcnlTdGVwcGVyIiwiemVyb19sb2dfZGVucyIsIm9uZV9sb2dfZGVucyIsIm1heF9sb2dfZGVucyIsInplcm9fcHJvYiIsIkJpbmFyeUNvbXBvbmVudFN0ZXBwZXIiLCJzdWJwYXJhbXMiLCJBbXdnU3RlcHBlciIsIlNlbGVjdFN0ZXBwZXIiLCJwYXJhbV9vYmplY3Rfd3JhcCIsInBhcmFtX29wdGlvbnMiLCJTYW1wbGVyIiwiZGF0YSIsInBhcmFtX2luaXRfZnVuIiwidGhpbm5pbmdfaW50ZXJ2YWwiLCJwYXJhbXNfdG9fbW9uaXRvciIsInRoaW4iLCJtb25pdG9yIiwic3RlcHBlcnMiLCJjcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSIsInNhbXBsZSIsIm5faXRlcmF0aW9ucyIsIm1vbml0b3JlZF9wYXJhbXMiLCJjdXJyX3NhbXBsZSIsImJ1cm4iLCJBbXdnU2FtcGxlciIsImFzY2VuZGluZyIsIm51bWJlcnMiLCJ2YWx1ZW9mIiwiaW5kZXgiLCJjb21wYXJlRGVmaW5lZCIsImNvbXBhcmUiLCJhc2NlbmRpbmdEZWZpbmVkIiwicXVpY2tzZWxlY3QiLCJsZWZ0IiwicmlnaHQiLCJuZXdMZWZ0IiwibmV3UmlnaHQiLCJzd2FwIiwicXVhbnRpbGUiLCJwIiwiRmxvYXQ2NEFycmF5IiwiZnJvbSIsImkwIiwidmFsdWUwIiwic3ViYXJyYXkiLCJ2YWx1ZTEiLCJtZWRpYW4iLCJDUFRNYXRoIiwiZyIsIm9ubWVzc2FnZSIsImV2ZW50IiwibHVjZSIsImxvZ1Bvc3QiLCJscCIsImFscGhhTWVhbiIsImFscGhhU2FtcGxlU2l6ZSIsIkJheWVzRGlzdHJpYnV0aW9ucyIsImxhbWJkYU1lYW4iLCJsYW1iZGFTaGFwZSIsImdhbW1hTWVhbiIsImdhbW1hU2FtcGxlU2l6ZSIsImx1Y2VNZWFuIiwibHVjZVNoYXBlIiwiY2hvaWNlIiwidmwiLCJ4YWwydiIsInhsIiwidnciLCJ4dyIsInZzIiwieHMiLCJ3dyIsInBnMnciLCJwdyIsIndsIiwidWciLCJ1cyIsImJpbnZhbCIsInJlc3BvbnNlIiwic2FtcGxlciIsIkJheWVzTWNtYyIsInNhbXBsZXMiLCJyZXN1bHRzIiwiZDMiLCJwb3N0TWVzc2FnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBT0EsTUFBSUEsT0FBTyxHQUFJLFVBQVVDLE9BQVYsRUFBbUI7O0VBR2hDLFFBQUlDLEVBQUUsR0FBR0MsTUFBTSxDQUFDQyxTQUFoQjtFQUNBLFFBQUlDLE1BQU0sR0FBR0gsRUFBRSxDQUFDSSxjQUFoQjtFQUNBLFFBQUlDLFdBQUosQ0FMZ0M7O0VBTWhDLFFBQUlDLE9BQU8sR0FBRyxPQUFPQyxNQUFQLEtBQWtCLFVBQWxCLEdBQStCQSxNQUEvQixHQUF3QyxFQUF0RDtFQUNBLFFBQUlDLGNBQWMsR0FBR0YsT0FBTyxDQUFDRyxRQUFS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",eY=!1,function(e){return tY=tY||KH(qH,$H,eY),new Worker(tY,e)}),oY=Z(nY||(nY=C(['\n  /* inject:css */\n  .js-plotly-plot .plotly, .js-plotly-plot .plotly div {\n  direction: ltr;\n  font-family: "Open Sans", verdana, arial, sans-serif;\n  margin: 0;\n  padding: 0;\n}\n.js-plotly-plot .plotly input, .js-plotly-plot .plotly button {\n  font-family: "Open Sans", verdana, arial, sans-serif;\n}\n.js-plotly-plot .plotly input:focus, .js-plotly-plot .plotly button:focus {\n  outline: none;\n}\n.js-plotly-plot .plotly a {\n  text-decoration: none;\n}\n.js-plotly-plot .plotly a:hover {\n  text-decoration: none;\n}\n.js-plotly-plot .plotly .crisp {\n  shape-rendering: crispEdges;\n}\n.js-plotly-plot .plotly .user-select-none {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n}\n.js-plotly-plot .plotly svg {\n  overflow: hidden;\n}\n.js-plotly-plot .plotly svg a {\n  fill: #447adb;\n}\n.js-plotly-plot .plotly svg a:hover {\n  fill: #3c6dc5;\n}\n.js-plotly-plot .plotly .main-svg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n.js-plotly-plot .plotly .main-svg .draglayer {\n  pointer-events: all;\n}\n.js-plotly-plot .plotly .cursor-default {\n  cursor: default;\n}\n.js-plotly-plot .plotly .cursor-pointer {\n  cursor: pointer;\n}\n.js-plotly-plot .plotly .cursor-crosshair {\n  cursor: crosshair;\n}\n.js-plotly-plot .plotly .cursor-move {\n  cursor: move;\n}\n.js-plotly-plot .plotly .cursor-col-resize {\n  cursor: col-resize;\n}\n.js-plotly-plot .plotly .cursor-row-resize {\n  cursor: row-resize;\n}\n.js-plotly-plot .plotly .cursor-ns-resize {\n  cursor: ns-resize;\n}\n.js-plotly-plot .plotly .cursor-ew-resize {\n  cursor: ew-resize;\n}\n.js-plotly-plot .plotly .cursor-sw-resize {\n  cursor: sw-resize;\n}\n.js-plotly-plot .plotly .cursor-s-resize {\n  cursor: s-resize;\n}\n.js-plotly-plot .plotly .cursor-se-resize {\n  cursor: se-resize;\n}\n.js-plotly-plot .plotly .cursor-w-resize {\n  cursor: w-resize;\n}\n.js-plotly-plot .plotly .cursor-e-resize {\n  cursor: e-resize;\n}\n.js-plotly-plot .plotly .cursor-nw-resize {\n  cursor: nw-resize;\n}\n.js-plotly-plot .plotly .cursor-n-resize {\n  cursor: n-resize;\n}\n.js-plotly-plot .plotly .cursor-ne-resize {\n  cursor: ne-resize;\n}\n.js-plotly-plot .plotly .cursor-grab {\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.js-plotly-plot .plotly .modebar {\n  position: absolute;\n  top: 2px;\n  right: 2px;\n}\n.js-plotly-plot .plotly .ease-bg {\n  -webkit-transition: background-color 0.3s ease 0s;\n  -moz-transition: background-color 0.3s ease 0s;\n  -ms-transition: background-color 0.3s ease 0s;\n  -o-transition: background-color 0.3s ease 0s;\n  transition: background-color 0.3s ease 0s;\n}\n.js-plotly-plot .plotly .modebar--hover > :not(.watermark) {\n  opacity: 0;\n  -webkit-transition: opacity 0.3s ease 0s;\n  -moz-transition: opacity 0.3s ease 0s;\n  -ms-transition: opacity 0.3s ease 0s;\n  -o-transition: opacity 0.3s ease 0s;\n  transition: opacity 0.3s ease 0s;\n}\n.js-plotly-plot .plotly:hover .modebar--hover .modebar-group {\n  opacity: 1;\n}\n.js-plotly-plot .plotly .modebar-group {\n  float: left;\n  display: inline-block;\n  box-sizing: border-box;\n  padding-left: 8px;\n  position: relative;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.js-plotly-plot .plotly .modebar-btn {\n  position: relative;\n  font-size: 16px;\n  padding: 3px 4px;\n  height: 22px;\n  /* display: inline-block; including this breaks 3d interaction in .embed mode. Chrome bug? */\n  cursor: pointer;\n  line-height: normal;\n  box-sizing: border-box;\n}\n.js-plotly-plot .plotly .modebar-btn svg {\n  position: relative;\n  top: 2px;\n}\n.js-plotly-plot .plotly .modebar.vertical {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  align-content: flex-end;\n  max-height: 100%;\n}\n.js-plotly-plot .plotly .modebar.vertical svg {\n  top: -1px;\n}\n.js-plotly-plot .plotly .modebar.vertical .modebar-group {\n  display: block;\n  float: none;\n  padding-left: 0px;\n  padding-bottom: 8px;\n}\n.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn {\n  display: block;\n  text-align: center;\n}\n.js-plotly-plot .plotly [data-title] {\n  /**\n   * tooltip body\n   */\n}\n.js-plotly-plot .plotly [data-title]:before, .js-plotly-plot .plotly [data-title]:after {\n  position: absolute;\n  -webkit-transform: translate3d(0, 0, 0);\n  -moz-transform: translate3d(0, 0, 0);\n  -ms-transform: translate3d(0, 0, 0);\n  -o-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n  display: none;\n  opacity: 0;\n  z-index: 1001;\n  pointer-events: none;\n  top: 110%;\n  right: 50%;\n}\n.js-plotly-plot .plotly [data-title]:hover:before, .js-plotly-plot .plotly [data-title]:hover:after {\n  display: block;\n  opacity: 1;\n}\n.js-plotly-plot .plotly [data-title]:before {\n  content: "";\n  position: absolute;\n  background: transparent;\n  border: 6px solid transparent;\n  z-index: 1002;\n  margin-top: -12px;\n  border-bottom-color: #69738a;\n  margin-right: -6px;\n}\n.js-plotly-plot .plotly [data-title]:after {\n  content: attr(data-title);\n  background: #69738a;\n  color: white;\n  padding: 8px 10px;\n  font-size: 12px;\n  line-height: 12px;\n  white-space: nowrap;\n  margin-right: -18px;\n  border-radius: 2px;\n}\n.js-plotly-plot .plotly .vertical [data-title]:before, .js-plotly-plot .plotly .vertical [data-title]:after {\n  top: 0%;\n  right: 200%;\n}\n.js-plotly-plot .plotly .vertical [data-title]:before {\n  border: 6px solid transparent;\n  border-left-color: #69738a;\n  margin-top: 8px;\n  margin-right: -30px;\n}\n.js-plotly-plot .plotly .select-outline {\n  fill: none;\n  stroke-width: 1;\n  shape-rendering: crispEdges;\n}\n.js-plotly-plot .plotly .select-outline-1 {\n  stroke: white;\n}\n.js-plotly-plot .plotly .select-outline-2 {\n  stroke: black;\n  stroke-dasharray: 2px 2px;\n}\n\n.plotly-notifier {\n  font-family: "Open Sans", verdana, arial, sans-serif;\n  position: fixed;\n  top: 50px;\n  right: 20px;\n  z-index: 10000;\n  font-size: 10pt;\n  max-width: 180px;\n}\n.plotly-notifier p {\n  margin: 0;\n}\n.plotly-notifier .notifier-note {\n  min-width: 180px;\n  max-width: 250px;\n  border: 1px solid #fff;\n  z-index: 3000;\n  margin: 0;\n  background-color: #8c97af;\n  background-color: rgba(140, 151, 175, 0.9);\n  color: #fff;\n  padding: 10px;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  -ms-hyphens: auto;\n  -webkit-hyphens: auto;\n  hyphens: auto;\n}\n.plotly-notifier .notifier-close {\n  color: #fff;\n  opacity: 0.8;\n  float: right;\n  padding: 0 5px;\n  background: none;\n  border: none;\n  font-size: 20px;\n  font-weight: bold;\n  line-height: 20px;\n}\n.plotly-notifier .notifier-close:hover {\n  color: #444;\n  text-decoration: none;\n  cursor: pointer;\n}\n  /* endinject */\n'])));M_.register([PH]);var sY,lY,cY=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).a=1,e.l=1,e.g=1,e.choices=[],e.samples=null,e.working=!1,e.queued=!1,e.worker=new aY,e.worker.onmessage=function(t){e.working=!1,e.samples=t.data.samples,e.a=t.data.results.alpha,e.l=t.data.results.lambda,e.g=t.data.results.gamma,e.requestUpdate(),e.dispatchEvent(new CustomEvent("cpt-fit-update",{detail:{a:e.a,l:e.l,g:e.g},bubbles:!0})),e.queued&&e.fit()},e.fit(),e}return l(n,[{key:"fit",value:function(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}},{key:"clear",value:function(){this.choices=[],this.fit()}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this.choices.find((function(t){return t.name===e}));return void 0===t?null:t}},{key:"set",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=this.choices.find((function(e){return e.name===a}));void 0===s?this.choices.push({xl:e,xw:t,pw:n,xs:i,response:r,name:a,label:o}):(s.xl=e,s.xw=t,s.pw=n,s.xs=i,s.response=r,s.label=o),this.fit()}},{key:"render",value:function(){return se(iY||(iY=C(["\n      <div>\n        <div>After ",' trials:</div>\n        <div>Current:\n          <var class="math-var a"></var> = ',',\n          <var class="math-var l"></var> = ',',\n          <var class="math-var g"></var> = ','\n        </div>\n        <div class="param">\n          <div class="trace alpha"></div>\n          <div class="hist alpha"></div>\n        </div>\n        <div class="param">\n          <div class="trace lambda"></div>\n          <div class="hist lambda"></div>\n        </div>\n        <div class="param">\n          <div class="trace gamma"></div>\n          <div class="hist gamma"></div>\n        </div>\n        <div class="param">\n          <div class="trace luce"></div>\n          <div class="hist luce"></div>\n        </div>\n      </div>\n    '])),this.choices.length,this.a.toFixed(2),this.l.toFixed(2),this.g.toFixed(2))}},{key:"plotParam",value:function(e){var t={l:40,r:10,b:40,t:40,pad:4};M_.react(this.shadowRoot.querySelector(".trace.".concat(e)),[{y:this.samples[e]}],{margin:t,title:"Traceplot of ".concat(e)}),M_.react(this.shadowRoot.querySelector(".hist.".concat(e)),[{x:this.samples[e],type:"histogram"}],{margin:t,title:"Posterior of ".concat(e)})}},{key:"update",value:function(e){I(d(n.prototype),"update",this).call(this,e),null!==this.samples&&(this.plotParam("alpha"),this.plotParam("lambda"),this.plotParam("gamma"),this.plotParam("luce"))}}],[{key:"properties",get:function(){return{}}},{key:"styles",get:function(){return[I(d(n),"styles",this),oY,Z(rY||(rY=C(["\n        /* :host {\n          display: inline-block;\n        } */\n\n        .trace,\n        .hist {\n          display: inline-block;\n\n          width: 20rem;\n          height: 15rem;\n        }\n      "])))]}}]),n}();customElements.define("cpt-fit",cY);var uY=function(e){u(i,vo);var t=b(i);function i(){var e;return o(this,i),(e=t.call(this)).firstUpdate=!0,e.drag=!1,e.g=.5,e.p=null,e.label="",e.function="default",e.functions=[{name:"default",g:e.g}],e.probabilities=[{name:"default",p:e.p,label:e.label,function:e.function}],e.xl=null,e.xw=null,e.pw=null,e.xs=null,e.trialCount=null,e.response=null,e.width=NaN,e.height=NaN,e.rem=NaN,e.alignState(),e}return l(i,[{key:"alignState",value:function(){var e=this;this.functions[0].g=this.g,this.probabilities[0].p=this.p,this.probabilities[0].label=this.label,this.probabilities[0].function=this.function,this.probabilities.forEach((function(t){var n=e.functions.find((function(e){return e.name===t.function}));t.w=ys.pg2w(t.p,n.g)})),this.w=this.probabilities[0].w}},{key:"trial",value:function(e,t,n,i,r,a){this.trialCount&&this.removeProbability("".concat(this.trialCount)),this.xl=e,this.xw=t,this.pw=n,this.xs=i,this.trialCount=r,this.response=a,this.setProbability(this.pw,"".concat(this.trialCount),"","default",!0)}},{key:"pauseTrial",value:function(){var e=mn(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");e.interrupt("new-1"),e.interrupt("new-2"),e.datum((function(e){return e.paused=!0,e}))}},{key:"resumeTrial",value:function(){mn(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((function(e){return e.paused=!1,e})),this.requestUpdate()}},{key:"clearFunctions",value:function(){this.functions.splice(1),this.requestUpdate()}},{key:"clearProbabilities",value:function(){this.probabilities.splice(1),this.requestUpdate()}},{key:"clear",value:function(){this.clearFunctions(),this.clearProbabilities()}},{key:"removeFunction",value:function(e){this.functions=this.functions.filter((function(t){return t.name!==e})),this.requestUpdate()}},{key:"removeProbability",value:function(e){this.probabilities=this.probabilities.filter((function(t){return t.name!==e})),this.requestUpdate()}},{key:"remove",value:function(e){this.removeFunction(e),this.removeProbability(e)}},{key:"getFunction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.functions.find((function(t){return t.name===e}))}},{key:"getProbability",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.probabilities.find((function(t){return t.name===e}))}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return n(n({},this.getFunction(e)),this.getProbability(e))}},{key:"setFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";"default"===t&&(this.g=e);var n=this.functions.find((function(e){return e.name===t}));void 0===n?this.functions.push({name:t,g:e}):n.g=e,this.requestUpdate()}},{key:"setProbability",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];"default"===t&&(this.p=e,this.label=n);var a=this.probabilities.find((function(e){return e.name===t}));void 0===a?this.probabilities.push({name:t,p:e,label:n,function:i,trial:r,new:r}):(a.p=e,a.label=n,a.function=i),this.requestUpdate()}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;this.setFunction(t,n),this.setProbability(e,n,i,r)}},{key:"render",value:function(){return se(sY||(sY=C(["\n      ","\n    "])),vo.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){I(d(i.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),I(d(i.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){I(d(i.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){var t=this;if(I(d(i.prototype),"update",this).call(this,e),this.alignState(),!(Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))){var n=this.width,r=this.height,a=Math.min(n,r),o={top:2*this.rem,bottom:3*this.rem,left:3*this.rem,right:2*this.rem},s=a-(o.top+o.bottom),l=a-(o.left+o.right),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),u=la().domain([0,1]).range([0,l]).clamp(!0);this.xScale=u;var g=la().domain([1,0]).range([0,s]);this.yScale=g;var h=wn().subject((function(e,n){return{x:e.x,y:t.yScale(ys.pg2w(t.xScale.invert(e.x),n.g)),p:t.xScale.invert(e.x),g:n.g,w:ys.pg2w(t.xScale.invert(e.x),n.g)}})).on("start",(function(e){mn(e.currentTarget).classed("dragging",!0)})).on("drag",(function(e,n){t.drag=!0;var i=t.xScale.invert(e.x),r=t.yScale.invert(e.y),a=i-e.subject.p,o=r-e.subject.w,s=Math.pow(Math.pow(a,2)+Math.pow(o,2),.5),l=e.subject.p>e.subject.w?a>o?e.subject.g-s:e.subject.g+s:a>o?e.subject.g+s:e.subject.g-s;n.g=l>1?1:l<0?0:l,"default"===n.name&&(t.g=n.g),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:t.get(n.name),bubbles:!0}))})).on("end",(function(e){mn(e.currentTarget).classed("dragging",!1)})),f=wn().subject((function(e,n){return{x:t.xScale(n.p),y:t.yScale(n.w)}})).on("start",(function(e){mn(e.currentTarget).classed("dragging",!0)})).on("drag",(function(e,n){t.drag=!0;var i=t.xScale.invert(e.x);n.p=i<0?0:i>1?1:i,"default"===n.name&&(t.p=n.p),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:n.name,p:n.p,w:n.w,label:n.label,g:t.getFunction(n.function).g},bubbles:!0}))})).on("end",(function(e){mn(e.currentTarget).classed("dragging",!1)})),p=Da().x((function(e){return u(e.p)})).y((function(e){return g(e.w)})),m=mn(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),v=m.enter().append("svg").classed("main",!0),b=v.merge(m).attr("viewBox","0 0 ".concat(a," ").concat(a)),y=v.append("g").classed("plot",!0),C=b.select(".plot").attr("transform","translate(".concat(o.left,", ").concat(o.top,")"));y.append("clipPath").attr("id","clip-cpt-value").append("rect"),C.select("clipPath rect").attr("height",s+1).attr("width",l+1);var x=y.append("g").classed("underlayer",!0),B=C.select(".underlayer");x.append("rect").classed("background",!0),B.select(".background").attr("height",s).attr("width",l),x.append("g").classed("scale-x",!0),B.select(".scale-x").attr("transform","translate(0, ".concat(s,")")).transition().duration(2*c).ease(Ur).call(De(u)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);var A=x.append("text").classed("title-x",!0).attr("text-anchor","middle");A.append("tspan").classed("name",!0).text("Probability ("),A.append("tspan").classed("math-var p",!0).text("p"),A.append("tspan").classed("name",!0).text(")"),B.select(".title-x").attr("transform","translate(".concat(l/2,", ").concat(s+2.25*this.rem,")")),x.append("g").classed("scale-y",!0),B.select(".scale-y").transition().duration(2*c).ease(Ur).call(ze(g)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);var F=x.append("text").classed("title-y",!0).attr("text-anchor","middle");F.append("tspan").classed("name",!0).text("Decision Weight ("),F.append("tspan").classed("math-var v",!0).text("w"),F.append("tspan").classed("name",!0).text(")"),B.select(".title-y").attr("transform","translate(".concat(-2*this.rem,", ").concat(s/2,")rotate(-90)")),x.append("line").classed("diagonal",!0),B.select(".diagonal").transition().duration(2*c).attr("x1",u(0)).attr("y1",g(0)).attr("x2",u(1)).attr("y2",g(1)),y.append("g").classed("content",!0);var Q=C.select(".content"),U=Q.selectAll(".lines").data(this.probabilities.filter((function(e){return null!=e.p})),(function(e){return e.name})),w=U.enter().append("g").classed("lines",!0);w.each((function(e,t,n){var i=mn(n[t]);i.append("line").classed("line-p above",!0),i.append("line").classed("line-p below",!0),i.append("line").classed("line-w before",!0),i.append("line").classed("line-w after",!0)})),w.filter((function(e){return e.new})).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each((function(e,t,n){var i=mn(n[t]);i.select(".line-p.above").attr("x1",u(e.p)).attr("x2",u(e.p)).attr("y1",g(1)).attr("y2",g(1)),i.select(".line-p.below").attr("x1",u(e.p)).attr("x2",u(e.p)).attr("y1",g(0)).attr("y2",g(0)),i.select(".line-w.before").attr("x1",u(e.p)).attr("x2",u(e.p)).attr("y1",g(e.w)).attr("y2",g(e.w)),i.select(".line-w.after").attr("x1",u(e.p)).attr("x2",u(e.p)).attr("y1",g(e.w)).attr("y2",g(e.w))}));var G=w.merge(U),R=G.filter((function(e){return e.new&&!e.paused}));if(!R.empty()){var L=R.attr("data-animating-ease-time-1"),S=R.attr("data-animating-ease-time-2"),V=function(e){return la().range([0,1]).domain([L,1])(e)},Z=function(e){return la().range([0,1]).domain([S,1])(e)},k=function(e){return function(t){return la().domain([e(L),1]).range([0,1])(e(t))}},E=function(e){return function(t){return la().domain([e(S),1]).range([0,1])(e(t))}};R.transition("new-1").duration((function(){return Math.floor(c*(1-L))})).ease((function(e){return la().domain([0,1]).range([L,1])(e)})).attr("data-animating-ease-time-1",1).tween("animating",(function(e,n,i){var r=i[n],a=mn(r),o=vi(void 0!==r.p?r.p:e.p,e.p),s=vi(void 0!==r.g?r.g:t.getFunction(e.function).g,t.getFunction(e.function).g),l=vi(g.invert(a.select(".line-p.above").attr("y1")),e.w),c=vi(g.invert(a.select(".line-p.below").attr("y1")),e.w);return function(e){r.p=o(Ur(V(e))),r.g=s(Ur(V(e))),r.w=ys.pg2w(r.p,r.g),a.select(".line-p.above").attr("x1",u(r.p)).attr("x2",u(r.p)).attr("y1",g(l(k(Qr)(e)))).attr("y2",g(1)),a.select(".line-p.below").attr("x1",u(r.p)).attr("x2",u(r.p)).attr("y1",g(c(k(Qr)(e)))).attr("y2",g(0))}})).transition("new-2").duration((function(){return Math.floor(c*(1-S))})).ease((function(e){return la().domain([0,1]).range([S,1])(e)})).attr("data-animating-ease-time-2",1).tween("animating",(function(e,n,i){var r=i[n],a=mn(r),o=vi(void 0!==r.p?r.p:e.p,e.p),s=vi(void 0!==r.g?r.g:t.getFunction(e.function).g,t.getFunction(e.function).g),l=vi(u.invert(a.select(".line-w.before").attr("x1")),0),c=vi(u.invert(a.select(".line-w.after").attr("x1")),1);return function(e){r.p=o(Ur(Z(e))),r.g=s(Ur(Z(e))),r.w=ys.pg2w(r.p,r.g),a.select(".line-w.before").attr("x1",u(l(E(Ur)(e)))).attr("x2",u(r.p)).attr("y1",g(r.w)).attr("y2",g(r.w)),a.select(".line-w.after").attr("x1",u(c(E(Ur)(e)))).attr("x2",u(r.p)).attr("y1",g(r.w)).attr("y2",g(r.w))}})).on("end",(function(e,n,i){var r=i[n];r.removeAttribute("data-animating-ease-time-1"),r.removeAttribute("data-animating-ease-time-2"),e.new=!1,t.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:t.trialCount,xl:t.xl,xw:t.xw,pw:t.pw,xs:t.xs,response:t.response},bubbles:!0}))}))}var X=G.filter((function(e){return e.new&&e.paused}));if(!X.empty()){var N=X.attr("data-animating-ease-time-1"),W=X.attr("data-animating-ease-time-2");X.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).tween("paused",(function(e,n,i){var r=i[n],a=mn(r),o=vi(void 0!==r.p?r.p:e.p,e.p),s=vi(void 0!==r.g?r.g:t.getFunction(e.function).g,t.getFunction(e.function).g),l=vi(1,e.w),c=vi(0,e.w),d=vi(e.p,0),h=vi(e.p,1);return function(e){r.p=o(e),r.g=s(e),r.w=ys.pg2w(r.p,r.g),a.select(".line-p.above").attr("x1",u(r.p)).attr("x2",u(r.p)).attr("y1",g(l(Qr(N)))).attr("y2",g(1)),a.select(".line-p.below").attr("x1",u(r.p)).attr("x2",u(r.p)).attr("y1",g(c(Qr(N)))).attr("y2",g(0)),a.select(".line-w.before").attr("x1",u(d(Ur(W)))).attr("x2",u(r.p)).attr("y1",g(r.w)).attr("y2",g(r.w)),a.select(".line-w.after").attr("x1",u(h(Ur(W)))).attr("x2",u(r.p)).attr("y1",g(r.w)).attr("y2",g(r.w))}}))}G.filter((function(e){return!e.new})).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).tween("non-animating",(function(e,n,i){var r=i[n],a=mn(r),o=vi(void 0!==r.p?r.p:e.p,e.p),s=vi(void 0!==r.g?r.g:t.getFunction(e.function).g,t.getFunction(e.function).g);return function(e){r.p=o(e),r.g=s(e),r.w=ys.pg2w(r.p,r.g),a.select(".line-p.above").attr("x1",u(r.p)).attr("x2",u(r.p)).attr("y1",g(r.w)).attr("y2",g(1)),a.select(".line-p.below").attr("x1",u(r.p)).attr("x2",u(r.p)).attr("y1",g(r.w)).attr("y2",g(0)),a.select(".line-w.before").attr("x1",u(0)).attr("x2",u(r.p)).attr("y1",g(r.w)).attr("y2",g(r.w)),a.select(".line-w.after").attr("x1",u(1)).attr("x2",u(r.p)).attr("y1",g(r.w)).attr("y2",g(r.w))}})),U.exit().remove();var _=Q.selectAll(".curve").data(this.functions,(function(e){return e.name})),T=_.enter().append("path").classed("curve",!0).attr("clip-path","url(#clip-cpt-value)").merge(_);(this.firstUpdate||e.has("interactive"))&&(this.interactive?T.attr("tabindex",0).classed("interactive",!0).call(h).on("keydown",(function(e,n){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var i=n.g;switch(e.key){case"ArrowUp":case"ArrowLeft":i+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":i-=e.shiftKey?.01:.05}(i=i<0?0:i>1?1:i)!==n.g&&(n.g=i,"default"===n.name&&(t.g=n.g),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:t.get(n.name),bubbles:!0}))),e.preventDefault()}})):T.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),T.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).attrTween("d",(function(e,t,n){var i=n[t],r=vi(void 0!==i.g?i.g:e.g,e.g);return function(e){i.g=r(e);var t=Xe(u.range()[0],u.range()[1]+1,1).map((function(e){return{p:u.invert(e),w:ys.pg2w(u.invert(e),i.g)}}));return p(t)}})),_.exit().remove();var M=Q.selectAll(".point").data(this.probabilities.filter((function(e){return null!=e.p})),(function(e){return e.name})),H=M.enter().append("g").classed("point",!0);H.append("circle").classed("circle",!0).attr("r",6),H.append("text").classed("label",!0);var Y=H.merge(M);Y.select("text").text((function(e){return e.label})),Y.filter((function(n){return(t.firstUpdate||e.has("interactive"))&&t.interactive&&!n.trial})).attr("tabindex",0).classed("interactive",!0).call(f).on("keydown",(function(e,n){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var i=n.p;switch(e.key){case"ArrowUp":case"ArrowRight":i+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":i-=e.shiftKey?.01:.05}(i=i<0?0:i>1?1:i)!==n.p&&(n.p=i,"default"===n.name&&(t.p=n.p),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:n.name,p:n.p,w:n.w,label:n.label,g:t.getFunction(n.function).g},bubbles:!0}))),e.preventDefault()}})),Y.filter((function(n){return(t.firstUpdate||e.has("interactive"))&&!t.interactive||n.trial})).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),Y.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).attrTween("transform",(function(e,n,i){var r=i[n],a=vi(void 0!==r.p?r.p:e.p,e.p),o=vi(void 0!==r.g?r.g:t.getFunction(e.function).g,t.getFunction(e.function).g);return function(e){return r.p=a(e),r.g=o(e),"translate(\n            ".concat(u(r.p),",\n            ").concat(g(ys.pg2w(r.p,r.g)),"\n          )")}})),M.exit().remove(),this.drag=!1,this.firstUpdate=!1}}}],[{key:"properties",get:function(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},w:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[I(d(i),"styles",this),Z(lY||(lY=C(['\n        :host {\n          display: inline-block;\n\n          width: 20rem;\n          height: 20rem;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n        }\n\n        text {\n          /* stylelint-disable property-no-vendor-prefix */\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n        }\n\n        .curve.interactive {\n          cursor: nwse-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .curve.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .curve.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .curve.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .point.interactive {\n          cursor: nesw-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */\n          stroke: #000000;\n          stroke-opacity: 0;\n          stroke-width: 0;\n        }\n\n        /* Make a larger target for touch users */\n        @media (pointer: coarse) {\n          .point.interactive .circle {\n            stroke: #000000;\n            stroke-opacity: 0;\n            stroke-width: 12px;\n          }\n        }\n\n        .point.interactive:hover {\n          filter: url("#shadow-4");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #ff0000;\n        }\n\n        .point.interactive:active {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #00ff00;\n        }\n\n        :host(.keyboard) .point.interactive:focus {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #0000ff;\n        }\n\n        .background {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-border);\n          stroke-width: 1;\n          shape-rendering: crispEdges;\n        }\n\n        .title-x,\n        .title-y {\n          font-weight: 600;\n\n          fill: currentColor;\n        }\n\n        .tick {\n          font-size: 0.75rem;\n        }\n\n        .scale-x path,\n        .scale-x line,\n        .scale-y path,\n        .scale-y line {\n          stroke: var(---color-element-border);\n        }\n\n        .diagonal {\n          stroke: var(---color-element-border);\n          stroke-dasharray: 4;\n          stroke-width: 1;\n        }\n\n        .curve {\n          fill: none;\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .line-p,\n        .line-w {\n          fill: none;\n          stroke-width: 2;\n        }\n\n        .line-p {\n          stroke: var(---color-p);\n        }\n\n        .line-w {\n          stroke: var(---color-w);\n        }\n\n        .point .circle {\n          fill: var(---color-element-emphasis);\n\n          /* r: 6; HACK: Firefox does not support CSS SVG Geometry Properties */\n        }\n\n        .point .label {\n          font-size: 0.75rem;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n\n          fill: var(---color-text-inverse);\n        }\n      '])))]}}]),i}();customElements.define("cpt-probability",uY);var dY={exports:{}},gY={exports:{}},hY=Hd.exports,fY=gv,pY=Ym,mY=BR.hovertemplateAttrs,vY=Xd,bY=Ud.extendFlat,yY=Cp.overrideAll;function IY(e){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",e,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function CY(e){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",e,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:IY("x"),y:IY("y"),z:IY("z")},color:{valType:"color",dflt:hY.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",e,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:hY.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var xY=gY.exports=yY(bY({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:mY(),xhoverformat:pY("x"),yhoverformat:pY("y"),zhoverformat:pY("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},fY("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:CY("x"),y:CY("y"),z:CY("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale."," The opacityscale must be an array containing"," arrays mapping a normalized value to an opacity value."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have"," higher opacity values and those in the middle would be more transparent"," Alternatively, `opacityscale` may be a palette name string"," of the following list: 'min', 'max', 'extremes' and 'uniform'."," The default is 'uniform'."].join("")},_deprecated:{zauto:bY({},fY.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:bY({},fY.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:bY({},fY.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:bY({},vY.hoverinfo),showlegend:bY({},vY.showlegend,{dflt:!1})}),"calc","nested");xY.x.editType=xY.y.editType=xY.z.editType="calc+clearAxisTypes",xY.transforms=void 0;var BY=gv,AY=Ym,FY=BR.hovertemplateAttrs,QY=gY.exports,UY=Xd,wY=Ud.extendFlat,GY=wY({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:FY({editType:"calc"}),xhoverformat:AY("x"),yhoverformat:AY("y"),zhoverformat:AY("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},BY("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:QY.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:wY({},QY.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:QY.contours.x.color,width:QY.contours.x.width,editType:"calc"},lightposition:{x:wY({},QY.lightposition.x,{dflt:1e5}),y:wY({},QY.lightposition.y,{dflt:1e5}),z:wY({},QY.lightposition.z,{dflt:0}),editType:"calc"},lighting:wY({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},QY.lighting),hoverinfo:wY({},UY.hoverinfo,{editType:"calc"}),showlegend:wY({},UY.showlegend,{dflt:!1})}),RY=gv,LY=Ym,SY=BR.hovertemplateAttrs,VY=GY,ZY=Xd,kY=Ud.extendFlat,EY=Cp.overrideAll;function XY(e){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not slice planes about the",e,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",e,"except start and end."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function NY(e){return{show:{valType:"boolean",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",e,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var WY=dY.exports=EY(kY({x:{valType:"data_array",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:XY("x"),y:XY("y"),z:XY("z")},caps:{x:NY("x"),y:NY("y"),z:NY("z")},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:SY(),xhoverformat:LY("x"),yhoverformat:LY("y"),zhoverformat:LY("z"),valuehoverformat:LY("value",1),showlegend:kY({},ZY.showlegend,{dflt:!1})},RY("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:VY.opacity,lightposition:VY.lightposition,lighting:VY.lighting,flatshading:VY.flatshading,contour:VY.contour,hoverinfo:kY({},ZY.hoverinfo)}),"calc","nested");WY.flatshading.dflt=!0,WY.lighting.facenormalsepsilon.dflt=0,WY.x.editType=WY.y.editType=WY.z.editType=WY.value.editType="calc+clearAxisTypes",WY.transforms=void 0;var _Y=ws.exports,TY=hg,MY=dY.exports,HY=ab;function YY(e,t,n,i,r){var a=r("isomin"),o=r("isomax");null!=o&&null!=a&&a>o&&(t.isomin=null,t.isomax=null);var s=r("x"),l=r("y"),c=r("z"),u=r("value");s&&s.length&&l&&l.length&&c&&c.length&&u&&u.length?(TY.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],i),r("valuehoverformat"),["x","y","z"].forEach((function(e){r(e+"hoverformat");var t="caps."+e;r(t+".show")&&r(t+".fill");var n="slices."+e;r(n+".show")&&(r(n+".fill"),r(n+".locations"))})),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach((function(e){r(e)})),HY(e,t,i,r,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}var DY={supplyDefaults:function(e,t,n,i){YY(e,t,n,i,(function(n,i){return _Y.coerce(e,t,MY,n,i)}))},supplyIsoDefaults:YY},zY=ws.exports;function OY(e){var t,n,i,r,a,o,s,l,c,u,d,g,h=e._x,f=e._y,p=e._z,m=e._len,v=-1/0,b=1/0,y=-1/0,I=1/0,C=-1/0,x=1/0,B="";for(m&&(s=h[0],c=f[0],d=p[0]),m>1&&(l=h[m-1],u=f[m-1],g=p[m-1]),t=0;t<m;t++)v=Math.max(v,h[t]),b=Math.min(b,h[t]),y=Math.max(y,f[t]),I=Math.min(I,f[t]),C=Math.max(C,p[t]),x=Math.min(x,p[t]),r||h[t]===s||(r=!0,B+="x"),a||f[t]===c||(a=!0,B+="y"),o||p[t]===d||(o=!0,B+="z");r||(B+="x"),a||(B+="y"),o||(B+="z");var A=JY(e._x),F=JY(e._y),Q=JY(e._z);B=(B=(B=B.replace("x",(s>l?"-":"+")+"x")).replace("y",(c>u?"-":"+")+"y")).replace("z",(d>g?"-":"+")+"z");var U=function(){m=0,A=[],F=[],Q=[]};(!m||m<A.length*F.length*Q.length)&&U();var w=function(e){return"x"===e?h:"y"===e?f:p},G=function(e){return"x"===e?A:"y"===e?F:Q},R=function(e){return e[m-1]<e[0]?-1:1},L=w(B[1]),S=w(B[3]),V=w(B[5]),Z=G(B[1]).length,k=G(B[3]).length,E=G(B[5]).length,X=!1,N=function(e,t,n){return Z*(k*e+t)+n},W=R(w(B[1])),_=R(w(B[3])),T=R(w(B[5]));for(t=0;t<E-1;t++){for(n=0;n<k-1;n++){for(i=0;i<Z-1;i++){var M=N(t,n,i),H=N(t,n,i+1),Y=N(t,n+1,i),D=N(t+1,n,i);if(L[M]*W<L[H]*W&&S[M]*_<S[Y]*_&&V[M]*T<V[D]*T||(X=!0),X)break}if(X)break}if(X)break}return X&&(zY.warn("Encountered arbitrary coordinates! Unable to input data grid."),U()),{xMin:b,yMin:I,zMin:x,xMax:v,yMax:y,zMax:C,Xs:A,Ys:F,Zs:Q,len:m,fill:B}}function JY(e){return zY.distinctVals(e).vals}function jY(e,t){if(void 0===t&&(t=e.length),zY.isTypedArray(e))return e.subarray(0,t);for(var n=[],i=0;i<t;i++)n[i]=+e[i];return n}var PY=mb,KY=OY,qY=jY,$Y={exports:{}};$Y.exports=function(){function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){if(!s&&As)return As(o);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return r(t[o][1][e]||e)}),c,c.exports,e,t,n,i)}return n[o].exports}for(var a=As,o=0;o<i.length;o++)r(i[o]);return r}return e}()({1:[function(e,t,n){n.byteLength=u,n.toByteArray=g,n.fromByteArray=p;for(var i=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)i[s]=o[s],r[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e){var t=c(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function d(e,t,n){return 3*(t+n)/4-n}function g(e){var t,n,i=c(e),o=i[0],s=i[1],l=new a(d(e,o,s)),u=0,g=s>0?o-4:o;for(n=0;n<g;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l}function h(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function f(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(h(i));return r.join("")}function p(e){for(var t,n=e.length,r=n%3,a=[],o=16383,s=0,l=n-r;s<l;s+=o)a.push(f(e,s,s+o>l?l:s+o));return 1===r?(t=e[n-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){(function(t){(function(){var t=e("base64-js"),r=e("ieee754");n.Buffer=l,n.SlowBuffer=b,n.INSPECT_MAX_BYTES=50;var a=2147483647;function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=l.prototype,t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return g(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return h(e,t);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+i(e));if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);var a=m(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+i(e))}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}function g(e){return u(e),s(e<0?0:0|v(e))}function h(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|y(e,t),i=s(n),r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}function f(e){for(var t=e.length<0?0:0|v(e.length),n=s(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=l.prototype,i}function m(e){if(l.isBuffer(e)){var t=0|v(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||q(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}function v(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),l.alloc(+e)}function y(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+i(e));var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(e).length;default:if(a)return r?-1:z(e).length;t=(""+t).toLowerCase(),a=!0}}function I(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return L(this,t,n);case"ascii":return Z(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function C(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function x(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:B(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):B(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function B(e,t,n,i,r){var a,o=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var u=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var d=!0,g=0;g<l;g++)if(c(e,a+g)!==c(t,g)){d=!1;break}if(d)return a}return-1}function A(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=t.length;i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(q(s))return o;e[n+o]=s}return o}function F(e,t,n,i){return P(z(t,e.length-n),e,n,i)}function Q(e,t,n,i){return P(O(t),e,n,i)}function U(e,t,n,i){return Q(e,t,n,i)}function w(e,t,n,i){return P(j(t),e,n,i)}function G(e,t,n,i){return P(J(t,e.length-n),e,n,i)}function R(e,n,i){return 0===n&&i===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,i))}function L(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,l,c=e[r],u=null,d=c>239?4:c>223?3:c>191?2:1;if(r+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(a=e[r+1]))&&(l=(31&c)<<6|63&a)>127&&(u=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&(l=(15&c)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return V(i)}n.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=o(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,l.alloc=function(e,t,n){return d(e,t,n)},l.allocUnsafe=function(e){return g(e)},l.allocUnsafeSlow=function(e){return g(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var a=e[n];if(K(a,Uint8Array)&&(a=l.from(a)),!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},l.byteLength=y,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?L(this,0,e):I.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,a){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+i(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),c=Math.min(o,s),u=this.slice(r,a),d=e.slice(t,n),g=0;g<c;++g)if(u[g]!==d[g]){o=u[g],s=d[g];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return F(this,e,t,n);case"ascii":return Q(this,e,t,n);case"latin1":case"binary":return U(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function V(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=S));return n}function Z(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function k(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function E(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=D(e[a]);return r}function X(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function W(e,t,n,i,r,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function _(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,i,a){return t=+t,n>>>=0,a||_(e,t,n,4),r.write(e,t,n,i,23,4),n+4}function M(e,t,n,i,a){return t=+t,n>>>=0,a||_(e,t,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=l.prototype,i},l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var i=t,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||W(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||W(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);W(this,e,t,n,r-1,-r)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);W(this,e,t,n,r-1,-r)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||W(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var a=r-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return r},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var r=e.charCodeAt(0);("utf8"===i&&r<128||"latin1"===i)&&(e=r)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=l.isBuffer(e)?e:l.from(e,i),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var H=/[^+/0-9A-Za-z-_]/g;function Y(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function O(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,i,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(n=e.charCodeAt(o))>>8,r=n%256,a.push(r),a.push(i);return a}function j(e){return t.toByteArray(Y(e))}function P(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(e,t,n){n.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?r-1:0,g=n?-1:1,h=e[t+d];for(d+=g,a=h&(1<<-u)-1,h>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=g,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=i;u>0;o=256*o+e[t+d],d+=g,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,i),a-=c}return(h?-1:1)*o*Math.pow(2,a-i)},n.write=function(e,t,n,i,r,a){var o,s,l,c=8*a-r-1,u=(1<<c)-1,d=u>>1,g=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:a-1,f=i?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?g/l:g*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,r),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[n+h]=255&s,h+=f,s/=256,r-=8);for(o=o<<r|s,c+=r;c>0;e[n+h]=255&o,h+=f,o/=256,c-=8);e[n+h-f]|=128*p}},{}],5:[function(e,t,n){var i,r,a=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function c(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,d=[],g=!1,h=-1;function f(){g&&u&&(g=!1,u.length?d=u.concat(d):h=-1,d.length&&p())}function p(){if(!g){var e=l(f);g=!0;for(var t=d.length;t;){for(u=d,d=[];++h<t;)u&&u[h].run();h=-1,t=d.length}u=null,g=!1,c(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new m(e,t)),1!==d.length||g||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],6:[function(e,t,n){t.exports={alpha_shape:e("alpha-shape"),convex_hull:e("convex-hull"),delaunay_triangulate:e("delaunay-triangulate"),gl_cone3d:e("gl-cone3d"),gl_error3d:e("gl-error3d"),gl_heatmap2d:e("gl-heatmap2d"),gl_line3d:e("gl-line3d"),gl_mesh3d:e("gl-mesh3d"),gl_plot2d:e("gl-plot2d"),gl_plot3d:e("gl-plot3d"),gl_pointcloud2d:e("gl-pointcloud2d"),gl_scatter3d:e("gl-scatter3d"),gl_select_box:e("gl-select-box"),gl_spikes2d:e("gl-spikes2d"),gl_streamtube3d:e("gl-streamtube3d"),gl_surface3d:e("gl-surface3d"),ndarray:e("ndarray"),ndarray_linear_interpolate:e("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(e,t,n){t.exports=l;var i=e("turntable-camera-controller"),r=e("orbit-camera-controller"),a=e("matrix-camera-controller");function o(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map((function(t){return e[t]})),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=o.prototype;function l(e){var t=(e=e||{}).eye||[0,0,1],n=e.center||[0,0,0],s=e.up||[0,1,0],l=e.distanceLimits||[0,1/0],c=e.mode||"turntable",u=i(),d=r(),g=a();return u.setDistanceLimits(l[0],l[1]),u.lookAt(0,t,n,s),d.setDistanceLimits(l[0],l[1]),d.lookAt(0,t,n,s),g.setDistanceLimits(l[0],l[1]),g.lookAt(0,t,n,s),new o({turntable:u,orbit:d,matrix:g},c)}s.flush=function(e){for(var t=this._controllerList,n=0;n<t.length;++n)t[n].flush(e)},s.idle=function(e){for(var t=this._controllerList,n=0;n<t.length;++n)t[n].idle(e)},s.lookAt=function(e,t,n,i){for(var r=this._controllerList,a=0;a<r.length;++a)r[a].lookAt(e,t,n,i)},s.rotate=function(e,t,n,i){for(var r=this._controllerList,a=0;a<r.length;++a)r[a].rotate(e,t,n,i)},s.pan=function(e,t,n,i){for(var r=this._controllerList,a=0;a<r.length;++a)r[a].pan(e,t,n,i)},s.translate=function(e,t,n,i){for(var r=this._controllerList,a=0;a<r.length;++a)r[a].translate(e,t,n,i)},s.setMatrix=function(e,t){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].setMatrix(e,t)},s.setDistanceLimits=function(e,t){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].setDistanceLimits(e,t)},s.setDistance=function(e,t){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].setDistance(e,t)},s.recalcMatrix=function(e){this._active.recalcMatrix(e)},s.getDistance=function(e){return this._active.getDistance(e)},s.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},s.lastT=function(){return this._active.lastT()},s.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var n=this._active,i=this._controllerList[t],r=Math.max(n.lastT(),i.lastT());n.recalcMatrix(r),i.setMatrix(r,n.computedMatrix),this._active=i,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(e,t,n){var i="undefined"==typeof WeakMap?e("weak-map"):WeakMap,r=e("gl-buffer"),a=e("gl-vao"),o=new i;function s(e){var t=o.get(e),n=t&&(t._triangleBuffer.handle||t._triangleBuffer.buffer);if(!n||!e.isBuffer(n)){var i=r(e,new Float32Array([-1,-1,-1,4,4,-1]));(t=a(e,[{buffer:i,type:e.FLOAT,size:2}]))._triangleBuffer=i,o.set(e,t)}t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}t.exports=s},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(e,t,n){var i=e("pad-left");function r(e,t,n){t="number"==typeof t?t:1,n=n||": ";var r=e.split(/\r?\n/),a=String(r.length+t-1).length;return r.map((function(e,r){var o=r+t,s=String(o).length;return i(o,a-s)+n+e})).join("\n")}t.exports=r},{"pad-left":264}],10:[function(e,t,n){t.exports=a;var i=e("robust-orientation");function r(e,t){for(var n=new Array(t+1),r=0;r<e.length;++r)n[r]=e[r];for(r=0;r<=e.length;++r){for(var a=e.length;a<=t;++a){for(var o=new Array(t),s=0;s<t;++s)o[s]=Math.pow(a+1-r,s);n[a]=o}if(i.apply(void 0,n))return!0}return!1}function a(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var n=e[0].length,i=[e[0]],a=[0],o=1;o<t;++o)if(i.push(e[o]),r(i,n)){if(a.push(o),a.length===n+1)return a}else i.pop();return a}},{"robust-orientation":284}],11:[function(e,t,n){t.exports=a;var i=e("delaunay-triangulate"),r=e("circumradius");function a(e,t){return i(t).filter((function(n){for(var i=new Array(n.length),a=0;a<n.length;++a)i[a]=t[n[a]];return r(i)*e<1}))}},{circumradius:49,"delaunay-triangulate":63}],12:[function(e,t,n){t.exports=a;var i=e("alpha-complex"),r=e("simplicial-complex-boundary");function a(e,t){return r(i(e,t))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(e,t,n){t.exports=function(e){return atob(e)}},{}],14:[function(e,t,n){t.exports=a;var i=e("robust-linear-solve");function r(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return t}function a(e,t){for(var n=t.length,a=new Array(n+1),o=0;o<n;++o){for(var s=new Array(n+1),l=0;l<=n;++l)s[l]=e[l][o];a[o]=s}for(a[n]=new Array(n+1),o=0;o<=n;++o)a[n][o]=1;var c=new Array(n+1);for(o=0;o<n;++o)c[o]=t[o];c[n]=1;var u=i(a,c),d=r(u[n+1]);0===d&&(d=1);var g=new Array(n+1);for(o=0;o<=n;++o)g[o]=r(u[o])/d;return g}},{"robust-linear-solve":283}],15:[function(e,t,n){var i=e("./lib/rationalize");function r(e,t){return i(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}t.exports=r},{"./lib/rationalize":25}],16:[function(e,t,n){function i(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}t.exports=i},{}],17:[function(e,t,n){var i=e("./lib/rationalize");function r(e,t){return i(e[0].mul(t[1]),e[1].mul(t[0]))}t.exports=r},{"./lib/rationalize":25}],18:[function(e,t,n){var i=e("./is-rat"),r=e("./lib/is-bn"),a=e("./lib/num-to-bn"),o=e("./lib/str-to-bn"),s=e("./lib/rationalize"),l=e("./div");function c(e,t){if(i(e))return t?l(e,c(t)):[e[0].clone(),e[1].clone()];var n,u,d=0;if(r(e))n=e.clone();else if("string"==typeof e)n=o(e);else{if(0===e)return[a(0),a(1)];if(e===Math.floor(e))n=a(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),d-=256;n=a(e)}}if(i(t))n.mul(t[1]),u=t[0].clone();else if(r(t))u=t.clone();else if("string"==typeof t)u=o(t);else if(t)if(t===Math.floor(t))u=a(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),d+=256;u=a(t)}else u=a(1);return d>0?n=n.ushln(d):d<0&&(u=u.ushln(-d)),s(n,u)}t.exports=c},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(e,t,n){var i=e("./lib/is-bn");function r(e){return Array.isArray(e)&&2===e.length&&i(e[0])&&i(e[1])}t.exports=r},{"./lib/is-bn":23}],20:[function(e,t,n){var i=e("bn.js");function r(e){return e.cmp(new i(0))}t.exports=r},{"bn.js":33}],21:[function(e,t,n){var i=e("./bn-sign");function r(e){var t=e.length,n=e.words,r=0;if(1===t)r=n[0];else if(2===t)r=n[0]+67108864*n[1];else for(var a=0;a<t;a++)r+=n[a]*Math.pow(67108864,a);return i(e)*r}t.exports=r},{"./bn-sign":20}],22:[function(e,t,n){var i=e("double-bits"),r=e("bit-twiddle").countTrailingZeros;function a(e){var t=r(i.lo(e));if(t<32)return t;var n=r(i.hi(e));return n>20?52:n+32}t.exports=a},{"bit-twiddle":32,"double-bits":64}],23:[function(e,t,n){function r(e){return e&&"object"===i(e)&&Boolean(e.words)}e("bn.js"),t.exports=r},{"bn.js":33}],24:[function(e,t,n){var i=e("bn.js"),r=e("double-bits");function a(e){var t=r.exponent(e);return t<52?new i(e):new i(e*Math.pow(2,52-t)).ushln(t-52)}t.exports=a},{"bn.js":33,"double-bits":64}],25:[function(e,t,n){var i=e("./num-to-bn"),r=e("./bn-sign");function a(e,t){var n=r(e),a=r(t);if(0===n)return[i(0),i(1)];if(0===a)return[i(0),i(0)];a<0&&(e=e.neg(),t=t.neg());var o=e.gcd(t);return o.cmpn(1)?[e.div(o),t.div(o)]:[e,t]}t.exports=a},{"./bn-sign":20,"./num-to-bn":24}],26:[function(e,t,n){var i=e("bn.js");function r(e){return new i(e)}t.exports=r},{"bn.js":33}],27:[function(e,t,n){var i=e("./lib/rationalize");function r(e,t){return i(e[0].mul(t[0]),e[1].mul(t[1]))}t.exports=r},{"./lib/rationalize":25}],28:[function(e,t,n){var i=e("./lib/bn-sign");function r(e){return i(e[0])*i(e[1])}t.exports=r},{"./lib/bn-sign":20}],29:[function(e,t,n){var i=e("./lib/rationalize");function r(e,t){return i(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}t.exports=r},{"./lib/rationalize":25}],30:[function(e,t,n){var i=e("./lib/bn-to-num"),r=e("./lib/ctz");function a(e){var t=e[0],n=e[1];if(0===t.cmpn(0))return 0;var a=t.abs().divmod(n.abs()),o=a.div,s=i(o),l=a.mod,c=t.negative!==n.negative?-1:1;if(0===l.cmpn(0))return c*s;if(s){var u=r(s)+4;return c*(s+(g=i(l.ushln(u).divRound(n)))*Math.pow(2,-u))}var d=n.bitLength()-l.bitLength()+53,g=i(l.ushln(d).divRound(n));return d<1023?c*g*Math.pow(2,-d):c*(g*=Math.pow(2,-1023))*Math.pow(2,1023-d)}t.exports=a},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(e,t,n){function i(e,t,n,i,r){for(var a=r+1;i<=r;){var o=i+r>>>1,s=e[o];(void 0!==n?n(s,t):s-t)>=0?(a=o,r=o-1):i=o+1}return a}function r(e,t,n,i,r){for(var a=r+1;i<=r;){var o=i+r>>>1,s=e[o];(void 0!==n?n(s,t):s-t)>0?(a=o,r=o-1):i=o+1}return a}function a(e,t,n,i,r){for(var a=i-1;i<=r;){var o=i+r>>>1,s=e[o];(void 0!==n?n(s,t):s-t)<0?(a=o,i=o+1):r=o-1}return a}function o(e,t,n,i,r){for(var a=i-1;i<=r;){var o=i+r>>>1,s=e[o];(void 0!==n?n(s,t):s-t)<=0?(a=o,i=o+1):r=o-1}return a}function s(e,t,n,i,r){for(;i<=r;){var a=i+r>>>1,o=e[a],s=void 0!==n?n(o,t):o-t;if(0===s)return a;s<=0?i=a+1:r=a-1}return-1}function l(e,t,n,i,r,a){return"function"==typeof n?a(e,t,n,void 0===i?0:0|i,void 0===r?e.length-1:0|r):a(e,t,void 0,void 0===n?0:0|n,void 0===i?e.length-1:0|i)}t.exports={ge:function(e,t,n,r,a){return l(e,t,n,r,a,i)},gt:function(e,t,n,i,a){return l(e,t,n,i,a,r)},lt:function(e,t,n,i,r){return l(e,t,n,i,r,a)},le:function(e,t,n,i,r){return l(e,t,n,i,r,o)},eq:function(e,t,n,i,r){return l(e,t,n,i,r,s)}}},{}],32:[function(e,t,n){var i=32;function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}n.INT_BITS=i,n.INT_MAX=2147483647,n.INT_MIN=-1<<i-1,n.sign=function(e){return(e>0)-(e<0)},n.abs=function(e){var t=e>>i-1;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var a=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,i=t,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--r;e[t]=i<<r&255}}(a),n.reverse=function(e){return a[255&e]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]},n.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},n.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},n.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},n.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],33:[function(e,t,n){!function(t,n){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"===i(t)?t.exports=o:n.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:e("buffer").Buffer}catch(e){}function l(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function c(e,t,n){var i=l(e,n);return n-1>=t&&(i|=l(e,n-1)<<4),i}function u(e,t,n,i){for(var r=0,a=Math.min(e.length,n),o=t;o<a;o++){var s=e.charCodeAt(o)-48;r*=i,r+=s>=49?s-49+10:s>=17?s-17+10:s}return r}o.isBN=function(e){return e instanceof o||null!==e&&"object"===i(e)&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"===i(e))return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<e.length&&(16===t?this._parseHex(e,a,n):(this._parseBase(e,t,a),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,a=0,o=0;if("be"===n)for(i=e.length-1;i>=t;i-=2)r=c(e,t,i)<<a,this.words[o]|=67108863&r,a>=18?(a-=18,o+=1,this.words[o]|=r>>>26):a+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)r=c(e,t,i)<<a,this.words[o]|=67108863&r,a>=18?(a-=18,o+=1,this.words[o]|=r>>>26):a+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=t)i++;i--,r=r/t|0;for(var a=e.length-n,o=a%i,s=Math.min(a,a-o)+n,l=0,c=n;c<s;c+=i)l=u(e,c,c+i,t),this.imuln(r),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==o){var d=1;for(l=u(e,c,e.length,t),c=0;c<o;c++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=(e.words[i]&1<<r)>>>r}return t}function p(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],a=0|t.words[0],o=r*a,s=67108863&o,l=o/67108864|0;n.words[0]=s;for(var c=1;c<i;c++){for(var u=l>>>26,d=67108863&l,g=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=g;h++){var f=c-h|0;u+=(o=(r=0|e.words[f])*(a=0|t.words[h])+d)/67108864|0,d=67108863&o}n.words[c]=0|d,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=(16777215&(s<<i|a)).toString(16);n=0!=(a=s>>>24-i&16777215)||o!==this.length-1?d[6-l.length]+l+n:l+n,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(n=a.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=g[e],u=h[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var p=f.modn(u).toString(e);n=(f=f.idivn(u)).isZero()?p+n:d[c-p.length]+p+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===t,c=new e(a),u=this.clone();if(l){for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[s]=o;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-i;s++)c[s]=0;for(s=0;!u.isZero();s++)o=u.andln(255),u.iushrn(8),c[a-s-1]=o}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,a=0;a<i.length;a++)t=(0|n.words[a])+(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<n.length;a++)t=(0|n.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(n=this,i=e):(n=e,i=this);for(var a=0,o=0;o<i.length;o++)a=(t=(0|n.words[o])-(0|i.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<n.length;o++)a=(t=(0|n.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,n){var i,r,a,o=e.words,s=t.words,l=n.words,c=0,u=0|o[0],d=8191&u,g=u>>>13,h=0|o[1],f=8191&h,p=h>>>13,m=0|o[2],v=8191&m,b=m>>>13,y=0|o[3],I=8191&y,C=y>>>13,x=0|o[4],B=8191&x,A=x>>>13,F=0|o[5],Q=8191&F,U=F>>>13,w=0|o[6],G=8191&w,R=w>>>13,L=0|o[7],S=8191&L,V=L>>>13,Z=0|o[8],k=8191&Z,E=Z>>>13,X=0|o[9],N=8191&X,W=X>>>13,_=0|s[0],T=8191&_,M=_>>>13,H=0|s[1],Y=8191&H,D=H>>>13,z=0|s[2],O=8191&z,J=z>>>13,j=0|s[3],P=8191&j,K=j>>>13,q=0|s[4],$=8191&q,ee=q>>>13,te=0|s[5],ne=8191&te,ie=te>>>13,re=0|s[6],ae=8191&re,oe=re>>>13,se=0|s[7],le=8191&se,ce=se>>>13,ue=0|s[8],de=8191&ue,ge=ue>>>13,he=0|s[9],fe=8191&he,pe=he>>>13;n.negative=e.negative^t.negative,n.length=19;var me=(c+(i=Math.imul(d,T))|0)+((8191&(r=(r=Math.imul(d,M))+Math.imul(g,T)|0))<<13)|0;c=((a=Math.imul(g,M))+(r>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(f,T),r=(r=Math.imul(f,M))+Math.imul(p,T)|0,a=Math.imul(p,M);var ve=(c+(i=i+Math.imul(d,Y)|0)|0)+((8191&(r=(r=r+Math.imul(d,D)|0)+Math.imul(g,Y)|0))<<13)|0;c=((a=a+Math.imul(g,D)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(v,T),r=(r=Math.imul(v,M))+Math.imul(b,T)|0,a=Math.imul(b,M),i=i+Math.imul(f,Y)|0,r=(r=r+Math.imul(f,D)|0)+Math.imul(p,Y)|0,a=a+Math.imul(p,D)|0;var be=(c+(i=i+Math.imul(d,O)|0)|0)+((8191&(r=(r=r+Math.imul(d,J)|0)+Math.imul(g,O)|0))<<13)|0;c=((a=a+Math.imul(g,J)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(I,T),r=(r=Math.imul(I,M))+Math.imul(C,T)|0,a=Math.imul(C,M),i=i+Math.imul(v,Y)|0,r=(r=r+Math.imul(v,D)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,D)|0,i=i+Math.imul(f,O)|0,r=(r=r+Math.imul(f,J)|0)+Math.imul(p,O)|0,a=a+Math.imul(p,J)|0;var ye=(c+(i=i+Math.imul(d,P)|0)|0)+((8191&(r=(r=r+Math.imul(d,K)|0)+Math.imul(g,P)|0))<<13)|0;c=((a=a+Math.imul(g,K)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(B,T),r=(r=Math.imul(B,M))+Math.imul(A,T)|0,a=Math.imul(A,M),i=i+Math.imul(I,Y)|0,r=(r=r+Math.imul(I,D)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,D)|0,i=i+Math.imul(v,O)|0,r=(r=r+Math.imul(v,J)|0)+Math.imul(b,O)|0,a=a+Math.imul(b,J)|0,i=i+Math.imul(f,P)|0,r=(r=r+Math.imul(f,K)|0)+Math.imul(p,P)|0,a=a+Math.imul(p,K)|0;var Ie=(c+(i=i+Math.imul(d,$)|0)|0)+((8191&(r=(r=r+Math.imul(d,ee)|0)+Math.imul(g,$)|0))<<13)|0;c=((a=a+Math.imul(g,ee)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(Q,T),r=(r=Math.imul(Q,M))+Math.imul(U,T)|0,a=Math.imul(U,M),i=i+Math.imul(B,Y)|0,r=(r=r+Math.imul(B,D)|0)+Math.imul(A,Y)|0,a=a+Math.imul(A,D)|0,i=i+Math.imul(I,O)|0,r=(r=r+Math.imul(I,J)|0)+Math.imul(C,O)|0,a=a+Math.imul(C,J)|0,i=i+Math.imul(v,P)|0,r=(r=r+Math.imul(v,K)|0)+Math.imul(b,P)|0,a=a+Math.imul(b,K)|0,i=i+Math.imul(f,$)|0,r=(r=r+Math.imul(f,ee)|0)+Math.imul(p,$)|0,a=a+Math.imul(p,ee)|0;var Ce=(c+(i=i+Math.imul(d,ne)|0)|0)+((8191&(r=(r=r+Math.imul(d,ie)|0)+Math.imul(g,ne)|0))<<13)|0;c=((a=a+Math.imul(g,ie)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(G,T),r=(r=Math.imul(G,M))+Math.imul(R,T)|0,a=Math.imul(R,M),i=i+Math.imul(Q,Y)|0,r=(r=r+Math.imul(Q,D)|0)+Math.imul(U,Y)|0,a=a+Math.imul(U,D)|0,i=i+Math.imul(B,O)|0,r=(r=r+Math.imul(B,J)|0)+Math.imul(A,O)|0,a=a+Math.imul(A,J)|0,i=i+Math.imul(I,P)|0,r=(r=r+Math.imul(I,K)|0)+Math.imul(C,P)|0,a=a+Math.imul(C,K)|0,i=i+Math.imul(v,$)|0,r=(r=r+Math.imul(v,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,i=i+Math.imul(f,ne)|0,r=(r=r+Math.imul(f,ie)|0)+Math.imul(p,ne)|0,a=a+Math.imul(p,ie)|0;var xe=(c+(i=i+Math.imul(d,ae)|0)|0)+((8191&(r=(r=r+Math.imul(d,oe)|0)+Math.imul(g,ae)|0))<<13)|0;c=((a=a+Math.imul(g,oe)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(S,T),r=(r=Math.imul(S,M))+Math.imul(V,T)|0,a=Math.imul(V,M),i=i+Math.imul(G,Y)|0,r=(r=r+Math.imul(G,D)|0)+Math.imul(R,Y)|0,a=a+Math.imul(R,D)|0,i=i+Math.imul(Q,O)|0,r=(r=r+Math.imul(Q,J)|0)+Math.imul(U,O)|0,a=a+Math.imul(U,J)|0,i=i+Math.imul(B,P)|0,r=(r=r+Math.imul(B,K)|0)+Math.imul(A,P)|0,a=a+Math.imul(A,K)|0,i=i+Math.imul(I,$)|0,r=(r=r+Math.imul(I,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,i=i+Math.imul(v,ne)|0,r=(r=r+Math.imul(v,ie)|0)+Math.imul(b,ne)|0,a=a+Math.imul(b,ie)|0,i=i+Math.imul(f,ae)|0,r=(r=r+Math.imul(f,oe)|0)+Math.imul(p,ae)|0,a=a+Math.imul(p,oe)|0;var Be=(c+(i=i+Math.imul(d,le)|0)|0)+((8191&(r=(r=r+Math.imul(d,ce)|0)+Math.imul(g,le)|0))<<13)|0;c=((a=a+Math.imul(g,ce)|0)+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(k,T),r=(r=Math.imul(k,M))+Math.imul(E,T)|0,a=Math.imul(E,M),i=i+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,D)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,D)|0,i=i+Math.imul(G,O)|0,r=(r=r+Math.imul(G,J)|0)+Math.imul(R,O)|0,a=a+Math.imul(R,J)|0,i=i+Math.imul(Q,P)|0,r=(r=r+Math.imul(Q,K)|0)+Math.imul(U,P)|0,a=a+Math.imul(U,K)|0,i=i+Math.imul(B,$)|0,r=(r=r+Math.imul(B,ee)|0)+Math.imul(A,$)|0,a=a+Math.imul(A,ee)|0,i=i+Math.imul(I,ne)|0,r=(r=r+Math.imul(I,ie)|0)+Math.imul(C,ne)|0,a=a+Math.imul(C,ie)|0,i=i+Math.imul(v,ae)|0,r=(r=r+Math.imul(v,oe)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,oe)|0,i=i+Math.imul(f,le)|0,r=(r=r+Math.imul(f,ce)|0)+Math.imul(p,le)|0,a=a+Math.imul(p,ce)|0;var Ae=(c+(i=i+Math.imul(d,de)|0)|0)+((8191&(r=(r=r+Math.imul(d,ge)|0)+Math.imul(g,de)|0))<<13)|0;c=((a=a+Math.imul(g,ge)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(N,T),r=(r=Math.imul(N,M))+Math.imul(W,T)|0,a=Math.imul(W,M),i=i+Math.imul(k,Y)|0,r=(r=r+Math.imul(k,D)|0)+Math.imul(E,Y)|0,a=a+Math.imul(E,D)|0,i=i+Math.imul(S,O)|0,r=(r=r+Math.imul(S,J)|0)+Math.imul(V,O)|0,a=a+Math.imul(V,J)|0,i=i+Math.imul(G,P)|0,r=(r=r+Math.imul(G,K)|0)+Math.imul(R,P)|0,a=a+Math.imul(R,K)|0,i=i+Math.imul(Q,$)|0,r=(r=r+Math.imul(Q,ee)|0)+Math.imul(U,$)|0,a=a+Math.imul(U,ee)|0,i=i+Math.imul(B,ne)|0,r=(r=r+Math.imul(B,ie)|0)+Math.imul(A,ne)|0,a=a+Math.imul(A,ie)|0,i=i+Math.imul(I,ae)|0,r=(r=r+Math.imul(I,oe)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,oe)|0,i=i+Math.imul(v,le)|0,r=(r=r+Math.imul(v,ce)|0)+Math.imul(b,le)|0,a=a+Math.imul(b,ce)|0,i=i+Math.imul(f,de)|0,r=(r=r+Math.imul(f,ge)|0)+Math.imul(p,de)|0,a=a+Math.imul(p,ge)|0;var Fe=(c+(i=i+Math.imul(d,fe)|0)|0)+((8191&(r=(r=r+Math.imul(d,pe)|0)+Math.imul(g,fe)|0))<<13)|0;c=((a=a+Math.imul(g,pe)|0)+(r>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(N,Y),r=(r=Math.imul(N,D))+Math.imul(W,Y)|0,a=Math.imul(W,D),i=i+Math.imul(k,O)|0,r=(r=r+Math.imul(k,J)|0)+Math.imul(E,O)|0,a=a+Math.imul(E,J)|0,i=i+Math.imul(S,P)|0,r=(r=r+Math.imul(S,K)|0)+Math.imul(V,P)|0,a=a+Math.imul(V,K)|0,i=i+Math.imul(G,$)|0,r=(r=r+Math.imul(G,ee)|0)+Math.imul(R,$)|0,a=a+Math.imul(R,ee)|0,i=i+Math.imul(Q,ne)|0,r=(r=r+Math.imul(Q,ie)|0)+Math.imul(U,ne)|0,a=a+Math.imul(U,ie)|0,i=i+Math.imul(B,ae)|0,r=(r=r+Math.imul(B,oe)|0)+Math.imul(A,ae)|0,a=a+Math.imul(A,oe)|0,i=i+Math.imul(I,le)|0,r=(r=r+Math.imul(I,ce)|0)+Math.imul(C,le)|0,a=a+Math.imul(C,ce)|0,i=i+Math.imul(v,de)|0,r=(r=r+Math.imul(v,ge)|0)+Math.imul(b,de)|0,a=a+Math.imul(b,ge)|0;var Qe=(c+(i=i+Math.imul(f,fe)|0)|0)+((8191&(r=(r=r+Math.imul(f,pe)|0)+Math.imul(p,fe)|0))<<13)|0;c=((a=a+Math.imul(p,pe)|0)+(r>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,i=Math.imul(N,O),r=(r=Math.imul(N,J))+Math.imul(W,O)|0,a=Math.imul(W,J),i=i+Math.imul(k,P)|0,r=(r=r+Math.imul(k,K)|0)+Math.imul(E,P)|0,a=a+Math.imul(E,K)|0,i=i+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,i=i+Math.imul(G,ne)|0,r=(r=r+Math.imul(G,ie)|0)+Math.imul(R,ne)|0,a=a+Math.imul(R,ie)|0,i=i+Math.imul(Q,ae)|0,r=(r=r+Math.imul(Q,oe)|0)+Math.imul(U,ae)|0,a=a+Math.imul(U,oe)|0,i=i+Math.imul(B,le)|0,r=(r=r+Math.imul(B,ce)|0)+Math.imul(A,le)|0,a=a+Math.imul(A,ce)|0,i=i+Math.imul(I,de)|0,r=(r=r+Math.imul(I,ge)|0)+Math.imul(C,de)|0,a=a+Math.imul(C,ge)|0;var Ue=(c+(i=i+Math.imul(v,fe)|0)|0)+((8191&(r=(r=r+Math.imul(v,pe)|0)+Math.imul(b,fe)|0))<<13)|0;c=((a=a+Math.imul(b,pe)|0)+(r>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,i=Math.imul(N,P),r=(r=Math.imul(N,K))+Math.imul(W,P)|0,a=Math.imul(W,K),i=i+Math.imul(k,$)|0,r=(r=r+Math.imul(k,ee)|0)+Math.imul(E,$)|0,a=a+Math.imul(E,ee)|0,i=i+Math.imul(S,ne)|0,r=(r=r+Math.imul(S,ie)|0)+Math.imul(V,ne)|0,a=a+Math.imul(V,ie)|0,i=i+Math.imul(G,ae)|0,r=(r=r+Math.imul(G,oe)|0)+Math.imul(R,ae)|0,a=a+Math.imul(R,oe)|0,i=i+Math.imul(Q,le)|0,r=(r=r+Math.imul(Q,ce)|0)+Math.imul(U,le)|0,a=a+Math.imul(U,ce)|0,i=i+Math.imul(B,de)|0,r=(r=r+Math.imul(B,ge)|0)+Math.imul(A,de)|0,a=a+Math.imul(A,ge)|0;var we=(c+(i=i+Math.imul(I,fe)|0)|0)+((8191&(r=(r=r+Math.imul(I,pe)|0)+Math.imul(C,fe)|0))<<13)|0;c=((a=a+Math.imul(C,pe)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(N,$),r=(r=Math.imul(N,ee))+Math.imul(W,$)|0,a=Math.imul(W,ee),i=i+Math.imul(k,ne)|0,r=(r=r+Math.imul(k,ie)|0)+Math.imul(E,ne)|0,a=a+Math.imul(E,ie)|0,i=i+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,oe)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,oe)|0,i=i+Math.imul(G,le)|0,r=(r=r+Math.imul(G,ce)|0)+Math.imul(R,le)|0,a=a+Math.imul(R,ce)|0,i=i+Math.imul(Q,de)|0,r=(r=r+Math.imul(Q,ge)|0)+Math.imul(U,de)|0,a=a+Math.imul(U,ge)|0;var Ge=(c+(i=i+Math.imul(B,fe)|0)|0)+((8191&(r=(r=r+Math.imul(B,pe)|0)+Math.imul(A,fe)|0))<<13)|0;c=((a=a+Math.imul(A,pe)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,i=Math.imul(N,ne),r=(r=Math.imul(N,ie))+Math.imul(W,ne)|0,a=Math.imul(W,ie),i=i+Math.imul(k,ae)|0,r=(r=r+Math.imul(k,oe)|0)+Math.imul(E,ae)|0,a=a+Math.imul(E,oe)|0,i=i+Math.imul(S,le)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(V,le)|0,a=a+Math.imul(V,ce)|0,i=i+Math.imul(G,de)|0,r=(r=r+Math.imul(G,ge)|0)+Math.imul(R,de)|0,a=a+Math.imul(R,ge)|0;var Re=(c+(i=i+Math.imul(Q,fe)|0)|0)+((8191&(r=(r=r+Math.imul(Q,pe)|0)+Math.imul(U,fe)|0))<<13)|0;c=((a=a+Math.imul(U,pe)|0)+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(N,ae),r=(r=Math.imul(N,oe))+Math.imul(W,ae)|0,a=Math.imul(W,oe),i=i+Math.imul(k,le)|0,r=(r=r+Math.imul(k,ce)|0)+Math.imul(E,le)|0,a=a+Math.imul(E,ce)|0,i=i+Math.imul(S,de)|0,r=(r=r+Math.imul(S,ge)|0)+Math.imul(V,de)|0,a=a+Math.imul(V,ge)|0;var Le=(c+(i=i+Math.imul(G,fe)|0)|0)+((8191&(r=(r=r+Math.imul(G,pe)|0)+Math.imul(R,fe)|0))<<13)|0;c=((a=a+Math.imul(R,pe)|0)+(r>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(N,le),r=(r=Math.imul(N,ce))+Math.imul(W,le)|0,a=Math.imul(W,ce),i=i+Math.imul(k,de)|0,r=(r=r+Math.imul(k,ge)|0)+Math.imul(E,de)|0,a=a+Math.imul(E,ge)|0;var Se=(c+(i=i+Math.imul(S,fe)|0)|0)+((8191&(r=(r=r+Math.imul(S,pe)|0)+Math.imul(V,fe)|0))<<13)|0;c=((a=a+Math.imul(V,pe)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(N,de),r=(r=Math.imul(N,ge))+Math.imul(W,de)|0,a=Math.imul(W,ge);var Ve=(c+(i=i+Math.imul(k,fe)|0)|0)+((8191&(r=(r=r+Math.imul(k,pe)|0)+Math.imul(E,fe)|0))<<13)|0;c=((a=a+Math.imul(E,pe)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863;var Ze=(c+(i=Math.imul(N,fe))|0)+((8191&(r=(r=Math.imul(N,pe))+Math.imul(W,fe)|0))<<13)|0;return c=((a=Math.imul(W,pe))+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,l[0]=me,l[1]=ve,l[2]=be,l[3]=ye,l[4]=Ie,l[5]=Ce,l[6]=xe,l[7]=Be,l[8]=Ae,l[9]=Fe,l[10]=Qe,l[11]=Ue,l[12]=we,l[13]=Ge,l[14]=Re,l[15]=Le,l[16]=Se,l[17]=Ve,l[18]=Ze,0!==c&&(l[19]=c,n.length++),n};function v(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,a=0;a<n.length-1;a++){var o=r;r=0;for(var s=67108863&i,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),g=67108863&d;s=67108863&(g=g+s|0),r+=(o=(o=o+(d/67108864|0)|0)+(g>>>26)|0)>>>26,o&=67108863}n.words[a]=s,i=o,o=r}return 0!==i?n.words[a]=i:n.length--,n.strip()}function b(e,t,n){return(new y).mulp(e,t,n)}function y(e,t){this.x=e,this.y=t}Math.imul||(m=p),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):n<63?p(this,e,t):n<1024?v(this,e,t):b(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},y.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,r=0;r<t;r++)i|=(1&e)<<t-r-1,e>>=1;return i},y.prototype.permute=function(e,t,n,i,r,a){for(var o=0;o<a;o++)i[o]=t[e[o]],r[o]=n[e[o]]},y.prototype.transform=function(e,t,n,i,r,a){this.permute(a,e,t,n,i,r);for(var o=1;o<r;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<r;u+=s)for(var d=l,g=c,h=0;h<o;h++){var f=n[u+h],p=i[u+h],m=n[u+h+o],v=i[u+h+o],b=d*m-g*v;v=d*v+g*m,m=b,n[u+h]=f+m,i[u+h]=p+v,n[u+h+o]=f-m,i[u+h+o]=p-v,h!==s&&(b=l*d-c*g,g=l*g+c*d,d=b)}},y.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},y.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=e[i];e[i]=e[n-i-1],e[n-i-1]=r,r=t[i],t[i]=-t[n-i-1],t[n-i-1]=-r}},y.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var r=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&r,n=r<67108864?0:r/67108864|0}return e},y.prototype.convert13b=function(e,t,n,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)n[o]=0;r(0===a),r(0==(-8192&a))},y.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},y.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(i),a=this.stub(i),o=new Array(i),s=new Array(i),l=new Array(i),c=new Array(i),u=new Array(i),d=new Array(i),g=n.words;g.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,c,i),this.transform(o,a,s,l,i,r),this.transform(c,a,u,d,i,r);for(var h=0;h<i;h++){var f=s[h]*u[h]-l[h]*d[h];l[h]=s[h]*d[h]+l[h]*u[h],s[h]=f}return this.conjugate(s,l,i),this.transform(s,l,g,a,i,r),this.conjugate(g,a,i),this.normalize13b(g,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),b(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[n]=67108863&a}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=f(e);if(0===t.length)return new o(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var r=n.sqr();i<t.length;i++,r=r.sqr())0!==t[i]&&(n=n.mul(r));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,l=(0|this.words[t])-s<<n;this.words[t]=l|o,o=s>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,l=n;if(i-=o,i=Math.max(0,i),l){for(var c=0;c<o;c++)l.words[c]=this.words[c];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n||!(this.words[n]&i))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,a,o=e.length+n;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+n])+s;var l=(0|e.words[i])*t;s=((a-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=this.length-e.length,i=this.clone(),r=e,a=0|r.words[r.length-1];0!=(n=26-this._countBits(a))&&(r=r.ushln(n),i.iushln(n),a=0|r.words[r.length-1]);var s,l=i.length-r.length;if("mod"!==t){(s=new o(null)).length=l+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=i.clone()._ishlnsubmul(r,1,l);0===u.negative&&(i=u,s&&(s.words[l]=1));for(var d=l-1;d>=0;d--){var g=67108864*(0|i.words[r.length+d])+(0|i.words[r.length+d-1]);for(g=Math.min(g/a|0,67108863),i._ishlnsubmul(r,g,d);0!==i.negative;)g--,i.negative=0,i._ishlnsubmul(r,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=g)}return s&&s.strip(),i.strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),a=n.cmp(i);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),l=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var g=0,h=1;0==(t.words[0]&h)&&g<26;++g,h<<=1);if(g>0)for(t.iushrn(g);g-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(u),a.isub(d)),i.iushrn(1),a.iushrn(1);for(var f=0,p=1;0==(n.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(d)),s.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(s),a.isub(l)):(n.isub(t),s.isub(i),l.isub(a))}return{a:s,b:l,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new o(1),s=new o(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var d=0,g=1;0==(n.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(n.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(s)):(n.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=t.cmp(n);if(r<0){var a=t;t=n,n=a}else if(0===r||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){i<r?t=-1:i>r&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new Q(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var I={k256:null,p224:null,p192:null,p25519:null};function C(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function B(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function F(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Q(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function U(e){Q.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}C.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},C.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},C.prototype.split=function(e,t){e.iushrn(this.n,0,t)},C.prototype.imulK=function(e){return e.imul(this.k)},a(x,C),x.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),r=0;r<i;r++)t.words[r]=e.words[r];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&n,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(o&n)<<4|a>>>22,a=o}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(B,C),a(A,C),a(F,C),F.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(I[e])return I[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new B;else if("p192"===e)t=new A;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new F}return I[e]=t,t},Q.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},Q.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},Q.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},Q.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},Q.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},Q.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},Q.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},Q.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},Q.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},Q.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},Q.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},Q.prototype.isqr=function(e){return this.imul(e,e.clone())},Q.prototype.sqr=function(e){return this.mul(e,e)},Q.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new o(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),g=this.pow(e,i.addn(1).iushrn(1)),h=this.pow(e,i),f=a;0!==h.cmp(s);){for(var p=h,m=0;0!==p.cmp(s);m++)p=p.redSqr();r(m<f);var v=this.pow(d,new o(1).iushln(f-m-1));g=g.redMul(v),d=v.redSqr(),h=h.redMul(d),f=m}return g},Q.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},Q.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=4,i=new Array(1<<n);i[0]=new o(1).toRed(this),i[1]=e;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],e);var a=i[0],s=0,l=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var u=t.words[r],d=c-1;d>=0;d--){var g=u>>d&1;a!==i[0]&&(a=this.sqr(a)),0!==g||0!==s?(s<<=1,s|=g,(++l===n||0===r&&0===d)&&(a=this.mul(a,i[s]),l=0,s=0)):l=0}c=26}return a},Q.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},Q.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new U(e)},a(U,Q),U.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},U.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},U.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},U.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},U.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{buffer:2}],34:[function(e,t,n){function i(e){var t,n,i,r=e.length,a=0;for(t=0;t<r;++t)a+=e[t].length;var o=new Array(a),s=0;for(t=0;t<r;++t){var l=e[t],c=l.length;for(n=0;n<c;++n){var u=o[s++]=new Array(c-1),d=0;for(i=0;i<c;++i)i!==n&&(u[d++]=l[i]);if(1&n){var g=u[1];u[1]=u[0],u[0]=g}}}return o}t.exports=i},{}],35:[function(e,t,n){t.exports=h;var i,r=e("typedarray-pool"),a=e("./lib/sweep"),o=e("./lib/intersect");function s(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function l(e,t,n,i){for(var r=0,a=0,o=0,l=e.length;o<l;++o){var c=e[o];if(!s(t,c)){for(var u=0;u<2*t;++u)n[r++]=c[u];i[a++]=o}}return a}function c(e,t,n,i){var s=e.length,c=t.length;if(!(s<=0||c<=0)){var u=e[0].length>>>1;if(!(u<=0)){var d,g=r.mallocDouble(2*u*s),h=r.mallocInt32(s);if((s=l(e,u,g,h))>0){if(1===u&&i)a.init(s),d=a.sweepComplete(u,n,0,s,g,h,0,s,g,h);else{var f=r.mallocDouble(2*u*c),p=r.mallocInt32(c);(c=l(t,u,f,p))>0&&(a.init(s+c),d=1===u?a.sweepBipartite(u,n,0,s,g,h,0,c,f,p):o(u,n,i,s,g,h,c,f,p),r.free(f),r.free(p))}r.free(g),r.free(h)}return d}}}function u(e,t){i.push([e,t])}function d(e){return i=[],c(e,e,u,!0),i}function g(e,t){return i=[],c(e,t,u,!1),i}function h(e,t,n){switch(arguments.length){case 1:return d(e);case 2:return"function"==typeof t?c(e,e,t,!0):g(e,t);case 3:return c(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(e,t,n){function i(){function e(e,t,n,i,r,a,o,s,l,c,u){for(var d=2*e,g=i,h=d*i;g<r;++g,h+=d){var f=a[t+h],p=a[t+h+e],m=o[g];e:for(var v=s,b=d*s;v<l;++v,b+=d){var y=c[t+b],I=c[t+b+e],C=u[v];if(!(I<f||p<y)){for(var x=t+1;x<e;++x){var B=a[x+h],A=a[x+e+h],F=c[x+b],Q=c[x+e+b];if(A<F||Q<B)continue e}var U=n(m,C);if(void 0!==U)return U}}}}function t(e,t,n,i,r,a,o,s,l,c,u){for(var d=2*e,g=s,h=d*s;g<l;++g,h+=d){var f=c[t+h],p=c[t+h+e],m=u[g];e:for(var v=i,b=d*i;v<r;++v,b+=d){var y=a[t+b],I=a[t+b+e],C=o[v];if(!(p<y||I<f)){for(var x=t+1;x<e;++x){var B=a[x+b],A=a[x+e+b],F=c[x+h],Q=c[x+e+h];if(A<F||Q<B)continue e}var U=n(C,m);if(void 0!==U)return U}}}}function n(n,i,r,a,o,s,l,c,u,d,g){return o-a>u-c?e(n,i,r,a,o,s,l,c,u,d,g):t(n,i,r,a,o,s,l,c,u,d,g)}return n}function r(){function e(e,t,n,i,r,a,o,s,l,c,u){for(var d=2*e,g=i,h=d*i;g<r;++g,h+=d){var f=a[t+h],p=a[t+h+e],m=o[g];e:for(var v=s,b=d*s;v<l;++v,b+=d){var y=c[t+b],I=u[v];if(!(y<=f||p<y)){for(var C=t+1;C<e;++C){var x=a[C+h],B=a[C+e+h],A=c[C+b],F=c[C+e+b];if(B<A||F<x)continue e}var Q=n(I,m);if(void 0!==Q)return Q}}}}function t(e,t,n,i,r,a,o,s,l,c,u){for(var d=2*e,g=i,h=d*i;g<r;++g,h+=d){var f=a[t+h],p=a[t+h+e],m=o[g];e:for(var v=s,b=d*s;v<l;++v,b+=d){var y=c[t+b],I=u[v];if(!(y<f||p<y)){for(var C=t+1;C<e;++C){var x=a[C+h],B=a[C+e+h],A=c[C+b],F=c[C+e+b];if(B<A||F<x)continue e}var Q=n(m,I);if(void 0!==Q)return Q}}}}function n(e,t,n,i,r,a,o,s,l,c,u){for(var d=2*e,g=s,h=d*s;g<l;++g,h+=d){var f=c[t+h],p=u[g];e:for(var m=i,v=d*i;m<r;++m,v+=d){var b=a[t+v],y=a[t+v+e],I=o[m];if(!(f<=b||y<f)){for(var C=t+1;C<e;++C){var x=a[C+v],B=a[C+e+v],A=c[C+h],F=c[C+e+h];if(B<A||F<x)continue e}var Q=n(p,I);if(void 0!==Q)return Q}}}}function i(e,t,n,i,r,a,o,s,l,c,u){for(var d=2*e,g=s,h=d*s;g<l;++g,h+=d){var f=c[t+h],p=u[g];e:for(var m=i,v=d*i;m<r;++m,v+=d){var b=a[t+v],y=a[t+v+e],I=o[m];if(!(f<b||y<f)){for(var C=t+1;C<e;++C){var x=a[C+v],B=a[C+e+v],A=c[C+h],F=c[C+e+h];if(B<A||F<x)continue e}var Q=n(I,p);if(void 0!==Q)return Q}}}}function r(r,a,o,s,l,c,u,d,g,h,f,p){return c-l>h-g?s?e(r,a,o,l,c,u,d,g,h,f,p):t(r,a,o,l,c,u,d,g,h,f,p):s?n(r,a,o,l,c,u,d,g,h,f,p):i(r,a,o,l,c,u,d,g,h,f,p)}return r}function a(e){return e?i():r()}n.partial=a(!1),n.full=a(!0)},{}],37:[function(e,t,n){t.exports=G;var i=e("typedarray-pool"),r=e("bit-twiddle"),a=e("./brute"),o=a.partial,s=a.full,l=e("./sweep"),c=e("./median"),u=e("./partition"),d=128,g=1<<22,h=1<<22,f=u("!(lo>=p0)&&!(p1>=hi)"),p=u("lo===p0"),m=u("lo<p0"),v=u("hi<=p0"),b=u("lo<=p0&&p0<=hi"),y=u("lo<p0&&p0<=hi"),I=6,C=2,x=1024,B=i.mallocInt32(x),A=i.mallocDouble(x);function F(e,t){var n=8*r.log2(t+1)*(e+1)|0,a=r.nextPow2(I*n);B.length<a&&(i.free(B),B=i.mallocInt32(a));var o=r.nextPow2(C*n);A.length<o&&(i.free(A),A=i.mallocDouble(o))}function Q(e,t,n,i,r,a,o,s,l){var c=I*e;B[c]=t,B[c+1]=n,B[c+2]=i,B[c+3]=r,B[c+4]=a,B[c+5]=o;var u=C*e;A[u]=s,A[u+1]=l}function U(e,t,n,i,r,a,o,s,l,c,u){var d=2*e,g=l*d,h=c[g+t];e:for(var f=r,p=r*d;f<a;++f,p+=d){var m=o[p+t],v=o[p+t+e];if(!(h<m||v<h||i&&h===m)){for(var b,y=s[f],I=t+1;I<e;++I){m=o[p+I],v=o[p+I+e];var C=c[g+I],x=c[g+I+e];if(v<C||x<m)continue e}if(void 0!==(b=i?n(u,y):n(y,u)))return b}}}function w(e,t,n,i,r,a,o,s,l,c){var u=2*e,d=s*u,g=l[d+t];e:for(var h=i,f=i*u;h<r;++h,f+=u){var p=o[h];if(p!==c){var m=a[f+t],v=a[f+t+e];if(!(g<m||v<g)){for(var b=t+1;b<e;++b){m=a[f+b],v=a[f+b+e];var y=l[d+b],I=l[d+b+e];if(v<y||I<m)continue e}var C=n(p,c);if(void 0!==C)return C}}}}function G(e,t,n,i,r,a,u,x,G){F(e,i+u);var R,L=0,S=2*e;for(Q(L++,0,0,i,0,u,n?16:0,-1/0,1/0),n||Q(L++,0,0,u,0,i,1,-1/0,1/0);L>0;){var V=(L-=1)*I,Z=B[V],k=B[V+1],E=B[V+2],X=B[V+3],N=B[V+4],W=B[V+5],_=L*C,T=A[_],M=A[_+1],H=1&W,Y=!!(16&W),D=r,z=a,O=x,J=G;if(H&&(D=x,z=G,O=r,J=a),!(2&W&&k>=(E=m(e,Z,k,E,D,z,M))||4&W&&(k=v(e,Z,k,E,D,z,T))>=E)){var j=E-k,P=N-X;if(Y){if(e*j*(j+P)<h){if(void 0!==(R=l.scanComplete(e,Z,t,k,E,D,z,X,N,O,J)))return R;continue}}else{if(e*Math.min(j,P)<d){if(void 0!==(R=o(e,Z,t,H,k,E,D,z,X,N,O,J)))return R;continue}if(e*j*P<g){if(void 0!==(R=l.scanBipartite(e,Z,t,H,k,E,D,z,X,N,O,J)))return R;continue}}var K=f(e,Z,k,E,D,z,T,M);if(k<K)if(e*(K-k)<d){if(void 0!==(R=s(e,Z+1,t,k,K,D,z,X,N,O,J)))return R}else if(Z===e-2){if(void 0!==(R=H?l.sweepBipartite(e,t,X,N,O,J,k,K,D,z):l.sweepBipartite(e,t,k,K,D,z,X,N,O,J)))return R}else Q(L++,Z+1,k,K,X,N,H,-1/0,1/0),Q(L++,Z+1,X,N,k,K,1^H,-1/0,1/0);if(K<E){var q=c(e,Z,X,N,O,J),$=O[S*q+Z],ee=p(e,Z,q,N,O,J,$);if(ee<N&&Q(L++,Z,K,E,ee,N,(4|H)+(Y?16:0),$,M),X<q&&Q(L++,Z,K,E,X,q,(2|H)+(Y?16:0),T,$),q+1===ee){if(void 0!==(R=Y?w(e,Z,t,K,E,D,z,q,O,J[q]):U(e,Z,t,H,K,E,D,z,q,O,J[q])))return R}else if(q<ee){var te;if(Y){if(K<(te=b(e,Z,K,E,D,z,$))){var ne=p(e,Z,K,te,D,z,$);if(Z===e-2){if(K<ne&&void 0!==(R=l.sweepComplete(e,t,K,ne,D,z,q,ee,O,J)))return R;if(ne<te&&void 0!==(R=l.sweepBipartite(e,t,ne,te,D,z,q,ee,O,J)))return R}else K<ne&&Q(L++,Z+1,K,ne,q,ee,16,-1/0,1/0),ne<te&&(Q(L++,Z+1,ne,te,q,ee,0,-1/0,1/0),Q(L++,Z+1,q,ee,ne,te,1,-1/0,1/0))}}else K<(te=H?y(e,Z,K,E,D,z,$):b(e,Z,K,E,D,z,$))&&(Z===e-2?R=H?l.sweepBipartite(e,t,q,ee,O,J,K,te,D,z):l.sweepBipartite(e,t,K,te,D,z,q,ee,O,J):(Q(L++,Z+1,K,te,q,ee,H,-1/0,1/0),Q(L++,Z+1,q,ee,K,te,1^H,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(e,t,n){t.exports=o;var i=e("./partition")("lo<p0"),r=8;function a(e,t,n,i,r,a){for(var o=2*e,s=o*(n+1)+t,l=n+1;l<i;++l,s+=o)for(var c=r[s],u=l,d=o*(l-1);u>n&&r[d+t]>c;--u,d-=o){for(var g=d,h=d+o,f=0;f<o;++f,++g,++h){var p=r[g];r[g]=r[h],r[h]=p}var m=a[u];a[u]=a[u-1],a[u-1]=m}}function o(e,t,n,o,s,l){if(o<=n+1)return n;for(var c=n,u=o,d=o+n>>>1,g=2*e,h=d,f=s[g*d+t];c<u;){if(u-c<r){a(e,t,c,u,s,l),f=s[g*d+t];break}var p=u-c,m=Math.random()*p+c|0,v=s[g*m+t],b=Math.random()*p+c|0,y=s[g*b+t],I=Math.random()*p+c|0,C=s[g*I+t];v<=y?C>=y?(h=b,f=y):v>=C?(h=m,f=v):(h=I,f=C):y>=C?(h=b,f=y):C>=v?(h=m,f=v):(h=I,f=C);for(var x=g*(u-1),B=g*h,A=0;A<g;++A,++x,++B){var F=s[x];s[x]=s[B],s[B]=F}var Q=l[u-1];for(l[u-1]=l[h],l[h]=Q,x=g*(u-1),B=g*(h=i(e,t,c,u-1,s,l,f)),A=0;A<g;++A,++x,++B)F=s[x],s[x]=s[B],s[B]=F;if(Q=l[u-1],l[u-1]=l[h],l[h]=Q,d<h){for(u=h-1;c<u&&s[g*(u-1)+t]===f;)u-=1;u+=1}else{if(!(h<d))break;for(c=h+1;c<u&&s[g*c+t]===f;)c+=1}}return i(e,t,n,d,s,l,s[g*d+t])}},{"./partition":39}],39:[function(e,t,n){t.exports=r;var i={"lo===p0":a,"lo<p0":o,"lo<=p0":s,"hi<=p0":l,"lo<p0&&p0<=hi":u,"lo<=p0&&p0<=hi":c,"!(lo>=p0)&&!(p1>=hi)":d};function r(e){return i[e]}function a(e,t,n,i,r,a,o){for(var s=2*e,l=s*n,c=l,u=n,d=t,g=n;i>g;++g,l+=s)if(r[l+d]===o)if(u===g)u+=1,c+=s;else{for(var h=0;s>h;++h){var f=r[l+h];r[l+h]=r[c],r[c++]=f}var p=a[g];a[g]=a[u],a[u++]=p}return u}function o(e,t,n,i,r,a,o){for(var s=2*e,l=s*n,c=l,u=n,d=t,g=n;i>g;++g,l+=s)if(r[l+d]<o)if(u===g)u+=1,c+=s;else{for(var h=0;s>h;++h){var f=r[l+h];r[l+h]=r[c],r[c++]=f}var p=a[g];a[g]=a[u],a[u++]=p}return u}function s(e,t,n,i,r,a,o){for(var s=2*e,l=s*n,c=l,u=n,d=e+t,g=n;i>g;++g,l+=s)if(r[l+d]<=o)if(u===g)u+=1,c+=s;else{for(var h=0;s>h;++h){var f=r[l+h];r[l+h]=r[c],r[c++]=f}var p=a[g];a[g]=a[u],a[u++]=p}return u}function l(e,t,n,i,r,a,o){for(var s=2*e,l=s*n,c=l,u=n,d=e+t,g=n;i>g;++g,l+=s)if(r[l+d]<=o)if(u===g)u+=1,c+=s;else{for(var h=0;s>h;++h){var f=r[l+h];r[l+h]=r[c],r[c++]=f}var p=a[g];a[g]=a[u],a[u++]=p}return u}function c(e,t,n,i,r,a,o){for(var s=2*e,l=s*n,c=l,u=n,d=t,g=e+t,h=n;i>h;++h,l+=s){var f=r[l+d],p=r[l+g];if(f<=o&&o<=p)if(u===h)u+=1,c+=s;else{for(var m=0;s>m;++m){var v=r[l+m];r[l+m]=r[c],r[c++]=v}var b=a[h];a[h]=a[u],a[u++]=b}}return u}function u(e,t,n,i,r,a,o){for(var s=2*e,l=s*n,c=l,u=n,d=t,g=e+t,h=n;i>h;++h,l+=s){var f=r[l+d],p=r[l+g];if(f<o&&o<=p)if(u===h)u+=1,c+=s;else{for(var m=0;s>m;++m){var v=r[l+m];r[l+m]=r[c],r[c++]=v}var b=a[h];a[h]=a[u],a[u++]=b}}return u}function d(e,t,n,i,r,a,o,s){for(var l=2*e,c=l*n,u=c,d=n,g=t,h=e+t,f=n;i>f;++f,c+=l){var p=r[c+g],m=r[c+h];if(!(p>=o||s>=m))if(d===f)d+=1,u+=l;else{for(var v=0;l>v;++v){var b=r[c+v];r[c+v]=r[u],r[u++]=b}var y=a[f];a[f]=a[d],a[d++]=y}}return d}},{}],40:[function(e,t,n){t.exports=r;var i=32;function r(e,t){t<=4*i?a(0,t-1,e):g(0,t-1,e)}function a(e,t,n){for(var i=2*(e+1),r=e+1;r<=t;++r){for(var a=n[i++],o=n[i++],s=r,l=i-2;s-- >e;){var c=n[l-2],u=n[l-1];if(c<a)break;if(c===a&&u<o)break;n[l]=c,n[l+1]=u,l-=2}n[l]=a,n[l+1]=o}}function o(e,t,n){t*=2;var i=n[e*=2],r=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=i,n[t+1]=r}function s(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function l(e,t,n,i){t*=2,n*=2;var r=i[e*=2],a=i[e+1];i[e]=i[t],i[e+1]=i[t+1],i[t]=i[n],i[t+1]=i[n+1],i[n]=r,i[n+1]=a}function c(e,t,n,i,r){t*=2,r[e*=2]=r[t],r[t]=n,r[e+1]=r[t+1],r[t+1]=i}function u(e,t,n){t*=2;var i=n[e*=2],r=n[t];return!(i<r)&&(i!==r||n[e+1]>n[t+1])}function d(e,t,n,i){var r=i[e*=2];return r<t||r===t&&i[e+1]<n}function g(e,t,n){var r=(t-e+1)/6|0,h=e+r,f=t-r,p=e+t>>1,m=p-r,v=p+r,b=h,y=m,I=p,C=v,x=f,B=e+1,A=t-1,F=0;u(b,y,n)&&(F=b,b=y,y=F),u(C,x,n)&&(F=C,C=x,x=F),u(b,I,n)&&(F=b,b=I,I=F),u(y,I,n)&&(F=y,y=I,I=F),u(b,C,n)&&(F=b,b=C,C=F),u(I,C,n)&&(F=I,I=C,C=F),u(y,x,n)&&(F=y,y=x,x=F),u(y,I,n)&&(F=y,y=I,I=F),u(C,x,n)&&(F=C,C=x,x=F);for(var Q=n[2*y],U=n[2*y+1],w=n[2*C],G=n[2*C+1],R=2*b,L=2*I,S=2*x,V=2*h,Z=2*p,k=2*f,E=0;E<2;++E){var X=n[R+E],N=n[L+E],W=n[S+E];n[V+E]=X,n[Z+E]=N,n[k+E]=W}s(m,e,n),s(v,t,n);for(var _=B;_<=A;++_)if(d(_,Q,U,n))_!==B&&o(_,B,n),++B;else if(!d(_,w,G,n))for(;;){if(d(A,w,G,n)){d(A,Q,U,n)?(l(_,B,A,n),++B,--A):(o(_,A,n),--A);break}if(--A<_)break}c(e,B-1,Q,U,n),c(t,A+1,w,G,n),B-2-e<=i?a(e,B-2,n):g(e,B-2,n),t-(A+2)<=i?a(A+2,t,n):g(A+2,t,n),A-B<=i?a(B,A,n):g(B,A,n)}},{}],41:[function(e,t,n){t.exports={init:p,sweepBipartite:b,sweepComplete:y,scanBipartite:I,scanComplete:C};var i=e("typedarray-pool"),r=e("bit-twiddle"),a=e("./sort"),o=1<<28,s=1024,l=i.mallocInt32(s),c=i.mallocInt32(s),u=i.mallocInt32(s),d=i.mallocInt32(s),g=i.mallocInt32(s),h=i.mallocInt32(s),f=i.mallocDouble(8*s);function p(e){var t=r.nextPow2(e);l.length<t&&(i.free(l),l=i.mallocInt32(t)),c.length<t&&(i.free(c),c=i.mallocInt32(t)),u.length<t&&(i.free(u),u=i.mallocInt32(t)),d.length<t&&(i.free(d),d=i.mallocInt32(t)),g.length<t&&(i.free(g),g=i.mallocInt32(t)),h.length<t&&(i.free(h),h=i.mallocInt32(t));var n=8*t;f.length<n&&(i.free(f),f=i.mallocDouble(n))}function m(e,t,n,i){var r=t[i],a=e[n-1];e[r]=a,t[a]=r}function v(e,t,n,i){e[n]=i,t[i]=n}function b(e,t,n,i,r,s,g,h,p,b){for(var y=0,I=2*e,C=e-1,x=I-1,B=n;B<i;++B){var A=s[B],F=I*B;f[y++]=r[F+C],f[y++]=-(A+1),f[y++]=r[F+x],f[y++]=A}for(B=g;B<h;++B){A=b[B]+o;var Q=I*B;f[y++]=p[Q+C],f[y++]=-A,f[y++]=p[Q+x],f[y++]=A}var U=y>>>1;a(f,U);var w=0,G=0;for(B=0;B<U;++B){var R=0|f[2*B+1];if(R>=o)m(u,d,G--,R=R-o|0);else if(R>=0)m(l,c,w--,R);else if(R<=-o){R=-R-o|0;for(var L=0;L<w;++L)if(void 0!==(S=t(l[L],R)))return S;v(u,d,G++,R)}else{for(R=-R-1|0,L=0;L<G;++L){var S;if(void 0!==(S=t(R,u[L])))return S}v(l,c,w++,R)}}}function y(e,t,n,i,r,o,s,p,b,y){for(var I=0,C=2*e,x=e-1,B=C-1,A=n;A<i;++A){var F=o[A]+1<<1,Q=C*A;f[I++]=r[Q+x],f[I++]=-F,f[I++]=r[Q+B],f[I++]=F}for(A=s;A<p;++A){F=y[A]+1<<1;var U=C*A;f[I++]=b[U+x],f[I++]=1|-F,f[I++]=b[U+B],f[I++]=1|F}var w=I>>>1;a(f,w);var G=0,R=0,L=0;for(A=0;A<w;++A){var S=0|f[2*A+1],V=1&S;if(A<w-1&&S>>1==f[2*A+3]>>1&&(V=2,A+=1),S<0){for(var Z=-(S>>1)-1,k=0;k<L;++k)if(void 0!==(E=t(g[k],Z)))return E;if(0!==V)for(k=0;k<G;++k)if(void 0!==(E=t(l[k],Z)))return E;if(1!==V)for(k=0;k<R;++k){var E;if(void 0!==(E=t(u[k],Z)))return E}0===V?v(l,c,G++,Z):1===V?v(u,d,R++,Z):2===V&&v(g,h,L++,Z)}else Z=(S>>1)-1,0===V?m(l,c,G--,Z):1===V?m(u,d,R--,Z):2===V&&m(g,h,L--,Z)}}function I(e,t,n,i,r,s,u,d,g,h,p,b){var y=0,I=2*e,C=t,x=t+e,B=1,A=1;i?A=o:B=o;for(var F=r;F<s;++F){var Q=F+B,U=I*F;f[y++]=u[U+C],f[y++]=-Q,f[y++]=u[U+x],f[y++]=Q}for(F=g;F<h;++F){Q=F+A;var w=I*F;f[y++]=p[w+C],f[y++]=-Q}var G=y>>>1;a(f,G);var R=0;for(F=0;F<G;++F){var L=0|f[2*F+1];if(L<0){var S=!1;if((Q=-L)>=o?(S=!i,Q-=o):(S=!!i,Q-=1),S)v(l,c,R++,Q);else{var V=b[Q],Z=I*Q,k=p[Z+t+1],E=p[Z+t+1+e];e:for(var X=0;X<R;++X){var N=l[X],W=I*N;if(!(E<u[W+t+1]||u[W+t+1+e]<k)){for(var _=t+2;_<e;++_)if(p[Z+_+e]<u[W+_]||u[W+_+e]<p[Z+_])continue e;var T,M=d[N];if(void 0!==(T=i?n(V,M):n(M,V)))return T}}}}else m(l,c,R--,L-B)}}function C(e,t,n,i,r,s,c,u,d,g,h){for(var p=0,m=2*e,v=t,b=t+e,y=i;y<r;++y){var I=y+o,C=m*y;f[p++]=s[C+v],f[p++]=-I,f[p++]=s[C+b],f[p++]=I}for(y=u;y<d;++y){I=y+1;var x=m*y;f[p++]=g[x+v],f[p++]=-I}var B=p>>>1;a(f,B);var A=0;for(y=0;y<B;++y){var F=0|f[2*y+1];if(F<0)if((I=-F)>=o)l[A++]=I-o;else{var Q=h[I-=1],U=m*I,w=g[U+t+1],G=g[U+t+1+e];e:for(var R=0;R<A;++R){var L=l[R],S=c[L];if(S===Q)break;var V=m*L;if(!(G<s[V+t+1]||s[V+t+1+e]<w)){for(var Z=t+2;Z<e;++Z)if(g[U+Z+e]<s[V+Z]||s[V+Z+e]<g[U+Z])continue e;var k=n(S,Q);if(void 0!==k)return k}}}else{for(I=F-o,R=A-1;R>=0;--R)if(l[R]===I){for(Z=R+1;Z<A;++Z)l[Z-1]=l[Z];break}--A}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(e,t,n){var i=e("./lib/monotone"),r=e("./lib/triangulation"),a=e("./lib/delaunay"),o=e("./lib/filter");function s(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function c(e){return e.map(s).sort(l)}function u(e,t,n){return t in e?e[t]:n}function d(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var s=!!u(n,"delaunay",!0),l=!!u(n,"interior",!0),d=!!u(n,"exterior",!0),g=!!u(n,"infinity",!1);if(!l&&!d||0===e.length)return[];var h=i(e,t);if(s||l!==d||g){for(var f=r(e.length,c(t)),p=0;p<h.length;++p){var m=h[p];f.addTriangle(m[0],m[1],m[2])}return s&&a(e,f),d?l?g?o(f,0,g):f.cells():o(f,1,g):o(f,-1)}return h}t.exports=d},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(e,t,n){var i=e("robust-in-sphere")[4];function r(e,t,n,r,a,o){var s=t.opposite(r,a);if(!(s<0)){if(a<r){var l=r;r=a,a=l,l=o,o=s,s=l}t.isConstraint(r,a)||i(e[r],e[a],e[o],e[s])<0&&n.push(r,a)}}function a(e,t){for(var n=[],a=e.length,o=t.stars,s=0;s<a;++s)for(var l=o[s],c=1;c<l.length;c+=2)if(!((h=l[c])<s||t.isConstraint(s,h))){for(var u=l[c-1],d=-1,g=1;g<l.length;g+=2)if(l[g-1]===h){d=l[g];break}d<0||i(e[s],e[h],e[u],e[d])<0&&n.push(s,h)}for(;n.length>0;){for(var h=n.pop(),f=(u=-1,d=-1,l=o[s=n.pop()],1);f<l.length;f+=2){var p=l[f-1],m=l[f];p===h?d=m:m===h&&(u=p)}u<0||d<0||i(e[s],e[h],e[u],e[d])>=0||(t.flip(s,h),r(e,t,n,u,s,d),r(e,t,n,s,d,u),r(e,t,n,d,h,u),r(e,t,n,h,u,d))}}e("binary-search-bounds"),t.exports=a},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(e,t,n){var i,r=e("binary-search-bounds");function a(e,t,n,i,r,a,o){this.cells=e,this.neighbor=t,this.flags=i,this.constraint=n,this.active=r,this.next=a,this.boundary=o}function o(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}function s(e,t){for(var n=e.cells(),i=n.length,r=0;r<i;++r){var s=(v=n[r])[0],l=v[1],c=v[2];l<c?l<s&&(v[0]=l,v[1]=c,v[2]=s):c<s&&(v[0]=c,v[1]=s,v[2]=l)}n.sort(o);var u=new Array(i);for(r=0;r<u.length;++r)u[r]=0;var d=[],g=[],h=new Array(3*i),f=new Array(3*i),p=null;t&&(p=[]);var m=new a(n,h,f,u,d,g,p);for(r=0;r<i;++r)for(var v=n[r],b=0;b<3;++b){s=v[b],l=v[(b+1)%3];var y=h[3*r+b]=m.locate(l,s,e.opposite(l,s)),I=f[3*r+b]=e.isConstraint(s,l);y<0&&(I?g.push(r):(d.push(r),u[r]=1),t&&p.push([l,s,-1]))}return m}function l(e,t,n){for(var i=0,r=0;r<e.length;++r)t[r]===n&&(e[i++]=e[r]);return e.length=i,e}function c(e,t,n){var i=s(e,n);if(0===t)return n?i.cells.concat(i.boundary):i.cells;for(var r=1,a=i.active,o=i.next,c=i.flags,u=i.cells,d=i.constraint,g=i.neighbor;a.length>0||o.length>0;){for(;a.length>0;){var h=a.pop();if(c[h]!==-r){c[h]=r,u[h];for(var f=0;f<3;++f){var p=g[3*h+f];p>=0&&0===c[p]&&(d[3*h+f]?o.push(p):(a.push(p),c[p]=r))}}}var m=o;o=a,a=m,o.length=0,r=-r}var v=l(u,c,t);return n?v.concat(i.boundary):v}t.exports=c,a.prototype.locate=(i=[0,0,0],function(e,t,n){var a=e,s=t,l=n;return t<n?t<e&&(a=t,s=n,l=e):n<e&&(a=n,s=e,l=t),a<0?-1:(i[0]=a,i[1]=s,i[2]=l,r.eq(this.cells,i,o))})},{"binary-search-bounds":31}],45:[function(e,t,n){var i=e("binary-search-bounds"),r=e("robust-orientation")[3],a=0,o=1,s=2;function l(e,t,n,i,r){this.a=e,this.b=t,this.idx=n,this.lowerIds=i,this.upperIds=r}function c(e,t,n,i){this.a=e,this.b=t,this.type=n,this.idx=i}function u(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n||(e.type!==a&&(n=r(e.a,e.b,t.b))?n:e.idx-t.idx)}function d(e,t){return r(e.a,e.b,t)}function g(e,t,n,a,o){for(var s=i.lt(t,a,d),l=i.gt(t,a,d),c=s;c<l;++c){for(var u=t[c],g=u.lowerIds,h=g.length;h>1&&r(n[g[h-2]],n[g[h-1]],a)>0;)e.push([g[h-1],g[h-2],o]),h-=1;g.length=h,g.push(o);var f=u.upperIds;for(h=f.length;h>1&&r(n[f[h-2]],n[f[h-1]],a)<0;)e.push([f[h-2],f[h-1],o]),h-=1;f.length=h,f.push(o)}}function h(e,t){var n;return(n=e.a[0]<t.a[0]?r(e.a,e.b,t.a):r(t.b,t.a,e.a))?n:(n=t.b[0]<e.b[0]?r(e.a,e.b,t.b):r(t.b,t.a,e.b))||e.idx-t.idx}function f(e,t,n){var r=i.le(e,n,h),a=e[r],o=a.upperIds,s=o[o.length-1];a.upperIds=[s],e.splice(r+1,0,new l(n.a,n.b,n.idx,[s],o))}function p(e,t,n){var r=n.a;n.a=n.b,n.b=r;var a=i.eq(e,n,h),o=e[a];e[a-1].upperIds=o.upperIds,e.splice(a,1)}function m(e,t){for(var n=e.length,i=t.length,r=[],d=0;d<n;++d)r.push(new c(e[d],null,a,d));for(d=0;d<i;++d){var h=t[d],m=e[h[0]],v=e[h[1]];m[0]<v[0]?r.push(new c(m,v,s,d),new c(v,m,o,d)):m[0]>v[0]&&r.push(new c(v,m,s,d),new c(m,v,o,d))}r.sort(u);for(var b=r[0].a[0]-(1+Math.abs(r[0].a[0]))*Math.pow(2,-52),y=[new l([b,1],[b,0],-1,[],[],[],[])],I=[],C=(d=0,r.length);d<C;++d){var x=r[d],B=x.type;B===a?g(I,y,e,x.a,x.idx):B===s?f(y,e,x):p(y,e,x)}return I}t.exports=m},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(e,t,n){var i=e("binary-search-bounds");function r(e,t){this.stars=e,this.edges=t}t.exports=s;var a=r.prototype;function o(e,t,n){for(var i=1,r=e.length;i<r;i+=2)if(e[i-1]===t&&e[i]===n)return e[i-1]=e[r-2],e[i]=e[r-1],void(e.length=r-2)}function s(e,t){for(var n=new Array(e),i=0;i<e;++i)n[i]=[];return new r(n,t)}a.isConstraint=function(){var e=[0,0];function t(e,t){return e[0]-t[0]||e[1]-t[1]}return function(n,r){return e[0]=Math.min(n,r),e[1]=Math.max(n,r),i.eq(this.edges,e,t)>=0}}(),a.removeTriangle=function(e,t,n){var i=this.stars;o(i[e],t,n),o(i[t],n,e),o(i[n],e,t)},a.addTriangle=function(e,t,n){var i=this.stars;i[e].push(t,n),i[t].push(n,e),i[n].push(e,t)},a.opposite=function(e,t){for(var n=this.stars[t],i=1,r=n.length;i<r;i+=2)if(n[i]===e)return n[i-1];return-1},a.flip=function(e,t){var n=this.opposite(e,t),i=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,i),this.addTriangle(e,i,n),this.addTriangle(t,n,i)},a.edges=function(){for(var e=this.stars,t=[],n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length;a<o;a+=2)t.push([r[a],r[a+1]]);return t},a.cells=function(){for(var e=this.stars,t=[],n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length;a<o;a+=2){var s=r[a],l=r[a+1];n<Math.min(s,l)&&t.push([n,s,l])}return t}},{"binary-search-bounds":31}],47:[function(e,t,n){function i(e){for(var t=1,n=1;n<e.length;++n)for(var i=0;i<n;++i)if(e[n]<e[i])t=-t;else if(e[i]===e[n])return 0;return t}t.exports=i},{}],48:[function(e,t,n){var i=e("dup"),r=e("robust-linear-solve");function a(e,t){for(var n=0,i=e.length,r=0;r<i;++r)n+=e[r]*t[r];return n}function o(e){var t=e.length;if(0===t)return[];e[0].length;var n=i([e.length+1,e.length+1],1),o=i([e.length+1],1);n[t][t]=0;for(var s=0;s<t;++s){for(var l=0;l<=s;++l)n[l][s]=n[s][l]=2*a(e[s],e[l]);o[s]=a(e[s],e[s])}var c=r(n,o),u=0,d=c[t+1];for(s=0;s<d.length;++s)u+=d[s];var g=new Array(t);for(s=0;s<t;++s){d=c[s];var h=0;for(l=0;l<d.length;++l)h+=d[l];g[s]=h/u}return g}function s(e){if(0===e.length)return[];for(var t=e[0].length,n=i([t]),r=o(e),a=0;a<e.length;++a)for(var s=0;s<t;++s)n[s]+=e[a][s]*r[a];return n}s.barycenetric=o,t.exports=s},{dup:65,"robust-linear-solve":283}],49:[function(e,t,n){t.exports=r;var i=e("circumcenter");function r(e){for(var t=i(e),n=0,r=0;r<e.length;++r)for(var a=e[r],o=0;o<t.length;++o)n+=Math.pow(a[o]-t[o],2);return Math.sqrt(n/e.length)}},{circumcenter:48}],50:[function(e,t,n){t.exports=A;var i=e("union-find"),r=e("box-intersect"),a=e("robust-segment-intersect"),o=e("big-rat"),s=e("big-rat/cmp"),l=e("big-rat/to-float"),c=e("rat-vec"),u=e("nextafter"),d=e("./lib/rat-seg-intersect");function g(e){var t=l(e);return[u(t,-1/0),u(t,1/0)]}function h(e,t){for(var n=new Array(t.length),i=0;i<t.length;++i){var r=t[i],a=e[r[0]],o=e[r[1]];n[i]=[u(Math.min(a[0],o[0]),-1/0),u(Math.min(a[1],o[1]),-1/0),u(Math.max(a[0],o[0]),1/0),u(Math.max(a[1],o[1]),1/0)]}return n}function f(e){for(var t=new Array(e.length),n=0;n<e.length;++n){var i=e[n];t[n]=[u(i[0],-1/0),u(i[1],-1/0),u(i[0],1/0),u(i[1],1/0)]}return t}function p(e,t,n){var i=[];return r(n,(function(n,r){var o=t[n],s=t[r];if(o[0]!==s[0]&&o[0]!==s[1]&&o[1]!==s[0]&&o[1]!==s[1]){var l=e[o[0]],c=e[o[1]],u=e[s[0]],d=e[s[1]];a(l,c,u,d)&&i.push([n,r])}})),i}function m(e,t,n,i){var o=[];return r(n,i,(function(n,i){var r=t[n];if(r[0]!==i&&r[1]!==i){var s=e[i],l=e[r[0]],c=e[r[1]];a(l,c,s,s)&&o.push([n,i])}})),o}function v(e,t,n,i,r){var a,u,g=e.map((function(e){return[o(e[0]),o(e[1])]}));for(a=0;a<n.length;++a){var h=n[a];u=h[0];var f=h[1],p=t[u],m=t[f],v=d(c(e[p[0]]),c(e[p[1]]),c(e[m[0]]),c(e[m[1]]));if(v){var b=e.length;e.push([l(v[0]),l(v[1])]),g.push(v),i.push([u,b],[f,b])}}for(i.sort((function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=g[e[1]],i=g[t[1]];return s(n[0],i[0])||s(n[1],i[1])})),a=i.length-1;a>=0;--a){var y=t[u=(U=i[a])[0]],I=y[0],C=y[1],x=e[I],B=e[C];if((x[0]-B[0]||x[1]-B[1])<0){var A=I;I=C,C=A}y[0]=I;var F,Q=y[1]=U[1];for(r&&(F=y[2]);a>0&&i[a-1][0]===u;){var U,w=(U=i[--a])[1];r?t.push([Q,w,F]):t.push([Q,w]),Q=w}r?t.push([Q,C,F]):t.push([Q,C])}return g}function b(e,t,n){for(var a=t.length,o=new i(a),s=[],l=0;l<t.length;++l){var c=t[l],d=g(c[0]),h=g(c[1]);s.push([u(d[0],-1/0),u(h[0],-1/0),u(d[1],1/0),u(h[1],1/0)])}r(s,(function(e,t){o.link(e,t)}));var f=!0,p=new Array(a);for(l=0;l<a;++l)(v=o.find(l))!==l&&(f=!1,e[v]=[Math.min(e[l][0],e[v][0]),Math.min(e[l][1],e[v][1])]);if(f)return null;var m=0;for(l=0;l<a;++l){var v;(v=o.find(l))===l?(p[l]=m,e[m++]=e[l]):p[l]=-1}for(e.length=m,l=0;l<a;++l)p[l]<0&&(p[l]=p[o.find(l)]);return p}function y(e,t){return e[0]-t[0]||e[1]-t[1]}function I(e,t){var n=e[0]-t[0]||e[1]-t[1];return n||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function C(e,t,n){if(0!==e.length){if(t)for(var i=0;i<e.length;++i){var r=t[(o=e[i])[0]],a=t[o[1]];o[0]=Math.min(r,a),o[1]=Math.max(r,a)}else for(i=0;i<e.length;++i){var o;r=(o=e[i])[0],a=o[1],o[0]=Math.min(r,a),o[1]=Math.max(r,a)}n?e.sort(I):e.sort(y);var s=1;for(i=1;i<e.length;++i){var l=e[i-1],c=e[i];(c[0]!==l[0]||c[1]!==l[1]||n&&c[2]!==l[2])&&(e[s++]=c)}e.length=s}}function x(e,t,n){var i=b(e,[],f(e));return C(t,i,n),!!i}function B(e,t,n){var i=h(e,t),r=p(e,t,i),a=m(e,t,i,f(e)),o=b(e,v(e,t,r,a,n));return C(t,o,n),!!o||r.length>0||a.length>0}function A(e,t,n){var i;if(n){i=t;for(var r=new Array(t.length),a=0;a<t.length;++a){var o=t[a];r[a]=[o[0],o[1],n[a]]}t=r}for(var s=x(e,t,!!n);B(e,t,!!n);)s=!0;if(n&&s)for(i.length=0,n.length=0,a=0;a<t.length;++a)o=t[a],i.push([o[0],o[1]]),n.push(o[2]);return s}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(e,t,n){t.exports=d;var i=e("big-rat/mul"),r=e("big-rat/div"),a=e("big-rat/sub"),o=e("big-rat/sign"),s=e("rat-vec/sub"),l=e("rat-vec/add"),c=e("rat-vec/muls");function u(e,t){return a(i(e[0],t[1]),i(e[1],t[0]))}function d(e,t,n,i){var a=s(t,e),d=s(i,n),g=u(a,d);if(0===o(g))return null;var h=u(d,s(e,n)),f=r(h,g),p=c(a,f);return l(e,p)}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(e,t,n){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(e,t,n){var i=e("./colorScale"),r=e("lerp");function a(e){var t,n,a,c,u,d,g,h,f,p;if(e||(e={}),h=(e.nshades||72)-1,g=e.format||"hex",(d=e.colormap)||(d="jet"),"string"==typeof d){if(d=d.toLowerCase(),!i[d])throw Error(d+" not a supported colorscale");u=i[d]}else{if(!Array.isArray(d))throw Error("unsupported colormap option",d);u=d.slice()}if(u.length>h+1)throw new Error(d+" map requires nshades to be at least size "+u.length);f=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"==typeof e.alpha?[e.alpha,e.alpha]:[1,1],t=u.map((function(e){return Math.round(e.index*h)})),f[0]=Math.min(Math.max(f[0],0),1),f[1]=Math.min(Math.max(f[1],0),1);var m=u.map((function(e,t){var n=u[t].index,i=u[t].rgb.slice();return 4===i.length&&i[3]>=0&&i[3]<=1||(i[3]=f[0]+(f[1]-f[0])*n),i})),v=[];for(p=0;p<t.length-1;++p){c=t[p+1]-t[p],n=m[p],a=m[p+1];for(var b=0;b<c;b++){var y=b/c;v.push([Math.round(r(n[0],a[0],y)),Math.round(r(n[1],a[1],y)),Math.round(r(n[2],a[2],y)),r(n[3],a[3],y)])}}return v.push(u[u.length-1].rgb.concat(f[1])),"hex"===g?v=v.map(s):"rgbaString"===g?v=v.map(l):"float"===g&&(v=v.map(o)),v}function o(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function s(e){for(var t,n="#",i=0;i<3;++i)n+=("00"+(t=(t=e[i]).toString(16))).substr(t.length);return n}function l(e){return"rgba("+e.join(",")+")"}t.exports=a},{"./colorScale":52,lerp:240}],54:[function(e,t,n){t.exports=c;var i=e("robust-orientation"),r=e("signum"),a=e("two-sum"),o=e("robust-product"),s=e("robust-sum");function l(e,t,n){var i=a(e[0],-t[0]),r=a(e[1],-t[1]),l=a(n[0],-t[0]),c=a(n[1],-t[1]),u=s(o(i,l),o(r,c));return u[u.length-1]>=0}function c(e,t,n,a){var o=i(t,n,a);if(0===o){var s=r(i(e,t,n)),c=r(i(e,t,a));if(s===c){if(0===s){var u=l(e,t,n);return u===l(e,t,a)?0:u?1:-1}return 0}return 0===c?s>0||l(e,t,a)?-1:1:0===s?c>0||l(e,t,n)?1:-1:r(c-s)}var d=i(e,t,n);return d>0?o>0&&i(e,t,a)>0?1:-1:d<0?o>0||i(e,t,a)>0?1:-1:i(e,t,a)>0||l(e,t,n)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(e,t,n){t.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(e,t,n){t.exports=a;var i=Math.min;function r(e,t){return e-t}function a(e,t){var n=e.length,a=e.length-t.length;if(a)return a;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return e[0]+e[1]-t[0]-t[1]||i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],s=t[0]+t[1];if(a=o+e[2]-(s+t[2]))return a;var l=i(e[0],e[1]),c=i(t[0],t[1]);return i(l,e[2])-i(c,t[2])||i(l+e[2],o)-i(c+t[2],s);case 4:var u=e[0],d=e[1],g=e[2],h=e[3],f=t[0],p=t[1],m=t[2],v=t[3];return u+d+g+h-(f+p+m+v)||i(u,d,g,h)-i(f,p,m,v,f)||i(u+d,u+g,u+h,d+g,d+h,g+h)-i(f+p,f+m,f+v,p+m,p+v,m+v)||i(u+d+g,u+d+h,u+g+h,d+g+h)-i(f+p+m,f+p+v,f+m+v,p+m+v);default:for(var b=e.slice().sort(r),y=t.slice().sort(r),I=0;I<n;++I)if(a=b[I]-y[I])return a;return 0}}},{}],57:[function(e,t,n){var i=e("compare-cell"),r=e("cell-orientation");function a(e,t){return i(e,t)||r(e)-r(t)}t.exports=a},{"cell-orientation":47,"compare-cell":56}],58:[function(e,t,n){var i=e("./lib/ch1d"),r=e("./lib/ch2d"),a=e("./lib/chnd");function o(e){var t=e.length;if(0===t)return[];if(1===t)return[[0]];var n=e[0].length;return 0===n?[]:1===n?i(e):2===n?r(e):a(e,n)}t.exports=o},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(e,t,n){function i(e){for(var t=0,n=0,i=1;i<e.length;++i)e[i][0]<e[t][0]&&(t=i),e[i][0]>e[n][0]&&(n=i);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}t.exports=i},{}],60:[function(e,t,n){t.exports=r;var i=e("monotone-convex-hull-2d");function r(e){var t=i(e),n=t.length;if(n<=2)return[];for(var r=new Array(n),a=t[n-1],o=0;o<n;++o){var s=t[o];r[o]=[a,s],a=s}return r}},{"monotone-convex-hull-2d":246}],61:[function(e,t,n){t.exports=s;var i=e("incremental-convex-hull"),r=e("affine-hull");function a(e,t){for(var n=e.length,i=new Array(n),r=0;r<t.length;++r)i[r]=e[t[r]];var a=t.length;for(r=0;r<n;++r)t.indexOf(r)<0&&(i[a++]=e[r]);return i}function o(e,t){for(var n=e.length,i=t.length,r=0;r<n;++r)for(var a=e[r],o=0;o<a.length;++o){var s=a[o];if(s<i)a[o]=t[s];else{s-=i;for(var l=0;l<i;++l)s>=t[l]&&(s+=1);a[o]=s}}return e}function s(e,t){try{return i(e,!0)}catch(l){var n=r(e);if(n.length<=t)return[];var s=a(e,n);return o(i(s,!0),n)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(e,t,n){function i(e,t,n,i,r,a){var o=6*r*r-6*r,s=3*r*r-4*r+1,l=-6*r*r+6*r,c=3*r*r-2*r;if(e.length){a||(a=new Array(e.length));for(var u=e.length-1;u>=0;--u)a[u]=o*e[u]+s*t[u]+l*n[u]+c*i[u];return a}return o*e+s*t+l*n[u]+c*i}function r(e,t,n,i,r,a){var o=r-1,s=r*r,l=o*o,c=(1+2*r)*l,u=r*l,d=s*(3-2*r),g=s*o;if(e.length){a||(a=new Array(e.length));for(var h=e.length-1;h>=0;--h)a[h]=c*e[h]+u*t[h]+d*n[h]+g*i[h];return a}return c*e+u*t+d*n+g*i}t.exports=r,t.exports.derivative=i},{}],63:[function(e,t,n){var i=e("incremental-convex-hull"),r=e("uniq");function a(e,t){this.point=e,this.index=t}function o(e,t){for(var n=e.point,i=t.point,r=n.length,a=0;a<r;++a){var o=i[a]-n[a];if(o)return o}return 0}function s(e,t,n){if(1===e)return n?[[-1,0]]:[];var i=t.map((function(e,t){return[e[0],t]}));i.sort((function(e,t){return e[0]-t[0]}));for(var r=new Array(e-1),a=1;a<e;++a){var o=i[a-1],s=i[a];r[a-1]=[o[1],s[1]]}return n&&r.push([-1,r[0][1]],[r[e-1][1],-1]),r}function l(e,t){var n=e.length;if(0===n)return[];var l=e[0].length;if(l<1)return[];if(1===l)return s(n,e,t);for(var c=new Array(n),u=1,d=0;d<n;++d){for(var g=e[d],h=new Array(l+1),f=0,p=0;p<l;++p){var m=g[p];h[p]=m,f+=m*m}h[l]=f,c[d]=new a(h,d),u=Math.max(f,u)}r(c,o),n=c.length;var v=new Array(n+l+1),b=new Array(n+l+1),y=(l+1)*(l+1)*u,I=new Array(l+1);for(d=0;d<=l;++d)I[d]=0;for(I[l]=y,v[0]=I.slice(),b[0]=-1,d=0;d<=l;++d)(h=I.slice())[d]=1,v[d+1]=h,b[d+1]=-1;for(d=0;d<n;++d){var C=c[d];v[d+l+1]=C.point,b[d+l+1]=C.index}var x=i(v,!1);if(x=t?x.filter((function(e){for(var t=0,n=0;n<=l;++n){var i=b[e[n]];if(i<0&&++t>=2)return!1;e[n]=i}return!0})):x.filter((function(e){for(var t=0;t<=l;++t){var n=b[e[t]];if(n<0)return!1;e[t]=n}return!0})),1&l)for(d=0;d<x.length;++d)h=(C=x[d])[0],C[0]=C[1],C[1]=h;return x}t.exports=l},{"incremental-convex-hull":233,uniq:310}],64:[function(e,t,n){(function(e){(function(){var n=!1;if("undefined"!=typeof Float64Array){var i=new Float64Array(1),r=new Uint32Array(i.buffer);if(i[0]=1,n=!0,1072693248===r[1]){var a=function(e,t){return r[0]=e,r[1]=t,i[0]},o=function(e){return i[0]=e,r[0]},s=function(e){return i[0]=e,r[1]};t.exports=function(e){return i[0]=e,[r[0],r[1]]},t.exports.pack=a,t.exports.lo=o,t.exports.hi=s}else if(1072693248===r[0]){var l=function(e,t){return r[1]=e,r[0]=t,i[0]},c=function(e){return i[0]=e,r[1]},u=function(e){return i[0]=e,r[0]};t.exports=function(e){return i[0]=e,[r[1],r[0]]},t.exports.pack=l,t.exports.lo=c,t.exports.hi=u}else n=!1}if(!n){var d=function(e,t){return f.writeUInt32LE(e,0,!0),f.writeUInt32LE(t,4,!0),f.readDoubleLE(0,!0)},g=function(e){return f.writeDoubleLE(e,0,!0),f.readUInt32LE(0,!0)},h=function(e){return f.writeDoubleLE(e,0,!0),f.readUInt32LE(4,!0)},f=new e(8);t.exports=function(e){return f.writeDoubleLE(e,0,!0),[f.readUInt32LE(0,!0),f.readUInt32LE(4,!0)]},t.exports.pack=d,t.exports.lo=g,t.exports.hi=h}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){return(t.exports.hi(e)<<1>>>21)-1023},t.exports.fraction=function(e){var n=t.exports.lo(e),i=t.exports.hi(e),r=1048575&i;return 2146435072&i&&(r+=1<<20),[n,r]},t.exports.denormalized=function(e){return!(2146435072&t.exports.hi(e))}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:3}],65:[function(e,t,n){function r(e,t,n){var i=0|e[n];if(i<=0)return[];var a,o=new Array(i);if(n===e.length-1)for(a=0;a<i;++a)o[a]=t;else for(a=0;a<i;++a)o[a]=r(e,t,n+1);return o}function a(e,t){var n,i;for(n=new Array(e),i=0;i<e;++i)n[i]=t;return n}function o(e,t){switch(void 0===t&&(t=0),i(e)){case"number":if(e>0)return a(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}t.exports=o},{}],66:[function(e,t,n){t.exports=r;var i=e("uniq");function r(e,t){var n=e.length;if("number"!=typeof t){t=0;for(var r=0;r<n;++r){var a=e[r];t=Math.max(t,a[0],a[1])}t=1+(0|t)}t|=0;var o=new Array(t);for(r=0;r<t;++r)o[r]=[];for(r=0;r<n;++r)o[(a=e[r])[0]].push(a[1]),o[a[1]].push(a[0]);for(var s=0;s<t;++s)i(o[s],(function(e,t){return e-t}));return o}},{uniq:310}],67:[function(e,t,n){function i(e,t,n){var i=t||0,r=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[i*e[12]+e[8],i*e[13]+e[9],i*e[14]+e[10],i*e[15]+e[11]],[r*e[12]-e[8],r*e[13]-e[9],r*e[14]-e[10],r*e[15]-e[11]]]}t.exports=i},{}],68:[function(e,t,n){t.exports=c;var i=e("cubic-hermite"),r=e("binary-search-bounds");function a(e,t,n){return Math.min(t,Math.max(e,n))}function o(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var i=0;i<this.dimension;++i)this.bounds[0][i]=-1/0,this.bounds[1][i]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var s=o.prototype;function l(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function c(e,t,n){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof e?new o(i=l(e),i,0):new o(e,l(e.length),0);case 2:var i;if("number"==typeof t)return new o(e,i=l(e.length),+t);n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new o(e,t,n)}}s.flush=function(e){var t=r.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},s.curve=function(e){var t=this._time,n=t.length,o=r.le(t,e),s=this._scratch[0],l=this._state,c=this._velocity,u=this.dimension,d=this.bounds;if(o<0)for(var g=u-1,h=0;h<u;++h,--g)s[h]=l[g];else if(o>=n-1){g=l.length-1;var f=e-t[n-1];for(h=0;h<u;++h,--g)s[h]=l[g]+f*c[g]}else{g=u*(o+1)-1;var p=t[o],m=t[o+1]-p||1,v=this._scratch[1],b=this._scratch[2],y=this._scratch[3],I=this._scratch[4],C=!0;for(h=0;h<u;++h,--g)v[h]=l[g],y[h]=c[g]*m,b[h]=l[g+u],I[h]=c[g+u]*m,C=C&&v[h]===b[h]&&y[h]===I[h]&&0===y[h];if(C)for(h=0;h<u;++h)s[h]=v[h];else i(v,y,b,I,(e-p)/m,s)}var x=d[0],B=d[1];for(h=0;h<u;++h)s[h]=a(x[h],B[h],s[h]);return s},s.dcurve=function(e){var t=this._time,n=t.length,a=r.le(t,e),o=this._scratch[0],s=this._state,l=this._velocity,c=this.dimension;if(a>=n-1){var u=s.length-1;t[n-1];for(var d=0;d<c;++d,--u)o[d]=l[u]}else{u=c*(a+1)-1;var g=t[a],h=t[a+1]-g||1,f=this._scratch[1],p=this._scratch[2],m=this._scratch[3],v=this._scratch[4],b=!0;for(d=0;d<c;++d,--u)f[d]=s[u],m[d]=l[u]*h,p[d]=s[u+c],v[d]=l[u+c]*h,b=b&&f[d]===p[d]&&m[d]===v[d]&&0===m[d];if(b)for(d=0;d<c;++d)o[d]=0;else for(i.derivative(f,m,p,v,(e-g)/h,o),d=0;d<c;++d)o[d]/=h}return o},s.lastT=function(){var e=this._time;return e[e.length-1]},s.stable=function(){for(var e=this._velocity,t=e.length,n=this.dimension-1;n>=0;--n)if(e[--t])return!1;return!0},s.jump=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var i=this._state,r=this._velocity,o=i.length-this.dimension,s=this.bounds,l=s[0],c=s[1];this._time.push(t,e);for(var u=0;u<2;++u)for(var d=0;d<n;++d)i.push(i[o++]),r.push(0);for(this._time.push(e),d=n;d>0;--d)i.push(a(l[d-1],c[d-1],arguments[d])),r.push(0)}},s.push=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var i=this._state,r=this._velocity,o=i.length-this.dimension,s=e-t,l=this.bounds,c=l[0],u=l[1],d=s>1e-6?1/s:0;this._time.push(e);for(var g=n;g>0;--g){var h=a(c[g-1],u[g-1],arguments[g]);i.push(h),r.push((h-i[o++])*d)}}},s.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var n=this._state,i=this._velocity,r=this.bounds,o=r[0],s=r[1];this._time.push(e);for(var l=t;l>0;--l)n.push(a(o[l-1],s[l-1],arguments[l])),i.push(0)}},s.move=function(e){var t=this.lastT(),n=this.dimension;if(!(e<=t||arguments.length!==n+1)){var i=this._state,r=this._velocity,o=i.length-this.dimension,s=this.bounds,l=s[0],c=s[1],u=e-t,d=u>1e-6?1/u:0;this._time.push(e);for(var g=n;g>0;--g){var h=arguments[g];i.push(a(l[g-1],c[g-1],i[o++]+h)),r.push(h*d)}}},s.idle=function(e){var t=this.lastT();if(!(e<t)){var n=this.dimension,i=this._state,r=this._velocity,o=i.length-n,s=this.bounds,l=s[0],c=s[1],u=e-t;this._time.push(e);for(var d=n-1;d>=0;--d)i.push(a(l[d],c[d],i[o]+u*r[o])),r.push(0),o+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(e,t,n){t.exports=y;var i=0,r=1;function a(e,t,n,i,r,a){this._color=e,this.key=t,this.value=n,this.left=i,this.right=r,this._count=a}function o(e){return new a(e._color,e.key,e.value,e.left,e.right,e._count)}function s(e,t){return new a(e,t.key,t.value,t.left,t.right,t._count)}function l(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function c(e,t){this._compare=e,this.root=t}var u=c.prototype;function d(e,t){var n;return t.left&&(n=d(e,t.left))?n:(n=e(t.key,t.value))||(t.right?d(e,t.right):void 0)}function g(e,t,n,i){if(t(e,i.key)<=0){var r;if(i.left&&(r=g(e,t,n,i.left)))return r;if(r=n(i.key,i.value))return r}if(i.right)return g(e,t,n,i.right)}function h(e,t,n,i,r){var a,o=n(e,r.key),s=n(t,r.key);if(o<=0){if(r.left&&(a=h(e,t,n,i,r.left)))return a;if(s>0&&(a=i(r.key,r.value)))return a}if(s>0&&r.right)return h(e,t,n,i,r.right)}function f(e,t){this.tree=e,this._stack=t}Object.defineProperty(u,"keys",{get:function(){var e=[];return this.forEach((function(t,n){e.push(t)})),e}}),Object.defineProperty(u,"values",{get:function(){var e=[];return this.forEach((function(t,n){e.push(n)})),e}}),Object.defineProperty(u,"length",{get:function(){return this.root?this.root._count:0}}),u.insert=function(e,t){for(var n=this._compare,o=this.root,u=[],d=[];o;){var g=n(e,o.key);u.push(o),d.push(g),o=g<=0?o.left:o.right}u.push(new a(i,e,t,null,null,1));for(var h=u.length-2;h>=0;--h)o=u[h],d[h]<=0?u[h]=new a(o._color,o.key,o.value,u[h+1],o.right,o._count+1):u[h]=new a(o._color,o.key,o.value,o.left,u[h+1],o._count+1);for(h=u.length-1;h>1;--h){var f=u[h-1];if(o=u[h],f._color===r||o._color===r)break;var p=u[h-2];if(p.left===f)if(f.left===o){if(!(m=p.right)||m._color!==i){p._color=i,p.left=f.right,f._color=r,f.right=p,u[h-2]=f,u[h-1]=o,l(p),l(f),h>=3&&((v=u[h-3]).left===p?v.left=f:v.right=f);break}f._color=r,p.right=s(r,m),p._color=i,h-=1}else{if(!(m=p.right)||m._color!==i){f.right=o.left,p._color=i,p.left=o.right,o._color=r,o.left=f,o.right=p,u[h-2]=o,u[h-1]=f,l(p),l(f),l(o),h>=3&&((v=u[h-3]).left===p?v.left=o:v.right=o);break}f._color=r,p.right=s(r,m),p._color=i,h-=1}else if(f.right===o){if(!(m=p.left)||m._color!==i){p._color=i,p.right=f.left,f._color=r,f.left=p,u[h-2]=f,u[h-1]=o,l(p),l(f),h>=3&&((v=u[h-3]).right===p?v.right=f:v.left=f);break}f._color=r,p.left=s(r,m),p._color=i,h-=1}else{var m;if(!(m=p.left)||m._color!==i){var v;f.left=o.right,p._color=i,p.right=o.left,o._color=r,o.right=f,o.left=p,u[h-2]=o,u[h-1]=f,l(p),l(f),l(o),h>=3&&((v=u[h-3]).right===p?v.right=o:v.left=o);break}f._color=r,p.left=s(r,m),p._color=i,h-=1}}return u[0]._color=r,new c(n,u[0])},u.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return d(e,this.root);case 2:return g(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return h(t,n,this._compare,e,this.root)}},Object.defineProperty(u,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new f(this,e)}}),Object.defineProperty(u,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new f(this,e)}}),u.at=function(e){if(e<0)return new f(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new f(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new f(this,[])},u.ge=function(e){for(var t=this._compare,n=this.root,i=[],r=0;n;){var a=t(e,n.key);i.push(n),a<=0&&(r=i.length),n=a<=0?n.left:n.right}return i.length=r,new f(this,i)},u.gt=function(e){for(var t=this._compare,n=this.root,i=[],r=0;n;){var a=t(e,n.key);i.push(n),a<0&&(r=i.length),n=a<0?n.left:n.right}return i.length=r,new f(this,i)},u.lt=function(e){for(var t=this._compare,n=this.root,i=[],r=0;n;){var a=t(e,n.key);i.push(n),a>0&&(r=i.length),n=a<=0?n.left:n.right}return i.length=r,new f(this,i)},u.le=function(e){for(var t=this._compare,n=this.root,i=[],r=0;n;){var a=t(e,n.key);i.push(n),a>=0&&(r=i.length),n=a<0?n.left:n.right}return i.length=r,new f(this,i)},u.find=function(e){for(var t=this._compare,n=this.root,i=[];n;){var r=t(e,n.key);if(i.push(n),0===r)return new f(this,i);n=r<=0?n.left:n.right}return new f(this,[])},u.remove=function(e){var t=this.find(e);return t?t.remove():this},u.get=function(e){for(var t=this._compare,n=this.root;n;){var i=t(e,n.key);if(0===i)return n.value;n=i<=0?n.left:n.right}};var p=f.prototype;function m(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function v(e){for(var t,n,a,c,u=e.length-1;u>=0;--u){if(t=e[u],0===u)return void(t._color=r);if((n=e[u-1]).left===t){if((a=n.right).right&&a.right._color===i)return c=(a=n.right=o(a)).right=o(a.right),n.right=a.left,a.left=n,a.right=c,a._color=n._color,t._color=r,n._color=r,c._color=r,l(n),l(a),u>1&&((d=e[u-2]).left===n?d.left=a:d.right=a),void(e[u-1]=a);if(a.left&&a.left._color===i)return c=(a=n.right=o(a)).left=o(a.left),n.right=c.left,a.left=c.right,c.left=n,c.right=a,c._color=n._color,n._color=r,a._color=r,t._color=r,l(n),l(a),l(c),u>1&&((d=e[u-2]).left===n?d.left=c:d.right=c),void(e[u-1]=c);if(a._color===r){if(n._color===i)return n._color=r,void(n.right=s(i,a));n.right=s(i,a);continue}a=o(a),n.right=a.left,a.left=n,a._color=n._color,n._color=i,l(n),l(a),u>1&&((d=e[u-2]).left===n?d.left=a:d.right=a),e[u-1]=a,e[u]=n,u+1<e.length?e[u+1]=t:e.push(t),u+=2}else{if((a=n.left).left&&a.left._color===i)return c=(a=n.left=o(a)).left=o(a.left),n.left=a.right,a.right=n,a.left=c,a._color=n._color,t._color=r,n._color=r,c._color=r,l(n),l(a),u>1&&((d=e[u-2]).right===n?d.right=a:d.left=a),void(e[u-1]=a);if(a.right&&a.right._color===i)return c=(a=n.left=o(a)).right=o(a.right),n.left=c.right,a.right=c.left,c.right=n,c.left=a,c._color=n._color,n._color=r,a._color=r,t._color=r,l(n),l(a),l(c),u>1&&((d=e[u-2]).right===n?d.right=c:d.left=c),void(e[u-1]=c);if(a._color===r){if(n._color===i)return n._color=r,void(n.left=s(i,a));n.left=s(i,a);continue}var d;a=o(a),n.left=a.right,a.right=n,a._color=n._color,n._color=i,l(n),l(a),u>1&&((d=e[u-2]).right===n?d.right=a:d.left=a),e[u-1]=a,e[u]=n,u+1<e.length?e[u+1]=t:e.push(t),u+=2}}}function b(e,t){return e<t?-1:e>t?1:0}function y(e){return new c(e||b,null)}Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new f(this.tree,this._stack.slice())},p.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new a(n._color,n.key,n.value,n.left,n.right,n._count);for(var o=e.length-2;o>=0;--o)(n=e[o]).left===e[o+1]?t[o]=new a(n._color,n.key,n.value,t[o+1],n.right,n._count):t[o]=new a(n._color,n.key,n.value,n.left,t[o+1],n._count);if((n=t[t.length-1]).left&&n.right){var s=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var l=t[s-1];for(t.push(new a(n._color,l.key,l.value,n.left,n.right,n._count)),t[s-1].key=n.key,t[s-1].value=n.value,o=t.length-2;o>=s;--o)n=t[o],t[o]=new a(n._color,n.key,n.value,n.left,t[o+1],n._count);t[s-1].left=t[s]}if((n=t[t.length-1])._color===i){var u=t[t.length-2];for(u.left===n?u.left=null:u.right===n&&(u.right=null),t.pop(),o=0;o<t.length;++o)t[o]._count--;return new c(this.tree._compare,t[0])}if(n.left||n.right){for(n.left?m(n,n.left):n.right&&m(n,n.right),n._color=r,o=0;o<t.length-1;++o)t[o]._count--;return new c(this.tree._compare,t[0])}if(1===t.length)return new c(this.tree._compare,null);for(o=0;o<t.length;++o)t[o]._count--;var d=t[t.length-2];return v(t),d.left===n?d.left=null:d.right=null,new c(this.tree._compare,t[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var i=t.length-2;i>=0;--i)t[i+1]===t[i].right&&(++e,t[i].left&&(e+=t[i].left._count));return e},enumerable:!0}),p.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),p.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),i=t[t.length-1];n[n.length-1]=new a(i._color,i.key,e,i.left,i.right,i._count);for(var r=t.length-2;r>=0;--r)(i=t[r]).left===t[r+1]?n[r]=new a(i._color,i.key,i.value,n[r+1],i.right,i._count):n[r]=new a(i._color,i.key,i.value,i.left,n[r+1],i._count);return new c(this.tree._compare,n[0])},p.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],70:[function(e,t,n){t.exports=C;var i=e("./lib/text.js"),r=e("./lib/lines.js"),a=e("./lib/background.js"),o=e("./lib/cube.js"),s=e("./lib/ticks.js"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function u(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(e)}var d=u.prototype;function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}d.update=function(e){function t(t,n,i){if(i in e){var r,a=e[i],o=this[i];(t?Array.isArray(a)&&Array.isArray(a[0]):Array.isArray(a))?this[i]=r=[n(a[0]),n(a[1]),n(a[2])]:this[i]=r=[n(a),n(a),n(a)];for(var s=0;s<3;++s)if(r[s]!==o[s])return!0}return!1}e=e||{};var n,a=t.bind(this,!1,Number),o=t.bind(this,!1,Boolean),l=t.bind(this,!1,String),c=t.bind(this,!0,(function(e){if(Array.isArray(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]})),u=!1,d=!1;if("bounds"in e)for(var g=e.bounds,h=0;h<2;++h)for(var f=0;f<3;++f)g[h][f]!==this.bounds[h][f]&&(d=!0),this.bounds[h][f]=g[h][f];if("ticks"in e)for(n=e.ticks,u=!0,this.autoTicks=!1,h=0;h<3;++h)this.tickSpacing[h]=0;else a("tickSpacing")&&(this.autoTicks=!0,d=!0);if(this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),d=!0,u=!0,this._firstInit=!1),d&&this.autoTicks&&(n=s.create(this.bounds,this.tickSpacing),u=!0),u){for(h=0;h<3;++h)n[h].sort((function(e,t){return e.x-t.x}));s.equal(n,this.ticks)?u=!1:this.ticks=n}o("tickEnable"),l("tickFont")&&(u=!0),a("tickSize"),a("tickAngle"),a("tickPad"),c("tickColor");var p=l("labels");l("labelFont")&&(p=!0),o("labelEnable"),a("labelSize"),a("labelPad"),c("labelColor"),o("lineEnable"),o("lineMirror"),a("lineWidth"),c("lineColor"),o("lineTickEnable"),o("lineTickMirror"),a("lineTickLength"),a("lineTickWidth"),c("lineTickColor"),o("gridEnable"),a("gridWidth"),c("gridColor"),o("zeroEnable"),c("zeroLineColor"),a("zeroLineWidth"),o("backgroundEnable"),c("backgroundColor"),this._text?this._text&&(p||u)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&u&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var h=[new g,new g,new g];function f(e,t,n,i,r){for(var a=e.primalOffset,o=e.primalMinor,s=e.mirrorOffset,l=e.mirrorMinor,c=i[t],u=0;u<3;++u)if(t!==u){var d=a,g=s,h=o,f=l;c&1<<u&&(d=s,g=a,h=l,f=o),d[u]=n[0][u],g[u]=n[1][u],r[u]>0?(h[u]=-1,f[u]=0):(h[u]=0,f[u]=1)}}var p=[0,0,0],m={model:l,view:l,projection:l,_ortho:!1};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(e){};var v=0,b=[0,0,0],y=[0,0,0],I=[0,0,0];function C(e,t){var n=new u(e);return n.update(t),n}d.draw=function(e){e=e||m;for(var t=this.gl,n=e.model||l,i=e.view||l,r=e.projection||l,a=this.bounds,s=e._ortho||!1,u=o(n,i,r,a,s),d=u.cubeEdges,g=u.axis,C=i[12],x=i[13],B=i[14],A=i[15],F=(s?2:1)*this.pixelRatio*(r[3]*C+r[7]*x+r[11]*B+r[15]*A)/t.drawingBufferHeight,Q=0;Q<3;++Q)this.lastCubeProps.cubeEdges[Q]=d[Q],this.lastCubeProps.axis[Q]=g[Q];var U=h;for(Q=0;Q<3;++Q)f(h[Q],Q,this.bounds,d,g);t=this.gl;var w,G=p;for(Q=0;Q<3;++Q)this.backgroundEnable[Q]?G[Q]=g[Q]:G[Q]=0;for(this._background.draw(n,i,r,a,G,this.backgroundColor),this._lines.bind(n,i,r,this),Q=0;Q<3;++Q){var R=[0,0,0];g[Q]>0?R[Q]=a[1][Q]:R[Q]=a[0][Q];for(var L=0;L<2;++L){var S=(Q+1+L)%3,V=(Q+1+(1^L))%3;this.gridEnable[S]&&this._lines.drawGrid(S,V,this.bounds,R,this.gridColor[S],this.gridWidth[S]*this.pixelRatio)}for(L=0;L<2;++L)S=(Q+1+L)%3,V=(Q+1+(1^L))%3,this.zeroEnable[V]&&Math.min(a[0][V],a[1][V])<=0&&Math.max(a[0][V],a[1][V])>=0&&this._lines.drawZero(S,V,this.bounds,R,this.zeroLineColor[V],this.zeroLineWidth[V]*this.pixelRatio)}for(Q=0;Q<3;++Q){this.lineEnable[Q]&&this._lines.drawAxisLine(Q,this.bounds,U[Q].primalOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio),this.lineMirror[Q]&&this._lines.drawAxisLine(Q,this.bounds,U[Q].mirrorOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio);var Z=c(b,U[Q].primalMinor),k=c(y,U[Q].mirrorMinor),E=this.lineTickLength;for(L=0;L<3;++L){var X=F/n[5*L];Z[L]*=E[L]*X,k[L]*=E[L]*X}this.lineTickEnable[Q]&&this._lines.drawAxisTicks(Q,U[Q].primalOffset,Z,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio),this.lineTickMirror[Q]&&this._lines.drawAxisTicks(Q,U[Q].mirrorOffset,k,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio)}this._lines.unbind(),this._text.bind(n,i,r,this.pixelRatio);var N,W,_=.5;function T(e){(W=[0,0,0])[e]=1}function M(e,t,n){var i=(e+1)%3,r=(e+2)%3,a=t[i],o=t[r],s=n[i],l=n[r];a>0&&l>0||a>0&&l<0||a<0&&l>0||a<0&&l<0?T(i):(o>0&&s>0||o>0&&s<0||o<0&&s>0||o<0&&s<0)&&T(r)}for(Q=0;Q<3;++Q){var H=U[Q].primalMinor,Y=U[Q].mirrorMinor,D=c(I,U[Q].primalOffset);for(L=0;L<3;++L)this.lineTickEnable[Q]&&(D[L]+=F*H[L]*Math.max(this.lineTickLength[L],0)/n[5*L]);var z=[0,0,0];if(z[Q]=1,this.tickEnable[Q]){for(-3600===this.tickAngle[Q]?(this.tickAngle[Q]=0,this.tickAlign[Q]="auto"):this.tickAlign[Q]=-1,N=1,"auto"===(w=[this.tickAlign[Q],_,N])[0]?w[0]=v:w[0]=parseInt(""+w[0]),W=[0,0,0],M(Q,H,Y),L=0;L<3;++L)D[L]+=F*H[L]*this.tickPad[L]/n[5*L];this._text.drawTicks(Q,this.tickSize[Q],this.tickAngle[Q],D,this.tickColor[Q],z,W,w)}if(this.labelEnable[Q]){for(N=0,W=[0,0,0],this.labels[Q].length>4&&(T(Q),N=1),"auto"===(w=[this.labelAlign[Q],_,N])[0]?w[0]=v:w[0]=parseInt(""+w[0]),L=0;L<3;++L)D[L]+=F*H[L]*this.labelPad[L]/n[5*L];D[Q]+=.5*(a[0][Q]+a[1][Q]),this._text.drawLabel(Q,this.labelSize[Q],this.labelAngle[Q],D,this.labelColor[Q],[0,0,0],W,w)}}this._text.unbind()},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(e,t,n){t.exports=l;var i=e("gl-buffer"),r=e("gl-vao"),a=e("./shaders").bg;function o(e,t,n,i){this.gl=e,this.buffer=t,this.vao=n,this.shader=i}var s=o.prototype;function l(e){for(var t=[],n=[],s=0,l=0;l<3;++l)for(var c=(l+1)%3,u=(l+2)%3,d=[0,0,0],g=[0,0,0],h=-1;h<=1;h+=2){n.push(s,s+2,s+1,s+1,s+2,s+3),d[l]=h,g[l]=h;for(var f=-1;f<=1;f+=2){d[c]=f;for(var p=-1;p<=1;p+=2)d[u]=p,t.push(d[0],d[1],d[2],g[0],g[1],g[2]),s+=1}var m=c;c=u,u=m}var v=i(e,new Float32Array(t)),b=i(e,new Uint16Array(n),e.ELEMENT_ARRAY_BUFFER),y=r(e,[{buffer:v,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:v,type:e.FLOAT,size:3,offset:12,stride:24}],b),I=a(e);return I.attributes.position.location=0,I.attributes.normal.location=1,new o(e,v,y,I)}s.draw=function(e,t,n,i,r,a){for(var o=!1,s=0;s<3;++s)o=o||r[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:i,enable:r,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(e,t,n){t.exports=b;var i=e("bit-twiddle"),r=e("gl-mat4/multiply"),a=e("split-polygon"),o=e("robust-orientation"),s=new Array(16),l=new Array(8),c=new Array(8),u=new Array(3),d=[0,0,0];function g(e,t,n){for(var i=0;i<4;++i){e[i]=n[12+i];for(var r=0;r<3;++r)e[i]+=t[r]*n[4*r+i]}}!function(){for(var e=0;e<8;++e)l[e]=[1,1,1,1],c[e]=[1,1,1]}();var h=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function f(e){for(var t=0;t<h.length;++t)if((e=a.positive(e,h[t])).length<3)return 0;var n=e[0],i=n[0]/n[3],r=n[1]/n[3],o=0;for(t=1;t+1<e.length;++t){var s=e[t],l=e[t+1],c=s[0]/s[3]-i,u=s[1]/s[3]-r,d=l[0]/l[3]-i,g=l[1]/l[3]-r;o+=Math.abs(c*g-u*d)}return o}var p=[1,1,1],m=[0,0,0],v={cubeEdges:p,axis:m};function b(e,t,n,a,h){r(s,t,e),r(s,n,s);for(var b=0,y=0;y<2;++y){u[2]=a[y][2];for(var I=0;I<2;++I){u[1]=a[I][1];for(var C=0;C<2;++C)u[0]=a[C][0],g(l[b],u,s),b+=1}}var x=-1;for(y=0;y<8;++y){for(var B=l[y][3],A=0;A<3;++A)c[y][A]=l[y][A]/B;h&&(c[y][2]*=-1),B<0&&(x<0||c[y][2]<c[x][2])&&(x=y)}if(x<0){x=0;for(var F=0;F<3;++F){for(var Q=(F+2)%3,U=(F+1)%3,w=-1,G=-1,R=0;R<2;++R){var L=(V=R<<F)+(R<<Q)+(1-R<<U),S=V+(1-R<<Q)+(R<<U);o(c[V],c[L],c[S],d)<0||(R?w=1:G=1)}if(w<0||G<0)G>w&&(x|=1<<F);else{for(R=0;R<2;++R){L=(V=R<<F)+(R<<Q)+(1-R<<U),S=V+(1-R<<Q)+(R<<U);var V,Z=f([l[V],l[L],l[S],l[V+(1<<Q)+(1<<U)]]);R?w=Z:G=Z}G>w&&(x|=1<<F)}}}var k=7^x,E=-1;for(y=0;y<8;++y)y!==x&&y!==k&&(E<0||c[E][1]>c[y][1])&&(E=y);var X=-1;for(y=0;y<3;++y)(W=E^1<<y)!==x&&W!==k&&(X<0&&(X=W),(U=c[W])[0]<c[X][0]&&(X=W));var N=-1;for(y=0;y<3;++y){var W;(W=E^1<<y)!==x&&W!==k&&W!==X&&(N<0&&(N=W),(U=c[W])[0]>c[N][0]&&(N=W))}var _=p;_[0]=_[1]=_[2]=0,_[i.log2(X^E)]=E&X,_[i.log2(E^N)]=E&N;var T=7^N;T===x||T===k?(T=7^X,_[i.log2(N^T)]=T&N):_[i.log2(X^T)]=T&X;var M=m,H=x;for(F=0;F<3;++F)M[F]=H&1<<F?-1:1;return v}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(e,t,n){t.exports=p;var i=e("gl-buffer"),r=e("gl-vao"),a=e("./shaders").line,o=[0,0,0],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[1,1];function d(e){return e[0]=e[1]=e[2]=0,e}function g(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function h(e,t,n,i,r,a,o,s){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=i,this.tickCount=r,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}var f=h.prototype;function p(e,t,n){var o=[],s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var d=0;d<3;++d){for(var g=o.length/3|0,f=0;f<n[d].length;++f){var p=+n[d][f].x;o.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var m=o.length/3|0;s[d]=g,l[d]=m-g,g=o.length/3|0;for(var v=0;v<n[d].length;++v)p=+n[d][v].x,o.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1);m=o.length/3|0,c[d]=g,u[d]=m-g}var b=i(e,new Float32Array(o)),y=r(e,[{buffer:b,type:e.FLOAT,size:3,stride:0,offset:0}]),I=a(e);return I.attributes.position.location=0,new h(e,b,y,I,l,s,u,c)}f.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=u,this.vao.bind()},f.unbind=function(){this.vao.unbind()},f.drawAxisLine=function(e,t,n,i,r){var a=d(s);this.shader.uniforms.majorAxis=s,a[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=a;var o,u=g(c,n);u[e]+=t[0][e],this.shader.uniforms.offset=u,this.shader.uniforms.lineWidth=r,this.shader.uniforms.color=i,(o=d(l))[(e+2)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6),(o=d(l))[(e+1)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6)},f.drawAxisTicks=function(e,t,n,i,r){if(this.tickCount[e]){var a=d(o);a[e]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=i,this.shader.uniforms.lineWidth=r;var s=d(l);s[e]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}},f.drawGrid=function(e,t,n,i,r,a){if(this.gridCount[e]){var u=d(s);u[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=u;var h=g(c,i);h[t]+=n[0][t],this.shader.uniforms.offset=h;var f=d(o);f[e]=1,this.shader.uniforms.majorAxis=f;var p=d(l);p[e]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=r,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}},f.drawZero=function(e,t,n,i,r,a){var o=d(s);this.shader.uniforms.majorAxis=o,o[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=o;var u=g(c,i);u[e]+=n[0][e],this.shader.uniforms.offset=u;var h=d(l);h[t]=1,this.shader.uniforms.screenAxis=h,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=r,this.vao.draw(this.gl.TRIANGLES,6)},f.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(e,t,n){var i=e("glslify"),r=e("gl-shader"),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.line=function(e){return r(e,a,o,null,[{name:"position",type:"vec3"}])};var s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.text=function(e){return r(e,s,l,null,[{name:"position",type:"vec3"}])};var c=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);n.bg=function(e){return r(e,c,u,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(e,t,n){(function(n){(function(){t.exports=f;var i=e("gl-buffer"),r=e("gl-vao"),a=e("vectorize-text"),o=e("./shaders").text,s=window||n.global||{},l=s.__TEXT_CACHE||{};s.__TEXT_CACHE={};var c=3;function u(e,t,n,i){this.gl=e,this.shader=t,this.buffer=n,this.vao=i,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var d=u.prototype,g=[0,0];function h(e,t){try{return a(e,t)}catch(t){return console.warn('error vectorizing text:"'+e+'" error:',t),{cells:[],positions:[]}}}function f(e,t,n,a,s,l){var c=i(e),d=r(e,[{buffer:c,size:3}]),g=o(e);g.attributes.position.location=0;var h=new u(e,g,c,d);return h.update(t,n,a,s,l),h}d.bind=function(e,t,n,i){this.vao.bind(),this.shader.bind();var r=this.shader.uniforms;r.model=e,r.view=t,r.projection=n,r.pixelScale=i,g[0]=this.gl.drawingBufferWidth,g[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=g},d.unbind=function(){this.vao.unbind()},d.update=function(e,t,n,i,r){var a=[];function o(e,t,n,i,r,o){var s=l[n];s||(s=l[n]={});var c=s[t];c||(c=s[t]=h(t,{triangles:!0,font:n,textAlign:"center",textBaseline:"middle",lineSpacing:r,styletags:o}));for(var u=(i||12)/12,d=c.positions,g=c.cells,f=0,p=g.length;f<p;++f)for(var m=g[f],v=2;v>=0;--v){var b=d[m[v]];a.push(u*b[0],-u*b[1],e)}}for(var s=[0,0,0],u=[0,0,0],d=[0,0,0],g=[0,0,0],f=1.25,p={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},m=0;m<3;++m){d[m]=a.length/c|0,o(.5*(e[0][m]+e[1][m]),t[m],n[m],12,f,p),g[m]=(a.length/c|0)-d[m],s[m]=a.length/c|0;for(var v=0;v<i[m].length;++v)i[m][v].text&&o(i[m][v].x,i[m][v].text,i[m][v].font||r,i[m][v].fontSize||12,f,p);u[m]=(a.length/c|0)-s[m]}this.buffer.update(a),this.tickOffset=s,this.tickCount=u,this.labelOffset=d,this.labelCount=g},d.drawTicks=function(e,t,n,i,r,a,o,s){this.tickCount[e]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=r,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=i,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e]))},d.drawLabel=function(e,t,n,i,r,a,o,s){this.labelCount[e]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=r,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=i,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,e("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(e,t,n){function i(e,t){var n=e+"",i=n.indexOf("."),r=0;i>=0&&(r=n.length-i-1);var a=Math.pow(10,r),o=Math.round(e*t*a),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/a,c=o%a;o<0?(l=0|-Math.ceil(l),c=0|-c):(l=0|Math.floor(l),c|=0);var u=""+l;if(o<0&&(u="-"+u),r){for(var d=""+c;d.length<r;)d="0"+d;return u+"."+d}return u}function r(e,t){for(var n=[],r=0;r<3;++r){var a=[];e[0][r],e[1][r];for(var o=0;o*t[r]<=e[1][r];++o)a.push({x:o*t[r],text:i(t[r],o)});for(o=-1;o*t[r]>=e[0][r];--o)a.push({x:o*t[r],text:i(t[r],o)});n.push(a)}return n}function a(e,t){for(var n=0;n<3;++n){if(e[n].length!==t[n].length)return!1;for(var i=0;i<e[n].length;++i){var r=e[n][i],a=t[n][i];if(r.x!==a.x||r.text!==a.text||r.font!==a.font||r.fontColor!==a.fontColor||r.fontSize!==a.fontSize||r.dx!==a.dx||r.dy!==a.dy)return!1}}return!0}n.create=r,n.equal=a},{}],77:[function(e,t,n){t.exports=v;var i=e("extract-frustum-planes"),r=e("split-polygon"),a=e("./lib/cube.js"),o=e("gl-mat4/multiply"),s=e("gl-mat4/transpose"),l=e("gl-vec4/transformMat4"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array(16);function d(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}var g=[0,0,0,1],h=[0,0,0,1];function f(e,t,n,i,r){for(var a=0;a<3;++a){for(var o=g,s=h,c=0;c<3;++c)s[c]=o[c]=n[c];s[3]=o[3]=1,s[a]+=1,l(s,s,t),s[3]<0&&(e[a]=1/0),o[a]-=1,l(o,o,t),o[3]<0&&(e[a]=1/0);var u=(o[0]/o[3]-s[0]/s[3])*i,d=(o[1]/o[3]-s[1]/s[3])*r;e[a]=.25*Math.sqrt(u*u+d*d)}return e}var p=[new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0)],m=[0,0,0];function v(e,t,n,l,d){var g=t.model||c,h=t.view||c,v=t.projection||c,b=t._ortho||!1,y=e.bounds,I=(d=d||a(g,h,v,y,b)).axis;o(u,h,g),o(u,v,u);for(var C=p,x=0;x<3;++x)C[x].lo=1/0,C[x].hi=-1/0,C[x].pixelsPerDataUnit=1/0;var B=i(s(u,u));s(u,u);for(var A=0;A<3;++A){var F=(A+1)%3,Q=(A+2)%3,U=m;e:for(x=0;x<2;++x){var w=[];if(I[A]<0!=!!x){U[A]=y[x][A];for(var G=0;G<2;++G){U[F]=y[G^x][F];for(var R=0;R<2;++R)U[Q]=y[R^G^x][Q],w.push(U.slice())}var L=b?5:4;for(G=L;G===L;++G){if(0===w.length)continue e;w=r.positive(w,B[G])}for(G=0;G<w.length;++G){Q=w[G];var S=f(m,u,Q,n,l);for(R=0;R<3;++R)C[R].lo=Math.min(C[R].lo,Q[R]),C[R].hi=Math.max(C[R].hi,Q[R]),R!==A&&(C[R].pixelsPerDataUnit=Math.min(C[R].pixelsPerDataUnit,Math.abs(S[R])))}}}}return C}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(e,t,n){var r=e("typedarray-pool"),a=e("ndarray-ops"),o=e("ndarray"),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(e,t,n,i,r){this.gl=e,this.type=t,this.handle=n,this.length=i,this.usage=r}var c=l.prototype;function u(e,t,n,i,r,a){var o=r.length*r.BYTES_PER_ELEMENT;if(a<0)return e.bufferData(t,r,i),o;if(o+a>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,a,r),n}function d(e,t){for(var n=r.malloc(e.length,t),i=e.length,a=0;a<i;++a)n[a]=e[a];return n}function g(e,t){for(var n=1,i=t.length-1;i>=0;--i){if(t[i]!==n)return!1;n*=e[i]}return!0}function h(e,t,n,i){if(n=n||e.ARRAY_BUFFER,i=i||e.DYNAMIC_DRAW,n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==e.DYNAMIC_DRAW&&i!==e.STATIC_DRAW&&i!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var r=e.createBuffer(),a=new l(e,n,r,0,i);return a.update(t),a}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"===i(e)&&void 0!==e.shape){var n=e.dtype;if(s.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(n=gl.getExtension("OES_element_index_uint")&&"uint16"!==n?"uint32":"uint16"),n===e.dtype&&g(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=u(this.gl,this.type,this.length,this.usage,e.data,t):this.length=u(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var l=r.malloc(e.size,n),c=o(l,e.shape);a.assign(c,e),this.length=u(this.gl,this.type,this.length,this.usage,t<0?l:l.subarray(0,e.size),t),r.free(l)}}else if(Array.isArray(e)){var h;h=this.type===this.gl.ELEMENT_ARRAY_BUFFER?d(e,"uint16"):d(e,"float32"),this.length=u(this.gl,this.type,this.length,this.usage,t<0?h:h.subarray(0,e.length),t),r.free(h)}else if("object"===i(e)&&"number"==typeof e.length)this.length=u(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(e|=0)<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},t.exports=h},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(e,t,n){var i=e("gl-vec3");t.exports=function(e,t){var n=e.positions,r=e.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:e.vertexIntensityBounds,vectors:[],cells:[],coneOffset:e.coneOffset,colormap:e.colormap};if(0===e.positions.length)return t&&(t[0]=[0,0,0],t[1]=[0,0,0]),a;for(var o=0,s=1/0,l=-1/0,c=1/0,u=-1/0,d=1/0,g=-1/0,h=null,f=null,p=[],m=1/0,v=!1,b=0;b<n.length;b++){var y=n[b];s=Math.min(y[0],s),l=Math.max(y[0],l),c=Math.min(y[1],c),u=Math.max(y[1],u),d=Math.min(y[2],d),g=Math.max(y[2],g);var I=r[b];if(i.length(I)>o&&(o=i.length(I)),b){var C=2*i.distance(h,y)/(i.length(f)+i.length(I));C?(m=Math.min(m,C),v=!1):v=!0}v||(h=y,f=I),p.push(I)}var x=[s,c,d],B=[l,u,g];t&&(t[0]=x,t[1]=B),0===o&&(o=1);var A=1/o;isFinite(m)||(m=1),a.vectorScale=m;var F=e.coneSize||.5;e.absoluteConeSize&&(F=e.absoluteConeSize*A),a.coneScale=F,b=0;for(var Q=0;b<n.length;b++)for(var U=(y=n[b])[0],w=y[1],G=y[2],R=p[b],L=i.length(R)*A,S=0,V=8;S<V;S++){a.positions.push([U,w,G,Q++]),a.positions.push([U,w,G,Q++]),a.positions.push([U,w,G,Q++]),a.positions.push([U,w,G,Q++]),a.positions.push([U,w,G,Q++]),a.positions.push([U,w,G,Q++]),a.vectors.push(R),a.vectors.push(R),a.vectors.push(R),a.vectors.push(R),a.vectors.push(R),a.vectors.push(R),a.vertexIntensity.push(L,L,L),a.vertexIntensity.push(L,L,L);var Z=a.positions.length;a.cells.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}return a};var r=e("./lib/shaders");t.exports.createMesh=e("./create_mesh"),t.exports.createConeMesh=function(e,n){return t.exports.createMesh(e,n,{shaders:r,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(e,t,n){var i=e("gl-shader"),r=e("gl-buffer"),a=e("gl-vao"),o=e("gl-texture2d"),s=e("gl-mat4/multiply"),l=e("gl-mat4/invert"),c=e("ndarray"),u=e("colormap"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(e,t,n,i,r,a,o,s,l,c,u){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.pickShader=i,this.trianglePositions=r,this.triangleVectors=a,this.triangleColors=s,this.triangleUVs=l,this.triangleIds=o,this.triangleVAO=c,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=u,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=d,this._view=d,this._projection=d,this._resolution=[1,1]}var h=g.prototype;function f(e){for(var t=u({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),i=0;i<256;++i){for(var r=t[i],a=0;a<3;++a)n[4*i+a]=r[a];n[4*i+3]=255*r[3]}return c(n,[256,256,4],[4,0,1])}function p(e){for(var t=e.length,n=new Array(t),i=0;i<t;++i)n[i]=e[i][2];return n}function m(e,t){var n=i(e,t.meshShader.vertex,t.meshShader.fragment,null,t.meshShader.attributes);return n.attributes.position.location=0,n.attributes.color.location=2,n.attributes.uv.location=3,n.attributes.vector.location=4,n}function v(e,t){var n=i(e,t.pickShader.vertex,t.pickShader.fragment,null,t.pickShader.attributes);return n.attributes.position.location=0,n.attributes.id.location=1,n.attributes.vector.location=4,n}function b(e,t,n){var i=n.shaders;1===arguments.length&&(e=(t=e).gl);var s=m(e,i),l=v(e,i),u=o(e,c(new Uint8Array([255,255,255,255]),[1,1,4]));u.generateMipmap(),u.minFilter=e.LINEAR_MIPMAP_LINEAR,u.magFilter=e.LINEAR;var d=r(e),h=r(e),f=r(e),p=r(e),b=r(e),y=new g(e,u,s,l,d,h,b,f,p,a(e,[{buffer:d,type:e.FLOAT,size:4},{buffer:b,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:f,type:e.FLOAT,size:4},{buffer:p,type:e.FLOAT,size:2},{buffer:h,type:e.FLOAT,size:4}]),n.traceType||"cone");return y.update(t),y}h.isOpaque=function(){return this.opacity>=1},h.isTransparent=function(){return this.opacity<1},h.pickSlots=1,h.setPickBase=function(e){this.pickId=e},h.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),void 0!==e.tubeScale&&(this.tubeScale=e.tubeScale),void 0!==e.vectorScale&&(this.vectorScale=e.vectorScale),void 0!==e.coneScale&&(this.coneScale=e.coneScale),void 0!==e.coneOffset&&(this.coneOffset=e.coneOffset),e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(f(e.colormap)),this.texture.generateMipmap());var n=e.cells,i=e.positions,r=e.vectors;if(i&&n&&r){var a=[],o=[],s=[],l=[],c=[];this.cells=n,this.positions=i,this.vectors=r;var u=e.meshColor||[1,1,1,1],d=e.vertexIntensity,g=1/0,h=-1/0;if(d)if(e.vertexIntensityBounds)g=+e.vertexIntensityBounds[0],h=+e.vertexIntensityBounds[1];else for(var m=0;m<d.length;++m){var v=d[m];g=Math.min(g,v),h=Math.max(h,v)}else for(m=0;m<i.length;++m)v=i[m][2],g=Math.min(g,v),h=Math.max(h,v);for(this.intensity=d||p(i),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],m=0;m<i.length;++m)for(var b=i[m],y=0;y<3;++y)!isNaN(b[y])&&isFinite(b[y])&&(this.bounds[0][y]=Math.min(this.bounds[0][y],b[y]),this.bounds[1][y]=Math.max(this.bounds[1][y],b[y]));var I=0;e:for(m=0;m<n.length;++m){var C=n[m];if(3===C.length){for(y=0;y<3;++y){b=i[B=C[y]];for(var x=0;x<3;++x)if(isNaN(b[x])||!isFinite(b[x]))continue e}for(y=0;y<3;++y){var B;b=i[B=C[2-y]],a.push(b[0],b[1],b[2],b[3]);var A=r[B];o.push(A[0],A[1],A[2],A[3]||0);var F,Q=u;3===Q.length?s.push(Q[0],Q[1],Q[2],1):s.push(Q[0],Q[1],Q[2],Q[3]),F=d?[(d[B]-g)/(h-g),0]:[(b[2]-g)/(h-g),0],l.push(F[0],F[1]),c.push(m)}I+=1}}this.triangleCount=I,this.trianglePositions.update(a),this.triangleVectors.update(o),this.triangleColors.update(s),this.triangleUVs.update(l),this.triangleIds.update(new Uint32Array(c))}},h.drawTransparent=h.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||d,i=e.view||d,r=e.projection||d,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var c={model:n,view:i,projection:r,inverseModel:d.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};c.inverseModel=l(c.inverseModel,c.model),t.disable(t.CULL_FACE),this.texture.bind(0);var u=new Array(16);for(s(u,c.view,c.model),s(u,c.projection,u),l(u,u),o=0;o<3;++o)c.eyePosition[o]=u[12+o]/u[15];var g=u[15];for(o=0;o<3;++o)g+=this.lightPosition[o]*u[4*o+3];for(o=0;o<3;++o){for(var h=u[12+o],f=0;f<3;++f)h+=u[4*f+o]*this.lightPosition[f];c.lightPosition[o]=h/g}if(this.triangleCount>0){var p=this.triShader;p.bind(),p.uniforms=c,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},h.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||d,i=e.view||d,r=e.projection||d,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(i),this._projection=[].slice.call(r),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:n,view:i,projection:r,clipBounds:a,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},l=this.pickShader;l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},h.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],i=this.positions[n[1]].slice(0,3),r={position:i,dataCoordinate:i,index:Math.floor(n[1]/48)};return"cone"===this.traceType?r.index=Math.floor(n[1]/48):"streamtube"===this.traceType&&(r.intensity=this.intensity[n[1]],r.velocity=this.vectors[n[1]].slice(0,3),r.divergence=this.vectors[n[1]][3],r.index=t),r},h.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},t.exports=b},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(e,t,n){var i=e("glslify"),r=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:r,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},n.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(e,t,n){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(e,t,n){var i=e("./1.0/numbers");t.exports=function(e){return i[e]}},{"./1.0/numbers":82}],84:[function(e,t,n){t.exports=g;var i=e("gl-buffer"),r=e("gl-vao"),a=e("./shaders/index"),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,n,i){this.gl=e,this.shader=i,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=s.prototype;function c(e,t){for(var n=0;n<3;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(e){var t=this.gl,n=this.shader.uniforms;this.shader.bind();var i=n.view=e.view||o,r=n.projection=e.projection||o;n.model=e.model||o,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var a=i[12],s=i[13],l=i[14],c=i[15],u=(e._ortho?2:1)*this.pixelRatio*(r[3]*a+r[7]*s+r[11]*l+r[15]*c)/t.drawingBufferHeight;this.vao.bind();for(var d=0;d<3;++d)t.lineWidth(this.lineWidth[d]*this.pixelRatio),n.capSize=this.capSize[d]*u,this.lineCount[d]&&t.drawArrays(t.LINES,this.lineOffset[d],this.lineCount[d]);this.vao.unbind()};var u=function(){for(var e=new Array(3),t=0;t<3;++t){for(var n=[],i=1;i<=2;++i)for(var r=-1;r<=1;r+=2){var a=[0,0,0];a[(i+t)%3]=r,n.push(a)}e[t]=n}return e}();function d(e,t,n,i){for(var r=u[i],a=0;a<r.length;++a){var o=r[a];e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return r.length}function g(e){var t=e.gl,n=i(t),o=r(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),l=a(t);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var c=new s(t,n,o,l);return c.update(e),c}l.update=function(e){"lineWidth"in(e=e||{})&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],n=e.position,i=e.error;if(Array.isArray(t[0])||(t=[t,t,t]),n&&i){var r=[],a=n.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;e:for(var l=0;l<a;++l){for(var u=n[l],g=0;g<3;++g)if(isNaN(u[g])||!isFinite(u[g]))continue e;var h,f=i[l],p=t[s];Array.isArray(p[0])&&(p=t[l]),3===p.length?p=[p[0],p[1],p[2],1]:4===p.length&&(p=[p[0],p[1],p[2],p[3]],!this.hasAlpha&&p[3]<1&&(this.hasAlpha=!0)),isNaN(f[0][s])||isNaN(f[1][s])||(f[0][s]<0&&((h=u.slice())[s]+=f[0][s],r.push(u[0],u[1],u[2],p[0],p[1],p[2],p[3],0,0,0,h[0],h[1],h[2],p[0],p[1],p[2],p[3],0,0,0),c(this.bounds,h),o+=2+d(r,h,p,s)),f[1][s]>0&&((h=u.slice())[s]+=f[1][s],r.push(u[0],u[1],u[2],p[0],p[1],p[2],p[3],0,0,0,h[0],h[1],h[2],p[0],p[1],p[2],p[3],0,0,0),c(this.bounds,h),o+=2+d(r,h,p,s)))}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(r)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(e,t,n){var i=e("glslify"),r=e("gl-shader"),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);t.exports=function(e){return r(e,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(e,t,n){var i=e("gl-texture2d");t.exports=y;var r,a,o,s,l=null;function c(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function u(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function d(e,t){var n=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(n+1);for(var i=0;i<=n;++i){for(var r=new Array(n),a=0;a<i;++a)r[a]=e.COLOR_ATTACHMENT0+a;for(a=i;a<n;++a)r[a]=e.NONE;l[i]=r}}function g(e){switch(e){case r:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(e,t,n,r,a,o){if(!r)return null;var s=i(e,t,n,a,r);return s.magFilter=e.NEAREST,s.minFilter=e.NEAREST,s.mipSamples=1,s.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,s.handle,0),s}function f(e,t,n,i,r){var a=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,a),e.renderbufferStorage(e.RENDERBUFFER,i,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,a),a}function p(e){var t=c(e.gl),n=e.gl,i=e.handle=n.createFramebuffer(),r=e._shape[0],a=e._shape[1],o=e.color.length,s=e._ext,d=e._useStencil,p=e._useDepth,m=e._colorType;n.bindFramebuffer(n.FRAMEBUFFER,i);for(var v=0;v<o;++v)e.color[v]=h(n,r,a,m,n.RGBA,n.COLOR_ATTACHMENT0+v);0===o?(e._color_rb=f(n,r,a,n.RGBA4,n.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(l[0])):o>1&&s.drawBuffersWEBGL(l[o]);var b=n.getExtension("WEBGL_depth_texture");b?d?e.depth=h(n,r,a,b.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):p&&(e.depth=h(n,r,a,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):p&&d?e._depth_rb=f(n,r,a,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):p?e._depth_rb=f(n,r,a,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):d&&(e._depth_rb=f(n,r,a,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT));var y=n.checkFramebufferStatus(n.FRAMEBUFFER);if(y!==n.FRAMEBUFFER_COMPLETE){for(e._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(n.deleteRenderbuffer(e._depth_rb),e._depth_rb=null),v=0;v<e.color.length;++v)e.color[v].dispose(),e.color[v]=null;e._color_rb&&(n.deleteRenderbuffer(e._color_rb),e._color_rb=null),u(n,t),g(y)}u(n,t)}function m(e,t,n,i,r,a,o,s){this.gl=e,this._shape=[0|t,0|n],this._destroyed=!1,this._ext=s,this.color=new Array(r);for(var l=0;l<r;++l)this.color[l]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=i,this._useDepth=a,this._useStencil=o;var c=this,u=[0|t,0|n];Object.defineProperties(u,{0:{get:function(){return c._shape[0]},set:function(e){return c.width=e}},1:{get:function(){return c._shape[1]},set:function(e){return c.height=e}}}),this._shapeVector=u,p(this)}var v=m.prototype;function b(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==n){var i=e.gl,r=i.getParameter(i.MAX_RENDERBUFFER_SIZE);if(t<0||t>r||n<0||n>r)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;for(var a=c(i),o=0;o<e.color.length;++o)e.color[o].shape=e._shape;e._color_rb&&(i.bindRenderbuffer(i.RENDERBUFFER,e._color_rb),i.renderbufferStorage(i.RENDERBUFFER,i.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(i.bindRenderbuffer(i.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&i.renderbufferStorage(i.RENDERBUFFER,i.STENCIL_INDEX,e._shape[0],e._shape[1])),i.bindFramebuffer(i.FRAMEBUFFER,e.handle);var s=i.checkFramebufferStatus(i.FRAMEBUFFER);s!==i.FRAMEBUFFER_COMPLETE&&(e.dispose(),u(i,a),g(s)),u(i,a)}}function y(e,t,n,i){r||(r=e.FRAMEBUFFER_UNSUPPORTED,a=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var c=e.getExtension("WEBGL_draw_buffers");if(!l&&c&&d(e,c),Array.isArray(t)&&(i=n,n=0|t[1],t=0|t[0]),"number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var u=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>u||n<0||n>u)throw new Error("gl-fbo: Parameters are too large for FBO");var g=1;if("color"in(i=i||{})){if((g=Math.max(0|i.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(g>1){if(!c)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(g>e.getParameter(c.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+g+" draw buffers")}}var h=e.UNSIGNED_BYTE,f=e.getExtension("OES_texture_float");if(i.float&&g>0){if(!f)throw new Error("gl-fbo: Context does not support floating point textures");h=e.FLOAT}else i.preferFloat&&g>0&&f&&(h=e.FLOAT);var p=!0;"depth"in i&&(p=!!i.depth);var v=!1;return"stencil"in i&&(v=!!i.stencil),new m(e,t,n,h,g,p,v,c)}Object.defineProperties(v,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],n=0|e[1];return b(this,t,n),[t,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return b(this,e|=0,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,b(this,this._shape[0],e),e},enumerable:!1}}),v.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},v.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(e,t,n){var i=e("sprintf-js").sprintf,r=e("gl-constants/lookup"),a=e("glsl-shader-name"),o=e("add-line-numbers");function s(e,t,n){var s=a(t)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==n&&(l=n===r.FRAGMENT_SHADER?"fragment":"vertex");for(var c=i("Error compiling %s shader %s:\n",l,s),u=i("%s%s",c,e),d=e.split("\n"),g={},h=0;h<d.length;h++){var f=d[h];if(""!==f&&"\0"!==f){var p=parseInt(f.split(":")[2]);if(isNaN(p))throw new Error(i("Could not parse error: %s",f));g[p]=f}}var m=o(t).split("\n");for(h=0;h<m.length;h++)if((g[h+3]||g[h+2]||g[h+1])&&(c+=m[h]+"\n",g[h+1])){var v=g[h+1];v=v.substr(v.split(":",3).join(":").length+1).trim(),c+=i("^^^ %s\n\n",v)}return{long:c.trim(),short:u.trim()}}t.exports=s},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(e,t,n){t.exports=h;var i=e("binary-search-bounds"),r=e("iota-array"),a=e("typedarray-pool"),o=e("gl-shader"),s=e("gl-buffer"),l=e("./lib/shaders");function c(e,t,n,i,r,a,o){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=i,this.weightBuffer=r,this.colorBuffer=a,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var u,d=c.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];function h(e,t){var n=e.gl,i=new c(e,o(n,l.vertex,l.fragment),o(n,l.pickVertex,l.pickFragment),s(n),s(n),s(n),s(n));return i.update(t),e.addObject(i),i}d.draw=(u=[1,0,0,0,1,0,0,0,1],function(){var e=this.plot,t=this.shader,n=this.bounds,i=this.numVertices;if(!(i<=0)){var r=e.gl,a=e.dataBox,o=n[2]-n[0],s=n[3]-n[1],l=a[2]-a[0],c=a[3]-a[1];u[0]=2*o/l,u[4]=2*s/c,u[6]=2*(n[0]-a[0])/l-1,u[7]=2*(n[1]-a[1])/c-1,t.bind();var d=t.uniforms;d.viewTransform=u,d.shape=this.shape;var g=t.attributes;this.positionBuffer.bind(),g.position.pointer(),this.weightBuffer.bind(),g.weight.pointer(r.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),g.color.pointer(r.UNSIGNED_BYTE,!0),r.drawArrays(r.TRIANGLES,0,i)}}),d.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var i=this.plot,r=this.pickShader,a=this.bounds,o=this.numVertices;if(!(o<=0)){var s=i.gl,l=i.dataBox,c=a[2]-a[0],u=a[3]-a[1],d=l[2]-l[0],g=l[3]-l[1];e[0]=2*c/d,e[4]=2*u/g,e[6]=2*(a[0]-l[0])/d-1,e[7]=2*(a[1]-l[1])/g-1;for(var h=0;h<4;++h)t[h]=n>>8*h&255;this.pickOffset=n,r.bind();var f=r.uniforms;f.viewTransform=e,f.pickOffset=t,f.shape=this.shape;var p=r.attributes;return this.positionBuffer.bind(),p.position.pointer(),this.weightBuffer.bind(),p.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),p.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,o),n+this.shape[0]*this.shape[1]}}}(),d.pick=function(e,t,n){var i=this.pickOffset,r=this.shape[0]*this.shape[1];if(n<i||n>=i+r)return null;var a=n-i,o=this.xData,s=this.yData;return{object:this,pointId:a,dataCoord:[o[a%this.shape[0]],s[a/this.shape[0]|0]]}},d.update=function(e){var t=(e=e||{}).shape||[0,0],n=e.x||r(t[0]),o=e.y||r(t[1]),s=e.z||new Float32Array(t[0]*t[1]),l=!1!==e.zsmooth;this.xData=n,this.yData=o;var c,u,d,h,f=e.colorLevels||[0],p=e.colorValues||[0,0,0,1],m=f.length,v=this.bounds;l?(c=v[0]=n[0],u=v[1]=o[0],d=v[2]=n[n.length-1],h=v[3]=o[o.length-1]):(c=v[0]=n[0]+(n[1]-n[0])/2,u=v[1]=o[0]+(o[1]-o[0])/2,d=v[2]=n[n.length-1]+(n[n.length-1]-n[n.length-2])/2,h=v[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var b=1/(d-c),y=1/(h-u),I=t[0],C=t[1];this.shape=[I,C];var x=(l?(I-1)*(C-1):I*C)*(g.length>>>1);this.numVertices=x;for(var B=a.mallocUint8(4*x),A=a.mallocFloat32(2*x),F=a.mallocUint8(2*x),Q=a.mallocUint32(x),U=0,w=l?I-1:I,G=l?C-1:C,R=0;R<G;++R){var L,S;l?(L=y*(o[R]-u),S=y*(o[R+1]-u)):(L=R<C-1?y*(o[R]-(o[R+1]-o[R])/2-u):y*(o[R]-(o[R]-o[R-1])/2-u),S=R<C-1?y*(o[R]+(o[R+1]-o[R])/2-u):y*(o[R]+(o[R]-o[R-1])/2-u));for(var V=0;V<w;++V){var Z,k;l?(Z=b*(n[V]-c),k=b*(n[V+1]-c)):(Z=V<I-1?b*(n[V]-(n[V+1]-n[V])/2-c):b*(n[V]-(n[V]-n[V-1])/2-c),k=V<I-1?b*(n[V]+(n[V+1]-n[V])/2-c):b*(n[V]+(n[V]-n[V-1])/2-c));for(var E=0;E<g.length;E+=2){var X,N,W,_,T=g[E],M=g[E+1],H=s[l?(R+M)*I+(V+T):R*I+V],Y=i.le(f,H);if(Y<0)X=p[0],N=p[1],W=p[2],_=p[3];else if(Y===m-1)X=p[4*m-4],N=p[4*m-3],W=p[4*m-2],_=p[4*m-1];else{var D=(H-f[Y])/(f[Y+1]-f[Y]),z=1-D,O=4*Y,J=4*(Y+1);X=z*p[O]+D*p[J],N=z*p[O+1]+D*p[J+1],W=z*p[O+2]+D*p[J+2],_=z*p[O+3]+D*p[J+3]}B[4*U]=255*X,B[4*U+1]=255*N,B[4*U+2]=255*W,B[4*U+3]=255*_,A[2*U]=.5*Z+.5*k,A[2*U+1]=.5*L+.5*S,F[2*U]=T,F[2*U+1]=M,Q[U]=R*I+V,U+=1}}}this.positionBuffer.update(A),this.weightBuffer.update(F),this.colorBuffer.update(B),this.idBuffer.update(Q),a.free(A),a.free(B),a.free(F),a.free(Q)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(e,t,n){var i=e("glslify");t.exports={fragment:i(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(e,t,n){var i=e("glslify"),r=e("gl-shader"),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(e){return r(e,a,o,null,l)},n.createPickShader=function(e){return r(e,a,s,null,l)}},{"gl-shader":132,glslify:231}],91:[function(e,t,n){t.exports=I;var i=e("gl-buffer"),r=e("gl-vao"),a=e("gl-texture2d"),o=new Uint8Array(4),s=new Float32Array(o.buffer);function l(e,t,n,i){return o[0]=i,o[1]=n,o[2]=t,o[3]=e,s[0]}var c=e("binary-search-bounds"),u=e("ndarray"),d=e("./lib/shaders"),g=d.createShader,h=d.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(e,t){for(var n=0,i=0;i<3;++i){var r=e[i]-t[i];n+=r*r}return Math.sqrt(n)}function m(e){for(var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)t[0][n]=Math.max(e[0][n],t[0][n]),t[1][n]=Math.min(e[1][n],t[1][n]);return t}function v(e,t,n,i){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=i}function b(e,t,n,i,r,a){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=i,this.vao=r,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var y=b.prototype;function I(e){var t=e.gl||e.scene&&e.scene.gl,n=g(t);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var o=h(t);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;for(var s=i(t),l=r(t,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),c=u(new Array(1024),[256,1,4]),d=0;d<1024;++d)c.data[d]=255;var f=a(t,c);f.wrap=t.REPEAT;var p=new b(t,n,o,s,l,f);return p.update(e),p}y.isTransparent=function(){return this.hasAlpha},y.isOpaque=function(){return!this.hasAlpha},y.pickSlots=1,y.setPickBase=function(e){this.pickId=e},y.drawTransparent=y.draw=function(e){if(this.vertexCount){var t=this.gl,n=this.shader,i=this.vao;n.bind(),n.uniforms={model:e.model||f,view:e.view||f,projection:e.projection||f,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},i.bind(),i.draw(t.TRIANGLE_STRIP,this.vertexCount),i.unbind()}},y.drawPick=function(e){if(this.vertexCount){var t=this.gl,n=this.pickShader,i=this.vao;n.bind(),n.uniforms={model:e.model||f,view:e.view||f,projection:e.projection||f,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},i.bind(),i.draw(t.TRIANGLE_STRIP,this.vertexCount),i.unbind()}},y.update=function(e){var t,n;this.dirty=!0;var i=!!e.connectGaps;"dashScale"in e&&(this.dashScale=e.dashScale),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var r=[],a=[],o=[],s=0,l=0,d=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],g=e.position||e.positions;if(g){var h=e.color||e.colors||[0,0,0,1],f=e.lineWidth||1,m=!1;e:for(t=1;t<g.length;++t){var v,b,y,I=g[t-1],C=g[t];for(a.push(s),o.push(I.slice()),n=0;n<3;++n){if(isNaN(I[n])||isNaN(C[n])||!isFinite(I[n])||!isFinite(C[n])){if(!i&&r.length>0){for(var x=0;x<24;++x)r.push(r[r.length-12]);l+=2,m=!0}continue e}d[0][n]=Math.min(d[0][n],I[n],C[n]),d[1][n]=Math.max(d[1][n],I[n],C[n])}Array.isArray(h[0])?(v=h.length>t-1?h[t-1]:h.length>0?h[h.length-1]:[0,0,0,1],b=h.length>t?h[t]:h.length>0?h[h.length-1]:[0,0,0,1]):v=b=h,3===v.length&&(v=[v[0],v[1],v[2],1]),3===b.length&&(b=[b[0],b[1],b[2],1]),!this.hasAlpha&&v[3]<1&&(this.hasAlpha=!0),y=Array.isArray(f)?f.length>t-1?f[t-1]:f.length>0?f[f.length-1]:[0,0,0,1]:f;var B=s;if(s+=p(I,C),m){for(n=0;n<2;++n)r.push(I[0],I[1],I[2],C[0],C[1],C[2],B,y,v[0],v[1],v[2],v[3]);l+=2,m=!1}r.push(I[0],I[1],I[2],C[0],C[1],C[2],B,y,v[0],v[1],v[2],v[3],I[0],I[1],I[2],C[0],C[1],C[2],B,-y,v[0],v[1],v[2],v[3],C[0],C[1],C[2],I[0],I[1],I[2],s,-y,b[0],b[1],b[2],b[3],C[0],C[1],C[2],I[0],I[1],I[2],s,y,b[0],b[1],b[2],b[3]),l+=4}}if(this.buffer.update(r),a.push(s),o.push(g[g.length-1].slice()),this.bounds=d,this.vertexCount=l,this.points=o,this.arcLength=a,"dashes"in e){var A=e.dashes.slice();for(A.unshift(0),t=1;t<A.length;++t)A[t]=A[t-1]+A[t];var F=u(new Array(1024),[256,1,4]);for(t=0;t<256;++t){for(n=0;n<4;++n)F.set(t,0,n,0);1&c.le(A,A[A.length-1]*t/255)?F.set(t,0,0,0):F.set(t,0,0,255)}this.texture.setPixels(F)}},y.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},y.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=l(e.value[0],e.value[1],e.value[2],0),n=c.le(this.arcLength,t);if(n<0)return null;if(n===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),n);for(var i=this.points[n],r=this.points[Math.min(n+1,this.points.length-1)],a=(t-this.arcLength[n])/(this.arcLength[n+1]-this.arcLength[n]),o=1-a,s=[0,0,0],u=0;u<3;++u)s[u]=o*i[u]+a*r[u];var d=Math.min(a<.5?n:n+1,this.points.length-1);return new v(t,s,d,this.points[d])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(e,t,n){function i(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=i},{}],93:[function(e,t,n){function i(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=i},{}],94:[function(e,t,n){function i(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],g=e[11],h=e[12],f=e[13],p=e[14],m=e[15];return(t*o-n*a)*(d*m-g*p)-(t*s-i*a)*(u*m-g*f)+(t*l-r*a)*(u*p-d*f)+(n*s-i*o)*(c*m-g*h)-(n*l-r*o)*(c*p-d*h)+(i*l-r*s)*(c*f-u*h)}t.exports=i},{}],95:[function(e,t,n){function i(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n+n,s=i+i,l=r+r,c=n*o,u=i*o,d=i*s,g=r*o,h=r*s,f=r*l,p=a*o,m=a*s,v=a*l;return e[0]=1-d-f,e[1]=u+v,e[2]=g-m,e[3]=0,e[4]=u-v,e[5]=1-c-f,e[6]=h+p,e[7]=0,e[8]=g+m,e[9]=h-p,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=i},{}],96:[function(e,t,n){function i(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=i+i,l=r+r,c=a+a,u=i*s,d=i*l,g=i*c,h=r*l,f=r*c,p=a*c,m=o*s,v=o*l,b=o*c;return e[0]=1-(h+p),e[1]=d+b,e[2]=g-v,e[3]=0,e[4]=d-b,e[5]=1-(u+p),e[6]=f+m,e[7]=0,e[8]=g+v,e[9]=f-m,e[10]=1-(u+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}t.exports=i},{}],97:[function(e,t,n){function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=i},{}],98:[function(e,t,n){function i(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],g=t[10],h=t[11],f=t[12],p=t[13],m=t[14],v=t[15],b=n*s-i*o,y=n*l-r*o,I=n*c-a*o,C=i*l-r*s,x=i*c-a*s,B=r*c-a*l,A=u*p-d*f,F=u*m-g*f,Q=u*v-h*f,U=d*m-g*p,w=d*v-h*p,G=g*v-h*m,R=b*G-y*w+I*U+C*Q-x*F+B*A;return R?(R=1/R,e[0]=(s*G-l*w+c*U)*R,e[1]=(r*w-i*G-a*U)*R,e[2]=(p*B-m*x+v*C)*R,e[3]=(g*x-d*B-h*C)*R,e[4]=(l*Q-o*G-c*F)*R,e[5]=(n*G-r*Q+a*F)*R,e[6]=(m*I-f*B-v*y)*R,e[7]=(u*B-g*I+h*y)*R,e[8]=(o*w-s*Q+c*A)*R,e[9]=(i*Q-n*w-a*A)*R,e[10]=(f*x-p*I+v*b)*R,e[11]=(d*I-u*x-h*b)*R,e[12]=(s*F-o*U-l*A)*R,e[13]=(n*U-i*F+r*A)*R,e[14]=(p*y-f*C-m*b)*R,e[15]=(u*C-d*y+g*b)*R,e):null}t.exports=i},{}],99:[function(e,t,n){var i=e("./identity");function r(e,t,n,r){var a,o,s,l,c,u,d,g,h,f,p=t[0],m=t[1],v=t[2],b=r[0],y=r[1],I=r[2],C=n[0],x=n[1],B=n[2];return Math.abs(p-C)<1e-6&&Math.abs(m-x)<1e-6&&Math.abs(v-B)<1e-6?i(e):(d=p-C,g=m-x,h=v-B,a=y*(h*=f=1/Math.sqrt(d*d+g*g+h*h))-I*(g*=f),o=I*(d*=f)-b*h,s=b*g-y*d,(f=Math.sqrt(a*a+o*o+s*s))?(a*=f=1/f,o*=f,s*=f):(a=0,o=0,s=0),l=g*s-h*o,c=h*a-d*s,u=d*o-g*a,(f=Math.sqrt(l*l+c*c+u*u))?(l*=f=1/f,c*=f,u*=f):(l=0,c=0,u=0),e[0]=a,e[1]=l,e[2]=d,e[3]=0,e[4]=o,e[5]=c,e[6]=g,e[7]=0,e[8]=s,e[9]=u,e[10]=h,e[11]=0,e[12]=-(a*p+o*m+s*v),e[13]=-(l*p+c*m+u*v),e[14]=-(d*p+g*m+h*v),e[15]=1,e)}t.exports=r},{"./identity":97}],100:[function(e,t,n){function i(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],g=t[9],h=t[10],f=t[11],p=t[12],m=t[13],v=t[14],b=t[15],y=n[0],I=n[1],C=n[2],x=n[3];return e[0]=y*i+I*s+C*d+x*p,e[1]=y*r+I*l+C*g+x*m,e[2]=y*a+I*c+C*h+x*v,e[3]=y*o+I*u+C*f+x*b,y=n[4],I=n[5],C=n[6],x=n[7],e[4]=y*i+I*s+C*d+x*p,e[5]=y*r+I*l+C*g+x*m,e[6]=y*a+I*c+C*h+x*v,e[7]=y*o+I*u+C*f+x*b,y=n[8],I=n[9],C=n[10],x=n[11],e[8]=y*i+I*s+C*d+x*p,e[9]=y*r+I*l+C*g+x*m,e[10]=y*a+I*c+C*h+x*v,e[11]=y*o+I*u+C*f+x*b,y=n[12],I=n[13],C=n[14],x=n[15],e[12]=y*i+I*s+C*d+x*p,e[13]=y*r+I*l+C*g+x*m,e[14]=y*a+I*c+C*h+x*v,e[15]=y*o+I*u+C*f+x*b,e}t.exports=i},{}],101:[function(e,t,n){function i(e,t,n,i,r,a,o){var s=1/(t-n),l=1/(i-r),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(o+a)*c,e[15]=1,e}t.exports=i},{}],102:[function(e,t,n){function i(e,t,n,i,r){var a=1/Math.tan(t/2),o=1/(i-r);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+i)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*i*o,e[15]=0,e}t.exports=i},{}],103:[function(e,t,n){function i(e,t,n,i){var r,a,o,s,l,c,u,d,g,h,f,p,m,v,b,y,I,C,x,B,A,F,Q,U,w=i[0],G=i[1],R=i[2],L=Math.sqrt(w*w+G*G+R*R);return Math.abs(L)<1e-6?null:(w*=L=1/L,G*=L,R*=L,r=Math.sin(n),o=1-(a=Math.cos(n)),s=t[0],l=t[1],c=t[2],u=t[3],d=t[4],g=t[5],h=t[6],f=t[7],p=t[8],m=t[9],v=t[10],b=t[11],y=w*w*o+a,I=G*w*o+R*r,C=R*w*o-G*r,x=w*G*o-R*r,B=G*G*o+a,A=R*G*o+w*r,F=w*R*o+G*r,Q=G*R*o-w*r,U=R*R*o+a,e[0]=s*y+d*I+p*C,e[1]=l*y+g*I+m*C,e[2]=c*y+h*I+v*C,e[3]=u*y+f*I+b*C,e[4]=s*x+d*B+p*A,e[5]=l*x+g*B+m*A,e[6]=c*x+h*B+v*A,e[7]=u*x+f*B+b*A,e[8]=s*F+d*Q+p*U,e[9]=l*F+g*Q+m*U,e[10]=c*F+h*Q+v*U,e[11]=u*F+f*Q+b*U,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}t.exports=i},{}],104:[function(e,t,n){function i(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],g=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+c*i,e[5]=o*r+u*i,e[6]=s*r+d*i,e[7]=l*r+g*i,e[8]=c*r-a*i,e[9]=u*r-o*i,e[10]=d*r-s*i,e[11]=g*r-l*i,e}t.exports=i},{}],105:[function(e,t,n){function i(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],g=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-c*i,e[1]=o*r-u*i,e[2]=s*r-d*i,e[3]=l*r-g*i,e[8]=a*i+c*r,e[9]=o*i+u*r,e[10]=s*i+d*r,e[11]=l*i+g*r,e}t.exports=i},{}],106:[function(e,t,n){function i(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],g=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r+c*i,e[1]=o*r+u*i,e[2]=s*r+d*i,e[3]=l*r+g*i,e[4]=c*r-a*i,e[5]=u*r-o*i,e[6]=d*r-s*i,e[7]=g*r-l*i,e}t.exports=i},{}],107:[function(e,t,n){function i(e,t,n){var i=n[0],r=n[1],a=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=i},{}],108:[function(e,t,n){function i(e,t,n){var i,r,a,o,s,l,c,u,d,g,h,f,p=n[0],m=n[1],v=n[2];return t===e?(e[12]=t[0]*p+t[4]*m+t[8]*v+t[12],e[13]=t[1]*p+t[5]*m+t[9]*v+t[13],e[14]=t[2]*p+t[6]*m+t[10]*v+t[14],e[15]=t[3]*p+t[7]*m+t[11]*v+t[15]):(i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],g=t[9],h=t[10],f=t[11],e[0]=i,e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=g,e[10]=h,e[11]=f,e[12]=i*p+s*m+d*v+t[12],e[13]=r*p+l*m+g*v+t[13],e[14]=a*p+c*m+h*v+t[14],e[15]=o*p+u*m+f*v+t[15]),e}t.exports=i},{}],109:[function(e,t,n){function i(e,t){if(e===t){var n=t[1],i=t[2],r=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=r,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=i},{}],110:[function(e,t,n){var i=e("barycentric"),r=e("polytope-closest-point/lib/closest_point_2d.js");function a(e,t){for(var n=[0,0,0,0],i=0;i<4;++i)for(var r=0;r<4;++r)n[r]+=e[4*i+r]*t[i];return n}function o(e,t,n,i,r){for(var o=a(i,a(n,a(t,[e[0],e[1],e[2],1]))),s=0;s<3;++s)o[s]/=o[3];return[.5*r[0]*(1+o[0]),.5*r[1]*(1-o[1])]}function s(e,t){if(2===e.length){for(var n=0,a=0,o=0;o<2;++o)n+=Math.pow(t[o]-e[0][o],2),a+=Math.pow(t[o]-e[1][o],2);return(n=Math.sqrt(n))+(a=Math.sqrt(a))<1e-6?[1,0]:[a/(n+a),n/(a+n)]}if(3===e.length){var s=[0,0];return r(e[0],e[1],e[2],t,s),i(e,s)}return[]}function l(e,t){for(var n=[0,0,0],i=0;i<e.length;++i)for(var r=e[i],a=t[i],o=0;o<3;++o)n[o]+=a*r[o];return n}function c(e,t,n,i,r,a){if(1===e.length)return[0,e[0].slice()];for(var c=new Array(e.length),u=0;u<e.length;++u)c[u]=o(e[u],n,i,r,a);var d=0,g=1/0;for(u=0;u<c.length;++u){for(var h=0,f=0;f<2;++f)h+=Math.pow(c[u][f]-t[f],2);h<g&&(g=h,d=u)}var p=s(c,t),m=0;for(u=0;u<3;++u){if(p[u]<-.001||p[u]>1.0001)return null;m+=p[u]}return Math.abs(m-1)>.001?null:[d,l(e,p),p]}t.exports=c},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(e,t,n){var i=e("glslify"),r=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),d=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),g=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),h=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),f=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);n.meshShader={vertex:r,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:l,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:u,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:g,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:h,fragment:f,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(e,t,n){var i=1e-6,r=1e-6,a=e("gl-shader"),o=e("gl-buffer"),s=e("gl-vao"),l=e("gl-texture2d"),c=e("normals"),u=e("gl-mat4/multiply"),d=e("gl-mat4/invert"),g=e("ndarray"),h=e("colormap"),f=e("simplicial-complex-contour"),p=e("typedarray-pool"),m=e("./lib/shaders"),v=e("./lib/closest-point"),b=m.meshShader,y=m.wireShader,I=m.pointShader,C=m.pickShader,x=m.pointPickShader,B=m.contourShader,A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function F(e,t,n,i,r,a,o,s,l,c,u,d,g,h,f,p,m,v,b,y,I,C,x,B,F,Q,U){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=i,this.pointShader=r,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=u,this.triangleNormals=g,this.triangleUVs=d,this.triangleIds=c,this.triangleVAO=h,this.triangleCount=0,this.lineWidth=1,this.edgePositions=f,this.edgeColors=m,this.edgeUVs=v,this.edgeIds=p,this.edgeVAO=b,this.edgeCount=0,this.pointPositions=y,this.pointColors=C,this.pointUVs=x,this.pointSizes=B,this.pointIds=I,this.pointVAO=F,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Q,this.contourVAO=U,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=A,this._view=A,this._projection=A,this._resolution=[1,1]}var Q=F.prototype;function U(e,t){if(!t)return 1;if(!t.length)return 1;for(var n=0;n<t.length;++n){if(t.length<2)return 1;if(t[n][0]===e)return t[n][1];if(t[n][0]>e&&n>0){var i=(t[n][0]-e)/(t[n][0]-t[n-1][0]);return t[n][1]*(1-i)+i*t[n-1][1]}}return 1}function w(e,t){for(var n=h({colormap:e,nshades:256,format:"rgba"}),i=new Uint8Array(1024),r=0;r<256;++r){for(var a=n[r],o=0;o<3;++o)i[4*r+o]=a[o];i[4*r+3]=t?255*U(r/255,t):255*a[3]}return g(i,[256,256,4],[4,0,1])}function G(e){for(var t=e.length,n=new Array(t),i=0;i<t;++i)n[i]=e[i][2];return n}function R(e){var t=a(e,b.vertex,b.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}function L(e){var t=a(e,y.vertex,y.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}function S(e){var t=a(e,I.vertex,I.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function V(e){var t=a(e,C.vertex,C.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t}function Z(e){var t=a(e,x.vertex,x.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function k(e){var t=a(e,B.vertex,B.fragment);return t.attributes.position.location=0,t}function E(e,t){if(1===arguments.length&&(e=(t=e).gl),!(e.getExtension("OES_standard_derivatives")||e.getExtension("MOZ_OES_standard_derivatives")||e.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var n=R(e),i=L(e),r=S(e),a=V(e),c=Z(e),u=k(e),d=l(e,g(new Uint8Array([255,255,255,255]),[1,1,4]));d.generateMipmap(),d.minFilter=e.LINEAR_MIPMAP_LINEAR,d.magFilter=e.LINEAR;var h=o(e),f=o(e),p=o(e),m=o(e),v=o(e),b=s(e,[{buffer:h,type:e.FLOAT,size:3},{buffer:v,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:f,type:e.FLOAT,size:4},{buffer:p,type:e.FLOAT,size:2},{buffer:m,type:e.FLOAT,size:3}]),y=o(e),I=o(e),C=o(e),x=o(e),B=s(e,[{buffer:y,type:e.FLOAT,size:3},{buffer:x,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:e.FLOAT,size:4},{buffer:C,type:e.FLOAT,size:2}]),A=o(e),Q=o(e),U=o(e),w=o(e),G=o(e),E=s(e,[{buffer:A,type:e.FLOAT,size:3},{buffer:G,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:e.FLOAT,size:4},{buffer:U,type:e.FLOAT,size:2},{buffer:w,type:e.FLOAT,size:1}]),X=o(e),N=new F(e,d,n,i,r,a,c,u,h,v,f,p,m,b,y,x,I,C,B,A,G,Q,U,w,E,X,s(e,[{buffer:X,type:e.FLOAT,size:3}]));return N.update(t),N}Q.isOpaque=function(){return!this.hasAlpha},Q.isTransparent=function(){return this.hasAlpha},Q.pickSlots=1,Q.setPickBase=function(e){this.pickId=e},Q.highlight=function(e){if(e&&this.contourEnable){for(var t=f(this.cells,this.intensity,e.intensity),n=t.cells,i=t.vertexIds,r=t.vertexWeights,a=n.length,o=p.mallocFloat32(6*a),s=0,l=0;l<a;++l)for(var c=n[l],u=0;u<2;++u){var d=c[0];2===c.length&&(d=c[u]);for(var g=i[d][0],h=i[d][1],m=r[d],v=1-m,b=this.positions[g],y=this.positions[h],I=0;I<3;++I)o[s++]=m*b[I]+v*y[I]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),p.free(o)}else this.contourCount=0},Q.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),this.hasAlpha=!1,"opacity"in e&&(this.opacity=e.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in e&&(this.opacityscale=e.opacityscale,this.hasAlpha=!0),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=l(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(w(e.colormap,this.opacityscale)),this.texture.generateMipmap());var n=e.cells,a=e.positions;if(a&&n){var o=[],s=[],u=[],d=[],g=[],h=[],f=[],p=[],m=[],v=[],b=[],y=[],I=[],C=[];this.cells=n,this.positions=a;var x=e.vertexNormals,B=e.cellNormals,A=void 0===e.vertexNormalsEpsilon?i:e.vertexNormalsEpsilon,F=void 0===e.faceNormalsEpsilon?r:e.faceNormalsEpsilon;e.useFacetNormals&&!B&&(B=c.faceNormals(n,a,F)),B||x||(x=c.vertexNormals(n,a,A));var Q=e.vertexColors,R=e.cellColors,L=e.meshColor||[1,1,1,1],S=e.vertexUVs,V=e.vertexIntensity,Z=e.cellUVs,k=e.cellIntensity,E=1/0,X=-1/0;if(!S&&!Z)if(V)if(e.vertexIntensityBounds)E=+e.vertexIntensityBounds[0],X=+e.vertexIntensityBounds[1];else for(var N=0;N<V.length;++N){var W=V[N];E=Math.min(E,W),X=Math.max(X,W)}else if(k)if(e.cellIntensityBounds)E=+e.cellIntensityBounds[0],X=+e.cellIntensityBounds[1];else for(N=0;N<k.length;++N)W=k[N],E=Math.min(E,W),X=Math.max(X,W);else for(N=0;N<a.length;++N)W=a[N][2],E=Math.min(E,W),X=Math.max(X,W);this.intensity=V||k||G(a),this.pickVertex=!(k||R);var _=e.pointSizes,T=e.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<a.length;++N)for(var M=a[N],H=0;H<3;++H)!isNaN(M[H])&&isFinite(M[H])&&(this.bounds[0][H]=Math.min(this.bounds[0][H],M[H]),this.bounds[1][H]=Math.max(this.bounds[1][H],M[H]));var Y=0,D=0,z=0;e:for(N=0;N<n.length;++N){var O=n[N];switch(O.length){case 1:for(M=a[j=O[0]],H=0;H<3;++H)if(isNaN(M[H])||!isFinite(M[H]))continue e;v.push(M[0],M[1],M[2]),P=Q?Q[j]:R?R[N]:L,this.opacityscale&&V?s.push(P[0],P[1],P[2],this.opacity*U((V[j]-E)/(X-E),this.opacityscale)):3===P.length?b.push(P[0],P[1],P[2],this.opacity):(b.push(P[0],P[1],P[2],P[3]*this.opacity),P[3]<1&&(this.hasAlpha=!0)),K=S?S[j]:V?[(V[j]-E)/(X-E),0]:Z?Z[N]:k?[(k[N]-E)/(X-E),0]:[(M[2]-E)/(X-E),0],y.push(K[0],K[1]),_?I.push(_[j]):I.push(T),C.push(N),z+=1;break;case 2:for(H=0;H<2;++H){M=a[j=O[H]];for(var J=0;J<3;++J)if(isNaN(M[J])||!isFinite(M[J]))continue e}for(H=0;H<2;++H)M=a[j=O[H]],h.push(M[0],M[1],M[2]),P=Q?Q[j]:R?R[N]:L,this.opacityscale&&V?s.push(P[0],P[1],P[2],this.opacity*U((V[j]-E)/(X-E),this.opacityscale)):3===P.length?f.push(P[0],P[1],P[2],this.opacity):(f.push(P[0],P[1],P[2],P[3]*this.opacity),P[3]<1&&(this.hasAlpha=!0)),K=S?S[j]:V?[(V[j]-E)/(X-E),0]:Z?Z[N]:k?[(k[N]-E)/(X-E),0]:[(M[2]-E)/(X-E),0],p.push(K[0],K[1]),m.push(N);D+=1;break;case 3:for(H=0;H<3;++H)for(M=a[j=O[H]],J=0;J<3;++J)if(isNaN(M[J])||!isFinite(M[J]))continue e;for(H=0;H<3;++H){var j,P,K,q;M=a[j=O[2-H]],o.push(M[0],M[1],M[2]),(P=Q?Q[j]:R?R[N]:L)?this.opacityscale&&V?s.push(P[0],P[1],P[2],this.opacity*U((V[j]-E)/(X-E),this.opacityscale)):3===P.length?s.push(P[0],P[1],P[2],this.opacity):(s.push(P[0],P[1],P[2],P[3]*this.opacity),P[3]<1&&(this.hasAlpha=!0)):s.push(.5,.5,.5,1),K=S?S[j]:V?[(V[j]-E)/(X-E),0]:Z?Z[N]:k?[(k[N]-E)/(X-E),0]:[(M[2]-E)/(X-E),0],d.push(K[0],K[1]),q=x?x[j]:B[N],u.push(q[0],q[1],q[2]),g.push(N)}Y+=1}}this.pointCount=z,this.edgeCount=D,this.triangleCount=Y,this.pointPositions.update(v),this.pointColors.update(b),this.pointUVs.update(y),this.pointSizes.update(I),this.pointIds.update(new Uint32Array(C)),this.edgePositions.update(h),this.edgeColors.update(f),this.edgeUVs.update(p),this.edgeIds.update(new Uint32Array(m)),this.trianglePositions.update(o),this.triangleColors.update(s),this.triangleUVs.update(d),this.triangleNormals.update(u),this.triangleIds.update(new Uint32Array(g))}},Q.drawTransparent=Q.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||A,i=e.view||A,r=e.projection||A,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var s={model:n,view:i,projection:r,inverseModel:A.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=d(s.inverseModel,s.model),t.disable(t.CULL_FACE),this.texture.bind(0);var l=new Array(16);for(u(l,s.view,s.model),u(l,s.projection,l),d(l,l),o=0;o<3;++o)s.eyePosition[o]=l[12+o]/l[15];var c,g=l[15];for(o=0;o<3;++o)g+=this.lightPosition[o]*l[4*o+3];for(o=0;o<3;++o){for(var h=l[12+o],f=0;f<3;++f)h+=l[4*f+o]*this.lightPosition[f];s.lightPosition[o]=h/g}this.triangleCount>0&&((c=this.triShader).bind(),c.uniforms=s,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((c=this.lineShader).bind(),c.uniforms=s,this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((c=this.pointShader).bind(),c.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((c=this.contourShader).bind(),c.uniforms=s,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind())},Q.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||A,i=e.view||A,r=e.projection||A,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(i),this._projection=[].slice.call(r),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s,l={model:n,view:i,projection:r,clipBounds:a,pickId:this.pickId/255};(s=this.pickShader).bind(),s.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((s=this.pointPickShader).bind(),s.uniforms=l,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind())},Q.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],i=this.positions,r=new Array(n.length),a=0;a<n.length;++a)r[a]=i[n[a]];var o=e.coord[0],s=e.coord[1];if(!this.pickVertex){var l=this.positions[n[0]],c=this.positions[n[1]],u=this.positions[n[2]],d=[(l[0]+c[0]+u[0])/3,(l[1]+c[1]+u[1])/3,(l[2]+c[2]+u[2])/3];return{_cellCenter:!0,position:[o,s],index:t,cell:n,cellId:t,intensity:this.intensity[t],dataCoordinate:d}}var g=v(r,[o*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!g)return null;var h=g[2],f=0;for(a=0;a<n.length;++a)f+=h[a]*this.intensity[n[a]];return{position:g[1],index:n[g[0]],cell:n,cellId:t,intensity:f,dataCoordinate:this.positions[n[g[0]]]}},Q.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=E},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(e,t,n){t.exports=u;var i=e("gl-buffer"),r=e("gl-shader"),a=e("./shaders");function o(e,t,n){this.plot=e,this.vbo=t,this.shader=n}var s,l,c=o.prototype;function u(e){var t=e.gl;return new o(e,i(t,[0,0,0,1,1,0,1,1]),r(t,a.boxVert,a.lineFrag))}c.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},c.drawBox=(s=[0,0],l=[0,0],function(e,t,n,i,r){var a=this.plot,o=this.shader,c=a.gl;s[0]=e,s[1]=t,l[0]=n,l[1]=i,o.uniforms.lo=s,o.uniforms.hi=l,o.uniforms.color=r,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(e,t,n){t.exports=p;var i=e("gl-buffer"),r=e("gl-shader"),a=e("binary-search-bounds"),o=e("./shaders");function s(e,t,n,i){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=i,this.ticks=[[],[]]}function l(e,t){return e-t}var c,u,d,g,h,f=s.prototype;function p(e){var t=e.gl;return new s(e,i(t),r(t,o.gridVert,o.gridFrag),r(t,o.tickVert,o.gridFrag))}f.draw=(c=[0,0],u=[0,0],d=[0,0],function(){for(var e=this.plot,t=this.vbo,n=this.shader,i=this.ticks,r=e.gl,a=e._tickBounds,o=e.dataBox,s=e.viewBox,l=e.gridLineWidth,g=e.gridLineColor,h=e.gridLineEnable,f=e.pixelRatio,p=0;p<2;++p){var m=a[p],v=a[p+2]-m,b=.5*(o[p+2]+o[p]),y=o[p+2]-o[p];u[p]=2*v/y,c[p]=2*(m-b)/y}n.bind(),t.bind(),n.attributes.dataCoord.pointer(),n.uniforms.dataShift=c,n.uniforms.dataScale=u;var I=0;for(p=0;p<2;++p){d[0]=d[1]=0,d[p]=1,n.uniforms.dataAxis=d,n.uniforms.lineWidth=l[p]/(s[p+2]-s[p])*f,n.uniforms.color=g[p];var C=6*i[p].length;h[p]&&C&&r.drawArrays(r.TRIANGLES,I,C),I+=C}}),f.drawTickMarks=function(){var e=[0,0],t=[0,0],n=[1,0],i=[0,1],r=[0,0],o=[0,0];return function(){for(var s=this.plot,c=this.vbo,u=this.tickShader,d=this.ticks,g=s.gl,h=s._tickBounds,f=s.dataBox,p=s.viewBox,m=s.pixelRatio,v=s.screenBox,b=v[2]-v[0],y=v[3]-v[1],I=p[2]-p[0],C=p[3]-p[1],x=0;x<2;++x){var B=h[x],A=h[x+2]-B,F=.5*(f[x+2]+f[x]),Q=f[x+2]-f[x];t[x]=2*A/Q,e[x]=2*(B-F)/Q}t[0]*=I/b,e[0]*=I/b,t[1]*=C/y,e[1]*=C/y,u.bind(),c.bind(),u.attributes.dataCoord.pointer();var U=u.uniforms;U.dataShift=e,U.dataScale=t;var w=s.tickMarkLength,G=s.tickMarkWidth,R=s.tickMarkColor,L=0,S=6*d[0].length,V=Math.min(a.ge(d[0],(f[0]-h[0])/(h[2]-h[0]),l),d[0].length),Z=Math.min(a.gt(d[0],(f[2]-h[0])/(h[2]-h[0]),l),d[0].length),k=L+6*V,E=6*Math.max(0,Z-V),X=Math.min(a.ge(d[1],(f[1]-h[1])/(h[3]-h[1]),l),d[1].length),N=Math.min(a.gt(d[1],(f[3]-h[1])/(h[3]-h[1]),l),d[1].length),W=S+6*X,_=6*Math.max(0,N-X);r[0]=2*(p[0]-w[1])/b-1,r[1]=(p[3]+p[1])/y-1,o[0]=w[1]*m/b,o[1]=G[1]*m/y,_&&(U.color=R[1],U.tickScale=o,U.dataAxis=i,U.screenOffset=r,g.drawArrays(g.TRIANGLES,W,_)),r[0]=(p[2]+p[0])/b-1,r[1]=2*(p[1]-w[0])/y-1,o[0]=G[0]*m/b,o[1]=w[0]*m/y,E&&(U.color=R[0],U.tickScale=o,U.dataAxis=n,U.screenOffset=r,g.drawArrays(g.TRIANGLES,k,E)),r[0]=2*(p[2]+w[3])/b-1,r[1]=(p[3]+p[1])/y-1,o[0]=w[3]*m/b,o[1]=G[3]*m/y,_&&(U.color=R[3],U.tickScale=o,U.dataAxis=i,U.screenOffset=r,g.drawArrays(g.TRIANGLES,W,_)),r[0]=(p[2]+p[0])/b-1,r[1]=2*(p[3]+w[2])/y-1,o[0]=G[2]*m/b,o[1]=w[2]*m/y,E&&(U.color=R[2],U.tickScale=o,U.dataAxis=n,U.screenOffset=r,g.drawArrays(g.TRIANGLES,k,E))}}(),f.update=(g=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1],function(e){var t=e.ticks,n=e.bounds,i=new Float32Array(18*(t[0].length+t[1].length));this.plot.zeroLineEnable;for(var r=0,a=[[],[]],o=0;o<2;++o)for(var s=a[o],l=t[o],c=n[o],u=n[o+2],d=0;d<l.length;++d){var f=(l[d].x-c)/(u-c);s.push(f);for(var p=0;p<6;++p)i[r++]=f,i[r++]=g[p],i[r++]=h[p]}this.ticks=a,this.vbo.update(i)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(e,t,n){t.exports=l;var i=e("gl-buffer"),r=e("gl-shader"),a=e("./shaders");function o(e,t,n){this.plot=e,this.vbo=t,this.shader=n}var s=o.prototype;function l(e){var t=e.gl;return new o(e,i(t,[-1,-1,-1,1,1,-1,1,1]),r(t,a.lineVert,a.lineFrag))}s.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},s.drawLine=function(){var e=[0,0],t=[0,0];return function(n,i,r,a,o,s){var l=this.plot,c=this.shader,u=l.gl;e[0]=n,e[1]=i,t[0]=r,t[1]=a,c.uniforms.start=e,c.uniforms.end=t,c.uniforms.width=o*l.pixelRatio,c.uniforms.color=s,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(e,t,n){var i=e("glslify"),r=i(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);t.exports={lineVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:i(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(e,t,n){t.exports=m;var i=e("gl-buffer"),r=e("gl-shader"),a=e("text-cache"),o=e("binary-search-bounds"),s=e("./shaders");function l(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var c,u,d,g,h,f,p=l.prototype;function m(e){var t=e.gl;return new l(e,i(t),r(t,s.textVert,s.textFrag))}p.drawTicks=(c=[0,0],u=[0,0],d=[0,0],function(e){var t=this.plot,n=this.shader,i=this.tickX[e],r=this.tickOffset[e],a=t.gl,s=t.viewBox,l=t.dataBox,g=t.screenBox,h=t.pixelRatio,f=t.tickEnable,p=t.tickPad,m=t.tickColor,v=t.tickAngle,b=t.labelEnable,y=t.labelPad,I=t.labelColor,C=t.labelAngle,x=this.labelOffset[e],B=this.labelCount[e],A=o.lt(i,l[e]),F=o.le(i,l[e+2]);c[0]=c[1]=0,c[e]=1,u[e]=(s[2+e]+s[e])/(g[2+e]-g[e])-1;var Q=2/g[2+(1^e)]-g[1^e];u[1^e]=Q*s[1^e]-1,f[e]&&(u[1^e]-=Q*h*p[e],A<F&&r[F]>r[A]&&(n.uniforms.dataAxis=c,n.uniforms.screenOffset=u,n.uniforms.color=m[e],n.uniforms.angle=v[e],a.drawArrays(a.TRIANGLES,r[A],r[F]-r[A]))),b[e]&&B&&(u[1^e]-=Q*h*y[e],n.uniforms.dataAxis=d,n.uniforms.screenOffset=u,n.uniforms.color=I[e],n.uniforms.angle=C[e],a.drawArrays(a.TRIANGLES,x,B)),u[1^e]=Q*s[2+(1^e)]-1,f[e+2]&&(u[1^e]+=Q*h*p[e+2],A<F&&r[F]>r[A]&&(n.uniforms.dataAxis=c,n.uniforms.screenOffset=u,n.uniforms.color=m[e+2],n.uniforms.angle=v[e+2],a.drawArrays(a.TRIANGLES,r[A],r[F]-r[A]))),b[e+2]&&B&&(u[1^e]+=Q*h*y[e+2],n.uniforms.dataAxis=d,n.uniforms.screenOffset=u,n.uniforms.color=I[e+2],n.uniforms.angle=C[e+2],a.drawArrays(a.TRIANGLES,x,B))}),p.drawTitle=function(){var e=[0,0],t=[0,0];return function(){var n=this.plot,i=this.shader,r=n.gl,a=n.screenBox,o=n.titleCenter,s=n.titleAngle,l=n.titleColor,c=n.pixelRatio;if(this.titleCount){for(var u=0;u<2;++u)t[u]=2*(o[u]*c-a[u])/(a[2+u]-a[u])-1;i.bind(),i.uniforms.dataAxis=e,i.uniforms.screenOffset=t,i.uniforms.angle=s,i.uniforms.color=l,r.drawArrays(r.TRIANGLES,this.titleOffset,this.titleCount)}}}(),p.bind=(g=[0,0],h=[0,0],f=[0,0],function(){var e=this.plot,t=this.shader,n=e._tickBounds,i=e.dataBox,r=e.screenBox,a=e.viewBox;t.bind();for(var o=0;o<2;++o){var s=n[o],l=n[o+2]-s,c=.5*(i[o+2]+i[o]),u=i[o+2]-i[o],d=a[o],p=a[o+2]-d,m=r[o],v=r[o+2]-m;h[o]=2*l/u*p/v,g[o]=2*(s-c)/u*p/v}f[1]=2*e.pixelRatio/(r[3]-r[1]),f[0]=f[1]*(r[3]-r[1])/(r[2]-r[0]),t.uniforms.dataScale=h,t.uniforms.dataShift=g,t.uniforms.textScale=f,this.vbo.bind(),t.attributes.textCoordinate.pointer()}),p.update=function(e){var t,n,i,r,o,s=[],l=e.ticks,c=e.bounds;for(o=0;o<2;++o){var u=[Math.floor(s.length/3)],d=[-1/0],g=l[o];for(t=0;t<g.length;++t){var h=g[t],f=h.x,p=h.text,m=h.font||"sans-serif";r=h.fontSize||12;for(var v=1/(c[o+2]-c[o]),b=c[o],y=p.split("\n"),I=0;I<y.length;I++)for(i=a(m,y[I]).data,n=0;n<i.length;n+=2)s.push(i[n]*r,-i[n+1]*r-I*r*1.2,(f-b)*v);u.push(Math.floor(s.length/3)),d.push(f)}this.tickOffset[o]=u,this.tickX[o]=d}for(o=0;o<2;++o){for(this.labelOffset[o]=Math.floor(s.length/3),i=a(e.labelFont[o],e.labels[o],{textAlign:"center"}).data,r=e.labelSize[o],t=0;t<i.length;t+=2)s.push(i[t]*r,-i[t+1]*r,0);this.labelCount[o]=Math.floor(s.length/3)-this.labelOffset[o]}for(this.titleOffset=Math.floor(s.length/3),i=a(e.titleFont,e.title).data,r=e.titleSize,t=0;t<i.length;t+=2)s.push(i[t]*r,-i[t+1]*r,0);this.titleCount=Math.floor(s.length/3)-this.titleOffset,this.vbo.update(s)},p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(e,t,n){t.exports=g;var i=e("gl-select-static"),r=e("./lib/grid"),a=e("./lib/text"),o=e("./lib/line"),s=e("./lib/box");function l(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var c=l.prototype;function u(e){for(var t=e.slice(),n=0;n<t.length;++n)t[n]=t[n].slice();return t}function d(e,t){return e.x-t.x}function g(e){var t=e.gl,n=new l(t,i(t,[t.drawingBufferWidth,t.drawingBufferHeight]));return n.grid=r(n),n.text=a(n),n.line=o(n),n.box=s(n),n.update(e),n}c.setDirty=function(){this.dirty=this.pickDirty=!0},c.setOverlayDirty=function(){this.dirty=!0},c.nextDepthValue=function(){return this._depthCounter++/65536},c.draw=function(){var e=this.gl,t=this.screenBox,n=this.viewBox,i=this.dataBox,r=this.pixelRatio,a=this.grid,o=this.line,s=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.borderColor){e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var c=this.borderColor;e.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var u=this.backgroundColor;e.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),e.clear(e.COLOR_BUFFER_BIT),a.draw();var d=this.zeroLineEnable,g=this.zeroLineColor,h=this.zeroLineWidth;if(d[0]||d[1]){o.bind();for(var f=0;f<2;++f)if(d[f]&&i[f]<=0&&i[f+2]>=0){var p=t[f]-i[f]*(t[f+2]-t[f])/(i[f+2]-i[f]);0===f?o.drawLine(p,t[1],p,t[3],h[f],g[f]):o.drawLine(t[0],p,t[2],p,h[f],g[f])}}for(f=0;f<l.length;++f)l[f].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),o.bind();var m=this.borderLineEnable,v=this.borderLineWidth,b=this.borderLineColor;for(m[1]&&o.drawLine(n[0],n[1]-.5*v[1]*r,n[0],n[3]+.5*v[3]*r,v[1],b[1]),m[0]&&o.drawLine(n[0]-.5*v[0]*r,n[1],n[2]+.5*v[2]*r,n[1],v[0],b[0]),m[3]&&o.drawLine(n[2],n[1]-.5*v[1]*r,n[2],n[3]+.5*v[3]*r,v[3],b[3]),m[2]&&o.drawLine(n[0]-.5*v[0]*r,n[3],n[2]+.5*v[2]*r,n[3],v[2],b[2]),s.bind(),f=0;f<2;++f)s.drawTicks(f);this.titleEnable&&s.drawTitle();var y=this.overlays;for(f=0;f<y.length;++f)y[f].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}},c.drawPick=function(){if(!this.static){var e=this.pickBuffer;this.gl,this._pickTimeout=null,e.begin();for(var t=1,n=this.objects,i=0;i<n.length;++i)t=n[i].drawPick(t);e.end()}},c.pick=function(e,t){if(!this.static){var n=this.pixelRatio,i=this.pickPixelRatio,r=this.viewBox,a=0|Math.round((e-r[0]/n)*i),o=0|Math.round((t-r[1]/n)*i),s=this.pickBuffer.query(a,o,this.pickRadius);if(!s)return null;for(var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),c=this.objects,u=0;u<c.length;++u){var d=c[u].pick(a,o,l);if(d)return d}return null}},c.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=0|Math.round(e[0]*n),t[1]=0|Math.round(e[1]*n),t[2]=0|Math.round(e[2]*n),t[3]=0|Math.round(e[3]*n),this.setDirty()},c.setDataBox=function(e){var t=this.dataBox;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3])&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},c.setViewBox=function(e){var t=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(e[0]*t),n[1]=0|Math.round(e[1]*t),n[2]=0|Math.round(e[2]*t),n[3]=0|Math.round(e[3]*t);var i=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*i),0|Math.round((e[3]-e[1])*i)],this.setDirty()},c.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/n,t.drawingBufferHeight/n]),this.screenBox,this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var i=this.viewBox,r=(i[2]-i[0])/(i[3]-i[1]);this.setDataBox(e.dataBox||[-10,-10/r,10,10/r]),this.borderColor=!1!==e.borderColor&&(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(i[0]+i[2])/n,(i[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e)||!!e.titleEnable,this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var a=e.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var s=0;s<2;++s){var l=a[s].slice(0);0!==l.length&&(l.sort(d),o[s]=Math.min(o[s],l[0].x),o[s+2]=Math.max(o[s+2],l[l.length-1].x))}this.grid.update({bounds:o,ticks:a}),this.text.update({bounds:o,ticks:a,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"}),this.static=!!e.static,this.setDirty()},c.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();for(this.objects.length=0,e=this.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},c.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},c.removeObject=function(e){for(var t=this.objects,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setDirty();break}},c.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},c.removeOverlay=function(e){for(var t=this.overlays,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(e,t,n){t.exports=c;var i=e("right-now"),r=e("3d-view"),a=e("mouse-change"),o=e("mouse-wheel"),s=e("mouse-event-offset"),l=e("has-passive-events");function c(e,t){e=e||document.body;var n=[.01,1/0];"distanceLimits"in(t=t||{})&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var c=r({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,g=e.clientWidth,h=e.clientHeight,f={keyBindingMode:"rotate",enableWheel:!0,view:c,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:c.modes,_ortho:t._ortho||t.projection&&"orthographic"===t.projection.type||!1,tick:function(){var t=i(),n=this.delay,r=t-2*n;c.idle(t-n),c.recalcMatrix(r),c.flush(t-(100+2*n));for(var a=!0,o=c.computedMatrix,s=0;s<16;++s)a=a&&u[s]===o[s],u[s]=o[s];var l=e.clientWidth===g&&e.clientHeight===h;return g=e.clientWidth,h=e.clientHeight,a?!l:(d=Math.exp(c.computedRadius[0]),!0)},lookAt:function(e,t,n){c.lookAt(c.lastT(),e,t,n)},rotate:function(e,t,n){c.rotate(c.lastT(),e,t,n)},pan:function(e,t,n){c.pan(c.lastT(),e,t,n)},translate:function(e,t,n){c.translate(c.lastT(),e,t,n)}};return Object.defineProperties(f,{matrix:{get:function(){return c.computedMatrix},set:function(e){return c.setMatrix(c.lastT(),e),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(e){var t=c.computedUp.slice(),n=c.computedEye.slice(),r=c.computedCenter.slice();if(c.setMode(e),"turntable"===e){var a=i();c._active.lookAt(a,n,r,t),c._active.lookAt(a+500,n,r,[0,0,1]),c._active.flush(a)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(e){return c.lookAt(c.lastT(),null,e),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(e){return c.lookAt(c.lastT(),e),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(e){return c.lookAt(c.lastT(),null,null,e),c.computedUp},enumerable:!0},distance:{get:function(){return d},set:function(e){return c.setDistance(c.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(n)},set:function(e){return c.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",(function(e){return e.preventDefault(),!1})),f._lastX=-1,f._lastY=-1,f._lastMods={shift:!1,control:!1,alt:!1,meta:!1},f.enableMouseListeners=function(){function t(t,n,r,a){var o=f.keyBindingMode;if(!1!==o){var s="rotate"===o,l="pan"===o,u="zoom"===o,g=!!a.control,h=!!a.alt,p=!!a.shift,m=!!(1&t),v=!!(2&t),b=!!(4&t),y=1/e.clientHeight,I=y*(n-f._lastX),C=y*(r-f._lastY),x=f.flipX?1:-1,B=f.flipY?1:-1,A=Math.PI*f.rotateSpeed,F=i();if(-1!==f._lastX&&-1!==f._lastY&&((s&&m&&!g&&!h&&!p||m&&!g&&!h&&p)&&c.rotate(F,x*A*I,-B*A*C,0),(l&&m&&!g&&!h&&!p||v||m&&g&&!h&&!p)&&c.pan(F,-f.translateSpeed*I*d,f.translateSpeed*C*d,0),u&&m&&!g&&!h&&!p||b||m&&!g&&h&&!p)){var Q=-f.zoomSpeed*C/window.innerHeight*(F-c.lastT())*100;c.pan(F,0,0,d*(Math.exp(Q)-1))}return f._lastX=n,f._lastY=r,f._lastMods=a,!0}}f.mouseListener=a(e,t),e.addEventListener("touchstart",(function(n){var i=s(n.changedTouches[0],e);t(0,i[0],i[1],f._lastMods),t(1,i[0],i[1],f._lastMods)}),!!l&&{passive:!0}),e.addEventListener("touchmove",(function(n){var i=s(n.changedTouches[0],e);t(1,i[0],i[1],f._lastMods),n.preventDefault()}),!!l&&{passive:!1}),e.addEventListener("touchend",(function(e){t(0,f._lastX,f._lastY,f._lastMods)}),!!l&&{passive:!0}),f.wheelListener=o(e,(function(e,t){if(!1!==f.keyBindingMode&&f.enableWheel){var n=f.flipX?1:-1,r=f.flipY?1:-1,a=i();if(Math.abs(e)>Math.abs(t))c.rotate(a,0,0,-e*n*Math.PI*f.rotateSpeed/window.innerWidth);else if(!f._ortho){var o=-f.zoomSpeed*r*t/window.innerHeight*(a-c.lastT())/20;c.pan(a,0,0,d*(Math.exp(o)-1))}}}),!0)},f.enableMouseListeners(),f}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(e,t,n){var i=e("glslify"),r=e("gl-shader"),a=i(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);t.exports=function(e){return r(e,a,o,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(e,t,n){var i=e("./camera.js"),r=e("gl-axes3d"),a=e("gl-axes3d/properties"),o=e("gl-spikes3d"),s=e("gl-select-static"),l=e("gl-fbo"),c=e("a-big-triangle"),u=e("mouse-change"),d=e("gl-mat4/perspective"),g=e("gl-mat4/ortho"),h=e("./lib/shader"),f=e("is-mobile")({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(e,t){var n=null;try{(n=e.getContext("webgl",t))||(n=e.getContext("experimental-webgl",t))}catch(e){return null}return n}function v(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(t<0){var n=Math.round(Math.pow(10,-t));return Math.ceil(e*n)/n}return t>0?(n=Math.round(Math.pow(10,t)),Math.ceil(e/n)*n):Math.ceil(e)}function b(e){return"boolean"!=typeof e||e}function y(e){(e=e||{}).camera=e.camera||{};var t=e.canvas;t||(t=document.createElement("canvas"),e.container?e.container.appendChild(t):document.body.appendChild(t));var n=e.gl;if(n||(e.glOptions&&(f=!!e.glOptions.preserveDrawingBuffer),n=m(t,e.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:f})),!n)throw new Error("webgl not supported");var d=e.bounds||[[-10,-10,-10],[10,10,10]],g=new p,y=l(n,n.drawingBufferWidth,n.drawingBufferHeight,{preferFloat:!f}),C=h(n),x=e.cameraObject&&!0===e.cameraObject._ortho||e.camera.projection&&"orthographic"===e.camera.projection.type||!1,B={eye:e.camera.eye||[2,0,0],center:e.camera.center||[0,0,0],up:e.camera.up||[0,1,0],zoomMin:e.camera.zoomMax||.1,zoomMax:e.camera.zoomMin||100,mode:e.camera.mode||"turntable",_ortho:x},A=e.axes||{},F=r(n,A);F.enable=!A.disable;var Q=e.spikes||{},U=o(n,Q),w=[],G=[],R=[],L=[],S=!0,V=!0,Z={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},k=(V=!0,[n.drawingBufferWidth,n.drawingBufferHeight]),E=e.cameraObject||i(t,B),X={gl:n,contextLost:!1,pixelRatio:e.pixelRatio||1,canvas:t,selection:g,camera:E,axes:F,axesPixels:null,spikes:U,bounds:d,objects:w,shape:k,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:b(e.autoResize),autoBounds:b(e.autoBounds),autoScale:!!e.autoScale,autoCenter:b(e.autoCenter),clipToBounds:b(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:Z,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(e){this.aspect[0]=e.x,this.aspect[1]=e.y,this.aspect[2]=e.z,V=!0},setBounds:function(e,t){this.bounds[0][e]=t.min,this.bounds[1][e]=t.max},setClearColor:function(e){this.clearColor=e},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},N=[n.drawingBufferWidth/X.pixelRatio|0,n.drawingBufferHeight/X.pixelRatio|0];function W(){if(!X._stopped&&X.autoResize){var e=t.parentNode,n=1,i=1;e&&e!==document.body?(n=e.clientWidth,i=e.clientHeight):(n=window.innerWidth,i=window.innerHeight);var r=0|Math.ceil(n*X.pixelRatio),a=0|Math.ceil(i*X.pixelRatio);if(r!==t.width||a!==t.height){t.width=r,t.height=a;var o=t.style;o.position=o.position||"absolute",o.left="0px",o.top="0px",o.width=n+"px",o.height=i+"px",S=!0}}}function _(){for(var e=w.length,t=L.length,i=0;i<t;++i)R[i]=0;e:for(i=0;i<e;++i){var r=w[i],a=r.pickSlots;if(a){for(var o=0;o<t;++o)if(R[o]+a<255){G[i]=o,r.setPickBase(R[o]+1),R[o]+=a;continue e}var l=s(n,k);G[i]=t,L.push(l),R.push(a),r.setPickBase(1),t+=1}else G[i]=-1}for(;t>0&&0===R[t-1];)R.pop(),L.pop().dispose()}function T(){if(X.contextLost)return!0;n.isContextLost()&&(X.contextLost=!0,X.mouseListener.enabled=!1,X.selection.object=null,X.oncontextloss&&X.oncontextloss())}function M(){if(!T()){n.colorMask(!0,!0,!0,!0),n.depthMask(!0),n.disable(n.BLEND),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL);for(var e=w.length,t=L.length,i=0;i<t;++i){var r=L[i];r.shape=N,r.begin();for(var a=0;a<e;++a)if(G[a]===i){var o=w[a];o.drawPick&&(o.pixelRatio=1,o.drawPick(Z))}r.end()}}}X.autoResize&&W(),window.addEventListener("resize",W),X.update=function(e){X._stopped||(S=!0,V=!0)},X.add=function(e){X._stopped||(e.axes=F,w.push(e),G.push(-1),S=!0,V=!0,_())},X.remove=function(e){if(!X._stopped){var t=w.indexOf(e);t<0||(w.splice(t,1),G.pop(),S=!0,V=!0,_())}},X.dispose=function(){if(!X._stopped&&(X._stopped=!0,window.removeEventListener("resize",W),t.removeEventListener("webglcontextlost",T),X.mouseListener.enabled=!1,!X.contextLost)){F.dispose(),U.dispose();for(var e=0;e<w.length;++e)w[e].dispose();for(y.dispose(),e=0;e<L.length;++e)L[e].dispose();C.dispose(),n=null,F=null,U=null,w=[]}},X._mouseRotating=!1,X._prevButtons=0,X.enableMouseListeners=function(){X.mouseListener=u(t,(function(e,t,n){if(!X._stopped){var i=L.length,r=w.length,a=g.object;g.distance=1/0,g.mouse[0]=t,g.mouse[1]=n,g.object=null,g.screen=null,g.dataCoordinate=g.dataPosition=null;var o=!1;if(e&&X._prevButtons)X._mouseRotating=!0;else{X._mouseRotating&&(V=!0),X._mouseRotating=!1;for(var s=0;s<i;++s){var l=L[s].query(t,N[1]-n-1,X.pickRadius);if(l){if(l.distance>g.distance)continue;for(var c=0;c<r;++c){var u=w[c];if(G[c]===s){var d=u.pick(l);d&&(g.buttons=e,g.screen=l.coord,g.distance=l.distance,g.object=u,g.index=d.distance,g.dataPosition=d.position,g.dataCoordinate=d.dataCoordinate,g.data=d,o=!0)}}}}}a&&a!==g.object&&(a.highlight&&a.highlight(null),S=!0),g.object&&(g.object.highlight&&g.object.highlight(g.data),S=!0),(o=o||g.object!==a)&&X.onselect&&X.onselect(g),1&e&&!(1&X._prevButtons)&&X.onclick&&X.onclick(g),X._prevButtons=e}}))},t.addEventListener("webglcontextlost",T);var H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Y=[H[0].slice(),H[1].slice()];function D(){if(!T()){W();var e=X.camera.tick();Z.view=X.camera.matrix,S=S||e,V=V||e,F.pixelRatio=X.pixelRatio,U.pixelRatio=X.pixelRatio;var t=w.length,i=H[0],r=H[1];i[0]=i[1]=i[2]=1/0,r[0]=r[1]=r[2]=-1/0;for(var o=0;o<t;++o){(Q=w[o]).pixelRatio=X.pixelRatio,Q.axes=X.axes,S=S||!!Q.dirty,V=V||!!Q.dirty;var s=Q.bounds;if(s)for(var l=s[0],u=s[1],d=0;d<3;++d)i[d]=Math.min(i[d],l[d]),r[d]=Math.max(r[d],u[d])}var h=X.bounds;if(X.autoBounds)for(d=0;d<3;++d){if(r[d]<i[d])i[d]=-1,r[d]=1;else{i[d]===r[d]&&(i[d]-=1,r[d]+=1);var f=.05*(r[d]-i[d]);i[d]=i[d]-f,r[d]=r[d]+f}h[0][d]=i[d],h[1][d]=r[d]}var p=!1;for(d=0;d<3;++d)p=p||Y[0][d]!==h[0][d]||Y[1][d]!==h[1][d],Y[0][d]=h[0][d],Y[1][d]=h[1][d];if(V=V||p,S=S||p){if(p){var m=[0,0,0];for(o=0;o<3;++o)m[o]=v((h[1][o]-h[0][o])/10);F.autoTicks?F.update({bounds:h,tickSpacing:m}):F.update({bounds:h})}var b=n.drawingBufferWidth,B=n.drawingBufferHeight;for(k[0]=b,k[1]=B,N[0]=0|Math.max(b/X.pixelRatio,1),N[1]=0|Math.max(B/X.pixelRatio,1),I(X,x),o=0;o<t;++o)(Q=w[o]).axesBounds=h,X.clipToBounds&&(Q.clipBounds=h);g.object&&(X.snapToData?U.position=g.dataCoordinate:U.position=g.dataPosition,U.bounds=h),V&&(V=!1,M()),X.axesPixels=a(X.axes,Z,b,B),X.onrender&&X.onrender(),n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,b,B),X.clearRGBA(),n.depthMask(!0),n.colorMask(!0,!0,!0,!0),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.disable(n.BLEND),n.disable(n.CULL_FACE);var A=!1;for(F.enable&&(A=A||F.isTransparent(),F.draw(Z)),U.axes=F,g.object&&U.draw(Z),n.disable(n.CULL_FACE),o=0;o<t;++o)(Q=w[o]).axes=F,Q.pixelRatio=X.pixelRatio,Q.isOpaque&&Q.isOpaque()&&Q.draw(Z),Q.isTransparent&&Q.isTransparent()&&(A=!0);if(A){for(y.shape=k,y.bind(),n.clear(n.DEPTH_BUFFER_BIT),n.colorMask(!1,!1,!1,!1),n.depthMask(!0),n.depthFunc(n.LESS),F.enable&&F.isTransparent()&&F.drawTransparent(Z),o=0;o<t;++o)(Q=w[o]).isOpaque&&Q.isOpaque()&&Q.draw(Z);for(n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.colorMask(!0,!0,!0,!0),n.depthMask(!1),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),F.isTransparent()&&F.drawTransparent(Z),o=0;o<t;++o){var Q;(Q=w[o]).isTransparent&&Q.isTransparent()&&Q.drawTransparent(Z)}n.bindFramebuffer(n.FRAMEBUFFER,null),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),C.bind(),y.color[0].bind(0),C.uniforms.accumBuffer=0,c(n),n.disable(n.BLEND)}for(S=!1,o=0;o<t;++o)w[o].dirty=!1}}}function z(){X._stopped||X.contextLost||(D(),requestAnimationFrame(z))}return X.enableMouseListeners(),z(),X.redraw=function(){X._stopped||(S=!0,D())},X}function I(e,t){var n=e.bounds,i=e.cameraParams,r=i.projection,a=i.model,o=e.gl.drawingBufferWidth,s=e.gl.drawingBufferHeight,l=e.zNear,c=e.zFar,u=e.fovy,h=o/s;t?(g(r,-h,h,-1,1,l,c),i._ortho=!0):(d(r,u,h,l,c),i._ortho=!1);for(var f=0;f<16;++f)a[f]=0;a[15]=1;var p=0;for(f=0;f<3;++f)p=Math.max(p,n[1][f]-n[0][f]);for(f=0;f<3;++f)e.autoScale?a[5*f]=e.aspect[f]/(n[1][f]-n[0][f]):a[5*f]=1/p,e.autoCenter&&(a[12+f]=.5*-a[5*f]*(n[0][f]+n[1][f]))}t.exports={createScene:y,createCamera:i}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(e,t,n){var i=e("glslify");n.pointVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),n.pointFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),n.pickVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),n.pickFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(e,t,n){var i=e("gl-shader"),r=e("gl-buffer"),a=e("typedarray-pool"),o=e("./lib/shader");function s(e,t,n,i,r){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.shader=i,this.pickShader=r,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}t.exports=g;var l,c,u=s.prototype;function d(e,t){var n,i=0,r=e.length>>>1;for(n=0;n<r;n++){var a=e[2*n],o=e[2*n+1];a>=t[0]&&a<=t[2]&&o>=t[1]&&o<=t[3]&&i++}return i}function g(e,t){var n=e.gl,a=new s(e,r(n),r(n),i(n,o.pointVertex,o.pointFragment),i(n,o.pickVertex,o.pickFragment));return a.update(t),e.addObject(a),a}u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(e){var t;function n(t,n){return t in e?e[t]:n}e=e||{},this.sizeMin=n("sizeMin",.5),this.sizeMax=n("sizeMax",20),this.color=n("color",[1,0,0,1]).slice(),this.areaRatio=n("areaRatio",1),this.borderColor=n("borderColor",[0,0,0,1]).slice(),this.blend=n("blend",!1);var i=e.positions.length>>>1,r=e.positions instanceof Float32Array,o=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=i,s=e.positions,l=r?s:a.mallocFloat32(s.length),c=o?e.idToIndex:a.mallocInt32(i);if(r||l.set(s),!o)for(l.set(s),t=0;t<i;t++)c[t]=t;this.points=s,this.offsetBuffer.update(l),this.pickBuffer.update(c),r||a.free(l),o||a.free(c),this.pointCount=i,this.pickOffset=0},u.unifiedDraw=(l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0],function(e){var t=void 0!==e,n=t?this.pickShader:this.shader,i=this.plot.gl,r=this.plot.dataBox;if(0===this.pointCount)return e;var a=r[2]-r[0],o=r[3]-r[1],s=d(this.points,r),u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(s,.33333)));l[0]=2/a,l[4]=2/o,l[6]=-2*r[0]/a-1,l[7]=-2*r[1]/o-1,this.offsetBuffer.bind(),n.bind(),n.attributes.position.pointer(),n.uniforms.matrix=l,n.uniforms.color=this.color,n.uniforms.borderColor=this.borderColor,n.uniforms.pointCloud=u<5,n.uniforms.pointSize=u,n.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),t&&(c[0]=255&e,c[1]=e>>8&255,c[2]=e>>16&255,c[3]=e>>24&255,this.pickBuffer.bind(),n.attributes.pickId.pointer(i.UNSIGNED_BYTE),n.uniforms.pickOffset=c,this.pickOffset=e);var g=i.getParameter(i.BLEND),h=i.getParameter(i.DITHER);return g&&!this.blend&&i.disable(i.BLEND),h&&i.disable(i.DITHER),i.drawArrays(i.POINTS,0,this.pointCount),g&&!this.blend&&i.enable(i.BLEND),h&&i.enable(i.DITHER),e+this.pointCount}),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(e,t,n){var i=this.pickOffset,r=this.pointCount;if(n<i||n>=i+r)return null;var a=n-i,o=this.points;return{object:this,pointId:a,dataCoord:[o[2*a],o[2*a+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(e,t,n){function i(e,t,n,i){var r,a,o,s,l,c=t[0],u=t[1],d=t[2],g=t[3],h=n[0],f=n[1],p=n[2],m=n[3];return(a=c*h+u*f+d*p+g*m)<0&&(a=-a,h=-h,f=-f,p=-p,m=-m),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-i)*r)/o,l=Math.sin(i*r)/o):(s=1-i,l=i),e[0]=s*c+l*h,e[1]=s*u+l*f,e[2]=s*d+l*p,e[3]=s*g+l*m,e}t.exports=i},{}],125:[function(e,t,n){t.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(e,t,n){var i=e("vectorize-text");t.exports=a;var r={};function a(e,t,n){var a=r[t];if(a||(a=r[t]={}),e in a)return a[e];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=i(e,o);o.triangles=!1;var l,c,u=i(e,o);if(n&&1!==n){for(l=0;l<s.positions.length;++l)for(c=0;c<s.positions[l].length;++c)s.positions[l][c]/=n;for(l=0;l<u.positions.length;++l)for(c=0;c<u.positions[l].length;++c)u.positions[l][c]/=n}var d=[[1/0,1/0],[-1/0,-1/0]],g=u.positions.length;for(l=0;l<g;++l){var h=u.positions[l];for(c=0;c<2;++c)d[0][c]=Math.min(d[0][c],h[c]),d[1][c]=Math.max(d[1][c],h[c])}return a[e]=[s,u,d]}},{"vectorize-text":311}],127:[function(e,t,n){var i=e("gl-shader"),r=e("glslify"),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],d={vertex:a,fragment:l,attributes:u},g={vertex:o,fragment:l,attributes:u},h={vertex:s,fragment:l,attributes:u},f={vertex:a,fragment:c,attributes:u},p={vertex:o,fragment:c,attributes:u},m={vertex:s,fragment:c,attributes:u};function v(e,t){var n=i(e,t),r=n.attributes;return r.position.location=0,r.color.location=1,r.glyph.location=2,r.id.location=3,n}n.createPerspective=function(e){return v(e,d)},n.createOrtho=function(e){return v(e,g)},n.createProject=function(e){return v(e,h)},n.createPickPerspective=function(e){return v(e,f)},n.createPickOrtho=function(e){return v(e,p)},n.createPickProject=function(e){return v(e,m)}},{"gl-shader":132,glslify:231}],128:[function(e,t,n){var i=e("is-string-blank"),r=e("gl-buffer"),a=e("gl-vao"),o=e("typedarray-pool"),s=e("gl-mat4/multiply"),l=e("./lib/shaders"),c=e("./lib/glyphs"),u=e("./lib/get-simple-string"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(e,t){var n=e[0],i=e[1],r=e[2],a=e[3];return e[0]=t[0]*n+t[4]*i+t[8]*r+t[12]*a,e[1]=t[1]*n+t[5]*i+t[9]*r+t[13]*a,e[2]=t[2]*n+t[6]*i+t[10]*r+t[14]*a,e[3]=t[3]*n+t[7]*i+t[11]*r+t[15]*a,e}function h(e,t,n,i){return g(i,i),g(i,i),g(i,i)}function f(e,t){this.index=e,this.dataCoordinate=this.position=t}function p(e){return!0===e||e>1?1:e}function m(e,t,n,i,r,a,o,s,l,c,u,d){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=i,this.pointBuffer=r,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=c,this.pickOrthoShader=u,this.pickProjectShader=d,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=Z;var v=m.prototype;v.pickSlots=1,v.setPickBase=function(e){this.pickId=e},v.isTransparent=function(){if(this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectHasAlpha)return!0;return!1},v.isOpaque=function(){if(!this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],y=[0,0,0],I=[0,0,0],C=[0,0,0,1],x=[0,0,0,1],B=d.slice(),A=[0,0,0],F=[[0,0,0],[0,0,0]];function Q(e){return e[0]=e[1]=e[2]=0,e}function U(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function w(e,t,n,i){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=i,e}function G(e){for(var t=F,n=0;n<2;++n)for(var i=0;i<3;++i)t[n][i]=Math.max(Math.min(e[n][i],1e8),-1e8);return t}function R(e,t,n,i){var r,a=t.axesProject,o=t.gl,l=e.uniforms,c=n.model||d,u=n.view||d,g=n.projection||d,f=t.axesBounds,p=G(t.clipBounds);r=t.axes&&t.axes.lastCubeProps?t.axes.lastCubeProps.axis:[1,1,1],b[0]=2/o.drawingBufferWidth,b[1]=2/o.drawingBufferHeight,e.bind(),l.view=u,l.projection=g,l.screenSize=b,l.highlightId=t.highlightId,l.highlightScale=t.highlightScale,l.clipBounds=p,l.pickGroup=t.pickId/255,l.pixelRatio=i;for(var m=0;m<3;++m)if(a[m]){l.scale=t.projectScale[m],l.opacity=t.projectOpacity[m];for(var v=B,F=0;F<16;++F)v[F]=0;for(F=0;F<4;++F)v[5*F]=1;v[5*m]=0,r[m]<0?v[12+m]=f[0][m]:v[12+m]=f[1][m],s(v,c,v),l.model=v;var R=(m+1)%3,L=(m+2)%3,S=Q(y),V=Q(I);S[R]=1,V[L]=1;var Z=h(g,u,c,U(C,S)),k=h(g,u,c,U(x,V));if(Math.abs(Z[1])>Math.abs(k[1])){var E=Z;Z=k,k=E,E=S,S=V,V=E;var X=R;R=L,L=X}Z[0]<0&&(S[R]=-1),k[1]>0&&(V[L]=-1);var N=0,W=0;for(F=0;F<4;++F)N+=Math.pow(c[4*R+F],2),W+=Math.pow(c[4*L+F],2);S[R]/=Math.sqrt(N),V[L]/=Math.sqrt(W),l.axes[0]=S,l.axes[1]=V,l.fragClipBounds[0]=w(A,p[0],m,-1e8),l.fragClipBounds[1]=w(A,p[1],m,1e8),t.vao.bind(),t.vao.draw(o.TRIANGLES,t.vertexCount),t.lineWidth>0&&(o.lineWidth(t.lineWidth*i),t.vao.draw(o.LINES,t.lineVertexCount,t.vertexCount)),t.vao.unbind()}}var L=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function S(e,t,n,i,r,a,o){var s=n.gl;if((a===n.projectHasAlpha||o)&&R(t,n,i,r),a===n.hasAlpha||o){e.bind();var l=e.uniforms;l.model=i.model||d,l.view=i.view||d,l.projection=i.projection||d,b[0]=2/s.drawingBufferWidth,b[1]=2/s.drawingBufferHeight,l.screenSize=b,l.highlightId=n.highlightId,l.highlightScale=n.highlightScale,l.fragClipBounds=L,l.clipBounds=n.axes.bounds,l.opacity=n.opacity,l.pickGroup=n.pickId/255,l.pixelRatio=r,n.vao.bind(),n.vao.draw(s.TRIANGLES,n.vertexCount),n.lineWidth>0&&(s.lineWidth(n.lineWidth*r),n.vao.draw(s.LINES,n.lineVertexCount,n.vertexCount)),n.vao.unbind()}}function V(e,t,n,r){var a;a=Array.isArray(e)?t<e.length?e[t]:void 0:e,a=u(a);var o=!0;i(a)&&(a="",o=!1);var s=c(a,n,r);return{mesh:s[0],lines:s[1],bounds:s[2],visible:o}}function Z(e){var t=e.gl,n=l.createPerspective(t),i=l.createOrtho(t),o=l.createProject(t),s=l.createPickPerspective(t),c=l.createPickOrtho(t),u=l.createPickProject(t),d=r(t),g=r(t),h=r(t),f=r(t),p=new m(t,n,i,o,d,g,h,f,a(t,[{buffer:d,size:3,type:t.FLOAT},{buffer:g,size:4,type:t.FLOAT},{buffer:h,size:2,type:t.FLOAT},{buffer:f,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),s,c,u);return p.update(e),p}v.draw=function(e){S(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!1,!1)},v.drawTransparent=function(e){S(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!0,!1)},v.drawPick=function(e){S(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,e,1,!0,!0)},v.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||t<0)return null;var n=this.points[t],i=this._selectResult;i.index=t;for(var r=0;r<3;++r)i.position[r]=i.dataCoordinate[r]=n[r];return i},v.highlight=function(e){if(e){var t=e.index,n=255&t,i=t>>8&255,r=t>>16&255;this.highlightId=[n/255,i/255,r/255,0]}else this.highlightId=[1,1,1,1]},v.update=function(e){if("perspective"in(e=e||{})&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e)if(Array.isArray(e.project))this.axesProject=e.project;else{var t=!!e.project;this.axesProject=[t,t,t]}if("projectScale"in e)if(Array.isArray(e.projectScale))this.projectScale=e.projectScale.slice();else{var n=+e.projectScale;this.projectScale=[n,n,n]}if(this.projectHasAlpha=!1,"projectOpacity"in e){Array.isArray(e.projectOpacity)?this.projectOpacity=e.projectOpacity.slice():(n=+e.projectOpacity,this.projectOpacity=[n,n,n]);for(var i=0;i<3;++i)this.projectOpacity[i]=p(this.projectOpacity[i]),this.projectOpacity[i]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in e&&(this.opacity=p(e.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var r,a,s=e.position,l=e.font||"normal",c=e.alignment||[0,0];if(2===c.length)r=c[0],a=c[1];else for(r=[],a=[],i=0;i<c.length;++i)r[i]=c[i][0],a[i]=c[i][1];var u=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0],g=e.glyph,h=e.color,f=e.size,m=e.angle,v=e.lineColor,b=-1,y=0,I=0,C=0;if(s.length){C=s.length;e:for(i=0;i<C;++i){for(var x=s[i],B=0;B<3;++B)if(isNaN(x[B])||!isFinite(x[B]))continue e;var A=(W=V(g,i,l,this.pixelRatio)).mesh,F=W.lines,Q=W.bounds;y+=3*A.cells.length,I+=2*F.edges.length}}var U=y+I,w=o.mallocFloat(3*U),G=o.mallocFloat(4*U),R=o.mallocFloat(2*U),L=o.mallocUint32(U);if(U>0){var S=0,Z=y,k=[0,0,0,1],E=[0,0,0,1],X=Array.isArray(h)&&Array.isArray(h[0]),N=Array.isArray(v)&&Array.isArray(v[0]);e:for(i=0;i<C;++i){for(b+=1,x=s[i],B=0;B<3;++B){if(isNaN(x[B])||!isFinite(x[B]))continue e;d[B]=Math.max(d[B],x[B]),u[B]=Math.min(u[B],x[B])}A=(W=V(g,i,l,this.pixelRatio)).mesh,F=W.lines,Q=W.bounds;var W,_=W.visible;if(_)if(Array.isArray(h)){if(3===(T=X?i<h.length?h[i]:[0,0,0,0]:h).length){for(B=0;B<3;++B)k[B]=T[B];k[3]=1}else if(4===T.length){for(B=0;B<4;++B)k[B]=T[B];!this.hasAlpha&&T[3]<1&&(this.hasAlpha=!0)}}else k[0]=k[1]=k[2]=0,k[3]=1;else k=[1,1,1,0];if(_)if(Array.isArray(v)){var T;if(3===(T=N?i<v.length?v[i]:[0,0,0,0]:v).length){for(B=0;B<3;++B)E[B]=T[B];E[B]=1}else if(4===T.length){for(B=0;B<4;++B)E[B]=T[B];!this.hasAlpha&&T[3]<1&&(this.hasAlpha=!0)}}else E[0]=E[1]=E[2]=0,E[3]=1;else E=[1,1,1,0];var M=.5;_?Array.isArray(f)?M=i<f.length?+f[i]:12:f?M=+f:this.useOrtho&&(M=12):M=0;var H=0;Array.isArray(m)?H=i<m.length?+m[i]:0:m&&(H=+m);var Y=Math.cos(H),D=Math.sin(H);for(x=s[i],B=0;B<3;++B)d[B]=Math.max(d[B],x[B]),u[B]=Math.min(u[B],x[B]);var z=r,O=a;z=0,Array.isArray(r)?z=i<r.length?r[i]:0:r&&(z=r),O=0,Array.isArray(a)?O=i<a.length?a[i]:0:a&&(O=a);var J=[z*=z>0?1-Q[0][0]:z<0?1+Q[1][0]:1,O*=O>0?1-Q[0][1]:O<0?1+Q[1][1]:1],j=A.cells||[],P=A.positions||[];for(B=0;B<j.length;++B)for(var K=j[B],q=0;q<3;++q){for(var $=0;$<3;++$)w[3*S+$]=x[$];for($=0;$<4;++$)G[4*S+$]=k[$];L[S]=b;var ee=P[K[q]];R[2*S]=M*(Y*ee[0]-D*ee[1]+J[0]),R[2*S+1]=M*(D*ee[0]+Y*ee[1]+J[1]),S+=1}for(j=F.edges,P=F.positions,B=0;B<j.length;++B)for(K=j[B],q=0;q<2;++q){for($=0;$<3;++$)w[3*Z+$]=x[$];for($=0;$<4;++$)G[4*Z+$]=E[$];L[Z]=b,ee=P[K[q]],R[2*Z]=M*(Y*ee[0]-D*ee[1]+J[0]),R[2*Z+1]=M*(D*ee[0]+Y*ee[1]+J[1]),Z+=1}}}this.bounds=[u,d],this.points=s,this.pointCount=s.length,this.vertexCount=y,this.lineVertexCount=I,this.pointBuffer.update(w),this.colorBuffer.update(G),this.glyphBuffer.update(R),this.idBuffer.update(L),o.free(w),o.free(G),o.free(R),o.free(L)},v.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(e,t,n){var i=e("glslify");n.boxVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),n.boxFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(e,t,n){var i=e("gl-shader"),r=e("gl-buffer"),a=e("./lib/shaders");function o(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}t.exports=l;var s=o.prototype;function l(e,t){var n=e.gl,s=new o(e,r(n,[0,0,0,1,1,0,1,1]),i(n,a.boxVertex,a.boxFragment));return s.update(t),e.addOverlay(s),s}s.draw=function(){if(this.enabled){var e=this.plot,t=this.selectBox,n=this.borderWidth;this.innerFill;var i=this.innerColor;this.outerFill;var r=this.outerColor,a=this.borderColor,o=e.box,s=e.screenBox,l=e.dataBox,c=e.viewBox,u=e.pixelRatio,d=(t[0]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],g=(t[1]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1],h=(t[2]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],f=(t[3]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1];if(d=Math.max(d,c[0]),g=Math.max(g,c[1]),h=Math.min(h,c[2]),f=Math.min(f,c[3]),!(h<d||f<g)){o.bind();var p=s[2]-s[0],m=s[3]-s[1];if(this.outerFill&&(o.drawBox(0,0,p,g,r),o.drawBox(0,g,d,f,r),o.drawBox(0,f,p,m,r),o.drawBox(h,g,p,f,r)),this.innerFill&&o.drawBox(d,g,h,f,i),n>0){var v=n*u;o.drawBox(d-v,g-v,h+v,g+v,a),o.drawBox(d-v,f-v,h+v,f+v,a),o.drawBox(d-v,g-v,d+v,f+v,a),o.drawBox(h-v,g-v,h+v,f+v,a)}}}},s.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(e,t,n){t.exports=d;var i=e("gl-fbo"),r=e("typedarray-pool"),a=e("ndarray"),o=e("bit-twiddle").nextPow2,s=function(e,t,n){for(var i=1e8,r=-1,a=-1,o=e.shape[0],s=e.shape[1],l=0;l<o;l++)for(var c=0;c<s;c++){var u=e.get(l,c,0),d=e.get(l,c,1),g=e.get(l,c,2),h=e.get(l,c,3);if(u<255||d<255||g<255||h<255){var f=t-l,p=n-c,m=f*f+p*p;m<i&&(i=m,r=l,a=c)}}return[r,a,i]};function l(e,t,n,i,r){this.coord=[e,t],this.id=n,this.value=i,this.distance=r}function c(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var i=this;this._readCallback=function(){i.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,i.buffer),i._readTimeout=null)}}var u=c.prototype;function d(e,t){var n=t[0],a=t[1];return new c(e,i(e,n,a,{}),r.mallocUint8(n*a*4))}Object.defineProperty(u,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],n=this.fbo.shape[1];if(n*t*4>this.buffer.length){r.free(this.buffer);for(var i=this.buffer=r.mallocUint8(o(n*t*4)),a=0;a<n*t*4;++a)i[a]=255}return e}}}),u.begin=function(){var e=this.gl;this.shape,e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},u.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},u.query=function(e,t,n){if(!this.gl)return null;var i=this.fbo.shape.slice();e|=0,t|=0,"number"!=typeof n&&(n=1);var r=0|Math.min(Math.max(e-n,0),i[0]),o=0|Math.min(Math.max(e+n,0),i[0]),c=0|Math.min(Math.max(t-n,0),i[1]),u=0|Math.min(Math.max(t+n,0),i[1]);if(o<=r||u<=c)return null;var d=[o-r,u-c],g=a(this.buffer,[d[0],d[1],4],[4,4*i[0],1],4*(r+i[0]*c)),h=s(g.hi(d[0],d[1],1),n,n),f=h[0],p=h[1];return f<0||Math.pow(this.radius,2)<h[2]?null:new l(f+r|0,p+c|0,g.get(f,p,0),[g.get(f,p,1),g.get(f,p,2),g.get(f,p,3)],Math.sqrt(h[2]))},u.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(e,t,n){var i=e("./lib/create-uniforms"),r=e("./lib/create-attributes"),a=e("./lib/reflect"),o=e("./lib/shader-cache"),s=e("./lib/runtime-reflect"),l=e("./lib/GLError");function c(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=c.prototype;function d(e,t){return e.name<t.name?-1:1}function g(e,t,n,i,r){var a=new c(e);return a.update(t,n,i,r),a}u.bind=function(){var e;this.program||this._relink();var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(t>n)for(e=n;e<t;e++)this.gl.enableVertexAttribArray(e);else if(n>t)for(e=t;e<n;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},u.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(e,t,n,c){if(!t||1===arguments.length){var u=e;e=u.vertex,t=u.fragment,n=u.uniforms,c=u.attributes}var g=this,h=g.gl,f=g._vref;g._vref=o.shader(h,h.VERTEX_SHADER,e),f&&f.dispose(),g.vertShader=g._vref.shader;var p=this._fref;if(g._fref=o.shader(h,h.FRAGMENT_SHADER,t),p&&p.dispose(),g.fragShader=g._fref.shader,!n||!c){var m=h.createProgram();if(h.attachShader(m,g.fragShader),h.attachShader(m,g.vertShader),h.linkProgram(m),!h.getProgramParameter(m,h.LINK_STATUS)){var v=h.getProgramInfoLog(m);throw new l(v,"Error linking program:"+v)}n=n||s.uniforms(h,m),c=c||s.attributes(h,m),h.deleteProgram(m)}(c=c.slice()).sort(d);var b,y=[],I=[],C=[];for(b=0;b<c.length;++b){var x=c[b];if(x.type.indexOf("mat")>=0){for(var B=0|x.type.charAt(x.type.length-1),A=new Array(B),F=0;F<B;++F)A[F]=C.length,I.push(x.name+"["+F+"]"),"number"==typeof x.location?C.push(x.location+F):Array.isArray(x.location)&&x.location.length===B&&"number"==typeof x.location[F]?C.push(0|x.location[F]):C.push(-1);y.push({name:x.name,type:x.type,locations:A})}else y.push({name:x.name,type:x.type,locations:[C.length]}),I.push(x.name),"number"==typeof x.location?C.push(0|x.location):C.push(-1)}var Q=0;for(b=0;b<C.length;++b)if(C[b]<0){for(;C.indexOf(Q)>=0;)Q+=1;C[b]=Q}var U=new Array(n.length);function w(){g.program=o.program(h,g._vref,g._fref,I,C);for(var e=0;e<n.length;++e)U[e]=h.getUniformLocation(g.program,n[e].name)}w(),g._relink=w,g.types={uniforms:a(n),attributes:a(c)},g.attributes=r(h,g,y,C),Object.defineProperty(g,"uniforms",i(h,g,n,U))},t.exports=g},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(e,t,n){function i(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?"\n"+n:""),this.stack=(new Error).stack}i.prototype=new Error,i.prototype.name="GLError",i.prototype.constructor=i,t.exports=i},{}],134:[function(e,t,n){t.exports=c;var i=e("./GLError");function r(e,t,n,i,r,a){this._gl=e,this._wrapper=t,this._index=n,this._locations=i,this._dimension=r,this._constFunc=a}var a=r.prototype;a.pointer=function(e,t,n,i){var r=this,a=r._gl,o=r._locations[r._index];a.vertexAttribPointer(o,r._dimension,e||a.FLOAT,!!t,n||0,i||0),a.enableVertexAttribArray(o)},a.set=function(e,t,n,i){return this._constFunc(this._locations[this._index],e,t,n,i)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}});var o=[function(e,t,n){return void 0===n.length?e.vertexAttrib1f(t,n):e.vertexAttrib1fv(t,n)},function(e,t,n,i){return void 0===n.length?e.vertexAttrib2f(t,n,i):e.vertexAttrib2fv(t,n)},function(e,t,n,i,r){return void 0===n.length?e.vertexAttrib3f(t,n,i,r):e.vertexAttrib3fv(t,n)},function(e,t,n,i,r,a){return void 0===n.length?e.vertexAttrib4f(t,n,i,r,a):e.vertexAttrib4fv(t,n)}];function s(e,t,n,i,a,s,l){var c=o[a],u=new r(e,t,n,i,a,c);Object.defineProperty(s,l,{set:function(t){return e.disableVertexAttribArray(i[n]),c(e,i[n],t),t},get:function(){return u},enumerable:!0})}function l(e,t,n,i,r,a,o){for(var l=new Array(r),c=new Array(r),u=0;u<r;++u)s(e,t,n[u],i,r,l,u),c[u]=l[u];Object.defineProperty(l,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<r;++t)c[t].location=e[t];else for(t=0;t<r;++t)c[t].location=e+t;return e},get:function(){for(var e=new Array(r),t=0;t<r;++t)e[t]=i[n[t]];return e},enumerable:!0}),l.pointer=function(t,a,o,s){t=t||e.FLOAT,a=!!a,o=o||r*r,s=s||0;for(var l=0;l<r;++l){var c=i[n[l]];e.vertexAttribPointer(c,r,t,a,o,s+l*r),e.enableVertexAttribArray(c)}};var d=new Array(r),g=e["vertexAttrib"+r+"fv"];Object.defineProperty(a,o,{set:function(t){for(var a=0;a<r;++a){var o=i[n[a]];if(e.disableVertexAttribArray(o),Array.isArray(t[0]))g.call(e,o,t[a]);else{for(var s=0;s<r;++s)d[s]=t[r*a+s];g.call(e,o,d)}}return t},get:function(){return l},enumerable:!0})}function c(e,t,n,r){for(var a={},o=0,c=n.length;o<c;++o){var u=n[o],d=u.name,g=u.type,h=u.locations;switch(g){case"bool":case"int":case"float":s(e,t,h[0],r,1,a,d);break;default:if(g.indexOf("vec")>=0){if((f=g.charCodeAt(g.length-1)-48)<2||f>4)throw new i("","Invalid data type for attribute "+d+": "+g);s(e,t,h[0],r,f,a,d)}else{if(!(g.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+d+": "+g);var f;if((f=g.charCodeAt(g.length-1)-48)<2||f>4)throw new i("","Invalid data type for attribute "+d+": "+g);l(e,t,h,r,f,a,d)}}}return a}},{"./GLError":133}],135:[function(e,t,n){var r=e("./reflect"),a=e("./GLError");function o(e){return function(){return e}}function s(e,t){for(var n=new Array(e),i=0;i<e;++i)n[i]=t;return n}function l(e,t,n,l){function c(e){return function(t,n,i){return t.getUniform(n.program,i[e])}}function u(t){return function(i){for(var r=d("",t),o=0;o<r.length;++o){var s=r[o],c=s[0],u=s[1];if(l[u]){var g=i;if("string"==typeof c&&(0===c.indexOf(".")||0===c.indexOf("["))){var h=c;if(0===c.indexOf(".")&&(h=c.slice(1)),h.indexOf("]")===h.length-1){var f=h.indexOf("["),p=h.slice(0,f),m=h.slice(f+1,h.length-1);g=p?i[p][m]:i[m]}else g=i[h]}var v,b=n[u].type;switch(b){case"bool":case"int":case"sampler2D":case"samplerCube":e.uniform1i(l[u],g);break;case"float":e.uniform1f(l[u],g);break;default:var y=b.indexOf("vec");if(!(0<=y&&y<=1&&b.length===4+y)){if(0===b.indexOf("mat")&&4===b.length){if((v=b.charCodeAt(b.length-1)-48)<2||v>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+b);e["uniformMatrix"+v+"fv"](l[u],!1,g);break}throw new a("","Unknown uniform data type for "+name+": "+b)}if((v=b.charCodeAt(b.length-1)-48)<2||v>4)throw new a("","Invalid data type");switch(b.charAt(0)){case"b":case"i":e["uniform"+v+"iv"](l[u],g);break;case"v":e["uniform"+v+"fv"](l[u],g);break;default:throw new a("","Unrecognized data type for vector "+name+": "+b)}}}}}}function d(e,t){if("object"!==i(t))return[[e,t]];var n=[];for(var r in t){var a=t[r],o=e;parseInt(r)+""===r?o+="["+r+"]":o+="."+r,"object"===i(a)?n.push.apply(n,d(o,a)):n.push([o,a])}return n}function g(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){if((n=e.charCodeAt(e.length-1)-48)<2||n>4)throw new a("","Invalid data type");return"b"===e.charAt(0)?s(n,!1):s(n,0)}if(0===e.indexOf("mat")&&4===e.length){var n;if((n=e.charCodeAt(e.length-1)-48)<2||n>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+e);return s(n*n,0)}throw new a("","Unknown uniform data type for "+name+": "+e)}}function h(e,t,r){if("object"===i(r)){var a=f(r);Object.defineProperty(e,t,{get:o(a),set:u(r),enumerable:!0,configurable:!1})}else l[r]?Object.defineProperty(e,t,{get:c(r),set:u(r),enumerable:!0,configurable:!1}):e[t]=g(n[r].type)}function f(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var n=0;n<e.length;++n)h(t,n,e[n])}else for(var i in t={},e)h(t,i,e[i]);return t}var p=r(n,!0);return{get:o(f(p)),set:u(p),enumerable:!0,configurable:!0}}t.exports=l},{"./GLError":133,"./reflect":136}],136:[function(e,t,n){function i(e,t){for(var n={},i=0;i<e.length;++i)for(var r=e[i].name.split("."),a=n,o=0;o<r.length;++o){var s=r[o].split("[");if(s.length>1){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var l=1;l<s.length;++l){var c=parseInt(s[l]);l<s.length-1||o<r.length-1?(c in a||(l<s.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?i:e[i].type}}else o<r.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=t?i:e[i].type}return n}t.exports=i},{}],137:[function(e,t,n){n.uniforms=o,n.attributes=s;var i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function a(e,t){if(!r){var n=Object.keys(i);r={};for(var a=0;a<n.length;++a){var o=n[a];r[e[o]]=i[o]}}return r[t]}function o(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=[],r=0;r<n;++r){var o=e.getActiveUniform(t,r);if(o){var s=a(e,o.type);if(o.size>1)for(var l=0;l<o.size;++l)i.push({name:o.name.replace("[0]","["+l+"]"),type:s});else i.push({name:o.name,type:s})}}return i}function s(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=[],r=0;r<n;++r){var o=e.getActiveAttrib(t,r);o&&i.push({name:o.name,type:a(e,o.type)})}return i}},{}],138:[function(e,t,n){n.shader=h,n.program=f;var i=e("./GLError"),r=e("gl-format-compiler-error"),a=new("undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap),o=0;function s(e,t,n,i,r,a,o){this.id=e,this.src=t,this.type=n,this.shader=i,this.count=a,this.programs=[],this.cache=o}function l(e){this.gl=e,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var e=this.cache,t=e.gl,n=this.programs,i=0,r=n.length;i<r;++i){var a=e.programs[n[i]];a&&(delete e.programs[i],t.deleteProgram(a))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var c=l.prototype;function u(e,t,n){var a=e.createShader(t);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(a);try{var s=r(o,n,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new i(o,"Error compiling shader:\n"+o)}throw new i(o,s.short,s.long)}return a}function d(e,t,n,r,a){var o=e.createProgram();e.attachShader(o,t),e.attachShader(o,n);for(var s=0;s<r.length;++s)e.bindAttribLocation(o,a[s],r[s]);if(e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){var l=e.getProgramInfoLog(o);throw new i(l,"Error linking program: "+l)}return o}function g(e){var t=a.get(e);return t||(t=new l(e),a.set(e,t)),t}function h(e,t,n){return g(e).getShaderReference(t,n)}function f(e,t,n,i,r){return g(e).getProgram(t,n,i,r)}c.getShaderReference=function(e,t){var n=this.gl,i=this.shaders[e===n.FRAGMENT_SHADER|0],r=i[t];if(r&&n.isShader(r.shader))r.count+=1;else{var a=u(n,e,t);r=i[t]=new s(o++,t,e,a,[],1,this)}return r},c.getProgram=function(e,t,n,i){var r=[e.id,t.id,n.join(":"),i.join(":")].join("@"),a=this.programs[r];return a&&this.gl.isProgram(a)||(this.programs[r]=a=d(this.gl,e.shader,t.shader,n,i),e.programs.push(r),t.programs.push(r)),a}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(e,t,n){function i(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}t.exports=a;var r=i.prototype;function a(e,t){var n=new i(e);return n.update(t),e.addOverlay(n),n}r.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map((function(e){return e.slice()})),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var e=this.enable,t=this.width,n=this.color,i=this.center,r=this.plot,a=r.line,o=r.dataBox,s=r.viewBox;if(a.bind(),o[0]<=i[0]&&i[0]<=o[2]&&o[1]<=i[1]&&i[1]<=o[3]){var l=s[0]+(i[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]),c=s[1]+(i[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);e[0]&&a.drawLine(l,c,s[0],c,t[0],n[0]),e[1]&&a.drawLine(l,c,l,s[1],t[1],n[1]),e[2]&&a.drawLine(l,c,s[2],c,t[2],n[2]),e[3]&&a.drawLine(l,c,l,s[3],t[3],n[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(e,t,n){var i=e("glslify"),r=e("gl-shader"),a=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);t.exports=function(e){return r(e,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(e,t,n){var i=e("gl-buffer"),r=e("gl-vao"),a=e("./shaders/index");t.exports=g;var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,n,i){this.gl=e,this.buffer=t,this.vao=n,this.shader=i,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=s.prototype,c=[0,0,0],u=[0,0,0],d=[0,0];function g(e,t){var n=[];function o(e,t,i,r,a,o){var s=[e,t,i,0,0,0,1];s[r+3]=1,s[r]=a,n.push.apply(n,s),s[6]=-1,n.push.apply(n,s),s[r]=o,n.push.apply(n,s),n.push.apply(n,s),s[6]=1,n.push.apply(n,s),s[r]=a,n.push.apply(n,s)}o(0,0,0,0,0,1),o(0,0,0,1,0,1),o(0,0,0,2,0,1),o(1,0,0,1,-1,1),o(1,0,0,2,-1,1),o(0,1,0,0,-1,1),o(0,1,0,2,-1,1),o(0,0,1,0,-1,1),o(0,0,1,1,-1,1);var l=i(e,n),c=r(e,[{type:e.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:l,size:1,offset:24,stride:28}]),u=a(e);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var d=new s(e,l,c,u);return d.update(t),d}l.isTransparent=function(){return!1},l.drawTransparent=function(e){},l.draw=function(e){var t=this.gl,n=this.vao,i=this.shader;n.bind(),i.bind();var r,a=e.model||o,s=e.view||o,l=e.projection||o;this.axes&&(r=this.axes.lastCubeProps.axis);for(var g=c,h=u,f=0;f<3;++f)r&&r[f]<0?(g[f]=this.bounds[0][f],h[f]=this.bounds[1][f]):(g[f]=this.bounds[1][f],h[f]=this.bounds[0][f]);for(d[0]=t.drawingBufferWidth,d[1]=t.drawingBufferHeight,i.uniforms.model=a,i.uniforms.view=s,i.uniforms.projection=l,i.uniforms.coordinates=[this.position,g,h],i.uniforms.colors=this.colors,i.uniforms.screenShape=d,f=0;f<3;++f)i.uniforms.lineWidth=this.lineWidth[f]*this.pixelRatio,this.enabled[f]&&(n.draw(t.TRIANGLES,6,6*f),this.drawSides[f]&&n.draw(t.TRIANGLES,12,18+12*f));n.unbind()},l.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(e,t,n){var i=e("glslify"),r=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:r,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},n.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(e,t,n){var i=e("gl-vec3"),r=e("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],o=function(e,t,n,a){for(var o=e.points,s=e.velocities,l=e.divergences,c=[],u=[],d=[],g=[],h=[],f=[],p=0,m=0,v=r.create(),b=r.create(),y=8,I=0;I<o.length;I++){var C=o[I],x=s[I],B=l[I];0===t&&(B=.05*n),m=i.length(x)/a,v=r.create(),i.copy(v,x),v[3]=B;for(var A=0;A<y;A++)h[A]=[C[0],C[1],C[2],A];if(g.length>0)for(A=0;A<y;A++){var F=(A+1)%y;c.push(g[A],h[A],h[F],h[F],g[F],g[A]),d.push(b,v,v,v,b,b),f.push(p,m,m,m,p,p);var Q=c.length;u.push([Q-6,Q-5,Q-4],[Q-3,Q-2,Q-1])}var U=g;g=h,h=U;var w=b;b=v,v=w;var G=p;p=m,m=G}return{positions:c,cells:u,vectors:d,vertexIntensity:f}},s=function(e,t,n,r){for(var a=0,s=0;s<e.length;s++)for(var l=e[s].velocities,c=0;c<l.length;c++)a=Math.max(a,i.length(l[c]));var u=e.map((function(e){return o(e,n,r,a)})),d=[],g=[],h=[],f=[];for(s=0;s<u.length;s++){var p=u[s],m=d.length;for(d=d.concat(p.positions),h=h.concat(p.vectors),f=f.concat(p.vertexIntensity),c=0;c<p.cells.length;c++){var v=p.cells[c],b=[];g.push(b);for(var y=0;y<v.length;y++)b.push(v[y]+m)}}return{positions:d,cells:g,vectors:h,vertexIntensity:f,colormap:t}},l=function(e,t){var n,i=e.length;for(n=0;n<i;n++){var r=e[n];if(r===t)return n;if(r>t)return n-1}return n},c=function(e,t,n){return e<t?t:e>n?n:e},u=function(e,t,n){var r=t.vectors,a=t.meshgrid,o=e[0],s=e[1],u=e[2],d=a[0].length,g=a[1].length,h=a[2].length,f=l(a[0],o),p=l(a[1],s),m=l(a[2],u),v=f+1,b=p+1,y=m+1;if(f=c(f,0,d-1),v=c(v,0,d-1),p=c(p,0,g-1),b=c(b,0,g-1),m=c(m,0,h-1),y=c(y,0,h-1),f<0||p<0||m<0||v>d-1||b>g-1||y>h-1)return i.create();var I,C,x,B,A,F,Q=a[0][f],U=a[0][v],w=a[1][p],G=a[1][b],R=a[2][m],L=(o-Q)/(U-Q),S=(s-w)/(G-w),V=(u-R)/(a[2][y]-R);switch(isFinite(L)||(L=.5),isFinite(S)||(S=.5),isFinite(V)||(V=.5),n.reversedX&&(f=d-1-f,v=d-1-v),n.reversedY&&(p=g-1-p,b=g-1-b),n.reversedZ&&(m=h-1-m,y=h-1-y),n.filled){case 5:A=m,F=y,x=p*h,B=b*h,I=f*h*g,C=v*h*g;break;case 4:A=m,F=y,I=f*h,C=v*h,x=p*h*d,B=b*h*d;break;case 3:x=p,B=b,A=m*g,F=y*g,I=f*g*h,C=v*g*h;break;case 2:x=p,B=b,I=f*g,C=v*g,A=m*g*d,F=y*g*d;break;case 1:I=f,C=v,A=m*d,F=y*d,x=p*d*h,B=b*d*h;break;default:I=f,C=v,x=p*d,B=b*d,A=m*d*g,F=y*d*g}var Z=r[I+x+A],k=r[I+x+F],E=r[I+B+A],X=r[I+B+F],N=r[C+x+A],W=r[C+x+F],_=r[C+B+A],T=r[C+B+F],M=i.create(),H=i.create(),Y=i.create(),D=i.create();i.lerp(M,Z,N,L),i.lerp(H,k,W,L),i.lerp(Y,E,_,L),i.lerp(D,X,T,L);var z=i.create(),O=i.create();i.lerp(z,M,Y,S),i.lerp(O,H,D,S);var J=i.create();return i.lerp(J,z,O,V),J},d=function(e){var t=1/0;e.sort((function(e,t){return e-t}));for(var n=e.length,i=1;i<n;i++){var r=Math.abs(e[i]-e[i-1]);r<t&&(t=r)}return t},g=function(e){for(var t=[],n=[],i=[],r={},a={},o={},s=e.length,l=0;l<s;l++){var c=e[l],u=c[0],g=c[1],h=c[2];r[u]||(t.push(u),r[u]=!0),a[g]||(n.push(g),a[g]=!0),o[h]||(i.push(h),o[h]=!0)}var f=d(t),p=d(n),m=d(i),v=Math.min(f,p,m);return isFinite(v)?v:1};t.exports=function(e,t){var n=e.startingPositions,r=e.maxLength||1e3,o=e.tubeSize||1,l=e.absoluteTubeSize,c=e.gridFill||"+x+y+z",d={};-1!==c.indexOf("-x")&&(d.reversedX=!0),-1!==c.indexOf("-y")&&(d.reversedY=!0),-1!==c.indexOf("-z")&&(d.reversedZ=!0),d.filled=a.indexOf(c.replace(/-/g,"").replace(/\+/g,""));var h=e.getVelocity||function(t){return u(t,e,d)},f=e.getDivergence||function(e,t){var n=i.create(),r=1e-4;i.add(n,e,[r,0,0]);var a=h(n);i.subtract(a,a,t),i.scale(a,a,1/r),i.add(n,e,[0,r,0]);var o=h(n);i.subtract(o,o,t),i.scale(o,o,1/r),i.add(n,e,[0,0,r]);var s=h(n);return i.subtract(s,s,t),i.scale(s,s,1/r),i.add(n,a,o),i.add(n,n,s),n},p=[],m=t[0][0],v=t[0][1],b=t[0][2],y=t[1][0],I=t[1][1],C=t[1][2],x=function(e){var t=e[0],n=e[1],i=e[2];return!(t<m||t>y||n<v||n>I||i<b||i>C)},B=10*i.distance(t[0],t[1])/r,A=B*B,F=1,Q=0,U=n.length;U>1&&(F=g(n));for(var w=0;w<U;w++){var G=i.create();i.copy(G,n[w]);var R=[G],L=[],S=h(G),V=G;L.push(S);var Z=[],k=f(G,S),E=i.length(k);isFinite(E)&&E>Q&&(Q=E),Z.push(E),p.push({points:R,velocities:L,divergences:Z});for(var X=0;X<100*r&&R.length<r&&x(G);){X++;var N=i.clone(S),W=i.squaredLength(N);if(0===W)break;W>A&&i.scale(N,N,B/Math.sqrt(W)),i.add(N,N,G),S=h(N),i.squaredDistance(V,N)-A>-1e-4*A&&(R.push(N),V=N,L.push(S),k=f(N,S),E=i.length(k),isFinite(E)&&E>Q&&(Q=E),Z.push(E)),G=N}}var _=s(p,e.colormap,Q,F);return l?_.tubeScale=l:(0===Q&&(Q=1),_.tubeScale=.5*o*F/Q),_};var h=e("./lib/shaders"),f=e("gl-cone3d").createMesh;t.exports.createTubeMesh=function(e,t){return f(e,t,{shaders:h,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(e,t,n){var i=e("gl-shader"),r=e("glslify"),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);n.createShader=function(e){var t=i(e,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createPickShader=function(e){var t=i(e,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createContourShader=function(e){var t=i(e,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},n.createPickContourShader=function(e){var t=i(e,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},{"gl-shader":132,glslify:231}],145:[function(e,t,n){t.exports=M;var i=e("bit-twiddle"),r=e("gl-buffer"),a=e("gl-vao"),o=e("gl-texture2d"),s=e("typedarray-pool"),l=e("colormap"),c=e("ndarray-ops"),u=e("ndarray-pack"),d=e("ndarray"),g=e("surface-nets"),h=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),p=e("binary-search-bounds"),m=e("ndarray-gradient"),v=e("./lib/shaders"),b=v.createShader,y=v.createContourShader,I=v.createPickShader,C=v.createPickContourShader,x=40,B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],F=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function Q(e,t,n,i,r){this.position=e,this.index=t,this.uv=n,this.level=i,this.dataCoordinate=r}!function(){for(var e=0;e<3;++e){var t=F[e],n=(e+2)%3;t[(e+1)%3+0]=1,t[n+3]=1,t[e+6]=1}}();var U=256;function w(e,t,n,i,r,a,o,l,c,u,g,h,f,p,m){this.gl=e,this.shape=t,this.bounds=n,this.objectOffset=m,this.intensityBounds=[],this._shader=i,this._pickShader=r,this._coordinateBuffer=a,this._vao=o,this._colorMap=l,this._contourShader=c,this._contourPickShader=u,this._contourBuffer=g,this._contourVAO=h,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new Q([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=f,this._dynamicVAO=p,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[d(s.mallocFloat(1024),[0,0]),d(s.mallocFloat(1024),[0,0]),d(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var G=w.prototype;function R(e,t){if(!t)return 1;if(!t.length)return 1;for(var n=0;n<t.length;++n){if(t.length<2)return 1;if(t[n][0]===e)return t[n][1];if(t[n][0]>e&&n>0){var i=(t[n][0]-e)/(t[n][0]-t[n-1][0]);return t[n][1]*(1-i)+i*t[n-1][1]}}return 1}G.genColormap=function(e,t){var n=!1,i=u([l({colormap:e,nshades:U,format:"rgba"}).map((function(e,i){var r=t?R(i/255,t):e[3];return r<1&&(n=!0),[e[0],e[1],e[2],255*r]}))]);return c.divseq(i,255),this.hasAlphaScale=n,i},G.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},G.isOpaque=function(){return!this.isTransparent()},G.pickSlots=1,G.setPickBase=function(e){this.pickId=e};var L=[0,0,0],S={showSurface:!1,showContour:!1,projections:[B.slice(),B.slice(),B.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(e,t){var n,i,r,a=t.axes&&t.axes.lastCubeProps.axis||L,o=t.showSurface,s=t.showContour;for(n=0;n<3;++n)for(o=o||t.surfaceProject[n],i=0;i<3;++i)s=s||t.contourProject[n][i];for(n=0;n<3;++n){var l=S.projections[n];for(i=0;i<16;++i)l[i]=0;for(i=0;i<4;++i)l[5*i]=1;l[5*n]=0,l[12+n]=t.axesBounds[+(a[n]>0)][n],h(l,e.model,l);var c=S.clipBounds[n];for(r=0;r<2;++r)for(i=0;i<3;++i)c[r][i]=e.clipBounds[r][i];c[0][n]=-1e8,c[1][n]=1e8}return S.showSurface=o,S.showContour=s,S}var Z={model:B,view:B,projection:B,inverseModel:B.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},k=B.slice(),E=[1,0,0,0,1,0,0,0,1];function X(e,t){e=e||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var i=Z;i.model=e.model||B,i.view=e.view||B,i.projection=e.projection||B,i.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],i.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],i.objectOffset=this.objectOffset,i.contourColor=this.contourColor[0],i.inverseModel=f(i.inverseModel,i.model);for(var r=0;r<2;++r)for(var a=i.clipBounds[r],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[r][o],-1e8),1e8);i.kambient=this.ambientLight,i.kdiffuse=this.diffuseLight,i.kspecular=this.specularLight,i.roughness=this.roughness,i.fresnel=this.fresnel,i.opacity=this.opacity,i.height=0,i.permutation=E,i.vertexColor=this.vertexColor;var s=k;for(h(s,i.view,i.model),h(s,i.projection,s),f(s,s),r=0;r<3;++r)i.eyePosition[r]=s[12+r]/s[15];var l=s[15];for(r=0;r<3;++r)l+=this.lightPosition[r]*s[4*r+3];for(r=0;r<3;++r){var c=s[12+r];for(o=0;o<3;++o)c+=s[4*o+r]*this.lightPosition[o];i.lightPosition[r]=c/l}var u=V(i,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=i,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(n.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[r],this._shader.uniforms.clipBounds=u.clipBounds[r],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var d=this._contourShader;i.kambient=1,i.kdiffuse=0,i.kspecular=0,i.opacity=1,d.bind(),d.uniforms=i;var g=this._contourVAO;for(g.bind(),r=0;r<3;++r)for(d.uniforms.permutation=F[r],n.lineWidth(this.contourWidth[r]*this.pixelRatio),o=0;o<this.contourLevels[r].length;++o)o===this.highlightLevel[r]?(d.uniforms.contourColor=this.highlightColor[r],d.uniforms.contourTint=this.highlightTint[r]):0!==o&&o-1!==this.highlightLevel[r]||(d.uniforms.contourColor=this.contourColor[r],d.uniforms.contourTint=this.contourTint[r]),this._contourCounts[r][o]&&(d.uniforms.height=this.contourLevels[r][o],g.draw(n.LINES,this._contourCounts[r][o],this._contourOffsets[r][o]));for(r=0;r<3;++r)for(d.uniforms.model=u.projections[r],d.uniforms.clipBounds=u.clipBounds[r],o=0;o<3;++o)if(this.contourProject[r][o]){d.uniforms.permutation=F[o],n.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var p=0;p<this.contourLevels[o].length;++p)p===this.highlightLevel[o]?(d.uniforms.contourColor=this.highlightColor[o],d.uniforms.contourTint=this.highlightTint[o]):0!==p&&p-1!==this.highlightLevel[o]||(d.uniforms.contourColor=this.contourColor[o],d.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][p]&&(d.uniforms.height=this.contourLevels[o][p],g.draw(n.LINES,this._contourCounts[o][p],this._contourOffsets[o][p]))}for(g.unbind(),(g=this._dynamicVAO).bind(),r=0;r<3;++r)if(0!==this._dynamicCounts[r])for(d.uniforms.model=i.model,d.uniforms.clipBounds=i.clipBounds,d.uniforms.permutation=F[r],n.lineWidth(this.dynamicWidth[r]*this.pixelRatio),d.uniforms.contourColor=this.dynamicColor[r],d.uniforms.contourTint=this.dynamicTint[r],d.uniforms.height=this.dynamicLevel[r],g.draw(n.LINES,this._dynamicCounts[r],this._dynamicOffsets[r]),o=0;o<3;++o)this.contourProject[o][r]&&(d.uniforms.model=u.projections[o],d.uniforms.clipBounds=u.clipBounds[o],g.draw(n.LINES,this._dynamicCounts[r],this._dynamicOffsets[r]));g.unbind()}}G.draw=function(e){return X.call(this,e,!1)},G.drawTransparent=function(e){return X.call(this,e,!0)};var N={model:B,view:B,projection:B,inverseModel:B,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function W(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function _(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function T(e){if(Array.isArray(e)){if(Array.isArray(e))return[_(e[0]),_(e[1]),_(e[2])];var t=_(e);return[t.slice(),t.slice(),t.slice()]}}function M(e){var t=e.gl,n=b(t),i=I(t),s=y(t),l=C(t),c=r(t),u=a(t,[{buffer:c,size:4,stride:x,offset:0},{buffer:c,size:3,stride:x,offset:16},{buffer:c,size:3,stride:x,offset:28}]),d=r(t),g=a(t,[{buffer:d,size:4,stride:20,offset:0},{buffer:d,size:1,stride:20,offset:16}]),h=r(t),f=a(t,[{buffer:h,size:2,type:t.FLOAT}]),p=o(t,1,U,t.RGBA,t.UNSIGNED_BYTE);p.minFilter=t.LINEAR,p.magFilter=t.LINEAR;var m=new w(t,[0,0],[[0,0,0],[0,0,0]],n,i,c,u,p,s,l,d,g,h,f,[0,0,0]),v={levels:[[],[],[]]};for(var B in e)v[B]=e[B];return v.colormap=v.colormap||"jet",m.update(v),m}G.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var n=N;n.model=e.model||B,n.view=e.view||B,n.projection=e.projection||B,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.objectOffset=this.objectOffset,n.permutation=E;for(var i=0;i<2;++i)for(var r=n.clipBounds[i],a=0;a<3;++a)r[a]=Math.min(Math.max(this.clipBounds[i][a],-1e8),1e8);var o=V(n,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&(this._pickShader.uniforms.model=o.projections[i],this._pickShader.uniforms.clipBounds=o.clipBounds[i],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=n;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(t.lineWidth(this.contourWidth[a]*this.pixelRatio),s.uniforms.permutation=F[a],i=0;i<this.contourLevels[a].length;++i)this._contourCounts[a][i]&&(s.uniforms.height=this.contourLevels[a][i],l.draw(t.LINES,this._contourCounts[a][i],this._contourOffsets[a][i]));for(i=0;i<3;++i)for(s.uniforms.model=o.projections[i],s.uniforms.clipBounds=o.clipBounds[i],a=0;a<3;++a)if(this.contourProject[i][a]){s.uniforms.permutation=F[a],t.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var c=0;c<this.contourLevels[a].length;++c)this._contourCounts[a][c]&&(s.uniforms.height=this.contourLevels[a][c],l.draw(t.LINES,this._contourCounts[a][c],this._contourOffsets[a][c]))}l.unbind()}},G.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,n=this._pickResult,i=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,r=Math.floor(i),a=i-r,o=t[1]*(e.value[1]+(15&e.value[2])/16)/255,s=Math.floor(o),l=o-s;r+=1,s+=1;var c=n.position;c[0]=c[1]=c[2]=0;for(var u=0;u<2;++u)for(var d=u?a:1-a,g=0;g<2;++g)for(var h=r+u,f=s+g,m=d*(g?l:1-l),v=0;v<3;++v)c[v]+=this._field[v].get(h,f)*m;for(var b=this._pickResult.level,y=0;y<3;++y)if(b[y]=p.le(this.contourLevels[y],c[y]),b[y]<0)this.contourLevels[y].length>0&&(b[y]=0);else if(b[y]<this.contourLevels[y].length-1){var I=this.contourLevels[y][b[y]],C=this.contourLevels[y][b[y]+1];Math.abs(I-c[y])>Math.abs(C-c[y])&&(b[y]+=1)}for(n.index[0]=a<.5?r:r+1,n.index[1]=l<.5?s:s+1,n.uv[0]=i/t[0],n.uv[1]=o/t[1],v=0;v<3;++v)n.dataCoordinate[v]=this._field[v].get(n.index[0],n.index[1]);return n},G.padField=function(e,t){var n=t.shape.slice(),i=e.shape.slice();c.assign(e.lo(1,1).hi(n[0],n[1]),t),c.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),c.assign(e.lo(1,i[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),c.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),c.assign(e.lo(i[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,i[1]-1,t.get(0,n[1]-1)),e.set(i[0]-1,0,t.get(n[0]-1,0)),e.set(i[0]-1,i[1]-1,t.get(n[0]-1,n[1]-1))},G.update=function(e){e=e||{},this.objectOffset=e.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in e&&(this.contourWidth=W(e.contourWidth,Number)),"showContour"in e&&(this.showContour=W(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=W(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=T(e.contourColor)),"contourProject"in e&&(this.contourProject=W(e.contourProject,(function(e){return W(e,Boolean)}))),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=T(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=W(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=W(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"opacityscale"in e&&(this.opacityscale=e.opacityscale),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0),"colormap"in e&&this._colorMap.setPixels(this.genColormap(e.colormap,this.opacityscale));var t=e.field||e.coords&&e.coords[2]||null,n=!1;if(t||(t=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){var r=(t.shape[0]+2)*(t.shape[1]+2);r>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(i.nextPow2(r))),this._field[2]=d(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),this.padField(this._field[2],t),this.shape=t.shape.slice();for(var a=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(s.freeFloat(this._field[o].data),this._field[o].data=s.mallocFloat(this._field[2].size)),this._field[o]=d(this._field[o].data,[a[0]+2,a[1]+2]);if(e.coords){var l=e.coords;if(!Array.isArray(l)||3!==l.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var c=l[o];for(v=0;v<2;++v)if(c.shape[v]!==a[v])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[o],c)}}else if(e.ticks){var u=e.ticks;if(!Array.isArray(u)||2!==u.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var h=u[o];if((Array.isArray(h)||h.length)&&(h=d(h)),h.shape[0]!==a[o])throw new Error("gl-surface: invalid tick length");var f=d(h.data,a);f.stride[o]=h.stride[0],f.stride[1^o]=0,this.padField(this._field[o],f)}}else{for(o=0;o<2;++o){var p=[0,0];p[o]=1,this._field[o]=d(this._field[o].data,[a[0]+2,a[1]+2],p,0)}this._field[0].set(0,0,0);for(var v=0;v<a[0];++v)this._field[0].set(v+1,0,v);for(this._field[0].set(a[0]+1,0,a[0]-1),this._field[1].set(0,0,0),v=0;v<a[1];++v)this._field[1].set(0,v+1,v);this._field[1].set(0,a[1]+1,a[1]-1)}var b=this._field,y=d(s.mallocFloat(3*b[2].size*2),[3,a[0]+2,a[1]+2,2]);for(o=0;o<3;++o)m(y.pick(o),b[o],"mirror");var I=d(s.mallocFloat(3*b[2].size),[a[0]+2,a[1]+2,3]);for(o=0;o<a[0]+2;++o)for(v=0;v<a[1]+2;++v){var C=y.get(0,o,v,0),x=y.get(0,o,v,1),B=y.get(1,o,v,0),F=y.get(1,o,v,1),Q=y.get(2,o,v,0),U=y.get(2,o,v,1),w=B*U-F*Q,G=Q*x-U*C,R=C*F-x*B,L=Math.sqrt(w*w+G*G+R*R);L<1e-8?(L=Math.max(Math.abs(w),Math.abs(G),Math.abs(R)))<1e-8?(R=1,G=w=0,L=1):L=1/L:L=1/Math.sqrt(L),I.set(o,v,0,w*L),I.set(o,v,1,G*L),I.set(o,v,2,R*L)}s.free(y.data);var S=[1/0,1/0,1/0],V=[-1/0,-1/0,-1/0],Z=1/0,k=-1/0,E=(a[0]-1)*(a[1]-1)*6,X=s.mallocFloat(i.nextPow2(10*E)),N=0,_=0;for(o=0;o<a[0]-1;++o)e:for(v=0;v<a[1]-1;++v){for(var M=0;M<2;++M)for(var H=0;H<2;++H)for(var Y=0;Y<3;++Y){var D=this._field[Y].get(1+o+M,1+v+H);if(isNaN(D)||!isFinite(D))continue e}for(Y=0;Y<6;++Y){var z=o+A[Y][0],O=v+A[Y][1],J=this._field[0].get(z+1,O+1),j=this._field[1].get(z+1,O+1);D=this._field[2].get(z+1,O+1),w=I.get(z+1,O+1,0),G=I.get(z+1,O+1,1),R=I.get(z+1,O+1,2),e.intensity&&(P=e.intensity.get(z,O));var P=e.intensity?e.intensity.get(z,O):D+this.objectOffset[2];X[N++]=z,X[N++]=O,X[N++]=J,X[N++]=j,X[N++]=D,X[N++]=0,X[N++]=P,X[N++]=w,X[N++]=G,X[N++]=R,S[0]=Math.min(S[0],J+this.objectOffset[0]),S[1]=Math.min(S[1],j+this.objectOffset[1]),S[2]=Math.min(S[2],D+this.objectOffset[2]),Z=Math.min(Z,P),V[0]=Math.max(V[0],J+this.objectOffset[0]),V[1]=Math.max(V[1],j+this.objectOffset[1]),V[2]=Math.max(V[2],D+this.objectOffset[2]),k=Math.max(k,P),_+=1}}for(e.intensityBounds&&(Z=+e.intensityBounds[0],k=+e.intensityBounds[1]),o=6;o<N;o+=10)X[o]=(X[o]-Z)/(k-Z);this._vertexCount=_,this._coordinateBuffer.update(X.subarray(0,N)),s.freeFloat(X),s.free(I.data),this.bounds=[S,V],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===Z&&this.intensityBounds[1]===k||(n=!0),this.intensityBounds=[Z,k]}if("levels"in e){var K=e.levels;for(K=Array.isArray(K[0])?K.slice():[[],[],K],o=0;o<3;++o)K[o]=K[o].slice(),K[o].sort((function(e,t){return e-t}));for(o=0;o<3;++o)for(v=0;v<K[o].length;++v)K[o][v]-=this.objectOffset[o];e:for(o=0;o<3;++o){if(K[o].length!==this.contourLevels[o].length){n=!0;break}for(v=0;v<K[o].length;++v)if(K[o][v]!==this.contourLevels[o][v]){n=!0;break e}}this.contourLevels=K}if(n){b=this._field,a=this.shape;for(var q=[],$=0;$<3;++$){var ee=this.contourLevels[$],te=[],ne=[],ie=[0,0,0];for(o=0;o<ee.length;++o){var re=g(this._field[$],ee[o]);te.push(q.length/5|0),_=0;e:for(v=0;v<re.cells.length;++v){var ae=re.cells[v];for(Y=0;Y<2;++Y){var oe=re.positions[ae[Y]],se=oe[0],le=0|Math.floor(se),ce=se-le,ue=oe[1],de=0|Math.floor(ue),ge=ue-de,he=!1;t:for(var fe=0;fe<3;++fe){ie[fe]=0;var pe=($+fe+1)%3;for(M=0;M<2;++M){var me=M?ce:1-ce;for(z=0|Math.min(Math.max(le+M,0),a[0]),H=0;H<2;++H){var ve=H?ge:1-ge;if(O=0|Math.min(Math.max(de+H,0),a[1]),D=fe<2?this._field[pe].get(z,O):(this.intensity.get(z,O)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(D)||isNaN(D)){he=!0;break t}var be=me*ve;ie[fe]+=be*D}}}if(he){if(Y>0){for(var ye=0;ye<5;++ye)q.pop();_-=1}continue e}q.push(ie[0],ie[1],oe[0],oe[1],ie[2]),_+=1}}ne.push(_)}this._contourOffsets[$]=te,this._contourCounts[$]=ne}var Ie=s.mallocFloat(q.length);for(o=0;o<q.length;++o)Ie[o]=q[o];this._contourBuffer.update(Ie),s.freeFloat(Ie)}},G.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)s.freeFloat(this._field[e].data)},G.highlight=function(e){var t,n;if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;for(n=this.snapToData?e.dataCoordinate:e.position,t=0;t<3;++t)n[t]-=this.objectOffset[t];if(this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]){for(var i=0,r=this.shape,a=s.mallocFloat(12*r[0]*r[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=n[o];var l=(o+1)%3,c=(o+2)%3,u=this._field[o],d=this._field[l],h=this._field[c],f=g(u,n[o]),p=f.cells,m=f.positions;for(this._dynamicOffsets[o]=i,t=0;t<p.length;++t)for(var v=p[t],b=0;b<2;++b){var y=m[v[b]],I=+y[0],C=0|I,x=0|Math.min(C+1,r[0]),B=I-C,A=1-B,F=+y[1],Q=0|F,U=0|Math.min(Q+1,r[1]),w=F-Q,G=1-w,R=A*G,L=A*w,S=B*G,V=B*w,Z=R*d.get(C,Q)+L*d.get(C,U)+S*d.get(x,Q)+V*d.get(x,U),k=R*h.get(C,Q)+L*h.get(C,U)+S*h.get(x,Q)+V*h.get(x,U);if(isNaN(Z)||isNaN(k)){b&&(i-=1);break}a[2*i+0]=Z,a[2*i+1]=k,i+=1}this._dynamicCounts[o]=i-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*i)),s.freeFloat(a)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(e,t,n){var r=e("ndarray"),a=e("ndarray-ops"),o=e("typedarray-pool");t.exports=x;var s=null,l=null,c=null;function u(e){s=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],l=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],c=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function d(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var g=function(e,t){a.muls(e,t,255)};function h(e,t,n){var i=e.gl,r=i.getParameter(i.MAX_TEXTURE_SIZE);if(t<0||t>r||n<0||n>r)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),i.texImage2D(i.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function f(e,t,n,i,r,a){this.gl=e,this.handle=t,this.format=r,this.type=a,this._shape=[n,i],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=l}var p=f.prototype;function m(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function v(e,t,n,i,s,l,c,u){var d=u.dtype,h=u.shape.slice();if(h.length<2||h.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var f=0,p=0,v=m(h,u.stride.slice());if("float32"===d?f=e.FLOAT:"float64"===d?(f=e.FLOAT,v=!1,d="float32"):"uint8"===d?f=e.UNSIGNED_BYTE:(f=e.UNSIGNED_BYTE,v=!1,d="uint8"),2===h.length)p=e.LUMINANCE,h=[h[0],h[1],1],u=r(u.data,h,[u.stride[0],u.stride[1],1],u.offset);else{if(3!==h.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===h[2])p=e.ALPHA;else if(2===h[2])p=e.LUMINANCE_ALPHA;else if(3===h[2])p=e.RGB;else{if(4!==h[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");p=e.RGBA}}if(p!==e.LUMINANCE&&p!==e.ALPHA||s!==e.LUMINANCE&&s!==e.ALPHA||(p=s),p!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var b=u.size,y=c.indexOf(i)<0;if(y&&c.push(i),f===l&&v)0===u.offset&&u.data.length===b?y?e.texImage2D(e.TEXTURE_2D,i,s,h[0],h[1],0,s,l,u.data):e.texSubImage2D(e.TEXTURE_2D,i,t,n,h[0],h[1],s,l,u.data):y?e.texImage2D(e.TEXTURE_2D,i,s,h[0],h[1],0,s,l,u.data.subarray(u.offset,u.offset+b)):e.texSubImage2D(e.TEXTURE_2D,i,t,n,h[0],h[1],s,l,u.data.subarray(u.offset,u.offset+b));else{var I;I=l===e.FLOAT?o.mallocFloat32(b):o.mallocUint8(b);var C=r(I,h,[h[2],h[2]*h[0],1]);f===e.FLOAT&&l===e.UNSIGNED_BYTE?g(C,u):a.assign(C,u),y?e.texImage2D(e.TEXTURE_2D,i,s,h[0],h[1],0,s,l,I.subarray(0,b)):e.texSubImage2D(e.TEXTURE_2D,i,t,n,h[0],h[1],s,l,I.subarray(0,b)),l===e.FLOAT?o.freeFloat32(I):o.freeUint8(I)}}function b(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function y(e,t,n,i,r){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||n<0||n>a)throw new Error("gl-texture2d: Invalid texture shape");if(r===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=b(e);return e.texImage2D(e.TEXTURE_2D,0,i,t,n,0,i,r,null),new f(e,o,t,n,i,r)}function I(e,t,n,i,r,a){var o=b(e);return e.texImage2D(e.TEXTURE_2D,0,r,r,a,t),new f(e,o,n,i,r,a)}function C(e,t){var n=t.dtype,i=t.shape.slice(),s=e.getParameter(e.MAX_TEXTURE_SIZE);if(i[0]<0||i[0]>s||i[1]<0||i[1]>s)throw new Error("gl-texture2d: Invalid texture size");var l=m(i,t.stride.slice()),c=0;"float32"===n?c=e.FLOAT:"float64"===n?(c=e.FLOAT,l=!1,n="float32"):"uint8"===n?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,l=!1,n="uint8");var u,d,h=0;if(2===i.length)h=e.LUMINANCE,i=[i[0],i[1],1],t=r(t.data,i,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==i.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===i[2])h=e.ALPHA;else if(2===i[2])h=e.LUMINANCE_ALPHA;else if(3===i[2])h=e.RGB;else{if(4!==i[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");h=e.RGBA}}c!==e.FLOAT||e.getExtension("OES_texture_float")||(c=e.UNSIGNED_BYTE,l=!1);var p=t.size;if(l)u=0===t.offset&&t.data.length===p?t.data:t.data.subarray(t.offset,t.offset+p);else{var v=[i[2],i[2]*i[0],1];d=o.malloc(p,n);var y=r(d,i,v,0);"float32"!==n&&"float64"!==n||c!==e.UNSIGNED_BYTE?a.assign(y,t):g(y,t),u=d.subarray(0,p)}var I=b(e);return e.texImage2D(e.TEXTURE_2D,0,h,i[0],i[1],0,h,c,u),l||o.free(d),new f(e,I,i[0],i[1],h,c)}function x(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(s||u(e),"number"==typeof arguments[1])return y(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"===i(arguments[1])){var t=arguments[1],n=d(t)?t:t.raw;if(n)return I(e,n,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return C(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&s.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),l.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&s.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),l.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var n=this.gl.getExtension("EXT_texture_filter_anisotropic");n&&this.gl.texParameterf(this.gl.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),c.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),c.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(c.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return h(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return h(this,e|=0,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,h(this,this._shape[0],e),e}}}),p.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},p.setPixels=function(e,t,n,i){var r=this.gl;this.bind(),Array.isArray(t)?(i=n,n=0|t[1],t=0|t[0]):(t=t||0,n=n||0),i=i||0;var a=d(e)?e:e.raw;if(a)this._mipLevels.indexOf(i)<0?(r.texImage2D(r.TEXTURE_2D,0,this.format,this.format,this.type,a),this._mipLevels.push(i)):r.texSubImage2D(r.TEXTURE_2D,i,t,n,this.format,this.type,a);else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>i||n+e.shape[0]>this._shape[0]>>>i||t<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");v(r,t,n,i,this.format,this.type,this._mipLevels,e)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(e,t,n){function i(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var i=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>i)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<n.length;++r){var a=n[r];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||e.FLOAT,c=!!a.normalized,u=a.stride||0,d=a.offset||0;o.bind(),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,s,l,c,u,d)}else{if("number"==typeof a)e.vertexAttrib1f(r,a);else if(1===a.length)e.vertexAttrib1f(r,a[0]);else if(2===a.length)e.vertexAttrib2f(r,a[0],a[1]);else if(3===a.length)e.vertexAttrib3f(r,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(r,a[0],a[1],a[2],a[3])}e.disableVertexAttribArray(r)}}for(;r<i;++r)e.disableVertexAttribArray(r)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),r=0;r<i;++r)e.disableVertexAttribArray(r)}t.exports=i},{}],148:[function(e,t,n){var i=e("./do-bind.js");function r(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}function a(e){return new r(e)}r.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},r.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(e,t,n){n=n||0;var i=this.gl;this._elements?i.drawElements(e,t,this._elementsType,n):i.drawArrays(e,n,t)},t.exports=a},{"./do-bind.js":147}],149:[function(e,t,n){var i=e("./do-bind.js");function r(e,t,n,i,r,a){this.location=e,this.dimension=t,this.a=n,this.b=i,this.c=r,this.d=a}function a(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}function o(e,t){return new a(e,t,t.createVertexArrayOES())}r.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(e,t,n){if(this.bind(),i(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var a=0;a<e.length;++a){var o=e[a];"number"==typeof o?this._attribs.push(new r(a,1,o)):Array.isArray(o)&&this._attribs.push(new r(a,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(e,t,n){n=n||0;var i=this.gl;this._useElements?i.drawElements(e,t,this._elementsType,n):i.drawArrays(e,n,t)},t.exports=o},{"./do-bind.js":147}],150:[function(e,t,n){var i=e("./lib/vao-native.js"),r=e("./lib/vao-emulated.js");function a(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}function o(e,t,n,o){var s,l=e.createVertexArray?new a(e):e.getExtension("OES_vertex_array_object");return(s=l?i(e,l):r(e)).update(t,n,o),s}t.exports=o},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(e,t,n){function i(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}t.exports=i},{}],152:[function(e,t,n){t.exports=o;var i=e("./fromValues"),r=e("./normalize"),a=e("./dot");function o(e,t){var n=i(e[0],e[1],e[2]),o=i(t[0],t[1],t[2]);r(n,n),r(o,o);var s=a(n,o);return s>1?0:Math.acos(s)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(e,t,n){function i(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}t.exports=i},{}],154:[function(e,t,n){function i(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}t.exports=i},{}],155:[function(e,t,n){function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}t.exports=i},{}],156:[function(e,t,n){function i(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=i},{}],157:[function(e,t,n){function i(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=r*l-a*s,e[1]=a*o-i*l,e[2]=i*s-r*o,e}t.exports=i},{}],158:[function(e,t,n){t.exports=e("./distance")},{"./distance":159}],159:[function(e,t,n){function i(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+i*i+r*r)}t.exports=i},{}],160:[function(e,t,n){t.exports=e("./divide")},{"./divide":161}],161:[function(e,t,n){function i(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}t.exports=i},{}],162:[function(e,t,n){function i(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=i},{}],163:[function(e,t,n){t.exports=1e-6},{}],164:[function(e,t,n){t.exports=r;var i=e("./epsilon");function r(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return Math.abs(n-o)<=i*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=i*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-l)<=i*Math.max(1,Math.abs(a),Math.abs(l))}},{"./epsilon":163}],165:[function(e,t,n){function i(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}t.exports=i},{}],166:[function(e,t,n){function i(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}t.exports=i},{}],167:[function(e,t,n){t.exports=r;var i=e("./create")();function r(e,t,n,r,a,o){var s,l;for(t||(t=3),n||(n=0),l=r?Math.min(r*t+n,e.length):e.length,s=n;s<l;s+=t)i[0]=e[s],i[1]=e[s+1],i[2]=e[s+2],a(i,i,o),e[s]=i[0],e[s+1]=i[1],e[s+2]=i[2];return e}},{"./create":156}],168:[function(e,t,n){function i(e,t,n){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=n,i}t.exports=i},{}],169:[function(e,t,n){t.exports={EPSILON:e("./epsilon"),create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),equals:e("./equals"),exactEquals:e("./exactEquals"),add:e("./add"),subtract:e("./subtract"),sub:e("./sub"),multiply:e("./multiply"),mul:e("./mul"),divide:e("./divide"),div:e("./div"),min:e("./min"),max:e("./max"),floor:e("./floor"),ceil:e("./ceil"),round:e("./round"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),dist:e("./dist"),squaredDistance:e("./squaredDistance"),sqrDist:e("./sqrDist"),length:e("./length"),len:e("./len"),squaredLength:e("./squaredLength"),sqrLen:e("./sqrLen"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(e,t,n){function i(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}t.exports=i},{}],171:[function(e,t,n){t.exports=e("./length")},{"./length":172}],172:[function(e,t,n){function i(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)}t.exports=i},{}],173:[function(e,t,n){function i(e,t,n,i){var r=t[0],a=t[1],o=t[2];return e[0]=r+i*(n[0]-r),e[1]=a+i*(n[1]-a),e[2]=o+i*(n[2]-o),e}t.exports=i},{}],174:[function(e,t,n){function i(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}t.exports=i},{}],175:[function(e,t,n){function i(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}t.exports=i},{}],176:[function(e,t,n){t.exports=e("./multiply")},{"./multiply":177}],177:[function(e,t,n){function i(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}t.exports=i},{}],178:[function(e,t,n){function i(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}t.exports=i},{}],179:[function(e,t,n){function i(e,t){var n=t[0],i=t[1],r=t[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}t.exports=i},{}],180:[function(e,t,n){function i(e,t){t=t||1;var n=2*Math.random()*Math.PI,i=2*Math.random()-1,r=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*r,e[1]=Math.sin(n)*r,e[2]=i*t,e}t.exports=i},{}],181:[function(e,t,n){function i(e,t,n,i){var r=n[1],a=n[2],o=t[1]-r,s=t[2]-a,l=Math.sin(i),c=Math.cos(i);return e[0]=t[0],e[1]=r+o*c-s*l,e[2]=a+o*l+s*c,e}t.exports=i},{}],182:[function(e,t,n){function i(e,t,n,i){var r=n[0],a=n[2],o=t[0]-r,s=t[2]-a,l=Math.sin(i),c=Math.cos(i);return e[0]=r+s*l+o*c,e[1]=t[1],e[2]=a+s*c-o*l,e}t.exports=i},{}],183:[function(e,t,n){function i(e,t,n,i){var r=n[0],a=n[1],o=t[0]-r,s=t[1]-a,l=Math.sin(i),c=Math.cos(i);return e[0]=r+o*c-s*l,e[1]=a+o*l+s*c,e[2]=t[2],e}t.exports=i},{}],184:[function(e,t,n){function i(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}t.exports=i},{}],185:[function(e,t,n){function i(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}t.exports=i},{}],186:[function(e,t,n){function i(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}t.exports=i},{}],187:[function(e,t,n){function i(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}t.exports=i},{}],188:[function(e,t,n){t.exports=e("./squaredDistance")},{"./squaredDistance":190}],189:[function(e,t,n){t.exports=e("./squaredLength")},{"./squaredLength":191}],190:[function(e,t,n){function i(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return n*n+i*i+r*r}t.exports=i},{}],191:[function(e,t,n){function i(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i}t.exports=i},{}],192:[function(e,t,n){t.exports=e("./subtract")},{"./subtract":193}],193:[function(e,t,n){function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}t.exports=i},{}],194:[function(e,t,n){function i(e,t,n){var i=t[0],r=t[1],a=t[2];return e[0]=i*n[0]+r*n[3]+a*n[6],e[1]=i*n[1]+r*n[4]+a*n[7],e[2]=i*n[2]+r*n[5]+a*n[8],e}t.exports=i},{}],195:[function(e,t,n){function i(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[3]*i+n[7]*r+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*i+n[4]*r+n[8]*a+n[12])/o,e[1]=(n[1]*i+n[5]*r+n[9]*a+n[13])/o,e[2]=(n[2]*i+n[6]*r+n[10]*a+n[14])/o,e}t.exports=i},{}],196:[function(e,t,n){function i(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*a-l*r,d=c*r+l*i-o*a,g=c*a+o*r-s*i,h=-o*i-s*r-l*a;return e[0]=u*c+h*-o+d*-l-g*-s,e[1]=d*c+h*-s+g*-o-u*-l,e[2]=g*c+h*-l+u*-s-d*-o,e}t.exports=i},{}],197:[function(e,t,n){function i(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}t.exports=i},{}],198:[function(e,t,n){function i(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}t.exports=i},{}],199:[function(e,t,n){function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}t.exports=i},{}],200:[function(e,t,n){function i(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}t.exports=i},{}],201:[function(e,t,n){function i(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+i*i+r*r+a*a)}t.exports=i},{}],202:[function(e,t,n){function i(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}t.exports=i},{}],203:[function(e,t,n){function i(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}t.exports=i},{}],204:[function(e,t,n){function i(e,t,n,i){var r=new Float32Array(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}t.exports=i},{}],205:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(e,t,n){function i(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}t.exports=i},{}],207:[function(e,t,n){function i(e){var t=e[0],n=e[1],i=e[2],r=e[3];return Math.sqrt(t*t+n*n+i*i+r*r)}t.exports=i},{}],208:[function(e,t,n){function i(e,t,n,i){var r=t[0],a=t[1],o=t[2],s=t[3];return e[0]=r+i*(n[0]-r),e[1]=a+i*(n[1]-a),e[2]=o+i*(n[2]-o),e[3]=s+i*(n[3]-s),e}t.exports=i},{}],209:[function(e,t,n){function i(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}t.exports=i},{}],210:[function(e,t,n){function i(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}t.exports=i},{}],211:[function(e,t,n){function i(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}t.exports=i},{}],212:[function(e,t,n){function i(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}t.exports=i},{}],213:[function(e,t,n){function i(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n*n+i*i+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=i*o,e[2]=r*o,e[3]=a*o),e}t.exports=i},{}],214:[function(e,t,n){var i=e("./normalize"),r=e("./scale");function a(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),i(e,e),r(e,e,t),e}t.exports=a},{"./normalize":213,"./scale":215}],215:[function(e,t,n){function i(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}t.exports=i},{}],216:[function(e,t,n){function i(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e}t.exports=i},{}],217:[function(e,t,n){function i(e,t,n,i,r){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e}t.exports=i},{}],218:[function(e,t,n){function i(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],a=t[3]-e[3];return n*n+i*i+r*r+a*a}t.exports=i},{}],219:[function(e,t,n){function i(e){var t=e[0],n=e[1],i=e[2],r=e[3];return t*t+n*n+i*i+r*r}t.exports=i},{}],220:[function(e,t,n){function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}t.exports=i},{}],221:[function(e,t,n){function i(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,e[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,e[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,e[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,e}t.exports=i},{}],222:[function(e,t,n){function i(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*a-l*r,d=c*r+l*i-o*a,g=c*a+o*r-s*i,h=-o*i-s*r-l*a;return e[0]=u*c+h*-o+d*-l-g*-s,e[1]=d*c+h*-s+g*-o-u*-l,e[2]=g*c+h*-l+u*-s-d*-o,e[3]=t[3],e}t.exports=i},{}],223:[function(e,t,n){var i=e("glsl-tokenizer"),r=e("atob-lite");function a(e){for(var t=Array.isArray(e)?e:i(e),n=0;n<t.length;n++){var a=t[n];if("preprocessor"===a.type){var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var s=o[1],l=o[2];return(s?r(l):l).trim()}}}}t.exports=a},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(e,t,n){t.exports=B;var i=e("./lib/literals"),r=e("./lib/operators"),a=e("./lib/builtins"),o=e("./lib/literals-300es"),s=e("./lib/builtins-300es"),l=999,c=9999,u=0,d=1,g=2,h=3,f=4,p=5,m=6,v=7,b=8,y=9,I=10,C=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function B(e){var t,n,B,A=0,F=0,Q=l,U=[],w=[],G=1,R=0,L=0,S=!1,V=!1,Z="",k=a,E=i;"300 es"===(e=e||{}).version&&(k=s,E=o);var X={},N={};for(A=0;A<k.length;A++)X[k[A]]=!0;for(A=0;A<E.length;A++)N[E[A]]=!0;return function(e){return w=[],null!==e?_(e):T()};function W(e){e.length&&w.push({type:x[Q],data:e,position:L,line:G,column:R})}function _(e){var n;for(A=0,e.toString&&(e=e.toString()),Z+=e.replace(/\r\n/g,"\n"),B=Z.length;t=Z[A],A<B;){switch(n=A,Q){case u:A=z();break;case d:A=D();break;case g:A=Y();break;case h:A=O();break;case f:A=P();break;case C:A=j();break;case p:A=K();break;case c:A=q();break;case y:A=H();break;case l:A=M()}n!==A&&("\n"===Z[n]?(R=0,++G):++R)}return F+=A,Z=Z.slice(A),w}function T(e){return U.length&&W(U.join("")),Q=I,W("(eof)"),w}function M(){return U=U.length?[]:U,"/"===n&&"*"===t?(L=F+A-1,Q=u,n=t,A+1):"/"===n&&"/"===t?(L=F+A-1,Q=d,n=t,A+1):"#"===t?(Q=g,L=F+A,A):/\s/.test(t)?(Q=y,L=F+A,A):(S=/\d/.test(t),V=/[^\w_]/.test(t),L=F+A,Q=S?f:V?h:c,A)}function H(){return/[^\s]/g.test(t)?(W(U.join("")),Q=l,A):(U.push(t),n=t,A+1)}function Y(){return"\r"!==t&&"\n"!==t||"\\"===n?(U.push(t),n=t,A+1):(W(U.join("")),Q=l,A)}function D(){return Y()}function z(){return"/"===t&&"*"===n?(U.push(t),W(U.join("")),Q=l,A+1):(U.push(t),n=t,A+1)}function O(){if("."===n&&/\d/.test(t))return Q=p,A;if("/"===n&&"*"===t)return Q=u,A;if("/"===n&&"/"===t)return Q=d,A;if("."===t&&U.length){for(;J(U););return Q=p,A}if(";"===t||")"===t||"("===t){if(U.length)for(;J(U););return W(t),Q=l,A+1}var e=2===U.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;J(U););return Q=l,A}return U.push(t),n=t,A+1}function J(e){for(var t,n,i=0;;){if(t=r.indexOf(e.slice(0,e.length+i).join("")),n=r[t],-1===t){if(i--+e.length>0)continue;n=e.slice(0,1).join("")}return W(n),L+=n.length,(U=U.slice(n.length)).length}}function j(){return/[^a-fA-F0-9]/.test(t)?(W(U.join("")),Q=l,A):(U.push(t),n=t,A+1)}function P(){return"."===t||/[eE]/.test(t)?(U.push(t),Q=p,n=t,A+1):"x"===t&&1===U.length&&"0"===U[0]?(Q=C,U.push(t),n=t,A+1):/[^\d]/.test(t)?(W(U.join("")),Q=l,A):(U.push(t),n=t,A+1)}function K(){return"f"===t&&(U.push(t),n=t,A+=1),/[eE]/.test(t)?(U.push(t),n=t,A+1):("-"!==t&&"+"!==t||!/[eE]/.test(n))&&/[^\d]/.test(t)?(W(U.join("")),Q=l,A):(U.push(t),n=t,A+1)}function q(){if(/[^\d\w_]/.test(t)){var e=U.join("");return Q=N[e]?b:X[e]?v:m,W(U.join("")),Q=l,A}return U.push(t),n=t,A+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(e,t,n){var i=e("./builtins");i=i.slice().filter((function(e){return!/^(gl\_|texture)/.test(e)})),t.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(e,t,n){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(e,t,n){var i=e("./literals");t.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(e,t,n){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(e,t,n){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(e,t,n){var i=e("./index");function r(e,t){var n=i(t),r=[];return r=(r=r.concat(n(e))).concat(n(null))}t.exports=r},{"./index":224}],231:[function(e,t,n){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],i=0;i<e.length-1;i++)n.push(e[i],t[i]||"");return n.push(e[i]),n.join("")}},{}],232:[function(e,t,n){var i=e("is-browser");function r(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}t.exports=i&&r()},{"is-browser":236}],233:[function(e,t,n){t.exports=h;var i=e("robust-orientation"),r=e("simplicial-complex").compareCells;function a(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function o(e,t,n){this.vertices=e,this.cell=t,this.index=n}function s(e,t){return r(e.vertices,t.vertices)}function l(e){return function(){var t=this.tuple;return e.apply(this,t)}}function c(e){var t=i[e+1];return t||(t=i),l(t)}a.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var u=[];function d(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter((function(e){return!e.boundary})),this.tuple=new Array(e+1);for(var i=0;i<=e;++i)this.tuple[i]=this.vertices[i];var r=u[e];r||(r=u[e]=c(e)),this.orient=r}var g=d.prototype;function h(e,t){var n=e.length;if(0===n)throw new Error("Must have at least d+1 points");var r=e[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var o=e.slice(0,r+1),s=i.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var l=new Array(r+1),c=0;c<=r;++c)l[c]=c;s<0&&(l[0]=1,l[1]=0);var u=new a(l,new Array(r+1),!1),g=u.adjacent,h=new Array(r+2);for(c=0;c<=r;++c){for(var f=l.slice(),p=0;p<=r;++p)p===c&&(f[p]=-1);var m=f[0];f[0]=f[1],f[1]=m;var v=new a(f,new Array(r+1),!0);g[c]=v,h[c]=v}for(h[r+1]=u,c=0;c<=r;++c){f=g[c].vertices;var b=g[c].adjacent;for(p=0;p<=r;++p){var y=f[p];if(y<0)b[p]=u;else for(var I=0;I<=r;++I)g[I].vertices.indexOf(y)<0&&(b[p]=g[I])}}var C=new d(r,o,h),x=!!t;for(c=r+1;c<n;++c)C.insert(e[c],x);return C.boundary()}g.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,i=this.vertices.length-1,r=this.tuple,a=this.vertices,o=[e];for(e.lastVisited=-i;o.length>0;)for(var s=(e=o.pop()).adjacent,l=0;l<=n;++l){var c=s[l];if(c.boundary&&!(c.lastVisited<=-i)){for(var u=c.vertices,d=0;d<=n;++d){var g=u[d];r[d]=g<0?t:a[g]}var h=this.orient();if(h>0)return c;c.lastVisited=-i,0===h&&o.push(c)}}return null},g.walk=function(e,t){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,a=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];e:for(;!s.boundary;){for(var l=s.vertices,c=s.adjacent,u=0;u<=i;++u)a[u]=r[l[u]];for(s.lastVisited=n,u=0;u<=i;++u){var d=c[u];if(!(d.lastVisited>=n)){var g=a[u];a[u]=e;var h=this.orient();if(a[u]=g,h<0){s=d;continue e}d.boundary?d.lastVisited=-n:d.lastVisited=n}}return}return s},g.addPeaks=function(e,t){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,l=this.tuple,c=this.interior,u=this.simplices,d=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,c.push(t);for(var g=[];d.length>0;){var h=(t=d.pop()).vertices,f=t.adjacent,p=h.indexOf(n);if(!(p<0))for(var m=0;m<=i;++m)if(m!==p){var v=f[m];if(v.boundary&&!(v.lastVisited>=n)){var b=v.vertices;if(v.lastVisited!==-n){for(var y=0,I=0;I<=i;++I)b[I]<0?(y=I,l[I]=e):l[I]=r[b[I]];if(this.orient()>0){b[y]=n,v.boundary=!1,c.push(v),d.push(v),v.lastVisited=n;continue}v.lastVisited=-n}var C=v.adjacent,x=h.slice(),B=f.slice(),A=new a(x,B,!0);u.push(A);var F=C.indexOf(t);if(!(F<0))for(C[F]=A,B[p]=v,x[m]=-1,B[m]=t,f[m]=A,A.flip(),I=0;I<=i;++I){var Q=x[I];if(!(Q<0||Q===n)){for(var U=new Array(i-1),w=0,G=0;G<=i;++G){var R=x[G];R<0||G===I||(U[w++]=R)}g.push(new o(U,A,I))}}}}}for(g.sort(s),m=0;m+1<g.length;m+=2){var L=g[m],S=g[m+1],V=L.index,Z=S.index;V<0||Z<0||(L.cell.adjacent[L.index]=S.cell,S.cell.adjacent[S.index]=L.cell)}},g.insert=function(e,t){var n=this.vertices;n.push(e);var i=this.walk(e,t);if(i){for(var r=this.dimension,a=this.tuple,o=0;o<=r;++o){var s=i.vertices[o];a[o]=s<0?e:n[s]}var l=this.orient(a);l<0||(0!==l||(i=this.handleBoundaryDegeneracy(i,e)))&&this.addPeaks(e,i)}},g.boundary=function(){for(var e=this.dimension,t=[],n=this.simplices,i=n.length,r=0;r<i;++r){var a=n[r];if(a.boundary){for(var o=new Array(e),s=a.vertices,l=0,c=0,u=0;u<=e;++u)s[u]>=0?o[l++]=s[u]:c=1&u;if(c===(1&e)){var d=o[0];o[0]=o[1],o[1]=d}t.push(o)}}return t}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(e,t,n){var i=e("binary-search-bounds"),r=0,a=1,o=2;function s(e,t,n,i,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+i.length}t.exports=x;var l=s.prototype;function c(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function u(e,t){var n=y(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function d(e,t){var n=e.intervals([]);n.push(t),u(e,n)}function g(e,t){var n=e.intervals([]),i=n.indexOf(t);return i<0?r:(n.splice(i,1),u(e,n),a)}function h(e,t,n){for(var i=0;i<e.length&&e[i][0]<=t;++i){var r=n(e[i]);if(r)return r}}function f(e,t,n){for(var i=e.length-1;i>=0&&e[i][1]>=t;--i){var r=n(e[i]);if(r)return r}}function p(e,t){for(var n=0;n<e.length;++n){var i=t(e[n]);if(i)return i}}function m(e,t){return e-t}function v(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function b(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function y(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(m);var i=t[t.length>>1],r=[],a=[],o=[];for(n=0;n<e.length;++n){var l=e[n];l[1]<i?r.push(l):i<l[0]?a.push(l):o.push(l)}var c=o,u=o.slice();return c.sort(v),u.sort(b),new s(i,y(r),y(a),c,u)}function I(e){this.root=e}l.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},l.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?d(this,e):this.left.insert(e):this.left=y([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?d(this,e):this.right.insert(e):this.right=y([e]);else{var n=i.ge(this.leftPoints,e,v),r=i.ge(this.rightPoints,e,b);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}},l.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?g(this,e):(u=this.left.remove(e))===o?(this.left=null,this.count-=1,a):(u===a&&(this.count-=1),u):r;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?g(this,e):(u=this.right.remove(e))===o?(this.right=null,this.count-=1,a):(u===a&&(this.count-=1),u):r;if(1===this.count)return this.leftPoints[0]===e?o:r;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var n=this,s=this.left;s.right;)n=s,s=s.right;if(n===this)s.right=this.right;else{var l=this.left,u=this.right;n.count-=s.count,n.right=s.left,s.left=l,s.right=u}c(this,s),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?c(this,this.left):c(this,this.right);return a}for(l=i.ge(this.leftPoints,e,v);l<this.leftPoints.length&&this.leftPoints[l][0]===e[0];++l)if(this.leftPoints[l]===e)for(this.count-=1,this.leftPoints.splice(l,1),u=i.ge(this.rightPoints,e,b);u<this.rightPoints.length&&this.rightPoints[u][1]===e[1];++u)if(this.rightPoints[u]===e)return this.rightPoints.splice(u,1),a;return r},l.queryPoint=function(e,t){return e<this.mid?this.left&&(n=this.left.queryPoint(e,t))?n:h(this.leftPoints,e,t):e>this.mid?this.right&&(n=this.right.queryPoint(e,t))?n:f(this.rightPoints,e,t):p(this.leftPoints,t);var n},l.queryInterval=function(e,t,n){var i;return e<this.mid&&this.left&&(i=this.left.queryInterval(e,t,n))||t>this.mid&&this.right&&(i=this.right.queryInterval(e,t,n))?i:t<this.mid?h(this.leftPoints,t,n):e>this.mid?f(this.rightPoints,e,n):p(this.leftPoints,n)};var C=I.prototype;function x(e){return e&&0!==e.length?new I(y(e)):new I(null)}C.insert=function(e){this.root?this.root.insert(e):this.root=new s(e[0],null,null,[e],[e])},C.remove=function(e){if(this.root){var t=this.root.remove(e);return t===o&&(this.root=null),t!==r}return!1},C.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},C.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(C,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(C,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(e,t,n){function i(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}t.exports=i},{}],236:[function(e,t,n){t.exports=!0},{}],237:[function(e,t,n){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(e){return null!=e&&(i(e)||r(e)||!!e._isBuffer)}},{}],238:[function(e,t,n){t.exports=a,t.exports.isMobile=a,t.exports.default=a;var i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var n=e.tablet?r.test(t):i.test(t);return!n&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(n=!0),n}},{}],239:[function(e,t,n){t.exports=function(e){for(var t,n=e.length,i=0;i<n;i++)if(((t=e.charCodeAt(i))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],240:[function(e,t,n){function i(e,t,n){return e*(1-n)+t*n}t.exports=i},{}],241:[function(e,t,n){var i=e("./normalize"),r=e("gl-mat4/create"),a=e("gl-mat4/clone"),o=e("gl-mat4/determinant"),s=e("gl-mat4/invert"),l=e("gl-mat4/transpose"),c={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},u=r(),d=r(),g=[0,0,0,0],h=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];function p(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,e[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,e[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,e[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,e}function m(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function v(e,t,n,i,r){e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r}t.exports=function(e,t,n,r,b,y){if(t||(t=[0,0,0]),n||(n=[0,0,0]),r||(r=[0,0,0]),b||(b=[0,0,0,1]),y||(y=[0,0,0,1]),!i(u,e))return!1;if(a(d,u),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(o(d)<1e-8))return!1;var I=u[3],C=u[7],x=u[11],B=u[12],A=u[13],F=u[14],Q=u[15];if(0!==I||0!==C||0!==x){if(g[0]=I,g[1]=C,g[2]=x,g[3]=Q,!s(d,d))return!1;l(d,d),p(b,g,d)}else b[0]=b[1]=b[2]=0,b[3]=1;if(t[0]=B,t[1]=A,t[2]=F,m(h,u),n[0]=c.length(h[0]),c.normalize(h[0],h[0]),r[0]=c.dot(h[0],h[1]),v(h[1],h[1],h[0],1,-r[0]),n[1]=c.length(h[1]),c.normalize(h[1],h[1]),r[0]/=n[1],r[1]=c.dot(h[0],h[2]),v(h[2],h[2],h[0],1,-r[1]),r[2]=c.dot(h[1],h[2]),v(h[2],h[2],h[1],1,-r[2]),n[2]=c.length(h[2]),c.normalize(h[2],h[2]),r[1]/=n[2],r[2]/=n[2],c.cross(f,h[1],h[2]),c.dot(h[0],f)<0)for(var U=0;U<3;U++)n[U]*=-1,h[U][0]*=-1,h[U][1]*=-1,h[U][2]*=-1;return y[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),y[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),y[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),y[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(y[0]=-y[0]),h[0][2]>h[2][0]&&(y[1]=-y[1]),h[1][0]>h[0][1]&&(y[2]=-y[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(e,t,n){t.exports=function(e,t){var n=t[15];if(0===n)return!1;for(var i=1/n,r=0;r<16;r++)e[r]=t[r]*i;return!0}},{}],243:[function(e,t,n){var i=e("gl-vec3/lerp"),r=e("mat4-recompose"),a=e("mat4-decompose"),o=e("gl-mat4/determinant"),s=e("quat-slerp"),l=g(),c=g(),u=g();function d(e,t,n,d){if(0===o(t)||0===o(n))return!1;var g=a(t,l.translate,l.scale,l.skew,l.perspective,l.quaternion),h=a(n,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!g||!h||(i(u.translate,l.translate,c.translate,d),i(u.skew,l.skew,c.skew,d),i(u.scale,l.scale,c.scale,d),i(u.perspective,l.perspective,c.perspective,d),s(u.quaternion,l.quaternion,c.quaternion,d),r(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),0))}function g(){return{translate:h(),scale:h(1),skew:h(),perspective:f(),quaternion:f()}}function h(e){return[e||0,e||0,e||0]}function f(){return[0,0,0,1]}t.exports=d},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(e,t,n){var i={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")};i.create();var r=i.create();t.exports=function(e,t,n,a,o,s){return i.identity(e),i.fromRotationTranslation(e,s,t),e[3]=o[0],e[7]=o[1],e[11]=o[2],e[15]=o[3],i.identity(r),0!==a[2]&&(r[9]=a[2],i.multiply(e,e,r)),0!==a[1]&&(r[9]=0,r[8]=a[1],i.multiply(e,e,r)),0!==a[0]&&(r[8]=0,r[4]=a[0],i.multiply(e,e,r)),i.scale(e,e,n),e}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(e,t,n){var i=e("binary-search-bounds"),r=e("mat4-interpolate"),a=e("gl-mat4/invert"),o=e("gl-mat4/rotateX"),s=e("gl-mat4/rotateY"),l=e("gl-mat4/rotateZ"),c=e("gl-mat4/lookAt"),u=e("gl-mat4/translate");e("gl-mat4/scale");var d=e("gl-vec3/normalize"),g=[0,0,0];function h(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=m;var f=h.prototype;f.recalcMatrix=function(e){var t=this._time,n=i.le(t,e),o=this.computedMatrix;if(!(n<0)){var s=this._components;if(n===t.length-1)for(var l=16*n,c=0;c<16;++c)o[c]=s[l++];else{var u=t[n+1]-t[n],g=(l=16*n,this.prevMatrix),h=!0;for(c=0;c<16;++c)g[c]=s[l++];var f=this.nextMatrix;for(c=0;c<16;++c)f[c]=s[l++],h=h&&g[c]===f[c];if(u<1e-6||h)for(c=0;c<16;++c)o[c]=g[c];else r(o,g,f,(e-t[n])/u)}var p=this.computedUp;p[0]=o[1],p[1]=o[5],p[2]=o[9],d(p,p);var m=this.computedInverse;a(m,o);var v=this.computedEye,b=m[15];v[0]=m[12]/b,v[1]=m[13]/b,v[2]=m[14]/b;var y=this.computedCenter,I=Math.exp(this.computedRadius[0]);for(c=0;c<3;++c)y[c]=v[c]-o[2+4*c]*I}},f.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,n=t.length-16,i=0;i<16;++i)t.push(t[n++]);this._time.push(e)}},f.flush=function(e){var t=i.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},f.lastT=function(){return this._time[this._time.length-1]},f.lookAt=function(e,t,n,i){this.recalcMatrix(e),t=t||this.computedEye,n=n||g,i=i||this.computedUp,this.setMatrix(e,c(this.computedMatrix,t,n,i));for(var r=0,a=0;a<3;++a)r+=Math.pow(n[a]-t[a],2);r=Math.log(Math.sqrt(r)),this.computedRadius[0]=r},f.rotate=function(e,t,n,i){this.recalcMatrix(e);var r=this.computedInverse;t&&s(r,r,t),n&&o(r,r,n),i&&l(r,r,i),this.setMatrix(e,a(this.computedMatrix,r))};var p=[0,0,0];function m(e){return new h((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}f.pan=function(e,t,n,i){p[0]=-(t||0),p[1]=-(n||0),p[2]=-(i||0),this.recalcMatrix(e);var r=this.computedInverse;u(r,r,p),this.setMatrix(e,a(r,r))},f.translate=function(e,t,n,i){p[0]=t||0,p[1]=n||0,p[2]=i||0,this.recalcMatrix(e);var r=this.computedMatrix;u(r,r,p),this.setMatrix(e,r)},f.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])}},f.setDistance=function(e,t){this.computedRadius[0]=t},f.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},f.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(e,t,n){t.exports=r;var i=e("robust-orientation")[3];function r(e){var t=e.length;if(t<3){for(var n=new Array(t),r=0;r<t;++r)n[r]=r;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}var a=new Array(t);for(r=0;r<t;++r)a[r]=r;a.sort((function(t,n){var i=e[t][0]-e[n][0];return i||e[t][1]-e[n][1]}));var o=[a[0],a[1]],s=[a[0],a[1]];for(r=2;r<t;++r){for(var l=a[r],c=e[l],u=o.length;u>1&&i(e[o[u-2]],e[o[u-1]],c)<=0;)u-=1,o.pop();for(o.push(l),u=s.length;u>1&&i(e[s[u-2]],e[s[u-1]],c)>=0;)u-=1,s.pop();s.push(l)}n=new Array(s.length+o.length-2);for(var d=0,g=(r=0,o.length);r<g;++r)n[d++]=o[r];for(var h=s.length-2;h>0;--h)n[d++]=s[h];return n}},{"robust-orientation":284}],247:[function(e,t,n){t.exports=r;var i=e("mouse-event");function r(e,t){t||(t=e,e=window);var n=0,r=0,a=0,o={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function l(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==o.alt,o.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==o.shift,o.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==o.control,o.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==o.meta,o.meta=!!e.metaKey),t}function c(e,s){var c=i.x(s),u=i.y(s);"buttons"in s&&(e=0|s.buttons),(e!==n||c!==r||u!==a||l(s))&&(n=0|e,r=c||0,a=u||0,t&&t(n,r,a,o))}function u(e){c(0,e)}function d(){(n||r||a||o.shift||o.alt||o.meta||o.control)&&(r=a=0,n=0,o.shift=o.alt=o.control=o.meta=!1,t&&t(0,0,0,o))}function g(e){l(e)&&t&&t(n,r,a,o)}function h(e){0===i.buttons(e)?c(0,e):c(n,e)}function f(e){c(n|i.buttons(e),e)}function p(e){c(n&~i.buttons(e),e)}function m(){s||(s=!0,e.addEventListener("mousemove",h),e.addEventListener("mousedown",f),e.addEventListener("mouseup",p),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",d),e.addEventListener("keyup",g),e.addEventListener("keydown",g),e.addEventListener("keypress",g),e!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function v(){s&&(s=!1,e.removeEventListener("mousemove",h),e.removeEventListener("mousedown",f),e.removeEventListener("mouseup",p),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",d),e.removeEventListener("keyup",g),e.removeEventListener("keydown",g),e.removeEventListener("keypress",g),e!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}m();var b={element:e};return Object.defineProperties(b,{enabled:{get:function(){return s},set:function(e){e?m():v()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),b}},{"mouse-event":249}],248:[function(e,t,n){var i={left:0,top:0};function r(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var i=e.clientX||0,r=e.clientY||0,o=a(t);return n[0]=i-o.left,n[1]=r-o.top,n}function a(e){return e===window||e===document||e===document.body?i:e.getBoundingClientRect()}t.exports=r},{}],249:[function(e,t,n){function r(e){if("object"===i(e)){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0}function a(e){return e.target||e.srcElement||window}function o(e){if("object"===i(e)){if("offsetX"in e)return e.offsetX;var t=a(e).getBoundingClientRect();return e.clientX-t.left}return 0}function s(e){if("object"===i(e)){if("offsetY"in e)return e.offsetY;var t=a(e).getBoundingClientRect();return e.clientY-t.top}return 0}n.buttons=r,n.element=a,n.x=o,n.y=s},{}],250:[function(e,t,n){var i=e("to-px");function r(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=i("ex",e),a=function(e){n&&e.preventDefault();var i=e.deltaX||0,a=e.deltaY||0,o=e.deltaZ||0,s=1;switch(e.deltaMode){case 1:s=r;break;case 2:s=window.innerHeight}if(a*=s,o*=s,(i*=s)||a||o)return t(i,a,o,e)};return e.addEventListener("wheel",a),a}t.exports=r},{"to-px":304}],251:[function(e,t,n){var r=e("typedarray-pool");t.exports=s;var a={"false,0,1":function(e,t,n,i,r){return function(a,o,s,l){var c,u=0|a.shape[0],d=0|a.shape[1],g=a.data,h=0|a.offset,f=0|a.stride[0],p=0|a.stride[1],m=h,v=0|-f,b=0,y=0|-p,I=0,C=-f-p|0,x=0,B=0|f,A=p-f*u|0,F=0,Q=0,U=0,w=2*u|0,G=i(w),R=i(w),L=0,S=0,V=-1,Z=-1,k=0,E=0|-u,X=0|u,N=0,W=-u-1|0,_=u-1|0,T=0,M=0,H=0;for(F=0;F<u;++F)G[L++]=n(g[m],o,s,l),m+=B;if(m+=A,d>0){if(Q=1,G[L++]=n(g[m],o,s,l),m+=B,u>0)for(F=1,c=g[m],S=G[L]=n(c,o,s,l),k=G[L+V],N=G[L+E],T=G[L+W],S===k&&S===N&&S===T||(b=g[m+v],I=g[m+y],x=g[m+C],e(F,Q,c,b,I,x,S,k,N,T,o,s,l),M=R[L]=U++),L+=1,m+=B,F=2;F<u;++F)c=g[m],S=G[L]=n(c,o,s,l),k=G[L+V],N=G[L+E],T=G[L+W],S===k&&S===N&&S===T||(b=g[m+v],I=g[m+y],x=g[m+C],e(F,Q,c,b,I,x,S,k,N,T,o,s,l),M=R[L]=U++,T!==k&&t(R[L+V],M,x,b,T,k,o,s,l)),L+=1,m+=B;for(m+=A,L=0,H=V,V=Z,Z=H,H=E,E=X,X=H,H=W,W=_,_=H,Q=2;Q<d;++Q){if(G[L++]=n(g[m],o,s,l),m+=B,u>0)for(F=1,c=g[m],S=G[L]=n(c,o,s,l),k=G[L+V],N=G[L+E],T=G[L+W],S===k&&S===N&&S===T||(b=g[m+v],I=g[m+y],x=g[m+C],e(F,Q,c,b,I,x,S,k,N,T,o,s,l),M=R[L]=U++,T!==N&&t(R[L+E],M,I,x,N,T,o,s,l)),L+=1,m+=B,F=2;F<u;++F)c=g[m],S=G[L]=n(c,o,s,l),k=G[L+V],N=G[L+E],T=G[L+W],S===k&&S===N&&S===T||(b=g[m+v],I=g[m+y],x=g[m+C],e(F,Q,c,b,I,x,S,k,N,T,o,s,l),M=R[L]=U++,T!==N&&t(R[L+E],M,I,x,N,T,o,s,l),T!==k&&t(R[L+V],M,x,b,T,k,o,s,l)),L+=1,m+=B;1&Q&&(L=0),H=V,V=Z,Z=H,H=E,E=X,X=H,H=W,W=_,_=H,m+=A}}r(R),r(G)}},"false,1,0":function(e,t,n,i,r){return function(a,o,s,l){var c,u=0|a.shape[0],d=0|a.shape[1],g=a.data,h=0|a.offset,f=0|a.stride[0],p=0|a.stride[1],m=h,v=0|-f,b=0,y=0|-p,I=0,C=-f-p|0,x=0,B=0|p,A=f-p*d|0,F=0,Q=0,U=0,w=2*d|0,G=i(w),R=i(w),L=0,S=0,V=-1,Z=-1,k=0,E=0|-d,X=0|d,N=0,W=-d-1|0,_=d-1|0,T=0,M=0,H=0;for(Q=0;Q<d;++Q)G[L++]=n(g[m],o,s,l),m+=B;if(m+=A,u>0){if(F=1,G[L++]=n(g[m],o,s,l),m+=B,d>0)for(Q=1,c=g[m],S=G[L]=n(c,o,s,l),N=G[L+E],k=G[L+V],T=G[L+W],S===N&&S===k&&S===T||(b=g[m+v],I=g[m+y],x=g[m+C],e(F,Q,c,b,I,x,S,N,k,T,o,s,l),M=R[L]=U++),L+=1,m+=B,Q=2;Q<d;++Q)c=g[m],S=G[L]=n(c,o,s,l),N=G[L+E],k=G[L+V],T=G[L+W],S===N&&S===k&&S===T||(b=g[m+v],I=g[m+y],x=g[m+C],e(F,Q,c,b,I,x,S,N,k,T,o,s,l),M=R[L]=U++,T!==k&&t(R[L+V],M,I,x,k,T,o,s,l)),L+=1,m+=B;for(m+=A,L=0,H=E,E=X,X=H,H=V,V=Z,Z=H,H=W,W=_,_=H,F=2;F<u;++F){if(G[L++]=n(g[m],o,s,l),m+=B,d>0)for(Q=1,c=g[m],S=G[L]=n(c,o,s,l),N=G[L+E],k=G[L+V],T=G[L+W],S===N&&S===k&&S===T||(b=g[m+v],I=g[m+y],x=g[m+C],e(F,Q,c,b,I,x,S,N,k,T,o,s,l),M=R[L]=U++,T!==N&&t(R[L+E],M,x,b,T,N,o,s,l)),L+=1,m+=B,Q=2;Q<d;++Q)c=g[m],S=G[L]=n(c,o,s,l),N=G[L+E],k=G[L+V],T=G[L+W],S===N&&S===k&&S===T||(b=g[m+v],I=g[m+y],x=g[m+C],e(F,Q,c,b,I,x,S,N,k,T,o,s,l),M=R[L]=U++,T!==k&&t(R[L+V],M,I,x,k,T,o,s,l),T!==N&&t(R[L+E],M,x,b,T,N,o,s,l)),L+=1,m+=B;1&F&&(L=0),H=E,E=X,X=H,H=V,V=Z,Z=H,H=W,W=_,_=H,m+=A}}r(R),r(G)}}};function o(e,t,n,i,o,s){var l=[s,o].join(",");return(0,a[l])(e,t,n,r.mallocUint32,r.freeUint32)}function s(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!==i(e)&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var r=e.arrayArguments||1;r<1&&t("Must have at least one array argument");var a=e.scalarArguments||0;a<0&&t("Scalar arg count must be > 0"),"function"!=typeof e.vertex&&t("Must specify vertex creation function"),"function"!=typeof e.cell&&t("Must specify cell creation function"),"function"!=typeof e.phase&&t("Must specify phase function");for(var s=e.getters||[],l=new Array(r),c=0;c<r;++c)s.indexOf(c)>=0?l[c]=!0:l[c]=!1;return o(e.vertex,e.cell,e.phase,a,n,l)}},{"typedarray-pool":308}],252:[function(e,t,n){var i=e("dup"),r={zero:function(e,t,n,i){var r=e[0];i|=0;var a=0,o=n[0];for(a=0;a<r;++a)t[i]=0,i+=o},fdTemplate1:function(e,t,n,i,r,a,o){var s=e[0],l=n[0],c=-1*l,u=l;i|=0,o|=0;var d=0,g=l,h=a[0];for(d=0;d<s;++d)r[o]=.5*(t[i+c]-t[i+u]),i+=g,o+=h},fdTemplate2:function(e,t,n,i,r,a,o,s,l,c){var u=e[0],d=e[1],g=n[0],h=n[1],f=a[0],p=a[1],m=l[0],v=l[1],b=-1*g,y=g,I=-1*h,C=h;i|=0,o|=0,c|=0;var x=0,B=0,A=h,F=g-d*h,Q=p,U=f-d*p,w=v,G=m-d*v;for(B=0;B<u;++B){for(x=0;x<d;++x)r[o]=.5*(t[i+b]-t[i+y]),s[c]=.5*(t[i+I]-t[i+C]),i+=A,o+=Q,c+=w;i+=F,o+=U,c+=G}}},a={cdiff:function(e){var t={};return function(n,i,r){var a=n.dtype,o=n.order,s=i.dtype,l=i.order,c=r.dtype,u=r.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),g=t[d];return g||(t[d]=g=e([a,o,s,l,c,u])),g(n.shape.slice(0),n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset,r.data,r.stride,0|r.offset)}},zero:function(e){var t={};return function(n){var i=n.dtype,r=n.order,a=[i,r.join()].join(),o=t[a];return o||(t[a]=o=e([i,r])),o(n.shape.slice(0),n.data,n.stride,0|n.offset)}},fdTemplate1:function(e){var t={};return function(n,i){var r=n.dtype,a=n.order,o=i.dtype,s=i.order,l=[r,a.join(),o,s.join()].join(),c=t[l];return c||(t[l]=c=e([r,a,o,s])),c(n.shape.slice(0),n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},fdTemplate2:function(e){var t={};return function(n,i,r){var a=n.dtype,o=n.order,s=i.dtype,l=i.order,c=r.dtype,u=r.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),g=t[d];return g||(t[d]=g=e([a,o,s,l,c,u])),g(n.shape.slice(0),n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset,r.data,r.stride,0|r.offset)}}};function o(e){return(0,a[e.funcName])(s.bind(void 0,e))}function s(e){return r[e.funcName]}function l(e){return o({funcName:e.funcName})}var c={},u={},d=l({funcName:"cdiff"}),g=l({funcName:"zero"});function h(e){return e in c?c[e]:c[e]=l({funcName:"fdTemplate"+e})}function f(e,t,n,i){return function(e,r){var a=r.shape.slice();return a[0]>2&&a[1]>2&&i(r.pick(-1,-1).lo(1,1).hi(a[0]-2,a[1]-2),e.pick(-1,-1,0).lo(1,1).hi(a[0]-2,a[1]-2),e.pick(-1,-1,1).lo(1,1).hi(a[0]-2,a[1]-2)),a[1]>2&&(n(r.pick(0,-1).lo(1).hi(a[1]-2),e.pick(0,-1,1).lo(1).hi(a[1]-2)),t(e.pick(0,-1,0).lo(1).hi(a[1]-2))),a[1]>2&&(n(r.pick(a[0]-1,-1).lo(1).hi(a[1]-2),e.pick(a[0]-1,-1,1).lo(1).hi(a[1]-2)),t(e.pick(a[0]-1,-1,0).lo(1).hi(a[1]-2))),a[0]>2&&(n(r.pick(-1,0).lo(1).hi(a[0]-2),e.pick(-1,0,0).lo(1).hi(a[0]-2)),t(e.pick(-1,0,1).lo(1).hi(a[0]-2))),a[0]>2&&(n(r.pick(-1,a[1]-1).lo(1).hi(a[0]-2),e.pick(-1,a[1]-1,0).lo(1).hi(a[0]-2)),t(e.pick(-1,a[1]-1,1).lo(1).hi(a[0]-2))),e.set(0,0,0,0),e.set(0,0,1,0),e.set(a[0]-1,0,0,0),e.set(a[0]-1,0,1,0),e.set(0,a[1]-1,0,0),e.set(0,a[1]-1,1,0),e.set(a[0]-1,a[1]-1,0,0),e.set(a[0]-1,a[1]-1,1,0),e}}function p(e){var t=e.join();if(a=u[t])return a;for(var n=e.length,i=[d,g],r=1;r<=n;++r)i.push(h(r));var a=f.apply(void 0,i);return u[t]=a,a}t.exports=function(e,t,n){return Array.isArray(n)||(n=i(t.dimension,"string"==typeof n?n:"clamp")),0===t.size?e:0===t.dimension?(e.set(0),e):p(n)(e,t)}},{dup:65}],253:[function(e,t,n){function i(e,t){var n=Math.floor(t),i=t-n,r=0<=n&&n<e.shape[0],a=0<=n+1&&n+1<e.shape[0];return(1-i)*(r?+e.get(n):0)+i*(a?+e.get(n+1):0)}function r(e,t,n){var i=Math.floor(t),r=t-i,a=0<=i&&i<e.shape[0],o=0<=i+1&&i+1<e.shape[0],s=Math.floor(n),l=n-s,c=0<=s&&s<e.shape[1],u=0<=s+1&&s+1<e.shape[1],d=a&&c?e.get(i,s):0,g=a&&u?e.get(i,s+1):0;return(1-l)*((1-r)*d+r*(o&&c?e.get(i+1,s):0))+l*((1-r)*g+r*(o&&u?e.get(i+1,s+1):0))}function a(e,t,n,i){var r=Math.floor(t),a=t-r,o=0<=r&&r<e.shape[0],s=0<=r+1&&r+1<e.shape[0],l=Math.floor(n),c=n-l,u=0<=l&&l<e.shape[1],d=0<=l+1&&l+1<e.shape[1],g=Math.floor(i),h=i-g,f=0<=g&&g<e.shape[2],p=0<=g+1&&g+1<e.shape[2],m=o&&u&&f?e.get(r,l,g):0,v=o&&d&&f?e.get(r,l+1,g):0,b=s&&u&&f?e.get(r+1,l,g):0,y=s&&d&&f?e.get(r+1,l+1,g):0,I=o&&u&&p?e.get(r,l,g+1):0,C=o&&d&&p?e.get(r,l+1,g+1):0;return(1-h)*((1-c)*((1-a)*m+a*b)+c*((1-a)*v+a*y))+h*((1-c)*((1-a)*I+a*(s&&u&&p?e.get(r+1,l,g+1):0))+c*((1-a)*C+a*(s&&d&&p?e.get(r+1,l+1,g+1):0)))}function o(e){var t,n,i=0|e.shape.length,r=new Array(i),a=new Array(i),o=new Array(i),s=new Array(i);for(t=0;t<i;++t)n=+arguments[t+1],r[t]=Math.floor(n),a[t]=n-r[t],o[t]=0<=r[t]&&r[t]<e.shape[t],s[t]=0<=r[t]+1&&r[t]+1<e.shape[t];var l,c,u,d=0;e:for(t=0;t<1<<i;++t){for(c=1,u=e.offset,l=0;l<i;++l)if(t&1<<l){if(!s[l])continue e;c*=a[l],u+=e.stride[l]*(r[l]+1)}else{if(!o[l])continue e;c*=1-a[l],u+=e.stride[l]*r[l]}d+=c*e.data[u]}return d}function s(e,t,n,s){switch(e.shape.length){case 0:return 0;case 1:return i(e,t);case 2:return r(e,t,n);case 3:return a(e,t,n,s);default:return o.apply(void 0,arguments)}}t.exports=s,t.exports.d1=i,t.exports.d2=r,t.exports.d3=a},{}],254:[function(e,t,n){var i={"float64,2,1,0":function(){return function(e,t,n,i,r){var a=e[0],o=e[1],s=e[2],l=n[0],c=n[1],u=n[2];i|=0;var d=0,g=0,h=0,f=u,p=c-s*u,m=l-o*c;for(h=0;h<a;++h){for(g=0;g<o;++g){for(d=0;d<s;++d)t[i]/=r,i+=f;i+=p}i+=m}}},"uint8,2,0,1,float64,2,1,0":function(){return function(e,t,n,i,r,a,o,s){for(var l=e[0],c=e[1],u=e[2],d=n[0],g=n[1],h=n[2],f=a[0],p=a[1],m=a[2],v=i|=0,b=o|=0,y=0|e[0];y>0;){y<64?(l=y,y=0):(l=64,y-=64);for(var I=0|e[1];I>0;){I<64?(c=I,I=0):(c=64,I-=64),i=v+y*d+I*g,o=b+y*f+I*p;var C=0,x=0,B=0,A=h,F=d-u*h,Q=g-l*d,U=m,w=f-u*m,G=p-l*f;for(B=0;B<c;++B){for(x=0;x<l;++x){for(C=0;C<u;++C)t[i]=r[o]*s,i+=A,o+=U;i+=F,o+=w}i+=Q,o+=G}}}}},"float32,1,0,float32,1,0":function(){return function(e,t,n,i,r,a,o){var s=e[0],l=e[1],c=n[0],u=n[1],d=a[0],g=a[1];i|=0,o|=0;var h=0,f=0,p=u,m=c-l*u,v=g,b=d-l*g;for(f=0;f<s;++f){for(h=0;h<l;++h)t[i]=r[o],i+=p,o+=v;i+=m,o+=b}}},"float32,1,0,float32,0,1":function(){return function(e,t,n,i,r,a,o){for(var s=e[0],l=e[1],c=n[0],u=n[1],d=a[0],g=a[1],h=i|=0,f=o|=0,p=0|e[1];p>0;){p<64?(l=p,p=0):(l=64,p-=64);for(var m=0|e[0];m>0;){m<64?(s=m,m=0):(s=64,m-=64),i=h+p*u+m*c,o=f+p*g+m*d;var v=0,b=0,y=u,I=c-l*u,C=g,x=d-l*g;for(b=0;b<s;++b){for(v=0;v<l;++v)t[i]=r[o],i+=y,o+=C;i+=I,o+=x}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(e,t,n,i,r,a,o){for(var s=e[0],l=e[1],c=e[2],u=n[0],d=n[1],g=n[2],h=a[0],f=a[1],p=a[2],m=i|=0,v=o|=0,b=0|e[2];b>0;){b<64?(c=b,b=0):(c=64,b-=64);for(var y=0|e[0];y>0;){y<64?(s=y,y=0):(s=64,y-=64);for(var I=0|e[1];I>0;){I<64?(l=I,I=0):(l=64,I-=64),i=m+b*g+y*u+I*d,o=v+b*p+y*h+I*f;var C=0,x=0,B=0,A=g,F=u-c*g,Q=d-s*u,U=p,w=h-c*p,G=f-s*h;for(B=0;B<l;++B){for(x=0;x<s;++x){for(C=0;C<c;++C)t[i]=r[o],i+=A,o+=U;i+=F,o+=w}i+=Q,o+=G}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(e,t,n,i,r,a,o){var s=e[0],l=e[1],c=e[2],u=n[0],d=n[1],g=n[2],h=a[0],f=a[1],p=a[2];i|=0,o|=0;var m=0,v=0,b=0,y=g,I=u-c*g,C=d-s*u,x=p,B=h-c*p,A=f-s*h;for(b=0;b<l;++b){for(v=0;v<s;++v){for(m=0;m<c;++m)t[i]=r[o],i+=y,o+=x;i+=I,o+=B}i+=C,o+=A}}}};function r(e,t){var n=t.join(",");return(0,i[n])()}var a=r,o={mul:function(e){var t={};return function(n,i,r){var a=n.dtype,o=n.order,s=i.dtype,l=i.order,c=r.dtype,u=r.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),g=t[d];return g||(t[d]=g=e([a,o,s,l,c,u])),g(n.shape.slice(0),n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset,r.data,r.stride,0|r.offset)}},muls:function(e){var t={};return function(n,i,r){var a=n.dtype,o=n.order,s=i.dtype,l=i.order,c=[a,o.join(),s,l.join()].join(),u=t[c];return u||(t[c]=u=e([a,o,s,l])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset,r)}},mulseq:function(e){var t={};return function(n,i){var r=n.dtype,a=n.order,o=[r,a.join()].join(),s=t[o];return s||(t[o]=s=e([r,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,i)}},div:function(e){var t={};return function(n,i,r){var a=n.dtype,o=n.order,s=i.dtype,l=i.order,c=r.dtype,u=r.order,d=[a,o.join(),s,l.join(),c,u.join()].join(),g=t[d];return g||(t[d]=g=e([a,o,s,l,c,u])),g(n.shape.slice(0),n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset,r.data,r.stride,0|r.offset)}},divs:function(e){var t={};return function(n,i,r){var a=n.dtype,o=n.order,s=i.dtype,l=i.order,c=[a,o.join(),s,l.join()].join(),u=t[c];return u||(t[c]=u=e([a,o,s,l])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset,r)}},divseq:function(e){var t={};return function(n,i){var r=n.dtype,a=n.order,o=[r,a.join()].join(),s=t[o];return s||(t[o]=s=e([r,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,i)}},assign:function(e){var t={};return function(n,i){var r=n.dtype,a=n.order,o=i.dtype,s=i.order,l=[r,a.join(),o,s.join()].join(),c=t[l];return c||(t[l]=c=e([r,a,o,s])),c(n.shape.slice(0),n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}}};function s(e){return(0,o[e.funcName])(a.bind(void 0,e))}function l(e){return s({funcName:e.funcName})}var c={mul:"*",div:"/"};!function(){for(var e in c)n[e]=l({funcName:e}),n[e+"s"]=l({funcName:e+"s"}),n[e+"seq"]=l({funcName:e+"seq"})}(),n.assign=l({funcName:"assign"})},{}],255:[function(e,t,n){var i=e("ndarray"),r=e("./doConvert.js");t.exports=function(e,t){for(var n=[],a=e,o=1;Array.isArray(a);)n.push(a.length),o*=a.length,a=a[0];return 0===n.length?i():(t||(t=i(new Float64Array(o),n)),r(t,e),t)}},{"./doConvert.js":256,ndarray:259}],256:[function(e,t,n){function i(){return function(e,t,n,i,r){var a=e[0],o=e[1],s=e[2],l=n[0],c=n[1],u=n[2],d=[0,0,0];i|=0;var g=0,h=0,f=0,p=u,m=c-s*u,v=l-o*c;for(f=0;f<a;++f){for(h=0;h<o;++h){for(g=0;g<s;++g){var b,y=r;for(b=0;b<d.length-1;++b)y=y[d[b]];t[i]=y[d[d.length-1]],i+=p,++d[2]}i+=m,d[2]-=s,++d[1]}i+=v,d[1]-=o,++d[0]}}}function r(){return i()}var a=r;function o(e){var t={};return function(n,i){var r=n.dtype,a=n.order,o=[r,a.join()].join(),s=t[o];return s||(t[o]=s=e([r,a])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,i)}}function s(e){return o(a.bind(void 0,e))}function l(e){return s({funcName:e.funcName})}t.exports=l({funcName:"convert"})},{}],257:[function(e,t,n){var i=e("typedarray-pool");function r(e){return"uint32"===e?[i.mallocUint32,i.freeUint32]:null}var a={"uint32,1,0":function(e,t){return function(n,i,r,a,o,s,l,c,u,d,g){var h,f,p,m,v,b,y,I,C=n*o+a,x=e(c);for(h=n+1;h<=i;++h){for(f=h,p=C+=o,v=0,b=C,m=0;m<c;++m)x[v++]=r[b],b+=u;e:for(;f-- >n;){v=0,b=p-o;t:for(m=0;m<c;++m){if((y=r[b])<(I=x[v]))break e;if(y>I)break t;b+=d,v+=g}for(v=p,b=p-o,m=0;m<c;++m)r[v]=r[b],v+=u,b+=u;p-=o}for(v=p,b=0,m=0;m<c;++m)r[v]=x[b++],v+=u}t(x)}}};function o(e,t){var n=r(t),i=[t,e].join(","),o=a[i];return n?o(n[0],n[1]):o()}var s={"uint32,1,0":function(e,t,n){return function i(r,a,o,s,l,c,u,d,g,h,f){var p,m,v,b,y,I,C,x,B,A,F,Q,U,w,G,R,L,S,V,Z,k,E,X,N,W,_=(a-r+1)/6|0,T=r+_,M=a-_,H=r+a>>1,Y=H-_,D=H+_,z=T,O=Y,J=H,j=D,P=M,K=r+1,q=a-1,$=!0,ee=0,te=0,ne=0,ie=d,re=t(ie),ae=t(ie);F=l*z,Q=l*O,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=z,z=O,O=m;break e}if(ne<0)break e;W+=h}F=l*j,Q=l*P,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=j,j=P,P=m;break e}if(ne<0)break e;W+=h}F=l*z,Q=l*J,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=z,z=J,J=m;break e}if(ne<0)break e;W+=h}F=l*O,Q=l*J,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=O,O=J,J=m;break e}if(ne<0)break e;W+=h}F=l*z,Q=l*j,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=z,z=j,j=m;break e}if(ne<0)break e;W+=h}F=l*J,Q=l*j,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=J,J=j,j=m;break e}if(ne<0)break e;W+=h}F=l*O,Q=l*P,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=O,O=P,P=m;break e}if(ne<0)break e;W+=h}F=l*O,Q=l*J,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=O,O=J,J=m;break e}if(ne<0)break e;W+=h}F=l*j,Q=l*P,W=s;e:for(A=0;A<d;++A){if(x=Q+W,(ne=o[C=F+W]-o[x])>0){m=j,j=P,P=m;break e}if(ne<0)break e;W+=h}for(F=l*z,Q=l*O,U=l*J,w=l*j,G=l*P,R=l*T,L=l*H,S=l*M,N=0,W=s,A=0;A<d;++A)C=F+W,x=Q+W,B=U+W,V=w+W,Z=G+W,k=R+W,E=L+W,X=S+W,re[N]=o[x],ae[N]=o[V],$=$&&re[N]===ae[N],v=o[C],b=o[B],y=o[Z],o[k]=v,o[E]=b,o[X]=y,++N,W+=g;for(F=l*Y,Q=l*r,W=s,A=0;A<d;++A)x=Q+W,o[C=F+W]=o[x],W+=g;for(F=l*D,Q=l*a,W=s,A=0;A<d;++A)x=Q+W,o[C=F+W]=o[x],W+=g;if($)for(I=K;I<=q;++I){for(C=s+I*l,N=0,A=0;A<d&&0==(ne=o[C]-re[N]);++A)N+=f,C+=h;if(0!==ne)if(ne<0){if(I!==K)for(F=l*I,Q=l*K,W=s,A=0;A<d;++A)x=Q+W,p=o[C=F+W],o[C]=o[x],o[x]=p,W+=g;++K}else for(;;){for(C=s+q*l,N=0,A=0;A<d&&0==(ne=o[C]-re[N]);++A)N+=f,C+=h;if(!(ne>0)){if(ne<0){for(F=l*I,Q=l*K,U=l*q,W=s,A=0;A<d;++A)x=Q+W,B=U+W,p=o[C=F+W],o[C]=o[x],o[x]=o[B],o[B]=p,W+=g;++K,--q;break}for(F=l*I,Q=l*q,W=s,A=0;A<d;++A)x=Q+W,p=o[C=F+W],o[C]=o[x],o[x]=p,W+=g;--q;break}q--}}else for(I=K;I<=q;++I){for(C=s+I*l,N=0,A=0;A<d&&0==(ee=o[C]-re[N]);++A)N+=f,C+=h;if(ee<0){if(I!==K)for(F=l*I,Q=l*K,W=s,A=0;A<d;++A)x=Q+W,p=o[C=F+W],o[C]=o[x],o[x]=p,W+=g;++K}else{for(C=s+I*l,N=0,A=0;A<d&&0==(te=o[C]-ae[N]);++A)N+=f,C+=h;if(te>0)for(;;){for(C=s+q*l,N=0,A=0;A<d&&0==(ne=o[C]-ae[N]);++A)N+=f,C+=h;if(!(ne>0)){for(C=s+q*l,N=0,A=0;A<d&&0==(ne=o[C]-re[N]);++A)N+=f,C+=h;if(ne<0){for(F=l*I,Q=l*K,U=l*q,W=s,A=0;A<d;++A)x=Q+W,B=U+W,p=o[C=F+W],o[C]=o[x],o[x]=o[B],o[B]=p,W+=g;++K,--q}else{for(F=l*I,Q=l*q,W=s,A=0;A<d;++A)x=Q+W,p=o[C=F+W],o[C]=o[x],o[x]=p,W+=g;--q}break}if(--q<I)break}}}for(F=l*r,Q=l*(K-1),N=0,W=s,A=0;A<d;++A)x=Q+W,o[C=F+W]=o[x],o[x]=re[N],++N,W+=g;for(F=l*a,Q=l*(q+1),N=0,W=s,A=0;A<d;++A)x=Q+W,o[C=F+W]=o[x],o[x]=ae[N],++N,W+=g;if(K-2-r<=32?e(r,K-2,o,s,l,c,u,d,g,h,f):i(r,K-2,o,s,l,c,u,d,g,h,f),a-(q+2)<=32?e(q+2,a,o,s,l,c,u,d,g,h,f):i(q+2,a,o,s,l,c,u,d,g,h,f),$)return n(re),void n(ae);if(K<T&&q>M){e:for(;;){for(C=s+K*l,N=0,W=s,A=0;A<d;++A){if(o[C]!==re[N])break e;++N,C+=g}++K}e:for(;;){for(C=s+q*l,N=0,W=s,A=0;A<d;++A){if(o[C]!==ae[N])break e;++N,C+=g}--q}for(I=K;I<=q;++I){for(C=s+I*l,N=0,A=0;A<d&&0==(ee=o[C]-re[N]);++A)N+=f,C+=h;if(0===ee){if(I!==K)for(F=l*I,Q=l*K,W=s,A=0;A<d;++A)x=Q+W,p=o[C=F+W],o[C]=o[x],o[x]=p,W+=g;++K}else{for(C=s+I*l,N=0,A=0;A<d&&0==(te=o[C]-ae[N]);++A)N+=f,C+=h;if(0===te)for(;;){for(C=s+q*l,N=0,A=0;A<d&&0==(ne=o[C]-ae[N]);++A)N+=f,C+=h;if(0!==ne){for(C=s+q*l,N=0,A=0;A<d&&0==(ne=o[C]-re[N]);++A)N+=f,C+=h;if(ne<0){for(F=l*I,Q=l*K,U=l*q,W=s,A=0;A<d;++A)x=Q+W,B=U+W,p=o[C=F+W],o[C]=o[x],o[x]=o[B],o[B]=p,W+=g;++K,--q}else{for(F=l*I,Q=l*q,W=s,A=0;A<d;++A)x=Q+W,p=o[C=F+W],o[C]=o[x],o[x]=p,W+=g;--q}break}if(--q<I)break}}}}n(re),n(ae),q-K<=32?e(K,q,o,s,l,c,u,d,g,h,f):i(K,q,o,s,l,c,u,d,g,h,f)}}};function l(e,t,n){var i=r(t),a=[t,e].join(","),o=s[a];return e.length>1&&i?o(n,i[0],i[1]):o(n)}var c={"uint32,1,0":function(e,t){return function(n){var i=n.data,r=0|n.offset,a=n.shape,o=n.stride,s=0|o[0],l=0|a[0],c=0|o[1],u=0|a[1],d=c,g=c,h=1;l<=32?e(0,l-1,i,r,s,c,l,u,d,g,h):t(0,l-1,i,r,s,c,l,u,d,g,h)}}};function u(e,t){var n=[t,e].join(","),i=c[n],r=o(e,t);return i(r,l(e,t,r))}t.exports=u},{"typedarray-pool":308}],258:[function(e,t,n){var i=e("./lib/compile_sort.js"),r={};function a(e){var t=e.order,n=e.dtype,a=[t,n].join(":"),o=r[a];return o||(r[a]=o=i(t,n)),o(e),e}t.exports=a},{"./lib/compile_sort.js":257}],259:[function(e,t,n){var i=e("is-buffer"),r="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0]}function o(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(a);var i=new Array(n.length);for(e=0;e<i.length;++e)i[e]=n[e][1];return i}var s={T:function(e){function t(e){this.data=e}var n=t.prototype;return n.dtype=e,n.index=function(){return-1},n.size=0,n.dimension=-1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new t(this.data)},n.get=n.set=function(){},n.pick=function(){return null},function(e){return new t(e)}},0:function(e,t){function n(e,t){this.data=e,this.offset=t}var i=n.prototype;return i.dtype=e,i.index=function(){return this.offset},i.dimension=0,i.size=1,i.shape=i.stride=i.order=[],i.lo=i.hi=i.transpose=i.step=function(){return new n(this.data,this.offset)},i.pick=function(){return t(this.data)},i.valueOf=i.get=function(){return"generic"===e?this.data.get(this.offset):this.data[this.offset]},i.set=function(t){return"generic"===e?this.data.set(this.offset,t):this.data[this.offset]=t},function(e,t,i,r){return new n(e,r)}},1:function(e,t,n){function i(e,t,n,i){this.data=e,this.shape=[t],this.stride=[n],this.offset=0|i}var r=i.prototype;return r.dtype=e,r.dimension=1,Object.defineProperty(r,"size",{get:function(){return this.shape[0]}}),r.order=[0],r.set=function(t,n){return"generic"===e?this.data.set(this.offset+this.stride[0]*t,n):this.data[this.offset+this.stride[0]*t]=n},r.get=function(t){return"generic"===e?this.data.get(this.offset+this.stride[0]*t):this.data[this.offset+this.stride[0]*t]},r.index=function(e){return this.offset+this.stride[0]*e},r.hi=function(e){return new i(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,this.stride[0],this.offset)},r.lo=function(e){var t=this.offset,n=0,r=this.shape[0],a=this.stride[0];return"number"==typeof e&&e>=0&&(t+=a*(n=0|e),r-=n),new i(this.data,r,a,t)},r.step=function(e){var t=this.shape[0],n=this.stride[0],r=this.offset,a=0,o=Math.ceil;return"number"==typeof e&&((a=0|e)<0?(r+=n*(t-1),t=o(-t/a)):t=o(t/a),n*=a),new i(this.data,t,n,r)},r.transpose=function(e){e=void 0===e?0:0|e;var t=this.shape,n=this.stride;return new i(this.data,t[e],n[e],this.offset)},r.pick=function(e){var n=[],i=[],r=this.offset;return"number"==typeof e&&e>=0?r=r+this.stride[0]*e|0:(n.push(this.shape[0]),i.push(this.stride[0])),(0,t[n.length+1])(this.data,n,i,r)},function(e,t,n,r){return new i(e,t[0],n[0],r)}},2:function(e,t,n){function i(e,t,n,i,r,a){this.data=e,this.shape=[t,n],this.stride=[i,r],this.offset=0|a}var r=i.prototype;return r.dtype=e,r.dimension=2,Object.defineProperty(r,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(r,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),r.set=function(t,n,i){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n,i):this.data[this.offset+this.stride[0]*t+this.stride[1]*n]=i},r.get=function(t,n){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n):this.data[this.offset+this.stride[0]*t+this.stride[1]*n]},r.index=function(e,t){return this.offset+this.stride[0]*e+this.stride[1]*t},r.hi=function(e,t){return new i(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,this.stride[0],this.stride[1],this.offset)},r.lo=function(e,t){var n=this.offset,r=0,a=this.shape[0],o=this.shape[1],s=this.stride[0],l=this.stride[1];return"number"==typeof e&&e>=0&&(n+=s*(r=0|e),a-=r),"number"==typeof t&&t>=0&&(n+=l*(r=0|t),o-=r),new i(this.data,a,o,s,l,n)},r.step=function(e,t){var n=this.shape[0],r=this.shape[1],a=this.stride[0],o=this.stride[1],s=this.offset,l=0,c=Math.ceil;return"number"==typeof e&&((l=0|e)<0?(s+=a*(n-1),n=c(-n/l)):n=c(n/l),a*=l),"number"==typeof t&&((l=0|t)<0?(s+=o*(r-1),r=c(-r/l)):r=c(r/l),o*=l),new i(this.data,n,r,a,o,s)},r.transpose=function(e,t){e=void 0===e?0:0|e,t=void 0===t?1:0|t;var n=this.shape,r=this.stride;return new i(this.data,n[e],n[t],r[e],r[t],this.offset)},r.pick=function(e,n){var i=[],r=[],a=this.offset;return"number"==typeof e&&e>=0?a=a+this.stride[0]*e|0:(i.push(this.shape[0]),r.push(this.stride[0])),"number"==typeof n&&n>=0?a=a+this.stride[1]*n|0:(i.push(this.shape[1]),r.push(this.stride[1])),(0,t[i.length+1])(this.data,i,r,a)},function(e,t,n,r){return new i(e,t[0],t[1],n[0],n[1],r)}},3:function(e,t,n){function i(e,t,n,i,r,a,o,s){this.data=e,this.shape=[t,n,i],this.stride=[r,a,o],this.offset=0|s}var r=i.prototype;return r.dtype=e,r.dimension=3,Object.defineProperty(r,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(r,"order",{get:function(){var e=Math.abs(this.stride[0]),t=Math.abs(this.stride[1]),n=Math.abs(this.stride[2]);return e>t?t>n?[2,1,0]:e>n?[1,2,0]:[1,0,2]:e>n?[2,0,1]:n>t?[0,1,2]:[0,2,1]}}),r.set=function(t,n,i,r){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i,r):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i]=r},r.get=function(t,n,i){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i]},r.index=function(e,t,n){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n},r.hi=function(e,t,n){return new i(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,this.stride[0],this.stride[1],this.stride[2],this.offset)},r.lo=function(e,t,n){var r=this.offset,a=0,o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.stride[0],u=this.stride[1],d=this.stride[2];return"number"==typeof e&&e>=0&&(r+=c*(a=0|e),o-=a),"number"==typeof t&&t>=0&&(r+=u*(a=0|t),s-=a),"number"==typeof n&&n>=0&&(r+=d*(a=0|n),l-=a),new i(this.data,o,s,l,c,u,d,r)},r.step=function(e,t,n){var r=this.shape[0],a=this.shape[1],o=this.shape[2],s=this.stride[0],l=this.stride[1],c=this.stride[2],u=this.offset,d=0,g=Math.ceil;return"number"==typeof e&&((d=0|e)<0?(u+=s*(r-1),r=g(-r/d)):r=g(r/d),s*=d),"number"==typeof t&&((d=0|t)<0?(u+=l*(a-1),a=g(-a/d)):a=g(a/d),l*=d),"number"==typeof n&&((d=0|n)<0?(u+=c*(o-1),o=g(-o/d)):o=g(o/d),c*=d),new i(this.data,r,a,o,s,l,c,u)},r.transpose=function(e,t,n){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n;var r=this.shape,a=this.stride;return new i(this.data,r[e],r[t],r[n],a[e],a[t],a[n],this.offset)},r.pick=function(e,n,i){var r=[],a=[],o=this.offset;return"number"==typeof e&&e>=0?o=o+this.stride[0]*e|0:(r.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof n&&n>=0?o=o+this.stride[1]*n|0:(r.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof i&&i>=0?o=o+this.stride[2]*i|0:(r.push(this.shape[2]),a.push(this.stride[2])),(0,t[r.length+1])(this.data,r,a,o)},function(e,t,n,r){return new i(e,t[0],t[1],t[2],n[0],n[1],n[2],r)}},4:function(e,t,n){function i(e,t,n,i,r,a,o,s,l,c){this.data=e,this.shape=[t,n,i,r],this.stride=[a,o,s,l],this.offset=0|c}var r=i.prototype;return r.dtype=e,r.dimension=4,Object.defineProperty(r,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(r,"order",{get:n}),r.set=function(t,n,i,r,a){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i+this.stride[3]*r,a):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i+this.stride[3]*r]=a},r.get=function(t,n,i,r){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i+this.stride[3]*r):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i+this.stride[3]*r]},r.index=function(e,t,n,i){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*i},r.hi=function(e,t,n,r){return new i(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof r||r<0?this.shape[3]:0|r,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},r.lo=function(e,t,n,r){var a=this.offset,o=0,s=this.shape[0],l=this.shape[1],c=this.shape[2],u=this.shape[3],d=this.stride[0],g=this.stride[1],h=this.stride[2],f=this.stride[3];return"number"==typeof e&&e>=0&&(a+=d*(o=0|e),s-=o),"number"==typeof t&&t>=0&&(a+=g*(o=0|t),l-=o),"number"==typeof n&&n>=0&&(a+=h*(o=0|n),c-=o),"number"==typeof r&&r>=0&&(a+=f*(o=0|r),u-=o),new i(this.data,s,l,c,u,d,g,h,f,a)},r.step=function(e,t,n,r){var a=this.shape[0],o=this.shape[1],s=this.shape[2],l=this.shape[3],c=this.stride[0],u=this.stride[1],d=this.stride[2],g=this.stride[3],h=this.offset,f=0,p=Math.ceil;return"number"==typeof e&&((f=0|e)<0?(h+=c*(a-1),a=p(-a/f)):a=p(a/f),c*=f),"number"==typeof t&&((f=0|t)<0?(h+=u*(o-1),o=p(-o/f)):o=p(o/f),u*=f),"number"==typeof n&&((f=0|n)<0?(h+=d*(s-1),s=p(-s/f)):s=p(s/f),d*=f),"number"==typeof r&&((f=0|r)<0?(h+=g*(l-1),l=p(-l/f)):l=p(l/f),g*=f),new i(this.data,a,o,s,l,c,u,d,g,h)},r.transpose=function(e,t,n,r){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n,r=void 0===r?3:0|r;var a=this.shape,o=this.stride;return new i(this.data,a[e],a[t],a[n],a[r],o[e],o[t],o[n],o[r],this.offset)},r.pick=function(e,n,i,r){var a=[],o=[],s=this.offset;return"number"==typeof e&&e>=0?s=s+this.stride[0]*e|0:(a.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof n&&n>=0?s=s+this.stride[1]*n|0:(a.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof i&&i>=0?s=s+this.stride[2]*i|0:(a.push(this.shape[2]),o.push(this.stride[2])),"number"==typeof r&&r>=0?s=s+this.stride[3]*r|0:(a.push(this.shape[3]),o.push(this.stride[3])),(0,t[a.length+1])(this.data,a,o,s)},function(e,t,n,r){return new i(e,t[0],t[1],t[2],t[3],n[0],n[1],n[2],n[3],r)}},5:function(e,t,n){function i(e,t,n,i,r,a,o,s,l,c,u,d){this.data=e,this.shape=[t,n,i,r,a],this.stride=[o,s,l,c,u],this.offset=0|d}var r=i.prototype;return r.dtype=e,r.dimension=5,Object.defineProperty(r,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(r,"order",{get:n}),r.set=function(t,n,i,r,a,o){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i+this.stride[3]*r+this.stride[4]*a,o):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i+this.stride[3]*r+this.stride[4]*a]=o},r.get=function(t,n,i,r,a){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i+this.stride[3]*r+this.stride[4]*a):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*i+this.stride[3]*r+this.stride[4]*a]},r.index=function(e,t,n,i,r){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*i+this.stride[4]*r},r.hi=function(e,t,n,r,a){return new i(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof r||r<0?this.shape[3]:0|r,"number"!=typeof a||a<0?this.shape[4]:0|a,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},r.lo=function(e,t,n,r,a){var o=this.offset,s=0,l=this.shape[0],c=this.shape[1],u=this.shape[2],d=this.shape[3],g=this.shape[4],h=this.stride[0],f=this.stride[1],p=this.stride[2],m=this.stride[3],v=this.stride[4];return"number"==typeof e&&e>=0&&(o+=h*(s=0|e),l-=s),"number"==typeof t&&t>=0&&(o+=f*(s=0|t),c-=s),"number"==typeof n&&n>=0&&(o+=p*(s=0|n),u-=s),"number"==typeof r&&r>=0&&(o+=m*(s=0|r),d-=s),"number"==typeof a&&a>=0&&(o+=v*(s=0|a),g-=s),new i(this.data,l,c,u,d,g,h,f,p,m,v,o)},r.step=function(e,t,n,r,a){var o=this.shape[0],s=this.shape[1],l=this.shape[2],c=this.shape[3],u=this.shape[4],d=this.stride[0],g=this.stride[1],h=this.stride[2],f=this.stride[3],p=this.stride[4],m=this.offset,v=0,b=Math.ceil;return"number"==typeof e&&((v=0|e)<0?(m+=d*(o-1),o=b(-o/v)):o=b(o/v),d*=v),"number"==typeof t&&((v=0|t)<0?(m+=g*(s-1),s=b(-s/v)):s=b(s/v),g*=v),"number"==typeof n&&((v=0|n)<0?(m+=h*(l-1),l=b(-l/v)):l=b(l/v),h*=v),"number"==typeof r&&((v=0|r)<0?(m+=f*(c-1),c=b(-c/v)):c=b(c/v),f*=v),"number"==typeof a&&((v=0|a)<0?(m+=p*(u-1),u=b(-u/v)):u=b(u/v),p*=v),new i(this.data,o,s,l,c,u,d,g,h,f,p,m)},r.transpose=function(e,t,n,r,a){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n,r=void 0===r?3:0|r,a=void 0===a?4:0|a;var o=this.shape,s=this.stride;return new i(this.data,o[e],o[t],o[n],o[r],o[a],s[e],s[t],s[n],s[r],s[a],this.offset)},r.pick=function(e,n,i,r,a){var o=[],s=[],l=this.offset;return"number"==typeof e&&e>=0?l=l+this.stride[0]*e|0:(o.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof n&&n>=0?l=l+this.stride[1]*n|0:(o.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof i&&i>=0?l=l+this.stride[2]*i|0:(o.push(this.shape[2]),s.push(this.stride[2])),"number"==typeof r&&r>=0?l=l+this.stride[3]*r|0:(o.push(this.shape[3]),s.push(this.stride[3])),"number"==typeof a&&a>=0?l=l+this.stride[4]*a|0:(o.push(this.shape[4]),s.push(this.stride[4])),(0,t[o.length+1])(this.data,o,s,l)},function(e,t,n,r){return new i(e,t[0],t[1],t[2],t[3],t[4],n[0],n[1],n[2],n[3],n[4],r)}}};function l(e,t){var n=-1===t?"T":String(t),i=s[n];return-1===t?i(e):0===t?i(e,u[e][0]):i(e,u[e],o)}function c(e){if(i(e))return"buffer";if(r)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var u={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function d(e,t,n,i){if(void 0===e)return(0,u.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var r=t.length;if(void 0===n){n=new Array(r);for(var a=r-1,o=1;a>=0;--a)n[a]=o,o*=t[a]}if(void 0===i)for(i=0,a=0;a<r;++a)n[a]<0&&(i-=(t[a]-1)*n[a]);for(var s=c(e),d=u[s];d.length<=r+1;)d.push(l(s,d.length-1));return(0,d[r+1])(e,t,n,i)}t.exports=d},{"is-buffer":237}],260:[function(e,t,n){var i=e("double-bits"),r=Math.pow(2,-1074),a=-1>>>0;function o(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-r:r;var n=i.hi(e),o=i.lo(e);return t>e==e>0?o===a?(n+=1,o=0):o+=1:0===o?(o=a,n-=1):o-=1,i.pack(o,n)}t.exports=o},{"double-bits":64}],261:[function(e,t,n){var i=1e-6,r=1e-6;n.vertexNormals=function(e,t,n){for(var r=t.length,a=new Array(r),o=void 0===n?i:n,s=0;s<r;++s)a[s]=[0,0,0];for(s=0;s<e.length;++s)for(var l=e[s],c=0,u=l[l.length-1],d=l[0],g=0;g<l.length;++g){c=u,u=d,d=l[(g+1)%l.length];for(var h=t[c],f=t[u],p=t[d],m=new Array(3),v=0,b=new Array(3),y=0,I=0;I<3;++I)m[I]=h[I]-f[I],v+=m[I]*m[I],b[I]=p[I]-f[I],y+=b[I]*b[I];if(v*y>o){var C=a[u],x=1/Math.sqrt(v*y);for(I=0;I<3;++I){var B=(I+1)%3,A=(I+2)%3;C[I]+=x*(b[B]*m[A]-b[A]*m[B])}}}for(s=0;s<r;++s){C=a[s];var F=0;for(I=0;I<3;++I)F+=C[I]*C[I];if(F>o)for(x=1/Math.sqrt(F),I=0;I<3;++I)C[I]*=x;else for(I=0;I<3;++I)C[I]=0}return a},n.faceNormals=function(e,t,n){for(var i=e.length,a=new Array(i),o=void 0===n?r:n,s=0;s<i;++s){for(var l=e[s],c=new Array(3),u=0;u<3;++u)c[u]=t[l[u]];var d=new Array(3),g=new Array(3);for(u=0;u<3;++u)d[u]=c[1][u]-c[0][u],g[u]=c[2][u]-c[0][u];var h=new Array(3),f=0;for(u=0;u<3;++u){var p=(u+1)%3,m=(u+2)%3;h[u]=d[p]*g[m]-d[m]*g[p],f+=h[u]*h[u]}for(f=f>o?1/Math.sqrt(f):0,u=0;u<3;++u)h[u]*=f;a[s]=h}return a}},{}],262:[function(e,t,n){function i(e,t,n,i,r,a,o,s,l,c){var u=t+a+c;if(d>0){var d=Math.sqrt(u+1);e[0]=.5*(o-l)/d,e[1]=.5*(s-i)/d,e[2]=.5*(n-a)/d,e[3]=.5*d}else{var g=Math.max(t,a,c);d=Math.sqrt(2*g-u+1),t>=g?(e[0]=.5*d,e[1]=.5*(r+n)/d,e[2]=.5*(s+i)/d,e[3]=.5*(o-l)/d):a>=g?(e[0]=.5*(n+r)/d,e[1]=.5*d,e[2]=.5*(l+o)/d,e[3]=.5*(s-i)/d):(e[0]=.5*(i+s)/d,e[1]=.5*(o+l)/d,e[2]=.5*d,e[3]=.5*(n-r)/d)}return e}t.exports=i},{}],263:[function(e,t,n){t.exports=h;var i=e("filtered-vector"),r=e("gl-mat4/lookAt"),a=e("gl-mat4/fromQuat"),o=e("gl-mat4/invert"),s=e("./lib/quatFromFrame");function l(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function c(e,t,n,i){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(i,2))}function u(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=c(n,i,r,a);o>1e-6?(e[0]=n/o,e[1]=i/o,e[2]=r/o,e[3]=a/o):(e[0]=e[1]=e[2]=0,e[3]=1)}function d(e,t,n){this.radius=i([n]),this.center=i(t),this.rotation=i(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=d.prototype;function h(e){var t=(e=e||{}).center||[0,0,0],n=e.rotation||[0,0,0,1],i=e.radius||1;t=[].slice.call(t,0,3),u(n=[].slice.call(n,0,4),n);var r=new d(n,t,Math.log(i));return r.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&r.lookAt(0,e.eye,e.center,e.up),r}g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;u(t,t);var n=this.computedMatrix;a(n,t);var i=this.computedCenter,r=this.computedEye,o=this.computedUp,s=Math.exp(this.computedRadius[0]);r[0]=i[0]+s*n[2],r[1]=i[1]+s*n[6],r[2]=i[2]+s*n[10],o[0]=n[1],o[1]=n[5],o[2]=n[9];for(var l=0;l<3;++l){for(var c=0,d=0;d<3;++d)c+=n[l+4*d]*r[d];n[12+l]=-c}},g.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var i=0;i<16;++i)t[i]=n[i];return t}return n},g.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},g.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},g.pan=function(e,t,n,i){t=t||0,n=n||0,i=i||0,this.recalcMatrix(e);var r=this.computedMatrix,a=r[1],o=r[5],s=r[9],c=l(a,o,s);a/=c,o/=c,s/=c;var u=r[0],d=r[4],g=r[8],h=u*a+d*o+g*s,f=l(u-=a*h,d-=o*h,g-=s*h);u/=f,d/=f,g/=f,r[2],r[6],r[10];var p=u*t+a*n,m=d*t+o*n,v=g*t+s*n;this.center.move(e,p,m,v);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+i),this.radius.set(e,Math.log(b))},g.rotate=function(e,t,n,i){this.recalcMatrix(e),t=t||0,n=n||0;var r=this.computedMatrix,a=r[0],o=r[4],s=r[8],u=r[1],d=r[5],g=r[9],h=r[2],f=r[6],p=r[10],m=t*a+n*u,v=t*o+n*d,b=t*s+n*g,y=-(f*b-p*v),I=-(p*m-h*b),C=-(h*v-f*m),x=Math.sqrt(Math.max(0,1-Math.pow(y,2)-Math.pow(I,2)-Math.pow(C,2))),B=c(y,I,C,x);B>1e-6?(y/=B,I/=B,C/=B,x/=B):(y=I=C=0,x=1);var A=this.computedRotation,F=A[0],Q=A[1],U=A[2],w=A[3],G=F*x+w*y+Q*C-U*I,R=Q*x+w*I+U*y-F*C,L=U*x+w*C+F*I-Q*y,S=w*x-F*y-Q*I-U*C;if(i){y=h,I=f,C=p;var V=Math.sin(i)/l(y,I,C);y*=V,I*=V,C*=V,S=S*(x=Math.cos(t))-(G=G*x+S*y+R*C-L*I)*y-(R=R*x+S*I+L*y-G*C)*I-(L=L*x+S*C+G*I-R*y)*C}var Z=c(G,R,L,S);Z>1e-6?(G/=Z,R/=Z,L/=Z,S/=Z):(G=R=L=0,S=1),this.rotation.set(e,G,R,L,S)},g.lookAt=function(e,t,n,i){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,i=i||this.computedUp;var a=this.computedMatrix;r(a,t,n,i);var o=this.computedRotation;s(o,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),u(o,o),this.rotation.set(e,o[0],o[1],o[2],o[3]);for(var l=0,c=0;c<3;++c)l+=Math.pow(n[c]-t[c],2);this.radius.set(e,.5*Math.log(Math.max(l,1e-6))),this.center.set(e,n[0],n[1],n[2])},g.translate=function(e,t,n,i){this.center.move(e,t||0,n||0,i||0)},g.setMatrix=function(e,t){var n=this.computedRotation;s(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),u(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var i=this.computedMatrix;o(i,t);var r=i[15];if(Math.abs(r)>1e-6){var a=i[12]/r,l=i[13]/r,c=i[14]/r;this.recalcMatrix(e);var d=Math.exp(this.computedRadius[0]);this.center.set(e,a-i[2]*d,l-i[6]*d,c-i[10]*d),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},g.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},g.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},g.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);var i=e.rotation;i&&this.rotation.set(t,i[0],i[1],i[2],i[3]);var r=e.distance;r&&r>0&&this.radius.set(t,Math.log(r)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(e,t,n){var i=e("repeat-string");t.exports=function(e,t,n){return i(n=void 0!==n?n+"":" ",t)+e}},{"repeat-string":277}],265:[function(e,t,n){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],266:[function(e,t,n){t.exports=r;var i=e("compare-angle");function r(e,t){for(var n=0|t.length,r=e.length,a=[new Array(n),new Array(n)],o=0;o<n;++o)a[0][o]=[],a[1][o]=[];for(o=0;o<r;++o){var s=e[o];a[0][s[0]].push(s),a[1][s[1]].push(s)}var l=[];for(o=0;o<n;++o)a[0][o].length+a[1][o].length===0&&l.push([o]);function c(e,t){var n=a[t][e[t]];n.splice(n.indexOf(e),1)}function u(e,n,r){for(var o,s,l,u=0;u<2;++u)if(a[u][n].length>0){o=a[u][n][0],l=u;break}s=o[1^l];for(var d=0;d<2;++d)for(var g=a[d][n],h=0;h<g.length;++h){var f=g[h],p=f[1^d];i(t[e],t[n],t[s],t[p])>0&&(o=f,s=p,l=d)}return r||o&&c(o,l),s}function d(e,n){var r=a[n][e][0],o=[e];c(r,n);for(var s=r[1^n];;){for(;s!==e;)o.push(s),s=u(o[o.length-2],s,!1);if(a[0][e].length+a[1][e].length===0)break;var l=o[o.length-1],d=e,g=o[1],h=u(l,d,!0);if(i(t[l],t[d],t[g],t[h])<0)break;o.push(e),s=u(l,d)}return o}function g(e,t){return t[1]===t[t.length-1]}for(o=0;o<n;++o)for(var h=0;h<2;++h){for(var f=[];a[h][o].length>0;){a[0][o].length;var p=d(o,h);g(f,p)?f.push.apply(f,p):(f.length>0&&l.push(f),f=p)}f.length>0&&l.push(f)}return l}},{"compare-angle":54}],267:[function(e,t,n){t.exports=r;var i=e("edges-to-adjacency-list");function r(e,t){for(var n=i(e,t.length),r=new Array(t.length),a=new Array(t.length),o=[],s=0;s<t.length;++s){var l=n[s].length;a[s]=l,r[s]=!0,l<=1&&o.push(s)}for(;o.length>0;){r[h=o.pop()]=!1;var c=n[h];for(s=0;s<c.length;++s){var u=c[s];0==--a[u]&&o.push(u)}}var d=new Array(t.length),g=[];for(s=0;s<t.length;++s)if(r[s]){var h=g.length;d[s]=h,g.push(t[s])}else d[s]=-1;var f=[];for(s=0;s<e.length;++s){var p=e[s];r[p[0]]&&r[p[1]]&&f.push([d[p[0]],d[p[1]]])}return[f,g]}},{"edges-to-adjacency-list":66}],268:[function(e,t,n){t.exports=g;var i=e("edges-to-adjacency-list"),r=e("planar-dual"),a=e("point-in-big-polygon"),o=e("two-product"),s=e("robust-sum"),l=e("uniq"),c=e("./lib/trim-leaves");function u(e,t){for(var n=new Array(e),i=0;i<e;++i)n[i]=t;return n}function d(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=[];return t}function g(e,t){e=(W=c(e,t))[0];var n=(t=W[1]).length;e.length;for(var g=i(e,t.length),h=0;h<n;++h)if(g[h].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var f=r(e,t);function p(e){for(var n=e.length,i=[0],r=0;r<n;++r){var a=t[e[r]],l=t[e[(r+1)%n]],c=o(-a[0],a[1]),u=o(-a[0],l[1]),d=o(l[0],a[1]),g=o(l[0],l[1]);i=s(i,s(s(c,u),s(d,g)))}return i[i.length-1]>0}var m=(f=f.filter(p)).length,v=new Array(m),b=new Array(m);for(h=0;h<m;++h){v[h]=h;var y=new Array(m),I=f[h].map((function(e){return t[e]})),C=a([I]),x=0;e:for(var B=0;B<m;++B)if(y[B]=0,h!==B){for(var A=(D=f[B]).length,F=0;F<A;++F){var Q=C(t[D[F]]);if(0!==Q){Q<0&&(y[B]=1,x+=1);continue e}}y[B]=1,x+=1}b[h]=[x,h,y]}for(b.sort((function(e,t){return t[0]-e[0]})),h=0;h<m;++h){var U=(y=b[h])[1],w=y[2];for(B=0;B<m;++B)w[B]&&(v[B]=U)}var G=d(m);for(h=0;h<m;++h)G[h].push(v[h]),G[v[h]].push(h);var R={},L=u(n,!1);for(h=0;h<m;++h)for(A=(D=f[h]).length,B=0;B<A;++B){var S=D[B],V=D[(B+1)%A],Z=Math.min(S,V)+":"+Math.max(S,V);if(Z in R){var k=R[Z];G[k].push(h),G[h].push(k),L[S]=L[V]=!0}else R[Z]=h}function E(e){for(var t=e.length,n=0;n<t;++n)if(!L[e[n]])return!1;return!0}var X=[],N=u(m,-1);for(h=0;h<m;++h)v[h]!==h||E(f[h])?N[h]=-1:(X.push(h),N[h]=0);for(var W=[];X.length>0;){var _=X.pop(),T=G[_];l(T,(function(e,t){return e-t}));var M,H=T.length,Y=N[_];for(0===Y&&(M=[D=f[_]]),h=0;h<H;++h){var D,z=T[h];N[z]>=0||(N[z]=1^Y,X.push(z),0===Y&&(E(D=f[z])||(D.reverse(),M.push(D))))}0===Y&&W.push(M)}return W}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(e,t,n){t.exports=f;var i=e("robust-orientation")[3],r=e("slab-decomposition"),a=e("interval-tree-1d"),o=e("binary-search-bounds");function s(){return!0}function l(e){return function(t,n){var i=e[t];return!!i&&!!i.queryPoint(n,s)}}function c(e){for(var t={},n=0;n<e.length;++n){var i=e[n],r=i[0][0],o=i[0][1],s=i[1][1],c=[Math.min(o,s),Math.max(o,s)];r in t?t[r].push(c):t[r]=[c]}var u={},d=Object.keys(t);for(n=0;n<d.length;++n){var g=t[d[n]];u[d[n]]=a(g)}return l(u)}function u(e,t){return function(n){var r=o.le(t,n[0]);if(r<0)return 1;var a=e[r];if(!a){if(!(r>0&&t[r]===n[0]))return 1;a=e[r-1]}for(var s=1;a;){var l=a.key,c=i(n,l[0],l[1]);if(l[0][0]<l[1][0])if(c<0)a=a.left;else{if(!(c>0))return 0;s=-1,a=a.right}else if(c>0)a=a.left;else{if(!(c<0))return 0;s=1,a=a.right}}return s}}function d(e){return 1}function g(e){return function(t){return e(t[0],t[1])?0:1}}function h(e,t){return function(n){return e(n[0],n[1])?0:t(n)}}function f(e){for(var t=e.length,n=[],i=[],a=0;a<t;++a)for(var o=e[a],s=o.length,l=s-1,f=0;f<s;l=f++){var p=o[l],m=o[f];p[0]===m[0]?i.push([p,m]):n.push([p,m])}if(0===n.length)return 0===i.length?d:g(c(i));var v=r(n),b=u(v.slabs,v.coordinates);return 0===i.length?b:h(c(i),b)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(e,t,n){var i=new Float64Array(4),r=new Float64Array(4),a=new Float64Array(4);function o(e,t,n,o,s){i.length<o.length&&(i=new Float64Array(o.length),r=new Float64Array(o.length),a=new Float64Array(o.length));for(var l=0;l<o.length;++l)i[l]=e[l]-o[l],r[l]=t[l]-e[l],a[l]=n[l]-e[l];var c=0,u=0,d=0,g=0,h=0,f=0;for(l=0;l<o.length;++l){var p=r[l],m=a[l],v=i[l];c+=p*p,u+=p*m,d+=m*m,g+=v*p,h+=v*m,f+=v*v}var b,y,I,C,x,B=Math.abs(c*d-u*u),A=u*h-d*g,F=u*g-c*h;if(A+F<=B)if(A<0)F<0&&g<0?(F=0,-g>=c?(A=1,b=c+2*g+f):b=g*(A=-g/c)+f):(A=0,h>=0?(F=0,b=f):-h>=d?(F=1,b=d+2*h+f):b=h*(F=-h/d)+f);else if(F<0)F=0,g>=0?(A=0,b=f):-g>=c?(A=1,b=c+2*g+f):b=g*(A=-g/c)+f;else{var Q=1/B;b=(A*=Q)*(c*A+u*(F*=Q)+2*g)+F*(u*A+d*F+2*h)+f}else A<0?(I=d+h)>(y=u+g)?(C=I-y)>=(x=c-2*u+d)?(A=1,F=0,b=c+2*g+f):b=(A=C/x)*(c*A+u*(F=1-A)+2*g)+F*(u*A+d*F+2*h)+f:(A=0,I<=0?(F=1,b=d+2*h+f):h>=0?(F=0,b=f):b=h*(F=-h/d)+f):F<0?(I=c+g)>(y=u+h)?(C=I-y)>=(x=c-2*u+d)?(F=1,A=0,b=d+2*h+f):b=(A=1-(F=C/x))*(c*A+u*F+2*g)+F*(u*A+d*F+2*h)+f:(F=0,I<=0?(A=1,b=c+2*g+f):g>=0?(A=0,b=f):b=g*(A=-g/c)+f):(C=d+h-u-g)<=0?(A=0,F=1,b=d+2*h+f):C>=(x=c-2*u+d)?(A=1,F=0,b=c+2*g+f):b=(A=C/x)*(c*A+u*(F=1-A)+2*g)+F*(u*A+d*F+2*h)+f;var U=1-A-F;for(l=0;l<o.length;++l)s[l]=U*e[l]+A*t[l]+F*n[l];return b<0?0:b}t.exports=o},{}],271:[function(e,t,n){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(e,t,n){var i=e("big-rat/add");function r(e,t){for(var n=e.length,r=new Array(n),a=0;a<n;++a)r[a]=i(e[a],t[a]);return r}t.exports=r},{"big-rat/add":15}],273:[function(e,t,n){t.exports=r;var i=e("big-rat");function r(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=i(e[n]);return t}},{"big-rat":18}],274:[function(e,t,n){var i=e("big-rat"),r=e("big-rat/mul");function a(e,t){for(var n=i(t),a=e.length,o=new Array(a),s=0;s<a;++s)o[s]=r(e[s],n);return o}t.exports=a},{"big-rat":18,"big-rat/mul":27}],275:[function(e,t,n){var i=e("big-rat/sub");function r(e,t){for(var n=e.length,r=new Array(n),a=0;a<n;++a)r[a]=i(e[a],t[a]);return r}t.exports=r},{"big-rat/sub":29}],276:[function(e,t,n){var i=e("compare-cell"),r=e("compare-oriented-cell"),a=e("cell-orientation");function o(e){e.sort(r);for(var t=e.length,n=0,o=0;o<t;++o){var s=e[o],l=a(s);if(0!==l){if(n>0){var c=e[n-1];if(0===i(s,c)&&a(c)!==l){n-=1;continue}}e[n++]=s}}return e.length=n,e}t.exports=o},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(e,t,n){var i,r="";function a(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(i!==e||void 0===i)i=e,r="";else if(r.length>=n)return r.substr(0,n);for(;n>r.length&&t>1;)1&t&&(r+=e),t>>=1,e+=e;return r=(r+=e).substr(0,n)}t.exports=a},{}],278:[function(e,t,n){(function(e){(function(){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==xs?xs:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(e,t,n){function i(e){for(var t=e.length,n=e[e.length-1],i=t,r=t-2;r>=0;--r){var a=n;(l=(s=e[r])-((n=a+s)-a))&&(e[--i]=n,n=l)}var o=0;for(r=i;r<t;++r){var s,l;(l=(s=n)-((n=(a=e[r])+s)-a))&&(e[o++]=l)}return e[o++]=n,e.length=o,e}t.exports=i},{}],280:[function(e,t,n){var i=e("two-product"),r=e("robust-sum"),a=e("robust-scale"),o=e("robust-compress"),s=4;function l(e,t,n,i){return function(t){return i(e(n(t[0][0],t[1][1]),n(-t[0][1],t[1][0])))}}function c(e,t,n,i){return function(r){return i(e(t(e(n(r[1][1],r[2][2]),n(-r[1][2],r[2][1])),r[0][0]),e(t(e(n(r[1][0],r[2][2]),n(-r[1][2],r[2][0])),-r[0][1]),t(e(n(r[1][0],r[2][1]),n(-r[1][1],r[2][0])),r[0][2]))))}}function u(e){return(2===e?l:3===e?c:void 0)(r,a,i,o)}var d=[function(){return[0]},function(e){return[e[0][0]]}];function g(e,t,n,i,r,a){return function(o){switch(o.length){case 0:return e(o);case 1:return t(o);case 2:return n(o);case 3:return i(o)}var s=r[o.length];return s||(s=r[o.length]=a(o.length)),s(o)}}function h(){for(;d.length<s;)d.push(u(d.length));t.exports=g.apply(void 0,d.concat([d,u]));for(var e=0;e<d.length;++e)t.exports[e]=d[e]}h()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(e,t,n){var i=e("two-product"),r=e("robust-sum");function a(e,t){for(var n=i(e[0],t[0]),a=1;a<e.length;++a)n=r(n,i(e[a],t[a]));return n}t.exports=a},{"robust-sum":289,"two-product":306}],282:[function(e,t,n){var i=e("two-product"),r=e("robust-sum"),a=e("robust-subtract"),o=e("robust-scale"),s=6;function l(e){return(3===e?g:4===e?h:5===e?f:p)(r,a,i,o)}function c(){return 0}function u(){return 0}function d(){return 0}function g(e,t,n,i){function r(r,a,o){var s=n(r[0],r[0]),l=i(s,a[0]),c=i(s,o[0]),u=n(a[0],a[0]),d=i(u,r[0]),g=i(u,o[0]),h=n(o[0],o[0]),f=i(h,r[0]),p=i(h,a[0]),m=e(t(p,g),t(d,l)),v=t(f,c),b=t(m,v);return b[b.length-1]}return r}function h(e,t,n,i){function r(r,a,o,s){var l=e(n(r[0],r[0]),n(r[1],r[1])),c=i(l,a[0]),u=i(l,o[0]),d=i(l,s[0]),g=e(n(a[0],a[0]),n(a[1],a[1])),h=i(g,r[0]),f=i(g,o[0]),p=i(g,s[0]),m=e(n(o[0],o[0]),n(o[1],o[1])),v=i(m,r[0]),b=i(m,a[0]),y=i(m,s[0]),I=e(n(s[0],s[0]),n(s[1],s[1])),C=i(I,r[0]),x=i(I,a[0]),B=i(I,o[0]),A=e(e(i(t(B,y),a[1]),e(i(t(x,p),-o[1]),i(t(b,f),s[1]))),e(i(t(x,p),r[1]),e(i(t(C,d),-a[1]),i(t(h,c),s[1])))),F=e(e(i(t(B,y),r[1]),e(i(t(C,d),-o[1]),i(t(v,u),s[1]))),e(i(t(b,f),r[1]),e(i(t(v,u),-a[1]),i(t(h,c),o[1])))),Q=t(A,F);return Q[Q.length-1]}return r}function f(e,t,n,i){function r(r,a,o,s,l){var c=e(n(r[0],r[0]),e(n(r[1],r[1]),n(r[2],r[2]))),u=i(c,a[0]),d=i(c,o[0]),g=i(c,s[0]),h=i(c,l[0]),f=e(n(a[0],a[0]),e(n(a[1],a[1]),n(a[2],a[2]))),p=i(f,r[0]),m=i(f,o[0]),v=i(f,s[0]),b=i(f,l[0]),y=e(n(o[0],o[0]),e(n(o[1],o[1]),n(o[2],o[2]))),I=i(y,r[0]),C=i(y,a[0]),x=i(y,s[0]),B=i(y,l[0]),A=e(n(s[0],s[0]),e(n(s[1],s[1]),n(s[2],s[2]))),F=i(A,r[0]),Q=i(A,a[0]),U=i(A,o[0]),w=i(A,l[0]),G=e(n(l[0],l[0]),e(n(l[1],l[1]),n(l[2],l[2]))),R=i(G,r[0]),L=i(G,a[0]),S=i(G,o[0]),V=i(G,s[0]),Z=e(e(e(i(e(i(t(V,w),o[1]),e(i(t(S,B),-s[1]),i(t(U,x),l[1]))),a[2]),e(i(e(i(t(V,w),a[1]),e(i(t(L,b),-s[1]),i(t(Q,v),l[1]))),-o[2]),i(e(i(t(S,B),a[1]),e(i(t(L,b),-o[1]),i(t(C,m),l[1]))),s[2]))),e(i(e(i(t(U,x),a[1]),e(i(t(Q,v),-o[1]),i(t(C,m),s[1]))),-l[2]),e(i(e(i(t(V,w),a[1]),e(i(t(L,b),-s[1]),i(t(Q,v),l[1]))),r[2]),i(e(i(t(V,w),r[1]),e(i(t(R,h),-s[1]),i(t(F,g),l[1]))),-a[2])))),e(e(i(e(i(t(L,b),r[1]),e(i(t(R,h),-a[1]),i(t(p,u),l[1]))),s[2]),e(i(e(i(t(Q,v),r[1]),e(i(t(F,g),-a[1]),i(t(p,u),s[1]))),-l[2]),i(e(i(t(U,x),a[1]),e(i(t(Q,v),-o[1]),i(t(C,m),s[1]))),r[2]))),e(i(e(i(t(U,x),r[1]),e(i(t(F,g),-o[1]),i(t(I,d),s[1]))),-a[2]),e(i(e(i(t(Q,v),r[1]),e(i(t(F,g),-a[1]),i(t(p,u),s[1]))),o[2]),i(e(i(t(C,m),r[1]),e(i(t(I,d),-a[1]),i(t(p,u),o[1]))),-s[2]))))),k=e(e(e(i(e(i(t(V,w),o[1]),e(i(t(S,B),-s[1]),i(t(U,x),l[1]))),r[2]),i(e(i(t(V,w),r[1]),e(i(t(R,h),-s[1]),i(t(F,g),l[1]))),-o[2])),e(i(e(i(t(S,B),r[1]),e(i(t(R,h),-o[1]),i(t(I,d),l[1]))),s[2]),i(e(i(t(U,x),r[1]),e(i(t(F,g),-o[1]),i(t(I,d),s[1]))),-l[2]))),e(e(i(e(i(t(S,B),a[1]),e(i(t(L,b),-o[1]),i(t(C,m),l[1]))),r[2]),i(e(i(t(S,B),r[1]),e(i(t(R,h),-o[1]),i(t(I,d),l[1]))),-a[2])),e(i(e(i(t(L,b),r[1]),e(i(t(R,h),-a[1]),i(t(p,u),l[1]))),o[2]),i(e(i(t(C,m),r[1]),e(i(t(I,d),-a[1]),i(t(p,u),o[1]))),-l[2])))),E=t(Z,k);return E[E.length-1]}return r}function p(e,t,n,i){function r(r,a,o,s,l,c){var u=e(e(n(r[0],r[0]),n(r[1],r[1])),e(n(r[2],r[2]),n(r[3],r[3]))),d=i(u,a[0]),g=i(u,o[0]),h=i(u,s[0]),f=i(u,l[0]),p=i(u,c[0]),m=e(e(n(a[0],a[0]),n(a[1],a[1])),e(n(a[2],a[2]),n(a[3],a[3]))),v=i(m,r[0]),b=i(m,o[0]),y=i(m,s[0]),I=i(m,l[0]),C=i(m,c[0]),x=e(e(n(o[0],o[0]),n(o[1],o[1])),e(n(o[2],o[2]),n(o[3],o[3]))),B=i(x,r[0]),A=i(x,a[0]),F=i(x,s[0]),Q=i(x,l[0]),U=i(x,c[0]),w=e(e(n(s[0],s[0]),n(s[1],s[1])),e(n(s[2],s[2]),n(s[3],s[3]))),G=i(w,r[0]),R=i(w,a[0]),L=i(w,o[0]),S=i(w,l[0]),V=i(w,c[0]),Z=e(e(n(l[0],l[0]),n(l[1],l[1])),e(n(l[2],l[2]),n(l[3],l[3]))),k=i(Z,r[0]),E=i(Z,a[0]),X=i(Z,o[0]),N=i(Z,s[0]),W=i(Z,c[0]),_=e(e(n(c[0],c[0]),n(c[1],c[1])),e(n(c[2],c[2]),n(c[3],c[3]))),T=i(_,r[0]),M=i(_,a[0]),H=i(_,o[0]),Y=i(_,s[0]),D=i(_,l[0]),z=e(e(e(i(e(e(i(e(i(t(D,W),s[1]),e(i(t(Y,V),-l[1]),i(t(N,S),c[1]))),o[2]),i(e(i(t(D,W),o[1]),e(i(t(H,U),-l[1]),i(t(X,Q),c[1]))),-s[2])),e(i(e(i(t(Y,V),o[1]),e(i(t(H,U),-s[1]),i(t(L,F),c[1]))),l[2]),i(e(i(t(N,S),o[1]),e(i(t(X,Q),-s[1]),i(t(L,F),l[1]))),-c[2]))),a[3]),e(i(e(e(i(e(i(t(D,W),s[1]),e(i(t(Y,V),-l[1]),i(t(N,S),c[1]))),a[2]),i(e(i(t(D,W),a[1]),e(i(t(M,C),-l[1]),i(t(E,I),c[1]))),-s[2])),e(i(e(i(t(Y,V),a[1]),e(i(t(M,C),-s[1]),i(t(R,y),c[1]))),l[2]),i(e(i(t(N,S),a[1]),e(i(t(E,I),-s[1]),i(t(R,y),l[1]))),-c[2]))),-o[3]),i(e(e(i(e(i(t(D,W),o[1]),e(i(t(H,U),-l[1]),i(t(X,Q),c[1]))),a[2]),i(e(i(t(D,W),a[1]),e(i(t(M,C),-l[1]),i(t(E,I),c[1]))),-o[2])),e(i(e(i(t(H,U),a[1]),e(i(t(M,C),-o[1]),i(t(A,b),c[1]))),l[2]),i(e(i(t(X,Q),a[1]),e(i(t(E,I),-o[1]),i(t(A,b),l[1]))),-c[2]))),s[3]))),e(e(i(e(e(i(e(i(t(Y,V),o[1]),e(i(t(H,U),-s[1]),i(t(L,F),c[1]))),a[2]),i(e(i(t(Y,V),a[1]),e(i(t(M,C),-s[1]),i(t(R,y),c[1]))),-o[2])),e(i(e(i(t(H,U),a[1]),e(i(t(M,C),-o[1]),i(t(A,b),c[1]))),s[2]),i(e(i(t(L,F),a[1]),e(i(t(R,y),-o[1]),i(t(A,b),s[1]))),-c[2]))),-l[3]),i(e(e(i(e(i(t(N,S),o[1]),e(i(t(X,Q),-s[1]),i(t(L,F),l[1]))),a[2]),i(e(i(t(N,S),a[1]),e(i(t(E,I),-s[1]),i(t(R,y),l[1]))),-o[2])),e(i(e(i(t(X,Q),a[1]),e(i(t(E,I),-o[1]),i(t(A,b),l[1]))),s[2]),i(e(i(t(L,F),a[1]),e(i(t(R,y),-o[1]),i(t(A,b),s[1]))),-l[2]))),c[3])),e(i(e(e(i(e(i(t(D,W),s[1]),e(i(t(Y,V),-l[1]),i(t(N,S),c[1]))),a[2]),i(e(i(t(D,W),a[1]),e(i(t(M,C),-l[1]),i(t(E,I),c[1]))),-s[2])),e(i(e(i(t(Y,V),a[1]),e(i(t(M,C),-s[1]),i(t(R,y),c[1]))),l[2]),i(e(i(t(N,S),a[1]),e(i(t(E,I),-s[1]),i(t(R,y),l[1]))),-c[2]))),r[3]),i(e(e(i(e(i(t(D,W),s[1]),e(i(t(Y,V),-l[1]),i(t(N,S),c[1]))),r[2]),i(e(i(t(D,W),r[1]),e(i(t(T,p),-l[1]),i(t(k,f),c[1]))),-s[2])),e(i(e(i(t(Y,V),r[1]),e(i(t(T,p),-s[1]),i(t(G,h),c[1]))),l[2]),i(e(i(t(N,S),r[1]),e(i(t(k,f),-s[1]),i(t(G,h),l[1]))),-c[2]))),-a[3])))),e(e(e(i(e(e(i(e(i(t(D,W),a[1]),e(i(t(M,C),-l[1]),i(t(E,I),c[1]))),r[2]),i(e(i(t(D,W),r[1]),e(i(t(T,p),-l[1]),i(t(k,f),c[1]))),-a[2])),e(i(e(i(t(M,C),r[1]),e(i(t(T,p),-a[1]),i(t(v,d),c[1]))),l[2]),i(e(i(t(E,I),r[1]),e(i(t(k,f),-a[1]),i(t(v,d),l[1]))),-c[2]))),s[3]),i(e(e(i(e(i(t(Y,V),a[1]),e(i(t(M,C),-s[1]),i(t(R,y),c[1]))),r[2]),i(e(i(t(Y,V),r[1]),e(i(t(T,p),-s[1]),i(t(G,h),c[1]))),-a[2])),e(i(e(i(t(M,C),r[1]),e(i(t(T,p),-a[1]),i(t(v,d),c[1]))),s[2]),i(e(i(t(R,y),r[1]),e(i(t(G,h),-a[1]),i(t(v,d),s[1]))),-c[2]))),-l[3])),e(i(e(e(i(e(i(t(N,S),a[1]),e(i(t(E,I),-s[1]),i(t(R,y),l[1]))),r[2]),i(e(i(t(N,S),r[1]),e(i(t(k,f),-s[1]),i(t(G,h),l[1]))),-a[2])),e(i(e(i(t(E,I),r[1]),e(i(t(k,f),-a[1]),i(t(v,d),l[1]))),s[2]),i(e(i(t(R,y),r[1]),e(i(t(G,h),-a[1]),i(t(v,d),s[1]))),-l[2]))),c[3]),i(e(e(i(e(i(t(Y,V),o[1]),e(i(t(H,U),-s[1]),i(t(L,F),c[1]))),a[2]),i(e(i(t(Y,V),a[1]),e(i(t(M,C),-s[1]),i(t(R,y),c[1]))),-o[2])),e(i(e(i(t(H,U),a[1]),e(i(t(M,C),-o[1]),i(t(A,b),c[1]))),s[2]),i(e(i(t(L,F),a[1]),e(i(t(R,y),-o[1]),i(t(A,b),s[1]))),-c[2]))),r[3]))),e(e(i(e(e(i(e(i(t(Y,V),o[1]),e(i(t(H,U),-s[1]),i(t(L,F),c[1]))),r[2]),i(e(i(t(Y,V),r[1]),e(i(t(T,p),-s[1]),i(t(G,h),c[1]))),-o[2])),e(i(e(i(t(H,U),r[1]),e(i(t(T,p),-o[1]),i(t(B,g),c[1]))),s[2]),i(e(i(t(L,F),r[1]),e(i(t(G,h),-o[1]),i(t(B,g),s[1]))),-c[2]))),-a[3]),i(e(e(i(e(i(t(Y,V),a[1]),e(i(t(M,C),-s[1]),i(t(R,y),c[1]))),r[2]),i(e(i(t(Y,V),r[1]),e(i(t(T,p),-s[1]),i(t(G,h),c[1]))),-a[2])),e(i(e(i(t(M,C),r[1]),e(i(t(T,p),-a[1]),i(t(v,d),c[1]))),s[2]),i(e(i(t(R,y),r[1]),e(i(t(G,h),-a[1]),i(t(v,d),s[1]))),-c[2]))),o[3])),e(i(e(e(i(e(i(t(H,U),a[1]),e(i(t(M,C),-o[1]),i(t(A,b),c[1]))),r[2]),i(e(i(t(H,U),r[1]),e(i(t(T,p),-o[1]),i(t(B,g),c[1]))),-a[2])),e(i(e(i(t(M,C),r[1]),e(i(t(T,p),-a[1]),i(t(v,d),c[1]))),o[2]),i(e(i(t(A,b),r[1]),e(i(t(B,g),-a[1]),i(t(v,d),o[1]))),-c[2]))),-s[3]),i(e(e(i(e(i(t(L,F),a[1]),e(i(t(R,y),-o[1]),i(t(A,b),s[1]))),r[2]),i(e(i(t(L,F),r[1]),e(i(t(G,h),-o[1]),i(t(B,g),s[1]))),-a[2])),e(i(e(i(t(R,y),r[1]),e(i(t(G,h),-a[1]),i(t(v,d),s[1]))),o[2]),i(e(i(t(A,b),r[1]),e(i(t(B,g),-a[1]),i(t(v,d),o[1]))),-s[2]))),c[3]))))),O=e(e(e(i(e(e(i(e(i(t(D,W),s[1]),e(i(t(Y,V),-l[1]),i(t(N,S),c[1]))),o[2]),i(e(i(t(D,W),o[1]),e(i(t(H,U),-l[1]),i(t(X,Q),c[1]))),-s[2])),e(i(e(i(t(Y,V),o[1]),e(i(t(H,U),-s[1]),i(t(L,F),c[1]))),l[2]),i(e(i(t(N,S),o[1]),e(i(t(X,Q),-s[1]),i(t(L,F),l[1]))),-c[2]))),r[3]),e(i(e(e(i(e(i(t(D,W),s[1]),e(i(t(Y,V),-l[1]),i(t(N,S),c[1]))),r[2]),i(e(i(t(D,W),r[1]),e(i(t(T,p),-l[1]),i(t(k,f),c[1]))),-s[2])),e(i(e(i(t(Y,V),r[1]),e(i(t(T,p),-s[1]),i(t(G,h),c[1]))),l[2]),i(e(i(t(N,S),r[1]),e(i(t(k,f),-s[1]),i(t(G,h),l[1]))),-c[2]))),-o[3]),i(e(e(i(e(i(t(D,W),o[1]),e(i(t(H,U),-l[1]),i(t(X,Q),c[1]))),r[2]),i(e(i(t(D,W),r[1]),e(i(t(T,p),-l[1]),i(t(k,f),c[1]))),-o[2])),e(i(e(i(t(H,U),r[1]),e(i(t(T,p),-o[1]),i(t(B,g),c[1]))),l[2]),i(e(i(t(X,Q),r[1]),e(i(t(k,f),-o[1]),i(t(B,g),l[1]))),-c[2]))),s[3]))),e(e(i(e(e(i(e(i(t(Y,V),o[1]),e(i(t(H,U),-s[1]),i(t(L,F),c[1]))),r[2]),i(e(i(t(Y,V),r[1]),e(i(t(T,p),-s[1]),i(t(G,h),c[1]))),-o[2])),e(i(e(i(t(H,U),r[1]),e(i(t(T,p),-o[1]),i(t(B,g),c[1]))),s[2]),i(e(i(t(L,F),r[1]),e(i(t(G,h),-o[1]),i(t(B,g),s[1]))),-c[2]))),-l[3]),i(e(e(i(e(i(t(N,S),o[1]),e(i(t(X,Q),-s[1]),i(t(L,F),l[1]))),r[2]),i(e(i(t(N,S),r[1]),e(i(t(k,f),-s[1]),i(t(G,h),l[1]))),-o[2])),e(i(e(i(t(X,Q),r[1]),e(i(t(k,f),-o[1]),i(t(B,g),l[1]))),s[2]),i(e(i(t(L,F),r[1]),e(i(t(G,h),-o[1]),i(t(B,g),s[1]))),-l[2]))),c[3])),e(i(e(e(i(e(i(t(D,W),o[1]),e(i(t(H,U),-l[1]),i(t(X,Q),c[1]))),a[2]),i(e(i(t(D,W),a[1]),e(i(t(M,C),-l[1]),i(t(E,I),c[1]))),-o[2])),e(i(e(i(t(H,U),a[1]),e(i(t(M,C),-o[1]),i(t(A,b),c[1]))),l[2]),i(e(i(t(X,Q),a[1]),e(i(t(E,I),-o[1]),i(t(A,b),l[1]))),-c[2]))),r[3]),i(e(e(i(e(i(t(D,W),o[1]),e(i(t(H,U),-l[1]),i(t(X,Q),c[1]))),r[2]),i(e(i(t(D,W),r[1]),e(i(t(T,p),-l[1]),i(t(k,f),c[1]))),-o[2])),e(i(e(i(t(H,U),r[1]),e(i(t(T,p),-o[1]),i(t(B,g),c[1]))),l[2]),i(e(i(t(X,Q),r[1]),e(i(t(k,f),-o[1]),i(t(B,g),l[1]))),-c[2]))),-a[3])))),e(e(e(i(e(e(i(e(i(t(D,W),a[1]),e(i(t(M,C),-l[1]),i(t(E,I),c[1]))),r[2]),i(e(i(t(D,W),r[1]),e(i(t(T,p),-l[1]),i(t(k,f),c[1]))),-a[2])),e(i(e(i(t(M,C),r[1]),e(i(t(T,p),-a[1]),i(t(v,d),c[1]))),l[2]),i(e(i(t(E,I),r[1]),e(i(t(k,f),-a[1]),i(t(v,d),l[1]))),-c[2]))),o[3]),i(e(e(i(e(i(t(H,U),a[1]),e(i(t(M,C),-o[1]),i(t(A,b),c[1]))),r[2]),i(e(i(t(H,U),r[1]),e(i(t(T,p),-o[1]),i(t(B,g),c[1]))),-a[2])),e(i(e(i(t(M,C),r[1]),e(i(t(T,p),-a[1]),i(t(v,d),c[1]))),o[2]),i(e(i(t(A,b),r[1]),e(i(t(B,g),-a[1]),i(t(v,d),o[1]))),-c[2]))),-l[3])),e(i(e(e(i(e(i(t(X,Q),a[1]),e(i(t(E,I),-o[1]),i(t(A,b),l[1]))),r[2]),i(e(i(t(X,Q),r[1]),e(i(t(k,f),-o[1]),i(t(B,g),l[1]))),-a[2])),e(i(e(i(t(E,I),r[1]),e(i(t(k,f),-a[1]),i(t(v,d),l[1]))),o[2]),i(e(i(t(A,b),r[1]),e(i(t(B,g),-a[1]),i(t(v,d),o[1]))),-l[2]))),c[3]),i(e(e(i(e(i(t(N,S),o[1]),e(i(t(X,Q),-s[1]),i(t(L,F),l[1]))),a[2]),i(e(i(t(N,S),a[1]),e(i(t(E,I),-s[1]),i(t(R,y),l[1]))),-o[2])),e(i(e(i(t(X,Q),a[1]),e(i(t(E,I),-o[1]),i(t(A,b),l[1]))),s[2]),i(e(i(t(L,F),a[1]),e(i(t(R,y),-o[1]),i(t(A,b),s[1]))),-l[2]))),r[3]))),e(e(i(e(e(i(e(i(t(N,S),o[1]),e(i(t(X,Q),-s[1]),i(t(L,F),l[1]))),r[2]),i(e(i(t(N,S),r[1]),e(i(t(k,f),-s[1]),i(t(G,h),l[1]))),-o[2])),e(i(e(i(t(X,Q),r[1]),e(i(t(k,f),-o[1]),i(t(B,g),l[1]))),s[2]),i(e(i(t(L,F),r[1]),e(i(t(G,h),-o[1]),i(t(B,g),s[1]))),-l[2]))),-a[3]),i(e(e(i(e(i(t(N,S),a[1]),e(i(t(E,I),-s[1]),i(t(R,y),l[1]))),r[2]),i(e(i(t(N,S),r[1]),e(i(t(k,f),-s[1]),i(t(G,h),l[1]))),-a[2])),e(i(e(i(t(E,I),r[1]),e(i(t(k,f),-a[1]),i(t(v,d),l[1]))),s[2]),i(e(i(t(R,y),r[1]),e(i(t(G,h),-a[1]),i(t(v,d),s[1]))),-l[2]))),o[3])),e(i(e(e(i(e(i(t(X,Q),a[1]),e(i(t(E,I),-o[1]),i(t(A,b),l[1]))),r[2]),i(e(i(t(X,Q),r[1]),e(i(t(k,f),-o[1]),i(t(B,g),l[1]))),-a[2])),e(i(e(i(t(E,I),r[1]),e(i(t(k,f),-a[1]),i(t(v,d),l[1]))),o[2]),i(e(i(t(A,b),r[1]),e(i(t(B,g),-a[1]),i(t(v,d),o[1]))),-l[2]))),-s[3]),i(e(e(i(e(i(t(L,F),a[1]),e(i(t(R,y),-o[1]),i(t(A,b),s[1]))),r[2]),i(e(i(t(L,F),r[1]),e(i(t(G,h),-o[1]),i(t(B,g),s[1]))),-a[2])),e(i(e(i(t(R,y),r[1]),e(i(t(G,h),-a[1]),i(t(v,d),s[1]))),o[2]),i(e(i(t(A,b),r[1]),e(i(t(B,g),-a[1]),i(t(v,d),o[1]))),-s[2]))),l[3]))))),J=t(z,O);return J[J.length-1]}return r}var m=[c,u,d];function v(e){var t=m[e.length];return t||(t=m[e.length]=l(e.length)),t.apply(void 0,e)}function b(e,t,n,i,r,a,o,s){function l(t,n,l,c,u,d){switch(arguments.length){case 0:case 1:return 0;case 2:return i(t,n);case 3:return r(t,n,l);case 4:return a(t,n,l,c);case 5:return o(t,n,l,c,u);case 6:return s(t,n,l,c,u,d)}for(var g=new Array(arguments.length),h=0;h<arguments.length;++h)g[h]=arguments[h];return e(g)}return l}function y(){for(;m.length<=s;)m.push(l(m.length));t.exports=b.apply(void 0,[v].concat(m));for(var e=0;e<=s;++e)t.exports[e]=m[e]}y()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(e,t,n){var i=e("robust-determinant"),r=3;function a(e){var t=2===e?l:c;return t(e<r?i[e]:i)}function o(){return[[0]]}function s(e,t){return[[t[0]],[e[0][0]]]}function l(e){return function(t,n){return[e([[+n[0],+t[0][1]],[+n[1],+t[1][1]]]),e([[+t[0][0],+n[0]],[+t[1][0],+n[1]]]),e(t)]}}function c(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2]],[+n[1],+t[1][1],+t[1][2]],[+n[2],+t[2][1],+t[2][2]]]),e([[+t[0][0],+n[0],+t[0][2]],[+t[1][0],+n[1],+t[1][2]],[+t[2][0],+n[2],+t[2][2]]]),e([[+t[0][0],+t[0][1],+n[0]],[+t[1][0],+t[1][1],+n[1]],[+t[2][0],+t[2][1],+n[2]]]),e(t)]}}var u=[o,s];function d(e,t,n,i,r,a){return function(o,s){switch(o.length){case 0:return e(o,s);case 1:return t(o,s);case 2:return n(o,s);case 3:return i(o,s)}var l=r[o.length];return l||(l=r[o.length]=a(o.length)),l(o,s)}}function g(){for(;u.length<=r;)u.push(a(u.length));t.exports=d.apply(void 0,u.concat([u,a]));for(var e=0;e<r;++e)t.exports[e]=u[e]}g()},{"robust-determinant":280}],284:[function(e,t,n){var i=e("two-product"),r=e("robust-sum"),a=e("robust-scale"),o=e("robust-subtract"),s=5,l=11102230246251565e-32,c=(3+16*l)*l,u=(7+56*l)*l;function d(e,t,n,i){return function(n,r,a){var o=e(e(t(r[1],a[0]),t(-a[1],r[0])),e(t(n[1],r[0]),t(-r[1],n[0]))),s=e(t(n[1],a[0]),t(-a[1],n[0])),l=i(o,s);return l[l.length-1]}}function g(e,t,n,i){return function(r,a,o,s){var l=e(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),r[2]),e(n(e(t(r[1],s[0]),t(-s[1],r[0])),-a[2]),n(e(t(r[1],a[0]),t(-a[1],r[0])),s[2])))),c=e(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),r[2]),e(n(e(t(r[1],s[0]),t(-s[1],r[0])),-o[2]),n(e(t(r[1],o[0]),t(-o[1],r[0])),s[2]))),e(n(e(t(a[1],o[0]),t(-o[1],a[0])),r[2]),e(n(e(t(r[1],o[0]),t(-o[1],r[0])),-a[2]),n(e(t(r[1],a[0]),t(-a[1],r[0])),o[2])))),u=i(l,c);return u[u.length-1]}}function h(e,t,n,i){return function(r,a,o,s,l){var c=e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),a[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),-o[3]),n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),s[3]))),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),-l[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),r[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),r[2]),e(n(e(t(r[1],l[0]),t(-l[1],r[0])),-s[2]),n(e(t(r[1],s[0]),t(-s[1],r[0])),l[2]))),-a[3])))),e(e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),r[2]),e(n(e(t(r[1],l[0]),t(-l[1],r[0])),-a[2]),n(e(t(r[1],a[0]),t(-a[1],r[0])),l[2]))),s[3]),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),r[2]),e(n(e(t(r[1],s[0]),t(-s[1],r[0])),-a[2]),n(e(t(r[1],a[0]),t(-a[1],r[0])),s[2]))),-l[3]),n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),a[2]),e(n(e(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),r[3]))),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),r[2]),e(n(e(t(r[1],s[0]),t(-s[1],r[0])),-o[2]),n(e(t(r[1],o[0]),t(-o[1],r[0])),s[2]))),-a[3]),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),r[2]),e(n(e(t(r[1],s[0]),t(-s[1],r[0])),-a[2]),n(e(t(r[1],a[0]),t(-a[1],r[0])),s[2]))),o[3]),n(e(n(e(t(a[1],o[0]),t(-o[1],a[0])),r[2]),e(n(e(t(r[1],o[0]),t(-o[1],r[0])),-a[2]),n(e(t(r[1],a[0]),t(-a[1],r[0])),o[2]))),-s[3]))))),u=e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),r[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),r[2]),e(n(e(t(r[1],l[0]),t(-l[1],r[0])),-s[2]),n(e(t(r[1],s[0]),t(-s[1],r[0])),l[2]))),-o[3])),e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),r[2]),e(n(e(t(r[1],l[0]),t(-l[1],r[0])),-o[2]),n(e(t(r[1],o[0]),t(-o[1],r[0])),l[2]))),s[3]),n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),r[2]),e(n(e(t(r[1],s[0]),t(-s[1],r[0])),-o[2]),n(e(t(r[1],o[0]),t(-o[1],r[0])),s[2]))),-l[3]))),e(e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),n(e(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),r[3]),n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),r[2]),e(n(e(t(r[1],l[0]),t(-l[1],r[0])),-o[2]),n(e(t(r[1],o[0]),t(-o[1],r[0])),l[2]))),-a[3])),e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),r[2]),e(n(e(t(r[1],l[0]),t(-l[1],r[0])),-a[2]),n(e(t(r[1],a[0]),t(-a[1],r[0])),l[2]))),o[3]),n(e(n(e(t(a[1],o[0]),t(-o[1],a[0])),r[2]),e(n(e(t(r[1],o[0]),t(-o[1],r[0])),-a[2]),n(e(t(r[1],a[0]),t(-a[1],r[0])),o[2]))),-l[3])))),d=i(c,u);return d[d.length-1]}}function f(e){return(3===e?d:4===e?g:h)(r,i,a,o)}var p=f(3),m=f(4),v=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var i,r=(e[1]-n[1])*(t[0]-n[0]),a=(e[0]-n[0])*(t[1]-n[1]),o=r-a;if(r>0){if(a<=0)return o;i=r+a}else{if(!(r<0))return o;if(a>=0)return o;i=-(r+a)}var s=c*i;return o>=s||o<=-s?o:p(e,t,n)},function(e,t,n,i){var r=e[0]-i[0],a=t[0]-i[0],o=n[0]-i[0],s=e[1]-i[1],l=t[1]-i[1],c=n[1]-i[1],d=e[2]-i[2],g=t[2]-i[2],h=n[2]-i[2],f=a*c,p=o*l,v=o*s,b=r*c,y=r*l,I=a*s,C=d*(f-p)+g*(v-b)+h*(y-I),x=(Math.abs(f)+Math.abs(p))*Math.abs(d)+(Math.abs(v)+Math.abs(b))*Math.abs(g)+(Math.abs(y)+Math.abs(I))*Math.abs(h),B=u*x;return C>B||-C>B?C:m(e,t,n,i)}];function b(e){var t=v[e.length];return t||(t=v[e.length]=f(e.length)),t.apply(void 0,e)}function y(e,t,n,i,r,a,o){return function(t,n,s,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return i(t,n);case 3:return r(t,n,s);case 4:return a(t,n,s,l);case 5:return o(t,n,s,l,c)}for(var u=new Array(arguments.length),d=0;d<arguments.length;++d)u[d]=arguments[d];return e(u)}}function I(){for(;v.length<=s;)v.push(f(v.length));t.exports=y.apply(void 0,[b].concat(v));for(var e=0;e<=s;++e)t.exports[e]=v[e]}I()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(e,t,n){var i=e("robust-sum"),r=e("robust-scale");function a(e,t){if(1===e.length)return r(t,e[0]);if(1===t.length)return r(e,t[0]);if(0===e.length||0===t.length)return[0];var n=[0];if(e.length<t.length)for(var a=0;a<e.length;++a)n=i(n,r(t,e[a]));else for(a=0;a<t.length;++a)n=i(n,r(e,t[a]));return n}t.exports=a},{"robust-scale":286,"robust-sum":289}],286:[function(e,t,n){var i=e("two-product"),r=e("two-sum");function a(e,t){var n=e.length;if(1===n){var a=i(e[0],t);return a[0]?a:[a[1]]}var o=new Array(2*n),s=[.1,.1],l=[.1,.1],c=0;i(e[0],t,s),s[0]&&(o[c++]=s[0]);for(var u=1;u<n;++u){i(e[u],t,l);var d=s[1];r(d,l[0],s),s[0]&&(o[c++]=s[0]);var g=l[1],h=s[1],f=g+h,p=h-(f-g);s[1]=f,p&&(o[c++]=p)}return s[1]&&(o[c++]=s[1]),0===c&&(o[c++]=0),o.length=c,o}t.exports=a},{"two-product":306,"two-sum":307}],287:[function(e,t,n){t.exports=a;var i=e("robust-orientation")[3];function r(e,t,n,i){for(var r=0;r<2;++r){var a=e[r],o=t[r],s=Math.min(a,o),l=Math.max(a,o),c=n[r],u=i[r],d=Math.min(c,u);if(Math.max(c,u)<s||l<d)return!1}return!0}function a(e,t,n,a){var o=i(e,n,a),s=i(t,n,a);if(o>0&&s>0||o<0&&s<0)return!1;var l=i(n,e,t),c=i(a,e,t);return!(l>0&&c>0||l<0&&c<0)&&(0!==o||0!==s||0!==l||0!==c||r(e,t,n,a))}},{"robust-orientation":284}],288:[function(e,t,n){function i(e,t){var n=e+t,i=n-e,r=e-(n-i)+(t-i);return r?[r,n]:[n]}function r(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return i(e[0],-t[0]);var a,o,s=new Array(n+r),l=0,c=0,u=0,d=Math.abs,g=e[c],h=d(g),f=-t[u],p=d(f);h<p?(o=g,(c+=1)<n&&(h=d(g=e[c]))):(o=f,(u+=1)<r&&(p=d(f=-t[u]))),c<n&&h<p||u>=r?(a=g,(c+=1)<n&&(h=d(g=e[c]))):(a=f,(u+=1)<r&&(p=d(f=-t[u])));for(var m,v,b=a+o,y=b-a,I=o-y,C=I,x=b;c<n&&u<r;)h<p?(a=g,(c+=1)<n&&(h=d(g=e[c]))):(a=f,(u+=1)<r&&(p=d(f=-t[u]))),(I=(o=C)-(y=(b=a+o)-a))&&(s[l++]=I),C=x-((m=x+b)-(v=m-x))+(b-v),x=m;for(;c<n;)(I=(o=C)-(y=(b=(a=g)+o)-a))&&(s[l++]=I),C=x-((m=x+b)-(v=m-x))+(b-v),x=m,(c+=1)<n&&(g=e[c]);for(;u<r;)(I=(o=C)-(y=(b=(a=f)+o)-a))&&(s[l++]=I),C=x-((m=x+b)-(v=m-x))+(b-v),x=m,(u+=1)<r&&(f=-t[u]);return C&&(s[l++]=C),x&&(s[l++]=x),l||(s[l++]=0),s.length=l,s}t.exports=r},{}],289:[function(e,t,n){function i(e,t){var n=e+t,i=n-e,r=e-(n-i)+(t-i);return r?[r,n]:[n]}function r(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return i(e[0],t[0]);var a,o,s=new Array(n+r),l=0,c=0,u=0,d=Math.abs,g=e[c],h=d(g),f=t[u],p=d(f);h<p?(o=g,(c+=1)<n&&(h=d(g=e[c]))):(o=f,(u+=1)<r&&(p=d(f=t[u]))),c<n&&h<p||u>=r?(a=g,(c+=1)<n&&(h=d(g=e[c]))):(a=f,(u+=1)<r&&(p=d(f=t[u])));for(var m,v,b=a+o,y=b-a,I=o-y,C=I,x=b;c<n&&u<r;)h<p?(a=g,(c+=1)<n&&(h=d(g=e[c]))):(a=f,(u+=1)<r&&(p=d(f=t[u]))),(I=(o=C)-(y=(b=a+o)-a))&&(s[l++]=I),C=x-((m=x+b)-(v=m-x))+(b-v),x=m;for(;c<n;)(I=(o=C)-(y=(b=(a=g)+o)-a))&&(s[l++]=I),C=x-((m=x+b)-(v=m-x))+(b-v),x=m,(c+=1)<n&&(g=e[c]);for(;u<r;)(I=(o=C)-(y=(b=(a=f)+o)-a))&&(s[l++]=I),C=x-((m=x+b)-(v=m-x))+(b-v),x=m,(u+=1)<r&&(f=t[u]);return C&&(s[l++]=C),x&&(s[l++]=x),l||(s[l++]=0),s.length=l,s}t.exports=r},{}],290:[function(e,t,n){t.exports=a;var i=e("boundary-cells"),r=e("reduce-simplicial-complex");function a(e){return r(i(e))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(e,t,n){t.exports=h;var i=e("ndarray"),r=e("typedarray-pool"),a=e("ndarray-sort"),o=e("./lib/codegen");function s(e){for(var t=e.length,n=0,i=0;i<t;++i)n=0|Math.max(n,e[i].length);return n-1}function l(e,t){for(var n=e.length,i=r.mallocUint8(n),a=0;a<n;++a)i[a]=e[a]<t|0;return i}function c(e,t){for(var n=e.length,o=t*(t+1)/2*n|0,s=r.mallocUint32(2*o),l=0,c=0;c<n;++c)for(var u=e[c],d=(t=u.length,0);d<t;++d)for(var g=0;g<d;++g){var h=u[g],f=u[d];s[l++]=0|Math.min(h,f),s[l++]=0|Math.max(h,f)}a(i(s,[l/2|0,2]));var p=2;for(c=2;c<l;c+=2)s[c-2]===s[c]&&s[c-1]===s[c+1]||(s[p++]=s[c],s[p++]=s[c+1]);return i(s,[p/2|0,2])}function u(e,t,n,a){for(var o=e.data,s=e.shape[0],l=r.mallocDouble(s),c=0,u=0;u<s;++u){var d=o[2*u],g=o[2*u+1];if(n[d]!==n[g]){var h=t[d],f=t[g];o[2*c]=d,o[2*c+1]=g,l[c++]=(f-a)/(f-h)}}return e.shape[0]=c,i(l,[c])}function d(e,t){var n=r.mallocInt32(2*t),i=e.shape[0],a=e.data;n[0]=0;for(var o=0,s=0;s<i;++s){var l=a[2*s];if(l!==o){for(n[2*o+1]=s;++o<l;)n[2*o]=s,n[2*o+1]=s;n[2*o]=s}}for(n[2*o+1]=i;++o<t;)n[2*o]=n[2*o+1]=i;return n}function g(e){for(var t=0|e.shape[0],n=e.data,i=new Array(t),r=0;r<t;++r)i[r]=[n[2*r],n[2*r+1]];return i}function h(e,t,n,i){if(n=n||0,void 0===i&&(i=s(e)),0===e.length||i<1)return{cells:[],vertexIds:[],vertexWeights:[]};var a=l(t,+n),h=c(e,i),f=u(h,t,a,+n),p=d(h,0|t.length),m=o(i)(e,h.data,p,a),v=g(h),b=[].slice.call(f.data,0,f.shape[0]);return r.free(a),r.free(h.data),r.free(f.data),r.free(p),{cells:m,vertexIds:v,vertexWeights:b}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(e,t,n){t.exports=r;var i=[function(){function e(e,t,n,i){for(var r=e.length,a=[],o=0;o<r;++o)e[o].length;return a}return e},function(){function e(e,t,n,i){for(var r=0|Math.min(n,i),a=0|Math.max(n,i),o=e[2*r],s=e[2*r+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}function t(t,n,i,r){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s];if(2===l.length){var c=(r[l[0]]<<0)+(r[l[1]]<<1);if(0===c||3===c)continue;switch(c){case 0:break;case 1:o.push([e(i,n,l[0],l[1])]);break;case 2:o.push([e(i,n,l[1],l[0])])}}}return o}return t},function(){function e(e,t,n,i){for(var r=0|Math.min(n,i),a=0|Math.max(n,i),o=e[2*r],s=e[2*r+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}function t(t,n,i,r){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s],c=l.length;if(3===c){if(0==(u=(r[l[0]]<<0)+(r[l[1]]<<1)+(r[l[2]]<<2))||7===u)continue;switch(u){case 0:break;case 1:o.push([e(i,n,l[0],l[2]),e(i,n,l[0],l[1])]);break;case 2:o.push([e(i,n,l[1],l[0]),e(i,n,l[1],l[2])]);break;case 3:o.push([e(i,n,l[0],l[2]),e(i,n,l[1],l[2])]);break;case 4:o.push([e(i,n,l[2],l[1]),e(i,n,l[2],l[0])]);break;case 5:o.push([e(i,n,l[2],l[1]),e(i,n,l[0],l[1])]);break;case 6:o.push([e(i,n,l[1],l[0]),e(i,n,l[2],l[0])])}}else if(2===c){var u;if(0==(u=(r[l[0]]<<0)+(r[l[1]]<<1))||3===u)continue;switch(u){case 0:break;case 1:o.push([e(i,n,l[0],l[1])]);break;case 2:o.push([e(i,n,l[1],l[0])])}}}return o}return t},function(){function e(e,t,n,i){for(var r=0|Math.min(n,i),a=0|Math.max(n,i),o=e[2*r],s=e[2*r+1];o<s;){var l=o+s>>1,c=t[2*l+1];if(c===a)return l;a<c?s=l:o=l+1}return o}function t(t,n,i,r){for(var a=t.length,o=[],s=0;s<a;++s){var l=t[s],c=l.length;if(4===c){if(0==(u=(r[l[0]]<<0)+(r[l[1]]<<1)+(r[l[2]]<<2)+(r[l[3]]<<3))||15===u)continue;switch(u){case 0:break;case 1:o.push([e(i,n,l[0],l[1]),e(i,n,l[0],l[2]),e(i,n,l[0],l[3])]);break;case 2:o.push([e(i,n,l[1],l[2]),e(i,n,l[1],l[0]),e(i,n,l[1],l[3])]);break;case 3:o.push([e(i,n,l[1],l[2]),e(i,n,l[0],l[2]),e(i,n,l[0],l[3])],[e(i,n,l[1],l[3]),e(i,n,l[1],l[2]),e(i,n,l[0],l[3])]);break;case 4:o.push([e(i,n,l[2],l[0]),e(i,n,l[2],l[1]),e(i,n,l[2],l[3])]);break;case 5:o.push([e(i,n,l[0],l[1]),e(i,n,l[2],l[1]),e(i,n,l[0],l[3])],[e(i,n,l[2],l[1]),e(i,n,l[2],l[3]),e(i,n,l[0],l[3])]);break;case 6:o.push([e(i,n,l[2],l[0]),e(i,n,l[1],l[0]),e(i,n,l[1],l[3])],[e(i,n,l[2],l[3]),e(i,n,l[2],l[0]),e(i,n,l[1],l[3])]);break;case 7:o.push([e(i,n,l[0],l[3]),e(i,n,l[1],l[3]),e(i,n,l[2],l[3])]);break;case 8:o.push([e(i,n,l[3],l[1]),e(i,n,l[3],l[0]),e(i,n,l[3],l[2])]);break;case 9:o.push([e(i,n,l[3],l[1]),e(i,n,l[0],l[1]),e(i,n,l[0],l[2])],[e(i,n,l[3],l[2]),e(i,n,l[3],l[1]),e(i,n,l[0],l[2])]);break;case 10:o.push([e(i,n,l[1],l[0]),e(i,n,l[3],l[0]),e(i,n,l[1],l[2])],[e(i,n,l[3],l[0]),e(i,n,l[3],l[2]),e(i,n,l[1],l[2])]);break;case 11:o.push([e(i,n,l[1],l[2]),e(i,n,l[0],l[2]),e(i,n,l[3],l[2])]);break;case 12:o.push([e(i,n,l[3],l[0]),e(i,n,l[2],l[0]),e(i,n,l[2],l[1])],[e(i,n,l[3],l[1]),e(i,n,l[3],l[0]),e(i,n,l[2],l[1])]);break;case 13:o.push([e(i,n,l[0],l[1]),e(i,n,l[2],l[1]),e(i,n,l[3],l[1])]);break;case 14:o.push([e(i,n,l[2],l[0]),e(i,n,l[1],l[0]),e(i,n,l[3],l[0])])}}else if(3===c){if(0==(u=(r[l[0]]<<0)+(r[l[1]]<<1)+(r[l[2]]<<2))||7===u)continue;switch(u){case 0:break;case 1:o.push([e(i,n,l[0],l[2]),e(i,n,l[0],l[1])]);break;case 2:o.push([e(i,n,l[1],l[0]),e(i,n,l[1],l[2])]);break;case 3:o.push([e(i,n,l[0],l[2]),e(i,n,l[1],l[2])]);break;case 4:o.push([e(i,n,l[2],l[1]),e(i,n,l[2],l[0])]);break;case 5:o.push([e(i,n,l[2],l[1]),e(i,n,l[0],l[1])]);break;case 6:o.push([e(i,n,l[1],l[0]),e(i,n,l[2],l[0])])}}else if(2===c){var u;if(0==(u=(r[l[0]]<<0)+(r[l[1]]<<1))||3===u)continue;switch(u){case 0:break;case 1:o.push([e(i,n,l[0],l[1])]);break;case 2:o.push([e(i,n,l[1],l[0])])}}}return o}return t}];function r(e){return i[e]()}},{}],293:[function(e,t,n){var i=e("bit-twiddle"),r=e("union-find");function a(e){for(var t=0,n=Math.max,i=0,r=e.length;i<r;++i)t=n(t,e[i].length);return t-1}function o(e){for(var t=-1,n=Math.max,i=0,r=e.length;i<r;++i)for(var a=e[i],o=0,s=a.length;o<s;++o)t=n(t,a[o]);return t+1}function s(e){for(var t=new Array(e.length),n=0,i=e.length;n<i;++n)t[n]=e[n].slice(0);return t}function l(e,t){var n=e.length,i=e.length-t.length,r=Math.min;if(i)return i;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return(s=e[0]+e[1]-t[0]-t[1])||r(e[0],e[1])-r(t[0],t[1]);case 3:var a=e[0]+e[1],o=t[0]+t[1];if(s=a+e[2]-(o+t[2]))return s;var s,l=r(e[0],e[1]),c=r(t[0],t[1]);return(s=r(l,e[2])-r(c,t[2]))||r(l+e[2],a)-r(c+t[2],o);default:var u=e.slice(0);u.sort();var d=t.slice(0);d.sort();for(var g=0;g<n;++g)if(i=u[g]-d[g])return i;return 0}}function c(e,t){return l(e[0],t[0])}function u(e,t){if(t){for(var n=e.length,i=new Array(n),r=0;r<n;++r)i[r]=[e[r],t[r]];for(i.sort(c),r=0;r<n;++r)e[r]=i[r][0],t[r]=i[r][1];return e}return e.sort(l),e}function d(e){if(0===e.length)return[];for(var t=1,n=e.length,i=1;i<n;++i){var r=e[i];if(l(r,e[i-1])){if(i===t){t++;continue}e[t++]=r}}return e.length=t,e}function g(e,t){for(var n=0,i=e.length-1,r=-1;n<=i;){var a=n+i>>1,o=l(e[a],t);o<=0?(0===o&&(r=a),n=a+1):o>0&&(i=a-1)}return r}function h(e,t){for(var n=new Array(e.length),r=0,a=n.length;r<a;++r)n[r]=[];for(var o=[],s=(r=0,t.length);r<s;++r)for(var c=t[r],u=c.length,d=1,h=1<<u;d<h;++d){o.length=i.popCount(d);for(var f=0,p=0;p<u;++p)d&1<<p&&(o[f++]=c[p]);var m=g(e,o);if(!(m<0))for(;n[m++].push(r),!(m>=e.length||0!==l(e[m],o)););}return n}function f(e,t){if(!t)return h(d(m(e,0)),e);for(var n=new Array(t),i=0;i<t;++i)n[i]=[];i=0;for(var r=e.length;i<r;++i)for(var a=e[i],o=0,s=a.length;o<s;++o)n[a[o]].push(i);return n}function p(e){for(var t=[],n=0,i=e.length;n<i;++n)for(var r=e[n],a=0|r.length,o=1,s=1<<a;o<s;++o){for(var l=[],c=0;c<a;++c)o>>>c&1&&l.push(r[c]);t.push(l)}return u(t)}function m(e,t){if(t<0)return[];for(var n=[],r=(1<<t+1)-1,a=0;a<e.length;++a)for(var o=e[a],s=r;s<1<<o.length;s=i.nextCombination(s)){for(var l=new Array(t+1),c=0,d=0;d<o.length;++d)s&1<<d&&(l[c++]=o[d]);n.push(l)}return u(n)}function v(e){for(var t=[],n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length;a<o;++a){for(var s=new Array(r.length-1),l=0,c=0;l<o;++l)l!==a&&(s[c++]=r[l]);t.push(s)}return u(t)}function b(e,t){for(var n=new r(t),i=0;i<e.length;++i)for(var a=e[i],o=0;o<a.length;++o)for(var s=o+1;s<a.length;++s)n.link(a[o],a[s]);var l=[],c=n.ranks;for(i=0;i<c.length;++i)c[i]=-1;for(i=0;i<e.length;++i){var u=n.find(e[i][0]);c[u]<0?(c[u]=l.length,l.push([e[i].slice(0)])):l[c[u]].push(e[i].slice(0))}return l}function y(e){for(var t=d(u(m(e,0))),n=new r(t.length),i=0;i<e.length;++i)for(var a=e[i],o=0;o<a.length;++o)for(var s=g(t,[a[o]]),l=o+1;l<a.length;++l)n.link(s,g(t,[a[l]]));var c=[],h=n.ranks;for(i=0;i<h.length;++i)h[i]=-1;for(i=0;i<e.length;++i){var f=n.find(g(t,[e[i][0]]));h[f]<0?(h[f]=c.length,c.push([e[i].slice(0)])):c[h[f]].push(e[i].slice(0))}return c}function I(e,t){return t?b(e,t):y(e)}n.dimension=a,n.countVertices=o,n.cloneCells=s,n.compareCells=l,n.normalize=u,n.unique=d,n.findCell=g,n.incidence=h,n.dual=f,n.explode=p,n.skeleton=m,n.boundary=v,n.connectedComponents=I},{"bit-twiddle":32,"union-find":309}],294:[function(e,t,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],295:[function(e,t,n){arguments[4][293][0].apply(n,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(e,t,n){function i(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=i,i.prototype.length=function(){return this.roots.length},i.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},i.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var n=t[e];t[e]=t[n],e=n}return e},i.prototype.link=function(e,t){var n=this.find(e),i=this.find(t);if(n!==i){var r=this.ranks,a=this.roots,o=r[n],s=r[i];o<s?a[n]=i:s<o?a[i]=n:(a[i]=n,++r[n])}}},{}],297:[function(e,t,n){t.exports=o;var i=e("robust-orientation"),r=e("simplicial-complex");function a(e,t,n){return Math.abs(i(e,t,n))/Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}function o(e,t,n){for(var i=t.length,o=e.length,s=new Array(i),l=new Array(i),c=new Array(i),u=new Array(i),d=0;d<i;++d)s[d]=l[d]=-1,c[d]=1/0,u[d]=!1;for(d=0;d<o;++d){var g=e[d];if(2!==g.length)throw new Error("Input must be a graph");var h=g[1],f=g[0];-1!==l[f]?l[f]=-2:l[f]=h,-1!==s[h]?s[h]=-2:s[h]=f}function p(e){if(u[e])return 1/0;var n=s[e],i=l[e];return n<0||i<0?1/0:a(t[e],t[n],t[i])}function m(e,t){var n=A[e],i=A[t];A[e]=i,A[t]=n,F[n]=t,F[i]=e}function v(e){return c[A[e]]}function b(e){return 1&e?e-1>>1:(e>>1)-1}function y(e){for(var t=v(e);;){var n=t,i=2*e+1,r=2*(e+1),a=e;if(i<Q){var o=v(i);o<n&&(a=i,n=o)}if(r<Q&&v(r)<n&&(a=r),a===e)return e;m(e,a),e=a}}function I(e){for(var t=v(e);e>0;){var n=b(e);if(!(n>=0&&t<v(n)))return e;m(e,n),e=n}}function C(){if(Q>0){var e=A[0];return m(0,Q-1),Q-=1,y(0),e}return-1}function x(e,t){var n=A[e];return c[n]===t?e:(c[n]=-1/0,I(e),C(),c[n]=t,I((Q+=1)-1))}function B(e){if(!u[e]){u[e]=!0;var t=s[e],n=l[e];s[n]>=0&&(s[n]=t),l[t]>=0&&(l[t]=n),F[t]>=0&&x(F[t],p(t)),F[n]>=0&&x(F[n],p(n))}}var A=[],F=new Array(i);for(d=0;d<i;++d)(c[d]=p(d))<1/0?(F[d]=A.length,A.push(d)):F[d]=-1;var Q=A.length;for(d=Q>>1;d>=0;--d)y(d);for(;;){var U=C();if(U<0||c[U]>n)break;B(U)}var w=[];for(d=0;d<i;++d)u[d]||(F[d]=w.length,w.push(t[d].slice()));function G(e,t){if(e[t]<0)return t;var n=t,i=t;do{var r=e[i];if(!u[i]||r<0||r===i)break;if(r=e[i=r],!u[i]||r<0||r===i)break;i=r,n=e[n]}while(n!==i);for(var a=t;a!==i;a=e[a])e[a]=i;return i}w.length;var R=[];return e.forEach((function(e){var t=G(s,e[0]),n=G(l,e[1]);if(t>=0&&n>=0&&t!==n){var i=F[t],r=F[n];i!==r&&R.push([i,r])}})),r.unique(r.normalize(R)),{positions:w,edges:R}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(e,t,n){t.exports=a;var i=e("robust-orientation");function r(e,t){var n,r,a,o;if(t[0][0]<t[1][0])n=t[0],r=t[1];else{if(!(t[0][0]>t[1][0])){var s=Math.min(e[0][1],e[1][1]),l=Math.max(e[0][1],e[1][1]),c=Math.min(t[0][1],t[1][1]),u=Math.max(t[0][1],t[1][1]);return l<c?l-c:s>u?s-u:l-u}n=t[1],r=t[0]}e[0][1]<e[1][1]?(a=e[0],o=e[1]):(a=e[1],o=e[0]);var d=i(r,n,a);return d||(d=i(r,n,o))||o-r}function a(e,t){var n,a,o,s;if(t[0][0]<t[1][0])n=t[0],a=t[1];else{if(!(t[0][0]>t[1][0]))return r(t,e);n=t[1],a=t[0]}if(e[0][0]<e[1][0])o=e[0],s=e[1];else{if(!(e[0][0]>e[1][0]))return-r(e,t);o=e[1],s=e[0]}var l=i(n,a,s),c=i(n,a,o);if(l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;if(l=i(s,o,a),c=i(s,o,n),l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;return a[0]-s[0]}},{"robust-orientation":284}],299:[function(e,t,n){t.exports=g;var i=e("binary-search-bounds"),r=e("functional-red-black-tree"),a=e("robust-orientation"),o=e("./lib/order-segments");function s(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function l(e,t){return e.y-t}function c(e,t){for(var n=null;e;){var i,r,o=e.key;o[0][0]<o[1][0]?(i=o[0],r=o[1]):(i=o[1],r=o[0]);var s=a(i,r,t);if(s<0)e=e.left;else if(s>0)if(t[0]!==o[1][0])n=e,e=e.right;else{if(l=c(e.right,t))return l;e=e.left}else{if(t[0]!==o[1][0])return e;var l;if(l=c(e.right,t))return l;e=e.left}}return n}function u(e,t,n,i){this.y=e,this.index=t,this.start=n,this.closed=i}function d(e,t,n,i){this.x=e,this.segment=t,this.create=n,this.index=i}function g(e){for(var t=e.length,n=2*t,i=new Array(n),a=0;a<t;++a){var l=e[a],c=l[0][0]<l[1][0];i[2*a]=new d(l[0][0],l,c,a),i[2*a+1]=new d(l[1][0],l,!c,a)}i.sort((function(e,t){var n=e.x-t.x;return n||(n=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1])}));var g=r(o),h=[],f=[],p=[];for(a=0;a<n;){for(var m=i[a].x,v=[];a<n;){var b=i[a];if(b.x!==m)break;a+=1,b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(v.push(new u(b.segment[0][1],b.index,!0,!0)),v.push(new u(b.segment[1][1],b.index,!1,!1))):(v.push(new u(b.segment[1][1],b.index,!0,!1)),v.push(new u(b.segment[0][1],b.index,!1,!0)))):g=b.create?g.insert(b.segment,b.index):g.remove(b.segment)}h.push(g.root),f.push(m),p.push(v)}return new s(h,f,p)}s.prototype.castUp=function(e){var t=i.le(this.coordinates,e[0]);if(t<0)return-1;this.slabs[t];var n=c(this.slabs[t],e),r=-1;if(n&&(r=n.value),this.coordinates[t]===e[0]){var s=null;if(n&&(s=n.key),t>0){var u=c(this.slabs[t-1],e);u&&(s?o(u.key,s)>0&&(s=u.key,r=u.value):(r=u.value,s=u.key))}var d=this.horizontal[t];if(d.length>0){var g=i.ge(d,e[1],l);if(g<d.length){var h=d[g];if(e[1]===h.y){if(h.closed)return h.index;for(;g<d.length-1&&d[g+1].y===e[1];)if((h=d[g+=1]).closed)return h.index;if(h.y===e[1]&&!h.start){if((g+=1)>=d.length)return r;h=d[g]}}if(h.start)if(s){var f=a(s[0],s[1],[e[0],h.y]);s[0][0]>s[1][0]&&(f=-f),f>0&&(r=h.index)}else r=h.index;else h.y!==e[1]&&(r=h.index)}}}return r}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(e,t,n){var i=e("robust-dot-product"),r=e("robust-sum");function a(e,t){var n=r(i(e,t),[t[t.length-1]]);return n[n.length-1]}function o(e,t,n,i){var r=-t/(i-t);r<0?r=0:r>1&&(r=1);for(var a=1-r,o=e.length,s=new Array(o),l=0;l<o;++l)s[l]=r*e[l]+a*n[l];return s}function s(e,t){for(var n=[],i=[],r=a(e[e.length-1],t),s=e[e.length-1],l=e[0],c=0;c<e.length;++c,s=l){var u=a(l=e[c],t);if(r<0&&u>0||r>0&&u<0){var d=o(s,u,l,r);n.push(d),i.push(d.slice())}u<0?i.push(l.slice()):u>0?n.push(l.slice()):(n.push(l.slice()),i.push(l.slice())),r=u}return{positive:n,negative:i}}function l(e,t){for(var n=[],i=a(e[e.length-1],t),r=e[e.length-1],s=e[0],l=0;l<e.length;++l,r=s){var c=a(s=e[l],t);(i<0&&c>0||i>0&&c<0)&&n.push(o(r,c,s,i)),c>=0&&n.push(s.slice()),i=c}return n}function c(e,t){for(var n=[],i=a(e[e.length-1],t),r=e[e.length-1],s=e[0],l=0;l<e.length;++l,r=s){var c=a(s=e[l],t);(i<0&&c>0||i>0&&c<0)&&n.push(o(r,c,s,i)),c<=0&&n.push(s.slice()),i=c}return n}t.exports=s,t.exports.positive=l,t.exports.negative=c},{"robust-dot-product":281,"robust-sum":289}],301:[function(e,t,n){!function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(e){return a(s(e),arguments)}function r(e,n){return t.apply(null,[e].concat(n||[]))}function a(n,r){var a,o,s,l,c,u,d,g,h,f=1,p=n.length,m="";for(o=0;o<p;o++)if("string"==typeof n[o])m+=n[o];else if("object"===i(n[o])){if((l=n[o]).keys)for(a=r[f],s=0;s<l.keys.length;s++){if(null==a)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',l.keys[s],l.keys[s-1]));a=a[l.keys[s]]}else a=l.param_no?r[l.param_no]:r[f++];if(e.not_type.test(l.type)&&e.not_primitive.test(l.type)&&a instanceof Function&&(a=a()),e.numeric_arg.test(l.type)&&"number"!=typeof a&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %T",a));switch(e.number.test(l.type)&&(g=a>=0),l.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,l.width?parseInt(l.width):0);break;case"e":a=l.precision?parseFloat(a).toExponential(l.precision):parseFloat(a).toExponential();break;case"f":a=l.precision?parseFloat(a).toFixed(l.precision):parseFloat(a);break;case"g":a=l.precision?String(Number(a.toPrecision(l.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=l.precision?a.substring(0,l.precision):a;break;case"t":a=String(!!a),a=l.precision?a.substring(0,l.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=l.precision?a.substring(0,l.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=l.precision?a.substring(0,l.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}e.json.test(l.type)?m+=a:(!e.number.test(l.type)||g&&!l.sign?h="":(h=g?"+":"-",a=a.toString().replace(e.sign,"")),u=l.pad_char?"0"===l.pad_char?"0":l.pad_char.charAt(1):" ",d=l.width-(h+a).length,c=l.width&&d>0?u.repeat(d):"",m+=l.align?h+a+c:"0"===u?h+c+a:c+h+a)}return m}var o=Object.create(null);function s(t){if(o[t])return o[t];for(var n,i=t,r=[],a=0;i;){if(null!==(n=e.text.exec(i)))r.push(n[0]);else if(null!==(n=e.modulo.exec(i)))r.push("%");else{if(null===(n=e.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){a|=1;var s=[],l=n[2],c=[];if(null===(c=e.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=e.key_access.exec(l)))s.push(c[1]);else{if(null===(c=e.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1])}n[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}i=i.substring(n[0].length)}return o[t]=r}void 0!==n&&(n.sprintf=t,n.vsprintf=r),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=r)}()},{}],302:[function(e,t,n){t.exports=c;var i=e("ndarray-extract-contour"),r=e("zero-crossings"),a={"2d":function(e,t,n){var i=e({order:t,scalarArguments:3,getters:"generic"===n?[0]:void 0,phase:function(e,t,n,i){return e>i|0},vertex:function(e,t,n,i,r,a,o,s,l,c,u,d,g){var h=(o<<0)+(s<<1)+(l<<2)+(c<<3)|0;if(0!==h&&15!==h)switch(h){case 0:case 15:u.push([e-.5,t-.5]);break;case 1:u.push([e-.25-.25*(i+n-2*g)/(n-i),t-.25-.25*(r+n-2*g)/(n-r)]);break;case 2:u.push([e-.75-.25*(-i-n+2*g)/(i-n),t-.25-.25*(a+i-2*g)/(i-a)]);break;case 3:u.push([e-.5,t-.5-.5*(r+n+a+i-4*g)/(n-r+i-a)]);break;case 4:u.push([e-.25-.25*(a+r-2*g)/(r-a),t-.75-.25*(-r-n+2*g)/(r-n)]);break;case 5:u.push([e-.5-.5*(i+n+a+r-4*g)/(n-i+r-a),t-.5]);break;case 6:u.push([e-.5-.25*(-i-n+a+r)/(i-n+r-a),t-.5-.25*(-r-n+a+i)/(r-n+i-a)]);break;case 7:u.push([e-.75-.25*(a+r-2*g)/(r-a),t-.75-.25*(a+i-2*g)/(i-a)]);break;case 8:u.push([e-.75-.25*(-a-r+2*g)/(a-r),t-.75-.25*(-a-i+2*g)/(a-i)]);break;case 9:u.push([e-.5-.25*(i+n+-a-r)/(n-i+a-r),t-.5-.25*(r+n+-a-i)/(n-r+a-i)]);break;case 10:u.push([e-.5-.5*(-i-n-a-r+4*g)/(i-n+a-r),t-.5]);break;case 11:u.push([e-.25-.25*(-a-r+2*g)/(a-r),t-.75-.25*(r+n-2*g)/(n-r)]);break;case 12:u.push([e-.5,t-.5-.5*(-r-n-a-i+4*g)/(r-n+a-i)]);break;case 13:u.push([e-.75-.25*(i+n-2*g)/(n-i),t-.25-.25*(-a-i+2*g)/(a-i)]);break;case 14:u.push([e-.25-.25*(-i-n+2*g)/(i-n),t-.25-.25*(-r-n+2*g)/(r-n)])}},cell:function(e,t,n,i,r,a,o,s,l){r?s.push([e,t]):s.push([t,e])}});return function(e,t){var n=[],r=[];return i(e,n,r,t),{positions:n,cells:r}}}};function o(e,t){var n=e.length+"d",r=a[n];if(r)return r(i,e,t)}function s(e,t){for(var n=r(e,t),i=n.length,a=new Array(i),o=new Array(i),s=0;s<i;++s)a[s]=[n[s]],o[s]=[s];return{positions:a,cells:o}}var l={};function c(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return s(e,t);var n=e.order.join()+"-"+e.dtype,i=l[n];return t=+t||0,i||(i=l[n]=o(e.order,e.dtype)),i(e,t)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(e,t,n){(function(n){(function(){t.exports=s;var i=e("vectorize-text"),r=window||n.global||{},a=r.__TEXT_CACHE||{};function o(e){for(var t=e.cells,n=e.positions,i=new Float32Array(6*t.length),r=0,a=0,o=0;o<t.length;++o)for(var s=t[o],l=0;l<3;++l){var c=n[s[l]];i[r++]=c[0],i[r++]=c[1]+1.4,a=Math.max(c[0],a)}return{data:i,shape:a}}function s(e,t,n){n=n||{};var r=a[e];r||(r=a[e]={" ":{data:new Float32Array(0),shape:.2}});var l=r[t];if(!l)if(t.length<=1||!/\d/.test(t))l=r[t]=o(i(t,{triangles:!0,font:e,textAlign:n.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var c=t.split(/(\d|\s)/),u=new Array(c.length),d=0,g=0,h=0;h<c.length;++h)u[h]=s(e,c[h]),d+=u[h].data.length,g+=u[h].shape,h>0&&(g+=.02);var f=new Float32Array(d),p=0,m=-.5*g;for(h=0;h<u.length;++h){for(var v=u[h].data,b=0;b<v.length;b+=2)f[p++]=v[b]+m,f[p++]=v[b+1];m+=u[h].shape+.02}l=r[t]={data:f,shape:g}}return l}r.__TEXT_CACHE={}}).call(this)}).call(this,e("_process"))},{_process:5,"vectorize-text":311}],304:[function(e,t,n){var i=e("parse-unit");t.exports=s;var r=96;function a(e,t){var n=i(getComputedStyle(e).getPropertyValue(t));return n[0]*s(n[1],e)}function o(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var i=a(n,"font-size")/128;return t.removeChild(n),i}function s(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},{"parse-unit":265}],305:[function(e,t,n){t.exports=p;var i=e("filtered-vector"),r=e("gl-mat4/invert"),a=e("gl-mat4/rotate"),o=e("gl-vec3/cross"),s=e("gl-vec3/normalize"),l=e("gl-vec3/dot");function c(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function u(e){return Math.min(1,Math.max(-1,e))}function d(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),i=Math.abs(e[2]),r=[0,0,0];t>Math.max(n,i)?r[2]=1:n>Math.max(t,i)?r[0]=1:r[1]=1;for(var a=0,o=0,l=0;l<3;++l)a+=e[l]*e[l],o+=r[l]*e[l];for(l=0;l<3;++l)r[l]-=o/a*e[l];return s(r,r),r}function g(e,t,n,r,a,o,s,l){this.center=i(n),this.up=i(r),this.right=i(a),this.radius=i([o]),this.angle=i([s,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var c=0;c<16;++c)this.computedMatrix[c]=.5;this.recalcMatrix(0)}var h=g.prototype;h.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},h.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},h.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,n=this.computedRight,i=0,r=0,a=0;a<3;++a)r+=t[a]*n[a],i+=t[a]*t[a];var l=Math.sqrt(i),u=0;for(a=0;a<3;++a)n[a]-=t[a]*r/i,u+=n[a]*n[a],t[a]/=l;var d=Math.sqrt(u);for(a=0;a<3;++a)n[a]/=d;var g=this.computedToward;o(g,t,n),s(g,g);var h=Math.exp(this.computedRadius[0]),f=this.computedAngle[0],p=this.computedAngle[1],m=Math.cos(f),v=Math.sin(f),b=Math.cos(p),y=Math.sin(p),I=this.computedCenter,C=m*b,x=v*b,B=y,A=-m*y,F=-v*y,Q=b,U=this.computedEye,w=this.computedMatrix;for(a=0;a<3;++a){var G=C*n[a]+x*g[a]+B*t[a];w[4*a+1]=A*n[a]+F*g[a]+Q*t[a],w[4*a+2]=G,w[4*a+3]=0}var R=w[1],L=w[5],S=w[9],V=w[2],Z=w[6],k=w[10],E=L*k-S*Z,X=S*V-R*k,N=R*Z-L*V,W=c(E,X,N);for(E/=W,X/=W,N/=W,w[0]=E,w[4]=X,w[8]=N,a=0;a<3;++a)U[a]=I[a]+w[2+4*a]*h;for(a=0;a<3;++a){u=0;for(var _=0;_<3;++_)u+=w[a+4*_]*U[_];w[12+a]=-u}w[15]=1},h.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var i=0;i<16;++i)t[i]=n[i];return t}return n};var f=[0,0,0];function p(e){var t=(e=e||{}).center||[0,0,0],n=e.up||[0,1,0],i=e.right||d(n),r=e.radius||1,a=e.theta||0,u=e.phi||0;if(t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),s(n,n),i=[].slice.call(i,0,3),s(i,i),"eye"in e){var h=e.eye,f=[h[0]-t[0],h[1]-t[1],h[2]-t[2]];o(i,f,n),c(i[0],i[1],i[2])<1e-6?i=d(n):s(i,i),r=c(f[0],f[1],f[2]);var p=l(n,f)/r,m=l(i,f)/r;u=Math.acos(p),a=Math.acos(m)}return r=Math.log(r),new g(e.zoomMin,e.zoomMax,t,n,i,r,a,u)}h.rotate=function(e,t,n,i){if(this.angle.move(e,t,n),i){this.recalcMatrix(e);var r=this.computedMatrix;f[0]=r[2],f[1]=r[6],f[2]=r[10];for(var o=this.computedUp,s=this.computedRight,l=this.computedToward,c=0;c<3;++c)r[4*c]=o[c],r[4*c+1]=s[c],r[4*c+2]=l[c];for(a(r,r,i,f),c=0;c<3;++c)o[c]=r[4*c],s[c]=r[4*c+1];this.up.set(e,o[0],o[1],o[2]),this.right.set(e,s[0],s[1],s[2])}},h.pan=function(e,t,n,i){t=t||0,n=n||0,i=i||0,this.recalcMatrix(e);var r=this.computedMatrix;Math.exp(this.computedRadius[0]);var a=r[1],o=r[5],s=r[9],l=c(a,o,s);a/=l,o/=l,s/=l;var u=r[0],d=r[4],g=r[8],h=u*a+d*o+g*s,f=c(u-=a*h,d-=o*h,g-=s*h),p=(u/=f)*t+a*n,m=(d/=f)*t+o*n,v=(g/=f)*t+s*n;this.center.move(e,p,m,v);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+i),this.radius.set(e,Math.log(b))},h.translate=function(e,t,n,i){this.center.move(e,t||0,n||0,i||0)},h.setMatrix=function(e,t,n,i){var a=1;"number"==typeof n&&(a=0|n),(a<0||a>3)&&(a=1);var o=(a+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var s=t[a],l=t[a+4],d=t[a+8];if(i){var g=Math.abs(s),h=Math.abs(l),f=Math.abs(d),p=Math.max(g,h,f);g===p?(s=s<0?-1:1,l=d=0):f===p?(d=d<0?-1:1,s=l=0):(l=l<0?-1:1,s=d=0)}else{var m=c(s,l,d);s/=m,l/=m,d/=m}var v,b,y=t[o],I=t[o+4],C=t[o+8],x=y*s+I*l+C*d,B=c(y-=s*x,I-=l*x,C-=d*x),A=l*(C/=B)-d*(I/=B),F=d*(y/=B)-s*C,Q=s*I-l*y,U=c(A,F,Q);if(A/=U,F/=U,Q/=U,this.center.jump(e,Y,D,z),this.radius.idle(e),this.up.jump(e,s,l,d),this.right.jump(e,y,I,C),2===a){var w=t[1],G=t[5],R=t[9],L=w*y+G*I+R*C,S=w*A+G*F+R*Q;v=E<0?-Math.PI/2:Math.PI/2,b=Math.atan2(S,L)}else{var V=t[2],Z=t[6],k=t[10],E=V*s+Z*l+k*d,X=V*y+Z*I+k*C,N=V*A+Z*F+k*Q;v=Math.asin(u(E)),b=Math.atan2(N,X)}this.angle.jump(e,b,v),this.recalcMatrix(e);var W=t[2],_=t[6],T=t[10],M=this.computedMatrix;r(M,t);var H=M[15],Y=M[12]/H,D=M[13]/H,z=M[14]/H,O=Math.exp(this.computedRadius[0]);this.center.jump(e,Y-W*O,D-_*O,z-T*O)},h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},h.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},h.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},h.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},h.lookAt=function(e,t,n,i){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter;var r=(i=i||this.computedUp)[0],a=i[1],o=i[2],s=c(r,a,o);if(!(s<1e-6)){r/=s,a/=s,o/=s;var l=t[0]-n[0],d=t[1]-n[1],g=t[2]-n[2],h=c(l,d,g);if(!(h<1e-6)){l/=h,d/=h,g/=h;var f=this.computedRight,p=f[0],m=f[1],v=f[2],b=r*p+a*m+o*v,y=c(p-=b*r,m-=b*a,v-=b*o);if(!(y<.01&&(y=c(p=a*g-o*d,m=o*l-r*g,v=r*d-a*l))<1e-6)){p/=y,m/=y,v/=y,this.up.set(e,r,a,o),this.right.set(e,p,m,v),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(h));var I=a*v-o*m,C=o*p-r*v,x=r*m-a*p,B=c(I,C,x),A=r*l+a*d+o*g,F=p*l+m*d+v*g,Q=(I/=B)*l+(C/=B)*d+(x/=B)*g,U=Math.asin(u(A)),w=Math.atan2(Q,F),G=this.angle._state,R=G[G.length-1],L=G[G.length-2];R%=2*Math.PI;var S=Math.abs(R+2*Math.PI-w),V=Math.abs(R-w),Z=Math.abs(R-2*Math.PI-w);S<V&&(R+=2*Math.PI),Z<V&&(R-=2*Math.PI),this.angle.jump(this.angle.lastT(),R,L),this.angle.set(e,w,U)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(e,t,n){t.exports=r;var i=+(Math.pow(2,27)+1);function r(e,t,n){var r=e*t,a=i*e,o=a-(a-e),s=e-o,l=i*t,c=l-(l-t),u=t-c,d=s*u-(r-o*c-s*c-o*u);return n?(n[0]=d,n[1]=r,n):[d,r]}},{}],307:[function(e,t,n){function i(e,t,n){var i=e+t,r=i-e,a=t-r,o=e-(i-r);return n?(n[0]=o+a,n[1]=i,n):[o+a,i]}t.exports=i},{}],308:[function(e,t,n){(function(t){(function(){var i=e("bit-twiddle"),r=e("dup"),a=e("buffer").Buffer;t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=t.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=r([32,0])),c.BIGUINT64||(c.BIGUINT64=r([32,0])),c.BIGINT64||(c.BIGINT64=r([32,0])),c.BUFFER||(c.BUFFER=r([32,0]));var u=c.DATA,d=c.BUFFER;function g(e){if(e){var t=e.length||e.byteLength,n=i.log2(t);u[n].push(e)}}function h(e){g(e.buffer)}function f(e){e=i.nextPow2(e);var t=i.log2(e),n=u[t];return n.length>0?n.pop():new ArrayBuffer(e)}function p(e){return new Uint8Array(f(e),0,e)}function m(e){return new Uint16Array(f(2*e),0,e)}function v(e){return new Uint32Array(f(4*e),0,e)}function b(e){return new Int8Array(f(e),0,e)}function y(e){return new Int16Array(f(2*e),0,e)}function I(e){return new Int32Array(f(4*e),0,e)}function C(e){return new Float32Array(f(4*e),0,e)}function x(e){return new Float64Array(f(8*e),0,e)}function B(e){return o?new Uint8ClampedArray(f(e),0,e):p(e)}function A(e){return s?new BigUint64Array(f(8*e),0,e):null}function F(e){return l?new BigInt64Array(f(8*e),0,e):null}function Q(e){return new DataView(f(e),0,e)}function U(e){e=i.nextPow2(e);var t=i.log2(e),n=d[t];return n.length>0?n.pop():new a(e)}n.free=function(e){if(a.isBuffer(e))d[i.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|i.log2(t);u[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeBigUint64=n.freeInt8=n.freeInt16=n.freeInt32=n.freeBigInt64=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=h,n.freeArrayBuffer=g,n.freeBuffer=function(e){d[i.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return f(e);switch(t){case"uint8":return p(e);case"uint16":return m(e);case"uint32":return v(e);case"int8":return b(e);case"int16":return y(e);case"int32":return I(e);case"float":case"float32":return C(e);case"double":case"float64":return x(e);case"uint8_clamped":return B(e);case"bigint64":return F(e);case"biguint64":return A(e);case"buffer":return U(e);case"data":case"dataview":return Q(e);default:return null}return null},n.mallocArrayBuffer=f,n.mallocUint8=p,n.mallocUint16=m,n.mallocUint32=v,n.mallocInt8=b,n.mallocInt16=y,n.mallocInt32=I,n.mallocFloat32=n.mallocFloat=C,n.mallocFloat64=n.mallocDouble=x,n.mallocUint8Clamped=B,n.mallocBigUint64=A,n.mallocBigInt64=F,n.mallocDataView=Q,n.mallocBuffer=U,n.clearCache=function(){for(var e=0;e<32;++e)c.UINT8[e].length=0,c.UINT16[e].length=0,c.UINT32[e].length=0,c.INT8[e].length=0,c.INT16[e].length=0,c.INT32[e].length=0,c.FLOAT[e].length=0,c.DOUBLE[e].length=0,c.BIGUINT64[e].length=0,c.BIGINT64[e].length=0,c.UINT8C[e].length=0,u[e].length=0,d[e].length=0}}).call(this)}).call(this,void 0!==xs?xs:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(e,t,n){function i(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=i;var r=i.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var i=n[t];n[t]=e,t=i}return e},r.link=function(e,t){var n=this.find(e),i=this.find(t);if(n!==i){var r=this.ranks,a=this.roots,o=r[n],s=r[i];o<s?a[n]=i:s<o?a[i]=n:(a[i]=n,++r[n])}}},{}],310:[function(e,t,n){function i(e,t){for(var n=1,i=e.length,r=e[0],a=e[0],o=1;o<i;++o)if(a=r,t(r=e[o],a)){if(o===n){n++;continue}e[n++]=r}return e.length=n,e}function r(e){for(var t=1,n=e.length,i=e[0],r=e[0],a=1;a<n;++a,r=i)if(r=i,(i=e[a])!==r){if(a===t){t++;continue}e[t++]=i}return e.length=t,e}function a(e,t,n){return 0===e.length?e:t?(n||e.sort(t),i(e,t)):(n||e.sort(),r(e))}t.exports=a},{}],311:[function(e,t,n){t.exports=s;var r=e("./lib/vtext"),a=null,o=null;function s(e,t){return"object"===i(t)&&null!==t||(t={}),r(e,t.canvas||a,t.context||o,t)}"undefined"!=typeof document&&((a=document.createElement("canvas")).width=8192,a.height=1024,o=a.getContext("2d"))},{"./lib/vtext":312}],312:[function(e,t,n){t.exports=F,t.exports.processPixels=A;var i=e("surface-nets"),r=e("ndarray"),a=e("simplify-planar-graph"),o=e("clean-pslg"),s=e("cdt2d"),l=e("planar-graph-to-polyline"),c="b",u="b|",d="i",g="i|",h="sup",f="+",p="+1",m="sub",v="-",b="-1";function y(e,t,n,i){for(var r="<"+e+">",a="</"+e+">",o=r.length,s=a.length,l=t[0]===f||t[0]===v,c=0,u=-s;c>-1&&-1!==(c=n.indexOf(r,c))&&-1!==(u=n.indexOf(a,c+o))&&!(u<=c);){for(var d=c;d<u+s;++d)if(d<c+o||d>=u)i[d]=null,n=n.substr(0,d)+" "+n.substr(d+1);else if(null!==i[d]){var g=i[d].indexOf(t[0]);-1===g?i[d]+=t:l&&(i[d]=i[d].substr(0,g+1)+(1+parseInt(i[d][g+1]))+i[d].substr(g+2))}var h=c+o,p=n.substr(h,u-h).indexOf(r);c=-1!==p?p:u+s}return i}function I(e,t,n){for(var i=t.textAlign||"start",r=t.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=e.length,l=0;l<s;++l)for(var c=e[l],u=0;u<2;++u)a[u]=0|Math.min(a[u],c[u]),o[u]=0|Math.max(o[u],c[u]);var d=0;switch(i){case"center":d=-.5*(a[0]+o[0]);break;case"right":case"end":d=-o[0];break;case"left":case"start":d=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+i+"'")}var g=0;switch(r){case"hanging":case"top":g=-a[1];break;case"middle":g=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":g=-3*n;break;case"bottom":g=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+r+"'")}var h=1/n;return"lineHeight"in t?h*=+t.lineHeight:"width"in t?h=t.width/(o[0]-a[0]):"height"in t&&(h=t.height/(o[1]-a[1])),e.map((function(e){return[h*(e[0]+d),h*(e[1]+g)]}))}function C(e,t,n,i,a,o){n=n.replace(/\n/g,""),n=!0===o.breaklines?n.replace(/\<br\>/g,"\n"):n.replace(/\<br\>/g," ");var s="",l=[];for(B=0;B<n.length;++B)l[B]=s;!0===o.bolds&&(l=y(c,u,n,l)),!0===o.italics&&(l=y(d,g,n,l)),!0===o.superscripts&&(l=y(h,p,n,l)),!0===o.subscripts&&(l=y(m,b,n,l));var I=[],C="";for(B=0;B<n.length;++B)null!==l[B]&&(C+=n[B],I.push(l[B]));var x,B,A,F,Q,U=C.split("\n"),w=U.length,G=Math.round(a*i),R=i,L=2*i,S=0,V=w*G+L;e.height<V&&(e.height=V),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff";var Z=0,k="";function E(){if(""!==k){var e=t.measureText(k).width;t.fillText(k,R+A,L+F),A+=e}}function X(){return Math.round(Q)+"px "}function N(e,n){var i=""+t.font;if(!0===o.subscripts){var r=e.indexOf(v),a=n.indexOf(v),s=r>-1?parseInt(e[1+r]):0,l=a>-1?parseInt(n[1+a]):0;s!==l&&(i=i.replace(X(),"?px "),Q*=Math.pow(.75,l-s),i=i.replace("?px ",X())),F+=.25*G*(l-s)}if(!0===o.superscripts){var c=e.indexOf(f),d=n.indexOf(f),h=c>-1?parseInt(e[1+c]):0,p=d>-1?parseInt(n[1+d]):0;h!==p&&(i=i.replace(X(),"?px "),Q*=Math.pow(.75,p-h),i=i.replace("?px ",X())),F-=.25*G*(p-h)}if(!0===o.bolds){var m=e.indexOf(u)>-1,b=n.indexOf(u)>-1;!m&&b&&(i=y?i.replace("italic ","italic bold "):"bold "+i),m&&!b&&(i=i.replace("bold ",""))}if(!0===o.italics){var y=e.indexOf(g)>-1,I=n.indexOf(g)>-1;!y&&I&&(i="italic "+i),y&&!I&&(i=i.replace("italic ",""))}t.font=i}for(x=0;x<w;++x){var W=U[x]+"\n";for(A=0,F=x*G,Q=i,k="",B=0;B<W.length;++B){var _=B+Z<I.length?I[B+Z]:I[I.length-1];s===_?k+=W[B]:(E(),k=W[B],void 0!==_&&(N(s,_),s=_))}E(),Z+=W.length;var T=0|Math.round(A+2*R);S<T&&(S=T)}var M=S,H=L+G*w;return r(t.getImageData(0,0,M,H).data,[H,M,4]).pick(-1,-1,0).transpose(1,0)}function x(e,t){var n=i(e,128);return t?a(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function B(e,t,n,i){var r=x(e,i),a=I(r.positions,t,n),c=r.edges,u="ccw"===t.orientation;if(o(a,c),t.polygons||t.polygon||t.polyline){for(var d=l(c,a),g=new Array(d.length),h=0;h<d.length;++h){for(var f=d[h],p=new Array(f.length),m=0;m<f.length;++m){for(var v=f[m],b=new Array(v.length),y=0;y<v.length;++y)b[y]=a[v[y]].slice();u&&b.reverse(),p[m]=b}g[h]=p}return g}return t.triangles||t.triangulate||t.triangle?{cells:s(a,c,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:c,positions:a}}function A(e,t,n){try{return B(e,t,n,!0)}catch(e){}try{return B(e,t,n,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function F(e,t,n,i){var r=64,a=1.25,o={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return i&&(i.size&&i.size>0&&(r=i.size),i.lineSpacing&&i.lineSpacing>0&&(a=i.lineSpacing),i.styletags&&i.styletags.breaklines&&(o.breaklines=!!i.styletags.breaklines),i.styletags&&i.styletags.bolds&&(o.bolds=!!i.styletags.bolds),i.styletags&&i.styletags.italics&&(o.italics=!!i.styletags.italics),i.styletags&&i.styletags.subscripts&&(o.subscripts=!!i.styletags.subscripts),i.styletags&&i.styletags.superscripts&&(o.superscripts=!!i.styletags.superscripts)),n.font=[i.fontStyle,i.fontVariant,i.fontWeight,r+"px",i.font].filter((function(e){return e})).join(" "),n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr",A(C(t,n,e,r,a,o),i,r)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(e,t,n){!function(){if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=m);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var i=new n,r=Object.freeze({});if(i.set(r,1),1===i.get(r))return void(t.exports=WeakMap);e=!0}}var a=Object.getOwnPropertyNames,o=Object.defineProperty,s=Object.isExtensible,l="weakmap:",c=l+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),d=new Uint8Array(u);crypto.getRandomValues(d),c=l+"rand:"+Array.prototype.map.call(d,(function(e){return(e%36).toString(36)})).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(e){return a(e).filter(v)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(e){return g(e).filter(v)}})}!function(){var e=Object.freeze;o(Object,"freeze",{value:function(t){return b(t),e(t)}});var t=Object.seal;o(Object,"seal",{value:function(e){return b(e),t(e)}});var n=Object.preventExtensions;o(Object,"preventExtensions",{value:function(e){return b(e),n(e)}})}();var h=!1,f=0,p=function e(){this instanceof e||I();var t=[],n=[],i=f++;function r(e,r){var a,o=b(e);return o?i in o?o[i]:r:(a=t.indexOf(e))>=0?n[a]:r}function a(e){var n=b(e);return n?i in n:t.indexOf(e)>=0}function o(e,r){var a,o=b(e);return o?o[i]=r:(a=t.indexOf(e))>=0?n[a]=r:(a=t.length,n[a]=r,t[a]=e),this}function s(e){var r,a,o=b(e);return o?i in o&&delete o[i]:!((r=t.indexOf(e))<0||(a=t.length-1,t[r]=void 0,n[r]=n[a],t[r]=t[a],t.length=a,n.length=a,0))}return Object.create(e.prototype,{get___:{value:y(r)},has___:{value:y(a)},set___:{value:y(o)},delete___:{value:y(s)}})};p.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function i(){this instanceof p||I();var t,i=new n,r=void 0,a=!1;function o(e,t){return r?i.has(e)?i.get(e):r.get___(e,t):i.get(e,t)}function s(e){return i.has(e)||!!r&&r.has___(e)}function l(e){var t=!!i.delete(e);return r&&r.delete___(e)||t}return t=e?function(e,t){return i.set(e,t),i.has(e)||(r||(r=new p),r.set(e,t)),this}:function(e,t){if(a)try{i.set(e,t)}catch(n){r||(r=new p),r.set___(e,t)}else i.set(e,t);return this},Object.create(p.prototype,{get___:{value:y(o)},has___:{value:y(s)},set___:{value:y(t)},delete___:{value:y(l)},permitHostObjects___:{value:y((function(e){if(e!==m)throw new Error("bogus call to permitHostObjects___");a=!0}))}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),i.prototype=p.prototype,t.exports=i,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=p)}function m(e){e.permitHostObjects___&&e.permitHostObjects___(m)}function v(e){return!(e.substr(0,l.length)==l&&"___"===e.substr(e.length-3))}function b(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[c];if(t&&t.key===e)return t;if(s(e)){t={key:e};try{return o(e,c,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function y(e){return e.prototype=null,Object.freeze(e)}function I(){h||"undefined"==typeof console||(h=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(e,t,n){var r=e("./hidden-store.js");function a(){var e={};return function(t){if(("object"!==i(t)||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var n=t.valueOf(e);return n&&n.identity===e?n:r(t,e)}}t.exports=a},{"./hidden-store.js":315}],315:[function(e,t,n){function i(e,t){var n={identity:t},i=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?i.apply(this,arguments):n},writable:!0}),n}t.exports=i},{}],316:[function(e,t,n){var i=e("./create-store.js");function r(){var e=i();return{get:function(t,n){var i=e(t);return i.hasOwnProperty("value")?i.value:n},set:function(t,n){return e(t).value=n,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}t.exports=r},{"./create-store.js":314}],317:[function(e,t,n){function i(){return function(e,t,n,i,r,a){var o=e[0],s=n[0],l=[0],c=s;i|=0;var u=0,d=s;for(u=0;u<o;++u){var g=t[i]-a,h=t[i+c]-a;g>=0!=h>=0&&r.push(l[0]+.5+.5*(g+h)/(g-h)),i+=d,++l[0]}}}function r(){return i()}var a=r;function o(e){var t={};return function(n,i,r){var a=n.dtype,o=n.order,s=[a,o.join()].join(),l=t[s];return l||(t[s]=l=e([a,o])),l(n.shape.slice(0),n.data,n.stride,0|n.offset,i,r)}}function s(e){return o(a.bind(void 0,e))}function l(e){return s({funcName:e.funcName})}t.exports=l({funcName:"zeroCrossings"})},{}],318:[function(e,t,n){t.exports=r;var i=e("./lib/zc-core");function r(e,t){var n=[];return t=+t||0,i(e.hi(e.shape[0]-1),n,t),n}},{"./lib/zc-core":317}]},{},[6])(6);var eD={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},tD=function(e){var t,n,i=[],r=1;if("string"==typeof e)if(eD[e])i=eD[e].slice(),n="rgb";else if("transparent"===e)r=0,n="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var a=(l=e.slice(1)).length;r=1,a<=4?(i=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],4===a&&(r=parseInt(l[3]+l[3],16)/255)):(i=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],8===a&&(r=parseInt(l[6]+l[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var o=t[1],s="rgb"===o,l=o.replace(/a$/,"");n=l;a="cmyk"===l?4:"gray"===l?1:3;i=t[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(e,t){if(/%$/.test(e))return t===a?parseFloat(e)/100:"rgb"===l?255*parseFloat(e)/100:parseFloat(e);if("h"===l[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==nD[e])return nD[e]}return parseFloat(e)})),o===l&&i.push(1),r=s||void 0===i[a]?1:i[a],i=i.slice(0,a)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(i=e.match(/([0-9]+)/g).map((function(e){return parseFloat(e)})),n=e.match(/([a-z])/gi).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(i=[e[0],e[1],e[2]],n="rgb",r=4===e.length?e[3]:1):e instanceof Object&&(null!=e.r||null!=e.red||null!=e.R?(n="rgb",i=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",i=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),r=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(r/=100)):(n="rgb",i=[e>>>16,(65280&e)>>>8,255&e]);return{space:n,values:i,alpha:r}},nD={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var iD={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};iD.hsl=function(e){var t,n,i=e[0]/255,r=e[1]/255,a=e[2]/255,o=Math.min(i,r,a),s=Math.max(i,r,a),l=s-o;return s===o?t=0:i===s?t=(r-a)/l:r===s?t=2+(a-i)/l:a===s&&(t=4+(i-r)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(o+s)/2,[t,100*(s===o?0:n<=.5?l/(s+o):l/(2-s-o)),100*n]};var rD=tD,aD=iD,oD={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,n,i,r,a,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[a=255*l,a,a];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),r=[0,0,0];for(var c=0;c<3;c++)(i=o+1/3*-(c-1))<0?i++:i>1&&i--,a=6*i<1?t+6*(n-t)*i:2*i<1?n:3*i<2?t+(n-t)*(2/3-i)*6:t,r[c]=255*a;return r}},sD=function(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e};var lD=function(e){var t;Array.isArray(e)&&e.raw&&(e=String.raw.apply(null,arguments));var n=rD(e);if(!n.space)return[];var i="h"===n.space[0]?oD.min:aD.min,r="h"===n.space[0]?oD.max:aD.max;return(t=Array(3))[0]=Math.min(Math.max(n.values[0],i[0]),r[0]),t[1]=Math.min(Math.max(n.values[1],i[1]),r[1]),t[2]=Math.min(Math.max(n.values[2],i[2]),r[2]),"h"===n.space[0]&&(t=oD.rgb(t)),t.push(Math.min(Math.max(n.alpha,0),1)),t},cD=sD,uD=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},dD=function(e,t){"float"!==t&&t||(t="array"),"uint"===t&&(t="uint8"),"uint_clamped"===t&&(t="uint8_clamped");var n=new(uD(t))(4),i="uint8"!==t&&"uint8_clamped"!==t;return e.length&&"string"!=typeof e||((e=lD(e))[0]/=255,e[1]/=255,e[2]/=255),function(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||!!(Array.isArray(e)&&(e[0]>1||0===e[0])&&(e[1]>1||0===e[1])&&(e[2]>1||0===e[2])&&(!e[3]||e[3]>1))}(e)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=null!=e[3]?e[3]:255,i&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(i?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=null!=e[3]?e[3]:1):(n[0]=cD(Math.floor(255*e[0]),0,255),n[1]=cD(Math.floor(255*e[1]),0,255),n[2]=cD(Math.floor(255*e[2]),0,255),n[3]=null==e[3]?255:cD(Math.floor(255*e[3]),0,255)),n)};var gD=Yu,hD=Id.exports,fD=dD,pD=vb,mD=Yd.defaultLine,vD=zu.isArrayOrTypedArray,bD=fD(mD);function yD(e,t){var n=e;return n[3]*=t,n}function ID(e){if(gD(e))return bD;var t=fD(e);return t.length?t:bD}function CD(e){return gD(e)?e:1}var xD=function(e,t,n){var i,r,a,o,s,l=e.color,c=vD(l),u=vD(t),d=pD.extractOpts(e),g=[];if(i=void 0!==d.colorscale?pD.makeColorScaleFuncFromTrace(e):ID,r=c?function(e,t){return void 0===e[t]?bD:fD(i(e[t]))}:ID,a=u?function(e,t){return void 0===e[t]?1:CD(e[t])}:CD,c||u)for(var h=0;h<n;h++)o=r(l,h),s=a(t,h),g[h]=yD(o,s);else g=yD(fD(l),t);return g},BD=function(e){var t=pD.extractOpts(e),n=t.colorscale;return t.reversescale&&(n=pD.flipScale(t.colorscale)),n.map((function(e){var t=e[0],n=hD(e[1]).toRgb();return{index:t,rgb:[n.r,n.g,n.b,n.a]}}))},AD=dD;var FD=function(e){return e?AD(e):[0,0,0,1]},QD=$Y.exports.gl_mesh3d,UD=BD,wD=FD,GD=vb.extractOpts,RD=function(e,t,n,i){i=i||e.length;for(var r=new Array(i),a=0;a<i;a++)r[a]=[e[a],t[a],n[a]];return r},LD=function(e,t){for(var n=t.length-1;n>0;n--){var i=Math.min(t[n],t[n-1]),r=Math.max(t[n],t[n-1]);if(r>i&&i<e&&e<=r)return{id:n,distRatio:(r-e)/(r-i)}}return{id:0,distRatio:0}};function SD(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var VD=SD.prototype;VD.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,n=this.data._meshX[t],i=this.data._meshY[t],r=this.data._meshZ[t],a=this.data._Ys.length,o=this.data._Zs.length,s=LD(n,this.data._Xs).id,l=LD(i,this.data._Ys).id,c=LD(r,this.data._Zs).id,u=e.index=c+o*l+o*a*s;e.traceCoordinate=[this.data._meshX[u],this.data._meshY[u],this.data._meshZ[u],this.data._value[u]];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[u]?e.textLabel=d[u]:d&&(e.textLabel=d),!0}},VD.update=function(e){var t=this.scene,n=t.fullSceneLayout;function i(e,t,n,i){return t.map((function(t){return e.d2l(t,0,i)*n}))}this.data=kD(e);var r={positions:RD(i(n.xaxis,e._meshX,t.dataScale[0],e.xcalendar),i(n.yaxis,e._meshY,t.dataScale[1],e.ycalendar),i(n.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),cells:RD(e._meshI,e._meshJ,e._meshK),lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:wD(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},a=GD(e);r.vertexIntensity=e._meshIntensity,r.vertexIntensityBounds=[a.min,a.max],r.colormap=UD(e),this.mesh.update(r)},VD.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var ZD=["xyz","xzy","yxz","yzx","zxy","zyx"];function kD(e){e._meshI=[],e._meshJ=[],e._meshK=[];var t,n,i,r,a,o,s,l=e.surface.show,c=e.spaceframe.show,u=e.surface.fill,d=e.spaceframe.fill,g=!1,h=!1,f=0,p=e._Xs,m=e._Ys,v=e._Zs,b=p.length,y=m.length,I=v.length,C=ZD.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,"")),x=function(e,t,n){switch(C){case 5:return n+I*t+I*y*e;case 4:return n+I*e+I*b*t;case 3:return t+y*n+y*I*e;case 2:return t+y*e+y*b*n;case 1:return e+b*n+b*I*t;default:return e+b*t+b*y*n}},B=e._minValues,A=e._maxValues,F=e._vMin,Q=e._vMax;function U(e,t,s){for(var l=o.length,c=n;c<l;c++)if(e===i[c]&&t===r[c]&&s===a[c])return c;return-1}function w(){n=t}function G(){i=[],r=[],a=[],o=[],t=0,w()}function R(e,n,s,l){return i.push(e),r.push(n),a.push(s),o.push(l),++t-1}function L(t,n,i){return e._meshI.push(t),e._meshJ.push(n),e._meshK.push(i),++f-1}function S(e,t,n){for(var i=[],r=0;r<e.length;r++)i[r]=e[r]*(1-n)+n*t[r];return i}function V(e){s=e}function Z(e,t){return"all"===e||null===e||e.indexOf(t)>-1}function k(e,t){return null===e?t:e}function E(e,t,n){w();var i=[t],r=[n];if(s>=1)i=[t],r=[n];else if(s>0){var a=function(e,t){var n=e[0],i=e[1],r=e[2],a=function(e,t,n){for(var i=[],r=0;r<e.length;r++)i[r]=(e[r]+t[r]+n[r])/3;return i}(n,i,r),o=Math.sqrt(1-s),l=S(a,n,o),c=S(a,i,o),u=S(a,r,o),d=t[0],g=t[1],h=t[2];return{xyzv:[[n,i,c],[c,l,n],[i,r,u],[u,c,i],[r,n,l],[l,u,r]],abc:[[d,g,-1],[-1,-1,d],[g,h,-1],[-1,-1,g],[h,d,-1],[-1,-1,h]]}}(t,n);i=a.xyzv,r=a.abc}for(var o=0;o<i.length;o++){t=i[o],n=r[o];for(var l=[],c=0;c<3;c++){var u=t[c][0],d=t[c][1],g=t[c][2],h=t[c][3],f=n[c]>-1?n[c]:U(u,d,g);l[c]=f>-1?f:R(u,d,g,k(e,h))}L(l[0],l[1],l[2])}}function X(e,t,n,i){var r=e[3];r<n&&(r=n),r>i&&(r=i);for(var a=(e[3]-r)/(e[3]-t[3]+1e-9),o=[],s=0;s<4;s++)o[s]=(1-a)*e[s]+a*t[s];return o}function N(e,t,n){return e>=t&&e<=n}function W(e){var t=.001*(Q-F);return e>=F-t&&e<=Q+t}function _(t){for(var n=[],i=0;i<4;i++){var r=t[i];n.push([e._x[r],e._y[r],e._z[r],e._value[r]])}return n}function T(e,t,n,i,r,a){a||(a=1),n=[-1,-1,-1];var o=!1,s=[N(t[0][3],i,r),N(t[1][3],i,r),N(t[2][3],i,r)];if(!s[0]&&!s[1]&&!s[2])return!1;var l=function(e,t,n){return W(t[0][3])&&W(t[1][3])&&W(t[2][3])?(E(e,t,n),!0):a<3&&T(e,t,n,F,Q,++a)};if(s[0]&&s[1]&&s[2])return l(e,t,n)||o;var c=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach((function(a){if(s[a[0]]&&s[a[1]]&&!s[a[2]]){var u=t[a[0]],d=t[a[1]],g=t[a[2]],h=X(g,u,i,r),f=X(g,d,i,r);o=l(e,[f,h,u],[-1,-1,n[a[0]]])||o,o=l(e,[u,d,f],[n[a[0]],n[a[1]],-1])||o,c=!0}})),c||[[0,1,2],[1,2,0],[2,0,1]].forEach((function(a){if(s[a[0]]&&!s[a[1]]&&!s[a[2]]){var u=t[a[0]],d=t[a[1]],g=t[a[2]],h=X(d,u,i,r),f=X(g,u,i,r);o=l(e,[f,h,u],[-1,-1,n[a[0]]])||o,c=!0}})),o}function M(e,t,n,i){var r=!1,a=_(t),o=[N(a[0][3],n,i),N(a[1][3],n,i),N(a[2][3],n,i),N(a[3][3],n,i)];if(!(o[0]||o[1]||o[2]||o[3]))return r;if(o[0]&&o[1]&&o[2]&&o[3])return h&&(r=function(e,t,n){var i=function(i,r,a){E(e,[t[i],t[r],t[a]],[n[i],n[r],n[a]])};i(0,1,2),i(3,0,1),i(2,3,0),i(1,2,3)}(e,a,t)||r),r;var s=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],g=a[l[3]];if(h)r=E(e,[c,u,d],[t[l[0]],t[l[1]],t[l[2]]])||r;else{var f=X(g,c,n,i),p=X(g,u,n,i),m=X(g,d,n,i);r=E(null,[f,p,m],[-1,-1,-1])||r}s=!0}})),s?r:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&!o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],g=a[l[3]],f=X(d,c,n,i),p=X(d,u,n,i),m=X(g,u,n,i),v=X(g,c,n,i);h?(r=E(e,[c,v,f],[t[l[0]],-1,-1])||r,r=E(e,[u,p,m],[t[l[1]],-1,-1])||r):r=function(e,t,n){var i=function(i,r,a){E(e,[t[i],t[r],t[a]],[n[i],n[r],n[a]])};i(0,1,2),i(2,3,0)}(null,[f,p,m,v],[-1,-1,-1,-1])||r,s=!0}})),s||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach((function(l){if(o[l[0]]&&!o[l[1]]&&!o[l[2]]&&!o[l[3]]){var c=a[l[0]],u=a[l[1]],d=a[l[2]],g=a[l[3]],f=X(u,c,n,i),p=X(d,c,n,i),m=X(g,c,n,i);h?(r=E(e,[c,f,p],[t[l[0]],-1,-1])||r,r=E(e,[c,p,m],[t[l[0]],-1,-1])||r,r=E(e,[c,m,f],[t[l[0]],-1,-1])||r):r=E(null,[f,p,m],[-1,-1,-1])||r,s=!0}})),r)}function H(e,t,n,i,r,a,o,s,l,c,u){var d=!1;return g&&(Z(e,"A")&&(d=M(null,[t,n,i,a],c,u)||d),Z(e,"B")&&(d=M(null,[n,i,r,l],c,u)||d),Z(e,"C")&&(d=M(null,[n,a,o,l],c,u)||d),Z(e,"D")&&(d=M(null,[i,a,s,l],c,u)||d),Z(e,"E")&&(d=M(null,[n,i,a,l],c,u)||d)),h&&(d=M(e,[n,i,a,l],c,u)||d),d}function Y(e,t,n,i,r,a,o,s){return[!0===s[0]||T(e,_([t,n,i]),[t,n,i],a,o),!0===s[1]||T(e,_([i,r,t]),[i,r,t],a,o)]}function D(e,t,n,i,r,a,o,s,l){return s?Y(e,t,n,r,i,a,o,l):Y(e,n,r,i,t,a,o,l)}function z(e,t,n,i,r,a,o){var s,l,c,u,d=!1,g=function(){d=T(e,[s,l,c],[-1,-1,-1],r,a)||d,d=T(e,[c,u,s],[-1,-1,-1],r,a)||d},h=o[0],f=o[1],p=o[2];return h&&(s=S(_([x(t,n-0,i-0)])[0],_([x(t-1,n-0,i-0)])[0],h),l=S(_([x(t,n-0,i-1)])[0],_([x(t-1,n-0,i-1)])[0],h),c=S(_([x(t,n-1,i-1)])[0],_([x(t-1,n-1,i-1)])[0],h),u=S(_([x(t,n-1,i-0)])[0],_([x(t-1,n-1,i-0)])[0],h),g()),f&&(s=S(_([x(t-0,n,i-0)])[0],_([x(t-0,n-1,i-0)])[0],f),l=S(_([x(t-0,n,i-1)])[0],_([x(t-0,n-1,i-1)])[0],f),c=S(_([x(t-1,n,i-1)])[0],_([x(t-1,n-1,i-1)])[0],f),u=S(_([x(t-1,n,i-0)])[0],_([x(t-1,n-1,i-0)])[0],f),g()),p&&(s=S(_([x(t-0,n-0,i)])[0],_([x(t-0,n-0,i-1)])[0],p),l=S(_([x(t-0,n-1,i)])[0],_([x(t-0,n-1,i-1)])[0],p),c=S(_([x(t-1,n-1,i)])[0],_([x(t-1,n-1,i-1)])[0],p),u=S(_([x(t-1,n-0,i)])[0],_([x(t-1,n-0,i-1)])[0],p),g()),d}function O(e,t,n,i,r,a,o,s,l,c,u,d){var h=e;return d?(g&&"even"===e&&(h=null),H(h,t,n,i,r,a,o,s,l,c,u)):(g&&"odd"===e&&(h=null),H(h,l,s,o,a,r,i,n,t,c,u))}function J(e,t,n,i,r){for(var a=[],o=0,s=0;s<t.length;s++)for(var l=t[s],c=1;c<I;c++)for(var u=1;u<y;u++)a.push(D(e,x(l,u-1,c-1),x(l,u-1,c),x(l,u,c-1),x(l,u,c),n,i,(l+u+c)%2,r&&r[o]?r[o]:[])),o++;return a}function j(e,t,n,i,r){for(var a=[],o=0,s=0;s<t.length;s++)for(var l=t[s],c=1;c<b;c++)for(var u=1;u<I;u++)a.push(D(e,x(c-1,l,u-1),x(c,l,u-1),x(c-1,l,u),x(c,l,u),n,i,(c+l+u)%2,r&&r[o]?r[o]:[])),o++;return a}function P(e,t,n,i,r){for(var a=[],o=0,s=0;s<t.length;s++)for(var l=t[s],c=1;c<y;c++)for(var u=1;u<b;u++)a.push(D(e,x(u-1,c-1,l),x(u-1,c,l),x(u,c-1,l),x(u,c,l),n,i,(u+c+l)%2,r&&r[o]?r[o]:[])),o++;return a}function K(e,t,n){for(var i=1;i<I;i++)for(var r=1;r<y;r++)for(var a=1;a<b;a++)O(e,x(a-1,r-1,i-1),x(a-1,r-1,i),x(a-1,r,i-1),x(a-1,r,i),x(a,r-1,i-1),x(a,r-1,i),x(a,r,i-1),x(a,r,i),t,n,(a+r+i)%2)}function q(e,t,n){g=!0,K(e,t,n),g=!1}function $(e,t,n,i,r,a){for(var o=[],s=0,l=0;l<t.length;l++)for(var c=t[l],u=1;u<I;u++)for(var d=1;d<y;d++)o.push(z(e,c,d,u,n,i,r[l],a&&a[s]&&a[s])),s++;return o}function ee(e,t,n,i,r,a){for(var o=[],s=0,l=0;l<t.length;l++)for(var c=t[l],u=1;u<b;u++)for(var d=1;d<I;d++)o.push(z(e,u,c,d,n,i,r[l],a&&a[s]&&a[s])),s++;return o}function te(e,t,n,i,r,a){for(var o=[],s=0,l=0;l<t.length;l++)for(var c=t[l],u=1;u<y;u++)for(var d=1;d<b;d++)o.push(z(e,d,u,c,n,i,r[l],a&&a[s]&&a[s])),s++;return o}function ne(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}return function(){G(),function(){for(var t=0;t<b;t++)for(var n=0;n<y;n++)for(var i=0;i<I;i++){var r=x(t,n,i);R(e._x[r],e._y[r],e._z[r],e._value[r])}}();var t=null;if(c&&d&&(V(d),function(e,t,n){h=!0,K(e,t,n),h=!1}(t,F,Q)),l&&u){V(u);for(var n=e.surface.pattern,s=e.surface.count,g=0;g<s;g++){var C=1===s?.5:g/(s-1),U=(1-C)*F+C*Q,w=Math.abs(U-B)>Math.abs(U-A)?[B,U]:[U,A];q(n,w[0],w[1])}}var L=[[Math.min(F,A),Math.max(F,A)],[Math.min(B,Q),Math.max(B,Q)]];["x","y","z"].forEach((function(n){for(var i=[],r=0;r<L.length;r++){var a=0,o=L[r][0],s=L[r][1],l=e.slices[n];if(l.show&&l.fill){V(l.fill);var c=[],u=[],d=[];if(l.locations.length)for(var g=0;g<l.locations.length;g++){var h=LD(l.locations[g],"x"===n?p:"y"===n?m:v);0===h.distRatio?c.push(h.id):h.id>0&&(u.push(h.id),"x"===n?d.push([h.distRatio,0,0]):"y"===n?d.push([0,h.distRatio,0]):d.push([0,0,h.distRatio]))}else c=ne(1,"x"===n?b-1:"y"===n?y-1:I-1);u.length>0&&(i[a]="x"===n?$(t,u,o,s,d,i[a]):"y"===n?ee(t,u,o,s,d,i[a]):te(t,u,o,s,d,i[a]),a++),c.length>0&&(i[a]="x"===n?J(t,c,o,s,i[a]):"y"===n?j(t,c,o,s,i[a]):P(t,c,o,s,i[a]),a++)}var f=e.caps[n];f.show&&f.fill&&(V(f.fill),i[a]="x"===n?J(t,[0,b-1],o,s,i[a]):"y"===n?j(t,[0,y-1],o,s,i[a]):P(t,[0,I-1],o,s,i[a]),a++)}})),0===f&&G(),e._meshX=i,e._meshY=r,e._meshZ=a,e._meshIntensity=o,e._Xs=p,e._Ys=m,e._Zs=v}(),e}var ED={findNearestOnAxis:LD,generateIsoMeshes:kD,createIsosurfaceTrace:function(e,t){var n=e.glplot.gl,i=QD({gl:n}),r=new SD(e,i,t.uid);return i._trace=r,r.update(t),e.glplot.add(i),r}},XD={},ND=function(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var n=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(n.width=t.width);"number"==typeof t.height&&(n.height=t.height);var i,r=t;try{var a=[e];0===e.indexOf("webgl")&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(i=n.getContext(a[o],r))return i}catch(e){i=null}return i||null};var WD=ND,_D=Hd.exports,TD=function(){},MD=FD,HD=ws.exports,YD=["xaxis","yaxis","zaxis"];function DD(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}DD.prototype.merge=function(e,t){for(var n=this,i=0;i<3;++i){var r=t[YD[i]];r.visible?(n.labels[i]=e._meta?HD.templateString(r.title.text,e._meta):r.title.text,"font"in r.title&&(r.title.font.color&&(n.labelColor[i]=MD(r.title.font.color)),r.title.font.family&&(n.labelFont[i]=r.title.font.family),r.title.font.size&&(n.labelSize[i]=r.title.font.size)),"showline"in r&&(n.lineEnable[i]=r.showline),"linecolor"in r&&(n.lineColor[i]=MD(r.linecolor)),"linewidth"in r&&(n.lineWidth[i]=r.linewidth),"showgrid"in r&&(n.gridEnable[i]=r.showgrid),"gridcolor"in r&&(n.gridColor[i]=MD(r.gridcolor)),"gridwidth"in r&&(n.gridWidth[i]=r.gridwidth),"log"===r.type?n.zeroEnable[i]=!1:"zeroline"in r&&(n.zeroEnable[i]=r.zeroline),"zerolinecolor"in r&&(n.zeroLineColor[i]=MD(r.zerolinecolor)),"zerolinewidth"in r&&(n.zeroLineWidth[i]=r.zerolinewidth),"ticks"in r&&r.ticks?n.lineTickEnable[i]=!0:n.lineTickEnable[i]=!1,"ticklen"in r&&(n.lineTickLength[i]=n._defaultLineTickLength[i]=r.ticklen),"tickcolor"in r&&(n.lineTickColor[i]=MD(r.tickcolor)),"tickwidth"in r&&(n.lineTickWidth[i]=r.tickwidth),"tickangle"in r&&(n.tickAngle[i]="auto"===r.tickangle?-3600:Math.PI*-r.tickangle/180),"showticklabels"in r&&(n.tickEnable[i]=r.showticklabels),"tickfont"in r&&(r.tickfont.color&&(n.tickColor[i]=MD(r.tickfont.color)),r.tickfont.family&&(n.tickFont[i]=r.tickfont.family),r.tickfont.size&&(n.tickSize[i]=r.tickfont.size)),"mirror"in r?-1!==["ticks","all","allticks"].indexOf(r.mirror)?(n.lineTickMirror[i]=!0,n.lineMirror[i]=!0):!0===r.mirror?(n.lineTickMirror[i]=!1,n.lineMirror[i]=!0):(n.lineTickMirror[i]=!1,n.lineMirror[i]=!1):n.lineMirror[i]=!1,"showbackground"in r&&!1!==r.showbackground?(n.backgroundEnable[i]=!0,n.backgroundColor[i]=MD(r.backgroundcolor)):n.backgroundEnable[i]=!1):(n.tickEnable[i]=!1,n.labelEnable[i]=!1,n.lineEnable[i]=!1,n.lineTickEnable[i]=!1,n.gridEnable[i]=!1,n.zeroEnable[i]=!1,n.backgroundEnable[i]=!1)}};var zD=function(e,t){var n=new DD;return n.merge(e,t),n},OD=FD,JD=["xaxis","yaxis","zaxis"];function jD(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}jD.prototype.merge=function(e){for(var t=0;t<3;++t){var n=e[JD[t]];n.visible?(this.enabled[t]=n.showspikes,this.colors[t]=OD(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness):(this.enabled[t]=!1,this.drawSides[t]=!1)}};var PD=function(e){var t=new jD;return t.merge(e),t},KD=function(e){for(var t=e.axesOptions,n=e.glplot.axesPixels,i=e.fullSceneLayout,r=[[],[],[]],a=0;a<3;++a){var o=i[ez[a]];if(o._length=(n[a].hi-n[a].lo)*n[a].pixelsPerDataUnit/e.dataScale[a],Math.abs(o._length)===1/0||isNaN(o._length))r[a]=[];else{o._input_range=o.range.slice(),o.range[0]=n[a].lo/e.dataScale[a],o.range[1]=n[a].hi/e.dataScale[a],o._m=1/(e.dataScale[a]*n[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var s=o.tickmode;if("auto"===o.tickmode){o.tickmode="linear";var l=o.nticks||$D.constrain(o._length/40,4,9);qD.autoTicks(o,Math.abs(o.range[1]-o.range[0])/l)}for(var c=qD.calcTicks(o,{msUTC:!0}),u=0;u<c.length;++u)c[u].x=c[u].x*e.dataScale[a],"date"===o.type&&(c[u].text=c[u].text.replace(/\<br\>/g," "));r[a]=c,o.tickmode=s}}t.ticks=r;for(a=0;a<3;++a){tz[a]=.5*(e.glplot.bounds[0][a]+e.glplot.bounds[1][a]);for(u=0;u<2;++u)t.bounds[u][a]=e.glplot.bounds[u][a]}e.contourLevels=function(e){for(var t=new Array(3),n=0;n<3;++n){for(var i=e[n],r=new Array(i.length),a=0;a<i.length;++a)r[a]=i[a].x;t[n]=r}return t}(r)},qD=Im.exports,$D=ws.exports,ez=["xaxis","yaxis","zaxis"],tz=[0,0,0];var nz,iz,rz=$Y.exports.gl_plot3d,az=rz.createCamera,oz=rz.createScene,sz=function(e){return WD("webgl",e)},lz=hg,cz=ws.exports,uz=cz.preserveDrawingBuffer(),dz=Im.exports,gz=SA,hz=FD,fz=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=TD);e.destroy=function(){e.container.parentNode.removeChild(e.container)};var n=document.createElement("div");n.className="no-webgl",n.style.cursor="pointer",n.style.fontSize="24px",n.style.color=_D.defaults[0],n.style.position="absolute",n.style.left=n.style.top="0px",n.style.width=n.style.height="100%",n.style["background-color"]=_D.lightLine,n.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",n.appendChild(i),e.container.appendChild(n),e.container.style.background="#FFFFFF",e.container.onclick=function(){window.open("https://get.webgl.org")},!1},pz=bk,mz=zD,vz=PD,bz=KD;function yz(e,t){var n=document.createElement("div"),i=e.container;this.graphDiv=e.graphDiv;var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",r.style["z-index"]=20,r.style["pointer-events"]="none",n.appendChild(r),this.svgContainer=r,n.id=e.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",i.appendChild(n),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=mz(t,t[this.id]),this.spikeOptions=vz(t[this.id]),this.container=n,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=lz.getComponentMethod("annotations3d","convert"),this.drawAnnotations=lz.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var Iz=yz.prototype;Iz.prepareOptions=function(){var e=this,t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:uz,premultipliedAlpha:!0,antialias:!0},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!(iz||(nz=document.createElement("canvas"),iz=sz({canvas:nz,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");t.gl=iz,t.canvas=nz}return t};var Cz=!0;Iz.tryCreatePlot=function(){var e=this,t=e.prepareOptions(),n=!0;try{e.glplot=oz(t)}catch(i){if(e.staticMode||!Cz||uz)n=!1;else{cz.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{uz=t.glOptions.preserveDrawingBuffer=!0,e.glplot=oz(t)}catch(e){uz=t.glOptions.preserveDrawingBuffer=!1,n=!1}}}return Cz=!1,n},Iz.initializeGLCamera=function(){var e=this,t=e.fullSceneLayout.camera,n="orthographic"===t.projection.type;e.camera=az(e.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:n,zoomMin:.01,zoomMax:100,mode:"orbit"})},Iz.initializeGLPlot=function(){var e=this;if(e.initializeGLCamera(),!e.tryCreatePlot())return fz(e);e.traces={},e.make4thDimension();var t=e.graphDiv,n=t.layout,i=function(){var t={};return e.isCameraChanged(n)&&(t[e.id+".camera"]=e.getCamera()),e.isAspectChanged(n)&&(t[e.id+".aspectratio"]=e.glplot.getAspectratio(),"manual"!==n[e.id].aspectmode&&(e.fullSceneLayout.aspectmode=n[e.id].aspectmode=t[e.id+".aspectmode"]="manual")),t},r=function(e){if(!1!==e.fullSceneLayout.dragmode){var t=i();e.saveLayout(n),e.graphDiv.emit("plotly_relayout",t)}};return e.glplot.canvas&&(e.glplot.canvas.addEventListener("mouseup",(function(){r(e)})),e.glplot.canvas.addEventListener("wheel",(function(n){if(t._context._scrollZoom.gl3d){if(e.camera._ortho){var i=n.deltaX>n.deltaY?1.1:1/1.1,a=e.glplot.getAspectratio();e.glplot.setAspectratio({x:i*a.x,y:i*a.y,z:i*a.z})}r(e)}}),!1),e.glplot.canvas.addEventListener("mousemove",(function(){if(!1!==e.fullSceneLayout.dragmode&&0!==e.camera.mouseListener.buttons){var t=i();e.graphDiv.emit("plotly_relayouting",t)}})),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",(function(n){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:n,layer:e.id})}),!1)),e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(){e.render()},!0},Iz.render=function(){var e,t=this,n=t.graphDiv,i=t.svgContainer,r=t.container.getBoundingClientRect();n._fullLayout._calcInverseTransform(n);var a=n._fullLayout._invScaleX,o=n._fullLayout._invScaleY,s=r.width*a,l=r.height*o;i.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),i.setAttributeNS(null,"width",s),i.setAttributeNS(null,"height",l),bz(t),t.glplot.axes.update(t.axesOptions);for(var c=Object.keys(t.traces),u=null,d=t.glplot.selection,g=0;g<c.length;++g)"skip"!==(e=t.traces[c[g]]).data.hoverinfo&&e.handlePick(d)&&(u=e),e.setContourLevels&&e.setContourLevels();function h(e,n,i){var r=t.fullSceneLayout[e+"axis"];return"log"!==r.type&&(n=r.d2l(n)),dz.hoverLabelText(r,n,i)}if(null!==u){var f=pz(t.glplot.cameraParams,d.dataCoordinate);e=u.data;var p,m=n._fullData[e.index],v=d.index,b={xLabel:h("x",d.traceCoordinate[0],e.xhoverformat),yLabel:h("y",d.traceCoordinate[1],e.yhoverformat),zLabel:h("z",d.traceCoordinate[2],e.zhoverformat)},y=gz.castHoverinfo(m,t.fullLayout,v),I=(y||"").split("+"),C=y&&"all"===y;m.hovertemplate||C||(-1===I.indexOf("x")&&(b.xLabel=void 0),-1===I.indexOf("y")&&(b.yLabel=void 0),-1===I.indexOf("z")&&(b.zLabel=void 0),-1===I.indexOf("text")&&(d.textLabel=void 0),-1===I.indexOf("name")&&(u.name=void 0));var x=[];"cone"===e.type||"streamtube"===e.type?(b.uLabel=h("x",d.traceCoordinate[3],e.uhoverformat),(C||-1!==I.indexOf("u"))&&x.push("u: "+b.uLabel),b.vLabel=h("y",d.traceCoordinate[4],e.vhoverformat),(C||-1!==I.indexOf("v"))&&x.push("v: "+b.vLabel),b.wLabel=h("z",d.traceCoordinate[5],e.whoverformat),(C||-1!==I.indexOf("w"))&&x.push("w: "+b.wLabel),b.normLabel=d.traceCoordinate[6].toPrecision(3),(C||-1!==I.indexOf("norm"))&&x.push("norm: "+b.normLabel),"streamtube"===e.type&&(b.divergenceLabel=d.traceCoordinate[7].toPrecision(3),(C||-1!==I.indexOf("divergence"))&&x.push("divergence: "+b.divergenceLabel)),d.textLabel&&x.push(d.textLabel),p=x.join("<br>")):"isosurface"===e.type||"volume"===e.type?(b.valueLabel=dz.hoverLabelText(t._mockAxis,t._mockAxis.d2l(d.traceCoordinate[3]),e.valuehoverformat),x.push("value: "+b.valueLabel),d.textLabel&&x.push(d.textLabel),p=x.join("<br>")):p=d.textLabel;var B={x:d.traceCoordinate[0],y:d.traceCoordinate[1],z:d.traceCoordinate[2],data:m._input,fullData:m,curveNumber:m.index,pointNumber:v};gz.appendArrayPointValue(B,m,v),e._module.eventData&&(B=m._module.eventData(B,d,m,{},v));var A={points:[B]};if(t.fullSceneLayout.hovermode){var F=[];gz.loneHover({trace:m,x:(.5+.5*f[0]/f[3])*s,y:(.5-.5*f[1]/f[3])*l,xLabel:b.xLabel,yLabel:b.yLabel,zLabel:b.zLabel,text:p,name:u.name,color:gz.castHoverOption(m,v,"bgcolor")||u.color,borderColor:gz.castHoverOption(m,v,"bordercolor"),fontFamily:gz.castHoverOption(m,v,"font.family"),fontSize:gz.castHoverOption(m,v,"font.size"),fontColor:gz.castHoverOption(m,v,"font.color"),nameLength:gz.castHoverOption(m,v,"namelength"),textAlign:gz.castHoverOption(m,v,"align"),hovertemplate:cz.castOption(m,v,"hovertemplate"),hovertemplateLabels:cz.extendFlat({},B,b),eventData:[B]},{container:i,gd:n,inOut_bbox:F}),B.bbox=F[0]}d.buttons&&d.distance<5?n.emit("plotly_click",A):n.emit("plotly_hover",A),this.oldEventData=A}else gz.loneUnhover(i),this.oldEventData&&n.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;t.drawAnnotations(t)},Iz.recoverContext=function(){var e=this;e.glplot.dispose();requestAnimationFrame((function t(){e.glplot.gl.isContextLost()?requestAnimationFrame(t):e.initializeGLPlot()?e.plot.apply(e,e.plotArgs):cz.error("Catastrophic and unrecoverable WebGL error. Context lost.")}))};var xz=["xaxis","yaxis","zaxis"];function Bz(e,t,n){for(var i=e.fullSceneLayout,r=0;r<3;r++){var a=xz[r],o=a.charAt(0),s=i[a],l=t[o],c=t[o+"calendar"],u=t["_"+o+"length"];if(cz.isArrayOrTypedArray(l))for(var d,g=0;g<(u||l.length);g++)if(cz.isArrayOrTypedArray(l[g]))for(var h=0;h<l[g].length;++h)d=s.d2l(l[g][h],0,c),!isNaN(d)&&isFinite(d)&&(n[0][r]=Math.min(n[0][r],d),n[1][r]=Math.max(n[1][r],d));else d=s.d2l(l[g],0,c),!isNaN(d)&&isFinite(d)&&(n[0][r]=Math.min(n[0][r],d),n[1][r]=Math.max(n[1][r],d));else n[0][r]=Math.min(n[0][r],0),n[1][r]=Math.max(n[1][r],u-1)}}Iz.plot=function(e,t,n){var i=this;if(i.plotArgs=[e,t,n],!i.glplot.contextLost){var r,a,o,s,l,c,u=t[i.id],d=n[i.id];i.fullLayout=t,i.fullSceneLayout=u,i.axesOptions.merge(t,u),i.spikeOptions.merge(u),i.setViewport(u),i.updateFx(u.dragmode,u.hovermode),i.camera.enableWheel=i.graphDiv._context._scrollZoom.gl3d,i.glplot.setClearColor(hz(u.bgcolor)),i.setConvert(l),e?Array.isArray(e)||(e=[e]):e=[];var g=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<e.length;++o)!0===(r=e[o]).visible&&0!==r._length&&Bz(this,r,g);!function(e,t){for(var n=e.fullSceneLayout,i=n.annotations||[],r=0;r<3;r++)for(var a=xz[r],o=a.charAt(0),s=n[a],l=0;l<i.length;l++){var c=i[l];if(c.visible){var u=s.r2l(c[o]);!isNaN(u)&&isFinite(u)&&(t[0][r]=Math.min(t[0][r],u),t[1][r]=Math.max(t[1][r],u))}}}(this,g);var h=[1,1,1];for(s=0;s<3;++s)g[1][s]===g[0][s]?h[s]=1:h[s]=1/(g[1][s]-g[0][s]);for(i.dataScale=h,i.convertAnnotations(this),o=0;o<e.length;++o)!0===(r=e[o]).visible&&0!==r._length&&((a=i.traces[r.uid])?a.data.type===r.type?a.update(r):(a.dispose(),a=r._module.plot(this,r),i.traces[r.uid]=a):(a=r._module.plot(this,r),i.traces[r.uid]=a),a.name=r.name);var f=Object.keys(i.traces);e:for(o=0;o<f.length;++o){for(s=0;s<e.length;++s)if(e[s].uid===f[o]&&!0===e[s].visible&&0!==e[s]._length)continue e;(a=i.traces[f[o]]).dispose(),delete i.traces[f[o]]}i.glplot.objects.sort((function(e,t){return e._trace.data.index-t._trace.data.index}));var p,m=[[0,0,0],[0,0,0]],v=[],b={};for(o=0;o<3;++o){if((c=(l=u[xz[o]]).type)in b?(b[c].acc*=h[o],b[c].count+=1):b[c]={acc:h[o],count:1},l.autorange){m[0][o]=1/0,m[1][o]=-1/0;var y=i.glplot.objects,I=i.fullSceneLayout.annotations||[],C=l._name.charAt(0);for(s=0;s<y.length;s++){var x=y[s],B=x.bounds,A=x._trace.data._pad||0;"ErrorBars"===x.constructor.name&&l._lowerLogErrorBound?m[0][o]=Math.min(m[0][o],l._lowerLogErrorBound):m[0][o]=Math.min(m[0][o],B[0][o]/h[o]-A),m[1][o]=Math.max(m[1][o],B[1][o]/h[o]+A)}for(s=0;s<I.length;s++){var F=I[s];if(F.visible){var Q=l.r2l(F[C]);m[0][o]=Math.min(m[0][o],Q),m[1][o]=Math.max(m[1][o],Q)}}if("rangemode"in l&&"tozero"===l.rangemode&&(m[0][o]=Math.min(m[0][o],0),m[1][o]=Math.max(m[1][o],0)),m[0][o]>m[1][o])m[0][o]=-1,m[1][o]=1;else{var U=m[1][o]-m[0][o];m[0][o]-=U/32,m[1][o]+=U/32}if("reversed"===l.autorange){var w=m[0][o];m[0][o]=m[1][o],m[1][o]=w}}else{var G=l.range;m[0][o]=l.r2l(G[0]),m[1][o]=l.r2l(G[1])}m[0][o]===m[1][o]&&(m[0][o]-=1,m[1][o]+=1),v[o]=m[1][o]-m[0][o],i.glplot.setBounds(o,{min:m[0][o]*h[o],max:m[1][o]*h[o]})}var R=u.aspectmode;if("cube"===R)p=[1,1,1];else if("manual"===R){var L=u.aspectratio;p=[L.x,L.y,L.z]}else{if("auto"!==R&&"data"!==R)throw new Error("scene.js aspectRatio was not one of the enumerated types");var S=[1,1,1];for(o=0;o<3;++o){var V=b[c=(l=u[xz[o]]).type];S[o]=Math.pow(V.acc,1/V.count)/h[o]}p="data"===R||Math.max.apply(null,S)/Math.min.apply(null,S)<=4?S:[1,1,1]}u.aspectratio.x=d.aspectratio.x=p[0],u.aspectratio.y=d.aspectratio.y=p[1],u.aspectratio.z=d.aspectratio.z=p[2],i.glplot.setAspectratio(u.aspectratio),i.viewInitial.aspectratio||(i.viewInitial.aspectratio={x:u.aspectratio.x,y:u.aspectratio.y,z:u.aspectratio.z}),i.viewInitial.aspectmode||(i.viewInitial.aspectmode=u.aspectmode);var Z=u.domain||null,k=t._size||null;if(Z&&k){var E=i.container.style;E.position="absolute",E.left=k.l+Z.x[0]*k.w+"px",E.top=k.t+(1-Z.y[1])*k.h+"px",E.width=k.w*(Z.x[1]-Z.x[0])+"px",E.height=k.h*(Z.y[1]-Z.y[0])+"px"}i.glplot.redraw()}},Iz.destroy=function(){var e=this;e.glplot&&(e.camera.mouseListener.enabled=!1,e.container.removeEventListener("wheel",e.camera.wheelListener),e.camera=null,e.glplot.dispose(),e.container.parentNode.removeChild(e.container),e.glplot=null)},Iz.getCamera=function(){var e,t=this;return t.camera.view.recalcMatrix(t.camera.view.lastT()),{up:{x:(e=t.camera).up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:!0===e._ortho?"orthographic":"perspective"}}},Iz.setViewport=function(e){var t,n=this,i=e.camera;n.camera.lookAt.apply(this,[[(t=i).eye.x,t.eye.y,t.eye.z],[t.center.x,t.center.y,t.center.z],[t.up.x,t.up.y,t.up.z]]),n.glplot.setAspectratio(e.aspectratio),"orthographic"===i.projection.type!==n.camera._ortho&&(n.glplot.redraw(),n.glplot.clearRGBA(),n.glplot.dispose(),n.initializeGLPlot())},Iz.isCameraChanged=function(e){var t=this.getCamera(),n=cz.nestedProperty(e,this.id+".camera").get();function i(e,t,n,i){var r=["up","center","eye"],a=["x","y","z"];return t[r[n]]&&e[r[n]][a[i]]===t[r[n]][a[i]]}var r=!1;if(void 0===n)r=!0;else{for(var a=0;a<3;a++)for(var o=0;o<3;o++)if(!i(t,n,a,o)){r=!0;break}(!n.projection||t.projection&&t.projection.type!==n.projection.type)&&(r=!0)}return r},Iz.isAspectChanged=function(e){var t=this.glplot.getAspectratio(),n=cz.nestedProperty(e,this.id+".aspectratio").get();return void 0===n||n.x!==t.x||n.y!==t.y||n.z!==t.z},Iz.saveLayout=function(e){var t,n,i,r,a,o,s=this,l=s.fullLayout,c=s.isCameraChanged(e),u=s.isAspectChanged(e),d=c||u;if(d){var g={};if(c&&(t=s.getCamera(),i=(n=cz.nestedProperty(e,s.id+".camera")).get(),g[s.id+".camera"]=i),u&&(r=s.glplot.getAspectratio(),o=(a=cz.nestedProperty(e,s.id+".aspectratio")).get(),g[s.id+".aspectratio"]=o),lz.call("_storeDirectGUIEdit",e,l._preGUI,g),c)n.set(t),cz.nestedProperty(l,s.id+".camera").set(t);if(u)a.set(r),cz.nestedProperty(l,s.id+".aspectratio").set(r),s.glplot.redraw()}return d},Iz.updateFx=function(e,t){var n=this,i=n.camera;if(i)if("orbit"===e)i.mode="orbit",i.keyBindingMode="rotate";else if("turntable"===e){i.up=[0,0,1],i.mode="turntable",i.keyBindingMode="rotate";var r=n.graphDiv,a=r._fullLayout,o=n.fullSceneLayout.camera,s=o.up.x,l=o.up.y,c=o.up.z;if(c/Math.sqrt(s*s+l*l+c*c)<.999){var u=n.id+".camera.up",d={x:0,y:0,z:1},g={};g[u]=d;var h=r.layout;lz.call("_storeDirectGUIEdit",h,a._preGUI,g),o.up=d,cz.nestedProperty(h,u).set(d)}}else i.keyBindingMode=e;n.fullSceneLayout.hovermode=t},Iz.toImage=function(e){var t=this;e||(e="png"),t.staticMode&&t.container.appendChild(nz),t.glplot.redraw();var n=t.glplot.gl,i=n.drawingBufferWidth,r=n.drawingBufferHeight;n.bindFramebuffer(n.FRAMEBUFFER,null);var a=new Uint8Array(i*r*4);n.readPixels(0,0,i,r,n.RGBA,n.UNSIGNED_BYTE,a),function(e,t,n){for(var i=0,r=n-1;i<r;++i,--r)for(var a=0;a<t;++a)for(var o=0;o<4;++o){var s=4*(t*i+a)+o,l=4*(t*r+a)+o,c=e[s];e[s]=e[l],e[l]=c}}(a,i,r),function(e,t,n){for(var i=0;i<n;++i)for(var r=0;r<t;++r){var a=4*(t*i+r),o=e[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)e[a+l]=Math.min(s*e[a+l],255)}}(a,i,r);var o=document.createElement("canvas");o.width=i,o.height=r;var s,l=o.getContext("2d"),c=l.createImageData(i,r);switch(c.data.set(a),l.putImageData(c,0,0),e){case"jpeg":s=o.toDataURL("image/jpeg");break;case"webp":s=o.toDataURL("image/webp");break;default:s=o.toDataURL("image/png")}return t.staticMode&&t.container.removeChild(nz),s},Iz.setConvert=function(){for(var e=0;e<3;e++){var t=this.fullSceneLayout[xz[e]];dz.setConvert(t,this.fullLayout),t.setScale=cz.noop}},Iz.make4thDimension=function(){var e=this,t=e.graphDiv._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},dz.setConvert(e._mockAxis,t)};var Az=yz,Fz={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}},Qz=Hd.exports,Uz=nv,wz=Ud.extendFlat,Gz=(0,Cp.overrideAll)({visible:Uz.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:Qz.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:Uz.color,categoryorder:Uz.categoryorder,categoryarray:Uz.categoryarray,title:{text:Uz.title.text,font:Uz.title.font},type:wz({},Uz.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Uz.autotypenumbers,autorange:Uz.autorange,rangemode:Uz.rangemode,range:wz({},Uz.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:Uz.tickmode,nticks:Uz.nticks,tick0:Uz.tick0,dtick:Uz.dtick,tickvals:Uz.tickvals,ticktext:Uz.ticktext,ticks:Uz.ticks,mirror:Uz.mirror,ticklen:Uz.ticklen,tickwidth:Uz.tickwidth,tickcolor:Uz.tickcolor,showticklabels:Uz.showticklabels,tickfont:Uz.tickfont,tickangle:Uz.tickangle,tickprefix:Uz.tickprefix,showtickprefix:Uz.showtickprefix,ticksuffix:Uz.ticksuffix,showticksuffix:Uz.showticksuffix,showexponent:Uz.showexponent,exponentformat:Uz.exponentformat,minexponent:Uz.minexponent,separatethousands:Uz.separatethousands,tickformat:Uz.tickformat,tickformatstops:Uz.tickformatstops,hoverformat:Uz.hoverformat,showline:Uz.showline,linecolor:Uz.linecolor,linewidth:Uz.linewidth,showgrid:Uz.showgrid,gridcolor:wz({},Uz.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:Uz.gridwidth,zeroline:Uz.zeroline,zerolinecolor:Uz.zerolinecolor,zerolinewidth:Uz.zerolinewidth,_deprecated:{title:Uz._deprecated.title,titlefont:Uz._deprecated.titlefont}},"plot","from-root"),Rz=Gz,Lz=mW.attributes,Sz=Ud.extendFlat;function Vz(e,t,n){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}var Zz={_arrayAttrRegexps:[(0,ws.exports.counterRegex)("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:Sz(Vz(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:Sz(Vz(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:Sz(Vz(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:Lz({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:Rz,yaxis:Rz,zaxis:Rz,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}},kz=ws.exports,Ez=Qp,Xz=mW.defaults,Nz=Id.exports.mix,Wz=ws.exports,_z=Qp,Tz=Gz,Mz=NS,Hz=rV,Yz=["xaxis","yaxis","zaxis"],Dz=ws.exports,zz=Hd.exports,Oz=hg,Jz=function(e,t,n,i){var r,a,o=i.type,s=i.attributes,l=i.handleDefaults,c=i.partition||"x",u=t._subplots[o],d=u.length,g=d&&u[0].replace(/\d+$/,"");function h(e,t){return kz.coerce(r,a,s,e,t)}for(var f=0;f<d;f++){var p=u[f];r=e[p]?e[p]:e[p]={},a=Ez.newContainer(t,p,g),i.noUirevision||h("uirevision",t.uirevision);var m={};m[c]=[f/d,(f+1)/d],Xz(a,t,h,m),i.id=p,l(r,a,h,i)}},jz=function(e,t,n){var i,r;function a(e,t){return Wz.coerce(i,r,Tz,e,t)}for(var o=0;o<Yz.length;o++){var s=Yz[o];i=e[s]||{},(r=_z.newContainer(t,s))._id=s[0]+n.scene,r._name=s,Mz(i,r,a,n),Hz(i,r,a,{font:n.font,letter:s[0],data:n.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),a("gridcolor",Nz(r.color,n.bgColor,72.72727272727273).toRgbString()),a("title.text",s[0]),r.setScale=Wz.noop,a("showspikes")&&(a("spikesides"),a("spikethickness"),a("spikecolor",r.color)),a("showaxeslabels"),a("showbackground")&&a("backgroundcolor")}},Pz=Zz,Kz=Ep.getSubplotData;function qz(e,t,n,i){for(var r=n("bgcolor"),a=zz.combine(r,i.paper_bgcolor),o=["up","center","eye"],s=0;s<o.length;s++)n("camera."+o[s]+".x"),n("camera."+o[s]+".y"),n("camera."+o[s]+".z");n("camera.projection.type");var l=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),c=n("aspectmode",l?"manual":"auto");l||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},"manual"===c&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode);var u=Kz(i.fullData,"gl3d",i.id);jz(e,t,{font:i.font,scene:i.id,data:u,bgColor:a,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),Oz.getComponentMethod("annotations3d","handleDefaults")(e,t,i);var d=i.getDfltFromLayout("dragmode");if(!1!==d&&!d)if(d="orbit",e.camera&&e.camera.up){var g=e.camera.up.x,h=e.camera.up.y,f=e.camera.up.z;0!==f&&(g&&h&&f?f/Math.sqrt(g*g+h*h+f*f)>.999&&(d="turntable"):d="turntable")}else d="turntable";n("dragmode",d),n("hovermode",i.getDfltFromLayout("hovermode"))}var $z=Cp.overrideAll,eO=Qd,tO=Az,nO=Ep.getSubplotData,iO=ws.exports,rO=xm;XD.name="gl3d",XD.attr="scene",XD.idRoot="scene",XD.idRegex=XD.attrRegex=iO.counterRegex("scene"),XD.attributes=Fz,XD.layoutAttributes=Zz,XD.baseLayoutAttrOverrides=$z({hoverlabel:eO.hoverlabel},"plot","nested"),XD.supplyLayoutDefaults=function(e,t,n){var i=t._basePlotModules.length>1;Jz(e,t,n,{type:"gl3d",attributes:Pz,handleDefaults:qz,fullLayout:t,font:t.font,fullData:n,getDfltFromLayout:function(t){if(!i)return Dz.validate(e[t],Pz[t])?e[t]:void 0},autotypenumbersDflt:t.autotypenumbers,paper_bgcolor:t.paper_bgcolor,calendar:t.calendar})},XD.plot=function(e){for(var t=e._fullLayout,n=e._fullData,i=t._subplots.gl3d,r=0;r<i.length;r++){var a=i[r],o=nO(n,"gl3d",a),s=t[a],l=s.camera,c=s._scene;c||(c=new tO({id:a,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio,camera:l},t),s._scene=c),c.viewInitial||(c.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),c.plot(o,t,e.layout)}},XD.clean=function(e,t,n,i){for(var r=i._subplots.gl3d||[],a=0;a<r.length;a++){var o=r[a];!t[o]&&i[o]._scene&&(i[o]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+o).remove())}},XD.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,i=t._size,r=0;r<n.length;r++){var a=t[n[r]],o=a.domain,s=a._scene,l=s.toImage("png");t._glimages.append("svg:image").attr({xmlns:rO.svg,"xlink:href":l,x:i.l+i.w*o.x[0],y:i.t+i.h*(1-o.y[1]),width:i.w*(o.x[1]-o.x[0]),height:i.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},XD.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var t=e.substr(5);return"1"===t&&(t=""),"scene"+t}},XD.updateFx=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,i=0;i<n.length;i++){t[n[i]]._scene.updateFx(t.dragmode,t.hovermode)}};var aO={attributes:dY.exports,supplyDefaults:DY.supplyDefaults,calc:function(e,t){t._len=Math.min(t.x.length,t.y.length,t.z.length,t.value.length),t._x=qY(t.x,t._len),t._y=qY(t.y,t._len),t._z=qY(t.z,t._len),t._value=qY(t.value,t._len);var n=KY(t);t._gridFill=n.fill,t._Xs=n.Xs,t._Ys=n.Ys,t._Zs=n.Zs,t._len=n.len;for(var i=1/0,r=-1/0,a=0;a<t._len;a++){var o=t._value[a];i=Math.min(i,o),r=Math.max(r,o)}t._minValues=i,t._maxValues=r,t._vMin=void 0===t.isomin||null===t.isomin?i:t.isomin,t._vMax=void 0===t.isomax||null===t.isomin?r:t.isomax,PY(e,t,{vals:[t._vMin,t._vMax],containerStr:"",cLetter:"c"})},colorbar:{min:"cmin",max:"cmax"},plot:ED.createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:XD,categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}},oO=aO,sO=Object.freeze(e({__proto__:null,default:oO},[oO])),lO={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},cO={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""},uO=hg;function dO(e,t,n,i){if(!t||!t.visible)return null;for(var r=uO.getComponentMethod("errorbars","makeComputeError")(t),a=new Array(e.length),o=0;o<e.length;o++){var s=r(+e[o],o);if("log"===i.type){var l=i.c2l(e[o]),c=e[o]-s[0],u=e[o]+s[1];if(a[o]=[(i.c2l(c,!0)-l)*n,(i.c2l(u,!0)-l)*n],c>0){var d=i.c2l(c);i._lowerLogErrorBound||(i._lowerLogErrorBound=d),i._lowerErrorBound=Math.min(i._lowerLogErrorBound,d)}}else a[o]=[-s[0]*n,s[1]*n]}return a}var gO=function(e,t,n){var i=[dO(e.x,e.error_x,t[0],n.xaxis),dO(e.y,e.error_y,t[1],n.yaxis),dO(e.z,e.error_z,t[2],n.zaxis)],r=function(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}(i);if(0===r)return null;for(var a=new Array(r),o=0;o<r;o++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(i[l])for(var c=0;c<2;c++)s[c][l]=i[l][o][c];a[o]=s}return a},hO=$Y.exports.gl_line3d,fO=$Y.exports.gl_scatter3d,pO=$Y.exports.gl_error3d,mO=$Y.exports.gl_mesh3d,vO=$Y.exports.delaunay_triangulate,bO=ws.exports,yO=FD,IO=xD,CO=Cb,xO=lO,BO=cO,AO=Im.exports,FO=xb.appendArrayPointValue,QO=gO;function UO(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var wO=UO.prototype;function GO(e){return null==e?0:e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function RO(e){return null==e?0:e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function LO(e,t){return t(4*e)}function SO(e){return BO[e]}function VO(e,t,n,i,r){var a=null;if(bO.isArrayOrTypedArray(e)){a=[];for(var o=0;o<t;o++)void 0===e[o]?a[o]=i:a[o]=n(e[o],r)}else a=n(e,bO.identity);return a}function ZO(e,t){var n,i,r,a,o,s,l=[],c=e.fullSceneLayout,u=e.dataScale,d=c.xaxis,g=c.yaxis,h=c.zaxis,f=t.marker,p=t.line,m=t.x||[],v=t.y||[],b=t.z||[],y=m.length,I=t.xcalendar,C=t.ycalendar,x=t.zcalendar;for(o=0;o<y;o++)n=d.d2l(m[o],0,I)*u[0],i=g.d2l(v[o],0,C)*u[1],r=h.d2l(b[o],0,x)*u[2],l[o]=[n,i,r];if(Array.isArray(t.text))s=t.text;else if(void 0!==t.text)for(s=new Array(y),o=0;o<y;o++)s[o]=t.text;function B(e,t){var n=c[e];return AO.tickText(n,n.d2l(t),!0).text}var A=t.texttemplate;if(A){var F=e.fullLayout._d3locale,Q=Array.isArray(A),U=Q?Math.min(A.length,y):y,w=Q?function(e){return A[e]}:function(){return A};for(s=new Array(U),o=0;o<U;o++){var G={x:m[o],y:v[o],z:b[o]},R={xLabel:B("xaxis",m[o]),yLabel:B("yaxis",v[o]),zLabel:B("zaxis",b[o])},L={};FO(L,t,o);var S=t._meta||{};s[o]=bO.texttemplateString(w(o),R,F,L,G,S)}}if(a={position:l,mode:t.mode,text:s},"line"in t&&(a.lineColor=IO(p,1,y),a.lineWidth=p.width,a.lineDashes=p.dash),"marker"in t){var V=CO(t);a.scatterColor=IO(f,1,y),a.scatterSize=VO(f.size,y,LO,20,V),a.scatterMarker=VO(f.symbol,y,SO,""),a.scatterLineWidth=f.line.width,a.scatterLineColor=IO(f.line,1,y),a.scatterAngle=0}"textposition"in t&&(a.textOffset=function(e){var t=[0,0];if(Array.isArray(e))for(var n=0;n<e.length;n++)t[n]=[0,0],e[n]&&(t[n][0]=GO(e[n]),t[n][1]=RO(e[n]));else t[0]=GO(e),t[1]=RO(e);return t}(t.textposition),a.textColor=IO(t.textfont,1,y),a.textSize=VO(t.textfont.size,y,bO.identity,12),a.textFont=t.textfont.family,a.textAngle=0);var Z=["x","y","z"];for(a.project=[!1,!1,!1],a.projectScale=[1,1,1],a.projectOpacity=[1,1,1],o=0;o<3;++o){var k=t.projection[Z[o]];(a.project[o]=k.show)&&(a.projectOpacity[o]=k.opacity,a.projectScale[o]=k.scale)}a.errorBounds=QO(t,u,c);var E=function(e){for(var t=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],i=[1,1,1],r=0;r<3;r++){var a=e[r];a&&!1!==a.copy_zstyle&&!1!==e[2].visible&&(a=e[2]),a&&a.visible&&(t[r]=a.width/2,n[r]=yO(a.color),i[r]=a.thickness)}return{capSize:t,color:n,lineWidth:i}}([t.error_x,t.error_y,t.error_z]);return a.errorColor=E.color,a.errorLineWidth=E.lineWidth,a.errorCapSize=E.capSize,a.delaunayAxis=t.surfaceaxis,a.delaunayColor=yO(t.surfacecolor),a}function kO(e){if(bO.isArrayOrTypedArray(e)){var t=e[0];return bO.isArrayOrTypedArray(t)&&(e=t),"rgb("+e.slice(0,3).map((function(e){return Math.round(255*e)}))+")"}return null}function EO(e){return bO.isArrayOrTypedArray(e)?4===e.length&&"number"==typeof e[0]?kO(e):e.map(kO):null}wO.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[t]||0===this.textLabels[t])&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},wO.update=function(e){var t,n,i,r,a=this.scene.glplot.gl,o=xO.solid;this.data=e;var s=ZO(this.scene,e);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in xO&&(o=xO[s.lineDashes]),this.color=EO(s.scatterColor)||EO(s.lineColor),this.dataPoints=s.position,t={gl:this.scene.glplot.gl,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:e.opacity,connectGaps:e.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(t):(this.linePlot=hO(t),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=e.opacity;if(e.marker&&e.marker.opacity&&(l*=e.marker.opacity),n={gl:this.scene.glplot.gl,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=fO(n),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),r={gl:this.scene.glplot.gl,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(r):(this.textMarkers=fO(r),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),i={gl:this.scene.glplot.gl,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:e.opacity},this.errorBars?s.errorBounds?this.errorBars.update(i):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=pO(i),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var c=function(e,t,n){var i,r=(n+1)%3,a=(n+2)%3,o=[],s=[];for(i=0;i<e.length;++i){var l=e[i];!isNaN(l[r])&&isFinite(l[r])&&!isNaN(l[a])&&isFinite(l[a])&&(o.push([l[r],l[a]]),s.push(i))}var c=vO(o);for(i=0;i<c.length;++i)for(var u=c[i],d=0;d<u.length;++d)u[d]=s[u[d]];return{positions:e,cells:c,meshColor:t}}(s.position,s.delaunayColor,s.delaunayAxis);c.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(c):(c.gl=a,this.delaunayMesh=mO(c),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},wO.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};var XO=function(e,t){var n=new UO(e,t.uid);return n.update(t),n},NO={exports:{}},WO=TR,_O=gv,TO=Ym,MO=BR.hovertemplateAttrs,HO=BR.texttemplateAttrs,YO=Xd,DO=lO,zO=cO,OO=Ud.extendFlat,JO=Cp.overrideAll,jO=bh,PO=WO.line,KO=WO.marker,qO=KO.line,$O=OO({width:PO.width,dash:{valType:"enumerated",values:jO(DO),dflt:"solid",description:"Sets the dash style of the lines."}},_O("line"));function eJ(e){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",e,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var tJ=NO.exports=JO({x:WO.x,y:WO.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:OO({},WO.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:HO({},{}),hovertext:OO({},WO.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:MO(),xhoverformat:TO("x"),yhoverformat:TO("y"),zhoverformat:TO("z"),mode:OO({},WO.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:eJ("x"),y:eJ("y"),z:eJ("z")},connectgaps:WO.connectgaps,line:$O,marker:OO({symbol:{valType:"enumerated",values:jO(zO),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:OO({},KO.size,{dflt:8}),sizeref:KO.sizeref,sizemin:KO.sizemin,sizemode:KO.sizemode,opacity:OO({},KO.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:KO.colorbar,line:OO({width:OO({},qO.width,{arrayOk:!1})},_O("marker.line"))},_O("marker")),textposition:OO({},WO.textposition,{dflt:"top center"}),textfont:{color:WO.textfont.color,size:WO.textfont.size,family:OO({},WO.textfont.family,{arrayOk:!1})},opacity:YO.opacity,hoverinfo:OO({},YO.hoverinfo)},"calc","nested");tJ.x.editType=tJ.y.editType=tJ.z.editType="calc+clearAxisTypes";var nJ=hg,iJ=ws.exports,rJ=yb,aJ=eL,oJ=rL,sJ=oL,lJ=NO.exports;var cJ,uJ,dJ=SL,gJ=RL,hJ={plot:XO,attributes:NO.exports,markerSymbols:cO,supplyDefaults:function(e,t,n,i){function r(n,i){return iJ.coerce(e,t,lJ,n,i)}var a=function(e,t,n,i){var r=0,a=n("x"),o=n("y"),s=n("z");nJ.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],i),a&&o&&s&&(r=Math.min(a.length,o.length,s.length),t._length=t._xlength=t._ylength=t._zlength=r);return r}(e,t,r,i);if(a){r("text"),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),r("mode"),rJ.hasLines(t)&&(r("connectgaps"),oJ(e,t,n,i,r)),rJ.hasMarkers(t)&&aJ(e,t,n,i,r,{noSelect:!0}),rJ.hasText(t)&&(r("texttemplate"),sJ(e,t,i,r,{noSelect:!0}));var o=(t.line||{}).color,s=(t.marker||{}).color;r("surfaceaxis")>=0&&r("surfacecolor",o||s);for(var l=["x","y","z"],c=0;c<3;++c){var u="projection."+l[c];r(u+".show")&&(r(u+".opacity"),r(u+".scale"))}var d=nJ.getComponentMethod("errorbars","supplyDefaults");d(e,t,o||s||n,{axis:"z"}),d(e,t,o||s||n,{axis:"y",inherit:"z"}),d(e,t,o||s||n,{axis:"x",inherit:"z"})}else t.visible=!1},colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:function(e,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return dJ(n,t),gJ(e,t),n},moduleType:"trace",name:"scatter3d",basePlotModule:XD,categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}},fJ=hJ,pJ=Object.freeze(e({__proto__:null,default:fJ},[fJ]));M_.register([sO,pJ]);var mJ,vJ,bJ=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).firstUpdate=!0,e.surface=!0,e.point=!0,e.updateable=!1,e.GAMBLE=0,e.SURE=1,e.NR=.25,e.DEFAULT=.75,e.a=.8,e.l=1.2,e.g=.8,e.xl=0,e.xw=20,e.pw=.5,e.xs=10,e.response=e.DEFAULT,e.range={},e.range.a={start:1e-4,stop:1,step:.05},e.range.l={start:0,stop:10,step:.5},e.range.g={start:0,stop:1,step:.05},e.width=NaN,e.height=NaN,e.rem=NaN,e.parameterSpace=[],e.alignState(),e}return l(n,[{key:"alignState",value:function(){var e=this;this.updateable&&(this.response=ys.xal2v(this.xw,this.a,this.l)*ys.pg2w(this.pw,this.g)+ys.xal2v(this.xl,this.a,this.l)*(1-ys.pg2w(this.pw,this.g))>ys.xal2v(this.xs,this.a,this.l)?this.GAMBLE:this.SURE),this.parameterSpace={a:[],l:[],g:[],uDiff:[]},Xe(this.range.a.start,this.range.a.stop+.01,this.range.a.step).forEach((function(t){Xe(e.range.l.start,e.range.l.stop+.01,e.range.l.step).forEach((function(n){Xe(e.range.g.start,e.range.g.stop+.01,e.range.g.step).forEach((function(i){e.parameterSpace.a.push(t),e.parameterSpace.l.push(n),e.parameterSpace.g.push(i);var r=ys.xal2v(e.xw,t,n)*ys.pg2w(e.pw,i)+ys.xal2v(e.xl,t,n)*(1-ys.pg2w(e.pw,i))-ys.xal2v(e.xs,t,n);e.parameterSpace.uDiff.push(r)}))}))}))}},{key:"render",value:function(){return se(cJ||(cJ=C(['\n      <div class="plotly"></div>\n    '])))}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){I(d(n.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),I(d(n.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){I(d(n.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){if(I(d(n.prototype),"update",this).call(this,e),this.alignState(),!(Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))){var t=this.getComputedStyleValue("---color-text"),i=this.getComputedStyleValue("---color-element-border"),r=this.getComputedStyleValue("---color-element-background"),a=this.getComputedStyleValue("---color-element-emphasis"),o=this.getComputedStyleValue("---color-worse"),s=this.getComputedStyleValue("---color-better"),l=this.getComputedStyleValue("---color-nr"),c=[];this.surface&&c.push({name:"Decision Boundary",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.a.stop]},y:{show:!0,locations:[this.range.l.stop]},z:{show:!0,locations:[this.range.g.start]}},surface:{show:!1}}),this.point&&c.push({name:"Current Decision",type:"scatter3d",x:[this.a],y:[this.l],z:[this.g],mode:"markers",marker:{color:[this.response],coloraxis:"coloraxis2",line:{color:a,width:2},size:6}});var u={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,o],[.01,o],[.24,l],[.26,l],[.74,a],[.76,a],[.99,s],[1,s]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:t},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[Math.round(this.range.a.start),this.range.a.stop],title:{text:"alpha",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.l.start,this.range.l.stop],title:{text:"lambda",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.g.start,this.range.g.stop],title:{text:"gamma",font:{size:1.125*this.rem}}}},uirevision:!0};M_.react(this.shadowRoot.querySelector(".plotly"),c,u,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}}],[{key:"properties",get:function(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:Boolean,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),oY,Z(uJ||(uJ=C(["\n        :host {\n          display: inline-block;\n\n          width: 28rem;\n          height: 20rem;\n        }\n\n        .plotly {\n          height: 100%;\n\n          cursor: grab;\n        }\n\n        /* Plotly modebar styles */\n        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */\n        .plotly:hover .modebar .modebar-group {\n          background-color: rgba(255, 255, 255, 0.5);\n        }\n\n        .modebar-btn .icon path {\n          fill: rgba(68, 68, 68, 0.3);\n        }\n\n        .modebar-btn:hover .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n\n        .modebar-btn.active .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n      "])))]}}]),n}();customElements.define("cpt-space",bJ);var yJ,IJ,CJ=function(e){u(i,vo);var t=b(i);function i(){var e;return o(this,i),(e=t.call(this)).firstUpdate=!0,e.drag=!1,e.a=.5,e.l=2,e.x=null,e.label="",e.function="default",e.functions=[{name:"default",a:e.a,l:e.l}],e.values=[{name:"default",x:e.x,label:e.label,function:e.function}],e.xl=null,e.xw=null,e.pw=null,e.xs=null,e.trialCount=null,e.response=null,e.width=NaN,e.height=NaN,e.rem=NaN,e.alignState(),e}return l(i,[{key:"alignState",value:function(){var e=this;this.functions[0].a=this.a,this.functions[0].l=this.l,this.values[0].x=this.x,this.values[0].label=this.label,this.values[0].function=this.function,this.values.forEach((function(t){var n=e.functions.find((function(e){return e.name===t.function}));t.v=ys.xal2v(t.x,n.a,n.l)})),this.v=this.values[0].v}},{key:"trial",value:function(e,t,n,i,r,a){this.trialCount&&this.removeValue("".concat(this.trialCount,"-w")),this.trialCount&&this.removeValue("".concat(this.trialCount,"-s")),this.xl=e,this.xw=t,this.pw=n,this.xs=i,this.trialCount=r,this.response=a,this.setValue(this.xw,"".concat(this.trialCount,"-w"),"g","default",!0),this.setValue(this.xs,"".concat(this.trialCount,"-s"),"s","default",!0)}},{key:"pauseTrial",value:function(){var e=mn(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");e.interrupt("new-1"),e.interrupt("new-2"),e.datum((function(e){return e.paused=!0,e}))}},{key:"resumeTrial",value:function(){mn(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((function(e){return e.paused=!1,e})),this.requestUpdate()}},{key:"clearFunctions",value:function(){this.functions.splice(1),this.requestUpdate()}},{key:"clearValues",value:function(){this.values.splice(1),this.requestUpdate()}},{key:"clear",value:function(){this.clearFunctions(),this.clearValues()}},{key:"removeFunction",value:function(e){this.functions=this.functions.filter((function(t){return t.name!==e})),this.requestUpdate()}},{key:"removeValue",value:function(e){this.values=this.values.filter((function(t){return t.name!==e})),this.requestUpdate()}},{key:"remove",value:function(e){this.removeFunction(e),this.removeValue(e)}},{key:"getFunction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.functions.find((function(t){return t.name===e}))}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.values.find((function(t){return t.name===e}))}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return n(n({},this.getFunction(e)),this.getValue(e))}},{key:"setFunction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";"default"===n&&(this.a=e,this.l=t);var i=this.functions.find((function(e){return e.name===n}));void 0===i?this.functions.push({name:n,a:e,l:t}):(i.a=e,i.l=t),this.requestUpdate()}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];"default"===t&&(this.x=e,this.label=n);var a=this.values.find((function(e){return e.name===t}));void 0===a?this.values.push({name:t,x:e,label:n,function:i,trial:r,new:r}):(a.x=e,a.label=n,a.function=i),this.requestUpdate()}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i;this.setFunction(t,n,i),this.setValue(e,i,r,a)}},{key:"render",value:function(){return se(mJ||(mJ=C(["\n      ","\n    "])),vo.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){I(d(i.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),I(d(i.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){I(d(i.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){var t=this;if(I(d(i.prototype),"update",this).call(this,e),this.alignState(),!(Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))){var n=this.width,r=this.height,a=Math.min(n,r),o={top:2*this.rem,bottom:3*this.rem,left:3*this.rem,right:2*this.rem},s=a-(o.top+o.bottom),l=a-(o.left+o.right),c=parseInt(this.getComputedStyleValue("---transition-duration"),10),u=20,g=la().domain([-20,u]).range([0,l]);this.xScale=g;var h=la().domain([u,-20]).range([0,s]);this.yScale=h;var f=wn().subject((function(e,n){return{x:e.x,y:t.yScale(ys.xal2v(t.xScale.invert(e.x),n.a,n.l))}})).on("start",(function(e){mn(e.currentTarget).classed("dragging",!0)})).on("drag",(function(e,n){t.drag=!0;var i=t.xScale.invert(e.x),r=t.yScale.invert(e.y),a=ys.xlv2a(i,n.l,r);n.a=Number.isNaN(a)||a<0||a>1||i<0||r<0?i>r?0:1:a,"default"===n.name&&(t.a=n.a),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-value-change",{detail:t.get(n.name),bubbles:!0}))})).on("end",(function(e){mn(e.currentTarget).classed("dragging",!1)})),p=wn().subject((function(e,n){return{x:e.x,y:t.yScale(ys.xal2v(t.xScale.invert(e.x),n.a,n.l))}})).on("start",(function(e){mn(e.currentTarget).classed("dragging",!0)})).on("drag",(function(e,n){t.drag=!0;var i=t.xScale.invert(e.x),r=t.yScale.invert(e.y),a=ys.xav2l(i,n.a,r);n.l=Number.isNaN(a)||a<0||a>100||i>0||r>0?i>r?100:0:a,"default"===n.name&&(t.l=n.l),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-value-change",{detail:t.get(n.name),bubbles:!0}))})).on("end",(function(e){mn(e.currentTarget).classed("dragging",!1)})),m=wn().subject((function(e,n){return{x:t.xScale(n.x),y:t.yScale(n.v)}})).on("start",(function(e){mn(e.currentTarget).classed("dragging",!0)})).on("drag",(function(e,n){t.drag=!0;var i=t.xScale.invert(e.x);n.x=i<-20?-20:i>u?u:i,"default"===n.name&&(t.x=n.x),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:n.name,x:n.x,v:n.v,label:n.label,a:t.getFunction(n.function).a,l:t.getFunction(n.function).l},bubbles:!0}))})).on("end",(function(e){mn(e.currentTarget).classed("dragging",!1)})),v=Da().x((function(e){return g(e.x)})).y((function(e){return h(e.v)})),b=mn(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),y=b.enter().append("svg").classed("main",!0),C=y.merge(b).attr("viewBox","0 0 ".concat(a," ").concat(a)),x=y.append("g").classed("plot",!0),B=C.select(".plot").attr("transform","translate(".concat(o.left,", ").concat(o.top,")"));x.append("clipPath").attr("id","clip-cpt-value").append("rect"),B.select("clipPath rect").attr("height",s+1).attr("width",l+1);var A=x.append("g").classed("underlayer",!0),F=B.select(".underlayer");A.append("rect").classed("background",!0),F.select(".background").attr("height",s).attr("width",l),A.append("g").classed("scale-x",!0),F.select(".scale-x").attr("transform","translate(0, ".concat(h(-20),")")).transition().duration(2*c).ease(Ur).call(De(g)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),A.append("line").classed("axis-x",!0),F.select(".axis-x").transition().duration(c).ease(Ur).attr("x1",g(-20)).attr("x2",g(u)).attr("y1",h(0)).attr("y2",h(0));var Q=A.append("text").classed("title-x",!0).attr("text-anchor","middle");Q.append("tspan").classed("name",!0).text("Objective Value ("),Q.append("tspan").classed("math-var x",!0).text("x"),Q.append("tspan").classed("name",!0).text(")"),F.select(".title-x").attr("transform","translate(".concat(l/2,", ").concat(s+2.25*this.rem,")")),A.append("g").classed("scale-y",!0),F.select(".scale-y").transition().duration(2*c).ease(Ur).call(ze(h)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),A.append("line").classed("axis-y",!0),F.select(".axis-y").transition().duration(c).ease(Ur).attr("x1",g(0)).attr("x2",g(0)).attr("y1",h(u)).attr("y2",h(-20));var U=A.append("text").classed("title-y",!0).attr("text-anchor","middle");U.append("tspan").classed("name",!0).text("Subjective Value ("),U.append("tspan").classed("math-var v",!0).text("v"),U.append("tspan").classed("name",!0).text(")"),F.select(".title-y").attr("transform","translate(".concat(-2*this.rem,", ").concat(s/2,")rotate(-90)")),A.append("line").classed("diagonal",!0),F.select(".diagonal").transition().duration(2*c).ease(Ur).attr("x1",g(-20)).attr("y1",h(-20)).attr("x2",g(u)).attr("y2",h(u)),x.append("g").classed("content",!0);var w=B.select(".content"),G=w.selectAll(".lines").data(this.values.filter((function(e){return null!=e.x})),(function(e){return e.name})),R=G.enter().append("g").classed("lines",!0);R.each((function(e,t,n){var i=mn(n[t]);i.append("line").classed("line-x above",!0),i.append("line").classed("line-x below",!0),i.append("line").classed("line-v before",!0),i.append("line").classed("line-v after",!0)})),R.filter((function(e){return e.new})).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each((function(e,t,n){var i=mn(n[t]);i.select(".line-x.above").attr("x1",g(e.x)).attr("x2",g(e.x)).attr("y1",h(u)).attr("y2",h(u)),i.select(".line-x.below").attr("x1",g(e.x)).attr("x2",g(e.x)).attr("y1",h(-20)).attr("y2",h(-20)),i.select(".line-v.before").attr("x1",g(e.x)).attr("x2",g(e.x)).attr("y1",h(e.v)).attr("y2",h(e.v)),i.select(".line-v.after").attr("x1",g(e.x)).attr("x2",g(e.x)).attr("y1",h(e.v)).attr("y2",h(e.v))}));var L=R.merge(G),S=L.filter((function(e){return e.new&&!e.paused}));if(!S.empty()){var V=S.attr("data-animating-ease-time-1"),Z=S.attr("data-animating-ease-time-2"),k=function(e){return la().range([0,1]).domain([V,1])(e)},E=function(e){return la().range([0,1]).domain([Z,1])(e)},X=function(e){return function(t){return la().domain([e(V),1]).range([0,1])(e(t))}},N=function(e){return function(t){return la().domain([e(Z),1]).range([0,1])(e(t))}};S.transition("new-1").duration((function(){return Math.floor(c*(1-V))})).ease((function(e){return la().domain([0,1]).range([V,1])(e)})).attr("data-animating-ease-time-1",1).tween("animating",(function(e,n,i){var r=i[n],a=mn(r),o=vi(void 0!==r.x?r.x:e.x,e.x),s=vi(void 0!==r.a?r.a:t.getFunction(e.function).a,t.getFunction(e.function).a),l=vi(void 0!==r.l?r.l:t.getFunction(e.function).l,t.getFunction(e.function).l),c=vi(h.invert(a.select(".line-x.above").attr("y1")),e.v),d=vi(h.invert(a.select(".line-x.below").attr("y1")),e.v);return function(e){r.x=o(Ur(k(e))),r.a=s(Ur(k(e))),r.l=l(Ur(k(e))),r.v=ys.xal2v(r.x,r.a,r.l),a.select(".line-x.above").attr("x1",g(r.x)).attr("x2",g(r.x)).attr("y1",h(c(X(Qr)(e)))).attr("y2",h(u)),a.select(".line-x.below").attr("x1",g(r.x)).attr("x2",g(r.x)).attr("y1",h(d(X(Qr)(e)))).attr("y2",h(-20))}})).transition("new-2").duration((function(){return Math.floor(c*(1-Z))})).ease((function(e){return la().domain([0,1]).range([Z,1])(e)})).attr("data-animating-ease-time-2",1).tween("animating",(function(e,n,i){var r=i[n],a=mn(r),o=vi(void 0!==r.x?r.x:e.x,e.x),s=vi(void 0!==r.a?r.a:t.getFunction(e.function).a,t.getFunction(e.function).a),l=vi(void 0!==r.l?r.l:t.getFunction(e.function).l,t.getFunction(e.function).l),c=vi(g.invert(a.select(".line-v.before").attr("x1")),-20),d=vi(g.invert(a.select(".line-v.after").attr("x1")),u);return function(e){r.x=o(Ur(E(e))),r.a=s(Ur(E(e))),r.l=l(Ur(E(e))),r.v=ys.xal2v(r.x,r.a,r.l),a.select(".line-v.before").attr("x1",g(c(N(Ur)(e)))).attr("x2",g(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v)),a.select(".line-v.after").attr("x1",g(d(N(Ur)(e)))).attr("x2",g(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v))}})).on("end",(function(e,n,i){var r=i[n];r.removeAttribute("data-animating-ease-time-1"),r.removeAttribute("data-animating-ease-time-2"),e.new=!1,t.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:t.trialCount,xl:t.xl,xw:t.xw,pw:t.pw,xs:t.xs,response:t.response},bubbles:!0}))}))}var W=L.filter((function(e){return e.new&&e.paused}));if(!W.empty()){var _=W.attr("data-animating-ease-time-1"),T=W.attr("data-animating-ease-time-2");W.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).tween("paused",(function(e,n,i){var r=i[n],a=mn(r),o=vi(void 0!==r.x?r.x:e.x,e.x),s=vi(void 0!==r.a?r.a:t.getFunction(e.function).a,t.getFunction(e.function).a),l=vi(void 0!==r.l?r.l:t.getFunction(e.function).l,t.getFunction(e.function).l),c=vi(u,e.v),d=vi(-20,e.v),f=vi(e.x,-20),p=vi(e.x,u);return function(e){r.x=o(e),r.a=s(e),r.l=l(e),r.v=ys.xal2v(r.x,r.a,r.l),a.select(".line-x.above").attr("x1",g(r.x)).attr("x2",g(r.x)).attr("y1",h(c(Qr(_)))).attr("y2",h(u)),a.select(".line-x.below").attr("x1",g(r.x)).attr("x2",g(r.x)).attr("y1",h(d(Qr(_)))).attr("y2",h(-20)),a.select(".line-v.before").attr("x1",g(f(Ur(T)))).attr("x2",g(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v)),a.select(".line-v.after").attr("x1",g(p(Ur(T)))).attr("x2",g(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v))}}))}L.filter((function(e){return!e.new})).transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).tween("non-animating",(function(e,n,i){var r=i[n],a=mn(r),o=vi(void 0!==r.x?r.x:e.x,e.x),s=vi(void 0!==r.a?r.a:t.getFunction(e.function).a,t.getFunction(e.function).a),l=vi(void 0!==r.l?r.l:t.getFunction(e.function).l,t.getFunction(e.function).l);return function(e){r.x=o(e),r.a=s(e),r.l=l(e),r.v=ys.xal2v(r.x,r.a,r.l),a.select(".line-x.above").attr("x1",g(r.x)).attr("x2",g(r.x)).attr("y1",h(r.v)).attr("y2",h(u)),a.select(".line-x.below").attr("x1",g(r.x)).attr("x2",g(r.x)).attr("y1",h(r.v)).attr("y2",h(-20)),a.select(".line-v.before").attr("x1",g(-20)).attr("x2",g(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v)),a.select(".line-v.after").attr("x1",g(u)).attr("x2",g(r.x)).attr("y1",h(r.v)).attr("y2",h(r.v))}})),G.exit().remove();var M=w.selectAll(".curve-p").data(this.functions,(function(e){return e.name})),H=M.enter().append("path").classed("curve-p",!0).attr("clip-path","url(#clip-cpt-value)").merge(M);(this.firstUpdate||e.has("interactive"))&&(this.interactive?H.attr("tabindex",0).classed("interactive",!0).call(f).on("keydown",(function(e,n){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var i=n.a;switch(e.key){case"ArrowUp":case"ArrowLeft":i+=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":i-=e.shiftKey?.01:.05}(i=i<0?0:i>1?1:i)!==n.a&&(n.a=i,"default"===n.name&&(t.a=n.a),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-value-change",{detail:t.get(n.name),bubbles:!0}))),e.preventDefault()}})):H.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),H.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).attrTween("d",(function(e,t,n){var i=n[t],r=vi(void 0!==i.a?i.a:e.a,e.a),a=vi(void 0!==i.l?i.l:e.l,e.l);return function(e){i.a=r(e),i.l=a(e);var t=Xe(g(0),g.range()[1]+1,1).map((function(e){return{x:g.invert(e),v:ys.xal2v(g.invert(e),i.a,i.l)}}));return v(t)}})),M.exit().remove();var Y=w.selectAll(".curve-n").data(this.functions,(function(e){return e.name})),D=Y.enter().append("path").classed("curve-n",!0).attr("clip-path","url(#clip-cpt-value)").merge(Y);(this.firstUpdate||e.has("interactive"))&&(this.interactive?D.attr("tabindex",0).classed("interactive",!0).call(p).on("keydown",(function(e,n){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var i=n.l;switch(e.key){case"ArrowUp":case"ArrowLeft":i-=e.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":i+=e.shiftKey?.01:.05}(i=i<0?0:i>100?100:i)!==n.l&&(n.l=i,"default"===n.name&&(t.l=n.l),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-value-change",{detail:t.get(n.name),bubbles:!0}))),e.preventDefault()}})):D.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),D.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).attrTween("d",(function(e,t,n){var i=n[t],r=vi(void 0!==i.a?i.a:e.a,e.a),a=vi(void 0!==i.l?i.l:e.l,e.l);return function(e){i.a=r(e),i.l=a(e);var t=Xe(g.range()[0],g(0)+1,1).map((function(e){return{x:g.invert(e),v:ys.xal2v(g.invert(e),i.a,i.l)}}));return v(t)}})),Y.exit().remove();var z=w.selectAll(".point").data(this.values.filter((function(e){return null!=e.x})),(function(e){return e.name})),O=z.enter().append("g").classed("point",!0);O.append("circle").classed("circle",!0).attr("r",6),O.append("text").classed("label",!0);var J=O.merge(z);J.select("text").text((function(e){return e.label})),J.filter((function(n){return(t.firstUpdate||e.has("interactive"))&&t.interactive&&!n.trial})).attr("tabindex",0).classed("interactive",!0).call(m).on("keydown",(function(e,n){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var i=n.x;switch(e.key){case"ArrowUp":case"ArrowRight":i+=e.shiftKey?.2:1;break;case"ArrowDown":case"ArrowLeft":i-=e.shiftKey?.2:1}(i=i<-20?-20:i>u?u:i)!==n.x&&(n.x=i,"default"===n.name&&(t.x=n.x),t.alignState(),t.requestUpdate(),t.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:n.name,x:n.x,v:n.v,label:n.label,a:t.getFunction(n.function).a,l:t.getFunction(n.function).l},bubbles:!0}))),e.preventDefault()}})),J.filter((function(n){return(t.firstUpdate||e.has("interactive"))&&!t.interactive||n.trial})).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),J.transition().duration(this.drag?0:this.firstUpdate?2*c:c).ease(Ur).attrTween("transform",(function(e,n,i){var r=i[n],a=vi(void 0!==r.x?r.x:e.x,e.x),o=vi(void 0!==r.a?r.a:t.getFunction(e.function).a,t.getFunction(e.function).a),s=vi(void 0!==r.l?r.l:t.getFunction(e.function).l,t.getFunction(e.function).l);return function(e){return r.x=a(e),r.a=o(e),r.l=s(e),"translate(\n            ".concat(g(r.x),",\n            ").concat(h(ys.xal2v(r.x,r.a,r.l)),"\n          )")}})),z.exit().remove(),this.drag=!1,this.firstUpdate=!1}}}],[{key:"properties",get:function(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[I(d(i),"styles",this),Z(vJ||(vJ=C(['\n        :host {\n          display: inline-block;\n\n          width: 20rem;\n          height: 20rem;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n        }\n\n        text {\n          /* stylelint-disable property-no-vendor-prefix */\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n        }\n\n        .curve-p.interactive,\n        .curve-n.interactive {\n          cursor: nwse-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .curve-p.interactive:hover,\n        .curve-n.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .curve-p.interactive:active,\n        .curve-n.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .curve-p.interactive:focus,\n        :host(.keyboard) .curve-n.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .point.interactive {\n          cursor: nesw-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */\n          stroke: #000000;\n          stroke-opacity: 0;\n          stroke-width: 0;\n        }\n\n        /* Make a larger target for touch users */\n        @media (pointer: coarse) {\n          .point.interactive .circle {\n            stroke: #000000;\n            stroke-opacity: 0;\n            stroke-width: 12px;\n          }\n        }\n\n        .point.interactive:hover {\n          filter: url("#shadow-4");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #ff0000;\n        }\n\n        .point.interactive:active {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #00ff00;\n        }\n\n        :host(.keyboard) .point.interactive:focus {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #0000ff;\n        }\n\n        .background {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-border);\n          stroke-width: 1;\n          shape-rendering: crispEdges;\n        }\n\n        .title-x,\n        .title-y {\n          font-weight: 600;\n\n          fill: currentColor;\n        }\n\n        .tick {\n          font-size: 0.75rem;\n        }\n\n        .scale-x path,\n        .scale-x line,\n        .scale-y path,\n        .scale-y line {\n          stroke: var(---color-element-border);\n        }\n\n        .axis-x,\n        .axis-y {\n          stroke: var(---color-element-border);\n          shape-rendering: crispEdges;\n        }\n\n        .diagonal {\n          stroke: var(---color-element-border);\n          stroke-dasharray: 4;\n          stroke-width: 1;\n        }\n\n        .curve-p,\n        .curve-n {\n          fill: none;\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .line-x,\n        .line-v {\n          fill: none;\n          stroke-width: 2;\n        }\n\n        .line-x {\n          stroke: var(---color-x);\n        }\n\n        .line-v {\n          stroke: var(---color-v);\n        }\n\n        .point .circle {\n          fill: var(---color-element-emphasis);\n\n          /* r: 6; HACK: Firefox does not support CSS SVG Geometry Properties */\n        }\n\n        .point .label {\n          font-size: 0.75rem;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n\n          fill: var(---color-text-inverse);\n        }\n      '])))]}}]),i}();customElements.define("cpt-value",CJ);var xJ,BJ,AJ=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).width=NaN,e.height=NaN,e.rem=NaN,e}return l(n,[{key:"render",value:function(){return se(yJ||(yJ=C(["\n      ","\n      <slot></slot>\n    "])),vo.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){var e=this;I(d(n.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this)),this.observer=new MutationObserver((function(t){t.some((function(t){return"childList"===t.type||"attributes"===t.type&&t.target!==e}))&&e.requestUpdate()})),this.observer.observe(this,{subtree:!0,childList:!0,attributes:!0})}},{key:"disconnectedCallback",value:function(){this.observer.disconnect(),window.removeEventListener("resize",this.getDimensions.bind(this)),I(d(n.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){I(d(n.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){var t=this;if(I(d(n.prototype),"update",this).call(this,e),!(Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))){var i=this.width,r=this.height,a=Math.min(i,r),o=a-(0+0),s=a-(0+0),l=this.querySelectorAll("decision-outcome"),c=l.length?-l[0].p:0,u=function(){var e=Oa,t=za,n=null,i=ua(0),r=ua(Ga),a=ua(0);function o(o){var s,l,c,u,d,g=(o=_a(o)).length,h=0,f=new Array(g),p=new Array(g),m=+i.apply(this,arguments),v=Math.min(Ga,Math.max(-Ga,r.apply(this,arguments)-m)),b=Math.min(Math.abs(v)/g,a.apply(this,arguments)),y=b*(v<0?-1:1);for(s=0;s<g;++s)(d=p[f[s]=s]=+e(o[s],s,o))>0&&(h+=d);for(null!=t?f.sort((function(e,n){return t(p[e],p[n])})):null!=n&&f.sort((function(e,t){return n(o[e],o[t])})),s=0,c=h?(v-g*y)/h:0;s<g;++s,m=u)l=f[s],u=m+((d=p[l])>0?d*c:0)+y,p[l]={data:o[l],index:s,value:d,startAngle:m,endAngle:u,padAngle:b};return p}return o.value=function(t){return arguments.length?(e="function"==typeof t?t:ua(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,n=null,o):t},o.sort=function(e){return arguments.length?(n=e,t=null,o):n},o.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:ua(+e),o):i},o.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:ua(+e),o):r},o.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:ua(+e),o):a},o}().startAngle(c*Math.PI-Math.PI).endAngle(c*Math.PI+Math.PI).sortValues(null).value((function(e){return e.p}))(l),g=u.filter((function(e){return!e.data.interactive})),h=u.filter((function(e){return e.data.interactive})),f=wn().subject((function(e,t){var n=U((t.endAngle+t.startAngle)/2),i=U(Math.atan2(e.y,e.x)+Math.PI/2);return l.forEach((function(e){e.startP=e.p})),{arcAngle:n,startAngle:U(i-n)}})).on("start",(function(e){mn(e.currentTarget).classed("dragging",!0)})).on("drag",(function(e,n){var i=U(Math.atan2(e.y,e.x)+Math.PI/2),r=U(i-e.subject.arcAngle),a=U(e.subject.startAngle>0?r-e.subject.startAngle:e.subject.startAngle-r)/Math.PI,o=n.data.startP+a,s=o>.99?.99:o<.01?.01:o;l.forEach((function(e){e.p=e===n.data?s:e.startP/(1-n.data.startP)*(1-s)})),t.dispatchEvent(new CustomEvent("decision-outcome-change",{detail:{x:n.data.x,p:n.data.p,name:n.data.name},bubbles:!0}))})).on("end",(function(e){mn(e.currentTarget).classed("dragging",!1)})),p=mn(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),m=p.enter().append("svg").classed("main",!0),v=m.merge(p).attr("viewBox","0 0 ".concat(a," ").concat(a)),b=m.append("g").classed("pie",!0),y=v.select(".pie").attr("transform","translate(".concat(s/2,", ").concat(o/2,")"));b.append("circle").classed("outline",!0),y.select(".outline").attr("r",Math.min(s,o)/2-1);var C=y.selectAll(".arc").data(u);C.enter().append("path").call(f).merge(C).attr("tabindex",(function(e){return h.includes(e)&&u.length>1?0:null})).attr("class",(function(e){return"arc ".concat(e.data.name)})).classed("interactive",(function(e){return h.includes(e)&&u.length>1})).attr("d",Wa().innerRadius(0).outerRadius(Math.min(s,o)/2-1)),C.exit().remove();var x=y.selectAll(".label.static").data(g),B=y.selectAll(".label.interactive").data(h),A=x.enter().append("text"),F=B.enter().append("foreignObject");F.append("xhtml:decidable-spinner").on("input",(function(e,n){n.data.x=parseFloat(e.target.value),t.dispatchEvent(new CustomEvent("decision-outcome-change",{detail:{x:n.data.x,p:n.data.p,name:n.data.name},bubbles:!0}))})),A.merge(x).attr("class",(function(e){return"label static ".concat(e.data.name)})).attr("transform",(function(e){if(1===u.length)return"translate(0, 0)";var t=Math.min(s,o)/2*.6,n=Wa().innerRadius(t).outerRadius(t);return"translate(".concat(n.centroid(e),")")})).text((function(e){return"$".concat(e.data.x.toFixed(0))}));var Q=F.merge(B).attr("class",(function(e){return"label interactive ".concat(e.data.name)})).attr("transform",(function(e){var n=parseFloat(t.getComputedStyleValue("--decidable-spinner-input-width")),i=parseFloat(t.getComputedStyleValue("--decidable-spinner-font-size")),r=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10),a=n*r/-2,l=i*r*1.5/-2;if(1===u.length)return"translate(".concat(a,", ").concat(l,")");var c=Math.min(s,o)/2*.6,d=Wa().innerRadius(c).outerRadius(c);return"translate(".concat(d.centroid(e)[0]+a,", ").concat(d.centroid(e)[1]+l,")")}));Q.select("decidable-spinner").attr("value",(function(e){return"".concat(e.data.x.toFixed(0))})),x.exit().remove(),B.exit().remove()}function U(e){var t=(e+2*Math.PI)%(2*Math.PI);return t>Math.PI?t-2*Math.PI:t<-Math.PI?t+2*Math.PI:t}}}],[{key:"properties",get:function(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(IJ||(IJ=C(['\n        :host {\n          --decidable-spinner-font-size: 1.75rem;\n          --decidable-spinner-input-width: 4rem;\n          --decidable-spinner-prefix: "$";\n\n          display: inline-block;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n          overflow: visible;\n        }\n\n        .outline {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .arc {\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .arc.interactive {\n          cursor: ns-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .arc.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .arc.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .arc.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .arc.win {\n          fill: var(---color-better-light);\n        }\n\n        .arc.loss {\n          fill: var(---color-worse-light);\n        }\n\n        .arc.sure {\n          fill: var(---color-even-light);\n        }\n\n        .label.static {\n          font-size: 1.75rem;\n\n          user-select: none;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n        }\n\n        .label.interactive {\n          width: var(--decidable-spinner-input-width);\n          height: calc(var(--decidable-spinner-font-size) * 1.5);\n          overflow: visible;\n        }\n\n        /* HACK: Get Safari to work with SVG foreignObject */\n        /* https://stackoverflow.com/questions/51313873/svg-foreignobject-not-working-properly-on-safari */\n        /* https://bugs.webkit.org/show_bug.cgi?id=23113 */\n        .label.interactive decidable-spinner {\n          position: fixed;\n        }\n\n        .label.interactive.win decidable-spinner {\n          background-color: var(---color-better-light);\n        }\n\n        .label.interactive.loss decidable-spinner {\n          background-color: var(---color-worse-light);\n        }\n\n        .label.interactive.sure decidable-spinner {\n          background-color: var(---color-even-light);\n        }\n      '])))]}}]),n}();customElements.define("decision-option",AJ);var FJ,QJ,UJ,wJ,GJ,RJ=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).x=0,e.p=0,e.name="",e}return l(n,[{key:"render",value:function(){return se(xJ||(xJ=C([""])))}}],[{key:"properties",get:function(){return{x:{attribute:"value",type:Number,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},name:{attribute:"name",type:String,reflect:!0}}}},{key:"styles",get:function(){return[Z(BJ||(BJ=C(["\n        :host {\n          display: none;\n        }\n      "])))]}}]),n}();customElements.define("decision-outcome",RJ);var LJ,SJ,VJ,ZJ,kJ,EJ,XJ,NJ,WJ,_J,TJ,MJ,HJ=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).states=["choice","fixation","blank"],e.state="choice",e.xl=0,e.xw=100,e.pw=.75,e.xs=50,e}return l(n,[{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("decision-choice-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs},bubbles:!0}))}},{key:"winChange",value:function(e){this.xw=parseFloat(e.detail.x),this.pw=parseFloat(e.detail.p),this.sendEvent()}},{key:"sureChange",value:function(e){this.xs=parseFloat(e.detail.x),this.sendEvent()}},{key:"render",value:function(){return se(FJ||(FJ=C(['\n      <div class="holder">\n        <decision-option ?interactive='," @decision-outcome-change=",">\n          ",'\n        </decision-option><span class="query"\n         >',"</span\n        ><decision-option ?interactive="," @decision-outcome-change=",">\n          ","\n        </decision-option>\n      </div>"])),this.interactive,this.winChange.bind(this),"choice"===this.state?se(QJ||(QJ=C(['\n              <decision-outcome probability="','" value="','" name="loss"></decision-outcome>\n              <decision-outcome ?interactive=',' probability="','" value="','" name="win"></decision-outcome>'])),1-this.pw,this.xl,this.interactive,this.pw,this.xw):"","choice"===this.state?"?":"fixation"===this.state?"+":se(UJ||(UJ=C([""]))),this.interactive,this.sureChange.bind(this),"choice"===this.state?se(wJ||(wJ=C(["\n              <decision-outcome ?interactive=",' probability="1" value="','" name="sure"></decision-outcome>'])),this.interactive,this.xs):"")}}],[{key:"properties",get:function(){return{state:{attribute:"state",type:String,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(GJ||(GJ=C(["\n        :host {\n          display: inline-block;\n        }\n\n        .holder {\n          user-select: none;\n        }\n\n        .holder > * {\n          vertical-align: middle;\n        }\n\n        .query {\n          margin: 0 0.5rem;\n\n          font-family: var(--font-family-code);\n          font-size: 1.75rem;\n        }\n\n        decision-option {\n          width: 10rem;\n          height: 10rem;\n        }\n      "])))]}}]),n}();customElements.define("decision-choice",HJ);var YJ,DJ,zJ,OJ,JJ,jJ,PJ,KJ,qJ,$J,ej,tj,nj,ij,rj,aj,oj,sj,lj=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).trials=void 0,e.duration=void 0,e.run=!1,e.pause=!1,e.reset=!1,e.states=["resetted","running","paused","ended"],e.state="resetted",e}return l(n,[{key:"setTrials",value:function(e){this.trials=e.target.value,this.dispatchEvent(new CustomEvent("decision-control-trials",{detail:{trials:this.trials},bubbles:!0}))}},{key:"setDuration",value:function(e){this.duration=e.target.value,this.dispatchEvent(new CustomEvent("sdt-control-duration",{detail:{duration:this.duration},bubbles:!0}))}},{key:"doRun",value:function(){this.state="running",this.dispatchEvent(new CustomEvent("decision-control-run",{detail:{},bubbles:!0}))}},{key:"doPause",value:function(){this.state="paused",this.dispatchEvent(new CustomEvent("decision-control-pause",{detail:{},bubbles:!0}))}},{key:"doReset",value:function(){this.state="resetted",this.dispatchEvent(new CustomEvent("decision-control-reset",{detail:{},bubbles:!0}))}},{key:"complete",value:function(){this.state="ended"}},{key:"render",value:function(){return se(LJ||(LJ=C(['\n      <div class="holder">\n        ',"\n        ",'\n        <div class="buttons">\n          ',"\n          ","\n          ","\n        </div>\n      </div>"])),this.trials?se(SJ||(SJ=C(['<decidable-slider min="1" max="100" step="1" .value='," @change="," @input=",">Trials</decidable-slider>"])),this.trials,this.setTrials.bind(this),this.setTrials.bind(this)):se(VJ||(VJ=C([""]))),this.duration?se(ZJ||(ZJ=C(['<decidable-slider min="10" max="4000" step="10" .value='," @change="," @input=",">Duration</decidable-slider>"])),this.duration,this.setDuration.bind(this),this.setDuration.bind(this)):se(kJ||(kJ=C([""]))),this.run?se(EJ||(EJ=C(['<decidable-button name="run" ?disabled='," @click=",">Run</decidable-button>"])),"running"===this.state||"ended"===this.state,this.doRun.bind(this)):se(XJ||(XJ=C([""]))),this.pause?se(NJ||(NJ=C(['<decidable-button name="pause" ?disabled='," @click=",">Pause</decidable-button>"])),"running"!==this.state,this.doPause.bind(this)):se(WJ||(WJ=C([""]))),this.reset?se(_J||(_J=C(['<decidable-button name="reset" ?disabled='," @click=",">Reset</decidable-button>"])),"resetted"===this.state,this.doReset.bind(this)):se(TJ||(TJ=C([""]))))}}],[{key:"properties",get:function(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(MJ||(MJ=C(["\n        :host {\n          display: inline-block;\n        }\n\n        .holder {\n          display: flex;\n\n          flex-direction: row;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n\n        .buttons {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n      "])))]}}]),n}();customElements.define("decision-control",lj);var cj,uj,dj=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).feedbacks=["none","outcome"],e.feedback="none",e.trial=!1,e.payoffs=["none","selection","both"],e.payoff="none",e.states=["off","waiting","feedback"],e.state="off",e.trialCount=0,e.trialTotal=0,e.xl=0,e.xw=0,e.pw=0,e.xs=0,e.gamblePayoff=0,e.surePayoff=0,e.nrPayoff=0,e.betters=["gamble","sure","even"],e.better=void 0,e.responses=["gamble","sure","nr"],e.response=void 0,e.outcomes=["better","worse","even","nr"],e.outcome=void 0,e}return l(n,[{key:"trialPayoff",get:function(){switch(this.response){case"gamble":return this.gamblePayoff;case"sure":return this.surePayoff;case"nr":return this.nrPayoff;default:return}}},{key:"start",value:function(e,t,n,i,r,a,o,s){this.state="waiting",this.xl=e,this.xw=t,this.pw=n,this.xs=i,this.gamblePayoff=r,this.surePayoff=a,this.better=o,this.trialCount=s,this.response=void 0,this.outcome=void 0}},{key:"stop",value:function(){this.state="feedback",void 0===this.response&&(this.outcome="nr")}},{key:"gamble",value:function(){this.responded("gamble")}},{key:"sure",value:function(){this.responded("sure")}},{key:"responded",value:function(e){this.state="feedback",this.response=e,this.outcome="even"===this.better?"even":this.better===this.response?"better":"worse",this.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:this.trialCount,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,outcome:this.outcome,payoff:this.trialPayoff},bubbles:!0}))}},{key:"reset",value:function(){this.state="off",this.trialCount=0,this.better=void 0,this.gamblePayoff=0,this.surePayoff=0,this.response=void 0,this.outcome=void 0}},{key:"render",value:function(){return se(YJ||(YJ=C(['\n      <div class="holder">\n        ','\n        <div class="responses">\n          <decidable-button name="gamble" class="response ','" ?disabled='," @click=",'>Gamble</decidable-button>\n          <decidable-button name="sure" class="response ','" ?disabled='," @click=",">Sure</decidable-button>\n        </div>\n        ","\n      </div>"])),this.trial?se(DJ||(DJ=C(['\n            <div class="trials">\n              <div class="trial">\n                <span class="label">Trial: </span><span class="count">','</span><span class="of"> of </span><span class="total">',"</span>\n              </div>\n            </div>"])),this.trialCount,this.trialTotal):se(zJ||(zJ=C([""]))),"feedback"===this.state&&"gamble"===this.response?"selected":"waiting"===this.state?"waiting":"","waiting"!==this.state||!0!==this.interactive,this.gamble.bind(this),"feedback"===this.state&&"sure"===this.response?"selected":"waiting"===this.state?"waiting":"","waiting"!==this.state||!0!==this.interactive,this.sure.bind(this),"none"!==this.feedback||"none"!==this.payoff?se(OJ||(OJ=C(['\n            <div class="feedbacks">\n              <div class="feedback gamble\n                ','">\n                ',"\n                ",'\n              </div>\n              <div class="feedback sure\n                ','">\n                ',"\n                ","\n              </div>\n            </div>"])),"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?this.outcome:"","feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?"better"===this.outcome?se(JJ||(JJ=C(['<span class="outcome">Better</span>']))):"worse"===this.outcome?se(jJ||(jJ=C(['<span class="outcome">Worse</span>']))):"even"===this.outcome?se(PJ||(PJ=C(['<span class="outcome">Even</span>']))):se(KJ||(KJ=C(['<span class="outcome">No<br>Response</span>']))):"","both"!==this.payoff&&"selection"!==this.payoff||"gamble"!==this.response?se($J||($J=C([""]))):se(qJ||(qJ=C(['<span class="payoff">'," ","</span>"])),"gamble"===this.response?"Win:":"Miss:",this.trialPayoff),"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?this.outcome:"","feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?"better"===this.outcome?se(ej||(ej=C(['<span class="outcome">Better</span>']))):"worse"===this.outcome?se(tj||(tj=C(['<span class="outcome">Worse</span>']))):"even"===this.outcome?se(nj||(nj=C(['<span class="outcome">Even</span>']))):se(ij||(ij=C(['<span class="outcome">No<br>Response</span>']))):"","both"!==this.payoff&&"selection"!==this.payoff||"sure"!==this.response?se(aj||(aj=C([""]))):se(rj||(rj=C(['<span class="payoff">'," ","</span>"])),"sure"===this.response?"Win:":"Miss:",this.trialPayoff)):se(oj||(oj=C([""]))))}}],[{key:"properties",get:function(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(sj||(sj=C(['\n        :host {\n          display: inline-block;\n        }\n\n        /* Overall container */\n        .holder {\n          display: flex;\n\n          flex-direction: column;\n        }\n\n        /* Trial messages */\n        .trials {\n          display: flex;\n\n          flex-direction: column;\n\n          justify-content: center;\n        }\n\n        .trial {\n          text-align: center;\n        }\n\n        .trial .label {\n          font-weight: 600;\n        }\n\n        /* Response buttons */\n        .responses {\n          display: flex;\n\n          flex-direction: row;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n\n        .response {\n          width: 5.25rem;\n        }\n\n        .waiting[disabled] {\n          --decidable-button-background-color: var(---color-element-enabled);\n        }\n\n        .selected[disabled][name="gamble"] {\n          --decidable-button-background-color: var(---color-worse);\n        }\n\n        .selected[disabled][name="sure"] {\n          --decidable-button-background-color: var(---color-better);\n        }\n\n        /* Feedback messages */\n        .feedbacks {\n          display: flex;\n\n          flex-direction: row;\n\n          justify-content: center;\n        }\n\n        /* Outcome feedback */\n        .feedback {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n\n          width: 5.25rem;\n          height: 3.5rem;\n          padding: 0.375rem 0.75rem;\n          margin: 0.25rem;\n\n          text-align: center;\n\n          background-color: var(---color-element-background);\n          border: 1px solid var(---color-element-border);\n        }\n\n        .feedback.better {\n          background-color: var(---color-better-light);\n        }\n\n        .feedback.worse {\n          background-color: var(---color-worse-light);\n        }\n\n        .feedback.even {\n          background-color: var(---color-even-light);\n        }\n\n        .feedback.nr {\n          background-color: var(---color-nr-light);\n        }\n\n        .feedback .outcome {\n          font-weight: 600;\n          line-height: 1.15;\n        }\n\n        :host([payoff="selection"]) .feedback,\n        :host([payoff="both"]) .feedback {\n          height: 4rem;\n        }\n\n        /* Payoff feedback */\n        .payoff {\n          text-align: center;\n        }\n\n        .payoff .label {\n          font-weight: 600;\n        }\n      '])))]}}]),n}();customElements.define("decision-response",dj),M_.register([sO,pJ]);var gj,hj,fj=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).firstUpdate=!0,e.surface=!0,e.points=["all","first","rest","none"],e.point="first",e.updateable=!1,e.a=.8,e.l=1.2,e.g=.8,e.xl=0,e.xw=20,e.pw=.5,e.xs=10,e.response="",e.label="",e.choices=[{name:"default",xw:e.xw,pw:e.pw,xs:e.xs,response:e.response,label:""}],e.GAMBLE=0,e.SURE=1,e.NR=.25,e.DEFAULT=.75,e.pointList=[],e.range={},e.range.xs={start:5,stop:15,step:.5},e.range.xw={start:10,stop:30,step:1},e.range.pw={start:0,stop:1,step:.05},e.width=NaN,e.height=NaN,e.rem=NaN,e.decisionSpace=[],e.alignState(),e}return l(n,[{key:"alignState",value:function(){var e=this;this.choices[0].name="default",this.choices[0].xw=this.xw,this.choices[0].pw=this.pw,this.choices[0].xs=this.xs,this.choices[0].response=this.response,this.choices[0].label=this.label,this.updateable&&(this.choices.forEach((function(t){t.response=ys.xal2v(t.xw,e.a,e.l)*ys.pg2w(t.pw,e.g)+ys.xal2v(e.xl,e.a,e.l)*(1-ys.pg2w(t.pw,e.g))>ys.xal2v(t.xs,e.a,e.l)?"gamble":"sure"})),this.response=this.choices[0].response),this.pointList={xw:[],pw:[],xs:[],response:[],label:[]},this.choices.forEach((function(t,n){(0===n&&("first"===e.point||"all"===e.point)||n>0&&("rest"===e.point||"all"===e.point))&&(e.pointList.xw.push(t.xw),e.pointList.pw.push(t.pw),e.pointList.xs.push(t.xs),e.pointList.response.push("gamble"===t.response?e.GAMBLE:"sure"===t.response?e.SURE:"nr"===t.response?e.NR:e.DEFAULT),e.pointList.label.push(t.label))})),this.decisionSpace={xs:[],xw:[],pw:[],uDiff:[]},Xe(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).forEach((function(t){Xe(e.range.xw.start,e.range.xw.stop+.01,e.range.xw.step).forEach((function(n){Xe(e.range.pw.start,e.range.pw.stop+.01,e.range.pw.step).forEach((function(i){e.decisionSpace.xs.push(t),e.decisionSpace.xw.push(n),e.decisionSpace.pw.push(i);var r=ys.xal2v(n,e.a,e.l)*ys.pg2w(i,e.g)+ys.xal2v(e.xl,e.a,e.l)*(1-ys.pg2w(i,e.g))-ys.xal2v(t,e.a,e.l);e.decisionSpace.uDiff.push(r)}))}))}))}},{key:"clear",value:function(){this.choices=[{}],this.requestUpdate()}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this.choices.find((function(t){return t.name===e}));return void 0===t?null:t}},{key:"set",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"default",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";"default"===r&&(this.xw=e,this.pw=t,this.xs=n,this.response=i,this.label=a);var o=this.choices.find((function(e){return e.name===r}));void 0===o?this.choices.push({name:r,xw:e,pw:t,xs:n,response:i,label:a}):(o.xw=e,o.pw=t,o.xs=n,o.response=i,o.label=a),this.requestUpdate()}},{key:"render",value:function(){return se(cj||(cj=C(['\n      <div class="plotly"></div>\n    '])))}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){I(d(n.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),I(d(n.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(e){I(d(n.prototype),"firstUpdated",this).call(this,e),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(e){if(I(d(n.prototype),"update",this).call(this,e),this.alignState(),!(Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))){var t=this.getComputedStyleValue("---color-text"),i=this.getComputedStyleValue("---color-element-border"),r=this.getComputedStyleValue("---color-element-background"),a=this.getComputedStyleValue("---color-element-emphasis"),o=this.getComputedStyleValue("---color-worse"),s=this.getComputedStyleValue("---color-better"),l=this.getComputedStyleValue("---color-nr"),c=[];this.surface&&c.push({name:"Decision Boundary",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.xs.stop]},y:{show:!0,locations:[this.range.xw.stop]},z:{show:!0,locations:[this.range.pw.start]}},surface:{show:!1}}),c.push({name:"Current Decision",type:"scatter3d",x:this.pointList.xs,y:this.pointList.xw,z:this.pointList.pw,mode:"markers",marker:{color:this.pointList.response,coloraxis:"coloraxis2",line:{color:a,width:2},size:6}});var u={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(35, 35, 104)"],[.35,"rgb(69,69,208)"],[.5,"rgb(190,190,190)"],[.65,"rgb(240,50,230)"],[1,"rgb(120,25,115)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,o],[.01,o],[.24,l],[.26,l],[.74,a],[.76,a],[.99,s],[1,s]],showscale:!1},font:{family:'"Source Sans", sans-serif',color:t},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.xs.start,this.range.xs.stop],title:{text:"Sure Value",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.xw.start,this.range.xw.stop],title:{text:"Win Value",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:r,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:i,showline:!0,linecolor:i,zeroline:!1,range:[this.range.pw.start,this.range.pw.stop],title:{text:"Win Probability",font:{size:1.125*this.rem}}}},uirevision:!0};M_.react(this.shadowRoot.querySelector(".plotly"),c,u,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1}}}],[{key:"properties",get:function(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:String,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),oY,Z(uj||(uj=C(["\n        :host {\n          display: inline-block;\n\n          width: 28rem;\n          height: 20rem;\n        }\n\n        .plotly {\n          height: 100%;\n\n          cursor: grab;\n        }\n\n        /* Plotly modebar styles */\n        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */\n        .plotly:hover .modebar .modebar-group {\n          background-color: rgba(255, 255, 255, 0.5);\n        }\n\n        .modebar-btn .icon path {\n          fill: rgba(68, 68, 68, 0.3);\n        }\n\n        .modebar-btn:hover .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n\n        .modebar-btn.active .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n      "])))]}}]),n}();customElements.define("decision-space",fj);var pj,mj,vj,bj,yj,Ij,Cj,xj,Bj=function(e){u(n,vo);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).duration=2e3,e.iti=2e3,e.trials=5,e.running=!1,e.states=["resetted","iti","stimulus","ended"],e.state="resetted",e.range={},e.range.xl={start:0,stop:0,step:1},e.range.xw={start:10,stop:30,step:1},e.range.pw={start:.1,stop:.9,step:.1},e.range.xs={start:5,stop:15,step:1},e.range.xl.values=Xe(e.range.xl.start,e.range.xl.stop+.01,e.range.xl.step),e.range.xw.values=Xe(e.range.xw.start,e.range.xw.stop+.01,e.range.xw.step),e.range.pw.values=Xe(e.range.pw.start,e.range.pw.stop+.01,e.range.pw.step),e.range.xs.values=Xe(e.range.xs.start,e.range.xs.stop+.01,e.range.xs.step),e.firstUpdate=!0,e.xl=0,e.xw=0,e.pw=0,e.xs=0,e.trial=0,e.baseTime=0,e.pauseTime=0,e.startTime=0,e.lastTime=0,e.runner=void 0,e}return l(n,[{key:"render",value:function(){return se(gj||(gj=C(['\n      <div class="holder">\n        <decision-choice state="','" probability="','" win="','" loss="','" sure="','"></decision-choice>\n      </div>'])),"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank",this.pw,this.xw,this.xl,this.xs)}},{key:"update",value:function(e){I(d(n.prototype),"update",this).call(this,e),(this.firstUpdate||e.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=Ei()-this.pauseTime,this.pauseTime=0),this.runner=function(e,t,n){var i=new Ni,r=t;return null==t?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(e,t,n){t=+t,n=null==n?Ei():+n,i._restart((function a(o){o+=r,i._restart(a,r+=t,n),e(o)}),t,n)},i.restart(e,t,n),i)}(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=Ei())),this.firstUpdate=!1}},{key:"reset",value:function(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}},{key:"run",value:function(){var e=Ei(),t=this.baseTime?e-this.baseTime:0,n=this.baseTime?t-this.startTime:0;this.lastTime=t,"resetted"===this.state?(this.state="iti",this.baseTime=e,this.startTime=0,this.dispatchEvent(new CustomEvent("decision-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&n>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=t,this.xl=this.range.xl.values[Math.floor(Math.random()*this.range.xl.values.length)],this.xw=this.range.xw.values[Math.floor(Math.random()*this.range.xw.values.length)],this.pw=this.range.pw.values[Math.floor(Math.random()*this.range.pw.values.length)],this.xs=this.range.xs.values[Math.floor(Math.random()*this.range.xs.values.length)],this.vDiff=this.xw*this.pw+this.xl*(1-this.pw)-this.xs,this.gamblePayoff=Math.random()<this.pw?this.xw:this.xl,this.surePayoff=this.xs,this.better=this.vDiff>0?"gamble":this.vDiff<0?"sure":"equal",this.dispatchEvent(new CustomEvent("decision-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0}))):"stimulus"===this.state&&n>=this.duration&&(this.dispatchEvent(new CustomEvent("decision-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("decision-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=t))}}],[{key:"properties",get:function(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}},{key:"styles",get:function(){return[I(d(n),"styles",this),Z(hj||(hj=C(["\n        :host {\n          display: inline-block;\n        }\n      "])))]}}]),n}();customElements.define("decision-task",Bj);var Aj,Fj,Qj,Uj,wj,Gj,Rj,Lj,Sj,Vj,Zj,kj,Ej,Xj,Nj=function(e){u(n,Is);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).p=.75,e.g=.5,e.alignState(),e}return l(n,[{key:"alignState",value:function(){this.w=ys.pg2w(this.p,this.g)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-pg2w-change",{detail:{p:this.p,g:this.g,w:this.w},bubbles:!0}))}},{key:"pInput",value:function(e){this.p=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"gInput",value:function(e){this.g=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var e,t,n;this.alignState(),this.numeric?(e=se(pj||(pj=C(['<decidable-spinner class="p bottom" ?disabled=',' min="0" max="1" step="0.01" .value="','" @input=','>\n          <var class="math-var">p</var>\n        </decidable-spinner>'])),!this.interactive,this.p,this.pInput.bind(this)),t=se(mj||(mj=C(['<decidable-spinner class="g bottom" ?disabled=',' min="0" max="1" step="0.01" .value="','" @input=','>\n          <var class="math-var"></var>\n        </decidable-spinner>'])),!this.interactive,this.g,this.gInput.bind(this)),n=se(vj||(vj=C(['<decidable-spinner class="w bottom" disabled min="0" max="1" step=".01" .value="','">\n          <var class="math-var">w</var>\n        </decidable-spinner>'])),+this.w.toFixed(2))):(e=se(bj||(bj=C(['<var class="math-var p">p</var>']))),t=se(yj||(yj=C(['<var class="math-var g"></var>']))),n=se(Ij||(Ij=C(['<var class="math-var w">w</var>']))));var i=se(Cj||(Cj=C(['\n      <tr>\n        <td rowspan="2">\n          ','<span class="equals">=</span>\n        </td>\n        <td class="underline">\n          ','<sup class="exp">','</sup>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <span class="bracket tight">[</span>','<sup class="exp">','</sup><span class="plus">+</span><span class="paren tight">(</span>1<span class="minus"></span>','<span class="paren tight">)</span><sup class="exp">','</sup><span class="bracket tight">]</span><sup class="exp">1/',"</sup>\n        </td>\n      </tr>"])),n,e,t,e,t,e,t,t);return se(xj||(xj=C(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"])),i)}}],[{key:"properties",get:function(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}}]),n}();customElements.define("cpt-equation-pg2w",Nj);var Wj,_j,Tj,Mj,Hj,Yj,Dj,zj,Oj,Jj,jj=function(e){u(n,Is);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).v=[10,0],e.w=[.75,.25],e.n=2,e.nMax=4,e.vMax=new Array(e.nMax).fill(0),e.wMax=new Array(e.nMax).fill(0),e.alignState(),e}return l(n,[{key:"alignState",value:function(){var e=this;this.v=this.v.length<this.n?this.v.concat(this.vMax.slice(this.v.length,this.n)):this.v.length>this.n?this.v.slice(0,this.n):this.v,this.w=this.w.length<this.n?this.w.concat(this.wMax.slice(this.w.length,this.n)):this.w.length>this.n?this.w.slice(0,this.n):this.w,this.v.forEach((function(t,n){e.vMax[n]=t})),this.w.forEach((function(t,n){e.wMax[n]=t})),this.u=this.v.reduce((function(t,n,i){return t+n*e.w[i]}),0)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-vw2u-change",{detail:{v:this.v,w:this.w,n:this.n,u:this.u},bubbles:!0}))}},{key:"vInput",value:function(e,t){this.v[e]=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"wInput",value:function(e,t){this.w[e]=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"nInput",value:function(e){this.n=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"vTemplate",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i){var r=Number.parseInt(t,10)-1;e=se(Aj||(Aj=C(['<decidable-spinner class="v" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">v<sub class="subscript ','">',"</sub></var>\n        </decidable-spinner>"])),!this.interactive,this.v[r],this.vInput.bind(this,r),n,t)}else e=se(Fj||(Fj=C(['<var class="math-var v">v<sub class="subscript ','">',"</sub></var>"])),n,t);return e}},{key:"wTemplate",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i){var r=Number.parseInt(t,10)-1;e=se(Qj||(Qj=C(['<decidable-spinner class="w" ?disabled=',' min="0" max="1" step=".001" .value="','" @input=','>\n          <var class="math-var">w<sub class="subscript ','">',"</sub></var>\n        </decidable-spinner>"])),!this.interactive,this.w[r],this.wInput.bind(this,r),n,t)}else e=se(Uj||(Uj=C(['<var class="math-var w">w<sub class="subscript ','">',"</sub></var>"])),n,t);return e}},{key:"render",value:function(){var e,t,n=this;this.alignState(),this.numeric?(e=se(wj||(wj=C(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U</var>\n        </decidable-spinner>'])),+this.u.toFixed(3)),t=se(Gj||(Gj=C(['<decidable-spinner class="n" ?disabled=',' min="1" max="4" step="1" .value="','" @input=','>\n          <var class="math-var">n</var>\n        </decidable-spinner>'])),!this.interactive,this.n,this.nInput.bind(this))):(e=se(Rj||(Rj=C(['<var class="math-var u">U</var>']))),t=se(Lj||(Lj=C(['<var class="math-var subscript">n</var>']))));var i=se(Sj||(Sj=C(["\n      <tr>\n        <td>\n          ",'<span class="equals">=</span>\n        </td>\n        <td>\n          <div class="summation">\n            <span class="tight">','</span>\n            <span class="tight"><var class="math-greek sigma"></var></span>\n            <span class="tight"><var class="math-var subscript tight">i</var><span class="equals subscript">=</span><span class="subscript tight">1</span></span>\n          </div>\n        </td>\n        <td>\n          ',"&nbsp;",'<span class="equals">=</span>\n        </td>\n        <td>\n          ',"\n        </td>\n      </tr>"])),e,t,this.vTemplate("i","math-var",!1),this.wTemplate("i","math-var",!1),this.numeric?Array(this.nMax).fill().map((function(e,t){return t<n.n?se(Vj||(Vj=C(['<span class="addend tight" ',">","","&nbsp;","</span>"])),bs({in:cs,out:cs}),se(0!==t?Zj||(Zj=C(['<span class="plus">+</span>'])):kj||(kj=C([""]))),n.vTemplate(t+1,"math-num",!0),n.wTemplate(t+1,"math-num",!0)):null})):se(Ej||(Ej=C(["","&nbsp;",'<span class="plus">+</span><span class="ellipsis"></span><span class="plus">+</span>',"&nbsp;",""])),this.vTemplate("1","math-num",!1),this.wTemplate("1","math-num",!1),this.vTemplate("n","math-var",!1),this.wTemplate("n","math-var",!1)));return se(Xj||(Xj=C(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"])),i)}}],[{key:"properties",get:function(){return{v:{attribute:"value",converter:mo,reflect:!0},w:{attribute:"weight",converter:mo,reflect:!0},n:{attribute:"outcomes",type:Number,reflect:!0},u:{attribute:!1,type:Number,reflect:!1}}}}]),n}();customElements.define("cpt-equation-vw2u",jj);var Pj,Kj,qj=function(e){u(n,Is);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).x=10,e.a=.5,e.l=2,e.alignState(),e}return l(n,[{key:"alignState",value:function(){this.v=ys.xal2v(this.x,this.a,this.l)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-xal2v-change",{detail:{x:this.x,a:this.a,l:this.l,v:this.v},bubbles:!0}))}},{key:"xInput",value:function(e){this.x=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"aInput",value:function(e){this.a=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"lInput",value:function(e){this.l=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var e,t,n,i;this.alignState(),this.numeric?(e=se(Wj||(Wj=C(['<decidable-spinner class="x bottom" ?disabled=',' step="1" .value="','" @input=','>\n          <var class="math-var">x</var>\n        </decidable-spinner>'])),!this.interactive,this.x,this.xInput.bind(this)),t=se(_j||(_j=C(['<decidable-spinner class="a bottom" ?disabled=',' min="0" max="1" step=".001" .value="','" @input=','>\n          <var class="math-var"></var>\n        </decidable-spinner>'])),!this.interactive,this.a,this.aInput.bind(this)),n=se(Tj||(Tj=C(['<decidable-spinner class="l bottom" ?disabled=',' min="0" step=".001" .value="','" @input=','>\n          <var class="math-var"></var>\n        </decidable-spinner>'])),!this.interactive,this.l,this.lInput.bind(this)),i=se(Mj||(Mj=C(['<decidable-spinner class="v bottom" disabled step=".001" .value="','">\n          <var class="math-var">v</var>\n        </decidable-spinner>'])),+this.v.toFixed(3))):(e=se(Hj||(Hj=C(['<var class="math-var x">x</var>']))),t=se(Yj||(Yj=C(['<var class="math-var a"></var>']))),n=se(Dj||(Dj=C(['<var class="math-var l"></var>']))),i=se(zj||(zj=C(['<var class="math-var v">v</var>']))));var r=se(Oj||(Oj=C(['\n      <tr>\n        <td rowspan="2">\n          ','<span class="equals">=</span><span class="brace tight">{</span>\n        </td>\n        <td class="left">\n          ','<sup class="exp">',"</sup>,&emsp;if ",'<span class="equals">&ge;</span>0\n        </td>\n      </tr>\n      <tr>\n        <td class="left">\n          <span class="minus tight"></span>','<span class="paren tight">(</span><span class="minus tight"></span>','<span class="paren tight">)</span><sup class="exp">',"</sup>,&emsp;if ",'<span class="equals">&lt;</span>0\n        </td>\n      </tr>'])),i,e,t,e,n,e,t,e);return se(Jj||(Jj=C(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"])),r)}}],[{key:"properties",get:function(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}}]),n}();customElements.define("cpt-equation-xal2v",qj);var $j=function(e){u(n,vo);var t=b(n);function n(){return o(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){return se(Pj||(Pj=C(['\n      <div class="holder">\n        <div class="body">\n          <slot>Empty!</slot>\n        </div>\n      </div>'])))}}],[{key:"styles",get:function(){return[I(d(n),"styles",this),Z(Kj||(Kj=C(["\n        :host {\n          ---border: var(--border, 1px solid var(---color-border));\n          display: inline-block;\n\n          /* This makes IE11 happy */\n          width: 100%;\n\n          margin-bottom: 1rem;\n        }\n\n        .holder {\n          display: flex;\n        }\n\n        .body {\n          display: flex;\n\n          flex-wrap: wrap;\n\n          align-items: center;\n          justify-content: left;\n\n          padding: 0.625rem;\n\n          border: var(---border);\n          border-radius: 0.25rem;\n        }\n\n        .body ::slotted(*) {\n          margin: 0.625rem;\n        }\n\n        /* HACK: Sibling selectors not working with ::slotted */\n        /* .body > rdk-task + sdt-response,\n        ::slotted(rdk-task) + ::slotted(sdt-response) { */\n        /* .body ::slotted(sdt-response) {\n          margin-left: 0;\n        } */\n\n        /* HACK: Sibling selectors not working with ::slotted */\n        /* .body > sdt-control + rdk-task,\n        ::slotted(sdt-control) + ::slotted(rdk-task) {\n          margin-left: 0;\n        } */\n        /* .body ::slotted(rdk-task) {\n          margin-left: 0;\n        } */\n      "])))]}}]),n}();customElements.define("cpt-example",$j);var eP=function(e){u(n,$j);var t=b(n);function n(){return o(this,n),t.apply(this,arguments)}return l(n,[{key:"firstUpdated",value:function(){var e=this;this.cptFit=this.querySelector("cpt-fit"),this.decisionControl=this.querySelector("decision-control"),this.decisionTask=this.querySelector("decision-task"),this.decisionResponse=this.querySelector("decision-response"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.cptFit&&this.cptFit.addEventListener("cpt-fit-update",(function(t){e.cptProbability&&(e.cptProbability.g=t.detail.g),e.cptValue&&(e.cptValue.a=t.detail.a,e.cptValue.l=t.detail.l),e.decisionSpace&&(e.decisionSpace.a=t.detail.a,e.decisionSpace.l=t.detail.l,e.decisionSpace.g=t.detail.g)})),this.decisionControl&&(this.decisionControl.hasAttribute("trials")&&this.decisionControl.addEventListener("decision-control-trials",(function(t){e.decisionTask&&(e.decisionTask.trials=t.detail.trials),e.decisionResponse&&(e.decisionResponse.trialTotal=t.detail.trials)})),this.decisionControl.hasAttribute("duration")&&this.decisionControl.addEventListener("decision-control-duration",(function(t){e.decisionTask&&(e.decisionTask.duration=t.detail.duration,e.decisionTask.iti=t.detail.duration)})),this.decisionControl.hasAttribute("run")&&this.decisionControl.addEventListener("decision-control-run",(function(){e.decisionTask&&(e.decisionTask.running=!0)})),this.decisionControl.hasAttribute("pause")&&this.decisionControl.addEventListener("decision-control-pause",(function(){e.decisionTask&&(e.decisionTask.running=!1)})),this.decisionControl.hasAttribute("reset")&&this.decisionControl.addEventListener("decision-control-reset",(function(){e.decisionTask&&e.decisionTask.reset(),e.decisionResponse&&e.decisionResponse.reset(),e.decisionSpace&&e.decisionSpace.clear(),e.cptFit&&e.cptFit.clear()}))),this.decisionTask&&(this.decisionResponse&&(this.decisionResponse.trialTotal=this.decisionTask.trials),this.decisionTask.addEventListener("decision-trial-start",(function(t){e.decisionResponse&&e.decisionResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial)})),this.decisionTask.addEventListener("decision-trial-end",(function(){e.decisionResponse&&e.decisionResponse.stop()})),this.decisionTask.addEventListener("decision-block-end",(function(){e.decisionControl&&e.decisionControl.complete()}))),this.decisionResponse&&this.decisionResponse.addEventListener("decision-response",(function(t){e.decisionSpace&&e.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString()),e.cptFit&&e.cptFit.set(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))}}]),n}();customElements.define("cpt-example-human",eP);var tP=function(e){u(n,$j);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).a=.8,e.l=1.2,e.g=.8,e.xl=0,e.xw=20,e.pw=.5,e.xs=10,e.cptCalculation=null,e.cptProbability=null,e.cptSpace=null,e.cptValue=null,e.decisionChoice=null,e.decisionSpace=null,e}return l(n,[{key:"firstUpdated",value:function(){var e=this;this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.decisionChoice=this.querySelector("decision-choice"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation&&this.cptCalculation.addEventListener("cpt-calculation-change",(function(t){e.a=t.detail.a,e.l=t.detail.l,e.g=t.detail.g,e.xl=t.detail.xl,e.xw=t.detail.xw,e.pw=t.detail.pw,e.xs=t.detail.xs})),this.cptProbability&&this.cptProbability.addEventListener("cpt-probability-change",(function(t){e.g=t.detail.g,e.pw=t.detail.p})),this.cptValue&&this.cptValue.addEventListener("cpt-value-change",(function(t){e.a=t.detail.a,e.l=t.detail.l,"default"===t.detail.name?e.xs=t.detail.x:"gamble"===t.detail.name&&(e.xw=t.detail.x)})),this.decisionChoice&&this.decisionChoice.addEventListener("decision-choice-change",(function(t){e.xl=t.detail.xl,e.xw=t.detail.xw,e.pw=t.detail.pw,e.xs=t.detail.xs})),this.requestUpdate()}},{key:"update",value:function(e){I(d(n.prototype),"update",this).call(this,e),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g,this.cptCalculation.xl=this.xl,this.cptCalculation.xw=this.xw,this.cptCalculation.pw=this.pw,this.cptCalculation.xs=this.xs),this.cptProbability&&this.cptProbability.set(this.pw,this.g,"default",""),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g,this.cptSpace.xl=this.xl,this.cptSpace.xw=this.xw,this.cptSpace.pw=this.pw,this.cptSpace.xs=this.xs),this.cptValue&&(this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g")),this.decisionChoice&&(this.decisionChoice.xl=this.xl,this.decisionChoice.xw=this.xw,this.decisionChoice.pw=this.pw,this.decisionChoice.xs=this.xs),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g,this.decisionSpace.xl=this.xl,this.decisionSpace.xw=this.xw,this.decisionSpace.pw=this.pw,this.decisionSpace.xs=this.xs)}}],[{key:"properties",get:function(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}}]),n}();customElements.define("cpt-example-interactive",tP);var nP=function(e){u(n,$j);var t=b(n);function n(){var e;return o(this,n),(e=t.call(this)).a=.8,e.l=1.2,e.g=.8,e.xl=0,e.xw=20,e.pw=.5,e.xs=10,e.cptCalculation=null,e.cptProbability=null,e.cptSpace=null,e.cptValue=null,e.decisionControl=null,e.decisionResponse=null,e.decisionSpace=null,e.decisionTask=null,e}return l(n,[{key:"firstUpdated",value:function(){var e=this;this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.decisionControl=this.querySelector("decision-control"),this.decisionResponse=this.querySelector("decision-response"),this.decisionSpace=this.querySelector("decision-space"),this.decisionTask=this.querySelector("decision-task"),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",(function(t){e.g=t.detail.g})),this.cptProbability.addEventListener("decision-response",(function(t){e.decisionResponse&&e.decisionResponse.responded(t.detail.response),e.decisionSpace&&e.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",(function(t){e.a=t.detail.a,e.l=t.detail.l})),this.cptProbability||this.cptValue.addEventListener("decision-response",(function(t){e.decisionResponse&&e.decisionResponse.responded(t.detail.response),e.decisionSpace&&e.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}))),this.decisionControl&&(this.decisionControl.hasAttribute("trials")&&this.decisionControl.addEventListener("decision-control-trials",(function(t){e.decisionTask&&(e.decisionTask.trials=t.detail.trials),e.decisionResponse&&(e.decisionResponse.trialTotal=t.detail.trials)})),this.decisionControl.hasAttribute("duration")&&this.decisionControl.addEventListener("decision-control-duration",(function(t){e.decisionTask&&(e.decisionTask.duration=t.detail.duration,e.decisionTask.iti=t.detail.duration)})),this.decisionControl.hasAttribute("run")&&this.decisionControl.addEventListener("decision-control-run",(function(){e.cptProbability&&e.cptProbability.resumeTrial(),e.cptValue&&e.cptValue.resumeTrial(),e.decisionTask&&(e.decisionTask.running=!0)})),this.decisionControl.hasAttribute("pause")&&this.decisionControl.addEventListener("decision-control-pause",(function(){e.cptProbability&&e.cptProbability.pauseTrial(),e.cptValue&&e.cptValue.pauseTrial(),e.decisionTask&&(e.decisionTask.running=!1)})),this.decisionControl.hasAttribute("reset")&&this.decisionControl.addEventListener("decision-control-reset",(function(){e.cptProbability&&e.cptProbability.clear(),e.cptValue&&e.cptValue.clear(),e.decisionTask&&e.decisionTask.reset(),e.decisionResponse&&e.decisionResponse.reset(),e.decisionSpace&&e.decisionSpace.clear()}))),this.decisionTask&&(this.decisionResponse&&(this.decisionResponse.trialTotal=this.decisionTask.trials),this.decisionTask.addEventListener("decision-trial-start",(function(t){e.decisionResponse&&e.decisionResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial),e.vw=ys.xal2v(e.xw,e.a,e.l),e.vl=ys.xal2v(e.xl,e.a,e.l),e.ww=ys.pg2w(e.pw,e.g),e.wl=1-e.ww,e.vs=ys.xal2v(e.xs,e.a,e.l),e.ug=e.vw*e.ww+e.vl*e.wl,e.us=e.vs;var n=ys.xal2v(t.detail.xw,e.a,e.l)*ys.pg2w(t.detail.pw,e.g)+ys.xal2v(t.detail.xl,e.a,e.l)*(1-ys.pg2w(t.detail.pw,e.g))>ys.xal2v(t.detail.xs,e.a,e.l)?"gamble":"sure";e.cptProbability&&e.cptProbability.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,n),e.cptValue&&e.cptValue.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,n)})),this.decisionTask.addEventListener("decision-trial-end",(function(){e.decisionResponse&&e.decisionResponse.stop()})),this.decisionTask.addEventListener("decision-block-end",(function(){e.decisionControl&&e.decisionControl.complete()}))),this.requestUpdate()}},{key:"update",value:function(e){I(d(n.prototype),"update",this).call(this,e),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g),this.cptProbability&&(this.cptProbability.g=this.g),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g),this.cptValue&&(this.cptValue.a=this.a,this.cptValue.l=this.l),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g)}}],[{key:"properties",get:function(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}}]),n}();customElements.define("cpt-example-model",nP);export{Cs as CPTCalculation,vo as CPTElement,Nj as CPTEquationPG2W,jj as CPTEquationVW2U,qj as CPTEquationXAL2V,eP as CPTExampleHuman,tP as CPTExampleInteractive,nP as CPTExampleModel,cY as CPTFit,uY as CPTProbability,bJ as CPTSpace,CJ as CPTValue,HJ as DecisionChoice,lj as DecisionControl,AJ as DecisionOption,RJ as DecisionOutcome,dj as DecisionResponse,fj as DecisionSpace,Bj as DecisionTask};
//# sourceMappingURL=prospectableElements.esm.min.js.map
