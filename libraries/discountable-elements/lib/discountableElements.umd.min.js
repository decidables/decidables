!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).discountableElements={})}(this,(function(t){"use strict";
/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const e=globalThis,n=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),s=new WeakMap;let c=class{constructor(t,e,n){if(this._$cssResult$=!0,n!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(n&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=s.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&s.set(e,t))}return t}toString(){return this.cssText}};const a=t=>new c("string"==typeof t?t:t+"",void 0,i),l=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,i)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[i+1]),t[0]);return new c(n,t,i)},r=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return a(e)})(t):t
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */,{is:o,defineProperty:g,getOwnPropertyDescriptor:B,getOwnPropertyNames:d,getOwnPropertySymbols:Q,getPrototypeOf:I}=Object,F=globalThis,u=F.trustedTypes,h=u?u.emptyScript:"",U=F.reactiveElementPolyfillSupport,b=(t,e)=>t,C={toAttribute(t,e){switch(e){case Boolean:t=t?h:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},y=(t,e)=>!o(t,e),f={attribute:!0,type:String,converter:C,reflect:!1,hasChanged:y};Symbol.metadata??=Symbol("metadata"),F.litPropertyMetadata??=new WeakMap;let G=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=f){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(t,n,e);void 0!==i&&g(this.prototype,t,i)}}static getPropertyDescriptor(t,e,n){const{get:i,set:s}=B(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return i?.call(this)},set(e){const c=i?.call(this);s.call(this,e),this.requestUpdate(t,c,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??f}static _$Ei(){if(this.hasOwnProperty(b("elementProperties")))return;const t=I(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(b("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b("properties"))){const t=this.properties,e=[...d(t),...Q(t)];for(const n of e)this.createProperty(n,t[n])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(r(t))}else void 0!==t&&e.push(r(t));return e}static _$Eu(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$Eg=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$ES(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$E_??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$E_?.delete(t)}_$ES(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,i)=>{if(n)t.adoptedStyleSheets=i.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of i){const i=document.createElement("style"),s=e.litNonce;void 0!==s&&i.setAttribute("nonce",s),i.textContent=n.cssText,t.appendChild(i)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$E_?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$E_?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EO(t,e){const n=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,n);if(void 0!==i&&!0===n.reflect){const s=(void 0!==n.converter?.toAttribute?n.converter:C).toAttribute(e,n.type);this._$Em=t,null==s?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(t,e){const n=this.constructor,i=n._$Eh.get(t);if(void 0!==i&&this._$Em!==i){const t=n.getPropertyOptions(i),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:C;this._$Em=i,this[i]=s.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,n,i=!1,s){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??y)(i?s:this[t],e))return;this.C(t,e,n)}!1===this.isUpdatePending&&(this._$Eg=this._$EP())}C(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.C(e,this[e],n)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$E_?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$ET()}catch(e){throw t=!1,this._$ET(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$E_?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EO(t,this[t]))),this._$ET()}updated(t){}firstUpdated(t){}};G.elementStyles=[],G.shadowRootOptions={mode:"open"},G[b("elementProperties")]=new Map,G[b("finalized")]=new Map,U?.({ReactiveElement:G}),(F.reactiveElementVersions??=[]).push("2.0.2");
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const p=globalThis,m=p.trustedTypes,A=m?m.createPolicy("lit-html",{createHTML:t=>t}):void 0,x="$lit$",L=`lit$${(Math.random()+"").slice(9)}$`,S="?"+L,R=`<${S}>`,N=document,X=()=>N.createComment(""),v=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Z=Array.isArray,E="[ \t\n\f\r]",V=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,w=/-->/g,W=/>/g,H=RegExp(`>|${E}(?:([^\\s"'>=/]+)(${E}*=${E}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),D=/'/g,Y=/"/g,k=/^(?:script|style|textarea|title)$/i,J=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),M=J(1),T=J(2),z=Symbol.for("lit-noChange"),K=Symbol.for("lit-nothing"),O=new WeakMap,_=N.createTreeWalker(N,129);function P(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==A?A.createHTML(e):e}class j{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let s=0,c=0;const a=t.length-1,l=this.parts,[r,o]=((t,e)=>{const n=t.length-1,i=[];let s,c=2===e?"<svg>":"",a=V;for(let e=0;e<n;e++){const n=t[e];let l,r,o=-1,g=0;for(;g<n.length&&(a.lastIndex=g,r=a.exec(n),null!==r);)g=a.lastIndex,a===V?"!--"===r[1]?a=w:void 0!==r[1]?a=W:void 0!==r[2]?(k.test(r[2])&&(s=RegExp("</"+r[2],"g")),a=H):void 0!==r[3]&&(a=H):a===H?">"===r[0]?(a=s??V,o=-1):void 0===r[1]?o=-2:(o=a.lastIndex-r[2].length,l=r[1],a=void 0===r[3]?H:'"'===r[3]?Y:D):a===Y||a===D?a=H:a===w||a===W?a=V:(a=H,s=void 0);const B=a===H&&t[e+1].startsWith("/>")?" ":"";c+=a===V?n+R:o>=0?(i.push(l),n.slice(0,o)+x+n.slice(o)+L+B):n+L+(-2===o?e:B)}return[P(t,c+(t[n]||"<?>")+(2===e?"</svg>":"")),i]})(t,e);if(this.el=j.createElement(r,n),_.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(i=_.nextNode())&&l.length<a;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(x)){const e=o[c++],n=i.getAttribute(t).split(L),a=/([.?@])?(.*)/.exec(e);l.push({type:1,index:s,name:a[2],strings:n,ctor:"."===a[1]?nt:"?"===a[1]?st:"@"===a[1]?ct:et}),i.removeAttribute(t)}else t.startsWith(L)&&(l.push({type:6,index:s}),i.removeAttribute(t));if(k.test(i.tagName)){const t=i.textContent.split(L),e=t.length-1;if(e>0){i.textContent=m?m.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],X()),_.nextNode(),l.push({type:2,index:++s});i.append(t[e],X())}}}else if(8===i.nodeType)if(i.data===S)l.push({type:2,index:s});else{let t=-1;for(;-1!==(t=i.data.indexOf(L,t+1));)l.push({type:7,index:s}),t+=L.length-1}s++}}static createElement(t,e){const n=N.createElement("template");return n.innerHTML=t,n}}function $(t,e,n=t,i){if(e===z)return e;let s=void 0!==i?n._$Co?.[i]:n._$Cl;const c=v(e)?void 0:e._$litDirective$;return s?.constructor!==c&&(s?._$AO?.(!1),void 0===c?s=void 0:(s=new c(t),s._$AT(t,n,i)),void 0!==i?(n._$Co??=[])[i]=s:n._$Cl=s),void 0!==s&&(e=$(t,s._$AS(t,e.values),s,i)),e}class q{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,i=(t?.creationScope??N).importNode(e,!0);_.currentNode=i;let s=_.nextNode(),c=0,a=0,l=n[0];for(;void 0!==l;){if(c===l.index){let e;2===l.type?e=new tt(s,s.nextSibling,this,t):1===l.type?e=new l.ctor(s,l.name,l.strings,this,t):6===l.type&&(e=new at(s,this,t)),this._$AV.push(e),l=n[++a]}c!==l?.index&&(s=_.nextNode(),c++)}return _.currentNode=N,i}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}let tt=class t{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,i){this.type=2,this._$AH=K,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=$(this,t,e),v(t)?t===K||null==t||""===t?(this._$AH!==K&&this._$AR(),this._$AH=K):t!==this._$AH&&t!==z&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>Z(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==K&&v(this._$AH)?this._$AA.nextSibling.data=t:this.$(N.createTextNode(t)),this._$AH=t}g(t){const{values:e,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=j.createElement(P(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(e);else{const t=new q(i,this),n=t.u(this.options);t.p(e),this.$(n),this._$AH=t}}_$AC(t){let e=O.get(t.strings);return void 0===e&&O.set(t.strings,e=new j(t)),e}T(e){Z(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,s=0;for(const c of e)s===n.length?n.push(i=new t(this.k(X()),this.k(X()),this,this.options)):i=n[s],i._$AI(c),s++;s<n.length&&(this._$AR(i&&i._$AB.nextSibling,s),n.length=s)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}};class et{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,i,s){this.type=1,this._$AH=K,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=s,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=K}_$AI(t,e=this,n,i){const s=this.strings;let c=!1;if(void 0===s)t=$(this,t,e,0),c=!v(t)||t!==this._$AH&&t!==z,c&&(this._$AH=t);else{const i=t;let a,l;for(t=s[0],a=0;a<s.length-1;a++)l=$(this,i[n+a],e,a),l===z&&(l=this._$AH[a]),c||=!v(l)||l!==this._$AH[a],l===K?t=K:t!==K&&(t+=(l??"")+s[a+1]),this._$AH[a]=l}c&&!i&&this.O(t)}O(t){t===K?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}let nt=class extends et{constructor(){super(...arguments),this.type=3}O(t){this.element[this.name]=t===K?void 0:t}};class st extends et{constructor(){super(...arguments),this.type=4}O(t){this.element.toggleAttribute(this.name,!!t&&t!==K)}}class ct extends et{constructor(t,e,n,i,s){super(t,e,n,i,s),this.type=5}_$AI(t,e=this){if((t=$(this,t,e,0)??K)===z)return;const n=this._$AH,i=t===K&&n!==K||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,s=t!==K&&(n===K||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class at{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){$(this,t)}}const lt=p.litHtmlPolyfillSupport;lt?.(j,tt),(p.litHtmlVersions??=[]).push("3.1.0");
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
let rt=class extends G{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const i=n?.renderBefore??e;let s=i._$litPart$;if(void 0===s){const t=n?.renderBefore??null;i._$litPart$=s=new tt(e.insertBefore(X(),t),t,void 0,n??{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return z}};rt._$litElement$=!0,rt.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:rt});const ot=globalThis.litElementPolyfillSupport;function gt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dt(t){let e,n,i;function s(t,i,s=0,c=t.length){if(s<c){if(0!==e(i,i))return c;do{const e=s+c>>>1;n(t[e],i)<0?s=e+1:c=e}while(s<c)}return s}return 2!==t.length?(e=gt,n=(e,n)=>gt(t(e),n),i=(e,n)=>t(e)-n):(e=t===gt||t===Bt?t:Qt,n=t,i=t),{left:s,center:function(t,e,n=0,c=t.length){const a=s(t,e,n,c-1);return a>n&&i(t[a-1],e)>-i(t[a],e)?a-1:a},right:function(t,i,s=0,c=t.length){if(s<c){if(0!==e(i,i))return c;do{const e=s+c>>>1;n(t[e],i)<=0?s=e+1:c=e}while(s<c)}return s}}}function Qt(){return 0}function It(t){return null===t?NaN:+t}ot?.({LitElement:rt}),(globalThis.litElementVersions??=[]).push("4.0.2");const Ft=dt(gt).right;dt(It).center;var ut=Ft;function ht(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let i=-1;for(let s of t)null!=(s=e(s,++i,t))&&(s=+s)>=s&&++n}return n}function Ut(t){return 0|t.length}function bt(t){return!(t>0)}function Ct(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function yt(t,e){var n=0,i=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:s=>n+=+e(s,i++,t)||0)}function ft(t,e){let n,i=0,s=0,c=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-s,s+=n/++i,c+=n*(e-s));else{let a=-1;for(let l of t)null!=(l=e(l,++a,t))&&(l=+l)>=l&&(n=l-s,s+=n/++i,c+=n*(l-s))}if(i>1)return c/(i-1)}function Gt(t,e){const n=ft(t,e);return n?Math.sqrt(n):n}function pt(t,e){let n,i;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let s=-1;for(let c of t)null!=(c=e(c,++s,t))&&(void 0===n?c>=c&&(n=i=c):(n>c&&(n=c),i<c&&(i=c)))}return[n,i]}class mt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const s=e[i],c=t+s,a=Math.abs(t)<Math.abs(s)?t-(c-s):s-(c-t);a&&(e[n++]=a),t=c}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,s=this._n,c=0;if(s>0){for(c=t[--s];s>0&&(e=c,n=t[--s],c=e+n,i=n-(c-e),!i););s>0&&(i<0&&t[s-1]<0||i>0&&t[s-1]>0)&&(n=2*i,e=c+n,n==e-c&&(c=e))}return c}}class At extends Map{constructor(t,e=Nt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Lt(this,t))}has(t){return super.has(Lt(this,t))}set(t,e){return super.set(St(this,t),e)}delete(t){return super.delete(Rt(this,t))}}class xt extends Set{constructor(t,e=Nt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(Lt(this,t))}add(t){return super.add(St(this,t))}delete(t){return super.delete(Rt(this,t))}}function Lt({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function St({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Rt({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Nt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Xt(t){return t}function vt(t,...e){return Vt(t,Xt,Xt,e)}function Zt(t,e,...n){return Vt(t,Xt,e,n)}function Et(t,e,...n){return Vt(t,Array.from,e,n)}function Vt(t,e,n,i){return function t(s,c){if(c>=i.length)return n(s);const a=new At,l=i[c++];let r=-1;for(const t of s){const e=l(t,++r,s),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,c));return e(a)}(t,0)}function wt(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const c=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),c.sort(((t,n)=>{for(const i of e){const e=Ht(i[t],i[n]);if(e)return e}}))):(n=t.map(n),c.sort(((t,e)=>Ht(n[t],n[e])))),i=t,s=c,Array.from(s,(t=>i[t]))}var i,s;return t.sort(Wt(n))}function Wt(t=gt){if(t===gt)return Ht;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||0===i?i:(0===t(n,n))-(0===t(e,e))}}function Ht(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function Dt(t,e,n){return(2!==e.length?wt(Zt(t,e,n),(([t,e],[n,i])=>gt(e,i)||gt(t,n))):wt(vt(t,n),(([t,n],[i,s])=>e(n,s)||gt(t,i)))).map((([t])=>t))}const Yt=Math.sqrt(50),kt=Math.sqrt(10),Jt=Math.sqrt(2);function Mt(t,e,n){const i=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(i)),c=i/Math.pow(10,s),a=c>=Yt?10:c>=kt?5:c>=Jt?2:1;let l,r,o;return s<0?(o=Math.pow(10,-s)/a,l=Math.round(t*o),r=Math.round(e*o),l/o<t&&++l,r/o>e&&--r,o=-o):(o=Math.pow(10,s)*a,l=Math.round(t/o),r=Math.round(e/o),l*o<t&&++l,r*o>e&&--r),r<l&&.5<=n&&n<2?Mt(t,e,2*n):[l,r,o]}function Tt(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const i=e<t,[s,c,a]=i?Mt(e,t,n):Mt(t,e,n);if(!(c>=s))return[];const l=c-s+1,r=new Array(l);if(i)if(a<0)for(let t=0;t<l;++t)r[t]=(c-t)/-a;else for(let t=0;t<l;++t)r[t]=(c-t)*a;else if(a<0)for(let t=0;t<l;++t)r[t]=(s+t)/-a;else for(let t=0;t<l;++t)r[t]=(s+t)*a;return r}function zt(t,e,n){return Mt(t=+t,e=+e,n=+n)[2]}function Kt(t,e,n){n=+n;const i=(e=+e)<(t=+t),s=i?zt(e,t,n):zt(t,e,n);return(i?-1:1)*(s<0?1/-s:s)}function Ot(t){return Math.max(1,Math.ceil(Math.log(ht(t))/Math.LN2)+1)}function _t(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let s of t)null!=(s=e(s,++i,t))&&(n<s||void 0===n&&s>=s)&&(n=s)}return n}function Pt(t,e){let n,i=-1,s=-1;if(void 0===e)for(const e of t)++s,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,i=s);else for(let c of t)null!=(c=e(c,++s,t))&&(n<c||void 0===n&&c>=c)&&(n=c,i=s);return i}function jt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let s of t)null!=(s=e(s,++i,t))&&(n>s||void 0===n&&s>=s)&&(n=s)}return n}function $t(t,e){let n,i=-1,s=-1;if(void 0===e)for(const e of t)++s,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,i=s);else for(let c of t)null!=(c=e(c,++s,t))&&(n>c||void 0===n&&c>=c)&&(n=c,i=s);return i}function qt(t,e,n=0,i=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(s=void 0===s?Ht:Wt(s);i>n;){if(i-n>600){const c=i-n+1,a=e-n+1,l=Math.log(c),r=.5*Math.exp(2*l/3),o=.5*Math.sqrt(l*r*(c-r)/c)*(a-c/2<0?-1:1);qt(t,e,Math.max(n,Math.floor(e-a*r/c+o)),Math.min(i,Math.floor(e+(c-a)*r/c+o)),s)}const c=t[e];let a=n,l=i;for(te(t,n,e),s(t[i],c)>0&&te(t,n,i);a<l;){for(te(t,a,l),++a,--l;s(t[a],c)<0;)++a;for(;s(t[l],c)>0;)--l}0===s(t[n],c)?te(t,n,l):(++l,te(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function te(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function ee(t,e=gt){let n,i=!1;if(1===e.length){let s;for(const c of t){const t=e(c);(i?gt(t,s)>0:0===gt(t,t))&&(n=c,s=t,i=!0)}}else for(const s of t)(i?e(s,n)>0:0===e(s,s))&&(n=s,i=!0);return n}function ne(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let i of t)null!=(i=e(i,++n,t))&&(i=+i)>=i&&(yield i)}}(t,n)),(i=t.length)&&!isNaN(e=+e)){if(e<=0||i<2)return jt(t);if(e>=1)return _t(t);var i,s=(i-1)*e,c=Math.floor(s),a=_t(qt(t,c).subarray(0,c+1));return a+(jt(t.subarray(c+1))-a)*(s-c)}}function ie(t,e,n=It){if((i=t.length)&&!isNaN(e=+e)){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,s=(i-1)*e,c=Math.floor(s),a=+n(t[c],c,t);return a+(+n(t[c+1],c+1,t)-a)*(s-c)}}function se(t,e,n){const i=ht(t),s=ne(t,.75)-ne(t,.25);return i&&s?Math.ceil((n-e)/(2*s*Math.pow(i,-1/3))):1}function ce(t,e,n){const i=ht(t),s=Gt(t);return i&&s?Math.ceil((n-e)*Math.cbrt(i)/(3.49*s)):1}function ae(t,e){let n=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,i+=e);else{let s=-1;for(let c of t)null!=(c=e(c,++s,t))&&(c=+c)>=c&&(++n,i+=c)}if(n)return i/n}function le(t,e){return ne(t,.5,e)}function re(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function oe(t,e){const n=new At;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let i=-1;for(let s of t)null!=(s=e(s,++i,t))&&s>=s&&n.set(s,(n.get(s)||0)+1)}let i,s=0;for(const[t,e]of n)e>s&&(s=e,i=t);return i}function ge(t,e){return[t,e]}function Be(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var i=-1,s=0|Math.max(0,Math.ceil((e-t)/n)),c=new Array(s);++i<s;)c[i]=t+i*n;return c}function de(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let i=-1;for(let s of t)(s=+e(s,++i,t))&&(n+=s)}return n}function Qe(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Ie(t){return t}var Fe=1,ue=2,he=3,Ue=4,be=1e-6;function Ce(t){return"translate("+t+",0)"}function ye(t){return"translate(0,"+t+")"}function fe(t){return e=>+t(e)}function Ge(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function pe(){return!this.__axis}function me(t,e){var n=[],i=null,s=null,c=6,a=6,l=3,r="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,o=t===Fe||t===Ue?-1:1,g=t===Ue||t===ue?"x":"y",B=t===Fe||t===he?Ce:ye;function d(d){var Q=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,I=null==s?e.tickFormat?e.tickFormat.apply(e,n):Ie:s,F=Math.max(c,0)+l,u=e.range(),h=+u[0]+r,U=+u[u.length-1]+r,b=(e.bandwidth?Ge:fe)(e.copy(),r),C=d.selection?d.selection():d,y=C.selectAll(".domain").data([null]),f=C.selectAll(".tick").data(Q,e).order(),G=f.exit(),p=f.enter().append("g").attr("class","tick"),m=f.select("line"),A=f.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),f=f.merge(p),m=m.merge(p.append("line").attr("stroke","currentColor").attr(g+"2",o*c)),A=A.merge(p.append("text").attr("fill","currentColor").attr(g,o*F).attr("dy",t===Fe?"0em":t===he?"0.71em":"0.32em")),d!==C&&(y=y.transition(d),f=f.transition(d),m=m.transition(d),A=A.transition(d),G=G.transition(d).attr("opacity",be).attr("transform",(function(t){return isFinite(t=b(t))?B(t+r):this.getAttribute("transform")})),p.attr("opacity",be).attr("transform",(function(t){var e=this.parentNode.__axis;return B((e&&isFinite(e=e(t))?e:b(t))+r)}))),G.remove(),y.attr("d",t===Ue||t===ue?a?"M"+o*a+","+h+"H"+r+"V"+U+"H"+o*a:"M"+r+","+h+"V"+U:a?"M"+h+","+o*a+"V"+r+"H"+U+"V"+o*a:"M"+h+","+r+"H"+U),f.attr("opacity",1).attr("transform",(function(t){return B(b(t)+r)})),m.attr(g+"2",o*c),A.attr(g,o*F).text(I),C.filter(pe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ue?"start":t===Ue?"end":"middle"),C.each((function(){this.__axis=b}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),d):i&&i.slice()},d.tickFormat=function(t){return arguments.length?(s=t,d):s},d.tickSize=function(t){return arguments.length?(c=a=+t,d):c},d.tickSizeInner=function(t){return arguments.length?(c=+t,d):c},d.tickSizeOuter=function(t){return arguments.length?(a=+t,d):a},d.tickPadding=function(t){return arguments.length?(l=+t,d):l},d.offset=function(t){return arguments.length?(r=+t,d):r},d}function Ae(t){return me(he,t)}var xe={value:()=>{}};function Le(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new Se(i)}function Se(t){this._=t}function Re(t,e){for(var n,i=0,s=t.length;i<s;++i)if((n=t[i]).name===e)return n.value}function Ne(t,e,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=xe,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}Se.prototype=Le.prototype={constructor:Se,on:function(t,e){var n,i,s=this._,c=(i=s,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,l=c.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<l;)if(n=(t=c[a]).type)s[n]=Ne(s[n],t.name,e);else if(null==e)for(n in s)s[n]=Ne(s[n],t.name,null);return this}for(;++a<l;)if((n=(t=c[a]).type)&&(n=Re(s[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Se(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,s=new Array(n),c=0;c<n;++c)s[c]=arguments[c+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=0,n=(i=this._[t]).length;c<n;++c)i[c].value.apply(e,s)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,c=i.length;s<c;++s)i[s].value.apply(e,n)}};var Xe="http://www.w3.org/1999/xhtml",ve={svg:"http://www.w3.org/2000/svg",xhtml:Xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ze(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ve.hasOwnProperty(e)?{space:ve[e],local:t}:t}function Ee(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Xe&&e.documentElement.namespaceURI===Xe?e.createElement(t):e.createElementNS(n,t)}}function Ve(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function we(t){var e=Ze(t);return(e.local?Ve:Ee)(e)}function We(){}function He(t){return null==t?We:function(){return this.querySelector(t)}}function De(){return[]}function Ye(t){return null==t?De:function(){return this.querySelectorAll(t)}}function ke(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function Je(t){return function(){return this.matches(t)}}function Me(t){return function(e){return e.matches(t)}}var Te=Array.prototype.find;function ze(){return this.firstElementChild}var Ke=Array.prototype.filter;function Oe(){return Array.from(this.children)}function _e(t){return new Array(t.length)}function Pe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function je(t,e,n,i,s,c){for(var a,l=0,r=e.length,o=c.length;l<o;++l)(a=e[l])?(a.__data__=c[l],i[l]=a):n[l]=new Pe(t,c[l]);for(;l<r;++l)(a=e[l])&&(s[l]=a)}function $e(t,e,n,i,s,c,a){var l,r,o,g=new Map,B=e.length,d=c.length,Q=new Array(B);for(l=0;l<B;++l)(r=e[l])&&(Q[l]=o=a.call(r,r.__data__,l,e)+"",g.has(o)?s[l]=r:g.set(o,r));for(l=0;l<d;++l)o=a.call(t,c[l],l,c)+"",(r=g.get(o))?(i[l]=r,r.__data__=c[l],g.delete(o)):n[l]=new Pe(t,c[l]);for(l=0;l<B;++l)(r=e[l])&&g.get(Q[l])===r&&(s[l]=r)}function qe(t){return t.__data__}function tn(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function en(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nn(t){return function(){this.removeAttribute(t)}}function sn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cn(t,e){return function(){this.setAttribute(t,e)}}function an(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ln(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function rn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function on(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gn(t){return function(){this.style.removeProperty(t)}}function Bn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function dn(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Qn(t,e){return t.style.getPropertyValue(e)||on(t).getComputedStyle(t,null).getPropertyValue(e)}function In(t){return function(){delete this[t]}}function Fn(t,e){return function(){this[t]=e}}function un(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function hn(t){return t.trim().split(/^|\s+/)}function Un(t){return t.classList||new bn(t)}function bn(t){this._node=t,this._names=hn(t.getAttribute("class")||"")}function Cn(t,e){for(var n=Un(t),i=-1,s=e.length;++i<s;)n.add(e[i])}function yn(t,e){for(var n=Un(t),i=-1,s=e.length;++i<s;)n.remove(e[i])}function fn(t){return function(){Cn(this,t)}}function Gn(t){return function(){yn(this,t)}}function pn(t,e){return function(){(e.apply(this,arguments)?Cn:yn)(this,t)}}function mn(){this.textContent=""}function An(t){return function(){this.textContent=t}}function xn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ln(){this.innerHTML=""}function Sn(t){return function(){this.innerHTML=t}}function Rn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Nn(){this.nextSibling&&this.parentNode.appendChild(this)}function Xn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vn(){return null}function Zn(){var t=this.parentNode;t&&t.removeChild(this)}function En(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wn(t){return function(){var e=this.__on;if(e){for(var n,i=0,s=-1,c=e.length;i<c;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++s]=n:this.removeEventListener(n.type,n.listener,n.options);++s?e.length=s:delete this.__on}}}function Wn(t,e,n){return function(){var i,s=this.__on,c=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var a=0,l=s.length;a<l;++a)if((i=s[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=c,i.options=n),void(i.value=e);this.addEventListener(t.type,c,n),i={type:t.type,name:t.name,value:e,listener:c,options:n},s?s.push(i):this.__on=[i]}}function Hn(t,e,n){var i=on(t),s=i.CustomEvent;"function"==typeof s?s=new s(e,n):(s=i.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function Dn(t,e){return function(){return Hn(this,t,e)}}function Yn(t,e){return function(){return Hn(this,t,e.apply(this,arguments))}}Pe.prototype={constructor:Pe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},bn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var kn=[null];function Jn(t,e){this._groups=t,this._parents=e}function Mn(){return new Jn([[document.documentElement]],kn)}function Tn(t){return"string"==typeof t?new Jn([[document.querySelector(t)]],[document.documentElement]):new Jn([[t]],kn)}function zn(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}Jn.prototype=Mn.prototype={constructor:Jn,select:function(t){"function"!=typeof t&&(t=He(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var c,a,l=e[s],r=l.length,o=i[s]=new Array(r),g=0;g<r;++g)(c=l[g])&&(a=t.call(c,c.__data__,g,l))&&("__data__"in c&&(a.__data__=c.__data__),o[g]=a);return new Jn(i,this._parents)},selectAll:function(t){t="function"==typeof t?ke(t):Ye(t);for(var e=this._groups,n=e.length,i=[],s=[],c=0;c<n;++c)for(var a,l=e[c],r=l.length,o=0;o<r;++o)(a=l[o])&&(i.push(t.call(a,a.__data__,o,l)),s.push(a));return new Jn(i,s)},selectChild:function(t){return this.select(null==t?ze:function(t){return function(){return Te.call(this.children,t)}}("function"==typeof t?t:Me(t)))},selectChildren:function(t){return this.selectAll(null==t?Oe:function(t){return function(){return Ke.call(this.children,t)}}("function"==typeof t?t:Me(t)))},filter:function(t){"function"!=typeof t&&(t=Je(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var c,a=e[s],l=a.length,r=i[s]=[],o=0;o<l;++o)(c=a[o])&&t.call(c,c.__data__,o,a)&&r.push(c);return new Jn(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,qe);var n=e?$e:je,i=this._parents,s=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var c=s.length,a=new Array(c),l=new Array(c),r=new Array(c),o=0;o<c;++o){var g=i[o],B=s[o],d=B.length,Q=tn(t.call(g,g&&g.__data__,o,i)),I=Q.length,F=l[o]=new Array(I),u=a[o]=new Array(I);n(g,B,F,u,r[o]=new Array(d),Q,e);for(var h,U,b=0,C=0;b<I;++b)if(h=F[b]){for(b>=C&&(C=b+1);!(U=u[C])&&++C<I;);h._next=U||null}}return(a=new Jn(a,i))._enter=l,a._exit=r,a},enter:function(){return new Jn(this._enter||this._groups.map(_e),this._parents)},exit:function(){return new Jn(this._exit||this._groups.map(_e),this._parents)},join:function(t,e,n){var i=this.enter(),s=this,c=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(s=e(s))&&(s=s.selection()),null==n?c.remove():n(c),i&&s?i.merge(s).order():s},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,s=n.length,c=i.length,a=Math.min(s,c),l=new Array(s),r=0;r<a;++r)for(var o,g=n[r],B=i[r],d=g.length,Q=l[r]=new Array(d),I=0;I<d;++I)(o=g[I]||B[I])&&(Q[I]=o);for(;r<s;++r)l[r]=n[r];return new Jn(l,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,s=t[e],c=s.length-1,a=s[c];--c>=0;)(i=s[c])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=en);for(var n=this._groups,i=n.length,s=new Array(i),c=0;c<i;++c){for(var a,l=n[c],r=l.length,o=s[c]=new Array(r),g=0;g<r;++g)(a=l[g])&&(o[g]=a);o.sort(e)}return new Jn(s,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],s=0,c=i.length;s<c;++s){var a=i[s];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var s,c=e[n],a=0,l=c.length;a<l;++a)(s=c[a])&&t.call(s,s.__data__,a,c);return this},attr:function(t,e){var n=Ze(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?sn:nn:"function"==typeof e?n.local?rn:ln:n.local?an:cn)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?gn:"function"==typeof e?dn:Bn)(t,e,null==n?"":n)):Qn(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?In:"function"==typeof e?un:Fn)(t,e)):this.node()[t]},classed:function(t,e){var n=hn(t+"");if(arguments.length<2){for(var i=Un(this.node()),s=-1,c=n.length;++s<c;)if(!i.contains(n[s]))return!1;return!0}return this.each(("function"==typeof e?pn:e?fn:Gn)(n,e))},text:function(t){return arguments.length?this.each(null==t?mn:("function"==typeof t?xn:An)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ln:("function"==typeof t?Rn:Sn)(t)):this.node().innerHTML},raise:function(){return this.each(Nn)},lower:function(){return this.each(Xn)},append:function(t){var e="function"==typeof t?t:we(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:we(t),i=null==e?vn:"function"==typeof e?e:He(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Zn)},clone:function(t){return this.select(t?Vn:En)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,s,c=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=c.length;if(!(arguments.length<2)){for(l=e?Wn:wn,i=0;i<a;++i)this.each(l(c[i],e,n));return this}var l=this.node().__on;if(l)for(var r,o=0,g=l.length;o<g;++o)for(i=0,r=l[o];i<a;++i)if((s=c[i]).type===r.type&&s.name===r.name)return r.value},dispatch:function(t,e){return this.each(("function"==typeof e?Yn:Dn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,s=t[e],c=0,a=s.length;c<a;++c)(i=s[c])&&(yield i)}};const Kn={passive:!1},On={capture:!0,passive:!1};function _n(t){t.stopImmediatePropagation()}function Pn(t){t.preventDefault(),t.stopImmediatePropagation()}var jn=t=>()=>t;function $n(t,{sourceEvent:e,subject:n,target:i,identifier:s,active:c,x:a,y:l,dx:r,dy:o,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:r,enumerable:!0,configurable:!0},dy:{value:o,enumerable:!0,configurable:!0},_:{value:g}})}function qn(t){return!t.ctrlKey&&!t.button}function ti(){return this.parentNode}function ei(t,e){return null==e?{x:t.x,y:t.y}:e}function ni(){return navigator.maxTouchPoints||"ontouchstart"in this}function ii(){var t,e,n,i,s=qn,c=ti,a=ei,l=ni,r={},o=Le("start","drag","end"),g=0,B=0;function d(t){t.on("mousedown.drag",Q).filter(l).on("touchstart.drag",u).on("touchmove.drag",h,Kn).on("touchend.drag touchcancel.drag",U).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Q(a,l){if(!i&&s.call(this,a,l)){var r=b(this,c.call(this,a,l),a,l,"mouse");r&&(Tn(a.view).on("mousemove.drag",I,On).on("mouseup.drag",F,On),function(t){var e=t.document.documentElement,n=Tn(t).on("dragstart.drag",Pn,On);"onselectstart"in e?n.on("selectstart.drag",Pn,On):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(a.view),_n(a),n=!1,t=a.clientX,e=a.clientY,r("start",a))}}function I(i){if(Pn(i),!n){var s=i.clientX-t,c=i.clientY-e;n=s*s+c*c>B}r.mouse("drag",i)}function F(t){Tn(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,i=Tn(t).on("dragstart.drag",null);e&&(i.on("click.drag",Pn,On),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),Pn(t),r.mouse("end",t)}function u(t,e){if(s.call(this,t,e)){var n,i,a=t.changedTouches,l=c.call(this,t,e),r=a.length;for(n=0;n<r;++n)(i=b(this,l,t,e,a[n].identifier,a[n]))&&(_n(t),i("start",t,a[n]))}}function h(t){var e,n,i=t.changedTouches,s=i.length;for(e=0;e<s;++e)(n=r[i[e].identifier])&&(Pn(t),n("drag",t,i[e]))}function U(t){var e,n,s=t.changedTouches,c=s.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<c;++e)(n=r[s[e].identifier])&&(_n(t),n("end",t,s[e]))}function b(t,e,n,i,s,c){var l,B,Q,I=o.copy(),F=zn(c||n,e);if(null!=(Q=a.call(t,new $n("beforestart",{sourceEvent:n,target:d,identifier:s,active:g,x:F[0],y:F[1],dx:0,dy:0,dispatch:I}),i)))return l=Q.x-F[0]||0,B=Q.y-F[1]||0,function n(c,a,o){var u,h=F;switch(c){case"start":r[s]=n,u=g++;break;case"end":delete r[s],--g;case"drag":F=zn(o||a,e),u=g}I.call(c,t,new $n(c,{sourceEvent:a,subject:Q,target:d,identifier:s,active:u,x:F[0]+l,y:F[1]+B,dx:F[0]-h[0],dy:F[1]-h[1],dispatch:I}),i)}}return d.filter=function(t){return arguments.length?(s="function"==typeof t?t:jn(!!t),d):s},d.container=function(t){return arguments.length?(c="function"==typeof t?t:jn(t),d):c},d.subject=function(t){return arguments.length?(a="function"==typeof t?t:jn(t),d):a},d.touchable=function(t){return arguments.length?(l="function"==typeof t?t:jn(!!t),d):l},d.on=function(){var t=o.on.apply(o,arguments);return t===o?d:t},d.clickDistance=function(t){return arguments.length?(B=(t=+t)*t,d):Math.sqrt(B)},d}function si(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ci(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ai(){}$n.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var li=.7,ri=1/li,oi="\\s*([+-]?\\d+)\\s*",gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",di=/^#([0-9a-f]{3,8})$/,Qi=new RegExp(`^rgb\\(${oi},${oi},${oi}\\)$`),Ii=new RegExp(`^rgb\\(${Bi},${Bi},${Bi}\\)$`),Fi=new RegExp(`^rgba\\(${oi},${oi},${oi},${gi}\\)$`),ui=new RegExp(`^rgba\\(${Bi},${Bi},${Bi},${gi}\\)$`),hi=new RegExp(`^hsl\\(${gi},${Bi},${Bi}\\)$`),Ui=new RegExp(`^hsla\\(${gi},${Bi},${Bi},${gi}\\)$`),bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ci(){return this.rgb().formatHex()}function yi(){return this.rgb().formatRgb()}function fi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=di.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Gi(e):3===n?new xi(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?pi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?pi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Qi.exec(t))?new xi(e[1],e[2],e[3],1):(e=Ii.exec(t))?new xi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Fi.exec(t))?pi(e[1],e[2],e[3],e[4]):(e=ui.exec(t))?pi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=hi.exec(t))?vi(e[1],e[2]/100,e[3]/100,1):(e=Ui.exec(t))?vi(e[1],e[2]/100,e[3]/100,e[4]):bi.hasOwnProperty(t)?Gi(bi[t]):"transparent"===t?new xi(NaN,NaN,NaN,0):null}function Gi(t){return new xi(t>>16&255,t>>8&255,255&t,1)}function pi(t,e,n,i){return i<=0&&(t=e=n=NaN),new xi(t,e,n,i)}function mi(t){return t instanceof ai||(t=fi(t)),t?new xi((t=t.rgb()).r,t.g,t.b,t.opacity):new xi}function Ai(t,e,n,i){return 1===arguments.length?mi(t):new xi(t,e,n,null==i?1:i)}function xi(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Li(){return`#${Xi(this.r)}${Xi(this.g)}${Xi(this.b)}`}function Si(){const t=Ri(this.opacity);return`${1===t?"rgb(":"rgba("}${Ni(this.r)}, ${Ni(this.g)}, ${Ni(this.b)}${1===t?")":`, ${t})`}`}function Ri(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ni(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xi(t){return((t=Ni(t))<16?"0":"")+t.toString(16)}function vi(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vi(t,e,n,i)}function Zi(t){if(t instanceof Vi)return new Vi(t.h,t.s,t.l,t.opacity);if(t instanceof ai||(t=fi(t)),!t)return new Vi;if(t instanceof Vi)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,s=Math.min(e,n,i),c=Math.max(e,n,i),a=NaN,l=c-s,r=(c+s)/2;return l?(a=e===c?(n-i)/l+6*(n<i):n===c?(i-e)/l+2:(e-n)/l+4,l/=r<.5?c+s:2-c-s,a*=60):l=r>0&&r<1?0:a,new Vi(a,l,r,t.opacity)}function Ei(t,e,n,i){return 1===arguments.length?Zi(t):new Vi(t,e,n,null==i?1:i)}function Vi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function wi(t){return(t=(t||0)%360)<0?t+360:t}function Wi(t){return Math.max(0,Math.min(1,t||0))}function Hi(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}si(ai,fi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ci,formatHex:Ci,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Zi(this).formatHsl()},formatRgb:yi,toString:yi}),si(xi,Ai,ci(ai,{brighter(t){return t=null==t?ri:Math.pow(ri,t),new xi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?li:Math.pow(li,t),new xi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xi(Ni(this.r),Ni(this.g),Ni(this.b),Ri(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Li,formatHex:Li,formatHex8:function(){return`#${Xi(this.r)}${Xi(this.g)}${Xi(this.b)}${Xi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Si,toString:Si})),si(Vi,Ei,ci(ai,{brighter(t){return t=null==t?ri:Math.pow(ri,t),new Vi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?li:Math.pow(li,t),new Vi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,s=2*n-i;return new xi(Hi(t>=240?t-240:t+120,s,i),Hi(t,s,i),Hi(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new Vi(wi(this.h),Wi(this.s),Wi(this.l),Ri(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ri(this.opacity);return`${1===t?"hsl(":"hsla("}${wi(this.h)}, ${100*Wi(this.s)}%, ${100*Wi(this.l)}%${1===t?")":`, ${t})`}`}}));const Di=Math.PI/180,Yi=180/Math.PI,ki=.96422,Ji=1,Mi=.82521,Ti=4/29,zi=6/29,Ki=3*zi*zi,Oi=zi*zi*zi;function _i(t){if(t instanceof ji)return new ji(t.l,t.a,t.b,t.opacity);if(t instanceof is)return ss(t);t instanceof xi||(t=mi(t));var e,n,i=es(t.r),s=es(t.g),c=es(t.b),a=$i((.2225045*i+.7168786*s+.0606169*c)/Ji);return i===s&&s===c?e=n=a:(e=$i((.4360747*i+.3850649*s+.1430804*c)/ki),n=$i((.0139322*i+.0971045*s+.7141733*c)/Mi)),new ji(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Pi(t,e,n,i){return 1===arguments.length?_i(t):new ji(t,e,n,null==i?1:i)}function ji(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function $i(t){return t>Oi?Math.pow(t,1/3):t/Ki+Ti}function qi(t){return t>zi?t*t*t:Ki*(t-Ti)}function ts(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function es(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ns(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof is)return new is(t.h,t.c,t.l,t.opacity);if(t instanceof ji||(t=_i(t)),0===t.a&&0===t.b)return new is(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Yi;return new is(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new is(t,e,n,null==i?1:i)}function is(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function ss(t){if(isNaN(t.h))return new ji(t.l,0,0,t.opacity);var e=t.h*Di;return new ji(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}si(ji,Pi,ci(ai,{brighter(t){return new ji(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new ji(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new xi(ts(3.1338561*(e=ki*qi(e))-1.6168667*(t=Ji*qi(t))-.4906146*(n=Mi*qi(n))),ts(-.9787684*e+1.9161415*t+.033454*n),ts(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),si(is,ns,ci(ai,{brighter(t){return new is(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new is(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return ss(this).rgb()}}));var cs=-.14861,as=1.78277,ls=-.29227,rs=-.90649,os=1.97294,gs=os*rs,Bs=os*as,ds=as*ls-rs*cs;function Qs(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Is)return new Is(t.h,t.s,t.l,t.opacity);t instanceof xi||(t=mi(t));var e=t.r/255,n=t.g/255,i=t.b/255,s=(ds*i+gs*e-Bs*n)/(ds+gs-Bs),c=i-s,a=(os*(n-s)-ls*c)/rs,l=Math.sqrt(a*a+c*c)/(os*s*(1-s)),r=l?Math.atan2(a,c)*Yi-120:NaN;return new Is(r<0?r+360:r,l,s,t.opacity)}(t):new Is(t,e,n,null==i?1:i)}function Is(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}si(Is,Qs,ci(ai,{brighter(t){return t=null==t?ri:Math.pow(ri,t),new Is(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?li:Math.pow(li,t),new Is(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Di,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),s=Math.sin(t);return new xi(255*(e+n*(cs*i+as*s)),255*(e+n*(ls*i+rs*s)),255*(e+n*(os*i)),this.opacity)}}));var Fs=t=>()=>t;function us(t,e){return function(n){return t+n*e}}function hs(t,e){var n=e-t;return n?us(t,n>180||n<-180?n-360*Math.round(n/360):n):Fs(isNaN(t)?e:t)}function Us(t){return 1==(t=+t)?bs:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Fs(isNaN(e)?n:e)}}function bs(t,e){var n=e-t;return n?us(t,n):Fs(isNaN(t)?e:t)}var Cs=function t(e){var n=Us(e);function i(t,e){var i=n((t=Ai(t)).r,(e=Ai(e)).r),s=n(t.g,e.g),c=n(t.b,e.b),a=bs(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=s(e),t.b=c(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);var ys,fs=(ys=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),s=t[i],c=t[i+1],a=i>0?t[i-1]:2*s-c,l=i<e-1?t[i+2]:2*c-s;return function(t,e,n,i,s){var c=t*t,a=c*t;return((1-3*t+3*c-a)*e+(4-6*c+3*a)*n+(1+3*t+3*c-3*a)*i+a*s)/6}((n-i/e)*e,a,s,c,l)}},function(t){var e,n,i=t.length,s=new Array(i),c=new Array(i),a=new Array(i);for(e=0;e<i;++e)n=Ai(t[e]),s[e]=n.r||0,c[e]=n.g||0,a[e]=n.b||0;return s=ys(s),c=ys(c),a=ys(a),n.opacity=1,function(t){return n.r=s(t),n.g=c(t),n.b=a(t),n+""}});function Gs(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,s=e.slice();return function(c){for(n=0;n<i;++n)s[n]=t[n]*(1-c)+e[n]*c;return s}}function ps(t,e){var n,i=e?e.length:0,s=t?Math.min(i,t.length):0,c=new Array(s),a=new Array(i);for(n=0;n<s;++n)c[n]=Ns(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<s;++n)a[n]=c[n](t);return a}}function ms(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function As(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xs(t,e){var n,i={},s={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Ns(t[n],e[n]):s[n]=e[n];return function(t){for(n in i)s[n]=i[n](t);return s}}var Ls=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ss=new RegExp(Ls.source,"g");function Rs(t,e){var n,i,s,c=Ls.lastIndex=Ss.lastIndex=0,a=-1,l=[],r=[];for(t+="",e+="";(n=Ls.exec(t))&&(i=Ss.exec(e));)(s=i.index)>c&&(s=e.slice(c,s),l[a]?l[a]+=s:l[++a]=s),(n=n[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,r.push({i:a,x:As(n,i)})),c=Ss.lastIndex;return c<e.length&&(s=e.slice(c),l[a]?l[a]+=s:l[++a]=s),l.length<2?r[0]?function(t){return function(e){return t(e)+""}}(r[0].x):function(t){return function(){return t}}(e):(e=r.length,function(t){for(var n,i=0;i<e;++i)l[(n=r[i]).i]=n.x(t);return l.join("")})}function Ns(t,e){var n,i=typeof e;return null==e||"boolean"===i?Fs(e):("number"===i?As:"string"===i?(n=fi(e))?(e=n,Cs):Rs:e instanceof fi?Cs:e instanceof Date?ms:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Gs:Array.isArray(e)?ps:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?xs:As)(t,e)}function Xs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var vs,Zs=180/Math.PI,Es={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vs(t,e,n,i,s,c){var a,l,r;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(r=t*n+e*i)&&(n-=t*r,i-=e*r),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,r/=l),t*i<e*n&&(t=-t,e=-e,r=-r,a=-a),{translateX:s,translateY:c,rotate:Math.atan2(e,t)*Zs,skewX:Math.atan(r)*Zs,scaleX:a,scaleY:l}}function ws(t,e,n,i){function s(t){return t.length?t.pop()+" ":""}return function(c,a){var l=[],r=[];return c=t(c),a=t(a),function(t,i,s,c,a,l){if(t!==s||i!==c){var r=a.push("translate(",null,e,null,n);l.push({i:r-4,x:As(t,s)},{i:r-2,x:As(i,c)})}else(s||c)&&a.push("translate("+s+e+c+n)}(c.translateX,c.translateY,a.translateX,a.translateY,l,r),function(t,e,n,c){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),c.push({i:n.push(s(n)+"rotate(",null,i)-2,x:As(t,e)})):e&&n.push(s(n)+"rotate("+e+i)}(c.rotate,a.rotate,l,r),function(t,e,n,c){t!==e?c.push({i:n.push(s(n)+"skewX(",null,i)-2,x:As(t,e)}):e&&n.push(s(n)+"skewX("+e+i)}(c.skewX,a.skewX,l,r),function(t,e,n,i,c,a){if(t!==n||e!==i){var l=c.push(s(c)+"scale(",null,",",null,")");a.push({i:l-4,x:As(t,n)},{i:l-2,x:As(e,i)})}else 1===n&&1===i||c.push(s(c)+"scale("+n+","+i+")")}(c.scaleX,c.scaleY,a.scaleX,a.scaleY,l,r),c=a=null,function(t){for(var e,n=-1,i=r.length;++n<i;)l[(e=r[n]).i]=e.x(t);return l.join("")}}}var Ws=ws((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Es:Vs(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Hs=ws((function(t){return null==t?Es:(vs||(vs=document.createElementNS("http://www.w3.org/2000/svg","g")),vs.setAttribute("transform",t),(t=vs.transform.baseVal.consolidate())?Vs((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Es)}),", ",")",")");var Ds=function(t){return function(e,n){var i=t((e=Ei(e)).h,(n=Ei(n)).h),s=bs(e.s,n.s),c=bs(e.l,n.l),a=bs(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=s(t),e.l=c(t),e.opacity=a(t),e+""}}}(hs);var Ys=function(t){return function(e,n){var i=t((e=ns(e)).h,(n=ns(n)).h),s=bs(e.c,n.c),c=bs(e.l,n.l),a=bs(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=s(t),e.l=c(t),e.opacity=a(t),e+""}}}(hs);function ks(t){return function e(n){function i(e,i){var s=t((e=Qs(e)).h,(i=Qs(i)).h),c=bs(e.s,i.s),a=bs(e.l,i.l),l=bs(e.opacity,i.opacity);return function(t){return e.h=s(t),e.s=c(t),e.l=a(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,i.gamma=e,i}(1)}ks(hs);var Js=ks(bs);function Ms(t,e){void 0===e&&(e=t,t=Ns);for(var n=0,i=e.length-1,s=e[0],c=new Array(i<0?0:i);n<i;)c[n]=t(s,s=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return c[e](t-e)}}function Ts(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var zs,Ks,Os=0,_s=0,Ps=0,js=1e3,$s=0,qs=0,tc=0,ec="object"==typeof performance&&performance.now?performance:Date,nc="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ic(){return qs||(nc(sc),qs=ec.now()+tc)}function sc(){qs=0}function cc(){this._call=this._time=this._next=null}function ac(t,e,n){var i=new cc;return i.restart(t,e,n),i}function lc(){qs=($s=ec.now())+tc,Os=_s=0;try{!function(){ic(),++Os;for(var t,e=zs;e;)(t=qs-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Os}()}finally{Os=0,function(){var t,e,n=zs,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:zs=e);Ks=t,oc(i)}(),qs=0}}function rc(){var t=ec.now(),e=t-$s;e>js&&(tc-=e,$s=t)}function oc(t){Os||(_s&&(_s=clearTimeout(_s)),t-qs>24?(t<1/0&&(_s=setTimeout(lc,t-ec.now()-tc)),Ps&&(Ps=clearInterval(Ps))):(Ps||($s=ec.now(),Ps=setInterval(rc,js)),Os=1,nc(lc)))}function gc(t,e,n){var i=new cc;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}cc.prototype=ac.prototype={constructor:cc,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ic():+n)+(null==e?0:+e),this._next||Ks===this||(Ks?Ks._next=this:zs=this,Ks=this),this._call=t,this._time=n,oc()},stop:function(){this._call&&(this._call=null,this._time=1/0,oc())}};var Bc=Le("start","end","cancel","interrupt"),dc=[],Qc=0,Ic=1,Fc=2,uc=3,hc=4,Uc=5,bc=6;function Cc(t,e,n,i,s,c){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,s=t.__transition;function c(t){n.state=Ic,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(c){var o,g,B,d;if(n.state!==Ic)return r();for(o in s)if((d=s[o]).name===n.name){if(d.state===uc)return gc(a);d.state===hc?(d.state=bc,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete s[o]):+o<e&&(d.state=bc,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete s[o])}if(gc((function(){n.state===uc&&(n.state=hc,n.timer.restart(l,n.delay,n.time),l(c))})),n.state=Fc,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Fc){for(n.state=uc,i=new Array(B=n.tween.length),o=0,g=-1;o<B;++o)(d=n.tween[o].value.call(t,t.__data__,n.index,n.group))&&(i[++g]=d);i.length=g+1}}function l(e){for(var s=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(r),n.state=Uc,1),c=-1,a=i.length;++c<a;)i[c].call(t,s);n.state===Uc&&(n.on.call("end",t,t.__data__,n.index,n.group),r())}function r(){for(var i in n.state=bc,n.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=n,n.timer=ac(c,0,n.time)}(t,n,{name:e,index:i,group:s,on:Bc,tween:dc,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:Qc})}function yc(t,e){var n=Gc(t,e);if(n.state>Qc)throw new Error("too late; already scheduled");return n}function fc(t,e){var n=Gc(t,e);if(n.state>uc)throw new Error("too late; already running");return n}function Gc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function pc(t,e){var n,i;return function(){var s=fc(this,t),c=s.tween;if(c!==n)for(var a=0,l=(i=n=c).length;a<l;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}s.tween=i}}function mc(t,e,n){var i,s;if("function"!=typeof n)throw new Error;return function(){var c=fc(this,t),a=c.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:n},r=0,o=s.length;r<o;++r)if(s[r].name===e){s[r]=l;break}r===o&&s.push(l)}c.tween=s}}function Ac(t,e,n){var i=t._id;return t.each((function(){var t=fc(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Gc(t,i).value[e]}}function xc(t,e){var n;return("number"==typeof e?As:e instanceof fi?Cs:(n=fi(e))?(e=n,Cs):Rs)(t,e)}function Lc(t){return function(){this.removeAttribute(t)}}function Sc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rc(t,e,n){var i,s,c=n+"";return function(){var a=this.getAttribute(t);return a===c?null:a===i?s:s=e(i=a,n)}}function Nc(t,e,n){var i,s,c=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===c?null:a===i?s:s=e(i=a,n)}}function Xc(t,e,n){var i,s,c;return function(){var a,l,r=n(this);if(null!=r)return(a=this.getAttribute(t))===(l=r+"")?null:a===i&&l===s?c:(s=l,c=e(i=a,r));this.removeAttribute(t)}}function vc(t,e,n){var i,s,c;return function(){var a,l,r=n(this);if(null!=r)return(a=this.getAttributeNS(t.space,t.local))===(l=r+"")?null:a===i&&l===s?c:(s=l,c=e(i=a,r));this.removeAttributeNS(t.space,t.local)}}function Zc(t,e){var n,i;function s(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,s)),n}return s._value=e,s}function Ec(t,e){var n,i;function s(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,s)),n}return s._value=e,s}function Vc(t,e){return function(){yc(this,t).delay=+e.apply(this,arguments)}}function wc(t,e){return e=+e,function(){yc(this,t).delay=e}}function Wc(t,e){return function(){fc(this,t).duration=+e.apply(this,arguments)}}function Hc(t,e){return e=+e,function(){fc(this,t).duration=e}}var Dc=Mn.prototype.constructor;function Yc(t){return function(){this.style.removeProperty(t)}}var kc=0;function Jc(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Mc(){return++kc}var Tc=Mn.prototype;Jc.prototype={constructor:Jc,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=He(t));for(var i=this._groups,s=i.length,c=new Array(s),a=0;a<s;++a)for(var l,r,o=i[a],g=o.length,B=c[a]=new Array(g),d=0;d<g;++d)(l=o[d])&&(r=t.call(l,l.__data__,d,o))&&("__data__"in l&&(r.__data__=l.__data__),B[d]=r,Cc(B[d],e,n,d,B,Gc(l,n)));return new Jc(c,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ye(t));for(var i=this._groups,s=i.length,c=[],a=[],l=0;l<s;++l)for(var r,o=i[l],g=o.length,B=0;B<g;++B)if(r=o[B]){for(var d,Q=t.call(r,r.__data__,B,o),I=Gc(r,n),F=0,u=Q.length;F<u;++F)(d=Q[F])&&Cc(d,e,n,F,Q,I);c.push(Q),a.push(r)}return new Jc(c,a,e,n)},selectChild:Tc.selectChild,selectChildren:Tc.selectChildren,filter:function(t){"function"!=typeof t&&(t=Je(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var c,a=e[s],l=a.length,r=i[s]=[],o=0;o<l;++o)(c=a[o])&&t.call(c,c.__data__,o,a)&&r.push(c);return new Jc(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,s=n.length,c=Math.min(i,s),a=new Array(i),l=0;l<c;++l)for(var r,o=e[l],g=n[l],B=o.length,d=a[l]=new Array(B),Q=0;Q<B;++Q)(r=o[Q]||g[Q])&&(d[Q]=r);for(;l<i;++l)a[l]=e[l];return new Jc(a,this._parents,this._name,this._id)},selection:function(){return new Dc(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Mc(),i=this._groups,s=i.length,c=0;c<s;++c)for(var a,l=i[c],r=l.length,o=0;o<r;++o)if(a=l[o]){var g=Gc(a,e);Cc(a,t,n,o,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Jc(i,this._parents,t,n)},call:Tc.call,nodes:Tc.nodes,node:Tc.node,size:Tc.size,empty:Tc.empty,each:Tc.each,on:function(t,e){var n=this._id;return arguments.length<2?Gc(this.node(),n).on.on(t):this.each(function(t,e,n){var i,s,c=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?yc:fc;return function(){var a=c(this,t),l=a.on;l!==i&&(s=(i=l).copy()).on(e,n),a.on=s}}(n,t,e))},attr:function(t,e){var n=Ze(t),i="transform"===n?Hs:xc;return this.attrTween(t,"function"==typeof e?(n.local?vc:Xc)(n,i,Ac(this,"attr."+t,e)):null==e?(n.local?Sc:Lc)(n):(n.local?Nc:Rc)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=Ze(t);return this.tween(n,(i.local?Zc:Ec)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Ws:xc;return null==e?this.styleTween(t,function(t,e){var n,i,s;return function(){var c=Qn(this,t),a=(this.style.removeProperty(t),Qn(this,t));return c===a?null:c===n&&a===i?s:s=e(n=c,i=a)}}(t,i)).on("end.style."+t,Yc(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,s,c;return function(){var a=Qn(this,t),l=n(this),r=l+"";return null==l&&(this.style.removeProperty(t),r=l=Qn(this,t)),a===r?null:a===i&&r===s?c:(s=r,c=e(i=a,l))}}(t,i,Ac(this,"style."+t,e))).each(function(t,e){var n,i,s,c,a="style."+e,l="end."+a;return function(){var r=fc(this,t),o=r.on,g=null==r.value[a]?c||(c=Yc(e)):void 0;o===n&&s===g||(i=(n=o).copy()).on(l,s=g),r.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,s,c=n+"";return function(){var a=Qn(this,t);return a===c?null:a===i?s:s=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,s;function c(){var c=e.apply(this,arguments);return c!==s&&(i=(s=c)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}(t,c,n)),i}return c._value=e,c}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ac(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,s=Gc(this.node(),n).tween,c=0,a=s.length;c<a;++c)if((i=s[c]).name===t)return i.value;return null}return this.each((null==e?pc:mc)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Vc:wc)(e,t)):Gc(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Wc:Hc)(e,t)):Gc(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){fc(this,t).ease=e}}(e,t)):Gc(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;fc(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,s=n.size();return new Promise((function(c,a){var l={value:a},r={value:function(){0==--s&&c()}};n.each((function(){var n=fc(this,i),s=n.on;s!==t&&((e=(t=s).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(r)),n.on=e})),0===s&&c()}))},[Symbol.iterator]:Tc[Symbol.iterator]};const zc=t=>+t;function Kc(t){return--t*t*t+1}var Oc={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function _c(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Mn.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,s,c=t.__transition,a=!0;if(c){for(s in e=null==e?null:e+"",c)(n=c[s]).name===e?(i=n.state>Fc&&n.state<Uc,n.state=bc,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete c[s]):a=!1;a&&delete t.__transition}}(this,t)}))},Mn.prototype.transition=function(t){var e,n;t instanceof Jc?(e=t._id,t=t._name):(e=Mc(),(n=Oc).time=ic(),t=null==t?null:t+"");for(var i=this._groups,s=i.length,c=0;c<s;++c)for(var a,l=i[c],r=l.length,o=0;o<r;++o)(a=l[o])&&Cc(a,t,e,o,l,n||_c(a,e));return new Jc(i,this._parents,t,e)};const Pc=Math.PI,jc=2*Pc,$c=1e-6,qc=jc-$c;function ta(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class ea{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?ta:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ta;const n=10**e;return function(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,i){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,e,n,i,s,c){this._append`C${+t},${+e},${+n},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,e,n,i,s){if(t=+t,e=+e,n=+n,i=+i,(s=+s)<0)throw new Error(`negative radius: ${s}`);let c=this._x1,a=this._y1,l=n-t,r=i-e,o=c-t,g=a-e,B=o*o+g*g;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(B>$c)if(Math.abs(g*l-r*o)>$c&&s){let d=n-c,Q=i-a,I=l*l+r*r,F=d*d+Q*Q,u=Math.sqrt(I),h=Math.sqrt(B),U=s*Math.tan((Pc-Math.acos((I+B-F)/(2*u*h)))/2),b=U/h,C=U/u;Math.abs(b-1)>$c&&this._append`L${t+b*o},${e+b*g}`,this._append`A${s},${s},0,0,${+(g*d>o*Q)},${this._x1=t+C*l},${this._y1=e+C*r}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,i,s,c){if(t=+t,e=+e,c=!!c,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),r=t+a,o=e+l,g=1^c,B=c?i-s:s-i;null===this._x1?this._append`M${r},${o}`:(Math.abs(this._x1-r)>$c||Math.abs(this._y1-o)>$c)&&this._append`L${r},${o}`,n&&(B<0&&(B=B%jc+jc),B>qc?this._append`A${n},${n},0,1,${g},${t-a},${e-l}A${n},${n},0,1,${g},${this._x1=r},${this._y1=o}`:B>$c&&this._append`A${n},${n},0,${+(B>=Pc)},${g},${this._x1=t+n*Math.cos(s)},${this._y1=e+n*Math.sin(s)}`)}rect(t,e,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function na(t=3){return new ea(+t)}function ia(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function sa(t){return(t=ia(Math.abs(t)))?t[1]:NaN}var ca,aa=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function la(t){if(!(e=aa.exec(t)))throw new Error("invalid format: "+t);var e;return new ra({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ra(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function oa(t,e){var n=ia(t,e);if(!n)return t+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}la.prototype=ra.prototype,ra.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ga={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>oa(100*t,e),r:oa,s:function(t,e){var n=ia(t,e);if(!n)return t+"";var i=n[0],s=n[1],c=s-(ca=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,a=i.length;return c===a?i:c>a?i+new Array(c-a+1).join("0"):c>0?i.slice(0,c)+"."+i.slice(c):"0."+new Array(1-c).join("0")+ia(t,Math.max(0,e+c-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ba(t){return t}var da,Qa,Ia,Fa=Array.prototype.map,ua=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ha(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Ba:(e=Fa.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var s=t.length,c=[],a=0,l=e[0],r=0;s>0&&l>0&&(r+l+1>i&&(l=Math.max(1,i-r)),c.push(t.substring(s-=l,s+l)),!((r+=l+1)>i));)l=e[a=(a+1)%e.length];return c.reverse().join(n)}),s=void 0===t.currency?"":t.currency[0]+"",c=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",l=void 0===t.numerals?Ba:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Fa.call(t.numerals,String)),r=void 0===t.percent?"%":t.percent+"",o=void 0===t.minus?"":t.minus+"",g=void 0===t.nan?"NaN":t.nan+"";function B(t){var e=(t=la(t)).fill,n=t.align,B=t.sign,d=t.symbol,Q=t.zero,I=t.width,F=t.comma,u=t.precision,h=t.trim,U=t.type;"n"===U?(F=!0,U="g"):ga[U]||(void 0===u&&(u=12),h=!0,U="g"),(Q||"0"===e&&"="===n)&&(Q=!0,e="0",n="=");var b="$"===d?s:"#"===d&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",C="$"===d?c:/[%p]/.test(U)?r:"",y=ga[U],f=/[defgprs%]/.test(U);function G(t){var s,c,r,d=b,G=C;if("c"===U)G=y(t)+G,t="";else{var p=(t=+t)<0||1/t<0;if(t=isNaN(t)?g:y(Math.abs(t),u),h&&(t=function(t){t:for(var e,n=t.length,i=1,s=-1;i<n;++i)switch(t[i]){case".":s=e=i;break;case"0":0===s&&(s=i),e=i;break;default:if(!+t[i])break t;s>0&&(s=0)}return s>0?t.slice(0,s)+t.slice(e+1):t}(t)),p&&0==+t&&"+"!==B&&(p=!1),d=(p?"("===B?B:o:"-"===B||"("===B?"":B)+d,G=("s"===U?ua[8+ca/3]:"")+G+(p&&"("===B?")":""),f)for(s=-1,c=t.length;++s<c;)if(48>(r=t.charCodeAt(s))||r>57){G=(46===r?a+t.slice(s+1):t.slice(s))+G,t=t.slice(0,s);break}}F&&!Q&&(t=i(t,1/0));var m=d.length+t.length+G.length,A=m<I?new Array(I-m+1).join(e):"";switch(F&&Q&&(t=i(A+t,A.length?I-G.length:1/0),A=""),n){case"<":t=d+t+G+A;break;case"=":t=d+A+t+G;break;case"^":t=A.slice(0,m=A.length>>1)+d+t+G+A.slice(m);break;default:t=A+d+t+G}return l(t)}return u=void 0===u?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,u)):Math.max(0,Math.min(20,u)),G.toString=function(){return t+""},G}return{format:B,formatPrefix:function(t,e){var n=B(((t=la(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(sa(e)/3))),s=Math.pow(10,-i),c=ua[8+i/3];return function(t){return n(s*t)+c}}}}da=ha({thousands:",",grouping:[3],currency:["$",""]}),Qa=da.format,Ia=da.formatPrefix;var Ua=1e-6,ba=1e-12,Ca=Math.PI,ya=Ca/2,fa=Ca/4,Ga=2*Ca,pa=180/Ca,ma=Ca/180,Aa=Math.abs,xa=Math.atan,La=Math.atan2,Sa=Math.cos,Ra=Math.exp,Na=Math.log,Xa=Math.pow,va=Math.sin,Za=Math.sign||function(t){return t>0?1:t<0?-1:0},Ea=Math.sqrt,Va=Math.tan;function wa(t){return t>1?0:t<-1?Ca:Math.acos(t)}function Wa(t){return t>1?ya:t<-1?-ya:Math.asin(t)}function Ha(){}function Da(t,e){t&&ka.hasOwnProperty(t.type)&&ka[t.type](t,e)}var Ya={Feature:function(t,e){Da(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,s=n.length;++i<s;)Da(n[i].geometry,e)}},ka={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ja(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)Ja(n[i],e,0)},Polygon:function(t,e){Ma(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)Ma(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,s=n.length;++i<s;)Da(n[i],e)}};function Ja(t,e,n){var i,s=-1,c=t.length-n;for(e.lineStart();++s<c;)i=t[s],e.point(i[0],i[1],i[2]);e.lineEnd()}function Ma(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ja(t[n],e,1);e.polygonEnd()}function Ta(t,e){t&&Ya.hasOwnProperty(t.type)?Ya[t.type](t,e):Da(t,e)}function za(t){return[La(t[1],t[0]),Wa(t[2])]}function Ka(t){var e=t[0],n=t[1],i=Sa(n);return[i*Sa(e),i*va(e),va(n)]}function Oa(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function _a(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pa(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ja(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function $a(t){var e=Ea(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function qa(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function tl(t,e){return Aa(t)>Ca&&(t-=Math.round(t/Ga)*Ga),[t,e]}function el(t,e,n){return(t%=Ga)?e||n?qa(il(t),sl(e,n)):il(t):e||n?sl(e,n):tl}function nl(t){return function(e,n){return Aa(e+=t)>Ca&&(e-=Math.round(e/Ga)*Ga),[e,n]}}function il(t){var e=nl(t);return e.invert=nl(-t),e}function sl(t,e){var n=Sa(t),i=va(t),s=Sa(e),c=va(e);function a(t,e){var a=Sa(e),l=Sa(t)*a,r=va(t)*a,o=va(e),g=o*n+l*i;return[La(r*s-g*c,l*n-o*i),Wa(g*s+r*c)]}return a.invert=function(t,e){var a=Sa(e),l=Sa(t)*a,r=va(t)*a,o=va(e),g=o*s-r*c;return[La(r*s+o*c,l*n+g*i),Wa(g*n-l*i)]},a}function cl(t,e){(e=Ka(e))[0]-=t,$a(e);var n=wa(-e[1]);return((-e[2]<0?-n:n)+Ga-Ua)%Ga}function al(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:Ha,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ll(t,e){return Aa(t[0]-e[0])<Ua&&Aa(t[1]-e[1])<Ua}function rl(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ol(t,e,n,i,s){var c,a,l=[],r=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(ll(i,a)){if(!i[2]&&!a[2]){for(s.lineStart(),c=0;c<e;++c)s.point((i=t[c])[0],i[1]);return void s.lineEnd()}a[0]+=2*Ua}l.push(n=new rl(i,t,null,!0)),r.push(n.o=new rl(i,null,n,!1)),l.push(n=new rl(a,t,null,!1)),r.push(n.o=new rl(a,null,n,!0))}})),l.length){for(r.sort(e),gl(l),gl(r),c=0,a=r.length;c<a;++c)r[c].e=n=!n;for(var o,g,B=l[0];;){for(var d=B,Q=!0;d.v;)if((d=d.n)===B)return;o=d.z,s.lineStart();do{if(d.v=d.o.v=!0,d.e){if(Q)for(c=0,a=o.length;c<a;++c)s.point((g=o[c])[0],g[1]);else i(d.x,d.n.x,1,s);d=d.n}else{if(Q)for(o=d.p.z,c=o.length-1;c>=0;--c)s.point((g=o[c])[0],g[1]);else i(d.x,d.p.x,-1,s);d=d.p}o=(d=d.o).z,Q=!Q}while(!d.v);s.lineEnd()}}}function gl(t){if(e=t.length){for(var e,n,i=0,s=t[0];++i<e;)s.n=n=t[i],n.p=s,s=n;s.n=n=t[0],n.p=s}}function Bl(t){return Aa(t[0])<=Ca?t[0]:Za(t[0])*((Aa(t[0])+Ca)%Ga-Ca)}function dl(t,e,n,i){return function(s){var c,a,l,r=e(s),o=al(),g=e(o),B=!1,d={point:Q,lineStart:F,lineEnd:u,polygonStart:function(){d.point=h,d.lineStart=U,d.lineEnd=b,a=[],c=[]},polygonEnd:function(){d.point=Q,d.lineStart=F,d.lineEnd=u,a=re(a);var t=function(t,e){var n=Bl(e),i=e[1],s=va(i),c=[va(n),-Sa(n),0],a=0,l=0,r=new mt;1===s?i=ya+Ua:-1===s&&(i=-ya-Ua);for(var o=0,g=t.length;o<g;++o)if(d=(B=t[o]).length)for(var B,d,Q=B[d-1],I=Bl(Q),F=Q[1]/2+fa,u=va(F),h=Sa(F),U=0;U<d;++U,I=C,u=f,h=G,Q=b){var b=B[U],C=Bl(b),y=b[1]/2+fa,f=va(y),G=Sa(y),p=C-I,m=p>=0?1:-1,A=m*p,x=A>Ca,L=u*f;if(r.add(La(L*m*va(A),h*G+L*Sa(A))),a+=x?p+m*Ga:p,x^I>=n^C>=n){var S=_a(Ka(Q),Ka(b));$a(S);var R=_a(c,S);$a(R);var N=(x^p>=0?-1:1)*Wa(R[2]);(i>N||i===N&&(S[0]||S[1]))&&(l+=x^p>=0?1:-1)}}return(a<-Ua||a<Ua&&r<-ba)^1&l}(c,i);a.length?(B||(s.polygonStart(),B=!0),ol(a,Il,t,n,s)):t&&(B||(s.polygonStart(),B=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),B&&(s.polygonEnd(),B=!1),a=c=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function Q(e,n){t(e,n)&&s.point(e,n)}function I(t,e){r.point(t,e)}function F(){d.point=I,r.lineStart()}function u(){d.point=Q,r.lineEnd()}function h(t,e){l.push([t,e]),g.point(t,e)}function U(){g.lineStart(),l=[]}function b(){h(l[0][0],l[0][1]),g.lineEnd();var t,e,n,i,r=g.clean(),d=o.result(),Q=d.length;if(l.pop(),c.push(l),l=null,Q)if(1&r){if((e=(n=d[0]).length-1)>0){for(B||(s.polygonStart(),B=!0),s.lineStart(),t=0;t<e;++t)s.point((i=n[t])[0],i[1]);s.lineEnd()}}else Q>1&&2&r&&d.push(d.pop().concat(d.shift())),a.push(d.filter(Ql))}return d}}function Ql(t){return t.length>1}function Il(t,e){return((t=t.x)[0]<0?t[1]-ya-Ua:ya-t[1])-((e=e.x)[0]<0?e[1]-ya-Ua:ya-e[1])}tl.invert=tl;var Fl=dl((function(){return!0}),(function(t){var e,n=NaN,i=NaN,s=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(c,a){var l=c>0?Ca:-Ca,r=Aa(c-n);Aa(r-Ca)<Ua?(t.point(n,i=(i+a)/2>0?ya:-ya),t.point(s,i),t.lineEnd(),t.lineStart(),t.point(l,i),t.point(c,i),e=0):s!==l&&r>=Ca&&(Aa(n-s)<Ua&&(n-=s*Ua),Aa(c-l)<Ua&&(c-=l*Ua),i=function(t,e,n,i){var s,c,a=va(t-n);return Aa(a)>Ua?xa((va(e)*(c=Sa(i))*va(n)-va(i)*(s=Sa(e))*va(t))/(s*c*a)):(e+i)/2}(n,i,c,a),t.point(s,i),t.lineEnd(),t.lineStart(),t.point(l,i),e=0),t.point(n=c,i=a),s=l},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var s;if(null==t)s=n*ya,i.point(-Ca,s),i.point(0,s),i.point(Ca,s),i.point(Ca,0),i.point(Ca,-s),i.point(0,-s),i.point(-Ca,-s),i.point(-Ca,0),i.point(-Ca,s);else if(Aa(t[0]-e[0])>Ua){var c=t[0]<e[0]?Ca:-Ca;s=n*c/2,i.point(-c,s),i.point(0,s),i.point(c,s)}else i.point(e[0],e[1])}),[-Ca,-ya]);function ul(t){var e=Sa(t),n=6*ma,i=e>0,s=Aa(e)>Ua;function c(t,n){return Sa(t)*Sa(n)>e}function a(t,n,i){var s=[1,0,0],c=_a(Ka(t),Ka(n)),a=Oa(c,c),l=c[0],r=a-l*l;if(!r)return!i&&t;var o=e*a/r,g=-e*l/r,B=_a(s,c),d=ja(s,o);Pa(d,ja(c,g));var Q=B,I=Oa(d,Q),F=Oa(Q,Q),u=I*I-F*(Oa(d,d)-1);if(!(u<0)){var h=Ea(u),U=ja(Q,(-I-h)/F);if(Pa(U,d),U=za(U),!i)return U;var b,C=t[0],y=n[0],f=t[1],G=n[1];y<C&&(b=C,C=y,y=b);var p=y-C,m=Aa(p-Ca)<Ua;if(!m&&G<f&&(b=f,f=G,G=b),m||p<Ua?m?f+G>0^U[1]<(Aa(U[0]-C)<Ua?f:G):f<=U[1]&&U[1]<=G:p>Ca^(C<=U[0]&&U[0]<=y)){var A=ja(Q,(-I+h)/F);return Pa(A,d),[U,za(A)]}}}function l(e,n){var s=i?t:Ca-t,c=0;return e<-s?c|=1:e>s&&(c|=2),n<-s?c|=4:n>s&&(c|=8),c}return dl(c,(function(t){var e,n,r,o,g;return{lineStart:function(){o=r=!1,g=1},point:function(B,d){var Q,I=[B,d],F=c(B,d),u=i?F?0:l(B,d):F?l(B+(B<0?Ca:-Ca),d):0;if(!e&&(o=r=F)&&t.lineStart(),F!==r&&(!(Q=a(e,I))||ll(e,Q)||ll(I,Q))&&(I[2]=1),F!==r)g=0,F?(t.lineStart(),Q=a(I,e),t.point(Q[0],Q[1])):(Q=a(e,I),t.point(Q[0],Q[1],2),t.lineEnd()),e=Q;else if(s&&e&&i^F){var h;u&n||!(h=a(I,e,!0))||(g=0,i?(t.lineStart(),t.point(h[0][0],h[0][1]),t.point(h[1][0],h[1][1]),t.lineEnd()):(t.point(h[1][0],h[1][1]),t.lineEnd(),t.lineStart(),t.point(h[0][0],h[0][1],3)))}!F||e&&ll(e,I)||t.point(I[0],I[1]),e=I,r=F,n=u},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return g|(o&&r)<<1}}}),(function(e,i,s,c){!function(t,e,n,i,s,c){if(n){var a=Sa(e),l=va(e),r=i*n;null==s?(s=e+i*Ga,c=e-r/2):(s=cl(a,s),c=cl(a,c),(i>0?s<c:s>c)&&(s+=i*Ga));for(var o,g=s;i>0?g>c:g<c;g-=r)o=za([a,-l*Sa(g),-l*va(g)]),t.point(o[0],o[1])}}(c,t,n,s,e,i)}),i?[0,-t]:[-Ca,t-Ca])}var hl=1e9,Ul=-hl;function bl(t,e,n,i){function s(s,c){return t<=s&&s<=n&&e<=c&&c<=i}function c(s,c,l,o){var g=0,B=0;if(null==s||(g=a(s,l))!==(B=a(c,l))||r(s,c)<0^l>0)do{o.point(0===g||3===g?t:n,g>1?i:e)}while((g=(g+l+4)%4)!==B);else o.point(c[0],c[1])}function a(i,s){return Aa(i[0]-t)<Ua?s>0?0:3:Aa(i[0]-n)<Ua?s>0?2:1:Aa(i[1]-e)<Ua?s>0?1:0:s>0?3:2}function l(t,e){return r(t.x,e.x)}function r(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var r,o,g,B,d,Q,I,F,u,h,U,b=a,C=al(),y={point:f,lineStart:function(){y.point=G,o&&o.push(g=[]);h=!0,u=!1,I=F=NaN},lineEnd:function(){r&&(G(B,d),Q&&u&&C.rejoin(),r.push(C.result()));y.point=f,u&&b.lineEnd()},polygonStart:function(){b=C,r=[],o=[],U=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,s=o.length;n<s;++n)for(var c,a,l=o[n],r=1,g=l.length,B=l[0],d=B[0],Q=B[1];r<g;++r)c=d,a=Q,d=(B=l[r])[0],Q=B[1],a<=i?Q>i&&(d-c)*(i-a)>(Q-a)*(t-c)&&++e:Q<=i&&(d-c)*(i-a)<(Q-a)*(t-c)&&--e;return e}(),n=U&&e,s=(r=re(r)).length;(n||s)&&(a.polygonStart(),n&&(a.lineStart(),c(null,null,1,a),a.lineEnd()),s&&ol(r,l,e,c,a),a.polygonEnd());b=a,r=o=g=null}};function f(t,e){s(t,e)&&b.point(t,e)}function G(c,a){var l=s(c,a);if(o&&g.push([c,a]),h)B=c,d=a,Q=l,h=!1,l&&(b.lineStart(),b.point(c,a));else if(l&&u)b.point(c,a);else{var r=[I=Math.max(Ul,Math.min(hl,I)),F=Math.max(Ul,Math.min(hl,F))],C=[c=Math.max(Ul,Math.min(hl,c)),a=Math.max(Ul,Math.min(hl,a))];!function(t,e,n,i,s,c){var a,l=t[0],r=t[1],o=0,g=1,B=e[0]-l,d=e[1]-r;if(a=n-l,B||!(a>0)){if(a/=B,B<0){if(a<o)return;a<g&&(g=a)}else if(B>0){if(a>g)return;a>o&&(o=a)}if(a=s-l,B||!(a<0)){if(a/=B,B<0){if(a>g)return;a>o&&(o=a)}else if(B>0){if(a<o)return;a<g&&(g=a)}if(a=i-r,d||!(a>0)){if(a/=d,d<0){if(a<o)return;a<g&&(g=a)}else if(d>0){if(a>g)return;a>o&&(o=a)}if(a=c-r,d||!(a<0)){if(a/=d,d<0){if(a>g)return;a>o&&(o=a)}else if(d>0){if(a<o)return;a<g&&(g=a)}return o>0&&(t[0]=l+o*B,t[1]=r+o*d),g<1&&(e[0]=l+g*B,e[1]=r+g*d),!0}}}}}(r,C,t,e,n,i)?l&&(b.lineStart(),b.point(c,a),U=!1):(u||(b.lineStart(),b.point(r[0],r[1])),b.point(C[0],C[1]),l||b.lineEnd(),U=!1)}I=c,F=a,u=l}return y}}var Cl,yl,fl,Gl,pl=t=>t,ml=new mt,Al=new mt,xl={point:Ha,lineStart:Ha,lineEnd:Ha,polygonStart:function(){xl.lineStart=Ll,xl.lineEnd=Nl},polygonEnd:function(){xl.lineStart=xl.lineEnd=xl.point=Ha,ml.add(Aa(Al)),Al=new mt},result:function(){var t=ml/2;return ml=new mt,t}};function Ll(){xl.point=Sl}function Sl(t,e){xl.point=Rl,Cl=fl=t,yl=Gl=e}function Rl(t,e){Al.add(Gl*t-fl*e),fl=t,Gl=e}function Nl(){Rl(Cl,yl)}var Xl=xl,vl=1/0,Zl=vl,El=-vl,Vl=El,wl={point:function(t,e){t<vl&&(vl=t);t>El&&(El=t);e<Zl&&(Zl=e);e>Vl&&(Vl=e)},lineStart:Ha,lineEnd:Ha,polygonStart:Ha,polygonEnd:Ha,result:function(){var t=[[vl,Zl],[El,Vl]];return El=Vl=-(Zl=vl=1/0),t}};var Wl,Hl,Dl,Yl,kl=wl,Jl=0,Ml=0,Tl=0,zl=0,Kl=0,Ol=0,_l=0,Pl=0,jl=0,$l={point:ql,lineStart:tr,lineEnd:ir,polygonStart:function(){$l.lineStart=sr,$l.lineEnd=cr},polygonEnd:function(){$l.point=ql,$l.lineStart=tr,$l.lineEnd=ir},result:function(){var t=jl?[_l/jl,Pl/jl]:Ol?[zl/Ol,Kl/Ol]:Tl?[Jl/Tl,Ml/Tl]:[NaN,NaN];return Jl=Ml=Tl=zl=Kl=Ol=_l=Pl=jl=0,t}};function ql(t,e){Jl+=t,Ml+=e,++Tl}function tr(){$l.point=er}function er(t,e){$l.point=nr,ql(Dl=t,Yl=e)}function nr(t,e){var n=t-Dl,i=e-Yl,s=Ea(n*n+i*i);zl+=s*(Dl+t)/2,Kl+=s*(Yl+e)/2,Ol+=s,ql(Dl=t,Yl=e)}function ir(){$l.point=ql}function sr(){$l.point=ar}function cr(){lr(Wl,Hl)}function ar(t,e){$l.point=lr,ql(Wl=Dl=t,Hl=Yl=e)}function lr(t,e){var n=t-Dl,i=e-Yl,s=Ea(n*n+i*i);zl+=s*(Dl+t)/2,Kl+=s*(Yl+e)/2,Ol+=s,_l+=(s=Yl*t-Dl*e)*(Dl+t),Pl+=s*(Yl+e),jl+=3*s,ql(Dl=t,Yl=e)}var rr=$l;function or(t){this._context=t}or.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ga)}},result:Ha};var gr,Br,dr,Qr,Ir,Fr=new mt,ur={point:Ha,lineStart:function(){ur.point=hr},lineEnd:function(){gr&&Ur(Br,dr),ur.point=Ha},polygonStart:function(){gr=!0},polygonEnd:function(){gr=null},result:function(){var t=+Fr;return Fr=new mt,t}};function hr(t,e){ur.point=Ur,Br=Qr=t,dr=Ir=e}function Ur(t,e){Qr-=t,Ir-=e,Fr.add(Ea(Qr*Qr+Ir*Ir)),Qr=t,Ir=e}var br=ur;let Cr,yr,fr,Gr;class pr{constructor(t){this._append=null==t?mr:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return mr;if(e!==Cr){const t=10**e;Cr=e,yr=function(e){let n=1;this._+=e[0];for(const i=e.length;n<i;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return yr}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==fr||this._append!==yr){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,fr=t,yr=this._append,Gr=this._,this._=e}this._+=Gr}}result(){const t=this._;return this._="",t.length?t:null}}function mr(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ar(t,e){let n,i,s=3,c=4.5;function a(t){return t&&("function"==typeof c&&i.pointRadius(+c.apply(this,arguments)),Ta(t,n(i))),i.result()}return a.area=function(t){return Ta(t,n(Xl)),Xl.result()},a.measure=function(t){return Ta(t,n(br)),br.result()},a.bounds=function(t){return Ta(t,n(kl)),kl.result()},a.centroid=function(t){return Ta(t,n(rr)),rr.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,pl):(t=e).stream,a):t},a.context=function(t){return arguments.length?(i=null==t?(e=null,new pr(s)):new or(e=t),"function"!=typeof c&&i.pointRadius(c),a):e},a.pointRadius=function(t){return arguments.length?(c="function"==typeof t?t:(i.pointRadius(+t),+t),a):c},a.digits=function(t){if(!arguments.length)return s;if(null==t)s=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);s=e}return null===e&&(i=new pr(s)),a},a.projection(t).digits(s).context(e)}function xr(t){return{stream:Lr(t)}}function Lr(t){return function(e){var n=new Sr;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Sr(){}function Rr(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Ta(n,t.stream(kl)),e(kl.result()),null!=i&&t.clipExtent(i),t}function Nr(t,e,n){return Rr(t,(function(n){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],c=Math.min(i/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),a=+e[0][0]+(i-c*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(s-c*(n[1][1]+n[0][1]))/2;t.scale(150*c).translate([a,l])}),n)}function Xr(t,e,n){return Nr(t,[[0,0],e],n)}function vr(t,e,n){return Rr(t,(function(n){var i=+e,s=i/(n[1][0]-n[0][0]),c=(i-s*(n[1][0]+n[0][0]))/2,a=-s*n[0][1];t.scale(150*s).translate([c,a])}),n)}function Zr(t,e,n){return Rr(t,(function(n){var i=+e,s=i/(n[1][1]-n[0][1]),c=-s*n[0][0],a=(i-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([c,a])}),n)}Sr.prototype={constructor:Sr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Er=16,Vr=Sa(30*ma);function wr(t,e){return+e?function(t,e){function n(i,s,c,a,l,r,o,g,B,d,Q,I,F,u){var h=o-i,U=g-s,b=h*h+U*U;if(b>4*e&&F--){var C=a+d,y=l+Q,f=r+I,G=Ea(C*C+y*y+f*f),p=Wa(f/=G),m=Aa(Aa(f)-1)<Ua||Aa(c-B)<Ua?(c+B)/2:La(y,C),A=t(m,p),x=A[0],L=A[1],S=x-i,R=L-s,N=U*S-h*R;(N*N/b>e||Aa((h*S+U*R)/b-.5)>.3||a*d+l*Q+r*I<Vr)&&(n(i,s,c,a,l,r,x,L,m,C/=G,y/=G,f,F,u),u.point(x,L),n(x,L,m,C,y,f,o,g,B,d,Q,I,F,u))}}return function(e){var i,s,c,a,l,r,o,g,B,d,Q,I,F={point:u,lineStart:h,lineEnd:b,polygonStart:function(){e.polygonStart(),F.lineStart=C},polygonEnd:function(){e.polygonEnd(),F.lineStart=h}};function u(n,i){n=t(n,i),e.point(n[0],n[1])}function h(){g=NaN,F.point=U,e.lineStart()}function U(i,s){var c=Ka([i,s]),a=t(i,s);n(g,B,o,d,Q,I,g=a[0],B=a[1],o=i,d=c[0],Q=c[1],I=c[2],Er,e),e.point(g,B)}function b(){F.point=u,e.lineEnd()}function C(){h(),F.point=y,F.lineEnd=f}function y(t,e){U(i=t,e),s=g,c=B,a=d,l=Q,r=I,F.point=U}function f(){n(g,B,o,d,Q,I,s,c,i,a,l,r,Er,e),F.lineEnd=b,b()}return F}}(t,e):function(t){return Lr({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Wr=Lr({point:function(t,e){this.stream.point(t*ma,e*ma)}});function Hr(t,e,n,i,s,c){if(!c)return function(t,e,n,i,s){function c(c,a){return[e+t*(c*=i),n-t*(a*=s)]}return c.invert=function(c,a){return[(c-e)/t*i,(n-a)/t*s]},c}(t,e,n,i,s);var a=Sa(c),l=va(c),r=a*t,o=l*t,g=a/t,B=l/t,d=(l*n-a*e)/t,Q=(l*e+a*n)/t;function I(t,c){return[r*(t*=i)-o*(c*=s)+e,n-o*t-r*c]}return I.invert=function(t,e){return[i*(g*t-B*e+d),s*(Q-B*t-g*e)]},I}function Dr(t){return Yr((function(){return t}))()}function Yr(t){var e,n,i,s,c,a,l,r,o,g,B=150,d=480,Q=250,I=0,F=0,u=0,h=0,U=0,b=0,C=1,y=1,f=null,G=Fl,p=null,m=pl,A=.5;function x(t){return r(t[0]*ma,t[1]*ma)}function L(t){return(t=r.invert(t[0],t[1]))&&[t[0]*pa,t[1]*pa]}function S(){var t=Hr(B,0,0,C,y,b).apply(null,e(I,F)),i=Hr(B,d-t[0],Q-t[1],C,y,b);return n=el(u,h,U),l=qa(e,i),r=qa(n,l),a=wr(l,A),R()}function R(){return o=g=null,x}return x.stream=function(t){return o&&g===t?o:o=Wr(function(t){return Lr({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(G(a(m(g=t)))))},x.preclip=function(t){return arguments.length?(G=t,f=void 0,R()):G},x.postclip=function(t){return arguments.length?(m=t,p=i=s=c=null,R()):m},x.clipAngle=function(t){return arguments.length?(G=+t?ul(f=t*ma):(f=null,Fl),R()):f*pa},x.clipExtent=function(t){return arguments.length?(m=null==t?(p=i=s=c=null,pl):bl(p=+t[0][0],i=+t[0][1],s=+t[1][0],c=+t[1][1]),R()):null==p?null:[[p,i],[s,c]]},x.scale=function(t){return arguments.length?(B=+t,S()):B},x.translate=function(t){return arguments.length?(d=+t[0],Q=+t[1],S()):[d,Q]},x.center=function(t){return arguments.length?(I=t[0]%360*ma,F=t[1]%360*ma,S()):[I*pa,F*pa]},x.rotate=function(t){return arguments.length?(u=t[0]%360*ma,h=t[1]%360*ma,U=t.length>2?t[2]%360*ma:0,S()):[u*pa,h*pa,U*pa]},x.angle=function(t){return arguments.length?(b=t%360*ma,S()):b*pa},x.reflectX=function(t){return arguments.length?(C=t?-1:1,S()):C<0},x.reflectY=function(t){return arguments.length?(y=t?-1:1,S()):y<0},x.precision=function(t){return arguments.length?(a=wr(l,A=t*t),R()):Ea(A)},x.fitExtent=function(t,e){return Nr(x,t,e)},x.fitSize=function(t,e){return Xr(x,t,e)},x.fitWidth=function(t,e){return vr(x,t,e)},x.fitHeight=function(t,e){return Zr(x,t,e)},function(){return e=t.apply(this,arguments),x.invert=e.invert&&L,S()}}function kr(t){var e=0,n=Ca/3,i=Yr(t),s=i(e,n);return s.parallels=function(t){return arguments.length?i(e=t[0]*ma,n=t[1]*ma):[e*pa,n*pa]},s}function Jr(t,e){var n=va(t),i=(n+va(e))/2;if(Aa(i)<Ua)return function(t){var e=Sa(t);function n(t,n){return[t*e,va(n)/e]}return n.invert=function(t,n){return[t/e,Wa(n*e)]},n}(t);var s=1+n*(2*i-n),c=Ea(s)/i;function a(t,e){var n=Ea(s-2*i*va(e))/i;return[n*va(t*=i),c-n*Sa(t)]}return a.invert=function(t,e){var n=c-e,a=La(t,Aa(n))*Za(n);return n*i<0&&(a-=Ca*Za(t)*Za(n)),[a/i,Wa((s-(t*t+n*n)*i*i)/(2*i))]},a}function Mr(){return kr(Jr).scale(155.424).center([0,33.6442])}function Tr(){return Mr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function zr(){var t,e,n,i,s,c,a=Tr(),l=Mr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=Mr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o={point:function(t,e){c=[t,e]}};function g(t){var e=t[0],a=t[1];return c=null,n.point(e,a),c||(i.point(e,a),c)||(s.point(e,a),c)}function B(){return t=e=null,g}return g.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,s=(t[1]-n[1])/e;return(s>=.12&&s<.234&&i>=-.425&&i<-.214?l:s>=.166&&s<.234&&i>=-.214&&i<-.115?r:a).invert(t)},g.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,i){for(var s=-1;++s<e;)t[s].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([a.stream(e=n),l.stream(n),r.stream(n)])},g.precision=function(t){return arguments.length?(a.precision(t),l.precision(t),r.precision(t),B()):a.precision()},g.scale=function(t){return arguments.length?(a.scale(t),l.scale(.35*t),r.scale(t),g.translate(a.translate())):a.scale()},g.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),c=+t[0],g=+t[1];return n=a.translate(t).clipExtent([[c-.455*e,g-.238*e],[c+.455*e,g+.238*e]]).stream(o),i=l.translate([c-.307*e,g+.201*e]).clipExtent([[c-.425*e+Ua,g+.12*e+Ua],[c-.214*e-Ua,g+.234*e-Ua]]).stream(o),s=r.translate([c-.205*e,g+.212*e]).clipExtent([[c-.214*e+Ua,g+.166*e+Ua],[c-.115*e-Ua,g+.234*e-Ua]]).stream(o),B()},g.fitExtent=function(t,e){return Nr(g,t,e)},g.fitSize=function(t,e){return Xr(g,t,e)},g.fitWidth=function(t,e){return vr(g,t,e)},g.fitHeight=function(t,e){return Zr(g,t,e)},g.scale(1070)}function Kr(t){return function(e,n){var i=Sa(e),s=Sa(n),c=t(i*s);return c===1/0?[2,0]:[c*s*va(e),c*va(n)]}}function Or(t){return function(e,n){var i=Ea(e*e+n*n),s=t(i),c=va(s),a=Sa(s);return[La(e*c,i*a),Wa(i&&n*c/i)]}}var _r=Kr((function(t){return Ea(2/(1+t))}));function Pr(){return Dr(_r).scale(124.75).clipAngle(179.999)}_r.invert=Or((function(t){return 2*Wa(t/2)}));var jr=Kr((function(t){return(t=wa(t))&&t/va(t)}));function $r(){return Dr(jr).scale(79.4188).clipAngle(179.999)}function qr(t,e){return[t,Na(Va((ya+e)/2))]}function to(){return eo(qr).scale(961/Ga)}function eo(t){var e,n,i,s=Dr(t),c=s.center,a=s.scale,l=s.translate,r=s.clipExtent,o=null;function g(){var c=Ca*a(),l=s(function(t){function e(e){return(e=t(e[0]*ma,e[1]*ma))[0]*=pa,e[1]*=pa,e}return t=el(t[0]*ma,t[1]*ma,t.length>2?t[2]*ma:0),e.invert=function(e){return(e=t.invert(e[0]*ma,e[1]*ma))[0]*=pa,e[1]*=pa,e},e}(s.rotate()).invert([0,0]));return r(null==o?[[l[0]-c,l[1]-c],[l[0]+c,l[1]+c]]:t===qr?[[Math.max(l[0]-c,o),e],[Math.min(l[0]+c,n),i]]:[[o,Math.max(l[1]-c,e)],[n,Math.min(l[1]+c,i)]])}return s.scale=function(t){return arguments.length?(a(t),g()):a()},s.translate=function(t){return arguments.length?(l(t),g()):l()},s.center=function(t){return arguments.length?(c(t),g()):c()},s.clipExtent=function(t){return arguments.length?(null==t?o=e=n=i=null:(o=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),g()):null==o?null:[[o,e],[n,i]]},g()}function no(t){return Va((ya+t)/2)}function io(t,e){var n=Sa(t),i=t===e?va(t):Na(n/Sa(e))/Na(no(e)/no(t)),s=n*Xa(no(t),i)/i;if(!i)return qr;function c(t,e){s>0?e<-ya+Ua&&(e=-ya+Ua):e>ya-Ua&&(e=ya-Ua);var n=s/Xa(no(e),i);return[n*va(i*t),s-n*Sa(i*t)]}return c.invert=function(t,e){var n=s-e,c=Za(i)*Ea(t*t+n*n),a=La(t,Aa(n))*Za(n);return n*i<0&&(a-=Ca*Za(t)*Za(n)),[a/i,2*xa(Xa(s/c,1/i))-ya]},c}function so(){return kr(io).scale(109.5).parallels([30,30])}function co(t,e){return[t,e]}function ao(){return Dr(co).scale(152.63)}function lo(t,e){var n=Sa(t),i=t===e?va(t):(n-Sa(e))/(e-t),s=n/i+t;if(Aa(i)<Ua)return co;function c(t,e){var n=s-e,c=i*t;return[n*va(c),s-n*Sa(c)]}return c.invert=function(t,e){var n=s-e,c=La(t,Aa(n))*Za(n);return n*i<0&&(c-=Ca*Za(t)*Za(n)),[c/i,s-Za(i)*Ea(t*t+n*n)]},c}function ro(){return kr(lo).scale(131.154).center([0,13.9389])}jr.invert=Or((function(t){return t})),qr.invert=function(t,e){return[t,2*xa(Ra(e))-ya]},co.invert=co;var oo=1.340264,go=-.081106,Bo=893e-6,Qo=.003796,Io=Ea(3)/2;function Fo(t,e){var n=Wa(Io*va(e)),i=n*n,s=i*i*i;return[t*Sa(n)/(Io*(oo+3*go*i+s*(7*Bo+9*Qo*i))),n*(oo+go*i+s*(Bo+Qo*i))]}function uo(){return Dr(Fo).scale(177.158)}function ho(t,e){var n=Sa(e),i=Sa(t)*n;return[n*va(t)/i,va(e)/i]}function Uo(){return Dr(ho).scale(144.049).clipAngle(60)}function bo(t,e){return[Sa(e)*va(t),va(e)]}function Co(){return Dr(bo).scale(249.5).clipAngle(90+Ua)}function yo(t,e){var n=Sa(e),i=1+Sa(t)*n;return[n*va(t)/i,va(e)/i]}function fo(){return Dr(yo).scale(250).clipAngle(142)}function Go(t,e){return[Na(Va((ya+e)/2)),-t]}function po(){var t=eo(Go),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function mo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ao(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}Fo.invert=function(t,e){for(var n,i=e,s=i*i,c=s*s*s,a=0;a<12&&(c=(s=(i-=n=(i*(oo+go*s+c*(Bo+Qo*s))-e)/(oo+3*go*s+c*(7*Bo+9*Qo*s)))*i)*s*s,!(Aa(n)<ba));++a);return[Io*t*(oo+3*go*s+c*(7*Bo+9*Qo*s))/Sa(i),Wa(va(i)/Io)]},ho.invert=Or(xa),bo.invert=Or(Wa),yo.invert=Or((function(t){return 2*xa(t)})),Go.invert=function(t,e){return[-e,2*xa(Ra(t))-ya]};const xo=Symbol("implicit");function Lo(){var t=new At,e=[],n=[],i=xo;function s(s){let c=t.get(s);if(void 0===c){if(i!==xo)return i;t.set(s,c=e.push(s)-1)}return n[c%n.length]}return s.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new At;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return s},s.range=function(t){return arguments.length?(n=Array.from(t),s):n.slice()},s.unknown=function(t){return arguments.length?(i=t,s):i},s.copy=function(){return Lo(e,n).unknown(i)},mo.apply(s,arguments),s}function So(){var t,e,n=Lo().unknown(void 0),i=n.domain,s=n.range,c=0,a=1,l=!1,r=0,o=0,g=.5;function B(){var n=i().length,B=a<c,d=B?a:c,Q=B?c:a;t=(Q-d)/Math.max(1,n-r+2*o),l&&(t=Math.floor(t)),d+=(Q-d-t*(n-r))*g,e=t*(1-r),l&&(d=Math.round(d),e=Math.round(e));var I=Be(n).map((function(e){return d+t*e}));return s(B?I.reverse():I)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),B()):i()},n.range=function(t){return arguments.length?([c,a]=t,c=+c,a=+a,B()):[c,a]},n.rangeRound=function(t){return[c,a]=t,c=+c,a=+a,l=!0,B()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(l=!!t,B()):l},n.padding=function(t){return arguments.length?(r=Math.min(1,o=+t),B()):r},n.paddingInner=function(t){return arguments.length?(r=Math.min(1,t),B()):r},n.paddingOuter=function(t){return arguments.length?(o=+t,B()):o},n.align=function(t){return arguments.length?(g=Math.max(0,Math.min(1,t)),B()):g},n.copy=function(){return So(i(),[c,a]).round(l).paddingInner(r).paddingOuter(o).align(g)},mo.apply(B(),arguments)}function Ro(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ro(e())},t}function No(){return Ro(So.apply(null,arguments).paddingInner(1))}function Xo(t){return+t}var vo=[0,1];function Zo(t){return t}function Eo(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Vo(t,e,n){var i=t[0],s=t[1],c=e[0],a=e[1];return s<i?(i=Eo(s,i),c=n(a,c)):(i=Eo(i,s),c=n(c,a)),function(t){return c(i(t))}}function wo(t,e,n){var i=Math.min(t.length,e.length)-1,s=new Array(i),c=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)s[a]=Eo(t[a],t[a+1]),c[a]=n(e[a],e[a+1]);return function(e){var n=ut(t,e,1,i)-1;return c[n](s[n](e))}}function Wo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ho(){var t,e,n,i,s,c,a=vo,l=vo,r=Ns,o=Zo;function g(){var t=Math.min(a.length,l.length);return o!==Zo&&(o=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),i=t>2?wo:Vo,s=c=null,B}function B(e){return null==e||isNaN(e=+e)?n:(s||(s=i(a.map(t),l,r)))(t(o(e)))}return B.invert=function(n){return o(e((c||(c=i(l,a.map(t),As)))(n)))},B.domain=function(t){return arguments.length?(a=Array.from(t,Xo),g()):a.slice()},B.range=function(t){return arguments.length?(l=Array.from(t),g()):l.slice()},B.rangeRound=function(t){return l=Array.from(t),r=Xs,g()},B.clamp=function(t){return arguments.length?(o=!!t||Zo,g()):o!==Zo},B.interpolate=function(t){return arguments.length?(r=t,g()):r},B.unknown=function(t){return arguments.length?(n=t,B):n},function(n,i){return t=n,e=i,g()}}function Do(){return Ho()(Zo,Zo)}function Yo(t,e,n,i){var s,c=Kt(t,e,n);switch((i=la(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(s=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(sa(e)/3)))-sa(Math.abs(t)))}(c,a))||(i.precision=s),Ia(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(s=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,sa(e)-sa(t))+1}(c,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=s-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(s=function(t){return Math.max(0,-sa(Math.abs(t)))}(c))||(i.precision=s-2*("%"===i.type))}return Qa(i)}function ko(t){var e=t.domain;return t.ticks=function(t){var n=e();return Tt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Yo(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,s,c=e(),a=0,l=c.length-1,r=c[a],o=c[l],g=10;for(o<r&&(s=r,r=o,o=s,s=a,a=l,l=s);g-- >0;){if((s=zt(r,o,n))===i)return c[a]=r,c[l]=o,e(c);if(s>0)r=Math.floor(r/s)*s,o=Math.ceil(o/s)*s;else{if(!(s<0))break;r=Math.ceil(r*s)/s,o=Math.floor(o*s)/s}i=s}return t},t}function Jo(){var t=Do();return t.copy=function(){return Wo(t,Jo())},mo.apply(t,arguments),ko(t)}function Mo(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Xo),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Mo(t).unknown(e)},t=arguments.length?Array.from(t,Xo):[0,1],ko(n)}function To(t,e){var n,i=0,s=(t=t.slice()).length-1,c=t[i],a=t[s];return a<c&&(n=i,i=s,s=n,n=c,c=a,a=n),t[i]=e.floor(c),t[s]=e.ceil(a),t}function zo(t){return Math.log(t)}function Ko(t){return Math.exp(t)}function Oo(t){return-Math.log(-t)}function _o(t){return-Math.exp(-t)}function Po(t){return isFinite(t)?+("1e"+t):t<0?0:t}function jo(t){return(e,n)=>-t(-e,n)}function $o(t){const e=t(zo,Ko),n=e.domain;let i,s,c=10;function a(){return i=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(c),s=function(t){return 10===t?Po:t===Math.E?Math.exp:e=>Math.pow(t,e)}(c),n()[0]<0?(i=jo(i),s=jo(s),t(Oo,_o)):t(zo,Ko),e}return e.base=function(t){return arguments.length?(c=+t,a()):c},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],l=e[e.length-1];const r=l<a;r&&([a,l]=[l,a]);let o,g,B=i(a),d=i(l);const Q=null==t?10:+t;let I=[];if(!(c%1)&&d-B<Q){if(B=Math.floor(B),d=Math.ceil(d),a>0){for(;B<=d;++B)for(o=1;o<c;++o)if(g=B<0?o/s(-B):o*s(B),!(g<a)){if(g>l)break;I.push(g)}}else for(;B<=d;++B)for(o=c-1;o>=1;--o)if(g=B>0?o/s(-B):o*s(B),!(g<a)){if(g>l)break;I.push(g)}2*I.length<Q&&(I=Tt(a,l,Q))}else I=Tt(B,d,Math.min(d-B,Q)).map(s);return r?I.reverse():I},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===c?"s":","),"function"!=typeof n&&(c%1||null!=(n=la(n)).precision||(n.trim=!0),n=Qa(n)),t===1/0)return n;const a=Math.max(1,c*t/e.ticks().length);return t=>{let e=t/s(Math.round(i(t)));return e*c<c-.5&&(e*=c),e<=a?n(t):""}},e.nice=()=>n(To(n(),{floor:t=>s(Math.floor(i(t))),ceil:t=>s(Math.ceil(i(t)))})),e}function qo(){const t=$o(Ho()).domain([1,10]);return t.copy=()=>Wo(t,qo()).base(t.base()),mo.apply(t,arguments),t}function tg(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function eg(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ng(t){var e=1,n=t(tg(e),eg(e));return n.constant=function(n){return arguments.length?t(tg(e=+n),eg(e)):e},ko(n)}function ig(){var t=ng(Ho());return t.copy=function(){return Wo(t,ig()).constant(t.constant())},mo.apply(t,arguments)}function sg(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function cg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ag(t){return t<0?-t*t:t*t}function lg(t){var e=t(Zo,Zo),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(Zo,Zo):.5===n?t(cg,ag):t(sg(n),sg(1/n)):n},ko(e)}function rg(){var t=lg(Ho());return t.copy=function(){return Wo(t,rg()).exponent(t.exponent())},mo.apply(t,arguments),t}function og(){var t,e=[],n=[],i=[];function s(){var t=0,s=Math.max(1,n.length);for(i=new Array(s-1);++t<s;)i[t-1]=ie(e,t/s);return c}function c(e){return null==e||isNaN(e=+e)?t:n[ut(i,e)]}return c.invertExtent=function(t){var s=n.indexOf(t);return s<0?[NaN,NaN]:[s>0?i[s-1]:e[0],s<i.length?i[s]:e[e.length-1]]},c.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(gt),s()},c.range=function(t){return arguments.length?(n=Array.from(t),s()):n.slice()},c.unknown=function(e){return arguments.length?(t=e,c):t},c.quantiles=function(){return i.slice()},c.copy=function(){return og().domain(e).range(n).unknown(t)},mo.apply(c,arguments)}function gg(){var t,e=[.5],n=[0,1],i=1;function s(s){return null!=s&&s<=s?n[ut(e,s,0,i)]:t}return s.domain=function(t){return arguments.length?(e=Array.from(t),i=Math.min(e.length,n.length-1),s):e.slice()},s.range=function(t){return arguments.length?(n=Array.from(t),i=Math.min(e.length,n.length-1),s):n.slice()},s.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return gg().domain(e).range(n).unknown(t)},mo.apply(s,arguments)}const Bg=new Date,dg=new Date;function Qg(t,e,n,i){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=e=>(t(e=new Date(+e)),e),s.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),s.round=t=>{const e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),s.range=(n,i,c)=>{const a=[];if(n=s.ceil(n),c=null==c?1:Math.floor(c),!(n<i&&c>0))return a;let l;do{a.push(l=new Date(+n)),e(n,c),t(n)}while(l<n&&n<i);return a},s.filter=n=>Qg((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,i)=>{if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})),n&&(s.count=(e,i)=>(Bg.setTime(+e),dg.setTime(+i),t(Bg),t(dg),Math.floor(n(Bg,dg))),s.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(i?e=>i(e)%t==0:e=>s.count(0,e)%t==0):s:null)),s}const Ig=Qg((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Ig.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Qg((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):Ig:null),Ig.range;const Fg=1e3,ug=6e4,hg=36e5,Ug=864e5,bg=6048e5,Cg=2592e6,yg=31536e6,fg=Qg((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*Fg)}),((t,e)=>(e-t)/Fg),(t=>t.getUTCSeconds()));fg.range;const Gg=Qg((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fg)}),((t,e)=>{t.setTime(+t+e*ug)}),((t,e)=>(e-t)/ug),(t=>t.getMinutes()));Gg.range;const pg=Qg((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*ug)}),((t,e)=>(e-t)/ug),(t=>t.getUTCMinutes()));pg.range;const mg=Qg((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fg-t.getMinutes()*ug)}),((t,e)=>{t.setTime(+t+e*hg)}),((t,e)=>(e-t)/hg),(t=>t.getHours()));mg.range;const Ag=Qg((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*hg)}),((t,e)=>(e-t)/hg),(t=>t.getUTCHours()));Ag.range;const xg=Qg((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ug)/Ug),(t=>t.getDate()-1));xg.range;const Lg=Qg((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Ug),(t=>t.getUTCDate()-1));Lg.range;const Sg=Qg((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Ug),(t=>Math.floor(t/Ug)));function Rg(t){return Qg((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ug)/bg))}Sg.range;const Ng=Rg(0),Xg=Rg(1),vg=Rg(2),Zg=Rg(3),Eg=Rg(4),Vg=Rg(5),wg=Rg(6);function Wg(t){return Qg((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/bg))}Ng.range,Xg.range,vg.range,Zg.range,Eg.range,Vg.range,wg.range;const Hg=Wg(0),Dg=Wg(1),Yg=Wg(2),kg=Wg(3),Jg=Wg(4),Mg=Wg(5),Tg=Wg(6);Hg.range,Dg.range,Yg.range,kg.range,Jg.range,Mg.range,Tg.range;const zg=Qg((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()));zg.range;const Kg=Qg((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()));Kg.range;const Og=Qg((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Og.every=t=>isFinite(t=Math.floor(t))&&t>0?Qg((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,Og.range;const _g=Qg((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));function Pg(t,e,n,i,s,c){const a=[[fg,1,Fg],[fg,5,5e3],[fg,15,15e3],[fg,30,3e4],[c,1,ug],[c,5,3e5],[c,15,9e5],[c,30,18e5],[s,1,hg],[s,3,108e5],[s,6,216e5],[s,12,432e5],[i,1,Ug],[i,2,1728e5],[n,1,bg],[e,1,Cg],[e,3,7776e6],[t,1,yg]];function l(e,n,i){const s=Math.abs(n-e)/i,c=dt((([,,t])=>t)).right(a,s);if(c===a.length)return t.every(Kt(e/yg,n/yg,i));if(0===c)return Ig.every(Math.max(Kt(e,n,i),1));const[l,r]=a[s/a[c-1][2]<a[c][2]/s?c-1:c];return l.every(r)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const s=n&&"function"==typeof n.range?n:l(t,e,n),c=s?s.range(t,+e+1):[];return i?c.reverse():c},l]}_g.every=t=>isFinite(t=Math.floor(t))&&t>0?Qg((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,_g.range;const[jg,$g]=Pg(_g,Kg,Hg,Sg,Ag,pg),[qg,tB]=Pg(Og,zg,Ng,xg,mg,Gg);function eB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function nB(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function iB(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var sB,cB,aB,lB={"-":"",_:" ",0:"0"},rB=/^\s*\d+/,oB=/^%/,gB=/[\\^$*+?|[\]().{}]/g;function BB(t,e,n){var i=t<0?"-":"",s=(i?-t:t)+"",c=s.length;return i+(c<n?new Array(n-c+1).join(e)+s:s)}function dB(t){return t.replace(gB,"\\$&")}function QB(t){return new RegExp("^(?:"+t.map(dB).join("|")+")","i")}function IB(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function FB(t,e,n){var i=rB.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function uB(t,e,n){var i=rB.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function hB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function UB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function bB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function CB(t,e,n){var i=rB.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function yB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function fB(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function GB(t,e,n){var i=rB.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function pB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function mB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function AB(t,e,n){var i=rB.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function xB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function LB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function SB(t,e,n){var i=rB.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function RB(t,e,n){var i=rB.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function NB(t,e,n){var i=rB.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function XB(t,e,n){var i=oB.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function vB(t,e,n){var i=rB.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function ZB(t,e,n){var i=rB.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function EB(t,e){return BB(t.getDate(),e,2)}function VB(t,e){return BB(t.getHours(),e,2)}function wB(t,e){return BB(t.getHours()%12||12,e,2)}function WB(t,e){return BB(1+xg.count(Og(t),t),e,3)}function HB(t,e){return BB(t.getMilliseconds(),e,3)}function DB(t,e){return HB(t,e)+"000"}function YB(t,e){return BB(t.getMonth()+1,e,2)}function kB(t,e){return BB(t.getMinutes(),e,2)}function JB(t,e){return BB(t.getSeconds(),e,2)}function MB(t){var e=t.getDay();return 0===e?7:e}function TB(t,e){return BB(Ng.count(Og(t)-1,t),e,2)}function zB(t){var e=t.getDay();return e>=4||0===e?Eg(t):Eg.ceil(t)}function KB(t,e){return t=zB(t),BB(Eg.count(Og(t),t)+(4===Og(t).getDay()),e,2)}function OB(t){return t.getDay()}function _B(t,e){return BB(Xg.count(Og(t)-1,t),e,2)}function PB(t,e){return BB(t.getFullYear()%100,e,2)}function jB(t,e){return BB((t=zB(t)).getFullYear()%100,e,2)}function $B(t,e){return BB(t.getFullYear()%1e4,e,4)}function qB(t,e){var n=t.getDay();return BB((t=n>=4||0===n?Eg(t):Eg.ceil(t)).getFullYear()%1e4,e,4)}function td(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+BB(e/60|0,"0",2)+BB(e%60,"0",2)}function ed(t,e){return BB(t.getUTCDate(),e,2)}function nd(t,e){return BB(t.getUTCHours(),e,2)}function id(t,e){return BB(t.getUTCHours()%12||12,e,2)}function sd(t,e){return BB(1+Lg.count(_g(t),t),e,3)}function cd(t,e){return BB(t.getUTCMilliseconds(),e,3)}function ad(t,e){return cd(t,e)+"000"}function ld(t,e){return BB(t.getUTCMonth()+1,e,2)}function rd(t,e){return BB(t.getUTCMinutes(),e,2)}function od(t,e){return BB(t.getUTCSeconds(),e,2)}function gd(t){var e=t.getUTCDay();return 0===e?7:e}function Bd(t,e){return BB(Hg.count(_g(t)-1,t),e,2)}function dd(t){var e=t.getUTCDay();return e>=4||0===e?Jg(t):Jg.ceil(t)}function Qd(t,e){return t=dd(t),BB(Jg.count(_g(t),t)+(4===_g(t).getUTCDay()),e,2)}function Id(t){return t.getUTCDay()}function Fd(t,e){return BB(Dg.count(_g(t)-1,t),e,2)}function ud(t,e){return BB(t.getUTCFullYear()%100,e,2)}function hd(t,e){return BB((t=dd(t)).getUTCFullYear()%100,e,2)}function Ud(t,e){return BB(t.getUTCFullYear()%1e4,e,4)}function bd(t,e){var n=t.getUTCDay();return BB((t=n>=4||0===n?Jg(t):Jg.ceil(t)).getUTCFullYear()%1e4,e,4)}function Cd(){return"+0000"}function yd(){return"%"}function fd(t){return+t}function Gd(t){return Math.floor(+t/1e3)}function pd(t){return new Date(t)}function md(t){return t instanceof Date?+t:+new Date(+t)}function Ad(t,e,n,i,s,c,a,l,r,o){var g=Do(),B=g.invert,d=g.domain,Q=o(".%L"),I=o(":%S"),F=o("%I:%M"),u=o("%I %p"),h=o("%a %d"),U=o("%b %d"),b=o("%B"),C=o("%Y");function y(t){return(r(t)<t?Q:l(t)<t?I:a(t)<t?F:c(t)<t?u:i(t)<t?s(t)<t?h:U:n(t)<t?b:C)(t)}return g.invert=function(t){return new Date(B(t))},g.domain=function(t){return arguments.length?d(Array.from(t,md)):d().map(pd)},g.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},g.tickFormat=function(t,e){return null==e?y:o(e)},g.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(To(n,t)):g},g.copy=function(){return Wo(g,Ad(t,e,n,i,s,c,a,l,r,o))},g}function xd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ld(){var t,e,n,i,s,c,a,l=0,r=.5,o=1,g=1,B=Zo,d=!1;function Q(t){return isNaN(t=+t)?a:(t=.5+((t=+c(t))-e)*(g*t<g*e?i:s),B(d?Math.max(0,Math.min(1,t)):t))}function I(t){return function(e){var n,i,s;return arguments.length?([n,i,s]=e,B=Ms(t,[n,i,s]),Q):[B(0),B(.5),B(1)]}}return Q.domain=function(a){return arguments.length?([l,r,o]=a,t=c(l=+l),e=c(r=+r),n=c(o=+o),i=t===e?0:.5/(e-t),s=e===n?0:.5/(n-e),g=e<t?-1:1,Q):[l,r,o]},Q.clamp=function(t){return arguments.length?(d=!!t,Q):d},Q.interpolator=function(t){return arguments.length?(B=t,Q):B},Q.range=I(Ns),Q.rangeRound=I(Xs),Q.unknown=function(t){return arguments.length?(a=t,Q):a},function(a){return c=a,t=a(l),e=a(r),n=a(o),i=t===e?0:.5/(e-t),s=e===n?0:.5/(n-e),g=e<t?-1:1,Q}}function Sd(){var t=ko(Ld()(Zo));return t.copy=function(){return xd(t,Sd())},Ao.apply(t,arguments)}function Rd(){var t=$o(Ld()).domain([.1,1,10]);return t.copy=function(){return xd(t,Rd()).base(t.base())},Ao.apply(t,arguments)}function Nd(){var t=ng(Ld());return t.copy=function(){return xd(t,Nd()).constant(t.constant())},Ao.apply(t,arguments)}function Xd(){var t=lg(Ld());return t.copy=function(){return xd(t,Xd()).exponent(t.exponent())},Ao.apply(t,arguments)}function vd(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}!function(t){sB=function(t){var e=t.dateTime,n=t.date,i=t.time,s=t.periods,c=t.days,a=t.shortDays,l=t.months,r=t.shortMonths,o=QB(s),g=IB(s),B=QB(c),d=IB(c),Q=QB(a),I=IB(a),F=QB(l),u=IB(l),h=QB(r),U=IB(r),b={a:function(t){return a[t.getDay()]},A:function(t){return c[t.getDay()]},b:function(t){return r[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:EB,e:EB,f:DB,g:jB,G:qB,H:VB,I:wB,j:WB,L:HB,m:YB,M:kB,p:function(t){return s[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:fd,s:Gd,S:JB,u:MB,U:TB,V:KB,w:OB,W:_B,x:null,X:null,y:PB,Y:$B,Z:td,"%":yd},C={a:function(t){return a[t.getUTCDay()]},A:function(t){return c[t.getUTCDay()]},b:function(t){return r[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:ed,e:ed,f:ad,g:hd,G:bd,H:nd,I:id,j:sd,L:cd,m:ld,M:rd,p:function(t){return s[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:fd,s:Gd,S:od,u:gd,U:Bd,V:Qd,w:Id,W:Fd,x:null,X:null,y:ud,Y:Ud,Z:Cd,"%":yd},y={a:function(t,e,n){var i=Q.exec(e.slice(n));return i?(t.w=I.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=B.exec(e.slice(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.m=U.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=F.exec(e.slice(n));return i?(t.m=u.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return p(t,e,n,i)},d:mB,e:mB,f:NB,g:yB,G:CB,H:xB,I:xB,j:AB,L:RB,m:pB,M:LB,p:function(t,e,n){var i=o.exec(e.slice(n));return i?(t.p=g.get(i[0].toLowerCase()),n+i[0].length):-1},q:GB,Q:vB,s:ZB,S:SB,u:uB,U:hB,V:UB,w:FB,W:bB,x:function(t,e,i){return p(t,n,e,i)},X:function(t,e,n){return p(t,i,e,n)},y:yB,Y:CB,Z:fB,"%":XB};function f(t,e){return function(n){var i,s,c,a=[],l=-1,r=0,o=t.length;for(n instanceof Date||(n=new Date(+n));++l<o;)37===t.charCodeAt(l)&&(a.push(t.slice(r,l)),null!=(s=lB[i=t.charAt(++l)])?i=t.charAt(++l):s="e"===i?" ":"0",(c=e[i])&&(i=c(n,s)),a.push(i),r=l+1);return a.push(t.slice(r,l)),a.join("")}}function G(t,e){return function(n){var i,s,c=iB(1900,void 0,1);if(p(c,t,n+="",0)!=n.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(e&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(s=(i=nB(iB(c.y,0,1))).getUTCDay(),i=s>4||0===s?Dg.ceil(i):Dg(i),i=Lg.offset(i,7*(c.V-1)),c.y=i.getUTCFullYear(),c.m=i.getUTCMonth(),c.d=i.getUTCDate()+(c.w+6)%7):(s=(i=eB(iB(c.y,0,1))).getDay(),i=s>4||0===s?Xg.ceil(i):Xg(i),i=xg.offset(i,7*(c.V-1)),c.y=i.getFullYear(),c.m=i.getMonth(),c.d=i.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),s="Z"in c?nB(iB(c.y,0,1)).getUTCDay():eB(iB(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(s+5)%7:c.w+7*c.U-(s+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,nB(c)):eB(c)}}function p(t,e,n,i){for(var s,c,a=0,l=e.length,r=n.length;a<l;){if(i>=r)return-1;if(37===(s=e.charCodeAt(a++))){if(s=e.charAt(a++),!(c=y[s in lB?e.charAt(a++):s])||(i=c(t,n,i))<0)return-1}else if(s!=n.charCodeAt(i++))return-1}return i}return b.x=f(n,b),b.X=f(i,b),b.c=f(e,b),C.x=f(n,C),C.X=f(i,C),C.c=f(e,C),{format:function(t){var e=f(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=G(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=f(t+="",C);return e.toString=function(){return t},e},utcParse:function(t){var e=G(t+="",!0);return e.toString=function(){return t},e}}}(t),cB=sB.format,sB.parse,aB=sB.utcFormat,sB.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Zd=vd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ed=vd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Vd=vd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),wd=vd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Wd=vd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Hd=vd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Dd=vd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Yd=vd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),kd=vd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Jd=vd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Md=t=>fs(t[t.length-1]),Td=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(vd),zd=Md(Td),Kd=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(vd),Od=Md(Kd),_d=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(vd),Pd=Md(_d),jd=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(vd),$d=Md(jd),qd=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(vd),tQ=Md(qd),eQ=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(vd),nQ=Md(eQ),iQ=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(vd),sQ=Md(iQ),cQ=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(vd),aQ=Md(cQ),lQ=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(vd),rQ=Md(lQ),oQ=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(vd),gQ=Md(oQ),BQ=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(vd),dQ=Md(BQ),QQ=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(vd),IQ=Md(QQ),FQ=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(vd),uQ=Md(FQ),hQ=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(vd),UQ=Md(hQ),bQ=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(vd),CQ=Md(bQ),yQ=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(vd),fQ=Md(yQ),GQ=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(vd),pQ=Md(GQ),mQ=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(vd),AQ=Md(mQ),xQ=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(vd),LQ=Md(xQ),SQ=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(vd),RQ=Md(SQ),NQ=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(vd),XQ=Md(NQ),vQ=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(vd),ZQ=Md(vQ),EQ=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(vd),VQ=Md(EQ),wQ=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(vd),WQ=Md(wQ),HQ=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(vd),DQ=Md(HQ),YQ=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(vd),kQ=Md(YQ),JQ=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(vd),MQ=Md(JQ);function TQ(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var zQ=Js(Qs(300,.5,0),Qs(-240,.5,1)),KQ=Js(Qs(-100,.75,.35),Qs(80,1.5,.8)),OQ=Js(Qs(260,.75,.35),Qs(80,1.5,.8)),_Q=Qs();function PQ(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return _Q.h=360*t-100,_Q.s=1.5-1.5*e,_Q.l=.8-.9*e,_Q+""}var jQ=Ai(),$Q=Math.PI/3,qQ=2*Math.PI/3;function tI(t){var e;return t=(.5-t)*Math.PI,jQ.r=255*(e=Math.sin(t))*e,jQ.g=255*(e=Math.sin(t+$Q))*e,jQ.b=255*(e=Math.sin(t+qQ))*e,jQ+""}function eI(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function nI(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var iI=nI(vd("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),sI=nI(vd("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),cI=nI(vd("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),aI=nI(vd("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function lI(t){return function(){return t}}const rI=Math.cos,oI=Math.min,gI=Math.sin,BI=Math.sqrt,dI=Math.PI,QI=2*dI;function II(t){this._context=t}function FI(t){return new II(t)}function uI(t){return t[0]}function hI(t){return t[1]}function UI(t,e){var n=lI(!0),i=null,s=FI,c=null,a=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new ea(e)}(l);function l(l){var r,o,g,B=(l=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(l)).length,d=!1;for(null==i&&(c=s(g=a())),r=0;r<=B;++r)!(r<B&&n(o=l[r],r,l))===d&&((d=!d)?c.lineStart():c.lineEnd()),d&&c.point(+t(o,r,l),+e(o,r,l));if(g)return c=null,g+""||null}return t="function"==typeof t?t:void 0===t?uI:lI(t),e="function"==typeof e?e:void 0===e?hI:lI(e),l.x=function(e){return arguments.length?(t="function"==typeof e?e:lI(+e),l):t},l.y=function(t){return arguments.length?(e="function"==typeof t?t:lI(+t),l):e},l.defined=function(t){return arguments.length?(n="function"==typeof t?t:lI(!!t),l):n},l.curve=function(t){return arguments.length?(s=t,null!=i&&(c=s(i)),l):s},l.context=function(t){return arguments.length?(null==t?i=c=null:c=s(i=t),l):i},l}II.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};class bI{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}const CI=BI(3);var yI={draw(t,e){const n=.59436*BI(e+oI(e/28,.75)),i=n/2,s=i*CI;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-s,-i),t.lineTo(s,i),t.moveTo(-s,i),t.lineTo(s,-i)}},fI={draw(t,e){const n=BI(e/dI);t.moveTo(n,0),t.arc(0,0,n,0,QI)}},GI={draw(t,e){const n=BI(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const pI=BI(1/3),mI=2*pI;var AI={draw(t,e){const n=BI(e/mI),i=n*pI;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},xI={draw(t,e){const n=.62625*BI(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},LI={draw(t,e){const n=.87559*BI(e-oI(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},SI={draw(t,e){const n=BI(e),i=-n/2;t.rect(i,i,n,n)}},RI={draw(t,e){const n=.4431*BI(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const NI=gI(dI/10)/gI(7*dI/10),XI=gI(QI/10)*NI,vI=-rI(QI/10)*NI;var ZI={draw(t,e){const n=BI(.8908130915292852*e),i=XI*n,s=vI*n;t.moveTo(0,-n),t.lineTo(i,s);for(let e=1;e<5;++e){const c=QI*e/5,a=rI(c),l=gI(c);t.lineTo(l*n,-a*n),t.lineTo(a*i-l*s,l*i+a*s)}t.closePath()}};const EI=BI(3);var VI={draw(t,e){const n=-BI(e/(3*EI));t.moveTo(0,2*n),t.lineTo(-EI*n,-n),t.lineTo(EI*n,-n),t.closePath()}};const wI=BI(3);var WI={draw(t,e){const n=.6824*BI(e),i=n/2,s=n*wI/2;t.moveTo(0,-n),t.lineTo(s,i),t.lineTo(-s,i),t.closePath()}};const HI=-.5,DI=BI(3)/2,YI=1/BI(12),kI=3*(YI/2+1);var JI={draw(t,e){const n=BI(e/kI),i=n/2,s=n*YI,c=i,a=n*YI+n,l=-c,r=a;t.moveTo(i,s),t.lineTo(c,a),t.lineTo(l,r),t.lineTo(HI*i-DI*s,DI*i+HI*s),t.lineTo(HI*c-DI*a,DI*c+HI*a),t.lineTo(HI*l-DI*r,DI*l+HI*r),t.lineTo(HI*i+DI*s,HI*s-DI*i),t.lineTo(HI*c+DI*a,HI*a-DI*c),t.lineTo(HI*l+DI*r,HI*r-DI*l),t.closePath()}},MI={draw(t,e){const n=.6189*BI(e-oI(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const TI=[fI,GI,AI,SI,ZI,VI,JI],zI=[fI,LI,MI,WI,yI,RI,xI];function KI(){}function OI(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function _I(t){this._context=t}function PI(t){this._context=t}function jI(t){this._context=t}function $I(t,e){this._basis=new _I(t),this._beta=e}_I.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:OI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:OI(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},PI.prototype={areaStart:KI,areaEnd:KI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:OI(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},jI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:OI(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},$I.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,s=t[0],c=e[0],a=t[n]-s,l=e[n]-c,r=-1;++r<=n;)i=r/n,this._basis.point(this._beta*t[r]+(1-this._beta)*(s+i*a),this._beta*e[r]+(1-this._beta)*(c+i*l));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var qI=function t(e){function n(t){return 1===e?new _I(t):new $I(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function tF(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function eF(t,e){this._context=t,this._k=(1-e)/6}eF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tF(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:tF(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var nF=function t(e){function n(t){return new eF(t,e)}return n.tension=function(e){return t(+e)},n}(0);function iF(t,e){this._context=t,this._k=(1-e)/6}iF.prototype={areaStart:KI,areaEnd:KI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:tF(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var sF=function t(e){function n(t){return new iF(t,e)}return n.tension=function(e){return t(+e)},n}(0);function cF(t,e){this._context=t,this._k=(1-e)/6}cF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tF(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var aF=function t(e){function n(t){return new cF(t,e)}return n.tension=function(e){return t(+e)},n}(0);function lF(t,e,n){var i=t._x1,s=t._y1,c=t._x2,a=t._y2;if(t._l01_a>1e-12){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,r=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/r,s=(s*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/r}if(t._l23_a>1e-12){var o=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,g=3*t._l23_a*(t._l23_a+t._l12_a);c=(c*o+t._x1*t._l23_2a-e*t._l12_2a)/g,a=(a*o+t._y1*t._l23_2a-n*t._l12_2a)/g}t._context.bezierCurveTo(i,s,c,a,t._x2,t._y2)}function rF(t,e){this._context=t,this._alpha=e}rF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:lF(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var oF=function t(e){function n(t){return e?new rF(t,e):new eF(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function gF(t,e){this._context=t,this._alpha=e}gF.prototype={areaStart:KI,areaEnd:KI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:lF(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var BF=function t(e){function n(t){return e?new gF(t,e):new iF(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function dF(t,e){this._context=t,this._alpha=e}dF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:lF(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var QF=function t(e){function n(t){return e?new dF(t,e):new cF(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function IF(t){this._context=t}function FF(t){return t<0?-1:1}function uF(t,e,n){var i=t._x1-t._x0,s=e-t._x1,c=(t._y1-t._y0)/(i||s<0&&-0),a=(n-t._y1)/(s||i<0&&-0),l=(c*s+a*i)/(i+s);return(FF(c)+FF(a))*Math.min(Math.abs(c),Math.abs(a),.5*Math.abs(l))||0}function hF(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function UF(t,e,n){var i=t._x0,s=t._y0,c=t._x1,a=t._y1,l=(c-i)/3;t._context.bezierCurveTo(i+l,s+l*e,c-l,a-l*n,c,a)}function bF(t){this._context=t}function CF(t){this._context=new yF(t)}function yF(t){this._context=t}function fF(t){this._context=t}function GF(t){var e,n,i=t.length-1,s=new Array(i),c=new Array(i),a=new Array(i);for(s[0]=0,c[0]=2,a[0]=t[0]+2*t[1],e=1;e<i-1;++e)s[e]=1,c[e]=4,a[e]=4*t[e]+2*t[e+1];for(s[i-1]=2,c[i-1]=7,a[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=s[e]/c[e-1],c[e]-=n,a[e]-=n*a[e-1];for(s[i-1]=a[i-1]/c[i-1],e=i-2;e>=0;--e)s[e]=(a[e]-s[e+1])/c[e];for(c[i-1]=(t[i]+s[i-1])/2,e=0;e<i-1;++e)c[e]=2*t[e+1]-s[e+1];return[s,c]}function pF(t,e){this._context=t,this._t=e}function mF(t,e,n){this.k=t,this.x=e,this.y=n}IF.prototype={areaStart:KI,areaEnd:KI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},bF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:UF(this,this._t0,hF(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,UF(this,hF(this,n=uF(this,t,e)),n);break;default:UF(this,this._t0,n=uF(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(CF.prototype=Object.create(bF.prototype)).point=function(t,e){bF.prototype.point.call(this,e,t)},yF.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,s,c){this._context.bezierCurveTo(e,t,i,n,c,s)}},fF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=GF(t),s=GF(e),c=0,a=1;a<n;++c,++a)this._context.bezierCurveTo(i[0][c],s[0][c],i[1][c],s[1][c],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},pF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},mF.prototype={constructor:mF,scale:function(t){return 1===t?this:new mF(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new mF(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},mF.prototype;class AF extends rt{getComputedStyleValue(t){return getComputedStyle(this).getPropertyValue(t).trim()}firstUpdated(t){super.firstUpdated(t),Tn(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",(t=>{Tn(t.currentTarget.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)})).on("keydown.keyboard",(t=>{Tn(t.currentTarget.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)}))}static get greys(){const t="#999999",e={white:"#ffffff"};return e.light75=Cs(t,"#ffffff")(.75),e.light50=Cs(t,"#ffffff")(.5),e.light25=Cs(t,"#ffffff")(.25),e.grey=t,e.dark25=Cs(t,"#000000")(.25),e.dark50=Cs(t,"#000000")(.5),e.dark75=Cs(t,"#000000")(.75),e.black="#000000",e}static get shadows(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}static cssBoxShadow(t,e=!1,n=!1){const i=this.shadows.opacityUmbra+this.shadows.opacityBoost,s=this.shadows.opacityPenumbra+this.shadows.opacityBoost,c=this.shadows.opacityAmbient+this.shadows.opacityBoost,a=n?`rgba(${this.shadows.inverseBaselineColorString}, ${i})`:`rgba(${this.shadows.baselineColorString}, ${i})`,l=n?`rgba(${this.shadows.inverseBaselineColorString}, ${s})`:`rgba(${this.shadows.baselineColorString}, ${s})`,r=n?`rgba(${this.shadows.inverseBaselineColorString}, ${c})`:`rgba(${this.shadows.baselineColorString}, ${c})`,o=this.shadows.mapUmbra[t],g=this.shadows.mapPenumbra[t],B=this.shadows.mapAmbient[t];return`${e?`${-o.y}px ${o.y/2}px ${o.b}px ${o.s}px`:`${o.y/2}px ${o.y}px ${o.b}px ${o.s}px`} ${a}, ${e?`${-g.y}px ${g.y/2}px ${g.b}px ${g.s}px`:`${g.y/2}px ${g.y}px ${g.b}px ${g.s}px`} ${l}, ${e?`${-B.y}px ${B.y/2}px ${B.b}px ${B.s}px`:`${B.y/2}px ${B.y}px ${B.b}px ${B.s}px`} ${r}`}static get svgDefs(){const t=AF.shadows;return`\n      <defs>\n        ${t.elevations.map((e=>`\n        <filter id=shadow-${e} filterUnits="userSpaceOnUse" x="-100%" y="-100%" width="200%" height="200%">\n          <feComponentTransfer in="SourceAlpha" result="solid">\n            <feFuncA type="table" tableValues="0 1 1"/>\n          </feComponentTransfer>\n          <feOffset in="solid" result="offU" dx=${t.mapUmbra[e].y/2} dy=${t.mapUmbra[e].y} />\n          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[e].y/2} dy=${t.mapPenumbra[e].y} />\n          <feOffset in="solid" result="offA" dx=${t.mapAmbient[e].y/2} dy=${t.mapAmbient[e].y} />\n          ${0===t.mapUmbra[e].s?"":`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[e].s)} />`}\n          ${0===t.mapPenumbra[e].s?"":`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[e].s)} />`}\n          ${0===t.mapAmbient[e].s?"":`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[e].s)} />`}\n          <feGaussianBlur in=${0===t.mapUmbra[e].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[e].b/2} />\n          <feGaussianBlur in=${0===t.mapPenumbra[e].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[e].b/2} />\n          <feGaussianBlur in=${0===t.mapAmbient[e].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[e].b/2} />\n          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />\n          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />\n          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />\n          <feComposite in="opU" in2="blurU" result="shU" operator="in" />\n          <feComposite in="opP" in2="blurP" result="shP" operator="in" />\n          <feComposite in="opA" in2="blurA" result="shA" operator="in" />\n          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />\n          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />\n          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />\n          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />\n          <feMerge>\n            <feMergeNode in="finalU" />\n            <feMergeNode in="finalP" />\n            <feMergeNode in="finalA" />\n            <feMergeNode in="SourceGraphic" />\n          </feMerge>\n        </filter>`))}\n      </defs>\n    `}static get svgFilters(){const t=AF.shadows,e=t.elevations.map((e=>T`
        <filter id=${`shadow-${e}`} x="-250%" y="-250%" width="600%" height="600%">
          <feComponentTransfer in="SourceAlpha" result="solid">
            <feFuncA type="table" tableValues="0 1 1"/>
          </feComponentTransfer>
          <feOffset in="solid" result="offU" dx=${t.mapUmbra[e].y/2} dy=${t.mapUmbra[e].y} />
          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[e].y/2} dy=${t.mapPenumbra[e].y} />
          <feOffset in="solid" result="offA" dx=${t.mapAmbient[e].y/2} dy=${t.mapAmbient[e].y} />
          ${0===t.mapUmbra[e].s?T``:T`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[e].s)} />`}
          ${0===t.mapPenumbra[e].s?T``:T`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[e].s)} />`}
          ${0===t.mapAmbient[e].s?T``:T`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[e].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[e].s)} />`}
          <feGaussianBlur in=${0===t.mapUmbra[e].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[e].b/2} />
          <feGaussianBlur in=${0===t.mapPenumbra[e].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[e].b/2} />
          <feGaussianBlur in=${0===t.mapAmbient[e].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[e].b/2} />
          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />
          <feComposite in="opU" in2="blurU" result="shU" operator="in" />
          <feComposite in="opP" in2="blurP" result="shP" operator="in" />
          <feComposite in="opA" in2="blurA" result="shA" operator="in" />
          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />
          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />
          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />
          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />
          <feMerge>
            <feMergeNode in="finalU" />
            <feMergeNode in="finalP" />
            <feMergeNode in="finalA" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>`));return T`
      <svg class="defs">
        <defs>
          ${e}
        </defs>
      </svg>
    `}static get styles(){return l`
      :host {
        ---shadow-0: var(--shadow-0, ${a(this.cssBoxShadow(0))});
        ---shadow-2: var(--shadow-2, ${a(this.cssBoxShadow(2))});
        ---shadow-4: var(--shadow-4, ${a(this.cssBoxShadow(4))});
        ---shadow-8: var(--shadow-8, ${a(this.cssBoxShadow(8))});

        ---color-background: var(--color-background, ${a(this.greys.white)});
        ---color-border: var(--color-border, ${a(this.greys.light75)});
        ---color-text: var(--color-text, ${a(this.greys.dark75)});
        ---color-text-inverse: var(--color-text-inverse, ${a(this.greys.white)});
        ---color-link: var(--color-link, ${a(this.greys.dark25)});
        ---color-element-background: var(--color-element-background, ${a(this.greys.light75)});
        ---color-element-disabled: var(--color-element-disabled, ${a(this.greys.light50)});
        ---color-element-enabled: var(--color-element-enabled, ${a(this.greys.dark25)});
        ---color-element-selected: var(--color-element-selected, ${a(this.greys.grey)});
        ---color-element-border: var(--color-element-border, ${a(this.greys.dark50)});
        ---color-element-emphasis: var(--color-element-emphasis, ${a(this.greys.dark75)});

        ---font-family-base: var(--font-family-base, "Source Sans", sans-serif);
        ---font-family-math: var(--font-family-math, "Source Serif", serif);

        ---border: var(--border, 1px solid var(---color-border));
        ---border-radius: var(--border-radius, 0.25rem);
        ---transition-duration: var(--transition-duration, 500ms);

        font-family: var(---font-family-base);
      }

      :host,
      :host *,
      :host *::before,
      :host *::after {
        box-sizing: border-box;
      }

      .math-greek {
        font-family: var(---font-family-math);
        font-style: normal;
      }

      .math-num {
        font-family: var(---font-family-base);
        font-style: normal;
      }

      .math-var {
        font-family: var(---font-family-math);
        font-style: italic;
      }

      .defs {
        display: block;

        width: 0;
        height: 0;
      }
    `}}customElements.define("decidables-button",class extends AF{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,l`
        :host {
          margin: 0.25rem;
        }

        button {
          width: 100%;
          height: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);

          border: 0;
          border-radius: var(---border-radius);
          outline: none;
        }

        button:disabled {
          background-color: var(--decidables-button-background-color, var(---color-element-disabled));
          outline: none;
          box-shadow: none;
        }

        button:enabled {
          cursor: pointer;

          background-color: var(--decidables-button-background-color, var(---color-element-enabled));
          outline: none;
          box-shadow: var(---shadow-2);
        }

        button:enabled:hover {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        button:enabled:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(.keyboard) button:enabled:focus {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) button:enabled:focus:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return M`
      <button ?disabled=${this.disabled}>
        <slot></slot>
      </button>
    `}});
/**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const xF=t=>t??K;customElements.define("decidables-slider",class extends AF{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}changed(t){this.value=t.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,l`
        :host {
          ---shadow-2-rotate: var(--shadow-2-rotate, ${a(this.cssBoxShadow(2,!0,!1))});
          ---shadow-4-rotate: var(--shadow-4-rotate, ${a(this.cssBoxShadow(4,!0,!1))});
          ---shadow-8-rotate: var(--shadow-8-rotate, ${a(this.cssBoxShadow(8,!0,!1))});

          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        label {
          margin: 0.25rem 0.25rem 0;
        }

        .range {
          display: inline-block;

          width: 3.5rem;
          height: 4.75rem;
          margin: 0 0.25rem 0.25rem;
        }

        decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;

          margin: 0 0.25rem 0.25rem;
        }

        /* Adapted from http://danielstern.ca/range.css/#/ */
        /* Overall */
        input[type=range] {
          width: 4.75rem;
          height: 3.5rem;
          padding: 0;
          margin: 0;

          background-color: unset;

          transform: rotate(-90deg);
          transform-origin: 2.375rem 2.375rem;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:enabled {
          cursor: ns-resize;
        }

        input[type=range]:focus {
          outline: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-tooltip {
          display: none;
        }

        /* Track */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-runnable-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-track {
          width: 100%;
          height: 4px;

          background: var(---color-element-disabled);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-track {
          width: 100%;
          height: 4px;

          color: transparent;

          background: transparent;
          border-color: transparent;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-lower {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-upper {
          background: #cccccc;
          /* background: var(---color-element-disabled); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-lower {
          background: var(---color-element-disabled);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-upper {
          background: var(---color-element-disabled);
        }

        /* Thumb */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-thumb {
          width: 10px;
          height: 20px;
          margin-top: -8px;

          border: 0;
          border-radius: 4px;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:disabled::-webkit-slider-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=range]:enabled::-webkit-slider-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        input[type=range]:enabled:hover::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        input[type=range]:enabled:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-thumb {
          width: 10px;
          height: 20px;

          border: 0;
          border-radius: 4px;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-moz-range-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-moz-range-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-thumb {
          width: 10px;
          height: 20px;
          margin-top: 0;

          background: #999999;
          /* background: var(---color-element-enabled); */
          border: 0;
          border-radius: 4px;
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-ms-thumb {
          background: var(---color-element-disabled);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-ms-thumb {
          background: var(---color-element-enabled);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }
      `]}render(){return M`
      <label for="slider">
        <slot></slot>
      </label>
      <div class="range">
        <input type="range" id="slider" min=${xF(this.min)} max=${xF(this.max)} step=${xF(this.step)} .value=${this.value} @change=${this.changed.bind(this)} @input=${this.inputted.bind(this)}>
      </div>
      <decidables-spinner min=${xF(this.min)} max=${xF(this.max)} step=${xF(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}></decidables-spinner>
    `}});customElements.define("decidables-spinner",class extends AF{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,l`
        :host {
          ---decidables-spinner-font-size: var(--decidables-spinner-font-size, 1.125rem);
          ---decidables-spinner-input-width: var(--decidables-spinner-input-width, 4rem);
          ---decidables-spinner-prefix: var(--decidables-spinner-prefix, "");

          ---decidables-spinner-postfix: var(--decidables-spinner-postfix, "");
          ---decidables-spinner-postfix-padding: var(--decidables-spinner-postfix-padding, 0);

          display: block;
        }

        label {
          position: relative;
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0;

          font-size: 0.75rem;
        }

        label::before {
          position: absolute;
          bottom: 1px;
          left: calc(50% - var(---decidables-spinner-input-width) / 2 + 0.25rem);

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-prefix);
        }

        label::after {
          position: absolute;
          right: 0.25rem;
          bottom: 1px;

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-postfix);
        }

        input[type=number] {
          width: var(---decidables-spinner-input-width);
          padding-right: var(---decidables-spinner-postfix-padding);

          font-family: var(---font-family-base);
          font-size: var(---decidables-spinner-font-size);
          color: inherit;
          text-align: right;

          background: none;
          border: 0;
          border-radius: 0;
          outline: none;
          box-shadow: var(---shadow-2);

          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }

        input[type=number]:hover {
          box-shadow: var(---shadow-4);
        }

        input[type=number]:focus,
        input[type=number]:active {
          box-shadow: var(---shadow-8);
        }

        input[type=number]:disabled {
          color: var(---color-text);

          border: 0;
          box-shadow: none;

          /* HACK: Use correct text color in Safari */
          -webkit-opacity: 1;
          /* HACK: Hide spinners in disabled input for Firefox and Safari */
          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */
          /* HACK: Use correct text color in Safari */
          -webkit-text-fill-color: var(---color-text);
        }

        /* HACK: Hide spinners in disabled input for Firefox and Safari */
        input[type=number]:disabled::-webkit-outer-spin-button,
        input[type=number]:disabled::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }
      `]}render(){return M`
      <label>
        <slot></slot>
        <input ?disabled=${this.disabled} type="number" min=${xF(this.min)} max=${xF(this.max)} step=${xF(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}>
      </label>
    `}});customElements.define("decidables-switch",class extends AF{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}static get styles(){return[super.styles,l`
        :host {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */
        input[type=checkbox] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=checkbox] + label {
          order: 1;

          margin: 0 0.25rem 0.25rem;

          font-weight: 400;
        }

        input[type=checkbox] + label + label {
          position: relative;

          min-width: 24px;
          padding: 0 0 36px;
          margin: 0.25rem 0.25rem 0;

          font-weight: 400;

          outline: none;
        }

        input[type=checkbox] + label + label::before,
        input[type=checkbox] + label + label::after {
          position: absolute;

          left: 50%;

          margin: 0;

          content: "";

          outline: 0;

          transition: all var(---transition-duration) ease;
          transform: translate(-50%, 0);
        }

        input[type=checkbox] + label + label::before {
          bottom: 1px;

          width: 8px;
          height: 34px;

          background-color: var(---color-element-disabled);
          border-radius: 4px;
        }

        input[type=checkbox] + label + label::after {
          bottom: 0;

          width: 18px;
          height: 18px;

          background-color: var(---color-element-enabled);
          border-radius: 50%;
          box-shadow: var(---shadow-2);
        }

        input[type=checkbox]:checked + label + label::after {
          transform: translate(-50%, -100%);
        }

        input[type=checkbox]:disabled + label + label::after {
          background-color: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=checkbox]:enabled + label,
        input[type=checkbox]:enabled + label + label {
          cursor: pointer;
        }

        input[type=checkbox]:enabled + label:hover + label::after,
        input[type=checkbox]:enabled + label + label:hover::after {
          box-shadow: var(---shadow-4);
        }

        input[type=checkbox]:enabled + label:active + label::after,
        input[type=checkbox]:enabled + label + label:active::after {
          box-shadow: var(---shadow-8);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {
          box-shadow: var(---shadow-4);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,
        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {
          box-shadow: var(---shadow-8);
        }
      `]}render(){return M`
      <input type="checkbox" id="switch" ?checked=${this.checked} ?disabled=${this.disabled} @change=${this.changed.bind(this)}>
      <label for="switch">
        <slot name="off-label"></slot>
      </label>
      <label for="switch">
        <slot></slot>
      </label>
    `}});customElements.define("decidables-toggle",class extends AF{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,l`
        fieldset {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;

          margin: 0.25rem;

          border: 0;
        }

        legend {
          text-align: center;
        }
      `]}render(){return M`
      <fieldset ?disabled=${this.disabled}>
        <legend><slot name="label"></slot></legend>
        <slot></slot>
      </fieldset>
    `}});customElements.define("decidables-toggle-option",class extends AF{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1,this.name=void 0,this.value=void 0}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}static get styles(){return[super.styles,l`
        :host {
          display: flex;
        }

        input[type=radio] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0 0 0 0);

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=radio] + label {
          width: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);
          text-align: center;

          cursor: pointer;

          background-color: var(---color-element-enabled);
          border: 0;
          border-radius: 0;
          outline: none;

          box-shadow: var(---shadow-2);
        }

        input[type=radio]:checked + label {
          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-2);
        }

        input[type=radio] + label:hover {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        input[type=radio] + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(:first-of-type) input[type=radio] + label {
          border-top-left-radius: 0.25rem;
          border-top-right-radius: 0.25rem;
        }

        :host(:last-of-type) input[type=radio] + label {
          border-bottom-right-radius: 0.25rem;
          border-bottom-left-radius: 0.25rem;
        }

        :host(.keyboard) input[type=radio]:focus + label {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus:checked + label {
          z-index: 1;

          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return M`
      <input type="radio" id="toggle-option" name=${this.name} value=${this.value} .checked=${this.checked} @change=${this.changed.bind(this)}>
      <label for="toggle-option">
        <slot></slot>
      </label>
    `}});class LF extends AF{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return{a:Dd[0],d:Dd[1],k:Dd[2],v:Dd[3],sooner:Dd[5],later:Dd[7],larger:"#4545d0",smaller:"#f032e6",equal:"#10dbc9",nr:"#cccccc"}}static get lights(){return Object.keys(LF.colors).reduce(((t,e)=>(t[e]=Cs(LF.colors[e],"#ffffff")(.5),t)),{})}static get darks(){return Object.keys(LF.colors).reduce(((t,e)=>(t[e]=Cs(LF.colors[e],"#000000")(.5),t)),{})}static get styles(){return[super.styles,l`
        :host {
          ---color-a: var(--color-a, ${a(this.colors.a)});
          ---color-d: var(--color-d, ${a(this.colors.d)});
          ---color-k: var(--color-k, ${a(this.colors.k)});
          ---color-v: var(--color-v, ${a(this.colors.v)});
          ---color-sooner: var(--color-sooner, ${a(this.colors.sooner)});
          ---color-later: var(--color-later, ${a(this.colors.later)});
          ---color-larger: var(--color-larger, ${a(this.colors.larger)});
          ---color-smaller: var(--color-smaller, ${a(this.colors.smaller)});
          ---color-equal: var(--color-equal, ${a(this.colors.equal)});
          ---color-nr: var(--color-nr, ${a(this.colors.nr)});

          ---color-a-light: var(--color-a-light, ${a(this.lights.a)});
          ---color-d-light: var(--color-d-light, ${a(this.lights.d)});
          ---color-k-light: var(--color-k-light, ${a(this.lights.k)});
          ---color-v-light: var(--color-v-light, ${a(this.lights.v)});
          ---color-sooner-light: var(--color-sooner-light, ${a(this.lights.sooner)});
          ---color-later-light: var(--color-later-light, ${a(this.lights.later)});
          ---color-larger-light: var(--color-larger-light, ${a(this.lights.larger)});
          ---color-smaller-light: var(--color-smaller-light, ${a(this.lights.smaller)});
          ---color-equal-light: var(--color-equal-light, ${a(this.lights.equal)});
          ---color-nr-light: var(--color-nr-light, ${a(this.lights.nr)});

          ---color-a-dark: var(--color-a-dark, ${a(this.darks.a)});
          ---color-d-dark: var(--color-d-dark, ${a(this.darks.d)});
          ---color-k-dark: var(--color-k-dark, ${a(this.darks.k)});
          ---color-v-dark: var(--color-v-dark, ${a(this.darks.v)});
          ---color-sooner-dark: var(--color-sooner-dark, ${a(this.darks.sooner)});
          ---color-later-dark: var(--color-later-dark, ${a(this.darks.later)});
          ---color-larger-dark: var(--color-larger-dark, ${a(this.darks.larger)});
          ---color-smaller-dark: var(--color-smaller-dark, ${a(this.darks.smaller)});
          ---color-equal-dark: var(--color-equal-dark, ${a(this.darks.equal)});
          ---color-nr-dark: var(--color-nr-dark, ${a(this.darks.nr)});
        }
      `]}}class SF extends LF{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.duration=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("discountable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("discountable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("discountable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("discountable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("discountable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,l`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `]}render(){return M`
      <div class="holder">
        ${this.trials?M`<decidables-slider min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:M``}
        ${this.duration?M`<decidables-slider min="10" max="4000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:M``}
        ${this.run||this.pause||this.reset?M`
            <div class="buttons">
              ${this.run?M`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:M``}
              ${this.pause?M`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:M``}
              ${this.reset?M`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:M``}
            </div>
            `:M``}
      </div>`}}customElements.define("discountable-control",SF);class RF extends LF{static get properties(){return{feedback:{attribute:"feedback",type:Boolean,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.trial=!1,this.feedback=!1,this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.as=0,this.ds=0,this.al=0,this.dl=0,this.responses=["first","second","nr"],this.response=void 0}start(t,e,n,i,s){this.state="waiting",this.as=t,this.ds=e,this.al=n,this.dl=i,this.trialCount=s,this.response=void 0}stop(){this.state="feedback",void 0===this.response&&(this.response="nr")}first(){this.responded("first")}second(){this.responded("second")}responded(t){this.state="feedback",this.response=t,this.dispatchEvent(new CustomEvent("discountable-response",{detail:{trial:this.trialCount,as:this.as,ds:this.ds,al:this.al,dl:this.dl,response:this.response},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.response=void 0}static get styles(){return[super.styles,l`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Trial messages */
        .trials {
          display: flex;

          flex-direction: column;

          justify-content: center;
        }

        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          width: 5.25rem;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="first"] {
          --decidables-button-background-color: var(---color-sooner);
        }

        .selected[disabled][name="second"] {
          --decidables-button-background-color: var(---color-later);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: row;

          justify-content: center;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 5.25rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        .feedback.first {
          background-color: var(---color-sooner-light);
        }

        .feedback.second {
          background-color: var(---color-later-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }
      `]}render(){return M`
      <div class="holder">
        ${this.trial?M`
            <div class="trials">
              <div class="trial">
                <span class="label">Trial: </span
                ><span class="count">${this.trialCount}</span
                ><span class="of"> of </span
                ><span class="total">${this.trialTotal}</span>
              </div>
            </div>`:M``}
        <div class="responses">
          <decidables-button 
            name="first"
            class="response ${"feedback"===this.state&&"first"===this.response?"selected":"waiting"===this.state?"waiting":""}"
            ?disabled=${"waiting"!==this.state||!0!==this.interactive}
            @click=${this.first.bind(this)}
          >First</decidables-button>
          <decidables-button 
            name="second"
            class="response ${"feedback"===this.state&&"second"===this.response?"selected":"waiting"===this.state?"waiting":""}"
            ?disabled=${"waiting"!==this.state||!0!==this.interactive}
            @click=${this.second.bind(this)}
          >Second</decidables-button>
        </div>
        ${this.feedback?M`
            <div class="feedbacks">
              <div class="feedback
                ${"feedback"===this.state&&this.feedback?this.response:""}">
                ${"feedback"===this.state&&this.feedback?"first"===this.response?M`<span class="response">First</span>`:"second"===this.response?M`<span class="response">Second</span>`:M`<span class="response">No<br>Response</span>`:""}
              </div>
            </div>`:M``}
      </div>`}}customElements.define("discountable-response",RF);
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const NF=2;let XF=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};
/**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const vF=(t,e)=>{const n=t._$AN;if(void 0===n)return!1;for(const t of n)t._$AO?.(e,!1),vF(t,e);return!0},ZF=t=>{let e,n;do{if(void 0===(e=t._$AM))break;n=e._$AN,n.delete(t),t=e}while(0===n?.size)},EF=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(void 0===n)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),WF(e)}};
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */function VF(t){void 0!==this._$AN?(ZF(this),this._$AM=t,EF(this)):this._$AM=t}function wF(t,e=!1,n=0){const i=this._$AH,s=this._$AN;if(void 0!==s&&0!==s.size)if(e)if(Array.isArray(i))for(let t=n;t<i.length;t++)vF(i[t],!1),ZF(i[t]);else null!=i&&(vF(i,!1),ZF(i));else vF(this,t)}const WF=t=>{t.type==NF&&(t._$AP??=wF,t._$AQ??=VF)};class HF extends XF{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,n){super._$AT(t,e,n),EF(this),this.isConnected=t._$AU}_$AO(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(vF(this,t),ZF(this))}setValue(t){if((t=>void 0===t.strings)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}const DF=new WeakMap;let YF=0;const kF=new Map,JF=new WeakSet,MF=()=>new Promise((t=>requestAnimationFrame(t))),TF=[{opacity:0},{opacity:1}],zF=(t,e)=>{const n=t-e;return 0===n?void 0:n},KF=(t,e)=>{const n=t/e;return 1===n?void 0:n},OF={left:(t,e)=>{const n=zF(t,e);return{value:n,transform:null==n||isNaN(n)?void 0:`translateX(${n}px)`}},top:(t,e)=>{const n=zF(t,e);return{value:n,transform:null==n||isNaN(n)?void 0:`translateY(${n}px)`}},width:(t,e)=>{let n;0===e&&(e=1,n={width:"1px"});const i=KF(t,e);return{value:i,overrideFrom:n,transform:null==i||isNaN(i)?void 0:`scaleX(${i})`}},height:(t,e)=>{let n;0===e&&(e=1,n={height:"1px"});const i=KF(t,e);return{value:i,overrideFrom:n,transform:null==i||isNaN(i)?void 0:`scaleY(${i})`}}},_F={duration:333,easing:"ease-in-out"},PF=["left","top","width","height","opacity","color","background"],jF=new WeakMap;const $F=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends HF{constructor(t){if(super(t),this.t=null,this.i=null,this.o=!0,this.shouldLog=!1,t.type===NF)throw Error("The `animate` directive must be used in attribute position.");this.createFinished()}createFinished(){this.resolveFinished?.(),this.finished=new Promise((t=>{this.h=t}))}async resolveFinished(){this.h?.(),this.h=void 0}render(t){return K}getController(){return DF.get(this.l)}isDisabled(){return this.options.disabled||this.getController()?.disabled}update(t,[e]){const n=void 0===this.l;return n&&(this.l=t.options?.host,this.l.addController(this),this.element=t.element,jF.set(this.element,this)),this.optionsOrCallback=e,(n||"function"!=typeof e)&&this.u(e),this.render(e)}u(t){t=t??{};const e=this.getController();void 0!==e&&((t={...e.defaultOptions,...t}).keyframeOptions={...e.defaultOptions.keyframeOptions,...t.keyframeOptions}),t.properties??=PF,this.options=t}p(){const t={},e=this.element.getBoundingClientRect(),n=getComputedStyle(this.element);return this.options.properties.forEach((i=>{const s=e[i]??(OF[i]?void 0:n[i]),c=Number(s);t[i]=isNaN(c)?s+"":c})),t}m(){let t,e=!0;return this.options.guard&&(t=this.options.guard(),e=((t,e)=>{if(Array.isArray(t)){if(Array.isArray(e)&&e.length===t.length&&t.every(((t,n)=>t===e[n])))return!1}else if(e===t)return!1;return!0})(t,this.v)),this.o=this.l.hasUpdated&&!this.isDisabled()&&!this.isAnimating()&&e&&this.element.isConnected,this.o&&(this.v=Array.isArray(t)?Array.from(t):t),this.o}hostUpdate(){"function"==typeof this.optionsOrCallback&&this.u(this.optionsOrCallback()),this.m()&&(this.g=this.p(),this.t=this.t??this.element.parentNode,this.i=this.element.nextSibling)}async hostUpdated(){if(!this.o||!this.element.isConnected||this.options.skipInitial&&!this.isHostRendered)return;let t;this.prepare(),await MF;const e=this._(),n=this.A(this.options.keyframeOptions,e),i=this.p();if(void 0!==this.g){const{from:n,to:s}=this.O(this.g,i,e);this.log("measured",[this.g,i,n,s]),t=this.calculateKeyframes(n,s)}else{const n=kF.get(this.options.inId);if(n){kF.delete(this.options.inId);const{from:s,to:c}=this.O(n,i,e);t=this.calculateKeyframes(s,c),t=this.options.in?[{...this.options.in[0],...t[0]},...this.options.in.slice(1),t[1]]:t,YF++,t.forEach((t=>t.zIndex=YF))}else this.options.in&&(t=[...this.options.in,{}])}this.animate(t,n)}resetStyles(){void 0!==this.j&&(this.element.setAttribute("style",this.j??""),this.j=void 0)}commitStyles(){this.j=this.element.getAttribute("style"),this.webAnimation?.commitStyles(),this.webAnimation?.cancel()}reconnected(){}async disconnected(){if(!this.o)return;if(void 0!==this.options.id&&kF.set(this.options.id,this.g),void 0===this.options.out)return;if(this.prepare(),await MF(),this.t?.isConnected){const t=this.i&&this.i.parentNode===this.t?this.i:null;if(this.t.insertBefore(this.element,t),this.options.stabilizeOut){const t=this.p();this.log("stabilizing out");const e=this.g.left-t.left,n=this.g.top-t.top;!("static"===getComputedStyle(this.element).position)||0===e&&0===n||(this.element.style.position="relative"),0!==e&&(this.element.style.left=e+"px"),0!==n&&(this.element.style.top=n+"px")}}const t=this.A(this.options.keyframeOptions);await this.animate(this.options.out,t),this.element.remove()}prepare(){this.createFinished()}start(){this.options.onStart?.(this)}didFinish(t){t&&this.options.onComplete?.(this),this.g=void 0,this.animatingProperties=void 0,this.frames=void 0,this.resolveFinished()}_(){const t=[];for(let e=this.element.parentNode;e;e=e?.parentNode){const n=jF.get(e);n&&!n.isDisabled()&&n&&t.push(n)}return t}get isHostRendered(){const t=JF.has(this.l);return t||this.l.updateComplete.then((()=>{JF.add(this.l)})),t}A(t,e=this._()){const n={..._F};return e.forEach((t=>Object.assign(n,t.options.keyframeOptions))),Object.assign(n,t),n}O(t,e,n){t={...t},e={...e};const i=n.map((t=>t.animatingProperties)).filter((t=>void 0!==t));let s=1,c=1;return void 0!==i&&(i.forEach((t=>{t.width&&(s/=t.width),t.height&&(c/=t.height)})),void 0!==t.left&&void 0!==e.left&&(t.left=s*t.left,e.left=s*e.left),void 0!==t.top&&void 0!==e.top&&(t.top=c*t.top,e.top=c*e.top)),{from:t,to:e}}calculateKeyframes(t,e,n=!1){const i={},s={};let c=!1;const a={};for(const n in e){const l=t[n],r=e[n];if(n in OF){const t=OF[n];if(void 0===l||void 0===r)continue;const e=t(l,r);void 0!==e.transform&&(a[n]=e.value,c=!0,i.transform=`${i.transform??""} ${e.transform}`,void 0!==e.overrideFrom&&Object.assign(i,e.overrideFrom))}else l!==r&&void 0!==l&&void 0!==r&&(c=!0,i[n]=l,s[n]=r)}return i.transformOrigin=s.transformOrigin=n?"center center":"top left",this.animatingProperties=a,c?[i,s]:void 0}async animate(t,e=this.options.keyframeOptions){this.start(),this.frames=t;let n=!1;if(!this.isAnimating()&&!this.isDisabled()&&(this.options.onFrames&&(this.frames=t=this.options.onFrames(this),this.log("modified frames",t)),void 0!==t)){this.log("animate",[t,e]),n=!0,this.webAnimation=this.element.animate(t,e);const i=this.getController();i?.add(this);try{await this.webAnimation.finished}catch(t){}i?.remove(this)}return this.didFinish(n),n}isAnimating(){return"running"===this.webAnimation?.playState||this.webAnimation?.pending}log(t,e){this.shouldLog&&!this.isDisabled()&&console.log(t,this.options.id,e)}});class qF{static adk2v(t,e,n){return t/(1+n*e)}static adv2k(t,e,n){return(t-n)/(n*e)}}class tu extends LF{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,l`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;
          white-space: nowrap;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        var {
          border-radius: var(---border-radius);
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .brace {
          font-size: 200%;
        }

        .addend {
          position: relative;
          display: inline-block;
        }

        .comparison {
          position: relative;
          display: inline-block;

          font-size: 125%;
          font-weight: 600;
        }

        .function {
          display: inline-block;

          border-radius: var(---border-radius);
        }

        :host([numeric]) .function {
          padding: 0.25rem;
        }

        .exp {
          display: inline-block;

          font-size: 0.75rem;
        }

        .subscript {
          display: inline-block;

          font-size: 66.667%;
        }

        .summation {
          display: flex;

          flex-direction: column;

          line-height: 0.8;
        }

        .sigma {
          display: inline-block;

          font-size: 200%;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          line-height: 1.5;
          vertical-align: middle;

          border-radius: var(---border-radius);
        }

        .n {
          --decidables-spinner-input-width: 2rem;
        }

        .left {
          text-align: left;
        }

        .right {
          text-align: right;
        }

        .bottom {
          vertical-align: bottom;
        }

        .top {
          vertical-align: top;
        }

        /* Color scheme */
        /* .win {
          background: var(---color-better);
        }

        .loss {
          background: var(---color-worse);
        }

        .sure {
          background: var(---color-even);
        } */

        .a {
          background: var(---color-a-light);
        }

        .d {
          background: var(---color-d-light);
        }

        .k {
          background: var(---color-k-light);
        }

        .v {
          background: var(---color-v-light);
        }
      `]}}class eu extends tu{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},as:{attribute:"amount-ss",type:Number,reflect:!0},ds:{attribute:"delay-ss",type:Number,reflect:!0},al:{attribute:"amount-ll",type:Number,reflect:!0},dl:{attribute:"delay-ll",type:Number,reflect:!0},k:{attribute:"k",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.as=20,this.ds=5,this.al=50,this.dl=40,this.k=.1,this.alignState()}alignState(){this.vs=qF.adk2v(this.as,this.ds,this.k),this.vl=qF.adk2v(this.al,this.dl,this.k),this.vDiff=this.vs-this.vl}sendEvent(){this.dispatchEvent(new CustomEvent("htd-calculation-change",{detail:{as:this.as,ds:this.ds,al:this.al,dl:this.dl,k:this.k},bubbles:!0}))}asInput(t){this.as=parseFloat(t.target.value),this.alignState(),this.sendEvent()}dsInput(t){this.ds=parseFloat(t.target.value),this.alignState(),this.sendEvent()}alInput(t){this.al=parseFloat(t.target.value),this.alignState(),this.sendEvent()}dlInput(t){this.dl=parseFloat(t.target.value),this.alignState(),this.sendEvent()}kInput(t){this.k=parseFloat(t.target.value),this.alignState(),this.sendEvent()}static get styles(){return[super.styles,l`
        /* :host {
          display: inline-block;
        } */

        var {
          border-radius: var(---border-radius);
        }

        decidables-spinner {
          border-radius: var(---border-radius);
        }
      `]}willUpdate(){this.alignState()}render(){let t,e,n,i,s,c,a,l;this.numeric?(t=M`<decidables-spinner class="a as" ?disabled=${!this.interactive} step="1" .value="${this.as}" @input=${this.asInput.bind(this)}>
          <var class="math-var">A<sub class="subscript">ss</sub></var>
        </decidables-spinner>`,e=M`<decidables-spinner class="d ds" ?disabled=${!this.interactive} min="0" step="1" .value="${this.ds}" @input=${this.dsInput.bind(this)}>
          <var class="math-var">D<sub class="subscript">ss</sub></var>
        </decidables-spinner>`,n=M`<decidables-spinner class="a al" ?disabled=${!this.interactive} step="1" .value="${this.al}" @input=${this.alInput.bind(this)}>
          <var class="math-var">A<sub class="subscript">ll</sub></var>
        </decidables-spinner>`,i=M`<decidables-spinner class="d dl" ?disabled=${!this.interactive} min="0" step="1" .value="${this.dl}" @input=${this.dlInput.bind(this)}>
          <var class="math-var">D<sub class="subscript">ll</sub></var>
        </decidables-spinner>`,s=M`<decidables-spinner class="k" ?disabled=${!this.interactive} min="0" max="100" step=".001" .value="${this.k}" @input=${this.kInput.bind(this)}>
          <var class="math-var">k</var>
        </decidables-spinner>`,c=M`<decidables-spinner class="v vs" disabled .value="${+this.vs.toFixed(2)}">
          <var class="math-var">V<sub class="subscript">ss</sub></var>
        </decidables-spinner>`,a=M`<decidables-spinner class="v vl" disabled .value="${+this.vl.toFixed(2)}">
          <var class="math-var">V<sub class="subscript">ll</sub></var>
        </decidables-spinner>`,l=M`${this.vDiff>0?M`<span class="comparison" ${$F({in:TF})}>&gt;</span>`:this.vDiff<0?M`<span class="comparison" ${$F({in:TF})}>&lt;</span>`:M`<span class="comparison" ${$F({in:TF})}>=</span>`}`):(t=M`<var class="math-var a as">A<sub class="subscript">ss</sub></var>`,e=M`<var class="math-var d ds">D<sub class="subscript">ss</sub></var>`,n=M`<var class="math-var a al">A<sub class="subscript">ll</sub></var>`,i=M`<var class="math-var d dl">D<sub class="subscript">ll</sub></var>`,s=M`<var class="math-var k">k</var>`,c=M`<var class="math-var v vs">V<sub class="subscript">ss</sub></var>`,a=M`<var class="math-var v vl">V<sub class="subscript">ll</sub></var>`,l=M`<span class="comparison"></span>`);const r=M`
      <tr>
        <td class="underline">
          ${t}
        </td>
        <td rowspan="2">
          ${l}
        </td>
        <td class="underline">
          ${n}
        </td>
      </tr>
      <tr>
        <td class="">
          <span class="paren tight">(</span>1<span class="plus">+</span>${s}${e}<span class="paren tight">)</span>
        </td>
        <td class="">
          <span class="paren tight">(</span>1<span class="plus">+</span>${s}${i}<span class="paren tight">)</span>
        </td>
      </tr>
      <tr>
        <td class="right">
          ${c}
        </td>
        <td>
          ${l}
        </td>
        <td class="left">
          ${a}
        </td>
      </tr>`;return M`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${r}
          </tbody>
        </table>
      </div>`}}customElements.define("htd-calculation",eu);class nu extends(function(t){return class extends t{static get properties(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.width=NaN,this.height=NaN,this.rem=NaN}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(this.getDimensions.bind(this)),this.resizeObserver.observe(this)}disconnectedCallback(){this.resizeObserver.unobserve(this),super.disconnectedCallback()}}}(LF)){static get properties(){return{a:{attribute:"amount",type:Number,reflect:!0},d:{attribute:"delay",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},k:{attribute:"k",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.scale={value:{min:0,max:80,step:1,round:Math.round},time:{min:0,max:100,step:1,round:Math.round},discount:{min:0,max:100,step:.001,round:t=>+t.toFixed(3)}},this.a=null,this.d=null,this.label="",this.k=.1,this.options=[{name:"default",a:this.a,d:this.d,label:this.label}],this.as=null,this.ds=null,this.al=null,this.dl=null,this.trialCount=null,this.response=null,this.alignState()}alignState(){this.options[0].a=this.a,this.options[0].d=this.d,this.options[0].label=this.label,this.options.forEach((t=>{t.v=qF.adk2v(t.a,t.d,this.k)})),this.v=this.options[0].v}trial(t,e,n,i,s,c){this.trialCount&&this.removeOption(`${this.trialCount}-s`),this.trialCount&&this.removeOption(`${this.trialCount}-l`),this.as=t,this.ds=e,this.al=n,this.dl=i,this.trialCount=s,this.response=c,this.setOption(this.as,this.ds,`${this.trialCount}-s`,"s",!0),this.setOption(this.al,this.dl,`${this.trialCount}-l`,"l",!0)}pauseTrial(){const t=Tn(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum((t=>(t.paused=!0,t)))}resumeTrial(){Tn(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum((t=>(t.paused=!1,t))),this.requestUpdate()}clearOptions(){this.options.splice(1),this.requestUpdate()}removeOption(t){this.options=this.options.filter((e=>e.name!==t)),this.requestUpdate()}getOption(t="default"){return this.options.find((e=>e.name===t))}setOption(t,e,n="default",i="",s=!1){"default"===n&&(this.a=t,this.d=e,this.label=i);const c=this.options.find((t=>t.name===n));void 0===c?this.options.push({name:n,a:t,d:e,label:i,trial:s,new:s}):(c.a=t,c.d=e,c.label=i),this.requestUpdate()}static get styles(){return[super.styles,l`
        :host {
          display: inline-block;

          width: 27rem;
          height: 15rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .axis-x path,
        .axis-x line,
        .axis-y path,
        .axis-y line {
          stroke: var(---color-element-border);
          /* shape-rendering: crispEdges; */
        }

        .curve {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .curve.interactive {
          cursor: nwse-resize;
          
          filter: url("#shadow-2");
          outline: none;
        }

        .curve.interactive:hover {
          filter: url("#shadow-4");
        }

        .curve.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .curve.interactive:focus {
          filter: url("#shadow-8");
        }

        .bar {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .bar.interactive {
          cursor: ew-resize;
          
          filter: url("#shadow-2");
          outline: none;
        }

        .bar.interactive:hover {
          filter: url("#shadow-4");
        }

        .bar.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .bar.interactive:focus {
          filter: url("#shadow-8");
        }

        .point .mark {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }

        .point.interactive {
          cursor: ns-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }
      `]}render(){return M``}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const e=this.width,n=this.height;let i,s;e/n>1.8?(s=n,i=1.8*s):(i=e,s=i/1.8);const c=2*this.rem,a=3*this.rem,l=3*this.rem,r=s-(c+a),o=i-(l+2*this.rem),g=parseInt(this.getComputedStyleValue("---transition-duration"),10),B=Jo().domain([this.scale.time.min,this.scale.time.max]).range([0,o]),d=Jo().domain([this.scale.value.min,this.scale.value.max]).range([r,0]),Q=UI().x((t=>B(t.d))).y((t=>d(t.v))),I=Tn(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),F=I.enter().append("svg").classed("main",!0);F.html(LF.svgDefs);const u=F.merge(I).attr("viewBox",`0 0 ${i} ${s}`),h=F.append("g").classed("plot",!0),U=u.select(".plot").attr("transform",`translate(${l}, ${c})`);h.append("clipPath").attr("id","clip-htd-curves").append("rect"),U.select("clipPath rect").attr("height",r+1).attr("width",o+1);const b=h.append("g").classed("underlayer",!0),C=U.select(".underlayer");b.append("rect").classed("background",!0),C.select(".background").attr("height",r).attr("width",o),b.append("g").classed("axis-x",!0);C.select(".axis-x").attr("transform",`translate(0, ${d(0)})`).transition().duration(2*g).ease(Kc).call(Ae(B)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const y=b.append("text").classed("title-x",!0).attr("text-anchor","middle");y.append("tspan").classed("name",!0).text("Delay ("),y.append("tspan").classed("math-var d",!0).text("D"),y.append("tspan").classed("name",!0).text(")"),C.select(".title-x").attr("transform",`translate(${o/2}, ${r+2.25*this.rem})`),b.append("g").classed("axis-y",!0);var f;C.select(".axis-y").transition().duration(2*g).ease(Kc).call((f=d,me(Ue,f))).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const G=b.append("text").classed("title-y",!0).attr("text-anchor","middle");G.append("tspan").classed("name",!0).text("Value ("),G.append("tspan").classed("math-var v",!0).text("V"),G.append("tspan").classed("name",!0).text(")"),C.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${r/2})rotate(-90)`),h.append("g").classed("content",!0);const p=U.select(".content").selectAll(".option").data(this.options.filter((t=>null!==t.a&&null!==t.d)),(t=>t.name)),m=p.enter().append("g").classed("option",!0);m.append("path").classed("curve",!0).attr("clip-path","url(#clip-htd-curves)").attr("d",(t=>{const e=Be(B(t.d),B(0),-1).map((e=>({d:B.invert(e),v:qF.adk2v(t.a,t.d-B.invert(e),this.k)})));return Q(e)})).attr("stroke-dasharray",((t,e,n)=>{if(t.trial){return`0,${n[e].getTotalLength()}`}return"none"})),m.append("line").classed("bar",!0).attr("x1",(t=>B(t.d))).attr("x2",(t=>B(t.d))).attr("y1",d(0)).attr("y2",(t=>d(t.a))).attr("stroke-dasharray",((t,e,n)=>{if(t.trial){return`0,${n[e].getTotalLength()}`}return"none"}));const A=m.append("g").classed("point",!0).attr("transform",(t=>`translate(${B(t.d)}, ${d(t.a)})`)).attr("opacity",(t=>t.trial?0:1));A.append("circle").classed("mark",!0),A.append("text").classed("label",!0);const x=m.merge(p);x.filter(((t,e,n)=>this.interactive&&!n[e].classList.contains("interactive"))).select(".curve").classed("interactive",!0).attr("tabindex",0).call(ii().subject((t=>({x:t.x,y:t.y}))).on("start",(t=>{Tn(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const n=e.d-B.invert(t.x),i=n<0?0:n>e.d?e.d:n,s=d.invert(t.y),c=s<=0?.001:s>e.a?e.a:s,a=qF.adv2k(e.a,i,c);this.k=a<this.scale.discount.min?this.scale.discount.min:a>this.scale.discount.max?this.scale.discount.max:this.scale.discount.round(a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:e.name,a:e.a,d:e.d,k:this.k,label:e.label},bubbles:!0}))})).on("end",(t=>{Tn(t.currentTarget).classed("dragging",!1)}))).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let n=this.k;switch(t.key){case"ArrowUp":case"ArrowLeft":n*=t.shiftKey?.95:.85;break;case"ArrowDown":case"ArrowRight":n*=t.shiftKey?1.05:1.15}n=n<this.scale.discount.min?this.scale.discount.min:n>this.scale.discount.max?this.scale.discount.max:this.scale.discount.round(n),n!==this.k&&(this.k=n,this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:e.name,a:e.a,d:e.d,k:this.k,label:e.label},bubbles:!0}))),t.preventDefault()}})),x.filter(((t,e,n)=>this.interactive&&!t.trial&&!n[e].classList.contains("interactive"))).select(".bar").classed("interactive",!0).attr("tabindex",0).call(ii().subject(((t,e)=>({x:B(e.d),y:d(e.a)}))).on("start",(t=>{Tn(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const n=B.invert(t.x);e.d=n<this.scale.time.min?this.scale.time.min:n>this.scale.time.max?this.scale.time.max:this.scale.time.round(n),"default"===e.name&&(this.d=e.d),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:e.name,a:e.a,d:e.d,k:this.k,label:e.label},bubbles:!0}))})).on("end",(t=>{Tn(t.currentTarget).classed("dragging",!1)}))).on("keydown",((t,e)=>{if(["ArrowLeft","ArrowRight"].includes(t.key)){let n=e.d;switch(t.key){case"ArrowRight":n+=t.shiftKey?1:5;break;case"ArrowLeft":n-=t.shiftKey?1:5}n=n<this.scale.time.min?this.scale.time.min:n>this.scale.time.max?this.scale.time.max:n,n!==e.d&&(e.d=n,"default"===e.name&&(this.d=e.d),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:e.name,a:e.a,d:e.d,k:this.k,label:e.label},bubbles:!0}))),t.preventDefault()}})),x.filter(((t,e,n)=>this.interactive&&!t.trial&&!n[e].classList.contains("interactive"))).select(".point").classed("interactive",!0).attr("tabindex",0).call(ii().subject(((t,e)=>({x:B(e.d),y:d(e.a)}))).on("start",(t=>{Tn(t.currentTarget).classed("dragging",!0)})).on("drag",((t,e)=>{this.drag=!0;const n=d.invert(t.y);e.a=n<this.scale.value.min?this.scale.value.min:n>this.scale.value.max?this.scale.value.max:this.scale.value.round(n),"default"===e.name&&(this.a=e.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:e.name,a:e.a,d:e.d,k:this.k,label:e.label},bubbles:!0}))})).on("end",(t=>{Tn(t.currentTarget).classed("dragging",!1)}))).on("keydown",((t,e)=>{if(["ArrowUp","ArrowDown"].includes(t.key)){let n=e.a;switch(t.key){case"ArrowUp":n+=t.shiftKey?1:5;break;case"ArrowDown":n-=t.shiftKey?1:5}n=n<this.scale.value.min?this.scale.value.min:n>this.scale.value.max?this.scale.value.max:n,n!==e.a&&(e.a=n,"default"===e.name&&(this.a=e.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:e.name,a:e.a,d:e.d,k:this.k,label:e.label},bubbles:!0}))),t.preventDefault()}})),x.filter(((t,e,n)=>!this.interactive&&n[e].classList.contains("interactive"))).select(".curve").classed("interactive",!1).attr("tabindex",null).on("drag",null).on("keydown",null),x.filter(((t,e,n)=>(!this.interactive||t.trial)&&n[e].classList.contains("interactive"))).select(".bar").classed("interactive",!1).attr("tabindex",null).on("drag",null).on("keydown",null),x.filter(((t,e,n)=>(!this.interactive||t.trial)&&n[e].classList.contains("interactive"))).select(".point").classed("interactive",!1).attr("tabindex",null).on("drag",null).on("keydown",null),x.filter((t=>t.new)).select(".curve").transition().duration(g).delay(g+g/10).ease(zc).attrTween("stroke-dasharray",((t,e,n)=>{const i=n[e].getTotalLength();return Ns(`0,${i}`,`${i},0`)})).on("end",(t=>{t.new=!1,this.dispatchEvent(new CustomEvent("discountable-response",{detail:{trial:this.trialCount,as:this.as,ds:this.ds,al:this.al,dl:this.dl,response:this.response},bubbles:!0}))})),x.filter((t=>t.new)).select(".bar").transition().duration(g).ease(zc).attrTween("stroke-dasharray",((t,e,n)=>{const i=n[e].getTotalLength();return Ns(`0,${i}`,`${i},${i}`)})),x.filter((t=>t.new)).select(".point").transition().duration(g/10).delay(g).ease(zc).attrTween("opacity",(()=>Ns(0,1))),p.select(".curve").transition().duration(this.drag?0:this.firstUpdate?2*g:g).ease(Kc).attrTween("d",((t,e,n)=>{const i=n[e],s=Ns(void 0!==i.a?i.a:t.a,t.a),c=Ns(void 0!==i.d?i.d:t.d,t.d);return t=>{i.a=s(t),i.d=c(t);const e=Be(B(i.d),B(0),-1).map((t=>({d:B.invert(t),v:qF.adk2v(i.a,i.d-B.invert(t),this.k)})));return Q(e)}})),p.select(".bar").transition().duration(this.drag?0:this.firstUpdate?2*g:g).ease(Kc).attrTween("x1",((t,e,n)=>{const i=n[e],s=Ns(void 0!==i.d?i.d:t.d,t.d);return t=>(i.d=s(t),`${B(i.d)}`)})).attrTween("x2",((t,e,n)=>{const i=n[e],s=Ns(void 0!==i.d?i.d:t.d,t.d);return t=>(i.d=s(t),`${B(i.d)}`)})).attrTween("y2",((t,e,n)=>{const i=n[e],s=Ns(void 0!==i.a?i.a:t.a,t.a);return t=>(i.a=s(t),`${d(i.a)}`)})),p.select(".point").transition().duration(this.drag?0:this.firstUpdate?2*g:g).ease(Kc).attrTween("transform",((t,e,n)=>{const i=n[e],s=Ns(void 0!==i.d?i.d:t.d,t.d),c=Ns(void 0!==i.a?i.a:t.a,t.a);return t=>(i.d=s(t),i.a=c(t),`translate(${B(i.d)}, ${d(i.a)})`)})),x.select(".point .label").text((t=>t.label)),p.exit().remove(),this.drag=!1,this.firstUpdate=!1}}function iu(t){return null!=t&&!Number.isNaN(t)}function su(t,e){return+iu(e)-+iu(t)||gt(t,e)}function cu(t,e){return+iu(e)-+iu(t)||Bt(t,e)}function au(t){return null!=t&&""!=`${t}`}function lu(t){return isFinite(t)?t:NaN}function ru(t){return t>0&&isFinite(t)?t:NaN}function ou(t){return t<0&&isFinite(t)?t:NaN}function gu(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return"function"==typeof e?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),s=t.getUTCSeconds(),c=t.getUTCMilliseconds();return`${a=t.getUTCFullYear(),a<0?`-${Bu(-a,6)}`:a>9999?`+${Bu(a,6)}`:Bu(a,4)}-${Bu(t.getUTCMonth()+1,2)}-${Bu(t.getUTCDate(),2)}${n||i||s||c?`T${Bu(n,2)}:${Bu(i,2)}${s||c?`:${Bu(s,2)}${c?`.${Bu(c,3)}`:""}`:""}Z`:""}`;var a}function Bu(t,e){return`${t}`.padStart(e,"0")}customElements.define("htd-curves",nu);const du=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Qu(t,e){return du.test(t+="")?new Date(t):"function"==typeof e?e(t):e}const Iu=1e3,Fu=6e4,uu=36e5,hu=864e5,Uu=7*hu,bu=30*hu,Cu=365*hu,yu=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Iu],["5 seconds",5e3],["15 seconds",15e3],["30 seconds",3e4],["minute",Fu],["5 minutes",3e5],["15 minutes",9e5],["30 minutes",18e5],["hour",uu],["3 hours",108e5],["6 hours",216e5],["12 hours",432e5],["day",hu],["2 days",2*hu],["week",Uu],["2 weeks",2*Uu],["month",bu],["3 months",3*bu],["6 months",6*bu],["year",Cu],["2 years",2*Cu],["5 years",5*Cu],["10 years",10*Cu],["20 years",20*Cu],["50 years",50*Cu],["100 years",100*Cu]],fu=new Map([["second",Iu],["minute",Fu],["hour",uu],["day",hu],["monday",Uu],["tuesday",Uu],["wednesday",Uu],["thursday",Uu],["friday",Uu],["saturday",Uu],["sunday",Uu],["week",Uu],["month",bu],["year",Cu]]),Gu=new Map([["second",fg],["minute",Gg],["hour",mg],["day",xg],["monday",Xg],["tuesday",vg],["wednesday",Zg],["thursday",Eg],["friday",Vg],["saturday",wg],["sunday",Ng],["week",Ng],["month",zg],["year",Og]]),pu=new Map([["second",fg],["minute",pg],["hour",Ag],["day",Sg],["monday",Dg],["tuesday",Yg],["wednesday",kg],["thursday",Jg],["friday",Mg],["saturday",Tg],["sunday",Hg],["week",Hg],["month",Kg],["year",_g]]),mu=Symbol("intervalDuration"),Au=Symbol("intervalType");for(const[t,e]of Gu)e[mu]=fu.get(t),e[Au]="time";for(const[t,e]of pu)e[mu]=fu.get(t),e[Au]="utc";const xu=[["year",_g,"utc"],["year",Og,"time"],["month",Kg,"utc"],["month",zg,"time"],["day",Sg,"utc",6*bu],["day",xg,"time",6*bu],["hour",Ag,"utc",3*hu],["minute",pg,"utc",216e5],["second",fg,"utc",18e5]];function Lu(t,e,n){let i=`${t}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let s=1;const c=/^(?:(\d+)\s+)/.exec(i);switch(c&&(i=i.slice(c[0].length),s=+c[1]),i){case"quarter":i="month",s*=3;break;case"half":i="month",s*=6}let a=e.get(i);if(!a)throw new Error(`unknown interval: ${t}`);if(s>1){if(!a.every)throw new Error(`non-periodic interval: ${i}`);a=a.every(s),a[mu]=fu.get(i)*s,a[Au]=n}return a}function Su(t){return Lu(t,Gu,"time")}function Ru(t){return Lu(t,pu,"utc")}function Nu(t,e){if(!(e>1))return;const n=t[mu];if(!yu.some((([,t])=>t===n)))return;if(n%hu==0&&hu<n&&n<bu)return;const[i]=yu[dt((([,t])=>Math.log(t))).center(yu,Math.log(n*e))];return("time"===t[Au]?Su:Ru)(i)}function Xu(t,e,n){const i="time"===e?cB:aB;if(null==n)return i("year"===t?"%Y":"month"===t?"%Y-%m":"day"===t?"%Y-%m-%d":"hour"===t||"minute"===t?"%Y-%m-%dT%H:%M":"second"===t?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const s=function(t){return"left"===t||"right"===t?(t,e)=>`\n${t}\n${e}`:"top"===t?(t,e)=>`${e}\n${t}`:(t,e)=>`${t}\n${e}`}(n);switch(t){case"millisecond":return Zu(i(".%L"),i(":%M:%S"),s);case"second":return Zu(i(":%S"),i("%-I:%M"),s);case"minute":return Zu(i("%-I:%M"),i("%p"),s);case"hour":return Zu(i("%-I %p"),i("%b %-d"),s);case"day":return Zu(i("%-d"),i("%b"),s);case"month":return Zu(i("%b"),i("%Y"),s);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function vu(t,e){const n=_t(function(t,e=ge){const n=[];let i,s=!1;for(const c of t)s&&n.push(e(i,c)),i=c,s=!0;return n}(t,((t,e)=>Math.abs(e-t))));if(n<1e3)return Xu("millisecond","utc",e);for(const[i,s,c,a]of xu){if(n>a)break;if("hour"===i&&!n)break;if(t.every((t=>s.floor(t)>=t)))return Xu(i,c,e)}}function Zu(t,e,n){return(i,s,c)=>{const a=t(i,s),l=e(i,s),r=s-Mh(c);return s!==r&&void 0!==c[r]&&l===e(c[r],r)?a:n(a,l)}}const Eu=Object.getPrototypeOf(Uint8Array),Vu=Object.prototype.toString,wu=Symbol("reindex");function Wu(t,e,n){const i=typeof e;return"string"===i?Hu(t,ku(e),n):"function"===i?Hu(t,e,n):"number"===i||e instanceof Date||"boolean"===i?lh(t,ju(e),n):"function"==typeof e?.transform?Du(e.transform(t),n):function(t,e){return e?hh(t,e):t}(Du(e,n),t?.[wu])}function Hu(t,e,n){return lh(t,n?.prototype instanceof Eu?function(t){return(e,n)=>qu(t(e,n))}(e):e,n)}function Du(t,e){return void 0===e?ah(t):t instanceof e?t:e.prototype instanceof Eu&&!(t instanceof Eu)?e.from(t,qu):e.from(t)}const Yu=[null],ku=t=>e=>e[t],Ju={transform:uh},Mu={transform:t=>t},Tu=()=>1,zu=()=>!0,Ku=t=>null==t?t:`${t}`,Ou=t=>null==t?t:+t,_u=t=>t?t[0]:void 0,Pu=t=>t?t[1]:void 0,ju=t=>()=>t;function $u(t){return t instanceof Eu?t:lh(t,qu,Float64Array)}function qu(t){return null==t?NaN:Number(t)}function th(t){return lh(t,eh)}function eh(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?Qu(t):null==t||isNaN(t=+t)?void 0:new Date(t)}function nh(t,e){return void 0===t&&(t=e),null===t?[void 0,"none"]:Wh(t)?[void 0,t]:[t,void 0]}function ih(t,e){return void 0===t&&(t=e),null===t||"number"==typeof t?[void 0,t]:[t,void 0]}function sh(t,e,n){if(null!=t)return ch(t,e,n)}function ch(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function ah(t){return null==t||t instanceof Array||t instanceof Eu?t:Array.from(t)}function lh(t,e,n=Array){return null==t?t:t instanceof n?t.map(e):n.from(t,e)}function rh(t,e=Array){return t instanceof e?t.slice():e.from(t)}function oh({y:t,y1:e,y2:n}){return void 0!==t||void 0!==e||void 0!==n}function gh(t){return t?.toString===Vu}function Bh(t){return gh(t)&&(void 0!==t.type||void 0!==t.domain)}function dh(t){return gh(t)&&"function"!=typeof t.transform}function Qh(t){return dh(t)&&void 0===t.value&&void 0===t.channel}function Ih(t,e){return void 0===t&&void 0===e?[_u,Pu]:[t,e]}function Fh({z:t,fill:e,stroke:n}={}){return void 0===t&&([t]=nh(e)),void 0===t&&([t]=nh(n)),t}function uh(t){const e=t.length,n=new Uint32Array(e);for(let t=0;t<e;++t)n[t]=t;return n}function hh(t,e){return lh(e,(e=>t[e]),t.constructor)}function Uh(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function bh(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Ch(t){let e;return[{transform:()=>e,label:fh(t)},t=>e=t]}function yh(t){return null==t?[t]:Ch(t)}function fh(t,e){return"string"==typeof t?t:t&&void 0!==t.label?t.label:e}function Gh(t,e){return{transform(n){const i=t.transform(n),s=e.transform(n);return vh(i)||vh(s)?lh(i,((t,e)=>new Date((+i[e]+ +s[e])/2))):lh(i,((t,e)=>(+i[e]+ +s[e])/2),Float64Array)},label:t.label}}function ph(t,e){const n=mh(e?.interval,e?.type);return n?lh(t,n):t}function mh(t,e){const n=Ah(t,e);return n&&(t=>iu(t)?n.floor(t):t)}function Ah(t,e){if(null!=t){if("number"==typeof t){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:t=>Math.floor(t*e)/e,offset:t=>(t*e+1)/e,range:(t,n)=>Be(Math.ceil(t*e),n*e).map((t=>t/e))}:{floor:t=>Math.floor(t/e)*e,offset:t=>t+e,range:(t,n)=>Be(Math.ceil(t/e),n/e).map((t=>t*e))}}if("string"==typeof t)return("time"===e?Su:Ru)(t);if("function"!=typeof t.floor)throw new Error("invalid interval; missing floor method");if("function"!=typeof t.offset)throw new Error("invalid interval; missing offset method");return t}}function xh(t,e){if((t=Ah(t,e))&&"function"!=typeof t.range)throw new Error("invalid interval: missing range method");return t}function Lh(t){return"function"==typeof t?.range}function Sh(t){return void 0===t||dh(t)?t:{value:t}}function Rh(t){return t&&"function"==typeof t[Symbol.iterator]}function Nh(t){for(const e of t)if(null!=e)return"object"!=typeof e||e instanceof Date}function Xh(t){for(const e of t){if(null==e)continue;const t=typeof e;return"string"===t||"boolean"===t}}function vh(t){for(const e of t)if(null!=e)return e instanceof Date}function Zh(t){for(const e of t)if(null!=e)return"string"==typeof e&&isNaN(e)&&Qu(e)}function Eh(t){for(const e of t)if(null!=e){if("string"!=typeof e)return!1;if(e.trim())return!isNaN(e)}}function Vh(t,e){let n;for(const i of t)if(null!=i){if(!e(i))return!1;n=!0}return n}const wh=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Wh(t){return"string"==typeof t&&(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||wh.has(t))}function Hh(t){return"number"==typeof t&&(0<=t&&t<=1||isNaN(t))}function Dh(t){return null==t||Yh(t)}function Yh(t){return/^\s*none\s*$/i.test(t)}function kh(t,e){return sh(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Jh(t="middle"){return kh(t,"frameAnchor")}function Mh(t){if(null==t)return;return Bt(t[0],t[t.length-1])}function Th(t){return Rh(t)?function(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,(t=>{const{name:n}=t;if(null==n)throw new Error("missing name");const i=`${n}`;if("__proto__"===i)throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[n,t]})))}(t):t}const zh=Symbol("position"),Kh=Symbol("color"),Oh=Symbol("radius"),_h=Symbol("length"),Ph=Symbol("opacity"),jh=Symbol("symbol"),$h=Symbol("projection"),qh=new Map([["x",zh],["y",zh],["fx",zh],["fy",zh],["r",Oh],["color",Kh],["opacity",Ph],["symbol",jh],["length",_h],["projection",$h]]);const tU=2/Math.sqrt(3),eU=new Map([["asterisk",yI],["circle",fI],["cross",GI],["diamond",AI],["diamond2",xI],["hexagon",{draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*tU,s=i/2;t.moveTo(0,i),t.lineTo(n,s),t.lineTo(n,-s),t.lineTo(0,-i),t.lineTo(-n,-s),t.lineTo(-n,s),t.closePath()}}],["plus",LI],["square",SI],["square2",RI],["star",ZI],["times",MI],["triangle",VI],["triangle2",WI],["wye",JI]]);function nU(t){return t&&"function"==typeof t.draw}function iU(t){return!!nU(t)||"string"==typeof t&&eU.has(t.toLowerCase())}function sU(t){if(null==t||nU(t))return t;const e=eU.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function cU({filter:t,sort:e,reverse:n,transform:i,initializer:s,...c}={},a){if(void 0===i&&(null!=t&&(i=oU(t)),null==e||Qh(e)||(i=lU(i,BU(e))),n&&(i=lU(i,gU))),null!=a&&null!=s)throw new Error("transforms cannot be applied after initializers");return{...c,...(null===e||Qh(e))&&{sort:e},transform:lU(i,a)}}function aU({filter:t,sort:e,reverse:n,initializer:i,...s}={},c){return void 0===i&&(null!=t&&(i=oU(t)),null==e||Qh(e)||(i=rU(i,BU(e))),n&&(i=rU(i,gU))),{...s,...(null===e||Qh(e))&&{sort:e},initializer:rU(i,c)}}function lU(t,e){return null==t?null===e?void 0:e:null==e?null===t?void 0:t:function(n,i,s){return({data:n,facets:i}=t.call(this,n,i,s)),e.call(this,ah(n),i,s)}}function rU(t,e){return null==t?null===e?void 0:e:null==e?null===t?void 0:t:function(n,i,s,...c){let a,l,r,o,g,B;return({data:l=n,facets:r=i,channels:a}=t.call(this,n,i,s,...c)),({data:g=l,facets:B=r,channels:o}=e.call(this,l,r,{...s,...a},...c)),{data:g,facets:B,channels:{...a,...o}}}}function oU(t){return(e,n)=>{const i=Wu(e,t);return{data:e,facets:n.map((t=>t.filter((t=>i[t]))))}}}function gU(t,e){return{data:t,facets:e.map((t=>t.slice().reverse()))}}function BU(t){return("function"==typeof t&&1!==t.length?dU:QU)(t)}function dU(t){return(e,n)=>{const i=(n,i)=>t(e[n],e[i]);return{data:e,facets:n.map((t=>t.slice().sort(i)))}}}function QU(t){let e,n;({channel:e,value:t,order:n}={...Sh(t)});const i=e?.startsWith("-");if(i&&(e=e.slice(1)),void 0===n&&(n=i?cu:su),"function"!=typeof n)switch(`${n}`.toLowerCase()){case"ascending":n=su;break;case"descending":n=cu;break;default:throw new Error(`invalid order: ${n}`)}return(i,s,c)=>{let a;if(void 0===e)a=Wu(i,t);else{if(void 0===c)throw new Error("channel sort requires an initializer");if(a=c[e],!a)return{};a=a.value}const l=(t,e)=>n(a[t],a[e]);return{data:i,facets:s.map((t=>t.slice().sort(l)))}}}function IU(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function FU(t,e,n,i=uU){let s;gh(e)&&"reduce"in e&&(s=e.scale,e=e.reduce);const c=i(t,e,n),[a,l]=Ch(c.label);let r;return{name:t,output:void 0===s?a:{value:a,scale:s},initialize(t){c.initialize(t),r=l([])},scope(t,e){c.scope(t,e)},reduce(t,e){r.push(c.reduce(t,e))}}}function uU(t,e,n,i=UU){const s=function(t,e){if(void 0!==e[t])return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y"}return e[t]}(t,n),c=i(e,s);let a,l;return{label:fh(c===AU?null:s,c.label),initialize(t){a=void 0===s?t:Wu(t,s),"data"===c.scope&&(l=c.reduceIndex(uh(t),a))},scope(t,e){c.scope===t&&(l=c.reduceIndex(e,a))},reduce:(t,e)=>null==c.scope?c.reduceIndex(t,a,e):c.reduceIndex(t,a,l,e)}}function hU(t,e){return e?wt(vt(t,(t=>e[t])),_u):[[,t]]}function UU(t,e,n=bU){if(null==t)return n(t);if("function"==typeof t.reduceIndex)return t;if("function"==typeof t.reduce&&gh(t))return function(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}(t);if("function"==typeof t)return function(t){return{reduceIndex:(e,n,i)=>t(hh(n,e),i)}}(t);if(/^p\d{2}$/i.test(t))return CU(function(t){const e=+`${t}`.slice(1)/100;return(t,n)=>ne(t,e,n)}(t));switch(`${t}`.toLowerCase()){case"first":return GU;case"last":return mU;case"identity":return fU;case"count":return AU;case"distinct":return xU;case"sum":return null==e?AU:LU;case"proportion":return SU(e,"data");case"proportion-facet":return SU(e,"facet");case"deviation":return CU(Gt);case"min":return CU(jt);case"min-index":return CU($t);case"max":return CU(_t);case"max-index":return CU(Pt);case"mean":return yU(ae);case"median":return yU(le);case"variance":return CU(ft);case"mode":return CU(oe)}return n(t)}function bU(t){throw new Error(`invalid reduce: ${t}`)}function CU(t){return{reduceIndex:(e,n)=>t(e,(t=>n[t]))}}function yU(t){return{reduceIndex(e,n){const i=t(e,(t=>n[t]));return vh(n)?new Date(i):i}}}const fU={reduceIndex:(t,e)=>hh(e,t)},GU={reduceIndex:(t,e)=>e[t[0]]},pU={reduceIndex(t,e){const n=wt(Zt(t,(t=>t.length),(t=>e[t])),Pu),i=n.slice(-5).reverse();if(i.length<n.length){const t=n.slice(0,-4);i[4]=[` ${t.length.toLocaleString("en-US")} more`,de(t,Pu)]}return i.map((([t,e])=>`${t} (${e.toLocaleString("en-US")})`)).join("\n")}},mU={reduceIndex:(t,e)=>e[t[t.length-1]]},AU={label:"Frequency",reduceIndex:t=>t.length},xU={label:"Distinct",reduceIndex(t,e){const n=new xt;for(const i of t)n.add(e[i]);return n.size}},LU=CU(de);function SU(t,e){return null==t?{scope:e,label:"Frequency",reduceIndex:(t,e,n=1)=>t.length/n}:{scope:e,reduceIndex:(t,e,n=1)=>de(t,(t=>e[t]))/n}}function RU(t,{scale:e,type:n,value:i,filter:s,hint:c,label:a=fh(i)},l){return void 0===c&&"function"==typeof i?.transform&&(c=i.hint),NU(l,{scale:e,type:n,value:Wu(t,i),label:a,filter:s,hint:c})}function NU(t,e){const{scale:n,value:i}=e;if(!0===n||"auto"===n)switch(t){case"fill":case"stroke":case"color":e.scale=!0!==n&&Vh(i,Wh)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=!0!==n&&Vh(i,Hh)?null:"opacity";break;case"symbol":!0!==n&&Vh(i,iU)?(e.scale=null,e.value=lh(i,sU)):e.scale="symbol";break;default:e.scale=qh.has(t)?t:null}else if(!1===n)e.scale=null;else if(null!=n&&!qh.has(n))throw new Error(`unknown scale: ${n}`);return e}function XU(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function vU(t,e){const n=t.original;if(n===t)return e;const i=e.value,s=e.value=[];for(let e=0;e<n.length;++e){const c=i[n[e][0]];for(const n of t[e])s[n]=c}return e}function ZU(t,e,n){const i=EU(t,e);return lh(EU(t,n),((t,e)=>Math.abs(t-i[e])),Float64Array)}function EU(t,e,n){let i=t[e];if(i||void 0===n||(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function VU(t){if(null==t||"function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"ascending":return wU;case"descending":return WU}throw new Error(`invalid order: ${t}`)}function wU([t,e],[n,i]){return su(e,i)||su(t,n)}function WU([t,e],[n,i]){return cu(e,i)||su(t,n)}function HU(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return null===n.source?null:n}}const DU=function(t){let e,n;return(...i)=>((n?.length!==i.length||n.some(((t,e)=>t!==i[e])))&&(n=i,e=t(...i)),e)}((t=>new Intl.NumberFormat(t)));function YU(t){return gu(t,"Invalid Date")}const kU=function(t="en-US"){const e=function(t="en-US"){const e=DU(t);return t=>null==t||isNaN(t)?void 0:e.format(t)}(t);return t=>(t instanceof Date?YU:"number"==typeof t?e:Ku)(t)}();let JU,MU=0;function TU(t){t!==JU&&(JU=t,console.warn(t),++MU)}const zU=("undefined"!=typeof window?window.devicePixelRatio>1:"undefined"==typeof it)?0:.5;let KU=0;function OU(){return"plot-clip-"+ ++KU}function _U(t,{title:e,href:n,ariaLabel:i,ariaDescription:s,ariaHidden:c,target:a,fill:l,fillOpacity:r,stroke:o,strokeWidth:g,strokeOpacity:B,strokeLinejoin:d,strokeLinecap:Q,strokeMiterlimit:I,strokeDasharray:F,strokeDashoffset:u,opacity:h,mixBlendMode:U,imageFilter:b,paintOrder:C,pointerEvents:y,shapeRendering:f,channels:G},{ariaLabel:p,fill:m="currentColor",fillOpacity:A,stroke:x="none",strokeOpacity:L,strokeWidth:S,strokeLinecap:R,strokeLinejoin:N,strokeMiterlimit:X,paintOrder:v}){null===m&&(l=null,r=null),null===x&&(o=null,B=null),Dh(m)?Dh(x)||Dh(l)&&!G?.fill||(x="none"):!Dh(x)||Dh(o)&&!G?.stroke||(m="none");const[Z,E]=nh(l,m),[V,w]=ih(r,A),[W,H]=nh(o,x),[D,Y]=ih(B,L),[k,J]=ih(h);Yh(H)||(void 0===g&&(g=S),void 0===Q&&(Q=R),void 0===d&&(d=N),void 0!==I||/^\s*round\s*$/i.test(d)||(I=X),Yh(E)||void 0!==C||(C=v));const[M,T]=ih(g);return null!==m&&(t.fill=lb(E,"currentColor"),t.fillOpacity=rb(w,1)),null!==x&&(t.stroke=lb(H,"none"),t.strokeWidth=rb(T,1),t.strokeOpacity=rb(Y,1),t.strokeLinejoin=lb(d,"miter"),t.strokeLinecap=lb(Q,"butt"),t.strokeMiterlimit=rb(I,4),t.strokeDasharray=lb(F,"none"),t.strokeDashoffset=lb(u,"0")),t.target=Ku(a),t.ariaLabel=Ku(p),t.ariaDescription=Ku(s),t.ariaHidden=Ku(c),t.opacity=rb(J,1),t.mixBlendMode=lb(U,"normal"),t.imageFilter=lb(b,"none"),t.paintOrder=lb(C,"normal"),t.pointerEvents=lb(y,"auto"),t.shapeRendering=lb(f,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:Z,scale:"auto",optional:!0},fillOpacity:{value:V,scale:"auto",optional:!0},stroke:{value:W,scale:"auto",optional:!0},strokeOpacity:{value:D,scale:"auto",optional:!0},strokeWidth:{value:M,optional:!0},opacity:{value:k,scale:"auto",optional:!0}}}function PU(t,e){e&&t.text((t=>kU(e[t])))}function jU(t,e){e&&t.text((([t])=>kU(e[t])))}function $U(t,{target:e,tip:n},{ariaLabel:i,title:s,fill:c,fillOpacity:a,stroke:l,strokeOpacity:r,strokeWidth:o,opacity:g,href:B}){i&&cb(t,"aria-label",(t=>i[t])),c&&cb(t,"fill",(t=>c[t])),a&&cb(t,"fill-opacity",(t=>a[t])),l&&cb(t,"stroke",(t=>l[t])),r&&cb(t,"stroke-opacity",(t=>r[t])),o&&cb(t,"stroke-width",(t=>o[t])),g&&cb(t,"opacity",(t=>g[t])),B&&sb(t,(t=>B[t]),e),n||function(t,e){e&&t.filter((t=>au(e[t]))).append("title").call(PU,e)}(t,s)}function qU(t,{target:e,tip:n},{ariaLabel:i,title:s,fill:c,fillOpacity:a,stroke:l,strokeOpacity:r,strokeWidth:o,opacity:g,href:B}){i&&cb(t,"aria-label",(([t])=>i[t])),c&&cb(t,"fill",(([t])=>c[t])),a&&cb(t,"fill-opacity",(([t])=>a[t])),l&&cb(t,"stroke",(([t])=>l[t])),r&&cb(t,"stroke-opacity",(([t])=>r[t])),o&&cb(t,"stroke-width",(([t])=>o[t])),g&&cb(t,"opacity",(([t])=>g[t])),B&&sb(t,(([t])=>B[t]),e),n||function(t,e){e&&t.filter((([t])=>au(e[t]))).append("title").call(jU,e)}(t,s)}function*tb(t,e,n,i){const{z:s}=n,{z:c}=i,a=function({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:s,strokeOpacity:c,strokeWidth:a,opacity:l,href:r},{tip:o}){return[t,o?void 0:e,n,i,s,c,a,l,r].filter((t=>void 0!==t))}(i,n),l=[...e,...a];for(const e of c?function(t,e,n){const i=vt(t,(t=>e[t]));return void 0===n&&i.size>1+t.length>>1&&TU("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}(t,c,s):[t]){let t,n;t:for(const i of e){for(const t of l)if(!iu(t[i])){n&&n.push(-1);continue t}if(void 0!==t){n.push(i);for(let e=0;e<a.length;++e){if(bh(a[e][i])!==t[e]){yield n,t=a.map((t=>bh(t[i]))),n=[i];continue t}}}else n&&(yield n),t=a.map((t=>bh(t[i]))),n=[i]}n&&(yield n)}}function eb(t){return!0===t?t="frame":!1===t?t=null:null!=t&&(t=ch(t,"clip",["frame","sphere"])),t}function nb(t,e,n,i){!function(t,e,n,i){let s;const{clip:c=i.clip}=e;switch(c){case"frame":{const{width:e,height:c,marginLeft:a,marginRight:l,marginTop:r,marginBottom:o}=n,g=OU();s=`url(#${g})`,t=Ib("svg:g",i).call((t=>t.append("svg:clipPath").attr("id",g).append("rect").attr("x",a).attr("y",r).attr("width",e-l-a).attr("height",c-r-o))).each((function(){this.appendChild(t.node()),t.node=()=>this}));break}case"sphere":{const{projection:e}=i;if(!e)throw new Error('the "sphere" clip option requires a projection');const n=OU();s=`url(#${n})`,t.append("clipPath").attr("id",n).append("path").attr("d",Ar(e)({type:"Sphere"}));break}}cb(t,"aria-label",e.ariaLabel),cb(t,"aria-description",e.ariaDescription),cb(t,"aria-hidden",e.ariaHidden),cb(t,"clip-path",s)}(t,e,n,i),cb(t,"fill",e.fill),cb(t,"fill-opacity",e.fillOpacity),cb(t,"stroke",e.stroke),cb(t,"stroke-width",e.strokeWidth),cb(t,"stroke-opacity",e.strokeOpacity),cb(t,"stroke-linejoin",e.strokeLinejoin),cb(t,"stroke-linecap",e.strokeLinecap),cb(t,"stroke-miterlimit",e.strokeMiterlimit),cb(t,"stroke-dasharray",e.strokeDasharray),cb(t,"stroke-dashoffset",e.strokeDashoffset),cb(t,"shape-rendering",e.shapeRendering),cb(t,"filter",e.imageFilter),cb(t,"paint-order",e.paintOrder);const{pointerEvents:s=(!1===i.pointerSticky?"none":void 0)}=e;cb(t,"pointer-events",s)}function ib(t,e){!function(t,e,n){null!=n&&t.style(e,n)}(t,"mix-blend-mode",e.mixBlendMode),cb(t,"opacity",e.opacity)}function sb(t,e,n){t.each((function(t){const i=e(t);if(null!=i){const t=this.ownerDocument.createElementNS(ve.svg,"a");t.setAttribute("fill","inherit"),t.setAttributeNS(ve.xlink,"href",i),null!=n&&t.setAttribute("target",n),this.parentNode.insertBefore(t,this).appendChild(this)}}))}function cb(t,e,n){null!=n&&t.attr(e,n)}function ab(t,e,{x:n,y:i},s=zU,c=zU){s+=e.dx,c+=e.dy,n?.bandwidth&&(s+=n.bandwidth()/2),i?.bandwidth&&(c+=i.bandwidth()/2),(s||c)&&t.attr("transform",`translate(${s},${c})`)}function lb(t,e){if((t=Ku(t))!==e)return t}function rb(t,e){if((t=Ou(t))!==e)return t}const ob=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function gb(t){if(void 0===t)return"plot-d6a7b5";if(t=`${t}`,!ob.test(t))throw new Error(`invalid class name: ${t}`);return t}function Bb(t,e){if("string"==typeof e)t.property("style",e);else if(null!=e)for(const n of t)Object.assign(n.style,e)}function db({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:s,marginBottom:c,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-s:(a+e-s)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-c:(i+n-c)/2]}function Qb(t={}){const{document:e=("undefined"!=typeof window?window.document:void 0),clip:n}=t;return{document:e,clip:eb(n)}}function Ib(t,{document:e}){return Tn(we(t).call(e.documentElement))}const Fb=Math.PI,ub=2*Fb,hb=.618;function Ub({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:s=e,insetLeft:c=e}={},a){if(null==t)return;if("function"==typeof t.stream)return t;let l,r,o="frame";if(gh(t)){let e;if(({type:t,domain:r,inset:e,insetTop:n=(void 0!==e?e:n),insetRight:i=(void 0!==e?e:i),insetBottom:s=(void 0!==e?e:s),insetLeft:c=(void 0!==e?e:c),clip:o=o,...l}=t),null==t)return}"function"!=typeof t&&({type:t}=bb(t));const{width:g,height:B,marginLeft:d,marginRight:Q,marginTop:I,marginBottom:F}=a,u=g-d-Q-c-i,h=B-I-F-n-s;if(t=t?.({width:u,height:h,clip:o,...l}),null==t)return;o=function(t,e,n,i,s){if(!1===t||null==t||"number"==typeof t)return t=>t;!0===t&&(t="frame");if("frame"===`${t}`.toLowerCase())return bl(e,n,i,s);throw new Error(`unknown projection clip type: ${t}`)}(o,d,I,g-Q,B-F);let U,b=d+c,C=I+n;if(null!=r){const[[e,n],[i,s]]=Ar(t).bounds(r),c=Math.min(u/(i-e),h/(s-n));c>0?(b-=(c*(e+i)-u)/2,C-=(c*(n+s)-h)/2,U=xr({point(t,e){this.stream.point(t*c+b,e*c+C)}})):TU("Warning: the projection could not be fit to the specified domain; using the default scale.")}return U??=0===b&&0===C?fb():xr({point(t,e){this.stream.point(t+b,e+C)}}),{stream:e=>t.stream(U.stream(o(e)))}}function bb(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Cb(zr,.7463,.4673);case"albers":return yb(Tr,.7463,.4673);case"azimuthal-equal-area":return Cb(Pr,4,4);case"azimuthal-equidistant":return Cb($r,ub,ub);case"conic-conformal":return yb(so,ub,ub);case"conic-equal-area":return yb(Mr,6.1702,2.9781);case"conic-equidistant":return yb(ro,7.312,3.6282);case"equal-earth":return Cb(uo,5.4133,2.6347);case"equirectangular":return Cb(ao,ub,Fb);case"gnomonic":return Cb(Uo,3.4641,3.4641);case"identity":return{type:fb};case"reflect-y":return{type:Gb};case"mercator":return Cb(to,ub,ub);case"orthographic":return Cb(Co,2,2);case"stereographic":return Cb(fo,2,2);case"transverse-mercator":return Cb(po,ub,ub);default:throw new Error(`unknown projection type: ${t}`)}}function Cb(t,e,n){return{type:({width:i,height:s,rotate:c,precision:a=.15,clip:l})=>{const r=t();return null!=a&&r.precision?.(a),null!=c&&r.rotate?.(c),"number"==typeof l&&r.clipAngle?.(l),r.scale(Math.min(i/e,s/n)),r.translate([i/2,s/2]),r},aspectRatio:n/e}}function yb(t,e,n){const{type:i,aspectRatio:s}=Cb(t,e,n);return{type:t=>{const{parallels:e,domain:n,width:s,height:c}=t,a=i(t);return null!=e&&(a.parallels(e),void 0===n&&a.fitSize([s,c],{type:"Sphere"})),a},aspectRatio:s}}const fb=ju({stream:t=>t}),Gb=ju(xr({point(t,e){this.stream.point(t,-e)}}));function pb(t,e,n,i){const s=n[t],c=n[e],a=s.length,l=n[t]=new Float64Array(a).fill(NaN),r=n[e]=new Float64Array(a).fill(NaN);let o;const g=i.stream({point(t,e){l[o]=t,r[o]=e}});for(o=0;o<a;++o)g.point(s[o],c[o])}function mb({projection:t}={}){return null!=t&&("function"==typeof t.stream||(gh(t)&&(t=t.type),null!=t))}function Ab(t){const e=[],n=[],i={scale:"x",value:e},s={scale:"y",value:n},c={point(t,i){e.push(t),n.push(i)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const e of t.value)Ta(e,c);return[i,s]}const xb=new Map([["accent",Ed],["category10",Zd],["dark2",Vd],["paired",wd],["pastel1",Wd],["pastel2",Hd],["set1",Dd],["set2",Yd],["set3",kd],["tableau10",Jd]]);const Lb=new Map([...xb,["brbg",Rb(Td,zd)],["prgn",Rb(Kd,Od)],["piyg",Rb(_d,Pd)],["puor",Rb(jd,$d)],["rdbu",Rb(qd,tQ)],["rdgy",Rb(eQ,nQ)],["rdylbu",Rb(iQ,sQ)],["rdylgn",Rb(cQ,aQ)],["spectral",Rb(lQ,rQ)],["burd",Nb(qd,tQ)],["buylrd",Nb(iQ,sQ)],["blues",Sb(vQ,ZQ)],["greens",Sb(EQ,VQ)],["greys",Sb(wQ,WQ)],["oranges",Sb(JQ,MQ)],["purples",Sb(HQ,DQ)],["reds",Sb(YQ,kQ)],["turbo",Xb(eI)],["viridis",Xb(iI)],["magma",Xb(sI)],["inferno",Xb(cI)],["plasma",Xb(aI)],["cividis",Xb(TQ)],["cubehelix",Xb(zQ)],["warm",Xb(KQ)],["cool",Xb(OQ)],["bugn",Sb(oQ,gQ)],["bupu",Sb(BQ,dQ)],["gnbu",Sb(QQ,IQ)],["orrd",Sb(FQ,uQ)],["pubu",Sb(bQ,CQ)],["pubugn",Sb(hQ,UQ)],["purd",Sb(yQ,fQ)],["rdpu",Sb(GQ,pQ)],["ylgn",Sb(xQ,LQ)],["ylgnbu",Sb(mQ,AQ)],["ylorbr",Sb(SQ,RQ)],["ylorrd",Sb(NQ,XQ)],["rainbow",vb(PQ)],["sinebow",vb(tI)]]);function Sb(t,e){return({length:n})=>1===n?[t[3][1]]:2===n?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)))>9?Ts(e,n):t[n]}function Rb(t,e){return({length:n})=>2===n?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)))>11?Ts(e,n):t[n]}function Nb(t,e){return({length:n})=>2===n?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)))>11?Ts((t=>e(1-t)),n):t[n].slice().reverse()}function Xb(t){return({length:e})=>Ts(t,Math.max(2,Math.floor(e)))}function vb(t){return({length:e})=>Ts(t,Math.floor(e)+1).slice(0,-1)}function Zb(t){const e=`${t}`.toLowerCase();if(!Lb.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Lb.get(e)}function Eb(t,e){const n=Zb(t),i="function"==typeof n?n({length:e}):n;return i.length!==e?i.slice(0,e):i}const Vb=new Map([["brbg",zd],["prgn",Od],["piyg",Pd],["puor",$d],["rdbu",tQ],["rdgy",nQ],["rdylbu",sQ],["rdylgn",aQ],["spectral",rQ],["burd",t=>tQ(1-t)],["buylrd",t=>sQ(1-t)],["blues",ZQ],["greens",VQ],["greys",WQ],["purples",DQ],["reds",kQ],["oranges",MQ],["turbo",eI],["viridis",iI],["magma",sI],["inferno",cI],["plasma",aI],["cividis",TQ],["cubehelix",zQ],["warm",KQ],["cool",OQ],["bugn",gQ],["bupu",dQ],["gnbu",IQ],["orrd",uQ],["pubugn",UQ],["pubu",CQ],["purd",fQ],["rdpu",pQ],["ylgnbu",AQ],["ylgn",LQ],["ylorbr",RQ],["ylorrd",XQ],["rainbow",PQ],["sinebow",tI]]);function wb(t){const e=`${t}`.toLowerCase();if(!Vb.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Vb.get(e)}const Wb=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);const Hb=t=>e=>t(1-e),Db=[0,1],Yb=new Map([["number",As],["rgb",Cs],["hsl",Ds],["hcl",Ys],["lab",function(t,e){var n=bs((t=Pi(t)).l,(e=Pi(e)).l),i=bs(t.a,e.a),s=bs(t.b,e.b),c=bs(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=s(e),t.opacity=c(e),t+""}}]]);function kb(t){const e=`${t}`.toLowerCase();if(!Yb.has(e))throw new Error(`unknown interpolator: ${e}`);return Yb.get(e)}function Jb(t,e,n,{type:i,nice:s,clamp:c,zero:a,domain:l=Pb(t,n),unknown:r,round:o,scheme:g,interval:B,range:d=(qh.get(t)===Oh?$b(n,l):qh.get(t)===_h?qb(n,l):qh.get(t)===Ph?Db:void 0),interpolate:Q=(qh.get(t)===Kh?null==g&&void 0!==d?Cs:wb(void 0!==g?g:"cyclical"===i?"rainbow":"turbo"):o?Xs:As),reverse:I}){if(B=xh(B,i),"cyclical"!==i&&"sequential"!==i||(i="linear"),"function"!=typeof Q&&(Q=kb(Q)),I=!!I,void 0!==d){if((l=ah(l)).length!==(d=ah(d)).length){if(1===Q.length)throw new Error("invalid piecewise interpolator");Q=Ms(Q,d),d=void 0}}if(1===Q.length?(I&&(Q=Hb(Q),I=!1),void 0===d&&(d=Float64Array.from(l,((t,e)=>e/(l.length-1))),2===d.length&&(d=Db)),e.interpolate((d===Db?ju:nC)(Q))):e.interpolate(Q),a){const[t,e]=pt(l);(t>0||e<0)&&(Mh(l=rh(l))!==Math.sign(t)?l[l.length-1]=0:l[0]=0)}return I&&(l=Qe(l)),e.domain(l).unknown(r),s&&(e.nice(function(t,e){return!0===t?void 0:"number"==typeof t?t:function(t,e){if((t=xh(t,e))&&"function"!=typeof t.ceil)throw new Error("invalid interval: missing ceil method");return t}(t,e)}(s,i)),l=e.domain()),void 0!==d&&e.range(d),c&&e.clamp(c),{type:i,domain:l,range:d,scale:e,interpolate:Q,interval:B}}function Mb(t,e,{exponent:n=1,...i}){return Jb(t,rg().exponent(n),e,{...i,type:"pow"})}function Tb(t,e,{base:n=10,domain:i=tC(e),...s}){return Jb(t,qo().base(n),e,{...s,domain:i})}function zb(t,e,{constant:n=1,...i}){return Jb(t,ig().constant(n),e,i)}function Kb(t,e,{range:n,quantiles:i=(void 0===n?5:(n=[...n]).length),n:s=i,scheme:c="rdylbu",domain:a=eC(e),unknown:l,interpolate:r,reverse:o}){return void 0===n&&(n=void 0!==r?Ts(r,s):qh.get(t)===Kh?Eb(c,s):void 0),a.length>0&&(a=og(a,void 0===n?{length:s}:n).quantiles()),Ob(t,e,{domain:a,range:n,reverse:o,unknown:l})}function Ob(t,e,{domain:n=[0],unknown:i,scheme:s="rdylbu",interpolate:c,range:a=(void 0!==c?Ts(c,n.length+1):qh.get(t)===Kh?Eb(s,n.length+1):void 0),reverse:l}){const r=Mh(n=ah(n));if(!isNaN(r)&&!function(t,e){for(let n=1,i=t.length,s=t[0];n<i;++n){const i=Bt(s,s=t[n]);if(0!==i&&i!==e)return!1}return!0}(n,r))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=Qe(a)),{type:"threshold",scale:gg(r<0?Qe(n):n,void 0===a?[]:a).unknown(i),domain:n,range:a}}function _b(t,e=lu){return t.length?[jt(t,(({value:t})=>void 0===t?t:jt(t,e))),_t(t,(({value:t})=>void 0===t?t:_t(t,e)))]:[0,1]}function Pb(t,e){const n=qh.get(t);return(n===Oh||n===Ph||n===_h?jb:_b)(e)}function jb(t){return[0,t.length?_t(t,(({value:t})=>void 0===t?t:_t(t,lu))):1]}function $b(t,e){const n=t.find((({radius:t})=>void 0!==t));if(void 0!==n)return[0,n.radius];const i=ne(t,.5,(({value:t})=>void 0===t?NaN:ne(t,.25,ru))),s=e.map((t=>3*Math.sqrt(t/i))),c=30/_t(s);return c<1?s.map((t=>t*c)):s}function qb(t,e){const n=le(t,(({value:t})=>void 0===t?NaN:le(t,Math.abs))),i=e.map((t=>12*t/n)),s=60/_t(i);return s<1?i.map((t=>t*s)):i}function tC(t){for(const{value:e}of t)if(void 0!==e)for(let n of e){if(n>0)return _b(t,ru);if(n<0)return _b(t,ou)}return[1,10]}function eC(t){const e=[];for(const{value:n}of t)if(void 0!==n)for(const t of n)e.push(t);return e}function nC(t){return(e,n)=>i=>t(e+i*(n-e))}function iC(t,e,n,i,{type:s,nice:c,clamp:a,domain:l=_b(i),unknown:r,pivot:o=0,scheme:g,range:B,symmetric:d=!0,interpolate:Q=(qh.get(t)===Kh?null==g&&void 0!==B?Cs:wb(void 0!==g?g:"rdbu"):As),reverse:I}){o=+o,l=ah(l);let[F,u]=l;if(l.length>2&&TU(`Warning: the diverging ${t} scale domain contains extra elements.`),Bt(F,u)<0&&([F,u]=[u,F],I=!I),F=Math.min(F,o),u=Math.max(u,o),"function"!=typeof Q&&(Q=kb(Q)),void 0!==B&&(Q=1===Q.length?nC(Q)(...B):Ms(Q,B)),I&&(Q=Hb(Q)),d){const t=n.apply(o),e=t-n.apply(F),i=n.apply(u)-t;e<i?F=n.invert(t-i):e>i&&(u=n.invert(t+e))}return e.domain([F,o,u]).unknown(r).interpolator(Q),a&&e.clamp(a),c&&e.nice(c),{type:s,domain:[F,u],pivot:o,interpolate:Q,scale:e}}function sC(t,e,n){return iC(t,Sd(),rC,e,n)}function cC(t,e,{exponent:n=1,...i}){return iC(t,Xd().exponent(n=+n),function(t){return.5===t?gC:{apply:e=>Math.sign(e)*Math.pow(Math.abs(e),t),invert:e=>Math.sign(e)*Math.pow(Math.abs(e),1/t)}}(n),e,{...i,type:"diverging-pow"})}function aC(t,e,{base:n=10,pivot:i=1,domain:s=_b(e,i<0?ou:ru),...c}){return iC(t,Rd().base(n=+n),oC,e,{domain:s,pivot:i,...c})}function lC(t,e,{constant:n=1,...i}){return iC(t,Nd().constant(n=+n),function(t){return{apply:e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),invert:e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}}(n),e,i)}const rC={apply:t=>t,invert:t=>t},oC={apply:Math.log,invert:Math.exp},gC={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function BC(t,e,n,i){return Jb(t,e,n,i)}function dC(t,e,n){return BC(t,function(){return mo.apply(Ad(qg,tB,Og,zg,Ng,xg,mg,Gg,fg,cB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),e,n)}function QC(t,e,n){return BC(t,function(){return mo.apply(Ad(jg,$g,_g,Kg,Hg,Lg,Ag,pg,fg,aB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}(),e,n)}const IC=Symbol("ordinal");function FC(t,e,n,{type:i,interval:s,domain:c,range:a,reverse:l,hint:r}){return s=xh(s,i),void 0===c&&(c=UC(n,s,t)),"categorical"!==i&&i!==IC||(i="ordinal"),l&&(c=Qe(c)),c=e.domain(c).domain(),void 0!==a&&("function"==typeof a&&(a=a(c)),e.range(a)),{type:i,domain:c,range:a,scale:e,hint:r,interval:s}}function uC(t,e,{type:n,interval:i,domain:s,range:c,scheme:a,unknown:l,...r}){let o;if(i=xh(i,n),void 0===s&&(s=UC(e,i,t)),qh.get(t)===jh)o=function(t){return{fill:bC(t,"fill"),stroke:bC(t,"stroke")}}(e),c=void 0===c?function(t){return Dh(t.fill)?zI:TI}(o):lh(c,sU);else if(qh.get(t)===Kh&&(void 0!==c||"ordinal"!==n&&n!==IC||(c=function(t,e="greys"){const n=new Set,[i,s]=Eb(e,2);for(const e of t)if(null!=e)if(!0===e)n.add(s);else{if(!1!==e)return;n.add(i)}return[...n]}(s,a),void 0!==c&&(a=void 0)),void 0===a&&void 0===c&&(a="ordinal"===n?"turbo":"tableau10"),void 0!==a))if(void 0!==c){const t=wb(a),e=c[0],n=c[1]-c[0];c=({length:i})=>Ts((i=>t(e+n*i)),i)}else c=Zb(a);if(l===xo)throw new Error(`implicit unknown on ${t} scale is not supported`);return FC(t,Lo().unknown(l),e,{...r,type:n,domain:s,range:c,hint:o})}function hC(t,e,n,i){let{round:s}=n;return void 0!==s&&t.round(s=!!s),(t=FC(i,t,e,n)).round=s,t}function UC(t,e,n){const i=new xt;for(const{value:e,domain:n}of t){if(void 0!==n)return n();if(void 0!==e)for(const t of e)i.add(t)}if(void 0!==e){const[t,n]=pt(i).map(e.floor,e);return e.range(t,e.offset(n))}if(i.size>1e4&&qh.get(n)===zh)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return wt(i,su)}function bC(t,e){let n;for(const{hint:i}of t){const t=i?.[e];if(void 0!==t)if(void 0===n)n=t;else if(n!==t)return}return n}function CC(t,{label:e,inset:n=0,insetTop:i=n,insetRight:s=n,insetBottom:c=n,insetLeft:a=n,round:l,nice:r,clamp:o,zero:g,align:B,padding:d,projection:Q,facet:{label:I=e}={},...F}={}){const u={};for(const[n,h]of t){const t=F[n],U=SC(n,h,{round:qh.get(n)===zh?l:void 0,nice:r,clamp:o,zero:g,align:B,padding:d,projection:Q,...t});if(U){let{label:l=("fx"===n||"fy"===n?I:e),percent:r,transform:o,inset:g,insetTop:B=(void 0!==g?g:"y"===n?i:0),insetRight:d=(void 0!==g?g:"x"===n?s:0),insetBottom:Q=(void 0!==g?g:"y"===n?c:0),insetLeft:F=(void 0!==g?g:"x"===n?a:0)}=t||{};if(null==o)o=void 0;else if("function"!=typeof o)throw new Error("invalid scale transform; not a function");U.percent=!!r,U.label=void 0===l?fC(h,U):l,U.transform=o,"x"===n||"fx"===n?(U.insetLeft=+F,U.insetRight=+d):"y"!==n&&"fy"!==n||(U.insetTop=+B,U.insetBottom=+Q),u[n]=U}}return u}function yC(t){const e={},n={scales:e};for(const[i,s]of Object.entries(t)){const{scale:t,type:c,interval:a,label:l}=s;e[i]=WC(s),n[i]=t,t.type=c,null!=a&&(t.interval=a),null!=l&&(t.label=l)}return n}function fC(t=[],e){let n;for(const{label:e}of t)if(void 0!==e)if(void 0===n)n=e;else if(n!==e)return;if(void 0!==n)return!vC(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function GC(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:s,width:c,height:a,facet:{marginTop:l,marginRight:r,marginBottom:o,marginLeft:g}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,r),marginBottom:Math.max(i,o),marginLeft:Math.max(s,g),width:c,height:a}}function pC({fx:t,fy:e},n){const{marginTop:i,marginRight:s,marginBottom:c,marginLeft:a,width:l,height:r}=GC(n);return{marginTop:i,marginRight:s,marginBottom:c,marginLeft:a,width:t?t.scale.bandwidth()+a+s:l,height:e?e.scale.bandwidth()+i+c:r,facet:{width:l,height:r}}}function mC(t,e){if(void 0===t.range){const{insetLeft:n,insetRight:i}=t,{width:s,marginLeft:c=0,marginRight:a=0}=e,l=c+n,r=s-a-i;t.range=[l,Math.max(l,r)],vC(t)||(t.range=LC(t)),t.scale.range(t.range)}xC(t)}function AC(t,e){if(void 0===t.range){const{insetTop:n,insetBottom:i}=t,{height:s,marginTop:c=0,marginBottom:a=0}=e,l=c+n,r=s-a-i;t.range=[Math.max(l,r),l],vC(t)?t.range.reverse():t.range=LC(t),t.scale.range(t.range)}xC(t)}function xC(t){void 0===t.round&&function({type:t}){return"point"===t||"band"===t}(t)&&function({scale:t}){const e=t.domain().length,[n,i]=t.range(),s=t.paddingInner?t.paddingInner():1,c=t.paddingOuter?t.paddingOuter():t.padding(),a=e-s,l=Math.abs(i-n)/Math.max(1,a+2*c);return(l-Math.floor(l))*a}(t)<=30&&t.scale.round(!0)}function LC(t){const e=t.scale.domain().length+ZC(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},((t,s)=>n+s/(e-1)*(i-n)))}function SC(t,e=[],n={}){const i=function(t,e,{type:n,domain:i,range:s,scheme:c,pivot:a,projection:l}){if("fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==l||(n=NC);for(const{type:t}of e)if(void 0!==t)if(void 0===n)n=t;else if(n!==t)throw new Error(`scale incompatible with channel: ${n} !== ${t}`);if(n===NC)return;if(void 0!==n)return n;if(void 0===i&&!e.some((({value:t})=>void 0!==t)))return;const r=qh.get(t);if(r===Oh)return"sqrt";if(r===Ph||r===_h)return"linear";if(r===jh)return"ordinal";if((i||s||[]).length>2)return XC(r);if(void 0!==i){if(Xh(i))return XC(r);if(vh(i))return"utc"}else{const t=e.map((({value:t})=>t)).filter((t=>void 0!==t));if(t.some(Xh))return XC(r);if(t.some(vh))return"utc"}if(r===Kh){if(null!=a||function(t){return null!=t&&Wb.has(`${t}`.toLowerCase())}(c))return"diverging";if(function(t){return null!=t&&xb.has(`${t}`.toLowerCase())}(c))return"categorical"}return"linear"}(t,e,n);if(void 0===n.type&&void 0===n.domain&&void 0===n.range&&null==n.interval&&"fx"!==t&&"fy"!==t&&vC({type:i})){const n=e.map((({value:t})=>t)).filter((t=>void 0!==t));n.some(vh)?TU(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${RC(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${RC(i)}".`):n.some(Zh)?TU(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${RC(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${RC(i)}".`):n.some(Eh)&&TU(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${RC(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${RC(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=VC(e,n,$u);break;case"identity":switch(qh.get(t)){case zh:n=VC(e,n,$u);break;case jh:n=VC(e,n,wC)}break;case"utc":case"time":n=VC(e,n,th)}switch(i){case"diverging":return sC(t,e,n);case"diverging-sqrt":return function(t,e,n){return cC(t,e,{...n,exponent:.5})}(t,e,n);case"diverging-pow":return cC(t,e,n);case"diverging-log":return aC(t,e,n);case"diverging-symlog":return lC(t,e,n);case"categorical":case"ordinal":case IC:return uC(t,e,n);case"cyclical":case"sequential":case"linear":return function(t,e,n){return Jb(t,Jo(),e,n)}(t,e,n);case"sqrt":return function(t,e,n){return Mb(t,e,{...n,exponent:.5})}(t,e,n);case"threshold":return Ob(t,0,n);case"quantile":return Kb(t,e,n);case"quantize":return function(t,e,{range:n,n:i=(void 0===n?5:(n=[...n]).length),scheme:s="rdylbu",domain:c=Pb(t,e),unknown:a,interpolate:l,reverse:r}){const[o,g]=pt(c);let B;return void 0===n?(B=Tt(o,g,i),B[0]<=o&&B.splice(0,1),B[B.length-1]>=g&&B.pop(),i=B.length+1,n=void 0!==l?Ts(l,i):qh.get(t)===Kh?Eb(s,i):void 0):(B=Ts(As(o,g),i+1).slice(1,-1),o instanceof Date&&(B=B.map((t=>new Date(t))))),Mh(ah(c))<0&&B.reverse(),Ob(t,0,{domain:B,range:n,reverse:r,unknown:a})}(t,e,n);case"pow":return Mb(t,e,n);case"log":return Tb(t,e,n);case"symlog":return zb(t,e,n);case"utc":return QC(t,e,n);case"time":return dC(t,e,n);case"point":return function(t,e,{align:n=.5,padding:i=.5,...s}){return hC(No().align(n).padding(i),e,s,t)}(t,e,n);case"band":return function(t,e,{align:n=.5,padding:i=.1,paddingInner:s=i,paddingOuter:c=("fx"===t||"fy"===t?0:i),...a}){return hC(So().align(n).paddingInner(s).paddingOuter(c),e,a,t)}(t,e,n);case"identity":return function(t){return{type:"identity",scale:(e=qh.get(t),e===zh||e===Oh||e===_h||e===Ph?Mo():t=>t)};var e}(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function RC(t){return"symbol"==typeof t?t.description:t}const NC={toString:()=>"projection"};function XC(t){switch(t){case zh:return"point";case Kh:return IC;default:return"ordinal"}}function vC({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===IC}function ZC({type:t}){return"threshold"===t}function EC(t){if(void 0===t)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,s=e.length;i<s;++i)if(t(e[i])-n)return!1;return!0}function VC(t,{domain:e,...n},i){for(const e of t)void 0!==e.value&&(e.value=i(e.value));return{domain:void 0===e?e:i(e),...n}}function wC(t){return lh(t,sU)}function WC({scale:t,type:e,domain:n,range:i,interpolate:s,interval:c,transform:a,percent:l,pivot:r}){if("identity"===e)return{type:"identity",apply:t=>t,invert:t=>t};const o=t.unknown?t.unknown():void 0;return{type:e,domain:rh(n),...void 0!==i&&{range:rh(i)},...void 0!==a&&{transform:a},...l&&{percent:l},...void 0!==o&&{unknown:o},...void 0!==c&&{interval:c},...void 0!==s&&{interpolate:s},...t.clamp&&{clamp:t.clamp()},...void 0!==r&&{pivot:r,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:e=>t(e),...t.invert&&{invert:e=>t.invert(e)}}}function HC({x:t,y:e,fy:n,fx:i},{projection:s,aspectRatio:c},{width:a,marginTopDefault:l,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:g}){const B=n?n.scale.domain().length:1,d=function(t){if("function"==typeof t?.stream)return hb;if(gh(t)&&(t=t.type),null!=t){if("function"!=typeof t){const{aspectRatio:e}=bb(t);if(e)return e}return hb}}(s);if(d){const t=(1.1*B-.1)/(1.1*(i?i.scale.domain().length:1)-.1)*d,e=Math.max(.1,Math.min(10,t));return Math.round((a-g-r)*e+l+o)}const Q=e?vC(e)?e.scale.domain().length:Math.max(7,17/B):1;if(null!=c){if(c=+c,!(isFinite(c)&&c>0))throw new Error(`invalid aspectRatio: ${c}`);const s=DC("y",e)/(DC("x",t)*c),B=i?i.scale.bandwidth():1,d=n?n.scale.bandwidth():1;return(s*(B*(a-g-r)-t.insetLeft-t.insetRight)+e.insetTop+e.insetBottom)/d+l+o}return!(!e&&!n)*Math.max(1,Math.min(60,Q*B))*20+30*!!i+60}function DC(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let s;switch(n){case"linear":case"utc":case"time":s=Number;break;case"pow":{const t=e.scale.exponent();s=e=>Math.pow(e,t);break}case"log":s=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[c,a]=pt(i);return Math.abs(s(a)-s(c))}function YC(t,e){const{fx:n,fy:i}=CC(t,e),s=n?.scale.domain(),c=i?.scale.domain();return s&&c?function(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(Ct)).map(Ut),i=t.length-1,s=new Array(i+1).fill(0),c=[];if(i<0||n.some(bt))return c;for(;;){c.push(s.map(((e,n)=>t[n][e])));let a=i;for(;++s[a]===n[a];){if(0===a)return e?c.map(e):c;s[a--]=0}}}(s,c).map((([t,e],n)=>({x:t,y:e,i:n}))):s?s.map(((t,e)=>({x:t,i:e}))):c?c.map(((t,e)=>({y:t,i:e}))):void 0}function kC(t,{fx:e,fy:n}){const i=uh(t),s=e?.value,c=n?.value;return e&&n?Zt(i,(t=>(t.fx=s[t[0]],t.fy=c[t[0]],t)),(t=>s[t]),(t=>c[t])):e?Zt(i,(t=>(t.fx=s[t[0]],t)),(t=>s[t])):Zt(i,(t=>(t.fy=c[t[0]],t)),(t=>c[t]))}function JC(t){const e=[],n=new Uint32Array(de(t,(t=>t.length)));for(const i of t){let s=0;for(const e of t)i!==e&&(n.set(e,s),s+=e.length);e.push(n.slice(0,s))}return e}const MC=new Map([["top",_C],["right",$C],["bottom",PC],["left",jC],["top-left",qC(_C,jC)],["top-right",qC(_C,$C)],["bottom-left",qC(PC,jC)],["bottom-right",qC(PC,$C)],["top-empty",function(t,{y:e},{x:n,y:i,empty:s}){if(s)return!1;if(!e)return;const c=KC(e,i);if(c>0)return OC(t,n,e[c-1])}],["right-empty",function(t,{x:e},{x:n,y:i,empty:s}){if(s)return!1;if(!e)return;const c=KC(e,n);if(c<e.length-1)return OC(t,e[c+1],i)}],["bottom-empty",function(t,{y:e},{x:n,y:i,empty:s}){if(s)return!1;if(!e)return;const c=KC(e,i);if(c<e.length-1)return OC(t,n,e[c+1])}],["left-empty",function(t,{x:e},{x:n,y:i,empty:s}){if(s)return!1;if(!e)return;const c=KC(e,n);if(c>0)return OC(t,e[c-1],i)}],["empty",function(t,e,{empty:n}){return n}]]);const TC=new WeakMap;function zC(t){let e=TC.get(t);return e||TC.set(t,e=new At(lh(t,((t,e)=>[t,e])))),e}function KC(t,e){return zC(t).get(e)}function OC(t,e,n){return function(t,e,n){return e=bh(e),n=bh(n),t.find((t=>Object.is(bh(t.x),e)&&Object.is(bh(t.y),n)))}(t,e,n)?.empty}function _C(t,{y:e},{y:n}){return!e||0===KC(e,n)}function PC(t,{y:e},{y:n}){return!e||KC(e,n)===e.length-1}function jC(t,{x:e},{x:n}){return!e||0===KC(e,n)}function $C(t,{x:e},{x:n}){return!e||KC(e,n)===e.length-1}function qC(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function ty(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map((({x:t,y:e})=>i.get(t)?.get(e)??[])):e?t.map((({x:t})=>i.get(t)??[])):t.map((({y:t})=>i.get(t)??[]))}class ey{constructor(t,e={},n={},i){const{facet:s="auto",facetAnchor:c,fx:a,fy:l,sort:r,dx:o=0,dy:g=0,margin:B=0,marginTop:d=B,marginRight:Q=B,marginBottom:I=B,marginLeft:F=B,clip:u=i?.clip,channels:h,tip:U,render:b}=n;if(this.data=t,this.sort=Qh(r)?r:null,this.initializer=aU(n).initializer,this.transform=this.initializer?n.transform:cU(n).transform,null===s||!1===s?this.facet=null:(this.facet=ch(!0===s?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===Yu&&"string"==typeof a?[a]:a,this.fy=t===Yu&&"string"==typeof l?[l]:l),this.facetAnchor=function(t){if(null==t)return null;const e=MC.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}(c),e=Th(e),void 0!==h&&(e={...sy(h),...e}),void 0!==i&&(e={..._U(this,n,i),...e}),this.channels=Object.fromEntries(Object.entries(e).map((([e,n])=>{if(dh(n.value)){const{value:t,label:e=n.label,scale:i=n.scale}=n.value;n={...n,label:e,scale:i,value:t}}if(t===Yu&&"string"==typeof n.value){const{value:t}=n;n={...n,value:[t]}}return[e,n]})).filter((([t,{value:e,optional:n}])=>{if(null!=e)return!0;if(n)return!1;throw new Error(`missing channel value: ${t}`)}))),this.dx=+o,this.dy=+g,this.marginTop=+d,this.marginRight=+Q,this.marginBottom=+I,this.marginLeft=+F,this.clip=eb(u),this.tip=function(t){return!0===t?"xy":!1===t||null==t?null:"string"==typeof t?ch(t,"tip",["x","y","xy"]):t}(U),"super"===this.facet){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const t in this.channels){const{scale:n}=e[t];if("x"===n||"y"===n)throw new Error("super-faceting cannot use x or y")}}null!=b&&(this.render=iy(b,this.render))}initialize(t,e,n){let i=ah(this.data);void 0===t&&null!=i&&(t=[uh(i)]);const s=t;null!=this.transform&&(({facets:t,data:i}=this.transform(i,t,n)),i=ah(i)),void 0!==t&&(t.original=s);const c=function(t,e){return Object.fromEntries(Object.entries(t).map((([t,n])=>[t,RU(e,n,t)])))}(this.channels,i);return null!=this.sort&&function(t,e,n,i,s){const{order:c,reverse:a,reduce:l=!0,limit:r}=s;for(const o in s){if(!qh.has(o))continue;let{value:g,order:B=c,reverse:d=a,reduce:Q=l,limit:I=r}=Sh(s[o]);const F=g?.startsWith("-");if(F&&(g=g.slice(1)),B=void 0===B?F!==("width"===g||"height"===g)?WU:wU:VU(B),null==Q||!1===Q)continue;const u="fx"===o||"fy"===o?vU(e,i[o]):XU(n,o);if(!u)throw new Error(`missing channel for scale: ${o}`);const h=u.value,[U=0,b=1/0]=Rh(I)?I:I<0?[I]:[0,I];if(null==g)u.domain=()=>{let t=Array.from(new xt(h));return d&&(t=t.reverse()),0===U&&b===1/0||(t=t.slice(U,b)),t};else{const e="data"===g?t:"height"===g?ZU(n,"y1","y2"):"width"===g?ZU(n,"x1","x2"):EU(n,g,"y"===g?"y2":"x"===g?"x2":void 0),i=UU(!0===Q?"max":Q,e);u.domain=()=>{let t=Et(uh(h),(t=>i.reduceIndex(t,e)),(t=>h[t]));return B&&t.sort(B),d&&t.reverse(),0===U&&b===1/0||(t=t.slice(U,b)),t.map(_u)}}}}(i,t,c,e,this.sort),{data:i,facets:t,channels:c}}filter(t,e,n){for(const i in e){const{filter:s=iu}=e[i];if(null!==s){const e=n[i];t=t.filter((t=>s(e[t])))}}return t}project(t,e,n){for(const i in t)if("x"===t[i].scale&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&"y"===t[s].scale&&pb(i,s,e,n.projection)}}scale(t,e,n){const i=function(t,e){const n=Object.fromEntries(Object.entries(t).map((([t,{scale:n,value:i}])=>{const s=null==n?null:e[n];return[t,null==s?i:lh(i,s)]})));return n.channels=t,n}(t,e);return n.projection&&this.project(t,i,n),i}}function ny(...t){return t.plot=ey.prototype.plot,t}function iy(t,e){if(null==t)return null===e?void 0:e;if(null==e)return null===t?void 0:t;if("function"!=typeof t)throw new TypeError(`invalid render transform: ${t}`);if("function"!=typeof e)throw new TypeError(`invalid render transform: ${e}`);return function(n,i,s,c,a,l){return t.call(this,n,i,s,c,a,((t,n,i,s,c)=>e.call(this,t,n,i,s,c,l)))}}function sy(t){return Object.fromEntries(Object.entries(Th(t)).map((([t,e])=>(void 0===(e="string"==typeof e?{value:e,label:t}:Sh(e)).filter&&null==e.scale&&(e={...e,filter:null}),[t,e]))))}function cy(t,e){return!0===t?.tip?{...t,tip:e}:gh(t?.tip)&&void 0===t.tip.pointer?{...t,tip:{...t.tip,pointer:e}}:t}const ay=new WeakMap;function ly(t,e,{x:n,y:i,px:s,py:c,maxRadius:a=40,channels:l,render:r,...o}={}){return a=+a,null!=s&&(n??=null,l={...l,px:{value:s,scale:"x"}}),null!=c&&(i??=null,l={...l,py:{value:c,scale:"y"}}),{x:n,y:i,channels:l,...o,render:iy((function(n,i,s,c,l,r){const o=(l={...l,pointerSticky:!1}).ownerSVGElement,{data:g}=l.getMarkState(this);let B=ay.get(o);B||ay.set(o,B={sticky:!1,roots:[],renders:[]});let d=B.renders.push(X)-1;const{x:Q,y:I,fx:F,fy:u}=i;let h=F?F(n.fx)-c.marginLeft:0,U=u?u(n.fy)-c.marginTop:0;Q?.bandwidth&&(h+=Q.bandwidth()/2),I?.bandwidth&&(U+=I.bandwidth()/2);const b=null!=n.fi;let C;if(b){let t=B.facetStates;t||(B.facetStates=t=new Map),C=t.get(this),C||t.set(this,C=new Map)}const[y,f]=db(this,c),{px:G,py:p}=s,m=G?t=>G[t]:By(s,y),A=p?t=>p[t]:dy(s,f);let x,L,S,R;function N(t,e){if(b){if(R&&(R=cancelAnimationFrame(R)),null!=t)return C.set(n.fi,e),void(R=requestAnimationFrame((()=>{R=null;for(const[i,s]of C)if(s<e||s===e&&i<n.fi){t=null;break}X(t)})));C.delete(n.fi)}X(t)}function X(t){if(x===t&&S===B.sticky)return;x=t,S=l.pointerSticky=B.sticky;const e=null==x?[]:[x];b&&(e.fx=n.fx,e.fy=n.fy,e.fi=n.fi);const a=r(e,i,s,c,l);if(L){if(b){const t=L.parentNode,e=L.getAttribute("transform"),n=a.getAttribute("transform");e?a.setAttribute("transform",e):a.removeAttribute("transform"),n?t.setAttribute("transform",n):t.removeAttribute("transform"),a.removeAttribute("aria-label"),a.removeAttribute("aria-description"),a.removeAttribute("aria-hidden")}L.replaceWith(a)}return B.roots[d]=L=a,null==x&&C?.size>1||l.dispatchValue(null==x?null:g[x]),a}function v(i){if(B.sticky||"mouse"===i.pointerType&&1===i.buttons)return;let[s,l]=zn(i);s-=h,l-=U;const r=s<c.marginLeft||s>c.width-c.marginRight?1:t,o=l<c.marginTop||l>c.height-c.marginBottom?1:e;let g=null,d=a*a;for(const t of n){const e=r*(m(t)-s),n=o*(A(t)-l),i=e*e+n*n;i<=d&&(g=t,d=i)}if(null!=g&&(1!==t||1!==e)){const t=m(g)-s,e=A(g)-l;d=t*t+e*e}N(g,d)}return o.addEventListener("pointerenter",v),o.addEventListener("pointermove",v),o.addEventListener("pointerdown",(function(t){"mouse"===t.pointerType&&null!=x&&(B.sticky&&B.roots.some((e=>e?.contains(t.target)))||(B.sticky?(B.sticky=!1,B.renders.forEach((t=>t(null)))):(B.sticky=!0,X(x)),t.stopImmediatePropagation()))})),o.addEventListener("pointerleave",(function(t){"mouse"===t.pointerType&&(B.sticky||N(null))})),X(null)}),r)}}function ry(t){return ly(1,1,t)}function oy(t){return ly(1,.01,t)}function gy(t){return ly(.01,1,t)}function By({x1:t,x2:e,x:n=t},i){return t&&e?n=>(t[n]+e[n])/2:n?t=>n[t]:()=>i}function dy({y1:t,y2:e,y:n=t},i){return t&&e?n=>(t[n]+e[n])/2:n?t=>n[t]:()=>i}function Qy(t){return vC(t)&&void 0===t.interval?void 0:"tabular-nums"}const Iy=Math.PI/180;function Fy(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:s=e}={}){t.markerStart=uy(n),t.markerMid=uy(i),t.markerEnd=uy(s)}function uy(t){if(null==t||!1===t)return null;if(!0===t)return by;if("function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return hy("auto");case"arrow-reverse":return hy("auto-start-reverse");case"dot":return Uy;case"circle":case"circle-fill":return by;case"circle-stroke":return Cy}throw new Error(`invalid marker: ${t}`)}function hy(t){return(e,n)=>Ib("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call((t=>t.append("path").attr("d","M-1.5,-3l3,3l-3,3"))).node()}function Uy(t,e){return Ib("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call((t=>t.append("circle").attr("r",2.5))).node()}function by(t,e){return Ib("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call((t=>t.append("circle").attr("r",3))).node()}function Cy(t,e){return Ib("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call((t=>t.append("circle").attr("r",3))).node()}let yy=0;function fy(t,e,{stroke:n},i){return py(t,e,n&&(t=>n[t]),i)}function Gy(t,e,{stroke:n},i){return py(t,e,n&&(([t])=>n[t]),i)}function py(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:s},c=(()=>s),a){const l=new Map;function r(t){return function(e){const n=c(e);let i=l.get(t);i||l.set(t,i=new Map);let s=i.get(n);if(!s){const e=this.parentNode.insertBefore(t(n,a),this),c="plot-marker-"+ ++yy;e.setAttribute("id",c),i.set(n,s=`url(#${c})`)}return s}}e&&t.attr("marker-start",r(e)),n&&t.attr("marker-mid",r(n)),i&&t.attr("marker-end",r(i))}function my({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=xy(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function Ay({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=xy(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function xy(t,e,n){return void 0===t&&void 0===e&&void 0===n?zU?[1,0]:[.5,.5]:[e,n]}function Ly(t,{interval:e}){return(t={...Sh(t)}).interval=Ah(void 0===t.interval?e:t.interval),t}function Sy(t,e,n,i){const{[t]:s,[`${t}1`]:c,[`${t}2`]:a}=n,{value:l,interval:r}=Ly(s,n);if(null==l||null==r&&!i)return n;const o=fh(s);if(null==r){let e;const i={transform:t=>e||(e=Wu(t,l)),label:o};return{...n,[t]:void 0,[`${t}1`]:void 0===c?i:c,[`${t}2`]:void 0===a?i:a}}let g,B;function d(t){return void 0!==B&&t===g?B:B=lh(Wu(g=t,l),(t=>r.floor(t)))}return e({...n,[t]:void 0,[`${t}1`]:void 0===c?{transform:d,label:o}:c,[`${t}2`]:void 0===a?{transform:t=>d(t).map((t=>r.offset(t))),label:o}:a})}function Ry(t,e,n){const{[t]:i}=n,{value:s,interval:c}=Ly(i,n);return null==s||null==c?n:e({...n,[t]:{label:fh(i),transform:t=>{const e=lh(Wu(t,s),(t=>c.floor(t))),n=e.map((t=>c.offset(t)));return e.map(vh(e)?(t,e)=>null==t||isNaN(t=+t)||null==(e=n[e])||isNaN(e=+e)?void 0:new Date((t+e)/2):(t,e)=>null==t||null==(e=n[e])?NaN:(+t+ +e)/2)}}})}const Ny={ariaLabel:"rule",fill:null,stroke:"currentColor"};class Xy extends ey{constructor(t,e={}){const{x:n,y1:i,y2:s,inset:c=0,insetTop:a=c,insetBottom:l=c}=e;super(t,{x:{value:n,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},cy(e,"x"),Ny),this.insetTop=Ou(a),this.insetBottom=Ou(l),Fy(this,e)}render(t,e,n,i,s){const{x:c,y:a}=e,{x:l,y1:r,y2:o}=n,{width:g,height:B,marginTop:d,marginRight:Q,marginLeft:I,marginBottom:F}=i,{insetTop:u,insetBottom:h}=this;return Ib("svg:g",s).call(nb,this,i,s).call(ab,this,{x:l&&c},zU,0).call((e=>e.selectAll().data(t).enter().append("line").call(ib,this).attr("x1",l?t=>l[t]:(I+g-Q)/2).attr("x2",l?t=>l[t]:(I+g-Q)/2).attr("y1",r&&!EC(a)?t=>r[t]+u:d+u).attr("y2",o&&!EC(a)?a.bandwidth?t=>o[t]+a.bandwidth()-h:t=>o[t]-h:B-F-h).call($U,this,n).call(fy,this,n,s))).node()}}class vy extends ey{constructor(t,e={}){const{x1:n,x2:i,y:s,inset:c=0,insetRight:a=c,insetLeft:l=c}=e;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:n,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},cy(e,"y"),Ny),this.insetRight=Ou(a),this.insetLeft=Ou(l),Fy(this,e)}render(t,e,n,i,s){const{x:c,y:a}=e,{y:l,x1:r,x2:o}=n,{width:g,height:B,marginTop:d,marginRight:Q,marginLeft:I,marginBottom:F}=i,{insetLeft:u,insetRight:h}=this;return Ib("svg:g",s).call(nb,this,i,s).call(ab,this,{y:l&&a},0,zU).call((e=>e.selectAll().data(t).enter().append("line").call(ib,this).attr("x1",r&&!EC(c)?t=>r[t]+u:I+u).attr("x2",o&&!EC(c)?c.bandwidth?t=>o[t]+c.bandwidth()-h:t=>o[t]-h:g-Q-h).attr("y1",l?t=>l[t]:(d+B-F)/2).attr("y2",l?t=>l[t]:(d+B-F)/2).call($U,this,n).call(fy,this,n,s))).node()}}function Zy(t,e){let{x:n=Mu,y:i,y1:s,y2:c,...a}=function(t={}){return Sy("y",Ay,t)}(e);return[s,c]=Vy(i,s,c),new Xy(t,{...a,x:n,y1:s,y2:c})}function Ey(t,e){let{y:n=Mu,x:i,x1:s,x2:c,...a}=function(t={}){return Sy("x",my,t)}(e);return[s,c]=Vy(i,s,c),new vy(t,{...a,y:n,x1:s,x2:c})}function Vy(t,e,n){if(null==t){if(void 0===e){if(void 0!==n)return[0,n]}else if(void 0===n)return[0,e]}else{if(void 0===e)return void 0===n?[0,t]:[t,n];if(void 0===n)return[t,e]}return[e,n]}function wy(t,...e){let n=e.length;for(let i=0,s=!0;i<n;++i)"function"!=typeof e[i]&&(s&&(t=t.slice(),s=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let s=t[0];for(let c=0;c<n;++c)s+=e[c](i)+t[c+1];return s}}const Wy={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Hy="";class Dy extends ey{constructor(t,e={}){const{x:n,y:i,text:s=(Rh(t)&&Nh(t)?Mu:Ju),frameAnchor:c,textAnchor:a=(/right$/i.test(c)?"end":/left$/i.test(c)?"start":"middle"),lineAnchor:l=(/^top/i.test(c)?"top":/^bottom/i.test(c)?"bottom":"middle"),lineHeight:r=1,lineWidth:o=1/0,textOverflow:g,monospace:B,fontFamily:d=(B?"ui-monospace, monospace":void 0),fontSize:Q,fontStyle:I,fontVariant:F,fontWeight:u,rotate:h}=e,[U,b]=ih(h,0),[C,y]=function(t){return null==t||"number"==typeof t?[void 0,t]:"string"!=typeof t?[t,void 0]:(t=t.trim().toLowerCase(),Ky.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}(Q);var f;if(super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:C,optional:!0},rotate:{value:(f=U,null==f?null:{transform:t=>Wu(t,f,Float64Array),label:fh(f)}),optional:!0},text:{value:s,filter:au,optional:!0}},e,Wy),this.rotate=b,this.textAnchor=lb(a,"middle"),this.lineAnchor=ch(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+r,this.lineWidth=+o,this.textOverflow=Yy(g),this.monospace=!!B,this.fontFamily=Ku(d),this.fontSize=y,this.fontStyle=Ku(I),this.fontVariant=Ku(F),this.fontWeight=Ku(u),this.frameAnchor=Jh(c),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${o}`);this.splitLines=$y(this),this.clipLine=qy(this)}render(t,e,n,i,s){const{x:c,y:a}=e,{x:l,y:r,rotate:o,text:g,title:B,fontSize:d}=n,{rotate:Q}=this,[I,F]=db(this,i);return Ib("svg:g",s).call(nb,this,i,s).call(zy,this,g,i).call(ab,this,{x:l&&c,y:r&&a}).call((e=>e.selectAll().data(t).enter().append("text").call(ib,this).call(ky,this,g,B).attr("transform",wy`translate(${l?t=>l[t]:I},${r?t=>r[t]:F})${o?t=>` rotate(${o[t]})`:Q?` rotate(${Q})`:""}`).call(cb,"font-size",d&&(t=>d[t])).call($U,this,n))).node()}}function Yy(t){return null==t?null:ch(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function ky(t,e,n,i){if(!n)return;const{lineAnchor:s,lineHeight:c,textOverflow:a,splitLines:l,clipLine:r}=e;t.each((function(t){const e=l(kU(n[t])??"").map(r),o=e.length,g="top"===s?.71:"bottom"===s?1-o:(164-100*o)/200;if(o>1){let t=0;for(let n=0;n<o;++n){if(++t,!e[n])continue;const i=this.ownerDocument.createElementNS(ve.svg,"tspan");i.setAttribute("x",0),n===t-1?i.setAttribute("y",(g+n)*c+"em"):i.setAttribute("dy",t*c+"em"),i.textContent=e[n],this.appendChild(i),t=0}}else g&&this.setAttribute("y",g*c+"em"),this.textContent=e[0];if(a&&!i&&e[0]!==n[t]){const e=this.ownerDocument.createElementNS(ve.svg,"title");e.textContent=n[t],this.appendChild(e)}}))}function Jy(t,{x:e,y:n,...i}={}){return void 0===i.frameAnchor&&([e,n]=Ih(e,n)),new Dy(t,{...i,x:e,y:n})}function My(t,{x:e=Mu,...n}={}){return new Dy(t,function(t={}){return Ry("y",Ay,t)}({...n,x:e}))}function Ty(t,{y:e=Mu,...n}={}){return new Dy(t,function(t={}){return Ry("x",my,t)}({...n,y:e}))}function zy(t,e,n){cb(t,"text-anchor",e.textAnchor),cb(t,"font-family",e.fontFamily),cb(t,"font-size",e.fontSize),cb(t,"font-style",e.fontStyle),cb(t,"font-variant",void 0===e.fontVariant?function(t){return t&&(function(t){for(const e of t)if(null!=e)return"number"==typeof e}(t)||vh(t))?"tabular-nums":void 0}(n):e.fontVariant),cb(t,"font-weight",e.fontWeight)}const Ky=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Oy(t,e,n){const i=[];let s,c=0;for(const[a,l,r]of function*(t){let e=0,n=0;const i=t.length;for(;n<i;){let i=1;switch(t[n]){case Hy:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];" "===t[++n];);e=n;break;case"\r":"\n"===t[n+1]&&++i;case"\n":yield[e,n,!0],n+=i,e=n;break;default:++n}}yield[e,n,!0]}(t))void 0===s&&(s=a),c>s&&n(t,s,l)>e&&(i.push(t.slice(s,c)+(t[c-1]===Hy?"-":"")),s=a),r?(i.push(t.slice(s,l)),s=void 0):c=l;return i}const _y={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Py(t,e=0,n=t.length){let i=0;for(let s=e;s<n;s=lf(t,s))i+=_y[t[s]]??(of(t,s)?120:_y.e);return i}function jy(t,e=0,n=t.length){let i=0;for(let s=e;s<n;s=lf(t,s))i+=of(t,s)?200:100;return i}function $y({monospace:t,lineWidth:e,textOverflow:n}){if(null!=n||e==1/0)return t=>t.split(/\r\n?|\n/g);const i=t?jy:Py,s=100*e;return t=>Oy(t,s,i)}function qy({monospace:t,lineWidth:e,textOverflow:n}){if(null==n||e==1/0)return t=>t;const i=t?jy:Py,s=100*e;switch(n){case"clip-start":return t=>sf(t,s,i,"");case"clip-end":return t=>nf(t,s,i,"");case"ellipsis-start":return t=>sf(t,s,i,tf);case"ellipsis-middle":return t=>function(t,e,n,i){t=t.trim();const s=n(t);if(s<=e)return t;const c=n(i)/2,[a,l]=ef(t,e/2,n,c),[r]=ef(t,s-e/2-l+c,n,-c);return r<0?i:t.slice(0,a).trimEnd()+i+t.slice(lf(t,r)).trimStart()}(t,s,i,tf);case"ellipsis-end":return t=>nf(t,s,i,tf)}}const tf="";function ef(t,e,n,i){const s=[];let c=0;for(let a=0,l=0,r=t.length;a<r;a=l){l=lf(t,a);const r=n(t,a,l);if(c+r>e){for(c+=i;c>e&&a>0;)l=a,a=s.pop(),c-=n(t,a,l);return[a,e-c]}c+=r,s.push(a)}return[-1,0]}function nf(t,e,n,i){t=t.trim();const s=n(i),[c]=ef(t,e,n,s);return c<0?t:t.slice(0,c).trimEnd()+i}function sf(t,e,n,i){const s=n(t=t.trim());if(s<=e)return t;const c=n(i),[a]=ef(t,s-e+c,n,-c);return a<0?i:i+t.slice(lf(t,a)).trimStart()}const cf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,af=/\p{Extended_Pictographic}/uy;function lf(t,e){return e+=function(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const n=t.charCodeAt(e+1);return n>=56320&&n<57344}return!1}(t,e)?2:1,function(t,e){return!rf(t,e)&&(cf.lastIndex=e,cf.test(t))}(t,e)&&(e=cf.lastIndex),function(t,e){return 8205===t.charCodeAt(e)}(t,e)?lf(t,e+1):e}function rf(t,e){return t.charCodeAt(e)<128}function of(t,e){return!rf(t,e)&&(af.lastIndex=e,af.test(t))}const gf={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Bf=3.5,df=5*Bf,Qf={draw(t,e,n){const i=e*n/df;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},If={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},Ff=new Map([["arrow",Qf],["spike",If]]);class uf extends ey{constructor(t,e={}){const{x:n,y:i,r:s=Bf,length:c,rotate:a,shape:l=Qf,anchor:r="middle",frameAnchor:o}=e,[g,B]=ih(c,12),[d,Q]=ih(a,0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:g,scale:"length",optional:!0},rotate:{value:d,optional:!0}},e,gf),this.r=+s,this.length=B,this.rotate=Q,this.shape=function(t){if(function(t){return t&&"function"==typeof t.draw}(t))return t;const e=Ff.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}(l),this.anchor=ch(r,"anchor",["start","middle","end"]),this.frameAnchor=Jh(o)}render(t,e,n,i,s){const{x:c,y:a}=e,{x:l,y:r,length:o,rotate:g}=n,{length:B,rotate:d,anchor:Q,shape:I,r:F}=this,[u,h]=db(this,i);return Ib("svg:g",s).call(nb,this,i,s).call(ab,this,{x:l&&c,y:r&&a}).call((e=>e.selectAll().data(t).enter().append("path").call(ib,this).attr("transform",wy`translate(${l?t=>l[t]:u},${r?t=>r[t]:h})${g?t=>` rotate(${g[t]})`:d?` rotate(${d})`:""}${"start"===Q?"":"end"===Q?o?t=>` translate(0,${o[t]})`:` translate(0,${B})`:o?t=>` translate(0,${o[t]/2})`:` translate(0,${B/2})`}`).attr("d",o?t=>{const e=na();return I.draw(e,o[t],F),e}:(()=>{const t=na();return I.draw(t,B,F),t})()).call($U,this,n))).node()}}function hf(t,e={}){const{x:n=Mu,...i}=e;return new uf(t,{...i,x:n})}function Uf(t,e={}){const{y:n=Mu,...i}=e;return new uf(t,{...i,y:n})}function bf(t,e){return arguments.length<2&&!Rh(t)&&(e=t,t=null),void 0===e&&(e={}),[t,e]}function Cf({anchor:t}={},e){return void 0===t?e[0]:ch(t,"anchor",e)}function yf(t){return Cf(t,["left","right"])}function ff(t){return Cf(t,["right","left"])}function Gf(t){return Cf(t,["bottom","top"])}function pf(t){return Cf(t,["top","bottom"])}function mf(){const[t,e]=bf(...arguments);return Sf("y",yf(e),t,e)}function Af(){const[t,e]=bf(...arguments);return Sf("fy",ff(e),t,e)}function xf(){const[t,e]=bf(...arguments);return Rf("x",Gf(e),t,e)}function Lf(){const[t,e]=bf(...arguments);return Rf("fx",pf(e),t,e)}function Sf(t,e,n,{color:i="currentColor",opacity:s=1,stroke:c=i,strokeOpacity:a=s,strokeWidth:l=1,fill:r=i,fillOpacity:o=s,textAnchor:g,textStroke:B,textStrokeOpacity:d,textStrokeWidth:Q,tickSize:I=("y"===t?6:0),tickPadding:F,tickRotate:u,x:h,margin:U,marginTop:b=(void 0===U?20:U),marginRight:C=(void 0===U?"right"===e?40:0:U),marginBottom:y=(void 0===U?20:U),marginLeft:f=(void 0===U?"left"===e?40:0:U),label:G,labelAnchor:p,labelArrow:m,labelOffset:A,...x}){return I=Ou(I),F=Ou(F),u=Ou(u),void 0!==p&&(p=ch(p,"labelAnchor",["center","top","bottom"])),m=_f(m),ny(I&&!Dh(c)?function(t,e,n,{strokeWidth:i=1,strokeLinecap:s=null,strokeLinejoin:c=null,facetAnchor:a=e+("y"===t?"-empty":""),frameAnchor:l=e,tickSize:r,inset:o=0,insetLeft:g=o,insetRight:B=o,dx:d=0,y:Q=("y"===t?void 0:null),...I}){return Hf(Uf,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:s,strokeLinejoin:c,facetAnchor:a,frameAnchor:l,y:Q,...I,dx:"left"===e?+d-zU+ +g:+d+zU-B,anchor:"start",length:r,shape:"left"===e?Tf:zf})}(t,e,n,{stroke:c,strokeOpacity:a,strokeWidth:l,tickSize:I,tickPadding:F,tickRotate:u,x:h,...x}):null,Dh(r)?null:function(t,e,n,{facetAnchor:i=e+("y"===t?"-empty":""),frameAnchor:s=e,tickSize:c,tickRotate:a=0,tickPadding:l=Math.max(3,9-c)+(Math.abs(a)>60?4*Math.cos(a*Iy):0),text:r,textAnchor:o=(Math.abs(a)>60?"middle":"left"===e?"end":"start"),lineAnchor:g=(a>60?"top":a<-60?"bottom":"middle"),fontVariant:B,inset:d=0,insetLeft:Q=d,insetRight:I=d,dx:F=0,y:u=("y"===t?void 0:null),...h}){return Hf(Ty,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:s,text:r,textAnchor:o,lineAnchor:g,fontVariant:B,rotate:a,y:u,...h,dx:"left"===e?+F-c-l+ +Q:+F+ +c+ +l-I},(function(t,n,i,s,c){void 0===B&&(this.fontVariant=Kf(t)),void 0===r&&(c.text=Df(t,n,i,s,e))}))}(t,e,n,{fill:r,fillOpacity:o,stroke:B,strokeOpacity:d,strokeWidth:Q,textAnchor:g,tickSize:I,tickPadding:F,tickRotate:u,x:h,marginTop:b,marginRight:C,marginBottom:y,marginLeft:f,...x}),Dh(r)||null===G?null:Jy([],Wf({fill:r,fillOpacity:o,...x},(function(n,i,s,c,a){const l=c[t],{marginTop:r,marginRight:o,marginBottom:g,marginLeft:B}="y"===t&&a.inset||a,d=p??(l.bandwidth?"center":"top"),Q=A??("right"===e?o:B)-3;return"center"===d?(this.textAnchor=void 0,this.lineAnchor="right"===e?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor="right"===e?"end":"start",this.lineAnchor=d,this.frameAnchor=`${d}-${e}`,this.rotate=0),this.dy="top"===d?3-r:"bottom"===d?g-3:0,this.dx="right"===e?Q:-Q,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Of(t,l,{anchor:e,label:G,labelAnchor:d,labelArrow:m})]}}}}))))}function Rf(t,e,n,{color:i="currentColor",opacity:s=1,stroke:c=i,strokeOpacity:a=s,strokeWidth:l=1,fill:r=i,fillOpacity:o=s,textAnchor:g,textStroke:B,textStrokeOpacity:d,textStrokeWidth:Q,tickSize:I=("x"===t?6:0),tickPadding:F,tickRotate:u,y:h,margin:U,marginTop:b=(void 0===U?"top"===e?30:0:U),marginRight:C=(void 0===U?20:U),marginBottom:y=(void 0===U?"bottom"===e?30:0:U),marginLeft:f=(void 0===U?20:U),label:G,labelAnchor:p,labelArrow:m,labelOffset:A,...x}){return I=Ou(I),F=Ou(F),u=Ou(u),void 0!==p&&(p=ch(p,"labelAnchor",["center","left","right"])),m=_f(m),ny(I&&!Dh(c)?function(t,e,n,{strokeWidth:i=1,strokeLinecap:s=null,strokeLinejoin:c=null,facetAnchor:a=e+("x"===t?"-empty":""),frameAnchor:l=e,tickSize:r,inset:o=0,insetTop:g=o,insetBottom:B=o,dy:d=0,x:Q=("x"===t?void 0:null),...I}){return Hf(hf,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:c,strokeLinecap:s,facetAnchor:a,frameAnchor:l,x:Q,...I,dy:"bottom"===e?+d-zU-B:+d+zU+ +g,anchor:"start",length:r,shape:"bottom"===e?Jf:Mf})}(t,e,n,{stroke:c,strokeOpacity:a,strokeWidth:l,tickSize:I,tickPadding:F,tickRotate:u,y:h,...x}):null,Dh(r)?null:function(t,e,n,{facetAnchor:i=e+("x"===t?"-empty":""),frameAnchor:s=e,tickSize:c,tickRotate:a=0,tickPadding:l=Math.max(3,9-c)+(Math.abs(a)>=10?4*Math.cos(a*Iy):0),text:r,textAnchor:o=(Math.abs(a)>=10?a<0^"bottom"===e?"start":"end":"middle"),lineAnchor:g=(Math.abs(a)>=10?"middle":"bottom"===e?"top":"bottom"),fontVariant:B,inset:d=0,insetTop:Q=d,insetBottom:I=d,dy:F=0,x:u=("x"===t?void 0:null),...h}){return Hf(My,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:s,text:void 0===r?null:r,textAnchor:o,lineAnchor:g,fontVariant:B,rotate:a,x:u,...h,dy:"bottom"===e?+F+ +c+ +l-I:+F-c-l+ +Q},(function(t,n,i,s,c){void 0===B&&(this.fontVariant=Kf(t)),void 0===r&&(c.text=Df(t,n,i,s,e))}))}(t,e,n,{fill:r,fillOpacity:o,stroke:B,strokeOpacity:d,strokeWidth:Q,textAnchor:g,tickSize:I,tickPadding:F,tickRotate:u,y:h,marginTop:b,marginRight:C,marginBottom:y,marginLeft:f,...x}),Dh(r)||null===G?null:Jy([],Wf({fill:r,fillOpacity:o,...x},(function(n,i,s,c,a){const l=c[t],{marginTop:r,marginRight:o,marginBottom:g,marginLeft:B}="x"===t&&a.inset||a,d=p??(l.bandwidth?"center":"right"),Q=A??("top"===e?r:g)-3;return"center"===d?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${d}`,this.textAnchor="right"===d?"end":"start"),this.lineAnchor=e,this.dy="top"===e?-Q:Q,this.dx="right"===d?o-3:"left"===d?3-B:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Of(t,l,{anchor:e,label:G,labelAnchor:d,labelArrow:m})]}}}}))))}function Nf(){const[t,e]=bf(...arguments);return Ef("y",yf(e),t,e)}function Xf(){const[t,e]=bf(...arguments);return Ef("fy",ff(e),t,e)}function vf(){const[t,e]=bf(...arguments);return Vf("x",Gf(e),t,e)}function Zf(){const[t,e]=bf(...arguments);return Vf("fx",pf(e),t,e)}function Ef(t,e,n,{y:i=("y"===t?void 0:null),x:s=null,x1:c=("left"===e?s:null),x2:a=("right"===e?s:null),...l}){return Hf(Ey,t,e,`${t}-grid`,n,{y:i,x1:c,x2:a,...wf(l)})}function Vf(t,e,n,{x:i=("x"===t?void 0:null),y:s=null,y1:c=("top"===e?s:null),y2:a=("bottom"===e?s:null),...l}){return Hf(Zy,t,e,`${t}-grid`,n,{x:i,y1:c,y2:a,...wf(l)})}function wf({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:s=1,...c}){return{stroke:n,strokeOpacity:i,strokeWidth:s,...c}}function Wf({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:s,fontVariant:c,fontWeight:a,monospace:l,pointerEvents:r,shapeRendering:o,clip:g=!1},B){return[,t]=nh(t),[,e]=ih(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:s,fontVariant:c,fontWeight:a,monospace:l,pointerEvents:r,shapeRendering:o,clip:g,initializer:B}}function Hf(t,e,n,i,s,c,a){let l;const r=aU(c).initializer,o=t(s,aU({...c,initializer:function(t,n,i,s,r,o){const g=null==t&&("fx"===e||"fy"===e),{[e]:B}=s;if(!B)throw new Error(`missing scale: ${e}`);const d=B.domain();let{interval:Q,ticks:I,tickFormat:F,tickSpacing:u=("x"===e?80:35)}=c;if("string"==typeof I&&Pf(B)&&(Q=I,I=void 0),void 0===I&&(I=xh(Q,B.type)??function(t,e){const[n,i]=pt(t.range());return(i-n)/e}(B,u)),null==t){if(Rh(I))t=ah(I);else if(Lh(I))t=kf(I,...pt(d));else if(B.interval){let e=B.interval;if(B.ticks){const[n,i]=pt(d);e=Nu(e,(i-n)/e[mu]/I)??e,t=kf(e,n,i)}else{e=Nu(e,(t=d).length/I)??e,e!==B.interval&&(t=kf(e,...pt(t)))}if(e===B.interval){const e=Math.round(t.length/I);e>1&&(t=t.filter(((t,n)=>n%e==0)))}}else t=B.ticks?B.ticks(I):d;if(!B.ticks&&t.length&&t!==d){const n=new xt(d);t=t.filter((t=>n.has(t))),t.length||TU(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}"y"===e||"x"===e?n=[uh(t)]:l[e]={scale:e,value:Mu}}a?.call(this,B,t,I,F,l);const h=Object.fromEntries(Object.entries(l).map((([e,n])=>[e,{...n,value:Wu(t,n.value)}])));return g&&(n=o.filterFacets(t,h)),{data:t,facets:n,channels:h}}},r));return null==s?(l=o.channels,o.channels={}):l={},o.ariaLabel=i,void 0===o.clip&&(o.clip=!1),o}function Df(t,e,n,i,s){return{value:Yf(t,e,n,i,s)}}function Yf(t,e,n,i,s){return"function"==typeof i?i:void 0===i&&e&&vh(e)?vu(e,s)??kU:t.tickFormat?t.tickFormat("number"==typeof n?n:null,i):void 0===i?kU:"string"==typeof i?(vh(t.domain())?aB:Qa)(i):ju(i)}function kf(t,e,n){return t.range(e,t.offset(t.floor(n)))}const Jf={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},Mf={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},Tf={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},zf={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function Kf(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function Of(t,e,{anchor:n,label:i=e.label,labelAnchor:s,labelArrow:c}={}){if(!(null==i||i.inferred&&Pf(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),"auto"===c&&(c=(!e.bandwidth||e.interval)&&!/[]/.test(i)),!c)return i;if(!0===c){const n=function(t){return Math.sign(Mh(t.domain()))*Math.sign(Mh(t.range()))}(e);n&&(c=/x$/.test(t)||"center"===s?/x$/.test(t)===n<0?"left":"right":n<0?"up":"down")}switch(c){case"left":return` ${i}`;case"right":return`${i} `;case"up":return"right"===n?`${i} `:` ${i}`;case"down":return"right"===n?`${i} `:` ${i}`}return i}}function _f(t="auto"){return!Dh(t)&&("boolean"==typeof t?t:ch(t,"labelArrow",["auto","up","right","down","left"]))}function Pf(t){return vh(t.domain())}function jf(t,e){if(null==e)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function $f(t,e={},n){let{columns:i,tickFormat:s,fontVariant:c=Qy(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:r=a,marginLeft:o=0,className:g,style:B,width:d}=e;const Q=Qb(e);g=gb(g),s=Yf(t.scale,t.domain,void 0,s);const I=Ib("div",Q).attr("class",`${g}-swatches ${g}-swatches-${null!=i?"columns":"wrap"}`);let F;return null!=i?(F=`.${g}-swatches-columns .${g}-swatch {\n  display: flex;\n  align-items: center;\n  break-inside: avoid;\n  padding-bottom: 1px;\n}\n.${g}-swatches-columns .${g}-swatch::before {\n  flex-shrink: 0;\n}\n.${g}-swatches-columns .${g}-swatch-label {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}`,I.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${g}-swatch`).call(n,t,l,r).call((t=>t.append("div").attr("class",`${g}-swatch-label`).attr("title",s).text(s)))):(F=`.${g}-swatches-wrap {\n  display: flex;\n  align-items: center;\n  min-height: 33px;\n  flex-wrap: wrap;\n}\n.${g}-swatches-wrap .${g}-swatch {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 1em;\n}`,I.selectAll().data(t.domain).enter().append("span").attr("class",`${g}-swatch`).call(n,t,l,r).append((function(){return this.ownerDocument.createTextNode(s.apply(this,arguments))}))),I.call((t=>t.insert("style","*").text(`.${g}-swatches {\n  font-family: system-ui, sans-serif;\n  font-size: 10px;\n  margin-bottom: 0.5em;\n}\n.${g}-swatch > svg {\n  margin-right: 0.5em;\n  overflow: visible;\n}\n${F}`))).style("margin-left",o?+o+"px":null).style("width",void 0===d?null:+d+"px").style("font-variant",lb(c,"normal")).call(Bb,B).node()}const qf=new Map([["symbol",function(t,{fill:e=(void 0!==t.hint?.fill?t.hint.fill:"none"),fillOpacity:n=1,stroke:i=(void 0!==t.hint?.stroke?t.hint.stroke:Dh(e)?"currentColor":"none"),strokeOpacity:s=1,strokeWidth:c=1.5,r:a=4.5,...l}={},r){const[o,g]=nh(e),[B,d]=nh(i),Q=jf(r,o),I=jf(r,B),F=a*a*Math.PI;return n=ih(n)[1],s=ih(s)[1],c=ih(c)[1],$f(t,l,((e,i,a,l)=>e.append("svg").attr("viewBox","-8 -8 16 16").attr("width",a).attr("height",l).attr("fill","color"===o?t=>Q.scale(t):g).attr("fill-opacity",n).attr("stroke","color"===B?t=>I.scale(t):d).attr("stroke-opacity",s).attr("stroke-width",c).append("path").attr("d",(e=>{const n=na();return t.scale(e).draw(n,F),n}))))}],["color",eG],["opacity",function({type:t,interpolate:e,...n},{legend:i=!0,color:s=Ai(0,0,0),...c}){if(!e)throw new Error(`${t} opacity scales are not supported`);!0===i&&(i="ramp");if("ramp"!==`${i}`.toLowerCase())throw new Error(`${i} opacity legends are not supported`);return eG({type:t,...n,interpolate:nG(s)},{legend:i,...c})}]]);function tG({className:t,...e},{label:n,ticks:i,tickFormat:s}={},c){return function(t={},...e){let n=t;for(const i of e)for(const e in i)if(void 0===n[e]){const s=i[e];n===t?n={...n,[e]:s}:n[e]=s}return n}(c,{className:t,...e},{label:n,ticks:i,tickFormat:s})}function eG(t,{legend:e=!0,...n}){if(!0===e&&(e="ordinal"===t.type?"swatches":"ramp"),void 0!==t.domain)switch(`${e}`.toLowerCase()){case"swatches":return function(t,{opacity:e,...n}={}){if(!vC(t)&&!ZC(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return $f(t,n,((t,n,i,s)=>t.append("svg").attr("width",i).attr("height",s).attr("fill",n.scale).attr("fill-opacity",ih(e)[1]).append("rect").attr("width","100%").attr("height","100%")))}(t,n);case"ramp":return function(t,e){let{label:n=t.label,tickSize:i=6,width:s=240,height:c=44+i,marginTop:a=18,marginRight:l=0,marginBottom:r=16+i,marginLeft:o=0,style:g,ticks:B=(s-o-l)/64,tickFormat:d,fontVariant:Q=Qy(t),round:I=!0,opacity:F,className:u}=e;const h=Qb(e);u=gb(u),F=ih(F)[1],null===d&&(d=()=>null);const U=Ib("svg",h).attr("class",`${u}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",s).attr("height",c).attr("viewBox",`0 0 ${s} ${c}`).call((t=>t.append("style").text(`.${u}-ramp {\n  display: block;\n  background: white;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n  overflow: visible;\n}\n.${u}-ramp text {\n  white-space: pre;\n}`))).call(Bb,g);let b,C=t=>t.selectAll(".tick line").attr("y1",a+r-c);const y=I?(t,e)=>t.rangeRound(e):(t,e)=>t.range(e),{type:f,domain:G,range:p,interpolate:m,scale:A,pivot:x}=t;if(m){const t=void 0===p?m:Ms(1===m.length?nC(m):m,p);b=y(A.copy(),Ts(As(o,s-l),Math.min(G.length+(void 0!==x),void 0===p?1/0:p.length)));const e=256,n=h.document.createElement("canvas");n.width=e,n.height=1;const i=n.getContext("2d");for(let n=0,s=e-1;n<e;++n)i.fillStyle=t(n/s),i.fillRect(n,0,1,1);U.append("image").attr("opacity",F).attr("x",o).attr("y",a).attr("width",s-o-l).attr("height",c-a-r).attr("preserveAspectRatio","none").attr("xlink:href",n.toDataURL())}else if("threshold"===f){const t=G,e=void 0===d?t=>t:"string"==typeof d?Qa(d):d;b=y(Jo().domain([-1,p.length-1]),[o,s-l]),U.append("g").attr("fill-opacity",F).selectAll().data(p).enter().append("rect").attr("x",((t,e)=>b(e-1))).attr("y",a).attr("width",((t,e)=>b(e)-b(e-1))).attr("height",c-a-r).attr("fill",(t=>t)),B=lh(t,((t,e)=>e)),d=n=>e(t[n],n)}else b=y(So().domain(G),[o,s-l]),U.append("g").attr("fill-opacity",F).selectAll().data(G).enter().append("rect").attr("x",b).attr("y",a).attr("width",Math.max(0,b.bandwidth()-1)).attr("height",c-a-r).attr("fill",A),C=()=>{};return U.append("g").attr("transform",`translate(0,${c-r})`).call(Ae(b).ticks(Array.isArray(B)?null:B,"string"==typeof d?d:void 0).tickFormat("function"==typeof d?d:void 0).tickSize(i).tickValues(Array.isArray(B)?B:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",lb(Q,"normal")).call(C).call((t=>t.select(".domain").remove())),void 0!==n&&U.append("text").attr("x",o).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),U.node()}(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function nG(t){const{r:e,g:n,b:i}=Ai(t)||Ai(0,0,0);return t=>`rgba(${e},${n},${i},${t})`}const iG={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},sG={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class cG extends ey{constructor(t={}){const{anchor:e=null,inset:n=0,insetTop:i=n,insetRight:s=n,insetBottom:c=n,insetLeft:a=n,rx:l,ry:r}=t;super(Yu,void 0,t,null==e?iG:sG),this.anchor=sh(e,"anchor",["top","right","bottom","left"]),this.insetTop=Ou(i),this.insetRight=Ou(s),this.insetBottom=Ou(c),this.insetLeft=Ou(a),this.rx=Ou(l),this.ry=Ou(r)}render(t,e,n,i,s){const{marginTop:c,marginRight:a,marginBottom:l,marginLeft:r,width:o,height:g}=i,{anchor:B,insetTop:d,insetRight:Q,insetBottom:I,insetLeft:F,rx:u,ry:h}=this,U=r+F,b=o-a-Q,C=c+d,y=g-l-I;return Ib(B?"svg:line":"svg:rect",s).datum(0).call(nb,this,i,s).call(ib,this).call($U,this,n).call(ab,this,{}).call("left"===B?t=>t.attr("x1",U).attr("x2",U).attr("y1",C).attr("y2",y):"right"===B?t=>t.attr("x1",b).attr("x2",b).attr("y1",C).attr("y2",y):"top"===B?t=>t.attr("x1",U).attr("x2",b).attr("y1",C).attr("y2",C):"bottom"===B?t=>t.attr("x1",U).attr("x2",b).attr("y1",y).attr("y2",y):t=>t.attr("x",U).attr("y",C).attr("width",b-U).attr("height",y-C).attr("rx",u).attr("ry",h)).node()}}const aG={ariaLabel:"tip",fill:"white",stroke:"currentColor"},lG=new Set(["geometry","href","src","ariaLabel","scales"]);class rG extends ey{constructor(t,e={}){e.tip&&(e={...e,tip:!1}),void 0===e.title&&Rh(t)&&Nh(t)&&(e={...e,title:Mu});const{x:n,y:i,x1:s,x2:c,y1:a,y2:l,anchor:r,monospace:o,fontFamily:g=(o?"ui-monospace, monospace":void 0),fontSize:B,fontStyle:d,fontVariant:Q,fontWeight:I,lineHeight:F=1,lineWidth:u=20,frameAnchor:h,format:U,textAnchor:b="start",textOverflow:C,textPadding:y=8,title:f,pointerSize:G=12,pathFilter:p="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=e;super(t,{x:{value:null!=s&&null!=c?null:n,scale:"x",optional:!0},y:{value:null!=a&&null!=l?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:null==c},y1:{value:a,scale:"y",optional:null==l},x2:{value:c,scale:"x",optional:null==s},y2:{value:l,scale:"y",optional:null==a},title:{value:f,optional:!0}},e,aG),this.anchor=kh(r,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Jh(h),this.textAnchor=lb(b,"middle"),this.textPadding=+y,this.pointerSize=+G,this.pathFilter=Ku(p),this.lineHeight=+F,this.lineWidth=+u,this.textOverflow=Yy(C),this.monospace=!!o,this.fontFamily=Ku(g),this.fontSize=Ou(B),this.fontStyle=Ku(d),this.fontVariant=Ku(Q),this.fontWeight=Ku(I);for(const t in aG)t in this.channels&&(this[t]=aG[t]);this.splitLines=$y(this),this.clipLine=qy(this),this.format={...U}}render(t,e,n,i,s){const c=this,{x:a,y:l,fx:r,fy:o}=e,{ownerSVGElement:g,document:B}=s,{anchor:d,monospace:Q,lineHeight:I,lineWidth:F}=this,{textPadding:u,pointerSize:h,pathFilter:U}=this,{marginTop:b,marginLeft:C}=i,{x1:y,y1:f,x2:G,y2:p,x:m=y??G,y:A=f??p}=n,x=r?r(t.fx)-C:0,L=o?o(t.fy)-b:0,[S,R]=db(this,i),N=By(n,S),X=dy(n,R),v=Q?jy:Py,Z=v(tf);let E,V;"title"in n?(E=n.channels,V=dG):(E=gG.call(this,n,e),V=QG);const w=Ib("svg:g",s).call(nb,this,i,s).call(zy,this).call(ab,this,{x:m&&a,y:A&&l}).call((i=>i.selectAll().data(t).enter().append("g").attr("transform",(t=>`translate(${Math.round(N(t))},${Math.round(X(t))})`)).call(ib,this).call((t=>t.append("path").attr("filter",U))).call((i=>i.append("text").each((function(i){const s=Tn(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const a=V.call(c,i,t,E,e,n);if("string"==typeof a)for(const t of c.splitLines(a))W(s,{value:c.clipLine(t)});else{const t=new Set;for(const e of a){const{label:n=""}=e;n&&t.has(n)||(t.add(n),W(s,e))}}}))))));function W(t,{label:e,value:n,color:i,opacity:s}){e??="",n??="";const c=null!=i||null!=s;let a,l=100*F;const[r]=ef(e,l,v,Z);if(r>=0)e=e.slice(0,r).trimEnd()+tf,a=n.trim(),n="";else{(e||!n&&!c)&&(n=" "+n);const[t]=ef(n,l-v(e),v,Z);t>=0&&(a=(n=n.slice(0,t).trimEnd()+tf).trim())}const o=t.append("tspan").attr("x",0).attr("dy",`${I}em`).text("");e&&o.append("tspan").attr("font-weight","bold").text(e),n&&o.append((()=>B.createTextNode(n))),c&&o.append("tspan").text(" ").attr("fill",i).attr("fill-opacity",s).style("user-select","none"),a&&o.append("title").text(a)}function H(){const{width:t,height:e}=i.facet??i;w.selectChildren().each((function(n){let{x:i,width:s,height:a}=this.getBBox();s=Math.round(s),a=Math.round(a);let l=d;if(void 0===l){l=c.previousAnchor;const i=N(n)+x,r=X(n)+L,o=i+s+2*u<t,g=i-s-2*u>0,B=r+a+h+2*u+7<e,d=r-a-h-2*u>0,Q=(/-left$/.test(l)?o||!g:o&&!g)?"left":"right",I=(/^top-/.test(l)?B||!d:B&&!d)?"top":"bottom";l=c.previousAnchor=`${I}-${Q}`}const r=this.firstChild,o=this.lastChild;if(r.setAttribute("d",function(t,e,n,i,s){const c=i+2*n,a=s+2*n;switch(t){case"middle":return`M${-c/2},${-a/2}h${c}v${a}h${-c}z`;case"top-left":return`M0,0l${e},${e}h${c-e}v${a}h${-c}z`;case"top":return`M0,0l${e/2},${e/2}h${(c-e)/2}v${a}h${-c}v${-a}h${(c-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-c}v${a}h${c}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-c}v${a}h${c}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${c-e}v${-a}h${-c}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(c-e)/2}v${-a}h${-c}v${a}h${(c-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-c}v${-a}h${c}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${c}v${a}h${-c}v${e/2-a/2}z`}}(l,h,u,s,a)),i)for(const t of o.childNodes)t.setAttribute("x",-i);o.setAttribute("y",+function(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}(l,o.childNodes.length,I).toFixed(6)+"em"),o.setAttribute("transform",`translate(${function(t,e,n,i,s){switch(t){case"middle":return[-i/2,s/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,s/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,s/2]}}(l,h,u,s,a)})`)})),w.attr("visibility",null)}return t.length&&(w.attr("visibility","hidden"),g.isConnected?Promise.resolve().then(H):"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(H)),w.node()}}function oG(t,{x:e,y:n,...i}={}){return void 0===i.frameAnchor&&([e,n]=Ih(e,n)),new rG(t,{...i,x:e,y:n})}function gG({channels:t},e){const n={};let i=this.format;i=BG(i,t,"x"),i=BG(i,t,"y"),this.format=i;for(const e in i){const s=i[e];if(null!==s&&!1!==s)if("fx"===e||"fy"===e)n[e]=!0;else{const i=HU(t,e);i&&(n[e]=i)}}for(const e in t){if(e in n||e in i||lG.has(e))continue;const s=HU(t,e);s&&(n[e]=s)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const t in n){const i=this.format[t];if("string"==typeof i){const s=n[t]?.value??e[t]?.domain()??[];this.format[t]=(vh(s)?aB:Qa)(i)}else if(void 0===i||!0===i){const n=e[t];this.format[t]=n?.bandwidth?Yf(n,n.domain()):kU}}return n}function BG(t,e,n){if(!(n in t))return t;const i=`${n}1`,s=`${n}2`;if(!(!(i in t)&&i in e||!(s in t)&&s in e))return t;const c=Object.entries(t),a=t[n];return c.splice(c.findIndex((([t])=>t===n))+1,0,[i,a],[s,a]),Object.fromEntries(c)}function dG(t,e,{title:n}){return kU(n.value[t],t)}function*QG(t,e,n,i,s){for(const c in n){if("fx"===c||"fy"===c){yield{label:uG(i,n,c),value:this.format[c](e[c],t)};continue}if("x1"===c&&"x2"in n)continue;if("y1"===c&&"y2"in n)continue;const a=n[c];if("x2"===c&&"x1"in n)yield{label:FG(i,n,"x"),value:IG(this.format.x2,n.x1,a,t)};else if("y2"===c&&"y1"in n)yield{label:FG(i,n,"y"),value:IG(this.format.y2,n.y1,a,t)};else{const e=a.value[t],l=a.scale;if(!iu(e)&&null==l)continue;yield{label:uG(i,n,c),value:this.format[c](e,t),color:"color"===l?s[c][t]:null,opacity:"opacity"===l?s[c][t]:null}}}}function IG(t,e,n,i){return n.hint?.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}${t(n.value[i],i)}`}function FG(t,e,n){const i=uG(t,e,`${n}1`,n),s=uG(t,e,`${n}2`,n);return i===s?i:`${i}${s}`}function uG(t,e,n,i=n){const s=e[n],c=t[s?.scale??n];return String(c?.label??s?.label??i)}function hG(t={}){const{facet:e,style:n,title:i,subtitle:s,caption:c,ariaLabel:a,ariaDescription:l}=t,r=gb(t.className),o=void 0===t.marks?[]:bG(t.marks);o.push(...function(t){const e=[];for(const n of t){let t=n.tip;if(t){!0===t?t={}:"string"==typeof t&&(t={pointer:t});let{pointer:i}=t;i=/^x$/i.test(i)?oy:/^y$/i.test(i)?gy:ry,t=i(LG(n,t)),t.title=null;const s=oG(n.data,t);s.facet=n.facet,s.facetAnchor=n.facetAnchor,e.push(s)}}return e}(o));const g=function(t,e){if(null==t)return;const{x:n,y:i}=t;if(null==n&&null==i)return;const s=ah(t.data);if(null==s)throw new Error("missing facet data");const c={};null!=n&&(c.fx=RU(s,{value:n,scale:"fx"}));null!=i&&(c.fy=RU(s,{value:i,scale:"fy"}));fG(c,e);const a=kC(s,c);return{channels:c,groups:a,data:t.data}}(e,t),B=new Map;for(const e of o){const n=xG(e,g,t);n&&B.set(e,n)}const d=new Map;g&&mG(d,[g],t),mG(d,B,t);const Q=bG(function(t,e,n){let{projection:i,x:s={},y:c={},fx:a={},fy:l={},axis:r,grid:o,facet:g={},facet:{axis:B=r,grid:d}=g,x:{axis:Q=r,grid:I=(null===Q?null:o)}=s,y:{axis:F=r,grid:u=(null===F?null:o)}=c,fx:{axis:h=B,grid:U=(null===h?null:d)}=a,fy:{axis:b=B,grid:C=(null===b?null:d)}=l}=n;(i||!Bh(s)&&!vG("x",t))&&(Q=I=null);(i||!Bh(c)&&!vG("y",t))&&(F=u=null);e.has("fx")||(h=U=null);e.has("fy")||(b=C=null);void 0===Q&&(Q=!XG(t,"x"));void 0===F&&(F=!XG(t,"y"));void 0===h&&(h=!XG(t,"fx"));void 0===b&&(b=!XG(t,"fy"));!0===Q&&(Q="bottom");!0===F&&(F="left");!0===h&&(h="top"===Q||null===Q?"bottom":"top");!0===b&&(b="right"===F||null===F?"left":"right");const y=[];return RG(y,C,Xf,l),SG(y,b,Af,"right","left",g,l),RG(y,U,Zf,a),SG(y,h,Lf,"top","bottom",g,a),RG(y,u,Nf,c),SG(y,F,mf,"left","right",n,c),RG(y,I,vf,s),SG(y,Q,xf,"bottom","top",n,s),y}(o,d,t));for(const e of Q){const n=xG(e,g,t);n&&B.set(e,n)}o.unshift(...Q);let I=YC(d,t);if(void 0!==I){const t=g?ty(I,g):void 0;for(const e of o){if(null===e.facet||"super"===e.facet)continue;const n=B.get(e);void 0!==n&&(n.facetsIndex=null!=e.fx||null!=e.fy?ty(I,n):t)}const e=new Set;for(const{facetsIndex:t}of B.values())t?.forEach(((t,n)=>{t?.length>0&&e.add(n)}));I.forEach(0<e.size&&e.size<I.length?(t,n)=>t.empty=!e.has(n):t=>t.empty=!1);for(const t of o)if("exclude"===t.facet){const e=B.get(t);void 0!==e&&(e.facetsIndex=JC(e.facetsIndex))}}for(const e of qh.keys())Bh(t[e])&&"fx"!==e&&"fy"!==e&&d.set(e,[]);const F=new Map;for(const e of o){if(F.has(e))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:n,channels:i}=B.get(e)??{},{data:s,facets:c,channels:a}=e.initialize(n,i,t);fG(a,t),F.set(e,{data:s,facets:c,channels:a})}const u=CC(mG(d,F,t),t),h=function(t,e,n={}){let i=.5-zU,s=.5+zU,c=.5+zU,a=.5-zU;for(const{marginTop:t,marginRight:n,marginBottom:l,marginLeft:r}of e)t>i&&(i=t),n>s&&(s=n),l>c&&(c=l),r>a&&(a=r);let{margin:l,marginTop:r=(void 0!==l?l:i),marginRight:o=(void 0!==l?l:s),marginBottom:g=(void 0!==l?l:c),marginLeft:B=(void 0!==l?l:a)}=n;r=+r,o=+o,g=+g,B=+B;let{width:d=640,height:Q=HC(t,n,{width:d,marginTopDefault:i,marginRightDefault:s,marginBottomDefault:c,marginLeftDefault:a})+Math.max(0,r-i+g-c)}=n;d=+d,Q=+Q;const I={width:d,height:Q,marginTop:r,marginRight:o,marginBottom:g,marginLeft:B};if(t.fx||t.fy){let{margin:t,marginTop:e=(void 0!==t?t:r),marginRight:i=(void 0!==t?t:o),marginBottom:s=(void 0!==t?t:g),marginLeft:c=(void 0!==t?t:B)}=n.facet??{};e=+e,i=+i,s=+s,c=+c,I.facet={marginTop:e,marginRight:i,marginBottom:s,marginLeft:c}}return I}(u,o,t);!function(t,e){const{x:n,y:i,fx:s,fy:c}=t,a=s||c?GC(e):e;s&&mC(s,a),c&&AC(c,a);const l=s||c?pC(t,e):e;n&&mC(n,l),i&&AC(i,l)}(u,h);const U=yC(u),{fx:b,fy:C}=U,y=b||C?pC(u,h):h,f=b||C?function({fx:t,fy:e},n){const{marginTop:i,marginRight:s,marginBottom:c,marginLeft:a,width:l,height:r}=GC(n),o=t&&ZG(t),g=e&&ZG(e);return{marginTop:e?g[0]:i,marginRight:t?l-o[1]:s,marginBottom:e?r-g[1]:c,marginLeft:t?o[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:r}}(U,h):h,G=Qb(t),p=G.document,m=we("svg").call(p.documentElement);let A=m;G.ownerSVGElement=m,G.className=r,G.projection=Ub(t,y),G.filterFacets=(t,e)=>ty(I,{channels:e,groups:kC(t,e)}),G.getMarkState=t=>{const e=F.get(t),n=B.get(t);return{...e,channels:{...e.channels,...n?.channels}}},G.dispatchValue=t=>{A.value!==t&&(A.value=t,A.dispatchEvent(new Event("input",{bubbles:!0})))};const x=new Set;for(const[e,n]of F)if(null!=e.initializer){const i="super"===e.facet?f:y,s=e.initializer(n.data,n.facets,n.channels,U,i,G);if(void 0!==s.data&&(n.data=s.data),void 0!==s.facets&&(n.facets=s.facets),void 0!==s.channels){const{fx:i,fy:c,...a}=s.channels;pG(a),Object.assign(n.channels,a);for(const e of Object.values(a)){const{scale:n}=e;null!=n&&((L=qh.get(n))!==zh&&L!==$h)&&(GG(e,t),x.add(n))}null==i&&null==c||B.set(e,!0)}}var L;if(x.size){const e=new Map;mG(e,F,t,(t=>x.has(t))),mG(d,F,t,(t=>x.has(t)));const n=function(t,e){for(const n in t){const i=t[n],s=e[n];void 0===i.label&&s&&(i.label=s.label)}return t}(CC(e,t),u),{scales:i,...s}=yC(n);Object.assign(u,n),Object.assign(U,s),Object.assign(U.scales,i)}let S,R;void 0!==I&&(S={x:b?.domain(),y:C?.domain()},I=function(t,{x:e,y:n}){return e&&=zC(e),n&&=zC(n),t.filter(e&&n?t=>e.has(t.x)&&n.has(t.y):e?t=>e.has(t.x):t=>n.has(t.y)).sort(e&&n?(t,i)=>e.get(t.x)-e.get(i.x)||n.get(t.y)-n.get(i.y):e?(t,n)=>e.get(t.x)-e.get(n.x):(t,e)=>n.get(t.y)-n.get(e.y))}(I,S),R=function(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:s,y:c})=>`translate(${t(s)-i},${e(c)-n})`:t?({x:e})=>`translate(${t(e)-i},0)`:({y:t})=>`translate(0,${e(t)-n})`}(b,C,h));for(const[t,e]of F)e.values=t.scale(e.channels,U,G);const{width:N,height:X}=h;Tn(m).attr("class",r).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",N).attr("height",X).attr("viewBox",`0 0 ${N} ${X}`).attr("aria-label",a).attr("aria-description",l).call((t=>t.append("style").text(`.${r} {\n  display: block;\n  background: white;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n}\n.${r} text,\n.${r} tspan {\n  white-space: pre;\n}`))).call(Bb,n);for(const t of o){const{channels:e,values:n,facets:i}=F.get(t);if(void 0===I||"super"===t.facet){let s=null;if(i&&(s=i[0],s=t.filter(s,e,n),0===s.length))continue;const c=t.render(s,U,n,f,G);if(null==c)continue;m.appendChild(c)}else{let s;for(const c of I){if(!(t.facetAnchor?.(I,S,c)??!c.empty))continue;let a=null;if(i){const s=B.has(t);if(a=i[s?c.i:0],a=t.filter(a,e,n),0===a.length)continue;s||a!==i[0]||(a=Uh(a)),a.fx=c.x,a.fy=c.y,a.fi=c.i}const l=t.render(a,U,n,y,G);if(null!=l){(s??=Tn(m).append("g")).append((()=>l)).datum(c);for(const t of["aria-label","aria-description","aria-hidden","transform"])l.hasAttribute(t)&&(s.attr(t,l.getAttribute(t)),l.removeAttribute(t))}}s?.selectChildren().attr("transform",R)}}const v=function(t,e,n){const i=[];for(const[s,c]of qf){const a=n[s];if(a?.legend&&s in t){const n=c(t[s],tG(e,t[s],a),(e=>t[e]));null!=n&&i.push(n)}}return i}(u,G,t),{figure:Z=null!=i||null!=s||null!=c||v.length>0}=t;Z&&(A=p.createElement("figure"),A.className=`${r}-figure`,A.style.maxWidth="initial",null!=i&&A.append(UG(p,i,"h2")),null!=s&&A.append(UG(p,s,"h3")),A.append(...v,m),null!=c&&A.append(function(t,e){const n=t.createElement("figcaption");return n.append(e),n}(p,c))),A.scale=function(t){return e=>{if(!qh.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}(U.scales),A.legend=function(t,e,n={}){return(i,s)=>{if(!qf.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return qf.get(i)(t[i],tG(e,n[i],s),(e=>t[e]))}}(u,G,t);const E=function(){const t=MU;return MU=0,JU=void 0,t}();return E>0&&Tn(m).append("text").attr("x",N).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${E.toLocaleString("en-US")} warning${1===E?"":"s"}. Please check the console.`),A}function UG(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function bG(t){return t.flat(1/0).filter((t=>null!=t)).map(CG)}function CG(t){return"function"==typeof t.render?t:new yG(t)}ey.prototype.plot=function({marks:t=[],...e}={}){return hG({...e,marks:[...t,this]})};class yG extends ey{constructor(t){if("function"!=typeof t)throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function fG(t,e){for(const n in t)GG(t[n],e);return t}function GG(t,e){const{scale:n,transform:i=!0}=t;if(null==n||!i)return;const{type:s,percent:c,interval:a,transform:l=(c?t=>100*t:mh(a,s))}=e[n]??{};null!=l&&(t.value=lh(t.value,l),t.transform=!1)}function pG(t){for(const e in t)NU(e,t[e])}function mG(t,e,n,i=zu){for(const{channels:s}of e.values())for(const e in s){const c=s[e],{scale:a}=c;if(null!=a&&i(a))if("projection"===a){if(!mb(n)){const e=void 0===n.x?.domain,i=void 0===n.y?.domain;if(e||i){const[n,s]=Ab(c);e&&AG(t,"x",n),i&&AG(t,"y",s)}}}else AG(t,a,c)}return t}function AG(t,e,n){const i=t.get(e);void 0!==i?i.push(n):t.set(e,[n])}function xG(t,e,n){if(null===t.facet||"super"===t.facet)return;const{fx:i,fy:s}=t;if(null!=i||null!=s){const e=ah(t.data??i??s);if(void 0===e)throw new Error(`missing facet data in ${t.ariaLabel}`);if(null===e)return;const c={};return null!=i&&(c.fx=RU(e,{value:i,scale:"fx"})),null!=s&&(c.fy=RU(e,{value:s,scale:"fy"})),fG(c,n),{channels:c,groups:kC(e,c)}}if(void 0===e)return;const{channels:c,groups:a,data:l}=e;if("auto"!==t.facet||t.data===l)return{channels:c,groups:a};l.length>0&&(a.size>1||1===a.size&&c.fx&&c.fy&&[...a][0][1].size>1)&&ah(t.data)?.length===l.length&&TU(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function LG(t,e={}){return aU({...e,x:null,y:null},((e,n,i,s,c,a)=>a.getMarkState(t)))}function SG(t,e,n,i,s,c,a){if(!e)return;const l=/^\s*both\s*$/i.test(e);a=function(t,e,{line:n=e.line,ticks:i,tickSize:s,tickSpacing:c,tickPadding:a,tickFormat:l,tickRotate:r,fontVariant:o,ariaLabel:g,ariaDescription:B,label:d=e.label,labelAnchor:Q,labelArrow:I=e.labelArrow,labelOffset:F}){return{anchor:t,line:n,ticks:i,tickSize:s,tickSpacing:c,tickPadding:a,tickFormat:l,tickRotate:r,fontVariant:o,ariaLabel:g,ariaDescription:B,label:d,labelAnchor:Q,labelArrow:I,labelOffset:F}}(l?i:e,c,a);const{line:r}=a;n!==mf&&n!==xf||!r||Yh(r)||t.push(function(t){return new cG(t)}(function(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:!0===n?void 0:n}}(a))),t.push(n(a)),l&&t.push(n({...a,anchor:s,label:null}))}function RG(t,e,n,i){e&&!Yh(e)&&t.push(n(function(t,{stroke:e=(Wh(t)?t:void 0),ticks:n=(NG(t)?t:void 0),tickSpacing:i,ariaLabel:s,ariaDescription:c}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:s,ariaDescription:c}}(e,i)))}function NG(t){switch(typeof t){case"number":return!0;case"string":return!Wh(t)}return Rh(t)||"function"==typeof t?.range}function XG(t,e){const n=`${e}-axis `;return t.some((t=>t.ariaLabel?.startsWith(n)))}function vG(t,e){for(const n of e)for(const e in n.channels){const{scale:i}=n.channels[e];if(i===t||"projection"===i)return!0}return!1}function ZG(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const EG=new Map([["basis",function(t){return new _I(t)}],["basis-closed",function(t){return new PI(t)}],["basis-open",function(t){return new jI(t)}],["bundle",qI],["bump-x",function(t){return new bI(t,!0)}],["bump-y",function(t){return new bI(t,!1)}],["cardinal",nF],["cardinal-closed",sF],["cardinal-open",aF],["catmull-rom",oF],["catmull-rom-closed",BF],["catmull-rom-open",QF],["linear",FI],["linear-closed",function(t){return new IF(t)}],["monotone-x",function(t){return new bF(t)}],["monotone-y",function(t){return new CF(t)}],["natural",function(t){return new fF(t)}],["step",function(t){return new pF(t,.5)}],["step-after",function(t){return new pF(t,1)}],["step-before",function(t){return new pF(t,0)}]]);function VG(t=wG,e){return"function"!=typeof t&&"auto"===`${t}`.toLowerCase()?wG:function(t=FI,e){if("function"==typeof t)return t;const n=EG.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(void 0!==e){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}(t,e)}function wG(t){return FI(t)}function WG(t={y:"count"},e={}){[t,e]=function({cumulative:t,domain:e,thresholds:n,interval:i,...s},c){return[s,{cumulative:t,domain:e,thresholds:n,interval:i,...c}]}(t,e);const{x:n,y:i}=e;return function(t,e,n,i,{data:s=fU,filter:c=AU,sort:a,reverse:l,...r}={},o={}){t=DG(t),e=DG(e),r=function(t,e){return function(t,e,n=FU){const i=Object.entries(t);return null!=e.title&&void 0===t.title&&i.push(["title",pU]),null!=e.href&&void 0===t.href&&i.push(["href",GU]),i.filter((([,t])=>void 0!==t)).map((([t,i])=>null===i?function(t){return{name:t,initialize(){},scope(){},reduce(){}}}(t):n(t,i,e)))}(t,e,YG)}(r,o),s=JG(s,Mu),a=null==a?void 0:YG("sort",a,o),c=null==c?void 0:kG("filter",c,o),null!=n&&IU(r,"x","x1","x2")&&(n=null);null!=i&&IU(r,"y","y1","y2")&&(i=null);const[g,B]=yh(t),[d,Q]=yh(t),[I,F]=yh(e),[u,h]=yh(e),[U,b]=null!=n?[n,"x"]:null!=i?[i,"y"]:[],[C,y]=yh(U),{x:f,y:G,z:p,fill:m,stroke:A,x1:x,x2:L,y1:S,y2:R,domain:N,cumulative:X,thresholds:v,interval:Z,...E}=o,[V,w]=yh(p),[W]=nh(m),[H]=nh(A),[D,Y]=yh(W),[k,J]=yh(H);return{..."z"in o&&{z:V||p},..."fill"in o&&{fill:D||m},..."stroke"in o&&{stroke:k||A},...cU(E,((n,i,o)=>{const g=ph(Wu(n,U),o?.[b]),d=Wu(n,p),I=Wu(n,W),u=Wu(n,H),C=function(t,e){for(const n in e){const i=e[n];if(void 0!==i&&!t.some((t=>t.name===n)))return i}}(r,{z:d,fill:I,stroke:u}),f=[],G=[],m=g&&y([]),A=d&&w([]),x=I&&Y([]),L=u&&J([]),S=t&&B([]),R=t&&Q([]),N=e&&F([]),X=e&&h([]),v=(Z=t?.(n),E=e?.(n),Z&&E?function*(t){const e=Z.bin(t);for(const[t,[n,i]]of Z.entries()){const s=E.bin(e[t]);for(const[t,[e,c]]of E.entries())yield[s[t],{x1:n,y1:e,x2:i,y2:c}]}}:Z?function*(t){const e=Z.bin(t);for(const[t,[n,i]]of Z.entries())yield[e[t],{x1:n,x2:i}]}:function*(t){const e=E.bin(t);for(const[t,[n,i]]of E.entries())yield[e[t],{y1:n,y2:i}]});var Z,E;let V=0;for(const t of r)t.initialize(n);a&&a.initialize(n),c&&c.initialize(n);for(const t of i){const e=[];for(const e of r)e.scope("facet",t);a&&a.scope("facet",t),c&&c.scope("facet",t);for(const[i,l]of hU(t,C))for(const[t,o]of hU(l,g))for(const[l,B]of v(o))if(!c||c.reduce(l,B)){e.push(V++),G.push(s.reduceIndex(l,n,B)),g&&m.push(t),d&&A.push(C===d?i:d[(l.length>0?l:o)[0]]),I&&x.push(C===I?i:I[(l.length>0?l:o)[0]]),u&&L.push(C===u?i:u[(l.length>0?l:o)[0]]),S&&(S.push(B.x1),R.push(B.x2)),N&&(N.push(B.y1),X.push(B.y2));for(const t of r)t.reduce(l,B);a&&a.reduce(l)}f.push(e)}return function(t,e,n){if(e){const n=e.output.transform(),i=(t,e)=>su(n[t],n[e]);t.forEach((t=>t.sort(i)))}n&&t.forEach((t=>t.reverse()))}(f,a,l),{data:G,facets:f}})),...!IU(r,"x")&&(g?{x1:g,x2:d,x:Gh(g,d)}:{x:f,x1:x,x2:L}),...!IU(r,"y")&&(I?{y1:I,y2:u,y:Gh(I,u)}:{y:G,y1:S,y2:R}),...C&&{[b]:C},...Object.fromEntries(r.map((({name:t,output:e})=>[t,e])))}}(function(t,{cumulative:e,domain:n,thresholds:i,interval:s},c){void 0===(t={...Sh(t)}).domain&&(t.domain=n);void 0===t.cumulative&&(t.cumulative=e);void 0===t.thresholds&&(t.thresholds=i);void 0===t.interval&&(t.interval=s);void 0===t.value&&(t.value=c);return t.thresholds=function(t,e,n=TG){if(void 0===t)return void 0===e?n:xh(e);if("string"==typeof t){switch(t.toLowerCase()){case"freedman-diaconis":return se;case"scott":return ce;case"sturges":return Ot;case"auto":return TG}return Ru(t)}return t}(t.thresholds,t.interval),t}(n,e,Mu),null,null,i,t,my(e))}function HG(t={}){return function(t,e,n={}){if(null==n?.interval)return n;const{reduce:i=GU}=n,s={filter:null};return null!=n[e]&&(s[e]=i),null!=n[`${e}1`]&&(s[`${e}1`]=i),null!=n[`${e}2`]&&(s[`${e}2`]=i),t(s,n)}(WG,"y",cy(t,"x"))}function DG(t){if(null==t)return;const{value:e,cumulative:n,domain:i=pt,thresholds:s}=t,c=t=>{let c,a=Wu(t,e);if(vh(a)||function(t){return function(t){return Lh(t)&&"function"==typeof t?.floor&&t.floor()instanceof Date}(t)||Rh(t)&&vh(t)}(s)){a=lh(a,eh,Float64Array);let[t,e]="function"==typeof i?i(a):i,n="function"!=typeof s||Lh(s)?s:s(a,t,e);"number"==typeof n&&(n=$g(t,e,n)),Lh(n)&&(i===pt&&(t=n.floor(t),e=n.offset(n.floor(e))),n=n.range(t,n.offset(e))),c=n}else{a=$u(a);let[t,e]="function"==typeof i?i(a):i,n="function"!=typeof s||Lh(s)?s:s(a,t,e);if("number"==typeof n)if(i===pt){let i=zt(t,e,n);if(isFinite(i))if(i>0){let s=Math.round(t/i),c=Math.round(e/i);s*i<=t||--s,c*i>e||++c;let a=c-s+1;n=new Float64Array(a);for(let t=0;t<a;++t)n[t]=(s+t)*i}else if(i<0){i=-i;let s=Math.round(t*i),c=Math.round(e*i);s/i<=t||--s,c/i>e||++c;let a=c-s+1;n=new Float64Array(a);for(let t=0;t<a;++t)n[t]=(s+t)/i}else n=[t];else n=[t]}else n=Tt(t,e,n);else Lh(n)&&(i===pt&&(t=n.floor(t),e=n.offset(n.floor(e))),n=n.range(t,n.offset(e)));c=n}const l=[];if(1===c.length)l.push([c[0],c[0]]);else for(let t=1;t<c.length;++t)l.push([c[t-1],c[t]]);return l.bin=(n<0?OG:n>0?KG:zG)(l,c,a),l};return c.label=fh(e),c}function YG(t,e,n){return FU(t,e,n,kG)}function kG(t,e,n){return uU(t,e,n,JG)}function JG(t,e){return UU(t,e,MG)}function MG(t){switch(`${t}`.toLowerCase()){case"x":return PG;case"x1":return $G;case"x2":return qG;case"y":return jG;case"y1":return tp;case"y2":return ep}throw new Error(`invalid bin reduce: ${t}`)}function TG(t,e,n){return Math.min(200,ce(t,e,n))}function zG(t,e,n){return e=$u(e),i=>{const s=t.map((()=>[]));for(const t of i)s[ut(e,n[t])-1]?.push(t);return s}}function KG(t,e,n){const i=zG(t,e,n);return t=>{const e=i(t);for(let t=1,n=e.length;t<n;++t){const n=e[t-1],i=e[t];for(const t of n)i.push(t)}return e}}function OG(t,e,n){const i=zG(t,e,n);return t=>{const e=i(t);for(let t=e.length-2;t>=0;--t){const n=e[t+1],i=e[t];for(const t of n)i.push(t)}return e}}function _G(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const PG={reduceIndex:(t,e,{x1:n,x2:i})=>_G(n,i)},jG={reduceIndex:(t,e,{y1:n,y2:i})=>_G(n,i)},$G={reduceIndex:(t,e,{x1:n})=>n},qG={reduceIndex:(t,e,{x2:n})=>n},tp={reduceIndex:(t,e,{y1:n})=>n},ep={reduceIndex:(t,e,{y2:n})=>n};function np(t={},e={}){1===arguments.length&&([t,e]=function(t){const{offset:e,order:n,reverse:i,...s}=t;return[{offset:e,order:n,reverse:i},s]}(t));const{x1:n,x:i=n,y:s,...c}=e,[a,l,r,o]=function(t,e=Tu,n,i,{offset:s,order:c,reverse:a},l){if(null===e)throw new Error(`stack requires ${i}`);const r=Fh(l),[o,g]=yh(t),[B,d]=Ch(e),[Q,I]=Ch(e);return B.hint=Q.hint=sp,s=function(t){if(null==t)return;if("function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return ap;case"center":case"silhouette":return lp;case"wiggle":return rp}throw new Error(`unknown offset: ${t}`)}(s),c=function(t,e,n){if(void 0===t&&e===rp)return Bp(su);if(null==t)return;if("string"==typeof t){const e=t.startsWith("-"),i=e?cu:su;switch((e?t.slice(1):t).toLowerCase()){case"value":case n:return function(t){return(e,n,i)=>(e,n)=>t(i[e],i[n])}(i);case"z":return function(t){return(e,n,i,s)=>(e,n)=>t(s[e],s[n])}(i);case"sum":return function(t){return Ip(t,((t,e,n,i)=>Dt(uh(t),(t=>de(t,(t=>n[t]))),(t=>i[t]))))}(i);case"appearance":return function(t){return Ip(t,((t,e,n,i)=>Dt(uh(t),(t=>e[ee(t,(t=>n[t]))]),(t=>i[t]))))}(i);case"inside-out":return Bp(i)}return dp(ku(t))}if("function"==typeof t)return(1===t.length?dp:Qp)(t);if(Array.isArray(t))return i=t,Ip(su,(()=>i));var i;throw new Error(`invalid order: ${t}`)}(c,s,i),[cU(l,((i,l,o)=>{({data:i,facets:l}=function(t,e){if(1===e.length)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let s=0;for(const t of e)for(const e of t)i[e]&&++s,i[e]=1;if(0===s)return{data:t,facets:e};const c=(t=rh(t))[wu]=new Uint32Array(n+s);e=e.map((t=>rh(t,Uint32Array)));let a=n;i.fill(0);for(const n of e)for(let e=0,s=n.length;e<s;++e){const s=n[e];i[s]?(n[e]=a,t[a]=t[s],c[a]=s,++a):c[s]=s,i[s]=1}return{data:t,facets:e}}(i,l));const B=null==t?void 0:g(ph(Wu(i,t),o?.[n])),Q=Wu(i,e,Float64Array),F=Wu(i,r),u=c&&c(i,B,Q,F),h=i.length,U=d(new Float64Array(h)),b=I(new Float64Array(h)),C=[];for(const t of l){const e=B?Array.from(vt(t,(t=>B[t])).values()):[t];if(u)for(const t of e)t.sort(u);for(const t of e){let e=0,n=0;a&&t.reverse();for(const i of t){const t=Q[i];t<0?e=b[i]=(U[i]=e)+t:t>0?n=b[i]=(U[i]=n)+t:b[i]=U[i]=n}}C.push(e)}return s&&s(C,U,b,F),{data:i,facets:l}})),o,B,Q]}(i,s,"x","y",t,c);return{...a,x1:n,x:l,y1:r,y2:o,y:Gh(r,o)}}function ip({y:t,y1:e,y2:n,...i}={}){return i=cy(i,"x"),void 0===e&&void 0===n?np({y:t,...i}):([e,n]=function(t,e,n,i=Mu){return void 0===e&&void 0===n?(e=0,n=void 0===t?i:t):void 0===e?e=void 0===t?0:t:void 0===n&&(n=void 0===t?0:t),[e,n]}(t,e,n),{...i,y1:e,y2:n})}const sp={length:!0};function cp(t,e){let n=0,i=0;for(const s of t){const t=e[s];t<n&&(n=t),t>i&&(i=t)}return[n,i]}function ap(t,e,n){for(const i of t)for(const t of i){const[i,s]=cp(t,n);for(const c of t){const t=1/(s-i||1);e[c]=t*(e[c]-i),n[c]=t*(n[c]-i)}}}function lp(t,e,n){for(const i of t){for(const t of i){const[i,s]=cp(t,n);for(const c of t){const t=(s+i)/2;e[c]-=t,n[c]-=t}}op(i,e,n)}gp(t,e,n)}function rp(t,e,n,i){for(const s of t){const t=new At;let c=0;for(const a of s){let s=-1;const l=a.map((t=>Math.abs(n[t]-e[t]))),r=a.map((c=>{s=i?i[c]:++s;const a=n[c]-e[c],l=t.has(s)?a-t.get(s):0;return t.set(s,a),l})),o=[0,...yt(r)];for(const t of a)e[t]+=c,n[t]+=c;const g=de(l);g&&(c-=de(l,((t,e)=>(r[e]/2+o[e])*t))/g)}op(s,e,n)}gp(t,e,n)}function op(t,e,n){const i=jt(t,(t=>jt(t,(t=>e[t]))));for(const s of t)for(const t of s)e[t]-=i,n[t]-=i}function gp(t,e,n){const i=t.length;if(1===i)return;const s=t.map((t=>t.flat())),c=s.map((t=>(jt(t,(t=>e[t]))+_t(t,(t=>n[t])))/2)),a=jt(c);for(let t=0;t<i;t++){const i=a-c[t];for(const c of s[t])e[c]+=i,n[c]+=i}}function Bp(t){return Ip(t,((t,e,n,i)=>{const s=uh(t),c=Dt(s,(t=>e[ee(t,(t=>n[t]))]),(t=>i[t])),a=Zt(s,(t=>de(t,(t=>n[t]))),(t=>i[t])),l=[],r=[];let o=0;for(const t of c)o<0?(o+=a.get(t),l.push(t)):(o-=a.get(t),r.push(t));return r.reverse().concat(l)}))}function dp(t){return e=>{const n=Wu(e,t);return(t,e)=>su(n[t],n[e])}}function Qp(t){return e=>(n,i)=>t(e[n],e[i])}function Ip(t,e){return(n,i,s,c)=>{if(!c)throw new Error("missing channel: z");const a=new At(e(n,i,s,c).map(((t,e)=>[t,e])));return(e,n)=>t(a.get(c[e]),a.get(c[n]))}}const Fp={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class up extends ey{constructor(t,e={}){const{x:n,y:i,z:s,curve:c,tension:a}=e;super(t,{x:{value:n,scale:"x"},y:{value:i,scale:"y"},z:{value:Fh(e),optional:!0}},e,Fp),this.z=s,this.curve=VG(c,a),Fy(this,e)}filter(t){return t}project(t,e,n){this.curve!==wG&&super.project(t,e,n)}render(t,e,n,i,s){const{x:c,y:a}=n,{curve:l}=this;return Ib("svg:g",s).call(nb,this,i,s).call(ab,this,e).call((e=>e.selectAll().data(tb(t,[c,a],this,n)).enter().append("path").call(ib,this).call(qU,this,n).call(Gy,this,n,s).attr("d",l===wG&&s.projection?function(t,e,n){const i=Ar(t);return e=$u(e),n=$u(n),t=>{let s=[];const c=[s];for(const i of t)-1===i?(s=[],c.push(s)):s.push([e[i],n[i]]);return i({type:"MultiLineString",coordinates:c})}}(s.projection,c,a):UI().curve(l).defined((t=>t>=0)).x((t=>c[t])).y((t=>a[t]))))).node()}}function hp(t,{x:e=Ju,y:n=Mu,...i}={}){return new up(t,HG({...i,x:e,y:n}))}const Up={ariaLabel:"rect"};class bp extends ey{constructor(t,e={}){const{x1:n,y1:i,x2:s,y2:c,inset:a=0,insetTop:l=a,insetRight:r=a,insetBottom:o=a,insetLeft:g=a,rx:B,ry:d}=e;super(t,{x1:{value:n,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:c,scale:"y",optional:!0}},e,Up),this.insetTop=Ou(l),this.insetRight=Ou(r),this.insetBottom=Ou(o),this.insetLeft=Ou(g),this.rx=lb(B,"auto"),this.ry=lb(d,"auto")}render(t,e,n,i,s){const{x:c,y:a}=e,{x1:l,y1:r,x2:o,y2:g}=n,{marginTop:B,marginRight:d,marginBottom:Q,marginLeft:I,width:F,height:u}=i,{projection:h}=s,{insetTop:U,insetRight:b,insetBottom:C,insetLeft:y,rx:f,ry:G}=this;return Ib("svg:g",s).call(nb,this,i,s).call(ab,this,{x:l&&o&&c,y:r&&g&&a},0,0).call((e=>e.selectAll().data(t).enter().append("rect").call(ib,this).attr("x",l&&o&&(h||!EC(c))?t=>Math.min(l[t],o[t])+y:I+y).attr("y",r&&g&&(h||!EC(a))?t=>Math.min(r[t],g[t])+U:B+U).attr("width",l&&o&&(h||!EC(c))?t=>Math.max(0,Math.abs(o[t]-l[t])-y-b):F-d-I-b-y).attr("height",r&&g&&(h||!EC(a))?t=>Math.max(0,Math.abs(r[t]-g[t])-U-C):u-B-Q-U-C).call(cb,"rx",f).call(cb,"ry",G).call($U,this,n))).node()}}function Cp(t,e={}){return function(t){return function({x:t,x1:e,x2:n}){return void 0!==t||void 0!==e||void 0!==n}(t)||oh(t)||void 0!==t.interval}(e)||(e={...e,x:Ju,y2:Mu,interval:1}),new bp(t,ip(function(t={}){return Sy("x",my,t,!0)}(function(t={}){return oh(t)?t:{...t,y:Mu}}(e))))}function yp(t,e,n){var i=void 0===e?null:e,s=function(t,e){var n=atob(t);if(e){for(var i=new Uint8Array(n.length),s=0,c=n.length;s<c;++s)i[s]=n.charCodeAt(s);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(t,void 0!==n&&n),c=s.indexOf("\n",10)+1,a=s.substring(c)+(i?"//# sourceMappingURL="+i:""),l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}var fp,Gp,pp,mp,Ap=(fp="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCXZhciBkaXN0cmlidXRpb25zID0ge2V4cG9ydHM6IHt9fTsKCgkoZnVuY3Rpb24gKG1vZHVsZSkgewoKCSAgLy8gQSBudW1iZXIgb2YgbG9nIHByb2JhYmlsaXR5IGRlbnNpdHkgZnVuY3Rpb25zIChQREYpLiBOYW1pbmcgYW5kIHBhcmFtZXRlcml6YXRpb24KCSAgLy8gc2hvdWxkIG1hdGNoIFIncywgZXhjZXB0IGZvciB0aGF0IGFsbCBmdW5jdGlvbnMgcmVzaWRlIGluIGFuIGxkIG9iamVjdCAoCgkgIC8vIGFzIGluICJsb2cgZGVuc2l0eSIpLCBzbyB0byBnZXQgYSBub3JtYWwgbG9nIGRlbnNpdHkgeW91IHdvdWxkIHdyaXRlCgkgIC8vIGxkLm5vcm0oLi4uKS4KCSAgLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0CgkgIC8vIChodHRwczovL2dpdGh1Yi5jb20vanN0YXQvKSB3aGljaCBpbmNsdWRlcyBQREYgZm9yIG1hbnkgY29tbW9uIHByb2JhYmlsaXR5CgkgIC8vIGRpc3RyaWJ1dGlvbnMuIFdoYXQgSSBoYXZlIGRvbmUgaXMgb25seSB0byBjb252ZXJ0IHRoZXNlIHRvIGxvZyBQREZzLgoKCSAgLyoKCSAgT3JpZ2luYWwgd29yayBDb3B5cmlnaHQgKGMpIDIwMTMgalN0YXQKCSAgTW9kaWZpZWQgd29yayBDb3B5cmlnaHQgKGMpIDIwMTUgUmFzbXVzIELDpcOldGggCgkgIAlQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CgkgIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsCgkgIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKCSAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAoJICBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKCSAgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCSAgCVRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCgkgIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoJICAJVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKCSAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCgkgIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQoJICBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCgkgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCgkgIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KCSAgVEhFIFNPRlRXQVJFLgoJICAJKi8KCgkgIC8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOgoJICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzCgkgIC8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLAoJICAvLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC4KCSAgLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsCgkgIC8vIG9iamVjdCBsZCAuCgkgIChmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewoJICAgIGlmIChtb2R1bGUuZXhwb3J0cykgewoJICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CgkgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cywKCSAgICAgIC8vIGxpa2UgTm9kZS4KCSAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJICAgIH0gZWxzZSB7CgkgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KQoJICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTsKCSAgICB9CgkgIH0pKGNvbW1vbmpzR2xvYmFsLCBmdW5jdGlvbiAoKSB7CgkgICAgLy8gT2JqZWN0IHRvIGhvbGQgdGhlIGZ1bmN0aW9ucyB0byBiZSBleHBvcnRlZC4KCSAgICB2YXIgbGQgPSB7fTsKCgkgICAgLy8vLy8vLy8vLyBIZWxwZXIgZnVuY3Rpb25zIC8vLy8vLy8vLy8KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCSAgICB2YXIgbGdhbW1hID0gZnVuY3Rpb24gKHgpIHsKCSAgICAgIHZhciBqID0gMDsKCSAgICAgIHZhciBjb2YgPSBbNzYuMTgwMDkxNzI5NDcxNDYsIC04Ni41MDUzMjAzMjk0MTY3NywgMjQuMDE0MDk4MjQwODMwOTEsIC0xLjIzMTczOTU3MjQ1MDE1NSwgMC4xMjA4NjUwOTczODY2MTc5ZS0yLCAtMC41Mzk1MjM5Mzg0OTUzZS01XTsKCSAgICAgIHZhciBzZXIgPSAxLjAwMDAwMDAwMDE5MDAxNTsKCSAgICAgIHZhciB4eCwgeSwgdG1wOwoJICAgICAgdG1wID0gKHkgPSB4eCA9IHgpICsgNS41OwoJICAgICAgdG1wIC09ICh4eCArIDAuNSkgKiBsb2codG1wKTsKCSAgICAgIGZvciAoOyBqIDwgNjsgaisrKSBzZXIgKz0gY29mW2pdIC8gKyt5OwoJICAgICAgcmV0dXJuIGxvZygyLjUwNjYyODI3NDYzMTAwMDUgKiBzZXIgLyB4eCkgLSB0bXA7CgkgICAgfTsKCSAgICBsZC5sZ2FtbWEgPSBsZ2FtbWE7CgkgICAgdmFyIGxmYWN0b3JpYWwgPSBmdW5jdGlvbiAobikgewoJICAgICAgcmV0dXJuIG4gPCAwID8gTmFOIDogbGdhbW1hKG4gKyAxKTsKCSAgICB9OwoJICAgIGxkLmxmYWN0b3JpYWwgPSBsZmFjdG9yaWFsOwoJICAgIHZhciBsY2hvb3NlID0gZnVuY3Rpb24gKG4sIGspIHsKCSAgICAgIHJldHVybiBsZmFjdG9yaWFsKG4pIC0gbGZhY3RvcmlhbChrKSAtIGxmYWN0b3JpYWwobiAtIGspOwoJICAgIH07CgkgICAgbGQubGNob29zZSA9IGxjaG9vc2U7CgkgICAgdmFyIGxiZXRhID0gZnVuY3Rpb24gKGEsIGIpIHsKCSAgICAgIHJldHVybiBsZ2FtbWEoYSkgKyBsZ2FtbWEoYikgLSBsZ2FtbWEoYSArIGIpOwoJICAgIH07CgkgICAgbGQubGJldGEgPSBsYmV0YTsKCSAgICB2YXIgbG9nID0gTWF0aC5sb2c7CgkgICAgdmFyIGV4cCA9IE1hdGguZXhwOwoJICAgIHZhciBhYnMgPSBNYXRoLmFiczsKCSAgICB2YXIgcG93ID0gTWF0aC5wb3c7CgkgICAgdmFyIHNxcnQgPSBNYXRoLnNxcnQ7CgkgICAgdmFyIHBpID0gTWF0aC5QSTsKCgkgICAgLy8vLy8vLy8vLyBDb250aW5vdXMgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIGxkLmJldGEgPSBmdW5jdGlvbiAoeCwgc2hhcGUxLCBzaGFwZTIpIHsKCSAgICAgIGlmICh4ID4gMSB8fCB4IDwgMCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfQoJICAgICAgaWYgKHNoYXBlMSA9PT0gMSAmJiBzaGFwZTIgPT09IDEpIHsKCSAgICAgICAgcmV0dXJuIDA7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gKHNoYXBlMSAtIDEpICogbG9nKHgpICsgKHNoYXBlMiAtIDEpICogbG9nKDEgLSB4KSAtIGxiZXRhKHNoYXBlMSwgc2hhcGUyKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIGxkLmNhdWNoeSA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKCSAgICAgIHJldHVybiBsb2coc2NhbGUpIC0gbG9nKHBvdyh4IC0gbG9jYXRpb24sIDIpICsgcG93KHNjYWxlLCAyKSkgLSBsb2cocGkpOwoJICAgIH07CgkgICAgbGQubm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCkgewoJICAgICAgcmV0dXJuIC0wLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZCkgLSBwb3coeCAtIG1lYW4sIDIpIC8gKDIgKiBzZCAqIHNkKTsKCSAgICB9OwoKCSAgICAvLyBBIGJpdmFyaWF0ZSBOb3JtYWwgZGlzdHJpYnV0aW9uIHBhcmFtZXRlcml6ZWQgYnkgYXJyYXlzIG9mIHR3byBtZWFucyBhbmQgU0RzLCBhbmQgCgkgICAgLy8gdGhlIGNvcnJlbGF0aW9uLgoJICAgIGxkLmJpdmFybm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCwgY29ycikgewoJICAgICAgdmFyIHogPSBwb3coeFswXSAtIG1lYW5bMF0sIDIpIC8gcG93KHNkWzBdLCAyKSArIHBvdyh4WzFdIC0gbWVhblsxXSwgMikgLyBwb3coc2RbMV0sIDIpIC0gMiAqIGNvcnIgKiAoeFswXSAtIG1lYW5bMF0pICogKHhbMV0gLSBtZWFuWzFdKSAvIChzZFswXSAqIHNkWzFdKTsKCSAgICAgIHZhciBub3JtYWxpemluZ19mYWN0b3IgPSAtKGxvZygyKSArIGxvZyhwaSkgKyBsb2coc2RbMF0pICsgbG9nKHNkWzFdKSArIDAuNSAqIGxvZygxIC0gcG93KGNvcnIsIDIpKSk7CgkgICAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSkpOwoJICAgICAgcmV0dXJuIGJpdmFyX2xvZ19kZW5zOwoJICAgIH07CgkgICAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKCSAgICAgIHJldHVybiAtYWJzKHggLSBsb2NhdGlvbikgLyBzY2FsZSAtIGxvZygyICogc2NhbGUpOwoJICAgIH07CgkgICAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7CgkgICAgbGQuZ2FtbWEgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHJhdGUpIHsKCSAgICAgIHZhciBzY2FsZSA9IDEgLyByYXRlOwoJICAgICAgaWYgKHggPCAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICBpZiAoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgewoJICAgICAgICByZXR1cm4gLWxvZyhzY2FsZSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gKHNoYXBlIC0gMSkgKiBsb2coeCkgLSB4IC8gc2NhbGUgLSBsZ2FtbWEoc2hhcGUpIC0gc2hhcGUgKiBsb2coc2NhbGUpOwoJICAgICAgfQoJICAgIH07CgkgICAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHNjYWxlKSB7CgkgICAgICBpZiAoeCA8PSAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gLShzaGFwZSArIDEpICogbG9nKHgpIC0gc2NhbGUgLyB4IC0gbGdhbW1hKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKTsKCSAgICB9OwoJICAgIGxkLmxub3JtID0gZnVuY3Rpb24gKHgsIG1lYW5sb2csIHNkbG9nKSB7CgkgICAgICBpZiAoeCA8PSAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gLWxvZyh4KSAtIDAuNSAqIGxvZygyICogcGkpIC0gbG9nKHNkbG9nKSAtIHBvdyhsb2coeCkgLSBtZWFubG9nLCAyKSAvICgyICogc2Rsb2cgKiBzZGxvZyk7CgkgICAgfTsKCSAgICBsZC5wYXJldG8gPSBmdW5jdGlvbiAoeCwgc2NhbGUsIHNoYXBlKSB7CgkgICAgICBpZiAoeCA8IHNjYWxlKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gbG9nKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKSAtIChzaGFwZSArIDEpICogbG9nKHgpOwoJICAgIH07CgkgICAgbGQudCA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUsIGRmKSB7CgkgICAgICBkZiA9IGRmID4gMWUxMDAgPyAxZTEwMCA6IGRmOwoJICAgICAgcmV0dXJuIGxnYW1tYSgoZGYgKyAxKSAvIDIpIC0gbGdhbW1hKGRmIC8gMikgLSBsb2coc3FydChwaSAqIGRmKSAqIHNjYWxlKSArIGxvZyhwb3coMSArIDEgLyBkZiAqIHBvdygoeCAtIGxvY2F0aW9uKSAvIHNjYWxlLCAyKSwgLShkZiArIDEpIC8gMikpOwoJICAgIH07CgoJICAgIC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGUKCSAgICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSB3ZWlidWxsIGRpc3RyaWJ1dGlvbjogCgkgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmMKCSAgICBsZC53ZWlidWxsID0gZnVuY3Rpb24gKHgsIHNoYXBlLCBzY2FsZSkgewoJICAgICAgaWYgKHggPCAwKSByZXR1cm4gLUluZmluaXR5OwoJICAgICAgaWYgKHggPT09IDAgJiYgc2hhcGUgPCAxKSByZXR1cm4gSW5maW5pdHk7CgkgICAgICB2YXIgdG1wMSA9IHBvdyh4IC8gc2NhbGUsIHNoYXBlIC0gMSk7CgkgICAgICB2YXIgdG1wMiA9IHRtcDEgKiAoeCAvIHNjYWxlKTsKCSAgICAgIHJldHVybiAtdG1wMiArIGxvZyhzaGFwZSAqIHRtcDEgLyBzY2FsZSk7CgkgICAgfTsKCgkgICAgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZQoJICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIGxvZ2lzdGljIGRpc3RyaWJ1dGlvbjogCgkgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2Rsb2dpcy5jCgkgICAgbGQubG9naXMgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CgkgICAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpOwoJICAgICAgdmFyIGUgPSBleHAoLXgpOwoJICAgICAgdmFyIGYgPSAxLjAgKyBlOwoJICAgICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7CgkgICAgfTsKCSAgICBsZC5kaXJpY2hsZXQgPSBmdW5jdGlvbiAoeCwgYWxwaGEpIHsKCSAgICAgIHZhciBzdW1fYWxwaGEgPSAwOwoJICAgICAgdmFyIHN1bV9sZ2FtbWFfYWxwaGEgPSAwOwoJICAgICAgdmFyIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCA9IDA7CgkgICAgICB2YXIgbiA9IGFscGhhLmxlbmd0aDsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7CgkgICAgICAgIHN1bV9hbHBoYSArPSBhbHBoYVtpXTsKCSAgICAgICAgc3VtX2xnYW1tYV9hbHBoYSArPSBsZ2FtbWEoYWxwaGFbaV0pOwoJICAgICAgICBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggKz0gKGFscGhhW2ldIC0gMSkgKiBsb2coeFtpXSk7CgkgICAgICB9CgkgICAgICByZXR1cm4gbGdhbW1hKHN1bV9hbHBoYSkgLSBzdW1fbGdhbW1hX2FscGhhICsgc3VtX2FscGhhX3N1Yl8xX2xvZ194OwoJICAgIH07CgkgICAgbGQuZXhwID0gZnVuY3Rpb24gKHgsIHJhdGUpIHsKCSAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhyYXRlKSAtIHJhdGUgKiB4OwoJICAgIH07CgkgICAgbGQudW5pZiA9IGZ1bmN0aW9uICh4LCBtaW4sIG1heCkgewoJICAgICAgcmV0dXJuIHggPCBtaW4gfHwgeCA+IG1heCA/IC1JbmZpbml0eSA6IGxvZygxIC8gKG1heCAtIG1pbikpOwoJICAgIH07CgoJICAgIC8vLy8vLy8vLy8gRGlzY3JldGUgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgbGQuYmVybiA9IGZ1bmN0aW9uICh4LCBwcm9iKSB7CgkgICAgICByZXR1cm4gISh4ID09PSAwIHx8IHggPT09IDEpID8gLUluZmluaXR5IDogbG9nKHggKiBwcm9iICsgKDEgLSB4KSAqICgxIC0gcHJvYikpOwoJICAgIH07CgkgICAgbGQuY2F0ID0gZnVuY3Rpb24gKHgsIHByb2JzKSB7CgkgICAgICBpZiAoeCA8IDEgfHwgeCA+IHByb2JzLmxlbmd0aCkgewoJICAgICAgICByZXR1cm4gLUluZmluaXR5OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGxvZyhwcm9ic1t4IC0gMV0pOwoJICAgICAgfQoJICAgIH07CgkgICAgbGQuYmlub20gPSBmdW5jdGlvbiAoeCwgc2l6ZSwgcHJvYikgewoJICAgICAgaWYgKHggPiBzaXplIHx8IHggPCAwKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICBpZiAocHJvYiA9PT0gMCB8fCBwcm9iID09PSAxKSB7CgkgICAgICAgIHJldHVybiBzaXplICogcHJvYiA9PT0geCA/IDAgOiAtSW5maW5pdHk7CgkgICAgICB9CgkgICAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTsKCSAgICB9OwoJICAgIGxkLm5iaW5vbSA9IGZ1bmN0aW9uICh4LCBzaXplLCBwcm9iKSB7CgkgICAgICBpZiAoeCA8IDApIHsKCSAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKCSAgICAgIH0KCSAgICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpOwoJICAgIH07CgkgICAgbGQuaHlwZXIgPSBmdW5jdGlvbiAoeCwgbSwgbiwgaykgewoJICAgICAgaWYgKHggPCAwIHx8IHggPiBrKSB7CgkgICAgICAgIHJldHVybiAtSW5maW5pdHk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2UobiwgayAtIHgpIC0gbGNob29zZShtICsgbiwgayk7CgkgICAgICB9CgkgICAgfTsKCSAgICBsZC5wb2lzID0gZnVuY3Rpb24gKHgsIGxhbWJkYSkgewoJICAgICAgcmV0dXJuIHggPCAwID8gLUluZmluaXR5IDogbG9nKGxhbWJkYSkgKiB4IC0gbGFtYmRhIC0gbGZhY3RvcmlhbCh4KTsKCSAgICB9OwoJICAgIHJldHVybiBsZDsKCSAgfSk7Cgl9KShkaXN0cmlidXRpb25zKTsKCXZhciBkaXN0cmlidXRpb25zRXhwb3J0cyA9IGRpc3RyaWJ1dGlvbnMuZXhwb3J0czsKCgl2YXIgbWNtYyA9IHtleHBvcnRzOiB7fX07CgoJKGZ1bmN0aW9uIChtb2R1bGUpIHsKCgkgIC8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOgoJICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzCgkgIC8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLAoJICAvLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC4KCSAgLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsCgkgIC8vIG9iamVjdCBtY21jIC4KCSAgKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7CgkgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CgkgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXQKCSAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLAoJICAgICAgLy8gbGlrZSBOb2RlLgoJICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7CgkgICAgfSBlbHNlIHsKCSAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCgkgICAgICByb290Lm1jbWMgPSBmYWN0b3J5KCk7CgkgICAgfQoJICB9KShjb21tb25qc0dsb2JhbCwgZnVuY3Rpb24gKCkgewoJICAgIC8vLyBUaGUgYWN0dWFsIG1vZHVsZSBjb2RlIHN0YXJ0cyBoZXJlIC8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgCgoJICAgIC8vLy8vLy8vLy8gSGVscGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vCgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqLwoJICAgIHZhciBydW5pZiA9IGZ1bmN0aW9uIChtaW4sIG1heCkgewoJICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjsKCSAgICB9OwoKCSAgICAvKiogUmV0dXJucyBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKi8KCSAgICB2YXIgcnVuaWZfZGlzY3JldGUgPSBmdW5jdGlvbiAobWluLCBtYXgpIHsKCSAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluOwoJICAgIH07CgoJICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkCgkgICAgICogIGJ5IG1lYW4gYW5kIHNkLiAKCSAgICAgKiAgQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qc3RhdC9qc3RhdC9ibG9iL21hc3Rlci9zcmMvc3BlY2lhbC5qcyAqLwoJICAgIHZhciBybm9ybSA9IGZ1bmN0aW9uIChtZWFuLCBzZCkgewoJICAgICAgdmFyIHUsIHYsIHgsIHksIHE7CgkgICAgICBkbyB7CgkgICAgICAgIHUgPSBNYXRoLnJhbmRvbSgpOwoJICAgICAgICB2ID0gMS43MTU2ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpOwoJICAgICAgICB4ID0gdSAtIDAuNDQ5ODcxOwoJICAgICAgICB5ID0gTWF0aC5hYnModikgKyAwLjM4NjU5NTsKCSAgICAgICAgcSA9IHggKiB4ICsgeSAqICgwLjE5NjAwICogeSAtIDAuMjU0NzIgKiB4KTsKCSAgICAgIH0gd2hpbGUgKHEgPiAwLjI3NTk3ICYmIChxID4gMC4yNzg0NiB8fCB2ICogdiA+IC00ICogTWF0aC5sb2codSkgKiB1ICogdSkpOwoJICAgICAgcmV0dXJuIHYgLyB1ICogc2QgKyBtZWFuOwoJICAgIH07CgoJICAgIC8qKiBSZXR1cm5zIGEgZGVlcCBjbG9uZSBvZiBzcmMsIHNvcnQgb2YuLi4gSXQgb25seSBjb3BpZXMgYSBsaW1pdGVkCgkgICAgICogbnVtYmVyIG9mIHR5cGVzIGFuZCwgZm9yIGV4YW1wbGUsIGZ1bmN0aW9uIGFyZSBub3QgY29waWVkLiAKCSAgICAgKiBGcm9tIGh0dHA6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1jbG9uZQoJICAgICAqLwoJICAgIHZhciBkZWVwX2Nsb25lID0gZnVuY3Rpb24gKHNyYykgewoJICAgICAgZnVuY3Rpb24gbWl4aW4oZGVzdCwgc291cmNlLCBjb3B5RnVuYykgewoJICAgICAgICB2YXIgbmFtZSwKCSAgICAgICAgICBzLAoJICAgICAgICAgIGVtcHR5ID0ge307CgkgICAgICAgIGZvciAobmFtZSBpbiBzb3VyY2UpIHsKCSAgICAgICAgICAvLyB0aGUgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpIGNvbmRpdGlvbiBhdm9pZHMgY29weWluZyBwcm9wZXJ0aWVzIGluICJzb3VyY2UiCgkgICAgICAgICAgLy8gaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZS4JIEZvciBleGFtcGxlLCBpZiBkZXN0IGhhcyBhIGN1c3RvbSB0b1N0cmluZygpIG1ldGhvZCwKCSAgICAgICAgICAvLyBkb24ndCBvdmVyd3JpdGUgaXQgd2l0aCB0aGUgdG9TdHJpbmcoKSBtZXRob2QgdGhhdCBzb3VyY2UgaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZQoJICAgICAgICAgIHMgPSBzb3VyY2VbbmFtZV07CgkgICAgICAgICAgaWYgKCEobmFtZSBpbiBkZXN0KSB8fCBkZXN0W25hbWVdICE9PSBzICYmICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSkgewoJICAgICAgICAgICAgZGVzdFtuYW1lXSA9IGNvcHlGdW5jID8gY29weUZ1bmMocykgOiBzOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gZGVzdDsKCSAgICAgIH0KCSAgICAgIGlmICghc3JjIHx8IHR5cGVvZiBzcmMgIT0gIm9iamVjdCIgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNyYykgPT09ICJbb2JqZWN0IEZ1bmN0aW9uXSIpIHsKCSAgICAgICAgLy8gbnVsbCwgdW5kZWZpbmVkLCBhbnkgbm9uLW9iamVjdCwgb3IgZnVuY3Rpb24KCSAgICAgICAgcmV0dXJuIHNyYzsgLy8gYW55dGhpbmcKCSAgICAgIH0KCSAgICAgIGlmIChzcmMubm9kZVR5cGUgJiYgImNsb25lTm9kZSIgaW4gc3JjKSB7CgkgICAgICAgIC8vIERPTSBOb2RlCgkgICAgICAgIHJldHVybiBzcmMuY2xvbmVOb2RlKHRydWUpOyAvLyBOb2RlCgkgICAgICB9CgkgICAgICBpZiAoc3JjIGluc3RhbmNlb2YgRGF0ZSkgewoJICAgICAgICAvLyBEYXRlCgkgICAgICAgIHJldHVybiBuZXcgRGF0ZShzcmMuZ2V0VGltZSgpKTsgLy8gRGF0ZQoJICAgICAgfQoJICAgICAgaWYgKHNyYyBpbnN0YW5jZW9mIFJlZ0V4cCkgewoJICAgICAgICAvLyBSZWdFeHAKCSAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc3JjKTsgLy8gUmVnRXhwCgkgICAgICB9CgkgICAgICB2YXIgciwgaSwgbDsKCSAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBBcnJheSkgewoJICAgICAgICAvLyBhcnJheQoJICAgICAgICByID0gW107CgkgICAgICAgIGZvciAoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKSB7CgkgICAgICAgICAgaWYgKGkgaW4gc3JjKSB7CgkgICAgICAgICAgICByLnB1c2goZGVlcF9jbG9uZShzcmNbaV0pKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIC8vIGdlbmVyaWMgb2JqZWN0cwoJICAgICAgICByID0gc3JjLmNvbnN0cnVjdG9yID8gbmV3IHNyYy5jb25zdHJ1Y3RvcigpIDoge307CgkgICAgICB9CgkgICAgICByZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTsKCSAgICB9OwoKCSAgICAvKiogU3BlY2lhbGl6ZWQgY2xvbmUgZnVuY3Rpb24gdGhhdCBvbmx5IGNsb25lcyBzY2FsYXJzIGFuZCBuZXN0ZWQgYXJyYXlzIHdoZXJlCgkgICAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvbgoJICAgICAqIGlzIG1lYW50IGFzIGEgZmFzdCB3YXkgb2YgY2xvbmluZyBwYXJhbWV0ZXIgZHJhd3Mgd2l0aGluIHRoZSBtY21jIHNhbXBsaW5nCgkgICAgICogbG9vcC4KCSAgICAgKi8KCSAgICB2YXIgY2xvbmVfcGFyYW1fZHJhdyA9IGZ1bmN0aW9uICh4KSB7CgkgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSkgewoJICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4WzBdKSkgewoJICAgICAgICAgIC8vIHggaXMgYW4gYXJyYXkgb2YgYXJyYXlzIHNvIHdlIG5lZWQgdG8gY2xvbmUgaXQgcmVjdXJzaXZlbHkKCSAgICAgICAgICB2YXIgeF9jb3B5ID0gW107CgkgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHhfY29weS5wdXNoKGNsb25lX3BhcmFtX2RyYXcoeFtpXSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgICByZXR1cm4geF9jb3B5OwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgYXJyYXlzIG9mIHNjYWxhcnMKCSAgICAgICAgICByZXR1cm4geC5zbGljZSgwKTsKCSAgICAgICAgfQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXIKCSAgICAgICAgcmV0dXJuIHg7CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYSBudW1iZXIuCgkgICAgICovCgkgICAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uIChvYmplY3QpIHsKCSAgICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09ICJudW1iZXIiIHx8IHR5cGVvZiBvYmplY3QgPT0gIm9iamVjdCIgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBOdW1iZXI7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYSAocG9zc2libHkgbXVsdGlkaW1lbnNpb25hbC9uZXN0ZWQpIGFycmF5LgoJICAgICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLAoJICAgICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LgoJICAgICAqIEBwYXJhbSBpbml0IC0gQSB2YWx1ZSBvciBhIGZ1bmN0aW9uIHVzZWQgdG8gZmlsbCBpbiB0aGUgZWFjaCBlbGVtZW50IGluCgkgICAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIAoJICAgICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0bwoJICAgICAqICAgZmlsbCBpbiBlYWNoIGVsZW1lbnQuCgkgICAgICogQGV4YW1wbGUgCgkgICAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXQoJICAgICAqIGNyZWF0ZV9hcnJheShbMiwzXSwgMSkKCSAgICAgKi8KCSAgICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24gKGRpbSwgaW5pdCkgewoJICAgICAgdmFyIGFyciA9IG5ldyBBcnJheShkaW1bMF0pOwoJICAgICAgdmFyIGk7CgkgICAgICBpZiAoZGltLmxlbmd0aCA9PSAxKSB7CgkgICAgICAgIC8vIEZpbGwgaXQgdXAgd2l0aCBpbml0CgkgICAgICAgIGlmICh0eXBlb2YgaW5pdCA9PT0gImZ1bmN0aW9uIikgewoJICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgICAgYXJyW2ldID0gaW5pdCgpOwoJICAgICAgICAgIH0KCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIGFycltpXSA9IGluaXQ7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKGRpbS5sZW5ndGggPiAxKSB7CgkgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgIGFycltpXSA9IGNyZWF0ZV9hcnJheShkaW0uc2xpY2UoMSksIGluaXQpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgewoJICAgICAgICB0aHJvdyAiY3JlYXRlX2FycmF5IGNhbid0IGNyZWF0ZSBhIGRpbWVuc2lvbmxlc3MgYXJyYXkiOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGFycjsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciAKCSAgICAgKiBleGFtcGxlLCBhcnJheV9kaW0oIFtbMSwgMl0sIFsxLCAyXV0gKSBzaG91bGQgcmV0dXJuIFsyLCAyXQoJICAgICAqIEFzc3VtZXMgdGhhdCBhbGwgYXJyYXlzIGluc2lkZSBhbm90aGVyIGFycmF5IGFyZSBvZiB0aGUgc2FtZSBsZW5ndGguCgkgICAgICogQGV4YW1wbGUKCSAgICAgKiAvLyBTaG91bGQgcmV0dXJuIFs0LCAyLCAxXQoJICAgICAqIGFycmF5X2RpbShjcmVhdGVfYXJyYXkoWzQsIDIsIDFdLCAwKSkKCSAgICAgKi8KCSAgICB2YXIgYXJyYXlfZGltID0gZnVuY3Rpb24gKGEpIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGFbMF0pKSB7CgkgICAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIFthLmxlbmd0aF07CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsIGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50cwoJICAgICAqIGFzIGp1ZGdlZCBieSB0aGUgIj09IiBvcGVyYXRvci4gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgoJICAgICAqIEFkYXB0ZWQgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNDg1Mzk3NC8xMDAxODQ4CgkgICAgICovCgkgICAgdmFyIGFycmF5X2VxdWFsID0gZnVuY3Rpb24gKGExLCBhMikgewoJICAgICAgaWYgKGExLmxlbmd0aCAhPSBhMi5sZW5ndGgpIHJldHVybiBmYWxzZTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBuZXN0ZWQgYXJyYXlzCgkgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGExW2ldKSAmJiBBcnJheS5pc0FycmF5KGEyW2ldKSkgewoJICAgICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5cwoJICAgICAgICAgIGlmICghYXJyYXlfZXF1YWwoYTFbaV0sIGEyW2ldKSkgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9IGVsc2UgaWYgKGExW2ldICE9IGEyW2ldKSB7CgkgICAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9CgkgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgICByZXR1cm4gdHJ1ZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUcmF2ZXJzZXMgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsICJsZWFmIG5vZGVzIiwgCgkgICAgICogdGhhdCBpcywgdmFsdWVzIHRoYXQgYXJlIG5vdCBhcnJheXMuIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHNhbWUgc2l6ZSBhcwoJICAgICAqIGEuCgkgICAgICovCgkgICAgdmFyIG5lc3RlZF9hcnJheV9hcHBseSA9IGZ1bmN0aW9uIChhLCBmdW4pIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoYS5sZW5ndGgpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGZ1bihhKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKiogUmFuZG9taXppbmcgdGhlIGFycmF5IGVsZW1lbnQgb3JkZXIgaW4tcGxhY2UuIFVzaW5nIER1cnN0ZW5mZWxkCgkgICAgICogc2h1ZmZsZSBhbGdvcml0aG0uIEFkYXB0ZWQgZnJvbSBoZXJlOiAKCSAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4CgkgICAgICovCgkgICAgZnVuY3Rpb24gc2h1ZmZsZV9hcnJheShhcnJheSkgewoJICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKCSAgICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTsKCSAgICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTsKCSAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTsKCSAgICAgICAgYXJyYXlbal0gPSB0ZW1wOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGFycmF5OwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5CgkgICAgICogbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCAibGVhZiBub2RlcyIgYW5kIHJldHVybnMgYW4gYXJyYXkgCgkgICAgICogb2YgdGhlIHNhbWUgc2l6ZSBhcyBhLiBUaGUgZGlmZmVyZW5jZSBpcyB0aGF0IG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkKCSAgICAgKiBicmFuY2hlcyByYW5kb21seS4KCSAgICAgKi8KCSAgICB2YXIgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSA9IGZ1bmN0aW9uIChhLCBmdW4pIHsKCSAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CgkgICAgICAgIHZhciBsZW4gPSBhLmxlbmd0aDsKCSAgICAgICAgdmFyIGk7CgkgICAgICAgIHZhciBhcnJheV9pcyA9IFtdOwoJICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCSAgICAgICAgICBhcnJheV9pc1tpXSA9IGk7CgkgICAgICAgIH0KCSAgICAgICAgc2h1ZmZsZV9hcnJheShhcnJheV9pcyk7CgkgICAgICAgIHZhciByZXN1bHQgPSBbXTsKCSAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkgICAgICAgICAgdmFyIGFycmF5X2kgPSBhcnJheV9pc1tpXTsKCSAgICAgICAgICByZXN1bHRbYXJyYXlfaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVthcnJheV9pXSwgZnVuKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGZ1bihhKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgYSBwcmV0dHkgd2F5IG9mIHNldHRpbmcgZGVmYXVsdCBvcHRpb25zIHdoZXJlIHRoZSBkZWZ1bHRzIGNhbiBiZQoJICAgICAqIG92ZXJyaWRkZW4gYnkgYW4gb3B0aW9ucyBvYmplY3QuCgkgICAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmcKCSAgICAgKiAgQHBhcmFtIG15X29wdGlvbnMgLSBhbiBvcHRpb24gb2JqZWN0IHRoYXQgY291bGQgaGF2ZSBvcHRpb25fbmFtZSAKCSAgICAgKiAgICBhcyBhIG1lbWJlci4KCSAgICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgCgkgICAgICogICBpcyBub3QgZGVmaW5lZCBpbiBteV9vcHRpb25zLgoJICAgICAqIEBleGFtcGxlCgkgICAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9CgkgICAgICogdmFyIHBpID0gZ2V0X29wdGlvbigicGkiLCBteV9vcHRpb25zLCAzLjE0KQoJICAgICAqLwoJICAgIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuCgkgICAgLy8gYnkgYW4gb3B0aW9ucyBvYmplY3QuIEZvciBleGFtcGxlOgoJICAgIC8vIHZhciBwaSA9IGdldF9vcHRpb24oInBpIiwgbXlfb3B0aW9ucywgMy4xNCkKCSAgICB2YXIgZ2V0X29wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7CgkgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCSAgICAgIHJldHVybiBvcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbl9uYW1lKSAmJiBvcHRpb25zW29wdGlvbl9uYW1lXSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSBudWxsID8gb3B0aW9uc1tvcHRpb25fbmFtZV0gOiBkZWZhdWxfdmFsdWU7CgkgICAgfTsKCgkgICAgLyoqIFZlcnNpb24gb2YgZ2V0X29wdGlvbiB3aGVyZSB0aGUgb3B0aW9uIHNob3VsZCBiZSBhIG9uZSBvciBtdWx0aS1kaW1lbnNpb25hbAoJICAgICAqIGFycmF5IGFuZCB3aGVyZSB0aGUgZGVmYXVsdCBjYW4gYmUgb3ZlcnJpZGRlbiBlaXRoZXIgYnkgYSBzY2FsYXIgb3IgYnkgYW4gYXJyYXkuCgkgICAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggCgkgICAgICogZGltIGRpbWVuc2lvbnMuCgkgICAgICogCgkgICAgICovCgkgICAgdmFyIGdldF9tdWx0aWRpbV9vcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRpbSwgZGVmYXVsX3ZhbHVlKSB7CgkgICAgICB2YXIgdmFsdWUgPSBnZXRfb3B0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkZWZhdWxfdmFsdWUpOwoJICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgewoJICAgICAgICB2YWx1ZSA9IGNyZWF0ZV9hcnJheShkaW0sIHZhbHVlKTsKCSAgICAgIH0KCSAgICAgIGlmICghYXJyYXlfZXF1YWwoYXJyYXlfZGltKHZhbHVlKSwgZGltKSkgewoJICAgICAgICB0aHJvdyAiVGhlIG9wdGlvbiAiICsgb3B0aW9uX25hbWUgKyAiIGlzIG9mIGRpbWVuc2lvbiBbIiArIGFycmF5X2RpbSh2YWx1ZSkgKyAiXSBidXQgc2hvdWxkIGJlIFsiICsgZGltICsgIl0uIjsKCSAgICAgIH0KCSAgICAgIHJldHVybiB2YWx1ZTsKCSAgICB9OwoKCSAgICAvLy8vLy8vLy8vIEZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIG9iamVjdHMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBmaXhlZCAoc2FtZSBldmVyeSB0aW1lKSBudW1iZXIgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIGluaXRpYWxpemUKCSAgICAgKiBhIHBhcmFtZXRlciBvZiBhIGNlcnRhaW4gdHlwZSwgcG9zc2libHkgd2l0aCBsb3dlciBhbmQgdXBwZXIgYm91bmRzLgoJICAgICAqIFRoZSBwb3NzaWxlIHR5cGVzIGFyZSAicmVhbCIsICJpbnQiLCBhbmQgImJpbmFyeSIuCgkgICAgICovCgkgICAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbiAodHlwZSwgbG93ZXIsIHVwcGVyKSB7CgkgICAgICBpZiAobG93ZXIgPiB1cHBlcikgewoJICAgICAgICB0aHJvdyAiQ2FuIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciB3aGVyZSBsb3dlciBib3VuZCA+IHVwcGVyIGJvdW5kIjsKCSAgICAgIH0KCSAgICAgIGlmICh0eXBlID09PSAicmVhbCIpIHsKCSAgICAgICAgaWYgKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIDAuNTsKCSAgICAgICAgfSBlbHNlIGlmIChsb3dlciA9PT0gLUluZmluaXR5KSB7CgkgICAgICAgICAgcmV0dXJuIHVwcGVyIC0gMC41OwoJICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiBsb3dlciArIDAuNTsKCSAgICAgICAgfSBlbHNlIGlmIChsb3dlciA8PSB1cHBlcikgewoJICAgICAgICAgIHJldHVybiAobG93ZXIgKyB1cHBlcikgLyAyOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJpbnQiKSB7CgkgICAgICAgIGlmIChsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiAxOwoJICAgICAgICB9IGVsc2UgaWYgKGxvd2VyID09PSAtSW5maW5pdHkpIHsKCSAgICAgICAgICByZXR1cm4gdXBwZXIgLSAxOwoJICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewoJICAgICAgICAgIHJldHVybiBsb3dlciArIDE7CgkgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPD0gdXBwZXIpIHsKCSAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgobG93ZXIgKyB1cHBlcikgLyAyKTsKCSAgICAgICAgfQoJICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiYmluYXJ5IikgewoJICAgICAgICByZXR1cm4gMTsKCSAgICAgIH0KCSAgICAgIHRocm93ICJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSAiICsgdHlwZSArICJbIiArIGxvd2VyICsgIiwgIiArIHVwcGVyICsgIl0iOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIAoJICAgICAqIGFuZCBpbml0aWFsaXplcyBub24taW5pdGlhbGl6ZWQgcGFyYW1ldGVycy4gVGhpcyBtb2RpZmllZCB2ZXJzaW9uIG9mCgkgICAgICogcGFyYW1zX3RvX2NvbXBsZXRlIGlzIHJldHVybmVkIGFzIGEgZGVlcCBjb3B5IGFuZCBub3QgbW9kaWZpZWQgaW4gcGxhY2UuCgkgICAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlCgkgICAgICogZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB0aGF0IHNob3VsZCByZXR1cm4gYSBzaW5nbGUgbnVtYmVyIAoJICAgICAqIChsaWtlIHBhcmFtX2luaXRfZml4ZWQsIGZvciBleGFtcGxlKS4KCSAgICAgKiBAZXhhbXBsZQoJICAgICAqIHZhciBwYXJhbXMgPSB7ICJtdSI6IHsidHlwZSI6ICJyZWFsIn0gfQoJICAgICAqIHBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyhwYXJhbXMpOwoJICAgICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOgoJICAgICAqIC8vICB7Im11IjogeyAidHlwZSI6ICJyZWFsIiwgImRpbSI6IFsxXSwgInVwcGVyIjogSW5maW5pdHksCgkgICAgICogLy8gICAgICAgICAgICJsb3dlciI6IC1JbmZpbml0eSwgImluaXQiOiAwLjUgfX0KCSAgICAgKi8KCSAgICB2YXIgY29tcGxldGVfcGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtc190b19jb21wbGV0ZSwgcGFyYW1faW5pdCkgewoJICAgICAgdmFyIHBhcmFtcyA9IGRlZXBfY2xvbmUocGFyYW1zX3RvX2NvbXBsZXRlKTsKCSAgICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7CgkgICAgICAgIGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtX25hbWUpKSBjb250aW51ZTsKCSAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3BhcmFtX25hbWVdOwoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ0eXBlIikpIHsKCSAgICAgICAgICBwYXJhbS50eXBlID0gInJlYWwiOwoJICAgICAgICB9CgkgICAgICAgIGlmICghcGFyYW0uaGFzT3duUHJvcGVydHkoImRpbSIpKSB7CgkgICAgICAgICAgcGFyYW0uZGltID0gWzFdOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpc19udW1iZXIocGFyYW0uZGltKSkgewoJICAgICAgICAgIHBhcmFtLmRpbSA9IFtwYXJhbS5kaW1dOwoJICAgICAgICB9CgkgICAgICAgIGlmIChwYXJhbS50eXBlID09ICJiaW5hcnkiKSB7CgkgICAgICAgICAgcGFyYW0udXBwZXIgPSAxOwoJICAgICAgICAgIHBhcmFtLmxvd2VyID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ1cHBlciIpKSB7CgkgICAgICAgICAgcGFyYW0udXBwZXIgPSBJbmZpbml0eTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJsb3dlciIpKSB7CgkgICAgICAgICAgcGFyYW0ubG93ZXIgPSAtSW5maW5pdHk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHBhcmFtLmhhc093blByb3BlcnR5KCJpbml0IikpIHsKCSAgICAgICAgICAvLyBJZiB0aGlzIGlzIGp1c3QgYSBudW1iZXIgb3IgYSBuZXN0ZWQgYXJyYXkgd2UgbGVhdmUgaXQgYWxvbmUsIGJ1dCBpZi4uLgoJICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09ICJmdW5jdGlvbiIpIHsKCSAgICAgICAgICAgIC8vIHBhcmFtLmluaXQgaXMgYSBmdW5jdGlvbiwgdXNlIHRoYXQgdG8gaW5pdGlhbGl6ZSB0aGUgcGFyYW1ldGVyLgoJICAgICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtLmluaXQoKTsKCSAgICAgICAgICB9IGVsc2UgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHsKCSAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciB3aGVyZSB0aGUgcGFyYW0uaW5pdCBleGlzdCBidXQKCSAgICAgICAgICAgIC8vIGlzIG5vdCBhbiBhcnJheS4gVGhlbiBhc3N1bWUgaXQgaXMgYSBudW1iZXIgb3IgYSBmdW5jdGlvbiBhbmQgdXNlCgkgICAgICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuCgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgcGFyYW0uaW5pdCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIFdlIHVzZSB0aGUgZGVmYXVsdCBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4KCSAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwoJICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICBwYXJhbS5pbml0ID0gY3JlYXRlX2FycmF5KHBhcmFtLmRpbSwgZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9CgkgICAgICByZXR1cm4gcGFyYW1zOwoJICAgIH07CgoJICAgIC8vLy8vLy8vLy8gU3RlcHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vLy8KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoJICAgIC8qKgoJICAgICAqIEBpbnRlcmZhY2UKCSAgICAgKiBBIFN0ZXBwZXIgaXMgYW4gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBwdXNoaW5nIGFyb3VuZCBvbmUKCSAgICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvbgoJICAgICAqIGRlZmluZWQgYnkgdGhlIGxvZyBwb3N0ZXJpb3IuIFRoaXMgZGVmaW5lcyB0aGUgU3RlcHBlciAiaW50ZXJmYWNlIiwKCSAgICAgKiB3aGVyZSAiaW50ZXJmYWNlIiBtZWFucyB0aGF0IFN0ZXBwZXIgZGVmaW5lcyBhIGNsYXNzIHRoYXQgaXMgbmV2ZXIKCSAgICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWQKCSAgICAgKiBzdGVwcGVyIGZ1bmN0aW9ucy4KCSAgICAgKiBAaW50ZXJmYWNlCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CgkgICAgICogICB7Im11IjogeyAidHlwZSI6ICJyZWFsIiwgImRpbSI6IFsxXSwgInVwcGVyIjogSW5maW5pdHksIAoJICAgICAqICAgImxvd2VyIjogLUluZmluaXR5LCAiaW5pdCI6IDAuNSB9fQoJICAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgImNvbXBsZXRlIiwgdGhhdCBpcywKCSAgICAgKiAgIHNwZWNpZnlpbmcgYWxsIHJlbGV2YW50IGF0dHJpYnV0ZXMgc3VjaCBhcyBkaW0sIGxvd2VyIGFuZCB1cHBlci4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMgaW4gcGFyYW1zCgkgICAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzCgkgICAgICogICBhcyBzY2FsYXJzIG9yLCBwb3NzaWJseSBuZXN0ZWQsIGFycmF5cy4gRm9yIGV4YW1wbGU6CgkgICAgICogICB7bXU6IDEwLCBzaWdtYTogNSwgYmV0YTogWzEsIDIuNV19CgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGUKCSAgICAgKiAgIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFRoYXQgaXMsIHRoZSB2YWx1ZSBvZiBsb2dfcG9zdAoJICAgICAqICAgc2hvdWxkIGNoYW5nZSBpZiB0aGUgdGhlIHZhbHVlcyBpbiBzdGF0ZSBhcmUgY2hhbmdlZC4KCSAgICAKCSAgICAgKi8KCSAgICB2YXIgU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCkgewoJICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CgkgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7CgkgICAgICB0aGlzLmxvZ19wb3N0ID0gbG9nX3Bvc3Q7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFNob3VsZCByZXR1cm4gdGhlIG5ldyBzdGF0ZSwKCSAgICAgKiBidXQgaXMgbWFpbmx5IGNhbGxlZCBmb3IgaXQncyBzaWRlIGVmZmVjdCBvZiBtYWtpbmcgYSBjaGFuZ2UgaW4gdGhlCgkgICAgICogc3RhdGUgb2JqZWN0LgoJICAgICAqLwoJICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICB0aHJvdyAiRXZlcnkgU3RlcHBlciBuZWVkIHRvIGltcGxlbWVudCBzdGVwKCkiOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBhZGFwdCB3aGlsZSBzdGVwcGluZy4KCSAgICAgKi8KCSAgICBTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyAKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgY2Vhc2UgYWRhcHRpbmcgd2hpbGUgc3RlcHBpbmcuCgkgICAgICovCgkgICAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyAKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluZyBpbmZvIHJlZ2FyZGluZyB0aGUgc3RlcHBlci4KCSAgICAgKi8KCSAgICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkgewoJICAgICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgc3RlcHBlci4KCSAgICAgIHJldHVybiB7fTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluCgkgICAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiAiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQyIKCSAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLgoJICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAgKiBAcGFyYW0gZ2VuZXJhdGVfcHJvcG9zYWwgLSBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHByb3Bvc2FsIChhcyBhIG51bWJlcikKCSAgICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhCgkgICAgICogbnVtYmVyIGFuZCBsb2dfc2NhbGUgZGVmaW5lcyB0aGUgc2NhbGUgb2YgdGhlIHByb3Bvc2FsIHNvbWVob3cuCgkgICAgKi8KCSAgICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGdlbmVyYXRlX3Byb3Bvc2FsKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CgkgICAgICAgIHRocm93ICJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwoJICAgICAgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKCSAgICAgICAgdGhyb3cgIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyOwoJICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwoJICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSA9IGdldF9vcHRpb24oInByb3BfbG9nX3NjYWxlIiwgb3B0aW9ucywgMCk7CgkgICAgICB0aGlzLmJhdGNoX3NpemUgPSBnZXRfb3B0aW9uKCJiYXRjaF9zaXplIiwgb3B0aW9ucywgNTApOwoJICAgICAgdGhpcy5tYXhfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oIm1heF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgMC4zMyk7CgkgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oImluaXRpYWxfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIDEuMCk7CgkgICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9vcHRpb24oInRhcmdldF9hY2NlcHRfcmF0ZSIsIG9wdGlvbnMsIDAuNDQpOwoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGdldF9vcHRpb24oImlzX2FkYXB0aW5nIiwgb3B0aW9ucywgdHJ1ZSk7CgkgICAgICB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsID0gZ2VuZXJhdGVfcHJvcG9zYWw7CgkgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwOwoJICAgICAgdGhpcy5iYXRjaF9jb3VudCA9IDA7CgkgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPSAwOwoJICAgIH07CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT25lZGltTWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICB2YXIgcGFyYW1fc3RhdGUgPSB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CgkgICAgICB2YXIgcGFyYW1fcHJvcG9zYWwgPSB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsKHBhcmFtX3N0YXRlLCB0aGlzLnByb3BfbG9nX3NjYWxlKTsKCSAgICAgIGlmIChwYXJhbV9wcm9wb3NhbCA8IHRoaXMubG93ZXIgfHwgcGFyYW1fcHJvcG9zYWwgPiB0aGlzLnVwcGVyKSA7IGVsc2UgewoJICAgICAgICAvLyBtYWtlIGEgTWV0cm9wb2xpcyBzdGVwCgkgICAgICAgIHZhciBjdXJyX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwoJICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9wcm9wb3NhbDsKCSAgICAgICAgdmFyIHByb3BfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICAgIHZhciBhY2NlcHRfcHJvYiA9IE1hdGguZXhwKHByb3BfbG9nX2RlbnMgLSBjdXJyX2xvZ19kZW5zKTsKCSAgICAgICAgaWYgKGFjY2VwdF9wcm9iID4gTWF0aC5yYW5kb20oKSkgewoJICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWwKCSAgICAgICAgICBpZiAodGhpcy5pc19hZGFwdGluZykgdGhpcy5hY2NlcHRhbmNlX2NvdW50Kys7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbQoJICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3N0YXRlOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgICBpZiAodGhpcy5pc19hZGFwdGluZykgewoJICAgICAgICB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24rKzsKCSAgICAgICAgaWYgKHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA+PSB0aGlzLmJhdGNoX3NpemUpIHsKCSAgICAgICAgICAvLyB0aGVuIGFkYXB0CgkgICAgICAgICAgdGhpcy5iYXRjaF9jb3VudCsrOwoJICAgICAgICAgIHZhciBsb2dfc2RfYWRqdXN0bWVudCA9IE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uIC8gTWF0aC5zcXJ0KHRoaXMuYmF0Y2hfY291bnQpKTsKCSAgICAgICAgICBpZiAodGhpcy5hY2NlcHRhbmNlX2NvdW50IC8gdGhpcy5iYXRjaF9zaXplID4gdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUpIHsKCSAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgKz0gbG9nX3NkX2FkanVzdG1lbnQ7CgkgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgLT0gbG9nX3NkX2FkanVzdG1lbnQ7CgkgICAgICAgICAgfQoJICAgICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CgkgICAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDsKCSAgICAgICAgfQoJICAgICAgfQoJICAgICAgcmV0dXJuIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXTsKCSAgICB9OwoJICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IHRydWU7CgkgICAgfTsKCSAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGZhbHNlOwoJICAgIH07CgkgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICByZXR1cm4gewoJICAgICAgICBwcm9wX2xvZ19zY2FsZTogdGhpcy5wcm9wX2xvZ19zY2FsZSwKCSAgICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsCgkgICAgICAgIGFjY2VwdGFuY2VfY291bnQ6IHRoaXMuYWNjZXB0YW5jZV9jb3VudCwKCSAgICAgICAgaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbjogdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uLAoJICAgICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudAoJICAgICAgfTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBOb3JtYWwgcHJvcG9zYWwuCgkgICAgICovCgkgICAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKCSAgICAgIHJldHVybiBybm9ybShwYXJhbV9zdGF0ZSwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfQoJICAgICAqIEEgInN1YmNsYXNzIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgICovCgkgICAgdmFyIFJlYWxNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewoJICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgbm9ybWFsX3Byb3Bvc2FsKTsKCSAgICB9OwoJICAgIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjsKCgkgICAgLyoqCgkgICAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2FsLgoJICAgICAqLwoJICAgIHZhciBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbiAocGFyYW1fc3RhdGUsIHByb3BfbG9nX3NjYWxlKSB7CgkgICAgICByZXR1cm4gTWF0aC5yb3VuZChybm9ybShwYXJhbV9zdGF0ZSwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKSk7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgKiBAY2xhc3MKCSAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CgkgICAgKiBBICJzdWJjbGFzcyIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgKi8KCSAgICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7CgkgICAgfTsKCSAgICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgSW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW4KCSAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkgZm9yIHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwgYXJyYXlzLiBUaGF0CgkgICAgICogaXMsIGluc3RlYWQgb2YganVzdCB0YWtpbmcgYSBzdGVwIGZvciBhIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIgbGlrZSAKCSAgICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgCgkgICAgICogZm9yIGEgbXVsdGlkaW1lbnNpb25hbCBhcnJheS4gSXQncyBzdGlsbCBwcmV0dHkgZHVtYiBhbmQganVzdCB0YWtlcwoJICAgICAqIG9uZS1kaW1lbnNpb25hbCBzdGVwcyBmb3IgZWFjaCBwYXJhbWV0ZXIgY29tcG9uZW50LCB0aG91Z2guCgkgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIAoJICAgICAqICAgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuCgkgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgoJICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCgkgICAgICogQHBhcmFtIFN1YlN0ZXBwZXIgLSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSBvZiBvbmUgZGltZW5zaW9uYWwgU3RlcHBlciB0byBhcHBseSBvbgoJICAgICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KCSAgICAqLwoJICAgIHZhciBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBTdWJTdGVwcGVyKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CgkgICAgICAgIHRocm93ICJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwoJICAgICAgfQoJICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwoJICAgICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyOwoJICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwoJICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CgkgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlID0gZ2V0X211bHRpZGltX29wdGlvbigicHJvcF9sb2dfc2NhbGUiLCBvcHRpb25zLCB0aGlzLmRpbSwgMCk7CgkgICAgICB0aGlzLmJhdGNoX3NpemUgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJiYXRjaF9zaXplIiwgb3B0aW9ucywgdGhpcy5kaW0sIDUwKTsKCSAgICAgIHRoaXMubWF4X2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJtYXhfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTsKCSAgICAgIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uID0gZ2V0X211bHRpZGltX29wdGlvbigiaW5pdGlhbF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgdGhpcy5kaW0sIDEuMCk7CgkgICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oInRhcmdldF9hY2NlcHRfcmF0ZSIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjQ0KTsKCSAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJpc19hZGFwdGluZyIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTsKCgkgICAgICAvLyBUaGlzIGhhY2sgYmVsb3cgaXMgYSByZWN1cnNpdmUgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGFuIGFycmF5IG9mIAoJICAgICAgLy8gb25lIGRpbWVuc2lvbmFsIHN0ZXBwZXJzIGFjY29yZGluZyB0byBkaW0uCgkgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZSwgYmF0Y2hfc2l6ZSwgbWF4X2FkYXB0YXRpb24sIGluaXRpYWxfYWRhcHRhdGlvbiwgdGFyZ2V0X2FjY2VwdF9yYXRlLCBpc19hZGFwdGluZykgewoJICAgICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTsKCSAgICAgICAgaWYgKGRpbS5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgc3Vib3B0aW9ucyA9IHsKCSAgICAgICAgICAgICAgcHJvcF9sb2dfc2NhbGU6IHByb3BfbG9nX3NjYWxlW2ldLAoJICAgICAgICAgICAgICBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLAoJICAgICAgICAgICAgICBtYXhfYWRhcHRhdGlvbjogbWF4X2FkYXB0YXRpb25baV0sCgkgICAgICAgICAgICAgIGluaXRpYWxfYWRhcHRhdGlvbjogaW5pdGlhbF9hZGFwdGF0aW9uW2ldLAoJICAgICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwKCSAgICAgICAgICAgICAgaXNfYWRhcHRpbmc6IGlzX2FkYXB0aW5nW2ldCgkgICAgICAgICAgICB9OwoJICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307CgkgICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pOwoJICAgICAgICAgICAgc3VicGFyYW1baV0uZGltID0gWzFdOyAvLyBBcyB0aGlzIHNob3VsZCBub3cgYmUgYSBvbmUtZGltIHBhcmFtZXRlcgoJICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWQKCSAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IFN1YlN0ZXBwZXIoc3VicGFyYW0sIHN1YnN0YXRlLCBsb2dfcG9zdCwgc3Vib3B0aW9ucyk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZVtpXSwgYmF0Y2hfc2l6ZVtpXSwgbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbltpXSwgdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZ1tpXSk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyczsKCSAgICAgIH07CgkgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QsIHRoaXMucHJvcF9sb2dfc2NhbGUsIHRoaXMuYmF0Y2hfc2l6ZSwgdGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24sIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlLCB0aGlzLmlzX2FkYXB0aW5nKTsKCSAgICB9OwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KCSAgICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKCSAgICAgIH0pOwoJICAgIH07CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewoJICAgICAgICBzdWJzdGVwcGVyLnN0YXJ0X2FkYXB0YXRpb24oKTsKCSAgICAgIH0pOwoJICAgIH07CgkgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHN1YnN0ZXBwZXIuc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9KTsKCSAgICB9OwoJICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLmluZm8oKTsKCSAgICAgIH0pOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn0KCSAgICAgKiBBICJzdWJjbGFzcyIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCgkgICAgICovCgkgICAgdmFyIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFJlYWxNZXRyb3BvbGlzU3RlcHBlcik7CgkgICAgfTsKCSAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKCSAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKCgkgICAgLyoqCgkgICAgICogQGNsYXNzCgkgICAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfQoJICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgoJICAgICAqLwoJICAgIHZhciBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIEludE1ldHJvcG9saXNTdGVwcGVyKTsKCSAgICB9OwoJICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKCSAgICAvKioKCSAgICAgKiBAY2xhc3MKCSAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBhIHN0ZXAgZm9yIGEgYmluYXJ5IHBhcmFtZXRlci4KCSAgICAgKiBUaGlzIGlzIGRvbmUgYnkgZXZhbHVhdGluZyB0aGUgbG9nIHBvc3RlcmlvciBmb3IgYm90aCBzdGF0ZXMgb2YgdGhlCgkgICAgICogcGFyYW1ldGVyIGFuZCB0aGVuIHNlbGVjdGluZyBhIHN0YXRlIHJhbmRvbWx5IHdpdGggcHJvYmFiaWxpdHkgcmVsYXRpdmUgCgkgICAgICogdG8gdGhlIHBvc3RlcmlvciBvZiBlYWNoIHN0YXRlLgoJICAgICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi4KCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBCaW5hcnlTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CgkgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwoJICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwoJICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCA9PSAxKSB7CgkgICAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgdGhyb3cgIkJpbmFyeVN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLiI7CgkgICAgICB9CgkgICAgfTsKCSAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5U3RlcHBlcjsKCSAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDsKCSAgICAgIHZhciB6ZXJvX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwoJICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTsKCSAgICAgIHZhciBvbmVfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB2YXIgbWF4X2xvZ19kZW5zID0gTWF0aC5tYXgoemVyb19sb2dfZGVucywgb25lX2xvZ19kZW5zKTsKCSAgICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zOwoJICAgICAgb25lX2xvZ19kZW5zIC09IG1heF9sb2dfZGVuczsKCSAgICAgIHZhciB6ZXJvX3Byb2IgPSBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zIC0gTWF0aC5sb2coTWF0aC5leHAoemVyb19sb2dfZGVucykgKyBNYXRoLmV4cChvbmVfbG9nX2RlbnMpKSk7CgkgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikgewoJICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwOwoJICAgICAgICByZXR1cm4gMDsKCSAgICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC4KCSAgICAgIHJldHVybiAxOwoJICAgIH07CgoJICAgIC8qKgoJICAgICogQGNsYXNzCgkgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KCSAgICAqIEp1c3QgbGlrZSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIHRoaXMgU3RlcHBlciB0YWtlcyBhIHN0ZXBzIGZvcgoJICAgICogYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciBieSB1cGRhdGluZyBlYWNoIGNvbXBvbmVudCBpbiB0dXJuLiBUaGUgZGlmZmVyZW5jZQoJICAgICogaXMgdGhhdCB0aGlzIHN0ZXBwZXIgd29ya3Mgb24gYmluYXJ5IHBhcmFtZXRlcnMuCgkgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgCgkgICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLgoJICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgoJICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgoJICAgICovCgkgICAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CgkgICAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgkgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoID09IDEpIHsKCSAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CgkgICAgICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07CgkgICAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgdGhyb3cgIkJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgY2FuJ3QgaGFuZGxlIG1vcmUgdGhhbiBvbmUgcGFyYW1ldGVyLiI7CgkgICAgICB9CgkgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0KSB7CgkgICAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdOwoJICAgICAgICB2YXIgaTsKCSAgICAgICAgaWYgKGRpbS5sZW5ndGggPT09IDEpIHsKCSAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTsKCSAgICAgICAgICAgIHN1YnBhcmFtc1tpXSA9IHBhcmFtOwoJICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBuZXcgQmluYXJ5U3RlcHBlcihzdWJwYXJhbXMsIHN1YnN0YXRlLCBsb2dfcG9zdCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewoJICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gc3Vic3RlcHBlcnM7CgkgICAgICB9OwoJICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0KTsKCSAgICB9OwoJICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CgkgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyOwoJICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KCSAgICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uIChzdWJzdGVwcGVyKSB7CgkgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKCSAgICAgIH0pOwoJICAgIH07CgoJICAgIC8qKgoJICAgICAqIEBjbGFzcwoJICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQoJICAgICAqIFRoaXMgc3RlcHBlciBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHRha2luZyBhIHN0ZXAgZm9yIG9uZSBvciBtb3JlIHBhcmFtZXRlcnMuCgkgICAgICogRm9yIHJlYWwgYW5kIGludCBwYXJhbWV0ZXJzIGl0IHRha2VzIE1ldHJvcG9saXMgd2l0aGluIEdpYmJzIHN0ZXBzLCBhbmQgZm9yIAoJICAgICAqIGJpbmFyeSBwYXJhbWV0ZXJzIGl0IGRvZXMgZXZhbHVhdGVzIHRoZSBwb3N0ZXJpb3IgZm9yIGJvdGggcGFyYW10ZXIgdmFsdWVzIGFuZAoJICAgICAqIHJhbmRvbWx5IGNoYW5nZXMgdG8gYSBjZXJ0YWluIHZhbHVlIHByb3BvcnRpb25hbGx5IHRvIHRoYXQgdmFsdWUncyBwb3N0ZXJpb3IKCSAgICAgKiAodGhpcyBpcyBhbHNvIGRvbmUgZm9yIGVhY2ggcGFyYW1ldGVyLCBzbyBhbHNvIGEgKiB3aXRoaW4gR2liYnMgYXBwcm9hY2gpLgoJICAgICAqIFRoaXMgc3RlcHBlciBpcyBhbHNvIGFkYXB0aXZlIGFuZCBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzCgkgICAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy4KCSAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMKCSAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCgkgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAoJICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewoJICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKCSAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgkgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dOwoJICAgICAgICB2YXIgU2VsZWN0U3RlcHBlcjsKCSAgICAgICAgc3dpdGNoIChwYXJhbS50eXBlKSB7CgkgICAgICAgICAgY2FzZSAicmVhbCI6CgkgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICBjYXNlICJpbnQiOgoJICAgICAgICAgICAgaWYgKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgIGNhc2UgImJpbmFyeSI6CgkgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CgkgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyOwoJICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgdGhyb3cgIkFtd2dTdGVwcGVyIGNhbid0IGhhbmRsZSBwYXJhbWV0ZXIgIiArIHRoaXMucGFyYW1fbmFtZXNbaV0gKyAiIHdpdGggdHlwZSAiICsgcGFyYW0udHlwZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcGFyYW1fb2JqZWN0X3dyYXAgPSB7fTsKCSAgICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTsKCSAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgkgICAgICAgIHZhciBwYXJhbV9vcHRpb25zID0gb3B0aW9ucy5wYXJhbXMgJiYgb3B0aW9ucy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0gfHwge307CgkgICAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSA9IHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSB8fCBvcHRpb25zLmJhdGNoX3NpemU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gPSBwYXJhbV9vcHRpb25zLm1heF9hZGFwdGF0aW9uIHx8IG9wdGlvbnMubWF4X2FkYXB0YXRpb247CgkgICAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247CgkgICAgICAgIHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlID0gcGFyYW1fb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGUgfHwgb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGU7CgkgICAgICAgIHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgPSBwYXJhbV9vcHRpb25zLmlzX2FkYXB0aW5nIHx8IG9wdGlvbnMuaXNfYWRhcHRpbmc7CgkgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTsKCSAgICAgIH0KCSAgICB9OwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFtd2dTdGVwcGVyOwoJICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewoJICAgICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykgewoJICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0ZXAoKTsKCSAgICAgIH0KCSAgICAgIHJldHVybiB0aGlzLnN0YXRlOwoJICAgIH07CgkgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCSAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHZhciBpbmZvID0ge307CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgaW5mb1t0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMuc3Vic3RlcHBlcnNbaV0uaW5mbygpOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGluZm87CgkgICAgfTsKCgkgICAgLy8vLy8vLy8vLy8gU2FtcGxlciBGdW5jdGlvbnMgLy8vLy8vLy8vLwoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgkgICAgLyoqCgkgICAgKiBAaW50ZXJmYWNlCgkgICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYQoJICAgIC8vIFNhbXBsZXIgaXMgaGVyZSBpcyBhIGNvbnZlbmllbmNlIGNsYXNzIHdoZXJlIGFuIGluc3RhbmNlIG9mIFNhbXBsZXIKCSAgICAvLyBzZXRzIHVwIHRoZSBTdGVwcGVycywgY2hlY2tzIHRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiwKCSAgICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyICJpbnRlcmZhY2UiLgoJICAgICogQGludGVyZmFjZQoJICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CgkgICAgKiAgIHsibXUiOiB7InR5cGUiOiAicmVhbCJ9LCAic2lnbWEiOiB7InR5cGUiOiAicmVhbCIsICJsb3dlciIgPSAwfX0KCSAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgImNvbXBsZXRlIiBhbmQgcHJvcGVydGllcwoJICAgICogICBsZWZ0IG91dCAobGlrZSBsb3dlciBhbmQgdXBwZXIpIHdpbGwgYmUgZmlsbGVkIGluIGJ5IGRlZmF1bHRzLgoJICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmUKCSAgICAqICAgc3RhdGUgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSB3aXRoIGVhY2ggcGFyYW1ldGVyIGFzIGEgCgkgICAgKiAgIGtleSBhbmQgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXMgbnVtYmVycyBvciBhcnJheXMuIEZvciBleGFtcGxlOgoJICAgICogICB7Im11IjogMywgInNpZ21hIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgCgkgICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LgoJICAgICogQHBhcmFtIGRhdGEgLSBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24KCSAgICAqICAgd2hlbiBzYW1wbGluZy4KCSAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci4KCSAgICAqLwoJICAgIHZhciBTYW1wbGVyID0gZnVuY3Rpb24gKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHsKCSAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOwoJICAgICAgdGhpcy5kYXRhID0gZGF0YTsKCSAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgoJICAgICAgLy8gU2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgaWYgbm90IHBhc3NlZCB0aHJvdWdoIHRoZSBvcHRpb25zIG9iamVjdAoJICAgICAgdGhpcy5wYXJhbV9pbml0X2Z1biA9IGdldF9vcHRpb24oInBhcmFtX2luaXRfZnVuIiwgb3B0aW9ucywgcGFyYW1faW5pdF9maXhlZCk7CgkgICAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKCJ0aGluIiwgb3B0aW9ucywgMSk7CgkgICAgICB2YXIgcGFyYW1zX3RvX21vbml0b3IgPSBnZXRfb3B0aW9uKCJtb25pdG9yIiwgb3B0aW9ucywgbnVsbCk7CgkgICAgICB0aGlzLnRoaW4odGhpbm5pbmdfaW50ZXJ2YWwpOwoJICAgICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTsKCSAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgkgICAgICAvLyBDb21wbGV0aW5nIHRoZSBwYXJhbXMgYW5kIGluaXRpYWxpemluZyB0aGUgc3RhdGUuCgkgICAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7CgkgICAgICB2YXIgc3RhdGUgPSB7fTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbV9uYW1lcy5sZW5ndGg7IGkrKykgewoJICAgICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7CgkgICAgICB9CgkgICAgICB0aGlzLmxvZ19wb3N0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpOwoJICAgICAgfTsKCSAgICAgIC8vIFJ1bm5pbmcgdGhlIGxvZ19wb3N0IGZ1bmN0aW9uIG9uY2UgaW4gY2FzZSBpdCBmdXJ0aGVyIG1vZGlmaWVzIHRoZSBzdGF0ZQoJICAgICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy4KCSAgICAgIHRoaXMubG9nX3Bvc3QoKTsKCSAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKCSAgICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpOwoJICAgIH07CgoJICAgIC8qKiBTaG91bGQgcmV0dXJuIGEgdmVjdG9yIG9mIHN0ZXBwZXJzIHRoYXQgd2hlbiBjYWxsZWQgCgkgICAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbiAoc3RhdGUsIGxvZ19wb3N0KSB7CgkgICAgICB0aHJvdyAiRXZlcnkgU2FtcGxlciBuZWVkcyB0byBpbXBsZW1lbnQgY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUoKSI7CgkgICAgfTsKCgkgICAgLyoqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIFNhbXBsZXIuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHJldHVybiB7CgkgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLAoJICAgICAgICB0aGluOiB0aGlzLnRoaW4sCgkgICAgICAgIG1vbml0b3I6IHRoaXMubW9uaXRvciwKCSAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnMKCSAgICAgIH07CgkgICAgfTsKCgkgICAgLyoqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBSZXR1cm5zIHRoZSBuZXcgc3BhY2UKCSAgICAgKiBidXQgYWxzbyBtb2RpZmllcyB0aGUgc3RhdGUgaW4gcGxhY2UuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdGVwcGVycyk7CgkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGVwKCk7CgkgICAgICB9CgkgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5zdGF0ZSkubGVuZ3RoID4gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpLmxlbmd0aCkgewoJICAgICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2UKCSAgICAgICAgLy8gbmVlZCB0byBydW4gdGhlIGxvZ19wb3N0IG9uY2UgbW9yZSBpbiBvcmRlciB0byBzZXQgdGhlIGRlcml2ZWQgcXVhbnRpdGllcwoJICAgICAgICAvLyBmb3IgdGhlIGZpbmFsIHBhcmFtZXRlciBzdGF0ZQoJICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CgkgICAgICB9CgkgICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUYWtlcyBuX2l0ZXJhdGlvbnMgc3RlcHMgaW4gdGhlIHBhcmFtZXRlciBzcGFjZSBhbmQgcmV0dXJucyB0aGVtCgkgICAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZToKCSAgICAgKiB7bXU6IFsxLCAtMSwgMiwgMywgLi4uXSwgc2lnbWE6IFsxLCAyLCAyLCAxLCAuLi5dfS4KCSAgICAgKiBJZiB0aGluIGlzID4gMSB0aGVuIG5faXRlcmF0aW9ucyAvIHRoaW4gc2FtcGxlcyBhcmUgcmV0dXJuZWQuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc2FtcGxlID0gZnVuY3Rpb24gKG5faXRlcmF0aW9ucykgewoJICAgICAgLy8gSW5pdGlhbGl6aW5nIGN1cnJfc2FtcGxlIHdoZXJlIHRoZSBzYW1wbGUgaXMgZ29pbmcgdG8gYmUgc2F2ZWQKCSAgICAgIC8vIGFzIGFuIG9iamVjdCBjb250YWluaW5nIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyIHRvIGJlIG1vbml0b3JlZC4KCSAgICAgIHZhciBpLCBqLCBtb25pdG9yZWRfcGFyYW1zOwoJICAgICAgaWYgKHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9PT0gbnVsbCkgewoJICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gdGhpcy5tb25pdG9yZWRfcGFyYW1zOwoJICAgICAgfQoJICAgICAgdmFyIGN1cnJfc2FtcGxlID0ge307CgkgICAgICBmb3IgKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykgewoJICAgICAgICBjdXJyX3NhbXBsZVttb25pdG9yZWRfcGFyYW1zW2pdXSA9IFtdOwoJICAgICAgfQoJICAgICAgZm9yIChpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7CgkgICAgICAgIGlmIChpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkgewoJICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7CgkgICAgICAgICAgICB2YXIgcGFyYW0gPSBtb25pdG9yZWRfcGFyYW1zW2pdOwoJICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGlzLnN0ZXAoKTsKCSAgICAgIH0KCSAgICAgIHJldHVybiBjdXJyX3NhbXBsZTsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBUYWtlcyBuX2l0ZXJhdGlvbiBzdGVwcyBpbiBwYXJhbWV0ZXIgc3BhY2UgYnV0IHJldHVybnMgbm90aGluZy4KCSAgICAgKi8KCSAgICBTYW1wbGVyLnByb3RvdHlwZS5idXJuID0gZnVuY3Rpb24gKG5faXRlcmF0aW9ucykgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2l0ZXJhdGlvbnM7IGkrKykgewoJICAgICAgICB0aGlzLnN0ZXAoKTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBTZXRzIHdoYXQgcGFyYW1ldGVycyBzaG91bGQgYmUgbW9uaXRvcmVkIGFuZCByZXR1cm5lZCB3aGVuIGNhbGxpbmcKCSAgICAgKiBzYW1wbGUuCgkgICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUubW9uaXRvciA9IGZ1bmN0aW9uIChwYXJhbXNfdG9fbW9uaXRvcikgewoJICAgICAgdGhpcy5tb25pdG9yZWRfcGFyYW1zID0gcGFyYW1zX3RvX21vbml0b3I7CgkgICAgfTsKCgkgICAgLyoqCgkgICAgICogU2V0cyB0aGUgdGhpbm5pbmcuIEZvciBleGFtcGxlIHRoaW4gPT0gMTAgbWVhbnMgdGhhdCBldmVyeSAxMHRoIHBvc3RlcmlvcgoJICAgICAqIGRyYXcgd2lsbCBiZSBrZXB0LgoJICAgICAqLwoJICAgIFNhbXBsZXIucHJvdG90eXBlLnRoaW4gPSBmdW5jdGlvbiAodGhpbm5pbmdfaW50ZXJ2YWwpIHsKCSAgICAgIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPSB0aGlubmluZ19pbnRlcnZhbDsKCSAgICB9OwoKCSAgICAvKioKCSAgICAgKiBTZXRzIGFkYXB0YXRpb24gb24sIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy4KCSAgICAgKi8KCSAgICBTYW1wbGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpOwoJICAgICAgfQoJICAgIH07CgoJICAgIC8qKgoJICAgICogU2V0cyBhZGFwdGF0aW9uIG9mZiwgaWYgYXBwbGljYWJsZSwgaW4gYWxsIHN0ZXBwZXJzLgoJICAgICovCgkgICAgU2FtcGxlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewoJICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CgkgICAgICB9CgkgICAgfTsKCgkgICAgLyoqCgkgICAgKiBAY2xhc3MKCSAgICAqIEBpbXBsZW1lbnRzIHtTYW1wbGVyfQoJICAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIAoJICAgICogQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgoJICAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KS4gQW4gYWRpdGlvbiBpcyB0aGF0IGl0IGhhbmRsZXMgaW50IHBhcmFtZXRlcnMKCSAgICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgCgkgICAgKiB2YWx1ZSBwcm9wb3J0aW9uYWwgdG8gdGhlIHBvc3RlcmlvciBvZiB0aGUgdHdvIHBvc3NpYmxlIHN0YXRlcyBvZiB0aGUKCSAgICAqIHBhcmFtZXRlci4gVGhpcyBzYW1wbGVyIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMKCSAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCgkgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMKCSAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KCSAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKCSAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KCSAgICAqLwoJICAgIHZhciBBbXdnU2FtcGxlciA9IGZ1bmN0aW9uIChwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7CgkgICAgICBTYW1wbGVyLmNhbGwodGhpcywgcGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucyk7CgkgICAgfTsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjsKCSAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKCSAgICAgIHJldHVybiBbbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKV07CgkgICAgfTsKCgkgICAgLy8gUmV0dXJuaW5nIHRoZSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgcHVibGljbHkgZXhwb3NlZCBieSB0aGlzIG1vZHVsZQoJICAgIHJldHVybiB7CgkgICAgICBydW5pZjogcnVuaWYsCgkgICAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsCgkgICAgICBybm9ybTogcm5vcm0sCgkgICAgICBwYXJhbV9pbml0X2ZpeGVkOiBwYXJhbV9pbml0X2ZpeGVkLAoJICAgICAgY29tcGxldGVfcGFyYW1zOiBjb21wbGV0ZV9wYXJhbXMsCgkgICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIEludE1ldHJvcG9saXNTdGVwcGVyOiBJbnRNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwKCSAgICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsCgkgICAgICBCaW5hcnlTdGVwcGVyOiBCaW5hcnlTdGVwcGVyLAoJICAgICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlcjogQmluYXJ5Q29tcG9uZW50U3RlcHBlciwKCSAgICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwKCSAgICAgIEFtd2dTYW1wbGVyOiBBbXdnU2FtcGxlcgoJICAgIH07CgkgIH0pOwoJfSkobWNtYyk7Cgl2YXIgbWNtY0V4cG9ydHMgPSBtY21jLmV4cG9ydHM7CgoJZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHsKCSAgcmV0dXJuIGEgPT0gbnVsbCB8fCBiID09IG51bGwgPyBOYU4gOiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjsKCX0KCglmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHsKCSAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkgewoJICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykgewoJICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkgewoJICAgICAgICB5aWVsZCB2YWx1ZTsKCSAgICAgIH0KCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgbGV0IGluZGV4ID0gLTE7CgkgICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7CgkgICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7CgkgICAgICAgIHlpZWxkIHZhbHVlOwoJICAgICAgfQoJICAgIH0KCSAgfQoJfQoKCWZ1bmN0aW9uIGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUgPSBhc2NlbmRpbmcpIHsKCSAgaWYgKGNvbXBhcmUgPT09IGFzY2VuZGluZykgcmV0dXJuIGFzY2VuZGluZ0RlZmluZWQ7CgkgIGlmICh0eXBlb2YgY29tcGFyZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IFR5cGVFcnJvcigiY29tcGFyZSBpcyBub3QgYSBmdW5jdGlvbiIpOwoJICByZXR1cm4gKGEsIGIpID0+IHsKCSAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTsKCSAgICBpZiAoeCB8fCB4ID09PSAwKSByZXR1cm4geDsKCSAgICByZXR1cm4gKGNvbXBhcmUoYiwgYikgPT09IDApIC0gKGNvbXBhcmUoYSwgYSkgPT09IDApOwoJICB9OwoJfQoJZnVuY3Rpb24gYXNjZW5kaW5nRGVmaW5lZChhLCBiKSB7CgkgIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTsKCX0KCglmdW5jdGlvbiBtYXgodmFsdWVzLCB2YWx1ZW9mKSB7CgkgIGxldCBtYXg7CgkgIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHsKCSAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykgewoJICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKG1heCA8IHZhbHVlIHx8IG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkgewoJICAgICAgICBtYXggPSB2YWx1ZTsKCSAgICAgIH0KCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgbGV0IGluZGV4ID0gLTE7CgkgICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7CgkgICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAobWF4IDwgdmFsdWUgfHwgbWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CgkgICAgICAgIG1heCA9IHZhbHVlOwoJICAgICAgfQoJICAgIH0KCSAgfQoJICByZXR1cm4gbWF4OwoJfQoKCWZ1bmN0aW9uIG1pbih2YWx1ZXMsIHZhbHVlb2YpIHsKCSAgbGV0IG1pbjsKCSAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkgewoJICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7CgkgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAobWluID4gdmFsdWUgfHwgbWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CgkgICAgICAgIG1pbiA9IHZhbHVlOwoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICBsZXQgaW5kZXggPSAtMTsKCSAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHsKCSAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmIChtaW4gPiB2YWx1ZSB8fCBtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpIHsKCSAgICAgICAgbWluID0gdmFsdWU7CgkgICAgICB9CgkgICAgfQoJICB9CgkgIHJldHVybiBtaW47Cgl9CgoJLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvcXVpY2tzZWxlY3QKCS8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uCglmdW5jdGlvbiBxdWlja3NlbGVjdChhcnJheSwgaywgbGVmdCA9IDAsIHJpZ2h0ID0gSW5maW5pdHksIGNvbXBhcmUpIHsKCSAgayA9IE1hdGguZmxvb3Ioayk7CgkgIGxlZnQgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIGxlZnQpKTsKCSAgcmlnaHQgPSBNYXRoLmZsb29yKE1hdGgubWluKGFycmF5Lmxlbmd0aCAtIDEsIHJpZ2h0KSk7CgkgIGlmICghKGxlZnQgPD0gayAmJiBrIDw9IHJpZ2h0KSkgcmV0dXJuIGFycmF5OwoJICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpOwoJICB3aGlsZSAocmlnaHQgPiBsZWZ0KSB7CgkgICAgaWYgKHJpZ2h0IC0gbGVmdCA+IDYwMCkgewoJICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7CgkgICAgICBjb25zdCBtID0gayAtIGxlZnQgKyAxOwoJICAgICAgY29uc3QgeiA9IE1hdGgubG9nKG4pOwoJICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7CgkgICAgICBjb25zdCBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTsKCSAgICAgIGNvbnN0IG5ld0xlZnQgPSBNYXRoLm1heChsZWZ0LCBNYXRoLmZsb29yKGsgLSBtICogcyAvIG4gKyBzZCkpOwoJICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTsKCSAgICAgIHF1aWNrc2VsZWN0KGFycmF5LCBrLCBuZXdMZWZ0LCBuZXdSaWdodCwgY29tcGFyZSk7CgkgICAgfQoJICAgIGNvbnN0IHQgPSBhcnJheVtrXTsKCSAgICBsZXQgaSA9IGxlZnQ7CgkgICAgbGV0IGogPSByaWdodDsKCSAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTsKCSAgICBpZiAoY29tcGFyZShhcnJheVtyaWdodF0sIHQpID4gMCkgc3dhcChhcnJheSwgbGVmdCwgcmlnaHQpOwoJICAgIHdoaWxlIChpIDwgaikgewoJICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qOwoJICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbaV0sIHQpIDwgMCkgKytpOwoJICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbal0sIHQpID4gMCkgLS1qOwoJICAgIH0KCSAgICBpZiAoY29tcGFyZShhcnJheVtsZWZ0XSwgdCkgPT09IDApIHN3YXAoYXJyYXksIGxlZnQsIGopO2Vsc2UgKytqLCBzd2FwKGFycmF5LCBqLCByaWdodCk7CgkgICAgaWYgKGogPD0gaykgbGVmdCA9IGogKyAxOwoJICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7CgkgIH0KCSAgcmV0dXJuIGFycmF5OwoJfQoJZnVuY3Rpb24gc3dhcChhcnJheSwgaSwgaikgewoJICBjb25zdCB0ID0gYXJyYXlbaV07CgkgIGFycmF5W2ldID0gYXJyYXlbal07CgkgIGFycmF5W2pdID0gdDsKCX0KCglmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHsKCSAgdmFsdWVzID0gRmxvYXQ2NEFycmF5LmZyb20obnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpKTsKCSAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpIHx8IGlzTmFOKHAgPSArcCkpIHJldHVybjsKCSAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpOwoJICBpZiAocCA+PSAxKSByZXR1cm4gbWF4KHZhbHVlcyk7CgkgIHZhciBuLAoJICAgIGkgPSAobiAtIDEpICogcCwKCSAgICBpMCA9IE1hdGguZmxvb3IoaSksCgkgICAgdmFsdWUwID0gbWF4KHF1aWNrc2VsZWN0KHZhbHVlcywgaTApLnN1YmFycmF5KDAsIGkwICsgMSkpLAoJICAgIHZhbHVlMSA9IG1pbih2YWx1ZXMuc3ViYXJyYXkoaTAgKyAxKSk7CgkgIHJldHVybiB2YWx1ZTAgKyAodmFsdWUxIC0gdmFsdWUwKSAqIChpIC0gaTApOwoJfQoKCWZ1bmN0aW9uIG1lZGlhbih2YWx1ZXMsIHZhbHVlb2YpIHsKCSAgcmV0dXJuIHF1YW50aWxlKHZhbHVlcywgMC41LCB2YWx1ZW9mKTsKCX0KCglmdW5jdGlvbiBUcmFuc2Zvcm0oaywgeCwgeSkgewoJICB0aGlzLmsgPSBrOwoJICB0aGlzLnggPSB4OwoJICB0aGlzLnkgPSB5OwoJfQoJVHJhbnNmb3JtLnByb3RvdHlwZSA9IHsKCSAgY29uc3RydWN0b3I6IFRyYW5zZm9ybSwKCSAgc2NhbGU6IGZ1bmN0aW9uIChrKSB7CgkgICAgcmV0dXJuIGsgPT09IDEgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmsgKiBrLCB0aGlzLngsIHRoaXMueSk7CgkgIH0sCgkgIHRyYW5zbGF0ZTogZnVuY3Rpb24gKHgsIHkpIHsKCSAgICByZXR1cm4geCA9PT0gMCAmIHkgPT09IDAgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmssIHRoaXMueCArIHRoaXMuayAqIHgsIHRoaXMueSArIHRoaXMuayAqIHkpOwoJICB9LAoJICBhcHBseTogZnVuY3Rpb24gKHBvaW50KSB7CgkgICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldOwoJICB9LAoJICBhcHBseVg6IGZ1bmN0aW9uICh4KSB7CgkgICAgcmV0dXJuIHggKiB0aGlzLmsgKyB0aGlzLng7CgkgIH0sCgkgIGFwcGx5WTogZnVuY3Rpb24gKHkpIHsKCSAgICByZXR1cm4geSAqIHRoaXMuayArIHRoaXMueTsKCSAgfSwKCSAgaW52ZXJ0OiBmdW5jdGlvbiAobG9jYXRpb24pIHsKCSAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdOwoJICB9LAoJICBpbnZlcnRYOiBmdW5jdGlvbiAoeCkgewoJICAgIHJldHVybiAoeCAtIHRoaXMueCkgLyB0aGlzLms7CgkgIH0sCgkgIGludmVydFk6IGZ1bmN0aW9uICh5KSB7CgkgICAgcmV0dXJuICh5IC0gdGhpcy55KSAvIHRoaXMuazsKCSAgfSwKCSAgcmVzY2FsZVg6IGZ1bmN0aW9uICh4KSB7CgkgICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7CgkgIH0sCgkgIHJlc2NhbGVZOiBmdW5jdGlvbiAoeSkgewoJICAgIHJldHVybiB5LmNvcHkoKS5kb21haW4oeS5yYW5nZSgpLm1hcCh0aGlzLmludmVydFksIHRoaXMpLm1hcCh5LmludmVydCwgeSkpOwoJICB9LAoJICB0b1N0cmluZzogZnVuY3Rpb24gKCkgewoJICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyB0aGlzLnggKyAiLCIgKyB0aGlzLnkgKyAiKSBzY2FsZSgiICsgdGhpcy5rICsgIikiOwoJICB9Cgl9OwoJVHJhbnNmb3JtLnByb3RvdHlwZTsKCgkvKgoJICBIVERNYXRoIFN0YXRpYyBDbGFzcyAtIE5vdCBpbnRlbmRlZCBmb3IgaW5zdGFudGlhdGlvbiEKCgkgIFZhcmlhYmxlczoKCSAgICBBID0gYW1vdW50CgkgICAgRCA9IGRlbGF5CgkgICAgViA9IHN1YmplY3RpdmUgdmFsdWUKCgkgICAgayA9IGRpc2NvdW50IGZhY3RvcgoKCSAgRXF1YXRpb25zOgoJICAgIFYgPSBBIC8gKDEgKyBrRCkKCSovCgljbGFzcyBIVERNYXRoIHsKCSAgc3RhdGljIGFkazJ2KGEsIGQsIGspIHsKCSAgICByZXR1cm4gYSAvICgxICsgayAqIGQpOwoJICB9CgkgIHN0YXRpYyBhZHYyayhhLCBkLCB2KSB7CgkgICAgcmV0dXJuIChhIC0gdikgLyAodiAqIGQpOwoJICB9Cgl9CgoJLy8gSW50ZXJuYWwgZGVwZW5kZW5jaWVzCgoJLyogZXNsaW50IG5vLXJlc3RyaWN0ZWQtZ2xvYmFsczogWyJvZmYiLCAic2VsZiJdICovCgoJc2VsZi5vbm1lc3NhZ2UgPSBldmVudCA9PiB7CgkgIGNvbnN0IHBhcmFtcyA9IHsKCSAgICBrOiB7CgkgICAgICB0eXBlOiAncmVhbCcsCgkgICAgICBsb3dlcjogMCwKCSAgICAgIHVwcGVyOiAxMDAKCSAgICB9LAoJICAgIGx1Y2U6IHsKCSAgICAgIHR5cGU6ICdyZWFsJywKCSAgICAgIGxvd2VyOiAwLAoJICAgICAgdXBwZXI6IDEwMAoJICAgIH0KCSAgfTsKCSAgY29uc3QgbG9nUG9zdCA9IChzdGF0ZSwgZGF0YSkgPT4gewoJICAgIGxldCBscCA9IDA7CgoJICAgIC8vIFByaW9ycwoJICAgIGNvbnN0IGtNZWFuID0gMjsKCSAgICBjb25zdCBrU2hhcGUgPSAzOwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmdhbW1hKHN0YXRlLmssIGtTaGFwZSwga1NoYXBlIC8ga01lYW4pOwoJICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmssIDAsIDEwMCk7CgoJICAgIGNvbnN0IGx1Y2VNZWFuID0gMjsKCSAgICBjb25zdCBsdWNlU2hhcGUgPSAzOwoJICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmdhbW1hKHN0YXRlLmx1Y2UsIGx1Y2VTaGFwZSwgbHVjZVNoYXBlIC8gbHVjZU1lYW4pOwoJICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmx1Y2UsIDAsIDEwMCk7CgoJICAgIC8vIExpa2VsaWhvb2QKCSAgICBkYXRhLmZvckVhY2goY2hvaWNlID0+IHsKCSAgICAgIC8vIFZhbHVlcwoJICAgICAgY29uc3QgdnMgPSBIVERNYXRoLmFkazJ2KGNob2ljZS5hcywgY2hvaWNlLmRzLCBzdGF0ZS5rKTsKCSAgICAgIGNvbnN0IHZsID0gSFRETWF0aC5hZGsydihjaG9pY2UuYWwsIGNob2ljZS5kbCwgc3RhdGUuayk7CgoJICAgICAgLy8gQ2hvaWNlIG9mIHNvb25lciBvciBsYXRlciBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uCgkgICAgICAvLyBMdWNlIGNob2ljZSBydWxlIGlzIHVzZWQgdG8gY29tcHV0ZSBwcm9iYWJpbGl0eSBvZiB3YWl0aW5nISAoMCA9IHNvb25lciwgMSA9IGxhdGVyKQoJICAgICAgY29uc3QgYmludmFsID0gMSAvICgxICsgTWF0aC5leHAoc3RhdGUubHVjZSAqICh2cyAtIHZsKSkpOwoKCSAgICAgIC8vIEFjdHVhbCByZXNwb25zZQoJICAgICAgY29uc3QgcmVzcG9uc2UgPSBjaG9pY2UucmVzcG9uc2UgPT09ICdmaXJzdCcgPyAwIDogMTsKCSAgICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmJlcm4ocmVzcG9uc2UsIGJpbnZhbCk7CgkgICAgfSk7CgkgICAgcmV0dXJuIGxwOwoJICB9OwoKCSAgLy8gSW5pdGlhbGl6aW5nIHRoZSBzYW1wbGVyCgkgIGNvbnN0IHNhbXBsZXIgPSBuZXcgbWNtY0V4cG9ydHMuQW13Z1NhbXBsZXIocGFyYW1zLCBsb2dQb3N0LCBldmVudC5kYXRhKTsKCSAgLy8gQnVybmluZyBzb21lIHNhbXBsZXMgdG8gdGhlIE1DTUMgZ29kcyBhbmQgc2FtcGxpbmcgNTAwMCBkcmF3cwoJICBzYW1wbGVyLmJ1cm4oMTAwMCk7CgkgIGNvbnN0IHNhbXBsZXMgPSBzYW1wbGVyLnNhbXBsZSg1MDAwKTsKCgkgIC8vIEV4dHJhY3Qgc3VtbWFyeSBzdGF0cwoJICBjb25zdCByZXN1bHRzID0gewoJICAgIGs6IG1lZGlhbihzYW1wbGVzLmspLAoJICAgIGx1Y2U6IG1lZGlhbihzYW1wbGVzLmx1Y2UpCgkgIH07CgkgIHNlbGYucG9zdE1lc3NhZ2UoewoJICAgIHJlc3VsdHM6IHJlc3VsdHMsCgkgICAgc2FtcGxlczogc2FtcGxlcwoJICB9KTsKCX07Cgp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1odGQtZml0LXdvcmtlci5qcy5tYXAKCg==",Gp="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHRkLWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9iYXllcy5qcy9kaXN0cmlidXRpb25zLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2JheWVzLmpzL21jbWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9zb3J0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tYXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL21pbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvcXVpY2tzZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3F1YW50aWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tZWRpYW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtem9vbS9zcmMvdHJhbnNmb3JtLmpzIiwiLi4vZGlzY291bnRhYmxlLW1hdGgvc3JjL2h0ZC1tYXRoLmpzIiwiLi4vZGlzY291bnRhYmxlLW1hdGgvc3JjL2luZGV4LmpzIiwic3JjL2NvbXBvbmVudHMvaHRkLWZpdC13b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gQSBudW1iZXIgb2YgbG9nIHByb2JhYmlsaXR5IGRlbnNpdHkgZnVuY3Rpb25zIChQREYpLiBOYW1pbmcgYW5kIHBhcmFtZXRlcml6YXRpb25cbi8vIHNob3VsZCBtYXRjaCBSJ3MsIGV4Y2VwdCBmb3IgdGhhdCBhbGwgZnVuY3Rpb25zIHJlc2lkZSBpbiBhbiBsZCBvYmplY3QgKFxuLy8gYXMgaW4gXCJsb2cgZGVuc2l0eVwiKSwgc28gdG8gZ2V0IGEgbm9ybWFsIGxvZyBkZW5zaXR5IHlvdSB3b3VsZCB3cml0ZVxuLy8gbGQubm9ybSguLi4pLlxuLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0XG4vLyAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0Lykgd2hpY2ggaW5jbHVkZXMgUERGIGZvciBtYW55IGNvbW1vbiBwcm9iYWJpbGl0eVxuLy8gZGlzdHJpYnV0aW9ucy4gV2hhdCBJIGhhdmUgZG9uZSBpcyBvbmx5IHRvIGNvbnZlcnQgdGhlc2UgdG8gbG9nIFBERnMuXG5cbi8qXG5PcmlnaW5hbCB3b3JrIENvcHlyaWdodCAoYykgMjAxMyBqU3RhdFxuTW9kaWZpZWQgd29yayBDb3B5cmlnaHQgKGMpIDIwMTUgUmFzbXVzIELDpcOldGggXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cblxuXG4vLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanNcbi8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLFxuLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuXG4vLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWxcbi8vIG9iamVjdCBsZCAuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290LmxkID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuICAvLyBPYmplY3QgdG8gaG9sZCB0aGUgZnVuY3Rpb25zIHRvIGJlIGV4cG9ydGVkLlxuICB2YXIgbGQgID0ge307XG4gIFxuICAvLy8vLy8vLy8vIEhlbHBlciBmdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgdmFyIGxnYW1tYSA9IGZ1bmN0aW9uKHgpIHtcbiAgICB2YXIgaiA9IDA7XG4gICAgdmFyIGNvZiA9IFtcbiAgICAgIDc2LjE4MDA5MTcyOTQ3MTQ2LCAtODYuNTA1MzIwMzI5NDE2NzcsIDI0LjAxNDA5ODI0MDgzMDkxLFxuICAgICAgLTEuMjMxNzM5NTcyNDUwMTU1LCAwLjEyMDg2NTA5NzM4NjYxNzllLTIsIC0wLjUzOTUyMzkzODQ5NTNlLTVcbiAgICBdO1xuICAgIHZhciBzZXIgPSAxLjAwMDAwMDAwMDE5MDAxNTtcbiAgICB2YXIgeHgsIHksIHRtcDtcbiAgICB0bXAgPSAoeSA9IHh4ID0geCkgKyA1LjU7XG4gICAgdG1wIC09ICh4eCArIDAuNSkgKiBsb2codG1wKTtcbiAgICBmb3IgKDsgaiA8IDY7IGorKylcbiAgICAgIHNlciArPSBjb2Zbal0gLyArK3k7XG4gICAgcmV0dXJuIGxvZygyLjUwNjYyODI3NDYzMTAwMDUgKiBzZXIgLyB4eCkgLSB0bXA7XG4gIH07XG4gIGxkLmxnYW1tYSA9IGxnYW1tYTtcbiAgXG4gIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiBuIDwgMCA/IE5hTiA6IGxnYW1tYShuICsgMSk7XG4gIH07XG4gIGxkLmxmYWN0b3JpYWwgPSBsZmFjdG9yaWFsO1xuICBcbiAgdmFyIGxjaG9vc2UgPSBmdW5jdGlvbihuLCBrKXtcbiAgICByZXR1cm4gbGZhY3RvcmlhbChuKSAtIGxmYWN0b3JpYWwoaykgLSBsZmFjdG9yaWFsKG4gLSBrKTtcbiAgfTtcbiAgbGQubGNob29zZSA9IGxjaG9vc2U7XG4gIFxuICB2YXIgbGJldGEgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGxnYW1tYShhKSArIGxnYW1tYShiKSAtIGxnYW1tYShhICsgYik7XG4gIH07XG4gIGxkLmxiZXRhID0gbGJldGE7XG4gIFxuICB2YXIgbG9nICA9IE1hdGgubG9nO1xuICB2YXIgZXhwICA9IE1hdGguZXhwO1xuICB2YXIgYWJzICA9IE1hdGguYWJzO1xuICB2YXIgcG93ICA9IE1hdGgucG93O1xuICB2YXIgc3FydCA9IE1hdGguc3FydDtcbiAgdmFyIHBpICAgPSBNYXRoLlBJO1xuICBcbiAgLy8vLy8vLy8vLyBDb250aW5vdXMgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgbGQuYmV0YSA9IGZ1bmN0aW9uKHgsIHNoYXBlMSwgc2hhcGUyKSB7XG4gICAgaWYgKHggPiAxIHx8IHggPCAwKSB7XG4gICAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKHNoYXBlMSA9PT0gMSAmJiBzaGFwZTIgPT09IDEpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHNoYXBlMSAtIDEpICogbG9nKHgpICsgKHNoYXBlMiAtIDEpICogbG9nKDEgLSB4KSAtIGxiZXRhKHNoYXBlMSwgc2hhcGUyKTsgIFxuICAgIH1cbiAgfTtcbiAgXG4gIGxkLmNhdWNoeSA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHJldHVybiBsb2coc2NhbGUpIC0gbG9nKHBvdyh4IC0gbG9jYXRpb24sIDIpICsgcG93KHNjYWxlLCAyKSkgIC0gbG9nKHBpKTtcbiAgfTtcbiAgXG4gIGxkLm5vcm0gPSBmdW5jdGlvbih4LCBtZWFuLCBzZCkge1xuICAgICAgcmV0dXJuIC0wLjUgKiBsb2coMiAqIHBpKSAtbG9nKHNkKSAtIHBvdyh4IC0gbWVhbiwgMikgLyAoMiAqIHNkICogc2QpO1xuICB9O1xuXG4gIC8vIEEgYml2YXJpYXRlIE5vcm1hbCBkaXN0cmlidXRpb24gcGFyYW1ldGVyaXplZCBieSBhcnJheXMgb2YgdHdvIG1lYW5zIGFuZCBTRHMsIGFuZCBcbiAgLy8gdGhlIGNvcnJlbGF0aW9uLlxuICBsZC5iaXZhcm5vcm0gPSBmdW5jdGlvbih4LCBtZWFuLCBzZCwgY29ycikge1xuICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgK1xuICAgICAgICAgICAgcG93KHhbMV0gLSBtZWFuWzFdLCAyKSAvIHBvdyhzZFsxXSwgMikgLSBcbiAgICAgICAgICAgICgyICogY29yciAqICh4WzBdIC0gbWVhblswXSkgKiAoeFsxXSAtIG1lYW5bMV0pKSAvIChzZFswXSAqIHNkWzFdKTtcbiAgICB2YXIgbm9ybWFsaXppbmdfZmFjdG9yID0gLSggbG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuNSAqIGxvZygxIC0gcG93KGNvcnIsIDIpKSApOyBcbiAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSApICk7IFxuICAgIHJldHVybiBiaXZhcl9sb2dfZGVucztcbiAgfTtcbiAgXG5cbiAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHJldHVybiAoLWFicyh4IC0gbG9jYXRpb24pL3NjYWxlKSAtIGxvZygyICogc2NhbGUpO1xuICB9O1xuICBcbiAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7XG4gIFxuICBsZC5nYW1tYSA9IGZ1bmN0aW9uKHgsIHNoYXBlLCByYXRlKSB7XG4gICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7XG4gICAgaWYgKHggPCAwKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICBpZigoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgKSB7XG4gICAgICByZXR1cm4gLWxvZyhzY2FsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoc2hhcGUgLSAxKSAqIGxvZyh4KSAtIHggLyBzY2FsZSAtIGxnYW1tYShzaGFwZSkgLSBzaGFwZSAqIGxvZyhzY2FsZSk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbih4LCBzaGFwZSwgc2NhbGUpIHtcbiAgICAgIGlmICh4IDw9IDApIHtcbiAgICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtKHNoYXBlICsgMSkgKiBsb2coeCkgLSBzY2FsZSAvIHggLSBsZ2FtbWEoc2hhcGUpICsgc2hhcGUgKiBsb2coc2NhbGUpO1xuICAgIH07XG4gIFxuICBsZC5sbm9ybSA9ICBmdW5jdGlvbih4LCBtZWFubG9nLCBzZGxvZykge1xuICAgIGlmICh4IDw9IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiAtbG9nKHgpIC0gMC41ICogbG9nKDIgKiBwaSkgLSBsb2coc2Rsb2cpIC0gXG4gICAgICAgICAgICBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpO1xuICB9O1xuICBcbiAgbGQucGFyZXRvID0gZnVuY3Rpb24oeCwgc2NhbGUsIHNoYXBlKSB7XG4gICAgaWYgKHggPCBzY2FsZSkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTtcbiAgfTtcbiAgXG4gIGxkLnQgID0gIGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSwgZGYpIHtcbiAgICBkZiA9IGRmID4gMWUxMDAgPyAxZTEwMCA6IGRmO1xuICAgIHJldHVybiBsZ2FtbWEoKGRmICsgMSkvMikgLSBsZ2FtbWEoZGYvMikgLSBsb2coc3FydChwaSAqIGRmKSAqIHNjYWxlKSArXG4gICAgICAgICAgIGxvZyhwb3coMSArICgxL2RmKSAqIHBvdygoeCAtIGxvY2F0aW9uKS9zY2FsZSwgMiksIC0oZGYgKyAxKS8yKSk7XG4gIH07XG4gIFxuICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlXG4gIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIHdlaWJ1bGwgZGlzdHJpYnV0aW9uOiBcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmNcbiAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uKHgsIHNoYXBlLCBzY2FsZSkge1xuICAgIGlmICh4IDwgMCkgcmV0dXJuIC1JbmZpbml0eTtcbiAgICBpZih4ID09PSAwICYmIHNoYXBlIDwgMSkgcmV0dXJuIEluZmluaXR5O1xuICAgIHZhciB0bXAxID0gcG93KHggLyBzY2FsZSwgc2hhcGUgLSAxKTtcbiAgICB2YXIgdG1wMiA9IHRtcDEgKiAoeCAvIHNjYWxlKTtcblx0ICByZXR1cm4gLXRtcDIgKyBsb2coc2hhcGUgKiB0bXAxIC8gc2NhbGUpO1xuICB9O1xuICBcbiAgLy8gVGhpcyBpcyBhIGRpcmVjdCBqYXZhc2NyaXB0IHRyYW5zbGF0aW9uIG9mIHRoZSBSIGNvZGUgdXNlZCB0byBldmFsdWF0ZVxuICAvLyB0aGUgbG9nIGRlbnNpdHkgb2YgYSBsb2dpc3RpYyBkaXN0cmlidXRpb246IFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2NoL3Itc291cmNlL2Jsb2IvYjE1NmUzYTcxMTk2N2Y1ODEzMWUyM2MxYjFkYzFlYTkwZTJmMGM0My9zcmMvbm1hdGgvZGxvZ2lzLmNcbiAgbGQubG9naXMgPSBmdW5jdGlvbih4LCBsb2NhdGlvbiwgc2NhbGUpIHtcbiAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpO1xuICAgIHZhciBlID0gZXhwKC14KTtcbiAgICB2YXIgZiA9IDEuMCArIGU7XG4gICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7ICAgIFxuICB9O1xuXG4gIGxkLmRpcmljaGxldCA9IGZ1bmN0aW9uKHgsIGFscGhhKSB7XG4gICAgdmFyIHN1bV9hbHBoYSA9IDA7XG4gICAgdmFyIHN1bV9sZ2FtbWFfYWxwaGEgPSAwO1xuICAgIHZhciBzdW1fYWxwaGFfc3ViXzFfbG9nX3ggPSAwO1xuICAgIHZhciBuID0gYWxwaGEubGVuZ3RoO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIHN1bV9hbHBoYSArPSBhbHBoYVtpXTtcbiAgICAgIHN1bV9sZ2FtbWFfYWxwaGEgKz0gbGdhbW1hKGFscGhhW2ldKTtcbiAgICAgIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCArPSAoYWxwaGFbaV0gLSAxKSAqIGxvZyh4W2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGxnYW1tYShzdW1fYWxwaGEpIC0gc3VtX2xnYW1tYV9hbHBoYSArIHN1bV9hbHBoYV9zdWJfMV9sb2dfeDtcbiAgfTtcbiAgIFxuICAgIFxuICBsZC5leHAgPSBmdW5jdGlvbih4LCByYXRlKSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cocmF0ZSkgLXJhdGUgKiB4O1xuICB9O1xuICBcbiAgbGQudW5pZiA9IGZ1bmN0aW9uKHgsIG1pbiwgbWF4KSB7XG4gICAgICByZXR1cm4gKHggPCBtaW4gfHwgeCA+IG1heCkgPyAtSW5maW5pdHkgOiBsb2coMSAvIChtYXggLSBtaW4pKTtcbiAgfTtcbiAgXG4gIC8vLy8vLy8vLy8gRGlzY3JldGUgZGlzdHJpYnV0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBsZC5iZXJuID0gZnVuY3Rpb24oeCwgcHJvYikge1xuICAgICAgcmV0dXJuICEoeCA9PT0gMCB8fCB4ID09PSAxKSA/IC1JbmZpbml0eSA6IGxvZyh4ICogcHJvYiArICgxIC0geCkgKiAoMSAtIHByb2IpKTtcbiAgfTtcbiAgXG4gIGxkLmNhdCA9IGZ1bmN0aW9uKHgsIHByb2JzKSB7XG4gICAgaWYoeCA8IDEgfHwgeCA+IHByb2JzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxvZyggcHJvYnNbeCAtIDFdICk7XG4gICAgfVxuICB9O1xuICBcbiAgbGQuYmlub20gPSBmdW5jdGlvbih4LCBzaXplLCBwcm9iKSB7XG4gICAgaWYoeCA+IHNpemUgfHwgeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKHByb2IgPT09IDAgfHwgcHJvYiA9PT0gMSkge1xuICAgICAgcmV0dXJuIChzaXplICogcHJvYikgPT09IHggPyAwIDogLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTtcbiAgfTtcbiAgXG4gIHZhciBtdWx0aW5vbSA9IGZ1bmN0aW9uKHgsIHByb2JzKSB7XG4gICAgdmFyIG4gPSB4Lmxlbmd0aDtcbiAgICB2YXIgc2l6ZSA9IDA7XG4gICAgdmFyIHRtcF90ZXJtID0gMDtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZihwcm9ic1tpXSA9PT0gMCkge1xuICAgICAgICBpZih4W2ldICE9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsgIFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaXplICs9IHhbaV07XG4gICAgICAgIHRtcF90ZXJtICs9IHhbaV0gKiBsb2cocHJvYnNbaV0pIC0gbGdhbW1hKHhbaV0gKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxnYW1tYShzaXplICsgMSkgKyB0bXBfdGVybSA7XG4gIH07XG4gIFxuICBsZC5uYmlub20gPSBmdW5jdGlvbih4LCBzaXplLCBwcm9iKSB7XG4gICAgaWYoeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpO1xuICB9O1xuICBcbiAgbGQuaHlwZXIgPSBmdW5jdGlvbih4LCBtLCBuLCBrKSB7XG4gICAgaWYoeCA8IDAgfHwgeCA+IGspIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2Uobiwgay14KSAtIGxjaG9vc2UobStuLCBrKTtcbiAgICB9XG4gIH07XG4gIFxuICBsZC5wb2lzID0gZnVuY3Rpb24oeCwgbGFtYmRhKSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtSW5maW5pdHkgOiBsb2cobGFtYmRhKSAqIHggLSBsYW1iZGEgLSBsZmFjdG9yaWFsKHgpO1xuICB9O1xuICBcbiAgcmV0dXJuIGxkO1xufSkpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanNcbi8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLFxuLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuXG4vLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWxcbi8vIG9iamVjdCBtY21jIC5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgIHJvb3QubWNtYyA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpe1xuXG4vLy8gVGhlIGFjdHVhbCBtb2R1bGUgY29kZSBzdGFydHMgaGVyZSAvLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgXG4gIFxuICAvLy8vLy8vLy8vIEhlbHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqL1xuICB2YXIgcnVuaWYgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKi9cbiAgdmFyIHJ1bmlmX2Rpc2NyZXRlID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkXG4gICAqICBieSBtZWFuIGFuZCBzZC4gXG4gICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovXG4gIHZhciBybm9ybSA9IGZ1bmN0aW9uKG1lYW4sIHNkKSB7XG4gICAgdmFyIHUsIHYsIHgsIHksIHE7XG4gICAgZG8ge1xuICAgICAgdSA9IE1hdGgucmFuZG9tKCk7XG4gICAgICB2ID0gMS43MTU2ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xuICAgICAgeCA9IHUgLSAwLjQ0OTg3MTtcbiAgICAgIHkgPSBNYXRoLmFicyh2KSArIDAuMzg2NTk1O1xuICAgICAgcSA9IHggKiB4ICsgeSAqICgwLjE5NjAwICogeSAtIDAuMjU0NzIgKiB4KTtcbiAgICB9IHdoaWxlIChxID4gMC4yNzU5NyAmJiAocSA+IDAuMjc4NDYgfHwgdiAqIHYgPiAtNCAqIE1hdGgubG9nKHUpICogdSAqIHUpKTtcbiAgICBcbiAgICByZXR1cm4gKHYgLyB1KSAqIHNkICsgbWVhbjtcbiAgfTtcbiAgXG4gIFxuICAvKiogUmV0dXJucyBhIGRlZXAgY2xvbmUgb2Ygc3JjLCBzb3J0IG9mLi4uIEl0IG9ubHkgY29waWVzIGEgbGltaXRlZFxuICAgKiBudW1iZXIgb2YgdHlwZXMgYW5kLCBmb3IgZXhhbXBsZSwgZnVuY3Rpb24gYXJlIG5vdCBjb3BpZWQuIFxuICAgKiBGcm9tIGh0dHA6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1jbG9uZVxuICAgKi9cbiAgdmFyIGRlZXBfY2xvbmUgPSBmdW5jdGlvbihzcmMpIHtcbiAgXHRmdW5jdGlvbiBtaXhpbihkZXN0LCBzb3VyY2UsIGNvcHlGdW5jKSB7XG4gIFx0XHR2YXIgbmFtZSwgcywgaSwgZW1wdHkgPSB7fTtcbiAgXHRcdGZvcihuYW1lIGluIHNvdXJjZSl7XG4gIFx0XHRcdC8vIHRoZSAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykgY29uZGl0aW9uIGF2b2lkcyBjb3B5aW5nIHByb3BlcnRpZXMgaW4gXCJzb3VyY2VcIlxuICBcdFx0XHQvLyBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlLlx0IEZvciBleGFtcGxlLCBpZiBkZXN0IGhhcyBhIGN1c3RvbSB0b1N0cmluZygpIG1ldGhvZCxcbiAgXHRcdFx0Ly8gZG9uJ3Qgb3ZlcndyaXRlIGl0IHdpdGggdGhlIHRvU3RyaW5nKCkgbWV0aG9kIHRoYXQgc291cmNlIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGVcbiAgXHRcdFx0cyA9IHNvdXJjZVtuYW1lXTtcbiAgXHRcdFx0aWYoIShuYW1lIGluIGRlc3QpIHx8IChkZXN0W25hbWVdICE9PSBzICYmICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSkpe1xuICBcdFx0XHRcdGRlc3RbbmFtZV0gPSBjb3B5RnVuYyA/IGNvcHlGdW5jKHMpIDogcztcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdFx0cmV0dXJuIGRlc3Q7XG4gIFx0fVxuICBcdGlmKCFzcmMgfHwgdHlwZW9mIHNyYyAhPSBcIm9iamVjdFwiIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpID09PSBcIltvYmplY3QgRnVuY3Rpb25dXCIpe1xuICBcdFx0Ly8gbnVsbCwgdW5kZWZpbmVkLCBhbnkgbm9uLW9iamVjdCwgb3IgZnVuY3Rpb25cbiAgXHRcdHJldHVybiBzcmM7XHQvLyBhbnl0aGluZ1xuICBcdH1cbiAgXHRpZihzcmMubm9kZVR5cGUgJiYgXCJjbG9uZU5vZGVcIiBpbiBzcmMpe1xuICBcdFx0Ly8gRE9NIE5vZGVcbiAgXHRcdHJldHVybiBzcmMuY2xvbmVOb2RlKHRydWUpOyAvLyBOb2RlXG4gIFx0fVxuICBcdGlmKHNyYyBpbnN0YW5jZW9mIERhdGUpe1xuICBcdFx0Ly8gRGF0ZVxuICBcdFx0cmV0dXJuIG5ldyBEYXRlKHNyYy5nZXRUaW1lKCkpO1x0Ly8gRGF0ZVxuICBcdH1cbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBSZWdFeHApe1xuICBcdFx0Ly8gUmVnRXhwXG4gIFx0XHRyZXR1cm4gbmV3IFJlZ0V4cChzcmMpOyAgIC8vIFJlZ0V4cFxuICBcdH1cbiAgXHR2YXIgciwgaSwgbDtcbiAgXHRpZihzcmMgaW5zdGFuY2VvZiBBcnJheSl7XG4gIFx0XHQvLyBhcnJheVxuICBcdFx0ciA9IFtdO1xuICBcdFx0Zm9yKGkgPSAwLCBsID0gc3JjLmxlbmd0aDsgaSA8IGw7ICsraSl7XG4gIFx0XHRcdGlmKGkgaW4gc3JjKXtcbiAgXHRcdFx0XHRyLnB1c2goZGVlcF9jbG9uZShzcmNbaV0pKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHQvLyBnZW5lcmljIG9iamVjdHNcbiAgXHRcdHIgPSBzcmMuY29uc3RydWN0b3IgPyBuZXcgc3JjLmNvbnN0cnVjdG9yKCkgOiB7fTtcbiAgXHR9XG4gIFx0cmV0dXJuIG1peGluKHIsIHNyYywgZGVlcF9jbG9uZSk7XG4gIH07XG4gIFxuICAvKiogU3BlY2lhbGl6ZWQgY2xvbmUgZnVuY3Rpb24gdGhhdCBvbmx5IGNsb25lcyBzY2FsYXJzIGFuZCBuZXN0ZWQgYXJyYXlzIHdoZXJlXG4gICAqIGVhY2ggYXJyYXkgZWl0aGVyIGNvbnNpc3RzIG9mIGFsbCBhcnJheXMgb3IgYWxsIG51bWJlcnMuIFRoaXMgZnVuY3Rpb25cbiAgICogaXMgbWVhbnQgYXMgYSBmYXN0IHdheSBvZiBjbG9uaW5nIHBhcmFtZXRlciBkcmF3cyB3aXRoaW4gdGhlIG1jbWMgc2FtcGxpbmdcbiAgICogbG9vcC5cbiAgICovXG4gIHZhciBjbG9uZV9wYXJhbV9kcmF3ID0gZnVuY3Rpb24oeCkge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoeCkpIHtcbiAgICAgIGlmKEFycmF5LmlzQXJyYXkoeFswXSkpIHtcbiAgICAgICAgLy8geCBpcyBhbiBhcnJheSBvZiBhcnJheXMgc28gd2UgbmVlZCB0byBjbG9uZSBpdCByZWN1cnNpdmVseVxuICAgICAgICB2YXIgeF9jb3B5ID0gW107XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB4X2NvcHkucHVzaChjbG9uZV9wYXJhbV9kcmF3KHhbaV0pKTtcbiAgICAgICAgfSBcbiAgICAgICAgcmV0dXJuIHhfY29weTtcbiAgICAgIH0gZWxzZSB7IC8vIFdlJ2xsIGFzc3VtZSB4IGlzIGEgYXJyYXlzIG9mIHNjYWxhcnNcbiAgICAgICAgcmV0dXJuIHguc2xpY2UoMCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHsgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXJcbiAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgbnVtYmVyLlxuICAgKi9cbiAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT0gXCJudW1iZXJcIiB8fCAodHlwZW9mIG9iamVjdCA9PSBcIm9iamVjdFwiICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIChwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsL25lc3RlZCkgYXJyYXkuXG4gICAqIEBwYXJhbSBkaW0gLSBBbiBhcnJheSBnaXZpbmcgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYXJyYXkuIEZvciBleGFtcGxlLFxuICAgKiAgIFs1XSB3b3VsZCB5aWVsZCBhIDUgZWxlbWVudCBhcnJheSwgYW5kIFszLDNdIHdvdWxkIHlpZWxkIGEgMyBieSAzIG1hdHJpeC5cbiAgICogQHBhcmFtIGluaXQgLSBBIHZhbHVlIG9yIGEgZnVuY3Rpb24gdXNlZCB0byBmaWxsIGluIHRoZSBlYWNoIGVsZW1lbnQgaW5cbiAgICogICB0aGUgYXJyYXkuIElmIGl0IGlzIGEgZnVuY3Rpb24gaXQgc2hvdWxkIHRha2Ugbm8gYXJndW1lbnRzLCBpdCB3aWxsIGJlIFxuICAgKiAgIGV2YWx1YXRlZCBvbmNlIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBpdCdzIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWQgdG9cbiAgICogICBmaWxsIGluIGVhY2ggZWxlbWVudC5cbiAgICogQGV4YW1wbGUgXG4gICAqIC8vIFRoZSBmb2xsb3dpbmcgd291bGQgcmV0dXJuIFtbMSwxXSxbMSwxXSxbMSwxXV1cbiAgICogY3JlYXRlX2FycmF5KFsyLDNdLCAxKVxuICAgKi9cbiAgdmFyIGNyZWF0ZV9hcnJheSA9IGZ1bmN0aW9uKGRpbSwgaW5pdCkge1xuICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoZGltWzBdKTtcbiAgICB2YXIgaTtcbiAgICBpZihkaW0ubGVuZ3RoID09IDEpIHsgLy8gRmlsbCBpdCB1cCB3aXRoIGluaXRcbiAgICAgIGlmKHR5cGVvZiBpbml0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBpbml0KCk7XG4gICAgICAgIH0gIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBpbml0O1xuICAgICAgICB9IFxuICAgICAgfVxuICAgIH0gZWxzZSBpZihkaW0ubGVuZ3RoID4gMSkge1xuICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gY3JlYXRlX2FycmF5KGRpbS5zbGljZSgxKSwgaW5pdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiY3JlYXRlX2FycmF5IGNhbid0IGNyZWF0ZSBhIGRpbWVuc2lvbmxlc3MgYXJyYXlcIjtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciBcbiAgICogZXhhbXBsZSwgYXJyYXlfZGltKCBbWzEsIDJdLCBbMSwgMl1dICkgc2hvdWxkIHJldHVybiBbMiwgMl1cbiAgICogQXNzdW1lcyB0aGF0IGFsbCBhcnJheXMgaW5zaWRlIGFub3RoZXIgYXJyYXkgYXJlIG9mIHRoZSBzYW1lIGxlbmd0aC5cbiAgICogQGV4YW1wbGVcbiAgICogLy8gU2hvdWxkIHJldHVybiBbNCwgMiwgMV1cbiAgICogYXJyYXlfZGltKGNyZWF0ZV9hcnJheShbNCwgMiwgMV0sIDApKVxuICAgKi9cbiAgdmFyIGFycmF5X2RpbSA9IGZ1bmN0aW9uKGEpIHtcbiAgICBpZihBcnJheS5pc0FycmF5KGFbMF0pKSB7XG4gICAgICByZXR1cm4gW2EubGVuZ3RoXS5jb25jYXQoYXJyYXlfZGltKGFbMF0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFthLmxlbmd0aF07XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0d28gYXJyYXlzIGFyZSBlcXVhbCBpbiB0aGUgc2Vuc2UgdGhhdCB0aGV5IGNvbnRhaW4gdGhlIHNhbWUgZWxlbWVudHNcbiAgICogYXMganVkZ2VkIGJ5IHRoZSBcIj09XCIgb3BlcmF0b3IuIFJldHVybnMgdHJ1ZSBvciBmYWxzZS5cbiAgICogQWRhcHRlZCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE0ODUzOTc0LzEwMDE4NDhcbiAgICovIFxuICB2YXIgYXJyYXlfZXF1YWwgPSBmdW5jdGlvbiAoYTEsIGEyKSB7XG4gICAgICBpZiAoYTEubGVuZ3RoICE9IGEyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhMS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5c1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGExW2ldKSAmJiBBcnJheS5pc0FycmF5KGEyW2ldKSkge1xuICAgICAgICAgICAgICAvLyByZWN1cnNlIGludG8gdGhlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgICAgICAgaWYgKCFhcnJheV9lcXVhbChhMVtpXSwgYTJbaV0pKSByZXR1cm4gZmFsc2U7ICAgICAgIFxuICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgIGVsc2UgaWYgKGExW2ldICE9IGEyW2ldKSB7IFxuICAgICAgICAgICAgICAvLyBXYXJuaW5nIC0gdHdvIGRpZmZlcmVudCBvYmplY3QgaW5zdGFuY2VzIHdpbGwgbmV2ZXIgYmUgZXF1YWw6IHt4OjIwfSAhPSB7eDoyMH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAgIFxuICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgfSAgICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRyYXZlcnNlcyBhIHBvc3NpYmx5IG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgXCJsZWFmIG5vZGVzXCIsIFxuICAgKiB0aGF0IGlzLCB2YWx1ZXMgdGhhdCBhcmUgbm90IGFycmF5cy4gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2FtZSBzaXplIGFzXG4gICAqIGEuXG4gICAqL1xuICB2YXIgbmVzdGVkX2FycmF5X2FwcGx5ID0gZnVuY3Rpb24oYSwgZnVuKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShhLmxlbmd0aCk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmdW4oYSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqIFJhbmRvbWl6aW5nIHRoZSBhcnJheSBlbGVtZW50IG9yZGVyIGluLXBsYWNlLiBVc2luZyBEdXJzdGVuZmVsZFxuICAgKiBzaHVmZmxlIGFsZ29yaXRobS4gQWRhcHRlZCBmcm9tIGhlcmU6IFxuICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4XG4gICAqL1xuICBmdW5jdGlvbiBzaHVmZmxlX2FycmF5KGFycmF5KSB7XG4gICAgICBmb3IgKHZhciBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgICAgICAgdmFyIHRlbXAgPSBhcnJheVtpXTtcbiAgICAgICAgICBhcnJheVtpXSA9IGFycmF5W2pdO1xuICAgICAgICAgIGFycmF5W2pdID0gdGVtcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIERvZXMgdGhlIHNhbWUgdGhpbmcgYXMgbmVzdGVkX2FycmF5X2FwcGx5LCB0aGF0IGlzLCB0cmF2ZXJzZXMgYSBwb3NzaWJseVxuICAgKiBuZXN0ZWQgYXJyYXkgYSBhbmQgYXBwbGllcyBmdW4gdG8gYWxsIFwibGVhZiBub2Rlc1wiIGFuZCByZXR1cm5zIGFuIGFycmF5IFxuICAgKiBvZiB0aGUgc2FtZSBzaXplIGFzIGEuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseVxuICAgKiBicmFuY2hlcyByYW5kb21seS5cbiAgICovXG4gIHZhciBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5ID0gZnVuY3Rpb24oYSwgZnVuKSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgdmFyIGxlbiA9IGEubGVuZ3RoO1xuICAgICAgdmFyIGk7XG4gICAgICB2YXIgYXJyYXlfaXMgPSBbXTtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGFycmF5X2lzW2ldID0gaTtcbiAgICAgIH1cbiAgICAgIHNodWZmbGVfYXJyYXkoYXJyYXlfaXMpO1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgXG4gICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgYXJyYXlfaSA9IGFycmF5X2lzW2ldO1xuICAgICAgICByZXN1bHRbYXJyYXlfaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVthcnJheV9pXSwgZnVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmdW4oYSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIEFsbG93cyBhIHByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZnVsdHMgY2FuIGJlXG4gICAqIG92ZXJyaWRkZW4gYnkgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAqICBAcGFyYW0gb3B0aW9uX25hbWUgLSB0aGUgbmFtZSBvZiB0aGUgb3B0aW9uIGFzIGEgc3RyaW5nXG4gICAqICBAcGFyYW0gbXlfb3B0aW9ucyAtIGFuIG9wdGlvbiBvYmplY3QgdGhhdCBjb3VsZCBoYXZlIG9wdGlvbl9uYW1lIFxuICAgKiAgICBhcyBhIG1lbWJlci5cbiAgICogQHBhcmFtIGRlZmF1bF92YWx1ZSAtIGRlZnVsdCB2YWx1ZSB0aGF0IGlzIHJldHVybmVkIGlmIG9wdGlvbl9uYW1lIFxuICAgKiAgIGlzIG5vdCBkZWZpbmVkIGluIG15X29wdGlvbnMuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBteV9vcHRpb25zID0ge3BpOiAzLjE0MTU5fVxuICAgKiB2YXIgcGkgPSBnZXRfb3B0aW9uKFwicGlcIiwgbXlfb3B0aW9ucywgMy4xNClcbiAgICovXG4gIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuXG4gIC8vIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LiBGb3IgZXhhbXBsZTpcbiAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbihcInBpXCIsIG15X29wdGlvbnMsIDMuMTQpXG4gIHZhciBnZXRfb3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSkge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHJldHVybiBvcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbl9uYW1lKSAmJiBcbiAgICAgICAgICAgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IHVuZGVmaW5lZCAgJiYgXG4gICAgICAgICAgIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSBudWxsID8gb3B0aW9uc1tvcHRpb25fbmFtZV0gOiBkZWZhdWxfdmFsdWU7XG4gIH07XG4gIFxuICAvKiogVmVyc2lvbiBvZiBnZXRfb3B0aW9uIHdoZXJlIHRoZSBvcHRpb24gc2hvdWxkIGJlIGEgb25lIG9yIG11bHRpLWRpbWVuc2lvbmFsXG4gICAqIGFycmF5IGFuZCB3aGVyZSB0aGUgZGVmYXVsdCBjYW4gYmUgb3ZlcnJpZGRlbiBlaXRoZXIgYnkgYSBzY2FsYXIgb3IgYnkgYW4gYXJyYXkuXG4gICAqIElmIGl0J3MgYSBzY2FsYXIgdGhlIHRoYXQgc2NhbGFyIGlzIHVzZWQgdG8gaW5pdGlhbGl6ZSBhbiBhcnJheSB3aXRoIFxuICAgKiBkaW0gZGltZW5zaW9ucy5cbiAgICogXG4gICAqL1xuICB2YXIgZ2V0X211bHRpZGltX29wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkaW0sIGRlZmF1bF92YWx1ZSkge1xuICAgIHZhciB2YWx1ZSA9IGdldF9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSk7XG4gICAgIGlmKCEgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICB2YWx1ZSA9IGNyZWF0ZV9hcnJheShkaW0sIHZhbHVlKTtcbiAgICAgfSBcbiAgICAgaWYoISBhcnJheV9lcXVhbCggYXJyYXlfZGltKHZhbHVlKSwgZGltKSkge1xuICAgICAgIHRocm93IFwiVGhlIG9wdGlvbiBcIiArIG9wdGlvbl9uYW1lICsgXCIgaXMgb2YgZGltZW5zaW9uIFtcIiArIFxuICAgICAgICAgICAgIGFycmF5X2RpbSh2YWx1ZSkgKyBcIl0gYnV0IHNob3VsZCBiZSBbXCIgKyBkaW0gKyBcIl0uXCI7XG4gICAgfVxuICAgICByZXR1cm4gdmFsdWU7XG4gIH07XG4gIFxuICAvLy8vLy8vLy8vIEZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIG9iamVjdHMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgLyoqXG4gICAqIFJldHVybnMgYSBmaXhlZCAoc2FtZSBldmVyeSB0aW1lKSBudW1iZXIgdGhhdCBjb3VsZCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgICogYSBwYXJhbWV0ZXIgb2YgYSBjZXJ0YWluIHR5cGUsIHBvc3NpYmx5IHdpdGggbG93ZXIgYW5kIHVwcGVyIGJvdW5kcy5cbiAgICogVGhlIHBvc3NpbGUgdHlwZXMgYXJlIFwicmVhbFwiLCBcImludFwiLCBhbmQgXCJiaW5hcnlcIi5cbiAgICovXG4gIHZhciBwYXJhbV9pbml0X2ZpeGVkID0gZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB7XG4gICAgaWYobG93ZXIgPiB1cHBlcikge1xuICAgICAgdGhyb3cgXCJDYW4gbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIHdoZXJlIGxvd2VyIGJvdW5kID4gdXBwZXIgYm91bmRcIjtcbiAgICB9XG4gICAgaWYodHlwZSA9PT0gXCJyZWFsXCIpIHtcbiAgICAgIGlmKGxvd2VyID09PSAtSW5maW5pdHkgJiYgdXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiAwLjU7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gdXBwZXIgLSAwLjU7XG4gICAgICB9IGVsc2UgaWYodXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiBsb3dlciArIDAuNTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA8PSB1cHBlcikge1xuICAgICAgICByZXR1cm4gKGxvd2VyICsgdXBwZXIpIC8gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJpbnRcIikge1xuICAgICAgaWYobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gdXBwZXIgLSAxO1xuICAgICAgfSBlbHNlIGlmKHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gbG93ZXIgKyAxO1xuICAgICAgfSBlbHNlIGlmKGxvd2VyIDw9IHVwcGVyKXtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGxvd2VyICsgdXBwZXIpIC8gMik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiYmluYXJ5XCIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICB0aHJvdyBcIkNvdWxkIG5vdCBpbml0aWFsaXplIHBhcmFtZXRlciBvZiB0eXBlIFwiICsgdHlwZSArIFwiW1wiICsgbG93ZXIgKyBcIiwgXCIgKyB1cHBlciArIFwiXVwiO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIFxuICAgKiBhbmQgaW5pdGlhbGl6ZXMgbm9uLWluaXRpYWxpemVkIHBhcmFtZXRlcnMuIFRoaXMgbW9kaWZpZWQgdmVyc2lvbiBvZlxuICAgKiBwYXJhbXNfdG9fY29tcGxldGUgaXMgcmV0dXJuZWQgYXMgYSBkZWVwIGNvcHkgYW5kIG5vdCBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlXG4gICAqIGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikgdGhhdCBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIG51bWJlciBcbiAgICogKGxpa2UgcGFyYW1faW5pdF9maXhlZCwgZm9yIGV4YW1wbGUpLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcGFyYW1zID0geyBcIm11XCI6IHtcInR5cGVcIjogXCJyZWFsXCJ9IH1cbiAgICogcGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHBhcmFtcyk7XG4gICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOlxuICAgKiAvLyAge1wibXVcIjogeyBcInR5cGVcIjogXCJyZWFsXCIsIFwiZGltXCI6IFsxXSwgXCJ1cHBlclwiOiBJbmZpbml0eSxcbiAgICogLy8gICAgICAgICAgIFwibG93ZXJcIjogLUluZmluaXR5LCBcImluaXRcIjogMC41IH19XG4gICAqLyBcbiAgdmFyIGNvbXBsZXRlX3BhcmFtcyAgPSBmdW5jdGlvbihwYXJhbXNfdG9fY29tcGxldGUsIHBhcmFtX2luaXQpIHtcbiAgICB2YXIgcGFyYW1zID0gZGVlcF9jbG9uZShwYXJhbXNfdG9fY29tcGxldGUpO1xuICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7IGlmICghcGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtX25hbWUpKSBjb250aW51ZTtcbiAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1twYXJhbV9uYW1lXTtcbiAgICAgIGlmKCAhcGFyYW0uaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpKSB7XG4gICAgICAgIHBhcmFtLnR5cGUgPSBcInJlYWxcIjtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcImRpbVwiKSkge1xuICAgICAgICBwYXJhbS5kaW0gPSBbMV07XG4gICAgICB9XG4gICAgICBpZihpc19udW1iZXIocGFyYW0uZGltKSkge1xuICAgICAgICBwYXJhbS5kaW0gPSBbcGFyYW0uZGltXTtcbiAgICAgIH1cbiAgICAgIGlmKHBhcmFtLnR5cGUgPT0gXCJiaW5hcnlcIikge1xuICAgICAgICBwYXJhbS51cHBlciA9IDE7XG4gICAgICAgIHBhcmFtLmxvd2VyID0gMDtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcInVwcGVyXCIpKSB7XG4gICAgICAgIHBhcmFtLnVwcGVyID0gSW5maW5pdHk7XG4gICAgICB9XG4gICAgICBpZighcGFyYW0uaGFzT3duUHJvcGVydHkoXCJsb3dlclwiKSkge1xuICAgICAgICBwYXJhbS5sb3dlciA9IC1JbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYocGFyYW0uaGFzT3duUHJvcGVydHkoXCJpbml0XCIpKSB7XG4gICAgICAgIC8vIElmIHRoaXMgaXMganVzdCBhIG51bWJlciBvciBhIG5lc3RlZCBhcnJheSB3ZSBsZWF2ZSBpdCBhbG9uZSwgYnV0IGlmLi4uXG4gICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSAmJiB0eXBlb2YgcGFyYW0uaW5pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgLy8gcGFyYW0uaW5pdCBpcyBhIGZ1bmN0aW9uLCB1c2UgdGhhdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgICAgcGFyYW0uaW5pdCA9IHBhcmFtLmluaXQoKTtcbiAgICAgICAgfSBlbHNlIGlmKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHtcbiAgICAgICAgLy8gV2UgaGF2ZSBhIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyIHdoZXJlIHRoZSBwYXJhbS5pbml0IGV4aXN0IGJ1dFxuICAgICAgICAvLyBpcyBub3QgYW4gYXJyYXkuIFRoZW4gYXNzdW1lIGl0IGlzIGEgbnVtYmVyIG9yIGEgZnVuY3Rpb24gYW5kIHVzZVxuICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBwYXJhbS5pbml0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gV2UgdXNlIHRoZSBkZWZhdWx0IGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLlxuICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbV9pbml0KHBhcmFtLnR5cGUsIHBhcmFtLmxvd2VyLCBwYXJhbS51cHBlcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfTtcbiAgXG4gIFxuICAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIFxuICAvKipcbiAgICogQGludGVyZmFjZVxuICAgKiBBIFN0ZXBwZXIgaXMgYW4gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBwdXNoaW5nIGFyb3VuZCBvbmVcbiAgICogb3IgbW9yZSBwYXJhbWV0ZXIgdmFsdWVzIGluIGEgc3RhdGUgYWNjb3JkaW5nIHRvIHRoZSBkaXN0cmlidXRpb25cbiAgICogZGVmaW5lZCBieSB0aGUgbG9nIHBvc3Rlcmlvci4gVGhpcyBkZWZpbmVzIHRoZSBTdGVwcGVyIFwiaW50ZXJmYWNlXCIsXG4gICAqIHdoZXJlIFwiaW50ZXJmYWNlXCIgbWVhbnMgdGhhdCBTdGVwcGVyIGRlZmluZXMgYSBjbGFzcyB0aGF0IGlzIG5ldmVyXG4gICAqIG1lYW50IHRvIGJlIGluc3RhbnRpYXRlZCwgYnV0IGp1c3QgdG8gYmUgc3ViY2xhc3NlZCBieSBzcGVjaWFsaXplZFxuICAgKiBzdGVwcGVyIGZ1bmN0aW9ucy5cbiAgICogQGludGVyZmFjZVxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiB7IFwidHlwZVwiOiBcInJlYWxcIiwgXCJkaW1cIjogWzFdLCBcInVwcGVyXCI6IEluZmluaXR5LCBcbiAgICogICBcImxvd2VyXCI6IC1JbmZpbml0eSwgXCJpbml0XCI6IDAuNSB9fVxuICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgYXJlIGV4cGVjdGVkIHRvIGJlIFwiY29tcGxldGVcIiwgdGhhdCBpcyxcbiAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycyBpbiBwYXJhbXNcbiAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzXG4gICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOlxuICAgKiAgIHttdTogMTAsIHNpZ21hOiA1LCBiZXRhOiBbMSwgMi41XX1cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGVcbiAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3RcbiAgICogICBzaG91bGQgY2hhbmdlIGlmIHRoZSB0aGUgdmFsdWVzIGluIHN0YXRlIGFyZSBjaGFuZ2VkLlxuICBcbiAgICovXG4gIHZhciBTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5sb2dfcG9zdCA9IGxvZ19wb3N0O1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBTaG91bGQgcmV0dXJuIHRoZSBuZXcgc3RhdGUsXG4gICAqIGJ1dCBpcyBtYWlubHkgY2FsbGVkIGZvciBpdCdzIHNpZGUgZWZmZWN0IG9mIG1ha2luZyBhIGNoYW5nZSBpbiB0aGVcbiAgICogc3RhdGUgb2JqZWN0LlxuICAgKi9cbiAgU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IFwiRXZlcnkgU3RlcHBlciBuZWVkIHRvIGltcGxlbWVudCBzdGVwKClcIjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgYWRhcHQgd2hpbGUgc3RlcHBpbmcuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gXG4gIH07XG4gIFxuICAvKipcbiAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGNlYXNlIGFkYXB0aW5nIHdoaWxlIHN0ZXBwaW5nLlxuICAgKi8gXG4gIFN0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gXG4gIH07XG4gIFxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmcgaW5mbyByZWdhcmRpbmcgdGhlIHN0ZXBwZXIuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIHN0ZXBwZXIuXG4gICAgcmV0dXJuIHt9O1xuICB9O1xuICBcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW5cbiAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiBcIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUNcIlxuICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKVxuICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhXG4gICAqIG51bWJlciBhbmQgbG9nX3NjYWxlIGRlZmluZXMgdGhlIHNjYWxlIG9mIHRoZSBwcm9wb3NhbCBzb21laG93LlxuICAqL1xuICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgZ2VuZXJhdGVfcHJvcG9zYWwpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggICE9IDEpIHtcbiAgICAgIHRocm93IFwiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgaWYoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgdGhyb3cgXCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjtcbiAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7XG4gICAgXG4gICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAgICAgPSBnZXRfb3B0aW9uKFwicHJvcF9sb2dfc2NhbGVcIiwgb3B0aW9ucywgMCk7XG4gICAgdGhpcy5iYXRjaF9zaXplICAgICAgICAgPSBnZXRfb3B0aW9uKFwiYmF0Y2hfc2l6ZVwiLCBvcHRpb25zLCA1MCk7XG4gICAgdGhpcy5tYXhfYWRhcHRhdGlvbiAgICAgPSBnZXRfb3B0aW9uKFwibWF4X2FkYXB0YXRpb25cIiwgb3B0aW9ucywgMC4zMyk7XG4gICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfb3B0aW9uKFwiaW5pdGlhbF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIDEuMCk7XG4gICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUgPSBnZXRfb3B0aW9uKFwidGFyZ2V0X2FjY2VwdF9yYXRlXCIsIG9wdGlvbnMsIDAuNDQpO1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgICAgICAgID0gZ2V0X29wdGlvbihcImlzX2FkYXB0aW5nXCIsIG9wdGlvbnMsIHRydWUpO1xuICAgIFxuICAgIHRoaXMuZ2VuZXJhdGVfcHJvcG9zYWwgPSBnZW5lcmF0ZV9wcm9wb3NhbDtcbiAgICBcbiAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwO1xuICAgIHRoaXMuYmF0Y2hfY291bnQgPSAwO1xuICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7ICBcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT25lZGltTWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtX3N0YXRlID0gdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdO1xuICAgICAgdmFyIHBhcmFtX3Byb3Bvc2FsID0gdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgdGhpcy5wcm9wX2xvZ19zY2FsZSk7XG4gICAgICBpZihwYXJhbV9wcm9wb3NhbCA8IHRoaXMubG93ZXIgfHwgcGFyYW1fcHJvcG9zYWwgPiB0aGlzLnVwcGVyKSB7XG4gICAgICAgIC8vIE91dHNpZGUgb2YgbGltaXRzIG9mIHRoZSBwYXJhbWV0ZXIsIHJlamVjdCB0aGUgcHJvcG9zYWwgXG4gICAgICAgIC8vIGFuZCBzdGF5IGF0IHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAgfSBlbHNlIHsgLy8gbWFrZSBhIE1ldHJvcG9saXMgc3RlcFxuICAgICAgICB2YXIgY3Vycl9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gcGFyYW1fcHJvcG9zYWw7XG4gICAgICAgIHZhciBwcm9wX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgICAgICB2YXIgYWNjZXB0X3Byb2IgPSBNYXRoLmV4cChwcm9wX2xvZ19kZW5zIC0gY3Vycl9sb2dfZGVucyk7XG4gICAgICAgIGlmKGFjY2VwdF9wcm9iID4gTWF0aC5yYW5kb20oKSkge1xuICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWxcbiAgICAgICAgICBpZih0aGlzLmlzX2FkYXB0aW5nKSB0aGlzLmFjY2VwdGFuY2VfY291bnQrKyA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbVxuICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3N0YXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZih0aGlzLmlzX2FkYXB0aW5nKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiArKztcbiAgICAgICAgaWYodGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID49IHRoaXMuYmF0Y2hfc2l6ZSkgeyAvLyB0aGVuIGFkYXB0XG4gICAgICAgICAgdGhpcy5iYXRjaF9jb3VudCArKztcbiAgICAgICAgICB2YXIgbG9nX3NkX2FkanVzdG1lbnQgPSBcbiAgICAgICAgICAgIE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIFxuICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gLyBNYXRoLnNxcnQodGhpcy5iYXRjaF9jb3VudCkpO1xuICAgICAgICAgIGlmKHRoaXMuYWNjZXB0YW5jZV9jb3VudCAvIHRoaXMuYmF0Y2hfc2l6ZSA+IHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlICs9IGxvZ19zZF9hZGp1c3RtZW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlIC09IGxvZ19zZF9hZGp1c3RtZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFjY2VwdGFuY2VfY291bnQgPSAwO1xuICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07XG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgPSB0cnVlO1xuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBmYWxzZTtcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BfbG9nX3NjYWxlOiB0aGlzLnByb3BfbG9nX3NjYWxlLFxuICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsXG4gICAgICBhY2NlcHRhbmNlX2NvdW50OiB0aGlzLmFjY2VwdGFuY2VfY291bnQsXG4gICAgICBpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uOiB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24sXG4gICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudFxuICAgIH07XG4gIH07XG4gIFxuICBcbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHJldHVybmluZyBhIE5vcm1hbCBwcm9wb3NhbC5cbiAgICovXG4gIHZhciBub3JtYWxfcHJvcG9zYWwgPSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHtcbiAgICByZXR1cm4gcm5vcm0ocGFyYW1fc3RhdGUgLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgUmVhbE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBub3JtYWxfcHJvcG9zYWwpO1xuICB9O1xuICBcbiAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIFJlYWxNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICAvKipcbiAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2FsLlxuICAgKi9cbiAgdmFyIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHJub3JtKHBhcmFtX3N0YXRlICwgTWF0aC5leHAocHJvcF9sb2dfc2NhbGUpKSk7XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCk7XG4gIH07XG4gIFxuICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBDb25zdHJ1Y3RvciBmb3IgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB0aGUgbWV0cm9wb2xpcyBzdGVwIGluXG4gICAqIHRoZSBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gXCJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DXCJcbiAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KSBmb3IgcG9zc2libHkgbXVsdGlkaW1lbnNpb25hbCBhcnJheXMuIFRoYXRcbiAgICogaXMsIGluc3RlYWQgb2YganVzdCB0YWtpbmcgYSBzdGVwIGZvciBhIG9uZS1kaW1lbnNpb25hbCBwYXJhbWV0ZXIgbGlrZSBcbiAgICogT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIsIHRoaXMgU3RlcHBlciBpcyByZXNwb25zaWJsZSBmb3IgdGFraW5nIHN0ZXBzIFxuICAgKiBmb3IgYSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5LiBJdCdzIHN0aWxsIHByZXR0eSBkdW1iIGFuZCBqdXN0IHRha2VzXG4gICAqIG9uZS1kaW1lbnNpb25hbCBzdGVwcyBmb3IgZWFjaCBwYXJhbWV0ZXIgY29tcG9uZW50LCB0aG91Z2guXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSBcbiAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgICogQHBhcmFtIFN1YlN0ZXBwZXIgLSBhIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSBvZiBvbmUgZGltZW5zaW9uYWwgU3RlcHBlciB0byBhcHBseSBvblxuICAgKiAgIGFsbCB0aGUgY29tcG9uZW50cyBvZiB0aGUgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIuXG4gICovXG4gIHZhciBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFN1YlN0ZXBwZXIpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIFxuICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBpZihwYXJhbV9uYW1lcy5sZW5ndGggICE9IDEpIHtcbiAgICAgIHRocm93IFwiTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdO1xuICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyO1xuICAgIHRoaXMudXBwZXIgPSBwYXJhbS51cHBlcjtcbiAgICB0aGlzLmRpbSA9IHBhcmFtLmRpbTtcbiAgXG4gICAgdGhpcy5wcm9wX2xvZ19zY2FsZSAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwicHJvcF9sb2dfc2NhbGVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDApO1xuICAgIHRoaXMuYmF0Y2hfc2l6ZSAgICAgICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcImJhdGNoX3NpemVcIiwgb3B0aW9ucywgdGhpcy5kaW0sIDUwKTtcbiAgICB0aGlzLm1heF9hZGFwdGF0aW9uICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJtYXhfYWRhcHRhdGlvblwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMC4zMyk7XG4gICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiaW5pdGlhbF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAxLjApO1xuICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X211bHRpZGltX29wdGlvbihcInRhcmdldF9hY2NlcHRfcmF0ZVwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMC40NCk7XG4gICAgdGhpcy5pc19hZGFwdGluZyAgICAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiaXNfYWRhcHRpbmdcIiwgb3B0aW9ucywgdGhpcy5kaW0sIHRydWUpO1xuICAgIFxuICAgIC8vIFRoaXMgaGFjayBiZWxvdyBpcyBhIHJlY3Vyc2l2ZSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgYW4gYXJyYXkgb2YgXG4gICAgLy8gb25lIGRpbWVuc2lvbmFsIHN0ZXBwZXJzIGFjY29yZGluZyB0byBkaW0uXG4gICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IFxuICAgICAgZnVuY3Rpb24oZGltLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlLCBiYXRjaF9zaXplLCBtYXhfYWRhcHRhdGlvbiwgaW5pdGlhbF9hZGFwdGF0aW9uLCB0YXJnZXRfYWNjZXB0X3JhdGUsIGlzX2FkYXB0aW5nKSB7XG4gICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTtcbiAgICAgIGlmKGRpbS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgdmFyIHN1Ym9wdGlvbnMgPSB7cHJvcF9sb2dfc2NhbGU6IHByb3BfbG9nX3NjYWxlW2ldLCBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLFxuICAgICAgICAgICAgbWF4X2FkYXB0YXRpb246IG1heF9hZGFwdGF0aW9uW2ldLCBpbml0aWFsX2FkYXB0YXRpb246IGluaXRpYWxfYWRhcHRhdGlvbltpXSxcbiAgICAgICAgICAgIHRhcmdldF9hY2NlcHRfcmF0ZTogdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZzogaXNfYWRhcHRpbmdbaV19O1xuICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307XG4gICAgICAgICAgICBzdWJwYXJhbVtpXSA9IGRlZXBfY2xvbmUocGFyYW0pO1xuICAgICAgICAgICAgc3VicGFyYW1baV0uZGltID0gWzFdOyAvLyBBcyB0aGlzIHNob3VsZCBub3cgYmUgYSBvbmUtZGltIHBhcmFtZXRlclxuICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWRcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBTdWJTdGVwcGVyKHN1YnBhcmFtLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHN1Ym9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCwgcHJvcF9sb2dfc2NhbGVbaV0sIFxuICAgICAgICAgICAgYmF0Y2hfc2l6ZVtpXSwgbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbltpXSwgdGFyZ2V0X2FjY2VwdF9yYXRlW2ldLCBpc19hZGFwdGluZ1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdGVwcGVycztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBjcmVhdGVfc3Vic3RlcHBlcnModGhpcy5kaW0sIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSwgdGhpcy5sb2dfcG9zdCxcbiAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUsIHRoaXMuYmF0Y2hfc2l6ZSwgdGhpcy5tYXhfYWRhcHRhdGlvbiwgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24sXG4gICAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7XG4gICAgXG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLlxuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtyZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbihzdWJzdGVwcGVyKSB7c3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtzdWJzdGVwcGVyLnN0b3BfYWRhcHRhdGlvbigpOyB9KTtcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtcbiAgICAgIHJldHVybiBzdWJzdGVwcGVyLmluZm8oKTsgXG4gICAgfSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqL1xuICB2YXIgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgUmVhbE1ldHJvcG9saXNTdGVwcGVyKTtcbiAgfTtcbiAgXG4gIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgbWFraW5nIGRpc2NyZXRpemVkIE5vcm1hbCBwcm9wb3NhbHMuXG4gICAqLyAgICBcbiAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgSW50TWV0cm9wb2xpc1N0ZXBwZXIpO1xuICB9O1xuICBcbiAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGEgc3RlcCBmb3IgYSBiaW5hcnkgcGFyYW1ldGVyLlxuICAgKiBUaGlzIGlzIGRvbmUgYnkgZXZhbHVhdGluZyB0aGUgbG9nIHBvc3RlcmlvciBmb3IgYm90aCBzdGF0ZXMgb2YgdGhlXG4gICAqIHBhcmFtZXRlciBhbmQgdGhlbiBzZWxlY3RpbmcgYSBzdGF0ZSByYW5kb21seSB3aXRoIHByb2JhYmlsaXR5IHJlbGF0aXZlIFxuICAgKiB0byB0aGUgcG9zdGVyaW9yIG9mIGVhY2ggc3RhdGUuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEJpbmFyeVN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgPT0gMSkge1xuICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiQmluYXJ5U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICB9O1xuICBcbiAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmluYXJ5U3RlcHBlcjtcbiAgXG4gIEJpbmFyeVN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwO1xuICAgIHZhciB6ZXJvX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDE7XG4gICAgdmFyIG9uZV9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTtcbiAgICB2YXIgbWF4X2xvZ19kZW5zID0gTWF0aC5tYXgoemVyb19sb2dfZGVucywgb25lX2xvZ19kZW5zKTtcbiAgICB6ZXJvX2xvZ19kZW5zIC09IG1heF9sb2dfZGVucztcbiAgICBvbmVfbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zO1xuICAgIHZhciB6ZXJvX3Byb2IgPSBNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zIC0gTWF0aC5sb2coIE1hdGguZXhwKHplcm9fbG9nX2RlbnMpICsgTWF0aC5leHAob25lX2xvZ19kZW5zKSApICk7XG4gICAgaWYoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikge1xuICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC5cbiAgICByZXR1cm4gMTtcbiAgfTtcbiAgXG4gICAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogSnVzdCBsaWtlIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgdGhpcyBTdGVwcGVyIHRha2VzIGEgc3RlcHMgZm9yXG4gICAqIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgYnkgdXBkYXRpbmcgZWFjaCBjb21wb25lbnQgaW4gdHVybi4gVGhlIGRpZmZlcmVuY2VcbiAgICogaXMgdGhhdCB0aGlzIHN0ZXBwZXIgd29ya3Mgb24gYmluYXJ5IHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbiBmb3IgYSBcbiAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgXG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgPT0gMSkge1xuICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdO1xuICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuXCI7XG4gICAgfVxuICAgIFxuICAgIHZhciBjcmVhdGVfc3Vic3RlcHBlcnMgPSBcbiAgICAgIGZ1bmN0aW9uKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0KSB7XG4gICAgICB2YXIgc3Vic3RlcHBlcnMgPSBbXTtcbiAgICAgIHZhciBpO1xuICAgICAgaWYoZGltLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTtcbiAgICAgICAgICBzdWJwYXJhbXNbaV0gPSBwYXJhbTtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBCaW5hcnlTdGVwcGVyKHN1YnBhcmFtcywgc3Vic3RhdGUsIGxvZ19wb3N0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IGNyZWF0ZV9zdWJzdGVwcGVycyhkaW0uc2xpY2UoMSksIHN1YnN0YXRlW2ldLCBsb2dfcG9zdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdGVwcGVycztcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc3Vic3RlcHBlcnMgPSBjcmVhdGVfc3Vic3RlcHBlcnModGhpcy5kaW0sIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSwgdGhpcy5sb2dfcG9zdCk7XG4gIH07XG4gIFxuICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyO1xuICBcbiAgQmluYXJ5Q29tcG9uZW50U3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdvIHRocm91Z2ggdGhlIHN1YnN0ZXBwZXJzIGluIGEgcmFuZG9tIG9yZGVyIGFuZCBjYWxsIHN0ZXAoKSBvbiB0aGVtLlxuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtyZXR1cm4gc3Vic3RlcHBlci5zdGVwKCk7IH0pO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogVGhpcyBzdGVwcGVyIGNhbiBiZSByZXNwb25zaWJsZSBmb3IgdGFraW5nIGEgc3RlcCBmb3Igb25lIG9yIG1vcmUgcGFyYW1ldGVycy5cbiAgICogRm9yIHJlYWwgYW5kIGludCBwYXJhbWV0ZXJzIGl0IHRha2VzIE1ldHJvcG9saXMgd2l0aGluIEdpYmJzIHN0ZXBzLCBhbmQgZm9yIFxuICAgKiBiaW5hcnkgcGFyYW1ldGVycyBpdCBkb2VzIGV2YWx1YXRlcyB0aGUgcG9zdGVyaW9yIGZvciBib3RoIHBhcmFtdGVyIHZhbHVlcyBhbmRcbiAgICogcmFuZG9tbHkgY2hhbmdlcyB0byBhIGNlcnRhaW4gdmFsdWUgcHJvcG9ydGlvbmFsbHkgdG8gdGhhdCB2YWx1ZSdzIHBvc3RlcmlvclxuICAgKiAodGhpcyBpcyBhbHNvIGRvbmUgZm9yIGVhY2ggcGFyYW1ldGVyLCBzbyBhbHNvIGEgKiB3aXRoaW4gR2liYnMgYXBwcm9hY2gpLlxuICAgKiBUaGlzIHN0ZXBwZXIgaXMgYWxzbyBhZGFwdGl2ZSBhbmQgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVyc1xuICAgKiBhcmUgbm90IHRvbyBoaWdoIGFuZCB0aGUgY29ycmVsYXRpb25zIGJldHdlZW4gcGFyYW1ldGVycyBhcmUgbG93LlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBvbmUgb3IgbW9yZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnNcbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgKi9cbiAgdmFyIEFtd2dTdGVwcGVyID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHtcbiAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgdGhpcy5zdWJzdGVwcGVycyA9IFtdO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV07XG4gICAgICB2YXIgU2VsZWN0U3RlcHBlcjtcbiAgICAgIHN3aXRjaCAocGFyYW0udHlwZSkge1xuICAgICAgICBjYXNlIFwicmVhbFwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImludFwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEludE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJiaW5hcnlcIjpcbiAgICAgICAgICBpZihhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgXCJBbXdnU3RlcHBlciBjYW4ndCBoYW5kbGUgcGFyYW1ldGVyIFwiICsgdGhpcy5wYXJhbV9uYW1lc1tpXSAgK1wiIHdpdGggdHlwZSBcIiArIHBhcmFtLnR5cGU7IFxuICAgICAgfVxuICAgICAgdmFyIHBhcmFtX29iamVjdF93cmFwID0ge307XG4gICAgICBwYXJhbV9vYmplY3Rfd3JhcFt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHBhcmFtO1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB2YXIgcGFyYW1fb3B0aW9ucyA9IG9wdGlvbnMucGFyYW1zICYmIG9wdGlvbnMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dIHx8IHt9O1xuICAgICAgcGFyYW1fb3B0aW9ucy5wcm9wX2xvZ19zY2FsZSAgICAgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlICAgICB8fCBvcHRpb25zLnByb3BfbG9nX3NjYWxlOyBcbiAgICAgIHBhcmFtX29wdGlvbnMuYmF0Y2hfc2l6ZSAgICAgICAgID0gcGFyYW1fb3B0aW9ucy5iYXRjaF9zaXplICAgICAgICAgfHwgb3B0aW9ucy5iYXRjaF9zaXplOyBcbiAgICAgIHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gICAgID0gcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiAgICAgfHwgb3B0aW9ucy5tYXhfYWRhcHRhdGlvbjtcbiAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247XG4gICAgICBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSA9IHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlIHx8IG9wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlOyBcbiAgICAgIHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgICAgICAgID0gcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyAgICAgICAgfHwgb3B0aW9ucy5pc19hZGFwdGluZzsgXG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldID0gbmV3IFNlbGVjdFN0ZXBwZXIocGFyYW1fb2JqZWN0X3dyYXAsIHN0YXRlLCBsb2dfcG9zdCwgcGFyYW1fb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU3RlcHBlcjtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGVwKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdWJzdGVwcGVyc1tpXS5zdGFydF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpO1xuICAgIH0gXG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmZvID0ge307XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGluZm9bdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnN1YnN0ZXBwZXJzW2ldLmluZm8oKTtcbiAgICB9XG4gICAgcmV0dXJuIGluZm87XG4gIH07XG4gIFxuICBcbiAgXG4gIC8vLy8vLy8vLy8vIFNhbXBsZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgXG4gICAvKipcbiAgICogQGludGVyZmFjZVxuICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYVxuICAvLyBTYW1wbGVyIGlzIGhlcmUgaXMgYSBjb252ZW5pZW5jZSBjbGFzcyB3aGVyZSBhbiBpbnN0YW5jZSBvZiBTYW1wbGVyXG4gIC8vIHNldHMgdXAgdGhlIFN0ZXBwZXJzLCBjaGVja3MgdGhlIHBhcmFtZXRlciBkZWZpbml0aW9uLFxuICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyIFwiaW50ZXJmYWNlXCIuXG4gICAqIEBpbnRlcmZhY2VcbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6XG4gICAqICAge1wibXVcIjoge1widHlwZVwiOiBcInJlYWxcIn0sIFwic2lnbWFcIjoge1widHlwZVwiOiBcInJlYWxcIiwgXCJsb3dlclwiID0gMH19XG4gICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBkb2Vzbid0IGhhdmUgdG8gYmUgXCJjb21wbGV0ZVwiIGFuZCBwcm9wZXJ0aWVzXG4gICAqICAgbGVmdCBvdXQgKGxpa2UgbG93ZXIgYW5kIHVwcGVyKSB3aWxsIGJlIGZpbGxlZCBpbiBieSBkZWZhdWx0cy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmVcbiAgICogICBzdGF0ZSB3aWxsIGJlIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXRlIHdpdGggZWFjaCBwYXJhbWV0ZXIgYXMgYSBcbiAgICogICBrZXkgYW5kIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGFzIG51bWJlcnMgb3IgYXJyYXlzLiBGb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiAzLCBcInNpZ21hXCI6IDEuNX0uIFRoZSBkYXRhIGFyZ3VtZW50IHdpbGwgYmUgdGhlIHNhbWUgb2JqZWN0IGFzIFxuICAgKiAgIHRoZSBkYXRhIGFyZ3VtZW50IGdpdmVuIGJlbG93LlxuICAgKiBAcGFyYW0gZGF0YSAtIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBsb2dfcG9zdCBmdW5jdGlvblxuICAgKiAgIHdoZW4gc2FtcGxpbmcuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc2FtcGxlci5cbiAgICovXG4gIHZhciBTYW1wbGVyID0gZnVuY3Rpb24ocGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucykge1xuICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICBcbiAgICAvLyBTZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyBpZiBub3QgcGFzc2VkIHRocm91Z2ggdGhlIG9wdGlvbnMgb2JqZWN0XG4gICAgdGhpcy5wYXJhbV9pbml0X2Z1biAgID0gZ2V0X29wdGlvbihcInBhcmFtX2luaXRfZnVuXCIsIG9wdGlvbnMsIHBhcmFtX2luaXRfZml4ZWQpO1xuICAgIHZhciB0aGlubmluZ19pbnRlcnZhbCA9IGdldF9vcHRpb24oXCJ0aGluXCIsIG9wdGlvbnMsIDEpO1xuICAgIHZhciBwYXJhbXNfdG9fbW9uaXRvciA9IGdldF9vcHRpb24oXCJtb25pdG9yXCIsIG9wdGlvbnMsIG51bGwpO1xuICAgIHRoaXMudGhpbih0aGlubmluZ19pbnRlcnZhbCk7XG4gICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIENvbXBsZXRpbmcgdGhlIHBhcmFtcyBhbmQgaW5pdGlhbGl6aW5nIHRoZSBzdGF0ZS5cbiAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7XG4gICAgdmFyIHN0YXRlID0ge307XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7XG4gICAgfVxuICAgIHRoaXMubG9nX3Bvc3QgPSBmdW5jdGlvbigpIHsgXG4gICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpO1xuICAgIH07XG4gICAgLy8gUnVubmluZyB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24gb25jZSBpbiBjYXNlIGl0IGZ1cnRoZXIgbW9kaWZpZXMgdGhlIHN0YXRlXG4gICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy5cbiAgICB0aGlzLmxvZ19wb3N0KCk7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpO1xuICB9O1xuICBcbiAgLyoqIFNob3VsZCByZXR1cm4gYSB2ZWN0b3Igb2Ygc3RlcHBlcnMgdGhhdCB3aGVuIGNhbGxlZCBcbiAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuXG4gICAqL1xuICBTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uKHN0YXRlLCBsb2dfcG9zdCl7XG4gICAgdGhyb3cgXCJFdmVyeSBTYW1wbGVyIG5lZWRzIHRvIGltcGxlbWVudCBjcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSgpXCI7XG4gIH07XG4gIFxuICAvKiogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgU2FtcGxlci5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtzdGF0ZTogdGhpcy5zdGF0ZSwgdGhpbjogdGhpcy50aGluLCBtb25pdG9yOiB0aGlzLm1vbml0b3IsXG4gICAgICAgICAgICBzdGVwcGVyczogdGhpcy5zdGVwcGVyc307XG4gIH07XG4gIFxuICAvKiogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFJldHVybnMgdGhlIG5ldyBzcGFjZVxuICAgKiBidXQgYWxzbyBtb2RpZmllcyB0aGUgc3RhdGUgaW4gcGxhY2UuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHNodWZmbGVfYXJyYXkodGhpcy5zdGVwcGVycyk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RlcCgpO1xuICAgIH1cbiAgICBpZihPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5sZW5ndGggPiBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcykubGVuZ3RoKSB7XG4gICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2VcbiAgICAgIC8vIG5lZWQgdG8gcnVuIHRoZSBsb2dfcG9zdCBvbmNlIG1vcmUgaW4gb3JkZXIgdG8gc2V0IHRoZSBkZXJpdmVkIHF1YW50aXRpZXNcbiAgICAgIC8vIGZvciB0aGUgZmluYWwgcGFyYW1ldGVyIHN0YXRlXG4gICAgICB0aGlzLmxvZ19wb3N0KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIG5faXRlcmF0aW9ucyBzdGVwcyBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlIGFuZCByZXR1cm5zIHRoZW1cbiAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZTpcbiAgICoge211OiBbMSwgLTEsIDIsIDMsIC4uLl0sIHNpZ21hOiBbMSwgMiwgMiwgMSwgLi4uXX0uXG4gICAqIElmIHRoaW4gaXMgPiAxIHRoZW4gbl9pdGVyYXRpb25zIC8gdGhpbiBzYW1wbGVzIGFyZSByZXR1cm5lZC5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbihuX2l0ZXJhdGlvbnMpIHtcbiAgICAgIC8vIEluaXRpYWxpemluZyBjdXJyX3NhbXBsZSB3aGVyZSB0aGUgc2FtcGxlIGlzIGdvaW5nIHRvIGJlIHNhdmVkXG4gICAgICAvLyBhcyBhbiBvYmplY3QgY29udGFpbmluZyBvbmUgYXJyYXkgcGVyIHBhcmFtZXRlciB0byBiZSBtb25pdG9yZWQuXG4gICAgICB2YXIgaSwgaiwgbW9uaXRvcmVkX3BhcmFtcztcbiAgICAgIGlmKHRoaXMubW9uaXRvcmVkX3BhcmFtcyA9PT0gbnVsbCkge1xuICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gdGhpcy5tb25pdG9yZWRfcGFyYW1zO1xuICAgICAgfVxuICAgICAgXG4gICAgICB2YXIgY3Vycl9zYW1wbGUgPSB7fTtcbiAgICAgIGZvcihqID0gMDsgaiA8IG1vbml0b3JlZF9wYXJhbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY3Vycl9zYW1wbGVbbW9uaXRvcmVkX3BhcmFtc1tqXV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZm9yKGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgaWYoaSAlIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPT09IDApIHtcbiAgICAgICAgICBmb3IoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBtb25pdG9yZWRfcGFyYW1zW2pdO1xuICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goIGNsb25lX3BhcmFtX2RyYXcodGhpcy5zdGF0ZVtwYXJhbV0pICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RlcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJfc2FtcGxlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFRha2VzIG5faXRlcmF0aW9uIHN0ZXBzIGluIHBhcmFtZXRlciBzcGFjZSBidXQgcmV0dXJucyBub3RoaW5nLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLmJ1cm4gPSBmdW5jdGlvbihuX2l0ZXJhdGlvbnMpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcCgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZXRzIHdoYXQgcGFyYW1ldGVycyBzaG91bGQgYmUgbW9uaXRvcmVkIGFuZCByZXR1cm5lZCB3aGVuIGNhbGxpbmdcbiAgICogc2FtcGxlLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbihwYXJhbXNfdG9fbW9uaXRvcikge1xuICAgICAgdGhpcy5tb25pdG9yZWRfcGFyYW1zID0gcGFyYW1zX3RvX21vbml0b3I7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyB0aGUgdGhpbm5pbmcuIEZvciBleGFtcGxlIHRoaW4gPT0gMTAgbWVhbnMgdGhhdCBldmVyeSAxMHRoIHBvc3RlcmlvclxuICAgKiBkcmF3IHdpbGwgYmUga2VwdC5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS50aGluID0gZnVuY3Rpb24odGhpbm5pbmdfaW50ZXJ2YWwpIHtcbiAgICB0aGlzLnRoaW5uaW5nX2ludGVydmFsID0gdGhpbm5pbmdfaW50ZXJ2YWw7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2V0cyBhZGFwdGF0aW9uIG9uLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICAgIC8qKlxuICAgKiBTZXRzIGFkYXB0YXRpb24gb2ZmLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7XG4gICAgfVxuICB9O1xuICBcbiAgIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1NhbXBsZXJ9XG4gICAqIFRoaXMgc2FtcGxlciB1c2VzIHRoZSBBbXdnU3RlcHBlciBhcyB0aGUgc3RlcHBlciBmdW5jdGlvbiB3aGljaCBpbXBsZW1lbnRzIHRoZSBcbiAgICogQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluIFwiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQ1wiXG4gICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkuIEFuIGFkaXRpb24gaXMgdGhhdCBpdCBoYW5kbGVzIGludCBwYXJhbWV0ZXJzXG4gICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgXG4gICAqIHZhbHVlIHByb3BvcnRpb25hbCB0byB0aGUgcG9zdGVyaW9yIG9mIHRoZSB0d28gcG9zc2libGUgc3RhdGVzIG9mIHRoZVxuICAgKiBwYXJhbWV0ZXIuIFRoaXMgc2FtcGxlciBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzXG4gICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIG9uZSBvciBtb3JlIHBhcmFtZXRlciBkZWZpbml0aW9uc1xuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQW13Z1NhbXBsZXIgPSBmdW5jdGlvbihwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7XG4gICAgU2FtcGxlci5jYWxsKHRoaXMsIHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpO1xuICB9O1xuICBcbiAgQW13Z1NhbXBsZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTYW1wbGVyLnByb3RvdHlwZSk7IFxuICBBbXdnU2FtcGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU2FtcGxlcjtcbiAgXG4gIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKXtcbiAgICByZXR1cm4gWyBuZXcgQW13Z1N0ZXBwZXIocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIF07XG4gIH07XG4gIFxuICBcbiAgLy8gUmV0dXJuaW5nIHRoZSBmdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgcHVibGljbHkgZXhwb3NlZCBieSB0aGlzIG1vZHVsZVxuICByZXR1cm4ge1xuICAgIHJ1bmlmOiBydW5pZixcbiAgICBydW5pZl9kaXNjcmV0ZTogcnVuaWZfZGlzY3JldGUsXG4gICAgcm5vcm06IHJub3JtLFxuICAgIHBhcmFtX2luaXRfZml4ZWQ6IHBhcmFtX2luaXRfZml4ZWQsIFxuICAgIGNvbXBsZXRlX3BhcmFtczogY29tcGxldGVfcGFyYW1zLCBcbiAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgSW50TWV0cm9wb2xpc1N0ZXBwZXI6IEludE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjogTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIEJpbmFyeVN0ZXBwZXI6IEJpbmFyeVN0ZXBwZXIsIFxuICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI6IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIsIFxuICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwgXG4gICAgQW13Z1NhbXBsZXI6IEFtd2dTYW1wbGVyXG4gIH07XG59KSk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA9PSBudWxsIHx8IGIgPT0gbnVsbCA/IE5hTiA6IGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbnVtYmVyKHgpIHtcbiAgcmV0dXJuIHggPT09IG51bGwgPyBOYU4gOiAreDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBudW1iZXJzKHZhbHVlcywgdmFsdWVvZikge1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmICh2YWx1ZSA9ICt2YWx1ZSkgPj0gdmFsdWUpIHtcbiAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgYXNjZW5kaW5nIGZyb20gXCIuL2FzY2VuZGluZy5qc1wiO1xuaW1wb3J0IHBlcm11dGUgZnJvbSBcIi4vcGVybXV0ZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzb3J0KHZhbHVlcywgLi4uRikge1xuICBpZiAodHlwZW9mIHZhbHVlc1tTeW1ib2wuaXRlcmF0b3JdICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWx1ZXMgaXMgbm90IGl0ZXJhYmxlXCIpO1xuICB2YWx1ZXMgPSBBcnJheS5mcm9tKHZhbHVlcyk7XG4gIGxldCBbZl0gPSBGO1xuICBpZiAoKGYgJiYgZi5sZW5ndGggIT09IDIpIHx8IEYubGVuZ3RoID4gMSkge1xuICAgIGNvbnN0IGluZGV4ID0gVWludDMyQXJyYXkuZnJvbSh2YWx1ZXMsIChkLCBpKSA9PiBpKTtcbiAgICBpZiAoRi5sZW5ndGggPiAxKSB7XG4gICAgICBGID0gRi5tYXAoZiA9PiB2YWx1ZXMubWFwKGYpKTtcbiAgICAgIGluZGV4LnNvcnQoKGksIGopID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIEYpIHtcbiAgICAgICAgICBjb25zdCBjID0gYXNjZW5kaW5nRGVmaW5lZChmW2ldLCBmW2pdKTtcbiAgICAgICAgICBpZiAoYykgcmV0dXJuIGM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmID0gdmFsdWVzLm1hcChmKTtcbiAgICAgIGluZGV4LnNvcnQoKGksIGopID0+IGFzY2VuZGluZ0RlZmluZWQoZltpXSwgZltqXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcGVybXV0ZSh2YWx1ZXMsIGluZGV4KTtcbiAgfVxuICByZXR1cm4gdmFsdWVzLnNvcnQoY29tcGFyZURlZmluZWQoZikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZURlZmluZWQoY29tcGFyZSA9IGFzY2VuZGluZykge1xuICBpZiAoY29tcGFyZSA9PT0gYXNjZW5kaW5nKSByZXR1cm4gYXNjZW5kaW5nRGVmaW5lZDtcbiAgaWYgKHR5cGVvZiBjb21wYXJlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjb21wYXJlIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICByZXR1cm4gKGEsIGIpID0+IHtcbiAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTtcbiAgICBpZiAoeCB8fCB4ID09PSAwKSByZXR1cm4geDtcbiAgICByZXR1cm4gKGNvbXBhcmUoYiwgYikgPT09IDApIC0gKGNvbXBhcmUoYSwgYSkgPT09IDApO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNjZW5kaW5nRGVmaW5lZChhLCBiKSB7XG4gIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1heCh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1heDtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbFxuICAgICAgICAgICYmIChtYXggPCB2YWx1ZSB8fCAobWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbFxuICAgICAgICAgICYmIChtYXggPCB2YWx1ZSB8fCAobWF4ID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtYXggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pbih2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1pbjtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbFxuICAgICAgICAgICYmIChtaW4gPiB2YWx1ZSB8fCAobWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbFxuICAgICAgICAgICYmIChtaW4gPiB2YWx1ZSB8fCAobWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSkge1xuICAgICAgICBtaW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1pbjtcbn1cbiIsImltcG9ydCB7YXNjZW5kaW5nRGVmaW5lZCwgY29tcGFyZURlZmluZWR9IGZyb20gXCIuL3NvcnQuanNcIjtcblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvcXVpY2tzZWxlY3Rcbi8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBxdWlja3NlbGVjdChhcnJheSwgaywgbGVmdCA9IDAsIHJpZ2h0ID0gSW5maW5pdHksIGNvbXBhcmUpIHtcbiAgayA9IE1hdGguZmxvb3Ioayk7XG4gIGxlZnQgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIGxlZnQpKTtcbiAgcmlnaHQgPSBNYXRoLmZsb29yKE1hdGgubWluKGFycmF5Lmxlbmd0aCAtIDEsIHJpZ2h0KSk7XG5cbiAgaWYgKCEobGVmdCA8PSBrICYmIGsgPD0gcmlnaHQpKSByZXR1cm4gYXJyYXk7XG5cbiAgY29tcGFyZSA9IGNvbXBhcmUgPT09IHVuZGVmaW5lZCA/IGFzY2VuZGluZ0RlZmluZWQgOiBjb21wYXJlRGVmaW5lZChjb21wYXJlKTtcblxuICB3aGlsZSAocmlnaHQgPiBsZWZ0KSB7XG4gICAgaWYgKHJpZ2h0IC0gbGVmdCA+IDYwMCkge1xuICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7XG4gICAgICBjb25zdCBtID0gayAtIGxlZnQgKyAxO1xuICAgICAgY29uc3QgeiA9IE1hdGgubG9nKG4pO1xuICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7XG4gICAgICBjb25zdCBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTtcbiAgICAgIGNvbnN0IG5ld0xlZnQgPSBNYXRoLm1heChsZWZ0LCBNYXRoLmZsb29yKGsgLSBtICogcyAvIG4gKyBzZCkpO1xuICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTtcbiAgICAgIHF1aWNrc2VsZWN0KGFycmF5LCBrLCBuZXdMZWZ0LCBuZXdSaWdodCwgY29tcGFyZSk7XG4gICAgfVxuXG4gICAgY29uc3QgdCA9IGFycmF5W2tdO1xuICAgIGxldCBpID0gbGVmdDtcbiAgICBsZXQgaiA9IHJpZ2h0O1xuXG4gICAgc3dhcChhcnJheSwgbGVmdCwgayk7XG4gICAgaWYgKGNvbXBhcmUoYXJyYXlbcmlnaHRdLCB0KSA+IDApIHN3YXAoYXJyYXksIGxlZnQsIHJpZ2h0KTtcblxuICAgIHdoaWxlIChpIDwgaikge1xuICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qO1xuICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbaV0sIHQpIDwgMCkgKytpO1xuICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyYXlbal0sIHQpID4gMCkgLS1qO1xuICAgIH1cblxuICAgIGlmIChjb21wYXJlKGFycmF5W2xlZnRdLCB0KSA9PT0gMCkgc3dhcChhcnJheSwgbGVmdCwgaik7XG4gICAgZWxzZSArK2osIHN3YXAoYXJyYXksIGosIHJpZ2h0KTtcblxuICAgIGlmIChqIDw9IGspIGxlZnQgPSBqICsgMTtcbiAgICBpZiAoayA8PSBqKSByaWdodCA9IGogLSAxO1xuICB9XG5cbiAgcmV0dXJuIGFycmF5O1xufVxuXG5mdW5jdGlvbiBzd2FwKGFycmF5LCBpLCBqKSB7XG4gIGNvbnN0IHQgPSBhcnJheVtpXTtcbiAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgYXJyYXlbal0gPSB0O1xufVxuIiwiaW1wb3J0IG1heCBmcm9tIFwiLi9tYXguanNcIjtcbmltcG9ydCBtYXhJbmRleCBmcm9tIFwiLi9tYXhJbmRleC5qc1wiO1xuaW1wb3J0IG1pbiBmcm9tIFwiLi9taW4uanNcIjtcbmltcG9ydCBtaW5JbmRleCBmcm9tIFwiLi9taW5JbmRleC5qc1wiO1xuaW1wb3J0IHF1aWNrc2VsZWN0IGZyb20gXCIuL3F1aWNrc2VsZWN0LmpzXCI7XG5pbXBvcnQgbnVtYmVyLCB7bnVtYmVyc30gZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5pbXBvcnQge2FzY2VuZGluZ0RlZmluZWR9IGZyb20gXCIuL3NvcnQuanNcIjtcbmltcG9ydCBncmVhdGVzdCBmcm9tIFwiLi9ncmVhdGVzdC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHtcbiAgdmFsdWVzID0gRmxvYXQ2NEFycmF5LmZyb20obnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpKTtcbiAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpIHx8IGlzTmFOKHAgPSArcCkpIHJldHVybjtcbiAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gbWF4KHZhbHVlcyk7XG4gIHZhciBuLFxuICAgICAgaSA9IChuIC0gMSkgKiBwLFxuICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLFxuICAgICAgdmFsdWUwID0gbWF4KHF1aWNrc2VsZWN0KHZhbHVlcywgaTApLnN1YmFycmF5KDAsIGkwICsgMSkpLFxuICAgICAgdmFsdWUxID0gbWluKHZhbHVlcy5zdWJhcnJheShpMCArIDEpKTtcbiAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGlsZVNvcnRlZCh2YWx1ZXMsIHAsIHZhbHVlb2YgPSBudW1iZXIpIHtcbiAgaWYgKCEobiA9IHZhbHVlcy5sZW5ndGgpIHx8IGlzTmFOKHAgPSArcCkpIHJldHVybjtcbiAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuICt2YWx1ZW9mKHZhbHVlc1swXSwgMCwgdmFsdWVzKTtcbiAgaWYgKHAgPj0gMSkgcmV0dXJuICt2YWx1ZW9mKHZhbHVlc1tuIC0gMV0sIG4gLSAxLCB2YWx1ZXMpO1xuICB2YXIgbixcbiAgICAgIGkgPSAobiAtIDEpICogcCxcbiAgICAgIGkwID0gTWF0aC5mbG9vcihpKSxcbiAgICAgIHZhbHVlMCA9ICt2YWx1ZW9mKHZhbHVlc1tpMF0sIGkwLCB2YWx1ZXMpLFxuICAgICAgdmFsdWUxID0gK3ZhbHVlb2YodmFsdWVzW2kwICsgMV0sIGkwICsgMSwgdmFsdWVzKTtcbiAgcmV0dXJuIHZhbHVlMCArICh2YWx1ZTEgLSB2YWx1ZTApICogKGkgLSBpMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGlsZUluZGV4KHZhbHVlcywgcCwgdmFsdWVvZiA9IG51bWJlcikge1xuICBpZiAoaXNOYU4ocCA9ICtwKSkgcmV0dXJuO1xuICBudW1iZXJzID0gRmxvYXQ2NEFycmF5LmZyb20odmFsdWVzLCAoXywgaSkgPT4gbnVtYmVyKHZhbHVlb2YodmFsdWVzW2ldLCBpLCB2YWx1ZXMpKSk7XG4gIGlmIChwIDw9IDApIHJldHVybiBtaW5JbmRleChudW1iZXJzKTtcbiAgaWYgKHAgPj0gMSkgcmV0dXJuIG1heEluZGV4KG51bWJlcnMpO1xuICB2YXIgbnVtYmVycyxcbiAgICAgIGluZGV4ID0gVWludDMyQXJyYXkuZnJvbSh2YWx1ZXMsIChfLCBpKSA9PiBpKSxcbiAgICAgIGogPSBudW1iZXJzLmxlbmd0aCAtIDEsXG4gICAgICBpID0gTWF0aC5mbG9vcihqICogcCk7XG4gIHF1aWNrc2VsZWN0KGluZGV4LCBpLCAwLCBqLCAoaSwgaikgPT4gYXNjZW5kaW5nRGVmaW5lZChudW1iZXJzW2ldLCBudW1iZXJzW2pdKSk7XG4gIGkgPSBncmVhdGVzdChpbmRleC5zdWJhcnJheSgwLCBpICsgMSksIChpKSA9PiBudW1iZXJzW2ldKTtcbiAgcmV0dXJuIGkgPj0gMCA/IGkgOiAtMTtcbn1cbiIsImltcG9ydCBxdWFudGlsZSwge3F1YW50aWxlSW5kZXh9IGZyb20gXCIuL3F1YW50aWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lZGlhbih2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgcmV0dXJuIHF1YW50aWxlKHZhbHVlcywgMC41LCB2YWx1ZW9mKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lZGlhbkluZGV4KHZhbHVlcywgdmFsdWVvZikge1xuICByZXR1cm4gcXVhbnRpbGVJbmRleCh2YWx1ZXMsIDAuNSwgdmFsdWVvZik7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gVHJhbnNmb3JtKGssIHgsIHkpIHtcbiAgdGhpcy5rID0gaztcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbn1cblxuVHJhbnNmb3JtLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRyYW5zZm9ybSxcbiAgc2NhbGU6IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gayA9PT0gMSA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuayAqIGssIHRoaXMueCwgdGhpcy55KTtcbiAgfSxcbiAgdHJhbnNsYXRlOiBmdW5jdGlvbih4LCB5KSB7XG4gICAgcmV0dXJuIHggPT09IDAgJiB5ID09PSAwID8gdGhpcyA6IG5ldyBUcmFuc2Zvcm0odGhpcy5rLCB0aGlzLnggKyB0aGlzLmsgKiB4LCB0aGlzLnkgKyB0aGlzLmsgKiB5KTtcbiAgfSxcbiAgYXBwbHk6IGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldO1xuICB9LFxuICBhcHBseVg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geCAqIHRoaXMuayArIHRoaXMueDtcbiAgfSxcbiAgYXBwbHlZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkgKiB0aGlzLmsgKyB0aGlzLnk7XG4gIH0sXG4gIGludmVydDogZnVuY3Rpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdO1xuICB9LFxuICBpbnZlcnRYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuICh4IC0gdGhpcy54KSAvIHRoaXMuaztcbiAgfSxcbiAgaW52ZXJ0WTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiAoeSAtIHRoaXMueSkgLyB0aGlzLms7XG4gIH0sXG4gIHJlc2NhbGVYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7XG4gIH0sXG4gIHJlc2NhbGVZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkuY29weSgpLmRvbWFpbih5LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WSwgdGhpcykubWFwKHkuaW52ZXJ0LCB5KSk7XG4gIH0sXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiKSBzY2FsZShcIiArIHRoaXMuayArIFwiKVwiO1xuICB9XG59O1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0gbmV3IFRyYW5zZm9ybSgxLCAwLCAwKTtcblxudHJhbnNmb3JtLnByb3RvdHlwZSA9IFRyYW5zZm9ybS5wcm90b3R5cGU7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybShub2RlKSB7XG4gIHdoaWxlICghbm9kZS5fX3pvb20pIGlmICghKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHJldHVybiBub2RlLl9fem9vbTtcbn1cbiIsIlxuLypcbiAgSFRETWF0aCBTdGF0aWMgQ2xhc3MgLSBOb3QgaW50ZW5kZWQgZm9yIGluc3RhbnRpYXRpb24hXG5cbiAgVmFyaWFibGVzOlxuICAgIEEgPSBhbW91bnRcbiAgICBEID0gZGVsYXlcbiAgICBWID0gc3ViamVjdGl2ZSB2YWx1ZVxuXG4gICAgayA9IGRpc2NvdW50IGZhY3RvclxuXG4gIEVxdWF0aW9uczpcbiAgICBWID0gQSAvICgxICsga0QpXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSFRETWF0aCB7XG4gIHN0YXRpYyBhZGsydihhLCBkLCBrKSB7XG4gICAgcmV0dXJuIGEgLyAoMSArIGsgKiBkKTtcbiAgfVxuXG4gIHN0YXRpYyBhZHYyayhhLCBkLCB2KSB7XG4gICAgcmV0dXJuIChhIC0gdikgLyAodiAqIGQpO1xuICB9XG59XG4iLCJcbi8vIEludGVybmFsIGRlcGVuZGVuY2llc1xuaW1wb3J0IEhURE1hdGggZnJvbSAnLi9odGQtbWF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IEhURE1hdGg7XG4iLCIvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbXCJvZmZcIiwgXCJzZWxmXCJdICovXG5cbi8vIE5lZWRlZCBmb3IgZDMgaW4gV2ViV29ya2VyIVxuaW1wb3J0ICdyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUnO1xuXG5pbXBvcnQgKiBhcyBCYXllc0Rpc3RyaWJ1dGlvbnMgZnJvbSAnYmF5ZXMuanMvZGlzdHJpYnV0aW9ucyc7XG5pbXBvcnQgKiBhcyBCYXllc01jbWMgZnJvbSAnYmF5ZXMuanMvbWNtYyc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgSFRETWF0aCBmcm9tICdAZGVjaWRhYmxlcy9kaXNjb3VudGFibGUtbWF0aCc7XG5cbnNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBrOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogMCwgdXBwZXI6IDEwMH0sXG4gICAgbHVjZToge3R5cGU6ICdyZWFsJywgbG93ZXI6IDAsIHVwcGVyOiAxMDB9LFxuICB9O1xuXG4gIGNvbnN0IGxvZ1Bvc3QgPSAoc3RhdGUsIGRhdGEpID0+IHtcbiAgICBsZXQgbHAgPSAwO1xuXG4gICAgLy8gUHJpb3JzXG4gICAgY29uc3Qga01lYW4gPSAyO1xuICAgIGNvbnN0IGtTaGFwZSA9IDM7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmdhbW1hKFxuICAgICAgc3RhdGUuayxcbiAgICAgIGtTaGFwZSxcbiAgICAgIGtTaGFwZSAvIGtNZWFuLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuaywgMCwgMTAwKTtcblxuICAgIGNvbnN0IGx1Y2VNZWFuID0gMjtcbiAgICBjb25zdCBsdWNlU2hhcGUgPSAzO1xuICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5nYW1tYShcbiAgICAgIHN0YXRlLmx1Y2UsXG4gICAgICBsdWNlU2hhcGUsXG4gICAgICBsdWNlU2hhcGUgLyBsdWNlTWVhbixcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmx1Y2UsIDAsIDEwMCk7XG5cbiAgICAvLyBMaWtlbGlob29kXG4gICAgZGF0YS5mb3JFYWNoKChjaG9pY2UpID0+IHtcbiAgICAgIC8vIFZhbHVlc1xuICAgICAgY29uc3QgdnMgPSBIVERNYXRoLmFkazJ2KGNob2ljZS5hcywgY2hvaWNlLmRzLCBzdGF0ZS5rKTtcbiAgICAgIGNvbnN0IHZsID0gSFRETWF0aC5hZGsydihjaG9pY2UuYWwsIGNob2ljZS5kbCwgc3RhdGUuayk7XG5cbiAgICAgIC8vIENob2ljZSBvZiBzb29uZXIgb3IgbGF0ZXIgaXMgc2FtcGxlZCBmcm9tIGEgQmVybm91bGxpIGRpc3RyaWJ1dGlvblxuICAgICAgLy8gTHVjZSBjaG9pY2UgcnVsZSBpcyB1c2VkIHRvIGNvbXB1dGUgcHJvYmFiaWxpdHkgb2Ygd2FpdGluZyEgKDAgPSBzb29uZXIsIDEgPSBsYXRlcilcbiAgICAgIGNvbnN0IGJpbnZhbCA9IDEgLyAoMSArIE1hdGguZXhwKHN0YXRlLmx1Y2UgKiAodnMgLSB2bCkpKTtcblxuICAgICAgLy8gQWN0dWFsIHJlc3BvbnNlXG4gICAgICBjb25zdCByZXNwb25zZSA9IChjaG9pY2UucmVzcG9uc2UgPT09ICdmaXJzdCcpID8gMCA6IDE7XG5cbiAgICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5iZXJuKHJlc3BvbnNlLCBiaW52YWwpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxwO1xuICB9O1xuXG4gIC8vIEluaXRpYWxpemluZyB0aGUgc2FtcGxlclxuICBjb25zdCBzYW1wbGVyID0gbmV3IEJheWVzTWNtYy5BbXdnU2FtcGxlcihwYXJhbXMsIGxvZ1Bvc3QsIGV2ZW50LmRhdGEpO1xuICAvLyBCdXJuaW5nIHNvbWUgc2FtcGxlcyB0byB0aGUgTUNNQyBnb2RzIGFuZCBzYW1wbGluZyA1MDAwIGRyYXdzXG4gIHNhbXBsZXIuYnVybigxMDAwKTtcbiAgY29uc3Qgc2FtcGxlcyA9IHNhbXBsZXIuc2FtcGxlKDUwMDApO1xuXG4gIC8vIEV4dHJhY3Qgc3VtbWFyeSBzdGF0c1xuICBjb25zdCByZXN1bHRzID0ge1xuICAgIGs6IGQzLm1lZGlhbihzYW1wbGVzLmspLFxuICAgIGx1Y2U6IGQzLm1lZGlhbihzYW1wbGVzLmx1Y2UpLFxuICB9O1xuXG4gIHNlbGYucG9zdE1lc3NhZ2Uoe3Jlc3VsdHM6IHJlc3VsdHMsIHNhbXBsZXM6IHNhbXBsZXN9KTtcbn07XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJtb2R1bGUiLCJleHBvcnRzIiwibGQiLCJ0aGlzIiwibGdhbW1hIiwieCIsImoiLCJjb2YiLCJzZXIiLCJ4eCIsInkiLCJ0bXAiLCJsb2ciLCJsZmFjdG9yaWFsIiwibiIsIk5hTiIsImxjaG9vc2UiLCJrIiwibGJldGEiLCJhIiwiYiIsIk1hdGgiLCJleHAiLCJhYnMiLCJwb3ciLCJzcXJ0IiwicGkiLCJQSSIsImJldGEiLCJzaGFwZTEiLCJzaGFwZTIiLCJJbmZpbml0eSIsImNhdWNoeSIsImxvY2F0aW9uIiwic2NhbGUiLCJub3JtIiwibWVhbiIsInNkIiwiYml2YXJub3JtIiwiY29yciIsInoiLCJub3JtYWxpemluZ19mYWN0b3IiLCJiaXZhcl9sb2dfZGVucyIsImxhcGxhY2UiLCJkZXhwIiwiZ2FtbWEiLCJzaGFwZSIsInJhdGUiLCJpbnZnYW1tYSIsImxub3JtIiwibWVhbmxvZyIsInNkbG9nIiwicGFyZXRvIiwidCIsImRmIiwid2VpYnVsbCIsInRtcDEiLCJ0bXAyIiwibG9naXMiLCJlIiwiZiIsImRpcmljaGxldCIsImFscGhhIiwic3VtX2FscGhhIiwic3VtX2xnYW1tYV9hbHBoYSIsInN1bV9hbHBoYV9zdWJfMV9sb2dfeCIsImxlbmd0aCIsImkiLCJ1bmlmIiwibWluIiwibWF4IiwiYmVybiIsInByb2IiLCJjYXQiLCJwcm9icyIsImJpbm9tIiwic2l6ZSIsIm5iaW5vbSIsImh5cGVyIiwibSIsInBvaXMiLCJsYW1iZGEiLCJtY21jIiwicnVuaWYiLCJyYW5kb20iLCJydW5pZl9kaXNjcmV0ZSIsImZsb29yIiwicm5vcm0iLCJ1IiwidiIsInEiLCJkZWVwX2Nsb25lIiwic3JjIiwibWl4aW4iLCJkZXN0Iiwic291cmNlIiwiY29weUZ1bmMiLCJuYW1lIiwicyIsImVtcHR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwibm9kZVR5cGUiLCJjbG9uZU5vZGUiLCJEYXRlIiwiZ2V0VGltZSIsIlJlZ0V4cCIsInIiLCJsIiwiQXJyYXkiLCJwdXNoIiwiY29uc3RydWN0b3IiLCJjbG9uZV9wYXJhbV9kcmF3IiwiaXNBcnJheSIsInhfY29weSIsInNsaWNlIiwiaXNfbnVtYmVyIiwib2JqZWN0IiwiTnVtYmVyIiwiY3JlYXRlX2FycmF5IiwiZGltIiwiaW5pdCIsImFyciIsImFycmF5X2RpbSIsImNvbmNhdCIsImFycmF5X2VxdWFsIiwiYTEiLCJhMiIsIm5lc3RlZF9hcnJheV9hcHBseSIsImZ1biIsInJlc3VsdCIsInNodWZmbGVfYXJyYXkiLCJhcnJheSIsInRlbXAiLCJuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5IiwibGVuIiwiYXJyYXlfaXMiLCJhcnJheV9pIiwiZ2V0X29wdGlvbiIsIm9wdGlvbl9uYW1lIiwib3B0aW9ucyIsImRlZmF1bF92YWx1ZSIsImhhc093blByb3BlcnR5IiwidW5kZWZpbmVkIiwiZ2V0X211bHRpZGltX29wdGlvbiIsInZhbHVlIiwicGFyYW1faW5pdF9maXhlZCIsInR5cGUiLCJsb3dlciIsInVwcGVyIiwicm91bmQiLCJjb21wbGV0ZV9wYXJhbXMiLCJwYXJhbXNfdG9fY29tcGxldGUiLCJwYXJhbV9pbml0IiwicGFyYW1zIiwicGFyYW1fbmFtZSIsInBhcmFtIiwiU3RlcHBlciIsInN0YXRlIiwibG9nX3Bvc3QiLCJzdGVwIiwic3RhcnRfYWRhcHRhdGlvbiIsInN0b3BfYWRhcHRhdGlvbiIsImluZm8iLCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciIsImdlbmVyYXRlX3Byb3Bvc2FsIiwicGFyYW1fbmFtZXMiLCJrZXlzIiwicHJvcF9sb2dfc2NhbGUiLCJiYXRjaF9zaXplIiwibWF4X2FkYXB0YXRpb24iLCJpbml0aWFsX2FkYXB0YXRpb24iLCJ0YXJnZXRfYWNjZXB0X3JhdGUiLCJpc19hZGFwdGluZyIsImFjY2VwdGFuY2VfY291bnQiLCJiYXRjaF9jb3VudCIsIml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24iLCJjcmVhdGUiLCJwYXJhbV9zdGF0ZSIsInBhcmFtX3Byb3Bvc2FsIiwiY3Vycl9sb2dfZGVucyIsInByb3BfbG9nX2RlbnMiLCJhY2NlcHRfcHJvYiIsImxvZ19zZF9hZGp1c3RtZW50Iiwibm9ybWFsX3Byb3Bvc2FsIiwiUmVhbE1ldHJvcG9saXNTdGVwcGVyIiwiZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsIiwiSW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiU3ViU3RlcHBlciIsImNyZWF0ZV9zdWJzdGVwcGVycyIsInN1YnN0YXRlIiwic3Vic3RlcHBlcnMiLCJzdWJvcHRpb25zIiwic3VicGFyYW0iLCJzdWJzdGVwcGVyIiwiTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiQmluYXJ5U3RlcHBlciIsInplcm9fbG9nX2RlbnMiLCJvbmVfbG9nX2RlbnMiLCJtYXhfbG9nX2RlbnMiLCJ6ZXJvX3Byb2IiLCJCaW5hcnlDb21wb25lbnRTdGVwcGVyIiwic3VicGFyYW1zIiwiQW13Z1N0ZXBwZXIiLCJTZWxlY3RTdGVwcGVyIiwicGFyYW1fb2JqZWN0X3dyYXAiLCJwYXJhbV9vcHRpb25zIiwiU2FtcGxlciIsImRhdGEiLCJwYXJhbV9pbml0X2Z1biIsInRoaW5uaW5nX2ludGVydmFsIiwicGFyYW1zX3RvX21vbml0b3IiLCJ0aGluIiwibW9uaXRvciIsInN0ZXBwZXJzIiwiY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUiLCJzYW1wbGUiLCJuX2l0ZXJhdGlvbnMiLCJtb25pdG9yZWRfcGFyYW1zIiwiY3Vycl9zYW1wbGUiLCJidXJuIiwiQW13Z1NhbXBsZXIiLCJhc2NlbmRpbmciLCJudW1iZXJzIiwidmFsdWVzIiwidmFsdWVvZiIsImluZGV4IiwiY29tcGFyZURlZmluZWQiLCJjb21wYXJlIiwiYXNjZW5kaW5nRGVmaW5lZCIsIlR5cGVFcnJvciIsInF1aWNrc2VsZWN0IiwibGVmdCIsInJpZ2h0IiwibmV3TGVmdCIsIm5ld1JpZ2h0Iiwic3dhcCIsInF1YW50aWxlIiwicCIsIkZsb2F0NjRBcnJheSIsImZyb20iLCJpc05hTiIsImkwIiwidmFsdWUwIiwic3ViYXJyYXkiLCJ2YWx1ZTEiLCJtZWRpYW4iLCJUcmFuc2Zvcm0iLCJ0cmFuc2xhdGUiLCJhcHBseSIsInBvaW50IiwiYXBwbHlYIiwiYXBwbHlZIiwiaW52ZXJ0IiwiaW52ZXJ0WCIsImludmVydFkiLCJyZXNjYWxlWCIsImNvcHkiLCJkb21haW4iLCJyYW5nZSIsIm1hcCIsInJlc2NhbGVZIiwiSFRETWF0aCIsImFkazJ2IiwiZCIsImFkdjJrIiwic2VsZiIsIm9ubWVzc2FnZSIsImV2ZW50IiwibHVjZSIsImxvZ1Bvc3QiLCJscCIsImtNZWFuIiwia1NoYXBlIiwiQmF5ZXNEaXN0cmlidXRpb25zIiwibHVjZU1lYW4iLCJsdWNlU2hhcGUiLCJmb3JFYWNoIiwiY2hvaWNlIiwidnMiLCJhcyIsImRzIiwidmwiLCJhbCIsImRsIiwiYmludmFsIiwicmVzcG9uc2UiLCJzYW1wbGVyIiwiQmF5ZXNNY21jIiwic2FtcGxlcyIsInJlc3VsdHMiLCJkMyIsInBvc3RNZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Q0FHQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7Q0FFQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTs7Q0FPQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7R0FDQyxDQUFVQSxVQUFBQSxJQUFJLEVBQUVDLE9BQU8sRUFBRTtLQUlmLElBQWtDQyxNQUFNLENBQUNDLE9BQU8sRUFBRTtDQUM3RDtDQUNBO0NBQ0E7Q0FDUUQsTUFBQUEsTUFBQSxDQUFBQyxPQUFBLEdBQWlCRixPQUFPLEVBQUUsQ0FBQTtDQUNsQyxLQUFLLE1BQU07Q0FDWDtDQUNRRCxNQUFBQSxJQUFJLENBQUNJLEVBQUUsR0FBR0gsT0FBTyxFQUFFLENBQUE7Q0FDeEIsS0FBQTtDQUNILEdBQUMsRUFBQ0ksY0FBSSxFQUFFLFlBQVc7Q0FDbkI7S0FDRSxJQUFJRCxFQUFFLEdBQUksRUFBRSxDQUFBOztDQUVkO0NBQ0E7O0NBRUUsSUFBQSxJQUFJRSxNQUFNLEdBQUcsVUFBU0MsQ0FBQyxFQUFFO09BQ3ZCLElBQUlDLENBQUMsR0FBRyxDQUFDLENBQUE7Q0FDVCxNQUFBLElBQUlDLEdBQUcsR0FBRyxDQUNSLGlCQUFpQixFQUFFLENBQUMsaUJBQWlCLEVBQUUsaUJBQWlCLEVBQ3hELENBQUMsaUJBQWlCLEVBQUUscUJBQXFCLEVBQUUsQ0FBQyxrQkFBa0IsQ0FDL0QsQ0FBQTtPQUNELElBQUlDLEdBQUcsR0FBRyxpQkFBaUIsQ0FBQTtDQUMzQixNQUFBLElBQUlDLEVBQUUsRUFBRUMsQ0FBQyxFQUFFQyxHQUFHLENBQUE7T0FDZEEsR0FBRyxHQUFHLENBQUNELENBQUMsR0FBR0QsRUFBRSxHQUFHSixDQUFDLElBQUks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QixDQUM1QnRILEtBQUssQ0FBQ2lILElBQUksRUFDVk8sU0FBUyxFQUNUQSxTQUFTLEdBQUdELFFBQ2QsQ0FBQyxDQUFBO0NBQ0Q7O0NBRUE7Q0FDQW5FLElBQUFBLElBQUksQ0FBQ3FFLE9BQU8sQ0FBRUMsTUFBTSxJQUFLO0NBQ3ZCO0NBQ0EsTUFBQSxNQUFNQyxFQUFFLEdBQUdqQixPQUFPLENBQUNDLEtBQUssQ0FBQ2UsTUFBTSxDQUFDRSxFQUFFLEVBQUVGLE1BQU0sQ0FBQ0csRUFBRSxFQUFFN0gsS0FBSyxDQUFDL0ksQ0FBQyxDQUFDLENBQUE7Q0FDdkQsTUFBQSxNQUFNNlEsRUFBRSxHQUFHcEIsT0FBTyxDQUFDQyxLQUFLLENBQUNlLE1BQU0sQ0FBQ0ssRUFBRSxFQUFFTCxNQUFNLENBQUNNLEVBQUUsRUFBRWhJLEtBQUssQ0FBQy9JLENBQUMsQ0FBQyxDQUFBOztDQUV2RDtDQUNBO0NBQ0EsTUFBQSxNQUFNZ1IsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUc1USxJQUFJLENBQUNDLEdBQUcsQ0FBQzBJLEtBQUssQ0FBQ2lILElBQUksSUFBSVUsRUFBRSxHQUFHRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7O0NBRXpEO09BQ0EsTUFBTUksUUFBUSxHQUFJUixNQUFNLENBQUNRLFFBQVEsS0FBSyxPQUFPLEdBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtPQUV0RGYsRUFBRSxJQUFJRyx5QkFBdUIsQ0FBQ1ksUUFBUSxFQUFFRCxNQUFNLENBQUMsQ0FBQTtDQUNqRCxLQUFDLENBQUMsQ0FBQTtDQUVGLElBQUEsT0FBT2QsRUFBRSxDQUFBO0lBQ1YsQ0FBQTs7Q0FFRDtDQUNBLEVBQUEsTUFBTWdCLE9BQU8sR0FBRyxJQUFJQyx1QkFBcUIsQ0FBQ3hJLE1BQU0sRUFBRXNILE9BQU8sRUFBRUYsS0FBSyxDQUFDNUQsSUFBSSxDQUFDLENBQUE7Q0FDdEU7Q0FDQStFLEVBQUFBLE9BQU8sQ0FBQ25FLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtDQUNsQixFQUFBLE1BQU1xRSxPQUFPLEdBQUdGLE9BQU8sQ0FBQ3ZFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTs7Q0FFcEM7Q0FDQSxFQUFBLE1BQU0wRSxPQUFPLEdBQUc7S0FDZHJSLENBQUMsRUFBRXNSLE1BQVMsQ0FBQ0YsT0FBTyxDQUFDcFIsQ0FBQyxDQUFDO0NBQ3ZCZ1EsSUFBQUEsSUFBSSxFQUFFc0IsTUFBUyxDQUFDRixPQUFPLENBQUNwQixJQUFJLENBQUE7SUFDN0IsQ0FBQTtHQUVESCxJQUFJLENBQUMwQixXQUFXLENBQUM7Q0FBQ0YsSUFBQUEsT0FBTyxFQUFFQSxPQUFPO0NBQUVELElBQUFBLE9BQU8sRUFBRUEsT0FBQUE7Q0FBTyxHQUFDLENBQUMsQ0FBQTtDQUN4RCxDQUFDOzs7Ozs7IiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzAsMSwyLDMsNCw1LDYsNyw4LDksMTBdfQ==",pp=!1,function(t){return mp=mp||yp(fp,Gp,pp),new Worker(mp,t)});class xp extends LF{static get properties(){return{}}constructor(){super(),this.k=.05,this.choices=[],this.samples=null,this.working=!1,this.queued=!1,this.worker=new Ap,this.worker.onmessage=t=>{this.working=!1,this.samples=t.data.samples,this.k=t.data.results.k,this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-fit-update",{detail:{k:this.k},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}clear(){this.choices=[],this.fit()}get(t="default"){const e=this.choices.find((e=>e.name===t));return void 0===e?null:e}set(t,e,n,i,s,c="",a=""){const l=this.choices.find((t=>t.name===c));void 0===l?this.choices.push({as:t,ds:e,al:n,dl:i,response:s,name:c,label:a}):(l.as=t,l.ds=e,l.al=n,l.dl=i,l.response=s,l.label=a),this.fit()}static get styles(){return[super.styles,l`
        /* :host {
          display: inline-block;
        } */

        figure {
          margin: 0.625rem;
        }

        figure h2 {
          margin: 0.25rem 0;

          font-size: 1.125rem;
          font-weight: 600;
        }

        .trace,
        .hist {
          display: inline-block;
        }
      `]}render(){return M`
      <div>
        <div>After ${this.choices.length} trials:</div>
        <div>Current:
          <var class="math-var k">k</var> = ${this.k.toFixed(2)}
        </div>
        <div class="param">
          <div class="trace k"></div>
          <div class="hist k"></div>
        </div>
        <div class="param">
          <div class="trace luce"></div>
          <div class="hist luce"></div>
        </div>
      </div>
    `}plotParam(t){this.shadowRoot.querySelector(`.hist.${t}`).replaceChildren(hG({title:`Posterior of ${t}`,x:{label:`${t}`},width:320,height:240,style:"font-size: 0.75rem; font-family: var(---font-family-base);",marks:[Cp(this.samples[t],WG({y:"count"},{x:Mu}))]})),this.shadowRoot.querySelector(`.trace.${t}`).replaceChildren(hG({title:`Traceplot of ${t}`,x:{label:"Samples"},y:{label:`${t}`},width:320,height:240,style:"font-size: 0.75rem; font-family: var(---font-family-base);",marks:[hp(this.samples[t])]}))}update(t){super.update(t),null!==this.samples&&(this.plotParam("k"),this.plotParam("luce"))}}customElements.define("htd-fit",xp);class Lp extends LF{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},a:{attribute:"amount",type:Number,reflect:!0},d:{attribute:"delay",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.a=0,this.d=0}static get styles(){return[super.styles,l`
        :host {
          display: inline-block;
          
          width: 10rem;
          height: 10rem;
        }

        .holder {
          display: flex;
          
          flex-flow: column nowrap;

          align-items: center;
          justify-content: center;

          width: 100%;
          height: 100%;
          overflow: visible;
          

          background: var(---color-element-background);
          border: 2px solid var(---color-element-emphasis);
          border-radius: var(---border-radius);
        }

        .interactive,
        .static {
          font-size: 1.75rem;
        }

        .interactive {
          --decidables-spinner-font-size: 1.75rem;
        }

        .static {
          padding: 0 0.25rem;
          
          border-radius: var(---border-radius);
        }

        .amount {
          --decidables-spinner-prefix: "$";
          background-color: var(---color-a-light);
        }

        .amount.interactive {
          --decidables-spinner-input-width: 4rem;
        }

        .delay {
          background-color: var(---color-d-light);
        }
        
        .delay.interactive {
          --decidables-spinner-input-width: 6.75rem;
          --decidables-spinner-postfix: "days";
          --decidables-spinner-postfix-padding: 3.75rem;
        }
      `]}sendEvent(){this.dispatchEvent(new CustomEvent("itc-option-change",{detail:{a:this.a,d:this.d},bubbles:!0}))}aInput(t){this.a=parseFloat(t.target.value),this.sendEvent()}dInput(t){this.d=parseFloat(t.target.value),this.sendEvent()}render(){return M`
      <div class="holder">
        ${"choice"===this.state?this.interactive?M`<decidables-spinner
              class="amount interactive"
              ?disabled=${!this.interactive}
              step="1"
              .value="${this.a}"
              @input=${this.aInput.bind(this)}
              ></decidables-spinner>`:M`<div
              class="amount static"
              >$${this.a}</div>`:""}
        ${"choice"===this.state?M`<div class="in">in</div>`:""}
        ${"choice"===this.state?this.interactive?M`<decidables-spinner
              class="delay interactive"
              ?disabled=${!this.interactive}
              min="0" 
              step="1"
              .value="${this.d}"
              @input=${this.dInput.bind(this)}
              ></decidables-spinner>`:M`<div
              class="delay static"
              >${this.d} days</div>`:""}
      </div>
    `}}customElements.define("itc-option",Lp);class Sp extends LF{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},as:{attribute:"amount-ss",type:Number,reflect:!0},ds:{attribute:"delay-ss",type:Number,reflect:!0},al:{attribute:"amount-ll",type:Number,reflect:!0},dl:{attribute:"delay-ll",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.as=10,this.ds=5,this.al=40,this.dl=30}static get styles(){return[super.styles,l`
        :host {
          display: inline-block;
        }

        .holder {
          user-select: none;
        }

        .holder > * {
          vertical-align: middle;
        }

        .query {
          margin: 0 0.5rem;

          font-family: var(--font-family-code);
          font-size: 1.75rem;
        }

        itc-option {
          width: 10rem;
          height: 10rem;
        }
      `]}sendEvent(){this.dispatchEvent(new CustomEvent("itc-choice-change",{detail:{as:this.as,ds:this.ds,al:this.al,dl:this.dl},bubbles:!0}))}ssChange(t){this.as=parseFloat(t.detail.a),this.ds=parseFloat(t.detail.d),this.sendEvent()}llChange(t){this.al=parseFloat(t.detail.a),this.dl=parseFloat(t.detail.d),this.sendEvent()}render(){return M`
      <div class="holder">
        <itc-option
          class="ss"
          state=${this.state}
          ?interactive=${this.interactive}
          amount="${this.as}"
          delay="${this.ds}"
          @itc-option-change=${this.ssChange.bind(this)}>
        </itc-option><span class="query"
         >${"choice"===this.state?"?":"fixation"===this.state?"+":M``}</span
        ><itc-option
          class="ll"
          state=${this.state}
          ?interactive=${this.interactive}
          amount="${this.al}"
          delay="${this.dl}"
          @itc-option-change=${this.llChange.bind(this)}>
        </itc-option>
      </div>`}}customElements.define("itc-choice",Sp);class Rp extends LF{static get properties(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.duration=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.states=["resetted","iti","stimulus","ended"],this.state="resetted",this.range={},this.range.as={start:5,stop:20,step:5},this.range.ds={start:5,stop:20,step:5},this.range.al={start:40,stop:80,step:5},this.range.dl={start:40,stop:80,step:5},this.range.as.values=Be(this.range.as.start,this.range.as.stop+.01,this.range.as.step),this.range.ds.values=Be(this.range.ds.start,this.range.ds.stop+.01,this.range.ds.step),this.range.al.values=Be(this.range.al.start,this.range.al.stop+.01,this.range.al.step),this.range.dl.values=Be(this.range.dl.start,this.range.dl.stop+.01,this.range.dl.step),this.firstUpdate=!0,this.as=0,this.ds=0,this.al=0,this.dl=0,this.trial=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.runner=void 0}static get styles(){return[super.styles,l`
        :host {
          display: inline-block;
        }
      `]}render(){return M`
      <div class="holder">
        <itc-choice 
          state="${"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank"}"
          amount-ss="${this.as}"
          delay-ss="${this.ds}"
          amount-ll="${this.al}"
          delay-ll="${this.dl}">
        </itc-choice>
      </div>`}update(t){super.update(t),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=ic()-this.pauseTime,this.pauseTime=0),this.runner=function(t,e,n){var i=new cc,s=e;return null==e?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(t,e,n){e=+e,n=null==n?ic():+n,i._restart((function c(a){a+=s,i._restart(c,s+=e,n),t(a)}),e,n)},i.restart(t,e,n),i)}(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=ic())),this.firstUpdate=!1}reset(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.as=0,this.ds=0,this.al=0,this.dl=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}run(){const t=ic(),e=this.baseTime?t-this.baseTime:0,n=this.baseTime?e-this.startTime:0;this.lastTime=e,"resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("itc-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&n>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=e,this.as=this.range.as.values[Math.floor(Math.random()*this.range.as.values.length)],this.ds=this.range.ds.values[Math.floor(Math.random()*this.range.ds.values.length)],this.al=this.range.al.values[Math.floor(Math.random()*this.range.al.values.length)],this.dl=this.range.dl.values[Math.floor(Math.random()*this.range.dl.values.length)],this.dispatchEvent(new CustomEvent("itc-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,as:this.as,ds:this.ds,al:this.al,dl:this.dl},bubbles:!0}))):"stimulus"===this.state&&n>=this.duration&&(this.dispatchEvent(new CustomEvent("itc-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,as:this.as,ds:this.ds,al:this.al,dl:this.dl},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("itc-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=e))}}customElements.define("itc-task",Rp);class Np extends tu{static get properties(){return{a:{attribute:"amount",type:Number,reflect:!0},d:{attribute:"delay",type:Number,reflect:!0},k:{attribute:"k",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.a=100,this.d=30,this.k=.05,this.alignState()}alignState(){this.v=qF.adk2v(this.a,this.d,this.k)}sendEvent(){this.dispatchEvent(new CustomEvent("htd-equation-adk2v-change",{detail:{a:this.a,d:this.d,k:this.k,v:this.v},bubbles:!0}))}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}dInput(t){this.d=parseFloat(t.target.value),this.alignState(),this.sendEvent()}kInput(t){this.k=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,e,n,i;this.numeric?(t=M`<decidables-spinner class="a bottom" ?disabled=${!this.interactive} step="1" .value="${this.a}" @input=${this.aInput.bind(this)}>
          <var class="math-var">A</var>
        </decidables-spinner>`,e=M`<decidables-spinner class="d bottom" ?disabled=${!this.interactive} min="0" step="1" .value="${this.d}" @input=${this.dInput.bind(this)}>
          <var class="math-var">D</var>
        </decidables-spinner>`,n=M`<decidables-spinner class="k bottom" ?disabled=${!this.interactive} min="0" max="100" step=".001" .value="${this.k}" @input=${this.kInput.bind(this)}>
          <var class="math-var">k</var>
        </decidables-spinner>`,i=M`<decidables-spinner class="v bottom" disabled step=".001" .value="${+this.v.toFixed(3)}">
          <var class="math-var">V</var>
        </decidables-spinner>`):(t=M`<var class="math-var a">A</var>`,e=M`<var class="math-var d">D</var>`,n=M`<var class="math-var k">k</var>`,i=M`<var class="math-var v">V</var>`);const s=M`
      <tr>
        <td rowspan="2">
          ${i}<span class="equals">=</span>
        </td>
        <td class="underline">
          ${t}
        </td>
      </tr>
      <tr>
        <td class="">
          <span class="paren tight">(</span>1<span class="plus">+</span>${n}${e}<span class="paren tight">)</span>
        </td>
      </tr>`;return M`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${s}
          </tbody>
        </table>
      </div>`}}customElements.define("htd-equation-adk2v",Np);class Xp extends LF{static get styles(){return[super.styles,l`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `]}render(){return M`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("htd-example",Xp);class vp extends Xp{connectedCallback(){super.connectedCallback(),this.discountableControl=this.querySelector("discountable-control"),this.itcTask=this.querySelector("itc-task"),this.discountableResponse=this.querySelector("discountable-response"),this.htdFit=this.querySelector("htd-fit"),this.htdCurves=this.querySelector("htd-curves"),this.discountableControl&&(this.discountableControl.hasAttribute("trials")&&this.discountableControl.addEventListener("discountable-control-trials",(t=>{this.itcTask&&(this.itcTask.trials=t.detail.trials),this.discountableResponse&&(this.discountableResponse.trialTotal=t.detail.trials)})),this.discountableControl.hasAttribute("duration")&&this.discountableControl.addEventListener("discountable-control-duration",(t=>{this.itcTask&&(this.itcTask.duration=t.detail.duration,this.itcTask.iti=t.detail.duration)})),this.discountableControl.hasAttribute("run")&&this.discountableControl.addEventListener("discountable-control-run",(()=>{this.itcTask&&(this.itcTask.running=!0)})),this.discountableControl.hasAttribute("pause")&&this.discountableControl.addEventListener("discountable-control-pause",(()=>{this.itcTask&&(this.itcTask.running=!1)})),this.discountableControl.hasAttribute("reset")&&this.discountableControl.addEventListener("discountable-control-reset",(()=>{this.itcTask&&this.itcTask.reset(),this.discountableResponse&&this.discountableResponse.reset(),this.htdFit&&this.htdFit.clear(),this.htdCurves&&this.htdCurves.clearOptions()}))),this.itcTask&&(this.discountableResponse&&(this.discountableResponse.trialTotal=this.itcTask.trials),this.itcTask.addEventListener("itc-trial-start",(t=>{this.discountableResponse&&this.discountableResponse.start(t.detail.as,t.detail.ds,t.detail.al,t.detail.dl,t.detail.trial),this.htdCurves&&(this.htdCurves.setOption(t.detail.as,t.detail.ds,"smaller-sooner","s"),this.htdCurves.setOption(t.detail.al,t.detail.dl,"larger-later","l"))})),this.itcTask.addEventListener("itc-trial-end",(()=>{this.discountableResponse&&this.discountableResponse.stop(),this.htdCurves&&(this.htdCurves.removeOption("smaller-sooner"),this.htdCurves.removeOption("larger-later"))})),this.itcTask.addEventListener("itc-block-end",(()=>{this.discountableControl&&this.discountableControl.complete()}))),this.discountableResponse&&this.discountableResponse.addEventListener("discountable-response",(t=>{this.htdFit&&this.htdFit.set(t.detail.as,t.detail.ds,t.detail.al,t.detail.dl,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())})),this.htdFit&&this.htdFit.addEventListener("htd-fit-update",(t=>{this.htdCurves&&(this.htdCurves.k=t.detail.k)}))}}customElements.define("htd-example-human",vp);class Zp extends Xp{static get properties(){return{as:{attribute:"amount-ss",type:Number,reflect:!0},ds:{attribute:"delay-ss",type:Number,reflect:!0},al:{attribute:"amount-ll",type:Number,reflect:!0},dl:{attribute:"delay-ll",type:Number,reflect:!0},k:{attribute:"k",type:Number,reflect:!0}}}constructor(){super(),this.as=10,this.ds=1,this.al=50,this.dl=40,this.k=.05,this.htdCalculation=null,this.htdCurves=null,this.itcChoice=null}connectedCallback(){super.connectedCallback(),this.htdCalculation=this.querySelector("htd-calculation"),this.htdCurves=this.querySelector("htd-curves"),this.itcChoice=this.querySelector("itc-choice"),this.htdCalculation&&this.htdCalculation.addEventListener("htd-calculation-change",(t=>{this.as=t.detail.as,this.ds=t.detail.ds,this.al=t.detail.al,this.dl=t.detail.dl,this.k=t.detail.k})),this.htdCurves&&this.htdCurves.addEventListener("htd-curves-change",(t=>{this.k=t.detail.k,"default"===t.detail.name?(this.as=t.detail.a,this.ds=t.detail.d):"larger-later"===t.detail.name&&(this.al=t.detail.a,this.dl=t.detail.d)})),this.itcChoice&&this.itcChoice.addEventListener("itc-choice-change",(t=>{this.as=t.detail.as,this.ds=t.detail.ds,this.al=t.detail.al,this.dl=t.detail.dl})),this.requestUpdate()}update(t){super.update(t),this.htdCalculation&&(this.htdCalculation.as=this.as,this.htdCalculation.ds=this.ds,this.htdCalculation.al=this.al,this.htdCalculation.dl=this.dl,this.htdCalculation.k=this.k),this.htdCurves&&(this.htdCurves.setOption(this.as,this.ds,"default","s"),this.htdCurves.setOption(this.al,this.dl,"larger-later","l"),this.htdCurves.k=this.k),this.itcChoice&&(this.itcChoice.as=this.as,this.itcChoice.ds=this.ds,this.itcChoice.al=this.al,this.itcChoice.dl=this.dl)}}customElements.define("htd-example-interactive",Zp);class Ep extends Xp{static get properties(){return{k:{attribute:"k",type:Number,reflect:!0}}}constructor(){super(),this.k=.2,this.discountableControl=null,this.discountableResponse=null,this.htdCalculation=null,this.htdCurves=null,this.itcTask=null}connectedCallback(){super.connectedCallback(),this.discountableControl=this.querySelector("discountable-control"),this.discountableResponse=this.querySelector("discountable-response"),this.htdCalculation=this.querySelector("htd-calculation"),this.htdCurves=this.querySelector("htd-curves"),this.itcTask=this.querySelector("itc-task"),this.discountableControl&&(this.discountableControl.hasAttribute("trials")&&this.discountableControl.addEventListener("discountable-control-trials",(t=>{this.itcTask&&(this.itcTask.trials=t.detail.trials),this.discountableResponse&&(this.discountableResponse.trialTotal=t.detail.trials)})),this.discountableControl.hasAttribute("duration")&&this.discountableControl.addEventListener("discountable-control-duration",(t=>{this.itcTask&&(this.itcTask.duration=t.detail.duration,this.itcTask.iti=t.detail.duration)})),this.discountableControl.hasAttribute("run")&&this.discountableControl.addEventListener("discountable-control-run",(()=>{this.htdCurves&&this.htdCurves.resumeTrial(),this.itcTask&&(this.itcTask.running=!0)})),this.discountableControl.hasAttribute("pause")&&this.discountableControl.addEventListener("discountable-control-pause",(()=>{this.htdCurves&&this.htdCurves.pauseTrial(),this.itcTask&&(this.itcTask.running=!1)})),this.discountableControl.hasAttribute("reset")&&this.discountableControl.addEventListener("discountable-control-reset",(()=>{this.discountableResponse&&this.discountableResponse.reset(),this.htdCurves&&this.htdCurves.clearOptions(),this.itcTask&&this.itcTask.reset()}))),this.htdCurves&&(this.htdCurves.addEventListener("htd-curves-change",(t=>{this.k=t.detail.k})),this.htdCurves.addEventListener("discountable-response",(t=>{this.discountableResponse&&this.discountableResponse.responded(t.detail.response)}))),this.itcTask&&(this.discountableResponse&&(this.discountableResponse.trialTotal=this.itcTask.trials),this.itcTask.addEventListener("itc-trial-start",(t=>{this.discountableResponse&&this.discountableResponse.start(t.detail.as,t.detail.ds,t.detail.al,t.detail.dl,t.detail.trial);const e=qF.adk2v(t.detail.as,t.detail.ds,this.k)>qF.adk2v(t.detail.al,t.detail.dl,this.k)?"first":"second";this.htdCurves&&this.htdCurves.trial(t.detail.as,t.detail.ds,t.detail.al,t.detail.dl,t.detail.trial,e)})),this.itcTask.addEventListener("itc-trial-end",(()=>{this.discountableResponse&&this.discountableResponse.stop()})),this.itcTask.addEventListener("itc-block-end",(()=>{this.discountableControl&&this.discountableControl.complete()}))),this.requestUpdate()}update(t){super.update(t),this.htdCalculation&&(this.htdCalculation.k=this.k),this.htdCurves&&(this.htdCurves.k=this.k)}}customElements.define("htd-example-model",Ep),t.DiscountableControl=SF,t.DiscountableElement=LF,t.DiscountableResponse=RF,t.HTDCalculation=eu,t.HTDCurves=nu,t.HTDEquationADK2V=Np,t.HTDExampleHuman=vp,t.HTDExampleInteractive=Zp,t.HTDExampleModel=Ep,t.HTDFit=xp,t.ITCChoice=Sp,t.ITCOption=Lp,t.ITCTask=Rp}));
//# sourceMappingURL=discountableElements.umd.min.js.map
