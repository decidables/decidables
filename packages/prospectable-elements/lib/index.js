!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).prospectableElements=t()}(function(){return function r(i,a,o){function s(e,t){if(!a[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=a[e]={exports:{}},i[e][0].call(n.exports,function(t){return s(i[e][1][t]||t)},n,n.exports,r,i,a,o)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<o.length;t++)s(o[t]);return s}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=(t=t||{}).eye||[0,0,1],n=t.center||[0,0,0],r=t.up||[0,1,0],i=t.distanceLimits||[0,1/0],a=t.mode||"turntable",o=l(),s=u(),t=c();return o.setDistanceLimits(i[0],i[1]),o.lookAt(0,e,n,r),s.setDistanceLimits(i[0],i[1]),s.lookAt(0,e,n,r),t.setDistanceLimits(i[0],i[1]),t.lookAt(0,e,n,r),new f({turntable:o,orbit:s,matrix:t},a)};var l=t("turntable-camera-controller"),u=t("orbit-camera-controller"),c=t("matrix-camera-controller");function f(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var a=f.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(t){for(var e=t[0],n=[],r=0;r<t[1];++r)n.push("a"+r);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+t[0]+"("+n.join()+")}";a[e]=Function.apply(null,n.concat(i))}),a.recalcMatrix=function(t){this._active.recalcMatrix(t)},a.getDistance=function(t){return this._active.getDistance(t)},a.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},a.lastT=function(){return this._active.lastT()},a.setMode=function(t){var e,n,r;t!==this._mode&&((r=this._controllerNames.indexOf(t))<0||(e=this._active,n=this._controllerList[r],r=Math.max(e.lastT(),n.lastT()),e.recalcMatrix(r),n.setMatrix(r,e.computedMatrix),this._active=n,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius))},a.getMode=function(){return this._mode}},{"matrix-camera-controller":243,"orbit-camera-controller":258,"turntable-camera-controller":654}],2:[function(t,e,n){"use strict";var r="undefined"==typeof WeakMap?t("weak-map"):WeakMap,i=t("gl-buffer"),a=t("gl-vao"),o=new r;e.exports=function(t){var e=o.get(t),n=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);n&&t.isBuffer(n)||(n=i(t,new Float32Array([-1,-1,-1,4,4,-1])),(e=a(t,[{buffer:n,type:t.FLOAT,size:2}]))._triangleBuffer=n,o.set(t,e)),e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()}},{"gl-buffer":113,"gl-vao":178,"weak-map":662}],3:[function(t,e,n){"use strict";var o=t("pad-left");e.exports=function(t,r,i){r="number"==typeof r?r:1,i=i||": ";var t=t.split(/\r?\n/),a=String(t.length+r-1).length;return t.map(function(t,e){var n=e+r,e=String(n).length;return o(n,a-e)+i+t}).join("\n")}},{"pad-left":259}],4:[function(t,e,n){"use strict";e.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var n=t[0].length,r=[t[0]],i=[0],a=1;a<e;++a)if(r.push(t[a]),function(t,e){for(var n=new Array(e+1),r=0;r<t.length;++r)n[r]=t[r];for(r=0;r<=t.length;++r){for(var i=t.length;i<=e;++i){for(var a=new Array(e),o=0;o<e;++o)a[o]=Math.pow(i+1-r,o);n[i]=a}if(s.apply(void 0,n))return!0}return!1}(r,n)){if(i.push(a),i.length===n+1)return i}else r.pop();return i};var s=t("robust-orientation")},{"robust-orientation":633}],5:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=e.length,r=new Array(n+1),i=0;i<n;++i){for(var a=new Array(n+1),o=0;o<=n;++o)a[o]=t[o][i];r[i]=a}r[n]=new Array(n+1);for(i=0;i<=n;++i)r[n][i]=1;for(var s=new Array(n+1),i=0;i<n;++i)s[i]=e[i];s[n]=1;var l=f(r,s),u=h(l[n+1]);0===u&&(u=1);for(var c=new Array(n+1),i=0;i<=n;++i)c[i]=h(l[i])/u;return c};var f=t("robust-linear-solve");function h(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return e}},{"robust-linear-solve":632}],6:[function(t,e,n){"use strict";n.byteLength=function(t){var e=c(t),t=e[0],e=e[1];return 3*(t+e)/4-e},n.toByteArray=function(t){var e,n,r=c(t),i=r[0],r=r[1],a=new u(function(t,e){return 3*(t+e)/4-e}(i,r)),o=0,s=0<r?i-4:i;for(n=0;n<s;n+=4)e=l[t.charCodeAt(n)]<<18|l[t.charCodeAt(n+1)]<<12|l[t.charCodeAt(n+2)]<<6|l[t.charCodeAt(n+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=255&e;2===r&&(e=l[t.charCodeAt(n)]<<2|l[t.charCodeAt(n+1)]>>4,a[o++]=255&e);1===r&&(e=l[t.charCodeAt(n)]<<10|l[t.charCodeAt(n+1)]<<4|l[t.charCodeAt(n+2)]>>2,a[o++]=e>>8&255,a[o++]=255&e);return a},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],a=0,o=n-r;a<o;a+=16383)i.push(function(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(function(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}(r));return i.join("")}(t,a,o<a+16383?o:a+16383));1==r?(e=t[n-1],i.push(s[e>>2]+s[e<<4&63]+"==")):2==r&&(e=(t[n-2]<<8)+t[n-1],i.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return i.join("")};for(var s=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)s[i]=r[i],l[r.charCodeAt(i)]=i;function c(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("=");return-1===t&&(t=e),[t,t===e?0:4-t%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],7:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i;i=function(){function s(t){var e,n,r=0,i=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],a=1.000000000190015,t=(n=e=t)+5.5;for(t-=(e+.5)*l(t);r<6;r++)a+=i[r]/++n;return l(2.5066282746310007*a/e)-t}var t={};t.lgamma=s;function n(t){return t<0?NaN:s(t+1)}t.lfactorial=n;function i(t,e){return n(t)-n(e)-n(t-e)}t.lchoose=i;function r(t,e){return s(t)+s(e)-s(t+e)}t.lbeta=r;var l=Math.log,a=Math.exp,o=Math.abs,u=Math.pow,c=Math.sqrt,f=Math.PI;t.beta=function(t,e,n){return 1<t||t<0?-1/0:1===e&&1===n?0:(e-1)*l(t)+(n-1)*l(1-t)-r(e,n)},t.cauchy=function(t,e,n){return l(n)-l(u(t-e,2)+u(n,2))-l(f)},t.norm=function(t,e,n){return-.5*l(2*f)-l(n)-u(t-e,2)/(2*n*n)},t.bivarnorm=function(t,e,n,r){e=u(t[0]-e[0],2)/u(n[0],2)+u(t[1]-e[1],2)/u(n[1],2)-2*r*(t[0]-e[0])*(t[1]-e[1])/(n[0]*n[1]);return-(l(2)+l(f)+l(n[0])+l(n[1])+.5*l(1-u(r,2)))-e/(2*(1-u(r,2)))},t.laplace=function(t,e,n){return-o(t-e)/n-l(2*n)},t.dexp=t.laplace,t.gamma=function(t,e,n){n=1/n;return t<0?-1/0:0===t&&1===e?-l(n):(e-1)*l(t)-t/n-s(e)-e*l(n)},t.invgamma=function(t,e,n){return t<=0?-1/0:-(e+1)*l(t)-n/t-s(e)+e*l(n)},t.lnorm=function(t,e,n){return t<=0?-1/0:-l(t)-.5*l(2*f)-l(n)-u(l(t)-e,2)/(2*n*n)},t.pareto=function(t,e,n){return t<e?-1/0:l(n)+n*l(e)-(n+1)*l(t)},t.t=function(t,e,n,r){return s(((r=1e100<r?1e100:r)+1)/2)-s(r/2)-l(c(f*r)*n)+l(u(1+1/r*u((t-e)/n,2),-(r+1)/2))},t.weibull=function(t,e,n){if(t<0)return-1/0;if(0===t&&e<1)return 1/0;var r=u(t/n,e-1);return-(r*(t/n))+l(e*r/n)},t.logis=function(t,e,n){t=o((t-e)/n);e=1+a(-t);return-(t+l(n*e*e))},t.dirichlet=function(t,e){for(var n=0,r=0,i=0,a=e.length,o=0;o<a;o++)n+=e[o],r+=s(e[o]),i+=(e[o]-1)*l(t[o]);return s(n)-r+i},t.exp=function(t,e){return t<0?-1/0:l(e)-e*t},t.unif=function(t,e,n){return t<e||n<t?-1/0:l(1/(n-e))},t.bern=function(t,e){return 0!==t&&1!==t?-1/0:l(t*e+(1-t)*(1-e))},t.cat=function(t,e){return t<1||t>e.length?-1/0:l(e[t-1])},t.binom=function(t,e,n){return e<t||t<0?-1/0:0===n||1===n?e*n===t?0:-1/0:i(e,t)+t*l(n)+(e-t)*l(1-n)};return t.nbinom=function(t,e,n){return t<0?-1/0:i(t+e-1,e-1)+t*l(1-n)+e*l(n)},t.hyper=function(t,e,n,r){return t<0||r<t?-1/0:i(e,t)+i(n,r-t)-i(e+n,r)},t.pois=function(t,e){return t<0?-1/0:l(e)*t-e-n(t)},t},"object"===(void 0===e?"undefined":r(e))&&e.exports?e.exports=i():(void 0).ld=i()},{}],8:[function(t,e,n){"use strict";function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){function n(t,e){for(var n,r,i,a;n=Math.random(),r=1.7156*(Math.random()-.5),a=(a=n-.449871)*a+(i=Math.abs(r)+.386595)*(.196*i-.25472*a),.27597<a&&(.27846<a||r*r>-4*Math.log(n)*n*n););return r/n*e+t}function y(t){if(!t||"object"!=E(t)||"[object Function]"===Object.prototype.toString.call(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var e,n,r;if(t instanceof Array)for(e=[],n=0,r=t.length;n<r;++n)n in t&&e.push(y(t[n]));else e=t.constructor?new t.constructor:{};return function(t,e,n){var r,i,a={};for(r in e)i=e[r],r in t&&(t[r]===i||r in a&&a[r]===i)||(t[r]=n?n(i):i);return t}(e,t,y)}function o(t){if(Array.isArray(t)){if(Array.isArray(t[0])){for(var e=[],n=0,r=t.length;n<r;n++)e.push(o(t[n]));return e}return t.slice(0)}return t}function s(t,e){var n,r=new Array(t[0]);if(1==t.length)if("function"==typeof e)for(n=0;n<t[0];n++)r[n]=e();else for(n=0;n<t[0];n++)r[n]=e;else{if(!(1<t.length))throw"create_array can't create a dimensionless array";for(n=0;n<t[0];n++)r[n]=s(t.slice(1),e)}return r}function i(t){return Array.isArray(t[0])?[t.length].concat(i(t[0])):[t.length]}function u(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(Array.isArray(t[n])&&Array.isArray(e[n])){if(!u(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function l(t,e){if(Array.isArray(t)){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=l(t[r],e);return n}return e(t)}function c(t){for(var e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}function t(t,e){if(Array.isArray(t)){for(var n=t.length,r=[],i=0;i<n;i++)r[i]=i;c(r);var a=[];for(i=0;i<n;i++){var o=r[i];a[o]=l(t[o],e)}return a}return e(t)}function f(t,e,n){return(e=e||{}).hasOwnProperty(t)&&void 0!==e[t]&&null!==e[t]?e[t]:n}function a(t,e,n,r){if(r=f(t,e,r),Array.isArray(r)||(r=s(n,r)),!u(i(r),n))throw"The option "+t+" is of dimension ["+i(r)+"] but should be ["+n+"].";return r}function h(t,e,n){if(n<e)throw"Can not initialize parameter where lower bound > upper bound";if("real"===t){if(e===-1/0&&n===1/0)return.5;if(e===-1/0)return n-.5;if(n===1/0)return e+.5;if(e<=n)return(e+n)/2}else if("int"===t){if(e===-1/0&&n===1/0)return 1;if(e===-1/0)return n-1;if(n===1/0)return e+1;if(e<=n)return Math.round((e+n)/2)}else if("binary"===t)return 1;throw"Could not initialize parameter of type "+t+"["+e+", "+n+"]"}function d(t,e){var n,r,i,a=y(t);for(n in a)a.hasOwnProperty(n)&&((r=a[n]).hasOwnProperty("type")||(r.type="real"),r.hasOwnProperty("dim")||(r.dim=[1]),("number"==typeof(i=r.dim)||"object"==E(i)&&i.constructor===Number)&&(r.dim=[r.dim]),"binary"==r.type&&(r.upper=1,r.lower=0),r.hasOwnProperty("upper")||(r.upper=1/0),r.hasOwnProperty("lower")||(r.lower=-1/0),r.hasOwnProperty("init")?u(r.dim,[1])&&"function"==typeof r.init?r.init=r.init():u(r.dim,[1])||Array.isArray(r.init)||(r.init=s(r.dim,r.init)):u(r.dim,[1])?r.init=e(r.type,r.lower,r.upper):r.init=s(r.dim,function(){return e(r.type,r.lower,r.upper)}));return a}function m(t,e,n){this.params=t,this.state=e,this.log_post=n}m.prototype.step=function(){throw"Every Stepper need to implement step()"},m.prototype.start_adaptation=function(){},m.prototype.stop_adaptation=function(){},m.prototype.info=function(){return{}};function p(t,e,n,r,i){if(m.call(this,t,e,n),1!=(n=Object.keys(this.params)).length)throw"OnedimMetropolisStepper can only handle one parameter.";if(this.param_name=n[0],n=this.params[this.param_name],!u(n.dim,[1]))throw"OnedimMetropolisStepper can only handle one one-dimensional parameter.";this.lower=n.lower,this.upper=n.upper,this.prop_log_scale=f("prop_log_scale",r,0),this.batch_size=f("batch_size",r,50),this.max_adaptation=f("max_adaptation",r,.33),this.initial_adaptation=f("initial_adaptation",r,1),this.target_accept_rate=f("target_accept_rate",r,.44),this.is_adapting=f("is_adapting",r,!0),this.generate_proposal=i,this.acceptance_count=0,this.batch_count=0,this.iterations_since_adaption=0}((p.prototype=Object.create(m.prototype)).constructor=p).prototype.step=function(){var t,e=this.state[this.param_name],n=this.generate_proposal(e,this.prop_log_scale);return n<this.lower||n>this.upper||(t=this.log_post(),this.state[this.param_name]=n,n=this.log_post(),Math.exp(n-t)>Math.random()?this.is_adapting&&this.acceptance_count++:this.state[this.param_name]=e),this.is_adapting&&(this.iterations_since_adaption++,this.iterations_since_adaption>=this.batch_size&&(this.batch_count++,e=Math.min(this.max_adaptation,this.initial_adaptation/Math.sqrt(this.batch_count)),this.acceptance_count/this.batch_size>this.target_accept_rate?this.prop_log_scale+=e:this.prop_log_scale-=e,this.acceptance_count=0,this.iterations_since_adaption=0)),this.state[this.param_name]},p.prototype.start_adaptation=function(){this.is_adapting=!0},p.prototype.stop_adaptation=function(){this.is_adapting=!1},p.prototype.info=function(){return{prop_log_scale:this.prop_log_scale,is_adapting:this.is_adapting,acceptance_count:this.acceptance_count,iterations_since_adaption:this.iterations_since_adaption,batch_count:this.batch_count}};function g(t,e){return n(t,Math.exp(e))}function v(t,e,n,r){p.call(this,t,e,n,r,g)}(v.prototype=Object.create(p.prototype)).constructor=v;function b(t,e){return Math.round(n(t,Math.exp(e)))}function x(t,e,n,r){p.call(this,t,e,n,r,b)}(x.prototype=Object.create(p.prototype)).constructor=x;function _(t,e,n,r,p){if(m.call(this,t,e,n),1!=(n=Object.keys(this.params)).length)throw"MultidimComponentMetropolisStepper can't handle more than one parameter.";this.param_name=n[0];var g=this.params[this.param_name];this.lower=g.lower,this.upper=g.upper,this.dim=g.dim,this.prop_log_scale=a("prop_log_scale",r,this.dim,0),this.batch_size=a("batch_size",r,this.dim,50),this.max_adaptation=a("max_adaptation",r,this.dim,.33),this.initial_adaptation=a("initial_adaptation",r,this.dim,1),this.target_accept_rate=a("target_accept_rate",r,this.dim,.44),this.is_adapting=a("is_adapting",r,this.dim,!0),r=function t(e,n,r,i,a,o,s,l,u){var c=[];if(1===e.length)for(var f=0;f<e[0];f++){var h={prop_log_scale:i[f],batch_size:a[f],max_adaptation:o[f],initial_adaptation:s[f],target_accept_rate:l[f],is_adapting:u[f]},d={};d[f]=y(g),d[f].dim=[1],delete d[f].init,c[f]=new p(d,n,r,h)}else for(f=0;f<e[0];f++)c[f]=t(e.slice(1),n[f],r,i[f],a[f],o[f],s[f],l[f],u[f]);return c},this.substeppers=r(this.dim,this.state[this.param_name],this.log_post,this.prop_log_scale,this.batch_size,this.max_adaptation,this.initial_adaptation,this.target_accept_rate,this.is_adapting)}((_.prototype=Object.create(m.prototype)).constructor=_).prototype.step=function(){return t(this.substeppers,function(t){return t.step()})},_.prototype.start_adaptation=function(){l(this.substeppers,function(t){t.start_adaptation()})},_.prototype.stop_adaptation=function(){l(this.substeppers,function(t){t.stop_adaptation()})},_.prototype.info=function(){return l(this.substeppers,function(t){return t.info()})};function w(t,e,n,r){_.call(this,t,e,n,r,v)}(w.prototype=Object.create(_.prototype)).constructor=w;function k(t,e,n,r){_.call(this,t,e,n,r,x)}(k.prototype=Object.create(_.prototype)).constructor=k;function M(t,e,n){if(m.call(this,t,e,n),1!=(n=Object.keys(this.params)).length)throw"BinaryStepper can't handle more than one parameter.";this.param_name=n[0]}((M.prototype=Object.create(m.prototype)).constructor=M).prototype.step=function(){this.state[this.param_name]=0;var t=this.log_post();this.state[this.param_name]=1;var e=this.log_post(),n=Math.max(t,e);t-=n,e-=n;e=Math.exp(t-Math.log(Math.exp(t)+Math.exp(e)));return Math.random()<e?this.state[this.param_name]=0:1};function T(t,e,n){if(m.call(this,t,e,n),1!=(n=Object.keys(this.params)).length)throw"BinaryComponentStepper can't handle more than one parameter.";this.param_name=n[0];var s=this.params[this.param_name];this.dim=s.dim,n=function t(e,n,r){var i,a=[];if(1===e.length)for(i=0;i<e[0];i++){var o={};o[i]=s,a[i]=new M(o,n,r)}else for(i=0;i<e[0];i++)a[i]=t(e.slice(1),n[i],r);return a},this.substeppers=n(this.dim,this.state[this.param_name],this.log_post)}((T.prototype=Object.create(m.prototype)).constructor=T).prototype.step=function(){return t(this.substeppers,function(t){return t.step()})};function A(t,e,n,r){m.call(this,t,e,n),this.param_names=Object.keys(this.params),this.substeppers=[];for(var i=0;i<this.param_names.length;i++){var a,o=t[this.param_names[i]];switch(o.type){case"real":a=u(o.dim,[1])?v:w;break;case"int":a=u(o.dim,[1])?x:k;break;case"binary":a=u(o.dim,[1])?M:T;break;default:throw"AmwgStepper can't handle parameter "+this.param_names[i]+" with type "+o.type}var s={};s[this.param_names[i]]=o;var l=(r=r||{}).params&&r.params[this.param_names[i]]||{};l.prop_log_scale=l.prop_log_scale||r.prop_log_scale,l.batch_size=l.batch_size||r.batch_size,l.max_adaptation=l.max_adaptation||r.max_adaptation,l.initial_adaptation=l.initial_adaptation||r.initial_adaptation,l.target_accept_rate=l.target_accept_rate||r.target_accept_rate,l.is_adapting=l.is_adapting||r.is_adapting,this.substeppers[i]=new a(s,e,n,l)}}((A.prototype=Object.create(m.prototype)).constructor=A).prototype.step=function(){c(this.substeppers);for(var t=0;t<this.substeppers.length;t++)this.substeppers[t].step();return this.state},A.prototype.start_adaptation=function(){for(var t=0;t<this.substeppers.length;t++)this.substeppers[t].start_adaptation()},A.prototype.stop_adaptation=function(){for(var t=0;t<this.substeppers.length;t++)this.substeppers[t].stop_adaptation()},A.prototype.info=function(){for(var t={},e=0;e<this.substeppers.length;e++)t[this.param_names[e]]=this.substeppers[e].info();return t};function S(t,e,n,r){this.params=t,this.data=n,this.param_names=Object.keys(this.params),this.param_init_fun=f("param_init_fun",r,h);var i=f("thin",r,1),t=f("monitor",r,null);this.thin(i),this.monitor(t),this.options=r,this.params=d(this.params,this.param_init_fun);for(var a={},o=0;o<this.param_names.length;o++)a[this.param_names[o]]=this.params[this.param_names[o]].init;this.log_post=function(){return e(a,n)},this.log_post(),this.state=a,this.steppers=this.create_stepper_ensamble(this.params,this.state,this.log_post,this.options)}S.prototype.create_stepper_ensamble=function(t,e){throw"Every Sampler needs to implement create_stepper_ensamble()"},S.prototype.info=function(){return{state:this.state,thin:this.thin,monitor:this.monitor,steppers:this.steppers}},S.prototype.step=function(){c(this.steppers);for(var t=0;t<this.steppers.length;t++)this.steppers[t].step();return Object.keys(this.state).length>Object.keys(this.params).length&&this.log_post(),this.state},S.prototype.sample=function(t){for(var e,n=null===this.monitored_params?Object.keys(this.state):this.monitored_params,r={},i=0;i<n.length;i++)r[n[i]]=[];for(e=0;e<t;e++){if(e%this.thinning_interval==0)for(i=0;i<n.length;i++){var a=n[i];r[a].push(o(this.state[a]))}this.step()}return r},S.prototype.burn=function(t){for(var e=0;e<t;e++)this.step()},S.prototype.monitor=function(t){this.monitored_params=t},S.prototype.thin=function(t){this.thinning_interval=t},S.prototype.start_adaptation=function(){for(var t=0;t<this.steppers.length;t++)this.steppers[t].start_adaptation()},S.prototype.stop_adaptation=function(){for(var t=0;t<this.steppers.length;t++)this.steppers[t].stop_adaptation()};function e(t,e,n,r){S.call(this,t,e,n,r)}return((e.prototype=Object.create(S.prototype)).constructor=e).prototype.create_stepper_ensamble=function(t,e,n,r){return[new A(t,e,n,r)]},{runif:function(t,e){return Math.random()*(e-t)+t},runif_discrete:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},rnorm:n,param_init_fixed:h,complete_params:d,RealMetropolisStepper:v,IntMetropolisStepper:x,MultiRealComponentMetropolisStepper:w,MultiIntComponentMetropolisStepper:k,BinaryStepper:M,BinaryComponentStepper:T,AmwgStepper:A,AmwgSampler:e}},"object"===(void 0===e?"undefined":E(e))&&e.exports?e.exports=r():(void 0).mcmc=r()},{}],9:[function(t,e,n){"use strict";var r=t("./lib/rationalize");e.exports=function(t,e){return r(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}},{"./lib/rationalize":19}],10:[function(t,e,n){"use strict";e.exports=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}},{}],11:[function(t,e,n){"use strict";var r=t("./lib/rationalize");e.exports=function(t,e){return r(t[0].mul(e[1]),t[1].mul(e[0]))}},{"./lib/rationalize":19}],12:[function(t,e,n){"use strict";var o=t("./is-rat"),s=t("./lib/is-bn"),l=t("./lib/num-to-bn"),u=t("./lib/str-to-bn"),c=t("./lib/rationalize"),f=t("./div");e.exports=function t(e,n){if(o(e))return n?f(e,t(n)):[e[0].clone(),e[1].clone()];var r=0;var i,a;if(s(e))i=e.clone();else if("string"==typeof e)i=u(e);else{if(0===e)return[l(0),l(1)];if(e===Math.floor(e))i=l(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),r-=256;i=l(e)}}if(o(n))i.mul(n[1]),a=n[0].clone();else if(s(n))a=n.clone();else if("string"==typeof n)a=u(n);else if(n)if(n===Math.floor(n))a=l(n);else{for(;n!==Math.floor(n);)n*=Math.pow(2,256),r+=256;a=l(n)}else a=l(1);0<r?i=i.ushln(r):r<0&&(a=a.ushln(-r));return c(i,a)}},{"./div":11,"./is-rat":13,"./lib/is-bn":17,"./lib/num-to-bn":18,"./lib/rationalize":19,"./lib/str-to-bn":20}],13:[function(t,e,n){"use strict";var r=t("./lib/is-bn");e.exports=function(t){return Array.isArray(t)&&2===t.length&&r(t[0])&&r(t[1])}},{"./lib/is-bn":17}],14:[function(t,e,n){"use strict";var r=t("bn.js");e.exports=function(t){return t.cmp(new r(0))}},{"bn.js":27}],15:[function(t,e,n){"use strict";var o=t("./bn-sign");e.exports=function(t){var e=t.length,n=t.words,r=0;if(1===e)r=n[0];else if(2===e)r=n[0]+67108864*n[1];else for(var i=0;i<e;i++){var a=n[i];r+=a*Math.pow(67108864,i)}return o(t)*r}},{"./bn-sign":14}],16:[function(t,e,n){"use strict";var r=t("double-bits"),i=t("bit-twiddle").countTrailingZeros;e.exports=function(t){var e=i(r.lo(t));if(e<32)return e;t=i(r.hi(t));if(20<t)return 52;return t+32}},{"bit-twiddle":26,"double-bits":92}],17:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("bn.js");e.exports=function(t){return t&&"object"===r(t)&&Boolean(t.words)}},{"bn.js":27}],18:[function(t,e,n){"use strict";var r=t("bn.js"),i=t("double-bits");e.exports=function(t){var e=i.exponent(t);return e<52?new r(t):new r(t*Math.pow(2,52-e)).ushln(e-52)}},{"bn.js":27,"double-bits":92}],19:[function(t,e,n){"use strict";var i=t("./num-to-bn"),a=t("./bn-sign");e.exports=function(t,e){var n=a(t),r=a(e);if(0===n)return[i(0),i(1)];if(0===r)return[i(0),i(0)];r<0&&(t=t.neg(),e=e.neg());r=t.gcd(e);if(r.cmpn(1))return[t.div(r),e.div(r)];return[t,e]}},{"./bn-sign":14,"./num-to-bn":18}],20:[function(t,e,n){"use strict";var r=t("bn.js");e.exports=function(t){return new r(t)}},{"bn.js":27}],21:[function(t,e,n){"use strict";var r=t("./lib/rationalize");e.exports=function(t,e){return r(t[0].mul(e[0]),t[1].mul(e[1]))}},{"./lib/rationalize":19}],22:[function(t,e,n){"use strict";var r=t("./lib/bn-sign");e.exports=function(t){return r(t[0])*r(t[1])}},{"./lib/bn-sign":14}],23:[function(t,e,n){"use strict";var r=t("./lib/rationalize");e.exports=function(t,e){return r(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}},{"./lib/rationalize":19}],24:[function(t,e,n){"use strict";var o=t("./lib/bn-to-num"),s=t("./lib/ctz");e.exports=function(t){var e=t[0],n=t[1];if(0===e.cmpn(0))return 0;var r=e.abs().divmod(n.abs()),t=r.div,t=o(t),r=r.mod,e=e.negative!==n.negative?-1:1;if(0===r.cmpn(0))return e*t;{if(t){var i=s(t)+4,a=o(r.ushln(i).divRound(n));return e*(t+a*Math.pow(2,-i))}i=n.bitLength()-r.bitLength()+53,a=o(r.ushln(i).divRound(n));return i<1023?e*a*Math.pow(2,-i):(a*=Math.pow(2,-1023),e*a*Math.pow(2,1023-i))}}},{"./lib/bn-to-num":15,"./lib/ctz":16}],25:[function(t,e,n){"use strict";function i(t,e,n,r,i){r=["function ",t,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?e.indexOf("c")<0?r.push(";if(x===y){return m}else if(x<=y){"):r.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):r.push(";if(",e,"){i=m;"),n?r.push("l=m+1}else{h=m-1}"):r.push("h=m-1}else{l=m+1}"),r.push("}"),i?r.push("return -1};"):r.push("return i};"),r.join("")}function r(t,e,n,r){return new Function([i("A","x"+t+"y",e,["y"],r),i("P","c(x,y)"+t+"0",e,["y","c"],r),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""))()}e.exports={ge:r(">=",!1,"GE"),gt:r(">",!1,"GT"),lt:r("<",!0,"LT"),le:r("<=",!0,"LE"),eq:r("-",!0,"EQ",!0)}},{}],26:[function(t,e,n){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&--e,e}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(t){return(0<t)-(t<0)},n.abs=function(t){var e=t>>31;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(t<e)},n.max=function(t,e){return t^(t^e)&-(t<e)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n=(65535<t)<<4;return n|=e=(255<(t>>>=n))<<3,n|=e=(15<(t>>>=e))<<2,(n|=e=(3<(t>>>=e))<<1)|(t>>>=e)>>1},n.log10=function(t){return 1e9<=t?9:1e8<=t?8:1e7<=t?7:1e6<=t?6:1e5<=t?5:1e4<=t?4:1e3<=t?3:100<=t?2:10<=t?1:0},n.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},n.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},n.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(i),n.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},n.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},n.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},n.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},n.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},n.nextCombination=function(t){var e=t|t-1;return 1+e|(~e&-~e)-1>>>r(t)+1}},{}],27:[function(w,t,e){"use strict";function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){function g(t,e){if(!t)throw new Error(e||"Assertion failed")}function e(t,e){t.super_=e;function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function y(t,e,n){if(y.isBN(t))return t;this.negative=0,this.words=null,this.length=0,(this.red=null)!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var n;"object"===k(t)?t.exports=y:(void 0).BN=y,(y.BN=y).wordSize=26;try{n=w("buffer").Buffer}catch(t){}function o(t,e,n){for(var r=0,i=Math.min(t.length,n),a=e;a<i;a++){var o=t.charCodeAt(a)-48;r<<=4,r|=49<=o&&o<=54?o-49+10:17<=o&&o<=22?o-17+10:15&o}return r}function f(t,e,n,r){for(var i=0,a=Math.min(t.length,n),o=e;o<a;o++){var s=t.charCodeAt(o)-48;i*=r,i+=49<=s?s-49+10:17<=s?s-17+10:s}return i}y.isBN=function(t){return t instanceof y||null!==t&&"object"===k(t)&&t.constructor.wordSize===y.wordSize&&Array.isArray(t.words)},y.max=function(t,e){return 0<t.cmp(e)?t:e},y.min=function(t,e){return t.cmp(e)<0?t:e},y.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"===k(t))return this._initArray(t,e,n);"hex"===e&&(e=16),g(e===(0|e)&&2<=e&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},y.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(g(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},y.prototype._initArray=function(t,e,n){if(g("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r,i,a=0;a<this.length;a++)this.words[a]=0;var o=0;if("be"===n)for(a=t.length-1,r=0;0<=a;a-=3)i=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[r]|=i<<o&67108863,this.words[r+1]=i>>>26-o&67108863,26<=(o+=24)&&(o-=26,r++);else if("le"===n)for(r=a=0;a<t.length;a+=3)i=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[r]|=i<<o&67108863,this.words[r+1]=i>>>26-o&67108863,26<=(o+=24)&&(o-=26,r++);return this.strip()},y.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n,r=0;r<this.length;r++)this.words[r]=0;for(var i=0,r=t.length-6,a=0;e<=r;r-=6)n=o(t,r,r+6),this.words[a]|=n<<i&67108863,this.words[a+1]|=n>>>26-i&4194303,26<=(i+=24)&&(i-=26,a++);r+6!==e&&(n=o(t,e,r+6),this.words[a]|=n<<i&67108863,this.words[a+1]|=n>>>26-i&4194303),this.strip()},y.prototype._parseBase=function(t,e,n){this.words=[0];for(var r=0,i=this.length=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var a=t.length-n,o=a%r,s=Math.min(a,a-o)+n,l=0,u=n;u<s;u+=r)l=f(t,u,u+r,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!=o){for(var c=1,l=f(t,u,t.length,e),u=0;u<o;u++)c*=e;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},y.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},y.prototype.clone=function(){var t=new y(null);return this.copy(t),t},y.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},y.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},y.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},y.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function r(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0,r=(n.length=r)-1|0,i=67108863&(f=(0|t.words[0])*(0|e.words[0])),a=f/67108864|0;n.words[0]=i;for(var o=1;o<r;o++){for(var s=a>>>26,l=67108863&a,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var f,h=o-c|0;s+=(f=(0|t.words[h])*(0|e.words[c])+l)/67108864|0,l=67108863&f}n.words[o]=0|l,a=0|s}return 0!==a?n.words[o]=0|a:n.length--,n.strip()}y.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){s="";for(var n=0,r=0,i=0;i<this.length;i++){var a=this.words[i],o=(16777215&(a<<n|r)).toString(16),s=0!==(r=a>>>24-n&16777215)||i!==this.length-1?h[6-o.length]+o+s:o+s;26<=(n+=2)&&(n-=26,i--)}for(0!==r&&(s=r.toString(16)+s);s.length%e!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}if(t===(0|t)&&2<=t&&t<=36){var l=d[t],u=p[t];for(s="",(c=this.clone()).negative=0;!c.isZero();){var c,f=c.modn(u).toString(t);s=(c=c.idivn(u)).isZero()?f+s:h[l-f.length]+f+s}for(this.isZero()&&(s="0"+s);s.length%e!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}g(!1,"Base should be between 2 and 36")},y.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&g(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},y.prototype.toJSON=function(){return this.toString(16)},y.prototype.toBuffer=function(t,e){return g(void 0!==n),this.toArrayLike(n,t,e)},y.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},y.prototype.toArrayLike=function(t,e,n){var r=this.byteLength(),i=n||Math.max(1,r);g(r<=i,"byte array longer than desired length"),g(0<i,"Requested array length <= 0"),this.strip();var a,o,e="le"===e,s=new t(i),l=this.clone();if(e){for(o=0;!l.isZero();o++)a=l.andln(255),l.iushrn(8),s[o]=a;for(;o<i;o++)s[o]=0}else{for(o=0;o<i-r;o++)s[o]=0;for(o=0;!l.isZero();o++)a=l.andln(255),l.iushrn(8),s[i-o-1]=a}return s},Math.clz32?y.prototype._countBits=function(t){return 32-Math.clz32(t)}:y.prototype._countBits=function(t){var e=t,t=0;return 4096<=e&&(t+=13,e>>>=13),64<=e&&(t+=7,e>>>=7),8<=e&&(t+=4,e>>>=4),2<=e&&(t+=2,e>>>=2),t+e},y.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,t=0;return 0==(8191&e)&&(t+=13,e>>>=13),0==(127&e)&&(t+=7,e>>>=7),0==(15&e)&&(t+=4,e>>>=4),0==(3&e)&&(t+=2,e>>>=2),0==(1&e)&&t++,t},y.prototype.bitLength=function(){var t=this.words[this.length-1],t=this._countBits(t);return 26*(this.length-1)+t},y.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},y.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},y.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},y.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},y.prototype.isNeg=function(){return 0!==this.negative},y.prototype.neg=function(){return this.clone().ineg()},y.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},y.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},y.prototype.ior=function(t){return g(0==(this.negative|t.negative)),this.iuor(t)},y.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},y.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},y.prototype.iuand=function(t){for(var e=this.length>t.length?t:this,n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},y.prototype.iand=function(t){return g(0==(this.negative|t.negative)),this.iuand(t)},y.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},y.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},y.prototype.iuxor=function(t){for(var e,n=this.length>t.length?(e=this,t):(e=t,this),r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},y.prototype.ixor=function(t){return g(0==(this.negative|t.negative)),this.iuxor(t)},y.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},y.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},y.prototype.inotn=function(t){g("number"==typeof t&&0<=t);var e=0|Math.ceil(t/26),t=t%26;this._expand(e),0<t&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return 0<t&&(this.words[n]=~this.words[n]&67108863>>26-t),this.strip()},y.prototype.notn=function(t){return this.clone().inotn(t)},y.prototype.setn=function(t,e){g("number"==typeof t&&0<=t);var n=t/26|0,t=t%26;return this._expand(1+n),this.words[n]=e?this.words[n]|1<<t:this.words[n]&~(1<<t),this.strip()},y.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();r=this.length>t.length?(n=this,t):(n=t,this);for(var i=0,a=0;a<r.length;a++)e=(0|n.words[a])+(0|r.words[a])+i,this.words[a]=67108863&e,i=e>>>26;for(;0!==i&&a<n.length;a++)e=(0|n.words[a])+i,this.words[a]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this},y.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},y.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;r=0<i?(n=this,t):(n=t,this);for(var a=0,o=0;o<r.length;o++)a=(e=(0|n.words[o])-(0|r.words[o])+a)>>26,this.words[o]=67108863&e;for(;0!==a&&o<n.length;o++)a=(e=(0|n.words[o])+a)>>26,this.words[o]=67108863&e;if(0===a&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},y.prototype.sub=function(t){return this.clone().isub(t)};var i=function(t,e,n){var r=t.words,i=e.words,a=n.words,o=0|r[0],s=8191&o,l=o>>>13,u=0|r[1],c=8191&u,f=u>>>13,h=0|r[2],d=8191&h,p=h>>>13,g=0|r[3],y=8191&g,m=g>>>13,v=0|r[4],b=8191&v,x=v>>>13,_=0|r[5],w=8191&_,k=_>>>13,M=0|r[6],T=8191&M,A=M>>>13,S=0|r[7],E=8191&S,O=S>>>13,C=0|r[8],P=8191&C,L=C>>>13,R=0|r[9],j=8191&R,N=R>>>13,D=0|i[0],z=8191&D,I=D>>>13,F=0|i[1],B=8191&F,U=F>>>13,V=0|i[2],H=8191&V,q=V>>>13,G=0|i[3],Y=8191&G,X=G>>>13,W=0|i[4],Z=8191&W,K=W>>>13,Q=0|i[5],$=8191&Q,J=Q>>>13,o=0|i[6],u=8191&o,h=o>>>13,g=0|i[7],v=8191&g,_=g>>>13,M=0|i[8],S=8191&M,C=M>>>13,r=0|i[9],R=8191&r,D=r>>>13;n.negative=t.negative^e.negative,n.length=19;var G=(0+Math.imul(s,z)|0)+((8191&(V=Math.imul(s,I)+Math.imul(l,z)|0))<<13)|0,tt=(Math.imul(l,I)+(V>>>13)|0)+(G>>>26)|0;G&=67108863,F=Math.imul(c,z),V=Math.imul(c,I)+Math.imul(f,z)|0,W=Math.imul(f,I);Q=(tt+(F+Math.imul(s,B)|0)|0)+((8191&(V=(V+Math.imul(s,U)|0)+Math.imul(l,B)|0))<<13)|0;tt=((W+Math.imul(l,U)|0)+(V>>>13)|0)+(Q>>>26)|0,Q&=67108863,F=Math.imul(d,z),V=Math.imul(d,I)+Math.imul(p,z)|0,W=Math.imul(p,I),F=F+Math.imul(c,B)|0,V=(V+Math.imul(c,U)|0)+Math.imul(f,B)|0,W=W+Math.imul(f,U)|0;o=(tt+(F+Math.imul(s,H)|0)|0)+((8191&(V=(V+Math.imul(s,q)|0)+Math.imul(l,H)|0))<<13)|0;tt=((W+Math.imul(l,q)|0)+(V>>>13)|0)+(o>>>26)|0,o&=67108863,F=Math.imul(y,z),V=Math.imul(y,I)+Math.imul(m,z)|0,W=Math.imul(m,I),F=F+Math.imul(d,B)|0,V=(V+Math.imul(d,U)|0)+Math.imul(p,B)|0,W=W+Math.imul(p,U)|0,F=F+Math.imul(c,H)|0,V=(V+Math.imul(c,q)|0)+Math.imul(f,H)|0,W=W+Math.imul(f,q)|0;g=(tt+(F+Math.imul(s,Y)|0)|0)+((8191&(V=(V+Math.imul(s,X)|0)+Math.imul(l,Y)|0))<<13)|0;tt=((W+Math.imul(l,X)|0)+(V>>>13)|0)+(g>>>26)|0,g&=67108863,F=Math.imul(b,z),V=Math.imul(b,I)+Math.imul(x,z)|0,W=Math.imul(x,I),F=F+Math.imul(y,B)|0,V=(V+Math.imul(y,U)|0)+Math.imul(m,B)|0,W=W+Math.imul(m,U)|0,F=F+Math.imul(d,H)|0,V=(V+Math.imul(d,q)|0)+Math.imul(p,H)|0,W=W+Math.imul(p,q)|0,F=F+Math.imul(c,Y)|0,V=(V+Math.imul(c,X)|0)+Math.imul(f,Y)|0,W=W+Math.imul(f,X)|0;M=(tt+(F+Math.imul(s,Z)|0)|0)+((8191&(V=(V+Math.imul(s,K)|0)+Math.imul(l,Z)|0))<<13)|0;tt=((W+Math.imul(l,K)|0)+(V>>>13)|0)+(M>>>26)|0,M&=67108863,F=Math.imul(w,z),V=Math.imul(w,I)+Math.imul(k,z)|0,W=Math.imul(k,I),F=F+Math.imul(b,B)|0,V=(V+Math.imul(b,U)|0)+Math.imul(x,B)|0,W=W+Math.imul(x,U)|0,F=F+Math.imul(y,H)|0,V=(V+Math.imul(y,q)|0)+Math.imul(m,H)|0,W=W+Math.imul(m,q)|0,F=F+Math.imul(d,Y)|0,V=(V+Math.imul(d,X)|0)+Math.imul(p,Y)|0,W=W+Math.imul(p,X)|0,F=F+Math.imul(c,Z)|0,V=(V+Math.imul(c,K)|0)+Math.imul(f,Z)|0,W=W+Math.imul(f,K)|0;i=(tt+(F+Math.imul(s,$)|0)|0)+((8191&(V=(V+Math.imul(s,J)|0)+Math.imul(l,$)|0))<<13)|0;tt=((W+Math.imul(l,J)|0)+(V>>>13)|0)+(i>>>26)|0,i&=67108863,F=Math.imul(T,z),V=Math.imul(T,I)+Math.imul(A,z)|0,W=Math.imul(A,I),F=F+Math.imul(w,B)|0,V=(V+Math.imul(w,U)|0)+Math.imul(k,B)|0,W=W+Math.imul(k,U)|0,F=F+Math.imul(b,H)|0,V=(V+Math.imul(b,q)|0)+Math.imul(x,H)|0,W=W+Math.imul(x,q)|0,F=F+Math.imul(y,Y)|0,V=(V+Math.imul(y,X)|0)+Math.imul(m,Y)|0,W=W+Math.imul(m,X)|0,F=F+Math.imul(d,Z)|0,V=(V+Math.imul(d,K)|0)+Math.imul(p,Z)|0,W=W+Math.imul(p,K)|0,F=F+Math.imul(c,$)|0,V=(V+Math.imul(c,J)|0)+Math.imul(f,$)|0,W=W+Math.imul(f,J)|0;r=(tt+(F+Math.imul(s,u)|0)|0)+((8191&(V=(V+Math.imul(s,h)|0)+Math.imul(l,u)|0))<<13)|0;tt=((W+Math.imul(l,h)|0)+(V>>>13)|0)+(r>>>26)|0,r&=67108863,F=Math.imul(E,z),V=Math.imul(E,I)+Math.imul(O,z)|0,W=Math.imul(O,I),F=F+Math.imul(T,B)|0,V=(V+Math.imul(T,U)|0)+Math.imul(A,B)|0,W=W+Math.imul(A,U)|0,F=F+Math.imul(w,H)|0,V=(V+Math.imul(w,q)|0)+Math.imul(k,H)|0,W=W+Math.imul(k,q)|0,F=F+Math.imul(b,Y)|0,V=(V+Math.imul(b,X)|0)+Math.imul(x,Y)|0,W=W+Math.imul(x,X)|0,F=F+Math.imul(y,Z)|0,V=(V+Math.imul(y,K)|0)+Math.imul(m,Z)|0,W=W+Math.imul(m,K)|0,F=F+Math.imul(d,$)|0,V=(V+Math.imul(d,J)|0)+Math.imul(p,$)|0,W=W+Math.imul(p,J)|0,F=F+Math.imul(c,u)|0,V=(V+Math.imul(c,h)|0)+Math.imul(f,u)|0,W=W+Math.imul(f,h)|0;t=(tt+(F+Math.imul(s,v)|0)|0)+((8191&(V=(V+Math.imul(s,_)|0)+Math.imul(l,v)|0))<<13)|0;tt=((W+Math.imul(l,_)|0)+(V>>>13)|0)+(t>>>26)|0,t&=67108863,F=Math.imul(P,z),V=Math.imul(P,I)+Math.imul(L,z)|0,W=Math.imul(L,I),F=F+Math.imul(E,B)|0,V=(V+Math.imul(E,U)|0)+Math.imul(O,B)|0,W=W+Math.imul(O,U)|0,F=F+Math.imul(T,H)|0,V=(V+Math.imul(T,q)|0)+Math.imul(A,H)|0,W=W+Math.imul(A,q)|0,F=F+Math.imul(w,Y)|0,V=(V+Math.imul(w,X)|0)+Math.imul(k,Y)|0,W=W+Math.imul(k,X)|0,F=F+Math.imul(b,Z)|0,V=(V+Math.imul(b,K)|0)+Math.imul(x,Z)|0,W=W+Math.imul(x,K)|0,F=F+Math.imul(y,$)|0,V=(V+Math.imul(y,J)|0)+Math.imul(m,$)|0,W=W+Math.imul(m,J)|0,F=F+Math.imul(d,u)|0,V=(V+Math.imul(d,h)|0)+Math.imul(p,u)|0,W=W+Math.imul(p,h)|0,F=F+Math.imul(c,v)|0,V=(V+Math.imul(c,_)|0)+Math.imul(f,v)|0,W=W+Math.imul(f,_)|0;e=(tt+(F+Math.imul(s,S)|0)|0)+((8191&(V=(V+Math.imul(s,C)|0)+Math.imul(l,S)|0))<<13)|0;tt=((W+Math.imul(l,C)|0)+(V>>>13)|0)+(e>>>26)|0,e&=67108863,F=Math.imul(j,z),V=Math.imul(j,I)+Math.imul(N,z)|0,W=Math.imul(N,I),F=F+Math.imul(P,B)|0,V=(V+Math.imul(P,U)|0)+Math.imul(L,B)|0,W=W+Math.imul(L,U)|0,F=F+Math.imul(E,H)|0,V=(V+Math.imul(E,q)|0)+Math.imul(O,H)|0,W=W+Math.imul(O,q)|0,F=F+Math.imul(T,Y)|0,V=(V+Math.imul(T,X)|0)+Math.imul(A,Y)|0,W=W+Math.imul(A,X)|0,F=F+Math.imul(w,Z)|0,V=(V+Math.imul(w,K)|0)+Math.imul(k,Z)|0,W=W+Math.imul(k,K)|0,F=F+Math.imul(b,$)|0,V=(V+Math.imul(b,J)|0)+Math.imul(x,$)|0,W=W+Math.imul(x,J)|0,F=F+Math.imul(y,u)|0,V=(V+Math.imul(y,h)|0)+Math.imul(m,u)|0,W=W+Math.imul(m,h)|0,F=F+Math.imul(d,v)|0,V=(V+Math.imul(d,_)|0)+Math.imul(p,v)|0,W=W+Math.imul(p,_)|0,F=F+Math.imul(c,S)|0,V=(V+Math.imul(c,C)|0)+Math.imul(f,S)|0,W=W+Math.imul(f,C)|0;s=(tt+(F+Math.imul(s,R)|0)|0)+((8191&(V=(V+Math.imul(s,D)|0)+Math.imul(l,R)|0))<<13)|0;tt=((W+Math.imul(l,D)|0)+(V>>>13)|0)+(s>>>26)|0,s&=67108863,F=Math.imul(j,B),V=Math.imul(j,U)+Math.imul(N,B)|0,W=Math.imul(N,U),F=F+Math.imul(P,H)|0,V=(V+Math.imul(P,q)|0)+Math.imul(L,H)|0,W=W+Math.imul(L,q)|0,F=F+Math.imul(E,Y)|0,V=(V+Math.imul(E,X)|0)+Math.imul(O,Y)|0,W=W+Math.imul(O,X)|0,F=F+Math.imul(T,Z)|0,V=(V+Math.imul(T,K)|0)+Math.imul(A,Z)|0,W=W+Math.imul(A,K)|0,F=F+Math.imul(w,$)|0,V=(V+Math.imul(w,J)|0)+Math.imul(k,$)|0,W=W+Math.imul(k,J)|0,F=F+Math.imul(b,u)|0,V=(V+Math.imul(b,h)|0)+Math.imul(x,u)|0,W=W+Math.imul(x,h)|0,F=F+Math.imul(y,v)|0,V=(V+Math.imul(y,_)|0)+Math.imul(m,v)|0,W=W+Math.imul(m,_)|0,F=F+Math.imul(d,S)|0,V=(V+Math.imul(d,C)|0)+Math.imul(p,S)|0,W=W+Math.imul(p,C)|0;c=(tt+(F+Math.imul(c,R)|0)|0)+((8191&(V=(V+Math.imul(c,D)|0)+Math.imul(f,R)|0))<<13)|0;tt=((W+Math.imul(f,D)|0)+(V>>>13)|0)+(c>>>26)|0,c&=67108863,F=Math.imul(j,H),V=Math.imul(j,q)+Math.imul(N,H)|0,W=Math.imul(N,q),F=F+Math.imul(P,Y)|0,V=(V+Math.imul(P,X)|0)+Math.imul(L,Y)|0,W=W+Math.imul(L,X)|0,F=F+Math.imul(E,Z)|0,V=(V+Math.imul(E,K)|0)+Math.imul(O,Z)|0,W=W+Math.imul(O,K)|0,F=F+Math.imul(T,$)|0,V=(V+Math.imul(T,J)|0)+Math.imul(A,$)|0,W=W+Math.imul(A,J)|0,F=F+Math.imul(w,u)|0,V=(V+Math.imul(w,h)|0)+Math.imul(k,u)|0,W=W+Math.imul(k,h)|0,F=F+Math.imul(b,v)|0,V=(V+Math.imul(b,_)|0)+Math.imul(x,v)|0,W=W+Math.imul(x,_)|0,F=F+Math.imul(y,S)|0,V=(V+Math.imul(y,C)|0)+Math.imul(m,S)|0,W=W+Math.imul(m,C)|0;d=(tt+(F+Math.imul(d,R)|0)|0)+((8191&(V=(V+Math.imul(d,D)|0)+Math.imul(p,R)|0))<<13)|0;tt=((W+Math.imul(p,D)|0)+(V>>>13)|0)+(d>>>26)|0,d&=67108863,F=Math.imul(j,Y),V=Math.imul(j,X)+Math.imul(N,Y)|0,W=Math.imul(N,X),F=F+Math.imul(P,Z)|0,V=(V+Math.imul(P,K)|0)+Math.imul(L,Z)|0,W=W+Math.imul(L,K)|0,F=F+Math.imul(E,$)|0,V=(V+Math.imul(E,J)|0)+Math.imul(O,$)|0,W=W+Math.imul(O,J)|0,F=F+Math.imul(T,u)|0,V=(V+Math.imul(T,h)|0)+Math.imul(A,u)|0,W=W+Math.imul(A,h)|0,F=F+Math.imul(w,v)|0,V=(V+Math.imul(w,_)|0)+Math.imul(k,v)|0,W=W+Math.imul(k,_)|0,F=F+Math.imul(b,S)|0,V=(V+Math.imul(b,C)|0)+Math.imul(x,S)|0,W=W+Math.imul(x,C)|0;y=(tt+(F+Math.imul(y,R)|0)|0)+((8191&(V=(V+Math.imul(y,D)|0)+Math.imul(m,R)|0))<<13)|0;tt=((W+Math.imul(m,D)|0)+(V>>>13)|0)+(y>>>26)|0,y&=67108863,F=Math.imul(j,Z),V=Math.imul(j,K)+Math.imul(N,Z)|0,W=Math.imul(N,K),F=F+Math.imul(P,$)|0,V=(V+Math.imul(P,J)|0)+Math.imul(L,$)|0,W=W+Math.imul(L,J)|0,F=F+Math.imul(E,u)|0,V=(V+Math.imul(E,h)|0)+Math.imul(O,u)|0,W=W+Math.imul(O,h)|0,F=F+Math.imul(T,v)|0,V=(V+Math.imul(T,_)|0)+Math.imul(A,v)|0,W=W+Math.imul(A,_)|0,F=F+Math.imul(w,S)|0,V=(V+Math.imul(w,C)|0)+Math.imul(k,S)|0,W=W+Math.imul(k,C)|0;b=(tt+(F+Math.imul(b,R)|0)|0)+((8191&(V=(V+Math.imul(b,D)|0)+Math.imul(x,R)|0))<<13)|0;tt=((W+Math.imul(x,D)|0)+(V>>>13)|0)+(b>>>26)|0,b&=67108863,F=Math.imul(j,$),V=Math.imul(j,J)+Math.imul(N,$)|0,W=Math.imul(N,J),F=F+Math.imul(P,u)|0,V=(V+Math.imul(P,h)|0)+Math.imul(L,u)|0,W=W+Math.imul(L,h)|0,F=F+Math.imul(E,v)|0,V=(V+Math.imul(E,_)|0)+Math.imul(O,v)|0,W=W+Math.imul(O,_)|0,F=F+Math.imul(T,S)|0,V=(V+Math.imul(T,C)|0)+Math.imul(A,S)|0,W=W+Math.imul(A,C)|0;w=(tt+(F+Math.imul(w,R)|0)|0)+((8191&(V=(V+Math.imul(w,D)|0)+Math.imul(k,R)|0))<<13)|0;tt=((W+Math.imul(k,D)|0)+(V>>>13)|0)+(w>>>26)|0,w&=67108863,F=Math.imul(j,u),V=Math.imul(j,h)+Math.imul(N,u)|0,W=Math.imul(N,h),F=F+Math.imul(P,v)|0,V=(V+Math.imul(P,_)|0)+Math.imul(L,v)|0,W=W+Math.imul(L,_)|0,F=F+Math.imul(E,S)|0,V=(V+Math.imul(E,C)|0)+Math.imul(O,S)|0,W=W+Math.imul(O,C)|0;T=(tt+(F+Math.imul(T,R)|0)|0)+((8191&(V=(V+Math.imul(T,D)|0)+Math.imul(A,R)|0))<<13)|0;tt=((W+Math.imul(A,D)|0)+(V>>>13)|0)+(T>>>26)|0,T&=67108863,F=Math.imul(j,v),V=Math.imul(j,_)+Math.imul(N,v)|0,W=Math.imul(N,_),F=F+Math.imul(P,S)|0,V=(V+Math.imul(P,C)|0)+Math.imul(L,S)|0,W=W+Math.imul(L,C)|0;E=(tt+(F+Math.imul(E,R)|0)|0)+((8191&(V=(V+Math.imul(E,D)|0)+Math.imul(O,R)|0))<<13)|0;tt=((W+Math.imul(O,D)|0)+(V>>>13)|0)+(E>>>26)|0,E&=67108863,F=Math.imul(j,S),V=Math.imul(j,C)+Math.imul(N,S)|0,W=Math.imul(N,C);P=(tt+(F+Math.imul(P,R)|0)|0)+((8191&(V=(V+Math.imul(P,D)|0)+Math.imul(L,R)|0))<<13)|0;tt=((W+Math.imul(L,D)|0)+(V>>>13)|0)+(P>>>26)|0,P&=67108863;R=(tt+Math.imul(j,R)|0)+((8191&(V=Math.imul(j,D)+Math.imul(N,R)|0))<<13)|0;return tt=(Math.imul(N,D)+(V>>>13)|0)+(R>>>26)|0,R&=67108863,a[0]=G,a[1]=Q,a[2]=o,a[3]=g,a[4]=M,a[5]=i,a[6]=r,a[7]=t,a[8]=e,a[9]=s,a[10]=c,a[11]=d,a[12]=y,a[13]=b,a[14]=w,a[15]=T,a[16]=E,a[17]=P,a[18]=R,0!=tt&&(a[19]=tt,n.length++),n};function a(t,e,n){return(new s).mulp(t,e,n)}function s(t,e){this.x=t,this.y=e}Math.imul||(i=r),y.prototype.mulTo=function(t,e){var n=this.length+t.length,e=(10===this.length&&10===t.length?i:n<63?r:n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,a=0;a<n.length-1;a++){for(var o=i,i=0,s=67108863&r,l=Math.min(a,e.length-1),u=Math.max(0,a-t.length+1);u<=l;u++){var c=a-u,f=(0|t.words[c])*(0|e.words[u]),c=67108863&f,s=67108863&(c=c+s|0);i+=(o=(o=o+(f/67108864|0)|0)+(c>>>26)|0)>>>26,o&=67108863}n.words[a]=s,r=o,o=i}return 0!==r?n.words[a]=r:n.length--,n.strip()}:a)(this,t,e);return e},s.prototype.makeRBT=function(t){for(var e=new Array(t),n=y.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},s.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},s.prototype.permute=function(t,e,n,r,i,a){for(var o=0;o<a;o++)r[o]=e[t[o]],i[o]=n[t[o]]},s.prototype.transform=function(t,e,n,r,i,a){this.permute(a,t,e,n,r,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var f=l,h=u,d=0;d<o;d++){var p=n[c+d],g=r[c+d],y=f*(v=n[c+d+o])-h*(m=r[c+d+o]),m=f*m+h*v,v=y;n[c+d]=p+v,r[c+d]=g+m,n[c+d+o]=p-v,r[c+d+o]=g-m,d!==s&&(y=l*f-u*h,h=l*h+u*f,f=y)}},s.prototype.guessLen13b=function(t,e){for(var t=1&(r=1|Math.max(e,t)),n=0,r=r/2|0;r;r>>>=1)n++;return 1<<n+1+t},s.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},s.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},s.prototype.convert13b=function(t,e,n,r){for(var i=0,a=0;a<e;a++)i+=0|t[a],n[2*a]=8191&i,i>>>=13,n[2*a+1]=8191&i,i>>>=13;for(a=2*e;a<r;++a)n[a]=0;g(0===i),g(0==(-8192&i))},s.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},s.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),a=this.stub(r),o=new Array(r),s=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),f=new Array(r),h=n.words;h.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,a,s,l,r,i),this.transform(u,a,c,f,r,i);for(var d=0;d<r;d++){var p=s[d]*c[d]-l[d]*f[d];l[d]=s[d]*f[d]+l[d]*c[d],s[d]=p}return this.conjugate(s,l,r),this.transform(s,l,h,a,r,i),this.conjugate(h,a,r),this.normalize13b(h,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},y.prototype.mul=function(t){var e=new y(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},y.prototype.mulf=function(t){var e=new y(null);return e.words=new Array(this.length+t.length),a(this,t,e)},y.prototype.imul=function(t){return this.clone().mulTo(t,this)},y.prototype.imuln=function(t){g("number"==typeof t),g(t<67108864);for(var e=0,n=0;n<this.length;n++){var r=(0|this.words[n])*t,i=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=i>>>26,this.words[n]=67108863&i}return 0!==e&&(this.words[n]=e,this.length++),this},y.prototype.muln=function(t){return this.clone().imuln(t)},y.prototype.sqr=function(){return this.mul(this)},y.prototype.isqr=function(){return this.imul(this.clone())},y.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new y(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},y.prototype.iushln=function(t){g("number"==typeof t&&0<=t);var e=t%26,n=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!=e){for(var i=0,a=0;a<this.length;a++){var o=this.words[a]&r,s=(0|this.words[a])-o<<e;this.words[a]=s|i,i=o>>>26-e}i&&(this.words[a]=i,this.length++)}if(0!=n){for(a=this.length-1;0<=a;a--)this.words[a+n]=this.words[a];for(a=0;a<n;a++)this.words[a]=0;this.length+=n}return this.strip()},y.prototype.ishln=function(t){return g(0===this.negative),this.iushln(t)},y.prototype.iushrn=function(t,e,n){var r;g("number"==typeof t&&0<=t),r=e?(e-e%26)/26:0;var i=t%26,a=Math.min((t-i)/26,this.length),o=67108863^67108863>>>i<<i,s=n;if(r-=a,r=Math.max(0,r),s){for(var l=0;l<a;l++)s.words[l]=this.words[l];s.length=a}if(0!==a)if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;for(var u=0,l=this.length-1;0<=l&&(0!==u||r<=l);l--){var c=0|this.words[l];this.words[l]=u<<26-i|c>>>i,u=c&o}return s&&0!==u&&(s.words[s.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},y.prototype.ishrn=function(t,e,n){return g(0===this.negative),this.iushrn(t,e,n)},y.prototype.shln=function(t){return this.clone().ishln(t)},y.prototype.ushln=function(t){return this.clone().iushln(t)},y.prototype.shrn=function(t){return this.clone().ishrn(t)},y.prototype.ushrn=function(t){return this.clone().iushrn(t)},y.prototype.testn=function(t){g("number"==typeof t&&0<=t);var e=t%26,t=(t-e)/26,e=1<<e;return!(this.length<=t)&&!!(this.words[t]&e)},y.prototype.imaskn=function(t){g("number"==typeof t&&0<=t);var e=t%26,t=(t-e)/26;return g(0===this.negative,"imaskn works only with positive numbers"),this.length<=t?this:(0!=e&&t++,this.length=Math.min(t,this.length),0!=e&&(e=67108863^67108863>>>e<<e,this.words[this.length-1]&=e),this.strip())},y.prototype.maskn=function(t){return this.clone().imaskn(t)},y.prototype.iaddn=function(t){return g("number"==typeof t),g(t<67108864),t<0?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},y.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&67108864<=this.words[e];e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},y.prototype.isubn=function(t){if(g("number"==typeof t),g(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,--this.words[e+1];return this.strip()},y.prototype.addn=function(t){return this.clone().iaddn(t)},y.prototype.subn=function(t){return this.clone().isubn(t)},y.prototype.iabs=function(){return this.negative=0,this},y.prototype.abs=function(){return this.clone().iabs()},y.prototype._ishlnsubmul=function(t,e,n){var r,i=t.length+n;this._expand(i);for(var a=0,o=0;o<t.length;o++){r=(0|this.words[o+n])+a;var s=(0|t.words[o])*e,a=((r-=67108863&s)>>26)-(s/67108864|0);this.words[o+n]=67108863&r}for(;o<this.length-n;o++)a=(r=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&r;if(0===a)return this.strip();for(g(-1===a),o=a=0;o<this.length;o++)a=(r=-(0|this.words[o])+a)>>26,this.words[o]=67108863&r;return this.negative=1,this.strip()},y.prototype._wordDiv=function(t,e){var n=this.length-t.length,r=this.clone(),i=t,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var o,s=r.length-i.length;if("mod"!==e){(o=new y(null)).length=1+s,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}t=r.clone()._ishlnsubmul(i,1,s);0===t.negative&&(r=t,o&&(o.words[s]=1));for(var u=s-1;0<=u;u--){var c=67108864*(0|r.words[i.length+u])+(0|r.words[i.length+u-1]),c=Math.min(c/a|0,67108863);for(r._ishlnsubmul(i,c,u);0!==r.negative;)c--,r.negative=0,r._ishlnsubmul(i,1,u),r.isZero()||(r.negative^=1);o&&(o.words[u]=c)}return o&&o.strip(),r.strip(),"div"!==e&&0!=n&&r.iushrn(n),{div:o||null,mod:r}},y.prototype.divmod=function(t,e,n){return g(!t.isZero()),this.isZero()?{div:new y(0),mod:new y(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(r=a.div.neg()),"div"!==e&&(i=a.mod.neg(),n&&0!==i.negative&&i.iadd(t)),{div:r,mod:i}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(r=a.div.neg()),{div:r,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(i=a.mod.neg(),n&&0!==i.negative&&i.isub(t)),{div:a.div,mod:i}):t.length>this.length||this.cmp(t)<0?{div:new y(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new y(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new y(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,i,a},y.prototype.div=function(t){return this.divmod(t,"div",!1).div},y.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},y.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},y.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),t=t.andln(1),r=n.cmp(r);return r<0||1===t&&0===r?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},y.prototype.modn=function(t){g(t<=67108863);for(var e=(1<<26)%t,n=0,r=this.length-1;0<=r;r--)n=(e*n+(0|this.words[r]))%t;return n},y.prototype.idivn=function(t){g(t<=67108863);for(var e=0,n=this.length-1;0<=n;n--){var r=(0|this.words[n])+67108864*e;this.words[n]=r/t|0,e=r%t}return this.strip()},y.prototype.divn=function(t){return this.clone().idivn(t)},y.prototype.egcd=function(t){g(0===t.negative),g(!t.isZero());for(var e=this,n=t.clone(),e=0!==e.negative?e.umod(t):e.clone(),r=new y(1),i=new y(0),a=new y(0),o=new y(1),s=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++s;for(var l=n.clone(),u=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(0<c)for(e.iushrn(c);0<c--;)(r.isOdd()||i.isOdd())&&(r.iadd(l),i.isub(u)),r.iushrn(1),i.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(0<h)for(n.iushrn(h);0<h--;)(a.isOdd()||o.isOdd())&&(a.iadd(l),o.isub(u)),a.iushrn(1),o.iushrn(1);0<=e.cmp(n)?(e.isub(n),r.isub(a),i.isub(o)):(n.isub(e),a.isub(r),o.isub(i))}return{a:a,b:o,gcd:n.iushln(s)}},y.prototype._invmp=function(t){g(0===t.negative),g(!t.isZero());for(var e,n=this,r=t.clone(),n=0!==n.negative?n.umod(t):n.clone(),i=new y(1),a=new y(0),o=r.clone();0<n.cmpn(1)&&0<r.cmpn(1);){for(var s=0,l=1;0==(n.words[0]&l)&&s<26;++s,l<<=1);if(0<s)for(n.iushrn(s);0<s--;)i.isOdd()&&i.iadd(o),i.iushrn(1);for(var u=0,c=1;0==(r.words[0]&c)&&u<26;++u,c<<=1);if(0<u)for(r.iushrn(u);0<u--;)a.isOdd()&&a.iadd(o),a.iushrn(1);0<=n.cmp(r)?(n.isub(r),i.isub(a)):(r.isub(n),a.isub(i))}return(e=0===n.cmpn(1)?i:a).cmpn(0)<0&&e.iadd(t),e},y.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0;for(var r=n.negative=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0)var a=e,e=n,n=a;else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},y.prototype.invm=function(t){return this.egcd(t).a.umod(t)},y.prototype.isEven=function(){return 0==(1&this.words[0])},y.prototype.isOdd=function(){return 1==(1&this.words[0])},y.prototype.andln=function(t){return this.words[0]&t},y.prototype.bincn=function(t){g("number"==typeof t);var e=t%26,t=(t-e)/26,e=1<<e;if(this.length<=t)return this._expand(1+t),this.words[t]|=e,this;for(var n=e,r=t;0!==n&&r<this.length;r++){var i=0|this.words[r],n=(i+=n)>>>26;i&=67108863,this.words[r]=i}return 0!==n&&(this.words[r]=n,this.length++),this},y.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},y.prototype.cmpn=function(t){var e=t<0;return 0===this.negative||e?0===this.negative&&e?1:(this.strip(),t=1<this.length?1:(e&&(t=-t),g(t<=67108863,"Number is too big"),(e=0|this.words[0])===t?0:e<t?-1:1),0!==this.negative?0|-t:t):-1},y.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;t=this.ucmp(t);return 0!==this.negative?0|-t:t},y.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;0<=n;n--){var r=0|this.words[n],i=0|t.words[n];if(r!=i){r<i?e=-1:i<r&&(e=1);break}}return e},y.prototype.gtn=function(t){return 1===this.cmpn(t)},y.prototype.gt=function(t){return 1===this.cmp(t)},y.prototype.gten=function(t){return 0<=this.cmpn(t)},y.prototype.gte=function(t){return 0<=this.cmp(t)},y.prototype.ltn=function(t){return-1===this.cmpn(t)},y.prototype.lt=function(t){return-1===this.cmp(t)},y.prototype.lten=function(t){return this.cmpn(t)<=0},y.prototype.lte=function(t){return this.cmp(t)<=0},y.prototype.eqn=function(t){return 0===this.cmpn(t)},y.prototype.eq=function(t){return 0===this.cmp(t)},y.red=function(t){return new x(t)},y.prototype.toRed=function(t){return g(!this.red,"Already a number in reduction context"),g(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},y.prototype.fromRed=function(){return g(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},y.prototype._forceRed=function(t){return this.red=t,this},y.prototype.forceRed=function(t){return g(!this.red,"Already a number in reduction context"),this._forceRed(t)},y.prototype.redAdd=function(t){return g(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},y.prototype.redIAdd=function(t){return g(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},y.prototype.redSub=function(t){return g(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},y.prototype.redISub=function(t){return g(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},y.prototype.redShl=function(t){return g(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},y.prototype.redMul=function(t){return g(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},y.prototype.redIMul=function(t){return g(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},y.prototype.redSqr=function(){return g(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},y.prototype.redISqr=function(){return g(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},y.prototype.redSqrt=function(){return g(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},y.prototype.redInvm=function(){return g(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},y.prototype.redNeg=function(){return g(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},y.prototype.redPow=function(t){return g(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};function u(t,e){this.name=t,this.p=new y(e,16),this.n=this.p.bitLength(),this.k=new y(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function c(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function m(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){var e;"string"==typeof t?(e=y._prime(t),this.m=e.p,this.prime=e):(g(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null)}function _(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new y(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}u.prototype._tmp=function(){var t=new y(null);return t.words=new Array(Math.ceil(this.n/13)),t},u.prototype.ireduce=function(t){for(var e,n=t;this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength(),e>this.n;);t=e<this.n?-1:n.ucmp(this.p);return 0===t?(n.words[0]=0,n.length=1):0<t?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},u.prototype.split=function(t,e){t.iushrn(this.n,0,e)},u.prototype.imulK=function(t){return t.imul(this.k)},e(c,u),c.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var a=0|t.words[r];t.words[r-10]=(4194303&a)<<4|i>>>22,i=a}i>>>=22,0===(t.words[r-10]=i)&&10<t.length?t.length-=10:t.length-=9},c.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},e(m,u),e(v,u),e(b,u),b.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},y._prime=function(t){if(l[t])return l[t];var e;if("k256"===t)e=new c;else if("p224"===t)e=new m;else if("p192"===t)e=new v;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new b}return l[t]=e},x.prototype._verify1=function(t){g(0===t.negative,"red works only with positives"),g(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){g(0==(t.negative|e.negative),"red works only with positives"),g(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return(this.prime?this.prime.ireduce(t):t.umod(this.m))._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);e=t.add(e);return 0<=e.cmp(this.m)&&e.isub(this.m),e._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);e=t.iadd(e);return 0<=e.cmp(this.m)&&e.isub(this.m),e},x.prototype.sub=function(t,e){this._verify2(t,e);e=t.sub(e);return e.cmpn(0)<0&&e.iadd(this.m),e._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);e=t.isub(e);return e.cmpn(0)<0&&e.iadd(this.m),e},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(g(e%2==1),3===e){e=this.m.add(new y(1)).iushrn(2);return this.pow(t,e)}for(var n=this.m.subn(1),r=0;!n.isZero()&&0===n.andln(1);)r++,n.iushrn(1);g(!n.isZero());for(var i=new y(1).toRed(this),a=i.redNeg(),o=this.m.subn(1).iushrn(1),s=new y(2*(s=this.m.bitLength())*s).toRed(this);0!==this.pow(s,o).cmp(a);)s.redIAdd(a);for(var l=this.pow(s,n),u=this.pow(t,n.addn(1).iushrn(1)),c=this.pow(t,n),f=r;0!==c.cmp(i);){for(var h=c,d=0;0!==h.cmp(i);d++)h=h.redSqr();g(d<f);var p=this.pow(l,new y(1).iushln(f-d-1)),u=u.redMul(p),l=p.redSqr(),c=c.redMul(l),f=d}return u},x.prototype.invm=function(t){t=t._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(t,e){if(e.isZero())return new y(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new y(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],a=0,o=0,s=e.bitLength()%26;for(0===s&&(s=26),r=e.length-1;0<=r;r--){for(var l=e.words[r],u=s-1;0<=u;u--){var c=l>>u&1;i!==n[0]&&(i=this.sqr(i)),0!=c||0!==a?(a<<=1,a|=c,(4===++o||0===r&&0===u)&&(i=this.mul(i,n[a]),a=o=0)):o=0}s=26}return i},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){t=t.clone();return t.red=null,t},y.mont=function(t){return new _(t)},e(_,x),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){t=this.imod(t.mul(this.rinv));return t.red=null,t},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;t=t.imul(e),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=t.isub(e).iushrn(this.shift),e=t;return 0<=t.cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new y(0)._forceRed(this);t=t.mul(e),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=t.isub(e).iushrn(this.shift),e=t;return 0<=t.cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t)},{buffer:35}],28:[function(t,e,n){"use strict";e.exports=function(t,e,n){switch(arguments.length){case 1:return function(t){return r=[],i(t,t,a,!0),r}(t);case 2:return"function"==typeof e?i(t,t,e,!0):function(t,e){return i(t,e,a,!(r=[])),r}(t,e);case 3:return i(t,e,n,!1);default:throw new Error("box-intersect: Invalid arguments")}};var r,c=t("typedarray-pool"),f=t("./lib/sweep"),h=t("./lib/intersect");function d(t,e,n,r){for(var i=0,a=0,o=0,s=t.length;o<s;++o){var l=t[o];if(!function(t,e){for(var n=0;n<t;++n)if(!(e[n]<=e[n+t]))return 1}(e,l)){for(var u=0;u<2*e;++u)n[i++]=l[u];r[a++]=o}}return a}function i(t,e,n,r){var i=t.length,a=e.length;if(!(i<=0||a<=0)){var o=t[0].length>>>1;if(!(o<=0)){var s,l=c.mallocDouble(2*o*i),u=c.mallocInt32(i);return 0<(i=d(t,o,l,u))&&(1==o&&r?(f.init(i),s=f.sweepComplete(o,n,0,i,l,u,0,i,l,u)):0<(a=d(e,o,t=c.mallocDouble(2*o*a),e=c.mallocInt32(a)))&&(f.init(i+a),s=1==o?f.sweepBipartite(o,n,0,i,l,u,0,a,t,e):h(o,n,r,i,l,u,a,t,e),c.free(t),c.free(e)),c.free(l),c.free(u)),s}}}function a(t,e){r.push([t,e])}},{"./lib/intersect":30,"./lib/sweep":34,"typedarray-pool":657}],29:[function(t,e,n){"use strict";var c="d",f="ax",h="vv",d="es",p="rs",g="re",y="rb",m="ri",v="rp",b="bs",x="be",_="bb",w="bi",k="bp",M="rv",T="Q",A=[c,f,h,p,g,y,m,b,x,_,w];function r(s){var t="bruteForce"+(s?"Full":"Partial"),l=[],e=A.slice();s||e.splice(3,0,"fp");var u=["function "+t+"("+e.join()+"){"];function n(t,e){var n,r,i,a,o,o=(o=["function ",a="bruteForce"+((n=t)?"Red":"Blue")+((r=e)?"Flip":"")+((i=s)?"Full":""),"(",A.join(),"){","var ",d,"=2*",c,";"],t="for(var i="+p+","+v+"="+d+"*"+p+";i<"+g+";++i,"+v+"+="+d+"){var x0="+y+"["+f+"+"+v+"],x1="+y+"["+f+"+"+v+"+"+c+"],xi="+m+"[i];",e="for(var j="+b+","+k+"="+d+"*"+b+";j<"+x+";++j,"+k+"+="+d+"){var y0="+_+"["+f+"+"+k+"],"+(i?"y1="+_+"["+f+"+"+k+"+"+c+"],":"")+"yi="+w+"[j];",n?o.push(t,T,":",e):o.push(e,T,":",t),i?o.push("if(y1<x0||x1<y0)continue;"):r?o.push("if(y0<=x0||x1<y0)continue;"):o.push("if(y0<x0||x1<y0)continue;"),o.push("for(var k="+f+"+1;k<"+c+";++k){var r0="+y+"[k+"+v+"],r1="+y+"[k+"+c+"+"+v+"],b0="+_+"[k+"+k+"],b1="+_+"[k+"+c+"+"+k+"];if(r1<b0||b1<r0)continue "+T+";}var "+M+"="+h+"("),r?o.push("yi,xi"):o.push("xi,yi"),o.push(");if("+M+"!==void 0)return "+M+";}}}"),{name:a,code:o.join("")});l.push(o.code),u.push("return "+o.name+"("+A.join()+");")}u.push("if("+g+"-"+p+">"+x+"-"+b+"){"),s?(n(!0,!1),u.push("}else{"),n(!1,!1)):(u.push("if(fp){"),n(!0,!0),u.push("}else{"),n(!0,!1),u.push("}}else{if(fp){"),n(!1,!0),u.push("}else{"),n(!1,!1),u.push("}")),u.push("}}return "+t);t=l.join("")+u.join("");return new Function(t)()}n.partial=r(!1),n.full=r(!0)},{}],30:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,a,o,s,l){!function(t,e){e=8*C.log2(e+1)*(t+1)|0,t=C.nextPow2(q*e),Y.length<t&&(O.free(Y),Y=O.mallocInt32(t)),e=C.nextPow2(G*e),X.length<e&&(O.free(X),X=O.mallocDouble(e))}(t,r+o);var u,c,f=0,h=2*t;W(f++,0,0,r,0,o,n?16:0,-1/0,1/0),n||W(f++,0,0,o,0,r,1,-1/0,1/0);for(;0<f;){var d=--f*q,p=Y[d],g=Y[1+d],y=Y[2+d],m=Y[3+d],v=Y[4+d],b=Y[5+d],x=f*G,_=X[x],w=X[1+x],k=1&b,M=!!(16&b),T=i,A=a,S=s,E=l;if(k&&(T=s,A=l,S=i,E=a),!(2&b&&(y=B(t,p,g,y,T,A,w))<=g)&&!(4&b&&(g=U(t,p,g,y,T,A,_),y<=g))){d=y-g,x=v-m;if(M){if(t*d*(d+x)<z){if(void 0!==(u=R.scanComplete(t,p,e,g,y,T,A,m,v,S,E)))return u;continue}}else{if(t*Math.min(d,x)<N){if(void 0!==(u=P(t,p,e,k,g,y,T,A,m,v,S,E)))return u;continue}if(t*d*x<D){if(void 0!==(u=R.scanBipartite(t,p,e,k,g,y,T,A,m,v,S,E)))return u;continue}}b=I(t,p,g,y,T,A,_,w);if(g<b)if(t*(b-g)<N){if(void 0!==(u=L(t,p+1,e,g,b,T,A,m,v,S,E)))return u}else if(p===t-2){if(void 0!==(u=k?R.sweepBipartite(t,e,m,v,S,E,g,b,T,A):R.sweepBipartite(t,e,g,b,T,A,m,v,S,E)))return u}else W(f++,p+1,g,b,m,v,k,-1/0,1/0),W(f++,p+1,m,v,g,b,1^k,-1/0,1/0);if(b<y){d=j(t,p,m,v,S,E),x=S[h*d+p],g=F(t,p,d,v,S,E,x);if(g<v&&W(f++,p,b,y,g,v,(4|k)+(M?16:0),x,w),m<d&&W(f++,p,b,y,m,d,(2|k)+(M?16:0),_,x),d+1===g){if(void 0!==(u=M?function(t,e,n,r,i,a,o,s,l,u){var c=2*t,f=s*c,h=l[f+e];t:for(var d=r,p=r*c;d<i;++d,p+=c){var g=o[d];if(g!==u){var y=a[p+e],m=a[p+e+t];if(!(h<y||m<h)){for(var v=e+1;v<t;++v){var y=a[p+v],m=a[p+v+t],b=l[f+v],x=l[f+v+t];if(m<b||x<y)continue t}g=n(g,u);if(void 0!==g)return g}}}}(t,p,e,b,y,T,A,d,S,E[d]):function(t,e,n,r,i,a,o,s,l,u,c){var f=2*t,h=l*f,d=u[h+e];t:for(var p=i,g=i*f;p<a;++p,g+=f){var y=o[g+e],m=o[g+e+t];if(!(d<y||m<d)&&(!r||d!==y)){for(var v=s[p],b=e+1;b<t;++b){var y=o[g+b],m=o[g+b+t],x=u[h+b],_=u[h+b+t];if(m<x||_<y)continue t}if(void 0!==(v=r?n(c,v):n(v,c)))return v}}}(t,p,e,k,b,y,T,A,d,S,E[d])))return u}else if(d<g)if(M){if(c=V(t,p,b,y,T,A,x),b<c){M=F(t,p,b,c,T,A,x);if(p===t-2){if(b<M&&void 0!==(u=R.sweepComplete(t,e,b,M,T,A,d,g,S,E)))return u;if(M<c&&void 0!==(u=R.sweepBipartite(t,e,M,c,T,A,d,g,S,E)))return u}else b<M&&W(f++,p+1,b,M,d,g,16,-1/0,1/0),M<c&&(W(f++,p+1,M,c,d,g,0,-1/0,1/0),W(f++,p+1,d,g,M,c,1,-1/0,1/0))}}else c=(k?H:V)(t,p,b,y,T,A,x),b<c&&(p===t-2?u=k?R.sweepBipartite(t,e,d,g,S,E,b,c,T,A):R.sweepBipartite(t,e,b,c,T,A,d,g,S,E):(W(f++,p+1,b,c,d,g,k,-1/0,1/0),W(f++,p+1,d,g,b,c,1^k,-1/0,1/0)))}}}};var O=t("typedarray-pool"),C=t("bit-twiddle"),e=t("./brute"),P=e.partial,L=e.full,R=t("./sweep"),j=t("./median"),t=t("./partition"),N=128,D=1<<22,z=1<<22,I=t("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),F=t("lo===p0",["p0"]),B=t("lo<p0",["p0"]),U=t("hi<=p0",["p0"]),V=t("lo<=p0&&p0<=hi",["p0"]),H=t("lo<p0&&p0<=hi",["p0"]),q=6,G=2,Y=O.mallocInt32(1024),X=O.mallocDouble(1024);function W(t,e,n,r,i,a,o,s,l){var u=q*t;Y[u]=e,Y[1+u]=n,Y[2+u]=r,Y[3+u]=i,Y[4+u]=a,Y[5+u]=o;t*=G;X[t]=s,X[1+t]=l}},{"./brute":29,"./median":31,"./partition":32,"./sweep":34,"bit-twiddle":26,"typedarray-pool":657}],31:[function(t,e,n){"use strict";e.exports=function(y,t,e,n,r,i){if(n<=e+1)return e;var a=e,o=n,s=n+e>>>1,l=2*y,u=s,c=r[l*s+t];for(;a<o;){if(o-a<k){!function(t,e,n,r,i){for(var a=2*y,o=a*(e+1)+t,s=e+1;s<n;++s,o+=a)for(var l=r[o],u=s,c=a*(s-1);e<u&&r[c+t]>l;--u,c-=a){for(var f=c,h=c+a,d=0;d<a;++d,++f,++h){var p=r[f];r[f]=r[h],r[h]=p}var g=i[u];i[u]=i[u-1],i[u-1]=g}}(t,a,o,r,i),c=r[l*s+t];break}var f=o-a,h=Math.random()*f+a|0,d=r[l*h+t],p=Math.random()*f+a|0,g=r[l*p+t],m=Math.random()*f+a|0,f=r[l*m+t];c=d<=g?g<=f?(u=p,g):f<=d?(u=h,d):(u=m,f):f<=g?(u=p,g):d<=f?(u=h,d):(u=m,f);for(var v=l*(o-1),b=l*u,x=0;x<l;++x,++v,++b){var _=r[v];r[v]=r[b],r[b]=_}f=i[o-1];i[o-1]=i[u],i[u]=f,u=w(y,t,a,o-1,r,i,c);for(v=l*(o-1),b=l*u,x=0;x<l;++x,++v,++b){_=r[v];r[v]=r[b],r[b]=_}f=i[o-1];if(i[o-1]=i[u],i[u]=f,s<u){for(o=u-1;a<o&&r[l*(o-1)+t]===c;)--o;o+=1}else{if(!(u<s))break;for(a=u+1;a<o&&r[l*a+t]===c;)a+=1}}return w(y,t,e,s,r,i,r[l*s+t])};var w=t("./partition")("lo<p0",["p0"]),k=8},{"./partition":32}],32:[function(t,e,n){"use strict";e.exports=function(t,e){var n="abcdef".split("").concat(e),e=[];0<=t.indexOf("lo")&&e.push("lo=e[k+n]");0<=t.indexOf("hi")&&e.push("hi=e[k+o]");return n.push(r.replace("_",e.join()).replace("$",t)),Function.apply(void 0,n)};var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],33:[function(t,e,n){"use strict";e.exports=function(t,e){(e<=4*L?R:function t(e,n,r){var i=(n-e+1)/6|0,a=e+i,o=n-i,s=e+n>>1,l=s-i,u=s+i,c=a,f=l,h=s,d=u,p=o,g=e+1,y=n-1,i=0;I(c,f,r)&&(i=c,c=f,f=i);I(d,p,r)&&(i=d,d=p,p=i);I(c,h,r)&&(i=c,c=h,h=i);I(f,h,r)&&(i=f,f=h,h=i);I(c,d,r)&&(i=c,c=d,d=i);I(h,d,r)&&(i=h,h=d,d=i);I(f,p,r)&&(i=f,f=p,p=i);I(f,h,r)&&(i=f,f=h,h=i);I(d,p,r)&&(i=d,d=p,p=i);var m=r[2*f];var v=r[2*f+1];var b=r[2*d];var x=r[2*d+1];var _=2*c;var w=2*h;var k=2*p;var M=2*a;var T=2*s;var A=2*o;for(var S=0;S<2;++S){var E=r[_+S],O=r[w+S],C=r[k+S];r[M+S]=E,r[T+S]=O,r[A+S]=C}N(l,e,r);N(u,n,r);for(var P=g;P<=y;++P)if(F(P,m,v,r))P!==g&&j(P,g,r),++g;else if(!F(P,b,x,r))for(;;){if(F(y,b,x,r)){F(y,m,v,r)?(D(P,g,y,r),++g):j(P,y,r),--y;break}if(--y<P)break}z(e,g-1,m,v,r);z(n,y+1,b,x,r);(g-2-e<=L?R:t)(e,g-2,r);(n-(y+2)<=L?R:t)(y+2,n,r);(y-g<=L?R:t)(g,y,r)})(0,e-1,t)};var L=32;function R(t,e,n){for(var r=2*(t+1),i=t+1;i<=e;++i){for(var a=n[r++],o=n[r++],s=i,l=r-2;s-- >t;){var u=n[l-2],c=n[l-1];if(u<a)break;if(u===a&&c<o)break;n[l]=u,n[l+1]=c,l-=2}n[l]=a,n[l+1]=o}}function j(t,e,n){e*=2;var r=n[t*=2],i=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=r,n[e+1]=i}function N(t,e,n){e*=2,n[t*=2]=n[e],n[t+1]=n[e+1]}function D(t,e,n,r){e*=2,n*=2;var i=r[t*=2],a=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=r[n],r[e+1]=r[n+1],r[n]=i,r[n+1]=a}function z(t,e,n,r,i){e*=2,i[t*=2]=i[e],i[e]=n,i[t+1]=i[e+1],i[e+1]=r}function I(t,e,n){e*=2;var r=n[t*=2],i=n[e];return!(r<i)&&(r!==i||n[t+1]>n[e+1])}function F(t,e,n,r){var i=r[t*=2];return i<e||i===e&&r[t+1]<n}},{}],34:[function(t,e,n){"use strict";e.exports={init:function(t){t=i.nextPow2(t);D.length<t&&(r.free(D),D=r.mallocInt32(t));z.length<t&&(r.free(z),z=r.mallocInt32(t));S.length<t&&(r.free(S),S=r.mallocInt32(t));E.length<t&&(r.free(E),E=r.mallocInt32(t));O.length<t&&(r.free(O),O=r.mallocInt32(t));C.length<t&&(r.free(C),C=r.mallocInt32(t));t*=8;I.length<t&&(r.free(I),I=r.mallocDouble(t))},sweepBipartite:function(t,e,n,r,i,a,o,s,l,u){for(var c=0,f=2*t,h=t-1,d=f-1,p=n;p<r;++p){var g=a[p],y=f*p;I[c++]=i[y+h],I[c++]=-(g+1),I[c++]=i[y+d],I[c++]=g}for(p=o;p<s;++p){var g=u[p]+N,m=f*p;I[c++]=l[m+h],I[c++]=-g,I[c++]=l[m+d],I[c++]=g}var v=c>>>1;j(I,v);for(var b=0,x=0,p=0;p<v;++p){var _=0|I[2*p+1];if(N<=_)F(S,E,x--,_=_-N|0);else if(0<=_)F(D,z,b--,_);else if(_<=-N){_=-_-N|0;for(var w=0;w<b;++w)if(void 0!==(k=e(D[w],_)))return k;B(S,E,x++,_)}else{_=-_-1|0;for(var k,w=0;w<x;++w)if(void 0!==(k=e(_,S[w])))return k;B(D,z,b++,_)}}},sweepComplete:function(t,e,n,r,i,a,o,s,l,u){for(var c=0,f=2*t,h=t-1,d=f-1,p=n;p<r;++p){var g=a[p]+1<<1,y=f*p;I[c++]=i[y+h],I[c++]=-g,I[c++]=i[y+d],I[c++]=g}for(p=o;p<s;++p){var g=u[p]+1<<1,m=f*p;I[c++]=l[m+h],I[c++]=1|-g,I[c++]=l[m+d],I[c++]=1|g}var v=c>>>1;j(I,v);for(var b=0,x=0,_=0,p=0;p<v;++p){var w=0|I[2*p+1],k=1&w;if(p<v-1&&w>>1==I[2*p+3]>>1&&(k=2,p+=1),w<0){for(var M=-(w>>1)-1,T=0;T<_;++T)if(void 0!==(A=e(O[T],M)))return A;if(0!==k)for(T=0;T<b;++T)if(void 0!==(A=e(D[T],M)))return A;if(1!==k)for(var A,T=0;T<x;++T)if(void 0!==(A=e(S[T],M)))return A;0===k?B(D,z,b++,M):1===k?B(S,E,x++,M):2===k&&B(O,C,_++,M)}else{M=(w>>1)-1;0===k?F(D,z,b--,M):1===k?F(S,E,x--,M):2===k&&F(O,C,_--,M)}}},scanBipartite:function(t,e,n,r,i,a,o,s,l,u,c,f){var h=0,d=2*t,p=e,g=e+t,y=1,m=1;r?m=N:y=N;for(var v=i;v<a;++v){var b=v+y,x=d*v;I[h++]=o[x+p],I[h++]=-b,I[h++]=o[x+g],I[h++]=b}for(v=l;v<u;++v){var b=v+m,_=d*v;I[h++]=c[_+p],I[h++]=-b}var w=h>>>1;j(I,w);for(var k=0,v=0;v<w;++v){var M=0|I[2*v+1];if(M<0){var T=!1;if(N<=(b=-M)?(T=!r,b-=N):(T=!!r,--b),T)B(D,z,k++,b);else{var A=f[b],S=d*b,E=c[S+e+1],O=c[S+e+1+t];t:for(var C=0;C<k;++C){var P=D[C],L=d*P;if(!(O<o[L+e+1]||o[L+e+1+t]<E)){for(var R=e+2;R<t;++R)if(c[S+R+t]<o[L+R]||o[L+R+t]<c[S+R])continue t;var P=s[P];if(void 0!==(P=r?n(A,P):n(P,A)))return P}}}}else F(D,z,k--,M-y)}},scanComplete:function(t,e,n,r,i,a,o,s,l,u,c){for(var f=0,h=2*t,d=e,p=e+t,g=r;g<i;++g){var y=g+N,m=h*g;I[f++]=a[m+d],I[f++]=-y,I[f++]=a[m+p],I[f++]=y}for(g=s;g<l;++g){var y=g+1,v=h*g;I[f++]=u[v+d],I[f++]=-y}var b=f>>>1;j(I,b);for(var x=0,g=0;g<b;++g){var _=0|I[2*g+1];if(_<0)if(N<=(y=-_))D[x++]=y-N;else{var w=c[--y],k=h*y,M=u[k+e+1],T=u[k+e+1+t];t:for(var A=0;A<x;++A){var S=D[A],E=o[S];if(E===w)break;var O=h*S;if(!(T<a[O+e+1]||a[O+e+1+t]<M)){for(var C=e+2;C<t;++C)if(u[k+C+t]<a[O+C]||a[O+C+t]<u[k+C])continue t;E=n(E,w);if(void 0!==E)return E}}}else{for(y=_-N,A=x-1;0<=A;--A)if(D[A]===y){for(C=A+1;C<x;++C)D[C-1]=D[C];break}--x}}}};var r=t("typedarray-pool"),i=t("bit-twiddle"),j=t("./sort"),N=1<<28,t=1024,D=r.mallocInt32(t),z=r.mallocInt32(t),S=r.mallocInt32(t),E=r.mallocInt32(t),O=r.mallocInt32(t),C=r.mallocInt32(t),I=r.mallocDouble(8192);function F(t,e,n,r){r=e[r],n=t[n-1];e[t[r]=n]=r}function B(t,e,n,r){e[t[n]=r]=n}},{"./sort":33,"bit-twiddle":26,"typedarray-pool":657}],35:[function(t,e,n){},{}],36:[function(L,t,R){(function(t){(function(){"use strict";function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=L("base64-js"),a=L("ieee754");R.Buffer=h,R.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},R.INSPECT_MAX_BYTES=50;var e=2147483647;function i(t){if(e<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');t=new Uint8Array(t);return t.__proto__=h.prototype,t}function h(t,e,n){if("number"!=typeof t)return r(t,e,n);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}function r(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|d(t,e),r=i(n),e=r.write(t,e);e!==n&&(r=r.slice(0,e));return r}(t,e);if(ArrayBuffer.isView(t))return u(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+f(t));if(C(t,ArrayBuffer)||t&&C(t.buffer,ArrayBuffer))return function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');n=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return n.__proto__=h.prototype,n}(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return h.from(r,e,n);r=function(t){if(h.isBuffer(t)){var e=0|c(t.length),n=i(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(void 0!==t.length)return"number"!=typeof t.length||P(t.length)?i(0):u(t);if("Buffer"===t.type&&Array.isArray(t.data))return u(t.data)}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+f(t))}function o(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return o(t),i(t<0?0:0|c(t))}function u(t){for(var e=t.length<0?0:0|c(t.length),n=i(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function c(t){if(e<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|t}function d(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||C(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+f(t));var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return S(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return E(t).length;default:if(i)return r?-1:S(t).length;e=(""+e).toLowerCase(),i=!0}}function n(t,e,n){var r,i,a,o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,n){var r=t.length;(!e||e<0)&&(e=0);(!n||n<0||r<n)&&(n=r);for(var i="",a=e;a<n;++a)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[a]);return i}(this,e,n);case"utf8":case"utf-8":return b(this,e,n);case"ascii":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":return r=this,a=n,0===(i=e)&&a===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,e,n);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function p(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),P(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var a=1,o=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o/=a=2,s/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i)for(var u=-1,c=n;c<o;c++)if(l(t,c)===l(e,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===s)return u*a}else-1!==u&&(c-=c-u),u=-1;else for(o<n+s&&(n=o-s),c=n;0<=c;c--){for(var f=!0,h=0;h<s;h++)if(l(t,c+h)!==l(e,h)){f=!1;break}if(f)return c}return-1}function m(t,e,n,r){return O(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function v(t,e,n,r){return O(function(t,e){for(var n,r,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,r=r%256,i.push(r),i.push(n);return i}(e,t.length-n),t,n,r)}function b(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,l,u=t[i],c=null,f=239<u?4:223<u?3:191<u?2:1;if(i+f<=n)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(a=t[i+1]))&&127<(l=(31&u)<<6|63&a)&&(c=l);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&2047<(l=(15&u)<<12|(63&a)<<6|63&o)&&(l<55296||57343<l)&&(c=l);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,f=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=x));return n}(r)}R.kMaxLength=e,(h.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=r,h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(t,e,n){return e=e,n=n,o(t=t),!(t<=0)&&void 0!==e?"string"==typeof n?i(t).fill(e,n):i(t).fill(e):i(t)},h.allocUnsafe=l,h.allocUnsafeSlow=l,h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(C(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),C(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var n=h.allocUnsafe(e),r=0,i=0;i<t.length;++i){var a=t[i];if(C(a,Uint8Array)&&(a=h.from(a)),!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?b(this,0,t):n.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=R.INSPECT_MAX_BYTES,t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim();return this.length>e&&(t+=" ... "),"<Buffer "+t+">"},h.prototype.compare=function(t,e,n,r,i){if(C(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+f(t));if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),l=this.slice(r,i),u=t.slice(e,n),c=0;c<s;++c)if(l[c]!==u[c]){a=l[c],o=u[c];break}return a<o?-1:o<a?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},h.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var a,o,s,l=!1;;)switch(r){case"hex":return function(t,e,n,r){n=Number(n)||0;var i=t.length-n;(!r||i<(r=Number(r)))&&(r=i),(i=e.length)/2<r&&(r=i/2);for(var a=0;a<r;++a){var o=parseInt(e.substr(2*a,2),16);if(P(o))return a;t[n+a]=o}return a}(this,t,e,n);case"utf8":case"utf-8":return o=e,s=n,O(S(t,(a=this).length-o),a,o,s);case"ascii":return m(this,t,e,n);case"latin1":case"binary":return m(this,t,e,n);case"base64":return a=this,o=e,s=n,O(E(t),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function _(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function w(t,e,n,r,i,a){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function k(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,i){return e=+e,n>>>=0,i||k(t,0,n,4),a.write(t,e,n,r,23,4),n+4}function T(t,e,n,r,i){return e=+e,n>>>=0,i||k(t,0,n,8),a.write(t,e,n,r,52,8),n+8}h.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t);e=this.subarray(t,e);return e.__proto__=h.prototype,e},h.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||_(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},h.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||_(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},h.prototype.readUInt8=function(t,e){return t>>>=0,e||_(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||_(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||_(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||_(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||_(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||_(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||_(t,e,this.length);for(var r=e,i=1,a=this[t+--r];0<r&&(i*=256);)a+=this[t+--r]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*e)),a},h.prototype.readInt8=function(t,e){return t>>>=0,e||_(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||_(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt16BE=function(t,e){t>>>=0,e||_(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||_(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||_(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||_(t,4,this.length),a.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||_(t,4,this.length),a.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||_(t,8,this.length),a.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||_(t,8,this.length),a.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||w(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||w(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;0<=--i&&(a*=256);)this[e+i]=t/a&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||w(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,a=1,o=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/a>>0)-o&255;return e+n},h.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||w(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,a=1,o=0;for(this[e+i]=255&t;0<=--i&&(a*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/a>>0)-o&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||w(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return T(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return T(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,r){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var a=i-1;0<=a;--a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},h.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===t.length&&(i=t.charCodeAt(0),("utf8"===r&&i<128||"latin1"===r)&&(t=i))}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(a=e;a<n;++a)this[a]=t;else{var o=h.isBuffer(t)?t:h.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var A=/[^+/0-9A-Za-z-_]/g;function S(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if(55295<(n=t.charCodeAt(o))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&a.push(239,191,189);continue}if(o+1===r){-1<(e-=3)&&a.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&a.push(239,191,189);if(i=null,n<128){if(--e<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function E(t){return s.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function O(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function C(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function P(t){return t!=t}}).call(this)}).call(this,L("buffer").Buffer)},{"base64-js":6,buffer:36,ieee754:197}],37:[function(t,e,n){"use strict";var c=t("./lib/monotone"),f=t("./lib/triangulation"),h=t("./lib/delaunay"),d=t("./lib/filter");function p(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function g(t,e){return t[0]-e[0]||t[1]-e[1]}function y(t,e,n){return e in t?t[e]:n}e.exports=function(t,e,n){e=Array.isArray(e)?(n=n||{},e||[]):(n=e||{},[]);var r=!!y(n,"delaunay",!0),i=!!y(n,"interior",!0),a=!!y(n,"exterior",!0),n=!!y(n,"infinity",!1);if(!i&&!a||0===t.length)return[];var o=c(t,e);{if(r||i!=a||n){for(var s=f(t.length,function(t){return t.map(p).sort(g)}(e)),l=0;l<o.length;++l){var u=o[l];s.addTriangle(u[0],u[1],u[2])}return r&&h(t,s),a?i?n?d(s,0,n):s.cells():d(s,1,n):d(s,-1)}return o}}},{"./lib/delaunay":38,"./lib/filter":39,"./lib/monotone":40,"./lib/triangulation":41}],38:[function(t,e,n){"use strict";var g=t("robust-in-sphere")[4];t("binary-search-bounds");function y(t,e,n,r,i,a){var o,s=e.opposite(r,i);s<0||(i<r&&(o=r,r=i,i=o,o=a,a=s,s=o),e.isConstraint(r,i)||g(t[r],t[i],t[a],t[s])<0&&n.push(r,i))}e.exports=function(t,e){for(var n=[],r=t.length,i=e.stars,a=0;a<r;++a)for(var o=i[a],s=1;s<o.length;s+=2){var l=o[s];if(!(l<a)&&!e.isConstraint(a,l)){for(var u=o[s-1],c=-1,f=1;f<o.length;f+=2)if(o[f-1]===l){c=o[f];break}c<0||g(t[a],t[l],t[u],t[c])<0&&n.push(a,l)}}for(;0<n.length;){for(var l=n.pop(),a=n.pop(),u=-1,c=-1,o=i[a],h=1;h<o.length;h+=2){var d=o[h-1],p=o[h];d===l?c=p:p===l&&(u=d)}u<0||c<0||0<=g(t[a],t[l],t[u],t[c])||(e.flip(a,l),y(t,e,n,u,a,c),y(t,e,n,a,c,u),y(t,e,n,c,l,u),y(t,e,n,l,u,c))}}},{"binary-search-bounds":25,"robust-in-sphere":631}],39:[function(t,e,n){"use strict";var o,s=t("binary-search-bounds");function b(t,e,n,r,i,a,o){this.cells=t,this.neighbor=e,this.flags=r,this.constraint=n,this.active=i,this.next=a,this.boundary=o}function x(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}e.exports=function(t,e,n){t=function(t,e){for(var n=t.cells(),r=n.length,i=0;i<r;++i){var a=(g=n[i])[0],o=g[1],s=g[2];o<s?o<a&&(g[0]=o,g[1]=s,g[2]=a):s<a&&(g[0]=s,g[1]=a,g[2]=o)}n.sort(x);for(var l=new Array(r),i=0;i<l.length;++i)l[i]=0;var u=[],c=[],f=new Array(3*r),h=new Array(3*r),d=null;e&&(d=[]);for(var p=new b(n,f,h,l,u,c,d),i=0;i<r;++i)for(var g=n[i],y=0;y<3;++y){var a=g[y],o=g[(y+1)%3],m=f[3*i+y]=p.locate(o,a,t.opposite(o,a)),v=h[3*i+y]=t.isConstraint(a,o);m<0&&(v?c.push(i):(u.push(i),l[i]=1),e&&d.push([o,a,-1]))}return p}(t,n);if(0===e)return n?t.cells.concat(t.boundary):t.cells;var r=1,i=t.active,a=t.next,o=t.flags,s=t.cells,l=t.constraint,u=t.neighbor;for(;0<i.length||0<a.length;){for(;0<i.length;){var c=i.pop();if(o[c]!==-r){o[c]=r;s[c];for(var f=0;f<3;++f){var h=u[3*c+f];0<=h&&0===o[h]&&(l[3*c+f]?a.push(h):(i.push(h),o[h]=r))}}}var d=a;a=i,i=d,a.length=0,r=-r}e=function(t,e,n){for(var r=0,i=0;i<t.length;++i)e[i]===n&&(t[r++]=t[i]);return t.length=r,t}(s,o,e);if(n)return e.concat(t.boundary);return e},b.prototype.locate=(o=[0,0,0],function(t,e,n){var r=t,i=e,a=n;return e<n?e<t&&(r=e,i=n,a=t):n<t&&(r=n,i=t,a=e),r<0?-1:(o[0]=r,o[1]=i,o[2]=a,s.eq(this.cells,o,x))})},{"binary-search-bounds":25}],40:[function(t,e,n){"use strict";var p=t("binary-search-bounds"),g=t("robust-orientation")[3],y=0;function m(t,e,n,r,i){this.a=t,this.b=e,this.idx=n,this.lowerIds=r,this.upperIds=i}function v(t,e,n,r){this.a=t,this.b=e,this.type=n,this.idx=r}function b(t,e){var n=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return n||(t.type!==y&&(n=g(t.a,t.b,e.b))?n:t.idx-e.idx)}function x(t,e){return g(t.a,t.b,e)}function _(t,e){var n=t.a[0]<e.a[0]?g(t.a,t.b,e.a):g(e.b,e.a,t.a);return(n=n||(e.b[0]<t.b[0]?g(t.a,t.b,e.b):g(e.b,e.a,t.b)))||t.idx-e.idx}e.exports=function(t,e){for(var n=t.length,r=e.length,i=[],a=0;a<n;++a)i.push(new v(t[a],null,y,a));for(a=0;a<r;++a){var o=e[a],s=t[o[0]],o=t[o[1]];s[0]<o[0]?i.push(new v(s,o,2,a),new v(o,s,1,a)):s[0]>o[0]&&i.push(new v(o,s,2,a),new v(s,o,1,a))}i.sort(b);for(var l=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),u=[new m([l,1],[l,0],-1,[],[])],c=[],a=0,f=i.length;a<f;++a){var h=i[a],d=h.type;d===y?function(t,e,n,r,i){for(var a=p.lt(e,r,x),o=p.gt(e,r,x),s=a;s<o;++s){for(var l=e[s],u=l.lowerIds,c=u.length;1<c&&0<g(n[u[c-2]],n[u[c-1]],r);)t.push([u[c-1],u[c-2],i]),--c;u.length=c,u.push(i);for(var f=l.upperIds,c=f.length;1<c&&g(n[f[c-2]],n[f[c-1]],r)<0;)t.push([f[c-2],f[c-1],i]),--c;f.length=c,f.push(i)}}(c,u,t,h.a,h.idx):(2===d?function(t,e){var n=p.le(t,e,_),r=t[n],i=r.upperIds,a=i[i.length-1];r.upperIds=[a],t.splice(n+1,0,new m(e.a,e.b,e.idx,[a],i))}:function(t,e){var n=e.a;e.a=e.b,e.b=n,n=p.eq(t,e,_),e=t[n],t[n-1].upperIds=e.upperIds,t.splice(n,1)})(u,h)}return c}},{"binary-search-bounds":25,"robust-orientation":633}],41:[function(t,e,n){"use strict";var r=t("binary-search-bounds");function i(t,e){this.stars=t,this.edges=e}e.exports=function(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=[];return new i(n,e)};var a,e=i.prototype;function o(t,e,n){for(var r=1,i=t.length;r<i;r+=2)if(t[r-1]===e&&t[r]===n)return t[r-1]=t[i-2],t[r]=t[i-1],void(t.length=i-2)}function s(t,e){return t[0]-e[0]||t[1]-e[1]}e.isConstraint=(a=[0,0],function(t,e){return a[0]=Math.min(t,e),a[1]=Math.max(t,e),0<=r.eq(this.edges,a,s)}),e.removeTriangle=function(t,e,n){var r=this.stars;o(r[t],e,n),o(r[e],n,t),o(r[n],t,e)},e.addTriangle=function(t,e,n){var r=this.stars;r[t].push(e,n),r[e].push(n,t),r[n].push(t,e)},e.opposite=function(t,e){for(var n=this.stars[e],r=1,i=n.length;r<i;r+=2)if(n[r]===t)return n[r-1];return-1},e.flip=function(t,e){var n=this.opposite(t,e),r=this.opposite(e,t);this.removeTriangle(t,e,n),this.removeTriangle(e,t,r),this.addTriangle(t,r,n),this.addTriangle(e,n,r)},e.edges=function(){for(var t=this.stars,e=[],n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length;a<o;a+=2)e.push([i[a],i[a+1]]);return e},e.cells=function(){for(var t=this.stars,e=[],n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length;a<o;a+=2){var s=i[a],l=i[a+1];n<Math.min(s,l)&&e.push([n,s,l])}return e}},{"binary-search-bounds":25}],42:[function(t,e,n){"use strict";e.exports=function(t,e,n){return e<n?t<e?e:n<t?n:t:t<n?n:e<t?e:t}},{}],43:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r;if(n){r=e;for(var i=new Array(e.length),a=0;a<e.length;++a){var o=e[a];i[a]=[o[0],o[1],n[a]]}e=i}var s=function(t,e,n){t=c(t,[],l(t));return m(e,t,n),!!t}(t,e,!!n);for(;function(t,e,n){var r=function(t,e){for(var n=new Array(e.length),r=0;r<e.length;++r){var i=e[r],a=t[i[0]],i=t[i[1]];n[r]=[p(Math.min(a[0],i[0]),-1/0),p(Math.min(a[1],i[1]),-1/0),p(Math.max(a[0],i[0]),1/0),p(Math.max(a[1],i[1]),1/0)]}return n}(t,e),i=function(o,s,t){var l=[];return d(t,function(t,e){var n,r,i=s[t],a=s[e];i[0]!==a[0]&&i[0]!==a[1]&&i[1]!==a[0]&&i[1]!==a[1]&&(n=o[i[0]],r=o[i[1]],i=o[a[0]],a=o[a[1]],u(n,r,i,a)&&l.push([t,e]))}),l}(t,e,r),a=l(t),o=function(a,o,t,e){var s=[];return d(t,e,function(t,e){var n,r,i=o[t];i[0]!==e&&i[1]!==e&&(n=a[e],r=a[i[0]],i=a[i[1]],u(r,i,n,n)&&s.push([t,e]))}),s}(t,e,r,a),r=function(t,e,n,r,i){var a,o,s,l=t.map(function(t){return[x(t[0]),x(t[1])]});for(a=0;a<n.length;++a){var u=n[a];o=u[0];var c=u[1],f=e[o],u=e[c],f=M(k(t[f[0]]),k(t[f[1]]),k(t[u[0]]),k(t[u[1]]));f&&(u=t.length,t.push([w(f[0]),w(f[1])]),l.push(f),r.push([o,u],[c,u]))}for(r.sort(function(t,e){if(t[0]!==e[0])return t[0]-e[0];t=l[t[1]],e=l[e[1]];return _(t[0],e[0])||_(t[1],e[1])}),a=r.length-1;0<=a;--a){var h=r[a];o=h[0];var d=e[o],p=d[0],g=d[1],y=t[p],m=t[g];(y[0]-m[0]||y[1]-m[1])<0&&(m=p,p=g,g=m),d[0]=p;var v=d[1]=h[1];for(i&&(s=d[2]);0<a&&r[a-1][0]===o;){var b=(h=r[--a])[1];i?e.push([v,b,s]):e.push([v,b]),v=b}i?e.push([v,g,s]):e.push([v,g])}return l}(t,e,i,o,n),a=c(t,r);return m(e,a,n),!!a||(0<i.length||0<o.length)}(t,e,!!n);)s=!0;if(n&&s){r.length=0;for(a=n.length=0;a<e.length;++a){o=e[a];r.push([o[0],o[1]]),n.push(o[2])}}return s};var h=t("union-find"),d=t("box-intersect"),u=t("robust-segment-intersect"),x=t("big-rat"),_=t("big-rat/cmp"),w=t("big-rat/to-float"),k=t("rat-vec"),p=t("nextafter"),M=t("./lib/rat-seg-intersect");function g(t){t=w(t);return[p(t,-1/0),p(t,1/0)]}function l(t){for(var e=new Array(t.length),n=0;n<t.length;++n){var r=t[n];e[n]=[p(r[0],-1/0),p(r[1],-1/0),p(r[0],1/0),p(r[1],1/0)]}return e}function c(t,e){for(var n=e.length,r=new h(n),i=[],a=0;a<e.length;++a){var o=e[a],s=g(o[0]),o=g(o[1]);i.push([p(s[0],-1/0),p(o[0],-1/0),p(s[1],1/0),p(o[1],1/0)])}d(i,function(t,e){r.link(t,e)});for(var l=!0,u=new Array(n),a=0;a<n;++a)(c=r.find(a))!==a&&(l=!1,t[c]=[Math.min(t[a][0],t[c][0]),Math.min(t[a][1],t[c][1])]);if(l)return null;for(var c,f=0,a=0;a<n;++a)(c=r.find(a))===a?(u[a]=f,t[f++]=t[a]):u[a]=-1;t.length=f;for(a=0;a<n;++a)u[a]<0&&(u[a]=u[r.find(a)]);return u}function f(t,e){return t[0]-e[0]||t[1]-e[1]}function y(t,e){var n=t[0]-e[0]||t[1]-e[1];return n||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function m(t,e,n){if(0!==t.length){if(e)for(var r=0;r<t.length;++r){var i=e[(o=t[r])[0]],a=e[o[1]];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}else for(r=0;r<t.length;++r){var o,i=(o=t[r])[0],a=o[1];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}n?t.sort(y):t.sort(f);for(var s=1,r=1;r<t.length;++r){var l=t[r-1],u=t[r];(u[0]!==l[0]||u[1]!==l[1]||n&&u[2]!==l[2])&&(t[s++]=u)}t.length=s}}},{"./lib/rat-seg-intersect":44,"big-rat":12,"big-rat/cmp":10,"big-rat/to-float":24,"box-intersect":28,nextafter:255,"rat-vec":622,"robust-segment-intersect":636,"union-find":658}],44:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=s(e,t),e=s(r,n),r=c(i,e);if(0===o(r))return null;n=s(t,n),n=c(e,n),r=a(n,r),r=u(i,r);return l(t,r)};var r=t("big-rat/mul"),a=t("big-rat/div"),i=t("big-rat/sub"),o=t("big-rat/sign"),s=t("rat-vec/sub"),l=t("rat-vec/add"),u=t("rat-vec/muls");function c(t,e){return i(r(t[0],e[1]),r(t[1],e[0]))}},{"big-rat/div":11,"big-rat/mul":21,"big-rat/sign":22,"big-rat/sub":23,"rat-vec/add":621,"rat-vec/muls":623,"rat-vec/sub":624}],45:[function(t,e,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],46:[function(t,e,n){"use strict";t=t("./rgb");e.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,n,r,i,a,o=t[0]/360,s=t[1]/100,t=t[2]/100;if(0==s)return[a=255*t,a,a];e=2*t-(n=t<.5?t*(1+s):t+s-t*s),i=[0,0,0];for(var l=0;l<3;l++)(r=o+1/3*-(l-1))<0?r++:1<r&&r--,a=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[l]=255*a;return i}},t.hsl=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.min(n,r,i),o=Math.max(n,r,i),t=o-a;return o===a?e=0:n===o?e=(r-i)/t:r===o?e=2+(i-n)/t:i===o&&(e=4+(n-r)/t),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+o)/2,[e,100*(o===a?0:r<=.5?t/(o+a):t/(2-o-a)),100*r]}},{"./rgb":47}],47:[function(t,e,n){"use strict";e.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],48:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.exports=(r(e={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}]},"cool",[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}]),r(e,"rainbow-soft",[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}]),r(e,"bathymetry",[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}]),r(e,"cdom",[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}]),r(e,"chlorophyll",[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}]),r(e,"density",[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}]),r(e,"freesurface-blue",[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}]),r(e,"freesurface-red",[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}]),r(e,"oxygen",[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}]),r(e,"par",[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}]),r(e,"phase",[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}]),r(e,"salinity",[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}]),r(e,"temperature",[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}]),r(e,"turbidity",[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}]),r(e,"velocity-blue",[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}]),r(e,"velocity-green",[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}]),r(e,"cubehelix",[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]),e)},{}],49:[function(t,e,n){"use strict";var g=t("./colorScale"),y=t("lerp");function m(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function v(t){for(var e,n="#",r=0;r<3;++r)n+=("00"+(e=(e=t[r]).toString(16))).substr(e.length);return n}function b(t){return"rgba("+t.join(",")+")"}e.exports=function(t){var e,n,r,i,a,o,s,l,u,c;t=t||{};l=(t.nshades||72)-1,s=t.format||"hex",(o=t.colormap)||(o="jet");if("string"==typeof o){if(o=o.toLowerCase(),!g[o])throw Error(o+" not a supported colorscale");a=g[o]}else{if(!Array.isArray(o))throw Error("unsupported colormap option",o);a=o.slice()}if(a.length>1+l)throw new Error(o+" map requires nshades to be at least size "+a.length);u=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1];e=a.map(function(t){return Math.round(t.index*l)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var f=a.map(function(t,e){var n=a[e].index,e=a[e].rgb.slice();return 4===e.length&&0<=e[3]&&e[3]<=1||(e[3]=u[0]+(u[1]-u[0])*n),e}),h=[];for(c=0;c<e.length-1;++c){i=e[c+1]-e[c],n=f[c],r=f[c+1];for(var d=0;d<i;d++){var p=d/i;h.push([Math.round(y(n[0],r[0],p)),Math.round(y(n[1],r[1],p)),Math.round(y(n[2],r[2],p)),y(n[3],r[3],p)])}}h.push(a[a.length-1].rgb.concat(u[1])),"hex"===s?h=h.map(v):"rgbaString"===s?h=h.map(b):"float"===s&&(h=h.map(m));return h}},{"./colorScale":48,lerp:207}],50:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=s(e,n,r);if(0===i){var a=l(s(t,e,n)),o=l(s(t,e,r));if(a!==o)return 0===o?0<a||c(t,e,r)?-1:1:0===a?0<o||c(t,e,n)?1:-1:l(o-a);if(0!==a)return 0;o=c(t,e,n),a=c(t,e,r);return o===a?0:o?1:-1}o=s(t,e,n);return 0<o?0<i&&0<s(t,e,r)?1:-1:o<0?0<i||0<s(t,e,r)?1:-1:0<s(t,e,r)||c(t,e,n)?1:-1};var s=t("robust-orientation"),l=t("signum"),a=t("two-sum"),o=t("robust-product"),u=t("robust-sum");function c(t,e,n){var r=a(t[0],-e[0]),i=a(t[1],-e[1]),t=a(n[0],-e[0]),e=a(n[1],-e[1]),e=u(o(r,t),o(i,e));return 0<=e[e.length-1]}},{"robust-orientation":633,"robust-product":634,"robust-sum":638,signum:51,"two-sum":656}],51:[function(t,e,n){"use strict";e.exports=function(t){return t<0?-1:0<t?1:0}},{}],52:[function(t,e,n){"use strict";var r=t("./lib/ch1d"),i=t("./lib/ch2d"),a=t("./lib/chnd");e.exports=function(t){var e=t.length;{if(0===e)return[];if(1===e)return[[0]]}e=t[0].length;{if(0===e)return[];if(1===e)return r(t);if(2===e)return i(t)}return a(t,e)}},{"./lib/ch1d":53,"./lib/ch2d":54,"./lib/chnd":55}],53:[function(t,e,n){"use strict";e.exports=function(t){for(var e=0,n=0,r=1;r<t.length;++r)t[r][0]<t[e][0]&&(e=r),t[r][0]>t[n][0]&&(n=r);return e<n?[[e],[n]]:n<e?[[n],[e]]:[[e]]}},{}],54:[function(t,e,n){"use strict";e.exports=function(t){var e=s(t),n=e.length;if(n<=2)return[];for(var r=new Array(n),i=e[n-1],a=0;a<n;++a){var o=e[a];r[a]=[i,o],i=o}return r};var s=t("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":245}],55:[function(t,e,n){"use strict";e.exports=function(e,n){try{return i(e,!0)}catch(t){var r=a(e);if(r.length<=n)return[];n=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<e.length;++i)r[i]=t[e[i]];for(var a=e.length,i=0;i<n;++i)e.indexOf(i)<0&&(r[a++]=t[i]);return r}(e,r);return function(t,e){for(var n=t.length,r=e.length,i=0;i<n;++i)for(var a=t[i],o=0;o<a.length;++o){var s=a[o];if(s<r)a[o]=e[s];else{s-=r;for(var l=0;l<r;++l)s>=e[l]&&(s+=1);a[o]=s}}return t}(i(n,!0),r)}};var i=t("incremental-convex-hull"),a=t("affine-hull")},{"affine-hull":4,"incremental-convex-hull":198}],56:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,a){var o=i-1,s=i*i,l=o*o,u=(1+2*i)*l,c=i*l,f=s*(3-2*i),h=s*o;if(t.length){a=a||new Array(t.length);for(var d=t.length-1;0<=d;--d)a[d]=u*t[d]+c*e[d]+f*n[d]+h*r[d];return a}return u*t+c*e+f*n+h*r},e.exports.derivative=function(t,e,n,r,i,a){var o=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,u=3*i*i-2*i;if(t.length){a=a||new Array(t.length);for(var c=t.length-1;0<=c;--c)a[c]=o*t[c]+s*e[c]+l*n[c]+u*r[c];return a}return o*t+s*e+l*n[c]+u*r}},{}],57:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./lib/thunk.js");function s(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}e.exports=function(t){var e=new s;e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var r=0;r<n.length;++r){var i=n[r];if("array"===i||"object"===a(i)&&i.blockIndices){if(e.argTypes[r]="array",e.arrayArgs.push(r),e.arrayBlockIndices.push(i.blockIndices||0),e.shimArgs.push("array"+r),r<e.pre.args.length&&0<e.pre.args[r].count)throw new Error("cwise: pre() block may not reference array args");if(r<e.post.args.length&&0<e.post.args[r].count)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)e.scalarArgs.push(r),e.shimArgs.push("scalar"+r);else if("index"===i){if(e.indexArgs.push(r),r<e.pre.args.length&&0<e.pre.args[r].count)throw new Error("cwise: pre() block may not reference array index");if(r<e.body.args.length&&e.body.args[r].lvalue)throw new Error("cwise: body() block may not write to array index");if(r<e.post.args.length&&0<e.post.args[r].count)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(e.shapeArgs.push(r),r<e.pre.args.length&&e.pre.args[r].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(r<e.body.args.length&&e.body.args[r].lvalue)throw new Error("cwise: body() block may not write to array shape");if(r<e.post.args.length&&e.post.args[r].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==a(i)||!i.offset)throw new Error("cwise: Unknown argument type "+n[r]);e.argTypes[r]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(r)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,o(e)}},{"./lib/thunk.js":59}],58:[function(t,e,n){"use strict";var _=t("uniq");function w(t,e,n){for(var r,i=t.length,a=e.arrayArgs.length,o=0<e.indexArgs.length,s=[],l=[],u=0,c=0,f=0;f<i;++f)l.push(["i",f,"=0"].join(""));for(r=0;r<a;++r)for(f=0;f<i;++f)c=u,u=t[f],0===f?l.push(["d",r,"s",f,"=t",r,"p",u].join("")):l.push(["d",r,"s",f,"=(t",r,"p",u,"-s",c,"*t",r,"p",c,")"].join(""));for(0<l.length&&s.push("var "+l.join(",")),f=i-1;0<=f;--f)u=t[f],s.push(["for(i",f,"=0;i",f,"<s",u,";++i",f,"){"].join(""));for(s.push(n),f=0;f<i;++f){for(c=u,u=t[f],r=0;r<a;++r)s.push(["p",r,"+=d",r,"s",f].join(""));o&&(0<f&&s.push(["index[",c,"]-=s",c].join("")),s.push(["++index[",u,"]"].join(""))),s.push("}")}return s.join("\n")}function k(t,e,n){for(var r=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o),c=e.offsetArgs[f].array,u="+q"+f;case"array":u="p"+c+u;var h="l"+o,f="a"+c;if(0===e.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(i.push(["var ",h,"=",f,".get(",u,")"].join("")),r=r.replace(l,h),a.push([f,".set(",u,",",h,")"].join(""))):r=r.replace(l,[f,".get(",u,")"].join("")):r=r.replace(l,[f,"[",u,"]"].join("")):"generic"===n[c]?(i.push(["var ",h,"=",f,".get(",u,")"].join("")),r=r.replace(l,h),s.lvalue&&a.push([f,".set(",u,",",h,")"].join(""))):(i.push(["var ",h,"=",f,"[",u,"]"].join("")),r=r.replace(l,h),s.lvalue&&a.push([f,"[",u,"]=",h].join("")));else{for(var d=[s.name],p=[u],g=0;g<Math.abs(e.arrayBlockIndices[c]);g++)d.push("\\s*\\[([^\\]]+)\\]"),p.push("$"+(g+1)+"*t"+c+"b"+g);if(l=new RegExp(d.join(""),"g"),u=p.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[f,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[i.join("\n"),r,a.join("\n")].join("\n").trim()}e.exports=function(t,e){for(var n=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,r=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],r[a]=e[2*a+1];for(var o=[],s=[],l=[],u=[],c=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),u.push(n),o.push(n),s.push(n+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),u.push(t.arrayBlockIndices[a]+n),o.push(0),s.push(t.arrayBlockIndices[a]));for(var f=[],h=0;h<r[a].length;h++)l[a]<=r[a][h]&&r[a][h]<u[a]&&f.push(r[a][h]-l[a]);c.push(f)}for(var d=["SS"],p=["'use strict'"],g=[],h=0;h<n;++h)g.push(["s",h,"=SS[",h,"]"].join(""));for(a=0;a<t.arrayArgs.length;++a){d.push("a"+a),d.push("t"+a),d.push("p"+a);for(h=0;h<n;++h)g.push(["t",a,"p",h,"=t",a,"[",l[a]+h,"]"].join(""));for(h=0;h<Math.abs(t.arrayBlockIndices[a]);++h)g.push(["t",a,"b",h,"=t",a,"[",o[a]+h,"]"].join(""))}for(a=0;a<t.scalarArgs.length;++a)d.push("Y"+a);if(0<t.shapeArgs.length&&g.push("shape=SS.slice(0)"),0<t.indexArgs.length){for(var y=new Array(n),a=0;a<n;++a)y[a]="0";g.push(["index=[",y.join(","),"]"].join(""))}for(a=0;a<t.offsetArgs.length;++a){for(var m=t.offsetArgs[a],v=[],h=0;h<m.offset.length;++h)0!==m.offset[h]&&(1===m.offset[h]?v.push(["t",m.array,"p",h].join("")):v.push([m.offset[h],"*t",m.array,"p",h].join("")));0===v.length?g.push("q"+a+"=0"):g.push(["q",a,"=",v.join("+")].join(""))}var b=_([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for(0<(g=g.concat(b)).length&&p.push("var "+g.join(",")),a=0;a<t.arrayArgs.length;++a)p.push("p"+a+"|=0");3<t.pre.body.length&&p.push(k(t.pre,t,i));var x=k(t.body,t,i);return(b=function(t){for(var e=0,n=t[0].length;e<n;){for(var r=1;r<t.length;++r)if(t[r][e]!==t[0][e])return e;++e}return e}(c))<n?p.push(function(t,e,n,r){for(var i=e.length,a=n.arrayArgs.length,o=n.blockSize,s=0<n.indexArgs.length,l=[],u=0;u<a;++u)l.push(["var offset",u,"=p",u].join(""));for(u=t;u<i;++u)l.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),l.push(["if(j",u,"<",o,"){"].join("")),l.push(["s",e[u],"=j",u].join("")),l.push(["j",u,"=0"].join("")),l.push(["}else{s",e[u],"=",o].join("")),l.push(["j",u,"-=",o,"}"].join("")),s&&l.push(["index[",e[u],"]=j",u].join(""));for(u=0;u<a;++u){for(var c=["offset"+u],f=t;f<i;++f)c.push(["j",f,"*t",u,"p",e[f]].join(""));l.push(["p",u,"=(",c.join("+"),")"].join(""))}for(l.push(w(e,n,r)),u=t;u<i;++u)l.push("}");return l.join("\n")}(b,c[0],t,x)):p.push(w(c[0],t,x)),3<t.post.body.length&&p.push(k(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+p.join("\n")+"\n----------"),b=[t.funcName||"unnamed","_cwise_loop_",r[0].join("s"),"m",b,function(t){for(var e=new Array(t.length),n=!0,r=0;r<t.length;++r){var i=t[r],a=(a=i.match(/\d+/))?a[0]:"";0===i.charAt(0)?e[r]="u"+i.charAt(1)+a:e[r]=i.charAt(0)+a,0<r&&(n=n&&e[r]===e[r-1])}return n?e[0]:e.join("")}(i)].join(""),new Function(["function ",b,"(",d.join(","),"){",p.join("\n"),"} return ",b].join(""))()}},{uniq:659}],59:[function(t,e,n){"use strict";var f=t("./compile.js");e.exports=function(t){var e=["'use strict'","var CACHED={}"],n=[],r=t.funcName+"_cwise_thunk";e.push(["return function ",r,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],u=0;u<t.arrayArgs.length;++u){var c=t.arrayArgs[u];n.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),0<u&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[u]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[u])+"]"))}for(1<t.arrayArgs.length&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),u=0;u<t.scalarArgs.length;++u)o.push("scalar"+t.scalarArgs[u]);return n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(f.bind(void 0,t))}},{"./compile.js":58}],60:[function(t,e,n){"use strict";function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){var l=regeneratorRuntime.mark(o),i=regeneratorRuntime.mark(I);function h(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function e(n){var r,i=n,a=n;function o(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;a(t[i],e)<0?n=1+i:r=i}return n}return 1===n.length&&(i=function(t,e){return n(t)-e},r=n,a=function(t,e){return h(r(t),e)}),{left:o,center:function(t,e,n,r){return null==n&&(n=0),null==r&&(r=t.length),r=o(t,e,n,r-1),n<r&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;0<a(t[i],e)?r=i:n=1+i}return n}}}function a(t){return null===t?NaN:+t}function o(e,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n){t.next=21;break}r=Q(e),t.prev=2,r.s();case 4:if((i=r.n()).done){t.next=11;break}if(null!=(s=i.value)&&(s=+s)>=s)return t.next=9,s;t.next=9;break;case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),r.e(t.t0);case 16:return t.prev=16,r.f(),t.finish(16);case 19:t.next=40;break;case 21:a=-1,o=Q(e),t.prev=23,o.s();case 25:if((s=o.n()).done){t.next=32;break}if(s=s.value,null!=(s=n(s,++a,e))&&(s=+s)>=s)return t.next=30,s;t.next=30;break;case 30:t.next=25;break;case 32:t.next=37;break;case 34:t.prev=34,t.t1=t.catch(23),o.e(t.t1);case 37:return t.prev=37,o.f(),t.finish(37);case 40:case"end":return t.stop()}},l,null,[[2,13,16,19],[23,34,37,40]])}var n=e(h),m=n.right,r=n.left,s=e(a).center;function u(t,e){var n=0;if(void 0===e){var r=Q(t);try{for(r.s();!(i=r.n()).done;){var i=i.value;null!=i&&(i=+i)>=i&&++n}}catch(t){r.e(t)}finally{r.f()}}else{var a=-1,o=Q(t);try{for(o.s();!(s=o.n()).done;){var s=s.value;null!=(s=e(s,++a,t))&&(s=+s)>=s&&++n}}catch(t){o.e(t)}finally{o.f()}}return n}function c(t){return 0|t.length}function f(t){return!(0<t)}function d(t){return"object"!==$(t)||"length"in t?t:Array.from(t)}function p(t,e){var n,r=0,i=0,a=0;if(void 0===e){var o=Q(t);try{for(o.s();!(s=o.n()).done;){var s=s.value;null!=s&&(s=+s)>=s&&(a+=(n=s-i)*(s-(i+=n/++r)))}}catch(t){o.e(t)}finally{o.f()}}else{var l=-1,u=Q(t);try{for(u.s();!(c=u.n()).done;){var c=c.value;null!=(c=e(c,++l,t))&&(c=+c)>=c&&(a+=(n=c-i)*(c-(i+=n/++r)))}}catch(t){u.e(t)}finally{u.f()}}if(1<r)return a/(r-1)}function g(t,e){e=p(t,e);return e&&Math.sqrt(e)}function v(t,e){var n,r;if(void 0===e){var i=Q(t);try{for(i.s();!(a=i.n()).done;){var a=a.value;null!=a&&(void 0===n?a<=a&&(n=r=a):(a<n&&(n=a),r<a&&(r=a)))}}catch(t){i.e(t)}finally{i.f()}}else{var o=-1,s=Q(t);try{for(s.s();!(l=s.n()).done;){var l=l.value;null!=(l=e(l,++o,t))&&(void 0===n?l<=l&&(n=r=l):(l<n&&(n=l),r<l&&(r=l)))}}catch(t){s.e(t)}finally{s.f()}}return[n,r]}var y=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._partials=new Float64Array(32),this._n=0}var t,n,r;return t=e,(n=[{key:"add",value:function(t){for(var e=this._partials,n=0,r=0;r<this._n&&r<32;r++){var i=e[r],a=t+i,i=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);i&&(e[n++]=i),t=a}return e[n]=t,this._n=n+1,this}},{key:"valueOf",value:function(){var t,e,n,r=this._partials,i=this._n,a=0;if(0<i){for(a=r[--i];0<i&&(t=a,!(n=(e=r[--i])-((a=t+e)-t))););0<i&&(n<0&&r[i-1]<0||0<n&&0<r[i-1])&&(e=2*n)==(t=a+e)-a&&(a=t)}return a}}])&&Z(t.prototype,n),r&&Z(t,r),e}();function b(t){return t}function x(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function _(t,d,p,g){return function t(e,n){if(n>=g.length)return p(e);var r=new Map,i=g[n++],a=-1,o=Q(e);try{for(o.s();!(u=o.n()).done;){var s=u.value,l=i(s,++a,e),u=r.get(l);u?u.push(s):r.set(l,[s])}}catch(t){o.e(t)}finally{o.f()}var c=Q(r);try{for(c.s();!(h=c.n()).done;){var f=W(h.value,2),h=f[0],f=f[1];r.set(h,t(f,n))}}catch(t){c.e(t)}finally{c.f()}return d(r)}(t,0)}var w=Array.prototype.slice;function k(t){return function(){return t}}var M=Math.sqrt(50),T=Math.sqrt(10),A=Math.sqrt(2);function S(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&0<n)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=E(t,e,n))||!isFinite(o))return[];if(0<o)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(o=-o,t=Math.ceil(t*o),e=Math.floor(e*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)/o;return r&&a.reverse(),a}function E(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(M<=t?10:T<=t?5:A<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(M<=t?10:T<=t?5:A<=t?2:1)}function O(t,e,n){for(var r;;){var i=E(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];0<i?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function C(t){return Math.ceil(Math.log(u(t))/Math.LN2)+1}function P(){var p=b,g=v,y=C;function e(t){Array.isArray(t)||(t=Array.from(t));for(var e,n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=p(t[i],i,t);var a,o,s=g(r),l=s[0],u=s[1],c=y(r,l,u);Array.isArray(c)||(a=u,o=+c,g===v&&(l=(s=W(O(l,u,o),2))[0],u=s[1]),(c=S(l,u,o))[c.length-1]>=u&&(u<=a&&g===v?(o=E(l,u,o),isFinite(o)&&(0<o?u=(Math.floor(u/o)+1)*o:o<0&&(u=(Math.ceil(u*-o)+1)/-o))):c.pop()));for(var f=c.length;c[0]<=l;)c.shift(),--f;for(;c[f-1]>u;)c.pop(),--f;var h,d=new Array(f+1);for(i=0;i<=f;++i)(h=d[i]=[]).x0=0<i?c[i-1]:l,h.x1=i<f?c[i]:u;for(i=0;i<n;++i)l<=(e=r[i])&&e<=u&&d[m(c,e,0,f)].push(t[i]);return d}return e.value=function(t){return arguments.length?(p="function"==typeof t?t:k(t),e):p},e.domain=function(t){return arguments.length?(g="function"==typeof t?t:k([t[0],t[1]]),e):g},e.thresholds=function(t){return arguments.length?(y="function"==typeof t?t:Array.isArray(t)?k(w.call(t)):k(t),e):y},e}function L(t,e){var n;if(void 0===e){var r=Q(t);try{for(r.s();!(i=r.n()).done;){var i=i.value;null!=i&&(n<i||void 0===n&&i<=i)&&(n=i)}}catch(t){r.e(t)}finally{r.f()}}else{var a=-1,o=Q(t);try{for(o.s();!(s=o.n()).done;){var s=s.value;null!=(s=e(s,++a,t))&&(n<s||void 0===n&&s<=s)&&(n=s)}}catch(t){o.e(t)}finally{o.f()}}return n}function R(t,e){var n;if(void 0===e){var r=Q(t);try{for(r.s();!(i=r.n()).done;){var i=i.value;null!=i&&(i<n||void 0===n&&i<=i)&&(n=i)}}catch(t){r.e(t)}finally{r.f()}}else{var a=-1,o=Q(t);try{for(o.s();!(s=o.n()).done;){var s=s.value;null!=(s=e(s,++a,t))&&(s<n||void 0===n&&s<=s)&&(n=s)}}catch(t){o.e(t)}finally{o.f()}}return n}function j(t,e){for(var n,r,i,a,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length-1,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:h;o<s;){600<s-o&&(n=s-o+1,r=e-o+1,a=Math.log(n),i=.5*Math.exp(2*a/3),a=.5*Math.sqrt(a*i*(n-i)/n)*(r-n/2<0?-1:1),j(t,e,Math.max(o,Math.floor(e-r*i/n+a)),Math.min(s,Math.floor(e+(n-r)*i/n+a)),l));var u=t[e],c=o,f=s;for(N(t,o,e),0<l(t[s],u)&&N(t,o,s);c<f;){for(N(t,c,f),++c,--f;l(t[c],u)<0;)++c;for(;0<l(t[f],u);)--f}0===l(t[o],u)?N(t,o,f):N(t,++f,s),f<=e&&(o=f+1),e<=f&&(s=f-1)}return t}function N(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function D(t,e,n){if(r=(t=Float64Array.from(o(t,n))).length){if((e=+e)<=0||r<2)return R(t);if(1<=e)return L(t);var n=(r-1)*e,r=Math.floor(n),e=L(j(t,r).subarray(0,r+1));return e+(R(t.subarray(r+1))-e)*(n-r)}}function z(t,e){var n,r=-1,i=-1;if(void 0===e){var a=Q(t);try{for(a.s();!(o=a.n()).done;){var o=o.value;++i,null!=o&&(n<o||void 0===n&&o<=o)&&(n=o,r=i)}}catch(t){a.e(t)}finally{a.f()}}else{var s=Q(t);try{for(s.s();!(l=s.n()).done;){var l=l.value;null!=(l=e(l,++i,t))&&(n<l||void 0===n&&l<=l)&&(n=l,r=i)}}catch(t){s.e(t)}finally{s.f()}}return r}function I(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=Q(e),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=8;break}return r=r.value,t.delegateYield(r,"t0",6);case 6:t.next=3;break;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(1),n.e(t.t1);case 13:return t.prev=13,n.f(),t.finish(13);case 16:case"end":return t.stop()}},i,null,[[1,10,13,16]])}function F(t,e){var n,r=-1,i=-1;if(void 0===e){var a=Q(t);try{for(a.s();!(o=a.n()).done;){var o=o.value;++i,null!=o&&(o<n||void 0===n&&o<=o)&&(n=o,r=i)}}catch(t){a.e(t)}finally{a.f()}}else{var s=Q(t);try{for(s.s();!(l=s.n()).done;){var l=l.value;null!=(l=e(l,++i,t))&&(l<n||void 0===n&&l<=l)&&(n=l,r=i)}}catch(t){s.e(t)}finally{s.f()}}return r}function B(t,e){return[t,e]}function U(e,t){return Array.from(t,function(t){return e[t]})}function V(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h;if(1===n.length)return F(t,n);var r=-1,i=-1,a=Q(t);try{for(a.s();!(o=a.n()).done;){var o=o.value;++i,(r<0?0===n(o,o):n(o,e)<0)&&(e=o,r=i)}}catch(t){a.e(t)}finally{a.f()}return r}n=H(Math.random);function H(s){return function(t,e,n){for(var r=1<arguments.length&&void 0!==e?e:0,i=(2<arguments.length&&void 0!==n?n:t.length)-(r=+r);i;){var a=s()*i--|0,o=t[i+r];t[i+r]=t[a+r],t[a+r]=o}return t}}function q(t){if(!(i=t.length))return[];for(var e=-1,n=R(t,G),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r}function G(t){return t.length}function Y(t){return t instanceof Set?t:new Set(t)}function X(t,e){var n,r=t[Symbol.iterator](),i=new Set,a=Q(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(!i.has(o))for(var s,l,u;s=(u=r.next()).value,l=u.done,u;){if(l)return!1;if(i.add(s),Object.is(o,s))break}}}catch(t){a.e(t)}finally{a.f()}return!0}t.Adder=y,t.ascending=h,t.bin=P,t.bisect=m,t.bisectCenter=s,t.bisectLeft=r,t.bisectRight=m,t.bisector=e,t.count=u,t.cross=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r,i="function"==typeof n[n.length-1]&&(r=n.pop(),function(t){return r.apply(void 0,K(t))}),a=(n=n.map(d)).map(c),o=n.length-1,s=new Array(1+o).fill(0),l=[];if(o<0||a.some(f))return l;for(;;){l.push(s.map(function(t,e){return n[e][t]}));for(var u=o;++s[u]===a[u];){if(0===u)return i?l.map(i):l;s[u--]=0}}},t.cumsum=function(e,n){var r=0,i=0;return Float64Array.from(e,void 0===n?function(t){return r+=+t||0}:function(t){return r+=+n(t,i++,e)||0})},t.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},t.deviation=g,t.difference=function(t){t=new Set(t);for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=Q(a[i]);try{for(o.s();!(s=o.n()).done;){var s=s.value;t.delete(s)}}catch(t){o.e(t)}finally{o.f()}}return t},t.disjoint=function(t,e){var n,r,i,a,o=e[Symbol.iterator](),s=new Set,l=Q(t);try{for(l.s();!(n=l.n()).done;){var u=n.value;if(s.has(u))return!1;for(;r=(a=o.next()).value,i=a.done,a;){if(i)break;if(Object.is(u,r))return!1;s.add(r)}}}catch(t){l.e(t)}finally{l.f()}return!0},t.every=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");var n,r=-1,i=Q(t);try{for(i.s();!(n=i.n()).done;)if(!e(n.value,++r,t))return!1}catch(t){i.e(t)}finally{i.f()}return!0},t.extent=v,t.filter=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");var n=[],r=-1,i=Q(t);try{for(i.s();!(a=i.n()).done;){var a=a.value;e(a,++r,t)&&n.push(a)}}catch(t){i.e(t)}finally{i.f()}return n},t.fsum=function(t,e){var n=new y;if(void 0===e){var r=Q(t);try{for(r.s();!(i=r.n()).done;){var i=i.value;(i=+i)&&n.add(i)}}catch(t){r.e(t)}finally{r.f()}}else{var a=-1,o=Q(t);try{for(o.s();!(s=o.n()).done;){var s=s.value;(s=+e(s,++a,t))&&n.add(s)}}catch(t){o.e(t)}finally{o.f()}}return+n},t.greatest=function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,r=!1;if(1===n.length){var i,a=Q(t);try{for(a.s();!(s=a.n()).done;){var o=s.value,s=n(o);(r?0<h(s,i):0===h(s,s))&&(e=o,i=s,r=!0)}}catch(t){a.e(t)}finally{a.f()}}else{var l=Q(t);try{for(l.s();!(u=l.n()).done;){var u=u.value;(r?0<n(u,e):0===n(u,u))&&(e=u,r=!0)}}catch(t){l.e(t)}finally{l.f()}}return e},t.greatestIndex=function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h;if(1===n.length)return z(t,n);var r=-1,i=-1,a=Q(t);try{for(a.s();!(o=a.n()).done;){var o=o.value;++i,(r<0?0===n(o,o):0<n(o,e))&&(e=o,r=i)}}catch(t){a.e(t)}finally{a.f()}return r},t.group=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _(t,b,b,n)},t.groups=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _(t,Array.from,b,n)},t.histogram=P,t.index=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _(t,b,x,n)},t.indexes=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _(t,Array.from,x,n)},t.intersection=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t=new Set(t),n=n.map(Y);var i,a=Q(t);try{t:for(a.s();!(i=a.n()).done;){var o,s=i.value,l=Q(n);try{for(l.s();!(o=l.n()).done;)if(!o.value.has(s)){t.delete(s);continue t}}catch(t){l.e(t)}finally{l.f()}}}catch(t){a.e(t)}finally{a.f()}return t},t.least=function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,r=!1;if(1===n.length){var i,a=Q(t);try{for(a.s();!(s=a.n()).done;){var o=s.value,s=n(o);(r?h(s,i)<0:0===h(s,s))&&(e=o,i=s,r=!0)}}catch(t){a.e(t)}finally{a.f()}}else{var l=Q(t);try{for(l.s();!(u=l.n()).done;){var u=u.value;(r?n(u,e)<0:0===n(u,u))&&(e=u,r=!0)}}catch(t){l.e(t)}finally{l.f()}}return e},t.leastIndex=V,t.map=function(n,r){if("function"!=typeof n[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof r)throw new TypeError("mapper is not a function");return Array.from(n,function(t,e){return r(t,e,n)})},t.max=L,t.maxIndex=z,t.mean=function(t,e){var n=0,r=0;if(void 0===e){var i=Q(t);try{for(i.s();!(a=i.n()).done;){var a=a.value;null!=a&&(a=+a)>=a&&(++n,r+=a)}}catch(t){i.e(t)}finally{i.f()}}else{var o=-1,s=Q(t);try{for(s.s();!(l=s.n()).done;){var l=l.value;null!=(l=e(l,++o,t))&&(l=+l)>=l&&(++n,r+=l)}}catch(t){s.e(t)}finally{s.f()}}if(n)return r/n},t.median=function(t,e){return D(t,.5,e)},t.merge=function(t){return Array.from(I(t))},t.min=R,t.minIndex=F,t.nice=O,t.pairs=function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:B,r=[],i=!1,a=Q(t);try{for(a.s();!(o=a.n()).done;){var o=o.value;i&&r.push(n(e,o)),e=o,i=!0}}catch(t){a.e(t)}finally{a.f()}return r},t.permute=U,t.quantile=D,t.quantileSorted=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a;if(i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(1<=e)return+n(t[i-1],i-1,t);var r=(i-1)*e,i=Math.floor(r),e=+n(t[i],i,t);return e+(+n(t[i+1],i+1,t)-e)*(r-i)}},t.quickselect=j,t.range=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a},t.reduce=function(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");var r,i=t[Symbol.iterator](),a=-1;if(arguments.length<3){var o=i.next(),s=o.done;if(n=o.value,s)return;++a}for(;s=(r=i.next()).done,r=r.value,!s;)n=e(n,r,++a,t);return n},t.reverse=function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},t.rollup=function(t,e){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return _(t,b,e,r)},t.rollups=function(t,e){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return _(t,Array.from,e,r)},t.scan=function(t,e){return(e=V(t,e))<0?void 0:e},t.shuffle=n,t.shuffler=H,t.some=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");var n,r=-1,i=Q(t);try{for(i.s();!(n=i.n()).done;)if(e(n.value,++r,t))return!0}catch(t){i.e(t)}finally{i.f()}return!1},t.sort=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h;if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return t=Array.from(t),1===n.length?(n=t.map(n),U(t,t.map(function(t,e){return e}).sort(function(t,e){return h(n[t],n[e])}))):t.sort(n)},t.subset=function(t,e){return X(e,t)},t.sum=function(t,e){var n=0;if(void 0===e){var r=Q(t);try{for(r.s();!(i=r.n()).done;){var i=i.value;(i=+i)&&(n+=i)}}catch(t){r.e(t)}finally{r.f()}}else{var a=-1,o=Q(t);try{for(o.s();!(s=o.n()).done;){var s=s.value;(s=+e(s,++a,t))&&(n+=s)}}catch(t){o.e(t)}finally{o.f()}}return n},t.superset=X,t.thresholdFreedmanDiaconis=function(t,e,n){return Math.ceil((n-e)/(2*(D(t,.75)-D(t,.25))*Math.pow(u(t),-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*g(t)*Math.pow(u(t),-1/3)))},t.thresholdSturges=C,t.tickIncrement=E,t.tickStep=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10));return M<=(r=r/n)?n*=10:T<=r?n*=5:A<=r&&(n*=2),e<t?-n:n},t.ticks=S,t.transpose=q,t.union=function(){for(var t=new Set,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=Q(a[i]);try{for(o.s();!(s=o.n()).done;){var s=s.value;t.add(s)}}catch(t){o.e(t)}finally{o.f()}}return t},t.variance=p,t.zip=function(){return q(arguments)},Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":$(n))&&void 0!==e?a(n):a((i="undefined"!=typeof globalThis?globalThis:i||self).d3=i.d3||{})},{}],61:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){var n=Array.prototype.slice;function M(t){return t}var T=1,A=2,S=3,E=4,O=1e-6;function r(t){return"translate("+(t+.5)+",0)"}function i(t){return"translate(0,"+(t+.5)+")"}function C(){return!this.__axis}function e(d,p){var g=[],y=null,m=null,v=6,b=6,x=3,_=d===T||d===E?-1:1,w=d===E||d===A?"x":"y",k=d===T||d===S?r:i;function e(t){var e=null==y?p.ticks?p.ticks.apply(p,g):p.domain():y,n=null==m?p.tickFormat?p.tickFormat.apply(p,g):M:m,r=Math.max(v,0)+x,i=p.range(),a=+i[0]+.5,o=+i[i.length-1]+.5,s=(p.bandwidth?function(e){var n=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(n=Math.round(n)),function(t){return+e(t)+n}}:function(e){return function(t){return+e(t)}})(p.copy()),l=t.selection?t.selection():t,u=l.selectAll(".domain").data([null]),c=(h=l.selectAll(".tick").data(e,p).order()).exit(),f=h.enter().append("g").attr("class","tick"),i=h.select("line"),e=h.select("text"),u=u.merge(u.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),h=h.merge(f),i=i.merge(f.append("line").attr("stroke","currentColor").attr(w+"2",_*v)),e=e.merge(f.append("text").attr("fill","currentColor").attr(w,_*r).attr("dy",d===T?"0em":d===S?"0.71em":"0.32em"));t!==l&&(u=u.transition(t),h=h.transition(t),i=i.transition(t),e=e.transition(t),c=c.transition(t).attr("opacity",O).attr("transform",function(t){return isFinite(t=s(t))?k(t):this.getAttribute("transform")}),f.attr("opacity",O).attr("transform",function(t){var e=this.parentNode.__axis;return k(e&&isFinite(e=e(t))?e:s(t))})),c.remove(),u.attr("d",d===E||d==A?b?"M"+_*b+","+a+"H0.5V"+o+"H"+_*b:"M0.5,"+a+"V"+o:b?"M"+a+","+_*b+"V0.5H"+o+"V"+_*b:"M"+a+",0.5H"+o),h.attr("opacity",1).attr("transform",function(t){return k(s(t))}),i.attr(w+"2",_*v),e.attr(w,_*r).text(n),l.filter(C).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",d===A?"start":d===E?"end":"middle"),l.each(function(){this.__axis=s})}return e.scale=function(t){return arguments.length?(p=t,e):p},e.ticks=function(){return g=n.call(arguments),e},e.tickArguments=function(t){return arguments.length?(g=null==t?[]:n.call(t),e):g.slice()},e.tickValues=function(t){return arguments.length?(y=null==t?null:n.call(t),e):y&&y.slice()},e.tickFormat=function(t){return arguments.length?(m=t,e):m},e.tickSize=function(t){return arguments.length?(v=b=+t,e):v},e.tickSizeInner=function(t){return arguments.length?(v=+t,e):v},e.tickSizeOuter=function(t){return arguments.length?(b=+t,e):b},e.tickPadding=function(t){return arguments.length?(x=+t,e):x},e}t.axisBottom=function(t){return e(S,t)},t.axisLeft=function(t){return e(E,t)},t.axisRight=function(t){return e(A,t)},t.axisTop=function(t){return e(T,t)},Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],62:[function(t,e,n){"use strict";function ot(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,f,U,h,V,H){var d=function(t){return function(){return t}};function p(t,e){var n=e.sourceEvent,r=e.target,i=e.selection,a=e.mode,e=e.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:a,enumerable:!0,configurable:!0},_:{value:e}})}function q(t){t.preventDefault(),t.stopImmediatePropagation()}var G={name:"drag"},Y={name:"space"},X={name:"handle"},W={name:"center"},Z=Math.abs,K=Math.max,Q=Math.min;function e(t){return[+t[0],+t[1]]}function g(t){return[e(t[0]),e(t[1])]}var $={name:"x",handles:["w","e"].map(y),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},J={name:"y",handles:["n","s"].map(y),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},n={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(y),input:function(t){return null==t?null:g(t)},output:function(t){return t}},tt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},et={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},nt={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},rt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},it={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function y(t){return{type:t}}function m(t){return!t.ctrlKey&&!t.button}function v(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function b(){return navigator.maxTouchPoints||"ontouchstart"in this}function at(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function r(N){var D,e=v,z=m,n=b,I=!0,i=f.dispatch("start","brush","end"),r=6;function a(t){var e=t.property("__brush",c).selectAll(".overlay").data([y("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",tt.overlay).merge(e).each(function(){var t=at(this).extent;V.select(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([y("selection")]).enter().append("rect").attr("class","selection").attr("cursor",tt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");e=t.selectAll(".handle").data(N.handles,function(t){return t.type});e.exit().remove(),e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return tt[t.type]}),t.each(F).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(n).on("touchstart.brush",s).on("touchmove.brush",l).on("touchend.brush touchcancel.brush",u).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function F(){var t=V.select(this),e=at(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-r/2:e[0][0]-r/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-r/2:e[0][1]-r/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+r:r}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+r:r})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function B(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new o(t,e,n):r}function o(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function s(t){var u,i,a,o,s,l,c,f,h,d,p,g,y,m,v,b,x,_,w,k,M,T,A,S,E,O,e,n,C,P,r;function L(t){var e,n,r=ot(t.changedTouches||[t]);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=ot(O);try{for(a.s();!(o=a.n()).done;){var o=o.value;o.identifier===i.identifier&&(o.cur=V.pointer(i,u))}}catch(t){a.e(t)}finally{a.f()}}}catch(t){r.e(t)}finally{r.f()}!A||S||E||1!==O.length||(n=O[0],Z(n.cur[0]-n[0])>Z(n.cur[1]-n[1])?E=!0:S=!0);var s=ot(O);try{for(s.s();!(l=s.n()).done;){var l=l.value;l.cur&&(l[0]=l.cur[0],l[1]=l.cur[1])}}catch(t){s.e(t)}finally{s.f()}T=!0,q(t),R(t)}function R(t){var e,n=O[0],r=n.point0;switch(k=n[0]-r[0],M=n[1]-r[1],a){case Y:case G:o&&(k=K(f-h,Q(m-v,k)),d=h+k,b=v+k),s&&(M=K(p-g,Q(x-_,M)),y=g+M,w=_+M);break;case X:O[1]?(o&&(d=K(f,Q(m,O[0][0])),b=K(f,Q(m,O[1][0])),o=1),s&&(y=K(p,Q(x,O[0][1])),w=K(p,Q(x,O[1][1])),s=1)):(o<0?(k=K(f-h,Q(m-h,k)),d=h+k,b=v):0<o&&(k=K(f-v,Q(m-v,k)),d=h,b=v+k),s<0?(M=K(p-g,Q(x-g,M)),y=g+M,w=_):0<s&&(M=K(p-_,Q(x-_,M)),y=g,w=_+M));break;case W:o&&(d=K(f,Q(m,h-k*o)),b=K(f,Q(m,v+k*o))),s&&(y=K(p,Q(x,g-M*s)),w=K(p,Q(x,_+M*s)))}b<d&&(o*=-1,e=h,h=v,v=e,e=d,d=b,b=e,i in et&&C.attr("cursor",tt[i=et[i]])),w<y&&(s*=-1,e=g,g=_,_=e,e=y,y=w,w=e,i in nt&&C.attr("cursor",tt[i=nt[i]])),l.selection&&(c=l.selection),S&&(d=c[0][0],b=c[1][0]),E&&(y=c[0][1],w=c[1][1]),c[0][0]===d&&c[0][1]===y&&c[1][0]===b&&c[1][1]===w||(l.selection=[[d,y],[b,w]],F.call(u),P.brush(t,a.name))}function j(t){if(t.stopImmediatePropagation(),t.touches){if(t.touches.length)return;D&&clearTimeout(D),D=setTimeout(function(){D=null},500)}else U.dragEnable(t.view,T),r.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var e;n.attr("pointer-events","all"),C.attr("cursor",tt.overlay),l.selection&&(c=l.selection),(e=c)[0][0]!==e[1][0]&&e[0][1]!==e[1][1]||(l.selection=null,F.call(u)),P.end(t,a.name)}D&&!t.touches||z.apply(this,arguments)&&(u=this,i=t.target.__data__.type,a="selection"===(I&&t.metaKey?i="overlay":i)?G:I&&t.altKey?W:X,o=N===J?null:rt[i],s=N===$?null:it[i],e=(l=at(u)).extent,c=l.selection,f=e[0][0],p=e[0][1],m=e[1][0],x=e[1][1],M=k=0,A=o&&s&&I&&t.shiftKey,O=Array.from(t.touches||[t],function(t){var e=t.identifier;return(t=V.pointer(t,u)).point0=t.slice(),t.identifier=e,t}),"overlay"===i?(c&&(T=!0),e=[O[0],O[1]||O[0]],l.selection=c=[[h=N===J?f:Q(e[0][0],e[1][0]),g=N===$?p:Q(e[0][1],e[1][1])],[v=N===J?m:K(e[0][0],e[1][0]),_=N===$?x:K(e[0][1],e[1][1])]],1<O.length&&R()):(h=c[0][0],g=c[0][1],v=c[1][0],_=c[1][1]),d=h,y=g,b=v,w=_,n=V.select(u).attr("pointer-events","none"),C=n.selectAll(".overlay").attr("cursor",tt[i]),H.interrupt(u),P=B(u,arguments,!0).beforestart(),t.touches?(P.moved=L,P.ended=j):(r=V.select(t.view).on("mousemove.brush",L,!0).on("mouseup.brush",j,!0),I&&r.on("keydown.brush",function(t){switch(t.keyCode){case 16:A=o&&s;break;case 18:a===X&&(o&&(v=b-k*o,h=d+k*o),s&&(_=w-M*s,g=y+M*s),a=W,R());break;case 32:a!==X&&a!==W||(o<0?v=b-k:0<o&&(h=d-k),s<0?_=w-M:0<s&&(g=y-M),a=Y,C.attr("cursor",tt.selection),R());break;default:return}q(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:A&&(S=E=A=!1,R());break;case 18:a===W&&(o<0?v=b:0<o&&(h=d),s<0?_=w:0<s&&(g=y),a=X,R());break;case 32:a===Y&&(a=t.altKey?(o&&(v=b-k*o,h=d+k*o),s&&(_=w-M*s,g=y+M*s),W):(o<0?v=b:0<o&&(h=d),s<0?_=w:0<s&&(g=y),X),C.attr("cursor",tt[i]),R());break;default:return}q(t)},!0),U.dragDisable(t.view)),F.call(u),P.start(t,a.name))}function l(t){B(this,arguments).moved(t)}function u(t){B(this,arguments).ended(t)}function c(){var t=this.__brush||{selection:null};return t.extent=g(e.apply(this,arguments)),t.dim=N,t}return a.move=function(t,s){t.tween?t.on("start.brush",function(t){B(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){B(this,arguments).end(t)}).tween("brush",function(){var e=this,n=e.__brush,r=B(e,arguments),t=n.selection,i=N.input("function"==typeof s?s.apply(this,arguments):s,n.extent),a=h.interpolate(t,i);function o(t){n.selection=1===t&&null===i?null:a(t),F.call(e),r.brush()}return null!==t&&null!==i?o:o(1)}):t.each(function(){var t=arguments,e=this.__brush,n=N.input("function"==typeof s?s.apply(this,t):s,e.extent),t=B(this,t).beforestart();H.interrupt(this),e.selection=null===n?null:n,F.call(this),t.start().brush().end()})},a.clear=function(t){a.move(t,null)},o.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(t,e,n){var r=V.select(this.that).datum();i.call(t,this.that,new p(t,{sourceEvent:e,target:a,selection:N.output(this.state.selection),mode:n,dispatch:i}),r)}},a.extent=function(t){return arguments.length?(e="function"==typeof t?t:d(g(t)),a):e},a.filter=function(t){return arguments.length?(z="function"==typeof t?t:d(!!t),a):z},a.touchable=function(t){return arguments.length?(n="function"==typeof t?t:d(!!t),a):n},a.handleSize=function(t){return arguments.length?(r=+t,a):r},a.keyModifiers=function(t){return arguments.length?(I=!!t,a):I},a.on=function(){var t=i.on.apply(i,arguments);return t===i?a:t},a}t.brush=function(){return r(n)},t.brushSelection=function(t){return(t=t.__brush)?t.dim.output(t.selection):null},t.brushX=function(){return r($)},t.brushY=function(){return r(J)},Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-selection"),t("d3-transition")):a((i=i||self).d3=i.d3||{},i.d3,i.d3,i.d3,i.d3,i.d3)},{"d3-dispatch":67,"d3-drag":68,"d3-interpolate":76,"d3-selection":83,"d3-transition":87}],63:[function(t,e,n){"use strict";function O(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,m){var v=Math.abs,b=Math.cos,x=Math.sin,e=Math.PI,_=e/2,w=2*e,k=Math.max,M=1e-12;function T(n,t){return Array.from({length:t-n},function(t,e){return n+e})}function n(m,a){var o=0,s=null,v=null,b=null;function e(l){var u,c=l.length,f=new Array(c),t=T(0,c),h=new Array(c*c),d=new Array(c),p=0;l=Float64Array.from({length:c*c},a?function(t,e){return l[e%c][e/c|0]}:function(t,e){return l[e/c|0][e%c]});for(var e=0;e<c;++e){for(var n=0,r=0;r<c;++r)n+=l[e*c+r]+m*l[r*c+e];p+=f[e]=n}p=k(0,w-o*c)/p,u=p?o:w/c;var g=0;s&&t.sort(function(t,e){return s(f[t],f[e])});var y,i=O(t);try{for(i.s();!(y=i.n()).done;)!function(){var n=y.value,t=g;if(m){var e=T(1+~c,c).filter(function(t){return t<0?l[~t*c+n]:l[n*c+t]});v&&e.sort(function(t,e){return v(t<0?-l[~t*c+n]:l[n*c+t],e<0?-l[~e*c+n]:l[n*c+e])});var r=O(e);try{for(r.s();!(i=r.n()).done;){var i=i.value;i<0?(h[~i*c+n]||(h[~i*c+n]={source:null,target:null})).target={index:n,startAngle:g,endAngle:g+=l[~i*c+n]*p,value:l[~i*c+n]}:(h[n*c+i]||(h[n*c+i]={source:null,target:null})).source={index:n,startAngle:g,endAngle:g+=l[n*c+i]*p,value:l[n*c+i]}}}catch(t){r.e(t)}finally{r.f()}d[n]={index:n,startAngle:t,endAngle:g,value:f[n]}}else{e=T(0,c).filter(function(t){return l[n*c+t]||l[t*c+n]});v&&e.sort(function(t,e){return v(l[n*c+t],l[n*c+e])});var a=O(e);try{for(a.s();!(s=a.n()).done;){var o=s.value,s=void 0;n<o?(s=h[n*c+o]||(h[n*c+o]={source:null,target:null})).source={index:n,startAngle:g,endAngle:g+=l[n*c+o]*p,value:l[n*c+o]}:((s=h[o*c+n]||(h[o*c+n]={source:null,target:null})).target={index:n,startAngle:g,endAngle:g+=l[n*c+o]*p,value:l[n*c+o]},n===o&&(s.source=s.target)),s.source&&s.target&&s.source.value<s.target.value&&(o=s.source,s.source=s.target,s.target=o)}}catch(t){a.e(t)}finally{a.f()}d[n]={index:n,startAngle:t,endAngle:g,value:f[n]}}g+=u}()}catch(t){i.e(t)}finally{i.f()}return(h=Object.values(h)).groups=d,b?h.sort(b):h}return e.padAngle=function(t){return arguments.length?(o=k(0,t),e):o},e.sortGroups=function(t){return arguments.length?(s=t,e):s},e.sortSubgroups=function(t){return arguments.length?(v=t,e):v},e.sortChords=function(t){return arguments.length?(null==t?b=null:(b=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=n=t,e):b&&b._;var n},e}var A=Array.prototype.slice;function r(t){return function(){return t}}function i(t){return t.source}function a(t){return t.target}function o(t){return t.radius}function s(t){return t.startAngle}function S(t){return t.endAngle}function E(){return 0}function l(){return 10}function u(l){var u=i,c=a,f=o,h=o,d=s,p=S,g=E,y=null;function e(){var t,e=u.apply(this,arguments),n=c.apply(this,arguments),r=g.apply(this,arguments)/2,i=A.call(arguments),a=+f.apply(this,(i[0]=e,i)),o=d.apply(this,i)-_,s=p.apply(this,i)-_,e=+h.apply(this,(i[0]=n,i)),n=d.apply(this,i)-_,i=p.apply(this,i)-_;if(y=y||(t=m.path()),M<r&&(v(s-o)>2*r+M?o<s?(o+=r,s-=r):(o-=r,s+=r):o=s=(o+s)/2,v(i-n)>2*r+M?n<i?(n+=r,i-=r):(n-=r,i+=r):n=i=(n+i)/2),y.moveTo(a*b(o),a*x(o)),y.arc(0,0,a,o,s),o===n&&s===i||(l?(r=e-+l.apply(this,arguments),s=(n+i)/2,y.quadraticCurveTo(0,0,r*b(n),r*x(n)),y.lineTo(e*b(s),e*x(s)),y.lineTo(r*b(i),r*x(i))):(y.quadraticCurveTo(0,0,e*b(n),e*x(n)),y.arc(0,0,e,n,i))),y.quadraticCurveTo(0,0,a*b(o),a*x(o)),y.closePath(),t)return y=null,t+""||null}return l&&(e.headRadius=function(t){return arguments.length?(l="function"==typeof t?t:r(+t),e):l}),e.radius=function(t){return arguments.length?(f=h="function"==typeof t?t:r(+t),e):f},e.sourceRadius=function(t){return arguments.length?(f="function"==typeof t?t:r(+t),e):f},e.targetRadius=function(t){return arguments.length?(h="function"==typeof t?t:r(+t),e):h},e.startAngle=function(t){return arguments.length?(d="function"==typeof t?t:r(+t),e):d},e.endAngle=function(t){return arguments.length?(p="function"==typeof t?t:r(+t),e):p},e.padAngle=function(t){return arguments.length?(g="function"==typeof t?t:r(+t),e):g},e.source=function(t){return arguments.length?(u=t,e):u},e.target=function(t){return arguments.length?(c=t,e):c},e.context=function(t){return arguments.length?(y=null==t?null:t,e):y},e}t.chord=function(){return n(!1,!1)},t.chordDirected=function(){return n(!0,!1)},t.chordTranspose=function(){return n(!1,!0)},t.ribbon=function(){return u()},t.ribbonArrow=function(){return u(l)},Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-path")):a((i=i||self).d3=i.d3||{},i.d3)},{"d3-path":77}],64:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){function e(t,e,n){(t.prototype=e.prototype=n).constructor=t}function n(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function u(){}var r="\\s*([+-]?\\d+)\\s*",i="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),c=new RegExp("^rgba\\("+[r,r,r,i]+"\\)$"),f=new RegExp("^rgba\\("+[a,a,a,i]+"\\)$"),h=new RegExp("^hsl\\("+[i,a,a]+"\\)$"),d=new RegExp("^hsla\\("+[i,a,a,i]+"\\)$"),p={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function y(){return this.rgb().formatRgb()}function m(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=o.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?v(e):3===n?new w(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?b(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?b(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=s.exec(t))?new w(e[1],e[2],e[3],1):(e=l.exec(t))?new w(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=c.exec(t))?b(e[1],e[2],e[3],e[4]):(e=f.exec(t))?b(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=h.exec(t))?A(e[1],e[2]/100,e[3]/100,1):(e=d.exec(t))?A(e[1],e[2]/100,e[3]/100,e[4]):p.hasOwnProperty(t)?v(p[t]):"transparent"===t?new w(NaN,NaN,NaN,0):null}function v(t){return new w(t>>16&255,t>>8&255,255&t,1)}function b(t,e,n,r){return r<=0&&(t=e=n=NaN),new w(t,e,n,r)}function x(t){return t instanceof u||(t=m(t)),t?new w((t=t.rgb()).r,t.g,t.b,t.opacity):new w}function _(t,e,n,r){return 1===arguments.length?x(t):new w(t,e,n,null==r?1:r)}function w(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function k(){return"#"+T(this.r)+T(this.g)+T(this.b)}function M(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function T(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function A(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new O(t,e,n,r)}function S(t){if(t instanceof O)return new O(t.h,t.s,t.l,t.opacity);if(t instanceof u||(t=m(t)),!t)return new O;if(t instanceof O)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=0<l&&l<1?0:o,new O(o,s,l,t.opacity)}function E(t,e,n,r){return 1===arguments.length?S(t):new O(t,e,n,null==r?1:r)}function O(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function C(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e(u,m,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return S(this).formatHsl()},formatRgb:y,toString:y}),e(w,_,n(u,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new w(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new w(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatRgb:M,toString:M})),e(O,E,n(u,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new O(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new O(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new w(C(240<=t?t-240:120+t,n,e),C(t,n,e),C(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var P=Math.PI/180,L=180/Math.PI,R=.96422,j=1,N=.82521,D=4/29,z=6/29*3*(6/29),I=6/29*(6/29)*(6/29);function F(t){if(t instanceof U)return new U(t.l,t.a,t.b,t.opacity);if(t instanceof W)return Z(t);t instanceof w||(t=x(t));var e,n,r=G(t.r),i=G(t.g),a=G(t.b),o=V((.2225045*r+.7168786*i+.0606169*a)/j);return r===i&&i===a?e=n=o:(e=V((.4360747*r+.3850649*i+.1430804*a)/R),n=V((.0139322*r+.0971045*i+.7141733*a)/N)),new U(116*o-16,500*(e-o),200*(o-n),t.opacity)}function B(t,e,n,r){return 1===arguments.length?F(t):new U(t,e,n,null==r?1:r)}function U(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function V(t){return I<t?Math.pow(t,1/3):t/z+D}function H(t){return 6/29<t?t*t*t:z*(t-D)}function q(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function G(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Y(t){if(t instanceof W)return new W(t.h,t.c,t.l,t.opacity);if(t instanceof U||(t=F(t)),0===t.a&&0===t.b)return new W(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*L;return new W(e<0?360+e:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function X(t,e,n,r){return 1===arguments.length?Y(t):new W(t,e,n,null==r?1:r)}function W(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Z(t){if(isNaN(t.h))return new U(t.l,0,0,t.opacity);var e=t.h*P;return new U(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}e(U,B,n(u,{brighter:function(t){return new U(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new U(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new w(q(3.1338561*(e=R*H(e))-1.6168667*(t=j*H(t))-.4906146*(n=N*H(n))),q(-.9787684*e+1.9161415*t+.033454*n),q(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),e(W,X,n(u,{brighter:function(t){return new W(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new W(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Z(this).rgb()}}));var K=-.29227,Q=-.90649,$=1.97294,J=$*Q,tt=1.78277*$,et=1.78277*K- -.14861*Q;function nt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof rt)return new rt(t.h,t.s,t.l,t.opacity);t instanceof w||(t=x(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(et*r+J*e-tt*n)/(et+J-tt),r=($*(n-i)-K*(e=r-i))/Q,n=Math.sqrt(r*r+e*e)/($*i*(1-i));return new rt((e=n?Math.atan2(r,e)*L-120:NaN)<0?e+360:e,n,i,t.opacity)}(t):new rt(t,e,n,null==r?1:r)}function rt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}e(rt,nt,n(u,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new rt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new rt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*P,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),t=Math.sin(t);return new w(255*(e+n*(-.14861*r+1.78277*t)),255*(e+n*(K*r+Q*t)),255*(e+$*r*n),this.opacity)}})),t.color=m,t.cubehelix=nt,t.gray=function(t,e){return new U(t,0,0,null==e?1:e)},t.hcl=X,t.hsl=E,t.lab=B,t.lch=function(t,e,n,r){return 1===arguments.length?Y(t):new W(n,e,t,null==r?1:r)},t.rgb=_,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],65:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,v){var b=Array.prototype.slice;function s(t,e){return t-e}var x=function(t){return function(){return t}};function l(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=function(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],u=l[0],c=l[1],f=t[s],h=f[0],d=f[1];if(function(t,e,n){return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&function(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}(t[t=+(t[0]===e[0])],n[t],e[t])}(l,f,e))return 0;r<c!=r<d&&n<(h-u)*(r-c)/(d-c)+u&&(i=-i)}return i}(t,e[r]))return n;return 0}function r(){}var g=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function _(){var h=1,d=1,i=v.thresholdSturges,a=e;function n(e){var t,n,r=i(e);return(r=Array.isArray(r)?r.slice().sort(s):(t=(n=v.extent(e))[0],n=n[1],r=v.tickStep(t,n,r),v.range(Math.floor(t/r)*r,Math.floor(n/r)*r,r))).map(function(t){return o(e,t)})}function o(e,n){var i=[],r=[];return function(t,e,o){var s,l,n,r,i,a,u=new Array,c=new Array;for(s=l=-1,r=t[0]>=e,g[r<<1].forEach(f);++s<h-1;)n=r,r=t[s+1]>=e,g[n|r<<1].forEach(f);for(g[r<<0].forEach(f);++l<d-1;){for(s=-1,r=t[l*h+h]>=e,i=t[l*h]>=e,g[r<<1|i<<2].forEach(f);++s<h-1;)n=r,r=t[l*h+h+s+1]>=e,a=i,i=t[l*h+s+1]>=e,g[n|r<<1|i<<2|a<<3].forEach(f);g[r|i<<3].forEach(f)}for(s=-1,i=t[l*h]>=e,g[i<<2].forEach(f);++s<h-1;)a=i,i=t[l*h+s+1]>=e,g[i<<2|a<<3].forEach(f);function f(t){var e,n=[t[0][0]+s,t[0][1]+l],r=[t[1][0]+s,t[1][1]+l],i=p(n),a=p(r);(t=c[i])?(e=u[a])?(delete c[t.end],delete u[e.start],t===e?(t.ring.push(r),o(t.ring)):u[t.start]=c[e.end]={start:t.start,end:e.end,ring:t.ring.concat(e.ring)}):(delete c[t.end],t.ring.push(r),c[t.end=a]=t):(t=u[a])?(e=c[i])?(delete u[t.start],delete c[e.end],t===e?(t.ring.push(r),o(t.ring)):u[e.start]=c[t.end]={start:e.start,end:t.end,ring:e.ring.concat(t.ring)}):(delete u[t.start],t.ring.unshift(n),u[t.start=i]=t):u[i]=c[a]={start:i,end:a,ring:[n,r]}}g[i<<3].forEach(f)}(e,n,function(t){a(t,e,n),0<function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)?i.push([t]):r.push(t)}),r.forEach(function(t){for(var e,n=0,r=i.length;n<r;++n)if(-1!==l((e=i[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:n,coordinates:i}}function p(t){return 2*t[0]+t[1]*(h+1)*4}function e(t,s,l){t.forEach(function(t){var e,n=t[0],r=t[1],i=0|n,a=0|r,o=s[a*h+i];0<n&&n<h&&i===n&&(e=s[a*h+i-1],t[0]=n+(l-e)/(o-e)-.5),0<r&&r<d&&a===r&&(e=s[(a-1)*h+i],t[1]=r+(l-e)/(o-e)-.5)})}return n.contour=o,n.size=function(t){if(!arguments.length)return[h,d];var e=Math.floor(t[0]),t=Math.floor(t[1]);if(!(0<=e&&0<=t))throw new Error("invalid size");return h=e,d=t,n},n.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?x(b.call(t)):x(t),n):i},n.smooth=function(t){return arguments.length?(a=t?e:r,n):a===e},n}function w(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=t.data[s+o*r]),n<=s&&(a<=s&&(l-=t.data[s-a+o*r]),e.data[s-n+o*r]=l/Math.min(s+1,r-1+a-s,a))}function k(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=t.data[o+s*r]),n<=s&&(a<=s&&(l-=t.data[o+(s-a)*r]),e.data[o+(s-n)*r]=l/Math.min(s+1,i-1+a-s,a))}function M(t){return t[0]}function T(t){return t[1]}function A(){return 1}t.contourDensity=function(){var o=M,s=T,l=A,n=960,r=500,i=20,u=2,c=3*i,f=n+2*c>>u,h=r+2*c>>u,d=x(20);function e(t){var a=new Float32Array(f*h),e=new Float32Array(f*h);t.forEach(function(t,e,n){var r=+o(t,e,n)+c>>u,i=+s(t,e,n)+c>>u,n=+l(t,e,n);0<=r&&r<f&&0<=i&&i<h&&(a[r+i*f]+=n)}),w({width:f,height:h,data:a},{width:f,height:h,data:e},i>>u),k({width:f,height:h,data:e},{width:f,height:h,data:a},i>>u),w({width:f,height:h,data:a},{width:f,height:h,data:e},i>>u),k({width:f,height:h,data:e},{width:f,height:h,data:a},i>>u),w({width:f,height:h,data:a},{width:f,height:h,data:e},i>>u),k({width:f,height:h,data:e},{width:f,height:h,data:a},i>>u);t=d(a);return Array.isArray(t)||(e=v.max(a),t=v.tickStep(0,e,t),(t=v.range(0,Math.floor(e/t)*t,t)).shift()),_().thresholds(t).size([f,h])(a).map(p)}function p(t){return t.value*=Math.pow(2,-2*u),t.coordinates.forEach(a),t}function a(t){t.forEach(g)}function g(t){t.forEach(y)}function y(t){t[0]=t[0]*Math.pow(2,u)-c,t[1]=t[1]*Math.pow(2,u)-c}function m(){return f=n+2*(c=3*i)>>u,h=r+2*c>>u,e}return e.x=function(t){return arguments.length?(o="function"==typeof t?t:x(+t),e):o},e.y=function(t){return arguments.length?(s="function"==typeof t?t:x(+t),e):s},e.weight=function(t){return arguments.length?(l="function"==typeof t?t:x(+t),e):l},e.size=function(t){if(!arguments.length)return[n,r];var e=+t[0],t=+t[1];if(!(0<=e&&0<=t))throw new Error("invalid size");return n=e,r=t,m()},e.cellSize=function(t){if(!arguments.length)return 1<<u;if(!(1<=(t=+t)))throw new Error("invalid cell size");return u=Math.floor(Math.log(t)/Math.LN2),m()},e.thresholds=function(t){return arguments.length?(d="function"==typeof t?t:Array.isArray(t)?x(b.call(t)):x(t),e):d},e.bandwidth=function(t){if(!arguments.length)return Math.sqrt(i*(i+1));if(!(0<=(t=+t)))throw new Error("invalid bandwidth");return i=Math.round((Math.sqrt(4*t*t+1)-1)/2),m()},e},t.contours=_,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-array")):a((i=i||self).d3=i.d3||{},i.d3)},{"d3-array":60}],66:[function(t,e,n){"use strict";function y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o,l;l=function(t){var u=regeneratorRuntime.mark(d),yt=Math.pow(2,-52),p=new Uint32Array(512),b=function(){function u(t){m(this,u);var e=t.length>>1;if(0<e&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;t=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*t),this._halfedges=new Int32Array(3*t),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}return v(u,null,[{key:"from",value:function(t,e,n){for(var r=1<arguments.length&&void 0!==e?e:c,i=2<arguments.length&&void 0!==n?n:f,a=t.length,o=new Float64Array(2*a),s=0;s<a;s++){var l=t[s];o[2*s]=r(l),o[2*s+1]=i(l)}return new u(o)}}]),v(u,[{key:"update",value:function(){for(var t=this.coords,e=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,a=t.length>>1,o=1/0,s=1/0,l=-1/0,u=-1/0,c=0;c<a;c++){var f=t[2*c],h=t[2*c+1];f<o&&(o=f),h<s&&(s=h),l<f&&(l=f),u<h&&(u=h),this._ids[c]=c}for(var d,p=(o+l)/2,g=(s+u)/2,y=1/0,m=0;m<a;m++){var v=mt(p,g,t[2*m],t[2*m+1]);v<y&&(d=m,y=v)}for(var b,x=t[2*d],_=t[2*d+1],y=1/0,w=0;w<a;w++)w!==d&&((b=mt(x,_,t[2*w],t[2*w+1]))<y&&0<b&&(j=w,y=b));for(var k,M,T,A,S,E,O,C=t[2*j],P=t[2*j+1],L=1/0,R=0;R<a;R++)R!==d&&R!==j&&(k=x,M=_,T=C,A=P,S=t[2*R],E=t[2*R+1],O=void 0,O=T-k,T=A-M,A=S-k,(M=(T=((S=E-M)*(k=O*O+T*T)-T*(E=A*A+S*S))*(M=.5/(O*S-T*A)))*T+(M*=O*E-A*k)*M)<L&&(N=R,L=M));var j,N,D=t[2*N],z=t[2*N+1];if(L===1/0){for(var I=0;I<a;I++)this._dists[I]=t[2*I]-t[0]||t[2*I+1]-t[1];bt(this._ids,this._dists,0,a-1);for(var F=new Uint32Array(a),B=0,U=0,V=-1/0;U<a;U++){var H=this._ids[U];this._dists[H]>V&&(F[B++]=H,V=this._dists[H])}return this.hull=F.subarray(0,B),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}vt(x,_,C,P,D,z)&&(Y=j,K=C,X=P,j=N,C=D,P=z,N=Y,D=K,z=X);var q,G,Y,X,W,Z,K,Q,$=(Z=(G=C)-(Q=x),{x:Q+((G=(W=z)-(q=_))*(Y=Z*Z+(K=(Y=P)-q)*K)-K*(X=(Q=(X=D)-Q)*Q+G*G))*(W=.5/(Z*G-K*Q)),y:q+(Z*X-Q*Y)*W});this._cx=$.x,this._cy=$.y;for(var J=0;J<a;J++)this._dists[J]=mt(t[2*J],t[2*J+1],$.x,$.y);bt(this._ids,this._dists,0,a-1);var tt=3;n[this._hullStart=d]=e[N]=j,n[j]=e[d]=N,r[n[N]=e[j]=d]=0,r[j]=1,r[N]=2,i.fill(-1),i[this._hashKey(x,_)]=d,i[this._hashKey(C,P)]=j,i[this._hashKey(D,z)]=N,this.trianglesLen=0,this._addTriangle(d,j,N,-1,-1,-1);for(var et,nt,rt=0;rt<this._ids.length;rt++){var it=this._ids[rt],at=t[2*it],ot=t[2*it+1];if(!(0<rt&&Math.abs(at-et)<=yt&&Math.abs(ot-nt)<=yt)&&(et=at,nt=ot,it!==d&&it!==j&&it!==N)){for(var st=0,lt=0,ut=this._hashKey(at,ot);lt<this._hashSize&&(-1===(st=i[(ut+lt)%this._hashSize])||st===n[st]);lt++);for(var ct=st=e[st],ft=void 0;ft=n[ct],!vt(at,ot,t[2*ct],t[2*ct+1],t[2*ft],t[2*ft+1]);)if((ct=ft)===st){ct=-1;break}if(-1!==ct){var ht=this._addTriangle(ct,it,n[ct],-1,-1,r[ct]);r[it]=this._legalize(ht+2),r[ct]=ht,tt++;for(var dt=n[ct];ft=n[dt],vt(at,ot,t[2*dt],t[2*dt+1],t[2*ft],t[2*ft+1]);)ht=this._addTriangle(dt,it,ft,r[it],-1,r[dt]),r[it]=this._legalize(ht+2),n[dt]=dt,tt--,dt=ft;if(ct===st)for(;vt(at,ot,t[2*(ft=e[ct])],t[2*ft+1],t[2*ct],t[2*ct+1]);)ht=this._addTriangle(ft,it,ct,-1,r[ct],r[ft]),this._legalize(ht+2),r[ft]=ht,n[ct]=ct,tt--,ct=ft;n[this._hullStart=e[it]=ct]=e[dt]=it,n[it]=dt,i[this._hashKey(at,ot)]=it,i[this._hashKey(t[2*ct],t[2*ct+1])]=ct}}}this.hull=new Uint32Array(tt);for(var pt=0,gt=this._hullStart;pt<tt;pt++)gt=n[this.hull[pt]=gt];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,e){return Math.floor(function(t,e){t/=Math.abs(t)+Math.abs(e);return(0<e?3-t:1+t)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(t){for(var e=this._triangles,n=this._halfedges,r=this.coords,i=0,a=0;;){var o=n[t],s=t-t%3,a=s+(t+2)%3;if(-1!==o){var l=o-o%3,u=s+(t+1)%3,c=l+(o+2)%3,f=e[a],h=e[t],s=e[u],u=e[c];if(function(t,e,n,r,i,a,o,s){t-=o,e-=s,n-=o,r-=s,i-=o,o=a-s,a=n*n+r*r,s=i*i+o*o;return t*(r*s-a*o)-e*(n*s-a*i)+(t*t+e*e)*(n*o-r*i)<0}(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*s],r[2*s+1],r[2*u],r[2*u+1])){e[t]=u,e[o]=f;f=n[c];if(-1===f){var d=this._hullStart;do{if(this._hullTri[d]===c){this._hullTri[d]=t;break}}while((d=this._hullPrev[d])!==this._hullStart)}this._link(t,f),this._link(o,n[a]),this._link(a,c);o=l+(o+1)%3;i<p.length&&(p[i++]=o)}else{if(0===i)break;t=p[--i]}}else{if(0===i)break;t=p[--i]}}return a}},{key:"_link",value:function(t,e){-1!==(this._halfedges[t]=e)&&(this._halfedges[e]=t)}},{key:"_addTriangle",value:function(t,e,n,r,i,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}]),u}();function mt(t,e,n,r){n=t-n,r=e-r;return n*n+r*r}function o(t,e,n,r,i,a){i=(r-e)*(i-t),e=(n-t)*(a-e);return Math.abs(i-e)>=33306690738754716e-32*Math.abs(i+e)?i-e:0}function vt(t,e,n,r,i,a){return(o(i,a,t,e,n,r)||o(t,e,n,r,i,a)||o(n,r,i,a,t,e))<0}function bt(t,e,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var a=t[i],o=e[a],s=i-1;n<=s&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=a}else{var l=n+1,u=r;h(t,n+r>>1,l),e[t[n]]>e[t[r]]&&h(t,n,r),e[t[l]]>e[t[r]]&&h(t,l,r),e[t[n]]>e[t[l]]&&h(t,n,l);for(var c=t[l],f=e[c];;){for(;l++,e[t[l]]<f;);for(;u--,e[t[u]]>f;);if(u<l)break;h(t,l,u)}t[n+1]=t[u],t[u]=c,u-n<=r-l+1?(bt(t,e,l,r),bt(t,e,n,u-1)):(bt(t,e,n,u-1),bt(t,e,l,r))}}function h(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function c(t){return t[0]}function f(t){return t[1]}var x=function(){function t(){m(this,t),this._x0=this._y0=this._x1=this._y1=null,this._=""}return v(t,[{key:"moveTo",value:function(t,e){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(t,e){this._+="L".concat(this._x1=+t,",").concat(this._y1=+e)}},{key:"arc",value:function(t,e,n){var r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(1e-6<Math.abs(this._x1-r)||1e-6<Math.abs(this._y1-i))&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(t-n,",").concat(e,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(t,e,n,r){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),t}(),n=function(){function t(){m(this,t),this._=[]}return v(t,[{key:"moveTo",value:function(t,e){this._.push([t,e])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(t,e){this._.push([t,e])}},{key:"value",value:function(){return this._.length?this._:null}}]),t}(),e=function(){function a(t){var e=_(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],4),n=e[0],r=e[1],i=e[2],e=e[3];if(m(this,a),!((i=+i)>=(n=+n)&&(e=+e)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=n,this.ymax=e,this.ymin=r,this._init()}return v(a,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var t=this.delaunay,e=t.points,n=t.hull,r=t.triangles,i=this.vectors,a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2),o=0,s=0,l=r.length;o<l;o+=3,s+=2){var u,c=2*r[o],f=2*r[o+1],h=2*r[o+2],d=e[c],p=e[1+c],g=e[f],y=e[1+f],m=e[h],v=e[1+h],b=g-d,x=y-p,c=m-d,f=v-p,h=b*b+x*x,g=c*c+f*f,y=2*(b*f-x*c);c=y?Math.abs(y)<1e-8?(u=(d+m)/2,(p+v)/2):(u=d+(f*h-x*g)*(y=1/y),p+(b*g-c*h)*y):(u=(d+m)/2-1e8*f,(p+v)/2+1e8*c),a[s]=u,a[s+1]=c}var _,w,k,M=n[n.length-1],T=4*M,A=e[2*M],S=e[2*M+1];i.fill(0);for(var E=0;E<n.length;++E)_=T,w=A,k=S,T=4*(M=n[E]),A=e[2*M],S=e[2*M+1],i[_+2]=i[T]=k-S,i[_+3]=i[T+1]=A-w}},{key:"render",value:function(t){var e=null==t?t=new x:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,a=n.hull,o=this.circumcenters,s=this.vectors;if(a.length<=1)return null;for(var l=0,u=r.length;l<u;++l){var c,f,h,d=r[l];d<l||(f=2*Math.floor(l/3),h=2*Math.floor(d/3),c=o[f],d=o[1+f],f=o[h],h=o[1+h],this._renderSegment(c,d,f,h,t))}for(var p=a[a.length-1],g=0;g<a.length;++g){v=p,p=a[g];var y=2*Math.floor(i[p]/3),m=o[y],y=o[1+y],v=4*v,v=this._project(m,y,s[2+v],s[3+v]);v&&this._renderSegment(m,y,v[0],v[1],t)}return e&&e.value()}},{key:"renderBounds",value:function(t){var e=null==t?t=new x:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}},{key:"renderCell",value:function(t,e){var n=null==e?e=new x:void 0,r=this._clip(t);if(null!==r&&r.length){e.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&1<i;)i-=2;for(var a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||e.lineTo(r[a],r[a+1]);return e.closePath(),n&&n.value()}}},{key:"cellPolygons",value:regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.delaunay.points,e=0,n=r.length/2;case 2:if(!(e<n)){t.next=11;break}if(r=this.cellPolygon(e))return r.index=e,t.next=8,r;t.next=8;break;case 8:++e,t.next=2;break;case 11:case"end":return t.stop()}},t,this)})},{key:"cellPolygon",value:function(t){var e=new n;return this.renderCell(t,e),e.value()}},{key:"_renderSegment",value:function(t,e,n,r,i){var a=this._regioncode(t,e),o=this._regioncode(n,r);0===a&&0===o?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,o))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}},{key:"contains",value:function(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}},{key:"neighbors",value:regeneratorRuntime.mark(function t(e){var n,r,i,a,o,s,l,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this._clip(e))){t.next=33;break}r=y(this.delaunay.neighbors(e)),t.prev=3,r.s();case 5:if((i=r.n()).done){t.next=25;break}if(a=i.value,!(o=this._clip(a))){t.next=23;break}s=0,l=n.length;case 10:if(!(s<l)){t.next=23;break}u=0,c=o.length;case 12:if(!(u<c)){t.next=20;break}if(n[s]==o[u]&&n[s+1]==o[u+1]&&n[(s+2)%l]==o[(u+c-2)%c]&&n[(s+3)%l]==o[(u+c-1)%c])return t.next=16,a;t.next=17;break;case 16:return t.abrupt("break",23);case 17:u+=2,t.next=12;break;case 20:s+=2,t.next=10;break;case 23:t.next=5;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(3),r.e(t.t0);case 30:return t.prev=30,r.f(),t.finish(30);case 33:case"end":return t.stop()}},t,this,[[3,27,30,33]])})},{key:"_cell",value:function(t){var e=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,a=n.triangles,o=r[t];if(-1===o)return null;var s=[],l=o;do{var u=Math.floor(l/3)}while((s.push(e[2*u],e[2*u+1]),a[l=l%3==2?l-2:l+1]===t)&&((l=i[l])!==o&&-1!==l));return s}},{key:"_clip",value:function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var n=this.vectors,r=4*t;return n[r]||n[1+r]?this._clipInfinite(t,e,n[r],n[1+r],n[2+r],n[3+r]):this._clipFinite(t,e)}},{key:"_clipFinite",value:function(t,e){for(var n,r,i,a,o,s=e.length,l=null,u=e[s-2],c=e[s-1],f=this._regioncode(u,c),h=0;h<s;h+=2)if(n=u,r=c,u=e[h],c=e[h+1],i=f,f=this._regioncode(u,c),0===i&&0===f)a=o,o=0,l?l.push(u,c):l=[u,c];else{var d=void 0,p=void 0,g=void 0,y=void 0,m=void 0;if(0===i){if(null===(d=this._clipSegment(n,r,u,c,i,f)))continue;var v=_(d,4),p=v[0],g=v[1],y=v[2],m=v[3]}else{if(null===(d=this._clipSegment(u,c,n,r,f,i)))continue;d=_(d,4);y=d[0],m=d[1],p=d[2],g=d[3],a=o,o=this._edgecode(p,g),a&&o&&this._edge(t,a,o,l,l.length),l?l.push(p,g):l=[p,g]}a=o,o=this._edgecode(y,m),a&&o&&this._edge(t,a,o,l,l.length),l?l.push(y,m):l=[y,m]}if(l)a=o,o=this._edgecode(l[0],l[1]),a&&o&&this._edge(t,a,o,l,l.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}},{key:"_clipSegment",value:function(t,e,n,r,i,a){for(;;){if(0===i&&0===a)return[t,e,n,r];if(i&a)return null;var o=void 0,s=void 0,l=i||a;8&l?(o=t+(n-t)*(this.ymax-e)/(r-e),s=this.ymax):4&l?(o=t+(n-t)*(this.ymin-e)/(r-e),s=this.ymin):o=2&l?(s=e+(r-e)*(this.xmax-t)/(n-t),this.xmax):(s=e+(r-e)*(this.xmin-t)/(n-t),this.xmin),i?(t=o,e=s,i=this._regioncode(t,e)):(n=o,r=s,a=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(t,e,n,r,i,a){var o=Array.from(e);if((r=this._project(o[0],o[1],n,r))&&o.unshift(r[0],r[1]),(r=this._project(o[o.length-2],o[o.length-1],i,a))&&o.push(r[0],r[1]),o=this._clipFinite(t,o))for(var s,l=0,u=o.length,c=this._edgecode(o[u-2],o[u-1]);l<u;l+=2)s=c,c=this._edgecode(o[l],o[l+1]),s&&c&&(l=this._edge(t,s,c,o,l),u=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}},{key:"_edge",value:function(t,e,n,r,i){for(;e!==n;){var a=void 0,o=void 0;switch(e){case 5:e=4;continue;case 4:e=6,a=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,a=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,a=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,a=this.xmin,o=this.ymin}r[i]===a&&r[i+1]===o||!this.contains(t,a,o)||(r.splice(i,0,a,o),i+=2)}if(4<r.length)for(var s=0;s<r.length;s+=2){var l=(s+2)%r.length,u=(s+4)%r.length;(r[s]===r[l]&&r[l]===r[u]||r[s+1]===r[1+l]&&r[1+l]===r[1+u])&&(r.splice(l,2),s-=2)}return i}},{key:"_project",value:function(t,e,n,r){var i,a,o,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(o=this.ymin,a=t+(s=i)*n)}else if(0<r){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(o=this.ymax,a=t+(s=i)*n)}if(0<n){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(a=this.xmax,o=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(a=this.xmin,o=e+(s=i)*r)}return[a,o]}},{key:"_edgecode",value:function(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}},{key:"_regioncode",value:function(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}]),a}(),l=2*Math.PI,g=Math.pow;function a(t){return t[0]}function s(t){return t[1]}var r=function(){function i(t){m(this,i),this._delaunator=new b(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}return v(i,null,[{key:"from",value:function(t,e,n,r){e=1<arguments.length&&void 0!==e?e:a,n=2<arguments.length&&void 0!==n?n:s,r=3<arguments.length?r:void 0;return new i("length"in t?function(t,e,n,r){for(var i=t.length,a=new Float64Array(2*i),o=0;o<i;++o){var s=t[o];a[2*o]=e.call(r,s,o,t),a[2*o+1]=n.call(r,s,o,t)}return a}(t,e,n,r):Float64Array.from(d(t,e,n,r)))}}]),v(i,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var t,e,n=this._delaunator,r=this.points;if(n.hull&&2<n.hull.length&&function(t){for(var e=t.triangles,n=t.coords,r=0;r<e.length;r+=3){var i=2*e[r],a=2*e[r+1],o=2*e[r+2];if(1e-10<(n[o]-n[i])*(n[1+a]-n[1+i])-(n[a]-n[i])*(n[1+o]-n[1+i]))return}return 1}(n)){this.collinear=Int32Array.from({length:r.length/2},function(t,e){return e}).sort(function(t,e){return r[2*t]-r[2*e]||r[2*t+1]-r[2*e+1]});for(var i=this.collinear[0],n=this.collinear[this.collinear.length-1],n=[r[2*i],r[2*i+1],r[2*n],r[2*n+1]],a=1e-8*Math.hypot(n[3]-n[1],n[2]-n[0]),o=0,s=r.length/2;o<s;++o){var l=(t=r[2*o],e=r[2*o+1],l=a,[t+Math.sin(t+e)*l,e+Math.cos(t-e)*l]);r[2*o]=l[0],r[2*o+1]=l[1]}this._delaunator=new b(r)}else delete this.collinear;for(var u=this.halfedges=this._delaunator.halfedges,c=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,h=this.inedges.fill(-1),d=this._hullIndex.fill(-1),p=0,g=u.length;p<g;++p){var y=f[p%3==2?p-2:p+1];-1!==u[p]&&-1!==h[y]||(h[y]=p)}for(var m=0,v=c.length;m<v;++m)d[c[m]]=m;c.length<=2&&0<c.length&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=c[0],this.triangles[1]=c[1],this.triangles[2]=c[1],h[c[0]]=1,2===c.length&&(h[c[1]]=0))}},{key:"voronoi",value:function(t){return new e(this,t)}},{key:"neighbors",value:regeneratorRuntime.mark(function t(e){var n,r,i,a,o,s,l,u,c,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.inedges,r=this.hull,i=this._hullIndex,a=this.halfedges,o=this.triangles,!(s=this.collinear)){t.next=10;break}if(0<(l=s.indexOf(e)))return t.next=6,s[l-1];t.next=6;break;case 6:if(l<s.length-1)return t.next=9,s[l+1];t.next=9;break;case 9:return t.abrupt("return");case 10:if(-1===(u=n[e]))return t.abrupt("return");t.next=13;break;case 13:c=u,f=-1;case 14:return t.next=16,f=o[c];case 16:if(o[c=c%3==2?c-2:c+1]!==e)return t.abrupt("return");t.next=19;break;case 19:if(-1!==(c=a[c])){t.next=26;break}if((h=r[(i[e]+1)%r.length])!==f)return t.next=25,h;t.next=25;break;case 25:return t.abrupt("return");case 26:if(c!==u){t.next=14;break}case 27:case"end":return t.stop()}},t,this)})},{key:"find",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:0;if((t=+t)!=t||(e=+e)!=e)return-1;for(var i,a=r;0<=(i=this._step(r,t,e))&&i!==r&&i!==a;)r=i;return i}},{key:"_step",value:function(t,e,n){var r=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,s=this.triangles,l=this.points;if(-1===r[t]||!l.length)return(t+1)%(l.length>>1);var u=t,c=g(e-l[2*t],2)+g(n-l[2*t+1],2),f=r[t],h=f;do{var d=s[h],p=g(e-l[2*d],2)+g(n-l[2*d+1],2);if(p<c&&(c=p,u=d),s[h=h%3==2?h-2:h+1]!==t)break;if(-1===(h=o[h])){if(h=i[(a[t]+1)%i.length],h!==d&&g(e-l[2*h],2)+g(n-l[2*h+1],2)<c)return h;break}}while(h!==f);return u}},{key:"render",value:function(t){for(var e=null==t?t=new x:void 0,n=this.points,r=this.halfedges,i=this.triangles,a=0,o=r.length;a<o;++a){var s,l=r[a];l<a||(s=2*i[a],l=2*i[l],t.moveTo(n[s],n[1+s]),t.lineTo(n[l],n[1+l]))}return this.renderHull(t),e&&e.value()}},{key:"renderPoints",value:function(t,e){for(var n=1<arguments.length&&void 0!==e?e:2,e=null==t?t=new x:void 0,r=this.points,i=0,a=r.length;i<a;i+=2){var o=r[i],s=r[i+1];t.moveTo(o+n,s),t.arc(o,s,n,0,l)}return e&&e.value()}},{key:"renderHull",value:function(t){var e=null==t?t=new x:void 0,n=this.hull,r=this.points,i=2*n[0],a=n.length;t.moveTo(r[i],r[1+i]);for(var o=1;o<a;++o){var s=2*n[o];t.lineTo(r[s],r[1+s])}return t.closePath(),e&&e.value()}},{key:"hullPolygon",value:function(){var t=new n;return this.renderHull(t),t.value()}},{key:"renderTriangle",value:function(t,e){var n=null==e?e=new x:void 0,r=this.points,i=this.triangles,a=2*i[t*=3],o=2*i[t+1],t=2*i[t+2];return e.moveTo(r[a],r[1+a]),e.lineTo(r[o],r[1+o]),e.lineTo(r[t],r[1+t]),e.closePath(),n&&n.value()}},{key:"trianglePolygons",value:regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.triangles,e=0,n=n.length/3;case 2:if(e<n)return t.next=5,this.trianglePolygon(e);t.next=8;break;case 5:++e,t.next=2;break;case 8:case"end":return t.stop()}},t,this)})},{key:"trianglePolygon",value:function(t){var e=new n;return this.renderTriangle(t,e),e.value()}}]),i}();function d(e,n,r,i){var a,o,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=0,o=y(e),t.prev=2,o.s();case 4:if((s=o.n()).done){t.next=13;break}return l=s.value,t.next=8,n.call(i,l,a,e);case 8:return t.next=10,r.call(i,l,a,e);case 10:++a;case 11:t.next=4;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),o.e(t.t0);case 18:return t.prev=18,o.f(),t.finish(18);case 21:case"end":return t.stop()}},u,null,[[2,15,18,21]])}t.Delaunay=r,t.Voronoi=e,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((o=void 0)===n?"undefined":a(n))&&void 0!==e?l(n):l((o=o||self).d3=o.d3||{})},{}],67:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){var a={value:function(){}};function e(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new i(r)}function i(t){this._=t}function l(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=a,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}i.prototype=e.prototype={constructor:i,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=l(i[n],t.name,e);else if(null==e)for(n in i)i[n]=l(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new i(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}},t.dispatch=e,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],68:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,_,w){function k(t){t.stopImmediatePropagation()}function M(t){t.preventDefault(),t.stopImmediatePropagation()}function T(t){var e=t.document.documentElement,t=w.select(t).on("dragstart.drag",M,!0);"onselectstart"in e?t.on("selectstart.drag",M,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function A(t,e){var n=t.document.documentElement,r=w.select(t).on("dragstart.drag",null);e&&(r.on("click.drag",M,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function S(t){return function(){return t}}function E(t,e){var n=e.sourceEvent,r=e.subject,i=e.target,a=e.identifier,o=e.active,s=e.x,l=e.y,u=e.dx,c=e.dy,e=e.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:e}})}function O(t){return!t.ctrlKey&&!t.button}function C(){return this.parentNode}function P(t,e){return null==e?{x:t.x,y:t.y}:e}function L(){return navigator.maxTouchPoints||"ontouchstart"in this}E.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},t.drag=function(){var r,i,a,o,s=O,l=C,n=P,e=L,g={},y=_.dispatch("start","drag","end"),m=0,u=0;function v(t){t.on("mousedown.drag",c).filter(e).on("touchstart.drag",d).on("touchmove.drag",p).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(t,e){o||!s.call(this,t,e)||(e=x(this,l.call(this,t,e),t,e,"mouse"))&&(w.select(t.view).on("mousemove.drag",f,!0).on("mouseup.drag",h,!0),T(t.view),k(t),a=!1,r=t.clientX,i=t.clientY,e("start",t))}function f(t){var e,n;M(t),a||(e=t.clientX-r,n=t.clientY-i,a=u<e*e+n*n),g.mouse("drag",t)}function h(t){w.select(t.view).on("mousemove.drag mouseup.drag",null),A(t.view,a),M(t),g.mouse("end",t)}function d(t,e){if(s.call(this,t,e))for(var n,r=t.changedTouches,i=l.call(this,t,e),a=r.length,o=0;o<a;++o)(n=x(this,i,t,e,r[o].identifier,r[o]))&&(k(t),n("start",t,r[o]))}function p(t){for(var e,n=t.changedTouches,r=n.length,i=0;i<r;++i)(e=g[n[i].identifier])&&(M(t),e("drag",t,n[i]))}function b(t){var e,n,r=t.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<i;++e)(n=g[r[e].identifier])&&(k(t),n("end",t,r[e]))}function x(o,s,t,l,u,e){var c,f,h,d=y.copy(),p=w.pointer(e||t,s);if(null!=(h=n.call(o,new E("beforestart",{sourceEvent:t,target:v,identifier:u,active:m,x:p[0],y:p[1],dx:0,dy:0,dispatch:d}),l)))return c=h.x-p[0]||0,f=h.y-p[1]||0,function t(e,n,r){var i,a=p;switch(e){case"start":g[u]=t,i=m++;break;case"end":delete g[u],--m;case"drag":p=w.pointer(r||n,s),i=m}d.call(e,o,new E(e,{sourceEvent:n,subject:h,target:v,identifier:u,active:i,x:p[0]+c,y:p[1]+f,dx:p[0]-a[0],dy:p[1]-a[1],dispatch:d}),l)}}return v.filter=function(t){return arguments.length?(s="function"==typeof t?t:S(!!t),v):s},v.container=function(t){return arguments.length?(l="function"==typeof t?t:S(t),v):l},v.subject=function(t){return arguments.length?(n="function"==typeof t?t:S(t),v):n},v.touchable=function(t){return arguments.length?(e="function"==typeof t?t:S(!!t),v):e},v.on=function(){var t=y.on.apply(y,arguments);return t===y?v:t},v.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,v):Math.sqrt(u)},v},t.dragDisable=T,t.dragEnable=A,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-dispatch"),t("d3-selection")):a((i=i||self).d3=i.d3||{},i.d3,i.d3)},{"d3-dispatch":67,"d3-selection":83}],69:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){var h={},d={};function l(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function s(t){var n=Object.create(null),r=[];return t.forEach(function(t){for(var e in t)e in n||r.push(n[e]=e)}),r}function o(t,e){var n=t+"",t=n.length;return t<e?new Array(e-t+1).join(0)+n:n}function u(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+o(-e,6):9999<e?"+"+o(e,6):o(e,4))+"-"+o(t.getUTCMonth()+1,2)+"-"+o(t.getUTCDate(),2)+(a?"T"+o(n,2)+":"+o(r,2)+":"+o(i,2)+"."+o(a,3)+"Z":i?"T"+o(n,2)+":"+o(r,2)+":"+o(i,2)+"Z":r||n?"T"+o(n,2)+":"+o(r,2)+"Z":"")}function e(r){var e=new RegExp('["'+r+"\n\r]"),f=r.charCodeAt(0);function n(r,t){var e,n=[],i=r.length,a=0,o=0,s=i<=0,l=!1;function u(){if(s)return d;if(l)return l=!1,h;var t,e,n=a;if(34===r.charCodeAt(n)){for(;a++<i&&34!==r.charCodeAt(a)||34===r.charCodeAt(++a););return(t=a)>=i?s=!0:10===(e=r.charCodeAt(a++))?l=!0:13===e&&(l=!0,10===r.charCodeAt(a)&&++a),r.slice(n+1,t-1).replace(/""/g,'"')}for(;a<i;){if(10===(e=r.charCodeAt(t=a++)))l=!0;else if(13===e)l=!0,10===r.charCodeAt(a)&&++a;else if(e!==f)continue;return r.slice(n,t)}return s=!0,r.slice(n,i)}for(10===r.charCodeAt(i-1)&&--i,13===r.charCodeAt(i-1)&&--i;(e=u())!==d;){for(var c=[];e!==h&&e!==d;)c.push(e),e=u();t&&null==(c=t(c,o++))||n.push(c)}return n}function i(t,n){return t.map(function(e){return n.map(function(t){return o(e[t])}).join(r)})}function a(t){return t.map(o).join(r)}function o(t){return null==t?"":t instanceof Date?u(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,a){var o,s;return(t=n(t,function(t,e){return o?o(t,e-1):(s=t,void(o=a?(r=a,i=l(n=t),function(t,e){return r(i(t),e,n)}):l(t)));var n,r,i})).columns=s||[],t},parseRows:n,format:function(t,e){return null==e&&(e=s(t)),[e.map(o).join(r)].concat(i(t,e)).join("\n")},formatBody:function(t,e){return null==e&&(e=s(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}var n=e(","),r=n.parse,i=n.parseRows,a=n.format,c=n.formatBody,f=n.formatRows,p=n.formatRow,g=n.formatValue,y=e("\t"),m=y.parse,v=y.parseRows,b=y.format,x=y.formatBody,_=y.formatRows,n=y.formatRow,y=y.formatValue;var w=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();t.autoType=function(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;w&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t},t.csvFormat=a,t.csvFormatBody=c,t.csvFormatRow=p,t.csvFormatRows=f,t.csvFormatValue=g,t.csvParse=r,t.csvParseRows=i,t.dsvFormat=e,t.tsvFormat=b,t.tsvFormatBody=x,t.tsvFormatRow=n,t.tsvFormatRows=_,t.tsvFormatValue=y,t.tsvParse=m,t.tsvParseRows=v,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],70:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){function e(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function n(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var r=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),i=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),a=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),o=Math.PI,s=o/2;function l(t){return(1-Math.cos(o*t))/2}function u(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function c(t){return((t*=2)<=1?u(1-t):2-u(t-1))/2}function f(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var h=4/11,d=6/11,p=8/11,g=.75,y=9/11,m=10/11,v=.9375,b=21/22,x=63/64,_=1/h/h;function w(t){return(t=+t)<h?_*t*t:t<p?_*(t-=d)*t+g:t<m?_*(t-=y)*t+v:_*(t-=b)*t+x}var k=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(1.70158),M=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(1.70158),T=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),A=2*Math.PI,S=function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=A);function t(t){return n*u(- --t)*Math.sin((i-t)/r)}return t.amplitude=function(t){return e(t,r*A)},t.period=function(t){return e(n,t)},t}(1,.3),E=function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=A);function t(t){return 1-n*u(t=+t)*Math.sin((t+i)/r)}return t.amplitude=function(t){return e(t,r*A)},t.period=function(t){return e(n,t)},t}(1,.3),O=function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=A);function t(t){return((t=2*t-1)<0?n*u(-t)*Math.sin((i-t)/r):2-n*u(t)*Math.sin((i+t)/r))/2}return t.amplitude=function(t){return e(t,r*A)},t.period=function(t){return e(n,t)},t}(1,.3);t.easeBack=T,t.easeBackIn=k,t.easeBackInOut=T,t.easeBackOut=M,t.easeBounce=w,t.easeBounceIn=function(t){return 1-w(1-t)},t.easeBounceInOut=function(t){return((t*=2)<=1?1-w(1-t):w(t-1)+1)/2},t.easeBounceOut=w,t.easeCircle=f,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleInOut=f,t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCubic=n,t.easeCubicIn=function(t){return t*t*t},t.easeCubicInOut=n,t.easeCubicOut=function(t){return--t*t*t+1},t.easeElastic=E,t.easeElasticIn=S,t.easeElasticInOut=O,t.easeElasticOut=E,t.easeExp=c,t.easeExpIn=function(t){return u(1-+t)},t.easeExpInOut=c,t.easeExpOut=function(t){return 1-u(t)},t.easeLinear=function(t){return+t},t.easePoly=a,t.easePolyIn=r,t.easePolyInOut=a,t.easePolyOut=i,t.easeQuad=e,t.easeQuadIn=function(t){return t*t},t.easeQuadInOut=e,t.easeQuadOut=function(t){return t*(2-t)},t.easeSin=l,t.easeSinIn=function(t){return 1==+t?1:1-Math.cos(t*s)},t.easeSinInOut=l,t.easeSinOut=function(t){return Math.sin(t*s)},Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],71:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,a){function n(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function i(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function o(t,e){return fetch(t,e).then(i)}function e(r){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),o(t,e).then(function(t){return r(t,n)})}}var s=e(a.csvParse),l=e(a.tsvParse);function u(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function c(n){return function(t,e){return o(t,e).then(function(t){return(new DOMParser).parseFromString(t,n)})}}var f=c("application/xml"),h=c("text/html"),d=c("image/svg+xml");t.blob=function(t,e){return fetch(t,e).then(n)},t.buffer=function(t,e){return fetch(t,e).then(r)},t.csv=s,t.dsv=function(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=a.dsvFormat(t);return o(e,n).then(function(t){return i.parse(t,r)})},t.html=h,t.image=function(i,a){return new Promise(function(t,e){var n,r=new Image;for(n in a)r[n]=a[n];r.onerror=e,r.onload=function(){t(r)},r.src=i})},t.json=function(t,e){return fetch(t,e).then(u)},t.svg=d,t.text=o,t.tsv=l,t.xml=f,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-dsv")):a((i=i||self).d3=i.d3||{},i.d3)},{"d3-dsv":69}],72:[function(t,e,n){"use strict";function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i;i=function(t,y,m,v){function b(t){return function(){return t}}function x(t){return 1e-6*(t()-.5)}function _(t){return t.x+t.vx}function w(t){return t.y+t.vy}function k(t){return t.index}function M(t,e){t=t.get(e);if(!t)throw new Error("node not found: "+e);return t}var T=1664525,A=1013904223,S=4294967296;function s(t){return t.x}function g(t){return t.y}var E=Math.PI*(3-Math.sqrt(5));t.forceCenter=function(a,o){var s,l=1;function e(){for(var t,e=s.length,n=0,r=0,i=0;i<e;++i)n+=(t=s[i]).x,r+=t.y;for(n=(n/e-a)*l,r=(r/e-o)*l,i=0;i<e;++i)(t=s[i]).x-=n,t.y-=r}return null==a&&(a=0),null==o&&(o=0),e.initialize=function(t){s=t},e.x=function(t){return arguments.length?(a=+t,e):a},e.y=function(t){return arguments.length?(o=+t,e):o},e.strength=function(t){return arguments.length?(l=+t,e):l},e},t.forceCollide=function(r){var a,o,h,d=1,p=1;function e(){for(var t,e,s,l,u,c,f,n=a.length,r=0;r<p;++r)for(e=y.quadtree(a,_,w).visitAfter(g),t=0;t<n;++t)s=a[t],c=o[s.index],f=c*c,l=s.x+s.vx,u=s.y+s.vy,e.visit(i);function i(t,e,n,r,i){var a=t.data,o=t.r,t=c+o;if(!a)return l+t<e||r<l-t||u+t<n||i<u-t;a.index>s.index&&((i=(r=l-a.x-a.vx)*r+(n=u-a.y-a.vy)*n)<t*t&&(0===r&&(i+=(r=x(h))*r),0===n&&(i+=(n=x(h))*n),i=(t-(i=Math.sqrt(i)))/i*d,s.vx+=(r*=i)*(t=(o*=o)/(f+o)),s.vy+=(n*=i)*t,a.vx-=r*(t=1-t),a.vy-=n*t))}}function g(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function n(){if(a){var t,e,n=a.length;for(o=new Array(n),t=0;t<n;++t)e=a[t],o[e.index]=+r(e,t,a)}}return"function"!=typeof r&&(r=b(null==r?1:+r)),e.initialize=function(t,e){a=t,h=e,n()},e.iterations=function(t){return arguments.length?(p=+t,e):p},e.strength=function(t){return arguments.length?(d=+t,e):d},e.radius=function(t){return arguments.length?(r="function"==typeof t?t:b(+t),n(),e):r},e},t.forceLink=function(u){var c,f,a,o,h,d,s=k,n=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},r=b(30),p=1;function e(t){for(var e=0,n=u.length;e<p;++e)for(var r,i,a,o,s,l=0;l<n;++l)r=(s=u[l]).source,a=(i=s.target).x+i.vx-r.x-r.vx||x(d),o=i.y+i.vy-r.y-r.vy||x(d),a*=s=((s=Math.sqrt(a*a+o*o))-f[l])/s*t*c[l],o*=s,i.vx-=a*(s=h[l]),i.vy-=o*s,r.vx+=a*(s=1-s),r.vy+=o*s}function i(){if(a){var t,e=a.length,n=u.length,r=new Map(a.map(function(t,e){return[s(t,e,a),t]})),i=0;for(o=new Array(e);i<n;++i)(t=u[i]).index=i,"object"!==O(t.source)&&(t.source=M(r,t.source)),"object"!==O(t.target)&&(t.target=M(r,t.target)),o[t.source.index]=(o[t.source.index]||0)+1,o[t.target.index]=(o[t.target.index]||0)+1;for(i=0,h=new Array(n);i<n;++i)t=u[i],h[i]=o[t.source.index]/(o[t.source.index]+o[t.target.index]);c=new Array(n),l(),f=new Array(n),g()}}function l(){if(a)for(var t=0,e=u.length;t<e;++t)c[t]=+n(u[t],t,u)}function g(){if(a)for(var t=0,e=u.length;t<e;++t)f[t]=+r(u[t],t,u)}return null==u&&(u=[]),e.initialize=function(t,e){a=t,d=e,i()},e.links=function(t){return arguments.length?(u=t,i(),e):u},e.id=function(t){return arguments.length?(s=t,e):s},e.iterations=function(t){return arguments.length?(p=+t,e):p},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:b(+t),l(),e):n},e.distance=function(t){return arguments.length?(r="function"==typeof t?t:b(+t),g(),e):r},e},t.forceManyBody=function(){var i,l,u,c,f,r=b(-30),h=1,d=1/0,p=.81;function e(t){var e,n=i.length,r=y.quadtree(i,s,g).visitAfter(a);for(c=t,e=0;e<n;++e)l=i[e],r.visit(o)}function n(){if(i){var t,e,n=i.length;for(f=new Array(n),t=0;t<n;++t)e=i[t],f[e.index]=+r(e,t,i)}}function a(t){var e,n,r,i,a,o=0,s=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(o+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else for(e=t,e.x=e.data.x,e.y=e.data.y;o+=f[e.data.index],e=e.next;);t.value=o}function o(t,e,n,r){if(!t.value)return!0;var i=t.x-l.x,a=t.y-l.y,o=r-e,s=i*i+a*a;if(o*o/p<s)return s<d&&(0===i&&(s+=(i=x(u))*i),0===a&&(s+=(a=x(u))*a),s<h&&(s=Math.sqrt(h*s)),l.vx+=i*t.value*c/s,l.vy+=a*t.value*c/s),!0;if(!(t.length||d<=s))for(t.data===l&&!t.next||(0===i&&(s+=(i=x(u))*i),0===a&&(s+=(a=x(u))*a),s<h&&(s=Math.sqrt(h*s)));t.data!==l&&(o=f[t.data.index]*c/s,l.vx+=i*o,l.vy+=a*o),t=t.next;);}return e.initialize=function(t,e){i=t,u=e,n()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:b(+t),n(),e):r},e.distanceMin=function(t){return arguments.length?(h=t*t,e):Math.sqrt(h)},e.distanceMax=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e.theta=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e},t.forceRadial=function(n,s,l){var u,c,f,r=b(.1);function e(t){for(var e=0,n=u.length;e<n;++e){var r=u[e],i=r.x-s||1e-6,a=r.y-l||1e-6,o=Math.sqrt(i*i+a*a),o=(f[e]-o)*c[e]*t/o;r.vx+=i*o,r.vy+=a*o}}function i(){if(u){var t,e=u.length;for(c=new Array(e),f=new Array(e),t=0;t<e;++t)f[t]=+n(u[t],t,u),c[t]=isNaN(f[t])?0:+r(u[t],t,u)}}return"function"!=typeof n&&(n=b(+n)),null==s&&(s=0),null==l&&(l=0),e.initialize=function(t){u=t,i()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:b(+t),i(),e):r},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:b(+t),i(),e):n},e.x=function(t){return arguments.length?(s=+t,e):s},e.y=function(t){return arguments.length?(l=+t,e):l},e},t.forceSimulation=function(l){var a,t,o=1,e=.001,s=1-Math.pow(e,1/300),u=0,c=.6,f=new Map,n=v.timer(h),r=m.dispatch("tick","end"),i=(t=1,function(){return(t=(T*t+A)%S)/S});function h(){d(),r.call("tick",a),o<e&&(n.stop(),r.call("end",a))}function d(t){var e,n,r=l.length;void 0===t&&(t=1);for(var i=0;i<t;++i)for(o+=(u-o)*s,f.forEach(function(t){t(o)}),e=0;e<r;++e)null==(n=l[e]).fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0);return a}function p(){for(var t,e,n,r=0,i=l.length;r<i;++r)(n=l[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),(isNaN(n.x)||isNaN(n.y))&&(t=10*Math.sqrt(.5+r),e=r*E,n.x=t*Math.cos(e),n.y=t*Math.sin(e)),(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}function g(t){return t.initialize&&t.initialize(l,i),t}return null==l&&(l=[]),p(),a={tick:d,restart:function(){return n.restart(h),a},stop:function(){return n.stop(),a},nodes:function(t){return arguments.length?(l=t,p(),f.forEach(g),a):l},alpha:function(t){return arguments.length?(o=+t,a):o},alphaMin:function(t){return arguments.length?(e=+t,a):e},alphaDecay:function(t){return arguments.length?(s=+t,a):+s},alphaTarget:function(t){return arguments.length?(u=+t,a):u},velocityDecay:function(t){return arguments.length?(c=1-t,a):1-c},randomSource:function(t){return arguments.length?(i=t,f.forEach(g),a):i},force:function(t,e){return 1<arguments.length?(null==e?f.delete(t):f.set(t,g(e)),a):f.get(t)},find:function(t,e,n){var r,i,a,o=0,s=l.length;for(null==n?n=1/0:n*=n,o=0;o<s;++o)(r=(r=t-(i=l[o]).x)*r+(r=e-i.y)*r)<n&&(a=i,n=r);return a},on:function(t,e){return 1<arguments.length?(r.on(t,e),a):r.on(t)}}},t.forceX=function(n){var i,a,o,r=b(.1);function e(t){for(var e,n=0,r=i.length;n<r;++n)(e=i[n]).vx+=(o[n]-e.x)*a[n]*t}function s(){if(i){var t,e=i.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+n(i[t],t,i))?0:+r(i[t],t,i)}}return"function"!=typeof n&&(n=b(null==n?0:+n)),e.initialize=function(t){i=t,s()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:b(+t),s(),e):r},e.x=function(t){return arguments.length?(n="function"==typeof t?t:b(+t),s(),e):n},e},t.forceY=function(n){var i,a,o,r=b(.1);function e(t){for(var e,n=0,r=i.length;n<r;++n)(e=i[n]).vy+=(o[n]-e.y)*a[n]*t}function s(){if(i){var t,e=i.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+n(i[t],t,i))?0:+r(i[t],t,i)}}return"function"!=typeof n&&(n=b(null==n?0:+n)),e.initialize=function(t){i=t,s()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:b(+t),s(),e):r},e.y=function(t){return arguments.length?(n="function"==typeof t?t:b(+t),s(),e):n},e},Object.defineProperty(t,"__esModule",{value:!0})},"object"===((r=void 0)===n?"undefined":O(n))&&void 0!==e?i(n,t("d3-quadtree"),t("d3-dispatch"),t("d3-timer")):i((r=r||self).d3=r.d3||{},r.d3,r.d3,r.d3)},{"d3-dispatch":67,"d3-quadtree":79,"d3-timer":86}],73:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(e){function a(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function u(t){return(t=a(Math.abs(t)))?t[1]:NaN}var S,n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E(t){if(!(e=n.exec(t)))throw new Error("invalid format: "+t);var e;return new r({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function r(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function i(t,e){e=a(t,e);if(!e)return t+"";t=e[0],e=e[1];return e<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")}E.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var O={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return i(100*t,e)},r:i,s:function(t,e){if(!(r=a(t,e)))return t+"";var n=r[0],r=(i=r[1])-(S=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=n.length;return r===i?n:i<r?n+new Array(r-i+1).join("0"):0<r?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+a(t,Math.max(0,e+r-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function c(t){return t}var o,f=Array.prototype.map,C=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function s(t){var e,s,l,w=void 0===t.grouping||void 0===t.thousands?c:(s=f.call(t.grouping,Number),l=t.thousands+"",function(t,e){for(var n=t.length,r=[],i=0,a=s[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),r.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=s[i=(i+1)%s.length];return r.reverse().join(l)}),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",k=void 0===t.decimal?".":t.decimal+"",M=void 0===t.numerals?c:(e=f.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),a=void 0===t.percent?"%":t.percent+"",T=void 0===t.minus?"−":t.minus+"",A=void 0===t.nan?"NaN":t.nan+"";function o(t){var u=(t=E(t)).fill,c=t.align,f=t.sign,e=t.symbol,h=t.zero,d=t.width,p=t.comma,g=t.precision,y=t.trim,m=t.type;"n"===m?(p=!0,m="g"):O[m]||(void 0===g&&(g=12),y=!0,m="g"),(h||"0"===u&&"="===c)&&(h=!0,u="0",c="=");var v="$"===e?r:"#"===e&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===e?i:/[%p]/.test(m)?a:"",x=O[m],_=/[defgprs%]/.test(m);function n(t){var e,n,r,i=v,a=b;if("c"===m)a=x(t)+a,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?A:x(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t}(t)),o&&0==+t&&"+"!==f&&(o=!1),i=(o?"("===f?f:T:"-"===f||"("===f?"":f)+i,a=("s"===m?C[8+S/3]:"")+a+(o&&"("===f?")":""),_)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){a=(46===r?k+t.slice(e+1):t.slice(e))+a,t=t.slice(0,e);break}}p&&!h&&(t=w(t,1/0));var s=i.length+t.length+a.length,l=s<d?new Array(d-s+1).join(u):"";switch(p&&h&&(t=w(l+t,l.length?d-a.length:1/0),l=""),c){case"<":t=i+t+a+l;break;case"=":t=i+l+t+a;break;case"^":t=l.slice(0,s=l.length>>1)+i+t+a+l.slice(s);break;default:t=l+i+t+a}return M(t)}return g=void 0===g?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=E(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(u(e)/3))),r=Math.pow(10,-e),i=C[8+e/3];return function(t){return n(r*t)+i}}}}function t(t){return o=s(t),e.format=o.format,e.formatPrefix=o.formatPrefix,o}t({thousands:",",grouping:[3],currency:["$",""]}),e.FormatSpecifier=r,e.formatDefaultLocale=t,e.formatLocale=s,e.formatSpecifier=E,e.precisionFixed=function(t){return Math.max(0,-u(Math.abs(t)))},e.precisionPrefix=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(u(e)/3)))-u(Math.abs(t)))},e.precisionRound=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,u(e)-u(t))+1},Object.defineProperty(e,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i="undefined"!=typeof globalThis?globalThis:i||self).d3=i.d3||{})},{}],74:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,S){var C=1e-6,E=1e-12,O=Math.PI,P=O/2,L=O/4,R=2*O,j=180/O,N=O/180,D=Math.abs,p=Math.atan,z=Math.atan2,I=Math.cos,b=Math.ceil,n=Math.exp,l=Math.hypot,o=Math.log,s=Math.pow,F=Math.sin,u=Math.sign||function(t){return 0<t?1:t<0?-1:0},B=Math.sqrt,r=Math.tan;function i(t){return 1<t?0:t<-1?O:Math.acos(t)}function U(t){return 1<t?P:t<-1?-P:Math.asin(t)}function g(t){return(t=F(t/2))*t}function a(){}function c(t,e){t&&h.hasOwnProperty(t.type)&&h[t.type](t,e)}var f={Feature:function(t,e){c(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)c(n[r].geometry,e)}},h={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){d(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)d(n[r],e,0)},Polygon:function(t,e){y(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)y(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)c(n[r],e)}};function d(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function y(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)d(t[n],e,1);e.polygonEnd()}function m(t,e){t&&f.hasOwnProperty(t.type)?f[t.type](t,e):c(t,e)}var v,x,_,w,k,M,T,A,V,H,q,G,Y,X,W,Z,K=new S.Adder,e=new S.Adder,Q={point:a,lineStart:a,lineEnd:a,polygonStart:function(){K=new S.Adder,Q.lineStart=$,Q.lineEnd=J},polygonEnd:function(){var t=+K;e.add(t<0?R+t:t),this.lineStart=this.lineEnd=this.point=a},sphere:function(){e.add(R)}};function $(){Q.point=tt}function J(){et(v,x)}function tt(t,e){Q.point=et,v=t,x=e,_=t*=N,w=I(e=(e*=N)/2+L),k=F(e)}function et(t,e){var n=(t*=N)-_,r=0<=n?1:-1,i=r*n,a=I(e=(e*=N)/2+L),o=F(e),n=k*o,e=w*a+n*I(i),i=n*r*F(i);K.add(z(i,e)),_=t,w=a,k=o}function nt(t){return[z(t[1],t[0]),U(t[2])]}function rt(t){var e=t[0],n=t[1],t=I(n);return[t*I(e),t*F(e),F(n)]}function it(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function at(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ot(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function st(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function lt(t){var e=B(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var ut,ct,ft,ht,dt,pt,gt,yt,mt,vt,bt,xt,_t,wt,kt,Mt,Tt={point:At,lineStart:Et,lineEnd:Ot,polygonStart:function(){Tt.point=Ct,Tt.lineStart=Pt,Tt.lineEnd=Lt,X=new S.Adder,Q.polygonStart()},polygonEnd:function(){Q.polygonEnd(),Tt.point=At,Tt.lineStart=Et,Tt.lineEnd=Ot,K<0?(M=-(A=180),T=-(V=90)):C<X?V=90:X<-C&&(T=-90),Z[0]=M,Z[1]=A},sphere:function(){M=-(A=180),T=-(V=90)}};function At(t,e){W.push(Z=[M=t,A=t]),e<T&&(T=e),V<e&&(V=e)}function St(t,e){var n,r,i,a,o,s=rt([t*N,e*N]);Y?(i=at(Y,s),lt(n=at([i[1],-i[0],0],i)),n=nt(n),r=0<(o=t-H)?1:-1,i=n[0]*j*r,(o=180<D(o))^(r*H<i&&i<r*t)?(a=n[1]*j,V<a&&(V=a)):o^(r*H<(i=(i+360)%360-180)&&i<r*t)?(a=-n[1]*j)<T&&(T=a):(e<T&&(T=e),V<e&&(V=e)),o?t<H?Rt(M,t)>Rt(M,A)&&(A=t):Rt(t,A)>Rt(M,A)&&(M=t):M<=A?(t<M&&(M=t),A<t&&(A=t)):H<t?Rt(M,t)>Rt(M,A)&&(A=t):Rt(t,A)>Rt(M,A)&&(M=t)):W.push(Z=[M=t,A=t]),e<T&&(T=e),V<e&&(V=e),Y=s,H=t}function Et(){Tt.point=St}function Ot(){Z[0]=M,Z[1]=A,Tt.point=At,Y=null}function Ct(t,e){var n;Y?(n=t-H,X.add(180<D(n)?n+(0<n?360:-360):n)):(q=t,G=e),Q.point(t,e),St(t,e)}function Pt(){Q.lineStart()}function Lt(){Ct(q,G),Q.lineEnd(),D(X)>C&&(M=-(A=180)),Z[0]=M,Z[1]=A,Y=null}function Rt(t,e){return(e-=t)<0?e+360:e}function jt(t,e){return t[0]-e[0]}function Nt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Dt={sphere:a,point:zt,lineStart:Ft,lineEnd:Vt,polygonStart:function(){Dt.lineStart=Ht,Dt.lineEnd=qt},polygonEnd:function(){Dt.lineStart=Ft,Dt.lineEnd=Vt}};function zt(t,e){t*=N;var n=I(e*=N);It(n*I(t),n*F(t),F(e))}function It(t,e,n){ft+=(t-ft)/++ut,ht+=(e-ht)/ut,dt+=(n-dt)/ut}function Ft(){Dt.point=Bt}function Bt(t,e){t*=N;var n=I(e*=N);wt=n*I(t),kt=n*F(t),Mt=F(e),Dt.point=Ut,It(wt,kt,Mt)}function Ut(t,e){t*=N;var n=I(e*=N),r=n*I(t),n=n*F(t),t=F(e),e=z(B((e=kt*t-Mt*n)*e+(e=Mt*r-wt*t)*e+(e=wt*n-kt*r)*e),wt*r+kt*n+Mt*t);ct+=e,pt+=e*(wt+(wt=r)),gt+=e*(kt+(kt=n)),yt+=e*(Mt+(Mt=t)),It(wt,kt,Mt)}function Vt(){Dt.point=zt}function Ht(){Dt.point=Gt}function qt(){Yt(xt,_t),Dt.point=zt}function Gt(t,e){xt=t,_t=e,t*=N,e*=N,Dt.point=Yt;var n=I(e);wt=n*I(t),kt=n*F(t),Mt=F(e),It(wt,kt,Mt)}function Yt(t,e){t*=N;var n=I(e*=N),r=n*I(t),i=n*F(t),a=F(e),o=kt*a-Mt*i,s=Mt*r-wt*a,n=wt*i-kt*r,t=l(o,s,n),e=U(t),t=t&&-e/t;mt.add(t*o),vt.add(t*s),bt.add(t*n),ct+=e,pt+=e*(wt+(wt=r)),gt+=e*(kt+(kt=i)),yt+=e*(Mt+(Mt=a)),It(wt,kt,Mt)}function Xt(t){return function(){return t}}function Wt(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t}function Zt(t,e){return[D(t)>O?t+Math.round(-t/R)*R:t,e]}function Kt(t,e,n){return(t%=R)?e||n?Wt($t(t),Jt(e,n)):$t(t):e||n?Jt(e,n):Zt}function Qt(n){return function(t,e){return[O<(t+=n)?t-R:t<-O?t+R:t,e]}}function $t(t){var e=Qt(t);return e.invert=Qt(-t),e}function Jt(t,e){var i=I(t),a=F(t),o=I(e),s=F(e);function n(t,e){var n=I(e),r=I(t)*n,t=F(t)*n,n=F(e),e=n*i+r*a;return[z(t*o-e*s,r*i-n*a),U(e*o+t*s)]}return n.invert=function(t,e){var n=I(e),r=I(t)*n,t=F(t)*n,n=F(e),e=n*o-t*s;return[z(t*o+n*s,r*i+e*a),U(e*i-r*a)]},n}function te(e){function t(t){return(t=e(t[0]*N,t[1]*N))[0]*=j,t[1]*=j,t}return e=Kt(e[0]*N,e[1]*N,2<e.length?e[2]*N:0),t.invert=function(t){return(t=e.invert(t[0]*N,t[1]*N))[0]*=j,t[1]*=j,t},t}function ee(t,e,n,r,i,a){if(n){var o=I(e),s=F(e),l=r*n;null==i?(i=e+r*R,a=e-l/2):(i=ne(o,i),a=ne(o,a),(0<r?i<a:a<i)&&(i+=r*R));for(var u,c=i;0<r?a<c:c<a;c-=l)u=nt([o,-s*I(c),-s*F(c)]),t.point(u[0],u[1])}}function ne(t,e){(e=rt(e))[0]-=t,lt(e);t=i(-e[1]);return((-e[2]<0?-t:t)+R-C)%R}function re(){var r,e=[];return{point:function(t,e,n){r.push([t,e,n])},lineStart:function(){e.push(r=[])},lineEnd:a,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],r=null,t}}}function ie(t,e){return D(t[0]-e[0])<C&&D(t[1]-e[1])<C}function ae(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function oe(t,e,n,r,a){var o,i,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],i=t[e];if(ie(r,i)){if(!r[2]&&!i[2]){for(a.lineStart(),o=0;o<e;++o)a.point((r=t[o])[0],r[1]);return void a.lineEnd()}i[0]+=2*C}s.push(n=new ae(r,t,null,!0)),l.push(n.o=new ae(r,null,n,!1)),s.push(n=new ae(i,t,null,!1)),l.push(n.o=new ae(i,null,n,!0))}}),s.length){for(l.sort(e),se(s),se(l),o=0,i=l.length;o<i;++o)l[o].e=n=!n;for(var u,c,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;u=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,i=u.length;o<i;++o)a.point((c=u[o])[0],c[1]);else r(h.x,h.n.x,1,a);h=h.n}else{if(d)for(u=h.p.z,o=u.length-1;0<=o;--o)a.point((c=u[o])[0],c[1]);else r(h.x,h.p.x,-1,a);h=h.p}}while(u=(h=h.o).z,d=!d,!h.v);a.lineEnd()}}}function se(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function le(t){return D(t[0])<=O?t[0]:u(t[0])*((D(t[0])+O)%R-O)}function ue(t,e){var n=le(e),r=e[1],e=F(r),i=[F(n),-I(n),0],a=0,o=0,s=new S.Adder;1===e?r=P+C:-1===e&&(r=-P-C);for(var l=0,u=t.length;l<u;++l)if(f=(c=t[l]).length)for(var c,f,h=c[f-1],d=le(h),p=h[1]/2+L,g=F(p),y=I(p),m=0;m<f;++m,d=b,g=_,y=w,h=v){var v=c[m],b=le(v),x=v[1]/2+L,_=F(x),w=I(x),k=b-d,M=0<=k?1:-1,T=M*k,A=O<T,x=g*_;s.add(z(x*M*F(T),y*w+x*I(T))),a+=A?k+M*R:k,A^n<=d^n<=b&&(lt(T=at(rt(h),rt(v))),lt(M=at(i,T)),((M=(A^0<=k?-1:1)*U(M[2]))<r||r===M&&(T[0]||T[1]))&&(o+=A^0<=k?1:-1))}return(a<-C||a<C&&s<-E)^1&o}function ce(y,m,v,b){return function(s){var l,u,c,n=m(s),f=re(),h=m(f),d=!1,e={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.point=p,e.lineStart=o,e.lineEnd=g,u=[],l=[]},polygonEnd:function(){e.point=r,e.lineStart=i,e.lineEnd=a,u=S.merge(u);var t=ue(l,b);u.length?(d||(s.polygonStart(),d=!0),oe(u,he,t,v,s)):t&&(d||(s.polygonStart(),d=!0),s.lineStart(),v(null,null,1,s),s.lineEnd()),d&&(s.polygonEnd(),d=!1),u=l=null},sphere:function(){s.polygonStart(),s.lineStart(),v(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function r(t,e){y(t,e)&&s.point(t,e)}function t(t,e){n.point(t,e)}function i(){e.point=t,n.lineStart()}function a(){e.point=r,n.lineEnd()}function p(t,e){c.push([t,e]),h.point(t,e)}function o(){h.lineStart(),c=[]}function g(){p(c[0][0],c[0][1]),h.lineEnd();var t,e,n,r,i=h.clean(),a=f.result(),o=a.length;if(c.pop(),l.push(c),c=null,o)if(1&i){if(0<(e=(n=a[0]).length-1)){for(d||(s.polygonStart(),d=!0),s.lineStart(),t=0;t<e;++t)s.point((r=n[t])[0],r[1]);s.lineEnd()}}else 1<o&&2&i&&a.push(a.pop().concat(a.shift())),u.push(a.filter(fe))}return e}}function fe(t){return 1<t.length}function he(t,e){return((t=t.x)[0]<0?t[1]-P-C:P-t[1])-((e=e.x)[0]<0?e[1]-P-C:P-e[1])}Zt.invert=Zt;var de=ce(function(){return 1},function(u){var c,f=NaN,h=NaN,d=NaN;return{lineStart:function(){u.lineStart(),c=1},point:function(t,e){var n,r,i,a,o,s=0<t?O:-O,l=D(t-f);D(l-O)<C?(u.point(f,h=0<(h+e)/2?P:-P),u.point(d,h),u.lineEnd(),u.lineStart(),u.point(s,h),u.point(t,h),c=0):d!==s&&O<=l&&(D(f-d)<C&&(f-=d*C),D(t-s)<C&&(t-=s*C),r=h,a=e,o=F((n=f)-(i=t)),h=D(o)>C?p((F(r)*(l=I(a))*F(i)-F(a)*(i=I(r))*F(n))/(i*l*o)):(r+a)/2,u.point(d,h),u.lineEnd(),u.lineStart(),u.point(s,h),c=0),u.point(f=t,h=e),d=s},lineEnd:function(){u.lineEnd(),f=h=NaN},clean:function(){return 2-c}}},function(t,e,n,r){var i;null==t?(i=n*P,r.point(-O,i),r.point(0,i),r.point(O,i),r.point(O,0),r.point(O,-i),r.point(0,-i),r.point(-O,-i),r.point(-O,0),r.point(-O,i)):D(t[0]-e[0])>C?(t=t[0]<e[0]?O:-O,i=n*t/2,r.point(-t,i),r.point(0,i),r.point(t,i)):r.point(e[0],e[1])},[-O,-P]);function pe(i){var d=I(i),a=6*N,h=0<d,p=D(d)>C;function g(t,e){return I(t)*I(e)>d}function y(t,e,n){var r=[1,0,0],i=at(rt(t),rt(e)),a=it(i,i),o=i[0],s=a-o*o;if(!s)return!n&&t;var l=d*a/s,u=-d*o/s,c=at(r,i),f=st(r,l);ot(f,st(i,u));a=c,o=it(f,a),s=it(a,a),r=o*o-s*(it(f,f)-1);if(!(r<0)){l=B(r),i=st(a,(-o-l)/s);if(ot(i,f),i=nt(i),!n)return i;var h,u=t[0],c=e[0],r=t[1],n=e[1];c<u&&(h=u,u=c,c=h);t=c-u,e=D(t-O)<C;if(!e&&n<r&&(h=r,r=n,n=h),e||t<C?e?0<r+n^i[1]<(D(i[0]-u)<C?r:n):r<=i[1]&&i[1]<=n:O<t^(u<=i[0]&&i[0]<=c)){s=st(a,(-o+l)/s);return ot(s,f),[i,nt(s)]}}}function m(t,e){var n=h?i:O-i,r=0;return t<-n?r|=1:n<t&&(r|=2),e<-n?r|=4:n<e&&(r|=8),r}return ce(g,function(o){var s,l,u,c,f;return{lineStart:function(){c=u=!1,f=1},point:function(t,e){var n,r,i=[t,e],a=g(t,e),e=h?a?0:m(t,e):a?m(t+(t<0?O:-O),e):0;!s&&(c=u=a)&&o.lineStart(),a!==u&&((n=y(s,i))&&!ie(s,n)&&!ie(i,n)||(i[2]=1)),a!==u?(f=0,a?(o.lineStart(),n=y(i,s),o.point(n[0],n[1])):(n=y(s,i),o.point(n[0],n[1],2),o.lineEnd()),s=n):p&&s&&h^a&&(e&l||!(r=y(i,s,!0))||(f=0,h?(o.lineStart(),o.point(r[0][0],r[0][1]),o.point(r[1][0],r[1][1]),o.lineEnd()):(o.point(r[1][0],r[1][1]),o.lineEnd(),o.lineStart(),o.point(r[0][0],r[0][1],3)))),!a||s&&ie(s,i)||o.point(i[0],i[1]),s=i,u=a,l=e},lineEnd:function(){u&&o.lineEnd(),s=null},clean:function(){return f|(c&&u)<<1}}},function(t,e,n,r){ee(r,i,a,n,t,e)},h?[0,-i]:[-O,i-O])}var ge,ye,me,ve,be=1e9,xe=-be;function _e(m,v,b,x){function _(t,e){return m<=t&&t<=b&&v<=e&&e<=x}function w(t,e,n,r){var i=0,a=0;if(null==t||(i=o(t,n))!==(a=o(e,n))||s(t,e)<0^0<n)for(;r.point(0===i||3===i?m:b,1<i?x:v),(i=(i+n+4)%4)!==a;);else r.point(e[0],e[1])}function o(t,e){return D(t[0]-m)<C?0<e?0:3:D(t[0]-b)<C?0<e?2:1:D(t[1]-v)<C?0<e?1:0:0<e?3:2}function k(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var i,f,a,o,s,l,u,c,h,d,p,g=r,t=re(),e={point:n,lineStart:function(){e.point=y,f&&f.push(a=[]);d=!0,h=!1,u=c=NaN},lineEnd:function(){i&&(y(o,s),l&&h&&t.rejoin(),i.push(t.result()));e.point=n,h&&g.lineEnd()},polygonStart:function(){g=t,i=[],f=[],p=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=f.length;e<n;++e)for(var r,i,a=f[e],o=1,s=a.length,l=a[0],u=l[0],c=l[1];o<s;++o)r=u,i=c,l=a[o],u=l[0],c=l[1],i<=x?x<c&&(c-i)*(m-r)<(u-r)*(x-i)&&++t:c<=x&&(u-r)*(x-i)<(c-i)*(m-r)&&--t;return t}(),e=p&&t,n=(i=S.merge(i)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),w(null,null,1,r),r.lineEnd()),n&&oe(i,k,t,w,r),r.polygonEnd());g=r,i=f=a=null}};function n(t,e){_(t,e)&&g.point(t,e)}function y(t,e){var n,r,i=_(t,e);f&&a.push([t,e]),d?(o=t,s=e,d=!1,(l=i)&&(g.lineStart(),g.point(t,e))):i&&h?g.point(t,e):!function(t,e,n,r,i,a){var o=t[0],s=t[1],l=0,u=1,c=e[0]-o,f=e[1]-s,n=n-o;if(c||!(0<n)){if(n/=c,c<0){if(n<l)return;n<u&&(u=n)}else if(0<c){if(u<n)return;l<n&&(l=n)}if(n=i-o,c||!(n<0)){if(n/=c,c<0){if(u<n)return;l<n&&(l=n)}else if(0<c){if(n<l)return;n<u&&(u=n)}if(n=r-s,f||!(0<n)){if(n/=f,f<0){if(n<l)return;n<u&&(u=n)}else if(0<f){if(u<n)return;l<n&&(l=n)}if(n=a-s,f||!(n<0)){if(n/=f,f<0){if(u<n)return;l<n&&(l=n)}else if(0<f){if(n<l)return;n<u&&(u=n)}return 0<l&&(t[0]=o+l*c,t[1]=s+l*f),u<1&&(e[0]=o+u*c,e[1]=s+u*f),1}}}}}(n=[u=Math.max(xe,Math.min(be,u)),c=Math.max(xe,Math.min(be,c))],r=[t=Math.max(xe,Math.min(be,t)),e=Math.max(xe,Math.min(be,e))],m,v,b,x)?i&&(g.lineStart(),g.point(t,e),p=!1):(h||(g.lineStart(),g.point(n[0],n[1])),g.point(r[0],r[1]),i||g.lineEnd(),p=!1),u=t,c=e,h=i}return e}}var we={sphere:a,point:a,lineStart:function(){we.point=Me,we.lineEnd=ke},lineEnd:a,polygonStart:a,polygonEnd:a};function ke(){we.point=we.lineEnd=a}function Me(t,e){ye=t*=N,me=F(e*=N),ve=I(e),we.point=Te}function Te(t,e){t*=N;var n=F(e*=N),r=I(e),i=D(t-ye),a=I(i),e=r*F(i),i=ve*n-me*r*a,a=me*n+ve*r*a;ge.add(z(B(e*e+i*i),a)),ye=t,me=n,ve=r}function Ae(t){return ge=new S.Adder,m(t,we),+ge}var Se=[null,null],Ee={type:"LineString",coordinates:Se};function Oe(t,e){return Se[0]=t,Se[1]=e,Ae(Ee)}var Ce={Feature:function(t,e){return Le(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Le(n[r].geometry,e))return!0;return!1}},Pe={Sphere:function(){return!0},Point:function(t,e){return Re(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Re(n[r],e))return!0;return!1},LineString:function(t,e){return je(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(je(n[r],e))return!0;return!1},Polygon:function(t,e){return Ne(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ne(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Le(n[r],e))return!0;return!1}};function Le(t,e){return!(!t||!Pe.hasOwnProperty(t.type))&&Pe[t.type](t,e)}function Re(t,e){return 0===Oe(t,e)}function je(t,e){for(var n,r,i,a=0,o=t.length;a<o;a++){if(0===(r=Oe(t[a],e)))return!0;if(0<a&&0<(i=Oe(t[a],t[a-1]))&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<E*i)return!0;n=r}return!1}function Ne(t,e){return!!ue(t.map(De),ze(e))}function De(t){return(t=t.map(ze)).pop(),t}function ze(t){return[t[0]*N,t[1]*N]}function Ie(t,e,n){var r=S.range(t,e-C,n).concat(e);return function(e){return r.map(function(t){return[e,t]})}}function Fe(t,e,n){var r=S.range(t,e-C,n).concat(e);return function(e){return r.map(function(t){return[t,e]})}}function Be(){var e,n,r,i,a,o,s,l,u,c,f,h,d=10,p=d,g=90,y=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:t()}}function t(){return S.range(b(i/g)*g,r,g).map(f).concat(S.range(b(l/y)*y,s,y).map(h)).concat(S.range(b(n/d)*d,e,d).filter(function(t){return D(t%g)>C}).map(u)).concat(S.range(b(o/p)*p,a,p).filter(function(t){return D(t%y)>C}).map(c))}return v.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},v.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(h(s).slice(1),f(r).reverse().slice(1),h(l).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],l=+t[0][1],s=+t[1][1],r<i&&(t=i,i=r,r=t),s<l&&(t=l,l=s,s=t),v.precision(m)):[[i,l],[r,s]]},v.extentMinor=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],e<n&&(t=n,n=e,e=t),a<o&&(t=o,o=a,a=t),v.precision(m)):[[n,o],[e,a]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(g=+t[0],y=+t[1],v):[g,y]},v.stepMinor=function(t){return arguments.length?(d=+t[0],p=+t[1],v):[d,p]},v.precision=function(t){return arguments.length?(m=+t,u=Ie(o,a,90),c=Fe(n,e,m),f=Ie(l,s,90),h=Fe(i,r,m),v):m},v.extentMajor([[-180,-90+C],[180,90-C]]).extentMinor([[-180,-80-C],[180,80+C]])}var Ue,Ve,He,qe,Ge=function(t){return t},Ye=new S.Adder,Xe=new S.Adder,We={point:a,lineStart:a,lineEnd:a,polygonStart:function(){We.lineStart=Ze,We.lineEnd=$e},polygonEnd:function(){We.lineStart=We.lineEnd=We.point=a,Ye.add(D(Xe)),Xe=new S.Adder},result:function(){var t=Ye/2;return Ye=new S.Adder,t}};function Ze(){We.point=Ke}function Ke(t,e){We.point=Qe,Ue=He=t,Ve=qe=e}function Qe(t,e){Xe.add(qe*t-He*e),He=t,qe=e}function $e(){Qe(Ue,Ve)}var Je=1/0,tn=Je,en=-Je,nn=en,rn={point:function(t,e){t<Je&&(Je=t);en<t&&(en=t);e<tn&&(tn=e);nn<e&&(nn=e)},lineStart:a,lineEnd:a,polygonStart:a,polygonEnd:a,result:function(){var t=[[Je,tn],[en,nn]];return en=nn=-(tn=Je=1/0),t}};var an,on,sn,ln,un=0,cn=0,fn=0,hn=0,dn=0,pn=0,gn=0,yn=0,mn=0,vn={point:bn,lineStart:xn,lineEnd:kn,polygonStart:function(){vn.lineStart=Mn,vn.lineEnd=Tn},polygonEnd:function(){vn.point=bn,vn.lineStart=xn,vn.lineEnd=kn},result:function(){var t=mn?[gn/mn,yn/mn]:pn?[hn/pn,dn/pn]:fn?[un/fn,cn/fn]:[NaN,NaN];return un=cn=fn=hn=dn=pn=gn=yn=mn=0,t}};function bn(t,e){un+=t,cn+=e,++fn}function xn(){vn.point=_n}function _n(t,e){vn.point=wn,bn(sn=t,ln=e)}function wn(t,e){var n=t-sn,r=e-ln,r=B(n*n+r*r);hn+=r*(sn+t)/2,dn+=r*(ln+e)/2,pn+=r,bn(sn=t,ln=e)}function kn(){vn.point=bn}function Mn(){vn.point=An}function Tn(){Sn(an,on)}function An(t,e){vn.point=Sn,bn(an=sn=t,on=ln=e)}function Sn(t,e){var n=t-sn,r=e-ln,r=B(n*n+r*r);hn+=r*(sn+t)/2,dn+=r*(ln+e)/2,pn+=r,gn+=(r=ln*t-sn*e)*(sn+t),yn+=r*(ln+e),mn+=3*r,bn(sn=t,ln=e)}function En(t){this._context=t}En.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,R)}},result:a};var On,Cn,Pn,Ln,Rn,jn=new S.Adder,Nn={point:a,lineStart:function(){Nn.point=Dn},lineEnd:function(){On&&zn(Cn,Pn),Nn.point=a},polygonStart:function(){On=!0},polygonEnd:function(){On=null},result:function(){var t=+jn;return jn=new S.Adder,t}};function Dn(t,e){Nn.point=zn,Cn=Ln=t,Pn=Rn=e}function zn(t,e){Ln-=t,Rn-=e,jn.add(B(Ln*Ln+Rn*Rn)),Ln=t,Rn=e}function In(){this._string=[]}function Fn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Bn(r){return function(t){var e,n=new Un;for(e in r)n[e]=r[e];return n.stream=t,n}}function Un(){}function Vn(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),m(n,t.stream(rn)),e(rn.result()),null!=r&&t.clipExtent(r),t}function Hn(i,a,t){return Vn(i,function(t){var e=a[1][0]-a[0][0],n=a[1][1]-a[0][1],r=Math.min(e/(t[1][0]-t[0][0]),n/(t[1][1]-t[0][1])),e=+a[0][0]+(e-r*(t[1][0]+t[0][0]))/2,t=+a[0][1]+(n-r*(t[1][1]+t[0][1]))/2;i.scale(150*r).translate([e,t])},t)}function qn(t,e,n){return Hn(t,[[0,0],e],n)}function Gn(r,i,t){return Vn(r,function(t){var e=+i,n=e/(t[1][0]-t[0][0]),e=(e-n*(t[1][0]+t[0][0]))/2,t=-n*t[0][1];r.scale(150*n).translate([e,t])},t)}function Yn(i,a,t){return Vn(i,function(t){var e=+a,n=e/(t[1][1]-t[0][1]),r=-n*t[0][0],t=(e-n*(t[1][1]+t[0][1]))/2;i.scale(150*n).translate([r,t])},t)}In.prototype={_radius:4.5,_circle:Fn(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Fn(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Un.prototype={constructor:Un,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Xn=16,Wn=I(30*N);function Zn(t,e){return+e?(S=t,E=e,function(r){var n,i,a,o,s,l,u,c,f,h,d,p,g={point:t,lineStart:e,lineEnd:m,polygonStart:function(){r.polygonStart(),g.lineStart=v},polygonEnd:function(){r.polygonEnd(),g.lineStart=e}};function t(t,e){t=S(t,e),r.point(t[0],t[1])}function e(){c=NaN,g.point=y,r.lineStart()}function y(t,e){var n=rt([t,e]),e=S(t,e);O(c,f,u,h,d,p,c=e[0],f=e[1],u=t,h=n[0],d=n[1],p=n[2],Xn,r),r.point(c,f)}function m(){g.point=t,r.lineEnd()}function v(){e(),g.point=b,g.lineEnd=x}function b(t,e){y(n=t,e),i=c,a=f,o=h,s=d,l=p,g.point=y}function x(){O(c,f,u,h,d,p,i,a,n,o,s,l,Xn,r),g.lineEnd=m,m()}return g}):(n=t,Bn({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n,S,E;function O(t,e,n,r,i,a,o,s,l,u,c,f,h,d){var p,g,y,m,v,b,x,_,w,k,M=o-t,T=s-e,A=M*M+T*T;4*E<A&&h--&&(y=a+f,w=U(y/=m=B((p=r+u)*p+(g=i+c)*g+y*y)),v=D(D(y)-1)<C||D(n-l)<C?(n+l)/2:z(g,p),b=(k=S(v,w))[0],x=k[1],(E<(k=T*(_=b-t)-M*(w=x-e))*k/A||.3<D((M*_+T*w)/A-.5)||r*u+i*c+a*f<Wn)&&(O(t,e,n,r,i,a,b,x,v,p/=m,g/=m,y,h,d),d.point(b,x),O(b,x,v,p,g,y,o,s,l,u,c,f,h,d)))}}var Kn=Bn({point:function(t,e){this.stream.point(t*N,e*N)}});function Qn(t,n,r,i,a,e){if(!e)return s=t,l=n,u=r,c=i,f=a,o.invert=function(t,e){return[(t-l)/s*c,(u-e)/s*f]},o;function o(t,e){return[l+s*(t*=c),u-s*(e*=f)]}var s,l,u,c,f,h=I(e),e=F(e),d=h*t,p=e*t,g=h/t,y=e/t,m=(e*r-h*n)/t,v=(e*n+h*r)/t;function b(t,e){return[d*(t*=i)-p*(e*=a)+n,r-p*t-d*e]}return b.invert=function(t,e){return[i*(g*t-y*e+m),a*(v-y*t-g*e)]},b}function $n(t){return Jn(function(){return t})()}function Jn(t){var e,r,n,i,a,o,s,l,u,c,f=150,h=480,d=250,p=0,g=0,y=0,m=0,v=0,b=0,x=1,_=1,w=null,k=de,M=null,T=Ge,A=.5;function S(t){return l(t[0]*N,t[1]*N)}function E(t){return(t=l.invert(t[0],t[1]))&&[t[0]*j,t[1]*j]}function O(){var t=Qn(f,0,0,x,_,b).apply(null,e(p,g)),t=Qn(f,h-t[0],d-t[1],x,_,b);return r=Kt(y,m,v),s=Wt(e,t),l=Wt(r,s),o=Zn(s,A),C()}function C(){return u=c=null,S}return S.stream=function(t){return u&&c===t?u:u=Kn((n=r,Bn({point:function(t,e){e=n(t,e);return this.stream.point(e[0],e[1])}})(k(o(T(c=t))))));var n},S.preclip=function(t){return arguments.length?(k=t,w=void 0,C()):k},S.postclip=function(t){return arguments.length?(T=t,M=n=i=a=null,C()):T},S.clipAngle=function(t){return arguments.length?(k=+t?pe(w=t*N):(w=null,de),C()):w*j},S.clipExtent=function(t){return arguments.length?(T=null==t?(M=n=i=a=null,Ge):_e(M=+t[0][0],n=+t[0][1],i=+t[1][0],a=+t[1][1]),C()):null==M?null:[[M,n],[i,a]]},S.scale=function(t){return arguments.length?(f=+t,O()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],O()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*N,g=t[1]%360*N,O()):[p*j,g*j]},S.rotate=function(t){return arguments.length?(y=t[0]%360*N,m=t[1]%360*N,v=2<t.length?t[2]%360*N:0,O()):[y*j,m*j,v*j]},S.angle=function(t){return arguments.length?(b=t%360*N,O()):b*j},S.reflectX=function(t){return arguments.length?(x=t?-1:1,O()):x<0},S.reflectY=function(t){return arguments.length?(_=t?-1:1,O()):_<0},S.precision=function(t){return arguments.length?(o=Zn(s,A=t*t),C()):B(A)},S.fitExtent=function(t,e){return Hn(S,t,e)},S.fitSize=function(t,e){return qn(S,t,e)},S.fitWidth=function(t,e){return Gn(S,t,e)},S.fitHeight=function(t,e){return Yn(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&E,O()}}function tr(t){var e=0,n=O/3,r=Jn(t),t=r(e,n);return t.parallels=function(t){return arguments.length?r(e=t[0]*N,n=t[1]*N):[e*j,n*j]},t}function er(t,e){var n,r=F(t),i=(r+F(e))/2;if(D(i)<C)return n=I(t),a.invert=function(t,e){return[t/n,U(e*n)]},a;function a(t,e){return[t*n,F(e)/n]}var o=1+r*(2*i-r),s=B(o)/i;function l(t,e){e=B(o-2*i*F(e))/i;return[e*F(t*=i),s-e*I(t)]}return l.invert=function(t,e){var n=s-e,e=z(t,D(n))*u(n);return n*i<0&&(e-=O*u(t)*u(n)),[e/i,U((o-(t*t+n*n)*i*i)/(2*i))]},l}function nr(){return tr(er).scale(155.424).center([0,33.6442])}function rr(){return nr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ir(i){return function(t,e){var n=I(t),r=I(e),n=i(n*r);return n===1/0?[2,0]:[n*r*F(t),n*F(e)]}}function ar(a){return function(t,e){var n=B(t*t+e*e),r=a(n),i=F(r),r=I(r);return[z(t*i,n*r),U(n&&e*i/n)]}}var or=ir(function(t){return B(2/(1+t))});or.invert=ar(function(t){return 2*U(t/2)});var sr=ir(function(t){return(t=i(t))&&t/F(t)});function lr(t,e){return[t,o(r((P+e)/2))]}function ur(n){var r,i,a,o=$n(n),e=o.center,s=o.scale,l=o.translate,u=o.clipExtent,c=null;function f(){var t=O*s(),e=o(te(o.rotate()).invert([0,0]));return u(null==c?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:n===lr?[[Math.max(e[0]-t,c),r],[Math.min(e[0]+t,i),a]]:[[c,Math.max(e[1]-t,r)],[i,Math.min(e[1]+t,a)]])}return o.scale=function(t){return arguments.length?(s(t),f()):s()},o.translate=function(t){return arguments.length?(l(t),f()):l()},o.center=function(t){return arguments.length?(e(t),f()):e()},o.clipExtent=function(t){return arguments.length?(null==t?c=r=i=a=null:(c=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),f()):null==c?null:[[c,r],[i,a]]},f()}function cr(t){return r((P+t)/2)}function fr(t,e){var n=I(t),i=t===e?F(t):o(n/I(e))/o(cr(e)/cr(t)),a=n*s(cr(t),i)/i;return i?(r.invert=function(t,e){var n=a-e,r=u(i)*B(t*t+n*n),e=z(t,D(n))*u(n);return n*i<0&&(e-=O*u(t)*u(n)),[e/i,2*p(s(a/r,1/i))-P]},r):lr;function r(t,e){0<a?e<-P+C&&(e=-P+C):P-C<e&&(e=P-C);e=a/s(cr(e),i);return[e*F(i*t),a-e*I(i*t)]}}function hr(t,e){return[t,e]}function dr(t,e){var n=I(t),r=t===e?F(t):(n-I(e))/(e-t),i=n/r+t;return D(r)<C?hr:(a.invert=function(t,e){var n=i-e,e=z(t,D(n))*u(n);return n*r<0&&(e-=O*u(t)*u(n)),[e/r,i-u(r)*B(t*t+n*n)]},a);function a(t,e){e=i-e,t*=r;return[e*F(t),i-e*I(t)]}}sr.invert=ar(function(t){return t}),lr.invert=function(t,e){return[t,2*p(n(e))-P]},hr.invert=hr;var pr=1.340264,gr=-.081106,yr=893e-6,mr=.003796,vr=B(3)/2;function br(t,e){var n=U(vr*F(e)),r=n*n,e=r*r*r;return[t*I(n)/(vr*(pr+3*gr*r+e*(7*yr+9*mr*r))),n*(pr+gr*r+e*(yr+mr*r))]}function xr(t,e){var n=I(e),r=I(t)*n;return[n*F(t)/r,F(e)/r]}function _r(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function wr(t,e){return[I(e)*F(t),F(e)]}function kr(t,e){var n=I(e),r=1+I(t)*n;return[n*F(t)/r,F(e)/r]}function Mr(t,e){return[o(r((P+e)/2)),-t]}br.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(pr+gr*i+a*(yr+mr*i))-e)/(pr+3*gr*i+a*(7*yr+9*mr*i)))*r)*i*i,!(D(n)<E));++o);return[vr*t*(pr+3*gr*i+a*(7*yr+9*mr*i))/I(r),U(F(r)/vr)]},xr.invert=ar(p),_r.invert=function(t,e){var n=e,r=25;do{var i=n*n,a=i*i}while(n-=a=(n*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))-e)/(1.007226+i*(.045255+a*(.259866*i-.311325-.005916*11*a))),D(a)>C&&0<--r);return[t/(.8707+(i=n*n)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),n]},wr.invert=ar(U),kr.invert=ar(function(t){return 2*p(t)}),Mr.invert=function(t,e){return[-e,2*p(n(t))-P]},t.geoAlbers=rr,t.geoAlbersUsa=function(){var e,n,i,a,o,r,s=rr(),l=nr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=nr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){r=[t,e]}};function f(t){var e=t[0],t=t[1];return r=null,i.point(e,t),r||(a.point(e,t),r)||(o.point(e,t),r)}function h(){return e=n=null,f}return f.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,e=(t[1]-n[1])/e;return(.12<=e&&e<.234&&-.425<=r&&r<-.214?l:.166<=e&&e<.234&&-.214<=r&&r<-.115?u:s).invert(t)},f.stream=function(t){return e&&n===t?e:(r=[s.stream(n=t),l.stream(t),u.stream(t)],i=r.length,e={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},f.precision=function(t){return arguments.length?(s.precision(t),l.precision(t),u.precision(t),h()):s.precision()},f.scale=function(t){return arguments.length?(s.scale(t),l.scale(.35*t),u.scale(t),f.translate(s.translate())):s.scale()},f.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),n=+t[0],r=+t[1];return i=s.translate(t).clipExtent([[n-.455*e,r-.238*e],[n+.455*e,r+.238*e]]).stream(c),a=l.translate([n-.307*e,r+.201*e]).clipExtent([[n-.425*e+C,r+.12*e+C],[n-.214*e-C,r+.234*e-C]]).stream(c),o=u.translate([n-.205*e,r+.212*e]).clipExtent([[n-.214*e+C,r+.166*e+C],[n-.115*e-C,r+.234*e-C]]).stream(c),h()},f.fitExtent=function(t,e){return Hn(f,t,e)},f.fitSize=function(t,e){return qn(f,t,e)},f.fitWidth=function(t,e){return Gn(f,t,e)},f.fitHeight=function(t,e){return Yn(f,t,e)},f.scale(1070)},t.geoArea=function(t){return e=new S.Adder,m(t,Q),2*e},t.geoAzimuthalEqualArea=function(){return $n(or).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=or,t.geoAzimuthalEquidistant=function(){return $n(sr).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=sr,t.geoBounds=function(t){var e,n,r,i,a,o,s;if(V=A=-(M=T=1/0),W=[],m(t,Tt),n=W.length){for(W.sort(jt),e=1,a=[r=W[0]];e<n;++e)Nt(r,(i=W[e])[0])||Nt(r,i[1])?(Rt(r[0],i[1])>Rt(r[0],r[1])&&(r[1]=i[1]),Rt(i[0],r[1])>Rt(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)i=a[e],(s=Rt(r[1],i[0]))>o&&(o=s,M=i[0],A=r[1])}return W=Z=null,M===1/0||T===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,T],[A,V]]},t.geoCentroid=function(t){ut=ct=ft=ht=dt=pt=gt=yt=0,mt=new S.Adder,vt=new S.Adder,bt=new S.Adder,m(t,Dt);var e=+mt,n=+vt,r=+bt;return(t=l(e,n,r))<E&&(e=pt,n=gt,r=yt,ct<C&&(e=ft,n=ht,r=dt),(t=l(e,n,r))<E)?[NaN,NaN]:[z(n,e)*j,U(r/t)*j]},t.geoCircle=function(){var r,i,a=Xt([0,0]),o=Xt(90),s=Xt(6),l={point:function(t,e){r.push(t=i(t,e)),t[0]*=j,t[1]*=j}};function e(){var t=a.apply(this,arguments),e=o.apply(this,arguments)*N,n=s.apply(this,arguments)*N;return r=[],i=Kt(-t[0]*N,-t[1]*N,0).invert,ee(l,e,n,1),t={type:"Polygon",coordinates:[r]},r=i=null,t}return e.center=function(t){return arguments.length?(a="function"==typeof t?t:Xt([+t[0],+t[1]]),e):a},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:Xt(+t),e):o},e.precision=function(t){return arguments.length?(s="function"==typeof t?t:Xt(+t),e):s},e},t.geoClipAntimeridian=de,t.geoClipCircle=pe,t.geoClipExtent=function(){var e,n,r,i=0,a=0,o=960,s=500;return r={stream:function(t){return e&&n===t?e:e=_e(i,a,o,s)(n=t)},extent:function(t){return arguments.length?(i=+t[0][0],a=+t[0][1],o=+t[1][0],s=+t[1][1],e=n=null,r):[[i,a],[o,s]]}}},t.geoClipRectangle=_e,t.geoConicConformal=function(){return tr(fr).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=fr,t.geoConicEqualArea=nr,t.geoConicEqualAreaRaw=er,t.geoConicEquidistant=function(){return tr(dr).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=dr,t.geoContains=function(t,e){return(t&&Ce.hasOwnProperty(t.type)?Ce[t.type]:Le)(t,e)},t.geoDistance=Oe,t.geoEqualEarth=function(){return $n(br).scale(177.158)},t.geoEqualEarthRaw=br,t.geoEquirectangular=function(){return $n(hr).scale(152.63)},t.geoEquirectangularRaw=hr,t.geoGnomonic=function(){return $n(xr).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=xr,t.geoGraticule=Be,t.geoGraticule10=function(){return Be()()},t.geoIdentity=function(){var r,i,e,n,a,o,s,l=1,u=0,c=0,f=1,h=1,d=0,p=null,g=1,y=1,m=Bn({point:function(t,e){e=x([t,e]);this.stream.point(e[0],e[1])}}),v=Ge;function b(){return g=l*f,y=l*h,o=s=null,x}function x(t){var e=t[0]*g,n=t[1]*y;return d&&(t=n*r-e*i,e=e*r+n*i,n=t),[e+u,n+c]}return x.invert=function(t){var e=t[0]-u,n=t[1]-c;return d&&(t=n*r+e*i,e=e*r-n*i,n=t),[e/g,n/y]},x.stream=function(t){return o&&s===t?o:o=m(v(s=t))},x.postclip=function(t){return arguments.length?(v=t,p=e=n=a=null,b()):v},x.clipExtent=function(t){return arguments.length?(v=null==t?(p=e=n=a=null,Ge):_e(p=+t[0][0],e=+t[0][1],n=+t[1][0],a=+t[1][1]),b()):null==p?null:[[p,e],[n,a]]},x.scale=function(t){return arguments.length?(l=+t,b()):l},x.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],b()):[u,c]},x.angle=function(t){return arguments.length?(i=F(d=t%360*N),r=I(d),b()):d*j},x.reflectX=function(t){return arguments.length?(f=t?-1:1,b()):f<0},x.reflectY=function(t){return arguments.length?(h=t?-1:1,b()):h<0},x.fitExtent=function(t,e){return Hn(x,t,e)},x.fitSize=function(t,e){return qn(x,t,e)},x.fitWidth=function(t,e){return Gn(x,t,e)},x.fitHeight=function(t,e){return Yn(x,t,e)},x},t.geoInterpolate=function(t,e){var n=t[0]*N,r=t[1]*N,i=e[0]*N,a=e[1]*N,t=I(r),o=F(r),e=I(a),s=F(a),l=t*I(n),u=t*F(n),c=e*I(i),f=e*F(i),h=2*U(B(g(a-r)+t*e*g(i-n))),d=F(h);return(i=h?function(t){var e=F(t*=h)/d,n=F(h-t)/d,r=n*l+e*c,t=n*u+e*f,e=n*o+e*s;return[z(t,r)*j,z(e,B(r*r+t*t))*j]}:function(){return[n*j,r*j]}).distance=h,i},t.geoLength=Ae,t.geoMercator=function(){return ur(lr).scale(961/R)},t.geoMercatorRaw=lr,t.geoNaturalEarth1=function(){return $n(_r).scale(175.295)},t.geoNaturalEarth1Raw=_r,t.geoOrthographic=function(){return $n(wr).scale(249.5).clipAngle(90+C)},t.geoOrthographicRaw=wr,t.geoPath=function(e,n){var r,i,a=4.5;function o(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),m(t,r(i))),i.result()}return o.area=function(t){return m(t,r(We)),We.result()},o.measure=function(t){return m(t,r(Nn)),Nn.result()},o.bounds=function(t){return m(t,r(rn)),rn.result()},o.centroid=function(t){return m(t,r(vn)),vn.result()},o.projection=function(t){return arguments.length?(r=null==t?(e=null,Ge):(e=t).stream,o):e},o.context=function(t){return arguments.length?(i=null==t?(n=null,new In):new En(n=t),"function"!=typeof a&&i.pointRadius(a),o):n},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),o):a},o.projection(e).context(n)},t.geoProjection=$n,t.geoProjectionMutator=Jn,t.geoRotation=te,t.geoStereographic=function(){return $n(kr).scale(250).clipAngle(142)},t.geoStereographicRaw=kr,t.geoStream=m,t.geoTransform=function(t){return{stream:Bn(t)}},t.geoTransverseMercator=function(){var t=ur(Mr),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Mr,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-array")):a((i=i||self).d3=i.d3||{},i.d3)},{"d3-array":60}],75:[function(t,e,n){"use strict";function X(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i;i=function(t){var e,n,s=regeneratorRuntime.mark(a);function r(t,e){return t.parent===e.parent?1:2}function f(t,e){return t+e.x}function h(t,e){return Math.max(t,e.y)}function i(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;0<=--r;)e+=n[r].value;else e=1;t.value=e}function a(){var e,n,r,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=[e=this];case 1:n=r.reverse(),r=[];case 2:if(e=n.pop())return t.next=5,e;t.next=8;break;case 5:if(i=e.children)for(a=0,o=i.length;a<o;++a)r.push(i[a]);t.next=2;break;case 8:if(r.length){t.next=1;break}case 9:case"end":return t.stop()}},s,this)}function o(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=u)):void 0===e&&(e=l);for(var n,r,i,a,o,t=new p(t),s=[t];n=s.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;0<=a;--a)s.push(r=i[a]=new p(i[a])),r.parent=n,r.depth=n.depth+1;return t.eachBefore(d)}function l(t){return t.children}function u(t){return Array.isArray(t)?t[1]:null}function c(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function d(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function p(t){this.data=t,this.depth=this.height=0,this.parent=null}function g(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,a=[];r<i;)e=t[r],n&&m(n,e)?++r:(n=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return b(t[0],t[1]);case 3:return x(t[0],t[1],t[2])}}(a=function(t,e){var n,r;if(v(e,t))return[e];for(n=0;n<t.length;++n)if(y(e,t[n])&&v(b(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(y(b(t[n],t[r]),e)&&y(b(t[n],e),t[r])&&y(b(t[r],e),t[n])&&v(x(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}(a,e)),r=0);return n}function y(t,e){var n=t.r-e.r,r=e.x-t.x,t=e.y-t.y;return n<0||n*n<r*r+t*t}function m(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,t=e.y-t.y;return 0<n&&r*r+t*t<n*n}function v(t,e){for(var n=0;n<e.length;++n)if(!m(t,e[n]))return;return 1}function b(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,u=o-r,t=s-i,e=Math.sqrt(l*l+u*u);return{x:(n+a+l/e*t)/2,y:(r+o+u/e*t)/2,r:(e+i+s)/2}}function x(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,u=n.x,c=n.y,f=n.r,h=r-o,d=r-u,p=i-s,g=i-c,t=l-a,e=f-a,n=r*r+i*i-a*a,l=n-o*o-s*s+l*l,u=n-u*u-c*c+f*f,c=d*p-h*g,f=(p*u-g*l)/(2*c)-r,p=(g*t-p*e)/c,u=(d*l-h*u)/(2*c)-i,d=(h*e-d*t)/c,t=p*p+d*d-1,c=2*(a+f*p+u*d),a=f*f+u*u-a*a,c=-(t?(c+Math.sqrt(c*c-4*t*a))/(2*t):a/c);return{x:r+f+p*c,y:i+u+d*c,r:c}}function _(t,e,n){var r,i,a,o,s=t.x-e.x,l=t.y-e.y,u=s*s+l*l;u?(i=e.r+n.r,i*=i,o=t.r+n.r,(o*=o)<i?(r=(u+o-i)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x-r*s-a*l,n.y=t.y-r*l+a*s):(r=(u+i-o)/(2*u),a=Math.sqrt(Math.max(0,i/u-r*r)),n.x=e.x+r*s-a*l,n.y=e.y+r*l+a*s)):(n.x=e.x+n.r,n.y=e.y)}function w(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,t=e.y-t.y;return 0<n&&r*r+t*t<n*n}function k(t){var e=t._,n=t.next._,r=e.r+n.r,t=(e.x*n.r+n.x*e.r)/r,r=(e.y*n.r+n.y*e.r)/r;return t*t+r*r}function M(t){this._=t,this.next=null,this.previous=null}function T(t){if(!(i=(t="object"===W(e=t)&&"length"in e?e:Array.from(e)).length))return 0;var e,n,r,i,a,o,s,l,u,c,f,h=t[0];if(h.x=0,h.y=0,!(1<i))return h.r;if(n=t[1],h.x=-n.r,n.x=h.r,n.y=0,!(2<i))return h.r+n.r;_(n,h,r=t[2]),h=new M(h),n=new M(n),r=new M(r),((h.next=r.previous=n).next=h.previous=r).next=n.previous=h;t:for(s=3;s<i;++s){_(h._,n._,r=t[s]),r=new M(r),l=n.next,u=h.previous,c=n._.r,f=h._.r;do{if(c<=f){if(w(l._,r._)){n=l,(h.next=n).previous=h,--s;continue t}c+=l._.r,l=l.next}else{if(w(u._,r._)){((h=u).next=n).previous=h,--s;continue t}f+=u._.r,u=u.previous}}while(l!==u.next);for(r.previous=h,r.next=n,h.next=n.previous=n=r,a=k(h);(r=r.next)!==n;)(o=k(r))<a&&(h=r,a=o);n=h.next}for(h=[n._],r=n;(r=r.next)!==n;)h.push(r._);for(r=g(h),s=0;s<i;++s)(h=t[s]).x-=r.x,h.y-=r.y;return r.r}function A(t){if("function"!=typeof t)throw new Error;return t}function S(){return 0}function E(t){return function(){return t}}function O(t){return Math.sqrt(t.value)}function C(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function P(o,s){return function(t){if(e=t.children){var e,n,r,i=e.length,a=o(t)*s||0;if(a)for(n=0;n<i;++n)e[n].r+=a;if(r=T(e),a)for(n=0;n<i;++n)e[n].r-=a;t.r=r+a}}}function L(n){return function(t){var e=t.parent;t.r*=n,e&&(t.x=e.x+n*t.x,t.y=e.y+n*t.y)}}function R(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function j(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(r-e)/t.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}p.prototype=o.prototype=(q={constructor:p,count:function(){return this.eachAfter(i)},each:function(t,e){var n=-1,r=X(this);try{for(r.s();!(i=r.n()).done;){var i=i.value;t.call(e,i,++n,this)}}catch(t){r.e(t)}finally{r.f()}return this},eachAfter:function(t,e){for(var n,r,i,a=this,o=[a],s=[],l=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)t.call(e,a,++l,this);return this},eachBefore:function(t,e){for(var n,r,i,a=[this],o=-1;n=a.pop();)if(t.call(e,n,++o,this),r=n.children)for(i=r.length-1;0<=i;--i)a.push(r[i]);return this},find:function(t,e){var n=-1,r=X(this);try{for(r.s();!(i=r.n()).done;){var i=i.value;if(t.call(e,i,++n,this))return i}}catch(t){r.e(t)}finally{r.f()}},sum:function(i){return this.eachAfter(function(t){for(var e=+i(t.data)||0,n=t.children,r=n&&n.length;0<=--r;)e+=n[r].value;t.value=e})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n},copy:function(){return o(this).eachBefore(c)}},e=Symbol.iterator,n=a,e in q?Object.defineProperty(q,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):q[e]=n,q);var N={depth:-1},D={};function z(t){return t.id}function I(t){return t.parentId}function F(t,e){return t.parent===e.parent?1:2}function B(t){var e=t.children;return e?e[0]:t.t}function U(t){var e=t.children;return e?e[e.length-1]:t.t}function V(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function H(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(i-n)/t.value;++s<l;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}V.prototype=Object.create(p.prototype);var q=(1+Math.sqrt(5))/2;function G(t,e,n,r,i,a){for(var o,s,l,u,c,f,h,d,p,g,y,m=[],v=e.children,b=0,x=0,_=v.length,w=e.value;b<_;){for(l=i-n,u=a-r;c=v[x++].value,!c&&x<_;);for(y=(f=h=c)*c*(g=Math.max(u/l,l/u)/(w*t)),p=Math.max(h/y,y/f);x<_;++x){if(c+=s=v[x].value,s<f&&(f=s),h<s&&(h=s),y=c*c*g,p<(d=Math.max(h/y,y/f))){c-=s;break}p=d}m.push(o={value:c,dice:l<u,children:v.slice(b,x)}),o.dice?j(o,n,r,i,w?r+=u*c/w:a):H(o,n,r,w?n+=l*c/w:i,a),w-=c,b=x}return m}var Y=function e(a){function t(t,e,n,r,i){G(a,t,e,n,r,i)}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(q);q=function e(d){function t(t,e,n,r,i){if((a=t._squarify)&&a.ratio===d)for(var a,o,s,l,u,c=-1,f=a.length,h=t.value;++c<f;){for(s=(o=a[c]).children,l=o.value=0,u=s.length;l<u;++l)o.value+=s[l].value;o.dice?j(o,e,n,r,h?n+=(i-n)*o.value/h:i):H(o,e,n,h?e+=(r-e)*o.value/h:r,i),h-=o.value}else t._squarify=a=G(d,t,e,n,r,i),a.ratio=d}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(q);t.cluster=function(){var s=r,l=1,u=1,c=!1;function e(e){var r,i=0;e.eachAfter(function(t){var e,n=t.children;n?(t.x=(e=n).reduce(f,0)/e.length,t.y=1+n.reduce(h,0)):(t.x=r?i+=s(t,r):0,t.y=0,r=t)});var t=function(t){for(var e;e=t.children;)t=e[0];return t}(e),n=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),a=t.x-s(t,n)/2,o=n.x+s(n,t)/2;return e.eachAfter(c?function(t){t.x=(t.x-e.x)*l,t.y=(e.y-t.y)*u}:function(t){t.x=(t.x-a)/(o-a)*l,t.y=(1-(e.y?t.y/e.y:1))*u})}return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(c=!1,l=+t[0],u=+t[1],e):c?null:[l,u]},e.nodeSize=function(t){return arguments.length?(c=!0,l=+t[0],u=+t[1],e):c?[l,u]:null},e},t.hierarchy=o,t.pack=function(){var e=null,n=1,r=1,i=S;function a(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(C(e)).eachAfter(P(i,.5)).eachBefore(L(1)):t.eachBefore(C(O)).eachAfter(P(S,1)).eachAfter(P(i,t.r/Math.min(n,r))).eachBefore(L(Math.min(n,r)/(2*t.r))),t}return a.radius=function(t){return arguments.length?(e=null==(t=t)?null:A(t),a):e},a.size=function(t){return arguments.length?(n=+t[0],r=+t[1],a):[n,r]},a.padding=function(t){return arguments.length?(i="function"==typeof t?t:E(+t),a):i},a},t.packEnclose=g,t.packSiblings=function(t){return T(t),t},t.partition=function(){var n=1,r=1,s=0,i=!1;function e(t){var a,o,e=t.height+1;return t.x0=t.y0=s,t.x1=n,t.y1=r/e,t.eachBefore((a=r,o=e,function(t){t.children&&j(t,t.x0,a*(t.depth+1)/o,t.x1,a*(t.depth+2)/o);var e=t.x0,n=t.y0,r=t.x1-s,i=t.y1-s;r<e&&(e=r=(e+r)/2),i<n&&(n=i=(n+i)/2),t.x0=e,t.y0=n,t.x1=r,t.y1=i})),i&&t.eachBefore(R),t}return e.round=function(t){return arguments.length?(i=!!t,e):i},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(s=+t,e):s},e},t.stratify=function(){var f=z,h=I;function e(t){for(var e,n,r,i,a,o,s=Array.from(t),l=s.length,u=new Map,c=0;c<l;++c)e=s[c],i=s[c]=new p(e),null!=(a=f(e,c,t))&&(a+="")&&(o=i.id=a,u.set(o,u.has(o)?D:i)),null!=(a=h(e,c,t))&&(a+="")&&(i.parent=a);for(c=0;c<l;++c)if(a=(i=s[c]).parent){if(!(r=u.get(a)))throw new Error("missing: "+a);if(r===D)throw new Error("ambiguous: "+a);r.children?r.children.push(i):r.children=[i],i.parent=r}else{if(n)throw new Error("multiple roots");n=i}if(!n)throw new Error("no root");if(n.parent=N,n.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(d),n.parent=null,0<l)throw new Error("cycle");return n}return e.id=function(t){return arguments.length?(f=A(t),e):f},e.parentId=function(t){return arguments.length?(h=A(t),e):h},e},t.tree=function(){var h=F,l=1,u=1,c=null;function e(t){var e,n,r,i,a,o,s=function(t){for(var e,n,r,i,a,o=[t=new V(t,0)];e=o.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;0<=i;--i)o.push(n=e.children[i]=new V(r[i],i)),n.parent=e;return(t.parent=new V(null,0)).children=[t],t}(t);return s.eachAfter(f),s.parent.m=-s.z,s.eachBefore(d),c?t.eachBefore(p):((r=n=e=t).eachBefore(function(t){t.x<e.x&&(e=t),t.x>n.x&&(n=t),t.depth>r.depth&&(r=t)}),s=e===n?1:h(e,n)/2,i=s-e.x,a=l/(n.x+s+i),o=u/(r.depth||1),t.eachBefore(function(t){t.x=(t.x+i)*a,t.y=t.depth*o})),t}function f(a){var t=a.children,e=a.parent.children,n=a.i?e[a.i-1]:null;t?(function(){for(var t,e=0,n=0,r=a.children,i=r.length;0<=--i;)(t=r[i]).z+=e,t.m+=e,e+=t.s+(n+=t.c)}(),t=(t[0].z+t[t.length-1].z)/2,n?(a.z=n.z+h(a._,n._),a.m=a.z-t):a.z=t):n&&(a.z=n.z+h(a._,n._)),a.parent.A=function(t,e,n){if(e){for(var r,i=t,a=t,o=e,s=i.parent.children[0],l=i.m,u=a.m,c=o.m,f=s.m;o=U(o),i=B(i),o&&i;)s=B(s),(a=U(a)).a=t,0<(r=o.z+c-i.z-l+h(o._,i._))&&(function(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}(function(t,e,n){return t.a.parent===e.parent?t.a:n}(o,t,n),t,r),l+=r,u+=r),c+=o.m,l+=i.m,f+=s.m,u+=a.m;o&&!U(a)&&(a.t=o,a.m+=c-u),i&&!B(s)&&(s.t=i,s.m+=l-f,n=t)}return n}(a,n,a.parent.A||e[0])}function d(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function p(t){t.x*=l,t.y=t.depth*u}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(c=!1,l=+t[0],u=+t[1],e):c?null:[l,u]},e.nodeSize=function(t){return arguments.length?(c=!0,l=+t[0],u=+t[1],e):c?[l,u]:null},e},t.treemap=function(){var o=Y,e=!1,n=1,r=1,s=[0],l=S,u=S,c=S,f=S,h=S;function i(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(a),s=[0],e&&t.eachBefore(R),t}function a(t){var e=s[t.depth],n=t.x0+e,r=t.y0+e,i=t.x1-e,a=t.y1-e;i<n&&(n=i=(n+i)/2),a<r&&(r=a=(r+a)/2),t.x0=n,t.y0=r,t.x1=i,t.y1=a,t.children&&(e=s[t.depth+1]=l(t)/2,n+=h(t)-e,r+=u(t)-e,(i-=c(t)-e)<n&&(n=i=(n+i)/2),(a-=f(t)-e)<r&&(r=a=(r+a)/2),o(t,n,r,i,a))}return i.round=function(t){return arguments.length?(e=!!t,i):e},i.size=function(t){return arguments.length?(n=+t[0],r=+t[1],i):[n,r]},i.tile=function(t){return arguments.length?(o=A(t),i):o},i.padding=function(t){return arguments.length?i.paddingInner(t).paddingOuter(t):i.paddingInner()},i.paddingInner=function(t){return arguments.length?(l="function"==typeof t?t:E(+t),i):l},i.paddingOuter=function(t){return arguments.length?i.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):i.paddingTop()},i.paddingTop=function(t){return arguments.length?(u="function"==typeof t?t:E(+t),i):u},i.paddingRight=function(t){return arguments.length?(c="function"==typeof t?t:E(+t),i):c},i.paddingBottom=function(t){return arguments.length?(f="function"==typeof t?t:E(+t),i):f},i.paddingLeft=function(t){return arguments.length?(h="function"==typeof t?t:E(+t),i):h},i},t.treemapBinary=function(t,e,n,r,i){var a,o,g=t.children,s=g.length,y=new Array(s+1);for(y[0]=o=a=0;a<s;++a)y[a+1]=o+=g[a].value;!function t(e,n,r,i,a,o,s){if(n-1<=e){var l=g[e];return l.x0=i,l.y0=a,l.x1=o,void(l.y1=s)}var u=y[e],c=r/2+u,f=e+1,h=n-1;for(;f<h;){var d=f+h>>>1;y[d]<c?f=1+d:h=d}c-y[f-1]<y[f]-c&&e+1<f&&--f;var p=y[f]-u,l=r-p;s-a<o-i?(t(e,f,p,i,a,u=r?(i*l+o*p)/r:o,s),t(f,n,l,u,a,o,s)):(t(e,f,p,i,a,o,r=r?(a*l+s*p)/r:s),t(f,n,l,i,r,o,s))}(0,s,t.value,e,n,r,i)},t.treemapDice=j,t.treemapResquarify=q,t.treemapSlice=H,t.treemapSliceDice=function(t,e,n,r,i){(1&t.depth?H:j)(t,e,n,r,i)},t.treemapSquarify=Y,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((r=void 0)===n?"undefined":W(n))&&void 0!==e?i(n):i((r=r||self).d3=r.d3||{})},{}],76:[function(t,e,n){"use strict";function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i;i=function(t,l){function u(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function e(o){var s=o.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),n=o[e],r=o[e+1],i=0<e?o[e-1]:2*n-r,a=e<s-1?o[e+2]:2*r-n;return u((t-e/s)*s,i,n,r,a)}}function n(o){var s=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*s),n=o[(e+s-1)%s],r=o[e%s],i=o[(e+1)%s],a=o[(e+2)%s];return u((t-e/s)*s,n,r,i,a)}}var o=function(t){return function(){return t}};function r(e,n){return function(t){return e+t*n}}function i(t,e){var n=e-t;return n?r(t,180<n||n<-180?n-360*Math.round(n/360):n):o(isNaN(t)?e:t)}function a(a){return 1==(a=+a)?c:function(t,e){return e-t?(n=t,r=e,i=a,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):o(isNaN(t)?e:t);var n,r,i}}function c(t,e){var n=e-t;return n?r(t,n):o(isNaN(t)?e:t)}var s=function t(e){var o=a(e);function n(e,t){var n=o((e=l.rgb(e)).r,(t=l.rgb(t)).r),r=o(e.g,t.g),i=o(e.b,t.b),a=c(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return n.gamma=t,n}(1);function f(s){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o=0;o<n;++o)e=l.rgb(t[o]),r[o]=e.r||0,i[o]=e.g||0,a[o]=e.b||0;return r=s(r),i=s(i),a=s(a),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e+""}}}var h=f(e),d=f(n);function p(e,n){n=n||[];var r,i=e?Math.min(n.length,e.length):0,a=n.slice();return function(t){for(r=0;r<i;++r)a[r]=e[r]*(1-t)+n[r]*t;return a}}function g(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function y(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o=0;o<r;++o)i[o]=k(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(t){for(o=0;o<r;++o)a[o]=i[o](t);return a}}function m(e,n){var r=new Date;return e=+e,n=+n,function(t){return r.setTime(e*(1-t)+n*t),r}}function v(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function b(t,e){var n,r={},i={};for(n in null!==t&&"object"===V(t)||(t={}),null!==e&&"object"===V(e)||(e={}),e)n in t?r[n]=k(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(x.source,"g");function w(t,r){var e,n,i,a,o,s=x.lastIndex=_.lastIndex=0,l=-1,u=[],c=[];for(t+="",r+="";(e=x.exec(t))&&(n=_.exec(r));)(i=n.index)>s&&(i=r.slice(s,i),u[l]?u[l]+=i:u[++l]=i),(e=e[0])===(n=n[0])?u[l]?u[l]+=n:u[++l]=n:(u[++l]=null,c.push({i:l,x:v(e,n)})),s=_.lastIndex;return s<r.length&&(i=r.slice(s),u[l]?u[l]+=i:u[++l]=i),u.length<2?c[0]?(o=c[0].x,function(t){return o(t)+""}):(a=r,function(){return a}):(r=c.length,function(t){for(var e,n=0;n<r;++n)u[(e=c[n]).i]=e.x(t);return u.join("")})}function k(t,e){var n=V(e);return null==e||"boolean"===n?o(e):("number"===n?v:"string"===n?(n=l.color(e))?(e=n,s):w:e instanceof l.color?s:e instanceof Date?m:g(e)?p:Array.isArray(e)?y:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?b:v)(t,e)}var M,T=180/Math.PI,A={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function S(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*T,skewX:Math.atan(l)*T,scaleX:o,scaleY:s}}function E(f,h,d,p){function g(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,a,o,s,l,u=[],c=[];return t=f(t),e=f(e),i=t.translateX,a=t.translateY,l=e.translateX,s=e.translateY,o=u,n=c,i!==l||a!==s?(r=o.push("translate(",null,h,null,d),n.push({i:r-4,x:v(i,l)},{i:r-2,x:v(a,s)})):(l||s)&&o.push("translate("+l+h+s+d),n=t.rotate,i=e.rotate,r=u,a=c,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),a.push({i:r.push(g(r)+"rotate(",null,p)-2,x:v(n,i)})):i&&r.push(g(r)+"rotate("+i+p),o=t.skewX,l=e.skewX,s=u,a=c,o!==l?a.push({i:s.push(g(s)+"skewX(",null,p)-2,x:v(o,l)}):l&&s.push(g(s)+"skewX("+l+p),n=t.scaleX,r=t.scaleY,i=e.scaleX,a=e.scaleY,o=u,s=c,n!==i||r!==a?(l=o.push(g(o)+"scale(",null,",",null,")"),s.push({i:l-4,x:v(n,i)},{i:l-2,x:v(r,a)})):1===i&&1===a||o.push(g(o)+"scale("+i+","+a+")"),t=e=null,function(t){for(var e,n=-1,r=c.length;++n<r;)u[(e=c[n]).i]=e.x(t);return u.join("")}}}var O=E(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?A:S(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),C=E(function(t){return null==t?A:((M=M||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=M.transform.baseVal.consolidate())?S((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):A)},", ",")",")");function P(t){return((t=Math.exp(t))+1/t)/2}var L=function n(h,d,p){function t(t,e){var r,i,a,n,o=t[0],s=t[1],l=t[2],u=e[0],t=e[1],e=e[2],c=u-o,f=t-s,u=c*c+f*f;return(n=u<1e-12?(a=Math.log(e/l)/h,function(t){return[o+t*c,s+t*f,l*Math.exp(h*t*a)]}):(r=Math.sqrt(u),t=(e*e-l*l+p*u)/(2*l*d*r),n=(e*e-l*l-p*u)/(2*e*d*r),i=Math.log(Math.sqrt(t*t+1)-t),a=(Math.log(Math.sqrt(n*n+1)-n)-i)/h,function(t){var e=t*a,n=P(i),t=l/(d*r)*(n*(t=h*e+i,((t=Math.exp(2*t))-1)/(t+1))-(t=i,((t=Math.exp(t))-1/t)/2));return[o+t*c,s+t*f,l*n/P(h*e+i)]})).duration=1e3*a*h/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t}(Math.SQRT2,2,4);function R(o){return function(e,t){var n=o((e=l.hsl(e)).h,(t=l.hsl(t)).h),r=c(e.s,t.s),i=c(e.l,t.l),a=c(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(t),e.opacity=a(t),e+""}}}var j=R(i),N=R(c);function D(o){return function(e,t){var n=o((e=l.hcl(e)).h,(t=l.hcl(t)).h),r=c(e.c,t.c),i=c(e.l,t.l),a=c(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=r(t),e.l=i(t),e.opacity=a(t),e+""}}}var z=D(i),I=D(c);function F(s){return function t(o){function e(e,t){var n=s((e=l.cubehelix(e)).h,(t=l.cubehelix(t)).h),r=c(e.s,t.s),i=c(e.l,t.l),a=c(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(Math.pow(t,o)),e.opacity=a(t),e+""}}return o=+o,e.gamma=t,e}(1)}var B=F(i),U=F(c);t.interpolate=k,t.interpolateArray=function(t,e){return(g(e)?p:y)(t,e)},t.interpolateBasis=e,t.interpolateBasisClosed=n,t.interpolateCubehelix=B,t.interpolateCubehelixLong=U,t.interpolateDate=m,t.interpolateDiscrete=function(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}},t.interpolateHcl=z,t.interpolateHclLong=I,t.interpolateHsl=j,t.interpolateHslLong=N,t.interpolateHue=function(t,e){var n=i(+t,+e);return function(t){t=n(t);return t-360*Math.floor(t/360)}},t.interpolateLab=function(e,t){var n=c((e=l.lab(e)).l,(t=l.lab(t)).l),r=c(e.a,t.a),i=c(e.b,t.b),a=c(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}},t.interpolateNumber=v,t.interpolateNumberArray=p,t.interpolateObject=b,t.interpolateRgb=s,t.interpolateRgbBasis=h,t.interpolateRgbBasisClosed=d,t.interpolateRound=function(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}},t.interpolateString=w,t.interpolateTransformCss=O,t.interpolateTransformSvg=C,t.interpolateZoom=L,t.piecewise=function(t,e){void 0===e&&(e=t,t=k);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}},t.quantize=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},Object.defineProperty(t,"__esModule",{value:!0})},"object"===((r=void 0)===n?"undefined":V(n))&&void 0!==e?i(n,t("d3-color")):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-color":64}],77:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){var p=Math.PI,f=2*p,h=f-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}e.prototype=n.prototype={constructor:e,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a,o,s=this._x1,l=this._y1,u=n-t,c=r-e,f=s-t,h=l-e,d=f*f+h*h;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):1e-6<d&&(1e-6<Math.abs(h*u-c*f)&&i?(o=u*u+c*c,s=(a=n-s)*a+(n=r-l)*n,r=Math.sqrt(o),l=Math.sqrt(d),l=(s=i*Math.tan((p-Math.acos((o+d-s)/(2*r*l)))/2))/l,r=s/r,1e-6<Math.abs(l-1)&&(this._+="L"+(t+l*f)+","+(e+l*h)),this._+="A"+i+","+i+",0,0,"+ +(f*n<h*a)+","+(this._x1=t+r*u)+","+(this._y1=e+r*c)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+o,u=e+s,c=1^a,r=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(1e-6<Math.abs(this._x1-l)||1e-6<Math.abs(this._y1-u))&&(this._+="L"+l+","+u),n&&(r<0&&(r=r%f+f),h<r?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):1e-6<r&&(this._+="A"+n+","+n+",0,"+ +(p<=r)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],78:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){function c(t,e){return t[0]-e[0]||t[1]-e[1]}function f(t){for(var e,n,r,i=t.length,a=[0,1],o=2,s=2;s<i;++s){for(;1<o&&(e=t[a[o-2]],n=t[a[o-1]],r=t[s],(n[0]-e[0])*(r[1]-e[1])-(n[1]-e[1])*(r[0]-e[0])<=0);)--o;a[o++]=s}return a.slice(0,o)}t.polygonArea=function(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[1]*i[0]-e[0]*i[1];return a/2},t.polygonCentroid=function(t){for(var e,n,r=-1,i=t.length,a=0,o=0,s=t[i-1],l=0;++r<i;)e=s,s=t[r],l+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(l*=3),o/l]},t.polygonContains=function(t,e){for(var n,r,i=t.length,a=t[i-1],o=e[0],s=e[1],l=a[0],u=a[1],c=!1,f=0;f<i;++f)n=(a=t[f])[0],s<(r=a[1])!=s<u&&o<(l-n)*(s-r)/(u-r)+n&&(c=!c),l=n,u=r;return c},t.polygonHull=function(t){if((e=t.length)<3)return null;for(var e,n=new Array(e),r=new Array(e),i=0;i<e;++i)n[i]=[+t[i][0],+t[i][1],i];for(n.sort(c),i=0;i<e;++i)r[i]=[n[i][0],-n[i][1]];var a=f(n),o=f(r),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],u=[];for(i=a.length-1;0<=i;--i)u.push(t[n[a[i]][2]]);for(i=+s;i<o.length-l;++i)u.push(t[n[o[i]][2]]);return u},t.polygonLength=function(t){for(var e,n,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],l=0;++r<i;)e=o,n=s,e-=o=(a=t[r])[0],n-=s=a[1],l+=Math.hypot(e,n);return l},Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],79:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){function h(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,l,u,c,f,h,d=t._root,p={data:r},g=t._x0,y=t._y0,m=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(y+v)/2))?y=o:v=o,!(d=(i=d)[f=c<<1|u]))return i[f]=p,t;if(s=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===s&&n===l)return p.next=d,i?i[f]=p:t._root=p,t;for(;i=i?i[f]=new Array(4):t._root=new Array(4),(u=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(y+v)/2))?y=o:v=o,(f=c<<1|u)==(h=(o<=l)<<1|a<=s););return i[h]=d,i[f]=p,t}function m(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function r(t){return t[0]}function i(t){return t[1]}function e(t,e,n){n=new a(null==e?r:e,null==n?i:n,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function a(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function o(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var n=e.prototype=a.prototype;n.copy=function(){var t,e,n=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=o(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=o(e));return n},n.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return h(this.cover(e,n),e,n,t)},n.addAll=function(t){for(var e,n,r,i=t.length,a=new Array(i),o=new Array(i),s=1/0,l=1/0,u=-1/0,c=-1/0,f=0;f<i;++f)isNaN(n=+this._x.call(null,e=t[f]))||isNaN(r=+this._y.call(null,e))||((a[f]=n)<s&&(s=n),u<n&&(u=n),(o[f]=r)<l&&(l=r),c<r&&(c=r));if(u<s||c<l)return this;for(this.cover(s,l).cover(u,c),f=0;f<i;++f)h(this,a[f],o[f],t[f]);return this},n.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,l=i-n||1,u=this._root;t<n||i<=t||e<r||a<=e;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=u,u=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},n.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},n.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(t,e,n){var r,i,a,o,s,l,u,c,f=this._x0,h=this._y0,d=this._x1,p=this._y1,g=[],y=this._root;for(y&&g.push(new m(y,f,h,d,p)),null==n?n=1/0:(f=t-n,h=e-n,d=t+n,p=e+n,n*=n);u=g.pop();)!(y=u.node)||(r=u.x0)>d||(i=u.y0)>p||(a=u.x1)<f||(o=u.y1)<h||(y.length?(s=(r+a)/2,l=(i+o)/2,g.push(new m(y[3],s,l,a,o),new m(y[2],r,l,s,o),new m(y[1],s,i,a,l),new m(y[0],r,i,s,l)),(s=(l<=e)<<1|s<=t)&&(u=g[g.length-1],g[g.length-1]=g[g.length-1-s],g[g.length-1-s]=u)):(u=(u=t-+this._x.call(null,y.data))*u+(u=e-+this._y.call(null,y.data))*u)<n&&(f=t-(u=Math.sqrt(n=u)),h=e-u,d=t+u,p=e+u,c=y.data));return c},n.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,l,u,c,f,h=this._root,d=this._x0,p=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=a>=(u=(d+g)/2))?d=u:g=u,(u=o>=(s=(p+y)/2))?p=s:y=s,!(h=(e=h)[c=u<<1|l]))return this;if(!h.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(n=e,f=c)}for(;h.data!==t;)if(!(h=(r=h).next))return this;return(i=h.next)&&delete h.next,r?i?r.next=i:delete r.next:e?(i?e[c]=i:delete e[c],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[f]=h:this._root=h)):this._root=i,this},n.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},n.root=function(){return this._root},n.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},n.visit=function(t){var e,n,r,i,a,o,s,l=[],u=this._root;for(u&&l.push(new m(u,this._x0,this._y0,this._x1,this._y1));e=l.pop();)!t(u=e.node,n=e.x0,r=e.y0,i=e.x1,a=e.y1)&&u.length&&(o=(n+i)/2,s=(r+a)/2,(e=u[3])&&l.push(new m(e,o,s,i,a)),(e=u[2])&&l.push(new m(e,n,s,o,a)),(e=u[1])&&l.push(new m(e,o,r,i,s)),(e=u[0])&&l.push(new m(e,n,r,o,s)));return this},n.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i,a,o,s,l,u,c,f=e.node;f.length&&(a=e.x0,o=e.y0,u=(a+(s=e.x1))/2,c=(o+(l=e.y1))/2,(i=f[0])&&n.push(new m(i,a,o,u,c)),(i=f[1])&&n.push(new m(i,u,o,s,c)),(i=f[2])&&n.push(new m(i,a,c,u,l)),(i=f[3])&&n.push(new m(i,u,c,s,l))),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},n.x=function(t){return arguments.length?(this._x=t,this):this._x},n.y=function(t){return arguments.length?(this._y=t,this):this._y},t.quadtree=e,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],80:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){var e=Math.random,n=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(e),r=function t(n){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(n()*e+t)}}return e.source=t,e}(e),i=function t(a){function e(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var t;if(null!=r)t=r,r=null;else for(;r=2*a()-1,t=2*a()-1,i=r*r+t*t,!i||1<i;);return e+n*t*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(e),a=function t(e){var n=i.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(e),o=function t(r){function e(n){return(n=+n)<=0?function(){return 0}:function(){for(var t=0,e=n;1<e;--e)t+=r();return t+e*r()}}return e.source=t,e}(e),s=function t(n){var r=o.source(n);function e(t){if(0==(t=+t))return n;var e=r(t);return function(){return e()/t}}return e.source=t,e}(e),l=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(e),u=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(e),c=function t(e){function n(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(e),d=function t(e){function n(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return 0===t?function(){return 1/0}:1===t?function(){return 1}:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(e),f=function t(s){var l=i.source(s)();function e(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return function(){return 0};if(r=null==r?1:+r,1===t)return function(){return-Math.log1p(-s())*r};var i=(t<1?t+1:t)-1/3,a=1/(3*Math.sqrt(i)),o=t<1?function(){return Math.pow(s(),1/t)}:function(){return 1};return function(){do{do{var t=l(),e=1+a*t}while(e<=0);e*=e*e;var n=1-s()}while(1-.0331*t*t*t*t<=n&&Math.log(n)>=.5*t*t+i*(1-e+Math.log(e)));return i*e*o()*r}}return e.source=t,e}(e),p=function t(e){var i=f.source(e);function n(t,e){var n=i(t),r=i(e);return function(){var t=n();return 0===t?0:t/(t+r())}}return n.source=t,n}(e),h=function t(e){var f=d.source(e),h=p.source(e);function n(u,c){return u=+u,1<=(c=+c)?function(){return u}:c<=0?function(){return 0}:function(){for(var t=0,e=u,n=c;16<e*n&&16<e*(1-n);){var r=Math.floor((e+1)*n),i=h(r,e-r+1)();i<=n?(t+=r,e-=r,n=(n-i)/(1-i)):(e=r-1,n/=i)}for(var a=n<.5,o=f(a?n:1-n),s=o(),l=0;s<=e;++l)s+=o();return t+(a?l:e-l)}}return n.source=t,n}(e),g=function t(i){function e(e,t,n){var r=0==(e=+e)?function(t){return-Math.log(t)}:(e=1/e,function(t){return Math.pow(t,e)});return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*r(-Math.log1p(-i()))}}return e.source=t,e}(e),y=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*n())}}return e.source=t,e}(e),m=function t(r){function e(e,n){return e=null==e?0:+e,n=null==n?1:+n,function(){var t=r();return e+n*Math.log(t/(1-t))}}return e.source=t,e}(e),e=function t(s){var l=f.source(s),u=h.source(s);function e(o){return function(){for(var t=0,e=o;16<e;){var n=Math.floor(.875*e),r=l(n)();if(e<r)return t+u(n-1,e/r)();t+=n,e-=r}for(var i=-Math.log1p(-s()),a=0;i<=e;++a)i-=Math.log1p(-s());return t+a}}return e.source=t,e}(e),v=1/4294967296;t.randomBates=s,t.randomBernoulli=c,t.randomBeta=p,t.randomBinomial=h,t.randomCauchy=y,t.randomExponential=l,t.randomGamma=f,t.randomGeometric=d,t.randomInt=r,t.randomIrwinHall=o,t.randomLcg=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Math.random(),e=0|(0<=t&&t<1?t/v:Math.abs(t));return function(){return v*((e=1664525*e+1013904223|0)>>>0)}},t.randomLogNormal=a,t.randomLogistic=m,t.randomNormal=i,t.randomPareto=u,t.randomPoisson=e,t.randomUniform=n,t.randomWeibull=g,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i="undefined"!=typeof globalThis?globalThis:i||self).d3=i.d3||{})},{}],81:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,e,n){function r(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var i=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),a=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),o=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),s=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),l=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),u=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),c=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),f=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),h=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),d=r("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),p=function(t){return e.interpolateRgbBasis(t[t.length-1])},g=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r),y=p(g),m=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r),v=p(m),b=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r),x=p(b),_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r),w=p(_),k=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r),M=p(k),T=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r),A=p(T),S=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r),E=p(S),O=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r),C=p(O),P=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r),L=p(P),R=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r),j=p(R),N=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r),D=p(N),z=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r),I=p(z),F=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r),B=p(F),U=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r),V=p(U),H=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r),q=p(H),G=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r),Y=p(G),X=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r),W=p(X),Z=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r),K=p(Z),Q=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r),$=p(Q),J=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r),tt=p(J),et=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r),nt=p(et),rt=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r),it=p(rt),at=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r),ot=p(at),st=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r),lt=p(st),ut=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r),ct=p(ut),ft=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r),ht=p(ft),dt=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r),pt=p(dt);var gt=e.interpolateCubehelixLong(n.cubehelix(300,.5,0),n.cubehelix(-240,.5,1)),yt=e.interpolateCubehelixLong(n.cubehelix(-100,.75,.35),n.cubehelix(80,1.5,.8)),mt=e.interpolateCubehelixLong(n.cubehelix(260,.75,.35),n.cubehelix(80,1.5,.8)),vt=n.cubehelix();var bt=n.rgb(),xt=Math.PI/3,_t=2*Math.PI/3;function wt(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var kt=wt(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Mt=wt(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),p=wt(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),n=wt(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));t.interpolateBlues=it,t.interpolateBrBG=y,t.interpolateBuGn=j,t.interpolateBuPu=D,t.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},t.interpolateCool=mt,t.interpolateCubehelixDefault=gt,t.interpolateGnBu=I,t.interpolateGreens=ot,t.interpolateGreys=lt,t.interpolateInferno=p,t.interpolateMagma=Mt,t.interpolateOrRd=B,t.interpolateOranges=pt,t.interpolatePRGn=v,t.interpolatePiYG=x,t.interpolatePlasma=n,t.interpolatePuBu=q,t.interpolatePuBuGn=V,t.interpolatePuOr=w,t.interpolatePuRd=Y,t.interpolatePurples=ct,t.interpolateRainbow=function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return vt.h=360*t-100,vt.s=1.5-1.5*e,vt.l=.8-.9*e,vt+""},t.interpolateRdBu=M,t.interpolateRdGy=A,t.interpolateRdPu=W,t.interpolateRdYlBu=E,t.interpolateRdYlGn=C,t.interpolateReds=ht,t.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,bt.r=255*(e=Math.sin(t))*e,bt.g=255*(e=Math.sin(t+xt))*e,bt.b=255*(e=Math.sin(t+_t))*e,bt+""},t.interpolateSpectral=L,t.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},t.interpolateViridis=kt,t.interpolateWarm=yt,t.interpolateYlGn=$,t.interpolateYlGnBu=K,t.interpolateYlOrBr=tt,t.interpolateYlOrRd=nt,t.schemeAccent=a,t.schemeBlues=rt,t.schemeBrBG=g,t.schemeBuGn=R,t.schemeBuPu=N,t.schemeCategory10=i,t.schemeDark2=o,t.schemeGnBu=z,t.schemeGreens=at,t.schemeGreys=st,t.schemeOrRd=F,t.schemeOranges=dt,t.schemePRGn=m,t.schemePaired=s,t.schemePastel1=l,t.schemePastel2=u,t.schemePiYG=b,t.schemePuBu=H,t.schemePuBuGn=U,t.schemePuOr=_,t.schemePuRd=G,t.schemePurples=ut,t.schemeRdBu=k,t.schemeRdGy=T,t.schemeRdPu=X,t.schemeRdYlBu=S,t.schemeRdYlGn=O,t.schemeReds=ft,t.schemeSet1=c,t.schemeSet2=f,t.schemeSet3=h,t.schemeSpectral=P,t.schemeTableau10=d,t.schemeYlGn=Q,t.schemeYlGnBu=Z,t.schemeYlOrBr=J,t.schemeYlOrRd=et,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-interpolate"),t("d3-color")):a((i=i||self).d3=i.d3||{},i.d3,i.d3)},{"d3-color":64,"d3-interpolate":76}],82:[function(t,e,n){"use strict";function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a,o;o=function(t,M,g,s,e,n){function p(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function a(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}var l=Symbol("implicit");function y(){var i=new Map,a=[],r=[],o=l;function s(t){var e=t+"",n=i.get(e);if(!n){if(o!==l)return o;i.set(e,n=a.push(t))}return r[(n-1)%r.length]}return s.domain=function(t){if(!arguments.length)return a.slice();a=[],i=new Map;var e=et(t);try{for(e.s();!(r=e.n()).done;){var n=r.value,r=n+"";i.has(r)||i.set(r,a.push(n))}}catch(t){e.e(t)}finally{e.f()}return s},s.range=function(t){return arguments.length?(r=Array.from(t),s):r.slice()},s.unknown=function(t){return arguments.length?(o=t,s):o},s.copy=function(){return y(a,r).unknown(o)},p.apply(s,arguments),s}function r(){var i,a,t=y().unknown(void 0),o=t.domain,s=t.range,l=0,u=1,c=!1,f=0,h=0,d=.5;function e(){var t=o().length,e=u<l,n=e?u:l,r=e?l:u;i=(r-n)/Math.max(1,t-f+2*h),c&&(i=Math.floor(i)),n+=(r-n-i*(t-f))*d,a=i*(1-f),c&&(n=Math.round(n),a=Math.round(a));t=M.range(t).map(function(t){return n+i*t});return s(e?t.reverse():t)}return delete t.unknown,t.domain=function(t){return arguments.length?(o(t),e()):o()},t.range=function(t){return arguments.length?(t=tt(t,2),l=t[0],u=t[1],l=+l,u=+u,e()):[l,u]},t.rangeRound=function(t){var t=t,t=tt(t,2);return l=t[0],u=t[1],l=+l,u=+u,c=!0,e()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(t){return arguments.length?(c=!!t,e()):c},t.padding=function(t){return arguments.length?(f=Math.min(1,h=+t),e()):f},t.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),e()):f},t.paddingOuter=function(t){return arguments.length?(h=+t,e()):h},t.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},t.copy=function(){return r(o(),[l,u]).round(c).paddingInner(f).paddingOuter(h).align(d)},p.apply(e(),arguments)}function d(t){return+t}var m=[0,1];function v(t){return t}function u(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function b(t,e,n){var r=t[0],t=t[1],i=e[0],e=e[1],i=t<r?(r=u(t,r),n(e,i)):(r=u(r,t),n(i,e));return function(t){return i(r(t))}}function x(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=u(n[o],n[o+1]),a[o]=e(t[o],t[o+1]);return function(t){var e=M.bisect(n,t,1,r)-1;return a[e](i[e](t))}}function T(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function i(){var n,r,e,i,a,o,s=m,l=m,u=g.interpolate,c=v;function f(){var e,n,t,r=Math.min(s.length,l.length);return c!==v&&(e=s[0],(n=s[r-1])<e&&(t=e,e=n,n=t),c=function(t){return Math.max(e,Math.min(n,t))}),i=2<r?x:b,a=o=null,h}function h(t){return isNaN(t=+t)?e:(a=a||i(s.map(n),l,u))(n(c(t)))}return h.invert=function(t){return c(r((o=o||i(l,s.map(n),g.interpolateNumber))(t)))},h.domain=function(t){return arguments.length?(s=Array.from(t,d),f()):s.slice()},h.range=function(t){return arguments.length?(l=Array.from(t),f()):l.slice()},h.rangeRound=function(t){return l=Array.from(t),u=g.interpolateRound,f()},h.clamp=function(t){return arguments.length?(c=!!t||v,f()):c!==v},h.interpolate=function(t){return arguments.length?(u=t,f()):u},h.unknown=function(t){return arguments.length?(e=t,h):e},function(t,e){return n=t,r=e,f()}}function A(){return i()(v,v)}function o(t,e,n,r){var i,a=M.tickStep(t,e,n);switch((r=s.formatSpecifier(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=s.precisionPrefix(a,o))||(r.precision=i),s.formatPrefix(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=s.precisionRound(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=s.precisionFixed(a))||(r.precision=i-2*("%"===r.type))}return s.format(r)}function c(u){var c=u.domain;return u.ticks=function(t){var e=c();return M.ticks(e[0],e[e.length-1],null==t?10:t)},u.tickFormat=function(t,e){var n=c();return o(n[0],n[n.length-1],null==t?10:t,e)},u.nice=function(t){null==t&&(t=10);var e,n,r=c(),i=0,a=r.length-1,o=r[i],s=r[a],l=10;for(s<o&&(n=o,o=s,s=n,n=i,i=a,a=n);0<l--;){if((n=M.tickIncrement(o,s,t))===e)return r[i]=o,r[a]=s,c(r);if(0<n)o=Math.floor(o/n)*n,s=Math.ceil(s/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,s=Math.floor(s*n)/n}e=n}return u},u}function S(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function _(t){return Math.log(t)}function w(t){return Math.exp(t)}function k(t){return-Math.log(-t)}function E(t){return-Math.exp(-t)}function O(t){return isFinite(t)?+("1e"+t):t<0?0:t}function C(e){return function(t){return-e(-t)}}function f(t){var c,f,i=t(_,w),h=i.domain,d=10;function e(){var e,n;return c=(n=d)===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n}),f=10===(e=d)?O:e===Math.E?Math.exp:function(t){return Math.pow(e,t)},h()[0]<0?(c=C(c),f=C(f),t(k,E)):t(_,w),i}return i.base=function(t){return arguments.length?(d=+t,e()):d},i.domain=function(t){return arguments.length?(h(t),e()):h()},i.ticks=function(t){var e=h(),n=e[0],r=e[e.length-1];(e=r<n)&&(s=n,n=r,r=s);var i,a,o,s=c(n),l=c(r),t=null==t?10:+t,u=[];if(!(d%1)&&l-s<t){if(s=Math.floor(s),l=Math.ceil(l),0<n){for(;s<=l;++s)for(a=1,i=f(s);a<d;++a)if(!((o=i*a)<n)){if(r<o)break;u.push(o)}}else for(;s<=l;++s)for(a=d-1,i=f(s);1<=a;--a)if(!((o=i*a)<n)){if(r<o)break;u.push(o)}2*u.length<t&&(u=M.ticks(n,r,t))}else u=M.ticks(s,l,Math.min(l-s,t)).map(f);return e?u.reverse():u},i.tickFormat=function(t,n){if(null==n&&(n=10===d?".0e":","),"function"!=typeof n&&(n=s.format(n)),t===1/0)return n;null==t&&(t=10);var r=Math.max(1,d*t/i.ticks().length);return function(t){var e=t/f(Math.round(c(t)));return e*d<d-.5&&(e*=d),e<=r?n(t):""}},i.nice=function(){return h(S(h(),{floor:function(t){return f(Math.floor(c(t)))},ceil:function(t){return f(Math.ceil(c(t)))}}))},i}function h(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function P(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function L(e){var n=1,t=e(h(n),P(n));return t.constant=function(t){return arguments.length?e(h(n=+t),P(n)):n},c(t)}function R(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function j(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function N(t){return t<0?-t*t:t*t}function D(e){var t=e(v,v),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(v,v):.5===n?e(j,N):e(R(n),R(1/n)):n},c(t)}function z(){var t=D(i());return t.copy=function(){return T(t,z()).exponent(t.exponent())},p.apply(t,arguments),t}function I(t){return Math.sign(t)*t*t}var F=1e3,B=60*F,U=60*B,V=24*U,H=7*V,q=30*V,G=365*V;function Y(t){return new Date(t)}function X(t){return t instanceof Date?+t:+new Date(+t)}function W(o,e,n,r,i,a,s,l,u){var c=A(),f=c.invert,h=c.domain,d=u(".%L"),p=u(":%S"),g=u("%I:%M"),y=u("%I %p"),m=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y"),_=[[s,1,F],[s,5,5*F],[s,15,15*F],[s,30,30*F],[a,1,B],[a,5,5*B],[a,15,15*B],[a,30,30*B],[i,1,U],[i,3,3*U],[i,6,6*U],[i,12,12*U],[r,1,V],[r,2,2*V],[n,1,H],[e,1,q],[e,3,3*q],[o,1,G]];function w(t){return(s(t)<t?d:a(t)<t?p:i(t)<t?g:r(t)<t?y:e(t)<t?n(t)<t?m:v:o(t)<t?b:x)(t)}function k(t,e,n){if(null==t&&(t=10),"number"!=typeof t)return t;var r,i=Math.abs(n-e)/t,a=M.bisector(function(t){return t[2]}).right(_,i);return(t=a===_.length?(r=M.tickStep(e/G,n/G,t),o):a?(r=(a=_[i/_[a-1][2]<_[a][2]/i?a-1:a])[1],a[0]):(r=Math.max(M.tickStep(e,n,t),1),l)).every(r)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?h(Array.from(t,X)):h().map(Y)},c.ticks=function(t){var e,n=h(),r=n[0],i=n[n.length-1],n=i<r;return n&&(e=r,r=i,i=e),e=(e=k(t,r,i))?e.range(r,i+1):[],n?e.reverse():e},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t){var e=h();return(t=k(t,e[0],e[e.length-1]))?h(S(e,t)):c},c.copy=function(){return T(c,W(o,e,n,r,i,a,s,l,u))},c}function Z(){var e,n,r,i,a,o=0,s=1,l=v,u=!1;function c(t){return isNaN(t=+t)?a:l(0===r?.5:(t=(i(t)-e)*r,u?Math.max(0,Math.min(1,t)):t))}function t(n){return function(t){var e;return arguments.length?(t=(e=tt(t,2))[0],e=e[1],l=n(t,e),c):[l(0),l(1)]}}return c.domain=function(t){return arguments.length?(t=tt(t,2),o=t[0],s=t[1],e=i(o=+o),n=i(s=+s),r=e===n?0:1/(n-e),c):[o,s]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(l=t,c):l},c.range=t(g.interpolate),c.rangeRound=t(g.interpolateRound),c.unknown=function(t){return arguments.length?(a=t,c):a},function(t){return e=(i=t)(o),n=t(s),r=e===n?0:1/(n-e),c}}function K(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Q(){var t=D(Z());return t.copy=function(){return K(t,Q()).exponent(t.exponent())},a.apply(t,arguments)}function $(){var e,n,r,i,a,o,s,l=0,u=.5,c=1,f=1,h=v,d=!1;function p(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-n)*(f*t<f*n?i:a),h(d?Math.max(0,Math.min(1,t)):t))}function t(r){return function(t){var e,n;return arguments.length?(e=(n=tt(t,3))[0],t=n[1],n=n[2],h=g.piecewise(r,[e,t,n]),p):[h(0),h(.5),h(1)]}}return p.domain=function(t){return arguments.length?(t=tt(t,3),l=t[0],u=t[1],c=t[2],e=o(l=+l),n=o(u=+u),r=o(c=+c),i=e===n?0:.5/(n-e),a=n===r?0:.5/(r-n),f=n<e?-1:1,p):[l,u,c]},p.clamp=function(t){return arguments.length?(d=!!t,p):d},p.interpolator=function(t){return arguments.length?(h=t,p):h},p.range=t(g.interpolate),p.rangeRound=t(g.interpolateRound),p.unknown=function(t){return arguments.length?(s=t,p):s},function(t){return e=(o=t)(l),n=t(u),r=t(c),i=e===n?0:.5/(n-e),a=n===r?0:.5/(r-n),f=n<e?-1:1,p}}function J(){var t=D($());return t.copy=function(){return K(t,J()).exponent(t.exponent())},a.apply(t,arguments)}t.scaleBand=r,t.scaleDiverging=function t(){var e=c($()(v));return e.copy=function(){return K(e,t())},a.apply(e,arguments)},t.scaleDivergingLog=function t(){var e=f($()).domain([.1,1,10]);return e.copy=function(){return K(e,t()).base(e.base())},a.apply(e,arguments)},t.scaleDivergingPow=J,t.scaleDivergingSqrt=function(){return J.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var e=L($());return e.copy=function(){return K(e,t()).constant(e.constant())},a.apply(e,arguments)},t.scaleIdentity=function t(e){var n;function r(t){return isNaN(t=+t)?n:t}return(r.invert=r).domain=r.range=function(t){return arguments.length?(e=Array.from(t,d),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,d):[0,1],c(r)},t.scaleImplicit=l,t.scaleLinear=function t(){var e=A();return e.copy=function(){return T(e,t())},p.apply(e,arguments),c(e)},t.scaleLog=function t(){var e=f(i()).domain([1,10]);return e.copy=function(){return T(e,t()).base(e.base())},p.apply(e,arguments),e},t.scaleOrdinal=y,t.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(r.apply(null,arguments).paddingInner(1))},t.scalePow=z,t.scaleQuantile=function t(){var e,r=[],n=[],i=[];function a(){var t=0,e=Math.max(1,n.length);for(i=new Array(e-1);++t<e;)i[t-1]=M.quantileSorted(r,t/e);return o}function o(t){return isNaN(t=+t)?e:n[M.bisect(i,t)]}return o.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[0<t?i[t-1]:r[0],t<i.length?i[t]:r[r.length-1]]},o.domain=function(t){if(!arguments.length)return r.slice();r=[];var e=et(t);try{for(e.s();!(n=e.n()).done;){var n=n.value;null==n||isNaN(n=+n)||r.push(n)}}catch(t){e.e(t)}finally{e.f()}return r.sort(M.ascending),a()},o.range=function(t){return arguments.length?(n=Array.from(t),a()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return i.slice()},o.copy=function(){return t().domain(r).range(n).unknown(e)},p.apply(o,arguments)},t.scaleQuantize=function t(){var e,n=0,r=1,i=1,a=[.5],o=[0,1];function s(t){return t<=t?o[M.bisect(a,t,0,i)]:e}function l(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*r-(t-i)*n)/(i+1);return s}return s.domain=function(t){return arguments.length?(t=tt(t,2),n=t[0],r=t[1],n=+n,r=+r,l()):[n,r]},s.range=function(t){return arguments.length?(i=(o=Array.from(t)).length-1,l()):o.slice()},s.invertExtent=function(t){return(t=o.indexOf(t))<0?[NaN,NaN]:t<1?[n,a[0]]:i<=t?[a[i-1],r]:[a[t-1],a[t]]},s.unknown=function(t){return arguments.length&&(e=t),s},s.thresholds=function(){return a.slice()},s.copy=function(){return t().domain([n,r]).range(o).unknown(e)},p.apply(c(s),arguments)},t.scaleRadial=function t(){var e,n=A(),r=[0,1],i=!1;function a(t){return t=n(t),t=Math.sign(t)*Math.sqrt(Math.abs(t)),isNaN(t)?e:i?Math.round(t):t}return a.invert=function(t){return n.invert(I(t))},a.domain=function(t){return arguments.length?(n.domain(t),a):n.domain()},a.range=function(t){return arguments.length?(n.range((r=Array.from(t,d)).map(I)),a):r.slice()},a.rangeRound=function(t){return a.range(t).round(!0)},a.round=function(t){return arguments.length?(i=!!t,a):i},a.clamp=function(t){return arguments.length?(n.clamp(t),a):n.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t(n.domain(),r).round(i).clamp(n.clamp()).unknown(e)},p.apply(a,arguments),c(a)},t.scaleSequential=function t(){var e=c(Z()(v));return e.copy=function(){return K(e,t())},a.apply(e,arguments)},t.scaleSequentialLog=function t(){var e=f(Z()).domain([1,10]);return e.copy=function(){return K(e,t()).base(e.base())},a.apply(e,arguments)},t.scaleSequentialPow=Q,t.scaleSequentialQuantile=function t(){var r=[],n=v;function i(t){if(!isNaN(t=+t))return n((M.bisect(r,t,1)-1)/(r.length-1))}return i.domain=function(t){if(!arguments.length)return r.slice();r=[];var e=et(t);try{for(e.s();!(n=e.n()).done;){var n=n.value;null==n||isNaN(n=+n)||r.push(n)}}catch(t){e.e(t)}finally{e.f()}return r.sort(M.ascending),i},i.interpolator=function(t){return arguments.length?(n=t,i):n},i.range=function(){return r.map(function(t,e){return n(e/(r.length-1))})},i.quantiles=function(n){return Array.from({length:n+1},function(t,e){return M.quantile(r,e/n)})},i.copy=function(){return t(n).domain(r)},a.apply(i,arguments)},t.scaleSequentialSqrt=function(){return Q.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var e=L(Z());return e.copy=function(){return K(e,t()).constant(e.constant())},a.apply(e,arguments)},t.scaleSqrt=function(){return z.apply(null,arguments).exponent(.5)},t.scaleSymlog=function t(){var e=L(i());return e.copy=function(){return T(e,t()).constant(e.constant())},p.apply(e,arguments)},t.scaleThreshold=function t(){var e,n=[.5],r=[0,1],i=1;function a(t){return t<=t?r[M.bisect(n,t,0,i)]:e}return a.domain=function(t){return arguments.length?(n=Array.from(t),i=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(t){return t=r.indexOf(t),[n[t-1],n[t]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(r).unknown(e)},p.apply(a,arguments)},t.scaleTime=function(){return p.apply(W(e.timeYear,e.timeMonth,e.timeWeek,e.timeDay,e.timeHour,e.timeMinute,e.timeSecond,e.timeMillisecond,n.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return p.apply(W(e.utcYear,e.utcMonth,e.utcWeek,e.utcDay,e.utcHour,e.utcMinute,e.utcSecond,e.utcMillisecond,n.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.tickFormat=o,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((a=void 0)===n?"undefined":i(n))&&void 0!==e?o(n,t("d3-array"),t("d3-interpolate"),t("d3-format"),t("d3-time"),t("d3-time-format")):o((a=a||self).d3=a.d3||{},a.d3,a.d3,a.d3,a.d3,a.d3)},{"d3-array":60,"d3-format":73,"d3-interpolate":76,"d3-time":85,"d3-time-format":84}],83:[function(t,e,n){"use strict";function tt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i;i=function(t){var l=regeneratorRuntime.mark(U),r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t}function o(t){t=a(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===r&&t.documentElement.namespaceURI===r?t.createElement(n):t.createElementNS(e,n)}})(t)}function e(){}function f(t){return null==t?e:function(){return this.querySelector(t)}}function w(t){return"object"===et(t)&&"length"in t?t:Array.from(t)}function n(){return[]}function h(t){return null==t?n:function(){return this.querySelectorAll(t)}}function c(t){return function(){return this.matches(t)}}function s(e){return function(t){return t.matches(e)}}var u=Array.prototype.find;function d(){return this.firstElementChild}var p=Array.prototype.filter;function g(){return this.children}function y(t){return new Array(t.length)}function m(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function k(t,e,n,r,i,a){for(var o,s=0,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new m(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function M(t,e,n,r,i,a,o){for(var s,l,u=new Map,c=e.length,f=a.length,h=new Array(c),d=0;d<c;++d)(s=e[d])&&(h[d]=l=o.call(s,s.__data__,d,e)+"",u.has(l)?i[d]=s:u.set(l,s));for(d=0;d<f;++d)l=o.call(t,a[d],d,a)+"",(s=u.get(l))?((r[d]=s).__data__=a[d],u.delete(l)):n[d]=new m(t,a[d]);for(d=0;d<c;++d)(s=e[d])&&u.get(h[d])===s&&(i[d]=s)}function T(t){return t.__data__}function v(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function b(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function x(t,e){return t.style.getPropertyValue(e)||b(t).getComputedStyle(t,null).getPropertyValue(e)}function _(t){return t.trim().split(/^|\s+/)}function A(t){return t.classList||new S(t)}function S(t){this._node=t,this._names=_(t.getAttribute("class")||"")}function E(t,e){for(var n=A(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function O(t,e){for(var n=A(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function C(){this.textContent=""}function P(){this.innerHTML=""}function L(){this.nextSibling&&this.parentNode.appendChild(this)}function R(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j(){return null}function N(){var t=this.parentNode;t&&t.removeChild(this)}function D(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function z(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function I(a){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],a.type&&e.type!==a.type||e.name!==a.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?t.length=r:delete this.__on}}}function F(o,s,l){return function(){var t,e,n=this.__on,r=(e=s,function(t){e.call(this,t,this.__data__)});if(n)for(var i=0,a=n.length;i<a;++i)if((t=n[i]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=l),void(t.value=s);this.addEventListener(o.type,r,l),t={type:o.type,name:o.name,value:s,listener:r,options:l},n?n.push(t):this.__on=[t]}}function B(t,e,n){var r=b(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function U(){var e,n,r,i,a,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this._groups,n=0,r=e.length;case 1:if(!(n<r)){t.next=13;break}i=e[n],a=0,o=i.length;case 3:if(!(a<o)){t.next=10;break}if(s=i[a])return t.next=7,s;t.next=7;break;case 7:++a,t.next=3;break;case 10:++n,t.next=1;break;case 13:case"end":return t.stop()}},l,this)}m.prototype={constructor:m,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},S.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var V,H,q,G=[null];function Y(t,e){this._groups=t,this._parents=e}function X(){return new Y([[document.documentElement]],G)}function W(t){return"string"==typeof t?new Y([[document.querySelector(t)]],[document.documentElement]):new Y([[t]],G)}Y.prototype=X.prototype=(V={constructor:Y,select:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new Y(r,this._parents)},selectAll:function(t){var e;t="function"==typeof t?(e=t,function(){var t=e.apply(this,arguments);return null==t?[]:w(t)}):h(t);for(var n=this._groups,r=n.length,i=[],a=[],o=0;o<r;++o)for(var s,l=n[o],u=l.length,c=0;c<u;++c)(s=l[c])&&(i.push(t.call(s,s.__data__,c,l)),a.push(s));return new Y(i,a)},selectChild:function(t){return this.select(null==t?d:(e="function"==typeof t?t:s(t),function(){return u.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?g:(e="function"==typeof t?t:s(t),function(){return p.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Y(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,T);var n,r=e?M:k,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var f=i[c],h=a[c],d=h.length,p=w(t.call(f,f&&f.__data__,c,i)),g=p.length,y=l[c]=new Array(g),m=s[c]=new Array(g);r(f,h,y,m,u[c]=new Array(d),p,e);for(var v,b,x=0,_=0;x<g;++x)if(v=y[x]){for(_<=x&&(_=x+1);!(b=m[_])&&++_<g;);v._next=b||null}}return(s=new Y(s,i))._enter=l,s._exit=u,s},enter:function(){return new Y(this._enter||this._groups.map(y),this._parents)},exit:function(){return new Y(this._exit||this._groups.map(y),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit(),r="function"==typeof t?t(r):r.append(t+"");return null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof Y))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),a=new Array(r),o=0;o<i;++o)for(var s,l=e[o],u=n[o],c=l.length,f=a[o]=new Array(c),h=0;h<c;++h)(s=l[h]||u[h])&&(f[h]=s);for(;o<r;++o)a[o]=e[o];return new Y(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];0<=--a;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||v;for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o,s=e[a],l=s.length,u=i[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(t)}return new Y(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t,e=0,n=tt(this);try{for(n.s();!(t=n.n()).done;){t.value;++e}}catch(t){n.e(t)}finally{n.f()}return e},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=a(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):x(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=_(t+"");if(arguments.length<2){for(var r=A(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?E:O)(this,t)}}:e?function(t){return function(){E(this,t)}}:function(t){return function(){O(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?C:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?P:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(L)},lower:function(){return this.each(R)},append:function(t){var e="function"==typeof t?t:o(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:o(t),r=null==e?j:"function"==typeof e?e:f(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(N)},clone:function(t){return this.select(t?z:D)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=a.length;if(!(arguments.length<2)){for(s=e?F:I,r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return B(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return B(this,t,e)}})(t,e))}},H=Symbol.iterator,q=U,H in V?Object.defineProperty(V,H,{value:q,enumerable:!0,configurable:!0,writable:!0}):V[H]=q,V);var Z=0;function K(){return new Q}function Q(){this._="@"+(++Z).toString(36)}function $(t){for(var e;e=t.sourceEvent;)t=e;return t}function J(t,e){if(t=$(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}Q.prototype=K.prototype={constructor:Q,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=function(t){return W(o(t).call(document.documentElement))},t.creator=o,t.local=K,t.matcher=c,t.namespace=a,t.namespaces=i,t.pointer=J,t.pointers=function(t,e){return t.target&&(t=$(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,function(t){return J(t,e)})},t.select=W,t.selectAll=function(t){return"string"==typeof t?new Y([document.querySelectorAll(t)],[document.documentElement]):new Y([null==t?[]:w(t)],G)},t.selection=X,t.selector=f,t.selectorAll=h,t.style=x,t.window=b,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((r=void 0)===n?"undefined":et(n))&&void 0!==e?i(n):i((r=r||self).d3=r.d3||{})},{}],84:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(e,T){function A(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function S(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function E(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function n(t){var r=t.dateTime,i=t.date,a=t.time,e=t.periods,n=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=C(e),c=P(e),f=C(n),h=P(n),d=C(o),p=P(o),g=C(s),y=P(s),m=C(l),v=P(l),b={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:$,e:$,f:rt,g:dt,G:gt,H:J,I:tt,j:et,L:nt,m:it,M:at,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:zt,s:It,S:ot,u:st,U:lt,V:ut,w:ct,W:ft,x:null,X:null,y:ht,Y:pt,Z:yt,"%":Dt},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:mt,e:mt,f:wt,g:Lt,G:jt,H:vt,I:bt,j:xt,L:_t,m:kt,M:Mt,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:zt,s:It,S:Tt,u:At,U:St,V:Et,w:Ot,W:Ct,x:null,X:null,y:Pt,Y:Rt,Z:Nt,"%":Dt},_={a:function(t,e,n){e=d.exec(e.slice(n));return e?(t.w=p.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){e=f.exec(e.slice(n));return e?(t.w=h.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){e=m.exec(e.slice(n));return e?(t.m=v.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){e=g.exec(e.slice(n));return e?(t.m=y.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return M(t,r,e,n)},d:V,e:V,f:W,g:I,G:z,H:q,I:q,j:H,L:X,m:U,M:G,p:function(t,e,n){e=u.exec(e.slice(n));return e?(t.p=c.get(e[0].toLowerCase()),n+e[0].length):-1},q:B,Q:K,s:Q,S:Y,u:R,U:j,V:N,w:L,W:D,x:function(t,e,n){return M(t,i,e,n)},X:function(t,e,n){return M(t,a,e,n)},y:I,Y:z,Z:F,"%":Z};function w(l,u){return function(t){var e,n,r,i=[],a=-1,o=0,s=l.length;for(t instanceof Date||(t=new Date(+t));++a<s;)37===l.charCodeAt(a)&&(i.push(l.slice(o,a)),null!=(n=O[e=l.charAt(++a)])?e=l.charAt(++a):n="e"===e?" ":"0",(r=u[e])&&(e=r(t,n)),i.push(e),o=a+1);return i.push(l.slice(o,a)),i.join("")}}function k(i,a){return function(t){var e,n,r=E(1900,void 0,1);if(M(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!a||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(e=4<(n=(e=S(E(r.y,0,1))).getUTCDay())||0===n?T.utcMonday.ceil(e):T.utcMonday(e),e=T.utcDay.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=A(E(r.y,0,1))).getDay())||0===n?T.timeMonday.ceil(e):T.timeMonday(e),e=T.timeDay.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?S(E(r.y,0,1)).getUTCDay():A(E(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,S(r)):A(r)}}function M(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=_[i in O?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(i,b),b.X=w(a,b),b.c=w(r,b),x.x=w(i,x),x.X=w(a,x),x.c=w(r,x),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var r,O={"-":"",_:" ",0:"0"},i=/^\s*\d+/,a=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<n?new Array(n-t+1).join(e)+i:i)}function l(t){return t.replace(o,"\\$&")}function C(t){return new RegExp("^(?:"+t.map(l).join("|")+")","i")}function P(t){return new Map(t.map(function(t,e){return[t.toLowerCase(),e]}))}function L(t,e,n){e=i.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function R(t,e,n){e=i.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function j(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function N(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function D(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function z(t,e,n){e=i.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function I(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function F(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function B(t,e,n){e=i.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function U(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function V(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function H(t,e,n){e=i.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function q(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function G(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function Y(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function X(t,e,n){e=i.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function W(t,e,n){e=i.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function Z(t,e,n){e=a.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function K(t,e,n){e=i.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function Q(t,e,n){e=i.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function $(t,e){return s(t.getDate(),e,2)}function J(t,e){return s(t.getHours(),e,2)}function tt(t,e){return s(t.getHours()%12||12,e,2)}function et(t,e){return s(1+T.timeDay.count(T.timeYear(t),t),e,3)}function nt(t,e){return s(t.getMilliseconds(),e,3)}function rt(t,e){return nt(t,e)+"000"}function it(t,e){return s(t.getMonth()+1,e,2)}function at(t,e){return s(t.getMinutes(),e,2)}function ot(t,e){return s(t.getSeconds(),e,2)}function st(t){t=t.getDay();return 0===t?7:t}function lt(t,e){return s(T.timeSunday.count(T.timeYear(t)-1,t),e,2)}function u(t){var e=t.getDay();return 4<=e||0===e?T.timeThursday(t):T.timeThursday.ceil(t)}function ut(t,e){return t=u(t),s(T.timeThursday.count(T.timeYear(t),t)+(4===T.timeYear(t).getDay()),e,2)}function ct(t){return t.getDay()}function ft(t,e){return s(T.timeMonday.count(T.timeYear(t)-1,t),e,2)}function ht(t,e){return s(t.getFullYear()%100,e,2)}function dt(t,e){return s((t=u(t)).getFullYear()%100,e,2)}function pt(t,e){return s(t.getFullYear()%1e4,e,4)}function gt(t,e){var n=t.getDay();return s((t=4<=n||0===n?T.timeThursday(t):T.timeThursday.ceil(t)).getFullYear()%1e4,e,4)}function yt(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+s(t/60|0,"0",2)+s(t%60,"0",2)}function mt(t,e){return s(t.getUTCDate(),e,2)}function vt(t,e){return s(t.getUTCHours(),e,2)}function bt(t,e){return s(t.getUTCHours()%12||12,e,2)}function xt(t,e){return s(1+T.utcDay.count(T.utcYear(t),t),e,3)}function _t(t,e){return s(t.getUTCMilliseconds(),e,3)}function wt(t,e){return _t(t,e)+"000"}function kt(t,e){return s(t.getUTCMonth()+1,e,2)}function Mt(t,e){return s(t.getUTCMinutes(),e,2)}function Tt(t,e){return s(t.getUTCSeconds(),e,2)}function At(t){t=t.getUTCDay();return 0===t?7:t}function St(t,e){return s(T.utcSunday.count(T.utcYear(t)-1,t),e,2)}function c(t){var e=t.getUTCDay();return 4<=e||0===e?T.utcThursday(t):T.utcThursday.ceil(t)}function Et(t,e){return t=c(t),s(T.utcThursday.count(T.utcYear(t),t)+(4===T.utcYear(t).getUTCDay()),e,2)}function Ot(t){return t.getUTCDay()}function Ct(t,e){return s(T.utcMonday.count(T.utcYear(t)-1,t),e,2)}function Pt(t,e){return s(t.getUTCFullYear()%100,e,2)}function Lt(t,e){return s((t=c(t)).getUTCFullYear()%100,e,2)}function Rt(t,e){return s(t.getUTCFullYear()%1e4,e,4)}function jt(t,e){var n=t.getUTCDay();return s((t=4<=n||0===n?T.utcThursday(t):T.utcThursday.ceil(t)).getUTCFullYear()%1e4,e,4)}function Nt(){return"+0000"}function Dt(){return"%"}function zt(t){return+t}function It(t){return Math.floor(+t/1e3)}function t(t){return r=n(t),e.timeFormat=r.format,e.timeParse=r.parse,e.utcFormat=r.utcFormat,e.utcParse=r.utcParse,r}t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var f="%Y-%m-%dT%H:%M:%S.%LZ";var h=Date.prototype.toISOString?function(t){return t.toISOString()}:e.utcFormat(f);f=+new Date("2000-01-01T00:00:00.000Z")?function(t){return t=new Date(t),isNaN(t)?null:t}:e.utcParse(f);e.isoFormat=h,e.isoParse=f,e.timeFormatDefaultLocale=t,e.timeFormatLocale=n,Object.defineProperty(e,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-time")):a((i=i||self).d3=i.d3||{},i.d3)},{"d3-time":85}],85:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t){var i=new Date,l=new Date;function u(a,o,n,r){function s(t){return a(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return a(t=new Date(+t)),t},s.ceil=function(t){return a(t=new Date(t-1)),o(t,1),a(t),t},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,n){var r,i=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(;i.push(r=new Date(+t)),o(t,n),a(t),r<t&&t<e;);return i},s.filter=function(n){return u(function(t){if(t<=t)for(;a(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(s.count=function(t,e){return i.setTime(+t),l.setTime(+e),a(i),a(l),Math.floor(n(i,l))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(r?function(t){return r(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var e=u(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});e.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?u(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):e:null};var n=e.range,r=u(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),a=r.range,o=u(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()}),s=o.range,c=u(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),f=c.range,h=u(function(t){return t.setHours(0,0,0,0)},function(t,e){return t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1}),d=h.range;function p(e){return u(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var g=p(0),y=p(1),m=p(2),v=p(3),b=p(4),x=p(5),_=p(6),w=g.range,k=y.range,M=m.range,T=v.range,A=b.range,S=x.range,E=_.range,O=u(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),C=O.range,P=u(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});P.every=function(n){return isFinite(n=Math.floor(n))&&0<n?u(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var L=P.range,R=u(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}),j=R.range,N=u(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),D=N.range,z=u(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),I=z.range;function F(e){return u(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var B=F(0),U=F(1),V=F(2),H=F(3),q=F(4),G=F(5),Y=F(6),X=B.range,W=U.range,Z=V.range,K=H.range,Q=q.range,$=G.range,J=Y.range,tt=u(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),et=tt.range,nt=u(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});nt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?u(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var rt=nt.range;t.timeDay=h,t.timeDays=d,t.timeFriday=x,t.timeFridays=S,t.timeHour=c,t.timeHours=f,t.timeInterval=u,t.timeMillisecond=e,t.timeMilliseconds=n,t.timeMinute=o,t.timeMinutes=s,t.timeMonday=y,t.timeMondays=k,t.timeMonth=O,t.timeMonths=C,t.timeSaturday=_,t.timeSaturdays=E,t.timeSecond=r,t.timeSeconds=a,t.timeSunday=g,t.timeSundays=w,t.timeThursday=b,t.timeThursdays=A,t.timeTuesday=m,t.timeTuesdays=M,t.timeWednesday=v,t.timeWednesdays=T,t.timeWeek=g,t.timeWeeks=w,t.timeYear=P,t.timeYears=L,t.utcDay=z,t.utcDays=I,t.utcFriday=G,t.utcFridays=$,t.utcHour=N,t.utcHours=D,t.utcMillisecond=e,t.utcMilliseconds=n,t.utcMinute=R,t.utcMinutes=j,t.utcMonday=U,t.utcMondays=W,t.utcMonth=tt,t.utcMonths=et,t.utcSaturday=Y,t.utcSaturdays=J,t.utcSecond=r,t.utcSeconds=a,t.utcSunday=B,t.utcSundays=X,t.utcThursday=q,t.utcThursdays=Q,t.utcTuesday=V,t.utcTuesdays=Z,t.utcWednesday=H,t.utcWednesdays=K,t.utcWeek=B,t.utcWeeks=X,t.utcYear=nt,t.utcYears=rt,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n):a((i=i||self).d3=i.d3||{})},{}],86:[function(t,e,n){"use strict";function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i;i=function(t){var i,a,n=0,e=0,r=0,o=1e3,s=0,l=0,u=0,c="object"===("undefined"==typeof performance?"undefined":x(performance))&&performance.now?performance:Date,f="object"===("undefined"==typeof window?"undefined":x(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function h(){return l||(f(d),l=c.now()+u)}function d(){l=0}function p(){this._call=this._time=this._next=null}function g(t,e,n){var r=new p;return r.restart(t,e,n),r}function y(){h(),++n;for(var t,e=i;e;)0<=(t=l-e._time)&&e._call.call(null,t),e=e._next;--n}function m(){l=(s=c.now())+u,n=e=0;try{y()}finally{n=0,function(){for(var t,e,n=i,r=1/0;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:i=e);a=t,b(r)}(),l=0}}function v(){var t=c.now(),e=t-s;o<e&&(u-=e,s=t)}function b(t){n||(e=e&&clearTimeout(e),24<t-l?(t<1/0&&(e=setTimeout(m,t-c.now()-u)),r=r&&clearInterval(r)):(r||(s=c.now(),r=setInterval(v,o)),n=1,f(m)))}p.prototype=g.prototype={constructor:p,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?h():+n)+(null==e?0:+e),this._next||a===this||(a?a._next=this:i=this,a=this),this._call=t,this._time=n,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}},t.interval=function(t,e,n){var a=new p,o=e;return null==e||(a._restart=a.restart,a.restart=function(n,r,i){r=+r,i=null==i?h():+i,a._restart(function t(e){e+=o,a._restart(t,o+=r,i),n(e)},r,i)}),a.restart(t,e,n),a},t.now=h,t.timeout=function(e,n,t){var r=new p;return n=null==n?0:+n,r.restart(function(t){r.stop(),e(t+n)},n,t),r},t.timer=g,t.timerFlush=y,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((r=void 0)===n?"undefined":x(n))&&void 0!==e?i(n):i((r=r||self).d3=r.d3||{})},{}],87:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,O,e,g,C,r,n){var y=e.dispatch("start","end","cancel","interrupt"),m=[],v=0,b=1,x=2,_=3,w=4,k=5,M=6;function T(t,e,n,r,i,a){var o,s,l,u,c,f=t.__transition;if(f){if(n in f)return}else t.__transition={};function h(t){var e,n,r,i;if(l.state!==b)return p();for(e in c)if((i=c[e]).name===l.name){if(i.state===_)return g.timeout(h);i.state===w?(i.state=M,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete c[e]):+e<s&&(i.state=M,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete c[e])}if(g.timeout(function(){l.state===_&&(l.state=w,l.timer.restart(d,l.delay,l.time),d(t))}),l.state=x,l.on.call("start",o,o.__data__,l.index,l.group),l.state===x){for(l.state=_,u=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(i=l.tween[e].value.call(o,o.__data__,l.index,l.group))&&(u[++n]=i);u.length=n+1}}function d(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(p),l.state=k,1),n=-1,r=u.length;++n<r;)u[n].call(o,e);l.state===k&&(l.on.call("end",o,o.__data__,l.index,l.group),p())}function p(){for(var t in l.state=M,l.timer.stop(),delete c[s],c)return;delete o.__transition}o=t,s=n,l={name:e,index:r,group:i,on:y,tween:m,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:v},((c=o.__transition)[s]=l).timer=g.timer(function(t){l.state=b,l.timer.restart(h,l.delay,l.time),l.delay<=t&&h(t-l.delay)},0,l.time)}function u(t,e){e=A(t,e);if(e.state>v)throw new Error("too late; already scheduled");return e}function P(t,e){e=A(t,e);if(e.state>_)throw new Error("too late; already running");return e}function A(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function i(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>x&&n.state<k,n.state=M,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}function L(t,e,n){var r=t._id;return t.each(function(){var t=P(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return A(t,r).value[e]}}function R(t,e){var n;return("number"==typeof e?C.interpolateNumber:e instanceof r.color?C.interpolateRgb:(n=r.color(e))?(e=n,C.interpolateRgb):C.interpolateString)(t,e)}function a(r,i){var a,o;function t(){var e,n,t=i.apply(this,arguments);return t!==o&&(a=(o=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))})),a}return t._value=i,t}function o(r,i){var a,o;function t(){var e,n,t=i.apply(this,arguments);return t!==o&&(a=(o=t)&&(e=r,n=t,function(t){this.setAttribute(e,n.call(this,t))})),a}return t._value=i,t}var s=O.selection.prototype.constructor;function j(t){return function(){this.style.removeProperty(t)}}function l(i,a,o){var s,l;function t(){var e,n,r,t=a.apply(this,arguments);return t!==l&&(s=(l=t)&&(e=i,n=t,r=o,function(t){this.style.setProperty(e,n.call(this,t),r)})),s}return t._value=a,t}function c(n){var r,i;function t(){var e,t=n.apply(this,arguments);return t!==i&&(r=(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)})),r}return t._value=n,t}var f=0;function S(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function h(t){return O.selection().transition(t)}var d,p=O.selection.prototype;S.prototype=h.prototype=(d={constructor:S,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=O.selector(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,u=r[o],c=u.length,f=a[o]=new Array(c),h=0;h<c;++h)(s=u[h])&&(l=t.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),f[h]=l,T(f[h],e,n,h,f,A(s,n)));return new S(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=O.selectorAll(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,f=0;f<c;++f)if(l=u[f]){for(var h,d=t.call(l,l.__data__,f,u),p=A(l,n),g=0,y=d.length;g<y;++g)(h=d[g])&&T(h,e,n,g,d,p);a.push(d),o.push(l)}return new S(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=O.matcher(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new S(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),a=new Array(r),o=0;o<i;++o)for(var s,l=e[o],u=n[o],c=l.length,f=a[o]=new Array(c),h=0;h<c;++h)(s=l[h]||u[h])&&(f[h]=s);for(;o<r;++o)a[o]=e[o];return new S(a,this._parents,this._name,this._id)},selection:function(){return new s(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++f,r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)(o=s[u])&&T(o,t,n,u,s,{time:(o=A(o,e)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new S(r,this._parents,t,n)},call:p.call,nodes:p.nodes,node:p.node,size:p.size,empty:p.empty,each:p.each,on:function(t,e){var n,r,i,a,o,s,l=this._id;return arguments.length<2?A(this.node(),l).on.on(t):this.each((n=l,i=e,s=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t})?u:P,function(){var t=s(this,n),e=t.on;e!==a&&(o=(a=e).copy()).on(r,i),t.on=o}))},attr:function(t,e){var n=O.namespace(t),r="transform"===n?C.interpolateTransformSvg:R;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,a){var o,s,l;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===o&&e===s?l:(s=e,l=i(o=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,a){var o,s,l;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===o&&e===s?l:(s=e,l=i(o=t,n));this.removeAttribute(r)}})(n,r,L(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,a,o=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===i?a:a=n(i=t,r)}}:function(e,n,r){var i,a,o=r+"";return function(){var t=this.getAttribute(e);return t===o?null:t===i?a:a=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return t=O.namespace(t),this.tween(n,(t.local?a:o)(t,e))},style:function(t,e,n){var r,i,a,o,s,l,u,c,f,h,d,p,g,y,m,v,b,x,_,w,k,M,T,A,S,E="transform"==(t+="")?C.interpolateTransformCss:R;return null==e?this.styleTween(t,(k=t,M=E,function(){var t=O.style(this,k),e=(this.style.removeProperty(k),O.style(this,k));return t===e?null:t===T&&e===A?S:S=M(T=t,A=e)})).on("end.style."+t,j(t)):"function"==typeof e?this.styleTween(t,(v=E,b=L(this,"style."+(m=t),e),function(){var t=O.style(this,m),e=b(this),n=e+"";return null==e&&(this.style.removeProperty(m),n=e=O.style(this,m)),t===n?null:t===x&&n===_?w:(_=n,w=v(x=t,e))})).each((u=this._id,y="end."+(g="style."+(c=t)),function(){var t=P(this,u),e=t.on,n=null==t.value[g]?p=p||j(c):void 0;e===f&&d===n||(h=(f=e).copy()).on(y,d=n),t.on=h})):this.styleTween(t,(r=t,i=E,l=(a=e)+"",function(){var t=O.style(this,r);return t===l?null:t===o?s:s=i(o=t,a)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,l(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=L(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,c(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=A(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?function(i,a){var o,s;return function(){var t=P(this,i),e=t.tween;if(e!==o)for(var n=0,r=(s=o=e).length;n<r;++n)if(s[n].name===a){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(a,o,s){var l,u;if("function"!=typeof s)throw new Error;return function(){var t=P(this,a),e=t.tween;if(e!==l){u=(l=e).slice();for(var n={name:o,value:s},r=0,i=u.length;r<i;++r)if(u[r].name===o){u[r]=n;break}r===i&&u.push(n)}t.tween=u}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){u(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){u(this,t).delay=e}})(e,t)):A(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){P(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){P(this,t).duration=e}})(e,t)):A(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){P(this,t).ease=e}}(e,t)):A(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;P(this,e).ease=t}));var e,n},end:function(){var i,a,o=this,s=o._id,l=o.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--l&&t()}};o.each(function(){var t=P(this,s),e=t.on;e!==i&&((a=(i=e).copy())._.cancel.push(n),a._.interrupt.push(n),a._.end.push(r)),t.on=a}),0===l&&t()})}},e=Symbol.iterator,p=p[Symbol.iterator],e in d?Object.defineProperty(d,e,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[e]=p,d);var E={time:null,delay:0,duration:250,ease:n.easeCubicInOut};O.selection.prototype.interrupt=function(t){return this.each(function(){i(this,t)})},O.selection.prototype.transition=function(t){var e,n;t=t instanceof S?(e=t._id,t._name):(e=++f,(n=E).time=g.now(),null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)(o=s[u])&&T(o,t,e,u,s,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error("transition ".concat(e," not found"));return n}(o,e));return new S(r,this._parents,t,e)};var N=[null];t.active=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>b&&n.name===e)return new S([[t]],N,e,+r);return null},t.interrupt=i,t.transition=h,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-selection"),t("d3-dispatch"),t("d3-timer"),t("d3-interpolate"),t("d3-color"),t("d3-ease")):a((i=i||self).d3=i.d3||{},i.d3,i.d3,i.d3,i.d3,i.d3,i.d3)},{"d3-color":64,"d3-dispatch":67,"d3-ease":70,"d3-interpolate":76,"d3-selection":83,"d3-timer":86}],88:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a;a=function(t,P,L,R,j,N){function D(t){return function(){return t}}function z(t,e){var n=e.sourceEvent,r=e.target,i=e.transform,e=e.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:e}})}function I(t,e,n){this.k=t,this.x=e,this.y=n}I.prototype={constructor:I,scale:function(t){return 1===t?this:new I(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new I(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var F=new I(1,0,0);function e(t){for(;!t.__zoom;)if(!(t=t.parentNode))return F;return t.__zoom}function B(t){t.stopImmediatePropagation()}function U(t){t.preventDefault(),t.stopImmediatePropagation()}function V(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function H(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function q(){return this.__zoom||F}function G(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Y(){return navigator.maxTouchPoints||"ontouchstart"in this}function X(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],n=t.invertY(e[1][1])-n[1][1];return t.translate(r<i?(r+i)/2:Math.min(0,r)||Math.max(0,i),a<n?(a+n)/2:Math.min(0,a)||Math.max(0,n))}e.prototype=I.prototype,t.zoom=function(){var f,h,c,d=V,p=H,g=X,l=G,e=Y,u=[0,1/0],y=[[-1/0,-1/0],[1/0,1/0]],m=250,v=R.interpolateZoom,n=P.dispatch("start","zoom","end"),b=500,x=150,_=0,w=10;function k(t){t.property("__zoom",q).on("wheel.zoom",i).on("mousedown.zoom",a).on("dblclick.zoom",o).filter(e).on("touchstart.zoom",s).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function M(t,e){return(e=Math.max(u[0],Math.min(u[1],e)))===t.k?t:new I(e,t.x,t.y)}function T(t,e,n){var r=e[0]-n[0]*t.k,n=e[1]-n[1]*t.k;return r===t.x&&n===t.y?t:new I(t.k,r,n)}function A(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function S(t,n,l,u){t.on("start.zoom",function(){E(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(u).end()}).tween("zoom",function(){var t=arguments,r=E(this,t).event(u),e=p.apply(this,t),i=null==l?A(e):"function"==typeof l?l.apply(this,t):l,a=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),e=this.__zoom,o="function"==typeof n?n.apply(this,t):n,s=v(e.invert(i).concat(a/e.k),o.invert(i).concat(a/o.k));return function(t){var e,n;t=1===t?o:(e=s(t),new I(n=a/e[2],i[0]-e[0]*n,i[1]-e[1]*n)),r.zoom(null,t)}})}function E(t,e,n){return!n&&t.__zooming||new r(t,e)}function r(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=p.apply(t,e),this.taps=0}function i(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(d.apply(this,arguments)){var i=E(this,n).event(t),a=this.__zoom,o=Math.max(u[0],Math.min(u[1],a.k*Math.pow(2,l.apply(this,arguments)))),s=j.pointer(t);if(i.wheel)i.mouse[0][0]===s[0]&&i.mouse[0][1]===s[1]||(i.mouse[1]=a.invert(i.mouse[0]=s)),clearTimeout(i.wheel);else{if(a.k===o)return;i.mouse=[s,a.invert(s)],N.interrupt(this),i.start()}U(t),i.wheel=setTimeout(function(){i.wheel=null,i.end()},x),i.zoom("mouse",g(T(M(a,o),i.mouse[0],i.mouse[1]),i.extent,y))}}function a(t){for(var r,e,n,i,a,o,s=arguments.length,l=new Array(1<s?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];!c&&d.apply(this,arguments)&&(r=E(this,l,!0).event(t),e=j.select(t.view).on("mousemove.zoom",function(t){{var e,n;U(t),r.moved||(e=t.clientX-a,n=t.clientY-o,r.moved=_<e*e+n*n)}r.event(t).zoom("mouse",g(T(r.that.__zoom,r.mouse[0]=j.pointer(t,i),r.mouse[1]),r.extent,y))},!0).on("mouseup.zoom",function(t){e.on("mousemove.zoom mouseup.zoom",null),L.dragEnable(t.view,r.moved),U(t),r.event(t).end()},!0),n=j.pointer(t,i),i=t.currentTarget,a=t.clientX,o=t.clientY,L.dragDisable(t.view),B(t),r.mouse=[n,this.__zoom.invert(n)],N.interrupt(this),r.start())}function o(t){for(var e,n,r,i,a=arguments.length,o=new Array(1<a?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];d.apply(this,arguments)&&(e=this.__zoom,n=j.pointer(t.changedTouches?t.changedTouches[0]:t,this),i=e.invert(n),r=e.k*(t.shiftKey?.5:2),i=g(T(M(e,r),n,i),p.apply(this,o),y),U(t),0<m?j.select(this).transition().duration(m).call(S,i,n,t):j.select(this).call(k.transform,i,n,t))}function s(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(d.apply(this,arguments)){var i,a,o,s,l=t.touches,u=l.length,c=E(this,n,t.changedTouches.length===u).event(t);for(B(t),a=0;a<u;++a)o=l[a],s=[s=j.pointer(o,this),this.__zoom.invert(s),o.identifier],c.touch0?c.touch1||c.touch0[2]===s[2]||(c.touch1=s,c.taps=0):(c.touch0=s,i=!0,c.taps=1+!!f);f=f&&clearTimeout(f),i&&(c.taps<2&&(h=s[0],f=setTimeout(function(){f=null},b)),N.interrupt(this),c.start())}}function O(t){if(this.__zooming){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,a=E(this,n).event(t),o=t.changedTouches,s=o.length;for(U(t),i=0;i<s;++i)d=o[i],p=j.pointer(d,this),a.touch0&&a.touch0[2]===d.identifier?a.touch0[0]=p:a.touch1&&a.touch1[2]===d.identifier&&(a.touch1[0]=p);if(d=a.that.__zoom,a.touch1)var l=a.touch0[0],u=a.touch0[1],c=a.touch1[0],f=a.touch1[1],h=(h=c[0]-l[0])*h+(h=c[1]-l[1])*h,t=(t=f[0]-u[0])*t+(t=f[1]-u[1])*t,d=M(d,Math.sqrt(h/t)),p=[(l[0]+c[0])/2,(l[1]+c[1])/2],f=[(u[0]+f[0])/2,(u[1]+f[1])/2];else{if(!a.touch0)return;p=a.touch0[0],f=a.touch0[1]}a.zoom("touch",g(T(d,p,f),a.extent,y))}}function C(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.__zooming){var i,a,o=E(this,n).event(t),s=t.changedTouches,l=s.length;for(B(t),c&&clearTimeout(c),c=setTimeout(function(){c=null},b),i=0;i<l;++i)a=s[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0?o.touch0[1]=this.__zoom.invert(o.touch0[0]):(o.end(),2===o.taps&&(a=j.pointer(a,this),Math.hypot(h[0]-a[0],h[1]-a[1])<w&&((t=j.select(this).on("dblclick.zoom"))&&t.apply(this,arguments))))}}return k.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",q),t!==i?S(t,e,n,r):i.interrupt().each(function(){E(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},k.scaleBy=function(t,e,n,r){k.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,r)},k.scaleTo=function(t,a,o,e){k.transform(t,function(){var t=p.apply(this,arguments),e=this.__zoom,n=null==o?A(t):"function"==typeof o?o.apply(this,arguments):o,r=e.invert(n),i="function"==typeof a?a.apply(this,arguments):a;return g(T(M(e,i),n,r),t,y)},o,e)},k.translateBy=function(t,e,n,r){k.transform(t,function(){return g(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),p.apply(this,arguments),y)},null,r)},k.translateTo=function(t,r,i,a,e){k.transform(t,function(){var t=p.apply(this,arguments),e=this.__zoom,n=null==a?A(t):"function"==typeof a?a.apply(this,arguments):a;return g(F.translate(n[0],n[1]).scale(e.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),t,y)},a,e)},r.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=j.select(this.that).datum();n.call(t,this.that,new z(t,{sourceEvent:this.sourceEvent,target:k,type:t,transform:this.that.__zoom,dispatch:n}),e)}},k.wheelDelta=function(t){return arguments.length?(l="function"==typeof t?t:D(+t),k):l},k.filter=function(t){return arguments.length?(d="function"==typeof t?t:D(!!t),k):d},k.touchable=function(t){return arguments.length?(e="function"==typeof t?t:D(!!t),k):e},k.extent=function(t){return arguments.length?(p="function"==typeof t?t:D([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),k):p},k.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],k):[u[0],u[1]]},k.translateExtent=function(t){return arguments.length?(y[0][0]=+t[0][0],y[1][0]=+t[1][0],y[0][1]=+t[0][1],y[1][1]=+t[1][1],k):[[y[0][0],y[0][1]],[y[1][0],y[1][1]]]},k.constrain=function(t){return arguments.length?(g=t,k):g},k.duration=function(t){return arguments.length?(m=+t,k):m},k.interpolate=function(t){return arguments.length?(v=t,k):v},k.on=function(){var t=n.on.apply(n,arguments);return t===n?k:t},k.clickDistance=function(t){return arguments.length?(_=(t=+t)*t,k):Math.sqrt(_)},k.tapDistance=function(t){return arguments.length?(w=+t,k):w},k},t.zoomIdentity=F,t.zoomTransform=e,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((i=void 0)===n?"undefined":r(n))&&void 0!==e?a(n,t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-selection"),t("d3-transition")):a((i=i||self).d3=i.d3||{},i.d3,i.d3,i.d3,i.d3,i.d3)},{"d3-dispatch":67,"d3-drag":68,"d3-interpolate":76,"d3-selection":83,"d3-transition":87}],89:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("d3-array"),i=t("d3-axis"),a=t("d3-brush"),o=t("d3-chord"),s=t("d3-color"),l=t("d3-contour"),u=t("d3-delaunay"),c=t("d3-dispatch"),f=t("d3-drag"),h=t("d3-dsv"),d=t("d3-ease"),p=t("d3-fetch"),g=t("d3-force"),y=t("d3-format"),m=t("d3-geo"),v=t("d3-hierarchy"),b=t("d3-interpolate"),x=t("d3-path"),_=t("d3-polygon"),w=t("d3-quadtree"),k=t("d3-random"),M=t("d3-scale"),T=t("d3-scale-chromatic"),A=t("d3-selection"),S=t("d3-shape"),E=t("d3-time"),O=t("d3-time-format"),C=t("d3-timer"),P=t("d3-transition"),L=t("d3-zoom");Object.keys(r).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(i).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(a).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}})}),Object.keys(o).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(s).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})}),Object.keys(l).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return l[t]}})}),Object.keys(u).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return u[t]}})}),Object.keys(c).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return c[t]}})}),Object.keys(f).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return f[t]}})}),Object.keys(h).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return h[t]}})}),Object.keys(d).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return d[t]}})}),Object.keys(p).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return p[t]}})}),Object.keys(g).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return g[t]}})}),Object.keys(y).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return y[t]}})}),Object.keys(m).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return m[t]}})}),Object.keys(v).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return v[t]}})}),Object.keys(b).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return b[t]}})}),Object.keys(x).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return x[t]}})}),Object.keys(_).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return _[t]}})}),Object.keys(w).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return w[t]}})}),Object.keys(k).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return k[t]}})}),Object.keys(M).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return M[t]}})}),Object.keys(T).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return T[t]}})}),Object.keys(A).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return A[t]}})}),Object.keys(S).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return S[t]}})}),Object.keys(E).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return E[t]}})}),Object.keys(O).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return O[t]}})}),Object.keys(C).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return C[t]}})}),Object.keys(P).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return P[t]}})}),Object.keys(L).forEach(function(t){"default"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return L[t]}})}),n.version="6.3.1"},{"d3-array":60,"d3-axis":61,"d3-brush":62,"d3-chord":63,"d3-color":64,"d3-contour":65,"d3-delaunay":66,"d3-dispatch":67,"d3-drag":68,"d3-dsv":69,"d3-ease":70,"d3-fetch":71,"d3-force":72,"d3-format":73,"d3-geo":74,"d3-hierarchy":75,"d3-interpolate":76,"d3-path":77,"d3-polygon":78,"d3-quadtree":79,"d3-random":80,"d3-scale":82,"d3-scale-chromatic":81,"d3-selection":83,"d3-shape":90,"d3-time":85,"d3-time-format":84,"d3-timer":86,"d3-transition":87,"d3-zoom":88}],90:[function(t,e,n){"use strict";function Yt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i;i=function(t,D){function x(t){return function(){return t}}var z=Math.abs,I=Math.atan2,F=Math.cos,p=Math.max,B=Math.min,U=Math.sin,V=Math.sqrt,H=1e-12,q=Math.PI,G=q/2,Y=2*q;function X(t){return 1<=t?G:t<=-1?-G:Math.asin(t)}function n(t){return t.innerRadius}function r(t){return t.outerRadius}function i(t){return t.startAngle}function a(t){return t.endAngle}function o(t){return t&&t.padAngle}function W(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/V(s*s+l*l),c=u*l,f=-u*s,h=t+c,d=e+f,o=n+c,l=r+f,u=(h+o)/2,s=(d+l)/2,t=o-h,e=l-d,n=t*t+e*e,r=i-a,a=h*l-o*d,h=(e<0?-1:1)*V(p(0,r*r*n-a*a)),l=(a*e-t*h)/n,o=(-a*t-e*h)/n,d=(a*e+t*h)/n,e=(-a*t+e*h)/n,h=l-u,n=o-s,u=d-u,s=e-s;return u*u+s*s<h*h+n*n&&(l=d,o=e),{cx:l,cy:o,x01:-c,y01:-f,x11:l*(i/r-1),y11:o*(i/r-1)}}var c=Array.prototype.slice;function _(t){return"object"===Xt(t)&&"length"in t?t:Array.from(t)}function e(t){this._context=t}function v(t){return new e(t)}function b(t){return t[0]}function w(t){return t[1]}function s(o,s){var l=x(!0),u=null,c=v,f=null;function e(t){var e,n,r,i=(t=_(t)).length,a=!1;for(null==u&&(f=c(r=D.path())),e=0;e<=i;++e)!(e<i&&l(n=t[e],e,t))===a&&((a=!a)?f.lineStart():f.lineEnd()),a&&f.point(+o(n,e,t),+s(n,e,t));if(r)return f=null,r+""||null}return o="function"==typeof o?o:void 0===o?b:x(o),s="function"==typeof s?s:void 0===s?w:x(s),e.x=function(t){return arguments.length?(o="function"==typeof t?t:x(+t),e):o},e.y=function(t){return arguments.length?(s="function"==typeof t?t:x(+t),e):s},e.defined=function(t){return arguments.length?(l="function"==typeof t?t:x(!!t),e):l},e.curve=function(t){return arguments.length?(c=t,null!=u&&(f=c(u)),e):c},e.context=function(t){return arguments.length?(null==t?u=f=null:f=c(u=t),e):u},e}function l(c,f,h){var d=null,p=x(!0),g=null,y=v,m=null;function e(t){var e,n,r,i,a,o=(t=_(t)).length,s=!1,l=new Array(o),u=new Array(o);for(null==g&&(m=y(a=D.path())),e=0;e<=o;++e){if(!(e<o&&p(i=t[e],e,t))===s)if(s=!s)n=e,m.areaStart(),m.lineStart();else{for(m.lineEnd(),m.lineStart(),r=e-1;n<=r;--r)m.point(l[r],u[r]);m.lineEnd(),m.areaEnd()}s&&(l[e]=+c(i,e,t),u[e]=+f(i,e,t),m.point(d?+d(i,e,t):l[e],h?+h(i,e,t):u[e]))}if(a)return m=null,a+""||null}function t(){return s().defined(p).curve(y).context(g)}return c="function"==typeof c?c:void 0===c?b:x(+c),f="function"==typeof f?f:x(void 0===f?0:+f),h="function"==typeof h?h:void 0===h?w:x(+h),e.x=function(t){return arguments.length?(c="function"==typeof t?t:x(+t),d=null,e):c},e.x0=function(t){return arguments.length?(c="function"==typeof t?t:x(+t),e):c},e.x1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:x(+t),e):d},e.y=function(t){return arguments.length?(f="function"==typeof t?t:x(+t),h=null,e):f},e.y0=function(t){return arguments.length?(f="function"==typeof t?t:x(+t),e):f},e.y1=function(t){return arguments.length?(h=null==t?null:"function"==typeof t?t:x(+t),e):h},e.lineX0=e.lineY0=function(){return t().x(c).y(f)},e.lineY1=function(){return t().x(c).y(h)},e.lineX1=function(){return t().x(d).y(f)},e.defined=function(t){return arguments.length?(p="function"==typeof t?t:x(!!t),e):p},e.curve=function(t){return arguments.length?(y=t,null!=g&&(m=y(g)),e):y},e.context=function(t){return arguments.length?(null==t?g=m=null:m=y(g=t),e):g},e}function u(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function f(t){return t}e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var h=g(v);function d(t){this._curve=t}function g(e){function t(t){return new d(e(t))}return t._curve=e,t}function y(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(g(t)):e()._curve},t}function m(){return y(s().curve(h))}function k(){var t=l().curve(h),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return y(n())},delete t.lineX0,t.lineEndAngle=function(){return y(r())},delete t.lineX1,t.lineInnerRadius=function(){return y(i())},delete t.lineY0,t.lineOuterRadius=function(){return y(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(g(t)):e()._curve},t}function M(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function T(t){return t.source}function A(t){return t.target}function S(i){var a=T,o=A,s=b,l=w,u=null;function e(){var t,e=c.call(arguments),n=a.apply(this,e),r=o.apply(this,e);if(u=u||(t=D.path()),i(u,+s.apply(this,(e[0]=n,e)),+l.apply(this,e),+s.apply(this,(e[0]=r,e)),+l.apply(this,e)),t)return u=null,t+""||null}return e.source=function(t){return arguments.length?(a=t,e):a},e.target=function(t){return arguments.length?(o=t,e):o},e.x=function(t){return arguments.length?(s="function"==typeof t?t:x(+t),e):s},e.y=function(t){return arguments.length?(l="function"==typeof t?t:x(+t),e):l},e.context=function(t){return arguments.length?(u=null==t?null:t,e):u},e}function E(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function O(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function C(t,e,n,r,i){var a=M(e,n),e=M(e,n=(n+i)/2),n=M(r,n),i=M(r,i);t.moveTo(a[0],a[1]),t.bezierCurveTo(e[0],e[1],n[0],n[1],i[0],i[1])}d.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var P={draw:function(t,e){e=Math.sqrt(e/q);t.moveTo(e,0),t.arc(0,0,e,0,Y)}},L={draw:function(t,e){e=Math.sqrt(e/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},R=Math.sqrt(1/3),j=2*R,N={draw:function(t,e){var n=Math.sqrt(e/j),e=n*R;t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath()}},Z=Math.sin(q/10)/Math.sin(7*q/10),K=Math.sin(Y/10)*Z,Q=-Math.cos(Y/10)*Z,$={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=K*n,i=Q*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=Y*a/5,s=Math.cos(o),o=Math.sin(o);t.lineTo(o*n,-s*n),t.lineTo(s*r-o*i,o*r+s*i)}t.closePath()}},J={draw:function(t,e){var n=Math.sqrt(e),e=-n/2;t.rect(e,e,n,n)}},tt=Math.sqrt(3),et={draw:function(t,e){e=-Math.sqrt(e/(3*tt));t.moveTo(0,2*e),t.lineTo(-tt*e,-e),t.lineTo(tt*e,-e),t.closePath()}},nt=Math.sqrt(3)/2,rt=1/Math.sqrt(12),it=3*(rt/2+1),at={draw:function(t,e){var n=Math.sqrt(e/it),r=n/2,i=n*rt,a=r,o=n*rt+n,e=-a,n=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(e,n),t.lineTo(-.5*r-nt*i,nt*r+-.5*i),t.lineTo(-.5*a-nt*o,nt*a+-.5*o),t.lineTo(-.5*e-nt*n,nt*e+-.5*n),t.lineTo(-.5*r+nt*i,-.5*i-nt*r),t.lineTo(-.5*a+nt*o,-.5*o-nt*a),t.lineTo(-.5*e+nt*n,-.5*n-nt*e),t.closePath()}},ot=[P,L,N,J,$,et,at];function st(){}function lt(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ut(t){this._context=t}function ct(t){this._context=t}function ft(t){this._context=t}function ht(t,e){this._basis=new ut(t),this._beta=e}ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ct.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:lt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:lt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ht.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*o),this._beta*e[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var dt=function e(n){function t(t){return 1===n?new ut(t):new ht(t,n)}return t.beta=function(t){return e(+t)},t}(.85);function pt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function gt(t,e){this._context=t,this._k=(1-e)/6}gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:pt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var yt=function e(n){function t(t){return new gt(t,n)}return t.tension=function(t){return e(+t)},t}(0);function mt(t,e){this._context=t,this._k=(1-e)/6}mt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:pt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vt=function e(n){function t(t){return new mt(t,n)}return t.tension=function(t){return e(+t)},t}(0);function bt(t,e){this._context=t,this._k=(1-e)/6}bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var xt=function e(n){function t(t){return new bt(t,n)}return t.tension=function(t){return e(+t)},t}(0);function _t(t,e,n){var r,i,a=t._x1,o=t._y1,s=t._x2,l=t._y2;t._l01_a>H&&(r=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a),a=(a*r-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,o=(o*r-t._y0*t._l12_2a+t._y2*t._l01_2a)/i),t._l23_a>H&&(r=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,i=3*t._l23_a*(t._l23_a+t._l12_a),s=(s*r+t._x1*t._l23_2a-e*t._l12_2a)/i,l=(l*r+t._y1*t._l23_2a-n*t._l12_2a)/i),t._context.bezierCurveTo(a,o,s,l,t._x2,t._y2)}function wt(t,e){this._context=t,this._alpha=e}wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:_t(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kt=function e(n){function t(t){return n?new wt(t,n):new gt(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function Mt(t,e){this._context=t,this._alpha=e}Mt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_t(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Tt=function e(n){function t(t){return n?new Mt(t,n):new mt(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function At(t,e){this._context=t,this._alpha=e}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_t(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};Z=function e(n){function t(t){return n?new At(t,n):new bt(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function St(t){this._context=t}function Et(t){return t<0?-1:1}function Ot(t,e,n){var r=t._x1-t._x0,i=e-t._x1,e=(t._y1-t._y0)/(r||i<0&&-0),t=(n-t._y1)/(i||r<0&&-0),i=(e*i+t*r)/(r+i);return(Et(e)+Et(t))*Math.min(Math.abs(e),Math.abs(t),.5*Math.abs(i))||0}function Ct(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Pt(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Lt(t){this._context=t}function Rt(t){this._context=new jt(t)}function jt(t){this._context=t}function Nt(t){this._context=t}function Dt(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(a[i[0]=0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;0<=e;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function zt(t,e){this._context=t,this._t=e}function It(t,e){if(1<(i=t.length))for(var n,r,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Ft(t){for(var e=t.length,n=new Array(e);0<=--e;)n[e]=e;return n}function Bt(t,e){return t[e]}function Ut(t){var e=[];return e.key=t,e}function Vt(t){var n=t.map(Ht);return Ft(t).sort(function(t,e){return n[t]-n[e]})}function Ht(t){for(var e,n=-1,r=0,i=t.length,a=-1/0;++n<i;)(e=+t[n][1])>a&&(a=e,r=n);return r}function qt(t){var n=t.map(Gt);return Ft(t).sort(function(t,e){return n[t]-n[e]})}function Gt(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}St.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pt(this,this._t0,Ct(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Pt(this,Ct(this,n=Ot(this,t,e)),n);break;default:Pt(this,this._t0,n=Ot(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Rt.prototype=Object.create(Lt.prototype)).point=function(t,e){Lt.prototype.point.call(this,e,t)},jt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Dt(t),i=Dt(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(n=this._x*(1-this._t)+t*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,e))}this._x=t,this._y=e}},t.arc=function(){var E=n,O=r,C=x(0),P=null,L=i,R=a,j=o,N=null;function e(){var t,e,n,r,i,a,o,s,l,u,c,f,h,d,p,g,y,m,v,b,x,_,w=+E.apply(this,arguments),k=+O.apply(this,arguments),M=L.apply(this,arguments)-G,T=R.apply(this,arguments)-G,A=z(T-M),S=M<T;if(N=N||(t=D.path()),k<w&&(c=k,k=w,w=c),H<k?Y-H<A?(N.moveTo(k*F(M),k*U(M)),N.arc(0,0,k,M,T,!S),H<w&&(N.moveTo(w*F(T),w*U(T)),N.arc(0,0,w,T,M,S))):(r=e=M,i=n=T,o=a=A,h=j.apply(this,arguments)/2,f=H<h&&(P?+P.apply(this,arguments):V(w*w+k*k)),_=x=s=B(z(k-w)/2,+C.apply(this,arguments)),H<f&&(d=X(f/w*U(h)),v=X(f/k*U(h)),(a-=2*d)>H?(r+=d*=S?1:-1,i-=d):(a=0,r=i=(M+T)/2),(o-=2*v)>H?(e+=v*=S?1:-1,n-=v):(o=0,e=n=(M+T)/2)),c=k*F(e),f=k*U(e),h=w*F(i),d=w*U(i),H<s&&(p=k*F(n),g=k*U(n),y=w*F(r),m=w*U(r),A<q&&(b=function(t,e,n,r,i,a,o,s){var l=n-t,n=r-e,r=o-i;if(!((s=(o=s-a)*l-r*n)*s<H))return[t+(s=(r*(e-a)-o*(t-i))/s)*l,e+s*n]}(c,f,y,m,p,g,h,d))&&(v=c-b[0],M=f-b[1],T=p-b[0],A=g-b[1],A=1/U((1<(A=(v*T+M*A)/(V(v*v+M*M)*V(T*T+A*A)))?0:A<-1?q:Math.acos(A))/2),b=V(b[0]*b[0]+b[1]*b[1]),x=B(s,(w-b)/(A-1)),_=B(s,(k-b)/(1+A)))),H<o?H<_?(l=W(y,m,c,f,k,_,S),u=W(p,g,h,d,k,_,S),N.moveTo(l.cx+l.x01,l.cy+l.y01),_<s?N.arc(l.cx,l.cy,_,I(l.y01,l.x01),I(u.y01,u.x01),!S):(N.arc(l.cx,l.cy,_,I(l.y01,l.x01),I(l.y11,l.x11),!S),N.arc(0,0,k,I(l.cy+l.y11,l.cx+l.x11),I(u.cy+u.y11,u.cx+u.x11),!S),N.arc(u.cx,u.cy,_,I(u.y11,u.x11),I(u.y01,u.x01),!S))):(N.moveTo(c,f),N.arc(0,0,k,e,n,!S)):N.moveTo(c,f),H<w&&H<a?H<x?(l=W(h,d,p,g,w,-x,S),u=W(c,f,y,m,w,-x,S),N.lineTo(l.cx+l.x01,l.cy+l.y01),x<s?N.arc(l.cx,l.cy,x,I(l.y01,l.x01),I(u.y01,u.x01),!S):(N.arc(l.cx,l.cy,x,I(l.y01,l.x01),I(l.y11,l.x11),!S),N.arc(0,0,w,I(l.cy+l.y11,l.cx+l.x11),I(u.cy+u.y11,u.cx+u.x11),S),N.arc(u.cx,u.cy,x,I(u.y11,u.x11),I(u.y01,u.x01),!S))):N.arc(0,0,w,i,r,S):N.lineTo(h,d)):N.moveTo(0,0),N.closePath(),t)return N=null,t+""||null}return e.centroid=function(){var t=(+E.apply(this,arguments)+ +O.apply(this,arguments))/2,e=(+L.apply(this,arguments)+ +R.apply(this,arguments))/2-q/2;return[F(e)*t,U(e)*t]},e.innerRadius=function(t){return arguments.length?(E="function"==typeof t?t:x(+t),e):E},e.outerRadius=function(t){return arguments.length?(O="function"==typeof t?t:x(+t),e):O},e.cornerRadius=function(t){return arguments.length?(C="function"==typeof t?t:x(+t),e):C},e.padRadius=function(t){return arguments.length?(P=null==t?null:"function"==typeof t?t:x(+t),e):P},e.startAngle=function(t){return arguments.length?(L="function"==typeof t?t:x(+t),e):L},e.endAngle=function(t){return arguments.length?(R="function"==typeof t?t:x(+t),e):R},e.padAngle=function(t){return arguments.length?(j="function"==typeof t?t:x(+t),e):j},e.context=function(t){return arguments.length?(N=null==t?null:t,e):N},e},t.area=l,t.areaRadial=k,t.curveBasis=function(t){return new ut(t)},t.curveBasisClosed=function(t){return new ct(t)},t.curveBasisOpen=function(t){return new ft(t)},t.curveBundle=dt,t.curveCardinal=yt,t.curveCardinalClosed=vt,t.curveCardinalOpen=xt,t.curveCatmullRom=kt,t.curveCatmullRomClosed=Tt,t.curveCatmullRomOpen=Z,t.curveLinear=v,t.curveLinearClosed=function(t){return new St(t)},t.curveMonotoneX=function(t){return new Lt(t)},t.curveMonotoneY=function(t){return new Rt(t)},t.curveNatural=function(t){return new Nt(t)},t.curveStep=function(t){return new zt(t,.5)},t.curveStepAfter=function(t){return new zt(t,1)},t.curveStepBefore=function(t){return new zt(t,0)},t.line=s,t.lineRadial=m,t.linkHorizontal=function(){return S(E)},t.linkRadial=function(){var t=S(C);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return S(O)},t.pie=function(){var p=f,g=u,y=null,m=x(0),v=x(Y),b=x(0);function e(n){for(var t,e,r,i,a=(n=_(n)).length,o=0,s=new Array(a),l=new Array(a),u=+m.apply(this,arguments),c=Math.min(Y,Math.max(-Y,v.apply(this,arguments)-u)),f=Math.min(Math.abs(c)/a,b.apply(this,arguments)),h=f*(c<0?-1:1),d=0;d<a;++d)0<(i=l[s[d]=d]=+p(n[d],d,n))&&(o+=i);for(null!=g?s.sort(function(t,e){return g(l[t],l[e])}):null!=y&&s.sort(function(t,e){return y(n[t],n[e])}),d=0,e=o?(c-a*h)/o:0;d<a;++d,u=r)t=s[d],r=u+(0<(i=l[t])?i*e:0)+h,l[t]={data:n[t],index:d,value:i,startAngle:u,endAngle:r,padAngle:f};return l}return e.value=function(t){return arguments.length?(p="function"==typeof t?t:x(+t),e):p},e.sortValues=function(t){return arguments.length?(g=t,y=null,e):g},e.sort=function(t){return arguments.length?(y=t,g=null,e):y},e.startAngle=function(t){return arguments.length?(m="function"==typeof t?t:x(+t),e):m},e.endAngle=function(t){return arguments.length?(v="function"==typeof t?t:x(+t),e):v},e.padAngle=function(t){return arguments.length?(b="function"==typeof t?t:x(+t),e):b},e},t.pointRadial=M,t.radialArea=k,t.radialLine=m,t.stack=function(){var u=x([]),c=Ft,f=It,h=Bt;function e(t){var e,n,r=Array.from(u.apply(this,arguments),Ut),i=r.length,a=-1,o=Yt(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=0;for(++a;l<i;++l)(r[l][a]=[0,+h(s,r[l].key,a,t)]).data=s}}catch(t){o.e(t)}finally{o.f()}for(l=0,e=_(c(r));l<i;++l)r[e[l]].index=l;return f(r,e),r}return e.keys=function(t){return arguments.length?(u="function"==typeof t?t:x(Array.from(t)),e):u},e.value=function(t){return arguments.length?(h="function"==typeof t?t:x(+t),e):h},e.order=function(t){return arguments.length?(c=null==t?Ft:"function"==typeof t?t:x(Array.from(t)),e):c},e.offset=function(t){return arguments.length?(f=null==t?It:t,e):f},e},t.stackOffsetDiverging=function(t,e){if(0<(s=t.length))for(var n,r,i,a,o,s,l=0,u=t[e[0]].length;l<u;++l)for(n=a=o=0;n<s;++n)0<(i=(r=t[e[n]][l])[1]-r[0])?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)},t.stackOffsetExpand=function(t,e){if(0<(r=t.length)){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}It(t,e)}},t.stackOffsetNone=It,t.stackOffsetSilhouette=function(t,e){if(0<(n=t.length)){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=t[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}It(t,e)}},t.stackOffsetWiggle=function(t,e){if(0<(i=t.length)&&0<(r=(n=t[e[0]]).length)){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,u=0;s<i;++s){for(var c=t[e[s]],f=c[o][1]||0,h=(f-(c[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];h+=(p[o][1]||0)-(p[o-1][1]||0)}l+=f,u+=h*f}n[o-1][1]+=n[o-1][0]=a,l&&(a-=u/l)}n[o-1][1]+=n[o-1][0]=a,It(t,e)}},t.stackOrderAppearance=Vt,t.stackOrderAscending=qt,t.stackOrderDescending=function(t){return qt(t).reverse()},t.stackOrderInsideOut=function(t){for(var e,n=t.length,r=t.map(Gt),i=Vt(t),a=0,o=0,s=[],l=[],u=0;u<n;++u)e=i[u],a<o?(a+=r[e],s.push(e)):(o+=r[e],l.push(e));return l.reverse().concat(s)},t.stackOrderNone=Ft,t.stackOrderReverse=function(t){return Ft(t).reverse()},t.symbol=function(e,n){var r=null;function i(){var t;if(r=r||(t=D.path()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}return e="function"==typeof e?e:x(e||P),n="function"==typeof n?n:x(void 0===n?64:+n),i.type=function(t){return arguments.length?(e="function"==typeof t?t:x(t),i):e},i.size=function(t){return arguments.length?(n="function"==typeof t?t:x(+t),i):n},i.context=function(t){return arguments.length?(r=null==t?null:t,i):r},i},t.symbolCircle=P,t.symbolCross=L,t.symbolDiamond=N,t.symbolSquare=J,t.symbolStar=$,t.symbolTriangle=et,t.symbolWye=at,t.symbols=ot,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((r=void 0)===n?"undefined":Xt(n))&&void 0!==e?i(n,t("d3-path")):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-path":77}],91:[function(t,e,n){"use strict";var v=t("incremental-convex-hull"),b=t("uniq");function x(t,e){this.point=t,this.index=e}function _(t,e){for(var n=t.point,r=e.point,i=n.length,a=0;a<i;++a){var o=r[a]-n[a];if(o)return o}return 0}e.exports=function(t,e){var n=t.length;if(0===n)return[];var i=t[0].length;if(i<1)return[];if(1===i)return function(t,e,n){if(1===t)return n?[[-1,0]]:[];var r=e.map(function(t,e){return[t[0],e]});r.sort(function(t,e){return t[0]-e[0]});for(var i=new Array(t-1),a=1;a<t;++a){var o=r[a-1],s=r[a];i[a-1]=[o[1],s[1]]}n&&i.push([-1,i[0][1]],[i[t-1][1],-1]);return i}(n,t,e);for(var r=new Array(n),a=1,o=0;o<n;++o){for(var s=t[o],l=new Array(i+1),u=0,c=0;c<i;++c){var f=s[c];l[c]=f,u+=f*f}l[i]=u,r[o]=new x(l,o),a=Math.max(u,a)}b(r,_),n=r.length;for(var h=new Array(n+i+1),d=new Array(n+i+1),p=(i+1)*(i+1)*a,g=new Array(i+1),o=0;o<=i;++o)g[o]=0;g[i]=p,h[0]=g.slice(),d[0]=-1;for(o=0;o<=i;++o)(l=g.slice())[o]=1,h[o+1]=l,d[o+1]=-1;for(o=0;o<n;++o){var y=r[o];h[o+i+1]=y.point,d[o+i+1]=y.index}var m=v(h,!1);m=e?m.filter(function(t){for(var e=0,n=0;n<=i;++n){var r=d[t[n]];if(r<0&&2<=++e)return!1;t[n]=r}return!0}):m.filter(function(t){for(var e=0;e<=i;++e){var n=d[t[e]];if(n<0)return!1;t[e]=n}return!0});if(1&i)for(o=0;o<m.length;++o){l=(y=m[o])[0];y[0]=y[1],y[1]=l}return m}},{"incremental-convex-hull":198,uniq:659}],92:[function(t,a,e){(function(e){(function(){"use strict";var n,r,i,t=!1;"undefined"!=typeof Float64Array&&(n=new Float64Array(1),r=new Uint32Array(n.buffer),n[0]=1,t=!0,1072693248===r[1]?(a.exports=function(t){return n[0]=t,[r[0],r[1]]},a.exports.pack=function(t,e){return r[0]=t,r[1]=e,n[0]},a.exports.lo=function(t){return n[0]=t,r[0]},a.exports.hi=function(t){return n[0]=t,r[1]}):1072693248===r[0]?(a.exports=function(t){return n[0]=t,[r[1],r[0]]},a.exports.pack=function(t,e){return r[1]=t,r[0]=e,n[0]},a.exports.lo=function(t){return n[0]=t,r[1]},a.exports.hi=function(t){return n[0]=t,r[0]}):t=!1),t||(i=new e(8),a.exports=function(t){return i.writeDoubleLE(t,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},a.exports.pack=function(t,e){return i.writeUInt32LE(t,0,!0),i.writeUInt32LE(e,4,!0),i.readDoubleLE(0,!0)},a.exports.lo=function(t){return i.writeDoubleLE(t,0,!0),i.readUInt32LE(0,!0)},a.exports.hi=function(t){return i.writeDoubleLE(t,0,!0),i.readUInt32LE(4,!0)}),a.exports.sign=function(t){return a.exports.hi(t)>>>31},a.exports.exponent=function(t){return(a.exports.hi(t)<<1>>>21)-1023},a.exports.fraction=function(t){var e=a.exports.lo(t),n=a.exports.hi(t),t=1048575&n;return 2146435072&n&&(t+=1<<20),[e,t]},a.exports.denormalized=function(t){return!(2146435072&a.exports.hi(t))}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:36}],93:[function(t,e,n){"use strict";e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],94:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.exports=function(t,e){switch(void 0===e&&(e=0),r(t)){case"number":if(0<t)return function(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=e;return n}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,n,r){var i=0|e[r];if(i<=0)return[];var a,o=new Array(i);if(r===e.length-1)for(a=0;a<i;++a)o[a]=n;else for(a=0;a<i;++a)o[a]=t(e,n,r+1);return o}(t,e,0)}return[]}},{}],95:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.length;if("number"!=typeof e){for(var r=e=0;r<n;++r){var i=t[r];e=Math.max(e,i[0],i[1])}e=1+(0|e)}e|=0;for(var a=new Array(e),r=0;r<e;++r)a[r]=[];for(r=0;r<n;++r){i=t[r];a[i[0]].push(i[1]),a[i[1]].push(i[0])}for(var o=0;o<e;++o)s(a[o],function(t,e){return t-e});return a};var s=t("uniq")},{uniq:659}],96:[function(H,e,n){(function(U,V){(function(){"use strict";function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var t;t=function(){function l(t){return"function"==typeof t}var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,e=void 0,i=void 0,o=function(t,e){f[r]=t,f[r+1]=e,2===(r+=2)&&(i?i(h):m())};var t="undefined"!=typeof window?window:void 0,a=t||{},s=a.MutationObserver||a.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==U&&"[object process]"==={}.toString.call(U),a="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var t=setTimeout;return function(){return t(h,1)}}var f=new Array(1e3);function h(){for(var t=0;t<r;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;r=0}var d,p,g,y,m=void 0;function v(t,e){var n=this,r=new this.constructor(_);void 0===r[x]&&N(r);var i,a=n._state;return a?(i=arguments[a-1],o(function(){return R(a,r,i,n._result)})):P(n,r,t,e),r}function b(t){if(t&&"object"===B(t)&&t.constructor===this)return t;var e=new this(_);return S(e,t),e}m=u?function(){return U.nextTick(h)}:s?(p=0,g=new s(h),y=document.createTextNode(""),g.observe(y,{characterData:!0}),function(){y.data=p=++p%2}):a?((d=new MessageChannel).port1.onmessage=h,function(){return d.port2.postMessage(0)}):(void 0===t&&"function"==typeof H?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(h)}:c()}catch(t){return c()}}:c)();var x=Math.random().toString(36).substring(2);function _(){}var w=void 0,k=1,M=2;function T(t,r,i){o(function(e){var n=!1,t=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(i,r,function(t){n||(n=!0,(r!==t?S:O)(e,t))},function(t){n||(n=!0,C(e,t))},e._label);!n&&t&&(n=!0,C(e,t))},t)}function A(t,e,n){var r,i;e.constructor===t.constructor&&n===v&&e.constructor.resolve===b?(r=t,(i=e)._state===k?O(r,i._result):i._state===M?C(r,i._result):P(i,void 0,function(t){return S(r,t)},function(t){return C(r,t)})):void 0!==n&&l(n)?T(t,e,n):O(t,e)}function S(e,t){if(e===t)C(e,new TypeError("You cannot resolve a promise with itself"));else if(i=B(r=t),null===r||"object"!==i&&"function"!==i)O(e,t);else{var n=void 0;try{n=t.then}catch(t){return void C(e,t)}A(e,t,n)}var r,i}function E(t){t._onerror&&t._onerror(t._result),L(t)}function O(t,e){t._state===w&&(t._result=e,t._state=k,0!==t._subscribers.length&&o(L,t))}function C(t,e){t._state===w&&(t._state=M,t._result=e,o(E,t))}function P(t,e,n,r){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+k]=n,i[a+M]=r,0===a&&t._state&&o(L,t)}function L(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i=void 0,a=t._result,o=0;o<e.length;o+=3)r=e[o],i=e[o+n],r?R(n,r,i,a):i(a);t._subscribers.length=0}}function R(t,e,n,r){var i=l(n),a=void 0,o=void 0,s=!0;if(i){try{a=n(r)}catch(t){s=!1,o=t}if(e===a)return void C(e,new TypeError("A promises callback cannot return that same promise."))}else a=r;e._state!==w||(i&&s?S(e,a):!1===s?C(e,o):t===k?O(e,a):t===M&&C(e,a))}var j=0;function N(t){t[x]=j++,t._state=void 0,t._result=void 0,t._subscribers=[]}var D=(z.prototype._enumerate=function(t){for(var e=0;this._state===w&&e<t.length;e++)this._eachEntry(t[e],e)},z.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i,a=void 0,o=void 0,s=!1;try{a=e.then}catch(t){s=!0,o=t}a===v&&e._state!==w?this._settledAt(e._state,t,e._result):"function"!=typeof a?(this._remaining--,this._result[t]=e):n===I?(i=new n(_),s?C(i,o):A(i,e,a),this._willSettleAt(i,t)):this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},z.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===w&&(this._remaining--,t===M?C(r,n):this._result[e]=n),0===this._remaining&&O(r,this._result)},z.prototype._willSettleAt=function(t,e){var n=this;P(t,void 0,function(t){return n._settledAt(k,e,t)},function(t){return n._settledAt(M,e,t)})},z);function z(t,e){this._instanceConstructor=t,this.promise=new t(_),this.promise[x]||N(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&O(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}var I=(F.prototype.catch=function(t){return this.then(null,t)},F.prototype.finally=function(e){var n=this.constructor;return l(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},F);function F(t){this[x]=j++,this._result=this._state=void 0,this._subscribers=[],_!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof F?function(e,t){try{t(function(t){S(e,t)},function(t){C(e,t)})}catch(t){C(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return I.prototype.then=v,I.all=function(t){return new D(this,t).promise},I.race=function(i){var a=this;return n(i)?new a(function(t,e){for(var n=i.length,r=0;r<n;r++)a.resolve(i[r]).then(t,e)}):new a(function(t,e){return e(new TypeError("You must pass an array to race."))})},I.resolve=b,I.reject=function(t){var e=new this(_);return C(e,t),e},I._setScheduler=function(t){i=t},I._setAsap=function(t){o=t},I._asap=o,I.polyfill=function(){var t=void 0;if(void 0!==V)t=V;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=I},I.Promise=I},"object"===(void 0===n?"undefined":B(n))&&void 0!==e?e.exports=t():(void 0).ES6Promise=t()}).call(this)}).call(this,H("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:619}],97:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=Object.create||function(t){function e(){}return e.prototype=t,new e},l=Object.keys||function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return e},r=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=s(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0;var a,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),a=0===c.x}catch(t){a=!1}function f(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener||n),i=t._events),a=i[e]):(i=t._events=s(null),t._eventsCount=0),a?("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),a.warned||(r=f(t))&&0<r&&a.length>r&&(a.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",r.emitter=t,r.type=e,r.count=a.length,"object"===("undefined"==typeof console?"undefined":o(console))&&console.warn&&console.warn("%s: %s",r.name,r.message))):(a=i[e]=n,++t._eventsCount),t}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,n){t={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},e=r.call(d,t);return e.listener=n,t.wrapFn=e}function g(t,e,n){t=t._events;if(!t)return[];e=t[e];return e?"function"==typeof e?n?[e.listener||e]:[e]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):m(e,e.length):[]}function y(t){var e=this._events;if(e){t=e[t];if("function"==typeof t)return 1;if(t)return t.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}a?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):i.defaultMaxListeners=u,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return f(this)},i.prototype.emit=function(t,e,n,r){var i,a,o,s,l="error"===t,u=this._events;if(u)l=l&&null==u.error;else if(!l)return!1;if(l){if(1<arguments.length&&(i=e),i instanceof Error)throw i;l=new Error('Unhandled "error" event. ('+i+")");throw l.context=i,l}if(!(a=u[t]))return!1;var c,f="function"==typeof a;switch(c=arguments.length){case 1:!function(t,e){if(f)t.call(e);else for(var n=t.length,r=m(t,n),i=0;i<n;++i)r[i].call(e)}(a,this);break;case 2:!function(t,e,n){if(f)t.call(e,n);else for(var r=t.length,i=m(t,r),a=0;a<r;++a)i[a].call(e,n)}(a,this,e);break;case 3:!function(t,e,n,r){if(f)t.call(e,n,r);else for(var i=t.length,a=m(t,i),o=0;o<i;++o)a[o].call(e,n,r)}(a,this,e,n);break;case 4:!function(t,e,n,r,i){if(f)t.call(e,n,r,i);else for(var a=t.length,o=m(t,a),s=0;s<a;++s)o[s].call(e,n,r,i)}(a,this,e,n,r);break;default:for(o=new Array(c-1),s=1;s<c;s++)o[s-1]=arguments[s];!function(t,e,n){if(f)t.apply(e,n);else for(var r=t.length,i=m(t,r),a=0;a<r;++a)i[a].apply(e,n)}(a,this,o)}return!0},i.prototype.on=i.prototype.addListener=function(t,e){return h(this,t,e,!1)},i.prototype.prependListener=function(t,e){return h(this,t,e,!0)},i.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,i,a,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=s(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,a=n.length-1;0<=a;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t){for(var e=i,n=e+1,r=t.length;n<r;e+=1,n+=1)t[e]=t[n];t.pop()}(n),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,o||e)}return this},i.prototype.removeAllListeners=function(t){var e,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=s(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=s(null):delete n[t]),this;if(0===arguments.length){for(var r,i=l(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=s(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(a=e.length-1;0<=a;a--)this.removeListener(t,e[a]);return this},i.prototype.listeners=function(t){return g(this,t,!0)},i.prototype.rawListeners=function(t){return g(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},i.prototype.listenerCount=y,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],98:[function(t,e,n){"use strict";e.exports=function(t,e,n){e=e||0,n=n||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[e*t[12]+t[8],e*t[13]+t[9],e*t[14]+t[10],e*t[15]+t[11]],[n*t[12]-t[8],n*t[13]-t[9],n*t[14]-t[10],n*t[15]-t[11]]]}},{}],99:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=t("is-string-blank");e.exports=function(t){var e=r(t);if("string"===e){var n=t;if(0===(t=+t)&&i(n))return!1}else if("number"!==e)return!1;return t-t<1}},{"is-string-blank":206}],100:[function(t,e,n){"use strict";e.exports=function(t,e,n){switch(arguments.length){case 0:return new i([0],[0],0);case 1:return"number"!=typeof t?new i(t,a(t.length),0):new i(r=a(t),r,0);case 2:if("number"==typeof e){var r=a(t.length);return new i(t,r,+e)}n=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new i(t,e,n)}};var x=t("cubic-hermite"),_=t("binary-search-bounds");function w(t,e,n){return Math.min(e,Math.max(t,n))}function i(t,e,n){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[n],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}t=i.prototype;function a(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}t.flush=function(t){t=_.gt(this._time,t)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},t.curve=function(t){var e=this._time,n=e.length,r=_.le(e,t),i=this._scratch[0],a=this._state,o=this._velocity,s=this.dimension,l=this.bounds;if(r<0)for(var u=s-1,c=0;c<s;++c,--u)i[c]=a[u];else if(n-1<=r)for(var u=a.length-1,f=t-e[n-1],c=0;c<s;++c,--u)i[c]=a[u]+f*o[u];else{for(var u=s*(r+1)-1,n=e[r],h=e[r+1]-n||1,d=this._scratch[1],p=this._scratch[2],g=this._scratch[3],y=this._scratch[4],m=!0,c=0;c<s;++c,--u)d[c]=a[u],g[c]=o[u]*h,p[c]=a[u+s],y[c]=o[u+s]*h,m=m&&d[c]===p[c]&&g[c]===y[c]&&0===g[c];if(m)for(c=0;c<s;++c)i[c]=d[c];else x(d,g,p,y,(t-n)/h,i)}for(var v=l[0],b=l[1],c=0;c<s;++c)i[c]=w(v[c],b[c],i[c]);return i},t.dcurve=function(t){var e=this._time,n=e.length,r=_.le(e,t),i=this._scratch[0],a=this._state,o=this._velocity,s=this.dimension;if(n-1<=r)for(var l=a.length-1,u=(e[n-1],0);u<s;++u,--l)i[u]=o[l];else{for(var l=s*(r+1)-1,n=e[r],c=e[r+1]-n||1,f=this._scratch[1],h=this._scratch[2],d=this._scratch[3],p=this._scratch[4],g=!0,u=0;u<s;++u,--l)f[u]=a[l],d[u]=o[l]*c,h[u]=a[l+s],p[u]=o[l+s]*c,g=g&&f[u]===h[u]&&d[u]===p[u]&&0===d[u];if(g)for(u=0;u<s;++u)i[u]=0;else{x.derivative(f,d,h,p,(t-n)/c,i);for(u=0;u<s;++u)i[u]/=c}}return i},t.lastT=function(){var t=this._time;return t[t.length-1]},t.stable=function(){for(var t=this._velocity,e=t.length,n=this.dimension-1;0<=n;--n)if(t[--e])return!1;return!0},t.jump=function(t){var e=this.lastT(),n=this.dimension;if(!(t<e||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,o=this.bounds,s=o[0],l=o[1];this._time.push(e,t);for(var u=0;u<2;++u)for(var c=0;c<n;++c)r.push(r[a++]),i.push(0);this._time.push(t);for(c=n;0<c;--c)r.push(w(s[c-1],l[c-1],arguments[c])),i.push(0)}},t.push=function(t){var e=this.lastT(),n=this.dimension;if(!(t<e||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,o=t-e,e=this.bounds,s=e[0],l=e[1],u=1e-6<o?1/o:0;this._time.push(t);for(var c=n;0<c;--c){var f=w(s[c-1],l[c-1],arguments[c]);r.push(f),i.push((f-r[a++])*u)}}},t.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var n=this._state,r=this._velocity,i=this.bounds,a=i[0],o=i[1];this._time.push(t);for(var s=e;0<s;--s)n.push(w(a[s-1],o[s-1],arguments[s])),r.push(0)}},t.move=function(t){var e=this.lastT(),n=this.dimension;if(!(t<=e||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,o=this.bounds,s=o[0],l=o[1],e=t-e,u=1e-6<e?1/e:0;this._time.push(t);for(var c=n;0<c;--c){var f=arguments[c];r.push(w(s[c-1],l[c-1],r[a++]+f)),i.push(f*u)}}},t.idle=function(t){var e=this.lastT();if(!(t<e)){var n=this.dimension,r=this._state,i=this._velocity,a=r.length-n,o=this.bounds,s=o[0],l=o[1],u=t-e;this._time.push(t);for(var c=n-1;0<=c;--c)r.push(w(s[c],l[c],r[a]+u*i[a])),i.push(0),a+=1}}},{"binary-search-bounds":101,"cubic-hermite":56}],101:[function(t,e,n){"use strict";function i(t,e,n,r,i,a){i=["function ",t,"(a,l,h,",r.join(","),"){",a?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),n?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function r(t,e,n,r){return new Function([i("A","x"+t+"y",e,["y"],!1,r),i("B","x"+t+"y",e,["y"],!0,r),i("P","c(x,y)"+t+"0",e,["y","c"],!1,r),i("Q","c(x,y)"+t+"0",e,["y","c"],!0,r),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""))()}e.exports={ge:r(">=",!1,"GE"),gt:r(">",!1,"GT"),lt:r("<",!0,"LT"),le:r("<=",!0,"LE"),eq:r("-",!0,"EQ",!0)}},{}],102:[function(t,e,n){"use strict";e.exports=function(t){return new g(t||r,null)};function h(t,e,n,r,i,a){this._color=t,this.key=e,this.value=n,this.left=r,this.right=i,this._count=a}function s(t){return new h(t._color,t.key,t.value,t.left,t.right,t._count)}function d(t,e){return new h(t,e.key,e.value,e.left,e.right,e._count)}function p(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function g(t,e){this._compare=t,this.root=e}e=g.prototype;function o(t,e){this.tree=t,this._stack=e}Object.defineProperty(e,"keys",{get:function(){var n=[];return this.forEach(function(t,e){n.push(t)}),n}}),Object.defineProperty(e,"values",{get:function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n}}),Object.defineProperty(e,"length",{get:function(){return this.root?this.root._count:0}}),e.insert=function(t,e){for(var n=this._compare,r=this.root,i=[],a=[];r;){var o=n(t,r.key);i.push(r),a.push(o),r=o<=0?r.left:r.right}i.push(new h(0,t,e,null,null,1));for(var s=i.length-2;0<=s;--s){r=i[s];a[s]<=0?i[s]=new h(r._color,r.key,r.value,i[s+1],r.right,r._count+1):i[s]=new h(r._color,r.key,r.value,r.left,i[s+1],r._count+1)}for(s=i.length-1;1<s;--s){var l=i[s-1],r=i[s];if(1===l._color||1===r._color)break;var u,c,f=i[s-2];if(f.left===l)if(l.left===r){if(!(u=f.right)||0!==u._color){f._color=0,f.left=l.right,l._color=1,l.right=f,i[s-2]=l,i[s-1]=r,p(f),p(l),3<=s&&((c=i[s-3]).left===f?c.left=l:c.right=l);break}l._color=1,f.right=d(1,u),f._color=0,--s}else{if(!(u=f.right)||0!==u._color){l.right=r.left,f._color=0,f.left=r.right,r._color=1,r.left=l,r.right=f,i[s-2]=r,i[s-1]=l,p(f),p(l),p(r),3<=s&&((c=i[s-3]).left===f?c.left=r:c.right=r);break}l._color=1,f.right=d(1,u),f._color=0,--s}else if(l.right===r){if(!(u=f.left)||0!==u._color){f._color=0,f.right=l.left,l._color=1,l.left=f,i[s-2]=l,i[s-1]=r,p(f),p(l),3<=s&&((c=i[s-3]).right===f?c.right=l:c.left=l);break}l._color=1,f.left=d(1,u),f._color=0,--s}else{if(!(u=f.left)||0!==u._color){l.left=r.right,f._color=0,f.right=r.left,r._color=1,r.right=l,r.left=f,i[s-2]=r,i[s-1]=l,p(f),p(l),p(r),3<=s&&((c=i[s-3]).right===f?c.right=r:c.left=r);break}l._color=1,f.left=d(1,u),f._color=0,--s}}return i[0]._color=1,new g(n,i[0])},e.forEach=function(t,e,n){if(this.root)switch(arguments.length){case 1:return function t(e,n){var r;if(n.left&&(r=t(e,n.left)))return r;return(r=e(n.key,n.value))?r:n.right?t(e,n.right):void 0}(t,this.root);case 2:return function t(e,n,r,i){var a;if(n(e,i.key)<=0){if(i.left&&(a=t(e,n,r,i.left)))return a;if(a=r(i.key,i.value))return a}if(i.right)return t(e,n,r,i.right)}(e,this._compare,t,this.root);case 3:return 0<=this._compare(e,n)?void 0:function t(e,n,r,i,a){var o,s=r(e,a.key),l=r(n,a.key);if(s<=0){if(a.left&&(o=t(e,n,r,i,a.left)))return o;if(0<l&&(o=i(a.key,a.value)))return o}if(0<l&&a.right)return t(e,n,r,i,a.right)}(e,n,this._compare,t,this.root)}},Object.defineProperty(e,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new o(this,t)}}),Object.defineProperty(e,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new o(this,t)}}),e.at=function(t){if(t<0)return new o(this,[]);for(var e=this.root,n=[];;){if(n.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new o(this,n);if(--t,!e.right)break;if(t>=e.right._count)break;e=e.right}return new o(this,[])},e.ge=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var a=e(t,n.key);r.push(n),a<=0&&(i=r.length),n=a<=0?n.left:n.right}return r.length=i,new o(this,r)},e.gt=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var a=e(t,n.key);r.push(n),a<0&&(i=r.length),n=a<0?n.left:n.right}return r.length=i,new o(this,r)},e.lt=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var a=e(t,n.key);r.push(n),0<a&&(i=r.length),n=a<=0?n.left:n.right}return r.length=i,new o(this,r)},e.le=function(t){for(var e=this._compare,n=this.root,r=[],i=0;n;){var a=e(t,n.key);r.push(n),0<=a&&(i=r.length),n=a<0?n.left:n.right}return r.length=i,new o(this,r)},e.find=function(t){for(var e=this._compare,n=this.root,r=[];n;){var i=e(t,n.key);if(r.push(n),0===i)return new o(this,r);n=i<=0?n.left:n.right}return new o(this,[])},e.remove=function(t){t=this.find(t);return t?t.remove():this},e.get=function(t){for(var e=this._compare,n=this.root;n;){var r=e(t,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};e=o.prototype;function l(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function r(t,e){return t<e?-1:e<t?1:0}Object.defineProperty(e,"valid",{get:function(){return 0<this._stack.length}}),Object.defineProperty(e,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0}),e.clone=function(){return new o(this.tree,this._stack.slice())},e.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),n=t[t.length-1];e[e.length-1]=new h(n._color,n.key,n.value,n.left,n.right,n._count);for(var r=t.length-2;0<=r;--r)(n=t[r]).left===t[r+1]?e[r]=new h(n._color,n.key,n.value,e[r+1],n.right,n._count):e[r]=new h(n._color,n.key,n.value,n.left,e[r+1],n._count);if((n=e[e.length-1]).left&&n.right){var i=e.length;for(n=n.left;n.right;)e.push(n),n=n.right;var a=e[i-1];e.push(new h(n._color,a.key,a.value,n.left,n.right,n._count)),e[i-1].key=n.key,e[i-1].value=n.value;for(r=e.length-2;i<=r;--r)n=e[r],e[r]=new h(n._color,n.key,n.value,n.left,e[r+1],n._count);e[i-1].left=e[i]}if(0===(n=e[e.length-1])._color){var o=e[e.length-2];o.left===n?o.left=null:o.right===n&&(o.right=null),e.pop();for(r=0;r<e.length;++r)e[r]._count--;return new g(this.tree._compare,e[0])}if(n.left||n.right){n.left?l(n,n.left):n.right&&l(n,n.right),n._color=1;for(r=0;r<e.length-1;++r)e[r]._count--;return new g(this.tree._compare,e[0])}if(1===e.length)return new g(this.tree._compare,null);for(r=0;r<e.length;++r)e[r]._count--;o=e[e.length-2];return function(t){for(var e,n,r=t.length-1;0<=r;--r){if(e=t[r],0===r)return e._color=1;if((n=t[r-1]).left===e){if((a=n.right).right&&0===a.right._color){var i,a,o=(a=n.right=s(a)).right=s(a.right);return n.right=a.left,a.left=n,a.right=o,a._color=n._color,e._color=1,n._color=1,o._color=1,p(n),p(a),1<r&&((i=t[r-2]).left===n?i.left=a:i.right=a),t[r-1]=a}if(a.left&&0===a.left._color)return o=(a=n.right=s(a)).left=s(a.left),n.right=o.left,a.left=o.right,o.left=n,o.right=a,o._color=n._color,n._color=1,a._color=1,e._color=1,p(n),p(a),p(o),1<r&&((i=t[r-2]).left===n?i.left=o:i.right=o),t[r-1]=o;if(1!==a._color)a=s(a),n.right=a.left,a.left=n,a._color=n._color,n._color=0,p(n),p(a),1<r&&((i=t[r-2]).left===n?i.left=a:i.right=a),t[r-1]=a,t[r]=n,r+1<t.length?t[r+1]=e:t.push(e),r+=2;else{if(0===n._color)return n._color=1,n.right=d(0,a);n.right=d(0,a)}}else{if(a=n.left,a.left&&0===a.left._color)return o=(a=n.left=s(a)).left=s(a.left),n.left=a.right,a.right=n,a.left=o,a._color=n._color,e._color=1,n._color=1,o._color=1,p(n),p(a),1<r&&((i=t[r-2]).right===n?i.right=a:i.left=a),t[r-1]=a;if(a.right&&0===a.right._color)return o=(a=n.left=s(a)).right=s(a.right),n.left=o.right,a.right=o.left,o.right=n,o.left=a,o._color=n._color,n._color=1,a._color=1,e._color=1,p(n),p(a),p(o),1<r&&((i=t[r-2]).right===n?i.right=o:i.left=o),t[r-1]=o;if(1!==a._color)a=s(a),n.left=a.right,a.right=n,a._color=n._color,n._color=0,p(n),p(a),1<r&&((i=t[r-2]).right===n?i.right=a:i.left=a),t[r-1]=a,t[r]=n,r+1<t.length?t[r+1]=e:t.push(e),r+=2;else{if(0===n._color)return n._color=1,n.left=d(0,a);n.left=d(0,a)}}}}(e),o.left===n?o.left=null:o.right=null,new g(this.tree._compare,e[0])},Object.defineProperty(e,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(e,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(e,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var n=this.tree.root;return n?n._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var r=e.length-2;0<=r;--r)e[r+1]===e[r].right&&(++t,e[r].left&&(t+=e[r].left._count));return t},enumerable:!0}),e.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();0<t.length&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(e,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;0<e;--e)if(t[e-1].left===t[e])return!0;return!1}}),e.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var n=new Array(e.length),r=e[e.length-1];n[n.length-1]=new h(r._color,r.key,t,r.left,r.right,r._count);for(var i=e.length-2;0<=i;--i)(r=e[i]).left===e[i+1]?n[i]=new h(r._color,r.key,r.value,n[i+1],r.right,r._count):n[i]=new h(r._color,r.key,r.value,r.left,n[i+1],r._count);return new g(this.tree._compare,n[0])},e.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();0<t.length&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(e,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;0<e;--e)if(t[e-1].right===t[e])return!0;return!1}})},{}],103:[function(t,e,n){"use strict";var a=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],i=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function o(t){if(t<0)return Number("0/0");for(var e=i[0],n=i.length-1;0<n;--n)e+=i[n]/(t+n);var r=t+607/128+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(r)-r+Math.log(e)-Math.log(t)}e.exports=function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));if(100<e)return Math.exp(o(e));--e;for(var n=a[0],r=1;r<9;r++)n+=a[r]/(e+r);var i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*n},e.exports.log=o},{}],104:[function(t,e,n){"use strict";e.exports=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(n.width=e.width);"number"==typeof e.height&&(n.height=e.height);var r,i=e;try{var a=[t];0===t.indexOf("webgl")&&a.push("experimental-"+t);for(var o=0;o<a.length;o++)if(r=n.getContext(a[o],i))return r}catch(t){r=null}return r||null}},{}],105:[function(t,e,n){"use strict";e.exports=function(t,e){t=new i(t);return t.update(e),t};var d=t("./lib/text.js"),p=t("./lib/lines.js"),r=t("./lib/background.js"),I=t("./lib/cube.js"),g=t("./lib/ticks.js"),F=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function i(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(t)}t=i.prototype;function a(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}t.update=function(s){function t(t,e,n){if(n in s){var r,i=s[n],a=this[n];(t?Array.isArray(i)&&Array.isArray(i[0]):Array.isArray(i))?this[n]=r=[e(i[0]),e(i[1]),e(i[2])]:this[n]=r=[e(i),e(i),e(i)];for(var o=0;o<3;++o)if(r[o]!==a[o])return!0}return!1}s=s||{};var e,n=t.bind(this,!1,Number),r=t.bind(this,!1,Boolean),i=t.bind(this,!1,String),a=t.bind(this,!0,function(t){if(Array.isArray(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]}),o=!1,l=!1;if("bounds"in s)for(var u=s.bounds,c=0;c<2;++c)for(var f=0;f<3;++f)u[c][f]!==this.bounds[c][f]&&(l=!0),this.bounds[c][f]=u[c][f];if("ticks"in s){e=s.ticks,o=!0,this.autoTicks=!1;for(c=0;c<3;++c)this.tickSpacing[c]=0}else n("tickSpacing")&&(l=this.autoTicks=!0);if(this._firstInit&&("ticks"in s||"tickSpacing"in s||(this.autoTicks=!0),o=l=!0,this._firstInit=!1),l&&this.autoTicks&&(e=g.create(this.bounds,this.tickSpacing),o=!0),o){for(c=0;c<3;++c)e[c].sort(function(t,e){return t.x-e.x});g.equal(e,this.ticks)?o=!1:this.ticks=e}r("tickEnable"),i("tickFont")&&(o=!0),n("tickSize"),n("tickAngle"),n("tickPad"),a("tickColor");var h=i("labels");i("labelFont")&&(h=!0),r("labelEnable"),n("labelSize"),n("labelPad"),a("labelColor"),r("lineEnable"),r("lineMirror"),n("lineWidth"),a("lineColor"),r("lineTickEnable"),r("lineTickMirror"),n("lineTickLength"),n("lineTickWidth"),a("lineTickColor"),r("gridEnable"),n("gridWidth"),a("gridColor"),r("zeroEnable"),a("zeroLineColor"),n("zeroLineWidth"),r("backgroundEnable"),a("backgroundColor"),this._text?this._text&&(h||o)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=d(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&o&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=p(this.gl,this.bounds,this.ticks))};var U=[new a,new a,new a];var V=[0,0,0],H={model:F,view:F,projection:F,_ortho:!1};t.isOpaque=function(){return!0},t.isTransparent=function(){return!1},t.drawTransparent=function(t){};var q=[0,0,0],G=[0,0,0],Y=[0,0,0];t.draw=function(t){t=t||H;for(var e=this.gl,n=t.model||F,r=t.view||F,i=t.projection||F,a=this.bounds,o=t._ortho||!1,s=I(n,r,i,a,o),p=s.cubeEdges,l=s.axis,u=r[12],c=r[13],t=r[14],s=r[15],f=(o?2:1)*this.pixelRatio*(i[3]*u+i[7]*c+i[11]*t+i[15]*s)/e.drawingBufferHeight,h=0;h<3;++h)this.lastCubeProps.cubeEdges[h]=p[h],this.lastCubeProps.axis[h]=l[h];for(var d=U,h=0;h<3;++h)!function(t,e,n,r){for(var i,a,o,s,l=t.primalOffset,u=t.primalMinor,c=t.mirrorOffset,f=t.mirrorMinor,h=p[e],d=0;d<3;++d)e!==d&&(i=l,a=c,o=u,s=f,h&1<<d&&(i=c,a=l,o=f,s=u),i[d]=n[0][d],a[d]=n[1][d],0<r[d]?(o[d]=-1,s[d]=0):(o[d]=0,s[d]=1))}(U[h],h,this.bounds,l);for(var e=this.gl,g=V,h=0;h<3;++h)this.backgroundEnable[h]?g[h]=l[h]:g[h]=0;this._background.draw(n,r,i,a,g,this.backgroundColor),this._lines.bind(n,r,i,this);for(h=0;h<3;++h){var y=[0,0,0];0<l[h]?y[h]=a[1][h]:y[h]=a[0][h];for(var m=0;m<2;++m){var v=(h+1+m)%3,b=(h+1+(1^m))%3;this.gridEnable[v]&&this._lines.drawGrid(v,b,this.bounds,y,this.gridColor[v],this.gridWidth[v]*this.pixelRatio)}for(m=0;m<2;++m){v=(h+1+m)%3,b=(h+1+(1^m))%3;this.zeroEnable[b]&&Math.min(a[0][b],a[1][b])<=0&&0<=Math.max(a[0][b],a[1][b])&&this._lines.drawZero(v,b,this.bounds,y,this.zeroLineColor[b],this.zeroLineWidth[b]*this.pixelRatio)}}for(var x,h=0;h<3;++h){this.lineEnable[h]&&this._lines.drawAxisLine(h,this.bounds,d[h].primalOffset,this.lineColor[h],this.lineWidth[h]*this.pixelRatio),this.lineMirror[h]&&this._lines.drawAxisLine(h,this.bounds,d[h].mirrorOffset,this.lineColor[h],this.lineWidth[h]*this.pixelRatio);for(var _=B(q,d[h].primalMinor),w=B(G,d[h].mirrorMinor),k=this.lineTickLength,m=0;m<3;++m){var M=f/n[5*m];_[m]*=k[m]*M,w[m]*=k[m]*M}this.lineTickEnable[h]&&this._lines.drawAxisTicks(h,d[h].primalOffset,_,this.lineTickColor[h],this.lineTickWidth[h]*this.pixelRatio),this.lineTickMirror[h]&&this._lines.drawAxisTicks(h,d[h].mirrorOffset,w,this.lineTickColor[h],this.lineTickWidth[h]*this.pixelRatio)}this._lines.unbind(),this._text.bind(n,r,i,this.pixelRatio);var T,A;function S(t){(A=[0,0,0])[t]=1}for(var E,O,C,P,L,R,h=0;h<3;++h){for(var j=d[h].primalMinor,N=d[h].mirrorMinor,D=B(Y,d[h].primalOffset),m=0;m<3;++m)this.lineTickEnable[h]&&(D[m]+=f*j[m]*Math.max(this.lineTickLength[m],0)/n[5*m]);var z=[0,0,0];if(z[h]=1,this.tickEnable[h]){-3600===this.tickAngle[h]?(this.tickAngle[h]=0,this.tickAlign[h]="auto"):this.tickAlign[h]=-1,T=1,"auto"===(x=[this.tickAlign[h],.5,T])[0]?x[0]=0:x[0]=parseInt(""+x[0]),A=[0,0,0],C=N,R=L=P=void 0,L=((E=h)+2)%3,R=(O=j)[P=(E+1)%3],E=O[L],O=C[P],C=C[L],0<R&&0<C||0<R&&C<0||R<0&&0<C||R<0&&C<0?S(P):(0<E&&0<O||0<E&&O<0||E<0&&0<O||E<0&&O<0)&&S(L);for(m=0;m<3;++m)D[m]+=f*j[m]*this.tickPad[m]/n[5*m];this._text.drawTicks(h,this.tickSize[h],this.tickAngle[h],D,this.tickColor[h],z,A,x)}if(this.labelEnable[h]){A=[T=0,0,0],4<this.labels[h].length&&(S(h),T=1),"auto"===(x=[this.labelAlign[h],.5,T])[0]?x[0]=0:x[0]=parseInt(""+x[0]);for(m=0;m<3;++m)D[m]+=f*j[m]*this.labelPad[m]/n[5*m];D[h]+=.5*(a[0][h]+a[1][h]),this._text.drawLabel(h,this.labelSize[h],this.labelAngle[h],D,this.labelColor[h],[0,0,0],A,x)}}this._text.unbind()},t.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":106,"./lib/cube.js":107,"./lib/lines.js":108,"./lib/text.js":110,"./lib/ticks.js":111}],106:[function(t,e,n){"use strict";e.exports=function(t){for(var e=[],n=[],r=0,i=0;i<3;++i)for(var a=(i+1)%3,o=(i+2)%3,s=[0,0,0],l=[0,0,0],u=-1;u<=1;u+=2){n.push(r,r+2,r+1,r+1,r+2,r+3),s[i]=u,l[i]=u;for(var c=-1;c<=1;c+=2){s[a]=c;for(var f=-1;f<=1;f+=2)s[o]=f,e.push(s[0],s[1],s[2],l[0],l[1],l[2]),r+=1}var h=a;a=o,o=h}var d=y(t,new Float32Array(e)),p=y(t,new Uint16Array(n),t.ELEMENT_ARRAY_BUFFER),g=m(t,[{buffer:d,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:d,type:t.FLOAT,size:3,offset:12,stride:24}],p),p=v(t);return p.attributes.position.location=0,p.attributes.normal.location=1,new b(t,d,g,p)};var y=t("gl-buffer"),m=t("gl-vao"),v=t("./shaders").bg;function b(t,e,n,r){this.gl=t,this.buffer=e,this.vao=n,this.shader=r}t=b.prototype;t.draw=function(t,e,n,r,i,a){for(var o,s=!1,l=0;l<3;++l)s=s||i[l];s&&((o=this.gl).enable(o.POLYGON_OFFSET_FILL),o.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:n,bounds:r,enable:i,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),o.disable(o.POLYGON_OFFSET_FILL))},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":109,"gl-buffer":113,"gl-vao":178}],107:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){C(R,e,t),C(R,n,R);for(var a=0,o=0;o<2;++o){D[2]=r[o][2];for(var s=0;s<2;++s){D[1]=r[s][1];for(var l=0;l<2;++l)D[0]=r[l][0],function(t,e,n){for(var r=0;r<4;++r){t[r]=n[12+r];for(var i=0;i<3;++i)t[r]+=e[i]*n[4*i+r]}}(j[a],D,R),a+=1}}for(var u=-1,o=0;o<8;++o){for(var c=j[o][3],f=0;f<3;++f)N[o][f]=j[o][f]/c;i&&(N[o][2]*=-1),c<0&&(u<0||N[o][2]<N[u][2])&&(u=o)}if(u<0)for(var h=u=0;h<3;++h){for(var d=(h+2)%3,p=(h+1)%3,g=-1,y=-1,m=0;m<2;++m){var v=(x=m<<h)+(m<<d)+(1-m<<p),b=x+(1-m<<d)+(m<<p);L(N[x],N[v],N[b],z)<0||(m?g=1:y=1)}if(g<0||y<0)g<y&&(u|=1<<h);else{for(m=0;m<2;++m){var x,v=(x=m<<h)+(m<<d)+(1-m<<p),b=x+(1-m<<d)+(m<<p),_=function(t){for(var e=0;e<I.length;++e)if((t=P.positive(t,I[e])).length<3)return 0;for(var n=t[0],r=n[0]/n[3],i=n[1]/n[3],a=0,e=1;e+1<t.length;++e){var o=t[e],s=t[e+1],l=o[0]/o[3],u=o[1]/o[3],o=s[0]/s[3],s=s[1]/s[3],l=l-r,u=u-i,o=o-r,s=s-i;a+=Math.abs(l*s-u*o)}return a}([j[x],j[v],j[b],j[x+(1<<d)+(1<<p)]]);m?g=_:y=_}g<y&&(u|=1<<h)}}for(var w=7^u,k=-1,o=0;o<8;++o)o!==u&&o!==w&&(k<0||N[k][1]>N[o][1])&&(k=o);for(var M=-1,o=0;o<3;++o)(A=k^1<<o)!==u&&A!==w&&(M<0&&(M=A),(p=N[A])[0]<N[M][0]&&(M=A));for(var T=-1,o=0;o<3;++o){var A;(A=k^1<<o)!==u&&A!==w&&A!==M&&(T<0&&(T=A),(p=N[A])[0]>N[T][0]&&(T=A))}t=F;t[0]=t[1]=t[2]=0,t[O.log2(M^k)]=k&M,t[O.log2(k^T)]=k&T;n=7^T;n===u||n===w?(n=7^M,t[O.log2(T^n)]=n&T):t[O.log2(M^n)]=n&M;for(var S=B,E=u,h=0;h<3;++h)S[h]=E&1<<h?-1:1;return U};var O=t("bit-twiddle"),C=t("gl-mat4/multiply"),P=t("split-polygon"),L=t("robust-orientation"),R=new Array(16),j=new Array(8),N=new Array(8),D=new Array(3),z=[0,0,0];!function(){for(var t=0;t<8;++t)j[t]=[1,1,1,1],N[t]=[1,1,1]}();var I=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];var F=[1,1,1],B=[0,0,0],U={cubeEdges:F,axis:B}},{"bit-twiddle":26,"gl-mat4/multiply":141,"robust-orientation":633,"split-polygon":649}],108:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=[],i=[0,0,0],a=[0,0,0],o=[0,0,0],s=[0,0,0];r.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var l=0;l<3;++l){for(var u=r.length/3|0,c=0;c<n[l].length;++c){var f=+n[l][c].x;r.push(f,0,1,f,1,1,f,0,-1,f,0,-1,f,1,1,f,1,-1)}var h=r.length/3|0;i[l]=u,a[l]=h-u;for(var u=r.length/3|0,d=0;d<n[l].length;++d){f=+n[l][d].x;r.push(f,0,1,f,1,1,f,0,-1,f,0,-1,f,1,1,f,1,-1)}h=r.length/3|0;o[l]=u,s[l]=h-u}var p=m(t,new Float32Array(r)),g=v(t,[{buffer:p,type:t.FLOAT,size:3,stride:0,offset:0}]),y=b(t);return y.attributes.position.location=0,new x(t,p,g,y,a,i,s,o)};var m=t("gl-buffer"),v=t("gl-vao"),b=t("./shaders").line,s=[0,0,0],l=[0,0,0],u=[0,0,0],c=[0,0,0],r=[1,1];function f(t){return t[0]=t[1]=t[2]=0,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function x(t,e,n,r,i,a,o,s){this.gl=t,this.vertBuffer=e,this.vao=n,this.shader=r,this.tickCount=i,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}t=x.prototype;t.bind=function(t,e,n){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=n,r[0]=this.gl.drawingBufferWidth,r[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=r,this.vao.bind()},t.unbind=function(){this.vao.unbind()},t.drawAxisLine=function(t,e,n,r,i){var a=f(l);this.shader.uniforms.majorAxis=l,a[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=a;n=h(c,n);n[t]+=e[0][t],this.shader.uniforms.offset=n,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=r;r=f(u);r[(t+2)%3]=1,this.shader.uniforms.screenAxis=r,this.vao.draw(this.gl.TRIANGLES,6),(r=f(u))[(t+1)%3]=1,this.shader.uniforms.screenAxis=r,this.vao.draw(this.gl.TRIANGLES,6)},t.drawAxisTicks=function(t,e,n,r,i){var a;this.tickCount[t]&&((a=f(s))[t]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=r,this.shader.uniforms.lineWidth=i,(i=f(u))[t]=1,this.shader.uniforms.screenAxis=i,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},t.drawGrid=function(t,e,n,r,i,a){var o;this.gridCount[t]&&((o=f(l))[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=o,(r=h(c,r))[e]+=n[0][e],this.shader.uniforms.offset=r,(r=f(s))[t]=1,this.shader.uniforms.majorAxis=r,(r=f(u))[t]=1,this.shader.uniforms.screenAxis=r,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t]))},t.drawZero=function(t,e,n,r,i,a){var o=f(l);(this.shader.uniforms.majorAxis=o)[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=o;r=h(c,r);r[t]+=n[0][t],this.shader.uniforms.offset=r;r=f(u);r[e]=1,this.shader.uniforms.screenAxis=r,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},t.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":109,"gl-buffer":113,"gl-vao":178}],109:[function(t,e,n){"use strict";var r=t("glslify"),i=t("gl-shader"),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.line=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"}])};var s=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.text=function(t){return i(t,s,l,null,[{name:"position",type:"vec3"}])};var u=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);n.bg=function(t){return i(t,u,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":165,glslify:194}],110:[function(n,r,t){(function(e){(function(){"use strict";r.exports=function(t,e,n,r,i,a){var o=u(t),s=c(t,[{buffer:o,size:3}]),l=f(t);l.attributes.position.location=0;s=new h(t,l,o,s);return s.update(e,n,r,i,a),s};var u=n("gl-buffer"),c=n("gl-vao"),m=n("vectorize-text"),f=n("./shaders").text,t=window||e.global||{},v=t.__TEXT_CACHE||{};t.__TEXT_CACHE={};function h(t,e,n,r){this.gl=t,this.shader=e,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var t=h.prototype,a=[0,0];t.bind=function(t,e,n,r){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=t,i.view=e,i.projection=n,i.pixelScale=r,a[0]=this.gl.drawingBufferWidth,a[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=a},t.unbind=function(){this.vao.unbind()},t.update=function(t,e,n,r,i){var y=[];function a(t,e,n,r,i,a){for(var o=v[n],s=(o=o||(v[n]={}))[e],l=(r||12)/12,u=(s=s||(o[e]=function(e,t){try{return m(e,t)}catch(t){return console.warn('error vectorizing text:"'+e+'" error:',t),{cells:[],positions:[]}}}(e,{triangles:!0,font:n,textAlign:"center",textBaseline:"middle",lineSpacing:i,styletags:a}))).positions,c=s.cells,f=0,h=c.length;f<h;++f)for(var d=c[f],p=2;0<=p;--p){var g=u[d[p]];y.push(l*g[0],-l*g[1],t)}}for(var o=[0,0,0],s=[0,0,0],l=[0,0,0],u=[0,0,0],c={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},f=0;f<3;++f){l[f]=y.length/3|0,a(.5*(t[0][f]+t[1][f]),e[f],n[f],12,1.25,c),u[f]=(y.length/3|0)-l[f],o[f]=y.length/3|0;for(var h=0;h<r[f].length;++h)r[f][h].text&&a(r[f][h].x,r[f][h].text,r[f][h].font||i,r[f][h].fontSize||12,1.25,c);s[f]=(y.length/3|0)-o[f]}this.buffer.update(y),this.tickOffset=o,this.tickCount=s,this.labelOffset=l,this.labelCount=u},t.drawTicks=function(t,e,n,r,i,a,o,s){this.tickCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=e,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},t.drawLabel=function(t,e,n,r,i,a,o,s){this.labelCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=e,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},t.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,n("_process"))},{"./shaders":109,_process:619,"gl-buffer":113,"gl-vao":178,"vectorize-text":660}],111:[function(t,e,n){"use strict";function o(t,e){var n=t+"",r=n.indexOf("."),i=0;0<=r&&(i=n.length-r-1);r=Math.pow(10,i),t=Math.round(t*e*r),e=t+"";if(0<=e.indexOf("e"))return e;e=t/r,r=t%r;t<0?(e=0|-Math.ceil(e),r=0|-r):(e=0|Math.floor(e),r|=0);e=""+e;if(t<0&&(e="-"+e),i){for(var a=""+r;a.length<i;)a="0"+a;return e+"."+a}return e}n.create=function(t,e){for(var n=[],r=0;r<3;++r){for(var i=[],a=(t[0][r],t[1][r],0);a*e[r]<=t[1][r];++a)i.push({x:a*e[r],text:o(e[r],a)});for(a=-1;a*e[r]>=t[0][r];--a)i.push({x:a*e[r],text:o(e[r],a)});n.push(i)}return n},n.equal=function(t,e){for(var n=0;n<3;++n){if(t[n].length!==e[n].length)return!1;for(var r=0;r<t[n].length;++r){var i=t[n][r],a=e[n][r];if(i.x!==a.x||i.text!==a.text||i.font!==a.font||i.fontColor!==a.fontColor||i.fontSize!==a.fontSize||i.dx!==a.dx||i.dy!==a.dy)return!1}}return!0}},{}],112:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){var a=e.model||O,o=e.view||O,s=e.projection||O,l=e._ortho||!1,u=t.bounds,c=(i=i||T(a,o,s,u,l)).axis;A(C,o,a),A(C,s,C);for(var f=R,h=0;h<3;++h)f[h].lo=1/0,f[h].hi=-1/0,f[h].pixelsPerDataUnit=1/0;var d=k(S(C,C));S(C,C);for(var p=0;p<3;++p){var g=(p+1)%3,y=(p+2)%3,m=j;t:for(h=0;h<2;++h){var v=[];if(c[p]<0!=!!h){m[p]=u[h][p];for(var b=0;b<2;++b){m[g]=u[b^h][g];for(var x=0;x<2;++x)m[y]=u[x^b^h][y],v.push(m.slice())}for(var _=l?5:4,b=_;b===_;++b){if(0===v.length)continue t;v=M.positive(v,d[b])}for(b=0;b<v.length;++b)for(var y=v[b],w=function(t,e,n,r,i){for(var a=0;a<3;++a){for(var o=P,s=L,l=0;l<3;++l)s[l]=o[l]=n[l];s[3]=o[3]=1,s[a]+=1,E(s,s,e),s[3]<0&&(t[a]=1/0),--o[a],E(o,o,e),o[3]<0&&(t[a]=1/0);var u=(o[0]/o[3]-s[0]/s[3])*r,c=(o[1]/o[3]-s[1]/s[3])*i;t[a]=.25*Math.sqrt(u*u+c*c)}return t}(j,C,y,n,r),x=0;x<3;++x)f[x].lo=Math.min(f[x].lo,y[x]),f[x].hi=Math.max(f[x].hi,y[x]),x!==p&&(f[x].pixelsPerDataUnit=Math.min(f[x].pixelsPerDataUnit,Math.abs(w[x])))}}}return f};var k=t("extract-frustum-planes"),M=t("split-polygon"),T=t("./lib/cube.js"),A=t("gl-mat4/multiply"),S=t("gl-mat4/transpose"),E=t("gl-vec4/transformMat4"),O=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),C=new Float32Array(16);function r(t,e,n){this.lo=t,this.hi=e,this.pixelsPerDataUnit=n}var P=[0,0,0,1],L=[0,0,0,1];var R=[new r(1/0,-1/0,1/0),new r(1/0,-1/0,1/0),new r(1/0,-1/0,1/0)],j=[0,0,0]},{"./lib/cube.js":107,"extract-frustum-planes":98,"gl-mat4/multiply":141,"gl-mat4/transpose":152,"gl-vec4/transformMat4":184,"split-polygon":649}],113:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=t("typedarray-pool"),o=t("ndarray-ops"),s=t("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function u(t,e,n,r,i){this.gl=t,this.type=e,this.handle=n,this.length=r,this.usage=i}t=u.prototype;function c(t,e,n,r,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0)return t.bufferData(e,i,r),o;if(n<o+a)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,a,i),n}function f(t,e){for(var n=a.malloc(t.length,e),r=t.length,i=0;i<r;++i)n[i]=t[i];return n}t.bind=function(){this.gl.bindBuffer(this.type,this.handle)},t.unbind=function(){this.gl.bindBuffer(this.type,null)},t.dispose=function(){this.gl.deleteBuffer(this.handle)},t.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"===i(t)&&void 0!==t.shape){var n=t.dtype;l.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(n=gl.getExtension("OES_element_index_uint")&&"uint16"!==n?"uint32":"uint16"),n===t.dtype&&function(t,e){for(var n=1,r=e.length-1;0<=r;--r){if(e[r]!==n)return;n*=t[r]}return 1}(t.shape,t.stride)?0===t.offset&&t.data.length===t.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,t.data,e):this.length=c(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e):(r=a.malloc(t.size,n),n=s(r,t.shape),o.assign(n,t),this.length=c(this.gl,this.type,this.length,this.usage,e<0?r:r.subarray(0,t.size),e),a.free(r))}else if(Array.isArray(t)){var r=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(t,"uint16"):f(t,"float32");this.length=c(this.gl,this.type,this.length,this.usage,e<0?r:r.subarray(0,t.length),e),a.free(r)}else if("object"===i(t)&&"number"==typeof t.length)this.length=c(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(0<=e)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}},e.exports=function(t,e,n,r){if(n=n||t.ARRAY_BUFFER,r=r||t.DYNAMIC_DRAW,n!==t.ARRAY_BUFFER&&n!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(r!==t.DYNAMIC_DRAW&&r!==t.STATIC_DRAW&&r!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=t.createBuffer();return(r=new u(t,n,i,0,r)).update(e),r}},{ndarray:254,"ndarray-ops":251,"typedarray-pool":657}],114:[function(t,e,n){"use strict";e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],115:[function(t,e,n){"use strict";var r=t("./1.0/numbers");e.exports=function(t){return r[t]}},{"./1.0/numbers":114}],116:[function(t,e,n){"use strict";e.exports=function(t){var e=t.gl,n=a(e),r=o(e,[{buffer:n,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:e.FLOAT,size:3,offset:28,stride:40}]),i=s(e);i.attributes.position.location=0,i.attributes.color.location=1,i.attributes.offset.location=2;i=new l(e,n,r,i);return i.update(t),i};var a=t("gl-buffer"),o=t("gl-vao"),s=t("./shaders/index"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(t,e,n,r){this.gl=t,this.shader=r,this.buffer=e,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}t=l.prototype;function p(t,e){for(var n=0;n<3;++n)t[0][n]=Math.min(t[0][n],e[n]),t[1][n]=Math.max(t[1][n],e[n])}t.isOpaque=function(){return!this.hasAlpha},t.isTransparent=function(){return this.hasAlpha},t.drawTransparent=t.draw=function(t){var e=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=t.view||c,i=n.projection=t.projection||c;n.model=t.model||c,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var a=r[12],o=r[13],s=r[14],r=r[15],l=(t._ortho||!1?2:1)*this.pixelRatio*(i[3]*a+i[7]*o+i[11]*s+i[15]*r)/e.drawingBufferHeight;this.vao.bind();for(var u=0;u<3;++u)e.lineWidth(this.lineWidth[u]*this.pixelRatio),n.capSize=this.capSize[u]*l,this.lineCount[u]&&e.drawArrays(e.LINES,this.lineOffset[u],this.lineCount[u]);this.vao.unbind()};var u=function(){for(var t=new Array(3),e=0;e<3;++e){for(var n=[],r=1;r<=2;++r)for(var i=-1;i<=1;i+=2){var a=[0,0,0];a[(r+e)%3]=i,n.push(a)}t[e]=n}return t}();function g(t,e,n,r){for(var i=u[r],a=0;a<i.length;++a){var o=i[a];t.push(e[0],e[1],e[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return i.length}t.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],n=t.position,r=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),n&&r){var i=[],a=n.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;t:for(var l=0;l<a;++l){for(var u=n[l],c=0;c<3;++c)if(isNaN(u[c])||!isFinite(u[c]))continue t;var f,h=r[l],d=e[s];Array.isArray(d[0])&&(d=e[l]),3===d.length?d=[d[0],d[1],d[2],1]:4===d.length&&(d=[d[0],d[1],d[2],d[3]],!this.hasAlpha&&d[3]<1&&(this.hasAlpha=!0)),isNaN(h[0][s])||isNaN(h[1][s])||(h[0][s]<0&&((f=u.slice())[s]+=h[0][s],i.push(u[0],u[1],u[2],d[0],d[1],d[2],d[3],0,0,0,f[0],f[1],f[2],d[0],d[1],d[2],d[3],0,0,0),p(this.bounds,f),o+=2+g(i,f,d,s)),0<h[1][s]&&((f=u.slice())[s]+=h[1][s],i.push(u[0],u[1],u[2],d[0],d[1],d[2],d[3],0,0,0,f[0],f[1],f[2],d[0],d[1],d[2],d[3],0,0,0),p(this.bounds,f),o+=2+g(i,f,d,s)))}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(i)}},t.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":117,"gl-buffer":113,"gl-vao":178}],117:[function(t,e,n){"use strict";var r=t("glslify"),i=t("gl-shader"),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);e.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":165,glslify:194}],118:[function(t,e,n){"use strict";var o=t("gl-texture2d");e.exports=function(t,e,n,r){u||(u=t.FRAMEBUFFER_UNSUPPORTED,c=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,f=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var a=t.getExtension("WEBGL_draw_buffers");!d&&a&&function(t){var e=t.getParameter(a.MAX_COLOR_ATTACHMENTS_WEBGL);d=new Array(e+1);for(var n=0;n<=e;++n){for(var r=new Array(e),i=0;i<n;++i)r[i]=t.COLOR_ATTACHMENT0+i;for(i=n;i<e;++i)r[i]=t.NONE;d[n]=r}}(t);Array.isArray(e)&&(r=n,n=0|e[1],e=0|e[0]);if("number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var i=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||i<e||n<0||i<n)throw new Error("gl-fbo: Parameters are too large for FBO");var o=1;if("color"in(r=r||{})){if((o=Math.max(0|r.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(1<o){if(!a)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(o>t.getParameter(a.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+o+" draw buffers")}}var s=t.UNSIGNED_BYTE,l=t.getExtension("OES_texture_float");if(r.float&&0<o){if(!l)throw new Error("gl-fbo: Context does not support floating point textures");s=t.FLOAT}else r.preferFloat&&0<o&&l&&(s=t.FLOAT);i=!0;"depth"in r&&(i=!!r.depth);l=!1;"stencil"in r&&(l=!!r.stencil);return new b(t,e,n,s,o,i,l,a)};var u,c,f,h,d=null;function p(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function g(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function y(t){switch(t){case u:throw new Error("gl-fbo: Framebuffer unsupported");case c:throw new Error("gl-fbo: Framebuffer incomplete attachment");case f:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function m(t,e,n,r,i,a){if(!r)return null;r=o(t,e,n,i,r);return r.magFilter=t.NEAREST,r.minFilter=t.NEAREST,r.mipSamples=1,r.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,a,t.TEXTURE_2D,r.handle,0),r}function v(t,e,n,r,i){var a=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorage(t.RENDERBUFFER,r,e,n),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,a),a}function b(t,e,n,r,i,a,o,s){this.gl=t,this._shape=[0|e,0|n],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var l=0;l<i;++l)this.color[l]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=a,this._useStencil=o;var u=this,n=[0|e,0|n];Object.defineProperties(n,{0:{get:function(){return u._shape[0]},set:function(t){return u.width=t}},1:{get:function(){return u._shape[1]},set:function(t){return u.height=t}}}),this._shapeVector=n,function(t){var e=p(t.gl),n=t.gl,r=t.handle=n.createFramebuffer(),i=t._shape[0],a=t._shape[1],o=t.color.length,s=t._ext,l=t._useStencil,u=t._useDepth,c=t._colorType;n.bindFramebuffer(n.FRAMEBUFFER,r);for(var f=0;f<o;++f)t.color[f]=m(n,i,a,c,n.RGBA,n.COLOR_ATTACHMENT0+f);if(0===o?(t._color_rb=v(n,i,a,n.RGBA4,n.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(d[0])):1<o&&s.drawBuffersWEBGL(d[o]),(s=n.getExtension("WEBGL_depth_texture"))?l?t.depth=m(n,i,a,s.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):u&&(t.depth=m(n,i,a,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):u&&l?t._depth_rb=v(n,i,a,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):u?t._depth_rb=v(n,i,a,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):l&&(t._depth_rb=v(n,i,a,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT)),(l=n.checkFramebufferStatus(n.FRAMEBUFFER))!==n.FRAMEBUFFER_COMPLETE){t._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(n.deleteRenderbuffer(t._depth_rb),t._depth_rb=null);for(f=0;f<t.color.length;++f)t.color[f].dispose(),t.color[f]=null;t._color_rb&&(n.deleteRenderbuffer(t._color_rb),t._color_rb=null),g(n,e),y(l)}g(n,e)}(this)}e=b.prototype;function r(t,e,n){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==n){var r=t.gl,i=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(e<0||i<e||n<0||i<n)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=n;for(var e=p(r),a=0;a<t.color.length;++a)t.color[a].shape=t._shape;t._color_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,t._color_rb),r.renderbufferStorage(r.RENDERBUFFER,r.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX,t._shape[0],t._shape[1])),r.bindFramebuffer(r.FRAMEBUFFER,t.handle);n=r.checkFramebufferStatus(r.FRAMEBUFFER);n!==r.FRAMEBUFFER_COMPLETE&&(t.dispose(),g(r,e),y(n)),g(r,e)}}Object.defineProperties(e,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],t=0|t[1];return r(this,e,t),[e,t]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return r(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,r(this,this._shape[0],t),t},enumerable:!1}}),e.bind=function(){var t;this._destroyed||((t=this.gl).bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1]))},e.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":174}],119:[function(t,e,n){"use strict";var d=t("sprintf-js").sprintf,p=t("gl-constants/lookup"),g=t("glsl-shader-name"),y=t("add-line-numbers");e.exports=function(t,e,n){var r=g(e)||"of unknown name (see npm glsl-shader-name)",i="unknown type";void 0!==n&&(i=n===p.FRAGMENT_SHADER?"fragment":"vertex");for(var a=d("Error compiling %s shader %s:\n",i,r),r=d("%s%s",a,t),o=t.split("\n"),s={},l=0;l<o.length;l++){var u=o[l];if(""!==u&&"\0"!==u){var c=parseInt(u.split(":")[2]);if(isNaN(c))throw new Error(d("Could not parse error: %s",u));s[c]=u}}for(var f=y(e).split("\n"),l=0;l<f.length;l++){var h;(s[l+3]||s[l+2]||s[l+1])&&(h=f[l],a+=h+"\n",s[l+1]&&(h=(h=s[l+1]).substr(h.split(":",3).join(":").length+1).trim(),a+=d("^^^ %s\n\n",h)))}return{long:a.trim(),short:r.trim()}}},{"add-line-numbers":3,"gl-constants/lookup":115,"glsl-shader-name":185,"sprintf-js":120}],120:[function(t,e,n){"use strict";function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t){return function(t,e){var n,r,i,a,o,s,l,u,c=1,f=t.length,h="";for(r=0;r<f;r++)if("string"==typeof t[r])h+=t[r];else if("object"===d(t[r])){if((a=t[r]).keys)for(n=e[c],i=0;i<a.keys.length;i++){if(null==n)throw new Error(p('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[i],a.keys[i-1]));n=n[a.keys[i]]}else n=a.param_no?e[a.param_no]:e[c++];if(g.not_type.test(a.type)&&g.not_primitive.test(a.type)&&n instanceof Function&&(n=n()),g.numeric_arg.test(a.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(p("[sprintf] expecting number but found %T",n));switch(g.number.test(a.type)&&(l=0<=n),a.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,a.width?parseInt(a.width):0);break;case"e":n=a.precision?parseFloat(n).toExponential(a.precision):parseFloat(n).toExponential();break;case"f":n=a.precision?parseFloat(n).toFixed(a.precision):parseFloat(n);break;case"g":n=a.precision?String(Number(n.toPrecision(a.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=a.precision?n.substring(0,a.precision):n;break;case"t":n=String(!!n),n=a.precision?n.substring(0,a.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=a.precision?n.substring(0,a.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=a.precision?n.substring(0,a.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}g.json.test(a.type)?h+=n:(!g.number.test(a.type)||l&&!a.sign?u="":(u=l?"+":"-",n=n.toString().replace(g.sign,"")),o=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",s=a.width-(u+n).length,s=a.width&&0<s?o.repeat(s):"",h+=a.align?u+n+s:"0"===o?u+s+n:s+u+n)}return h}(function(t){if(l[t])return l[t];var e,n=t,r=[],i=0;for(;n;){if(null!==(e=g.text.exec(n)))r.push(e[0]);else if(null!==(e=g.modulo.exec(n)))r.push("%");else{if(null===(e=g.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){i|=1;var a=[],o=e[2],s=[];if(null===(s=g.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=g.key_access.exec(o)))a.push(s[1]);else{if(null===(s=g.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(s[1])}e[2]=a}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}n=n.substring(e[0].length)}return l[t]=r}(t),arguments)}function r(t,e){return p.apply(null,[t].concat(e||[]))}var g,l;g={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},l=Object.create(null),void 0!==n&&(n.sprintf=p,n.vsprintf=r),"undefined"!=typeof window&&(window.sprintf=p,window.vsprintf=r)},{}],121:[function(t,e,n){"use strict";var r=t("glslify"),i=t("gl-shader"),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(t){return i(t,a,o,null,l)},n.createPickShader=function(t){return i(t,a,s,null,l)}},{"gl-shader":165,glslify:194}],122:[function(t,e,n){"use strict";e.exports=function(t){var e=t.gl||t.scene&&t.scene.gl,n=p(e);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var r=g(e);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;for(var i=u(e),a=c(e,[{buffer:i,size:3,offset:0,stride:48},{buffer:i,size:3,offset:12,stride:48},{buffer:i,size:1,offset:24,stride:48},{buffer:i,size:1,offset:28,stride:48},{buffer:i,size:4,offset:32,stride:48}]),o=M(new Array(1024),[256,1,4]),s=0;s<1024;++s)o.data[s]=255;var l=f(e,o);l.wrap=e.REPEAT;l=new m(e,n,r,i,a,l);return l.update(t),l};var u=t("gl-buffer"),c=t("gl-vao"),f=t("gl-texture2d"),h=new Uint8Array(4),d=new Float32Array(h.buffer);var k=t("binary-search-bounds"),M=t("ndarray"),t=t("./lib/shaders"),p=t.createShader,g=t.createPickShader,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)e[0][n]=Math.max(t[0][n],e[0][n]),e[1][n]=Math.min(t[1][n],e[1][n]);return e}function y(t,e,n,r){this.arcLength=t,this.position=e,this.index=n,this.dataCoordinate=r}function m(t,e,n,r,i,a){this.gl=t,this.shader=e,this.pickShader=n,this.buffer=r,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}t=m.prototype;t.isTransparent=function(){return this.hasAlpha},t.isOpaque=function(){return!this.hasAlpha},t.pickSlots=1,t.setPickBase=function(t){this.pickId=t},t.drawTransparent=t.draw=function(t){var e,n,r;this.vertexCount&&(e=this.gl,n=this.shader,r=this.vao,n.bind(),n.uniforms={model:t.model||i,view:t.view||i,projection:t.projection||i,clipBounds:a(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(e.TRIANGLE_STRIP,this.vertexCount),r.unbind())},t.drawPick=function(t){var e,n,r;this.vertexCount&&(e=this.gl,n=this.pickShader,r=this.vao,n.bind(),n.uniforms={model:t.model||i,view:t.view||i,projection:t.projection||i,pickId:this.pickId,clipBounds:a(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(e.TRIANGLE_STRIP,this.vertexCount),r.unbind())},t.update=function(t){var e;this.dirty=!0;var n=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var r=[],i=[],a=[],o=0,s=0,l=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],u=t.position||t.positions;if(u){var c=t.color||t.colors||[0,0,0,1],f=t.lineWidth||1,h=!1;t:for(w=1;w<u.length;++w){var d,p,g,y=u[w-1],m=u[w];for(i.push(o),a.push(y.slice()),e=0;e<3;++e){if(isNaN(y[e])||isNaN(m[e])||!isFinite(y[e])||!isFinite(m[e])){if(!n&&0<r.length){for(var v=0;v<24;++v)r.push(r[r.length-12]);s+=2,h=!0}continue t}l[0][e]=Math.min(l[0][e],y[e],m[e]),l[1][e]=Math.max(l[1][e],y[e],m[e])}Array.isArray(c[0])?(d=w-1<c.length?c[w-1]:0<c.length?c[c.length-1]:[0,0,0,1],p=w<c.length?c[w]:0<c.length?c[c.length-1]:[0,0,0,1]):d=p=c,3===d.length&&(d=[d[0],d[1],d[2],1]),3===p.length&&(p=[p[0],p[1],p[2],1]),!this.hasAlpha&&d[3]<1&&(this.hasAlpha=!0),g=Array.isArray(f)?w-1<f.length?f[w-1]:0<f.length?f[f.length-1]:[0,0,0,1]:f;var b=o;if(o+=function(t,e){for(var n=0,r=0;r<3;++r){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}(y,m),h){for(e=0;e<2;++e)r.push(y[0],y[1],y[2],m[0],m[1],m[2],b,g,d[0],d[1],d[2],d[3]);s+=2,h=!1}r.push(y[0],y[1],y[2],m[0],m[1],m[2],b,g,d[0],d[1],d[2],d[3],y[0],y[1],y[2],m[0],m[1],m[2],b,-g,d[0],d[1],d[2],d[3],m[0],m[1],m[2],y[0],y[1],y[2],o,-g,p[0],p[1],p[2],p[3],m[0],m[1],m[2],y[0],y[1],y[2],o,g,p[0],p[1],p[2],p[3]),s+=4}}if(this.buffer.update(r),i.push(o),a.push(u[u.length-1].slice()),this.bounds=l,this.vertexCount=s,this.points=a,this.arcLength=i,"dashes"in t){var x=t.dashes.slice();for(x.unshift(0),w=1;w<x.length;++w)x[w]=x[w-1]+x[w];for(var _=M(new Array(1024),[256,1,4]),w=0;w<256;++w){for(e=0;e<4;++e)_.set(w,0,e,0);1&k.le(x,x[x.length-1]*w/255)?_.set(w,0,0,0):_.set(w,0,0,255)}this.texture.setPixels(_)}},t.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},t.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e,n,e=(r=t.value[0],e=t.value[1],n=t.value[2],h[t=0]=t,h[1]=n,h[2]=e,h[3]=r,d[0]),r=k.le(this.arcLength,e);if(r<0)return null;if(r===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r);for(var i=this.points[r],a=this.points[Math.min(r+1,this.points.length-1)],o=(e-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),s=1-o,l=[0,0,0],u=0;u<3;++u)l[u]=s*i[u]+o*a[u];r=Math.min(o<.5?r:r+1,this.points.length-1);return new y(e,l,r,this.points[r])}},{"./lib/shaders":121,"binary-search-bounds":25,"gl-buffer":113,"gl-texture2d":174,"gl-vao":178,ndarray:254}],123:[function(t,e,n){"use strict";e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],g=e[13],y=e[14],e=e[15];return t[0]=s*(h*e-d*y)-f*(l*e-u*y)+g*(l*d-u*h),t[1]=-(r*(h*e-d*y)-f*(i*e-a*y)+g*(i*d-a*h)),t[2]=r*(l*e-u*y)-s*(i*e-a*y)+g*(i*u-a*l),t[3]=-(r*(l*d-u*h)-s*(i*d-a*h)+f*(i*u-a*l)),t[4]=-(o*(h*e-d*y)-c*(l*e-u*y)+p*(l*d-u*h)),t[5]=n*(h*e-d*y)-c*(i*e-a*y)+p*(i*d-a*h),t[6]=-(n*(l*e-u*y)-o*(i*e-a*y)+p*(i*u-a*l)),t[7]=n*(l*d-u*h)-o*(i*d-a*h)+c*(i*u-a*l),t[8]=o*(f*e-d*g)-c*(s*e-u*g)+p*(s*d-u*f),t[9]=-(n*(f*e-d*g)-c*(r*e-a*g)+p*(r*d-a*f)),t[10]=n*(s*e-u*g)-o*(r*e-a*g)+p*(r*u-a*s),t[11]=-(n*(s*d-u*f)-o*(r*d-a*f)+c*(r*u-a*s)),t[12]=-(o*(f*y-h*g)-c*(s*y-l*g)+p*(s*h-l*f)),t[13]=n*(f*y-h*g)-c*(r*y-i*g)+p*(r*h-i*f),t[14]=-(n*(s*y-l*g)-o*(r*y-i*g)+p*(r*l-i*s)),t[15]=n*(s*h-l*f)-o*(r*h-i*f)+c*(r*l-i*s),t}},{}],124:[function(t,e,n){"use strict";e.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],125:[function(t,e,n){"use strict";e.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],126:[function(t,e,n){"use strict";e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],127:[function(t,e,n){"use strict";e.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11],d=t[12],p=t[13],g=t[14],t=t[15];return(e*o-n*a)*(f*t-h*g)-(e*s-r*a)*(c*t-h*p)+(e*l-i*a)*(c*g-f*p)+(n*s-r*o)*(u*t-h*d)-(n*l-i*o)*(u*g-f*d)+(r*l-i*s)*(u*p-c*d)}},{}],128:[function(t,e,n){"use strict";e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,e=r*s,n=i*o,r=i*s,i=i*l,o=a*o,s=a*s,l=a*l;return t[0]=1-e-i,t[1]=c+l,t[2]=n-s,t[3]=0,t[4]=c-l,t[5]=1-u-i,t[6]=r+o,t[7]=0,t[8]=n+s,t[9]=r-o,t[10]=1-u-e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],129:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=n[0],i=n[1],a=n[2],o=Math.sqrt(r*r+i*i+a*a);if(Math.abs(o)<1e-6)return null;return r*=o=1/o,i*=o,a*=o,n=Math.sin(e),o=Math.cos(e),e=1-o,t[0]=r*r*e+o,t[1]=i*r*e+a*n,t[2]=a*r*e-i*n,t[3]=0,t[4]=r*i*e-a*n,t[5]=i*i*e+o,t[6]=a*i*e+r*n,t[7]=0,t[8]=r*a*e+i*n,t[9]=i*a*e-r*n,t[10]=a*a*e+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],130:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,u=a+a,c=r*s,f=r*l,e=r*u,r=i*l,i=i*u,a=a*u,s=o*s,l=o*l,u=o*u;return t[0]=1-(r+a),t[1]=f+u,t[2]=e-l,t[3]=0,t[4]=f-u,t[5]=1-(c+a),t[6]=i+s,t[7]=0,t[8]=e+l,t[9]=i-s,t[10]=1-(c+r),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},{}],131:[function(t,e,n){"use strict";e.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],132:[function(t,e,n){"use strict";e.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},{}],133:[function(t,e,n){"use strict";e.exports=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],134:[function(t,e,n){"use strict";e.exports=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],135:[function(t,e,n){"use strict";e.exports=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],136:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,a,o){var s=1/(n-e),l=1/(i-r),u=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t}},{}],137:[function(t,e,n){"use strict";e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],138:[function(t,e,n){"use strict";e.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":123,"./clone":124,"./copy":125,"./create":126,"./determinant":127,"./fromQuat":128,"./fromRotation":129,"./fromRotationTranslation":130,"./fromScaling":131,"./fromTranslation":132,"./fromXRotation":133,"./fromYRotation":134,"./fromZRotation":135,"./frustum":136,"./identity":137,"./invert":139,"./lookAt":140,"./multiply":141,"./ortho":142,"./perspective":143,"./perspectiveFromFieldOfView":144,"./rotate":145,"./rotateX":146,"./rotateY":147,"./rotateZ":148,"./scale":149,"./str":150,"./translate":151,"./transpose":152}],139:[function(t,e,n){"use strict";e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],g=e[13],y=e[14],m=e[15],v=n*s-r*o,b=n*l-i*o,x=n*u-a*o,_=r*l-i*s,w=r*u-a*s,k=i*u-a*l,M=c*g-f*p,T=c*y-h*p,A=c*m-d*p,S=f*y-h*g,E=f*m-d*g,O=h*m-d*y,e=v*O-b*E+x*S+_*A-w*T+k*M;return e?(e=1/e,t[0]=(s*O-l*E+u*S)*e,t[1]=(i*E-r*O-a*S)*e,t[2]=(g*k-y*w+m*_)*e,t[3]=(h*w-f*k-d*_)*e,t[4]=(l*A-o*O-u*T)*e,t[5]=(n*O-i*A+a*T)*e,t[6]=(y*x-p*k-m*b)*e,t[7]=(c*k-h*x+d*b)*e,t[8]=(o*E-s*A+u*M)*e,t[9]=(r*A-n*E-a*M)*e,t[10]=(p*w-g*x+m*v)*e,t[11]=(f*x-c*w-d*v)*e,t[12]=(s*T-o*S-l*M)*e,t[13]=(n*S-r*T+i*M)*e,t[14]=(g*b-p*_-y*v)*e,t[15]=(c*_-f*b+h*v)*e,t):null}},{}],140:[function(t,e,n){"use strict";var p=t("./identity");e.exports=function(t,e,n,r){var i,a=e[0],o=e[1],s=e[2],l=r[0],u=r[1],c=r[2],f=n[0],h=n[1],d=n[2];if(Math.abs(a-f)<1e-6&&Math.abs(o-h)<1e-6&&Math.abs(s-d)<1e-6)return p(t);i=a-f,e=o-h,r=s-d,n=1/Math.sqrt(i*i+e*e+r*r),f=u*(r*=n)-c*(e*=n),h=c*(i*=n)-l*r,d=l*e-u*i,(n=Math.sqrt(f*f+h*h+d*d))?(f*=n=1/n,h*=n,d*=n):d=h=f=0;c=e*d-r*h,l=r*f-i*d,u=i*h-e*f,(n=Math.sqrt(c*c+l*l+u*u))?(c*=n=1/n,l*=n,u*=n):u=l=c=0;return t[0]=f,t[1]=c,t[2]=i,t[3]=0,t[4]=h,t[5]=l,t[6]=e,t[7]=0,t[8]=d,t[9]=u,t[10]=r,t[11]=0,t[12]=-(f*a+h*o+d*s),t[13]=-(c*a+l*o+u*s),t[14]=-(i*a+e*o+r*s),t[15]=1,t}},{"./identity":137}],141:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],g=e[12],y=e[13],m=e[14],v=e[15],b=n[0],x=n[1],_=n[2],e=n[3];return t[0]=b*r+x*s+_*f+e*g,t[1]=b*i+x*l+_*h+e*y,t[2]=b*a+x*u+_*d+e*m,t[3]=b*o+x*c+_*p+e*v,b=n[4],x=n[5],_=n[6],e=n[7],t[4]=b*r+x*s+_*f+e*g,t[5]=b*i+x*l+_*h+e*y,t[6]=b*a+x*u+_*d+e*m,t[7]=b*o+x*c+_*p+e*v,b=n[8],x=n[9],_=n[10],e=n[11],t[8]=b*r+x*s+_*f+e*g,t[9]=b*i+x*l+_*h+e*y,t[10]=b*a+x*u+_*d+e*m,t[11]=b*o+x*c+_*p+e*v,b=n[12],x=n[13],_=n[14],e=n[15],t[12]=b*r+x*s+_*f+e*g,t[13]=b*i+x*l+_*h+e*y,t[14]=b*a+x*u+_*d+e*m,t[15]=b*o+x*c+_*p+e*v,t}},{}],142:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(o+a)*u,t[15]=1,t}},{}],143:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){var a=1/Math.tan(e/2),e=1/(r-i);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*e,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*e,t[15]=0,t}},{}],144:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),e=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=-(o-s)*l*.5,t[9]=(i-a)*e*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}},{}],145:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i,a,o,s,l,u,c,f,h,d,p,g,y,m,v,b,x,_,w,k=r[0],M=r[1],T=r[2],A=Math.sqrt(k*k+M*M+T*T);if(Math.abs(A)<1e-6)return null;k*=A=1/A,M*=A,T*=A,_=Math.sin(n),w=Math.cos(n),i=1-w,a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],h=e[7],d=e[8],p=e[9],g=e[10],y=e[11],m=k*k*i+w,v=M*k*i+T*_,b=T*k*i-M*_,x=k*M*i-T*_,r=M*M*i+w,A=T*M*i+k*_,n=k*T*i+M*_,_=M*T*i-k*_,w=T*T*i+w,t[0]=a*m+u*v+d*b,t[1]=o*m+c*v+p*b,t[2]=s*m+f*v+g*b,t[3]=l*m+h*v+y*b,t[4]=a*x+u*r+d*A,t[5]=o*x+c*r+p*A,t[6]=s*x+f*r+g*A,t[7]=l*x+h*r+y*A,t[8]=a*n+u*_+d*w,t[9]=o*n+c*_+p*w,t[10]=s*n+f*_+g*w,t[11]=l*n+h*_+y*w,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},{}],146:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],n=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*i+u*r,t[5]=o*i+c*r,t[6]=s*i+f*r,t[7]=l*i+n*r,t[8]=u*i-a*r,t[9]=c*i-o*r,t[10]=f*i-s*r,t[11]=n*i-l*r,t}},{}],147:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],f=e[10],n=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i-u*r,t[1]=o*i-c*r,t[2]=s*i-f*r,t[3]=l*i-n*r,t[8]=a*r+u*i,t[9]=o*r+c*i,t[10]=s*r+f*i,t[11]=l*r+n*i,t}},{}],148:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],n=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i+u*r,t[1]=o*i+c*r,t[2]=s*i+f*r,t[3]=l*i+n*r,t[4]=u*i-a*r,t[5]=c*i-o*r,t[6]=f*i-s*r,t[7]=n*i-l*r,t}},{}],149:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=n[0],i=n[1],n=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],150:[function(t,e,n){"use strict";e.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},{}],151:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i,a,o,s,l,u,c,f,h,d,p=n[0],g=n[1],y=n[2];e===t?(t[12]=e[0]*p+e[4]*g+e[8]*y+e[12],t[13]=e[1]*p+e[5]*g+e[9]*y+e[13],t[14]=e[2]*p+e[6]*g+e[10]*y+e[14],t[15]=e[3]*p+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],d=e[10],n=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=f,t[9]=h,t[10]=d,t[11]=n,t[12]=r*p+s*g+f*y+e[12],t[13]=i*p+l*g+h*y+e[13],t[14]=a*p+u*g+d*y+e[14],t[15]=o*p+c*g+n*y+e[15]);return t}},{}],152:[function(t,e,n){"use strict";e.exports=function(t,e){{var n,r,i,a,o,s;t===e?(n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15])}return t}},{}],153:[function(t,e,n){"use strict";var p=t("barycentric"),g=t("polytope-closest-point/lib/closest_point_2d.js");function y(t,e){for(var n=[0,0,0,0],r=0;r<4;++r)for(var i=0;i<4;++i)n[i]+=t[4*r+i]*e[r];return n}e.exports=function(t,e,n,r,i,a){if(1===t.length)return[0,t[0].slice()];for(var o=new Array(t.length),s=0;s<t.length;++s)o[s]=function(t,e,n,r,i){for(var a=y(r,y(n,y(e,[t[0],t[1],t[2],1]))),o=0;o<3;++o)a[o]/=a[3];return[.5*i[0]*(1+a[0]),.5*i[1]*(1-a[1])]}(t[s],n,r,i,a);for(var l=0,u=1/0,s=0;s<o.length;++s){for(var c=0,f=0;f<2;++f)c+=Math.pow(o[s][f]-e[f],2);c<u&&(u=c,l=s)}for(var h=function(t,e){{if(2===t.length){for(var n=0,r=0,i=0;i<2;++i)n+=Math.pow(e[i]-t[0][i],2),r+=Math.pow(e[i]-t[1][i],2);return n=Math.sqrt(n),r=Math.sqrt(r),n+r<1e-6?[1,0]:[r/(n+r),n/(r+n)]}if(3===t.length){var a=[0,0];return g(t[0],t[1],t[2],e,a),p(t,a)}}return[]}(o,e),d=0,s=0;s<3;++s){if(h[s]<-.001||1.0001<h[s])return null;d+=h[s]}if(.001<Math.abs(d-1))return null;return[l,function(t,e){for(var n=[0,0,0],r=0;r<t.length;++r)for(var i=t[r],a=e[r],o=0;o<3;++o)n[o]+=a*i[o];return n}(t,h),h]}},{barycentric:5,"polytope-closest-point/lib/closest_point_2d.js":618}],154:[function(t,e,n){"use strict";var r=t("glslify"),i=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),f=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),t=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),r=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);n.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:c,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:h,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:t,fragment:r,attributes:[{name:"position",type:"vec3"}]}},{glslify:194}],155:[function(t,e,n){"use strict";var S=t("gl-shader"),E=t("gl-buffer"),O=t("gl-vao"),G=t("gl-texture2d"),Y=t("normals"),h=t("gl-mat4/multiply"),d=t("gl-mat4/invert"),X=t("ndarray"),W=t("colormap"),v=t("simplicial-complex-contour"),b=t("typedarray-pool"),r=t("./lib/shaders"),p=t("./lib/closest-point"),C=r.meshShader,P=r.wireShader,L=r.pointShader,R=r.pickShader,j=r.pointPickShader,N=r.contourShader,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function z(t,e,n,r,i,a,o,s,l,u,c,f,h,d,p,g,y,m,v,b,x,_,w,k,M,T,A){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=i,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=c,this.triangleNormals=h,this.triangleUVs=f,this.triangleIds=u,this.triangleVAO=d,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=y,this.edgeUVs=m,this.edgeIds=g,this.edgeVAO=v,this.edgeCount=0,this.pointPositions=b,this.pointColors=_,this.pointUVs=w,this.pointSizes=k,this.pointIds=x,this.pointVAO=M,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=T,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=D,this._view=D,this._projection=D,this._resolution=[1,1]}r=z.prototype;function Z(t,e){if(!e)return 1;if(!e.length)return 1;for(var n=0;n<e.length;++n){if(e.length<2)return 1;if(e[n][0]===t)return e[n][1];if(e[n][0]>t&&0<n){var r=(e[n][0]-t)/(e[n][0]-e[n-1][0]);return e[n][1]*(1-r)+r*e[n-1][1]}}return 1}r.isOpaque=function(){return!this.hasAlpha},r.isTransparent=function(){return this.hasAlpha},r.pickSlots=1,r.setPickBase=function(t){this.pickId=t},r.highlight=function(t){if(t&&this.contourEnable){for(var t=v(this.cells,this.intensity,t.intensity),e=t.cells,n=t.vertexIds,r=t.vertexWeights,i=e.length,a=b.mallocFloat32(6*i),o=0,s=0;s<i;++s)for(var l=e[s],u=0;u<2;++u){var c=l[0];2===l.length&&(c=l[u]);for(var f=n[c][0],h=n[c][1],d=r[c],p=1-d,g=this.positions[f],y=this.positions[h],m=0;m<3;++m)a[o++]=d*g[m]+p*y[m]}this.contourCount=o/3|0,this.contourPositions.update(a.subarray(0,o)),b.free(a)}else this.contourCount=0},r.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=G(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t,e){for(var n=W({colormap:t,nshades:256,format:"rgba"}),r=new Uint8Array(1024),i=0;i<256;++i){for(var a=n[i],o=0;o<3;++o)r[4*i+o]=a[o];r[4*i+3]=e?255*Z(i/255,e):255*a[3]}return X(r,[256,256,4],[4,0,1])}(t.colormap,this.opacityscale)),this.texture.generateMipmap());var n=t.cells,r=t.positions;if(r&&n){var i=[],a=[],o=[],s=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],g=[],y=[],m=[];this.cells=n,this.positions=r;var v=t.vertexNormals,b=t.cellNormals,x=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,e=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!b&&(b=Y.faceNormals(n,r,e)),b||v||(v=Y.vertexNormals(n,r,x));var _=t.vertexColors,w=t.cellColors,k=t.meshColor||[1,1,1,1],M=t.vertexUVs,T=t.vertexIntensity,A=t.cellUVs,S=t.cellIntensity,E=1/0,O=-1/0;if(!M&&!A)if(T)if(t.vertexIntensityBounds)E=+t.vertexIntensityBounds[0],O=+t.vertexIntensityBounds[1];else for(var C=0;C<T.length;++C)var P=T[C],E=Math.min(E,P),O=Math.max(O,P);else if(S)if(t.cellIntensityBounds)E=+t.cellIntensityBounds[0],O=+t.cellIntensityBounds[1];else for(C=0;C<S.length;++C){P=S[C];E=Math.min(E,P),O=Math.max(O,P)}else for(C=0;C<r.length;++C){P=r[C][2];E=Math.min(E,P),O=Math.max(O,P)}this.intensity=T||S||function(t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=t[r][2];return n}(r),this.pickVertex=!(S||w);var L=t.pointSizes,R=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(C=0;C<r.length;++C)for(var j=r[C],N=0;N<3;++N)!isNaN(j[N])&&isFinite(j[N])&&(this.bounds[0][N]=Math.min(this.bounds[0][N],j[N]),this.bounds[1][N]=Math.max(this.bounds[1][N],j[N]));var D=0,z=0,I=0;t:for(C=0;C<n.length;++C){var F=n[C];switch(F.length){case 1:for(j=r[U=F[0]],N=0;N<3;++N)if(isNaN(j[N])||!isFinite(j[N]))continue t;d.push(j[0],j[1],j[2]),V=_?_[U]:w?w[C]:k,this.opacityscale&&T?a.push(V[0],V[1],V[2],this.opacity*Z((T[U]-E)/(O-E),this.opacityscale)):3===V.length?p.push(V[0],V[1],V[2],this.opacity):(p.push(V[0],V[1],V[2],V[3]*this.opacity),V[3]<1&&(this.hasAlpha=!0)),H=M?M[U]:T?[(T[U]-E)/(O-E),0]:A?A[C]:S?[(S[C]-E)/(O-E),0]:[(j[2]-E)/(O-E),0],g.push(H[0],H[1]),L?y.push(L[U]):y.push(R),m.push(C),I+=1;break;case 2:for(N=0;N<2;++N)for(var j=r[U=F[N]],B=0;B<3;++B)if(isNaN(j[B])||!isFinite(j[B]))continue t;for(N=0;N<2;++N){j=r[U=F[N]];u.push(j[0],j[1],j[2]),V=_?_[U]:w?w[C]:k,this.opacityscale&&T?a.push(V[0],V[1],V[2],this.opacity*Z((T[U]-E)/(O-E),this.opacityscale)):3===V.length?c.push(V[0],V[1],V[2],this.opacity):(c.push(V[0],V[1],V[2],V[3]*this.opacity),V[3]<1&&(this.hasAlpha=!0)),H=M?M[U]:T?[(T[U]-E)/(O-E),0]:A?A[C]:S?[(S[C]-E)/(O-E),0]:[(j[2]-E)/(O-E),0],f.push(H[0],H[1]),h.push(C)}z+=1;break;case 3:for(N=0;N<3;++N)for(j=r[U=F[N]],B=0;B<3;++B)if(isNaN(j[B])||!isFinite(j[B]))continue t;for(N=0;N<3;++N){var U,V,H,q,j=r[U=F[2-N]];i.push(j[0],j[1],j[2]),(V=_?_[U]:w?w[C]:k)?this.opacityscale&&T?a.push(V[0],V[1],V[2],this.opacity*Z((T[U]-E)/(O-E),this.opacityscale)):3===V.length?a.push(V[0],V[1],V[2],this.opacity):(a.push(V[0],V[1],V[2],V[3]*this.opacity),V[3]<1&&(this.hasAlpha=!0)):a.push(.5,.5,.5,1),H=M?M[U]:T?[(T[U]-E)/(O-E),0]:A?A[C]:S?[(S[C]-E)/(O-E),0]:[(j[2]-E)/(O-E),0],s.push(H[0],H[1]),q=v?v[U]:b[C],o.push(q[0],q[1],q[2]),l.push(C)}D+=1}}this.pointCount=I,this.edgeCount=z,this.triangleCount=D,this.pointPositions.update(d),this.pointColors.update(p),this.pointUVs.update(g),this.pointSizes.update(y),this.pointIds.update(new Uint32Array(m)),this.edgePositions.update(u),this.edgeColors.update(c),this.edgeUVs.update(f),this.edgeIds.update(new Uint32Array(h)),this.trianglePositions.update(i),this.triangleColors.update(a),this.triangleUVs.update(s),this.triangleNormals.update(o),this.triangleIds.update(new Uint32Array(l))}},r.drawTransparent=r.draw=function(t){t=t||{};for(var e=this.gl,n=t.model||D,r=t.view||D,t=t.projection||D,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)i[0][a]=Math.max(i[0][a],this.clipBounds[0][a]),i[1][a]=Math.min(i[1][a],this.clipBounds[1][a]);var o={model:n,view:r,projection:t,inverseModel:D.slice(),clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};o.inverseModel=d(o.inverseModel,o.model),e.disable(e.CULL_FACE),this.texture.bind(0);var s=new Array(16);h(s,o.view,o.model),h(s,o.projection,s),d(s,s);for(a=0;a<3;++a)o.eyePosition[a]=s[12+a]/s[15];for(var l=s[15],a=0;a<3;++a)l+=this.lightPosition[a]*s[4*a+3];for(var u,a=0;a<3;++a){for(var c=s[12+a],f=0;f<3;++f)c+=s[4*f+a]*this.lightPosition[f];o.lightPosition[a]=c/l}0<this.triangleCount&&((u=this.triShader).bind(),u.uniforms=o,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),0<this.edgeCount&&0<this.lineWidth&&((u=this.lineShader).bind(),u.uniforms=o,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),0<this.pointCount&&((u=this.pointShader).bind(),u.uniforms=o,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&((u=this.contourShader).bind(),u.uniforms=o,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind())},r.drawPick=function(t){t=t||{};for(var e=this.gl,n=t.model||D,r=t.view||D,t=t.projection||D,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)i[0][a]=Math.max(i[0][a],this.clipBounds[0][a]),i[1][a]=Math.min(i[1][a],this.clipBounds[1][a]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(t),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];r={model:n,view:r,projection:t,clipBounds:i,pickId:this.pickId/255},t=this.pickShader;t.bind(),t.uniforms=r,0<this.triangleCount&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),0<this.edgeCount&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),0<this.pointCount&&((t=this.pointPickShader).bind(),t.uniforms=r,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind())},r.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],n=this.cells[e],r=this.positions,i=new Array(n.length),a=0;a<n.length;++a)i[a]=r[n[a]];var o=t.coord[0],s=t.coord[1];if(!this.pickVertex){var l=this.positions[n[0]],u=this.positions[n[1]],t=this.positions[n[2]],t=[(l[0]+u[0]+t[0])/3,(l[1]+u[1]+t[1])/3,(l[2]+u[2]+t[2])/3];return{_cellCenter:!0,position:[o,s],index:e,cell:n,cellId:e,intensity:this.intensity[e],dataCoordinate:t}}s=p(i,[o*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!s)return null;for(var c=s[2],f=0,a=0;a<n.length;++a)f+=c[a]*this.intensity[n[a]];return{position:s[1],index:n[s[0]],cell:n,cellId:e,intensity:f,dataCoordinate:this.positions[n[s[0]]]}},r.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},e.exports=function(t,e){if(1===arguments.length&&(t=(e=t).gl),!(t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var n=((_=S(_=t,C.vertex,C.fragment)).attributes.position.location=0,_.attributes.color.location=2,_.attributes.uv.location=3,_.attributes.normal.location=4,_),r=((w=S(w=t,P.vertex,P.fragment)).attributes.position.location=0,w.attributes.color.location=2,w.attributes.uv.location=3,w),i=((k=S(k=t,L.vertex,L.fragment)).attributes.position.location=0,k.attributes.color.location=2,k.attributes.uv.location=3,k.attributes.pointSize.location=4,k),a=((M=S(M=t,R.vertex,R.fragment)).attributes.position.location=0,M.attributes.id.location=1,M),o=((T=S(T=t,j.vertex,j.fragment)).attributes.position.location=0,T.attributes.id.location=1,T.attributes.pointSize.location=4,T),s=((A=S(A=t,N.vertex,N.fragment)).attributes.position.location=0,A),l=G(t,X(new Uint8Array([255,255,255,255]),[1,1,4]));l.generateMipmap(),l.minFilter=t.LINEAR_MIPMAP_LINEAR,l.magFilter=t.LINEAR;var u=E(t),c=E(t),f=E(t),h=E(t),d=E(t),p=O(t,[{buffer:u,type:t.FLOAT,size:3},{buffer:d,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:c,type:t.FLOAT,size:4},{buffer:f,type:t.FLOAT,size:2},{buffer:h,type:t.FLOAT,size:3}]),g=E(t),y=E(t),m=E(t),v=E(t),b=O(t,[{buffer:g,type:t.FLOAT,size:3},{buffer:v,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:y,type:t.FLOAT,size:4},{buffer:m,type:t.FLOAT,size:2}]),x=E(t),_=E(t),w=E(t),k=E(t),M=E(t),T=O(t,[{buffer:x,type:t.FLOAT,size:3},{buffer:M,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:t.FLOAT,size:4},{buffer:w,type:t.FLOAT,size:2},{buffer:k,type:t.FLOAT,size:1}]),A=E(t);return(t=new z(t,l,n,r,i,a,o,s,u,d,c,f,h,p,g,v,y,m,b,x,M,_,w,k,T,A,O(t,[{buffer:A,type:t.FLOAT,size:3}]))).update(e),t}},{"./lib/closest-point":153,"./lib/shaders":154,colormap:49,"gl-buffer":113,"gl-mat4/invert":139,"gl-mat4/multiply":141,"gl-shader":165,"gl-texture2d":174,"gl-vao":178,ndarray:254,normals:256,"simplicial-complex-contour":639,"typedarray-pool":657}],156:[function(t,e,n){"use strict";e.exports=function(v,t){v=v||document.body,t=t||{};var e=[.01,1/0];"distanceLimits"in t&&(e[0]=t.distanceLimits[0],e[1]=t.distanceLimits[1]);"zoomMin"in t&&(e[0]=t.zoomMin);"zoomMax"in t&&(e[1]=t.zoomMax);var b=r({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:e}),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,s=v.clientWidth,l=v.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:b,element:v,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:b.modes,_ortho:t._ortho||t.projection&&"orthographic"===t.projection.type||!1,tick:function(){var t=w(),e=this.delay,n=t-2*e;b.idle(t-e),b.recalcMatrix(n),b.flush(t-(100+2*e));for(var r=!0,i=b.computedMatrix,a=0;a<16;++a)r=r&&o[a]===i[a],o[a]=i[a];e=v.clientWidth===s&&v.clientHeight===l;return s=v.clientWidth,l=v.clientHeight,r?!e:(x=Math.exp(b.computedRadius[0]),!0)},lookAt:function(t,e,n){b.lookAt(b.lastT(),t,e,n)},rotate:function(t,e,n){b.rotate(b.lastT(),t,e,n)},pan:function(t,e,n){b.pan(b.lastT(),t,e,n)},translate:function(t,e,n){b.translate(b.lastT(),t,e,n)}};return Object.defineProperties(_,{matrix:{get:function(){return b.computedMatrix},set:function(t){return b.setMatrix(b.lastT(),t),b.computedMatrix},enumerable:!0},mode:{get:function(){return b.getMode()},set:function(t){var e=b.computedUp.slice(),n=b.computedEye.slice(),r=b.computedCenter.slice();return b.setMode(t),"turntable"===t&&(t=w(),b._active.lookAt(t,n,r,e),b._active.lookAt(t+500,n,r,[0,0,1]),b._active.flush(t)),b.getMode()},enumerable:!0},center:{get:function(){return b.computedCenter},set:function(t){return b.lookAt(b.lastT(),null,t),b.computedCenter},enumerable:!0},eye:{get:function(){return b.computedEye},set:function(t){return b.lookAt(b.lastT(),t),b.computedEye},enumerable:!0},up:{get:function(){return b.computedUp},set:function(t){return b.lookAt(b.lastT(),null,null,t),b.computedUp},enumerable:!0},distance:{get:function(){return x},set:function(t){return b.setDistance(b.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return b.getDistanceLimits(e)},set:function(t){return b.setDistanceLimits(t),t},enumerable:!0}}),v.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function n(t,e,n,r){var i=_.keyBindingMode;if(!1!==i){var a="rotate"===i,o="pan"===i,s="zoom"===i,l=!!r.control,u=!!r.alt,c=!!r.shift,f=!!(1&t),h=!!(2&t),d=!!(4&t),p=1/v.clientHeight,g=p*(e-_._lastX),y=p*(n-_._lastY),m=_.flipX?1:-1,i=_.flipY?1:-1,t=Math.PI*_.rotateSpeed,p=w();return-1!==_._lastX&&-1!==_._lastY&&((a&&f&&!l&&!u&&!c||f&&!l&&!u&&c)&&b.rotate(p,m*t*g,-i*t*y,0),(o&&f&&!l&&!u&&!c||h||f&&l&&!u&&!c)&&b.pan(p,-_.translateSpeed*g*x,_.translateSpeed*y*x,0),(s&&f&&!l&&!u&&!c||d||f&&!l&&u&&!c)&&(y=-_.zoomSpeed*y/window.innerHeight*(p-b.lastT())*100,b.pan(p,0,0,x*(Math.exp(y)-1)))),_._lastX=e,_._lastY=n,_._lastMods=r,!0}}_.mouseListener=i(v,n),v.addEventListener("touchstart",function(t){t=u(t.changedTouches[0],v);n(0,t[0],t[1],_._lastMods),n(1,t[0],t[1],_._lastMods)},!!c&&{passive:!0}),v.addEventListener("touchmove",function(t){var e=u(t.changedTouches[0],v);n(1,e[0],e[1],_._lastMods),t.preventDefault()},!!c&&{passive:!1}),v.addEventListener("touchend",function(t){n(0,_._lastX,_._lastY,_._lastMods)},!!c&&{passive:!0}),_.wheelListener=a(v,function(t,e){var n,r,i;!1!==_.keyBindingMode&&_.enableWheel&&(n=_.flipX?1:-1,r=_.flipY?1:-1,i=w(),Math.abs(t)>Math.abs(e)?b.rotate(i,0,0,-t*n*Math.PI*_.rotateSpeed/window.innerWidth):_._ortho||(e=-_.zoomSpeed*r*e/window.innerHeight*(i-b.lastT())/20,b.pan(i,0,0,x*(Math.exp(e)-1))))},!0)},_.enableMouseListeners(),_};var w=t("right-now"),r=t("3d-view"),i=t("mouse-change"),a=t("mouse-wheel"),u=t("mouse-event-offset"),c=t("has-passive-events")},{"3d-view":1,"has-passive-events":196,"mouse-change":246,"mouse-event-offset":247,"mouse-wheel":249,"right-now":627}],157:[function(t,e,n){"use strict";var r=t("glslify"),i=t("gl-shader"),a=r(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);e.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec2"}])}},{"gl-shader":165,glslify:194}],158:[function(t,e,n){"use strict";var u=t("./camera.js"),c=t("gl-axes3d"),D=t("gl-axes3d/properties"),f=t("gl-spikes3d"),h=t("gl-select-static"),d=t("gl-fbo"),z=t("a-big-triangle"),p=t("mouse-change"),I=t("gl-mat4/perspective"),F=t("gl-mat4/ortho"),g=t("./lib/shader"),B=t("is-mobile")({tablet:!0,featureDetect:!0});function U(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function V(t){return"boolean"!=typeof t||t}e.exports={createScene:function(t){(t=t||{}).camera=t.camera||{};var i=t.canvas;i||(i=document.createElement("canvas"),(t.container||document.body).appendChild(i));var y=t.gl;y||(t.glOptions&&(B=!!t.glOptions.preserveDrawingBuffer),y=function(t,e){var n=null;try{n=(n=t.getContext("webgl",e))||t.getContext("experimental-webgl",e)}catch(t){return null}return n}(i,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:B}));if(!y)throw new Error("webgl not supported");var e=t.bounds||[[-10,-10,-10],[10,10,10]],m=new U,v=d(y,y.drawingBufferWidth,y.drawingBufferHeight,{preferFloat:!B}),b=g(y),x=t.cameraObject&&!0===t.cameraObject._ortho||t.camera.projection&&"orthographic"===t.camera.projection.type||!1,n={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:x},r=t.axes||{},_=c(y,r);_.enable=!r.disable;var a=t.spikes||{},w=f(y,a),k=[],M=[],s=[],T=[],A=!0,S=!0,r=new Array(16),a=new Array(16),E={view:null,projection:r,model:a,_ortho:!1},S=!0,O=[y.drawingBufferWidth,y.drawingBufferHeight],n=t.cameraObject||u(i,n),C={gl:y,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:i,selection:m,camera:n,axes:_,axesPixels:null,spikes:w,bounds:e,objects:k,shape:O,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:V(t.autoResize),autoBounds:V(t.autoBounds),autoScale:!!t.autoScale,autoCenter:V(t.autoCenter),clipToBounds:V(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:E,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(t){this.aspect[0]=t.x,this.aspect[1]=t.y,this.aspect[2]=t.z,S=!0},setBounds:function(t,e){this.bounds[0][t]=e.min,this.bounds[1][t]=e.max},setClearColor:function(t){this.clearColor=t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},P=[y.drawingBufferWidth/C.pixelRatio|0,y.drawingBufferHeight/C.pixelRatio|0];function L(){var t,e,n,r;C._stopped||C.autoResize&&(e=t=1,e=(r=i.parentNode)&&r!==document.body?(t=r.clientWidth,r.clientHeight):(t=window.innerWidth,window.innerHeight),n=0|Math.ceil(t*C.pixelRatio),r=0|Math.ceil(e*C.pixelRatio),n===i.width&&r===i.height||(i.width=n,i.height=r,(r=i.style).position=r.position||"absolute",r.left="0px",r.top="0px",r.width=t+"px",r.height=e+"px",A=!0))}C.autoResize&&L();function o(){for(var t=k.length,e=T.length,n=0;n<e;++n)s[n]=0;t:for(n=0;n<t;++n){var r=k[n],i=r.pickSlots;if(i){for(var a=0;a<e;++a)if(s[a]+i<255){M[n]=a,r.setPickBase(s[a]+1),s[a]+=i;continue t}var o=h(y,O);M[n]=e,T.push(o),s.push(i),r.setPickBase(1),e+=1}else M[n]=-1}for(;0<e&&0===s[e-1];)s.pop(),T.pop().dispose()}function R(){if(C.contextLost)return!0;y.isContextLost()&&(C.contextLost=!0,C.mouseListener.enabled=!1,C.selection.object=null,C.oncontextloss&&C.oncontextloss())}window.addEventListener("resize",L),C.update=function(t){C._stopped||(S=A=!0)},C.add=function(t){C._stopped||(t.axes=_,k.push(t),M.push(-1),S=A=!0,o())},C.remove=function(t){C._stopped||((t=k.indexOf(t))<0||(k.splice(t,1),M.pop(),S=A=!0,o()))},C.dispose=function(){if(!C._stopped&&(C._stopped=!0,window.removeEventListener("resize",L),i.removeEventListener("webglcontextlost",R),C.mouseListener.enabled=!1,!C.contextLost)){_.dispose(),w.dispose();for(var t=0;t<k.length;++t)k[t].dispose();v.dispose();for(t=0;t<T.length;++t)T[t].dispose();b.dispose(),w=_=y=null,k=[]}},C._mouseRotating=!1,C._prevButtons=0,C.enableMouseListeners=function(){C.mouseListener=p(i,function(t,e,n){if(!C._stopped){var r=T.length,i=k.length,a=m.object;m.distance=1/0,m.mouse[0]=e,m.mouse[1]=n,m.object=null,m.screen=null,m.dataCoordinate=m.dataPosition=null;var o=!1;if(t&&C._prevButtons)C._mouseRotating=!0;else{C._mouseRotating&&(S=!0),C._mouseRotating=!1;for(var s=0;s<r;++s){var l=T[s].query(e,P[1]-n-1,C.pickRadius);if(l&&!(l.distance>m.distance))for(var u=0;u<i;++u){var c,f=k[u];M[u]===s&&((c=f.pick(l))&&(m.buttons=t,m.screen=l.coord,m.distance=l.distance,m.object=f,m.index=c.distance,m.dataPosition=c.position,m.dataCoordinate=c.dataCoordinate,m.data=c,o=!0))}}}a&&a!==m.object&&(a.highlight&&a.highlight(null),A=!0),m.object&&(m.object.highlight&&m.object.highlight(m.data),A=!0),(o=o||m.object!==a)&&C.onselect&&C.onselect(m),1&t&&!(1&C._prevButtons)&&C.onclick&&C.onclick(m),C._prevButtons=t}})},i.addEventListener("webglcontextlost",R);var j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=[j[0].slice(),j[1].slice()];function l(){if(!R()){L();var t=C.camera.tick();E.view=C.camera.matrix,A=A||t,S=S||t,_.pixelRatio=C.pixelRatio,w.pixelRatio=C.pixelRatio;var e=k.length,n=j[0],r=j[1];n[0]=n[1]=n[2]=1/0,r[0]=r[1]=r[2]=-1/0;for(var i=0;i<e;++i){(g=k[i]).pixelRatio=C.pixelRatio,g.axes=C.axes,A=A||!!g.dirty,S=S||!!g.dirty;var a=g.bounds;if(a)for(var o=a[0],s=a[1],l=0;l<3;++l)n[l]=Math.min(n[l],o[l]),r[l]=Math.max(r[l],s[l])}var u=C.bounds;if(C.autoBounds)for(var c,l=0;l<3;++l)r[l]<n[l]?(n[l]=-1,r[l]=1):(n[l]===r[l]&&(--n[l],r[l]+=1),c=.05*(r[l]-n[l]),n[l]=n[l]-c,r[l]=r[l]+c),u[0][l]=n[l],u[1][l]=r[l];for(var f=!1,l=0;l<3;++l)f=f||N[0][l]!==u[0][l]||N[1][l]!==u[1][l],N[0][l]=u[0][l],N[1][l]=u[1][l];if(S=S||f,A=A||f){if(f){for(var h=[0,0,0],i=0;i<3;++i)h[i]=function(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));{if(e<0){var n=Math.round(Math.pow(10,-e));return Math.ceil(t*n)/n}if(0<e){n=Math.round(Math.pow(10,e));return Math.ceil(t/n)*n}}return Math.ceil(t)}((u[1][i]-u[0][i])/10);_.autoTicks?_.update({bounds:u,tickSpacing:h}):_.update({bounds:u})}var d=y.drawingBufferWidth,t=y.drawingBufferHeight;O[0]=d,O[1]=t,P[0]=0|Math.max(d/C.pixelRatio,1),P[1]=0|Math.max(t/C.pixelRatio,1),function(t){var e=t.bounds,n=t.cameraParams,r=n.projection,i=n.model,a=t.gl.drawingBufferWidth,o=t.gl.drawingBufferHeight,s=t.zNear,l=t.zFar,u=t.fovy,o=a/o;x?(F(r,-o,o,-1,1,s,l),n._ortho=!0):(I(r,u,o,s,l),n._ortho=!1);for(var c=0;c<16;++c)i[c]=0;i[15]=1;for(var f=0,c=0;c<3;++c)f=Math.max(f,e[1][c]-e[0][c]);for(c=0;c<3;++c)t.autoScale?i[5*c]=t.aspect[c]/(e[1][c]-e[0][c]):i[5*c]=1/f,t.autoCenter&&(i[12+c]=.5*-i[5*c]*(e[0][c]+e[1][c]))}(C);for(i=0;i<e;++i)(g=k[i]).axesBounds=u,C.clipToBounds&&(g.clipBounds=u);m.object&&(C.snapToData?w.position=m.dataCoordinate:w.position=m.dataPosition,w.bounds=u),S&&(S=!1,function(){if(!R()){y.colorMask(!0,!0,!0,!0),y.depthMask(!0),y.disable(y.BLEND),y.enable(y.DEPTH_TEST),y.depthFunc(y.LEQUAL);for(var t=k.length,e=T.length,n=0;n<e;++n){var r=T[n];r.shape=P,r.begin();for(var i,a=0;a<t;++a)M[a]===n&&((i=k[a]).drawPick&&(i.pixelRatio=1,i.drawPick(E)));r.end()}}}()),C.axesPixels=D(C.axes,E,d,t),C.onrender&&C.onrender(),y.bindFramebuffer(y.FRAMEBUFFER,null),y.viewport(0,0,d,t),C.clearRGBA(),y.depthMask(!0),y.colorMask(!0,!0,!0,!0),y.enable(y.DEPTH_TEST),y.depthFunc(y.LEQUAL),y.disable(y.BLEND),y.disable(y.CULL_FACE);var p=!1;_.enable&&(p=p||_.isTransparent(),_.draw(E)),w.axes=_,m.object&&w.draw(E),y.disable(y.CULL_FACE);for(i=0;i<e;++i)(g=k[i]).axes=_,g.pixelRatio=C.pixelRatio,g.isOpaque&&g.isOpaque()&&g.draw(E),g.isTransparent&&g.isTransparent()&&(p=!0);if(p){v.shape=O,v.bind(),y.clear(y.DEPTH_BUFFER_BIT),y.colorMask(!1,!1,!1,!1),y.depthMask(!0),y.depthFunc(y.LESS),_.enable&&_.isTransparent()&&_.drawTransparent(E);for(i=0;i<e;++i)(g=k[i]).isOpaque&&g.isOpaque()&&g.draw(E);y.enable(y.BLEND),y.blendEquation(y.FUNC_ADD),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.colorMask(!0,!0,!0,!0),y.depthMask(!1),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),_.isTransparent()&&_.drawTransparent(E);for(var g,i=0;i<e;++i)(g=k[i]).isTransparent&&g.isTransparent()&&g.drawTransparent(E);y.bindFramebuffer(y.FRAMEBUFFER,null),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.disable(y.DEPTH_TEST),b.bind(),v.color[0].bind(0),b.uniforms.accumBuffer=0,z(y),y.disable(y.BLEND)}A=!1;for(i=0;i<e;++i)k[i].dirty=!1}}}return C.enableMouseListeners(),function t(){if(C._stopped||C.contextLost)return;l();requestAnimationFrame(t)}(),C.redraw=function(){C._stopped||(A=!0,l())},C},createCamera:u}},{"./camera.js":156,"./lib/shader":157,"a-big-triangle":2,"gl-axes3d":105,"gl-axes3d/properties":112,"gl-fbo":118,"gl-mat4/ortho":142,"gl-mat4/perspective":143,"gl-select-static":164,"gl-spikes3d":173,"is-mobile":205,"mouse-change":246}],159:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i,a=e[0],o=e[1],s=e[2],l=e[3],u=n[0],c=n[1],f=n[2],h=n[3];(e=a*u+o*c+s*f+l*h)<0&&(e=-e,u=-u,c=-c,f=-f,h=-h);r=1e-6<1-e?(n=Math.acos(e),e=Math.sin(n),i=Math.sin((1-r)*n)/e,Math.sin(r*n)/e):(i=1-r,r);return t[0]=i*a+r*u,t[1]=i*o+r*c,t[2]=i*s+r*f,t[3]=i*l+r*h,t}},{}],160:[function(t,e,n){"use strict";e.exports=function(t){return t||0===t?t.toString():""}},{}],161:[function(t,e,n){"use strict";var f=t("vectorize-text");e.exports=function(t,e,n){var r=h[e];r=r||(h[e]={});if(t in r)return r[t];var e={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=f(t,e);e.triangles=!1;var a,o,s=f(t,e);if(n&&1!==n){for(a=0;a<i.positions.length;++a)for(o=0;o<i.positions[a].length;++o)i.positions[a][o]/=n;for(a=0;a<s.positions.length;++a)for(o=0;o<s.positions[a].length;++o)s.positions[a][o]/=n}var l=[[1/0,1/0],[-1/0,-1/0]],u=s.positions.length;for(a=0;a<u;++a){var c=s.positions[a];for(o=0;o<2;++o)l[0][o]=Math.min(l[0][o],c[o]),l[1][o]=Math.max(l[1][o],c[o])}return r[t]=[i,s,l]};var h={}},{"vectorize-text":660}],162:[function(t,e,n){"use strict";var r=t("gl-shader"),i=t("glslify"),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),t=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],u={vertex:a,fragment:l,attributes:i},c={vertex:o,fragment:l,attributes:i},f={vertex:s,fragment:l,attributes:i},h={vertex:a,fragment:t,attributes:i},d={vertex:o,fragment:t,attributes:i},p={vertex:s,fragment:t,attributes:i};function g(t,e){t=r(t,e),e=t.attributes;return e.position.location=0,e.color.location=1,e.glyph.location=2,e.id.location=3,t}n.createPerspective=function(t){return g(t,u)},n.createOrtho=function(t){return g(t,c)},n.createProject=function(t){return g(t,f)},n.createPickPerspective=function(t){return g(t,h)},n.createPickOrtho=function(t){return g(t,d)},n.createPickProject=function(t){return g(t,p)}},{"gl-shader":165,glslify:194}],163:[function(t,e,n){"use strict";var i=t("is-string-blank"),d=t("gl-buffer"),p=t("gl-vao"),Z=t("typedarray-pool"),M=t("gl-mat4/multiply"),g=t("./lib/shaders"),a=t("./lib/glyphs"),o=t("./lib/get-simple-string"),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];return t[0]=e[0]*n+e[4]*r+e[8]*i+e[12]*a,t[1]=e[1]*n+e[5]*r+e[9]*i+e[13]*a,t[2]=e[2]*n+e[6]*r+e[10]*i+e[14]*a,t[3]=e[3]*n+e[7]*r+e[11]*i+e[15]*a,t}function A(t,e,n,r){return s(r,r),s(r,r),s(r,r)}function h(t,e){this.index=t,this.dataCoordinate=this.position=e}function K(t){return!0===t||1<t?1:t}function y(t,e,n,r,i,a,o,s,l,u,c,f){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=n,this.projectShader=r,this.pointBuffer=i,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=u,this.pickOrthoShader=c,this.pickProjectShader=f,this.points=[],this._selectResult=new h(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}e.exports=function(t){var e=t.gl,n=g.createPerspective(e),r=g.createOrtho(e),i=g.createProject(e),a=g.createPickPerspective(e),o=g.createPickOrtho(e),s=g.createPickProject(e),l=d(e),u=d(e),c=d(e),f=d(e),h=p(e,[{buffer:l,size:3,type:e.FLOAT},{buffer:u,size:4,type:e.FLOAT},{buffer:c,size:2,type:e.FLOAT},{buffer:f,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),s=new y(e,n,r,i,l,u,c,f,h,a,o,s);return s.update(t),s};e=y.prototype;e.pickSlots=1,e.setPickBase=function(t){this.pickId=t},e.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},e.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var S=[0,0],E=[0,0,0],O=[0,0,0],C=[0,0,0,1],P=[0,0,0,1],L=T.slice(),R=[0,0,0],j=[[0,0,0],[0,0,0]];function N(t){return t[0]=t[1]=t[2]=0,t}function D(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function z(t,e,n,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[n]=r,t}function l(t,e,n,r){var i=e.axesProject,a=e.gl,o=t.uniforms,s=n.model||T,l=n.view||T,n=n.projection||T,u=e.axesBounds,c=function(t){for(var e=j,n=0;n<2;++n)for(var r=0;r<3;++r)e[n][r]=Math.max(Math.min(t[n][r],1e8),-1e8);return e}(e.clipBounds),f=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1];S[0]=2/a.drawingBufferWidth,S[1]=2/a.drawingBufferHeight,t.bind(),o.view=l,o.projection=n,o.screenSize=S,o.highlightId=e.highlightId,o.highlightScale=e.highlightScale,o.clipBounds=c,o.pickGroup=e.pickId/255,o.pixelRatio=r;for(var h=0;h<3;++h)if(i[h]){o.scale=e.projectScale[h],o.opacity=e.projectOpacity[h];for(var d=L,p=0;p<16;++p)d[p]=0;for(p=0;p<4;++p)d[5*p]=1;d[5*h]=0,f[h]<0?d[12+h]=u[0][h]:d[12+h]=u[1][h],M(d,s,d),o.model=d;var g=(h+1)%3,y=(h+2)%3,m=N(E),v=N(O);m[g]=1,v[y]=1;var b,x=A(0,0,0,D(C,m)),_=A(0,0,0,D(P,v));Math.abs(x[1])>Math.abs(_[1])&&(b=x,x=_,_=b,b=m,m=v,v=b,b=g,g=y,y=b),x[0]<0&&(m[g]=-1),0<_[1]&&(v[y]=-1);for(var w=0,k=0,p=0;p<4;++p)w+=Math.pow(s[4*g+p],2),k+=Math.pow(s[4*y+p],2);m[g]/=Math.sqrt(w),v[y]/=Math.sqrt(k),o.axes[0]=m,o.axes[1]=v,o.fragClipBounds[0]=z(R,c[0],h,-1e8),o.fragClipBounds[1]=z(R,c[1],h,1e8),e.vao.bind(),e.vao.draw(a.TRIANGLES,e.vertexCount),0<e.lineWidth&&(a.lineWidth(e.lineWidth*r),e.vao.draw(a.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}var u=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function r(t,e,n,r,i,a,o){var s=n.gl;a!==n.projectHasAlpha&&!o||l(e,n,r,i),a!==n.hasAlpha&&!o||(t.bind(),(t=t.uniforms).model=r.model||T,t.view=r.view||T,t.projection=r.projection||T,S[0]=2/s.drawingBufferWidth,S[1]=2/s.drawingBufferHeight,t.screenSize=S,t.highlightId=n.highlightId,t.highlightScale=n.highlightScale,t.fragClipBounds=u,t.clipBounds=n.axes.bounds,t.opacity=n.opacity,t.pickGroup=n.pickId/255,t.pixelRatio=i,n.vao.bind(),n.vao.draw(s.TRIANGLES,n.vertexCount),0<n.lineWidth&&(s.lineWidth(n.lineWidth*i),n.vao.draw(s.LINES,n.lineVertexCount,n.vertexCount)),n.vao.unbind())}function Q(t,e,n,r){e=Array.isArray(t)?e<t.length?t[e]:void 0:t;e=o(e);t=!0;i(e)&&(t=!(e="▼"));r=a(e,n,r);return{mesh:r[0],lines:r[1],bounds:r[2],visible:t}}e.draw=function(t){r(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},e.drawTransparent=function(t){r(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},e.drawPick=function(t){r(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},e.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;t=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(t>=this.pointCount||t<0)return null;var e=this.points[t],n=this._selectResult;n.index=t;for(var r=0;r<3;++r)n.position[r]=n.dataCoordinate[r]=e[r];return n},e.highlight=function(t){var e,n;t?(e=255&(n=t.index),t=n>>8&255,n=n>>16&255,this.highlightId=[e/255,t/255,n/255,0]):this.highlightId=[1,1,1,1]},e.update=function(t){var e,n;if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t&&(Array.isArray(t.project)?this.axesProject=t.project:(e=!!t.project,this.axesProject=[e,e,e])),"projectScale"in t&&(Array.isArray(t.projectScale)?this.projectScale=t.projectScale.slice():(n=+t.projectScale,this.projectScale=[n,n,n])),this.projectHasAlpha=!1,"projectOpacity"in t){Array.isArray(t.projectOpacity)?this.projectOpacity=t.projectOpacity.slice():(n=+t.projectOpacity,this.projectOpacity=[n,n,n]);for(var r=0;r<3;++r)this.projectOpacity[r]=K(this.projectOpacity[r]),this.projectOpacity[r]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=K(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var i,a,o=t.position,s=t.font||"normal",l=t.alignment||[0,0];if(2===l.length)i=l[0],a=l[1];else{i=[],a=[];for(r=0;r<l.length;++r)i[r]=l[r][0],a[r]=l[r][1]}var u=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0],f=t.glyph,h=t.color,d=t.size,p=t.angle,g=t.lineColor,y=-1,m=0,v=0,b=0;if(o.length){b=o.length;t:for(r=0;r<b;++r){for(var x=o[r],_=0;_<3;++_)if(isNaN(x[_])||!isFinite(x[_]))continue t;var w=(N=Q(f,r,s,this.pixelRatio)).mesh,k=N.lines,M=N.bounds;m+=3*w.cells.length,v+=2*k.edges.length}}var t=m+v,T=Z.mallocFloat(3*t),A=Z.mallocFloat(4*t),S=Z.mallocFloat(2*t),E=Z.mallocUint32(t);if(0<t){var O=0,C=m,P=[0,0,0,1],L=[0,0,0,1],R=Array.isArray(h)&&Array.isArray(h[0]),j=Array.isArray(g)&&Array.isArray(g[0]);t:for(r=0;r<b;++r){y+=1;for(x=o[r],_=0;_<3;++_){if(isNaN(x[_])||!isFinite(x[_]))continue t;c[_]=Math.max(c[_],x[_]),u[_]=Math.min(u[_],x[_])}var N,D,w=(N=Q(f,r,s,this.pixelRatio)).mesh,k=N.lines,M=N.bounds,z=N.visible;if(z)if(Array.isArray(h)){if(3===(D=R?r<h.length?h[r]:[0,0,0,0]:h).length){for(_=0;_<3;++_)P[_]=D[_];P[3]=1}else if(4===D.length){for(_=0;_<4;++_)P[_]=D[_];!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)}}else P[0]=P[1]=P[2]=0,P[3]=1;else P=[1,1,1,0];if(z)if(Array.isArray(g)){if(3===(D=j?r<g.length?g[r]:[0,0,0,0]:g).length){for(_=0;_<3;++_)L[_]=D[_];L[_]=1}else if(4===D.length){for(_=0;_<4;++_)L[_]=D[_];!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)}}else L[0]=L[1]=L[2]=0,L[3]=1;else L=[1,1,1,0];var I=.5;z?Array.isArray(d)?I=r<d.length?+d[r]:12:d?I=+d:this.useOrtho&&(I=12):I=0;var F=0;Array.isArray(p)?F=r<p.length?+p[r]:0:p&&(F=+p);for(var B=Math.cos(F),U=Math.sin(F),x=o[r],_=0;_<3;++_)c[_]=Math.max(c[_],x[_]),u[_]=Math.min(u[_],x[_]);z=i,F=a,z=0;Array.isArray(i)?z=r<i.length?i[r]:0:i&&(z=i);F=0;Array.isArray(a)?F=r<a.length?a[r]:0:a&&(F=a);for(var V=[z*=0<z?1-M[0][0]:z<0?1+M[1][0]:1,F*=0<F?1-M[0][1]:F<0?1+M[1][1]:1],H=w.cells||[],q=w.positions||[],_=0;_<H.length;++_)for(var G=H[_],Y=0;Y<3;++Y){for(var X=0;X<3;++X)T[3*O+X]=x[X];for(X=0;X<4;++X)A[4*O+X]=P[X];E[O]=y;var W=q[G[Y]];S[2*O]=I*(B*W[0]-U*W[1]+V[0]),S[2*O+1]=I*(U*W[0]+B*W[1]+V[1]),O+=1}for(H=k.edges,q=k.positions,_=0;_<H.length;++_)for(G=H[_],Y=0;Y<2;++Y){for(X=0;X<3;++X)T[3*C+X]=x[X];for(X=0;X<4;++X)A[4*C+X]=L[X];E[C]=y;W=q[G[Y]];S[2*C]=I*(B*W[0]-U*W[1]+V[0]),S[2*C+1]=I*(U*W[0]+B*W[1]+V[1]),C+=1}}}this.bounds=[u,c],this.points=o,this.pointCount=o.length,this.vertexCount=m,this.lineVertexCount=v,this.pointBuffer.update(T),this.colorBuffer.update(A),this.glyphBuffer.update(S),this.idBuffer.update(E),Z.free(T),Z.free(A),Z.free(S),Z.free(E)},e.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":160,"./lib/glyphs":161,"./lib/shaders":162,"gl-buffer":113,"gl-mat4/multiply":141,"gl-vao":178,"is-string-blank":206,"typedarray-pool":657}],164:[function(t,e,n){"use strict";e.exports=function(t,e){var n=e[0],r=e[1],e=i(t,n,r,{}),r=a.mallocUint8(n*r*4);return new u(t,e,r)};var i=t("gl-fbo"),a=t("typedarray-pool"),o=t("ndarray"),s=t("bit-twiddle").nextPow2;function l(t,e,n,r,i){this.coord=[t,e],this.id=n,this.value=r,this.distance=i}function u(t,e,n){this.gl=t,this.fbo=e,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){r.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,r.buffer),r._readTimeout=null)}}t=u.prototype;Object.defineProperty(t,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],n=this.fbo.shape[1];if(n*e*4>this.buffer.length){a.free(this.buffer);for(var r=this.buffer=a.mallocUint8(s(n*e*4)),i=0;i<n*e*4;++i)r[i]=255}return t}}}),t.begin=function(){var t=this.gl;this.shape;t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},t.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},t.query=function(t,e,n){if(!this.gl)return null;var r=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof n&&(n=1);var i=0|Math.min(Math.max(t-n,0),r[0]),a=0|Math.min(Math.max(t+n,0),r[0]),t=0|Math.min(Math.max(e-n,0),r[1]),e=0|Math.min(Math.max(e+n,0),r[1]);if(a<=i||e<=t)return null;a=[a-i,e-t],e=o(this.buffer,[a[0],a[1],4],[4,4*r[0],1],4*(i+r[0]*t)),r=function(t,e,n){for(var r=1e8,i=-1,a=-1,o=t.shape[0],s=t.shape[1],l=0;l<o;l++)for(var u=0;u<s;u++){var c=t.get(l,u,0),f=t.get(l,u,1),h=t.get(l,u,2),d=t.get(l,u,3);!(c<255||f<255||h<255||d<255)||(d=(d=e-l)*d+(d=n-u)*d)<r&&(r=d,i=l,a=u)}return[i,a,r]}(e.hi(a[0],a[1],1),n,n),a=r[0],n=r[1];return a<0||Math.pow(this.radius,2)<r[2]?null:new l(a+i|0,n+t|0,e.get(a,n,0),[e.get(a,n,1),e.get(a,n,2),e.get(a,n,3)],Math.sqrt(r[2]))},t.dispose=function(){this.gl&&(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":26,"gl-fbo":118,ndarray:254,"typedarray-pool":657}],165:[function(t,e,n){"use strict";var v=t("./lib/create-uniforms"),b=t("./lib/create-attributes"),x=t("./lib/reflect"),_=t("./lib/shader-cache"),w=t("./lib/runtime-reflect"),k=t("./lib/GLError");function a(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}t=a.prototype;function M(t,e){return t.name<e.name?-1:1}t.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(n<e)for(t=n;t<e;t++)this.gl.enableVertexAttribArray(t);else if(e<n)for(t=e;t<n;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},t.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},t.update=function(t,e,n,r){e&&1!==arguments.length||(t=(o=t).vertex,e=o.fragment,n=o.uniforms,r=o.attributes);var i=this,a=i.gl,o=i._vref;i._vref=_.shader(a,a.VERTEX_SHADER,t),o&&o.dispose(),i.vertShader=i._vref.shader;o=this._fref;if(i._fref=_.shader(a,a.FRAGMENT_SHADER,e),o&&o.dispose(),i.fragShader=i._fref.shader,!n||!r){e=a.createProgram();if(a.attachShader(e,i.fragShader),a.attachShader(e,i.vertShader),a.linkProgram(e),!a.getProgramParameter(e,a.LINK_STATUS)){o=a.getProgramInfoLog(e);throw new k(o,"Error linking program:"+o)}n=n||w.uniforms(a,e),r=r||w.attributes(a,e),a.deleteProgram(e)}(r=r.slice()).sort(M);for(var s=[],l=[],u=[],c=0;c<r.length;++c){var f=r[c];if(0<=f.type.indexOf("mat")){for(var h=0|f.type.charAt(f.type.length-1),d=new Array(h),p=0;p<h;++p)d[p]=u.length,l.push(f.name+"["+p+"]"),"number"==typeof f.location?u.push(f.location+p):Array.isArray(f.location)&&f.location.length===h&&"number"==typeof f.location[p]?u.push(0|f.location[p]):u.push(-1);s.push({name:f.name,type:f.type,locations:d})}else s.push({name:f.name,type:f.type,locations:[u.length]}),l.push(f.name),"number"==typeof f.location?u.push(0|f.location):u.push(-1)}var g=0;for(c=0;c<u.length;++c)if(u[c]<0){for(;0<=u.indexOf(g);)g+=1;u[c]=g}var y=new Array(n.length);function m(){i.program=_.program(a,i._vref,i._fref,l,u);for(var t=0;t<n.length;++t)y[t]=a.getUniformLocation(i.program,n[t].name)}m(),i._relink=m,i.types={uniforms:x(n),attributes:x(r)},i.attributes=b(a,i,s,u),Object.defineProperty(i,"uniforms",v(a,i,n,y))},e.exports=function(t,e,n,r,i){return(t=new a(t)).update(e,n,r,i),t}},{"./lib/GLError":166,"./lib/create-attributes":167,"./lib/create-uniforms":168,"./lib/reflect":169,"./lib/runtime-reflect":170,"./lib/shader-cache":171}],166:[function(t,e,n){"use strict";function r(t,e,n){this.shortMessage=e||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(n?"\n"+n:""),this.stack=(new Error).stack}(r.prototype=new Error).name="GLError",r.prototype.constructor=r,e.exports=r},{}],167:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var i={},a=0,o=n.length;a<o;++a){var s,l=n[a],u=l.name,c=l.type,f=l.locations;switch(c){case"bool":case"int":case"float":p(t,e,f[0],r,1,i,u);break;default:if(0<=c.indexOf("vec")){if((s=c.charCodeAt(c.length-1)-48)<2||4<s)throw new h("","Invalid data type for attribute "+u+": "+c);p(t,e,f[0],r,s,i,u)}else{if(!(0<=c.indexOf("mat")))throw new h("","Unknown data type for attribute "+u+": "+c);if((s=c.charCodeAt(c.length-1)-48)<2||4<s)throw new h("","Invalid data type for attribute "+u+": "+c);!function(o,t,s,l,u,e,n){for(var r=new Array(u),i=new Array(u),a=0;a<u;++a)p(o,t,s[a],l,u,r,a),i[a]=r[a];Object.defineProperty(r,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<u;++e)i[e].location=t[e];else for(e=0;e<u;++e)i[e].location=t+e;return t},get:function(){for(var t=new Array(u),e=0;e<u;++e)t[e]=l[s[e]];return t},enumerable:!0}),r.pointer=function(t,e,n,r){t=t||o.FLOAT,e=!!e,n=n||u*u,r=r||0;for(var i=0;i<u;++i){var a=l[s[i]];o.vertexAttribPointer(a,u,t,e,n,r+i*u),o.enableVertexAttribArray(a)}};var c=new Array(u),f=o["vertexAttrib"+u+"fv"];Object.defineProperty(e,n,{set:function(t){for(var e=0;e<u;++e){var n=l[s[e]];if(o.disableVertexAttribArray(n),Array.isArray(t[0]))f.call(o,n,t[e]);else{for(var r=0;r<u;++r)c[r]=t[u*e+r];f.call(o,n,c)}}return t},get:function(){return r},enumerable:!0})}(t,e,f,r,s,i,u)}}}return i};var h=t("./GLError");function d(t,e,n,r,i,a){this._gl=t,this._wrapper=e,this._index=n,this._locations=r,this._dimension=i,this._constFunc=a}t=d.prototype;function p(e,t,n,r,i,a,o){for(var s=["gl","v"],l=[],u=0;u<i;++u)s.push("x"+u),l.push("x"+u);s.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var c=Function.apply(null,s),f=new d(e,t,n,r,i,c);Object.defineProperty(a,o,{set:function(t){return e.disableVertexAttribArray(r[n]),c(e,r[n],t),t},get:function(){return f},enumerable:!0})}t.pointer=function(t,e,n,r){var i=this._gl,a=this._locations[this._index];i.vertexAttribPointer(a,this._dimension,t||i.FLOAT,!!e,n||0,r||0),i.enableVertexAttribArray(a)},t.set=function(t,e,n,r){return this._constFunc(this._locations[this._index],t,e,n,r)},Object.defineProperty(t,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}})},{"./GLError":166}],168:[function(t,e,n){"use strict";function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=t("./reflect"),h=t("./GLError");function d(t){return new Function("y","return function(){return y}")(t)}function p(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=e;return n}e.exports=function(o,i,s,l){function a(t){for(var e=["return function updateProperty(obj){"],n=function t(e,n){if("object"!==f(n))return[[e,n]];var r,i=[];for(r in n){var a=n[r],o=e;parseInt(r)+""===r?o+="["+r+"]":o+="."+r,"object"===f(a)?i.push.apply(i,t(o,a)):i.push([o,a])}return i}("",t),r=0;r<n.length;++r){var i=n[r],a=i[0],i=i[1];l[i]&&e.push(function(t,e,n){switch(n){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var r,i=n.indexOf("vec");if(!(0<=i&&i<=1&&n.length===4+i)){if(0!==n.indexOf("mat")||4!==n.length)throw new h("","Unknown uniform data type for "+name+": "+n);if((r=n.charCodeAt(n.length-1)-48)<2||4<r)throw new h("","Invalid uniform dimension type for matrix "+name+": "+n);return"gl.uniformMatrix"+r+"fv(locations["+e+"],false,obj"+t+")"}if((r=n.charCodeAt(n.length-1)-48)<2||4<r)throw new h("","Invalid data type");switch(n.charAt(0)){case"b":case"i":return"gl.uniform"+r+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+r+"fv(locations["+e+"],obj"+t+")";default:throw new h("","Unrecognized data type for vector "+name+": "+n)}}}(a,i,s[i].type))}return e.push("return obj}"),new Function("gl","locations",e.join("\n"))(o,l)}function u(t,e,n){var r;"object"===f(n)?(r=c(n),Object.defineProperty(t,e,{get:d(r),set:a(n),enumerable:!0,configurable:!1})):l[n]?Object.defineProperty(t,e,{get:new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+n+"])}")(o,i,l),set:a(n),enumerable:!0,configurable:!1}):t[e]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e,n=t.indexOf("vec");if(0<=n&&n<=1&&t.length===4+n){if((e=t.charCodeAt(t.length-1)-48)<2||4<e)throw new h("","Invalid data type");return"b"===t.charAt(0)?p(e,!1):p(e,0)}if(0!==t.indexOf("mat")||4!==t.length)throw new h("","Unknown uniform data type for "+name+": "+t);if((e=t.charCodeAt(t.length-1)-48)<2||4<e)throw new h("","Invalid uniform dimension type for matrix "+name+": "+t);return p(e*e,0)}}(s[n].type)}function c(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var n=0;n<t.length;++n)u(e,n,t[n])}else for(var r in e={},t)u(e,r,t[r]);return e}var t=r(s,!0);return{get:d(c(t)),set:a(t),enumerable:!0,configurable:!0}}},{"./GLError":166,"./reflect":169}],169:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n={},r=0;r<t.length;++r)for(var i=t[r].name.split("."),a=n,o=0;o<i.length;++o){var s=i[o].split("[");if(1<s.length){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var l=1;l<s.length;++l){var u=parseInt(s[l]);l<s.length-1||o<i.length-1?(u in a||(l<s.length-1?a[u]=[]:a[u]={}),a=a[u]):a[u]=e?r:t[r].type}}else o<i.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=e?r:t[r].type}return n}},{}],170:[function(t,e,n){"use strict";n.uniforms=function(t,e){for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=[],i=0;i<n;++i){var a=t.getActiveUniform(e,i);if(a){var o=l(t,a.type);if(1<a.size)for(var s=0;s<a.size;++s)r.push({name:a.name.replace("[0]","["+s+"]"),type:o});else r.push({name:a.name,type:o})}}return r},n.attributes=function(t,e){for(var n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=[],i=0;i<n;++i){var a=t.getActiveAttrib(e,i);a&&r.push({name:a.name,type:l(t,a.type)})}return r};var a={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function l(t,e){if(!o){var n=Object.keys(a);o={};for(var r=0;r<n.length;++r){var i=n[r];o[t[i]]=a[i]}}return o[e]}},{}],171:[function(t,e,n){"use strict";n.shader=function(t,e,n){return u(t).getShaderReference(e,n)},n.program=function(t,e,n,r,i){return u(t).getProgram(e,n,r,i)};var s=t("./GLError"),o=t("gl-format-compiler-error"),r=new("undefined"==typeof WeakMap?t("weakmap-shim"):WeakMap),a=0;function l(t,e,n,r,i,a,o){this.id=t,this.src=e,this.type=n,this.shader=r,this.count=a,this.programs=[],this.cache=o}function i(t){this.gl=t,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,n=this.programs,r=0,i=n.length;r<i;++r){var a=t.programs[n[r]];a&&(delete t.programs[r],e.deleteProgram(a))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};t=i.prototype;function u(t){var e=r.get(t);return e||(e=new i(t),r.set(t,e)),e}t.getShaderReference=function(t,e){var n=this.gl,r=this.shaders[t===n.FRAGMENT_SHADER|0],i=r[e];return i&&n.isShader(i.shader)?i.count+=1:(n=function(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return r;var i=t.getShaderInfoLog(r);try{var a=o(i,n,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new s(i,"Error compiling shader:\n"+i)}throw new s(i,a.short,a.long)}(n,t,e),i=r[e]=new l(a++,e,t,n,0,1,this)),i},t.getProgram=function(t,e,n,r){var i=[t.id,e.id,n.join(":"),r.join(":")].join("@"),a=this.programs[i];return a&&this.gl.isProgram(a)||(this.programs[i]=a=function(t,e,n,r,i){var a=t.createProgram();t.attachShader(a,e),t.attachShader(a,n);for(var o=0;o<r.length;++o)t.bindAttribLocation(a,i[o],r[o]);if(t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;throw n=t.getProgramInfoLog(a),new s(n,"Error linking program: "+n)}(this.gl,t.shader,e.shader,n,r),t.programs.push(i),e.programs.push(i)),a}},{"./GLError":166,"gl-format-compiler-error":119,"weakmap-shim":665}],172:[function(t,e,n){"use strict";var r=t("glslify"),i=t("gl-shader"),a=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);e.exports=function(t){return i(t,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":165,glslify:194}],173:[function(t,e,n){"use strict";var s=t("gl-buffer"),l=t("gl-vao"),u=t("./shaders/index");e.exports=function(t,e){var o=[];function n(t,e,n,r,i,a){n=[t,e,n,0,0,0,1];n[r+3]=1,n[r]=i,o.push.apply(o,n),n[6]=-1,o.push.apply(o,n),n[r]=a,o.push.apply(o,n),o.push.apply(o,n),n[6]=1,o.push.apply(o,n),n[r]=i,o.push.apply(o,n)}n(0,0,0,0,0,1),n(0,0,0,1,0,1),n(0,0,0,2,0,1),n(1,0,0,1,-1,1),n(1,0,0,2,-1,1),n(0,1,0,0,-1,1),n(0,1,0,2,-1,1),n(0,0,1,0,-1,1),n(0,0,1,1,-1,1);var r=s(t,o),i=l(t,[{type:t.FLOAT,buffer:r,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:r,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:r,size:1,offset:24,stride:28}]),a=u(t);a.attributes.position.location=0,a.attributes.color.location=1,a.attributes.weight.location=2;a=new f(t,r,i,a);return a.update(e),a};var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(t,e,n,r){this.gl=t,this.buffer=e,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var e=f.prototype,h=[0,0,0],d=[0,0,0],p=[0,0];e.isTransparent=function(){return!1},e.drawTransparent=function(t){},e.draw=function(t){var e=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var i,a=t.model||c,o=t.view||c,t=t.projection||c;this.axes&&(i=this.axes.lastCubeProps.axis);for(var s=h,l=d,u=0;u<3;++u)i&&i[u]<0?(s[u]=this.bounds[0][u],l[u]=this.bounds[1][u]):(s[u]=this.bounds[1][u],l[u]=this.bounds[0][u]);p[0]=e.drawingBufferWidth,p[1]=e.drawingBufferHeight,r.uniforms.model=a,r.uniforms.view=o,r.uniforms.projection=t,r.uniforms.coordinates=[this.position,s,l],r.uniforms.colors=this.colors,r.uniforms.screenShape=p;for(u=0;u<3;++u)r.uniforms.lineWidth=this.lineWidth[u]*this.pixelRatio,this.enabled[u]&&(n.draw(e.TRIANGLES,6,6*u),this.drawSides[u]&&n.draw(e.TRIANGLES,12,18+12*u));n.unbind()},e.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},e.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":172,"gl-buffer":113,"gl-vao":178}],174:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var d=t("ndarray"),p=t("ndarray-ops"),g=t("typedarray-pool");e.exports=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");i||(i=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],a=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],o=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]);if("number"==typeof arguments[1])return u(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return u(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"===r(arguments[1])){var e=arguments[1],n=s(e)?e:e.raw;if(n)return function(t,e,n,r,i,a){var o=f(t);return t.texImage2D(t.TEXTURE_2D,0,i,i,a,e),new c(t,o,n,r,i,a)}(t,n,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return function(t,e){var n=e.dtype,r=e.shape.slice(),i=t.getParameter(t.MAX_TEXTURE_SIZE);if(r[0]<0||r[0]>i||r[1]<0||r[1]>i)throw new Error("gl-texture2d: Invalid texture size");var a=m(r,e.stride.slice()),o=0;"float32"===n?o=t.FLOAT:"float64"===n?(o=t.FLOAT,a=!1,n="float32"):"uint8"===n?o=t.UNSIGNED_BYTE:(o=t.UNSIGNED_BYTE,a=!1,n="uint8");var s,l=0;if(2===r.length)l=t.LUMINANCE,r=[r[0],r[1],1],e=d(e.data,r,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==r.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===r[2])l=t.ALPHA;else if(2===r[2])l=t.LUMINANCE_ALPHA;else if(3===r[2])l=t.RGB;else{if(4!==r[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");l=t.RGBA}}o!==t.FLOAT||t.getExtension("OES_texture_float")||(o=t.UNSIGNED_BYTE,a=!1);var u=e.size;e=a?0===e.offset&&e.data.length===u?e.data:e.data.subarray(e.offset,e.offset+u):(i=[r[2],r[2]*r[0],1],s=g.malloc(u,n),i=d(s,r,i,0),"float32"!==n&&"float64"!==n||o!==t.UNSIGNED_BYTE?p.assign(i,e):y(i,e),s.subarray(0,u));u=f(t);t.texImage2D(t.TEXTURE_2D,0,l,r[0],r[1],0,l,o,e),a||g.free(s);return new c(t,u,r[0],r[1],l,o)}(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var i=null,a=null,o=null;function s(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var y=function(t,e){p.muls(t,e,255)};function l(t,e,n){var r=t.gl,i=r.getParameter(r.MAX_TEXTURE_SIZE);if(e<0||i<e||n<0||i<n)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,n],t.bind(),r.texImage2D(r.TEXTURE_2D,0,t.format,e,n,0,t.format,t.type,null),t._mipLevels=[0],t}function c(t,e,n,r,i,a){this.gl=t,this.handle=e,this.format=i,this.type=a,this._shape=[n,r],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,t=[this._wrapS,this._wrapT];Object.defineProperties(t,[{get:function(){return o._wrapS},set:function(t){return o.wrapS=t}},{get:function(){return o._wrapT},set:function(t){return o.wrapT=t}}]),this._wrapVector=t;t=[this._shape[0],this._shape[1]];Object.defineProperties(t,[{get:function(){return o._shape[0]},set:function(t){return o.width=t}},{get:function(){return o._shape[1]},set:function(t){return o.height=t}}]),this._shapeVector=t}e=c.prototype;function m(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function f(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function u(t,e,n,r,i){var a=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||a<e||n<0||a<n)throw new Error("gl-texture2d: Invalid texture shape");if(i===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");a=f(t);return t.texImage2D(t.TEXTURE_2D,0,r,e,n,0,r,i,null),new c(t,a,e,n,r,i)}Object.defineProperties(e,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&0<=i.indexOf(t)&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),a.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&0<=i.indexOf(t)&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),a.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;return this._anisoSamples=0|Math.max(t,1),e===this._anisoSamples||(e=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples),this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),o.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),o.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(o.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return l(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return l(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,l(this,this._shape[0],t),t}}}),e.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},e.dispose=function(){this.gl.deleteTexture(this.handle)},e.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;0<t;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},e.setPixels=function(t,e,n,r){var i=this.gl;this.bind(),Array.isArray(e)?(r=n,n=0|e[1],e=0|e[0]):(e=e||0,n=n||0),r=r||0;var a=s(t)?t:t.raw;if(a)this._mipLevels.indexOf(r)<0?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,a),this._mipLevels.push(r)):i.texSubImage2D(i.TEXTURE_2D,r,e,n,this.format,this.type,a);else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>r||n+t.shape[0]>this._shape[0]>>>r||e<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,n,r,i,a,o,s){var l=s.dtype,u=s.shape.slice();if(u.length<2||3<u.length)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,f=0,h=m(u,s.stride.slice());if("float32"===l?c=t.FLOAT:"float64"===l?(c=t.FLOAT,h=!1,l="float32"):"uint8"===l?c=t.UNSIGNED_BYTE:(c=t.UNSIGNED_BYTE,h=!1,l="uint8"),2===u.length)f=t.LUMINANCE,u=[u[0],u[1],1],s=d(s.data,u,[s.stride[0],s.stride[1],1],s.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])f=t.ALPHA;else if(2===u[2])f=t.LUMINANCE_ALPHA;else if(3===u[2])f=t.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");f=t.RGBA}u[2]}if(f!==t.LUMINANCE&&f!==t.ALPHA||i!==t.LUMINANCE&&i!==t.ALPHA||(f=i),f!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");l=s.size,(f=o.indexOf(r)<0)&&o.push(r),c===a&&h?0===s.offset&&s.data.length===l?f?t.texImage2D(t.TEXTURE_2D,r,i,u[0],u[1],0,i,a,s.data):t.texSubImage2D(t.TEXTURE_2D,r,e,n,u[0],u[1],i,a,s.data):f?t.texImage2D(t.TEXTURE_2D,r,i,u[0],u[1],0,i,a,s.data.subarray(s.offset,s.offset+l)):t.texSubImage2D(t.TEXTURE_2D,r,e,n,u[0],u[1],i,a,s.data.subarray(s.offset,s.offset+l)):(o=a===t.FLOAT?g.mallocFloat32(l):g.mallocUint8(l),h=d(o,u,[u[2],u[2]*u[0],1]),c===t.FLOAT&&a===t.UNSIGNED_BYTE?y(h,s):p.assign(h,s),f?t.texImage2D(t.TEXTURE_2D,r,i,u[0],u[1],0,i,a,o.subarray(0,l)):t.texSubImage2D(t.TEXTURE_2D,r,e,n,u[0],u[1],i,a,o.subarray(0,l)),a===t.FLOAT?g.freeFloat32(o):g.freeUint8(o))}(i,e,n,r,this.format,this.type,this._mipLevels,t)}}},{ndarray:254,"ndarray-ops":251,"typedarray-pool":657}],175:[function(t,e,n){"use strict";e.exports=function(t,e,n){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var r=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var a=n[i];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||t.FLOAT,u=!!a.normalized,c=a.stride||0,f=a.offset||0;o.bind(),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,s,l,u,c,f)}else{if("number"==typeof a)t.vertexAttrib1f(i,a);else if(1===a.length)t.vertexAttrib1f(i,a[0]);else if(2===a.length)t.vertexAttrib2f(i,a[0],a[1]);else if(3===a.length)t.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}t.disableVertexAttribArray(i)}}for(;i<r;++i)t.disableVertexAttribArray(i)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(i=0;i<r;++i)t.disableVertexAttribArray(i)}}},{}],176:[function(t,e,n){"use strict";var r=t("./do-bind.js");function i(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}i.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},i.prototype.update=function(t,e,n){this._elements=e,this._attributes=t,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(t,e,n){n=n||0;var r=this.gl;this._elements?r.drawElements(t,e,this._elementsType,n):r.drawArrays(t,n,e)},e.exports=function(t){return new i(t)}},{"./do-bind.js":175}],177:[function(t,e,n){"use strict";var a=t("./do-bind.js");function o(t,e,n,r,i,a){this.location=t,this.dimension=e,this.a=n,this.b=r,this.c=i,this.d=a}function r(t,e,n){this.gl=t,this._ext=e,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}o.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(t,e,n){if(this.bind(),a(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var r=0;r<t.length;++r){var i=t[r];"number"==typeof i?this._attribs.push(new o(r,1,i)):Array.isArray(i)&&this._attribs.push(new o(r,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!e,this._elementsType=n||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(t,e,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(t,e,this._elementsType,n):r.drawArrays(t,n,e)},e.exports=function(t,e){return new r(t,e,e.createVertexArrayOES())}},{"./do-bind.js":175}],178:[function(t,e,n){"use strict";var a=t("./lib/vao-native.js"),o=t("./lib/vao-emulated.js");function s(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}e.exports=function(t,e,n,r){var i=t.createVertexArray?new s(t):t.getExtension("OES_vertex_array_object");return(t=i?a(t,i):o(t)).update(e,n,r),t}},{"./lib/vao-emulated.js":176,"./lib/vao-native.js":177}],179:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],e=n[1],n=n[2];return t[0]=i*n-a*e,t[1]=a*o-r*n,t[2]=r*e-i*o,t}},{}],180:[function(t,e,n){"use strict";e.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},{}],181:[function(t,e,n){"use strict";e.exports=function(t){var e=t[0],n=t[1],t=t[2];return Math.sqrt(e*e+n*n+t*t)}},{}],182:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=e[0],a=e[1],e=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=e+r*(n[2]-e),t}},{}],183:[function(t,e,n){"use strict";e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],i=n*n+r*r+i*i;0<i&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i);return t}},{}],184:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],e=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*e,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*e,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*e,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*e,t}},{}],185:[function(t,e,n){"use strict";var a=t("glsl-tokenizer"),o=t("atob-lite");e.exports=function(t){for(var e=Array.isArray(t)?t:a(t),n=0;n<e.length;n++){var r=e[n];if("preprocessor"===r.type){var i=r.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(i&&i[2]){r=i[1],i=i[2];return(r?o(i):i).trim()}}}}},{"atob-lite":186,"glsl-tokenizer":193}],186:[function(t,e,n){"use strict";e.exports=function(t){return atob(t)}},{}],187:[function(t,e,n){"use strict";e.exports=function(t){var n,r,i,a=0,o=0,s=S,l=[],u=[],c=1,f=0,h=0,d=!1,p=!1,g="",e=M,y=w;"300 es"===(t=t||{}).version&&(e=A,y=T);for(var m={},v={},a=0;a<e.length;a++)m[e[a]]=!0;for(a=0;a<y.length;a++)v[y[a]]=!0;return function(t){return u=[],null!==t?function(t){a=0,t.toString&&(t=t.toString());var e;g+=t.replace(/\r\n/g,"\n"),i=g.length;for(;n=g[a],a<i;){switch(e=a,s){case O:"/"!==n||"*"!==r?(l.push(n),r=n):(l.push(n),b(l.join("")),s=S),a+=1;break;case C:case P:a=x();break;case L:a=function(){if("."===r&&/\d/.test(n))return s=j,a;if("/"===r&&"*"===n)return s=O,a;if("/"===r&&"/"===n)return s=C,a;if("."===n&&l.length){for(;_(l););return s=j,a}if(";"===n||")"===n||"("===n){if(l.length)for(;_(l););return b(n),s=S,a+1}var t=2===l.length&&"="!==n;if(/[\w_\d\s]/.test(n)||t){for(;_(l););return s=S,a}return l.push(n),r=n,a+1}();break;case R:a=function(){if("."===n)return l.push(n),s=j,r=n,a+1;if(/[eE]/.test(n))return l.push(n),s=j,r=n,a+1;if("x"===n&&1===l.length&&"0"===l[0])return s=B,l.push(n),r=n,a+1;if(/[^\d]/.test(n))return b(l.join("")),s=S,a;return l.push(n),r=n,a+1}();break;case B:a=function(){if(/[^a-fA-F0-9]/.test(n))return b(l.join("")),s=S,a;return l.push(n),r=n,a+1}();break;case j:a=function(){"f"===n&&(l.push(n),r=n,a+=1);if(/[eE]/.test(n))return l.push(n),r=n,a+1;if(("-"===n||"+"===n)&&/[eE]/.test(r))return l.push(n),r=n,a+1;if(/[^\d]/.test(n))return b(l.join("")),s=S,a;return l.push(n),r=n,a+1}();break;case E:a=function(){if(/[^\d\w_]/.test(n)){var t=l.join("");return s=v[t]?z:m[t]?D:N,b(l.join("")),s=S,a}return l.push(n),r=n,a+1}();break;case I:a=function(){if(/[^\s]/g.test(n))return b(l.join("")),s=S,a;return l.push(n),r=n,a+1}();break;case S:a=function(){if(l=l.length?[]:l,"/"===r&&"*"===n)return h=o+a-1,s=O,r=n,a+1;if("/"===r&&"/"===n)return h=o+a-1,s=C,r=n,a+1;if("#"===n)return s=P,h=o+a,a;if(/\s/.test(n))return s=I,h=o+a,a;return d=/\d/.test(n),p=/[^\w_]/.test(n),h=o+a,s=d?R:p?L:E,a}()}e!==a&&("\n"===g[e]?(f=0,++c):++f)}return o+=a,g=g.slice(a),u}(t):function(){l.length&&b(l.join(""));return s=F,b("(eof)"),u}()};function b(t){t.length&&u.push({type:U[s],data:t,position:h,line:c,column:f})}function x(){return"\r"!==n&&"\n"!==n||"\\"===r?(l.push(n),r=n,a+1):(b(l.join("")),s=S,a)}function _(t){var e,n,r=0;do{if(e=k.indexOf(t.slice(0,t.length+r).join("")),n=k[e],-1===e){if(0<r--+t.length)continue;n=t.slice(0,1).join("")}return b(n),h+=n.length,(l=l.slice(n.length)).length}while(1)}};var w=t("./lib/literals"),k=t("./lib/operators"),M=t("./lib/builtins"),T=t("./lib/literals-300es"),A=t("./lib/builtins-300es"),S=999,E=9999,O=0,C=1,P=2,L=3,R=4,j=5,N=6,D=7,z=8,I=9,F=10,B=11,U=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":189,"./lib/builtins-300es":188,"./lib/literals":191,"./lib/literals-300es":190,"./lib/operators":192}],188:[function(t,e,n){"use strict";t=(t=t("./builtins")).slice().filter(function(t){return!/^(gl\_|texture)/.test(t)});e.exports=t.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":189}],189:[function(t,e,n){"use strict";e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],190:[function(t,e,n){"use strict";t=t("./literals");e.exports=t.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":191}],191:[function(t,e,n){"use strict";e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],192:[function(t,e,n){"use strict";e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],193:[function(t,e,n){"use strict";var r=t("./index");e.exports=function(t,e){var n=r(e),e=[];return e=(e=e.concat(n(t))).concat(n(null))}},{"./index":187}],194:[function(t,e,n){"use strict";e.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),n=[],r=0;r<t.length-1;r++)n.push(t[r],e[r]||"");return n.push(t[r]),n.join("")}},{}],195:[function(n,r,t){(function(e){(function(){"use strict";var t=n("is-browser"),t="function"==typeof e.matchMedia?!e.matchMedia("(hover: none)").matches:t;r.exports=t}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":203}],196:[function(t,e,n){"use strict";t=t("is-browser");e.exports=t&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},{"is-browser":203}],197:[function(t,e,n){"use strict";n.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,n=t[e+f];for(f+=h,a=n&(1<<-c)-1,n>>=-c,c+=s;0<c;a=256*a+t[e+f],f+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;0<c;o=256*o+t[e+f],f+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(n?-1:1);o+=Math.pow(2,r),a-=u}return(n?-1:1)*o*Math.pow(2,a-r)},n.write=function(t,e,n,r,i,a){var o,s,l=8*a-i-1,u=(1<<l)-1,c=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,d=r?1:-1,a=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(e+=1<=o+c?f/r:f*Math.pow(2,1-c))*r&&(o++,r/=2),u<=o+c?(s=0,o=u):1<=o+c?(s=(e*r-1)*Math.pow(2,i),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));8<=i;t[n+h]=255&s,h+=d,s/=256,i-=8);for(o=o<<i|s,l+=i;0<l;t[n+h]=255&o,h+=d,o/=256,l-=8);t[n+h-d]|=128*a}},{}],198:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var r=t[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var i=t.slice(0,r+1),a=b.apply(void 0,i);if(0===a)throw new Error("Input not in general position");for(var o=new Array(r+1),s=0;s<=r;++s)o[s]=s;a<0&&(o[0]=1,o[1]=0);for(var l=new L(o,new Array(r+1),!1),u=l.adjacent,c=new Array(r+2),s=0;s<=r;++s){for(var f=o.slice(),h=0;h<=r;++h)h===s&&(f[h]=-1);var d=f[0];f[0]=f[1],f[1]=d;d=new L(f,new Array(r+1),!0);u[s]=d,c[s]=d}c[r+1]=l;for(s=0;s<=r;++s)for(var f=u[s].vertices,p=u[s].adjacent,h=0;h<=r;++h){var g=f[h];if(g<0)p[h]=l;else for(var y=0;y<=r;++y)u[y].vertices.indexOf(g)<0&&(p[h]=u[y])}for(var m=new x(r,i,c),v=!!e,s=r+1;s<n;++s)m.insert(t[s],v);return m.boundary()};var b=t("robust-orientation"),r=t("simplicial-complex").compareCells;function L(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function R(t,e,n){this.vertices=t,this.cell=e,this.index=n}function j(t,e){return r(t.vertices,e.vertices)}L.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var i=[];function x(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter(function(t){return!t.boundary}),this.tuple=new Array(t+1);for(var r=0;r<=t;++r)this.tuple[r]=this.vertices[r];n=(n=i[t])||(i[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],n=0;n<=t;++n)0<n&&e.push(","),e.push("tuple[",n,"]");return e.push(")}return orient"),new Function("test",e.join(""))(b[t+1]||b)}(t));this.orient=n}t=x.prototype;t.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,a=this.vertices,o=[t];for(t.lastVisited=-r;0<o.length;){(t=o.pop()).vertices;for(var s=t.adjacent,l=0;l<=n;++l){var u=s[l];if(u.boundary&&!(u.lastVisited<=-r)){for(var c=u.vertices,f=0;f<=n;++f){var h=c[f];i[f]=h<0?e:a[h]}var d=this.orient();if(0<d)return u;u.lastVisited=-r,0===d&&o.push(u)}}}return null},t.walk=function(t,e){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,a=this.tuple,e=e?this.interior.length*Math.random()|0:this.interior.length-1,o=this.interior[e];t:for(;!o.boundary;){for(var s=o.vertices,l=o.adjacent,u=0;u<=r;++u)a[u]=i[s[u]];o.lastVisited=n;for(u=0;u<=r;++u){var c=l[u];if(!(c.lastVisited>=n)){var f=a[u];a[u]=t;var h=this.orient();if(a[u]=f,h<0){o=c;continue t}c.boundary?c.lastVisited=-n:c.lastVisited=n}}return}return o},t.addPeaks=function(t,e){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,a=this.tuple,o=this.interior,s=this.simplices,l=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,o.push(e);for(var u=[];0<l.length;){var c=(e=l.pop()).vertices,f=e.adjacent,h=c.indexOf(n);if(!(h<0))for(var d=0;d<=r;++d)if(d!==h){var p=f[d];if(p.boundary&&!(p.lastVisited>=n)){var g=p.vertices;if(p.lastVisited!==-n){for(var y=0,m=0;m<=r;++m)g[m]<0?a[y=m]=t:a[m]=i[g[m]];if(0<this.orient()){g[y]=n,p.boundary=!1,o.push(p),l.push(p),p.lastVisited=n;continue}p.lastVisited=-n}var v=p.adjacent,b=c.slice(),x=f.slice(),_=new L(b,x,!0);s.push(_);var w=v.indexOf(e);if(!(w<0)){v[w]=_,x[h]=p,b[d]=-1,x[d]=e,(f[d]=_).flip();for(m=0;m<=r;++m){var k=b[m];if(!(k<0||k===n)){for(var M=new Array(r-1),T=0,A=0;A<=r;++A){var S=b[A];S<0||A===m||(M[T++]=S)}u.push(new R(M,_,m))}}}}}}u.sort(j);for(d=0;d+1<u.length;d+=2){var E=u[d],O=u[d+1],C=E.index,P=O.index;C<0||P<0||(E.cell.adjacent[E.index]=O.cell,O.cell.adjacent[O.index]=E.cell)}},t.insert=function(t,e){var n=this.vertices;n.push(t);var r=this.walk(t,e);if(r){for(var i=this.dimension,a=this.tuple,o=0;o<=i;++o){var s=r.vertices[o];a[o]=s<0?t:n[s]}e=this.orient(a);e<0||0===e&&!(r=this.handleBoundaryDegeneracy(r,t))||this.addPeaks(t,r)}},t.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,r=n.length,i=0;i<r;++i){var a=n[i];if(a.boundary){for(var o=new Array(t),s=a.vertices,l=0,u=0,c=0;c<=t;++c)0<=s[c]?o[l++]=s[c]:u=1&c;u===(1&t)&&(a=o[0],o[0]=o[1],o[1]=a),e.push(o)}}return e}},{"robust-orientation":633,"simplicial-complex":641}],199:[function(t,e,n){"use strict";var o=t("binary-search-bounds");function c(t,e,n,r,i){this.mid=t,this.left=e,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(e?e.count:0)+(n?n.count:0)+r.length}e.exports=function(t){return t&&0!==t.length?new y(g(t)):new y(null)};e=c.prototype;function s(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function r(t,e){e=g(e);t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function i(t,e){var n=t.intervals([]);n.push(e),r(t,n)}function l(t,e){var n=t.intervals([]),e=n.indexOf(e);return e<0?0:(n.splice(e,1),r(t,n),1)}function a(t,e,n){for(var r=0;r<t.length&&t[r][0]<=e;++r){var i=n(t[r]);if(i)return i}}function u(t,e,n){for(var r=t.length-1;0<=r&&t[r][1]>=e;--r){var i=n(t[r]);if(i)return i}}function f(t,e){for(var n=0;n<t.length;++n){var r=e(t[n]);if(r)return r}}function h(t,e){return t-e}function d(t,e){var n=t[0]-e[0];return n||t[1]-e[1]}function p(t,e){var n=t[1]-e[1];return n||t[0]-e[0]}function g(t){if(0===t.length)return null;for(var e=[],n=0;n<t.length;++n)e.push(t[n][0],t[n][1]);e.sort(h);for(var r=e[e.length>>1],i=[],a=[],o=[],n=0;n<t.length;++n){var s=t[n];(s[1]<r?i:r<s[0]?a:o).push(s)}var l=o,u=o.slice();return l.sort(d),u.sort(p),new c(r,g(i),g(a),l,u)}function y(t){this.root=t}e.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},e.insert=function(t){var e,n=this.count-this.leftPoints.length;this.count+=1,t[1]<this.mid?this.left?4*(this.left.count+1)>3*(1+n)?i(this,t):this.left.insert(t):this.left=g([t]):t[0]>this.mid?this.right?4*(this.right.count+1)>3*(1+n)?i(this,t):this.right.insert(t):this.right=g([t]):(e=o.ge(this.leftPoints,t,d),n=o.ge(this.rightPoints,t,p),this.leftPoints.splice(e,0,t),this.rightPoints.splice(n,0,t))},e.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?3*(e-1)<4*(this.right?this.right.count:0)?l(this,t):2===(a=this.left.remove(t))?(this.left=null,--this.count,1):(1===a&&--this.count,a):0;if(t[0]>this.mid)return this.right?3*(e-1)<4*(this.left?this.left.count:0)?l(this,t):2===(a=this.right.remove(t))?(this.right=null,--this.count,1):(1===a&&--this.count,a):0;if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var n=this,r=this.left;r.right;)r=(n=r).right;n===this?r.right=this.right:(i=this.left,a=this.right,n.count-=r.count,n.right=r.left,r.left=i,r.right=a),s(this,r),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return 1}for(var i=o.ge(this.leftPoints,t,d);i<this.leftPoints.length&&this.leftPoints[i][0]===t[0];++i)if(this.leftPoints[i]===t){--this.count,this.leftPoints.splice(i,1);for(var a=o.ge(this.rightPoints,t,p);a<this.rightPoints.length&&this.rightPoints[a][1]===t[1];++a)if(this.rightPoints[a]===t)return this.rightPoints.splice(a,1),1}return 0},e.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(n=this.left.queryPoint(t,e))return n;return a(this.leftPoints,t,e)}if(t>this.mid){var n;if(this.right)if(n=this.right.queryPoint(t,e))return n;return u(this.rightPoints,t,e)}return f(this.leftPoints,e)},e.queryInterval=function(t,e,n){var r;if(t<this.mid&&this.left&&(r=this.left.queryInterval(t,e,n)))return r;if(e>this.mid&&this.right&&(r=this.right.queryInterval(t,e,n)))return r;return e<this.mid?a(this.leftPoints,e,n):t>this.mid?u(this.rightPoints,t,n):f(this.leftPoints,n)};e=y.prototype;e.insert=function(t){this.root?this.root.insert(t):this.root=new c(t[0],null,null,[t],[t])},e.remove=function(t){if(this.root){t=this.root.remove(t);return 2===t&&(this.root=null),0!==t}return!1},e.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},e.queryInterval=function(t,e,n){if(t<=e&&this.root)return this.root.queryInterval(t,e,n)},Object.defineProperty(e,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(e,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":200}],200:[function(t,e,n){arguments[4][101][0].apply(n,arguments)},{dup:101}],201:[function(t,e,n){"use strict";e.exports=function(t,e){e=e||new Array(t.length);for(var n=0;n<t.length;++n)e[t[n]]=n;return e}},{}],202:[function(t,e,n){"use strict";e.exports=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}},{}],203:[function(t,e,n){"use strict";e.exports=!0},{}],204:[function(t,e,n){"use strict";function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(r(t)||"function"==typeof(e=t).readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))||!!t._isBuffer);var e}},{}],205:[function(t,e,n){"use strict";e.exports=a,e.exports.isMobile=a,e.exports.default=a;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(t){var e=(t=t||{}).ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var n=(t.tablet?i:r).test(e);return!n&&t.tablet&&t.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(n=!0),n}},{}],206:[function(t,e,n){"use strict";e.exports=function(t){for(var e,n=t.length,r=0;r<n;r++)if(((e=t.charCodeAt(r))<9||13<e)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||8205<e)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},{}],207:[function(t,e,n){"use strict";e.exports=function(t,e,n){return t*(1-n)+e*n}},{}],208:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.css=n.unsafeCSS=n.CSSResult=n.supportsAdoptingStyleSheets=void 0;var a=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;n.supportsAdoptingStyleSheets=a;var o=Symbol(),s=function(){function n(t,e){if(!function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),e!==o)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}var t,e,r;return t=n,(e=[{key:"toString",value:function(){return this.cssText}},{key:"styleSheet",get:function(){return void 0===this._styleSheet&&(a?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}}])&&i(t.prototype,e),r&&i(t,r),n}();n.CSSResult=s;n.unsafeCSS=function(t){return new s(String(t),o)};n.css=function(r){for(var t=arguments.length,e=new Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var i=e.reduce(function(t,e,n){return t+function(t){if(t instanceof s)return t.cssText;if("number"==typeof t)return t;throw new Error("Value passed to 'css' function must be a 'css' function result: ".concat(t,". Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security."))}(e)+r[n+1]},r[0]);return new s(i,o)}},{}],209:[function(t,e,n){"use strict";function l(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.property=a,n.internalProperty=function(t){return a({attribute:!1,hasChanged:null==t?void 0:t.hasChanged})},n.query=function(i,a){return function(t,e){var n,r={get:function(){return this.renderRoot.querySelector(i)},enumerable:!0,configurable:!0};return a&&(n="symbol"===o(e)?Symbol():"__".concat(e),r.get=function(){return void 0===this[n]&&(this[n]=this.renderRoot.querySelector(i)),this[n]}),void 0!==e?s(r,t,e):u(r,t)}},n.queryAsync=function(r){return function(t,e){var n={get:function(){var s,e=this;return s=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateComplete;case 2:return t.abrupt("return",e.renderRoot.querySelector(r));case 3:case"end":return t.stop()}},t)}),function(){var t=this,o=arguments;return new Promise(function(e,n){var r=s.apply(t,o);function i(t){l(r,e,n,i,a,"next",t)}function a(t){l(r,e,n,i,a,"throw",t)}i(void 0)})}()},enumerable:!0,configurable:!0};return void 0!==e?s(n,t,e):u(n,t)}},n.queryAll=function(r){return function(t,e){var n={get:function(){return this.renderRoot.querySelectorAll(r)},enumerable:!0,configurable:!0};return void 0!==e?s(n,t,e):u(n,t)}},n.eventOptions=function(n){return function(t,e){return void 0!==e?f(n,t,e):c(n,t)}},n.queryAssignedNodes=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return function(t,e){var n={get:function(){var t="slot".concat(r?"[name=".concat(r,"]"):":not([name])"),t=this.renderRoot.querySelector(t),t=t&&t.assignedNodes({flatten:i});return t&&a&&(t=t.filter(function(t){return t.nodeType===Node.ELEMENT_NODE&&t.matches?t.matches(a):h.call(t,a)})),t},enumerable:!0,configurable:!0};return void 0!==e?s(n,t,e):u(n,t)}},n.customElement=void 0;n.customElement=function(i){return function(t){return"function"==typeof t?(n=i,r=t,window.customElements.define(n,r),r):(e=i,{kind:(t=t).kind,elements:t.elements,finisher:function(t){window.customElements.define(e,t)}});var e,n,r}};var r=function(e,n){return"method"!==n.kind||!n.descriptor||"value"in n.descriptor?{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer:function(){"function"==typeof n.initializer&&(this[n.key]=n.initializer.call(this))},finisher:function(t){t.createProperty(n.key,e)}}:Object.assign(Object.assign({},n),{finisher:function(t){t.createProperty(n.key,e)}})},i=function(t,e,n){e.constructor.createProperty(n,t)};function a(n){return function(t,e){return void 0!==e?i(n,t,e):r(n,t)}}var s=function(t,e,n){Object.defineProperty(e,n,t)},u=function(t,e){return{kind:"method",placement:"prototype",key:e.key,descriptor:t}},c=function(e,n){return Object.assign(Object.assign({},n),{finisher:function(t){Object.assign(t.prototype[n.key],e)}})},f=function(t,e,n){Object.assign(e[n],t)};var n=Element.prototype,h=n.msMatchesSelector||n.webkitMatchesSelector},{}],210:[function(t,e,n){"use strict";function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(n){var r=a();return function(){var t,e=s(n);return t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==u(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function d(t){var r="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return i(t,arguments,s(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,t)})(t)}function i(t,e,n){return(i=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&p(r,n.prototype),r}).apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.UpdatingElement=n.notEqual=n.defaultConverter=void 0,window.JSCompiler_renameProperty=function(t,e){return t};var g={toAttribute:function(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute:function(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}};n.defaultConverter=g;function y(t,e){return e!==t&&(e==e||t==t)}n.notEqual=y;var m={attribute:!0,type:String,converter:g,reflect:!1,hasChanged:y},v="finalized",b=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,d(HTMLElement));var t,e,n,s,r,i=h(a);function a(){var t;return function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),(t=i.call(this)).initialize(),t}return t=a,e=[{key:"initialize",value:function(){var e=this;this._updateState=0,this._updatePromise=new Promise(function(t){return e._enableUpdatingResolver=t}),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}},{key:"_saveInstanceProperties",value:function(){var r=this;this.constructor._classProperties.forEach(function(t,e){var n;r.hasOwnProperty(e)&&(n=r[e],delete r[e],r._instanceProperties||(r._instanceProperties=new Map),r._instanceProperties.set(e,n))})}},{key:"_applyInstanceProperties",value:function(){var n=this;this._instanceProperties.forEach(function(t,e){return n[e]=t}),this._instanceProperties=void 0}},{key:"connectedCallback",value:function(){this.enableUpdating()}},{key:"enableUpdating",value:function(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&this._attributeToProperty(t,n)}},{key:"_propertyToAttribute",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:m,n=this.constructor,t=n._attributeNameForProperty(t,r);void 0===t||void 0!==(r=n._propertyValueToAttribute(e,r))&&(this._updateState=8|this._updateState,null==r?this.removeAttribute(t):this.setAttribute(t,r),this._updateState=-9&this._updateState)}},{key:"_attributeToProperty",value:function(t,e){var n,r;8&this._updateState||void 0!==(r=(n=this.constructor)._attributeToPropertyMap.get(t))&&(t=n.getPropertyOptions(r),this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState)}},{key:"requestUpdateInternal",value:function(t,e,n){var r,i=!0;void 0!==t&&(r=this.constructor,n=n||r.getPropertyOptions(t),r._valueHasChanged(this[t],e,n.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,n))):i=!1),!this._hasRequestedUpdate&&i&&(this._updatePromise=this._enqueueUpdate())}},{key:"requestUpdate",value:function(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}},{key:"_enqueueUpdate",value:(s=regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._updateState=4|this._updateState,t.prev=1,t.next=4,this._updatePromise;case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:if(null!=(e=this.performUpdate()))return t.next=12,e;t.next=12;break;case 12:return t.abrupt("return",!this._hasRequestedUpdate);case 13:case"end":return t.stop()}},t,this,[[1,6]])}),r=function(){var t=this,o=arguments;return new Promise(function(e,n){var r=s.apply(t,o);function i(t){c(r,e,n,i,a,"next",t)}function a(t){c(r,e,n,i,a,"throw",t)}i(void 0)})},function(){return r.apply(this,arguments)})},{key:"performUpdate",value:function(){if(this._hasRequestedUpdate){this._instanceProperties&&this._applyInstanceProperties();var e=!1,t=this._changedProperties;try{(e=this.shouldUpdate(t))?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}}},{key:"_markUpdated",value:function(){this._changedProperties=new Map,this._updateState=-5&this._updateState}},{key:"_getUpdateComplete",value:function(){return this._updatePromise}},{key:"shouldUpdate",value:function(){return!0}},{key:"update",value:function(){var n=this;void 0!==this._reflectingProperties&&0<this._reflectingProperties.size&&(this._reflectingProperties.forEach(function(t,e){return n._propertyToAttribute(e,n[e],t)}),this._reflectingProperties=void 0),this._markUpdated()}},{key:"updated",value:function(){}},{key:"firstUpdated",value:function(){}},{key:"_hasRequestedUpdate",get:function(){return 4&this._updateState}},{key:"hasUpdated",get:function(){return 1&this._updateState}},{key:"updateComplete",get:function(){return this._getUpdateComplete()}}],n=[{key:"_ensureClassProperties",value:function(){var t,n=this;this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))||(this._classProperties=new Map,void 0!==(t=Object.getPrototypeOf(this)._classProperties)&&t.forEach(function(t,e){return n._classProperties.set(e,t)}))}},{key:"createProperty",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:m;this._ensureClassProperties(),this._classProperties.set(t,n),n.noAccessor||this.prototype.hasOwnProperty(t)||(e="symbol"===u(t)?Symbol():"__".concat(t),void 0!==(n=this.getPropertyDescriptor(t,e,n))&&Object.defineProperty(this.prototype,t,n))}},{key:"getPropertyDescriptor",value:function(n,r,i){return{get:function(){return this[r]},set:function(t){var e=this[n];this[r]=t,this.requestUpdateInternal(n,e,i)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(t){return this._classProperties&&this._classProperties.get(t)||m}},{key:"finalize",value:function(){var t=Object.getPrototypeOf(this);if(t.hasOwnProperty(v)||t.finalize(),this[v]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){var e=this.properties,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}([].concat(o(Object.getOwnPropertyNames(e)),o("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[])));try{for(n.s();!(r=n.n()).done;){var r=r.value;this.createProperty(r,e[r])}}catch(t){n.e(t)}finally{n.f()}}}},{key:"_attributeNameForProperty",value:function(t,e){e=e.attribute;return!1===e?void 0:"string"==typeof e?e:"string"==typeof t?t.toLowerCase():void 0}},{key:"_valueHasChanged",value:function(t,e,n){return(2<arguments.length&&void 0!==n?n:y)(t,e)}},{key:"_propertyValueFromAttribute",value:function(t,e){var n=e.type,e=e.converter||g,e="function"==typeof e?e:e.fromAttribute;return e?e(t,n):t}},{key:"_propertyValueToAttribute",value:function(t,e){if(void 0!==e.reflect){var n=e.type,e=e.converter;return(e&&e.toAttribute||g.toAttribute)(t,n)}}},{key:"observedAttributes",get:function(){var n=this;this.finalize();var r=[];return this._classProperties.forEach(function(t,e){t=n._attributeNameForProperty(e,t);void 0!==t&&(n._attributeToPropertyMap.set(t,e),r.push(t))}),r}}],e&&f(t.prototype,e),n&&f(t,n),a}();n.UpdatingElement=b,b.finalized=!0},{}],211:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0});var r={LitElement:!0,html:!0,svg:!0,TemplateResult:!0,SVGTemplateResult:!0};Object.defineProperty(n,"html",{enumerable:!0,get:function(){return l.html}}),Object.defineProperty(n,"svg",{enumerable:!0,get:function(){return l.svg}}),Object.defineProperty(n,"TemplateResult",{enumerable:!0,get:function(){return l.TemplateResult}}),Object.defineProperty(n,"SVGTemplateResult",{enumerable:!0,get:function(){return l.SVGTemplateResult}}),n.LitElement=void 0;var a=t("lit-html/lib/shady-render.js"),o=t("./lib/updating-element.js");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in n&&n[t]===o[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}}))});var s=t("./lib/decorators.js");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in n&&n[t]===s[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}}))});var l=t("lit-html/lit-html.js"),u=t("./lib/css-tag.js");function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return t=r?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in n&&n[t]===u[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return u[t]}}))}),(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");var g={},t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(i,o.UpdatingElement);var t,e,n,r=d(i);function i(){return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return t=i,n=[{key:"getStyles",value:function(){return this.styles}},{key:"_getUniqueStyles",value:function(){var t,e,n;this.hasOwnProperty(JSCompiler_renameProperty("_styles",this))||(t=this.getStyles(),Array.isArray(t)?(e=function n(t,e){return t.reduceRight(function(t,e){return Array.isArray(e)?n(e,t):(t.add(e),t)},e)}(t,new Set),n=[],e.forEach(function(t){return n.unshift(t)}),this._styles=n):this._styles=void 0===t?[]:[t],this._styles=this._styles.map(function(t){if(t instanceof CSSStyleSheet&&!u.supportsAdoptingStyleSheets){var e=Array.prototype.slice.call(t.cssRules).reduce(function(t,e){return t+e.cssText},"");return(0,u.unsafeCSS)(e)}return t}))}}],(e=[{key:"initialize",value:function(){f(p(i.prototype),"initialize",this).call(this),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}},{key:"createRenderRoot",value:function(){return this.attachShadow({mode:"open"})}},{key:"adoptStyles",value:function(){var t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?u.supportsAdoptingStyleSheets?this.renderRoot.adoptedStyleSheets=t.map(function(t){return t instanceof CSSStyleSheet?t:t.styleSheet}):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(function(t){return t.cssText}),this.localName))}},{key:"connectedCallback",value:function(){f(p(i.prototype),"connectedCallback",this).call(this),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}},{key:"update",value:function(t){var n=this,e=this.render();f(p(i.prototype),"update",this).call(this,t),e!==g&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(function(t){var e=document.createElement("style");e.textContent=t.cssText,n.renderRoot.appendChild(e)}))}},{key:"render",value:function(){return g}}])&&c(t.prototype,e),n&&c(t,n),i}();(n.LitElement=t).finalized=!0,t.render=a.render},{"./lib/css-tag.js":208,"./lib/decorators.js":209,"./lib/updating-element.js":210,"lit-html/lib/shady-render.js":220,"lit-html/lit-html.js":225}],212:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ifDefined=void 0;var i=t("../lit-html.js"),a=new WeakMap,t=(0,i.directive)(function(r){return function(t){var e,n=a.get(t);void 0===r&&t instanceof i.AttributePart?void 0===n&&a.has(t)||(e=t.committer.name,t.committer.element.removeAttribute(e)):r!==n&&t.setValue(r),a.set(t,r)}});n.ifDefined=t},{"../lit-html.js":225}],213:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultTemplateProcessor=n.DefaultTemplateProcessor=void 0;var a=t("./parts.js");function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}var t,n,r;return t=e,(n=[{key:"handleAttributeExpressions",value:function(t,e,n,r){var i=e[0];return"."===i?new a.PropertyCommitter(t,e.slice(1),n).parts:"@"===i?[new a.EventPart(t,e.slice(1),r.eventContext)]:"?"===i?[new a.BooleanAttributePart(t,e.slice(1),n)]:new a.AttributeCommitter(t,e,n).parts}},{key:"handleTextExpression",value:function(t){return new a.NodePart(t)}}])&&i(t.prototype,n),r&&i(t,r),e}(),t=new(n.DefaultTemplateProcessor=t);n.defaultTemplateProcessor=t},{"./parts.js":218}],214:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isDirective=n.directive=void 0;var r=new WeakMap;n.directive=function(e){return function(){var t=e.apply(void 0,arguments);return r.set(t,!0),t}};n.isDirective=function(t){return"function"==typeof t&&r.has(t)}},{}],215:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.removeNodes=n.reparentNodes=n.isCEPolyfill=void 0;var r="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback;n.isCEPolyfill=r;n.reparentNodes=function(t,e,n,r){for(var i=2<arguments.length&&void 0!==n?n:null,a=3<arguments.length&&void 0!==r?r:null;e!==i;){var o=e.nextSibling;t.insertBefore(e,a),e=o}};n.removeNodes=function(t,e,n){for(var r=2<arguments.length&&void 0!==n?n:null;e!==r;){var i=e.nextSibling;t.removeChild(e),e=i}}},{}],216:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.removeNodesFromTemplate=function(t,e){var n=t.element.content,r=t.parts,i=document.createTreeWalker(n,h,null,!1),a=d(r),o=r[a],s=-1,l=0,u=[],c=null;for(;i.nextNode();){s++;var f=i.currentNode;for(f.previousSibling===c&&(c=null),e.has(f)&&(u.push(f),null===c&&(c=f)),null!==c&&l++;void 0!==o&&o.index===s;)o.index=null!==c?-1:o.index-l,a=d(r,a),o=r[a]}u.forEach(function(t){return t.parentNode.removeChild(t)})},n.insertNodeIntoTemplate=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=t.element.content,i=t.parts;if(null==n)return void r.appendChild(e);var a=document.createTreeWalker(r,h,null,!1),o=d(i),s=0,l=-1;for(;a.nextNode();)for(l++,a.currentNode===n&&(s=u(e),n.parentNode.insertBefore(e,n));-1!==o&&i[o].index===l;){if(0<s){for(;-1!==o;)i[o].index+=s,o=d(i,o);return}o=d(i,o)}};var i=t("./template.js"),h=133;var u=function(t){for(var e=11===t.nodeType?0:1,n=document.createTreeWalker(t,h,null,!1);n.nextNode();)e++;return e},d=function(t,e){for(var n=(1<arguments.length&&void 0!==e?e:-1)+1;n<t.length;n++){var r=t[n];if((0,i.isTemplatePartActive)(r))return n}return-1}},{"./template.js":224}],217:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nothing=n.noChange=void 0;n.noChange={};n.nothing={}},{}],218:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EventPart=n.PropertyPart=n.PropertyCommitter=n.BooleanAttributePart=n.NodePart=n.AttributePart=n.AttributeCommitter=n.isIterable=n.isPrimitive=void 0;var a=t("./directive.js"),r=t("./dom.js"),s=t("./part.js"),i=t("./template-instance.js"),l=t("./template-result.js"),u=t("./template.js");function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(n);return t=r?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==b(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),t}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t){return null===t||!("object"===b(t)||"function"==typeof t)}n.isPrimitive=x;function _(t){return Array.isArray(t)||!(!t||!t[Symbol.iterator])}n.isIterable=_;var w=function(){function i(t,e,n){y(this,i),this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(var r=0;r<n.length-1;r++)this.parts[r]=this._createPart()}return v(i,[{key:"_createPart",value:function(){return new k(this)}},{key:"_getValue",value:function(){var t=this.strings,e=t.length-1,n=this.parts;if(1==e&&""===t[0]&&""===t[1]){var r=n[0].value;if("symbol"===b(r))return String(r);if("string"==typeof r||!_(r))return r}for(var i="",a=0;a<e;a++){i+=t[a];var o=n[a];if(void 0!==o){o=o.value;if(x(o)||!_(o))i+="string"==typeof o?o:String(o);else{var s=p(o);try{for(s.s();!(l=s.n()).done;){var l=l.value;i+="string"==typeof l?l:String(l)}}catch(t){s.e(t)}finally{s.f()}}}}return i+=t[e]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),i}();n.AttributeCommitter=w;var k=function(){function e(t){y(this,e),this.value=void 0,this.committer=t}return v(e,[{key:"setValue",value:function(t){t===s.noChange||x(t)&&t===this.value||(this.value=t,(0,a.isDirective)(t)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;(0,a.isDirective)(this.value);){var t=this.value;this.value=s.noChange,t(this)}this.value!==s.noChange&&this.committer.commit()}}]),e}();n.AttributePart=k;t=function(){function o(t){y(this,o),this.value=void 0,this.__pendingValue=void 0,this.options=t}return v(o,[{key:"appendInto",value:function(t){this.startNode=t.appendChild((0,u.createMarker)()),this.endNode=t.appendChild((0,u.createMarker)())}},{key:"insertAfterNode",value:function(t){this.startNode=t,this.endNode=t.nextSibling}},{key:"appendIntoPart",value:function(t){t.__insert(this.startNode=(0,u.createMarker)()),t.__insert(this.endNode=(0,u.createMarker)())}},{key:"insertAfterPart",value:function(t){t.__insert(this.startNode=(0,u.createMarker)()),this.endNode=t.endNode,t.endNode=this.startNode}},{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){if(null!==this.startNode.parentNode){for(;(0,a.isDirective)(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=s.noChange,t(this)}var e=this.__pendingValue;e!==s.noChange&&(x(e)?e!==this.value&&this.__commitText(e):e instanceof l.TemplateResult?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):_(e)?this.__commitIterable(e):e===s.nothing?(this.value=s.nothing,this.clear()):this.__commitText(e))}}},{key:"__insert",value:function(t){this.endNode.parentNode.insertBefore(t,this.endNode)}},{key:"__commitNode",value:function(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}},{key:"__commitText",value:function(t){var e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}},{key:"__commitTemplateResult",value:function(t){var e,n=this.options.templateFactory(t);this.value instanceof i.TemplateInstance&&this.value.template===n?this.value.update(t.values):(n=(e=new i.TemplateInstance(n,t.processor,this.options))._clone(),e.update(t.values),this.__commitNode(n),this.value=e)}},{key:"__commitIterable",value:function(t){Array.isArray(this.value)||(this.value=[],this.clear());var e=this.value,n=0,r=p(t);try{for(r.s();!(a=r.n()).done;){var i,a=a.value;void 0===(i=e[n])&&(i=new o(this.options),e.push(i),0===n?i.appendIntoPart(this):i.insertAfterPart(e[n-1])),i.setValue(a),i.commit(),n++}}catch(t){r.e(t)}finally{r.f()}n<e.length&&(e.length=n,this.clear(i&&i.endNode))}},{key:"clear",value:function(t){t=0<arguments.length&&void 0!==t?t:this.startNode;(0,r.removeNodes)(this.startNode.parentNode,t.nextSibling,this.endNode)}}]),o}();n.NodePart=t;t=function(){function r(t,e,n){if(y(this,r),this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}return v(r,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;(0,a.isDirective)(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=s.noChange,t(this)}var e;this.__pendingValue!==s.noChange&&(e=!!this.__pendingValue,this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=s.noChange)}}]),r}();n.BooleanAttributePart=t;t=function(){c(i,w);var r=h(i);function i(t,e,n){return y(this,i),(e=r.call(this,t,e,n)).single=2===n.length&&""===n[0]&&""===n[1],e}return v(i,[{key:"_createPart",value:function(){return new M(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:o(d(i.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),i}();n.PropertyCommitter=t;var M=function(){c(e,k);var t=h(e);function e(){return y(this,e),t.apply(this,arguments)}return e}();n.PropertyPart=M;var T=!1;!function(){try{var t={get capture(){return!(T=!0)}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}}();t=function(){function i(t,e,n){var r=this;y(this,i),this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=function(t){return r.handleEvent(t)}}return v(i,[{key:"setValue",value:function(t){this.__pendingValue=t}},{key:"commit",value:function(){for(;(0,a.isDirective)(this.__pendingValue);){var t=this.__pendingValue;this.__pendingValue=s.noChange,t(this)}var e,n,r;this.__pendingValue!==s.noChange&&(e=this.__pendingValue,r=this.value,n=null==e||null!=r&&(e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive),r=null!=e&&(null==r||n),n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=A(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=s.noChange)}},{key:"handleEvent",value:function(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}]),i}();n.EventPart=t;var A=function(t){return t&&(T?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)}},{"./directive.js":214,"./dom.js":215,"./part.js":217,"./template-instance.js":222,"./template-result.js":223,"./template.js":224}],219:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.render=n.parts=void 0;var i=t("./dom.js"),a=t("./parts.js"),o=t("./template-factory.js"),s=new WeakMap;n.parts=s;n.render=function(t,e,n){var r=s.get(e);void 0===r&&((0,i.removeNodes)(e,e.firstChild),s.set(e,r=new a.NodePart(Object.assign({templateFactory:o.templateFactory},n))),r.appendInto(e)),r.setValue(t),r.commit()}},{"./dom.js":215,"./parts.js":218,"./template-factory.js":221}],220:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"html",{enumerable:!0,get:function(){return r.html}}),Object.defineProperty(n,"svg",{enumerable:!0,get:function(){return r.svg}}),Object.defineProperty(n,"TemplateResult",{enumerable:!0,get:function(){return r.TemplateResult}}),n.render=n.shadyTemplateFactory=void 0;var l=t("./dom.js"),h=t("./modify-template.js"),u=t("./render.js"),d=t("./template-factory.js"),c=t("./template-instance.js"),o=t("./template.js"),r=t("../lit-html.js");function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){return"".concat(t,"--").concat(e)}var g=!0;void 0===window.ShadyCSS?g=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),g=!1);function y(a){return function(t){var e=p(t.type,a),n=d.templateCaches.get(e);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},d.templateCaches.set(e,n));var r=n.stringsArray.get(t.strings);if(void 0!==r)return r;var i=t.strings.join(o.marker);return void 0===(r=n.keyString.get(i))&&(e=t.getTemplateElement(),g&&window.ShadyCSS.prepareTemplateDom(e,a),r=new o.Template(t,e),n.keyString.set(i,r)),n.stringsArray.set(t.strings,r),r}}n.shadyTemplateFactory=y;function m(t,e,n){b.add(t);var r=n?n.element:document.createElement("template"),i=e.querySelectorAll("style"),a=i.length;if(0!==a){for(var o,s=document.createElement("style"),l=0;l<a;l++){var u=i[l];u.parentNode.removeChild(u),s.textContent+=u.textContent}o=t,v.forEach(function(t){t=d.templateCaches.get(p(t,o));void 0!==t&&t.keyString.forEach(function(t){var e=t.element.content,n=new Set;Array.from(e.querySelectorAll("style")).forEach(function(t){n.add(t)}),(0,h.removeNodesFromTemplate)(t,n)})});var c=r.content;n?(0,h.insertNodeIntoTemplate)(n,s,c.firstChild):c.insertBefore(s,c.firstChild),window.ShadyCSS.prepareTemplateStyles(r,t);var f=c.querySelector("style");window.ShadyCSS.nativeShadow&&null!==f?e.insertBefore(f.cloneNode(!0),e.firstChild):n&&(c.insertBefore(s,c.firstChild),(c=new Set).add(s),(0,h.removeNodesFromTemplate)(n,c))}else window.ShadyCSS.prepareTemplateStyles(r,t)}var v=["html","svg"],b=new Set;n.render=function(t,e,n){if(!n||"object"!==f(n)||!n.scopeName)throw new Error("The `scopeName` option is required.");var r=n.scopeName,i=u.parts.has(e),a=g&&11===e.nodeType&&!!e.host,o=a&&!b.has(r),s=o?document.createDocumentFragment():e;(0,u.render)(t,s,Object.assign({templateFactory:y(r)},n)),o&&(n=u.parts.get(s),u.parts.delete(s),o=n.value instanceof c.TemplateInstance?n.value.template:void 0,m(r,s,o),(0,l.removeNodes)(e,e.firstChild),e.appendChild(s),u.parts.set(e,n)),!i&&a&&window.ShadyCSS.styleElement(e.host)}},{"../lit-html.js":225,"./dom.js":215,"./modify-template.js":216,"./render.js":219,"./template-factory.js":221,"./template-instance.js":222,"./template.js":224}],221:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.templateFactory=function(t){var e=a.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},a.set(t.type,e));var n=e.stringsArray.get(t.strings);if(void 0!==n)return n;var r=t.strings.join(i.marker);void 0===(n=e.keyString.get(r))&&(n=new i.Template(t,t.getTemplateElement()),e.keyString.set(r,n));return e.stringsArray.set(t.strings,n),n},n.templateCaches=void 0;var i=t("./template.js");var a=new Map;n.templateCaches=a},{"./template.js":224}],222:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TemplateInstance=void 0;var u=t("./dom.js"),c=t("./template.js");function f(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t=function(){function r(t,e,n){!function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.__parts=[],this.template=t,this.processor=e,this.options=n}var t,e,n;return t=r,(e=[{key:"update",value:function(t){var e=0,n=o(this.__parts);try{for(n.s();!(r=n.n()).done;){var r=r.value;void 0!==r&&r.setValue(t[e]),e++}}catch(t){n.e(t)}finally{n.f()}var i=o(this.__parts);try{for(i.s();!(a=i.n()).done;){var a=a.value;void 0!==a&&a.commit()}}catch(t){i.e(t)}finally{i.f()}}},{key:"_clone",value:function(){for(var t,e,n=u.isCEPolyfill?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),r=[],i=this.template.parts,a=document.createTreeWalker(n,133,null,!1),o=0,s=0,l=a.nextNode();o<i.length;)if(t=i[o],(0,c.isTemplatePartActive)(t)){for(;s<t.index;)s++,"TEMPLATE"===l.nodeName&&(r.push(l),a.currentNode=l.content),null===(l=a.nextNode())&&(a.currentNode=r.pop(),l=a.nextNode());"node"===t.type?((e=this.processor.handleTextExpression(this.options)).insertAfterNode(l.previousSibling),this.__parts.push(e)):(e=this.__parts).push.apply(e,f(this.processor.handleAttributeExpressions(l,t.name,t.strings,this.options))),o++}else this.__parts.push(void 0),o++;return u.isCEPolyfill&&(document.adoptNode(n),customElements.upgrade(n)),n}}])&&i(t.prototype,e),n&&i(t,n),r}();n.TemplateInstance=t},{"./dom.js":215,"./template.js":224}],223:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.SVGTemplateResult=n.TemplateResult=void 0;var a=t("./dom.js"),o=t("./template.js");function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=r?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var d=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:function(t){return t}}),p=" ".concat(o.marker," "),g=function(){function i(t,e,n,r){f(this,i),this.strings=t,this.values=e,this.type=n,this.processor=r}return h(i,[{key:"getHTML",value:function(){for(var t=this.strings.length-1,e="",n=!1,r=0;r<t;r++){var i=this.strings[r],a=i.lastIndexOf("\x3c!--"),n=(-1<a||n)&&-1===i.indexOf("--\x3e",a+1),a=o.lastAttributeNameRegex.exec(i);e+=null===a?i+(n?p:o.nodeMarker):i.substr(0,a.index)+a[1]+a[2]+o.boundAttributeSuffix+a[3]+o.marker}return e+=this.strings[t]}},{key:"getTemplateElement",value:function(){var t=document.createElement("template"),e=this.getHTML();return void 0!==d&&(e=d.createHTML(e)),t.innerHTML=e,t}}]),i}();n.TemplateResult=g;t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(r,g);var t=u(r);function r(){return f(this,r),t.apply(this,arguments)}return h(r,[{key:"getHTML",value:function(){return"<svg>".concat(s(c(r.prototype),"getHTML",this).call(this),"</svg>")}},{key:"getTemplateElement",value:function(){var t=s(c(r.prototype),"getTemplateElement",this).call(this),e=t.content,n=e.firstChild;return e.removeChild(n),(0,a.reparentNodes)(e,n.firstChild),t}}]),r}();n.SVGTemplateResult=t},{"./dom.js":215,"./template.js":224}],224:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.lastAttributeNameRegex=n.createMarker=n.isTemplatePartActive=n.Template=n.boundAttributeSuffix=n.markerRegex=n.nodeMarker=n.marker=void 0;var P="{{lit-".concat(String(Math.random()).slice(2),"}}");n.marker=P;var r="\x3c!--".concat(P,"--\x3e");n.nodeMarker=r;var L=new RegExp("".concat(P,"|").concat(r));n.markerRegex=L;var R="$lit$";n.boundAttributeSuffix=R;r=function e(t,n){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.parts=[],this.element=n;for(var r=[],i=[],a=document.createTreeWalker(n.content,133,null,!1),o=0,s=-1,l=0,u=t.strings,c=t.values.length;l<c;){var f=a.nextNode();if(null!==f){if(s++,1===f.nodeType){if(f.hasAttributes()){for(var h=f.attributes,d=h.length,p=0,g=0;g<d;g++)j(h[g].name,R)&&p++;for(;0<p--;){var y=u[l],m=D.exec(y)[2],v=m.toLowerCase()+R,y=f.getAttribute(v);f.removeAttribute(v);y=y.split(L);this.parts.push({type:"attribute",index:s,name:m,strings:y}),l+=y.length-1}}"TEMPLATE"===f.tagName&&(i.push(f),a.currentNode=f.content)}else if(3===f.nodeType){var b=f.data;if(0<=b.indexOf(P)){for(var x=f.parentNode,_=b.split(L),w=_.length-1,k=0;k<w;k++){var M,T=void 0,A=_[k],T=""===A?N():(null!==(M=D.exec(A))&&j(M[2],R)&&(A=A.slice(0,M.index)+M[1]+M[2].slice(0,-R.length)+M[3]),document.createTextNode(A));x.insertBefore(T,f),this.parts.push({type:"node",index:++s})}""===_[w]?(x.insertBefore(N(),f),r.push(f)):f.data=_[w],l+=w}}else if(8===f.nodeType)if(f.data===P){b=f.parentNode;null!==f.previousSibling&&s!==o||(s++,b.insertBefore(N(),f)),o=s,this.parts.push({type:"node",index:s}),null===f.nextSibling?f.data="":(r.push(f),s--),l++}else for(var S=-1;-1!==(S=f.data.indexOf(P,S+1));)this.parts.push({type:"node",index:-1}),l++}else a.currentNode=i.pop()}for(var E=0,O=r;E<O.length;E++){var C=O[E];C.parentNode.removeChild(C)}};n.Template=r;var j=function(t,e){var n=t.length-e.length;return 0<=n&&t.slice(n)===e};n.isTemplatePartActive=function(t){return-1!==t.index};var N=function(){return document.createComment("")};n.createMarker=N;var D=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;n.lastAttributeNameRegex=D},{}],225:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DefaultTemplateProcessor",{enumerable:!0,get:function(){return i.DefaultTemplateProcessor}}),Object.defineProperty(n,"defaultTemplateProcessor",{enumerable:!0,get:function(){return i.defaultTemplateProcessor}}),Object.defineProperty(n,"SVGTemplateResult",{enumerable:!0,get:function(){return a.SVGTemplateResult}}),Object.defineProperty(n,"TemplateResult",{enumerable:!0,get:function(){return a.TemplateResult}}),Object.defineProperty(n,"directive",{enumerable:!0,get:function(){return r.directive}}),Object.defineProperty(n,"isDirective",{enumerable:!0,get:function(){return r.isDirective}}),Object.defineProperty(n,"removeNodes",{enumerable:!0,get:function(){return o.removeNodes}}),Object.defineProperty(n,"reparentNodes",{enumerable:!0,get:function(){return o.reparentNodes}}),Object.defineProperty(n,"noChange",{enumerable:!0,get:function(){return s.noChange}}),Object.defineProperty(n,"nothing",{enumerable:!0,get:function(){return s.nothing}}),Object.defineProperty(n,"AttributeCommitter",{enumerable:!0,get:function(){return l.AttributeCommitter}}),Object.defineProperty(n,"AttributePart",{enumerable:!0,get:function(){return l.AttributePart}}),Object.defineProperty(n,"BooleanAttributePart",{enumerable:!0,get:function(){return l.BooleanAttributePart}}),Object.defineProperty(n,"EventPart",{enumerable:!0,get:function(){return l.EventPart}}),Object.defineProperty(n,"isIterable",{enumerable:!0,get:function(){return l.isIterable}}),Object.defineProperty(n,"isPrimitive",{enumerable:!0,get:function(){return l.isPrimitive}}),Object.defineProperty(n,"NodePart",{enumerable:!0,get:function(){return l.NodePart}}),Object.defineProperty(n,"PropertyCommitter",{enumerable:!0,get:function(){return l.PropertyCommitter}}),Object.defineProperty(n,"PropertyPart",{enumerable:!0,get:function(){return l.PropertyPart}}),Object.defineProperty(n,"parts",{enumerable:!0,get:function(){return u.parts}}),Object.defineProperty(n,"render",{enumerable:!0,get:function(){return u.render}}),Object.defineProperty(n,"templateCaches",{enumerable:!0,get:function(){return c.templateCaches}}),Object.defineProperty(n,"templateFactory",{enumerable:!0,get:function(){return c.templateFactory}}),Object.defineProperty(n,"TemplateInstance",{enumerable:!0,get:function(){return f.TemplateInstance}}),Object.defineProperty(n,"createMarker",{enumerable:!0,get:function(){return h.createMarker}}),Object.defineProperty(n,"isTemplatePartActive",{enumerable:!0,get:function(){return h.isTemplatePartActive}}),Object.defineProperty(n,"Template",{enumerable:!0,get:function(){return h.Template}}),n.svg=n.html=void 0;var i=t("./lib/default-template-processor.js"),a=t("./lib/template-result.js"),r=t("./lib/directive.js"),o=t("./lib/dom.js"),s=t("./lib/part.js"),l=t("./lib/parts.js"),u=t("./lib/render.js"),c=t("./lib/template-factory.js"),f=t("./lib/template-instance.js"),h=t("./lib/template.js");"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");n.html=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new a.TemplateResult(t,n,"html",i.defaultTemplateProcessor)};n.svg=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new a.SVGTemplateResult(t,n,"svg",i.defaultTemplateProcessor)}},{"./lib/default-template-processor.js":213,"./lib/directive.js":214,"./lib/dom.js":215,"./lib/part.js":217,"./lib/parts.js":218,"./lib/render.js":219,"./lib/template-factory.js":221,"./lib/template-instance.js":222,"./lib/template-result.js":223,"./lib/template.js":224}],226:[function(t,e,n){"use strict";function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return!o&&t.classList||new r(t)},n.setForceClassList=function(t){o=t};var r=function(){function r(t){!function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.classes=new Set;var e=i(((this.element=t).getAttribute("class")||"").split(/\s+/));try{for(e.s();!(n=e.n()).done;){var n=n.value;this.classes.add(n)}}catch(t){e.e(t)}finally{e.f()}}var t,e,n;return t=r,(e=[{key:"add",value:function(t){this.classes.add(t),this.commit()}},{key:"remove",value:function(t){this.classes.delete(t),this.commit()}},{key:"commit",value:function(){var e="";this.classes.forEach(function(t){return e+=t+" "}),this.element.setAttribute("class",e)}}])&&a(t.prototype,e),n&&a(t,n),r}(),o=!1},{}],227:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.transitionBase=function(_){return function(b,x){return function(){var e=A(regeneratorRuntime.mark(function t(n){var e,r,i,a,o,s,l,u,c,f,h,d,p,g,y,m,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(y=function(){return(y=A(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=o,t.t0)return t.next=4,o();t.next=4;break;case 4:if(t.t1=i,t.t1)return t.next=8,_.transition(e,i,x);t.next=8;break;case 8:if(h(e),t.t2=l,t.t2)return t.next=13,l();t.next=13;break;case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)},g=function(){return y.apply(this,arguments)},p=function(){return(p=A(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=a,t.t0)return t.next=4,a();t.next=4;break;case 4:if(t.t1=r,t.t1)return t.next=8,_.transition(e,r,x);t.next=8;break;case 8:if(t.t2=s,t.t2)return t.next=12,s();t.next=12;break;case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)},d=function(){return p.apply(this,arguments)},h=function(t){var e=t.startNode,n=t.endNode;try{e&&t.clear()}catch(n){}e&&e.parentNode&&e.parentNode.removeChild(e),n&&n.parentNode&&n.parentNode.removeChild(n)},f=function(t){var e=new w.NodePart(n.options);return e.appendIntoPart(n),e.setValue(t),e.commit(),e},n instanceof w.NodePart){t.next=8;break}throw new Error("The `transition` directive can only be used on nodes");case 8:if("string"!=typeof(b=b||(0,w.html)(T()))&&"number"!=typeof b||(b=(0,w.html)(M(),b)),e=(0,k.marked)(b),r=x.enter,i=x.leave,a=x.onEnter,o=x.onLeave,s=x.onAfterEnter,l=x.onAfterLeave,v=x.mode,u=void 0===v?"in-out":v,c=S.get(n),(0,k.pageVisible)()){t.next=33;break}if(c&&c.last&&h(c.last),t.t0=o,t.t0)return t.next=19,o();t.next=19;break;case 19:if(t.t1=l,t.t1)return t.next=23,l();t.next=23;break;case 23:if(t.t2=a,t.t2)return t.next=27,a();t.next=27;break;case 27:if(c&&(c.last=f(b)),t.t3=s,t.t3)return t.next=32,s();t.next=32;break;case 32:return t.abrupt("return");case 33:if(c||S.set(n,c={children:new Map,styles:new Map,transition:x}),_.init&&_.init({transition:x,data:c,add:f,remove:h}),!c.last||!e||e!==c.name){t.next=40;break}c.last.setValue(b),c.last.commit(),t.next=64;break;case 40:if(c.name=e,"in-out"===u)return m=c.last,t.next=45,d(c.last=f(b));t.next=51;break;case 45:if(t.t4=m,t.t4)return t.next=49,g(m);t.next=49;break;case 49:t.next=64;break;case 51:if("out-in"!==u){t.next=61;break}if(v=c.last,t.t5=v,t.t5)return t.next=57,g(v);t.next=57;break;case 57:return t.next=59,d(c.last=f(b));case 59:t.next=64;break;case 61:return c.last&&g(c.last),t.next=64,d(c.last=f(b));case 64:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()}};var w=t("lit-html"),k=t("./utils");function M(){var t=r(['<div style="display: inline-block">',"</div>"]);return M=function(){return t},t}function T(){var t=r(["<div></div>"]);return T=function(){return t},t}function r(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function l(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function A(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){var r=s.apply(t,o);function i(t){l(r,e,n,i,a,"next",t)}function a(t){l(r,e,n,i,a,"throw",t)}i(void 0)})}}var S=new WeakMap},{"./utils":228,"lit-html":225}],228:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextFrame=o,n.classChanged=function(t,r){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return new Promise(function(e){var n=new MutationObserver(a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.disconnect(),t.t0=i,t.t0)return t.next=5,o();t.next=5;break;case 5:e();case 6:case"end":return t.stop()}},t)})));n.observe(t,{attributes:!0,attributeFilter:["class"]}),r&&r()})},n.partDomSingle=function(t){t=function(t){var e=[],n=t.startNode.nextSibling;for(;n!==t.endNode;)e.push(n),n=n.nextSibling;return e}(t).filter(function(t){return!("#text"===(t=t).nodeName&&!(null!==(t=t.nodeValue)&&void 0!==t&&t.trim()))});if(1==t.length)return t[0];throw new Error("lit-transition directive expects exactly one child node,\n      but was passed ".concat(t.map(function(t){return t.nodeName}).join(", ")))},n.mark=function(t,e){return c.set(t,e),t},n.marked=function(t){return c.get(t)},n.needsLock=function(t,a){var o=u(t);if(o){t=function(){var t,e=document.createElement("div"),n=(0,s.default)(e),r=o.shadowRoot||o;t=a,Array.isArray(t)?t.forEach(function(t){return n.add(t)}):n.add(t),r.appendChild(e);var i=window.getComputedStyle(e).position;return r.removeChild(e),i}();if("absolute"===t)return"relative"===window.getComputedStyle(o).position}return!1},n.recordExtents=function(t){var e=t.getBoundingClientRect(),n=0,r=0,i=t.offsetParent;for(;t&&t!==document&&!(t instanceof DocumentFragment)&&t!==i;)n+=t.offsetTop-(t.scrollTop||0),r+=t.offsetLeft-(t.scrollLeft||0),t=u(t);return{left:r,top:n,width:e.width,height:e.height}},n.applyExtents=function(t,e){t.style.marginLeft="0px",t.style.marginTop="0px",t.style.left=e.left+"px",t.style.top=e.top+"px",t.style.width=e.width+"px",t.style.height=e.height+"px"},n.pageVisible=function(){return i};var r,s=(r=t("./class-list"))&&r.__esModule?r:{default:r};function l(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function a(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){var r=s.apply(t,o);function i(t){l(r,e,n,i,a,"next",t)}function a(t){l(r,e,n,i,a,"throw",t)}i(void 0)})}}function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return new Promise(function(t){return 0==--e?requestAnimationFrame(function(){return t()}):t(o(e))})}function u(t){for(var e=t;e=e.parentNode||e.host;)if(e instanceof HTMLElement)return e;return null}var i,c=new WeakMap;function f(t){t=0<arguments.length&&void 0!==t?t:!document.hidden;i=t}f(),document.addEventListener("visibilitychange",function(){return f()},!1)},{"./class-list":226}],229:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.flow=void 0;var r,i=t("lit-html"),d=(r=t("../core/class-list"))&&r.__esModule?r:{default:r},p=t("../core/utils"),a=t("./interfaces");function o(){var t=function(t,e){e=e||t.slice(0);return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["<style>","</style>"]);return o=function(){return t},t}function l(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function g(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){var r=s.apply(t,o);function i(t){l(r,e,n,i,a,"next",t)}function a(t){l(r,e,n,i,a,"throw",t)}i(void 0)})}}var s={transition:function(n,r,i){return g(regeneratorRuntime.mark(function t(){var s,l,u,c,e,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.duration,s=void 0===e?i.duration:e,l=r.active,u=r.from,c=r.to,e=r.lock,f=(0,p.partDomSingle)(n)){t.next=4;break}return t.abrupt("return");case 4:return e&&(e!==a.GeometryLockMode.Auto||l&&(0,p.needsLock)(f,l))&&(h=(0,p.recordExtents)(f)),t.next=7,new Promise(function(){var e=g(regeneratorRuntime.mark(function t(n){var e,r,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(e){if(e){if(e.target!==f)return;e.preventDefault(),e.stopPropagation()}["transitionend","transitioncancel","animationend","animationcancel"].filter(function(t){return!e||t!==e.type}).forEach(function(t){return f.removeEventListener(t,a)}),l&&i(l),u&&i(u),c&&i(c),n()},e=(0,d.default)(f),r=function(t){return Array.isArray(t)?t.forEach(function(t){return e.add(t)}):e.add(t)},i=function(t){return Array.isArray(t)?t.forEach(function(t){return e.remove(t)}):e.remove(t)},h&&(0,p.applyExtents)(f,h),o={once:!0},s?setTimeout(a,s):(f.addEventListener("transitionrun",function(){f.addEventListener("transitionend",a,o),f.addEventListener("transitioncancel",a,o)},o),f.addEventListener("animationstart",function(){f.addEventListener("animationend",a,o),f.addEventListener("animationcancel",a,o)},o)),t.t0=u,t.t0)return t.next=11,(0,p.classChanged)(f,function(){return r(u)});t.next=11;break;case 11:if(t.t1=l,t.t1)return t.next=15,(0,p.classChanged)(f,function(){return r(l)});t.next=15;break;case 15:u&&i(u),c&&r(c);case 17:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return t.stop()}},t)}))()},init:function(t){var e=t.data,n=t.remove,r=t.add,t=t.transition;e._cssSource!==t.css&&(e.css&&n(e.css),t.css&&(e._cssSource=t.css,t="string"==typeof(t=t.css)?(0,i.html)(o(),t):t,e.css=r(t)))}};n.flow=s},{"../core/class-list":226,"../core/utils":228,"./interfaces":231,"lit-html":225}],230:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={transition:!0,mark:!0};Object.defineProperty(n,"mark",{enumerable:!0,get:function(){return f.mark}}),n.transition=void 0;var i=t("lit-html"),a=t("../core/transition-base"),o=t("./transitions/fade"),s=t("./utils"),l=t("./flow"),u=t("./interfaces");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in n&&n[t]===u[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return u[t]}}))});var c=t("./transitions");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in n&&n[t]===c[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return c[t]}}))});var f=t("../core/utils"),i=(0,i.directive)(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.fade;return"function"==typeof e&&(e=e()),(0,a.transitionBase)(l.flow)(t,(0,s.normalizeCSSTransitionOptions)(e))});n.transition=i},{"../core/transition-base":227,"../core/utils":228,"./flow":229,"./interfaces":231,"./transitions":233,"./transitions/fade":232,"./utils":236,"lit-html":225}],231:[function(t,e,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.GeometryLockMode=n.TransitionMode=void 0,n.TransitionMode=void 0,(r=n.TransitionMode={}).InOut="in-out",r.OutIn="out-in",r.Both="both",n.GeometryLockMode=void 0,(n=n.GeometryLockMode={})[n.None=0]="None",n[n.Lock=1]="Lock",n.Auto="auto"},{}],232:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fade=void 0;var i=t("../utils"),t=(0,i.instantiateDefault)("fade",function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.duration,r=void 0===n?500:n,t=e.ease,n=void 0===t?"ease-out":t,t=e.opacity,t=void 0===t?0:t;return(0,i.mergeObjects)({enter:{active:"fade-enter-active",from:"fade-enter-from",to:"fade-enter-to"},leave:{active:"fade-leave-active",from:"fade-leave-from",to:"fade-leave-to",lock:!0},css:"\n    .fade-leave-active {\n      position: fixed;\n      transition: opacity ".concat(r,"ms ").concat(n,", transform ").concat(r,"ms ").concat(n,";\n    }\n    .fade-enter-active {\n      transition: opacity ").concat(r,"ms ").concat(n,", transform ").concat(r,"ms ").concat(n,";\n    }\n  .fade-enter-from, .fade-leave-to {\n    opacity: ").concat(t,";\n  }\n  .fade-enter-to, .fade-leave-from {\n    opacity: 1;\n  }\n  ")},e)});n.fade=t},{"../utils":236}],233:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./fade");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in n&&n[t]===r[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}}))});var i=t("./land");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in n&&n[t]===i[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}}))});var a=t("./slide");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in n&&n[t]===a[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}}))})},{"./fade":232,"./land":234,"./slide":235}],234:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.land=void 0;var i=t("../utils"),t=(0,i.instantiateDefault)("land",function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.duration,r=void 0===n?500:n,t=e.ease,n=void 0===t?"ease-out":t,t=e.opacity,t=void 0===t?0:t;return(0,i.mergeObjects)({enter:{active:"land1-enter-active",from:"land1-enter-from",to:"land1-enter-to"},leave:{active:"land1-leave-active",from:"land1-leave-from",to:"land1-leave-to"},mode:"both",css:"\n      .land1-enter-active {\n        transform-origin: 50% 50%;\n        transition: transform ".concat(r,"ms ").concat(n,", opacity ").concat(r,"ms ").concat(n,";\n      }\n      .land1-leave-active {\n        transform-origin: 50% 50%;\n        position: absolute;\n        transition: transform ").concat(r,"ms ").concat(n,", opacity ").concat(r,"ms ").concat(n,";\n      }\n      .land1-enter-from {\n        opacity: ").concat(t,";\n        transform: translate(0px, 0px) scale(3);\n      }\n      .land1-leave-to {\n        transform: translate(0px, 100px);\n        opacity: ").concat(t,";\n      }")},e)});n.land=t},{"../utils":236}],235:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.slide=void 0;var c=t("../interfaces"),f=t("../utils"),t=(0,f.instantiateDefault)("slide",function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.left,r=e.right,i=e.up,a=e.down?{y:"-100%",y1:"100%"}:i?{y:"100%",y1:"-100%"}:r?{x:"100%",x1:"-100%"}:n?{x:"-100%",x1:"100%"}:{},o=Object.assign(Object.assign({},a),e),s=o.mode,l=o.duration,u=void 0===l?500:l,t=o.x,i=void 0===t?"100%":t,r=o.y,n=void 0===r?"0%":r,a=o.x1,l=void 0===a?"":a,t=o.y1,r=void 0===t?"":t,a=o.ease,t=void 0===a?"ease-out":a,a=o.leavePosition,a=void 0===a?"":a,o=o.opacity,o=void 0===o?0:o,l=l||i,r=r||n;return(0,f.mergeObjects)({enter:{active:"slide-enter-active",from:"slide-enter-from"},leave:{active:"slide-leave-active",to:"slide-leave-to",lock:c.GeometryLockMode.Auto},css:"\n    .slide-enter-active {\n      transition: transform ".concat(u,"ms ").concat(t,", opacity ").concat(u,"ms ").concat(t,";\n    }\n    .slide-leave-active {\n      position: ").concat(a||(s!==c.TransitionMode.OutIn?"absolute":"initial"),";\n      transition: transform ").concat(u,"ms ").concat(t,", opacity ").concat(u,"ms ").concat(t,";\n    }\n    .slide-leave-to {\n      opacity: ").concat(o,";\n      transform: translate(").concat(i,", ").concat(n,");\n    }\n    .slide-enter-from {\n      opacity: ").concat(o,";\n      transform: translate(").concat(l,", ").concat(r,");\n    }"),mode:s},e)});n.slide=t},{"../interfaces":231,"../utils":236}],236:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeCSSTransitionOptions=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.css,n=t.duration,r=t.enter,i=void 0===r?{}:r,a=t.leave,o=void 0===a?{}:a,s=t.mode,l=void 0===s?f.TransitionMode.Both:s,u=t.onAfterEnter,r=t.onAfterLeave,a=t.onEnter,s=t.onLeave,t=t.skipHidden;return{duration:n,skipHidden:void 0===t||t,css:(0,c.html)(h(),e),enter:0!=i&&(Array.isArray(i)||"string"==typeof i?{active:i}:Object.assign({active:"enter-active",from:"enter-from",to:"enter-to"},i)),leave:0!=o&&(Array.isArray(o)||"string"==typeof o?{active:o,lock:!1}:Object.assign({active:"leave-active",from:"leave-from",to:"leave-to",lock:!1},o)),onEnter:a,onLeave:s,onAfterEnter:u,onAfterLeave:r,mode:l}},n.instantiateDefault=function(t,e){var n,r=e();for(n in r)e[n]=r[n];return Object.defineProperty(e,"name",{get:function(){return t}}),e},n.mergeObjects=function t(e,n){for(var r in n)try{n[r].constructor==Object?e[r]=t(e[r],n[r]):e[r]=n[r]}catch(t){e[r]=n[r]}return e};var c=t("lit-html"),f=t("./interfaces");function h(){var t=function(t,e){e=e||t.slice(0);return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["<style>","</style>"]);return h=function(){return t},t}},{"./interfaces":231,"lit-html":225}],237:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./css/index");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in n&&n[t]===r[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}}))})},{"./css/index":230}],238:[function(t,e,n){"use strict";e.exports=function(t){for(var e=1<<t+1,n=new Array(e),r=0;r<e;++r)n[r]=function(t,e){if(0===e||e===(1<<t+1)-1)return[];for(var n=[],r=[],i=0;i<=t;++i)if(e&1<<i){n.push(f(t,i-1,i-1)),r.push(null);for(var a=0;a<=t;++a)~e&1<<a&&(n.push(f(t,i-1,a-1)),r.push([i,a]))}var o=c(n),s=[];t:for(i=0;i<o.length;++i){for(var l=o[i],u=[],a=0;a<l.length;++a){if(!r[l[a]])continue t;u.push(r[l[a]].slice())}s.push(u)}return s}(t,r);return n};var c=t("convex-hull");function f(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=0,i===e&&(r[i]+=.5),i===n&&(r[i]+=.5);return r}},{"convex-hull":52}],239:[function(t,e,n){"use strict";var g=t("./normalize"),r=t("gl-mat4/create"),y=t("gl-mat4/clone"),m=t("gl-mat4/determinant"),v=t("gl-mat4/invert"),b=t("gl-mat4/transpose"),x={length:t("gl-vec3/length"),normalize:t("gl-vec3/normalize"),dot:t("gl-vec3/dot"),cross:t("gl-vec3/cross")},_=r(),w=r(),k=[0,0,0,0],M=[[0,0,0],[0,0,0],[0,0,0]],T=[0,0,0];function A(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}e.exports=function(t,e,n,r,i,a){if(e=e||[0,0,0],n=n||[0,0,0],r=r||[0,0,0],i=i||[0,0,0,1],a=a||[0,0,0,1],!g(_,t))return!1;if(y(w,_),w[3]=0,w[7]=0,w[11]=0,w[15]=1,Math.abs(m(w)<1e-8))return!1;var o,s=_[3],l=_[7],u=_[11],c=_[12],f=_[13],h=_[14],d=_[15];if(0!==s||0!==l||0!==u){if(k[0]=s,k[1]=l,k[2]=u,k[3]=d,!v(w,w))return!1;b(w,w),o=i,t=w,l=(s=k)[0],u=s[1],d=s[2],s=s[3],o[0]=t[0]*l+t[4]*u+t[8]*d+t[12]*s,o[1]=t[1]*l+t[5]*u+t[9]*d+t[13]*s,o[2]=t[2]*l+t[6]*u+t[10]*d+t[14]*s,o[3]=t[3]*l+t[7]*u+t[11]*d+t[15]*s}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=c,e[1]=f,e[2]=h,e=_,(h=M)[0][0]=e[0],h[0][1]=e[1],h[0][2]=e[2],h[1][0]=e[4],h[1][1]=e[5],h[1][2]=e[6],h[2][0]=e[8],h[2][1]=e[9],h[2][2]=e[10],n[0]=x.length(M[0]),x.normalize(M[0],M[0]),r[0]=x.dot(M[0],M[1]),A(M[1],M[1],M[0],1,-r[0]),n[1]=x.length(M[1]),x.normalize(M[1],M[1]),r[0]/=n[1],r[1]=x.dot(M[0],M[2]),A(M[2],M[2],M[0],1,-r[1]),r[2]=x.dot(M[1],M[2]),A(M[2],M[2],M[1],1,-r[2]),n[2]=x.length(M[2]),x.normalize(M[2],M[2]),r[1]/=n[2],r[2]/=n[2],x.cross(T,M[1],M[2]),x.dot(M[0],T)<0)for(var p=0;p<3;p++)n[p]*=-1,M[p][0]*=-1,M[p][1]*=-1,M[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+M[0][0]-M[1][1]-M[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-M[0][0]+M[1][1]-M[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-M[0][0]-M[1][1]+M[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+M[0][0]+M[1][1]+M[2][2],0)),M[2][1]>M[1][2]&&(a[0]=-a[0]),M[0][2]>M[2][0]&&(a[1]=-a[1]),M[1][0]>M[0][1]&&(a[2]=-a[2]),!0}},{"./normalize":240,"gl-mat4/clone":124,"gl-mat4/create":126,"gl-mat4/determinant":127,"gl-mat4/invert":139,"gl-mat4/transpose":152,"gl-vec3/cross":179,"gl-vec3/dot":180,"gl-vec3/length":181,"gl-vec3/normalize":183}],240:[function(t,e,n){"use strict";e.exports=function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}},{}],241:[function(t,e,n){"use strict";var i=t("gl-vec3/lerp"),a=t("mat4-recompose"),o=t("mat4-decompose"),s=t("gl-mat4/determinant"),l=t("quat-slerp"),u=r(),c=r(),f=r();function r(){return{translate:h(),scale:h(1),skew:h(),perspective:d(),quaternion:d()}}function h(t){return[t||0,t||0,t||0]}function d(){return[0,0,0,1]}e.exports=function(t,e,n,r){if(0===s(e)||0===s(n))return!1;e=o(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),n=o(n,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!e||!n)&&(i(f.translate,u.translate,c.translate,r),i(f.skew,u.skew,c.skew,r),i(f.scale,u.scale,c.scale,r),i(f.perspective,u.perspective,c.perspective,r),l(f.quaternion,u.quaternion,c.quaternion,r),a(t,f.translate,f.scale,f.skew,f.perspective,f.quaternion),!0)}},{"gl-mat4/determinant":127,"gl-vec3/lerp":182,"mat4-decompose":239,"mat4-recompose":242,"quat-slerp":620}],242:[function(t,e,n){"use strict";var o={identity:t("gl-mat4/identity"),translate:t("gl-mat4/translate"),multiply:t("gl-mat4/multiply"),create:t("gl-mat4/create"),scale:t("gl-mat4/scale"),fromRotationTranslation:t("gl-mat4/fromRotationTranslation")},s=(o.create(),o.create());e.exports=function(t,e,n,r,i,a){return o.identity(t),o.fromRotationTranslation(t,a,e),t[3]=i[0],t[7]=i[1],t[11]=i[2],t[15]=i[3],o.identity(s),0!==r[2]&&(s[9]=r[2],o.multiply(t,t,s)),0!==r[1]&&(s[9]=0,s[8]=r[1],o.multiply(t,t,s)),0!==r[0]&&(s[8]=0,s[4]=r[0],o.multiply(t,t,s)),o.scale(t,t,n),t}},{"gl-mat4/create":126,"gl-mat4/fromRotationTranslation":130,"gl-mat4/identity":137,"gl-mat4/multiply":141,"gl-mat4/scale":149,"gl-mat4/translate":151}],243:[function(t,e,n){"use strict";var p=t("binary-search-bounds"),g=t("mat4-interpolate"),y=t("gl-mat4/invert"),a=t("gl-mat4/rotateX"),o=t("gl-mat4/rotateY"),s=t("gl-mat4/rotateZ"),l=t("gl-mat4/lookAt"),i=t("gl-mat4/translate"),m=(t("gl-mat4/scale"),t("gl-vec3/normalize")),u=[0,0,0];function r(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}e.exports=function(t){return new r((t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};e=r.prototype;e.recalcMatrix=function(t){var e=this._time,n=p.le(e,t),r=this.computedMatrix;if(!(n<0)){var i=this._components;if(n===e.length-1)for(var a=16*n,o=0;o<16;++o)r[o]=i[a++];else{for(var s=e[n+1]-e[n],a=16*n,l=this.prevMatrix,u=!0,o=0;o<16;++o)l[o]=i[a++];for(var c=this.nextMatrix,o=0;o<16;++o)c[o]=i[a++],u=u&&l[o]===c[o];if(s<1e-6||u)for(o=0;o<16;++o)r[o]=l[o];else g(r,l,c,(t-e[n])/s)}n=this.computedUp;n[0]=r[1],n[1]=r[5],n[2]=r[9],m(n,n);s=this.computedInverse;y(s,r);var f=this.computedEye,n=s[15];f[0]=s[12]/n,f[1]=s[13]/n,f[2]=s[14]/n;for(var h=this.computedCenter,d=Math.exp(this.computedRadius[0]),o=0;o<3;++o)h[o]=f[o]-r[2+4*o]*d}},e.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,n=e.length-16,r=0;r<16;++r)e.push(e[n++]);this._time.push(t)}},e.flush=function(t){t=p.gt(this._time,t)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},e.lastT=function(){return this._time[this._time.length-1]},e.lookAt=function(t,e,n,r){this.recalcMatrix(t),e=e||this.computedEye,n=n||u,r=r||this.computedUp,this.setMatrix(t,l(this.computedMatrix,e,n,r));for(var i=0,a=0;a<3;++a)i+=Math.pow(n[a]-e[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},e.rotate=function(t,e,n,r){this.recalcMatrix(t);var i=this.computedInverse;e&&o(i,i,e),n&&a(i,i,n),r&&s(i,i,r),this.setMatrix(t,y(this.computedMatrix,i))};var c=[0,0,0];e.pan=function(t,e,n,r){c[0]=-(e||0),c[1]=-(n||0),c[2]=-(r||0),this.recalcMatrix(t);r=this.computedInverse;i(r,r,c),this.setMatrix(t,y(r,r))},e.translate=function(t,e,n,r){c[0]=e||0,c[1]=n||0,c[2]=r||0,this.recalcMatrix(t);r=this.computedMatrix;i(r,r,c),this.setMatrix(t,r)},e.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var n=0;n<16;++n)this._components.push(e[n])}},e.setDistance=function(t,e){this.computedRadius[0]=e},e.setDistanceLimits=function(t,e){var n=this._limits;n[0]=t,n[1]=e},e.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},{"binary-search-bounds":244,"gl-mat4/invert":139,"gl-mat4/lookAt":140,"gl-mat4/rotateX":146,"gl-mat4/rotateY":147,"gl-mat4/rotateZ":148,"gl-mat4/scale":149,"gl-mat4/translate":151,"gl-vec3/normalize":183,"mat4-interpolate":241}],244:[function(t,e,n){arguments[4][101][0].apply(n,arguments)},{dup:101}],245:[function(t,e,n){"use strict";e.exports=function(r){var t=r.length;if(t<3){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return 2===t&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:e}for(var i=new Array(t),n=0;n<t;++n)i[n]=n;i.sort(function(t,e){var n=r[t][0]-r[e][0];return n||r[t][1]-r[e][1]});for(var a=[i[0],i[1]],o=[i[0],i[1]],n=2;n<t;++n){for(var s=i[n],l=r[s],u=a.length;1<u&&d(r[a[u-2]],r[a[u-1]],l)<=0;)--u,a.pop();for(a.push(s),u=o.length;1<u&&0<=d(r[o[u-2]],r[o[u-1]],l);)--u,o.pop();o.push(s)}for(var e=new Array(o.length+a.length-2),c=0,n=0,f=a.length;n<f;++n)e[c++]=a[n];for(var h=o.length-2;0<h;--h)e[c++]=o[h];return e};var d=t("robust-orientation")[3]},{"robust-orientation":633}],246:[function(t,e,n){"use strict";e.exports=function(e,i){i||(i=e,e=window);var a=0,o=0,s=0,l={shift:!1,alt:!1,control:!1,meta:!1},n=!1;function u(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==l.alt,l.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==l.shift,l.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==l.control,l.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==l.meta,l.meta=!!t.metaKey),e}function r(t,e){var n=m.x(e),r=m.y(e);"buttons"in e&&(t=0|e.buttons),t===a&&n===o&&r===s&&!u(e)||(a=0|t,o=n||0,s=r||0,i&&i(a,o,s,l))}function c(t){r(0,t)}function f(){(a||o||s||l.shift||l.alt||l.meta||l.control)&&(o=s=0,a=0,l.shift=l.alt=l.control=l.meta=!1,i&&i(0,0,0,l))}function h(t){u(t)&&i&&i(a,o,s,l)}function d(t){0===m.buttons(t)?r(0,t):r(a,t)}function p(t){r(a|m.buttons(t),t)}function g(t){r(a&~m.buttons(t),t)}function y(){n||(n=!0,e.addEventListener("mousemove",d),e.addEventListener("mousedown",p),e.addEventListener("mouseup",g),e.addEventListener("mouseleave",c),e.addEventListener("mouseenter",c),e.addEventListener("mouseout",c),e.addEventListener("mouseover",c),e.addEventListener("blur",f),e.addEventListener("keyup",h),e.addEventListener("keydown",h),e.addEventListener("keypress",h),e!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}y();var t={element:e};return Object.defineProperties(t,{enabled:{get:function(){return n},set:function(t){t?y():n&&(n=!1,e.removeEventListener("mousemove",d),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",g),e.removeEventListener("mouseleave",c),e.removeEventListener("mouseenter",c),e.removeEventListener("mouseout",c),e.removeEventListener("mouseover",c),e.removeEventListener("blur",f),e.removeEventListener("keyup",h),e.removeEventListener("keydown",h),e.removeEventListener("keypress",h),e!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),t};var m=t("mouse-event")},{"mouse-event":248}],247:[function(t,e,n){"use strict";var i={left:0,top:0};e.exports=function(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r=t.clientX||0,t=t.clientY||0,e=function(t){return t===window||t===document||t===document.body?i:t.getBoundingClientRect()}(e);return n[0]=r-e.left,n[1]=t-e.top,n}},{}],248:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t.target||t.srcElement||window}n.buttons=function(t){if("object"===r(t)){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(0<e)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(0<=e)return 1<<e}}return 0},n.element=i,n.x=function(t){if("object"!==r(t))return 0;if("offsetX"in t)return t.offsetX;var e=i(t).getBoundingClientRect();return t.clientX-e.left},n.y=function(t){if("object"!==r(t))return 0;if("offsetY"in t)return t.offsetY;var e=i(t).getBoundingClientRect();return t.clientY-e.top}},{}],249:[function(t,e,n){"use strict";var r=t("to-px");e.exports=function(t,a,o){"function"==typeof t&&(o=!!a,a=t,t=window);function e(t){o&&t.preventDefault();var e=t.deltaX||0,n=t.deltaY||0,r=t.deltaZ||0,i=1;switch(t.deltaMode){case 1:i=s;break;case 2:i=window.innerHeight}if(n*=i,r*=i,(e*=i)||n||r)return a(e,n,r,t)}var s=r("ex",t);return t.addEventListener("wheel",e),e}},{"to-px":652}],250:[function(t,e,n){"use strict";function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var T=t("typedarray-pool");function A(t,e){return"c"+t+"_"+e}function S(t,e){return"t"+t+"_"+e}function E(t,e){return"d"+t+"_"+e}function O(t,e){return"u"+t+"_"+e}e.exports=function(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!==l(t)&&e("Must specify arguments");var n=t.order;Array.isArray(n)||e("Must specify order");var r=t.arrayArguments||1;r<1&&e("Must have at least one array argument");var i=t.scalarArguments||0;i<0&&e("Scalar arg count must be > 0");"function"!=typeof t.vertex&&e("Must specify vertex creation function");"function"!=typeof t.cell&&e("Must specify cell creation function");"function"!=typeof t.phase&&e("Must specify phase function");for(var a=t.getters||[],o=new Array(r),s=0;s<r;++s)0<=a.indexOf(s)?o[s]=!0:o[s]=!1;return function(t,e,n,h,i,d){var p=d.length,g=i.length;if(g<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var r="extractContour"+i.join("_"),y=[],a=[],o=[],s=0;s<p;++s)o.push("a"+s);for(s=0;s<h;++s)o.push("x"+s);for(s=0;s<g;++s)a.push("s"+s+"=a0.shape["+s+"]|0");for(s=0;s<p;++s){a.push("d"+s+"=a"+s+".data","o"+s+"=a"+s+".offset|0");for(var l=0;l<g;++l)a.push(S(s,l)+"=a"+s+".stride["+l+"]|0")}for(s=0;s<p;++s){a.push("p"+s+"=o"+s),a.push(A(s,0));for(l=1;l<1<<g;++l){for(var u=[],c=0;c<g;++c)l&1<<c&&u.push("-"+S(s,c));a.push(E(s,l)+"=("+u.join("")+")|0"),a.push(A(s,l)+"=0")}}for(s=0;s<p;++s)for(l=0;l<g;++l){var f=[S(s,i[l])];0<l&&f.push(S(s,i[l-1])+"*s"+i[l-1]),a.push(O(s,i[l])+"=("+f.join("-")+")|0")}for(s=0;s<g;++s)a.push("i"+s+"=0");a.push(L+"=0");for(var m=["2"],s=g-2;0<=s;--s)m.push("s"+i[s]);a.push(R+"=("+m.join("*")+")|0",P+"=mallocUint32("+R+")",C+"=mallocUint32("+R+")",j+"=0"),a.push("b0=0");for(l=1;l<1<<g;++l){for(var v=[],b=[],c=0;c<g;++c)l&1<<c&&(0===b.length?v.push("1"):v.unshift(b.join("*"))),b.push("s"+i[c]);var x="";v[0].indexOf("s"+i[g-2])<0&&(x="-");var _=function(t,e,n){for(var r=0,i=0;i<t;++i)e&1<<i&&(r|=1<<n[i]);return r}(g,l,i);a.push("e"+_+"=(-"+v.join("-")+")|0","y"+_+"=("+x+v.join("-")+")|0","b"+_+"=0")}function w(t,e){y.push("for(","i"+i[t],"=",e,";","i"+i[t],"<","s"+i[t],";","++","i"+i[t],"){")}function k(t){for(var e=0;e<p;++e)y.push("p"+e,"+=",O(e,i[t]),";");y.push("}")}function M(){for(var t=1;t<1<<g;++t)y.push(N,"=","e"+t,";","e"+t,"=","y"+t,";","y"+t,"=",N,";")}a.push("v0=0",N+"=0"),function t(e,n){if(e<0)!function(t){for(var e=0;e<p;++e)d[e]?y.push(A(e,0),"=","d"+e,".get(","p"+e,");"):y.push(A(e,0),"=","d"+e,"[","p"+e,"];");for(var n=[],e=0;e<p;++e)n.push(A(e,0));for(e=0;e<h;++e)n.push("x"+e);y.push("b0","=",P,"[",j,"]=phase(",n.join(),");");for(var r=1;r<1<<g;++r)y.push("b"+r,"=",P,"[",j,"+","e"+r,"];");for(var i=[],r=1;r<1<<g;++r)i.push("(b0!==b"+r+")");y.push("if(",i.join("||"),"){");for(var a=[],e=0;e<g;++e)a.push("i"+e);for(e=0;e<p;++e)for(a.push(A(e,0)),r=1;r<1<<g;++r)d[e]?y.push(A(e,r),"=","d"+e,".get(","p"+e,"+",E(e,r),");"):y.push(A(e,r),"=","d"+e,"[","p"+e,"+",E(e,r),"];"),a.push(A(e,r));for(e=0;e<1<<g;++e)a.push("b"+e);for(e=0;e<h;++e)a.push("x"+e);y.push("vertex(",a.join(),");","v0","=",C,"[",j,"]=",L,"++;");for(var o=(1<<g)-1,s="b"+o,r=0;r<g;++r)if(0==(t&~(1<<r))){for(var l=o^1<<r,u="b"+l,c=[],f=l;0<f;f=f-1&l)c.push(C+"["+j+"+e"+f+"]");for(c.push("v0"),f=0;f<p;++f)1&r?c.push(A(f,o),A(f,l)):c.push(A(f,l),A(f,o));for(1&r?c.push(s,u):c.push(u,s),f=0;f<h;++f)c.push("x"+f);y.push("if(",s,"!==",u,"){","face(",c.join(),")}")}y.push("}",j,"+=1;")}(n);else{!function(t){for(var e=t-1;0<=e;--e)w(e,0);for(var n=[],e=0;e<p;++e)d[e]?n.push("d"+e+".get(p"+e+")"):n.push("d"+e+"[p"+e+"]");for(e=0;e<h;++e)n.push("x"+e);for(y.push(P,"[",j,"++]=phase(",n.join(),");"),e=0;e<t;++e)k(e);for(var r=0;r<p;++r)y.push("p"+r,"+=",O(r,i[t]),";")}(e),y.push("if(","s"+i[e],">0){","i"+i[e],"=1;"),t(e-1,n|1<<i[e]);for(var r=0;r<p;++r)y.push("p"+r,"+=",O(r,i[e]),";");e===g-1&&(y.push(j,"=0;"),M()),w(e,2),t(e-1,n),e===g-1&&(y.push("if(","i"+i[g-1],"&1){",j,"=0;}"),M()),k(e),y.push("}")}}(g-1,0),y.push("freeUint32(",C,");freeUint32(",P,");");r=["'use strict';","function ",r,"(",o.join(),"){","var ",a.join(),";",y.join(""),"}","return ",r].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",r)(t,e,n,T.mallocUint32,T.freeUint32)}(t.vertex,t.cell,t.phase,i,n,o)};var C="V",P="P",L="N",R="Q",j="X",N="T"},{"typedarray-pool":657}],251:[function(t,e,n){"use strict";var i=t("cwise-compiler"),r={body:"",args:[],thisVars:[],localVars:[]};function a(t){if(!t)return r;for(var e=0;e<t.args.length;++e){var n=t.args[e];t.args[e]=0===e?{name:n,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function o(t){for(var e,n=[],r=0;r<t.args.length;++r)n.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",n.join(","),") {P(",n.join(","),");return a0}"].join(""))(i({args:(e=t).args,pre:a(e.pre),body:a(e.body),post:a(e.proc),funcName:e.funcName}))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var e=s[t];n[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),n[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),n[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),n[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in l){var e=l[t];n[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),n[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in u){var e=u[t];n[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),n[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),n[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<c.length;++t){var e=c[t];n[e]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),n[e+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var t=0;t<f.length;++t){var e=f[t];n[e]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),n[e+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),n[e+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var h=["atan2","pow"];!function(){for(var t=0;t<h.length;++t){var e=h[t];n[e+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),n[e+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),n[e+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),n[e+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),n.any=i({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=i({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=i({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=i({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=i({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=i({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=i({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":57}],252:[function(t,e,n){"use strict";var r=t("typedarray-pool"),A=32;function S(t){switch(t){case"uint8":return[r.mallocUint8,r.freeUint8];case"uint16":return[r.mallocUint16,r.freeUint16];case"uint32":return[r.mallocUint32,r.freeUint32];case"int8":return[r.mallocInt8,r.freeInt8];case"int16":return[r.mallocInt16,r.freeInt16];case"int32":return[r.mallocInt32,r.freeInt32];case"float32":return[r.mallocFloat,r.freeFloat];case"float64":return[r.mallocDouble,r.freeDouble];default:return null}}function E(t){for(var e=[],n=0;n<t;++n)e.push("s"+n);for(n=0;n<t;++n)e.push("n"+n);for(n=1;n<t;++n)e.push("d"+n);for(n=1;n<t;++n)e.push("e"+n);for(n=1;n<t;++n)e.push("f"+n);return e}e.exports=function(t,e){var n=["'use strict'"],r=["ndarraySortWrapper",t.join("d"),e].join("");n.push(["function ",r,"(",["array"].join(","),"){"].join(""));for(var i=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],a=0;a<t.length;++a)i.push(["s",a,"=stride[",a,"]|0,n",a,"=shape[",a,"]|0"].join(""));for(var o=new Array(t.length),s=[],a=0;a<t.length;++a)0!==(c=t[a])&&(0===s.length?o[c]="1":o[c]=s.join("*"),s.push("n"+c));for(var l=-1,u=-1,a=0;a<t.length;++a){var c,f=t[a];0!==f&&(0<l?i.push(["d",f,"=s",f,"-d",l,"*n",l].join("")):i.push(["d",f,"=s",f].join("")),l=f),0!==(c=t.length-1-a)&&(0<u?i.push(["e",c,"=s",c,"-e",u,"*n",u,",f",c,"=",o[c],"-f",u,"*n",u].join("")):i.push(["e",c,"=s",c,",f",c,"=",o[c]].join("")),u=c)}n.push("var "+i.join(","));var h=["0","n0-1","data","offset"].concat(E(t.length));return n.push(["if(n0<=",A,"){","insertionSort(",h.join(","),")}else{","quickSort(",h.join(","),")}"].join("")),n.push("}return "+r),r=new Function("insertionSort","quickSort",n.join("\n")),n=function(t,n){var e=["'use strict'"],r=["ndarrayInsertionSort",t.join("d"),n].join(""),i=["left","right","data","offset"].concat(E(t.length)),a=S(n),o=["i,j,cptr,ptr=left*s0+offset"];if(1<t.length){for(var s=[],l=1;l<t.length;++l)o.push("i"+l),s.push("n"+l);a?o.push("scratch=malloc("+s.join("*")+")"):o.push("scratch=new Array("+s.join("*")+")"),o.push("dptr","sptr","a","b")}else o.push("scratch");function u(t){return("generic"===n?["data.get(",t,")"]:["data[",t,"]"]).join("")}function c(t,e){return("generic"===n?["data.set(",t,",",e,")"]:["data[",t,"]=",e]).join("")}if(e.push(["function ",r,"(",i.join(","),"){var ",o.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),1<t.length){e.push("dptr=0;sptr=ptr");for(l=t.length-1;0<=l;--l)0!==(f=t[l])&&e.push(["for(i",f,"=0;i",f,"<n",f,";++i",f,"){"].join(""));e.push("scratch[dptr++]=",u("sptr"));for(l=0;l<t.length;++l)0!==(f=t[l])&&e.push("sptr+=d"+f,"}");e.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0");for(l=1;l<t.length;++l)1===l&&e.push("__l:"),e.push(["for(i",l,"=0;i",l,"<n",l,";++i",l,"){"].join(""));e.push(["a=",u("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(l=t.length-1;1<=l;--l)e.push("sptr+=e"+l,"dptr+=f"+l,"}");e.push("dptr=cptr;sptr=cptr-s0");for(l=t.length-1;0<=l;--l)0!==(f=t[l])&&e.push(["for(i",f,"=0;i",f,"<n",f,";++i",f,"){"].join(""));e.push(c("dptr",u("sptr")));for(l=0;l<t.length;++l)0!==(f=t[l])&&e.push(["dptr+=d",f,";sptr+=d",f].join(""),"}");e.push("cptr-=s0\n}"),e.push("dptr=cptr;sptr=0");for(l=t.length-1;0<=l;--l)0!==(f=t[l])&&e.push(["for(i",f,"=0;i",f,"<n",f,";++i",f,"){"].join(""));e.push(c("dptr","scratch[sptr++]"));for(var f,l=0;l<t.length;++l)0!==(f=t[l])&&e.push("dptr+=d"+f,"}")}else e.push("scratch="+u("ptr"),"while((j--\x3eleft)&&("+u("cptr-s0")+">scratch)){",c("cptr",u("cptr-s0")),"cptr-=s0","}",c("cptr","scratch"));return e.push("}"),1<t.length&&a&&e.push("free(scratch)"),e.push("} return "+r),a?new Function("malloc","free",e.join("\n"))(a[0],a[1]):new Function(e.join("\n"))()}(t,e),r(n,function(a,n,t){var o=["'use strict'"],r=["ndarrayQuickSort",a.join("d"),n].join(""),e=["left","right","data","offset"].concat(E(a.length)),i=S(n),s=0;o.push(["function ",r,"(",e.join(","),"){"].join(""));var l=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(1<a.length){for(var u=[],c=1;c<a.length;++c)u.push("n"+c),l.push("i"+c);for(c=0;c<8;++c)l.push("b_ptr"+c);l.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+u.join("*")),i?l.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):l.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else l.push("pivot1","pivot2");function f(t){return["(offset+",t,"*s0)"].join("")}function h(t){return("generic"===n?["data.get(",t,")"]:["data[",t,"]"]).join("")}function d(t,e){return("generic"===n?["data.set(",t,",",e,")"]:["data[",t,"]=",e]).join("")}function p(t,e,n){if(1===t.length)o.push("ptr0="+f(t[0]));else for(var r=0;r<t.length;++r)o.push(["b_ptr",r,"=s0*",t[r]].join(""));e&&o.push("pivot_ptr=0"),o.push("ptr_shift=offset");for(r=a.length-1;0<=r;--r)0!==(i=a[r])&&o.push(["for(i",i,"=0;i",i,"<n",i,";++i",i,"){"].join(""));if(1<t.length)for(r=0;r<t.length;++r)o.push(["ptr",r,"=b_ptr",r,"+ptr_shift"].join(""));o.push(n),e&&o.push("++pivot_ptr");for(var i,r=0;r<a.length;++r)0!==(i=a[r])&&(1<t.length?o.push("ptr_shift+=d"+i):o.push("ptr0+=d"+i),o.push("}"))}function g(t,e,n,r){if(1===e.length)o.push("ptr0="+f(e[0]));else{for(var i=0;i<e.length;++i)o.push(["b_ptr",i,"=s0*",e[i]].join(""));o.push("ptr_shift=offset")}n&&o.push("pivot_ptr=0"),t&&o.push(t+":");for(i=1;i<a.length;++i)o.push(["for(i",i,"=0;i",i,"<n",i,";++i",i,"){"].join(""));if(1<e.length)for(i=0;i<e.length;++i)o.push(["ptr",i,"=b_ptr",i,"+ptr_shift"].join(""));o.push(r);for(i=a.length-1;1<=i;--i)n&&o.push("pivot_ptr+=f"+i),1<e.length?o.push("ptr_shift+=e"+i):o.push("ptr0+=e"+i),o.push("}")}function y(){1<a.length&&i&&o.push("free(pivot1)","free(pivot2)")}function m(t,e){var n="el"+t,t="el"+e;1<a.length?g(e="__l"+ ++s,[n,t],!1,["comp=",h("ptr0"),"-",h("ptr1"),"\n","if(comp>0){tmp0=",n,";",n,"=",t,";",t,"=tmp0;break ",e,"}\n","if(comp<0){break ",e,"}"].join("")):o.push(["if(",h(f(n)),">",h(f(t)),"){tmp0=",n,";",n,"=",t,";",t,"=tmp0}"].join(""))}function v(t,e){1<a.length?p([t,e],!1,d("ptr0",h("ptr1"))):o.push(d(f(t),h(f(e))))}function b(t,e,n){var r;1<a.length?g(r="__l"+ ++s,[e],!0,[t,"=",h("ptr0"),"-pivot",n,"[pivot_ptr]\n","if(",t,"!==0){break ",r,"}"].join("")):o.push([t,"=",h(f(e)),"-pivot",n].join(""))}function x(t,e){1<a.length?p([t,e],!1,["tmp=",h("ptr0"),"\n",d("ptr0",h("ptr1")),"\n",d("ptr1","tmp")].join("")):o.push(["ptr0=",f(t),"\n","ptr1=",f(e),"\n","tmp=",h("ptr0"),"\n",d("ptr0",h("ptr1")),"\n",d("ptr1","tmp")].join(""))}function _(t,e,n){1<a.length?(p([t,e,n],!1,["tmp=",h("ptr0"),"\n",d("ptr0",h("ptr1")),"\n",d("ptr1",h("ptr2")),"\n",d("ptr2","tmp")].join("")),o.push("++"+e,"--"+n)):o.push(["ptr0=",f(t),"\n","ptr1=",f(e),"\n","ptr2=",f(n),"\n","++",e,"\n","--",n,"\n","tmp=",h("ptr0"),"\n",d("ptr0",h("ptr1")),"\n",d("ptr1",h("ptr2")),"\n",d("ptr2","tmp")].join(""))}function w(t,e){x(t,e),o.push("--"+e)}function k(t,e,n){1<a.length?p([t,e],!0,[d("ptr0",h("ptr1")),"\n",d("ptr1",["pivot",n,"[pivot_ptr]"].join(""))].join("")):o.push(d(f(t),h(f(e))),d(f(e),"pivot"+n))}function M(t,e){o.push(["if((",e,"-",t,")<=",A,"){\n","insertionSort(",t,",",e,",data,offset,",E(a.length).join(","),")\n","}else{\n",r,"(",t,",",e,",data,offset,",E(a.length).join(","),")\n","}"].join(""))}function T(t,e,n){1<a.length?(o.push(["__l",++s,":while(true){"].join("")),p([t],!0,["if(",h("ptr0"),"!==pivot",e,"[pivot_ptr]){break __l",s,"}"].join("")),o.push(n,"}")):o.push(["while(",h(f(t)),"===pivot",e,"){",n,"}"].join(""))}return o.push("var "+l.join(",")),m(1,2),m(4,5),m(1,3),m(2,3),m(1,4),m(3,4),m(2,5),m(2,3),m(4,5),1<a.length?p(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",h("ptr1"),"\n","pivot2[pivot_ptr]=",h("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",h("ptr0"),"\n","y=",h("ptr2"),"\n","z=",h("ptr4"),"\n",d("ptr5","x"),"\n",d("ptr6","y"),"\n",d("ptr7","z")].join("")):o.push(["pivot1=",h(f("el2")),"\n","pivot2=",h(f("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",h(f("el1")),"\n","y=",h(f("el3")),"\n","z=",h(f("el5")),"\n",d(f("index1"),"x"),"\n",d(f("index3"),"y"),"\n",d(f("index5"),"z")].join("")),v("index2","left"),v("index4","right"),o.push("if(pivots_are_equal){"),o.push("for(k=less;k<=great;++k){"),b("comp","k",1),o.push("if(comp===0){continue}"),o.push("if(comp<0){"),o.push("if(k!==less){"),x("k","less"),o.push("}"),o.push("++less"),o.push("}else{"),o.push("while(true){"),b("comp","great",1),o.push("if(comp>0){"),o.push("great--"),o.push("}else if(comp<0){"),_("k","less","great"),o.push("break"),o.push("}else{"),w("k","great"),o.push("break"),o.push("}"),o.push("}"),o.push("}"),o.push("}"),o.push("}else{"),o.push("for(k=less;k<=great;++k){"),b("comp_pivot1","k",1),o.push("if(comp_pivot1<0){"),o.push("if(k!==less){"),x("k","less"),o.push("}"),o.push("++less"),o.push("}else{"),b("comp_pivot2","k",2),o.push("if(comp_pivot2>0){"),o.push("while(true){"),b("comp","great",2),o.push("if(comp>0){"),o.push("if(--great<k){break}"),o.push("continue"),o.push("}else{"),b("comp","great",1),o.push("if(comp<0){"),_("k","less","great"),o.push("}else{"),w("k","great"),o.push("}"),o.push("break"),o.push("}"),o.push("}"),o.push("}"),o.push("}"),o.push("}"),o.push("}"),k("left","(less-1)",1),k("right","(great+1)",2),M("left","(less-2)"),M("(great+2)","right"),o.push("if(pivots_are_equal){"),y(),o.push("return"),o.push("}"),o.push("if(less<index1&&great>index5){"),T("less",1,"++less"),T("great",2,"--great"),o.push("for(k=less;k<=great;++k){"),b("comp_pivot1","k",1),o.push("if(comp_pivot1===0){"),o.push("if(k!==less){"),x("k","less"),o.push("}"),o.push("++less"),o.push("}else{"),b("comp_pivot2","k",2),o.push("if(comp_pivot2===0){"),o.push("while(true){"),b("comp","great",2),o.push("if(comp===0){"),o.push("if(--great<k){break}"),o.push("continue"),o.push("}else{"),b("comp","great",1),o.push("if(comp<0){"),_("k","less","great"),o.push("}else{"),w("k","great"),o.push("}"),o.push("break"),o.push("}"),o.push("}"),o.push("}"),o.push("}"),o.push("}"),o.push("}"),y(),M("less","great"),o.push("}return "+r),1<a.length&&i?new Function("insertionSort","malloc","free",o.join("\n"))(t,i[0],i[1]):new Function("insertionSort",o.join("\n"))(t)}(t,e,n))}},{"typedarray-pool":657}],253:[function(t,e,n){"use strict";var a=t("./lib/compile_sort.js"),o={};e.exports=function(t){var e=t.order,n=t.dtype,r=[e,n].join(":"),i=o[r];return i||(o[r]=i=a(e,n)),i(t),t}},{"./lib/compile_sort.js":252}],254:[function(t,e,n){"use strict";var d=t("iota-array"),u=t("is-buffer"),c="undefined"!=typeof Float64Array;function i(t,e){return t[0]-e[0]}function p(){for(var t=this.stride,e=new Array(t.length),n=0;n<e.length;++n)e[n]=[Math.abs(t[n]),n];e.sort(i);var r=new Array(e.length);for(n=0;n<r.length;++n)r[n]=e[n][1];return r}function f(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var r="generic"===t;if(-1===e){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(i)()}if(0===e){i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",i)(g[t][0])}var i=["'use strict'"],a=d(e),o=a.map(function(t){return"i"+t}),s="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),l=a.map(function(t){return"b"+t}).join(","),u=a.map(function(t){return"c"+t}).join(",");i.push("function "+n+"(a,"+l+","+u+",d){this.data=a","this.shape=["+l+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+n+"_order(){"),2===e?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+o.join(",")+",v){"),r?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+n+"_get("+o.join(",")+"){"),r?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+n+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+n+"_hi("+o.join(",")+"){return new "+n+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");r=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),s=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});i.push("proto.lo=function "+n+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+r.join(",")+","+s.join(","));for(var c=0;c<e;++c)i.push("if(typeof i"+c+"==='number'&&i"+c+">=0){d=i"+c+"|0;b+=c"+c+"*d;a"+c+"-=d}");i.push("return new "+n+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+o.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(c=0;c<e;++c)i.push("if(typeof i"+c+"==='number'){d=i"+c+"|0;if(d<0){c+=b"+c+"*(a"+c+"-1);a"+c+"=ceil(-a"+c+"/d)}else{a"+c+"=ceil(a"+c+"/d)}b"+c+"*=d}");i.push("return new "+n+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");for(var f=new Array(e),h=new Array(e),c=0;c<e;++c)f[c]="a[i"+c+"]",h[c]="b[i"+c+"]";i.push("proto.transpose=function "+n+"_transpose("+o+"){"+o.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+f.join(",")+","+h.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+o+"){var a=[],b=[],c=this.offset");for(c=0;c<e;++c)i.push("if(typeof i"+c+"==='number'&&i"+c+">=0){c=(c+this.stride["+c+"]*i"+c+")|0}else{a.push(this.shape["+c+"]);b.push(this.stride["+c+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(g[t],p)}var g={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(t,e,n,r){if(void 0===t)return(0,g.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var i=e.length;if(void 0===n){n=new Array(i);for(var a=i-1,o=1;0<=a;--a)n[a]=o,o*=e[a]}if(void 0===r)for(a=r=0;a<i;++a)n[a]<0&&(r-=(e[a]-1)*n[a]);for(var s=function(t){if(u(t))return"buffer";if(c)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),l=g[s];l.length<=i+1;)l.push(f(s,l.length-1));return(0,l[i+1])(t,e,n,r)}},{"iota-array":202,"is-buffer":204}],255:[function(t,e,n){"use strict";var i=t("double-bits"),a=Math.pow(2,-1074);e.exports=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-a:a;var n=i.hi(t),r=i.lo(t);t<e==0<t?r===-1>>>0?(n+=1,r=0):r+=1:0===r?(r=-1>>>0,--n):--r;return i.pack(r,n)}},{"double-bits":92}],256:[function(t,e,n){"use strict";n.vertexNormals=function(t,e,n){for(var r=e.length,i=new Array(r),a=void 0===n?1e-6:n,o=0;o<r;++o)i[o]=[0,0,0];for(o=0;o<t.length;++o)for(var s,l=t[o],u=l[l.length-1],c=l[0],f=0;f<l.length;++f){s=u,u=c,c=l[(f+1)%l.length];for(var h=e[s],d=e[u],p=e[c],g=new Array(3),y=0,m=new Array(3),v=0,b=0;b<3;++b)g[b]=h[b]-d[b],y+=g[b]*g[b],m[b]=p[b]-d[b],v+=m[b]*m[b];if(a<y*v)for(var x=i[u],_=1/Math.sqrt(y*v),b=0;b<3;++b){var w=(b+1)%3,k=(b+2)%3;x[b]+=_*(m[w]*g[k]-m[k]*g[w])}}for(o=0;o<r;++o){for(var x=i[o],M=0,b=0;b<3;++b)M+=x[b]*x[b];if(a<M)for(_=1/Math.sqrt(M),b=0;b<3;++b)x[b]*=_;else for(b=0;b<3;++b)x[b]=0}return i},n.faceNormals=function(t,e,n){for(var r=t.length,i=new Array(r),a=void 0===n?1e-6:n,o=0;o<r;++o){for(var s=t[o],l=new Array(3),u=0;u<3;++u)l[u]=e[s[u]];for(var c=new Array(3),f=new Array(3),u=0;u<3;++u)c[u]=l[1][u]-l[0][u],f[u]=l[2][u]-l[0][u];for(var h=new Array(3),d=0,u=0;u<3;++u){var p=(u+1)%3,g=(u+2)%3;h[u]=c[p]*f[g]-c[g]*f[p],d+=h[u]*h[u]}d=a<d?1/Math.sqrt(d):0;for(u=0;u<3;++u)h[u]*=d;i[o]=h}return i}},{}],257:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,a,o,s,l,u){var c=e+a+u;{var f;0<f?(f=Math.sqrt(c+1),t[0]=.5*(o-l)/f,t[1]=.5*(s-r)/f,t[2]=.5*(n-a)/f,t[3]=.5*f):(u=Math.max(e,a,u),f=Math.sqrt(2*u-c+1),u<=e?(t[0]=.5*f,t[1]=.5*(i+n)/f,t[2]=.5*(s+r)/f,t[3]=.5*(o-l)/f):u<=a?(t[0]=.5*(n+i)/f,t[1]=.5*f,t[2]=.5*(l+o)/f,t[3]=.5*(s-r)/f):(t[0]=.5*(r+s)/f,t[1]=.5*(o+l)/f,t[2]=.5*f,t[3]=.5*(n-i)/f))}return t}},{}],258:[function(t,e,n){"use strict";e.exports=function(t){var e=(t=t||{}).center||[0,0,0],n=t.rotation||[0,0,0,1],r=t.radius||1;e=[].slice.call(e,0,3),c(n=[].slice.call(n,0,4),n);r=new i(n,e,Math.log(r));r.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&r.lookAt(0,t.eye,t.center,t.up);return r};var r=t("filtered-vector"),s=t("gl-mat4/lookAt"),l=t("gl-mat4/fromQuat"),o=t("gl-mat4/invert"),u=t("./lib/quatFromFrame");function m(t,e,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2))}function v(t,e,n,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2)+Math.pow(r,2))}function c(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],e=v(n,r,i,a);1e-6<e?(t[0]=n/e,t[1]=r/e,t[2]=i/e,t[3]=a/e):(t[0]=t[1]=t[2]=0,t[3]=1)}function i(t,e,n){this.radius=r([n]),this.center=r(e),this.rotation=r(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}t=i.prototype;t.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},t.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;c(e,e);var n=this.computedMatrix;l(n,e);var r=this.computedCenter,i=this.computedEye,t=this.computedUp,e=Math.exp(this.computedRadius[0]);i[0]=r[0]+e*n[2],i[1]=r[1]+e*n[6],i[2]=r[2]+e*n[10],t[0]=n[1],t[1]=n[5],t[2]=n[9];for(var a=0;a<3;++a){for(var o=0,s=0;s<3;++s)o+=n[a+4*s]*i[s];n[12+a]=-o}},t.getMatrix=function(t,e){this.recalcMatrix(t);var n=this.computedMatrix;if(e){for(var r=0;r<16;++r)e[r]=n[r];return e}return n},t.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},t.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},t.pan=function(t,e,n,r){e=e||0,n=n||0,r=r||0,this.recalcMatrix(t);var i=this.computedMatrix,a=i[1],o=i[5],s=i[9],l=m(a,o,s);a/=l,o/=l,s/=l;var u=i[0],c=i[4],f=i[8],h=u*a+c*o+f*s,d=m(u-=a*h,c-=o*h,f-=s*h);u/=d,c/=d,f/=d;var p=i[2],l=i[6],h=i[10],d=p*a+l*o+h*s,i=p*u+l*c+h*f,i=m(p-=d*a+i*u,l-=d*o+i*c,h-=d*s+i*f);a=u*e+a*n,o=c*e+o*n,n=f*e+s*n;this.center.move(t,a,o,n);n=Math.exp(this.computedRadius[0]),n=Math.max(1e-4,n+r);this.radius.set(t,Math.log(n))},t.rotate=function(t,e,n,r){this.recalcMatrix(t),e=e||0,n=n||0;var i=this.computedMatrix,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],d=i[10],p=e*a+n*l,g=e*o+n*u,y=e*s+n*c,i=-(h*y-d*g),a=-(d*p-f*y),l=-(f*g-h*p),o=Math.sqrt(Math.max(0,1-Math.pow(i,2)-Math.pow(a,2)-Math.pow(l,2))),u=v(i,a,l,o);1e-6<u?(i/=u,a/=u,l/=u,o/=u):(i=a=l=0,o=1);s=this.computedRotation,n=s[0],c=s[1],y=s[2],g=s[3],p=n*o+g*i+c*l-y*a,u=c*o+g*a+y*i-n*l,s=y*o+g*l+n*a-c*i,y=g*o-n*i-c*a-y*l;r&&(i=f,a=h,l=d,i*=r=Math.sin(r)/m(i,a,l),a*=r,l*=r,y=y*(o=Math.cos(e))-(p=p*o+y*i+u*l-s*a)*i-(u=u*o+y*a+s*i-p*l)*a-(s=s*o+y*l+p*a-u*i)*l);l=v(p,u,s,y);1e-6<l?(p/=l,u/=l,s/=l,y/=l):(p=u=s=0,y=1),this.rotation.set(t,p,u,s,y)},t.lookAt=function(t,e,n,r){this.recalcMatrix(t),n=n||this.computedCenter,e=e||this.computedEye,r=r||this.computedUp;var i=this.computedMatrix;s(i,e,n,r);r=this.computedRotation;u(r,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]),c(r,r),this.rotation.set(t,r[0],r[1],r[2],r[3]);for(var a=0,o=0;o<3;++o)a+=Math.pow(n[o]-e[o],2);this.radius.set(t,.5*Math.log(Math.max(a,1e-6))),this.center.set(t,n[0],n[1],n[2])},t.translate=function(t,e,n,r){this.center.move(t,e||0,n||0,r||0)},t.setMatrix=function(t,e){var n=this.computedRotation;u(n,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),c(n,n),this.rotation.set(t,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;o(r,e);var i,a=r[15];1e-6<Math.abs(a)?(i=r[12]/a,n=r[13]/a,e=r[14]/a,this.recalcMatrix(t),a=Math.exp(this.computedRadius[0]),this.center.set(t,i-r[2]*a,n-r[6]*a,e-r[10]*a)):this.center.idle(t),this.radius.idle(t)},t.setDistance=function(t,e){0<e&&this.radius.set(t,Math.log(e))},t.setDistanceLimits=function(t,e){t=0<t?Math.log(t):-1/0,e=0<e?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},t.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},t.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},t.fromJSON=function(t){var e=this.lastT(),n=t.center;n&&this.center.set(e,n[0],n[1],n[2]);n=t.rotation;n&&this.rotation.set(e,n[0],n[1],n[2],n[3]);n=t.distance;n&&0<n&&this.radius.set(e,Math.log(n)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},{"./lib/quatFromFrame":257,"filtered-vector":100,"gl-mat4/fromQuat":128,"gl-mat4/invert":139,"gl-mat4/lookAt":140}],259:[function(t,e,n){"use strict";var r=t("repeat-string");e.exports=function(t,e,n){return r(n=void 0!==n?n+"":" ",e)+t}},{"repeat-string":626}],260:[function(t,e,n){"use strict";e.exports=function(t){var i=[];return t.replace(r,function(t,e,n){var r=e.toLowerCase();for(n=function(t){t=t.match(o);return t?t.map(Number):[]}(n),"m"==r&&2<n.length&&(i.push([e].concat(n.splice(0,2))),r="l",e="m"==e?"l":"L");;){if(n.length==a[r])return n.unshift(e),i.push(n);if(n.length<a[r])throw new Error("malformed path data");i.push([e].concat(n.splice(0,a[r])))}}),i};var a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],261:[function(t,e,n){"use strict";e.exports=function(t,e){e=e||[0,""],t=String(t);var n=parseFloat(t,10);return e[0]=n,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},{}],262:[function(t,e,n){"use strict";e.exports=function(t){var e=t.length;{if(e<s){for(var n=1,r=0;r<e;++r)for(var i=0;i<r;++i)if(t[r]<t[i])n=-n;else if(t[r]===t[i])return 0;return n}for(var a=l.mallocUint8(e),r=0;r<e;++r)a[r]=0;for(n=1,r=0;r<e;++r)if(!a[r]){var o=1;a[r]=1;for(i=t[r];i!==r;i=t[i]){if(a[i])return l.freeUint8(a),0;o+=1,a[i]=1}1&o||(n=-n)}return l.freeUint8(a),n}};var s=32,l=t("typedarray-pool")},{"typedarray-pool":657}],263:[function(t,e,n){"use strict";var l=t("typedarray-pool"),u=t("invert-permutation");n.rank=function(t){var e=t.length;switch(e){case 0:case 1:return 0;case 2:return t[1]}var n,r,i,a=l.mallocUint32(e),o=l.mallocUint32(e),s=0;for(u(t,o),i=0;i<e;++i)a[i]=t[i];for(i=e-1;0<i;--i)r=o[i],n=a[i],a[i]=a[r],a[r]=n,o[i]=o[n],o[n]=r,s=(s+n)*i;return l.freeUint32(o),l.freeUint32(a),s},n.unrank=function(t,e,n){switch(t){case 0:return n?n:[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(e?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):e?[0,1]:[1,0]}var r,i,a,o=1;for((n=n||new Array(t))[0]=0,a=1;a<t;++a)o=o*(n[a]=a)|0;for(a=t-1;0<a;--a)e=e-(r=e/o|0)*o|0,o=o/a|0,i=0|n[a],n[a]=0|n[r],n[r]=0|i;return n}},{"invert-permutation":201,"typedarray-pool":657}],264:[function(t,e,n){"use strict";e.exports=function(t,h){for(var e=0|h.length,n=t.length,d=[new Array(e),new Array(e)],r=0;r<e;++r)d[0][r]=[],d[1][r]=[];for(r=0;r<n;++r){var i=t[r];d[0][i[0]].push(i),d[1][i[1]].push(i)}for(var a=[],r=0;r<e;++r)d[0][r].length+d[1][r].length===0&&a.push([r]);function p(t,e){e=d[e][t[e]];e.splice(e.indexOf(t),1)}function u(t,e,n){for(var r,i,a,o=0;o<2;++o)if(0<d[o][e].length){r=d[o][e][0],a=o;break}i=r[1^a];for(var s=0;s<2;++s)for(var l=d[s][e],u=0;u<l.length;++u){var c=l[u],f=c[1^s];0<g(h[t],h[e],h[i],h[f])&&(r=c,i=f,a=s)}return n||r&&p(r,a),i}for(r=0;r<e;++r)for(var o=0;o<2;++o){for(var s=[];0<d[o][r].length;){d[0][r].length;var l=function(t,e){var n=d[e][t][0],r=[t];p(n,e);for(var i=n[1^e];;){for(;i!==t;)r.push(i),i=u(r[r.length-2],i,!1);if(d[0][t].length+d[1][t].length===0)break;var a=r[r.length-1],o=t,s=r[1],l=u(a,o,!0);if(g(h[a],h[o],h[s],h[l])<0)break;r.push(t),i=u(a,o)}return r}(r,o);!function(t){return t[1]===t[t.length-1]}(l)?(0<s.length&&a.push(s),s=l):s.push.apply(s,l)}0<s.length&&a.push(s)}return a};var g=t("compare-angle")},{"compare-angle":50}],265:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=g(t,e.length),r=new Array(e.length),i=new Array(e.length),a=[],o=0;o<e.length;++o){var s=n[o].length;i[o]=s,r[o]=!0,s<=1&&a.push(o)}for(;0<a.length;){var l=a.pop();r[l]=!1;for(var u=n[l],o=0;o<u.length;++o){var c=u[o];0==--i[c]&&a.push(c)}}for(var f=new Array(e.length),h=[],o=0;o<e.length;++o)r[o]?(l=h.length,f[o]=l,h.push(e[o])):f[o]=-1;for(var d=[],o=0;o<t.length;++o){var p=t[o];r[p[0]]&&r[p[1]]&&d.push([f[p[0]],f[p[1]]])}return[d,h]};var g=t("edges-to-adjacency-list")},{"edges-to-adjacency-list":95}],266:[function(t,e,n){"use strict";e.exports=function(t,l){var e=H(t,l);t=e[0];for(var n=(l=e[1]).length,r=(t.length,z(t,l.length)),i=0;i<n;++i)if(r[i].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var a=I(t,l);for(var o=(a=a.filter(function(t){for(var e=t.length,n=[0],r=0;r<e;++r)var i=l[t[r]],a=l[t[(r+1)%e]],o=B(-i[0],i[1]),s=B(-i[0],a[1]),i=B(a[0],i[1]),a=B(a[0],a[1]),n=U(n,U(U(o,s),U(i,a)));return 0<n[n.length-1]})).length,s=new Array(o),u=new Array(o),i=0;i<o;++i){s[i]=i;var c=new Array(o),f=a[i].map(function(t){return l[t]}),h=F([f]),d=0;t:for(var p=0;p<o;++p)if(c[p]=0,i!==p){for(var g=(N=a[p]).length,y=0;y<g;++y){var m=h(l[N[y]]);if(0!==m){m<0&&(c[p]=1,d+=1);continue t}}c[p]=1,d+=1}u[i]=[d,i,c]}u.sort(function(t,e){return e[0]-t[0]});for(i=0;i<o;++i)for(var v=(c=u[i])[1],b=c[2],p=0;p<o;++p)b[p]&&(s[p]=v);for(var x=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=[];return e}(o),i=0;i<o;++i)x[i].push(s[i]),x[s[i]].push(i);for(var _={},w=q(n,!1),i=0;i<o;++i)for(g=(N=a[i]).length,p=0;p<g;++p){var k,M=N[p],T=N[(p+1)%g],A=Math.min(M,T)+":"+Math.max(M,T);A in _?(k=_[A],x[k].push(i),x[i].push(k),w[M]=w[T]=!0):_[A]=i}function S(t){for(var e=t.length,n=0;n<e;++n)if(!w[t[n]])return;return 1}for(var E=[],O=q(o,-1),i=0;i<o;++i)s[i]!==i||S(a[i])?O[i]=-1:(E.push(i),O[i]=0);var C,e=[];for(;0<E.length;){var P=E.pop(),L=x[P];V(L,function(t,e){return t-e});var R=L.length,j=O[P];0===j&&(N=a[P],C=[N]);for(i=0;i<R;++i){var N,D=L[i];0<=O[D]||(O[D]=1^j,E.push(D),0===j&&(S(N=a[D])||(N.reverse(),C.push(N))))}0===j&&e.push(C)}return e};var z=t("edges-to-adjacency-list"),I=t("planar-dual"),F=t("point-in-big-polygon"),B=t("two-product"),U=t("robust-sum"),V=t("uniq"),H=t("./lib/trim-leaves");function q(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=e;return n}},{"./lib/trim-leaves":265,"edges-to-adjacency-list":95,"planar-dual":264,"point-in-big-polygon":609,"robust-sum":638,"two-product":655,uniq:659}],267:[function(t,e,n){"use strict";var r,i=t("../src/lib"),a={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(r in a){var o=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");i.addStyleRule(o,a[r])}},{"../src/lib":424}],268:[function(t,e,n){"use strict";e.exports=t("../src/core")},{"../src/core":404}],269:[function(t,e,n){"use strict";e.exports=t("../src/traces/histogram")},{"../src/traces/histogram":560}],270:[function(t,e,n){"use strict";e.exports=t("../src/traces/isosurface")},{"../src/traces/isosurface":566}],271:[function(t,e,n){"use strict";e.exports=t("../src/traces/scatter3d")},{"../src/traces/scatter3d":575}],272:[function(t,e,n){"use strict";var i=t("color-rgba"),a=t("clamp"),o=t("dtype");e.exports=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var n=new(o(e))(4),r="uint8"!==e&&"uint8_clamped"!==e;return t.length&&"string"!=typeof t||((t=i(t))[0]/=255,t[1]/=255,t[2]/=255),(e=t)instanceof Uint8Array||e instanceof Uint8ClampedArray||!!(Array.isArray(e)&&(1<e[0]||0===e[0])&&(1<e[1]||0===e[1])&&(1<e[2]||0===e[2])&&(!e[3]||1<e[3]))?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:255,r&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255)):r?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:1):(n[0]=a(Math.floor(255*t[0]),0,255),n[1]=a(Math.floor(255*t[1]),0,255),n[2]=a(Math.floor(255*t[2]),0,255),n[3]=null==t[3]?255:a(Math.floor(255*t[3]),0,255)),n}},{clamp:42,"color-rgba":274,dtype:93}],273:[function(t,e,n){"use strict";var u=t("color-name");e.exports=function(t){var e,n,r=[],i=1;{var a,o,s,l;"string"==typeof t?u[t]?(r=u[t].slice(),n="rgb"):"transparent"===t?(n="rgb",r=[i=0,0,0]):/^#[A-Fa-f0-9]+$/.test(t)?(l=(s=t.slice(1)).length,i=1,l<=4?(r=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===l&&(i=parseInt(s[3]+s[3],16)/255)):(r=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===l&&(i=parseInt(s[6]+s[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"):(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t))?(a=e[1],o="rgb"===a,s=a.replace(/a$/,""),l="cmyk"===(n=s)?4:"gray"===s?1:3,r=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(t,e){if(/%$/.test(t))return e===l?parseFloat(t)/100:"rgb"===s?255*parseFloat(t)/100:parseFloat(t);if("h"===s[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==c[t])return c[t]}return parseFloat(t)}),a===s&&r.push(1),i=o||void 0===r[l]?1:r[l],r=r.slice(0,l)):10<t.length&&/[0-9](?:\s|\/)/.test(t)&&(r=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),n=t.match(/([a-z])/gi).join("").toLowerCase()):isNaN(t)?Array.isArray(t)||t.length?(r=[t[0],t[1],t[2]],n="rgb",i=4===t.length?t[3]:1):t instanceof Object&&(r=null!=t.r||null!=t.red||null!=t.R?(n="rgb",[t.r||t.red||t.R||0,t.g||t.green||t.G||0,t.b||t.blue||t.B||0]):(n="hsl",[t.h||t.hue||t.H||0,t.s||t.saturation||t.S||0,t.l||t.lightness||t.L||t.b||t.brightness]),i=t.a||t.alpha||t.opacity||1,null!=t.opacity&&(i/=100)):(n="rgb",r=[t>>>16,(65280&t)>>>8,255&t])}return{space:n,values:r,alpha:i}};var c={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},{"color-name":45}],274:[function(t,e,n){"use strict";var r=t("color-parse"),i=t("color-space/hsl");e.exports=function(t){Array.isArray(t)&&t.raw&&(t=String.raw.apply(null,arguments));var e=r(t);return e.space?((t=Array(3))[0]=Math.min(Math.max(e.values[0],0),255),t[1]=Math.min(Math.max(e.values[1],0),255),t[2]=Math.min(Math.max(e.values[2],0),255),"h"===e.space[0]&&(t=i.rgb(t)),t.push(Math.min(Math.max(e.alpha,0),1)),t):[]}},{"color-parse":273,"color-space/hsl":46}],275:[function(t,e,n){var r,i;r=this,i=function(e,T){"use strict";function A(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function S(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function E(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function n(t){var r=t.dateTime,i=t.date,a=t.time,e=t.periods,n=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=C(e),c=P(e),f=C(n),h=P(n),d=C(o),p=P(o),g=C(s),y=P(s),m=C(l),v=P(l),b={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:$,e:$,f:rt,g:dt,G:gt,H:J,I:tt,j:et,L:nt,m:it,M:at,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:zt,s:It,S:ot,u:st,U:lt,V:ut,w:ct,W:ft,x:null,X:null,y:ht,Y:pt,Z:yt,"%":Dt},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:mt,e:mt,f:wt,g:Lt,G:jt,H:vt,I:bt,j:xt,L:_t,m:kt,M:Mt,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:zt,s:It,S:Tt,u:At,U:St,V:Et,w:Ot,W:Ct,x:null,X:null,y:Pt,Y:Rt,Z:Nt,"%":Dt},_={a:function(t,e,n){e=d.exec(e.slice(n));return e?(t.w=p[e[0].toLowerCase()],n+e[0].length):-1},A:function(t,e,n){e=f.exec(e.slice(n));return e?(t.w=h[e[0].toLowerCase()],n+e[0].length):-1},b:function(t,e,n){e=m.exec(e.slice(n));return e?(t.m=v[e[0].toLowerCase()],n+e[0].length):-1},B:function(t,e,n){e=g.exec(e.slice(n));return e?(t.m=y[e[0].toLowerCase()],n+e[0].length):-1},c:function(t,e,n){return M(t,r,e,n)},d:V,e:V,f:W,g:I,G:z,H:q,I:q,j:H,L:X,m:U,M:G,p:function(t,e,n){e=u.exec(e.slice(n));return e?(t.p=c[e[0].toLowerCase()],n+e[0].length):-1},q:B,Q:K,s:Q,S:Y,u:R,U:j,V:N,w:L,W:D,x:function(t,e,n){return M(t,i,e,n)},X:function(t,e,n){return M(t,a,e,n)},y:I,Y:z,Z:F,"%":Z};function w(l,u){return function(t){var e,n,r,i=[],a=-1,o=0,s=l.length;for(t instanceof Date||(t=new Date(+t));++a<s;)37===l.charCodeAt(a)&&(i.push(l.slice(o,a)),null!=(n=O[e=l.charAt(++a)])?e=l.charAt(++a):n="e"===e?" ":"0",(r=u[e])&&(e=r(t,n)),i.push(e),o=a+1);return i.push(l.slice(o,a)),i.join("")}}function k(i,a){return function(t){var e,n,r=E(1900,void 0,1);if(M(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!a||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(e=4<(n=(e=S(E(r.y,0,1))).getUTCDay())||0===n?T.utcMonday.ceil(e):T.utcMonday(e),e=T.utcDay.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=A(E(r.y,0,1))).getDay())||0===n?T.timeMonday.ceil(e):T.timeMonday(e),e=T.timeDay.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?S(E(r.y,0,1)).getUTCDay():A(E(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,S(r)):A(r)}}function M(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=_[i in O?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(i,b),b.X=w(a,b),b.c=w(r,b),x.x=w(i,x),x.X=w(a,x),x.c=w(r,x),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var r,O={"-":"",_:" ",0:"0"},i=/^\s*\d+/,a=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<n?new Array(n-t+1).join(e)+i:i)}function l(t){return t.replace(o,"\\$&")}function C(t){return new RegExp("^(?:"+t.map(l).join("|")+")","i")}function P(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function L(t,e,n){e=i.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function R(t,e,n){e=i.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function j(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function N(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function D(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function z(t,e,n){e=i.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function I(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function F(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function B(t,e,n){e=i.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function U(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function V(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function H(t,e,n){e=i.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function q(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function G(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function Y(t,e,n){e=i.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function X(t,e,n){e=i.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function W(t,e,n){e=i.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function Z(t,e,n){e=a.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function K(t,e,n){e=i.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function Q(t,e,n){e=i.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function $(t,e){return s(t.getDate(),e,2)}function J(t,e){return s(t.getHours(),e,2)}function tt(t,e){return s(t.getHours()%12||12,e,2)}function et(t,e){return s(1+T.timeDay.count(T.timeYear(t),t),e,3)}function nt(t,e){return s(t.getMilliseconds(),e,3)}function rt(t,e){return nt(t,e)+"000"}function it(t,e){return s(t.getMonth()+1,e,2)}function at(t,e){return s(t.getMinutes(),e,2)}function ot(t,e){return s(t.getSeconds(),e,2)}function st(t){t=t.getDay();return 0===t?7:t}function lt(t,e){return s(T.timeSunday.count(T.timeYear(t)-1,t),e,2)}function u(t){var e=t.getDay();return 4<=e||0===e?T.timeThursday(t):T.timeThursday.ceil(t)}function ut(t,e){return t=u(t),s(T.timeThursday.count(T.timeYear(t),t)+(4===T.timeYear(t).getDay()),e,2)}function ct(t){return t.getDay()}function ft(t,e){return s(T.timeMonday.count(T.timeYear(t)-1,t),e,2)}function ht(t,e){return s(t.getFullYear()%100,e,2)}function dt(t,e){return s((t=u(t)).getFullYear()%100,e,2)}function pt(t,e){return s(t.getFullYear()%1e4,e,4)}function gt(t,e){var n=t.getDay();return s((t=4<=n||0===n?T.timeThursday(t):T.timeThursday.ceil(t)).getFullYear()%1e4,e,4)}function yt(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+s(t/60|0,"0",2)+s(t%60,"0",2)}function mt(t,e){return s(t.getUTCDate(),e,2)}function vt(t,e){return s(t.getUTCHours(),e,2)}function bt(t,e){return s(t.getUTCHours()%12||12,e,2)}function xt(t,e){return s(1+T.utcDay.count(T.utcYear(t),t),e,3)}function _t(t,e){return s(t.getUTCMilliseconds(),e,3)}function wt(t,e){return _t(t,e)+"000"}function kt(t,e){return s(t.getUTCMonth()+1,e,2)}function Mt(t,e){return s(t.getUTCMinutes(),e,2)}function Tt(t,e){return s(t.getUTCSeconds(),e,2)}function At(t){t=t.getUTCDay();return 0===t?7:t}function St(t,e){return s(T.utcSunday.count(T.utcYear(t)-1,t),e,2)}function c(t){var e=t.getUTCDay();return 4<=e||0===e?T.utcThursday(t):T.utcThursday.ceil(t)}function Et(t,e){return t=c(t),s(T.utcThursday.count(T.utcYear(t),t)+(4===T.utcYear(t).getUTCDay()),e,2)}function Ot(t){return t.getUTCDay()}function Ct(t,e){return s(T.utcMonday.count(T.utcYear(t)-1,t),e,2)}function Pt(t,e){return s(t.getUTCFullYear()%100,e,2)}function Lt(t,e){return s((t=c(t)).getUTCFullYear()%100,e,2)}function Rt(t,e){return s(t.getUTCFullYear()%1e4,e,4)}function jt(t,e){var n=t.getUTCDay();return s((t=4<=n||0===n?T.utcThursday(t):T.utcThursday.ceil(t)).getUTCFullYear()%1e4,e,4)}function Nt(){return"+0000"}function Dt(){return"%"}function zt(t){return+t}function It(t){return Math.floor(+t/1e3)}function t(t){return r=n(t),e.timeFormat=r.format,e.timeParse=r.parse,e.utcFormat=r.utcFormat,e.utcParse=r.utcParse,r}t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var f="%Y-%m-%dT%H:%M:%S.%LZ";var h=Date.prototype.toISOString?function(t){return t.toISOString()}:e.utcFormat(f);f=+new Date("2000-01-01T00:00:00.000Z")?function(t){return t=new Date(t),isNaN(t)?null:t}:e.utcParse(f);e.isoFormat=h,e.isoParse=f,e.timeFormatDefaultLocale=t,e.timeFormatLocale=n,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-time")):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":276}],276:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var i=new Date,l=new Date;function u(a,o,n,r){function s(t){return a(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return a(t=new Date(+t)),t},s.ceil=function(t){return a(t=new Date(t-1)),o(t,1),a(t),t},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,n){var r,i=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(;i.push(r=new Date(+t)),o(t,n),a(t),r<t&&t<e;);return i},s.filter=function(n){return u(function(t){if(t<=t)for(;a(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(s.count=function(t,e){return i.setTime(+t),l.setTime(+e),a(i),a(l),Math.floor(n(i,l))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(r?function(t){return r(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var e=u(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});e.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?u(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):e:null};var n=e.range,r=u(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),a=r.range,o=u(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()}),s=o.range,c=u(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),f=c.range,h=u(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1}),d=h.range;function p(e){return u(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var g=p(0),y=p(1),m=p(2),v=p(3),b=p(4),x=p(5),_=p(6),w=g.range,k=y.range,M=m.range,T=v.range,A=b.range,S=x.range,E=_.range,O=u(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),C=O.range,P=u(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});P.every=function(n){return isFinite(n=Math.floor(n))&&0<n?u(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var L=P.range,R=u(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}),j=R.range,N=u(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),D=N.range,z=u(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),I=z.range;function F(e){return u(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var B=F(0),U=F(1),V=F(2),H=F(3),q=F(4),G=F(5),Y=F(6),X=B.range,W=U.range,Z=V.range,K=H.range,Q=q.range,$=G.range,J=Y.range,tt=u(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),et=tt.range,nt=u(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});nt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?u(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var rt=nt.range;t.timeDay=h,t.timeDays=d,t.timeFriday=x,t.timeFridays=S,t.timeHour=c,t.timeHours=f,t.timeInterval=u,t.timeMillisecond=e,t.timeMilliseconds=n,t.timeMinute=o,t.timeMinutes=s,t.timeMonday=y,t.timeMondays=k,t.timeMonth=O,t.timeMonths=C,t.timeSaturday=_,t.timeSaturdays=E,t.timeSecond=r,t.timeSeconds=a,t.timeSunday=g,t.timeSundays=w,t.timeThursday=b,t.timeThursdays=A,t.timeTuesday=m,t.timeTuesdays=M,t.timeWednesday=v,t.timeWednesdays=T,t.timeWeek=g,t.timeWeeks=w,t.timeYear=P,t.timeYears=L,t.utcDay=z,t.utcDays=I,t.utcFriday=G,t.utcFridays=$,t.utcHour=N,t.utcHours=D,t.utcMillisecond=e,t.utcMilliseconds=n,t.utcMinute=R,t.utcMinutes=j,t.utcMonday=U,t.utcMondays=W,t.utcMonth=tt,t.utcMonths=et,t.utcSaturday=Y,t.utcSaturdays=J,t.utcSecond=r,t.utcSeconds=a,t.utcSunday=B,t.utcSundays=X,t.utcThursday=q,t.utcThursdays=Q,t.utcTuesday=V,t.utcTuesdays=Z,t.utcWednesday=H,t.utcWednesdays=K,t.utcWeek=B,t.utcWeeks=X,t.utcYear=nt,t.utcYears=rt,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):i((r=r||self).d3=r.d3||{})},{}],277:[function(t,Js,e){!function(){var R={version:"3.5.17"},i=[].slice,h=function(t){return i.call(t)},j=this.document;function s(t){return t&&(t.ownerDocument||t.document||t).documentElement}function N(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(j)try{h(j.documentElement.childNodes)[0].nodeType}catch(t){h=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),j)try{j.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var e=this.Element.prototype,n=e.setAttribute,r=e.setAttributeNS,a=this.CSSStyleDeclaration.prototype,o=a.setProperty;e.setAttribute=function(t,e){n.call(this,t,e+"")},e.setAttributeNS=function(t,e,n){r.call(this,t,e,n+"")},a.setProperty=function(t,e,n){o.call(this,t,e+"",n)}}function l(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function u(t){return null===t?NaN:+t}function c(t){return!isNaN(t)}function t(a){return{left:function(t,e,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=t.length);n<r;){var i=n+r>>>1;a(t[i],e)<0?n=1+i:r=i}return n},right:function(t,e,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=t.length);n<r;){var i=n+r>>>1;0<a(t[i],e)?r=i:n=1+i}return n}}}R.ascending=l,R.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},R.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r<=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r<n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r<=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r<n&&(n=r)}return n},R.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r<=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n<r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r<=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n<r&&(n=r)}return n},R.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r<=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(r<n&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r<=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(r<n&&(n=r),i<r&&(i=r))}return[n,i]},R.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)c(n=+t[a])&&(r+=n);else for(;++a<i;)c(n=+e.call(t,t[a],a))&&(r+=n);return r},R.mean=function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)c(n=u(t[a]))?r+=n:--o;else for(;++a<i;)c(n=u(e.call(t,t[a],a)))?r+=n:--o;if(o)return r/o},R.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),e=+t[r-1],n=n-r;return n?e+n*(t[r]-e):e},R.median=function(t,e){var n,r=[],i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)c(n=u(t[a]))&&r.push(n);else for(;++a<i;)c(n=u(e.call(t,t[a],a)))&&r.push(n);if(r.length)return R.quantile(r.sort(l),.5)},R.variance=function(t,e){var n,r,i=t.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)c(n=u(t[s]))&&(o+=(r=n-a)*(n-(a+=r/++l)));else for(;++s<i;)c(n=u(e.call(t,t[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++l)));if(1<l)return o/(l-1)},R.deviation=function(){var t=R.variance.apply(this,arguments);return t&&Math.sqrt(t)};var f=t(l);function d(t){return t.length}R.bisectLeft=f.left,R.bisect=R.bisectRight=f.right,R.bisector=function(n){return t(1===n.length?function(t,e){return l(n(t),e)}:n)},R.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},R.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},R.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},R.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=R.min(t,d),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r},R.zip=function(){return R.transpose(arguments)},R.keys=function(t){var e,n=[];for(e in t)n.push(e);return n},R.values=function(t){var e,n=[];for(e in t)n.push(t[e]);return n},R.entries=function(t){var e,n=[];for(e in t)n.push({key:e,value:t[e]});return n},R.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--o]=r[e];return n};var P=Math.abs;function p(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function v(){this._=Object.create(null)}R.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(t){var e=1;for(;t*e%1;)e*=10;return e}(P(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},R.map=function(t,e){var n=new v;if(t instanceof v)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var g="__proto__",y="\0";function m(t){return(t+="")===g||t[0]===y?y+t:t}function b(t){return(t+="")[0]===y?t.slice(1):t}function x(t){return m(t)in this._}function _(t){return(t=m(t))in this._&&delete this._[t]}function w(){var t,e=[];for(t in this._)e.push(b(t));return e}function k(){var t,e=0;for(t in this._)++e;return e}function M(){for(var t in this._)return!1;return!0}function T(){this._=Object.create(null)}function C(t){return t}function A(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=S.length;n<r;++n){var i=S[n]+e;if(i in t)return i}}p(v,{has:x,get:function(t){return this._[m(t)]},set:function(t,e){return this._[m(t)]=e},remove:_,keys:w,values:function(){var t,e=[];for(t in this._)e.push(this._[t]);return e},entries:function(){var t,e=[];for(t in this._)e.push({key:b(t),value:this._[t]});return e},size:k,empty:M,forEach:function(t){for(var e in this._)t.call(this,b(e),this._[e])}}),R.nest=function(){var f,h,d={},p=[],e=[];function g(n,t,r){if(r>=p.length)return h?h.call(d,t):f?t.sort(f):t;for(var e,i,a,o,s=-1,l=t.length,u=p[r++],c=new v;++s<l;)(o=c.get(e=u(i=t[s])))?o.push(i):c.set(e,[i]);return a=n?(i=n(),function(t,e){i.set(t,g(n,e,r))}):(i={},function(t,e){i[t]=g(n,e,r)}),c.forEach(a),i}return d.map=function(t,e){return g(e,t,0)},d.entries=function(t){return function n(t,r){if(r>=p.length)return t;var i=[],a=e[r++];return t.forEach(function(t,e){i.push({key:t,values:n(e,r)})}),a?i.sort(function(t,e){return a(t.key,e.key)}):i}(g(R.map,t,0),0)},d.key=function(t){return p.push(t),d},d.sortKeys=function(t){return e[p.length-1]=t,d},d.sortValues=function(t){return f=t,d},d.rollup=function(t){return h=t,d},d},R.set=function(t){var e=new T;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},p(T,{has:x,add:function(t){return this._[m(t+="")]=!0,t},remove:_,values:w,size:k,empty:M,forEach:function(t){for(var e in this._)t.call(this,b(e))}}),R.behavior={},R.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=function(e,n,r){return function(){var t=r.apply(n,arguments);return t===n?e:t}}(t,e,e[n]);return t};var S=["webkit","ms","moz","Moz","o","O"];function E(){}function O(){}function L(i){var a=[],r=new v;function t(){for(var t,e=a,n=-1,r=e.length;++n<r;)(t=e[n].on)&&t.apply(this,arguments);return i}return t.on=function(t,e){var n=r.get(t);return arguments.length<2?n&&n.on:(n&&(n.on=null,a=a.slice(0,n=a.indexOf(n)).concat(a.slice(n+1)),r.remove(t)),e&&a.push(r.set(t,{on:e})),i)},t}function D(){R.event.preventDefault()}function z(){for(var t,e=R.event;t=e.sourceEvent;)e=t;return e}function I(i){for(var a=new O,t=0,e=arguments.length;++t<e;)a[arguments[t]]=L(a);return a.of=function(n,r){return function(t){try{var e=t.sourceEvent=R.event;t.target=i,R.event=t,a[t.type].apply(n,r)}finally{R.event=e}}},a}R.dispatch=function(){for(var t=new O,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=L(t);return t},O.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(0<=n&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},R.event=null,R.requote=function(t){return t.replace(F,"\\$&")};var F=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,B={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function U(t){return B(t,G),t}var V=function(t,e){return e.querySelector(t)},H=function(t,e){return e.querySelectorAll(t)},q=function(t,e){var n=t.matches||t[A(t,"matchesSelector")];return(q=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(V=function(t,e){return Sizzle(t,e)[0]||null},q=(H=Sizzle).matchesSelector),R.selection=function(){return R.select(j.documentElement)};var G=R.selection.prototype=[];function Y(t){return"function"==typeof t?t:function(){return V(t,this)}}function X(t){return"function"==typeof t?t:function(){return H(t,this)}}G.select=function(t){var e,n,r,i,a=[];t=Y(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return U(a)},G.selectAll=function(t){var e,n,r=[];t=X(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(e=h(t.call(n,n.__data__,s,i))),e.parentNode=n);return U(r)};var W="http://www.w3.org/1999/xhtml",Z={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K(e,n){return e=R.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function Q(t){return t.trim().replace(/\s+/g," ")}function $(t){return new RegExp("(?:^|\\s+)"+R.requote(t)+"(?:\\s+|$)","g")}function J(t){return(t+"").trim().split(/^|\s+/)}function tt(n,r){var i=(n=J(n).map(et)).length;return"function"==typeof r?function(){for(var t=-1,e=r.apply(this,arguments);++t<i;)n[t](this,e)}:function(){for(var t=-1;++t<i;)n[t](this,r)}}function et(r){var i=$(r);return function(t,e){if(n=t.classList)return e?n.add(r):n.remove(r);var n=t.getAttribute("class")||"";e?(i.lastIndex=0,i.test(n)||t.setAttribute("class",Q(n+" "+r))):t.setAttribute("class",Q(n.replace(i," ")))}}function nt(e,n,r){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}:function(){this.style.setProperty(e,n,r)}}function rt(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function it(n){return"function"==typeof n?n:(n=R.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var t=this.ownerDocument,e=this.namespaceURI;return e===W&&t.documentElement.namespaceURI===W?t.createElement(n):t.createElementNS(e,n)}}function at(){var t=this.parentNode;t&&t.removeChild(this)}function ot(t){return{__data__:t}}function st(t){return function(){return q(this,t)}}function lt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,a=t[n],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,n);return t}function ut(t){return B(t,ct),t}R.ns={prefix:Z,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Z.hasOwnProperty(n)?{space:Z[n],local:t}:t}},G.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=R.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(K(e,t[e]));return this}return this.each(K(t,e))},G.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=J(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!$(t[i]).test(e))return!1;return!0}for(e in t)this.each(tt(e,t[e]));return this}return this.each(tt(t,e))},G.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(nt(n,t[n],e));return this}if(r<2){r=this.node();return N(r).getComputedStyle(r,null).getPropertyValue(t)}n=""}return this.each(nt(t,e,n))},G.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},G.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},G.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},G.append=function(t){return t=it(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},G.insert=function(t,e){return t=it(t),e=Y(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},G.remove=function(){return this.each(at)},G.data=function(t,p){var e,n,r=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(e=this[0]).length);++r<i;)(n=e[r])&&(t[r]=n.__data__);return t}function a(t,e){var n,r,i=t.length,a=e.length,o=Math.min(i,a),s=new Array(a),l=new Array(a),u=new Array(i);if(p){for(var c,f=new v,h=new Array(i),d=-1;++d<i;)(n=t[d])&&(f.has(c=p.call(n,n.__data__,d))?u[d]=n:f.set(c,n),h[d]=c);for(d=-1;++d<a;)(n=f.get(c=p.call(e,r=e[d],d)))?!0!==n&&((s[d]=n).__data__=r):l[d]=ot(r),f.set(c,!0);for(d=-1;++d<i;)d in h&&!0!==f.get(h[d])&&(u[d]=t[d])}else{for(d=-1;++d<o;)n=t[d],r=e[d],n?(n.__data__=r,s[d]=n):l[d]=ot(r);for(;d<a;++d)l[d]=ot(e[d]);for(;d<i;++d)u[d]=t[d]}l.update=s,l.parentNode=s.parentNode=u.parentNode=t.parentNode,g.push(l),y.push(s),m.push(u)}var g=ut([]),y=U([]),m=U([]);if("function"==typeof t)for(;++r<i;)a(e=this[r],t.call(e,e.parentNode.__data__,r));else for(;++r<i;)a(e=this[r],t);return y.enter=function(){return g},y.exit=function(){return m},y},G.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},G.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=st(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return U(i)},G.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];0<=--i;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},G.sort=function(t){t=function(n){arguments.length||(n=l);return function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},G.each=function(r){return lt(this,function(t,e,n){r.call(t,t.__data__,e,n)})},G.call=function(t){var e=h(arguments);return t.apply(e[0]=this,e),this},G.empty=function(){return!this.node()},G.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},G.size=function(){var t=0;return lt(this,function(){++t}),t};var ct=[];function ft(i,e,n){var r="__on"+i,t=i.indexOf("."),a=dt;0<t&&(i=i.slice(0,t));var o=ht.get(i);function s(){var t=this[r];t&&(this.removeEventListener(i,t,t.$),delete this[r])}return o&&(i=o,a=pt),t?e?function(){var t=a(e,h(arguments));s.call(this),this.addEventListener(i,this[r]=t,t.$=n),t._=e}:s:e?E:function(){var t,e,n,r=new RegExp("^__on([^.]+)"+R.requote(i)+"$");for(e in this)(t=e.match(r))&&(n=this[e],this.removeEventListener(t[1],n,n.$),delete this[e])}}R.selection.enter=ut,(R.selection.enter.prototype=ct).append=G.append,ct.empty=G.empty,ct.node=G.node,ct.call=G.call,ct.size=G.size,ct.select=function(t){for(var e,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(a=i[u])?(e.push(r[u]=n=t.call(i.parentNode,a.__data__,u,s)),n.__data__=a.__data__):e.push(null)}return U(o)},ct.insert=function(t,e){var o,s,l;return arguments.length<2&&(o=this,e=function(t,e,n){var r,i=o[n].update,a=i.length;for(n!=l&&(l=n,s=0),s<=e&&(s=e+1);!(r=i[s])&&++s<a;);return r}),G.insert.call(this,t,e)},R.select=function(t){var e;return"string"==typeof t?(e=[V(t,j)]).parentNode=j.documentElement:(e=[t]).parentNode=s(t),U([e])},R.selectAll=function(t){var e;return"string"==typeof t?(e=h(H(t,j))).parentNode=j.documentElement:(e=h(t)).parentNode=null,U([e])},G.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(ft(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(ft(t,e,n))};var ht=R.map({mouseenter:"mouseover",mouseleave:"mouseout"});function dt(n,r){return function(t){var e=R.event;R.event=t,r[0]=this.__data__;try{n.apply(this,r)}finally{R.event=e}}}function pt(t,e){var n=dt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}j&&ht.forEach(function(t){"on"+t in j&&ht.remove(t)});var gt,yt=0;function mt(t){var n,r,i=".dragsuppress-"+ ++yt,a="click"+i,o=R.select(N(t)).on("touchmove"+i,D).on("dragstart"+i,D).on("selectstart"+i,D);return null==gt&&(gt=!("onselectstart"in t)&&A(t.style,"userSelect")),gt&&(n=s(t).style,r=n[gt],n[gt]="none"),function(t){var e;o.on(i,null),gt&&(n[gt]=r),t&&(e=function(){o.on(a,null)},o.on(a,function(){D(),e()},!0),setTimeout(e,0))}}R.mouse=function(t){return bt(t,z())};var vt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function bt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r,i=n.createSVGPoint();return vt<0&&(((r=N(t)).scrollX||r.scrollY)&&(r=(n=R.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),vt=!(r.f||r.e),n.remove())),vt?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function xt(){return R.event.changedTouches[0].identifier}R.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=z().changedTouches),e)for(var r,i=0,a=e.length;i<a;++i)if((r=e[i]).identifier===n)return bt(t,r)},R.behavior.drag=function(){var g=I(n,"drag","dragstart","dragend"),y=null,t=r(E,R.mouse,N,"mousemove","mouseup"),e=r(xt,R.touch,C,"touchmove","touchend");function n(){this.on("mousedown.drag",t).on("touchstart.drag",e)}function r(c,f,h,d,p){return function(){var r,t=R.event.target.correspondingElement||R.event.target,i=this.parentNode,a=g.of(this,arguments),o=0,s=c(),e=".drag"+(null==s?"":"-"+s),n=R.select(h(t)).on(d+e,function(){var t,e,n=f(i,s);if(!n)return;t=n[0]-u[0],e=n[1]-u[1],o|=t|e,a({type:"drag",x:(u=n)[0]+r[0],y:n[1]+r[1],dx:t,dy:e})}).on(p+e,function(){if(!f(i,s))return;n.on(d+e,null).on(p+e,null),l(o),a({type:"dragend"})}),l=mt(t),u=f(i,s);r=y?[(r=y.apply(this,arguments)).x-u[0],r.y-u[1]]:[0,0],a({type:"dragstart"})}}return n.origin=function(t){return arguments.length?(y=t,n):y},R.rebind(n,g,"on")},R.touches=function(n,t){return arguments.length<2&&(t=z().touches),t?h(t).map(function(t){var e=bt(n,t);return e.identifier=t.identifier,e}):[]};var _t=1e-6,wt=_t*_t,kt=Math.PI,Mt=2*kt,Tt=Mt-_t,At=kt/2,St=kt/180,Et=180/kt;function Ot(t){return 0<t?1:t<0?-1:0}function Ct(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Pt(t){return 1<t?0:t<-1?kt:Math.acos(t)}function Lt(t){return 1<t?At:t<-1?-At:Math.asin(t)}function Rt(t){return((t=Math.exp(t))+1/t)/2}function jt(t){return(t=Math.sin(t/2))*t}var Nt=Math.SQRT2;R.interpolateZoom=function(t,e){var r,i,a,n,o=t[0],s=t[1],l=t[2],u=e[0],t=e[1],e=e[2],c=u-o,f=t-s,u=c*c+f*f;return(n=u<wt?(a=Math.log(e/l)/Nt,function(t){return[o+t*c,s+t*f,l*Math.exp(Nt*t*a)]}):(r=Math.sqrt(u),t=(e*e-l*l+4*u)/(2*l*2*r),n=(e*e-l*l-4*u)/(2*e*2*r),i=Math.log(Math.sqrt(t*t+1)-t),a=(Math.log(Math.sqrt(n*n+1)-n)-i)/Nt,function(t){var e=t*a,n=Rt(i),t=l/(2*r)*(n*(t=Nt*e+i,((t=Math.exp(2*t))-1)/(t+1))-(t=i,((t=Math.exp(t))-1/t)/2));return[o+t*c,s+t*f,l*n/Rt(Nt*e+i)]})).duration=1e3*a,n},R.behavior.zoom=function(){var e,s,n,r,v,i,a,o,l,b={x:0,y:0,k:1},u=[960,500],c=It,f=250,h=0,x="mousedown.zoom",d="mousemove.zoom",p="mouseup.zoom",_="touchstart.zoom",w=I(g,"zoomstart","zoom","zoomend");function g(t){t.on(x,C).on(zt+".zoom",m).on("dblclick.zoom",L).on(_,P)}function k(t){return[(t[0]-b.x)/b.k,(t[1]-b.y)/b.k]}function M(t){b.k=Math.max(c[0],Math.min(c[1],t))}function T(t,e){var n;e=[(n=e)[0]*b.k+b.x,n[1]*b.k+b.y],b.x+=t[0]-e[0],b.y+=t[1]-e[1]}function A(t,e,n,r){t.__chart__={x:b.x,y:b.y,k:b.k},M(Math.pow(2,r)),T(s=e,n),t=R.select(t),0<f&&(t=t.transition().duration(f)),t.call(g.event)}function y(){a&&a.domain(i.range().map(function(t){return(t-b.x)/b.k}).map(i.invert)),l&&l.domain(o.range().map(function(t){return(t-b.y)/b.k}).map(o.invert))}function S(t){h++||t({type:"zoomstart"})}function E(t){y(),t({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function O(t){--h||(t({type:"zoomend"}),s=null)}function C(){var t=this,e=w.of(t,arguments),n=0,r=R.select(N(t)).on(d,function(){n=1,T(R.mouse(t),i),E(e)}).on(p,function(){r.on(d,null).on(p,null),a(n),O(e)}),i=k(R.mouse(t)),a=mt(t);Ts.call(t),S(e)}function P(){var l,u=this,c=w.of(u,arguments),f={},h=0,i=".zoom-"+R.event.changedTouches[0].identifier,o="touchmove"+i,s="touchend"+i,d=[],a=R.select(u),p=mt(u);function g(){var t=R.touches(u);return l=b.k,t.forEach(function(t){t.identifier in f&&(f[t.identifier]=k(t))}),t}function t(){var t=R.event.target;R.select(t).on(o,y).on(s,m),d.push(t);for(var e=R.event.changedTouches,n=0,r=e.length;n<r;++n)f[e[n].identifier]=null;var i,a=g(),t=Date.now();1===a.length?(t-v<500&&(i=a[0],A(u,i,f[i.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1),D()),v=t):1<a.length&&(i=a[0],t=a[1],a=i[0]-t[0],t=i[1]-t[1],h=a*a+t*t)}function y(){var t,e,n=R.touches(u);Ts.call(u);for(var r,i,a,o=0,s=n.length;o<s;++o,e=null)if(t=n[o],e=f[t.identifier]){if(a)break;i=t,a=e}e&&(r=(r=t[0]-i[0])*r+(r=t[1]-i[1])*r,r=h&&Math.sqrt(r/h),i=[(i[0]+t[0])/2,(i[1]+t[1])/2],a=[(a[0]+e[0])/2,(a[1]+e[1])/2],M(r*l)),v=null,T(i,a),E(c)}function m(){if(R.event.touches.length){for(var t,e=R.event.changedTouches,n=0,r=e.length;n<r;++n)delete f[e[n].identifier];for(t in f)return void g()}R.selectAll(d).on(i,null),a.on(x,C).on(_,P),p(),O(c)}t(),S(c),a.on(x,null).on(_,t)}function m(){var t=w.of(this,arguments);r?clearTimeout(r):(Ts.call(this),e=k(s=n||R.mouse(this)),S(t)),r=setTimeout(function(){r=null,O(t)},50),D(),M(Math.pow(2,.002*Dt())*b.k),T(s,e),E(t)}function L(){var t=R.mouse(this),e=Math.log(b.k)/Math.LN2;A(this,t,k(t),R.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return zt=zt||("onwheel"in j?(Dt=function(){return-R.event.deltaY*(R.event.deltaMode?120:1)},"wheel"):"onmousewheel"in j?(Dt=function(){return R.event.wheelDelta},"mousewheel"):(Dt=function(){return-R.event.detail},"MozMousePixelScroll")),g.event=function(t){t.each(function(){var o=w.of(this,arguments),e=b;Es?R.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1},S(o)}).tween("zoom:zoom",function(){var n=u[0],t=u[1],r=s?s[0]:n/2,i=s?s[1]:t/2,a=R.interpolateZoom([(r-b.x)/b.k,(i-b.y)/b.k,n/b.k],[(r-e.x)/e.k,(i-e.y)/e.k,n/e.k]);return function(t){var e=a(t),t=n/e[2];this.__chart__=b={x:r-e[0]*t,y:i-e[1]*t,k:t},E(o)}}).each("interrupt.zoom",function(){O(o)}).each("end.zoom",function(){O(o)}):(this.__chart__=b,S(o),E(o),O(o))})},g.translate=function(t){return arguments.length?(b={x:+t[0],y:+t[1],k:b.k},y(),g):[b.x,b.y]},g.scale=function(t){return arguments.length?(b={x:b.x,y:b.y,k:null},M(+t),y(),g):b.k},g.scaleExtent=function(t){return arguments.length?(c=null==t?It:[+t[0],+t[1]],g):c},g.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],g):n},g.size=function(t){return arguments.length?(u=t&&[+t[0],+t[1]],g):u},g.duration=function(t){return arguments.length?(f=+t,g):f},g.x=function(t){return arguments.length?(i=(a=t).copy(),b={x:0,y:0,k:1},g):a},g.y=function(t){return arguments.length?(o=(l=t).copy(),b={x:0,y:0,k:1},g):l},R.rebind(g,w,"on")};var Dt,zt,It=[0,1/0];function Ft(){}function Bt(t,e,n){return this instanceof Bt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Bt?new Bt(t.h,t.s,t.l):ie(""+t,ae,Bt):new Bt(t,e,n)}function Ut(t,e,n){var r,i;function a(t){return Math.round(255*(360<(t=t)?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:1<e?1:e,r=2*(n=n<0?0:1<n?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new te(a(t+120),a(t),a(t-120))}function Vt(t,e,n){return this instanceof Vt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Vt?new Vt(t.h,t.c,t.l):Kt((t instanceof qt?t:t=oe((t=R.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Vt(t,e,n)}function Ht(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new qt(n,Math.cos(t*=St)*e,Math.sin(t)*e)}function qt(t,e,n){return this instanceof qt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof qt?new qt(t.l,t.a,t.b):t instanceof Vt?Ht(t.h,t.c,t.l):oe((t=te(t)).r,t.g,t.b):new qt(t,e,n)}(R.color=Ft).prototype.toString=function(){return this.rgb()+""},(e=(R.hsl=Bt).prototype=new Ft).brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Bt(this.h,this.s,this.l/t)},e.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Bt(this.h,this.s,t*this.l)},e.rgb=function(){return Ut(this.h,this.s,this.l)},(a=(R.hcl=Vt).prototype=new Ft).brighter=function(t){return new Vt(this.h,this.c,Math.min(100,this.l+Gt*(arguments.length?t:1)))},a.darker=function(t){return new Vt(this.h,this.c,Math.max(0,this.l-Gt*(arguments.length?t:1)))},a.rgb=function(){return Ht(this.h,this.c,this.l).rgb()},R.lab=qt;var Gt=18,Yt=.95047,Xt=1,Wt=1.08883;function Zt(t,e,n){t=(t+16)/116,e=t+e/500,n=t-n/200;return new te(Jt(3.2404542*(e=Qt(e)*Yt)-1.5371385*(t=Qt(t)*Xt)-.4985314*(n=Qt(n)*Wt)),Jt(-.969266*e+1.8760108*t+.041556*n),Jt(.0556434*e-.2040259*t+1.0572252*n))}function Kt(t,e,n){return 0<t?new Vt(Math.atan2(n,e)*Et,Math.sqrt(e*e+n*n),t):new Vt(NaN,NaN,t)}function Qt(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function $t(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function Jt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function te(t,e,n){return this instanceof te?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof te?new te(t.r,t.g,t.b):ie(""+t,te,Ut):new te(t,e,n)}function ee(t){return new te(t>>16,t>>8&255,255&t)}function ne(t){return ee(t)+""}function re(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ie(t,e,n){var r,i=0,a=0,o=0,s=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase());if(s)switch(r=s[2].split(","),s[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(le(r[0]),le(r[1]),le(r[2]))}return(s=ue.get(t))?e(s.r,s.g,s.b):(null==t||"#"!==t.charAt(0)||isNaN(s=parseInt(t.slice(1),16))||(4===t.length?(i=(3840&s)>>4,i|=i>>4,a=240&s,a|=a>>4,o=15&s,o|=o<<4):7===t.length&&(i=(16711680&s)>>16,a=(65280&s)>>8,o=255&s)),e(i,a,o))}function ae(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=0<l&&l<1?0:r),new Bt(r,i,l)}function oe(t,e,n){var r=$t((.4124564*(t=se(t))+.3575761*(e=se(e))+.1804375*(n=se(n)))/Yt),i=$t((.2126729*t+.7151522*e+.072175*n)/Xt);return qt(116*i-16,500*(r-i),200*(i-$t((.0193339*t+.119192*e+.9503041*n)/Wt)))}function se(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function le(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}(f=qt.prototype=new Ft).brighter=function(t){return new qt(Math.min(100,this.l+Gt*(arguments.length?t:1)),this.a,this.b)},f.darker=function(t){return new qt(Math.max(0,this.l-Gt*(arguments.length?t:1)),this.a,this.b)},f.rgb=function(){return Zt(this.l,this.a,this.b)},(e=(R.rgb=te).prototype=new Ft).brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b;return e||n||r?(e&&e<30&&(e=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new te(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new te(30,30,30)},e.darker=function(t){return new te((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},e.hsl=function(){return ae(this.r,this.g,this.b)},e.toString=function(){return"#"+re(this.r)+re(this.g)+re(this.b)};var ue=R.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ce(t){return"function"==typeof t?t:function(){return t}}function fe(r){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),he(t,e,r,n)}}function he(i,a,o,t){var n,s={},l=R.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,f=null;function e(){var t,e,n,r=c.status;if(!r&&((n=(e=c).responseType)&&"text"!==n?e.response:e.responseText)||200<=r&&r<300||304===r){try{t=o.call(s,c)}catch(t){return void l.error.call(s,t)}l.load.call(s,t)}else l.error.call(s,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(i)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=e:c.onreadystatechange=function(){3<c.readyState&&e()},c.onprogress=function(t){var e=R.event;R.event=t;try{l.progress.call(s,c)}finally{R.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(a=null==t?null:t+"",s):a},s.responseType=function(t){return arguments.length?(f=t,s):f},s.response=function(t){return o=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(h(arguments)))}}),s.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),c.open(t,i,!0),null==a||"accept"in u||(u.accept=a+",*/*"),c.setRequestHeader)for(var r in u)c.setRequestHeader(r,u[r]);return null!=a&&c.overrideMimeType&&c.overrideMimeType(a),null!=f&&(c.responseType=f),null!=n&&s.on("error",n).on("load",function(t){n(null,t)}),l.beforesend.call(s,c),c.send(null==e?null:e),s},s.abort=function(){return c.abort(),s},R.rebind(s,l,"on"),null==t?s:s.get(1===(n=t).length?function(t,e){n(null==t?e:null)}:n)}ue.forEach(function(t,e){ue.set(t,ee(e))}),R.functor=ce,R.xhr=fe(C),R.dsv=function(i,a){var e=new RegExp('["'+i+"\n]"),h=i.charCodeAt(0);function o(t,e,n){arguments.length<3&&(n=e,e=null);var r=he(t,a,null==e?s:l(e),n);return r.row=function(t){return arguments.length?r.response(null==(e=t)?s:l(t)):e},r}function s(t){return o.parse(t.responseText)}function l(e){return function(t){return o.parse(t.responseText,e)}}function n(t){return t.map(u).join(i)}function u(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return o.parse=function(t,r){var i;return o.parseRows(t,function(t,e){if(i)return i(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=r?function(t,e){return r(n(t),e)}:n})},o.parseRows=function(i,t){var e,a,o={},s={},n=[],l=i.length,u=0,r=0;function c(){if(l<=u)return s;if(a)return a=!1,o;var t=u;if(34===i.charCodeAt(t)){for(var e=t;e++<l;)if(34===i.charCodeAt(e)){if(34!==i.charCodeAt(e+1))break;++e}return u=e+2,13===(n=i.charCodeAt(e+1))?(a=!0,10===i.charCodeAt(e+2)&&++u):10===n&&(a=!0),i.slice(t+1,e).replace(/""/g,'"')}for(;u<l;){var n,r=1;if(10===(n=i.charCodeAt(u++)))a=!0;else if(13===n)a=!0,10===i.charCodeAt(u)&&(++u,++r);else if(n!==h)continue;return i.slice(t,u-r)}return i.slice(t)}for(;(e=c())!==s;){for(var f=[];e!==o&&e!==s;)f.push(e),e=c();t&&null==(f=t(f,r++))||n.push(f)}return n},o.format=function(t){if(Array.isArray(t[0]))return o.formatRows(t);var n=new T,r=[];return t.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(u).join(i)].concat(t.map(function(e){return r.map(function(t){return u(e[t])}).join(i)})).join("\n")},o.formatRows=function(t){return t.map(n).join("\n")},o},R.csv=R.dsv(",","text/csv"),R.tsv=R.dsv("\t","text/tab-separated-values");var de,pe,ge,ye,me=this[A(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ve(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());r={c:t,t:n+e,n:null};return pe?pe.n=r:de=r,pe=r,ge||(ye=clearTimeout(ye),ge=1,me(be)),r}function be(){var t=xe(),t=_e()-t;24<t?(isFinite(t)&&(clearTimeout(ye),ye=setTimeout(be,t)),ge=0):(ge=1,me(be))}function xe(){for(var t=Date.now(),e=de;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function _e(){for(var t,e=de,n=1/0;e;)e=e.c?(e.t<n&&(n=e.t),(t=e).n):t?t.n=e.n:de=e.n;return pe=t,n}function we(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}R.timer=function(){ve.apply(this,arguments)},R.timer.flush=function(){xe(),_e()},R.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ke=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*P(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});R.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=R.round(t,we(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ke[8+n/3]};var Me=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Te=R.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=R.round(t,we(t,e))).toFixed(Math.max(0,Math.min(20,we(t*(1+1e-15),e))))}});function Ae(t){return t+""}var Se=R.time={},Ee=Date;function Oe(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Oe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ce.setUTCDate.apply(this._,arguments)},setDay:function(){Ce.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ce.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ce.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ce.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ce.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ce.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ce.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ce.setTime.apply(this._,arguments)}};var Ce=Date.prototype;function Pe(r,a,o){function t(t){var e=r(t),n=i(e,1);return t-e<n-t?e:n}function s(t){return a(t=r(new Ee(t-1)),1),t}function i(t,e){return a(t=new Ee(+t),e),t}function l(t,e,n){var r=s(t),i=[];if(1<n)for(;r<e;)o(r)%n||i.push(new Date(+r)),a(r,1);else for(;r<e;)i.push(new Date(+r)),a(r,1);return i}(r.floor=r).round=t,r.ceil=s,r.offset=i,r.range=l;var e=r.utc=Le(r);return(e.floor=e).round=Le(t),e.ceil=Le(s),e.offset=Le(i),e.range=function(t,e,n){try{var r=new(Ee=Oe);return r._=t,l(r,e,n)}finally{Ee=Date}},r}function Le(r){return function(t,e){try{var n=new(Ee=Oe);return n._=t,r(n,e)._}finally{Ee=Date}}}function Re(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths;function u(s){var l=s.length;function t(t){for(var e,n,r,i=[],a=-1,o=0;++a<l;)37===s.charCodeAt(a)&&(i.push(s.slice(o,a)),null!=(n=je[e=s.charAt(++a)])&&(e=s.charAt(++a)),(r=x[e])&&(e=r(t,null==n?"e"===e?" ":"0":n)),i.push(e),o=a+1);return i.push(s.slice(o,a)),i.join("")}return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(e,s,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&Ee!==Oe,t=new(n?Oe:Ee);return"j"in e?t.setFullYear(e.y,0,e.j):"W"in e||"U"in e?("w"in e||(e.w="W"in e?1:0),t.setFullYear(e.y,0,1),t.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(t.getDay()+5)%7:e.w+7*e.U-(t.getDay()+6)%7)):t.setFullYear(e.y,e.m,e.d),t.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),n?t._:t},t.toString=function(){return s},t}function c(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(i=e.charCodeAt(o++))){if(a=e.charAt(o++),!(a=_[a in je?e.charAt(o++):a])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}u.multi=(u.utc=function(t){var n=u(t);function e(t){try{var e=new(Ee=Oe);return e._=t,n(e)}finally{Ee=Date}}return e.parse=function(t){try{Ee=Oe;var e=n.parse(t);return e&&e._}finally{Ee=Date}},e.toString=n.toString,e}).multi=en;var f=R.map(),h=Ie(a),d=Fe(a),p=Ie(o),g=Fe(o),y=Ie(s),m=Fe(s),v=Ie(l),b=Fe(l);i.forEach(function(t,e){f.set(t.toLowerCase(),e)});var x={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:u(e),d:function(t,e){return ze(t.getDate(),e,2)},e:function(t,e){return ze(t.getDate(),e,2)},H:function(t,e){return ze(t.getHours(),e,2)},I:function(t,e){return ze(t.getHours()%12||12,e,2)},j:function(t,e){return ze(1+Se.dayOfYear(t),e,3)},L:function(t,e){return ze(t.getMilliseconds(),e,3)},m:function(t,e){return ze(t.getMonth()+1,e,2)},M:function(t,e){return ze(t.getMinutes(),e,2)},p:function(t){return i[+(12<=t.getHours())]},S:function(t,e){return ze(t.getSeconds(),e,2)},U:function(t,e){return ze(Se.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return ze(Se.mondayOfYear(t),e,2)},x:u(n),X:u(r),y:function(t,e){return ze(t.getFullYear()%100,e,2)},Y:function(t,e){return ze(t.getFullYear()%1e4,e,4)},Z:Je,"%":function(){return"%"}},_={a:function(t,e,n){p.lastIndex=0;e=p.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){h.lastIndex=0;e=h.exec(e.slice(n));return e?(t.w=d.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){v.lastIndex=0;e=v.exec(e.slice(n));return e?(t.m=b.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){y.lastIndex=0;e=y.exec(e.slice(n));return e?(t.m=m.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return c(t,x.c.toString(),e,n)},d:Xe,e:Xe,H:Ze,I:Ze,j:We,L:$e,m:Ye,M:Ke,p:function(t,e,n){e=f.get(e.slice(n,n+=2).toLowerCase());return null==e?-1:(t.p=e,n)},S:Qe,U:Ue,w:Be,W:Ve,x:function(t,e,n){return c(t,x.x.toString(),e,n)},X:function(t,e,n){return c(t,x.X.toString(),e,n)},y:qe,Y:He,Z:Ge,"%":tn};return u}Se.year=Pe(function(t){return(t=Se.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Se.years=Se.year.range,Se.years.utc=Se.year.utc.range,Se.day=Pe(function(t){var e=new Ee(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Se.days=Se.day.range,Se.days.utc=Se.day.utc.range,Se.dayOfYear=function(t){var e=Se.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=Se[t]=Pe(function(t){return(t=Se.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=Se.year(t).getDay();return Math.floor((Se.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});Se[t+"s"]=e.range,Se[t+"s"].utc=e.utc.range,Se[t+"OfYear"]=function(t){var e=Se.year(t).getDay();return Math.floor((Se.dayOfYear(t)+(e+n)%7)/7)}}),Se.week=Se.sunday,Se.weeks=Se.sunday.range,Se.weeks.utc=Se.sunday.utc.range,Se.weekOfYear=Se.sundayOfYear;var je={"-":"",_:" ",0:"0"},Ne=/^\s*\d+/,De=/^%/;function ze(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<n?new Array(n-t+1).join(e)+i:i)}function Ie(t){return new RegExp("^(?:"+t.map(R.requote).join("|")+")","i")}function Fe(t){for(var e=new v,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Be(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function Ue(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n));return e?(t.U=+e[0],n+e[0].length):-1}function Ve(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n));return e?(t.W=+e[0],n+e[0].length):-1}function He(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function qe(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+2));return e?(t.y=(t=+e[0])+(68<t?1900:2e3),n+e[0].length):-1}function Ge(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ye(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function Xe(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function We(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+3));return e?(t.j=+e[0],n+e[0].length):-1}function Ze(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function Ke(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function Qe(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function $e(t,e,n){Ne.lastIndex=0;e=Ne.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function Je(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",t=P(e)/60|0,e=P(e)%60;return n+ze(t,"0",2)+ze(e,"0",2)}function tn(t,e,n){De.lastIndex=0;e=De.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function en(r){for(var t=r.length,e=-1;++e<t;)r[e][0]=this(r[e][0]);return function(t){for(var e=0,n=r[e];!n[1](t);)n=r[++e];return n[0](t)}}function nn(){}R.locale=function(t){return{numberFormat:(_=(e=t).decimal,s=e.thousands,l=e.grouping,n=e.currency,w=l&&s?function(t,e){for(var n=t.length,r=[],i=0,a=l[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),r.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=l[i=(i+1)%l.length];return r.reverse().join(s)}:C,function(t){var t=Me.exec(t),s=t[1]||" ",l=t[2]||">",u=t[3]||"-",e=t[4]||"",c=t[5],f=+t[6],h=t[7],d=t[8],p=t[9],g=1,y="",m="",v=!1,b=!0,d=d&&+d.substring(1);switch((c||"0"===s&&"="===l)&&(c=s="0",l="="),p){case"n":h=!0,p="g";break;case"%":g=100,m="%",p="f";break;case"p":g=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===e&&(y="0"+p.toLowerCase());case"c":b=!1;case"d":v=!0,d=0;break;case"s":g=-1,p="r"}"$"===e&&(y=n[0],m=n[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d)))),p=Te.get(p)||Ae;var x=c&&h;return function(t){var e=m;if(v&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===u?"":u;g<0?(t=(i=R.formatPrefix(t,d)).scale(t),e=i.symbol+m):t*=g;var r,i,a=(t=p(t,d)).lastIndexOf(".");i=a<0?(o=b?t.lastIndexOf("e"):-1)<0?(r=t,""):(r=t.substring(0,o),t.substring(o)):(r=t.substring(0,a),_+t.substring(a+1)),!c&&h&&(r=w(r,1/0));var o=y.length+r.length+i.length+(x?0:n.length),a=o<f?new Array(o=f-o+1).join(s):"";return x&&(r=w(a+r,a.length?f-i.length:1/0)),n+=y,t=r+i,("<"===l?n+t+a:">"===l?a+n+t:"^"===l?a.substring(0,o>>=1)+n+t+a.substring(o):n+(x?t:a+t))+e}}),timeFormat:Re(t)};var e,_,s,l,n,w},a=R.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),R.format=a.numberFormat,R.geo={},nn.prototype={s:0,t:0,add:function(t){an(t,this.t,rn),an(rn.s,this.s,this),this.s?this.t+=rn.t:this.s=rn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var rn=new nn;function an(t,e,n){var r=n.s=t+e,i=r-t,r=r-i;n.t=t-r+(e-i)}function on(t,e){t&&ln.hasOwnProperty(t.type)&&ln[t.type](t,e)}R.geo.stream=function(t,e){t&&sn.hasOwnProperty(t.type)?sn[t.type](t,e):on(t,e)};var sn={Feature:function(t,e){on(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)on(n[r].geometry,e)}},ln={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){un(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)un(n[r],e,0)},Polygon:function(t,e){cn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)cn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)on(n[r],e)}};function un(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function cn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)un(t[n],e,1);e.polygonEnd()}R.geo.area=function(t){return fn=0,R.geo.stream(t,Dn),fn};var fn,hn,dn,pn,gn,yn,mn,vn,bn,xn,_n,wn,kn,Mn,Tn,An,Sn,En,On,Cn,Pn,Ln,Rn,jn,Nn=new nn,Dn={sphere:function(){fn+=4*kt},point:E,lineStart:E,lineEnd:E,polygonStart:function(){Nn.reset(),Dn.lineStart=zn},polygonEnd:function(){var t=2*Nn;fn+=t<0?4*kt+t:t,Dn.lineStart=Dn.lineEnd=Dn.point=E}};function zn(){var n,r,s,l,u;function i(t,e){e=e*St/2+kt/4;var n=(t*=St)-s,r=0<=n?1:-1,i=r*n,a=Math.cos(e),o=Math.sin(e),n=u*o,e=l*a+n*Math.cos(i),i=n*r*Math.sin(i);Nn.add(Math.atan2(i,e)),s=t,l=a,u=o}Dn.point=function(t,e){Dn.point=i,s=(n=t)*St,l=Math.cos(e=(r=e)*St/2+kt/4),u=Math.sin(e)},Dn.lineEnd=function(){i(n,r)}}function In(t){var e=t[0],n=t[1],t=Math.cos(n);return[t*Math.cos(e),t*Math.sin(e),Math.sin(n)]}function Fn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Bn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Un(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Vn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Hn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function qn(t){return[Math.atan2(t[1],t[0]),Lt(t[2])]}function Gn(t,e){return P(t[0]-e[0])<_t&&P(t[1]-e[1])<_t}function Yn(t,e){_n.push(wn=[hn=t,pn=t]),e<dn&&(dn=e),gn<e&&(gn=e)}function Xn(t,e){var n,r,i,a,o,s=In([t*St,e*St]);bn?(i=Bn(bn,s),Hn(n=Bn([i[1],-i[0],0],i)),n=qn(n),r=0<(a=t-yn)?1:-1,i=n[0]*Et*r,(a=180<P(a))^(r*yn<i&&i<r*t)?(o=n[1]*Et,gn<o&&(gn=o)):a^(r*yn<(i=(i+360)%360-180)&&i<r*t)?(o=-n[1]*Et)<dn&&(dn=o):(e<dn&&(dn=e),gn<e&&(gn=e)),a?t<yn?Jn(hn,t)>Jn(hn,pn)&&(pn=t):Jn(t,pn)>Jn(hn,pn)&&(hn=t):hn<=pn?(t<hn&&(hn=t),pn<t&&(pn=t)):yn<t?Jn(hn,t)>Jn(hn,pn)&&(pn=t):Jn(t,pn)>Jn(hn,pn)&&(hn=t)):Yn(t,e),bn=s,yn=t}function Wn(){kn.point=Xn}function Zn(){wn[0]=hn,wn[1]=pn,kn.point=Yn,bn=null}function Kn(t,e){var n;bn?xn+=180<P(n=t-yn)?n+(0<n?360:-360):n:(mn=t,vn=e),Dn.point(t,e),Xn(t,e)}function Qn(){Dn.lineStart()}function $n(){Kn(mn,vn),Dn.lineEnd(),P(xn)>_t&&(hn=-(pn=180)),wn[0]=hn,wn[1]=pn,bn=null}function Jn(t,e){return(e-=t)<0?e+360:e}function tr(t,e){return t[0]-e[0]}function er(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}R.geo.bounds=(kn={point:Yn,lineStart:Wn,lineEnd:Zn,polygonStart:function(){kn.point=Kn,kn.lineStart=Qn,kn.lineEnd=$n,xn=0,Dn.polygonStart()},polygonEnd:function(){Dn.polygonEnd(),kn.point=Yn,kn.lineStart=Wn,kn.lineEnd=Zn,Nn<0?(hn=-(pn=180),dn=-(gn=90)):_t<xn?gn=90:xn<-_t&&(dn=-90),wn[0]=hn,wn[1]=pn}},function(t){if(gn=pn=-(hn=dn=1/0),_n=[],R.geo.stream(t,kn),i=_n.length){_n.sort(tr);for(var e=1,n=[s=_n[0]];e<i;++e)er((a=_n[e])[0],s)||er(a[1],s)?(Jn(s[0],a[1])>Jn(s[0],s[1])&&(s[1]=a[1]),Jn(a[0],s[1])>Jn(s[0],s[1])&&(s[0]=a[0])):n.push(s=a);for(var r,i,a,o=-1/0,e=0,s=n[i=n.length-1];e<=i;s=a,++e)a=n[e],(r=Jn(s[1],a[0]))>o&&(o=r,hn=a[0],pn=s[1])}return _n=wn=null,hn===1/0||dn===1/0?[[NaN,NaN],[NaN,NaN]]:[[hn,dn],[pn,gn]]}),R.geo.centroid=function(t){Mn=Tn=An=Sn=En=On=Cn=Pn=Ln=Rn=jn=0,R.geo.stream(t,nr);var e=Ln,n=Rn,r=jn,t=e*e+n*n+r*r;return t<wt&&(e=On,n=Cn,r=Pn,Tn<_t&&(e=An,n=Sn,r=En),(t=e*e+n*n+r*r)<wt)?[NaN,NaN]:[Math.atan2(n,e)*Et,Lt(r/Math.sqrt(t))*Et]};var nr={sphere:E,point:rr,lineStart:ar,lineEnd:or,polygonStart:function(){nr.lineStart=sr},polygonEnd:function(){nr.lineStart=ar}};function rr(t,e){t*=St;var n=Math.cos(e*=St);ir(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ir(t,e,n){An+=(t-An)/++Mn,Sn+=(e-Sn)/Mn,En+=(n-En)/Mn}function ar(){var i,a,o;function r(t,e){t*=St;var n=Math.cos(e*=St),r=n*Math.cos(t),n=n*Math.sin(t),t=Math.sin(e),e=Math.atan2(Math.sqrt((e=a*t-o*n)*e+(e=o*r-i*t)*e+(e=i*n-a*r)*e),i*r+a*n+o*t);Tn+=e,On+=e*(i+(i=r)),Cn+=e*(a+(a=n)),Pn+=e*(o+(o=t)),ir(i,a,o)}nr.point=function(t,e){t*=St;var n=Math.cos(e*=St);i=n*Math.cos(t),a=n*Math.sin(t),o=Math.sin(e),nr.point=r,ir(i,a,o)}}function or(){nr.point=rr}function sr(){var r,i,u,c,f;function a(t,e){t*=St;var n=Math.cos(e*=St),r=n*Math.cos(t),i=n*Math.sin(t),a=Math.sin(e),o=c*a-f*i,s=f*r-u*a,l=u*i-c*r,n=Math.sqrt(o*o+s*s+l*l),t=u*r+c*i+f*a,e=n&&-Pt(t)/n,t=Math.atan2(n,t);Ln+=e*o,Rn+=e*s,jn+=e*l,Tn+=t,On+=t*(u+(u=r)),Cn+=t*(c+(c=i)),Pn+=t*(f+(f=a)),ir(u,c,f)}nr.point=function(t,e){r=t,i=e,nr.point=a,t*=St;var n=Math.cos(e*=St);u=n*Math.cos(t),c=n*Math.sin(t),f=Math.sin(e),ir(u,c,f)},nr.lineEnd=function(){a(r,i),nr.lineEnd=or,nr.point=rr}}function lr(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t}function ur(){return!0}function cr(t,e,n,r,s){var l=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Gn(n,r)){s.lineStart();for(var i=0;i<e;++i)s.point((n=t[i])[0],n[1]);s.lineEnd()}else{var a=new hr(n,t,null,!0),o=new hr(n,null,a,!1);a.o=o,l.push(a),u.push(o),a=new hr(r,t,null,!1),o=new hr(r,null,a,!0),a.o=o,l.push(a),u.push(o)}}}),u.sort(e),fr(l),fr(u),l.length){for(var i=0,a=n,o=u.length;i<o;++i)u[i].e=a=!a;for(var c,f,h=l[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,s.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(i=0,o=c.length;i<o;++i)s.point((f=c[i])[0],f[1]);else r(d.x,d.n.x,1,s);d=d.n}else{if(p)for(i=(c=d.p.z).length-1;0<=i;--i)s.point((f=c[i])[0],f[1]);else r(d.x,d.p.x,-1,s);d=d.p}}while(c=(d=d.o).z,p=!p,!d.v);s.lineEnd()}}}function fr(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function hr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function dr(v,b,x,_){return function(r,o){var s,n=b(o),e=r.invert(_[0],_[1]),i={point:a,lineStart:l,lineEnd:u,polygonStart:function(){i.point=g,i.lineStart=y,i.lineEnd=m,s=[],c=[]},polygonEnd:function(){i.point=a,i.lineStart=l,i.lineEnd=u,s=R.merge(s);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Nn.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var f=u[0],h=f[0],d=f[1]/2+kt/4,p=Math.sin(d),g=Math.cos(d),y=1;;){y===c&&(y=0);var m=(t=u[y])[0],v=t[1]/2+kt/4,b=Math.sin(v),x=Math.cos(v),_=m-h,w=0<=_?1:-1,k=w*_,M=kt<k,v=p*b;if(Nn.add(Math.atan2(v*w*Math.sin(k),g*x+v*Math.cos(k))),a+=M?_+w*Mt:_,M^n<=h^n<=m&&(Hn(k=Bn(In(f),In(t))),Hn(w=Bn(i,k)),((w=(M^0<=_?-1:1)*Lt(w[2]))<r||r===w&&(k[0]||k[1]))&&(o+=M^0<=_?1:-1)),!y++)break;h=m,p=b,g=x,f=t}}return(a<-_t||a<_t&&Nn<-_t)^1&o}(e,c);s.length?(p||(o.polygonStart(),p=!0),cr(s,yr,t,x,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),x(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=c=null},sphere:function(){o.polygonStart(),o.lineStart(),x(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function a(t,e){var n=r(t,e);v(t=n[0],e=n[1])&&o.point(t,e)}function t(t,e){e=r(t,e);n.point(e[0],e[1])}function l(){i.point=t,n.lineStart()}function u(){i.point=a,n.lineEnd()}var c,f,h=gr(),d=b(h),p=!1;function g(t,e){f.push([t,e]);e=r(t,e);d.point(e[0],e[1])}function y(){d.lineStart(),f=[]}function m(){g(f[0][0],f[0][1]),d.lineEnd();var t,e=d.clean(),n=h.buffer(),r=n.length;if(f.pop(),c.push(f),f=null,r)if(1&e){var i,a=-1;if(0<(r=(t=n[0]).length-1)){for(p||(o.polygonStart(),p=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else 1<r&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(pr))}return i}}function pr(t){return 1<t.length}function gr(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:E,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function yr(t,e){return((t=t.x)[0]<0?t[1]-At-_t:At-t[1])-((e=e.x)[0]<0?e[1]-At-_t:At-e[1])}var mr=dr(ur,function(u){var c,f=NaN,h=NaN,d=NaN;return{lineStart:function(){u.lineStart(),c=1},point:function(t,e){var n,r,i,a,o,s=0<t?kt:-kt,l=P(t-f);P(l-kt)<_t?(u.point(f,h=0<(h+e)/2?At:-At),u.point(d,h),u.lineEnd(),u.lineStart(),u.point(s,h),u.point(t,h),c=0):d!==s&&kt<=l&&(P(f-d)<_t&&(f-=d*_t),P(t-s)<_t&&(t-=s*_t),n=f,r=h,i=t,a=e,o=Math.sin(n-i),h=P(o)>_t?Math.atan((Math.sin(r)*(l=Math.cos(a))*Math.sin(i)-Math.sin(a)*(i=Math.cos(r))*Math.sin(n))/(i*l*o)):(r+a)/2,u.point(d,h),u.lineEnd(),u.lineStart(),u.point(s,h),c=0),u.point(f=t,h=e),d=s},lineEnd:function(){u.lineEnd(),f=h=NaN},clean:function(){return 2-c}}},function(t,e,n,r){var i;null==t?(i=n*At,r.point(-kt,i),r.point(0,i),r.point(kt,i),r.point(kt,0),r.point(kt,-i),r.point(0,-i),r.point(-kt,-i),r.point(-kt,0),r.point(-kt,i)):P(t[0]-e[0])>_t?(t=t[0]<e[0]?kt:-kt,i=n*t/2,r.point(-t,i),r.point(0,i),r.point(t,i)):r.point(e[0],e[1])},[-kt,-kt/2]);function vr(i){var d=Math.cos(i),h=0<d,p=P(d)>_t;return dr(g,function(o){var s,l,u,c,f;return{lineStart:function(){c=u=!1,f=1},point:function(t,e){var n,r,i=[t,e],a=g(t,e),e=h?a?0:m(t,e):a?m(t+(t<0?kt:-kt),e):0;!s&&(c=u=a)&&o.lineStart(),a!==u&&(n=y(s,i),(Gn(s,n)||Gn(i,n))&&(i[0]+=_t,i[1]+=_t,a=g(i[0],i[1]))),a!==u?(f=0,a?(o.lineStart(),n=y(i,s),o.point(n[0],n[1])):(n=y(s,i),o.point(n[0],n[1]),o.lineEnd()),s=n):p&&s&&h^a&&(e&l||!(r=y(i,s,!0))||(f=0,h?(o.lineStart(),o.point(r[0][0],r[0][1]),o.point(r[1][0],r[1][1]),o.lineEnd()):(o.point(r[1][0],r[1][1]),o.lineEnd(),o.lineStart(),o.point(r[0][0],r[0][1])))),!a||s&&Gn(s,i)||o.point(i[0],i[1]),s=i,u=a,l=e},lineEnd:function(){u&&o.lineEnd(),s=null},clean:function(){return f|(c&&u)<<1}}},ti(i,6*St),h?[0,-i]:[-kt,i-kt]);function g(t,e){return Math.cos(t)*Math.cos(e)>d}function y(t,e,n){var r=[1,0,0],i=Bn(In(t),In(e)),a=Fn(i,i),o=i[0],s=a-o*o;if(!s)return!n&&t;var l=d*a/s,u=-d*o/s,c=Bn(r,i),f=Vn(r,l);Un(f,Vn(i,u));a=c,o=Fn(f,a),s=Fn(a,a),r=o*o-s*(Fn(f,f)-1);if(!(r<0)){l=Math.sqrt(r),i=Vn(a,(-o-l)/s);if(Un(i,f),i=qn(i),!n)return i;var h,u=t[0],c=e[0],r=t[1],n=e[1];c<u&&(h=u,u=c,c=h);t=c-u,e=P(t-kt)<_t;if(!e&&n<r&&(h=r,r=n,n=h),e||t<_t?e?0<r+n^i[1]<(P(i[0]-u)<_t?r:n):r<=i[1]&&i[1]<=n:kt<t^(u<=i[0]&&i[0]<=c)){s=Vn(a,(-o+l)/s);return Un(s,f),[i,qn(s)]}}}function m(t,e){var n=h?i:kt-i,r=0;return t<-n?r|=1:n<t&&(r|=2),e<-n?r|=4:n<e&&(r|=8),r}}function br(l,u,c,f){return function(t){var e=t.a,n=t.b,r=e.x,i=e.y,a=0,o=1,s=n.x-r,e=n.y-i,n=l-r;if(s||!(0<n)){if(n/=s,s<0){if(n<a)return;n<o&&(o=n)}else if(0<s){if(o<n)return;a<n&&(a=n)}if(n=c-r,s||!(n<0)){if(n/=s,s<0){if(o<n)return;a<n&&(a=n)}else if(0<s){if(n<a)return;n<o&&(o=n)}if(n=u-i,e||!(0<n)){if(n/=e,e<0){if(n<a)return;n<o&&(o=n)}else if(0<e){if(o<n)return;a<n&&(a=n)}if(n=f-i,e||!(n<0)){if(n/=e,e<0){if(o<n)return;a<n&&(a=n)}else if(0<e){if(n<a)return;n<o&&(o=n)}return 0<a&&(t.a={x:r+a*s,y:i+a*e}),o<1&&(t.b={x:r+o*s,y:i+o*e}),t}}}}}}var xr=1e9;function _r(x,_,w,k){return function(i){var r,c,a,o,s,l,u,f,h,d,p,g=i,t=gr(),y=br(x,_,w,k),e={point:n,lineStart:function(){e.point=b,c&&c.push(a=[]);d=!0,h=!1,u=f=NaN},lineEnd:function(){r&&(b(o,s),l&&h&&t.rejoin(),r.push(t.buffer()));e.point=n,h&&i.lineEnd()},polygonStart:function(){i=t,r=[],c=[],p=!0},polygonEnd:function(){i=g,r=R.merge(r);var t=function(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var a,o=1,s=c[i],l=s.length,u=s[0];o<l;++o)a=s[o],u[1]<=r?a[1]>r&&0<Ct(u,a,t)&&++e:a[1]<=r&&Ct(u,a,t)<0&&--e,u=a;return 0!==e}([x,k]),e=p&&t,n=r.length;(e||n)&&(i.polygonStart(),e&&(i.lineStart(),m(null,null,1,i),i.lineEnd()),n&&cr(r,T,t,m,i),i.polygonEnd()),r=c=a=null}};function m(t,e,n,r){var i=0,a=0;if(null==t||(i=M(t,n))!==(a=M(e,n))||A(t,e)<0^0<n)for(;r.point(0===i||3===i?x:w,1<i?k:_),(i=(i+n+4)%4)!==a;);else r.point(e[0],e[1])}function v(t,e){return x<=t&&t<=w&&_<=e&&e<=k}function n(t,e){v(t,e)&&i.point(t,e)}function b(t,e){var n,r=v(t=Math.max(-xr,Math.min(xr,t)),e=Math.max(-xr,Math.min(xr,e)));c&&a.push([t,e]),d?(o=t,s=e,d=!1,(l=r)&&(i.lineStart(),i.point(t,e))):r&&h?i.point(t,e):y(n={a:{x:u,y:f},b:{x:t,y:e}})?(h||(i.lineStart(),i.point(n.a.x,n.a.y)),i.point(n.b.x,n.b.y),r||i.lineEnd(),p=!1):r&&(i.lineStart(),i.point(t,e),p=!1),u=t,f=e,h=r}return e};function M(t,e){return P(t[0]-x)<_t?0<e?0:3:P(t[0]-w)<_t?0<e?2:1:P(t[1]-_)<_t?0<e?1:0:0<e?3:2}function T(t,e){return A(t.x,e.x)}function A(t,e){var n=M(t,1),r=M(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function wr(t){var e=0,n=kt/3,r=Yr(t),t=r(e,n);return t.parallels=function(t){return arguments.length?r(e=t[0]*kt/180,n=t[1]*kt/180):[e/kt*180,n/kt*180]},t}function kr(t,e){var t=Math.sin(t),n=(t+Math.sin(e))/2,r=1+t*(2*n-t),i=Math.sqrt(r)/n;function a(t,e){e=Math.sqrt(r-2*n*Math.sin(e))/n;return[e*Math.sin(t*=n),i-e*Math.cos(t)]}return a.invert=function(t,e){e=i-e;return[Math.atan2(t,e)/n,Lt((r-(t*t+e*e)*n*n)/(2*n))]},a}R.geo.clipExtent=function(){var e,n,r,i,a,o,s={stream:function(t){return a&&(a.valid=!1),(a=o(t)).valid=!0,a},extent:function(t){return arguments.length?(o=_r(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),a&&(a.valid=!1,a=null),s):[[e,n],[r,i]]}};return s.extent([[0,0],[960,500]])},(R.geo.conicEqualArea=function(){return wr(kr)}).raw=kr,R.geo.albers=function(){return R.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},R.geo.albersUsa=function(){var n,i,a,o,s=R.geo.albers(),l=R.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=R.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){n=[t,e]}};function f(t){var e=t[0],t=t[1];return n=null,i(e,t),n||(a(e,t),n)||o(e,t),n}return f.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,e=(t[1]-n[1])/e;return(.12<=e&&e<.234&&-.425<=r&&r<-.214?l:.166<=e&&e<.234&&-.214<=r&&r<-.115?u:s).invert(t)},f.stream=function(t){var n=s.stream(t),r=l.stream(t),i=u.stream(t);return{point:function(t,e){n.point(t,e),r.point(t,e),i.point(t,e)},sphere:function(){n.sphere(),r.sphere(),i.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),i.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),i.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),i.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),i.polygonEnd()}}},f.precision=function(t){return arguments.length?(s.precision(t),l.precision(t),u.precision(t),f):s.precision()},f.scale=function(t){return arguments.length?(s.scale(t),l.scale(.35*t),u.scale(t),f.translate(s.translate())):s.scale()},f.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),n=+t[0],r=+t[1];return i=s.translate(t).clipExtent([[n-.455*e,r-.238*e],[n+.455*e,r+.238*e]]).stream(c).point,a=l.translate([n-.307*e,r+.201*e]).clipExtent([[n-.425*e+_t,r+.12*e+_t],[n-.214*e-_t,r+.234*e-_t]]).stream(c).point,o=u.translate([n-.205*e,r+.212*e]).clipExtent([[n-.214*e+_t,r+.166*e+_t],[n-.115*e-_t,r+.234*e-_t]]).stream(c).point,f},f.scale(1070)};var Mr,Tr,Ar,Sr,Er,Or,Cr={point:E,lineStart:E,lineEnd:E,polygonStart:function(){Tr=0,Cr.lineStart=Pr},polygonEnd:function(){Cr.lineStart=Cr.lineEnd=Cr.point=E,Mr+=P(Tr/2)}};function Pr(){var n,r,i,a;function o(t,e){Tr+=a*t-i*e,i=t,a=e}Cr.point=function(t,e){Cr.point=o,n=i=t,r=a=e},Cr.lineEnd=function(){o(n,r)}}var Lr={point:function(t,e){t<Ar&&(Ar=t);Er<t&&(Er=t);e<Sr&&(Sr=e);Or<e&&(Or=e)},lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E};function Rr(){var n=jr(4.5),r=[],i={point:t,lineStart:function(){i.point=e},lineEnd:o,polygonStart:function(){i.lineEnd=s},polygonEnd:function(){i.lineEnd=o,i.point=t},pointRadius:function(t){return n=jr(t),i},result:function(){if(r.length){var t=r.join("");return r=[],t}}};function t(t,e){r.push("M",t,",",e,n)}function e(t,e){r.push("M",t,",",e),i.point=a}function a(t,e){r.push("L",t,",",e)}function o(){i.point=t}function s(){r.push("Z")}return i}function jr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Nr,Dr={point:zr,lineStart:Ir,lineEnd:Fr,polygonStart:function(){Dr.lineStart=Br},polygonEnd:function(){Dr.point=zr,Dr.lineStart=Ir,Dr.lineEnd=Fr}};function zr(t,e){An+=t,Sn+=e,++En}function Ir(){var i,a;function n(t,e){var n=t-i,r=e-a,r=Math.sqrt(n*n+r*r);On+=r*(i+t)/2,Cn+=r*(a+e)/2,Pn+=r,zr(i=t,a=e)}Dr.point=function(t,e){Dr.point=n,zr(i=t,a=e)}}function Fr(){Dr.point=zr}function Br(){var n,r,i,a;function o(t,e){var n=t-i,r=e-a,r=Math.sqrt(n*n+r*r);On+=r*(i+t)/2,Cn+=r*(a+e)/2,Pn+=r,Ln+=(r=a*t-i*e)*(i+t),Rn+=r*(a+e),jn+=3*r,zr(i=t,a=e)}Dr.point=function(t,e){Dr.point=o,zr(n=i=t,r=a=e)},Dr.lineEnd=function(){o(n,r)}}function Ur(n){var r=4.5,i={point:t,lineStart:function(){i.point=e},lineEnd:o,polygonStart:function(){i.lineEnd=s},polygonEnd:function(){i.lineEnd=o,i.point=t},pointRadius:function(t){return r=t,i},result:E};function t(t,e){n.moveTo(t+r,e),n.arc(t,e,r,0,Mt)}function e(t,e){n.moveTo(t,e),i.point=a}function a(t,e){n.lineTo(t,e)}function o(){i.point=t}function s(){n.closePath()}return i}function Vr(S){var E=.5,O=Math.cos(30*St),_=16;function e(t){return(_?function(r){var n,i,a,o,s,l,u,c,f,h,d,p,g={point:t,lineStart:e,lineEnd:m,polygonStart:function(){r.polygonStart(),g.lineStart=v},polygonEnd:function(){r.polygonEnd(),g.lineStart=e}};function t(t,e){t=S(t,e),r.point(t[0],t[1])}function e(){c=NaN,g.point=y,r.lineStart()}function y(t,e){var n=In([t,e]),e=S(t,e);C(c,f,u,h,d,p,c=e[0],f=e[1],u=t,h=n[0],d=n[1],p=n[2],_,r),r.point(c,f)}function m(){g.point=t,r.lineEnd()}function v(){e(),g.point=b,g.lineEnd=x}function b(t,e){y(n=t,e),i=c,a=f,o=h,s=d,l=p,g.point=y}function x(){C(c,f,u,h,d,p,i,a,n,o,s,l,_,r),g.lineEnd=m,m()}return g}:function(n){return qr(n,function(t,e){t=S(t,e),n.point(t[0],t[1])})})(t)}function C(t,e,n,r,i,a,o,s,l,u,c,f,h,d){var p,g,y,m,v,b,x,_,w,k,M=o-t,T=s-e,A=M*M+T*T;4*E<A&&h--&&(p=r+u,g=i+c,y=a+f,m=Math.sqrt(p*p+g*g+y*y),w=Math.asin(y/=m),v=P(P(y)-1)<_t||P(n-l)<_t?(n+l)/2:Math.atan2(g,p),b=(k=S(v,w))[0],x=k[1],(E<(k=T*(_=b-t)-M*(w=x-e))*k/A||.3<P((M*_+T*w)/A-.5)||r*u+i*c+a*f<O)&&(C(t,e,n,r,i,a,b,x,v,p/=m,g/=m,y,h,d),d.point(b,x),C(b,x,v,p,g,y,o,s,l,u,c,f,h,d)))}return e.precision=function(t){return arguments.length?(_=0<(E=t*t)&&16,e):Math.sqrt(E)},e}function Hr(t){this.stream=t}function qr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Gr(t){return Yr(function(){return t})()}function Yr(t){var n,e,r,i,a,o,s=Vr(function(t,e){return[(t=n(t,e))[0]*l+i,a-t[1]*l]}),l=150,u=480,c=250,f=0,h=0,d=0,p=0,g=0,y=mr,m=C,v=null,b=null;function x(t){return[(t=r(t[0]*St,t[1]*St))[0]*l+i,a-t[1]*l]}function _(t){return(t=r.invert((t[0]-i)/l,(a-t[1])/l))&&[t[0]*Et,t[1]*Et]}function w(){r=lr(e=Kr(d,p,g),n);var t=n(f,h);return i=u-t[0]*l,a=c+t[1]*l,k()}function k(){return o&&(o.valid=!1,o=null),x}return x.stream=function(t){return o&&(o.valid=!1),(o=Xr(y(e,s(m(t))))).valid=!0,o},x.clipAngle=function(t){return arguments.length?(y=null==t?(v=t,mr):vr((v=+t)*St),k()):v},x.clipExtent=function(t){return arguments.length?(m=(b=t)?_r(t[0][0],t[0][1],t[1][0],t[1][1]):C,k()):b},x.scale=function(t){return arguments.length?(l=+t,w()):l},x.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],w()):[u,c]},x.center=function(t){return arguments.length?(f=t[0]%360*St,h=t[1]%360*St,w()):[f*Et,h*Et]},x.rotate=function(t){return arguments.length?(d=t[0]%360*St,p=t[1]%360*St,g=2<t.length?t[2]%360*St:0,w()):[d*Et,p*Et,g*Et]},R.rebind(x,s,"precision"),function(){return n=t.apply(this,arguments),x.invert=n.invert&&_,w()}}function Xr(n){return qr(n,function(t,e){n.point(t*St,e*St)})}function Wr(t,e){return[t,e]}function Zr(t,e){return[kt<t?t-Mt:t<-kt?t+Mt:t,e]}function Kr(t,e,n){return t?e||n?lr($r(t),Jr(e,n)):$r(t):e||n?Jr(e,n):Zr}function Qr(n){return function(t,e){return[kt<(t+=n)?t-Mt:t<-kt?t+Mt:t,e]}}function $r(t){var e=Qr(t);return e.invert=Qr(-t),e}function Jr(t,e){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(e),s=Math.sin(e);function n(t,e){var n=Math.cos(e),r=Math.cos(t)*n,t=Math.sin(t)*n,n=Math.sin(e),e=n*i+r*a;return[Math.atan2(t*o-e*s,r*i-n*a),Lt(e*o+t*s)]}return n.invert=function(t,e){var n=Math.cos(e),r=Math.cos(t)*n,t=Math.sin(t)*n,n=Math.sin(e),e=n*o-t*s;return[Math.atan2(t*o+n*s,r*i+e*a),Lt(e*i-r*a)]},n}function ti(s,l){var u=Math.cos(s),c=Math.sin(s);return function(t,e,n,r){var i=n*l;null!=t?(t=ei(u,t),e=ei(u,e),(0<n?t<e:e<t)&&(t+=n*Mt)):(t=s+n*Mt,e=s-.5*i);for(var a,o=t;0<n?e<o:o<e;o-=i)r.point((a=qn([u,-c*Math.cos(o),-c*Math.sin(o)]))[0],a[1])}}function ei(t,e){e=In(e);e[0]-=t,Hn(e);t=Pt(-e[1]);return((-e[2]<0?-t:t)+2*Math.PI-_t)%(2*Math.PI)}function ni(t,e,n){var r=R.range(t,e-_t,n).concat(e);return function(e){return r.map(function(t){return[e,t]})}}function ri(t,e,n){var r=R.range(t,e-_t,n).concat(e);return function(e){return r.map(function(t){return[t,e]})}}function ii(t){return t.source}function ai(t){return t.target}R.geo.path=function(){var r,e,i,n,a,o=4.5;function s(t){return t&&("function"==typeof o&&n.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=i(n)),R.geo.stream(t,a)),n.result()}function l(){return a=null,s}return s.area=function(t){return Mr=0,R.geo.stream(t,i(Cr)),Mr},s.centroid=function(t){return An=Sn=En=On=Cn=Pn=Ln=Rn=jn=0,R.geo.stream(t,i(Dr)),jn?[Ln/jn,Rn/jn]:Pn?[On/Pn,Cn/Pn]:En?[An/En,Sn/En]:[NaN,NaN]},s.bounds=function(t){return Er=Or=-(Ar=Sr=1/0),R.geo.stream(t,i(Lr)),[[Ar,Sr],[Er,Or]]},s.projection=function(t){return arguments.length?(i=(r=t)?t.stream||(n=t,e=Vr(function(t,e){return n([t*Et,e*Et])}),function(t){return Xr(e(t))}):C,l()):r;var n,e},s.context=function(t){return arguments.length?(n=null==(e=t)?new Rr:new Ur(t),"function"!=typeof o&&n.pointRadius(o),l()):e},s.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(n.pointRadius(+t),+t),s):o},s.projection(R.geo.albersUsa()).context(null)},R.geo.transform=function(r){return{stream:function(t){var e,n=new Hr(t);for(e in r)n[e]=r[e];return n}}},Hr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},R.geo.projection=Gr,R.geo.projectionMutator=Yr,(R.geo.equirectangular=function(){return Gr(Wr)}).raw=Wr.invert=Wr,R.geo.rotation=function(e){function t(t){return(t=e(t[0]*St,t[1]*St))[0]*=Et,t[1]*=Et,t}return e=Kr(e[0]%360*St,e[1]*St,2<e.length?e[2]*St:0),t.invert=function(t){return(t=e.invert(t[0]*St,t[1]*St))[0]*=Et,t[1]*=Et,t},t},Zr.invert=Wr,R.geo.circle=function(){var e,i,a=[0,0],n=6;function r(){var t="function"==typeof a?a.apply(this,arguments):a,n=Kr(-t[0]*St,-t[1]*St,0).invert,r=[];return i(null,null,1,{point:function(t,e){r.push(t=n(t,e)),t[0]*=Et,t[1]*=Et}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(t){return arguments.length?(a=t,r):a},r.angle=function(t){return arguments.length?(i=ti((e=+t)*St,n*St),r):e},r.precision=function(t){return arguments.length?(i=ti(e*St,(n=+t)*St),r):n},r.angle(90)},R.geo.distance=function(t,e){var n=(e[0]-t[0])*St,r=t[1]*St,i=e[1]*St,a=Math.sin(n),t=Math.cos(n),e=Math.sin(r),n=Math.cos(r),r=Math.sin(i),i=Math.cos(i);return Math.atan2(Math.sqrt((a=i*a)*a+(a=n*r-e*i*t)*a),e*r+n*i*t)},R.geo.graticule=function(){var e,n,r,i,a,o,s,l,u,c,f,h,d=10,p=d,g=90,y=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:t()}}function t(){return R.range(Math.ceil(i/g)*g,r,g).map(f).concat(R.range(Math.ceil(l/y)*y,s,y).map(h)).concat(R.range(Math.ceil(n/d)*d,e,d).filter(function(t){return P(t%g)>_t}).map(u)).concat(R.range(Math.ceil(o/p)*p,a,p).filter(function(t){return P(t%y)>_t}).map(c))}return v.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},v.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(h(s).slice(1),f(r).reverse().slice(1),h(l).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.majorExtent(t).minorExtent(t):v.minorExtent()},v.majorExtent=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],l=+t[0][1],s=+t[1][1],r<i&&(t=i,i=r,r=t),s<l&&(t=l,l=s,s=t),v.precision(m)):[[i,l],[r,s]]},v.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],e<n&&(t=n,n=e,e=t),a<o&&(t=o,o=a,a=t),v.precision(m)):[[n,o],[e,a]]},v.step=function(t){return arguments.length?v.majorStep(t).minorStep(t):v.minorStep()},v.majorStep=function(t){return arguments.length?(g=+t[0],y=+t[1],v):[g,y]},v.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],v):[d,p]},v.precision=function(t){return arguments.length?(m=+t,u=ni(o,a,90),c=ri(n,e,m),f=ni(l,s,90),h=ri(i,r,m),v):m},v.majorExtent([[-180,-90+_t],[180,90-_t]]).minorExtent([[-180,-80-_t],[180,80+_t]])},R.geo.greatArc=function(){var e,n,r=ii,i=ai;function a(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}return a.distance=function(){return R.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},a.source=function(t){return arguments.length?(e="function"==typeof(r=t)?null:t,a):r},a.target=function(t){return arguments.length?(n="function"==typeof(i=t)?null:t,a):i},a.precision=function(){return arguments.length?a:0},a},R.geo.interpolate=function(t,e){return n=t[0]*St,r=t[1]*St,i=e[0]*St,a=e[1]*St,t=Math.cos(r),o=Math.sin(r),e=Math.cos(a),s=Math.sin(a),l=t*Math.cos(n),u=t*Math.sin(n),c=e*Math.cos(i),f=e*Math.sin(i),h=2*Math.asin(Math.sqrt(jt(a-r)+t*e*jt(i-n))),d=1/Math.sin(h),(i=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*l+e*c,t=n*u+e*f,e=n*o+e*s;return[Math.atan2(t,r)*Et,Math.atan2(e,Math.sqrt(r*r+t*t))*Et]}:function(){return[n*Et,r*Et]}).distance=h,i;var n,r,i,a,o,s,l,u,c,f,h,d},R.geo.length=function(t){return Nr=0,R.geo.stream(t,oi),Nr};var oi={sphere:E,point:E,lineStart:function(){var a,o,s;function n(t,e){var n=Math.sin(e*=St),r=Math.cos(e),i=P((t*=St)-a),e=Math.cos(i);Nr+=Math.atan2(Math.sqrt((i=r*Math.sin(i))*i+(i=s*n-o*r*e)*i),o*n+s*r*e),a=t,o=n,s=r}oi.point=function(t,e){a=t*St,o=Math.sin(e*=St),s=Math.cos(e),oi.point=n},oi.lineEnd=function(){oi.point=oi.lineEnd=E}},lineEnd:E,polygonStart:E,polygonEnd:E};function si(i,a){function t(t,e){var n=Math.cos(t),r=Math.cos(e),n=i(n*r);return[n*r*Math.sin(t),n*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),r=a(n),i=Math.sin(r),r=Math.cos(r);return[Math.atan2(t*i,n*r),Math.asin(n&&e*i/n)]},t}var li=si(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(R.geo.azimuthalEqualArea=function(){return Gr(li)}).raw=li;var ui=si(function(t){t=Math.acos(t);return t&&t/Math.sin(t)},C);function ci(t,e){function n(t){return Math.tan(kt/4+t/2)}var r=Math.cos(t),i=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(n(e)/n(t)),a=r*Math.pow(n(t),i)/i;return i?(o.invert=function(t,e){var n=a-e,e=Ot(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(a/e,1/i))-At]},o):di;function o(t,e){0<a?e<-At+_t&&(e=-At+_t):At-_t<e&&(e=At-_t);e=a/Math.pow(n(e),i);return[e*Math.sin(i*t),a-e*Math.cos(i*t)]}}function fi(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;return P(r)<_t?Wr:(a.invert=function(t,e){e=i-e;return[Math.atan2(t,e)/r,i-Ot(r)*Math.sqrt(t*t+e*e)]},a);function a(t,e){e=i-e;return[e*Math.sin(r*t),i-e*Math.cos(r*t)]}}(R.geo.azimuthalEquidistant=function(){return Gr(ui)}).raw=ui,(R.geo.conicConformal=function(){return wr(ci)}).raw=ci,(R.geo.conicEquidistant=function(){return wr(fi)}).raw=fi;var hi=si(function(t){return 1/t},Math.atan);function di(t,e){return[t,Math.log(Math.tan(kt/4+e/2))]}function pi(t){var i,a=Gr(t),o=a.scale,s=a.translate,l=a.clipExtent;return a.scale=function(){var t=o.apply(a,arguments);return t===a?i?a.clipExtent(null):a:t},a.translate=function(){var t=s.apply(a,arguments);return t===a?i?a.clipExtent(null):a:t},a.clipExtent=function(t){var e,n,r=l.apply(a,arguments);return r===a?(i=null==t)&&(e=kt*o(),n=s(),l([[n[0]-e,n[1]-e],[n[0]+e,n[1]+e]])):i&&(r=null),r},a.clipExtent(null)}(R.geo.gnomonic=function(){return Gr(hi)}).raw=hi,di.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-At]},(R.geo.mercator=function(){return pi(di)}).raw=di;var gi=si(function(){return 1},Math.asin);(R.geo.orthographic=function(){return Gr(gi)}).raw=gi;var yi=si(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function mi(t,e){return[Math.log(Math.tan(kt/4+e/2)),-t]}function vi(t){return t[0]}function bi(t){return t[1]}function xi(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;1<r&&Ct(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function _i(t,e){return t[0]-e[0]||t[1]-e[1]}(R.geo.stereographic=function(){return Gr(yi)}).raw=yi,mi.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-At]},(R.geo.transverseMercator=function(){var t=pi(mi),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=mi,R.geom={},R.geom.hull=function(t){var h=vi,d=bi;return arguments.length?e(t):(e.x=function(t){return arguments.length?(h=t,e):h},e.y=function(t){return arguments.length?(d=t,e):d},e);function e(t){if(t.length<3)return[];for(var e=ce(h),n=ce(d),r=t.length,i=[],a=[],o=0;o<r;o++)i.push([+e.call(this,t[o],o),+n.call(this,t[o],o),o]);for(i.sort(_i),o=0;o<r;o++)a.push([i[o][0],-i[o][1]]);var s=xi(i),l=xi(a),u=l[0]===s[0],c=l[l.length-1]===s[s.length-1],f=[];for(o=s.length-1;0<=o;--o)f.push(t[i[s[o]][2]]);for(o=+u;o<l.length-c;++o)f.push(t[i[l[o]][2]]);return f}},R.geom.polygon=function(t){return B(t,wi),t};var wi=R.geom.polygon.prototype=[];function ki(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Mi(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,t=t[1],n=n[1],e=e[1]-t,r=r[1]-n,s=(s*(t-n)-r*(i-a))/(r*o-s*e);return[i+s*o,t+s*e]}function Ti(t){var e=t[0],t=t[t.length-1];return!(e[0]-t[0]||e[1]-t[1])}wi.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},wi.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},wi.clip=function(t){for(var e,n,r,i,a,o,s=Ti(t),l=-1,u=this.length-Ti(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],a=e[(r=e.length-s)-1],n=-1;++n<r;)ki(o=e[n],c,i)?(ki(a,c,i)||t.push(Mi(a,o,c,i)),t.push(o)):ki(a,c,i)&&t.push(Mi(a,o,c,i)),a=o;s&&t.push(t[0]),c=i}return t};var Ai,Si,Ei,Oi,Ci,Pi=[],Li=[];function Ri(){Ki(this),this.edge=this.site=this.circle=null}function ji(t){var e=Pi.pop()||new Ri;return e.site=t,e}function Ni(t){Hi(t),Ei.remove(t),Pi.push(t),Ki(t)}function Di(t){for(var e,n,r,i,a=t.x,o=t.y,s=Ei._;s;)if(r=zi(s,o)-a,_t<r)s=s.L;else{if(i=a-function(t,e){var n=t.N;if(n)return zi(n,e);t=t.site;return t.y===e?t.x:1/0}(s,o),!(_t<i)){-_t<r?(e=s.P,n=s):-_t<i?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}var l,u,c,f,h,d,p,g,y,m,v=ji(t);if(Ei.insert(e,v),e||n){if(e===n)return Hi(e),n=ji(e.site),Ei.insert(v,n),v.edge=n.edge=Yi(e.site,v.site),Vi(e),void Vi(n);n?(Hi(e),Hi(n),u=(l=e.site).x,m=l.y,c=t.x-u,p=t.y-m,h=(f=n.site).x-u,m={x:((d=f.y-m)*(g=c*c+p*p)-p*(y=h*h+d*d))/(p=2*(c*d-p*h))+u,y:(c*y-h*g)/p+m},Xi(n.edge,l,f,m),v.edge=Yi(l,t,null,m),n.edge=Yi(t,f,null,m),Vi(e),Vi(n)):v.edge=Yi(e.site,v.site)}}function zi(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,t=l-e;if(!t)return s;o=s-r,n=1/a-1/t,e=o/t;return n?(-e+Math.sqrt(e*e-2*n*(o*o/(-2*t)-l+t/2+i-a/2)))/n+r:(r+s)/2}function Ii(t){this.site=t,this.edges=[]}function Fi(t){for(var e,n,r,i,a,o,s,l,u,c=t[0][0],f=t[1][0],h=t[0][1],d=t[1][1],p=Si,g=p.length;g--;)if((i=p[g])&&i.prepare())for(s=(o=i.edges).length,a=0;a<s;)n=(u=o[a].end()).x,r=u.y,e=(l=o[++a%s].start()).x,l=l.y,(P(n-e)>_t||P(r-l)>_t)&&(o.splice(a,0,new Wi(function(t,e,n){t=new Gi(t,null);return t.a=e,t.b=n,Ai.push(t),t}(i.site,u,P(n-c)<_t&&_t<d-r?{x:c,y:P(e-c)<_t?l:d}:P(r-d)<_t&&_t<f-n?{x:P(l-d)<_t?e:f,y:d}:P(n-f)<_t&&_t<r-h?{x:f,y:P(e-f)<_t?l:h}:P(r-h)<_t&&_t<n-c?{x:P(l-h)<_t?e:c,y:h}:null),i.site,null)),++s)}function Bi(t,e){return e.angle-t.angle}function Ui(){Ki(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vi(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,u=r.y-s,c=a.x-o,n=2*(l*(e=a.y-s)-u*c);if(!(-wt<=n)){var r=l*l+u*u,a=c*c+e*e,u=(e*r-u*a)/n,n=(l*a-c*r)/n,e=n+s,f=Li.pop()||new Ui;f.arc=t,f.site=i,f.x=u+o,f.y=e+Math.sqrt(u*u+n*n),f.cy=e,t.circle=f;for(var h=null,d=Ci._;d;)if(f.y<d.y||f.y===d.y&&f.x<=d.x){if(!d.L){h=d.P;break}d=d.L}else{if(!d.R){h=d;break}d=d.R}Ci.insert(h,f),h||(Oi=f)}}}}function Hi(t){var e=t.circle;e&&(e.P||(Oi=e.N),Ci.remove(e),Li.push(e),Ki(e),t.circle=null)}function qi(t){for(var e,n=Ai,r=br(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(function(t,e){var n=t.b;if(n)return!0;var r=t.a,i=e[0][0],a=e[1][0],o=e[0][1],s=e[1][1],l=t.l,u=t.r,c=l.x,f=l.y,h=u.x,e=u.y,l=(c+h)/2,u=(f+e)/2;if(e===f){if(l<i||a<=l)return;if(h<c){if(r){if(r.y>=s)return}else r={x:l,y:o};n={x:l,y:s}}else{if(r){if(r.y<o)return}else r={x:l,y:s};n={x:l,y:o}}}else if(l=u-(u=(c-h)/(e-f))*l,u<-1||1<u)if(h<c){if(r){if(r.y>=s)return}else r={x:(o-l)/u,y:o};n={x:(s-l)/u,y:s}}else{if(r){if(r.y<o)return}else r={x:(s-l)/u,y:s};n={x:(o-l)/u,y:o}}else if(f<e){if(r){if(r.x>=a)return}else r={x:i,y:u*i+l};n={x:a,y:u*a+l}}else{if(r){if(r.x<i)return}else r={x:a,y:u*a+l};n={x:i,y:u*i+l}}return t.a=r,t.b=n,!0})(e=n[i],t)&&r(e)&&!(P(e.a.x-e.b.x)<_t&&P(e.a.y-e.b.y)<_t)||(e.a=e.b=null,n.splice(i,1))}function Gi(t,e){this.l=t,this.r=e,this.a=this.b=null}function Yi(t,e,n,r){var i=new Gi(t,e);return Ai.push(i),n&&Xi(i,t,e,n),r&&Xi(i,e,t,r),Si[t.i].edges.push(new Wi(i,t,e)),Si[e.i].edges.push(new Wi(i,e,t)),i}function Xi(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Wi(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Zi(){this._=null}function Ki(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Qi(t,e){var n=e,r=e.R,e=n.U;e?e.L===n?e.L=r:e.R=r:t._=r,r.U=e,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function $i(t,e){var n=e,r=e.L,e=n.U;e?e.L===n?e.L=r:e.R=r:t._=r,r.U=e,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ji(t){for(;t.L;)t=t.L;return t}function ta(t,e){var n,r,i,a=t.sort(ea).pop();for(Ai=[],Si=new Array(t.length),Ei=new Zi,Ci=new Zi;;)if(i=Oi,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(Si[a.i]=new Ii(a),Di(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;!function(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];Ni(t);for(var l=a;l.circle&&P(n-l.circle.x)<_t&&P(r-l.circle.cy)<_t;)a=l.P,s.unshift(l),Ni(l),l=a;s.unshift(l),Hi(l);for(var u=o;u.circle&&P(n-u.circle.x)<_t&&P(r-u.circle.cy)<_t;)o=u.N,s.push(u),Ni(u),u=o;s.push(u),Hi(u);for(var c=s.length,f=1;f<c;++f)u=s[f],l=s[f-1],Xi(u.edge,l.site,u.site,i);l=s[0],(u=s[c-1]).edge=Yi(l.site,u.site,null,i),Vi(l),Vi(u)}(i.arc)}e&&(qi(e),Fi(e));e={cells:Si,edges:Ai};return Ei=Ci=Ai=Si=null,e}function ea(t,e){return e.y-t.y||e.x-t.x}Ii.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Bi),e.length},Wi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Zi.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=Ji(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Qi(this,n),n=(t=n).U),n.C=!1,r.C=!0,$i(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&($i(this,n),n=(t=n).U),n.C=!1,r.C=!0,Qi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r=t.U,i=t.L,a=t.R,o=i?a?Ji(a):i:a;if(r?r.L===t?r.L=o:r.R=o:this._=o,i&&a?(n=o.C,o.C=t.C,((o.L=i).U=o)!==a?(r=o.U,o.U=t.U,t=o.R,r.L=t,(o.R=a).U=o):(o.U=r,t=(r=o).R)):(n=t.C,t=o),t&&(t.U=r),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Qi(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,$i(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Qi(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,$i(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Qi(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,$i(this,r),t=this._;break}}while(e.C=!0,r=(t=r).U,!t.C);t&&(t.C=!1)}}},R.geom.voronoi=function(t){var e=vi,n=bi,r=e,i=n,u=na;return t?a(t):(a.links=function(e){return ta(c(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},a.triangles=function(h){var d=[];return ta(c(h)).cells.forEach(function(t,e){for(var n,r,i,a,o=t.site,s=t.edges.sort(Bi),l=-1,u=s.length,c=s[u-1].edge,f=c.l===o?c.r:c.l;++l<u;)n=f,f=(c=s[l].edge).l===o?c.r:c.l,e<n.i&&e<f.i&&(i=n,a=f,((r=o).x-a.x)*(i.y-r.y)-(r.x-i.x)*(a.y-r.y)<0)&&d.push([h[e],h[n.i],h[f.i]])}),d},a.x=function(t){return arguments.length?(r=ce(e=t),a):e},a.y=function(t){return arguments.length?(i=ce(n=t),a):n},a.clipExtent=function(t){return arguments.length?(u=null==t?na:t,a):u===na?null:u},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):u===na?null:u&&u[1]},a);function a(r){var i=new Array(r.length),a=u[0][0],o=u[0][1],s=u[1][0],l=u[1][1];return ta(c(r),u).cells.forEach(function(t,e){var n=t.edges,t=t.site;(i[e]=n.length?n.map(function(t){t=t.start();return[t.x,t.y]}):t.x>=a&&t.x<=s&&t.y>=o&&t.y<=l?[[a,l],[s,l],[s,o],[a,o]]:[]).point=r[e]}),i}function c(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/_t)*_t,y:Math.round(i(t,e)/_t)*_t,i:e}})}};var na=[[-1e6,-1e6],[1e6,1e6]];function ra(t){return t.x}function ia(t){return t.y}function aa(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function oa(t,e){t=R.rgb(t),e=R.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,s=e.b-i;return function(t){return"#"+re(Math.round(n+a*t))+re(Math.round(r+o*t))+re(Math.round(i+s*t))}}function sa(t,e){var n,r={},i={};for(n in t)n in e?r[n]=ha(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function la(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function ua(t,r){var e,n,i,a=ca.lastIndex=fa.lastIndex=0,o=-1,s=[],l=[];for(t+="",r+="";(e=ca.exec(t))&&(n=fa.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(e=e[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:la(e,n)})),a=fa.lastIndex;return a<r.length&&(i=r.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(r=l[0].x,function(t){return r(t)+""}):function(){return r}:(r=l.length,function(t){for(var e,n=0;n<r;++n)s[(e=l[n]).i]=e.x(t);return s.join("")})}R.geom.delaunay=function(t){return R.geom.voronoi().triangles(t)},R.geom.quadtree=function(t,v,b,x,w){var k,M=vi,T=bi;return(k=arguments.length)?(M=ra,T=ia,3===k&&(w=b,x=v,b=v=0),e(t)):(e.x=function(t){return arguments.length?(M=t,e):M},e.y=function(t){return arguments.length?(T=t,e):T},e.extent=function(t){return arguments.length?(null==t?v=b=x=w=null:(v=+t[0][0],b=+t[0][1],x=+t[1][0],w=+t[1][1]),e):null==v?null:[[v,b],[x,w]]},e.size=function(t){return arguments.length?(null==t?v=b=x=w=null:(v=b=0,x=+t[0],w=+t[1]),e):null==v?null:[x-v,w-b]},e);function e(t){var e,n,r,i,a,o,s,l,u,c=ce(M),f=ce(T);if(null!=v)o=v,s=b,l=x,u=w;else if(l=u=-(o=s=1/0),n=[],r=[],a=t.length,k)for(i=0;i<a;++i)(e=t[i]).x<o&&(o=e.x),e.y<s&&(s=e.y),e.x>l&&(l=e.x),e.y>u&&(u=e.y),n.push(e.x),r.push(e.y);else for(i=0;i<a;++i){var h=+c(e=t[i],i),d=+f(e,i);h<o&&(o=h),d<s&&(s=d),l<h&&(l=h),u<d&&(u=d),n.push(h),r.push(d)}var p=l-o,g=u-s;function y(t,e,n,r,i,a,o,s){var l,u,c;isNaN(n)||isNaN(r)||(t.leaf?(l=t.x,u=t.y,null!=l?(P(l-n)+P(u-r)<.01||(c=t.point,t.x=t.y=t.point=null,m(t,c,l,u,i,a,o,s)),m(t,e,n,r,i,a,o,s)):(t.x=n,t.y=r,t.point=e)):m(t,e,n,r,i,a,o,s))}function m(t,e,n,r,i,a,o,s){var l=.5*(i+o),u=.5*(a+s),c=l<=n,f=u<=r,h=f<<1|c;t.leaf=!1,c?i=l:o=l,f?a=u:s=u,y(t=t.nodes[h]||(t.nodes[h]=aa()),e,n,r,i,a,o,s)}g<p?u=s+p:l=o+g;var _=aa();if(_.add=function(t){y(_,t,+c(t,++i),+f(t,i),o,s,l,u)},_.visit=function(t){!function t(e,n,r,i,a,o){{var s,l;e(n,r,i,a,o)||(s=.5*(r+a),l=.5*(i+o),(n=n.nodes)[0]&&t(e,n[0],r,i,s,l),n[1]&&t(e,n[1],s,i,a,l),n[2]&&t(e,n[2],r,l,s,o),n[3]&&t(e,n[3],s,l,a,o))}}(t,_,o,s,l,u)},_.find=function(t){return e=_,d=t[0],p=t[1],x=1/0,function t(e,n,r,i,a){if(!(m<n||v<r||i<g||a<y)){var o,s;!(o=e.point)||(s=(s=d-e.x)*s+(s=p-e.y)*s)<x&&(s=Math.sqrt(x=s),g=d-s,y=p-s,m=d+s,v=p+s,b=o);for(var l=e.nodes,u=.5*(n+i),c=.5*(r+a),f=(c<=p)<<1|u<=d,h=f+4;f<h;++f)if(e=l[3&f])switch(3&f){case 0:t(e,n,r,u,c);break;case 1:t(e,u,r,i,c);break;case 2:t(e,n,c,u,a);break;case 3:t(e,u,c,i,a)}}}(e,g=o,y=s,m=l,v=u),b;var e,d,p,g,y,m,v,b,x},i=-1,null==v){for(;++i<a;)y(_,t[i],n[i],r[i],o,s,l,u);--i}else t.forEach(_.add);return n=r=t=e=null,_}},R.interpolateRgb=oa,R.interpolateObject=sa,R.interpolateNumber=la,R.interpolateString=ua;var ca=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fa=new RegExp(ca.source,"g");function ha(t,e){for(var n,r=R.interpolators.length;0<=--r&&!(n=R.interpolators[r](t,e)););return n}function da(t,e){for(var n=[],r=[],i=t.length,a=e.length,o=Math.min(t.length,e.length),s=0;s<o;++s)n.push(ha(t[s],e[s]));for(;s<i;++s)r[s]=t[s];for(;s<a;++s)r[s]=e[s];return function(t){for(s=0;s<o;++s)r[s]=n[s](t);return r}}function pa(){return C}R.interpolate=ha,R.interpolators=[function(t,e){var n=typeof e;return("string"==n?ue.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?oa:ua:e instanceof Ft?oa:Array.isArray(e)?da:"object"==n&&isNaN(e)?sa:la)(t,e)}],R.interpolateArray=da;var ga=R.map({linear:pa,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return ba},cubic:function(){return xa},sin:function(){return wa},exp:function(){return ka},circle:function(){return Ma},elastic:function(e,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/Mt*Math.asin(1/e):(e=1,n/4);return function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-r)*Mt/n)}},back:function(e){e=e||1.70158;return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return Ta}}),ya=R.map({in:C,out:ma,"in-out":va,"out-in":function(t){return va(ma(t))}});function ma(e){return function(t){return 1-e(1-t)}}function va(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function ba(t){return t*t}function xa(t){return t*t*t}function _a(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function wa(t){return 1-Math.cos(t*At)}function ka(t){return Math.pow(2,10*(t-1))}function Ma(t){return 1-Math.sqrt(1-t*t)}function Ta(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Aa(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function Sa(t){var e,n,r,i=[t.a,t.b],a=[t.c,t.d],o=Oa(i),s=Ea(i,a),e=Oa(((e=a)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Et,this.translate=[t.e,t.f],this.scale=[o,e],this.skew=e?Math.atan2(s,e)*Et:0}function Ea(t,e){return t[0]*e[0]+t[1]*e[1]}function Oa(t){var e=Math.sqrt(Ea(t,t));return e&&(t[0]/=e,t[1]/=e),e}R.ease=function(t){var e,n=t.indexOf("-"),r=0<=n?t.slice(0,n):t,n=0<=n?t.slice(n+1):"in",r=ga.get(r)||pa,n=ya.get(n)||C;return e=n(r.apply(null,i.call(arguments,1))),function(t){return t<=0?0:1<=t?1:e(t)}},R.interpolateHcl=function(t,e){t=R.hcl(t),e=R.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,s=e.l-i;isNaN(o)&&(o=0,r=isNaN(r)?e.c:r);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360);return function(t){return Ht(n+a*t,r+o*t,i+s*t)+""}},R.interpolateHsl=function(t,e){t=R.hsl(t),e=R.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,s=e.l-i;isNaN(o)&&(o=0,r=isNaN(r)?e.s:r);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360);return function(t){return Ut(n+a*t,r+o*t,i+s*t)+""}},R.interpolateLab=function(t,e){t=R.lab(t),e=R.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,s=e.b-i;return function(t){return Zt(n+a*t,r+o*t,i+s*t)+""}},R.interpolateRound=Aa,R.transform=function(t){var n=j.createElementNS(R.ns.prefix.svg,"g");return(R.transform=function(t){var e;return null!=t&&(n.setAttribute("transform",t),e=n.transform.baseVal.consolidate()),new Sa(e?e.matrix:Ca)})(t)},Sa.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ca={a:1,b:0,c:0,d:1,e:0,f:0};function Pa(t){return t.length?t.pop()+",":""}function La(t,e){var n,r,i,a,o,s=[],l=[];return t=R.transform(t),e=R.transform(e),r=t.translate,i=e.translate,o=s,a=l,r[0]!==i[0]||r[1]!==i[1]?(n=o.push("translate(",null,",",null,")"),a.push({i:n-4,x:la(r[0],i[0])},{i:n-2,x:la(r[1],i[1])})):(i[0]||i[1])&&o.push("translate("+i+")"),a=t.rotate,n=e.rotate,r=s,o=l,a!==n?(180<a-n?n+=360:180<n-a&&(a+=360),o.push({i:r.push(Pa(r)+"rotate(",null,")")-2,x:la(a,n)})):n&&r.push(Pa(r)+"rotate("+n+")"),i=t.skew,o=e.skew,a=s,r=l,i!==o?r.push({i:a.push(Pa(a)+"skewX(",null,")")-2,x:la(i,o)}):o&&a.push(Pa(a)+"skewX("+o+")"),n=t.scale,r=e.scale,i=s,a=l,n[0]!==r[0]||n[1]!==r[1]?(o=i.push(Pa(i)+"scale(",null,",",null,")"),a.push({i:o-4,x:la(n[0],r[0])},{i:o-2,x:la(n[1],r[1])})):1===r[0]&&1===r[1]||i.push(Pa(i)+"scale("+r+")"),t=e=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}function Ra(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function ja(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function Na(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function Da(t){t.fixed|=2}function za(t){t.fixed&=-7}function Ia(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Fa(t){t.fixed&=-5}R.interpolateTransform=La,R.layout={},R.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(function(t){var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=Na(t),r=Na(e),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(e,n),i=[e];for(;e!==r;)e=e.parent,i.push(e);var a=i.length;for(;n!==r;)i.splice(a,0,n),n=n.parent;return i}(t[n]));return e}},R.layout.chord=function(){var y,m,v,b,x,_,w,e={},k=0;function t(){var t,e,n,r,i,a={},o=[],s=R.range(b),l=[];for(y=[],m=[],t=0,r=-1;++r<b;){for(e=0,i=-1;++i<b;)e+=v[r][i];o.push(e),l.push(R.range(b)),t+=e}for(x&&s.sort(function(t,e){return x(o[t],o[e])}),_&&l.forEach(function(t,n){t.sort(function(t,e){return _(v[n][t],v[n][e])})}),t=(Mt-k*b)/t,e=0,r=-1;++r<b;){for(n=e,i=-1;++i<b;){var u=s[r],c=l[u][i],f=v[u][c],h=e,d=e+=f*t;a[u+"-"+c]={index:u,subindex:c,startAngle:h,endAngle:d,value:f}}m[u]={index:u,startAngle:n,endAngle:e,value:o[u]},e+=k}for(r=-1;++r<b;)for(i=r-1;++i<b;){var p=a[r+"-"+i],g=a[i+"-"+r];(p.value||g.value)&&y.push(p.value<g.value?{source:g,target:p}:{source:p,target:g})}w&&M()}function M(){y.sort(function(t,e){return w((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return e.matrix=function(t){return arguments.length?(b=(v=t)&&v.length,y=m=null,e):v},e.padding=function(t){return arguments.length?(k=t,y=m=null,e):k},e.sortGroups=function(t){return arguments.length?(x=t,y=m=null,e):x},e.sortSubgroups=function(t){return arguments.length?(_=t,y=null,e):_},e.sortChords=function(t){return arguments.length?(w=t,y&&M(),e):w},e.chords=function(){return y||t(),y},e.groups=function(){return m||t(),m},e},R.layout.force=function(){var f,t,h,d,p,g,i={},y=R.dispatch("start","tick","end"),m=[1,1],v=.9,a=Ba,o=Ua,b=-30,x=Va,_=.1,w=.64,k=[],M=[];function e(t){t.px=R.event.x,t.py=R.event.y,i.resume()}return i.tick=function(){if((h*=.99)<.005)return f=null,y.end({type:"end",alpha:h=0}),!0;for(var t,e,n,r,i,a,o,s,l=k.length,u=M.length,c=0;c<u;++c)n=(e=M[c]).source,(i=(o=(r=e.target).x-n.x)*o+(s=r.y-n.y)*s)&&(o*=i=h*p[c]*((i=Math.sqrt(i))-d[c])/i,s*=i,r.x-=o*(a=n.weight+r.weight?n.weight/(n.weight+r.weight):.5),r.y-=s*a,n.x+=o*(a=1-a),n.y+=s*a);if((a=h*_)&&(o=m[0]/2,s=m[1]/2,c=-1,a))for(;++c<l;)(e=k[c]).x+=(o-e.x)*a,e.y+=(s-e.y)*a;if(b)for(!function t(e,n,r){var i=0,a=0;e.charge=0;if(!e.leaf)for(var o,s=e.nodes,l=s.length,u=-1;++u<l;)null!=(o=s[u])&&(t(o,n,r),e.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);{var c;e.point&&(e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5),c=n*r[e.point.index],e.charge+=e.pointCharge=c,i+=c*e.point.x,a+=c*e.point.y)}e.cx=i/e.charge;e.cy=a/e.charge}(t=R.geom.quadtree(k),h,g),c=-1;++c<l;)(e=k[c]).fixed||t.visit(function(s){return function(t,e,n,r){if(t.point!==s){var i,a=t.cx-s.x,o=t.cy-s.y,r=r-e,e=a*a+o*o;if(r*r/w<e)return e<x&&(i=t.charge/e,s.px-=a*i,s.py-=o*i),!0;t.point&&e&&e<x&&(i=t.pointCharge/e,s.px-=a*i,s.py-=o*i)}return!t.charge}}(e));for(c=-1;++c<l;)(e=k[c]).fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*v,e.y-=(e.py-(e.py=e.y))*v);y.tick({type:"tick",alpha:h})},i.nodes=function(t){return arguments.length?(k=t,i):k},i.links=function(t){return arguments.length?(M=t,i):M},i.size=function(t){return arguments.length?(m=t,i):m},i.linkDistance=function(t){return arguments.length?(a="function"==typeof t?t:+t,i):a},i.distance=i.linkDistance,i.linkStrength=function(t){return arguments.length?(o="function"==typeof t?t:+t,i):o},i.friction=function(t){return arguments.length?(v=+t,i):v},i.charge=function(t){return arguments.length?(b="function"==typeof t?t:+t,i):b},i.chargeDistance=function(t){return arguments.length?(x=t*t,i):Math.sqrt(x)},i.gravity=function(t){return arguments.length?(_=+t,i):_},i.theta=function(t){return arguments.length?(w=t*t,i):Math.sqrt(w)},i.alpha=function(t){return arguments.length?(t=+t,h?0<t?h=t:(f.c=null,f.t=NaN,f=null,y.end({type:"end",alpha:h=0})):0<t&&(y.start({type:"start",alpha:h=t}),f=ve(i.tick)),i):h},i.start=function(){for(var s,t,l=k.length,u=M.length,e=m[0],n=m[1],c=0;c<l;++c)(t=k[c]).index=c,t.weight=0;for(c=0;c<u;++c)"number"==typeof(t=M[c]).source&&(t.source=k[t.source]),"number"==typeof t.target&&(t.target=k[t.target]),++t.source.weight,++t.target.weight;for(c=0;c<l;++c)t=k[c],isNaN(t.x)&&(t.x=r("x",e)),isNaN(t.y)&&(t.y=r("y",n)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(d=[],"function"==typeof a)for(c=0;c<u;++c)d[c]=+a.call(this,M[c],c);else for(c=0;c<u;++c)d[c]=a;if(p=[],"function"==typeof o)for(c=0;c<u;++c)p[c]=+o.call(this,M[c],c);else for(c=0;c<u;++c)p[c]=o;if(g=[],"function"==typeof b)for(c=0;c<l;++c)g[c]=+b.call(this,k[c],c);else for(c=0;c<l;++c)g[c]=b;function r(t,e){if(!s){for(s=new Array(l),a=0;a<l;++a)s[a]=[];for(a=0;a<u;++a){var n=M[a];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var r,i=s[c],a=-1,o=i.length;++a<o;)if(!isNaN(r=i[a][t]))return r;return Math.random()*e}return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){if(t=t||R.behavior.drag().origin(C).on("dragstart.force",Da).on("drag.force",e).on("dragend.force",za),!arguments.length)return t;this.on("mouseover.force",Ia).on("mouseout.force",Fa).call(t)},R.rebind(i,y,"on")};var Ba=20,Ua=1,Va=1/0;function Ha(t,e){return R.rebind(t,e,"sort","children","value"),(t.nodes=t).links=Za,t}function qa(t,e){for(var n,r,i=[t];null!=(t=i.pop());)if(e(t),(r=t.children)&&(n=r.length))for(;0<=--n;)i.push(r[n])}function Ga(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function Ya(t){return t.children}function Xa(t){return t.value}function Wa(t,e){return e.value-t.value}function Za(t){return R.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}R.layout.hierarchy=function(){var s=Wa,l=Ya,u=Xa;function c(t){var e,n,r,i,a=[t],o=[];for(t.depth=0;null!=(e=a.pop());)if(o.push(e),(r=l.call(c,e,e.depth))&&(n=r.length)){for(;0<=--n;)a.push(i=r[n]),i.parent=e,i.depth=e.depth+1;u&&(e.value=0),e.children=r}else u&&(e.value=+u.call(c,e,e.depth)||0),delete e.children;return Ga(t,function(t){var e,n;s&&(e=t.children)&&e.sort(s),u&&(n=t.parent)&&(n.value+=t.value)}),o}return c.sort=function(t){return arguments.length?(s=t,c):s},c.children=function(t){return arguments.length?(l=t,c):l},c.value=function(t){return arguments.length?(u=t,c):u},c.revalue=function(t){return u&&(qa(t,function(t){t.children&&(t.value=0)}),Ga(t,function(t){var e;t.children||(t.value=+u.call(c,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},c},R.layout.partition=function(){var n=R.layout.hierarchy(),r=[1,1];function e(t,e){e=n.call(this,t,e);return function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,l=-1;for(r=e.value?r/e.value:0;++l<o;)t(s=a[l],n,s=s.value*r,i),n+=s}}(e[0],0,r[0],r[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}(e[0])),e}return e.size=function(t){return arguments.length?(r=t,e):r},Ha(e,n)},R.layout.pie=function(){var f=Number,h=Ka,d=0,p=Mt,g=0;function y(n){var e,t=n.length,r=n.map(function(t,e){return+f.call(y,t,e)}),i=+("function"==typeof d?d.apply(this,arguments):d),a=("function"==typeof p?p.apply(this,arguments):p)-i,o=Math.min(Math.abs(a)/t,+("function"==typeof g?g.apply(this,arguments):g)),s=o*(a<0?-1:1),l=R.sum(r),u=l?(a-t*s)/l:0,t=R.range(t),c=[];return null!=h&&t.sort(h===Ka?function(t,e){return r[e]-r[t]}:function(t,e){return h(n[t],n[e])}),t.forEach(function(t){c[t]={data:n[t],value:e=r[t],startAngle:i,endAngle:i+=e*u+s,padAngle:o}}),c}return y.value=function(t){return arguments.length?(f=t,y):f},y.sort=function(t){return arguments.length?(h=t,y):h},y.startAngle=function(t){return arguments.length?(d=t,y):d},y.endAngle=function(t){return arguments.length?(p=t,y):p},y.padAngle=function(t){return arguments.length?(g=t,y):g},y};var Ka={};function Qa(t){return t.x}function $a(t){return t.y}function Ja(t,e,n){t.y0=e,t.y=n}R.layout.stack=function(){var f=C,h=no,d=ro,p=Ja,g=Qa,y=$a;function m(t,e){if(!(n=t.length))return t;for(var n,r,i,a=(s=t.map(function(t,e){return f.call(m,t,e)})).map(function(t){return t.map(function(t,e){return[g.call(m,t,e),y.call(m,t,e)]})}),o=h.call(m,a,e),s=R.permute(s,o),a=R.permute(a,o),l=d.call(m,a,e),u=s[0].length,c=0;c<u;++c)for(p.call(m,s[0][c],i=l[c],a[0][c][1]),r=1;r<n;++r)p.call(m,s[r][c],i+=a[r-1][c][1],a[r][c][1]);return t}return m.values=function(t){return arguments.length?(f=t,m):f},m.order=function(t){return arguments.length?(h="function"==typeof t?t:to.get(t)||no,m):h},m.offset=function(t){return arguments.length?(d="function"==typeof t?t:eo.get(t)||ro,m):d},m.x=function(t){return arguments.length?(g=t,m):g},m.y=function(t){return arguments.length?(y=t,m):y},m.out=function(t){return arguments.length?(p=t,m):p},m};var to=R.map({"inside-out":function(t){for(var e,n=t.length,r=t.map(io),i=t.map(ao),a=R.range(n).sort(function(t,e){return r[t]-r[e]}),o=0,s=0,l=[],u=[],c=0;c<n;++c)e=a[c],o<s?(o+=i[e],l.push(e)):(s+=i[e],u.push(e));return u.reverse().concat(l)},reverse:function(t){return R.range(t.length).reverse()},default:no}),eo=R.map({silhouette:function(t){for(var e,n,r=t.length,i=t[0].length,a=[],o=0,s=[],l=0;l<i;++l){for(n=e=0;e<r;e++)n+=t[e][l][1];o<n&&(o=n),a.push(n)}for(l=0;l<i;++l)s[l]=(o-a[l])/2;return s},wiggle:function(t){var e,n,r,i,a,o,s,l,u,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=l=u=0,n=1;n<h;++n){for(i=e=0;e<c;++e)i+=t[e][n][1];for(a=e=0,s=f[n][0]-f[n-1][0];e<c;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}d[n]=l-=i?a/i*s:0,l<u&&(u=l)}for(n=0;n<h;++n)d[n]-=u;return d},expand:function(t){for(var e,n,r=t.length,i=t[0].length,a=1/r,o=[],s=0;s<i;++s){for(n=e=0;e<r;e++)n+=t[e][s][1];if(n)for(e=0;e<r;e++)t[e][s][1]/=n;else for(e=0;e<r;e++)t[e][s][1]=a}for(s=0;s<i;++s)o[s]=0;return o},zero:ro});function no(t){return R.range(t.length)}function ro(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function io(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function ao(t){return t.reduce(oo,0)}function oo(t,e){return t+e[1]}function so(t,e){return lo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function lo(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function uo(t){return[R.min(t),R.max(t)]}function co(t,e){return t.value-e.value}function fo(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function ho(t,e){(t._pack_next=e)._pack_prev=t}function po(t,e){var n=e.x-t.x,r=e.y-t.y,e=t.r+e.r;return n*n+r*r<.999*e*e}function go(t){if((e=t.children)&&(o=e.length)){var e,n,r,i,a,o,s=1/0,l=-1/0,u=1/0,c=-1/0;if(e.forEach(yo),n=e[0],n.x=-n.r,n.y=0,b(n),1<o&&((r=e[1]).x=r.r,r.y=0,b(r),2<o))for(vo(n,r,i=e[2]),b(i),fo(n,i),fo(n._pack_prev=i,r),r=n._pack_next,v=3;v<o;v++){vo(n,r,i=e[v]);for(var f=0,h=1,d=1,p=r._pack_next;p!==r;p=p._pack_next,h++)if(po(p,i)){f=1;break}if(1==f)for(a=n._pack_prev;a!==p._pack_prev&&!po(a,i);a=a._pack_prev,d++);f?(h<d||h==d&&r.r<n.r?ho(n,r=p):ho(n=a,r),v--):(fo(n,i),b(r=i))}for(var g=(s+l)/2,y=(u+c)/2,m=0,v=0;v<o;v++)(i=e[v]).x-=g,i.y-=y,m=Math.max(m,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=m,e.forEach(mo)}function b(t){s=Math.min(t.x-t.r,s),l=Math.max(t.x+t.r,l),u=Math.min(t.y-t.r,u),c=Math.max(t.y+t.r,c)}}function yo(t){t._pack_next=t._pack_prev=t}function mo(t){delete t._pack_next,delete t._pack_prev}function vo(t,e,n){var r,i,a=t.r+n.r,o=e.x-t.x,s=e.y-t.y;a&&(o||s)?(r=e.r+n.r,e=.5+((a*=a)-(r*=r))/(2*(i=o*o+s*s)),i=Math.sqrt(Math.max(0,2*r*(a+i)-(a-=i)*a-r*r))/(2*i),n.x=t.x+e*o+i*s,n.y=t.y+e*s-i*o):(n.x=t.x+a,n.y=t.y)}function bo(t,e){return t.parent==e.parent?1:2}function xo(t){var e=t.children;return e.length?e[0]:t.t}function _o(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function wo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ko(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],e=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),e<0&&(r+=e/2,e=0),{x:n,y:r,dx:i,dy:e}}function Mo(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]}function To(t){return t.rangeExtent?t.rangeExtent():Mo(t.range())}function Ao(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function So(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Eo(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Oo}R.layout.histogram=function(){var f=!0,h=Number,d=uo,p=so;function n(t,e){for(var n,r,i=[],a=t.map(h,this),o=d.call(this,a,e),s=p.call(this,o,a,e),e=-1,l=a.length,u=s.length-1,c=f?1:1/l;++e<u;)(n=i[e]=[]).dx=s[e+1]-(n.x=s[e]),n.y=0;if(0<u)for(e=-1;++e<l;)(r=a[e])>=o[0]&&r<=o[1]&&((n=i[R.bisect(s,r,1,u)-1]).y+=c,n.push(t[e]));return i}return n.value=function(t){return arguments.length?(h=t,n):h},n.range=function(t){return arguments.length?(d=ce(t),n):d},n.bins=function(e){return arguments.length?(p="number"==typeof e?function(t){return lo(t,e)}:ce(e),n):p},n.frequency=function(t){return arguments.length?(f=!!t,n):f},n},R.layout.pack=function(){var o,s=R.layout.hierarchy().sort(co),l=0,u=[1,1];function e(t,e){var n,r=s.call(this,t,e),i=r[0],t=u[0],e=u[1],a=null==o?Math.sqrt:"function"==typeof o?o:function(){return o};return i.x=i.y=0,Ga(i,function(t){t.r=+a(t.value)}),Ga(i,go),l&&(n=l*(o?1:Math.max(2*i.r/t,2*i.r/e))/2,Ga(i,function(t){t.r+=n}),Ga(i,go),Ga(i,function(t){t.r-=n})),function t(e,n,r,i){var a=e.children;e.x=n+=i*e.x;e.y=r+=i*e.y;e.r*=i;if(a)for(var o=-1,s=a.length;++o<s;)t(a[o],n,r,i)}(i,t/2,e/2,o?1:1/Math.max(2*i.r/t,2*i.r/e)),r}return e.size=function(t){return arguments.length?(u=t,e):u},e.radius=function(t){return arguments.length?(o=null==t||"function"==typeof t?t:+t,e):o},e.padding=function(t){return arguments.length?(l=+t,e):l},Ha(e,s)},R.layout.tree=function(){var u=R.layout.hierarchy().sort(null).value(null),h=bo,c=[1,1],f=null;function e(t,e){var n,r,i,a,o,s,l=u.call(this,t,e),t=l[0],e=function(t){var e,t={A:null,children:[t]},n=[t];for(;null!=(e=n.pop());)for(var r,i=e.children,a=0,o=i.length;a<o;++a)n.push((i[a]=r={_:i[a],parent:e,children:(r=i[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return t.children[0]}(t);return Ga(e,d),e.parent.m=-e.z,qa(e,p),f?qa(t,g):(qa(i=r=n=t,function(t){t.x<n.x&&(n=t),t.x>r.x&&(r=t),t.depth>i.depth&&(i=t)}),a=h(n,r)/2-n.x,o=c[0]/(r.x+h(r,n)/2+a),s=c[1]/(i.depth||1),qa(t,function(t){t.x=(t.x+a)*o,t.y=t.depth*s})),l}function d(a){var t=a.children,e=a.parent.children,n=a.i?e[a.i-1]:null;t.length?(function(){for(var t,e=0,n=0,r=a.children,i=r.length;0<=--i;)(t=r[i]).z+=e,t.m+=e,e+=t.s+(n+=t.c)}(),t=(t[0].z+t[t.length-1].z)/2,n?(a.z=n.z+h(a._,n._),a.m=a.z-t):a.z=t):n&&(a.z=n.z+h(a._,n._)),a.parent.A=function(t,e,n){if(e){for(var r,i=t,a=t,o=e,s=i.parent.children[0],l=i.m,u=a.m,c=o.m,f=s.m;o=_o(o),i=xo(i),o&&i;)s=xo(s),(a=_o(a)).a=t,0<(r=o.z+c-i.z-l+h(o._,i._))&&(function(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}(function(t,e,n){return t.a.parent===e.parent?t.a:n}(o,t,n),t,r),l+=r,u+=r),c+=o.m,l+=i.m,f+=s.m,u+=a.m;o&&!_o(a)&&(a.t=o,a.m+=c-u),i&&!xo(s)&&(s.t=i,s.m+=l-f,n=t)}return n}(a,n,a.parent.A||e[0])}function p(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function g(t){t.x*=c[0],t.y=t.depth*c[1]}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(f=null==(c=t)?g:null,e):f?null:c},e.nodeSize=function(t){return arguments.length?(f=null==(c=t)?null:g,e):f?c:null},Ha(e,u)},R.layout.cluster=function(){var l=R.layout.hierarchy().sort(null).value(null),u=bo,c=[1,1],f=!1;function e(t,e){var r,n=l.call(this,t,e),i=n[0],a=0;Ga(i,function(t){var e,n=t.children;n&&n.length?(t.x=(e=n).reduce(function(t,e){return t+e.x},0)/e.length,t.y=(n=n,1+R.max(n,function(t){return t.y}))):(t.x=r?a+=u(t,r):0,t.y=0,r=t)});var t=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(i),e=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(i),o=t.x-u(t,e)/2,s=e.x+u(e,t)/2;return Ga(i,f?function(t){t.x=(t.x-i.x)*c[0],t.y=(i.y-t.y)*c[1]}:function(t){t.x=(t.x-o)/(s-o)*c[0],t.y=(1-(i.y?t.y/i.y:1))*c[1]}),n}return e.separation=function(t){return arguments.length?(u=t,e):u},e.size=function(t){return arguments.length?(f=null==(c=t),e):f?null:c},e.nodeSize=function(t){return arguments.length?(f=null!=(c=t),e):f?c:null},Ha(e,l)},R.layout.treemap=function(){var n,r=R.layout.hierarchy(),c=Math.round,i=[1,1],a=null,u=wo,o=!1,f="squarify",h=.5*(1+Math.sqrt(5));function d(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function p(t){var e=t.children;if(e&&e.length){var n,r,i=u(t),a=[],o=e.slice(),s=1/0,l="slice"===f?i.dx:"dice"===f?i.dy:"slice-dice"===f?1&t.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(d(o,i.dx*i.dy/t.value),a.area=0;0<(r=o.length);)a.push(r=o[r-1]),a.area+=r.area,s="squarify"!==f||(n=function(t,e){var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;for(;++o<s;)(n=t[o].area)&&(n<a&&(a=n),i<n&&(i=n));return e*=e,(r*=r)?Math.max(e*i*h/r,r/(e*a*h)):1/0}(a,l))<=s?(o.pop(),n):(a.area-=a.pop().area,g(a,l,i,!1),l=Math.min(i.dx,i.dy),1/(a.length=a.area=0));a.length&&(g(a,l,i,!0),a.length=a.area=0),e.forEach(p)}}function s(t){var e=t.children;if(e&&e.length){var n,r=u(t),i=e.slice(),a=[];for(d(i,r.dx*r.dy/t.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(g(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);e.forEach(s)}}function g(t,e,n,r){var i,a=-1,o=t.length,s=n.x,l=n.y,u=e?c(t.area/e):0;if(e==n.dx){for((r||u>n.dy)&&(u=n.dy);++a<o;)(i=t[a]).x=s,i.y=l,i.dy=u,s+=i.dx=Math.min(n.x+n.dx-s,u?c(i.area/u):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((r||u>n.dx)&&(u=n.dx);++a<o;)(i=t[a]).x=s,i.y=l,i.dx=u,l+=i.dy=Math.min(n.y+n.dy-l,u?c(i.area/u):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function l(t){var e=n||r(t),t=e[0];return t.x=t.y=0,t.value?(t.dx=i[0],t.dy=i[1]):t.dx=t.dy=0,n&&r.revalue(t),d([t],t.dx*t.dy/t.value),(n?s:p)(t),o&&(n=e),e}return l.size=function(t){return arguments.length?(i=t,l):i},l.padding=function(n){return arguments.length?(u=null==(a=n)?wo:"function"==(e=typeof n)?function(t){var e=n.call(l,t,t.depth);return null==e?wo(t):ko(t,"number"==typeof e?[e,e,e,e]:e)}:("number"==e&&(n=[n,n,n,n]),t),l):a;function t(t){return ko(t,n)}var e},l.round=function(t){return arguments.length?(c=t?Math.round:Number,l):c!=Number},l.sticky=function(t){return arguments.length?(o=t,n=null,l):o},l.ratio=function(t){return arguments.length?(h=t,l):h},l.mode=function(t){return arguments.length?(f=t+"",l):f},Ha(l,r)},R.random={normal:function(r,i){var t=arguments.length;return t<2&&(i=1),t<1&&(r=0),function(){for(var t,e,n;n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e,!n||1<n;);return r+i*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=R.random.normal.apply(R,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=R.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},R.scale={};var Oo={floor:C,ceil:C};function Co(n,t,e,r){var i=[],a=[],o=0,s=Math.min(n.length,t.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=s;)i.push(e(n[o-1],n[o])),a.push(r(t[o-1],t[o]));return function(t){var e=R.bisect(n,t,1,s)-1;return a[e](i[e](t))}}function Po(t,e){return R.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Lo(t,e){return So(t,Eo(Ro(t,e)[2])),So(t,Eo(Ro(t,e)[2])),t}function Ro(t,e){null==e&&(e=10);var n=Mo(t),r=n[1]-n[0],t=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),r=e/r*t;return r<=.15?t*=10:r<=.35?t*=5:r<=.75&&(t*=2),n[0]=Math.ceil(n[0]/t)*t,n[1]=Math.floor(n[1]/t)*t+.5*t,n[2]=t,n}function jo(t,e){return R.range.apply(R,Ro(t,e))}function No(t,e,n){var r,i=Ro(t,e);if(n){var a=Me.exec(n);if(a.shift(),"s"===a[8]){var o=R.formatPrefix(Math.max(P(i[0]),P(i[1])));return a[7]||(a[7]="."+zo(o.scale(i[2]))),a[8]="f",n=R.format(a.join("")),function(t){return n(o.scale(t))+o.symbol}}a[7]||(a[7]="."+(r=a[8],e=zo((t=i)[2]),r in Do?Math.abs(e-zo(Math.max(P(t[0]),P(t[1]))))+ +("e"!==r):e-2*("%"===r))),n=a.join("")}else n=",."+zo(i[2])+"f";return R.format(n)}R.scale.linear=function(){return function t(n,r,i,a){var o,s;function e(){var t=2<Math.min(n.length,r.length)?Co:Ao,e=a?ja:Ra;return o=t(n,r,e,i),s=t(r,n,e,ha),l}function l(t){return o(t)}l.invert=function(t){return s(t)};l.domain=function(t){return arguments.length?(n=t.map(Number),e()):n};l.range=function(t){return arguments.length?(r=t,e()):r};l.rangeRound=function(t){return l.range(t).interpolate(Aa)};l.clamp=function(t){return arguments.length?(a=t,e()):a};l.interpolate=function(t){return arguments.length?(i=t,e()):i};l.ticks=function(t){return jo(n,t)};l.tickFormat=function(t,e){return No(n,t,e)};l.nice=function(t){return Lo(n,t),e()};l.copy=function(){return t(n,r,i,a)};return e()}([0,1],[0,1],ha,!1)};var Do={s:1,g:1,p:1,r:1,e:1};function zo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}R.scale.log=function(){return function t(e,l,u,c){function f(t){return(u?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(l)}function h(t){return u?Math.pow(l,t):-Math.pow(l,-t)}function i(t){return e(f(t))}i.invert=function(t){return h(e.invert(t))};i.domain=function(t){return arguments.length?(u=0<=t[0],e.domain((c=t.map(Number)).map(f)),i):c};i.base=function(t){return arguments.length?(l=+t,e.domain(c.map(f)),i):l};i.nice=function(){var t=So(c.map(f),u?Math:Fo);return e.domain(t),c=t.map(h),i};i.ticks=function(){var t=Mo(c),e=[],n=t[0],r=t[1],i=Math.floor(f(n)),a=Math.ceil(f(r)),o=l%1?2:l;if(isFinite(a-i)){if(u){for(;i<a;i++)for(var s=1;s<o;s++)e.push(h(i)*s);e.push(h(i))}else for(e.push(h(i));i++<a;)for(var s=o-1;0<s;s--)e.push(h(i)*s);for(i=0;e[i]<n;i++);for(a=e.length;e[a-1]>r;a--);e=e.slice(i,a)}return e};i.tickFormat=function(t,n){if(!arguments.length)return Io;arguments.length<2?n=Io:"function"!=typeof n&&(n=R.format(n));var r=Math.max(1,l*t/i.ticks().length);return function(t){var e=t/h(Math.round(f(t)));return e*l<l-.5&&(e*=l),e<=r?n(t):""}};i.copy=function(){return t(e.copy(),l,u,c)};return Po(i,e)}(R.scale.linear().domain([0,1]),10,!0,[1,10])};var Io=R.format(".0e"),Fo={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Bo(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}R.scale.pow=function(){return function t(e,n,r){var i=Bo(n),a=Bo(1/n);function o(t){return e(i(t))}o.invert=function(t){return a(e.invert(t))};o.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),o):r};o.ticks=function(t){return jo(r,t)};o.tickFormat=function(t,e){return No(r,t,e)};o.nice=function(t){return o.domain(Lo(r,t))};o.exponent=function(t){return arguments.length?(i=Bo(n=t),a=Bo(1/n),e.domain(r.map(i)),o):n};o.copy=function(){return t(e.copy(),n,r)};return Po(o,e)}(R.scale.linear(),1,[0,1])},R.scale.sqrt=function(){return R.scale.pow().exponent(.5)},R.scale.ordinal=function(){return function t(s,l){var i,u,c;function f(t){return u[((i.get(t)||("range"===l.t?i.set(t,s.push(t)):NaN))-1)%u.length]}function h(e,n){return R.range(s.length).map(function(t){return e+n*t})}f.domain=function(t){if(!arguments.length)return s;s=[],i=new v;for(var e,n=-1,r=t.length;++n<r;)i.has(e=t[n])||i.set(e,s.push(e));return f[l.t].apply(f,l.a)};f.range=function(t){return arguments.length?(u=t,c=0,l={t:"range",a:arguments},f):u};f.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],r=t[1],r=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+e);return u=h(n+r*e/2,r),c=0,l={t:"rangePoints",a:arguments},f};f.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],r=t[1],i=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+e)|0;return u=h(n+Math.round(i*e/2+(r-n-(s.length-1+e)*i)/2),i),c=0,l={t:"rangeRoundPoints",a:arguments},f};f.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var r=t[1]<t[0],i=t[+r],a=t[1-r],a=(a-i)/(s.length-e+2*n);return u=h(i+a*n,a),r&&u.reverse(),c=a*(1-e),l={t:"rangeBands",a:arguments},f};f.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var r=t[1]<t[0],i=t[+r],a=t[1-r],o=Math.floor((a-i)/(s.length-e+2*n));return u=h(i+Math.round((a-i-(s.length-e)*o)/2),o),r&&u.reverse(),c=Math.round(o*(1-e)),l={t:"rangeRoundBands",a:arguments},f};f.rangeBand=function(){return c};f.rangeExtent=function(){return Mo(l.a[0])};f.copy=function(){return t(s,l)};return f.domain(s)}([],{t:"range",a:[[]]})},R.scale.category10=function(){return R.scale.ordinal().range(Uo)},R.scale.category20=function(){return R.scale.ordinal().range(Vo)},R.scale.category20b=function(){return R.scale.ordinal().range(Ho)},R.scale.category20c=function(){return R.scale.ordinal().range(qo)};var Uo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ne),Vo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ne),Ho=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ne),qo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ne);function Go(){return 0}R.scale.quantile=function(){return function t(n,r){var i;function e(){var t=0,e=r.length;for(i=[];++t<e;)i[t-1]=R.quantile(n,t/e);return a}function a(t){if(!isNaN(t=+t))return r[R.bisect(i,t)]}a.domain=function(t){return arguments.length?(n=t.map(u).filter(c).sort(l),e()):n};a.range=function(t){return arguments.length?(r=t,e()):r};a.quantiles=function(){return i};a.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[0<t?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]};a.copy=function(){return t(n,r)};return e()}([],[])},R.scale.quantize=function(){return function t(e,n,r){var i,a;function o(t){return r[Math.max(0,Math.min(a,Math.floor(i*(t-e))))]}function s(){return i=r.length/(n-e),a=r.length-1,o}o.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]};o.range=function(t){return arguments.length?(r=t,s()):r};o.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]};o.copy=function(){return t(e,n,r)};return s()}(0,1,[0,1])},R.scale.threshold=function(){return function t(e,n){function r(t){if(t<=t)return n[R.bisect(e,t)]}r.domain=function(t){return arguments.length?(e=t,r):e};r.range=function(t){return arguments.length?(n=t,r):n};r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};r.copy=function(){return t(e,n)};return r}([.5],[0,1])},R.scale.identity=function(){return function t(n){function e(t){return+t}e.invert=e;e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n};e.ticks=function(t){return jo(n,t)};e.tickFormat=function(t,e){return No(n,t,e)};e.copy=function(){return t(n)};return e}([0,1])},R.svg={},R.svg.arc=function(){var A=Xo,S=Wo,E=Go,O=Yo,C=Zo,P=Ko,L=Qo;function e(){var t=Math.max(0,+A.apply(this,arguments)),e=Math.max(0,+S.apply(this,arguments)),n=C.apply(this,arguments)-At,r=P.apply(this,arguments)-At,i=Math.abs(r-n),a=r<n?0:1;if(e<t&&(o=e,e=t,t=o),Tt<=i)return R(e,a)+(t?R(t,1-a):"")+"Z";var o,s,l,u,c,f,h,d,p,g,y,m,v,b,x,_,w,k=0,M=0,T=[];return(l=(+L.apply(this,arguments)||0)/2)&&(s=O===Yo?Math.sqrt(t*t+e*e):+O.apply(this,arguments),a||(M*=-1),e&&(M=Lt(s/e*Math.sin(l))),t&&(k=Lt(s/t*Math.sin(l)))),e?(h=e*Math.cos(n+M),d=e*Math.sin(n+M),p=e*Math.cos(r-M),u=e*Math.sin(r-M),f=Math.abs(r-n-2*M)<=kt?0:1,M&&$o(h,d,p,u)===a^f&&(_=(n+r)/2,h=e*Math.cos(_),d=e*Math.sin(_),p=u=null)):h=d=0,t?(y=t*Math.cos(r-k),m=t*Math.sin(r-k),v=t*Math.cos(n+k),c=t*Math.sin(n+k),g=Math.abs(n-r+2*k)<=kt?0:1,k&&$o(y,m,v,c)===1-a^g&&(b=(n+r)/2,y=t*Math.cos(b),m=t*Math.sin(b),v=c=null)):y=m=0,_t<i&&.001<(o=Math.min(Math.abs(e-t)/2,+E.apply(this,arguments)))?(M=t<e^a?0:1,k=_=o,i<kt&&(r=h-(n=null==v?[y,m]:null==p?[h,d]:Mi([h,d],[v,c],[p,u],[y,m]))[0],b=d-n[1],i=p-n[0],x=u-n[1],x=1/Math.sin(Math.acos((r*i+b*x)/(Math.sqrt(r*r+b*b)*Math.sqrt(i*i+x*x)))/2),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),k=Math.min(o,(t-n)/(x-1)),_=Math.min(o,(e-n)/(1+x))),null!=p?(x=Jo(null==v?[y,m]:[v,c],[h,d],e,_,a),w=Jo([p,u],[y,m],e,_,a),o===_?T.push("M",x[0],"A",_,",",_," 0 0,",M," ",x[1],"A",e,",",e," 0 ",1-a^$o(x[1][0],x[1][1],w[1][0],w[1][1]),",",a," ",w[1],"A",_,",",_," 0 0,",M," ",w[0]):T.push("M",x[0],"A",_,",",_," 0 1,",M," ",w[0])):T.push("M",h,",",d),null!=v?(_=Jo([h,d],[v,c],t,-k,a),w=Jo([y,m],null==p?[h,d]:[p,u],t,-k,a),o===k?T.push("L",w[0],"A",k,",",k," 0 0,",M," ",w[1],"A",t,",",t," 0 ",a^$o(w[1][0],w[1][1],_[1][0],_[1][1]),",",1-a," ",_[1],"A",k,",",k," 0 0,",M," ",_[0]):T.push("L",w[0],"A",k,",",k," 0 0,",M," ",_[0])):T.push("L",y,",",m)):(T.push("M",h,",",d),null!=p&&T.push("A",e,",",e," 0 ",f,",",a," ",p,",",u),T.push("L",y,",",m),null!=v&&T.push("A",t,",",t," 0 ",g,",",1-a," ",v,",",c)),T.push("Z"),T.join("")}function R(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return e.innerRadius=function(t){return arguments.length?(A=ce(t),e):A},e.outerRadius=function(t){return arguments.length?(S=ce(t),e):S},e.cornerRadius=function(t){return arguments.length?(E=ce(t),e):E},e.padRadius=function(t){return arguments.length?(O=t==Yo?Yo:ce(t),e):O},e.startAngle=function(t){return arguments.length?(C=ce(t),e):C},e.endAngle=function(t){return arguments.length?(P=ce(t),e):P},e.padAngle=function(t){return arguments.length?(L=ce(t),e):L},e.centroid=function(){var t=(+A.apply(this,arguments)+ +S.apply(this,arguments))/2,e=(+C.apply(this,arguments)+ +P.apply(this,arguments))/2-At;return[Math.cos(e)*t,Math.sin(e)*t]},e};var Yo="auto";function Xo(t){return t.innerRadius}function Wo(t){return t.outerRadius}function Zo(t){return t.startAngle}function Ko(t){return t.endAngle}function Qo(t){return t&&t.padAngle}function $o(t,e,n,r){return 0<(t-n)*e-(e-r)*t?0:1}function Jo(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,c=t[0]+l,f=t[1]+u,h=e[0]+l,d=e[1]+u,i=(c+h)/2,o=(f+d)/2,s=h-c,a=d-f,t=s*s+a*a,e=n-r,r=c*d-h*f,c=(a<0?-1:1)*Math.sqrt(Math.max(0,e*e*t-r*r)),d=(r*a-s*c)/t,h=(-r*s-a*c)/t,f=(r*a+s*c)/t,a=(-r*s+a*c)/t,c=d-i,t=h-o,i=f-i,o=a-o;return i*i+o*o<c*c+t*t&&(d=f,h=a),[[d-l,h-u],[d*n/e,h*n/e]]}function ts(u){var c=vi,f=bi,h=ur,d=ns,e=d.key,p=.7;function n(t){var e,n=[],r=[],i=-1,a=t.length,o=ce(c),s=ce(f);function l(){n.push("M",d(u(r),p))}for(;++i<a;)h.call(this,e=t[i],i)?r.push([+o.call(this,e,i),+s.call(this,e,i)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(t){return arguments.length?(c=t,n):c},n.y=function(t){return arguments.length?(f=t,n):f},n.defined=function(t){return arguments.length?(h=t,n):h},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?d=t:(d=es.get(t)||ns).key,n):e},n.tension=function(t){return arguments.length?(p=t,n):p},n}R.svg.line=function(){return ts(C)};var es=R.map({linear:ns,"linear-closed":rs,step:function(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);1<n&&i.push("H",r[0]);return i.join("")},"step-before":is,"step-after":as,basis:ls,"basis-open":function(t){if(t.length<4)return ns(t);var e,n=[],r=-1,i=t.length,a=[0],o=[0];for(;++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);n.push(us(hs,a)+","+us(hs,o)),--r;for(;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),ds(n,a,o);return n.join("")},"basis-closed":function(t){var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];for(;++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);e=[us(hs,o),",",us(hs,s)],--r;for(;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),ds(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,u=-1;++u<=n;)r=t[u],i=u/n,r[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*l);return ls(t)},cardinal:function(t,e){return t.length<3?ns(t):t[0]+os(t,ss(t,e))},"cardinal-open":function(t,e){return t.length<4?ns(t):t[1]+os(t.slice(1,-1),ss(t,e))},"cardinal-closed":function(t,e){return t.length<3?rs(t):t[0]+os((t.push(t[0]),t),ss([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?ns(t):t[0]+os(t,function(t){var e,n,r,i,a=[],o=function(t){var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=ps(i,a);for(;++e<n;)r[e]=(o+(o=ps(i=a,a=t[e+1])))/2;return r[e]=o,r}(t),s=-1,l=t.length-1;for(;++s<l;)e=ps(t[s],t[s+1]),P(e)<_t?o[s]=o[s+1]=0:(n=o[s]/e,r=o[s+1]/e,9<(i=n*n+r*r)&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));s=-1;for(;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(t))}});function ns(t){return 1<t.length?t.join("L"):t+"Z"}function rs(t){return t.join("L")+"Z"}function is(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function as(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function os(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return ns(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],l=2),1<e.length){s=e[1],a=t[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<e.length;u++,l++)a=t[l],s=e[u],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}return n&&(n=t[l],r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+n[0]+","+n[1]),r}function ss(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function ls(t){if(t.length<3)return ns(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",us(hs,o),",",us(hs,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),ds(l,o,s);return t.pop(),l.push("L",r),l.join("")}function us(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}es.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var cs=[0,2/3,1/3,0],fs=[0,1/3,2/3,0],hs=[0,1/6,2/3,1/6];function ds(t,e,n){t.push("C",us(cs,e),",",us(cs,n),",",us(fs,e),",",us(fs,n),",",us(hs,e),",",us(hs,n))}function ps(t,e){return(e[1]-t[1])/(e[0]-t[0])}function gs(t){for(var e,n,r,i=-1,a=t.length;++i<a;)n=(e=t[i])[0],r=e[1]-At,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function ys(p){var g=vi,y=vi,m=0,v=bi,b=ur,x=ns,e=x.key,_=x,w="L",k=.7;function n(t){var e,n,r,i=[],a=[],o=[],s=-1,l=t.length,u=ce(g),c=ce(m),f=g===y?function(){return n}:ce(y),h=m===v?function(){return r}:ce(v);function d(){i.push("M",x(p(o),k),w,_(p(a.reverse()),k),"Z")}for(;++s<l;)b.call(this,e=t[s],s)?(a.push([n=+u.call(this,e,s),r=+c.call(this,e,s)]),o.push([+f.call(this,e,s),+h.call(this,e,s)])):a.length&&(d(),a=[],o=[]);return a.length&&d(),i.length?i.join(""):null}return n.x=function(t){return arguments.length?(g=y=t,n):y},n.x0=function(t){return arguments.length?(g=t,n):g},n.x1=function(t){return arguments.length?(y=t,n):y},n.y=function(t){return arguments.length?(m=v=t,n):v},n.y0=function(t){return arguments.length?(m=t,n):m},n.y1=function(t){return arguments.length?(v=t,n):v},n.defined=function(t){return arguments.length?(b=t,n):b},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?x=t:(x=es.get(t)||ns).key,_=x.reverse||x,w=x.closed?"M":"L",n):e},n.tension=function(t){return arguments.length?(k=t,n):k},n}function ms(t){return t.radius}function vs(t){return[t.x,t.y]}function bs(){return 64}function xs(){return"circle"}function _s(t){t=Math.sqrt(t/kt);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}R.svg.line.radial=function(){var t=ts(gs);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(is.reverse=as).reverse=is,R.svg.area=function(){return ys(C)},R.svg.area.radial=function(){var t=ys(gs);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},R.svg.chord=function(){var i=ii,a=ai,o=ms,s=Zo,l=Ko;function e(t,e){var n=u(this,i,t,e),r=u(this,a,t,e);return"M"+n.p0+c(n.r,n.p1,n.a1-n.a0)+(t=r,(e=n).a0==t.a0&&e.a1==t.a1?f(n.r,n.p1,n.r,n.p0):f(n.r,n.p1,r.r,r.p0)+c(r.r,r.p1,r.a1-r.a0)+f(r.r,r.p1,n.r,n.p0))+"Z"}function u(t,e,n,r){var i=e.call(t,n,r),e=o.call(t,i,r),n=s.call(t,i,r)-At,r=l.call(t,i,r)-At;return{r:e,a0:n,a1:r,p0:[e*Math.cos(n),e*Math.sin(n)],p1:[e*Math.cos(r),e*Math.sin(r)]}}function c(t,e,n){return"A"+t+","+t+" 0 "+ +(kt<n)+",1 "+e}function f(t,e,n,r){return"Q 0,0 "+r}return e.radius=function(t){return arguments.length?(o=ce(t),e):o},e.source=function(t){return arguments.length?(i=ce(t),e):i},e.target=function(t){return arguments.length?(a=ce(t),e):a},e.startAngle=function(t){return arguments.length?(s=ce(t),e):s},e.endAngle=function(t){return arguments.length?(l=ce(t),e):l},e},R.svg.diagonal=function(){var r=ii,i=ai,a=vs;function e(t,e){var n=r.call(this,t,e),t=i.call(this,t,e),e=(n.y+t.y)/2,t=[n,{x:n.x,y:e},{x:t.x,y:e},t];return"M"+(t=t.map(a))[0]+"C"+t[1]+" "+t[2]+" "+t[3]}return e.source=function(t){return arguments.length?(r=ce(t),e):r},e.target=function(t){return arguments.length?(i=ce(t),e):i},e.projection=function(t){return arguments.length?(a=t,e):a},e},R.svg.diagonal.radial=function(){var t=R.svg.diagonal(),e=vs,r=t.projection;return t.projection=function(t){return arguments.length?r((n=e=t,function(){var t=n.apply(this,arguments),e=t[0],t=t[1]-At;return[e*Math.cos(t),e*Math.sin(t)]})):e;var n},t},R.svg.symbol=function(){var n=xs,r=bs;function e(t,e){return(ws.get(n.call(this,t,e))||_s)(r.call(this,t,e))}return e.type=function(t){return arguments.length?(n=ce(t),e):n},e.size=function(t){return arguments.length?(r=ce(t),e):r},e};var ws=R.map({circle:_s,cross:function(t){t=Math.sqrt(t/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ms)),t=e*Ms;return"M0,"+-e+"L"+t+",0 0,"+e+" "+-t+",0Z"},square:function(t){t=Math.sqrt(t)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ks),t=e*ks/2;return"M0,"+t+"L"+e+","+-t+" "+-e+","+-t+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ks),t=e*ks/2;return"M0,"+-t+"L"+e+","+t+" "+-e+","+t+"Z"}});R.svg.symbolTypes=ws.keys();var ks=Math.sqrt(3),Ms=Math.tan(30*St);G.transition=function(t){for(var e,n,r=Es||++Ps,i=js(t),a=[],o=Os||{time:Date.now(),ease:_a,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&Ns(n,c,i,r,o),e.push(n)}return Ss(a,i,r)},G.interrupt=function(t){return this.each(null==t?Ts:As(js(t)))};var Ts=As(js());function As(r){return function(){var t,e,n;(t=this[r])&&(n=t[e=t.active])&&(n.timer.c=null,n.timer.t=NaN,--t.count?delete t[e]:delete this[r],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ss(t,e,n){return B(t,Cs),t.namespace=e,t.id=n,t}var Es,Os,Cs=[],Ps=0;function Ls(t,r,i,a){var o=t.id,s=t.namespace;return lt(t,"function"==typeof i?function(t,e,n){t[s][o].tween.set(r,a(i.call(t,t.__data__,e,n)))}:(i=a(i),function(t){t[s][o].tween.set(r,i)}))}function Rs(t){return null==t&&(t=""),function(){this.textContent=t}}function js(t){return null==t?"__transition__":"__transition_"+t+"__"}function Ns(a,o,r,s,t){var l,u,c,f,h,d=a[r]||(a[r]={active:0,count:0}),p=d[s];function n(t){var e,n,r=d.active,i=d[r];for(e in i&&(i.timer.c=null,i.timer.t=NaN,--d.count,delete d[r],i.event&&i.event.interrupt.call(a,a.__data__,i.index)),d)+e<s&&((n=d[e]).timer.c=null,n.timer.t=NaN,--d.count,delete d[e]);u.c=g,ve(function(){return u.c&&g(t||1)&&(u.c=null,u.t=NaN),1},0,l),d.active=s,p.event&&p.event.start.call(a,a.__data__,o),h=[],p.tween.forEach(function(t,e){(e=e.call(a,a.__data__,o))&&h.push(e)}),f=p.ease,c=p.duration}function g(t){for(var t=t/c,e=f(t),n=h.length;0<n;)h[--n].call(a,e);if(1<=t)return p.event&&p.event.end.call(a,a.__data__,o),--d.count?delete d[s]:delete a[r],1}p||(l=t.time,u=ve(function(t){var e=p.delay;if(u.t=e+l,e<=t)return n(t-e);u.c=n},0,l),p=d[s]={tween:new v,time:l,timer:u,delay:t.delay,duration:t.duration,ease:t.ease,index:o},t=null,++d.count)}Cs.call=G.call,Cs.empty=G.empty,Cs.node=G.node,Cs.size=G.size,R.transition=function(t,e){return t&&t.transition?Es?t.transition(e):t:R.selection().transition(t)},(R.transition.prototype=Cs).select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=Y(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Ns(n,c,a,i,r[a][i]),e.push(n)):e.push(null)}return Ss(o,a,i)},Cs.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,l=[];t=X(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],h=-1,d=f.length;++h<d;)if(r=f[h]){a=r[s][o],n=t.call(r,r.__data__,h,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Ns(i,p,s,o,a),e.push(i)}return Ss(l,s,o)},Cs.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=st(t));for(var i=0,a=this.length;i<a;i++){r.push(e=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(n=o[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return Ss(r,this.namespace,this.id)},Cs.tween=function(e,n){var r=this.id,i=this.namespace;return arguments.length<2?this.node()[i][r].tween.get(e):lt(this,null==n?function(t){t[i][r].tween.remove(e)}:function(t){t[i][r].tween.set(e,n)})},Cs.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var r="transform"==t?La:ha,i=R.ns.qualify(t);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}return Ls(this,"attr."+t,e,i.local?function(n){return null==n?o:(n+="",function(){var e,t=this.getAttributeNS(i.space,i.local);return t!==n&&(e=r(t,n),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(n){return null==n?a:(n+="",function(){var e,t=this.getAttribute(i);return t!==n&&(e=r(t,n),function(t){this.setAttribute(i,e(t))})})})},Cs.attrTween=function(t,r){var i=R.ns.qualify(t);return this.tween("attr."+t,i.local?function(t,e){var n=r.call(this,t,e,this.getAttributeNS(i.space,i.local));return n&&function(t){this.setAttributeNS(i.space,i.local,n(t))}}:function(t,e){var n=r.call(this,t,e,this.getAttribute(i));return n&&function(t){this.setAttribute(i,n(t))}})},Cs.style=function(r,t,i){var e=arguments.length;if(e<3){if("string"!=typeof r){for(i in e<2&&(t=""),r)this.style(i,r[i],t);return this}i=""}function a(){this.style.removeProperty(r)}return Ls(this,"style."+r,t,function(n){return null==n?a:(n+="",function(){var e,t=N(this).getComputedStyle(this,null).getPropertyValue(r);return t!==n&&(e=ha(t,n),function(t){this.style.setProperty(r,e(t),i)})})})},Cs.styleTween=function(r,i,a){return arguments.length<3&&(a=""),this.tween("style."+r,function(t,e){var n=i.call(this,t,e,N(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(t){this.style.setProperty(r,n(t),a)}})},Cs.text=function(t){return Ls(this,"text",t,Rs)},Cs.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Cs.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof e&&(e=R.ease.apply(R,arguments)),lt(this,function(t){t[r][n].ease=e}))},Cs.delay=function(r){var i=this.id,a=this.namespace;return arguments.length<1?this.node()[a][i].delay:lt(this,"function"==typeof r?function(t,e,n){t[a][i].delay=+r.call(t,t.__data__,e,n)}:(r=+r,function(t){t[a][i].delay=r}))},Cs.duration=function(r){var i=this.id,a=this.namespace;return arguments.length<1?this.node()[a][i].duration:lt(this,"function"==typeof r?function(t,e,n){t[a][i].duration=Math.max(1,r.call(t,t.__data__,e,n))}:(r=Math.max(1,r),function(t){t[a][i].duration=r}))},Cs.each=function(r,e){var i=this.id,a=this.namespace;if(arguments.length<2){var t=Os,n=Es;try{Es=i,lt(this,function(t,e,n){Os=t[a][i],r.call(t,t.__data__,e,n)})}finally{Os=t,Es=n}}else lt(this,function(t){t=t[a][i];(t.event||(t.event=R.dispatch("start","end","interrupt"))).on(r,e)});return this},Cs.transition=function(){for(var t,e,n,r=this.id,i=++Ps,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(t=[]);for(var u,c=0,f=(u=this[s]).length;c<f;c++)(e=u[c])&&Ns(e,c,a,i,{time:(n=e[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Ss(o,a,i)},R.svg.axis=function(){var _,w=R.scale.linear(),k=Ds,M=6,T=6,A=3,S=[10],E=null;function n(t){t.each(function(){var t,e=R.select(this),n=this.__chart__||w,r=this.__chart__=w.copy(),i=null==E?r.ticks?r.ticks.apply(r,S):r.domain():E,a=null==_?r.tickFormat?r.tickFormat.apply(r,S):C:_,o=e.selectAll(".tick").data(i,r),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity",_t),l=R.transition(o.exit()).style("opacity",_t).remove(),u=R.transition(o.order()).style("opacity",1),c=Math.max(M,0)+A,f=To(r),h=e.selectAll(".domain").data([0]),d=(h.enter().append("path").attr("class","domain"),R.transition(h));s.append("line"),s.append("text");var p,g,y,m,v,b,x=s.select("line"),i=u.select("line"),e=o.select("text").text(a),h=s.select("text"),o=u.select("text"),a="top"===k||"left"===k?-1:1;"bottom"===k||"top"===k?(t=Is,p="x",y="y",g="x2",m="y2",e.attr("dy",a<0?"0em":".71em").style("text-anchor","middle"),d.attr("d","M"+f[0]+","+a*T+"V0H"+f[1]+"V"+a*T)):(t=Fs,p="y",y="x",g="y2",m="x2",e.attr("dy",".32em").style("text-anchor",a<0?"end":"start"),d.attr("d","M"+a*T+","+f[0]+"H0V"+f[1]+"H"+a*T)),x.attr(m,a*M),h.attr(y,a*c),i.attr(g,0).attr(m,a*M),o.attr(p,0).attr(y,a*c),r.rangeBand?(b=(v=r).rangeBand()/2,n=r=function(t){return v(t)+b}):n.rangeBand?n=r:l.call(t,r,n),s.call(t,n,r),u.call(t,r,r)})}return n.scale=function(t){return arguments.length?(w=t,n):w},n.orient=function(t){return arguments.length?(k=t in zs?t+"":Ds,n):k},n.ticks=function(){return arguments.length?(S=h(arguments),n):S},n.tickValues=function(t){return arguments.length?(E=t,n):E},n.tickFormat=function(t){return arguments.length?(_=t,n):_},n.tickSize=function(t){var e=arguments.length;return e?(M=+t,T=+arguments[e-1],n):M},n.innerTickSize=function(t){return arguments.length?(M=+t,n):M},n.outerTickSize=function(t){return arguments.length?(T=+t,n):T},n.tickPadding=function(t){return arguments.length?(A=+t,n):A},n.tickSubdivide=function(){return arguments.length&&n},n};var Ds="bottom",zs={top:1,right:1,bottom:1,left:1};function Is(t,n,r){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:r(t))+",0)"})}function Fs(t,n,r){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:r(t))+")"})}R.svg.brush=function(){var m,v,b=I(A,"brushstart","brush","brushend"),x=null,_=null,w=[0,0],k=[0,0],M=!0,T=!0,i=Us[0];function A(t){t.each(function(){var t=R.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(i,C);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Bs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",A.empty()?"none":null);var r,t=R.transition(t),e=R.transition(e);x&&(r=To(x),e.attr("x",r[0]).attr("width",r[1]-r[0]),E(t)),_&&(r=To(_),e.attr("y",r[0]).attr("height",r[1]-r[0]),O(t)),S(t)})}function S(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+w[+/e$/.test(t)]+","+k[+/^s/.test(t)]+")"})}function E(t){t.select(".extent").attr("x",w[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",w[1]-w[0])}function O(t){t.select(".extent").attr("y",k[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function a(){var l,t,n,r=this,e=R.select(R.event.target),i=b.of(r,arguments),a=R.select(r),o=e.datum(),s=!/^(n|s)$/.test(o)&&x,u=!/^(e|w)$/.test(o)&&_,c=e.classed("extent"),f=mt(r),h=R.mouse(r),d=R.select(N(r)).on("keydown.brush",function(){32==R.event.keyCode&&(c||(l=null,h[0]-=w[1],h[1]-=k[1],c=2),D())}).on("keyup.brush",function(){32==R.event.keyCode&&2==c&&(h[0]+=w[1],h[1]+=k[1],c=0,D())});function p(){var t=R.mouse(r),e=!1;n&&(t[0]+=n[0],t[1]+=n[1]),c||(R.event.altKey?(l=l||[(w[0]+w[1])/2,(k[0]+k[1])/2],h[0]=w[+(t[0]<l[0])],h[1]=k[+(t[1]<l[1])]):l=null),s&&g(t,x,0)&&(E(a),e=!0),u&&g(t,_,1)&&(O(a),e=!0),e&&(S(a),i({type:"brush",mode:c?"move":"resize"}))}function g(t,e,n){var r,i=To(e),a=i[0],o=i[1],s=h[n],e=n?k:w,i=e[1]-e[0];return c&&(a-=s,o-=i+s),t=(n?T:M)?Math.max(a,Math.min(o,t[n])):t[n],c?r=(t+=s)+i:(l&&(s=Math.max(a,Math.min(o,2*l[n]-t))),s<t?(r=t,t=s):r=s),e[0]!=t||e[1]!=r?(n?v=null:m=null,e[0]=t,e[1]=r,1):void 0}function y(){p(),a.style("pointer-events","all").selectAll(".resize").style("display",A.empty()?"none":null),R.select("body").style("cursor",null),d.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),f(),i({type:"brushend"})}R.event.changedTouches?d.on("touchmove.brush",p).on("touchend.brush",y):d.on("mousemove.brush",p).on("mouseup.brush",y),a.interrupt().selectAll("*").interrupt(),c?(h[0]=w[0]-h[0],h[1]=k[0]-h[1]):o?(t=+/w$/.test(o),o=+/^n/.test(o),n=[w[1-t]-h[0],k[1-o]-h[1]],h[0]=w[t],h[1]=k[o]):R.event.altKey&&(l=h.slice()),a.style("pointer-events","none").selectAll(".resize").style("display",null),R.select("body").style("cursor",e.style("cursor")),i({type:"brushstart"}),p()}return A.event=function(t){t.each(function(){var r=b.of(this,arguments),i={x:w,y:k,i:m,j:v},t=this.__chart__||i;this.__chart__=i,Es?R.select(this).transition().each("start.brush",function(){m=t.i,v=t.j,w=t.x,k=t.y,r({type:"brushstart"})}).tween("brush:brush",function(){var e=da(w,i.x),n=da(k,i.y);return m=v=null,function(t){w=i.x=e(t),k=i.y=n(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){m=i.i,v=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},A.x=function(t){return arguments.length?(i=Us[!(x=t)<<1|!_],A):x},A.y=function(t){return arguments.length?(i=Us[!x<<1|!(_=t)],A):_},A.clamp=function(t){return arguments.length?(x&&_?(M=!!t[0],T=!!t[1]):x?M=!!t:_&&(T=!!t),A):x&&_?[M,T]:x?M:_?T:null},A.extent=function(t){var e,n,r,i,a;return arguments.length?(x&&(e=t[0],n=t[1],_&&(e=e[0],n=n[0]),m=[e,n],x.invert&&(e=x(e),n=x(n)),n<e&&(a=e,e=n,n=a),e==w[0]&&n==w[1]||(w=[e,n])),_&&(r=t[0],i=t[1],x&&(r=r[1],i=i[1]),v=[r,i],_.invert&&(r=_(r),i=_(i)),i<r&&(a=r,r=i,i=a),r==k[0]&&i==k[1]||(k=[r,i])),A):(x&&(m?(e=m[0],n=m[1]):(e=w[0],n=w[1],x.invert&&(e=x.invert(e),n=x.invert(n)),n<e&&(a=e,e=n,n=a))),_&&(v?(r=v[0],i=v[1]):(r=k[0],i=k[1],_.invert&&(r=_.invert(r),i=_.invert(i)),i<r&&(a=r,r=i,i=a))),x&&_?[[e,r],[n,i]]:x?[e,n]:_&&[r,i])},A.clear=function(){return A.empty()||(w=[0,0],k=[0,0],m=v=null),A},A.empty=function(){return!!x&&w[0]==w[1]||!!_&&k[0]==k[1]},R.rebind(A,b,"on")};var Bs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Us=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],f=Se.format=a.timeFormat,a=(e=f.utc)("%Y-%m-%dT%H:%M:%S.%LZ");function Vs(t){return t.toISOString()}function Hs(e,i,t){function a(t){return e(t)}function o(t,e){var n=(t[1]-t[0])/e,r=R.bisect(Gs,n);return r==Gs.length?[i.year,Ro(t.map(function(t){return t/31536e6}),e)[2]]:r?i[n/Gs[r-1]<Gs[r]/n?r-1:r]:[Ws,Ro(t,e)[2]]}return a.invert=function(t){return qs(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain(t),a):e.domain().map(qs)},a.nice=function(e,n){var t=a.domain(),r=Mo(t),r=null==e?o(r,10):"number"==typeof e&&o(r,e);function i(t){return!isNaN(t)&&!e.range(t,qs(+t+1),n).length}return r&&(e=r[0],n=r[1]),a.domain(So(t,1<n?{floor:function(t){for(;i(t=e.floor(t));)t=qs(t-1);return t},ceil:function(t){for(;i(t=e.ceil(t));)t=qs(+t+1);return t}}:e))},a.ticks=function(t,e){var n=Mo(a.domain()),r=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],qs(+n[1]+1),e<1?1:e)},a.tickFormat=function(){return t},a.copy=function(){return Hs(e.copy(),i,t)},Po(a,e)}function qs(t){return new Date(t)}f.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Vs:a,Vs.parse=function(t){t=new Date(t);return isNaN(t)?null:t},Vs.toString=a.toString,Se.second=Pe(function(t){return new Ee(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Se.seconds=Se.second.range,Se.seconds.utc=Se.second.utc.range,Se.minute=Pe(function(t){return new Ee(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Se.minutes=Se.minute.range,Se.minutes.utc=Se.minute.utc.range,Se.hour=Pe(function(t){var e=t.getTimezoneOffset()/60;return new Ee(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Se.hours=Se.hour.range,Se.hours.utc=Se.hour.utc.range,Se.month=Pe(function(t){return(t=Se.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Se.months=Se.month.range,Se.months.utc=Se.month.utc.range;var Gs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ys=[[Se.second,1],[Se.second,5],[Se.second,15],[Se.second,30],[Se.minute,1],[Se.minute,5],[Se.minute,15],[Se.minute,30],[Se.hour,1],[Se.hour,3],[Se.hour,6],[Se.hour,12],[Se.day,1],[Se.day,2],[Se.week,1],[Se.month,1],[Se.month,3],[Se.year,1]],Xs=f.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",ur]]),Ws={range:function(t,e,n){return R.range(Math.ceil(t/n)*n,+e,n).map(qs)},floor:C,ceil:C};Ys.year=Se.year,Se.scale=function(){return Hs(R.scale.linear(),Ys,Xs)};var Zs=Ys.map(function(t){return[t[0].utc,t[1]]}),Ks=e.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",ur]]);function Qs(t){return JSON.parse(t.responseText)}function $s(t){var e=j.createRange();return e.selectNode(j.body),e.createContextualFragment(t.responseText)}Zs.year=Se.year.utc,Se.scale.utc=function(){return Hs(R.scale.linear(),Zs,Ks)},R.text=fe(function(t){return t.responseText}),R.json=function(t,e){return he(t,"application/json",Qs,e)},R.html=function(t,e){return he(t,"text/html",$s,e)},R.xml=fe(function(t){return t.responseXML}),"object"==typeof Js&&Js.exports?Js.exports=R:this.d3=R}()},{}],278:[function(t,e,n){"use strict";var r=t("../annotations/attributes"),i=t("../../plot_api/edit_types").overrideAll,t=t("../../plot_api/plot_template").templatedArray;e.exports=i(t("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":453,"../../plot_api/plot_template":460,"../annotations/attributes":284}],279:[function(t,e,n){"use strict";var i=t("../../lib"),a=t("../../plots/cartesian/axes");e.exports=function(t){for(var e=t.fullSceneLayout.annotations,n=0;n<e.length;n++)!function(t,e){var n=e.fullSceneLayout.domain,r=e.fullLayout._size,e={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},i.extendFlat(t._xa,e),a.setConvert(t._xa),t._xa._offset=r.l+n.x[0]*r.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*r.w*(n.x[1]-n.x[0])},t._ya={},i.extendFlat(t._ya,e),a.setConvert(t._ya),t._ya._offset=r.t+(1-n.y[1])*r.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*r.h*(n.y[1]-n.y[0])}}(e[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()}},{"../../lib":424,"../../plots/cartesian/axes":471}],280:[function(t,e,n){"use strict";var o=t("../../lib"),s=t("../../plots/cartesian/axes"),r=t("../../plots/array_container_defaults"),l=t("../annotations/common_defaults"),u=t("./attributes");function i(n,r,i,t){function a(t,e){return o.coerce(n,r,u,t,e)}function e(t){var e=t+"axis",n={_fullLayout:{}};return n._fullLayout[e]=i[e],s.coercePosition(r,n,a,t,t,.5)}a("visible")&&(l(n,r,t.fullLayout,a),e("x"),e("y"),e("z"),o.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",a("ax",-10),a("ay",-30),o.noneOrAll(n,r,["ax","ay"])))}e.exports=function(t,e,n){r(t,e,{name:"annotations",handleItemDefaults:i,fullLayout:n.fullLayout})}},{"../../lib":424,"../../plots/array_container_defaults":466,"../../plots/cartesian/axes":471,"../annotations/common_defaults":287,"./attributes":278}],281:[function(t,e,n){"use strict";var c=t("../annotations/draw").drawRaw,f=t("../../plots/gl3d/project"),h=["x","y","z"];e.exports=function(t){for(var e=t.fullSceneLayout,n=t.dataScale,r=e.annotations,i=0;i<r.length;i++){for(var a=r[i],o=!1,s=0;s<3;s++){var l=h[s],u=a[l],u=e[l+"axis"].r2fraction(u);if(u<0||1<u){o=!0;break}}o?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+i+'"]').remove():(a._pdata=f(t.glplot.cameraParams,[e.xaxis.r2l(a.x)*n[0],e.yaxis.r2l(a.y)*n[1],e.zaxis.r2l(a.z)*n[2]]),c(t.graphDiv,a,i,t.id,a._xa,a._ya))}}},{"../../plots/gl3d/project":511,"../annotations/draw":290}],282:[function(t,e,n){"use strict";var s=t("../../registry"),l=t("../../lib");e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:function(t,e){var n=s.subplotsRegistry.gl3d;if(!n)return;for(var r=n.attrRegex,i=Object.keys(t),a=0;a<i.length;a++){var o=i[a];r.test(o)&&(t[o].annotations||[]).length&&(l.pushUnique(e._basePlotModules,n),l.pushUnique(e._subplots.gl3d,o))}},convert:t("./convert"),draw:t("./draw")}},{"../../lib":424,"../../registry":525,"./attributes":278,"./convert":279,"./defaults":280,"./draw":281}],283:[function(t,e,n){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],284:[function(t,e,n){"use strict";var r=t("./arrow_paths"),i=t("../../plots/font_attributes"),a=t("../../plots/cartesian/constants"),o=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects");e.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":397,"../../plot_api/plot_template":460,"../../plots/cartesian/constants":477,"../../plots/font_attributes":499,"./arrow_paths":283}],285:[function(t,e,n){"use strict";var r=t("../../lib"),p=t("../../plots/cartesian/axes"),i=t("./draw").draw;function a(a){var t=a._fullLayout;r.filterVisible(t.annotations).forEach(function(t){var e=p.getFromId(a,t.xref),n=p.getFromId(a,t.yref),r=p.getRefType(t.xref),i=p.getRefType(t.yref);t._extremes={},"range"===r&&o(t,e),"range"===i&&o(t,n)})}function o(t,e){var n=e._id,r=n.charAt(0),i=t[r],a=t["a"+r],o=t[r+"ref"],s=t["a"+r+"ref"],l=t["_"+r+"padplus"],u=t["_"+r+"padminus"],c={x:1,y:-1}[r]*t[r+"shift"],f=3*t.arrowsize*t.arrowwidth||0,h=f+c,d=f-c,r=3*t.startarrowsize*t.arrowwidth||0,f=r+c,c=r-c;c=s===o?(s=p.findExtremes(e,[e.r2c(i)],{ppadplus:h,ppadminus:d}),o=p.findExtremes(e,[e.r2c(a)],{ppadplus:Math.max(l,f),ppadminus:Math.max(u,c)}),{min:[s.min[0],o.min[0]],max:[s.max[0],o.max[0]]}):(f=a?f+a:f,c=a?c-a:c,p.findExtremes(e,[e.r2c(i)],{ppadplus:Math.max(l,h,f),ppadminus:Math.max(u,d,c)})),t._extremes[n]=c}e.exports=function(t){var e=t._fullLayout;if(r.filterVisible(e.annotations).length&&t._fullData.length)return r.syncOrAsync([i,a],t)}},{"../../lib":424,"../../plots/cartesian/axes":471,"./draw":290}],286:[function(t,e,n){"use strict";var l=t("../../lib"),u=t("../../registry"),c=t("../../plot_api/plot_template").arrayEditor;function f(t,e){for(var n,r,i,a,o,s,l=t._fullLayout.annotations,u=[],c=[],f=[],h=(e||[]).length,d=0;d<l.length;d++)if(i=(r=l[d]).clicktoshow){for(n=0;n<h;n++)if(o=(a=e[n]).xaxis,s=a.yaxis,o._id===r.xref&&s._id===r.yref&&o.d2r(a.x)===p(r._xclick,o)&&s.d2r(a.y)===p(r._yclick,s)){(r.visible?"onout"===i?c:f:u).push(d);break}n===h&&r.visible&&"onout"===i&&c.push(d)}return{on:u,off:c,explicitOff:f}}function p(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}e.exports={hasClickToShow:function(t,e){e=f(t,e);return 0<e.on.length||0<e.explicitOff.length},onClick:function(t,e){var n,r,e=f(t,e),i=e.on,a=e.off.concat(e.explicitOff),o={},s=t._fullLayout.annotations;if(!i.length&&!a.length)return;for(n=0;n<i.length;n++)(r=c(t.layout,"annotations",s[i[n]])).modifyItem("visible",!0),l.extendFlat(o,r.getUpdateObj());for(n=0;n<a.length;n++)(r=c(t.layout,"annotations",s[a[n]])).modifyItem("visible",!1),l.extendFlat(o,r.getUpdateObj());return u.call("update",t,{},o)}}},{"../../lib":424,"../../plot_api/plot_template":460,"../../registry":525}],287:[function(t,e,n){"use strict";var c=t("../../lib"),f=t("../color");e.exports=function(t,e,n,r){r("opacity");var i=r("bgcolor"),a=r("bordercolor"),o=f.opacity(a);r("borderpad");var s,l,u=r("borderwidth"),a=r("showarrow");r("text",a?" ":n._dfltTitle.annotation),r("textangle"),c.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),a&&(-1!==(a=r("arrowside")).indexOf("end")&&(s=r("arrowhead"),l=r("arrowsize")),-1!==a.indexOf("start")&&(r("startarrowhead",s),r("startarrowsize",l)),r("arrowcolor",o?e.bordercolor:f.defaultLine),r("arrowwidth",2*(o&&u||1)),r("standoff"),r("startstandoff"));u=r("hovertext"),n=n.hoverlabel||{};u&&(i=r("hoverlabel.bgcolor",n.bgcolor||(f.opacity(i)?f.rgb(i):f.defaultLine)),i=r("hoverlabel.bordercolor",n.bordercolor||f.contrast(i)),c.coerceFont(r,"hoverlabel.font",{family:n.font.family,size:n.font.size,color:n.font.color||i})),r("captureevents",!!u)}},{"../../lib":424,"../color":294}],288:[function(t,e,n){"use strict";var f=t("fast-isnumeric"),h=t("../../lib/to_log_range");e.exports=function(t,r,e,i){r=r||{};var a="log"===e&&"linear"===r.type,e="linear"===e&&"log"===r.type;if(a||e)for(var o,s,n=t._fullLayout.annotations,l=r._id.charAt(0),u=0;u<n.length;u++)o=n[u],s="annotations["+u+"].",o[l+"ref"]===r._id&&c(l),o["a"+l+"ref"]===r._id&&c("a"+l);function c(t){var e=o[t],n=null,n=a?h(e,r.range):Math.pow(10,e);f(n)||(n=null),i(s+t,n)}}},{"../../lib/to_log_range":449,"fast-isnumeric":99}],289:[function(t,e,n){"use strict";var g=t("../../lib"),y=t("../../plots/cartesian/axes"),r=t("../../plots/array_container_defaults"),m=t("./common_defaults"),v=t("./attributes");function i(n,r,t){function e(t,e){return g.coerce(n,r,v,t,e)}var i=e("visible"),a=e("clicktoshow");if(i||a){m(n,r,t,e);for(var o=r.showarrow,s=["x","y"],l=[-10,-30],u={_fullLayout:t},c=0;c<2;c++){var f,h,d=s[c],p=y.coerceRef(n,r,u,d,"","paper");"paper"!==p&&y.getFromId(u,p)._annIndices.push(r._index),y.coercePosition(r,u,e,p,d,.5),o&&(f="a"+d,"pixel"!==(h=y.coerceRef(n,r,u,f,"pixel",["pixel","paper"]))&&h!==p&&(h=r[f]="pixel"),p="pixel"===h?l[c]:.4,y.coercePosition(r,u,e,h,f,p)),e(d+"anchor"),e(d+"shift")}g.noneOrAll(n,r,["x","y"]),o&&g.noneOrAll(n,r,["ax","ay"]),a&&(t=e("xclick"),a=e("yclick"),r._xclick=void 0===t?r.x:y.cleanPosition(t,u,r.xref),r._yclick=void 0===a?r.y:y.cleanPosition(a,u,r.yref))}}e.exports=function(t,e){r(t,e,{name:"annotations",handleItemDefaults:i})}},{"../../lib":424,"../../plots/array_container_defaults":466,"../../plots/cartesian/axes":471,"./attributes":284,"./common_defaults":287}],290:[function(t,e,n){"use strict";var o=t("d3"),it=t("../../registry"),r=t("../../plots/plots"),at=t("../../lib"),ot=at.strTranslate,st=t("../../plots/cartesian/axes"),lt=t("../color"),ut=t("../drawing"),s=t("../fx"),ct=t("../../lib/svg_text_utils"),ft=t("../../lib/setcursor"),ht=t("../dragelement"),l=t("../../plot_api/plot_template").arrayEditor,dt=t("./draw_arrow_head");function i(t,e){var n=t._fullLayout.annotations[e]||{},r=st.getFromId(t,n.xref),i=st.getFromId(t,n.yref);r&&r.setScale(),i&&i.setScale(),a(t,n,e,!1,r,i)}function pt(t,e,n,r,i){var a=i[n],i=i[n+"ref"],n=-1!==n.indexOf("y"),i="domain"===st.getRefType(i),r=n?r.h:r.w;return t?i?a+(n?-e:e)/t._length:t.p2r(t.r2p(a)+e):a+(n?-e:e)/r}function a(R,j,e,N,D,z){var I=R._fullLayout,F=R._fullLayout._size,B=R._context.edits,t=N?(r="annotation-"+N,N+".annotations"):(r="annotation","annotations"),t=l(R.layout,t,j),U=t.modifyBase,V=t.modifyItem,H=t.getUpdateObj;I._infolayer.selectAll("."+r+'[data-index="'+e+'"]').remove();var q,G,Y,X,W,Z,K,Q,$,J,tt,n,r,et,nt="clip"+I._uid+"_ann"+e;function rt(t){t={index:e,annotation:j._input,fullAnnotation:j,event:t};return N&&(t.subplotId=N),t}function i(t){return t.call(ut.font,n).attr({"text-anchor":{left:"start",right:"end"}[j.align]||"middle"}),ct.convertToTspans(t,R,a),t}function a(){var t=et.selectAll("a");1===t.size()&&t.text()===et.text()&&Z.insert("a",":first-child").attr({"xlink:xlink:href":t.attr("xlink:href"),"xlink:xlink:show":t.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild($.node());var e=Z.select(".annotation-text-math-group"),n=!e.empty(),r=ut.bBox((n?e:et).node()),i=r.width,a=r.height,o=j.width||i,s=j.height||a,l=Math.round(o+2*Q),u=Math.round(s+2*Q);function c(t,e){return"auto"===e&&(e=t<1/3?"left":2/3<t?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var f,h,d,p=!1,g=["x","y"],y=0;y<g.length;y++){var m,v,b,x,_,w=g[y],k=j[w+"ref"]||w,M=j["a"+w+"ref"],T={x:D,y:z}[w],A=(G+("x"===w?0:-90))*Math.PI/180,S=l*Math.cos(A),E=u*Math.sin(A),O=Math.abs(S)+Math.abs(E),C=j[w+"anchor"],P=j[w+"shift"]*("x"===w?1:-1),L=q[w],A=st.getRefType(k);A=T&&"domain"!==A?(((v=T.r2fraction(j[w]))<0||1<v)&&(M!==k||(v=T.r2fraction(j["a"+w]))<0||1<v)&&(p=!0),v=T._offset+T.r2p(j[w]),.5):(_="domain"===A,v="x"===w?(m=j[w],_?T._offset+T._length*m:v=F.l+F.w*m):(m=1-j[w],_?T._offset+T._length*m:v=F.t+F.h*m),j.showarrow?.5:m),j.showarrow?(L.head=v,_=j["a"+w],b=S*c(.5,j.xanchor)-E*c(.5,j.yanchor),x=M===k?("domain"===(x=st.getRefType(M))?("y"===w&&(_=1-_),L.tail=T._offset+T._length*_):"paper"===x?"y"===w?(_=1-_,L.tail=F.t+F.h*_):L.tail=F.l+F.w*_:L.tail=T._offset+T.r2p(_),b):(L.tail=v+_,b+_),L.text=L.tail+b,_=I["x"===w?"width":"height"],"paper"===k&&(L.head=at.constrain(L.head,1,_-1)),"pixel"===M&&(M=-Math.max(L.tail-3,L.text),_=Math.min(L.tail+3,L.text)-_,0<M?(L.tail+=M,L.text+=M):0<_&&(L.tail-=_,L.text-=_)),L.tail+=P,L.head+=P):(x=b=O*c(A,C),L.text=v+b),L.text+=P,b+=P,x+=P,j["_"+w+"padplus"]=O/2+x,j["_"+w+"padminus"]=O/2-x,j["_"+w+"size"]=O,j["_"+w+"shift"]=b}p?Z.remove():(t=f=0,"left"!==j.align&&(f=(o-i)*("center"===j.align?.5:1)),"top"!==j.valign&&(t=(s-a)*("middle"===j.valign?.5:1)),n?e.select("svg").attr({x:Q+f-1,y:Q+t}).call(ut.setClipUrl,J?nt:null,R):(t=Q+t-r.top,r=Q+f-r.left,et.call(ct.positionText,r,t).call(ut.setClipUrl,J?nt:null,R)),tt.select("rect").call(ut.setRect,Q,Q,o,s),$.call(ut.setRect,K/2,K/2,l-K,u-K),Z.call(ut.setTranslate,Math.round(q.x.text-l/2),Math.round(q.y.text-u/2)),X.attr({transform:"rotate("+G+","+q.x.text+","+q.y.text+")"}),h=function(t,e){Y.selectAll(".annotation-arrow-g").remove();var i,a,o,n=q.x.head,r=q.y.head,s=q.x.tail+t,l=q.y.tail+e,u=q.x.text+t,c=q.y.text+e,f=at.rotationXYMatrix(G,u,c),h=at.apply2DTransform(f),t=at.apply2DTransform2(f),e=+$.attr("width"),f=+$.attr("height"),u=u-.5*e,e=u+e,c=c-.5*f,f=c+f,e=[[u,c,u,f],[u,f,e,f],[e,f,e,c],[e,c,u,c]].map(t);e.reduce(function(t,e){return t^!!at.segmentsIntersect(n,r,n+1e6,r+1e6,e[0],e[1],e[2],e[3])},!1)||(e.forEach(function(t){t=at.segmentsIntersect(s,l,n,r,t[0],t[1],t[2],t[3]);t&&(s=t.x,l=t.y)}),u=j.arrowwidth,c=j.arrowcolor,t=j.arrowside,e=(i=Y.append("g").style({opacity:lt.opacity(c)}).classed("annotation-arrow-g",!0)).append("path").attr("d","M"+s+","+l+"L"+n+","+r).style("stroke-width",u+"px").call(lt.stroke,lt.rgb(c)),dt(e,t,j),B.annotationPosition&&e.node().parentNode&&!N&&(c=n,t=r,j.standoff&&(e=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-l,2)),c+=j.standoff*(s-n)/e,t+=j.standoff*(l-r)/e),u=i.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(s-c)+","+(l-t),transform:ot(c,t)}).style("stroke-width",u+6+"px").call(lt.stroke,"rgba(0,0,0,0)").call(lt.fill,"rgba(0,0,0,0)"),ht.init({element:u.node(),gd:R,prepFn:function(){var t=ut.getTranslate(Z);a=t.x,o=t.y,D&&D.autorange&&U(D._name+".autorange",!0),z&&z.autorange&&U(z._name+".autorange",!0)},moveFn:function(t,e){var n=h(a,o),r=n[0]+t,n=n[1]+e;Z.call(ut.setTranslate,r,n),V("x",pt(D,t,"x",F,j)),V("y",pt(z,e,"y",F,j)),j.axref===j.xref&&V("ax",pt(D,t,"ax",F,j)),j.ayref===j.yref&&V("ay",pt(z,e,"ay",F,j)),i.attr("transform",ot(t,e)),X.attr({transform:"rotate("+G+","+r+","+n+")"})},doneFn:function(){it.call("_guiRelayout",R,H());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})))},j.showarrow&&h(0,0),W&&ht.init({element:Z.node(),gd:R,prepFn:function(){d=X.attr("transform")},moveFn:function(t,e){var n,r,i,a="pointer";if(j.showarrow)j.axref===j.xref?V("ax",pt(D,t,"ax",F,j)):V("ax",j.ax+t),j.ayref===j.yref?V("ay",pt(z,e,"ay",F.w,j)):V("ay",j.ay+e),h(t,e);else{if(N)return;n=D?pt(D,t,"x",F,j):(r=j._xsize/F.w,n=j.x+(j._xshift-j.xshift)/F.w-r/2,ht.align(n+t/F.w,r,0,1,j.xanchor)),i=z?pt(z,e,"y",F,j):(i=j._ysize/F.h,r=j.y-(j._yshift+j.yshift)/F.h-i/2,ht.align(r-e/F.h,i,0,1,j.yanchor)),V("x",n),V("y",i),D&&z||(a=ht.getCursor(D?.5:n,z?.5:i,j.xanchor,j.yanchor))}X.attr({transform:ot(t,e)+d}),ft(Z,a)},clickFn:function(t,e){j.captureevents&&R.emit("plotly_clickannotation",rt(e))},doneFn:function(){ft(Z),it.call("_guiRelayout",R,H());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}}))}j._input&&!1!==j.visible?(q={x:{},y:{}},G=+j.textangle||0,Y=I._infolayer.append("g").classed(r,!0).attr("data-index",String(e)).style("opacity",j.opacity),X=Y.append("g").classed("annotation-text-g",!0),W=B[j.showarrow?"annotationTail":"annotationPosition"],r=j.captureevents||B.annotationText||W,Z=X.append("g").style("pointer-events",r?"all":null).call(ft,"pointer").on("click",function(){R._dragging=!1,R.emit("plotly_clickannotation",rt(o.event))}),j.hovertext&&Z.on("mouseover",function(){var t=j.hoverlabel,e=t.font,n=this.getBoundingClientRect(),r=R.getBoundingClientRect();s.loneHover({x0:n.left-r.left,x1:n.right-r.left,y:(n.top+n.bottom)/2-r.top,text:j.hovertext,color:t.bgcolor,borderColor:t.bordercolor,fontFamily:e.family,fontSize:e.size,fontColor:e.color},{container:I._hoverlayer.node(),outerContainer:I._paper.node(),gd:R})}).on("mouseout",function(){s.loneUnhover(I._hoverlayer.node())}),K=j.borderwidth,r=j.borderpad,Q=K+r,$=Z.append("rect").attr("class","bg").style("stroke-width",K+"px").call(lt.stroke,j.bordercolor).call(lt.fill,j.bgcolor),J=j.width||j.height,(tt=I._topclips.selectAll("#"+nt).data(J?[0]:[])).enter().append("clipPath").classed("annclip",!0).attr("id",nt).append("rect"),tt.exit().remove(),n=j.font,r=I._meta?at.templateString(j.text,I._meta):j.text,et=Z.append("text").classed("annotation-text",!0).text(r),B.annotationText?et.call(ct.makeEditable,{delegate:Z,gd:R}).call(i).on("edit",function(t){j.text=t,this.call(i),V("text",t),D&&D.autorange&&U(D._name+".autorange",!0),z&&z.autorange&&U(z._name+".autorange",!0),it.call("_guiRelayout",R,H())}):et.call(i)):o.selectAll("#"+nt).remove()}e.exports={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var n=0;n<e.annotations.length;n++)e.annotations[n].visible&&i(t,n);return r.previousPromises(t)},drawOne:i,drawRaw:a}},{"../../lib":424,"../../lib/setcursor":443,"../../lib/svg_text_utils":447,"../../plot_api/plot_template":460,"../../plots/cartesian/axes":471,"../../plots/plots":516,"../../registry":525,"../color":294,"../dragelement":313,"../drawing":316,"../fx":334,"./draw_arrow_head":291,d3:277}],291:[function(t,e,n){"use strict";var k=t("d3"),M=t("../color"),T=t("./arrow_paths"),t=t("../../lib"),A=t.strScale,S=t.strRotate,E=t.strTranslate;e.exports=function(i,t,a){var e,n,o=i.node(),r=T[a.arrowhead||0],s=T[a.startarrowhead||0],l=(a.arrowwidth||1)*(a.arrowsize||1),u=(a.arrowwidth||1)*(a.startarrowsize||1),c=0<=t.indexOf("start"),f=0<=t.indexOf("end"),h=r.backoff*l+a.standoff,d=s.backoff*u+a.startstandoff;if("line"===o.nodeName){e={x:+i.attr("x1"),y:+i.attr("y1")},n={x:+i.attr("x2"),y:+i.attr("y2")};var p,g=e.x-n.x,y=e.y-n.y,m=(p=Math.atan2(y,g))+Math.PI;if(h&&d&&h+d>Math.sqrt(g*g+y*y))return void _();if(h){if(g*g+y*y<h*h)return void _();var v=h*Math.cos(p),t=h*Math.sin(p);n.x+=v,n.y+=t,i.attr({x2:n.x,y2:n.y})}if(d){if(g*g+y*y<d*d)return void _();var b=d*Math.cos(p),x=d*Math.sin(p);e.x-=b,e.y-=x,i.attr({x1:e.x,y1:e.y})}}else if("path"===o.nodeName){g=o.getTotalLength();if(g<h+d)return void _();b=o.getPointAtLength(0),x=o.getPointAtLength(.1);p=Math.atan2(b.y-x.y,b.x-x.x),e=o.getPointAtLength(Math.min(d,g)),y="0px,"+d+"px,";b=o.getPointAtLength(g),x=o.getPointAtLength(g-.1);m=Math.atan2(b.y-x.y,b.x-x.x),n=o.getPointAtLength(Math.max(0,g-h)),y+=g-(y?d+h:h)+"px,"+g+"px",i.style("stroke-dasharray",y)}function _(){i.style("stroke-dasharray","0px,100px")}function w(t,e,n,r){t.path&&(t.noRotate&&(n=0),k.select(o.parentNode).append("path").attr({class:i.attr("class"),d:t.path,transform:E(e.x,e.y)+S(180*n/Math.PI)+A(r)}).style({fill:M.rgb(a.arrowcolor),"stroke-width":0}))}c&&w(s,e,p,u),f&&w(r,n,m,l)}},{"../../lib":424,"../color":294,"./arrow_paths":283,d3:277}],292:[function(t,e,n){"use strict";var r=t("./draw"),i=t("./click");e.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":483,"./attributes":284,"./calc_autorange":285,"./click":286,"./convert_coords":288,"./defaults":289,"./draw":290}],293:[function(t,e,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],294:[function(t,e,n){"use strict";var i=t("tinycolor2"),a=t("fast-isnumeric"),o=e.exports={},t=t("./attributes");o.defaults=t.defaults;var s=o.defaultLine=t.defaultLine;o.lightLine=t.lightLine;var l=o.background=t.background;function u(t){if(a(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var n=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return t;var r=n[1].trim().split(/\s*[\s,]\s*/),n="a"===e.charAt(3)&&4===r.length;if(!n&&3!==r.length)return t;for(var i=0;i<r.length;i++){if(!r[i].length)return t;if(r[i]=Number(r[i]),!(0<=r[i]))return t;if(3===i)1<r[i]&&(r[i]=1);else if(1<=r[i])return t}e=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return n?"rgba("+e+", "+r[3]+")":"rgb("+e+")"}o.tinyRGB=function(t){t=t.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},o.rgb=function(t){return o.tinyRGB(i(t))},o.opacity=function(t){return t?i(t).getAlpha():0},o.addOpacity=function(t,e){t=i(t).toRgb();return"rgba("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+", "+e+")"},o.combine=function(t,e){var n=i(t).toRgb();if(1===n.a)return i(t).toRgbString();e=i(e||l).toRgb(),e=1===e.a?e:{r:255*(1-e.a)+e.r*e.a,g:255*(1-e.a)+e.g*e.a,b:255*(1-e.a)+e.b*e.a},n={r:e.r*(1-n.a)+n.r*n.a,g:e.g*(1-n.a)+n.g*n.a,b:e.b*(1-n.a)+n.b*n.a};return i(n).toRgbString()},o.contrast=function(t,e,n){var r=i(t);return 1!==r.getAlpha()&&(r=i(o.combine(t,l))),(r.isDark()?e?r.lighten(e):l:n?r.darken(n):s).toString()},o.stroke=function(t,e){e=i(e);t.style({stroke:o.tinyRGB(e),"stroke-opacity":e.getAlpha()})},o.fill=function(t,e){e=i(e);t.style({fill:o.tinyRGB(e),"fill-opacity":e.getAlpha()})},o.clean=function(t){if(t&&"object"==typeof t)for(var e,n,r=Object.keys(t),i=0;i<r.length;i++)if(n=t[a=r[i]],"color"===a.substr(a.length-5))if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]=u(n[e]);else t[a]=u(n);else if("colorscale"===a.substr(a.length-10)&&Array.isArray(n))for(e=0;e<n.length;e++)Array.isArray(n[e])&&(n[e][1]=u(n[e][1]));else if(Array.isArray(n)){var a=n[0];if(!Array.isArray(a)&&a&&"object"==typeof a)for(e=0;e<n.length;e++)o.clean(n[e])}else n&&"object"==typeof n&&o.clean(n)}},{"./attributes":293,"fast-isnumeric":99,tinycolor2:651}],295:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/layout_attributes"),i=t("../../plots/font_attributes"),a=t("../../lib/extend").extendFlat,t=t("../../plot_api/edit_types").overrideAll;e.exports=t({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:a({},r.ticks,{dflt:""}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:i({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:i({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":417,"../../plot_api/edit_types":453,"../../plots/cartesian/layout_attributes":485,"../../plots/font_attributes":499}],296:[function(t,e,n){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],297:[function(t,e,n){"use strict";var o=t("../../lib"),s=t("../../plot_api/plot_template"),l=t("../../plots/cartesian/tick_value_defaults"),u=t("../../plots/cartesian/tick_mark_defaults"),c=t("../../plots/cartesian/tick_label_defaults"),f=t("./attributes");e.exports=function(t,e,n){var r=s.newContainer(e,"colorbar"),i=t.colorbar||{};function a(t,e){return o.coerce(i,r,f,t,e)}e=a("thicknessmode");a("thickness","fraction"===e?30/(n.width-n.margin.l-n.margin.r):30);t=a("lenmode");a("len","fraction"===t?1:n.height-n.margin.t-n.margin.b),a("x"),a("xanchor"),a("xpad"),a("y"),a("yanchor"),a("ypad"),o.noneOrAll(i,r,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");e=a("ticklabelposition");l(i,r,a,"linear");t={outerTicks:!1,font:n.font};-1!==e.indexOf("inside")&&(t.bgColor="black"),c(i,r,a,"linear",t),u(i,r,a,"linear",t),a("title.text",n._dfltTitle.colorbar),o.coerceFont(a,"title.font",n.font),a("title.side")}},{"../../lib":424,"../../plot_api/plot_template":460,"../../plots/cartesian/tick_label_defaults":492,"../../plots/cartesian/tick_mark_defaults":493,"../../plots/cartesian/tick_value_defaults":494,"./attributes":295}],298:[function(t,e,n){"use strict";var R=t("d3"),j=t("tinycolor2"),N=t("../../plots/plots"),f=t("../../registry"),D=t("../../plots/cartesian/axes"),h=t("../dragelement"),z=t("../../lib"),I=z.strTranslate,F=t("../../lib/extend").extendFlat,d=t("../../lib/setcursor"),B=t("../drawing"),U=t("../color"),V=t("../titles"),H=t("../../lib/svg_text_utils"),v=t("../colorscale/helpers").flipScale,q=t("../../plots/cartesian/axis_defaults"),G=t("../../plots/cartesian/position_defaults"),Y=t("../../plots/cartesian/layout_attributes"),r=t("../../constants/alignment"),X=r.LINE_SPACING,W=r.FROM_TL,Z=r.FROM_BR,K=t("./constants").cn;e.exports={draw:function(c){var t=c._fullLayout._infolayer.selectAll("g."+K.colorbar).data(function(t){var e,n,r,i,a=t._fullLayout,o=t.calcdata,s=[];function l(t){return F(t,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){"function"==typeof i.calc?i.calc(t,r,e):(e._fillgradient=n.reversescale?v(n.colorscale):n.colorscale,e._zrange=[n[i.min],n[i.max]])}for(var c,f=0;f<o.length;f++){var h=o[f],h=(r=h[0].trace)._module.colorbar;if(!0===r.visible&&h)for(var d=Array.isArray(h),p=d?h:[h],g=0;g<p.length;g++){var y=(i=p[g]).container;(n=y?r[y]:r)&&n.showscale&&((e=l(n.colorbar))._id="cb"+r.uid+(d&&y?"-"+y:""),e._traceIndex=r.index,e._propPrefix=(y?y+".":"")+"colorbar.",e._meta=r._meta,u(),s.push(e))}}for(c in a._colorAxes){var m;(n=a[c]).showscale&&(m=a._colorAxes[c],(e=l(n.colorbar))._id="cb"+c,e._propPrefix=c+".colorbar.",e._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==m[0]&&(r=m[1],i.calc=r._module.colorbar.calc),u(),s.push(e))}return s}(c),function(t){return t._id});t.enter().append("g").attr("class",function(t){return t._id}).classed(K.colorbar,!0),t.each(function(t){var e=R.select(this);z.ensureSingle(e,"rect",K.cbbg),z.ensureSingle(e,"g",K.cbfills),z.ensureSingle(e,"g",K.cblines),z.ensureSingle(e,"g",K.cbaxis,function(t){t.classed(K.crisp,!0)}),z.ensureSingle(e,"g",K.cbtitleunshift,function(t){t.append("g").classed(K.cbtitle,!0)}),z.ensureSingle(e,"rect",K.cboutline);var n,r,i,a,o,s,l,u=function(o,s,l){var i=l._fullLayout,u=i._size,t=s._fillcolor,c=s._line,e=s.title,f=e.side,h=s._zrange||R.extent(("function"==typeof t?t:c.color).domain()),d="function"==typeof c.color?c.color:function(){return c.color},p="function"==typeof t?t:function(){return t},n=s._levels,r=function(t,e){var n,r,i=t._levels,a=[],o=[],s=i.end+i.size/100,l=i.size,u=1.001*e[0]-.001*e[1],c=1.001*e[1]-.001*e[0];for(r=0;r<1e5&&(n=i.start+r*l,!(0<l?s<=n:n<=s));r++)u<n&&n<c&&a.push(n);if(t._fillgradient)o=[0];else if("function"==typeof t._fillcolor){var f=t._filllevels;if(f)for(s=f.end+f.size/100,l=f.size,r=0;r<1e5&&(n=f.start+r*l,!(0<l?s<=n:n<=s));r++)n>e[0]&&n<e[1]&&o.push(n);else(o=a.map(function(t){return t-i.size/2})).push(o[o.length-1]+i.size)}else t._fillcolor&&"string"==typeof t._fillcolor&&(o=[0]);i.size<0&&(a.reverse(),o.reverse());return{line:a,fill:o}}(s,h),g=r.fill,y=r.line,m=Math.round(s.thickness*("fraction"===s.thicknessmode?u.w:1)),a=m/u.w,v=Math.round(s.len*("fraction"===s.lenmode?u.h:1)),b=v/u.h,x=s.xpad/u.w,_=(s.borderwidth+s.outlinewidth)/2,w=s.ypad/u.h,k=Math.round(s.x*u.w+s.xpad),r=s.x-a*({middle:.5,right:1}[s.xanchor]||0),M=s.y+b*(({top:-.5,bottom:.5}[s.yanchor]||0)-.5),T=Math.round(u.h*(1-M)),A=T-v;s._lenFrac=b,s._thickFrac=a,s._xLeftFrac=r,s._yBottomFrac=M;var S=s._axis=function(t,e,n){var t=t._fullLayout,r={type:"linear",range:n,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,ticklabelposition:e.ticklabelposition,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,exponentformat:e.exponentformat,minexponent:e.minexponent,separatethousands:e.separatethousands,showexponent:e.showexponent,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,title:e.title,showline:!0,anchor:"free",side:"right",position:1},i={type:"linear",_id:"y"+e._id},e={letter:"y",font:t.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:t.calendar};function a(t,e){return z.coerce(r,i,Y,t,e)}return q(r,i,a,e,t),G(r,i,a,e),i}(l,s,h);S.position=s.x+x+a,-1!==["top","bottom"].indexOf(f)&&(S.title.side=f,S.titlex=s.x+x,S.titley=M+("top"===e.side?b-w:w));c.color&&"auto"===s.tickmode&&(S.tickmode="linear",S.tick0=n.start,r=n.size,a=z.constrain((T-A)/50,4,15)+1,1<(e=(h[1]-h[0])/((s.nticks||a)*r))&&(a=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),r*=a*z.roundUp(e/a,[2,5,10]),(Math.abs(n.start)/n.size+1e-6)%1<2e-6&&(S.tick0=0)),S.dtick=r);S.domain=[M+w,M+b-w],S.setScale(),o.attr("transform",I(Math.round(u.l),Math.round(u.t)));var E,O=o.select("."+K.cbtitleunshift).attr("transform",I(-Math.round(u.l),-Math.round(u.t))),C=o.select("."+K.cbaxis),P=0;function L(t,e){var n={propContainer:S,propName:s._propPrefix+"title",traceIndex:s._traceIndex,_meta:s._meta,placeholder:i._dfltTitle.colorbar,containerGroup:o.select("."+K.cbtitle)},r="h"===t.charAt(0)?t.substr(1):"h"+t;o.selectAll("."+r+",."+r+"-math-group").remove(),V.draw(l,t,F(n,e||{}))}return z.syncOrAsync([N.previousPromises,function(){var t,e;-1!==["top","bottom"].indexOf(f)&&(t=u.l+(s.x+x)*u.w,e=S.title.font.size,e="top"===f?(1-(M+b-w))*u.h+u.t+3+.75*e:(1-(M+w))*u.h+u.t-3-.25*e,L(S._id+"title",{attributes:{x:t,y:e,"text-anchor":"start"}}))},function(){var t,e;-1!==["top","bottom"].indexOf(f)&&(e=(a=o.select("."+K.cbtitle)).select("text"),r=[-s.outlinewidth/2,s.outlinewidth/2],t=a.select(".h"+S._id+"title-math-group").node(),i=15.6,e.node()&&(i=parseInt(e.node().style.fontSize,10)*X),t?i<(P=B.bBox(t).height)&&(r[1]-=(P-i)/2):e.node()&&!e.classed(K.jsPlaceholder)&&(P=B.bBox(e.node()).height),P&&(P+=5,"top"===f?(S.domain[1]-=P/u.h,r[1]*=-1):(S.domain[0]+=P/u.h,e=H.lineCount(e),r[1]+=(1-e)*i),a.attr("transform",I(r[0],r[1])),S.setScale())),o.selectAll("."+K.cbfills+",."+K.cblines).attr("transform",I(0,Math.round(u.h*(1-S.domain[1])))),C.attr("transform",I(0,Math.round(-u.t))),(i=o.select("."+K.cbfills).selectAll("rect."+K.cbfill).attr("style","").data(g)).enter().append("rect").classed(K.cbfill,!0).style("stroke","none"),i.exit().remove();var n=h.map(S.c2p).map(Math.round).sort(function(t,e){return t-e});i.each(function(t,e){e=[0===e?h[0]:(g[e]+g[e-1])/2,e===g.length-1?h[1]:(g[e]+g[e+1])/2].map(S.c2p).map(Math.round);e[1]=z.constrain(e[1]+(e[1]>e[0])?1:-1,n[0],n[1]);e=R.select(this).attr({x:k,width:Math.max(m,2),y:R.min(e),height:Math.max(R.max(e)-R.min(e),2)});s._fillgradient?B.gradient(e,l,s._id,"vertical",s._fillgradient,"fill"):(t=p(t).replace("e-",""),e.attr("fill",j(t).toHexString()))}),(a=o.select("."+K.cblines).selectAll("path."+K.cbline).data(c.color&&c.width?y:[])).enter().append("path").classed(K.cbline,!0),a.exit().remove(),a.each(function(t){R.select(this).attr("d","M"+k+","+(Math.round(S.c2p(t))+c.width/2%1)+"h"+m).call(B.lineGroupStyle,c.width,d(t),c.dash)}),C.selectAll("g."+S._id+"tick,path").remove();var r=k+m+(s.outlinewidth||0)/2-("outside"===s.ticks?1:0),i=D.calcTicks(S),a=D.getTickSigns(S)[2];return D.drawTicks(l,S,{vals:"inside"===S.ticks?D.clipEnds(S,i):i,layer:C,path:D.makeTickPath(S,r,a),transFn:D.makeTransTickFn(S)}),D.drawLabels(l,S,{vals:i,layer:C,transFn:D.makeTransTickLabelFn(S),labelFns:D.makeLabelFns(S,r)})},function(){var t,e;-1===["top","bottom"].indexOf(f)&&(e=S.title.font.size,t=S._offset+S._length/2,e=u.l+(S.position||0)*u.w+("right"===S.side?10+e*(S.showticklabels?1:.5):-10-e*(S.showticklabels?.5:0)),L("h"+S._id+"title",{avoid:{selection:R.select(l).selectAll("g."+S._id+"tick"),side:f,offsetLeft:u.l,offsetTop:0,maxShift:i.width},attributes:{x:e,y:t,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}}))},N.previousPromises,function(){var t=m+s.outlinewidth/2;-1===S.ticklabelposition.indexOf("inside")&&(t+=B.bBox(C.node()).width),(E=O.select("text")).node()&&!E.classed(K.jsPlaceholder)&&(i=(r=O.select(".h"+S._id+"title-math-group").node())&&-1!==["top","bottom"].indexOf(f)?B.bBox(r).width:B.bBox(O.node()).right-k-u.l,t=Math.max(t,i));var e=2*s.xpad+t+s.borderwidth+s.outlinewidth/2,n=T-A;o.select("."+K.cbbg).attr({x:k-s.xpad-(s.borderwidth+s.outlinewidth)/2,y:A-_,width:Math.max(e,2),height:Math.max(n+2*_,2)}).call(U.fill,s.bgcolor).call(U.stroke,s.bordercolor).style("stroke-width",s.borderwidth),o.selectAll("."+K.cboutline).attr({x:k,y:A+s.ypad+("top"===f?P:0),width:Math.max(m,2),height:Math.max(n-2*s.ypad-P,2)}).call(U.stroke,s.outlinecolor).style({fill:"none","stroke-width":s.outlinewidth});var r=({center:.5,right:1}[s.xanchor]||0)*e;o.attr("transform",I(u.l-r,u.t));var i={},t=W[s.yanchor],r=Z[s.yanchor];"pixels"===s.lenmode?(i.y=s.y,i.t=n*t,i.b=n*r):(i.t=i.b=0,i.yt=s.y+s.len*t,i.yb=s.y-s.len*r),t=W[s.xanchor],r=Z[s.xanchor],"pixels"===s.thicknessmode?(i.x=s.x,i.l=e*t,i.r=e*r):(e=e-m,i.l=e*t,i.r=e*r,i.xl=s.x-s.thickness*t,i.xr=s.x+s.thickness*r),N.autoMargin(l,s._id,i)}],l)}(e,t,c);u&&u.then&&(c._promises||[]).push(u),c._context.edits.colorbarPosition&&(n=e,r=t,l=(i=c)._fullLayout._size,h.init({element:n.node(),gd:i,prepFn:function(){a=n.attr("transform"),d(n)},moveFn:function(t,e){n.attr("transform",a+I(t,e)),o=h.align(r._xLeftFrac+t/l.w,r._thickFrac,0,1,r.xanchor),s=h.align(r._yBottomFrac-e/l.h,r._lenFrac,0,1,r.yanchor);e=h.getCursor(o,s,r.xanchor,r.yanchor);d(n,e)},doneFn:function(){var t;d(n),void 0!==o&&void 0!==s&&((t={})[r._propPrefix+"x"]=o,t[r._propPrefix+"y"]=s,void 0!==r._traceIndex?f.call("_guiRestyle",i,t,r._traceIndex):f.call("_guiRelayout",i,t))}}))}),t.exit().each(function(t){N.autoMargin(c,t._id)}).remove(),t.order()}}},{"../../constants/alignment":396,"../../lib":424,"../../lib/extend":417,"../../lib/setcursor":443,"../../lib/svg_text_utils":447,"../../plots/cartesian/axes":471,"../../plots/cartesian/axis_defaults":473,"../../plots/cartesian/layout_attributes":485,"../../plots/cartesian/position_defaults":488,"../../plots/plots":516,"../../registry":525,"../color":294,"../colorscale/helpers":305,"../dragelement":313,"../drawing":316,"../titles":389,"./constants":296,d3:277,tinycolor2:651}],299:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t){return r.isPlainObject(t.colorbar)}},{"../../lib":424}],300:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":295,"./defaults":297,"./draw":298,"./has_colorbar":299}],301:[function(t,e,n){"use strict";var d=t("../colorbar/attributes"),p=t("../../lib/regex").counter,g=t("./scales.js").scales;Object.keys(g);function y(t){return"`"+t+"`"}e.exports=function(t,e){t=t||"";var n,r=(e=e||{}).cLetter||"c",i="onlyIfNumerical"in e?e.onlyIfNumerical:Boolean(t),a="noScale"in e?e.noScale:"marker.line"===t,o="showScaleDflt"in e?e.showScaleDflt:"z"===r,s="string"==typeof e.colorscaleDflt?g[e.colorscaleDflt]:null,l=e.editTypeOverride||"",u=t?t+".":"",c="colorAttr"in e?(n=e.colorAttr,e.colorAttr):"in "+y(u+(n={z:"z",c:"color"}[r])),f=r+"auto",h=r+"min",t=r+"max",i=r+"mid",c=(y(u+f),y(u+h),y(u+t),{});c[h]=c[t]=void 0;r={};r[f]=!1;u={};return"color"===n&&(u.color={valType:"color",arrayOk:!0,editType:l||"style"},e.anim&&(u.color.anim=!0)),u[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c},u[h]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:r},u[t]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:r},u[i]={valType:"number",dflt:null,editType:"calc",impliedEdits:c},u.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},u.autocolorscale={valType:"boolean",dflt:!1!==e.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},u.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(u.showscale={valType:"boolean",dflt:o,editType:"calc"},u.colorbar=d),e.noColorAxis||(u.coloraxis={valType:"subplotid",regex:p("coloraxis"),dflt:null,editType:"calc"}),u}},{"../../lib/regex":439,"../colorbar/attributes":295,"./scales.js":309}],302:[function(t,e,n){"use strict";var c=t("fast-isnumeric"),f=t("../../lib"),h=t("./helpers").extractOpts;e.exports=function(t,e,n){var r=t._fullLayout,i=n.vals,a=n.containerStr,o=a?f.nestedProperty(e,a).get():e,s=h(o),l=!1!==s.auto,u=s.min,t=s.max,n=s.mid,a=function(){return f.aggNums(Math.min,null,i)},e=function(){return f.aggNums(Math.max,null,i)};void 0===u?u=a():l&&(u=o._colorAx&&c(u)?Math.min(u,a()):a()),void 0===t?t=e():l&&(t=o._colorAx&&c(t)?Math.max(t,e()):e()),l&&void 0!==n&&(n-u<t-n?u=n-(t-n):t-n<n-u&&(t=n+(n-u))),u===t&&(u-=.5,t+=.5),s._sync("min",u),s._sync("max",t),s.autocolorscale&&(r=u*t<0?r.colorscale.diverging:0<=u?r.colorscale.sequential:r.colorscale.sequentialminus,s._sync("colorscale",r))}},{"../../lib":424,"./helpers":305,"fast-isnumeric":99}],303:[function(t,e,n){"use strict";var u=t("../../lib"),c=t("./helpers").hasColorscale,f=t("./helpers").extractOpts;e.exports=function(t,i){function a(t,e){var n=t["_"+e];void 0!==n&&(t[e]=n)}function e(t,e){var n,r=e.container?u.nestedProperty(t,e.container).get():t;r&&(r.coloraxis?r._colorAx=i[r.coloraxis]:(!(t=(n=f(r)).auto)&&void 0!==n.min||a(r,e.min),!t&&void 0!==n.max||a(r,e.max),n.autocolorscale&&a(r,"colorscale")))}for(var n,r=0;r<t.length;r++){var o=t[r],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)e(o,s[l]);else e(o,s);c(o,"marker.line")&&e(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(n in i._colorAxes)e(i[n],{min:"cmin",max:"cmax"})}},{"../../lib":424,"./helpers":305}],304:[function(t,e,n){"use strict";var b=t("fast-isnumeric"),x=t("../../lib"),_=t("../colorbar/has_colorbar"),w=t("../colorbar/defaults"),k=t("./scales").isValid,M=t("../../registry").traceIs;function T(t,e){var n=e.slice(0,e.length-1);return e?x.nestedProperty(t,n).get()||{}:t}e.exports=function t(e,n,r,i,a){var o=a.prefix,s=a.cLetter,l="_module"in n,u=T(e,o),c=T(n,o),f=T(n._template||{},o)||{},h=function(){return delete e.coloraxis,delete n.coloraxis,t(e,n,r,i,a)};if(l){var d=r._colorAxes||{},p=i(o+"coloraxis");if(p){var g=M(n,"contour")&&x.nestedProperty(n,"contours.coloring").get()||"heatmap",y=d[p];return void(y?(y[2].push(h),y[0]!==g&&(y[0]=!1,x.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" ")))):d[p]=[g,n,[h]])}}g=u[s+"min"],h=u[s+"max"],h=b(g)&&b(h)&&g<h;i(o+s+"auto",!h)?i(o+s+"mid"):(i(o+s+"min"),i(o+s+"max"));var m,v,h=u.colorscale,s=f.colorscale;void 0!==h&&(m=!k(h)),void 0!==s&&(m=!k(s)),i(o+"autocolorscale",m),i(o+"colorscale"),i(o+"reversescale"),"marker.line."!==o&&(o&&l&&(v=_(u)),i(o+"showscale",v)&&(o&&f&&(c._template=f),w(u,c,r)))}},{"../../lib":424,"../../registry":525,"../colorbar/defaults":297,"../colorbar/has_colorbar":299,"./scales":309,"fast-isnumeric":99}],305:[function(t,e,n){"use strict";var u=t("d3"),c=t("tinycolor2"),f=t("fast-isnumeric"),o=t("../../lib"),h=t("../color"),s=t("./scales").isValid;var l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],d=["min","max","mid","auto"];function p(t){var n,e,r=t._colorAx,i=r||t,a={};for(s=0;s<l.length;s++)a[e=l[s]]=i[e];if(r)for(n="c",s=0;s<d.length;s++)a[e=d[s]]=i["c"+e];else{for(var o,s=0;s<d.length;s++)((o="c"+(e=d[s]))in i||(o="z"+e)in i)&&(a[e]=i[o]);n=o.charAt(0)}return a._sync=function(t,e){t=-1!==d.indexOf(t)?n+t:t;i[t]=i["_"+t]=e},a}function r(t){for(var t=p(t),e=t.min,n=t.max,r=t.reversescale?g(t.colorscale):t.colorscale,i=r.length,a=new Array(i),o=new Array(i),s=0;s<i;s++){var l=r[s];a[s]=e+l[0]*(n-e),o[s]=l[1]}return{domain:a,range:o}}function g(t){for(var e=t.length,n=new Array(e),r=e-1,i=0;0<=r;r--,i++){var a=t[r];n[i]=[1-a[0],a[1]]}return n}function i(t,e){e=e||{};for(var n=t.domain,r=t.range,i=r.length,a=new Array(i),o=0;o<i;o++){var s=c(r[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l=u.scale.linear().domain(n).range(a).clamp(!0),n=e.noNumericCheck,e=e.returnArray,e=n&&e?l:n?function(t){return y(l(t))}:e?function(t){return f(t)?l(t):c(t).isValid()?t:h.defaultLine}:function(t){return f(t)?y(l(t)):c(t).isValid()?t:h.defaultLine};return e.domain=l.domain,e.range=function(){return r},e}function y(t){t={r:t[0],g:t[1],b:t[2],a:t[3]};return c(t).toRgbString()}e.exports={hasColorscale:function(t,e,n){var r=(t=e?o.nestedProperty(t,e).get()||{}:t)[n||"color"],i=!1;if(o.isArrayOrTypedArray(r))for(var a=0;a<r.length;a++)if(f(r[a])){i=!0;break}return o.isPlainObject(t)&&(i||!0===t.showscale||f(t.cmin)&&f(t.cmax)||s(t.colorscale)||o.isPlainObject(t.colorbar))},extractOpts:p,extractScale:r,flipScale:g,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(t,e){return i(r(t),e)}}},{"../../lib":424,"../color":294,"./scales":309,d3:277,"fast-isnumeric":99,tinycolor2:651}],306:[function(t,e,n){"use strict";var r=t("./scales"),i=t("./helpers");e.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},{"./attributes":301,"./calc":302,"./cross_trace_defaults":303,"./defaults":304,"./helpers":305,"./layout_attributes":307,"./layout_defaults":308,"./scales":309}],307:[function(t,e,n){"use strict";var r=t("../../lib/extend").extendFlat,i=t("./attributes"),t=t("./scales").scales;e.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:t.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:t.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:t.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":417,"./attributes":301,"./scales":309}],308:[function(t,e,n){"use strict";var c=t("../../lib"),f=t("../../plot_api/plot_template"),h=t("./layout_attributes"),d=t("./defaults");e.exports=function(n,r){function t(t,e){return c.coerce(n,r,h,t,e)}t("colorscale.sequential"),t("colorscale.sequentialminus"),t("colorscale.diverging");var i,a,e,o=r._colorAxes;function s(t,e){return c.coerce(i,a,h.coloraxis,t,e)}for(e in o){var l=o[e];if(l[0])i=n[e]||{},(a=f.newContainer(r,e,"coloraxis"))._name=e,d(i,a,r,s,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete r._colorAxes[e]}}}},{"../../lib":424,"../../plot_api/plot_template":460,"./defaults":304,"./layout_attributes":307}],309:[function(t,e,n){"use strict";var i=t("tinycolor2"),r={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=r.RdBu;function o(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var n=0;n<t.length;n++){var r=t[n];if(2!==r.length||+r[0]<e||!i(r[1]).isValid())return!1;e=+r[0]}return!0}e.exports={scales:r,defaultScale:a,get:function(e,n){return n=n||a,e?("string"==typeof e&&(t(),"string"==typeof e&&t()),o(e)?e:n):n;function t(){try{e=r[e]||JSON.parse(e)}catch(t){e=n}}},isValid:function(t){return void 0!==r[t]||o(t)}}},{tinycolor2:651}],310:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){t=(t-n)/(r-n),r=t+e/(r-n),n=(t+r)/2;return"left"===i||"bottom"===i?t:"center"===i||"middle"===i?n:"right"===i||"top"===i?r:t<2/3-n?t:4/3-n<r?r:n}},{}],311:[function(t,e,n){"use strict";var i=t("../../lib"),a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(t,e,n,r){return t="left"===n?0:"center"===n?1:"right"===n?2:i.constrain(Math.floor(3*t),0,2),e="bottom"===r?0:"middle"===r?1:"top"===r?2:i.constrain(Math.floor(3*e),0,2),a[e][t]}},{"../../lib":424}],312:[function(t,e,n){"use strict";n.selectMode=function(t){return"lasso"===t||"select"===t},n.drawMode=function(t){return"drawclosedpath"===t||"drawopenpath"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},n.openMode=function(t){return"drawline"===t||"drawopenpath"===t},n.rectMode=function(t){return"select"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},n.freeMode=function(t){return"lasso"===t||"drawclosedpath"===t||"drawopenpath"===t},n.selectingOrDrawing=function(t){return n.freeMode(t)||n.rectMode(t)}},{}],313:[function(t,e,n){"use strict";var r=t("mouse-event-offset"),v=t("has-hover"),b=t("has-passive-events"),x=t("../../lib").removeElement,_=t("../../plots/cartesian/constants"),w=e.exports={};w.align=t("./align"),w.getCursor=t("./cursor");t=t("./unhover");function k(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function M(t){return r(t.changedTouches?t.changedTouches[0]:t,document.body)}w.unhover=t.wrapped,w.unhoverRaw=t.raw,w.init=function(i){var n,r,a,o,s,l,u,c,f=i.gd,h=1,d=f._context.doubleClickDelay,p=i.element;f._mouseDownTime||(f._mouseDownTime=0),p.style.pointerEvents="all",p.onmousedown=t,b?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=t,p.addEventListener("touchstart",t,{passive:!1})):p.ontouchstart=t;var g=i.clampFn||function(t,e,n){return Math.abs(t)<n&&(t=0),Math.abs(e)<n&&(e=0),[t,e]};function t(t){f._dragged=!1,f._dragging=!0;var e=M(t);n=e[0],r=e[1],u=t.target,c=2===(l=t).buttons||t.ctrlKey,void 0===t.clientX&&void 0===t.clientY&&(t.clientX=n,t.clientY=r),(a=(new Date).getTime())-f._mouseDownTime<d?h+=1:(h=1,f._mouseDownTime=a),i.prepFn&&i.prepFn(t,n,r),v&&!c?(s=k()).style.cursor=window.getComputedStyle(p).cursor:v||(s=document,o=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor),document.addEventListener("mouseup",m),document.addEventListener("touchend",m),!1!==i.dragmode&&(t.preventDefault(),document.addEventListener("mousemove",y),document.addEventListener("touchmove",y,{passive:!1}))}function y(t){t.preventDefault();var e=M(t),t=i.minDrag||_.MINDRAG,e=g(e[0]-n,e[1]-r,t),t=e[0],e=e[1];(t||e)&&(f._dragged=!0,w.unhover(f)),f._dragged&&i.moveFn&&!c&&(f._dragdata={element:p,dx:t,dy:e},i.moveFn(t,e))}function m(e){if(delete f._dragdata,!1!==i.dragmode&&(e.preventDefault(),document.removeEventListener("mousemove",y),document.removeEventListener("touchmove",y)),document.removeEventListener("mouseup",m),document.removeEventListener("touchend",m),v?x(s):o&&(s.documentElement.style.cursor=o,o=null),f._dragging){if(f._dragging=!1,(new Date).getTime()-f._mouseDownTime>d&&(h=Math.max(h-1,1)),f._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(h,l),!c){try{n=new MouseEvent("click",e)}catch(t){var n,r=M(e);(n=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,r[0],r[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}u.dispatchEvent(n)}f._dragging=!1,f._dragged=!1}else f._dragged=!1}},w.coverSlip=k},{"../../lib":424,"../../plots/cartesian/constants":477,"./align":310,"./cursor":311,"./unhover":314,"has-hover":195,"has-passive-events":196,"mouse-event-offset":247}],314:[function(t,e,n){"use strict";var i=t("../../lib/events"),r=t("../../lib/throttle"),a=t("../../lib/dom").getGraphDiv,o=t("../fx/constants"),s=e.exports={};s.wrapped=function(t,e,n){(t=a(t))._fullLayout&&r.clear(t._fullLayout._uid+o.HOVERID),s.raw(t,e,n)},s.raw=function(t,e){var n=t._fullLayout,r=t._hoverdata;(e=e||{}).target&&!1===i.triggerHandler(t,"plotly_beforehover",e)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&r&&t.emit("plotly_unhover",{event:e,points:r}))}},{"../../lib/dom":415,"../../lib/events":416,"../../lib/throttle":448,"../fx/constants":328}],315:[function(t,e,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],316:[function(t,e,n){"use strict";var h=t("d3"),i=t("fast-isnumeric"),d=t("tinycolor2"),v=t("../../registry"),p=t("../color"),r=t("../colorscale"),b=t("../../lib"),l=b.strTranslate,f=t("../../lib/svg_text_utils"),a=t("../../constants/xmlns_namespaces"),u=t("../../constants/alignment").LINE_SPACING,x=t("../../constants/interactions").DESELECTDIM,o=t("../../traces/scatter/subtypes"),s=t("../../traces/scatter/make_bubble_size_func"),g=t("../../components/fx/helpers").appendArrayPointValue,y=e.exports={};y.font=function(t,e,n,r){b.isPlainObject(e)&&(r=e.color,n=e.size,e=e.family),e&&t.style("font-family",e),n+1&&t.style("font-size",n+"px"),r&&t.call(p.fill,r)},y.setPosition=function(t,e,n){t.attr("x",e).attr("y",n)},y.setSize=function(t,e,n){t.attr("width",e).attr("height",n)},y.setRect=function(t,e,n,r,i){t.call(y.setPosition,e,n).call(y.setSize,r,i)},y.translatePoint=function(t,e,n,r){n=n.c2p(t.x),t=r.c2p(t.y);return!!(i(n)&&i(t)&&e.node())&&("text"===e.node().nodeName?e.attr("x",n).attr("y",t):e.attr("transform",l(n,t)),!0)},y.translatePoints=function(t,n,r){t.each(function(t){var e=h.select(this);y.translatePoint(t,e,n,r)})},y.hideOutsideRangePoint=function(t,e,n,r,i,a){e.attr("display",n.isPtWithinRange(t,i)&&r.isPtWithinRange(t,a)?null:"none")},y.hideOutsideRangePoints=function(r,t){var i,a;t._hasClipOnAxisFalse&&(i=t.xaxis,a=t.yaxis,r.each(function(t){var t=t[0].trace,e=t.xcalendar,n=t.ycalendar,t=v.traceIs(t,"bar-like")?".bartext":".point,.textpoint";r.selectAll(t).each(function(t){y.hideOutsideRangePoint(t,h.select(this),i,a,e,n)})}))},y.crispRound=function(t,e,n){return e&&i(e)?t._context.staticPlot?e:e<1?1:Math.round(e):n||0},y.singleLineStyle=function(t,e,n,r,i){e.style("fill","none");t=(((t||[])[0]||{}).trace||{}).line||{},n=n||t.width||0,i=i||t.dash||"";p.stroke(e,r||t.color),y.dashLine(e,i,n)},y.lineGroupStyle=function(t,r,i,a){t.style("fill","none").each(function(t){var e=(((t||[])[0]||{}).trace||{}).line||{},n=r||e.width||0,t=a||e.dash||"";h.select(this).call(p.stroke,i||e.color).call(y.dashLine,t,n)})},y.dashLine=function(t,e,n){n=+n||0,e=y.dashStyle(e,n),t.style({"stroke-dasharray":e,"stroke-width":n+"px"})},y.dashStyle=function(t,e){e=+e||1;e=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=e+"px,"+e+"px":"dash"===t?t=3*e+"px,"+3*e+"px":"longdash"===t?t=5*e+"px,"+5*e+"px":"dashdot"===t?t=3*e+"px,"+e+"px,"+e+"px,"+e+"px":"longdashdot"===t&&(t=5*e+"px,"+2*e+"px,"+e+"px,"+2*e+"px"),t},y.singleFillStyle=function(t){var e=(((h.select(t.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;e&&t.call(p.fill,e)},y.fillGroupStyle=function(t){t.style("stroke-width",0).each(function(t){var e=h.select(this);t[0].trace&&e.call(p.fill,t[0].trace.fillcolor)})};var c=t("./symbol_defs");y.symbolNames=[],y.symbolFuncs=[],y.symbolNeedLines={},y.symbolNoDot={},y.symbolNoFill={},y.symbolList=[],Object.keys(c).forEach(function(t){var e=c[t],n=e.n;y.symbolList.push(n,String(n),t,n+100,String(n+100),t+"-open"),y.symbolNames[n]=t,y.symbolFuncs[n]=e.f,e.needLine&&(y.symbolNeedLines[n]=!0),e.noDot?y.symbolNoDot[n]=!0:y.symbolList.push(n+200,String(n+200),t+"-dot",n+300,String(n+300),t+"-open-dot"),e.noFill&&(y.symbolNoFill[n]=!0)});var m=y.symbolNames.length;function _(t,e){var n=t%100;return y.symbolFuncs[n](e)+(200<=t?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}y.symbolNumber=function(t){var e;return i(t)?t=+t:"string"==typeof t&&((e=0)<t.indexOf("-open")&&(e=100,t=t.replace("-open","")),0<t.indexOf("-dot")&&(e+=200,t=t.replace("-dot","")),0<=(t=y.symbolNames.indexOf(t))&&(t+=e)),m<=t%100||400<=t?0:Math.floor(Math.max(t,0))};var e={x1:1,x2:0,y1:0,y2:0},t={x1:0,x2:0,y1:1,y2:0},w=h.format("~.1f"),k={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:e},horizontalreversed:{node:"linearGradient",attrs:e,reversed:!0},vertical:{node:"linearGradient",attrs:t},verticalreversed:{node:"linearGradient",attrs:t,reversed:!0}};y.gradient=function(t,e,n,r,i,a){for(var o=i.length,s=k[r],l=new Array(o),u=0;u<o;u++)s.reversed?l[o-1-u]=[w(100*(1-i[u][0])),i[u][1]]:l[u]=[w(100*i[u][0]),i[u][1]];var c=e._fullLayout,f="g"+c._uid+"-"+n,r=c._defs.select(".gradients").selectAll("#"+f).data([r+l.join(";")],b.identity);r.exit().remove(),r.enter().append(s.node).each(function(){var t=h.select(this);s.attrs&&t.attr(s.attrs),t.attr("id",f);t=t.selectAll("stop").data(l);t.exit().remove(),t.enter().append("stop"),t.each(function(t){var e=d(t[1]);h.select(this).attr({offset:t[0]+"%","stop-color":p.tinyRGB(e),"stop-opacity":e.getAlpha()})})}),t.style(a,R(f,e)).style(a+"-opacity",null);a=function(t){return"."+t.attr("class").replace(/\s/g,".")},t=a(h.select(t.node().parentNode))+">"+a(t);c._gradientUrlQueryParts[t]=1},y.initGradients=function(t){t=t._fullLayout;b.ensureSingle(t._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),t._gradientUrlQueryParts={}},y.pointStyle=function(t,e,n){var r;t.size()&&(r=y.makePointStyleFns(e),t.each(function(t){y.singlePointStyle(t,h.select(this),e,r,n)}))},y.singlePointStyle=function(t,e,n,r,i){var a=n.marker,o=a.line;e.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(t):void 0===t.mo?a.opacity:t.mo),r.ms2mrc&&(l="various"===t.ms||"various"===a.size?3:r.ms2mrc(t.ms),t.mrc=l,r.selectedSizeFn&&(l=t.mrc=r.selectedSizeFn(t)),f=y.symbolNumber(t.mx||a.symbol)||0,t.om=100<=f%200,e.attr("d",_(f,l)));var s,l,u,c,f=!1;t.so?(u=o.outlierwidth,c=o.outliercolor,s=a.outliercolor):(l=(o||{}).width,u=(t.mlw+1||l+1||(t.trace?(t.trace.marker.line||{}).width:0)+1)-1||0,c="mlc"in t?t.mlcc=r.lineScale(t.mlc):b.isArrayOrTypedArray(o.color)?p.defaultLine:o.color,b.isArrayOrTypedArray(a.color)&&(s=p.defaultLine,f=!0),s="mc"in t?t.mcc=r.markerScale(t.mc):a.color||"rgba(0,0,0,0)",r.selectedColorFn&&(s=r.selectedColorFn(t))),t.om?e.call(p.stroke,s).style({"stroke-width":(u||1)+"px",fill:"none"}):(e.style("stroke-width",(t.isBlank?0:u)+"px"),o=a.gradient,(r=t.mgt)?f=!0:r=o&&o.type,Array.isArray(r)&&(r=r[0],k[r]||(r=0)),r&&"none"!==r?((a=t.mgc)?f=!0:a=o.color,n=n.uid,f&&(n+="-"+t.i),y.gradient(e,i,n,r,[[0,a],[1,s]],"fill")):p.fill(e,s),u&&p.stroke(e,c))},y.makePointStyleFns=function(t){var e={},n=t.marker;return e.markerScale=y.tryColorscale(n,""),e.lineScale=y.tryColorscale(n,"line"),v.traceIs(t,"symbols")&&(e.ms2mrc=o.isBubble(t)?s(t):function(){return(n.size||6)/2}),t.selectedpoints&&b.extendFlat(e,y.makeSelectedPointStyleFns(t)),e},y.makeSelectedPointStyleFns=function(t){var e={},n=t.selected||{},r=t.unselected||{},i=t.marker||{},a=n.marker||{},n=r.marker||{},r=i.opacity,o=a.opacity,s=n.opacity,l=void 0!==o,u=void 0!==s;(b.isArrayOrTypedArray(r)||l||u)&&(e.selectedOpacityFn=function(t){var e=void 0===t.mo?i.opacity:t.mo;return t.selected?l?o:e:u?s:x*e});var c=i.color,f=a.color,h=n.color;(f||h)&&(e.selectedColorFn=function(t){var e=t.mcc||c;return t.selected?f||e:h||e});var d=i.size,p=a.size,g=n.size,y=void 0!==p,m=void 0!==g;return v.traceIs(t,"symbols")&&(y||m)&&(e.selectedSizeFn=function(t){var e=t.mrc||d/2;return t.selected?y?p/2:e:m?g/2:e}),e},y.makeSelectedTextStyleFns=function(t){var e={},n=t.selected||{},r=t.unselected||{},i=(t.textfont||{}).color,a=(n.textfont||{}).color,o=(r.textfont||{}).color;return e.selectedTextColorFn=function(t){var e=t.tc||i;return t.selected?a||e:o||(a?e:p.addOpacity(e,x))},e},y.selectedPointStyle=function(t,e){var i,a,r;t.size()&&e.selectedpoints&&(i=y.makeSelectedPointStyleFns(e),a=e.marker||{},r=[],i.selectedOpacityFn&&r.push(function(t,e){t.style("opacity",i.selectedOpacityFn(e))}),i.selectedColorFn&&r.push(function(t,e){p.fill(t,i.selectedColorFn(e))}),i.selectedSizeFn&&r.push(function(t,e){var n=e.mx||a.symbol||0,r=i.selectedSizeFn(e);t.attr("d",_(y.symbolNumber(n),r)),e.mrc2=r}),r.length&&t.each(function(t){for(var e=h.select(this),n=0;n<r.length;n++)r[n](e,t)}))},y.tryColorscale=function(t,e){e=e?b.nestedProperty(t,e).get():t;if(e){t=e.color;if((e.colorscale||e._colorAx)&&b.isArrayOrTypedArray(t))return r.makeColorScaleFuncFromTrace(e)}return b.identity};var M={start:1,end:-1,middle:0,bottom:1,top:-1};function T(t,e,n,r){var i=h.select(t.node().parentNode),a=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",o=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",s=r?r/.8+1:0,e=(f.lineCount(t)-1)*u+1,r=M[o]*s,n=.75*n+M[a]*s+(M[a]-1)*e*n/2;t.attr("text-anchor",o),i.attr("transform",l(r,n))}function A(t,e){e=t.ts||e.textfont.size;return i(e)&&0<e?e:0}y.textPointStyle=function(t,o,s){var l,u,c;t.size()&&(o.selectedpoints&&(l=y.makeSelectedTextStyleFns(o).selectedTextColorFn),u=o.texttemplate,c=s._fullLayout,t.each(function(t){var e,n,r,i=h.select(this),a=u?b.extractOption(t,o,"txt","texttemplate"):b.extractOption(t,o,"tx","text");a||0===a?(u&&(e=o._module.formatLabels?o._module.formatLabels(t,o,c):{},g(n={},o,t.i),r=o._meta||{},a=b.texttemplateString(a,e,c._d3locale,n,t,r)),e=t.tp||o.textposition,n=A(t,o),r=l?l(t):t.tc||o.textfont.color,i.call(y.font,t.tf||o.textfont.family,n,r).text(a).call(f.convertToTspans,s).call(T,e,n,t.mrc)):i.remove()}))},y.selectedTextStyle=function(t,a){var o;t.size()&&a.selectedpoints&&(o=y.makeSelectedTextStyleFns(a),t.each(function(t){var e=h.select(this),n=o.selectedTextColorFn(t),r=t.tp||a.textposition,i=A(t,a);p.fill(e,n),T(e,r,i,t.mrc2||t.mrc)}))};var S=.5;function E(t,e,n,r){var i=t[0]-e[0],a=t[1]-e[1],o=n[0]-e[0],s=n[1]-e[1],t=Math.pow(i*i+a*a,S/2),n=Math.pow(o*o+s*s,S/2),o=(n*n*i-t*t*o)*r,s=(n*n*a-t*t*s)*r,r=3*n*(t+n),n=3*t*(t+n);return[[h.round(e[0]+(r&&o/r),2),h.round(e[1]+(r&&s/r),2)],[h.round(e[0]-(n&&o/n),2),h.round(e[1]-(n&&s/n),2)]]}y.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");for(var n="M"+t[0],r=[],i=1;i<t.length-1;i++)r.push(E(t[i-1],t[i],t[i+1],e));for(n+="Q"+r[0][0]+" "+t[1],i=2;i<t.length-1;i++)n+="C"+r[i-2][1]+" "+r[i-1][0]+" "+t[i];return n+="Q"+r[t.length-3][1]+" "+t[t.length-1]},y.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";for(var n="M"+t[0],r=t.length-1,i=[E(t[r],t[0],t[1],e)],a=1;a<r;a++)i.push(E(t[a-1],t[a],t[a+1],e));for(i.push(E(t[r-1],t[r],t[0],e)),a=1;a<=r;a++)n+="C"+i[a-1][1]+" "+i[a][0]+" "+t[a];return n+="C"+i[r][1]+" "+i[0][0]+" "+t[0]+"Z"};function O(t,e){return"L"+h.round(e[0],2)+","+h.round(e[1],2)}var C={hv:function(t,e){return"H"+h.round(e[0],2)+"V"+h.round(e[1],2)},vh:function(t,e){return"V"+h.round(e[1],2)+"H"+h.round(e[0],2)},hvh:function(t,e){return"H"+h.round((t[0]+e[0])/2,2)+"V"+h.round(e[1],2)+"H"+h.round(e[0],2)},vhv:function(t,e){return"V"+h.round((t[1]+e[1])/2,2)+"H"+h.round(e[0],2)+"V"+h.round(e[1],2)}};y.steps=function(t){var r=C[t]||O;return function(t){for(var e="M"+h.round(t[0][0],2)+","+h.round(t[0][1],2),n=1;n<t.length;n++)e+=r(t[n-1],t[n]);return e}},y.makeTester=function(){var t=b.ensureSingleById(h.select("body"),"svg","js-plotly-tester",function(t){t.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),e=b.ensureSingle(t,"path","js-reference-point",function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});y.tester=t,y.testref=e},y.savedBBoxes={};var P=0;function L(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}function R(t,e){if(!t)return null;e=e._context;return"url('"+(!e._exportedPlot&&e._baseUrl||"")+"#"+t+"')"}y.bBox=function(t,e,n){var r,i;if(n=n||L(t)){if(u=y.savedBBoxes[n])return b.extendFlat({},u)}else if(1===t.childNodes.length){var a=t.childNodes[0];if(n=L(a)){var o=+a.getAttribute("x")||0,s=+a.getAttribute("y")||0,l=a.getAttribute("transform");if(!l){a=y.bBox(a,!1,n);return o&&(a.left+=o,a.right+=o),s&&(a.top+=s,a.bottom+=s),a}if(n+="~"+o+"~"+s+"~"+l,u=y.savedBBoxes[n])return b.extendFlat({},u)}}e?r=t:(i=y.tester.node(),r=t.cloneNode(!0),i.appendChild(r)),h.select(r).attr("transform",null).call(f.positionText,0,0);var u=r.getBoundingClientRect(),t=y.testref.node().getBoundingClientRect();e||i.removeChild(r);t={height:u.height,width:u.width,left:u.left-t.left,top:u.top-t.top,right:u.right-t.left,bottom:u.bottom-t.top};return 1e4<=P&&(y.savedBBoxes={},P=0),n&&(y.savedBBoxes[n]=t),P++,b.extendFlat({},t)},y.setClipUrl=function(t,e,n){t.attr("clip-path",R(e,n))},y.getTranslate=function(t){t=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+t[0]||0,y:+t[1]||0}},y.setTranslate=function(t,e,n){var r=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",r=t[r]("transform")||"";return e=e||0,n=n||0,r=r.replace(/(\btranslate\(.*?\);?)/,"").trim(),r=(r+=l(e,n)).trim(),t[i]("transform",r),r},y.getScale=function(t){t=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+t[0]||1,y:+t[1]||1}},y.setScale=function(t,e,n){var r=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",r=t[r]("transform")||"";return e=e||1,n=n||1,r=r.replace(/(\bscale\(.*?\);?)/,"").trim(),r=(r+="scale("+e+","+n+")").trim(),t[i]("transform",r),r};var j=/\s*sc.*/;y.setPointGroupScale=function(t,e,n){var r;e=e||1,n=n||1,t&&(r=1===e&&1===n?"":"scale("+e+","+n+")",t.each(function(){var t=(this.getAttribute("transform")||"").replace(j,""),t=(t+=r).trim();this.setAttribute("transform",t)}))};var N=/translate\([^)]*\)\s*$/;y.setTextPointsScale=function(t,i,a){t&&t.each(function(){var t,e,n=h.select(this),r=n.select("text");r.node()&&(t=parseFloat(r.attr("x")||0),e=parseFloat(r.attr("y")||0),r=(n.attr("transform")||"").match(N),e=1===i&&1===a?[]:[l(t,e),"scale("+i+","+a+")",l(-t,-e)],r&&e.push(r),n.attr("transform",e.join("")))})}},{"../../components/fx/helpers":330,"../../constants/alignment":396,"../../constants/interactions":401,"../../constants/xmlns_namespaces":403,"../../lib":424,"../../lib/svg_text_utils":447,"../../registry":525,"../../traces/scatter/make_bubble_size_func":594,"../../traces/scatter/subtypes":602,"../color":294,"../colorscale":306,"./symbol_defs":317,d3:277,"fast-isnumeric":99,tinycolor2:651}],317:[function(t,e,n){"use strict";var u=t("d3");e.exports={circle:{n:0,f:function(t){t=u.round(t,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(t){t=u.round(t,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(t){t=u.round(1.3*t,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(t){var e=u.round(.4*t,2),t=u.round(1.2*t,2);return"M"+t+","+e+"H"+e+"V"+t+"H-"+e+"V"+e+"H-"+t+"V-"+e+"H-"+e+"V-"+t+"H"+e+"V-"+e+"H"+t+"Z"}},x:{n:4,f:function(t){var e=u.round(.8*t/Math.sqrt(2),2),n="l"+e+","+e,r="l"+e+",-"+e,i="l-"+e+",-"+e,t="l-"+e+","+e;return"M0,"+e+n+r+i+r+i+t+i+t+n+t+n+"Z"}},"triangle-up":{n:5,f:function(t){var e=u.round(2*t/Math.sqrt(3),2);return"M-"+e+","+u.round(t/2,2)+"H"+e+"L0,-"+u.round(t,2)+"Z"}},"triangle-down":{n:6,f:function(t){var e=u.round(2*t/Math.sqrt(3),2);return"M-"+e+",-"+u.round(t/2,2)+"H"+e+"L0,"+u.round(t,2)+"Z"}},"triangle-left":{n:7,f:function(t){var e=u.round(2*t/Math.sqrt(3),2);return"M"+u.round(t/2,2)+",-"+e+"V"+e+"L-"+u.round(t,2)+",0Z"}},"triangle-right":{n:8,f:function(t){var e=u.round(2*t/Math.sqrt(3),2);return"M-"+u.round(t/2,2)+",-"+e+"V"+e+"L"+u.round(t,2)+",0Z"}},"triangle-ne":{n:9,f:function(t){var e=u.round(.6*t,2),t=u.round(1.2*t,2);return"M-"+t+",-"+e+"H"+e+"V"+t+"Z"}},"triangle-se":{n:10,f:function(t){var e=u.round(.6*t,2),t=u.round(1.2*t,2);return"M"+e+",-"+t+"V"+e+"H-"+t+"Z"}},"triangle-sw":{n:11,f:function(t){var e=u.round(.6*t,2),t=u.round(1.2*t,2);return"M"+t+","+e+"H-"+e+"V-"+t+"Z"}},"triangle-nw":{n:12,f:function(t){var e=u.round(.6*t,2),t=u.round(1.2*t,2);return"M-"+e+","+t+"V-"+e+"H"+t+"Z"}},pentagon:{n:13,f:function(t){var e=u.round(.951*t,2),n=u.round(.588*t,2),r=u.round(-t,2),i=u.round(-.309*t,2);return"M"+e+","+i+"L"+n+","+u.round(.809*t,2)+"H-"+n+"L-"+e+","+i+"L0,"+r+"Z"}},hexagon:{n:14,f:function(t){var e=u.round(t,2),n=u.round(t/2,2),t=u.round(t*Math.sqrt(3)/2,2);return"M"+t+",-"+n+"V"+n+"L0,"+e+"L-"+t+","+n+"V-"+n+"L0,-"+e+"Z"}},hexagon2:{n:15,f:function(t){var e=u.round(t,2),n=u.round(t/2,2),t=u.round(t*Math.sqrt(3)/2,2);return"M-"+n+","+t+"H"+n+"L"+e+",0L"+n+",-"+t+"H-"+n+"L-"+e+",0Z"}},octagon:{n:16,f:function(t){var e=u.round(.924*t,2),t=u.round(.383*t,2);return"M-"+t+",-"+e+"H"+t+"L"+e+",-"+t+"V"+t+"L"+t+","+e+"H-"+t+"L-"+e+","+t+"V-"+t+"Z"}},star:{n:17,f:function(t){var e=1.4*t,n=u.round(.225*e,2),r=u.round(.951*e,2),i=u.round(.363*e,2),a=u.round(.588*e,2),o=u.round(-e,2),s=u.round(-.309*e,2),l=u.round(.118*e,2),t=u.round(.809*e,2);return"M"+n+","+s+"H"+r+"L"+i+","+l+"L"+a+","+t+"L0,"+u.round(.382*e,2)+"L-"+a+","+t+"L-"+i+","+l+"L-"+r+","+s+"H-"+n+"L0,"+o+"Z"}},hexagram:{n:18,f:function(t){var e=u.round(.66*t,2),n=u.round(.38*t,2),t=u.round(.76*t,2);return"M-"+t+",0l-"+n+",-"+e+"h"+t+"l"+n+",-"+e+"l"+n+","+e+"h"+t+"l-"+n+","+e+"l"+n+","+e+"h-"+t+"l-"+n+","+e+"l-"+n+",-"+e+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(t){var e=u.round(t*Math.sqrt(3)*.8,2),n=u.round(.8*t,2),r=u.round(1.6*t,2),t=u.round(4*t,2),t="A "+t+","+t+" 0 0 1 ";return"M-"+e+","+n+t+e+","+n+t+"0,-"+r+t+"-"+e+","+n+"Z"}},"star-triangle-down":{n:20,f:function(t){var e=u.round(t*Math.sqrt(3)*.8,2),n=u.round(.8*t,2),r=u.round(1.6*t,2),t=u.round(4*t,2),t="A "+t+","+t+" 0 0 1 ";return"M"+e+",-"+n+t+"-"+e+",-"+n+t+"0,"+r+t+e+",-"+n+"Z"}},"star-square":{n:21,f:function(t){var e=u.round(1.1*t,2),t=u.round(2*t,2),t="A "+t+","+t+" 0 0 1 ";return"M-"+e+",-"+e+t+"-"+e+","+e+t+e+","+e+t+e+",-"+e+t+"-"+e+",-"+e+"Z"}},"star-diamond":{n:22,f:function(t){var e=u.round(1.4*t,2),t=u.round(1.9*t,2),t="A "+t+","+t+" 0 0 1 ";return"M-"+e+",0"+t+"0,"+e+t+e+",0"+t+"0,-"+e+t+"-"+e+",0Z"}},"diamond-tall":{n:23,f:function(t){var e=u.round(.7*t,2),t=u.round(1.4*t,2);return"M0,"+t+"L"+e+",0L0,-"+t+"L-"+e+",0Z"}},"diamond-wide":{n:24,f:function(t){var e=u.round(1.4*t,2),t=u.round(.7*t,2);return"M0,"+t+"L"+e+",0L0,-"+t+"L-"+e+",0Z"}},hourglass:{n:25,f:function(t){t=u.round(t,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(t){t=u.round(t,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(t){t=u.round(t,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t){var e=u.round(t,2),t=u.round(t/Math.sqrt(2),2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t){t=u.round(t,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t){t=u.round(t,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t){t=u.round(1.3*t,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t){var e=u.round(1.3*t,2),t=u.round(.65*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM-"+t+",-"+t+"L"+t+","+t+"M-"+t+","+t+"L"+t+",-"+t},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t){t=u.round(1.4*t,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t){t=u.round(t,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t){var e=u.round(1.2*t,2),t=u.round(.85*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t){var e=u.round(t/2,2),t=u.round(t,2);return"M"+e+","+t+"V-"+t+"m-"+t+",0V"+t+"M"+t+","+e+"H-"+t+"m0,-"+t+"H"+t},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t){var e=u.round(1.2*t,2),n=u.round(1.6*t,2),t=u.round(.8*t,2);return"M-"+e+","+t+"L0,0M"+e+","+t+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t){var e=u.round(1.2*t,2),n=u.round(1.6*t,2),t=u.round(.8*t,2);return"M-"+e+",-"+t+"L0,0M"+e+",-"+t+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t){var e=u.round(1.2*t,2),n=u.round(1.6*t,2),t=u.round(.8*t,2);return"M"+t+","+e+"L0,0M"+t+",-"+e+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t){var e=u.round(1.2*t,2),n=u.round(1.6*t,2),t=u.round(.8*t,2);return"M-"+t+","+e+"L0,0M-"+t+",-"+e+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t){t=u.round(1.4*t,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t){t=u.round(1.4*t,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t){t=u.round(t,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t){t=u.round(t,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(t){var e=u.round(t,2);return"M0,0L-"+e+","+u.round(2*t,2)+"H"+e+"Z"},noDot:!0},"arrow-down":{n:46,f:function(t){var e=u.round(t,2);return"M0,0L-"+e+",-"+u.round(2*t,2)+"H"+e+"Z"},noDot:!0},"arrow-left":{n:47,f:function(t){var e=u.round(2*t,2),t=u.round(t,2);return"M0,0L"+e+",-"+t+"V"+t+"Z"},noDot:!0},"arrow-right":{n:48,f:function(t){var e=u.round(2*t,2),t=u.round(t,2);return"M0,0L-"+e+",-"+t+"V"+t+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(t){var e=u.round(t,2);return"M-"+e+",0H"+e+"M0,0L-"+e+","+u.round(2*t,2)+"H"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(t){var e=u.round(t,2);return"M-"+e+",0H"+e+"M0,0L-"+e+",-"+u.round(2*t,2)+"H"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(t){var e=u.round(2*t,2),t=u.round(t,2);return"M0,-"+t+"V"+t+"M0,0L"+e+",-"+t+"V"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(t){var e=u.round(2*t,2),t=u.round(t,2);return"M0,-"+t+"V"+t+"M0,0L-"+e+",-"+t+"V"+t+"Z"},needLine:!0,noDot:!0}}},{d3:277}],318:[function(t,e,n){"use strict";e.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],319:[function(t,e,n){"use strict";var h=t("fast-isnumeric"),s=t("../../registry"),d=t("../../plots/cartesian/axes"),p=t("../../lib"),g=t("./compute_error");function l(t,e,n,r){var i=e["error_"+r]||{},a=[];if(i.visible&&-1!==["linear","log"].indexOf(n.type)){for(var o=g(i),s=0;s<t.length;s++){var l=t[s],u=l.i;if(void 0===u)u=s;else if(null===u)continue;var c,f=l[r];h(n.c2l(f))&&(c=o(f,u),h(c[0])&&h(c[1])&&(u=l[r+"s"]=f-c[0],c=l[r+"h"]=f+c[1],a.push(u,c)))}i=n._id,e=e._extremes[i],i=d.findExtremes(n,a,p.extendFlat({tozero:e.opts.tozero},{padded:!0}));e.min=e.min.concat(i.min),e.max=e.max.concat(i.max)}}e.exports=function(t){for(var e=t.calcdata,n=0;n<e.length;n++){var r,i,a=e[n],o=a[0].trace;!0===o.visible&&s.traceIs(o,"errorBarsOK")&&(r=d.getFromId(t,o.xaxis),i=d.getFromId(t,o.yaxis),l(a,o,r,"x"),l(a,o,i,"y"))}}},{"../../lib":424,"../../plots/cartesian/axes":471,"../../registry":525,"./compute_error":320,"fast-isnumeric":99}],320:[function(t,e,n){"use strict";function s(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}e.exports=function(t){var e=t.type,n=t.symmetric;if("data"===e){var r=t.array||[];if(n)return function(t,e){e=+r[e];return[e,e]};var i=t.arrayminus||[];return function(t,e){var n=+r[e],e=+i[e];return isNaN(n)&&isNaN(e)?[NaN,NaN]:[e||0,n||0]}}var a=s(e,t.value),o=s(e,t.valueminus);return n||void 0===t.valueminus?function(t){t=a(t);return[t,t]}:function(t){return[o(t),a(t)]}}},{}],321:[function(t,e,n){"use strict";var l=t("fast-isnumeric"),u=t("../../registry"),c=t("../../lib"),f=t("../../plot_api/plot_template"),h=t("./attributes");e.exports=function(t,e,n,r){var i="error_"+r.axis,a=f.newContainer(e,i),o=t[i]||{};function s(t,e){return c.coerce(o,a,h,t,e)}!1!==s("visible",void 0!==o.array||void 0!==o.value||"sqrt"===o.type)&&(t=!0,"sqrt"!==(i=s("type","array"in o?"data":"percent"))&&(t=s("symmetric",!(("data"===i?"arrayminus":"valueminus")in o))),"data"===i?(s("array"),s("traceref"),t||(s("arrayminus"),s("tracerefminus"))):"percent"!==i&&"constant"!==i||(s("value"),t||s("valueminus")),t="copy_"+r.inherit+"style",r.inherit&&(e["error_"+r.inherit]||{}).visible&&s(t,!(o.color||l(o.thickness)||l(o.width))),r.inherit&&a[t]||(s("color",n),s("thickness"),s("width",u.traceIs(e,"gl3d")?0:4)))}},{"../../lib":424,"../../plot_api/plot_template":460,"../../registry":525,"./attributes":318,"fast-isnumeric":99}],322:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/edit_types").overrideAll,a=t("./attributes"),o={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;a={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a),error_z:r.extendFlat({},a)};delete a.error_x.copy_ystyle,delete a.error_y.copy_ystyle,delete a.error_z.copy_ystyle,delete a.error_z.copy_zstyle,e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:i(a,"calc","nested"),scattergl:i(o,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:function(t,e,n){(e.error_y||{}).visible&&(n.yerr=t.yh-t.y,e.error_y.symmetric||(n.yerrneg=t.y-t.ys));(e.error_x||{}).visible&&(n.xerr=t.xh-t.x,e.error_x.symmetric||(n.xerrneg=t.x-t.xs))}}},{"../../lib":424,"../../plot_api/edit_types":453,"./attributes":318,"./calc":319,"./compute_error":320,"./defaults":321,"./plot":323,"./style":324}],323:[function(t,e,n){"use strict";var h=t("d3"),d=t("fast-isnumeric"),p=t("../drawing"),g=t("../../traces/scatter/subtypes");e.exports=function(r,t,i,l){var u=i.xaxis,c=i.yaxis,f=l&&0<l.duration;t.each(function(t){var e=t[0].trace,a=e.error_x||{},o=e.error_y||{};e.ids&&(n=function(t){return t.id});var s=g.hasMarkers(e)&&0<e.marker.maxdisplayed;o.visible||a.visible||(t=[]);var n=h.select(this).selectAll("g.errorbar").data(t,n);n.exit().remove(),t.length&&(a.visible||n.selectAll("path.xerror").remove(),o.visible||n.selectAll("path.yerror").remove(),n.style("opacity",1),t=n.enter().append("g").classed("errorbar",!0),f&&t.style("opacity",0).transition().duration(l.duration).style("opacity",1),p.setClipUrl(n,i.layerClipId,r),n.each(function(t){var e,n,r=h.select(this),i=function(t,e,n){var r={x:e.c2p(t.x),y:n.c2p(t.y)};void 0!==t.yh&&(r.yh=n.c2p(t.yh),r.ys=n.c2p(t.ys),d(r.ys)||(r.noYS=!0,r.ys=n.c2p(t.ys,!0)));void 0!==t.xh&&(r.xh=e.c2p(t.xh),r.xs=e.c2p(t.xs),d(r.xs)||(r.noXS=!0,r.xs=e.c2p(t.xs,!0)));return r}(t,u,c);s&&!t.vis||(t=r.select("path.yerror"),o.visible&&d(i.x)&&d(i.yh)&&d(i.ys)?(n=o.width,e="M"+(i.x-n)+","+i.yh+"h"+2*n+"m-"+n+",0V"+i.ys,i.noYS||(e+="m-"+n+",0h"+2*n),!t.size()?t=r.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):f&&(t=t.transition().duration(l.duration).ease(l.easing)),t.attr("d",e)):t.remove(),n=r.select("path.xerror"),a.visible&&d(i.y)&&d(i.xh)&&d(i.xs)?(t=(a.copy_ystyle?o:a).width,e="M"+i.xh+","+(i.y-t)+"v"+2*t+"m0,-"+t+"H"+i.xs,i.noXS||(e+="m0,-"+t+"v"+2*t),!n.size()?n=r.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):f&&(n=n.transition().duration(l.duration).ease(l.easing)),n.attr("d",e)):n.remove())}))})}},{"../../traces/scatter/subtypes":602,"../drawing":316,d3:277,"fast-isnumeric":99}],324:[function(t,e,n){"use strict";var r=t("d3"),i=t("../color");e.exports=function(t){t.each(function(t){var e=t[0].trace,n=e.error_y||{},t=e.error_x||{},e=r.select(this);e.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),t.copy_ystyle&&(t=n),e.selectAll("path.xerror").style("stroke-width",t.thickness+"px").call(i.stroke,t.color)})}},{"../color":294,d3:277}],325:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("./layout_attributes").hoverlabel,t=t("../../lib/extend").extendFlat;e.exports={hoverlabel:{bgcolor:t({},i.bgcolor,{arrayOk:!0}),bordercolor:t({},i.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:t({},i.align,{arrayOk:!0}),namelength:t({},i.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":417,"../../plots/font_attributes":499,"./layout_attributes":335}],326:[function(t,e,n){"use strict";var s=t("../../lib"),l=t("../../registry");function u(t,e,n,r){r=r||s.identity,Array.isArray(t)&&(e[0][n]=r(t))}e.exports=function(t){var e=t.calcdata,n=t._fullLayout;for(var r=0;r<e.length;r++){var i,a=e[r],o=a[0].trace;l.traceIs(o,"pie-like")||((i=l.traceIs(o,"2dMap")?u:s.fillArray)(o.hoverinfo,a,"hi",function(e){return function(t){return s.coerceHoverinfo({hoverinfo:t},{_module:e._module},n)}}(o)),o.hovertemplate&&i(o.hovertemplate,a,"ht"),o.hoverlabel&&(i(o.hoverlabel.bgcolor,a,"hbg"),i(o.hoverlabel.bordercolor,a,"hbc"),i(o.hoverlabel.font.size,a,"hts"),i(o.hoverlabel.font.color,a,"htc"),i(o.hoverlabel.font.family,a,"htf"),i(o.hoverlabel.namelength,a,"hnl"),i(o.hoverlabel.align,a,"hta")))}}},{"../../lib":424,"../../registry":525}],327:[function(t,e,n){"use strict";var a=t("../../registry"),o=t("./hover").hover;e.exports=function(t,e,n){var r=a.getComponentMethod("annotations","onClick")(t,t._hoverdata);function i(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==n&&o(t,e,n,!0),t._hoverdata&&e&&e.target&&(r&&r.then?r.then(i):i(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":525,"./hover":331}],328:[function(t,e,n){"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],329:[function(t,e,n){"use strict";var i=t("../../lib"),a=t("./attributes"),o=t("./hoverlabel_defaults");e.exports=function(n,r,t,e){e=i.extendFlat({},e.hoverlabel);r.hovertemplate&&(e.namelength=-1),o(n,r,function(t,e){return i.coerce(n,r,a,t,e)},e)}},{"../../lib":424,"./attributes":325,"./hoverlabel_defaults":332}],330:[function(t,e,o){"use strict";var c=t("../../lib");o.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},o.isTraceInSubplots=function(t,e){if("splom"!==t.type)return-1!==e.indexOf(o.getSubplot(t));for(var n=t.xaxes||[],r=t.yaxes||[],i=0;i<n.length;i++)for(var a=0;a<r.length;a++)if(-1!==e.indexOf(n[i]+r[a]))return!0;return!1},o.flat=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=e;return n},o.p2c=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].p2c(e);return n},o.getDistanceFunction=function(t,e,n,r){return"closest"===t?r||o.quadrature(e,n):"x"===t.charAt(0)?e:n},o.getClosest=function(t,e,n){if(!1!==n.index)0<=n.index&&n.index<t.length?n.distance=0:n.index=!1;else for(var r=0;r<t.length;r++){var i=e(t[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},o.inbox=function(t,e,n){return t*e<0||0===t?n:1/0},o.quadrature=function(n,r){return function(t){var e=n(t),t=r(t);return Math.sqrt(e*e+t*t)}},o.makeEventData=function(t,e,n){var r,i="index"in t?t.index:t.pointNumber,a={data:e._input,fullData:e,curveNumber:e.index,pointNumber:i};return e._indexToPoints?1===(r=e._indexToPoints[i]).length?a.pointIndex=r[0]:a.pointIndices=r:a.pointIndex=i,e._module.eventData?a=e._module.eventData(a,t,e,n,i):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),o.appendArrayPointValue(a,e,i),a},o.appendArrayPointValue=function(t,e,n){var r=e._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],o=f(a);void 0!==t[o]||void 0!==(a=h(c.nestedProperty(e,a).get(),n))&&(t[o]=a)}},o.appendArrayMultiPointValues=function(t,e,n){var r=e._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],o=f(a);if(void 0===t[o]){for(var s=c.nestedProperty(e,a).get(),l=new Array(n.length),u=0;u<n.length;u++)l[u]=h(s,n[u]);t[o]=l}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function f(t){return n[t]||t}function h(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var r={x:!0,y:!0},i={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(t){return"string"==typeof t&&!!i[t]},o.isXYhover=function(t){return"string"==typeof t&&!!r[t]}},{"../../lib":424}],331:[function(t,e,n){"use strict";var K=t("d3"),Q=t("fast-isnumeric"),_=t("tinycolor2"),$=t("../../lib"),j=$.strTranslate,N=$.strRotate,J=t("../../lib/events"),D=t("../../lib/svg_text_utils"),tt=t("../../lib/override_cursor"),z=t("../drawing"),et=t("../color"),nt=t("../dragelement"),rt=t("../../plots/cartesian/axes"),it=t("../../registry"),at=t("./helpers"),I=t("./constants"),F=t("../legend/defaults"),B=t("../legend/draw"),U=I.YANGLE,t=Math.PI*U/180,ot=1/Math.sin(t),m=Math.cos(t),v=Math.sin(t),V=I.HOVERARROWSIZE,H=I.HOVERTEXTPAD;function st(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")}n.hover=function(t,e,n,r){t=$.getGraphDiv(t),$.throttle(t._fullLayout._uid+I.HOVERID,I.HOVERMINTIME,function(){!function(t,l,e,n){e=e||"xy";var u=Array.isArray(e)?e:[e],c=t._fullLayout,r=c._plots||[],e=r[e],f=c._has("cartesian");e&&(e=e.overlays.map(function(t){return t.id}),u=u.concat(e));for(var i=u.length,h=new Array(i),d=new Array(i),a=!1,o=0;o<i;o++){var s=u[o];if(r[s])a=!0,h[o]=r[s].xaxis,d[o]=r[s].yaxis;else{if(!c[s]||!c[s]._subplot)return $.warn("Unrecognized subplot: "+s);s=c[s]._subplot;h[o]=s.xaxis,d[o]=s.yaxis}}var p=l.hovermode||c.hovermode;if(p&&!a&&(p="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(p)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return nt.unhoverRaw(t,l);var g,y,m,v,b,x,_,w,k,M,T,A,S,E=-1===c.hoverdistance?1/0:c.hoverdistance,O=-1===c.spikedistance?1/0:c.spikedistance,C=[],P=[],L={hLinePoint:null,vLinePoint:null},R=!1;if(Array.isArray(l))for(p="array",m=0;m<l.length;m++)(b=t.calcdata[l[m].curveNumber||0])&&(x=b[0].trace,"skip"!==b[0].trace.hoverinfo&&(P.push(b),"h"===x.orientation&&(R=!0)));else{for(v=0;v<t.calcdata.length;v++)b=t.calcdata[v],"skip"!==(x=b[0].trace).hoverinfo&&at.isTraceInSubplots(x,u)&&(P.push(b),"h"===x.orientation&&(R=!0));if(!l.target)B="xpx"in l?l.xpx:h[0]._length/2,U="ypx"in l?l.ypx:d[0]._length/2;else{if(!1===J.triggerHandler(t,"plotly_beforehover",l))return;var j=l.target.getBoundingClientRect();B=l.clientX-j.left,U=l.clientY-j.top,c._calcInverseTransform(t);j=$.apply3DTransform(c._invTransform)(B,U);if(B=j[0],U=j[1],B<0||B>h[0]._length||U<0||U>d[0]._length)return nt.unhoverRaw(t,l)}if(l.pointerX=B+h[0]._offset,l.pointerY=U+d[0]._offset,g="xval"in l?at.flat(u,l.xval):at.p2c(h,B),y="yval"in l?at.flat(u,l.yval):at.p2c(d,U),!Q(g[0])||!Q(y[0]))return $.warn("Fx.hover failed",l,t),nt.unhoverRaw(t,l)}var N=1/0;function D(t,e){for(v=0;v<P.length;v++)if(b=P[v],b&&b[0]&&b[0].trace&&(x=b[0].trace,!0===x.visible&&0!==x._length&&-1===["carpet","contourcarpet"].indexOf(x._module.name))){var n,r,i;if("splom"===x.type?_=u[w=0]:(_=at.getSubplot(x),w=u.indexOf(_)),k=p,at.isUnifiedHover(k)&&(k=k.charAt(0)),A={cd:b,trace:x,xa:h[w],ya:d[w],maxHoverDistance:E,maxSpikeDistance:O,index:!1,distance:Math.min(N,E),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:et.defaultLine,name:x.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},c[_]&&(A.subplot=c[_]._subplot),c._splomScenes&&c._splomScenes[x.uid]&&(A.scene=c._splomScenes[x.uid]),S=C.length,"array"===k?"pointNumber"in(r=l[v])?(A.index=r.pointNumber,k="closest"):(k="","xval"in r&&(M=r.xval,k="x"),"yval"in r&&(T=r.yval,k=k?"closest":"y")):T=void 0!==t&&void 0!==e?(M=t,e):(M=g[w],y[w]),0!==E)if(x._module&&x._module.hoverPoints){var a=x._module.hoverPoints(A,M,T,k,c._hoverlayer);if(a)for(var o,s=0;s<a.length;s++)o=a[s],Q(o.x0)&&Q(o.y0)&&C.push(function(r,t){var n=r.index,i=r.trace||{},a=r.cd[0],o=r.cd[n]||{};function s(t){return t||Q(t)&&0===t}var l=Array.isArray(n)?function(t,e){t=$.castOption(a,n,t);return s(t)?t:$.extractOption({},i,"",e)}:function(t,e){return $.extractOption(o,i,t,e)};function e(t,e,n){n=l(e,n);s(n)&&(r[t]=n)}e("hoverinfo","hi","hoverinfo"),e("bgcolor","hbg","hoverlabel.bgcolor"),e("borderColor","hbc","hoverlabel.bordercolor"),e("fontFamily","htf","hoverlabel.font.family"),e("fontSize","hts","hoverlabel.font.size"),e("fontColor","htc","hoverlabel.font.color"),e("nameLength","hnl","hoverlabel.namelength"),e("textAlign","hta","hoverlabel.align"),r.posref="y"===t||"closest"===t&&"h"===i.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=$.constrain(r.x0,0,r.xa._length),r.x1=$.constrain(r.x1,0,r.xa._length),r.y0=$.constrain(r.y0,0,r.ya._length),r.y1=$.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:rt.hoverLabelText(r.xa,r.xLabelVal),r.xVal=r.xa.c2d(r.xLabelVal));void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:rt.hoverLabelText(r.ya,r.yLabelVal),r.yVal=r.ya.c2d(r.yLabelVal));void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal));isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0||(u=rt.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text,void 0!==r.xerrneg?r.xLabel+=" +"+u+" / -"+rt.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+=" ± "+u,"x"===t&&(r.distance+=1));{var u;isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0||(u=rt.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text,void 0!==r.yerrneg?r.yLabel+=" +"+u+" / -"+rt.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+=" ± "+u,"y"===t&&(r.distance+=1))}t=r.hoverinfo||r.trace.hoverinfo;t&&"all"!==t&&(-1===(t=Array.isArray(t)?t:t.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===t.indexOf("y")&&(r.yLabel=void 0),-1===t.indexOf("z")&&(r.zLabel=void 0),-1===t.indexOf("text")&&(r.text=void 0),-1===t.indexOf("name")&&(r.name=void 0));return r}(o,p))}else $.log("Unrecognized trace type in hover:",x);"closest"===p&&C.length>S&&(C.splice(0,S),N=C[0].distance),f&&0!==O&&0===C.length&&(A.distance=O,A.index=!1,(i=(i=x._module.hoverPoints(A,M,T,"closest",c._hoverlayer))&&i.filter(function(t){return t.spikeDistance<=O}))&&i.length&&((r=i.filter(function(t){return t.xa.showspikes&&"hovered data"!==t.xa.spikesnap})).length&&(r=r[0],Q(r.x0)&&Q(r.y0)&&(n=I(r),(!L.vLinePoint||L.vLinePoint.spikeDistance>n.spikeDistance)&&(L.vLinePoint=n))),(i=i.filter(function(t){return t.ya.showspikes&&"hovered data"!==t.ya.spikesnap})).length&&(i=i[0],Q(i.x0)&&Q(i.y0)&&(n=I(i),(!L.hLinePoint||L.hLinePoint.spikeDistance>n.spikeDistance)&&(L.hLinePoint=n)))))}}function z(t,e){for(var n,r=null,i=1/0,a=0;a<t.length;a++)(n=t[a].spikeDistance)<=i&&n<=e&&(r=t[a],i=n);return r}function I(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}D();var F,j={fullLayout:c,container:c._hoverlayer,outerContainer:c._paperdiv,event:l},B=t._spikepoints,U={vLinePoint:L.vLinePoint,hLinePoint:L.hLinePoint};if(t._spikepoints=U,!f||0===O||0!==C.length&&(U=z(C.filter(function(t){return t.ya.showspikes}),O),L.hLinePoint=I(U),U=z(C.filter(function(t){return t.xa.showspikes}),O),L.vLinePoint=I(U)),0===C.length){var V=nt.unhoverRaw(t,l);return!f||null===L.hLinePoint&&null===L.vLinePoint||ft(B)&&ct(t,L,j)}f&&ft(B)&&ct(t,L,j),C.sort(function(t,e){return t.distance-e.distance}),at.isXYhover(k)&&0!==C[0].length&&"splom"!==C[0].trace.type&&(V=C[0],H=V.cd[V.index],B="group"===c.boxmode||"group"===c.violinmode,W=V.xVal,"category"===(j=V.xa).type&&(W=j._categoriesMap[W]),"date"===j.type&&(W=j.d2c(W)),H&&H.t&&H.t.posLetter===j._id&&B&&(W+=H.t.dPos),Z=V.yVal,"category"===(j=V.ya).type&&(Z=j._categoriesMap[Z]),"date"===j.type&&(Z=j.d2c(Z)),H&&H.t&&H.t.posLetter===j._id&&B&&(Z+=H.t.dPos),D(W,Z),F={},C=C.filter(function(t){t=st(t);if(!F[t])return F[t]=!0,F[t]}));var H=t._hoverdata,q=[];for(m=0;m<C.length;m++){var G,Y=C[m],X=at.makeEventData(Y,Y.trace,Y.cd);!1!==Y.hovertemplate&&(G=!1,Y.cd[Y.index]&&Y.cd[Y.index].ht&&(G=Y.cd[Y.index].ht),Y.hovertemplate=G||Y.trace.hovertemplate||!1),Y.eventData=[X],q.push(X)}t._hoverdata=q;var W="y"===p&&(1<P.length||1<C.length)||"closest"===p&&R&&1<C.length,Z=et.combine(c.plot_bgcolor||et.background,c.paper_bgcolor),Z={hovermode:p,rotateLabels:W,bgColor:Z,container:c._hoverlayer,outerContainer:c._paperdiv,commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance},Z=lt(C,Z,t);at.isUnifiedHover(p)||(function(t,r,i){var a,o,s,l,u,c,e,n=0,f=1,h=t.size(),d=new Array(h),p=0;function g(t){var e=t[0],n=t[t.length-1];if(o=e.pmin-e.pos-e.dp+e.size,s=n.pos+n.dp+n.size-e.pmax,.01<o){for(u=t.length-1;0<=u;u--)t[u].dp+=o;a=!1}if(!(s<.01)){if(o<-.01){for(u=t.length-1;0<=u;u--)t[u].dp-=s;a=!1}if(a){var r=0;for(l=0;l<t.length;l++)(c=t[l]).pos+c.dp+c.size>e.pmax&&r++;for(l=t.length-1;0<=l&&!(r<=0);l--)(c=t[l]).pos>e.pmax-1&&(c.del=!0,r--);for(l=0;l<t.length&&!(r<=0);l++)if((c=t[l]).pos<e.pmin+1)for(c.del=!0,r--,s=2*c.size,u=t.length-1;0<=u;u--)t[u].dp-=s;for(l=t.length-1;0<=l&&!(r<=0);l--)(c=t[l]).pos+c.dp+c.size>e.pmax&&(c.del=!0,r--)}}}for(t.each(function(t){var e=t[r],n="x"===e._id.charAt(0),e=e.range;0===p&&e&&e[0]>e[1]!=n&&(f=-1),d[p++]=[{datum:t,traceIndex:t.trace.index,dp:0,pos:t.pos,posref:t.posref,size:t.by*(n?ot:1)/2,pmin:0,pmax:n?i.width:i.height}]}),d.sort(function(t,e){return t[0].posref-e[0].posref||f*(e[0].traceIndex-t[0].traceIndex)});!a&&n<=h;){for(n++,a=!0,l=0;l<d.length-1;){var y=d[l],m=d[l+1],v=y[y.length-1],b=m[0];if(.01<(o=v.pos+v.dp+v.size-b.pos-b.dp+b.size)&&v.pmin===b.pmin&&v.pmax===b.pmax){for(u=m.length-1;0<=u;u--)m[u].dp+=o;for(y.push.apply(y,m),d.splice(l+1,1),e=0,u=y.length-1;0<=u;u--)e+=y[u].dp;for(s=e/y.length,u=y.length-1;0<=u;u--)y[u].dp-=s;a=!1}else l++}d.forEach(g)}for(l=d.length-1;0<=l;l--){var x=d[l];for(u=x.length-1;0<=u;u--){var _=x[u],w=_.datum;w.offset=_.dp,w.del=_.del}}}(Z,W?"xa":"ya",c),ut(Z,W,c._invScaleX,c._invScaleY)),l.target&&l.target.tagName&&(W=it.getComponentMethod("annotations","hasClickToShow")(t,q),tt(K.select(l.target),W?"pointer":"")),l.target&&!n&&function(t,e){if(!e||e.length!==t._hoverdata.length)return!0;for(var n=e.length-1;0<=n;n--){var r=e[n],i=t._hoverdata[n];if(r.curveNumber!==i.curveNumber||String(r.pointNumber)!==String(i.pointNumber)||String(r.pointNumbers)!==String(i.pointNumbers))return!0}return!1}(t,H)&&(H&&t.emit("plotly_unhover",{event:l,points:H}),t.emit("plotly_hover",{event:l,points:t._hoverdata,xaxes:h,yaxes:d,xvals:g,yvals:y}))}(t,e,n,r)})},n.loneHover=function(t,r){var e=!0;Array.isArray(t)||(e=!1,t=[t]);var n=t.map(function(t){return{color:t.color||et.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,nameLength:t.nameLength,textAlign:t.textAlign,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,eventData:t.eventData||!1,hovertemplateLabels:t.hovertemplateLabels||!1}}),i=K.select(r.container),a=r.outerContainer?K.select(r.outerContainer):i,t={hovermode:"closest",rotateLabels:!1,bgColor:r.bgColor||et.background,container:i,outerContainer:a},i=lt(n,t,r.gd),o=0,s=0;i.sort(function(t,e){return t.y0-e.y0}).each(function(t,e){var n=t.y0-t.by/2;t.offset=n-5<o?o-n+5:0,o=n+t.by+t.offset,e===r.anchorIndex&&(s=t.offset)}).each(function(t){t.offset-=s});a=r.gd._fullLayout._invScaleX,n=r.gd._fullLayout._invScaleY;return ut(i,t.rotateLabels,a,n),e?i:i.node()};var l=/<extra>([\s\S]*)<\/extra>/;function lt(y,t,m){var v=m._fullLayout,b=t.hovermode,p=t.rotateLabels,g=t.bgColor,e=t.container,n=t.outerContainer,x=t.commonLabelOpts||{},_=t.fontFamily||I.HOVERFONT,w=t.fontSize||I.HOVERFONTSIZE,k=y[0],M=k.xa,T=k.ya,r="y"===b.charAt(0)?"yLabel":"xLabel",A=k[r],i=(String(A)||"").split(" ")[0],a=n.node().getBoundingClientRect(),S=a.top,E=a.width,O=a.height,C=void 0!==A&&k.distance<=t.hoverdistance&&("x"===b||"y"===b);if(C){for(var o=!0,s=0;s<y.length;s++)if(o&&void 0===y[s].zLabel&&(o=!1),l=y[s].hoverinfo||y[s].trace.hoverinfo){var l=Array.isArray(l)?l:l.split("+");if(-1===l.indexOf("all")&&-1===l.indexOf(b)){C=!1;break}}o&&(C=!1)}var u=e.selectAll("g.axistext").data(C?[0]:[]);function P(t){return t.filter(function(t){return void 0!==t.zLabelVal||(t[r]||"").split(" ")[0]===i})}if(u.enter().append("g").classed("axistext",!0),u.exit().remove(),u.each(function(){var t=K.select(this),e=$.ensureSingle(t,"path","",function(t){t.style({"stroke-width":"1px"})}),n=$.ensureSingle(t,"text","",function(t){t.attr("data-notex",1)}),r=x.bgcolor||et.defaultLine,i=x.bordercolor||et.contrast(r),a=et.contrast(r),o={family:x.font.family||_,size:x.font.size||w,color:x.font.color||a};e.style({fill:r,stroke:i}),n.text(A).call(z.font,o).call(D.positionText,0,0).call(D.convertToTspans,m),t.attr("transform","");var s,l,u,c,f,h,d,p,g=n.node().getBoundingClientRect();"x"===b?(f="top"===M.side?"-":"",n.attr("text-anchor","middle").call(D.positionText,0,"top"===M.side?S-g.bottom-V-H:S-g.top+V+H),u=M._offset+(k.x0+k.x1)/2,c=T._offset+("top"===M.side?0:T._length),u<(i=g.width/2+H)?(u=i,e.attr("d","M-"+(i-V)+",0L-"+(i-2*V)+","+f+V+"H"+(H+g.width/2)+"v"+f+(2*H+g.height)+"H-"+i+"V"+f+V+"Z")):u>v.width-i?(u=v.width-i,e.attr("d","M"+(i-V)+",0L"+i+","+f+V+"v"+f+(2*H+g.height)+"H-"+i+"V"+f+V+"H"+(i-2*V)+"Z")):e.attr("d","M0,0L"+V+","+f+V+"H"+(H+g.width/2)+"v"+f+(2*H+g.height)+"H-"+(H+g.width/2)+"V"+f+V+"H-"+V+"Z")):(u="right"===T.side?(s="start",l=1,h="",M._offset+M._length):(s="end",l=-1,h="-",M._offset),c=T._offset+(k.y0+k.y1)/2,n.attr("text-anchor",s),e.attr("d","M0,0L"+h+V+","+V+"V"+(H+g.height/2)+"h"+h+(2*H+g.width)+"V-"+(H+g.height/2)+"H"+h+V+"V-"+V+"Z"),f=g.height/2,e=S-g.top-f,h="clip"+v._uid+"commonlabel"+T._id,u<g.width+2*H+V?(d="M-"+(V+H)+"-"+f+"h-"+(g.width-H)+"V"+f+"h"+(g.width-H)+"Z",p=g.width-u+H,D.positionText(n,p,e),"end"===s&&n.selectAll("tspan").each(function(){var t=K.select(this),e=z.tester.append("text").text(t.text()).call(z.font,o),n=e.node().getBoundingClientRect();Math.round(n.width)<Math.round(g.width)&&t.attr("x",p-n.width),e.remove()})):(D.positionText(n,l*(H+V),e),d=null),(e=v._topclips.selectAll("#"+h).data(d?[0]:[])).enter().append("clipPath").attr("id",h).append("path"),e.exit().remove(),e.select("path").attr("d",d),z.setClipUrl(n,d?h:null,m)),t.attr("transform",j(u,c)),y=P(y)}),at.isUnifiedHover(b)){if(e.selectAll("g.hovertext").remove(),void 0!==A&&k.distance<=t.hoverdistance&&(y=P(y)),0===y.length)return;var c={showlegend:!0,legend:{title:{text:A,font:v.hoverlabel.font},font:v.hoverlabel.font,bgcolor:v.hoverlabel.bgcolor,bordercolor:v.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:v.legend?v.legend.traceorder:void 0,orientation:"v"}},n={};F(c,n,m._fullData);var f=n.legend;f.entries=[];for(var h=0;h<y.length;h++){var d=q(y[h],!0,b,v,A),L=d[0],R=d[1],d=y[h];d.name=R,d.text=""!==R?R+" : "+L:L;L=d.cd[d.index];L&&(L.mc&&(d.mc=L.mc),L.mcc&&(d.mc=L.mcc),L.mlc&&(d.mlc=L.mlc),L.mlcc&&(d.mlc=L.mlcc),L.mlw&&(d.mlw=L.mlw),L.mrc&&(d.mrc=L.mrc),L.dir&&(d.dir=L.dir)),d._distinct=!0,f.entries.push([d])}f.entries.sort(function(t,e){return t[0].trace.index-e[0].trace.index}),f.layer=e,B(m,f);a=$.mean(y.map(function(t){return(t.y0+t.y1)/2})),u=$.mean(y.map(function(t){return(t.x0+t.x1)/2})),t=e.select("g.legend"),c=t.node().getBoundingClientRect();u+=M._offset,a+=T._offset-c.height/2;n=c.width+2*H;!(u+n<=E)&&0<=u-n?u-=n:u+=2*H;n=c.height+2*H,c=O<=a+n;return n<=O&&(a<=S?a=T._offset+2*H:c&&(a=O-n)),t.attr("transform",j(u,a)),t}e=e.selectAll("g.hovertext").data(y,st);return e.enter().append("g").classed("hovertext",!0).each(function(){var t=K.select(this);t.append("rect").call(et.fill,et.addOpacity(g,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(z.font,_,w)}),e.exit().remove(),e.each(function(t){var e=K.select(this).attr("transform",""),n=t.color;Array.isArray(n)&&(n=n[t.eventData[0].pointNumber]);var r=t.bgcolor||n,i=et.combine(et.opacity(r)?r:et.defaultLine,g),a=et.combine(et.opacity(n)?n:et.defaultLine,g),o=t.borderColor||et.contrast(i),s=q(t,C,b,v,A,e),l=s[0],u=s[1],c=e.select("text.nums").call(z.font,t.fontFamily||_,t.fontSize||w,t.fontColor||o).text(l).attr("data-notex",1).call(D.positionText,0,0).call(D.convertToTspans,m),r=e.select("text.name"),n=0,s=0;u&&u!==l?(r.call(z.font,t.fontFamily||_,t.fontSize||w,a).text(u).attr("data-notex",1).call(D.positionText,0,0).call(D.convertToTspans,m),n=(d=r.node().getBoundingClientRect()).width+2*H,s=d.height+2*H):(r.remove(),e.select("rect").remove()),e.select("path").style({fill:i,stroke:o});var f,h,l=c.node().getBoundingClientRect(),a=t.xa._offset+(t.x0+t.x1)/2,u=t.ya._offset+(t.y0+t.y1)/2,d=Math.abs(t.x1-t.x0),i=Math.abs(t.y1-t.y0),o=l.width+V+H+n;t.ty0=S-l.top,t.bx=l.width+2*H,t.by=Math.max(l.height+2*H,s),t.anchor="start",t.txwidth=l.width,t.tx2width=n,t.offset=0,p?(t.pos=a,h=u+i/2+o<=O,f=0<=u-i/2-o,"top"!==t.idealAlign&&h||!f?h?(u+=i/2,t.anchor="start"):t.anchor="middle":(u-=i/2,t.anchor="end")):(t.pos=u,h=a+d/2+o<=E,f=0<=a-d/2-o,"left"!==t.idealAlign&&h||!f?h?(a+=d/2,t.anchor="start"):(t.anchor="middle",o=a-(h=o/2),0<(h=a+h-E)&&(a-=h),o<0&&(a+=-o)):(a-=d/2,t.anchor="end")),c.attr("text-anchor",t.anchor),n&&r.attr("text-anchor",t.anchor),e.attr("transform",j(a,u)+(p?N(U):""))}),e}function q(n,t,e,r,i,a){var o="",s="";void 0!==n.nameOverride&&(n.name=n.nameOverride),n.name&&(n.trace._meta&&(n.name=$.templateString(n.name,n.trace._meta)),o=u(n.name,n.nameLength)),void 0!==n.zLabel?(void 0!==n.xLabel&&(s+="x: "+n.xLabel+"<br>"),void 0!==n.yLabel&&(s+="y: "+n.yLabel+"<br>"),"choropleth"!==n.trace.type&&"choroplethmapbox"!==n.trace.type&&(s+=(s?"z: ":"")+n.zLabel)):t&&n[e.charAt(0)+"Label"]===i?s=n[("x"===e.charAt(0)?"y":"x")+"Label"]||"":void 0===n.xLabel?void 0!==n.yLabel&&"scattercarpet"!==n.trace.type&&(s=n.yLabel):s=void 0===n.yLabel?n.xLabel:"("+n.xLabel+", "+n.yLabel+")",!n.text&&0!==n.text||Array.isArray(n.text)||(s+=(s?"<br>":"")+n.text),void 0!==n.extraText&&(s+=(s?"<br>":"")+n.extraText),a&&""===s&&!n.hovertemplate&&(""===o&&a.remove(),s=o);i=r._d3locale,e=n.hovertemplate||!1,a=n.hovertemplateLabels||n,r=n.eventData[0]||{};return e&&(s=(s=$.hovertemplateString(e,a,i,r,n.trace._meta)).replace(l,function(t,e){return o=u(e,n.nameLength),""})),[s,o]}function ut(t,h,d,p){function g(t){return t*d}function y(t){return t*p}t.each(function(t){var e=K.select(this);if(t.del)return e.remove();var n=e.select("text.nums"),r=t.anchor,i="end"===r?-1:1,a={start:1,end:-1,middle:0}[r],o=a*(V+H),s=o+a*(t.txwidth+H),l=0,u=t.offset,c="middle"===r;c&&(o-=t.tx2width/2,s+=t.txwidth/2+H),h&&(u*=-v,l=t.offset*m),e.select("path").attr("d",c?"M-"+g(t.bx/2+t.tx2width/2)+","+y(u-t.by/2)+"h"+g(t.bx)+"v"+y(t.by)+"h-"+g(t.bx)+"Z":"M0,0L"+g(i*V+l)+","+y(V+u)+"v"+y(t.by/2-V)+"h"+g(i*t.bx)+"v-"+y(t.by)+"H"+g(i*V+l)+"V"+y(u-V)+"Z");var f=l+o,i=u+t.ty0-t.by/2+H,o=t.textAlign||"auto";"auto"!==o&&("left"===o&&"start"!==r?(n.attr("text-anchor","start"),f=c?-t.bx/2-t.tx2width/2+H:-t.bx-H):"right"===o&&"end"!==r&&(n.attr("text-anchor","end"),f=c?t.bx/2-t.tx2width/2-H:t.bx+H)),n.call(D.positionText,f*d,i*p),t.tx2width&&(e.select("text.name").call(D.positionText,g(s+a*H+l),y(u+t.ty0-t.by/2+H)),e.select("rect").call(z.setRect,g(s+(a-1)*t.tx2width/2+l),y(u-t.by/2-1),g(t.tx2width),y(t.by+2)))})}function ct(t,e,n){var r,i,a,o,s,l,u,c,f,h,d,p,g=n.container,y=n.fullLayout,m=y._size,v=n.event,b=!!e.hLinePoint,x=!!e.vLinePoint;g.selectAll(".spikeline").remove(),(x||b)&&(r=et.combine(y.plot_bgcolor,y.paper_bgcolor),b&&(i=(o=e.hLinePoint)&&o.xa,a="cursor"===(f=o&&o.ya).spikesnap?(u=v.pointerX,v.pointerY):(u=i._offset+o.x,f._offset+o.y),n=_.readability(o.color,r)<1.5?et.contrast(r):o.color,y=f.spikemode,b=f.spikethickness,h=f.spikecolor||n,o=rt.getPxPosition(t,f),-1===y.indexOf("toaxis")&&-1===y.indexOf("across")||(-1!==y.indexOf("toaxis")&&(s=o,l=u),-1!==y.indexOf("across")&&(n=f._counterDomainMin,u=f._counterDomainMax,"free"===f.anchor&&(n=Math.min(n,f.position),u=Math.max(u,f.position)),s=m.l+n*m.w,l=m.l+u*m.w),g.insert("line",":first-child").attr({x1:s,x2:l,y1:a,y2:a,"stroke-width":b,stroke:h,"stroke-dasharray":z.dashStyle(f.spikedash,b)}).classed("spikeline",!0).classed("crisp",!0),g.insert("line",":first-child").attr({x1:s,x2:l,y1:a,y2:a,"stroke-width":b+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==y.indexOf("marker")&&g.insert("circle",":first-child").attr({cx:o+("right"!==f.side?b:-b),cy:a,r:b,fill:h}).classed("spikeline",!0)),x&&(i=(h=e.vLinePoint)&&h.xa,f=h&&h.ya,x="cursor"===i.spikesnap?(c=v.pointerX,v.pointerY):(c=i._offset+h.x,f._offset+h.y),e=_.readability(h.color,r)<1.5?et.contrast(r):h.color,v=i.spikemode,f=i.spikethickness,h=i.spikecolor||e,e=rt.getPxPosition(t,i),-1===v.indexOf("toaxis")&&-1===v.indexOf("across")||(-1!==v.indexOf("toaxis")&&(d=e,p=x),-1!==v.indexOf("across")&&(t=i._counterDomainMin,x=i._counterDomainMax,"free"===i.anchor&&(t=Math.min(t,i.position),x=Math.max(x,i.position)),d=m.t+(1-x)*m.h,p=m.t+(1-t)*m.h),g.insert("line",":first-child").attr({x1:c,x2:c,y1:d,y2:p,"stroke-width":f,stroke:h,"stroke-dasharray":z.dashStyle(i.spikedash,f)}).classed("spikeline",!0).classed("crisp",!0),g.insert("line",":first-child").attr({x1:c,x2:c,y1:d,y2:p,"stroke-width":f+2,stroke:r}).classed("spikeline",!0).classed("crisp",!0)),-1!==v.indexOf("marker")&&g.insert("circle",":first-child").attr({cx:c,cy:e-("top"!==i.side?f:-f),r:f,fill:h}).classed("spikeline",!0)))}function ft(t,e){return!e||(e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint)}function u(t,e){return D.plainText(t||"",{len:e,allowedTags:["br","sub","sup","b","i","em"]})}},{"../../lib":424,"../../lib/events":416,"../../lib/override_cursor":435,"../../lib/svg_text_utils":447,"../../plots/cartesian/axes":471,"../../registry":525,"../color":294,"../dragelement":313,"../drawing":316,"../legend/defaults":346,"../legend/draw":347,"./constants":328,"./helpers":330,d3:277,"fast-isnumeric":99,tinycolor2:651}],332:[function(t,e,n){"use strict";var a=t("../../lib"),o=t("../color"),s=t("./helpers").isUnifiedHover;e.exports=function(t,e,n,r){function i(t){r.font[t]||(r.font[t]=(e.legend||e).font[t])}r=r||{},e&&s(e.hovermode)&&(r.font||(r.font={}),i("size"),i("family"),i("color"),e.legend?(r.bgcolor||(r.bgcolor=o.combine(e.legend.bgcolor,e.paper_bgcolor)),r.bordercolor||(r.bordercolor=e.legend.bordercolor)):r.bgcolor||(r.bgcolor=e.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),a.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":424,"../color":294,"./helpers":330}],333:[function(t,e,n){"use strict";var a=t("../../lib"),o=t("./layout_attributes");e.exports=function(n,r,t){function e(t,e){return void 0!==r[t]?r[t]:a.coerce(n,r,o,t,e)}var i=e("clickmode"),t=!r._has("cartesian")||-1<i.indexOf("select")?"closest":(r._isHoriz=function(t,e){for(var n=e._scatterStackOpts||{},r=0;r<t.length;r++){var i=t[r],a=i.xaxis+i.yaxis,a=(n[a]||{})[i.stackgroup]||{};if("h"!==i.orientation&&"h"!==a.orientation)return!1}return!0}(t,r),r._isHoriz?"y":"x");return e("hovermode",t)}},{"../../lib":424,"./layout_attributes":335}],334:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),a=t("../dragelement"),o=t("./helpers"),s=t("./layout_attributes"),l=t("./hover");e.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:s},attributes:t("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(t,e,n){return i.castOption(t,e,"hoverlabel."+n)},castHoverinfo:function(e,n,t){return i.castOption(e,t,"hoverinfo",function(t){return i.coerceHoverinfo({hoverinfo:t},{_module:e._module},n)})},hover:l.hover,unhover:a.unhover,loneHover:l.loneHover,loneUnhover:function(t){t=i.isD3Selection(t)?t:r.select(t);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:t("./click")}},{"../../lib":424,"../dragelement":313,"./attributes":325,"./calc":326,"./click":327,"./constants":328,"./defaults":329,"./helpers":330,"./hover":331,"./layout_attributes":335,"./layout_defaults":336,"./layout_global_defaults":337,d3:277}],335:[function(t,e,n){"use strict";var r=t("./constants"),t=t("../../plots/font_attributes")({editType:"none"});t.family.dflt=r.HOVERFONT,t.size.dflt=r.HOVERFONTSIZE,e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:t,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":499,"./constants":328}],336:[function(t,e,n){"use strict";var o=t("../../lib"),s=t("./helpers").isUnifiedHover,l=t("./layout_attributes"),u=t("./hovermode_defaults"),c=t("./hoverlabel_defaults");e.exports=function(n,r,t){function e(t,e){return o.coerce(n,r,l,t,e)}var i=u(n,r,t);i&&(e("hoverdistance"),e("spikedistance",s(i)?-1:void 0)),"select"===e("dragmode")&&e("selectdirection");var a=r._has("mapbox"),t=r._has("geo"),i=r._basePlotModules.length;"zoom"===r.dragmode&&((a||t)&&1===i||a&&t&&2===i)&&(r.dragmode="pan"),c(n,r,e)}},{"../../lib":424,"./helpers":330,"./hoverlabel_defaults":332,"./hovermode_defaults":333,"./layout_attributes":335}],337:[function(t,e,n){"use strict";var i=t("../../lib"),a=t("./hoverlabel_defaults"),o=t("./layout_attributes");e.exports=function(n,r){a(n,r,function(t,e){return i.coerce(n,r,o,t,e)})}},{"../../lib":424,"./hoverlabel_defaults":332,"./layout_attributes":335}],338:[function(t,e,n){"use strict";var p=t("../../lib"),r=t("../../lib/regex").counter,i=t("../../plots/domain").attributes,a=t("../../plots/cartesian/constants").idRegex,g=t("../../plot_api/plot_template"),y={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function P(t,e,n){e=e[n+"axes"],n=Object.keys((t._splomAxes||{})[n]||{});return Array.isArray(e)?e:n.length?n:void 0}function m(t,e,n,r,i,a){var o=e(t+"gap",n),n=e("domain."+t);e(t+"side",r);for(var s=new Array(i),l=n[0],u=(n[1]-l)/(i-o),c=u*(1-o),f=0;f<i;f++){var h=l+u*f;s[a?i-1-f:f]=[h,h+c]}return s}function L(t,n,e,r,i){var a,o=new Array(e);function s(t,e){-1!==n.indexOf(e)&&void 0===r[e]?(o[t]=e,r[e]=t):o[t]=""}if(Array.isArray(t))for(a=0;a<e;a++)s(a,t[a]);else for(s(0,i),a=1;a<e;a++)s(a,i+(a+1));return o}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:y}},layoutAttributes:y,sizeDefaults:function(t,e){var n,r,i,a,o,s,l,u,c=t.grid||{},f=P(e,c,"x"),h=P(e,c,"y");function d(t,e){return p.coerce(c,n,y,t,e)}(t.grid||f||h)&&(s=Array.isArray(c.subplots)&&Array.isArray(c.subplots[0]),a=Array.isArray(f),o=Array.isArray(h),t=a&&f!==c.xaxes&&o&&h!==c.yaxes,s?(r=c.subplots.length,i=c.subplots[0].length):(o&&(r=h.length),a&&(i=f.length)),n=g.newContainer(e,"grid"),1<(r=d("rows",r))*(i=d("columns",i))?(s||a||o||"independent"===d("pattern")&&(s=!0),n._hasSubplotGrid=s,a="top to bottom"===d("roworder"),o=s?.2:.1,s=s?.3:.1,t&&e._splomGridDflt&&(l=e._splomGridDflt.xside,u=e._splomGridDflt.yside),n._domains={x:m("x",d,o,l,i),y:m("y",d,s,u,r,a)}):delete e.grid)},contentDefaults:function(t,e){var n=e.grid;if(n&&n._domains){var r,i,a,o,s=t.grid||{},l=e._subplots,u=n._hasSubplotGrid,c=n.rows,f=n.columns,h="independent"===n.pattern,d=n._axisMap={};if(u)for(var p=s.subplots||[],g=n.subplots=new Array(c),y=1,m=0;m<c;m++)for(var v=g[m]=new Array(f),b=p[m]||[],x=0;x<f;x++)h?(a=1===y?"xy":"x"+y+"y"+y,y++):a=b[x],v[x]="",-1!==l.cartesian.indexOf(a)&&(o=a.indexOf("y"),r=a.slice(0,o),i=a.slice(o),void 0!==d[r]&&d[r]!==x||void 0!==d[i]&&d[i]!==m||(v[x]=a,d[r]=x,d[i]=m));else{t=P(e,s,"x"),s=P(e,s,"y");n.xaxes=L(t,l.xaxis,f,d,"x"),n.yaxes=L(s,l.yaxis,c,d,"y")}var _,w=n._anchors={},k="top to bottom"===n.roworder;for(_ in d){var M,T,A,S=_.charAt(0),E=n[S+"side"];if(E.length<8)w[_]="free";else if("x"===S){if(A="t"===E.charAt(0)==k?(M=0,T=1,c):(M=c-1,T=-1),u){var O=d[_];for(m=M;m!==A;m+=T)if(a=g[m][O],a&&(o=a.indexOf("y"),a.slice(0,o)===_)){w[_]=a.slice(o);break}}else for(m=M;m!==A;m+=T)if(i=n.yaxes[m],-1!==l.cartesian.indexOf(_+i)){w[_]=i;break}}else if(A="l"===E.charAt(0)?(M=0,T=1,f):(M=f-1,T=-1),u){var C=d[_];for(m=M;m!==A;m+=T)if(a=g[C][m],a&&(o=a.indexOf("y"),a.slice(o)===_)){w[_]=a.slice(0,o);break}}else for(m=M;m!==A;m+=T)if(r=n.xaxes[m],-1!==l.cartesian.indexOf(r+_)){w[_]=r;break}}}}}},{"../../lib":424,"../../lib/regex":439,"../../plot_api/plot_template":460,"../../plots/cartesian/constants":477,"../../plots/domain":498}],339:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/constants"),i=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects");e.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":397,"../../plot_api/plot_template":460,"../../plots/cartesian/constants":477}],340:[function(t,e,n){"use strict";var p=t("fast-isnumeric"),g=t("../../lib/to_log_range");e.exports=function(t,e,n,r){e=e||{};var i="log"===n&&"linear"===e.type,n="linear"===n&&"log"===e.type;if(i||n)for(var a=t._fullLayout.images,o=e._id.charAt(0),s=0;s<a.length;s++){var l,u,c,f,h,d="images["+s+"].";(h=a[s])[o+"ref"]===e._id&&(l=h[o],u=h["size"+o],f=c=null,f=i?(c=g(l,e.range),h=u/Math.pow(10,c)/2,2*Math.log(h+Math.sqrt(1+h*h))/Math.LN10):(c=Math.pow(10,l))*(Math.pow(10,u/2)-Math.pow(10,-u/2)),p(c)?p(f)||(f=null):f=c=null,r(d+o,c),r(d+"size"+o,f))}}},{"../../lib/to_log_range":449,"fast-isnumeric":99}],341:[function(t,e,n){"use strict";var c=t("../../lib"),f=t("../../plots/cartesian/axes"),r=t("../../plots/array_container_defaults"),h=t("./attributes");function i(n,r,t){function e(t,e){return c.coerce(n,r,h,t,e)}var i=e("source");if(!e("visible",!!i))return r;e("layer"),e("xanchor"),e("yanchor"),e("sizex"),e("sizey"),e("sizing"),e("opacity");for(var a={_fullLayout:t},o=["x","y"],s=0;s<2;s++){var l=o[s],u=f.coerceRef(n,r,a,l,"paper",void 0);"paper"!==u&&f.getFromId(a,u)._imgIndices.push(r._index),f.coercePosition(r,a,e,u,l,0)}return r}e.exports=function(t,e){r(t,e,{name:"images",handleItemDefaults:i})}},{"../../lib":424,"../../plots/array_container_defaults":466,"../../plots/cartesian/axes":471,"./attributes":339}],342:[function(t,e,n){"use strict";var m=t("d3"),v=t("../drawing"),b=t("../../plots/cartesian/axes"),x=t("../../plots/cartesian/axis_ids"),_=t("../../constants/xmlns_namespaces");e.exports=function(h){for(var t,d=h._fullLayout,e=[],n={},r=[],i=0;i<d.images.length;i++){var a,o=d.images[i];o.visible&&("below"===o.layer&&"paper"!==o.xref&&"paper"!==o.yref?(t=x.ref2id(o.xref)+x.ref2id(o.yref),(a=d._plots[t])?(a.mainplot&&(t=a.mainplot.id),n[t]||(n[t]=[]),n[t].push(o)):r.push(o)):("above"===o.layer?e:r).push(o))}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},g={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function s(r){var t,i=m.select(this);this._imgSrc!==r.source&&(i.attr("xmlns",_.svg),r.source&&"data:"===r.source.slice(0,5)?(i.attr("xlink:href",r.source),this._imgSrc=r.source):(t=new Promise(function(e){var t=new Image;function n(){i.remove(),e()}(this.img=t).setAttribute("crossOrigin","anonymous"),t.onerror=n,t.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.getContext("2d").drawImage(this,0,0);t=t.toDataURL("image/png");i.attr("xlink:href",t),e()},i.on("error",n),t.src=r.source,this._imgSrc=r.source}.bind(this)),h._promises.push(t)))}function l(t){var e=m.select(this),n=b.getFromId(h,t.xref),r=b.getFromId(h,t.yref),i="domain"===b.getRefType(t.xref),a="domain"===b.getRefType(t.yref),o=d._size,s=void 0!==n?"string"==typeof t.xref&&i?n._length*t.sizex:Math.abs(n.l2p(t.sizex)-n.l2p(0)):t.sizex*o.w,l=void 0!==r?"string"==typeof t.yref&&a?r._length*t.sizey:Math.abs(r.l2p(t.sizey)-r.l2p(0)):t.sizey*o.h,u=s*p[t.xanchor].offset,c=l*g[t.yanchor].offset,f=p[t.xanchor].sizing+g[t.yanchor].sizing,i=void 0!==n?"string"==typeof t.xref&&i?n._length*t.x+n._offset:n.r2p(t.x)+n._offset:t.x*o.w+o.l;switch(i+=u,o=void 0!==r?"string"==typeof t.yref&&a?r._length*(1-t.y)+r._offset:r.r2p(t.y)+r._offset:o.h-t.y*o.h+o.t,o+=c,t.sizing){case"fill":f+=" slice";break;case"stretch":f="none"}e.attr({x:i,y:o,width:s,height:l,preserveAspectRatio:f,opacity:t.opacity});r=(n&&"domain"!==b.getRefType(t.xref)?n._id:"")+(r&&"domain"!==b.getRefType(t.yref)?r._id:"");v.setClipUrl(e,r?"clip"+d._uid+r:null,h)}var u=d._imageLowerLayer.selectAll("image").data(r),c=d._imageUpperLayer.selectAll("image").data(e);u.enter().append("image"),c.enter().append("image"),u.exit().remove(),c.exit().remove(),u.each(function(t){s.bind(this)(t),l.bind(this)(t)}),c.each(function(t){s.bind(this)(t),l.bind(this)(t)});var f=Object.keys(d._plots);for(i=0;i<f.length;i++){t=f[i];var y=d._plots[t];y.imagelayer&&((y=y.imagelayer.selectAll("image").data(n[t]||[])).enter().append("image"),y.exit().remove(),y.each(function(t){s.bind(this)(t),l.bind(this)(t)}))}}},{"../../constants/xmlns_namespaces":403,"../../plots/cartesian/axes":471,"../../plots/cartesian/axis_ids":474,"../drawing":316,d3:277}],343:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":483,"./attributes":339,"./convert_coords":340,"./defaults":341,"./draw":342}],344:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),t=t("../color/attributes");e.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":499,"../color/attributes":293}],345:[function(t,e,n){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],346:[function(t,e,n){"use strict";var p=t("../../registry"),g=t("../../lib"),y=t("../../plot_api/plot_template"),m=t("./attributes"),v=t("../../plots/layout_attributes"),b=t("./helpers");e.exports=function(t,e,n){for(var r=t.legend||{},i=0,a=!1,o="normal",s=0;s<n.length;s++){var l=n[s];l.visible&&(!l.showlegend&&(!l._dfltShowLegend||l._module&&l._module.attributes&&l._module.attributes.showlegend&&!1===l._module.attributes.showlegend.dflt)||(i++,l.showlegend&&(a=!0,!p.traceIs(l,"pie-like")&&!0!==l._input.showlegend||i++)),(p.traceIs(l,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(l.fill))&&(o=b.isGrouped({traceorder:o})?"grouped+reversed":"reversed"),void 0!==l.legendgroup&&""!==l.legendgroup&&(o=b.isReversed({traceorder:o})?"reversed+grouped":"grouped"))}var u,c,f,h=g.coerce(t,e,v,"showlegend",a&&1<i);function d(t,e){return g.coerce(r,u,m,t,e)}!1===h&&!r.uirevision||(u=y.newContainer(e,"legend"),d("uirevision",e.uirevision),!1!==h&&(d("bgcolor",e.paper_bgcolor),d("bordercolor"),d("borderwidth"),g.coerceFont(d,"font",e.font),t="h"===(h=d("orientation"))?(c=0,p.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(f=1.1,"bottom"):(f=-.1,"top")):(c=1.02,f=1,"auto"),d("traceorder",o),b.isGrouped(e.legend)&&d("tracegroupgap"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("x",c),d("xanchor"),d("y",f),d("yanchor",t),d("valign"),g.noneOrAll(r,u,["x","y"]),d("title.text")&&(d("title.side","h"===h?"left":"top"),g.coerceFont(d,"title.font",e.font))))}},{"../../lib":424,"../../plot_api/plot_template":460,"../../plots/layout_attributes":514,"../../registry":525,"./attributes":344,"./helpers":350}],347:[function(t,e,n){"use strict";var L=t("d3"),C=t("../../lib"),P=t("../../plots/plots"),R=t("../../registry"),o=t("../../lib/events"),j=t("../dragelement"),N=t("../drawing"),s=t("../color"),c=t("../../lib/svg_text_utils"),l=t("./handle_click"),D=t("./constants"),r=t("../../constants/alignment"),f=r.LINE_SPACING,z=r.FROM_TL,I=r.FROM_BR,u=t("./get_legend_data"),h=t("./style"),F=t("./helpers");function B(t,e,n,r,i){var a=n.data()[0][0].trace,i={event:i,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:t.data,layout:t.layout,frames:t._transitionData._frames,config:t._context,fullData:t._fullData,fullLayout:t._fullLayout};a._group&&(i.group=a._group),R.traceIs(a,"pie-like")&&(i.label=n.datum()[0].label),!1!==o.triggerHandler(t,"plotly_legendclick",i)&&(1===r?e._clickTimeout=setTimeout(function(){l(n,t,r)},t._context.doubleClickDelay):2===r&&(e._clickTimeout&&clearTimeout(e._clickTimeout),t._legendMouseDownTime=0,!1!==o.triggerHandler(t,"plotly_legenddoubleclick",i)&&l(n,t,r)))}function d(i,a,o){var t,s=i.data()[0][0],e=s.trace,n=R.traceIs(e,"pie-like"),l=e.index,r=o._main&&a._context.edits.legendText&&!n,u=o._maxNameLength;o.entries?t=s.text:(t=n?s.label:e.name,e._meta&&(t=C.templateString(t,e._meta)));n=C.ensureSingle(i,"text","legendtext");n.attr("text-anchor","start").call(N.font,o.font).text(r?p(t,u):t);e=o.itemwidth+2*D.itemGap;c.positionText(n,e,0),r?n.call(c.makeEditable,{gd:a,text:t}).call(y,i,a,o).on("edit",function(t){this.text(p(t,u)).call(y,i,a,o);var e,n=s.trace._fullInput||{},r={};return R.hasTransform(n,"groupby")?(e=(e=R.getTransformIndices(n,"groupby"))[e.length-1],(e=C.keyedContainer(n,"transforms["+e+"].styles","target","value.name")).set(s.trace._group,t),r=e.constructUpdate()):r.name=t,R.call("_guiRestyle",a,r,l)}):y(n,i,a,o)}function p(t,e){e=Math.max(4,e);if(t&&t.trim().length>=e/2)return t;for(var n=e-(t=t||"").length;0<n;n--)t+=" ";return t}function g(e,n){var t,r=n._context.doubleClickDelay,i=1,a=C.ensureSingle(e,"rect","legendtoggle",function(t){n._context.staticPlot||t.style("cursor","pointer").attr("pointer-events","all"),t.call(s.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(a.on("mousedown",function(){(t=(new Date).getTime())-n._legendMouseDownTime<r?i+=1:(i=1,n._legendMouseDownTime=t)}),a.on("mouseup",function(){var t;n._dragged||n._editing||(t=n._fullLayout.legend,(new Date).getTime()-n._legendMouseDownTime>r&&(i=Math.max(i-1,1)),B(n,t,e,i,L.event))}))}function y(t,e,n,r){r._main||t.attr("data-notex",!0),c.convertToTspans(t,n,function(){!function(t,e,n){var r=t.data()[0][0];if(n._main&&r&&!r.trace.showlegend)return t.remove();var i,a,o,s=t.select("g[class*=math-group]"),l=s.node(),u=(n=n||e._fullLayout.legend).borderwidth,e=(r?n:n.title).font.size*f;l?(o=N.bBox(l),i=o.height,a=o.width,r?N.setTranslate(s,0,.25*i):N.setTranslate(s,u,.75*i+u)):(o=t.select(r?".legendtext":".legendtitletext"),s=c.lineCount(o),t=o.node(),i=e*s,a=t?N.bBox(t).width:0,t=e*((s-1)/2-.3),r?(s=n.itemwidth+2*D.itemGap,c.positionText(o,s,-t)):c.positionText(o,D.titlePad+u,e+u)),r?(r.lineHeight=e,r.height=Math.max(i,16)+3,r.width=a):(n._titleWidth=a,n._titleHeight=i)}(e,n,r)})}function U(t){return C.isRightAnchor(t)?"right":C.isCenterAnchor(t)?"center":"left"}function V(t){return C.isBottomAnchor(t)?"bottom":C.isMiddleAnchor(t)?"middle":"top"}e.exports=function(x,_){var w,t,k=x._fullLayout,M="legend"+k._uid;if(_?(w=_.layer,M+="-hover"):((_=k.legend||{})._main=!0,w=k._infolayer),w){if(x._legendMouseDownTime||(x._legendMouseDownTime=0),_._main){if(!x.calcdata)return;t=k.showlegend&&u(x.calcdata,_)}else{if(!_.entries)return;t=u(_.entries,_)}var n=k.hiddenlabels||[];if(_._main&&(!k.showlegend||!t.length))return w.selectAll(".legend").remove(),k._topdefs.select("#"+M).remove(),P.autoMargin(x,"legend");var T=C.ensureSingle(w,"g","legend",function(t){_._main&&t.attr("pointer-events","all")}),A=C.ensureSingleById(k._topdefs,"clipPath",M,function(t){t.append("rect")}),S=C.ensureSingle(T,"rect","bg",function(t){t.attr("shape-rendering","crispEdges")});S.call(s.stroke,_.bordercolor).call(s.fill,_.bgcolor).style("stroke-width",_.borderwidth+"px");var e,E=C.ensureSingle(T,"g","scrollbox"),r=_.title;_._titleWidth=0,_._titleHeight=0,r.text?((e=C.ensureSingle(E,"text","legendtitletext")).attr("text-anchor","start").call(N.font,r.font).text(r.text),y(e,E,x,_)):E.selectAll(".legendtitletext").remove();var O=C.ensureSingle(T,"rect","scrollbar",function(t){t.attr(D.scrollBarEnterAttrs).call(s.fill,D.scrollBarColor)}),i=E.selectAll("g.groups").data(t);i.enter().append("g").attr("class","groups"),i.exit().remove();var a=i.selectAll("g.traces").data(C.identity);a.enter().append("g").attr("class","traces"),a.exit().remove(),a.style("opacity",function(t){var e=t[0].trace;return R.traceIs(e,"pie-like")?-1!==n.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){L.select(this).call(d,x,_)}).call(h,x,_).each(function(){_._main&&L.select(this).call(g,x)}),C.syncOrAsync([P.previousPromises,function(){return function(t,e,n,i){var r=t._fullLayout;i=i||r.legend;var a=r._size,o=F.isVertical(i),s=F.isGrouped(i),l=i.borderwidth,u=2*l,c=D.itemGap,f=i.itemwidth+2*c,h=2*(l+c),d=V(i),p=i.y<0||0===i.y&&"top"===d,g=1<i.y||1===i.y&&"bottom"===d;i._maxHeight=Math.max(p||g?r.height/2:a.h,30);var y=0;i._width=0,i._height=0;var m=function(t){var e=0,n=0,r=t.title.side;r&&(-1!==r.indexOf("left")&&(e=t._titleWidth),-1!==r.indexOf("top")&&(n=t._titleHeight));return[e,n]}(i);{var v,b,x,_,w,k,M,T,A,S,E,O,C;o?(n.each(function(t){var e=t[0].height;N.setTranslate(this,l+m[0],l+m[1]+i._height+e/2+c),i._height+=e,i._width=Math.max(i._width,t[0].width)}),y=f+i._width,i._width+=c+f+u,i._height+=h,s&&(e.each(function(t,e){N.setTranslate(this,0,e*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap)):(v=U(i),b=i.x<0||0===i.x&&"right"===v,d=1<i.x||1===i.x&&"left"===v,p=g||p,r=r.width/2,i._maxWidth=Math.max(b?p&&"left"===v?a.l+a.w:r:d?p&&"right"===v?a.r+a.w:r:a.w,2*f),_=x=0,n.each(function(t){t=t[0].width+f;x=Math.max(x,t),_+=t}),y=null,w=0,s?(T=M=k=0,e.each(function(){var n=0,r=0;L.select(this).selectAll("g.traces").each(function(t){var e=t[0].height;N.setTranslate(this,m[0],m[1]+l+c+e/2+r),r+=e,n=Math.max(n,f+t[0].width)}),k=Math.max(k,r);var t=n+c;t+l+M>i._maxWidth&&(w=Math.max(w,M),M=0,T+=k+i.tracegroupgap,k=r),N.setTranslate(this,M,T),M+=t}),i._width=Math.max(w,M)+l,i._height=T+k+h):(e=n.size(),A=_+u+(e-1)*c<i._maxWidth,C=O=E=S=0,n.each(function(t){var e=t[0].height,n=f+t[0].width,t=(A?n:x)+c;t+l+E-c>=i._maxWidth&&(w=Math.max(w,C),E=0,O+=S,i._height+=S,S=0),N.setTranslate(this,m[0]+l+E,m[1]+l+O+e/2+c),C=E+n+c,E+=t,S=Math.max(S,e)}),A?(i._width=E+u,i._height=S+h):(i._width=Math.max(w,C)+u,i._height+=S+h)))}i._width=Math.ceil(Math.max(i._width+m[0],i._titleWidth+2*(l+D.titlePad))),i._height=Math.ceil(Math.max(i._height+m[1],i._titleHeight+2*(l+D.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var t=t._context.edits,P=t.legendText||t.legendPosition;n.each(function(t){var e=L.select(this).select(".legendtoggle"),n=t[0].height,t=P?f:y||f+t[0].width;o||(t+=c/2),N.setRect(e,0,-n/2,t,n)})}(x,i,a,_)},function(){var n,r,t,e,i,a,o,s,l,u,c,f,h,d,p,g,y,m,v;function b(t,e,n){_._scrollY=x._fullLayout.legend._scrollY=t,N.setTranslate(E,0,-t),N.setRect(O,_._width,D.scrollBarMargin+t*n,D.scrollBarWidth,e),A.select("rect").attr("y",r+t)}_._main&&(t=(i=x)._fullLayout.legend,a=U(t),e=V(t),P.autoMargin(i,"legend",{x:t.x,y:t.y,l:t._width*z[a],r:t._width*I[a],b:t._effHeight*I[e],t:t._effHeight*z[e]}))||(n=k._size,r=_.borderwidth,i=n.l+n.w*_.x-z[U(_)]*_._width,a=n.t+n.h*(1-_.y)-z[V(_)]*_._effHeight,_._main&&k.margin.autoexpand&&(t=i,e=a,i=C.constrain(i,0,k.width-_._width),a=C.constrain(a,0,k.height-_._effHeight),i!==t&&C.log("Constrain legend.x to make legend fit inside graph"),a!==e&&C.log("Constrain legend.y to make legend fit inside graph")),_._main&&N.setTranslate(T,i,a),O.on(".drag",null),T.on("wheel",null),!_._main||_._height<=_._maxHeight||x._context.staticPlot?(p=_._effHeight,_._main||(p=_._height),S.attr({width:_._width-r,height:p-r,x:r/2,y:r/2}),N.setTranslate(E,0,0),A.select("rect").attr({width:_._width-2*r,height:p-2*r,x:r,y:r}),N.setClipUrl(E,M,x),N.setRect(O,0,0,0,0),delete _._scrollY):(o=Math.max(D.scrollBarMinHeight,_._effHeight*_._effHeight/_._height),s=_._effHeight-o-2*D.scrollBarMargin,l=_._height-_._effHeight,u=s/l,c=Math.min(_._scrollY||0,l),S.attr({width:_._width-2*r+D.scrollBarWidth+D.scrollBarMargin,height:_._effHeight-r,x:r/2,y:r/2}),A.select("rect").attr({width:_._width-2*r+D.scrollBarWidth+D.scrollBarMargin,height:_._effHeight-2*r,x:r,y:r+c}),N.setClipUrl(E,M,x),b(c,o,u),T.on("wheel",function(){b(c=C.constrain(_._scrollY+L.event.deltaY/s*l,0,l),o,u),0!==c&&c!==l&&L.event.preventDefault()}),p=L.behavior.drag().on("dragstart",function(){var t=L.event.sourceEvent;f=("touchstart"===t.type?t.changedTouches[0]:t).clientY,d=c}).on("drag",function(){var t=L.event.sourceEvent;2===t.buttons||t.ctrlKey||(h=("touchmove"===t.type?t.changedTouches[0]:t).clientY,b(c=function(t,e,n){t=(n-e)/u+t;return C.constrain(t,0,l)}(d,f,h),o,u))}),O.call(p),p=L.behavior.drag().on("dragstart",function(){var t=L.event.sourceEvent;"touchstart"===t.type&&(f=t.changedTouches[0].clientY,d=c)}).on("drag",function(){var t=L.event.sourceEvent;"touchmove"===t.type&&(h=t.changedTouches[0].clientY,b(c=function(t,e,n){t=(e-n)/u+t;return C.constrain(t,0,l)}(d,f,h),o,u))}),E.call(p)),x._context.edits.legendPosition&&(T.classed("cursor-move",!0),j.init({element:T.node(),gd:x,prepFn:function(){var t=N.getTranslate(T);m=t.x,v=t.y},moveFn:function(t,e){t=m+t,e=v+e;N.setTranslate(T,t,e),g=j.align(t,0,n.l,n.l+n.w,_.xanchor),y=j.align(e,0,n.t+n.h,n.t,_.yanchor)},doneFn:function(){void 0!==g&&void 0!==y&&R.call("_guiRelayout",x,{"legend.x":g,"legend.y":y})},clickFn:function(t,e){var n=w.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=t.top&&e.clientY<=t.bottom});0<n.size()&&B(x,T,n,t,e)}})))}],x)}}},{"../../constants/alignment":396,"../../lib":424,"../../lib/events":416,"../../lib/svg_text_utils":447,"../../plots/plots":516,"../../registry":525,"../color":294,"../dragelement":313,"../drawing":316,"./constants":345,"./get_legend_data":348,"./handle_click":349,"./helpers":350,"./style":352,d3:277}],348:[function(t,e,n){"use strict";var x=t("../../registry"),_=t("./helpers");e.exports=function(t,n){var e,r,i={},a=[],o=!1,s={},l=0,u=0,c=n._main;function f(t,e){""!==t&&_.isGrouped(n)?-1===a.indexOf(t)?(a.push(t),o=!0,i[t]=[[e]]):i[t].push([e]):(t="~~i"+l,a.push(t),i[t]=[[e]],l++)}for(e=0;e<t.length;e++){var h=t[e],d=h[0],p=d.trace,g=p.legendgroup;if(!c||p.visible&&p.showlegend)if(x.traceIs(p,"pie-like"))for(s[g]||(s[g]={}),r=0;r<h.length;r++){var y=h[r].label;s[g][y]||(f(g,{label:y,color:h[r].color,i:h[r].i,trace:p,pts:h[r].pts}),s[g][y]=!0,u=Math.max(u,(y||"").length))}else f(g,d),u=Math.max(u,(p.name||"").length)}if(!a.length)return[];var m,v,b=a.length;if(o&&_.isGrouped(n))for(v=new Array(b),e=0;e<b;e++)m=i[a[e]],v[e]=_.isReversed(n)?m.reverse():m;else{for(v=[new Array(b)],e=0;e<b;e++)m=i[a[e]][0],v[0][_.isReversed(n)?b-e-1:e]=m;b=1}return n._lgroupsLength=b,n._maxNameLength=u,v}},{"../../registry":525,"./helpers":350}],349:[function(t,e,n){"use strict";var j=t("../../lib"),N=t("../../registry"),D=!0;e.exports=function(t,e,n){var r=e._fullLayout;if(!e._dragged&&!e._editing){var i,a=r.legend.itemclick,o=r.legend.itemdoubleclick;if(D=(1===n&&"toggle"===a&&"toggleothers"===o&&D&&e.data&&e._context.showTips&&j.notifier(j._(e,"Double-click on legend to isolate one trace"),"long"),!1),1===n?i=a:2===n&&(i=o),i){var s,l,u,c=r.hiddenlabels?r.hiddenlabels.slice():[],t=t.data()[0][0],f=e._fullData,h=t.trace,d=h.legendgroup,p={},g=[],y=[],m=[];if(N.traceIs(h,"pie-like")){var v=t.label,t=c.indexOf(v);"toggle"===i?-1===t?c.push(v):c.splice(t,1):"toggleothers"===i&&(c=[],e.calcdata[0].forEach(function(t){v!==t.label&&c.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===c.length&&-1===t&&(c=[])),N.call("_guiRelayout",e,"hiddenlabels",c)}else{var b,x,_=d&&d.length,w=[];if(_)for(E=0;E<f.length;E++)(b=f[E]).visible&&b.legendgroup===d&&w.push(E);if("toggle"===i){switch(h.visible){case!0:x="legendonly";break;case!1:x=!1;break;case"legendonly":x=!0}if(_)for(E=0;E<f.length;E++)!1!==f[E].visible&&f[E].legendgroup===d&&R(f[E],x);else R(h,x)}else if("toggleothers"===i){for(var k,M,T,A,S=!0,E=0;E<f.length;E++)if(k=f[E]===h,T=!0!==f[E].showlegend,!(k||T||(M=_&&f[E].legendgroup===d)||!0!==f[E].visible||N.traceIs(f[E],"notLegendIsolatable"))){S=!1;break}for(E=0;E<f.length;E++)if(!1!==f[E].visible&&!N.traceIs(f[E],"notLegendIsolatable"))switch(h.visible){case"legendonly":R(f[E],!0);break;case!0:A=!!S||"legendonly",k=f[E]===h,T=!0!==f[E].showlegend&&!f[E].legendgroup,M=k||_&&f[E].legendgroup===d,R(f[E],!(!M&&!T)||A)}}for(E=0;E<y.length;E++)if(s=y[E])for(var O=s.constructUpdate(),C=Object.keys(O),P=0;P<C.length;P++)l=C[P],(p[l]=p[l]||[])[m[E]]=O[l];for(u=Object.keys(p),E=0;E<u.length;E++)for(l=u[E],P=0;P<g.length;P++)p[l].hasOwnProperty(P)||(p[l][P]=void 0);N.call("_guiRestyle",e,p,g)}}}function L(t,e,n){var r=g.indexOf(t),i=(i=p[e])||(p[e]=[]);return-1===g.indexOf(t)&&(g.push(t),r=g.length-1),i[r]=n,r}function R(t,e){var n,r,i=t._fullInput;N.hasTransform(i,"groupby")?((n=y[i.index])||(r=(r=N.getTransformIndices(i,"groupby"))[r.length-1],n=j.keyedContainer(i,"transforms["+r+"].styles","target","value.visible"),y[i.index]=n),void 0===(r=n.get(t._group))&&(r=!0),!1!==r&&n.set(t._group,e),m[i.index]=L(i.index,"visible",!1!==i.visible)):(e=!1!==i.visible&&e,L(i.index,"visible",e))}}},{"../../lib":424,"../../registry":525}],350:[function(t,e,n){"use strict";n.isGrouped=function(t){return-1!==(t.traceorder||"").indexOf("grouped")},n.isVertical=function(t){return"h"!==t.orientation},n.isReversed=function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},{}],351:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":344,"./defaults":346,"./draw":347,"./style":352}],352:[function(t,e,n){"use strict";var y=t("d3"),o=t("../../registry"),m=t("../../lib"),s=m.strTranslate,v=t("../drawing"),c=t("../color"),b=t("../colorscale/helpers").extractOpts,x=t("../../traces/scatter/subtypes"),l=t("../../traces/pie/style_one"),u=t("../../traces/pie/helpers").castOption,i=t("./constants");function _(t,e){return(e?"radial":"horizontal")+(t?"":"reversed")}e.exports=function(t,d,a){var e=d._fullLayout,f="constant"===(a=a||e.legend).itemsizing,p=a.itemwidth,e=(p+2*i.itemGap)/2,h=s(e,0),g=function(t,e,n,r){var i;if(t+1)i=t;else{if(!(e&&0<e.width))return 0;i=e.width}return f?r:Math.min(i,n)};function r(t,e,n){var r=t[0].trace,i=r.marker||{},a=i.line||{},r=n?r.visible&&r.type===n:o.traceIs(r,"bar"),t=y.select(e).select("g.legendpoints").selectAll("path.legend"+n).data(r?[t]:[]);t.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",h),t.exit().remove(),t.each(function(t){var e=y.select(this),n=t[0],t=g(n.mlw,i.line,5,2);e.style("stroke-width",t+"px").call(c.fill,n.mc||i.color),t&&c.stroke(e,n.mlc||a.color)})}function n(t,e,n){var r=t[0],i=r.trace,a=n?i.visible&&i.type===n:o.traceIs(i,n),a=y.select(e).select("g.legendpoints").selectAll("path.legend"+n).data(a?[t]:[]);a.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",h),a.exit().remove(),a.size()&&(t=(i.marker||{}).line,n=g(u(t.width,r.pts),t,5,2),(n=m.minExtend(i,{marker:{line:{width:n}}})).marker.line.color=t.color,r=m.minExtend(r,{trace:n}),l(a,r,n))}t.each(function(t){var e=y.select(this),n=m.ensureSingle(e,"g","layers");n.style("opacity",t[0].trace.opacity);var r=a.valign,i=t[0].lineHeight,e=t[0].height;"middle"!==r&&i&&e?(e={top:1,bottom:-1}[r]*(.5*(i-e+3)),n.attr("transform",s(0,e))):n.attr("transform",null),n.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);n=n.selectAll("g.legendsymbols").data([t]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)}).each(function(t){var l,u=t[0].trace,e=[];if(u.visible)switch(u.type){case"histogram2d":case"heatmap":e=[["M-15,-2V4H15V-2Z"]],l=!0;break;case"choropleth":case"choroplethmapbox":e=[["M-6,-6V6H6V-6Z"]],l=!0;break;case"densitymapbox":e=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],l="radial";break;case"cone":l=!(e=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]]);break;case"streamtube":l=!(e=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]]);break;case"surface":e=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],l=!0;break;case"mesh3d":l=!(e=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]]);break;case"volume":e=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],l=!0;break;case"isosurface":l=!(e=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]])}t=y.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(e);t.enter().append("path").classed("legend3dandfriends",!0).attr("transform",h).style("stroke-miterlimit",1),t.exit().remove(),t.each(function(t,e){var n,r,i=y.select(this),a=b(u),o=a.colorscale,s=a.reversescale;o?l||(n=o.length,r=(0===e?o[s?n-1:0]:1===e?o[s?0:n-1]:o[Math.floor((n-1)/2)])[1]):(n=u.vertexcolor||u.facecolor||u.color,r=m.isArrayOrTypedArray(n)?n[e]||n[0]:n),i.attr("d",t[0]),r?i.call(c.fill,r):i.call(function(t){var e;t.size()&&(e="legendfill-"+u.uid,v.gradient(t,d,e,_(s,"radial"===l),o,"fill"))})})}).each(function(t){var i=t[0].trace,e="waterfall"===i.type;if(t[0]._distinct&&e){var n=t[0].trace[t[0].dir].marker;return t[0].mc=n.color,t[0].mlw=n.line.width,t[0].mlc=n.line.color,r(t,this,"waterfall")}n=[];i.visible&&e&&(n=t[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);n=y.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);n.enter().append("path").classed("legendwaterfall",!0).attr("transform",h).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(t){var e=y.select(this),n=i[t[0]].marker,r=g(void 0,n.line,5,2);e.attr("d",t[1]).style("stroke-width",r+"px").call(c.fill,n.color),r&&e.call(c.stroke,n.line.color)})}).each(function(t){r(t,this,"funnel")}).each(function(t){r(t,this)}).each(function(t){var n=t[0].trace,r=y.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&o.traceIs(n,"box-violin")?[t]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",h),r.exit().remove(),r.each(function(){var t,e=y.select(this);"all"!==n.boxpoints&&"all"!==n.points||0!==c.opacity(n.fillcolor)||0!==c.opacity((n.line||{}).color)?(t=g(void 0,n.line,5,2),e.style("stroke-width",t+"px").call(c.fill,n.fillcolor),t&&c.stroke(e,n.line.color)):(e=m.minExtend(n,{marker:{size:f?12:m.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),r.call(v.pointStyle,e,d))})}).each(function(t){n(t,this,"funnelarea")}).each(function(t){n(t,this,"pie")}).each(function(t){var e=t[0],n=e.trace,r=n.visible&&n.fill&&"none"!==n.fill,i=x.hasLines(n),a=n.contours,o=!1,s=!1,l=b(n),u=l.colorscale,c=l.reversescale;a&&("lines"===(f=a.coloring)?o=!0:i="none"===f||"heatmap"===f||a.showlines,"constraint"===a.type?r="="!==a._operation:"fill"!==f&&"heatmap"!==f||(s=!0));var l=x.hasMarkers(n)||x.hasText(n),a=r||s,f=i||o,a=l||!a?"M5,0":f?"M5,-2":"M5,-3",f=y.select(this),t=f.select(".legendfill").selectAll("path").data(r||s?[t]:[]);t.enter().append("path").classed("js-fill",!0),t.exit().remove(),t.attr("d",a+"h"+p+"v6h-"+p+"z").call(r?v.fillGroupStyle:function(t){var e;t.size()&&(e="legendfill-"+n.uid,v.gradient(t,d,e,_(c),u,"fill"))}),(i||o)&&(h=g(void 0,n.line,10,5),h=m.minExtend(n,{line:{width:h}}),h=[m.minExtend(e,{trace:h})]);var h=f.select(".legendlines").selectAll("path").data(i||o?[h]:[]);h.enter().append("path").classed("js-line",!0),h.exit().remove(),h.attr("d",a+(o?"l"+p+",0.0001":"h"+p)).call(i?v.lineGroupStyle:function(t){var e;t.size()&&(e="legendline-"+n.uid,v.lineGroupStyle(t),v.gradient(t,d,e,_(c),u,"stroke"))})}).each(function(t){var e=t[0],i=e.trace,n=x.hasMarkers(i),r=x.hasText(i),t=x.hasLines(i);function a(t,e,n,r){t=m.nestedProperty(i,t).get(),t=m.isArrayOrTypedArray(t)&&e?e(t):t;if(f&&t&&void 0!==r&&(t=r),n){if(t<n[0])return n[0];if(t>n[1])return n[1]}return t}function o(t){return e._distinct&&e.index&&t[e.index]?t[e.index]:t[0]}{var s;(n||r||t)&&(l={},u={},n&&(l.mc=a("marker.color",o),l.mx=a("marker.symbol",o),l.mo=a("marker.opacity",m.mean,[.2,1]),l.mlc=a("marker.line.color",o),l.mlw=a("marker.line.width",m.mean,[0,5],2),u.marker={sizeref:1,sizemin:1,sizemode:"diameter"},s=a("marker.size",m.mean,[2,16],12),l.ms=s,u.marker.size=s),t&&(u.line={width:a("line.width",o,[0,10],5)}),r&&(l.tx="Aa",l.tp=a("textposition",o),l.ts=10,l.tc=a("textfont.color",o),l.tf=a("textfont.family",o)),c=[m.minExtend(e,l)],(s=m.minExtend(i,u)).selectedpoints=null,s.texttemplate=null)}var l=y.select(this).select("g.legendpoints"),u=l.selectAll("path.scatterpts").data(n?c:[]);u.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",h),u.exit().remove(),u.call(v.pointStyle,s,d),n&&(c[0].mrc=3);var c=l.selectAll("g.pointtext").data(r?c:[]);c.enter().append("g").classed("pointtext",!0).append("text").attr("transform",h),c.exit().remove(),c.selectAll("text").call(v.textPointStyle,s,d)}).each(function(t){var i=t[0].trace,t=y.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(i.visible&&"candlestick"===i.type?[t,t]:[]);t.enter().append("path").classed("legendcandle",!0).attr("d",function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",h).style("stroke-miterlimit",1),t.exit().remove(),t.each(function(t,e){var n=y.select(this),r=i[e?"increasing":"decreasing"],e=g(void 0,r.line,5,2);n.style("stroke-width",e+"px").call(c.fill,r.fillcolor),e&&c.stroke(n,r.line.color)})}).each(function(t){var i=t[0].trace,t=y.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(i.visible&&"ohlc"===i.type?[t,t]:[]);t.enter().append("path").classed("legendohlc",!0).attr("d",function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",h).style("stroke-miterlimit",1),t.exit().remove(),t.each(function(t,e){var n=y.select(this),r=i[e?"increasing":"decreasing"],e=g(void 0,r.line,5,2);n.style("fill","none").call(v.dashLine,r.line.dash,e),e&&c.stroke(n,r.line.color)})})}},{"../../lib":424,"../../registry":525,"../../traces/pie/helpers":568,"../../traces/pie/style_one":569,"../../traces/scatter/subtypes":602,"../color":294,"../colorscale/helpers":305,"../drawing":316,"./constants":345,d3:277}],353:[function(t,e,n){"use strict";var g=t("../../registry"),r=t("../../plots/plots"),y=t("../../plots/cartesian/axis_ids"),i=t("../../fonts/ploticon"),a=t("../shapes/draw").eraseActiveShape,o=t("../../lib"),s=o._,e=e.exports={};function l(t,e){var n=e.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,a=t._fullLayout,o={},s=y.list(t,null,!0),l=a._cartesianSpikesEnabled;if("zoom"===r)for(var u,c,f,e="in"===i?.5:2,h=(1+e)/2,d=(1-e)/2,p=0;p<s.length;p++)(f=s[p]).fixedrange||(c=f._name,"auto"===i?o[c+".autorange"]=!0:"reset"===i?(void 0===f._rangeInitial?o[c+".autorange"]=!0:(u=f._rangeInitial.slice(),o[c+".range[0]"]=u[0],o[c+".range[1]"]=u[1]),void 0!==f._showSpikeInitial&&(o[c+".showspikes"]=f._showSpikeInitial,"on"!==l||f._showSpikeInitial||(l="off"))):(u=[h*(u=[f.r2l(f.range[0]),f.r2l(f.range[1])])[0]+d*u[1],h*u[1]+d*u[0]],o[c+".range[0]"]=f.l2r(u[0]),o[c+".range[1]"]=f.l2r(u[1])));else"hovermode"!==r||"x"!==i&&"y"!==i||(i=a._isHoriz?"y":"x",n.setAttribute("data-val",i)),o[r]=i;a._cartesianSpikesEnabled=l,g.call("_guiRelayout",t,o)}function u(t,e){for(var n=e.currentTarget,e=n.getAttribute("data-attr"),r=n.getAttribute("data-val")||!0,i=t._fullLayout._subplots.gl3d||[],a={},o=e.split("."),s=0;s<i.length;s++)a[i[s]+"."+o[1]]=r;e="pan"===r?r:"zoom";a.dragmode=e,g.call("_guiRelayout",t,a)}function c(t,e){for(var e=e.currentTarget.getAttribute("data-attr"),n="resetLastSave"===e,r="resetDefault"===e,i=t._fullLayout,a=i._subplots.gl3d||[],o={},s=0;s<a.length;s++){var l,u=a[s],c=u+".camera",f=u+".aspectratio",h=u+".aspectmode",u=i[u]._scene;n?(o[c+".up"]=u.viewInitial.up,o[c+".eye"]=u.viewInitial.eye,o[c+".center"]=u.viewInitial.center,l=!0):r&&(o[c+".up"]=null,o[c+".eye"]=null,l=!(o[c+".center"]=null)),l&&(o[f+".x"]=u.viewInitial.aspectratio.x,o[f+".y"]=u.viewInitial.aspectratio.y,o[f+".z"]=u.viewInitial.aspectratio.z,o[h]=u.viewInitial.aspectmode)}g.call("_guiRelayout",t,o)}function f(t,e){var n=e.currentTarget,e=n._previousVal,r=t._fullLayout,i=r._subplots.gl3d||[],a=["xaxis","yaxis","zaxis"],o={},s={};if(e)s=e,n._previousVal=null;else{for(var l=0;l<i.length;l++){var u=i[l],c=r[u],f=u+".hovermode";o[f]=c.hovermode,s[f]=!1;for(var h=0;h<3;h++){var d=a[h],p=u+"."+d+".showspikes";s[p]=!1,o[p]=c[d].showspikes}}n._previousVal=o}return s}function h(t,e){for(var e=e.currentTarget,n=e.getAttribute("data-attr"),r=e.getAttribute("data-val")||!0,i=t._fullLayout,a=i._subplots.geo||[],o=0;o<a.length;o++){var s=a[o],l=i[s];"zoom"===n&&(l=l.projection.scale,l="in"===r?2*l:.5*l,g.call("_guiRelayout",t,s+".projection.scale",l))}"reset"===n&&v(t,"geo")}function d(t){t=t._fullLayout;return!t.hovermode&&(t._has("cartesian")?t._isHoriz?"y":"x":"closest")}function p(t){var e=d(t);g.call("_guiRelayout",t,"hovermode",e)}function m(t,e){for(var n=e.currentTarget.getAttribute("data-val"),r=t._fullLayout,i=r._subplots.mapbox||[],a={},o=0;o<i.length;o++){var s=i[o],l=r[s].zoom,l="in"===n?1.05*l:l/1.05;a[s+".zoom"]=l}g.call("_guiRelayout",t,a)}function v(t,e){for(var n=t._fullLayout,r=n._subplots[e]||[],i={},a=0;a<r.length;a++)for(var o=r[a],s=n[o]._subplot.viewInitial,l=Object.keys(s),u=0;u<l.length;u++){var c=l[u];i[o+"."+c]=s[c]}g.call("_guiRelayout",t,i)}e.toImage={name:"toImage",title:function(t){var e=t._context.toImageButtonOptions||{};return s(t,"png"===(e.format||"png")?"Download plot as a png":"Download plot")},icon:i.camera,click:function(e){var n=e._context.toImageButtonOptions,r={format:n.format||"png"};o.notifier(s(e,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&o.isIE()&&(o.notifier(s(e,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(t){t in n&&(r[t]=n[t])}),g.call("downloadImage",e,r).then(function(t){o.notifier(s(e,"Snapshot succeeded")+" - "+t,"long")}).catch(function(){o.notifier(s(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}},e.sendDataToCloud={name:"sendDataToCloud",title:function(t){return s(t,"Edit in Chart Studio")},icon:i.disk,click:function(t){r.sendDataToCloud(t)}},e.editInChartStudio={name:"editInChartStudio",title:function(t){return s(t,"Edit in Chart Studio")},icon:i.pencil,click:function(t){r.sendDataToCloud(t)}},e.zoom2d={name:"zoom2d",title:function(t){return s(t,"Zoom")},attr:"dragmode",val:"zoom",icon:i.zoombox,click:l},e.pan2d={name:"pan2d",title:function(t){return s(t,"Pan")},attr:"dragmode",val:"pan",icon:i.pan,click:l},e.select2d={name:"select2d",title:function(t){return s(t,"Box Select")},attr:"dragmode",val:"select",icon:i.selectbox,click:l},e.lasso2d={name:"lasso2d",title:function(t){return s(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:i.lasso,click:l},e.drawclosedpath={name:"drawclosedpath",title:function(t){return s(t,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:i.drawclosedpath,click:l},e.drawopenpath={name:"drawopenpath",title:function(t){return s(t,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:i.drawopenpath,click:l},e.drawline={name:"drawline",title:function(t){return s(t,"Draw line")},attr:"dragmode",val:"drawline",icon:i.drawline,click:l},e.drawrect={name:"drawrect",title:function(t){return s(t,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:i.drawrect,click:l},e.drawcircle={name:"drawcircle",title:function(t){return s(t,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:i.drawcircle,click:l},e.eraseshape={name:"eraseshape",title:function(t){return s(t,"Erase active shape")},icon:i.eraseshape,click:a},e.zoomIn2d={name:"zoomIn2d",title:function(t){return s(t,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:l},e.zoomOut2d={name:"zoomOut2d",title:function(t){return s(t,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:l},e.autoScale2d={name:"autoScale2d",title:function(t){return s(t,"Autoscale")},attr:"zoom",val:"auto",icon:i.autoscale,click:l},e.resetScale2d={name:"resetScale2d",title:function(t){return s(t,"Reset axes")},attr:"zoom",val:"reset",icon:i.home,click:l},e.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return s(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:l},e.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return s(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:i.tooltip_compare,gravity:"ne",click:l},e.zoom3d={name:"zoom3d",title:function(t){return s(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:i.zoombox,click:u},e.pan3d={name:"pan3d",title:function(t){return s(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:i.pan,click:u},e.orbitRotation={name:"orbitRotation",title:function(t){return s(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:i["3d_rotate"],click:u},e.tableRotation={name:"tableRotation",title:function(t){return s(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:i["z-axis"],click:u},e.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return s(t,"Reset camera to default")},attr:"resetDefault",icon:i.home,click:c},e.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return s(t,"Reset camera to last save")},attr:"resetLastSave",icon:i.movie,click:c},e.hoverClosest3d={name:"hoverClosest3d",title:function(t){return s(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(t,e){e=f(t,e);g.call("_guiRelayout",t,e)}},e.zoomInGeo={name:"zoomInGeo",title:function(t){return s(t,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:h},e.zoomOutGeo={name:"zoomOutGeo",title:function(t){return s(t,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:h},e.resetGeo={name:"resetGeo",title:function(t){return s(t,"Reset")},attr:"reset",val:null,icon:i.autoscale,click:h},e.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return s(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:p},e.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return s(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:p},e.hoverClosestPie={name:"hoverClosestPie",title:function(t){return s(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:p},e.resetViewSankey={name:"resetSankeyGroup",title:function(t){return s(t,"Reset view")},icon:i.home,click:function(t){for(var e={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<t._fullData.length;n++){var r=t._fullData[n]._viewInitial;e["node.groups"].push(r.node.groups.slice()),e["node.x"].push(r.node.x.slice()),e["node.y"].push(r.node.y.slice())}g.call("restyle",t,e)}},e.toggleHover={name:"toggleHover",title:function(t){return s(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(t,e){e=f(t,e);e.hovermode=d(t),g.call("_guiRelayout",t,e)}},e.resetViews={name:"resetViews",title:function(t){return s(t,"Reset views")},icon:i.home,click:function(t,e){var n=e.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),l(t,e),n.setAttribute("data-attr","resetLastSave"),c(t,e),v(t,"geo"),v(t,"mapbox")}},e.toggleSpikelines={name:"toggleSpikelines",title:function(t){return s(t,"Toggle Spike Lines")},icon:i.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout,n=e._cartesianSpikesEnabled;e._cartesianSpikesEnabled="on"===n?"off":"on",g.call("_guiRelayout",t,function(t){for(var e="on"===t._fullLayout._cartesianSpikesEnabled,n=y.list(t,null,!0),r={},i=0;i<n.length;i++){var a=n[i];r[a._name+".showspikes"]=e||a._showSpikeInitial}return r}(t))}},e.resetViewMapbox={name:"resetViewMapbox",title:function(t){return s(t,"Reset view")},attr:"reset",icon:i.home,click:function(t){v(t,"mapbox")}},e.zoomInMapbox={name:"zoomInMapbox",title:function(t){return s(t,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:m},e.zoomOutMapbox={name:"zoomOutMapbox",title:function(t){return s(t,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:m}},{"../../fonts/ploticon":406,"../../lib":424,"../../plots/cartesian/axis_ids":474,"../../plots/plots":516,"../../registry":525,"../shapes/draw":375}],354:[function(t,e,n){"use strict";n.manage=t("./manage")},{"./manage":355}],355:[function(t,e,n){"use strict";var T=t("../../plots/cartesian/axis_ids"),A=t("../../traces/scatter/subtypes"),S=t("../../registry"),E=t("../fx/helpers").isUnifiedHover,a=t("./modebar"),O=t("./buttons");e.exports=function(t){var e=t._fullLayout,n=t._context,r=e._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i=n.modeBarButtons,n=Array.isArray(i)&&i.length?function(t){for(var e=0;e<t.length;e++)for(var n=t[e],r=0;r<n.length;r++){var i=n[r];if("string"==typeof i){if(void 0===O[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][r]=O[i]}}return t}(i):!n.displayModeBar&&n.watermark?[]:function(t){var e=t._fullLayout,n=t._fullData,r=t._context,i=r.modeBarButtonsToRemove,a=r.modeBarButtonsToAdd,o=e._has("cartesian"),s=e._has("gl3d"),l=e._has("geo"),u=e._has("pie"),c=e._has("funnelarea"),f=e._has("gl2d"),h=e._has("ternary"),d=e._has("mapbox"),p=e._has("polar"),g=e._has("sankey"),y=function(t){for(var e=T.list({_fullLayout:t},null,!0),n=0;n<e.length;n++)if(!e[n].fixedrange)return!1;return!0}(e),m=E(e.hovermode),v=[];function b(t){if(t.length){for(var e=[],n=0;n<t.length;n++){var r=t[n];-1===i.indexOf(r)&&e.push(O[r])}v.push(e)}}var x=["toImage"];r.showEditInChartStudio?x.push("editInChartStudio"):r.showSendToCloud&&x.push("sendDataToCloud");b(x);var t=[],r=[],x=[],_=[];1<(o||f||u||c||h)+l+s+d+p?(r=["toggleHover"],x=["resetViews"]):l?(t=["zoomInGeo","zoomOutGeo"],r=["hoverClosestGeo"],x=["resetGeo"]):s?(r=["hoverClosest3d"],x=["resetCameraDefault3d","resetCameraLastSave3d"]):d?(t=["zoomInMapbox","zoomOutMapbox"],r=["toggleHover"],x=["resetViewMapbox"]):f?r=["hoverClosestGl2d"]:u?r=["hoverClosestPie"]:g?(r=["hoverClosestCartesian","hoverCompareCartesian"],x=["resetViewSankey"]):r=["toggleHover"];o&&(r=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(t){for(var e=0;e<t.length;e++)if(!S.traceIs(t[e],"noHover"))return!1;return!0}(n)||m)&&(r=[]);!o&&!f||y||(t=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==x[0]&&(x=["resetScale2d"]));s?_=["zoom3d","pan3d","orbitRotation","tableRotation"]:(o||f)&&!y||h?_=["zoom2d","pan2d"]:d||l?_=["pan2d"]:p&&(_=["zoom2d"]);!function(t){for(var e=!1,n=0;n<t.length&&!e;n++){var r=t[n];r._module&&r._module.selectPoints&&(S.traceIs(r,"scatter-like")?(A.hasMarkers(r)||A.hasText(r))&&(e=!0):S.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(e=!0))}return e}(n)||_.push("select2d","lasso2d");if(Array.isArray(a)){for(var w=[],k=0;k<a.length;k++){var M=a[k];"string"==typeof M?-1!==C.indexOf(M)&&(e._has("mapbox")||e._has("cartesian"))&&_.push(M):w.push(M)}a=w}return b(_),b(t.concat(x)),b(r),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}(v,a)}(t);r?r.update(t,n):e._modeBar=a(t,n)}else r&&(r.destroy(),delete e._modeBar)};var C=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"]},{"../../plots/cartesian/axis_ids":474,"../../registry":525,"../../traces/scatter/subtypes":602,"../fx/helpers":330,"./buttons":353,"./modebar":356}],356:[function(t,e,n){"use strict";var o=t("d3"),i=t("fast-isnumeric"),s=t("../../lib"),a=t("../../fonts/ploticon"),l=new DOMParser;function r(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}t=r.prototype;t.update=function(t,e){this.graphInfo=t;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",e=e.reverse());var a=r.modebar,t="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(i),s.addRelatedStyleRule(i,t+"#"+i+" .modebar-group","background-color: "+a.bgcolor),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+a.color),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+a.activecolor),s.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+a.activecolor);t=!this.hasButtons(e),i=this.hasLogo!==n.displaylogo,a=this.locale!==n.locale;this.locale=n.locale,(t||i||a)&&(this.removeAllButtons(),this.updateButtons(e),(n.watermark||n.displaylogo)&&(e=this.getLogo(),n.watermark&&(e.className=e.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(e,this.element.childNodes[0]):this.element.appendChild(e),this.hasLogo=!0)),this.updateActiveButton()},t.updateButtons=function(t){var r=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var n=r.createGroup();t.forEach(function(t){var e=t.name;if(!e)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(e))throw new Error("button name '"+e+"' is taken");r.buttonsNames.push(e);t=r.createButton(t);r.buttonElements.push(t),n.appendChild(t)}),r.element.appendChild(n)})},t.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},t.createButton=function(e){var n=this,t=document.createElement("a");t.setAttribute("rel","tooltip"),t.className="modebar-btn";var r=e.title;void 0===r?r=e.name:"function"==typeof r&&(r=r(this.graphInfo)),!r&&0!==r||t.setAttribute("data-title",r),void 0!==e.attr&&t.setAttribute("data-attr",e.attr);r=e.val;if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),t.setAttribute("data-val",r)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");t.addEventListener("click",function(t){e.click(n.graphInfo,t),n.updateActiveButton(t.currentTarget)}),t.setAttribute("data-toggle",e.toggle||!1),e.toggle&&o.select(t).classed("active",!0);r=e.icon;return"function"==typeof r?t.appendChild(r()):t.appendChild(this.createIcon(r||a.question)),t.setAttribute("data-gravity",e.gravity||"n"),t},t.createIcon=function(t){var e,n=i(t.height)?Number(t.height):t.ascent-t.descent,r="http://www.w3.org/2000/svg";return t.path&&((e=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,t.width,n].join(" ")),e.setAttribute("class","icon"),(r=document.createElementNS(r,"path")).setAttribute("d",t.path),t.transform?r.setAttribute("transform",t.transform):void 0!==t.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),e.appendChild(r)),t.svg&&(e=l.parseFromString(t.svg,"application/xml").childNodes[0]),e.setAttribute("height","1em"),e.setAttribute("width","1em"),e},t.updateActiveButton=function(t){var i=this.graphInfo._fullLayout,a=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(t){var e=t.getAttribute("data-val")||!0,n=t.getAttribute("data-attr"),r="true"===t.getAttribute("data-toggle"),t=o.select(t);r?n===a&&t.classed("active",!t.classed("active")):(n=null===n?n:s.nestedProperty(i,n).get(),t.classed("active",n===e))})},t.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n){if(t[n].length!==e[n].length)return!1;for(var r=0;r<t[n].length;r++)if(t[n][r].name!==e[n][r].name)return!1}return!0},t.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plotly.com/",e.target="_blank",e.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(a.newplotlylogo)),t.appendChild(e),t},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},e.exports=function(t,e){var n=t._fullLayout,e=new r({graphInfo:t,container:n._modebardiv.node(),buttons:e});return n._privateplot&&o.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),e}},{"../../fonts/ploticon":406,"../../lib":424,d3:277,"fast-isnumeric":99}],357:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes"),t=(0,t("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});e.exports={visible:{valType:"boolean",editType:"plot"},buttons:t,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":460,"../../plots/font_attributes":499,"../color/attributes":293}],358:[function(t,e,n){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],359:[function(t,e,n){"use strict";var l=t("../../lib"),u=t("../color"),c=t("../../plot_api/plot_template"),f=t("../../plots/array_container_defaults"),h=t("./attributes"),d=t("./constants");function p(n,r,t,e){var i=e.calendar;function a(t,e){return l.coerce(n,r,h.buttons,t,e)}a("visible")&&("all"!==(e=a("step"))&&(!i||"gregorian"===i||"month"!==e&&"year"!==e?a("stepmode"):r.stepmode="backward",a("count")),a("label"))}e.exports=function(t,e,n,r,i){var a=t.rangeselector||{},o=c.newContainer(e,"rangeselector");function s(t,e){return l.coerce(a,o,h,t,e)}s("visible",0<f(a,o,{name:"buttons",handleItemDefaults:p,calendar:i}).length)&&(s("x",(r=function(e,n,t){for(var r=t.filter(function(t){return n[t].anchor===e._id}),i=0,a=0;a<r.length;a++){var o=n[r[a]].domain;o&&(i=Math.max(o[1],i))}return[e.domain[0],i+d.yPad]}(e,n,r))[0]),s("y",r[1]),l.noneOrAll(t,e,["x","y"]),s("xanchor"),s("yanchor"),l.coerceFont(s,"font",n.font),n=s("bgcolor"),s("activecolor",u.contrast(n,d.lightAmount,d.darkAmount)),s("bordercolor"),s("borderwidth"))}},{"../../lib":424,"../../plot_api/plot_template":460,"../../plots/array_container_defaults":466,"../color":294,"./attributes":357,"./constants":358}],360:[function(t,e,n){"use strict";var f=t("d3"),o=t("../../registry"),h=t("../../plots/plots"),r=t("../color"),d=t("../drawing"),p=t("../../lib"),g=p.strTranslate,y=t("../../lib/svg_text_utils"),s=t("../../plots/cartesian/axis_ids"),i=t("../../constants/alignment"),m=i.LINE_SPACING,v=i.FROM_TL,b=i.FROM_BR,x=t("./constants"),l=t("./get_update_object");function u(t){return t._id}function c(t,e,n){t=p.ensureSingle(t,"rect","selector-rect",function(t){t.attr("shape-rendering","crispEdges")});t.attr({rx:x.rx,ry:x.ry}),t.call(r.stroke,e.bordercolor).call(r.fill,(t=e,(n=n)._isActive||n._isHovered?t.activecolor:t.bgcolor)).style("stroke-width",e.borderwidth+"px")}function _(t,e,n,r){p.ensureSingle(t,"text","selector-text",function(t){t.attr("text-anchor","middle")}).call(d.font,e.font).text(function(t,e){if(t.label)return e?p.templateString(t.label,e):t.label;return"all"===t.step?"all":t.count+t.step.charAt(0)}(n,r._fullLayout._meta)).call(function(t){y.convertToTspans(t,r)})}e.exports=function(a){var t=a._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=s.list(t,"x",!0),n=[],r=0;r<e.length;r++){var i=e[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(a),u);t.enter().append("g").classed("rangeselector",!0),t.exit().remove(),t.style({cursor:"pointer","pointer-events":"all"}),t.each(function(t){var e=f.select(this),r=t,i=r.rangeselector,t=e.selectAll("g.button").data(p.filterVisible(i.buttons));t.enter().append("g").classed("button",!0),t.exit().remove(),t.each(function(t){var e=f.select(this),n=l(r,t);t._isActive=function(t,e,n){{if("all"===e.step)return!0===t.autorange;e=Object.keys(n);return t.range[0]===n[e[0]]&&t.range[1]===n[e[1]]}}(r,t,n),e.call(c,i,t),e.call(_,i,t,a),e.on("click",function(){a._dragged||o.call("_guiRelayout",a,n)}),e.on("mouseover",function(){t._isHovered=!0,e.call(c,i,t)}),e.on("mouseout",function(){t._isHovered=!1,e.call(c,i,t)})}),function(t,e,o,n,r){var s=0,l=0,u=o.borderwidth;e.each(function(){var t=f.select(this).select(".selector-text"),e=o.font.size*m,t=Math.max(e*y.lineCount(t),16)+3;l=Math.max(l,t)}),e.each(function(){var t=f.select(this),e=t.select(".selector-rect"),n=t.select(".selector-text"),r=n.node()&&d.bBox(n.node()).width,i=o.font.size*m,a=y.lineCount(n),r=Math.max(r+10,x.minButtonWidth);t.attr("transform",g(u+s,u)),e.attr({x:0,y:0,width:r,height:l}),y.positionText(n,r/2,l/2-(a-1)*i/2+3),s+=r+5});var i=t._fullLayout._size,a=i.l+i.w*o.x,c=i.t+i.h*(1-o.y),e="left";p.isRightAnchor(o)&&(a-=s,e="right"),p.isCenterAnchor(o)&&(a-=s/2,e="center"),i="top",p.isBottomAnchor(o)&&(c-=l,i="bottom"),p.isMiddleAnchor(o)&&(c-=l/2,i="middle"),s=Math.ceil(s),l=Math.ceil(l),a=Math.round(a),c=Math.round(c),h.autoMargin(t,n+"-range-selector",{x:o.x,y:o.y,l:s*v[e],r:s*b[e],b:l*b[i],t:l*v[i]}),r.attr("transform",g(a,c))}(a,t,i,r._name,e)})}},{"../../constants/alignment":396,"../../lib":424,"../../lib/svg_text_utils":447,"../../plots/cartesian/axis_ids":474,"../../plots/plots":516,"../../registry":525,"../color":294,"../drawing":316,"./constants":358,"./get_update_object":361,d3:277}],361:[function(t,e,n){"use strict";var l=t("d3");e.exports=function(t,e){var n=t._name,r={};return"all"===e.step?r[n+".autorange"]=!0:(e=function(t,e){var n,r=t.range,i=new Date(t.r2l(r[1])),a=e.step,o=e.count;switch(e.stepmode){case"backward":n=t.l2r(+l.time[a].utc.offset(i,-o));break;case"todate":var s=l.time[a].utc.offset(i,-o);n=t.l2r(+l.time[a].utc.ceil(s))}r=r[1];return[n,r]}(t,e),r[n+".range[0]"]=e[0],r[n+".range[1]"]=e[1]),r}},{d3:277}],362:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":357,"./defaults":359,"./draw":360}],363:[function(t,e,n){"use strict";t=t("../color/attributes");e.exports={bgcolor:{valType:"color",dflt:t.background,editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":293}],364:[function(t,e,n){"use strict";var a=t("../../plots/cartesian/axis_ids").list,o=t("../../plots/cartesian/autorange").getAutoRange,s=t("./constants");e.exports=function(t){for(var e=a(t,"x",!0),n=0;n<e.length;n++){var r=e[n],i=r[s.name];i&&i.visible&&i.autorange&&(i._input.autorange=!0,i._input.range=i.range=o(t,r))}}},{"../../plots/cartesian/autorange":470,"../../plots/cartesian/axis_ids":474,"./constants":365}],365:[function(t,e,n){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],366:[function(t,e,n){"use strict";var p=t("../../lib"),g=t("../../plot_api/plot_template"),y=t("../../plots/cartesian/axis_ids"),m=t("./attributes"),v=t("./oppaxis_attributes");e.exports=function(t,e,n){var r=t[n],t=e[n];if(r.rangeslider||e._requestRangeslider[t._id]){p.isPlainObject(r.rangeslider)||(r.rangeslider={});var i=r.rangeslider,a=g.newContainer(t,"rangeslider");if(h("visible")){h("bgcolor",e.plot_bgcolor),h("bordercolor"),h("borderwidth"),h("thickness"),h("autorange",!t.isValidRange(i.range)),h("range");t=e._subplots;if(t)for(var t=t.cartesian.filter(function(t){return t.substr(0,t.indexOf("y"))===y.name2id(n)}).map(function(t){return t.substr(t.indexOf("y"),t.length)}),o=p.simpleMap(t,y.id2name),s=0;s<o.length;s++){var l,u=o[s],c=i[u]||{},f=g.newContainer(a,u,"yaxis"),u=e[u];c.range&&u.isValidRange(c.range)&&(l="fixed"),"match"!==d("rangemode",l)&&d("range",u.range.slice())}a._input=i}}function h(t,e){return p.coerce(i,a,m,t,e)}function d(t,e){return p.coerce(c,f,v,t,e)}}},{"../../lib":424,"../../plot_api/plot_template":460,"../../plots/cartesian/axis_ids":474,"./attributes":363,"./oppaxis_attributes":370}],367:[function(t,e,n){"use strict";var R=t("d3"),j=t("../../registry"),h=t("../../plots/plots"),N=t("../../lib"),D=N.strTranslate,o=t("../drawing"),l=t("../color"),z=t("../titles"),d=t("../../plots/cartesian"),I=t("../../plots/cartesian/axis_ids"),F=t("../dragelement"),B=t("../../lib/setcursor"),U=t("./constants");function V(t,e,n,r){var i=N.ensureSingle(t,"rect",U.bgClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,t=-r._offsetShift,e=o.crispRound(e,r.borderwidth);i.attr({width:r._width+a,height:r._height+a,transform:D(t,t),fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":e})}function H(t,e,n,r){e=e._fullLayout;N.ensureSingleById(e._topdefs,"clipPath",r._clipId,function(t){t.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function q(t,s,l,u){var c,f=s.calcdata,t=t.selectAll("g."+U.rangePlotClassName).data(l._subplotsWith,N.identity);t.enter().append("g").attr("class",function(t){return U.rangePlotClassName+" "+t}).call(o.setClipUrl,u._clipId,s),t.order(),t.exit().remove(),t.each(function(t,e){var n=R.select(this),r=0===e,i=I.getFromId(s,t,"y"),a=i._name,o=u[a],e={data:[],layout:{xaxis:{type:l.type,domain:[0,1],range:u.range.slice(),calendar:l.calendar},width:u._width,height:u._height,margin:{t:0,b:0,l:0,r:0}},_context:s._context};l.rangebreaks&&(e.layout.xaxis.rangebreaks=l.rangebreaks),e.layout[a]={type:i.type,domain:[0,1],range:("match"!==o.rangemode?o:i).range.slice(),calendar:i.calendar},i.rangebreaks&&(e.layout[a].rangebreaks=i.rangebreaks),h.supplyDefaults(e);i=e._fullLayout.xaxis,a=e._fullLayout[a];i.clearCalc(),i.setScale(),a.clearCalc(),a.setScale();a={id:t,plotgroup:n,xaxis:i,yaxis:a,isRangePlot:!0};r?c=a:(a.mainplot="xy",a.mainplotinfo=c),d.rangePlot(s,a,function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],a=i[0].trace;a.xaxis+a.yaxis===e&&n.push(i)}return n}(f,t))})}function G(t,e,n,r,i){N.ensureSingle(t,"rect",U.maskMinClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,U.maskColor),N.ensureSingle(t,"rect",U.maskMaxClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,U.maskColor),"match"!==i.rangemode&&(N.ensureSingle(t,"rect",U.maskMinOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(l.fill,U.maskOppAxisColor),N.ensureSingle(t,"rect",U.maskMaxOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",U.maskOppBorder).call(l.fill,U.maskOppAxisColor))}function Y(t,e,n,r){e._context.staticPlot||N.ensureSingle(t,"rect",U.slideBoxClassName,function(t){t.attr({y:0,cursor:U.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:U.slideBoxFill})}function X(t,e,n,r){var i=N.ensureSingle(t,"g",U.grabberMinClassName),a=N.ensureSingle(t,"g",U.grabberMaxClassName),o={x:0,width:U.handleWidth,rx:U.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":U.handleStrokeWidth,"shape-rendering":"crispEdges"},t={y:Math.round(r._height/4),height:Math.round(r._height/2)};N.ensureSingle(i,"rect",U.handleMinClassName,function(t){t.attr(o)}).attr(t),N.ensureSingle(a,"rect",U.handleMaxClassName,function(t){t.attr(o)}).attr(t);var s={width:U.grabAreaWidth,x:0,y:0,fill:U.grabAreaFill,cursor:e._context.staticPlot?void 0:U.grabAreaCursor};N.ensureSingle(i,"rect",U.grabAreaMinClassName,function(t){t.attr(s)}).attr("height",r._height),N.ensureSingle(a,"rect",U.grabAreaMaxClassName,function(t){t.attr(s)}).attr("height",r._height)}e.exports=function(P){for(var L=P._fullLayout,t=L._rangeSliderData,e=0;e<t.length;e++){var n=t[e][U.name];n._clipId=n._id+"-"+L._uid}var r=L._infolayer.selectAll("g."+U.containerClassName).data(t,function(t){return t._name});r.exit().each(function(t){t=t[U.name];L._topdefs.select("#"+t._clipId).remove()}).remove(),0!==t.length&&(r.enter().append("g").classed(U.containerClassName,!0).attr("pointer-events","all"),r.each(function(t){var e=R.select(this),n=t[U.name],r=L[I.id2name(t.anchor)],i=n[I.id2name(t.anchor)];n.range&&(a=N.simpleMap(n.range,t.r2l),s=(o=N.simpleMap(t.range,t.r2l))[0]<o[1]?[Math.min(a[0],o[0]),Math.max(a[1],o[1])]:[Math.max(a[0],o[0]),Math.min(a[1],o[1])],n.range=n._input.range=N.simpleMap(s,t.l2r)),t.cleanRange("rangeslider.range");var a=L._size,o=t.domain;n._width=a.w*(o[1]-o[0]);var s=Math.round(a.l+a.w*o[0]),o=Math.round(a.t+a.h*(1-t._counterDomainMin)+("bottom"===t.side?t._depth:0)+n._offsetShift+U.extraPad);e.attr("transform",D(s,o)),n._rl=N.simpleMap(n.range,t.r2l);var l,u,c,m,v,b,x,_,w,f,h,d=n._rl[0],a=n._rl[1],p=a-d;if(n.p2d=function(t){return t/n._width*p+d},n.d2p=function(t){return(t-d)/p*n._width},t.rangebreaks){var g=t.locateBreaks(d,a);if(g.length){for(var y,k=0,M=0;M<g.length;M++)k+=(y=g[M]).max-y.min;var T=n._width/(a-d-k),A=[-T*d];for(M=0;M<g.length;M++)y=g[M],A.push(A[A.length-1]-T*(y.max-y.min));for(n.d2p=function(t){for(var e=A[0],n=0;n<g.length;n++){var r=g[n];if(t>=r.max)e=A[n+1];else if(t<r.min)break}return e+T*t},M=0;M<g.length;M++)(y=g[M]).pmin=n.d2p(y.min),y.pmax=n.d2p(y.max);n.p2d=function(t){for(var e=A[0],n=0;n<g.length;n++){var r=g[n];if(t>=r.pmax)e=A[n+1];else if(t<r.pmin)break}return(t-e)/T}}}function S(){var t=R.event,f=t.target,h=t.clientX||t.touches[0].clientX,d=h-c.node().getBoundingClientRect().left,p=b.d2p(v._rl[0]),g=b.d2p(v._rl[1]),y=F.coverSlip();function e(t){var e,n,r,i,a,o,s,l,u=+(t.clientX||t.touches[0].clientX)-h;switch(f){case x:e="ew-resize",r=p+u,n=g+u;break;case _:e="col-resize",r=p+u,n=g;break;case w:e="col-resize",r=p,n=g+u;break;default:e="ew-resize",n=(r=d)+u}function c(t){return a.l2r(N.constrain(t,o._rl[0],o._rl[1]))}n<r&&(t=n,n=r,r=t),b._pixelMin=r,b._pixelMax=n,B(R.select(y),e),i=m,a=v,s=c((o=b).p2d(o._pixelMin)),l=c(o.p2d(o._pixelMax)),window.requestAnimationFrame(function(){j.call("_guiRelayout",i,a._name+".range",[s,l])})}function n(){y.removeEventListener("mousemove",e),y.removeEventListener("mouseup",n),this.removeEventListener("touchmove",e),this.removeEventListener("touchend",n),N.removeElement(y)}this.addEventListener("touchmove",e),this.addEventListener("touchend",n),y.addEventListener("mousemove",e),y.addEventListener("mouseup",n)}function E(t){return N.constrain(t,0,f._width)}function O(t){return N.constrain(t,0,f._height)}function C(t){return N.constrain(t,-h,f._width+h)}"match"!==i.rangemode&&(l=r.r2l(i.range[0]),u=r.r2l(i.range[1])-l,n.d2pOppAxis=function(t){return(t-l)/u*n._height}),e.call(V,P,t,n).call(H,P,t,n).call(q,P,t,n).call(G,P,t,n,i).call(Y,P,t,n).call(X,P,t,n),c=e,v=t,b=n,(m=P)._context.staticPlot||(x=c.select("rect."+U.slideBoxClassName).node(),_=c.select("rect."+U.grabAreaMinClassName).node(),w=c.select("rect."+U.grabAreaMaxClassName).node(),c.on("mousedown",S),c.on("touchstart",S)),s=e,a=t,f=n,e=r,r=i,h=U.handleWidth/2,i=E(f.d2p(a._rl[0])),a=E(f.d2p(a._rl[1])),s.select("rect."+U.slideBoxClassName).attr("x",i).attr("width",a-i),s.select("rect."+U.maskMinClassName).attr("width",i),s.select("rect."+U.maskMaxClassName).attr("x",a).attr("width",f._width-a),"match"!==r.rangemode&&(r=f._height-O(f.d2pOppAxis(e._rl[1])),e=f._height-O(f.d2pOppAxis(e._rl[0])),s.select("rect."+U.maskMinOppAxisClassName).attr("x",i).attr("height",r).attr("width",a-i),s.select("rect."+U.maskMaxOppAxisClassName).attr("x",i).attr("y",e).attr("height",f._height-e).attr("width",a-i),s.select("rect."+U.slideBoxClassName).attr("y",r).attr("height",e-r)),i=Math.round(C(i-h))-.5,a=Math.round(C(a-h))+.5,s.select("g."+U.grabberMinClassName).attr("transform",D(i,.5)),s.select("g."+U.grabberMaxClassName).attr("transform",D(a,.5)),"bottom"===t.side&&z.draw(P,t._id+"title",{propContainer:t,propName:t._name+".title",placeholder:L._dfltTitle.x,attributes:{x:t._offset+t._length/2,y:o+n._height+n._offsetShift+10+1.5*t.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":424,"../../lib/setcursor":443,"../../plots/cartesian":484,"../../plots/cartesian/axis_ids":474,"../../plots/plots":516,"../../registry":525,"../color":294,"../dragelement":313,"../drawing":316,"../titles":389,"./constants":365,d3:277}],368:[function(t,e,n){"use strict";var s=t("../../plots/cartesian/axis_ids"),o=t("../../lib/svg_text_utils"),l=t("./constants"),u=t("../../constants/alignment").LINE_SPACING,c=l.name;function f(t){t=t&&t[c];return t&&t.visible}n.isVisible=f,n.makeData=function(t){var e=s.list({_fullLayout:t},"x",!0),n=t.margin,r=[];if(!t._has("gl2d"))for(var i=0;i<e.length;i++){var a,o=e[i];f(o)&&(r.push(o),(a=o[c])._id=c+o._id,a._height=(t.height-n.b-n.t)*a.thickness,a._offsetShift=Math.floor(a.borderwidth/2))}t._rangeSliderData=r},n.autoMarginOpts=function(t,e){var n=t._fullLayout,r=e[c],i=e._id.charAt(0),a=0,t=0;return"bottom"===e.side&&(a=e._depth,e.title.text!==n._dfltTitle[i]&&(t=1.5*e.title.font.size+10+r._offsetShift,t+=(e.title.text.match(o.BR_TAG_ALL)||[]).length*e.title.font.size*u)),{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(n.margin.b,t),pad:l.extraPad+2*r._offsetShift}}},{"../../constants/alignment":396,"../../lib/svg_text_utils":447,"../../plots/cartesian/axis_ids":474,"./constants":365}],369:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes"),a=t("./oppaxis_attributes"),o=t("./helpers");e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:a})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":424,"./attributes":363,"./calc_autorange":364,"./defaults":366,"./draw":367,"./helpers":368,"./oppaxis_attributes":370}],370:[function(t,e,n){"use strict";e.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],371:[function(t,e,n){"use strict";var r=t("../annotations/attributes"),i=t("../../traces/scatter/attributes").line,a=t("../drawing/attributes").dash,o=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects");e.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},i.color,{editType:"arraydraw"}),width:o({},i.width,{editType:"calc+arraydraw"}),dash:o({},a,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":397,"../../lib/extend":417,"../../plot_api/plot_template":460,"../../traces/scatter/attributes":577,"../annotations/attributes":284,"../drawing/attributes":315}],372:[function(t,e,n){"use strict";var c=t("../../lib"),f=t("../../plots/cartesian/axes"),h=t("./constants"),d=t("./helpers");function p(t,e,n,r,i,a){var o=t/2,t=a;if("pixel"!==e)return{ppad:o};n=i?d.extractPathCoords(i,a?h.paramIsY:h.paramIsX):[n,r],r=c.aggNums(Math.max,null,n),n=c.aggNums(Math.min,null,n),n=n<0?Math.abs(n)+o:o,r=0<r?r+o:o;return{ppad:o,ppadplus:t?n:r,ppadminus:t?r:n}}function g(t,e,n,r,i){var a="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==e)return[a(e),a(n)];if(r){var o,s,l,u=1/0,c=-1/0,f=r.match(h.segmentRE);for("date"===t.type&&(a=d.decodeDate(a)),o=0;o<f.length;o++)void 0!==(l=i[f[o].charAt(0)].drawn)&&(!(s=f[o].substr(1).match(h.paramRE))||s.length<l||((l=a(s[l]))<u&&(u=l),c<l&&(c=l)));return u<=c?[u,c]:void 0}}e.exports=function(t){var e=t._fullLayout,n=c.filterVisible(e.shapes);if(n.length&&t._fullData.length)for(var r=0;r<n.length;r++){var i=n[r];i._extremes={};var a,o,s,l=f.getRefType(i.xref),u=f.getRefType(i.yref);"paper"!==i.xref&&"domain"!==l&&(l="pixel"===i.xsizemode?i.xanchor:i.x0,o="pixel"===i.xsizemode?i.xanchor:i.x1,(o=g(a=f.getFromId(t,i.xref),l,o,i.path,h.paramIsX))&&(i._extremes[a._id]=f.findExtremes(a,o,p((s=i).line.width,s.xsizemode,s.x0,s.x1,s.path,!1)))),"paper"!==i.yref&&"domain"!==u&&(s="pixel"===i.ysizemode?i.yanchor:i.y0,u="pixel"===i.ysizemode?i.yanchor:i.y1,(o=g(a=f.getFromId(t,i.yref),s,u,i.path,h.paramIsY))&&(i._extremes[a._id]=f.findExtremes(a,o,p((i=i).line.width,i.ysizemode,i.y0,i.y1,i.path,!0))))}}},{"../../lib":424,"../../plots/cartesian/axes":471,"./constants":373,"./helpers":382}],373:[function(t,e,n){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],374:[function(t,e,n){"use strict";var x=t("../../lib"),_=t("../../plots/cartesian/axes"),r=t("../../plots/array_container_defaults"),w=t("./attributes"),k=t("./helpers");function i(n,r,t){function e(t,e){return x.coerce(n,r,w,t,e)}if(e("visible")){var i=e("path"),a=e("type",i?"path":"rect");"path"!==r.type&&delete r.path,e("editable"),e("layer"),e("opacity"),e("fillcolor"),e("fillrule"),e("line.width")&&(e("line.color"),e("line.dash"));for(var o=e("xsizemode"),s=e("ysizemode"),l=["x","y"],u=0;u<2;u++){var c,f,h,d,p=l[u],g=p+"anchor",y="x"===p?o:s,m={_fullLayout:t},v=_.coerceRef(n,r,m,p,void 0,"paper"),b="range"===_.getRefType(v)?((d=_.getFromId(m,v))._shapeIndices.push(r._index),c=k.rangeToShapePosition(d),k.shapePositionToRange(d)):c=x.identity;"path"!==a&&(h=p+"1",d=n[f=p+"0"],p=n[h],n[f]=b(n[f],!0),n[h]=b(n[h],!0),"pixel"===y?(e(f,0),e(h,10)):(_.coercePosition(r,m,e,v,f,.25),_.coercePosition(r,m,e,v,h,.75)),r[f]=c(r[f]),r[h]=c(r[h]),n[f]=d,n[h]=p),"pixel"===y&&(y=n[g],n[g]=b(n[g],!0),_.coercePosition(r,m,e,v,g,.25),r[g]=c(r[g]),n[g]=y)}"path"===a?e("path"):x.noneOrAll(n,r,["x0","x1","y0","y1"])}}e.exports=function(t,e){r(t,e,{name:"shapes",handleItemDefaults:i})}},{"../../lib":424,"../../plots/array_container_defaults":466,"../../plots/cartesian/axes":471,"./attributes":371,"./helpers":382}],375:[function(t,e,n){"use strict";var rt=t("../../registry"),it=t("../../lib"),at=t("../../plots/cartesian/axes"),ot=t("./draw_newshape/helpers").readPaths,st=t("./draw_newshape/display_outlines"),a=t("../../plots/cartesian/handle_outline").clearOutlineControllers,lt=t("../color"),ut=t("../drawing"),ct=t("../../plot_api/plot_template").arrayEditor,ft=t("../dragelement"),ht=t("../../lib/setcursor"),dt=t("./constants"),pt=t("./helpers");function gt(t){var e,n=t._fullLayout;for(e in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._plots){var r=n._plots[e].shapelayer;r&&r.selectAll("path").remove()}for(var i=0;i<n.shapes.length;i++)n.shapes[i].visible&&o(t,i)}function yt(t){return t._fullLayout._drawing}function mt(t){return!t._context.edits.shapePosition}function o(J,tt){J._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+tt+'"]').remove();var t=pt.makeOptionsAndPlotinfo(J,tt),et=t.options,nt=t.plotinfo;function e(t){var e=bt(J,et),n={"data-index":tt,"fill-rule":et.fillrule,d:e},r=et.opacity,i=et.fillcolor,a=et.line.width?et.line.color:"rgba(0,0,0,0)",o=et.line.width,s=et.line.dash;o||!0!==et.editable||(o=5,s="solid");var l="Z"!==e[e.length-1],u=mt(J)&&et.editable&&J._fullLayout._activeShapeIndex===tt;u&&(i=l?"rgba(0,0,0,0)":J._fullLayout.activeshape.fillcolor,r=J._fullLayout.activeshape.opacity);var c,f,h,d,p,g,y,m,v,b,x,_,w,k,M,T,A,S,E,O,C,P,L,R,j,N,D,z,I,F,B,U,V,H,q,G,Y,X=t.append("path").attr(n).style("opacity",r).call(lt.stroke,a).call(lt.fill,i).call(ut.dashLine,s,o);function W(t){var e,n,r,i;P=yt(c)?null:D?"path"===t.target.tagName?"move":"start-point"===t.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point":(e=(r=Y.element.getBoundingClientRect()).right-r.left,i=r.bottom-r.top,n=t.clientX-r.left,r=t.clientY-r.top,i=!z&&L<e&&R<i&&!t.shiftKey?ft.getCursor(n/e,1-r/i):"move",ht(f,i),i.split("-")[0])}function Z(e,n){var t,r;"path"===h.type?(r=t=function(t){return t},j?I("xanchor",h.xanchor=q(x+e)):(t=function(t){return q(V(t)+e)},F&&"date"===F.type&&(t=pt.encodeDate(t))),N?I("yanchor",h.yanchor=G(_+n)):(r=function(t){return G(H(t)+n)},B&&"date"===B.type&&(r=pt.encodeDate(r))),I("path",h.path=xt(C,t,r))):(j?I("xanchor",h.xanchor=q(x+e)):(I("x0",h.x0=q(y+e)),I("x1",h.x1=q(v+e))),N?I("yanchor",h.yanchor=G(_+n)):(I("y0",h.y0=G(m+n)),I("y1",h.y1=G(b+n)))),f.attr("d",bt(c,h)),Q(p,h)}function K(e,n){var t,r,i,a,o,s;z?(t=a=function(t){return t},j?I("xanchor",h.xanchor=q(x+e)):(a=function(t){return q(V(t)+e)},F&&"date"===F.type&&(a=pt.encodeDate(a))),N?I("yanchor",h.yanchor=G(_+n)):(t=function(t){return G(H(t)+n)},B&&"date"===B.type&&(t=pt.encodeDate(t))),I("path",h.path=xt(C,a,t))):D?"resize-over-start-point"===P?(r=y+e,o=N?m-n:m+n,I("x0",h.x0=j?r:q(r)),I("y0",h.y0=N?o:G(o))):"resize-over-end-point"===P&&(s=v+e,i=N?b-n:b+n,I("x1",h.x1=j?s:q(s)),I("y1",h.y1=N?i:G(i))):(t=(a=function(t){return-1!==P.indexOf(t)})("n"),r=a("s"),o=a("w"),s=a("e"),i=t?w+n:w,a=r?k+n:k,o=o?M+e:M,s=s?T+e:T,N&&(t&&(i=w-n),r&&(a=k-n)),(!N&&R<a-i||N&&R<i-a)&&(I(A,h[A]=N?i:G(i)),I(S,h[S]=N?a:G(a))),L<s-o&&(I(E,h[E]=j?o:q(o)),I(O,h[O]=j?s:q(s)))),f.attr("d",bt(c,h)),Q(p,h)}function Q(i,a){(j||N)&&function(){var t="path"!==a.type,e=i.selectAll(".visual-cue").data([0]);e.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var n,r=V(j?a.xanchor:it.midRange(t?[a.x0,a.x1]:pt.extractPathCoords(a.path,dt.paramIsX))),t=H(N?a.yanchor:it.midRange(t?[a.y0,a.y1]:pt.extractPathCoords(a.path,dt.paramIsY)));r=pt.roundPositionForSharpStrokeRendering(r,1),t=pt.roundPositionForSharpStrokeRendering(t,1),j&&N?(n="M"+(r-1-1)+","+(t-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z",e.attr("d",n)):j?(n="M"+(r-1-1)+","+(t-9-1)+"v18 h2 v-18 Z",e.attr("d",n)):(t="M"+(r-9-1)+","+(t-1-1)+"h18 v2 h-18 Z",e.attr("d",t))}()}function $(t){t.selectAll(".visual-cue").remove()}vt(X,J,et),(u||J._context.edits.shapePosition)&&(U=ct(J.layout,"shapes",et)),u?(X.style({cursor:"move"}),u={element:X.node(),plotinfo:nt,gd:J,editHelpers:U,isActiveShape:!0},e=ot(e,J),st(e,X,u)):J._context.edits.shapePosition?(c=J,f=X,d=tt,p=t,g=U,R=L=10,j="pixel"===(h=et).xsizemode,N="pixel"===h.ysizemode,D="line"===h.type,z="path"===h.type,I=g.modifyItem,F=at.getFromId(c,h.xref),t=at.getRefType(h.xref),B=at.getFromId(c,h.yref),U=at.getRefType(h.yref),V=pt.getDataToPixel(c,F,!1,t),H=pt.getDataToPixel(c,B,!0,U),q=pt.getPixelToData(c,F,!1,t),G=pt.getPixelToData(c,B,!0,U),U=D?function(){var t=Math.max(h.line.width,10),e=p.append("g").attr("data-index",d);e.append("path").attr("d",f.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var n={"fill-opacity":"0"},t=Math.max(t/2,10);return e.append("circle").attr({"data-line-point":"start-point",cx:j?V(h.xanchor)+h.x0:V(h.x0),cy:N?H(h.yanchor)-h.y0:H(h.y0),r:t}).style(n).classed("cursor-grab",!0),e.append("circle").attr({"data-line-point":"end-point",cx:j?V(h.xanchor)+h.x1:V(h.x1),cy:N?H(h.yanchor)-h.y1:H(h.y1),r:t}).style(n).classed("cursor-grab",!0),e}():f,Y={element:U.node(),gd:c,prepFn:function(t){if(yt(c))return;j&&(x=V(h.xanchor));N&&(_=H(h.yanchor));"path"===h.type?C=h.path:(y=j?h.x0:V(h.x0),m=N?h.y0:H(h.y0),v=j?h.x1:V(h.x1),b=N?h.y1:H(h.y1));O=y<v?(M=y,E="x0",T=v,"x1"):(M=v,E="x1",T=y,"x0");S=!N&&m<b||N&&b<m?(w=m,A="y0",k=b,"y1"):(w=b,A="y1",k=m,"y0");W(t),Q(p,h),function(t,e,n){var r=e.xref,i=e.yref,a=at.getFromId(n,r),o=at.getFromId(n,i),e="";"paper"===r||a.autorange||(e+=r),"paper"===i||o.autorange||(e+=i),ut.setClipUrl(t,e?"clip"+n._fullLayout._uid+e:null,n)}(f,h,c),Y.moveFn="move"===P?Z:K,Y.altKey=t.altKey},doneFn:function(){if(yt(c))return;ht(f),$(p),vt(f,c,h),rt.call("_guiRelayout",c,g.getUpdateObj())},clickFn:function(){if(yt(c))return;$(p)}},ft.init(Y),U.node().onmousemove=W):!0===et.editable&&X.style("pointer-events",l||lt.opacity(i)*r<=.5?"stroke":"all"),X.node().addEventListener("click",function(){return function(t,e){if(!mt(t))return;e=+e.node().getAttribute("data-index");0<=e&&(e!==t._fullLayout._activeShapeIndex?(t._fullLayout._activeShapeIndex=e,t._fullLayout._deactivateShape=_t,gt(t)):_t(t))}(J,X)})}et._input&&!1!==et.visible&&("below"!==et.layer?e(J._fullLayout._shapeUpperLayer):"paper"!==et.xref&&"paper"!==et.yref&&nt._hadPlotinfo?e((nt.mainplotinfo||nt).shapelayer):e(J._fullLayout._shapeLowerLayer))}function vt(t,e,n){n=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");ut.setClipUrl(t,n?"clip"+e._fullLayout._uid+n:null,e)}function bt(t,e){var n,r,s,l,u,c,f,h,i=e.type,a=at.getRefType(e.xref),o=at.getRefType(e.yref),d=at.getFromId(t,e.xref),p=at.getFromId(t,e.yref),g=t._fullLayout._size,y=d?"domain"===a?function(t){return d._offset+d._length*t}:(n=pt.shapePositionToRange(d),function(t){return d._offset+d.r2p(n(t,!0))}):function(t){return g.l+g.w*t},t=p?"domain"===o?function(t){return p._offset+p._length*(1-t)}:(r=pt.shapePositionToRange(p),function(t){return p._offset+p.r2p(r(t,!0))}):function(t){return g.t+g.h*(1-t)};if("path"===i)return d&&"date"===d.type&&(y=pt.decodeDate(y)),p&&"date"===p.type&&(t=pt.decodeDate(t)),s=y,l=t,o=(a=e).path,u=a.xsizemode,c=a.ysizemode,f=a.xanchor,h=a.yanchor,o.replace(dt.segmentRE,function(t){var e=0,n=t.charAt(0),r=dt.paramIsX[n],i=dt.paramIsY[n],a=dt.numParams[n],o=t.substr(1).replace(dt.paramRE,function(t){return r[e]?t="pixel"===u?s(f)+Number(t):s(t):i[e]&&(t="pixel"===c?l(h)-Number(t):l(t)),a<++e&&(t="X"),t});return a<e&&(o=o.replace(/[\s,]*X.*/,""),it.log("Ignoring extra params in segment "+t)),n+o});if(m="pixel"===e.xsizemode?(v=(m=y(e.xanchor))+e.x0,m+e.x1):(v=y(e.x0),y(e.x1)),e="pixel"===e.ysizemode?(b=(y=t(e.yanchor))-e.y0,y-e.y1):(b=t(e.y0),t(e.y1)),"line"===i)return"M"+v+","+b+"L"+m+","+e;if("rect"===i)return"M"+v+","+b+"H"+m+"V"+e+"H"+v+"Z";var i=(v+m)/2,m=(b+e)/2,e=Math.abs(i-v),v=Math.abs(m-b),b="A"+e+","+v,e=i+e+","+m;return"M"+e+b+" 0 1,1 "+(i+","+(m-v))+b+" 0 0,1 "+e+"Z"}function xt(t,o,s){return t.replace(dt.segmentRE,function(t){var e=0,n=t.charAt(0),r=dt.paramIsX[n],i=dt.paramIsY[n],a=dt.numParams[n];return n+t.substr(1).replace(dt.paramRE,function(t){return a<=e||(r[e]?t=o(t):i[e]&&(t=s(t)),e++),t})})}function _t(t){mt(t)&&0<=t._fullLayout._activeShapeIndex&&(a(t),delete t._fullLayout._activeShapeIndex,gt(t))}e.exports={draw:gt,drawOne:o,eraseActiveShape:function(t){if(!mt(t))return;a(t);var e=t._fullLayout._activeShapeIndex,n=(t.layout||{}).shapes||[];if(e<n.length){for(var r=[],i=0;i<n.length;i++)i!==e&&r.push(n[i]);delete t._fullLayout._activeShapeIndex,rt.call("_guiRelayout",t,{shapes:r})}}}},{"../../lib":424,"../../lib/setcursor":443,"../../plot_api/plot_template":460,"../../plots/cartesian/axes":471,"../../plots/cartesian/handle_outline":481,"../../registry":525,"../color":294,"../dragelement":313,"../drawing":316,"./constants":373,"./draw_newshape/display_outlines":379,"./draw_newshape/helpers":380,"./helpers":382}],376:[function(t,e,n){"use strict";var r=t("../../drawing/attributes").dash,t=t("../../../lib/extend").extendFlat;e.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:t({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":417,"../../drawing/attributes":315}],377:[function(t,e,n){"use strict";e.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],378:[function(t,e,n){"use strict";var r=t("../../color");e.exports=function(t,e,n){n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(t=(t||{}).plot_bgcolor||"#FFF",n("newshape.line.color",r.contrast(t)),n("newshape.line.dash")),n("activeshape.fillcolor"),n("activeshape.opacity")}},{"../../color":294}],379:[function(t,e,n){"use strict";var k=t("../../dragelement"),M=t("../../dragelement/helpers").drawMode,T=t("../../../registry"),r=t("./constants"),A=r.i000,S=r.i090,E=r.i180,O=r.i270,C=t("../../../plots/cartesian/handle_outline").clearOutlineControllers,r=t("./helpers"),P=r.pointsShapeRectangle,L=r.pointsShapeEllipse,R=r.writePaths,j=t("./newshapes");e.exports=function t(c,n,r,e){e=e||0;var s=r.gd;function f(){t(c,n,r,e++),L(c[0])&&i({redrawing:!0})}function i(t){r.isActiveShape=!1;var e=j(n,r);Object.keys(e).length&&T.call((t||{}).redrawing?"relayout":"_guiRelayout",s,e)}var l,a,h,d,p,o=r.isActiveShape,u=s._fullLayout._zoomlayer,g=r.dragmode;function y(t){h=+t.srcElement.getAttribute("data-i"),d=+t.srcElement.getAttribute("data-j"),l[h][d].moveFn=m}function m(t,e){if(c.length){var n=p[h][d][1],r=p[h][d][2],i=c[h],a=i.length;if(P(i)){for(var o,s=0;s<a;s++)s!==d&&((o=i[s])[1]===i[d][1]&&(o[1]=n+t),o[2]===i[d][2]&&(o[2]=r+e));if(i[d][1]=n+t,i[d][2]=r+e,!P(i))for(var l=0;l<a;l++)for(var u=0;u<i[l].length;u++)i[l][u]=p[h][l][u]}else i[d][1]=n+t,i[d][2]=r+e;f()}}function v(){i()}function b(t,e){2===t&&(h=+e.srcElement.getAttribute("data-i"),d=+e.srcElement.getAttribute("data-j"),e=c[h],P(e)||L(e)||function(){if(c.length&&c[h]&&c[h].length){for(var t=[],e=0;e<c[h].length;e++)e!==d&&t.push(c[h][e]);1<t.length&&(2!==t.length||"Z"!==t[1][0])&&(0===d&&(t[0][0]="M"),c[h]=t,f(),i())}}())}function x(t,e){!function(t,e){if(c.length)for(var n=0;n<c.length;n++)for(var r=0;r<c[n].length;r++)for(var i=0;i+2<c[n][r].length;i+=2)c[n][r][i+1]=p[n][r][i+1]+t,c[n][r][i+2]=p[n][r][i+2]+e}(t,e),f()}function _(t){h=+t.srcElement.getAttribute("data-i"),a[h=h||0].moveFn=x}function w(){i()}M(g)?s._fullLayout._drawing=!0:0<=s._fullLayout._activeShapeIndex&&C(s),n.attr("d",R(c)),o&&!e&&(p=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t[n]=[];for(var i=0;i<r.length;i++){t[n][i]=[];for(var a=0;a<r[i].length;a++)t[n][i][a]=r[i][a]}}return t}([],c),function(t){l=[];for(var e=0;e<c.length;e++){var n=c[e],r=!P(n)&&L(n);l[e]=[];for(var i,a,o=0;o<n.length;o++)"Z"!==n[o][0]&&(r&&o!==A&&o!==S&&o!==E&&o!==O||(i=n[o][1],a=n[o][2],a=t.append("circle").classed("cursor-grab",!0).attr("data-i",e).attr("data-j",o).attr("cx",i).attr("cy",a).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1}),l[e][o]={element:a.node(),gd:s,prepFn:y,doneFn:v,clickFn:b},k.init(l[e][o])))}}(u.append("g").attr("class","outline-controllers")),a=[],c.length&&(a[0]={element:n[0][0],gd:s,prepFn:_,doneFn:w},k.init(a[0])))}},{"../../../plots/cartesian/handle_outline":481,"../../../registry":525,"../../dragelement":313,"../../dragelement/helpers":312,"./constants":377,"./helpers":380,"./newshapes":381}],380:[function(t,e,c){"use strict";var j=t("parse-svg-path"),n=t("./constants"),N=n.CIRCLE_SIDES,f=n.SQRT2,t=t("../../../plots/cartesian/helpers"),D=t.p2r,z=t.r2p,h=[0,3,4,5,6,1,2],d=[0,3,4,1,2];function o(t,e){return Math.abs(t-e)<=1e-6}function s(t,e){var n=e[1]-t[1],t=e[2]-t[2];return Math.sqrt(n*n+t*t)}c.writePaths=function(t){var e=t.length;if(!e)return"M0,0Z";for(var n="",r=0;r<e;r++)for(var i=t[r].length,a=0;a<i;a++){var o=t[r][a][0];if("Z"===o)n+="Z";else for(var s=t[r][a].length,l=0;l<s;l++){var u=l;"Q"===o||"S"===o?u=d[l]:"C"===o&&(u=h[l]),n+=t[r][a][u],0<l&&l<s-1&&(n+=",")}}return n},c.readPaths=function(t,e,n,r){function i(){a=c,o=f}var a,o,s=j(t),l=[],u=-1,c=0,f=0;i();for(var h=0;h<s.length;h++){var d,p,g,y,m=[],v=s[h][0],b=v;switch(v){case"M":l[++u]=[],c=+s[h][1],f=+s[h][2],m.push([b,c,f]),i();break;case"Q":case"S":d=+s[h][1],g=+s[h][2],c=+s[h][3],f=+s[h][4],m.push([b,c,f,d,g]);break;case"C":d=+s[h][1],g=+s[h][2],p=+s[h][3],y=+s[h][4],c=+s[h][5],f=+s[h][6],m.push([b,c,f,d,g,p,y]);break;case"T":case"L":c=+s[h][1],f=+s[h][2],m.push([b,c,f]);break;case"H":b="L",c=+s[h][1],m.push([b,c,f]);break;case"V":b="L",f=+s[h][1],m.push([b,c,f]);break;case"A":b="L";var x=+s[h][1],_=+s[h][2];+s[h][4]||(x=-x,_=-_);for(var w=c-x,k=f,M=1;M<=N/2;M++){var T=2*Math.PI*M/N;m.push([b,w+x*Math.cos(T),k+_*Math.sin(T)])}break;case"Z":c===a&&f===o||(c=a,f=o,m.push([b,c,f]))}for(var A=(n||{}).domain,S=e._fullLayout._size,E=n&&"pixel"===n.xsizemode,O=n&&"pixel"===n.ysizemode,C=!1===r,P=0;P<m.length;P++){for(M=0;M+2<7;M+=2){var L=m[P][M+1],R=m[P][M+2];void 0!==L&&void 0!==R&&(c=L,f=R,n&&(n.xaxis&&n.xaxis.p2r?(C&&(L-=n.xaxis._offset),L=E?z(n.xaxis,n.xanchor)+L:D(n.xaxis,L)):(C&&(L-=S.l),A?L=A.x[0]+L/S.w:L/=S.w),R=n.yaxis&&n.yaxis.p2r?(C&&(R-=n.yaxis._offset),O?z(n.yaxis,n.yanchor)-R:D(n.yaxis,R)):(C&&(R-=S.t),A?A.y[1]-R/S.h:1-R/S.h)),m[P][M+1]=L,m[P][M+2]=R)}l[u].push(m[P].slice())}}return l},c.pointsShapeRectangle=function(t){if(5!==t.length)return!1;for(var e=1;e<3;e++){if(!o(t[0][e]-t[1][e],t[3][e]-t[2][e]))return!1;if(!o(t[0][e]-t[3][e],t[1][e]-t[2][e]))return!1}return!(!o(t[0][1],t[1][1])&&!o(t[0][1],t[3][1]))&&!!(s(t[0],t[1])*s(t[0],t[3]))},c.pointsShapeEllipse=function(t){var e=t.length;if(e!==N+1)return!1;e=N;for(var n=0;n<e;n++){var r=(2*e-n)%e,i=(e/2+r)%e,a=(e/2+n)%e;if(!o(s(t[n],t[a]),s(t[r],t[i])))return!1}return!0},c.handleEllipse=function(t,e,n){if(!t)return[e,n];for(var n=c.ellipseOver({x0:e[0],y0:e[1],x1:n[0],y1:n[1]}),r=(n.x1+n.x0)/2,i=(n.y1+n.y0)/2,a=(n.x1-n.x0)/2,o=(n.y1-n.y0)/2,a=a||(o/=f),o=o||(a/=f),s=[],l=0;l<N;l++){var u=2*l*Math.PI/N;s.push([r+a*Math.cos(u),i+o*Math.sin(u)])}return s},c.ellipseOver=function(t){var e=t.x0,n=t.y0,r=t.x1,i=t.y1,a=r-e,t=i-n,r=((e-=a)+r)/2,i=((n-=t)+i)/2;return{x0:r-(a*=f),y0:i-(t*=f),x1:r+a,y1:i+t}}},{"../../../plots/cartesian/helpers":482,"./constants":377,"parse-svg-path":260}],381:[function(t,e,n){"use strict";var r=t("../../dragelement/helpers"),C=r.drawMode,P=r.openMode,r=t("./constants"),L=r.i000,R=r.i090,j=r.i180,N=r.i270,D=r.cos45,z=r.sin45,r=t("../../../plots/cartesian/helpers"),I=r.p2r,F=r.r2p,B=t("../../../plots/cartesian/handle_outline").clearSelect,t=t("./helpers"),U=t.readPaths,V=t.writePaths,H=t.ellipseOver;e.exports=function(t,e){if(t.length){var n=t[0][0];if(n){var r=n.getAttribute("d"),i=e.gd,a=i._fullLayout.newshape,o=e.plotinfo,s=o.xaxis,l=o.yaxis,u=!!o.domain||!o.xaxis,c=!!o.domain||!o.yaxis,f=e.isActiveShape,h=e.dragmode,d=(i.layout||{}).shapes||[];if(!C(h)&&void 0!==f){var p=i._fullLayout._activeShapeIndex;if(p<d.length)switch(i._fullLayout.shapes[p].type){case"rect":h="drawrect";break;case"circle":h="drawcircle";break;case"line":h="drawline";break;case"path":var g=d[p].path||"",h="Z"===g[g.length-1]?"drawclosedpath":"drawopenpath"}}var y,m,v,b,x,_,w=P(h),k=U(r,i,o,f),M={editable:!0,xref:u?"paper":s._id,yref:c?"paper":l._id,layer:a.layer,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};w||(M.fillcolor=a.fillcolor,M.fillrule=a.fillrule),1===k.length&&(y=k[0]),y&&"drawrect"===h?(M.type="rect",M.x0=y[0][1],M.y0=y[0][2],M.x1=y[2][1],M.y1=y[2][2]):y&&"drawline"===h?(M.type="line",M.x0=y[0][1],M.y0=y[0][2],M.x1=y[1][1],M.y1=y[1][2]):y&&"drawcircle"===h?(M.type="circle",m=y[L][1],v=y[R][1],b=y[j][1],x=y[N][1],_=y[L][2],t=y[R][2],n=y[j][2],r=y[N][2],u=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),c=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type),u&&(m=F(o.xaxis,m),v=F(o.xaxis,v),b=F(o.xaxis,b),x=F(o.xaxis,x)),c&&(_=F(o.yaxis,_),t=F(o.yaxis,t),n=F(o.yaxis,n),r=F(o.yaxis,r)),_=H({x0:w=(v+x)/2,y0:a=(_+n)/2,x1:w+(x-v+b-m)/2*D,y1:a+(r-t+n-_)/2*z}),u&&(_.x0=I(o.xaxis,_.x0),_.x1=I(o.xaxis,_.x1)),c&&(_.y0=I(o.yaxis,_.y0),_.y1=I(o.yaxis,_.y1)),M.x0=_.x0,M.y0=_.y0,M.x1=_.x1,M.y1=_.y1):(M.type="path",s&&l&&function(t){var e="date"===s.type,n="date"===l.type;if(e||n)for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)for(var a=0;a+2<t[r][i].length;a+=2)e&&(t[r][i][a+1]=t[r][i][a+1].replace(" ","_")),n&&(t[r][i][a+2]=t[r][i][a+2].replace(" ","_"))}(k),M.path=V(k),y=null),B(i);for(var e=e.editHelpers,T=(e||{}).modifyItem,A=[],S=0;S<d.length;S++){var E=i._fullLayout.shapes[S];if(A[S]=E._input,void 0!==f&&S===i._fullLayout._activeShapeIndex){var O=M;switch(E.type){case"line":case"rect":case"circle":T("x0",O.x0),T("x1",O.x1),T("y0",O.y0),T("y1",O.y1);break;case"path":T("path",O.path)}}}return void 0===f?(A.push(M),A):e?e.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":481,"../../../plots/cartesian/helpers":482,"../../dragelement/helpers":312,"./constants":377,"./helpers":380}],382:[function(t,e,s){"use strict";var i=t("./constants"),a=t("../../lib");s.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},s.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},s.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},s.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},s.extractPathCoords=function(t,n){var r=[];return t.match(i.segmentRE).forEach(function(t){var e=n[t.charAt(0)].drawn;void 0!==e&&(!(t=t.substr(1).match(i.paramRE))||t.length<e||r.push(a.cleanNumber(t[e])))}),r},s.getDataToPixel=function(t,e,n,r){var i,a,o=t._fullLayout._size;return e?"domain"===r?a=function(t){return e._length*(n?1-t:t)+e._offset}:(i=s.shapePositionToRange(e),a=function(t){return e._offset+e.r2p(i(t,!0))},"date"===e.type&&(a=s.decodeDate(a))):a=n?function(t){return o.t+o.h*(1-t)}:function(t){return o.l+o.w*t},a},s.getPixelToData=function(t,e,n,r){var i,a=t._fullLayout._size;return e?"domain"===r?function(t){t=(t-e._offset)/e._length;return n?1-t:t}:(i=s.rangeToShapePosition(e),function(t){return i(e.p2r(t-e._offset))}):n?function(t){return 1-(t-a.t)/a.h}:function(t){return(t-a.l)/a.w}},s.roundPositionForSharpStrokeRendering=function(t,e){e=1===Math.round(e%2),t=Math.round(t);return e?t+.5:t},s.makeOptionsAndPlotinfo=function(t,e){var n=t._fullLayout.shapes[e]||{},e=t._fullLayout._plots[n.xref+n.yref];return!!e?e._hadPlotinfo=!0:(e={},n.xref&&"paper"!==n.xref&&(e.xaxis=t._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(e.yaxis=t._fullLayout[n.yref+"axis"])),e.xsizemode=n.xsizemode,e.ysizemode=n.ysizemode,e.xanchor=n.xanchor,e.yanchor=n.yanchor,{options:n,plotinfo:e}}},{"../../lib":424,"./constants":373}],383:[function(t,e,n){"use strict";var r=t("./draw");e.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewShapeDefaults:t("./draw_newshape/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":483,"./attributes":371,"./calc_autorange":372,"./defaults":374,"./draw":375,"./draw_newshape/defaults":378}],384:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../../plots/pad_attributes"),a=t("../../lib/extend").extendDeepAll,o=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/animation_attributes"),l=t("../../plot_api/plot_template").templatedArray,u=t("./constants"),t=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});e.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(i({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":417,"../../plot_api/edit_types":453,"../../plot_api/plot_template":460,"../../plots/animation_attributes":465,"../../plots/font_attributes":499,"../../plots/pad_attributes":515,"./constants":385}],385:[function(t,e,n){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],386:[function(t,e,n){"use strict";var l=t("../../lib"),u=t("../../plots/array_container_defaults"),c=t("./attributes"),r=t("./constants").name,i=c.steps;function a(n,r,t){function e(t,e){return l.coerce(n,r,c,t,e)}for(var i,a=u(n,r,{name:"steps",handleItemDefaults:f}),o=0,s=0;s<a.length;s++)a[s].visible&&o++;(o<2?r.visible=!1:e("visible"))&&(r._stepCount=o,i=r._visibleSteps=l.filterVisible(a),(a[e("active")]||{}).visible||(r.active=i[0]._index),e("x"),e("y"),l.noneOrAll(n,r,["x","y"]),e("xanchor"),e("yanchor"),e("len"),e("lenmode"),e("pad.t"),e("pad.r"),e("pad.b"),e("pad.l"),l.coerceFont(e,"font",t.font),e("currentvalue.visible")&&(e("currentvalue.xanchor"),e("currentvalue.prefix"),e("currentvalue.suffix"),e("currentvalue.offset"),l.coerceFont(e,"currentvalue.font",r.font)),e("transition.duration"),e("transition.easing"),e("bgcolor"),e("activebgcolor"),e("bordercolor"),e("borderwidth"),e("ticklen"),e("tickwidth"),e("tickcolor"),e("minorticklen"))}function f(n,r){function t(t,e){return l.coerce(n,r,i,t,e)}var e="skip"===n.method||Array.isArray(n.args)?t("visible"):r.visible=!1;e&&(t("method"),t("args"),e=t("label","step-"+r._index),t("value",e),t("execute"))}e.exports=function(t,e){u(t,e,{name:r,handleItemDefaults:a})}},{"../../lib":424,"../../plots/array_container_defaults":466,"./attributes":384,"./constants":385}],387:[function(t,e,n){"use strict";var u=t("d3"),c=t("../../plots/plots"),l=t("../color"),f=t("../drawing"),h=t("../../lib"),o=h.strTranslate,d=t("../../lib/svg_text_utils"),s=t("../../plot_api/plot_template").arrayEditor,p=t("./constants"),t=t("../../constants/alignment"),g=t.LINE_SPACING,y=t.FROM_TL,m=t.FROM_BR;function v(t){return p.autoMarginIdRoot+t._index}function b(t){return t._index}function x(t,e,n){if(e.currentvalue.visible){var r,i,a=e._dims;switch(e.currentvalue.xanchor){case"right":r=a.inputAreaLength-p.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":r=.5*a.inputAreaLength,i="middle";break;default:r=p.currentValueInset,i="left"}var o=h.ensureSingle(t,"text",p.labelClass,function(t){t.attr({"text-anchor":i,"data-notex":1})}),s=e.currentvalue.prefix||"";"string"==typeof n?s+=n:(t=e.steps[e.active].label,(n=e._gd._fullLayout._meta)&&(t=h.templateString(t,n)),s+=t),e.currentvalue.suffix&&(s+=e.currentvalue.suffix),o.call(f.font,e.currentvalue.font).text(s).call(d.convertToTspans,e._gd);s=d.lineCount(o),e=(a.currentValueMaxLines+1-s)*e.currentvalue.font.size*g;return d.positionText(o,r,e),o}}function _(e,n,r){h.ensureSingle(e,"rect",p.gripRectClass,function(t){t.call(a,n,e,r).style("pointer-events","all")}).attr({width:p.gripWidth,height:p.gripHeight,rx:p.gripRadius,ry:p.gripRadius}).call(l.stroke,r.bordercolor).call(l.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function w(t,e,n){var r=h.ensureSingle(t,"text",p.labelClass,function(t){t.attr({"text-anchor":"middle","data-notex":1})}),t=e.step.label,e=n._gd._fullLayout._meta;return e&&(t=h.templateString(t,e)),r.call(f.font,n.font).text(t).call(d.convertToTspans,n._gd),r}function k(t,n){var t=h.ensureSingle(t,"g",p.labelsClass),r=n._dims,t=t.selectAll("g."+p.labelGroupClass).data(r.labelSteps);t.enter().append("g").classed(p.labelGroupClass,!0),t.exit().remove(),t.each(function(t){var e=u.select(this);e.call(w,t,n),f.setTranslate(e,E(n,t.fraction),p.tickOffset+n.ticklen+n.font.size*g+p.labelOffset+r.currentValueTotalHeight)})}function M(t,e,n,r,i){r=Math.round(r*(n._stepCount-1)),r=n._visibleSteps[r]._index;r!==n.active&&T(t,e,n,r,!0,i)}function T(e,n,t,r,i,a){var o=t.active;t.active=r,s(e.layout,p.name,t).applyUpdate("active",r);r=t.steps[t.active];n.call(S,t,a),n.call(x,t),e.emit("plotly_sliderchange",{slider:t,step:t.steps[t.active],interaction:i,previousActive:o}),r&&r.method&&i&&(n._nextMethod?(n._nextMethod.step=r,n._nextMethod.doCallback=i,n._nextMethod.doTransition=a):(n._nextMethod={step:r,doCallback:i,doTransition:a},n._nextMethodRaf=window.requestAnimationFrame(function(){var t=n._nextMethod.step;t.method&&(t.execute&&c.executeAPICommand(e,t.method,t.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function a(t,r,i){var a=i.node(),o=u.select(r);function s(){return i.data()[0]}t.on("mousedown",function(){var t=s();r.emit("plotly_sliderstart",{slider:t});var e=i.select("."+p.gripRectClass);u.event.stopPropagation(),u.event.preventDefault(),e.call(l.fill,t.activebgcolor);var n=O(t,u.mouse(a)[0]);M(r,i,t,n,!0),t._dragging=!0,o.on("mousemove",function(){var t=s(),e=O(t,u.mouse(a)[0]);M(r,i,t,e,!1)}),o.on("mouseup",function(){var t=s();t._dragging=!1,e.call(l.fill,t.bgcolor),o.on("mouseup",null),o.on("mousemove",null),r.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function A(t,i){var t=t.selectAll("rect."+p.tickRectClass).data(i._visibleSteps),a=i._dims;t.enter().append("rect").classed(p.tickRectClass,!0),t.exit().remove(),t.attr({width:i.tickwidth+"px","shape-rendering":"crispEdges"}),t.each(function(t,e){var n=e%a.labelStride==0,r=u.select(this);r.attr({height:n?i.ticklen:i.minorticklen}).call(l.fill,i.tickcolor),f.setTranslate(r,E(i,e/(i._stepCount-1))-.5*i.tickwidth,(n?p.tickOffset:p.minorTickOffset)+a.currentValueTotalHeight)})}function S(t,e,n){for(var r=t.select("rect."+p.gripRectClass),i=0,a=0;a<e._stepCount;a++)if(e._visibleSteps[a]._index===e.active){i=a;break}t=E(e,i/(e._stepCount-1));e._invokingCommand||(r=r,n&&0<e.transition.duration&&(r=r.transition().duration(e.transition.duration).ease(e.transition.easing)),r.attr("transform",o(t-.5*p.gripWidth,e._dims.currentValueTotalHeight)))}function E(t,e){t=t._dims;return t.inputAreaStart+p.stepInset+(t.inputAreaLength-2*p.stepInset)*Math.min(1,Math.max(0,e))}function O(t,e){t=t._dims;return Math.min(1,Math.max(0,(e-p.stepInset-t.inputAreaStart)/(t.inputAreaLength-2*p.stepInset-2*t.inputAreaStart)))}function C(e,n,r){var t=r._dims,i=h.ensureSingle(e,"rect",p.railTouchRectClass,function(t){t.call(a,n,e,r).style("pointer-events","all")});i.attr({width:t.inputAreaLength,height:Math.max(t.inputAreaWidth,p.tickOffset+r.ticklen+t.labelHeight)}).call(l.fill,r.bgcolor).attr("opacity",0),f.setTranslate(i,0,t.currentValueTotalHeight)}function P(t,e){var n=e._dims,r=n.inputAreaLength-2*p.railInset,t=h.ensureSingle(t,"rect",p.railRectClass);t.attr({width:r,height:p.railWidth,rx:p.railRadius,ry:p.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,e.bordercolor).call(l.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),f.setTranslate(t,p.railInset,.5*(n.inputAreaWidth-p.railWidth)+n.currentValueTotalHeight)}e.exports=function(i){var t=i._fullLayout,e=function(t,e){for(var n=t[p.name],r=[],i=0;i<n.length;i++){var a=n[i];a.visible&&(a._gd=e,r.push(a))}return r}(t,i),t=t._infolayer.selectAll("g."+p.containerClassName).data(0<e.length?[0]:[]);function n(t){t._commandObserver&&(t._commandObserver.remove(),delete t._commandObserver),c.autoMargin(i,v(t))}if(t.enter().append("g").classed(p.containerClassName,!0).style("cursor","ew-resize"),t.exit().each(function(){u.select(this).selectAll("g."+p.groupClassName).each(n)}).remove(),0!==e.length){t=t.selectAll("g."+p.groupClassName).data(e,b);t.enter().append("g").classed(p.groupClassName,!0),t.exit().each(n).remove();for(var r=0;r<e.length;r++){var a=e[r];!function(t,n){var e=f.tester.selectAll("g."+p.labelGroupClass).data(n._visibleSteps);e.enter().append("g").classed(p.labelGroupClass,!0);var r=0,i=0;e.each(function(t){t=w(u.select(this),{step:t},n).node();t&&(t=f.bBox(t),i=Math.max(i,t.height),r=Math.max(r,t.width))}),e.remove();var a=n._dims={};a.inputAreaWidth=Math.max(p.railWidth,p.gripHeight);var o=t._fullLayout._size;a.lx=o.l+o.w*n.x,a.ly=o.t+o.h*(1-n.y),"fraction"===n.lenmode?a.outerLength=Math.round(o.w*n.len):a.outerLength=n.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-n.pad.l-n.pad.r);var s,l=(a.inputAreaLength-2*p.stepInset)/(n._stepCount-1),o=r+p.labelPadding;a.labelStride=Math.max(1,Math.ceil(o/l)),a.labelHeight=i,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,n.currentvalue.visible&&(s=f.tester.append("g"),e.each(function(t){var e=x(s,n,t.label),t=e.node()&&f.bBox(e.node())||{width:0,height:0},e=d.lineCount(e);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(t.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(t.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,e)}),a.currentValueTotalHeight=a.currentValueHeight+n.currentvalue.offset,s.remove()),a.height=a.currentValueTotalHeight+p.tickOffset+n.ticklen+p.labelOffset+a.labelHeight+n.pad.t+n.pad.b,l="left",h.isRightAnchor(n)&&(a.lx-=a.outerLength,l="right"),h.isCenterAnchor(n)&&(a.lx-=a.outerLength/2,l="center"),e="top",h.isBottomAnchor(n)&&(a.ly-=a.height,e="bottom"),h.isMiddleAnchor(n)&&(a.ly-=a.height/2,e="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly),e={y:n.y,b:a.height*m[e],t:a.height*y[e]},"fraction"===n.lenmode?(e.l=0,e.xl=n.x-n.len*y[l],e.r=0,e.xr=n.x+n.len*m[l]):(e.x=n.x,e.l=a.outerLength*y[l],e.r=a.outerLength*m[l]),c.autoMargin(t,v(n),e)}(i,a)}t.each(function(t){var e,n,r=u.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var n=t._stepCount,r=0;r<n;r+=e.labelStride)e.labelSteps.push({fraction:r/(n-1),step:t._visibleSteps[r]})}(t),c.manageCommandObserver(i,t,t._visibleSteps,function(t){var e=r.data()[0];e.active!==t.index&&(e._dragging||T(i,r,e,t.index,!1,!0))}),e=i,n=u.select(this),((t=t).steps[t.active]||{}).visible||(t.active=t._visibleSteps[0]._index),n.call(x,t).call(P,t).call(k,t).call(A,t).call(C,e,t).call(_,e,t),e=t._dims,f.setTranslate(n,e.lx+t.pad.l,e.ly+t.pad.t),n.call(S,t,!1),n.call(x,t)})}}},{"../../constants/alignment":396,"../../lib":424,"../../lib/svg_text_utils":447,"../../plot_api/plot_template":460,"../../plots/plots":516,"../color":294,"../drawing":316,"./constants":385,d3:277}],388:[function(t,e,n){"use strict";var r=t("./constants");e.exports={moduleType:"component",name:r.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":384,"./constants":385,"./defaults":386,"./draw":387}],389:[function(t,e,n){"use strict";var w=t("d3"),k=t("fast-isnumeric"),M=t("../../plots/plots"),T=t("../../registry"),A=t("../../lib"),S=A.strTranslate,E=t("../drawing"),O=t("../color"),C=t("../../lib/svg_text_utils"),P=t("../../constants/interactions"),L=t("../../constants/alignment").OPPOSITE_SIDE,R=/ [XY][0-9]* /;e.exports={draw:function(n,t,e){var r=e.propContainer,i=e.propName,a=e.placeholder,o=e.traceIndex,u=e.avoid||{},s=e.attributes,l=e.transform,c=e.containerGroup,f=n._fullLayout,h=1,d=!1,p=((r=r.title)&&r.text?r.text:"").trim(),g=(r=r&&r.font?r.font:{}).family,y=r.size,m=r.color;"title.text"===i?v="titleText":-1!==i.indexOf("axis")?v="axisTitleText":i.indexOf(!0)&&(v="colorbarTitleText");var v=n._context.edits[v];""===p?h=0:p.replace(R," % ")===a.replace(R," % ")&&(h=.2,d=!0,v||(p="")),e._meta?p=A.templateString(p,e._meta):f._meta&&(p=A.templateString(p,f._meta));e=p||v,r=(c=c||A.ensureSingle(f._infolayer,"g","g-"+t)).selectAll("text").data(e?[0]:[]);return r.enter().append("text"),r.text(p).attr("class",t),r.exit().remove(),e&&(r.call(b),v&&(p?r.on(".opacity",null):(d=!(h=0),r.text(a).on("mouseover.opacity",function(){w.select(this).transition().duration(P.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){w.select(this).transition().duration(P.HIDE_PLACEHOLDER).style("opacity",0)})),r.call(C.makeEditable,{gd:n}).on("edit",function(t){void 0!==o?T.call("_guiRestyle",n,i,t,o):T.call("_guiRelayout",n,i,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(b)}).on("input",function(t){this.text(t||" ").call(C.positionText,s.x,s.y)})),r.classed("js-placeholder",d)),c;function b(t){A.syncOrAsync([x,_],t)}function x(t){var e;return l?(e="",l.rotate&&(e+="rotate("+[l.rotate,s.x,s.y]+")"),l.offset&&(e+=S(0,l.offset))):e=null,t.attr("transform",e),t.style({"font-family":g,"font-size":w.round(y,2)+"px",fill:O.rgb(m),opacity:h*O.opacity(m),"font-weight":M.fontWeight}).attr(s).call(C.convertToTspans,n),M.previousPromises(n)}function _(t){var e,n,r,i,a,o,s,l=w.select(t.node().parentNode);u&&u.selection&&u.side&&p&&(l.attr("transform",null),e=L[u.side],n="left"===u.side||"top"===u.side?-1:1,r=k(u.pad)?u.pad:2,i=E.bBox(l.node()),a={left:0,top:0,right:f.width,bottom:f.height},o=u.maxShift||n*(a[u.side]-i[u.side]),((s=0)<(s=o<0?o:(t=u.offsetLeft||0,a=u.offsetTop||0,i.left-=t,i.right-=t,i.top-=a,i.bottom-=a,u.selection.each(function(){var t=E.bBox(this);A.bBoxIntersect(i,t,r)&&(s=Math.max(s,n*(t[u.side]-i[e])+r))}),Math.min(o,s)))||o<0)&&(o={left:[-s,0],right:[s,0],top:[0,-s],bottom:[0,s]}[u.side],l.attr("transform",S(o[0],o[1]))))}}}},{"../../constants/alignment":396,"../../constants/interactions":401,"../../lib":424,"../../lib/svg_text_utils":447,"../../plots/plots":516,"../../registry":525,"../color":294,"../drawing":316,d3:277,"fast-isnumeric":99}],390:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes"),a=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/pad_attributes"),l=t("../../plot_api/plot_template").templatedArray,t=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});e.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:t,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":417,"../../plot_api/edit_types":453,"../../plot_api/plot_template":460,"../../plots/font_attributes":499,"../../plots/pad_attributes":515,"../color/attributes":293}],391:[function(t,e,n){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],392:[function(t,e,n){"use strict";var i=t("../../lib"),a=t("../../plots/array_container_defaults"),o=t("./attributes"),r=t("./constants").name,s=o.buttons;function l(n,r,t){function e(t,e){return i.coerce(n,r,o,t,e)}e("visible",0<a(n,r,{name:"buttons",handleItemDefaults:u}).length)&&(e("active"),e("direction"),e("type"),e("showactive"),e("x"),e("y"),i.noneOrAll(n,r,["x","y"]),e("xanchor"),e("yanchor"),e("pad.t"),e("pad.r"),e("pad.b"),e("pad.l"),i.coerceFont(e,"font",t.font),e("bgcolor",t.paper_bgcolor),e("bordercolor"),e("borderwidth"))}function u(n,r){function t(t,e){return i.coerce(n,r,s,t,e)}t("visible","skip"===n.method||Array.isArray(n.args))&&(t("method"),t("args"),t("args2"),t("label"),t("execute"))}e.exports=function(t,e){a(t,e,{name:r,handleItemDefaults:l})}},{"../../lib":424,"../../plots/array_container_defaults":466,"./attributes":390,"./constants":391}],393:[function(t,e,n){"use strict";var p=t("d3"),g=t("../../plots/plots"),a=t("../color"),c=t("../drawing"),y=t("../../lib"),f=t("../../lib/svg_text_utils"),l=t("../../plot_api/plot_template").arrayEditor,h=t("../../constants/alignment").LINE_SPACING,m=t("./constants"),d=t("./scrollbox");function v(t){return t._index}function b(t,e){return+t.attr(m.menuIndexAttrName)===e._index}function x(t,e,n,r,i,a,o,s){e.active=o,l(t.layout,m.name,e).applyUpdate("active",o),"buttons"===e.type?w(t,r,null,null,e):"dropdown"===e.type&&(i.attr(m.menuIndexAttrName,"-1"),_(t,r,i,a,e),s||w(t,r,i,a,e))}function _(t,e,n,r,i){var a=y.ensureSingle(e,"g",m.headerClassName,function(t){t.style("pointer-events","all")}),o=i._dims,s=i.active,l=i.buttons[s]||m.blankHeaderOpts,u={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},s={width:o.headerWidth,height:o.headerHeight};a.call(k,i,l,t).call(E,i,u,s),y.ensureSingle(e,"text",m.headerArrowClassName,function(t){t.attr("text-anchor","end").call(c.font,i.font).text(m.arrowSymbol[i.direction])}).attr({x:o.headerWidth-m.arrowOffsetX+i.pad.l,y:o.headerHeight/2+m.textOffsetY+i.pad.t}),a.on("click",function(){n.call(O,String(b(n,i)?-1:i._index)),w(t,e,n,r,i)}),a.on("mouseover",function(){a.call(T)}),a.on("mouseout",function(){a.call(A,i)}),c.setTranslate(e,o.lx,o.ly)}function w(r,i,a,o,l){a||(a=i).attr("pointer-events","all");var t=-1!=+a.attr(m.menuIndexAttrName)||"buttons"===l.type?l.buttons:[],e="dropdown"===l.type?m.dropdownButtonClassName:m.buttonClassName,s=a.selectAll("g."+e).data(y.filterVisible(t)),n=s.enter().append("g").classed(e,!0),u=s.exit();"dropdown"===l.type?(n.attr("opacity","0").transition().attr("opacity","1"),u.transition().attr("opacity","0").remove()):u.remove();t=0,e=0,n=l._dims,u=-1!==["up","down"].indexOf(l.direction);"dropdown"===l.type&&(u?e=n.headerHeight+m.gapButtonHeader:t=n.headerWidth+m.gapButtonHeader),"dropdown"===l.type&&"up"===l.direction&&(e=-m.gapButtonHeader+m.gapButton-n.openHeight),"dropdown"===l.type&&"left"===l.direction&&(t=-m.gapButtonHeader+m.gapButton-n.openWidth);var c,f,h,d={x:n.lx+t+l.pad.l,y:n.ly+e+l.pad.t,yPad:m.gapButton,xPad:m.gapButton,index:0},e={l:d.x+l.borderwidth,t:d.y+l.borderwidth};s.each(function(t,e){var n=p.select(this);n.call(k,l,t,r).call(E,l,d),n.on("click",function(){p.event.defaultPrevented||(t.execute&&(t.args2&&l.active===e?(x(r,l,0,i,a,o,-1),g.executeAPICommand(r,t.method,t.args2)):(x(r,l,0,i,a,o,e),g.executeAPICommand(r,t.method,t.args))),r.emit("plotly_buttonclicked",{menu:l,button:t,active:l.active}))}),n.on("mouseover",function(){n.call(T)}),n.on("mouseout",function(){n.call(A,l),s.call(M,l)})}),s.call(M,l),u?(e.w=Math.max(n.openWidth,n.headerWidth),e.h=d.y-e.t):(e.w=d.x-e.l,e.h=Math.max(n.openHeight,n.headerHeight)),e.direction=l.direction,o&&(s.size()?function(t,e){var n,r,i,a="up"===(a=l.direction)||"down"===a,o=l._dims,s=l.active;if(a)for(i=r=0;i<s;i++)r+=o.heights[i]+m.gapButton;else for(i=n=0;i<s;i++)n+=o.widths[i]+m.gapButton;t.enable(e,n,r),t.hbar&&t.hbar.attr("opacity","0").transition().attr("opacity","1"),t.vbar&&t.vbar.attr("opacity","0").transition().attr("opacity","1")}(o,e):(f=!!(c=o).hbar,h=!!c.vbar,f&&c.hbar.transition().attr("opacity","0").each("end",function(){f=!1,h||c.disable()}),h&&c.vbar.transition().attr("opacity","0").each("end",function(){h=!1,f||c.disable()})))}function k(t,e,n,r){t.call(i,e).call(o,e,n,r)}function i(t,e){y.ensureSingle(t,"rect",m.itemRectClassName,function(t){t.attr({rx:m.rx,ry:m.ry,"shape-rendering":"crispEdges"})}).call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function o(t,e,n,r){var i=y.ensureSingle(t,"text",m.itemTextClassName,function(t){t.attr({"text-anchor":"start","data-notex":1})}),t=n.label,n=r._fullLayout._meta;n&&(t=y.templateString(t,n)),i.call(c.font,e.font).text(t).call(f.convertToTspans,r)}function M(t,r){var i=r.active;t.each(function(t,e){var n=p.select(this);e===i&&r.showactive&&n.select("rect."+m.itemRectClassName).call(a.fill,m.activeColor)})}function T(t){t.select("rect."+m.itemRectClassName).call(a.fill,m.hoverColor)}function A(t,e){t.select("rect."+m.itemRectClassName).call(a.fill,e.bgcolor)}function S(t){return m.autoMarginIdRoot+t._index}function E(t,e,n,r){r=r||{};var i=t.select("."+m.itemRectClassName),a=t.select("."+m.itemTextClassName),o=e.borderwidth,s=n.index,l=e._dims;c.setTranslate(t,o+n.x,o+n.y);t=-1!==["up","down"].indexOf(e.direction),o=r.height||(t?l.heights[s]:l.height1);i.attr({x:0,y:0,width:r.width||(t?l.width1:l.widths[s]),height:o});e=e.font.size*h,e=(f.lineCount(a)-1)*e/2;f.positionText(a,m.textOffsetX,o/2-e+m.textOffsetY),t?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function O(t,e){t.attr(m.menuIndexAttrName,e||"-1").selectAll("g."+m.dropdownButtonClassName).remove()}e.exports=function(i){var t=i._fullLayout,e=y.filterVisible(t[m.name]);function n(t){g.autoMargin(i,S(t))}var r=t._menulayer.selectAll("g."+m.containerClassName).data(0<e.length?[0]:[]);if(r.enter().append("g").classed(m.containerClassName,!0).style("cursor","pointer"),r.exit().each(function(){p.select(this).selectAll("g."+m.headerGroupClassName).each(n)}).remove(),0!==e.length){var a=r.selectAll("g."+m.headerGroupClassName).data(e,v);a.enter().append("g").classed(m.headerGroupClassName,!0);for(var o=y.ensureSingle(r,"g",m.dropdownButtonGroupClassName,function(t){t.style("pointer-events","all")}),s=0;s<e.length;s++){var l=e[s];!function(i,a){var o=a._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},t=c.tester.selectAll("g."+m.dropdownButtonClassName).data(y.filterVisible(a.buttons));t.enter().append("g").classed(m.dropdownButtonClassName,!0);var s=-1!==["up","down"].indexOf(a.direction);t.each(function(t,e){var n=p.select(this);n.call(k,a,t,i);var r=n.select("."+m.itemTextClassName),t=r.node()&&c.bBox(r.node()).width,n=Math.max(t+m.textPadX,m.minWidth),t=a.font.size*h,r=f.lineCount(r),r=Math.max(t*r,m.minHeight)+m.textOffsetY,r=Math.ceil(r),n=Math.ceil(n);o.widths[e]=n,o.heights[e]=r,o.height1=Math.max(o.height1,r),o.width1=Math.max(o.width1,n),s?(o.totalWidth=Math.max(o.totalWidth,n),o.openWidth=o.totalWidth,o.totalHeight+=r+m.gapButton,o.openHeight+=r+m.gapButton):(o.totalWidth+=n+m.gapButton,o.openWidth+=n+m.gapButton,o.totalHeight=Math.max(o.totalHeight,r),o.openHeight=o.totalHeight)}),s?o.totalHeight-=m.gapButton:o.totalWidth-=m.gapButton,o.headerWidth=o.width1+m.arrowPadX,o.headerHeight=o.height1,"dropdown"===a.type&&(s?(o.width1+=m.arrowPadX,o.totalHeight=o.height1):o.totalWidth=o.width1,o.totalWidth+=m.arrowPadX),t.remove();var e=o.totalWidth+a.pad.l+a.pad.r,n=o.totalHeight+a.pad.t+a.pad.b,r=i._fullLayout._size;o.lx=r.l+r.w*a.x,o.ly=r.t+r.h*(1-a.y),t="left",y.isRightAnchor(a)&&(o.lx-=e,t="right"),y.isCenterAnchor(a)&&(o.lx-=e/2,t="center"),r="top",y.isBottomAnchor(a)&&(o.ly-=n,r="bottom"),y.isMiddleAnchor(a)&&(o.ly-=n/2,r="middle"),o.totalWidth=Math.ceil(o.totalWidth),o.totalHeight=Math.ceil(o.totalHeight),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),g.autoMargin(i,S(a),{x:a.x,y:a.y,l:e*({right:1,center:.5}[t]||0),r:e*({left:1,center:.5}[t]||0),b:n*({top:1,middle:.5}[r]||0),t:n*({bottom:1,middle:.5}[r]||0)})}(i,l)}var t="updatemenus"+t._uid,u=new d(i,o,t);a.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(O)),a.exit().each(function(t){o.call(O),n(t)}).remove(),a.each(function(e){var n=p.select(this),r="dropdown"===e.type?o:null;g.manageCommandObserver(i,e,e.buttons,function(t){x(i,e,e.buttons[t.index],n,r,u,t.index,!0)}),"dropdown"===e.type?(_(i,n,o,u,e),b(o,e)&&w(i,n,o,u,e)):w(i,n,null,null,e)})}}},{"../../constants/alignment":396,"../../lib":424,"../../lib/svg_text_utils":447,"../../plot_api/plot_template":460,"../../plots/plots":516,"../color":294,"../drawing":316,"./constants":391,"./scrollbox":395,d3:277}],394:[function(t,e,n){arguments[4][388][0].apply(n,arguments)},{"./attributes":390,"./constants":391,"./defaults":392,"./draw":393,dup:388}],395:[function(t,e,n){"use strict";e.exports=k;var x=t("d3"),_=t("../color"),w=t("../drawing"),i=t("../../lib");function k(t,e,n){this.gd=t,this.container=e,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}k.barWidth=2,k.barLength=20,k.barRadius=2,k.barPad=1,k.barColor="#808BA4",k.prototype.enable=function(t,e,n){var r=this.gd._fullLayout,i=r.width,a=r.height;this.position=t;var o=this.position.l,s=this.position.w,l=this.position.t,u=this.position.h,c=this.position.direction,f="down"===c,h="left"===c,d="up"===c,p=s,g=u;f||h||"right"===c||d||(this.position.direction="down",f=!0),f||d?(m=(y=o)+p,g=f?(v=l,(b=Math.min(v+g,a))-v):(b=l+g)-(v=Math.max(b-g,0))):(b=(v=l)+g,p=h?(m=o+p)-(y=Math.max(m-p,0)):(y=o,(m=Math.min(y+p,i))-y)),this._box={l:y,t:v,w:p,h:g};t=p<s,c=k.barLength+2*k.barPad,d=k.barWidth+2*k.barPad,f=o,h=l+u;a<h+d&&(h=a-d);a=this.container.selectAll("rect.scrollbar-horizontal").data(t?[0]:[]);a.exit().on(".drag",null).remove(),a.enter().append("rect").classed("scrollbar-horizontal",!0).call(_.fill,k.barColor),t?(this.hbar=a.attr({rx:k.barRadius,ry:k.barRadius,x:f,y:h,width:c,height:d}),this._hbarXMin=f+c/2,this._hbarTranslateMax=p-c):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);a=g<u,h=k.barWidth+2*k.barPad,f=k.barLength+2*k.barPad,p=o+s,c=l;i<p+h&&(p=i-h);i=this.container.selectAll("rect.scrollbar-vertical").data(a?[0]:[]);i.exit().on(".drag",null).remove(),i.enter().append("rect").classed("scrollbar-vertical",!0).call(_.fill,k.barColor),a?(this.vbar=i.attr({rx:k.barRadius,ry:k.barRadius,x:p,y:c,width:h,height:f}),this._vbarYMin=c+f/2,this._vbarTranslateMax=g-f):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var f=this.id,y=y-.5,m=a?m+h+.5:m+.5,v=v-.5,b=t?b+d+.5:b+.5,r=r._topdefs.selectAll("#"+f).data(t||a?[0]:[]);r.exit().remove(),r.enter().append("clipPath").attr("id",f).append("rect"),t||a?(this._clipRect=r.select("rect").attr({x:Math.floor(y),y:Math.floor(v),width:Math.ceil(m)-Math.floor(y),height:Math.ceil(b)-Math.floor(v)}),this.container.call(w.setClipUrl,f,this.gd),this.bg.attr({x:o,y:l,width:s,height:u})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),(t||a)&&(u=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(u),u=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault(),x.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),t&&this.hbar.on(".drag",null).call(u),a&&this.vbar.on(".drag",null).call(u)),this.setTranslate(e,n)},k.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},k.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=x.event.dx),this.vbar&&(e-=x.event.dy),this.setTranslate(t,e)},k.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=x.event.deltaY),this.vbar&&(e+=x.event.deltaY),this.setTranslate(t,e)},k.prototype._onBarDrag=function(){var t,e,n=this.translateX,r=this.translateY;this.hbar&&(t=(e=n+this._hbarXMin)+this._hbarTranslateMax,n=(i.constrain(x.event.x,e,t)-e)/(t-e)*(this.position.w-this._box.w)),this.vbar&&(e=(t=r+this._vbarYMin)+this._vbarTranslateMax,r=(i.constrain(x.event.y,t,e)-t)/(e-t)*(this.position.h-this._box.h)),this.setTranslate(n,r)},k.prototype.setTranslate=function(t,e){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;t=i.constrain(t||0,0,n),e=i.constrain(e||0,0,r),this.translateX=t,this.translateY=e,this.container.call(w.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar&&(n=t/n,this.hbar.call(w.setTranslate,t+n*this._hbarTranslateMax,e)),this.vbar&&(r=e/r,this.vbar.call(w.setTranslate,t,e+r*this._vbarTranslateMax))}},{"../../lib":424,"../color":294,"../drawing":316,d3:277}],396:[function(t,e,n){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],397:[function(t,e,n){"use strict";e.exports={axisRefDescription:function(t,e,n){return["If set to a",t,"axis id (e.g. *"+t+"* or","*"+t+"2*), the `"+t+"` position refers to a",t,"coordinate. If set to *paper*, the `"+t+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+n+"). If set to a",t,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+t+"2 domain* refers to the domain of the second",t," axis and a",t,"position of 0.5 refers to the","point between the",e,"and the",n,"of the domain of the","second",t,"axis."].join(" ")}}},{}],398:[function(t,e,n){"use strict";e.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],399:[function(t,e,n){"use strict";e.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],400:[function(t,e,n){"use strict";e.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],401:[function(t,e,n){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],402:[function(t,e,n){"use strict";e.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],403:[function(t,e,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],404:[function(t,e,n){"use strict";n.version=t("./version").version,t("es6-promise").polyfill(),t("../build/plotcss"),t("./fonts/mathjax_config")();for(var r=t("./registry"),i=n.register=r.register,a=t("./plot_api"),o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(n[l]=a[l]),i({moduleType:"apiMethod",name:l,fn:a[l]})}i(t("./traces/scatter")),i([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar")]),i([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=t("./fonts/ploticon"),n.Plots=t("./plots/plots"),n.Fx=t("./components/fx"),n.Snapshot=t("./snapshot"),n.PlotSchema=t("./plot_api/plot_schema"),n.Queue=t("./lib/queue"),n.d3=t("d3")},{"../build/plotcss":267,"./components/annotations":292,"./components/annotations3d":282,"./components/colorbar":300,"./components/colorscale":306,"./components/errorbars":322,"./components/fx":334,"./components/grid":338,"./components/images":343,"./components/legend":351,"./components/rangeselector":362,"./components/rangeslider":369,"./components/shapes":383,"./components/sliders":388,"./components/updatemenus":394,"./fonts/mathjax_config":405,"./fonts/ploticon":406,"./lib/queue":438,"./locale-en":451,"./locale-en-us":450,"./plot_api":455,"./plot_api/plot_schema":459,"./plots/plots":516,"./registry":525,"./snapshot":530,"./traces/scatter":589,"./version":607,d3:277,"es6-promise":96}],405:[function(t,e,n){"use strict";e.exports=function(){"undefined"!=typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],406:[function(t,e,n){"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],407:[function(t,e,n){"use strict";n.isLeftAnchor=function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=1/3},n.isCenterAnchor=function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},n.isRightAnchor=function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},n.isTopAnchor=function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=2/3},n.isMiddleAnchor=function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3},n.isBottomAnchor=function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3}},{}],408:[function(t,e,n){"use strict";var t=t("./mod"),i=t.mod,r=t.modHalf,g=Math.PI,y=2*g;function m(t){return Math.abs(t[1]-t[0])>y-1e-14}function a(t,e){return r(e-t,y)}function o(t,e){if(m(e))return!0;var n=e[0]<e[1]?(r=e[0],e[1]):(r=e[1],e[0]),r=i(r,y);(n=i(n,y))<r&&(n+=y);e=i(t,y),t=e+y;return r<=e&&e<=n||r<=t&&t<=n}function s(t,e,n,r,i,a,o){i=i||0,a=a||0;var s,l,u,c=m([n,r]);function f(t,e){return[t*Math.cos(e)+i,a-t*Math.sin(e)]}n=c?(s=0,l=g,y):n<r?(s=n,r):(s=r,n),t=t<e?(u=t,e):(u=e,t);var h,d=Math.abs(n-s)<=g?0:1;function p(t,e,n){return"A"+[t,t]+" "+[0,d,n]+" "+f(t,e)}return c?h=null===u?"M"+f(t,s)+p(t,l,0)+p(t,n,0)+"Z":"M"+f(u,s)+p(u,l,0)+p(u,n,0)+"ZM"+f(t,s)+p(t,l,1)+p(t,n,1)+"Z":null===u?(h="M"+f(t,s)+p(t,n,0),o&&(h+="L0,0Z")):h="M"+f(u,s)+"L"+f(t,s)+p(t,n,0)+"L"+f(u,n)+p(u,s,1)+"Z",h}e.exports={deg2rad:function(t){return t/180*g},rad2deg:function(t){return t/g*180},angleDelta:a,angleDist:function(t,e){return Math.abs(a(t,e))},isFullCircle:m,isAngleInsideSector:o,isPtInsideSector:function(t,e,n,r){if(!o(e,r))return!1;var i,n=n[0]<n[1]?(i=n[0],n[1]):(i=n[1],n[0]);return i<=t&&t<=n},pathArc:function(t,e,n,r,i){return s(null,t,e,n,r,i,0)},pathSector:function(t,e,n,r,i){return s(null,t,e,n,r,i,1)},pathAnnulus:function(t,e,n,r,i,a){return s(t,e,n,r,i,a,1)}}},{"./mod":431}],409:[function(t,e,n){"use strict";var f=Array.isArray,r="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},i="undefined"==typeof DataView?function(){}:DataView;function a(t){return r.isView(t)&&!(t instanceof i)}function o(t){return f(t)||a(t)}function s(t,e,n){if(o(t)){if(o(t[0])){for(var r=n,i=0;i<t.length;i++)r=e(r,t[i].length);return r}return t.length}return 0}n.isTypedArray=a,n.isArrayOrTypedArray=o,n.isArray1D=function(t){return!o(t[0])},n.ensureArray=function(t,e){return f(t)||(t=[]),t.length=e,t},n.concat=function(){for(var t,e,n,r,i,a,o,s=[],l=!0,u=0,c=0;c<arguments.length;c++)(i=(n=arguments[c]).length)&&(e?s.push(n):(e=n,r=i),f(n)?t=!1:(l=!1,u?t!==n.constructor&&(t=!1):t=n.constructor),u+=i);if(!u)return[];if(!s.length)return e;if(l)return e.concat.apply(e,s);if(t){for((a=new t(u)).set(e),c=0;c<s.length;c++)n=s[c],a.set(n,r),r+=n.length;return a}for(a=new Array(u),o=0;o<e.length;o++)a[o]=e[o];for(c=0;c<s.length;c++){for(n=s[c],o=0;o<n.length;o++)a[r+o]=n[o];r+=o}return a},n.maxRowLength=function(t){return s(t,Math.max,0)},n.minRowLength=function(t){return s(t,Math.min,1/0)}},{}],410:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../constants/numerical").BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(t){return"string"==typeof t&&(t=t.replace(a,"")),r(t)?Number(t):i}},{"../constants/numerical":402,"fast-isnumeric":99}],411:[function(t,e,n){"use strict";e.exports=function(t){t=t._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0,depth:!0})})}},{}],412:[function(t,e,n){"use strict";e.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}},{}],413:[function(t,e,m){"use strict";var i=t("fast-isnumeric"),r=t("tinycolor2"),o=t("../plots/attributes"),a=t("../components/colorscale/scales"),s=t("../constants/interactions").DESELECTDIM,l=t("./nested_property"),u=t("./regex").counter,c=t("./mod").modHalf,f=t("./array").isArrayOrTypedArray;function h(t,e){var n=m.valObjectMeta[e.valType];if(e.arrayOk&&f(t))return!0;if(n.validateFunction)return n.validateFunction(t,e);var r={},i=r,a={set:function(t){i=t}};return n.coerceFunction(t,a,r,e),i!==r}m.valObjectMeta={data_array:{coerceFunction:function(t,e,n){f(t)?e.set(t):void 0!==n&&e.set(n)}},enumerated:{coerceFunction:function(t,e,n,r){r.coerceNumber&&(t=+t),-1===r.values.indexOf(t)?e.set(n):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var n=e.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(t))return!0}else if(t===n[r])return!0}return!1}},boolean:{coerceFunction:function(t,e,n){!0===t||!1===t?e.set(t):e.set(n)}},number:{coerceFunction:function(t,e,n,r){!i(t)||void 0!==r.min&&t<r.min||void 0!==r.max&&t>r.max?e.set(n):e.set(+t)}},integer:{coerceFunction:function(t,e,n,r){t%1||!i(t)||void 0!==r.min&&t<r.min||void 0!==r.max&&t>r.max?e.set(n):e.set(+t)}},string:{coerceFunction:function(t,e,n,r){var i;"string"!=typeof t?(i="number"==typeof t,!0!==r.strict&&i?e.set(String(t)):e.set(n)):r.noBlank&&!t?e.set(n):e.set(t)}},color:{coerceFunction:function(t,e,n){r(t).isValid()?e.set(t):e.set(n)}},colorlist:{coerceFunction:function(t,e,n){Array.isArray(t)&&t.length&&t.every(function(t){return r(t).isValid()})?e.set(t):e.set(n)}},colorscale:{coerceFunction:function(t,e,n){e.set(a.get(t,n))}},angle:{coerceFunction:function(t,e,n){"auto"===t?e.set("auto"):i(t)?e.set(c(+t,360)):e.set(n)}},subplotid:{coerceFunction:function(t,e,n,r){r=r.regex||u(n);"string"==typeof t&&r.test(t)?e.set(t):e.set(n)},validateFunction:function(t,e){e=e.dflt;return t===e||"string"==typeof t&&!!u(e).test(t)}},flaglist:{coerceFunction:function(t,e,n,r){if("string"==typeof t)if(-1===(r.extras||[]).indexOf(t)){for(var i=t.split("+"),a=0;a<i.length;){var o=i[a];-1===r.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?e.set(i.join("+")):e.set(n)}else e.set(t);else e.set(n)}},any:{coerceFunction:function(t,e,n){void 0===t?e.set(n):e.set(t)}},info_array:{coerceFunction:function(t,e,n,r){function i(t,e,n){var r,i={set:function(t){r=t}};return void 0===n&&(n=e.dflt),m.valObjectMeta[e.valType].coerceFunction(t,i,n,e),r}var a=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var o,s,l,u,c,f,h=r.items,d=[],p=Array.isArray(h),r=p&&a&&Array.isArray(h[0]),g=a&&p&&!r,y=(p&&!g?h:t).length;if(n=Array.isArray(n)?n:[],a)for(o=0;o<y;o++)for(d[o]=[],l=Array.isArray(t[o])?t[o]:[],c=(g?h:p?h[o]:l).length,s=0;s<c;s++)u=g?h[s]:p?h[o][s]:h,void 0!==(f=i(l[s],u,(n[o]||[])[s]))&&(d[o][s]=f);else for(o=0;o<y;o++)void 0!==(f=i(t[o],p?h[o]:h,n[o]))&&(d[o]=f);e.set(d)}else e.set(n)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var n=e.items,r=Array.isArray(n),i=2===e.dimensions;if(!e.freeLength&&t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(i){if(!Array.isArray(t[a])||!e.freeLength&&t[a].length!==n[a].length)return!1;for(var o=0;o<t[a].length;o++)if(!h(t[a][o],r?n[a][o]:n))return!1}else if(!h(t[a],r?n[a]:n))return!1;return!0}}},m.coerce=function(t,e,n,r,i){var a=l(n,r).get(),o=l(t,r),s=l(e,r),n=o.get(),t=e._template;if(void 0===n&&t&&(n=l(t,r).get(),t=0),void 0===i&&(i=a.dflt),a.arrayOk&&f(n))return s.set(n),n;o=m.valObjectMeta[a.valType].coerceFunction;o(n,s,i,a);e=s.get();return t&&e===i&&!h(n,a)&&(o(n=l(t,r).get(),s,i,a),e=s.get()),e},m.coerce2=function(t,e,n,r,i){var a=l(t,r),i=m.coerce(t,e,n,r,i),a=a.get();return null!=a&&i},m.coerceFont=function(t,e,n){var r={};return n=n||{},r.family=t(e+".family",n.family),r.size=t(e+".size",n.size),r.color=t(e+".color",n.color),r},m.coerceHoverinfo=function(t,e,n){var r,i=e._module.attributes,a=i.hoverinfo?i:o,i=a.hoverinfo;return 1===n._dataLength&&((r="all"===i.dflt?i.flags.slice():i.dflt.split("+")).splice(r.indexOf("name"),1),r=r.join("+")),m.coerce(t,e,a,"hoverinfo",r)},m.coerceSelectionMarkerOpacity=function(t,e){var n,r,i;!t.marker||void 0!==(n=t.marker.opacity)&&(f(n)||t.selected||t.unselected||(i=s*(r=n)),e("selected.marker.opacity",r),e("unselected.marker.opacity",i))},m.validate=h},{"../components/colorscale/scales":309,"../constants/interactions":401,"../plots/attributes":467,"./array":409,"./mod":431,"./nested_property":432,"./regex":439,"fast-isnumeric":99,tinycolor2:651}],414:[function(t,e,h){"use strict";var d,p,n=t("d3-time-format").timeFormat,c=t("fast-isnumeric"),s=t("./loggers"),g=t("./mod").mod,r=t("../constants/numerical"),y=r.BADNUM,m=r.ONEDAY,v=r.ONEHOUR,b=r.ONEMIN,x=r.ONESEC,_=r.EPOCHJD,w=t("../registry"),f=t("d3-time-format").utcFormat,k=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,M=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,T=(new Date).getFullYear()-70;function A(t){return t&&w.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function l(t,e){return String(t+Math.pow(10,e)).substr(1)}h.dateTick0=function(t,e){var n,r=(r=!!e,A(n=t)?(r?w.getComponentMethod("calendars","CANONICAL_SUNDAY"):w.getComponentMethod("calendars","CANONICAL_TICK"))[n]:r?"2000-01-02":"2000-01-01");if(e<2)return r;var r=h.dateTime2ms(r,t);return r+=m*(e-1),h.ms2DateTime(r,0,t)},h.dfltRange=function(t){return A(t)?w.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},h.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},h.dateTime2ms=function(t,e){if(h.isJSDate(t)){var n=t.getTimezoneOffset()*b,r=(t.getUTCMinutes()-t.getMinutes())*b+(t.getUTCSeconds()-t.getSeconds())*x+(t.getUTCMilliseconds()-t.getMilliseconds());return r&&(n=n-(i=3*b)/2+g(r-n+i/2,i)),t=Number(t)-n,d<=t&&t<=p?t:y}if("string"!=typeof t&&"number"!=typeof t)return y;t=String(t);var r=A(e),i=t.charAt(0);!r||"G"!==i&&"g"!==i||(t=t.substr(1),e="");var a=r&&"chinese"===e.substr(0,7),n=t.match(a?M:k);if(!n)return y;var o=n[1],s=n[3]||"1",l=Number(n[5]||1),i=Number(n[7]||0),t=Number(n[9]||0),n=Number(n[11]||0);if(r){if(2===o.length)return y;o=Number(o);try{var u,c,f=w.getComponentMethod("calendars","getCal")(e);c=a?(u="i"===s.charAt(s.length-1),s=parseInt(s,10),f.newDate(o,f.toMonthIndex(o,s,u),l)):f.newDate(o,Number(s),l)}catch(t){return y}return c?(c.toJD()-_)*m+i*v+t*b+n*x:y}o=2===o.length?(Number(o)+2e3-T)%100+T:Number(o),--s;t=new Date(Date.UTC(2e3,s,l,i,t));return t.setUTCFullYear(o),t.getUTCMonth()!==s||t.getUTCDate()!==l?y:t.getTime()+n*x},d=h.MIN_MS=h.dateTime2ms("-9999"),p=h.MAX_MS=h.dateTime2ms("9999-12-31 23:59:59.9999"),h.isDateTime=function(t,e){return h.dateTime2ms(t,e)!==y};var S=90*m,E=3*v,O=5*b;function C(t,e,n,r,i){if((e||n||r||i)&&(t+=" "+l(e,2)+":"+l(n,2),(r||i)&&(t+=":"+l(r,2),i))){for(var a=4;i%10==0;)--a,i/=10;t+="."+l(i,a)}return t}h.ms2DateTime=function(t,e,n){if("number"!=typeof t||!(d<=t&&t<=p))return y;e=e||0;var r,i,a,o,s=Math.floor(10*g(t+.05,1)),l=Math.round(t-s/10);if(A(n)){var u=Math.floor(l/m)+_,c=Math.floor(g(t,m));try{r=w.getComponentMethod("calendars","getCal")(n).fromJD(u).formatDate("yyyy-mm-dd")}catch(t){r=f("G%Y-%m-%d")(new Date(l))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;i=e<S?Math.floor(c/v):0,a=e<S?Math.floor(c%v/b):0,o=e<E?Math.floor(c%b/x):0,c=e<O?c%x*10+s:0}else l=new Date(l),r=f("%Y-%m-%d")(l),i=e<S?l.getUTCHours():0,a=e<S?l.getUTCMinutes():0,o=e<E?l.getUTCSeconds():0,c=e<O?10*l.getUTCMilliseconds()+s:0;return C(r,i,a,o,c)},h.ms2DateTimeLocal=function(t){if(!(d+m<=t&&t<=p-m))return y;var e=Math.floor(10*g(t+.05,1)),t=new Date(Math.round(t-e/10));return C(n("%Y-%m-%d")(t),t.getHours(),t.getMinutes(),t.getSeconds(),10*t.getUTCMilliseconds()+e)},h.cleanDate=function(t,e,n){if(t===y)return e;if(h.isJSDate(t)||"number"==typeof t&&isFinite(t)){if(A(n))return s.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=h.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!h.isDateTime(t,n))return s.error("unrecognized date",t),e;return t};var a=/%\d?f/g;function u(t,e,n,r){t=t.replace(a,function(t){t=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(t).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(e+.05));if(A(r))try{t=w.getComponentMethod("calendars","worldCalFmt")(t,e,r)}catch(t){return"Invalid"}return n(t)(i)}var P=[59,59.9,59.99,59.999,59.9999];h.formatDate=function(t,e,n,r,i,a){if(i=A(i)&&i,!e)if("y"===n)e=a.year;else if("m"===n)e=a.month;else{if("d"!==n)return s=n,n=g((o=t)+.05,m),n=l(Math.floor(n/v),2)+":"+l(g(Math.floor(n/b),60),2),"M"!==s&&(c(s)||(s=0),o=(100+Math.min(g(o/x,60),P[s])).toFixed(s).substr(1),0<s&&(o=o.replace(/0+$/,"").replace(/[\.]$/,"")),n+=":"+o),n+"\n"+u(a.dayMonthYear,t,r,i);e=a.dayMonth+"\n"+a.year}var o,s;return u(e,t,r,i)};var L=3*m;h.incrementMonth=function(e,t,n){n=A(n)&&n;var r=g(e,m);if(e=Math.round(e-r),n)try{var i=Math.round(e/m)+_,a=w.getComponentMethod("calendars","getCal")(n),i=a.fromJD(i);return t%12?a.add(i,t,"m"):a.add(i,t/12,"y"),(i.toJD()-_)*m+r}catch(t){s.error("invalid ms "+e+" in calendar "+n)}var o=new Date(e+L);return o.setUTCMonth(o.getUTCMonth()+t)+r-L},h.findExactDates=function(t,e){for(var n,r,i=0,a=0,o=0,s=0,l=A(e)&&w.getComponentMethod("calendars","getCal")(e),u=0;u<t.length;u++)if(r=t[u],c(r)){if(!(r%m))if(l)try{1===(n=l.fromJD(r/m+_)).day()?1===n.month()?i++:a++:o++}catch(t){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:a++:o++}else s++;o+=a+=i;e=t.length-s;return{exactYears:i/e,exactMonths:a/e,exactDays:o/e}}},{"../constants/numerical":402,"../registry":525,"./loggers":428,"./mod":431,"d3-time-format":275,"fast-isnumeric":99}],415:[function(t,e,n){"use strict";var r=t("d3"),i=t("./loggers"),a=t("./matrix"),o=t("gl-mat4");function s(t){var e=t&&t.parentNode;e&&e.removeChild(t)}function l(t,e,n){var r="plotly.js-style-"+t,t=document.getElementById(r);t||((t=document.createElement("style")).setAttribute("id",r),t.appendChild(document.createTextNode("")),document.head.appendChild(t));t=t.sheet;t.insertRule?t.insertRule(e+"{"+n+"}",0):t.addRule?t.addRule(e,n,0):i.warn("addStyleRule failed")}function u(t){t=window.getComputedStyle(t,null),t=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return"none"===t?null:t.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(t){return+t})}function c(t){for(var e,n=[];(e=t)&&(e instanceof Element||e instanceof HTMLElement);)n.push(t),t=t.parentNode;return n}e.exports={getGraphDiv:function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null==t)throw new Error("DOM element provided is null or undefined");return t},isPlotDiv:function(t){return(t=r.select(t)).node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(t,e){l("global",t,e)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(t){t="plotly.js-style-"+t,(t=document.getElementById(t))&&s(t)},getFullTransformMatrix:function(t){var t=c(t),e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){t=u(t);t&&(t=a.convertCssMatrix(t),e=o.multiply(e,e,t))}),e},getElementTransformMatrix:u,getElementAndAncestors:c,equalDomRects:function(t,e){return t&&e&&t.x===e.x&&t.y===e.y&&t.top===e.top&&t.left===e.left&&t.right===e.right&&t.bottom===e.bottom}}},{"./loggers":428,"./matrix":430,d3:277,"gl-mat4":138}],416:[function(t,e,n){"use strict";var a=t("events").EventEmitter,t={init:function(n){if(n._ev instanceof a)return n;var r=new a,i=new a;return n._ev=r,n._internalEv=i,n.on=r.on.bind(r),n.once=r.once.bind(r),n.removeListener=r.removeListener.bind(r),n.removeAllListeners=r.removeAllListeners.bind(r),n._internalOn=i.on.bind(i),n._internalOnce=i.once.bind(i),n._removeInternalListener=i.removeListener.bind(i),n._removeAllInternalListeners=i.removeAllListeners.bind(i),n.emit=function(t,e){"undefined"!=typeof jQuery&&jQuery(n).trigger(t,e),r.emit(t,e),i.emit(t,e)},n},triggerHandler:function(t,e,n){var r;"undefined"!=typeof jQuery&&(r=jQuery(t).triggerHandler(e,n));var i=t._ev;if(!i)return r;var a,o=i._events[e];if(!o)return r;function s(t){return t.listener?(i.removeListener(e,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(i,[n]))):t.apply(i,[n])}for(o=Array.isArray(o)?o:[o],a=0;a<o.length-1;a++)s(o[a]);return t=s(o[a]),void 0!==r?r:t},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}};e.exports=t},{events:97}],417:[function(t,e,n){"use strict";var h=t("./is_plain_object.js"),d=Array.isArray;function p(t,e,n,r){var i,a,o,s,l,u=t[0],c=t.length;if(2===c&&d(u)&&d(t[1])&&0===u.length){if(function(t,e){for(var n,r=0;r<t.length;r++){if(null!==(n=t[r])&&"object"==typeof n)return!1;void 0!==n&&(e[r]=n)}return!0}(t[1],u))return u;u.splice(0,u.length)}for(var f=1;f<c;f++)for(a in i=t[f])l=u[a],o=i[a],r&&d(o)?u[a]=o:e&&o&&(h(o)||(s=d(o)))?(l=s?(s=!1,l&&d(l)?l:[]):l&&h(l)?l:{},u[a]=p([l,o],e,n,r)):void 0===o&&!n||(u[a]=o);return u}n.extendFlat=function(){return p(arguments,!1,!1,!1)},n.extendDeep=function(){return p(arguments,!0,!1,!1)},n.extendDeepAll=function(){return p(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return p(arguments,!0,!1,!0)}},{"./is_plain_object.js":425}],418:[function(t,e,n){"use strict";e.exports=function(t){for(var e={},n=[],r=0,i=0;i<t.length;i++){var a=t[i];1!==e[a]&&(e[a]=1,n[r++]=a)}return n}},{}],419:[function(t,e,n){"use strict";function o(t){return!0===t.visible}function s(t){t=t[0].trace;return!0===t.visible&&0!==t._length}e.exports=function(t){for(var e,n=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?s:o),r=[],i=0;i<t.length;i++){var a=t[i];n(a)&&r.push(a)}return r}},{}],420:[function(t,e,n){"use strict";var o,s,l,u=t("./mod").mod;function p(t,e,n,r,i,a,o,s){var l=n-t,n=i-t,o=o-i,i=r-e,r=a-e,s=s-a,a=l*s-o*i;if(0==a)return null;o=(n*s-o*r)/a,a=(n*i-l*r)/a;return a<0||1<a||o<0||1<o?null:{x:t+l*o,y:e+i*o}}function g(t,e,n,r,i){var a=r*t+i*e;if(a<0)return r*r+i*i;if(n<a){var o=r-t,a=i-e;return o*o+a*a}t=r*e-i*t;return t*t/n}n.segmentsIntersect=p,n.segmentDistance=function(t,e,n,r,i,a,o,s){if(p(t,e,n,r,i,a,o,s))return 0;var l=n-t,u=r-e,c=o-i,f=s-a,h=l*l+u*u,d=c*c+f*f,a=Math.min(g(l,u,h,i-t,a-e),g(l,u,h,o-t,s-e),g(c,f,d,t-i,e-a),g(c,f,d,n-i,r-a));return Math.sqrt(a)},n.getTextLocation=function(t,e,n,r){if(t===s&&r===l||(o={},s=t,l=r),o[n])return o[n];var i=t.getPointAtLength(u(n-r/2,e)),a=t.getPointAtLength(u(n+r/2,e)),r=Math.atan((a.y-i.y)/(a.x-i.x)),e=t.getPointAtLength(u(n,e)),r={x:(4*e.x+i.x+a.x)/6,y:(4*e.y+i.y+a.y)/6,theta:r};return o[n]=r},n.clearLocationCache=function(){s=null},n.getVisibleSegment=function(n,t,e){var r,i,a=t.left,o=t.right,s=t.top,l=t.bottom,u=0,c=n.getTotalLength(),f=c;function h(t){var e=n.getPointAtLength(t);0===t?r=e:t===c&&(i=e);t=e.x<a?a-e.x:e.x>o?e.x-o:0,e=e.y<s?s-e.y:e.y>l?e.y-l:0;return Math.sqrt(t*t+e*e)}for(var d=h(u);d;){if(f<(u+=d+e))return;d=h(u)}for(d=h(f);d;){if((f-=d+e)<u)return;d=h(f)}return{min:u,max:f,len:f-u,total:c,isClosed:0===u&&f===c&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},n.findPointOnPath=function(t,e,n,r){for(var i,a,o,s=(r=r||{}).pathLength||t.getTotalLength(),l=r.tolerance||.001,u=r.iterationLimit||30,c=t.getPointAtLength(0)[n]>t.getPointAtLength(s)[n]?-1:1,f=0,h=0,d=s;f<u;){if(i=(h+d)/2,o=(a=t.getPointAtLength(i))[n]-e,Math.abs(o)<l)return a;0<c*o?d=i:h=i,f++}return a}},{"./mod":431}],421:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("tinycolor2"),d=t("color-normalize"),p=t("../components/colorscale"),a=t("../components/color/attributes").defaultLine,g=t("./array").isArrayOrTypedArray,y=d(a),m=1;function v(t,e){return t[3]*=e,t}function b(t){if(r(t))return y;t=d(t);return t.length?t:y}function x(t){return r(t)?t:m}e.exports={formatColor:function(t,e,n){var r,i,a=t.color,o=g(a),s=g(e),l=[],u=void 0!==p.extractOpts(t).colorscale?p.makeColorScaleFuncFromTrace(t):b,c=o?function(t,e){return void 0===t[e]?y:d(u(t[e]))}:b,f=s?function(t,e){return void 0===t[e]?m:x(t[e])}:x;if(o||s)for(var h=0;h<n;h++)r=c(a,h),i=f(e,h),l[h]=v(r,i);else l=v(d(a),e);return l},parseColorScale:function(t){var e=p.extractOpts(t),t=e.colorscale;return e.reversescale&&(t=p.flipScale(e.colorscale)),t.map(function(t){var e=t[0],t=i(t[1]).toRgb();return{index:e,rgb:[t.r,t.g,t.b,t.a]}})}}},{"../components/color/attributes":293,"../components/colorscale":306,"./array":409,"color-normalize":272,"fast-isnumeric":99,tinycolor2:651}],422:[function(t,e,n){"use strict";e.exports=function(t){return t}},{}],423:[function(t,e,n){"use strict";e.exports=function(t,e){if(!e)return t;var n=1/Math.abs(e),r=1<n?(n*t+n*e)/n:t+e,n=String(r).length;return 16<n&&(e=String(e).length,String(t).length+e<=n&&(-1===(n=parseFloat(r).toPrecision(12)).indexOf("e+")&&(r=+n))),r}},{}],424:[function(t,e,n){"use strict";var h=t("d3"),d=t("d3-time-format").utcFormat,r=t("fast-isnumeric"),i=t("../constants/numerical"),a=i.FP_SAFE,o=i.BADNUM,p=e.exports={};p.nestedProperty=t("./nested_property"),p.keyedContainer=t("./keyed_container"),p.relativeAttr=t("./relative_attr"),p.isPlainObject=t("./is_plain_object"),p.toLogRange=t("./to_log_range"),p.relinkPrivateKeys=t("./relink_private");e=t("./array");p.isTypedArray=e.isTypedArray,p.isArrayOrTypedArray=e.isArrayOrTypedArray,p.isArray1D=e.isArray1D,p.ensureArray=e.ensureArray,p.concat=e.concat,p.maxRowLength=e.maxRowLength,p.minRowLength=e.minRowLength;e=t("./mod");p.mod=e.mod,p.modHalf=e.modHalf;e=t("./coerce");p.valObjectMeta=e.valObjectMeta,p.coerce=e.coerce,p.coerce2=e.coerce2,p.coerceFont=e.coerceFont,p.coerceHoverinfo=e.coerceHoverinfo,p.coerceSelectionMarkerOpacity=e.coerceSelectionMarkerOpacity,p.validate=e.validate;e=t("./dates");p.dateTime2ms=e.dateTime2ms,p.isDateTime=e.isDateTime,p.ms2DateTime=e.ms2DateTime,p.ms2DateTimeLocal=e.ms2DateTimeLocal,p.cleanDate=e.cleanDate,p.isJSDate=e.isJSDate,p.formatDate=e.formatDate,p.incrementMonth=e.incrementMonth,p.dateTick0=e.dateTick0,p.dfltRange=e.dfltRange,p.findExactDates=e.findExactDates,p.MIN_MS=e.MIN_MS,p.MAX_MS=e.MAX_MS;e=t("./search");p.findBin=e.findBin,p.sorterAsc=e.sorterAsc,p.sorterDes=e.sorterDes,p.distinctVals=e.distinctVals,p.roundUp=e.roundUp,p.sort=e.sort,p.findIndexOfMin=e.findIndexOfMin;e=t("./stats");p.aggNums=e.aggNums,p.len=e.len,p.mean=e.mean,p.median=e.median,p.midRange=e.midRange,p.variance=e.variance,p.stdev=e.stdev,p.interp=e.interp;e=t("./matrix");p.init2dArray=e.init2dArray,p.transposeRagged=e.transposeRagged,p.dot=e.dot,p.translationMatrix=e.translationMatrix,p.rotationMatrix=e.rotationMatrix,p.rotationXYMatrix=e.rotationXYMatrix,p.apply3DTransform=e.apply3DTransform,p.apply2DTransform=e.apply2DTransform,p.apply2DTransform2=e.apply2DTransform2,p.convertCssMatrix=e.convertCssMatrix,p.inverseTransformMatrix=e.inverseTransformMatrix;e=t("./angles");p.deg2rad=e.deg2rad,p.rad2deg=e.rad2deg,p.angleDelta=e.angleDelta,p.angleDist=e.angleDist,p.isFullCircle=e.isFullCircle,p.isAngleInsideSector=e.isAngleInsideSector,p.isPtInsideSector=e.isPtInsideSector,p.pathArc=e.pathArc,p.pathSector=e.pathSector,p.pathAnnulus=e.pathAnnulus;e=t("./anchor_utils");p.isLeftAnchor=e.isLeftAnchor,p.isCenterAnchor=e.isCenterAnchor,p.isRightAnchor=e.isRightAnchor,p.isTopAnchor=e.isTopAnchor,p.isMiddleAnchor=e.isMiddleAnchor,p.isBottomAnchor=e.isBottomAnchor;e=t("./geometry2d");p.segmentsIntersect=e.segmentsIntersect,p.segmentDistance=e.segmentDistance,p.getTextLocation=e.getTextLocation,p.clearLocationCache=e.clearLocationCache,p.getVisibleSegment=e.getVisibleSegment,p.findPointOnPath=e.findPointOnPath;e=t("./extend");p.extendFlat=e.extendFlat,p.extendDeep=e.extendDeep,p.extendDeepAll=e.extendDeepAll,p.extendDeepNoArrays=e.extendDeepNoArrays;e=t("./loggers");p.log=e.log,p.warn=e.warn,p.error=e.error;e=t("./regex");p.counterRegex=e.counter;e=t("./throttle");p.throttle=e.throttle,p.throttleDone=e.done,p.clearThrottle=e.clear;e=t("./dom");function u(t){var e,n={};for(e in t)for(var r=t[e],i=0;i<r.length;i++)n[r[i]]=+e;return n}p.getGraphDiv=e.getGraphDiv,p.isPlotDiv=e.isPlotDiv,p.removeElement=e.removeElement,p.addStyleRule=e.addStyleRule,p.addRelatedStyleRule=e.addRelatedStyleRule,p.deleteRelatedStyleRule=e.deleteRelatedStyleRule,p.getFullTransformMatrix=e.getFullTransformMatrix,p.getElementTransformMatrix=e.getElementTransformMatrix,p.getElementAndAncestors=e.getElementAndAncestors,p.equalDomRects=e.equalDomRects,p.clearResponsive=t("./clear_responsive"),p.makeTraceGroups=t("./make_trace_groups"),p._=t("./localize"),p.notifier=t("./notifier"),p.filterUnique=t("./filter_unique"),p.filterVisible=t("./filter_visible"),p.pushUnique=t("./push_unique"),p.increment=t("./increment"),p.cleanNumber=t("./clean_number"),p.ensureNumber=function(t){return r(t)&&!((t=Number(t))<-a||a<t)&&r(t)?Number(t):o},p.isIndex=function(t,e){return!(void 0!==e&&e<=t)&&(r(t)&&0<=t&&t%1==0)},p.noop=t("./noop"),p.identity=t("./identity"),p.repeat=function(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n},p.swapAttrs=function(t,e,n,r){n=n||"x",r=r||"y";for(var i=0;i<e.length;i++){var a=e[i],o=p.nestedProperty(t,a.replace("?",n)),s=p.nestedProperty(t,a.replace("?",r)),a=o.get();o.set(s.get()),s.set(a)}},p.raiseToTop=function(t){t.parentNode.appendChild(t)},p.cancelTransition=function(t){return t.transition().duration(0)},p.constrain=function(t,e,n){return n<e?Math.max(n,Math.min(e,t)):Math.max(e,Math.min(n,t))},p.bBoxIntersect=function(t,e,n){return n=n||0,t.left<=e.right+n&&e.left<=t.right+n&&t.top<=e.bottom+n&&e.top<=t.bottom+n},p.simpleMap=function(t,e,n,r,i){for(var a=t.length,o=new Array(a),s=0;s<a;s++)o[s]=e(t[s],n,r,i);return o},p.randstr=function t(e,n,r,i){if(r=r||16,void 0===n&&(n=24),n<=0)return"0";for(var a=Math.log(Math.pow(2,n))/Math.log(r),o="",s=2;a===1/0;s*=2)a=Math.log(Math.pow(2,n/s))/Math.log(r)*s;var l=a-Math.floor(a);for(s=0;s<Math.floor(a);s++)o=Math.floor(Math.random()*r).toString(r)+o;l&&(u=Math.pow(r,l),o=Math.floor(Math.random()*u).toString(r)+o);var u=parseInt(o,r);return e&&e[o]||u!==1/0&&u>=Math.pow(2,n)?10<i?(p.warn("randstr failed uniqueness"),o):t(e,n,r,(i||0)+1):o},p.OptionControl=function(e,n){e=e||{};var r={optionList:[],_newoption:function(t){t[n]=e,r[t.name]=t,r.optionList.push(t)}};return r["_"+(n=n||"opt")]=e,r},p.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;for(var n,r,i,a=t.length,o=2*a,s=2*e-1,l=new Array(s),u=new Array(a),c=0;c<s;c++)l[c]=(1-Math.cos(Math.PI*(c+1)/e))/(2*e);for(c=0;c<a;c++){for(n=i=0;n<s;n++)(r=c+n+1-e)<-a?r-=o*Math.round(r/o):o<=r&&(r-=o*Math.floor(r/o)),r<0?r=-1-r:a<=r&&(r=o-1-r),i+=t[r]*l[n];u[c]=i}return u},p.syncOrAsync=function(t,e,n){var r;function i(){return p.syncOrAsync(t,e,n)}for(;t.length;)if((r=(0,t.splice(0,1)[0])(e))&&r.then)return r.then(i).then(void 0,p.promiseError);return n&&n(e)},p.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},p.noneOrAll=function(t,e,n){if(t){for(var r=!1,i=!0,a=0;a<n.length;a++)null!=t[n[a]]?r=!0:i=!1;if(r&&!i)for(a=0;a<n.length;a++)t[n[a]]=e[n[a]]}},p.mergeArray=function(t,e,n,r){var i="function"==typeof r;if(p.isArrayOrTypedArray(t))for(var a=Math.min(t.length,e.length),o=0;o<a;o++){var s=t[o];e[o][n]=i?r(s):s}},p.mergeArrayCastPositive=function(t,e,n){return p.mergeArray(t,e,n,function(t){t=+t;return isFinite(t)&&0<t?t:0})},p.fillArray=function(t,e,n,r){if(r=r||p.identity,p.isArrayOrTypedArray(t))for(var i=0;i<e.length;i++)e[i][n]=r(t[i])},p.castOption=function(t,e,n,r){r=r||p.identity;n=p.nestedProperty(t,n).get();return p.isArrayOrTypedArray(n)?Array.isArray(e)&&p.isArrayOrTypedArray(n[e[0]])?r(n[e[0]][e[1]]):r(n[e]):n},p.extractOption=function(t,e,n,r){if(n in t)return t[n];r=p.nestedProperty(e,r).get();return Array.isArray(r)?void 0:r},p.tagSelected=function(t,e,n){var r,i=e.selectedpoints,e=e._indexToPoints;e&&(r=u(e));for(var a,o=0;o<i.length;o++){var s,l=i[o];(p.isIndex(l)||p.isArrayOrTypedArray(l)&&p.isIndex(l[0])&&p.isIndex(l[1]))&&(l=r?r[l]:l,s=n?n[l]:l,void 0!==(a=s)&&a<t.length&&(t[s].selected=1))}},p.selIndices2selPoints=function(t){var e=t.selectedpoints,t=t._indexToPoints;if(t){for(var n=u(t),r=[],i=0;i<e.length;i++){var a=e[i];p.isIndex(a)&&(a=n[a],p.isIndex(a)&&r.push(a))}return r}return e},p.getTargetArray=function(t,e){e=e.target;if("string"==typeof e&&e){t=p.nestedProperty(t,e).get();return!!Array.isArray(t)&&t}return!!Array.isArray(e)&&e},p.minExtend=function(t,e){var n={};"object"!=typeof e&&(e={});for(var r,i,a=Object.keys(t),o=0;o<a.length;o++)i=t[r=a[o]],"_"!==r.charAt(0)&&"function"!=typeof i&&("module"===r?n[r]=i:Array.isArray(i)?n[r]="colorscale"===r?i.slice():i.slice(0,3):p.isTypedArray(i)?n[r]=i.subarray(0,3):n[r]=i&&"object"==typeof i?p.minExtend(t[r],e[r]):i);for(a=Object.keys(e),o=0;o<a.length;o++)"object"==typeof(i=e[r=a[o]])&&r in n&&"object"==typeof n[r]||(n[r]=i);return n},p.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},p.containsAny=function(t,e){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1},p.isIE=function(){return void 0!==window.navigator.msSaveBlob};var s=/MSIE [1-9]\./;p.isIE9orBelow=function(){return p.isIE()&&s.test(window.navigator.userAgent)};var l=/Version\/[\d\.]+.*Safari/;p.isSafari=function(){return l.test(window.navigator.userAgent)};var c=/iPad|iPhone|iPod/;p.isIOS=function(){return c.test(window.navigator.userAgent)},p.isD3Selection=function(t){return t&&"function"==typeof t.classed},p.ensureSingle=function(t,e,n,r){var i=t.select(e+(n?"."+n:""));if(i.size())return i;e=t.append(e);return n&&e.classed(n,!0),r&&e.call(r),e},p.ensureSingleById=function(t,e,n,r){var i=t.select(e+"#"+n);if(i.size())return i;n=t.append(e).attr("id",n);return r&&n.call(r),n},p.objectFromPath=function(t,e){for(var n=t.split("."),t=s={},r=0;r<n.length;r++)var i,a=n[r],o=n[r].match(/(.*)\[([0-9]+)\]/),s=o?(a=o[1],i=o[2],s=s[a]=[],r===n.length-1?s[i]=e:s[i]={},s[i]):(r===n.length-1?s[a]=e:s[a]={},s[a]);return t};var f=/^([^\[\.]+)\.(.+)?/,g=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;p.expandObjectPaths=function(t){var e,n,r,i,a,o;if("object"==typeof t&&!Array.isArray(t))for(e in t)t.hasOwnProperty(e)&&((a=e.match(f))?(r=t[e],n=a[1],delete t[e],t[n]=p.extendDeepNoArrays(t[n]||{},p.objectFromPath(e,p.expandObjectPaths(r))[n])):(a=e.match(g))?(r=t[e],n=a[1],i=parseInt(a[2]),delete t[e],t[n]=t[n]||[],"."===a[3]?(o=a[4],a=t[n][i]=t[n][i]||{},p.extendDeepNoArrays(a,p.objectFromPath(o,p.expandObjectPaths(r)))):t[n][i]=p.expandObjectPaths(r)):t[e]=p.expandObjectPaths(t[e]));return t},p.numSeparate=function(t,e,n){if(n=n||!1,"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var r=/(\d+)(\d{3})/,i=e.charAt(0),a=e.charAt(1),t=t.split("."),o=t[0],i=1<t.length?i+t[1]:"";if(a&&(1<t.length||4<o.length||n))for(;r.test(o);)o=o.replace(r,"$1"+a+"$2");return o+i},p.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var y=/^\w*$/;p.templateString=function(t,n){var r={};return t.replace(p.TEMPLATE_STRING_REGEX,function(t,e){e=y.test(e)?n[e]:(r[e]=r[e]||p.nestedProperty(n,e).get,r[e]());return p.isValidTextValue(e)?e:""})};var m={max:10,count:0,name:"hovertemplate"};p.hovertemplateString=function(){return x.apply(m,arguments)};var v={max:10,count:0,name:"texttemplate"};p.texttemplateString=function(){return x.apply(v,arguments)};var b=/^[:|\|]/;function x(t,s,l){var u=this,c=arguments;s=s||{};var f={};return t.replace(p.TEMPLATE_STRING_REGEX,function(t,e,n){for(var r,i,a,o=3;o<c.length;o++)if(r=c[o]){if(r.hasOwnProperty(e)){a=r[e];break}if(y.test(e)||(a=f[e]||p.nestedProperty(r,e).get())&&(f[e]=a),void 0!==a)break}return void 0===a&&u?(u.count<u.max&&(p.warn("Variable '"+e+"' in "+u.name+" could not be found!"),a=t),u.count===u.max&&p.warn("Too many "+u.name+" warnings - additional warnings will be suppressed"),u.count++,t):(n?(":"===n[0]&&(a=(i=l?l.numberFormat:h.format)(n.replace(b,""))(a)),"|"===n[0]&&(i=l?l.timeFormat:d,t=p.dateTime2ms(a),a=p.formatDate(t,n.replace(b,""),!1,i))):s.hasOwnProperty(e+"Label")&&(a=s[e+"Label"]),a)})}p.subplotSort=function(t,e){for(var n=Math.min(t.length,e.length)+1,r=0,i=0,a=0;a<n;a++){var o=t.charCodeAt(a)||0,s=e.charCodeAt(a)||0,l=48<=o&&o<=57,u=48<=s&&s<=57;if(l&&(r=10*r+o-48),u&&(i=10*i+s-48),!l||!u){if(r!==i)return r-i;if(o!==s)return o-s}}return i-r};var _=2e9;p.seedPseudoRandom=function(){_=2e9},p.pseudoRandom=function(){var t=_;return _=(69069*_+1)%4294967296,Math.abs(_-t)<429496729?p.pseudoRandom():_/4294967296},p.fillText=function(t,e,n){var r=Array.isArray(n)?function(t){n.push(t)}:function(t){n.text=t},i=p.extractOption(t,e,"htx","hovertext");if(p.isValidTextValue(i))return r(i);e=p.extractOption(t,e,"tx","text");return p.isValidTextValue(e)?r(e):void 0},p.isValidTextValue=function(t){return t||0===t},p.formatPercent=function(t,e){e=e||0;for(var n=(Math.round(100*t*Math.pow(10,e))*Math.pow(.1,e)).toFixed(e)+"%",r=0;r<e;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},p.isHidden=function(t){t=window.getComputedStyle(t).display;return!t||"none"===t},p.strTranslate=function(t,e){return t||e?"translate("+t+","+e+")":""},p.strRotate=function(t){return t?"rotate("+t+")":""},p.strScale=function(t){return 1!==t?"scale("+t+")":""},p.getTextTransform=function(t){var e=t.noCenter,n=t.textX,r=t.textY,i=t.targetX,a=t.targetY,o=t.anchorX||0,s=t.anchorY||0,l=t.rotate,t=t.scale;return t?1<t&&(t=1):t=0,p.strTranslate(i-t*(n+o),a-t*(r+s))+p.strScale(t)+(l?"rotate("+l+(e?"":" "+n+" "+r)+")":"")},p.ensureUniformFontSize=function(t,e){var n=p.extendFlat({},e);return n.size=Math.max(e.size,t._fullLayout.uniformtext.minsize||0),n},p.join2=function(t,e,n){var r=t.length;return 1<r?t.slice(0,-1).join(e)+n+t[r-1]:t.join(e)}},{"../constants/numerical":402,"./anchor_utils":407,"./angles":408,"./array":409,"./clean_number":410,"./clear_responsive":412,"./coerce":413,"./dates":414,"./dom":415,"./extend":417,"./filter_unique":418,"./filter_visible":419,"./geometry2d":420,"./identity":422,"./increment":423,"./is_plain_object":425,"./keyed_container":426,"./localize":427,"./loggers":428,"./make_trace_groups":429,"./matrix":430,"./mod":431,"./nested_property":432,"./noop":433,"./notifier":434,"./push_unique":437,"./regex":439,"./relative_attr":440,"./relink_private":441,"./search":442,"./stats":445,"./throttle":448,"./to_log_range":449,d3:277,"d3-time-format":275,"fast-isnumeric":99}],425:[function(t,e,n){"use strict";e.exports=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype}},{}],426:[function(t,e,n){"use strict";var p=t("./nested_property"),i=/^\w*$/;e.exports=function(t,a,o,s){var r,l;o=o||"name",s=s||"value";var u={},c=a&&a.length?(l=p(t,a)).get():t;a=a||"";var f={};if(c)for(r=0;r<c.length;r++)f[c[r][o]]=r;var h=i.test(s),d={set:function(t,e){var n=null===e?4:0;if(!c){if(!l||4===n)return;c=[],l.set(c)}var r=f[t];if(void 0===r){if(4===n)return;n|=3,r=c.length,f[t]=r}else e!==(h?c[r][s]:p(c[r],s).get())&&(n|=2);var i=c[r]=c[r]||{};return i[o]=t,h?i[s]=e:p(i,s).set(e),null!==e&&(n&=-5),u[r]=u[r]|n,d},get:function(t){if(c){t=f[t];return void 0!==t?h?c[t][s]:p(c[t],s).get():void 0}},rename:function(t,e){var n=f[t];return void 0===n||(u[n]=1|u[n],f[e]=n,delete f[t],c[n][o]=e),d},remove:function(t){var e=f[t];if(void 0===e)return d;var n=c[e];if(2<Object.keys(n).length)return u[e]=2|u[e],d.set(t,null);if(h){for(r=e;r<c.length;r++)u[r]=3|u[r];for(r=e;r<c.length;r++)f[c[r][o]]--;c.splice(e,1),delete f[t]}else p(n,s).set(null),u[e]=6|u[e];return d},constructUpdate:function(){for(var t,e,n={},r=Object.keys(u),i=0;i<r.length;i++)e=r[i],t=a+"["+e+"]",c[e]?(1&u[e]&&(n[t+"."+o]=c[e][o]),2&u[e]&&(n[t+"."+s]=h?4&u[e]?null:c[e][s]:4&u[e]?null:p(c[e],s).get())):n[t]=null;return n}};return d}},{"./nested_property":432}],427:[function(t,e,n){"use strict";var l=t("../registry");e.exports=function(t,e){for(var n=t._context.locale,r=0;r<2;r++){for(var i=t._context.locales,a=0;a<2;a++){var o=(i[n]||{}).dictionary;if(o){o=o[e];if(o)return o}i=l.localeRegistry}var s=n.split("-")[0];if(s===n)break;n=s}return e}},{"../registry":525}],428:[function(t,e,n){"use strict";var r=t("../plot_api/plot_config").dfltConfig,i=t("./notifier"),e=e.exports={};function a(t,e){if(t&&t.apply)try{return void t.apply(console,e)}catch(t){}for(var n=0;n<e.length;n++)try{t(e[n])}catch(t){console.log(e[n])}}e.log=function(){if(1<r.logging){for(var t=["LOG:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.trace||console.log,t)}if(1<r.notifyOnLogging){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"long")}},e.warn=function(){if(0<r.logging){for(var t=["WARN:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.trace||console.log,t)}if(0<r.notifyOnLogging){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"stick")}},e.error=function(){if(0<r.logging){for(var t=["ERROR:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.error,t)}if(0<r.notifyOnLogging){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);i(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":458,"./notifier":434}],429:[function(t,e,n){"use strict";var i=t("d3");e.exports=function(t,e,n){e=t.selectAll("g."+n.replace(/\s/g,".")).data(e,function(t){return t[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",n),e.order();var r=t.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(t){t[0][r]=i.select(this)}),e}},{d3:277}],430:[function(t,e,o){"use strict";var n=t("gl-mat4");o.init2dArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=new Array(e);return n},o.transposeRagged=function(t){for(var e,n=0,r=t.length,i=0;i<r;i++)n=Math.max(n,t[i].length);var a=new Array(n);for(i=0;i<n;i++)for(a[i]=new Array(r),e=0;e<r;e++)a[i][e]=t[e][i];return a},o.dot=function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var n=t.length;if(t[0].length)for(i=new Array(n),a=0;a<n;a++)i[a]=o.dot(t[a],e);else if(e[0].length)for(var r=o.transposeRagged(e),i=new Array(r.length),a=0;a<r.length;a++)i[a]=o.dot(t,r[a]);else for(a=i=0;a<n;a++)i+=t[a]*e[a];return i},o.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},o.rotationMatrix=function(t){t=t*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},o.rotationXYMatrix=function(t,e,n){return o.dot(o.dot(o.translationMatrix(e,n),o.rotationMatrix(t)),o.translationMatrix(-e,-n))},o.apply3DTransform=function(e){return function(){var t=arguments,t=1===arguments.length?t[0]:[t[0],t[1],t[2]||0];return o.dot(e,[t[0],t[1],t[2],1]).slice(0,3)}},o.apply2DTransform=function(e){return function(){var t=arguments;3===t.length&&(t=t[0]);t=1===arguments.length?t[0]:[t[0],t[1]];return o.dot(e,[t[0],t[1],1]).slice(0,2)}},o.apply2DTransform2=function(t){var e=o.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}},o.convertCssMatrix=function(t){if(t){var e=t.length;if(16===e)return t;if(6===e)return[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(t){var e=[];return n.invert(e,t),[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}},{"gl-mat4":138}],431:[function(t,e,n){"use strict";e.exports={mod:function(t,e){return(t%=e)<0?t+e:t},modHalf:function(t,e){return Math.abs(t)>e/2?t-Math.round(t/e)*e:t}}},{}],432:[function(t,e,n){"use strict";var c=t("fast-isnumeric"),f=t("./array").isArrayOrTypedArray;e.exports=function(t,e){if(c(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var n,r,i,a=0,o=e.split(".");a<o.length;){if(n=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])o[a]=n[1];else{if(0!==a)throw"bad property string";o.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),i=0;i<r.length;i++)a++,o.splice(a,0,Number(r[i]))}a++}return"object"!=typeof t?{set:function(){throw"bad container"},get:function(){},astr:e,parts:o,obj:t}:{set:d(t,o,e),get:function o(s,l){return function(){var t,e,n,r,i,a=s;for(r=0;r<l.length-1;r++){if(-1===(t=l[r])){for(e=!0,n=[],i=0;i<a.length;i++)n[i]=o(a[i],l.slice(r+1))(),n[i]!==n[0]&&(e=!1);return e?n[0]:n}if("number"==typeof t&&!f(a))return;if("object"!=typeof(a=a[t])||null===a)return}if("object"==typeof a&&null!==a&&null!==(n=a[l[r]]))return n}}(t,o),astr:e,parts:o,obj:t}};var r=/(^|\.)args\[/;function h(t,e){return void 0===t||null===t&&!e.match(r)}function d(s,l,u){return function(t){for(var e,n=s,r="",i=[[s,r]],a=h(t,u),o=0;o<l.length-1;o++){if("number"==typeof(e=l[o])&&!f(n))throw"array index but container is not an array";if(-1===e){if(a=!function(t,e,n,r){var i,a=f(n),o=!0,s=n,l=r.replace("-1",0),u=!a&&h(n,l),c=e[0];for(i=0;i<t.length;i++)l=r.replace("-1",i),a&&(s=n[i%n.length],u=h(s,l)),u&&(o=!1),p(t,i,c,u)&&d(t[i],e,r.replace("-1",i))(s);return o}(n,l.slice(o+1),t,u))break;return}if(!p(n,e,l[o+1],a))break;if("object"!=typeof(n=n[e])||null===n)throw"container is not an object";r=function(t,e){var n=e;c(e)?n="["+e+"]":t&&(n="."+e);return t+n}(r,e),i.push([n,r])}if(a){if(o===l.length-1&&(delete n[l[o]],Array.isArray(n)&&+l[o]==n.length-1))for(;n.length&&void 0===n[n.length-1];)n.pop()}else n[l[o]]=t}}function p(t,e,n,r){if(void 0===t[e]){if(r)return;t[e]="number"==typeof n?[]:{}}return 1}},{"./array":409,"fast-isnumeric":99}],433:[function(t,e,n){"use strict";e.exports=function(){}},{}],434:[function(t,e,n){"use strict";var l=t("d3"),r=t("fast-isnumeric"),i=[];e.exports=function(t,a){var o;function s(t){t.duration(700).style("opacity",0).each("end",function(t){t=i.indexOf(t);-1!==t&&i.splice(t,1),l.select(this).remove()})}-1===i.indexOf(t)&&(i.push(t),o=1e3,r(a)?o=a:"long"===a&&(o=3e3),(t=l.select("body").selectAll(".plotly-notifier").data([0])).enter().append("div").classed("plotly-notifier",!0),t.selectAll(".notifier-note").data(i).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var e=l.select(this);e.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){e.transition().call(s)});for(var n=e.append("p"),r=t.split(/<br\s*\/?>/g),i=0;i<r.length;i++)i&&n.append("br"),n.append("span").text(r[i]);"stick"===a?e.transition().duration(350).style("opacity",1):e.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}))}},{d3:277,"fast-isnumeric":99}],435:[function(t,e,n){"use strict";var o=t("./setcursor"),s="data-savedcursor";e.exports=function(t,e){var n=t.attr(s);if(e){if(!n){for(var r=(t.attr("class")||"").split(" "),i=0;i<r.length;i++){var a=r[i];0===a.indexOf("cursor-")&&t.attr(s,a.substr(7)).classed(a,!1)}t.attr(s)||t.attr(s,"!!")}o(t,e)}else n&&(t.attr(s,null),"!!"===n?o(t):o(t,n))}},{"./setcursor":443}],436:[function(t,e,n){"use strict";var h=t("./matrix").dot,m=t("../constants/numerical").BADNUM,u=e.exports={};u.tester=function(t){var h=t.slice(),d=h[0][0],p=d,g=h[0][1],y=g;for(h.push(h[0]),r=1;r<h.length;r++)d=Math.min(d,h[r][0]),p=Math.max(p,h[r][0]),g=Math.min(g,h[r][1]),y=Math.max(y,h[r][1]);var i,t=!1;5===h.length&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(t=!0,i=function(t){return t[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(t=!0,i=function(t){return t[1]===h[0][1]}));for(var e=!0,n=h[0],r=1;r<h.length;r++)if(n[0]!==h[r][0]||n[1]!==h[r][1]){e=!1;break}return{xmin:d,xmax:p,ymin:g,ymax:y,pts:h,contains:t?function(t,e){var n=t[0],r=t[1];return!(n===m||n<d||p<n||r===m||r<g||y<r)&&(!e||!i(t))}:function(t,e){var n=t[0],r=t[1];if(n===m||n<d||p<n||r===m||r<g||y<r)return!1;for(var i,a,o,s=h.length,l=h[0][0],u=h[0][1],c=0,f=1;f<s;f++)if(o=l,i=u,l=h[f][0],u=h[f][1],!(n<(a=Math.min(o,l))||n>Math.max(o,l)||r>Math.max(i,u)))if(r<Math.min(i,u))n!==a&&c++;else{if(r===(o=l===o?r:i+(n-o)*(u-i)/(l-o)))return 1!==f||!e;r<=o&&n!==a&&c++}return c%2==1},isRect:t,degenerate:e}},u.isSegmentBent=function(t,e,n,r){for(var i,a,o=t[e],s=[t[n][0]-o[0],t[n][1]-o[1]],l=h(s,s),u=Math.sqrt(l),c=[-s[1]/u,s[0]/u],f=e+1;f<n;f++)if(i=[t[f][0]-o[0],t[f][1]-o[1]],(a=h(i,s))<0||l<a||Math.abs(h(i,c))>r)return!0;return!1},u.filter=function(i,a){var o=[i[0]],s=0,l=0;function t(t){i.push(t);var e=o.length,n=s;o.splice(l+1);for(var r=n+1;r<i.length;r++)r!==i.length-1&&!u.isSegmentBent(i,n,r+1,a)||(o.push(i[r]),o.length<e-2&&(s=r,l=o.length-1),n=r)}return 1<i.length&&t(i.pop()),{addPt:t,raw:i,filtered:o}}},{"../constants/numerical":402,"./matrix":430}],437:[function(t,e,n){"use strict";e.exports=function(t,e){if(e instanceof RegExp){for(var n=e.toString(),r=0;r<t.length;r++)if(t[r]instanceof RegExp&&t[r].toString()===n)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t}},{}],438:[function(t,e,n){"use strict";var a=t("../lib"),s=t("../plot_api/plot_config").dfltConfig;var r={add:function(t,e,n,r,i){var a,o;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},o=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(o,t.undoQueue.queue.length-o,a),t.undoQueue.index+=1):a=t.undoQueue.queue[o-1],t.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(e),a.undo.args.unshift(n),a.redo.calls.push(r),a.redo.args.push(i)),t.undoQueue.queue.length>s.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)r.plotDo(t,e.undo.calls[n],e.undo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)r.plotDo(t,e.redo.calls[n],e.redo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};r.plotDo=function(t,e,n){t.autoplay=!0,n=function(t,e){for(var n,r=[],i=0;i<e.length;i++)n=e[i],r[i]=n!==t&&"object"==typeof n?Array.isArray(n)?a.extendDeep([],n):a.extendDeepAll({},n):n;return r}(t,n),e.apply(null,n)},e.exports=r},{"../lib":424,"../plot_api/plot_config":458}],439:[function(t,e,n){"use strict";n.counter=function(t,e,n,r){n=(e||"")+(n?"":"$"),r=!1===r?"":"^";return"xy"===t?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(r+t+"([2-9]|[1-9][0-9]+)?"+n)}},{}],440:[function(t,e,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;e.exports=function(t,e){for(;e;){var n=t.match(r);if(n)t=n[1];else{if(!t.match(i))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e}},{}],441:[function(t,e,n){"use strict";var l=t("./array").isArrayOrTypedArray,u=t("./is_plain_object");e.exports=function t(e,n){for(var r in n){var i=n[r],a=e[r];if(a!==i)if("_"===r.charAt(0)||"function"==typeof i)r in e||(e[r]=i);else if(l(i)&&l(a)&&u(i[0])){if("customdata"!==r&&"ids"!==r)for(var o=Math.min(i.length,a.length),s=0;s<o;s++)a[s]!==i[s]&&u(i[s])&&u(a[s])&&t(a[s],i[s])}else u(i)&&u(a)&&(t(a,i),Object.keys(a).length||delete e[r])}}},{"./array":409,"./is_plain_object":425}],442:[function(t,e,f){"use strict";var u=t("fast-isnumeric"),c=t("./loggers"),o=t("./identity"),h=t("../constants/numerical").BADNUM;function d(t,e){return t<e}function p(t,e){return t<=e}function g(t,e){return e<t}function y(t,e){return e<=t}f.findBin=function(t,e,n){if(u(e.start))return n?Math.ceil((t-e.start)/e.size-1e-9)-1:Math.floor((t-e.start)/e.size+1e-9);var r,i=0,a=e.length,o=0,s=1<a?(e[a-1]-e[0])/(a-1):1,l=0<=s?n?d:p:n?y:g;for(t+=1e-9*s*(n?-1:1)*(0<=s?1:-1);i<a&&o++<100;)l(e[r=Math.floor((i+a)/2)],t)?i=r+1:a=r;return 90<o&&c.log("Long binary search..."),i-1},f.sorterAsc=function(t,e){return t-e},f.sorterDes=function(t,e){return e-t},f.distinctVals=function(t,e){var n,e=(e||{}).unitMinDiff,r=t.slice();for(r.sort(f.sorterAsc),n=r.length-1;-1<n&&r[n]===h;n--);var i=1;e||(i=r[n]-r[0]||1);for(var a,o=i/(n||1)/1e4,s=[],l=0;l<=n;l++){var u=r[l],c=u-a;void 0===a?(s.push(u),a=u):o<c&&(i=Math.min(i,c),s.push(u),a=u)}return{vals:s,minDiff:i}},f.roundUp=function(t,e,n){for(var r,i=0,a=e.length-1,o=0,s=n?0:1,l=n?1:0,u=n?Math.ceil:Math.floor;i<a&&o++<100;)e[r=u((i+a)/2)]<=t?i=r+s:a=r-l;return e[i]},f.sort=function(t,e){for(var n=0,r=0,i=1;i<t.length;i++){var a=e(t[i],t[i-1]);if(a<0?n=1:0<a&&(r=1),n&&r)return t.sort(e)}return r?t:t.reverse()},f.findIndexOfMin=function(t,e){e=e||o;for(var n,r=1/0,i=0;i<t.length;i++){var a=e(t[i]);a<r&&(r=a,n=i)}return n}},{"../constants/numerical":402,"./identity":422,"./loggers":428,"fast-isnumeric":99}],443:[function(t,e,n){"use strict";e.exports=function(e,t){(e.attr("class")||"").split(" ").forEach(function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)}),t&&e.classed("cursor-"+t,!0)}},{}],444:[function(t,e,n){"use strict";function i(){}var a=t("../components/color");e.exports=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=i);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var n=document.createElement("div");n.className="no-webgl",n.style.cursor="pointer",n.style.fontSize="24px",n.style.color=a.defaults[0],n.style.position="absolute",n.style.left=n.style.top="0px",n.style.width=n.style.height="100%",n.style["background-color"]=a.lightLine,n.style["z-index"]=30;var r=document.createElement("p");return r.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",r.style.position="relative",r.style.top="50%",r.style.left="50%",r.style.height="30%",r.style.width="50%",r.style.margin="-15% 0 0 -25%",n.appendChild(r),t.container.appendChild(n),t.container.style.background="#FFFFFF",!(t.container.onclick=function(){window.open("https://get.webgl.org")})}},{"../components/color":294}],445:[function(t,e,o){"use strict";var s=t("fast-isnumeric"),l=t("./array").isArrayOrTypedArray;o.aggNums=function(t,e,n,r){var i,a;if((!r||r>n.length)&&(r=n.length),s(e)||(e=!1),l(n[0])){for(a=new Array(r),i=0;i<r;i++)a[i]=o.aggNums(t,e,n[i]);n=a}for(i=0;i<r;i++)s(e)?s(n[i])&&(e=t(+e,+n[i])):e=n[i];return e},o.len=function(t){return o.aggNums(function(t){return t+1},0,t)},o.mean=function(t,e){return e=e||o.len(t),o.aggNums(function(t,e){return t+e},0,t)/e},o.midRange=function(t){if(void 0!==t&&0!==t.length)return(o.aggNums(Math.max,null,t)+o.aggNums(Math.min,null,t))/2},o.variance=function(t,e,n){return e=e||o.len(t),s(n)||(n=o.mean(t,e)),o.aggNums(function(t,e){return t+Math.pow(e-n,2)},0,t)/e},o.stdev=function(t,e,n){return Math.sqrt(o.variance(t,e,n))},o.median=function(t){t=t.slice().sort();return o.interp(t,.5)},o.interp=function(t,e){if(!s(e))throw"n should be a finite number";if((e=e*t.length-.5)<0)return t[0];if(e>t.length-1)return t[t.length-1];var n=e%1;return n*t[Math.ceil(e)]+(1-n)*t[Math.floor(e)]}},{"./array":409,"fast-isnumeric":99}],446:[function(t,e,n){"use strict";var r=t("color-normalize");e.exports=function(t){return t?r(t):[0,0,0,1]}},{"color-normalize":272}],447:[function(t,e,n){"use strict";var m=t("d3"),v=t("../lib"),b=v.strTranslate,x=t("../constants/xmlns_namespaces"),_=t("../constants/alignment").LINE_SPACING;function w(t,e){return t.node().getBoundingClientRect()[e]}var r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(c,t,f){var h=c.text(),d=!c.attr("data-notex")&&"undefined"!=typeof MathJax&&h.match(r),p=m.select(c.node().parentNode);if(!p.empty()){var g=c.attr("class")?c.attr("class").split(" ")[0]:"text";return g+="-math",p.selectAll("svg."+g).remove(),p.selectAll("g."+g+"-group").remove(),c.style("display",null).attr({"data-unformatted":h,"data-math":"N"}),d?(t&&t._promises||[]).push(new Promise(function(o){c.style("display","none");var n,e,r,i,t,a,s,l=parseInt(c.node().style.fontSize,10),u={fontSize:l};n=d[2],e=u,r=function(t,e,n){p.selectAll("svg."+g).remove(),p.selectAll("g."+g+"-group").remove();var r=t&&t.select("svg");if(!r||!r.node())return y(),void o();var i=p.append("g").classed(g+"-group",!0).attr({"pointer-events":"none","data-unformatted":h,"data-math":"Y"});i.node().appendChild(r.node()),e&&e.node()&&r.node().insertBefore(e.node().cloneNode(!0),r.node().firstChild),r.attr({class:g,height:n.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var a=c.node().style.fill||"black",t=r.select("g");t.attr({fill:a,stroke:a});e=w(t,"width"),n=w(t,"height"),a=+c.attr("x")-e*{start:0,middle:.5,end:1}[c.attr("text-anchor")||"start"],t=-(l||w(c,"height"))/4;"y"===g[0]?(i.attr({transform:"rotate("+[-90,+c.attr("x"),+c.attr("y")]+")"+b(-e/2,t-n/2)}),r.attr({x:+c.attr("x"),y:+c.attr("y")})):"l"===g[0]?r.attr({x:c.attr("x"),y:t-n/2}):"a"===g[0]&&0!==g.indexOf("atitle")?r.attr({x:0,y:t}):r.attr({x:a,y:+c.attr("y")+t-n/2}),f&&f.call(c,i),o(i)},MathJax.Hub.Queue(function(){return t=v.extendDeepAll({},MathJax.Hub.config),a=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(i=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var t="math-output-"+v.randstr({},64);return s=m.select("body").append("div").attr({id:t}).style({visibility:"hidden",position:"absolute"}).style({"font-size":e.fontSize+"px"}).text(n.replace(k,"\\lt ").replace(M,"\\gt ")),MathJax.Hub.Typeset(s.node())},function(){var t,e=m.select("body").select("#MathJax_SVG_glyphs");if(s.select(".MathJax_SVG").empty()||!s.select("svg").node()?(v.log("There was an error in the tex syntax.",n),r()):(t=s.select("svg").node().getBoundingClientRect(),r(s.select(".MathJax_SVG"),e,t)),s.remove(),"SVG"!==i)return MathJax.Hub.setRenderer(i)},function(){return void 0!==a&&(MathJax.Hub.processSectionDelay=a),MathJax.Hub.Config(t)})})):y(),c}function y(){p.empty()||(g=c.attr("class")+"-math",p.select("svg."+g).remove()),c.text("").style("white-space","pre"),function(r,n){n=n.replace(C," ");var s,t=!1,l=[],i=-1;function e(){i++;var t=document.createElementNS(x.svg,"tspan");m.select(t).attr({class:"line",dy:i*_+"em"}),r.appendChild(t);var e=l;if(l=[{node:s=t}],1<e.length)for(var n=1;n<e.length;n++)a(e[n])}function a(t){var e,n,r=t.type,i={};"a"===r?(a="a",e=t.target,n=t.href,o=t.popup,n&&(i={"xlink:xlink:show":"_blank"===e||"_"!==e.charAt(0)?"new":"replace",target:e,"xlink:xlink:href":n},o&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'))):a="tspan",t.style&&(i.style=t.style);var a,o=document.createElementNS(x.svg,a);"sup"===r||"sub"===r?(u(s,E),s.appendChild(o),u(a=document.createElementNS(x.svg,"tspan"),E),m.select(a).attr("dy",S[r]),i.dy=A[r],s.appendChild(o),s.appendChild(a)):s.appendChild(o),m.select(o).attr(i),s=t.node=o,l.push(t)}function u(t,e){t.appendChild(document.createTextNode(e))}R.test(n)?e():l=[{node:s=r}];for(var o=n.split(P),c=0;c<o.length;c++){var f,h=o[c],d=h.match(L),p=d&&d[2].toLowerCase(),g=T[p];"br"===p?e():void 0===g?u(s,B(h)):d[1]?function(t){var e;1!==l.length?(t!==(e=l.pop()).type&&v.log("Start tag <"+e.type+"> doesnt match end tag <"+t+">. Pretending it did match.",n),s=l[l.length-1].node):v.log("Ignoring unexpected end tag </"+t+">.",n)}(p):(f=d[4],h={type:p},(d=I(f,j))?(d=d.replace(F,"$1 fill:"),g&&(d+=";"+g)):g&&(d=g),d&&(h.style=d),"a"===p&&(t=!0,(d=I(f,N))&&((p=document.createElement("a")).href=d,-1!==O.indexOf(p.protocol)&&(h.href=encodeURI(decodeURI(d)),h.target=I(f,D)||"_blank",h.popup=I(f,z)))),a(h))}return t}(c.node(),h)&&c.style("pointer-events","all"),n.positionText(c),f&&f.call(c)}};var k=/(<|&lt;|&#60;)/g,M=/(>|&gt;|&#62;)/g;var T={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},A={sub:"0.3em",sup:"-0.6em"},S={sub:"-0.21em",sup:"0.42em"},E="​",O=["http:","https:","mailto:","",void 0,":"],C=n.NEWLINES=/(\r\n?|\n)/g,P=/(<[^<>]*>)/,L=/<(\/?)([^ >]*)(\s+(.*))?>/i,R=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var j=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,N=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,D=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,z=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function I(t,e){if(!t)return null;e=t.match(e),e=e&&(e[3]||e[4]);return e&&B(e)}var F=/(^|;)\s*color:/;n.plainText=function(t,e){for(var n=void 0!==(e=e||{}).len&&-1!==e.len?e.len:1/0,r=void 0!==e.allowedTags?e.allowedTags:["br"],i="...".length,a=t.split(P),o=[],s="",l=0,u=0;u<a.length;u++){var c=a[u],f=c.match(L),h=f&&f[2].toLowerCase();if(h)-1!==r.indexOf(h)&&(o.push(c),s=h);else{f=c.length;if(l+f<n)o.push(c),l+=f;else if(l<n){h=n-l;s&&("br"!==s||h<=i||f<=i)&&o.pop(),i<n?o.push(c.substr(0,h-i)+"..."):o.push(c.substr(0,h));break}s=""}}return o.join("")};var i={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},a=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function B(t){return t.replace(a,function(t,e){e="#"===e.charAt(0)?function(t){if(1114111<t)return;var e=String.fromCodePoint;if(e)return e(t);e=String.fromCharCode;return t<=65535?e(t):e(55232+(t>>10),t%1024+56320)}("x"===e.charAt(1)?parseInt(e.substr(2),16):parseInt(e.substr(1),10)):i[e];return e||t})}function f(t,e,r){var i,n=r.horizontalAlign,a=r.verticalAlign||"top",o=t.node().getBoundingClientRect(),s=e.node().getBoundingClientRect(),l="bottom"===a?function(){return o.bottom-i.height}:"middle"===a?function(){return o.top+(o.height-i.height)/2}:function(){return o.top},u="right"===n?function(){return o.right-i.width}:"center"===n?function(){return o.left+(o.width-i.width)/2}:function(){return o.left};return function(){i=this.node().getBoundingClientRect();var t=u()-s.left,e=l()-s.top,n=r.gd||{};return r.gd&&(n._fullLayout._calcInverseTransform(n),t=(n=v.apply3DTransform(n._fullLayout._invTransform)(t,e))[0],e=n[1]),this.style({top:e+"px",left:t+"px","z-index":1e3}),this}}n.convertEntities=B,n.sanitizeHTML=function(t){t=t.replace(C," ");for(var e=document.createElement("p"),n=e,r=[],i=t.split(P),a=0;a<i.length;a++){var o,s,l,u=i[a],c=u.match(L),f=c&&c[2].toLowerCase();f in T?c[1]?r.length&&(n=r.pop()):(o=(s=I(l=c[4],j))?{style:s}:{},"a"!==f||(c=I(l,N))&&((s=document.createElement("a")).href=c,-1!==O.indexOf(s.protocol)&&(o.href=encodeURI(decodeURI(c)),(l=I(l,D))&&(o.target=l))),f=document.createElement(f),n.appendChild(f),m.select(f).attr(o),n=f,r.push(f)):n.appendChild(document.createTextNode(B(u)))}return e.innerHTML},n.lineCount=function(t){return t.selectAll("tspan.line").size()||1},n.positionText=function(t,i,a){return t.each(function(){var n=m.select(this);function t(t,e){return void 0===e?null===(e=n.attr(t))&&(n.attr(t,0),e=0):n.attr(t,e),e}var e=t("x",i),r=t("y",a);"text"===this.nodeName&&n.selectAll("tspan.line").attr({x:e,y:r})})},n.makeEditable=function(a,o){var s=o.gd,t=o.delegate,l=m.dispatch("edit","input","cancel"),u=t||a;if(a.style({"pointer-events":t?"none":"all"}),1!==a.size())throw new Error("boo");function e(){var t,e,n,r;t=m.select(s).select(".svg-container"),e=t.append("div"),n=a.node().style,r=parseFloat(n.fontSize||12),void 0===(i=o.text)&&(i=a.attr("data-unformatted")),e.classed("plugin-editable editable",!0).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":r,color:o.fill||n.fill||"black",opacity:1,"background-color":o.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(i).call(f(a,t,o)).on("blur",function(){s._editing=!1,a.text(this.textContent).style({opacity:1});var t=m.select(this).attr("class"),t=t?"."+t.split(" ")[0]+"-math-group":"[class*=-math-group]";t&&m.select(a.node().parentNode).select(t).style({opacity:0});t=this.textContent;m.select(this).transition().duration(0).remove(),m.select(document).on("mouseup",null),l.edit.call(a,t)}).on("focus",function(){var t=this;s._editing=!0,m.select(document).on("mouseup",function(){return m.event.target!==t&&void(document.activeElement===e.node()&&e.node().blur())})}).on("keyup",function(){27===m.event.which?(s._editing=!1,a.style({opacity:1}),m.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(a,this.textContent)):(l.input.call(a,this.textContent),m.select(this).call(f(a,t,o)))}).on("keydown",function(){13===m.event.which&&this.blur()}).call(c),a.style({opacity:0});var i=u.attr("class"),i=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]";i&&m.select(a.node().parentNode).select(i).style({opacity:0})}function c(t){var e=t.node(),n=document.createRange();n.selectNodeContents(e);t=window.getSelection();t.removeAllRanges(),t.addRange(n),e.focus()}return o.immediate?e():u.on("click",e),m.rebind(a,l,"on")}},{"../constants/alignment":396,"../constants/xmlns_namespaces":403,"../lib":424,d3:277}],448:[function(t,e,n){"use strict";var s={};function l(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}n.throttle=function(t,e,n){var r=s[t],i=Date.now();if(!r){for(var a in s)s[a].ts<i-6e4&&delete s[a];r=s[t]={ts:0,timer:null}}function o(){n(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}l(r),i>r.ts+e?o():r.timer=setTimeout(function(){o(),r.timer=null},e)},n.done=function(t){var n=s[t];return n&&n.timer?new Promise(function(t){var e=n.onDone;n.onDone=function(){e&&e(),t(),n.onDone=null}}):Promise.resolve()},n.clear=function(t){if(t)l(s[t]),delete s[t];else for(var e in s)n.clear(e)}},{}],449:[function(t,e,n){"use strict";var r=t("fast-isnumeric");e.exports=function(t,e){if(0<t)return Math.log(t)/Math.LN10;t=Math.log(Math.min(e[0],e[1]))/Math.LN10;return r(t)||(t=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),t}},{"fast-isnumeric":99}],450:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],451:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],452:[function(t,e,n){"use strict";var s=t("../registry");e.exports=function(t){for(var e,n,r=s.layoutArrayContainers,i=s.layoutArrayRegexes,a=t.split("[")[0],o=0;o<i.length;o++)if((n=t.match(i[o]))&&0===n.index){e=n[0];break}if(!(e=e||r[r.indexOf(a)]))return!1;a=t.substr(e.length);return a?!!(n=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(n[1]),property:n[3]||""}:{array:e,index:"",property:""}}},{"../registry":525}],453:[function(t,e,n){"use strict";var r=t("../lib"),s=r.extendFlat,o=r.isPlainObject,t={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},r={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},i=t.flags.slice().concat(["fullReplot"]),a=r.flags.slice().concat("layoutReplot");function l(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!1;return e}function u(t,e,n){var r,i=s({},t);for(r in i){var a=i[r];o(a)&&(i[r]=function t(e,n,r,i){{if(e.valType){var a=s({},e);if(a.editType=n,Array.isArray(e.items)){a.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++)a.items[o]=t(e.items[o],n,"from-root")}return a}return u(e,n,"_"===i.charAt(0)?"nested":"from-root")}}(a,e,0,r))}return"from-root"===n&&(i.editType=e),i}e.exports={traces:t,layout:r,traceFlags:function(){return l(i)},layoutFlags:function(){return l(a)},update:function(t,e){e=e.editType;if(e&&"none"!==e)for(var n=e.split("+"),r=0;r<n.length;r++)t[n[r]]=!0},overrideAll:u}},{"../lib":424}],454:[function(t,e,w){"use strict";var l=t("fast-isnumeric"),k=t("gl-mat4/fromQuat"),g=t("../registry"),M=t("../lib"),T=t("../plots/plots"),n=t("../plots/cartesian/axis_ids"),A=t("../components/color"),S=n.cleanId,u=n.getFromTrace,y=g.traceIs;function E(t,e){var n=t[e],r=e.charAt(0);n&&"paper"!==n&&(t[e]=S(n,r,!0))}function O(i){function t(t,e){var n=i[t],r=i.title&&i.title[e];n&&!r&&(i.title||(i.title={}),i.title[e]=i[t],delete i[t])}i&&("string"!=typeof i.title&&"number"!=typeof i.title||(i.title={text:i.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"))}function m(t){if(!M.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function v(t){var e="middle",n="center";return"string"==typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?n="left":-1!==t.indexOf("right")&&(n="right")),e+" "+n}function C(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}w.clearPromiseQueue=function(t){Array.isArray(t._promises)&&0<t._promises.length&&M.log("Clearing previous rejected promises from queue."),t._promises=[]},w.cleanLayout=function(t){(t=t||{}).xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);for(var e=(T.subplotsRegistry.cartesian||{}).attrRegex,n=(T.subplotsRegistry.polar||{}).attrRegex,r=(T.subplotsRegistry.ternary||{}).attrRegex,i=(T.subplotsRegistry.gl3d||{}).attrRegex,a=Object.keys(t),o=0;o<a.length;o++){var s=a[o];if(e&&e.test(s)){var l=t[s];l.anchor&&"free"!==l.anchor&&(l.anchor=S(l.anchor)),l.overlaying&&(l.overlaying=S(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,C(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick),O(l)}else if(n&&n.test(s))O(t[s].radialaxis);else if(r&&r.test(s)){var u=t[s];O(u.aaxis),O(u.baxis),O(u.caxis)}else if(i&&i.test(s)){l=t[s],u=l.cameraposition;if(Array.isArray(u)&&4===u[0].length){for(var s=u[0],c=u[1],f=u[2],h=k([],s),d=[],p=0;p<3;++p)d[p]=c[p]+f*h[2+4*p];l.camera={eye:{x:d[0],y:d[1],z:d[2]},center:{x:c[0],y:c[1],z:c[2]},up:{x:0,y:0,z:1}},delete l.cameraposition}O(l.xaxis),O(l.yaxis),O(l.zaxis)}}var g=Array.isArray(t.annotations)?t.annotations.length:0;for(o=0;o<g;o++){var y=t.annotations[o];M.isPlainObject(y)&&(y.ref&&("paper"===y.ref?(y.xref="paper",y.yref="paper"):"data"===y.ref&&(y.xref="x",y.yref="y"),delete y.ref),E(y,"xref"),E(y,"yref"))}var m=Array.isArray(t.shapes)?t.shapes.length:0;for(o=0;o<m;o++){var v=t.shapes[o];M.isPlainObject(v)&&(E(v,"xref"),E(v,"yref"))}var b=Array.isArray(t.images)?t.images.length:0;for(o=0;o<b;o++){var x=t.images[o];M.isPlainObject(x)&&(E(x,"xref"),E(x,"yref"))}var _=t.legend;return _&&(3<_.x?(_.x=1.02,_.xanchor="left"):_.x<-2&&(_.x=-.02,_.xanchor="right"),3<_.y?(_.y=1.02,_.yanchor="bottom"):_.y<-2&&(_.y=-.02,_.yanchor="top")),O(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),A.clean(t),t.template&&t.template.layout&&w.cleanLayout(t.template.layout),t},w.cleanData=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y&&(o=A.defaults,r=n.error_y.color||(y(n,"bar")?A.defaultLine:o[e%o.length]),n.error_y.color=A.addOpacity(A.rgb(r),A.opacity(r)*n.error_y.opacity),delete n.error_y.opacity),"bardir"in n&&("h"!==n.bardir||!y(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",w.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&w.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=S(n.xaxis,"x")),n.yaxis&&(n.yaxis=S(n.yaxis,"y")),y(n,"gl3d")&&n.scene&&(n.scene=T.subplotsRegistry.gl3d.cleanId(n.scene)),!y(n,"pie-like")&&!y(n,"bar-like"))if(Array.isArray(n.textposition))for(l=0;l<n.textposition.length;l++)n.textposition[l]=v(n.textposition[l]);else n.textposition&&(n.textposition=v(n.textposition));var r,i,a,o=g.getModule(n);if(o&&o.colorbar&&((a=(i=o.colorbar.container)?n[i]:n)&&a.colorscale&&("YIGnBu"===a.colorscale&&(a.colorscale="YlGnBu"),"YIOrRd"===a.colorscale&&(a.colorscale="YlOrRd"))),"surface"===n.type&&M.isPlainObject(n.contours))for(var s=["x","y","z"],l=0;l<s.length;l++){var u=n.contours[s[l]];M.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}if("candlestick"!==n.type&&"ohlc"!==n.type||(r=!1!==(n.increasing||{}).showlegend,o=!1!==(n.decreasing||{}).showlegend,i=m(n.increasing),a=m(n.decreasing),!1!==i&&!1!==a?(o=function(t,e,n,r){if(n&&!r)return t;if(r&&!n)return e;if(!t.trim())return e;if(!e.trim())return t;var i,a=Math.min(t.length,e.length);for(i=0;i<a&&t.charAt(i)===e.charAt(i);i++);return t.substr(0,i).trim()}(i,a,r,o))&&(n.name=o):!i&&!a||n.name||(n.name=i||a)),Array.isArray(n.transforms)){var c=n.transforms;for(l=0;l<c.length;l++){var f=c[l];if(M.isPlainObject(f))switch(f.type){case"filter":f.filtersrc&&(f.target=f.filtersrc,delete f.filtersrc),f.calendar&&(f.valuecalendar||(f.valuecalendar=f.calendar),delete f.calendar);break;case"groupby":if(f.styles=f.styles||f.style,f.styles&&!Array.isArray(f.styles)){var h=f.styles,d=Object.keys(h);f.styles=[];for(var p=0;p<d.length;p++)f.styles.push({target:d[p],value:h[d[p]]})}}}}C(n,"line")&&delete n.line,"marker"in n&&(C(n.marker,"line")&&delete n.marker.line,C(n,"marker")&&delete n.marker),A.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),O(n),n.colorbar&&O(n.colorbar),n.marker&&n.marker.colorbar&&O(n.marker.colorbar),n.line&&n.line.colorbar&&O(n.line.colorbar),n.aaxis&&O(n.aaxis),n.baxis&&O(n.baxis)}},w.swapXYData=function(t){var e;if(M.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y&&(e="copy_ystyle"in(e=t.error_y)?e.copy_ystyle:!(e.color||e.thickness||e.width),M.swapAttrs(t,["error_?.copy_ystyle"]),e&&M.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])),"string"==typeof t.hoverinfo){for(var n=t.hoverinfo.split("+"),r=0;r<n.length;r++)"x"===n[r]?n[r]="y":"y"===n[r]&&(n[r]="x");t.hoverinfo=n.join("+")}},w.coerceTraceIndices=function(t,e){if(l(e))return[e];if(!Array.isArray(e)||!e.length)return t.data.map(function(t,e){return e});if(Array.isArray(e)){for(var n=[],r=0;r<e.length;r++)M.isIndex(e[r],t.data.length)?n.push(e[r]):M.warn("trace index (",e[r],") is not a number or is out of bounds");return n}return e},w.manageArrayContainers=function(t,e,n){var r=t.obj,i=t.parts,a=i.length,o=i[a-1],s=l(o);s&&null===e?(a=i.slice(0,a-1).join("."),M.nestedProperty(r,a).get().splice(o,1)):(s&&void 0===t.get()&&void 0===t.get()&&(n[t.astr]=null),t.set(e))};var r=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function i(t){var e=t.search(r);if(0<e)return t.substr(0,e)}w.hasParent=function(t,e){for(var n=i(e);n;){if(n in t)return!0;n=i(n)}return!1};var c=["x","y","z"];w.clearAxisTypes=function(t,e,n){for(var r=0;r<e.length;r++)for(var i=t._fullData[r],a=0;a<3;a++){var o=u(t,i,c[a]);if(o&&"log"!==o.type){var s=o._name,o=o._id.substr(1);if("scene"===o.substr(0,5)){if(void 0!==n[o])continue;s=o+"."+s}o=s+".type";void 0===n[s]&&void 0===n[o]&&M.nestedProperty(t.layout,o).set(null)}}}},{"../components/color":294,"../lib":424,"../plots/cartesian/axis_ids":474,"../plots/plots":516,"../registry":525,"fast-isnumeric":99,"gl-mat4/fromQuat":128}],455:[function(t,e,n){"use strict";var r=t("./plot_api");n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=t("./to_image"),n.validate=t("./validate"),n.downloadImage=t("../snapshot/download");t=t("./template_api");n.makeTemplate=t.makeTemplate,n.validateTemplate=t.validateTemplate},{"../snapshot/download":527,"./plot_api":457,"./template_api":462,"./to_image":463,"./validate":464}],456:[function(t,e,n){"use strict";var r=t("../lib/is_plain_object"),S=t("../lib/noop"),E=t("../lib/loggers"),O=t("../lib/search").sorterAsc,C=t("../registry");n.containerArrayMatch=t("./container_array_match");var P=n.isAddVal=function(t){return"add"===t||r(t)},L=n.isRemoveVal=function(t){return null===t||"remove"===t};n.applyContainerArrayChanges=function(t,e,n,r,i){var a=e.astr,o=C.getComponentMethod(a,"supplyLayoutDefaults"),s=C.getComponentMethod(a,"draw"),l=C.getComponentMethod(a,"drawOne"),u=r.replot||r.recalc||o===S||s===S,c=t.layout,r=t._fullLayout;if(n[""]){1<Object.keys(n).length&&E.warn("Full array edits are incompatible with other edits",a);var f=n[""][""];if(L(f))e.set(null);else{if(!Array.isArray(f))return E.warn("Unrecognized full array edit value",a,f),!0;e.set(f)}return u?!1:(o(c,r),s(t),!0)}for(var h,d,p,g,y,m,v,b,x=Object.keys(n).map(Number).sort(O),f=e.get(),_=f||[],w=i(r,a).get(),k=[],M=-1,T=_.length,A=0;A<x.length;A++)if(p=n[d=x[A]],g=Object.keys(p),y=p[""],m=P(y),d<0||d>_.length-(m?0:1))E.warn("index out of range",a,d);else if(void 0!==y)1<g.length&&E.warn("Insertion & removal are incompatible with edits to the same index.",a,d),L(y)?k.push(d):m?("add"===y&&(y={}),_.splice(d,0,y),w&&w.splice(d,0,{})):E.warn("Unrecognized full object edit value",a,d,y),-1===M&&(M=d);else for(h=0;h<g.length;h++)v=a+"["+d+"].",i(_[d],g[h],v).set(p[g[h]]);for(A=k.length-1;0<=A;A--)_.splice(k[A],1),w&&w.splice(k[A],1);if(_.length?f||e.set(_):e.set(null),u)return!1;if(o(c,r),l!==S){if(-1===M)b=x;else{for(T=Math.max(_.length,T),b=[],A=0;A<x.length&&!(M<=(d=x[A]));A++)b.push(d);for(A=M;A<T;A++)b.push(A)}for(A=0;A<b.length;A++)l(t,b[A])}else s(t);return!0}},{"../lib/is_plain_object":425,"../lib/loggers":428,"../lib/noop":433,"../lib/search":442,"../registry":525,"./container_array_match":452}],457:[function(t,e,M){"use strict";var p=t("d3"),h=t("fast-isnumeric"),c=t("has-hover"),F=t("../lib"),B=F.nestedProperty,g=t("../lib/events"),k=t("../lib/queue"),U=t("../registry"),V=t("./plot_schema"),I=t("../plots/plots"),y=t("../plots/polar/legacy"),H=t("../plots/cartesian/axes"),m=t("../components/drawing"),n=t("../components/color"),v=t("../plots/cartesian/graph_interact").initInteractions,i=t("../constants/xmlns_namespaces"),b=t("../lib/svg_text_utils"),r=t("../plots/cartesian/select").clearSelect,f=t("./plot_config").dfltConfig,q=t("./manage_arrays"),G=t("./helpers"),T=t("./subroutines"),Y=t("./edit_types"),X=t("../plots/cartesian/constants").AX_NAME_PATTERN,A=0;function S(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function d(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){F.error(t)}}function x(t,e){d(t,n.combine(e,"white"))}function E(t,e){var n;t._context||(t._context=F.extendDeep({},f),n=p.select("base"),t._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:"");var r,i,a=t._context;if(e){for(r=Object.keys(e),u=0;u<r.length;u++)"editable"!==(i=r[u])&&"edits"!==i&&i in a&&("setBackground"===i&&"opaque"===e[i]?a[i]=x:a[i]=e[i]);e.plot3dPixelRatio&&!a.plotGlPixelRatio&&(a.plotGlPixelRatio=a.plot3dPixelRatio);var o=e.editable;if(void 0!==o)for(a.editable=o,r=Object.keys(a.edits),u=0;u<r.length;u++)a.edits[r[u]]=o;if(e.edits)for(r=Object.keys(e.edits),u=0;u<r.length;u++)(i=r[u])in a.edits&&(a.edits[i]=e.edits[i]);a._exportedPlot=e._exportedPlot}a.staticPlot&&(a.editable=!1,a.edits={},a.autosizable=!1,a.scrollZoom=!1,a.doubleClick=!1,a.showTips=!1,a.showLink=!1,a.displayModeBar=!1),"hover"!==a.displayModeBar||c||(a.displayModeBar=!0),"transparent"!==a.setBackground&&"function"==typeof a.setBackground||(a.setBackground=d),a._hasZeroHeight=a._hasZeroHeight||0===t.clientHeight,a._hasZeroWidth=a._hasZeroWidth||0===t.clientWidth;var t=a.scrollZoom,s=a._scrollZoom={};if(!0===t)s.cartesian=1,s.gl3d=1,s.geo=1,s.mapbox=1;else if("string"==typeof t)for(var l=t.split("+"),u=0;u<l.length;u++)s[l[u]]=1;else!1!==t&&(s.gl3d=1,s.geo=1,s.mapbox=1)}function _(t,e){for(var n,r=e+1,i=[],a=0;a<t.length;a++)(n=t[a])<0?i.push(r+n):i.push(n);return i}function w(t,e,n){for(var r,i=0;i<e.length;i++){if((r=e[i])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=t.data.length||r<-t.data.length)throw new Error(n+" must be valid indices for gd.data.");if(-1<e.indexOf(r,i+1)||0<=r&&-1<e.indexOf(-t.data.length+r)||r<0&&-1<e.indexOf(t.data.length+r))throw new Error("each index in "+n+" must be unique.")}}function O(t,e,n){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),w(t,e,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&w(t,n,"newIndices"),void 0!==n&&e.length!==n.length)throw new Error("current and new indices must be of equal length.")}function a(t,e,n,r,i){!function(t,e,n,r){var i,a=F.isPlainObject(r);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!F.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(i in w(t,n,"indices"),e){if(!Array.isArray(e[i])||e[i].length!==n.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(a&&(!(i in r)||!Array.isArray(r[i])||r[i].length!==e[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,n,r);for(var a=function(t,e,n,r){var i,a,o,s,l,u=F.isPlainObject(r),c=[];for(l in Array.isArray(n)||(n=[n]),n=_(n,t.data.length-1),e)for(var f=0;f<n.length;f++){if(s=t.data[n[f]],i=(a=B(s,l)).get(),o=e[l][f],!F.isArrayOrTypedArray(o))throw new Error("attribute: "+l+" index: "+f+" must be an array");if(!F.isArrayOrTypedArray(i))throw new Error("cannot extend missing or non-array attribute: "+l);if(i.constructor!==o.constructor)throw new Error("cannot extend array with an array of a different type: "+l);s=u?r[l][f]:r,h(s)||(s=-1),c.push({prop:a,target:i,insert:o,maxp:Math.floor(s)})}return c}(t,e,n,r),o={},s={},l=0;l<a.length;l++){var u=a[l].prop,c=a[l].maxp,c=i(a[l].target,a[l].insert,c);u.set(c[0]),Array.isArray(o[u.astr])||(o[u.astr]=[]),o[u.astr].push(c[1]),Array.isArray(s[u.astr])||(s[u.astr]=[]),s[u.astr].push(a[l].target.length)}return{update:o,maxPoints:s}}function s(t,e){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}function o(t,e,n,r){t=F.getGraphDiv(t),G.clearPromiseQueue(t);var i={};if("string"==typeof e)i[e]=n;else{if(!F.isPlainObject(e))return F.warn("Restyle fail.",e,n,r),Promise.reject();i=F.extendFlat({},e),void 0===r&&(r=n)}Object.keys(i).length&&(t.changed=!0);var r=G.coerceTraceIndices(t,r),a=l(t,i,r),i=a.flags;i.calc&&(t.calcdata=void 0),i.clearAxisTypes&&G.clearAxisTypes(t,r,{});r=[];i.fullReplot?r.push(M.plot):(r.push(I.previousPromises),I.supplyDefaults(t),i.markerSize&&(I.doCalcdata(t),L(r)),i.style&&r.push(T.doTraceStyle),i.colorbars&&r.push(T.doColorBars),r.push(S)),r.push(I.rehover,I.redrag),k.add(t,o,[t,a.undoit,a.traces],o,[t,a.redoit,a.traces]);r=F.syncOrAsync(r,t);return r&&r.then||(r=Promise.resolve()),r.then(function(){return t.emit("plotly_restyle",a.eventData),t})}function W(t){return void 0===t?null:t}function Z(a,t){return t?function(t,e,n){var r=B(t,e),i=r.set;return r.set=function(t){C((n||"")+e,r.get(),t,a),i(t)},r}:B}function C(t,e,n,r){if(Array.isArray(e)||Array.isArray(n))for(var i=Array.isArray(e)?e:[],a=Array.isArray(n)?n:[],o=Math.max(i.length,a.length),s=0;s<o;s++)C(t+"["+s+"]",i[s],a[s],r);else if(F.isPlainObject(e)||F.isPlainObject(n)){var l,u=F.isPlainObject(e)?e:{},c=F.isPlainObject(n)?n:{};for(l in F.extendFlat({},u,c))C(t+"."+l,u[l],c[l],r)}else void 0===r[t]&&(r[t]=W(e))}function l(i,a,o){var t,s=i._fullLayout,r=i._fullData,l=i.data,u=s._guiEditing,c=Z(s._preGUI,u),e=F.extendDeepAll({},a);K(a);var n,f,h=Y.traceFlags(),d={},p={};function g(){return o.map(function(){})}function y(t){t=H.id2name(t);-1===n.indexOf(t)&&n.push(t)}function m(t){return"LAYOUT"+t+".autorange"}function v(t){return"LAYOUT"+t+".range"}function b(t){for(var e=t;e<r.length;e++)if(r[e]._input===l[t])return r[e]}function x(t,e,n){var r;Array.isArray(t)?t.forEach(function(t){x(t,e,n)}):t in a||G.hasParent(a,t)||(r="LAYOUT"===t.substr(0,6)?c(i.layout,t.replace("LAYOUT","")):(r=o[n],Z(s._tracePreGUI[b(r)._fullInput.uid],u)(l[r],t)),t in p||(p[t]=g()),void 0===p[t][n]&&(p[t][n]=W(r.get())),void 0!==e&&r.set(e))}for(f in a){if(G.hasParent(a,f))throw new Error("cannot set "+f+" and a parent attribute simultaneously");var _,w,k,M,T=a[f];if("autobinx"!==f&&"autobiny"!==f||(f=f.charAt(f.length-1)+"bins",T=Array.isArray(T)?T.map(function(n){return function(t,e){return!1===t?r[o[e]][n]:null}}(f)):!1===T?o.map(function(e){return function(t){return r[t][e]}}(f)):null),d[f]=T,"LAYOUT"!==f.substr(0,6)){for(p[f]=g(),t=0;t<o.length;t++){_=l[o[t]],w=b(o[t]);var A,S,E=(A=Z(s._tracePreGUI[w._fullInput.uid],u)(_,f)).get();if(void 0!==(S=Array.isArray(T)?T[t%T.length]:T)){var O,C,P=A.parts[A.parts.length-1],L=f.substr(0,f.length-P.length-1),R=L?L+".":"",L=L?B(w,L).get():w,j=V.getTraceValObject(w,A.parts);if(j&&j.impliedEdits&&null!==S)for(var N in j.impliedEdits)x(F.relativeAttr(f,N),j.impliedEdits[N],t);else"thicknessmode"!==P&&"lenmode"!==P||E===S||"fraction"!==S&&"pixels"!==S||!L?"type"!==f||"pie"===S==("pie"===E)&&"funnelarea"===S==("funnelarea"===E)||(O="x",C="y","bar"!==S&&"bar"!==E||"h"!==_.orientation||(O="y",C="x"),F.swapAttrs(_,["?","?src"],"labels",O),F.swapAttrs(_,["d?","?0"],"label",O),F.swapAttrs(_,["?","?src"],"values",C),"pie"===E||"funnelarea"===E?(B(_,"marker.color").set(B(_,"marker.colors").get()),s._pielayer.selectAll("g.trace").remove()):U.traceIs(_,"cartesian")&&B(_,"marker.colors").set(B(_,"marker.color").get())):(O=s._size,C="top"===(C=L.orient)||"bottom"===C,"thicknessmode"===P?(P=C?O.h:O.w,x(R+"thickness",L.thickness*("fraction"===S?1/P:P),t)):(D=C?O.w:O.h,x(R+"len",L.len*("fraction"===S?1/D:D),t)));p[f][t]=W(E);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(f)){if("orientation"===f){A.set(S);var D=_.x&&!_.y?"h":"v";if((A.get()||D)===w.orientation)continue}else"orientationaxes"===f&&(_.orientation={v:"h",h:"v"}[w.orientation]);G.swapXYData(_),h.calc=h.clearAxisTypes=!0}else-1!==I.dataArrayContainers.indexOf(A.parts[0])?(G.manageArrayContainers(A,S,p),h.calc=!0):(!j||j.arrayOk&&!U.traceIs(w,"regl")&&(F.isArrayOrTypedArray(S)||F.isArrayOrTypedArray(E))?h.calc=!0:Y.update(h,j),A.set(S))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(f)&&H.swap(i,o),"orientationaxes"===f&&("x"===(M=(k=B(i.layout,"hovermode")).get())?k.set("y"):"y"===M?k.set("x"):"x unified"===M?k.set("y unified"):"y unified"===M&&k.set("x unified")),-1!==["orientation","type"].indexOf(f)){for(n=[],t=0;t<o.length;t++){var z=l[o[t]];U.traceIs(z,"cartesian")&&(y(z.xaxis||"x"),y(z.yaxis||"y"))}x(n.map(m),!0,0),x(n.map(v),[0,1],0)}}else A=c(i.layout,f.replace("LAYOUT","")),p[f]=[W(A.get())],A.set(Array.isArray(T)?T[0]:T),h.calc=!0}return(h.calc||h.plot)&&(h.fullReplot=!0),{flags:h,undoit:p,redoit:d,traces:o,eventData:F.extendDeepNoArrays([],[e,o])}}function K(n){for(var t,e,r=F.counterRegex("axis",".title",!1,!1),i=/colorbar\.title$/,a=Object.keys(n),o=0;o<a.length;o++)t=a[o],e=n[t],"title"!==t&&!r.test(t)&&!i.test(t)||"string"!=typeof e&&"number"!=typeof e?-1<t.indexOf("titlefont")?s(t,t.replace("titlefont","title.font")):-1<t.indexOf("titleposition")?s(t,t.replace("titleposition","title.position")):-1<t.indexOf("titleside")?s(t,t.replace("titleside","title.side")):-1<t.indexOf("titleoffset")&&s(t,t.replace("titleoffset","title.offset")):s(t,t.replace("title","title.text"));function s(t,e){n[e]=n[t],delete n[t]}}function P(t,e,n){if(t=F.getGraphDiv(t),G.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var r={};if("string"==typeof e)r[e]=n;else{if(!F.isPlainObject(e))return F.warn("Relayout fail.",e,n),Promise.reject();r=F.extendFlat({},e)}Object.keys(r).length&&(t.changed=!0);var i=R(t,r),n=i.flags;n.calc&&(t.calcdata=void 0);e=[I.previousPromises];n.layoutReplot?e.push(T.layoutReplot):Object.keys(r).length&&(u(t,n,i)||I.supplyDefaults(t),n.legend&&e.push(T.doLegend),n.layoutstyle&&e.push(T.layoutStyles),n.axrange&&L(e,i.rangesAltered),n.ticks&&e.push(T.doTicksRelayout),n.modebar&&e.push(T.doModeBar),n.camera&&e.push(T.doCamera),n.colorbars&&e.push(T.doColorBars),e.push(S)),e.push(I.rehover,I.redrag),k.add(t,P,[t,i.undoit],P,[t,i.redoit]);e=F.syncOrAsync(e,t);return e&&e.then||(e=Promise.resolve(t)),e.then(function(){return t.emit("plotly_relayout",i.eventData),t})}function u(t,e,n){var r=t._fullLayout;if(e.axrange){for(var i in e)if("axrange"!==i&&e[i])return;for(var a in n.rangesAltered){var o,s=H.id2name(a),l=t.layout[s],u=r[s];if(u.autorange=l.autorange,u.range=l.range.slice(),u.cleanRange(),u._matchGroup)for(var c in u._matchGroup)c!==a&&((o=r[H.id2name(c)]).autorange=u.autorange,o.range=u.range.slice(),o._input.range=u.range.slice())}return 1}}function L(t,o){var e=o?function(t){var e,n=[],r=!0;for(e in o){var i=H.getFromId(t,e);if(n.push(e),-1!==(i.ticklabelposition||"").indexOf("inside")&&i._anchorAxis&&n.push(i._anchorAxis._id),i._matchGroup)for(var a in i._matchGroup)o[a]||n.push(a);i.automargin&&(r=!1)}return H.draw(t,n,{skipTitle:r})}:function(t){return H.draw(t,"redraw")};t.push(r,T.doAutoRangeAndConstraints,e,T.drawData,T.finalDraw)}var Q=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,$=/^[xyz]axis[0-9]*\.autorange$/,J=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function R(t,r){var e,n,i,a=t.layout,o=t._fullLayout,s=o._guiEditing,l=Z(o._preGUI,s),u=Object.keys(r),c=H.list(t),s=F.extendDeepAll({},r),f={};for(K(r),u=Object.keys(r),n=0;n<u.length;n++)if(0===u[n].indexOf("allaxes")){for(i=0;i<c.length;i++){var h=c[i]._id.substr(1),h=-1!==h.indexOf("scene")?h+".":"",h=u[n].replace("allaxes",h+c[i]._name);r[h]||(r[h]=r[u[n]])}delete r[u[n]]}var d=Y.layoutFlags(),p={},g={};function y(t,e){var n;Array.isArray(t)?t.forEach(function(t){y(t,e)}):t in r||G.hasParent(r,t)||(n=l(a,t),t in g||(g[t]=W(n.get())),void 0!==e&&n.set(e))}var m,v,b,x={};function _(t){t=H.name2id(t.split(".")[0]);return x[t]=1,t}for(v in r){if(G.hasParent(r,v))throw new Error("cannot set "+v+" and a parent attribute simultaneously");for(var w=l(a,v),k=r[v],M=w.parts.length-1;0<M&&"string"!=typeof w.parts[M];)M--;var T=w.parts[M],A=w.parts[M-1]+"."+T,S=w.parts.slice(0,M).join("."),E=B(t.layout,S).get(),O=B(o,S).get(),C=w.get();if(void 0!==k){p[v]=k,g[v]="reverse"===T?k:W(C);var P,L,R=V.getLayoutValObject(o,w.parts);if(R&&R.impliedEdits&&null!==k)for(var j in R.impliedEdits)y(F.relativeAttr(v,j),R.impliedEdits[j]);-1!==["width","height"].indexOf(v)?k?(y("autosize",null),y(P="height"===v?"width":"height",o[P])):o[v]=t._initialAutoSize[v]:"autosize"===v?(y("width",k?null:o.width),y("height",k?null:o.height)):A.match(Q)?(_(A),B(o,S+"._inputRange").set(null)):A.match($)?(_(A),B(o,S+"._inputRange").set(null),(L=B(o,S).get())._inputDomain&&(L._input.domain=L._inputDomain.slice())):A.match(J)&&B(o,S+"._inputDomain").set(null),"type"===T?(m=E,P="linear"===O.type&&"log"===k,L="log"===O.type&&"linear"===k,P||L?(m&&m.range?O.autorange?P&&(m.range=m.range[1]>m.range[0]?[1,2]:[2,1]):(A=m.range[0],L=m.range[1],P?(A<=0&&L<=0&&y(S+".autorange",!0),A<=0?A=L/1e6:L<=0&&(L=A/1e6),y(S+".range[0]",Math.log(A)/Math.LN10),y(S+".range[1]",Math.log(L)/Math.LN10)):(y(S+".range[0]",Math.pow(10,A)),y(S+".range[1]",Math.pow(10,L)))):y(S+".autorange",!0),Array.isArray(o._subplots.polar)&&o._subplots.polar.length&&o[w.parts[0]]&&"radialaxis"===w.parts[1]&&delete o[w.parts[0]]._subplot.viewInitial["radialaxis.range"],U.getComponentMethod("annotations","convertCoords")(t,O,k,y),U.getComponentMethod("images","convertCoords")(t,O,k,y)):(y(S+".autorange",!0),y(S+".range",null)),B(o,S+"._inputRange").set(null)):T.match(X)&&(D=B(o,v).get(),(N=(k||{}).type)&&"-"!==N||(N="linear"),U.getComponentMethod("annotations","convertCoords")(t,D,N,y),U.getComponentMethod("images","convertCoords")(t,D,N,y));var N,D=q.containerArrayMatch(v);D?(e=D.array,n=D.index,N=D.property,D=R||{editType:"calc"},""!==n&&""===N&&(q.isAddVal(k)?g[v]=null:q.isRemoveVal(k)?g[v]=(B(a,e).get()||[])[n]:F.warn("unrecognized full object value",r)),Y.update(d,D),f[e]||(f[e]={}),(f[e][n]||(f[e][n]={}))[N]=k,delete r[v]):"reverse"===T?(E.range?E.range.reverse():(y(S+".autorange",!0),E.range=[1,0]),O.autorange?d.calc=!0:d.plot=!0):(o._has("scatter-like")&&o._has("regl")&&"dragmode"===v&&("lasso"===k||"select"===k)&&"lasso"!==C&&"select"!==C||o._has("gl2d")?d.plot=!0:R?Y.update(d,R):d.calc=!0,w.set(k))}}for(e in f)q.applyContainerArrayChanges(t,l(a,e),f[e],d,l)||(d.plot=!0);for(b in x){var z=(m=H.getFromId(t,b))&&m._constraintGroup;if(z)for(var I in d.calc=!0,z)x[I]||(H.getFromId(t,I)._constraintShrinkable=!0)}return(tt(t)||r.height||r.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,rangesAltered:x,undoit:g,redoit:p,eventData:s}}function tt(t){var e=t._fullLayout,n=e.width,r=e.height;return t.layout.autosize&&I.plotAutoSize(t,t.layout,e),e.width!==n||e.height!==r}function j(t,e,n,r){if(t=F.getGraphDiv(t),G.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);F.isPlainObject(e)||(e={}),F.isPlainObject(n)||(n={}),Object.keys(e).length&&(t.changed=!0),Object.keys(n).length&&(t.changed=!0);var i=G.coerceTraceIndices(t,r),a=l(t,F.extendFlat({},e),i),r=a.flags,o=R(t,F.extendFlat({},n)),e=o.flags;(r.calc||e.calc)&&(t.calcdata=void 0),r.clearAxisTypes&&G.clearAxisTypes(t,i,n);n=[];e.layoutReplot?n.push(T.layoutReplot):r.fullReplot?n.push(M.plot):(n.push(I.previousPromises),u(t,e,o)||I.supplyDefaults(t),r.style&&n.push(T.doTraceStyle),(r.colorbars||e.colorbars)&&n.push(T.doColorBars),e.legend&&n.push(T.doLegend),e.layoutstyle&&n.push(T.layoutStyles),e.axrange&&L(n,o.rangesAltered),e.ticks&&n.push(T.doTicksRelayout),e.modebar&&n.push(T.doModeBar),e.camera&&n.push(T.doCamera),n.push(S)),n.push(I.rehover,I.redrag),k.add(t,j,[t,a.undoit,o.undoit,a.traces],j,[t,a.redoit,o.redoit,a.traces]);n=F.syncOrAsync(n,t);return n&&n.then||(n=Promise.resolve(t)),n.then(function(){return t.emit("plotly_update",{data:a.eventData,layout:o.eventData}),t})}function N(n){return function(t){t._fullLayout._guiEditing=!0;var e=n.apply(null,arguments);return t._fullLayout._guiEditing=!1,e}}var D=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],z=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function et(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=t.match(r.pattern);if(i)return{head:i[1],attr:r.attr}}}function nt(t,e){var n=B(e,t).get();if(void 0!==n)return n;var r=t.split(".");for(r.pop();1<r.length;)if(r.pop(),void 0!==(n=B(e,r.join(".")+".uirevision").get()))return n;return e.uirevision}function rt(t,e){var n=F.isPlainObject(t),r=Array.isArray(t);return n||r?(n&&F.isPlainObject(e)||r&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function it(t,e,n,r){var i,a,o,s,l,u,c,f,h=r._preGUI,d=[],p={};for(i in h){if(l=et(i,D)){if(a=l.attr||l.head+".uirevision",o=B(r,a).get(),s=o&&nt(a,e),s&&s===o&&(null===(u=h[i])&&(u=void 0),rt(f=(c=B(e,i)).get(),u))){void 0===f&&"autorange"===i.substr(i.length-9)&&d.push(i.substr(0,i.length-10)),c.set(W(B(r,i).get()));continue}}else F.warn("unrecognized GUI edit: "+i);delete h[i],"range["===i.substr(i.length-8,6)&&(p[i.substr(0,i.length-9)]=1)}for(var g=0;g<d.length;g++){var y=d[g];!p[y]||(y=B(e,y).get())&&delete y.autorange}var m,v=r._tracePreGUI;for(m in v){var b=v[m],x=null;for(i in b){if(!x){var _=function(t,e){for(var n=0;n<e.length;n++)if(e[n]._fullInput.uid===t)return n;return-1}(m,n);if(_<0){delete v[m];break}var w,_=function(t,e,n){for(var r=0;r<e.length;r++)if(e[r].uid===t)return r;return!e[n]||e[n].uid?-1:n}(m,t,(w=n[_]._fullInput).index);if(_<0){delete v[m];break}x=t[_]}if(l=et(i,z)){if(l.attr?s=(o=B(r,l.attr).get())&&nt(l.attr,e):(o=w.uirevision,void 0===(s=x.uirevision)&&(s=e.uirevision)),s&&s===o&&(null===(u=b[i])&&(u=void 0),rt(f=(c=B(x,i)).get(),u))){c.set(W(B(w,i).get()));continue}}else F.warn("unrecognized GUI edit: "+i+" in trace uid "+m);delete b[i]}}}function at(t,e,n,r){var i,a,o=r.getValObject,s=r.flags,l=r.immutable,u=r.inArray,c=r.arrayIndex;function f(){var t=i.editType;u&&-1!==t.indexOf("arraydraw")?F.pushUnique(s.arrays[u],c):(Y.update(s,i),"none"!==t&&s.nChanges++,r.transition&&i.anim&&s.nChangesAnim++,(Q.test(y)||$.test(y))&&(s.rangesAltered[n[0]]=1),J.test(y)&&B(e,"_inputDomain").set(null),"datarevision"===a&&(s.newDataRevision=1))}function h(t){return"data_array"===t.valType||t.arrayOk}for(a in t){if(s.calc&&!r.transition)return;var d=t[a],p=e[a],g=n.concat(a),y=g.join(".");if("_"!==a.charAt(0)&&"function"!=typeof d&&d!==p){if(("tick0"===a||"dtick"===a)&&"geo"!==n[0]){var m=e.tickmode;if("auto"===m||"array"===m||!m)continue}if(("range"!==a||!e.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==e.type)&&(i=o(g),i&&(!i._compareAsJSON||JSON.stringify(d)!==JSON.stringify(p)))){var v,b=i.valType,x=h(i),_=Array.isArray(d),w=Array.isArray(p);if(_&&w){var k="_input_"+a,m=t[k],k=e[k];if(Array.isArray(m)&&m===k)continue}if(void 0===p)x&&_?s.calc=!0:f();else if(i._isLinkedToArray){var M=[],k=!1;u||(s.arrays[a]=M);var T=Math.min(d.length,p.length),A=Math.max(d.length,p.length);if(T!==A){if("arraydraw"!==i.editType){f();continue}k=!0}for(v=0;v<T;v++)at(d[v],p[v],g.concat(v),F.extendFlat({inArray:a,arrayIndex:v},r));if(k)for(v=T;v<A;v++)M.push(v)}else!b&&F.isPlainObject(d)?at(d,p,g,r):x?_&&w?(l&&(s.calc=!0),(l||r.newDataRevision)&&f()):_!==w?s.calc=!0:f():_&&w&&d.length===p.length&&String(d)===String(p)||f()}}}for(a in e)if(!(a in t||"_"===a.charAt(0)||"function"==typeof e[a])){if(h(i=o(n.concat(a)))&&Array.isArray(e[a]))return void(s.calc=!0);f()}}function ot(t){var e=t._fullLayout,n=t.getBoundingClientRect();F.equalDomRects(n,e._lastBBox)||(t=e._invTransform=F.inverseTransformMatrix(F.getFullTransformMatrix(t)),e._invScaleX=Math.sqrt(t[0][0]*t[0][0]+t[0][1]*t[0][1]+t[0][2]*t[0][2]),e._invScaleY=Math.sqrt(t[1][0]*t[1][0]+t[1][1]*t[1][1]+t[1][2]*t[1][2]),e._lastBBox=n)}function st(t){var e,n=p.select(t),r=t._fullLayout;r._calcInverseTransform=ot,r._calcInverseTransform(t),r._container=n.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),r._uid||(e={},p.selectAll("defs").each(function(){this.id&&(e[this.id.split("-")[1]]=1)}),r._uid=F.randstr(e)),r._paperdiv.selectAll(".main-svg").attr(i.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);n=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=n.append("g").classed("imagelayer",!0),r._shapeLowerLayer=n.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);n=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=n.append("g").classed("imagelayer",!0),r._shapeUpperLayer=n.append("g").classed("shapelayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}M.animate=function(d,p,g){if(d=F.getGraphDiv(d),!F.isPlotDiv(d))throw new Error("This element is not a Plotly plot: "+d+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var y=d._transitionData;y._frameQueue||(y._frameQueue=[]);var m=(g=I.supplyAnimationDefaults(g)).transition,v=g.frame;return void 0===y._frameWaitingCnt&&(y._frameWaitingCnt=0),new Promise(function(a,o){var t,e=0;function n(t){return Array.isArray(m)?e>=m.length?t.transitionOpts=m[e]:t.transitionOpts=m[0]:t.transitionOpts=m,e++,t}var r=[],i=null==p,s=Array.isArray(p);if(!i&&!s&&F.isPlainObject(p))r.push({type:"object",data:n(F.extendFlat({},p))});else if(i||-1!==["string","number"].indexOf(typeof p))for(h=0;h<y._frames.length;h++)(t=y._frames[h])&&(!i&&String(t.group)!==String(p)||r.push({type:"byname",name:String(t.name),data:n({name:t.name})}));else if(s)for(h=0;h<p.length;h++){var l=p[h];-1!==["number","string"].indexOf(typeof l)?(l=String(l),r.push({type:"byname",name:l,data:n({name:l})})):F.isPlainObject(l)&&r.push({type:"object",data:n(F.extendFlat({},l))})}for(h=0;h<r.length;h++)if("byname"===(t=r[h]).type&&!y._frameHash[t.data.name])return F.warn('animate failure: frame not found: "'+t.data.name+'"'),void o();-1!==["next","immediate"].indexOf(g.mode)&&function(){if(0!==y._frameQueue.length){for(;y._frameQueue.length;){var t=y._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}d.emit("plotly_animationinterrupted",[])}}(),"reverse"===g.direction&&r.reverse();var u=d._fullLayout._currentFrame;if(u&&g.fromcurrent){var c=-1;for(h=0;h<r.length;h++)if("byname"===(t=r[h]).type&&t.name===u){c=h;break}if(0<c&&c<r.length-1){for(var f=[],h=0;h<r.length;h++)t=r[h],("byname"!==r[h].type||c<h)&&f.push(t);r=f}}0<r.length?function(t){if(0!==t.length){for(var e=0;e<t.length;e++){var n="byname"===t[e].type?I.computeFrame(d,t[e].name):t[e].data,r=(i=e,Array.isArray(v)?i>=v.length?v[0]:v[i]:v),i=(i=e,Array.isArray(m)?i>=m.length?m[0]:m[i]:m);i.duration=Math.min(i.duration,r.duration);i={frame:n,name:t[e].name,frameOpts:r,transitionOpts:i};e===t.length-1&&(i.onComplete=function(t,e){var n=0;return function(){if(t&&++n===e)return t()}}(a,2),i.onInterrupt=o),y._frameQueue.push(i)}"immediate"===g.mode&&(y._lastFrameAt=-1/0),y._animationRaf||function(){d.emit("plotly_animating"),y._lastFrameAt=-1/0,y._timeToNext=0,y._runningTransitions=0,y._currentFrame=null;var t=function(){y._animationRaf=window.requestAnimationFrame(t),Date.now()-y._lastFrameAt>y._timeToNext&&function(){y._currentFrame&&y._currentFrame.onComplete&&y._currentFrame.onComplete();var t,e=y._currentFrame=y._frameQueue.shift();e?(t=e.name?e.name.toString():null,d._fullLayout._currentFrame=t,y._lastFrameAt=Date.now(),y._timeToNext=e.frameOpts.duration,I.transition(d,e.frame.data,e.frame.layout,G.coerceTraceIndices(d,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),d.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})):(d.emit("plotly_animated"),window.cancelAnimationFrame(y._animationRaf),y._animationRaf=null)}()};t()}()}}(r):(d.emit("plotly_animated"),a())})},M.addFrames=function(t,e,n){if(t=F.getGraphDiv(t),null==e)return Promise.resolve();if(!F.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,i,a,o=t._transitionData._frames,s=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);for(var l,u,c,f,h=o.length+2*e.length,d=[],p={},g=e.length-1;0<=g;g--)F.isPlainObject(e[g])&&(u=(s[l=e[g].name]||p[l]||{}).name,c=e[g].name,f=s[u]||p[u],u&&c&&"number"==typeof c&&f&&A<5&&(A++,F.warn('addFrames: overwriting frame "'+(s[u]||p[u]).name+'" with a frame whose name of type "number" also equates to "'+u+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===A&&F.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[l]={name:l},d.push({frame:I.supplyFrameDefaults(e[g]),index:n&&void 0!==n[g]&&null!==n[g]?n[g]:h+g}));d.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var y=[],m=[],v=o.length;for(g=d.length-1;0<=g;g--){if("number"==typeof(r=d[g].frame).name&&F.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;s[r.name="frame "+t._transitionData._counter++];);if(s[r.name]){for(i=0;i<o.length&&(o[i]||{}).name!==r.name;i++);y.push({type:"replace",index:i,value:r}),m.unshift({type:"replace",index:i,value:o[i]})}else a=Math.max(0,Math.min(d[g].index,v)),y.push({type:"insert",index:a,value:r}),m.unshift({type:"delete",index:a}),v++}var b=I.modifyFrames,x=I.modifyFrames,_=[t,m],w=[t,y];return k&&k.add(t,b,_,x,w),I.modifyFrames(t,y)},M.deleteFrames=function(t,e){if(t=F.getGraphDiv(t),!F.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var n,r,i=t._transitionData._frames,a=[],o=[];if(!e)for(e=[],n=0;n<i.length;n++)e.push(n);for((e=e.slice()).sort(),n=e.length-1;0<=n;n--)r=e[n],a.push({type:"delete",index:r}),o.unshift({type:"insert",index:r,value:i[r]});var s=I.modifyFrames,l=I.modifyFrames,u=[t,o],c=[t,a];return k&&k.add(t,s,u,l,c),I.modifyFrames(t,a)},M.addTraces=function t(i,e,n){i=F.getGraphDiv(i);var r,a,o=[],s=M.deleteTraces,l=t,u=[i,o],c=[i,e];for(function(t,e){var n,r;if(!Array.isArray(i.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),n=0;n<t.length;n++)if("object"!=typeof(r=t[n])||Array.isArray(r)||null===r)throw new Error("all values in traces array must be non-array objects");if(void 0===e||Array.isArray(e)||(e=[e]),void 0!==e&&e.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,n),Array.isArray(e)||(e=[e]),e=e.map(function(t){return F.extendFlat({},t)}),G.cleanData(e),r=0;r<e.length;r++)i.data.push(e[r]);for(r=0;r<e.length;r++)o.push(-e.length+r);if(void 0===n)return a=M.redraw(i),k.add(i,s,u,l,c),a;Array.isArray(n)||(n=[n]);try{O(i,o,n)}catch(t){throw i.data.splice(i.data.length-e.length,e.length),t}return k.startSequence(i),k.add(i,s,u,l,c),a=M.moveTraces(i,o,n),k.stopSequence(i),a},M.deleteTraces=function t(e,n){e=F.getGraphDiv(e);var r,i,a=[],o=M.addTraces,s=t,l=[e,a,n],u=[e,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(n)||(n=[n]),w(e,n,"indices"),(n=_(n,e.data.length-1)).sort(F.sorterDes),r=0;r<n.length;r+=1)i=e.data.splice(n[r],1)[0],a.push(i);var c=M.redraw(e);return k.add(e,o,l,s,u),c},M.extendTraces=function t(e,n,r,i){n=a(e=F.getGraphDiv(e),n,r,i,function(t,e,n){var r,i,a,o;return F.isTypedArray(t)?n<0?(r=new t.constructor(0),i=s(t,e),r=n<0?(o=i,r):(o=r,i)):(o=new t.constructor(n),r=new t.constructor(t.length+e.length-n),n===e.length?(o.set(e),r.set(t)):n<e.length?(a=e.length-n,o.set(e.subarray(a)),r.set(t),r.set(e.subarray(0,a),t.length)):(i=n-e.length,a=t.length-i,o.set(t.subarray(a)),o.set(e,i),r.set(t.subarray(0,a)))):(o=t.concat(e),r=0<=n&&n<o.length?o.splice(0,o.length-n):[]),[o,r]}),i=M.redraw(e),n=[e,n.update,r,n.maxPoints];return k.add(e,M.prependTraces,n,t,arguments),i},M.moveTraces=function t(e,n,r){var i,a=[],o=[],s=t,l=t,u=[e=F.getGraphDiv(e),r,n],c=[e,n,r];if(O(e,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],i=0;i<n.length;i++)r.push(-n.length+i);for(r=Array.isArray(r)?r:[r],n=_(n,e.data.length-1),r=_(r,e.data.length-1),i=0;i<e.data.length;i++)-1===n.indexOf(i)&&a.push(e.data[i]);for(i=0;i<n.length;i++)o.push({newIndex:r[i],trace:e.data[n[i]]});for(o.sort(function(t,e){return t.newIndex-e.newIndex}),i=0;i<o.length;i+=1)a.splice(o[i].newIndex,0,o[i].trace);e.data=a;var f=M.redraw(e);return k.add(e,s,u,l,c),f},M.prependTraces=function t(e,n,r,i){n=a(e=F.getGraphDiv(e),n,r,i,function(t,e,n){var r,i,a,o;return F.isTypedArray(t)?n<=0?(r=new t.constructor(0),i=s(e,t),i=n<0?(o=i,r):(o=r,i)):(o=new t.constructor(n),i=new t.constructor(t.length+e.length-n),n===e.length?(o.set(e),i.set(t)):n<e.length?(a=e.length-n,o.set(e.subarray(0,a)),i.set(e.subarray(a)),i.set(t,a)):(a=n-e.length,o.set(e),o.set(t.subarray(0,a),e.length),i.set(t.subarray(a)))):(o=e.concat(t),i=0<=n&&n<o.length?o.splice(n,o.length):[]),[o,i]}),i=M.redraw(e),n=[e,n.update,r,n.maxPoints];return k.add(e,M.extendTraces,n,t,arguments),i},M.newPlot=function(t,e,n,r){return t=F.getGraphDiv(t),I.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),I.purge(t),M.plot(t,e,n,r)},M.plot=function(i,t,e,n){var r,a;if(i=F.getGraphDiv(i),g.init(i),F.isPlainObject(t)&&(t=(a=t).data,e=a.layout,n=a.config,r=a.frames),!1===g.triggerHandler(i,"plotly_beforeplot",[t,e,n]))return Promise.reject();t||e||F.isPlotDiv(i)||F.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",i),E(i,n),e=e||{},p.select(i).classed("js-plotly-plot",!0),m.makeTester(),Array.isArray(i._promises)||(i._promises=[]);var o=0===(i.data||[]).length&&Array.isArray(t);Array.isArray(t)&&(G.cleanData(t),o?i.data=t:i.data.push.apply(i.data,t),i.empty=!1),i.layout&&!o||(i.layout=G.cleanLayout(e)),I.supplyDefaults(i);var s=i._fullLayout,n=s._has("cartesian");if(!s._has("polar")&&t&&t[0]&&t[0].r)return F.log("Legacy polar charts are deprecated!"),function(e,t,n){var r=p.select(e).selectAll(".plot-container").data([0]);r.enter().insert("div",":first-child").classed("plot-container plotly",!0);var i=r.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",!0).style("position","relative"),i.html(""),t&&(e.data=t);n&&(e.layout=n);y.manager.fillLayout(e),i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=y.manager.framework(e),e.framework({data:e.data,layout:e.layout},i.node()),e.framework.setUndoPoint();r=e.framework.svg(),t=1,n=e._fullLayout.title?e._fullLayout.title.text:"";""!==n&&n||(t=0);function a(){this.call(b.convertToTspans,e)}i=r.select(".title-group text").call(a);{var o;e._context.edits.titleText&&(r=F._(e,"Click to enter Plot title"),n&&n!==r||(t=.2,i.attr({"data-unformatted":r}).text(r).style({opacity:t}).on("mouseover.opacity",function(){p.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){p.select(this).transition().duration(1e3).style("opacity",0)})),o=function(){this.call(b.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:{text:t}}}),this.text(t).call(a),this.call(o)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(a)})},i.call(o))}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),I.addLinks(e),Promise.resolve()}(i,t,e);s._replotting=!0,(o||s._shouldCreateBgLayer)&&(st(i),s._shouldCreateBgLayer&&delete s._shouldCreateBgLayer),i.framework!==st&&(i.framework=st)(i),m.initGradients(i),o&&H.saveShowSpikeInitial(i);var l=!i.calcdata||i.calcdata.length!==(i._fullData||[]).length;l&&I.doCalcdata(i);for(var u=0;u<i.calcdata.length;u++)i.calcdata[u][0].trace=i._fullData[u];i._context.responsive?i._responsiveChartHandler||(i._responsiveChartHandler=function(){F.isHidden(i)||I.resize(i)},window.addEventListener("resize",i._responsiveChartHandler)):F.clearResponsive(i);var c=F.extendFlat({},s._size),f=0;function h(){if(I.clearAutoMarginIds(i),T.drawMarginPushers(i),H.allowAutoMargin(i),s._has("pie"))for(var t=i._fullData,e=0;e<t.length;e++){var n=t[e];"pie"===n.type&&n.automargin&&I.allowAutoMargin(i,"pie."+n.uid+".automargin")}return I.doAutoMargin(i),I.previousPromises(i)}function d(){i._transitioning||(T.doAutoRangeAndConstraints(i),o&&H.saveRangeInitial(i),U.getComponentMethod("rangeslider","calcAutorange")(i))}return e=[I.previousPromises,function(){if(r)return M.addFrames(i,r)},function t(){for(var e=s._basePlotModules,n=0;n<e.length;n++)e[n].drawFramework&&e[n].drawFramework(i);if(!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),s._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),s._glcanvas){s._glcanvas.attr("width",s.width).attr("height",s.height);var r=s._glcanvas.data()[0].regl;if(r&&(Math.floor(s.width)!==r._gl.drawingBufferWidth||Math.floor(s.height)!==r._gl.drawingBufferHeight)){if(r="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.",!f)return F.log(r+" Clearing graph and plotting again."),I.cleanPlot([],{},i._fullData,s),I.supplyDefaults(i),s=i._fullLayout,I.doCalcdata(i),f++,t();F.error(r)}}return"h"===s.modebar.orientation?s._modebardiv.style("height",null).style("width","100%"):s._modebardiv.style("width",null).style("height",s.height+"px"),I.previousPromises(i)},h,function(){if(I.didMarginChange(c,s._size))return F.syncOrAsync([h,T.layoutStyles],i)}],n&&e.push(function(){if(l)return F.syncOrAsync([U.getComponentMethod("shapes","calcAutorange"),U.getComponentMethod("annotations","calcAutorange"),d],i);d()}),e.push(T.layoutStyles),n&&e.push(function(){return H.draw(i,o?"":"redraw")},function(t){t._fullLayout._insideTickLabelsAutorange&&P(t,t._fullLayout._insideTickLabelsAutorange).then(function(){t._fullLayout._insideTickLabelsAutorange=void 0})}),e.push(T.drawData,T.finalDraw,v,I.addLinks,I.rehover,I.redrag,I.doAutoMargin,function(t){t._fullLayout._insideTickLabelsAutorange&&o&&H.saveRangeInitial(t,!0)},I.previousPromises),(e=F.syncOrAsync(e,i))&&e.then||(e=Promise.resolve()),e.then(function(){return S(i),i})},M.purge=function(t){var e=(t=F.getGraphDiv(t))._fullLayout||{},n=t._fullData||[];return I.cleanPlot([],{},n,e),I.purge(t),g.purge(t),e._container&&e._container.remove(),delete t._context,t},M.react=function(t,e,n,r){var i;t=F.getGraphDiv(t),G.clearPromiseQueue(t);var a=t._fullData,o=t._fullLayout;if(F.isPlotDiv(t)&&a&&o){F.isPlainObject(e)&&(e=(g=e).data,n=g.layout,r=g.config,i=g.frames);var s=!1;r&&(m=F.extendDeep({},t._context),t._context=void 0,E(t,r),s=function t(e,n){for(var r in e)if("_"!==r.charAt(0)){var i=e[r],a=n[r];if(i!==a)if(F.isPlainObject(i)&&F.isPlainObject(a)){if(t(i,a))return!0}else{if(!Array.isArray(i)||!Array.isArray(a))return!0;if(i.length!==a.length)return!0;for(var o=0;o<i.length;o++)if(i[o]!==a[o]){if(!F.isPlainObject(i[o])||!F.isPlainObject(a[o]))return!0;if(t(i[o],a[o]))return!0}}}}(m,t._context)),t.data=e||[],G.cleanData(t.data),t.layout=n||{},G.cleanLayout(t.layout),it(t.data,t.layout,a,o);for(var l=Object.getOwnPropertyNames(o),u=0;u<l.length;u++){var c=l[u],f=c.substring(0,5);"xaxis"!==f&&"yaxis"!==f||(c=o[c]._emptyCategories)&&c()}I.supplyDefaults(t,{skipUpdateCalc:!0});var h=t._fullData,d=t._fullLayout,p=void 0===d.datarevision,g=d.transition,y=function(t,e,n,r,i){var a=Y.layoutFlags();a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,at(e,n,[],{getValObject:function(t){return V.getLayoutValObject(n,t)},flags:a,immutable:r,transition:i,gd:t}),(a.plot||a.calc)&&(a.layoutReplot=!0);i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(t,o,d,p,g),m=y.newDataRevision,v=function(t,e,n,r,i,a){var o=e.length===n.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,l,u=Y.traceFlags();u.arrays={},u.nChanges=0,u.nChangesAnim=0;var c={getValObject:function(t){return t=V.getTraceValObject(l,t),!l._module.animatable&&t.anim&&(t.anim=!1),t},flags:u,immutable:r,transition:i,newDataRevision:a,gd:t},f={};for(s=0;s<e.length;s++)n[s]&&(l=n[s]._fullInput,I.hasMakesDataTransform(l)&&(l=n[s]),f[l.uid]||(f[l.uid]=1,at(e[s]._fullInput,l,[],c)));(u.calc||u.plot)&&(u.fullReplot=!0);i&&u.nChanges&&u.nChangesAnim&&(u.anim=u.nChanges===u.nChangesAnim&&o?"all":"some");return u}(t,a,h,p,g,m);tt(t)&&(y.layoutReplot=!0),v.calc||y.calc?t.calcdata=void 0:I.supplyDefaultsUpdateCalc(t.calcdata,h);var h=[];if(i&&(t._transitionData={},I.createTransitionData(t),h.push(function(){return M.addFrames(t,i)})),d.transition&&!s&&(v.anim||y.anim))y.ticks&&h.push(T.doTicksRelayout),I.doCalcdata(t),T.doAutoRangeAndConstraints(t),h.push(function(){return I.transitionFromReact(t,v,y,o)});else if(v.fullReplot||y.layoutReplot||s)t._fullLayout._skipDefaults=!0,h.push(M.plot);else{for(var b in y.arrays){var x=y.arrays[b];if(x.length){var _=U.getComponentMethod(b,"drawOne");if(_!==F.noop)for(var w=0;w<x.length;w++)_(t,x[w]);else{var k=U.getComponentMethod(b,"draw");if(k===F.noop)throw new Error("cannot draw components: "+b);k(t)}}}h.push(I.previousPromises),v.style&&h.push(T.doTraceStyle),(v.colorbars||y.colorbars)&&h.push(T.doColorBars),y.legend&&h.push(T.doLegend),y.layoutstyle&&h.push(T.layoutStyles),y.axrange&&L(h),y.ticks&&h.push(T.doTicksRelayout),y.modebar&&h.push(T.doModeBar),y.camera&&h.push(T.doCamera),h.push(S)}h.push(I.rehover,I.redrag),(h=F.syncOrAsync(h,t))&&h.then||(h=Promise.resolve(t))}else h=M.newPlot(t,e,n,r);return h.then(function(){return t.emit("plotly_react",{data:e,layout:n}),t})},M.redraw=function(t){if(t=F.getGraphDiv(t),!F.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return G.cleanData(t.data),G.cleanLayout(t.layout),t.calcdata=void 0,M.plot(t).then(function(){return t.emit("plotly_redraw"),t})},M.relayout=P,M.restyle=o,M.setPlotConfig=function(t){return F.extendFlat(f,t)},M.update=j,M._guiRelayout=N(P),M._guiRestyle=N(o),M._guiUpdate=N(j),M._storeDirectGUIEdit=function(t,e,n){for(var r in n)C(r,B(t,r).get(),n[r],e)}},{"../components/color":294,"../components/drawing":316,"../constants/xmlns_namespaces":403,"../lib":424,"../lib/events":416,"../lib/queue":438,"../lib/svg_text_utils":447,"../plots/cartesian/axes":471,"../plots/cartesian/constants":477,"../plots/cartesian/graph_interact":480,"../plots/cartesian/select":490,"../plots/plots":516,"../plots/polar/legacy":519,"../registry":525,"./edit_types":453,"./helpers":454,"./manage_arrays":456,"./plot_config":458,"./plot_schema":459,"./subroutines":461,d3:277,"fast-isnumeric":99,"has-hover":195}],458:[function(t,e,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};!function t(e,n){for(var r in e){var i=e[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),t(i,n[r]))}}(r,i),e.exports={configAttributes:r,dfltConfig:i}},{}],459:[function(t,e,f){"use strict";var c=t("../registry"),n=t("../lib"),h=t("../plots/attributes"),d=t("../plots/layout_attributes"),r=t("../plots/frame_attributes"),a=t("../plots/animation_attributes"),o=t("./plot_config").configAttributes,s=t("../plots/polar/legacy/area_attributes"),p=t("../plots/polar/legacy/axis_attributes"),l=t("./edit_types"),u=n.extendFlat,g=n.extendDeepAll,y=n.isPlainObject,m=n.isArrayOrTypedArray,v=n.nestedProperty,b=n.valObjectMeta,i="_isSubplotObj",x="_isLinkedToArray",n="_deprecated",_=[i,x,"_arrayAttrRegexps",n];function w(t,e,n){if(!t)return!1;if(t._isLinkedToArray)if(k(e[n]))n++;else if(n<e.length)return!1;for(;n<e.length;n++){var r=t[e[n]];if(!y(r))break;if(t=r,n===e.length-1)break;if(t._isLinkedToArray){if(!k(e[++n]))return!1}else if("info_array"===t.valType){var i=e[++n];if(!k(i))return!1;var a=t.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===t.dimensions){if(n++,e.length===n)return t;r=e[n];if(!k(r))return!1;t=a[i][r]}else t=a[i]}else t=a}}return t}function k(t){return t===Math.round(t)&&0<=t}function M(t){function r(){return{valType:"string",editType:"none"}}var e;return e=t,f.crawl(e,function(t,e,n){f.isValObject(t)?"data_array"===t.valType?(t.role="data",n[e+"src"]=r()):!0===t.arrayOk&&(n[e+"src"]=r()):y(t)&&(t.role="object")}),e=t,f.crawl(e,function(t,e,n){var r;!t||(r=t[x])&&(delete t[x],n[e]={items:{}},n[e].items[r]=t,n[e].role="object")}),function t(e){for(var n in e)if(y(e[n]))t(e[n]);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)t(e[n][r]);else e[n]instanceof RegExp&&(e[n]=e[n].toString())}(t),t}function T(t,e,n){n=v(t,n),e=g({},e.layoutAttributes);e[i]=!0,n.set(e)}function A(t,e,n){n=v(t,n);n.set(g(n.get()||{},e))}f.IS_SUBPLOT_OBJ=i,f.IS_LINKED_TO_ARRAY=x,f.DEPRECATED=n,f.UNDERSCORE_ATTRS=_,f.get=function(){var e={};c.allTypes.concat("area").forEach(function(t){e[t]=function(t){var e,n;n="area"===t?(e={attributes:s},{}):(e=c.modules[t]._module,e.basePlotModule);var r={type:null},a=g({},h),o=g({},e.attributes);f.crawl(o,function(t,e,n,r,i){v(a,i).set(void 0),void 0===t&&v(o,i).set(void 0)}),g(r,a),c.traceIs(t,"noOpacity")&&delete r.opacity;c.traceIs(t,"showLegend")||(delete r.showlegend,delete r.legendgroup);c.traceIs(t,"noHover")&&(delete r.hoverinfo,delete r.hoverlabel);e.selectPoints||delete r.selectedpoints;g(r,o),n.attributes&&g(r,n.attributes);r.type=t;t={meta:e.meta||{},categories:e.categories||{},animatable:Boolean(e.animatable),type:t,attributes:M(r)};e.layoutAttributes&&(g(r={},e.layoutAttributes),t.layoutAttributes=M(r));e.animatable||f.crawl(t,function(t){f.isValObject(t)&&"anim"in t&&delete t.anim});return t}(t)});var t,i={};return Object.keys(c.transformsRegistry).forEach(function(t){var n,r;i[t]=(n=t,t=c.transformsRegistry[n],r=g({},t.attributes),Object.keys(c.componentsRegistry).forEach(function(t){var e=c.componentsRegistry[t];e.schema&&e.schema.transforms&&e.schema.transforms[n]&&Object.keys(e.schema.transforms[n]).forEach(function(t){A(r,e.schema.transforms[n][t],t)})}),{attributes:M(r)})}),{defs:{valObjects:b,metaKeys:_.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{}},traces:e,layout:function(){var t,e,n={};for(t in g(n,d),c.subplotsRegistry)if((e=c.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(e.attr))for(var r=0;r<e.attr.length;r++)T(n,e,e.attr[r]);else{var i="subplot"===e.attr?e.name:e.attr;T(n,e,i)}for(t in n=function(t){return u(t,{radialaxis:p.radialaxis,angularaxis:p.angularaxis}),u(t,p.layout),t}(n),c.componentsRegistry){var a=(e=c.componentsRegistry[t]).schema;if(a&&(a.subplots||a.layout)){a=a.subplots;if(a&&a.xaxis&&!a.yaxis)for(var o in a.xaxis)delete n.yaxis[o]}else"colorscale"===e.name?g(n,e.layoutAttributes):e.layoutAttributes&&A(n,e.layoutAttributes,e.name)}return{layoutAttributes:M(n)}}(),transforms:i,frames:(M(t={frames:g({},r)}),t.frames),animation:M(a),config:M(o)}},f.crawl=function(r,i,t,a){var o=t||0;a=a||"",Object.keys(r).forEach(function(t){var e,n=r[t];-1===_.indexOf(t)&&(i(n,t,r,o,e=(a?a+".":"")+t),f.isValObject(n)||y(n)&&"impliedEdits"!==t&&f.crawl(n,i,o+1,e))})},f.isValObject=function(t){return t&&void 0!==t.valType},f.findArrayAttributes=function(t){var i,s,l=[],u=[],c=[];function e(t,e,n,r){u=u.slice(0,r).concat([e]),c=c.slice(0,r).concat([t&&t._isLinkedToArray]),!t||"data_array"!==t.valType&&!0!==t.arrayOk||"colorbar"===u[r-1]&&("ticktext"===e||"tickvals"===e)||function t(e,n,r){var i=e[u[n]];var a=r+u[n];if(n===u.length-1)m(i)&&l.push(s+a);else if(c[n]){if(Array.isArray(i))for(var o=0;o<i.length;o++)y(i[o])&&t(i[o],n+1,a+"["+o+"].")}else y(i)&&t(i,n+1,a+".")}(i,0,"")}i=t,s="",f.crawl(h,e),t._module&&t._module.attributes&&f.crawl(t._module.attributes,e);var n=t.transforms;if(n)for(var r=0;r<n.length;r++){var a=n[r],o=a._module;o&&(s="transforms["+r+"].",i=a,f.crawl(o.attributes,e))}return l},f.getTraceValObject=function(t,e){var n,r=e[0],i=1;if("transforms"===r){if(1===e.length)return h.transforms;var a=t.transforms;if(!Array.isArray(a)||!a.length)return!1;var o=e[1];if(!k(o)||o>=a.length)return!1;a=(n=(c.transformsRegistry[a[o].type]||{}).attributes)&&n[e[2]],i=3}else if("area"===t.type)a=s[r];else{o=t._module;if(!(o=o||(c.modules[t.type||h.type.dflt]||{})._module))return!1;(a=(n=o.attributes)&&n[r])||(o=o.basePlotModule)&&o.attributes&&(a=o.attributes[r]),a=a||h[r]}return w(a,e,i)},f.getLayoutValObject=function(t,e){return w(function(t,e){var n,r,i,a,o,s=t._basePlotModules;if(s){for(n=0;n<s.length;n++){if((i=s[n]).attrRegex&&i.attrRegex.test(e)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;!o&&i.layoutAttributes&&(o=i.layoutAttributes)}var l=i.baseLayoutAttrOverrides;if(l&&e in l)return l[e]}if(o)return o}var u=t._modules;if(u)for(n=0;n<u.length;n++)if((a=u[n].layoutAttributes)&&e in a)return a[e];for(r in c.componentsRegistry){if("colorscale"===(i=c.componentsRegistry[r]).name&&0===e.indexOf("coloraxis"))return i.layoutAttributes[e];if(!i.schema&&e===i.name)return i.layoutAttributes}return e in d?d[e]:"radialaxis"!==e&&"angularaxis"!==e?p.layout[e]||!1:p[e]}(t,e[0]),e,1)}},{"../lib":424,"../plots/animation_attributes":465,"../plots/attributes":467,"../plots/frame_attributes":500,"../plots/layout_attributes":514,"../plots/polar/legacy/area_attributes":517,"../plots/polar/legacy/axis_attributes":518,"../registry":525,"./edit_types":453,"./plot_config":458}],460:[function(t,e,n){"use strict";var f=t("../lib"),o=t("../plots/attributes"),h="templateitemname",r={name:{valType:"string",editType:"none"}};function u(t){return t&&"string"==typeof t}function i(t){var e=t.length-1;return"s"!==t.charAt(e)&&f.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}r[h]={valType:"string",editType:"calc"},n.templatedArray=function(t,e){return e._isLinkedToArray=t,e.name=r.name,e[h]=r[h],e},n.traceTemplater=function(n){var r,i,a={};for(r in n)i=n[r],Array.isArray(i)&&i.length&&(a[r]=0);return{newTrace:function(t){var e={type:r=f.coerce(t,{},o,"type"),_template:null};return r in a&&(i=n[r],t=a[r]%i.length,a[r]++,e._template=i[t]),e}}},n.newContainer=function(t,e,n){var r=t._template,n=r&&(r[e]||n&&r[n]);return f.isPlainObject(n)||(n=null),t[e]={_template:n}},n.arrayTemplater=function(t,e,a){var t=t._template,o=t&&t[i(e)],s=t&&t[e];Array.isArray(s)&&s.length||(s=[]);var l={};return{newItem:function(t){var e={name:t.name,_input:t},n=e[h]=t[h];if(!u(n))return e._template=o,e;for(var r=0;r<s.length;r++){var i=s[r];if(i.name===n)return l[n]=1,e._template=i,e}return e[a]=t[a]||!1,e._template=!1,e},defaultItems:function(){for(var t=[],e=0;e<s.length;e++){var n,r=s[e],i=r.name;u(i)&&!l[i]&&((n={_template:r,name:i,_input:{_templateitemname:i}})[h]=r[h],t.push(n),l[i]=1)}return t}}},n.arrayDefaultKey=i,n.arrayEditor=function(i,t,e){var n=(f.nestedProperty(i,t).get()||[]).length,r=e._index,a=n<=r&&(e._input||{})._templateitemname;a&&(r=n);var o,s=t+"["+r+"]";function l(){o={},a&&(o[s]={},o[s][h]=a)}function u(t,e){a?f.nestedProperty(o[s],t).set(e):o[s+"."+t]=e}function c(){var t=o;return l(),t}return l(),{modifyBase:function(t,e){o[t]=e},modifyItem:u,getUpdateObj:c,applyUpdate:function(t,e){t&&u(t,e);var n,r=c();for(n in r)f.nestedProperty(i,n).set(r[n])}}}},{"../lib":424,"../plots/attributes":467}],461:[function(t,e,z){"use strict";var I=t("d3"),c=t("../registry"),F=t("../plots/plots"),B=t("../lib"),f=t("../lib/clear_gl_canvases"),U=t("../components/color"),V=t("../components/drawing"),i=t("../components/titles"),H=t("../components/modebar"),q=t("../plots/cartesian/axes"),G=t("../constants/alignment"),n=t("../plots/cartesian/constraints"),l=n.enforce,u=n.clean,h=t("../plots/cartesian/autorange").doAutoRange;function r(t){var e,r,n,i,a,o=t._fullLayout,s=o._size,l=s.p,u=q.list(t,"",!0);if(o._paperdiv.style({width:t._context.responsive&&o.autosize&&!t._context._hasZeroWidth&&!t.layout.width?"100%":o.width+"px",height:t._context.responsive&&o.autosize&&!t._context._hasZeroHeight&&!t.layout.height?"100%":o.height+"px"}).selectAll(".main-svg").call(V.setSize,o.width,o.height),t._context.setBackground(t,o.paper_bgcolor),z.drawMainTitle(t),H.manage(t),!o._has("cartesian"))return F.previousPromises(t);function c(t,e,n){var r=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===n?e._offset-l-r:e._offset+e._length+l+r:s.t+s.h*(1-(t.position||0))+r%1:e?"right"===n?e._offset+e._length+l+r:e._offset-l-r:s.l+s.w*(t.position||0)+r%1}for(e=0;e<u.length;e++){var f=(n=u[e])._anchorAxis;n._linepositions={},n._lw=V.crispRound(t,n.linewidth,1),n._mainLinePosition=c(n,f,n.side),n._mainMirrorPosition=n.mirror&&f?c(n,f,G.OPPOSITE_SIDE[n.side]):null}var h,d,p,g,y=[],m=[],v=[],b=1===U.opacity(o.paper_bgcolor)&&1===U.opacity(o.plot_bgcolor)&&o.paper_bgcolor===o.plot_bgcolor;for(r in o._plots)(g=o._plots[r]).mainplot?(g.bg&&g.bg.remove(),g.bg=void 0):(h=g.xaxis.domain,d=g.yaxis.domain,p=g.plotgroup,!function(t,e,n){for(var r=0;r<n.length;r++){var i=n[r][0],a=n[r][1];if(!(i[0]>=t[1]||i[1]<=t[0])&&(a[0]<e[1]&&a[1]>e[0]))return 1}}(h,d,v)?(p.select("rect.bg").remove(),v.push([h,d]),b||(y.push(r),m.push(r))):(d=p.node(),p=g.bg=B.ensureSingle(p,"rect","bg"),d.insertBefore(p.node(),d.childNodes[0]),m.push(r)));var x,_,w,k,M,T,A=o._bgLayer.selectAll(".bg").data(y);for(A.enter().append("rect").classed("bg",!0),A.exit().remove(),A.each(function(t){o._plots[t].bg=I.select(this)}),e=0;e<m.length;e++)g=o._plots[m[e]],i=g.xaxis,a=g.yaxis,g.bg&&void 0!==i._offset&&void 0!==a._offset&&g.bg.call(V.setRect,i._offset-l,a._offset-l,i._length+2*l,a._length+2*l).call(U.fill,o.plot_bgcolor).style("stroke-width",0);if(!o._hasOnlyLargeSploms)for(r in o._plots){g=o._plots[r],i=g.xaxis,a=g.yaxis;var S,E=g.clipId="clip"+o._uid+r+"plot",O=B.ensureSingleById(o._clips,"clipPath",E,function(t){t.classed("plotclip",!0).append("rect")});g.clipRect=O.select("rect").attr({width:i._length,height:a._length}),V.setTranslate(g.plot,i._offset,a._offset),E=g._hasClipOnAxisFalse?(S=null,E):(S=E,null),V.setClipUrl(g.plot,S,t),g.layerClipId=E}function C(t){return"M"+x+","+t+"H"+_}function P(t){return"M"+i._offset+","+t+"h"+i._length}function L(t){return"M"+t+","+k+"V"+w}function R(t){return"M"+t+","+a._offset+"v"+a._length}function j(t,e,n){if(!t.showline||r!==t._mainSubplot)return"";if(!t._anchorAxis)return n(t._mainLinePosition);n=e(t._mainLinePosition);return t.mirror&&(n+=e(t._mainMirrorPosition)),n}for(r in o._plots){g=o._plots[r],i=g.xaxis,a=g.yaxis;var N="M0,0";Y(i,r)&&(M=X(i,"left",a,u),x=i._offset-(M?l+M:0),T=X(i,"right",a,u),_=i._offset+i._length+(T?l+T:0),D=c(i,a,"bottom"),M=c(i,a,"top"),!(T=!i._anchorAxis||r!==i._mainSubplot)||"allticks"!==i.mirror&&"all"!==i.mirror||(i._linepositions[r]=[D,M]),N=j(i,C,P),T&&i.showline&&("all"===i.mirror||"allticks"===i.mirror)&&(N+=C(D)+C(M)),g.xlines.style("stroke-width",i._lw+"px").call(U.stroke,i.showline?i.linecolor:"rgba(0,0,0,0)")),g.xlines.attr("d",N);var D="M0,0";Y(a,r)&&(M=X(a,"bottom",i,u),w=a._offset+a._length+(M?l:0),N=X(a,"top",i,u),k=a._offset-(N?l:0),M=c(a,i,"left"),N=c(a,i,"right"),!(T=!a._anchorAxis||r!==a._mainSubplot)||"allticks"!==a.mirror&&"all"!==a.mirror||(a._linepositions[r]=[M,N]),D=j(a,L,R),T&&a.showline&&("all"===a.mirror||"allticks"===a.mirror)&&(D+=L(M)+L(N)),g.ylines.style("stroke-width",a._lw+"px").call(U.stroke,a.showline?a.linecolor:"rgba(0,0,0,0)")),g.ylines.attr("d",D)}return q.makeClipPaths(t),F.previousPromises(t)}function Y(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function o(t,e,n){if(n.showline&&n._lw){if("all"===n.mirror||"allticks"===n.mirror)return 1;var r=n._anchorAxis;if(r){var i=G.FROM_BL[e];return n.side===e?r.domain[i]===t.domain[i]:n.mirror&&r.domain[1-i]===t.domain[1-i]}}}function X(t,e,n,r){if(o(t,e,n))return n._lw;for(var i=0;i<r.length;i++){var a=r[i];if(a._mainAxis===n._mainAxis&&o(t,e,a))return a._lw}return 0}z.layoutStyles=function(t){return B.syncOrAsync([F.doAutoMargin,r],t)},z.drawMainTitle=function(t){var e=t._fullLayout,n=function(t){var e=t.title,t="middle";B.isRightAnchor(e)?t="end":B.isLeftAnchor(e)&&(t="start");return t}(e),r=function(t){var e=t.title,t="0em";B.isTopAnchor(e)?t=G.CAP_SHIFT+"em":B.isMiddleAnchor(e)&&(t=G.MID_SHIFT+"em");return t}(e);i.draw(t,"gtitle",{propContainer:e,propName:"title.text",placeholder:e._dfltTitle.plot,attributes:{x:function(t,e){var n=t.title,r=t._size,i=0;"start"===e?i=n.pad.l:"end"===e&&(i=-n.pad.r);switch(n.xref){case"paper":return r.l+r.w*n.x+i;case"container":default:return t.width*n.x+i}}(e,n),y:function(t,e){var n=t.title,r=t._size,i=0;"0em"!==e&&e?e===G.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b;{if("auto"===n.y)return r.t/2;switch(n.yref){case"paper":return r.t+r.h-r.h*n.y+i;case"container":default:return t.height-t.height*n.y+i}}}(e,r),"text-anchor":n,dy:r}})},z.doTraceStyle=function(t){for(var e=t.calcdata,n=[],r=0;r<e.length;r++){var i=e[r],a=i[0]||{},o=a.trace||{},s=o._module||{},l=s.arraysToCalcdata;l&&l(i,o);s=s.editStyle;s&&n.push({fn:s,cd0:a})}if(n.length){for(r=0;r<n.length;r++){var u=n[r];u.fn(t,u.cd0)}f(t),z.redrawReglTraces(t)}return F.style(t),c.getComponentMethod("legend","draw")(t),F.previousPromises(t)},z.doColorBars=function(t){return c.getComponentMethod("colorbar","draw")(t),F.previousPromises(t)},z.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,c.call("plot",t,"",e)},z.doLegend=function(t){return c.getComponentMethod("legend","draw")(t),F.previousPromises(t)},z.doTicksRelayout=function(t){return q.draw(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(c.subplotsRegistry.splom.updateGrid(t),f(t),z.redrawReglTraces(t)),z.drawMainTitle(t),F.previousPromises(t)},z.doModeBar=function(t){var e=t._fullLayout;H.manage(t);for(var n=0;n<e._basePlotModules.length;n++){var r=e._basePlotModules[n].updateFx;r&&r(t)}return F.previousPromises(t)},z.doCamera=function(t){for(var e=t._fullLayout,n=e._subplots.gl3d,r=0;r<n.length;r++){var i=e[n[r]];i._scene.setViewport(i)}},z.drawData=function(t){var e=t._fullLayout;f(t);for(var n=e._basePlotModules,r=0;r<n.length;r++)n[r].plot(t);return z.redrawReglTraces(t),F.style(t),c.getComponentMethod("shapes","draw")(t),c.getComponentMethod("annotations","draw")(t),c.getComponentMethod("images","draw")(t),e._replotting=!1,F.previousPromises(t)},z.redrawReglTraces=function(t){var e=t._fullLayout;if(e._has("regl")){var n,r,i=t._fullData,a=[],o=[];for(e._hasOnlyLargeSploms&&e._splomGrid.draw(),n=0;n<i.length;n++){var s=i[n];!0===s.visible&&0!==s._length&&("splom"===s.type?e._splomScenes[s.uid].draw():"scattergl"===s.type?B.pushUnique(a,s.xaxis+s.yaxis):"scatterpolargl"===s.type&&B.pushUnique(o,s.subplot))}for(n=0;n<a.length;n++)(r=e._plots[a[n]])._scene&&r._scene.draw();for(n=0;n<o.length;n++)(r=e[o[n]]._subplot)._scene&&r._scene.draw()}},z.doAutoRangeAndConstraints=function(t){for(var e,n=q.list(t,"",!0),r={},i=0;i<n.length;i++)if(!r[(e=n[i])._id]){r[e._id]=1,u(t,e),h(t,e);var a=e._matchGroup;if(a)for(var o in a){var s=q.getFromId(t,o);h(t,s,e.range),r[o]=1}}l(t)},z.finalDraw=function(t){c.getComponentMethod("rangeslider","draw")(t),c.getComponentMethod("rangeselector","draw")(t)},z.drawMarginPushers=function(t){c.getComponentMethod("legend","draw")(t),c.getComponentMethod("rangeselector","draw")(t),c.getComponentMethod("sliders","draw")(t),c.getComponentMethod("updatemenus","draw")(t),c.getComponentMethod("colorbar","draw")(t)}},{"../components/color":294,"../components/drawing":316,"../components/modebar":354,"../components/titles":389,"../constants/alignment":396,"../lib":424,"../lib/clear_gl_canvases":411,"../plots/cartesian/autorange":470,"../plots/cartesian/axes":471,"../plots/cartesian/constraints":478,"../plots/plots":516,"../registry":525,d3:277}],462:[function(t,e,n){"use strict";var v=t("../lib"),b=v.isPlainObject,f=t("./plot_schema"),p=t("../plots/plots"),h=t("../plots/attributes"),x=t("./plot_template"),g=t("./plot_config").dfltConfig;function d(s,t){s=v.extendDeep({},s);var e,l,n=Object.keys(s).sort();function r(t,e,n){if(b(e)&&b(t))d(t,e);else if(Array.isArray(e)&&Array.isArray(t)){var r=x.arrayTemplater({_template:s},n);for(l=0;l<e.length;l++){var i=e[l],a=r.newItem(i)._template;a&&d(a,i)}var o=r.defaultItems();for(l=0;l<o.length;l++)e.push(o[l]._template);for(l=0;l<e.length;l++)delete e[l].templateitemname}}for(e=0;e<n.length;e++){var i=n[e],a=s[i];if(i in t?r(a,t[i],i):t[i]=a,_(i)===i)for(var o in t){var u=_(o);o===u||u!==i||o in s||r(a,t[o],i)}}}function _(t){return t.replace(/[0-9]+$/,"")}function w(t,e,n,r,i){var a,o=i&&n(i);for(a in t){var s,l=t[a],u=k(t,a,r),c=k(t,a,i),f=n(c);if(f||(s=_(a))!==a&&(f=n(c=k(t,s,i))),(!o||o!==f)&&!(!f||f._noTemplating||"data_array"===f.valType||f.arrayOk&&Array.isArray(l)))if(!f.valType&&b(l))w(l,e,n,u,c);else if(f._isLinkedToArray&&Array.isArray(l))for(var h=!1,d=0,p={},g=0;g<l.length;g++){var y,m=l[g];b(m)&&((y=m.name)?p[y]||(w(m,e,n,k(l,d,u),k(l,d,c)),d++,p[y]=1):h||(y=k(t,x.arrayDefaultKey(a),r),w(m,e,n,m=k(l,d,u),k(l,d,c)),m=v.nestedProperty(e,m),v.nestedProperty(e,y).set(m.get()),m.set(null),h=!0))}else v.nestedProperty(e,u).set(l)}}function k(t,e,n){e=n?Array.isArray(t)?n+"["+e+"]":n+"."+e:e;return e}function y(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}n.makeTemplate=function(t){t=v.isPlainObject(t)?t:v.getGraphDiv(t),t=v.extendDeep({_context:g},{data:t.data,layout:t.layout}),p.supplyDefaults(t);var e=t.data||[],n=t.layout||{};n._basePlotModules=t._fullLayout._basePlotModules,n._modules=t._fullLayout._modules;var r={data:{},layout:{}};e.forEach(function(t){var e={};w(t,e,function(t,e){return f.getTraceValObject(t,v.nestedProperty({},e).parts)}.bind(null,t));t=v.coerce(t,{},h,"type");(r.data[t]||(r.data[t]=[])).push(e)}),w(n,r.layout,function(t,e){return f.getLayoutValObject(t,v.nestedProperty({},e).parts)}.bind(null,n)),delete r.layout.template;e=n.template;if(b(e)){var i,a,o,s,l,u,n=e.layout;b(n)&&d(n,r.layout);var c=e.data;if(b(c)){for(a in r.data)if(o=c[a],Array.isArray(o)){for(u=(l=r.data[a]).length,s=o.length,i=0;i<u;i++)d(o[i%s],l[i]);for(i=u;i<s;i++)l.push(v.extendDeep({},o[i]))}for(a in c)a in r.data||(r.data[a]=v.extendDeep([],c[a]))}}return r},n.validateTemplate=function(t,e){var n=v.extendDeep({},{_context:g,data:t.data,layout:t.layout}),r=n.layout||{};b(e)||(e=r.template||{});var t=e.layout,i=e.data,o=[];n.layout=r,n.layout.template=e,p.supplyDefaults(n);var e=n._fullLayout,a=n._fullData,s={};if(b(t)?(function t(e,n){for(var r in e)if("_"!==r.charAt(0)&&b(e[r])){for(var i=_(r),a=[],o=0;o<n.length;o++)a.push(k(e,r,n[o])),i!==r&&a.push(k(e,i,n[o]));for(o=0;o<a.length;o++)s[a[o]]=1;t(e[r],a)}}(e,["layout"]),function t(e,n){for(var r in e){var i;-1===r.indexOf("defaults")&&b(e[r])&&(i=k(e,r,n),s[i]?t(e[r],i):o.push({code:"unused",path:i}))}}(t,"layout")):o.push({code:"layout"}),b(i)){for(var l={},u=0;u<a.length;u++){var c,f=a[u];l[c=f.type]=(l[c]||0)+1,f._fullInput._template||o.push({code:"missing",index:f._fullInput.index,traceType:c})}for(c in i){var h=i[c].length,d=l[c]||0;d<h?o.push({code:"unused",traceType:c,templateCount:h,dataCount:d}):h<d&&o.push({code:"reused",traceType:c,templateCount:h,dataCount:d})}}else o.push({code:"data"});if(!function t(e,n){for(var r in e){var i,a;"_"!==r.charAt(0)&&(i=e[r],a=k(e,r,n),b(i)?(Array.isArray(e)&&!1===i._template&&i.templateitemname&&o.push({code:"missing",path:a,templateitemname:i.templateitemname}),t(i,a)):Array.isArray(i)&&function(t){for(var e=0;e<t.length;e++)if(b(t[e]))return 1}(i)&&t(i,a))}}({data:a,layout:e},""),o.length)return o.map(y)}},{"../lib":424,"../plots/attributes":467,"../plots/plots":516,"./plot_config":458,"./plot_schema":459,"./plot_template":460}],463:[function(t,e,n){"use strict";var x=t("fast-isnumeric"),_=t("./plot_api"),w=t("../plots/plots"),k=t("../lib"),M=t("../snapshot/helpers"),T=t("../snapshot/tosvg"),A=t("../snapshot/svgtoimg"),S=t("../version").version,E={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};e.exports=function(t,n){var r,e,i,a;function o(t){return!(t in n)||k.validate(n[t],E[t])}if(n=n||{},a=k.isPlainObject(t)?(r=t.data||[],e=t.layout||{},i=t.config||{},{}):(t=k.getGraphDiv(t),r=k.extendDeep([],t.data),e=k.extendDeep({},t.layout),i=t._context,t._fullLayout||{}),!o("width")&&null!==n.width||!o("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+k.join2(E.format.values,", "," or ")+".");var s={};function l(t,e){return k.coerce(n,s,E,t,e)}var u=l("format"),c=l("width"),f=l("height"),h=l("scale"),t=l("setBackground"),d=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var g=k.extendFlat({},e);c?g.width=c:null===n.width&&x(a.width)&&(g.width=a.width),f?g.height=f:null===n.height&&x(a.height)&&(g.height=a.height);var y=k.extendFlat({},i,{_exportedPlot:!0,staticPlot:!0,setBackground:t}),m=M.getRedrawFunc(p);function v(){return new Promise(function(t){setTimeout(t,M.getDelay(p._fullLayout))})}function b(){return new Promise(function(t,e){var n=T(p,u,h),r=p._fullLayout.width,i=p._fullLayout.height;function a(){_.purge(p),document.body.removeChild(p)}if("full-json"===u){var o=w.graphJson(p,!1,"keepdata","object",!0,!0);return o.version=S,o=JSON.stringify(o),a(),t(d?o:M.encodeJSON(o))}if(a(),"svg"===u)return t(d?n:M.encodeSVG(n));o=document.createElement("canvas");o.id=k.randstr(),A({format:u,width:r,height:i,scale:h,canvas:o,svg:n,promise:!0}).then(t).catch(e)})}return new Promise(function(e,n){_.plot(p,r,g,y).then(m).then(v).then(b).then(function(t){e((t=t,d?t.replace(M.IMAGE_URL_PREFIX,""):t))}).catch(function(t){n(t)})})}},{"../lib":424,"../plots/plots":516,"../snapshot/helpers":529,"../snapshot/svgtoimg":531,"../snapshot/tosvg":533,"../version":607,"./plot_api":457,"fast-isnumeric":99}],464:[function(t,e,n){"use strict";var P=t("../lib"),x=t("../plots/plots"),_=t("./plot_schema"),w=t("./plot_config").dfltConfig,L=P.isPlainObject,R=Array.isArray,j=P.isArrayOrTypedArray;function N(t,e,n,r,i,a){a=a||[];for(var o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var u=a.slice();u.push(l);var c=t[l],f=e[l],h=function(t,e){if(e in t)return t[e];e=z(e);return t[e.keyMinusId]}(n,l),d=(h||{}).valType,p="info_array"===d,g="colorscale"===d,y=(h||{}).items;if(function(t,e){var n=z(e),r=n.keyMinusId,n=n.id;if(r in t&&t[r]._isSubplotObj&&n)return!0;return e in t}(n,l))if(L(c)&&L(f)&&"any"!==d)N(c,f,h,r,i,u);else if(p&&R(c)){c.length>f.length&&r.push(D("unused",i,u.concat(f.length)));var m,v,b,x,_=f.length,w=Array.isArray(y);if(w&&(_=Math.min(_,y.length)),2===h.dimensions)for(m=0;m<_;m++)if(R(c[m])){c[m].length>f[m].length&&r.push(D("unused",i,u.concat(m,f[m].length)));for(var k=f[m].length,M=0;M<(w?Math.min(k,y[m].length):k);M++)v=w?y[m][M]:y,b=c[m][M],x=f[m][M],P.validate(b,v)?x!==b&&x!==+b&&r.push(D("dynamic",i,u.concat(m,M),b,x)):r.push(D("value",i,u.concat(m,M),b))}else r.push(D("array",i,u.concat(m),c[m]));else for(m=0;m<_;m++)v=w?y[m]:y,b=c[m],x=f[m],P.validate(b,v)?x!==b&&x!==+b&&r.push(D("dynamic",i,u.concat(m),b,x)):r.push(D("value",i,u.concat(m),b))}else if(h.items&&!p&&R(c)){for(var T=y[Object.keys(y)[0]],A=[],S=0;S<f.length;S++){var E,O,C=f[S]._index||S;(O=u.slice()).push(C),L(c[C])&&L(f[S])&&(A.push(C),E=c[C],C=f[S],L(E)&&!1!==E.visible&&!1===C.visible?r.push(D("invisible",i,O)):N(E,C,T,r,i,O))}for(S=0;S<c.length;S++)(O=u.slice()).push(S),L(c[S])?-1===A.indexOf(S)&&r.push(D("unused",i,O)):r.push(D("object",i,O,c[S]))}else!L(c)&&L(f)?r.push(D("object",i,u,c)):j(c)||!j(f)||p||g?l in e?P.validate(c,h)?"enumerated"===h.valType&&(h.coerceNumber&&c!==+f||c!==f)&&r.push(D("dynamic",i,u,c,f)):r.push(D("value",i,u,c)):r.push(D("unused",i,u,c)):r.push(D("array",i,u,c));else r.push(D("schema",i,u))}}return r}e.exports=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var n,r,i=_.get(),a=[],o={_context:P.extendFlat({},w)};R(t)?(o.data=P.extendDeep([],t),n=t):(o.data=[],n=[],a.push(D("array","data"))),L(e)?(o.layout=P.extendDeep({},e),r=e):(o.layout={},r={},1<arguments.length&&a.push(D("object","layout"))),x.supplyDefaults(o);for(var s=o._fullData,l=n.length,u=0;u<l;u++){var c=n[u],f=["data",u];if(L(c)){var h=s[u],d=h.type,p=i.traces[d].attributes;!(p.type={valType:"enumerated",values:[d]})===h.visible&&!1!==c.visible&&a.push(D("invisible",f)),N(c,h,p,a,f);var g=c.transforms,y=h.transforms;if(g){R(g)||a.push(D("array",f,["transforms"])),f.push("transforms");for(var m=0;m<g.length;m++){var v=["transforms",m],b=g[m].type;L(g[m])?((b=i.transforms[b]?i.transforms[b].attributes:{}).type={valType:"enumerated",values:Object.keys(i.transforms)},N(g[m],y[m],b,a,f,v)):a.push(D("object",f,v))}}}else a.push(D("object",f))}return N(r,o._fullLayout,function(t,e){for(var n=t.layout.layoutAttributes,r=0;r<e.length;r++){var i=e[r],a=t.traces[i.type],o=a.layoutAttributes;o&&(i.subplot?P.extendFlat(n[a.attributes.subplot.dflt],o):P.extendFlat(n,o))}return n}(i,s),a,"layout"),0===a.length?void 0:a};var l={object:function(t,e){e="layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":i(t)+"key "+e;return e+" must be linked to an object container"},array:function(t,e){e="data"===t?"The data argument":i(t)+"key "+e;return e+" must be linked to an array container"},schema:function(t,e){return i(t)+"key "+e+" is not part of the schema"},unused:function(t,e,n){n=L(n)?"container":"key";return i(t)+n+" "+e+" did not get coerced"},dynamic:function(t,e,n,r){return[i(t)+"key",e,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?i(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,n){return[i(t)+"key "+e,"is set to an invalid value ("+n+")"].join(" ")}};function i(t){return R(t)?"In data trace "+t[1]+", ":"In "+t+", "}function D(t,e,n,r,i){var a,o;n=n||"",o=R(e)?(a=e[0],e[1]):(a=e,null);var s=function(t){if(!R(t))return String(t);for(var e="",n=0;n<t.length;n++){var r=t[n];"number"==typeof r?e=e.substr(0,e.length-1)+"["+r+"]":e+=r,n<t.length-1&&(e+=".")}return e}(n),i=l[t](e,s,r,i);return P.log(i),{code:t,container:a,trace:o,path:n,astr:s,msg:i}}var r=P.counterRegex("([a-z]+)");function z(t){t=t.match(r);return{keyMinusId:t&&t[1],id:t&&t[2]}}},{"../lib":424,"../plots/plots":516,"./plot_config":458,"./plot_schema":459}],465:[function(t,e,n){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],466:[function(t,e,n){"use strict";var p=t("../lib"),g=t("../plot_api/plot_template");e.exports=function(t,e,n){var r,i=n.name,a=n.inclusionAttr||"visible",o=e[i],s=p.isArrayOrTypedArray(t[i])?t[i]:[],l=e[i]=[],u=g.arrayTemplater(e,i,a);for(d=0;d<s.length;d++){var c=s[d];p.isPlainObject(c)?r=u.newItem(c):(r=u.newItem({}))[a]=!1,r._index=d,!1!==r[a]&&n.handleItemDefaults(c,r,e,n),l.push(r)}var f=u.defaultItems();for(d=0;d<f.length;d++)(r=f[d])._index=l.length,n.handleItemDefaults({},r,e,n,{}),l.push(r);if(p.isArrayOrTypedArray(o))for(var h=Math.min(o.length,l.length),d=0;d<h;d++)p.relinkPrivateKeys(l[d],o[d]);return l}},{"../lib":424,"../plot_api/plot_template":460}],467:[function(t,e,n){"use strict";t=t("../components/fx/attributes");e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:t.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":325}],468:[function(t,e,n){"use strict";var b=t("fast-isnumeric"),r=t("../../lib"),x=r.dateTime2ms,_=r.incrementMonth,w=t("../../constants/numerical").ONEAVGMONTH;e.exports=function(t,e,n,r){if("date"!==e.type)return r;var i=t[n+"periodalignment"];if(!i)return r;var a,o=t[n+"period"];if(b(o)){if((o=+o)<=0)return r}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(0<s&&Math.round(s)===s))return r;a=s}for(var l=e.calendar,u="start"===i,c="end"===i,n=t[n+"period0"],f=x(n,l)||0,h=[],d=r.length,p=0;p<d;p++){var g,y,m,v=r[p];if(a){for(g=Math.round((v-f)/(a*w)),m=_(f,a*g,l);v<m;)m=_(m,-a,l);for(;m<=v;)m=_(m,a,l);y=_(m,-a,l)}else{for(m=f+(g=Math.round((v-f)/o))*o;v<m;)m-=o;for(;m<=v;)m+=o;y=m-o}h[p]=u?y:c?m:(y+m)/2}return h}},{"../../constants/numerical":402,"../../lib":424,"fast-isnumeric":99}],469:[function(t,e,n){"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],470:[function(t,e,n){"use strict";var S=t("fast-isnumeric"),T=t("../../lib"),E=t("../../constants/numerical").FP_SAFE,a=t("../../registry"),t=t("./axis_ids"),y=t.getFromId,l=t.isLinked;function o(t,e){var n,r=[],i=t._fullLayout,a=O(i,e,0),o=O(i,e,1),s=C(t,e),l=s.min,u=s.max;if(0===l.length||0===u.length)return T.simpleMap(e.range,e.r2l);for(var c=l[0].val,f=u[0].val,h=1;h<l.length&&c===f;h++)c=Math.min(c,l[h].val);for(h=1;h<u.length&&c===f;h++)f=Math.max(f,u[h].val);var d=!1;e.range&&(d=(x=T.simpleMap(e.range,e.r2l))[1]<x[0]),"reversed"===e.autorange&&(d=!0,e.autorange=!0);var p,g,y,m,v,b,x,_=e.rangemode,i="tozero"===_,t="nonnegative"===_,w=e._length,k=w/10,M=0;for(h=0;h<l.length;h++)for(p=l[h],n=0;n<u.length;n++)0<(b=(g=u[n]).val-p.val-A(e,p.val,g.val))&&(k<(v=w-a(p)-o(g))?M<b/v&&(y=p,m=g,M=b/v):M<b/w&&(y={val:p.val,pad:0},m={val:g.val,pad:0},M=b/w));return r=c===f?(s=c-1,x=c+1,i?0===c?[0,1]:(_=(0<c?u:l).reduce(function(t,e){return Math.max(t,o(e))},0),_=c/(1-Math.min(.5,_/w)),0<c?[0,_]:[_,0]):t?[Math.max(0,s),Math.max(1,x)]:[s,x]):(i?(0<=y.val&&(y={val:0,pad:0}),m.val<=0&&(m={val:0,pad:0})):t&&(y.val-M*a(y)<0&&(y={val:0,pad:0}),m.val<=0&&(m={val:1,pad:0})),M=(m.val-y.val-A(e,p.val,g.val))/(w-a(y)-o(m)),[y.val-M*a(y),m.val+M*o(m)]),d&&r.reverse(),T.simpleMap(r,e.l2r||Number)}function A(t,e,n){var r=0;if(t.rangebreaks)for(var i=t.locateBreaks(e,n),a=0;a<i.length;a++){var o=i[a];r+=o.max-o.min}return r}function O(t,e,n){var r=.05*e._length,i=e._anchorAxis||{};-1===(e.ticklabelposition||"").indexOf("inside")&&-1===(i.ticklabelposition||"").indexOf("inside")||((o="reversed"===e.autorange)||(o=(a=T.simpleMap(e.range,e.r2l))[1]<a[0]),o&&(n=!n));var a=0,o=0;l(t,e._id)||(a=function(t,e){var n=0,r=t._anchorAxis||{};{var i,a,o;-1!==(r.ticklabelposition||"").indexOf("inside")&&((e||"left"!==r.side&&"bottom"!==r.side)&&(!e||"top"!==r.side&&"right"!==r.side)||(i="x"===t._id.charAt(0),r._vals&&(t=T.deg2rad(r._tickAngles[r._id+"tick"]||0),a=Math.abs(Math.cos(t)),o=Math.abs(Math.sin(t)),r._vals.forEach(function(t){var e;t.bb&&(e=2*u+t.bb.width,t=2*u+t.bb.height,n=Math.max(n,i?Math.max(e*a,t*o):Math.max(t*a,e*o)))})),"inside"===r.ticks&&"inside"===r.ticklabelposition&&(n+=r.ticklen||0)))}return n}(e,n),o=function(t,e){var n=t.ticklabelposition||"",r=function(t){return-1!==n.indexOf(t)};if(!r("inside"))return 0;var i=r("top"),a=r("left"),o=r("right"),s=r("bottom"),r=s||a||i||o;if(e&&(a||s)||!e&&(o||i))return 0;i=t.tickfont?t.tickfont.size:12,i=("x"===t._id.charAt(0)?1.2:.6)*i;r&&(i*=2,i+=(t.tickwidth||0)/2);return i+=u}(e,n));var s=Math.max(a,o),r=Math.max(s,r);return"domain"===e.constrain&&e._inputDomain&&(r*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])),function(t){return t.pad+(t.extrapad?r:s)}}e.exports={getAutoRange:o,makePadFn:O,doAutoRange:function(t,e,n){e.setScale(),e.autorange&&(e.range=n?n.slice():o(t,e),e._r=e.range.slice(),e._rl=T.simpleMap(e._r,e.r2l),i=e._input,(r={})[e._attr+".range"]=e.range,r[e._attr+".autorange"]=e.autorange,a.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,r),i.range=e.range.slice(),i.autorange=e.autorange);var r=e._anchorAxis;{var i;r&&r.rangeslider&&((i=r.rangeslider[e._name])&&"auto"===i.rangemode&&(i.range=o(t,e)),r._input.rangeslider[e._name]=T.extendFlat({},i))}},findExtremes:function(e,n,t){t=t||{};e._m||e.setScale();var r,i,a,o,s,l,u,c,f=[],h=[],d=n.length,p=t.padded||!1,g=t.tozero&&("linear"===e.type||"-"===e.type),y="log"===e.type,m=!1,v=t.vpadLinearized||!1;function b(e){if(Array.isArray(e))return m=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}var x=b((0<e._m?t.ppadplus:t.ppadminus)||t.ppad||0),_=b((0<e._m?t.ppadminus:t.ppadplus)||t.ppad||0),w=b(t.vpadplus||t.vpad),k=b(t.vpadminus||t.vpad);if(!m){if(u=1/0,c=-1/0,y)for(r=0;r<d;r++)(i=n[r])<u&&0<i&&(u=i),c<i&&i<E&&(c=i);else for(r=0;r<d;r++)(i=n[r])<u&&-E<i&&(u=i),c<i&&i<E&&(c=i);n=[u,c],d=2}var M={tozero:g,extrapad:p};function T(t){o=n[t],S(o)&&(s=x(t),l=_(t),o=v?(a=e.c2l(o)-k(t),e.c2l(o)+w(t)):(u=o-k(t),c=o+w(t),y&&u<c/10&&(u=c/10),a=e.c2l(u),e.c2l(c)),g&&(a=Math.min(0,a),o=Math.max(0,o)),R(a)&&P(f,a,l,M),R(o)&&L(h,o,s,M))}var A=Math.min(6,d);for(r=0;r<A;r++)T(r);for(r=d-1;A<=r;r--)T(r);return{min:f,max:h,opts:t}},concatExtremes:C};var u=3;function C(t,e,n){var i,a,o=e._id,r=t._fullData,s=t._fullLayout,l=[],u=[];function c(t,e){for(i=0;i<e.length;i++){var n=t[e[i]],r=(n._extremes||{})[o];if(!0===n.visible&&r){for(g=0;g<r.min.length;g++)a=r.min[g],P(l,a.val,a.pad,{extrapad:a.extrapad});for(g=0;g<r.max.length;g++)a=r.max[g],L(u,a.val,a.pad,{extrapad:a.extrapad})}}}if(c(r,e._traceIndices),c(s.annotations||[],e._annIndices||[]),c(s.shapes||[],e._shapeIndices||[]),e._matchGroup&&!n)for(var f in e._matchGroup)if(f!==e._id){for(var h=y(t,f),d=C(t,h,!0),p=e._length/h._length,g=0;g<d.min.length;g++)a=d.min[g],P(l,a.val,a.pad*p,{extrapad:a.extrapad});for(g=0;g<d.max.length;g++)a=d.max[g],L(u,a.val,a.pad*p,{extrapad:a.extrapad})}return{min:l,max:u}}function P(t,e,n,r){i(t,e,n,r,s)}function L(t,e,n,r){i(t,e,n,r,c)}function i(t,e,n,r,i){for(var a=r.tozero,o=r.extrapad,s=!0,l=0;l<t.length&&s;l++){var u=t[l];if(i(u.val,e)&&u.pad>=n&&(u.extrapad||!o)){s=!1;break}i(e,u.val)&&u.pad<=n&&(o||!u.extrapad)&&(t.splice(l,1),l--)}s&&(a=a&&0===e,t.push({val:e,pad:a?0:n,extrapad:!a&&o}))}function R(t){return S(t)&&Math.abs(t)<E}function s(t,e){return t<=e}function c(t,e){return e<=t}},{"../../constants/numerical":402,"../../lib":424,"../../registry":525,"./axis_ids":474,"fast-isnumeric":99}],471:[function(t,e,n){"use strict";var d=t("d3"),k=t("fast-isnumeric"),F=t("../../plots/plots"),B=t("../../registry"),U=t("../../lib"),c=U.strTranslate,f=t("../../lib/svg_text_utils"),V=t("../../components/titles"),H=t("../../components/color"),q=t("../../components/drawing"),x=t("./layout_attributes"),h=t("./clean_ticks"),r=t("../../constants/numerical"),M=r.ONEMAXYEAR,T=r.ONEAVGYEAR,A=r.ONEMINYEAR,S=r.ONEMAXQUARTER,E=r.ONEAVGQUARTER,O=r.ONEMINQUARTER,C=r.ONEMAXMONTH,P=r.ONEAVGMONTH,L=r.ONEMINMONTH,R=r.ONEWEEK,j=r.ONEDAY,N=j/2,D=r.ONEHOUR,s=r.ONEMIN,l=r.ONESEC,b=r.MINUS_SIGN,z=r.BADNUM,r=t("../../constants/alignment"),_=r.MID_SHIFT,w=r.CAP_SHIFT,G=r.LINE_SPACING,Y=r.OPPOSITE_SIDE,X=e.exports={};X.setConvert=t("./set_convert");var o=t("./axis_autotype"),e=t("./axis_ids"),a=e.idSort,I=e.isLinked;X.id2name=e.id2name,X.name2id=e.name2id,X.cleanId=e.cleanId,X.list=e.list,X.listIds=e.listIds,X.getFromId=e.getFromId,X.getFromTrace=e.getFromTrace;t=t("./autorange");X.getAutoRange=t.getAutoRange,X.findExtremes=t.findExtremes;var i=1e-4;function W(t){var e=(t[1]-t[0])*i;return[t[0]-e,t[1]+e]}X.coerceRef=function(t,e,n,r,i,a){var o=r.charAt(r.length-1),n=n._fullLayout._subplots[o+"axis"],o=r+"ref",r={};return i=i||(n[0]||("string"==typeof a?a:a[0])),a=a||i,n=n.concat(n.map(function(t){return t+" domain"})),r[o]={valType:"enumerated",values:n.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},U.coerce(t,e,r,o)},X.getRefType=function(t){return void 0===t?t:"paper"===t?"paper":"pixel"===t?"pixel":/( domain)$/.test(t)?"domain":"range"},X.coercePosition=function(t,e,n,r,i,a){var o,s;"range"!==X.getRefType(r)?(s=U.ensureNumber,o=n(i,a)):(o=n(i,a=(r=X.getFromId(e,r)).fraction2r(a)),s=r.cleanPos),t[i]=s(o)},X.cleanPosition=function(t,e,n){return("paper"===n||"pixel"===n?U.ensureNumber:X.getFromId(e,n).cleanPos)(t)},X.redrawComponents=function(c,f){f=f||X.listIds(c);var h=c._fullLayout;function t(t,e,n,r){for(var i=B.getComponentMethod(t,e),a={},o=0;o<f.length;o++)for(var s=h[X.id2name(f[o])][n],l=0;l<s.length;l++){var u=s[l];if(!a[u]&&(i(c,u),a[u]=1,r))return}}t("annotations","drawOne","_annIndices"),t("shapes","drawOne","_shapeIndices"),t("images","draw","_imgIndices",!0)};var u=X.getDataConversions=function(t,e,n,r){var i,n="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(n)){if(i={type:o(r,void 0,{autotypenumbers:t._fullLayout.autotypenumbers}),_categories:[]},X.setConvert(i),"category"===i.type)for(var a=0;a<r.length;a++)i.d2c(r[a])}else i=X.getFromTrace(t,e,n);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===n?{d2c:g,c2d:g}:{d2c:p,c2d:p}};function p(t){return+t}function g(t){return String(t)}function y(t){return+t.substring(1)}X.getDataToCoordFunc=function(t,e,n,r){return u(t,e,n,r).d2c},X.counterLetter=function(t){t=t.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},X.minDtick=function(t,e,n,r){-1===["log","category","multicategory"].indexOf(t.type)&&r?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=n):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((n-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=n):(2e-6<(e/t._minDtick+1e-6)%1||2e-6<((n-t._forceTick0)/t._minDtick%1+1.000001)%1)&&(t._minDtick=0)):t._minDtick=0},X.saveRangeInitial=function(t,e){for(var n=X.list(t,"",!0),r=!1,i=0;i<n.length;i++){var a=n[i],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||e&&s)&&(a._rangeInitial=a.range.slice(),r=!0)}return r},X.saveShowSpikeInitial=function(t,e){for(var n=X.list(t,"",!0),r=!1,i="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||e&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==i||o.showspikes||(i="off")}return t._fullLayout._cartesianSpikesEnabled=i,r},X.autoBin=function(t,e,n,r,i,a){var o,s=U.aggNums(Math.min,null,t),l=U.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:s-.5,end:l+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:l-s};i=i||e.calendar,o="log"===e.type?{type:"linear",range:[s,l]}:{type:e.type,range:U.simpleMap([s,l],e.c2r,0,i),calendar:i},X.setConvert(o),(a=a&&h.dtick(a,o.type))?(o.dtick=a,o.tick0=h.tick0(void 0,o.type,i)):(n?f=(l-s)/n:(a=U.distinctVals(t),n=(n=Math.pow(10,Math.floor(Math.log(a.minDiff)/Math.LN10)))*U.roundUp(a.minDiff/n,[.9,1.9,4.9,9.9],!0),f=Math.max(n,2*U.stdev(t)/Math.pow(t.length,r?.25:.4)),k(f)||(f=1)),X.autoTicks(o,f));var u,c=o.dtick,f=X.tickIncrement(X.tickFirst(o),c,"reverse",i);if("number"==typeof c)u=(f=function(e,t,n,r,i){var a=0,o=0,s=0,l=0;function u(t){return(1+100*(t-e)/n.dtick)%100<2}for(var c=0;c<t.length;c++)t[c]%1==0?s++:k(t[c])||l++,u(t[c])&&a++,u(t[c]+n.dtick/2)&&o++;var f=t.length-l;s===f&&"date"!==n.type?n.dtick<1?e=r-.5*n.dtick:(e-=.5)+n.dtick<r&&(e+=n.dtick):o<.1*f&&(.3*f<a||u(r)||u(i))&&(i=n.dtick/2,e+=e+i<r?i:-i);return e}(f,t,o,s,l))+(1+Math.floor((l-f)/c))*c;else for("M"===o.dtick.charAt(0)&&(f=function(t,e,n,r,i){e=U.findExactDates(e,i);if(.8<e.exactDays){i=Number(n.substr(1));.8<e.exactYears&&i%12==0?t=X.tickIncrement(t,"M6","reverse")+1.5*j:.8<e.exactMonths?t=X.tickIncrement(t,"M1","reverse")+15.5*j:t-=N;n=X.tickIncrement(t,n);if(n<=r)return n}return t}(f,t,c,s,i)),u=f,0;u<=l;)u=X.tickIncrement(u,c,!1,i),0;return{start:e.c2r(f,0,i),end:e.c2r(u,0,i),size:c,_dataSpan:l-s}},X.prepTicks=function(t,e){var n,r,i,a,e=U.simpleMap(t.range,t.r2l,void 0,void 0,e);function o(){return!(k(n.dtick)||"M"!==n.dtick.charAt(0))}t._dtickInit=t.dtick,t._tick0Init=t.tick0,"auto"!==t.tickmode&&t.dtick||((i=t.nticks)||(i="category"===t.type||"multicategory"===t.type?(a=t.tickfont?1.2*(t.tickfont.size||12):15,t._length/a):(a="y"===t._id.charAt(0)?40:80,U.constrain(t._length/a,4,9)+1),"radialaxis"===t._name&&(i*=2)),"array"===t.tickmode&&(i*=100),t._roughDTick=Math.abs(e[1]-e[0])/i,X.autoTicks(t,t._roughDTick),0<t._minDtick&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))),"period"===t.ticklabelmode&&(n=t,a=o(),(e=X.getTickFormat(n))&&(i=n._dtickInit!==n.dtick,/%[fLQsSMX]/.test(e)||(/%[HI]/.test(e)?(r=D,i&&!a&&n.dtick<D&&(n.dtick=D)):/%p/.test(e)?(r=N,i&&!a&&n.dtick<N&&(n.dtick=N)):/%[Aadejuwx]/.test(e)?(r=j,i&&!a&&n.dtick<j&&(n.dtick=j)):/%[UVW]/.test(e)?(r=R,i&&!a&&n.dtick<R&&(n.dtick=R)):/%[Bbm]/.test(e)?(r=P,i&&(a?y(n.dtick)<1:n.dtick<L)&&(n.dtick="M1")):/%[q]/.test(e)?(r=E,i&&(a?y(n.dtick)<3:n.dtick<O)&&(n.dtick="M3")):/%[Yy]/.test(e)&&(r=T,i&&(a?y(n.dtick)<12:n.dtick<A)&&(n.dtick="M12")))),(a=o())&&n.tick0===n._dowTick0&&(n.tick0=n._rawTick0),n._definedDelta=r),t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),et(t)},X.calcTicks=function(t,e){X.prepTicks(t,e);var n=U.simpleMap(t.range,t.r2l,void 0,void 0,e);if("array"===t.tickmode)return function(e){var t=e.tickvals,n=e.ticktext,r=new Array(t.length),i=W(U.simpleMap(e.range,e.r2l)),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]),s=0;Array.isArray(n)||(n=[]);var l="category"===e.type?e.d2l_noadd:e.d2l;"log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var u=0;u<t.length;u++){var c=l(t[u]);a<c&&c<o&&(void 0===n[u]?r[s]=X.tickText(e,c):r[s]=nt(e,c,String(n[u])),s++)}s<t.length&&r.splice(s,t.length-s);e.rangebreaks&&(r=r.filter(function(t){return e.maskBreaks(t.x)!==z}));return r}(t);var r=W(n),i=r[0],a=r[1],o=n[1]<n[0],s=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]),u="log"===t.type&&!(k(t.dtick)||"L"===t.dtick.charAt(0)),r="period"===t.ticklabelmode;if(t._tmin=X.tickFirst(t,e),t._tmin<i!=o)return[];"category"!==t.type&&"multicategory"!==t.type||(a=o?Math.max(-.5,a):Math.min(t._categories.length-.5,a));var c=t._tmin;t.rangebreaks&&t._tick0Init!==t.tick0&&(c=mt(c,t),o||(c=X.tickIncrement(c,t.dtick,!o,t.calendar))),r&&(c=X.tickIncrement(c,t.dtick,!o,t.calendar));for(var f=Math.max(1e3,t._length||0),h=[],d=null;o?a<=c:c<=a;c=X.tickIncrement(c,t.dtick,o,t.calendar)){if(t.rangebreaks&&!o){if(c<i)continue;if(t.maskBreaks(c)===z&&mt(c,t)>=l)break}if(h.length>f||c===d)break;d=c;var p=u&&c!==(0|c)?!0:!1;h.push({minor:p,value:c})}if(r&&function(t,e,n){for(var r=0;r<t.length;r++){var i,a=t[r].value,o=r,s=r+1,s=r<t.length-1?(o=r)+1:0<r?(o=r-1,r):o=r,l=t[o].value,o=t[s].value,s=Math.abs(o-l),o=n||s,l=0;A<=o?l=A<=s&&s<=M?s:T:n===E&&O<=o?l=O<=s&&s<=S?s:E:L<=o?l=L<=s&&s<=C?s:P:n===R&&R<=o?l=R:j<=o?l=j:n===N&&N<=o?l=N:n===D&&D<=o&&(l=D),s<=l&&(l=s,i=!0);var u=a+l;if(e.rangebreaks&&0<l){for(var c=0,f=0;f<84;f++){var h=(f+.5)/84;e.maskBreaks(a*(1-h)+h*u)!==z&&c++}(l*=c/84)||(t[r].drop=!0),i&&R<s&&(l=s)}(0<l||0===r)&&(t[r].periodX=a+l/2)}}(h,t,t._definedDelta),t.rangebreaks){var g="y"===t._id.charAt(0),y=1;"auto"===t.tickmode&&(y=t.tickfont?t.tickfont.size:12);for(var m,v=NaN,b=h.length-1;-1<b;b--)h[b].drop?h.splice(b,1):(h[b].value=mt(h[b].value,t),m=t.c2p(h[b].value),(g?m-y<v:v<m+y)?h.splice(o?b+1:b,1):v=m)}yt(t)&&360===Math.abs(n[1]-n[0])&&h.pop(),t._tmax=(h[h.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var x=[];for(b=0;b<h.length;b++){var _=h[b].minor,w=h[b].value,w=X.tickText(t,w,!1,_);void 0!==(_=h[b].periodX)&&(l<(w.periodX=_)||_<s)&&(l<_&&(w.periodX=l),_<s&&(w.periodX=s),w.text=" ",t._prevDateHead=""),x.push(w)}return t._inCalcTicks=!1,x};var m=[2,5,10],v=[1,2,3,6,12],Z=[1,2,5,10,15,30],K=[1,2,3,7,14],Q=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],$=[-.301,0,.301,.699,1],J=[15,30,45,90,180];function tt(t,e,n){return e*U.roundUp(t/e,n)}function et(t){var e,n,r,i,a=t.dtick;t._tickexponent=0,k(a)||"string"==typeof a||(a=1),"category"!==t.type&&"multicategory"!==t.type||(t._tickround=null),"date"===t.type?(e=t.r2l(t.tick0),r=(n=t.l2r(e).replace(/(^-|i)/g,"")).length,"M"===String(a).charAt(0)?10<r||"01-01"!==n.substr(5)?t._tickround="d":t._tickround=+a.substr(1)%12==0?"y":"m":j<=a&&r<=10||15*j<=a?t._tickround="d":s<=a&&r<=16||D<=a?t._tickround="M":l<=a&&r<=19||s<=a?t._tickround="S":(i=t.l2r(e+a).replace(/^-/,"").length,t._tickround=Math.max(r,i)-20,t._tickround<0&&(t._tickround=4))):k(a)||"L"===a.charAt(0)?(i=t.range.map(t.r2d||Number),k(a)||(a=Number(a.substr(1))),t._tickround=2-Math.floor(Math.log(a)/Math.LN10+.01),a=Math.max(Math.abs(i[0]),Math.abs(i[1])),i=Math.floor(Math.log(a)/Math.LN10+.01),a=void 0===t.minexponent?3:t.minexponent,Math.abs(i)>a&&(it(t.exponentformat)&&!at(i)?t._tickexponent=3*Math.round((i-1)/3):t._tickexponent=i)):t._tickround=null}function nt(t,e,n){t=t.tickfont||{};return{x:e,dx:0,dy:0,text:n||"",fontSize:t.size,font:t.family,fontColor:t.color}}X.autoTicks=function(t,e){var n,r,i;function a(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type?(t.tick0=U.dateTick0(t.calendar,0),T<(i=2*e)?(e/=T,o=a(10),t.dtick="M"+12*tt(e,o,m)):P<i?(e/=P,t.dtick="M"+tt(e,1,v)):j<i?(t.dtick=tt(e,j,t._hasDayOfWeekBreaks?[1,2,7,14]:K),n=X.getTickFormat(t),(r="period"===t.ticklabelmode)&&(t._rawTick0=t.tick0),/%[uVW]/.test(n)?t.tick0=U.dateTick0(t.calendar,2):t.tick0=U.dateTick0(t.calendar,1),r&&(t._dowTick0=t.tick0)):D<i?t.dtick=tt(e,D,v):s<i?t.dtick=tt(e,s,Z):l<i?t.dtick=tt(e,l,Z):(o=a(10),t.dtick=tt(e,o,m))):"log"===t.type?(t.tick0=0,r=U.simpleMap(t.range,t.r2l),.7<e?t.dtick=Math.ceil(e):Math.abs(r[1]-r[0])<1?(i=1.5*Math.abs((r[1]-r[0])/e),e=Math.abs(Math.pow(10,r[1])-Math.pow(10,r[0]))/i,o=a(10),t.dtick="L"+tt(e,o,m)):t.dtick=.3<e?"D2":"D1"):"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):yt(t)?(t.tick0=0,o=1,t.dtick=tt(e,o,J)):(t.tick0=0,o=a(10),t.dtick=tt(e,o,m)),0===t.dtick&&(t.dtick=1),!k(t.dtick)&&"string"!=typeof t.dtick){var o=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(o)}},X.tickIncrement=function(t,e,n,r){var i=n?-1:1;if(k(e))return U.increment(t,i*e);var a=e.charAt(0),o=i*Number(e.substr(1));if("M"===a)return U.incrementMonth(t,o,r);if("L"===a)return Math.log(Math.pow(10,t)+o)/Math.LN10;if("D"!==a)throw"unrecognized dtick "+String(e);e="D2"===e?$:Q,i=t+.01*i,n=U.roundUp(U.mod(i,1),e,n);return Math.floor(i)+Math.log(d.round(Math.pow(10,n),1))/Math.LN10},X.tickFirst=function(t,e){var n=t.r2l||Number,r=U.simpleMap(t.range,n,void 0,void 0,e),i=r[1]<r[0],e=i?Math.floor:Math.ceil,a=W(r)[0],o=t.dtick,r=n(t.tick0);if(k(o)){n=e((a-r)/o)*o+r;return"category"!==t.type&&"multicategory"!==t.type||(n=U.constrain(n,0,t._categories.length-1)),n}var s=o.charAt(0),l=Number(o.substr(1));if("M"===s){for(var u,c,f=0,h=r;f<10;){if(((c=X.tickIncrement(h,o,i,t.calendar))-a)*(h-a)<=0)return i?Math.min(h,c):Math.max(h,c);u=(a-(h+c)/2)/(c-h),c=s+(Math.abs(Math.round(u))||1)*l,h=X.tickIncrement(h,c,u<0?!i:i,t.calendar),f++}return U.error("tickFirst did not converge",t),h}if("L"===s)return Math.log(e((Math.pow(10,a)-r)/l)*l+r)/Math.LN10;if("D"!==s)throw"unrecognized dtick "+String(o);r="D2"===o?$:Q,r=U.roundUp(U.mod(a,1),r,i);return Math.floor(a)+Math.log(d.round(Math.pow(10,r),1))/Math.LN10},X.tickText=function(n,r,i,t){var e=nt(n,r),a="array"===n.tickmode,o=i||a,s=n.type,l="category"===s?n.d2l_noadd:n.d2l;if(a&&Array.isArray(n.ticktext)){for(var u=U.simpleMap(n.range,n.r2l),c=(Math.abs(u[1]-u[0])-(n._lBreaks||0))/1e4,f=0;f<n.ticktext.length&&!(Math.abs(r-l(n.tickvals[f]))<c);f++);if(f<n.ticktext.length)return e.text=String(n.ticktext[f]),e}function h(t){if(void 0===t)return 1;if(i)return"none"===t;var e={first:n._tmin,last:n._tmax}[t];return"all"!==t&&r!==e}var d,p,g,y,m,v=i?"never":"none"!==n.exponentformat&&h(n.showexponent)?"hide":"";return"date"===s?function(t,e,n,r){var i=t._tickround,a=n&&t.hoverformat||X.getTickFormat(t);r&&(i=k(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var o,s=U.formatDate(e.x,a,i,t._dateFormat,t.calendar,t._extraFormat);-1!==(a=s.indexOf("\n"))&&(o=s.substr(a+1),s=s.substr(0,a)),r&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,""))),o&&(n?"d"===i?s+=", "+o:s=o+(s?", "+s:""):t._inCalcTicks&&t._prevDateHead===o?(n=-1!==(t.ticklabelposition||"").indexOf("inside"),i=t._realSide||t.side,(!n&&"top"===i||n&&"bottom"===i)&&(s+="<br> ")):(t._prevDateHead=o,s+="<br>"+o)),e.text=s}(n,e,i,o):"log"===s?function(t,e,n,r){var i=t.dtick,a=e.x,o=t.tickformat,s="string"==typeof i&&i.charAt(0);if("never"===r&&(r=""),n&&"L"!==s&&(i="L3",s="L"),o||"L"===s)e.text=ot(Math.pow(10,a),t,r,n);else if(k(i)||"D"===s&&U.mod(a+.01,1)<.1){o=Math.round(a),r=Math.abs(o),n=t.exponentformat;"power"===n||it(n)&&at(o)?(e.text=0===o?1:1===o?"10":"10<sup>"+(1<o?"":b)+r+"</sup>",e.fontSize*=1.25):("e"===n||"E"===n)&&2<r?e.text="1"+n+(0<o?"+":b)+r:(e.text=ot(Math.pow(10,a),t,"","fakehover"),"D1"===i&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==s)throw"unrecognized dtick "+String(i);e.text=String(Math.round(Math.pow(10,U.mod(a,1)))),e.fontSize*=.75}"D1"===t.dtick&&("0"!==(i=String(e.text).charAt(0))&&"1"!==i||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(a<0?.5:.25))))}(n,e,o,v):"category"===s?(a=e,void 0===(u=(u=n)._categories[Math.round(a.x)])&&(u=""),a.text=String(u)):"multicategory"===s?(g=n,y=e,s=i,m=Math.round(y.x),g=g._categories[m]||[],m=void 0===g[1]?"":String(g[1]),g=void 0===g[0]?"":String(g[0]),s?y.text=g+" - "+m:(y.text=m,y.text2=g)):yt(n)?(d=e,m=i,p=o,y=v,"radians"!==(g=n).thetaunit||m?d.text=ot(d.x,g,y,p):0==(m=d.x/180)?d.text="0":100<=(m=function(t){function r(t,e){return Math.abs(t-e)<=1e-6}var e=function(t){for(var e=1;!r(Math.round(t*e)/e,t);)e*=10;return e}(t),n=t*e,t=Math.abs(function t(e,n){return r(n,0)?e:t(n,e%n)}(n,e));return[Math.round(n/t),Math.round(e/t)]}(m))[1]?d.text=ot(U.deg2rad(d.x),g,y,p):(p=d.x<0,1===m[1]?1===m[0]?d.text="π":d.text=m[0]+"π":d.text=["<sup>",m[0],"</sup>","⁄","<sub>",m[1],"</sub>","π"].join(""),p&&(d.text=b+d.text))):(p=n,d=e,o=o,"never"===(v=v)?v="":"all"===p.showexponent&&Math.abs(d.x/p.dtick)<1e-6&&(v="hide"),d.text=ot(d.x,p,v,o)),t||(n.tickprefix&&!h(n.showtickprefix)&&(e.text=n.tickprefix+e.text),n.ticksuffix&&!h(n.showticksuffix)&&(e.text+=n.ticksuffix)),"boundaries"!==n.tickson&&!n.showdividers||(t=function(t){var e=n.l2p(t);return 0<=e&&e<=n._length?t:null},e.xbnd=[t(e.x-.5),t(e.x+n.dtick-.5)]),e},X.hoverLabelText=function(t,e,n){if(n!==z&&n!==e)return X.hoverLabelText(t,e)+" - "+X.hoverLabelText(t,n);n="log"===t.type&&e<=0,t=X.tickText(t,t.c2l(n?-e:e),"hover").text;return n?0===e?"0":b+t:t};var rt=["f","p","n","μ","m","","k","M","G","T"];function it(t){return"SI"===t||"B"===t}function at(t){return 14<t||t<-15}function ot(t,e,n,r){var i=t<0,a=e._tickround,o=n||e.exponentformat||"B",s=e._tickexponent,l=X.getTickFormat(e),n=e.separatethousands;if(r&&(et(r={exponentformat:o,minexponent:e.minexponent,dtick:"none"===e.showexponent?e.dtick:k(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]}),a=(Number(r._tickround)||0)+4,s=r._tickexponent,e.hoverformat&&(l=e.hoverformat)),l)return e._numFormat(l)(t).replace(/-/g,b);l=Math.pow(10,-a)/2;if("none"===o&&(s=0),(t=Math.abs(t))<l)i=!(t="0");else{if(t+=l,s&&(t*=Math.pow(10,-s),a+=s),0===a)t=String(Math.floor(t));else if(a<0){t=(t=String(Math.round(t))).substr(0,t.length+a);for(var u=a;u<0;u++)t+="0"}else{l=(t=String(t)).indexOf(".")+1;l&&(t=t.substr(0,l+a).replace(/\.?0+$/,""))}t=U.numSeparate(t,e._separators,n)}return s&&"hide"!==o&&(it(o)&&at(s)&&(o="power"),n=s<0?b+-s:"power"!==o?"+"+s:String(s),"e"===o||"E"===o?t+=o+n:"power"===o?t+="×10<sup>"+n+"</sup>":"B"===o&&9===s?t+="B":it(o)&&(t+=rt[s/3+5])),i?b+t:t}function st(t){return void 0!==t.periodX?t.periodX:t.x}function lt(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function ut(t){var e=t.title.font.size,n=(t.title.text.match(f.BR_TAG_ALL)||[]).length;return t.title.hasOwnProperty("standoff")?n?e*(w+n*G):e*w:n?e*(n+1)*G:e}function ct(t,e){e=t.l2p(e);return 1<e&&e<t._length-1}function ft(t){var e=d.select(t),t=e.select(".text-math-group");return t.empty()?e.select("text"):t}function ht(t){return t._id+".automargin"}function dt(t){return ht(t)+".mirror"}function pt(t){return t._id+".rangeslider"}function gt(t,e){for(var n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n])}function yt(t){return"angularaxis"===t._id}function mt(t,e){for(var n=e._rangebreaks.length,r=0;r<n;r++){var i=e._rangebreaks[r];if(t>=i.min&&t<i.max)return i.max}return t}X.getTickFormat=function(t){var e,n,r,i,a,o,s,l,u,c,f,h;function d(t){return"string"!=typeof t?t:Number(t.replace("M",""))*P}function p(t,e){var n=["L","D"];if(typeof t!=typeof e)return"number"==typeof t?1:-1;if("number"==typeof t)return t-e;var r=n.indexOf(t.charAt(0)),n=n.indexOf(e.charAt(0));return r===n?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):r-n}if(t.tickformatstops&&0<t.tickformatstops.length)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&(u=t.dtick,c=r.dtickrange,h=void 0,h=(f=d)||function(t){return t},f=c[0],c=c[1],(!f&&"number"!=typeof f||h(f)<=h(u))&&(!c&&"number"!=typeof c||h(c)>=h(u)))){n=r;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&(i=t.dtick,a=r.dtickrange,l=s=o=void 0,o=null===a[0],s=null===a[1],l=0<=p(i,a[0]),a=p(i,a[1])<=0,(o||l)&&(s||a))){n=r;break}}return n?n.value:t.tickformat},X.getSubplots=function(t,e){t=t._fullLayout._subplots,t=t.cartesian.concat(t.gl2d||[]),t=e?X.findSubplotsWithAxis(t,e):t;return t.sort(function(t,e){t=t.substr(1).split("y"),e=e.substr(1).split("y");return t[0]===e[0]?+t[1]-+e[1]:+t[0]-+e[0]}),t},X.findSubplotsWithAxis=function(t,e){for(var n=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),r=[],i=0;i<t.length;i++){var a=t[i];n.test(a)&&r.push(a)}return r},X.makeClipPaths=function(t){var e=t._fullLayout;if(!e._hasOnlyLargeSploms){for(var n,r={_offset:0,_length:e.width,_id:""},i={_offset:0,_length:e.height,_id:""},a=X.list(t,"x",!0),o=X.list(t,"y",!0),s=[],l=0;l<a.length;l++)for(s.push({x:a[l],y:i}),n=0;n<o.length;n++)0===l&&s.push({x:r,y:o[n]}),s.push({x:a[l],y:o[n]});t=e._clips.selectAll(".axesclip").data(s,function(t){return t.x._id+t.y._id});t.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+e._uid+t.x._id+t.y._id}).append("rect"),t.exit().remove(),t.each(function(t){d.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})}},X.draw=function(r,t,i){var a=r._fullLayout;"redraw"===t&&a._paper.selectAll("g.subplot").each(function(t){var e=t[0],n=a._plots[e];n&&(t=n.xaxis,e=n.yaxis,n.xaxislayer.selectAll("."+t._id+"tick").remove(),n.yaxislayer.selectAll("."+e._id+"tick").remove(),n.xaxislayer.selectAll("."+t._id+"tick2").remove(),n.yaxislayer.selectAll("."+e._id+"tick2").remove(),n.xaxislayer.selectAll("."+t._id+"divider").remove(),n.yaxislayer.selectAll("."+e._id+"divider").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),a._infolayer.select(".g-"+t._id+"title").remove(),a._infolayer.select(".g-"+e._id+"title").remove())});t=t&&"redraw"!==t?t:X.listIds(r);return U.syncOrAsync(t.map(function(n){return function(){if(n){var t=X.getFromId(r,n),e=X.drawOne(r,t,i);return t._r=t.range.slice(),t._rl=U.simpleMap(t._r,t.r2l),e}}}))},X.drawOne=function(c,f,t){var e,n;t=t||{},f.setScale();var h=c._fullLayout,r=f._id,d=r.charAt(0),p=X.counterLetter(r),i=h._plots[f._mainSubplot];if(i){var a=i[d+"axislayer"],o=f._mainLinePosition,s=f._mainMirrorPosition,l=f._vals=X.calcTicks(f),u=[f.mirror,o,s].join("_");for(T=0;T<l.length;T++)l[T].axInfo=u;f._selections={},f._tickAngles&&(f._prevTickAngles=f._tickAngles),f._tickAngles={},f._depth=null;var g={};if(f.visible){var y,m=X.makeTransTickFn(f),v=X.makeTransTickLabelFn(f),b="inside"===f.ticks,x="outside"===f.ticks;y="boundaries"===f.tickson?(i=function(t){function e(t,e){null!==(e=t.xbnd[e])&&r.push(U.extendFlat({},t,{x:e}))}var n,r=[];if(t.length){for(n=0;n<t.length;n++)e(t[n],0);e(t[n-1],1)}return r}(l),P=X.clipEnds(f,i),b?P:i):(P=X.clipEnds(f,l),b&&"period"!==f.ticklabelmode?P:l);var _=f._gridVals=P,w=function(t,e){function n(t,e){null!==(e=t.xbnd[e])&&a.push(U.extendFlat({},t,{x:e}))}var r,i,a=[],o=e.length&&e[e.length-1].x<e[0].x;if(t.showdividers&&e.length){for(r=0;r<e.length;r++){var s=e[r];s.text2!==i&&n(s,o?1:0),i=s.text2}n(e[r-1],o?0:1)}return a}(f,l);if(!h._hasOnlyLargeSploms)for(var k=f._subplotsWith,M={},T=0;T<k.length;T++){e=k[T];var A=(n=h._plots[e])[p+"axis"],S=A._mainAxis._id;M[S]||(M[S]=1,S="x"===d?"M0,"+A._offset+"v"+A._length:"M"+A._offset+",0h"+A._length,X.drawGrid(c,f,{vals:_,counterAxis:A,layer:n.gridlayer.select("."+r),path:S,transFn:m}),X.drawZeroLine(c,f,{counterAxis:A,layer:n.zerolinelayer,path:S,transFn:m}))}var E=X.getTickSigns(f),O=[];if(f.ticks){var C,P=X.makeTickPath(f,o,E[2]),L=f._anchorAxis&&f.mirror&&!0!==f.mirror?P+(C=X.makeTickPath(f,s,E[3])):(C="",P);if(f.showdividers&&x&&"boundaries"===f.tickson){var R={};for(T=0;T<w.length;T++)R[w[T].x]=1;D=function(t){return R[t.x]?C:L}}else D=L;X.drawTicks(c,f,{vals:y,layer:a,path:D,transFn:m}),"allticks"===f.mirror&&(O=Object.keys(f._linepositions||{}))}for(T=0;T<O.length;T++){e=O[T],n=h._plots[e];var j=f._linepositions[e]||[],j=X.makeTickPath(f,j[0],E[0])+X.makeTickPath(f,j[1],E[1]);X.drawTicks(c,f,{vals:y,layer:n[d+"axislayer"],path:j,transFn:m})}var N,D=[];D.push(function(){return X.drawLabels(c,f,{vals:l,layer:a,transFn:v,labelFns:X.makeLabelFns(f,o)})}),"multicategory"===f.type?(N={x:2,y:10}[d],D.push(function(){var t={x:"height",y:"width"}[d],t=I()[t]+N+(f._tickAngles[r+"tick"]?f.tickfont.size*G:0);return X.drawLabels(c,f,{vals:function(t,e){for(var n,r=[],i={},a=0;a<e.length;a++){var o=e[a];i[o.text2]?i[o.text2].push(o.x):i[o.text2]=[o.x]}for(n in i)r.push(nt(t,U.interp(i[n],.5),n));return r}(f,l),layer:a,cls:r+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:m,labelFns:X.makeLabelFns(f,o+t*E[4])})}),D.push(function(){return f._depth=E[4]*(I("tick2")[f.side]-o),t=c,e=f,n={vals:w,layer:a,path:X.makeTickPath(f,o,E[4],f._depth),transFn:m},r=e._id+"divider",i=n.vals,(i=n.layer.selectAll("path."+r).data(i,lt)).exit().remove(),i.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(H.stroke,e.dividercolor).style("stroke-width",q.crispRound(t,e.dividerwidth,1)+"px"),void i.attr("transform",n.transFn).attr("d",n.path);var t,e,n,r,i})):f.title.hasOwnProperty("standoff")&&D.push(function(){f._depth=E[4]*(I()[f.side]-o)});var z=B.getComponentMethod("rangeslider","isVisible")(f);return D.push(function(){var t,e,n,r,i,a,o=f.side.charAt(0),s=Y[f.side].charAt(0),l=X.getPxPosition(c,f),u=x?f.ticklen:0;(f.automargin||z)&&("multicategory"===f.type?a=I("tick2"):(a=I(),"x"===d&&"b"===o&&(f._depth=Math.max(0<a.width?a.bottom-l:0,u)))),f.automargin&&(t={x:0,y:0,r:0,l:0,t:0,b:0},r=[0,1],"x"===d?("b"===o?t[o]=f._depth:(t[o]=f._depth=Math.max(0<a.width?l-a.top:0,u),r.reverse()),0<a.width&&(0<(i=a.right-(f._offset+f._length))&&(t.xr=1,t.r=i),0<(i=f._offset-a.left)&&(t.xl=0,t.l=i))):("l"===o?t[o]=f._depth=Math.max(0<a.height?l-a.left:0,u):(t[o]=f._depth=Math.max(0<a.height?a.right-l:0,u),r.reverse()),0<a.height&&(0<(l=a.bottom-(f._offset+f._length))&&(t.yb=0,t.b=l),0<(a=f._offset-a.top)&&(t.yt=1,t.t=a))),t[p]="free"===f.anchor?f.position:f._anchorAxis.domain[r[0]],f.title.text!==h._dfltTitle[d]&&(t[o]+=ut(f)+(f.title.standoff||0)),f.mirror&&"free"!==f.anchor&&((e={x:0,y:0,r:0,l:0,t:0,b:0})[s]=f.linewidth,f.mirror&&!0!==f.mirror&&(e[s]+=u),!0===f.mirror||"ticks"===f.mirror?e[p]=f._anchorAxis.domain[r[1]]:"all"!==f.mirror&&"allticks"!==f.mirror||(e[p]=[f._counterDomainMin,f._counterDomainMax][r[1]]))),z&&(n=B.getComponentMethod("rangeslider","autoMarginOpts")(c,f)),F.autoMargin(c,ht(f),t),F.autoMargin(c,dt(f),e),F.autoMargin(c,pt(f),n)}),t.skipTitle||z&&"bottom"===f.side||D.push(function(){return function(t,e){var n=t._fullLayout,r=e._id,i=r.charAt(0),a=e.title.font.size;{var o,s;e.title.hasOwnProperty("standoff")?h=e._depth+e.title.standoff+ut(e):(o=-1!==(e.ticklabelposition||"").indexOf("inside"),h="multicategory"===e.type?e._depth:(s=1.5*a,o&&(s=.5*a,"outside"===e.ticks&&(s+=e.ticklen)),10+s+(e.linewidth?e.linewidth-1:0)),o||(h+="x"===i?"top"===e.side?a*(e.showticklabels?1:0):a*(e.showticklabels?1.5:.5):"right"===e.side?a*(e.showticklabels?1:.5):a*(e.showticklabels?.5:0)))}var l,u,c,f,a=X.getPxPosition(t,e);"x"===i?(u=e._offset+e._length/2,c="top"===e.side?a-h:a+h):(c=e._offset+e._length/2,u="right"===e.side?a+h:a-h,l={rotate:"-90",offset:0});{var h;"multicategory"!==e.type&&(h=e._selections[e._id+"tick"],f={selection:h,side:e.side},h&&h.node()&&h.node().parentNode&&(h=q.getTranslate(h.node().parentNode),f.offsetLeft=h.x,f.offsetTop=h.y),e.title.hasOwnProperty("standoff")&&(f.pad=0))}return V.draw(t,r+"title",{propContainer:e,propName:e._name+".title.text",placeholder:n._dfltTitle[i],avoid:f,transform:l,attributes:{x:u,y:c,"text-anchor":"middle"}})}(c,f)}),U.syncOrAsync(D)}}function I(t){t=r+(t||"tick");return g[t]||(g[t]=function(t,e){var n,r,i,a;t._selections[e].size()?(i=n=1/0,a=r=-1/0,t._selections[e].each(function(){var t=ft(this),t=q.bBox(t.node().parentNode);n=Math.min(n,t.top),r=Math.max(r,t.bottom),i=Math.min(i,t.left),a=Math.max(a,t.right)})):a=i=r=n=0;return{top:n,bottom:r,left:i,right:a,height:r-n,width:a-i}}(f,t)),g[t]}},X.getTickSigns=function(t){var e=t._id.charAt(0),n={x:"top",y:"right"}[e],n=t.side===n?1:-1,n=[-1,1,n,-n];return"inside"!==t.ticks==("x"===e)&&(n=n.map(function(t){return-t})),t.side&&n.push({l:-1,t:-1,r:1,b:1}[t.side.charAt(0)]),n},X.makeTransTickFn=function(e){return"x"===e._id.charAt(0)?function(t){return c(e._offset+e.l2p(t.x),0)}:function(t){return c(0,e._offset+e.l2p(t.x))}},X.makeTransTickLabelFn=function(e){var t=function(t){var e=t.ticklabelposition||"",n=function(t){return-1!==e.indexOf(t)},r=n("top"),i=n("left"),a=n("right"),o=n("bottom"),s=n("inside"),l=o||i||r||a;if(!l&&!s)return[0,0];var u=t.side,c=l?(t.tickwidth||0)/2:0,f=3,n=t.tickfont?t.tickfont.size:12;(o||r)&&(c+=n*w,f+=(t.linewidth||0)/2);(i||a)&&(c+=(t.linewidth||0)/2,f+=3);s&&"top"===u&&(f-=n*(1-w));(i||r)&&(c=-c);"bottom"!==u&&"right"!==u||(f=-f);return[l?c:0,s?f:0]}(e),n=t[0],r=t[1];return"x"===e._id.charAt(0)?function(t){return c(n+e._offset+e.l2p(st(t)),r)}:function(t){return c(r,n+e._offset+e.l2p(st(t)))}},X.makeTickPath=function(t,e,n,r){r=void 0!==r?r:t.ticklen;var i=t._id.charAt(0),t=(t.linewidth||1)/2;return"x"===i?"M0,"+(e+t*n)+"v"+r*n:"M"+(e+t*n)+",0h"+r*n},X.makeLabelFns=function(r,e,t){var n=r.ticklabelposition||"",i=function(t){return-1!==n.indexOf(t)},a=i("top"),o=i("left"),s=i("right"),l=i("bottom")||o||a||s,u=i("inside"),c="inside"===n&&"inside"===r.ticks||!u&&"outside"===r.ticks&&"boundaries"!==r.tickson,f=0,a=0,i=c?r.ticklen:0;u?i*=-1:l&&(i=0),c&&(f+=i,t&&(v=U.deg2rad(t),f=i*Math.cos(v)+1,a=i*Math.sin(v))),r.showticklabels&&(c||r.showline)&&(f+=.2*r.tickfont.size);var h,d,p,g,y,t={labelStandoff:f+=(r.linewidth||1)/2*(u?-1:1),labelShift:a},m=0,i=r.side,v=r._id.charAt(0),c=r.tickangle;return"x"===v?(y=(g=!u&&"bottom"===i||u&&"top"===i)?1:-1,u&&(y*=-1),h=a*y,d=e+f*y,p=g?1:-.2,90===Math.abs(c)&&(u?p+=_:p=-90===c&&"bottom"===i?w:90===c&&"top"===i?_:.5,m=_/2*(c/90)),t.xFn=function(t){return t.dx+h+m*t.fontSize},t.yFn=function(t){return t.dy+d+t.fontSize*p},t.anchorFn=function(t,e){if(l){if(o)return"end";if(s)return"start"}return k(e)&&0!==e&&180!==e?e*y<0!==u?"end":"start":"middle"},t.heightFn=function(t,e,n){return e<-60||60<e?-.5*n:"top"===r.side!==u?-n:0}):"y"===v&&(y=(g=!u&&"left"===i||u&&"right"===i)?1:-1,u&&(y*=-1),h=f,d=a*y,p=0,u||90!==Math.abs(c)||(p=-90===c&&"left"===i||90===c&&"right"===i?w:.5),!u||0!=(c=k(c)?+c:0)&&(c=U.deg2rad(c),m=Math.abs(Math.sin(c))*w*y,p=0),t.xFn=function(t){return t.dx+e-(h+t.fontSize*p)*y+m*t.fontSize},t.yFn=function(t){return t.dy+d+t.fontSize*_},t.anchorFn=function(t,e){return k(e)&&90===Math.abs(e)?"middle":g?"end":"start"},t.heightFn=function(t,e,n){return"right"===r.side&&(e*=-1),e<-30?-n:e<30?-.5*n:0}),t},X.drawTicks=function(t,e,n){n=n||{};var r=e._id+"tick",i=n.vals;"period"===e.ticklabelmode&&(i=i.slice()).shift();i=n.layer.selectAll("path."+r).data(e.ticks?i:[],lt);i.exit().remove(),i.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(H.stroke,e.tickcolor).style("stroke-width",q.crispRound(t,e.tickwidth,1)+"px").attr("d",n.path),i.attr("transform",n.transFn)},X.drawGrid=function(t,e,n){n=n||{};var r=e._id+"grid",i=n.vals,a=n.counterAxis;if(!1===e.showgrid)i=[];else if(a&&X.shouldShowZeroLine(t,e,a))for(var o="array"===e.tickmode,s=0;s<i.length;s++){var l=i[s].x;if(o?!l:Math.abs(l)<e.dtick/100){if(i=i.slice(0,s).concat(i.slice(s+1)),!o)break;s--}}a=n.layer.selectAll("path."+r).data(i,lt);a.exit().remove(),a.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),e._gw=q.crispRound(t,e.gridwidth,1),a.attr("transform",n.transFn).attr("d",n.path).call(H.stroke,e.gridcolor||"#ddd").style("stroke-width",e._gw+"px"),"function"==typeof n.path&&a.attr("d",n.path)},X.drawZeroLine=function(t,e,n){n=n||n;var r=e._id+"zl",i=X.shouldShowZeroLine(t,e,n.counterAxis),i=n.layer.selectAll("path."+r).data(i?[{x:0,id:e._id}]:[]);i.exit().remove(),i.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(t,e){return a(t.id,e.id)})}),i.attr("transform",n.transFn).attr("d",n.path).call(H.stroke,e.zerolinecolor||H.defaultLine).style("stroke-width",q.crispRound(t,e.zerolinewidth,e._gw||1)+"px")},X.drawLabels=function(r,p,g){g=g||{};var t=r._fullLayout,e=p._id,y=e.charAt(0),n=g.cls||e+"tick",m=g.vals,u=g.labelFns,v=g.secondary?0:p.tickangle,i=(p._prevTickAngles||{})[n],b=g.layer.selectAll("g."+n).data(p.showticklabels?m:[],lt),a=[];function x(t,s){var l=-1!==(p.ticklabelposition||"").indexOf("inside");t.each(function(t){var e=d.select(this),n=e.select(".text-math-group"),r=u.anchorFn(t,s),i=g.transFn.call(e.node(),t)+(k(s)&&0!=+s?" rotate("+s+","+u.xFn(t)+","+(u.yFn(t)-t.fontSize/2)+")":""),a=f.lineCount(e),o=G*t.fontSize,o=u.heightFn(t,k(s)?+s:0,(a-1)*o);o&&(i+=c(0,o)),n.empty()?((e=e.select("text")).attr({transform:i,"text-anchor":r}),l&&(e.style({opacity:100}),p._hideOutOfRangeInsideTickLabels&&p._hideOutOfRangeInsideTickLabels())):(r=q.bBox(n.node()).width*{end:-.5,start:.5}[r],n.attr("transform",i+c(r,0)))})}b.enter().append("g").classed(n,1).append("text").attr("text-anchor","middle").each(function(t){var e=d.select(this),n=r._promises.length;e.call(f.positionText,u.xFn(t),u.yFn(t)).call(q.font,t.font,t.fontSize,t.fontColor).text(t.text).call(f.convertToTspans,r),r._promises[n]?a.push(r._promises.pop().then(function(){x(e,v)})):x(e,v)}),b.exit().remove(),g.repositionOnUpdate&&b.each(function(t){d.select(this).select("text").call(f.positionText,u.xFn(t),u.yFn(t))}),p._hideOutOfRangeInsideTickLabels=void 0,-1!==(p.ticklabelposition||"").indexOf("inside")&&(p._hideOutOfRangeInsideTickLabels=function(){var t=U.simpleMap(p.range,p.r2l),e=p.l2p(t[0]),t=p.l2p(t[1]),i=Math.min(e,t)+p._offset,a=Math.max(e,t)+p._offset,o="x"===p._id.charAt(0);b.each(function(t){var e,n,r=d.select(this);r.select(".text-math-group").empty()&&(e=q.bBox(r.node()),n=!1,o?(e.right>a||e.left<i)&&(n=!0):(e.bottom>a||e.top+(p.tickangle?0:t.fontSize/4)<i)&&(n=!0),n&&r.select("text").style({opacity:0}))})}),x(b,i+1?i:v);var _=null;p._selections&&(p._selections[n]=b);var o=[function(){return a.length&&Promise.all(a)}];p.automargin&&t._redrawFromAutoMarginCount&&90===i?(_=90,o.push(function(){x(b,i)})):o.push(function(){if(x(b,v),m.length&&"x"===y&&!k(v)&&("log"!==p.type||"D"!==String(p.dtick).charAt(0))){var n=_=0,r=[];if(b.each(function(t){n=Math.max(n,t.fontSize);var e=p.l2p(t.x),t=ft(this),t=q.bBox(t.node());r.push({top:0,bottom:10,height:10,left:e-t.width/2,right:e+t.width/2+2,width:t.width+2})}),"boundaries"!==p.tickson&&!p.showdividers||g.secondary){for(var t=m.length,e=Math.abs((m[t-1].x-m[0].x)*p._m)/(t-1),i=p.ticklabelposition||"",a=function(t){return-1!==i.indexOf(t)},o=a("top"),s=a("left"),t=a("right"),l=a("bottom")||s||o||t?(p.tickwidth||0)+6:0,u=e<2.5*n||"multicategory"===p.type,c=0;c<r.length-1;c++)if(U.bBoxIntersect(r[c],r[c+1],l)){_=u?90:30;break}}else{var f=2;for(p.ticks&&(f+=p.tickwidth/2),c=0;c<r.length;c++){var h=m[c].xbnd,d=r[c];if(null!==h[0]&&d.left-p.l2p(h[0])<f||null!==h[1]&&p.l2p(h[1])-d.right<f){_=90;break}}}_&&x(b,_)}}),p._tickAngles&&o.push(function(){p._tickAngles[n]=null===_?k(v)?v:0:_});e=p._anchorAxis;e&&e.autorange&&-1!==(p.ticklabelposition||"").indexOf("inside")&&!I(t,p._id)&&(t._insideTickLabelsAutorange||(t._insideTickLabelsAutorange={}),t._insideTickLabelsAutorange[e._name+".autorange"]=e.autorange,o.push(function(){b.each(function(t,e){var n=ft(this);p._vals[e].bb=q.bBox(n.node())})}));o=U.syncOrAsync(o);return o&&o.then&&r._promises.push(o),o},X.getPxPosition=function(t,e){var n,r=t._fullLayout._size,i=e._id.charAt(0),t=e.side;return"free"!==e.anchor?n=e._anchorAxis:"x"===i?n={_offset:r.t+(1-(e.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(e.position||0)*r.w,_length:0}),"top"===t||"left"===t?n._offset:"bottom"===t||"right"===t?n._offset+n._length:void 0},X.shouldShowZeroLine=function(t,e,n){var r=U.simpleMap(e.range,e.r2l);return r[0]*r[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&!(e.rangebreaks&&e.maskBreaks(0)===z)&&(ct(e,0)||!function(t,a,e,n){var r=e._mainAxis;if(!r)return;var i=t._fullLayout,o=a._id.charAt(0),s=X.counterLetter(a._id),l=a._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===o)?0:a._length);function u(t){if(!t.showline||!t.linewidth)return!1;var e=Math.max((t.linewidth+a.zerolinewidth)/2,1);function n(t){return"number"==typeof t&&Math.abs(t-l)<e}if(n(t._mainLinePosition)||n(t._mainMirrorPosition))return!0;var r,i=t._linepositions||{};for(r in i)if(n(i[r][0])||n(i[r][1]))return!0}i=i._plots[e._mainSubplot];if(!(i.mainplotinfo||i).overlays.length)return u(e);for(var c=X.list(t,s),f=0;f<c.length;f++){var h=c[f];if(h._mainAxis===r&&u(h))return!0}}(t,e,n,r)||function(t,e){for(var n=t._fullData,r=e._mainSubplot,i=e._id.charAt(0),a=0;a<n.length;a++){var o=n[a];if(!0===o.visible&&o.xaxis+o.yaxis===r){if(B.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[i])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===i)return!0}}return!1}(t,e))},X.clipEnds=function(e,t){return t.filter(function(t){return ct(e,t.x)})},X.allowAutoMargin=function(t){for(var e=X.list(t,"",!0),n=0;n<e.length;n++){var r=e[n];r.automargin&&(F.allowAutoMargin(t,ht(r)),r.mirror&&F.allowAutoMargin(t,dt(r))),B.getComponentMethod("rangeslider","isVisible")(r)&&F.allowAutoMargin(t,pt(r))}},X.swap=function(t,e){for(var n=function(t,e){var n,r,i,a=[];for(n=0;n<e.length;n++){var o=[],s=t._fullData[e[n]].xaxis,l=t._fullData[e[n]].yaxis;if(s&&l){for(r=0;r<a.length;r++)-1===a[r].x.indexOf(s)&&-1===a[r].y.indexOf(l)||o.push(r);if(o.length){var u=a[o[0]];if(1<o.length)for(r=1;r<o.length;r++)i=a[o[r]],gt(u.x,i.x),gt(u.y,i.y);gt(u.x,[s]),gt(u.y,[l])}else a.push({x:[s],y:[l]})}}return a}(t,e),r=0;r<n.length;r++)!function(t,e,n){var r,i,a=[],o=[],s=t.layout;for(r=0;r<e.length;r++)a.push(X.getFromId(t,e[r]));for(r=0;r<n.length;r++)o.push(X.getFromId(t,n[r]));var l=Object.keys(x),u=["anchor","domain","overlaying","position","side","tickangle","editType"],c=["linear","log"];for(r=0;r<l.length;r++){var f=l[r],h=a[0][f],d=o[0][f],p=!0,g=!1,y=!1;if("_"!==f.charAt(0)&&"function"!=typeof h&&-1===u.indexOf(f)){for(i=1;i<a.length&&p;i++){var m=a[i][f];"type"===f&&-1!==c.indexOf(h)&&-1!==c.indexOf(m)&&h!==m?g=!0:m!==h&&(p=!1)}for(i=1;i<o.length&&p;i++){var v=o[i][f];"type"===f&&-1!==c.indexOf(d)&&-1!==c.indexOf(v)&&d!==v?y=!0:o[i][f]!==d&&(p=!1)}p&&(g&&(s[a[0]._name].type="linear"),y&&(s[o[0]._name].type="linear"),function(t,e,n,r,i){var a,o=U.nestedProperty,s=o(t[n[0]._name],e).get(),l=o(t[r[0]._name],e).get();for("title"===e&&(s&&s.text===i.x&&(s.text=i.y),l&&l.text===i.y&&(l.text=i.x)),a=0;a<n.length;a++)o(t,n[a]._name+"."+e).set(l);for(a=0;a<r.length;a++)o(t,r[a]._name+"."+e).set(s)}(s,f,a,o,t._fullLayout._dfltTitle))}}for(r=0;r<t._fullLayout.annotations.length;r++){var b=t._fullLayout.annotations[r];-1!==e.indexOf(b.xref)&&-1!==n.indexOf(b.yref)&&U.swapAttrs(s.annotations[r],["?"])}}(t,n[r].x,n[r].y)}},{"../../components/color":294,"../../components/drawing":316,"../../components/titles":389,"../../constants/alignment":396,"../../constants/numerical":402,"../../lib":424,"../../lib/svg_text_utils":447,"../../plots/plots":516,"../../registry":525,"./autorange":470,"./axis_autotype":472,"./axis_ids":474,"./clean_ticks":476,"./layout_attributes":485,"./set_convert":491,d3:277,"fast-isnumeric":99}],472:[function(t,e,n){"use strict";var c=t("fast-isnumeric"),r=t("../../lib"),f=t("../../constants/numerical").BADNUM,l=r.isArrayOrTypedArray,h=r.isDateTime,d=r.cleanNumber,p=Math.round;function g(t){return Math.max(1,(t-1)/1e3)}e.exports=function(t,e,n){var r=t,i=n.noMultiCategory;if(l(r)&&!r.length)return"-";if(!i&&(l((t=r)[0])&&l(t[1])))return"multicategory";if(i&&Array.isArray(r[0])){for(var a=[],o=0;o<r.length;o++)if(l(r[o]))for(var s=0;s<r[o].length;s++)a.push(r[o][s]);r=a}if(function(t,e){for(var n=t.length,r=g(n),i=0,a=0,o={},s=0;s<n;s+=r){var l=p(s),u=t[l],l=String(u);o[l]||(o[l]=1,h(u,e)&&i++,c(u)&&a++)}return 2*a<i}(r,e))return"date";n="strict"!==n.autotypenumbers;return function(t,e){for(var n=t.length,r=g(n),i=0,a=0,o={},s=0;s<n;s+=r){var l=p(s),u=t[l],l=String(u);o[l]||(o[l]=1,"boolean"==(l=typeof u)?a++:(e?d(u)!==f:"number"==l)?i++:"string"==l&&a++)}return 2*i<a}(r,n)?"category":function(t,e){for(var n=t.length,r=0;r<n;r++)if(function(t,e){return e?c(t):"number"==typeof t}(t[r],e))return!0;return!1}(r,n)?"linear":"-"}},{"../../constants/numerical":402,"../../lib":424,"fast-isnumeric":99}],473:[function(t,e,n){"use strict";var c=t("fast-isnumeric"),y=t("../../registry"),m=t("../../lib"),v=t("../array_container_defaults"),b=t("./layout_attributes"),x=t("./tick_value_defaults"),_=t("./tick_mark_defaults"),w=t("./tick_label_defaults"),k=t("./category_order_defaults"),M=t("./line_grid_defaults"),T=t("./set_convert"),A=t("./constants").WEEKDAY_PATTERN,f=t("./constants").HOUR_PATTERN;function S(n,r,t){function e(t,e){return m.coerce(n,r,b.rangebreaks,t,e)}if(e("enabled")){var i=e("bounds");if(i&&2<=i.length){var a,o,s="";if(2===i.length)for(a=0;a<2;a++)if(o=h(i[a])){s=A;break}var l=e("pattern",s);if(l===A)for(a=0;a<2;a++)(o=h(i[a]))&&(r.bounds[a]=i[a]=o-1);if(l)for(a=0;a<2;a++)switch(o=i[a],l){case A:if(!c(o))return void(r.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||7<=o)return void(r.enabled=!1);r.bounds[a]=i[a]=o;break;case f:if(!c(o))return void(r.enabled=!1);if((o=+o)<0||24<o)return void(r.enabled=!1);r.bounds[a]=i[a]=o}!1===t.autorange&&((u=t.range)[0]<u[1]?i[0]<u[0]&&i[1]>u[1]&&(r.enabled=!1):i[0]>u[0]&&i[1]<u[1]&&(r.enabled=!1))}else{var u=e("values");u&&u.length?e("dvalue"):r.enabled=!1}}}e.exports=function(t,e,n,r,i){var a=r.letter,o=r.font||{},s=r.splomStash||{},l=n("visible",!r.visibleDflt),u=e._template||{},c=e.type||u.type||"-";"date"===c&&(y.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",r.calendar),r.noTicklabelmode||(f=n("ticklabelmode"))),r.noTicklabelposition&&"multicategory"!==c||m.coerce(t,e,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===f?["outside","inside"]:"x"===a?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition"),T(e,i);u=!e.isValidRange(t.range);u&&r.reverseDflt&&(u="reversed"),!n("autorange",u)||"linear"!==c&&"-"!==c||n("rangemode"),n("range"),e.cleanRange(),k(t,e,n,r),"category"===c||r.noHover||n("hoverformat");var f=n("color"),u=f!==b.color.dflt?f:o.color,a=s.label||i._dfltTitle[a];if(w(t,e,n,c,r,{pass:1}),!l)return e;n("title.text",a),m.coerceFont(n,"title.font",{family:o.family,size:Math.round(1.2*o.size),color:u}),x(t,e,n,c),w(t,e,n,c,r,{pass:2}),_(t,e,n,r),M(t,e,n,{dfltColor:f,bgColor:r.bgColor,showGrid:r.showGrid,attributes:b}),(e.showline||e.ticks)&&n("mirror"),r.automargin&&n("automargin");var h,f="multicategory"===c;if(r.noTickson||"category"!==c&&!f||!e.ticks&&!e.showgrid||(f&&(h="boundaries"),"boundaries"===n("tickson",h)&&delete e.ticklabelposition),f&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===c)if(v(t,e,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:S}),e.rangebreaks.length){for(var d=0;d<e.rangebreaks.length;d++)if(e.rangebreaks[d].pattern===A){e._hasDayOfWeekBreaks=!0;break}if(T(e,i),i._has("scattergl")||i._has("splom"))for(var p=0;p<r.data.length;p++){var g=r.data[p];"scattergl"!==g.type&&"splom"!==g.type||(g.visible=!1,m.warn(g.type+" traces do not work on axes with rangebreaks. Setting trace "+g.index+" to `visible: false`."))}}else delete e.rangebreaks;return e};var r={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function h(t){if("string"==typeof t)return r[t.substr(0,3).toLowerCase()]}},{"../../lib":424,"../../registry":525,"../array_container_defaults":466,"./category_order_defaults":475,"./constants":477,"./layout_attributes":485,"./line_grid_defaults":487,"./set_convert":491,"./tick_label_defaults":492,"./tick_mark_defaults":493,"./tick_value_defaults":494,"fast-isnumeric":99}],474:[function(t,e,c){"use strict";var o=t("../../registry"),i=t("./constants");function n(t,e){if(e&&e.length)for(var n=0;n<e.length;n++)if(e[n][t])return!0;return!1}c.id2name=function(t){if("string"==typeof t&&t.match(i.AX_ID_PATTERN)){var e=t.split(" ")[0].substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},c.name2id=function(t){if(t.match(i.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},c.cleanId=function(t,e,n){var r=/( domain)$/.test(t);if("string"==typeof t&&t.match(i.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)&&(!r||n)){e=t.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===e&&(e=""),t.charAt(0)+e+(r&&n?" domain":"")}},c.list=function(t,e,n){var r=t._fullLayout;if(!r)return[];var i=c.listIds(t,e),a=new Array(i.length);for(l=0;l<i.length;l++){var o=i[l];a[l]=r[o.charAt(0)+"axis"+o.substr(1)]}if(!n)for(var s=r._subplots.gl3d||[],l=0;l<s.length;l++){var u=r[s[l]];e?a.push(u[e+"axis"]):a.push(u.xaxis,u.yaxis,u.zaxis)}return a},c.listIds=function(t,e){t=t._fullLayout;if(!t)return[];t=t._subplots;return e?t[e+"axis"]:t.xaxis.concat(t.yaxis)},c.getFromId=function(t,e,n){t=t._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===n?e=e.replace(/y[0-9]*/,""):"y"===n&&(e=e.replace(/x[0-9]*/,"")),t[c.id2name(e)]},c.getFromTrace=function(t,e,n){var r,i=t._fullLayout,a=null;return o.traceIs(e,"gl3d")?"scene"===(r=e.scene).substr(0,5)&&(a=i[r][n+"axis"]):a=c.getFromId(t,e[n+"axis"]||n),a},c.idSort=function(t,e){var n=t.charAt(0),r=e.charAt(0);return n!==r?r<n?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},c.ref2id=function(t){return!!/^[xyz]/.test(t)&&t.split(" ")[0]},c.isLinked=function(t,e){return n(e,t._axisMatchGroups)||n(e,t._axisConstraintGroups)}},{"../../registry":525,"./constants":477}],475:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i,a;"category"===e.type&&(t=t.categoryarray,(t=Array.isArray(t)&&0<t.length)&&(i="array"),"array"===(i=n("categoryorder",i))&&(a=n("categoryarray")),t||"array"!==i||(i=e.categoryorder="trace"),"trace"===i?e._initialCategories=[]:"array"===i?e._initialCategories=a.slice():(a=function(t,e){var n,r,i=e.dataAttr||t._id.charAt(0),a={};if(e.axData)n=e.axData;else for(n=[],r=0;r<e.data.length;r++){var o=e.data[r];o[i+"axis"]===t._id&&n.push(o)}for(r=0;r<n.length;r++)for(var s=n[r][i],l=0;l<s.length;l++){var u=s[l];null!=u&&(a[u]=1)}return Object.keys(a)}(e,r).sort(),"category ascending"===i?e._initialCategories=a:"category descending"===i&&(e._initialCategories=a.reverse())))}},{}],476:[function(t,e,n){"use strict";var o=t("fast-isnumeric"),i=t("../../lib"),t=t("../../constants/numerical"),s=t.ONEDAY,a=t.ONEWEEK;n.dtick=function(t,e){var n="log"===e,r="date"===e,i="category"===e,a=r?s:1;if(!t)return a;if(o(t))return(t=Number(t))<=0?a:i?Math.max(1,Math.round(t)):r?Math.max(.1,t):t;if("string"!=typeof t||!r&&!n)return a;e=t.charAt(0),i=t.substr(1);return(i=o(i)?Number(i):0)<=0||!(r&&"M"===e&&i===Math.round(i)||n&&"L"===e||n&&"D"===e&&(1===i||2===i))?a:t},n.tick0=function(t,e,n,r){return"date"===e?i.cleanDate(t,i.dateTick0(n,r%a==0?1:0)):"D1"!==r&&"D2"!==r?o(t)?Number(t):0:void 0}},{"../../constants/numerical":402,"../../lib":424,"fast-isnumeric":99}],477:[function(t,e,n){"use strict";t=t("../../lib/regex").counter;e.exports={idRegex:{x:t("x","( domain)?"),y:t("y","( domain)?")},attrRegex:t("[xy]axis"),xAxisMatch:t("xaxis"),yAxisMatch:t("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":439}],478:[function(t,e,n){"use strict";var M=t("../../lib"),L=t("./autorange"),R=t("./axis_ids").id2name,T=t("./layout_attributes"),j=t("./scale_zoom"),A=t("./set_convert"),N=t("../../constants/numerical").ALMOST_EQUAL,i=t("../../constants/alignment").FROM_BL;function S(t,e){var n=e.domain;return(n=n||t[R(e.overlaying)].domain)[1]-n[0]}function E(t,e){for(var n=0;n<t.length;n++)if(t[n][e])return t[n];return null}function O(t,e,n,r){var i,a,o,s=E(t,e);null===s?((s={})[e]=1,o=t.length,t.push(s)):o=t.indexOf(s);for(var l=Object.keys(s),u=0;u<t.length;u++)if(i=t[u],u!==o&&i[n]){for(var c=i[n],f=0;f<l.length;f++)i[a=l[f]]=d(c,d(r,s[a]));return void t.splice(o,1)}if(1!==r)for(f=0;f<l.length;f++){var h=l[f];s[h]=d(r,s[h])}s[n]=1}function d(t,e){var n,r,i="",a="";"string"==typeof t&&(n=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(n)),"string"==typeof e&&(r=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(r));var o=t*e;return n||r?n&&r&&i.charAt(0)!==a.charAt(0)?n===r?o:(r<n?i.substr(r):a.substr(n))+o:i+a+t*e:o}function D(t,e){var n=t._inputDomain,r=i[t.constraintoward],r=n[0]+(n[1]-n[0])*r;t.domain=t._input.domain=[r+(n[0]-r)/e,r+(n[1]-r)/e],t.setScale()}n.handleDefaults=function(t,n,e){for(var r,i,a,o,s,l=e.axIds,u=e.axHasImage,c=n._axisConstraintGroups=[],f=n._axisMatchGroups=[],h=0;h<l.length;h++)!function(n,r,t){var e=t.axIds,i=t.layoutOut,a=t.hasImage,o=i._axisConstraintGroups,s=i._axisMatchGroups,l=r._id,u=l.charAt(0),t=((i._splomAxes||{})[u]||{})[l]||{},c=r._id,u="x"===c.charAt(0);function f(t,e){return M.coerce(n,r,T,t,e)}r._matchGroup=null,r._constraintGroup=null,f("constrain",a?"domain":"range"),M.coerce(n,r,{constraintoward:{valType:"enumerated",values:u?["left","center","right"]:["bottom","middle","top"],dflt:u?"center":"middle"}},"constraintoward");var h,d,p=r.type,g=[];for(h=0;h<e.length;h++)(d=e[h])!==c&&i[R(d)].type===p&&g.push(d);var y,m,v,b=E(o,c);if(b){var x=[];for(h=0;h<g.length;h++)d=g[h],b[d]||x.push(d);g=x}(l=g.length)&&(n.matches||t.matches)&&(y=M.coerce(n,r,{matches:{valType:"enumerated",values:g,dflt:-1!==g.indexOf(t.matches)?t.matches:void 0}},"matches")),a=a&&!u?r.anchor:void 0,l&&!y&&(n.scaleanchor||a)&&(m=M.coerce(n,r,{scaleanchor:{valType:"enumerated",values:g}},"scaleanchor",a)),y?(r._matchGroup=O(s,c,y,1),v=i[R(y)],v=S(i,r)/S(i,v),u!=("x"===y.charAt(0))&&(v=(u?"x":"y")+v),O(o,c,y,v)):n.matches&&-1!==e.indexOf(n.matches)&&M.warn("ignored "+r._name+'.matches: "'+n.matches+'" to avoid an infinite loop'),m?(v=(v=f("scaleratio"))||(r.scaleratio=1),O(o,c,m,v)):n.scaleanchor&&-1!==e.indexOf(n.scaleanchor)&&M.warn("ignored "+r._name+'.scaleanchor: "'+n.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}(o=t[a=R(l[h])],s=n[a],{axIds:l,layoutOut:n,hasImage:u[a]});function d(t,e){for(h=0;h<t.length;h++)for(i in r=t[h])n[R(i)][e]=r}for(d(f,"_matchGroup"),h=0;h<c.length;h++)for(i in r=c[h])if((s=n[R(i)]).fixedrange){for(var p in r){var g=R(p);!1===(t[g]||{}).fixedrange&&M.warn("fixedrange was specified as false for axis "+g+" but was overridden because another axis in its constraint group has fixedrange true"),n[g].fixedrange=!0}break}for(h=0;h<c.length;){for(i in r=c[h]){(s=n[R(i)])._matchGroup&&Object.keys(s._matchGroup).length===Object.keys(r).length&&(c.splice(h,1),h--);break}h++}d(c,"_constraintGroup");var y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],m=!1,v=!1;function b(){k=s[w],"rangebreaks"===w&&(v=s._hasDayOfWeekBreaks)}for(h=0;h<f.length;h++){r=f[h];for(var x=0;x<y.length;x++){var _,w=y[x],k=null;for(i in r)if(o=t[a=R(i)],s=n[a],w in s){if(!s.matches&&(_=s,w in o)){b();break}null===k&&w in o&&b()}if("range"===w&&k&&(m=!0),"autorange"===w&&null===k&&m&&(k=!1),null===k&&w in _&&(k=_[w]),null!==k)for(i in r)(s=n[R(i)])[w]="range"===w?k.slice():k,"rangebreaks"===w&&(s._hasDayOfWeekBreaks=v,A(s,n))}}},n.enforce=function(t){for(var e,n,r,i,a,o=t._fullLayout,s=o._axisConstraintGroups||[],l=0;l<s.length;l++){e=function(t,e){for(var n=(e=e._size).h/e.w,r={},i=Object.keys(t),a=0;a<i.length;a++){var o=i[a];if("string"==typeof(u=t[o]))for(var s=u.match(/^[xy]*/)[0],l=s.length,u=+u.substr(l),c="y"===s.charAt(0)?n:1/n,f=0;f<l;f++)u*=c;r[o]=u}return r}(s[l],o);for(var u=Object.keys(e),c=1/0,f=0,h=1/0,d={},p={},g=!1,y=0;y<u.length;y++)p[n=u[y]]=r=o[R(n)],r._inputDomain?r.domain=r._inputDomain.slice():r._inputDomain=r.domain.slice(),r._inputRange||(r._inputRange=r.range.slice()),r.setScale(),d[n]=i=Math.abs(r._m)/e[n],c=Math.min(c,i),"domain"!==r.constrain&&r._constraintShrinkable||(h=Math.min(h,i)),delete r._constraintShrinkable,f=Math.max(f,i),"domain"===r.constrain&&(g=!0);if(!(N*f<c)||g)for(y=0;y<u.length;y++)if(i=d[n=u[y]],x=(r=p[n]).constrain,i!==h||"domain"===x)if(a=i/h,"range"===x)j(r,a);else{var m=r._inputDomain,v=(r.domain[1]-r.domain[0])/(m[1]-m[0]),b=(r.r2l(r.range[1])-r.r2l(r.range[0]))/(r.r2l(r._inputRange[1])-r.r2l(r._inputRange[0]));if((a/=v)*b<1)r.domain=r._input.domain=m.slice(),j(r,a);else{if(b<1&&(r.range=r._input.range=r._inputRange.slice(),a*=b),r.autorange){var x=r.r2l(r.range[0]),v=r.r2l(r.range[1]),m=(x+v)/2,_=m,w=m,b=Math.abs(v-m),k=m-b*a*1.0001,M=m+b*a*1.0001,T=L.makePadFn(o,r,0),A=L.makePadFn(o,r,1);D(r,a);for(var S,E=Math.abs(r._m),m=L.concatExtremes(t,r),O=m.min,C=m.max,P=0;P<O.length;P++)k<(S=O[P].val-T(O[P])/E)&&S<_&&(_=S);for(P=0;P<C.length;P++)(S=C[P].val+A(C[P])/E)<M&&w<S&&(w=S);a/=(w-_)/(2*b),_=r.l2r(_),w=r.l2r(w),r.range=r._input.range=x<v?[_,w]:[w,_]}D(r,a)}}}},n.getAxisGroup=function(t,e){for(var n=t._axisMatchGroups,r=0;r<n.length;r++)if(n[r][e])return"g"+r;return e},n.clean=function(t,e){if(e._inputDomain){for(var n=!1,r=e._id,i=t._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][r]){n=!0;break}n&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}}},{"../../constants/alignment":396,"../../constants/numerical":402,"../../lib":424,"./autorange":470,"./axis_ids":474,"./layout_attributes":485,"./scale_zoom":489,"./set_convert":491}],479:[function(t,e,n){"use strict";var dt=t("d3"),pt=t("tinycolor2"),r=t("has-passive-events"),gt=t("../../registry"),yt=t("../../lib"),a=yt.strTranslate,mt=t("../../lib/svg_text_utils"),i=t("../../components/color"),vt=t("../../components/drawing"),bt=t("../../components/fx"),xt=t("./axes"),o=t("../../lib/setcursor"),_t=t("../../components/dragelement"),s=t("../../components/dragelement/helpers"),wt=s.selectingOrDrawing,kt=s.freeMode,Mt=t("../../constants/alignment").FROM_TL,Tt=t("../../lib/clear_gl_canvases"),At=t("../../plot_api/subroutines").redrawReglTraces,St=t("../plots"),Et=t("./axis_ids").getFromId,Ot=t("./select").prepSelect,Ct=t("./select").clearSelect,Pt=t("./select").selectOnClick,Lt=t("./scale_zoom"),Rt=t("./constants"),jt=Rt.MINDRAG,Nt=Rt.MINZOOM,l=!0;function u(e,t,n,r){n=yt.ensureSingle(e.draglayer,t,n,function(t){t.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return n.call(o,r),n.node()}function Dt(t,e,n,r,i,a,o){n=u(t,"rect",e,n);return dt.select(n).call(vt.setRect,r,i,a,o),n}function zt(t,e){for(var n=0;n<t.length;n++)if(!t[n].fixedrange)return e;return""}function It(t,e,n,r,i){for(var a=0;a<t.length;a++){var o,s,l=t[a];l.fixedrange||(l.rangebreaks?(o=(s="y"===l._id.charAt(0))?1-e:e,s=s?1-n:n,r[l._name+".range[0]"]=l.l2r(l.p2l(o*l._length)),r[l._name+".range[1]"]=l.l2r(l.p2l(s*l._length))):(o=l._rl[0],s=l._rl[1]-o,r[l._name+".range[0]"]=l.l2r(o+s*e),r[l._name+".range[1]"]=l.l2r(o+s*n)))}i&&i.length&&It(i,i=(e+(1-n))/2,1-i,r,[])}function Ft(t,e){for(var n=0;n<t.length;n++){var r,i=t[n];i.fixedrange||(i.rangebreaks?(r=i._length,r=(i.p2l(0+e)-i.p2l(0)+(i.p2l(r+e)-i.p2l(r)))/2,i.range=[i.l2r(i._rl[0]-r),i.l2r(i._rl[1]-r)]):i.range=[i.l2r(i._rl[0]-e/i._m),i.l2r(i._rl[1]-e/i._m)])}}function Bt(t,e,n,r,i){return t.append("path").attr("class","zoombox").style({fill:.2<e?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(n,r)).attr("d",i+"Z")}function Ut(t,e,n){return t.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(e,n)).attr("d","M0,0Z")}function Vt(t,e,n,r,i,a){t.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),c(t,e,i,a)}function c(t,e,n,r){n||(t.transition().style("fill",.2<r?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function Ht(t){dt.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function qt(t){l&&t.data&&t._context.showTips&&(yt.notifier(yt._(t,"Double-click to zoom back out"),"long"),l=!1)}function Gt(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,Nt)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function Yt(t,e,n,r,i){for(var a,o,s,l,u=!1,c={},f={},h=(i||{}).xaHash,d=(i||{}).yaHash,p=0;p<e.length;p++){var g=e[p];for(a in n)if(g[a]){for(s in g)i&&(h[s]||d[s])||("x"===s.charAt(0)?n:r)[s]||(c[s]=a);for(o in r)i&&(h[o]||d[o])||!g[o]||(u=!0)}for(o in r)if(g[o])for(l in g)i&&(h[l]||d[l])||("x"===l.charAt(0)?n:r)[l]||(f[l]=o)}u&&(yt.extendFlat(c,f),f={});var y={},m=[];for(s in c){var v=Et(t,s);m.push(v),y[v._id]=v}var b={},x=[];for(l in f){var _=Et(t,l);x.push(_),b[_._id]=_}return{xaHash:y,yaHash:b,xaxes:m,yaxes:x,xLinks:c,yLinks:f,isSubplotConstrained:u}}function Xt(t,e){var n;r?(n=void 0!==t.onwheel?"wheel":"mousewheel",t._onwheel&&t.removeEventListener(n,t._onwheel),t._onwheel=e,t.addEventListener(n,e,{passive:!1})):void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel?t.onmousewheel=e:t.isAddedWheelEvent||(t.isAddedWheelEvent=!0,t.addEventListener("wheel",e,{passive:!1}))}function Wt(t){var e,n=[];for(e in t)n.push(t[e]);return n}e.exports={makeDragBox:function(v,s,t,e,n,r,b,x){var _,w,k,M,l,u,a,o,c,f,h,T,A,S,d,E,O,C,P,L,p,g,y,m=v._fullLayout._zoomlayer,R=b+x==="nsew",j=1===(b+x).length;function N(){if(_=s.xaxis,w=s.yaxis,c=_._length,f=w._length,a=_._offset,o=w._offset,(k={})[_._id]=_,(M={})[w._id]=w,b&&x)for(var t=s.overlays,e=0;e<t.length;e++){var n=t[e].xaxis;k[n._id]=n;n=t[e].yaxis;M[n._id]=n}l=Wt(k),u=Wt(M),A=zt(l,x),S=zt(u,b),d=!S&&!A,T=Yt(v,v._fullLayout._axisMatchGroups,k,M);var r=(h=Yt(v,v._fullLayout._axisConstraintGroups,k,M,T)).isSubplotConstrained||T.isSubplotConstrained;E=x||r,O=b||r;r=v._fullLayout;C=r._has("scattergl"),P=r._has("splom"),L=r._has("svg")}N();var i,D,z=(i=S+A,z=v._fullLayout.dragmode,D=R,i?"nsew"!==i?i.toLowerCase()+"-resize":D?"":"pan"===z?"move":"crosshair":"pointer"),I=Dt(s,b+x+"drag",z,t,e,n,r);if(d&&!R)return I.onmousedown=null,I.style.pointerEvents="none",I;var F,B,U,V,H,q,G,Y,X,W,Z={element:I,gd:v,plotinfo:s};function K(){Z.plotinfo.selection=!1,Ct(v)}function Q(t,e){var n,r,i,a,o=Z.gd;0<=o._fullLayout._activeShapeIndex?o._fullLayout._deactivateShape(o):(a=o._fullLayout.clickmode,Ht(o),2!==t||j||function(){if(!v._transitioningWithDuration){var t=v._context.doubleClick,e=[];A&&(e=e.concat(l)),S&&(e=e.concat(u)),T.xaxes&&(e=e.concat(T.xaxes)),T.yaxes&&(e=e.concat(T.yaxes));var n,r,i,a={};if("reset+autosize"===t)for(t="autosize",r=0;r<e.length;r++)if((n=e[r])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){t="reset";break}if("autosize"===t)for(r=0;r<e.length;r++)(n=e[r]).fixedrange||(a[n._name+".autorange"]=!0);else if("reset"===t)for((A||h.isSubplotConstrained)&&(e=e.concat(h.xaxes)),S&&!h.isSubplotConstrained&&(e=e.concat(h.yaxes)),h.isSubplotConstrained&&(A?S||(e=e.concat(u)):e=e.concat(l)),r=0;r<e.length;r++)(n=e[r]).fixedrange||(n._rangeInitial?(i=n._rangeInitial,a[n._name+".range[0]"]=i[0],a[n._name+".range[1]"]=i[1]):a[n._name+".autorange"]=!0);v.emit("plotly_doubleclick",null),gt.call("_guiRelayout",v,a)}}(),R?(-1<a.indexOf("select")&&Pt(e,o,l,u,s.id,Z),-1<a.indexOf("event")&&bt.click(o,e,s.id)):1===t&&j&&(a="s"===b||"w"===x?0:1,r=(n=b?w:_)._name+".range["+a+"]",e=a,a=(t=n).range[e],e=Math.abs(a-t.range[1-e]),e="date"===t.type?a:"log"===t.type?(i=Math.ceil(Math.max(0,-Math.log(e)/Math.LN10))+3,dt.format("."+i+"g")(Math.pow(10,a))):(i=Math.floor(Math.log(Math.abs(a))/Math.LN10)-Math.floor(Math.log(e)/Math.LN10)+4,dt.format("."+String(i)+"g")(a)),i="left",a="middle",n.fixedrange||(b?(a="n"===b?"top":"bottom","right"===n.side&&(i="right")):"e"===x&&(i="right"),o._context.showAxisRangeEntryBoxes&&dt.select(I).call(mt.makeEditable,{gd:o,immediate:!0,background:o._fullLayout.paper_bgcolor,text:String(e),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:i,verticalAlign:a}).on("edit",function(t){t=n.d2r(t);void 0!==t&&gt.call("_guiRelayout",o,r,t)}))))}function $(t,e){if(v._transitioningWithDuration)return!1;var n,r,i=Math.max(0,Math.min(c,g*t+F)),a=Math.max(0,Math.min(f,y*e+B)),t=Math.abs(i-F),e=Math.abs(a-B);function o(){G="",U.r=U.l,U.t=U.b,X.attr("d","M0,0Z")}U.l=Math.min(F,i),U.r=Math.max(F,i),U.t=Math.min(B,a),U.b=Math.max(B,a),h.isSubplotConstrained?Nt<t||Nt<e?(G="xy",e/f<t/c?(e=t*f/c,a<B?U.t=B-e:U.b=B+e):(t=e*c/f,i<F?U.l=F-t:U.r=F+t),X.attr("d",Gt(U))):o():T.isSubplotConstrained?Nt<t||Nt<e?(G="xy",r=Math.min(U.l/c,(f-U.b)/f),n=Math.max(U.r/c,(f-U.t)/f),U.l=r*c,U.r=n*c,U.b=(1-r)*f,U.t=(1-n)*f,X.attr("d",Gt(U))):o():!S||e<Math.min(Math.max(.6*t,jt),Nt)?t<jt||!A?o():(U.t=0,U.b=f,G="x",X.attr("d",(r=B,"M"+((n=U).l-.5)+","+(r-Nt-.5)+"h-3v"+(2*Nt+1)+"h3ZM"+(n.r+.5)+","+(r-Nt-.5)+"h3v"+(2*Nt+1)+"h-3Z"))):!A||t<Math.min(.6*e,Nt)?(U.l=0,U.r=c,G="y",X.attr("d","M"+((t=F)-Nt-.5)+","+((e=U).t-.5)+"v-3h"+(2*Nt+1)+"v3ZM"+(t-Nt-.5)+","+(e.b+.5)+"v3h"+(2*Nt+1)+"v-3Z")):(G="xy",X.attr("d",Gt(U))),U.w=U.r-U.l,U.h=U.b-U.t,G&&(W=!0),v._dragged=W,Vt(Y,X,U,H,q,V),J(),v.emit("plotly_relayouting",p),q=!0}function J(){p={},"xy"!==G&&"x"!==G||(It(l,U.l/c,U.r/c,p,h.xaxes),ot("x",p)),"xy"!==G&&"y"!==G||(It(u,(f-U.b)/f,(f-U.t)/f,p,h.yaxes),ot("y",p))}function tt(){J(),Ht(v),lt(),qt(v)}Z.prepFn=function(t,e,n){var r=Z.dragmode,i=v._fullLayout.dragmode;i!==r&&(Z.dragmode=i),N(),g=v._fullLayout._invScaleX,y=v._fullLayout._invScaleY,d||(R?t.shiftKey?"pan"===i?i="zoom":wt(i)||(i="pan"):t.ctrlKey&&(i="pan"):i="pan"),kt(i)?Z.minDrag=1:Z.minDrag=void 0,wt(i)?(Z.xaxes=l,Z.yaxes=u,Ot(t,e,n,Z,i)):(Z.clickFn=Q,wt(r)&&K(),d||("zoom"===i?(Z.moveFn=$,Z.doneFn=tt,Z.minDrag=1,r=e,e=n,n=I.getBoundingClientRect(),F=r-n.left,B=e-n.top,v._fullLayout._calcInverseTransform(v),n=yt.apply3DTransform(v._fullLayout._invTransform)(F,B),F=n[0],B=n[1],U={l:F,r:F,w:0,t:B,b:B,h:0},V=v._hmpixcount?v._hmlumcount/v._hmpixcount:pt(v._fullLayout.plot_bgcolor).getLuminance(),W=q=!(G="xy"),Y=Bt(m,V,a,o,H="M0,0H"+c+"V"+f+"H0V0"),X=Ut(m,a,o)):"pan"===i&&(Z.moveFn=at,Z.doneFn=lt))),v._fullLayout._redrag=function(){var t,e=v._dragdata;e&&e.element===I&&(t=v._fullLayout.dragmode,wt(t)||(N(),ut([0,0,c,f]),Z.moveFn(e.dx,e.dy)))}},_t.init(Z);var et=[0,0,c,f],nt=null,rt=Rt.REDRAWDELAY,it=s.mainplot?v._fullLayout._plots[s.mainplot]:s;function at(t,e){if(t*=g,e*=y,!v._transitioningWithDuration){if(v._fullLayout._replotting=!0,"ew"===A||"ns"===S){var n=A?-t:0,r=S?-e:0;return T.isSubplotConstrained&&(A&&S&&(n=-(t=(a=(t/c-e/f)/2)*c),r=-(e=-a*f)),S?n=-r*c/f:r=-n*f/c),A&&(Ft(l,t),ot("x")),S&&(Ft(u,e),ot("y")),ut([n,r,c,f]),st(),void v.emit("plotly_relayouting",p)}var i,a="w"===A==("n"===S)?1:-1;if(A&&S&&(h.isSubplotConstrained||T.isSubplotConstrained)&&(t=(o=(t/c+a*e/f)/2)*c,e=a*o*f),"w"===A?t=s(l,0,t):"e"===A?t=s(l,1,-t):A||(t=0),"n"===S?e=s(u,1,e):"s"===S?e=s(u,0,-e):S||(e=0),n="w"===A?t:0,r="n"===S?e:0,h.isSubplotConstrained&&!T.isSubplotConstrained||T.isSubplotConstrained&&A&&S&&0<a){if(T.isSubplotConstrained||!A&&1===S.length){for(i=0;i<l.length;i++)l[i].range=l[i]._r.slice(),Lt(l[i],1-e/f);n=(t=e*c/f)/2}if(T.isSubplotConstrained||!S&&1===A.length){for(i=0;i<u.length;i++)u[i].range=u[i]._r.slice(),Lt(u[i],1-t/c);r=(e=t*f/c)/2}}T.isSubplotConstrained&&S||ot("x"),T.isSubplotConstrained&&A||ot("y");var o=c-t,a=f-e;!T.isSubplotConstrained||A&&S||(A?(r=n?0:t*f/c,a=o*f/c):(n=r?0:e*c/f,o=a*c/f)),ut([n,r,o,a]),st(),v.emit("plotly_relayouting",p)}function s(t,e,n){for(var r,i,a=1-e,o=0;o<t.length;o++){var s,l=t[o];l.fixedrange||(i=(r=l)._rl[a]+(l._rl[e]-l._rl[a])/(1-(0<=(s=n/l._length)?Math.min(s,.9):1/(1/Math.max(s,-.3)+3.222))),!1!==(s=l.l2r(i))&&void 0!==s&&(l.range[e]=s))}return r._length*(r._rl[e]-i)/(r._rl[e]-r._rl[a])}}function ot(t,e){for(var n=T.isSubplotConstrained?{x:u,y:l}[t]:T[t+"axes"],r=T.isSubplotConstrained?{x:l,y:u}[t]:[],i=0;i<n.length;i++){var a=n[i],o=a._id,o=T.xLinks[o]||T.yLinks[o],o=r[0]||k[o]||M[o];o&&(e?(e[a._name+".range[0]"]=e[o._name+".range[0]"],e[a._name+".range[1]"]=e[o._name+".range[1]"]):a.range=o.range.slice())}}function st(){var e,n=[];function t(t){for(e=0;e<t.length;e++)t[e].fixedrange||n.push(t[e]._id)}for(E&&(t(l),t(h.xaxes),t(T.xaxes)),O&&(t(u),t(h.yaxes),t(T.yaxes)),p={},e=0;e<n.length;e++){var r=n[e],r=Et(v,r);xt.drawOne(v,r,{skipTitle:!0}),p[r._name+".range[0]"]=r.range[0],p[r._name+".range[1]"]=r.range[1]}xt.redrawComponents(v,n)}function lt(){ut([0,0,c,f]),yt.syncOrAsync([St.previousPromises,function(){v._fullLayout._replotting=!1,gt.call("_guiRelayout",v,p)}],v)}function ut(t){var e=v._fullLayout,n=e._plots,r=e._subplots.cartesian;if(P&&gt.subplotsRegistry.splom.drag(v),C)for(f=0;f<r.length;f++){var i,a,o,s=(o=n[r[f]]).xaxis,l=o.yaxis;o._scene&&(i=yt.simpleMap(s.range,s.r2l),a=yt.simpleMap(l.range,l.r2l),o._scene.update({range:[i[0],a[0],i[1],a[1]]}))}if((P||C)&&(Tt(v),At(v)),L)for(var u=t[2]/_._length,c=t[3]/w._length,f=0;f<r.length;f++){s=(o=n[r[f]]).xaxis,l=o.yaxis;var h,d,p=(E||T.isSubplotConstrained)&&!s.fixedrange&&k[s._id],g=(O||T.isSubplotConstrained)&&!l.fixedrange&&M[l._id],y=p?(h=u,x||T.isSubplotConstrained?t[0]:ht(s,h)):T.xaHash[s._id]?(h=u,t[0]*s._length/_._length):T.yaHash[s._id]?(h=c,"ns"===S?-t[1]*s._length/w._length:ht(s,h,{n:"top",s:"bottom"}[S])):ft(s,h=ct(s,u,c)),m=g?(d=c,b||T.isSubplotConstrained?t[1]:ht(l,d)):T.yaHash[l._id]?(d=c,t[1]*l._length/w._length):T.xaHash[l._id]?(d=u,"ew"===A?-t[0]*l._length/_._length:ht(l,d,{e:"right",w:"left"}[A])):ft(l,d=ct(l,u,c));(h||d)&&(h=h||1,d=d||1,p=s._offset-y/h,g=l._offset-m/d,o.clipRect.call(vt.setTranslate,y,m).call(vt.setScale,h,d),o.plot.call(vt.setTranslate,p,g).call(vt.setScale,1/h,1/d),h===o.xScaleFactor&&d===o.yScaleFactor||(vt.setPointGroupScale(o.zoomScalePts,h,d),vt.setTextPointsScale(o.zoomScaleTxt,h,d)),vt.hideOutsideRangePoints(o.clipOnAxisFalseTraces,o),o.xScaleFactor=h,o.yScaleFactor=d)}}function ct(t,e,n){return t.fixedrange?0:E&&h.xaHash[t._id]?e:O&&(h.isSubplotConstrained?h.xaHash:h.yaHash)[t._id]?n:0}function ft(t,e){return e?(t.range=t._r.slice(),Lt(t,e),ht(t,e)):0}function ht(t,e,n){return t._length*(1-e)*Mt[n||t.constraintoward||"middle"]}return b.length*x.length!=1&&Xt(I,function(t){if(v._context._scrollZoom.cartesian||v._fullLayout._enablescrollzoom){if(K(),v._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();N(),clearTimeout(nt);var e=-t.deltaY;if(isFinite(e)||(e=t.wheelDelta/10),isFinite(e)){var n,r=Math.exp(-Math.min(Math.max(e,-20),20)/200),e=it.draglayer.select(".nsewdrag").node().getBoundingClientRect(),i=(t.clientX-e.left)/e.width,a=(e.bottom-t.clientY)/e.height;if(E){for(x||(i=.5),n=0;n<l.length;n++)o(l[n],i,r);ot("x"),et[2]*=r,et[0]+=et[2]*i*(1/r-1)}if(O){for(b||(a=.5),n=0;n<u.length;n++)o(u[n],a,r);ot("y"),et[3]*=r,et[1]+=et[3]*(1-a)*(1/r-1)}ut(et),st(),v.emit("plotly_relayouting",p),nt=setTimeout(function(){et=[0,0,c,f],lt()},rt),t.preventDefault()}else yt.log("Did not find wheel motion attributes: ",t)}function o(e,t,n){var r,i;e.fixedrange||(r=yt.simpleMap(e.range,e.r2l),i=r[0]+(r[1]-r[0])*t,e.range=r.map(function(t){return e.l2r(i+(t-i)*n)}))}}),I},makeDragger:u,makeRectDragger:Dt,makeZoombox:Bt,makeCorners:Ut,updateZoombox:Vt,xyCorners:Gt,transitionZoombox:c,removeZoombox:Ht,showDoubleClickNotifier:qt,attachWheelEventHandler:Xt}},{"../../components/color":294,"../../components/dragelement":313,"../../components/dragelement/helpers":312,"../../components/drawing":316,"../../components/fx":334,"../../constants/alignment":396,"../../lib":424,"../../lib/clear_gl_canvases":411,"../../lib/setcursor":443,"../../lib/svg_text_utils":447,"../../plot_api/subroutines":461,"../../registry":525,"../plots":516,"./axes":471,"./axis_ids":474,"./constants":477,"./scale_zoom":489,"./select":490,d3:277,"has-passive-events":196,tinycolor2:651}],480:[function(t,e,n){"use strict";var r=t("d3"),l=t("../../components/fx"),u=t("../../components/dragelement"),i=t("../../lib/setcursor"),c=t("./dragbox").makeDragBox,f=t("./constants").DRAGGERSIZE;n.initInteractions=function(o){var t,s=o._fullLayout;o._context.staticPlot?r.select(o).selectAll(".drag").remove():(s._has("cartesian")||s._has("splom"))&&(Object.keys(s._plots||{}).sort(function(t,e){if((s._plots[t].mainplot&&!0)!==(s._plots[e].mainplot&&!0))return s._plots[t].mainplot?1:-1;t=t.split("y"),e=e.split("y");return t[0]===e[0]?Number(t[1]||1)-Number(e[1]||1):Number(t[0]||1)-Number(e[0]||1)}).forEach(function(e){var n,t,r=s._plots[e],i=r.xaxis,a=r.yaxis;r.mainplot||((n=c(o,r,i._offset,a._offset,i._length,a._length,"ns","ew")).onmousemove=function(t){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===e&&o._fullLayout._plots[e]&&l.hover(o,t,e)},l.hover(o,t,e),o._fullLayout._lasthover=n,o._fullLayout._hoversubplot=e},n.onmouseout=function(t){o._dragging||(o._fullLayout._hoversubplot=null,u.unhover(o,t))},o._context.showAxisDragHandles&&(c(o,r,i._offset-f,a._offset-f,f,f,"n","w"),c(o,r,i._offset+i._length,a._offset-f,f,f,"n","e"),c(o,r,i._offset-f,a._offset+a._length,f,f,"s","w"),c(o,r,i._offset+i._length,a._offset+a._length,f,f,"s","e"))),o._context.showAxisDragHandles&&(e===i._mainSubplot&&(t=i._mainLinePosition,"top"===i.side&&(t-=f),c(o,r,i._offset+.1*i._length,t,.8*i._length,f,"","ew"),c(o,r,i._offset,t,.1*i._length,f,"","w"),c(o,r,i._offset+.9*i._length,t,.1*i._length,f,"","e")),e===a._mainSubplot&&(i=a._mainLinePosition,"right"!==a.side&&(i-=f),c(o,r,i,a._offset+.1*a._length,f,.8*a._length,"ns",""),c(o,r,i,a._offset+.9*a._length,f,.1*a._length,"s",""),c(o,r,i,a._offset,f,.1*a._length,"n","")))}),(t=s._hoverlayer.node()).onmousemove=function(t){t.target=o._fullLayout._lasthover,l.hover(o,t,s._hoversubplot)},t.onclick=function(t){t.target=o._fullLayout._lasthover,l.click(o,t)},t.onmousedown=function(t){o._fullLayout._lasthover.onmousedown(t)},n.updateFx(o))},n.updateFx=function(t){var e=t._fullLayout,t="pan"===e.dragmode?"move":"crosshair";i(e._draggers,t)}},{"../../components/dragelement":313,"../../components/fx":334,"../../lib/setcursor":443,"./constants":477,"./dragbox":479,d3:277}],481:[function(t,e,n){"use strict";e.exports={clearOutlineControllers:function(t){(t=t._fullLayout._zoomlayer)&&t.selectAll(".outline-controllers").remove()},clearSelect:function(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),t._fullLayout._drawing=!1}}},{}],482:[function(t,e,n){"use strict";var r=t("../../lib").strTranslate;function i(t,e){switch(t.type){case"log":return t.p2d(e);case"date":return t.p2r(e,0,t.calendar);default:return t.p2r(e)}}e.exports={p2r:i,r2p:function(t,e){switch(t.type){case"log":return t.d2p(e);case"date":return t.r2p(e,0,t.calendar);default:return t.r2p(e)}},axValue:function(e){var n="y"===e._id.charAt(0)?1:0;return function(t){return i(e,t[n])}},getTransform:function(t){return r(t.xaxis._offset,t.yaxis._offset)}}},{"../../lib":424}],483:[function(t,e,n){"use strict";var y=t("../../registry"),m=t("../../lib"),v=t("./axis_ids");e.exports=function(g){return function(t,e){var n=t[g];if(Array.isArray(n))for(var r=y.subplotsRegistry.cartesian,i=r.idRegex,t=e._subplots,a=t.xaxis,o=t.yaxis,s=t.cartesian,l=e._has("cartesian")||e._has("gl2d"),u=0;u<n.length;u++){var c,f,h,d,p=n[u];m.isPlainObject(p)&&(c=v.cleanId(p.xref,"x",!1),f=v.cleanId(p.yref,"y",!1),h=i.x.test(c),d=i.y.test(f),(h||d)&&(l||m.pushUnique(e._basePlotModules,r),p=!1,h&&-1===a.indexOf(c)&&(a.push(c),p=!0),d&&-1===o.indexOf(f)&&(o.push(f),p=!0),p&&h&&d&&s.push(c+f)))}}}},{"../../lib":424,"../../registry":525,"./axis_ids":474}],484:[function(t,e,n){"use strict";var v=t("d3"),b=t("../../registry"),d=t("../../lib"),r=t("../plots"),x=t("../../components/drawing"),_=t("../get_data").getModuleCalcData,y=t("./axis_ids"),w=t("./constants"),i=t("../../constants/xmlns_namespaces"),c=d.ensureSingle;function f(t,e,n){return d.ensureSingle(t,e,n,function(t){t.datum(n)})}function g(r,i,t,a,o){for(var e,n=w.traceLayerClasses,s=r._fullLayout,l=s._modules,u=[],c=[],f=0;f<l.length;f++){var h,d,p,g=(e=l[f]).name,y=b.modules[g].categories;y.svg&&(h=e.layerName||g+"layer",d=e.plot,p=(g=_(t,d))[0],t=g[1],p.length&&u.push({i:n.indexOf(h),className:h,plotMethod:d,cdModule:p}),y.zoomScale&&c.push("."+h))}u.sort(function(t,e){return t.i-e.i});var m=i.plot.selectAll("g.mlayer").data(u,function(t){return t.className});m.enter().append("g").attr("class",function(t){return t.className}).classed("mlayer",!0).classed("rangeplot",i.isRangePlot),m.exit().remove(),m.order(),m.each(function(t){var e=v.select(this),n=t.className;t.plotMethod(r,i,t.cdModule,e,a,o),-1===w.clipOnAxisFalseQuery.indexOf("."+n)&&x.setClipUrl(e,i.layerClipId,r)}),s._has("scattergl")&&(e=b.getModule("scattergl"),p=_(t,e)[0],e.plot(r,i,p)),r._context.staticPlot||(i._hasClipOnAxisFalse&&(i.clipOnAxisFalseTraces=i.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),c.length&&(s=i.plot.selectAll(c.join(",")).selectAll(".trace"),i.zoomScalePts=s.selectAll("path.point"),i.zoomScaleTxt=s.selectAll(".textpoint")))}function a(t,e){var n,r,i,a=e.plotgroup,o=e.id,s=w.layerValue2layerClass[e.xaxis.layer],l=w.layerValue2layerClass[e.yaxis.layer],u=t._fullLayout._hasOnlyLargeSploms;e.mainplot?(r=(n=e.mainplotinfo).plotgroup,t=o+"-x",i=o+"-y",e.gridlayer=n.gridlayer,e.zerolinelayer=n.zerolinelayer,c(n.overlinesBelow,"path",t),c(n.overlinesBelow,"path",i),c(n.overaxesBelow,"g",t),c(n.overaxesBelow,"g",i),e.plot=c(n.overplot,"g",o),c(n.overlinesAbove,"path",t),c(n.overlinesAbove,"path",i),c(n.overaxesAbove,"g",t),c(n.overaxesAbove,"g",i),e.xlines=r.select(".overlines-"+s).select("."+t),e.ylines=r.select(".overlines-"+l).select("."+i),e.xaxislayer=r.select(".overaxes-"+s).select("."+t),e.yaxislayer=r.select(".overaxes-"+l).select("."+i)):u?(e.xlines=c(a,"path","xlines-above"),e.ylines=c(a,"path","ylines-above"),e.xaxislayer=c(a,"g","xaxislayer-above"),e.yaxislayer=c(a,"g","yaxislayer-above")):(i=c(a,"g","layer-subplot"),e.shapelayer=c(i,"g","shapelayer"),e.imagelayer=c(i,"g","imagelayer"),e.gridlayer=c(a,"g","gridlayer"),e.zerolinelayer=c(a,"g","zerolinelayer"),c(a,"path","xlines-below"),c(a,"path","ylines-below"),e.overlinesBelow=c(a,"g","overlines-below"),c(a,"g","xaxislayer-below"),c(a,"g","yaxislayer-below"),e.overaxesBelow=c(a,"g","overaxes-below"),e.plot=c(a,"g","plot"),e.overplot=c(a,"g","overplot"),e.xlines=c(a,"path","xlines-above"),e.ylines=c(a,"path","ylines-above"),e.overlinesAbove=c(a,"g","overlines-above"),c(a,"g","xaxislayer-above"),c(a,"g","yaxislayer-above"),e.overaxesAbove=c(a,"g","overaxes-above"),e.xlines=a.select(".xlines-"+s),e.ylines=a.select(".ylines-"+l),e.xaxislayer=a.select(".xaxislayer-"+s),e.yaxislayer=a.select(".yaxislayer-"+l)),u||(f(e.gridlayer,"g",e.xaxis._id),f(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").map(function(t){return t[0]}).sort(y.idSort)),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function m(t,e){if(t){var n,r={};for(n in t.each(function(t){t=t[0];v.select(this).remove(),k(t,e),r[t]=!0}),e._plots)for(var i=e._plots[n].overlays||[],a=0;a<i.length;a++){var o=i[a];r[o.id]&&o.plot.selectAll(".trace").remove()}}}function k(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=w.idRegex,n.attrRegex=w.attrRegex,n.attributes=t("./attributes"),n.layoutAttributes=t("./layout_attributes"),n.supplyLayoutDefaults=t("./layout_defaults"),n.transitionAxes=t("./transition_axes"),n.finalizeSubplots=function(t,e){for(var n,r,e=e._subplots,i=e.xaxis,a=e.yaxis,o=e.cartesian,s=o.concat(e.gl2d||[]),l={},u={},c=0;c<s.length;c++){var f=s[c].split("y");u["y"+f[l[f[0]]=1]]=1}for(c=0;c<i.length;c++)l[n=i[c]]||(r=(t[y.id2name(n)]||{}).anchor,w.idRegex.y.test(r)||(r="y"),o.push(n+r),s.push(n+r),u[r]||(u[r]=1,d.pushUnique(a,r)));for(c=0;c<a.length;c++)u[r=a[c]]||(n=(t[y.id2name(r)]||{}).anchor,w.idRegex.x.test(n)||(n="x"),o.push(n+r),s.push(n+r),l[n]||(l[n]=1,d.pushUnique(i,n)));if(!s.length){for(var h in r=n="",t)w.attrRegex.test(h)&&("x"===h.charAt(0)?(!n||+h.substr(5)<+n.substr(5))&&(n=h):(!r||+h.substr(5)<+r.substr(5))&&(r=h));n=n?y.name2id(n):"x",r=r?y.name2id(r):"y",i.push(n),a.push(r),o.push(n+r)}},n.plot=function(t,e,n,r){var i,a=t._fullLayout,o=a._subplots.cartesian,s=t.calcdata;if(!Array.isArray(e))for(e=[],i=0;i<s.length;i++)e.push(i);for(i=0;i<o.length;i++){for(var l,u=o[i],c=a._plots[u],f=[],h=0;h<s.length;h++){var d=s[h],p=d[0].trace;p.xaxis+p.yaxis===u&&(-1===e.indexOf(p.index)&&!p.carpet||(l&&l[0].trace.xaxis+l[0].trace.yaxis===u&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===f.indexOf(l)&&f.push(l),f.push(d)),l=d)}g(t,c,f,n,r)}},n.clean=function(t,e,n,r){var i,a,o=r._plots||{},s=e._plots||{},l=r._subplots||{};if(r._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(a in o)(i=o[a]).plotgroup&&i.plotgroup.remove();var u=r._has&&r._has("gl"),c=e._has&&e._has("gl");if(u&&!c)for(a in o)(i=o[a])._scene&&i._scene.destroy();if(l.xaxis&&l.yaxis)for(var f=y.listIds({_fullLayout:r}),h=0;h<f.length;h++){var d=f[h];e[y.id2name(d)]||r._infolayer.selectAll(".g-"+d+"title").remove()}u=r._has&&r._has("cartesian"),c=e._has&&e._has("cartesian");if(u&&!c)m(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(l.cartesian)for(h=0;h<l.cartesian.length;h++){var p,g=l.cartesian[h];s[g]||(p="."+g+",."+g+"-x,."+g+"-y",r._cartesianlayer.selectAll(p).remove(),k(g,r))}},n.drawFramework=function(n){var r=n._fullLayout,t=function(t){var e,n,r,i,a,o,s=t._fullLayout,l=s._subplots.cartesian,u=l.length,c=[],f=[];for(e=0;e<u;e++){r=l[e],i=s._plots[r],a=i.xaxis,o=i.yaxis;var h=a._mainAxis,d=o._mainAxis,h=h._id+d._id,d=s._plots[h];i.overlays=[],h!==r&&d?(i.mainplot=h,i.mainplotinfo=d,f.push(r)):(i.mainplot=void 0,i.mainplotinfo=void 0,c.push(r))}for(e=0;e<f.length;e++)r=f[e],(i=s._plots[r]).mainplotinfo.overlays.push(i);var p=c.concat(f),g=new Array(u);for(e=0;e<u;e++){r=p[e],i=s._plots[r],a=i.xaxis,o=i.yaxis;var y=[r,a.layer,o.layer,a.overlaying||"",o.overlaying||""];for(n=0;n<i.overlays.length;n++)y.push(i.overlays[n].id);g[e]=y}return g}(n),t=r._cartesianlayer.selectAll(".subplot").data(t,String);t.enter().append("g").attr("class",function(t){return"subplot "+t[0]}),t.order(),t.exit().call(m,r),t.each(function(t){var e=t[0],t=r._plots[e];t.plotgroup=v.select(this),a(n,t),t.draglayer=c(r._draggers,"g",e)})},n.rangePlot=function(t,e,n){a(t,e),g(t,e,n),r.style(t)},n.toSVG=function(t){var e=t._fullLayout._glimages,n=v.select(t).selectAll(".svg-container");n.filter(function(t,e){return e===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:i.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":316,"../../constants/xmlns_namespaces":403,"../../lib":424,"../../registry":525,"../get_data":501,"../plots":516,"./attributes":469,"./axis_ids":474,"./constants":477,"./graph_interact":480,"./layout_attributes":485,"./layout_defaults":486,"./transition_axes":495,d3:277}],485:[function(t,e,n){"use strict";var r=t("../font_attributes"),i=t("../../components/color/attributes"),a=t("../../components/drawing/attributes").dash,o=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray,l=(t("../../constants/docs").FORMAT_LINK,t("../../constants/docs").DATE_FORMAT_LINK,t("../../constants/numerical").ONEDAY),u=t("./constants"),c=u.HOUR_PATTERN,t=u.WEEKDAY_PATTERN;e.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[t,c,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:l},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:i.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":293,"../../components/drawing/attributes":315,"../../constants/docs":398,"../../constants/numerical":402,"../../lib/extend":417,"../../plot_api/plot_template":460,"../font_attributes":499,"./constants":477}],486:[function(t,e,n){"use strict";var $=t("../../lib"),J=t("../../components/color"),tt=t("../../components/fx/helpers").isUnifiedHover,et=t("../../components/fx/hovermode_defaults"),nt=t("../../plot_api/plot_template"),rt=t("../layout_attributes"),it=t("./layout_attributes"),at=t("./type_defaults"),ot=t("./axis_defaults"),st=t("./constraints"),lt=t("./position_defaults"),ut=t("./axis_ids"),ct=ut.id2name,ft=ut.name2id,ht=t("./constants").AX_ID_PATTERN,t=t("../../registry"),dt=t.traceIs,pt=t.getComponentMethod;function gt(t,e,n){Array.isArray(t[e])?t[e].push(n):t[e]=[n]}e.exports=function(o,t,e){for(var n,r=t.autotypenumbers,i={},a={},s={},l={},u={},c={},f={},h={},d={},p={},g=0;g<e.length;g++){var y,m,v=e[g];if(dt(v,"cartesian")||dt(v,"gl2d")){if(v.xaxis)y=ct(v.xaxis),gt(i,y,v);else if(v.xaxes)for(n=0;n<v.xaxes.length;n++)gt(i,ct(v.xaxes[n]),v);if(v.yaxis)m=ct(v.yaxis),gt(i,m,v);else if(v.yaxes)for(n=0;n<v.yaxes.length;n++)gt(i,ct(v.yaxes[n]),v);"funnel"===v.type?"h"===v.orientation?(y&&(a[y]=!0),m&&(f[m]=!0)):m&&(s[m]=!0):"image"===v.type?(m&&(h[m]=!0),y&&(h[y]=!0)):(m&&(u[m]=!0,c[m]=!0),dt(v,"carpet")&&("carpet"!==v.type||v._cheater)||y&&(l[y]=!0)),"carpet"===v.type&&v._cheater&&y&&(a[y]=!0),dt(v,"2dMap")&&(d[y]=!0,d[m]=!0),dt(v,"oriented")&&(p["h"===v.orientation?m:y]=!0)}}var b=t._subplots,x=b.xaxis,_=b.yaxis,w=$.simpleMap(x,ct),k=$.simpleMap(_,ct),M=w.concat(k),b=J.background;x.length&&_.length&&(b=$.coerce(o,t,rt,"plot_bgcolor"));var T,A,S,E,O,C=J.combine(b,t.paper_bgcolor);function P(){var t=i[T]||[];O._traceIndices=t.map(function(t){return t._expandedIndex}),O._annIndices=[],O._shapeIndices=[],O._imgIndices=[],O._subplotsWith=[],O._counterAxes=[],O._name=O._attr=T,O._id=A}function L(t,e){return $.coerce(E,O,it,t,e)}function R(t,e){return $.coerce2(E,O,it,t,e)}function j(t,e){for(var n="x"===t?w:k,r=[],i=0;i<n.length;i++){var a=n[i];a===e||(o[a]||{}).overlaying||r.push(ft(a))}return r}var N={x:_,y:x},D=N.x.concat(N.y),z={},I=[];function F(){var t=E.matches;ht.test(t)&&-1===D.indexOf(t)&&(z[t]=E.type,I=Object.keys(z))}var B=et(o,t,e),U=tt(B);for(g=0;g<M.length;g++){T=M[g],A=ft(T),S=T.charAt(0),$.isPlainObject(o[T])||(o[T]={}),E=o[T],O=nt.newContainer(t,T,S+"axis"),P();var V="x"===S&&!l[T]&&a[T]||"y"===S&&!u[T]&&s[T],H="y"===S&&(!c[T]&&f[T]||h[T]),q={letter:S,font:t.font,outerTicks:d[T],showGrid:!p[T],data:i[T]||[],bgColor:C,calendar:t.calendar,automargin:!0,visibleDflt:V,reverseDflt:H,autotypenumbersDflt:r,splomStash:((t._splomAxes||{})[S]||{})[A]};L("uirevision",t.uirevision),at(E,O,L,q),ot(E,O,L,q,t);var G=U&&S===B.charAt(0),Y=R("spikecolor",U?O.color:void 0),X=R("spikethickness",U?1.5:void 0),V=R("spikedash",U?"dot":void 0),H=R("spikemode",U?"across":void 0),q=R("spikesnap",U?"hovered data":void 0);L("showspikes",!!(G||Y||X||V||H||q))||(delete O.spikecolor,delete O.spikethickness,delete O.spikedash,delete O.spikemode,delete O.spikesnap),lt(E,O,L,{letter:S,counterAxes:N[S],overlayableAxes:j(S,T),grid:t.grid}),L("title.standoff"),F(),O._input=E}for(g=0;g<I.length;){A=I[g++],S=(T=ct(A)).charAt(0),$.isPlainObject(o[T])||(o[T]={}),E=o[T],O=nt.newContainer(t,T,S+"axis"),P();var W={letter:S,font:t.font,outerTicks:d[T],showGrid:!p[T],data:[],bgColor:C,calendar:t.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:r,splomStash:((t._splomAxes||{})[S]||{})[A]};L("uirevision",t.uirevision),O.type=z[A]||"linear",ot(E,O,L,W,t),lt(E,O,L,{letter:S,counterAxes:N[S],overlayableAxes:j(S,T),grid:t.grid}),L("fixedrange"),F(),O._input=E}var Z=pt("rangeslider","handleDefaults"),K=pt("rangeselector","handleDefaults");for(g=0;g<w.length;g++)T=w[g],E=o[T],O=t[T],Z(o,t,T),"date"===O.type&&K(E,O,t,k,O.calendar),L("fixedrange");for(g=0;g<k.length;g++){T=k[g],E=o[T],O=t[T];var Q=t[ct(O.anchor)];L("fixedrange",pt("rangeslider","isVisible")(Q))}st.handleDefaults(o,t,{axIds:D.concat(I).sort(ut.idSort),axHasImage:h})}},{"../../components/color":294,"../../components/fx/helpers":330,"../../components/fx/hovermode_defaults":333,"../../lib":424,"../../plot_api/plot_template":460,"../../registry":525,"../layout_attributes":514,"./axis_defaults":473,"./axis_ids":474,"./constants":477,"./constraints":478,"./layout_attributes":485,"./position_defaults":488,"./type_defaults":496}],487:[function(t,e,n){"use strict";var l=t("tinycolor2").mix,u=t("../../components/color/attributes").lightFraction,c=t("../../lib");e.exports=function(n,r,t,i){var e=(i=i||{}).dfltColor;function a(t,e){return c.coerce2(n,r,i.attributes,t,e)}var o=a("linecolor",e),s=a("linewidth");t("showline",i.showLine||!!o||!!s)||(delete r.linecolor,delete r.linewidth);o=a("gridcolor",l(e,i.bgColor,i.blend||u).toRgbString()),s=a("gridwidth");t("showgrid",i.showGrid||!!o||!!s)||(delete r.gridcolor,delete r.gridwidth),i.noZeroLine||(s=a("zerolinecolor",e),e=a("zerolinewidth"),t("zeroline",i.showGrid||!!s||!!e)||(delete r.zerolinecolor,delete r.zerolinewidth))}},{"../../components/color/attributes":293,"../../lib":424,tinycolor2:651}],488:[function(t,e,n){"use strict";var f=t("fast-isnumeric"),h=t("../../lib");e.exports=function(t,e,n,r){var i,a,o,s=r.counterAxes||[],l=r.overlayableAxes||[],u=r.letter,r=r.grid;r&&(a=r._domains[u][r._axisMap[e._id]],i=r._anchors[e._id],a&&(c=r[u+"side"].split(" ")[0],o=r.domain[u]["right"===c||"top"===c?1:0])),a=a||[0,1],i=i||!f(t.position)&&s[0]||"free",c=c||("x"===u?"bottom":"left"),o=o||0,"free"===h.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:i}},"anchor")&&n("position",o),h.coerce(t,e,{side:{valType:"enumerated",values:"x"===u?["bottom","top"]:["left","right"],dflt:c}},"side");var c=!1;return l.length&&(c=h.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying")),c||((c=n("domain",a))[0]>c[1]-1/4096&&(e.domain=a),h.noneOrAll(t.domain,e.domain,a)),n("layer"),e}},{"../../lib":424,"fast-isnumeric":99}],489:[function(t,e,n){"use strict";var i=t("../../constants/alignment").FROM_BL;e.exports=function(t,e,n){void 0===n&&(n=i[t.constraintoward||"center"]);var r=[t.r2l(t.range[0]),t.r2l(t.range[1])],n=r[0]+(r[1]-r[0])*n;t.range=t._input.range=[t.l2r(n+(r[0]-n)*e),t.l2r(n+(r[1]-n)*e)],t.setScale()}},{"../../constants/alignment":396}],490:[function(t,e,n){"use strict";var V=t("polybooljs"),p=t("../../registry"),H=t("../../components/drawing").dashStyle,q=t("../../components/color"),G=t("../../components/fx"),a=t("../../components/fx/helpers").makeEventData,r=t("../../components/dragelement/helpers"),Y=r.freeMode,X=r.rectMode,W=r.drawMode,Z=r.openMode,K=r.selectMode,Q=t("../../components/shapes/draw_newshape/display_outlines"),$=t("../../components/shapes/draw_newshape/helpers").handleEllipse,i=t("../../components/shapes/draw_newshape/newshapes"),J=t("../../lib"),l=t("../../lib/polygon"),tt=t("../../lib/throttle"),h=t("./axis_ids").getFromId,g=t("../../lib/clear_gl_canvases"),y=t("../../plot_api/subroutines").redrawReglTraces,et=t("./constants"),nt=et.MINSELECT,rt=l.filter,it=l.tester,s=t("./handle_outline").clearSelect,t=t("./helpers"),at=t.p2r,ot=t.axValue,st=t.getTransform;function lt(t,e,n,r,i,a,o){var s,l,u,c,f=e._hoverdata,h=-1<e._fullLayout.clickmode.indexOf("event"),d=[];if((c=f)&&Array.isArray(c)&&!0!==c[0].hoverOnBox){ct(t,e,a);var i=function(t,e){var n,r,i=t[0],a=-1,o=[];for(r=0;r<e.length;r++)if(n=e[r],i.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(f,s=ht(e,n,r,i));if(0<i.pointNumbers.length?function(t,e){var n,r,i,a,o=[];for(a=0;a<t.length;a++)(n=t[a]).cd[0].trace.selectedpoints&&0<n.cd[0].trace.selectedpoints.length&&o.push(n);if(1===o.length&&(i=o[0]===e.searchInfo,i&&(r=e.searchInfo.cd[0].trace).selectedpoints.length===e.pointNumbers.length)){for(a=0;a<e.pointNumbers.length;a++)if(r.selectedpoints.indexOf(e.pointNumbers[a])<0)return!1;return!0}return!1}(s,i):function(t){var e,n,r=0;for(n=0;n<t.length;n++)if(e=t[n],(e=e.cd[0].trace).selectedpoints){if(1<e.selectedpoints.length)return!1;if(1<(r+=e.selectedpoints.length))return!1}return 1===r}(s)&&(p=v(i))){for(o&&o.remove(),y=0;y<s.length;y++)(l=s[y])._module.selectPoints(l,!1);dt(e,s),ft(a),h&&e.emit("plotly_deselect",null)}else{t=t.shiftKey&&(void 0!==p?p:v(i)),p={pointNumber:i.pointNumber,searchInfo:i.searchInfo,subtract:t};for(var p,g=ut(a.selectionDefs.concat([p])),y=0;y<s.length;y++)if(u=pt(s[y]._module.selectPoints(s[y],g),s[y]),d.length)for(var m=0;m<u.length;m++)d.push(u[m]);else d=u;dt(e,s,i={points:d}),a&&a.selectionDefs.push(p),o&&(t=a.mergedPolygons,p=Z(a.dragmode),Q(gt(t,p),o,a)),h&&e.emit("plotly_selected",i)}}}function u(t){return"pointNumber"in t&&"searchInfo"in t}function ut(t){for(var e,o=[],n=u(t[0])?0:t[0][0][0],r=n,i=u(t[0])?0:t[0][0][1],a=i,s=0;s<t.length;s++)u(t[s])?o.push(function(a){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,e,n,r){var i=a.searchInfo.cd[0].trace._expandedIndex;return r.cd[0].trace._expandedIndex===i&&n===a.pointNumber},isRect:!1,degenerate:!1,subtract:a.subtract}}(t[s])):((e=l.tester(t[s])).subtract=t[s].subtract,o.push(e),n=Math.min(n,e.xmin),r=Math.max(r,e.xmax),i=Math.min(i,e.ymin),a=Math.max(a,e.ymax));return{xmin:n,xmax:r,ymin:i,ymax:a,pts:[],contains:function(t,e,n,r){for(var i=!1,a=0;a<o.length;a++)o[a].contains(t,e,n,r)&&(i=!1===o[a].subtract);return i},isRect:!1,degenerate:!1}}function ct(t,e,n){e._fullLayout._drawing=!1;var r=e._fullLayout,i=n.plotinfo,a=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,a=(t.shiftKey||t.altKey)&&!(W(a)&&Z(a));o&&a&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):a&&i.selection||ft(n),o||(s(e),r._lastSelectedSubplot=i.id)}function ft(t){var e=t.dragmode,n=t.plotinfo,r=t.gd;0<=r._fullLayout._activeShapeIndex&&r._fullLayout._deactivateShape(r),!W(e)||(e=r._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id))&&r._fullLayout._drawing&&((e=i(e,t))&&p.call("_guiRelayout",r,{shapes:e}),r._fullLayout._drawing=!1),n.selection={},n.selection.selectionDefs=t.selectionDefs=[],n.selection.mergedPolygons=t.mergedPolygons=[]}function ht(t,e,n,r){for(var i,a,o,s=[],l=e.map(function(t){return t._id}),u=n.map(function(t){return t._id}),c=0;c<t.calcdata.length;c++)!0===(o=(i=t.calcdata[c])[0].trace).visible&&o._module&&o._module.selectPoints&&(!r||o.subplot!==r&&o.geo!==r?"splom"===o.type&&o._xaxes[l[0]]&&o._yaxes[u[0]]?((a=f(o._module,i,e[0],n[0])).scene=t._fullLayout._splomScenes[o.uid],s.push(a)):"sankey"===o.type?(a=f(o._module,i,e[0],n[0]),s.push(a)):-1!==l.indexOf(o.xaxis)&&-1!==u.indexOf(o.yaxis)&&s.push(f(o._module,i,h(t,o.xaxis),h(t,o.yaxis))):s.push(f(o._module,i,e[0],n[0])));return s;function f(t,e,n,r){return{_module:t,cd:e,xaxis:n,yaxis:r}}}function v(t){var e=t.searchInfo.cd[0].trace,n=t.pointNumber,t=t.pointNumbers,n=0<t.length?t[0]:n;return!!e.selectedpoints&&-1<e.selectedpoints.indexOf(n)}function dt(t,e,n){var r,i;for(l=0;l<e.length;l++){var a=e[l].cd[0].trace._fullInput,o=t._fullLayout._tracePreGUI[a.uid]||{};void 0===o.selectedpoints&&(o.selectedpoints=a._input.selectedpoints||null)}if(n){for(var s=n.points||[],l=0;l<e.length;l++)(i=e[l].cd[0].trace)._input.selectedpoints=i._fullInput.selectedpoints=[],i._fullInput!==i&&(i.selectedpoints=[]);for(l=0;l<s.length;l++){var u=s[l],c=u.data,f=u.fullData;u.pointIndices?([].push.apply(c.selectedpoints,u.pointIndices),i._fullInput!==i&&[].push.apply(f.selectedpoints,u.pointIndices)):(c.selectedpoints.push(u.pointIndex),i._fullInput!==i&&f.selectedpoints.push(u.pointIndex))}}else for(l=0;l<e.length;l++)delete(i=e[l].cd[0].trace).selectedpoints,delete i._input.selectedpoints,i._fullInput!==i&&delete i._fullInput.selectedpoints;var h=!1;for(l=0;l<e.length;l++){i=(r=(d=e[l]).cd)[0].trace,p.traceIs(i,"regl")&&(h=!0);var d=d._module,d=d.styleOnSelect||d.style;d&&(d(t,r,r[0].node3),r[0].nodeRangePlot3&&d(t,r,r[0].nodeRangePlot3))}h&&(g(t),y(t))}function pt(t,e){if(Array.isArray(t))for(var n=e.cd,r=e.cd[0].trace,i=0;i<t.length;i++)t[i]=a(t[i],r,n);return t}function gt(t,e){for(var n=[],r=0;r<t.length;r++){n[r]=[];for(var i=0;i<t[r].length;i++){n[r][i]=[],n[r][i][0]=i?"L":"M";for(var a=0;a<t[r][i].length;a++)n[r][i].push(t[r][i][a])}e||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}e.exports={prepSelect:function(t,e,n,s,r){var l=Y(r),u=X(r),c=Z(r),f=W(r),h=K(r),d="drawcircle"===r,p="drawline"===r||d,g=s.gd,y=g._fullLayout,i=y._zoomlayer,a=s.element.getBoundingClientRect(),o=s.plotinfo,m=st(o),v=e-a.left,b=n-a.top;y._calcInverseTransform(g);var x,_,w,k,M,T,A,S,E,v=(a=J.apply3DTransform(y._invTransform)(v,b))[0],b=a[1],O=y._invScaleX,C=y._invScaleY,a="M"+v+","+b,P=s.xaxes[0]._length,L=s.yaxes[0]._length,R=s.xaxes.concat(s.yaxes),j=t.altKey&&!(W(r)&&c);ct(t,g,s),l&&(w=rt([[v,b]],et.BENDPX));var N=i.selectAll("path.select-outline-"+o.id).data(f?[0]:[1,2]),t=y.newshape;N.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+o.id}).style(f?{opacity:t.opacity/2,fill:c?void 0:t.fillcolor,stroke:t.line.color,"stroke-dasharray":H(t.line.dash,t.line.width),"stroke-width":t.line.width+"px"}:{}).attr("fill-rule",t.fillrule).classed("cursor-move",!!f).attr("transform",m).attr("d",a+"Z");var D,z=i.append("path").attr("class","zoombox-corners").style({fill:q.background,stroke:q.defaultLine,"stroke-width":1}).attr("transform",m).attr("d","M0,0Z"),I=y._uid+et.SELECTID,F=[],B=ht(g,s.xaxes,s.yaxes,s.subplot);function U(t,e){return t-e}D=o.fillRangeItems||(u?function(t,e){var n=t.range={};for(A=0;A<R.length;A++){var r=R[A],i=r._id.charAt(0);n[r._id]=[at(r,e[i+"min"]),at(r,e[i+"max"])].sort(U)}}:function(t,e,n){var r=t.lassoPoints={};for(A=0;A<R.length;A++){var i=R[A];r[i._id]=n.filtered.map(ot(i))}}),s.moveFn=function(t,e){x=Math.max(0,Math.min(P,O*t+v)),_=Math.max(0,Math.min(L,C*e+b));var n,r,i=Math.abs(x-v),a=Math.abs(_-b);if(u){if(h){var o,e=y.selectdirection;switch(o="any"===e?a<Math.min(.6*i,nt)?"h":i<Math.min(.6*a,nt)?"v":"d":e){case"h":n=d?L/2:0,r=L;break;case"v":n=d?P/2:0,r=P}}if(f)switch(y.newshape.drawdirection){case"vertical":o="h",n=d?L/2:0,r=L;break;case"horizontal":o="v",n=d?P/2:0,r=P;break;case"ortho":r=i<a?(o="h",n=b,_):(o="v",n=v,x);break;default:o="d"}"h"===o?((T=p?$(d,[x,n],[x,r]):[[v,n],[v,r],[x,r],[x,n]]).xmin=p?x:Math.min(v,x),T.xmax=p?x:Math.max(v,x),T.ymin=Math.min(n,r),T.ymax=Math.max(n,r),z.attr("d","M"+T.xmin+","+(b-nt)+"h-4v"+2*nt+"h4ZM"+(T.xmax-1)+","+(b-nt)+"h4v"+2*nt+"h-4Z")):"v"===o?((T=p?$(d,[n,_],[r,_]):[[n,b],[n,_],[r,_],[r,b]]).xmin=Math.min(n,r),T.xmax=Math.max(n,r),T.ymin=p?_:Math.min(b,_),T.ymax=p?_:Math.max(b,_),z.attr("d","M"+(v-nt)+","+T.ymin+"v-4h"+2*nt+"v4ZM"+(v-nt)+","+(T.ymax-1)+"v4h"+2*nt+"v-4Z")):"d"===o&&((T=p?$(d,[v,b],[x,_]):[[v,b],[v,_],[x,_],[x,b]]).xmin=Math.min(v,x),T.xmax=Math.max(v,x),T.ymin=Math.min(b,_),T.ymax=Math.max(b,_),z.attr("d","M0,0Z"))}else l&&(w.addPt([x,_]),T=w.filtered);k=s.selectionDefs&&s.selectionDefs.length?(M=function(t,e,n){if(n)return V.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions;return V.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(s.mergedPolygons,T,j),T.subtract=j,ut(s.selectionDefs.concat([T]))):(M=[T],it(T)),Q(gt(M,c),N,s),h&&tt.throttle(I,et.SELECTDELAY,function(){var t;F=[];var e,n=[];for(A=0;A<B.length;A++)if(e=(S=B[A])._module.selectPoints(S,k),n.push(e),t=pt(e,S),F.length)for(var r=0;r<t.length;r++)F.push(t[r]);else F=t;dt(g,B,E={points:F}),D(E,T,w),s.gd.emit("plotly_selecting",E)})},s.clickFn=function(t,e){var n;z.remove(),0<=g._fullLayout._activeShapeIndex?g._fullLayout._deactivateShape(g):f||(n=y.clickmode,tt.done(I).then(function(){if(tt.clear(I),2===t){for(N.remove(),A=0;A<B.length;A++)(S=B[A])._module.selectPoints(S,!1);dt(g,B),ft(s),g.emit("plotly_deselect",null)}else-1<n.indexOf("select")&&lt(e,g,s.xaxes,s.yaxes,s.subplot,s,N),"event"===n&&g.emit("plotly_selected",void 0);G.click(g,e)}).catch(J.error))},s.doneFn=function(){z.remove(),tt.done(I).then(function(){tt.clear(I),s.gd.emit("plotly_selected",E),T&&s.selectionDefs&&(T.subtract=j,s.selectionDefs.push(T),s.mergedPolygons.length=0,[].push.apply(s.mergedPolygons,M)),s.doneFnCompleted&&s.doneFnCompleted(F)}).catch(J.error),f&&ft(s)}},clearSelect:s,clearSelectionsCache:ft,selectOnClick:lt}},{"../../components/color":294,"../../components/dragelement/helpers":312,"../../components/drawing":316,"../../components/fx":334,"../../components/fx/helpers":330,"../../components/shapes/draw_newshape/display_outlines":379,"../../components/shapes/draw_newshape/helpers":380,"../../components/shapes/draw_newshape/newshapes":381,"../../lib":424,"../../lib/clear_gl_canvases":411,"../../lib/polygon":436,"../../lib/throttle":448,"../../plot_api/subroutines":461,"../../registry":525,"./axis_ids":474,"./constants":477,"./handle_outline":481,"./helpers":482,polybooljs:610}],491:[function(t,e,n){"use strict";var d=t("d3"),b=t("d3-time-format").utcFormat,x=t("fast-isnumeric"),_=t("../../lib"),w=_.cleanNumber,k=_.ms2DateTime,M=_.dateTime2ms,T=_.ensureNumber,A=_.isArrayOrTypedArray,r=t("../../constants/numerical"),S=r.FP_SAFE,E=r.BADNUM,O=r.LOG_CLIP,C=r.ONEWEEK,P=r.ONEDAY,L=r.ONEHOUR,R=r.ONEMIN,j=r.ONESEC,N=t("./axis_ids"),D=t("./constants"),z=D.HOUR_PATTERN,I=D.WEEKDAY_PATTERN;function F(t){return Math.pow(10,t)}function B(t){return null!=t}e.exports=function(v,p){p=p||{};var g=v._id||"x",y=g.charAt(0);function n(t,e){if(0<t)return Math.log(t)/Math.LN10;if(t<=0&&e&&v.range&&2===v.range.length){t=v.range[0],e=v.range[1];return.5*(t+e-2*O*Math.abs(t-e))}return E}function r(t,e,n,r){if((r||{}).msUTC&&x(t))return+t;if((r=M(t,n||v.calendar))===E){if(!x(t))return E;t=+t;n=Math.floor(10*_.mod(t+.05,1)),t=Math.round(t-n/10),r=M(new Date(t))+n/10}return r}function i(t,e,n){return k(t,e,n||v.calendar)}function e(t){return v._categories[Math.round(t)]}function m(t){if(B(t)){if(void 0===v._categoriesMap&&(v._categoriesMap={}),void 0!==v._categoriesMap[t])return v._categoriesMap[t];v._categories.push("number"==typeof t?String(t):t);var e=v._categories.length-1;return v._categoriesMap[t]=e}return E}function f(t){if(v._categoriesMap)return v._categoriesMap[t]}function a(t){var e=f(t);return void 0!==e?e:x(t)?+t:void 0}function o(t){return x(t)?+t:f(t)}function u(t,e,n){return d.round(n+e*t,2)}function s(t,e,n){return(t-n)/e}var c,l=function(t){return x(t)?u(t,v._m,v._b):E},h=function(t){return s(t,v._m,v._b)};v.rangebreaks&&(c="y"===y,l=function(t){if(!x(t))return E;var e=v._rangebreaks.length;if(!e)return u(t,v._m,v._b);var n=c;v.range[0]>v.range[1]&&(n=!n);for(var r=n?-1:1,i=r*t,a=0,o=0;o<e;o++){var s=r*v._rangebreaks[o].min,l=r*v._rangebreaks[o].max;if(i<s)break;if(!(l<i)){a=i<(s+l)/2?o:o+1;break}a=o+1}n=v._B[a]||0;return isFinite(n)?u(t,v._m2,n):0},h=function(t){var e=v._rangebreaks.length;if(!e)return s(t,v._m,v._b);for(var n=0,r=0;r<e&&!(t<v._rangebreaks[r].pmin);r++)t>v._rangebreaks[r].pmax&&(n=r+1);return s(t,v._m2,v._B[n])}),v.c2l="log"===v.type?n:T,v.l2c="log"===v.type?F:T,v.l2p=l,v.p2l=h,v.c2p="log"===v.type?function(t,e){return l(n(t,e))}:l,v.p2c="log"===v.type?function(t){return F(h(t))}:h,-1!==["linear","-"].indexOf(v.type)?(v.d2r=v.r2d=v.d2c=v.r2c=v.d2l=v.r2l=w,v.c2d=v.c2r=v.l2d=v.l2r=T,v.d2p=v.r2p=function(t){return v.l2p(w(t))},v.p2d=v.p2r=h,v.cleanPos=T):"log"===v.type?(v.d2r=v.d2l=function(t,e){return n(w(t),e)},v.r2d=v.r2c=function(t){return F(w(t))},v.d2c=v.r2l=w,v.c2d=v.l2r=T,v.c2r=n,v.l2d=F,v.d2p=function(t,e){return v.l2p(v.d2r(t,e))},v.p2d=function(t){return F(h(t))},v.r2p=function(t){return v.l2p(w(t))},v.p2r=h,v.cleanPos=T):"date"===v.type?(v.d2r=v.r2d=_.identity,v.d2c=v.r2c=v.d2l=v.r2l=r,v.c2d=v.c2r=v.l2d=v.l2r=i,v.d2p=v.r2p=function(t,e,n){return v.l2p(r(t,0,n))},v.p2d=v.p2r=function(t,e,n){return i(h(t),e,n)},v.cleanPos=function(t){return _.cleanDate(t,E,v.calendar)}):"category"===v.type?(v.d2c=v.d2l=m,v.r2d=v.c2d=v.l2d=e,v.d2r=v.d2l_noadd=a,v.r2c=function(t){t=o(t);return void 0!==t?t:v.fraction2r(.5)},v.l2r=v.c2r=T,v.r2l=o,v.d2p=function(t){return v.l2p(v.r2c(t))},v.p2d=function(t){return e(h(t))},v.r2p=v.d2p,v.p2r=h,v.cleanPos=function(t){return"string"==typeof t&&""!==t?t:T(t)}):"multicategory"===v.type&&(v.r2d=v.c2d=v.l2d=e,v.d2r=v.d2l_noadd=a,v.r2c=function(t){t=a(t);return void 0!==t?t:v.fraction2r(.5)},v.r2c_just_indices=f,v.l2r=v.c2r=T,v.r2l=a,v.d2p=function(t){return v.l2p(v.r2c(t))},v.p2d=function(t){return e(h(t))},v.r2p=v.d2p,v.p2r=h,v.cleanPos=function(t){return Array.isArray(t)||"string"==typeof t&&""!==t?t:T(t)},v.setupMultiCategory=function(t){var e,n,r=v._traceIndices,i=v._matchGroup;if(i&&0===v._categories.length)for(var a in i)a!==g&&(n=p[N.id2name(a)],r=r.concat(n._traceIndices));for(var o=[[0,{}],[0,{}]],s=[],l=0;l<r.length;l++){var u=t[r[l]];if(y in u){var c=u[y],f=u._length||_.minRowLength(c);if(A(c[0])&&A(c[1]))for(e=0;e<f;e++){var h=c[0][e],d=c[1][e];B(h)&&B(d)&&(s.push([h,d]),h in o[0][1]||(o[0][1][h]=o[0][0]++),d in o[1][1]||(o[1][1][d]=o[1][0]++))}}}for(s.sort(function(t,e){var n=o[0][1],n=n[t[0]]-n[e[0]];if(n)return n;n=o[1][1];return n[t[1]]-n[e[1]]}),l=0;l<s.length;l++)m(s[l])}),v.fraction2r=function(t){var e=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return v.l2r(e+t*(n-e))},v.r2fraction=function(t){var e=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return(v.r2l(t)-e)/(n-e)},v.cleanRange=function(t,e){e=e||{},t=t||"range";var n,r=_.nestedProperty(v,t).get(),i="date"===v.type?_.dfltRange(v.calendar):"y"===y?D.DFLTRANGEY:e.dfltRange||D.DFLTRANGEX;if(i=i.slice(),"tozero"!==v.rangemode&&"nonnegative"!==v.rangemode||(i[0]=0),r&&2===r.length)for("date"!==v.type||v.autorange||(r[0]=_.cleanDate(r[0],E,v.calendar),r[1]=_.cleanDate(r[1],E,v.calendar)),n=0;n<2;n++)if("date"===v.type){if(!_.isDateTime(r[n],v.calendar)){v[t]=i;break}if(v.r2l(r[0])===v.r2l(r[1])){var a=_.constrain(v.r2l(r[0]),_.MIN_MS+1e3,_.MAX_MS-1e3);r[0]=v.l2r(a-1e3),r[1]=v.l2r(a+1e3);break}}else{if(!x(r[n])){if(!x(r[1-n])){v[t]=i;break}r[n]=r[1-n]*(n?10:.1)}r[n]<-S?r[n]=-S:r[n]>S&&(r[n]=S),r[0]===r[1]&&(a=Math.max(1,Math.abs(1e-6*r[0])),r[0]-=a,r[1]+=a)}else _.nestedProperty(v,t).set(i)},v.setScale=function(t){var e=p._size;v.overlaying&&(r=N.getFromId({_fullLayout:p},v.overlaying),v.domain=r.domain);var n=t&&v._r?"_r":"range",r=v.calendar;v.cleanRange(n);var i,a,t=v.r2l(v[n][0],r),n=v.r2l(v[n][1],r),r="y"===y;if((r?(v._offset=e.t+(1-v.domain[1])*e.h,v._length=e.h*(v.domain[1]-v.domain[0]),v._m=v._length/(t-n),v._b=-v._m*n):(v._offset=e.l+v.domain[0]*e.w,v._length=e.w*(v.domain[1]-v.domain[0]),v._m=v._length/(n-t),v._b=-v._m*t),v._rangebreaks=[],v._lBreaks=0,v._m2=0,v._B=[],v.rangebreaks)&&(v._rangebreaks=v.locateBreaks(Math.min(t,n),Math.max(t,n)),v._rangebreaks.length)){for(i=0;i<v._rangebreaks.length;i++)a=v._rangebreaks[i],v._lBreaks+=Math.abs(a.max-a.min);e=r;n<t&&(e=!e),e&&v._rangebreaks.reverse();var o=e?-1:1;for(v._m2=o*v._length/(Math.abs(n-t)-v._lBreaks),v._B.push(-v._m2*(r?n:t)),i=0;i<v._rangebreaks.length;i++)a=v._rangebreaks[i],v._B.push(v._B[v._B.length-1]-o*v._m2*(a.max-a.min));for(i=0;i<v._rangebreaks.length;i++)(a=v._rangebreaks[i]).pmin=l(a.min),a.pmax=l(a.max)}if(!isFinite(v._m)||!isFinite(v._b)||v._length<0)throw p._replotting=!1,new Error("Something went wrong with axis scaling")},v.maskBreaks=function(t){for(var e,n=v.rangebreaks||[],r=0;r<n.length;r++){var i=n[r];if(i.enabled)if(i.bounds){var a,o=i.pattern,s=(a=_.simpleMap(i.bounds,o?w:v.d2c))[0],l=a[1];switch(o){case I:u=(e=new Date(t)).getUTCDay(),l<s&&(l+=7,u<s&&(u+=7));break;case z:var u=(e=new Date(t)).getUTCHours()+(e.getUTCMinutes()/60+e.getUTCSeconds()/3600+e.getUTCMilliseconds()/36e5);l<s&&(l+=24,u<s&&(u+=24));break;case"":u=t}if(s<=u&&u<l)return E}else for(var c=_.simpleMap(i.values,v.d2c).sort(_.sorterAsc),f=0;f<c.length;f++)if(l=(s=c[f])+i.dvalue,s<=t&&t<l)return E}return t},v.locateBreaks=function(a,o){var t,e,n,s=[];if(!v.rangebreaks)return s;for(var r=v.rangebreaks.slice().sort(function(t,e){return t.pattern===I&&e.pattern===z?-1:e.pattern===I&&t.pattern===z?1:0}),i=function(t,e){if((t=_.constrain(t,a,o))!==(e=_.constrain(e,a,o))){for(var n=!0,r=0;r<s.length;r++){var i=s[r];t<i.max&&e>=i.min&&(t<i.min&&(i.min=t),e>i.max&&(i.max=e),n=!1)}n&&s.push({min:t,max:e})}},l=0;l<r.length;l++){var u=r[l];if(u.enabled)if(u.bounds){var c=a,f=o;u.pattern&&(c=Math.floor(c)),e=(t=_.simpleMap(u.bounds,u.pattern?w:v.r2l))[0],n=t[1];var h,d,p=new Date(c);switch(u.pattern){case I:d=C,h=(n-e+(n<e?7:0))*P,c+=e*P-(p.getUTCDay()*P+p.getUTCHours()*L+p.getUTCMinutes()*R+p.getUTCSeconds()*j+p.getUTCMilliseconds());break;case z:d=P,h=(n-e+(n<e?24:0))*L,c+=e*L-(p.getUTCHours()*L+p.getUTCMinutes()*R+p.getUTCSeconds()*j+p.getUTCMilliseconds());break;default:c=Math.min(t[0],t[1]),h=d=(f=Math.max(t[0],t[1]))-c}for(var g=c;g<f;g+=d)i(g,g+h)}else for(var y=_.simpleMap(u.values,v.d2c),m=0;m<y.length;m++)i(e=y[m],n=e+u.dvalue)}return s.sort(function(t,e){return t.min-e.min}),s},v.makeCalcdata=function(t,e,n){var r=v.type,i="date"===r&&t[e+"calendar"];if(e in t){if(s=t[e],l=t._length||_.minRowLength(s),_.isTypedArray(s)&&("linear"===r||"log"===r)){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}if("multicategory"===r)return function(t,e){for(var n=new Array(e),r=0;r<e;r++){var i=(t[0]||[])[r],a=(t[1]||[])[r];n[r]=f([i,a])}return n}(s,l);for(u=new Array(l),c=0;c<l;c++)u[c]=v.d2c(s[c],0,i,n)}else for(var a=(e+"0"in t?v.d2c(t[e+"0"],0,i):0),o=t["d"+e]?Number(t["d"+e]):1,s=t[{x:"y",y:"x"}[e]],l=t._length||s.length,u=new Array(l),c=0;c<l;c++)u[c]=a+c*o;if(v.rangebreaks)for(c=0;c<l;c++)u[c]=v.maskBreaks(u[c]);return u},v.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&x(v.r2l(t[0]))&&x(v.r2l(t[1]))},v.isPtWithinRange=function(t,e){var n=v.c2l(t[y],null,e),t=v.r2l(v.range[0]),e=v.r2l(v.range[1]);return t<e?t<=n&&n<=e:e<=n&&n<=t},v._emptyCategories=function(){v._categories=[],v._categoriesMap={}},v.clearCalc=function(){var t=v._matchGroup;if(t){var e,n=null,r=null;for(e in t){var i=p[N.id2name(e)];if(i._categories){n=i._categories,r=i._categoriesMap;break}}n&&r?(v._categories=n,v._categoriesMap=r):v._emptyCategories()}else v._emptyCategories();if(v._initialCategories)for(var a=0;a<v._initialCategories.length;a++)m(v._initialCategories[a])},v.sortByInitialCategories=function(){var t,e,n=[];if(v._emptyCategories(),v._initialCategories)for(var r=0;r<v._initialCategories.length;r++)m(v._initialCategories[r]);for(t in n=n.concat(v._traceIndices),v._matchGroup)g!==t&&((e=p[N.id2name(t)])._categories=v._categories,e._categoriesMap=v._categoriesMap,n=n.concat(e._traceIndices));return n};var t=p._d3locale;"date"===v.type&&(v._dateFormat=t?t.timeFormat:b,v._extraFormat=p._extraFormat),v._separators=p.separators,v._numFormat=t?t.numberFormat:d.format,delete v._minDtick,delete v._forceTick0}},{"../../constants/numerical":402,"../../lib":424,"./axis_ids":474,"./constants":477,d3:277,"d3-time-format":275,"fast-isnumeric":99}],492:[function(t,e,n){"use strict";var u=t("../../lib"),c=t("../../components/color").contrast,f=t("./layout_attributes"),h=t("../array_container_defaults");function d(e){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(t){return void 0!==e[t]});if(n.every(function(t){return e[t]===e[n[0]]})||1===n.length)return e[n[0]]}function p(n,r){function t(t,e){return u.coerce(n,r,f.tickformatstops,t,e)}t("enabled")&&(t("dtickrange"),t("value"))}e.exports=function(t,e,n,r,i,a){var o,s,l;a&&1!==a.pass||(s=n,o=i,l=d(l=t),s("tickprefix")&&s("showtickprefix",l),s("ticksuffix",o.tickSuffixDflt)&&s("showticksuffix",l)),a&&2!==a.pass||(s=e,l=n,a=r,e=i,r=d(n=t),l("tickprefix")&&l("showtickprefix",r),l("ticksuffix",e.tickSuffixDflt)&&l("showticksuffix",r),l("showticklabels")&&(i=e.font||{},t=s.color,t=-1!==(s.ticklabelposition||"").indexOf("inside")?c(e.bgColor):t&&t!==f.color.dflt?t:i.color,u.coerceFont(l,"tickfont",{family:i.family,size:i.size,color:t}),l("tickangle"),"category"!==a&&(t=l("tickformat"),h(n,s,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),s.tickformatstops.length||delete s.tickformatstops,t||"date"===a||(l("showexponent",r),l("exponentformat"),l("minexponent"),l("separatethousands")))))}},{"../../components/color":294,"../../lib":424,"../array_container_defaults":466,"./layout_attributes":485}],493:[function(t,e,n){"use strict";var o=t("../../lib"),s=t("./layout_attributes");e.exports=function(t,e,n,r){var i=o.coerce2(t,e,s,"ticklen"),a=o.coerce2(t,e,s,"tickwidth"),t=o.coerce2(t,e,s,"tickcolor",e.color);n("ticks",r.outerTicks||i||a||t?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":424,"./layout_attributes":485}],494:[function(t,e,n){"use strict";var l=t("./clean_ticks"),u=t("../../lib").isArrayOrTypedArray;e.exports=function(n,r,t,e){function i(t){var e=n[t];return void 0!==e?e:(r._template||{})[t]}var a=i("tick0"),o=i("dtick"),s=i("tickvals"),s=t("tickmode",u(s)?"array":o?"linear":"auto");"auto"===s?t("nticks"):"linear"===s?(o=r.dtick=l.dtick(o,e),r.tick0=l.tick0(a,e,r.calendar,o)):"multicategory"!==e&&(void 0===t("tickvals")?r.tickmode="auto":t("ticktext"))}},{"../../lib":424,"./clean_ticks":476}],495:[function(t,e,n){"use strict";var h=t("d3"),d=t("../../registry"),v=t("../../lib"),b=t("../../components/drawing"),x=t("./axes");e.exports=function(m,a,i,t){var o,s,l,u,r=m._fullLayout;if(0!==a.length){t&&(o=t());var c=h.ease(i.easing);return m._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var t={},e=0;e<a.length;e++){var n=a[e],r=n.plotinfo.xaxis,i=n.plotinfo.yaxis;n.xr0&&(t[r._name+".range"]=n.xr0.slice()),n.yr0&&(t[i._name+".range"]=n.yr0.slice())}return d.call("relayout",m,t).then(function(){for(var t=0;t<a.length;t++)f(a[t].plotinfo)})}()}),s=Date.now(),u=window.requestAnimationFrame(function t(){l=Date.now();for(var e=Math.min(1,(l-s)/i.duration),n=c(e),r=0;r<a.length;r++)!function(t,e){var n,r,i,a,o=t.plotinfo,s=o.xaxis,l=o.yaxis,u=s._length,c=l._length,f=!!t.xr1,h=!!t.yr1,d=[];f?(n=v.simpleMap(t.xr0,s.r2l),r=v.simpleMap(t.xr1,s.r2l),i=n[1]-n[0],a=r[1]-r[0],d[0]=(n[0]*(1-e)+e*r[0]-n[0])/(n[1]-n[0])*u,d[2]=u*(1-e+e*a/i),s.range[0]=s.l2r(n[0]*(1-e)+e*r[0]),s.range[1]=s.l2r(n[1]*(1-e)+e*r[1])):(d[0]=0,d[2]=u),h?(g=v.simpleMap(t.yr0,l.r2l),y=v.simpleMap(t.yr1,l.r2l),p=g[1]-g[0],t=y[1]-y[0],d[1]=(g[1]*(1-e)+e*y[1]-g[1])/(g[0]-g[1])*c,d[3]=c*(1-e+e*t/p),l.range[0]=s.l2r(g[0]*(1-e)+e*y[0]),l.range[1]=l.l2r(g[1]*(1-e)+e*y[1])):(d[1]=0,d[3]=c),x.drawOne(m,s,{skipTitle:!0}),x.drawOne(m,l,{skipTitle:!0}),x.redrawComponents(m,[s._id,l._id]);var p=f?u/d[2]:1,g=h?c/d[3]:1,e=f?d[0]:0,y=h?d[1]:0,u=f?d[0]/d[2]*u:0,c=h?d[1]/d[3]*c:0,u=s._offset-u,c=l._offset-c;o.clipRect.call(b.setTranslate,e,y).call(b.setScale,1/p,1/g),o.plot.call(b.setTranslate,u,c).call(b.setScale,p,g),b.setPointGroupScale(o.zoomScalePts,1/p,1/g),b.setTextPointsScale(o.zoomScaleTxt,1/p,1/g)}(a[r],n);u=l-s>i.duration?(function(){for(var t={},e=0;e<a.length;e++){var n=a[e],r=n.plotinfo.xaxis,i=n.plotinfo.yaxis;n.xr1&&(t[r._name+".range"]=n.xr1.slice()),n.yr1&&(t[i._name+".range"]=n.yr1.slice())}o&&o(),d.call("relayout",m,t).then(function(){for(var t=0;t<a.length;t++)f(a[t].plotinfo)})}(),window.cancelAnimationFrame(t)):window.requestAnimationFrame(t)}),Promise.resolve()}function f(t){var e=t.xaxis,n=t.yaxis;r._defs.select("#"+t.clipId+"> rect").call(b.setTranslate,0,0).call(b.setScale,1,1),t.plot.call(b.setTranslate,e._offset,n._offset).call(b.setScale,1,1);n=t.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(b.setPointGroupScale,1,1),n.selectAll(".textpoint").call(b.setTextPointsScale,1,1),n.call(b.hideOutsideRangePoints,t)}x.redrawComponents(m)}},{"../../components/drawing":316,"../../lib":424,"../../registry":525,"./axes":471,d3:277}],496:[function(t,e,n){"use strict";var d=t("../../registry").traceIs,p=t("./axis_autotype");function g(t){return{v:"x",h:"y"}[t.orientation||"v"]}function y(t,e){var n=g(t),r=d(t,"box-violin"),i=d(t._fullInput||{},"candlestick");return r&&!i&&e===n&&void 0===t[n]&&void 0===t[n+"0"]}e.exports=function(t,e,n,r){n("autotypenumbers",r.autotypenumbersDflt),"-"===n("type",(r.splomStash||{}).type)&&(function(t,e){if("-"===t.type){var n,r=t._id,i=r.charAt(0);-1!==r.indexOf("scene")&&(r=i);var a=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if("splom"===i.type&&0<i._length&&(i["_"+n+"axes"]||{})[e])return i;if((i[n+"axis"]||n)===e){if(y(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(e,r,i);if(a){if("histogram"===a.type&&i==={v:"y",h:"x"}[a.orientation||"v"])return t.type="linear";var o,s=i+"calendar",l=a[s],u={noMultiCategory:!d(a,"cartesian")||d(a,"noMultiCategory")};if("box"===a.type&&a._hasPreCompStats&&i==={h:"x",v:"y"}[a.orientation||"v"]&&(u.noMultiCategory=!0),u.autotypenumbers=t.autotypenumbers,y(a,i)){var c=g(a),f=[];for(n=0;n<e.length;n++){var h=e[n];d(h,"box-violin")&&(h[i+"axis"]||i)===r&&(void 0!==h[c]?f.push(h[c][0]):void 0!==h.name?f.push(h.name):f.push("text"),h[s]!==l&&(l=void 0))}t.type=p(f,l,u)}else"splom"===a.type?(o=a.dimensions[a._axesDim[r]]).visible&&(t.type=p(o.values,l,u)):t.type=p(a[i]||[a[i+"0"]],l,u)}}}(e,r.data),"-"===e.type?e.type="linear":t.type=e.type)}},{"../../registry":525,"./axis_autotype":472}],497:[function(t,e,c){"use strict";var o=t("../registry"),h=t("../lib");function u(t,e,n){var r,i=!1;if("data"===e.type)r=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;r=t._fullLayout}return r=h.nestedProperty(r,e.prop).get(),(n=n[e.type]=n[e.type]||{}).hasOwnProperty(e.prop)&&n[e.prop]!==r&&(i=!0),{changed:i,value:n[e.prop]=r}}function a(t,e){var r=[],n=e[0],i={};if("string"==typeof n)i[n]=e[1];else{if(!h.isPlainObject(n))return r;i=n}return l(i,function(t,e,n){r.push({type:"layout",prop:t,value:n})},"",0),r}function s(u,t){var c=[],e=t[0],n=t[1],f=t[2],t={};if("string"==typeof e)t[e]=n;else{if(!h.isPlainObject(e))return c;t=e,void 0===f&&(f=n)}return void 0===f&&(f=null),l(t,function(t,e,n){var r;if(Array.isArray(n)){s=n.slice();var i=Math.min(s.length,u.data.length);f&&(i=Math.min(i,f.length)),r=[];for(var a=0;a<i;a++)r[a]=f?f[a]:a}else s=n,r=f?f.slice():null;if(null===r)Array.isArray(s)&&(s=s[0]);else if(Array.isArray(r)){if(!Array.isArray(s))for(var o=s,s=[],l=0;l<r.length;l++)s[l]=o;s.length=Math.min(r.length,s.length)}c.push({type:"data",prop:t,traces:r,value:s})},"",0),c}function l(r,i,a,o){Object.keys(r).forEach(function(t){var e,n=r[t];"_"!==t[0]&&(e=a+(0<o?".":"")+t,h.isPlainObject(n)?l(n,i,e,o+1):i(e,t,n))})}c.manageCommandObserver=function(e,t,n,r){var i={},a=!0;t&&t._commandObserver&&(i=t._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var o=c.hasSimpleAPICommandBindings(e,n,i.lookupTable);if(t&&t._commandObserver){if(o)return i;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,i}if(o){u(e,o,i.cache),i.check=function(){if(a){var t=u(e,o,i.cache);return t.changed&&r&&void 0!==i.lookupTable[t.value]&&(i.disable(),Promise.resolve(r({value:t.value,type:o.type,prop:o.prop,traces:o.traces,index:i.lookupTable[t.value]})).then(i.enable,i.enable)),t.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)e._internalOn(s[l],i.check);i.remove=function(){for(var t=0;t<s.length;t++)e._removeInternalListener(s[t],i.check)}}else h.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){a=!1},i.enable=function(){a=!0},t&&(t._commandObserver=i),i},c.hasSimpleAPICommandBindings=function(t,e,n){for(var r,i=e.length,a=0;a<i;a++){var o,s=e[a],l=s.method,s=s.args;if(Array.isArray(s)||(s=[]),!l)return!1;s=c.computeAPICommandBindings(t,l,s);if(1!==s.length)return!1;if(r){if((o=s[0]).type!==r.type)return!1;if(o.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(o.traces))return!1;o.traces.sort();for(var u=0;u<r.traces.length;u++)if(r.traces[u]!==o.traces[u])return!1}else if(o.prop!==r.prop)return!1}else r=s[0],Array.isArray(r.traces)&&r.traces.sort();s=(o=s[0]).value;if(Array.isArray(s)){if(1!==s.length)return!1;s=s[0]}n&&(n[s]=a)}return r},c.executeAPICommand=function(t,e,n){if("skip"===e)return Promise.resolve();var r=o.apiMethodRegistry[e],i=[t];Array.isArray(n)||(n=[]);for(var a=0;a<n.length;a++)i.push(n[a]);return r.apply(null,i).catch(function(t){return h.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},c.computeAPICommandBindings=function(t,e,n){var r,i;switch(Array.isArray(n)||(n=[]),e){case"restyle":r=s(t,n);break;case"relayout":r=a(0,n);break;case"update":r=s(t,[n[0],n[2]]).concat(a(0,[n[1]]));break;case"animate":i=n,r=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":424,"../registry":525}],498:[function(t,e,n){"use strict";var r=t("../lib/extend").extendFlat;n.attributes=function(t,e){e=e||{};var n={valType:"info_array",editType:(t=t||{}).editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},n=(t.name&&t.name,t.trace,e.description&&e.description,{x:r({},n,{}),y:r({},n,{}),editType:t.editType});return t.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:t.editType},n.column={valType:"integer",min:0,dflt:0,editType:t.editType}),n},n.defaults=function(t,e,n,r){var i=r&&r.x||[0,1],r=r&&r.y||[0,1],e=e.grid;e&&(void 0!==(a=n("domain.column"))&&(a<e.columns?i=e._domains.x[a]:delete t.domain.column),void 0!==(a=n("domain.row"))&&(a<e.rows?r=e._domains.y[a]:delete t.domain.row));var a=n("domain.x",i),n=n("domain.y",r);a[0]<a[1]||(t.domain.x=i.slice()),n[0]<n[1]||(t.domain.y=r.slice())}},{"../lib/extend":417}],499:[function(t,e,n){"use strict";e.exports=function(t){var e=t.editType,n=t.colorEditType;void 0===n&&(n=e);e={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:n},editType:e};return t.arrayOk&&(e.family.arrayOk=!0,e.size.arrayOk=!0,e.color.arrayOk=!0),e}},{}],500:[function(t,e,n){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],501:[function(t,e,n){"use strict";var c=t("../registry"),f=t("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(t,e,n){e=c.subplotsRegistry[e];if(!e)return[];for(var r=e.attr,i=[],a=0;a<t.length;a++){var o=t[a];o[0].trace[r]===n&&i.push(o)}return i},n.getModuleCalcData=function(t,e){var n=[],r=[],i="string"==typeof e?c.getModule(e).plot:"function"==typeof e?e:e.plot;if(!i)return[n,t];for(var a=0;a<t.length;a++){var o=t[a],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===i?n:r).push(o)}return[n,r]},n.getSubplotData=function(t,e,n){if(!c.subplotsRegistry[e])return[];var r,i,a,o,s=c.subplotsRegistry[e].attr,l=[];"gl2d"===e&&(a="x"+(i=n.match(f))[1],o="y"+i[2]);for(var u=0;u<t.length;u++)r=t[u],"gl2d"===e&&c.traceIs(r,"gl2d")?r[s[0]]===a&&r[s[1]]===o&&l.push(r):r[s]===n&&l.push(r);return l}},{"../registry":525,"./cartesian/constants":477}],502:[function(t,e,n){"use strict";var r=t("../../plot_api/edit_types").overrideAll,i=t("../../components/fx/layout_attributes"),c=t("./scene"),f=t("../get_data").getSubplotData,a=t("../../lib"),l=t("../../constants/xmlns_namespaces"),h="gl3d";n.name=h,n.attr="scene",n.idRoot="scene",n.idRegex=n.attrRegex=a.counterRegex("scene"),n.attributes=t("./layout/attributes"),n.layoutAttributes=t("./layout/layout_attributes"),n.baseLayoutAttrOverrides=r({hoverlabel:i.hoverlabel},"plot","nested"),n.supplyLayoutDefaults=t("./layout/defaults"),n.plot=function(t){for(var e=t._fullLayout,n=t._fullData,r=e._subplots.gl3d,i=0;i<r.length;i++){var a=r[i],o=f(n,h,a),s=e[a],l=s.camera,u=s._scene;u||(u=new c({id:a,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:l},e),s._scene=u),u.viewInitial||(u.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),u.plot(o,e,t.layout)}},n.clean=function(t,e,n,r){for(var i=r._subplots.gl3d||[],a=0;a<i.length;a++){var o=i[a];!e[o]&&r[o]._scene&&(r[o]._scene.destroy(),r._infolayer&&r._infolayer.selectAll(".annotation-"+o).remove())}},n.toSVG=function(t){for(var e=t._fullLayout,n=e._subplots.gl3d,r=e._size,i=0;i<n.length;i++){var a=e[n[i]],o=a.domain,s=a._scene,a=s.toImage("png");e._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":a,x:r.l+r.w*o.x[0],y:r.t+r.h*(1-o.y[1]),width:r.w*(o.x[1]-o.x[0]),height:r.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},n.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){t=t.substr(5);return"1"===t&&(t=""),"scene"+t}},n.updateFx=function(t){for(var e=t._fullLayout,n=e._subplots.gl3d,r=0;r<n.length;r++)e[n[r]]._scene.updateFx(e.dragmode,e.hovermode)}},{"../../components/fx/layout_attributes":335,"../../constants/xmlns_namespaces":403,"../../lib":424,"../../plot_api/edit_types":453,"../get_data":501,"./layout/attributes":503,"./layout/defaults":507,"./layout/layout_attributes":508,"./scene":512}],503:[function(t,e,n){"use strict";e.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],504:[function(t,e,n){"use strict";var r=t("../../../components/color"),i=t("../../cartesian/layout_attributes"),a=t("../../../lib/extend").extendFlat,t=t("../../../plot_api/edit_types").overrideAll;e.exports=t({visible:i.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:r.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:i.color,categoryorder:i.categoryorder,categoryarray:i.categoryarray,title:{text:i.title.text,font:i.title.font},type:a({},i.type,{values:["-","linear","log","date","category"]}),autotypenumbers:i.autotypenumbers,autorange:i.autorange,rangemode:i.rangemode,range:a({},i.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,mirror:i.mirror,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,tickfont:i.tickfont,tickangle:i.tickangle,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:i.showline,linecolor:i.linecolor,linewidth:i.linewidth,showgrid:i.showgrid,gridcolor:a({},i.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:i.gridwidth,zeroline:i.zeroline,zerolinecolor:i.zerolinecolor,zerolinewidth:i.zerolinewidth,_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":294,"../../../lib/extend":417,"../../../plot_api/edit_types":453,"../../cartesian/layout_attributes":485}],505:[function(t,e,n){"use strict";var l=t("tinycolor2").mix,u=t("../../../lib"),c=t("../../../plot_api/plot_template"),f=t("./axis_attributes"),h=t("../../cartesian/type_defaults"),d=t("../../cartesian/axis_defaults"),p=["xaxis","yaxis","zaxis"];e.exports=function(t,e,n){function r(t,e){return u.coerce(s,a,f,t,e)}for(var i=0;i<p.length;i++){var a,o=p[i],s=t[o]||{};(a=c.newContainer(e,o))._id=o[0]+n.scene,a._name=o,h(s,a,r,n),d(s,a,r,{font:n.font,letter:o[0],data:n.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),r("gridcolor",l(a.color,n.bgColor,13600/187).toRgbString()),r("title.text",o[0]),a.setScale=u.noop,r("showspikes")&&(r("spikesides"),r("spikethickness"),r("spikecolor",a.color)),r("showaxeslabels"),r("showbackground")&&r("backgroundcolor")}}},{"../../../lib":424,"../../../plot_api/plot_template":460,"../../cartesian/axis_defaults":473,"../../cartesian/type_defaults":496,"./axis_attributes":504,tinycolor2:651}],506:[function(t,e,n){"use strict";var a=t("../../../lib/str2rgbarray"),o=t("../../../lib"),s=["xaxis","yaxis","zaxis"];function r(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}r.prototype.merge=function(t,e){for(var n=this,r=0;r<3;++r){var i=e[s[r]];i.visible?(n.labels[r]=t._meta?o.templateString(i.title.text,t._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(n.labelColor[r]=a(i.title.font.color)),i.title.font.family&&(n.labelFont[r]=i.title.font.family),i.title.font.size&&(n.labelSize[r]=i.title.font.size)),"showline"in i&&(n.lineEnable[r]=i.showline),"linecolor"in i&&(n.lineColor[r]=a(i.linecolor)),"linewidth"in i&&(n.lineWidth[r]=i.linewidth),"showgrid"in i&&(n.gridEnable[r]=i.showgrid),"gridcolor"in i&&(n.gridColor[r]=a(i.gridcolor)),"gridwidth"in i&&(n.gridWidth[r]=i.gridwidth),"log"===i.type?n.zeroEnable[r]=!1:"zeroline"in i&&(n.zeroEnable[r]=i.zeroline),"zerolinecolor"in i&&(n.zeroLineColor[r]=a(i.zerolinecolor)),"zerolinewidth"in i&&(n.zeroLineWidth[r]=i.zerolinewidth),"ticks"in i&&i.ticks?n.lineTickEnable[r]=!0:n.lineTickEnable[r]=!1,"ticklen"in i&&(n.lineTickLength[r]=n._defaultLineTickLength[r]=i.ticklen),"tickcolor"in i&&(n.lineTickColor[r]=a(i.tickcolor)),"tickwidth"in i&&(n.lineTickWidth[r]=i.tickwidth),"tickangle"in i&&(n.tickAngle[r]="auto"===i.tickangle?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(n.tickEnable[r]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(n.tickColor[r]=a(i.tickfont.color)),i.tickfont.family&&(n.tickFont[r]=i.tickfont.family),i.tickfont.size&&(n.tickSize[r]=i.tickfont.size)),"mirror"in i?-1!==["ticks","all","allticks"].indexOf(i.mirror)?(n.lineTickMirror[r]=!0,n.lineMirror[r]=!0):!0===i.mirror?(n.lineTickMirror[r]=!1,n.lineMirror[r]=!0):(n.lineTickMirror[r]=!1,n.lineMirror[r]=!1):n.lineMirror[r]=!1,"showbackground"in i&&!1!==i.showbackground?(n.backgroundEnable[r]=!0,n.backgroundColor[r]=a(i.backgroundcolor)):n.backgroundEnable[r]=!1):(n.tickEnable[r]=!1,n.labelEnable[r]=!1,n.lineEnable[r]=!1,n.lineTickEnable[r]=!1,n.gridEnable[r]=!1,n.zeroEnable[r]=!1,n.backgroundEnable[r]=!1)}},e.exports=function(t,e){var n=new r;return n.merge(t,e),n}},{"../../../lib":424,"../../../lib/str2rgbarray":446}],507:[function(t,e,n){"use strict";var i=t("../../../lib"),u=t("../../../components/color"),c=t("../../../registry"),a=t("../../subplot_defaults"),f=t("./axis_defaults"),o=t("./layout_attributes"),h=t("../../get_data").getSubplotData;function s(t,e,n,r){for(var i=n("bgcolor"),a=u.combine(i,r.paper_bgcolor),o=["up","center","eye"],s=0;s<o.length;s++)n("camera."+o[s]+".x"),n("camera."+o[s]+".y"),n("camera."+o[s]+".z");n("camera.projection.type");var l=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),i=n("aspectmode",l?"manual":"auto");l||(t.aspectratio=e.aspectratio={x:1,y:1,z:1},"manual"===i&&(e.aspectmode="auto"),t.aspectmode=e.aspectmode);i=h(r.fullData,"gl3d",r.id);f(t,e,{font:r.font,scene:r.id,data:i,bgColor:a,calendar:r.calendar,autotypenumbersDflt:r.autotypenumbersDflt,fullLayout:r.fullLayout}),c.getComponentMethod("annotations3d","handleDefaults")(t,e,r);i=r.getDfltFromLayout("dragmode");!1!==i&&(i||(i="orbit",t.camera&&t.camera.up?(a=t.camera.up.x,e=t.camera.up.y,0===(t=t.camera.up.z)||a&&e&&t&&!(.999<t/Math.sqrt(a*a+e*e+t*t))||(i="turntable")):i="turntable")),n("dragmode",i),n("hovermode",r.getDfltFromLayout("hovermode"))}e.exports=function(e,t,n){var r=1<t._basePlotModules.length;a(e,t,n,{type:"gl3d",attributes:o,handleDefaults:s,fullLayout:t,font:t.font,fullData:n,getDfltFromLayout:function(t){if(!r)return i.validate(e[t],o[t])?e[t]:void 0},autotypenumbersDflt:t.autotypenumbers,paper_bgcolor:t.paper_bgcolor,calendar:t.calendar})}},{"../../../components/color":294,"../../../lib":424,"../../../registry":525,"../../get_data":501,"../../subplot_defaults":523,"./axis_defaults":505,"./layout_attributes":508}],508:[function(t,e,n){"use strict";var r=t("./axis_attributes"),i=t("../../domain").attributes,a=t("../../../lib/extend").extendFlat,t=t("../../../lib").counterRegex;function o(t,e,n){return{x:{valType:"number",dflt:t,editType:"camera"},y:{valType:"number",dflt:e,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}e.exports={_arrayAttrRegexps:[t("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:a(o(0,0,1),{}),center:a(o(0,0,0),{}),eye:a(o(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:i({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:r,yaxis:r,zaxis:r,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":424,"../../../lib/extend":417,"../../domain":498,"./axis_attributes":504}],509:[function(t,e,n){"use strict";var r=t("../../../lib/str2rgbarray"),i=["xaxis","yaxis","zaxis"];function a(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}a.prototype.merge=function(t){for(var e=0;e<3;++e){var n=t[i[e]];n.visible?(this.enabled[e]=n.showspikes,this.colors[e]=r(n.spikecolor),this.drawSides[e]=n.spikesides,this.lineWidth[e]=n.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},e.exports=function(t){var e=new a;return e.merge(t),e}},{"../../../lib/str2rgbarray":446}],510:[function(t,e,n){"use strict";e.exports=function(t){for(var e=t.axesOptions,n=t.glplot.axesPixels,r=t.fullSceneLayout,i=[[],[],[]],a=0;a<3;++a){var o=r[d[a]];if(o._length=(n[a].hi-n[a].lo)*n[a].pixelsPerDataUnit/t.dataScale[a],Math.abs(o._length)===1/0||isNaN(o._length))i[a]=[];else{o._input_range=o.range.slice(),o.range[0]=n[a].lo/t.dataScale[a],o.range[1]=n[a].hi/t.dataScale[a],o._m=1/(t.dataScale[a]*n[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(--o.range[0],o.range[1]+=1);var s,l=o.tickmode;"auto"===o.tickmode&&(o.tickmode="linear",s=o.nticks||h.constrain(o._length/40,4,9),f.autoTicks(o,Math.abs(o.range[1]-o.range[0])/s));for(var u=f.calcTicks(o,{msUTC:!0}),c=0;c<u.length;++c)u[c].x=u[c].x*t.dataScale[a],"date"===o.type&&(u[c].text=u[c].text.replace(/\<br\>/g," "));i[a]=u,o.tickmode=l}}e.ticks=i;for(a=0;a<3;++a){p[a]=.5*(t.glplot.bounds[0][a]+t.glplot.bounds[1][a]);for(c=0;c<2;++c)e.bounds[c][a]=t.glplot.bounds[c][a]}t.contourLevels=function(t){for(var e=new Array(3),n=0;n<3;++n){for(var r=t[n],i=new Array(r.length),a=0;a<r.length;++a)i[a]=r[a].x;e[n]=i}return e}(i)};var f=t("../../cartesian/axes"),h=t("../../../lib"),d=["xaxis","yaxis","zaxis"],p=[0,0,0]},{"../../../lib":424,"../../cartesian/axes":471}],511:[function(t,e,n){"use strict";function r(t,e){for(var n,r=[0,0,0,0],i=0;i<4;++i)for(n=0;n<4;++n)r[n]+=t[4*i+n]*e[i];return r}e.exports=function(t,e){return r(t.projection,r(t.view,r(t.model,[e[0],e[1],e[2],1])))}},{}],512:[function(t,e,n){"use strict";var o,r,i=t("gl-plot3d"),a=i.createCamera,s=i.createScene,l=t("webgl-context"),u=t("has-passive-events"),h=t("../../registry"),P=t("../../lib"),v=t("../../plots/cartesian/axes"),b=t("../../components/fx"),L=t("../../lib/str2rgbarray"),c=t("../../lib/show_no_webgl_msg"),x=t("./project"),f=t("./layout/convert"),d=t("./layout/spikes"),_=t("./layout/tick_marks"),p=t("is-mobile")({tablet:!0,featureDetect:!0});function g(t,e){var n=document.createElement("div"),r=t.container;this.graphDiv=t.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",n.appendChild(i),this.svgContainer=i,n.id=t.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=e,this.id=t.id||"scene",this.fullSceneLayout=e[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(e,e[this.id]),this.spikeOptions=d(e[this.id]),this.container=n,this.staticMode=!!t.staticPlot,this.pixelRatio=this.pixelRatio||t.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=h.getComponentMethod("annotations3d","convert"),this.drawAnnotations=h.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}t=g.prototype;t.prepareOptions=function(){var t={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:p,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(r||(o=document.createElement("canvas"),r=l({canvas:o,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");t.gl=r,t.canvas=o}return t};var y=!0;t.tryCreatePlot=function(){var e=this.prepareOptions(),n=!0;try{this.glplot=s(e)}catch(t){if(this.staticMode||!y)n=!1;else try{P.warn(["webgl setup failed possibly due to",p?"disabling":"enabling","preserveDrawingBuffer config.","The device may not be supported by is-mobile module!","Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),p=e.glOptions.preserveDrawingBuffer=!e.glOptions.preserveDrawingBuffer,this.glplot=s(e)}catch(t){p=e.glOptions.preserveDrawingBuffer=!e.glOptions.preserveDrawingBuffer,n=!1}}return y=!1,n},t.initializeGLCamera=function(){var t=this.fullSceneLayout.camera,e="orthographic"===t.projection.type;this.camera=a(this.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:e,zoomMin:.01,zoomMax:100,mode:"orbit"})},t.initializeGLPlot=function(){var n=this;if(n.initializeGLCamera(),!n.tryCreatePlot())return c(n);n.traces={},n.make4thDimension();function r(){var t={};return n.isCameraChanged(o)&&(t[n.id+".camera"]=n.getCamera()),n.isAspectChanged(o)&&(t[n.id+".aspectratio"]=n.glplot.getAspectratio(),"manual"!==o[n.id].aspectmode&&(n.fullSceneLayout.aspectmode=o[n.id].aspectmode=t[n.id+".aspectmode"]="manual")),t}function i(t){var e;!1!==t.fullSceneLayout.dragmode&&(e=r(),t.saveLayout(o),t.graphDiv.emit("plotly_relayout",e))}var a=n.graphDiv,o=a.layout;return n.glplot.canvas&&(n.glplot.canvas.addEventListener("mouseup",function(){i(n)}),n.glplot.canvas.addEventListener("wheel",function(t){var e;a._context._scrollZoom.gl3d&&(n.camera._ortho&&(e=t.deltaX>t.deltaY?1.1:1/1.1,t=n.glplot.getAspectratio(),n.glplot.setAspectratio({x:e*t.x,y:e*t.y,z:e*t.z})),i(n))},!!u&&{passive:!1}),n.glplot.canvas.addEventListener("mousemove",function(){var t;!1!==n.fullSceneLayout.dragmode&&0!==n.camera.mouseListener.buttons&&(t=r(),n.graphDiv.emit("plotly_relayouting",t))}),n.staticMode||n.glplot.canvas.addEventListener("webglcontextlost",function(t){a&&a.emit&&a.emit("plotly_webglcontextlost",{event:t,layer:n.id})},!1)),n.glplot.oncontextloss=function(){n.recoverContext()},n.glplot.onrender=function(){n.render()},!0},t.render=function(){var n=this,t=n.graphDiv,e=n.svgContainer,r=n.container.getBoundingClientRect();t._fullLayout._calcInverseTransform(t);var i=t._fullLayout._invScaleX,a=t._fullLayout._invScaleY,o=r.width*i,s=r.height*a;e.setAttributeNS(null,"viewBox","0 0 "+o+" "+s),e.setAttributeNS(null,"width",o),e.setAttributeNS(null,"height",s),_(n),n.glplot.axes.update(n.axesOptions);for(var l,u,c,f,h,d=Object.keys(n.traces),p=null,g=n.glplot.selection,y=0;y<d.length;++y)"skip"!==(u=n.traces[d[y]]).data.hoverinfo&&u.handlePick(g)&&(p=u),u.setContourLevels&&u.setContourLevels();function m(t,e){t=n.fullSceneLayout[t];return v.tickText(t,t.d2l(e),"hover").text}null!==p?(l=x(n.glplot.cameraParams,g.dataCoordinate),u=p.data,c=t._fullData[u.index],f=g.index,i={xLabel:m("xaxis",g.traceCoordinate[0]),yLabel:m("yaxis",g.traceCoordinate[1]),zLabel:m("zaxis",g.traceCoordinate[2])},r=((h=b.castHoverinfo(c,n.fullLayout,f))||"").split("+"),a=h&&"all"===h,c.hovertemplate||a||(-1===r.indexOf("x")&&(i.xLabel=void 0),-1===r.indexOf("y")&&(i.yLabel=void 0),-1===r.indexOf("z")&&(i.zLabel=void 0),-1===r.indexOf("text")&&(g.textLabel=void 0),-1===r.indexOf("name")&&(p.name=void 0)),h=[],a="cone"===u.type||"streamtube"===u.type?(i.uLabel=m("xaxis",g.traceCoordinate[3]),!a&&-1===r.indexOf("u")||h.push("u: "+i.uLabel),i.vLabel=m("yaxis",g.traceCoordinate[4]),!a&&-1===r.indexOf("v")||h.push("v: "+i.vLabel),i.wLabel=m("zaxis",g.traceCoordinate[5]),!a&&-1===r.indexOf("w")||h.push("w: "+i.wLabel),i.normLabel=g.traceCoordinate[6].toPrecision(3),!a&&-1===r.indexOf("norm")||h.push("norm: "+i.normLabel),"streamtube"===u.type&&(i.divergenceLabel=g.traceCoordinate[7].toPrecision(3),!a&&-1===r.indexOf("divergence")||h.push("divergence: "+i.divergenceLabel)),g.textLabel&&h.push(g.textLabel),h.join("<br>")):"isosurface"===u.type||"volume"===u.type?(i.valueLabel=v.tickText(n._mockAxis,n._mockAxis.d2l(g.traceCoordinate[3]),"hover").text,h.push("value: "+i.valueLabel),g.textLabel&&h.push(g.textLabel),h.join("<br>")):g.textLabel,r={x:g.traceCoordinate[0],y:g.traceCoordinate[1],z:g.traceCoordinate[2],data:c._input,fullData:c,curveNumber:c.index,pointNumber:f},b.appendArrayPointValue(r,c,f),u._module.eventData&&(r=c._module.eventData(r,g,c,{},f)),h={points:[r]},n.fullSceneLayout.hovermode&&b.loneHover({trace:c,x:(.5+.5*l[0]/l[3])*o,y:(.5-.5*l[1]/l[3])*s,xLabel:i.xLabel,yLabel:i.yLabel,zLabel:i.zLabel,text:a,name:p.name,color:b.castHoverOption(c,f,"bgcolor")||p.color,borderColor:b.castHoverOption(c,f,"bordercolor"),fontFamily:b.castHoverOption(c,f,"font.family"),fontSize:b.castHoverOption(c,f,"font.size"),fontColor:b.castHoverOption(c,f,"font.color"),nameLength:b.castHoverOption(c,f,"namelength"),textAlign:b.castHoverOption(c,f,"align"),hovertemplate:P.castOption(c,f,"hovertemplate"),hovertemplateLabels:P.extendFlat({},r,i),eventData:[r]},{container:e,gd:t}),g.buttons&&g.distance<5?t.emit("plotly_click",h):t.emit("plotly_hover",h),h=h):(b.loneUnhover(e),t.emit("plotly_unhover",h)),n.drawAnnotations(n)},t.recoverContext=function(){var t=this;t.glplot.dispose();var e=function(){t.glplot.gl.isContextLost()?requestAnimationFrame(e):t.initializeGLPlot()?t.plot.apply(t,t.plotArgs):P.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(e)};var R=["xaxis","yaxis","zaxis"];t.plot=function(t,e,n){var r=this;if(r.plotArgs=[t,e,n],!r.glplot.contextLost){var i,a,o,s,l=e[r.id],u=n[r.id];r.fullLayout=e,r.fullSceneLayout=l,r.axesOptions.merge(e,l),r.spikeOptions.merge(l),r.setViewport(l),r.updateFx(l.dragmode,l.hovermode),r.camera.enableWheel=r.graphDiv._context._scrollZoom.gl3d,r.glplot.setClearColor(L(l.bgcolor)),r.setConvert(o),t?Array.isArray(t)||(t=[t]):t=[];var c=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(O=0;O<t.length;++O)!0===(i=t[O]).visible&&0!==i._length&&function(t,e,n){for(var r=t.fullSceneLayout,i=0;i<3;i++){var a=R[i],o=a.charAt(0),s=r[a],l=e[o],u=e[o+"calendar"],c=e["_"+o+"length"];if(P.isArrayOrTypedArray(l))for(var f,h=0;h<(c||l.length);h++)if(P.isArrayOrTypedArray(l[h]))for(var d=0;d<l[h].length;++d)f=s.d2l(l[h][d],0,u),!isNaN(f)&&isFinite(f)&&(n[0][i]=Math.min(n[0][i],f),n[1][i]=Math.max(n[1][i],f));else f=s.d2l(l[h],0,u),!isNaN(f)&&isFinite(f)&&(n[0][i]=Math.min(n[0][i],f),n[1][i]=Math.max(n[1][i],f));else n[0][i]=Math.min(n[0][i],0),n[1][i]=Math.max(n[1][i],c-1)}}(this,i,c);!function(t,e){for(var n=t.fullSceneLayout,r=n.annotations||[],i=0;i<3;i++)for(var a=R[i],o=a.charAt(0),s=n[a],l=0;l<r.length;l++){var u=r[l];u.visible&&(u=s.r2l(u[o]),!isNaN(u)&&isFinite(u)&&(e[0][i]=Math.min(e[0][i],u),e[1][i]=Math.max(e[1][i],u)))}}(this,c);var f=[1,1,1];for(x=0;x<3;++x)c[1][x]===c[0][x]?f[x]=1:f[x]=1/(c[1][x]-c[0][x]);for(r.dataScale=f,r.convertAnnotations(this),O=0;O<t.length;++O)!0===(i=t[O]).visible&&0!==i._length&&((a=r.traces[i.uid])?a.data.type===i.type?a.update(i):(a.dispose(),a=i._module.plot(this,i),r.traces[i.uid]=a):(a=i._module.plot(this,i),r.traces[i.uid]=a),a.name=i.name);var h=Object.keys(r.traces);t:for(O=0;O<h.length;++O){for(x=0;x<t.length;++x)if(t[x].uid===h[O]&&!0===t[x].visible&&0!==t[x]._length)continue t;(a=r.traces[h[O]]).dispose(),delete r.traces[h[O]]}r.glplot.objects.sort(function(t,e){return t._trace.data.index-e._trace.data.index});var d=[[0,0,0],[0,0,0]],p=[],g={};for(O=0;O<3;++O){if((s=(o=l[R[O]]).type)in g?(g[s].acc*=f[O],g[s].count+=1):g[s]={acc:f[O],count:1},o.autorange){d[0][O]=1/0,d[1][O]=-1/0;for(var y,m=r.glplot.objects,v=r.fullSceneLayout.annotations||[],b=o._name.charAt(0),x=0;x<m.length;x++){var _=m[x],w=_.bounds,k=_._trace.data._pad||0;"ErrorBars"===_.constructor.name&&o._lowerLogErrorBound?d[0][O]=Math.min(d[0][O],o._lowerLogErrorBound):d[0][O]=Math.min(d[0][O],w[0][O]/f[O]-k),d[1][O]=Math.max(d[1][O],w[1][O]/f[O]+k)}for(x=0;x<v.length;x++){var M=v[x];M.visible&&(M=o.r2l(M[b]),d[0][O]=Math.min(d[0][O],M),d[1][O]=Math.max(d[1][O],M))}"rangemode"in o&&"tozero"===o.rangemode&&(d[0][O]=Math.min(d[0][O],0),d[1][O]=Math.max(d[1][O],0)),d[0][O]>d[1][O]?(d[0][O]=-1,d[1][O]=1):(y=d[1][O]-d[0][O],d[0][O]-=y/32,d[1][O]+=y/32),"reversed"===o.autorange&&(T=d[0][O],d[0][O]=d[1][O],d[1][O]=T)}else{var T=o.range;d[0][O]=o.r2l(T[0]),d[1][O]=o.r2l(T[1])}d[0][O]===d[1][O]&&(--d[0][O],d[1][O]+=1),p[O]=d[1][O]-d[0][O],r.glplot.setBounds(O,{min:d[0][O]*f[O],max:d[1][O]*f[O]})}var A=l.aspectmode;if("cube"===A)S=[1,1,1];else if("manual"===A)var n=l.aspectratio,S=[n.x,n.y,n.z];else{if("auto"!==A&&"data"!==A)throw new Error("scene.js aspectRatio was not one of the enumerated types");for(var E=[1,1,1],O=0;O<3;++O){var C=g[s=(o=l[R[O]]).type];E[O]=Math.pow(C.acc,1/C.count)/f[O]}S="data"===A||Math.max.apply(null,E)/Math.min.apply(null,E)<=4?E:[1,1,1]}l.aspectratio.x=u.aspectratio.x=S[0],l.aspectratio.y=u.aspectratio.y=S[1],l.aspectratio.z=u.aspectratio.z=S[2],r.glplot.setAspectratio(l.aspectratio),r.viewInitial.aspectratio||(r.viewInitial.aspectratio={x:l.aspectratio.x,y:l.aspectratio.y,z:l.aspectratio.z}),r.viewInitial.aspectmode||(r.viewInitial.aspectmode=l.aspectmode);u=l.domain||null,S=e._size||null;u&&S&&((e=r.container.style).position="absolute",e.left=S.l+u.x[0]*S.w+"px",e.top=S.t+(1-u.y[1])*S.h+"px",e.width=S.w*(u.x[1]-u.x[0])+"px",e.height=S.h*(u.y[1]-u.y[0])+"px"),r.glplot.redraw()}},t.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},t.getCamera=function(){var t;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(t=this.camera).up[0],y:t.up[1],z:t.up[2]},center:{x:t.center[0],y:t.center[1],z:t.center[2]},eye:{x:t.eye[0],y:t.eye[1],z:t.eye[2]},projection:{type:!0===t._ortho?"orthographic":"perspective"}}},t.setViewport=function(t){var e,n=t.camera;this.camera.lookAt.apply(this,[[(e=n).eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]),this.glplot.setAspectratio(t.aspectratio),"orthographic"===n.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},t.isCameraChanged=function(t){var e=this.getCamera(),n=P.nestedProperty(t,this.id+".camera").get();var r,i,a,o,s,l,u=!1;if(void 0===n)u=!0;else{for(var c=0;c<3;c++)for(var f=0;f<3;f++)if(r=e,o=f,l=s=void 0,l=["x","y","z"],!(i=n)[(s=["up","center","eye"])[a=c]]||r[s[a]][l[o]]!==i[s[a]][l[o]]){u=!0;break}(!n.projection||e.projection&&e.projection.type!==n.projection.type)&&(u=!0)}return u},t.isAspectChanged=function(t){var e=this.glplot.getAspectratio(),t=P.nestedProperty(t,this.id+".aspectratio").get();return void 0===t||t.x!==e.x||t.y!==e.y||t.z!==e.z},t.saveLayout=function(t){var e,n,r,i,a,o,s=this,l=s.fullLayout,u=s.isCameraChanged(t),c=s.isAspectChanged(t),f=u||c;return f&&(o={},u&&(e=s.getCamera(),a=(n=P.nestedProperty(t,s.id+".camera")).get(),o[s.id+".camera"]=a),c&&(r=s.glplot.getAspectratio(),a=(i=P.nestedProperty(t,s.id+".aspectratio")).get(),o[s.id+".aspectratio"]=a),h.call("_storeDirectGUIEdit",t,l._preGUI,o),u&&(n.set(e),P.nestedProperty(l,s.id+".camera").set(e)),c&&(i.set(r),P.nestedProperty(l,s.id+".aspectratio").set(r),s.glplot.redraw())),f},t.updateFx=function(t,e){var n,r,i,a,o,s,l=this.camera;l&&("orbit"===t?(l.mode="orbit",l.keyBindingMode="rotate"):"turntable"===t?(l.up=[0,0,1],l.mode="turntable",l.keyBindingMode="rotate",n=(s=this.graphDiv)._fullLayout,o=(r=this.fullSceneLayout.camera).up.x,i=r.up.y,(a=r.up.z)/Math.sqrt(o*o+i*i+a*a)<.999&&((o={})[i=this.id+".camera.up"]=a={x:0,y:0,z:1},s=s.layout,h.call("_storeDirectGUIEdit",s,n._preGUI,o),r.up=a,P.nestedProperty(s,i).set(a))):l.keyBindingMode=t),this.fullSceneLayout.hovermode=e},t.toImage=function(t){t=t||"png",this.staticMode&&this.container.appendChild(o),this.glplot.redraw();var e=this.glplot.gl,n=e.drawingBufferWidth,u=e.drawingBufferHeight;e.bindFramebuffer(e.FRAMEBUFFER,null);var r=new Uint8Array(n*u*4);e.readPixels(0,0,n,u,e.RGBA,e.UNSIGNED_BYTE,r),function(t,e){for(var n=0,r=u-1;n<r;++n,--r)for(var i=0;i<e;++i)for(var a=0;a<4;++a){var o=4*(e*n+i)+a,s=4*(e*r+i)+a,l=t[o];t[o]=t[s],t[s]=l}}(r,n),function(t,e,n){for(var r=0;r<n;++r)for(var i=0;i<e;++i){var a=4*(e*r+i),o=t[3+a];if(0<o)for(var s=255/o,l=0;l<3;++l)t[a+l]=Math.min(s*t[a+l],255)}}(r,n,u);var i=document.createElement("canvas");i.width=n,i.height=u;var a,e=i.getContext("2d"),n=e.createImageData(n,u);switch(n.data.set(r),e.putImageData(n,0,0),t){case"jpeg":a=i.toDataURL("image/jpeg");break;case"webp":a=i.toDataURL("image/webp");break;default:a=i.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(o),a},t.setConvert=function(){for(var t=0;t<3;t++){var e=this.fullSceneLayout[R[t]];v.setConvert(e,this.fullLayout),e.setScale=P.noop}},t.make4thDimension=function(){var t=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},v.setConvert(this._mockAxis,t)},e.exports=g},{"../../components/fx":334,"../../lib":424,"../../lib/show_no_webgl_msg":444,"../../lib/str2rgbarray":446,"../../plots/cartesian/axes":471,"../../registry":525,"./layout/convert":506,"./layout/spikes":509,"./layout/tick_marks":510,"./project":511,"gl-plot3d":158,"has-passive-events":196,"is-mobile":205,"webgl-context":666}],513:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){r=r||t.length;for(var i=new Array(r),a=0;a<r;a++)i[a]=[t[a],e[a],n[a]];return i}},{}],514:[function(t,e,n){"use strict";var r=t("./font_attributes"),i=t("./animation_attributes"),a=t("../components/color/attributes"),o=t("../components/shapes/draw_newshape/attributes"),s=t("./pad_attributes"),l=t("../lib/extend").extendFlat,t=r({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=a.defaultLine,e.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},i.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":293,"../components/shapes/draw_newshape/attributes":376,"../lib/extend":417,"./animation_attributes":465,"./font_attributes":499,"./pad_attributes":515}],515:[function(t,e,n){"use strict";e.exports=function(t){t=t.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},{}],516:[function(t,e,n){"use strict";var T=t("d3"),A=t("d3-time-format").timeFormatLocale,E=t("fast-isnumeric"),C=t("../registry"),m=t("../plot_api/plot_schema"),k=t("../plot_api/plot_template"),P=t("../lib"),g=t("../components/color"),v=t("../constants/numerical").BADNUM,L=t("./cartesian/axis_ids"),S=t("./cartesian/handle_outline").clearSelect,i=t("./animation_attributes"),a=t("./frame_attributes"),o=t("../plots/get_data").getModuleCalcData,O=P.relinkPrivateKeys,R=P._,j=e.exports={};P.extendFlat(j,C),j.attributes=t("./attributes"),j.attributes.type.values=j.allTypes,j.fontAttrs=t("./font_attributes"),j.layoutAttributes=t("./layout_attributes"),j.fontWeight="normal";var M=j.transformsRegistry,t=t("./command");j.executeAPICommand=t.executeAPICommand,j.computeAPICommandBindings=t.computeAPICommandBindings,j.manageCommandObserver=t.manageCommandObserver,j.hasSimpleAPICommandBindings=t.hasSimpleAPICommandBindings,j.redrawText=function(e){var t=(e=P.getGraphDiv(e))._fullLayout||{};if(!(!(t._has&&t._has("polar"))&&e.data&&e.data[0]&&e.data[0].r))return new Promise(function(t){setTimeout(function(){C.getComponentMethod("annotations","draw")(e),C.getComponentMethod("legend","draw")(e),C.getComponentMethod("colorbar","draw")(e),t(j.previousPromises(e))},300)})},j.resize=function(n){var r;n=P.getGraphDiv(n);var t=new Promise(function(e,t){n&&!P.isHidden(n)||t(new Error("Resize must be passed a displayed plot div element.")),n._redrawTimer&&clearTimeout(n._redrawTimer),n._resolveResize&&(r=n._resolveResize),n._resolveResize=e,n._redrawTimer=setTimeout(function(){var t;!n.layout||n.layout.width&&n.layout.height||P.isHidden(n)?e(n):(delete n.layout.width,delete n.layout.height,t=n.changed,n.autoplay=!0,C.call("relayout",n,{autosize:!0}).then(function(){n.changed=t,n._resolveResize===e&&(delete n._resolveResize,e(n))}))},100)});return r&&r(t),t},j.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},j.addLinks=function(t){var e,n,r,i;(t._context.showLink||t._context.showSources)&&(n=t._fullLayout,e=(i=P.ensureSingle(n._paper,"text","js-plot-link-container",function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:g.defaultLine,"pointer-events":"all"}).each(function(){var t=T.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)})})).node(),r={y:n._paper.attr("height")-9},document.body.contains(e)&&e.getComputedTextLength()>=n.width-20?(r["text-anchor"]="start",r.x=5):(r["text-anchor"]="end",r.x=n._paper.attr("width")-7),i.attr(r),n=i.select(".js-link-to-tool"),r=i.select(".js-link-spacer"),i=i.select(".js-sourcelinks"),t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var n,r=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));t._context.sendData?r.on("click",function(){j.sendDataToCloud(t)}):(n=window.location.pathname.split("/"),e=window.location.search,r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+e}))}(t,n),r.text(n.text()&&i.text()?" - ":""))},j.sendDataToCloud=function(t){var e=(window.PLOTLYENV||{}).BASE_URL||t._context.plotlyServerURL;if(e){t.emit("plotly_beforeexport");var n=T.select(t).append("div").attr("id","hiddenform").style("display","none"),e=n.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return e.append("input").attr({type:"text",name:"data"}).node().value=j.graphJson(t,!1,"keepdata"),e.node().submit(),n.remove(),t.emit("plotly_afterexport"),!1}};var N=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],D=["year","month","dayMonth","dayMonthYear"];function z(t,i){var e=(e=t._context.locale)||"en-US",a=!1,o={};function n(t){for(var e=!0,n=0;n<i.length;n++){var r=i[n];o[r]||(t[r]?o[r]=t[r]:e=!1)}e&&(a=!0)}for(var r=0;r<2;r++){for(var s=t._context.locales,l=0;l<2;l++){var u=(s[e]||{}).format;if(u&&(n(u),a))break;s=C.localeRegistry}var c=e.split("-")[0];if(a||c===e)break;e=c}return a||n(C.localeRegistry.en.format),o}function y(t){var e=t.transforms;if(Array.isArray(e)&&e.length)for(var n=0;n<e.length;n++){var r=e[n],r=r._module||M[r.type];if(r&&r.makesData)return!0}return!1}function u(t){return"string"==typeof t&&"px"===t.substr(t.length-2)&&parseFloat(t)}function I(t){var e=t.margin;t._size||((e=t._size={l:Math.round(e.l),r:Math.round(e.r),t:Math.round(e.t),b:Math.round(e.b),p:Math.round(e.pad)}).w=Math.round(t.width)-e.l-e.r,e.h=Math.round(t.height)-e.t-e.b),t._pushmargin||(t._pushmargin={}),t._pushmarginIds||(t._pushmarginIds={})}j.supplyDefaults=function(t,e){var n=e&&e.skipUpdateCalc,r=t._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var i=t._fullLayout={},a=t.layout||{},o=t._fullData||[],s=t._fullData=[],l=t.data||[],u=t.calcdata||[],c=t._context||{};t._transitionData||j.createTransitionData(t),i._dfltTitle={plot:R(t,"Click to enter Plot title"),x:R(t,"Click to enter X axis title"),y:R(t,"Click to enter Y axis title"),colorbar:R(t,"Click to enter Colorscale title"),annotation:R(t,"new text")},i._traceWord=R(t,"trace");var f,h=z(t,N);i._mapboxAccessToken=c.mapboxAccessToken,r._initialAutoSizeIsDone?(e=r.width,f=r.height,j.supplyLayoutGlobalDefaults(a,i,h),a.width||(i.width=e),a.height||(i.height=f),j.sanitizeMargins(i)):(j.supplyLayoutGlobalDefaults(a,i,h),p=!a.width||!a.height,f=i.autosize,p&&(f||c.autosizable)?j.plotAutoSize(t,a,i):p&&j.sanitizeMargins(i),!f&&p&&(a.width=i.width,a.height=i.height)),i._d3locale=(p=h,h=i.separators,p.decimal=h.charAt(0),p.thousands=h.charAt(1),{numberFormat:T.locale(p).numberFormat,timeFormat:A(p).utcFormat}),i._extraFormat=z(t,D),i._initialAutoSizeIsDone=!0,i._dataLength=l.length,i._modules=[],i._visibleModules=[],i._basePlotModules=[];var d=i._subplots=function(){var t,e,n=C.collectableSubplotTypes,r={};if(!n){n=[];var i,a=C.subplotsRegistry;for(i in a){var o=a[i].attr;if(o&&(n.push(i),Array.isArray(o)))for(e=0;e<o.length;e++)P.pushUnique(n,o[e])}}for(t=0;t<n.length;t++)r[n[t]]=[];return r}(),h=i._splomAxes={x:{},y:{}},p=i._splomSubplots={};i._splomGridDflt={},i._scatterStackOpts={},i._firstScatter={},i._alignmentOpts={},i._colorAxes={},i._requestRangeslider={},i._traceUids=function(t,e){var n,r,i=e.length,a=[];for(n=0;n<t.length;n++){var o=t[n]._fullInput;o!==r&&a.push(o),r=o}var s=a.length,l=new Array(i),u={};function c(t,e){l[e]=t,u[t]=1}function f(t,e){return t&&"string"==typeof t&&!u[t]&&(c(t,e),1)}for(n=0;n<i;n++){var h=e[n].uid;"number"==typeof h&&(h=String(h)),f(h,n)||n<s&&f(a[n].uid,n)||c(P.randstr(u),n)}return l}(o,l),i._globalTransforms=(t._context||{}).globalTransforms,j.supplyDataDefaults(l,s,a,i);var g=Object.keys(h.x),y=Object.keys(h.y);if(1<g.length&&1<y.length){for(C.getComponentMethod("grid","sizeDefaults")(a,i),x=0;x<g.length;x++)P.pushUnique(d.xaxis,g[x]);for(x=0;x<y.length;x++)P.pushUnique(d.yaxis,y[x]);for(var m in p)P.pushUnique(d.cartesian,m)}if(i._has=j._hasPlotType.bind(i),o.length===s.length)for(x=0;x<s.length;x++)O(s[x],o[x]);j.supplyLayoutModuleDefaults(a,i,s,t._transitionData);for(var v=i._visibleModules,b=[],x=0;x<v.length;x++){var _=v[x].crossTraceDefaults;_&&P.pushUnique(b,_)}for(x=0;x<b.length;x++)b[x](s,i);i._hasOnlyLargeSploms=1===i._basePlotModules.length&&"splom"===i._basePlotModules[0].name&&15<g.length&&15<y.length&&0===i.shapes.length&&0===i.images.length,i._hasCartesian=i._has("cartesian"),i._hasGeo=i._has("geo"),i._hasGL3D=i._has("gl3d"),i._hasGL2D=i._has("gl2d"),i._hasTernary=i._has("ternary"),i._hasPie=i._has("pie"),j.linkSubplots(s,i,o,r),j.cleanPlot(s,i,o,r);p=!(!r._has||!r._has("gl2d")),a=!(!i._has||!i._has("gl2d")),p=!(!r._has||!r._has("cartesian"))||p,a=!(!i._has||!i._has("cartesian"))||a;p&&!a?r._bgLayer.remove():a&&!p&&(i._shouldCreateBgLayer=!0),r._zoomlayer&&!t._dragging&&S({_fullLayout:r}),function(t,e){var n,r=[];e.meta&&(n=e._meta={meta:e.meta,layout:{meta:e.meta}});for(var i=0;i<t.length;i++){var a=t[i];a.meta?r[a.index]=a._meta={meta:a.meta}:e.meta&&(a._meta={meta:e.meta}),e.meta&&(a._meta.layout={meta:e.meta})}r.length&&((n=n||(e._meta={})).data=r)}(s,i),O(i,r),C.getComponentMethod("colorscale","crossTraceDefaults")(s,i),i._preGUI||(i._preGUI={}),i._tracePreGUI||(i._tracePreGUI={});var w,k=i._tracePreGUI,M={};for(w in k)M[w]="old";for(x=0;x<s.length;x++)M[w=s[x]._fullInput.uid]||(k[w]={}),M[w]="new";for(w in M)"old"===M[w]&&delete k[w];I(i),C.getComponentMethod("rangeslider","makeData")(i),n||u.length!==s.length||j.supplyDefaultsUpdateCalc(u,s)}},j.supplyDefaultsUpdateCalc=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=(t[n]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform)for(var o,s,l=a._arrayAttrs,u=0;u<l.length;u++)o=l[u],s=P.nestedProperty(a,o).get().slice(),P.nestedProperty(r,o).set(s);i.trace=r}}},j.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},j._hasPlotType=function(t){for(var e=this._basePlotModules||[],n=0;n<e.length;n++)if(e[n].name===t)return!0;var r=this._modules||[];for(n=0;n<r.length;n++){var i=r[n].name;if(i===t)return!0;i=C.modules[i];if(i&&i.categories[t])return!0}return!1},j.cleanPlot=function(t,e,n,r){for(var i=r._basePlotModules||[],a=0;a<i.length;a++){var o=i[a];o.clean&&o.clean(t,e,n,r)}var s=r._has&&r._has("gl"),l=e._has&&e._has("gl");s&&!l&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var u=!!r._infolayer;t:for(a=0;a<n.length;a++){for(var c=n[a].uid,f=0;f<t.length;f++)if(c===t[f].uid)continue t;u&&r._infolayer.select(".cb"+c).remove()}},j.linkSubplots=function(t,e,n,r){for(var i=r._plots||{},a=e._plots={},r=e._subplots,o={_fullData:t,_fullLayout:e},s=r.cartesian.concat(r.gl2d||[]),l=0;l<s.length;l++){var u,c=s[l],f=i[c],h=L.getFromId(o,c,"x"),d=L.getFromId(o,c,"y");for(f?u=a[c]=f:(u=a[c]={}).id=c,h._counterAxes.push(d._id),d._counterAxes.push(h._id),h._subplotsWith.push(c),d._subplotsWith.push(c),u.xaxis=h,u.yaxis=d,u._hasClipOnAxisFalse=!1,x=0;x<t.length;x++){var p=t[x];if(p.xaxis===u.xaxis._id&&p.yaxis===u.yaxis._id&&!1===p.cliponaxis){u._hasClipOnAxisFalse=!0;break}}}var g,y=L.list(o,null,!0);for(l=0;l<y.length;l++){var m=null;(g=y[l]).overlaying&&(m=L.getFromId(o,g.overlaying))&&m.overlaying&&(g.overlaying=!1,m=null),g._mainAxis=m||g,m&&(g.domain=m.domain.slice()),g._anchorAxis="free"===g.anchor?null:L.getFromId(o,g.anchor)}for(l=0;l<y.length;l++)if((g=y[l])._counterAxes.sort(L.idSort),g._subplotsWith.sort(P.subplotSort),g._mainSubplot=function(t,e){var n={_fullLayout:e},r="x"===t._id.charAt(0),i=t._mainAxis._anchorAxis,a="",o="",s="";i&&(s=i._mainAxis._id,a=r?t._id+s:s+t._id);if(!a||!e._plots[a]){a="";for(var l=t._counterAxes,u=0;u<l.length;u++){var c=l[u],f=r?t._id+c:c+t._id;o=o||f;c=L.getFromId(n,c);if(s&&c.overlaying===s){a=f;break}}}return a||o}(g,e),g._counterAxes.length&&(g.spikemode&&-1!==g.spikemode.indexOf("across")||g.automargin&&g.mirror&&"free"!==g.anchor||C.getComponentMethod("rangeslider","isVisible")(g))){for(var v=1,b=0,x=0;x<g._counterAxes.length;x++)var _=L.getFromId(o,g._counterAxes[x]),v=Math.min(v,_.domain[0]),b=Math.max(b,_.domain[1]);v<b&&(g._counterDomainMin=v,g._counterDomainMax=b)}},j.clearExpandedTraceDefaultColors=function(t){var i,a,e;for(a=[],(i=t._module._colorAttrs)||(t._module._colorAttrs=i=[],m.crawl(t._module.attributes,function(t,e,n,r){a[r]=e,a.length=r+1,"color"===t.valType&&void 0===t.dflt&&i.push(a.join("."))})),e=0;e<i.length;e++)P.nestedProperty(t,"_input."+i[e]).get()||P.nestedProperty(t,i[e]).set(null)},j.supplyDataDefaults=function(t,n,e,r){var i,a=r._modules,o=r._visibleModules,s=r._basePlotModules,l=0,u=0;function c(t){n.push(t);var e=t._module;e&&(P.pushUnique(a,e),!0===t.visible&&P.pushUnique(o,e),P.pushUnique(s,t._module.basePlotModule),l++,!1!==t._input.visible&&u++)}r._transformModules=[];for(var f,h,d={},p=[],g=(e.template||{}).data||{},y=k.traceTemplater(g),m=0;m<t.length;m++){if(i=t[m],(h=y.newTrace(i)).uid=r._traceUids[m],j.supplyTraceDefaults(i,h,u,r,m),h.index=m,h._input=i,h._expandedIndex=l,h.transforms&&h.transforms.length)for(var v=!1!==i.visible&&!1===h.visible,b=function(t,e,n,r){for(var i=t.transforms,a=[t],o=0;o<i.length;o++){var s=i[o],l=M[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:t,fullData:e,layout:n,fullLayout:r,transformIndex:o}))}return a}(h,n,e,r),x=0;x<b.length;x++){var _=b[x],w={_template:h._template,type:h.type,uid:h.uid+x};v&&!1===_.visible&&delete _.visible,j.supplyTraceDefaults(_,w,l,r,m),O(w,_),w.index=m,w._input=i,w._fullInput=h,w._expandedIndex=l,w._expandedInput=_,c(w)}else c((h._fullInput=h)._expandedInput=h);C.traceIs(h,"carpetAxis")&&(d[h.carpet]=h),C.traceIs(h,"carpetDependent")&&p.push(m)}for(m=0;m<p.length;m++)(h=n[p[m]]).visible&&(f=d[h.carpet],(h._carpet=f)&&f.visible?(h.xaxis=f.xaxis,h.yaxis=f.yaxis):h.visible=!1)},j.supplyAnimationDefaults=function(n){var t;n=n||{};var r={};function e(t,e){return P.coerce(n||{},r,i,t,e)}if(e("mode"),e("direction"),e("fromcurrent"),Array.isArray(n.frame))for(r.frame=[],t=0;t<n.frame.length;t++)r.frame[t]=j.supplyAnimationFrameDefaults(n.frame[t]||{});else r.frame=j.supplyAnimationFrameDefaults(n.frame||{});if(Array.isArray(n.transition))for(r.transition=[],t=0;t<n.transition.length;t++)r.transition[t]=j.supplyAnimationTransitionDefaults(n.transition[t]||{});else r.transition=j.supplyAnimationTransitionDefaults(n.transition||{});return r},j.supplyAnimationFrameDefaults=function(n){var r={};function t(t,e){return P.coerce(n||{},r,i.frame,t,e)}return t("duration"),t("redraw"),r},j.supplyAnimationTransitionDefaults=function(n){var r={};function t(t,e){return P.coerce(n||{},r,i.transition,t,e)}return t("duration"),t("easing"),r},j.supplyFrameDefaults=function(n){var r={};function t(t,e){return P.coerce(n,r,a,t,e)}return t("group"),t("name"),t("traces"),t("baseframe"),t("data"),t("layout"),r},j.supplyTraceDefaults=function(n,r,t,e,i){var a,o=e.colorway||g.defaults,s=o[t%o.length];function l(t,e){return P.coerce(n,r,j.attributes,t,e)}t=l("visible");l("type"),l("name",e._traceWord+" "+i),l("uirevision",e.uirevision);o=j.getModule(r);if(r._module=o){var i=o.basePlotModule,u=i.attr,c=i.attributes;if(u&&c){var f=e._subplots,h="";if(t||"gl2d"!==i.name){if(Array.isArray(u))for(a=0;a<u.length;a++){var d=u[a],p=P.coerce(n,r,c,d);f[d]&&P.pushUnique(f[d],p),h+=p}else h=P.coerce(n,r,c,u);f[i.name]&&P.pushUnique(f[i.name],h)}}}return t&&(l("customdata"),l("ids"),l("meta"),C.traceIs(r,"showLegend")?(P.coerce(n,r,(o.attributes.showlegend?o:j).attributes,"showlegend"),l("legendgroup"),r._dfltShowLegend=!0):r._dfltShowLegend=!1,o&&o.supplyDefaults(n,r,s,e),C.traceIs(r,"noOpacity")||l("opacity"),C.traceIs(r,"notLegendIsolatable")&&(r.visible=!!r.visible),C.traceIs(r,"noHover")||(r.hovertemplate||P.coerceHoverinfo(n,r,e),"parcats"!==r.type&&C.getComponentMethod("fx","supplyDefaults")(n,r,s,e)),o&&o.selectPoints&&l("selectedpoints"),j.supplyTransformDefaults(n,r,e)),r},j.hasMakesDataTransform=y,j.supplyTransformDefaults=function(t,e,n){if(e._length||y(t)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(t.transforms)||0!==r.length)for(var a=t.transforms||[],o=r.concat(a),s=e.transforms=[],l=0;l<o.length;l++){var u,c=o[l],f=c.type,h=M[f],d=!(c._module&&c._module===h),p=h&&"function"==typeof h.transform;h||P.warn("Unrecognized transform type "+f+"."),h&&h.supplyDefaults&&(d||p)?((u=h.supplyDefaults(c,e,n,t)).type=f,u._module=h,P.pushUnique(i,h)):u=P.extendFlat({},c),s.push(u)}}},j.supplyLayoutGlobalDefaults=function(n,r,t){function e(t,e){return P.coerce(n,r,j.layoutAttributes,t,e)}var i=n.template;P.isPlainObject(i)&&(r.template=i,r._template=i.layout,r._dataTemplate=i.data),e("autotypenumbers");i=P.coerceFont(e,"font");e("title.text",r._dfltTitle.plot),P.coerceFont(e,"title.font",{family:i.family,size:Math.round(1.4*i.size),color:i.color}),e("title.xref"),e("title.yref"),e("title.x"),e("title.y"),e("title.xanchor"),e("title.yanchor"),e("title.pad.t"),e("title.pad.r"),e("title.pad.b"),e("title.pad.l"),e("uniformtext.mode")&&e("uniformtext.minsize"),e("autosize",!(n.width&&n.height)),e("width"),e("height"),e("margin.l"),e("margin.r"),e("margin.t"),e("margin.b"),e("margin.pad"),e("margin.autoexpand"),n.width&&n.height&&j.sanitizeMargins(r),C.getComponentMethod("grid","sizeDefaults")(n,r),e("paper_bgcolor"),e("separators",t.decimal+t.thousands),e("hidesources"),e("colorway"),e("datarevision");i=e("uirevision");e("editrevision",i),e("selectionrevision",i),e("modebar.orientation"),e("modebar.bgcolor",g.addOpacity(r.paper_bgcolor,.5));t=g.contrast(g.rgb(r.modebar.bgcolor));e("modebar.color",g.addOpacity(t,.3)),e("modebar.activecolor",g.addOpacity(t,.7)),e("modebar.uirevision",i),C.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(n,r,e),e("meta"),P.isPlainObject(n.transition)&&(e("transition.duration"),e("transition.easing"),e("transition.ordering")),C.getComponentMethod("calendars","handleDefaults")(n,r,"calendar"),C.getComponentMethod("fx","supplyLayoutGlobalDefaults")(n,r,e)},j.plotAutoSize=function(t,e,n){var r,i,a=t._context||{},o=a.frameMargins,s=P.isPlotDiv(t);s&&t.emit("plotly_autosize"),a.fillFrame?(r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden"):(r=u((s=s?window.getComputedStyle(t):{}).width)||u(s.maxWidth)||n.width,i=u(s.height)||u(s.maxHeight)||n.height,E(o)&&0<o&&(l=1-2*o,r=Math.round(l*r),i=Math.round(l*i)));var o=j.layoutAttributes.width.min,l=j.layoutAttributes.height.min;r<o&&(r=o),i<l&&(i=l);l=!e.width&&1<Math.abs(n.width-r),e=!e.height&&1<Math.abs(n.height-i);(e||l)&&(l&&(n.width=r),e&&(n.height=i)),t._initialAutoSize||(t._initialAutoSize={width:r,height:i}),j.sanitizeMargins(n)},j.supplyLayoutModuleDefaults=function(t,e,n,r){var i,a,o,s=C.componentsRegistry,l=e._basePlotModules,u=C.subplotsRegistry.cartesian;for(i in s)(a=s[i]).includeBasePlot&&a.includeBasePlot(t,e);for(o in l.length||l.push(u),e._has("cartesian")&&(C.getComponentMethod("grid","contentDefaults")(t,e),u.finalizeSubplots(t,e)),e._subplots)e._subplots[o].sort(P.subplotSort);for(f=0;f<l.length;f++)(a=l[f]).supplyLayoutDefaults&&a.supplyLayoutDefaults(t,e,n);for(var c=e._modules,f=0;f<c.length;f++)(a=c[f]).supplyLayoutDefaults&&a.supplyLayoutDefaults(t,e,n);var h=e._transformModules;for(f=0;f<h.length;f++)(a=h[f]).supplyLayoutDefaults&&a.supplyLayoutDefaults(t,e,n,r);for(i in s)(a=s[i]).supplyLayoutDefaults&&a.supplyLayoutDefaults(t,e,n)},j.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),P.clearThrottle(),P.clearResponsive(t),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._dragdata,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},j.style=function(t){for(var e=t._fullLayout._visibleModules,n=[],r=0;r<e.length;r++){var i=e[r];i.style&&P.pushUnique(n,i.style)}for(r=0;r<n.length;r++)n[r](t)},j.sanitizeMargins=function(t){var e,n,r,i,a;t&&t.margin&&(e=t.width,n=t.height,i=e-((r=t.margin).l+r.r),t=n-(r.t+r.b),i<0&&(a=(e-1)/(r.l+r.r),r.l=Math.floor(a*r.l),r.r=Math.floor(a*r.r)),t<0&&(a=(n-1)/(r.t+r.b),r.t=Math.floor(a*r.t),r.b=Math.floor(a*r.b)))},j.clearAutoMarginIds=function(t){t._fullLayout._pushmarginIds={}},j.allowAutoMargin=function(t,e){t._fullLayout._pushmarginIds[e]=1};j.autoMargin=function(t,e,n){var r,i,a=t._fullLayout,o=a.width,s=a.height,l=a.margin,u=P.constrain(o-l.l-l.r,2,64),c=P.constrain(s-l.t-l.b,2,64),f=Math.max(0,o-u),o=Math.max(0,s-c),u=a._pushmargin,s=a._pushmarginIds;if(!1!==l.autoexpand&&(n?(void 0===(c=n.pad)&&(c=Math.min(12,l.l,l.r,l.t,l.b)),!f||1<(r=(n.l+n.r)/f)&&(n.l/=r,n.r/=r),!o||1<(i=(n.t+n.b)/o)&&(n.t/=i,n.b/=i),f=void 0!==n.xl?n.xl:n.x,r=void 0!==n.xr?n.xr:n.x,o=void 0!==n.yt?n.yt:n.y,i=void 0!==n.yb?n.yb:n.y,u[e]={l:{val:f,size:n.l+c},r:{val:r,size:n.r+c},b:{val:i,size:n.b+c},t:{val:o,size:n.t+c}},s[e]=1):(delete u[e],delete s[e]),!a._replotting))return j.doAutoMargin(t)},j.doAutoMargin=function(r){var t=r._fullLayout,e=t.width,n=t.height;t._size||(t._size={}),I(t);var i=t._size,a=t.margin,o=P.extendFlat({},i),s=a.l,l=a.r,u=a.t,c=a.b,f=t._pushmargin,h=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var d in f)h[d]||delete f[d];for(var p in f.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:u},b:{val:0,size:c}},f){var g,y,m,v,b,x=f[p].l||{},_=f[p].b||{},w=x.val,k=x.size,M=_.val,T=_.size;for(g in f)E(k)&&f[g].r&&(b=f[g].r.val,y=f[g].r.size,w<b&&(s+l<(m=(k*b+(y-e)*w)/(b-w))+(v=(y*(1-w)+(k-e)*(1-b))/(b-w))&&(s=m,l=v))),E(T)&&f[g].t&&(b=f[g].t.val,m=f[g].t.size,M<b&&(c+u<(v=(T*b+(m-n)*M)/(b-M))+(b=(m*(1-M)+(T-n)*(1-b))/(b-M))&&(c=v,u=b)))}}var A=P.constrain(e-a.l-a.r,2,64),S=P.constrain(n-a.t-a.b,2,64),A=Math.max(0,e-A),S=Math.max(0,n-S);if(!A||1<(A=(s+l)/A)&&(s/=A,l/=A),!S||1<(S=(c+u)/S)&&(c/=S,u/=S),i.l=Math.round(s),i.r=Math.round(l),i.t=Math.round(u),i.b=Math.round(c),i.p=Math.round(a.pad),i.w=Math.round(e)-i.l-i.r,i.h=Math.round(n)-i.t-i.b,!t._replotting&&j.didMarginChange(o,i)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;i=3*(1+Object.keys(h).length);if(t._redrawFromAutoMarginCount<i)return C.call("plot",r);t._size=o,P.warn("Too many auto-margin redraws.")}!function(){for(var t=L.list(r,"",!0),e=0;e<t.length;e++){var n=t[e]._hideOutOfRangeInsideTickLabels;n&&n()}}()};var s=["l","r","t","b","p","w","h"];function r(i,a,o){var s=!1;var t=[j.previousPromises,function(){if(i._transitionData)return i._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(i._transitionData._interruptCallbacks)},o.prepareFn,j.rehover,function(){return i.emit("plotly_transitioning",[]),new Promise(function(e){i._transitioning=!0,0<a.duration&&(i._transitioningWithDuration=!0),i._transitionData._interruptCallbacks.push(function(){s=!0}),o.redraw&&i._transitionData._interruptCallbacks.push(function(){return C.call("redraw",i)}),i._transitionData._interruptCallbacks.push(function(){i.emit("plotly_transitioninterrupted",[])});var n=0,r=0;function t(){return n++,function(){var t;r++,s||r!==n||(t=e,i._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(i._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(o.redraw)return C.call("redraw",i)}).then(function(){i._transitioning=!1,i._transitioningWithDuration=!1,i.emit("plotly_transitioned",[])}).then(t)))}}o.runFn(t),setTimeout(t())})}],t=P.syncOrAsync(t,i);return t&&t.then||(t=Promise.resolve()),t.then(function(){return i})}j.didMarginChange=function(t,e){for(var n=0;n<s.length;n++){var r=s[n],i=t[r],r=e[r];if(!E(i)||1<Math.abs(r-i))return!0}return!1},j.graphJson=function(t,e,a,n,r,i){(r&&e&&!t._fullData||r&&!e&&!t._fullLayout)&&j.supplyDefaults(t);var o=r?t._fullData:t.data,s=r?t._fullLayout:t.layout,l=(t._transitionData||{})._frames;function u(e,n){if("function"==typeof e)return n?"_function_":null;if(P.isPlainObject(e)){var r,i={};return Object.keys(e).sort().forEach(function(t){if(-1===["_","["].indexOf(t.charAt(0)))if("function"!=typeof e[t]){if("keepdata"===a){if("src"===t.substr(t.length-3))return}else if("keepstream"===a){if(r=e[t+"src"],"string"==typeof r&&0<r.indexOf(":")&&!P.isPlainObject(e.stream))return}else if("keepall"!==a&&"string"==typeof(r=e[t+"src"])&&0<r.indexOf(":"))return;i[t]=u(e[t],n)}else n&&(i[t]="_function")}),i}return Array.isArray(e)?e.map(function(t){return u(t,n)}):P.isTypedArray(e)?P.simpleMap(e,P.identity):P.isJSDate(e)?P.ms2DateTimeLocal(+e):e}o={data:(o||[]).map(function(t){t=u(t);return e&&delete t.fit,t})};return e||(o.layout=u(s),r&&(s=s._size,o.layout.computed={margin:{b:s.b,l:s.l,r:s.r,t:s.t}})),t.framework&&t.framework.isPolar&&(o=t.framework.getConfig()),l&&(o.frames=u(l)),i&&(o.config=u(t._context,!0)),"object"===n?o:JSON.stringify(o)},j.modifyFrames=function(t,e){for(var n,r,i=t._transitionData._frames,a=t._transitionData._frameHash,o=0;o<e.length;o++)switch((n=e[o]).type){case"replace":r=n.value;var s=(i[n.index]||{}).name,l=r.name;i[n.index]=a[l]=r,l!==s&&(delete a[s],a[l]=r);break;case"insert":a[(r=n.value).name]=r,i.splice(n.index,0,r);break;case"delete":delete a[(r=i[n.index]).name],i.splice(n.index,1)}return Promise.resolve()},j.computeFrame=function(t,e){var n,r,i,a,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=o[e.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===u.indexOf(s.name);)l.push(s),u.push(s.name);for(var c={};s=l.pop();)if(s.layout&&(c.layout=j.extendLayout(c.layout,s.layout)),s.data){if(c.data||(c.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(c.traces||(c.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(a=c.traces.indexOf(i))&&(a=c.data.length,c.traces[a]=i),c.data[a]=j.extendTrace(c.data[a],s.data[n]))}return c},j.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},n=t._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(e[i.name]=i)}},j.extendObjectWithContainers=function(t,e,n){var r,i,a,o,s,l,u,e=P.extendDeepNoArrays({},e||{}),c=P.expandObjectPaths(e),f={};if(n&&n.length)for(a=0;a<n.length;a++)void 0===(i=(r=P.nestedProperty(c,n[a])).get())?P.nestedProperty(f,n[a]).set(null):(r.set(null),P.nestedProperty(f,n[a]).set(i));if(t=P.extendDeepNoArrays(t||{},c),n&&n.length)for(a=0;a<n.length;a++)if(l=P.nestedProperty(f,n[a]).get()){for(u=(s=P.nestedProperty(t,n[a])).get(),Array.isArray(u)||(u=[],s.set(u)),o=0;o<l.length;o++){var h=l[o];u[o]=null===h?null:j.extendObjectWithContainers(u[o],h)}s.set(u)}return t},j.dataArrayContainers=["transforms","dimensions"],j.layoutArrayContainers=C.layoutArrayContainers,j.extendTrace=function(t,e){return j.extendObjectWithContainers(t,e,j.dataArrayContainers)},j.extendLayout=function(t,e){return j.extendObjectWithContainers(t,e,j.layoutArrayContainers)},j.transition=function(x,_,w,k,t,s){var t={redraw:t.redraw},M={},T=[];return t.prepareFn=function(){for(var t=Array.isArray(_)?_.length:0,e=k.slice(0,t),n=0;n<e.length;n++){var r=e[n],i=x._fullData[r]._module;i&&(i.animatable&&(i=i.basePlotModule.name,M[i]||(M[i]=[]),M[i].push(r)),x.data[e[n]]=j.extendTrace(x.data[e[n]],_[n]))}var a,o=P.expandObjectPaths(P.extendDeepNoArrays({},w)),s=/^[xy]axis[0-9]*$/;for(a in o)s.test(a)&&delete o[a].range;j.extendLayout(x.layout,o),delete x.calcdata,j.supplyDefaults(x),j.doCalcdata(x);var l=P.expandObjectPaths(w);if(l){var u,c=x._fullLayout._plots;for(u in c){var f=c[u],h=f.xaxis,d=f.yaxis,p=h.range.slice(),g=d.range.slice(),y=null,m=null,v=null,b=null;Array.isArray(l[h._name+".range"])?y=l[h._name+".range"].slice():Array.isArray((l[h._name]||{}).range)&&(y=l[h._name].range.slice()),Array.isArray(l[d._name+".range"])?m=l[d._name+".range"].slice():Array.isArray((l[d._name]||{}).range)&&(m=l[d._name].range.slice()),p&&y&&(h.r2l(p[0])!==h.r2l(y[0])||h.r2l(p[1])!==h.r2l(y[1]))&&(v={xr0:p,xr1:y}),g&&m&&(d.r2l(g[0])!==d.r2l(m[0])||d.r2l(g[1])!==d.r2l(m[1]))&&(b={yr0:g,yr1:m}),(v||b)&&T.push(P.extendFlat({plotinfo:f},v,b))}}return Promise.resolve()},t.runFn=function(t){var e,n,r,i=x._fullLayout._basePlotModules,a=T.length;if(w)for(n=0;n<i.length;n++)i[n].transitionAxes&&i[n].transitionAxes(x,T,s,t);for(r in a?((e=P.extendFlat({},s)).duration=0,delete M.cartesian):e=s,M){var o=M[r];x._fullData[o[0]]._module.basePlotModule.plot(x,o,e,t)}},r(x,s,t)},j.transitionFromReact=function(c,f,h,d){var p=c._fullLayout,g=p.transition,y={},m=[];return y.prepareFn=function(){var t,e=p._plots;for(t in y.redraw=!1,"some"===f.anim&&(y.redraw=!0),"some"===h.anim&&(y.redraw=!0),e){var n=e[t],r=n.xaxis,i=n.yaxis,a=d[r._name].range.slice(),o=d[i._name].range.slice(),s=r.range.slice(),l=i.range.slice();r.setScale(),i.setScale();var u=null,c=null;r.r2l(a[0])===r.r2l(s[0])&&r.r2l(a[1])===r.r2l(s[1])||(u={xr0:a,xr1:s}),i.r2l(o[0])===i.r2l(l[0])&&i.r2l(o[1])===i.r2l(l[1])||(c={yr0:o,yr1:l}),(u||c)&&m.push(P.extendFlat({plotinfo:n},u,c))}return Promise.resolve()},y.runFn=function(e){for(var n,r,i,t=c._fullData,a=c._fullLayout._basePlotModules,o=[],s=0;s<t.length;s++)o.push(s);function l(){for(var t=0;t<a.length;t++)a[t].transitionAxes&&a[t].transitionAxes(c,m,n,e)}function u(){for(var t=0;t<a.length;t++)a[t].plot(c,i,r,e)}m.length&&f.anim?"traces first"===g.ordering?(n=P.extendFlat({},g,{duration:0}),i=o,r=g,setTimeout(l,g.duration),u()):(n=g,i=null,r=P.extendFlat({},g,{duration:0}),setTimeout(u,n.duration),l()):m.length?(n=g,l()):f.anim&&(i=o,r=g,u())},r(c,g,y)},j.doCalcdata=function(r,t){var i,a,o,e=L.list(r),s=r._fullData,n=r._fullLayout,l=new Array(s.length),u=(r.calcdata||[]).slice();for(r.calcdata=l,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._funnelareacolormap={},h=0;h<s.length;h++)Array.isArray(t)&&-1===t.indexOf(h)&&(l[h]=u[h]);for(h=0;h<s.length;h++)(i=s[h])._arrayAttrs=m.findArrayAttributes(i),i._extremes={};for(var c,f=n._subplots.polar||[],h=0;h<f.length;h++)e.push(n[f[h]].radialaxis,n[f[h]].angularaxis);for(c in n._colorAxes){var d=n[c];!1!==d.cauto&&(delete d.cmin,delete d.cmax)}var p=!1;function g(t,e){if(i=s[t],!!(a=i._module).isContainer===e){e=[];if(!0===i.visible&&0!==i._length){delete i._indexToPoints;var n=i.transforms||[];for(o=n.length-1;0<=o;o--)if(n[o].enabled){i._indexToPoints=n[o]._indexToPoints;break}a&&a.calc&&(e=a.calc(r,i))}Array.isArray(e)&&e[0]||(e=[{x:v,y:v}]),e[0].t||(e[0].t={}),e[0].trace=i,l[t]=e}}for(b(e,s,n),h=0;h<s.length;h++)g(h,!0);for(h=0;h<s.length;h++)!function(t){if(i=s[t],a=i._module,!0===i.visible&&i.transforms)for(a&&a.calc&&((t=a.calc(r,i))[0]&&t[0].t&&t[0].t._scene&&delete t[0].t._scene.dirty),o=0;o<i.transforms.length;o++){var e=i.transforms[o];(a=M[e.type])&&a.calcTransform&&(i._hasCalcTransform=!0,p=!0,a.calcTransform(r,i,e))}}(h);for(p&&b(e,s,n),h=0;h<s.length;h++)g(h,!0);for(h=0;h<s.length;h++)g(h,!1);x(r);var y=function(t,o){var e,n,r,i,a,s=[];var l,u,c={min:function(t){return P.aggNums(Math.min,null,t)},max:function(t){return P.aggNums(Math.max,null,t)},sum:function(t){return P.aggNums(function(t,e){return t+e},null,t)},total:function(t){return P.aggNums(function(t,e){return t+e},null,t)},mean:function(t){return P.mean(t)},median:function(t){return P.median(t)}};for(e=0;e<t.length;e++){var f=t[e];if("category"===f.type){var h=f.categoryorder.match(F);if(h){var d=h[1],h=h[2],p=f._id.charAt(0),g="x"===p,y=[];for(n=0;n<f._categories.length;n++)y.push([f._categories[n],[]]);for(n=0;n<f._traceIndices.length;n++){var m=f._traceIndices[n],v=o._fullData[m];if(!0===v.visible){var b=v.type;C.traceIs(v,"histogram")&&(delete v._xautoBinFinished,delete v._yautoBinFinished);var x="splom"===b,_="scattergl"===b,w=o.calcdata[m];for(r=0;r<w.length;r++){var k=w[r];if(x){var M,T=v._axesDim[f._id];g||(M=v._diag[T][0])&&(f=o._fullLayout[L.id2name(M)]);var A,S=k.trace.dimensions[T].values;for(i=0;i<S.length;i++)for(l=f._categoriesMap[S[i]],a=0;a<k.trace.dimensions.length;a++)a!==T&&(A=k.trace.dimensions[a],y[l][1].push(A.values[i]))}else if(_){for(i=0;i<k.t.x.length;i++)u=g?(l=k.t.x[i],k.t.y[i]):(l=k.t.y[i],k.t.x[i]),y[l][1].push(u);k.t&&k.t._scene&&delete k.t._scene.dirty}else if(k.hasOwnProperty("z")){u=k.z;var E=function(t,e,n){var r=e._id.charAt(0);if("histogram2dcontour"!==t)return function(t,e){return"y"===r?e:t};var t=e._counterAxes[0],e=L.getFromId(o,t),i="x"===r||"x"===t&&"category"===e.type,a="y"===r||"y"===t&&"category"===e.type;return function(t,e){return 0===t||0===e||i&&t===n[e].length-1||a&&e===n.length-1?-1:("y"===r?e:t)-1}}(v.type,f,u);for(i=0;i<u.length;i++)for(a=0;a<u[i].length;a++)(l=E(a,i))+1&&y[l][1].push(u[i][a])}else for(void 0===(l=k.p)&&(l=k[p]),void 0===(u=k.s)&&(u=k.v),void 0===u&&(u=g?k.y:k.x),Array.isArray(u)||(u=void 0===u?[]:[u]),i=0;i<u.length;i++)y[l][1].push(u[i])}}}f._categoriesValue=y;var O=[];for(n=0;n<y.length;n++)O.push([y[n][0],c[d](y[n][1])]);O.sort(function(t,e){return t[1]-e[1]}),f._categoriesAggregatedValue=O,f._initialCategories=O.map(function(t){return t[0]}),"descending"===h&&f._initialCategories.reverse(),s=s.concat(f.sortByInitialCategories())}}}return s}(e,r);if(y.length){for(n._numBoxes=0,h=n._numViolins=0;h<y.length;h++)g(y[h],!0);for(h=0;h<y.length;h++)g(y[h],!1);x(r)}C.getComponentMethod("fx","calc")(r),C.getComponentMethod("errorbars","calc")(r)};var F=/(total|sum|min|max|mean|median) (ascending|descending)/;function b(t,e,n){var r={};function i(t){t.clearCalc(),"multicategory"===t.type&&t.setupMultiCategory(e),r[t._id]=1}P.simpleMap(t,i);for(var a=n._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])r[s]||i(n[L.id2name(s)])}function x(t){var e,n,r=t._fullLayout,i=r._visibleModules,a={};for(h=0;h<i.length;h++){var o=i[h],s=o.crossTraceCalc;s&&(a[o=o.basePlotModule.name]?P.pushUnique(a[o],s):a[o]=[s])}for(n in a){var l=a[n],u=r._subplots[n];if(Array.isArray(u))for(e=0;e<u.length;e++)for(var c=u[e],f=("cartesian"===n?r._plots:r)[c],h=0;h<l.length;h++)l[h](t,f,c);else for(h=0;h<l.length;h++)l[h](t)}}j.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},j.redrag=function(t){t._fullLayout._redrag&&t._fullLayout._redrag()},j.generalUpdatePerTraceModule=function(t,e,n,r){for(var i,a,o,s=e.traceHash,l={},u=0;u<n.length;u++){var c=n[u],f=c[0].trace;f.visible&&(l[f.type]=l[f.type]||[],l[f.type].push(c))}for(i in s)l[i]||((a=s[i][0])[0].trace.visible=!1,l[i]=[a]);for(o in l){var h=l[o];h[0][0].trace._module.plot(t,e,P.filterVisible(h),r)}e.traceHash=l},j.plotBasePlot=function(t,e,n,r,i){var a=C.getModule(t),t=o(e.calcdata,a)[0];a.plot(e,t,r,i)},j.cleanBasePlot=function(t,e,n,r,i){var a=i._has&&i._has(t),n=n._has&&n._has(t);a&&!n&&i["_"+t+"layer"].selectAll("g.trace").remove()}},{"../components/color":294,"../constants/numerical":402,"../lib":424,"../plot_api/plot_schema":459,"../plot_api/plot_template":460,"../plots/get_data":501,"../registry":525,"./animation_attributes":465,"./attributes":467,"./cartesian/axis_ids":474,"./cartesian/handle_outline":481,"./command":497,"./font_attributes":499,"./frame_attributes":500,"./layout_attributes":514,d3:277,"d3-time-format":275,"fast-isnumeric":99}],517:[function(t,e,n){"use strict";var r=t("../../../traces/scatter/attributes"),i=r.marker,t=t("../../../lib/extend").extendFlat;["Area traces are deprecated!","Please switch to the *barpolar* trace type."].join(" ");e.exports={r:t({},r.r,{}),t:t({},r.t,{}),marker:{color:t({},i.color,{}),size:t({},i.size,{}),symbol:t({},i.symbol,{}),opacity:t({},i.opacity,{}),editType:"calc"}}},{"../../../lib/extend":417,"../../../traces/scatter/attributes":577}],518:[function(t,e,n){"use strict";var r=t("../../cartesian/layout_attributes"),i=t("../../../lib/extend").extendFlat,t=t("../../../plot_api/edit_types").overrideAll,a=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),r=i({},r.domain,{});function o(t,e){return i({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:a},visible:{valType:"boolean"}})}e.exports=t({radialaxis:o(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:r,orientation:{valType:"number"}}),angularaxis:o(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:r}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":417,"../../../plot_api/edit_types":453,"../../cartesian/layout_attributes":485}],519:[function(t,e,n){"use strict";(e.exports=t("./micropolar")).manager=t("./micropolar_manager")},{"./micropolar":520,"./micropolar_manager":521}],520:[function(t,e,n){var U=t("d3"),V=t("../../../lib").extendDeepAll,H=t("../../../constants/alignment").MID_SHIFT,q=e.exports={version:"0.2.2"};q.Axis=function(){var z,e,I,F,n={data:[],layout:{}},t={},B={},r=U.dispatch("hover"),i={};return i.render=function(t){return function(t){e=t||e;var t=n.data,D=n.layout;"string"!=typeof e&&!e.nodeName||(e=U.select(e)),e.datum(t).each(function(t,e){var n=t.slice();B={data:q.util.cloneJson(n),layout:q.util.cloneJson(D)};var r=0;n.forEach(function(t,e){t.color||(t.color=D.defaultColorRange[r],r=(r+1)%D.defaultColorRange.length),t.strokeColor||(t.strokeColor="LinePlot"===t.geometry?t.color:U.rgb(t.color).darker().toString()),B.data[e].color=t.color,B.data[e].strokeColor=t.strokeColor,B.data[e].strokeDash=t.strokeDash,B.data[e].strokeSize=t.strokeSize});var i,a=n.filter(function(t,e){t=t.visible;return void 0===t||!0===t}),o=!1,t=a.map(function(t,e){return o=o||void 0!==t.groupId,t});o&&(h=U.nest().key(function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"}).entries(t),i=[],d=h.map(function(t,e){if("unstacked"===t.key)return t.values;var r=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,n){t.yStack=[r],i.push(r),r=q.util.sumArrays(t.r,r)}),t.values}),a=U.merge(d)),a.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var s=Math.min(D.width-D.margin.left-D.margin.right,D.height-D.margin.top-D.margin.bottom)/2;s=Math.max(10,s);var l=[D.margin.left+s,D.margin.top+s];n=o?[0,U.max(q.util.sumArrays(q.util.arrayLast(a).r[0],q.util.arrayLast(i)))]:U.extent(q.util.flattenArray(a.map(function(t,e){return t.r}))),D.radialAxis.domain!=q.DATAEXTENT&&(n[0]=0),I=U.scale.linear().domain(D.radialAxis.domain!=q.DATAEXTENT&&D.radialAxis.domain?D.radialAxis.domain:n).range([0,s]),B.layout.radialAxis.domain=I.domain();var u,c=q.util.flattenArray(a.map(function(t,e){return t.t})),f="string"==typeof c[0];f&&(c=q.util.deduplicate(c),u=c.slice(),c=U.range(c.length),a=a.map(function(t,e){var n=t;return t.t=[c],o&&(n.yStack=t.yStack),n}));var t=a.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===a.length,h=null===D.needsEndSpacing?f||!t:D.needsEndSpacing,d=D.angularAxis.domain&&D.angularAxis.domain!=q.DATAEXTENT&&!f&&0<=D.angularAxis.domain[0]?D.angularAxis.domain:U.extent(c),n=Math.abs(c[1]-c[0]);t&&!f&&(n=0);t=d.slice();h&&f&&(t[1]+=n);d=D.angularAxis.ticksCount||4;8<d&&(d=d/(d/8)+d%8),D.angularAxis.ticksStep&&(d=(t[1]-t[0])/d);d=D.angularAxis.ticksStep||(t[1]-t[0])/(d*(D.minorTicks+1));u&&(d=Math.max(Math.round(d),1)),t[2]||(t[2]=d);d=(d=U.range.apply(this,t)).map(function(t,e){return parseFloat(t.toPrecision(12))});F=U.scale.linear().domain(t.slice(0,2)).range("clockwise"===D.direction?[0,360]:[360,0]),B.layout.angularAxis.domain=F.domain(),B.layout.angularAxis.endPadding=h?n:0,void 0!==(z=U.select(this).select("svg.chart-root"))&&!z.empty()||(g=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),y=this.appendChild(this.ownerDocument.importNode(g.documentElement,!0)),z=U.select(y)),z.select(".guides-group").style({"pointer-events":"none"}),z.select(".angular.axis-group").style({"pointer-events":"none"}),z.select(".radial.axis-group").style({"pointer-events":"none"});var p,g=z.select(".chart-group"),y={fill:"none",stroke:D.tickColor},m={"font-size":D.font.size,"font-family":D.font.family,fill:D.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+D.font.outlineColor}).join(",")};D.showLegend?(p=z.select(".legend-group").attr({transform:"translate("+[s,D.margin.top]+")"}).style({display:"block"}),v=a.map(function(t,e){var n=q.util.cloneJson(t);return n.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",n.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,n.color="LinePlot"===t.geometry?t.strokeColor:t.color,n}),q.Legend().config({data:a.map(function(t,e){return t.name||"Element"+e}),legendConfig:V({},q.Legend.defaultConfig().legendConfig,{container:p,elements:v,reverseOrder:D.legend.reverseOrder})})(),v=p.node().getBBox(),s=Math.min(D.width-v.width-D.margin.left-D.margin.right,D.height-D.margin.top-D.margin.bottom)/2,s=Math.max(10,s),l=[D.margin.left+s,D.margin.top+s],I.range([0,s]),B.layout.radialAxis.domain=I.domain(),p.attr("transform","translate("+[l[0]+s,l[1]-s]+")")):p=z.select(".legend-group").style({display:"none"}),z.attr({width:D.width,height:D.height}).style({opacity:D.opacity}),g.attr("transform","translate("+l+")").style({cursor:"crosshair"});var v,b=[(D.width-(D.margin.left+D.margin.right+2*s+(v?v.width:0)))/2,(D.height-(D.margin.top+D.margin.bottom+2*s))/2];b[0]=Math.max(0,b[0]),b[1]=Math.max(0,b[1]),z.select(".outer-group").attr("transform","translate("+b+")"),D.title&&D.title.text&&(x=(v=z.select("g.title-group text").style(m).text(D.title.text)).node().getBBox(),v.attr({x:l[0]-x.width/2,y:l[1]-s-20}));var x=z.select(".radial.axis-group");D.radialAxis.gridLinesVisible&&((_=x.selectAll("circle.grid-circle").data(I.ticks(5))).enter().append("circle").attr({class:"grid-circle"}).style(y),_.attr("r",I),_.exit().remove()),x.select("circle.outside-circle").attr({r:s}).style(y);var _,w=z.select("circle.background-circle").attr({r:s}).style({fill:D.backgroundColor,stroke:D.stroke});function k(t){return F(t)%360+D.orientation}D.radialAxis.visible&&(_=U.svg.axis().scale(I).ticks(5).tickSize(5),x.call(_).attr({transform:"rotate("+D.radialAxis.orientation+")"}),x.selectAll(".domain").style(y),x.selectAll("g>text").text(function(t,e){return this.textContent+D.radialAxis.ticksSuffix}).style(m).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===D.radialAxis.tickOrientation?"rotate("+-D.radialAxis.orientation+") translate("+[0,m["font-size"]]+")":"translate("+[0,m["font-size"]]+")"}}),x.selectAll("g>line").style({stroke:"black"}));x=z.select(".angular.axis-group").selectAll("g.angular-tick").data(d),d=x.enter().append("g").classed("angular-tick",!0);x.attr({transform:function(t,e){return"rotate("+k(t)+")"}}).style({display:D.angularAxis.visible?"block":"none"}),x.exit().remove(),d.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(D.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(D.minorTicks+1)==0)}).style(y),d.selectAll(".minor").style({stroke:D.minorTickColor}),x.select("line.grid-line").attr({x1:D.tickLength?s-D.tickLength:0,x2:s}).style({display:D.angularAxis.gridLinesVisible?"block":"none"}),d.append("text").classed("axis-text",!0).style(m);x=x.select("text.axis-text").attr({x:s+D.labelOffset,dy:H+"em",transform:function(t,e){var n=k(t),r=s+D.labelOffset,t=D.angularAxis.tickOrientation;return"horizontal"==t?"rotate("+-n+" "+r+" 0)":"radial"==t?n<270&&90<n?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&0<n?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:D.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(D.minorTicks+1)!=0?"":u?u[t]+D.angularAxis.ticksSuffix:t+D.angularAxis.ticksSuffix}).style(m);D.angularAxis.rewriteTicks&&x.text(function(t,e){return e%(D.minorTicks+1)!=0?"":D.angularAxis.rewriteTicks(this.textContent,e)});x=U.max(g.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));p.attr({transform:"translate("+[s+x,D.margin.top]+")"});var M,T,x=0<z.select("g.geometry-group").selectAll("g").size(),A=z.select("g.geometry-group").selectAll("g.geometry").data(a);A.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),A.exit().remove(),(a[0]||x)&&(M=[],a.forEach(function(t,n){var e={};e.radialScale=I,e.angularScale=F,e.container=A.filter(function(t,e){return e==n}),e.geometry=t.geometry,e.orientation=D.orientation,e.direction=D.direction,e.index=n,M.push({data:t,geometryConfig:e})}),P=U.nest().key(function(t,e){return void 0!==t.data.groupId||"unstacked"}).entries(M),T=[],P.forEach(function(t,e){"unstacked"===t.key?T=T.concat(t.values.map(function(t,e){return[t]})):T.push(t.values)}),T.forEach(function(t,e){var n=(Array.isArray(t)?t[0]:t).geometryConfig.geometry,t=t.map(function(t,e){return V(q[n].defaultConfig(),t)});q[n]().config(t)()}));var S,E,O,C=z.select(".guides-group"),P=z.select(".tooltips-group"),L=q.tooltipPanel().config({container:P,fontSize:8})(),R=q.tooltipPanel().config({container:P,fontSize:8})(),j=q.tooltipPanel().config({container:P,hasTick:!0})();f||(O=C.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"}),g.on("mousemove.angular-guide",function(t,e){var n=q.util.getMousePos(w).angle;O.attr({x2:-s,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-D.orientation)%360;S=F.invert(r);n=q.util.convertToCartesian(s+12,n+180);L.text(q.util.round(S)).move([n[0]+l[0],n[1]+l[1]])}).on("mouseout.angular-guide",function(t,e){C.select("line").style({opacity:0})}));var N=C.select("circle").style({stroke:"grey",fill:"none"});g.on("mousemove.radial-guide",function(t,e){var n=q.util.getMousePos(w).radius;N.attr({r:n}).style({opacity:.5}),E=I.invert(q.util.getMousePos(w).radius);n=q.util.convertToCartesian(n,D.radialAxis.orientation);R.text(q.util.round(E)).move([n[0]+l[0],n[1]+l[1]])}).on("mouseout.radial-guide",function(t,e){N.style({opacity:0}),j.hide(),L.hide(),R.hide()}),z.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(t,e){var n,r=U.select(this),i=this.style.fill,a="black",o=this.style.opacity||1;r.attr({"data-opacity":o}),i&&"none"!==i?(r.attr({"data-fill":i}),a=U.hsl(i).darker().toString(),r.style({fill:a,opacity:1}),n={t:q.util.round(t[0]),r:q.util.round(t[1])},f&&(n.t=u[t[0]]),o="t: "+n.t+", r: "+n.r,t=this.getBoundingClientRect(),n=z.node().getBoundingClientRect(),n=[t.left+t.width/2-b[0]-n.left,t.top+t.height/2-b[1]-n.top],j.config({color:a}).text(o),j.move(n)):(i=this.style.stroke||"black",r.attr({"data-stroke":i}),a=U.hsl(i).darker().toString(),r.style({stroke:a,opacity:1}))}).on("mousemove.tooltip",function(t,e){return 0==U.event.which&&void(U.select(this).attr("data-fill")&&j.show())}).on("mouseout.tooltip",function(t,e){j.hide();var n=U.select(this),r=n.attr("data-fill");r?n.style({fill:r,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(t),this},i.config=function(t){if(!arguments.length)return n;var e=q.util.cloneJson(t);return e.data.forEach(function(t,e){n.data[e]||(n.data[e]={}),V(n.data[e],q.Axis.defaultConfig().data[0]),V(n.data[e],t)}),V(n.layout,q.Axis.defaultConfig().layout),V(n.layout,e.layout),this},i.getLiveConfig=function(){return B},i.getinputConfig=function(){return t},i.radialScale=function(t){return I},i.angularScale=function(t){return F},i.svg=function(){return z},U.rebind(i,r,"on"),i},q.Axis.defaultConfig=function(t,e){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:U.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},q.util={},q.DATAEXTENT="dataExtent",q.AREA="AreaChart",q.LINE="LinePlot",q.DOT="DotPlot",q.BAR="BarChart",q.util._override=function(t,e){for(var n in t)n in e&&(e[n]=t[n])},q.util._extend=function(t,e){for(var n in t)e[n]=t[n]},q.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},q.util.dataFromEquation2=function(r,t){t=t||6;return U.range(0,360+t,t).map(function(t,e){var n=t*Math.PI/180;return[t,r(n)]})},q.util.dataFromEquation=function(r,t,e){var t=t||6,i=[],a=[];U.range(0,360+t,t).forEach(function(t,e){var n=t*Math.PI/180,n=r(n);i.push(t),a.push(n)});t={t:i,r:a};return e&&(t.name=e),t},q.util.ensureArray=function(t,e){if(void 0===t)return null;var n=[].concat(t);return U.range(e).map(function(t,e){return n[e]||n[0]})},q.util.fillArrays=function(n,t,r){return t.forEach(function(t,e){n[t]=q.util.ensureArray(n[t],r)}),n},q.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},q.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var n=e.shift();return t[n]&&(!e.length||objHasKeys(t[n],e))},q.util.sumArrays=function(t,e){return U.zip(t,e).map(function(t,e){return U.sum(t)})},q.util.arrayLast=function(t){return t[t.length-1]},q.util.arrayEqual=function(t,e){for(var n=Math.max(t.length,e.length,1);0<=n--&&t[n]===e[n];);return-2===n},q.util.flattenArray=function(t){for(var e=[];!q.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},q.util.deduplicate=function(t){return t.filter(function(t,e,n){return n.indexOf(t)==e})},q.util.convertToCartesian=function(t,e){e=e*Math.PI/180;return[t*Math.cos(e),t*Math.sin(e)]},q.util.round=function(t,e){e=e||2,e=Math.pow(10,e);return Math.round(t*e)/e},q.util.getMousePos=function(t){var e=U.mouse(t.node()),n=e[0],r=e[1],t={};return t.x=n,t.y=r,t.pos=e,t.angle=180*(Math.atan2(r,n)+Math.PI)/Math.PI,t.radius=Math.sqrt(n*n+r*r),t},q.util.duplicatesCount=function(t){for(var e,n={},r={},i=0,a=t.length;i<a;i++)(e=t[i])in n?(n[e]++,r[e]=n[e]):n[e]=1;return r},q.util.duplicates=function(t){return Object.keys(q.util.duplicatesCount(t))},q.util.translator=function(t,r,i,e){e&&(e=i.slice(),i=r,r=e);var a=r.reduce(function(t,e){if(void 0!==t)return t[e]},t);void 0!==a&&(r.reduce(function(t,e,n){if(void 0!==t)return n===r.length-1&&delete t[e],t[e]},t),i.reduce(function(t,e,n){return void 0===t[e]&&(t[e]={}),n===i.length-1&&(t[e]=a),t[e]},t))},q.PolyChart=function(){var n=[q.PolyChart.defaultConfig()],t=U.dispatch("hover"),p={solid:"none",dash:[5,2],dot:[2,5]};function e(){var d=n[0].geometryConfig,t=d.container;"string"==typeof t&&(t=U.select(t)),t.datum(n).each(function(a,t){var n=!!a[0].data.yStack,o=a.map(function(t,e){return n?U.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):U.zip(t.data.t[0],t.data.r[0])}),i=d.angularScale,e=d.radialScale.domain()[0],s={bar:function(t,e,n){var r=a[n].data,n=d.radialScale(t[1])-d.radialScale(0),t=d.radialScale(t[2]||0),r=r.barWidth;U.select(this).attr({class:"mark bar",d:"M"+[[n+t,-r/2],[n+t,r/2],[t,r/2],[t,-r/2]].join("L")+"Z",transform:function(t,e){return"rotate("+(d.orientation+i(t[0]))+")"}})}};s.dot=function(t,e,n){var i=t[2]?[t[0],t[1]+t[2]]:t,e=U.svg.symbol().size(a[n].data.dotSize).type(a[n].data.dotType)(t,e);U.select(this).attr({class:"mark dot",d:e,transform:function(t,e){var n,r,r=(n=i,r=d.radialScale(n[1]),n=(d.angularScale(n[0])+d.orientation)*Math.PI/180,n=(r={r:r,t:n}).r*Math.cos(r.t),r=r.r*Math.sin(r.t),{x:n,y:r});return"translate("+[r.x,r.y]+")"}})};var l=U.svg.line.radial().interpolate(a[0].data.lineInterpolation).radius(function(t){return d.radialScale(t[1])}).angle(function(t){return d.angularScale(t[0])*Math.PI/180});s.line=function(n,r,i){var t,e=n[2]?o[i].map(function(t,e){return[t[0],t[1]+t[2]]}):o[i];U.select(this).each(s.dot).style({opacity:function(t,e){return+a[i].data.dotVisible},fill:f.stroke(n,r,i)}).attr({class:"mark dot"}),0<r||((t=U.select(this.parentNode).selectAll("path.line").data([0])).enter().insert("path"),t.attr({class:"line",d:l(e),transform:function(t,e){return"rotate("+(d.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return f.fill(n,r,i)},"fill-opacity":0,stroke:function(t,e){return f.stroke(n,r,i)},"stroke-width":function(t,e){return f["stroke-width"](n,r,i)},"stroke-dasharray":function(t,e){return f["stroke-dasharray"](n,r,i)},opacity:function(t,e){return f.opacity(n,r,i)},display:function(t,e){return f.display(n,r,i)}}))};var r=d.angularScale.range(),u=Math.abs(r[1]-r[0])/o[0].length*Math.PI/180,c=U.svg.arc().startAngle(function(t){return-u/2}).endAngle(function(t){return u/2}).innerRadius(function(t){return d.radialScale(e+(t[2]||0))}).outerRadius(function(t){return d.radialScale(e+(t[2]||0))+d.radialScale(t[1])});s.arc=function(t,e,n){U.select(this).attr({class:"mark arc",d:c,transform:function(t,e){return"rotate("+(d.orientation+i(t[0])+90)+")"}})};var f={fill:function(t,e,n){return a[n].data.color},stroke:function(t,e,n){return a[n].data.strokeColor},"stroke-width":function(t,e,n){return a[n].data.strokeSize+"px"},"stroke-dasharray":function(t,e,n){return p[a[n].data.strokeDash]},opacity:function(t,e,n){return a[n].data.opacity},display:function(t,e,n){return void 0===a[n].data.visible||a[n].data.visible?"block":"none"}},h=U.select(this).selectAll("g.layer").data(o);h.enter().append("g").attr({class:"layer"});r=h.selectAll("path.mark").data(function(t,e){return t});r.enter().append("path").attr({class:"mark"}),r.style(f).each(s[d.geometryType]),r.exit().remove(),h.exit().remove()})}return e.config=function(t){return arguments.length?(t.forEach(function(t,e){n[e]||(n[e]={}),V(n[e],q.PolyChart.defaultConfig()),V(n[e],t)}),this):n},e.getColorScale=function(){},U.rebind(e,t,"on"),e},q.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:U.scale.category20()}}},q.BarChart=function(){return q.PolyChart()},q.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},q.AreaChart=function(){return q.PolyChart()},q.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},q.DotPlot=function(){return q.PolyChart()},q.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},q.LinePlot=function(){return q.PolyChart()},q.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},q.Legend=function(){var f=q.Legend.defaultConfig(),t=U.dispatch("hover");function h(){var i=f.legendConfig,t=f.data.map(function(t,r){return[].concat(t).map(function(t,e){var n=V({},i.elements[r]);return n.name=t,n.color=[].concat(i.elements[r].color)[e],n})}),n=(n=U.merge(t)).filter(function(t,e){return i.elements[e]&&(i.elements[e].visibleInLegend||void 0===i.elements[e].visibleInLegend)});i.reverseOrder&&(n=n.reverse());var e=i.container;"string"!=typeof e&&!e.nodeName||(e=U.select(e));var r=n.map(function(t,e){return t.color}),a=i.fontSize,o=null==i.isContinuous?"number"==typeof n[0]:i.isContinuous,s=o?i.height:a*n.length,t=e.classed("legend-group",!0).selectAll("svg").data([0]),e=t.enter().append("svg").attr({width:300,height:s+a,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});e.append("g").classed("legend-axis",!0),e.append("g").classed("legend-marks",!0);var e=U.range(n.length),l=U.scale[o?"linear":"ordinal"]().domain(e).range(r),u=U.scale[o?"linear":"ordinal"]().domain(e)[o?"range":"rangePoints"]([0,s]);o?((s=t.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(r)).enter().append("stop"),s.attr({offset:function(t,e){return e/(r.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),t.append("rect").classed("legend-mark",!0).attr({height:i.height,width:i.colorBandWidth,fill:"url(#grad1)"})):((c=t.select(".legend-marks").selectAll("path.legend-mark").data(n)).enter().append("path").classed("legend-mark",!0),c.attr({transform:function(t,e){return"translate("+[a/2,u(e)+a/2]+")"},d:function(t,e){var n,r=t.symbol;return t=3*(n=a),"line"===(r=r)?"M"+[[-n/2,-n/12],[n/2,-n/12],[n/2,n/12],[-n/2,n/12]]+"Z":(-1!=U.svg.symbolTypes.indexOf(r)?U.svg.symbol().type(r):U.svg.symbol().type("square")).size(t)()},fill:function(t,e){return l(e)}}),c.exit().remove());var c=U.svg.axis().scale(u).orient("right"),c=t.select("g.legend-axis").attr({transform:"translate("+[o?i.colorBandWidth:a,a/2]+")"}).call(c);return c.selectAll(".domain").style({fill:"none",stroke:"none"}),c.selectAll("line").style({fill:"none",stroke:o?i.textColor:"none"}),c.selectAll("text").style({fill:i.textColor,"font-size":i.fontSize}).text(function(t,e){return n[e].name}),h}return h.config=function(t){return arguments.length?(V(f,t),this):f},U.rebind(h,t,"on"),h},q.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},q.tooltipPanel=function(){var i,a,o,s={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},e="tooltip-"+q.tooltipPanel.uid++,l=10,u=function(){var t=(i=s.container.selectAll("g."+e).data([0])).enter().append("g").classed(e,!0).style({"pointer-events":"none",display:"none"});return o=t.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),a=t.append("text").attr({dx:s.padding+l,dy:.3*+s.fontSize}),u};return u.text=function(t){var e=U.hsl(s.color).l,n=.5<=e?"#aaa":"white",r=.5<=e?"black":"white",e=t||"";a.style({fill:r,"font-size":s.fontSize+"px"}).text(e);t=s.padding,r=a.node().getBBox(),e={fill:s.color,stroke:n,"stroke-width":"2px"},n=r.width+2*t+l,r=r.height+2*t;return o.attr({d:"M"+[[l,-r/2],[l,-r/4],[s.hasTick?0:l,0],[l,r/4],[l,r/2],[n,r/2],[n,-r/2]].join("L")+"Z"}).style(e),i.attr({transform:"translate("+[l,-r/2+2*t]+")"}),i.style({display:"block"}),u},u.move=function(t){if(i)return i.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),u},u.hide=function(){if(i)return i.style({display:"none"}),u},u.show=function(){if(i)return i.style({display:"block"}),u},u.config=function(t){return V(s,t),u},u},q.tooltipPanel.uid=1,q.adapter={},q.adapter.plotly=function(){var t={convert:function(t,n){var r,i,a,o,s={};return t.data&&(s.data=t.data.map(function(t,e){t=V({},t);return[[t,["marker","color"],["color"]],[t,["marker","opacity"],["opacity"]],[t,["marker","line","color"],["strokeColor"]],[t,["marker","line","dash"],["strokeDash"]],[t,["marker","line","width"],["strokeSize"]],[t,["marker","symbol"],["dotType"]],[t,["marker","size"],["dotSize"]],[t,["marker","barWidth"],["barWidth"]],[t,["line","interpolation"],["lineInterpolation"]],[t,["showlegend"],["visibleInLegend"]]].forEach(function(t,e){q.util.translator.apply(null,t.concat(n))}),n||delete t.marker,n&&delete t.groupId,n?("LinePlot"===t.geometry?(t.type="scatter",!0===t.dotVisible?(delete t.dotVisible,t.mode="lines+markers"):t.mode="lines"):"DotPlot"===t.geometry?(t.type="scatter",t.mode="markers"):"AreaChart"===t.geometry?t.type="area":"BarChart"===t.geometry&&(t.type="bar"),delete t.geometry):("scatter"===t.type?"lines"===t.mode?t.geometry="LinePlot":"markers"===t.mode?t.geometry="DotPlot":"lines+markers"===t.mode&&(t.geometry="LinePlot",t.dotVisible=!0):"area"===t.type?t.geometry="AreaChart":"bar"===t.type&&(t.geometry="BarChart"),delete t.mode,delete t.type),t}),!n&&t.layout&&"stack"===t.layout.barmode&&(r=q.util.duplicates(s.data.map(function(t,e){return t.geometry})),s.data.forEach(function(t,e){t=r.indexOf(t.geometry);-1!=t&&(s.data[e].groupId=t)}))),t.layout&&([[t=V({},t.layout),["plot_bgcolor"],["backgroundColor"]],[t,["showlegend"],["showLegend"]],[t,["radialaxis"],["radialAxis"]],[t,["angularaxis"],["angularAxis"]],[t.angularaxis,["showline"],["gridLinesVisible"]],[t.angularaxis,["showticklabels"],["labelsVisible"]],[t.angularaxis,["nticks"],["ticksCount"]],[t.angularaxis,["tickorientation"],["tickOrientation"]],[t.angularaxis,["ticksuffix"],["ticksSuffix"]],[t.angularaxis,["range"],["domain"]],[t.angularaxis,["endpadding"],["endPadding"]],[t.radialaxis,["showline"],["gridLinesVisible"]],[t.radialaxis,["tickorientation"],["tickOrientation"]],[t.radialaxis,["ticksuffix"],["ticksSuffix"]],[t.radialaxis,["range"],["domain"]],[t.angularAxis,["showline"],["gridLinesVisible"]],[t.angularAxis,["showticklabels"],["labelsVisible"]],[t.angularAxis,["nticks"],["ticksCount"]],[t.angularAxis,["tickorientation"],["tickOrientation"]],[t.angularAxis,["ticksuffix"],["ticksSuffix"]],[t.angularAxis,["range"],["domain"]],[t.angularAxis,["endpadding"],["endPadding"]],[t.radialAxis,["showline"],["gridLinesVisible"]],[t.radialAxis,["tickorientation"],["tickOrientation"]],[t.radialAxis,["ticksuffix"],["ticksSuffix"]],[t.radialAxis,["range"],["domain"]],[t.font,["outlinecolor"],["outlineColor"]],[t.legend,["traceorder"],["reverseOrder"]],[t,["labeloffset"],["labelOffset"]],[t,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(t,e){q.util.translator.apply(null,t.concat(n))}),n?(void 0!==t.tickLength&&(t.angularaxis.ticklen=t.tickLength,delete t.tickLength),t.tickColor&&(t.angularaxis.tickcolor=t.tickColor,delete t.tickColor)):(t.angularAxis&&void 0!==t.angularAxis.ticklen&&(t.tickLength=t.angularAxis.ticklen),t.angularAxis&&void 0!==t.angularAxis.tickcolor&&(t.tickColor=t.angularAxis.tickcolor)),t.legend&&"boolean"!=typeof t.legend.reverseOrder&&(t.legend.reverseOrder="normal"!=t.legend.reverseOrder),t.legend&&"boolean"==typeof t.legend.traceorder&&(t.legend.traceorder=t.legend.traceorder?"reversed":"normal",delete t.legend.reverseOrder),t.margin&&void 0!==t.margin.t&&(i=["t","r","b","l","pad"],a=["top","right","bottom","left","pad"],o={},U.entries(t.margin).forEach(function(t,e){o[a[i.indexOf(t.key)]]=t.value}),t.margin=o),n&&(delete t.needsEndSpacing,delete t.minorTickColor,delete t.minorTicks,delete t.angularaxis.ticksCount,delete t.angularaxis.ticksCount,delete t.angularaxis.ticksStep,delete t.angularaxis.rewriteTicks,delete t.angularaxis.nticks,delete t.radialaxis.ticksCount,delete t.radialaxis.ticksCount,delete t.radialaxis.ticksStep,delete t.radialaxis.rewriteTicks,delete t.radialaxis.nticks),s.layout=t),s}};return t}},{"../../../constants/alignment":396,"../../../lib":424,d3:277}],521:[function(t,e,n){"use strict";var u=t("d3"),r=t("../../../lib"),i=t("../../../components/color"),c=t("./micropolar"),f=t("./undo_manager"),h=r.extendDeepAll,d=e.exports={};d.framework=function(n){var i,a,r,o,s,l=new f;function t(t,e){return e&&(s=e),u.select(u.select(s).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),i=i?h(i,t):t,r=r||c.Axis(),o=c.adapter.plotly().convert(i),r.config(o).render(s),n.data=i.data,n.layout=i.layout,d.fillLayout(n),i}return t.isPolar=!0,t.svg=function(){return r.svg()},t.getConfig=function(){return i},t.getLiveConfig=function(){return c.adapter.plotly().convert(r.getLiveConfig(),!0)},t.getLiveScales=function(){return{t:r.angularScale(),r:r.radialScale()}},t.setUndoPoint=function(){var t,e,n=this,r=c.util.cloneJson(i);t=r,e=a,l.add({undo:function(){e&&n(e)},redo:function(){n(t)}}),a=c.util.cloneJson(r)},t.undo=function(){l.undo()},t.redo=function(){l.redo()},t},d.fillLayout=function(t){var e=u.select(t).selectAll(".plot-container"),n=e.selectAll(".svg-container"),r=t.framework&&t.framework.svg&&t.framework.svg(),r={width:800,height:600,paper_bgcolor:i.background,_container:e,_paperdiv:n,_paper:r};t._fullLayout=h(r,t.layout)}},{"../../../components/color":294,"../../../lib":424,"./micropolar":520,"./undo_manager":522,d3:277}],522:[function(t,e,n){"use strict";e.exports=function(){var e,n=[],r=-1,i=!1;function a(t,e){return t&&(i=!0,t[e](),i=!1),this}return{add:function(t){return i||(n.splice(r+1,n.length-r),n.push(t),r=n.length-1),this},setCallback:function(t){e=t},undo:function(){var t=n[r];return t&&(a(t,"undo"),--r,e&&e(t.undo)),this},redo:function(){var t=n[r+1];return t&&(a(t,"redo"),r+=1,e&&e(t.redo)),this},clear:function(){n=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[r-1]},getIndex:function(){return r}}}},{}],523:[function(t,e,n){"use strict";var m=t("../lib"),v=t("../plot_api/plot_template"),b=t("./domain").defaults;e.exports=function(t,e,n,r){var i=r.type,a=r.attributes,o=r.handleDefaults,s=r.partition||"x",l=e._subplots[i],u=l.length,c=u&&l[0].replace(/\d+$/,"");function f(t,e){return m.coerce(p,g,a,t,e)}for(var h=0;h<u;h++){var d=l[h],p=t[d]||(t[d]={}),g=v.newContainer(e,d,c);f("uirevision",e.uirevision);var y={};y[s]=[h/u,(h+1)/u],b(g,e,f,y),r.id=d,o(p,g,f,r)}}},{"../lib":424,"../plot_api/plot_template":460,"./domain":498}],524:[function(t,e,n){"use strict";['Variables are inserted using %{variable}, for example "y: %{y}".','Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',t("../constants/docs").FORMAT_LINK,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',t("../constants/docs").DATE_FORMAT_LINK,"for details on the date formatting syntax."].join(" ");function r(t){var e=t.description?" "+t.description:"",n=t.keys||[];if(0<n.length){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";e+="Finally, the template string has access to ",e=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return e}n.hovertemplateAttrs=function(t,e){t=t||{};r(e=e||{});e={valType:"string",dflt:"",editType:t.editType||"none"};return!1!==t.arrayOk&&(e.arrayOk=!0),e},n.texttemplateAttrs=function(t,e){t=t||{};r(e=e||{});e={valType:"string",dflt:"",editType:t.editType||"calc"};return!1!==t.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":398}],525:[function(t,e,f){"use strict";var h=t("./lib/loggers"),n=t("./lib/noop"),d=t("./lib/push_unique"),p=t("./lib/is_plain_object"),g=t("./lib/dom").addStyleRule,r=t("./lib/extend"),i=t("./plots/attributes"),y=t("./plots/layout_attributes"),m=r.extendFlat,v=r.extendDeepAll;function b(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var n=0;n<e.length;n++)d(f.layoutArrayRegexes,e[n])}}function x(t,e){t=f.componentsRegistry[t].schema;t&&t.traces&&((t=t.traces[e])&&v(f.modules[e]._module.attributes,t))}function _(t,e){t=f.componentsRegistry[t].schema;t&&t.transforms&&((t=t.transforms[e])&&v(f.transformsRegistry[e].attributes,t))}function w(t,e){var n=f.componentsRegistry[t].schema;n&&n.subplots&&(e=(t=f.subplotsRegistry[e]).layoutAttributes,t="subplot"===t.attr?t.name:t.attr,Array.isArray(t)&&(t=t[0]),t=n.subplots[t],e&&t&&v(e,t))}function a(t){return"object"==typeof t&&(t=t.type),t}f.modules={},f.allCategories={},f.allTypes=[],f.subplotsRegistry={},f.transformsRegistry={},f.componentsRegistry={},f.layoutArrayContainers=[],f.layoutArrayRegexes=[],f.traceLayoutAttributes={},f.localeRegistry={},f.apiMethodRegistry={},f.collectableSubplotTypes=null,f.register=function(t){if(f.collectableSubplotTypes=null,!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e,n,r,i,a,o,s,l=0;l<t.length;l++){var u=t[l];if(!u)throw new Error("Invalid module was attempted to be registered!");switch(u.moduleType){case"trace":!function(t){var e=t.name,n=t.categories,r=t.meta;if(f.modules[e])return h.log("Type "+e+" already registered");f.subplotsRegistry[t.basePlotModule.name]||function(t){var e,n=t.name;if(f.subplotsRegistry[n])return h.log("Plot type "+n+" already registered.");for(e in b(t),f.subplotsRegistry[n]=t,f.componentsRegistry)w(e,t.name)}(t.basePlotModule);for(var i,a={},o=0;o<n.length;o++)a[n[o]]=!0,f.allCategories[n[o]]=!0;for(i in f.modules[e]={_module:t,categories:a},r&&Object.keys(r).length&&(f.modules[e].meta=r),f.allTypes.push(e),f.componentsRegistry)x(i,e);if(t.layoutAttributes&&m(f.traceLayoutAttributes,t.layoutAttributes),r=t.basePlotModule,"mapbox"===(t=r.name)){var s,l=r.constants.styleRules;for(s in l)g(".js-plotly-plot .plotly .mapboxgl-"+s,l[s])}"geo"!==t&&"mapbox"!==t||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}(u);break;case"transform":!function(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var e,n="Transform module "+t.name,r="function"==typeof t.transform,i="function"==typeof t.calcTransform;if(!r&&!i)throw new Error(n+" is missing a *transform* or *calcTransform* method.");for(e in r&&i&&h.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),p(t.attributes)||h.log(n+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&h.log(n+" registered without a *supplyDefaults* method."),f.transformsRegistry[t.name]=t,f.componentsRegistry)_(e,t.name)}(u);break;case"component":!function(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var e,n,r,i=t.name;for(e in(f.componentsRegistry[i]=t).layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&d(f.layoutArrayContainers,i),b(t)),f.modules)x(i,e);for(n in f.subplotsRegistry)w(i,n);for(r in f.transformsRegistry)_(i,r);t.schema&&t.schema.layout&&v(y,t.schema.layout)}(u);break;case"locale":s=o=a=c=i=r=n=void 0,n=(e=u).name,r=n.split("-")[0],i=e.dictionary,c=e.format,a=i&&Object.keys(i).length,o=c&&Object.keys(c).length,s=f.localeRegistry,(e=s[n])||(s[n]=e={}),r!==n&&((n=s[r])||(s[r]=n={}),a&&n.dictionary===e.dictionary&&(n.dictionary=i),o&&n.format===e.format&&(n.format=c)),a&&(e.dictionary=i),!void(o&&(e.format=c));break;case"apiMethod":var c=u.name;f.apiMethodRegistry[c]=u.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},f.getModule=function(t){t=f.modules[a(t)];return!!t&&t._module},f.traceIs=function(t,e){if("various"===(t=a(t)))return!1;var n=f.modules[t];return n||(t&&"area"!==t&&h.log("Unrecognized trace type "+t+"."),n=f.modules[i.type.dflt]),!!n.categories[e]},f.getTransformIndices=function(t,e){for(var n=[],r=t.transforms||[],i=0;i<r.length;i++)r[i].type===e&&n.push(i);return n},f.hasTransform=function(t,e){for(var n=t.transforms||[],r=0;r<n.length;r++)if(n[r].type===e)return!0;return!1},f.getComponentMethod=function(t,e){t=f.componentsRegistry[t];return t&&t[e]||n},f.call=function(){var t=arguments[0],e=[].slice.call(arguments,1);return f.apiMethodRegistry[t].apply(null,e)}},{"./lib/dom":415,"./lib/extend":417,"./lib/is_plain_object":425,"./lib/loggers":428,"./lib/noop":433,"./lib/push_unique":437,"./plots/attributes":467,"./plots/layout_attributes":514}],526:[function(t,e,n){"use strict";var d=t("../registry"),t=t("../lib"),p=t.extendFlat,g=t.extendDeep;function y(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}e.exports=function(t,e){t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var n,r=t.data,i=t.layout,a=g([],r),o=g({},i,y(e.tileClass)),i=t._context||{};if(e.width&&(o.width=e.width),e.height&&(o.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){o.annotations=[];for(var s=Object.keys(o),l=0;l<s.length;l++)n=s[l],-1<["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))&&(o[s[l]].title={text:""});for(l=0;l<a.length;l++){var u=a[l];u.showscale=!1,u.marker&&(u.marker.showscale=!1),d.traceIs(u,"pie-like")&&(u.textposition="none")}}if(Array.isArray(e.annotations))for(l=0;l<e.annotations.length;l++)o.annotations.push(e.annotations[l]);var c=Object.keys(o).filter(function(t){return t.match(/^scene\d*$/)});if(c.length){var f={};for("thumbnail"===e.tileClass&&(f={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<c.length;l++){var h=o[c[l]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),p(h.xaxis,f),p(h.yaxis,f),p(h.zaxis,f),h._scene=null}}t=document.createElement("div");e.tileClass&&(t.className=e.tileClass);i={gd:t,td:t,layout:o,data:a,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:i.mapboxAccessToken}};return"transparent"!==e.setBackground&&(i.config.setBackground=e.setBackground||"opaque"),i.gd.defaultLayout=y(e.tileClass),i}},{"../lib":424,"../registry":525}],527:[function(t,e,n){"use strict";var s=t("../lib"),l=t("../plot_api/to_image"),u=t("./filesaver"),c=t("./helpers");e.exports=function(i,a){var o;return s.isPlainObject(i)||(o=s.getGraphDiv(i)),(a=a||{}).format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(e,n){o&&o._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==a.format&&n(new Error(c.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var t=l(i,a),r=a.filename||i.fn||"newplot";r+="."+a.format.replace("-","."),t.then(function(t){return o&&(o._snapshotInProgress=!1),u(t,r,a.format)}).then(function(t){e(t)}).catch(function(t){o&&(o._snapshotInProgress=!1),n(t)})})}},{"../lib":424,"../plot_api/to_image":463,"./filesaver":528,"./helpers":529}],528:[function(t,e,n){"use strict";var u=t("../lib"),c=t("./helpers");e.exports=function(i,a,o){var s=document.createElement("a"),l="download"in s;return new Promise(function(t,e){var n;if(u.isIE9orBelow()&&e(new Error("IE < 10 unsupported")),u.isSafari()){var r="svg"===o?",":";base64,";return c.octetStream(r+encodeURIComponent(i)),t(a)}return u.isIE()?(n=c.createBlob(i,"svg"),window.navigator.msSaveBlob(n,a),n=null,t(a)):l?(n=c.createBlob(i,o),r=c.createObjectURL(n),s.href=r,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),c.revokeObjectURL(r),n=null,t(a)):void e(new Error("download error"))})}},{"../lib":424,"./helpers":529}],529:[function(t,e,n){"use strict";var r=t("../registry");n.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},n.getRedrawFunc=function(e){return function(){var t=e._fullLayout||{};!(t._has&&t._has("polar"))&&e.data&&e.data[0]&&e.data[0].r||r.getComponentMethod("colorbar","draw")(e)}},n.encodeSVG=function(t){return"data:image/svg+xml,"+encodeURIComponent(t)},n.encodeJSON=function(t){return"data:application/json,"+encodeURIComponent(t)};var i=window.URL||window.webkitURL;n.createObjectURL=function(t){return i.createObjectURL(t)},n.revokeObjectURL=function(t){return i.revokeObjectURL(t)},n.createBlob=function(t,e){if("svg"===e)return new window.Blob([t],{type:"image/svg+xml;charset=utf-8"});if("full-json"===e)return new window.Blob([t],{type:"application/json;charset=utf-8"});t=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(window.atob(t));return new window.Blob([t],{type:"image/"+e})},n.octetStream=function(t){document.location.href="data:application/octet-stream"+t},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":525}],530:[function(t,e,n){"use strict";var r=t("./helpers"),t={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};e.exports=t},{"./cloneplot":526,"./download":527,"./helpers":529,"./svgtoimg":531,"./toimage":532,"./tosvg":533}],531:[function(t,e,n){"use strict";var v=t("../lib"),r=t("events").EventEmitter,b=t("./helpers");e.exports=function(g){var y=g.emitter||new r,m=new Promise(function(n,r){var t=window.Image,e=g.svg,i=g.format||"png";if(v.isIE()&&"svg"!==i){var a=new Error(b.MSG_IE_BAD_FORMAT);return r(a),g.promise?m:y.emit("error",a)}var o,s=g.canvas,l=g.scale||1,u=g.width||300,a=g.height||150,c=l*u,f=l*a,h=s.getContext("2d"),d=new t,p="svg"===i||v.isIE9orBelow()||v.isSafari()?b.encodeSVG(e):(o=b.createBlob(e,"svg"),b.createObjectURL(o));s.width=c,s.height=f,d.onload=function(){var t;switch(o=null,b.revokeObjectURL(p),"svg"!==i&&h.drawImage(d,0,0,c,f),i){case"jpeg":t=s.toDataURL("image/jpeg");break;case"png":t=s.toDataURL("image/png");break;case"webp":t=s.toDataURL("image/webp");break;case"svg":t=p;break;default:var e="Image format is not jpeg, png, svg or webp.";if(r(new Error(e)),!g.promise)return y.emit("error",e)}n(t),g.promise||y.emit("success",t)},d.onerror=function(t){if(o=null,b.revokeObjectURL(p),r(t),!g.promise)return y.emit("error",t)},d.src=p});return g.promise?m:y}},{"../lib":424,"./helpers":529,events:97}],532:[function(t,e,n){"use strict";var a=t("events").EventEmitter,o=t("../registry"),s=t("../lib"),l=t("./helpers"),u=t("./cloneplot"),c=t("./tosvg"),f=t("./svgtoimg");e.exports=function(t,n){var r=new a,e=u(t,{format:"png"}),i=e.gd;return i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i),t=l.getRedrawFunc(i),o.call("plot",i,e.data,e.layout,e.config).then(t).then(function(){var t=l.getDelay(i._fullLayout);setTimeout(function(){var t=c(i),e=document.createElement("canvas");e.id=s.randstr(),(r=f({format:n.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:e,emitter:r,svg:t})).clean=function(){i&&document.body.removeChild(i)}},t)}).catch(function(t){r.emit("error",t)}),r}},{"../lib":424,"../registry":525,"./cloneplot":526,"./helpers":529,"./svgtoimg":531,"./tosvg":533,events:97}],533:[function(t,e,n){"use strict";var y=t("d3"),m=t("../lib"),v=t("../components/drawing"),b=t("../components/color"),x=t("../constants/xmlns_namespaces"),_=/"/g,w="TOBESTRIPPED",k=new RegExp('("'+w+")|("+w+'")',"g");e.exports=function(t,e,n){var r=t._fullLayout,i=r._paper,a=r._toppaper,o=r.width,s=r.height;i.insert("rect",":first-child").call(v.setRect,0,0,o,s).call(b.fill,r.paper_bgcolor);var l=r._basePlotModules||[];for(f=0;f<l.length;f++){var u=l[f];u.toSVG&&u.toSVG(t)}if(a)for(var a=a.node().childNodes,c=Array.prototype.slice.call(a),f=0;f<c.length;f++){var h=c[f];h.childNodes.length&&i.node().appendChild(h)}if(r._draggers&&r._draggers.remove(),i.node().style.background="",i.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var t,e=y.select(this);"hidden"!==this.style.visibility&&"none"!==this.style.display?(e.style({visibility:null,display:null}),(t=this.style.fontFamily)&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(_,w))):e.remove()}),r._gradientUrlQueryParts){var d,p=[];for(d in r._gradientUrlQueryParts)p.push(d);p.length&&i.selectAll(p.join(",")).each(function(){var t=y.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(_,w));e=this.style.stroke;e&&-1!==e.indexOf("url(")&&t.style("stroke",e.replace(_,w))})}"pdf"!==e&&"eps"!==e||i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),i.node().setAttributeNS(x.xmlns,"xmlns",x.svg),i.node().setAttributeNS(x.xmlns,"xmlns:xlink",x.xlink),"svg"===e&&n&&(i.attr("width",n*o),i.attr("height",n*s),i.attr("viewBox","0 0 "+o+" "+s));var g,o=(new window.XMLSerializer).serializeToString(i.node());return s=o,g=y.select("body").append("div").style({display:"none"}).html(""),s=s.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":g.html(t).text()}),g.remove(),o=(o=(o=s).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(k,"'"),m.isIE()&&(o=(o=(o=o.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),o}},{"../components/color":294,"../components/drawing":316,"../constants/xmlns_namespaces":403,"../lib":424,d3:277}],534:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;r.mergeArray(e.text,t,"tx"),r.mergeArray(e.hovertext,t,"htx");e=e.marker;e&&(r.mergeArray(e.opacity,t,"mo",!0),r.mergeArray(e.color,t,"mc"),(e=e.line)&&(r.mergeArray(e.color,t,"mlc"),r.mergeArrayCastPositive(e.width,t,"mlw")))}},{"../../lib":424}],535:[function(t,e,n){"use strict";var r=t("../scatter/attributes"),i=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,o=t("../../components/colorscale/attributes"),s=t("../../plots/font_attributes"),l=t("./constants"),u=t("../../lib/extend").extendFlat,t=s({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=u({},r.marker.line.width,{dflt:0}),s=u({width:s,editType:"calc"},o("marker.line")),o=u({line:s,editType:"calc"},o("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,texttemplate:a({editType:"plot"},{keys:l.eventDataKeys}),hovertext:r.hovertext,hovertemplate:i({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:u({},t,{}),insidetextfont:u({},t,{}),outsidetextfont:u({},t,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:u({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:o,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":301,"../../lib/extend":417,"../../plots/font_attributes":499,"../../plots/template_attributes":524,"../scatter/attributes":577,"./constants":536}],536:[function(t,e,n){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],537:[function(t,e,n){"use strict";var x=t("fast-isnumeric"),d=t("../../lib").isArrayOrTypedArray,_=t("../../constants/numerical").BADNUM,h=t("../../registry"),w=t("../../plots/cartesian/axes"),v=t("../../plots/cartesian/constraints").getAxisGroup,p=t("./sieve.js");function g(t,m,e,n,r){if(n.length){var i,a,o,s,l,u,c,f,h;switch(!function(t,e){var n,r,i;for(n=0;n<e.length;n++){var a=e[n],o=a[0].trace,s="funnel"===o.type?o._base:o.base,l="h"===o.orientation?o.xcalendar:o.ycalendar,u="category"===t.type||"multicategory"===t.type?function(){return null}:t.d2c;if(d(s)){for(r=0;r<Math.min(s.length,a.length);r++)i=u(s[r],0,l),x(i)?(a[r].b=+i,a[r].hasB=1):a[r].b=0;for(;r<a.length;r++)a[r].b=0}else{i=u(s,0,l);var c=x(i);for(i=c?i:0,r=0;r<a.length;r++)a[r].b=i,c&&(a[r].hasB=1)}}}(e,n),r.mode){case"overlay":y(m,e,n,r);break;case"group":for(i=[],a=[],o=0;o<n.length;o++)(void 0===(s=n[o])[0].trace.offset?a:i).push(s);a.length&&(l=t,u=m,c=e,h=new p(a,{sepNegVal:!1,overlapNoMerge:!(f=r).norm}),function(t,e,n,r){for(var i,a=t._fullLayout,o=n.positions,t=n.distinctPositions,s=n.minDiff,l=n.traces,u=l.length,c=o.length!==t.length,f=s*(1-r.gap),t=v(a,e._id)+l[0][0].trace.orientation,h=a._alignmentOpts[t]||{},d=0;d<u;d++){var p=l[d],g=p[0].trace,y=h[g.alignmentgroup]||{},m=Object.keys(y.offsetGroups||{}).length,y=(i=m?f/m:c?f/u:f)*(1-(r.groupgap||0));i=m?((2*g._offsetIndex+1-m)*i-y)/2:c?((2*d+1-u)*i-y)/2:-y/2;p=p[0].t;p.barwidth=y,p.poffset=i,p.bargroupwidth=f,p.bardelta=s}n.binWidth=l[0][0].t.barwidth/100,k(n),M(e,n),T(e,n,c)}(l,u,h,f),function(){for(var t=h.traces,e=0;e<t.length;e++){var n=t[e];if(void 0===n[0].trace.base)for(var r=new p([n],{sepNegVal:!0,overlapNoMerge:!0}),i=0;i<n.length;i++){var a,o=n[i];o.p===_||(a=r.put(o.p,o.b+o.s))&&(o.b=a)}}}(),f.norm?(S(h),E(c,h,f)):A(c,h)),i.length&&y(m,e,i,r);break;case"stack":case"relative":for(i=[],a=[],o=0;o<n.length;o++)(void 0===(s=n[o])[0].trace.base?a:i).push(s);a.length&&function(t,e,n,r){var i=new p(n,{sepNegVal:"relative"===r.mode,overlapNoMerge:!(r.norm||"stack"===r.mode||"relative"===r.mode)});b(t,i,r),function(t,e,n){var r,i,a,o,s,l,u=O(t),c=e.traces;for(o=0;o<c.length;o++)if(r=c[o],"funnel"===(i=r[0].trace).type)for(s=0;s<r.length;s++)(l=r[s]).s!==_&&e.put(l.p,-.5*l.s);for(o=0;o<c.length;o++){r=c[o],i=r[0].trace,a="funnel"===i.type;var f,h,d=[];for(s=0;s<r.length;s++)(l=r[s]).s!==_&&(h=a?l.s:l.s+l.b,f=e.put(l.p,h),h=f+h,l.b=f,l[u]=h,n.norm||(d.push(h),l.hasB&&d.push(f)));n.norm||(i._extremes[t._id]=w.findExtremes(t,d,{tozero:!0,padded:!0}))}}(e,i,r);for(var a=0;a<n.length;a++)for(var o=n[a],s=0;s<o.length;s++){var l=o[s];l.s!==_&&l.b+l.s===i.get(l.p,l.s)&&(l._outmost=!0)}r.norm&&E(e,i,r)}(m,e,a,r),i.length&&y(m,e,i,r)}!function(t){var e,n,r,i=O(m),a={},o=1/0,s=-1/0;for(e=0;e<t.length;e++)for(r=t[e],n=0;n<r.length;n++){var l=r[n].p;x(l)&&(o=Math.min(o,l),s=Math.max(s,l))}var u=1e4/(s-o),c=a.round=function(t){return String(Math.round(u*(t-o)))};for(e=0;e<t.length;e++){(r=t[e])[0].t.extents=a;var f=r[0].t.poffset,h=Array.isArray(f);for(n=0;n<r.length;n++){var d,p,g=r[n],y=g[i]-g.w/2;x(y)&&(d=g[i]+g.w/2,p=c(g.p),a[p]?a[p]=[Math.min(y,a[p][0]),Math.max(d,a[p][1])]:a[p]=[y,d]),g.p0=g.p+(h?f[n]:f),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}}(n)}}function y(t,e,n,r){for(var i=0;i<n.length;i++){var a=n[i],a=new p([a],{unitMinDiff:r.xCat||r.yCat,sepNegVal:!1,overlapNoMerge:!r.norm});b(t,a,r),r.norm?(S(a),E(e,a,r)):A(e,a)}}function b(t,e,n){for(var r=e.minDiff,i=e.traces,a=r*(1-n.gap),o=a*(1-(n.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var u=i[l][0].t;u.barwidth=o,u.poffset=s,u.bargroupwidth=a,u.bardelta=r}e.binWidth=i[0][0].t.barwidth/100,k(e),M(t,e),T(t,e)}function k(t){for(var e=t.traces,n=0;n<e.length;n++){var r,i=e[n],a=i[0],o=a.trace,s=a.t,a=o._offset||o.offset,l=s.poffset;if(d(a)){for(r=Array.prototype.slice.call(a,0,i.length),f=0;f<r.length;f++)x(r[f])||(r[f]=l);for(f=r.length;f<i.length;f++)r.push(l);s.poffset=r}else void 0!==a&&(s.poffset=a);var o=o._width||o.width,u=s.barwidth;if(d(o)){for(var c=Array.prototype.slice.call(o,0,i.length),f=0;f<c.length;f++)x(c[f])||(c[f]=u);for(f=c.length;f<i.length;f++)c.push(u);if(s.barwidth=c,void 0===a){for(r=[],f=0;f<i.length;f++)r.push(l+(u-c[f])/2);s.poffset=r}}else void 0!==o&&(s.barwidth=o,void 0===a&&(s.poffset=l+(u-o)/2))}}function M(t,e){for(var n=e.traces,r=O(t),i=0;i<n.length;i++)for(var a=n[i],o=a[0].t,s=o.poffset,l=Array.isArray(s),u=o.barwidth,c=Array.isArray(u),f=0;f<a.length;f++){var h=a[f],d=h.w=c?u[f]:u;h[r]=h.p+(l?s[f]:s)+d/2}}function T(t,e,n){var r=e.traces,i=e.minDiff/2;w.minDtick(t,e.minDiff,e.distinctPositions[0],n);for(var a=0;a<r.length;a++){var o,s=r[a],l=s[0],u=l.trace,c=[];for(g=0;g<s.length;g++)y=(o=s[g]).p-i,b=o.p+i,c.push(y,b);if(u.width||u.offset)for(var l=l.t,f=l.poffset,h=l.barwidth,d=Array.isArray(f),p=Array.isArray(h),g=0;g<s.length;g++){o=s[g];var y,m=d?f[g]:f,v=p?h[g]:h,b=(y=o.p+m)+v;c.push(y,b)}u._extremes[t._id]=w.findExtremes(t,c,{padded:!1})}}function A(t,e){for(var n=e.traces,r=O(t),i=0;i<n.length;i++){for(var a=n[i],o=a[0].trace,s=[],l=!1,u=0;u<a.length;u++){var c=a[u],f=c.b,h=f+c.s;c[r]=h,s.push(h),c.hasB&&s.push(f),c.hasB&&c.b||(l=!0)}o._extremes[t._id]=w.findExtremes(t,s,{tozero:l,padded:!0})}}function S(t){for(var e=t.traces,n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++){var a=r[i];a.s!==_&&t.put(a.p,a.b+a.s)}}function E(e,t,n){var r=t.traces,i=O(e),a="fraction"===n.norm?1:100,o=a/1e9,s=e.l2c(e.c2l(0)),l="stack"===n.mode?a:s;function u(t){return x(e.c2l(t))&&(t<s-o||l+o<t||!x(s))}for(var c=0;c<r.length;c++){for(var f=r[c],h=f[0].trace,d=[],p=!1,g=!1,y=0;y<f.length;y++){var m,v,b=f[y];b.s!==_&&(v=Math.abs(a/t.get(b.p,b.s)),b.b*=v,b.s*=v,v=(m=b.b)+b.s,b[i]=v,d.push(v),g=g||u(v),b.hasB&&(d.push(m),g=g||u(m)),b.hasB&&b.b||(p=!0))}h._extremes[e._id]=w.findExtremes(e,d,{tozero:p,padded:g})}}function O(t){return t._id.charAt(0)}e.exports={crossTraceCalc:function(t,e){for(var n=e.xaxis,r=e.yaxis,e=t._fullLayout,i=t._fullData,a=t.calcdata,o=[],s=[],l=0;l<i.length;l++){var u=i[l];if(!0===u.visible&&h.traceIs(u,"bar")&&u.xaxis===n._id&&u.yaxis===r._id&&(("h"===u.orientation?o:s).push(a[l]),u._computePh))for(var c=t.calcdata[l],f=0;f<c.length;f++)"function"==typeof c[f].ph0&&(c[f].ph0=c[f].ph0()),"function"==typeof c[f].ph1&&(c[f].ph1=c[f].ph1())}e={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:e.barmode,norm:e.barnorm,gap:e.bargap,groupgap:e.bargroupgap},g(t,n,r,s,e),g(t,r,n,o,e)},setGroupPositions:g}},{"../../constants/numerical":402,"../../lib":424,"../../plots/cartesian/axes":471,"../../plots/cartesian/constraints":478,"../../registry":525,"./sieve.js":545,"fast-isnumeric":99}],538:[function(t,e,n){"use strict";var p=t("../../lib"),o=t("../../components/color"),s=t("../../registry"),l=t("../scatter/xy_defaults"),u=t("../scatter/period_defaults"),c=t("./style_defaults"),f=t("../../plots/cartesian/constraints").getAxisGroup,h=t("./attributes"),g=p.coerceFont;function a(t,e,n,r){var i=e.orientation,a=e[{v:"x",h:"y"}[i]+"axis"],o=f(n,a)+i,a=n._alignmentOpts||{},i=r("alignmentgroup"),n=a[o],o=(n=n||(a[o]={}))[i];o?o.traces.push(e):o=n[i]={traces:[e],alignmentIndex:Object.keys(n).length,offsetGroups:{}};n=r("offsetgroup"),r=o.offsetGroups,o=r[n];n&&(o=o||(r[n]={offsetIndex:Object.keys(r).length}),e._offsetIndex=o.offsetIndex)}function d(t,e,n,r,i,a){var o=!(!1===(a=a||{}).moduleHasSelected),s=!(!1===a.moduleHasUnselected),l=!(!1===a.moduleHasConstrain),u=!(!1===a.moduleHasCliponaxis),c=!(!1===a.moduleHasTextangle),f=!(!1===a.moduleHasInsideanchor),h=!!a.hasPathbar,d=Array.isArray(i)||"auto"===i,a=d||"inside"===i,d=d||"outside"===i;(a||d)&&(i=g(r,"textfont",n.font),n=p.extendFlat({},i),(t=!(t.textfont&&t.textfont.color))&&delete n.color,g(r,"insidetextfont",n),h&&(h=p.extendFlat({},i),t&&delete h.color,g(r,"pathbar.textfont",h)),d&&g(r,"outsidetextfont",i),o&&r("selected.textfont.color"),s&&r("unselected.textfont.color"),l&&r("constraintext"),u&&r("cliponaxis"),c&&r("textangle"),r("texttemplate")),a&&f&&r("insidetextanchor")}e.exports={supplyDefaults:function(n,r,t,e){function i(t,e){return p.coerce(n,r,h,t,e)}var a;l(n,r,e,i)?(u(n,r,e,i),i("orientation",r.x&&!r.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),a=i("textposition"),d(n,0,e,i,a,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c(n,r,i,t,e),t=(r.marker.line||{}).color,(e=s.getComponentMethod("errorbars","supplyDefaults"))(n,r,t||o.defaultLine,{axis:"y"}),e(n,r,t||o.defaultLine,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(r,i)):r.visible=!1},crossTraceDefaults:function(t,e){var n;function r(t){return p.coerce(n._input,n,h,t)}if("group"===e.barmode)for(var i=0;i<t.length;i++)"bar"===(n=t[i]).type&&(n._input,a(0,n,e,r))},handleGroupingDefaults:a,handleText:d}},{"../../components/color":294,"../../lib":424,"../../plots/cartesian/constraints":478,"../../registry":525,"../scatter/period_defaults":597,"../scatter/xy_defaults":604,"./attributes":535,"./style_defaults":547}],539:[function(t,e,n){"use strict";var a=t("fast-isnumeric"),r=t("tinycolor2"),i=t("../../lib").isArrayOrTypedArray;n.coerceString=function(t,e,n){if("string"==typeof e){if(e||!t.noBlank)return e}else if(("number"==typeof e||!0===e)&&!t.strict)return String(e);return void 0!==n?n:t.dflt},n.coerceNumber=function(t,e,n){if(a(e)){e=+e;var r=t.min,i=t.max;if(!(void 0!==r&&e<r||void 0!==i&&i<e))return e}return void 0!==n?n:t.dflt},n.coerceColor=function(t,e,n){return r(e).isValid()?e:void 0!==n?n:t.dflt},n.coerceEnumerated=function(t,e,n){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==n?n:t.dflt},n.getValue=function(t,e){var n;return Array.isArray(t)?e<t.length&&(n=t[e]):n=t,n},n.getLineWidth=function(t,e){return 0<e.mlw?e.mlw:i(t.marker.line.width)?0:t.marker.line.width}},{"../../lib":424,"fast-isnumeric":99,tinycolor2:651}],540:[function(t,e,n){"use strict";var A=t("../../components/fx"),i=t("../../registry"),a=t("../../components/color"),S=t("../../lib").fillText,o=t("./helpers").getLineWidth,E=t("../../plots/cartesian/axes").hoverLabelText,O=t("../../constants/numerical").BADNUM;function s(t,e,n,r){var i,a,o,s,l,u,c,f=t.cd,h=f[0].trace,d=f[0].t,p="closest"===r,g="waterfall"===h.type,y=t.maxHoverDistance;function m(t){return t[o]-t.w/2}function v(t){return t[o]+t.w/2}var b=p?m:function(t){return Math.min(m(t),t.p-d.bardelta/2)},x=p?v:function(t){return Math.max(v(t),t.p+d.bardelta/2)};function _(t,e){return A.inbox(t-i,e-i,y+Math.min(1,Math.abs(e-t)/c)-1)}function w(t){return _(b(t),x(t))}function k(t){var e=a,n=t.b,r=t[s];return g&&(t=Math.abs(t.rawS)||0,0<e?r+=t:e<0&&(r-=t)),A.inbox(n-e,r-e,y+(r-e)/(r-n)-1)}"h"===h.orientation?(i=n,a=e,o="y",s="x",l=k,u=w):(i=e,a=n,o="x",s="y",u=k,l=w);e=t[o+"a"],n=t[s+"a"];c=Math.abs(e.r2c(e.range[1])-e.r2c(e.range[0]));r=A.getDistanceFunction(r,l,u,function(t){return(l(t)+u(t))/2});if(A.getClosest(f,r,t),!1!==t.index&&f[t.index].p!==O){p||(b=function(t){return Math.min(m(t),t.p-d.bargroupwidth/2)},x=function(t){return Math.max(v(t),t.p+d.bargroupwidth/2)});var M=f[t.index],f=h.base?M.b+M.s:M.s;t[s+"0"]=t[s+"1"]=n.c2p(M[s],!0),t[s+"LabelVal"]=f;f=d.extents[d.extents.round(M.p)];t[o+"0"]=e.c2p(p?b(M):f[0],!0),t[o+"1"]=e.c2p(p?x(M):f[1],!0);var T,f=void 0!==M.orig_p;return t[o+"LabelVal"]=f?M.orig_p:M.p,t.labelLabel=E(e,t[o+"LabelVal"]),t.valueLabel=E(n,t[s+"LabelVal"]),t.baseLabel=E(n,M.b),t.spikeDistance=(k(M)+_(m(T=M),v(T)))/2-y,t[o+"Spike"]=e.c2p(M.p,!0),S(M,h,t),t.hovertemplate=h.hovertemplate,t}}function l(t,e){var n=e.mcc||t.marker.color,r=e.mlcc||t.marker.line.color,e=o(t,e);return a.opacity(n)?n:a.opacity(r)&&e?r:void 0}e.exports={hoverPoints:function(t,e,n,r){if(e=s(t,e,n,r)){n=e.cd,r=n[0].trace,n=n[e.index];return e.color=l(r,n),i.getComponentMethod("errorbars","hoverInfo")(n,r,e),[e]}},hoverOnBars:s,getTraceColor:l}},{"../../components/color":294,"../../components/fx":334,"../../constants/numerical":402,"../../lib":424,"../../plots/cartesian/axes":471,"../../registry":525,"./helpers":539}],541:[function(t,e,n){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],542:[function(t,e,n){"use strict";var h=t("../../registry"),d=t("../../plots/cartesian/axes"),p=t("../../lib"),g=t("./layout_attributes");e.exports=function(n,r,t){function e(t,e){return p.coerce(n,r,g,t,e)}for(var i=!1,a=!1,o=!1,s={},l=e("barmode"),u=0;u<t.length;u++){var c,f=t[u];h.traceIs(f,"bar")&&f.visible&&(i=!0,"group"===l&&(s[c=f.xaxis+f.yaxis]&&(o=!0),s[c]=!0),f.visible&&"histogram"===f.type&&"category"!==d.getFromId({_fullLayout:r},f["v"===f.orientation?"xaxis":"yaxis"]).type&&(a=!0))}i?("overlay"!==l&&e("barnorm"),e("bargap",a&&!o?0:.2),e("bargroupgap")):delete r.barmode}},{"../../lib":424,"../../plots/cartesian/axes":471,"../../registry":525,"./layout_attributes":541}],543:[function(t,e,n){"use strict";var A=t("d3"),S=t("fast-isnumeric"),E=t("../../lib"),O=t("../../lib/svg_text_utils"),C=t("../../components/color"),P=t("../../components/drawing"),r=t("../../registry"),L=t("../../plots/cartesian/axes").tickText,i=t("./uniform_text"),R=i.recordMinTextSize,a=i.clearMinTextSize,j=t("./style"),N=t("./helpers"),o=t("./constants"),i=t("./attributes"),D=i.text,z=i.textposition,I=t("../../components/fx/helpers").appendArrayPointValue,F=o.TEXTPAD;function s(t){return t.id}function B(t,e,n,r){return e.uniformtext.mode||!l(n)?t:(r&&(i=r()),t.transition().duration(n.duration).ease(n.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}));var i}function l(t){return t&&0<t.duration}function U(t){return"auto"===t?0:t}function V(t,e){var n=Math.PI/180*e,e=Math.abs(Math.sin(n)),n=Math.abs(Math.cos(n));return{x:t.width*n+t.height*e,y:t.width*e+t.height*n}}function H(t,e,n,r,i,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,u=a.anchor||"end",c="end"===u,f="start"===u,h=((a.leftToRight||0)+1)/2,d=1-h,p=i.width,g=i.height,y=Math.abs(e-t),m=Math.abs(r-n),u=2*F<y&&2*F<m?F:0;y-=2*u,m-=2*u;a=U(l);"auto"!==l||p<=y&&g<=m||!(y<p||m<g)||(m<p||y<g)&&p<g==y<m||(a+=90);p=V(i,a),g=1;s&&(g=Math.min(1,y/p.x,m/p.y));s=i.left*d+i.right*h,y=(i.top+i.bottom)/2,m=(t+F)*d+(e-F)*h,i=(n+r)/2,d=0,h=0;return(f||c)&&(c=(o?p.x:p.y)/2,p=o?t<e?1:-1:n<r?1:-1,o?d=f?(m=t+p*u,-p*c):(m=e-p*u,p*c):h=f?(i=n+p*u,-p*c):(i=r-p*u,p*c)),{textX:s,textY:y,targetX:m,targetY:i,anchorX:d,anchorY:h,scale:g,rotate:a}}e.exports={plot:function(b,x,t,e,_,w){var k=x.xaxis,M=x.yaxis,T=b._fullLayout;_||(_={mode:T.barmode,norm:T.barmode,gap:T.bargap,groupgap:T.bargroupgap},a("bar",T)),t=E.makeTraceGroups(e,t,"trace bars").each(function(d){var t=A.select(this),p=d[0].trace,e="waterfall"===p.type,n="funnel"===p.type,g="bar"===p.type||n,y=0;e&&p.connector.visible&&"between"===p.connector.mode&&(y=p.connector.line.width/2);var m="h"===p.orientation,v=l(_),n=E.ensureSingle(t,"g","points"),e=function(t){if(t.ids)return s}(p),e=n.selectAll("g.point").data(E.identity,e);e.enter().append("g").classed("point",!0),e.exit().remove(),e.each(function(t,e){var n,r,i,a=A.select(this),o=(s=t,o=k,c=M,u=[],n=(l=m)?o:c,o=l?c:o,(c=[])[0]=n.c2p(s.s0,!0),u[0]=o.c2p(s.p0,!0),c[1]=n.c2p(s.s1,!0),u[1]=o.c2p(s.p1,!0),l?[c,u]:[u,c]),s=o[0][0],l=o[0][1],u=o[1][0],c=o[1][1],o=0==(m?l-s:c-u);function f(t){var e=A.round(r/2%1,2);return 0===_.gap&&0===_.groupgap?A.round(Math.round(t)-e,2):t}o&&g&&N.getLineWidth(p,t)&&(o=!1),o=o||!(S(s)&&S(l)&&S(u)&&S(c)),(t.isBlank=o)&&(m?l=s:c=u),y&&!o&&(m?l+=((s-=(s<l?1:-1)*y)<l?1:-1)*y:c+=((u-=(u<c?1:-1)*y)<c?1:-1)*y),"waterfall"===p.type?o||(i=p[t.dir].marker,r=i.line.width,i=i.color):(r=N.getLineWidth(p,t),i=t.mc||p.marker.color),b._context.staticPlot||(s=(h=C.opacity(i)<1||.01<r?f:function(t,e,n){return n&&t===e?t:2<=Math.abs(t-e)?f(t):e<t?Math.ceil(t):Math.floor(t)})(s,l,m),l=h(l,s,m),u=h(u,c,!m),c=h(c,u,!m));var o,h=B(E.ensureSingle(a,"path"),T,_,w);h.style("vector-effect","non-scaling-stroke").attr("d",isNaN((l-s)*(c-u))||o&&b._context.staticPlot?"M0,0Z":"M"+s+","+u+"V"+c+"H"+l+"V"+u+"Z").call(P.setClipUrl,x.layerClipId,b),!T.uniformtext.mode&&v&&(o=P.makePointStyleFns(p),P.singlePointStyle(t,h,p,o,b)),function(r,t,e,n,i,a,o,s,l,u,c){var f,h=t.xaxis,d=t.yaxis,p=r._fullLayout;function g(t,e,n){return E.ensureSingle(t,"text").text(e).attr({class:"bartext bartext-"+f,"text-anchor":"middle","data-notex":1}).call(P.font,n).call(O.convertToTspans,r)}var y=n[0].trace,m="h"===y.orientation,v=function(t,e,n,r,i){var a=e[0].trace;n=a.texttemplate?function(t,e,n,r,i){var a=e[0].trace,o=E.castOption(a,n,"texttemplate");if(!o)return"";var s,l,u="waterfall"===a.type,c="funnel"===a.type;l="h"===a.orientation?(h="y",s=i,d="x",r):(h="x",s=r,d="y",i);function f(t){return L(l,+t,!0).text}e=e[n],n={};n.label=e.p,n.labelLabel=n[h+"Label"]=function(t){return L(s,t,!0).text}(e.p);var h=E.castOption(a,e.i,"text");0!==h&&!h||(n.text=h);n.value=e.s,n.valueLabel=n[d+"Label"]=f(e.s);var d={};I(d,a,e.i),u&&(n.delta=+e.rawS||e.s,n.deltaLabel=f(n.delta),n.final=e.v,n.finalLabel=f(n.final),n.initial=n.final-n.delta,n.initialLabel=f(n.initial));c&&(n.value=e.s,n.valueLabel=f(n.value),n.percentInitial=e.begR,n.percentInitialLabel=E.formatPercent(e.begR),n.percentPrevious=e.difR,n.percentPreviousLabel=E.formatPercent(e.difR),n.percentTotal=e.sumR,n.percenTotalLabel=E.formatPercent(e.sumR));e=E.castOption(a,e.i,"customdata");e&&(n.customdata=e);return E.texttemplateString(o,n,t._d3locale,d,n,a._meta||{})}(t,e,n,r,i):a.textinfo?function(t,e,n,r){var i=t[0].trace,a="h"===i.orientation,o="waterfall"===i.type,s="funnel"===i.type;function l(t){return L(a?n:r,+t,!0).text}var u,c=i.textinfo,f=t[e],h=c.split("+"),d=[],c=function(t){return-1!==h.indexOf(t)};c("label")&&d.push(function(t){return L(a?r:n,t,!0).text}(t[e].p));c("text")&&(0!==(u=E.castOption(i,f.i,"text"))&&!u||d.push(u));o&&(e=+f.rawS||f.s,i=f.v,o=i-e,c("initial")&&d.push(l(o)),c("delta")&&d.push(l(e)),c("final")&&d.push(l(i)));s&&(c("value")&&d.push(l(f.s)),s=0,c("percent initial")&&s++,c("percent previous")&&s++,c("percent total")&&s++,s=1<s,c("percent initial")&&(u=E.formatPercent(f.begR),s&&(u+=" of initial"),d.push(u)),c("percent previous")&&(u=E.formatPercent(f.difR),s&&(u+=" of previous"),d.push(u)),c("percent total")&&(u=E.formatPercent(f.sumR),s&&(u+=" of total"),d.push(u)));return d.join("<br>")}(e,n,r,i):N.getValue(a.text,n);return N.coerceString(D,n)}(p,n,i,h,d);f=function(t,e){e=N.getValue(t.textposition,e);return N.coerceEnumerated(z,e)}(y,i);var b="stack"===u.mode||"relative"===u.mode,x=n[i],t=!b||x._outmost;if(!v||"none"===f||(x.isBlank||a===o||s===l)&&("auto"===f||"inside"===f))return e.select("text").remove();b=p.font,n=j.getBarColor(n[i],y),n=j.getInsideTextFont(y,i,b,n),i=j.getOutsideTextFont(y,i,b),b=e.datum(),m?"log"===h.type&&b.s0<=0&&(a=h.range[0]<h.range[1]?0:h._length):"log"===d.type&&b.s0<=0&&(s=d.range[0]<d.range[1]?d._length:0);var _,w,k,M,h=Math.abs(o-a)-2*F,b=Math.abs(l-s)-2*F;if("outside"===f&&(t||x.hasB||(f="inside")),"auto"===f&&(t?(f="inside",M=E.ensureUniformFontSize(r,n),_=g(e,v,M),w=P.bBox(_.node()),k=w.width,A=w.height,d=k<=h&&A<=b,t=k<=b&&A<=h,b=m?k*(b/A)<=h:A*(h/k)<=b,0<k&&0<A&&(d||t||b)?f="inside":(f="outside",_.remove(),_=null)):f="inside"),!_){M=E.ensureUniformFontSize(r,"outside"===f?i:n);v=(_=g(e,v,M)).attr("transform");if(_.attr("transform",""),w=P.bBox(_.node()),k=w.width,A=w.height,_.attr("transform",v),k<=0||A<=0)return _.remove()}var T,A=y.textangle;(A="outside"===f?(T="both"===y.constraintext||"outside"===y.constraintext,function(t,e,n,r,i,a){var o,s=!!a.isHorizontal,l=!!a.constrained,u=a.angle||0,c=i.width,f=i.height,h=Math.abs(e-t),d=Math.abs(r-n);o=s?2*F<d?F:0:2*F<h?F:0;var p=1;l&&(p=s?Math.min(1,d/f):Math.min(1,h/c));a=U(u),l=V(i,a),d=(s?l.x:l.y)/2,f=(i.left+i.right)/2,h=(i.top+i.bottom)/2,c=(t+e)/2,u=(n+r)/2,l=0,i=0,n=s?e<t?1:-1:n<r?1:-1;s?(c=e-n*o,l=n*d):(u=r+n*o,i=-n*d);return{textX:f,textY:h,targetX:c,targetY:u,anchorX:l,anchorY:i,scale:p,rotate:a}}(a,o,s,l,w,{isHorizontal:m,constrained:T,angle:A})):(T="both"===y.constraintext||"inside"===y.constraintext,H(a,o,s,l,w,{isHorizontal:m,constrained:T,angle:A,anchor:y.insidetextanchor}))).fontSize=M.size,R(y.type,A,p),x.transform=A,B(_,p,u,c).attr("transform",E.getTextTransform(A))}(b,x,a,d,e,s,l,u,c,_,w),x.layerClipId&&P.hideOutsideRangePoint(t,a.select("text"),k,M,p.xcalendar,p.ycalendar)});e=!1===p.cliponaxis;P.setClipUrl(t,e?null:x.layerClipId,b)}),r.getComponentMethod("errorbars","plot")(b,t,x,_)},toMoveInsideBar:H}},{"../../components/color":294,"../../components/drawing":316,"../../components/fx/helpers":330,"../../lib":424,"../../lib/svg_text_utils":447,"../../plots/cartesian/axes":471,"../../registry":525,"./attributes":535,"./constants":536,"./helpers":539,"./style":546,"./uniform_text":548,d3:277,"fast-isnumeric":99}],544:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,a,o,s,l,u=t.cd,c=t.xaxis,f=t.yaxis,h=u[0].trace,d="funnel"===h.type,p="h"===h.orientation,g=[];if(!1===e)for(n=0;n<u.length;n++)u[n].selected=0;else for(n=0;n<u.length;n++){var y=u[n],m="ct"in y?y.ct:(m=y,i=f,a=p,o=d,l=s=void 0,s=(r=c).c2p(a?m.s0:m.p0,!0),l=r.c2p(a?m.s1:m.p1,!0),r=i.c2p(a?m.p0:m.s0,!0),m=i.c2p(a?m.p1:m.s1,!0),o?[(s+l)/2,(r+m)/2]:a?[l,(r+m)/2]:[(s+l)/2,m]);e.contains(m,!1,n,t)?(g.push({pointNumber:n,x:c.c2d(y.x),y:f.c2d(y.y)}),y.selected=1):y.selected=0}return g}},{}],545:[function(t,e,n){"use strict";e.exports=r;var l=t("../../lib").distinctVals,u=t("../../constants/numerical").BADNUM;function r(t,e){this.traces=t,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var n=1/0,r=[],i=0;i<t.length;i++){for(var a=t[i],o=0;o<a.length;o++){var s=a[o];s.p!==u&&r.push(s.p)}a[0]&&a[0].width1&&(n=Math.min(a[0].width1,n))}this.positions=r;e=l(r,{unitMinDiff:e.unitMinDiff});this.distinctPositions=e.vals,1===e.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(e.minDiff,n),this.binWidth=this.minDiff,this.bins={}}r.prototype.put=function(t,e){var n=this.getLabel(t,e),t=this.bins[n]||0;return this.bins[n]=t+e,t},r.prototype.get=function(t,e){e=this.getLabel(t,e);return this.bins[e]||0},r.prototype.getLabel=function(t,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?t:Math.round(t/this.binWidth))}},{"../../constants/numerical":402,"../../lib":424}],546:[function(t,e,n){"use strict";var o=t("d3"),i=t("../../components/color"),s=t("../../components/drawing"),l=t("../../lib"),u=t("../../registry"),a=t("./uniform_text").resizeText,r=t("./attributes"),c=r.textfont,f=r.insidetextfont,h=r.outsidetextfont,d=t("./helpers");function p(t,e,n){s.pointStyle(t.selectAll("path"),e,n),g(t,e,n)}function g(t,n,r){t.selectAll("text").each(function(t){var e=o.select(this),t=l.ensureUniformFontSize(r,y(e,t,n,r));s.font(e,t)})}function y(t,e,n,r){var i=r._fullLayout.font,a=n.textfont;return t.classed("bartext-inside")?(r=_(e,n),a=v(n,e.i,i,r)):t.classed("bartext-outside")&&(a=b(n,e.i,i)),a}function m(t,e,n){return x(c,t.textfont,e,n)}function v(t,e,n,r){n=m(t,e,n);return(void 0===t._input.textfont||void 0===t._input.textfont.color||Array.isArray(t.textfont.color)&&void 0===t.textfont.color[e])&&(n={color:i.contrast(r),family:n.family,size:n.size}),x(f,t.insidetextfont,e,n)}function b(t,e,n){n=m(t,e,n);return x(h,t.outsidetextfont,e,n)}function x(t,e,n,r){e=e||{};var i=d.getValue(e.family,n),a=d.getValue(e.size,n),n=d.getValue(e.color,n);return{family:d.coerceString(t.family,i,r.family),size:d.coerceNumber(t.size,a,r.size),color:d.coerceColor(t.color,n,r.color)}}function _(t,e){return"waterfall"===e.type?e[t.dir].marker.color:t.mc||e.marker.color}e.exports={style:function(e){var t=o.select(e).selectAll("g.barlayer").selectAll("g.trace");a(e,t,"bar");var n=t.size(),r=e._fullLayout;t.style("opacity",function(t){return t[0].trace.opacity}).each(function(t){("stack"===r.barmode&&1<n||0===r.bargap&&0===r.bargroupgap&&!t[0].trace.marker.line.width)&&o.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(t){p(o.select(this),t[0].trace,e)}),u.getComponentMethod("errorbars","style")(t)},styleTextPoints:g,styleOnSelect:function(t,e,n){var r,i,a=e[0].trace;a.selectedpoints?(r=n,i=a,e=t,s.selectedPointStyle(r.selectAll("path"),i),function(t,r,i){t.each(function(t){var e,n=o.select(this);t.selected?(e=l.ensureUniformFontSize(i,y(n,t,r,i)),(t=r.selected.textfont&&r.selected.textfont.color)&&(e.color=t),s.font(n,e)):s.selectedTextStyle(n,r)})}(r.selectAll("text"),i,e)):(p(n,a,t),u.getComponentMethod("errorbars","style")(n))},getInsideTextFont:v,getOutsideTextFont:b,getBarColor:_,resizeText:a}},{"../../components/color":294,"../../components/drawing":316,"../../lib":424,"../../registry":525,"./attributes":535,"./helpers":539,"./uniform_text":548,d3:277}],547:[function(t,e,n){"use strict";var a=t("../../components/color"),o=t("../../components/colorscale/helpers").hasColorscale,s=t("../../components/colorscale/defaults");e.exports=function(t,e,n,r,i){n("marker.color",r),o(t,"marker")&&s(t,e,i,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",a.defaultLine),o(t,"marker.line")&&s(t,e,i,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":294,"../../components/colorscale/defaults":304,"../../components/colorscale/helpers":305}],548:[function(t,e,n){"use strict";var o=t("d3"),s=t("../../lib");function a(t){return"_"+t+"Text_minsize"}e.exports={recordMinTextSize:function(t,e,n){var r,i;n.uniformtext.mode&&(r=a(t),i=n.uniformtext.minsize,t=e.scale*e.fontSize,e.hide=t<i,n[r]=n[r]||1/0,e.hide||(n[r]=Math.min(n[r],Math.max(t,i))))},clearMinTextSize:function(t,e){e[a(t)]=void 0},resizeText:function(t,e,n){var r=(t=t._fullLayout)["_"+n+"Text_minsize"];if(r){var i,a="hide"===t.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}e.selectAll(i).each(function(t){t=t.transform;t&&(t.scale=a&&t.hide?0:r/t.fontSize,o.select(this).select("text").attr("transform",s.getTextTransform(t)))})}}}},{"../../lib":424,d3:277}],549:[function(t,e,n){"use strict";var r=t("../bar/attributes"),i=t("../../plots/template_attributes").hovertemplateAttrs,a=t("./bin_attributes"),o=t("./constants"),t=t("../../lib/extend").extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:t({},r.text,{}),hovertext:t({},r.hovertext,{}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:o.eventDataKeys}),marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib/extend":417,"../../plots/template_attributes":524,"../bar/attributes":535,"./bin_attributes":551,"./constants":555}],550:[function(t,e,n){"use strict";e.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)e[i]?(t[i]/=e[i],r+=t[i]):t[i]=null;return r}},{}],551:[function(t,e,n){"use strict";e.exports=function(){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],552:[function(t,e,n){"use strict";var a=t("fast-isnumeric");e.exports={count:function(t,e,n){return n[t]++,1},sum:function(t,e,n,r){e=r[e];return a(e)?(e=Number(e),n[t]+=e,e):0},avg:function(t,e,n,r,i){e=r[e];return a(e)&&(e=Number(e),n[t]+=e,i[t]++),0},min:function(t,e,n,r){r=r[e];if(a(r)){if(r=Number(r),!a(n[t]))return n[t]=r;if(n[t]>r){e=r-n[t];return n[t]=r,e}}return 0},max:function(t,e,n,r){r=r[e];if(a(r)){if(r=Number(r),!a(n[t]))return n[t]=r;if(n[t]<r){e=r-n[t];return n[t]=r,e}}return 0}}},{"fast-isnumeric":99}],553:[function(t,e,n){"use strict";var r=t("../../constants/numerical"),h=r.ONEAVGYEAR,i=r.ONEAVGMONTH,d=r.ONEDAY,a=r.ONEHOUR,o=r.ONEMIN,s=r.ONESEC,p=t("../../plots/cartesian/axes").tickIncrement;function g(t,e,n,r){if(t*e<=0)return 1/0;for(var i=Math.abs(e-t),a="date"===n.type,o=u(i,a),s=0;s<10;s++){var l=u(80*o,a);if(o===l)break;if(!function(t,e,n,r,i,a){if(r&&d<t){r=c(e,i,a),i=c(n,i,a),a=t===h?0:1;return r[a]!==i[a]}return.1<Math.floor(n/t)-Math.floor(e/t)}(l,t,e,a,n,r))break;o=l}return o}function u(t,e){return e&&s<t?d<t?1.1*h<t?h:1.1*i<t?i:d:a<t?a:o<t?o:s:Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function c(t,e,n){n=e.c2d(t,h,n).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}e.exports=function(i,t,e,a,o){var r,n=-1.1*t,s=-.1*t,l=i-s,t=e[0],e=e[1],l=Math.min(g(t+s,t+l,a,o),g(e+s,e+l,a,o)),s=Math.min(g(t+n,t+s,a,o),g(e+n,e+s,a,o)),u=s<l&&s<Math.abs(e-t)/4e3?(r=l,!1):(r=Math.min(l,s),!0);if("date"===a.type&&d<r){var c=r===h?1:6,f=r===h?"M12":"M1";return function(t,e){var n=a.c2d(t,h,o),r=n.indexOf("-",c);0<r&&(n=n.substr(0,r));r=a.d2c(n,0,o);return r<t&&((r+(n=p(r,f,!1,o)))/2<t+i&&(r=n)),e&&u?p(r,f,!0,o):r}}return function(t,e){var n=r*Math.round(t/r);return n+r/10<t&&n+.9*r<t+i&&(n+=r),e&&u&&(n-=r),n}}},{"../../constants/numerical":402,"../../plots/cartesian/axes":471}],554:[function(t,e,n){"use strict";var H=t("fast-isnumeric"),q=t("../../lib"),A=t("../../registry"),G=t("../../plots/cartesian/axes"),Y=t("../bar/arrays_to_calcdata"),X=t("./bin_functions"),W=t("./norm_functions"),Z=t("./average"),K=t("./bin_label_vals");function Q(t,e,n,r,i){var a,o,s=r+"bins",l=t._fullLayout,u=e["_"+r+"bingroup"],c=l._histogramBinOpts[u],f="overlay"===l.barmode,u=function(t){return n.r2c(t,0,o)},l=function(t){return n.c2r(t,0,o)},h="date"===n.type?function(t){return t||0===t?q.cleanDate(t,null,o):null}:function(t){return H(t)?Number(t):null};function d(t,e,n){e[t+"Found"]?(e[t]=h(e[t]),null===e[t]&&(e[t]=n[t])):(k[t]=e[t]=n[t],q.nestedProperty(a[0],s+"."+t).set(n[t]))}if(e["_"+r+"autoBinFinished"])delete e["_"+r+"autoBinFinished"];else{a=c.traces;for(var p,g,y,m=[],v=!0,b=!1,x=!1,_=0;_<a.length;_++)(y=a[_]).visible&&(g=y["_"+(p=c.dirs[_])+"pos0"]=n.makeCalcdata(y,p),m=q.concat(m,g),delete y["_"+r+"autoBinFinished"],!0===e.visible&&(v?v=!1:(delete y._autoBin,y["_"+r+"autoBinFinished"]=1),A.traceIs(y,"2dMap")&&(b=!0),"histogram2dcontour"===y.type&&(x=!0)));o=a[0][r+"calendar"];var w=G.autoBin(m,n,c.nbins,b,o,c.sizeFound&&c.size),k=(a[0]._autoBin={})[c.dirs[0]]={};if(x&&(c.size||(w.start=l(G.tickIncrement(u(w.start),w.size,!0,o))),void 0===c.end&&(w.end=l(G.tickIncrement(u(w.end),w.size,!1,o)))),f&&!A.traceIs(e,"2dMap")&&0===w._dataSpan&&"category"!==n.type&&"multicategory"!==n.type){if(i)return[w,g,!0];w=function(t,e,n,r,i){var a,o,s,l=t._fullLayout,u=function(t,e){for(var n=e.xaxis,r=e.yaxis,i=e.orientation,a=[],o=t._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===n&&l.yaxis===r&&a.push(l)}return a}(t,e),c=!1,f=1/0,h=[e];for(a=0;a<u.length;a++){var d,p,g;(o=u[a])===e?c=!0:c?(d=Q(t,o,n,r,!0),p=d[0],g=d[2],o["_"+r+"autoBinFinished"]=1,o["_"+r+"pos0"]=d[1],g?h.push(o):f=Math.min(f,p.size)):(s=l._histogramBinOpts[o["_"+r+"bingroup"]],f=Math.min(f,s.size||o[i].size))}var y=new Array(h.length);for(a=0;a<h.length;a++)for(var m=h[a]["_"+r+"pos0"],v=0;v<m.length;v++)if(void 0!==m[v]){y[a]=m[v];break}isFinite(f)||(f=q.distinctVals(y).minDiff);for(a=0;a<h.length;a++){var b=(o=h[a])[r+"calendar"],b={start:n.c2r(y[a]-f/2,0,b),end:n.c2r(y[a]+f/2,0,b),size:f};o._input[i]=o[i]=b,(s=l._histogramBinOpts[o["_"+r+"bingroup"]])&&q.extendFlat(s,b)}return e[i]}(t,e,n,r,s)}(M=y.cumulative||{}).enabled&&"include"!==M.currentbin&&("decreasing"===M.direction?w.start=l(G.tickIncrement(u(w.start),w.size,!0,o)):w.end=l(G.tickIncrement(u(w.end),w.size,!1,o))),c.size=w.size,c.sizeFound||(k.size=w.size,q.nestedProperty(a[0],s+".size").set(w.size)),d("start",c,w),d("end",c,w)}g=e["_"+r+"pos0"],delete e["_"+r+"pos0"];var t=e._input[s]||{},M=q.extendFlat({},c),l=c.start,u=n.r2l(t.start),w=void 0!==u;(c.startFound||w)&&u!==n.r2l(l)&&(u=w?u:q.aggNums(Math.min,null,g),T={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:c.size,tick0:l,calendar:o,range:[u,G.tickIncrement(u,c.size,!1,o)].map(n.l2r)},(T=G.tickFirst(T))>n.r2l(u)&&(T=G.tickIncrement(T,c.size,!0,o)),M.start=n.l2r(T),w||q.nestedProperty(e,s+".start").set(M.start));var T=c.end,w=n.r2l(t.end),t=void 0!==w;(c.endFound||t)&&w!==n.r2l(T)&&(w=t?w:q.aggNums(Math.max,null,g),M.end=n.l2r(w),t||q.nestedProperty(e,s+".start").set(M.end));t="autobin"+r;return!1===e._input[t]&&(e._input[s]=q.extendFlat({},e[s]||{}),delete e._input[t],delete e[t]),[M,g]}e.exports={calc:function(r,t){var e,n,i=[],a=[],o=G.getFromId(r,"h"===t.orientation?t.yaxis:t.xaxis),s={x:"y",y:"x"}[E="h"===t.orientation?"y":"x"],l=t[E+"calendar"],u=t.cumulative,c=(T=Q(r,t,o,E))[0],f=T[1],h="string"==typeof c.size,d=[],p=h?d:c,g=[],y=[],m=[],v=0,b=t.histnorm,x=t.histfunc,_=-1!==b.indexOf("density");u.enabled&&_&&(b=b.replace(/ ?density$/,""),_=!1);var w,k="max"===x||"min"===x?null:0,M=X.count,T=W[b],A=!1,b=function(t){return o.r2c(t,0,l)};for(q.isArrayOrTypedArray(t[s])&&"count"!==x&&(w=t[s],A="avg"===x,M=X[x]),N=b(c.start),n=b(c.end)+(N-G.tickIncrement(N,c.size,!1,l))/1e6;N<n&&i.length<1e6&&(e=G.tickIncrement(N,c.size,!1,l),i.push((N+e)/2),a.push(k),m.push([]),d.push(N),_&&g.push(1/(e-N)),A&&y.push(0),!(e<=N));)N=e;d.push(N),h||"date"!==o.type||(p={start:b(p.start),end:b(p.end),size:p.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var S=t["_"+E+"bingroup"],E={leftGap:1/0,rightGap:1/0};S&&(r._fullLayout._roundFnOpts[S]||(r._fullLayout._roundFnOpts[S]=E),E=r._fullLayout._roundFnOpts[S]);for(var O,C=a.length,P=!0,L=E.leftGap,R=E.rightGap,j={},N=0;N<f.length;N++){var D,z=f[N];0<=(D=q.findBin(z,p))&&D<C&&(v+=M(D,N,a,w,y),P&&m[D].length&&z!==f[m[D][0]]&&(P=!1),m[D].push(N),j[N]=D,L=Math.min(L,z-d[D]),R=Math.min(R,d[D+1]-z))}E.leftGap=L,E.rightGap=R,P||(O=function(e,n){return function(){var t=r._fullLayout._roundFnOpts[S];return K(t.leftGap,t.rightGap,d,o,l)(e,n)}}),A&&(v=Z(a,y)),T&&T(a,v,g),u.enabled&&function(e,t,n){var r,i,a;function o(t){a=e[t],e[t]/=2}function s(t){i=e[t],e[t]=a+i/2,a+=i}if("half"===n)if("increasing"===t)for(o(0),r=1;r<e.length;r++)s(r);else for(o(e.length-1),r=e.length-2;0<=r;r--)s(r);else if("increasing"===t){for(r=1;r<e.length;r++)e[r]+=e[r-1];"exclude"===n&&(e.unshift(0),e.pop())}else{for(r=e.length-2;0<=r;r--)e[r]+=e[r+1];"exclude"===n&&(e.push(0),e.shift())}}(a,u.direction,u.currentbin);var I,F=Math.min(i.length,a.length),B=[],U=0,V=F-1;for(N=0;N<F;N++)if(a[N]){U=N;break}for(N=F-1;U<=N;N--)if(a[N]){V=N;break}for(N=U;N<=V;N++)H(i[N])&&H(a[N])&&(I={p:i[N],s:a[N],b:0},u.enabled||(I.pts=m[N],P?I.ph0=I.ph1=m[N].length?f[m[N][0]]:i[N]:(t._computePh=!0,I.ph0=O(d[N]),I.ph1=O(d[N+1],!0))),B.push(I));return 1===B.length&&(B[0].width1=G.tickIncrement(B[0].p,c.size,!1,l)-B[0].p),Y(B,t),q.isArrayOrTypedArray(t.selectedpoints)&&q.tagSelected(B,t,j),B},calcAllAutoBins:Q}},{"../../lib":424,"../../plots/cartesian/axes":471,"../../registry":525,"../bar/arrays_to_calcdata":534,"./average":550,"./bin_functions":552,"./bin_label_vals":553,"./norm_functions":561,"fast-isnumeric":99}],555:[function(t,e,n){"use strict";e.exports={eventDataKeys:["binNumber"]}},{}],556:[function(t,e,n){"use strict";var S=t("../../lib"),E=t("../../plots/cartesian/axis_ids"),O=t("../../registry").traceIs,C=t("../bar/defaults").handleGroupingDefaults,P=S.nestedProperty,L=t("../../plots/cartesian/constraints").getAxisGroup,R=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],j=["x","y"];e.exports=function(t,l){var e,u=l._histogramBinOpts={},n=[],r={},i=[];function a(t,e){return S.coerce(p._input,p,p._module.attributes,t,e)}function o(t){return"v"===t.orientation?"x":"y"}function s(t,e,n){var r=t.uid+"__"+n;e=e||r;var i=(o=t,s=n,E.getFromTrace({_fullLayout:l},o,s).type),a=t[n+"calendar"]||"",o=u[e],s=!0;o&&(i===o.axType&&a===o.calendar?(s=!1,o.traces.push(t),o.dirs.push(n)):(e=r,i!==o.axType&&S.warn(["Attempted to group the bins of trace",t.index,"set on a","type:"+i,"axis","with bins on","type:"+o.axType,"axis."].join(" ")),a!==o.calendar&&S.warn(["Attempted to group the bins of trace",t.index,"set with a",a,"calendar","with bins",o.calendar?"on a "+o.calendar+" calendar":"w/o a set calendar"].join(" ")))),s&&(u[e]={traces:[t],dirs:[n],axType:i,calendar:t[n+"calendar"]||""}),t["_"+n+"bingroup"]=e}for(f=0;f<t.length;f++)p=t[f],O(p,"histogram")&&(n.push(p),delete p._xautoBinFinished,delete p._yautoBinFinished,O(p,"2dMap")||C(p._input,p,l,a));for(var c=l._alignmentOpts||{},f=0;f<n.length;f++){var h,d,p=n[f],g="";O(p,"2dMap")||(d=o(p),"group"===l.barmode&&p.alignmentgroup&&(h=p[d+"axis"],(c[h=L(l,h)+p.orientation]||{})[p.alignmentgroup]&&(g=h)),g||"overlay"===l.barmode||(g=L(l,p.xaxis)+L(l,p.yaxis)+o(p))),g?(r[g]||(r[g]=[]),r[g].push(p)):i.push(p)}for(g in r)if(1!==(_=r[g]).length){var y=!1;for(_.length&&(p=_[0],y=a("bingroup")),g=y||g,f=0;f<_.length;f++){var m=(p=_[f])._input.bingroup;m&&m!==g&&S.warn(["Trace",p.index,"must match","within bingroup",g+".","Ignoring its bingroup:",m,"setting."].join(" ")),p.bingroup=g,s(p,g,o(p))}}else i.push(_[0]);for(f=0;f<i.length;f++){p=i[f];var v=a("bingroup");if(O(p,"2dMap"))for(e=0;e<2;e++){var b=a((d=j[e])+"bingroup",v?v+"__"+d:null);s(p,b,d)}else s(p,v,o(p))}for(g in u)for(var x=u[g],_=x.traces,w=0;w<R.length;w++){var k,M,T=R[w],A=T.name;if("nbins"!==A||!x.sizeFound){for(f=0;f<_.length;f++){if(p=_[f],d=x.dirs[f],k=T.aStr[d],void 0!==P(p._input,k).get()){x[A]=a(k),x[A+"Found"]=!0;break}(M=(p._autoBin||{})[d]||{})[A]&&P(p,k).set(M[A])}if("start"===A||"end"===A)for(;f<_.length;f++)(p=_[f])["_"+d+"bingroup"]&&a(k,(M=(p._autoBin||{})[d]||{})[A]);"nbins"!==A||x.sizeFound||x.nbinsFound||(p=_[0],x[A]=a(k))}}}},{"../../lib":424,"../../plots/cartesian/axis_ids":474,"../../plots/cartesian/constraints":478,"../../registry":525,"../bar/defaults":538}],557:[function(t,e,n){"use strict";var u=t("../../registry"),c=t("../../lib"),f=t("../../components/color"),h=t("../bar/style_defaults"),d=t("./attributes");e.exports=function(n,r,t,e){function i(t,e){return c.coerce(n,r,d,t,e)}var a=i("x"),o=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text"),i("hovertext"),i("hovertemplate");var s=i("orientation",o&&!a?"h":"v"),l="v"===s?"x":"y",s="v"===s?"y":"x",o=a&&o?Math.min(c.minRowLength(a)&&c.minRowLength(o)):c.minRowLength(r[l]||[]);o?(r._length=o,u.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],e),r[s]&&i("histfunc"),i("histnorm"),i("autobin"+l),h(n,r,i,t,e),c.coerceSelectionMarkerOpacity(r,i),t=(r.marker.line||{}).color,(e=u.getComponentMethod("errorbars","supplyDefaults"))(n,r,t||f.defaultLine,{axis:"y"}),e(n,r,t||f.defaultLine,{axis:"x",inherit:"y"})):r.visible=!1}},{"../../components/color":294,"../../lib":424,"../../registry":525,"../bar/style_defaults":547,"./attributes":549}],558:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){if(t.x="xVal"in e?e.xVal:e.x,t.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(t.z=e.zLabelVal),e.xa&&(t.xaxis=e.xa),e.ya&&(t.yaxis=e.ya),!(n.cumulative||{}).enabled){var a,o=Array.isArray(i)?r[0].pts[i[0]][i[1]]:r[i].pts;if(t.pointNumbers=o,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex,n._indexToPoints){a=[];for(var s=0;s<o.length;s++)a=a.concat(n._indexToPoints[o[s]])}else a=o;t.pointIndices=a}return t}},{}],559:[function(t,e,n){"use strict";var i=t("../bar/hover").hoverPoints,a=t("../../plots/cartesian/axes").hoverLabelText;e.exports=function(t,e,n,r){e=i(t,e,n,r);if(e){n=(t=e[0]).cd[t.index],r=t.cd[0].trace;return r.cumulative.enabled||(t[(r="h"===r.orientation?"y":"x")+"Label"]=a(t[r+"a"],n.ph0,n.ph1)),e}}},{"../../plots/cartesian/axes":471,"../bar/hover":540}],560:[function(t,e,n){"use strict";e.exports={attributes:t("./attributes"),layoutAttributes:t("../bar/layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),supplyLayoutDefaults:t("../bar/layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("../bar/cross_trace_calc").crossTraceCalc,plot:t("../bar/plot").plot,layerName:"barlayer",style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,colorbar:t("../scatter/marker_colorbar"),hoverPoints:t("./hover"),selectPoints:t("../bar/select"),eventData:t("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":484,"../bar/cross_trace_calc":537,"../bar/layout_attributes":541,"../bar/layout_defaults":542,"../bar/plot":543,"../bar/select":544,"../bar/style":546,"../scatter/marker_colorbar":595,"./attributes":549,"./calc":554,"./cross_trace_defaults":556,"./defaults":557,"./event_data":558,"./hover":559}],561:[function(t,e,n){"use strict";e.exports={percent:function(t,e){for(var n=t.length,r=100/e,i=0;i<n;i++)t[i]*=r},probability:function(t,e){for(var n=t.length,r=0;r<n;r++)t[r]/=e},density:function(t,e,n,r){var i=t.length;r=r||1;for(var a=0;a<i;a++)t[a]*=n[a]*r},"probability density":function(t,e,n,r){var i=t.length;r&&(e/=r);for(var a=0;a<i;a++)t[a]*=n[a]/e}}},{}],562:[function(t,e,n){"use strict";var r=t("../../components/colorscale/attributes"),i=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../mesh3d/attributes"),o=t("../../plots/attributes"),s=t("../../lib/extend").extendFlat,t=t("../../plot_api/edit_types").overrideAll;function l(){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function u(){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}o=e.exports=t(s({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:l(),y:l(),z:l()},caps:{x:u(),y:u(),z:u()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:i(),showlegend:s({},o.showlegend,{dflt:!1})},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a.opacity,lightposition:a.lightposition,lighting:a.lighting,flatshading:a.flatshading,contour:a.contour,hoverinfo:s({},o.hoverinfo)}),"calc","nested");o.flatshading.dflt=!0,o.lighting.facenormalsepsilon.dflt=0,o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},{"../../components/colorscale/attributes":301,"../../lib/extend":417,"../../plot_api/edit_types":453,"../../plots/attributes":467,"../../plots/template_attributes":524,"../mesh3d/attributes":567}],563:[function(t,e,n){"use strict";var s=t("../../components/colorscale/calc"),l=t("../streamtube/calc").processGrid,u=t("../streamtube/calc").filter;e.exports=function(t,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=u(e.x,e._len),e._y=u(e.y,e._len),e._z=u(e.z,e._len),e._value=u(e.value,e._len);var n=l(e);e._gridFill=n.fill,e._Xs=n.Xs,e._Ys=n.Ys,e._Zs=n.Zs,e._len=n.len;for(var r=1/0,i=-1/0,a=0;a<e._len;a++)var o=e._value[a],r=Math.min(r,o),i=Math.max(i,o);e._minValues=r,e._maxValues=i,e._vMin=void 0===e.isomin||null===e.isomin?r:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?i:e.isomax,s(t,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":302,"../streamtube/calc":605}],564:[function(t,e,n){"use strict";function et(t,e){for(var n=e.length-1;0<n;n--){var r=Math.min(e[n],e[n-1]),i=Math.max(e[n],e[n-1]);if(r<i&&r<t&&t<=i)return{id:n,distRatio:(i-t)/(i-r)}}return{id:0,distRatio:0}}var i=t("gl-mesh3d"),a=t("../../lib/gl_format_color").parseColorScale,o=t("../../lib/str2rgbarray"),s=t("../../components/colorscale").extractOpts,l=t("../../plots/gl3d/zip3");function u(t,e,n){this.scene=t,this.uid=n,this.mesh=e,this.name="",this.data=null,this.showContour=!1}t=u.prototype;t.handlePick=function(t){if(t.object===this.mesh){var e=t.data.index,n=this.data._meshX[e],r=this.data._meshY[e],i=this.data._meshZ[e],a=this.data._Ys.length,e=this.data._Zs.length,n=et(n,this.data._Xs).id,r=et(r,this.data._Ys).id,i=et(i,this.data._Zs).id,a=t.index=i+e*r+e*a*n;t.traceCoordinate=[this.data._meshX[a],this.data._meshY[a],this.data._meshZ[a],this.data._value[a]];n=this.data.hovertext||this.data.text;return Array.isArray(n)&&void 0!==n[a]?t.textLabel=n[a]:n&&(t.textLabel=n),!0}},t.update=function(t){var e=this.scene,n=e.fullSceneLayout;function r(e,t,n,r){return t.map(function(t){return e.d2l(t,0,r)*n})}this.data=c(t);n={positions:l(r(n.xaxis,t._meshX,e.dataScale[0],t.xcalendar),r(n.yaxis,t._meshY,e.dataScale[1],t.ycalendar),r(n.zaxis,t._meshZ,e.dataScale[2],t.zcalendar)),cells:l(t._meshI,t._meshJ,t._meshK),lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:o(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading},e=s(t);n.vertexIntensity=t._meshIntensity,n.vertexIntensityBounds=[e.min,e.max],n.colormap=a(t),this.mesh.update(n)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var nt=["xyz","xzy","yxz","yzx","zxy","zyx"];function c(m){m._meshI=[],m._meshJ=[],m._meshK=[];var i,v,b,x,_,w,k,o=m.surface.show,s=m.spaceframe.show,l=m.surface.fill,u=m.spaceframe.fill,M=!1,g=!1,T=0,y=m._Xs,A=m._Ys,S=m._Zs,E=y.length,O=A.length,C=S.length,r=nt.indexOf(m._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(t,e,n){switch(r){case 5:return n+C*e+C*O*t;case 4:return n+C*t+C*E*e;case 3:return e+O*n+O*C*t;case 2:return e+O*t+O*E*n;case 1:return t+E*n+E*C*e;default:return t+E*e+E*O*n}},c=m._minValues,f=m._maxValues,L=m._vMin,R=m._vMax;function j(){v=i}function h(){b=[],x=[],_=[],w=[],i=0,j()}function N(t,e,n,r){return b.push(t),x.push(e),_.push(n),w.push(r),++i-1}function D(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=t[i]*(1-n)+n*e[i];return r}function z(t){k=t}function I(t,e){var n=t[0],r=t[1],i=t[2],a=function(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=(t[i]+e[i]+n[i])/3;return r}(n,r,i),o=Math.sqrt(1-k),s=D(a,n,o),l=D(a,r,o),t=D(a,i,o),a=e[0],o=e[1],e=e[2];return{xyzv:[[n,r,l],[l,s,n],[r,i,t],[t,l,r],[i,n,s],[s,t,i]],abc:[[a,o,-1],[-1,-1,a],[o,e,-1],[-1,-1,o],[e,a,-1],[-1,-1,e]]}}function d(t,e){return"all"===t||null===t||-1<t.indexOf(e)}function p(t,e,n){j();var r,i=[e],a=[n];1<=k?(i=[e],a=[n]):0<k&&(i=(r=I(e,n)).xyzv,a=r.abc);for(var o,s,l,u=0;u<i.length;u++){e=i[u],n=a[u];for(var c=[],f=0;f<3;f++){var h=e[f][0],d=e[f][1],p=e[f][2],g=e[f][3],y=-1<n[f]?n[f]:function(t,e,n){for(var r=w.length,i=v;i<r;i++)if(t===b[i]&&e===x[i]&&n===_[i])return i;return-1}(h,d,p);c[f]=-1<y?y:N(h,d,p,(p=g,null===(g=t)?p:g))}o=c[0],s=c[1],l=c[2],m._meshI.push(o),m._meshJ.push(s),m._meshK.push(l),++T}}function F(r,i,a){function t(t,e,n){p(r,[i[t],i[e],i[n]],[a[t],a[e],a[n]])}t(0,1,2),t(2,3,0)}function e(r,i,a){function t(t,e,n){p(r,[i[t],i[e],i[n]],[a[t],a[e],a[n]])}t(0,1,2),t(3,0,1),t(2,3,0),t(1,2,3)}function B(t,e,n,r){var i=t[3];i<n&&(i=n),r<i&&(i=r);for(var a=(t[3]-i)/(t[3]-e[3]+1e-9),o=[],s=0;s<4;s++)o[s]=(1-a)*t[s]+a*e[s];return o}function n(t,e,n){return e<=t&&t<=n}function U(t){var e=.001*(R-L);return L-e<=t&&t<=R+e}function V(t){for(var e=[],n=0;n<4;n++){var r=t[n];e.push([m._x[r],m._y[r],m._z[r],m._value[r]])}return e}var H=3;function q(a,o,s,l,u,r){r=r||1;var c=!(s=[-1,-1,-1]),f=[n(o[0][3],l,u),n(o[1][3],l,u),n(o[2][3],l,u)];if(!f[0]&&!f[1]&&!f[2])return!1;function h(t,e,n){return U(e[0][3])&&U(e[1][3])&&U(e[2][3])?(p(t,e,n),!0):r<H&&q(t,e,0,L,R,++r)}if(f[0]&&f[1]&&f[2])return h(a,o,s)||c;var d=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(t){var e,n,r,i;f[t[0]]&&f[t[1]]&&!f[t[2]]&&(e=o[t[0]],n=o[t[1]],r=B(i=o[t[2]],e,l,u),i=B(i,n,l,u),c=h(a,[i,r,e],[-1,-1,s[t[0]]])||c,c=h(a,[e,n,i],[s[t[0]],s[t[1]],-1])||c,d=!0)}),d||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(t){var e,n,r;!f[t[0]]||f[t[1]]||f[t[2]]||(e=o[t[0]],n=o[t[1]],r=o[t[2]],n=B(n,e,l,u),r=B(r,e,l,u),c=h(a,[r,n,e],[-1,-1,s[t[0]]])||c,d=!0)}),c}function G(s,l,u,c){var t=!1,f=V(l),h=[n(f[0][3],u,c),n(f[1][3],u,c),n(f[2][3],u,c),n(f[3][3],u,c)];if(!(h[0]||h[1]||h[2]||h[3]))return t;if(h[0]&&h[1]&&h[2]&&h[3])return g&&e(s,f,l),t;var d=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(t){var e,n,r,i;h[t[0]]&&h[t[1]]&&h[t[2]]&&!h[t[3]]&&(e=f[t[0]],n=f[t[1]],r=f[t[2]],i=f[t[3]],g?p(s,[e,n,r],[l[t[0]],l[t[1]],l[t[2]]]):p(null,[B(i,e,u,c),B(i,n,u,c),B(i,r,u,c)],[-1,-1,-1]),d=!0)}),d?t:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(t){var e,n,r,i,a,o;h[t[0]]&&h[t[1]]&&!h[t[2]]&&!h[t[3]]&&(e=f[t[0]],n=f[t[1]],a=f[t[2]],o=f[t[3]],r=B(a,e,u,c),i=B(a,n,u,c),a=B(o,n,u,c),o=B(o,e,u,c),g?(p(s,[e,o,r],[l[t[0]],-1,-1]),p(s,[n,i,a],[l[t[1]],-1,-1])):F(null,[r,i,a,o],[-1,-1,-1,-1]),d=!0)}),d||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(t){var e,n,r,i;!h[t[0]]||h[t[1]]||h[t[2]]||h[t[3]]||(e=f[t[0]],n=f[t[1]],r=f[t[2]],i=f[t[3]],n=B(n,e,u,c),r=B(r,e,u,c),i=B(i,e,u,c),g?(p(s,[e,n,r],[l[t[0]],-1,-1]),p(s,[e,r,i],[l[t[0]],-1,-1]),p(s,[e,i,n],[l[t[0]],-1,-1])):p(null,[n,r,i],[-1,-1,-1]),d=!0)}),t)}function Y(t,e,n,r,i,a,o,s,l,u,c){var f=!1;return M&&(d(t,"A")&&(f=G(null,[e,n,r,a],u,c)||f),d(t,"B")&&(f=G(null,[n,r,i,l],u,c)||f),d(t,"C")&&(f=G(null,[n,a,o,l],u,c)||f),d(t,"D")&&(f=G(null,[r,a,s,l],u,c)||f),d(t,"E")&&(f=G(null,[n,r,a,l],u,c)||f)),g&&(f=G(t,[n,r,a,l],u,c)||f),f}function X(t,e,n,r,i,a,o,s){return[!0===s[0]||q(t,V([e,n,r]),0,a,o),!0===s[1]||q(t,V([r,i,e]),0,a,o)]}function W(t,e,n,r,i,a,o,s,l){return s?X(t,e,n,i,r,a,o,l):X(t,n,i,r,e,a,o,l)}function Z(t,e,n,r,i,a,o){function s(){h=q(t,[l,u,c],0,i,a)||h,h=q(t,[c,f,l],0,i,a)||h}var l,u,c,f,h=!1,d=o[0],p=o[1],o=o[2];return d&&(l=D(V([P(e,+n,+r)])[0],V([P(e-1,+n,+r)])[0],d),u=D(V([P(e,+n,r-1)])[0],V([P(e-1,+n,r-1)])[0],d),c=D(V([P(e,n-1,r-1)])[0],V([P(e-1,n-1,r-1)])[0],d),f=D(V([P(e,n-1,+r)])[0],V([P(e-1,n-1,+r)])[0],d),s()),p&&(l=D(V([P(+e,n,+r)])[0],V([P(+e,n-1,+r)])[0],p),u=D(V([P(+e,n,r-1)])[0],V([P(+e,n-1,r-1)])[0],p),c=D(V([P(e-1,n,r-1)])[0],V([P(e-1,n-1,r-1)])[0],p),f=D(V([P(e-1,n,+r)])[0],V([P(e-1,n-1,+r)])[0],p),s()),o&&(l=D(V([P(+e,+n,r)])[0],V([P(+e,+n,r-1)])[0],o),u=D(V([P(+e,n-1,r)])[0],V([P(+e,n-1,r-1)])[0],o),c=D(V([P(e-1,n-1,r)])[0],V([P(e-1,n-1,r-1)])[0],o),f=D(V([P(e-1,+n,r)])[0],V([P(e-1,+n,r-1)])[0],o),s()),h}function K(t,e,n,r,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],u=1;u<C;u++)for(var c=1;c<O;c++)a.push(W(t,P(l,c-1,u-1),P(l,c-1,u),P(l,c,u-1),P(l,c,u),n,r,(l+c+u)%2,i&&i[o]?i[o]:[])),o++;return a}function Q(t,e,n,r,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],u=1;u<E;u++)for(var c=1;c<C;c++)a.push(W(t,P(u-1,l,c-1),P(u,l,c-1),P(u-1,l,c),P(u,l,c),n,r,(u+l+c)%2,i&&i[o]?i[o]:[])),o++;return a}function $(t,e,n,r,i){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],u=1;u<O;u++)for(var c=1;c<E;c++)a.push(W(t,P(c-1,u-1,l),P(c-1,u,l),P(c,u-1,l),P(c,u,l),n,r,(c+u+l)%2,i&&i[o]?i[o]:[])),o++;return a}function J(t,e,n){for(var r,i,a,o,s,l,u,c,f,h,d,p,g=1;g<C;g++)for(var y=1;y<O;y++)for(var m=1;m<E;m++)r=t,i=P(m-1,y-1,g-1),a=P(m-1,y-1,g),o=P(m-1,y,g-1),s=P(m-1,y,g),l=P(m,y-1,g-1),u=P(m,y-1,g),c=P(m,y,g-1),f=P(m,y,g),h=e,d=n,p=void 0,p=r,(m+y+g)%2?(M&&"even"===r&&(p=null),Y(p,i,a,o,s,l,u,c,f,h,d)):(M&&"odd"===r&&(p=null),Y(p,f,c,u,l,s,o,a,i,h,d))}function tt(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n}return function(){h(),function(){for(var t=0;t<E;t++)for(var e=0;e<O;e++)for(var n=0;n<C;n++){var r=P(t,e,n);N(m._x[r],m._y[r],m._z[r],m._value[r])}}();var t,d=null;if(s&&u&&(z(u),g=!(t=d),J(t,L,R),g=!1),o&&l){z(l);for(var e=m.surface.pattern,n=m.surface.count,r=0;r<n;r++){var i=1===n?.5:r/(n-1),a=(1-i)*L+i*R,i=Math.abs(a-c),a=Math.abs(a-f)<i?[c,a]:[a,f];M=!0,J(e,a[0],a[1]),M=!1}}var p=[[Math.min(L,f),Math.max(L,f)],[Math.min(c,R),Math.max(c,R)]];["x","y","z"].forEach(function(t){for(var e=[],n=0;n<p.length;n++){var r=0,i=p[n][0],a=p[n][1],o=m.slices[t];if(o.show&&o.fill){z(o.fill);var s=[],l=[],u=[];if(o.locations.length)for(var c=0;c<o.locations.length;c++){var f=et(o.locations[c],"x"===t?y:"y"===t?A:S);0===f.distRatio?s.push(f.id):0<f.id&&(l.push(f.id),"x"===t?u.push([f.distRatio,0,0]):"y"===t?u.push([0,f.distRatio,0]):u.push([0,0,f.distRatio]))}else s=tt(1,"x"===t?E-1:"y"===t?O-1:C-1);0<l.length&&(e[r]=("x"===t?function(t,e,n,r,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var u=e[l],c=1;c<C;c++)for(var f=1;f<O;f++)o.push(Z(t,u,f,c,n,r,i[l],a&&a[s]&&a[s])),s++;return o}:"y"===t?function(t,e,n,r,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var u=e[l],c=1;c<E;c++)for(var f=1;f<C;f++)o.push(Z(t,c,u,f,n,r,i[l],a&&a[s]&&a[s])),s++;return o}:function(t,e,n,r,i,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var u=e[l],c=1;c<O;c++)for(var f=1;f<E;f++)o.push(Z(t,f,c,u,n,r,i[l],a&&a[s]&&a[s])),s++;return o})(d,l,i,a,u,e[r]),r++),0<s.length&&(e[r]=("x"===t?K:"y"===t?Q:$)(d,s,i,a,e[r]),r++)}var h=m.caps[t];h.show&&h.fill&&(z(h.fill),e[r]="x"===t?K(d,[0,E-1],i,a,e[r]):"y"===t?Q(d,[0,O-1],i,a,e[r]):$(d,[0,C-1],i,a,e[r]),r++)}}),0===T&&h(),m._meshX=b,m._meshY=x,m._meshZ=_,m._meshIntensity=w,m._Xs=y,m._Ys=A,m._Zs=S}(),m}e.exports={findNearestOnAxis:et,generateIsoMeshes:c,createIsosurfaceTrace:function(t,e){var n=t.glplot.gl,r=i({gl:n}),n=new u(t,r,e.uid);return(r._trace=n).update(e),t.glplot.add(r),n}}},{"../../components/colorscale":306,"../../lib/gl_format_color":421,"../../lib/str2rgbarray":446,"../../plots/gl3d/zip3":513,"gl-mesh3d":155}],565:[function(t,e,n){"use strict";var i=t("../../lib"),u=t("../../registry"),a=t("./attributes"),c=t("../../components/colorscale/defaults");function o(t,e,n,r,i){var a=i("isomin"),o=i("isomax");null!=o&&null!=a&&o<a&&(e.isomin=null,e.isomax=null);var s=i("x"),l=i("y"),o=i("z"),a=i("value");s&&s.length&&l&&l.length&&o&&o.length&&a&&a.length?(u.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],r),["x","y","z"].forEach(function(t){var e="caps."+t;i(e+".show")&&i(e+".fill");t="slices."+t;i(t+".show")&&(i(t+".fill"),i(t+".locations"))}),i("spaceframe.show")&&i("spaceframe.fill"),i("surface.show")&&(i("surface.count"),i("surface.fill"),i("surface.pattern")),i("contour.show")&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(t){i(t)}),c(t,e,r,i,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}e.exports={supplyDefaults:function(n,r,t,e){o(n,r,0,e,function(t,e){return i.coerce(n,r,a,t,e)})},supplyIsoDefaults:o}},{"../../components/colorscale/defaults":304,"../../lib":424,"../../registry":525,"./attributes":562}],566:[function(t,e,n){"use strict";e.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":502,"./attributes":562,"./calc":563,"./convert":564,"./defaults":565}],567:[function(t,e,n){"use strict";var r=t("../../components/colorscale/attributes"),i=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../surface/attributes"),o=t("../../plots/attributes"),t=t("../../lib/extend").extendFlat;e.exports=t({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},r("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:t({},a.contours.x.show,{}),color:a.contours.x.color,width:a.contours.x.width,editType:"calc"},lightposition:{x:t({},a.lightposition.x,{dflt:1e5}),y:t({},a.lightposition.y,{dflt:1e5}),z:t({},a.lightposition.z,{dflt:0}),editType:"calc"},lighting:t({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},a.lighting),hoverinfo:t({},o.hoverinfo,{editType:"calc"}),showlegend:t({},o.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":301,"../../lib/extend":417,"../../plots/attributes":467,"../../plots/template_attributes":524,"../surface/attributes":606}],568:[function(t,e,n){"use strict";var r=t("../../lib");function i(t){return-1!==t.indexOf("e")?t.replace(/[.]?0+e/,"e"):-1!==t.indexOf(".")?t.replace(/[.]?0+$/,""):t}n.formatPiePercent=function(t,e){t=i((100*t).toPrecision(3));return r.numSeparate(t,e)+"%"},n.formatPieValue=function(t,e){t=i(t.toPrecision(10));return r.numSeparate(t,e)},n.getFirstFilled=function(t,e){if(Array.isArray(t))for(var n=0;n<e.length;n++){var r=t[e[n]];if(r||0===r||""===r)return r}},n.castOption=function(t,e){return Array.isArray(t)?n.getFirstFilled(t,e):t||void 0},n.getRotationAngle=function(t){return("auto"===t?0:t)*Math.PI/180}},{"../../lib":424}],569:[function(t,e,n){"use strict";var i=t("../../components/color"),a=t("./helpers").castOption;e.exports=function(t,e,n){var r=n.marker.line,n=a(r.color,e.pts)||i.defaultLine,r=a(r.width,e.pts)||0;t.style("stroke-width",r).call(i.fill,e.color).call(i.stroke,n)}},{"../../components/color":294,"./helpers":568}],570:[function(t,e,n){"use strict";var r=t("../scatter/attributes"),i=t("../../components/colorscale/attributes"),a=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,s=t("../../plots/attributes"),l=t("../../constants/gl3d_dashes"),u=t("../../constants/gl3d_markers"),c=t("../../lib/extend").extendFlat,f=t("../../plot_api/edit_types").overrideAll,h=r.line,d=r.marker,t=d.line,l=c({width:h.width,dash:{valType:"enumerated",values:Object.keys(l),dflt:"solid"}},i("line"));function p(){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}s=e.exports=f({x:r.x,y:r.y,z:{valType:"data_array"},text:c({},r.text,{}),texttemplate:o({},{}),hovertext:c({},r.hovertext,{}),hovertemplate:a(),mode:c({},r.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:p(),y:p(),z:p()},connectgaps:r.connectgaps,line:l,marker:c({symbol:{valType:"enumerated",values:Object.keys(u),dflt:"circle",arrayOk:!0},size:c({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:c({},d.opacity,{arrayOk:!1}),colorbar:d.colorbar,line:c({width:c({},t.width,{arrayOk:!1})},i("marker.line"))},i("marker")),textposition:c({},r.textposition,{dflt:"top center"}),textfont:{color:r.textfont.color,size:r.textfont.size,family:c({},r.textfont.family,{arrayOk:!1})},hoverinfo:c({},s.hoverinfo)},"calc","nested");s.x.editType=s.y.editType=s.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":301,"../../constants/gl3d_dashes":399,"../../constants/gl3d_markers":400,"../../lib/extend":417,"../../plot_api/edit_types":453,"../../plots/attributes":467,"../../plots/template_attributes":524,"../scatter/attributes":577}],571:[function(t,e,n){"use strict";var r=t("../scatter/arrays_to_calcdata"),i=t("../scatter/colorscale_calc");e.exports=function(t,e){var n=[{x:!1,y:!1,trace:e,t:{}}];return r(n,e),i(t,e),n}},{"../scatter/arrays_to_calcdata":576,"../scatter/colorscale_calc":580}],572:[function(t,e,n){"use strict";var f=t("../../registry");function c(t,e,n,r){if(!e||!e.visible)return null;for(var i=f.getComponentMethod("errorbars","makeComputeError")(e),a=new Array(t.length),o=0;o<t.length;o++){var s,l,u,c=i(+t[o],o);"log"===r.type?(s=r.c2l(t[o]),u=t[o]-c[0],l=t[o]+c[1],a[o]=[(r.c2l(u,!0)-s)*n,(r.c2l(l,!0)-s)*n],0<u&&(u=r.c2l(u),r._lowerLogErrorBound||(r._lowerLogErrorBound=u),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,u))):a[o]=[-c[0]*n,c[1]*n]}return a}e.exports=function(t,e,n){var r=[c(t.x,t.error_x,e[0],n.xaxis),c(t.y,t.error_y,e[1],n.yaxis),c(t.z,t.error_z,e[2],n.zaxis)],i=function(t){for(var e=0;e<t.length;e++)if(t[e])return t[e].length;return 0}(r);if(0===i)return null;for(var a=new Array(i),o=0;o<i;o++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(r[l])for(var u=0;u<2;u++)s[u][l]=r[l][o][u];a[o]=s}return a}},{"../../registry":525}],573:[function(t,e,n){"use strict";var i=t("gl-line3d"),a=t("gl-scatter3d"),o=t("gl-error3d"),s=t("gl-mesh3d"),h=t("delaunay-triangulate"),j=t("../../lib"),N=t("../../lib/str2rgbarray"),D=t("../../lib/gl_format_color").formatColor,z=t("../scatter/make_bubble_size_func"),l=t("../../constants/gl3d_dashes"),r=t("../../constants/gl3d_markers"),I=t("../../plots/cartesian/axes"),F=t("../../components/fx/helpers").appendArrayPointValue,B=t("./calc_errors");function u(t,e){this.scene=t,this.uid=e,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}t=u.prototype;function U(t){return null==t?0:-1<t.indexOf("left")?-1:-1<t.indexOf("right")?1:0}function V(t){return null==t?0:-1<t.indexOf("top")?-1:-1<t.indexOf("bottom")?1:0}function H(t,e){return e(4*t)}function q(t){return r[t]}function G(t,e,n,r,i){var a=null;if(j.isArrayOrTypedArray(t)){a=[];for(var o=0;o<e;o++)void 0===t[o]?a[o]=r:a[o]=n(t[o],i)}else a=n(t,j.identity);return a}function c(t,e){var n,r,i,a,o=[],s=t.fullSceneLayout,l=t.dataScale,u=s.xaxis,c=s.yaxis,f=s.zaxis,h=e.marker,d=e.line,p=e.x||[],g=e.y||[],y=e.z||[],m=p.length,v=e.xcalendar,b=e.ycalendar,x=e.zcalendar;for(S=0;S<m;S++)n=u.d2l(p[S],0,v)*l[0],r=c.d2l(g[S],0,b)*l[1],i=f.d2l(y[S],0,x)*l[2],o[S]=[n,r,i];if(Array.isArray(e.text))A=e.text;else if(void 0!==e.text)for(A=new Array(m),S=0;S<m;S++)A[S]=e.text;function _(t,e){t=s[t];return I.tickText(t,t.d2l(e),!0).text}var w=e.texttemplate;if(w)for(var k=t.fullLayout._d3locale,t=Array.isArray(w),M=t?Math.min(w.length,m):m,T=t?function(t){return w[t]}:function(){return w},A=new Array(M),S=0;S<M;S++){var E={x:p[S],y:g[S],z:y[S]},O={xLabel:_("xaxis",p[S]),yLabel:_("yaxis",g[S]),zLabel:_("zaxis",y[S])},C={};F(C,e,S);var P=e._meta||{};A[S]=j.texttemplateString(T(S),O,k,C,E,P)}a={position:o,mode:e.mode,text:A},"line"in e&&(a.lineColor=D(d,1,m),a.lineWidth=d.width,a.lineDashes=d.dash),"marker"in e&&(d=z(e),a.scatterColor=D(h,1,m),a.scatterSize=G(h.size,m,H,20,d),a.scatterMarker=G(h.symbol,m,q,"●"),a.scatterLineWidth=h.line.width,a.scatterLineColor=D(h.line,1,m),a.scatterAngle=0),"textposition"in e&&(a.textOffset=function(t){var e=[0,0];if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=[0,0],t[n]&&(e[n][0]=U(t[n]),e[n][1]=V(t[n]));else e[0]=U(t),e[1]=V(t);return e}(e.textposition),a.textColor=D(e.textfont,1,m),a.textSize=G(e.textfont.size,m,j.identity,12),a.textFont=e.textfont.family,a.textAngle=0);var L=["x","y","z"];for(a.project=[!1,!1,!1],a.projectScale=[1,1,1],a.projectOpacity=[1,1,1],S=0;S<3;++S){var R=e.projection[L[S]];(a.project[S]=R.show)&&(a.projectOpacity[S]=R.opacity,a.projectScale[S]=R.scale)}a.errorBounds=B(e,l,s);h=function(t){for(var e=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],r=[1,1,1],i=0;i<3;i++){var a=t[i];a&&!1!==a.copy_zstyle&&!1!==t[2].visible&&(a=t[2]),a&&a.visible&&(e[i]=a.width/2,n[i]=N(a.color),r[i]=a.thickness)}return{capSize:e,color:n,lineWidth:r}}([e.error_x,e.error_y,e.error_z]);return a.errorColor=h.color,a.errorLineWidth=h.lineWidth,a.errorCapSize=h.capSize,a.delaunayAxis=e.surfaceaxis,a.delaunayColor=N(e.surfacecolor),a}function f(t){if(j.isArrayOrTypedArray(t)){var e=t[0];return j.isArrayOrTypedArray(e)&&(t=e),"rgb("+t.slice(0,3).map(function(t){return Math.round(255*t)})+")"}return null}function d(t){return j.isArrayOrTypedArray(t)?4===t.length&&"number"==typeof t[0]?f(t):t.map(f):null}t.handlePick=function(t){if(t.object&&(t.object===this.linePlot||t.object===this.delaunayMesh||t.object===this.textMarkers||t.object===this.scatterPlot)){var e=t.index=t.data.index;return t.object.highlight&&t.object.highlight(null),this.scatterPlot&&(t.object=this.scatterPlot,this.scatterPlot.highlight(t.data)),t.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?!this.textLabels[e]&&0!==this.textLabels[e]||(t.textLabel=this.textLabels[e]):t.textLabel=this.textLabels),t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]],!0}},t.update=function(t){var e=this.scene.glplot.gl,n=l.solid;this.data=t;var r=c(this.scene,t);"mode"in r&&(this.mode=r.mode),"lineDashes"in r&&r.lineDashes in l&&(n=l[r.lineDashes]),this.color=d(r.scatterColor)||d(r.lineColor),this.dataPoints=r.position,n={gl:this.scene.glplot.gl,position:r.position,color:r.lineColor,lineWidth:r.lineWidth||1,dashes:n[0],dashScale:n[1],opacity:t.opacity,connectGaps:t.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(n):(this.linePlot=i(n),(this.linePlot._trace=this).scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var n=t.opacity;t.marker&&t.marker.opacity&&(n*=t.marker.opacity),n={gl:this.scene.glplot.gl,position:r.position,color:r.scatterColor,size:r.scatterSize,glyph:r.scatterMarker,opacity:n,orthographic:!0,lineWidth:r.scatterLineWidth,lineColor:r.scatterLineColor,project:r.project,projectScale:r.projectScale,projectOpacity:r.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=a(n),(this.scatterPlot._trace=this).scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),n={gl:this.scene.glplot.gl,position:r.position,glyph:r.text,color:r.textColor,size:r.textSize,angle:r.textAngle,alignment:r.textOffset,font:r.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:t.opacity},this.textLabels=t.hovertext||t.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(n):(this.textMarkers=a(n),(this.textMarkers._trace=this).textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:r.position,color:r.errorColor,error:r.errorBounds,lineWidth:r.errorLineWidth,capSize:r.errorCapSize,opacity:t.opacity},this.errorBars?r.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):r.errorBounds&&(this.errorBars=o(n),(this.errorBars._trace=this).scene.glplot.add(this.errorBars)),0<=r.delaunayAxis?((r=function(t,e,n){for(var r=(n+1)%3,i=(n+2)%3,a=[],o=[],s=0;s<t.length;++s){var l=t[s];!isNaN(l[r])&&isFinite(l[r])&&!isNaN(l[i])&&isFinite(l[i])&&(a.push([l[r],l[i]]),o.push(s))}var u=h(a);for(s=0;s<u.length;++s)for(var c=u[s],f=0;f<c.length;++f)c[f]=o[c[f]];return{positions:t,cells:u,meshColor:e}}(r.position,r.delaunayColor,r.delaunayAxis)).opacity=t.opacity,this.delaunayMesh?this.delaunayMesh.update(r):(r.gl=e,this.delaunayMesh=s(r),(this.delaunayMesh._trace=this).scene.glplot.add(this.delaunayMesh))):this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},t.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},e.exports=function(t,e){return(t=new u(t,e.uid)).update(e),t}},{"../../components/fx/helpers":330,"../../constants/gl3d_dashes":399,"../../constants/gl3d_markers":400,"../../lib":424,"../../lib/gl_format_color":421,"../../lib/str2rgbarray":446,"../../plots/cartesian/axes":471,"../scatter/make_bubble_size_func":594,"./calc_errors":572,"delaunay-triangulate":91,"gl-error3d":116,"gl-line3d":122,"gl-mesh3d":155,"gl-scatter3d":163}],574:[function(t,e,n){"use strict";var c=t("../../registry"),f=t("../../lib"),h=t("../scatter/subtypes"),d=t("../scatter/marker_defaults"),p=t("../scatter/line_defaults"),g=t("../scatter/text_defaults"),y=t("./attributes");e.exports=function(n,r,t,e){function i(t,e){return f.coerce(n,r,y,t,e)}if(function(t,e,n,r){var i=0,a=n("x"),o=n("y"),n=n("z");c.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],r),a&&o&&n&&(i=Math.min(a.length,o.length,n.length),e._length=e._xlength=e._ylength=e._zlength=i);return i}(n,r,i,e)){i("text"),i("hovertext"),i("hovertemplate"),i("mode"),h.hasLines(r)&&(i("connectgaps"),p(n,r,t,e,i)),h.hasMarkers(r)&&d(n,r,t,e,i,{noSelect:!0}),h.hasText(r)&&(i("texttemplate"),g(n,r,e,i,{noSelect:!0}));var a=(r.line||{}).color,o=(r.marker||{}).color;0<=i("surfaceaxis")&&i("surfacecolor",a||o);for(var s=["x","y","z"],l=0;l<3;++l){var u="projection."+s[l];i(u+".show")&&(i(u+".opacity"),i(u+".scale"))}e=c.getComponentMethod("errorbars","supplyDefaults");e(n,r,a||o||t,{axis:"z"}),e(n,r,a||o||t,{axis:"y",inherit:"z"}),e(n,r,a||o||t,{axis:"x",inherit:"z"})}else r.visible=!1}},{"../../lib":424,"../../registry":525,"../scatter/line_defaults":590,"../scatter/marker_defaults":596,"../scatter/subtypes":602,"../scatter/text_defaults":603,"./attributes":570}],575:[function(t,e,n){"use strict";e.exports={plot:t("./convert"),attributes:t("./attributes"),markerSymbols:t("../../constants/gl3d_markers"),supplyDefaults:t("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":400,"../../plots/gl3d":502,"./attributes":570,"./calc":571,"./convert":573,"./defaults":574}],576:[function(t,e,n){"use strict";var i=t("../../lib");e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;i.mergeArray(e.text,t,"tx"),i.mergeArray(e.texttemplate,t,"txt"),i.mergeArray(e.hovertext,t,"htx"),i.mergeArray(e.customdata,t,"data"),i.mergeArray(e.textposition,t,"tp"),e.textfont&&(i.mergeArrayCastPositive(e.textfont.size,t,"ts"),i.mergeArray(e.textfont.color,t,"tc"),i.mergeArray(e.textfont.family,t,"tf"));var r=e.marker;r&&(i.mergeArrayCastPositive(r.size,t,"ms"),i.mergeArrayCastPositive(r.opacity,t,"mo"),i.mergeArray(r.symbol,t,"mx"),i.mergeArray(r.color,t,"mc"),e=r.line,r.line&&(i.mergeArray(e.color,t,"mlc"),i.mergeArrayCastPositive(e.width,t,"mlw")),(r=r.gradient)&&"none"!==r.type&&(i.mergeArray(r.type,t,"mgt"),i.mergeArray(r.color,t,"mgc")))}},{"../../lib":424}],577:[function(t,e,n){"use strict";var r=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../components/colorscale/attributes"),o=t("../../plots/font_attributes"),s=t("../../components/drawing/attributes").dash,l=t("../../components/drawing"),u=t("./constants"),t=t("../../lib/extend").extendFlat;function c(){return{valType:"any",dflt:0,editType:"calc"}}function f(){return{valType:"any",editType:"calc"}}function h(){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:c(),yperiod:c(),xperiod0:f(),yperiod0:f(),xperiodalignment:h(),yperiodalignment:h(),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:r({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:t({},s,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:t({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:t({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},a("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},a("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:o({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":301,"../../components/drawing":316,"../../components/drawing/attributes":315,"../../lib/extend":417,"../../plots/font_attributes":499,"../../plots/template_attributes":524,"./constants":581}],578:[function(t,e,n){"use strict";var P=t("fast-isnumeric"),L=t("../../lib"),R=t("../../plots/cartesian/axes"),j=t("../../plots/cartesian/align_period"),N=t("../../constants/numerical").BADNUM,p=t("./subtypes"),D=t("./colorscale_calc"),z=t("./arrays_to_calcdata"),I=t("./calc_selection");function F(t,e,n,r,i,a,o){var s=e._length,l=t._fullLayout,u=n._id,c=r._id,f=l._firstScatter[g(e)]===e.uid,h=(V(e,l,n,r)||{}).orientation,d=e.fill;n._minDtick=0;t={padded:!(r._minDtick=0)},l={padded:!0};o&&(t.ppad=l.ppad=o);s=s<2||i[0]!==i[s-1]||a[0]!==a[s-1];s&&("tozerox"===d||"tonextx"===d&&(f||"h"===h))?t.tozero=!0:(e.error_y||{}).visible||"tonexty"!==d&&"tozeroy"!==d&&(p.hasMarkers(e)||p.hasText(e))||(t.padded=!1,t.ppad=0),s&&("tozeroy"===d||"tonexty"===d&&(f||"v"===h))?l.tozero=!0:"tonextx"!==d&&"tozerox"!==d||(l.padded=!1),u&&(e._extremes[u]=R.findExtremes(n,i,t)),c&&(e._extremes[c]=R.findExtremes(r,a,l))}function B(t,e){if(p.hasMarkers(t)){var n=t.marker,r=1.6*(t.marker.sizeref||1),i="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/r),3)}:function(t){return Math.max((t||0)/r,3)};if(L.isArrayOrTypedArray(n.size)){var a={type:"linear"};R.setConvert(a);for(var o=a.makeCalcdata(t.marker,"size"),s=new Array(e),l=0;l<e;l++)s[l]=i(o[l]);return s}return i(n.size)}}function U(t,e){var n=g(e),t=t._firstScatter;t[n]||(t[n]=e.uid)}function g(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function V(t,e,n,r){t=t.stackgroup;if(t){t=e._scatterStackOpts[n._id+r._id][t],n="v"===t.orientation?r:n;return"linear"===n.type||"log"===n.type?t:void 0}}e.exports={calc:function(t,e){var n,r,i,a,o,s=t._fullLayout,l=R.getFromId(t,e.xaxis||"x"),u=R.getFromId(t,e.yaxis||"y"),c=l.makeCalcdata(e,"x"),f=u.makeCalcdata(e,"y"),h=j(e,l,"x",c),d=j(e,u,"y",f),p=e._length,g=new Array(p),y=e.ids,m=V(e,s,l,u),v=!1;U(s,e);var b,x="x",_="y";m?(L.pushUnique(m.traceIndices,e._expandedIndex),n="v"===m.orientation,b=n?(_="s","x"):(x="s","y"),a="interpolate"===m.stackgaps):F(t,e,l,u,h,d,B(e,p));for(var w=!!e.xperiodalignment,k=!!e.yperiodalignment,M=0;M<p;M++){var T=g[M]={},A=P(h[M]),S=P(d[M]);A&&S?(T[x]=h[M],T[_]=d[M],w&&(T.orig_x=c[M]),k&&(T.orig_y=f[M])):m&&(n?A:S)?(T[b]=(n?h:d)[M],T.gap=!0,a?(T.s=N,v=!0):T.s=0):T[x]=T[_]=N,y&&(T.id=String(y[M]))}if(z(g,e),D(t,e),I(g,e),m){for(M=0;M<g.length;)g[M][b]===N?g.splice(M,1):M++;if(L.sort(g,function(t,e){return t[b]-e[b]||t.i-e.i}),v){for(M=0;M<g.length-1&&g[M].gap;)M++;for(o=(o=g[M].s)||(g[M].s=0),r=0;r<M;r++)g[r].s=o;for(i=g.length-1;M<i&&g[i].gap;)i--;for(o=g[i].s,r=g.length-1;i<r;r--)g[r].s=o;for(;M<i;)if(g[++M].gap){for(r=M+1;g[r].gap;)r++;for(var E=g[M-1][b],O=g[M-1].s,C=(g[r].s-O)/(g[r][b]-E);M<r;)g[M].s=O+(g[M][b]-E)*C,M++}}}return g},calcMarkerSize:B,calcAxisExpansion:F,setFirstScatter:U,getStackOpts:V}},{"../../constants/numerical":402,"../../lib":424,"../../plots/cartesian/align_period":468,"../../plots/cartesian/axes":471,"./arrays_to_calcdata":576,"./calc_selection":579,"./colorscale_calc":580,"./subtypes":602,"fast-isnumeric":99}],579:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){r.isArrayOrTypedArray(e.selectedpoints)&&r.tagSelected(t,e)}},{"../../lib":424}],580:[function(t,e,n){"use strict";var r=t("../../components/colorscale/helpers").hasColorscale,i=t("../../components/colorscale/calc"),a=t("./subtypes");e.exports=function(t,e){a.hasLines(e)&&r(e,"line")&&i(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(e)&&(r(e,"marker")&&i(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),r(e,"marker.line")&&i(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":302,"../../components/colorscale/helpers":305,"./subtypes":602}],581:[function(t,e,n){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],582:[function(t,e,n){"use strict";var L=t("./calc");function R(t,e,n,r,i,a,o){var s,r={i:null,gap:i[r]=!0,s:0};r[o]=n,t.splice(e,0,r),e&&n===t[e-1][o]?(s=t[e-1],r.s=s.s,r.i=s.i,r.gap=s.gap):a&&(r.s=(s=n,a=o,o=(r=t)[(n=e)-1],(n=r[n+1])?o?o.s+(n.s-o.s)*(s-o[a])/(n[a]-o[a]):n.s:o.s)),e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}e.exports=function(t,e){var n=e.xaxis,r=e.yaxis,e=n._id+r._id,i=t._fullLayout._scatterStackOpts[e];if(i){var a,o,s,l,u,c,f,h,d,p,g,y,m,v,b=t.calcdata;for(v in i){var x=(h=i[v]).traceIndices;if(x.length){for(d="interpolate"===h.stackgaps,p=h.groupnorm,y="v"===h.orientation?(g="x","y"):(g="y","x"),m=new Array(x.length),w=0;w<m.length;w++)m[w]=!1;l=b[x[0]];for(var _=new Array(l.length),w=0;w<l.length;w++)_[w]=l[w][g];for(w=1;w<x.length;w++){for(s=b[x[w]],O=a=0;O<s.length;O++){for(u=s[O][g];u>_[a]&&a<_.length;a++)R(s,O,_[a],w,m,d,g),O++;if(u!==_[a]){for(o=0;o<w;o++)R(b[x[o]],a,u,o,m,d,g);_.splice(a,0,u)}a++}for(;a<_.length;a++)R(s,O,_[a],w,m,d,g),O++}var k=_.length;for(O=0;O<l.length;O++){for(c=l[O][y]=l[O].s,w=1;w<x.length;w++)(s=b[x[w]])[0].trace._rawLength=s[0].trace._length,s[0].trace._length=k,c+=s[O].s,s[O][y]=c;if(p)for(f=("fraction"===p?c:c/100)||1,w=0;w<x.length;w++){var M=b[x[w]][O];M[y]/=f,M.sNorm=M.s/f}}for(w=0;w<x.length;w++){var T=(s=b[x[w]])[0].trace,A=L.calcMarkerSize(T,T._rawLength),S=Array.isArray(A);if(A&&m[w]||S)for(var E=A,A=new Array(k),O=0;O<k;O++)A[O]=s[O].gap?0:S?E[s[O].i]:E;var C=new Array(k),P=new Array(k);for(O=0;O<k;O++)C[O]=s[O].x,P[O]=s[O].y;L.calcAxisExpansion(t,T,n,r,C,P,A),s[0].t.orientation=h.orientation}}}}}},{"./calc":578}],583:[function(t,e,n){"use strict";e.exports=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=e-1;0<=i;i--){var a=t[i];if("scatter"===a.type&&a.xaxis===n.xaxis&&a.yaxis===n.yaxis){a.opacity=void 0;break}}}}}},{}],584:[function(t,e,n){"use strict";var s=t("../../lib"),l=t("../../registry"),u=t("./attributes"),c=t("./constants"),f=t("./subtypes"),h=t("./xy_defaults"),d=t("./period_defaults"),p=t("./stack_defaults"),g=t("./marker_defaults"),y=t("./line_defaults"),m=t("./line_shape_defaults"),v=t("./text_defaults"),b=t("./fillcolor_defaults");e.exports=function(n,r,t,e){function i(t,e){return s.coerce(n,r,u,t,e)}var a,o=h(n,r,e,i);o||(r.visible=!1),r.visible&&(d(n,r,e,i),o=!(a=p(n,r,e,i))&&o<c.PTS_LINESONLY?"lines+markers":"lines",i("text"),i("hovertext"),i("mode",o),f.hasLines(r)&&(y(n,r,t,e,i),m(n,r,i),i("connectgaps"),i("line.simplify")),f.hasMarkers(r)&&g(n,r,t,e,i,{gradient:!0}),f.hasText(r)&&(i("texttemplate"),v(n,r,e,i)),o=[],(f.hasMarkers(r)||f.hasText(r))&&(i("cliponaxis"),i("marker.maxdisplayed"),o.push("points")),i("fill",a?a.fillDflt:"none"),"none"!==r.fill&&(b(n,r,t,i),f.hasLines(r)||m(n,r,i)),e=(r.line||{}).color,a=(r.marker||{}).color,"tonext"!==r.fill&&"toself"!==r.fill||o.push("fills"),i("hoveron",o.join("+")||"points"),"fills"!==r.hoveron&&i("hovertemplate"),(o=l.getComponentMethod("errorbars","supplyDefaults"))(n,r,e||a||t,{axis:"y"}),o(n,r,e||a||t,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(r,i))}},{"../../lib":424,"../../registry":525,"./attributes":577,"./constants":581,"./fillcolor_defaults":585,"./line_defaults":590,"./line_shape_defaults":592,"./marker_defaults":596,"./period_defaults":597,"./stack_defaults":600,"./subtypes":602,"./text_defaults":603,"./xy_defaults":604}],585:[function(t,e,n){"use strict";var s=t("../../components/color"),l=t("../../lib").isArrayOrTypedArray;e.exports=function(t,e,n,r){var i,a,o=!1;e.marker&&(i=e.marker.color,a=(e.marker.line||{}).color,i&&!l(i)?o=i:a&&!l(a)&&(o=a)),r("fillcolor",s.addOpacity((e.line||{}).color||o||n,.5))}},{"../../components/color":294,"../../lib":424}],586:[function(t,e,n){"use strict";var a=t("../../plots/cartesian/axes");e.exports=function(t,e,n){var r={},i={_fullLayout:n},n=a.getFromTrace(i,e,"x"),e=a.getFromTrace(i,e,"y");return r.xLabel=a.tickText(n,t.x,!0).text,r.yLabel=a.tickText(e,t.y,!0).text,r}},{"../../plots/cartesian/axes":471}],587:[function(t,e,n){"use strict";var a=t("../../components/color"),o=t("./subtypes");e.exports=function(t,e){var n;if("lines"===t.mode)return(n=t.line.color)&&a.opacity(n)?n:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var r=e.mcc||(t.marker||{}).color,i=e.mlcc||((t.marker||{}).line||{}).color;return(i=r&&a.opacity(r)?r:i&&a.opacity(i)&&(e.mlw||((t.marker||{}).line||{}).width)?i:"")?a.opacity(i)<.3?a.addOpacity(i,.3):i:(n=(t.line||{}).color)&&a.opacity(n)&&o.hasLines(t)&&t.line.width?n:t.fillcolor}},{"../../components/color":294,"./subtypes":602}],588:[function(t,e,n){"use strict";var R=t("../../lib"),j=t("../../components/fx"),N=t("../../registry"),D=t("./get_trace_color"),z=t("../../components/color"),I=R.fillText;e.exports=function(t,e,n,r){var i=t.cd,a=i[0].trace,o=t.xa,s=t.ya,l=o.c2p(e),u=s.c2p(n),c=[l,u],f=a.hoveron||"",h=-1!==a.mode.indexOf("markers")?3:.5;if(-1!==f.indexOf("points")){var d=function(t){var e=Math.max(h,t.mrc||0),n=o.c2p(t.x)-l,t=s.c2p(t.y)-u;return Math.max(Math.sqrt(n*n+t*t)-e,1-h/e)},p=j.getDistanceFunction(r,function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,t=Math.abs(o.c2p(t.x)-l);return t<e?n*t/e:t-e+n},function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,t=Math.abs(s.c2p(t.y)-u);return t<e?n*t/e:t-e+n},d);if(j.getClosest(i,p,t),!1!==t.index){var g=i[t.index],y=o.c2p(g.x,!0),e=s.c2p(g.y,!0),n=g.mrc||1;t.index=g.i;r=i[0].t.orientation,p=r&&(g.sNorm||g.s),i="h"===r?p:void 0!==g.orig_x?g.orig_x:g.x,p="v"===r?p:void 0!==g.orig_y?g.orig_y:g.y;return R.extendFlat(t,{color:D(a,g),x0:y-n,x1:y+n,xLabelVal:i,y0:e-n,y1:e+n,yLabelVal:p,spikeDistance:d(g),hovertemplate:a.hovertemplate}),I(g,a,t),N.getComponentMethod("errorbars","hoverInfo")(g,a,t),[t]}}if(-1!==f.indexOf("fills")&&a._polygons){var m,v,b,x,_,w,k,M=a._polygons,T=[],A=!1,S=1/0,E=-1/0,O=1/0,C=-1/0;for(L=0;L<M.length;L++)(v=M[L]).contains(c)&&(A=!A,T.push(v),O=Math.min(O,v.ymin),C=Math.max(C,v.ymax));if(A){for(var P=((O=Math.max(O,0))+(C=Math.min(C,s._length)))/2,L=0;L<T.length;L++)for(b=T[L].pts,m=1;m<b.length;m++)P<(w=b[m-1][1])!=P<=(k=b[m][1])&&(x=b[m-1][0],_=b[m][0],k-w&&(w=x+(_-x)*(P-w)/(k-w),S=Math.min(S,w),E=Math.max(E,w)));S=Math.max(S,0),E=Math.min(E,o._length);f=z.defaultLine;return z.opacity(a.fillcolor)?f=a.fillcolor:z.opacity((a.line||{}).color)&&(f=a.line.color),R.extendFlat(t,{distance:t.maxHoverDistance,x0:S,x1:E,y0:P,y1:P,color:f,hovertemplate:!1}),delete t.index,a.text&&!Array.isArray(a.text)?t.text=String(a.text):t.text=a.name,[t]}}}},{"../../components/color":294,"../../components/fx":334,"../../lib":424,"../../registry":525,"./get_trace_color":587}],589:[function(t,e,n){"use strict";var r=t("./subtypes");e.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":484,"./arrays_to_calcdata":576,"./attributes":577,"./calc":578,"./cross_trace_calc":582,"./cross_trace_defaults":583,"./defaults":584,"./format_labels":586,"./hover":588,"./marker_colorbar":595,"./plot":598,"./select":599,"./style":601,"./subtypes":602}],590:[function(t,e,n){"use strict";var s=t("../../lib").isArrayOrTypedArray,l=t("../../components/colorscale/helpers").hasColorscale,u=t("../../components/colorscale/defaults");e.exports=function(t,e,n,r,i,a){var o=(t.marker||{}).color;i("line.color",n),l(t,"line")?u(t,e,r,i,{prefix:"line.",cLetter:"c"}):i("line.color",!s(o)&&o||n),i("line.width"),(a||{}).noDash||i("line.dash")}},{"../../components/colorscale/defaults":304,"../../components/colorscale/helpers":305,"../../lib":424}],591:[function(t,e,n){"use strict";var r=t("../../constants/numerical"),at=r.BADNUM,r=r.LOG_CLIP,ot=r+.5,st=r-.5,lt=t("../../lib"),ut=lt.segmentsIntersect,ct=lt.constrain,ft=t("./constants");e.exports=function(r,i){var t,e,n,a,o,s,l,u,c,f,h,d,p,g,y,m,v=i.xaxis,b=i.yaxis,x="log"===v.type,_="log"===b.type,w=v._length,k=b._length,M=i.connectGaps,T=i.baseTolerance,A=i.shape,S="linear"===A,E=i.fill&&"none"!==i.fill,O=[],C=ft.minTolerance,P=r.length,L=new Array(P),R=0;function j(t){var e=r[t];if(!e)return!1;var n=i.linearized?v.l2p(e.x):v.c2p(e.x),t=i.linearized?b.l2p(e.y):b.c2p(e.y);if(n===at){if(x&&(n=v.c2p(e.x,!0)),n===at)return!1;_&&t===at&&(n*=Math.abs(v._m*k*(0<v._m?ot:st)/(b._m*w*(0<b._m?ot:st)))),n*=1e3}if(t===at){if(_&&(t=b.c2p(e.y,!0)),t===at)return!1;t*=1e3}return[n,t]}function N(t,e,n,r){var i=n-t,a=r-e,n=.5-t,r=.5-e,t=i*i+a*a,e=i*n+a*r;if(0<e&&e<t){i=n*a-r*i;return i*i<t?1:void 0}}function D(t,e){var n=t[0]/w,r=t[1]/k,t=Math.max(0,-n,n-1,-r,r-1);return t&&void 0!==y&&N(n,r,y,m)&&(t=0),t&&e&&N(n,r,e[0]/w,e[1]/k)&&(t=0),(1+ft.toleranceGrowth*t)*T}function z(t,e){var n=t[0]-e[0],e=t[1]-e[1];return Math.sqrt(n*n+e*e)}var I,F,B,U,V,H,q,G=ft.maxScreensAway,Y=-w*G,X=w*(1+G),W=-k*G,Z=k*(1+G),K=[[Y,W,X,W],[X,W,X,Z],[X,Z,Y,Z],[Y,Z,Y,W]];function Q(t){if(t[0]<Y||t[0]>X||t[1]<W||t[1]>Z)return[ct(t[0],Y,X),ct(t[1],W,Z)]}function $(t,e){return t[0]===e[0]&&(t[0]===Y||t[0]===X)||t[1]===e[1]&&(t[1]===W||t[1]===Z)}function J(a,o,s){return function(t,e){var n=Q(t),r=Q(e),i=[];if(n&&r&&$(n,r))return i;n&&i.push(n),r&&i.push(r);e=2*lt.constrain((t[a]+e[a])/2,o,s)-((n||t)[a]+(r||e)[a]);return e&&((n&&r?0<e==n[a]>r[a]?n:r:n||r)[a]+=e),i}}function tt(t){var e,n,r=t[0],i=t[1],a=r===L[R-1][0],o=i===L[R-1][1];a&&o||(1<R?(e=r===L[R-2][0],n=i===L[R-2][1],a&&(r===Y||r===X)&&e?n?R--:L[R-1]=t:o&&(i===W||i===Z)&&n?e?R--:L[R-1]=t:L[R++]=t):L[R++]=t)}function et(t){L[R-1][0]!==t[0]&&L[R-1][1]!==t[1]&&tt([B,U]),tt(t),V=null,B=U=0}function nt(t){var e,n,r,i;y=t[0]/w,m=t[1]/k,I=t[0]<Y?Y:t[0]>X?X:0,F=t[1]<W?W:t[1]>Z?Z:0,I||F?(R?V?1<(r=q(V,t)).length&&(et(r[0]),L[R++]=r[1]):(H=q(L[R-1],t)[0],L[R++]=H):L[R++]=[I||t[0],F||t[1]],i=L[R-1],I&&F&&(i[0]!==I||i[1]!==F)?(V&&(B!==I&&U!==F?tt(B&&U?(e=V,r=(n=t)[0]-e[0],i=(n[1]-e[1])/r,0<(e[1]*n[0]-n[1]*e[0])/r?[0<i?Y:X,Z]:[0<i?X:Y,W]):[B||I,U||F]):B&&U&&tt([B,U])),tt([I,F])):B-I&&U-F&&tt([I||B,F||U]),V=t,B=I,U=F):(V&&et(q(V,t)[0]),L[R++]=t)}for("linear"===A||"spline"===A?q=function(t,e){for(var n=[],r=0,i=0;i<4;i++){var a=K[i],a=ut(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);a&&(!r||1<Math.abs(a.x-n[0][0])||1<Math.abs(a.y-n[0][1]))&&(a=[a.x,a.y],r&&z(a,t)<z(n[0],t)?n.unshift(a):n.push(a),r++)}return n}:"hv"===A||"vh"===A?q=function(t,e){var n=[],t=Q(t),e=Q(e);return t&&e&&$(t,e)||(t&&n.push(t),e&&n.push(e)),n}:"hvh"===A?q=J(0,Y,X):"vhv"===A&&(q=J(1,W,Z)),t=0;t<P;t++)if(e=j(t)){for(R=0,V=null,nt(e),t++;t<P;t++){if(!(a=j(t))){if(M)continue;break}if(S&&i.simplify){var rt=j(t+1),it=z(a,e);if(E&&(0===R||R===P-1)||!(it<D(a,rt)*C)){for(o=e,c=it,l=!(u=[(a[f=d=p=0]-e[0])/it,(a[1]-e[1])/it]),n=a,t++;t<r.length;t++){if(s=rt,rt=j(t+1),!s){if(M)continue;break}if(g=(h=[s[0]-e[0],s[1]-e[1]])[0]*u[1]-h[1]*u[0],d=Math.min(d,g),(p=Math.max(p,g))-d>D(s,rt))break;n=s,c<(h=h[0]*u[0]+h[1]*u[1])?(c=h,a=s,l=!1):h<f&&(f=h,o=s,l=!0)}if(l?(nt(a),n!==o&&nt(o)):(o!==e&&nt(o),n!==a&&nt(a)),nt(n),t>=r.length||!s)break;nt(s),e=s}}else nt(a)}V&&tt([B||V[0],U||V[1]]),O.push(L.slice(0,R))}return O}},{"../../constants/numerical":402,"../../lib":424,"./constants":581}],592:[function(t,e,n){"use strict";e.exports=function(t,e,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],593:[function(t,e,n){"use strict";var g={tonextx:1,tonexty:1,tonext:1};e.exports=function(t,e,n){for(var r,i,a,o,s={},l=!1,u=-1,c=0,f=-1,h=0;h<n.length;h++)(i=(r=n[h][0].trace).stackgroup||"")?i in s?o=s[i]:(o=s[i]=c,c++):r.fill in g&&0<=f?o=f:(o=f=c,c++),o<u&&(l=!0),r._groupIndex=u=o;var d=n.slice();l&&d.sort(function(t,e){t=t[0].trace,e=e[0].trace;return t._groupIndex-e._groupIndex||t.index-e.index});var p={};for(h=0;h<d.length;h++)i=(r=d[h][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in g&&(a=p[i],r._prevtrace=a||null,a&&(a._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),p[i]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return d}},{}],594:[function(t,e,n){"use strict";var i=t("fast-isnumeric");e.exports=function(t){var t=t.marker,e=t.sizeref||1,n=t.sizemin||0,r="area"===t.sizemode?function(t){return Math.sqrt(t/e)}:function(t){return t/e};return function(t){t=r(t/2);return i(t)&&0<t?Math.max(t,n):0}}},{"fast-isnumeric":99}],595:[function(t,e,n){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},{}],596:[function(t,e,n){"use strict";var l=t("../../components/color"),u=t("../../components/colorscale/helpers").hasColorscale,c=t("../../components/colorscale/defaults"),f=t("./subtypes");e.exports=function(t,e,n,r,i,a){var o=f.isBubble(t),s=(t.line||{}).color;a=a||{},s&&(n=s),i("marker.symbol"),i("marker.opacity",o?.7:1),i("marker.size"),i("marker.color",n),u(t,"marker")&&c(t,e,r,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&e.marker.color!==s?s:o?l.background:l.defaultLine),u(t,"marker.line")&&c(t,e,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",o?1:0)),o&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},{"../../components/color":294,"../../components/colorscale/defaults":304,"../../components/colorscale/helpers":305,"./subtypes":602}],597:[function(t,e,n){"use strict";var r=t("../../lib").dateTick0,i=t("../../constants/numerical").ONEWEEK;function o(t,e){return r(e,t%i==0?1:0)}e.exports=function(t,e,n,r,i){var a;!(i=i||{x:!0,y:!0}).x||(a=r("xperiod"))&&(r("xperiod0",o(a,e.xcalendar)),r("xperiodalignment")),!i.y||(i=r("yperiod"))&&(r("yperiod0",o(i,e.ycalendar)),r("yperiodalignment"))}},{"../../constants/numerical":402,"../../lib":424}],598:[function(t,e,n){"use strict";var V=t("d3"),H=t("../../registry"),q=t("../../lib"),G=q.ensureSingle,Y=q.identity,X=t("../../components/drawing"),W=t("./subtypes"),Z=t("./line_points"),h=t("./link_traces"),K=t("../../lib/polygon").tester;function d(h,t,d,n,e,r,i){var a,o,s,l,u,c,f;o=t,w=n,_=e,t=(x=d).xaxis,x=x.yaxis,c=V.extent(q.simpleMap(t.range,t.r2c)),f=V.extent(q.simpleMap(x.range,x.r2c)),t=w[0].trace,W.hasMarkers(t)&&0!==(x=t.marker.maxdisplayed)&&(t=w.filter(function(t){return t.x>=c[0]&&t.x<=c[1]&&t.y>=f[0]&&t.y<=f[1]}),s=Math.ceil(t.length/x),l=0,_.forEach(function(t,e){t=t[0].trace;W.hasMarkers(t)&&0<t.marker.maxdisplayed&&e<o&&l++}),u=Math.round(l*s/3+Math.floor(l/3)*s/7.1),w.forEach(function(t){delete t.vis}),t.forEach(function(t,e){0===Math.round((e+u)%s)&&(t.vis=!0)}));var p=!!i&&0<i.duration;function g(t){return p?t.transition():t}var y=d.xaxis,m=d.yaxis,v=n[0].trace,b=v.line,e=V.select(r),x=G(e,"g","errorbars"),_=G(e,"g","lines"),w=G(e,"g","points"),t=G(e,"g","text");if(H.getComponentMethod("errorbars","plot")(h,x,d,i),!0===v.visible){g(e).style("opacity",v.opacity);var k=v.fill.charAt(v.fill.length-1);"x"!==k&&"y"!==k&&(k=""),n[0][d.isRangePlot?"nodeRangePlot3":"node3"]=e;var M,T,r="",x=[],i=v._prevtrace;i&&(r=i._prevRevpath||"",N=i._nextFill,x=i._polygons);var A,S,E,O,C,P,L="",R="",j=[],e=q.noop,i=v._ownFill;if(W.hasLines(v)||"none"!==v.fill){for(N&&N.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(b.shape)?(A=X.steps(b.shape),S=X.steps(b.shape.split("").reverse().join(""))):A=S="spline"===b.shape?function(t){var e=t[t.length-1];return 1<t.length&&t[0][0]===e[0]&&t[0][1]===e[1]?X.smoothclosed(t.slice(1),b.smoothing):X.smoothopen(t,b.smoothing)}:function(t){return"M"+t.join("L")},E=function(t){return S(t.reverse())},j=Z(n,{xaxis:y,yaxis:m,connectGaps:v.connectgaps,baseTolerance:Math.max(b.width||1,3)/4,shape:b.shape,simplify:b.simplify,fill:v.fill}),P=v._polygons=new Array(j.length),a=0;a<j.length;a++)v._polygons[a]=K(j[a]);j.length&&(O=j[0][0],C=(C=j[j.length-1])[C.length-1]),e=function(e){return function(t){M=A(t),T=E(t),R=L?k?(L+="L"+M.substr(1),T+("L"+R.substr(1))):(L+="Z"+M,T+"Z"+R):(L=M,T),W.hasLines(v)&&1<t.length&&((t=V.select(this)).datum(n),e?g(t.style("opacity",0).attr("d",M).call(X.lineGroupStyle)).style("opacity",1):((t=g(t)).attr("d",M),X.singleLineStyle(n,t)))}}}_=_.selectAll(".js-line").data(j);g(_.exit()).style("opacity",0).remove(),_.each(e(!1)),_.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(X.lineGroupStyle).each(e(!0)),X.setClipUrl(_,d.layerClipId,h),j.length?(i?(i.datum(n),O&&C&&(k?("y"===k?O[1]=C[1]=m.c2p(0,!0):"x"===k&&(O[0]=C[0]=y.c2p(0,!0)),g(i).attr("d","M"+C+"L"+O+"L"+L.substr(1)).call(X.singleFillStyle)):g(i).attr("d",L+"Z").call(X.singleFillStyle))):N&&("tonext"===v.fill.substr(0,6)&&L&&r?(("tonext"===v.fill?g(N).attr("d",L+"Z"+r+"Z"):g(N).attr("d",L+"L"+r.substr(1)+"Z")).call(X.singleFillStyle),v._polygons=v._polygons.concat(x)):(D(N),v._polygons=null)),v._prevRevpath=R,v._prevPolygons=P):(i?D(i):N&&D(N),v._polygons=v._prevRevpath=v._prevPolygons=null),w.datum(n),t.datum(n),function(t,e,n){var r,i,a=n[0].trace,o=W.hasMarkers(a),s=W.hasText(a),l=function(t){if(t.ids)return B}(a),u=U,c=U;(o||s)&&(r=Y,n=(i=a.stackgroup)&&"infer zero"===h._fullLayout._scatterStackOpts[y._id+m._id][i].stackgaps,a.marker.maxdisplayed||a._needsCull?r=n?I:z:i&&!n&&(r=F),o&&(u=r),s&&(c=r));var f,u=(t=t.selectAll("path.point").data(u,l)).enter().append("path").classed("point",!0);p&&u.call(X.pointStyle,a,h).call(X.translatePoints,y,m).style("opacity",0).transition().style("opacity",1),t.order(),o&&(f=X.makePointStyleFns(a)),t.each(function(t){var e=V.select(this),n=g(e);X.translatePoint(t,n,y,m)?(X.singlePointStyle(t,n,a,f,h),d.layerClipId&&X.hideOutsideRangePoint(t,n,y,m,a.xcalendar,a.ycalendar),a.customdata&&e.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):n.remove()}),(p?t.exit().transition().style("opacity",0):t.exit()).remove(),(t=e.selectAll("g").data(c,l)).enter().append("g").classed("textpoint",!0).append("text"),t.order(),t.each(function(t){var e=V.select(this),n=g(e.select("text"));X.translatePoint(t,n,y,m)?d.layerClipId&&X.hideOutsideRangePoint(t,e,y,m,a.xcalendar,a.ycalendar):e.remove()}),t.selectAll("text").call(X.textPointStyle,a,h).each(function(t){var e=y.c2p(t.x),n=m.c2p(t.y);V.select(this).selectAll("tspan.line").each(function(){g(V.select(this)).attr({x:e,y:n})})}),t.exit().remove()}(w,t,n);var N=!1===v.cliponaxis?null:d.layerClipId;X.setClipUrl(w,N,h),X.setClipUrl(t,N,h)}function D(t){g(t).attr("d","M0,0Z")}function z(t){return t.filter(function(t){return!t.gap&&t.vis})}function I(t){return t.filter(function(t){return t.vis})}function F(t){return t.filter(function(t){return!t.gap})}function B(t){return t.id}function U(){return!1}}e.exports=function(n,r,t,e,i,a){var o,s,l,u=!i,c=!!i&&0<i.duration,f=h(n,r,t),t=e.selectAll("g.trace").data(f,function(t){return t[0].trace.uid});t.enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),t.order(),s=n,l=r,t.each(function(t){var e=G(V.select(this),"g","fills");X.setClipUrl(e,l.layerClipId,s);var n=t[0].trace,t=[];n._ownfill&&t.push("_ownFill"),n._nexttrace&&t.push("_nextFill");t=e.selectAll("g").data(t,Y);t.enter().append("g"),t.exit().each(function(t){n[t]=null}).remove(),t.order().each(function(t){n[t]=G(V.select(this),"path","js-fill")})}),c?(a&&(o=a()),V.transition().duration(i.duration).ease(i.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){e.selectAll("g.trace").each(function(t,e){d(n,e,r,t,f,this,i)})})):t.each(function(t,e){d(n,e,r,t,f,this,i)}),u&&t.exit().remove(),e.selectAll("path:not([d])").remove()}},{"../../components/drawing":316,"../../lib":424,"../../lib/polygon":436,"../../registry":525,"./line_points":591,"./link_traces":593,"./subtypes":602,d3:277}],599:[function(t,e,n){"use strict";var f=t("./subtypes");e.exports=function(t,e){var n,r,i,a,o=t.cd,s=t.xaxis,l=t.yaxis,u=[],c=o[0].trace;if(!f.hasMarkers(c)&&!f.hasText(c))return[];if(!1===e)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)r=o[n],i=s.c2p(r.x),a=l.c2p(r.y),null!==r.i&&e.contains([i,a],!1,n,t)?(u.push({pointNumber:r.i,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return u}},{"./subtypes":602}],600:[function(t,e,n){"use strict";var m=["orientation","groupnorm","stackgaps"];e.exports=function(t,e,n,r){var i=n._scatterStackOpts,a=r("stackgroup");if(a){var o=e.xaxis+e.yaxis,n=i[o],s=(n=n||(i[o]={}))[a],l=!1;s?s.traces.push(e):(s=n[a]={traceIndices:[],traces:[e]},l=!0);for(var u={orientation:e.x&&!e.y?"h":"v"},c=0;c<m.length;c++){var f=m[c],h=f+"Found";if(!s[h]){var d=void 0!==t[f],p="orientation"===f;if((d||l)&&(s[f]=r(f,u[f]),p&&(s.fillDflt="h"===s[f]?"tonextx":"tonexty"),d&&(s[h]=!0,!l&&(delete s.traces[0][f],p))))for(var g=0;g<s.traces.length-1;g++){var y=s.traces[g];y._input.fill!==y.fill&&(y.fill=s.fillDflt)}}}return s}}},{}],601:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/drawing"),a=t("../../registry");function o(t,e,n){i.pointStyle(t.selectAll("path.point"),e,n)}function s(t,e,n){i.textPointStyle(t.selectAll("text"),e,n)}e.exports={style:function(e){var t=r.select(e).selectAll("g.trace.scatter");t.style("opacity",function(t){return t[0].trace.opacity}),t.selectAll("g.points").each(function(t){o(r.select(this),t.trace||t[0].trace,e)}),t.selectAll("g.text").each(function(t){s(r.select(this),t.trace||t[0].trace,e)}),t.selectAll("g.trace path.js-line").call(i.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),a.getComponentMethod("errorbars","style")(t)},stylePoints:o,styleText:s,styleOnSelect:function(t,e,n){(e=e[0].trace).selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),e),i.selectedTextStyle(n.selectAll("text"),e)):(o(n,e,t),s(n,e,t))}}},{"../../components/drawing":316,"../../registry":525,d3:277}],602:[function(t,e,n){"use strict";var r=t("../../lib");e.exports={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return r.isPlainObject(t.marker)&&r.isArrayOrTypedArray(t.marker.size)}}},{"../../lib":424}],603:[function(t,e,n){"use strict";var a=t("../../lib");e.exports=function(t,e,n,r,i){i=i||{},r("textposition"),a.coerceFont(r,"textfont",n.font),i.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":424}],604:[function(t,e,n){"use strict";var s=t("../../lib"),l=t("../../registry");e.exports=function(t,e,n,r){var i,a=r("x"),o=r("y");if(l.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],n),a){a=s.minRowLength(a);o?i=Math.min(a,s.minRowLength(o)):(i=a,r("y0"),r("dy"))}else{if(!o)return 0;i=s.minRowLength(o),r("x0"),r("dx")}return e._length=i}},{"../../lib":424,"../../registry":525}],605:[function(t,e,n){"use strict";var V=t("../../lib"),p=t("../../components/colorscale/calc");function g(t){var e,n,r,i,a,o,s,l,u=t._x,c=t._y,f=t._z,h=t._len,d=-1/0,p=1/0,g=-1/0,y=1/0,m=-1/0,v=1/0,b="";for(h&&(o=u[0],s=c[0],l=f[0]),1<h&&(k=u[h-1],M=c[h-1],T=f[h-1]),z=0;z<h;z++)d=Math.max(d,u[z]),p=Math.min(p,u[z]),g=Math.max(g,c[z]),y=Math.min(y,c[z]),m=Math.max(m,f[z]),v=Math.min(v,f[z]),r||u[z]===o||(r=!0,b+="x"),i||c[z]===s||(i=!0,b+="y"),a||f[z]===l||(a=!0,b+="z");r||(b+="x"),i||(b+="y"),a||(b+="z");var x=H(t._x),_=H(t._y),w=H(t._z);b=(b=(b=b.replace("x",(k<o?"-":"+")+"x")).replace("y",(M<s?"-":"+")+"y")).replace("z",(T<l?"-":"+")+"z");t=function(){h=0,x=[],_=[],w=[]};(!h||h<x.length*_.length*w.length)&&t();for(var k=function(t){return"x"===t?u:"y"===t?c:f},M=function(t){return"x"===t?x:"y"===t?_:w},T=function(t){return t[h-1]<t[0]?-1:1},A=k(b[1]),S=k(b[3]),E=k(b[5]),O=M(b[1]).length,C=M(b[3]).length,P=M(b[5]).length,L=!1,R=function(t,e,n){return O*(C*t+e)+n},j=T(k(b[1])),N=T(k(b[3])),D=T(k(b[5])),z=0;z<P-1;z++){for(e=0;e<C-1;e++){for(n=0;n<O-1;n++){var I=R(z,e,n),F=R(z,e,n+1),B=R(z,e+1,n),U=R(z+1,e,n);if(A[I]*j<A[F]*j&&S[I]*N<S[B]*N&&E[I]*D<E[U]*D||(L=!0),L)break}if(L)break}if(L)break}return L&&(V.warn("Encountered arbitrary coordinates! Unable to input data grid."),t()),{xMin:p,yMin:y,zMin:v,xMax:d,yMax:g,zMax:m,Xs:x,Ys:_,Zs:w,len:h,fill:b}}function H(t){return V.distinctVals(t).vals}function y(t,e){if(void 0===e&&(e=t.length),V.isTypedArray(t))return t.subarray(0,e);for(var n=[],r=0;r<e;r++)n[r]=+t[r];return n}e.exports={calc:function(t,e){e._len=Math.min(e.u.length,e.v.length,e.w.length,e.x.length,e.y.length,e.z.length),e._u=y(e.u,e._len),e._v=y(e.v,e._len),e._w=y(e.w,e._len),e._x=y(e.x,e._len),e._y=y(e.y,e._len),e._z=y(e.z,e._len);var n=g(e);e._gridFill=n.fill,e._Xs=n.Xs,e._Ys=n.Ys,e._Zs=n.Zs,e._len=n.len;var r,i,a,o=0;e.starts&&(r=y(e.starts.x||[]),i=y(e.starts.y||[]),a=y(e.starts.z||[]),o=Math.min(r.length,i.length,a.length)),e._startsX=r||[],e._startsY=i||[],e._startsZ=a||[];for(var s=0,l=1/0,u=0;u<e._len;u++)var c=e._u[u],f=e._v[u],h=e._w[u],h=Math.sqrt(c*c+f*f+h*h),s=Math.max(s,h),l=Math.min(l,h);for(p(t,e,{vals:[l,s],containerStr:"",cLetter:"c"}),u=0;u<o;u++){var d=r[u];n.xMax=Math.max(n.xMax,d),n.xMin=Math.min(n.xMin,d);d=i[u];n.yMax=Math.max(n.yMax,d),n.yMin=Math.min(n.yMin,d);d=a[u];n.zMax=Math.max(n.zMax,d),n.zMin=Math.min(n.zMin,d)}e._slen=o,e._normMax=s,e._xbnds=[n.xMin,n.xMax],e._ybnds=[n.yMin,n.yMax],e._zbnds=[n.zMin,n.zMax]},filter:y,processGrid:g}},{"../../components/colorscale/calc":302,"../../lib":424}],606:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../components/colorscale/attributes"),a=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/attributes"),s=t("../../lib/extend").extendFlat,t=t("../../plot_api/edit_types").overrideAll;function l(){return{valType:"boolean",dflt:!1}}function u(){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:l(),y:l(),z:l()},color:{valType:"color",dflt:r.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:r.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}o=e.exports=t(s({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},i("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:u(),y:u(),z:u()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:s({},i.zauto,{}),zmin:s({},i.zmin,{}),zmax:s({},i.zmax,{})},hoverinfo:s({},o.hoverinfo),showlegend:s({},o.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},{"../../components/color":294,"../../components/colorscale/attributes":301,"../../lib/extend":417,"../../plot_api/edit_types":453,"../../plots/attributes":467,"../../plots/template_attributes":524}],607:[function(t,e,n){"use strict";n.version="1.58.2"},{}],608:[function(t,e,n){arguments[4][101][0].apply(n,arguments)},{dup:101}],609:[function(t,e,n){"use strict";e.exports=function(t){for(var e=t.length,n=[],r=[],i=0;i<e;++i)for(var a=t[i],o=a.length,s=o-1,l=0;l<o;s=l++){var u=a[s],c=a[l];(u[0]===c[0]?r:n).push([u,c])}if(0===n.length)return 0===r.length?y:function(e){return function(t){return e(t[0],t[1])?0:1}}(g(r));var f=d(n),f=function(o,s){return function(t){var e=p.le(s,t[0]);if(e<0)return 1;var n=o[e];if(!n){if(!(0<e&&s[e]===t[0]))return 1;n=o[e-1]}for(var r=1;n;){var i=n.key,a=h(t,i[0],i[1]);if(i[0][0]<i[1][0])if(a<0)n=n.left;else{if(!(0<a))return 0;r=-1,n=n.right}else if(0<a)n=n.left;else{if(!(a<0))return 0;r=1,n=n.right}}return r}}(f.slabs,f.coordinates);return 0===r.length?f:function(e,n){return function(t){return e(t[0],t[1])?0:n(t)}}(g(r),f)};var h=t("robust-orientation")[3],d=t("slab-decomposition"),c=t("interval-tree-1d"),p=t("binary-search-bounds");function f(){return!0}function g(t){for(var e={},n=0;n<t.length;++n){var r=t[n],i=r[0][0],a=r[0][1],r=r[1][1],r=[Math.min(a,r),Math.max(a,r)];i in e?e[i].push(r):e[i]=[r]}for(var o,s={},l=Object.keys(e),n=0;n<l.length;++n){var u=e[l[n]];s[l[n]]=c(u)}return o=s,function(t,e){t=o[t];return!!t&&!!t.queryPoint(e,f)}}function y(t){return 1}},{"binary-search-bounds":608,"interval-tree-1d":199,"robust-orientation":633,"slab-decomposition":648}],610:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,a=t("./lib/build-log"),o=t("./lib/epsilon"),s=t("./lib/intersecter"),l=t("./lib/segment-chainer"),u=t("./lib/segment-selector"),c=t("./lib/geojson"),f=!1,h=o();function d(t,e,n){t=i.segments(t),e=i.segments(e),e=n(i.combine(t,e));return i.polygon(e)}i={buildLog:function(t){return!0===t?f=a():!1===t&&(f=!1),!1!==f&&f.list},epsilon:function(t){return h.epsilon(t)},segments:function(t){var e=s(!0,h,f);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:s(!1,h,f).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:u.union(t.combined,f),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:u.intersect(t.combined,f),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:u.difference(t.combined,f),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:u.differenceRev(t.combined,f),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:u.xor(t.combined,f),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:l(t.segments,h,f),inverted:t.inverted}},polygonFromGeoJSON:function(t){return c.toPolygon(i,t)},polygonToGeoJSON:function(t){return c.fromPolygon(i,h,t)},union:function(t,e){return d(t,e,i.selectUnion)},intersect:function(t,e){return d(t,e,i.selectIntersect)},difference:function(t,e){return d(t,e,i.selectDifference)},differenceRev:function(t,e){return d(t,e,i.selectDifferenceRev)},xor:function(t,e){return d(t,e,i.selectXor)}},"object"===("undefined"==typeof window?"undefined":r(window))&&(window.PolyBool=i),e.exports=i},{"./lib/build-log":611,"./lib/epsilon":612,"./lib/geojson":613,"./lib/intersecter":614,"./lib/segment-chainer":616,"./lib/segment-selector":617}],611:[function(t,e,n){"use strict";e.exports=function(){var n,t=0,e=!1;function r(t,e){return n.list.push({type:t,data:e?JSON.parse(JSON.stringify(e)):void 0}),n}return n={list:[],segmentId:function(){return t++},checkIntersection:function(t,e){return r("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return r("div_seg",{seg:t,pt:e}),r("chop",{seg:t,pt:e})},statusRemove:function(t){return r("pop_seg",{seg:t})},segmentUpdate:function(t){return r("seg_update",{seg:t})},segmentNew:function(t,e){return r("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return r("rem_seg",{seg:t})},tempStatus:function(t,e,n){return r("temp_status",{seg:t,above:e,below:n})},rewind:function(t){return r("rewind",{seg:t})},status:function(t,e,n){return r("status",{seg:t,above:e,below:n})},vert:function(t){return t===e?n:r("vert",{x:e=t})},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),r("log",{txt:t})},reset:function(){return r("reset")},selected:function(t){return r("selected",{segs:t})},chainStart:function(t){return r("chain_start",{seg:t})},chainRemoveHead:function(t,e){return r("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return r("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return r("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return r("chain_match",{index:t})},chainClose:function(t){return r("chain_close",{index:t})},chainAddHead:function(t,e){return r("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return r("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return r("chain_con",{index1:t,index2:e})},chainReverse:function(t){return r("chain_rev",{index:t})},chainJoin:function(t,e){return r("chain_join",{index1:t,index2:e})},done:function(){return r("done")}}}},{}],612:[function(t,e,n){"use strict";e.exports=function(c){"number"!=typeof c&&(c=1e-10);var n={epsilon:function(t){return"number"==typeof t&&(c=t),c},pointAboveOrOnLine:function(t,e,n){var r=e[0],i=e[1],a=n[0],e=n[1],n=t[0],t=t[1];return-c<=(a-r)*(t-i)-(e-i)*(n-r)},pointBetween:function(t,e,n){var r=t[1]-e[1],i=n[0]-e[0],t=t[0]-e[0],e=n[1]-e[1],r=t*i+r*e;return!(r<c)&&!(-c<r-(i*i+e*e))},pointsSameX:function(t,e){return Math.abs(t[0]-e[0])<c},pointsSameY:function(t,e){return Math.abs(t[1]-e[1])<c},pointsSame:function(t,e){return n.pointsSameX(t,e)&&n.pointsSameY(t,e)},pointsCompare:function(t,e){return n.pointsSameX(t,e)?n.pointsSameY(t,e)?0:t[1]<e[1]?-1:1:t[0]<e[0]?-1:1},pointsCollinear:function(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],t=e[0]-n[0],n=e[1]-n[1];return Math.abs(r*n-t*i)<c},linesIntersect:function(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1],o=r[0]-n[0],s=r[1]-n[1],e=i*s-a*o;if(Math.abs(e)<c)return!1;r=t[0]-n[0],n=t[1]-n[1],s=(o*n-s*r)/e,e=(i*n-a*r)/e,a={alongA:0,alongB:0,pt:[t[0]+s*i,t[1]+s*a]};return a.alongA=s<=-c?-2:s<c?-1:s-1<=-c?0:s-1<c?1:2,a.alongB=e<=-c?-2:e<c?-1:e-1<=-c?0:e-1<c?1:2,a},pointInsideRegion:function(t,e){for(var n=t[0],r=t[1],i=e[e.length-1][0],a=e[e.length-1][1],o=!1,s=0;s<e.length;s++){var l=e[s][0],u=e[s][1];c<u-r!=c<a-r&&c<(i-l)*(r-u)/(a-u)+l-n&&(o=!o),i=l,a=u}return o}};return n}},{}],613:[function(t,e,n){"use strict";var r={toPolygon:function(i,t){function e(t){if(t.length<=0)return i.segments({inverted:!1,regions:[]});function e(t){t=t.slice(0,t.length-1);return i.segments({inverted:!1,regions:[t]})}for(var n=e(t[0]),r=1;r<t.length;r++)n=i.selectDifference(i.combine(n,e(t[r])));return n}if("Polygon"===t.type)return i.polygon(e(t.coordinates));if("MultiPolygon"!==t.type)throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");for(var n=i.segments({inverted:!1,regions:[]}),r=0;r<t.coordinates.length;r++)n=i.selectUnion(i.combine(n,e(t.coordinates[r])));return i.polygon(n)},fromPolygon:function(t,n,e){function o(t,e){return n.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],e)}function s(t){return{region:t,children:[]}}e=t.polygon(t.segments(e));var r=s(null);for(var i=0;i<e.regions.length;i++){var a=e.regions[i];a.length<3||!function t(e,n){for(var r=0;r<e.children.length;r++)if(o(n,(i=e.children[r]).region))return void t(i,n);for(var i,a=s(n),r=0;r<e.children.length;r++)o((i=e.children[r]).region,n)&&(a.children.push(i),e.children.splice(r,1),r--);e.children.push(a)}(r,a)}function l(t,e){for(var n=0,r=t[t.length-1][0],i=t[t.length-1][1],a=[],o=0;o<t.length;o++){var s=t[o][0],l=t[o][1];a.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==e&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var u=[];function c(t){var e=[l(t.region,!1)];u.push(e);for(var n=0;n<t.children.length;n++)e.push(function(t){for(var e=0;e<t.children.length;e++)c(t.children[e]);return l(t.region,!0)}(t.children[n]))}for(i=0;i<r.children.length;i++)c(r.children[i]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};e.exports=r},{}],614:[function(t,e,n){"use strict";var m=t("./linked-list");e.exports=function(h,d,p){function i(t,e,n){return{id:p?p.segmentId():-1,start:t,end:e,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var g=m.create();function a(o,s){g.insertBefore(o,function(t){var e,n,r,i,a;return(e=o.isStart,n=o.pt,r=s,i=t.isStart,a=t.pt,t=t.other.pt,0!==(n=d.pointsCompare(n,a))?n:d.pointsSame(r,t)?0:e!==i?e?1:-1:d.pointAboveOrOnLine(r,i?a:t,i?t:a)?1:-1)<0})}function o(t,e){var n,r,n=(n=t,r=e,a(r=m.node({isStart:!0,pt:n.start,seg:n,primary:r,other:null,status:null}),n.end),r);return r=n,t=t,e=e,e=m.node({isStart:!1,pt:t.end,seg:t,primary:e,other:r,status:null}),a(r.other=e,r.pt),n}function y(t,e){var n,r=i(e,t.seg.end,t.seg);return n=t,e=e,p&&p.segmentChop(n.seg,e),n.other.remove(),n.seg.end=e,n.other.pt=e,a(n.other,n.pt),o(r,t.primary)}function s(t,e){var n=m.create();function r(i){return n.findTransition(function(t){var e,n,r;return 0<(e=i,n=t.ev,r=e.seg.start,t=e.seg.end,e=n.seg.start,n=n.seg.end,d.pointsCollinear(r,e,n)?d.pointsCollinear(t,e,n)||d.pointAboveOrOnLine(t,e,n)?1:-1:d.pointAboveOrOnLine(r,e,n)?1:-1)})}function i(t,e){var n=t.seg,r=e.seg,i=n.start,a=n.end,o=r.start,s=r.end;p&&p.checkIntersection(n,r);var l=d.linesIntersect(i,a,o,s);if(!1===l){if(!d.pointsCollinear(i,a,o))return!1;if(d.pointsSame(i,s)||d.pointsSame(a,o))return!1;var u=d.pointsSame(i,o),c=d.pointsSame(a,s);if(u&&c)return e;n=!u&&d.pointBetween(i,o,s),r=!c&&d.pointBetween(a,o,s);if(u)return r?y(e,a):y(t,s),e;n&&(c||(r?y(e,a):y(t,s)),y(e,i))}else 0===l.alongA&&(-1===l.alongB?y(t,o):0===l.alongB?y(t,l.pt):1===l.alongB&&y(t,s)),0===l.alongB&&(-1===l.alongA?y(e,i):0===l.alongA?y(e,l.pt):1===l.alongA&&y(e,a));return!1}for(var a=[];!g.isEmpty();){var o=g.getHead();if(p&&p.vert(o.pt[0]),o.isStart){p&&p.segmentNew(o.seg,o.primary);var s=r(o),l=s.before?s.before.ev:null,u=s.after?s.after.ev:null;p&&p.tempStatus(o.seg,!!l&&l.seg,!!u&&u.seg);var c,f=function(){if(l){var t=i(o,l);if(t)return t}return!!u&&i(o,u)}();if(f&&(h?(c=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below)&&(f.seg.myFill.above=!f.seg.myFill.above):f.seg.otherFill=o.seg.myFill,p&&p.segmentUpdate(f.seg),o.other.remove(),o.remove()),g.getHead()!==o){p&&p.rewind(o.seg);continue}h?(c=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below,o.seg.myFill.below=u?u.seg.myFill.above:t,o.seg.myFill.above=c?!o.seg.myFill.below:o.seg.myFill.below):null===o.seg.otherFill&&(f=u?(o.primary===u.primary?u.seg.otherFill:u.seg.myFill).above:o.primary?e:t,o.seg.otherFill={above:f,below:f}),p&&p.status(o.seg,!!l&&l.seg,!!u&&u.seg),o.other.status=s.insert(m.node({ev:o}))}else{s=o.status;if(null===s)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");n.exists(s.prev)&&n.exists(s.next)&&i(s.prev.ev,s.next.ev),p&&p.statusRemove(s.ev.seg),s.remove(),o.primary||(s=o.seg.myFill,o.seg.myFill=o.seg.otherFill,o.seg.otherFill=s),a.push(o.seg)}g.getHead().remove()}return p&&p.done(),a}return h?{addRegion:function(t){for(var e,n,r=t[t.length-1],i=0;i<t.length;i++){n=r,r=t[i];var a=d.pointsCompare(n,r);0!==a&&o((e=a<0?n:r,n=a<0?r:n,{id:p?p.segmentId():-1,start:e,end:n,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return s(t,!1)}}:{calculate:function(t,e,n,r){return t.forEach(function(t){o(i(t.start,t.end,t),!0)}),n.forEach(function(t){o(i(t.start,t.end,t),!1)}),s(e,r)}}}},{"./linked-list":615}],615:[function(t,e,n){"use strict";e.exports={create:function(){var i={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==i.root},isEmpty:function(){return null===i.root.next},getHead:function(){return i.root.next},insertBefore:function(t,e){for(var n=i.root,r=i.root.next;null!==r;){if(e(r))return t.prev=r.prev,(t.next=r).prev.next=t,void(r.prev=t);r=(n=r).next}(n.next=t).prev=n,t.next=null},findTransition:function(t){for(var e=i.root,n=i.root.next;null!==n&&!t(n);)n=(e=n).next;return{before:e===i.root?null:e,after:n,insert:function(t){return t.prev=e,t.next=n,e.next=t,null!==n&&(n.prev=t),t}}}};return i},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}}},{}],616:[function(t,e,n){"use strict";e.exports=function(t,b,x){var _=[],w=[];return t.forEach(function(t){var e=t.start,n=t.end;if(b.pointsSame(e,n))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{x&&x.chainStart(t);for(var r={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},a=r,o=0;o<_.length;o++){var s=(h=_[o])[0],l=(h[1],h[h.length-1]);h[h.length-2];if(b.pointsSame(s,e)){if(y(o,!0,!0))break}else if(b.pointsSame(s,n)){if(y(o,!0,!1))break}else if(b.pointsSame(l,e)){if(y(o,!1,!0))break}else if(b.pointsSame(l,n)&&y(o,!1,!1))break}if(a===r)return _.push([e,n]),void(x&&x.chainNew(e,n));if(a===i){x&&x.chainMatch(r.index);var u=r.index,c=r.matches_pt1?n:e,f=r.matches_head,h=_[u],d=f?h[0]:h[h.length-1],p=f?h[1]:h[h.length-2],g=f?h[h.length-1]:h[0],t=f?h[h.length-2]:h[1];return(b.pointsCollinear(p,d,c)&&(f?(x&&x.chainRemoveHead(r.index,c),h.shift()):(x&&x.chainRemoveTail(r.index,c),h.pop()),d=p),b.pointsSame(g,c))?(_.splice(u,1),b.pointsCollinear(t,g,d)&&(f?(x&&x.chainRemoveTail(r.index,d),h.pop()):(x&&x.chainRemoveHead(r.index,d),h.shift())),x&&x.chainClose(r.index),void w.push(h)):void(f?(x&&x.chainAddHead(r.index,c),h.unshift(c)):(x&&x.chainAddTail(r.index,c),h.push(c)))}d=r.index,f=i.index;x&&x.chainConnect(d,f);c=_[d].length<_[f].length;r.matches_head?i.matches_head?c?(m(d),v(d,f)):(m(f),v(f,d)):v(f,d):i.matches_head?v(d,f):c?(m(d),v(f,d)):(m(f),v(d,f))}function y(t,e,n){if(a.index=t,a.matches_head=e,a.matches_pt1=n,a!==r)return a=null,1;a=i}function m(t){x&&x.chainReverse(t),_[t].reverse()}function v(t,e){var n=_[t],r=_[e],i=n[n.length-1],a=n[n.length-2],o=r[0],s=r[1];b.pointsCollinear(a,i,o)&&(x&&x.chainRemoveTail(t,i),n.pop(),i=a),b.pointsCollinear(i,o,s)&&(x&&x.chainRemoveHead(e,o),r.shift()),x&&x.chainJoin(t,e),_[t]=n.concat(r),_.splice(e,1)}}),w}},{}],617:[function(t,e,n){"use strict";function r(t,n,r){var i=[];return t.forEach(function(t){var e=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==n[e]&&i.push({id:r?r.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===n[e],below:2===n[e]},otherFill:null})}),r&&r.selected(i),i}var i={union:function(t,e){return r(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return r(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return r(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return r(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return r(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}};e.exports=i},{}],618:[function(t,e,n){"use strict";var k=new Float64Array(4),M=new Float64Array(4),T=new Float64Array(4);e.exports=function(t,e,n,r,i){k.length<r.length&&(k=new Float64Array(r.length),M=new Float64Array(r.length),T=new Float64Array(r.length));for(var a=0;a<r.length;++a)k[a]=t[a]-r[a],M[a]=e[a]-t[a],T[a]=n[a]-t[a];for(var o=0,s=0,l=0,u=0,c=0,f=0,a=0;a<r.length;++a){var h=M[a],d=T[a],p=k[a];o+=h*h,s+=h*d,l+=d*d,u+=p*h,c+=p*d,f+=p*p}var g,y,m,v,b=Math.abs(o*l-s*s),x=s*c-l*u,_=s*u-o*c;v=x+_<=b?x<0?_<0&&u<0?(_=0,o<=-u?(x=1,o+2*u+f):u*(x=-u/o)+f):(x=0)<=c?(_=0,f):l<=-c?(_=1,l+2*c+f):c*(_=-c/l)+f:_<0?(_=0)<=u?(x=0,f):o<=-u?(x=1,o+2*u+f):u*(x=-u/o)+f:(x*=b=1/b)*(o*x+s*(_*=b)+2*u)+_*(s*x+l*_+2*c)+f:x<0?(g=s+u)<(y=l+c)?(v=o-2*s+l)<=(m=y-g)?(x=1,_=0,o+2*u+f):(x=m/v)*(o*x+s*(_=1-x)+2*u)+_*(s*x+l*_+2*c)+f:y<=(x=0)?(_=1,l+2*c+f):0<=c?(_=0,f):c*(_=-c/l)+f:_<0?(g=s+c)<(y=o+u)?(v=o-2*s+l)<=(m=y-g)?(_=1,x=0,l+2*c+f):(x=1-(_=m/v))*(o*x+s*_+2*u)+_*(s*x+l*_+2*c)+f:y<=(_=0)?(x=1,o+2*u+f):0<=u?(x=0,f):u*(x=-u/o)+f:(m=l+c-s-u)<=0?(x=0,_=1,l+2*c+f):(v=o-2*s+l)<=m?(x=1,_=0,o+2*u+f):(x=m/v)*(o*x+s*(_=1-x)+2*u)+_*(s*x+l*_+2*c)+f;for(var w=1-x-_,a=0;a<r.length;++a)i[a]=w*t[a]+x*e[a]+_*n[a];return v<0?0:v}},{}],619:[function(t,e,n){"use strict";var r,i,e=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var l,u=[],c=!1,f=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&d())}function d(){if(!c){var t=s(h);c=!0;for(var e=u.length;e;){for(l=u,u=[];++f<e;)l&&l[f].run();f=-1,e=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=g,e.addListener=g,e.once=g,e.off=g,e.removeListener=g,e.removeAllListeners=g,e.emit=g,e.prependListener=g,e.prependOnceListener=g,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],620:[function(t,e,n){"use strict";e.exports=t("gl-quat/slerp")},{"gl-quat/slerp":159}],621:[function(t,e,n){"use strict";var a=t("big-rat/add");e.exports=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=a(t[i],e[i]);return r}},{"big-rat/add":9}],622:[function(t,e,n){"use strict";e.exports=function(t){for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=r(t[n]);return e};var r=t("big-rat")},{"big-rat":12}],623:[function(t,e,n){"use strict";var o=t("big-rat"),s=t("big-rat/mul");e.exports=function(t,e){for(var n=o(e),r=t.length,i=new Array(r),a=0;a<r;++a)i[a]=s(t[a],n);return i}},{"big-rat":12,"big-rat/mul":21}],624:[function(t,e,n){"use strict";var a=t("big-rat/sub");e.exports=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=a(t[i],e[i]);return r}},{"big-rat/sub":23}],625:[function(t,e,n){"use strict";function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(o){var l,t=Object.prototype,u=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function a(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(t){a=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,a,o,s,e=e&&e.prototype instanceof y?e:y,e=Object.create(e.prototype),r=new T(r||[]);return e._invoke=(i=t,a=n,o=r,s=f,function(t,e){if(s===d)throw new Error("Generator is already running");if(s===p){if("throw"===t)throw e;return S()}for(o.method=t,o.arg=e;;){var n=o.delegate;if(n){var r=function t(e,n){var r=e.iterator[n.method];if(r===l){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=l,t(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}r=c(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g;{if(!r.done)return r;n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=l)}n.delegate=null;return g}(n,o);if(r){if(r===g)continue;return r}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===f)throw s=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=d;r=c(i,a,o);if("normal"===r.type){if(s=o.done?p:h,r.arg!==g)return{value:r.arg,done:o.done}}else"throw"===r.type&&(s=p,o.method="throw",o.arg=r.arg)}}),e}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}o.wrap=s;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",g={};function y(){}function m(){}function v(){}var b={};b[r]=function(){return this};e=Object.getPrototypeOf,e=e&&e(e(A([])));e&&e!==t&&u.call(e,r)&&(b=e);var x=v.prototype=y.prototype=Object.create(b);function _(t){["next","throw","return"].forEach(function(e){a(t,e,function(t){return this._invoke(e,t)})})}function w(o,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){t=c(o[t],o,n);if("throw"!==t.type){var a=t.arg,n=a.value;return n&&"object"===E(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function A(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=l,t.done=!0,t};return t.next=t}}return{next:S}}function S(){return{value:l,done:!0}}return((m.prototype=x.constructor=v).constructor=m).displayName=a(v,i,"GeneratorFunction"),o.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,a(t,i,"GeneratorFunction")),t.prototype=Object.create(x),t},o.awrap=function(t){return{__await:t}},_(w.prototype),w.prototype[n]=function(){return this},o.AsyncIterator=w,o.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var a=new w(s(t,e,n,r),i);return o.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(x),a(x,i,"Generator"),x[r]=function(){return this},x.toString=function(){return"[object Generator]"},o.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return a.type="throw",a.arg=n,r.next=t,e&&(r.method="next",r.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r,i=n.completion;return"throw"===i.type&&(r=i.arg,M(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=l),g}},o}("object"===(void 0===e?"undefined":E(e))?e.exports:{});try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},{}],626:[function(t,e,n){"use strict";var r,i="";e.exports=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(r!==t||void 0===r)r=t,i="";else if(i.length>=n)return i.substr(0,n);for(;n>i.length&&1<e;)1&e&&(i+=t),e>>=1,t+=t;return i=(i+=t).substr(0,n)}},{}],627:[function(t,e,n){(function(t){(function(){"use strict";e.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],628:[function(t,e,n){"use strict";e.exports=function(t){for(var e=t.length,n=t[t.length-1],r=e,i=e-2;0<=i;--i){var a=n,o=t[i];(l=o-((n=a+o)-a))&&(t[--r]=n,n=l)}for(var s=0,i=r;i<e;++i){var l,a=t[i];(l=(o=n)-((n=a+o)-a))&&(t[s++]=l)}return t[s++]=n,t.length=s,t}},{}],629:[function(t,i,e){"use strict";var n=t("two-product"),r=t("robust-sum"),a=t("robust-scale"),o=t("robust-compress");function s(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],n=0;n<t.length;++n)e.push(["scale(",s(function(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(i[o++]=t[r][a]);return n}(t,n)),",",1&n?"-":"",t[0][n],")"].join(""));return function t(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var n=e.length>>1;return["sum(",t(e.slice(0,n)),",",t(e.slice(n)),")"].join("")}(e)}function l(t){return new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",s(function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m[",n,"][",r,"]"].join("")}return e}(t)),")};return robustDeterminant",t].join(""))(r,a,n,o)}var u=[function(){return[0]},function(t){return[t[0][0]]}];!function(){for(;u.length<6;)u.push(l(u.length));for(var t=[],e=["function robustDeterminant(m){switch(m.length){"],n=0;n<6;++n)t.push("det"+n),e.push("case ",n,":return det",n,"(m);");e.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),t.push("CACHE","gen",e.join(""));var r=Function.apply(void 0,t);for(i.exports=r.apply(void 0,u.concat([u,l])),n=0;n<u.length;++n)i.exports[n]=u[n]}()},{"robust-compress":628,"robust-scale":635,"robust-sum":638,"two-product":655}],630:[function(t,e,n){"use strict";var i=t("two-product"),a=t("robust-sum");e.exports=function(t,e){for(var n=i(t[0],e[0]),r=1;r<t.length;++r)n=a(n,i(t[r],e[r]));return n}},{"robust-sum":638,"two-product":655}],631:[function(t,a,e){"use strict";var f=t("two-product"),h=t("robust-sum"),d=t("robust-subtract"),p=t("robust-scale");function g(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(i[o++]=t[r][a]);return n}function y(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",y(t.slice(0,e)),",",y(t.slice(e)),")"].join("")}function r(t,e){if("m"!==t.charAt(0))return r(e,t);if("w"!==e.charAt(0))return["prod(",t,",",e,")"].join("");t=t.split("[");return["w",e.substr(1),"m",t[0].substr(1)].join("")}function m(t){if(2===t.length)return[["diff(",r(t[0][0],t[1][1]),",",r(t[1][0],t[0][1]),")"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",y(m(g(t,n))),",",!0&n?"-":"",t[0][n],")"].join(""));return e}function o(t){for(var e=[],n=[],r=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-2,"]"].join("")}return e}(t),i=0;i<t;++i)r[0][i]="1",r[t-1][i]="w"+i;for(i=0;i<t;++i)0==(1&i)?e.push.apply(e,m(g(r,i))):n.push.apply(n,m(g(r,i)));for(var a=y(e),o=y(n),s="exactInSphere"+t,l=[],i=0;i<t;++i)l.push("m"+i);for(var u=["function ",s,"(",l.join(),"){"],i=0;i<t;++i){u.push("var w",i,"=",function(t,e){for(var n=[],r=0;r<e-2;++r)n.push(["prod(m",t,"[",r,"],m",t,"[",r,"])"].join(""));return y(n)}(i,t),";");for(var c=0;c<t;++c)c!==i&&u.push("var w",i,"m",c,"=scale(w",i,",m",c,"[0]);")}return u.push("var p=",a,",n=",o,",d=diff(p,n);return d[d.length-1];}return ",s),new Function("sum","diff","prod","scale",u.join(""))(h,d,f,p)}var s=[function(){return 0},function(){return 0},function(){return 0}];!function(){for(;s.length<=6;)s.push(o(s.length));for(var t=[],e=["slow"],n=0;n<=6;++n)t.push("a"+n),e.push("o"+n);for(var r=["function testInSphere(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=6;++n)r.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),e.push(r.join(""));var i=Function.apply(void 0,e);for(a.exports=i.apply(void 0,[function(t){return(s[t.length]||(s[t.length]=o(t.length))).apply(void 0,t)}].concat(s)),n=0;n<=6;++n)a.exports[n]=s[n]}()},{"robust-scale":635,"robust-subtract":637,"robust-sum":638,"two-product":655}],632:[function(t,i,e){"use strict";var o=t("robust-determinant");function a(t){for(var e="robustLinearSolve"+t+"d",n=["function ",e,"(A,b){return ["],r=0;r<t;++r){n.push("det([");for(var i=0;i<t;++i){0<i&&n.push(","),n.push("[");for(var a=0;a<t;++a)0<a&&n.push(","),a===r?n.push("+b[",i,"]"):n.push("+A[",i,"][",a,"]");n.push("]")}n.push("]),")}n.push("det(A)]}return ",e);e=new Function("det",n.join(""));return e(t<6?o[t]:o)}var s=[function(){return[0]},function(t,e){return[[e[0]],[t[0][0]]]}];!function(){for(;s.length<6;)s.push(a(s.length));for(var t=[],e=["function dispatchLinearSolve(A,b){switch(A.length){"],n=0;n<6;++n)t.push("s"+n),e.push("case ",n,":return s",n,"(A,b);");e.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),t.push("CACHE","g",e.join(""));var r=Function.apply(void 0,t);for(i.exports=r.apply(void 0,s.concat([s,a])),n=0;n<6;++n)i.exports[n]=s[n]}()},{"robust-determinant":629}],633:[function(t,a,e){"use strict";var u=t("two-product"),c=t("robust-sum"),f=t("robust-scale"),h=t("robust-subtract"),t=11102230246251565e-32;function d(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(i[o++]=t[r][a]);return n}function p(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",p(t.slice(0,e)),",",p(t.slice(e)),")"].join("")}function g(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",p(g(d(t,n))),",",1&n?"-":"",t[0][n],")"].join(""));return e}function o(t){for(var e=[],n=[],r=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),i=[],a=0;a<t;++a)0==(1&a)?e.push.apply(e,g(d(r,a))):n.push.apply(n,g(d(r,a))),i.push("m"+a);var o=p(e),s=p(n),l="orientation"+t+"Exact",l=["function ",l,"(",i.join(),"){var p=",o,",n=",s,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",l)(c,u,f,h)}var s=o(3),y=o(4),l=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r=(t[1]-n[1])*(e[0]-n[0]),i=(t[0]-n[0])*(e[1]-n[1]),a=r-i;if(0<r){if(i<=0)return a;o=r+i}else{if(!(r<0))return a;if(0<=i)return a;o=-(r+i)}var o=33306690738754716e-32*o;return o<=a||a<=-o?a:s(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],a=e[0]-r[0],o=n[0]-r[0],s=t[1]-r[1],l=e[1]-r[1],u=n[1]-r[1],c=t[2]-r[2],f=e[2]-r[2],h=n[2]-r[2],d=a*u,p=o*l,o=o*s,u=i*u,l=i*l,a=a*s,s=c*(d-p)+f*(o-u)+h*(l-a),h=7771561172376103e-31*((Math.abs(d)+Math.abs(p))*Math.abs(c)+(Math.abs(o)+Math.abs(u))*Math.abs(f)+(Math.abs(l)+Math.abs(a))*Math.abs(h));return h<s||h<-s?s:y(t,e,n,r)}];!function(){for(;l.length<=5;)l.push(o(l.length));for(var t=[],e=["slow"],n=0;n<=5;++n)t.push("a"+n),e.push("o"+n);for(var r=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=5;++n)r.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(r.join(""));var i=Function.apply(void 0,e);for(a.exports=i.apply(void 0,[function(t){return(l[t.length]||(l[t.length]=o(t.length))).apply(void 0,t)}].concat(l)),n=0;n<=5;++n)a.exports[n]=l[n]}()},{"robust-scale":635,"robust-subtract":637,"robust-sum":638,"two-product":655}],634:[function(t,e,n){"use strict";var i=t("robust-sum"),a=t("robust-scale");e.exports=function(t,e){if(1===t.length)return a(e,t[0]);if(1===e.length)return a(t,e[0]);if(0===t.length||0===e.length)return[0];var n=[0];if(t.length<e.length)for(var r=0;r<t.length;++r)n=i(n,a(e,t[r]));else for(r=0;r<e.length;++r)n=i(n,a(t,e[r]));return n}},{"robust-scale":635,"robust-sum":638}],635:[function(t,e,n){"use strict";var h=t("two-product"),d=t("two-sum");e.exports=function(t,e){var n=t.length;if(1===n){var r=h(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),a=[.1,.1],o=[.1,.1],s=0;h(t[0],e,a),a[0]&&(i[s++]=a[0]);for(var l=1;l<n;++l){h(t[l],e,o);var u=a[1];d(u,o[0],a),a[0]&&(i[s++]=a[0]);var c=o[1],f=a[1],u=c+f,c=f-(u-c);a[1]=u,c&&(i[s++]=c)}a[1]&&(i[s++]=a[1]);0===s&&(i[s++]=0);return i.length=s,i}},{"two-product":655,"two-sum":656}],636:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=l(t,n,r),a=l(e,n,r);if(0<i&&0<a||i<0&&a<0)return!1;var o=l(n,t,e),s=l(r,t,e);if(0<o&&0<s||o<0&&s<0)return!1;return 0!==i||0!==a||0!==o||0!==s||function(t,e,n,r){for(var i=0;i<2;++i){var a=t[i],o=e[i],s=Math.min(a,o),l=Math.max(a,o),u=n[i],a=r[i],o=Math.min(u,a);if(Math.max(u,a)<s||l<o)return!1}return!0}(t,e,n,r)};var l=t("robust-orientation")[3]},{"robust-orientation":633}],637:[function(t,e,n){"use strict";e.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1==n&&1==r)return function(t,e){var n=t+e,r=n-t,r=t-(n-r)+(e-r);if(r)return[r,n];return[n]}(t[0],-e[0]);var i,a,o=new Array(n+r),s=0,l=0,u=0,c=Math.abs,f=t[l],h=c(f),d=-e[u],p=c(d);h<p?(a=f,(l+=1)<n&&(f=t[l],h=c(f))):(a=d,(u+=1)<r&&(d=-e[u],p=c(d)));l<n&&h<p||r<=u?(i=f,(l+=1)<n&&(f=t[l],h=c(f))):(i=d,(u+=1)<r&&(d=-e[u],p=c(d)));var g,y,m=i+a,v=m-i,b=a-v,x=b,_=m;for(;l<n&&u<r;)h<p?(i=f,(l+=1)<n&&(f=t[l],h=c(f))):(i=d,(u+=1)<r&&(d=-e[u],p=c(d))),(b=(a=x)-(v=(m=i+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(y=g-_))+(m-y),_=g;for(;l<n;)(b=(a=x)-(v=(m=(i=f)+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(y=g-_))+(m-y),_=g,(l+=1)<n&&(f=t[l]);for(;u<r;)(b=(a=x)-(v=(m=(i=d)+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(y=g-_))+(m-y),_=g,(u+=1)<r&&(d=-e[u]);x&&(o[s++]=x);_&&(o[s++]=_);s||(o[s++]=0);return o.length=s,o}},{}],638:[function(t,e,n){"use strict";e.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1==n&&1==r)return function(t,e){var n=t+e,r=n-t,r=t-(n-r)+(e-r);if(r)return[r,n];return[n]}(t[0],e[0]);var i,a,o=new Array(n+r),s=0,l=0,u=0,c=Math.abs,f=t[l],h=c(f),d=e[u],p=c(d);h<p?(a=f,(l+=1)<n&&(f=t[l],h=c(f))):(a=d,(u+=1)<r&&(d=e[u],p=c(d)));l<n&&h<p||r<=u?(i=f,(l+=1)<n&&(f=t[l],h=c(f))):(i=d,(u+=1)<r&&(d=e[u],p=c(d)));var g,y,m=i+a,v=m-i,b=a-v,x=b,_=m;for(;l<n&&u<r;)h<p?(i=f,(l+=1)<n&&(f=t[l],h=c(f))):(i=d,(u+=1)<r&&(d=e[u],p=c(d))),(b=(a=x)-(v=(m=i+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(y=g-_))+(m-y),_=g;for(;l<n;)(b=(a=x)-(v=(m=(i=f)+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(y=g-_))+(m-y),_=g,(l+=1)<n&&(f=t[l]);for(;u<r;)(b=(a=x)-(v=(m=(i=d)+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(y=g-_))+(m-y),_=g,(u+=1)<r&&(d=e[u]);x&&(o[s++]=x);_&&(o[s++]=_);s||(o[s++]=0);return o.length=s,o}},{}],639:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){n=n||0,void 0===r&&(r=function(t){for(var e=t.length,n=0,r=0;r<e;++r)n=0|Math.max(n,t[r].length);return n-1}(t));if(0===t.length||r<1)return{cells:[],vertexIds:[],vertexWeights:[]};var i=function(t,e){for(var n=t.length,r=p.mallocUint8(n),i=0;i<n;++i)r[i]=t[i]<e|0;return r}(e,+n),a=function(t,e){for(var n=t.length,r=e*(e+1)/2*n|0,i=p.mallocUint32(2*r),a=0,o=0;o<n;++o)for(var s=t[o],e=s.length,l=0;l<e;++l)for(var u=0;u<l;++u){var c=s[u],f=s[l];i[a++]=0|Math.min(c,f),i[a++]=0|Math.max(c,f)}g(d(i,[a/2|0,2]));for(var h=2,o=2;o<a;o+=2)i[o-2]===i[o]&&i[o-1]===i[o+1]||(i[h++]=i[o],i[h++]=i[o+1]);return d(i,[h/2|0,2])}(t,r),o=function(t,e,n,r){for(var i=t.data,a=t.shape[0],o=p.mallocDouble(a),s=0,l=0;l<a;++l){var u,c,f=i[2*l],h=i[2*l+1];n[f]!==n[h]&&(u=e[f],c=e[h],i[2*s]=f,i[2*s+1]=h,o[s++]=(c-r)/(c-u))}return t.shape[0]=s,d(o,[s])}(a,e,i,+n),n=function(t,e){for(var n=p.mallocInt32(2*e),r=t.shape[0],i=t.data,a=n[0]=0,o=0;o<r;++o){var s=i[2*o];if(s!==a){for(n[2*a+1]=o;++a<s;)n[2*a]=o,n[2*a+1]=o;n[2*a]=o}}n[2*a+1]=r;for(;++a<e;)n[2*a]=n[2*a+1]=r;return n}(a,0|e.length),e=s(r)(t,a.data,n,i),r=function(t){for(var e=0|t.shape[0],n=t.data,r=new Array(e),i=0;i<e;++i)r[i]=[n[2*i],n[2*i+1]];return r}(a),t=[].slice.call(o.data,0,o.shape[0]);return p.free(i),p.free(a.data),p.free(o.data),p.free(n),{cells:e,vertexIds:r,vertexWeights:t}};var d=t("ndarray"),p=t("typedarray-pool"),g=t("ndarray-sort"),s=t("./lib/codegen")},{"./lib/codegen":640,ndarray:254,"ndarray-sort":253,"typedarray-pool":657}],640:[function(t,e,n){"use strict";e.exports=function(t){var e=r[t];e=e||(r[t]=function(t){var e=0,n=new Array(t+1);n[0]=[[]];for(var r=1;r<=t;++r)for(var i=n[r]=u(r),a=0;a<i.length;++a)e=Math.max(e,i[r].length);var o=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",t,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];for(r=t+1;1<r;--r){r<t+1&&o.push("else "),o.push("if(l===",r,"){");for(var s=[],a=0;a<r;++a)s.push("(S[c["+a+"]]<<"+a+")");o.push("var M=",s.join("+"),";if(M===0||M===",(1<<r)-1,"){continue}switch(M){");for(i=n[r-1],a=0;a<i.length;++a)o.push("case ",a,":"),function(t){if(!(t.length<=0)){o.push("R.push(");for(var e=0;e<t.length;++e){var n=t[e];0<e&&o.push(","),o.push("[");for(var r=0;r<n.length;++r){var i=n[r];0<r&&o.push(","),o.push("B(C,E,c[",i[0],"],c[",i[1],"])")}o.push("]")}o.push(");")}}(i[a]),o.push("break;");o.push("}}")}return o.push("}return R;};return getContour",t,"d"),new Function("pool",o.join(""))(l)}(t));return e};var l=t("typedarray-pool"),u=t("marching-simplex-table"),r={}},{"marching-simplex-table":238,"typedarray-pool":657}],641:[function(t,e,n){"use strict";var p=t("bit-twiddle"),f=t("union-find");function g(t,e){var n=t.length,r=t.length-e.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])?s:i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],o=e[0]+e[1];if(s=a+t[2]-(o+e[2]))return s;var s,l=i(t[0],t[1]),u=i(e[0],e[1]);return(s=i(l,t[2])-i(u,e[2]))?s:i(l+t[2],a)-i(u+e[2],o);default:var c=t.slice(0);c.sort();var f=e.slice(0);f.sort();for(var h=0;h<n;++h)if(r=c[h]-f[h])return r;return 0}}function a(t,e){return g(t[0],e[0])}function h(t,e){if(e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=[t[i],e[i]];r.sort(a);for(i=0;i<n;++i)t[i]=r[i][0],e[i]=r[i][1];return t}return t.sort(g),t}function d(t){if(0===t.length)return[];for(var e=1,n=t.length,r=1;r<n;++r){var i=t[r];g(i,t[r-1])&&(r!==e?t[e++]=i:e++)}return t.length=e,t}function y(t,e){for(var n=0,r=t.length-1,i=-1;n<=r;){var a=n+r>>1,o=g(t[a],e);o<=0?(0===o&&(i=a),n=1+a):0<o&&(r=a-1)}return i}function l(t,e){for(var n=new Array(t.length),r=0,i=n.length;r<i;++r)n[r]=[];for(var a=[],r=0,o=e.length;r<o;++r)for(var s=e[r],l=s.length,u=1,c=1<<l;u<c;++u){a.length=p.popCount(u);for(var f=0,h=0;h<l;++h)u&1<<h&&(a[f++]=s[h]);var d=y(t,a);if(!(d<0))for(;n[d++].push(r),!(d>=t.length||0!==g(t[d],a)););}return n}function m(t,e){if(e<0)return[];for(var n=[],r=(1<<e+1)-1,i=0;i<t.length;++i)for(var a=t[i],o=r;o<1<<a.length;o=p.nextCombination(o)){for(var s=new Array(e+1),l=0,u=0;u<a.length;++u)o&1<<u&&(s[l++]=a[u]);n.push(s)}return h(n)}n.dimension=function(t){for(var e=0,n=Math.max,r=0,i=t.length;r<i;++r)e=n(e,t[r].length);return e-1},n.countVertices=function(t){for(var e=-1,n=Math.max,r=0,i=t.length;r<i;++r)for(var a=t[r],o=0,s=a.length;o<s;++o)e=n(e,a[o]);return e+1},n.cloneCells=function(t){for(var e=new Array(t.length),n=0,r=t.length;n<r;++n)e[n]=t[n].slice(0);return e},n.compareCells=g,n.normalize=h,n.unique=d,n.findCell=y,n.incidence=l,n.dual=function(t,e){if(!e)return l(d(m(t,0)),t);for(var n=new Array(e),r=0;r<e;++r)n[r]=[];for(var r=0,i=t.length;r<i;++r)for(var a=t[r],o=0,s=a.length;o<s;++o)n[a[o]].push(r);return n},n.explode=function(t){for(var e=[],n=0,r=t.length;n<r;++n)for(var i=t[n],a=0|i.length,o=1,s=1<<a;o<s;++o){for(var l=[],u=0;u<a;++u)o>>>u&1&&l.push(i[u]);e.push(l)}return h(e)},n.skeleton=m,n.boundary=function(t){for(var e=[],n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length;a<o;++a){for(var s=new Array(i.length-1),l=0,u=0;l<o;++l)l!==a&&(s[u++]=i[l]);e.push(s)}return h(e)},n.connectedComponents=function(t,e){return e?function(t,e){for(var n=new f(e),r=0;r<t.length;++r)for(var i=t[r],a=0;a<i.length;++a)for(var o=a+1;o<i.length;++o)n.link(i[a],i[o]);for(var s=[],l=n.ranks,r=0;r<l.length;++r)l[r]=-1;for(r=0;r<t.length;++r){var u=n.find(t[r][0]);l[u]<0?(l[u]=s.length,s.push([t[r].slice(0)])):s[l[u]].push(t[r].slice(0))}return s}(t,e):function(t){for(var e=d(h(m(t,0))),n=new f(e.length),r=0;r<t.length;++r)for(var i=t[r],a=0;a<i.length;++a)for(var o=y(e,[i[a]]),s=a+1;s<i.length;++s)n.link(o,y(e,[i[s]]));for(var l=[],u=n.ranks,r=0;r<u.length;++r)u[r]=-1;for(r=0;r<t.length;++r){var c=n.find(y(e,[t[r][0]]));u[c]<0?(u[c]=l.length,l.push([t[r].slice(0)])):l[u[c]].push(t[r].slice(0))}return l}(t)}},{"bit-twiddle":26,"union-find":658}],642:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],643:[function(t,e,n){arguments[4][641][0].apply(n,arguments)},{"bit-twiddle":642,dup:641,"union-find":644}],644:[function(t,e,n){"use strict";function r(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}(e.exports=r).prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var n=e[t];e[t]=e[n],t=n}return t},r.prototype.link=function(t,e){var n,r,i=this.find(t),a=this.find(e);i!==a&&(n=this.ranks,r=this.roots,(t=n[i])<(e=n[a])?r[i]=a:e<t?r[a]=i:++n[r[a]=i])}},{}],645:[function(t,e,n){"use strict";e.exports=function(t,r,e){for(var n=r.length,i=t.length,a=new Array(n),o=new Array(n),s=new Array(n),l=new Array(n),u=0;u<n;++u)a[u]=o[u]=-1,s[u]=1/0,l[u]=!1;for(u=0;u<i;++u){var c=t[u];if(2!==c.length)throw new Error("Input must be a graph");var f=c[1],c=c[0];-1!==o[c]?o[c]=-2:o[c]=f,-1!==a[f]?a[f]=-2:a[f]=c}function h(t){if(l[t])return 1/0;var e=a[t],n=o[t];return e<0||n<0?1/0:function(t,e,n){t=Math.abs(A(t,e,n)),n=Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2));return t/n}(r[t],r[e],r[n])}function d(t,e){var n=b[t],r=b[e];b[t]=r,b[e]=n,x[n]=e,x[r]=t}function p(t){return s[b[t]]}function g(t){for(var e=p(t);;){var n,r=e,i=2*t+1,a=2*(t+1),o=t;if(i<_&&((n=p(i))<r&&(o=i,r=n)),a<_&&p(a)<r&&(o=a),o===t)return t;d(t,o),t=o}}function y(t){for(var e=p(t);0<t;){var n=1&(n=t)?n-1>>1:(n>>1)-1;if(0<=n)if(e<p(n)){d(t,n),t=n;continue}return t}}function m(){if(0<_){var t=b[0];return d(0,_-1),--_,g(0),t}return-1}function v(t,e){var n=b[t];return s[n]===e?t:(s[n]=-1/0,y(t),m(),s[n]=e,y((_+=1)-1))}for(var b=[],x=new Array(n),u=0;u<n;++u)(s[u]=h(u))<1/0?(x[u]=b.length,b.push(u)):x[u]=-1;for(var _=b.length,u=_>>1;0<=u;--u)g(u);for(;;){var w=m();if(w<0||s[w]>e)break;!function(t){var e;l[t]||(l[t]=!0,e=a[t],t=o[t],0<=a[t]&&(a[t]=e),0<=o[e]&&(o[e]=t),0<=x[e]&&v(x[e],h(e)),0<=x[t]&&v(x[t],h(t)))}(w)}for(var k=[],u=0;u<n;++u)l[u]||(x[u]=k.length,k.push(r[u].slice()));k.length;function M(t,e){if(t[e]<0)return e;var n=e,r=e;do{var i=t[r]}while(l[r]&&!(i<0)&&i!==r&&((i=t[r=i],l[r]&&!(i<0)&&i!==r)&&(r=i,(n=t[n])!==r)));for(var a=e;a!==r;a=t[a])t[a]=r;return r}var T=[];return t.forEach(function(t){var e=M(a,t[0]),t=M(o,t[1]);0<=e&&0<=t&&e!==t&&((e=x[e])!==(t=x[t])&&T.push([e,t]))}),S.unique(S.normalize(T)),{positions:k,edges:T}};var A=t("robust-orientation"),S=t("simplicial-complex")},{"robust-orientation":633,"simplicial-complex":643}],646:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,a;if(e[0][0]<e[1][0])n=e[0],r=e[1];else{if(!(e[0][0]>e[1][0]))return o(e,t);n=e[1],r=e[0]}if(t[0][0]<t[1][0])i=t[0],a=t[1];else{if(!(t[0][0]>t[1][0]))return-o(t,e);i=t[1],a=t[0]}e=u(n,r,a),t=u(n,r,i);if(e<0){if(t<=0)return e}else if(0<e){if(0<=t)return e}else if(t)return t;if(e=u(a,i,r),t=u(a,i,n),e<0){if(t<=0)return e}else if(0<e){if(0<=t)return e}else if(t)return t;return r[0]-a[0]};var u=t("robust-orientation");function o(t,e){var n,r;if(e[0][0]<e[1][0])n=e[0],r=e[1];else{if(!(e[0][0]>e[1][0])){var i=Math.min(t[0][1],t[1][1]),a=Math.max(t[0][1],t[1][1]),o=Math.min(e[0][1],e[1][1]),s=Math.max(e[0][1],e[1][1]);return a<o?a-o:s<i?i-s:a-s}n=e[1],r=e[0]}t=t[0][1]<t[1][1]?(l=t[0],t[1]):(l=t[1],t[0]);var l=u(r,n,l);return(l=l||u(r,n,t))||t-r}},{"robust-orientation":633}],647:[function(t,e,n){arguments[4][101][0].apply(n,arguments)},{dup:101}],648:[function(t,e,n){"use strict";e.exports=function(t){for(var e=t.length,n=2*e,r=new Array(n),i=0;i<e;++i){var a=t[i],o=a[0][0]<a[1][0];r[2*i]=new v(a[0][0],a,o,i),r[2*i+1]=new v(a[1][0],a,!o,i)}r.sort(function(t,e){var n=t.x-e.x;return(n=n||t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1])});for(var s=p(g),l=[],u=[],c=[],i=0;i<n;){for(var f=r[i].x,h=[];i<n;){var d=r[i];if(d.x!==f)break;i+=1,d.segment[0][0]===d.x&&d.segment[1][0]===d.x?d.create&&(d.segment[0][1]<d.segment[1][1]?(h.push(new m(d.segment[0][1],d.index,!0,!0)),h.push(new m(d.segment[1][1],d.index,!1,!1))):(h.push(new m(d.segment[1][1],d.index,!0,!1)),h.push(new m(d.segment[0][1],d.index,!1,!0)))):s=d.create?s.insert(d.segment,d.index):s.remove(d.segment)}l.push(s.root),u.push(f),c.push(h)}return new y(l,u,c)};var l=t("binary-search-bounds"),p=t("functional-red-black-tree"),u=t("robust-orientation"),g=t("./lib/order-segments");function y(t,e,n){this.slabs=t,this.coordinates=e,this.horizontal=n}function c(t,e){return t.y-e}function f(t,e){for(var n=null;t;){var r,i,a=t.key,o=a[0][0]<a[1][0]?(r=a[0],a[1]):(r=a[1],a[0]),o=u(r,o,e);if(o<0)t=t.left;else if(0<o)if(e[0]!==a[1][0])t=(n=t).right;else{if(i=f(t.right,e))return i;t=t.left}else{if(e[0]!==a[1][0])return t;if(i=f(t.right,e))return i;t=t.left}}return n}function m(t,e,n,r){this.y=t,this.index=e,this.start=n,this.closed=r}function v(t,e,n,r){this.x=t,this.segment=e,this.create=n,this.index=r}y.prototype.castUp=function(t){var e=l.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var n=f(this.slabs[e],t),r=-1;if(n&&(r=n.value),this.coordinates[e]===t[0]){var i=null;n&&(i=n.key),0<e&&((n=f(this.slabs[e-1],t))&&(i?0<g(n.key,i)&&(i=n.key,r=n.value):(r=n.value,i=n.key)));var a=this.horizontal[e];if(0<a.length){var o=l.ge(a,t[1],c);if(o<a.length){var s=a[o];if(t[1]===s.y){if(s.closed)return s.index;for(;o<a.length-1&&a[o+1].y===t[1];)if((s=a[o+=1]).closed)return s.index;if(s.y===t[1]&&!s.start){if((o+=1)>=a.length)return r;s=a[o]}}s.start?i?(e=u(i[0],i[1],[t[0],s.y]),i[0][0]>i[1][0]&&(e=-e),0<e&&(r=s.index)):r=s.index:s.y!==t[1]&&(r=s.index)}}}return r}},{"./lib/order-segments":646,"binary-search-bounds":647,"functional-red-black-tree":102,"robust-orientation":633}],649:[function(t,e,n){"use strict";var r=t("robust-dot-product"),i=t("robust-sum");function c(t,e){e=i(r(t,e),[e[e.length-1]]);return e[e.length-1]}function f(t,e,n,r){var i=-e/(r-e);i<0?i=0:1<i&&(i=1);for(var a=1-i,o=t.length,s=new Array(o),l=0;l<o;++l)s[l]=i*t[l]+a*n[l];return s}e.exports=function(t,e){for(var n=[],r=[],i=c(t[t.length-1],e),a=t[t.length-1],o=t[0],s=0;s<t.length;++s,a=o){var l,u=c(o=t[s],e);(i<0&&0<u||0<i&&u<0)&&(l=f(a,u,o,i),n.push(l),r.push(l.slice())),u<0?r.push(o.slice()):0<u?n.push(o.slice()):(n.push(o.slice()),r.push(o.slice())),i=u}return{positive:n,negative:r}},e.exports.positive=function(t,e){for(var n=[],r=c(t[t.length-1],e),i=t[t.length-1],a=t[0],o=0;o<t.length;++o,i=a){var s=c(a=t[o],e);(r<0&&0<s||0<r&&s<0)&&n.push(f(i,s,a,r)),0<=s&&n.push(a.slice()),r=s}return n},e.exports.negative=function(t,e){for(var n=[],r=c(t[t.length-1],e),i=t[t.length-1],a=t[0],o=0;o<t.length;++o,i=a){var s=c(a=t[o],e);(r<0&&0<s||0<r&&s<0)&&n.push(f(i,s,a,r)),s<=0&&n.push(a.slice()),r=s}return n}},{"robust-dot-product":630,"robust-sum":638}],650:[function(t,e,n){"use strict";e.exports=function(t,e){{if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var n=s(t,e),r=n.length,i=new Array(r),a=new Array(r),o=0;o<r;++o)i[o]=[n[o]],a[o]=[o];return{positions:i,cells:a}}(t,e)}var n=t.order.join()+"-"+t.dtype,r=i[n],e=+e||0;r=r||(i[n]=function(t,e){var n=t.length,r=["'use strict';"],i="surfaceNets"+t.join("_")+"d"+e;r.push("var contour=genContour({","order:[",t.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===e&&r.push("getters:[0],");for(var a=[],o=[],s=0;s<n;++s)a.push("d"+s),o.push("d"+s);for(s=0;s<1<<n;++s)a.push("v"+s),o.push("v"+s);for(s=0;s<1<<n;++s)a.push("p"+s),o.push("p"+s);a.push("a","b","c"),o.push("a","c"),r.push("vertex:function vertexFunc(",a.join(),"){");for(var l=[],s=0;s<1<<n;++s)l.push("(p"+s+"<<"+s+")");r.push("var m=(",l.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");var u=[],c=[];1<<(1<<n)<=128?(r.push("switch(m){"),c=r):r.push("switch(m>>>7){");for(s=0;s<1<<(1<<n);++s){var f;128<1<<(1<<n)&&s%128==0&&(0<u.length&&c.push("}}"),f="vExtra"+u.length,r.push("case ",s>>>7,":",f,"(m&0x7f,",o.join(),");break;"),c=["function ",f,"(m,",o.join(),"){switch(m){"],u.push(c)),c.push("case ",127&s,":");for(var h=new Array(n),d=new Array(n),p=new Array(n),g=new Array(n),y=0,m=0;m<n;++m)h[m]=[],d[m]=[],p[m]=0,g[m]=0;for(m=0;m<1<<n;++m)for(var v=0;v<n;++v){var b=m^1<<v;if(!(m<b)&&!(s&1<<b)!=!(s&1<<m)){var x=1;s&1<<b?d[v].push("v"+b+"-v"+m):(d[v].push("v"+m+"-v"+b),x=-x),x<0?(h[v].push("-v"+m+"-v"+b),p[v]+=2):(h[v].push("v"+m+"+v"+b),p[v]-=2),y+=1;for(var _=0;_<n;++_)_!==v&&(b&1<<_?g[_]+=1:--g[_])}}for(var w,k,M,T=[],v=0;v<n;++v)0===h[v].length?T.push("d"+v+"-0.5"):(w="",p[v]<0?w=p[v]+"*c":0<p[v]&&(w="+"+p[v]+"*c"),k=h[v].length/y*.5,M=.5+g[v]/y*.5,T.push("d"+v+"-"+M+"-"+k+"*("+h[v].join("+")+w+")/("+d[v].join("+")+")"));c.push("a.push([",T.join(),"]);","break;")}r.push("}},"),0<u.length&&c.push("}}");for(var A=[],s=0;s<1<<n-1;++s)A.push("v"+s);A.push("c0","c1","p0","p1","a","b","c"),r.push("cell:function cellFunc(",A.join(),"){");e=E(n-1);r.push("if(p0){b.push(",e.map(function(t){return"["+t.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",e.map(function(t){t=t.slice();return t.reverse(),"["+t.map(function(t){return"v"+t})+"]"}).join(),")}}});function ",i,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",i,";");for(s=0;s<u.length;++s)r.push(u[s].join(""));return new Function("genContour",r.join(""))(S)}(t.order,t.dtype));return r(t,e)};var S=t("ndarray-extract-contour"),E=t("triangulate-hypercube"),s=t("zero-crossings");var i={}},{"ndarray-extract-contour":250,"triangulate-hypercube":653,"zero-crossings":669}],651:[function(t,U,e){"use strict";function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(l){var u=/^\s+/,c=/\s+$/,r=0,a=l.round,f=l.min,h=l.max,t=l.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(u,"").replace(c,"").toLowerCase();var e,n=!1;if(A[t])t=A[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=F.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=F.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=F.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=F.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=F.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=F.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=F.hex8.exec(t))return{r:P(e[1]),g:P(e[2]),b:P(e[3]),a:N(e[4]),format:n?"name":"hex8"};if(e=F.hex6.exec(t))return{r:P(e[1]),g:P(e[2]),b:P(e[3]),format:n?"name":"hex"};if(e=F.hex4.exec(t))return{r:P(e[1]+""+e[1]),g:P(e[2]+""+e[2]),b:P(e[3]+""+e[3]),a:N(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=F.hex3.exec(t))return{r:P(e[1]+""+e[1]),g:P(e[2]+""+e[2]),b:P(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==V(t)&&(B(t.r)&&B(t.g)&&B(t.b)?(e=function(t,e,n){return{r:255*O(t,255),g:255*O(e,255),b:255*O(n,255)}}(t.r,t.g,t.b),o=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):B(t.h)&&B(t.s)&&B(t.v)?(r=R(t.s),i=R(t.v),e=function(t,e,n){t=6*O(t,360),e=O(e,100),n=O(n,100);var r=l.floor(t),i=t-r,a=n*(1-e),t=n*(1-i*e),e=n*(1-(1-i)*e),r=r%6;return{r:255*[n,t,a,a,e,n][r],g:255*[e,n,n,t,a,a][r],b:255*[a,a,e,n,n,t][r]}}(t.h,r,i),o=!0,s="hsv"):B(t.h)&&B(t.s)&&B(t.l)&&(r=R(t.s),a=R(t.l),e=function(t,e,n){var r,i,a;function o(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}t=O(t,360),e=O(e,100),n=O(n,100),0===e?r=i=a=n:(r=o(e=2*n-(n=n<.5?n*(1+e):n+e-n*e),n,t+1/3),i=o(e,n,t),a=o(e,n,t-1/3));return{r:255*r,g:255*i,b:255*a}}(t.h,r,a),o=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a));return n=E(n),{ok:o,format:t.format||s,r:f(255,h(e.r,0)),g:f(255,h(e.g,0)),b:f(255,h(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=a(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=n.ok,this._tc_id=r++}function i(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i=h(t,e,n),a=f(t,e,n),o=(i+a)/2;if(i==a)r=l=0;else{var s=i-a,l=.5<o?s/(2-i-a):s/(i+a);switch(i){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return{h:r,s:l,l:o}}function o(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i=h(t,e,n),a=f(t,e,n),o=i,s=i-a,l=0===i?0:s/i;if(i==a)r=0;else{switch(i){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return{h:r,s:l,v:o}}function e(t,e,n,r){n=[L(a(t).toString(16)),L(a(e).toString(16)),L(a(n).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function s(t,e,n,r){return[L(j(r)),L(a(t).toString(16)),L(a(e).toString(16)),L(a(n).toString(16))].join("")}function n(t,e){e=0===e?0:e||10;t=d(t).toHsl();return t.s-=e/100,t.s=C(t.s),d(t)}function p(t,e){e=0===e?0:e||10;t=d(t).toHsl();return t.s+=e/100,t.s=C(t.s),d(t)}function g(t){return d(t).desaturate(100)}function y(t,e){e=0===e?0:e||10;t=d(t).toHsl();return t.l+=e/100,t.l=C(t.l),d(t)}function m(t,e){e=0===e?0:e||10;t=d(t).toRgb();return t.r=h(0,f(255,t.r-a(-e/100*255))),t.g=h(0,f(255,t.g-a(-e/100*255))),t.b=h(0,f(255,t.b-a(-e/100*255))),d(t)}function v(t,e){e=0===e?0:e||10;t=d(t).toHsl();return t.l-=e/100,t.l=C(t.l),d(t)}function b(t,e){t=d(t).toHsl(),e=(t.h+e)%360;return t.h=e<0?360+e:e,d(t)}function x(t){t=d(t).toHsl();return t.h=(t.h+180)%360,d(t)}function _(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+120)%360,s:e.s,l:e.l}),d({h:(n+240)%360,s:e.s,l:e.l})]}function w(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+90)%360,s:e.s,l:e.l}),d({h:(n+180)%360,s:e.s,l:e.l}),d({h:(n+270)%360,s:e.s,l:e.l})]}function k(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+72)%360,s:e.s,l:e.l}),d({h:(n+216)%360,s:e.s,l:e.l})]}function M(t,e,n){e=e||6,n=n||30;var r=d(t).toHsl(),i=360/n,a=[d(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,a.push(d(r));return a}function T(t,e){e=e||6;for(var t=d(t).toHsv(),n=t.h,r=t.s,i=t.v,a=[],o=1/e;e--;)a.push(d({h:n,s:r,v:i})),i=(i+o)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t=this.toRgb(),e=t.r/255,n=t.g/255,t=t.b/255,e=e<=.03928?e/12.92:l.pow((.055+e)/1.055,2.4),n=n<=.03928?n/12.92:l.pow((.055+n)/1.055,2.4),t=t<=.03928?t/12.92:l.pow((.055+t)/1.055,2.4);return.2126*e+.7152*n+.0722*t},setAlpha:function(t){return this._a=E(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=o(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),t=a(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+t+"%)":"hsva("+e+", "+n+"%, "+t+"%, "+this._roundA+")"},toHsl:function(){var t=i(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=i(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),t=a(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+t+"%)":"hsla("+e+", "+n+"%, "+t+"%, "+this._roundA+")"},toHex:function(t){return e(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){r=[L(a(t).toString(16)),L(a(e).toString(16)),L(a(n).toString(16)),L(j(r))];if(i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*O(this._r,255))+"%",g:a(100*O(this._g,255))+"%",b:a(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*O(this._r,255))+"%, "+a(100*O(this._g,255))+"%, "+a(100*O(this._b,255))+"%)":"rgba("+a(100*O(this._r,255))+"%, "+a(100*O(this._g,255))+"%, "+a(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&S[e(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+s(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";return t&&(n="#"+s((t=d(t))._r,t._g,t._b,t._a)),"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&0<=this._a;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){e=t.apply(null,[this].concat([].slice.call(e)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},d.fromRatio=function(t,e){if("object"==V(t)){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:R(t[n]));t=r}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:t(),g:t(),b:t()})},d.mix=function(t,e,n){n=0===n?0:n||50;t=d(t).toRgb(),e=d(e).toRgb(),n/=100;return d({r:(e.r-t.r)*n+t.r,g:(e.g-t.g)*n+t.g,b:(e.b-t.b)*n+t.b,a:(e.a-t.a)*n+t.a})},d.readability=function(t,e){t=d(t),e=d(e);return(l.max(t.getLuminance(),e.getLuminance())+.05)/(l.min(t.getLuminance(),e.getLuminance())+.05)},d.isReadable=function(t,e,n){var r=d.readability(t,e),i=!1,n=function(t){var e;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),t=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==t&&"large"!==t&&(t="small");return{level:e,size:t}}(n);switch(n.level+n.size){case"AAsmall":case"AAAlarge":i=4.5<=r;break;case"AAlarge":i=3<=r;break;case"AAAsmall":i=7<=r}return i},d.mostReadable=function(t,e,n){for(var r,i=null,a=0,o=(n=n||{}).includeFallbackColors,s=n.level,l=n.size,u=0;u<e.length;u++)a<(r=d.readability(t,e[u]))&&(a=r,i=d(e[u]));return d.isReadable(t,i,{level:s,size:l})||!o?i:(n.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],n))};var A=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=d.hexNames=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}(A);function E(t){return t=parseFloat(t),(isNaN(t)||t<0||1<t)&&(t=1),t}function O(t,e){"string"==typeof(n=t)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(t="100%");var n,n="string"==typeof(n=t)&&-1!=n.indexOf("%");return t=f(e,h(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),l.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function C(t){return f(1,h(0,t))}function P(t){return parseInt(t,16)}function L(t){return 1==t.length?"0"+t:""+t}function R(t){return t<=1&&(t=100*t+"%"),t}function j(t){return l.round(255*parseFloat(t)).toString(16)}function N(t){return P(t)/255}var D,z,I,F=(z="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",I="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+I),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+I),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+I),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function B(t){return F.CSS_UNIT.exec(t)}void 0!==U&&U.exports?U.exports=d:window.tinycolor=d}(Math)},{}],652:[function(t,e,n){"use strict";var i=t("parse-unit");e.exports=l;var a=s("in",document.body);function o(t,e){e=i(getComputedStyle(t).getPropertyValue(e));return e[0]*l(e[1],t)}function s(t,e){var n=document.createElement("div");n.style.height="128"+t,e.appendChild(n);t=o(n,"height")/128;return e.removeChild(n),t}function l(t,e){if(!t)return null;switch(e=e||document.body,t=(t+""||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return s(t,e);case"em":return o(e,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6;case"px":return 1}var n=i(t);if(isNaN(n[0])||!n[1])return null;var r=l(n[1],e);return"number"==typeof r?n[0]*r:null}},{"parse-unit":261}],653:[function(t,e,n){"use strict";e.exports=function(t){if(t<0)return[];if(0===t)return[[0]];for(var e=0|Math.round(c(t+1)),n=[],r=0;r<e;++r){for(var i=l.unrank(t,r),a=[0],o=0,s=0;s<i.length;++s)o+=1<<i[s],a.push(o);u(i)<1&&(a[0]=o,a[t]=0),n.push(a)}return n};var l=t("permutation-rank"),u=t("permutation-parity"),c=t("gamma")},{gamma:103,"permutation-parity":262,"permutation-rank":263}],654:[function(t,e,n){"use strict";e.exports=function(t){var e=(t=t||{}).center||[0,0,0],n=t.up||[0,1,0],r=t.right||h(n),i=t.radius||1,a=t.theta||0,o=t.phi||0;{var s,l;e=[].slice.call(e,0,3),n=[].slice.call(n,0,3),O(n,n),r=[].slice.call(r,0,3),O(r,r),"eye"in t&&(s=t.eye,l=[s[0]-e[0],s[1]-e[1],s[2]-e[2]],E(r,l,n),C(r[0],r[1],r[2])<1e-6?r=h(n):O(r,r),i=C(l[0],l[1],l[2]),s=f(n,l)/i,l=f(r,l)/i,o=Math.acos(s),a=Math.acos(l))}return i=Math.log(i),new d(t.zoomMin,t.zoomMax,e,n,r,i,a,o)};var u=t("filtered-vector"),b=t("gl-mat4/invert"),c=t("gl-mat4/rotate"),E=t("gl-vec3/cross"),O=t("gl-vec3/normalize"),f=t("gl-vec3/dot");function C(t,e,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2))}function x(t){return Math.min(1,Math.max(-1,t))}function h(t){var e=Math.abs(t[0]),n=Math.abs(t[1]),r=Math.abs(t[2]),i=[0,0,0];e>Math.max(n,r)?i[2]=1:n>Math.max(e,r)?i[0]=1:i[1]=1;for(var a=0,o=0,s=0;s<3;++s)a+=t[s]*t[s],o+=i[s]*t[s];for(s=0;s<3;++s)i[s]-=o/a*t[s];return O(i,i),i}function d(t,e,n,r,i,a,o,s){this.center=u(n),this.up=u(r),this.right=u(i),this.radius=u([a]),this.angle=u([o,s]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}t=d.prototype;t.setDistanceLimits=function(t,e){t=0<t?Math.log(t):-1/0,e=0<e?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},t.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},t.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,n=this.computedRight,r=0,i=0,a=0;a<3;++a)i+=e[a]*n[a],r+=e[a]*e[a];for(var o=Math.sqrt(r),s=0,a=0;a<3;++a)n[a]-=e[a]*i/r,s+=n[a]*n[a],e[a]/=o;for(var l=Math.sqrt(s),a=0;a<3;++a)n[a]/=l;var u=this.computedToward;E(u,e,n),O(u,u);for(var c=Math.exp(this.computedRadius[0]),f=this.computedAngle[0],h=this.computedAngle[1],d=Math.cos(f),p=Math.sin(f),g=Math.cos(h),y=Math.sin(h),m=this.computedCenter,v=d*g,b=p*g,x=y,_=-d*y,w=-p*y,k=g,M=this.computedEye,T=this.computedMatrix,a=0;a<3;++a){var A=v*n[a]+b*u[a]+x*e[a];T[4*a+1]=_*n[a]+w*u[a]+k*e[a],T[4*a+2]=A,T[4*a+3]=0}t=T[1],f=T[5],h=T[9],d=T[2],p=T[6],y=T[10],g=f*y-h*p,y=h*d-t*y,f=t*p-f*d,d=C(g,y,f);g/=d,y/=d,f/=d,T[0]=g,T[4]=y,T[8]=f;for(a=0;a<3;++a)M[a]=m[a]+T[2+4*a]*c;for(a=0;a<3;++a){for(var s=0,S=0;S<3;++S)s+=T[a+4*S]*M[S];T[12+a]=-s}T[15]=1},t.getMatrix=function(t,e){this.recalcMatrix(t);var n=this.computedMatrix;if(e){for(var r=0;r<16;++r)e[r]=n[r];return e}return n};var p=[0,0,0];t.rotate=function(t,e,n,r){if(this.angle.move(t,e,n),r){this.recalcMatrix(t);var i=this.computedMatrix;p[0]=i[2],p[1]=i[6],p[2]=i[10];for(var a=this.computedUp,o=this.computedRight,s=this.computedToward,l=0;l<3;++l)i[4*l]=a[l],i[4*l+1]=o[l],i[4*l+2]=s[l];c(i,i,r,p);for(l=0;l<3;++l)a[l]=i[4*l],o[l]=i[4*l+1];this.up.set(t,a[0],a[1],a[2]),this.right.set(t,o[0],o[1],o[2])}},t.pan=function(t,e,n,r){e=e||0,n=n||0,r=r||0,this.recalcMatrix(t);var i=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),i[1]),o=i[5],s=i[9],l=C(a,o,s);a/=l,o/=l,s/=l;var u=i[0],c=i[4],l=i[8],i=u*a+c*o+l*s,i=C(u-=a*i,c-=o*i,l-=s*i),a=(u/=i)*e+a*n,o=(c/=i)*e+o*n,n=(l/=i)*e+s*n;this.center.move(t,a,o,n);n=Math.exp(this.computedRadius[0]),n=Math.max(1e-4,n+r);this.radius.set(t,Math.log(n))},t.translate=function(t,e,n,r){this.center.move(t,e||0,n||0,r||0)},t.setMatrix=function(t,e,n,r){var i="number"==typeof n?0|n:1;(i<0||3<i)&&(i=1);var a=(i+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var o=e[i],s=e[i+4],n=e[i+8];r?(u=Math.abs(o),c=Math.abs(s),f=Math.abs(n),u===(h=Math.max(u,c,f))?(o=o<0?-1:1,s=n=0):o=f===h?(n=n<0?-1:1,s=0):(s=s<0?-1:1,n=0)):(o/=d=C(o,s,n),s/=d,n/=d);var l,r=e[a],u=e[4+a],c=e[8+a],f=r*o+u*s+c*n,h=C(r-=o*f,u-=s*f,c-=n*f),d=s*(c/=h)-n*(u/=h),a=n*(r/=h)-o*c,f=o*u-s*r,h=C(d,a,f);d/=h,a/=h,f/=h,this.center.jump(t,void 0,void 0,void 0),this.radius.idle(t),this.up.jump(t,o,s,n),this.right.jump(t,r,u,c),m=2===i?(l=(h=e[1])*r+(i=e[5])*u+(v=e[9])*c,i=h*d+i*a+v*f,v=p<0?-Math.PI/2:Math.PI/2,Math.atan2(i,l)):(p=(l=e[2])*o+(g=e[6])*s+(m=e[10])*n,y=l*r+g*u+m*c,g=l*d+g*a+m*f,v=Math.asin(x(p)),Math.atan2(g,y)),this.angle.jump(t,m,v),this.recalcMatrix(t);var f=e[2],p=e[6],g=e[10],y=this.computedMatrix;b(y,e);var m=y[15],v=y[12]/m,e=y[13]/m,y=y[14]/m,m=Math.exp(this.computedRadius[0]);this.center.jump(t,v-f*m,e-p*m,y-g*m)},t.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},t.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},t.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},t.setDistance=function(t,e){0<e&&this.radius.set(t,Math.log(e))},t.lookAt=function(t,e,n,r){this.recalcMatrix(t),e=e||this.computedEye,n=n||this.computedCenter;var i,a,o,s,l,u=(r=r||this.computedUp)[0],c=r[1],f=r[2],h=C(u,c,f);h<1e-6||(u/=h,c/=h,f/=h,(l=C(i=e[0]-n[0],o=e[1]-n[1],s=e[2]-n[2]))<1e-6||(i/=l,o/=l,s/=l,r=(a=this.computedRight)[0],(a=C(r-=(a=u*r+c*(h=a[1])+f*(e=a[2]))*u,h-=a*c,e-=a*f))<.01&&(a=C(r=c*s-f*o,h=f*i-u*s,e=u*o-c*i))<1e-6||(r/=a,h/=a,e/=a,this.up.set(t,u,c,f),this.right.set(t,r,h,e),this.center.set(t,n[0],n[1],n[2]),this.radius.set(t,Math.log(l)),a=c*e-f*h,n=u*i+c*o+f*s,l=r*i+h*o+e*s,e=(a/=r=C(a,e=f*r-u*e,c=u*h-c*r))*i+(e/=r)*o+(c/=r)*s,o=Math.asin(x(n)),r=Math.atan2(e,l),s=(c=this.angle._state)[c.length-1],n=c[c.length-2],s%=2*Math.PI,e=Math.abs(s+2*Math.PI-r),l=Math.abs(s-r),c=Math.abs(s-2*Math.PI-r),e<l&&(s+=2*Math.PI),c<l&&(s-=2*Math.PI),this.angle.jump(this.angle.lastT(),s,n),this.angle.set(t,r,o))))}},{"filtered-vector":100,"gl-mat4/invert":139,"gl-mat4/rotate":145,"gl-vec3/cross":179,"gl-vec3/dot":180,"gl-vec3/normalize":183}],655:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=t*e,i=o*t,a=i-(i-t),i=t-a,t=o*e,t=t-(t-e),e=e-t,e=i*e-(r-a*t-i*t-a*e);if(n)return n[0]=e,n[1]=r,n;return[e,r]};var o=+(Math.pow(2,27)+1)},{}],656:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=t+e,i=r-t,e=e-i,i=t-(r-i);if(n)return n[0]=i+e,n[1]=r,n;return[i+e,r]}},{}],657:[function(T,t,A){(function(M){(function(){"use strict";var n=T("bit-twiddle"),t=T("dup"),r=T("buffer").Buffer;M.__TYPEDARRAY_POOL||(M.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),BIGUINT64:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),BIGINT64:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var e="undefined"!=typeof Uint8ClampedArray,i="undefined"!=typeof BigUint64Array,a="undefined"!=typeof BigInt64Array,o=M.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=t([32,0])),o.BIGUINT64||(o.BIGUINT64=t([32,0])),o.BIGINT64||(o.BIGINT64=t([32,0])),o.BUFFER||(o.BUFFER=t([32,0]));var s=o.DATA,l=o.BUFFER;function u(t){var e;t&&(e=t.length||t.byteLength,e=n.log2(e),s[e].push(t))}function c(t){var t=n.nextPow2(t),e=n.log2(t),e=s[e];return 0<e.length?e.pop():new ArrayBuffer(t)}function f(t){return new Uint8Array(c(t),0,t)}function h(t){return new Uint16Array(c(2*t),0,t)}function d(t){return new Uint32Array(c(4*t),0,t)}function p(t){return new Int8Array(c(t),0,t)}function g(t){return new Int16Array(c(2*t),0,t)}function y(t){return new Int32Array(c(4*t),0,t)}function m(t){return new Float32Array(c(4*t),0,t)}function v(t){return new Float64Array(c(8*t),0,t)}function b(t){return e?new Uint8ClampedArray(c(t),0,t):f(t)}function x(t){return i?new BigUint64Array(c(8*t),0,t):null}function _(t){return a?new BigInt64Array(c(8*t),0,t):null}function w(t){return new DataView(c(t),0,t)}function k(t){t=n.nextPow2(t);var e=n.log2(t),e=l[e];return 0<e.length?e.pop():new r(t)}A.free=function(t){var e;r.isBuffer(t)?l[n.log2(t.length)].push(t):("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),t&&(e=t.length||t.byteLength,e=0|n.log2(e),s[e].push(t)))},A.freeUint8=A.freeUint16=A.freeUint32=A.freeBigUint64=A.freeInt8=A.freeInt16=A.freeInt32=A.freeBigInt64=A.freeFloat32=A.freeFloat=A.freeFloat64=A.freeDouble=A.freeUint8Clamped=A.freeDataView=function(t){u(t.buffer)},A.freeArrayBuffer=u,A.freeBuffer=function(t){l[n.log2(t.length)].push(t)},A.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return c(t);switch(e){case"uint8":return f(t);case"uint16":return h(t);case"uint32":return d(t);case"int8":return p(t);case"int16":return g(t);case"int32":return y(t);case"float":case"float32":return m(t);case"double":case"float64":return v(t);case"uint8_clamped":return b(t);case"bigint64":return _(t);case"biguint64":return x(t);case"buffer":return k(t);case"data":case"dataview":return w(t);default:return null}return null},A.mallocArrayBuffer=c,A.mallocUint8=f,A.mallocUint16=h,A.mallocUint32=d,A.mallocInt8=p,A.mallocInt16=g,A.mallocInt32=y,A.mallocFloat32=A.mallocFloat=m,A.mallocFloat64=A.mallocDouble=v,A.mallocUint8Clamped=b,A.mallocBigUint64=x,A.mallocBigInt64=_,A.mallocDataView=w,A.mallocBuffer=k,A.clearCache=function(){for(var t=0;t<32;++t)o.UINT8[t].length=0,o.UINT16[t].length=0,o.UINT32[t].length=0,o.INT8[t].length=0,o.INT16[t].length=0,o.INT32[t].length=0,o.FLOAT[t].length=0,o.DOUBLE[t].length=0,o.BIGUINT64[t].length=0,o.BIGINT64[t].length=0,o.UINT8C[t].length=0,s[t].length=0,l[t].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":26,buffer:36,dup:94}],658:[function(t,e,n){"use strict";function r(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e=(e.exports=r).prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},e.find=function(t){for(var e=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[e]!==t;){var r=n[e];n[e]=t,e=r}return t},e.link=function(t,e){var n,r,i=this.find(t),a=this.find(e);i!==a&&(n=this.ranks,r=this.roots,(t=n[i])<(e=n[a])?r[i]=a:e<t?r[a]=i:++n[r[a]=i])}},{}],659:[function(t,e,n){"use strict";e.exports=function(t,e,n){return 0===t.length?t:e?(n||t.sort(e),function(t,e){for(var n=1,r=t.length,i=t[0],a=t[0],o=1;o<r;++o)a=i,e(i=t[o],a)&&(o!==n?t[n++]=i:n++);return t.length=n,t}(t,e)):(n||t.sort(),function(t){for(var e=1,n=t.length,r=t[0],i=t[0],a=1;a<n;++a,i=r)i=r,(r=t[a])!==i&&(a!==e?t[e++]=r:e++);return t.length=e,t}(t))}},{}],660:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.exports=function(t,e){"object"===r(e)&&null!==e||(e={});return i(t,e.canvas||a,e.context||o,e)};var i=t("./lib/vtext"),a=null,o=null;"undefined"!=typeof document&&((a=document.createElement("canvas")).width=8192,a.height=1024,o=a.getContext("2d"))},{"./lib/vtext":661}],661:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=64,a=1.25,o={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};r&&(r.size&&0<r.size&&(i=r.size),r.lineSpacing&&0<r.lineSpacing&&(a=r.lineSpacing),r.styletags&&r.styletags.breaklines&&(o.breaklines=!!r.styletags.breaklines),r.styletags&&r.styletags.bolds&&(o.bolds=!!r.styletags.bolds),r.styletags&&r.styletags.italics&&(o.italics=!!r.styletags.italics),r.styletags&&r.styletags.subscripts&&(o.subscripts=!!r.styletags.subscripts),r.styletags&&r.styletags.superscripts&&(o.superscripts=!!r.styletags.superscripts));return n.font=[r.fontStyle,r.fontVariant,r.fontWeight,i+"px",r.font].filter(function(t){return t}).join(" "),n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr",s(function(t,l,e,n,r,u){e=e.replace(/\n/g,""),e=!0===u.breaklines?e.replace(/\<br\>/g,"\n"):e.replace(/\<br\>/g," ");var i="",a=[];for(f=0;f<e.length;++f)a[f]=i;!0===u.bolds&&(a=F(O,C,e,a));!0===u.italics&&(a=F(P,L,e,a));!0===u.superscripts&&(a=F(R,N,e,a));!0===u.subscripts&&(a=F(D,I,e,a));var o=[],s="";for(f=0;f<e.length;++f)null!==a[f]&&(s+=e[f],o.push(a[f]));var c,f,h,d,p,g=s.split("\n"),y=g.length,m=Math.round(r*n),v=n,b=2*n,x=0,r=y*m+b;t.height<r&&(t.height=r);l.fillStyle="#000",l.fillRect(0,0,t.width,t.height),l.fillStyle="#fff";var _=0,w="";function k(){var t;""!==w&&(t=l.measureText(w).width,l.fillText(w,v+h,b+d),h+=t)}function M(){return Math.round(p)+"px "}for(c=0;c<y;++c){var T=g[c]+"\n";for(d=c*m,p=n,w="",f=h=0;f<T.length;++f){var A=f+_<o.length?o[f+_]:o[o.length-1];i===A?w+=T[f]:(k(),w=T[f],void 0!==A&&(function(t,e){var n,r,i,a,o,s=""+l.font;!0===u.subscripts&&(n=t.indexOf(z),r=e.indexOf(z),(n=-1<n?parseInt(t[1+n]):0)!==(r=-1<r?parseInt(e[1+r]):0)&&(s=s.replace(M(),"?px "),p*=Math.pow(.75,r-n),s=s.replace("?px ",M())),d+=.25*m*(r-n)),!0===u.superscripts&&(a=t.indexOf(j),i=e.indexOf(j),(a=-1<a?parseInt(t[1+a]):0)!==(i=-1<i?parseInt(e[1+i]):0)&&(s=s.replace(M(),"?px "),p*=Math.pow(.75,i-a),s=s.replace("?px ",M())),d-=.25*m*(i-a)),!0===u.bolds&&(i=-1<t.indexOf(C),a=-1<e.indexOf(C),!i&&a&&(s=o?s.replace("italic ","italic bold "):"bold "+s),i&&!a&&(s=s.replace("bold ",""))),!0===u.italics&&(o=-1<t.indexOf(L),e=-1<e.indexOf(L),!o&&e&&(s="italic "+s),o&&!e&&(s=s.replace("italic ",""))),l.font=s}(i,A),i=A))}k(),_+=T.length;var S=0|Math.round(h+2*v);x<S&&(x=S)}r=x,t=b+m*y;return E(l.getImageData(0,0,r,t).data,[t,r,4]).pick(-1,-1,0).transpose(1,0)}(e,n,t,i,a,o),r,i)},e.exports.processPixels=s;var g=t("surface-nets"),E=t("ndarray"),y=t("simplify-planar-graph"),m=t("clean-pslg"),v=t("cdt2d"),b=t("planar-graph-to-polyline"),O="b",C="b|",P="i",L="i|",R="sup",j="+",N="+1",D="sub",z="-",I="-1";function F(t,e,n,r){for(var i,a="<"+t+">",o="</"+t+">",s=a.length,l=o.length,u=e[0]===j||e[0]===z,c=0;-1<c&&-1!==(c=n.indexOf(a,c))&&-1!==(i=n.indexOf(o,c+s))&&!(i<=c);){for(var f,h=c;h<i+l;++h)h<c+s||i<=h?(r[h]=null,n=n.substr(0,h)+" "+n.substr(h+1)):null!==r[h]&&(-1===(f=r[h].indexOf(e[0]))?r[h]+=e:u&&(r[h]=r[h].substr(0,f+1)+(1+parseInt(r[h][f+1]))+r[h].substr(f+2)));var d=c+s,d=n.substr(d,i-d).indexOf(a),c=-1!==d?d:i+l}return r}function r(t,e,n,r){var t=(r=r,t=g(t=t,128),r?y(t.cells,t.positions,.25):{edges:t.cells,positions:t.positions}),i=function(t,e,n){for(var r=e.textAlign||"start",i=e.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=t.length,l=0;l<s;++l)for(var u=t[l],c=0;c<2;++c)a[c]=0|Math.min(a[c],u[c]),o[c]=0|Math.max(o[c],u[c]);var f=0;switch(r){case"center":f=-.5*(a[0]+o[0]);break;case"right":case"end":f=-o[0];break;case"left":case"start":f=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var h=0;switch(i){case"hanging":case"top":h=-a[1];break;case"middle":h=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*n;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var d=1/n;return"lineHeight"in e?d*=+e.lineHeight:"width"in e?d=e.width/(o[0]-a[0]):"height"in e&&(d=e.height/(o[1]-a[1])),t.map(function(t){return[d*(t[0]+f),d*(t[1]+h)]})}(t.positions,e,n),t=t.edges,a="ccw"===e.orientation;if(m(i,t),e.polygons||e.polygon||e.polyline){for(var o=b(t,i),s=new Array(o.length),l=0;l<o.length;++l){for(var u=o[l],c=new Array(u.length),f=0;f<u.length;++f){for(var h=u[f],d=new Array(h.length),p=0;p<h.length;++p)d[p]=i[h[p]].slice();a&&d.reverse(),c[f]=d}s[l]=c}return s}return e.triangles||e.triangulate||e.triangle?{cells:v(i,t,{delaunay:!1,exterior:!1,interior:!0}),positions:i}:{edges:t,positions:i}}function s(t,e,n){try{return r(t,e,n,!0)}catch(t){}try{return r(t,e,n,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:37,"clean-pslg":43,ndarray:254,"planar-graph-to-polyline":266,"simplify-planar-graph":645,"surface-nets":650}],662:[function(t,b,e){"use strict";!function(){if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=d);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var t=new n,r=Object.freeze({});if(t.set(r,1),1===t.get(r))return b.exports=WeakMap;e=!0}}Object.prototype.hasOwnProperty;var i,a=Object.getOwnPropertyNames,o=Object.defineProperty,s=Object.isExtensible,l="weakmap:",u=l+"ident:"+Math.random()+"___";"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array&&(r=new ArrayBuffer(25),r=new Uint8Array(r),crypto.getRandomValues(r),u=l+"rand:"+Array.prototype.map.call(r,function(t){return(t%36).toString(36)}).join("")+"___"),o(Object,"getOwnPropertyNames",{value:function(t){return a(t).filter(p)}}),"getPropertyNames"in Object&&(i=Object.getPropertyNames,o(Object,"getPropertyNames",{value:function(t){return i(t).filter(p)}})),function(){var e=Object.freeze;o(Object,"freeze",{value:function(t){return g(t),e(t)}});var n=Object.seal;o(Object,"seal",{value:function(t){return g(t),n(t)}});var r=Object.preventExtensions;o(Object,"preventExtensions",{value:function(t){return g(t),r(t)}})}();var c=!1,f=0,h=function t(){this instanceof t||m();var r=[],i=[],a=f++;return Object.create(t.prototype,{get___:{value:y(function(t,e){var n=g(t);return n?a in n?n[a]:e:0<=(t=r.indexOf(t))?i[t]:e})},has___:{value:y(function(t){var e=g(t);return e?a in e:0<=r.indexOf(t)})},set___:{value:y(function(t,e){var n=g(t);return n?n[a]=e:0<=(n=r.indexOf(t))?i[n]=e:(n=r.length,i[n]=e,r[n]=t),this})},delete___:{value:y(function(t){var e=g(t);return e?a in e&&delete e[a]:!((e=r.indexOf(t))<0)&&(t=r.length-1,r[e]=void 0,i[e]=i[t],r[e]=r[t],r.length=t,i.length=t,!0)})}})};h.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof n?(e&&"undefined"!=typeof Proxy&&(Proxy=void 0),v.prototype=h.prototype,b.exports=v,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})):("undefined"!=typeof Proxy&&(Proxy=void 0),b.exports=h)}function d(t){t.permitHostObjects___&&t.permitHostObjects___(d)}function p(t){return!(t.substr(0,l.length)==l&&"___"===t.substr(t.length-3))}function g(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[u];if(e&&e.key===t)return e;if(s(t)){e={key:t};try{return o(t,u,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function y(t){return t.prototype=null,Object.freeze(t)}function m(){c||"undefined"==typeof console||(c=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}function v(){this instanceof h||m();var t,r=new n,i=void 0,a=!1;return t=e?function(t,e){return r.set(t,e),r.has(t)||(i=i||new h).set(t,e),this}:function(e,n){if(a)try{r.set(e,n)}catch(t){(i=i||new h).set___(e,n)}else r.set(e,n);return this},Object.create(h.prototype,{get___:{value:y(function(t,e){return i?r.has(t)?r.get(t):i.get___(t,e):r.get(t,e)})},has___:{value:y(function(t){return r.has(t)||!!i&&i.has___(t)})},set___:{value:y(t)},delete___:{value:y(function(t){var e=!!r.delete(t);return i&&i.delete___(t)||e})},permitHostObjects___:{value:y(function(t){if(t!==d)throw new Error("bogus call to permitHostObjects___");a=!0})}})}}()},{}],663:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=t("./hidden-store.js");e.exports=function(){var n={};return function(t){if(("object"!==r(t)||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var e=t.valueOf(n);return e&&e.identity===n?e:i(t,n)}}},{"./hidden-store.js":664}],664:[function(t,e,n){"use strict";e.exports=function(t,e){var n={identity:e},r=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?r.apply(this,arguments):n},writable:!0}),n}},{}],665:[function(t,e,n){"use strict";var r=t("./create-store.js");e.exports=function(){var n=r();return{get:function(t,e){t=n(t);return t.hasOwnProperty("value")?t.value:e},set:function(t,e){return n(t).value=e,this},has:function(t){return"value"in n(t)},delete:function(t){return delete n(t).value}}}},{"./create-store.js":663}],666:[function(t,e,n){"use strict";var r=t("get-canvas-context");e.exports=function(t){return r("webgl",t)}},{"get-canvas-context":104}],667:[function(t,e,n){"use strict";var h=arguments[3],d=arguments[4],p=arguments[5],g=JSON.stringify;e.exports=function(t,e){for(var n,r=Object.keys(p),i=0,a=r.length;i<a;i++){var o=r[i],s=p[o].exports;if(s===t||s&&s.default===t){n=o;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var l={},i=0,a=r.length;i<a;i++)l[o=r[i]]=o;d[n]=["function(require,module,exports){"+t+"(self); }",l]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),c={};c[n]=n,d[u]=["function(require,module,exports){var f = require("+g(n)+");(f.default ? f.default : f)(self);}",c];var f={};!function t(e){f[e]=!0;for(var n in d[e][1]){var r=d[e][1][n];f[r]||t(r)}}(u);c="("+h+")({"+Object.keys(f).map(function(t){return g(t)+":["+d[t][0]+","+g(d[t][1])+"]"}).join(",")+"},{},["+g(u)+"])",u=window.URL||window.webkitURL||window.mozURL||window.msURL,c=new Blob([c],{type:"text/javascript"});if(e&&e.bare)return c;u=u.createObjectURL(c),c=new Worker(u);return c.objectURL=u,c}},{}],668:[function(t,e,n){"use strict";e.exports=t("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":57}],669:[function(t,e,n){"use strict";e.exports=function(t,e){var n=[];return e=+e||0,r(t.hi(t.shape[0]-1),n,e),n};var r=t("./lib/zc-core")},{"./lib/zc-core":668}],670:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-element"),o=(r=t("./decidable-element"))&&r.__esModule?r:{default:r};function s(){var t=u(["\n        :host {\n          margin: 0.25rem;\n        }\n\n        button {\n          width: 100%;\n          height: 100%;\n          padding: 0.375rem 0.75rem;\n\n          font-family: var(---font-family-base);\n          font-size: 1.125rem;\n          line-height: 1.5;\n          color: var(---color-text-inverse);\n\n          border: 0;\n          border-radius: 0.25rem;\n          outline: none;\n        }\n\n        button:disabled {\n          background-color: var(--decidable-button-background-color, var(---color-element-disabled));\n          outline: none;\n          box-shadow: none;\n        }\n\n        button:enabled {\n          cursor: pointer;\n\n          background-color: var(--decidable-button-background-color, var(---color-element-enabled));\n          outline: none;\n          box-shadow: var(---shadow-2);\n        }\n\n        button:enabled:hover {\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        button:enabled:active {\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n\n        :host(.keyboard) button:enabled:focus {\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) button:enabled:focus:active {\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n      "]);return s=function(){return t},t}function l(){var t=u(["\n      <button ?disabled=",">\n        <slot></slot>\n      </button>\n    "]);return l=function(){return t},t}function u(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=g(n);return t=r?(t=g(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(n,o.default);var e=p(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).disabled=!1,t}return h(n,null,[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}}]),h(n,[{key:"render",value:function(){return(0,a.html)(l(),this.disabled)}}],[{key:"styles",get:function(){return[c(g(n),"styles",this),(0,a.css)(s())]}}]),n}();n.default=y,customElements.define("decidable-button",y)},{"./decidable-element":673,"lit-element":211}],671:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={fromAttribute:function(t){return t.split(/\s+/).map(function(t){return Number.parseFloat(t)})},toAttribute:function(t){return t.length?t.map(function(t){return t.toFixed(3)}).join(" "):null}};n.default=r},{}],672:[function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a={fromAttribute:function(t){return new Set(t.split(/\s+/))},toAttribute:function(t){return t.size?r(t).join(" "):null}};n.default=a},{}],673:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element"),i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=i?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(){var t=y(["\n      :host {\n        ---shadow-0: var(--shadow-0, ",");\n        ---shadow-2: var(--shadow-2, ",");\n        ---shadow-4: var(--shadow-4, ",");\n        ---shadow-8: var(--shadow-8, ",");\n\n        ---color-background: var(--color-background, ",");\n        ---color-border: var(--color-border, ",");\n        ---color-text: var(--color-text, ",");\n        ---color-text-inverse: var(--color-text-inverse, ",");\n        ---color-link: var(--color-link, ",");\n        ---color-element-background: var(--color-element-background, ",");\n        ---color-element-disabled: var(--color-element-disabled, ",");\n        ---color-element-enabled: var(--color-element-enabled, ",");\n        ---color-element-selected: var(--color-element-selected, ",");\n        ---color-element-border: var(--color-element-border, ",");\n        ---color-element-emphasis: var(--color-element-emphasis, ",');\n\n        ---font-family-base: var(--font-family-base, "Source Sans Pro", sans-serif);\n        ---font-family-math: var(--font-family-math, "Source Serif Pro", serif);\n\n        ---transition-duration: var(--transition-duration, 500ms);\n\n        font-family: var(---font-family-base);\n      }\n\n      :host,\n      :host *,\n      :host *::before,\n      :host *::after {\n        box-sizing: border-box;\n      }\n\n      .math-greek {\n        font-family: var(---font-family-math);\n        font-style: normal;\n      }\n\n      .math-num {\n        font-family: var(---font-family-base);\n        font-style: normal;\n      }\n\n      .math-var {\n        font-family: var(---font-family-math);\n        font-style: italic;\n      }\n\n      .defs {\n        display: block;\n\n        width: 0;\n        height: 0;\n      }\n    ']);return a=function(){return t},t}function l(){var t=y(['\n      <svg class="defs">\n        <defs>\n          ',"\n        </defs>\n      </svg>\n    "]);return l=function(){return t},t}function u(){var t=y(['<feMorphology in="offA" result="spreadA" operator='," radius="," />"]);return u=function(){return t},t}function c(){var t=y([""]);return c=function(){return t},t}function f(){var t=y(['<feMorphology in="offP" result="spreadP" operator='," radius="," />"]);return f=function(){return t},t}function h(){var t=y([""]);return h=function(){return t},t}function d(){var t=y(['<feMorphology in="offU" result="spreadU" operator='," radius="," />"]);return d=function(){return t},t}function p(){var t=y([""]);return p=function(){return t},t}function g(){var t=y(["\n        <filter id=",' filterUnits="userSpaceOnUse" x="-50vw" y="-50vh" width="200vw" height="200vh">\n          <feComponentTransfer in="SourceAlpha" result="solid">\n            <feFuncA  type="table" tableValues="0 1 1"/>\n          </feComponentTransfer>\n          <feOffset in="solid" result="offU" dx='," dy=",' />\n          <feOffset in="solid" result="offP" dx='," dy=",' />\n          <feOffset in="solid" result="offA" dx='," dy="," />\n          ","\n          ","\n          ","\n          <feGaussianBlur in=",' result="blurU" stdDeviation='," />\n          <feGaussianBlur in=",' result="blurP" stdDeviation='," />\n          <feGaussianBlur in=",' result="blurA" stdDeviation=',' />\n          <feFlood in="SourceGraphic" result="opU" flood-color='," flood-opacity=",' />\n          <feFlood in="SourceGraphic" result="opP" flood-color='," flood-opacity=",' />\n          <feFlood in="SourceGraphic" result="opA" flood-color='," flood-opacity=",' />\n          <feComposite in="opU" in2="blurU" result="shU" operator="in" />\n          <feComposite in="opP" in2="blurP" result="shP" operator="in" />\n          <feComposite in="opA" in2="blurA" result="shA" operator="in" />\n          \x3c!-- HACK Edge: Using a dynamic value for erode radius stops Edge from corrupting the "radius" value! --\x3e\n          <feMorphology in="solid" result="smaller" operator="erode" radius=',' />\n          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />\n          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />\n          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />\n          <feMerge>\n            <feMergeNode in="finalU" />\n            <feMergeNode in="finalP" />\n            <feMergeNode in="finalA" />\n            <feMergeNode in="SourceGraphic" />\n          </feMerge>\n        </filter>']);return g=function(){return t},t}function y(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=w(n);return t=r?(t=w(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(n,r.LitElement);var e=_(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).uniqueId="decidable-".concat(n.uniqueId),t}return b(n,null,[{key:"uniqueId",get:function(){return n.ID+=1}}]),b(n,[{key:"getComputedStyleValue",value:function(t){return window.ShadyCSS?window.ShadyCSS.getComputedStyleValue(this,t):getComputedStyle(this).getPropertyValue(t)}},{key:"firstUpdated",value:function(t){m(w(n.prototype),"firstUpdated",this).call(this,t),i.select(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",function(t){t=t.currentTarget;i.select(t.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)}).on("keydown.keyboard",function(t){t=t.currentTarget;i.select(t.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)})}}],[{key:"cssBoxShadow",value:function(t,e,n){var r=1<arguments.length&&void 0!==e&&e,i=2<arguments.length&&void 0!==n&&n,a=this.shadows.opacityUmbra+this.shadows.opacityBoost,o=this.shadows.opacityPenumbra+this.shadows.opacityBoost,e=this.shadows.opacityAmbient+this.shadows.opacityBoost,n="rgba(".concat(i?this.shadows.inverseBaselineColorString:this.shadows.baselineColorString,", ").concat(a,")"),a="rgba(".concat(i?this.shadows.inverseBaselineColorString:this.shadows.baselineColorString,", ").concat(o,")"),o="rgba(".concat(i?this.shadows.inverseBaselineColorString:this.shadows.baselineColorString,", ").concat(e,")"),i=this.shadows.mapUmbra[t],e=this.shadows.mapPenumbra[t],t=this.shadows.mapAmbient[t],i=(r?"".concat(-i.y,"px ").concat(i.y/2,"px "):"".concat(i.y/2,"px ").concat(i.y,"px ")).concat(i.b,"px ").concat(i.s,"px"),e=(r?"".concat(-e.y,"px ").concat(e.y/2,"px "):"".concat(e.y/2,"px ").concat(e.y,"px ")).concat(e.b,"px ").concat(e.s,"px"),t=(r?"".concat(-t.y,"px ").concat(t.y/2,"px "):"".concat(t.y/2,"px ").concat(t.y,"px ")).concat(t.b,"px ").concat(t.s,"px");return"".concat(i," ").concat(n,", ").concat(e," ").concat(a,", ").concat(t," ").concat(o)}},{key:"greys",get:function(){var t="#999999",e={white:"#ffffff"};return e.light75=i.interpolateRgb(t,"#ffffff")(.75),e.light50=i.interpolateRgb(t,"#ffffff")(.5),e.light25=i.interpolateRgb(t,"#ffffff")(.25),e.grey=t,e.dark25=i.interpolateRgb(t,"#000000")(.25),e.dark50=i.interpolateRgb(t,"#000000")(.5),e.dark75=i.interpolateRgb(t,"#000000")(.75),e.black="#000000",e}},{key:"shadows",get:function(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}},{key:"svgFilters",get:function(){var e=n.shadows,t=e.elevations.map(function(t){return(0,r.svg)(g(),"shadow-".concat(t),e.mapUmbra[t].y/2,e.mapUmbra[t].y,e.mapPenumbra[t].y/2,e.mapPenumbra[t].y,e.mapAmbient[t].y/2,e.mapAmbient[t].y,0===e.mapUmbra[t].s?(0,r.svg)(p()):(0,r.svg)(d(),0<e.mapUmbra[t].s?"dilate":"erode",Math.abs(e.mapUmbra[t].s)),0===e.mapPenumbra[t].s?(0,r.svg)(h()):(0,r.svg)(f(),0<e.mapPenumbra[t].s?"dilate":"erode",Math.abs(e.mapPenumbra[t].s)),0===e.mapAmbient[t].s?(0,r.svg)(c()):(0,r.svg)(u(),0<e.mapAmbient[t].s?"dilate":"erode",Math.abs(e.mapAmbient[t].s)),0===e.mapUmbra[t].s?"offU":"spreadU",e.mapUmbra[t].b/2,0===e.mapPenumbra[t].s?"offP":"spreadP",e.mapPenumbra[t].b/2,0===e.mapAmbient[t].s?"offA":"spreadA",e.mapAmbient[t].b/2,e.baselineColor,e.opacityUmbra+e.opacityBoost,e.baselineColor,e.opacityPenumbra+e.opacityBoost,e.baselineColor,e.opacityAmbient+e.opacityBoost,1)});return(0,r.svg)(l(),t)}},{key:"styles",get:function(){return(0,r.css)(a(),(0,r.unsafeCSS)(this.cssBoxShadow(0)),(0,r.unsafeCSS)(this.cssBoxShadow(2)),(0,r.unsafeCSS)(this.cssBoxShadow(4)),(0,r.unsafeCSS)(this.cssBoxShadow(8)),(0,r.unsafeCSS)(this.greys.white),(0,r.unsafeCSS)(this.greys.light75),(0,r.unsafeCSS)(this.greys.dark75),(0,r.unsafeCSS)(this.greys.white),(0,r.unsafeCSS)(this.greys.dark25),(0,r.unsafeCSS)(this.greys.light75),(0,r.unsafeCSS)(this.greys.light50),(0,r.unsafeCSS)(this.greys.grey),(0,r.unsafeCSS)(this.greys.dark25),(0,r.unsafeCSS)(this.greys.dark50),(0,r.unsafeCSS)(this.greys.dark75))}}]),n}();(n.default=t).ID=0},{d3:89,"lit-element":211}],674:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DecidableElement",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"DecidableButton",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"DecidableSlider",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"DecidableSpinner",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"DecidableSwitch",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"DecidableToggle",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"DecidableToggleOption",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"DecidableConverterArray",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"DecidableConverterSet",{enumerable:!0,get:function(){return f.default}});var r=h(t("./decidable-element")),i=h(t("./button")),a=h(t("./slider")),o=h(t("./spinner")),s=h(t("./switch")),l=h(t("./toggle")),u=h(t("./toggle-option")),c=h(t("./converter-array")),f=h(t("./converter-set"));function h(t){return t&&t.__esModule?t:{default:t}}},{"./button":670,"./converter-array":671,"./converter-set":672,"./decidable-element":673,"./slider":675,"./spinner":676,"./switch":677,"./toggle":679,"./toggle-option":678}],675:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-html/directives/if-defined"),o=t("lit-element"),s=(r=t("./decidable-element"))&&r.__esModule?r:{default:r};function l(){var t=c(["\n        :host {\n          ---shadow-2-rotate: var(--shadow-2-rotate, ",");\n          ---shadow-4-rotate: var(--shadow-4-rotate, ",");\n          ---shadow-8-rotate: var(--shadow-8-rotate, ",");\n\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n        }\n\n        label {\n          margin: 0.25rem 0.25rem 0;\n        }\n\n        .range {\n          display: inline-block;\n\n          width: 3.5rem;\n          height: 4.75rem;\n          margin: 0 0.25rem 0.25rem;\n        }\n\n        decidable-spinner {\n          --decidable-spinner-input-width: 3.5rem;\n\n          margin: 0 0.25rem 0.25rem;\n        }\n\n        /* Adapted from http://danielstern.ca/range.css/#/ */\n        /* Overall */\n        input[type=range] {\n          width: 4.75rem;\n          height: 3.5rem;\n          padding: 0;\n          margin: 0;\n\n          background-color: unset;\n\n          transform: rotate(-90deg);\n          transform-origin: 2.375rem 2.375rem;\n\n          /* stylelint-disable-next-line property-no-vendor-prefix */\n          -webkit-appearance: none;\n        }\n\n        input[type=range]:enabled {\n          cursor: ns-resize;\n        }\n\n        input[type=range]:focus {\n          outline: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-tooltip {\n          display: none;\n        }\n\n        /* Track */\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-webkit-slider-runnable-track {\n          width: 100%;\n          height: 4px;\n\n          background: var(---color-element-disabled);\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        input[type=range]:focus::-webkit-slider-runnable-track {\n          background: var(---color-element-disabled);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-moz-range-track {\n          width: 100%;\n          height: 4px;\n\n          background: var(---color-element-disabled);\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-track {\n          width: 100%;\n          height: 4px;\n\n          color: transparent;\n\n          background: transparent;\n          border-color: transparent;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-fill-lower {\n          background: #cccccc;\n          /* background: var(---color-element-disabled); */\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-fill-upper {\n          background: #cccccc;\n          /* background: var(---color-element-disabled); */\n          border: 0;\n          border-radius: 2px;\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:focus::-ms-fill-lower {\n          background: var(---color-element-disabled);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:focus::-ms-fill-upper {\n          background: var(---color-element-disabled);\n        }\n\n        /* Thumb */\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-webkit-slider-thumb {\n          width: 10px;\n          height: 20px;\n          margin-top: -8px;\n\n          border: 0;\n          border-radius: 4px;\n\n          /* stylelint-disable-next-line property-no-vendor-prefix */\n          -webkit-appearance: none;\n        }\n\n        input[type=range]:disabled::-webkit-slider-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        input[type=range]:enabled::-webkit-slider-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        input[type=range]:enabled:hover::-webkit-slider-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        input[type=range]:enabled:active::-webkit-slider-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-moz-range-thumb {\n          width: 10px;\n          height: 20px;\n\n          border: 0;\n          border-radius: 4px;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:disabled::-moz-range-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled::-moz-range-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:hover::-moz-range-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:active::-moz-range-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]::-ms-thumb {\n          width: 10px;\n          height: 20px;\n          margin-top: 0;\n\n          background: #999999;\n          /* background: var(---color-element-enabled); */\n          border: 0;\n          border-radius: 4px;\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:disabled::-ms-thumb {\n          background: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled::-ms-thumb {\n          background: var(---color-element-enabled);\n          box-shadow: var(---shadow-2-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:hover::-ms-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        input[type=range]:enabled:active::-ms-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n\n        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */\n        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {\n          box-shadow: var(---shadow-4-rotate);\n        }\n\n        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {\n          box-shadow: var(---shadow-8-rotate);\n        }\n      "]);return l=function(){return t},t}function u(){var t=c(["\n      <label for=",'>\n        <slot></slot>\n      </label>\n      <div class="range">\n        <input type="range" id='," min="," max="," step="," .value="," @change="," @input=",">\n      </div>\n      <decidable-spinner min="," max="," step="," .value="," @input=","></decidable-spinner>\n    "]);return u=function(){return t},t}function c(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=y(n);return t=r?(t=y(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(n,s.default);var e=g(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).disabled=!1,t.max=void 0,t.min=void 0,t.step=void 0,t.value=void 0,t}return d(n,null,[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}}]),d(n,[{key:"changed",value:function(t){this.value=t.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"inputted",value:function(t){this.value=t.target.value}},{key:"render",value:function(){return(0,o.html)(u(),"".concat(this.uniqueId,"-slider"),"".concat(this.uniqueId,"-slider"),(0,a.ifDefined)(this.min),(0,a.ifDefined)(this.max),(0,a.ifDefined)(this.step),this.value,this.changed.bind(this),this.inputted.bind(this),(0,a.ifDefined)(this.min),(0,a.ifDefined)(this.max),(0,a.ifDefined)(this.step),this.value,this.inputted.bind(this))}}],[{key:"styles",get:function(){return[f(y(n),"styles",this),(0,o.css)(l(),(0,o.unsafeCSS)(this.cssBoxShadow(2,!0,!1)),(0,o.unsafeCSS)(this.cssBoxShadow(4,!0,!1)),(0,o.unsafeCSS)(this.cssBoxShadow(8,!0,!1)))]}}]),n}();n.default=m,customElements.define("decidable-slider",m)},{"./decidable-element":673,"lit-element":211,"lit-html/directives/if-defined":212}],676:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-html/directives/if-defined"),o=t("lit-element"),s=(r=t("./decidable-element"))&&r.__esModule?r:{default:r};function l(){var t=c(['\n        :host {\n          ---decidable-spinner-font-size: var(--decidable-spinner-font-size, 1.125rem);\n          ---decidable-spinner-input-width: var(--decidable-spinner-input-width, 4rem);\n          ---decidable-spinner-prefix: var(--decidable-spinner-prefix, "");\n\n          display: block;\n        }\n\n        label {\n          position: relative;\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n\n          margin: 0;\n\n          font-size: 0.75rem;\n        }\n\n        label::before {\n          position: absolute;\n          bottom: 1px;\n          left: calc(50% - var(---decidable-spinner-input-width) / 2 + 0.25rem);\n\n          font-size: var(---decidable-spinner-font-size);\n          line-height: normal;\n\n          content: var(---decidable-spinner-prefix);\n        }\n\n        input[type=number] {\n          width: var(---decidable-spinner-input-width);\n\n          font-family: var(---font-family-base);\n          font-size: var(---decidable-spinner-font-size);\n          color: inherit;\n          text-align: right;\n\n          background: none;\n          border: 0;\n          border-radius: 0;\n          outline: none;\n          box-shadow: var(---shadow-2);\n\n          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */\n        }\n\n        input[type=number]:hover {\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=number]:focus,\n        input[type=number]:active {\n          box-shadow: var(---shadow-8);\n        }\n\n        input[type=number]:disabled {\n          color: var(---color-text);\n\n          border: 0;\n          box-shadow: none;\n\n          /* HACK: Use correct text color in Safari */\n          -webkit-opacity: 1;\n          /* HACK: Hide spinners in disabled input for Firefox and Safari */\n          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */\n          /* HACK: Use correct text color in Safari */\n          -webkit-text-fill-color: var(---color-text);\n        }\n\n        /* HACK: Hide spinners in disabled input for Firefox and Safari */\n        input[type=number]:disabled::-webkit-outer-spin-button,\n        input[type=number]:disabled::-webkit-inner-spin-button {\n          margin: 0;\n          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */\n        }\n      ']);return l=function(){return t},t}function u(){var t=c(["\n      <label>\n        <slot></slot>\n        <input ?disabled=",' type="number" min='," max="," step="," .value="," @input=",">\n      </label>\n    "]);return u=function(){return t},t}function c(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=y(n);return t=r?(t=y(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(n,s.default);var e=g(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).disabled=!1,t.max=void 0,t.min=void 0,t.step=void 0,t.value=void 0,t}return d(n,null,[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}}]),d(n,[{key:"inputted",value:function(t){this.value=t.target.value}},{key:"render",value:function(){return(0,o.html)(u(),this.disabled,(0,a.ifDefined)(this.min),(0,a.ifDefined)(this.max),(0,a.ifDefined)(this.step),this.value,this.inputted.bind(this))}}],[{key:"styles",get:function(){return[f(y(n),"styles",this),(0,o.css)(l())]}}]),n}();n.default=m,customElements.define("decidable-spinner",m)},{"./decidable-element":673,"lit-element":211,"lit-html/directives/if-defined":212}],677:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-element"),o=(r=t("./decidable-element"))&&r.__esModule?r:{default:r};function s(){var t=u(['\n        :host {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n        }\n\n        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */\n        input[type=checkbox] {\n          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */\n          position: absolute;\n\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0 0 0 0);\n\n          white-space: nowrap;\n\n          border: 0;\n          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */\n        }\n\n        input[type=checkbox] + label {\n          order: 1;\n\n          margin: 0 0.25rem 0.25rem;\n\n          font-weight: 400;\n        }\n\n        input[type=checkbox] + label + label {\n          position: relative;\n\n          min-width: 24px;\n          padding: 0 0 36px;\n          margin: 0.25rem 0.25rem 0;\n\n          font-weight: 400;\n\n          outline: none;\n        }\n\n        input[type=checkbox] + label + label::before,\n        input[type=checkbox] + label + label::after {\n          position: absolute;\n\n          left: 50%;\n\n          margin: 0;\n\n          content: "";\n\n          outline: 0;\n\n          transition: all var(---transition-duration) ease;\n          transform: translate(-50%, 0);\n        }\n\n        input[type=checkbox] + label + label::before {\n          bottom: 1px;\n\n          width: 8px;\n          height: 34px;\n\n          background-color: var(---color-element-disabled);\n          border-radius: 4px;\n        }\n\n        input[type=checkbox] + label + label::after {\n          bottom: 0;\n\n          width: 18px;\n          height: 18px;\n\n          background-color: var(---color-element-enabled);\n          border-radius: 50%;\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=checkbox]:checked + label + label::after {\n          transform: translate(-50%, -100%);\n        }\n\n        input[type=checkbox]:disabled + label + label::after {\n          background-color: var(---color-element-disabled);\n          box-shadow: none;\n        }\n\n        input[type=checkbox]:enabled + label,\n        input[type=checkbox]:enabled + label + label {\n          cursor: pointer;\n        }\n\n        input[type=checkbox]:enabled + label:hover + label::after,\n        input[type=checkbox]:enabled + label + label:hover::after {\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=checkbox]:enabled + label:active + label::after,\n        input[type=checkbox]:enabled + label + label:active::after {\n          box-shadow: var(---shadow-8);\n        }\n\n        /* stylelint-disable-next-line selector-max-compound-selectors */\n        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {\n          box-shadow: var(---shadow-4);\n        }\n\n        /* stylelint-disable-next-line selector-max-compound-selectors */\n        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,\n        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {\n          box-shadow: var(---shadow-8);\n        }\n      ']);return s=function(){return t},t}function l(){var t=u(['\n      <input type="checkbox" id='," ?checked="," ?disabled="," @change=",">\n      <label for=",'>\n        <slot name="off-label"></slot>\n      </label>\n      <label for=',">\n        <slot></slot>\n      </label>\n    "]);return l=function(){return t},t}function u(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=g(n);return t=r?(t=g(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(n,o.default);var e=p(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).checked=!1,t.disabled=!1,t}return h(n,null,[{key:"properties",get:function(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}}]),h(n,[{key:"changed",value:function(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}},{key:"render",value:function(){return(0,a.html)(l(),"".concat(this.uniqueId,"-checkbox"),this.checked,this.disabled,this.changed.bind(this),"".concat(this.uniqueId,"-checkbox"),"".concat(this.uniqueId,"-checkbox"))}}],[{key:"styles",get:function(){return[c(g(n),"styles",this),(0,a.css)(s())]}}]),n}();n.default=y,customElements.define("decidable-switch",y)},{"./decidable-element":673,"lit-element":211}],678:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-element"),o=(r=t("./decidable-element"))&&r.__esModule?r:{default:r};function s(){var t=u(["\n        :host {\n          display: flex;\n        }\n\n        input[type=radio] {\n          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */\n          position: absolute;\n\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0 0 0 0);\n\n          white-space: nowrap;\n\n          border: 0;\n          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */\n        }\n\n        input[type=radio] + label {\n          width: 100%;\n          padding: 0.375rem 0.75rem;\n\n          font-family: var(---font-family-base);\n          font-size: 1.125rem;\n          line-height: 1.5;\n          color: var(---color-text-inverse);\n          text-align: center;\n\n          cursor: pointer;\n\n          background-color: var(---color-element-enabled);\n          border: 0;\n          border-radius: 0;\n          outline: none;\n\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=radio]:checked + label {\n          background-color: var(---color-element-selected);\n          outline: none;\n          box-shadow: var(---shadow-2);\n        }\n\n        input[type=radio] + label:hover {\n          z-index: 1;\n\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        input[type=radio] + label:active {\n          z-index: 2;\n\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n\n        :host(:first-of-type) input[type=radio] + label {\n          border-top-left-radius: 0.25rem;\n          border-top-right-radius: 0.25rem;\n        }\n\n        :host(:last-of-type) input[type=radio] + label {\n          border-bottom-right-radius: 0.25rem;\n          border-bottom-left-radius: 0.25rem;\n        }\n\n        :host(.keyboard) input[type=radio]:focus + label {\n          z-index: 1;\n\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) input[type=radio]:focus:checked + label {\n          z-index: 1;\n\n          background-color: var(---color-element-selected);\n          outline: none;\n          box-shadow: var(---shadow-4);\n        }\n\n        :host(.keyboard) input[type=radio]:focus + label:active {\n          z-index: 2;\n\n          outline: none;\n          box-shadow: var(---shadow-8);\n        }\n      "]);return s=function(){return t},t}function l(){var t=u(['\n      <input type="radio" id='," name="," value="," .checked="," @change=",">\n      <label for=",">\n        <slot></slot>\n      </label>\n    "]);return l=function(){return t},t}function u(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=g(n);return t=r?(t=g(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(n,o.default);var e=p(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).checked=!1,t.disabled=!1,t.name=void 0,t.value=void 0,t}return h(n,null,[{key:"properties",get:function(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}}]),h(n,[{key:"changed",value:function(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}},{key:"render",value:function(){return(0,a.html)(l(),"".concat(this.uniqueId,"-radio"),this.name,this.value,this.checked,this.changed.bind(this),"".concat(this.uniqueId,"-radio"))}}],[{key:"styles",get:function(){return[c(g(n),"styles",this),(0,a.css)(s())]}}]),n}();n.default=y,customElements.define("decidable-toggle-option",y)},{"./decidable-element":673,"lit-element":211}],679:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-element"),o=(r=t("./decidable-element"))&&r.__esModule?r:{default:r};function s(){var t=u(["\n        fieldset {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: stretch;\n          justify-content: center;\n\n          margin: 0.25rem;\n\n          border: 0;\n        }\n\n        legend {\n          text-align: center;\n        }\n      "]);return s=function(){return t},t}function l(){var t=u(["\n      <fieldset ?disabled=",'>\n        <legend><slot name="label"></slot></legend>\n        <slot></slot>\n      </fieldset>\n    ']);return l=function(){return t},t}function u(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=g(n);return t=r?(t=g(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(n,o.default);var e=p(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).disabled=!1,t}return h(n,null,[{key:"properties",get:function(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}}]),h(n,[{key:"render",value:function(){return(0,a.html)(l(),this.disabled)}}],[{key:"styles",get:function(){return[c(g(n),"styles",this),(0,a.css)(s())]}}]),n}();n.default=y,customElements.define("decidable-toggle",y)},{"./decidable-element":673,"lit-element":211}],680:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h=t("lit-element"),d=t("lit-transition"),r=o(t("@decidable/prospectable-math")),a=o(t("../equations/cpt-equation"));function o(t){return t&&t.__esModule?t:{default:t}}function s(){var t=l(["\n        /* :host {\n          display: inline-block;\n        } */\n      "]);return s=function(){return t},t}function p(){var t=l(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"]);return p=function(){return t},t}function g(){var t=l(['\n      <tr>\n        <td class="right">\n          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>&nbsp;<span class="function w"><var class="math-var w tight">w</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span><span class="plus">+</span><span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>&nbsp;<span class="bracket tight">[</span><span class="tight">1</span><span class="minus">−</span><span class="function w"><var class="math-var w">w</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span><span class="bracket tight">]</span>\n        </td>\n        <td>\n          ','\n        </td>\n        <td class="left">\n          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>','<span class="paren tight">)</span></span>\n        </td>\n      </tr>\n      <tr>\n        <td class="right">\n          ',"&nbsp;",'<span class="plus">+</span>',"&nbsp;","\n        </td>\n        <td>\n          ",'\n        </td>\n        <td class="left">\n          ','\n        </td>\n      </tr>\n      <tr>\n        <td class="right">\n          ',"\n        </td>\n        <td>\n          ",'\n        </td>\n        <td class="left">\n          ',"\n        </td>\n      </tr>"]);return g=function(){return t},t}function y(){var t=l(['<span class="comparison">≟</span>']);return y=function(){return t},t}function m(){var t=l(['<var class="math-var u">U<sub class="subscript sure">sure</sub></var>']);return m=function(){return t},t}function v(){var t=l(['<var class="math-var u">U<sub class="subscript gamble">gamble</sub></var>']);return v=function(){return t},t}function b(){var t=l(['<var class="math-var v">v<sub class="subscript sure">sure</sub></var>']);return b=function(){return t},t}function x(){var t=l(['<var class="math-var w">w<sub class="subscript loss">loss</sub></var>']);return x=function(){return t},t}function _(){var t=l(['<var class="math-var w">w<sub class="subscript win">win</sub></var>']);return _=function(){return t},t}function w(){var t=l(['<var class="math-var v">v<sub class="subscript loss">loss</sub></var>']);return w=function(){return t},t}function k(){var t=l(['<var class="math-var v">v<sub class="subscript win">win</sub></var>']);return k=function(){return t},t}function M(){var t=l(['<var class="math-var x">x<sub class="subscript sure">sure</sub></var>']);return M=function(){return t},t}function T(){var t=l(['<var class="math-var p">p<sub class="subscript win">win</sub></var>']);return T=function(){return t},t}function A(){var t=l(['<var class="math-var x">x<sub class="subscript loss">loss</sub></var>']);return A=function(){return t},t}function S(){var t=l(['<var class="math-var x">x<sub class="subscript win">win</sub></var>']);return S=function(){return t},t}function E(){var t=l(['<span class="comparison">=</span>']);return E=function(){return t},t}function O(){var t=l(['<span class="comparison">&lt;</span>']);return O=function(){return t},t}function C(){var t=l(['<span class="comparison">&gt;</span>']);return C=function(){return t},t}function P(){var t=l(["",""]);return P=function(){return t},t}function L(){var t=l(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>']);return L=function(){return t},t}function R(){var t=l(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U<sub class="subscript gamble">gamble</sub></var>\n        </decidable-spinner>']);return R=function(){return t},t}function j(){var t=l(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>']);return j=function(){return t},t}function N(){var t=l(['<decidable-spinner class="w" disabled .value="','">\n          <var class="math-var">w<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>']);return N=function(){return t},t}function D(){var t=l(['<decidable-spinner class="w" disabled .value="','">\n          <var class="math-var">w<sub class="subscript win">win</sub></var>\n        </decidable-spinner>']);return D=function(){return t},t}function z(){var t=l(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>']);return z=function(){return t},t}function I(){var t=l(['<decidable-spinner class="v" disabled .value="','">\n          <var class="math-var">v<sub class="subscript win">win</sub></var>\n        </decidable-spinner>']);return I=function(){return t},t}function F(){var t=l(['<decidable-spinner class="x" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">x<sub class="subscript sure">sure</sub></var>\n        </decidable-spinner>']);return F=function(){return t},t}function B(){var t=l(['<decidable-spinner class="p" ?disabled=',' min="0" max="1" step=".01" .value="','" @input=','>\n          <var class="math-var">p<sub class="subscript win">win</sub></var>\n        </decidable-spinner>']);return B=function(){return t},t}function U(){var t=l(['<decidable-spinner class="x" disabled .value="','">\n          <var class="math-var">x<sub class="subscript loss">loss</sub></var>\n        </decidable-spinner>']);return U=function(){return t},t}function V(){var t=l(['<decidable-spinner class="x" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">x<sub class="subscript win">win</sub></var>\n        </decidable-spinner>']);return V=function(){return t},t}function l(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=G(n);return t=r?(t=G(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(n,a.default);var e=q(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).numeric=!1,t.xl=0,t.xw=100,t.pw=.75,t.xs=50,t.a=.8,t.l=1.2,t.g=.8,t.alignState(),t}return f(n,null,[{key:"properties",get:function(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}}]),f(n,[{key:"alignState",value:function(){this.vw=r.default.xal2v(this.xw,this.a,this.l),this.vl=r.default.xal2v(this.xl,this.a,this.l),this.ww=r.default.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=r.default.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs,this.uDiff=this.ug-this.us}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-calculation-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,a:this.a,l:this.l,g:this.g},bubbles:!0}))}},{key:"xwInput",value:function(t){this.xw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"pwInput",value:function(t){this.pw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"xsInput",value:function(t){this.xs=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"aInput",value:function(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"lInput",value:function(t){this.l=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"gInput",value:function(t){this.g=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var t,e,n,r,i,a,o,s,l,u,c;this.alignState(),c=this.numeric?(t=(0,h.html)(V(),!this.interactive,this.xw,this.xwInput.bind(this)),e=(0,h.html)(U(),this.xl),n=(0,h.html)(B(),!this.interactive,+this.pw.toFixed(2),this.pwInput.bind(this)),r=(0,h.html)(F(),!this.interactive,this.xs,this.xsInput.bind(this)),i=(0,h.html)(I(),+this.vw.toFixed(1)),a=(0,h.html)(z(),+this.vl.toFixed(1)),o=(0,h.html)(D(),+this.ww.toFixed(2)),s=(0,h.html)(N(),+this.wl.toFixed(2)),l=(0,h.html)(j(),+this.vs.toFixed(1)),u=(0,h.html)(R(),+this.ug.toFixed(1)),f=(0,h.html)(L(),+this.us.toFixed(1)),(0,h.html)(P(),(0,d.transition)(0<this.uDiff?(0,d.mark)((0,h.html)(C()),"gt"):this.uDiff<0?(0,d.mark)((0,h.html)(O()),"lt"):(0,d.mark)((0,h.html)(E()),"eq"),(0,d.fade)({mode:"out-in",duration:200})))):(t=(0,h.html)(S()),e=(0,h.html)(A()),n=(0,h.html)(T()),r=(0,h.html)(M()),i=(0,h.html)(k()),a=(0,h.html)(w()),o=(0,h.html)(_()),s=(0,h.html)(x()),l=(0,h.html)(b()),u=(0,h.html)(v()),f=(0,h.html)(m()),(0,h.html)(y()));var f=(0,h.html)(g(),t,n,e,n,c,r,i,o,a,s,c,l,u,c,f);return(0,h.html)(p(),f)}}],[{key:"styles",get:function(){return[u(G(n),"styles",this),(0,h.css)(s())]}}]),n}();n.default=t,customElements.define("cpt-calculation",t)},{"../equations/cpt-equation":696,"@decidable/prospectable-math":708,"lit-element":211,"lit-transition":237}],681:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){n.onmessage=function(t){var e=new i.AmwgSampler({alpha:{type:"real",lower:0,upper:1},lambda:{type:"real",lower:0,upper:10},gamma:{type:"real",lower:0,upper:1},luce:{type:"real",lower:0,upper:100}},function(a,t){var o=0;o+=s.beta(a.alpha,1.25,1.25);o+=s.gamma(a.lambda,3,1.5);o+=s.beta(a.gamma,1.25,1.25);return o+=s.gamma(a.luce,3,1.5),t.forEach(function(t){var e=l.default.xal2v(t.xl,a.alpha,a.lambda),n=l.default.xal2v(t.xw,a.alpha,a.lambda),r=l.default.xal2v(t.xs,a.alpha,a.lambda),i=l.default.pg2w(t.pw,a.gamma),n=(1-i)*e+i*n,n=1/(1+Math.exp(a.luce*(r-n))),t="sure"===t.response?0:1;o+=s.bern(t,n)}),o},t.data);e.burn(1e3);t=e.sample(5e3),e={alpha:a.median(t.alpha),lambda:a.median(t.lambda),gamma:a.median(t.gamma),luce:a.median(t.luce)};n.postMessage({results:e,samples:t})}},t("regenerator-runtime/runtime");var r,s=c(t("bayes.js/distributions")),i=c(t("bayes.js/mcmc")),a=c(t("d3")),l=(r=t("@decidable/prospectable-math"))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n,r,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,e&&e.set(t,i),i}},{"@decidable/prospectable-math":708,"bayes.js/distributions":7,"bayes.js/mcmc":8,d3:89,"regenerator-runtime/runtime":625}],682:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element"),i=d(t("plotly.js/lib/core")),a=d(t("plotly.js/lib/histogram")),s=f(t("webworkify")),l=f(t("../cpt-element")),u=f(t("./cpt-fit-worker")),c=f(t("./plotly-style.auto"));function f(t){return t&&t.__esModule?t:{default:t}}function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function d(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var n,r,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,e&&e.set(t,i),i}function p(){var t=y(["\n        /* :host {\n          display: inline-block;\n        } */\n\n        .trace,\n        .hist {\n          display: inline-block;\n\n          width: 20rem;\n          height: 15rem;\n        }\n      "]);return p=function(){return t},t}function g(){var t=y(["\n      <div>\n        <div>After ",' trials:</div>\n        <div>Current:\n          <var class="math-var a">α</var> = ',',\n          <var class="math-var l">λ</var> = ',',\n          <var class="math-var g">γ</var> = ','\n        </div>\n        <div class="param">\n          <div class="trace alpha"></div>\n          <div class="hist alpha"></div>\n        </div>\n        <div class="param">\n          <div class="trace lambda"></div>\n          <div class="hist lambda"></div>\n        </div>\n        <div class="param">\n          <div class="trace gamma"></div>\n          <div class="hist gamma"></div>\n        </div>\n        <div class="param">\n          <div class="trace luce"></div>\n          <div class="hist luce"></div>\n        </div>\n      </div>\n    ']);return g=function(){return t},t}function y(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=w(n);return t=r?(t=w(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.register([a]);a=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(n,l.default);var t=_(n);function n(){var e;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this)).a=1,e.l=1,e.g=1,e.choices=[],e.samples=null,e.working=!1,e.queued=!1,e.worker=(0,s.default)(u.default),e.worker.onmessage=function(t){e.working=!1,e.samples=t.data.samples,e.a=t.data.results.alpha,e.l=t.data.results.lambda,e.g=t.data.results.gamma,e.requestUpdate(),e.dispatchEvent(new CustomEvent("cpt-fit-update",{detail:{a:e.a,l:e.l,g:e.g},bubbles:!0})),e.queued&&e.fit()},e.fit(),e}return b(n,null,[{key:"properties",get:function(){return{}}}]),b(n,[{key:"fit",value:function(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}},{key:"clear",value:function(){this.choices=[],this.fit()}},{key:"get",value:function(t){var e=0<arguments.length&&void 0!==t?t:"default",t=this.choices.find(function(t){return t.name===e});return void 0===t?null:t}},{key:"set",value:function(t,e,n,r,i,a,o){var s=5<arguments.length&&void 0!==a?a:"",a=6<arguments.length&&void 0!==o?o:"",o=this.choices.find(function(t){return t.name===s});void 0===o?this.choices.push({xl:t,xw:e,pw:n,xs:r,response:i,name:s,label:a}):(o.xl=t,o.xw=e,o.pw=n,o.xs=r,o.response=i,o.label=a),this.fit()}},{key:"render",value:function(){return(0,r.html)(g(),this.choices.length,this.a.toFixed(2),this.l.toFixed(2),this.g.toFixed(2))}},{key:"plotParam",value:function(t){var e={l:40,r:10,b:40,t:40,pad:4};i.react(this.shadowRoot.querySelector(".trace.".concat(t)),[{y:this.samples[t]}],{margin:e,title:"Traceplot of ".concat(t)}),i.react(this.shadowRoot.querySelector(".hist.".concat(t)),[{x:this.samples[t],type:"histogram"}],{margin:e,title:"Posterior of ".concat(t)})}},{key:"update",value:function(t){m(w(n.prototype),"update",this).call(this,t),null!==this.samples&&(this.plotParam("alpha"),this.plotParam("lambda"),this.plotParam("gamma"),this.plotParam("luce"))}}],[{key:"styles",get:function(){return[m(w(n),"styles",this),c.default,(0,r.css)(p())]}}]),n}();n.default=a,customElements.define("cpt-fit",a)},{"../cpt-element":695,"./cpt-fit-worker":681,"./plotly-style.auto":694,"lit-element":211,"plotly.js/lib/core":268,"plotly.js/lib/histogram":269,webworkify:667}],683:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element"),y=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=i?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3")),m=a(t("@decidable/prospectable-math")),i=a(t("../cpt-element"));function a(t){return t&&t.__esModule?t:{default:t}}function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function l(){var t=c(['\n        :host {\n          display: inline-block;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n        }\n\n        text {\n          /* stylelint-disable property-no-vendor-prefix */\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n        }\n\n        .curve.interactive {\n          cursor: nwse-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .curve.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .curve.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .curve.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .point.interactive {\n          cursor: nesw-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */\n          stroke: #000000;\n          stroke-opacity: 0;\n          stroke-width: 0;\n        }\n\n        /* Make a larger target for touch users */\n        @media (pointer: coarse) {\n          .point.interactive .circle {\n            stroke: #000000;\n            stroke-opacity: 0;\n            stroke-width: 12px;\n          }\n        }\n\n        .point.interactive:hover {\n          filter: url("#shadow-4");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #ff0000;\n        }\n\n        .point.interactive:active {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #00ff00;\n        }\n\n        :host(.keyboard) .point.interactive:focus {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #0000ff;\n        }\n\n        .background {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-border);\n          stroke-width: 1;\n          shape-rendering: crispEdges;\n        }\n\n        .title-x,\n        .title-y {\n          font-weight: 600;\n\n          fill: currentColor;\n        }\n\n        .tick {\n          font-size: 0.75rem;\n        }\n\n        .scale-x path,\n        .scale-x line,\n        .scale-y path,\n        .scale-y line {\n          stroke: var(---color-element-border);\n        }\n\n        .diagonal {\n          stroke: var(---color-element-border);\n          stroke-dasharray: 4;\n          stroke-width: 1;\n        }\n\n        .curve {\n          fill: none;\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .line-p,\n        .line-w {\n          fill: none;\n          stroke-width: 2;\n        }\n\n        .line-p {\n          stroke: var(---color-p);\n        }\n\n        .line-w {\n          stroke: var(---color-w);\n        }\n\n        .point .circle {\n          fill: var(---color-element-emphasis);\n\n          /* r: 6; HACK: Firefox does not support CSS SVG Geometry Properties */\n        }\n\n        .point .label {\n          font-size: 0.75rem;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n\n          fill: var(---color-text-inverse);\n        }\n      ']);return l=function(){return t},t}function u(){var t=c(["\n      ","\n    "]);return u=function(){return t},t}function c(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function v(t,e,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=b(n);return t=r?(t=b(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,i.default);var e=p(g);function g(){var t;return function(t){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).firstUpdate=!0,t.drag=!1,t.lines=["all","first","rest","none"],t.line="first",t.points=["all","first","rest","none"],t.point="first",t.p=.75,t.g=.5,t.label="",t.locations=[{name:"default",p:t.p,g:t.g,label:""}],t.lineArray=[],t.pointArray=[],t.width=NaN,t.height=NaN,t.rem=NaN,t.alignState(),t}return h(g,null,[{key:"properties",get:function(){return{line:{attribute:"line",type:String,reflect:!0},point:{attribute:"point",type:String,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}}]),h(g,[{key:"alignState",value:function(){var n=this;this.locations[0].p=this.p,this.locations[0].g=this.g,this.locations[0].label=this.label,this.w=m.default.pg2w(this.p,this.g),this.lineArray=[],this.pointArray=[],this.locations.forEach(function(t,e){t.w=m.default.pg2w(t.p,t.g),(0===e&&("first"===n.line||"all"===n.line)||0<e&&("rest"===n.line||"all"===n.line))&&n.lineArray.push(t),(0===e&&("first"===n.point||"all"===n.point)||0<e&&("rest"===n.point||"all"===n.point))&&n.pointArray.push(t)})}},{key:"set",value:function(t,e,n,r){var i=2<arguments.length&&void 0!==n?n:"default",n=3<arguments.length&&void 0!==r?r:"";"default"===i&&(this.p=t,this.g=e,this.label=n);r=this.locations.find(function(t){return t.name===i});void 0===r?this.locations.push({name:i,p:t,g:e,label:n}):(r.p=t,r.g=e,r.label=n),this.requestUpdate()}},{key:"render",value:function(){return(0,r.html)(u(),i.default.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){v(b(g.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),v(b(g.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(t){v(b(g.prototype),"firstUpdated",this).call(this,t),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(t){var e,n,o,s,r,i,l,a,u,c,f,h,d,p=this;v(b(g.prototype),"update",this).call(this,t),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(a=this.width,d=this.height,e=(h=Math.min(a,d))-((u={top:2*this.rem,bottom:3*this.rem,left:3*this.rem,right:2*this.rem}).top+u.bottom),c=h-(u.left+u.right),n=parseInt(this.getComputedStyleValue("---transition-duration"),10),o=y.scaleLinear().domain([0,1]).range([0,c]),this.xScale=o,s=y.scaleLinear().domain([1,0]).range([0,e]),this.yScale=s,r=y.drag().subject(function(t,e){return{x:t.x,y:p.yScale(m.default.pg2w(p.xScale.invert(t.x),e.g)),p:p.xScale.invert(t.x),g:e.g,w:m.default.pg2w(p.xScale.invert(t.x),e.g)}}).on("start",function(t){t=t.currentTarget;y.select(t).classed("dragging",!0)}).on("drag",function(t,e){p.drag=!0;var n=p.xScale.invert(t.x),r=p.yScale.invert(t.y),i=n-t.subject.p,n=r-t.subject.w,r=Math.pow(Math.pow(i,2)+Math.pow(n,2),.5),r=t.subject.p>t.subject.w?n<i?t.subject.g-r:t.subject.g+r:n<i?t.subject.g+r:t.subject.g-r;e.g=1<r?1:r<0?0:r,"default"===e.name&&(p.g=e.g),p.alignState(),p.requestUpdate(),p.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,g:e.g,w:e.w,label:e.label},bubbles:!0}))}).on("end",function(t){t=t.currentTarget;y.select(t).classed("dragging",!1)}),i=y.drag().subject(function(t,e){return{x:p.xScale(e.p),y:p.yScale(e.w)}}).on("start",function(t){t=t.currentTarget;y.select(t).classed("dragging",!0)}).on("drag",function(t,e){p.drag=!0;t=p.xScale.invert(t.x);e.p=t<0?0:1<t?1:t,"default"===e.name&&(p.p=e.p),p.alignState(),p.requestUpdate(),p.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,g:e.g,w:e.w,label:e.label},bubbles:!0}))}).on("end",function(t){t=t.currentTarget;y.select(t).classed("dragging",!1)}),l=y.line().x(function(t){return o(t.p)}).y(function(t){return s(t.w)}),d=(a=(f=y.select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}])).enter().append("svg").classed("main",!0)).merge(f).attr("viewBox","0 0 ".concat(h," ").concat(h)),f=a.append("g").classed("plot",!0),h=d.select(".plot").attr("transform","translate(".concat(u.left,", ").concat(u.top,")")),f.append("clipPath").attr("id","clip-cpt-value").append("rect"),h.select("clipPath rect").attr("height",1+e).attr("width",1+c),a=f.append("g").classed("underlayer",!0),d=h.select(".underlayer"),a.append("rect").classed("background",!0),d.select(".background").attr("height",e).attr("width",c),a.append("g").classed("scale-x",!0),d.select(".scale-x").attr("transform","translate(0, ".concat(e,")")).transition().duration(2*n).ease(y.easeCubicOut).call(y.axisBottom(o)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),(u=a.append("text").classed("title-x",!0).attr("text-anchor","middle")).append("tspan").classed("name",!0).text("Probability ("),u.append("tspan").classed("math-var p",!0).text("p"),u.append("tspan").classed("name",!0).text(")"),d.select(".title-x").attr("transform","translate(".concat(c/2,", ").concat(e+2.25*this.rem,")")),a.append("g").classed("scale-y",!0),d.select(".scale-y").transition().duration(2*n).ease(y.easeCubicOut).call(y.axisLeft(s)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),(c=a.append("text").classed("title-y",!0).attr("text-anchor","middle")).append("tspan").classed("name",!0).text("Decision Weight ("),c.append("tspan").classed("math-var v",!0).text("w"),c.append("tspan").classed("name",!0).text(")"),d.select(".title-y").attr("transform","translate(".concat(-2*this.rem,", ").concat(e/2,")rotate(-90)")),a.append("line").classed("diagonal",!0),d.select(".diagonal").transition().duration(2*n).attr("x1",o(0)).attr("y1",s(0)).attr("x2",o(1)).attr("y2",s(1)),f.append("g").classed("content",!0),(h=(f=(d=h.select(".content")).selectAll(".lines").data(this.pointArray,function(t){return t.name})).enter().append("g").classed("lines",!0)).append("line").classed("line-p",!0),h.append("line").classed("line-w",!0),(h=h.merge(f)).select(".line-p").transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(y.easeCubicOut).attr("x1",function(t){return"".concat(o(t.p))}).attr("x2",function(t){return"".concat(o(t.p))}).attr("y1",function(t){return"".concat(s(t.w))}).attr("y2",function(){return"".concat(s(0))}),h.select(".line-w").transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(y.easeCubicOut).attr("x1",function(t){return"".concat(o(t.p))}).attr("x2",function(){return"".concat(o(0))}).attr("y1",function(t){return"".concat(s(t.w))}).attr("y2",function(t){return"".concat(s(t.w))}),f.exit().remove(),f=(h=d.selectAll(".curve").data(this.lineArray,function(t){return t.name})).enter().append("path").classed("curve",!0).attr("clip-path","url(#clip-cpt-value)").merge(h),(this.firstUpdate||t.has("interactive"))&&(this.interactive?f.attr("tabindex",0).classed("interactive",!0).call(r).on("keydown",function(t,e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var n=e.g;switch(t.key){case"ArrowUp":case"ArrowLeft":n+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n-=t.shiftKey?.01:.05}(n=n<0?0:1<n?1:n)!==e.g&&(e.g=n,"default"===e.name&&(p.g=e.g),p.alignState(),p.requestUpdate(),p.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,g:e.g,w:e.w,label:e.label},bubbles:!0}))),t.preventDefault()}}):f.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),f.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(y.easeCubicOut).attrTween("d",function(t,e,n){var r=n[e],i=y.interpolate((void 0!==r.p?r:t).p,t.p),a=y.interpolate((void 0!==r.g?r:t).g,t.g);return function(t){r.p=i(t),r.g=a(t);t=y.range(o.range()[0],o.range()[1]+1,1).map(function(t){return{p:o.invert(t),w:m.default.pg2w(o.invert(t),r.g)}});return l(t)}}),h.exit().remove(),(d=(h=d.selectAll(".point").data(this.pointArray,function(t){return t.name})).enter().append("g").classed("point",!0)).append("circle").classed("circle",!0).attr("r",6),d.append("text").classed("label",!0),(d=d.merge(h)).select("text").text(function(t){return t.label}),(this.firstUpdate||t.has("interactive"))&&(this.interactive?d.attr("tabindex",0).classed("interactive",!0).call(i).on("keydown",function(t,e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var n=e.p;switch(t.key){case"ArrowUp":case"ArrowRight":n+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":n-=t.shiftKey?.01:.05}(n=n<0?0:1<n?1:n)!==e.p&&(e.p=n,"default"===e.name&&(p.p=e.p),p.alignState(),p.requestUpdate(),p.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:e.name,p:e.p,g:e.g,w:e.w,label:e.label},bubbles:!0}))),t.preventDefault()}}):d.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),d.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(y.easeCubicOut).attrTween("transform",function(t,e,n){var r=n[e],i=y.interpolate((void 0!==r.p?r:t).p,t.p),a=y.interpolate((void 0!==r.g?r:t).g,t.g);return function(t){return r.p=i(t),r.g=a(t),"translate(\n            ".concat(o(r.p),",\n            ").concat(s(m.default.pg2w(r.p,r.g)),"\n          )")}}),h.exit().remove(),this.drag=!1,this.firstUpdate=!1)}}],[{key:"styles",get:function(){return[v(b(g),"styles",this),(0,r.css)(l())]}}]),g}();n.default=t,customElements.define("cpt-probability",t)},{"../cpt-element":695,"@decidable/prospectable-math":708,d3:89,"lit-element":211}],684:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element"),a=p(t("d3")),s=p(t("plotly.js/lib/core")),i=p(t("plotly.js/lib/isosurface")),l=p(t("plotly.js/lib/scatter3d")),u=h(t("@decidable/prospectable-math")),c=h(t("../cpt-element")),f=h(t("./plotly-style.auto"));function h(t){return t&&t.__esModule?t:{default:t}}function d(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return d=function(){return t},t}function p(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=d();if(e&&e.has(t))return e.get(t);var n,r,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,e&&e.set(t,i),i}function g(){var t=m(["\n        :host {\n          display: inline-block;\n        }\n\n        .plotly {\n          height: 100%;\n\n          cursor: grab;\n        }\n\n        /* Plotly modebar styles */\n        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */\n        .plotly:hover .modebar .modebar-group {\n          background-color: rgba(255, 255, 255, 0.5);\n        }\n\n        .modebar-btn .icon path {\n          fill: rgba(68, 68, 68, 0.3);\n        }\n\n        .modebar-btn:hover .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n\n        .modebar-btn.active .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n      "]);return g=function(){return t},t}function y(){var t=m(['\n      <div class="plotly"></div>\n    ']);return y=function(){return t},t}function m(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function v(t,e,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=k(n);return t=r?(t=k(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}s.register([i,l]);l=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(i,c.default);var e=w(i);function i(){var t;return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).firstUpdate=!0,t.surface=!0,t.points=!1,t.a=.8,t.l=1.2,t.g=.8,t.xl=0,t.xw=20,t.pw=.5,t.xs=10,t.range={},t.range.a={start:0,stop:1,step:.05},t.range.l={start:0,stop:10,step:.5},t.range.g={start:0,stop:1,step:.05},t.width=NaN,t.height=NaN,t.rem=NaN,t.parameterSpace=[],t.alignState(),t}return x(i,null,[{key:"properties",get:function(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},points:{attribute:"points",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}}]),x(i,[{key:"alignState",value:function(){var r=this;this.parameterSpace={a:[],l:[],g:[],uDiff:[]},a.range(this.range.a.start,this.range.a.stop+.01,this.range.a.step).forEach(function(n){a.range(r.range.l.start,r.range.l.stop+.01,r.range.l.step).forEach(function(e){a.range(r.range.g.start,r.range.g.stop+.01,r.range.g.step).forEach(function(t){r.parameterSpace.a.push(n),r.parameterSpace.l.push(e),r.parameterSpace.g.push(t);t=u.default.xal2v(r.xw,n,e)*u.default.pg2w(r.pw,t)+u.default.xal2v(r.xl,n,e)*(1-u.default.pg2w(r.pw,t))-u.default.xal2v(r.xs,n,e);r.parameterSpace.uDiff.push(t)})})})}},{key:"render",value:function(){return(0,r.html)(y())}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){v(k(i.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),v(k(i.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(t){v(k(i.prototype),"firstUpdated",this).call(this,t),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(t){var e,n,r;v(k(i.prototype),"update",this).call(this,t),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(e=this.getComputedStyleValue("---color-text"),r=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),t=this.getComputedStyleValue("---color-element-emphasis"),t=[{name:"Decision Boundary",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.parameterSpace.a,y:this.parameterSpace.l,z:this.parameterSpace.g,value:this.parameterSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.a.stop]},y:{show:!0,locations:[this.range.l.stop]},z:{show:!0,locations:[this.range.g.start]}},surface:{show:!1}},{name:"Current Decision",type:"scatter3d",x:[this.a],y:[this.l],z:[this.g],mode:"markers",marker:{color:t}}],r={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(5,10,172)"],[.25,"rgb(5,10,172)"],[.425,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.55,"rgb(220,170,132)"],[.6,"rgb(230,145,90)"],[.75,"rgb(178,10,28)"],[1,"rgb(178,10,28)"]]},font:{family:'"Source Sans Pro", sans-serif',color:e},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.a.start,this.range.a.stop],title:{text:"alpha",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.l.start,this.range.l.stop],title:{text:"lambda",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:r,showline:!0,linecolor:r,zeroline:!1,range:[this.range.g.start,this.range.g.stop],title:{text:"gamma",font:{size:1.125*this.rem}}}},uirevision:!0},s.react(this.shadowRoot.querySelector(".plotly"),t,r,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1)}}],[{key:"styles",get:function(){return[v(k(i),"styles",this),f.default,(0,r.css)(g())]}}]),i}();n.default=l,customElements.define("cpt-space",l)},{"../cpt-element":695,"./plotly-style.auto":694,"@decidable/prospectable-math":708,d3:89,"lit-element":211,"plotly.js/lib/core":268,"plotly.js/lib/isosurface":270,"plotly.js/lib/scatter3d":271}],685:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element"),m=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=i?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3")),v=a(t("@decidable/prospectable-math")),i=a(t("../cpt-element"));function a(t){return t&&t.__esModule?t:{default:t}}function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function l(){var t=c(['\n        :host {\n          display: inline-block;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n        }\n\n        text {\n          /* stylelint-disable property-no-vendor-prefix */\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n        }\n\n        .curve-p.interactive,\n        .curve-n.interactive {\n          cursor: nwse-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .curve-p.interactive:hover,\n        .curve-n.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .curve-p.interactive:active,\n        .curve-n.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .curve-p.interactive:focus,\n        :host(.keyboard) .curve-n.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .point.interactive {\n          cursor: nesw-resize;\n\n          filter: url("#shadow-2");\n          outline: none;\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */\n          stroke: #000000;\n          stroke-opacity: 0;\n          stroke-width: 0;\n        }\n\n        /* Make a larger target for touch users */\n        @media (pointer: coarse) {\n          .point.interactive .circle {\n            stroke: #000000;\n            stroke-opacity: 0;\n            stroke-width: 12px;\n          }\n        }\n\n        .point.interactive:hover {\n          filter: url("#shadow-4");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #ff0000;\n        }\n\n        .point.interactive:active {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #00ff00;\n        }\n\n        :host(.keyboard) .point.interactive:focus {\n          filter: url("#shadow-8");\n\n          /* HACK: This gets Safari to correctly apply the filter! */\n          stroke: #0000ff;\n        }\n\n        .background {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-border);\n          stroke-width: 1;\n          shape-rendering: crispEdges;\n        }\n\n        .title-x,\n        .title-y {\n          font-weight: 600;\n\n          fill: currentColor;\n        }\n\n        .tick {\n          font-size: 0.75rem;\n        }\n\n        .scale-x path,\n        .scale-x line,\n        .scale-y path,\n        .scale-y line {\n          stroke: var(---color-element-border);\n        }\n\n        .axis-x,\n        .axis-y {\n          stroke: var(---color-element-border);\n          shape-rendering: crispEdges;\n        }\n\n        .diagonal {\n          stroke: var(---color-element-border);\n          stroke-dasharray: 4;\n          stroke-width: 1;\n        }\n\n        .curve-p,\n        .curve-n {\n          fill: none;\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .line-x,\n        .line-v {\n          fill: none;\n          stroke-width: 2;\n        }\n\n        .line-x {\n          stroke: var(---color-x);\n        }\n\n        .line-v {\n          stroke: var(---color-v);\n        }\n\n        .point .circle {\n          fill: var(---color-element-emphasis);\n\n          /* r: 6; HACK: Firefox does not support CSS SVG Geometry Properties */\n        }\n\n        .point .label {\n          font-size: 0.75rem;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n\n          fill: var(---color-text-inverse);\n        }\n      ']);return l=function(){return t},t}function u(){var t=c(["\n      ","\n    "]);return u=function(){return t},t}function c(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=x(n);return t=r?(t=x(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(y,i.default);var e=p(y);function y(){var t;return function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).firstUpdate=!0,t.drag=!1,t.lines=["all","first","rest","none"],t.line="first",t.points=["all","first","rest","none"],t.point="first",t.x=10,t.a=.5,t.l=2,t.label="",t.locations=[{name:"default",x:t.x,a:t.a,l:t.l,label:""}],t.lineArray=[],t.pointArray=[],t.width=NaN,t.height=NaN,t.rem=NaN,t.alignState(),t}return h(y,null,[{key:"properties",get:function(){return{line:{attribute:"line",type:String,reflect:!0},point:{attribute:"point",type:String,reflect:!0},x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}}]),h(y,[{key:"alignState",value:function(){var n=this;this.locations[0].x=this.x,this.locations[0].a=this.a,this.locations[0].l=this.l,this.locations[0].label=this.label,this.v=v.default.xal2v(this.x,this.a,this.l),this.lineArray=[],this.pointArray=[],this.locations.forEach(function(t,e){t.v=v.default.xal2v(t.x,t.a,t.l),(0===e&&("first"===n.line||"all"===n.line)||0<e&&("rest"===n.line||"all"===n.line))&&n.lineArray.push(t),(0===e&&("first"===n.point||"all"===n.point)||0<e&&("rest"===n.point||"all"===n.point))&&n.pointArray.push(t)})}},{key:"get",value:function(t){var e=0<arguments.length&&void 0!==t?t:"default",t=this.locations.find(function(t){return t.name===e});return void 0===t?null:t}},{key:"set",value:function(t,e,n,r,i){var a=3<arguments.length&&void 0!==r?r:"default",r=4<arguments.length&&void 0!==i?i:"";"default"===a&&(this.x=t,this.a=e,this.l=n,this.label=r);i=this.locations.find(function(t){return t.name===a});void 0===i?this.locations.push({name:a,x:t,a:e,l:n,label:r}):(i.x=t,i.a=e,i.l=n,i.label=r),this.requestUpdate()}},{key:"render",value:function(){return(0,r.html)(u(),i.default.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){b(x(y.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),b(x(y.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(t){b(x(y.prototype),"firstUpdated",this).call(this,t),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(t){var e,n,s,l,r,i,a,u,o,c,f,h,d,p,g=this;b(x(y.prototype),"update",this).call(this,t),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(o=this.width,p=this.height,e=(h=Math.min(o,p))-((c={top:2*this.rem,bottom:3*this.rem,left:3*this.rem,right:2*this.rem}).top+c.bottom),f=h-(c.left+c.right),n=parseInt(this.getComputedStyleValue("---transition-duration"),10),s=m.scaleLinear().domain([-20,20]).range([0,f]),this.xScale=s,l=m.scaleLinear().domain([20,-20]).range([0,e]),this.yScale=l,r=m.drag().subject(function(t,e){return{x:t.x,y:g.yScale(v.default.xal2v(g.xScale.invert(t.x),e.a,e.l))}}).on("start",function(t){t=t.currentTarget;m.select(t).classed("dragging",!0)}).on("drag",function(t,e){g.drag=!0;var n=g.xScale.invert(t.x),r=g.yScale.invert(t.y),t=v.default.xlv2a(n,e.l,r);e.a=Number.isNaN(t)||t<0||1<t||n<0||r<0?r<n?0:1:t,"default"===e.name&&(g.a=e.a),g.alignState(),g.requestUpdate(),g.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,a:e.a,l:e.l,v:e.v,label:e.label},bubbles:!0}))}).on("end",function(t){t=t.currentTarget;m.select(t).classed("dragging",!1)}),i=m.drag().subject(function(t,e){return{x:t.x,y:g.yScale(v.default.xal2v(g.xScale.invert(t.x),e.a,e.l))}}).on("start",function(t){t=t.currentTarget;m.select(t).classed("dragging",!0)}).on("drag",function(t,e){g.drag=!0;var n=g.xScale.invert(t.x),r=g.yScale.invert(t.y),t=v.default.xav2l(n,e.a,r);e.l=Number.isNaN(t)||t<0||100<t||0<n||0<r?r<n?100:0:t,"default"===e.name&&(g.l=e.l),g.alignState(),g.requestUpdate(),g.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,a:e.a,l:e.l,v:e.v,label:e.label},bubbles:!0}))}).on("end",function(t){t=t.currentTarget;m.select(t).classed("dragging",!1)}),a=m.drag().subject(function(t,e){return{x:g.xScale(e.x),y:g.yScale(e.v)}}).on("start",function(t){t=t.currentTarget;m.select(t).classed("dragging",!0)}).on("drag",function(t,e){g.drag=!0;t=g.xScale.invert(t.x);e.x=t<-20?-20:20<t?20:t,"default"===e.name&&(g.x=e.x),g.alignState(),g.requestUpdate(),g.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,a:e.a,l:e.l,v:e.v,label:e.label},bubbles:!0}))}).on("end",function(t){t=t.currentTarget;m.select(t).classed("dragging",!1)}),u=m.line().x(function(t){return s(t.x)}).y(function(t){return l(t.v)}),p=(o=(d=m.select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}])).enter().append("svg").classed("main",!0)).merge(d).attr("viewBox","0 0 ".concat(h," ").concat(h)),d=o.append("g").classed("plot",!0),h=p.select(".plot").attr("transform","translate(".concat(c.left,", ").concat(c.top,")")),d.append("clipPath").attr("id","clip-cpt-value").append("rect"),h.select("clipPath rect").attr("height",1+e).attr("width",1+f),o=d.append("g").classed("underlayer",!0),p=h.select(".underlayer"),o.append("rect").classed("background",!0),p.select(".background").attr("height",e).attr("width",f),o.append("g").classed("scale-x",!0),p.select(".scale-x").attr("transform","translate(0, ".concat(l(-20),")")).transition().duration(2*n).ease(m.easeCubicOut).call(m.axisBottom(s)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),o.append("line").classed("axis-x",!0),p.select(".axis-x").transition().duration(n).ease(m.easeCubicOut).attr("x1",s(-20)).attr("x2",s(20)).attr("y1",l(0)).attr("y2",l(0)),(c=o.append("text").classed("title-x",!0).attr("text-anchor","middle")).append("tspan").classed("name",!0).text("Objective Value ("),c.append("tspan").classed("math-var x",!0).text("x"),c.append("tspan").classed("name",!0).text(")"),p.select(".title-x").attr("transform","translate(".concat(f/2,", ").concat(e+2.25*this.rem,")")),o.append("g").classed("scale-y",!0),p.select(".scale-y").transition().duration(2*n).ease(m.easeCubicOut).call(m.axisLeft(l)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),o.append("line").classed("axis-y",!0),p.select(".axis-y").transition().duration(n).ease(m.easeCubicOut).attr("x1",s(0)).attr("x2",s(0)).attr("y1",l(20)).attr("y2",l(-20)),(f=o.append("text").classed("title-y",!0).attr("text-anchor","middle")).append("tspan").classed("name",!0).text("Subjective Value ("),f.append("tspan").classed("math-var v",!0).text("v"),f.append("tspan").classed("name",!0).text(")"),p.select(".title-y").attr("transform","translate(".concat(-2*this.rem,", ").concat(e/2,")rotate(-90)")),o.append("line").classed("diagonal",!0),p.select(".diagonal").transition().duration(2*n).ease(m.easeCubicOut).attr("x1",s(-20)).attr("y1",l(-20)).attr("x2",s(20)).attr("y2",l(20)),d.append("g").classed("content",!0),(h=(d=(p=h.select(".content")).selectAll(".lines").data(this.pointArray,function(t){return t.name})).enter().append("g").classed("lines",!0)).append("line").classed("line-x",!0),h.append("line").classed("line-v",!0),(h=h.merge(d)).select(".line-x").transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(m.easeCubicOut).attr("x1",function(t){return"".concat(s(t.x))}).attr("x2",function(t){return"".concat(s(t.x))}).attr("y1",function(t){return"".concat(l(t.v))}).attr("y2",function(){return"".concat(l(-20))}),h.select(".line-v").transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(m.easeCubicOut).attr("x1",function(t){return"".concat(s(t.x))}).attr("x2",function(){return"".concat(s(-20))}).attr("y1",function(t){return"".concat(l(t.v))}).attr("y2",function(t){return"".concat(l(t.v))}),d.exit().remove(),d=(h=p.selectAll(".curve-p").data(this.lineArray,function(t){return t.name})).enter().append("path").classed("curve-p",!0).attr("clip-path","url(#clip-cpt-value)").merge(h),(this.firstUpdate||t.has("interactive"))&&(this.interactive?d.attr("tabindex",0).classed("interactive",!0).call(r).on("keydown",function(t,e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var n=e.a;switch(t.key){case"ArrowUp":case"ArrowLeft":n+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n-=t.shiftKey?.01:.05}(n=n<0?0:1<n?1:n)!==e.a&&(e.a=n,"default"===e.name&&(g.a=e.a),g.alignState(),g.requestUpdate(),g.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,a:e.a,l:e.l,v:e.v,label:e.label},bubbles:!0}))),t.preventDefault()}}):d.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),d.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(m.easeCubicOut).attrTween("d",function(t,e,n){var r=n[e],i=m.interpolate((void 0!==r.x?r:t).x,t.x),a=m.interpolate((void 0!==r.a?r:t).a,t.a),o=m.interpolate((void 0!==r.l?r:t).l,t.l);return function(t){r.x=i(t),r.a=a(t),r.l=o(t);t=m.range(s(0),s.range()[1]+1,1).map(function(t){return{x:s.invert(t),v:v.default.xal2v(s.invert(t),r.a,r.l)}});return u(t)}}),h.exit().remove(),h=(d=p.selectAll(".curve-n").data(this.lineArray,function(t){return t.name})).enter().append("path").classed("curve-n",!0).attr("clip-path","url(#clip-cpt-value)").merge(d),(this.firstUpdate||t.has("interactive"))&&(this.interactive?h.attr("tabindex",0).classed("interactive",!0).call(i).on("keydown",function(t,e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var n=e.l;switch(t.key){case"ArrowUp":case"ArrowLeft":n-=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowRight":n+=t.shiftKey?.01:.05}(n=n<0?0:100<n?100:n)!==e.l&&(e.l=n,"default"===e.name&&(g.l=e.l),g.alignState(),g.requestUpdate(),g.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,a:e.a,l:e.l,v:e.v,label:e.label},bubbles:!0}))),t.preventDefault()}}):h.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),h.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(m.easeCubicOut).attrTween("d",function(t,e,n){var r=n[e],i=m.interpolate((void 0!==r.x?r:t).x,t.x),a=m.interpolate((void 0!==r.a?r:t).a,t.a),o=m.interpolate((void 0!==r.l?r:t).l,t.l);return function(t){r.x=i(t),r.a=a(t),r.l=o(t);t=m.range(s.range()[0],s(0)+1,1).map(function(t){return{x:s.invert(t),v:v.default.xal2v(s.invert(t),r.a,r.l)}});return u(t)}}),d.exit().remove(),(p=(d=p.selectAll(".point").data(this.pointArray,function(t){return t.name})).enter().append("g").classed("point",!0)).append("circle").classed("circle",!0).attr("r",6),p.append("text").classed("label",!0),(p=p.merge(d)).select("text").text(function(t){return t.label}),(this.firstUpdate||t.has("interactive"))&&(this.interactive?p.attr("tabindex",0).classed("interactive",!0).call(a).on("keydown",function(t,e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var n=e.x;switch(t.key){case"ArrowUp":case"ArrowRight":n+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":n-=t.shiftKey?.01:.05}(n=n<-20?-20:20<n?20:n)!==e.x&&(e.x=n,"default"===e.name&&(g.x=e.x),g.alignState(),g.requestUpdate(),g.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:e.name,x:e.x,a:e.a,l:e.l,v:e.v,label:e.label},bubbles:!0}))),t.preventDefault()}}):p.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),p.transition().duration(this.drag?0:this.firstUpdate?2*n:n).ease(m.easeCubicOut).attrTween("transform",function(t,e,n){var r=n[e],i=m.interpolate((void 0!==r.x?r:t).x,t.x),a=m.interpolate((void 0!==r.a?r:t).a,t.a),o=m.interpolate((void 0!==r.l?r:t).l,t.l);return function(t){return r.x=i(t),r.a=a(t),r.l=o(t),"translate(\n            ".concat(s(r.x),",\n            ").concat(l(v.default.xal2v(r.x,r.a,r.l)),"\n          )")}}),d.exit().remove(),this.drag=!1,this.firstUpdate=!1)}}],[{key:"styles",get:function(){return[b(x(y),"styles",this),(0,r.css)(l())]}}]),y}();n.default=t,customElements.define("cpt-value",t)},{"../cpt-element":695,"@decidable/prospectable-math":708,d3:89,"lit-element":211}],686:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-element"),o=(r=t("../cpt-element"))&&r.__esModule?r:{default:r};function s(){var t=h(["\n        :host {\n          display: inline-block;\n        }\n\n        .holder {\n          user-select: none;\n        }\n\n        .holder > * {\n          vertical-align: middle;\n        }\n\n        .query {\n          margin: 0 0.5rem;\n\n          font-family: var(--font-family-code);\n          font-size: 1.75rem;\n        }\n\n        decision-option {\n          width: 10rem;\n          height: 10rem;\n        }\n      "]);return s=function(){return t},t}function l(){var t=h(["\n              <decision-outcome ?interactive=",' probability="1" value="','" name="sure"></decision-outcome>']);return l=function(){return t},t}function u(){var t=h(["∙"]);return u=function(){return t},t}function c(){var t=h(['\n              <decision-outcome probability="','" value="','" name="loss"></decision-outcome>\n              <decision-outcome ?interactive=',' probability="','" value="','" name="win"></decision-outcome>']);return c=function(){return t},t}function f(){var t=h(['\n      <div class="holder">\n        <decision-option ?interactive='," @decision-outcome-change=",">\n          ",'\n        </decision-option><span class="query"\n         >',"</span\n        ><decision-option ?interactive="," @decision-outcome-change=",">\n          ","\n        </decision-option>\n      </div>"]);return f=function(){return t},t}function h(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=v(n);return t=r?(t=v(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(n,o.default);var e=m(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).states=["choice","fixation","blank"],t.state="choice",t.xl=0,t.xw=100,t.pw=.75,t.xs=50,t}return g(n,null,[{key:"properties",get:function(){return{state:{attribute:"state",type:String,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}}]),g(n,[{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("decision-choice-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs},bubbles:!0}))}},{key:"winChange",value:function(t){this.xw=parseFloat(t.detail.x),this.pw=parseFloat(t.detail.p),this.sendEvent()}},{key:"sureChange",value:function(t){this.xs=parseFloat(t.detail.x),this.sendEvent()}},{key:"render",value:function(){return(0,a.html)(f(),this.interactive,this.winChange.bind(this),"choice"===this.state?(0,a.html)(c(),1-this.pw,this.xl,this.interactive,this.pw,this.xw):"","choice"===this.state?"?":"fixation"===this.state?"+":(0,a.html)(u()),this.interactive,this.sureChange.bind(this),"choice"===this.state?(0,a.html)(l(),this.interactive,this.xs):"")}}],[{key:"styles",get:function(){return[d(v(n),"styles",this),(0,a.css)(s())]}}]),n}();n.default=b,customElements.define("decision-choice",b)},{"../cpt-element":695,"lit-element":211}],687:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element");t("@decidable/decidable-elements");var a,o=(a=t("../cpt-element"))&&a.__esModule?a:{default:a};function s(){var t=b(["\n        :host {\n          display: inline-block;\n        }\n\n        .holder {\n          display: flex;\n\n          flex-direction: row;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n\n        .buttons {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n      "]);return s=function(){return t},t}function l(){var t=b([""]);return l=function(){return t},t}function u(){var t=b(['<decidable-button name="reset" ?disabled='," @click=",">Reset</decidable-button>"]);return u=function(){return t},t}function c(){var t=b([""]);return c=function(){return t},t}function f(){var t=b(['<decidable-button name="pause" ?disabled='," @click=",">Pause</decidable-button>"]);return f=function(){return t},t}function h(){var t=b([""]);return h=function(){return t},t}function d(){var t=b(['<decidable-button name="run" ?disabled='," @click=",">Run</decidable-button>"]);return d=function(){return t},t}function p(){var t=b([""]);return p=function(){return t},t}function g(){var t=b(['<decidable-slider min="10" max="4000" step="10" .value='," @change="," @input=",">Duration</decidable-slider>"]);return g=function(){return t},t}function y(){var t=b([""]);return y=function(){return t},t}function m(){var t=b(['<decidable-slider min="1" max="100" step="1" .value='," @change="," @input=",">Trials</decidable-slider>"]);return m=function(){return t},t}function v(){var t=b(['\n      <div class="holder">\n        ',"\n        ",'\n        <div class="buttons">\n          ',"\n          ","\n          ","\n        </div>\n      </div>"]);return v=function(){return t},t}function b(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function x(t,e,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=T(n);return t=r?(t=T(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(n,o.default);var e=M(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).trials=void 0,t.duration=void 0,t.run=!1,t.pause=!1,t.reset=!1,t.states=["resetted","running","paused","ended"],t.state="resetted",t}return w(n,null,[{key:"properties",get:function(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}}]),w(n,[{key:"setTrials",value:function(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("decision-control-trials",{detail:{trials:this.trials},bubbles:!0}))}},{key:"setDuration",value:function(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("sdt-control-duration",{detail:{duration:this.duration},bubbles:!0}))}},{key:"doRun",value:function(){this.state="running",this.dispatchEvent(new CustomEvent("decision-control-run",{detail:{},bubbles:!0}))}},{key:"doPause",value:function(){this.state="paused",this.dispatchEvent(new CustomEvent("decision-control-pause",{detail:{},bubbles:!0}))}},{key:"doReset",value:function(){this.state="resetted",this.dispatchEvent(new CustomEvent("decision-control-reset",{detail:{},bubbles:!0}))}},{key:"complete",value:function(){this.state="ended"}},{key:"render",value:function(){return(0,r.html)(v(),this.trials?(0,r.html)(m(),this.trials,this.setTrials.bind(this),this.setTrials.bind(this)):(0,r.html)(y()),this.duration?(0,r.html)(g(),this.duration,this.setDuration.bind(this),this.setDuration.bind(this)):(0,r.html)(p()),this.run?(0,r.html)(d(),"running"===this.state||"ended"===this.state,this.doRun.bind(this)):(0,r.html)(h()),this.pause?(0,r.html)(f(),"running"!==this.state,this.doPause.bind(this)):(0,r.html)(c()),this.reset?(0,r.html)(u(),"resetted"===this.state,this.doReset.bind(this)):(0,r.html)(l()))}}],[{key:"styles",get:function(){return[x(T(n),"styles",this),(0,r.css)(s())]}}]),n}();n.default=A,customElements.define("decision-control",A)},{"../cpt-element":695,"@decidable/decidable-elements":674,"lit-element":211}],688:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=t("lit-element"),d=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=i?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3")),a=(r=t("../cpt-element"))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function l(){var t=c(['\n        :host {\n          display: inline-block;\n        }\n\n        .main {\n          width: 100%;\n          height: 100%;\n          overflow: visible;\n        }\n\n        .outline {\n          fill: var(---color-element-background);\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .arc {\n          stroke: var(---color-element-emphasis);\n          stroke-width: 2;\n        }\n\n        .arc.interactive {\n          cursor: move;\n\n          filter: url("#shadow-2");\n          outline: none;\n        }\n\n        .arc.interactive:hover {\n          filter: url("#shadow-4");\n        }\n\n        .arc.interactive:active {\n          filter: url("#shadow-8");\n        }\n\n        :host(.keyboard) .arc.interactive:focus {\n          filter: url("#shadow-8");\n        }\n\n        .arc.win {\n          fill: var(---color-better-light);\n        }\n\n        .arc.loss {\n          fill: var(---color-worse-light);\n        }\n\n        .arc.sure {\n          fill: var(---color-even-light);\n        }\n\n        .label.static {\n          font-size: 1.75rem;\n\n          user-select: none;\n\n          dominant-baseline: middle;\n          text-anchor: middle;\n        }\n\n        .label.interactive {\n          --decidable-spinner-font-size: 1.75rem;\n          --decidable-spinner-input-width: 4rem;\n          --decidable-spinner-prefix: "$";\n\n          width: var(--decidable-spinner-input-width);\n          height: calc(var(--decidable-spinner-font-size) * 1.5);\n          overflow: visible;\n          x: calc(var(--decidable-spinner-input-width) / -2);\n          y: calc(var(--decidable-spinner-font-size) * 1.5 / -2);\n        }\n\n        .label.interactive.win decidable-spinner {\n          background-color: var(---color-better-light);\n        }\n\n        .label.interactive.loss decidable-spinner {\n          background-color: var(---color-worse-light);\n        }\n\n        .label.interactive.sure decidable-spinner {\n          background-color: var(---color-even-light);\n        }\n      ']);return l=function(){return t},t}function u(){var t=c(["\n      ","\n      <slot></slot>\n    "]);return u=function(){return t},t}function c(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=v(n);return t=r?(t=v(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(h,a.default);var e=m(h);function h(){var t;return function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).width=NaN,t.height=NaN,t.rem=NaN,t}return g(h,null,[{key:"properties",get:function(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}}]),g(h,[{key:"render",value:function(){return(0,i.html)(u(),a.default.svgFilters)}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){var e=this;p(v(h.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this)),this.observer=new MutationObserver(function(t){t.some(function(t){return"childList"===t.type||"attributes"===t.type&&t.target!==e})&&e.requestUpdate()}),this.observer.observe(this,{subtree:!0,childList:!0,attributes:!0})}},{key:"disconnectedCallback",value:function(){this.observer.disconnect(),window.removeEventListener("resize",this.getDimensions.bind(this)),p(v(h.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(t){p(v(h.prototype),"firstUpdated",this).call(this,t),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(t){var n,r,i,a,e,o,s,l,u,c=this;function f(t){t=(t+2*Math.PI)%(2*Math.PI);return t>Math.PI?t-2*Math.PI:t<-Math.PI?t+2*Math.PI:t}p(v(h.prototype),"update",this).call(this,t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(s=this.width,o=this.height,u=Math.min(s,o),r=n=u-(0+0),l=(i=this.querySelectorAll("decision-outcome")).length?-i[0].p:0,t=(a=d.pie().startAngle(l*Math.PI-Math.PI).endAngle(l*Math.PI+Math.PI).sortValues(null).value(function(t){return t.p})(i)).filter(function(t){return!t.data.interactive}),e=a.filter(function(t){return t.data.interactive}),s=d.drag().subject(function(t,e){e=f((e.endAngle+e.startAngle)/2),t=f(Math.atan2(t.y,t.x)+Math.PI/2);return i.forEach(function(t){t.startP=t.p}),{arcAngle:e,startAngle:f(t-e)}}).on("start",function(t){t=t.currentTarget;d.select(t).classed("dragging",!0)}).on("drag",function(t,e){var n=f(Math.atan2(t.y,t.x)+Math.PI/2),n=f(n-t.subject.arcAngle),n=f(0<t.subject.startAngle?n-t.subject.startAngle:t.subject.startAngle-n)/Math.PI,n=e.data.startP+n,r=.99<n?.99:n<.01?.01:n;i.forEach(function(t){t.p=t===e.data?r:t.startP/(1-e.data.startP)*(1-r)}),c.dispatchEvent(new CustomEvent("decision-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0}))}).on("end",function(t){t=t.currentTarget;d.select(t).classed("dragging",!1)}),u=(l=(o=d.select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}])).enter().append("svg").classed("main",!0)).merge(o).attr("viewBox","0 0 ".concat(u," ").concat(u)),l=l.append("g").classed("pie",!0),u=u.select(".pie").attr("transform","translate(".concat(r/2,", ").concat(n/2,")")),l.append("circle").classed("outline",!0),u.select(".outline").attr("r",Math.min(r,n)/2-1),(l=u.selectAll(".arc").data(a)).enter().append("path").call(s).merge(l).attr("tabindex",function(t){return e.includes(t)&&1<a.length?0:null}).attr("class",function(t){return"arc ".concat(t.data.name)}).classed("interactive",function(t){return e.includes(t)&&1<a.length}).attr("d",d.arc().innerRadius(0).outerRadius(Math.min(r,n)/2-1)),l.exit().remove(),s=u.selectAll(".label.static").data(t),l=u.selectAll(".label.interactive").data(e),t=s.enter().append("text"),(u=l.enter().append("foreignObject")).append("xhtml:decidable-spinner").on("input",function(t,e){e.data.x=parseFloat(t.target.value),c.dispatchEvent(new CustomEvent("decision-outcome-change",{detail:{x:e.data.x,p:e.data.p,name:e.data.name},bubbles:!0}))}),t.merge(s).attr("class",function(t){return"label static ".concat(t.data.name)}).attr("transform",function(t){if(1===a.length)return"translate(0, 0)";var e=Math.min(r,n)/2*.6,e=d.arc().innerRadius(e).outerRadius(e);return"translate(".concat(e.centroid(t),")")}).text(function(t){return"$".concat(t.data.x.toFixed(0))}),u.merge(l).attr("class",function(t){return"label interactive ".concat(t.data.name)}).attr("transform",function(t){if(1===a.length)return"translate(0, 0)";var e=Math.min(r,n)/2*.6,e=d.arc().innerRadius(e).outerRadius(e);return"translate(".concat(e.centroid(t),")")}).select("decidable-spinner").attr("value",function(t){return"".concat(t.data.x.toFixed(0))}),s.exit().remove(),l.exit().remove())}}],[{key:"styles",get:function(){return[p(v(h),"styles",this),(0,i.css)(l())]}}]),h}();n.default=h,customElements.define("decision-option",h)},{"../cpt-element":695,d3:89,"lit-element":211}],689:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-element"),o=(r=t("../cpt-element"))&&r.__esModule?r:{default:r};function s(){var t=u(["\n        :host {\n          display: none;\n        }\n      "]);return s=function(){return t},t}function l(){var t=u([""]);return l=function(){return t},t}function u(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return t=r?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,o.default);var e=d(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).x=0,t.p=0,t.name="",t}return f(n,null,[{key:"properties",get:function(){return{x:{attribute:"value",type:Number,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},name:{attribute:"name",type:String,reflect:!0}}}}]),f(n,[{key:"render",value:function(){return(0,a.html)(l())}}],[{key:"styles",get:function(){return[(0,a.css)(s())]}}]),n}();n.default=g,customElements.define("decision-outcome",g)},{"../cpt-element":695,"lit-element":211}],690:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element");t("@decidable/decidable-elements");var a,o=(a=t("../cpt-element"))&&a.__esModule?a:{default:a};function s(){var t=T(['\n        :host {\n          display: inline-block;\n        }\n\n        /* Overall container */\n        .holder {\n          display: flex;\n\n          flex-direction: column;\n        }\n\n        /* Trial messages */\n        .trials {\n          display: flex;\n\n          flex-direction: column;\n\n          justify-content: center;\n        }\n\n        .trial {\n          text-align: center;\n        }\n\n        .trial .label {\n          font-weight: 600;\n        }\n\n        /* Response buttons */\n        .responses {\n          display: flex;\n\n          flex-direction: row;\n\n          align-items: stretch;\n          justify-content: center;\n        }\n\n        .response {\n          width: 5.25rem;\n        }\n\n        .waiting[disabled] {\n          --decidable-button-background-color: var(---color-element-enabled);\n        }\n\n        .selected[disabled][name="gamble"] {\n          --decidable-button-background-color: var(---color-worse);\n        }\n\n        .selected[disabled][name="sure"] {\n          --decidable-button-background-color: var(---color-better);\n        }\n\n        /* Feedback messages */\n        .feedbacks {\n          display: flex;\n\n          flex-direction: row;\n\n          justify-content: center;\n        }\n\n        /* Outcome feedback */\n        .feedback {\n          display: flex;\n\n          flex-direction: column;\n\n          align-items: center;\n          justify-content: center;\n\n          width: 5.25rem;\n          height: 3.5rem;\n          padding: 0.375rem 0.75rem;\n          margin: 0.25rem;\n\n          text-align: center;\n\n          background-color: var(---color-element-background);\n          border: 1px solid var(---color-element-border);\n        }\n\n        .feedback.better {\n          background-color: var(---color-better-light);\n        }\n\n        .feedback.worse {\n          background-color: var(---color-worse-light);\n        }\n\n        .feedback.even {\n          background-color: var(---color-even-light);\n        }\n\n        .feedback.nr {\n          background-color: var(---color-nr-light);\n        }\n\n        .feedback .outcome {\n          font-weight: 600;\n          line-height: 1.15;\n        }\n\n        :host([payoff="selection"]) .feedback,\n        :host([payoff="both"]) .feedback {\n          height: 4rem;\n        }\n\n        /* Payoff feedback */\n        .payoff {\n          text-align: center;\n        }\n\n        .payoff .label {\n          font-weight: 600;\n        }\n      ']);return s=function(){return t},t}function l(){var t=T([""]);return l=function(){return t},t}function u(){var t=T([""]);return u=function(){return t},t}function c(){var t=T(['<span class="payoff">'," ","</span>"]);return c=function(){return t},t}function f(){var t=T(['<span class="outcome">No<br>Response</span>']);return f=function(){return t},t}function h(){var t=T(['<span class="outcome">Even</span>']);return h=function(){return t},t}function d(){var t=T(['<span class="outcome">Worse</span>']);return d=function(){return t},t}function p(){var t=T(['<span class="outcome">Better</span>']);return p=function(){return t},t}function g(){var t=T([""]);return g=function(){return t},t}function y(){var t=T(['<span class="payoff">'," ","</span>"]);return y=function(){return t},t}function m(){var t=T(['<span class="outcome">No<br>Response</span>']);return m=function(){return t},t}function v(){var t=T(['<span class="outcome">Even</span>']);return v=function(){return t},t}function b(){var t=T(['<span class="outcome">Worse</span>']);return b=function(){return t},t}function x(){var t=T(['<span class="outcome">Better</span>']);return x=function(){return t},t}function _(){var t=T(['\n            <div class="feedbacks">\n              <div class="feedback gamble\n                ','">\n                ',"\n                ",'\n              </div>\n              <div class="feedback sure\n                ','">\n                ',"\n                ","\n              </div>\n            </div>"]);return _=function(){return t},t}function w(){var t=T([""]);return w=function(){return t},t}function k(){var t=T(['\n            <div class="trials">\n              <div class="trial">\n                <span class="label">Trial: </span><span class="count">','</span><span class="of"> of </span><span class="total">',"</span>\n              </div>\n            </div>"]);return k=function(){return t},t}function M(){var t=T(['\n      <div class="holder">\n        ','\n        <div class="responses">\n          <decidable-button name="gamble" class="response ','" ?disabled='," @click=",'>Gamble</decidable-button>\n          <decidable-button name="sure" class="response ','" ?disabled='," @click=",">Sure</decidable-button>\n        </div>\n        ","\n      </div>"]);return M=function(){return t},t}function T(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=P(n);return t=r?(t=P(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(n,o.default);var e=C(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).feedbacks=["none","outcome"],t.feedback="none",t.trial=!1,t.payoffs=["none","selection","both"],t.payoff="none",t.states=["off","waiting","feedback"],t.state="off",t.trialCount=0,t.trialTotal=0,t.xl=0,t.xw=0,t.pw=0,t.xs=0,t.gamblePayoff=0,t.surePayoff=0,t.nrPayoff=0,t.betters=["gamble","sure","even"],t.better=void 0,t.responses=["gamble","sure","nr"],t.response=void 0,t.outcomes=["better","worse","even","nr"],t.outcome=void 0,t}return E(n,null,[{key:"properties",get:function(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}}]),E(n,[{key:"start",value:function(t,e,n,r,i,a,o,s){this.state="waiting",this.xl=t,this.xw=e,this.pw=n,this.xs=r,this.gamblePayoff=i,this.surePayoff=a,this.better=o,this.trialCount=s,this.response=void 0,this.outcome=void 0}},{key:"stop",value:function(){this.state="feedback",void 0===this.response&&(this.outcome="nr")}},{key:"gamble",value:function(){this.responded("gamble")}},{key:"sure",value:function(){this.responded("sure")}},{key:"responded",value:function(t){this.state="feedback",this.response=t,this.outcome="even"===this.better?"even":this.better===this.response?"better":"worse",this.dispatchEvent(new CustomEvent("decision-response",{detail:{trial:this.trialCount,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,outcome:this.outcome,payoff:this.trialPayoff},bubbles:!0}))}},{key:"reset",value:function(){this.state="off",this.trialCount=0,this.better=void 0,this.gamblePayoff=0,this.surePayoff=0,this.response=void 0,this.outcome=void 0}},{key:"render",value:function(){return(0,r.html)(M(),this.trial?(0,r.html)(k(),this.trialCount,this.trialTotal):(0,r.html)(w()),"feedback"===this.state&&"gamble"===this.response?"selected":"waiting"===this.state?"waiting":"","waiting"!==this.state||!0!==this.interactive,this.gamble.bind(this),"feedback"===this.state&&"sure"===this.response?"selected":"waiting"===this.state?"waiting":"","waiting"!==this.state||!0!==this.interactive,this.sure.bind(this),"none"!==this.feedback||"none"!==this.payoff?(0,r.html)(_(),"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?this.outcome:"","feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?"better"===this.outcome?(0,r.html)(x()):"worse"===this.outcome?(0,r.html)(b()):"even"===this.outcome?(0,r.html)(v()):(0,r.html)(m()):"","both"!==this.payoff&&"selection"!==this.payoff||"gamble"!==this.response?(0,r.html)(g()):(0,r.html)(y(),"gamble"===this.response?"Win:":"Miss:",this.trialPayoff),"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?this.outcome:"","feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?"better"===this.outcome?(0,r.html)(p()):"worse"===this.outcome?(0,r.html)(d()):"even"===this.outcome?(0,r.html)(h()):(0,r.html)(f()):"","both"!==this.payoff&&"selection"!==this.payoff||"sure"!==this.response?(0,r.html)(u()):(0,r.html)(c(),"sure"===this.response?"Win:":"Miss:",this.trialPayoff)):(0,r.html)(l()))}},{key:"trialPayoff",get:function(){switch(this.response){case"gamble":return this.gamblePayoff;case"sure":return this.surePayoff;case"nr":return this.nrPayoff;default:return}}}],[{key:"styles",get:function(){return[A(P(n),"styles",this),(0,r.css)(s())]}}]),n}();n.default=L,customElements.define("decision-response",L)},{"../cpt-element":695,"@decidable/decidable-elements":674,"lit-element":211}],691:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element"),i=p(t("d3")),u=p(t("plotly.js/lib/core")),a=p(t("plotly.js/lib/isosurface")),s=p(t("plotly.js/lib/scatter3d")),c=l(t("@decidable/prospectable-math")),f=l(t("../cpt-element")),h=l(t("./plotly-style.auto"));function l(t){return t&&t.__esModule?t:{default:t}}function d(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return d=function(){return t},t}function p(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=d();if(e&&e.has(t))return e.get(t);var n,r,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,e&&e.set(t,i),i}function g(){var t=m(["\n        :host {\n          display: inline-block;\n        }\n\n        .plotly {\n          height: 100%;\n\n          cursor: grab;\n        }\n\n        /* Plotly modebar styles */\n        /* Drawn from: https://github.com/plotly/plotly.js/blob/master/src/components/modebar/modebar.js */\n        .plotly:hover .modebar .modebar-group {\n          background-color: rgba(255, 255, 255, 0.5);\n        }\n\n        .modebar-btn .icon path {\n          fill: rgba(68, 68, 68, 0.3);\n        }\n\n        .modebar-btn:hover .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n\n        .modebar-btn.active .icon path {\n          fill: rgba(68, 68, 68, 0.7);\n        }\n      "]);return g=function(){return t},t}function y(){var t=m(['\n      <div class="plotly"></div>\n    ']);return y=function(){return t},t}function m(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function v(t,e,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=k(n);return t=r?(t=k(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}u.register([a,s]);s=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(l,f.default);var e=w(l);function l(){var t;return function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).firstUpdate=!0,t.surface=!0,t.points=["all","first","rest","none"],t.point="first",t.a=.8,t.l=1.2,t.g=.8,t.xl=0,t.xw=20,t.pw=.5,t.xs=10,t.response="",t.label="",t.choices=[{name:"default",xw:t.xw,pw:t.pw,xs:t.xs,response:t.response,label:""}],t.GAMBLE=0,t.SURE=1,t.NR=.25,t.DEFAULT=.75,t.pointList=[],t.range={},t.range.xs={start:5,stop:15,step:.5},t.range.xw={start:10,stop:30,step:1},t.range.pw={start:0,stop:1,step:.05},t.width=NaN,t.height=NaN,t.rem=NaN,t.decisionSpace=[],t.alignState(),t}return x(l,null,[{key:"properties",get:function(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:String,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}}]),x(l,[{key:"alignState",value:function(){var r=this;this.choices[0].name="default",this.choices[0].xw=this.xw,this.choices[0].pw=this.pw,this.choices[0].xs=this.xs,this.choices[0].response=this.response,this.choices[0].label=this.label,this.pointList={xw:[],pw:[],xs:[],response:[],label:[]},this.choices.forEach(function(t,e){(0===e&&("first"===r.point||"all"===r.point)||0<e&&("rest"===r.point||"all"===r.point))&&(r.pointList.xw.push(t.xw),r.pointList.pw.push(t.pw),r.pointList.xs.push(t.xs),r.pointList.response.push("gamble"===t.response?r.GAMBLE:"sure"===t.response?r.SURE:"nr"===t.response?r.NR:r.DEFAULT),r.pointList.label.push(t.label))}),this.decisionSpace={xs:[],xw:[],pw:[],uDiff:[]},i.range(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).forEach(function(n){i.range(r.range.xw.start,r.range.xw.stop+.01,r.range.xw.step).forEach(function(e){i.range(r.range.pw.start,r.range.pw.stop+.01,r.range.pw.step).forEach(function(t){r.decisionSpace.xs.push(n),r.decisionSpace.xw.push(e),r.decisionSpace.pw.push(t);t=c.default.xal2v(e,r.a,r.l)*c.default.pg2w(t,r.g)+c.default.xal2v(r.xl,r.a,r.l)*(1-c.default.pg2w(t,r.g))-c.default.xal2v(n,r.a,r.l);r.decisionSpace.uDiff.push(t)})})})}},{key:"clear",value:function(){this.choices=[{}],this.requestUpdate()}},{key:"get",value:function(t){var e=0<arguments.length&&void 0!==t?t:"default",t=this.choices.find(function(t){return t.name===e});return void 0===t?null:t}},{key:"set",value:function(t,e,n,r,i,a){var o=4<arguments.length&&void 0!==i?i:"default",i=5<arguments.length&&void 0!==a?a:"";"default"===o&&(this.xw=t,this.pw=e,this.xs=n,this.response=r,this.label=i);a=this.choices.find(function(t){return t.name===o});void 0===a?this.choices.push({name:o,xw:t,pw:e,xs:n,response:r,label:i}):(a.xw=t,a.pw=e,a.xs=n,a.response=r,a.label=i),this.requestUpdate()}},{key:"render",value:function(){return(0,r.html)(y())}},{key:"getDimensions",value:function(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}},{key:"connectedCallback",value:function(){v(k(l.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this.getDimensions.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this.getDimensions.bind(this)),v(k(l.prototype),"disconnectedCallback",this).call(this)}},{key:"firstUpdated",value:function(t){v(k(l.prototype),"firstUpdated",this).call(this,t),window.setTimeout(this.getDimensions.bind(this),0)}},{key:"update",value:function(t){var e,n,r,i,a,o,s;v(k(l.prototype),"update",this).call(this,t),this.alignState(),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem)||(e=this.getComputedStyleValue("---color-text"),s=this.getComputedStyleValue("---color-element-border"),n=this.getComputedStyleValue("---color-element-background"),r=this.getComputedStyleValue("---color-worse"),i=this.getComputedStyleValue("---color-better"),a=this.getComputedStyleValue("---color-nr"),o=this.getComputedStyleValue("---color-element-emphasis"),t=[],this.surface&&t.push({name:"Decision Boundary",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,coloraxis:"coloraxis",isomin:0,isomax:0,opacity:.5},{name:"Difference in Subjective Utility",type:"isosurface",x:this.decisionSpace.xs,y:this.decisionSpace.xw,z:this.decisionSpace.pw,value:this.decisionSpace.uDiff,caps:{x:{show:!1},y:{show:!1},z:{show:!1}},coloraxis:"coloraxis",isomin:-30,isomax:30,showscale:!1,slices:{x:{show:!0,locations:[this.range.xs.stop]},y:{show:!0,locations:[this.range.xw.stop]},z:{show:!0,locations:[this.range.pw.start]}},surface:{show:!1}}),t.push({name:"Current Decision",type:"scatter3d",x:this.pointList.xs,y:this.pointList.xw,z:this.pointList.pw,mode:"markers",marker:{color:this.pointList.response,coloraxis:"coloraxis2"}}),s={coloraxis:{cmin:-30,cmax:30,colorbar:{title:{font:{size:1.125*this.rem},text:"Difference in Utility (Gamble - Sure)",side:"right"},thickness:16,ypad:32},colorscale:[[0,"rgb(5,10,172)"],[.25,"rgb(5,10,172)"],[.425,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.55,"rgb(220,170,132)"],[.6,"rgb(230,145,90)"],[.75,"rgb(178,10,28)"],[1,"rgb(178,10,28)"]]},coloraxis2:{cmin:0,cmax:1,colorscale:[[0,r],[.01,r],[.24,a],[.26,a],[.74,o],[.76,o],[.99,i],[1,i]],showscale:!1},font:{family:'"Source Sans Pro", sans-serif',color:e},margin:{t:0,l:0,b:0},scene:{hovermode:!1,camera:{center:{x:0,y:.1,z:-.2},eye:{x:-2,y:-.8,z:.8}},xaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[this.range.xs.start,this.range.xs.stop],title:{text:"Sure Value",font:{size:1.125*this.rem}}},yaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[this.range.xw.start,this.range.xw.stop],title:{text:"Win Value",font:{size:1.125*this.rem}}},zaxis:{mirror:!0,showbackground:!0,backgroundcolor:n,showgrid:!1,showspikes:!1,ticks:"outside",tickcolor:s,showline:!0,linecolor:s,zeroline:!1,range:[this.range.pw.start,this.range.pw.stop],title:{text:"Win Probability",font:{size:1.125*this.rem}}}},uirevision:!0},u.react(this.shadowRoot.querySelector(".plotly"),t,s,{displaylogo:!1,modeBarButtonsToRemove:["orbitRotation","resetCameraDefault3d","hoverClosest3d","toImage"],responsive:!0}),this.firstUpdate=!1)}}],[{key:"styles",get:function(){return[v(k(l),"styles",this),h.default,(0,r.css)(g())]}}]),l}();n.default=s,customElements.define("decision-space",s)},{"../cpt-element":695,"./plotly-style.auto":694,"@decidable/prospectable-math":708,d3:89,"lit-element":211,"plotly.js/lib/core":268,"plotly.js/lib/isosurface":270,"plotly.js/lib/scatter3d":271}],692:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=t("lit-element"),a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=i?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3")),s=(r=t("../cpt-element"))&&r.__esModule?r:{default:r};function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function u(){var t=f(["\n        :host {\n          display: inline-block;\n        }\n      "]);return u=function(){return t},t}function c(){var t=f(['\n      <div class="holder">\n        <decision-choice state="','" probability="','" win="','" loss="','" sure="','"></decision-choice>\n      </div>']);return c=function(){return t},t}function f(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=m(n);return t=r?(t=m(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(n,s.default);var e=y(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).duration=2e3,t.iti=2e3,t.trials=5,t.running=!1,t.states=["resetted","iti","stimulus","ended"],t.state="resetted",t.range={},t.range.xl={start:0,stop:0,step:1},t.range.xw={start:10,stop:30,step:1},t.range.pw={start:.1,stop:.9,step:.1},t.range.xs={start:5,stop:15,step:1},t.range.xl.values=a.range(t.range.xl.start,t.range.xl.stop+.01,t.range.xl.step),t.range.xw.values=a.range(t.range.xw.start,t.range.xw.stop+.01,t.range.xw.step),t.range.pw.values=a.range(t.range.pw.start,t.range.pw.stop+.01,t.range.pw.step),t.range.xs.values=a.range(t.range.xs.start,t.range.xs.stop+.01,t.range.xs.step),t.xl=0,t.xw=0,t.pw=0,t.xs=0,t.trial=0,t.baseTime=0,t.pauseTime=0,t.startTime=0,t.lastTime=0,t.runner=void 0,t}return p(n,null,[{key:"properties",get:function(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}}]),p(n,[{key:"render",value:function(){return(0,i.html)(c(),"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank",this.pw,this.xw,this.xl,this.xs)}},{key:"update",value:function(t){h(m(n.prototype),"update",this).call(this,t),t.has("running")&&(this.running?(this.pauseTime&&(this.baseTime+=a.now()-this.pauseTime,this.pauseTime=0),this.runner=a.interval(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=a.now()))}},{key:"reset",value:function(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}},{key:"run",value:function(){var t=a.now(),e=this.baseTime?t-this.baseTime:0,n=this.baseTime?e-this.startTime:0;this.lastTime=e,"resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("decision-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&n>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=e,this.xl=this.range.xl.values[Math.floor(Math.random()*this.range.xl.values.length)],this.xw=this.range.xw.values[Math.floor(Math.random()*this.range.xw.values.length)],this.pw=this.range.pw.values[Math.floor(Math.random()*this.range.pw.values.length)],this.xs=this.range.xs.values[Math.floor(Math.random()*this.range.xs.values.length)],this.vDiff=this.xw*this.pw+this.xl*(1-this.pw)-this.xs,this.gamblePayoff=Math.random()<this.pw?this.xw:this.xl,this.surePayoff=this.xs,this.better=0<this.vDiff?"gamble":this.vDiff<0?"sure":"equal",this.dispatchEvent(new CustomEvent("decision-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0}))):"stimulus"===this.state&&n>=this.duration&&(this.dispatchEvent(new CustomEvent("decision-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("decision-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=e))}}],[{key:"styles",get:function(){return[h(m(n),"styles",this),(0,i.css)(u())]}}]),n}();n.default=v,customElements.define("decision-task",v)},{"../cpt-element":695,d3:89,"lit-element":211}],693:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CPTCalculation",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"CPTFit",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"CPTProbability",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"CPTSpace",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"CPTValue",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"DecisionChoice",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"DecisionControl",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"DecisionOption",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"DecisionOutcome",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"DecisionResponse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"DecisionSpace",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"DecisionTask",{enumerable:!0,get:function(){return p.default}});var r=g(t("./cpt-calculation")),i=g(t("./cpt-fit")),a=g(t("./cpt-probability")),o=g(t("./cpt-space")),s=g(t("./cpt-value")),l=g(t("./decision-choice")),u=g(t("./decision-control")),c=g(t("./decision-option")),f=g(t("./decision-outcome")),h=g(t("./decision-response")),d=g(t("./decision-space")),p=g(t("./decision-task"));function g(t){return t&&t.__esModule?t:{default:t}}},{"./cpt-calculation":680,"./cpt-fit":682,"./cpt-probability":683,"./cpt-space":684,"./cpt-value":685,"./decision-choice":686,"./decision-control":687,"./decision-option":688,"./decision-outcome":689,"./decision-response":690,"./decision-space":691,"./decision-task":692}],694:[function(t,e,n){"use strict";function r(){var t=function(t,e){e=e||t.slice(0);return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n  /* inject:css */\n  .js-plotly-plot .plotly, .js-plotly-plot .plotly div {\n  direction: ltr;\n  font-family: "Open Sans", verdana, arial, sans-serif;\n  margin: 0;\n  padding: 0;\n}\n.js-plotly-plot .plotly input, .js-plotly-plot .plotly button {\n  font-family: "Open Sans", verdana, arial, sans-serif;\n}\n.js-plotly-plot .plotly input:focus, .js-plotly-plot .plotly button:focus {\n  outline: none;\n}\n.js-plotly-plot .plotly a {\n  text-decoration: none;\n}\n.js-plotly-plot .plotly a:hover {\n  text-decoration: none;\n}\n.js-plotly-plot .plotly .crisp {\n  shape-rendering: crispEdges;\n}\n.js-plotly-plot .plotly .user-select-none {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n}\n.js-plotly-plot .plotly svg {\n  overflow: hidden;\n}\n.js-plotly-plot .plotly svg a {\n  fill: #447adb;\n}\n.js-plotly-plot .plotly svg a:hover {\n  fill: #3c6dc5;\n}\n.js-plotly-plot .plotly .main-svg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n.js-plotly-plot .plotly .main-svg .draglayer {\n  pointer-events: all;\n}\n.js-plotly-plot .plotly .cursor-default {\n  cursor: default;\n}\n.js-plotly-plot .plotly .cursor-pointer {\n  cursor: pointer;\n}\n.js-plotly-plot .plotly .cursor-crosshair {\n  cursor: crosshair;\n}\n.js-plotly-plot .plotly .cursor-move {\n  cursor: move;\n}\n.js-plotly-plot .plotly .cursor-col-resize {\n  cursor: col-resize;\n}\n.js-plotly-plot .plotly .cursor-row-resize {\n  cursor: row-resize;\n}\n.js-plotly-plot .plotly .cursor-ns-resize {\n  cursor: ns-resize;\n}\n.js-plotly-plot .plotly .cursor-ew-resize {\n  cursor: ew-resize;\n}\n.js-plotly-plot .plotly .cursor-sw-resize {\n  cursor: sw-resize;\n}\n.js-plotly-plot .plotly .cursor-s-resize {\n  cursor: s-resize;\n}\n.js-plotly-plot .plotly .cursor-se-resize {\n  cursor: se-resize;\n}\n.js-plotly-plot .plotly .cursor-w-resize {\n  cursor: w-resize;\n}\n.js-plotly-plot .plotly .cursor-e-resize {\n  cursor: e-resize;\n}\n.js-plotly-plot .plotly .cursor-nw-resize {\n  cursor: nw-resize;\n}\n.js-plotly-plot .plotly .cursor-n-resize {\n  cursor: n-resize;\n}\n.js-plotly-plot .plotly .cursor-ne-resize {\n  cursor: ne-resize;\n}\n.js-plotly-plot .plotly .cursor-grab {\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.js-plotly-plot .plotly .modebar {\n  position: absolute;\n  top: 2px;\n  right: 2px;\n}\n.js-plotly-plot .plotly .ease-bg {\n  -webkit-transition: background-color 0.3s ease 0s;\n  -moz-transition: background-color 0.3s ease 0s;\n  -ms-transition: background-color 0.3s ease 0s;\n  -o-transition: background-color 0.3s ease 0s;\n  transition: background-color 0.3s ease 0s;\n}\n.js-plotly-plot .plotly .modebar--hover > :not(.watermark) {\n  opacity: 0;\n  -webkit-transition: opacity 0.3s ease 0s;\n  -moz-transition: opacity 0.3s ease 0s;\n  -ms-transition: opacity 0.3s ease 0s;\n  -o-transition: opacity 0.3s ease 0s;\n  transition: opacity 0.3s ease 0s;\n}\n.js-plotly-plot .plotly:hover .modebar--hover .modebar-group {\n  opacity: 1;\n}\n.js-plotly-plot .plotly .modebar-group {\n  float: left;\n  display: inline-block;\n  box-sizing: border-box;\n  padding-left: 8px;\n  position: relative;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.js-plotly-plot .plotly .modebar-btn {\n  position: relative;\n  font-size: 16px;\n  padding: 3px 4px;\n  height: 22px;\n  /* display: inline-block; including this breaks 3d interaction in .embed mode. Chrome bug? */\n  cursor: pointer;\n  line-height: normal;\n  box-sizing: border-box;\n}\n.js-plotly-plot .plotly .modebar-btn svg {\n  position: relative;\n  top: 2px;\n}\n.js-plotly-plot .plotly .modebar.vertical {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  align-content: flex-end;\n  max-height: 100%;\n}\n.js-plotly-plot .plotly .modebar.vertical svg {\n  top: -1px;\n}\n.js-plotly-plot .plotly .modebar.vertical .modebar-group {\n  display: block;\n  float: none;\n  padding-left: 0px;\n  padding-bottom: 8px;\n}\n.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn {\n  display: block;\n  text-align: center;\n}\n.js-plotly-plot .plotly [data-title] {\n  /**\n   * tooltip body\n   */\n}\n.js-plotly-plot .plotly [data-title]:before, .js-plotly-plot .plotly [data-title]:after {\n  position: absolute;\n  -webkit-transform: translate3d(0, 0, 0);\n  -moz-transform: translate3d(0, 0, 0);\n  -ms-transform: translate3d(0, 0, 0);\n  -o-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n  display: none;\n  opacity: 0;\n  z-index: 1001;\n  pointer-events: none;\n  top: 110%;\n  right: 50%;\n}\n.js-plotly-plot .plotly [data-title]:hover:before, .js-plotly-plot .plotly [data-title]:hover:after {\n  display: block;\n  opacity: 1;\n}\n.js-plotly-plot .plotly [data-title]:before {\n  content: "";\n  position: absolute;\n  background: transparent;\n  border: 6px solid transparent;\n  z-index: 1002;\n  margin-top: -12px;\n  border-bottom-color: #69738a;\n  margin-right: -6px;\n}\n.js-plotly-plot .plotly [data-title]:after {\n  content: attr(data-title);\n  background: #69738a;\n  color: white;\n  padding: 8px 10px;\n  font-size: 12px;\n  line-height: 12px;\n  white-space: nowrap;\n  margin-right: -18px;\n  border-radius: 2px;\n}\n.js-plotly-plot .plotly .vertical [data-title]:before, .js-plotly-plot .plotly .vertical [data-title]:after {\n  top: 0%;\n  right: 200%;\n}\n.js-plotly-plot .plotly .vertical [data-title]:before {\n  border: 6px solid transparent;\n  border-left-color: #69738a;\n  margin-top: 8px;\n  margin-right: -30px;\n}\n.js-plotly-plot .plotly .select-outline {\n  fill: none;\n  stroke-width: 1;\n  shape-rendering: crispEdges;\n}\n.js-plotly-plot .plotly .select-outline-1 {\n  stroke: white;\n}\n.js-plotly-plot .plotly .select-outline-2 {\n  stroke: black;\n  stroke-dasharray: 2px 2px;\n}\n\n.plotly-notifier {\n  font-family: "Open Sans", verdana, arial, sans-serif;\n  position: fixed;\n  top: 50px;\n  right: 20px;\n  z-index: 10000;\n  font-size: 10pt;\n  max-width: 180px;\n}\n.plotly-notifier p {\n  margin: 0;\n}\n.plotly-notifier .notifier-note {\n  min-width: 180px;\n  max-width: 250px;\n  border: 1px solid #fff;\n  z-index: 3000;\n  margin: 0;\n  background-color: #8c97af;\n  background-color: rgba(140, 151, 175, 0.9);\n  color: #fff;\n  padding: 10px;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  -ms-hyphens: auto;\n  -webkit-hyphens: auto;\n  hyphens: auto;\n}\n.plotly-notifier .notifier-close {\n  color: #fff;\n  opacity: 0.8;\n  float: right;\n  padding: 0 5px;\n  background: none;\n  border: none;\n  font-size: 20px;\n  font-weight: bold;\n  line-height: 20px;\n}\n.plotly-notifier .notifier-close:hover {\n  color: #444;\n  text-decoration: none;\n  cursor: pointer;\n}\n  /* endinject */\n']);return r=function(){return t},t}Object.defineProperty(n,"__esModule",{value:!0});t=(n.default=void 0,t("lit-element").css)(r());n.default=t},{"lit-element":211}],695:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element"),i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var a;Object.prototype.hasOwnProperty.call(t,n)&&((a=i?Object.getOwnPropertyDescriptor(t,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3")),a=t("@decidable/decidable-elements");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function l(){var t=function(t,e){e=e||t.slice(0);return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n        :host {\n          ---color-x: var(--color-x, ",");\n          ---color-a: var(--color-a, ",");\n          ---color-l: var(--color-l, ",");\n          ---color-v: var(--color-v, ",");\n          ---color-p: var(--color-p, ",");\n          ---color-g: var(--color-g, ",");\n          ---color-w: var(--color-w, ",");\n          ---color-u: var(--color-u, ",");\n          ---color-chosen: var(--color-chosen, ",");\n          ---color-better: var(--color-better, ",");\n          ---color-worse: var(--color-worse, ",");\n          ---color-even: var(--color-even, ",");\n          ---color-correct: var(--color-correct, ",");\n          ---color-error: var(--color-error, ",");\n          ---color-nr: var(--color-nr, ",");\n\n          ---color-x-light: var(--color-x-light, ",");\n          ---color-a-light: var(--color-a-light, ",");\n          ---color-l-light: var(--color-l-light, ",");\n          ---color-v-light: var(--color-v-light, ",");\n          ---color-p-light: var(--color-p-light, ",");\n          ---color-g-light: var(--color-g-light, ",");\n          ---color-w-light: var(--color-w-light, ",");\n          ---color-u-light: var(--color-u-light, ",");\n          ---color-chosen-light: var(--color-chosen-light, ",");\n          ---color-better-light: var(--color-better-light, ",");\n          ---color-worse-light: var(--color-worse-light, ",");\n          ---color-even-light: var(--color-even-light, ",");\n          ---color-correct-light: var(--color-correct-light, ",");\n          ---color-error-light: var(--color-error-light, ",");\n          ---color-nr-light: var(--color-nr-light, ",");\n\n          ---color-x-dark: var(--color-x-dark, ",");\n          ---color-a-dark: var(--color-a-dark, ",");\n          ---color-l-dark: var(--color-l-dark, ",");\n          ---color-v-dark: var(--color-v-dark, ",");\n          ---color-p-dark: var(--color-p-dark, ",");\n          ---color-g-dark: var(--color-g-dark, ",");\n          ---color-w-dark: var(--color-w-dark, ",");\n          ---color-u-dark: var(--color-u-dark, ",");\n          ---color-chosen-dark: var(--color-chosen-dark, ",");\n          ---color-better-dark: var(--color-better-dark, ",");\n          ---color-worse-dark: var(--color-worse-dark, ",");\n          ---color-even-dark: var(--color-even-dark, ",");\n          ---color-correct-dark: var(--color-correct-dark, ",");\n          ---color-error-dark: var(--color-error-dark, ",");\n          ---color-nr-dark: var(--color-nr-dark, ",");\n        }\n      "]);return l=function(){return t},t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return t=r?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,a.DecidableElement);var e=d(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).interactive=!1,t}return f(n,null,[{key:"properties",get:function(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}}]),f(n,null,[{key:"colors",get:function(){return{x:i.schemeSet1[1],a:i.schemeSet1[5],l:i.schemeSet1[6],v:i.schemeSet1[8],p:i.schemeSet1[2],g:i.schemeSet1[3],w:i.schemeSet1[4],u:i.schemeSet1[7],chosen:i.schemeSet1[9],better:"#4545d0",worse:"#f032e6",even:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}}},{key:"lights",get:function(){return Object.keys(n.colors).reduce(function(t,e){return t[e]=i.interpolateRgb(n.colors[e],"#ffffff")(.5),t},{})}},{key:"darks",get:function(){return Object.keys(n.colors).reduce(function(t,e){return t[e]=i.interpolateRgb(n.colors[e],"#000000")(.5),t},{})}},{key:"styles",get:function(){return[u(p(n),"styles",this),(0,r.css)(l(),(0,r.unsafeCSS)(this.colors.x),(0,r.unsafeCSS)(this.colors.a),(0,r.unsafeCSS)(this.colors.l),(0,r.unsafeCSS)(this.colors.v),(0,r.unsafeCSS)(this.colors.p),(0,r.unsafeCSS)(this.colors.g),(0,r.unsafeCSS)(this.colors.w),(0,r.unsafeCSS)(this.colors.u),(0,r.unsafeCSS)(this.colors.chosen),(0,r.unsafeCSS)(this.colors.better),(0,r.unsafeCSS)(this.colors.worse),(0,r.unsafeCSS)(this.colors.even),(0,r.unsafeCSS)(this.colors.correct),(0,r.unsafeCSS)(this.colors.error),(0,r.unsafeCSS)(this.colors.nr),(0,r.unsafeCSS)(this.lights.x),(0,r.unsafeCSS)(this.lights.a),(0,r.unsafeCSS)(this.lights.l),(0,r.unsafeCSS)(this.lights.v),(0,r.unsafeCSS)(this.lights.p),(0,r.unsafeCSS)(this.lights.g),(0,r.unsafeCSS)(this.lights.w),(0,r.unsafeCSS)(this.lights.u),(0,r.unsafeCSS)(this.lights.chosen),(0,r.unsafeCSS)(this.lights.better),(0,r.unsafeCSS)(this.lights.worse),(0,r.unsafeCSS)(this.lights.even),(0,r.unsafeCSS)(this.lights.correct),(0,r.unsafeCSS)(this.lights.error),(0,r.unsafeCSS)(this.lights.nr),(0,r.unsafeCSS)(this.darks.x),(0,r.unsafeCSS)(this.darks.a),(0,r.unsafeCSS)(this.darks.l),(0,r.unsafeCSS)(this.darks.v),(0,r.unsafeCSS)(this.darks.p),(0,r.unsafeCSS)(this.darks.g),(0,r.unsafeCSS)(this.darks.w),(0,r.unsafeCSS)(this.darks.u),(0,r.unsafeCSS)(this.darks.chosen),(0,r.unsafeCSS)(this.darks.better),(0,r.unsafeCSS)(this.darks.worse),(0,r.unsafeCSS)(this.darks.even),(0,r.unsafeCSS)(this.darks.correct),(0,r.unsafeCSS)(this.darks.error),(0,r.unsafeCSS)(this.darks.nr))]}}]),n}();n.default=t},{"@decidable/decidable-elements":674,d3:89,"lit-element":211}],696:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element");t("@decidable/decidable-elements");var a,o=(a=t("../cpt-element"))&&a.__esModule?a:{default:a};function s(){var t=function(t,e){e=e||t.slice(0);return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n        :host {\n          display: block;\n\n          margin: 1rem;\n        }\n\n        /* Containing <div> */\n        .holder {\n          display: flex;\n\n          flex-direction: row;\n\n          justify-content: left;\n        }\n\n        /* Overall <table> */\n        .equation {\n          text-align: center;\n\n          border-collapse: collapse;\n\n          border: 0;\n        }\n\n        /* Modifies <td> */\n        .underline {\n          border-bottom: 1px solid var(---color-text);\n        }\n\n        /* Basic <span> and <var> w/modifiers */\n        span,\n        var {\n          padding: 0 0.25rem;\n\n          font-style: normal;\n        }\n\n        .tight {\n          padding: 0;\n        }\n\n        .paren {\n          font-size: 150%;\n        }\n\n        .bracket {\n          font-size: 175%;\n        }\n\n        .brace {\n          font-size: 200%;\n        }\n\n        .addend {\n          position: relative;\n          display: inline-block;\n        }\n\n        .comparison {\n          position: relative;\n          display: inline-block;\n\n          font-size: 125%;\n          font-weight: 600;\n        }\n\n        .function {\n          display: inline-block;\n        }\n\n        :host([numeric]) .function {\n          padding: 0.25rem;\n        }\n\n        .exp {\n          display: inline-block;\n\n          font-size: 0.75rem;\n        }\n\n        .subscript {\n          display: inline-block;\n\n          font-size: 66.667%;\n        }\n\n        .summation {\n          display: flex;\n\n          flex-direction: column;\n\n          line-height: 0.8;\n        }\n\n        .sigma {\n          display: inline-block;\n\n          font-size: 200%;\n        }\n\n        /* Input wrapping <label> */\n        decidable-spinner {\n          --decidable-spinner-input-width: 4rem;\n\n          display: inline-block;\n\n          padding: 0.125rem 0.375rem 0.375rem;\n\n          line-height: 1.5;\n          vertical-align: middle;\n        }\n\n        .n {\n          --decidable-spinner-input-width: 2rem;\n        }\n\n        .left {\n          text-align: left;\n        }\n\n        .right {\n          text-align: right;\n        }\n\n        .bottom {\n          vertical-align: bottom;\n        }\n\n        .top {\n          vertical-align: top;\n        }\n\n        /* Color scheme */\n        /* .win {\n          background: var(---color-better);\n        }\n\n        .loss {\n          background: var(---color-worse);\n        }\n\n        .sure {\n          background: var(---color-even);\n        } */\n\n        .x {\n          background: var(---color-x-light);\n        }\n\n        .a {\n          background: var(---color-a-light);\n        }\n\n        .l {\n          background: var(---color-l-light);\n        }\n\n        .v {\n          background: var(---color-v-light);\n        }\n\n        .p {\n          background: var(---color-p-light);\n        }\n\n        .g {\n          background: var(---color-g-light);\n        }\n\n        .w {\n          background: var(---color-w-light);\n        }\n\n        .u {\n          background: var(---color-u-light);\n        }\n      "]);return s=function(){return t},t}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(n);return t=r?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(n,o.default);var e=h(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).numeric=!1,t}return c(n,null,[{key:"properties",get:function(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}}]),c(n,null,[{key:"styles",get:function(){return[l(d(n),"styles",this),(0,r.css)(s())]}}]),n}();n.default=p},{"../cpt-element":695,"@decidable/decidable-elements":674,"lit-element":211}],697:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CPTEquationPG2W",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"CPTEquationVW2U",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"CPTEquationXAL2V",{enumerable:!0,get:function(){return a.default}});var r=o(t("./pg2w")),i=o(t("./vw2u")),a=o(t("./xal2v"));function o(t){return t&&t.__esModule?t:{default:t}}},{"./pg2w":698,"./vw2u":699,"./xal2v":700}],698:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("lit-element"),a=s(t("@decidable/prospectable-math")),o=s(t("./cpt-equation"));function s(t){return t&&t.__esModule?t:{default:t}}function l(){var t=y(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"]);return l=function(){return t},t}function u(){var t=y(['\n      <tr>\n        <td rowspan="2">\n          ','<span class="equals">=</span>\n        </td>\n        <td class="underline">\n          ','<sup class="exp">','</sup>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <span class="bracket tight">[</span>','<sup class="exp">','</sup><span class="plus">+</span><span class="paren tight">(</span>1<span class="minus">−</span>','<span class="paren tight">)</span><sup class="exp">','</sup><span class="bracket tight">]</span><sup class="exp">1/',"</sup>\n        </td>\n      </tr>"]);return u=function(){return t},t}function c(){var t=y(['<var class="math-var w">w</var>']);return c=function(){return t},t}function f(){var t=y(['<var class="math-var g">γ</var>']);return f=function(){return t},t}function h(){var t=y(['<var class="math-var p">p</var>']);return h=function(){return t},t}function d(){var t=y(['<decidable-spinner class="w bottom" disabled min="0" max="1" step=".01" .value="','">\n          <var class="math-var">w</var>\n        </decidable-spinner>']);return d=function(){return t},t}function p(){var t=y(['<decidable-spinner class="g bottom" ?disabled=',' min="0" max="1" step="0.01" .value="','" @input=','>\n          <var class="math-var">γ</var>\n        </decidable-spinner>']);return p=function(){return t},t}function g(){var t=y(['<decidable-spinner class="p bottom" ?disabled=',' min="0" max="1" step="0.01" .value="','" @input=','>\n          <var class="math-var">p</var>\n        </decidable-spinner>']);return g=function(){return t},t}function y(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),t}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=_(n);return t=r?(t=_(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(n,o.default);var e=x(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).p=.75,t.g=.5,t.alignState(),t}return v(n,null,[{key:"properties",get:function(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}}]),v(n,[{key:"alignState",value:function(){this.w=a.default.pg2w(this.p,this.g)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-pg2w-change",{detail:{p:this.p,g:this.g,w:this.w},bubbles:!0}))}},{key:"pInput",value:function(t){this.p=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"gInput",value:function(t){this.g=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var t,e;this.alignState(),e=this.numeric?(t=(0,r.html)(g(),!this.interactive,this.p,this.pInput.bind(this)),n=(0,r.html)(p(),!this.interactive,this.g,this.gInput.bind(this)),(0,r.html)(d(),+this.w.toFixed(2))):(t=(0,r.html)(h()),n=(0,r.html)(f()),(0,r.html)(c()));var n=(0,r.html)(u(),e,t,n,t,n,t,n,n);return(0,r.html)(l(),n)}}]),n}();n.default=t,customElements.define("cpt-equation-pg2w",t)},{"./cpt-equation":696,"@decidable/prospectable-math":708,"lit-element":211}],699:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-element"),o=t("lit-transition"),s=t("@decidable/decidable-elements"),l=(r=t("./cpt-equation"))&&r.__esModule?r:{default:r};function u(){var t=k(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"]);return u=function(){return t},t}function c(){var t=k(["","&nbsp;",'<span class="plus">+</span><span class="ellipsis">…</span><span class="plus">+</span>',"&nbsp;",""]);return c=function(){return t},t}function f(){var t=k([""]);return f=function(){return t},t}function h(){var t=k(['<span class="plus">+</span>']);return h=function(){return t},t}function d(){var t=k(['<span class="addend tight">',"","&nbsp;","</span>"]);return d=function(){return t},t}function p(){var t=k(["\n      <tr>\n        <td>\n          ",'<span class="equals">=</span>\n        </td>\n        <td>\n          <div class="summation">\n            <span class="tight">','</span>\n            <span class="tight"><var class="math-greek sigma">Σ</var></span>\n            <span class="tight"><var class="math-var subscript tight">i</var><span class="equals subscript">=</span><span class="subscript tight">1</span></span>\n          </div>\n        </td>\n        <td>\n          ',"&nbsp;",'<span class="equals">=</span>\n        </td>\n        <td>\n          ',"\n        </td>\n      </tr>"]);return p=function(){return t},t}function g(){var t=k(['<var class="math-var subscript">n</var>']);return g=function(){return t},t}function y(){var t=k(['<var class="math-var u">U</var>']);return y=function(){return t},t}function m(){var t=k(['<decidable-spinner class="n" ?disabled=',' min="1" max="4" step="1" .value="','" @input=','>\n          <var class="math-var">n</var>\n        </decidable-spinner>']);return m=function(){return t},t}function v(){var t=k(['<decidable-spinner class="u" disabled .value="','">\n          <var class="math-var">U</var>\n        </decidable-spinner>']);return v=function(){return t},t}function b(){var t=k(['<var class="math-var w">w<sub class="subscript ','">',"</sub></var>"]);return b=function(){return t},t}function x(){var t=k(['<decidable-spinner class="w" ?disabled=',' min="0" max="1" step=".001" .value="','" @input=','>\n          <var class="math-var">w<sub class="subscript ','">',"</sub></var>\n        </decidable-spinner>"]);return x=function(){return t},t}function _(){var t=k(['<var class="math-var v">v<sub class="subscript ','">',"</sub></var>"]);return _=function(){return t},t}function w(){var t=k(['<decidable-spinner class="v" ?disabled=',' .value="','" @input=','>\n          <var class="math-var">v<sub class="subscript ','">',"</sub></var>\n        </decidable-spinner>"]);return w=function(){return t},t}function k(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),t}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=E(n);return t=r?(t=E(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(n,l.default);var e=S(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).v=[10,0],t.w=[.75,.25],t.n=2,t.nMax=4,t.vMax=new Array(t.nMax).fill(0),t.wMax=new Array(t.nMax).fill(0),t.alignState(),t}return T(n,null,[{key:"properties",get:function(){return{v:{attribute:"value",converter:s.DecidableConverterArray,reflect:!0},w:{attribute:"weight",converter:s.DecidableConverterArray,reflect:!0},n:{attribute:"outcomes",type:Number,reflect:!0},u:{attribute:!1,type:Number,reflect:!1}}}}]),T(n,[{key:"alignState",value:function(){var r=this;this.v=this.v.length<this.n?this.v.concat(this.vMax.slice(this.v.length,this.n)):this.v.length>this.n?this.v.slice(0,this.n):this.v,this.w=this.w.length<this.n?this.w.concat(this.wMax.slice(this.w.length,this.n)):this.w.length>this.n?this.w.slice(0,this.n):this.w,this.v.forEach(function(t,e){r.vMax[e]=t}),this.w.forEach(function(t,e){r.wMax[e]=t}),this.u=this.v.reduce(function(t,e,n){return t+e*r.w[n]},0)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-vw2u-change",{detail:{v:this.v,w:this.w,n:this.n,u:this.u},bubbles:!0}))}},{key:"vInput",value:function(t,e){this.v[t]=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"wInput",value:function(t,e){this.w[t]=parseFloat(e.target.value),this.alignState(),this.sendEvent()}},{key:"nInput",value:function(t){this.n=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"vTemplate",value:function(t,e,n){t=0<arguments.length&&void 0!==t?t:"",e=1<arguments.length&&void 0!==e?e:"";return 2<arguments.length&&void 0!==n&&n?(n=Number.parseInt(t,10)-1,(0,a.html)(w(),!this.interactive,this.v[n],this.vInput.bind(this,n),e,t)):(0,a.html)(_(),e,t)}},{key:"wTemplate",value:function(t,e,n){t=0<arguments.length&&void 0!==t?t:"",e=1<arguments.length&&void 0!==e?e:"";return 2<arguments.length&&void 0!==n&&n?(n=Number.parseInt(t,10)-1,(0,a.html)(x(),!this.interactive,this.w[n],this.wInput.bind(this,n),e,t)):(0,a.html)(b(),e,t)}},{key:"render",value:function(){var t,n=this;this.alignState(),e=this.numeric?(t=(0,a.html)(v(),+this.u.toFixed(3)),(0,a.html)(m(),!this.interactive,this.n,this.nInput.bind(this))):(t=(0,a.html)(y()),(0,a.html)(g()));var e=(0,a.html)(p(),t,e,this.vTemplate("i","math-var",!1),this.wTemplate("i","math-var",!1),this.numeric?Array(this.nMax).fill().map(function(t,e){return(0,o.transition)(e<n.n?(0,o.mark)((0,a.html)(d(),0!==e?(0,a.html)(h()):(0,a.html)(f()),n.vTemplate(e+1,"math-num",!0),n.wTemplate(e+1,"math-num",!0)),"".concat(e)):null,(0,o.slide)({mode:"both",x:"-100%",x1:"-100%"}))}):(0,a.html)(c(),this.vTemplate("1","math-num",!1),this.wTemplate("1","math-num",!1),this.vTemplate("n","math-var",!1),this.wTemplate("n","math-var",!1)));return(0,a.html)(u(),e)}}]),n}();n.default=O,customElements.define("cpt-equation-vw2u",O)},{"./cpt-equation":696,"@decidable/decidable-elements":674,"lit-element":211,"lit-transition":237}],700:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t("lit-element"),r=s(t("@decidable/prospectable-math")),o=s(t("./cpt-equation"));function s(t){return t&&t.__esModule?t:{default:t}}function l(){var t=v(['\n      <div class="holder">\n        <table class="equation">\n          <tbody>\n            ',"\n          </tbody>\n        </table>\n      </div>"]);return l=function(){return t},t}function u(){var t=v(['\n      <tr>\n        <td rowspan="2">\n          ','<span class="equals">=</span><span class="brace tight">{</span>\n        </td>\n        <td class="left">\n          ','<sup class="exp">',"</sup>,&emsp;if ",'<span class="equals">&ge;</span>0\n        </td>\n      </tr>\n      <tr>\n        <td class="left">\n          <span class="minus tight">−</span>','<span class="paren tight">(</span><span class="minus tight">−</span>','<span class="paren tight">)</span><sup class="exp">',"</sup>,&emsp;if ",'<span class="equals">&lt;</span>0\n        </td>\n      </tr>']);return u=function(){return t},t}function c(){var t=v(['<var class="math-var v">v</var>']);return c=function(){return t},t}function f(){var t=v(['<var class="math-var l">λ</var>']);return f=function(){return t},t}function h(){var t=v(['<var class="math-var a">α</var>']);return h=function(){return t},t}function d(){var t=v(['<var class="math-var x">x</var>']);return d=function(){return t},t}function p(){var t=v(['<decidable-spinner class="v bottom" disabled step=".001" .value="','">\n          <var class="math-var">v</var>\n        </decidable-spinner>']);return p=function(){return t},t}function g(){var t=v(['<decidable-spinner class="l bottom" ?disabled=',' min="0" step=".001" .value="','" @input=','>\n          <var class="math-var">λ</var>\n        </decidable-spinner>']);return g=function(){return t},t}function y(){var t=v(['<decidable-spinner class="a bottom" ?disabled=',' min="0" max="1" step=".001" .value="','" @input=','>\n          <var class="math-var">α</var>\n        </decidable-spinner>']);return y=function(){return t},t}function m(){var t=v(['<decidable-spinner class="x bottom" ?disabled=',' step="1" .value="','" @input=','>\n          <var class="math-var">x</var>\n        </decidable-spinner>']);return m=function(){return t},t}function v(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=k(n);return t=r?(t=k(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(n,o.default);var e=w(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).x=10,t.a=.5,t.l=2,t.alignState(),t}return x(n,null,[{key:"properties",get:function(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}}]),x(n,[{key:"alignState",value:function(){this.v=r.default.xal2v(this.x,this.a,this.l)}},{key:"sendEvent",value:function(){this.dispatchEvent(new CustomEvent("cpt-equation-xal2v-change",{detail:{x:this.x,a:this.a,l:this.l,v:this.v},bubbles:!0}))}},{key:"xInput",value:function(t){this.x=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"aInput",value:function(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"lInput",value:function(t){this.l=parseFloat(t.target.value),this.alignState(),this.sendEvent()}},{key:"render",value:function(){var t,e,n;this.alignState(),n=this.numeric?(r=(0,a.html)(m(),!this.interactive,this.x,this.xInput.bind(this)),t=(0,a.html)(y(),!this.interactive,this.a,this.aInput.bind(this)),e=(0,a.html)(g(),!this.interactive,this.l,this.lInput.bind(this)),(0,a.html)(p(),+this.v.toFixed(3))):(r=(0,a.html)(d()),t=(0,a.html)(h()),e=(0,a.html)(f()),(0,a.html)(c()));var r=(0,a.html)(u(),n,r,t,r,e,r,t,r);return(0,a.html)(l(),r)}}]),n}();n.default=t,customElements.define("cpt-equation-xal2v",t)},{"./cpt-equation":696,"@decidable/prospectable-math":708,"lit-element":211}],701:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=t("lit-element"),o=(r=t("../cpt-element"))&&r.__esModule?r:{default:r};function s(){var t=u(["\n        :host {\n          ---border: var(--border, 1px solid var(---color-border));\n          display: inline-block;\n\n          /* This makes IE11 happy */\n          width: 100%;\n\n          margin-bottom: 1rem;\n        }\n\n        .holder {\n          display: flex;\n        }\n\n        .body {\n          display: flex;\n\n          flex-wrap: wrap;\n\n          align-items: center;\n          justify-content: left;\n\n          padding: 0.625rem;\n\n          border: var(---border);\n          border-radius: 0.25rem;\n        }\n\n        .body ::slotted(*) {\n          margin: 0.625rem;\n        }\n\n        /* HACK: Sibling selectors not working with ::slotted */\n        /* .body > rdk-task + sdt-response,\n        ::slotted(rdk-task) + ::slotted(sdt-response) { */\n        .body ::slotted(sdt-response) {\n          margin-left: 0;\n        }\n\n        /* HACK: Sibling selectors not working with ::slotted */\n        /* .body > sdt-control + rdk-task,\n        ::slotted(sdt-control) + ::slotted(rdk-task) {\n          margin-left: 0;\n        } */\n        .body ::slotted(rdk-task) {\n          width: 10rem;\n          height: 10rem;\n          margin-left: 0;\n        }\n\n        .body ::slotted(decision-space),\n        .body ::slotted(cpt-space) {\n          width: 28rem;\n          height: 20rem;\n        }\n\n        .body ::slotted(cpt-value) {\n          width: 20rem;\n          height: 20rem;\n        }\n\n        .body ::slotted(cpt-probability) {\n          width: 20rem;\n          height: 20rem;\n        }\n      "]);return s=function(){return t},t}function l(){var t=u(['\n      <div class="holder">\n        <div class="body">\n          <slot>Empty!</slot>\n        </div>\n      </div>']);return l=function(){return t},t}function u(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return t=r?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(i,o.default);var t,e,n,r=d(i);function i(){return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return t=i,n=[{key:"styles",get:function(){return[f(p(i),"styles",this),(0,a.css)(s())]}}],(e=[{key:"render",value:function(){return(0,a.html)(l())}}])&&c(t.prototype,e),n&&c(t,n),i}();n.default=g,customElements.define("cpt-example",g)},{"../cpt-element":695,"lit-element":211}],702:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=t("./cpt-example"))&&r.__esModule?r:{default:r};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n);return t=r?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,a.default);var t,e,n,r=l(i);function i(){return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return t=i,(e=[{key:"firstUpdated",value:function(){var e=this;this.cptFit=this.querySelector("cpt-fit"),this.decisionControl=this.querySelector("decision-control"),this.decisionTask=this.querySelector("decision-task"),this.decisionResponse=this.querySelector("decision-response"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.cptFit&&this.cptFit.addEventListener("cpt-fit-update",function(t){e.cptProbability&&(e.cptProbability.g=t.detail.a),e.cptValue&&(e.cptValue.a=t.detail.a,e.cptValue.l=t.detail.l),e.decisionSpace&&(e.decisionSpace.a=t.detail.a,e.decisionSpace.l=t.detail.l,e.decisionSpace.g=t.detail.g)}),this.decisionControl&&(this.decisionControl.hasAttribute("trials")&&this.decisionControl.addEventListener("decision-control-trials",function(t){e.decisionTask&&(e.decisionTask.trials=t.detail.trials),e.decisionResponse&&(e.decisionResponse.trialTotal=t.detail.trials)}),this.decisionControl.hasAttribute("duration")&&this.decisionControl.addEventListener("decision-control-duration",function(t){e.decisionTask&&(e.decisionTask.duration=t.detail.duration,e.decisionTask.iti=t.detail.duration)}),this.decisionControl.hasAttribute("run")&&this.decisionControl.addEventListener("decision-control-run",function(){e.decisionTask&&(e.decisionTask.running=!0)}),this.decisionControl.hasAttribute("pause")&&this.decisionControl.addEventListener("decision-control-pause",function(){e.decisionTask&&(e.decisionTask.running=!1)}),this.decisionControl.hasAttribute("reset")&&this.decisionControl.addEventListener("decision-control-reset",function(){e.decisionTask&&e.decisionTask.reset(),e.decisionResponse&&e.decisionResponse.reset(),e.decisionSpace&&e.decisionSpace.clear(),e.cptFit&&e.cptFit.clear()})),this.decisionTask&&(this.decisionResponse&&(this.decisionResponse.trialTotal=this.decisionTask.trials),this.decisionTask.addEventListener("decision-trial-start",function(t){e.decisionResponse&&e.decisionResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial)}),this.decisionTask.addEventListener("decision-trial-end",function(){e.decisionResponse&&e.decisionResponse.stop()}),this.decisionTask.addEventListener("decision-block-end",function(){e.decisionControl&&e.decisionControl.complete()})),this.decisionResponse&&this.decisionResponse.addEventListener("decision-response",function(t){e.decisionSpace&&e.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString()),e.cptFit&&e.cptFit.set(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())})}}])&&o(t.prototype,e),n&&o(t,n),i}();n.default=c,customElements.define("cpt-example-human",c)},{"./cpt-example":701}],703:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CPTExampleHuman",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"CPTExampleInteractive",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"CPTExampleModel",{enumerable:!0,get:function(){return a.default}});var r=o(t("./human")),i=o(t("./interactive")),a=o(t("./model"));function o(t){return t&&t.__esModule?t:{default:t}}},{"./human":702,"./interactive":704,"./model":705}],704:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=t("./cpt-example"))&&r.__esModule?r:{default:r};function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n);return t=r?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,a.default);var e=c(n);function n(){var t;return function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(t=e.call(this)).a=.8,t.l=1.2,t.g=.8,t.xl=0,t.xw=20,t.pw=.5,t.xs=10,t.cptCalculation=null,t.cptProbability=null,t.cptSpace=null,t.cptValue=null,t.decisionChoice=null,t.decisionSpace=null,t}return l(n,null,[{key:"properties",get:function(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}}]),l(n,[{key:"firstUpdated",value:function(){var e=this;this.cptCalculation=this.querySelector("cpt-calculation"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.decisionChoice=this.querySelector("decision-choice"),this.decisionSpace=this.querySelector("decision-space"),this.cptCalculation&&this.cptCalculation.addEventListener("cpt-calculation-change",function(t){e.a=t.detail.a,e.l=t.detail.l,e.g=t.detail.g,e.xl=t.detail.xl,e.xw=t.detail.xw,e.pw=t.detail.pw,e.xs=t.detail.xs}),this.cptProbability&&this.cptProbability.addEventListener("cpt-probability-change",function(t){e.g=t.detail.g,e.pw=t.detail.p}),this.cptValue&&this.cptValue.addEventListener("cpt-value-change",function(t){e.a=t.detail.a,e.l=t.detail.l,"default"===t.detail.name?e.xs=t.detail.x:"gamble"===t.detail.name&&(e.xw=t.detail.x)}),this.decisionChoice&&this.decisionChoice.addEventListener("decision-choice-change",function(t){e.xl=t.detail.xl,e.xw=t.detail.xw,e.pw=t.detail.pw,e.xs=t.detail.xs}),this.requestUpdate()}},{key:"update",value:function(t){o(f(n.prototype),"update",this).call(this,t),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g,this.cptCalculation.xl=this.xl,this.cptCalculation.xw=this.xw,this.cptCalculation.pw=this.pw,this.cptCalculation.xs=this.xs),this.cptProbability&&this.cptProbability.set(this.pw,this.g,"default",""),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g,this.cptSpace.xl=this.xl,this.cptSpace.xw=this.xw,this.cptSpace.pw=this.pw,this.cptSpace.xs=this.xs),this.cptValue&&(this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g")),this.decisionChoice&&(this.decisionChoice.xl=this.xl,this.decisionChoice.xw=this.xw,this.decisionChoice.pw=this.pw,this.decisionChoice.xs=this.xs),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g,this.decisionSpace.xl=this.xl,this.decisionSpace.xw=this.xw,this.decisionSpace.pw=this.pw,this.decisionSpace.xs=this.xs)}}]),n}();n.default=h,customElements.define("cpt-example-interactive",h)},{"./cpt-example":701}],705:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=t("./cpt-example"))&&r.__esModule?r:{default:r};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n);return t=r?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,a.default);var t,e,n,r=l(i);function i(){return function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),r.apply(this,arguments)}return t=i,(e=[{key:"firstUpdated",value:function(){this.cptControl=this.querySelector("cpt-control"),this.cptValue=this.querySelector("cpt-value"),this.cptProbability=this.querySelector("cpt-probability")}}])&&o(t.prototype,e),n&&o(t,n),i}();n.default=c,customElements.define("cpt-example-model",c)},{"./cpt-example":701}],706:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={CPTElement:!0};Object.defineProperty(n,"CPTElement",{enumerable:!0,get:function(){return a.default}});var i,a=(i=t("./cpt-element"))&&i.__esModule?i:{default:i},o=t("./components");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in n&&n[t]===o[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}}))});var s=t("./equations");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in n&&n[t]===s[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}}))});var l=t("./examples");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in n&&n[t]===l[t]||Object.defineProperty(n,t,{enumerable:!0,get:function(){return l[t]}}))})},{"./components":693,"./cpt-element":695,"./equations":697,"./examples":703}],707:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(){!function(t){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}var t,n,r;return t=e,r=[{key:"xal2v",value:function(t,e,n){return 0<=t?Math.pow(t,e):-n*Math.pow(-t,e)}},{key:"xlv2a",value:function(t,e,n){return 0<=t?Math.log(n)/Math.log(t):(Math.log(-n)-Math.log(e))/Math.log(-t)}},{key:"xav2l",value:function(t,e,n){return 0<=t?1:-n/Math.pow(-t,e)}},{key:"pg2w",value:function(t,e){return Math.pow(t,e)/Math.pow(Math.pow(t,e)+Math.pow(1-t,e),1/e)}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}();n.default=r},{}],708:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i.default}});var r,i=(r=t("./cpt-math"))&&r.__esModule?r:{default:r}},{"./cpt-math":707}]},{},[706])(706)});
//# sourceMappingURL=index.js.map
